{"items":[{"tags":["java","spring","hibernate"],"comments":[{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1692863725,"post_id":76967058,"comment_id":135682411,"body_markdown":"have you tried to add `cascade = CascadeType.ALL` param  in class `A` on`@ManyToMany` relation ?","body":"have you tried to add <code>cascade = CascadeType.ALL</code> param  in class <code>A</code> on<code>@ManyToMany</code> relation ?"},{"owner":{"account_id":29288425,"reputation":1,"user_id":22439445,"display_name":"Miruna Dinu"},"score":0,"creation_date":1692867834,"post_id":76967058,"comment_id":135683279,"body_markdown":"@AndreiLisa we tried it and it did not change anything. After we changed from List to Set , the problem was solved.","body":"@AndreiLisa we tried it and it did not change anything. After we changed from List to Set , the problem was solved."}],"owner":{"account_id":29288425,"reputation":1,"user_id":22439445,"display_name":"Miruna Dinu"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692862015,"creation_date":1692862015,"question_id":76967058,"body_markdown":"I use Hibernate in a project and let it create my tables for all entities. My issue is:\r\n- I have a many-to-many relationship between entity A and entity B\r\n- The link table A_B is created but it is created as read-only\r\n\r\nFor entity A:\r\n\r\n```\r\n@Entity\r\n@Data\r\n@Table(name = &quot;A&quot;)\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\npublic class A{\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n    @Column(unique = true, nullable = false)\r\n    private String name;\r\n\r\n    @ManyToMany(fetch = FetchType.EAGER)\r\n    @JoinTable(\r\n            name = &quot;A_B&quot;,\r\n            joinColumns = @JoinColumn(name = &quot;A_id&quot;),\r\n            inverseJoinColumns = @JoinColumn(name = &quot;B_id&quot;)\r\n    )\r\n    private List&lt;B&gt; Bs= new ArrayList&lt;&gt;();\r\n}\r\n```\r\n\r\nFor entity B:\r\n\r\n```\r\n@Entity\r\n@Data\r\n@Table(name = &quot;B&quot;)\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\npublic class B {\r\n@Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n    @Column(nullable = false)\r\n    private String name;\r\n\r\n    @ManyToMany(mappedBy = &quot;Bs&quot;)\r\n    @JsonIgnore\r\n    private List&lt;A&gt; As= new ArrayList&lt;&gt;();\r\n}\r\n```\r\n\r\nI have another many-to-many relationship and the link table is created fine.\r\nWhat could cause this?\r\n\r\nI tried to drop the schema and regerate it, but it did not fix anything. I also checked my rights, but everything seems fine there.","title":"Hibernate creates one table as read-only","body":"<p>I use Hibernate in a project and let it create my tables for all entities. My issue is:</p>\n<ul>\n<li>I have a many-to-many relationship between entity A and entity B</li>\n<li>The link table A_B is created but it is created as read-only</li>\n</ul>\n<p>For entity A:</p>\n<pre><code>@Entity\n@Data\n@Table(name = &quot;A&quot;)\n@NoArgsConstructor\n@AllArgsConstructor\npublic class A{\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Column(unique = true, nullable = false)\n    private String name;\n\n    @ManyToMany(fetch = FetchType.EAGER)\n    @JoinTable(\n            name = &quot;A_B&quot;,\n            joinColumns = @JoinColumn(name = &quot;A_id&quot;),\n            inverseJoinColumns = @JoinColumn(name = &quot;B_id&quot;)\n    )\n    private List&lt;B&gt; Bs= new ArrayList&lt;&gt;();\n}\n</code></pre>\n<p>For entity B:</p>\n<pre><code>@Entity\n@Data\n@Table(name = &quot;B&quot;)\n@NoArgsConstructor\n@AllArgsConstructor\npublic class B {\n@Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Column(nullable = false)\n    private String name;\n\n    @ManyToMany(mappedBy = &quot;Bs&quot;)\n    @JsonIgnore\n    private List&lt;A&gt; As= new ArrayList&lt;&gt;();\n}\n</code></pre>\n<p>I have another many-to-many relationship and the link table is created fine.\nWhat could cause this?</p>\n<p>I tried to drop the schema and regerate it, but it did not fix anything. I also checked my rights, but everything seems fine there.</p>\n"},{"tags":["java","security","jsp","web-applications","session-cookies"],"comments":[{"owner":{"account_id":8326,"reputation":258555,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":0,"creation_date":1348652905,"post_id":12598919,"comment_id":16980683,"body_markdown":"does your load balancer support sticky sessions (so that the same session always goes to the same server)?","body":"does your load balancer support sticky sessions (so that the same session always goes to the same server)?"}],"answers":[{"comments":[{"owner":{"account_id":8326,"reputation":258555,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":0,"creation_date":1348652963,"post_id":12598976,"comment_id":16980707,"body_markdown":"+1 No changes to the application, but maybe more than just configuration. Could involve some infrastructure upgrade.","body":"+1 No changes to the application, but maybe more than just configuration. Could involve some infrastructure upgrade."},{"owner":{"account_id":1158808,"reputation":2629,"user_id":1138751,"accept_rate":83,"display_name":"Jeremiah Orr"},"score":1,"creation_date":1348679400,"post_id":12598976,"comment_id":16993604,"body_markdown":"Note that for session replication to work, you usually need to make sure you only add Serializable attributes to your session. Otherwise, the session itself can&#39;t be serialized and passed between servers. You should only be putting Serializable stuff in your session even if you aren&#39;t using replication, but it&#39;s something people often get away with; might require some changes to your application.","body":"Note that for session replication to work, you usually need to make sure you only add Serializable attributes to your session. Otherwise, the session itself can&#39;t be serialized and passed between servers. You should only be putting Serializable stuff in your session even if you aren&#39;t using replication, but it&#39;s something people often get away with; might require some changes to your application."}],"tags":[],"owner":{"account_id":299251,"reputation":335925,"user_id":605744,"accept_rate":100,"display_name":"Tomasz Nurkiewicz"},"comment_count":2,"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1348652889,"creation_date":1348652889,"answer_id":12598976,"question_id":12598919,"body_markdown":"You have two options:\r\n\r\n* **sticky session** - once some user hits one server, load balancer makes sure she will always use the exact same server.\r\n\r\n* **session replication** - every change in HTTP session is migrated to another nodde in the cluster. Load balancer remains unaffected.\r\n\r\nBoth approaches are configuration only, no changes to your application are required.","title":"session not shared between two server","body":"<p>You have two options:</p>\n\n<ul>\n<li><p><strong>sticky session</strong> - once some user hits one server, load balancer makes sure she will always use the exact same server.</p></li>\n<li><p><strong>session replication</strong> - every change in HTTP session is migrated to another nodde in the cluster. Load balancer remains unaffected.</p></li>\n</ul>\n\n<p>Both approaches are configuration only, no changes to your application are required.</p>\n"}],"owner":{"account_id":1271562,"reputation":141,"user_id":1227688,"accept_rate":73,"display_name":"tulsi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4381,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":12598976,"answer_count":1,"score":4,"last_activity_date":1692862007,"creation_date":1348652703,"question_id":12598919,"body_markdown":"i  have big trouble with my application that web-application(jsp,java,servlet)  landed between  two server cause \r\nthere is load-sharing between server but unfortunately session not maintaining  between server now i am checking checking after login if session is there than ok otherwise i am taking all credential from url (visible encoded url with same key if somebody remember url then big mess  ) obviously its not secure at all ,SO how we can resolve this problame at application level please guide me....... \r\n","title":"session not shared between two server","body":"<p>i  have big trouble with my application that web-application(jsp,java,servlet)  landed between  two server cause \nthere is load-sharing between server but unfortunately session not maintaining  between server now i am checking checking after login if session is there than ok otherwise i am taking all credential from url (visible encoded url with same key if somebody remember url then big mess  ) obviously its not secure at all ,SO how we can resolve this problame at application level please guide me....... </p>\n"},{"tags":["java","node.js","code-coverage","automation-testing"],"answers":[{"tags":[],"owner":{"account_id":16378191,"reputation":1,"user_id":11829846,"display_name":"Andrei Popruha"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675153192,"creation_date":1675153192,"answer_id":75294332,"question_id":74876124,"body_markdown":"Solution:\r\n\r\nUse a code coverage tool for Node.js such as Istanbul, NYC or Jest to instrument the code and collect coverage information during test runs.\r\n\r\nExport the coverage data in a format that can be used by other tools for analysis and reporting.\r\n\r\nIntegrate the coverage data with your existing Jacoco tool to have a unified coverage report for both development and automation projects.","title":"Code Coverage Instrumentation with different development and automation projects","body":"<p>Solution:</p>\n<p>Use a code coverage tool for Node.js such as Istanbul, NYC or Jest to instrument the code and collect coverage information during test runs.</p>\n<p>Export the coverage data in a format that can be used by other tools for analysis and reporting.</p>\n<p>Integrate the coverage data with your existing Jacoco tool to have a unified coverage report for both development and automation projects.</p>\n"}],"owner":{"account_id":3001560,"reputation":3651,"user_id":2546966,"accept_rate":60,"display_name":"Vivek Singh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":102,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692861850,"creation_date":1671626023,"question_id":74876124,"body_markdown":"`Problem Statement`\r\n\r\n&gt; Development project: nodejs\r\n&gt; unit tests: available\r\n\r\n\r\n&gt; Automation project: java\r\n\r\n`Problem`: for our development project we already have unit test coverage. But to figure out automation coverage, we require a medium of instrumenting nodejs code (deployed on some env) while running autotests.\r\n\r\n`Need hints on how to achieve same?` Have worked already on jacoco with both development and automation codes in java. Jacoco instruments flow while code is deployed and helps in providing various dump mechanism.\r\n","title":"Code Coverage Instrumentation with different development and automation projects","body":"<p><code>Problem Statement</code></p>\n<blockquote>\n<p>Development project: nodejs\nunit tests: available</p>\n</blockquote>\n<blockquote>\n<p>Automation project: java</p>\n</blockquote>\n<p><code>Problem</code>: for our development project we already have unit test coverage. But to figure out automation coverage, we require a medium of instrumenting nodejs code (deployed on some env) while running autotests.</p>\n<p><code>Need hints on how to achieve same?</code> Have worked already on jacoco with both development and automation codes in java. Jacoco instruments flow while code is deployed and helps in providing various dump mechanism.</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":2710506,"reputation":4264,"user_id":2339071,"accept_rate":52,"display_name":"user2339071"},"score":0,"creation_date":1378312953,"post_id":18619425,"comment_id":27408330,"body_markdown":"Show some code. It&#39;s difficult to answer questions without seeing what you have actually tried..","body":"Show some code. It&#39;s difficult to answer questions without seeing what you have actually tried.."},{"owner":{"account_id":288478,"reputation":17040,"user_id":588916,"accept_rate":60,"display_name":"collapsar"},"score":0,"creation_date":1378312956,"post_id":18619425,"comment_id":27408334,"body_markdown":"is your `x` fixed or variable?","body":"is your <code>x</code> fixed or variable?"},{"owner":{"account_id":1045249,"reputation":3627,"user_id":1050389,"accept_rate":56,"display_name":"aclowkay"},"score":0,"creation_date":1378315771,"post_id":18619425,"comment_id":27409809,"body_markdown":"I&#39;ve added what I&#39;ve done, and yes x is a fixed variable","body":"I&#39;ve added what I&#39;ve done, and yes x is a fixed variable"}],"answers":[{"comments":[{"owner":{"account_id":1045249,"reputation":3627,"user_id":1050389,"accept_rate":56,"display_name":"aclowkay"},"score":0,"creation_date":1378318120,"post_id":18620355,"comment_id":27411033,"body_markdown":"That&#39;s fine for a simple regular expression, but one which involves optional characters wouldn&#39;t work right with this. I&#39;ll give an example in the post itself","body":"That&#39;s fine for a simple regular expression, but one which involves optional characters wouldn&#39;t work right with this. I&#39;ll give an example in the post itself"},{"owner":{"account_id":3249338,"reputation":2505,"user_id":2740071,"accept_rate":80,"display_name":"Melih Altıntaş"},"score":0,"creation_date":1378319262,"post_id":18620355,"comment_id":27411597,"body_markdown":"&quot;First of all, this wouldn&#39;t be able to captures ones without at least 5 characters before&quot;.But you said that 5 is a fixed .{0,5} means 0,1,2,3,4,5 characters will be matched","body":"&quot;First of all, this wouldn&#39;t be able to captures ones without at least 5 characters before&quot;.But you said that 5 is a fixed .{0,5} means 0,1,2,3,4,5 characters will be matched"},{"owner":{"account_id":3249338,"reputation":2505,"user_id":2740071,"accept_rate":80,"display_name":"Melih Altıntaş"},"score":0,"creation_date":1378319893,"post_id":18620355,"comment_id":27411910,"body_markdown":"Also i didn&#39;t understand this sentence : &quot; very nice for that simple regex (\\d{2}) but for one like &quot;c?at&quot; and the given text &quot;cat&quot; this would match the groups\nc\nat\n 3.&quot;","body":"Also i didn&#39;t understand this sentence : &quot; very nice for that simple regex (\\d{2}) but for one like &quot;c?at&quot; and the given text &quot;cat&quot; this would match the groups c at  3.&quot;"},{"owner":{"account_id":1045249,"reputation":3627,"user_id":1050389,"accept_rate":56,"display_name":"aclowkay"},"score":0,"creation_date":1378390188,"post_id":18620355,"comment_id":27440849,"body_markdown":"The center group of the regex wouldn&#39;t match what I want it to","body":"The center group of the regex wouldn&#39;t match what I want it to"}],"tags":[],"owner":{"account_id":3249338,"reputation":2505,"user_id":2740071,"accept_rate":80,"display_name":"Melih Altıntaş"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1378316161,"creation_date":1378316161,"answer_id":18620355,"question_id":18619425,"body_markdown":"    String text = &quot;Some 22 text with 44 characters&quot;;\r\n    Matcher matcher = Pattern.compile(&quot;(.{5})(\\\\d{2})(.{5})&quot;).matcher(text);\r\n\r\n    while (matcher.find()) {\r\n        System.out.println(matcher.group(1) + &quot; - &quot; + matcher.group(2) + &quot; - &quot; + matcher.group(3));\r\n    }\r\n\r\noutput : \r\n\r\n    Some  - 22 -  text\r\n    with  - 44 -  char\r\n\r\n","title":"Getting the &quot;context&quot; text of a matched group","body":"<pre><code>String text = \"Some 22 text with 44 characters\";\nMatcher matcher = Pattern.compile(\"(.{5})(\\\\d{2})(.{5})\").matcher(text);\n\nwhile (matcher.find()) {\n    System.out.println(matcher.group(1) + \" - \" + matcher.group(2) + \" - \" + matcher.group(3));\n}\n</code></pre>\n\n<p>output : </p>\n\n<pre><code>Some  - 22 -  text\nwith  - 44 -  char\n</code></pre>\n"}],"owner":{"account_id":1045249,"reputation":3627,"user_id":1050389,"accept_rate":56,"display_name":"aclowkay"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":509,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692861763,"creation_date":1378312872,"question_id":18619425,"body_markdown":"I&#39;m using the Matcher class of Java to get some strings, now when I get my matches, I also find their begin index and end index. Now what I want to do is get the **x** preceding and proceeding characters.\r\n\r\nSo what I did was just call the substring method on  the string with `{begin index minus `**x**`}` to `{end index plus `**x**`}`, but it seems to be a little heavy, for every match, I&#39;ll have to loop the string for it&#39;s context.\r\n\r\nI wanted to know whether there&#39;s a better way to do that.\r\n\r\nHere is what I&#39;ve done so far:\r\nThe part that bothers me is the `text.substring`, how expensive is it\r\n\r\n    \tString text = &quot;Some 22 text with 44 characters&quot;;\r\n\t\tMatcher matcher = Pattern.compile(&quot;\\\\d{2}&quot;).matcher(text);\r\n\t\tint x = 5;\r\n\t\twhile (matcher.find()) {\r\n\t\t\tString match = matcher.group();\r\n\t\t\tint start = matcher.start();\r\n\t\t\tint end = matcher.end();\r\n\t\t\tString pretext = text.substring(start - x, start);\r\n\t\t\tString postext = text.substring(end, end + x);\r\n\t\t\tSystem.out.println(pretext + &quot; - &quot; + match + &quot; - &quot; + postext);\r\n\t\t}\r\n\r\nSuggested answer of using grouping to solve this:\r\nusing the `regex (.{5})(\\d{2}(.{5})`.\r\nFirst of all, this wouldn&#39;t be able to captures ones without at least 5 characters before it. So the solution to that is `(.{0,5})(\\d{2})(.{0.5})`, very nice for that simple regex `(\\d{2}) `but for one like &quot;`c?at`&quot; and the given text &quot;cat&quot; this would match the groups\r\n\r\n 1. c\r\n 2. at\r\n 3. &amp;nbsp;\r\n\r\n","title":"Getting the &quot;context&quot; text of a matched group","body":"<p>I'm using the Matcher class of Java to get some strings, now when I get my matches, I also find their begin index and end index. Now what I want to do is get the <strong>x</strong> preceding and proceeding characters.</p>\n\n<p>So what I did was just call the substring method on  the string with <code>{begin index minus</code><strong>x</strong><code>}</code> to <code>{end index plus</code><strong>x</strong><code>}</code>, but it seems to be a little heavy, for every match, I'll have to loop the string for it's context.</p>\n\n<p>I wanted to know whether there's a better way to do that.</p>\n\n<p>Here is what I've done so far:\nThe part that bothers me is the <code>text.substring</code>, how expensive is it</p>\n\n<pre><code>    String text = \"Some 22 text with 44 characters\";\n    Matcher matcher = Pattern.compile(\"\\\\d{2}\").matcher(text);\n    int x = 5;\n    while (matcher.find()) {\n        String match = matcher.group();\n        int start = matcher.start();\n        int end = matcher.end();\n        String pretext = text.substring(start - x, start);\n        String postext = text.substring(end, end + x);\n        System.out.println(pretext + \" - \" + match + \" - \" + postext);\n    }\n</code></pre>\n\n<p>Suggested answer of using grouping to solve this:\nusing the <code>regex (.{5})(\\d{2}(.{5})</code>.\nFirst of all, this wouldn't be able to captures ones without at least 5 characters before it. So the solution to that is <code>(.{0,5})(\\d{2})(.{0.5})</code>, very nice for that simple regex <code>(\\d{2})</code>but for one like \"<code>c?at</code>\" and the given text \"cat\" this would match the groups</p>\n\n<ol>\n<li>c</li>\n<li>at</li>\n<li>&nbsp;</li>\n</ol>\n"},{"tags":["java","macos","selenium-webdriver","safari"],"answers":[{"tags":[],"owner":{"account_id":11307943,"reputation":527,"user_id":8291902,"display_name":"nosequeweaponer"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1569949858,"creation_date":1569949858,"answer_id":58189469,"question_id":57617400,"body_markdown":"As the automation speed is very fast on Safari, the only solution for this was the &quot;old friend forever&quot;:\r\n\r\n    Thread.sleep\r\n\r\nThat was the only solution, because the Implicit and Explicit waits were not working.","title":"Selenium Java in Safari - Switch to new tab is not working","body":"<p>As the automation speed is very fast on Safari, the only solution for this was the \"old friend forever\":</p>\n\n<pre><code>Thread.sleep\n</code></pre>\n\n<p>That was the only solution, because the Implicit and Explicit waits were not working.</p>\n"},{"tags":[],"owner":{"account_id":28956620,"reputation":1,"user_id":22180041,"display_name":"erdemkiiliic"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692861612,"creation_date":1692642033,"answer_id":76947844,"question_id":57617400,"body_markdown":"The issue arises from Safari not bringing the handles in the same order each time. The following if statement will solve the problem. **Note:** This method might not be practical for more than two windows. \r\n\r\nSometimes it comes like\r\n```none\r\n[14B5EF7BD89C54D7345C1AC97BFAA11E, AE475A81A928CAB4739975EA464408C4]\r\n```\r\nand other times it can come like\r\n```none\r\n[AE475A81A928CAB4739975EA464408C4, 14B5EF7BD89C54D7345C1AC97BFAA11E]\r\n```\r\n------------------------\r\n    String currentWindow = getWebDriver().getWindowHandle();\r\n    Set&lt;String&gt; handles = getWebDriver().getWindowHandles();\r\n    for (String strWinHandle : handles) {\r\n        if(!currentWindow.equals(strWinHandle)){\r\n            getWebDriver().switchTo().window(strWinHandle);\r\n        }\r\n    }\r\n","title":"Selenium Java in Safari - Switch to new tab is not working","body":"<p>The issue arises from Safari not bringing the handles in the same order each time. The following if statement will solve the problem. <strong>Note:</strong> This method might not be practical for more than two windows.</p>\n<p>Sometimes it comes like</p>\n<pre class=\"lang-none prettyprint-override\"><code>[14B5EF7BD89C54D7345C1AC97BFAA11E, AE475A81A928CAB4739975EA464408C4]\n</code></pre>\n<p>and other times it can come like</p>\n<pre class=\"lang-none prettyprint-override\"><code>[AE475A81A928CAB4739975EA464408C4, 14B5EF7BD89C54D7345C1AC97BFAA11E]\n</code></pre>\n<hr />\n<pre><code>String currentWindow = getWebDriver().getWindowHandle();\nSet&lt;String&gt; handles = getWebDriver().getWindowHandles();\nfor (String strWinHandle : handles) {\n    if(!currentWindow.equals(strWinHandle)){\n        getWebDriver().switchTo().window(strWinHandle);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":11307943,"reputation":527,"user_id":8291902,"display_name":"nosequeweaponer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2601,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":58189469,"answer_count":2,"score":0,"last_activity_date":1692861612,"creation_date":1566510289,"question_id":57617400,"body_markdown":"I have the next situation:\r\n\r\nI&#39;m running Automation in MacOS with Selenium in Safari.\r\nI want to take control over a new tab opened (Switch to a new tab in Safari)\r\n\r\nI&#39;m able to do it with Chrome and Firefox, but in Safari does not work.\r\n\r\nThe next code is what I&#39;m using for that:\r\n\r\n        //Store the parent window\r\n        String parentWindow = driver.getWindowHandle();\r\n\r\n        //Open a new Windows(Mailtrap)\r\n        String a = &quot;window.open(&#39;https://mailtrap.io/signin&#39;,&#39;_blank&#39;);&quot;;\r\n        ((JavascriptExecutor)driver).executeScript(a);\r\n\r\n\r\n        //Take control over new browser\r\n        for(String handle: driver.getWindowHandles()){\r\n            driver.switchTo().window(handle);\r\n        }\r\n\r\n        //Make the same actions over new window\r\n        driver.manage().window().maximize();\r\n\r\n        driver.switchTo().defaultContent();\r\n\r\nAfter that...\r\n\r\n //Close window and back to the parent window\r\n        \r\n        driver.close();\r\n        driver.switchTo().window(parentWindow);\r\n        driver.switchTo().defaultContent();\r\n\r\nAs I told before: It works in Firefox, Chrome, IE11, but in Safari 12.0.3 this is the message when I do a manual click over a tab.\r\n\r\n&quot;This Safari window is remotely controlled by an automated test.&quot;\r\n\r\nTo interact with this Safari window, you need to stop the current automated test session.\r\nYou should not use this window for normal web browsing.\r\n\r\n&quot;Turn OFF All Automation&quot; , &quot;Stop Session&quot;, &quot;Continue Session&quot;\r\n\r\nCould anybody help me with this?\r\n\r\n\r\nPS: Develop --&gt; Allow remote automation is selected.","title":"Selenium Java in Safari - Switch to new tab is not working","body":"<p>I have the next situation:</p>\n\n<p>I'm running Automation in MacOS with Selenium in Safari.\nI want to take control over a new tab opened (Switch to a new tab in Safari)</p>\n\n<p>I'm able to do it with Chrome and Firefox, but in Safari does not work.</p>\n\n<p>The next code is what I'm using for that:</p>\n\n<pre><code>    //Store the parent window\n    String parentWindow = driver.getWindowHandle();\n\n    //Open a new Windows(Mailtrap)\n    String a = \"window.open('https://mailtrap.io/signin','_blank');\";\n    ((JavascriptExecutor)driver).executeScript(a);\n\n\n    //Take control over new browser\n    for(String handle: driver.getWindowHandles()){\n        driver.switchTo().window(handle);\n    }\n\n    //Make the same actions over new window\n    driver.manage().window().maximize();\n\n    driver.switchTo().defaultContent();\n</code></pre>\n\n<p>After that...</p>\n\n<p>//Close window and back to the parent window</p>\n\n<pre><code>    driver.close();\n    driver.switchTo().window(parentWindow);\n    driver.switchTo().defaultContent();\n</code></pre>\n\n<p>As I told before: It works in Firefox, Chrome, IE11, but in Safari 12.0.3 this is the message when I do a manual click over a tab.</p>\n\n<p>\"This Safari window is remotely controlled by an automated test.\"</p>\n\n<p>To interact with this Safari window, you need to stop the current automated test session.\nYou should not use this window for normal web browsing.</p>\n\n<p>\"Turn OFF All Automation\" , \"Stop Session\", \"Continue Session\"</p>\n\n<p>Could anybody help me with this?</p>\n\n<p>PS: Develop --> Allow remote automation is selected.</p>\n"},{"tags":["java","google-cloud-platform","deployment","google-cloud-functions","service-accounts"],"answers":[{"tags":[],"owner":{"account_id":15760814,"reputation":68973,"user_id":11372593,"display_name":"guillaume blaquiere"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692860485,"creation_date":1692860485,"answer_id":76966876,"question_id":76966184,"body_markdown":"In fact, there is no parameter for that. The GCLOUD CLI offers convenient feature but, as usual, nothing is magic!\r\n\r\nHave a try yourself. Perform your command with the `--allow-unauthenticated` flag and add the flag `--log-http`. This flag will display all the API calls performed by the CLI.\r\n\r\nAnd you will see that the CLI perform the function deployment AND another calls to grant the `allUsers` as Functions Invoker.\r\n\r\n----\r\n\r\nBecause of that, if you want to grant Function Invoker another account than `allUsers` you have to perform yourself this additional operation.\r\n\r\nUse `gcloud functions add-iam-policy-binding --member=...` or the new one `gcloud functions add-invoker-policy-binding --member=...` (same as before, but you haven&#39;t the role to mention)\r\n\r\n---\r\n\r\nIf you want to use the API it&#39;s a bit difficult. In fact, there is no API call to ADD a policy. Only a get and a set.\r\n\r\nTherefore, you need to [GET][1] all the policies on the Cloud Functions, add &quot;manually&quot; (programmatically) the account with its role in the JSON, and then [POST (set)][2] the whole JSON with the new policy.\r\n\r\n*It&#39;s exactly what the CLI do, if you have a closer look to the --log-http trace.*\r\n\r\n\r\n  [1]: https://cloud.google.com/functions/docs/reference/rest/v2/projects.locations.functions/getIamPolicy\r\n  [2]: https://cloud.google.com/functions/docs/reference/rest/v2/projects.locations.functions/setIamPolicy","title":"How to deploy gcloud function by setting service account as permission?","body":"<p>In fact, there is no parameter for that. The GCLOUD CLI offers convenient feature but, as usual, nothing is magic!</p>\n<p>Have a try yourself. Perform your command with the <code>--allow-unauthenticated</code> flag and add the flag <code>--log-http</code>. This flag will display all the API calls performed by the CLI.</p>\n<p>And you will see that the CLI perform the function deployment AND another calls to grant the <code>allUsers</code> as Functions Invoker.</p>\n<hr />\n<p>Because of that, if you want to grant Function Invoker another account than <code>allUsers</code> you have to perform yourself this additional operation.</p>\n<p>Use <code>gcloud functions add-iam-policy-binding --member=...</code> or the new one <code>gcloud functions add-invoker-policy-binding --member=...</code> (same as before, but you haven't the role to mention)</p>\n<hr />\n<p>If you want to use the API it's a bit difficult. In fact, there is no API call to ADD a policy. Only a get and a set.</p>\n<p>Therefore, you need to <a href=\"https://cloud.google.com/functions/docs/reference/rest/v2/projects.locations.functions/getIamPolicy\" rel=\"nofollow noreferrer\">GET</a> all the policies on the Cloud Functions, add &quot;manually&quot; (programmatically) the account with its role in the JSON, and then <a href=\"https://cloud.google.com/functions/docs/reference/rest/v2/projects.locations.functions/setIamPolicy\" rel=\"nofollow noreferrer\">POST (set)</a> the whole JSON with the new policy.</p>\n<p><em>It's exactly what the CLI do, if you have a closer look to the --log-http trace.</em></p>\n"},{"tags":[],"owner":{"account_id":8056024,"reputation":2595,"user_id":6073141,"display_name":"al-dann"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692861369,"creation_date":1692861369,"answer_id":76966986,"question_id":76966184,"body_markdown":"Not sure I understand your question, but from the best of my guesses of your concerns...\r\n\r\nYou might like to check the `gcloud functions deploy` CLI description here: [gcloud functions deploy][1]\r\n\r\nIn particular the parameter `--run-service-account` (for gen2 cloud functions) and `--service-account` (for the original cloud functions), which defines under which service account (and its IAM roles) the given cloud function is to be executed. Thus, what the code of the given cloud function is permitted to do with other APIs. The description is here: [--run-service-account][2] and [--service-account][3]\r\n\r\nYou also might like to decide what IAM roles should that service account have so that the cloud function can achieve what it is supposed to do, but won&#39;t get too wide permissions to avoid unnecessary security risks. And assign/manage the relevant roles to the service account independently from the cloud function deployment.\r\n\r\nThe details can be found at the [Function Identity][4] section of the documentation.\r\n\r\nHowever, all of the above has nothing to do with who and how triggers the cloud function. Not sure if you are interested in that area. \r\n\r\nIn case of gen2 cloud functions the CLI parameter might be `--trigger-service-account` with the description here: [--trigger-service-account][5]\r\n\r\nIf your use case is different and more complex, you might like to describe it in more details, so the requirements are clearly articulated.\r\n\r\n\r\n  [1]: https://cloud.google.com/sdk/gcloud/reference/functions/deploy\r\n  [2]: https://cloud.google.com/sdk/gcloud/reference/functions/deploy#--run-service-account\r\n  [3]: https://cloud.google.com/sdk/gcloud/reference/functions/deploy#--service-account\r\n  [4]: https://cloud.google.com/functions/docs/securing/function-identity\r\n  [5]: https://cloud.google.com/sdk/gcloud/reference/functions/deploy#--trigger-service-account","title":"How to deploy gcloud function by setting service account as permission?","body":"<p>Not sure I understand your question, but from the best of my guesses of your concerns...</p>\n<p>You might like to check the <code>gcloud functions deploy</code> CLI description here: <a href=\"https://cloud.google.com/sdk/gcloud/reference/functions/deploy\" rel=\"nofollow noreferrer\">gcloud functions deploy</a></p>\n<p>In particular the parameter <code>--run-service-account</code> (for gen2 cloud functions) and <code>--service-account</code> (for the original cloud functions), which defines under which service account (and its IAM roles) the given cloud function is to be executed. Thus, what the code of the given cloud function is permitted to do with other APIs. The description is here: <a href=\"https://cloud.google.com/sdk/gcloud/reference/functions/deploy#--run-service-account\" rel=\"nofollow noreferrer\">--run-service-account</a> and <a href=\"https://cloud.google.com/sdk/gcloud/reference/functions/deploy#--service-account\" rel=\"nofollow noreferrer\">--service-account</a></p>\n<p>You also might like to decide what IAM roles should that service account have so that the cloud function can achieve what it is supposed to do, but won't get too wide permissions to avoid unnecessary security risks. And assign/manage the relevant roles to the service account independently from the cloud function deployment.</p>\n<p>The details can be found at the <a href=\"https://cloud.google.com/functions/docs/securing/function-identity\" rel=\"nofollow noreferrer\">Function Identity</a> section of the documentation.</p>\n<p>However, all of the above has nothing to do with who and how triggers the cloud function. Not sure if you are interested in that area.</p>\n<p>In case of gen2 cloud functions the CLI parameter might be <code>--trigger-service-account</code> with the description here: <a href=\"https://cloud.google.com/sdk/gcloud/reference/functions/deploy#--trigger-service-account\" rel=\"nofollow noreferrer\">--trigger-service-account</a></p>\n<p>If your use case is different and more complex, you might like to describe it in more details, so the requirements are clearly articulated.</p>\n"}],"owner":{"account_id":14424776,"reputation":199,"user_id":10419901,"display_name":"Renee"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":151,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1692861369,"creation_date":1692850493,"question_id":76966184,"body_markdown":"I want to deploy a Google cloud function. This cloud function needs to have service account as cloud function invoker. To set allUsers as permission, we use --allow-unauthenticated flag.\r\n\r\nThis is the command I am using for deploying:\r\n\r\ngcloud functions deploy functionTemp --entry-point functions.FunctionTemp --runtime java11 --trigger-http --memory 512MB --source=FunctionTemp\r\n\r\n\r\nAs mentioned adding --allow-unauthenticated adds allUsers as cloud invoker permission. If I want to sery default service account as cloud invoker and not allUsers, how do I change the command? I am not able to find proper solution for it\r\n\r\nI tried service-account flag but that&#39;s not used for the purpose I am using it and also if we are using default service account, we don&#39;t even have to specify this flag.\r\n\r\nWe can set the permission for this cloud function in the api service pages but I want to do it manually. I am stuck here. Any help would be appreciated.","title":"How to deploy gcloud function by setting service account as permission?","body":"<p>I want to deploy a Google cloud function. This cloud function needs to have service account as cloud function invoker. To set allUsers as permission, we use --allow-unauthenticated flag.</p>\n<p>This is the command I am using for deploying:</p>\n<p>gcloud functions deploy functionTemp --entry-point functions.FunctionTemp --runtime java11 --trigger-http --memory 512MB --source=FunctionTemp</p>\n<p>As mentioned adding --allow-unauthenticated adds allUsers as cloud invoker permission. If I want to sery default service account as cloud invoker and not allUsers, how do I change the command? I am not able to find proper solution for it</p>\n<p>I tried service-account flag but that's not used for the purpose I am using it and also if we are using default service account, we don't even have to specify this flag.</p>\n<p>We can set the permission for this cloud function in the api service pages but I want to do it manually. I am stuck here. Any help would be appreciated.</p>\n"},{"tags":["java","selenium-webdriver","testng","qaf"],"answers":[{"comments":[{"owner":{"account_id":12044988,"reputation":17,"user_id":10069320,"display_name":"Renish K.R"},"score":0,"creation_date":1692841097,"post_id":76963221,"comment_id":135679997,"body_markdown":"Hi @user861594, How do I get access to the snapshot?","body":"Hi @user861594, How do I get access to the snapshot?"},{"owner":{"account_id":460481,"reputation":5813,"user_id":861594,"display_name":"user861594"},"score":0,"creation_date":1693120236,"post_id":76963221,"comment_id":135716246,"body_markdown":"you need to add snapshot repository entry in dependency management file (in pom.xml if using maven, ivy.xml if using ivy). BTW 4.0.0-RC2 is released and available in maven central repository.","body":"you need to add snapshot repository entry in dependency management file (in pom.xml if using maven, ivy.xml if using ivy). BTW 4.0.0-RC2 is released and available in maven central repository."}],"tags":[],"owner":{"account_id":460481,"reputation":5813,"user_id":861594,"display_name":"user861594"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1692807709,"creation_date":1692807709,"answer_id":76963221,"question_id":76959048,"body_markdown":"Most likely because of [known bug][1]. It has been fixed and should be available in next release. You can try 4.0.0-SNAPSHOT from https://oss.sonatype.org/content/repositories/snapshots/ to make sure that issue is because of that bug.\r\n\r\n\r\n  [1]: https://github.com/qmetry/qaf/issues/444","title":"QAF | Desired capabilities not working with QAF 4.0.0RC1 &amp; Selenium 4","body":"<p>Most likely because of <a href=\"https://github.com/qmetry/qaf/issues/444\" rel=\"nofollow noreferrer\">known bug</a>. It has been fixed and should be available in next release. You can try 4.0.0-SNAPSHOT from <a href=\"https://oss.sonatype.org/content/repositories/snapshots/\" rel=\"nofollow noreferrer\">https://oss.sonatype.org/content/repositories/snapshots/</a> to make sure that issue is because of that bug.</p>\n"}],"owner":{"account_id":12044988,"reputation":17,"user_id":10069320,"display_name":"Renish K.R"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76963221,"answer_count":1,"score":0,"last_activity_date":1692861305,"creation_date":1692774518,"question_id":76959048,"body_markdown":"Desired capabilities are not working after upgrade to QAF 4.0.0RC1 with Selenium 4. I have tried below properties:\r\n\r\n    chrome.additional.capabilities​​={&quot;chromeOptions&quot;:{&quot;args&quot;:[&quot;--headless=new&quot;,&quot;--window-size=3000,1080&quot;]}}\r\n    driver.additional.capabilities={&quot;chromeOptions&quot;:{&quot;args&quot;:[&quot;--headless=new&quot;,&quot;--window-size=1920,1080&quot;]}\r\n    chrome.additional.capabilities​​={&quot;goog:chromeOptions&quot;:{&quot;args&quot;:[&quot;--headless=new&quot;,&quot;--window-size=3000,1080&quot;]}}\r\n    driver.additional.capabilities={&quot;goog:chromeOptions&quot;:{&quot;args&quot;:[&quot;--headless=new&quot;,&quot;--window-size=1920,1080&quot;]}\r\n\r\nI have referred below link and the desired capabilities are working for QAF 3.0.1 with Selenium 3.\r\nhttps://qmetry.github.io/qaf/qaf-2.1.15/setting_driver_capabilities.html\r\n\r\nChrome to accept the capabilities.","title":"QAF | Desired capabilities not working with QAF 4.0.0RC1 &amp; Selenium 4","body":"<p>Desired capabilities are not working after upgrade to QAF 4.0.0RC1 with Selenium 4. I have tried below properties:</p>\n<pre><code>chrome.additional.capabilities​​={&quot;chromeOptions&quot;:{&quot;args&quot;:[&quot;--headless=new&quot;,&quot;--window-size=3000,1080&quot;]}}\ndriver.additional.capabilities={&quot;chromeOptions&quot;:{&quot;args&quot;:[&quot;--headless=new&quot;,&quot;--window-size=1920,1080&quot;]}\nchrome.additional.capabilities​​={&quot;goog:chromeOptions&quot;:{&quot;args&quot;:[&quot;--headless=new&quot;,&quot;--window-size=3000,1080&quot;]}}\ndriver.additional.capabilities={&quot;goog:chromeOptions&quot;:{&quot;args&quot;:[&quot;--headless=new&quot;,&quot;--window-size=1920,1080&quot;]}\n</code></pre>\n<p>I have referred below link and the desired capabilities are working for QAF 3.0.1 with Selenium 3.\n<a href=\"https://qmetry.github.io/qaf/qaf-2.1.15/setting_driver_capabilities.html\" rel=\"nofollow noreferrer\">https://qmetry.github.io/qaf/qaf-2.1.15/setting_driver_capabilities.html</a></p>\n<p>Chrome to accept the capabilities.</p>\n"},{"tags":["java","spring","spring-cloud-sleuth","spring-micrometer","micrometer-tracing"],"comments":[{"owner":{"account_id":4809624,"reputation":3467,"user_id":3883475,"accept_rate":85,"display_name":"Ironluca"},"score":0,"creation_date":1692780594,"post_id":76958644,"comment_id":135669656,"body_markdown":"I am not familiar with Spring, however, it looks like it adds custom headers. That can be achieved through custom interceptors, refer: https://stackoverflow.com/questions/48327796/apache-httpclient-custom-dynamic-header-on-every-request Far as I can recollect, there is nothing ready made for including trace headers","body":"I am not familiar with Spring, however, it looks like it adds custom headers. That can be achieved through custom interceptors, refer: <a href=\"https://stackoverflow.com/questions/48327796/apache-httpclient-custom-dynamic-header-on-every-request\" title=\"apache httpclient custom dynamic header on every request\">stackoverflow.com/questions/48327796/&hellip;</a> Far as I can recollect, there is nothing ready made for including trace headers"},{"owner":{"account_id":11296302,"reputation":2929,"user_id":8283737,"accept_rate":89,"display_name":"Arun Gowda"},"score":0,"creation_date":1692780680,"post_id":76958644,"comment_id":135669669,"body_markdown":"Yes. Writing custom interceptor is the last option I&#39;d be looking at.","body":"Yes. Writing custom interceptor is the last option I&#39;d be looking at."},{"owner":{"account_id":4809624,"reputation":3467,"user_id":3883475,"accept_rate":85,"display_name":"Ironluca"},"score":0,"creation_date":1692781173,"post_id":76958644,"comment_id":135669755,"body_markdown":":) I suppose then you have to get on with it, there is really nothing ready made. You certainly could look at the Spring interceptor for the core mechanics, that would help","body":":) I suppose then you have to get on with it, there is really nothing ready made. You certainly could look at the Spring interceptor for the core mechanics, that would help"},{"owner":{"account_id":11296302,"reputation":2929,"user_id":8283737,"accept_rate":89,"display_name":"Arun Gowda"},"score":0,"creation_date":1692781756,"post_id":76958644,"comment_id":135669875,"body_markdown":"I&#39;ll take a look into that. Thanks.","body":"I&#39;ll take a look into that. Thanks."}],"answers":[{"tags":[],"owner":{"account_id":11296302,"reputation":2929,"user_id":8283737,"accept_rate":89,"display_name":"Arun Gowda"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1692861264,"creation_date":1692861264,"answer_id":76966971,"question_id":76958644,"body_markdown":"Alright so I am using Zipkin&#39;s brave as the tracing vendor. During my investigation into potential instrumentation support, I came across relevant information in [this resource][1]\r\n\r\nAlthough the documentation there gave me an idea on  how to use it, the code example was calling a wrong method.\r\n\r\nHere&#39;s how I configured my http client5.\r\n\r\n1. First add the dependency in pom.xml\r\n\r\n         &lt;dependency&gt;\r\n            &lt;groupId&gt;io.zipkin.brave&lt;/groupId&gt;\r\n            &lt;artifactId&gt;brave-instrumentation-httpclient5&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n\r\n\r\n2. Then Configure the Apache http client as below.\r\n\r\n        @Bean\r\n        public HttpTracing create(Tracing tracing) {\r\n            return HttpTracing\r\n                    .newBuilder(tracing)\r\n                    .build();\r\n        }\r\n\r\n        @Bean\r\n        public CloseableHttpClient httpClient(HttpTracing httpTracing) {\r\n            HttpClientBuilder httpClientBuilder = HttpClients.custom();\r\n\r\n            return HttpClient5Tracing.newBuilder(httpTracing)\r\n                    .build(httpClientBuilder);\r\n        }\r\nIn addition to Zipkin&#39;s &#39;brave,&#39; another recommended tracing vendor according to Spring is Opentelemetry. Nevertheless, as of now, it appears that their instrumentation libraries are still in the process of being developed, as indicated by [their maven repo][2].\r\n\r\n  [1]: https://github.com/openzipkin/brave/tree/master/instrumentation/httpclient5\r\n  [2]: https://mvnrepository.com/artifact/io.opentelemetry.instrumentation/opentelemetry-apache-httpclient-4.3/1.12.1-alpha","title":"TracingClientHttpRequestInterceptor equivalent for Apache http client","body":"<p>Alright so I am using Zipkin's brave as the tracing vendor. During my investigation into potential instrumentation support, I came across relevant information in <a href=\"https://github.com/openzipkin/brave/tree/master/instrumentation/httpclient5\" rel=\"nofollow noreferrer\">this resource</a></p>\n<p>Although the documentation there gave me an idea on  how to use it, the code example was calling a wrong method.</p>\n<p>Here's how I configured my http client5.</p>\n<ol>\n<li><p>First add the dependency in pom.xml</p>\n<pre><code>  &lt;dependency&gt;\n     &lt;groupId&gt;io.zipkin.brave&lt;/groupId&gt;\n     &lt;artifactId&gt;brave-instrumentation-httpclient5&lt;/artifactId&gt;\n &lt;/dependency&gt;\n</code></pre>\n</li>\n<li><p>Then Configure the Apache http client as below.</p>\n<pre><code> @Bean\n public HttpTracing create(Tracing tracing) {\n     return HttpTracing\n             .newBuilder(tracing)\n             .build();\n }\n\n @Bean\n public CloseableHttpClient httpClient(HttpTracing httpTracing) {\n     HttpClientBuilder httpClientBuilder = HttpClients.custom();\n\n     return HttpClient5Tracing.newBuilder(httpTracing)\n             .build(httpClientBuilder);\n }\n</code></pre>\n</li>\n</ol>\n<p>In addition to Zipkin's 'brave,' another recommended tracing vendor according to Spring is Opentelemetry. Nevertheless, as of now, it appears that their instrumentation libraries are still in the process of being developed, as indicated by <a href=\"https://mvnrepository.com/artifact/io.opentelemetry.instrumentation/opentelemetry-apache-httpclient-4.3/1.12.1-alpha\" rel=\"nofollow noreferrer\">their maven repo</a>.</p>\n"}],"owner":{"account_id":11296302,"reputation":2929,"user_id":8283737,"accept_rate":89,"display_name":"Arun Gowda"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":280,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76966971,"answer_count":1,"score":2,"last_activity_date":1692861264,"creation_date":1692770467,"question_id":76958644,"body_markdown":"I&#39;ve been attempting to set up distributed tracing using Spring Micrometer. To propagate the traceId across various services, it appears necessary to configure our HTTP clients to include this information in the headers.\r\n\r\nFor the `RestTemplate` client, Spring conveniently offers an interceptor that can be set up as shown below:\r\n\r\n    @Bean\r\n    public HttpTracing create(Tracing tracing) {\r\n        return HttpTracing\r\n                .newBuilder(tracing)\r\n                .build();\r\n    }\r\n\r\n    @Bean\r\n    public RestTemplate restTemplate(HttpTracing httpTracing) {\r\n        return new RestTemplateBuilder()\r\n                .interceptors(TracingClientHttpRequestInterceptor.create(httpTracing))\r\n                .build();\r\n    }\r\n\r\nBut I couldn&#39;t find a similar one for Apache http client. \r\nI am not sure if I should write my custom interceptor that does this? \r\n\r\nOr is one available already provided by a library.?\r\n","title":"TracingClientHttpRequestInterceptor equivalent for Apache http client","body":"<p>I've been attempting to set up distributed tracing using Spring Micrometer. To propagate the traceId across various services, it appears necessary to configure our HTTP clients to include this information in the headers.</p>\n<p>For the <code>RestTemplate</code> client, Spring conveniently offers an interceptor that can be set up as shown below:</p>\n<pre><code>@Bean\npublic HttpTracing create(Tracing tracing) {\n    return HttpTracing\n            .newBuilder(tracing)\n            .build();\n}\n\n@Bean\npublic RestTemplate restTemplate(HttpTracing httpTracing) {\n    return new RestTemplateBuilder()\n            .interceptors(TracingClientHttpRequestInterceptor.create(httpTracing))\n            .build();\n}\n</code></pre>\n<p>But I couldn't find a similar one for Apache http client.\nI am not sure if I should write my custom interceptor that does this?</p>\n<p>Or is one available already provided by a library.?</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":1306954,"reputation":11661,"user_id":1255746,"accept_rate":78,"display_name":"Josh M"},"score":0,"creation_date":1378899587,"post_id":18740122,"comment_id":27618683,"body_markdown":"So you want to print out all of the lines that end with aa or ee?","body":"So you want to print out all of the lines that end with aa or ee?"},{"owner":{"account_id":3289932,"reputation":746,"user_id":2768479,"display_name":"user2768479"},"score":0,"creation_date":1378900101,"post_id":18740122,"comment_id":27619009,"body_markdown":"Yes, that&#39;s about it!","body":"Yes, that&#39;s about it!"}],"answers":[{"comments":[{"owner":{"account_id":3289932,"reputation":746,"user_id":2768479,"display_name":"user2768479"},"score":0,"creation_date":1378903615,"post_id":18740207,"comment_id":27621367,"body_markdown":"Thanks guys! My only problem now is that it only finds the first occurence in &quot;sentence&quot;. If the string is &quot;Hee Aaa Oaa&quot; followed by a new line character, it only returns &quot;Hee&quot;. I know while (m.find()) would work if I wanted to print the result, but not now, when I intend to return it.\n\nThe arraylist &quot;sentence&quot; is filled up with scanner, from a textfile.\n\n\t\t\tScanner in = new Scanner(new File(args[0]));\n\t\t\twhile (in.hasNextLine()) {\n\t\t\t\tsentences.add(in.nextLine());\n\t\t\t}\n\nDon&#39;t know how to proceed. Perhaps you could help me out! Thanks in advance guys","body":"Thanks guys! My only problem now is that it only finds the first occurence in &quot;sentence&quot;. If the string is &quot;Hee Aaa Oaa&quot; followed by a new line character, it only returns &quot;Hee&quot;. I know while (m.find()) would work if I wanted to print the result, but not now, when I intend to return it.  The arraylist &quot;sentence&quot; is filled up with scanner, from a textfile.  \t\t\tScanner in = new Scanner(new File(args[0])); \t\t\twhile (in.hasNextLine()) { \t\t\t\tsentences.add(in.nextLine()); \t\t\t}  Don&#39;t know how to proceed. Perhaps you could help me out! Thanks in advance guys"},{"owner":{"account_id":411534,"reputation":2703,"user_id":784043,"accept_rate":50,"display_name":"RokL"},"score":0,"creation_date":1378908727,"post_id":18740207,"comment_id":27624979,"body_markdown":"is your purpose to return all words that end with ee or aa in a string?","body":"is your purpose to return all words that end with ee or aa in a string?"},{"owner":{"account_id":3289932,"reputation":746,"user_id":2768479,"display_name":"user2768479"},"score":0,"creation_date":1378920820,"post_id":18740207,"comment_id":27632676,"body_markdown":"Yes! Thats what I intend to do.","body":"Yes! Thats what I intend to do."}],"tags":[],"owner":{"account_id":1577202,"reputation":377,"user_id":1621532,"display_name":"user71404"},"comment_count":3,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1378900240,"creation_date":1378899756,"answer_id":18740207,"question_id":18740122,"body_markdown":"`Matcher.group()` only returns if there is a match already. You need to do something like this:-\r\n\r\n    if (m.matches()) {\r\n        return m.group();\r\n    } else {\r\n        return &quot;&quot;;\r\n    }","title":"Return the matches from one method to another","body":"<p><code>Matcher.group()</code> only returns if there is a match already. You need to do something like this:-</p>\n\n<pre><code>if (m.matches()) {\n    return m.group();\n} else {\n    return \"\";\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":794766,"reputation":158675,"user_id":871026,"accept_rate":76,"display_name":"Reimeus"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1378904929,"creation_date":1378899799,"answer_id":18740226,"question_id":18740122,"body_markdown":"The [`matches`][1] or [`find`][2] methods must precede the `group` method. Since `matches` attempts to match the entire region against the pattern, it is more appropriate here\r\n\r\n    public String matchEndings(String s){\r\n       Pattern p = Pattern.compile(&quot;(aa|ee)$&quot;);\r\n       Matcher m = p.matcher(s);\r\n    \r\n    if (m.matches) {\r\n       return m.group();\r\n    } else {\r\n       return &quot;&quot;\r\n    }\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#matches%28%29\r\n  [2]: http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#find%28%29\r\n","title":"Return the matches from one method to another","body":"<p>The <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#matches%28%29\" rel=\"nofollow\"><code>matches</code></a> or <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#find%28%29\" rel=\"nofollow\"><code>find</code></a> methods must precede the <code>group</code> method. Since <code>matches</code> attempts to match the entire region against the pattern, it is more appropriate here</p>\n\n<pre><code>public String matchEndings(String s){\n   Pattern p = Pattern.compile(\"(aa|ee)$\");\n   Matcher m = p.matcher(s);\n\nif (m.matches) {\n   return m.group();\n} else {\n   return \"\"\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":203953,"reputation":5113,"user_id":451894,"accept_rate":53,"display_name":"upog"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1378900076,"creation_date":1378900076,"answer_id":18740325,"question_id":18740122,"body_markdown":"  \r\n\r\n    import java.util.ArrayList;\r\n    import java.util.regex.Matcher;\r\n    import java.util.regex.Pattern;\r\n    public class PotenssienSumma {\r\n    \tpublic static void main(String[] args) {\t\t\t\r\n    \t\tArrayList&lt;String&gt; sentences = new ArrayList&lt;&gt;(10);\r\n    \t\tsentences.add(&quot;aa&quot;);\r\n    \t\tsentences.add(&quot;1324&quot;);\r\n    \t\tfor (String sentence: sentences) {\r\n    \t\t\tString match = Matching.matchEndings(sentence);\r\n    \t\t\tif (match.length() &gt; 0) {\r\n    \t\t\t     System.out.println(match);\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    }\t\r\n    class Matching{\t\t\t\r\n    \tpublic  static String matchEndings(String s){\r\n    \t\tPattern p = Pattern.compile(&quot;.*?(aa|ee)&quot;);\r\n    \t\tMatcher m = p.matcher(s);\r\n    \t\tif (m.matches()) {\r\n    \t\t    return m.group();\r\n    \t\t} else {\r\n    \t\t\treturn &quot;&quot;;\r\n    \t\t}\r\n    \t}\t\t\r\n    }","title":"Return the matches from one method to another","body":"<pre><code>import java.util.ArrayList;\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\npublic class PotenssienSumma {\n    public static void main(String[] args) {            \n        ArrayList&lt;String&gt; sentences = new ArrayList&lt;&gt;(10);\n        sentences.add(\"aa\");\n        sentences.add(\"1324\");\n        for (String sentence: sentences) {\n            String match = Matching.matchEndings(sentence);\n            if (match.length() &gt; 0) {\n                 System.out.println(match);\n            }\n        }\n    }\n}   \nclass Matching{         \n    public  static String matchEndings(String s){\n        Pattern p = Pattern.compile(\".*?(aa|ee)\");\n        Matcher m = p.matcher(s);\n        if (m.matches()) {\n            return m.group();\n        } else {\n            return \"\";\n        }\n    }       \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1306954,"reputation":11661,"user_id":1255746,"accept_rate":78,"display_name":"Josh M"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1378900450,"creation_date":1378900450,"answer_id":18740475,"question_id":18740122,"body_markdown":"It seems like overkill to use RegEx when all you need is a simple `endsWith(String)`:\r\n\r\n    public void print(final List&lt;String&gt; sentences, final String... endings){\r\n        for(final String sentence : sentences){\r\n            for(final String ending : endings){\r\n                if(sentence.endsWith(ending)){\r\n                    System.out.println(sentence);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\nThe method above will loop through a `List&lt;String&gt;` of sentences and print out all of the sentences that end with one of the elements in `endings`. For usage, you could try:\r\n\r\n    print(sentences, &quot;aa&quot;, &quot;ee&quot;);\r\n\r\nWhere `sentences` is your `ArrayList&lt;String&gt;` of sentences.","title":"Return the matches from one method to another","body":"<p>It seems like overkill to use RegEx when all you need is a simple <code>endsWith(String)</code>:</p>\n\n<pre><code>public void print(final List&lt;String&gt; sentences, final String... endings){\n    for(final String sentence : sentences){\n        for(final String ending : endings){\n            if(sentence.endsWith(ending)){\n                System.out.println(sentence);\n                break;\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>The method above will loop through a <code>List&lt;String&gt;</code> of sentences and print out all of the sentences that end with one of the elements in <code>endings</code>. For usage, you could try:</p>\n\n<pre><code>print(sentences, \"aa\", \"ee\");\n</code></pre>\n\n<p>Where <code>sentences</code> is your <code>ArrayList&lt;String&gt;</code> of sentences.</p>\n"},{"tags":[],"owner":{"account_id":411534,"reputation":2703,"user_id":784043,"accept_rate":50,"display_name":"RokL"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1378910602,"creation_date":1378908669,"answer_id":18743558,"question_id":18740122,"body_markdown":" - Don&#39;t construct Pattern in the method. That is expensive. Put the pattern object into a static final variable.\r\n\r\n - The correct use for patterns is the following:\r\n\r\n\r\n\r\n        while(matcher.find()) {\r\n            sysout(matcher.group());\r\n        }\r\n\r\nThis will print all matches, if you want just one match, replace the `while` with `if`.\r\n\r\n - I don&#39;t know if this is intentional but your regex doesn&#39;t match `ee|aa` to end of the string. It matches `ee` or `aa` anywhere in the string along with any characters preceeding it. For instance for string `Fox preens in front of a vixen` your regex returns string `Fox pree`. Don&#39;t know if that&#39;s intended.\r\n\r\nHere&#39;s a class that takes a list or a collection of strings as an argument and then lazily finds all words that end in `aa` or `ee`. It has a `main` method you can run to test.\r\n\r\n        public class Endings implements Iterable&lt;String&gt; {\r\n\t        private final Iterable&lt;String&gt; strings;\r\n\t        private static final Pattern pat = Pattern.compile(&quot;(?&lt;=^|\\\\s)\\\\S*(aa|ee)(?=\\\\s|$)&quot;);\r\n\r\n\t        public static void main(String[] args) {\r\n\t        \tEndings endings = new Endings(Arrays.asList(&quot;This testaabb testee testaa&quot;, &quot;Test2aa Test3ee &quot;, &quot;no match&quot;));\r\n\t        \tfor(String word : endings) {\r\n\t        \t\tSystem.out.println(word);\r\n\t        \t}\r\n\t        }\r\n\t\t\r\n\t        public Endings(Iterable&lt;String&gt; strings) {\r\n\t        \tthis.strings = strings;\r\n\t        }\r\n     \r\n\t        public Iterator&lt;String&gt; iterator() {\r\n\t        \treturn new Iterator&lt;String&gt;() {\r\n\t\t\t\tprivate Iterator&lt;String&gt; iter = strings.iterator();\r\n\t\t\t\tprivate Matcher m;\r\n\t\t\t\tprivate String result;\r\n\t\t\t\tpublic boolean hasNext() {\r\n\t\t\t\t\tif (result == null) {\r\n\t\t\t\t\t\tif (m == null) {\r\n\t\t\t\t\t\t\tif (iter.hasNext()) {\r\n\t\t\t\t\t\t\t\tm = pat.matcher(iter.next());\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (m.find()) {\r\n\t\t\t\t\t\t\tresult = m.group();\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tm = null;\r\n\t\t\t\t\t\t\treturn hasNext();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tpublic String next() {\r\n\t\t\t\t\tif (result != null) {\r\n\t\t\t\t\t\tString ret = result;\r\n\t\t\t\t\t\tresult = null;\r\n\t\t\t\t\t\treturn ret;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthrow new NoSuchElementException();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tpublic void remove() {\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t        };\r\n\t\t}\r\n\t\t\r\n\t}\r\n","title":"Return the matches from one method to another","body":"<ul>\n<li><p>Don't construct Pattern in the method. That is expensive. Put the pattern object into a static final variable.</p></li>\n<li><p>The correct use for patterns is the following:</p>\n\n<pre><code>while(matcher.find()) {\n    sysout(matcher.group());\n}\n</code></pre></li>\n</ul>\n\n<p>This will print all matches, if you want just one match, replace the <code>while</code> with <code>if</code>.</p>\n\n<ul>\n<li>I don't know if this is intentional but your regex doesn't match <code>ee|aa</code> to end of the string. It matches <code>ee</code> or <code>aa</code> anywhere in the string along with any characters preceeding it. For instance for string <code>Fox preens in front of a vixen</code> your regex returns string <code>Fox pree</code>. Don't know if that's intended.</li>\n</ul>\n\n<p>Here's a class that takes a list or a collection of strings as an argument and then lazily finds all words that end in <code>aa</code> or <code>ee</code>. It has a <code>main</code> method you can run to test.</p>\n\n<pre><code>    public class Endings implements Iterable&lt;String&gt; {\n        private final Iterable&lt;String&gt; strings;\n        private static final Pattern pat = Pattern.compile(\"(?&lt;=^|\\\\s)\\\\S*(aa|ee)(?=\\\\s|$)\");\n\n        public static void main(String[] args) {\n            Endings endings = new Endings(Arrays.asList(\"This testaabb testee testaa\", \"Test2aa Test3ee \", \"no match\"));\n            for(String word : endings) {\n                System.out.println(word);\n            }\n        }\n\n        public Endings(Iterable&lt;String&gt; strings) {\n            this.strings = strings;\n        }\n\n        public Iterator&lt;String&gt; iterator() {\n            return new Iterator&lt;String&gt;() {\n            private Iterator&lt;String&gt; iter = strings.iterator();\n            private Matcher m;\n            private String result;\n            public boolean hasNext() {\n                if (result == null) {\n                    if (m == null) {\n                        if (iter.hasNext()) {\n                            m = pat.matcher(iter.next());\n                        } else {\n                            return false;\n                        }\n                    }\n                    if (m.find()) {\n                        result = m.group();\n                        return true;\n                    } else {\n                        m = null;\n                        return hasNext();\n                    }\n                } else {\n                    return true;\n                }\n            }\n\n            public String next() {\n                if (result != null) {\n                    String ret = result;\n                    result = null;\n                    return ret;\n                } else {\n                    throw new NoSuchElementException();\n                }\n            }\n\n            public void remove() {\n\n            }\n            };\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":3289932,"reputation":746,"user_id":2768479,"display_name":"user2768479"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2702,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":18740207,"answer_count":5,"score":1,"last_activity_date":1692861129,"creation_date":1378899485,"question_id":18740122,"body_markdown":"I&#39;m an absolute Java beginner. I&#39;ve searched on the forums, but couldn&#39;t find an answer to this question.\r\n\r\nI have two classes, one which browses through an arraylist of sentences. I only attach the for-each loop as seen below.\r\n&quot;Matching&quot; is the instance of the other class (containing the pattern/matcher code)\r\nmatchEndings is the method, attached below.\r\n\r\n\tfor (String sentence: sentences) {\r\n\t\tString match = matching.matchEndings(sentence);\r\n\t\tif (match.length() &gt; 0) {\r\n\t\t\tSystem.out.println(match);\r\n\t\t}\r\n\t}\r\n\r\nThis is the method.\r\n\r\n\tpublic String matchEndings(String s){\r\n\tPattern p = Pattern.compile(&quot;.*?(aa|ee)&quot;);\r\n\tMatcher m = p.matcher(s);\r\n\t\r\n\treturn m.group();\r\n\t\t\r\n\t}\r\n\r\nMy question is, how do I return the matched sentences, containing aa / ee endings, to the first class, and have it printed there? The code is compiled, but when I run I get  \r\n\r\n***********************************************\r\n\r\n    Exception in thread &quot;main&quot; java.lang.IllegalStateException: No match found\r\n            at java.util.regex.Matcher.group(Unknown Source)\r\n            at java.util.regex.Matcher.group(Unknown Source)\r\n","title":"Return the matches from one method to another","body":"<p>I'm an absolute Java beginner. I've searched on the forums, but couldn't find an answer to this question.</p>\n<p>I have two classes, one which browses through an arraylist of sentences. I only attach the for-each loop as seen below.\n&quot;Matching&quot; is the instance of the other class (containing the pattern/matcher code)\nmatchEndings is the method, attached below.</p>\n<pre><code>for (String sentence: sentences) {\n    String match = matching.matchEndings(sentence);\n    if (match.length() &gt; 0) {\n        System.out.println(match);\n    }\n}\n</code></pre>\n<p>This is the method.</p>\n<pre><code>public String matchEndings(String s){\nPattern p = Pattern.compile(&quot;.*?(aa|ee)&quot;);\nMatcher m = p.matcher(s);\n\nreturn m.group();\n    \n}\n</code></pre>\n<p>My question is, how do I return the matched sentences, containing aa / ee endings, to the first class, and have it printed there? The code is compiled, but when I run I get</p>\n<hr />\n<pre><code>Exception in thread &quot;main&quot; java.lang.IllegalStateException: No match found\n        at java.util.regex.Matcher.group(Unknown Source)\n        at java.util.regex.Matcher.group(Unknown Source)\n</code></pre>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":1494484,"reputation":56249,"user_id":1400768,"display_name":"nhahtdh"},"score":0,"creation_date":1378759334,"post_id":18706652,"comment_id":27561907,"body_markdown":"What do you mean by &quot;not working&quot;?","body":"What do you mean by &quot;not working&quot;?"},{"owner":{"account_id":3152821,"reputation":2999,"user_id":2665890,"accept_rate":75,"display_name":"Obicere"},"score":0,"creation_date":1378759396,"post_id":18706652,"comment_id":27561926,"body_markdown":"You probably want a [matcher](http://docs.oracle.com/javase/tutorial/essential/regex/matcher.html) with a pattern.","body":"You probably want a <a href=\"http://docs.oracle.com/javase/tutorial/essential/regex/matcher.html\" rel=\"nofollow noreferrer\">matcher</a> with a pattern."},{"owner":{"account_id":1494484,"reputation":56249,"user_id":1400768,"display_name":"nhahtdh"},"score":0,"creation_date":1378759440,"post_id":18706652,"comment_id":27561943,"body_markdown":"@Obicere: No. `matches` is fine here, just a bit overkill (and less efficient) for finding a single keyword.","body":"@Obicere: No. <code>matches</code> is fine here, just a bit overkill (and less efficient) for finding a single keyword."},{"owner":{"account_id":3152821,"reputation":2999,"user_id":2665890,"accept_rate":75,"display_name":"Obicere"},"score":0,"creation_date":1378759513,"post_id":18706652,"comment_id":27561973,"body_markdown":"@nhahtdh because it&#39;s not like that&#39;s exactly how Java does it. Sorry, sarcasm doesn&#39;t go well through text.","body":"@nhahtdh because it&#39;s not like that&#39;s exactly how Java does it. Sorry, sarcasm doesn&#39;t go well through text."},{"owner":{"display_name":"user177800"},"score":0,"creation_date":1378759902,"post_id":18706652,"comment_id":27562137,"body_markdown":"Learn to use [RegEx101.com](http://regex101.com/r/nJ4nY5)","body":"Learn to use <a href=\"http://regex101.com/r/nJ4nY5\" rel=\"nofollow noreferrer\">RegEx101.com</a>"}],"answers":[{"comments":[{"owner":{"account_id":2417303,"reputation":8587,"user_id":2111085,"accept_rate":64,"display_name":"Ernestas Gruodis"},"score":0,"creation_date":1378760124,"post_id":18706715,"comment_id":27562239,"body_markdown":"This one `someString.matches(&quot;^.*\\\\bazy\\.*$&quot;);` an error - not compiling - NetBeans 7.3.1","body":"This one <code>someString.matches(&quot;^.*\\\\bazy\\.*$&quot;);</code> an error - not compiling - NetBeans 7.3.1"},{"owner":{"account_id":1626304,"reputation":169369,"user_id":1501794,"accept_rate":72,"display_name":"Rahul Tripathi"},"score":0,"creation_date":1378760177,"post_id":18706715,"comment_id":27562259,"body_markdown":"What is the error????","body":"What is the error????"},{"owner":{"account_id":1626304,"reputation":169369,"user_id":1501794,"accept_rate":72,"display_name":"Rahul Tripathi"},"score":0,"creation_date":1378760420,"post_id":18706715,"comment_id":27562364,"body_markdown":"@nhahtdh:- yes got it.Updated the answer as well.","body":"@nhahtdh:- yes got it.Updated the answer as well."},{"owner":{"account_id":2417303,"reputation":8587,"user_id":2111085,"accept_rate":64,"display_name":"Ernestas Gruodis"},"score":1,"creation_date":1378760502,"post_id":18706715,"comment_id":27562402,"body_markdown":"This worked `someString.matches(&quot;^.*azy.*$&quot;);` Thanks everyone for help :)","body":"This worked <code>someString.matches(&quot;^.*azy.*$&quot;);</code> Thanks everyone for help :)"}],"tags":[],"owner":{"account_id":1626304,"reputation":169369,"user_id":1501794,"accept_rate":72,"display_name":"Rahul Tripathi"},"comment_count":4,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1378760394,"creation_date":1378759466,"answer_id":18706715,"question_id":18706652,"body_markdown":"How about using like this:-\r\n\r\n    Pattern p = Pattern.compile(&quot;Your string&quot;);\r\n    Matcher m = p.matcher(inputString);\r\n    while (m.find()) {\r\n       String matched = m.group(1);\r\n       // Do something\r\n    }\r\n\r\nEDIT:- After watching your string:-\r\n\r\n    String someString = &quot;lazy cat&quot;;\r\n    someString.matches(&quot;^.*azy.*$&quot;);","title":"Regex instead of String.contains(xyz) (Java 1.7)","body":"<p>How about using like this:-</p>\n\n<pre><code>Pattern p = Pattern.compile(\"Your string\");\nMatcher m = p.matcher(inputString);\nwhile (m.find()) {\n   String matched = m.group(1);\n   // Do something\n}\n</code></pre>\n\n<p>EDIT:- After watching your string:-</p>\n\n<pre><code>String someString = \"lazy cat\";\nsomeString.matches(\"^.*azy.*$\");\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2417303,"reputation":8587,"user_id":2111085,"accept_rate":64,"display_name":"Ernestas Gruodis"},"score":0,"creation_date":1378760187,"post_id":18706749,"comment_id":27562262,"body_markdown":"Not working either - I tried `someString = &quot;lazycat&quot;;` without white spaces.","body":"Not working either - I tried <code>someString = &quot;lazycat&quot;;</code> without white spaces."},{"owner":{"account_id":1494484,"reputation":56249,"user_id":1400768,"display_name":"nhahtdh"},"score":0,"creation_date":1378760303,"post_id":18706749,"comment_id":27562310,"body_markdown":"@ErnestasGruodis: Fix your regex, not the string. e.g. `&quot;lazycat&quot;.matches(&quot;^.*azy.*$&quot;)`","body":"@ErnestasGruodis: Fix your regex, not the string. e.g. <code>&quot;lazycat&quot;.matches(&quot;^.*azy.*$&quot;)</code>"},{"owner":{"account_id":2417303,"reputation":8587,"user_id":2111085,"accept_rate":64,"display_name":"Ernestas Gruodis"},"score":0,"creation_date":1378760367,"post_id":18706749,"comment_id":27562339,"body_markdown":"But finally - `someString.matches(&quot;^.*azy.*$&quot;);` did the job right, without any slashes...","body":"But finally - <code>someString.matches(&quot;^.*azy.*$&quot;);</code> did the job right, without any slashes..."},{"owner":{"account_id":4451090,"reputation":10972,"user_id":3622940,"accept_rate":100,"display_name":"Unihedron"},"score":0,"creation_date":1413107959,"post_id":18706749,"comment_id":41312397,"body_markdown":"__Note to future readers:__ You should not use `someString.matches(&quot;^.*azy.*$&quot;);`, instead `someString.matches(&quot;.*azy.*&quot;);`. __The java method `Pattern.matches(String pattern, String string)` is already anchored.__","body":"<b>Note to future readers:</b> You should not use <code>someString.matches(&quot;^.*azy.*$&quot;);</code>, instead <code>someString.matches(&quot;.*azy.*&quot;);</code>. <b>The java method <code>Pattern.matches(String pattern, String string)</code> is already anchored.</b>"}],"tags":[],"owner":{"account_id":1494484,"reputation":56249,"user_id":1400768,"display_name":"nhahtdh"},"comment_count":4,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1413084952,"creation_date":1378759590,"answer_id":18706749,"question_id":18706652,"body_markdown":"`\\b` means word boundary, which means that you are searching for the word `azy`&lt;sup&gt;1&lt;/sup&gt; instead of searching for `azy` as a substring.\r\n\r\nJust remove `\\b` to get the expected result.\r\n\r\n    someString.matches(&quot;^.*azy.*$&quot;);\r\n\r\nHowever, it is inefficient to use regex if you only want to search for substring. `String.contains` is the standard alternative for such use case:\r\n\r\n    someString.contains(&quot;azy&quot;);\r\n\r\n**Footnote**\r\n\r\nA ***word*** is defined as a sequence of (at least 1) *word characters*, that doesn&#39;t have any *word character* preceding or succeeding it.\r\n\r\n***Word character***, in default settings, is defined as `[a-zA-Z0-9_]`.","title":"Regex instead of String.contains(xyz) (Java 1.7)","body":"<p><code>\\b</code> means word boundary, which means that you are searching for the word <code>azy</code><sup>1</sup> instead of searching for <code>azy</code> as a substring.</p>\n\n<p>Just remove <code>\\b</code> to get the expected result.</p>\n\n<pre><code>someString.matches(\"^.*azy.*$\");\n</code></pre>\n\n<p>However, it is inefficient to use regex if you only want to search for substring. <code>String.contains</code> is the standard alternative for such use case:</p>\n\n<pre><code>someString.contains(\"azy\");\n</code></pre>\n\n<p><strong>Footnote</strong></p>\n\n<p>A <strong><em>word</em></strong> is defined as a sequence of (at least 1) <em>word characters</em>, that doesn't have any <em>word character</em> preceding or succeeding it.</p>\n\n<p><strong><em>Word character</em></strong>, in default settings, is defined as <code>[a-zA-Z0-9_]</code>.</p>\n"},{"tags":[],"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1378759654,"creation_date":1378759654,"answer_id":18706773,"question_id":18706652,"body_markdown":"You surrounded `azy` with [word boundary][1] `\\b` so it means that before and after it cant be any word characters like `a-z` `A-Z` `0-9` or `_`.\r\n\r\n\r\n  [1]: http://www.regular-expressions.info/wordboundaries.html","title":"Regex instead of String.contains(xyz) (Java 1.7)","body":"<p>You surrounded <code>azy</code> with <a href=\"http://www.regular-expressions.info/wordboundaries.html\" rel=\"nofollow\">word boundary</a> <code>\\b</code> so it means that before and after it cant be any word characters like <code>a-z</code> <code>A-Z</code> <code>0-9</code> or <code>_</code>.</p>\n"}],"owner":{"account_id":2417303,"reputation":8587,"user_id":2111085,"accept_rate":64,"display_name":"Ernestas Gruodis"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":511,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"closed_date":1378848362,"accepted_answer_id":18706749,"answer_count":3,"score":0,"last_activity_date":1692861092,"creation_date":1378759207,"question_id":18706652,"body_markdown":"I have tried to find if `someString` contains someWord, but not working:\r\n\r\n    String someString = &quot;lazy cat&quot;;\r\n    \r\n    someString.matches(&quot;^.*\\\\bazy\\\\b.*$&quot;);//do not matches &quot;azy&quot;\r\n\r\nWhat&#39;s wrong here?","title":"Regex instead of String.contains(xyz) (Java 1.7)","body":"<p>I have tried to find if <code>someString</code> contains someWord, but not working:</p>\n\n<pre><code>String someString = \"lazy cat\";\n\nsomeString.matches(\"^.*\\\\bazy\\\\b.*$\");//do not matches \"azy\"\n</code></pre>\n\n<p>What's wrong here?</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":1268556,"reputation":48088,"user_id":1225328,"accept_rate":93,"display_name":"sp00m"},"score":2,"creation_date":1378456947,"post_id":18653464,"comment_id":27467359,"body_markdown":"Please google &quot;regex anchor&quot;.","body":"Please google &quot;regex anchor&quot;."}],"answers":[{"comments":[{"owner":{"account_id":2154709,"reputation":180,"user_id":2050632,"accept_rate":100,"display_name":"hard-code"},"score":0,"creation_date":1378457587,"post_id":18653498,"comment_id":27467687,"body_markdown":"okay, thank you! is there the opportunity in Matcher or in Pattern classes to ignore these anchors?","body":"okay, thank you! is there the opportunity in Matcher or in Pattern classes to ignore these anchors?"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":0,"creation_date":1378458110,"post_id":18653498,"comment_id":27467933,"body_markdown":"@hard-code Of course. Remove them from the pattern and the Matcher will ignore them.","body":"@hard-code Of course. Remove them from the pattern and the Matcher will ignore them."},{"owner":{"account_id":37482,"reputation":33416,"user_id":107152,"accept_rate":87,"display_name":"Qtax"},"score":0,"creation_date":1378460156,"post_id":18653498,"comment_id":27469051,"body_markdown":"No they don&#39;t. They mean start and end **of string** (or before a linebreak at the end of string), respectively. They only mean beginning/end of **line** if the `MULTILINE`/`(?m)` flag is set. See [`Pattern MULTILINE`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#MULTILINE) (This is true in most regex flavors, with Ruby being an exception.)","body":"No they don&#39;t. They mean start and end <b>of string</b> (or before a linebreak at the end of string), respectively. They only mean beginning/end of <b>line</b> if the <code>MULTILINE</code>/<code>(?m)</code> flag is set. See <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#MULTILINE\" rel=\"nofollow noreferrer\"><code>Pattern MULTILINE</code></a> (This is true in most regex flavors, with Ruby being an exception.)"}],"tags":[],"owner":{"account_id":3229433,"reputation":3236,"user_id":2725031,"display_name":"Marcin Łoś"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1378460227,"creation_date":1378456852,"answer_id":18653498,"question_id":18653464,"body_markdown":"`^` and `$` mean begin and end of the input, respectively. The `&quot;NAME &lt;...&gt;&quot;` surrounding the address causes the `Matcher` to ignore the potential match it could find it it wasn&#39;t for the `^` and `$`.","title":"java matcher doesn&#39;t process ^ and $ symbols","body":"<p><code>^</code> and <code>$</code> mean begin and end of the input, respectively. The <code>\"NAME &lt;...&gt;\"</code> surrounding the address causes the <code>Matcher</code> to ignore the potential match it could find it it wasn't for the <code>^</code> and <code>$</code>.</p>\n"},{"tags":[],"owner":{"account_id":350533,"reputation":10937,"user_id":686478,"accept_rate":59,"display_name":"Prashant Bhate"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1378460600,"creation_date":1378460600,"answer_id":18654739,"question_id":18653464,"body_markdown":"`^ &amp; $` matches beginning and end of String (either Line or Full text if MultiLine switch is turned on). You can trim them from the pattern if you need to extract email from a text.\r\n\r\n\r\n\t\tString EMAIL_PATTERN = &quot;^[a-zA-Z0-9][\\\\w.-]*[a-zA-Z0-9]@[a-zA-Z0-9][\\\\w.-]*[a-zA-Z0-9]\\\\.[a-zA-Z][a-zA-Z.]*[a-zA-Z]$&quot;;\r\n\t\tString email = &quot;NAME &lt;firstname_lastname@domain.com&gt;&quot;;\r\n\t\tPattern pattern = Pattern.compile(EMAIL_PATTERN.substring(1, EMAIL_PATTERN.length()-1));\r\n\t\tMatcher matcher = pattern.matcher(email);\r\n\t\t\r\n\t\tif (matcher.find()) {\r\n\t\t    System.out.println(matcher.group());\r\n\t\t}\r\n\r\n**Output**\r\n\r\n    firstname_lastname@domain.com\r\n\t","title":"java matcher doesn&#39;t process ^ and $ symbols","body":"<p><code>^ &amp; $</code> matches beginning and end of String (either Line or Full text if MultiLine switch is turned on). You can trim them from the pattern if you need to extract email from a text.</p>\n\n<pre><code>    String EMAIL_PATTERN = \"^[a-zA-Z0-9][\\\\w.-]*[a-zA-Z0-9]@[a-zA-Z0-9][\\\\w.-]*[a-zA-Z0-9]\\\\.[a-zA-Z][a-zA-Z.]*[a-zA-Z]$\";\n    String email = \"NAME &lt;firstname_lastname@domain.com&gt;\";\n    Pattern pattern = Pattern.compile(EMAIL_PATTERN.substring(1, EMAIL_PATTERN.length()-1));\n    Matcher matcher = pattern.matcher(email);\n\n    if (matcher.find()) {\n        System.out.println(matcher.group());\n    }\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>firstname_lastname@domain.com\n</code></pre>\n"}],"owner":{"account_id":2154709,"reputation":180,"user_id":2050632,"accept_rate":100,"display_name":"hard-code"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":141,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":18654739,"answer_count":2,"score":1,"last_activity_date":1692861075,"creation_date":1378456741,"question_id":18653464,"body_markdown":"There is email pattern: \r\n\r\n`^[a-zA-Z0-9][\\w.-]*[a-zA-Z0-9]@[a-zA-Z0-9][\\w.-]*[a-zA-Z0-9]\\.[a-zA-Z][a-zA-Z.]*[a-zA-Z]$`\r\n\r\nand the example code, that try to get email from string:\r\n\r\n    String email = &quot;NAME &lt;firstname_lastname@domain.com&gt;&quot;;\r\n\r\n    Pattern pattern = Pattern.compile(EMAIL_PATTERN);\r\n    Matcher matcher = pattern.matcher(email);\r\n\r\n    if (matcher.find()) {\r\n        System.out.println(matcher.group());\r\n    }\r\n\r\nWhen regexp contains `^` and `$` characters, `matcher.find()` returns false, but when regexp is without these characters, all is fine: I see `firstname_lastname@domain.com` in console.\r\n\r\nCould you please explain difference between regexp with and without `^` and `$`?\r\n\r\nHow can I force the Matcher to work with regexp that contains `^` and `$`?","title":"java matcher doesn&#39;t process ^ and $ symbols","body":"<p>There is email pattern: </p>\n\n<p><code>^[a-zA-Z0-9][\\w.-]*[a-zA-Z0-9]@[a-zA-Z0-9][\\w.-]*[a-zA-Z0-9]\\.[a-zA-Z][a-zA-Z.]*[a-zA-Z]$</code></p>\n\n<p>and the example code, that try to get email from string:</p>\n\n<pre><code>String email = \"NAME &lt;firstname_lastname@domain.com&gt;\";\n\nPattern pattern = Pattern.compile(EMAIL_PATTERN);\nMatcher matcher = pattern.matcher(email);\n\nif (matcher.find()) {\n    System.out.println(matcher.group());\n}\n</code></pre>\n\n<p>When regexp contains <code>^</code> and <code>$</code> characters, <code>matcher.find()</code> returns false, but when regexp is without these characters, all is fine: I see <code>firstname_lastname@domain.com</code> in console.</p>\n\n<p>Could you please explain difference between regexp with and without <code>^</code> and <code>$</code>?</p>\n\n<p>How can I force the Matcher to work with regexp that contains <code>^</code> and <code>$</code>?</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":1496066,"reputation":14731,"user_id":1401975,"display_name":"HamZa"},"score":1,"creation_date":1376043100,"post_id":18144162,"comment_id":26573884,"body_markdown":"Take 10mn to read about [repetition](http://www.regular-expressions.info/repeat.html).","body":"Take 10mn to read about <a href=\"http://www.regular-expressions.info/repeat.html\" rel=\"nofollow noreferrer\">repetition</a>."},{"owner":{"account_id":1853886,"reputation":210617,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"score":1,"creation_date":1376043218,"post_id":18144162,"comment_id":26573937,"body_markdown":"@HamZa. He does know about repetition. Just is unable to apply it properly in his case. Still a tutorial is worth reading.","body":"@HamZa. He does know about repetition. Just is unable to apply it properly in his case. Still a tutorial is worth reading."}],"answers":[{"tags":[],"owner":{"account_id":1853886,"reputation":210617,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1376042909,"creation_date":1376042558,"answer_id":18144208,"question_id":18144162,"body_markdown":"You can try this regex:\r\n\r\n    [+]?(?:[0-9]\\s*){4,7}\r\n\r\nExplanation:\r\n  \r\n    [+]?           // Optional + sign\r\n    (?:[0-9]\\s*)   // A single digit followed by 0 or more whitespaces\r\n    {4,7}          // 4 to 7 repetition of previous pattern\r\n\r\nSample tests:\r\n\r\n    String regex = &quot;[+]?(?:[0-9]\\\\s*){4,7}&quot;;\r\n\r\n    System.out.println(&quot;0045234&quot;.matches(regex));       // true\r\n    System.out.println(&quot;+004 5234&quot;.matches(regex));      // true\r\n    System.out.println(&quot;+00 452 34&quot;.matches(regex));    // true\r\n    System.out.println(&quot;0 0 4 5 2 3 4&quot;.matches(regex)); // true\r\n    System.out.println(&quot;004523434534&quot;.matches(regex));  // false\r\n    System.out.println(&quot;004&quot;.matches(regex));           // false","title":"How to set the minimum and maximum number of digit allowed in a regex expression for telephone number","body":"<p>You can try this regex:</p>\n\n<pre><code>[+]?(?:[0-9]\\s*){4,7}\n</code></pre>\n\n<p>Explanation:</p>\n\n<pre><code>[+]?           // Optional + sign\n(?:[0-9]\\s*)   // A single digit followed by 0 or more whitespaces\n{4,7}          // 4 to 7 repetition of previous pattern\n</code></pre>\n\n<p>Sample tests:</p>\n\n<pre><code>String regex = \"[+]?(?:[0-9]\\\\s*){4,7}\";\n\nSystem.out.println(\"0045234\".matches(regex));       // true\nSystem.out.println(\"+004 5234\".matches(regex));      // true\nSystem.out.println(\"+00 452 34\".matches(regex));    // true\nSystem.out.println(\"0 0 4 5 2 3 4\".matches(regex)); // true\nSystem.out.println(\"004523434534\".matches(regex));  // false\nSystem.out.println(\"004\".matches(regex));           // false\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2052678,"reputation":134073,"user_id":1831293,"accept_rate":91,"display_name":"Evgeniy Dorofeev"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1376043434,"creation_date":1376042914,"answer_id":18144311,"question_id":18144162,"body_markdown":"`&quot;\\\\+?(\\\\d ?){3,6}\\\\d&quot;` is supposed to match an optional + sign followed with 4-7 numbers and optional white spaces in between digits.\r\n\r\n","title":"How to set the minimum and maximum number of digit allowed in a regex expression for telephone number","body":"<p><code>\"\\\\+?(\\\\d ?){3,6}\\\\d\"</code> is supposed to match an optional + sign followed with 4-7 numbers and optional white spaces in between digits.</p>\n"},{"tags":[],"owner":{"account_id":1053691,"reputation":1256,"user_id":1056904,"accept_rate":56,"display_name":"Juto"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1376055184,"creation_date":1376055184,"answer_id":18147870,"question_id":18144162,"body_markdown":"Similar structure as above, but with: `:? taken off` (not sure why is it there?)\r\n\r\n    [+]?([0-9]\\s*){4,7}","title":"How to set the minimum and maximum number of digit allowed in a regex expression for telephone number","body":"<p>Similar structure as above, but with: <code>:? taken off</code> (not sure why is it there?)</p>\n\n<pre><code>[+]?([0-9]\\s*){4,7}\n</code></pre>\n"}],"owner":{"account_id":2272389,"reputation":1347,"user_id":1999453,"accept_rate":67,"display_name":"user1999453"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4772,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":18144208,"answer_count":3,"score":1,"last_activity_date":1692861021,"creation_date":1376042410,"question_id":18144162,"body_markdown":"I have the following Regex expression for java application:\r\n\r\n    [\\+0-9]+([\\s0-9]+)?\r\n\r\nHow to restrict the above expression of telephone number to a minimum of 4 digits and maximum of 7 digits? I thought it would be something like adding this {4,7} to the expression but it is not working.\r\n\r\nAny advice please?\r\n\r\nBasically my telephone number can either start with a + sign followed with numbers(+004...) or  with numbers only(004...) and can also contain white spaces in between any digits(0 0 4...).","title":"How to set the minimum and maximum number of digit allowed in a regex expression for telephone number","body":"<p>I have the following Regex expression for java application:</p>\n\n<pre><code>[\\+0-9]+([\\s0-9]+)?\n</code></pre>\n\n<p>How to restrict the above expression of telephone number to a minimum of 4 digits and maximum of 7 digits? I thought it would be something like adding this {4,7} to the expression but it is not working.</p>\n\n<p>Any advice please?</p>\n\n<p>Basically my telephone number can either start with a + sign followed with numbers(+004...) or  with numbers only(004...) and can also contain white spaces in between any digits(0 0 4...).</p>\n"},{"tags":["java","regex","parsing"],"answers":[{"tags":[],"owner":{"account_id":1853886,"reputation":210617,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1374412842,"creation_date":1374412497,"answer_id":17772696,"question_id":17772677,"body_markdown":"You should use *reluctant quantifier* - `&quot;.+?&quot;` instead of *greedy* - `&quot;.+&quot;` :\r\n\r\n    &quot;(\\\\[\\\\$).+?(\\\\$\\\\])&quot;  // Note `?` after `.+`\r\n\r\nIf you use `.+`, it will match everything except the *line-terminator* till the last `$`. Note that a *dot (`.`)* matches everything except a newline. With *reluctant quantifier*, `.+?` matches only till the first `$]` it encounters.\r\n\r\nIn your given string, you got all those matches, because you had `\\r\\n` in between, where the `.+` stops matching. If you remove all those newlines, then you will just get a single match from 1&lt;sup&gt;st&lt;/sup&gt; `[$` to the last `$]`.","title":"(Pattern and Matcher) not discovering all pattern matches","body":"<p>You should use <em>reluctant quantifier</em> - <code>\".+?\"</code> instead of <em>greedy</em> - <code>\".+\"</code> :</p>\n\n<pre><code>\"(\\\\[\\\\$).+?(\\\\$\\\\])\"  // Note `?` after `.+`\n</code></pre>\n\n<p>If you use <code>.+</code>, it will match everything except the <em>line-terminator</em> till the last <code>$</code>. Note that a <em>dot (<code>.</code>)</em> matches everything except a newline. With <em>reluctant quantifier</em>, <code>.+?</code> matches only till the first <code>$]</code> it encounters.</p>\n\n<p>In your given string, you got all those matches, because you had <code>\\r\\n</code> in between, where the <code>.+</code> stops matching. If you remove all those newlines, then you will just get a single match from 1<sup>st</sup> <code>[$</code> to the last <code>$]</code>.</p>\n"},{"comments":[{"owner":{"account_id":31518,"reputation":36053,"user_id":86604,"accept_rate":80,"display_name":"Ingo"},"score":0,"creation_date":1374413517,"post_id":17772728,"comment_id":25921408,"body_markdown":"-1 for [^], which a) is not valid in java and b) even if it were valid, it would not solve OP&#39;s problem, on the contrary, it&#39;d make it worse.","body":"-1 for [^], which a) is not valid in java and b) even if it were valid, it would not solve OP&#39;s problem, on the contrary, it&#39;d make it worse."},{"owner":{"account_id":1853886,"reputation":210617,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"score":0,"creation_date":1374413668,"post_id":17772728,"comment_id":25921445,"body_markdown":"@Ingo. That&#39;s absolutely valid in Java.  And returns the same result as OP want. I&#39;m talking about the first one.","body":"@Ingo. That&#39;s absolutely valid in Java.  And returns the same result as OP want. I&#39;m talking about the first one."},{"owner":{"account_id":2603307,"reputation":88305,"user_id":2255089,"display_name":"Casimir et Hippolyte"},"score":0,"creation_date":1374413742,"post_id":17772728,"comment_id":25921467,"body_markdown":"@Ingo. It is totally valid, since you place the bracket, just after the ^","body":"@Ingo. It is totally valid, since you place the bracket, just after the ^"},{"owner":{"account_id":31518,"reputation":36053,"user_id":86604,"accept_rate":80,"display_name":"Ingo"},"score":0,"creation_date":1374414008,"post_id":17772728,"comment_id":25921525,"body_markdown":"It&#39;s not valid. `PatternSyntaxException: regular expression syntax: Unclosed character class near index 2` this is what I get on `Pattern.compile(&quot;[^]&quot;)`","body":"It&#39;s not valid. <code>PatternSyntaxException: regular expression syntax: Unclosed character class near index 2</code> this is what I get on <code>Pattern.compile(&quot;[^]&quot;)</code>"},{"owner":{"account_id":2603307,"reputation":88305,"user_id":2255089,"display_name":"Casimir et Hippolyte"},"score":0,"creation_date":1374414068,"post_id":17772728,"comment_id":25921543,"body_markdown":"@Ingo: You have forgotten a closing bracket.","body":"@Ingo: You have forgotten a closing bracket."},{"owner":{"account_id":31518,"reputation":36053,"user_id":86604,"accept_rate":80,"display_name":"Ingo"},"score":0,"creation_date":1374414166,"post_id":17772728,"comment_id":25921567,"body_markdown":"See, this is why @RohitJain&#39;s answer is much better.","body":"See, this is why @RohitJain&#39;s answer is much better."},{"owner":{"account_id":2603307,"reputation":88305,"user_id":2255089,"display_name":"Casimir et Hippolyte"},"score":0,"creation_date":1374414455,"post_id":17772728,"comment_id":25921623,"body_markdown":"@Ingo: believe what you want.","body":"@Ingo: believe what you want."}],"tags":[],"owner":{"account_id":2603307,"reputation":88305,"user_id":2255089,"display_name":"Casimir et Hippolyte"},"comment_count":7,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1374415125,"creation_date":1374412689,"answer_id":17772728,"question_id":17772677,"body_markdown":"A good way is to replace the dot by a negated character class, example:\r\n\r\n    Pattern p = Pattern.compile(&quot;(\\\\[\\\\$)([^$]++)(\\\\$])&quot;);\r\n\r\n&lt;i&gt;(note that you don&#39;t need to escape closing square brackets)&lt;/i&gt;\r\n\r\nBut perhaps are you only interested by the content of the tags:\r\n\r\n    Pattern p = Pattern.compile(&quot;(?&lt;=\\\\[\\\\$)[^$]++(?=\\\\$])&quot;);\r\n\r\n&lt;i&gt;In this case the content is the whole match&lt;/i&gt;","title":"(Pattern and Matcher) not discovering all pattern matches","body":"<p>A good way is to replace the dot by a negated character class, example:</p>\n\n<pre><code>Pattern p = Pattern.compile(\"(\\\\[\\\\$)([^$]++)(\\\\$])\");\n</code></pre>\n\n<p><i>(note that you don't need to escape closing square brackets)</i></p>\n\n<p>But perhaps are you only interested by the content of the tags:</p>\n\n<pre><code>Pattern p = Pattern.compile(\"(?&lt;=\\\\[\\\\$)[^$]++(?=\\\\$])\");\n</code></pre>\n\n<p><i>In this case the content is the whole match</i></p>\n"}],"owner":{"account_id":3074397,"reputation":3,"user_id":2604175,"display_name":"user2604175"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":125,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":17772696,"answer_count":2,"score":0,"last_activity_date":1692861012,"creation_date":1374412358,"question_id":17772677,"body_markdown":"I have this string object which consists of tags(bounded by [$ and $]) and rest of the text. Im trying to isolate all of the tags. (Pattern-Matcher) recognize all of the tags properly, but two of them are combined into one. I dont have any idea why this is happening, probably some internal (Matcher-Pattern) bussiness. \r\n\r\n    String docBody = &quot;This is sample text.\\r\\n[$ FOR i 1 10 1 $]\\r\\n This is&quot; +\r\n\t\t\t\t&quot;[$ i $]-th time this message is generated.\\r\\n[$END$]\\r\\n&quot; +\r\n\t\t\t\t&quot;[$ FOR i 0 10 2 $]\\r\\n sin([$= i $]^2) = [$= i i * @sin \\&quot;0.000\\&quot;&quot; +\r\n\t\t\t\t&quot; @decfmt $]&quot; +\r\n\t\t\t\t&quot;\\r\\n[$END$] &quot;;\r\n\r\n    Pattern p = Pattern.compile(&quot;(\\\\[\\\\$)(.)+(\\\\$\\\\])&quot;);\r\n    Matcher m = p.matcher(docBody);\r\n\t\t\r\n\t\twhile(m.find()){\r\n\r\n\t\t\tSystem.out.println(m.group());\r\n\r\n                }\r\n\r\n    output:\r\n\r\n    [$ FOR i 1 10 1 $]\r\n    [$ i $]\r\n    [$END$]\r\n    [$ FOR i 0 10 2 $]\r\n    [$= i $]^2) = [$= i i * @sin &quot;0.000&quot; @decfmt $]\r\n    [$END$]` \r\n\r\nAs you can see, this part `[$= i $]^2) = [$= i i * @sin &quot;0.000&quot; @decfmt $]` is not split into these two tags `[$= i $]` and `[$= i i * @sin &quot;0.000&quot; @decfmt $]`\r\n\r\nAny suggestions why this is happening?\r\n","title":"(Pattern and Matcher) not discovering all pattern matches","body":"<p>I have this string object which consists of tags(bounded by [$ and $]) and rest of the text. Im trying to isolate all of the tags. (Pattern-Matcher) recognize all of the tags properly, but two of them are combined into one. I dont have any idea why this is happening, probably some internal (Matcher-Pattern) bussiness. </p>\n\n<pre><code>String docBody = \"This is sample text.\\r\\n[$ FOR i 1 10 1 $]\\r\\n This is\" +\n            \"[$ i $]-th time this message is generated.\\r\\n[$END$]\\r\\n\" +\n            \"[$ FOR i 0 10 2 $]\\r\\n sin([$= i $]^2) = [$= i i * @sin \\\"0.000\\\"\" +\n            \" @decfmt $]\" +\n            \"\\r\\n[$END$] \";\n\nPattern p = Pattern.compile(\"(\\\\[\\\\$)(.)+(\\\\$\\\\])\");\nMatcher m = p.matcher(docBody);\n\n    while(m.find()){\n\n        System.out.println(m.group());\n\n            }\n\noutput:\n\n[$ FOR i 1 10 1 $]\n[$ i $]\n[$END$]\n[$ FOR i 0 10 2 $]\n[$= i $]^2) = [$= i i * @sin \"0.000\" @decfmt $]\n[$END$]` \n</code></pre>\n\n<p>As you can see, this part <code>[$= i $]^2) = [$= i i * @sin \"0.000\" @decfmt $]</code> is not split into these two tags <code>[$= i $]</code> and <code>[$= i i * @sin \"0.000\" @decfmt $]</code></p>\n\n<p>Any suggestions why this is happening?</p>\n"},{"tags":["java","android","android-studio","android-recyclerview","seekbar"],"comments":[{"owner":{"account_id":952084,"reputation":9544,"user_id":978005,"accept_rate":82,"display_name":"Phix"},"score":0,"creation_date":1692846804,"post_id":76965991,"comment_id":135680419,"body_markdown":"Post your code. We can&#39;t debug a description of the problem.","body":"Post your code. We can&#39;t debug a description of the problem."},{"owner":{"account_id":26691682,"reputation":1,"user_id":20300170,"display_name":"kirubakaran"},"score":0,"creation_date":1692846893,"post_id":76965991,"comment_id":135680421,"body_markdown":"sure bro will post my code","body":"sure bro will post my code"},{"owner":{"account_id":26691682,"reputation":1,"user_id":20300170,"display_name":"kirubakaran"},"score":0,"creation_date":1692853195,"post_id":76965991,"comment_id":135680905,"body_markdown":"now You can check bro","body":"now You can check bro"},{"owner":{"account_id":19634805,"reputation":311,"user_id":14372265,"display_name":"Yogesh Rewani"},"score":0,"creation_date":1692853770,"post_id":76965991,"comment_id":135680946,"body_markdown":"Can&#39;t you think that you need to update the particular thing you are facing an issue with, or code where do you want help. Pasting 665 lines of code and expecting others to check the whole thing for you is not a good idea, I guess. it will be great you paste specific code","body":"Can&#39;t you think that you need to update the particular thing you are facing an issue with, or code where do you want help. Pasting 665 lines of code and expecting others to check the whole thing for you is not a good idea, I guess. it will be great you paste specific code"}],"answers":[{"tags":[],"owner":{"account_id":5783150,"reputation":158,"user_id":5340734,"display_name":"Umang"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692856888,"creation_date":1692856888,"answer_id":76966565,"question_id":76965991,"body_markdown":"The issue you are facing because You are getting the current progress of ```seekbar``` by using ```messageInfoList.get(position).getSeekBarProgressValue()```  but you are not updating the value to the list.","title":"SeekBar progress changes while scrolling the RecyclerView In android","body":"<p>The issue you are facing because You are getting the current progress of <code>seekbar</code> by using <code>messageInfoList.get(position).getSeekBarProgressValue()</code>  but you are not updating the value to the list.</p>\n"}],"owner":{"account_id":26691682,"reputation":1,"user_id":20300170,"display_name":"kirubakaran"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1692860578,"creation_date":1692846125,"question_id":76965991,"body_markdown":"I&#39;m working on a chat application&#160;similar to What&#39;s Up. The issue I&#39;m having is that I have the seek bar as well as the play icon in the recycler view. When I click the play symbol, the song is played, and the seek bar moves along with it.  It was working perfectly till here. The issue is that when I scroll the `recyclerView` while playing some songs, the progress of the seek bar is set to end automatically. If I scroll again, the seek bar progress position changes to according to song duration. I&#39;m not sure why this is  happening. Does anyone have a solution for this? thanks in Advance :)\r\n\r\n\r\n    public class ChatContentAdapter extends RecyclerView.Adapter implements Handler.Callback {\r\n        private OnItemClickListener onItemClickListener;\r\n        public Handler handler;\r\n        private List&lt;MessageInfo&gt; messageInfoList = new ArrayList&lt;&gt;();\r\n        List&lt;ZIMGroupMemberInfo&gt; memberList = new ArrayList&lt;&gt;();\r\n        private Activity activity;\r\n        Context context;\r\n        String date = &quot;&quot;;\r\n        int count=0;\r\n        boolean isPost = false;\r\n        //boolean dateAvailable=false;\r\n        String urlRegex = &quot;^((https?|ftp)://|(www|ftp)\\\\.)?[a-z0-9-]+(\\\\.[a-z0-9-]+)+([/?].*)?$&quot;;\r\n        GetRequestWithEditPostGetDetailsModel.Data postData ;\r\n        BaseViewHolder baseViewHolder;\r\n        private int playingPosition;\r\n        MediaPlayer mediaPlayer;\r\n        Uri audioPathUri;\r\n         Handler uiUpdateHandler = new Handler(this::handleMessage);\r\n\r\n        private float denseness;\r\n        private int width;\r\n\r\n        private static final int MSG_UPDATE_SEEK_BAR = 1845;\r\n        public ChatContentAdapter (Activity activity,OnItemClickListener onItemClickListener){\r\n            this.activity = activity;\r\n            this.onItemClickListener = onItemClickListener;\r\n        }\r\n        @Override\r\n        public RecyclerView.ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\r\n            RecyclerView.ViewHolder viewHolder = null;\r\n            if (ChatItemType.CHAT_ITEM_TYPE_RIGHT.value == viewType) {\r\n                viewHolder = new ChatRightViewHolder(parent, onItemClickListener, activity);\r\n            } else if (ChatItemType.CHAT_ITEM_TYPE_LEFT.value == viewType) {\r\n                viewHolder = new ChatLeftViewHolder(parent, onItemClickListener, activity);\r\n            } else if (ChatItemType.CHAT_ITEM_TYPE_CENTER.value == viewType){\r\n                viewHolder = new ChatCenterViewHolder(parent,activity);\r\n            }\r\n            return viewHolder;\r\n        }\r\n\r\n        @Override\r\n        public void onBindViewHolder(@NonNull RecyclerView.ViewHolder holder, int position) {\r\n\r\n            holder.itemView.setTag(position);\r\n            MessageInfo messageInfo = messageInfoList.get(position);\r\n            Log.d(&quot;TAG&quot;, &quot;onBindViewHolder: &quot;+messageInfo.isPlay());\r\n\r\n\r\n            if(HomeActivity.homeActivity.cacheRepository.getMessageDate().equals(&quot;0&quot;)){\r\n                HomeActivity.homeActivity.cacheRepository.saveMessageDate(Utilities.INSTANCE.getDateinYmd(messageInfo.getZIMMessage().getTimestamp()));\r\n            }\r\n\r\n            if (holder instanceof ChatLeftViewHolder) {\r\n                ChatLeftViewHolder chat = (ChatLeftViewHolder) holder;\r\n                chat.setMessageInfo(messageInfo,date,memberList,position,postData,messageInfoList.size());\r\n                chat.seekBar.setProgress(messageInfoList.get(position).getSeekBarProgressValue());\r\n                Log.i(&quot;TAG&quot;, &quot;onBindViewHolder: &quot; +messageInfoList.get(position).getSeekBarProgressValue() );\r\n                if (messageInfo.isPlay()){\r\n                    chat.ivPlayPause.setImageResource(R.drawable.ic_pause);\r\n\r\n                }else {\r\n                    chat.ivPlayPause.setImageResource(R.drawable.ic_play);\r\n                    chat.seekBar.setProgress(0);\r\n                    chat.txtProcess.setText(&quot;00:00:00&quot;+ &quot;/&quot;+ &quot;00:00:00&quot;);\r\n                }\r\n\r\n                chat.ivPlayPause.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {\r\n                        SDKManager.sharedInstance().downloadMediaFile((ZIMMediaMessage) messageInfo.getZIMMessage(), ZIMMediaFileType.ORIGINAL_FILE, new ZIMMediaDownloadedCallback() {\r\n                            @Override\r\n                            public void onMediaDownloaded(ZIMMediaMessage message, ZIMError errorInfo) {\r\n                               String path = new File(message.getFileLocalPath()).getAbsolutePath();\r\n                                if (!path.isEmpty()){\r\n                                   Uri audioPath = Uri.parse(path);\r\n                                   setPlayer(audioPath,position,chat);\r\n                                }\r\n                            }\r\n\r\n                            @Override\r\n                            public void onMediaDownloadingProgress(ZIMMediaMessage message, long currentFileSize, long totalFileSize) {\r\n                                AppLogger.getInstance().d(&quot;[%s] [onMediaDownloadingProgress] [currentFileSize:%d, totalFileSize:%d, message: %s]&quot;,&quot;TAG&quot;, currentFileSize, currentFileSize, message.getMessageID());\r\n                            }\r\n                        });\r\n\r\n                    }\r\n                });\r\n\r\n                chat.seekBar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {\r\n                    @SuppressLint(&quot;ResourceAsColor&quot;)\r\n                    @Override\r\n                    public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {\r\n\r\n                        if (fromUser) {\r\n                            if (mediaPlayer != null) {\r\n                                mediaPlayer.seekTo(progress);\r\n                                Log.i(&quot;TAG&quot;, &quot;onProgressChanged: &quot;+ progress);\r\n                            seekBar.setMax(mediaPlayer.getDuration()/1000);\r\n\r\n                            }\r\n\r\n                        }\r\n                    }\r\n\r\n                    @Override\r\n                    public void onStartTrackingTouch(SeekBar seekBar) {\r\n                        if (((Activity)context)  != null) {\r\n                            ((Activity) context).runOnUiThread(new Runnable() {\r\n                                @Override\r\n                                public void run() {\r\n                                    chat.imgPause.setVisibility(View.GONE);\r\n                                    chat.ivPlayPause.setVisibility(View.VISIBLE);\r\n                                }\r\n                            });\r\n                        }\r\n                    }\r\n\r\n                    @Override\r\n                    public void onStopTrackingTouch(SeekBar seekBar) {\r\n                        if (mediaPlayer != null) {\r\n                            ((Activity) context).runOnUiThread(new Runnable() {\r\n                                @Override\r\n                                public void run() {\r\n                                    chat.ivPlayPause.setVisibility(View.GONE);\r\n                                    chat.imgPause.setVisibility(View.VISIBLE);\r\n                                    try {\r\n                                        mediaPlayer.start();\r\n                                    } catch (Exception e) {\r\n                                        e.printStackTrace();\r\n                                    }\r\n\r\n                                }\r\n                            });\r\n\r\n                        }\r\n                    }\r\n\r\n                });\r\n            } else if (holder instanceof ChatRightViewHolder) {\r\n                ChatRightViewHolder chat = (ChatRightViewHolder) holder;\r\n\r\n                chat.setMessageInfo(messageInfo, date,memberList,position,postData, messageInfoList.size());\r\n\r\n                chat.seekBar.setProgress(messageInfoList.get(position).getSeekBarProgressValue());\r\n\r\n                if (messageInfo.isPlay()){\r\n                    chat.ivPlayPause.setImageResource(R.drawable.ic_pause);\r\n\r\n                }else {\r\n                    chat.ivPlayPause.setImageResource(R.drawable.ic_play);\r\n                    chat.seekBar.setProgress(0);\r\n                    chat.txtProcess.setText(&quot;00:00:00&quot;+ &quot; / &quot; + &quot;00:00:00&quot;);\r\n                }\r\n                chat.ivPlayPause.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {\r\n                        SDKManager.sharedInstance().downloadMediaFile((ZIMMediaMessage) messageInfo.getZIMMessage(), ZIMMediaFileType.ORIGINAL_FILE, new ZIMMediaDownloadedCallback() {\r\n                            @Override\r\n                            public void onMediaDownloaded(ZIMMediaMessage message, ZIMError errorInfo) {\r\n                                String path = new File(message.getFileLocalPath()).getAbsolutePath();\r\n                                if (!path.isEmpty()){\r\n                                    Uri audioPath = Uri.parse(path);\r\n                                    setPlayerRight(audioPath,position, chat);\r\n                                }\r\n                            }\r\n\r\n                            @Override\r\n                            public void onMediaDownloadingProgress(ZIMMediaMessage message, long currentFileSize, long totalFileSize) {\r\n                                AppLogger.getInstance().d(&quot;[%s] [onMediaDownloadingProgress] [currentFileSize:%d, totalFileSize:%d, message: %s]&quot;, &quot;TAG&quot;, currentFileSize, currentFileSize, message.getMessageID());\r\n                            }\r\n                        });\r\n                    }\r\n                });\r\n\r\n                chat.seekBar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {\r\n\r\n                    @Override\r\n                    public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {\r\n                        if (((Activity) context) != null) {\r\n                            if (fromUser) {\r\n                                if (mediaPlayer!=null){\r\n                                    mediaPlayer.seekTo(progress );\r\n                                    Log.i(&quot;TAG&quot;, &quot;run: &quot; + progress);\r\n                                    seekBar.setMax(mediaPlayer.getDuration()/1000);\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    @Override\r\n                    public void onStartTrackingTouch(SeekBar seekBar) {\r\n\r\n                        if (((Activity)context)  != null) {\r\n                            ((Activity) context).runOnUiThread(new Runnable() {\r\n                                @Override\r\n                                public void run() {\r\n    //                                chat.ivPlayPause.setVisibility(View.GONE);\r\n    //                                chat.imgPause.setVisibility(View.VISIBLE);\r\n\r\n                                }\r\n                            });\r\n                        }\r\n                    }\r\n\r\n                    @Override\r\n                    public void onStopTrackingTouch(SeekBar seekBar) {\r\n                        if (mediaPlayer != null) {\r\n                        if (((Activity)context)  != null) {\r\n                            ((Activity) context).runOnUiThread(new Runnable() {\r\n                                @Override\r\n                                public void run() {\r\n    //                                chat.ivPlayPause.setVisibility(View.GONE);\r\n    //                                chat.imgPause.setVisibility(View.VISIBLE);\r\n                                    try {\r\n                                        mediaPlayer.start();\r\n                                    } catch (Exception e) {\r\n                                        e.printStackTrace();\r\n                                    }\r\n                                }\r\n                            });\r\n                        }\r\n                        }\r\n                    }\r\n                });\r\n          }\r\n            }\r\n\r\n        }\r\n\r\n        private void updateForRightViewHolder(MediaPlayer mediaPlayer, ChatRightViewHolder chat, SeekBar seekBar, Context context) {\r\n\r\n            if (mediaPlayer.getDuration() - mediaPlayer.getCurrentPosition() &gt; 100) {\r\n                chat.txtProcess.setText(convertSecondsToHMmSs(mediaPlayer.getCurrentPosition() / 1000) + &quot; / &quot; + convertSecondsToHMmSs(this.mediaPlayer.getDuration() / 1000));\r\n    //            seekBar.setProgress(mediaPlayer.getCurrentPosition());\r\n                Log.i(&quot;TAG&quot;, &quot;updateForRightViewHolder: &quot; + playingPosition  + mediaPlayer.getCurrentPosition());\r\n                onItemClickListener.seekBarProgressValue(playingPosition,mediaPlayer.getCurrentPosition());\r\n\r\n            }else {\r\n                chat.txtProcess.setText(convertSecondsToHMmSs(mediaPlayer.getDuration() / 1000));\r\n    //            seekBar.setProgress(mediaPlayer.getCurrentPosition());\r\n                Log.i(&quot;TAG&quot;, &quot;updateForRightViewHolder: &quot; + playingPosition  + mediaPlayer.getCurrentPosition());\r\n                onItemClickListener.seekBarProgressValue(playingPosition,mediaPlayer.getCurrentPosition());\r\n            }\r\n            Handler handler = new Handler();\r\n\r\n            try{\r\n                Runnable runnable = new Runnable() {\r\n                    @Override\r\n                    public void run() {\r\n                        try{\r\n                            if (ChatContentAdapter.this.mediaPlayer.getCurrentPosition() &gt; -1) {\r\n                                try {\r\n                                    updateForRightViewHolder(mediaPlayer,chat, seekBar, context);\r\n                                } catch (Exception e) {\r\n                                    e.printStackTrace();\r\n                                }\r\n                            }\r\n                        }catch (Exception e){\r\n                            e.printStackTrace();\r\n                        }\r\n                    }\r\n                };\r\n    //            handler.postDelayed(runnable, 100);\r\n                seekBar.postDelayed(runnable,100);\r\n            }catch (Exception e){\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n\r\n        private void setPlayerRight(Uri audioPath, int position, ChatRightViewHolder chat) {\r\n            if (position == playingPosition){\r\n                if (mediaPlayer.isPlaying()) {\r\n                    messageInfoList.get(position).setPlay(false);\r\n                    mediaPlayer.pause();\r\n                    chat.ivPlayPause.setImageResource(R.drawable.ic_play);\r\n                } else {\r\n                    messageInfoList.get(position).setPlay(true);\r\n                    mediaPlayer.start();\r\n                    chat.ivPlayPause.setImageResource(R.drawable.ic_pause);\r\n                }\r\n\r\n            }else {\r\n                if (playingPosition != -1) {\r\n                    onItemClickListener.getPosition(playingPosition);\r\n                }\r\n                playingPosition = position;\r\n                if (mediaPlayer != null) {\r\n                    chat.ivPlayPause.setImageResource(R.drawable.ic_play);\r\n                    mediaPlayer.release();\r\n                }\r\n                startRightMediaPlayer(audioPath, chat);\r\n                messageInfoList.get(position).setPlay(true);\r\n                chat.ivPlayPause.setImageResource(R.drawable.ic_pause);\r\n            }\r\n        }\r\n\r\n        private void startRightMediaPlayer(Uri audioPath, ChatRightViewHolder chat) {\r\n            mediaPlayer = MediaPlayer.create(getApplicationContext(),audioPath);\r\n\r\n            mediaPlayer.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {\r\n                @Override\r\n                public void onPrepared(MediaPlayer mp) {\r\n                    chat.seekBar.setMax(mp.getDuration());\r\n                    chat.txtProcess.setText(&quot;00:00:00/&quot;+convertSecondsToHMmSs(mp.getDuration() / 1000));\r\n                }\r\n            });\r\n\r\n            mediaPlayer.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {\r\n                @Override\r\n                public void onCompletion(MediaPlayer mp) {\r\n                    releaseMediaPlayer();\r\n                }\r\n            });\r\n            mediaPlayer.start();\r\n            updateForRightViewHolder(mediaPlayer, chat, chat.seekBar, context);\r\n        }\r\n\r\n\r\n\r\n        private void setPlayer(Uri audioPath, int position, ChatLeftViewHolder chat) {\r\n            if (position == playingPosition){\r\n\r\n                if (mediaPlayer.isPlaying()) {\r\n                    mediaPlayer.pause();\r\n                    messageInfoList.get(position).setPlay(false);\r\n                    chat.ivPlayPause.setImageResource(R.drawable.ic_play);\r\n                } else {\r\n                    messageInfoList.get(position).setPlay(true);\r\n                    mediaPlayer.start();\r\n                    chat.ivPlayPause.setImageResource(R.drawable.ic_pause);\r\n                }\r\n            }else {\r\n                if (playingPosition != -1) {\r\n                    onItemClickListener.getPosition(playingPosition);\r\n                }\r\n                playingPosition = position;\r\n                if (mediaPlayer != null) {\r\n                    chat.ivPlayPause.setImageResource(R.drawable.ic_play);\r\n\r\n                    mediaPlayer.release();\r\n                }\r\n\r\n                startMediaPlayer(audioPath,chat);\r\n                messageInfoList.get(position).setPlay(true);\r\n                chat.ivPlayPause.setImageResource(R.drawable.ic_pause);\r\n            }\r\n        }\r\n\r\n        private void startMediaPlayer(Uri audioPathUri, ChatLeftViewHolder chat) {\r\n            mediaPlayer = MediaPlayer.create(getApplicationContext(),audioPathUri);\r\n            mediaPlayer.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {\r\n                @Override\r\n                public void onPrepared(MediaPlayer mp) {\r\n                    chat.seekBar.setMax(mp.getDuration());\r\n                    chat.txtProcess.setText(&quot;00:00:00/&quot;+convertSecondsToHMmSs(mp.getDuration() / 1000));\r\n                }\r\n            });\r\n\r\n            mediaPlayer.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {\r\n                @Override\r\n                public void onCompletion(MediaPlayer mp) {\r\n                    chat.ivPlayPause.setImageResource(R.drawable.ic_play);\r\n                    releaseMediaPlayer();\r\n                }\r\n            });\r\n                mediaPlayer.start();\r\n                update(mediaPlayer, chat, chat.seekBar, context);\r\n\r\n            chat.seekBar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {\r\n                @Override\r\n                public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {\r\n\r\n                    if (((Activity) context) != null) {\r\n                        if (fromUser) {\r\n                            ((Activity) context).runOnUiThread(new Runnable() {\r\n                                @Override\r\n                                public void run() {\r\n                                    if (mediaPlayer != null) {\r\n                                        mediaPlayer.seekTo(progress);\r\n                                        Log.i(&quot;TAG&quot;, &quot;run: &quot; + progress);\r\n                                    }\r\n                                }\r\n                            });\r\n\r\n                        }\r\n                    }\r\n                }\r\n\r\n                @Override\r\n                public void onStartTrackingTouch(SeekBar seekBar) {\r\n\r\n                        if (((Activity)context)  != null) {\r\n                            ((Activity) context).runOnUiThread(new Runnable() {\r\n                                @Override\r\n                                public void run() {\r\n    //                                chat.ivPlayPause.setVisibility(View.GONE);\r\n    //                                chat.imgPause.setVisibility(View.VISIBLE);\r\n                                }\r\n                            });\r\n                        }\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onStopTrackingTouch(SeekBar seekBar) {\r\n                    if (mediaPlayer != null) {\r\n                    if (((Activity)context)  != null) {\r\n                        ((Activity) context).runOnUiThread(new Runnable() {\r\n                            @Override\r\n                            public void run() {\r\n    //                            chat.ivPlayPause.setVisibility(View.GONE);\r\n    //                            chat.imgPause.setVisibility(View.VISIBLE);\r\n                                try {\r\n                                    mediaPlayer.start();\r\n                                } catch (Exception e) {\r\n                                    e.printStackTrace();\r\n                                }\r\n                            }\r\n                        });\r\n                    }\r\n                    }\r\n                }\r\n            });\r\n            }\r\n        private void update(MediaPlayer mediaPlayer, ChatLeftViewHolder chat, SeekBar seekBar, Context context) {\r\n\r\n            if (mediaPlayer.getDuration() - mediaPlayer.getCurrentPosition() &gt; 100) {\r\n                chat.txtProcess.setText(convertSecondsToHMmSs(mediaPlayer.getCurrentPosition() / 1000) + &quot; / &quot; + convertSecondsToHMmSs(this.mediaPlayer.getDuration() / 1000));\r\n    //            seekBar.setProgress(mediaPlayer.getCurrentPosition());\r\n                onItemClickListener.seekBarProgressValue(playingPosition,mediaPlayer.getCurrentPosition());\r\n\r\n            }else {\r\n                chat.txtProcess.setText(convertSecondsToHMmSs(mediaPlayer.getDuration() / 1000));\r\n    //            seekBar.setProgress(mediaPlayer.getCurrentPosition());\r\n            }\r\n            Handler handler = new Handler();\r\n\r\n            try{\r\n                Runnable runnable = new Runnable() {\r\n                    @Override\r\n                    public void run() {\r\n                        try{\r\n                            if (ChatContentAdapter.this.mediaPlayer.getCurrentPosition() &gt; -1) {\r\n                                try {\r\n                                    update(mediaPlayer,chat, seekBar, context);\r\n                                } catch (Exception e) {\r\n                                    e.printStackTrace();\r\n                                }\r\n                            }\r\n                        }catch (Exception e){\r\n                            e.printStackTrace();\r\n                        }\r\n\r\n                    }\r\n                };\r\n                handler.postDelayed(runnable, 100);\r\n    //            seekBar.postDelayed(runnable,500);\r\n            }catch (Exception e){\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n\r\n\r\n        private static String convertSecondsToHMmSs(int seconds) {\r\n            long s = seconds % 60;\r\n            long m = (seconds / 60) % 60;\r\n            long h = (seconds / (60 * 60)) % 24;\r\n            return String.format(&quot;%02d:%02d:%02d&quot;, h,m,s);\r\n        }\r\n\r\n        public void releaseMediaPlayer() {\r\n    //        if (null != baseViewHolder) {\r\n    //            updateNonPlayingView(baseViewHolder);\r\n    //        }\r\n\r\n            mediaPlayer.release();\r\n\r\n            mediaPlayer = null;\r\n            playingPosition = -1;\r\n        }\r\n\r\n        public void updateNonPlayingView(BaseViewHolder holder) {\r\n            holder.ivPlayPause.setImageResource(R.drawable.ic_play_arrow);\r\n            holder.seekBar.setMax(mediaPlayer.getDuration());\r\n            holder.seekBar.setProgress(mediaPlayer.getCurrentPosition());\r\n            holder.seekBar.setEnabled(true);\r\n            if (mediaPlayer.isPlaying()){\r\n                uiUpdateHandler.sendEmptyMessageDelayed(MSG_UPDATE_SEEK_BAR, 100);\r\n                holder.ivPlayPause.setVisibility(View.GONE);\r\n                holder.imgPause.setVisibility(VISIBLE);\r\n            }else {\r\n                uiUpdateHandler.removeMessages(MSG_UPDATE_SEEK_BAR);\r\n                holder.imgPause.setVisibility(View.GONE);\r\n                holder.ivPlayPause.setVisibility(VISIBLE);\r\n            }\r\n        }\r\n\r\n         public   void stopPlayer(){\r\n            if (null != mediaPlayer) {\r\n                releaseMediaPlayer();\r\n            }\r\n\r\n        }\r\n\r\n\r\n\r\n\r\n        @Override\r\n        public int getItemViewType(int position) {\r\n            return messageInfoList.get(position).getType().value;\r\n        }\r\n\r\n\r\n\r\n\r\n\r\n        @Override\r\n        public int getItemCount() {\r\n            return messageInfoList.size();\r\n        }\r\n\r\n\r\n\r\n        @Override\r\n        public long getItemId(int position) {\r\n            return messageInfoList.get(position).hashCode();\r\n        }\r\n\r\n\r\n\r\n\r\n    //    @Override\r\n    //    public void onAttachedToRecyclerView(@NonNull RecyclerView recyclerView) {\r\n    //        super.onAttachedToRecyclerView(recyclerView);\r\n    //        recyclerView.smoothScrollToPosition(messageInfoList.size()-1);\r\n    //    }\r\n\r\n        public void add(MessageInfo messageInfo) {\r\n            messageInfoList.add(0,messageInfo);\r\n        }\r\n\r\n\r\n        public void setPlayPause(int pos){\r\n            messageInfoList.get(pos).setPlay(false);\r\n            notifyItemChanged(pos);\r\n        }\r\n\r\n        public void setSeekBar(int playingPosition ,int progressValue){\r\n            messageInfoList.get(playingPosition).setSeekBarProgressValue(progressValue);\r\n            notifyItemChanged(playingPosition);\r\n            Log.i(&quot;TAG&quot;, &quot;setSeekBarAdapter: &quot; + playingPosition + progressValue);\r\n        }\r\n\r\n        public void addMessageToBottom(MessageInfo messageInfo){\r\n            messageInfoList.add(messageInfo);\r\n        }\r\n\r\n        public void delete(MessageInfo info) {\r\n            MessageInfo tempInfo = info;\r\n            for (MessageInfo c : messageInfoList) {\r\n                if (c.getZIMMessage().getMessageID() == info.getZIMMessage().getMessageID()) {\r\n                    tempInfo = c;\r\n                }\r\n            }\r\n            messageInfoList.remove(tempInfo);\r\n        }\r\n\r\n        public void delete(long messageId) {\r\n            MessageInfo tempInfo = null;\r\n            int position = 0;\r\n            for (int i = 0; i &lt; messageInfoList.size(); i++) {\r\n                if (messageInfoList.get(i).getZIMMessage().getMessageID() == messageId) {\r\n                    tempInfo = messageInfoList.get(i);\r\n                    position = i;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            if (tempInfo!=null){\r\n                messageInfoList.remove(tempInfo);\r\n                notifyItemRemoved(position);\r\n            }\r\n        }\r\n\r\n        public void clearInfo() {\r\n            messageInfoList.clear();\r\n        }\r\n\r\n        public MessageInfo getMessage(int index) {\r\n            if (messageInfoList != null &amp;&amp; messageInfoList.size() &gt; 0) {\r\n                return messageInfoList.get(index);\r\n            }\r\n            return null;\r\n        }\r\n\r\n        public void set(MessageInfo info){\r\n            int position = 0;\r\n            for (int i = 0; i &lt; messageInfoList.size(); i++) {\r\n                if (messageInfoList.get(i).getZIMMessage().getLocalMessageID() == info.getZIMMessage().getLocalMessageID()) {\r\n                    position = i;\r\n                    break;\r\n                }\r\n            }\r\n            if (position!=0){\r\n                messageInfoList.set(position,info);\r\n                notifyItemChanged(position);\r\n            }\r\n\r\n        }\r\n\r\n        public void updateMessageWhenDiffSentStatus(MessageInfo info){\r\n            int position = 0;\r\n            for (int i = 0; i &lt; messageInfoList.size(); i++) {\r\n                ZIMMessage oldMessage = messageInfoList.get(i).getZIMMessage();\r\n                ZIMMessage newMessage = info.getZIMMessage();\r\n                if (oldMessage.getLocalMessageID() == info.getZIMMessage().getLocalMessageID() &amp;&amp; newMessage.getSentStatus() != oldMessage.getSentStatus()) {\r\n                    position = i;\r\n                    break;\r\n                }\r\n            }\r\n            if (position!=0){\r\n                messageInfoList.set(position,info);\r\n                notifyItemChanged(position);\r\n            }\r\n        }\r\n\r\n        public List&lt;MessageInfo&gt; getMessageInfoList(){\r\n            return messageInfoList;\r\n        }\r\n\r\n        public void setMemberList(List&lt;ZIMGroupMemberInfo&gt; memberList){\r\n            this.memberList = memberList;\r\n            notifyDataSetChanged();\r\n\r\n        }\r\n\r\n        public void setDetailsPost(GetRequestWithEditPostGetDetailsModel.Data data, int postPos) {\r\n            this.postData = data;\r\n            notifyItemChanged(postPos);\r\n        }\r\n\r\n        @Override\r\n        public boolean handleMessage(@NonNull Message msg ) {\r\n\r\n            switch (msg.what) {\r\n                case MSG_UPDATE_SEEK_BAR: {\r\n                    baseViewHolder.seekBar.setProgress(mediaPlayer.getCurrentPosition());\r\n                    uiUpdateHandler.sendEmptyMessageDelayed(MSG_UPDATE_SEEK_BAR, 100);\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n    }\r\n\r\n\r\n\r\nAfter scrolling the Recycler the position of seekbar thumb set to end.\r\n\r\n\r\n","title":"SeekBar progress changes while scrolling the RecyclerView In android","body":"<p>I'm working on a chat application similar to What's Up. The issue I'm having is that I have the seek bar as well as the play icon in the recycler view. When I click the play symbol, the song is played, and the seek bar moves along with it.  It was working perfectly till here. The issue is that when I scroll the <code>recyclerView</code> while playing some songs, the progress of the seek bar is set to end automatically. If I scroll again, the seek bar progress position changes to according to song duration. I'm not sure why this is  happening. Does anyone have a solution for this? thanks in Advance :)</p>\n<pre><code>public class ChatContentAdapter extends RecyclerView.Adapter implements Handler.Callback {\n    private OnItemClickListener onItemClickListener;\n    public Handler handler;\n    private List&lt;MessageInfo&gt; messageInfoList = new ArrayList&lt;&gt;();\n    List&lt;ZIMGroupMemberInfo&gt; memberList = new ArrayList&lt;&gt;();\n    private Activity activity;\n    Context context;\n    String date = &quot;&quot;;\n    int count=0;\n    boolean isPost = false;\n    //boolean dateAvailable=false;\n    String urlRegex = &quot;^((https?|ftp)://|(www|ftp)\\\\.)?[a-z0-9-]+(\\\\.[a-z0-9-]+)+([/?].*)?$&quot;;\n    GetRequestWithEditPostGetDetailsModel.Data postData ;\n    BaseViewHolder baseViewHolder;\n    private int playingPosition;\n    MediaPlayer mediaPlayer;\n    Uri audioPathUri;\n     Handler uiUpdateHandler = new Handler(this::handleMessage);\n\n    private float denseness;\n    private int width;\n\n    private static final int MSG_UPDATE_SEEK_BAR = 1845;\n    public ChatContentAdapter (Activity activity,OnItemClickListener onItemClickListener){\n        this.activity = activity;\n        this.onItemClickListener = onItemClickListener;\n    }\n    @Override\n    public RecyclerView.ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\n        RecyclerView.ViewHolder viewHolder = null;\n        if (ChatItemType.CHAT_ITEM_TYPE_RIGHT.value == viewType) {\n            viewHolder = new ChatRightViewHolder(parent, onItemClickListener, activity);\n        } else if (ChatItemType.CHAT_ITEM_TYPE_LEFT.value == viewType) {\n            viewHolder = new ChatLeftViewHolder(parent, onItemClickListener, activity);\n        } else if (ChatItemType.CHAT_ITEM_TYPE_CENTER.value == viewType){\n            viewHolder = new ChatCenterViewHolder(parent,activity);\n        }\n        return viewHolder;\n    }\n\n    @Override\n    public void onBindViewHolder(@NonNull RecyclerView.ViewHolder holder, int position) {\n\n        holder.itemView.setTag(position);\n        MessageInfo messageInfo = messageInfoList.get(position);\n        Log.d(&quot;TAG&quot;, &quot;onBindViewHolder: &quot;+messageInfo.isPlay());\n\n\n        if(HomeActivity.homeActivity.cacheRepository.getMessageDate().equals(&quot;0&quot;)){\n            HomeActivity.homeActivity.cacheRepository.saveMessageDate(Utilities.INSTANCE.getDateinYmd(messageInfo.getZIMMessage().getTimestamp()));\n        }\n\n        if (holder instanceof ChatLeftViewHolder) {\n            ChatLeftViewHolder chat = (ChatLeftViewHolder) holder;\n            chat.setMessageInfo(messageInfo,date,memberList,position,postData,messageInfoList.size());\n            chat.seekBar.setProgress(messageInfoList.get(position).getSeekBarProgressValue());\n            Log.i(&quot;TAG&quot;, &quot;onBindViewHolder: &quot; +messageInfoList.get(position).getSeekBarProgressValue() );\n            if (messageInfo.isPlay()){\n                chat.ivPlayPause.setImageResource(R.drawable.ic_pause);\n\n            }else {\n                chat.ivPlayPause.setImageResource(R.drawable.ic_play);\n                chat.seekBar.setProgress(0);\n                chat.txtProcess.setText(&quot;00:00:00&quot;+ &quot;/&quot;+ &quot;00:00:00&quot;);\n            }\n\n            chat.ivPlayPause.setOnClickListener(new View.OnClickListener() {\n                @Override\n                public void onClick(View v) {\n                    SDKManager.sharedInstance().downloadMediaFile((ZIMMediaMessage) messageInfo.getZIMMessage(), ZIMMediaFileType.ORIGINAL_FILE, new ZIMMediaDownloadedCallback() {\n                        @Override\n                        public void onMediaDownloaded(ZIMMediaMessage message, ZIMError errorInfo) {\n                           String path = new File(message.getFileLocalPath()).getAbsolutePath();\n                            if (!path.isEmpty()){\n                               Uri audioPath = Uri.parse(path);\n                               setPlayer(audioPath,position,chat);\n                            }\n                        }\n\n                        @Override\n                        public void onMediaDownloadingProgress(ZIMMediaMessage message, long currentFileSize, long totalFileSize) {\n                            AppLogger.getInstance().d(&quot;[%s] [onMediaDownloadingProgress] [currentFileSize:%d, totalFileSize:%d, message: %s]&quot;,&quot;TAG&quot;, currentFileSize, currentFileSize, message.getMessageID());\n                        }\n                    });\n\n                }\n            });\n\n            chat.seekBar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {\n                @SuppressLint(&quot;ResourceAsColor&quot;)\n                @Override\n                public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {\n\n                    if (fromUser) {\n                        if (mediaPlayer != null) {\n                            mediaPlayer.seekTo(progress);\n                            Log.i(&quot;TAG&quot;, &quot;onProgressChanged: &quot;+ progress);\n                        seekBar.setMax(mediaPlayer.getDuration()/1000);\n\n                        }\n\n                    }\n                }\n\n                @Override\n                public void onStartTrackingTouch(SeekBar seekBar) {\n                    if (((Activity)context)  != null) {\n                        ((Activity) context).runOnUiThread(new Runnable() {\n                            @Override\n                            public void run() {\n                                chat.imgPause.setVisibility(View.GONE);\n                                chat.ivPlayPause.setVisibility(View.VISIBLE);\n                            }\n                        });\n                    }\n                }\n\n                @Override\n                public void onStopTrackingTouch(SeekBar seekBar) {\n                    if (mediaPlayer != null) {\n                        ((Activity) context).runOnUiThread(new Runnable() {\n                            @Override\n                            public void run() {\n                                chat.ivPlayPause.setVisibility(View.GONE);\n                                chat.imgPause.setVisibility(View.VISIBLE);\n                                try {\n                                    mediaPlayer.start();\n                                } catch (Exception e) {\n                                    e.printStackTrace();\n                                }\n\n                            }\n                        });\n\n                    }\n                }\n\n            });\n        } else if (holder instanceof ChatRightViewHolder) {\n            ChatRightViewHolder chat = (ChatRightViewHolder) holder;\n\n            chat.setMessageInfo(messageInfo, date,memberList,position,postData, messageInfoList.size());\n\n            chat.seekBar.setProgress(messageInfoList.get(position).getSeekBarProgressValue());\n\n            if (messageInfo.isPlay()){\n                chat.ivPlayPause.setImageResource(R.drawable.ic_pause);\n\n            }else {\n                chat.ivPlayPause.setImageResource(R.drawable.ic_play);\n                chat.seekBar.setProgress(0);\n                chat.txtProcess.setText(&quot;00:00:00&quot;+ &quot; / &quot; + &quot;00:00:00&quot;);\n            }\n            chat.ivPlayPause.setOnClickListener(new View.OnClickListener() {\n                @Override\n                public void onClick(View v) {\n                    SDKManager.sharedInstance().downloadMediaFile((ZIMMediaMessage) messageInfo.getZIMMessage(), ZIMMediaFileType.ORIGINAL_FILE, new ZIMMediaDownloadedCallback() {\n                        @Override\n                        public void onMediaDownloaded(ZIMMediaMessage message, ZIMError errorInfo) {\n                            String path = new File(message.getFileLocalPath()).getAbsolutePath();\n                            if (!path.isEmpty()){\n                                Uri audioPath = Uri.parse(path);\n                                setPlayerRight(audioPath,position, chat);\n                            }\n                        }\n\n                        @Override\n                        public void onMediaDownloadingProgress(ZIMMediaMessage message, long currentFileSize, long totalFileSize) {\n                            AppLogger.getInstance().d(&quot;[%s] [onMediaDownloadingProgress] [currentFileSize:%d, totalFileSize:%d, message: %s]&quot;, &quot;TAG&quot;, currentFileSize, currentFileSize, message.getMessageID());\n                        }\n                    });\n                }\n            });\n\n            chat.seekBar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {\n\n                @Override\n                public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {\n                    if (((Activity) context) != null) {\n                        if (fromUser) {\n                            if (mediaPlayer!=null){\n                                mediaPlayer.seekTo(progress );\n                                Log.i(&quot;TAG&quot;, &quot;run: &quot; + progress);\n                                seekBar.setMax(mediaPlayer.getDuration()/1000);\n                            }\n                        }\n                    }\n                }\n                @Override\n                public void onStartTrackingTouch(SeekBar seekBar) {\n\n                    if (((Activity)context)  != null) {\n                        ((Activity) context).runOnUiThread(new Runnable() {\n                            @Override\n                            public void run() {\n//                                chat.ivPlayPause.setVisibility(View.GONE);\n//                                chat.imgPause.setVisibility(View.VISIBLE);\n\n                            }\n                        });\n                    }\n                }\n\n                @Override\n                public void onStopTrackingTouch(SeekBar seekBar) {\n                    if (mediaPlayer != null) {\n                    if (((Activity)context)  != null) {\n                        ((Activity) context).runOnUiThread(new Runnable() {\n                            @Override\n                            public void run() {\n//                                chat.ivPlayPause.setVisibility(View.GONE);\n//                                chat.imgPause.setVisibility(View.VISIBLE);\n                                try {\n                                    mediaPlayer.start();\n                                } catch (Exception e) {\n                                    e.printStackTrace();\n                                }\n                            }\n                        });\n                    }\n                    }\n                }\n            });\n      }\n        }\n\n    }\n\n    private void updateForRightViewHolder(MediaPlayer mediaPlayer, ChatRightViewHolder chat, SeekBar seekBar, Context context) {\n\n        if (mediaPlayer.getDuration() - mediaPlayer.getCurrentPosition() &gt; 100) {\n            chat.txtProcess.setText(convertSecondsToHMmSs(mediaPlayer.getCurrentPosition() / 1000) + &quot; / &quot; + convertSecondsToHMmSs(this.mediaPlayer.getDuration() / 1000));\n//            seekBar.setProgress(mediaPlayer.getCurrentPosition());\n            Log.i(&quot;TAG&quot;, &quot;updateForRightViewHolder: &quot; + playingPosition  + mediaPlayer.getCurrentPosition());\n            onItemClickListener.seekBarProgressValue(playingPosition,mediaPlayer.getCurrentPosition());\n\n        }else {\n            chat.txtProcess.setText(convertSecondsToHMmSs(mediaPlayer.getDuration() / 1000));\n//            seekBar.setProgress(mediaPlayer.getCurrentPosition());\n            Log.i(&quot;TAG&quot;, &quot;updateForRightViewHolder: &quot; + playingPosition  + mediaPlayer.getCurrentPosition());\n            onItemClickListener.seekBarProgressValue(playingPosition,mediaPlayer.getCurrentPosition());\n        }\n        Handler handler = new Handler();\n\n        try{\n            Runnable runnable = new Runnable() {\n                @Override\n                public void run() {\n                    try{\n                        if (ChatContentAdapter.this.mediaPlayer.getCurrentPosition() &gt; -1) {\n                            try {\n                                updateForRightViewHolder(mediaPlayer,chat, seekBar, context);\n                            } catch (Exception e) {\n                                e.printStackTrace();\n                            }\n                        }\n                    }catch (Exception e){\n                        e.printStackTrace();\n                    }\n                }\n            };\n//            handler.postDelayed(runnable, 100);\n            seekBar.postDelayed(runnable,100);\n        }catch (Exception e){\n            e.printStackTrace();\n        }\n    }\n\n    private void setPlayerRight(Uri audioPath, int position, ChatRightViewHolder chat) {\n        if (position == playingPosition){\n            if (mediaPlayer.isPlaying()) {\n                messageInfoList.get(position).setPlay(false);\n                mediaPlayer.pause();\n                chat.ivPlayPause.setImageResource(R.drawable.ic_play);\n            } else {\n                messageInfoList.get(position).setPlay(true);\n                mediaPlayer.start();\n                chat.ivPlayPause.setImageResource(R.drawable.ic_pause);\n            }\n\n        }else {\n            if (playingPosition != -1) {\n                onItemClickListener.getPosition(playingPosition);\n            }\n            playingPosition = position;\n            if (mediaPlayer != null) {\n                chat.ivPlayPause.setImageResource(R.drawable.ic_play);\n                mediaPlayer.release();\n            }\n            startRightMediaPlayer(audioPath, chat);\n            messageInfoList.get(position).setPlay(true);\n            chat.ivPlayPause.setImageResource(R.drawable.ic_pause);\n        }\n    }\n\n    private void startRightMediaPlayer(Uri audioPath, ChatRightViewHolder chat) {\n        mediaPlayer = MediaPlayer.create(getApplicationContext(),audioPath);\n\n        mediaPlayer.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {\n            @Override\n            public void onPrepared(MediaPlayer mp) {\n                chat.seekBar.setMax(mp.getDuration());\n                chat.txtProcess.setText(&quot;00:00:00/&quot;+convertSecondsToHMmSs(mp.getDuration() / 1000));\n            }\n        });\n\n        mediaPlayer.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {\n            @Override\n            public void onCompletion(MediaPlayer mp) {\n                releaseMediaPlayer();\n            }\n        });\n        mediaPlayer.start();\n        updateForRightViewHolder(mediaPlayer, chat, chat.seekBar, context);\n    }\n\n\n\n    private void setPlayer(Uri audioPath, int position, ChatLeftViewHolder chat) {\n        if (position == playingPosition){\n\n            if (mediaPlayer.isPlaying()) {\n                mediaPlayer.pause();\n                messageInfoList.get(position).setPlay(false);\n                chat.ivPlayPause.setImageResource(R.drawable.ic_play);\n            } else {\n                messageInfoList.get(position).setPlay(true);\n                mediaPlayer.start();\n                chat.ivPlayPause.setImageResource(R.drawable.ic_pause);\n            }\n        }else {\n            if (playingPosition != -1) {\n                onItemClickListener.getPosition(playingPosition);\n            }\n            playingPosition = position;\n            if (mediaPlayer != null) {\n                chat.ivPlayPause.setImageResource(R.drawable.ic_play);\n\n                mediaPlayer.release();\n            }\n\n            startMediaPlayer(audioPath,chat);\n            messageInfoList.get(position).setPlay(true);\n            chat.ivPlayPause.setImageResource(R.drawable.ic_pause);\n        }\n    }\n\n    private void startMediaPlayer(Uri audioPathUri, ChatLeftViewHolder chat) {\n        mediaPlayer = MediaPlayer.create(getApplicationContext(),audioPathUri);\n        mediaPlayer.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {\n            @Override\n            public void onPrepared(MediaPlayer mp) {\n                chat.seekBar.setMax(mp.getDuration());\n                chat.txtProcess.setText(&quot;00:00:00/&quot;+convertSecondsToHMmSs(mp.getDuration() / 1000));\n            }\n        });\n\n        mediaPlayer.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {\n            @Override\n            public void onCompletion(MediaPlayer mp) {\n                chat.ivPlayPause.setImageResource(R.drawable.ic_play);\n                releaseMediaPlayer();\n            }\n        });\n            mediaPlayer.start();\n            update(mediaPlayer, chat, chat.seekBar, context);\n\n        chat.seekBar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {\n            @Override\n            public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {\n\n                if (((Activity) context) != null) {\n                    if (fromUser) {\n                        ((Activity) context).runOnUiThread(new Runnable() {\n                            @Override\n                            public void run() {\n                                if (mediaPlayer != null) {\n                                    mediaPlayer.seekTo(progress);\n                                    Log.i(&quot;TAG&quot;, &quot;run: &quot; + progress);\n                                }\n                            }\n                        });\n\n                    }\n                }\n            }\n\n            @Override\n            public void onStartTrackingTouch(SeekBar seekBar) {\n\n                    if (((Activity)context)  != null) {\n                        ((Activity) context).runOnUiThread(new Runnable() {\n                            @Override\n                            public void run() {\n//                                chat.ivPlayPause.setVisibility(View.GONE);\n//                                chat.imgPause.setVisibility(View.VISIBLE);\n                            }\n                        });\n                    }\n\n            }\n\n            @Override\n            public void onStopTrackingTouch(SeekBar seekBar) {\n                if (mediaPlayer != null) {\n                if (((Activity)context)  != null) {\n                    ((Activity) context).runOnUiThread(new Runnable() {\n                        @Override\n                        public void run() {\n//                            chat.ivPlayPause.setVisibility(View.GONE);\n//                            chat.imgPause.setVisibility(View.VISIBLE);\n                            try {\n                                mediaPlayer.start();\n                            } catch (Exception e) {\n                                e.printStackTrace();\n                            }\n                        }\n                    });\n                }\n                }\n            }\n        });\n        }\n    private void update(MediaPlayer mediaPlayer, ChatLeftViewHolder chat, SeekBar seekBar, Context context) {\n\n        if (mediaPlayer.getDuration() - mediaPlayer.getCurrentPosition() &gt; 100) {\n            chat.txtProcess.setText(convertSecondsToHMmSs(mediaPlayer.getCurrentPosition() / 1000) + &quot; / &quot; + convertSecondsToHMmSs(this.mediaPlayer.getDuration() / 1000));\n//            seekBar.setProgress(mediaPlayer.getCurrentPosition());\n            onItemClickListener.seekBarProgressValue(playingPosition,mediaPlayer.getCurrentPosition());\n\n        }else {\n            chat.txtProcess.setText(convertSecondsToHMmSs(mediaPlayer.getDuration() / 1000));\n//            seekBar.setProgress(mediaPlayer.getCurrentPosition());\n        }\n        Handler handler = new Handler();\n\n        try{\n            Runnable runnable = new Runnable() {\n                @Override\n                public void run() {\n                    try{\n                        if (ChatContentAdapter.this.mediaPlayer.getCurrentPosition() &gt; -1) {\n                            try {\n                                update(mediaPlayer,chat, seekBar, context);\n                            } catch (Exception e) {\n                                e.printStackTrace();\n                            }\n                        }\n                    }catch (Exception e){\n                        e.printStackTrace();\n                    }\n\n                }\n            };\n            handler.postDelayed(runnable, 100);\n//            seekBar.postDelayed(runnable,500);\n        }catch (Exception e){\n            e.printStackTrace();\n        }\n    }\n\n\n    private static String convertSecondsToHMmSs(int seconds) {\n        long s = seconds % 60;\n        long m = (seconds / 60) % 60;\n        long h = (seconds / (60 * 60)) % 24;\n        return String.format(&quot;%02d:%02d:%02d&quot;, h,m,s);\n    }\n\n    public void releaseMediaPlayer() {\n//        if (null != baseViewHolder) {\n//            updateNonPlayingView(baseViewHolder);\n//        }\n\n        mediaPlayer.release();\n\n        mediaPlayer = null;\n        playingPosition = -1;\n    }\n\n    public void updateNonPlayingView(BaseViewHolder holder) {\n        holder.ivPlayPause.setImageResource(R.drawable.ic_play_arrow);\n        holder.seekBar.setMax(mediaPlayer.getDuration());\n        holder.seekBar.setProgress(mediaPlayer.getCurrentPosition());\n        holder.seekBar.setEnabled(true);\n        if (mediaPlayer.isPlaying()){\n            uiUpdateHandler.sendEmptyMessageDelayed(MSG_UPDATE_SEEK_BAR, 100);\n            holder.ivPlayPause.setVisibility(View.GONE);\n            holder.imgPause.setVisibility(VISIBLE);\n        }else {\n            uiUpdateHandler.removeMessages(MSG_UPDATE_SEEK_BAR);\n            holder.imgPause.setVisibility(View.GONE);\n            holder.ivPlayPause.setVisibility(VISIBLE);\n        }\n    }\n\n     public   void stopPlayer(){\n        if (null != mediaPlayer) {\n            releaseMediaPlayer();\n        }\n\n    }\n\n\n\n\n    @Override\n    public int getItemViewType(int position) {\n        return messageInfoList.get(position).getType().value;\n    }\n\n\n\n\n\n    @Override\n    public int getItemCount() {\n        return messageInfoList.size();\n    }\n\n\n\n    @Override\n    public long getItemId(int position) {\n        return messageInfoList.get(position).hashCode();\n    }\n\n\n\n\n//    @Override\n//    public void onAttachedToRecyclerView(@NonNull RecyclerView recyclerView) {\n//        super.onAttachedToRecyclerView(recyclerView);\n//        recyclerView.smoothScrollToPosition(messageInfoList.size()-1);\n//    }\n\n    public void add(MessageInfo messageInfo) {\n        messageInfoList.add(0,messageInfo);\n    }\n\n\n    public void setPlayPause(int pos){\n        messageInfoList.get(pos).setPlay(false);\n        notifyItemChanged(pos);\n    }\n\n    public void setSeekBar(int playingPosition ,int progressValue){\n        messageInfoList.get(playingPosition).setSeekBarProgressValue(progressValue);\n        notifyItemChanged(playingPosition);\n        Log.i(&quot;TAG&quot;, &quot;setSeekBarAdapter: &quot; + playingPosition + progressValue);\n    }\n\n    public void addMessageToBottom(MessageInfo messageInfo){\n        messageInfoList.add(messageInfo);\n    }\n\n    public void delete(MessageInfo info) {\n        MessageInfo tempInfo = info;\n        for (MessageInfo c : messageInfoList) {\n            if (c.getZIMMessage().getMessageID() == info.getZIMMessage().getMessageID()) {\n                tempInfo = c;\n            }\n        }\n        messageInfoList.remove(tempInfo);\n    }\n\n    public void delete(long messageId) {\n        MessageInfo tempInfo = null;\n        int position = 0;\n        for (int i = 0; i &lt; messageInfoList.size(); i++) {\n            if (messageInfoList.get(i).getZIMMessage().getMessageID() == messageId) {\n                tempInfo = messageInfoList.get(i);\n                position = i;\n                break;\n            }\n        }\n\n        if (tempInfo!=null){\n            messageInfoList.remove(tempInfo);\n            notifyItemRemoved(position);\n        }\n    }\n\n    public void clearInfo() {\n        messageInfoList.clear();\n    }\n\n    public MessageInfo getMessage(int index) {\n        if (messageInfoList != null &amp;&amp; messageInfoList.size() &gt; 0) {\n            return messageInfoList.get(index);\n        }\n        return null;\n    }\n\n    public void set(MessageInfo info){\n        int position = 0;\n        for (int i = 0; i &lt; messageInfoList.size(); i++) {\n            if (messageInfoList.get(i).getZIMMessage().getLocalMessageID() == info.getZIMMessage().getLocalMessageID()) {\n                position = i;\n                break;\n            }\n        }\n        if (position!=0){\n            messageInfoList.set(position,info);\n            notifyItemChanged(position);\n        }\n\n    }\n\n    public void updateMessageWhenDiffSentStatus(MessageInfo info){\n        int position = 0;\n        for (int i = 0; i &lt; messageInfoList.size(); i++) {\n            ZIMMessage oldMessage = messageInfoList.get(i).getZIMMessage();\n            ZIMMessage newMessage = info.getZIMMessage();\n            if (oldMessage.getLocalMessageID() == info.getZIMMessage().getLocalMessageID() &amp;&amp; newMessage.getSentStatus() != oldMessage.getSentStatus()) {\n                position = i;\n                break;\n            }\n        }\n        if (position!=0){\n            messageInfoList.set(position,info);\n            notifyItemChanged(position);\n        }\n    }\n\n    public List&lt;MessageInfo&gt; getMessageInfoList(){\n        return messageInfoList;\n    }\n\n    public void setMemberList(List&lt;ZIMGroupMemberInfo&gt; memberList){\n        this.memberList = memberList;\n        notifyDataSetChanged();\n\n    }\n\n    public void setDetailsPost(GetRequestWithEditPostGetDetailsModel.Data data, int postPos) {\n        this.postData = data;\n        notifyItemChanged(postPos);\n    }\n\n    @Override\n    public boolean handleMessage(@NonNull Message msg ) {\n\n        switch (msg.what) {\n            case MSG_UPDATE_SEEK_BAR: {\n                baseViewHolder.seekBar.setProgress(mediaPlayer.getCurrentPosition());\n                uiUpdateHandler.sendEmptyMessageDelayed(MSG_UPDATE_SEEK_BAR, 100);\n                return true;\n            }\n        }\n        return false;\n    }\n}\n</code></pre>\n<p>After scrolling the Recycler the position of seekbar thumb set to end.</p>\n"},{"tags":["java","spring","spring-boot","dependency-injection","lombok"],"comments":[{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1667728359,"post_id":74334609,"comment_id":131231740,"body_markdown":"When you use `@Bean`, you should also pass the required beans like \n`publ...authenticationJwtTokenFilter(JwtUtils j, UserService(Impl) us) { // ... use&#39;m in constructor: ...\n    return new AuthTokenFilter(j, us);\n}`","body":"When you use <code>@Bean</code>, you should also pass the required beans like  <code>publ...authenticationJwtTokenFilter(JwtUtils j, UserService(Impl) us) { &#47;&#47; ... use&#39;m in constructor: ...     return new AuthTokenFilter(j, us); }</code>"},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1667728519,"post_id":74334609,"comment_id":131231760,"body_markdown":"Good point, then the cleanest way is using `@Autowired`? Or is there a better solution for that?","body":"Good point, then the cleanest way is using <code>@Autowired</code>? Or is there a better solution for that?"}],"answers":[{"comments":[{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1667728333,"post_id":74334636,"comment_id":131231735,"body_markdown":"I also tried to remove that bean, but it causes another problems. So, could you download the github code and try by adding lombok dependency?","body":"I also tried to remove that bean, but it causes another problems. So, could you download the github code and try by adding lombok dependency?"},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1667728434,"post_id":74334636,"comment_id":131231751,"body_markdown":"**By the way**, should I use `@RequiredArgsConstructor` instead of `@AllArgsConstructor` as the fields are marked `final` ? Any idea for that?","body":"<b>By the way</b>, should I use <code>@RequiredArgsConstructor</code> instead of <code>@AllArgsConstructor</code> as the fields are marked <code>final</code> ? Any idea for that?"},{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":0,"creation_date":1667729218,"post_id":74334636,"comment_id":131231869,"body_markdown":"@Rosa The difference between [AllArgsConstructor](https://projectlombok.org/api/lombok/AllArgsConstructor) and [RequiredArgsConstructor](https://projectlombok.org/api/lombok/RequiredArgsConstructor) is explained in the docs. Yes, i mean remove the entire `@Bean` method. No, i can&#39;t download the project, it goes way beyond the scope of the current question. You can use the example code above, it compiles, `AuthTokenFilter` is now spring component and you can **autowire** it wherever it&#39;s needed. As a rule of thumb, if something is a spring component, autowire it, don&#39;t create new instances.","body":"@Rosa The difference between <a href=\"https://projectlombok.org/api/lombok/AllArgsConstructor\" rel=\"nofollow noreferrer\">AllArgsConstructor</a> and <a href=\"https://projectlombok.org/api/lombok/RequiredArgsConstructor\" rel=\"nofollow noreferrer\">RequiredArgsConstructor</a> is explained in the docs. Yes, i mean remove the entire <code>@Bean</code> method. No, i can&#39;t download the project, it goes way beyond the scope of the current question. You can use the example code above, it compiles, <code>AuthTokenFilter</code> is now spring component and you can <b>autowire</b> it wherever it&#39;s needed. As a rule of thumb, if something is a spring component, autowire it, don&#39;t create new instances."},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1667731030,"post_id":74334636,"comment_id":131232183,"body_markdown":"Thanks for your helps, voted up. But cannot solved the problem :(","body":"Thanks for your helps, voted up. But cannot solved the problem :("}],"tags":[],"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1667728506,"creation_date":1667727086,"answer_id":74334636,"question_id":74334609,"body_markdown":"Just use constructor injection. If your bean has exactly one constructor, spring will behave as if it has `@Autowired`, even if it&#39;s not added explicitly.\r\n```\r\n@AllArgsConstructor\r\n@Component\r\npublic class AuthTokenFilter extends OncePerRequestFilter {\r\n\r\n    private final JwtUtils jwtUtils;\r\n    private final UserDetailsServiceImpl userDetailsService;\r\n\r\n    private static final Logger logger = LoggerFactory.getLogger(AuthTokenFilter.class);\r\n\r\n    @Override\r\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\r\n            throws ServletException, IOException {\r\n        //method implementation\r\n    }\r\n}\r\n```\r\n**Edit:** Add `@Component` on the class, spring will initialize the bean for you, no need to do it manually with `@Bean` (remove the entire method).","title":"Cannot get rid of @Autowired by using @RequiredArgsConstructor or @AllArgsConstructor","body":"<p>Just use constructor injection. If your bean has exactly one constructor, spring will behave as if it has <code>@Autowired</code>, even if it's not added explicitly.</p>\n<pre><code>@AllArgsConstructor\n@Component\npublic class AuthTokenFilter extends OncePerRequestFilter {\n\n    private final JwtUtils jwtUtils;\n    private final UserDetailsServiceImpl userDetailsService;\n\n    private static final Logger logger = LoggerFactory.getLogger(AuthTokenFilter.class);\n\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\n            throws ServletException, IOException {\n        //method implementation\n    }\n}\n</code></pre>\n<p><strong>Edit:</strong> Add <code>@Component</code> on the class, spring will initialize the bean for you, no need to do it manually with <code>@Bean</code> (remove the entire method).</p>\n"},{"tags":[],"owner":{"account_id":2304856,"reputation":1,"user_id":2024310,"display_name":"Sandeep Kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692860113,"creation_date":1692371379,"answer_id":76930570,"question_id":74334609,"body_markdown":"Starting with Spring version 4.3, the single bean constructor does not need to be annotated with the @Autowired annotation.\r\nWith Lombok, it&#39;s possible to generate a constructor for either all class&#39;s fields (with `@AllArgsConstructor`) or all final class&#39;s fields (with `@RequiredArgsConstructor`). ","title":"Cannot get rid of @Autowired by using @RequiredArgsConstructor or @AllArgsConstructor","body":"<p>Starting with Spring version 4.3, the single bean constructor does not need to be annotated with the @Autowired annotation.\nWith Lombok, it's possible to generate a constructor for either all class's fields (with <code>@AllArgsConstructor</code>) or all final class's fields (with <code>@RequiredArgsConstructor</code>).</p>\n"}],"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1018,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1692860113,"creation_date":1667726764,"question_id":74334609,"body_markdown":"I have the following code:\r\n\r\n```\r\n// @RequiredArgsConstructor\r\n// @AllArgsConstructor\r\n@NoArgsConstructor\r\npublic class AuthTokenFilter extends OncePerRequestFilter {\r\n\r\n    @Autowired\r\n    private final JwtUtils jwtUtils;\r\n    // private final JwtUtils jwtUtils;\r\n\r\n    @Autowired\r\n    private UserDetailsServiceImpl userDetailsService;\r\n    // private final UserDetailsServiceImpl userDetailsService;\r\n\r\n    private static final Logger logger = LoggerFactory.getLogger(AuthTokenFilter.class);\r\n\r\n    @Override\r\n    protected void doFilterInternal(HttpServletRequest request, \r\n        HttpServletResponse response, FilterChain filterChain)\r\n            throws ServletException, IOException {\r\n        try {\r\n            String jwt = parseJwt(request);\r\n            if (jwt != null &amp;&amp; jwtUtils.validateJwtToken(jwt)) {\r\n                String username = jwtUtils.getUserNameFromJwtToken(jwt);\r\n\r\n                UserDetails userDetails = userDetailsService.loadUserByUsername(username);\r\n                UsernamePasswordAuthenticationToken authentication =\r\n                        new UsernamePasswordAuthenticationToken(\r\n                                userDetails,\r\n                                null,\r\n                                userDetails.getAuthorities());\r\n                authentication.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\r\n\r\n                SecurityContextHolder.getContext().setAuthentication(authentication);\r\n            }\r\n        } catch (Exception e) {\r\n            logger.error(&quot;Cannot set user authentication: {}&quot;, e);\r\n        }\r\n\r\n        filterChain.doFilter(request, response);\r\n    }\r\n\r\n    private String parseJwt(HttpServletRequest request) {\r\n        String headerAuth = request.getHeader(&quot;Authorization&quot;);\r\n\r\n        if (StringUtils.hasText(headerAuth) &amp;&amp; headerAuth.startsWith(&quot;Bearer &quot;)) {\r\n            return headerAuth.substring(7, headerAuth.length());\r\n        }\r\n\r\n        return null;\r\n    }\r\n}\r\n```\r\n\r\nI am trying to get rid of `@Autowired` by using `@RequiredArgsConstructor` or `@AllArgsConstructor` as commented in the code. However, as the final fields may not been initialized, I get error indicating this problem. For that, I may also set `jwtUtils` and `userDetailsService` as null, but I am not sure if it is a good idea. So, can I use a constructor annotation (lombok) to get rid of `@Autowired` in this example?\r\n\r\n\r\n**Update:** When using the suggested approach, I get error in this bean in other class:\r\n\r\n```\r\n@Bean\r\npublic AuthTokenFilter authenticationJwtTokenFilter() {\r\n    return new AuthTokenFilter();\r\n}\r\n```\r\n\r\n**Expected 2 arguments but found 0** error","title":"Cannot get rid of @Autowired by using @RequiredArgsConstructor or @AllArgsConstructor","body":"<p>I have the following code:</p>\n<pre><code>// @RequiredArgsConstructor\n// @AllArgsConstructor\n@NoArgsConstructor\npublic class AuthTokenFilter extends OncePerRequestFilter {\n\n    @Autowired\n    private final JwtUtils jwtUtils;\n    // private final JwtUtils jwtUtils;\n\n    @Autowired\n    private UserDetailsServiceImpl userDetailsService;\n    // private final UserDetailsServiceImpl userDetailsService;\n\n    private static final Logger logger = LoggerFactory.getLogger(AuthTokenFilter.class);\n\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, \n        HttpServletResponse response, FilterChain filterChain)\n            throws ServletException, IOException {\n        try {\n            String jwt = parseJwt(request);\n            if (jwt != null &amp;&amp; jwtUtils.validateJwtToken(jwt)) {\n                String username = jwtUtils.getUserNameFromJwtToken(jwt);\n\n                UserDetails userDetails = userDetailsService.loadUserByUsername(username);\n                UsernamePasswordAuthenticationToken authentication =\n                        new UsernamePasswordAuthenticationToken(\n                                userDetails,\n                                null,\n                                userDetails.getAuthorities());\n                authentication.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\n\n                SecurityContextHolder.getContext().setAuthentication(authentication);\n            }\n        } catch (Exception e) {\n            logger.error(&quot;Cannot set user authentication: {}&quot;, e);\n        }\n\n        filterChain.doFilter(request, response);\n    }\n\n    private String parseJwt(HttpServletRequest request) {\n        String headerAuth = request.getHeader(&quot;Authorization&quot;);\n\n        if (StringUtils.hasText(headerAuth) &amp;&amp; headerAuth.startsWith(&quot;Bearer &quot;)) {\n            return headerAuth.substring(7, headerAuth.length());\n        }\n\n        return null;\n    }\n}\n</code></pre>\n<p>I am trying to get rid of <code>@Autowired</code> by using <code>@RequiredArgsConstructor</code> or <code>@AllArgsConstructor</code> as commented in the code. However, as the final fields may not been initialized, I get error indicating this problem. For that, I may also set <code>jwtUtils</code> and <code>userDetailsService</code> as null, but I am not sure if it is a good idea. So, can I use a constructor annotation (lombok) to get rid of <code>@Autowired</code> in this example?</p>\n<p><strong>Update:</strong> When using the suggested approach, I get error in this bean in other class:</p>\n<pre><code>@Bean\npublic AuthTokenFilter authenticationJwtTokenFilter() {\n    return new AuthTokenFilter();\n}\n</code></pre>\n<p><strong>Expected 2 arguments but found 0</strong> error</p>\n"},{"tags":["java","windows","selenium","appium","appium-android"],"answers":[{"comments":[{"owner":{"account_id":8033114,"reputation":13,"user_id":6057277,"display_name":"Rahul Sharma"},"score":0,"creation_date":1596037854,"post_id":63153038,"comment_id":111683326,"body_markdown":"I have downloaded new java jdk and set env path in JAVA_HOME and PATH , but still i am getting the same error","body":"I have downloaded new java jdk and set env path in JAVA_HOME and PATH , but still i am getting the same error"},{"owner":{"account_id":5118808,"reputation":3538,"user_id":4103101,"display_name":"dmle"},"score":0,"creation_date":1596037951,"post_id":63153038,"comment_id":111683379,"body_markdown":"can you confirm that path is the one you got in error? C:\\Windows\\system32\\&quot;C:\\Program Files\\Java\\jdk-12&quot;\\bin\\java.exe","body":"can you confirm that path is the one you got in error? C:\\Windows\\system32\\&quot;C:\\Program Files\\Java\\jdk-12&quot;\\bin\\java.exe"}],"tags":[],"owner":{"account_id":5118808,"reputation":3538,"user_id":4103101,"display_name":"dmle"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1596023668,"creation_date":1596023668,"answer_id":63153038,"question_id":63140710,"body_markdown":"Check the original error in your logs:\r\n```\r\nOriginal error Command &#39;C:\\Windows\\system32\\&quot;C:\\Program Files\\Java\\jdk-12&quot;\\bin\\java.exe&#39; not found. Is it installed?\r\n```\r\n\r\nMake sure you set [env variables][1] for Java\r\n\r\n\r\n  [1]: https://confluence.atlassian.com/conf59/setting-the-java_home-variable-in-windows-792499849.html","title":"Not able to run basic program on appium","body":"<p>Check the original error in your logs:</p>\n<pre><code>Original error Command 'C:\\Windows\\system32\\&quot;C:\\Program Files\\Java\\jdk-12&quot;\\bin\\java.exe' not found. Is it installed?\n</code></pre>\n<p>Make sure you set <a href=\"https://confluence.atlassian.com/conf59/setting-the-java_home-variable-in-windows-792499849.html\" rel=\"nofollow noreferrer\">env variables</a> for Java</p>\n"},{"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":1,"creation_date":1692981737,"post_id":76966761,"comment_id":135704035,"body_markdown":"Code-only answers are discouraged. Perhaps you can explain how your code fixes the error in the code in the question?","body":"Code-only answers are discouraged. Perhaps you can explain how your code fixes the error in the code in the question?"}],"tags":[],"owner":{"account_id":29288150,"reputation":1,"user_id":22439220,"display_name":"Siri Chandana"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692859173,"creation_date":1692859173,"answer_id":76966761,"question_id":63140710,"body_markdown":"    \tpackage SirichandanaAcademy.Appium;\r\n\t\r\n\timport java.io.IOException;\r\n\t//import java.net.MalformedURLException;\r\n\timport java.net.URL;\r\n\timport io.appium.java_client.AppiumDriver;\r\n\timport io.appium.java_client.android.*;\r\n\timport org.openqa.selenium.remote.DesiredCapabilities;\r\n\timport org.testng.annotations.Test;\r\n\timport io.appium.java_client.android.AndroidDriver;\r\n\timport io.appium.java_client.android.options.UiAutomator2Options;\r\n\timport org.openqa.selenium.By;\r\n\timport org.openqa.selenium.WebDriver;\r\n\timport org.openqa.selenium.remote.CapabilityType;\r\n\timport org.openqa.selenium.remote.DesiredCapabilities;\r\n\timport org.openqa.selenium.support.ui.ExpectedConditions;\r\n\timport org.openqa.selenium.support.ui.WebDriverWait;\r\n\timport org.testng.Assert;\r\n\timport org.testng.annotations.AfterMethod;\r\n\timport org.testng.annotations.BeforeMethod;\r\n\timport org.testng.annotations.Test;\r\n\timport io.appium.java_client.*;\r\n\t\r\n\tpublic class AppiumTest1 {\r\n\t\t\r\n\t\tpublic static void main(String[] args) {\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t        public static void openCalculator(){\r\n\t        //\tpublic AndroidDriver&lt;MobileElement&gt; driver;\r\n\t\t\tDesiredCapabilities cap = new DesiredCapabilities();\r\n\t\t\tcap.setCapability(&quot;deviceName&quot;,&quot;Pixel 2 API UpsideDownCakePrivacySandbox&quot;);\r\n\t\t\tcap.setCapability(&quot;udid&quot;,&quot;emulator-5554&quot;);\r\n\t\t\tcap.setCapability(&quot;platformName&quot;,&quot;Android&quot;);\r\n\t\t\tcap.setCapability(&quot;platformVersion&quot;,&quot;14&quot;);\t\r\n\t\t\tcap.setCapability(&quot;appPackage&quot;, &quot;com.AndroidTest&quot;);\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t@Test\t\r\n\t\tpublic void appiumtest() throws IOException   \r\n\t\t{\r\n\t\t\t//androiddriver\r\n\t\t\t//appium code --&gt; appium server --&gt; mobile\r\n\t\t\tUiAutomator2Options options = new UiAutomator2Options();\r\n\t\t\toptions.setPlatformName(&quot;Android&quot;);\r\n\t\t\toptions.setDeviceName(&quot;Pixel 2 API UpsideDownCakePrivacySandbox&quot;);\r\n\t\t\toptions.setApp(&quot;//Appium//src//test//java//Resources//ApiDemos-debug.apk&quot;);\r\n\t\t\tAndroidDriver driver = new AndroidDriver(new URL(&quot;172.23.210.190:4723&quot;),options);\r\n\t\t\tdriver.getCapabilities();\r\n\t\t\t\r\n\t\t}\r\n\t\r\n\t}\r\n","title":"Not able to run basic program on appium","body":"<pre><code>    package SirichandanaAcademy.Appium;\n\nimport java.io.IOException;\n//import java.net.MalformedURLException;\nimport java.net.URL;\nimport io.appium.java_client.AppiumDriver;\nimport io.appium.java_client.android.*;\nimport org.openqa.selenium.remote.DesiredCapabilities;\nimport org.testng.annotations.Test;\nimport io.appium.java_client.android.AndroidDriver;\nimport io.appium.java_client.android.options.UiAutomator2Options;\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.remote.CapabilityType;\nimport org.openqa.selenium.remote.DesiredCapabilities;\nimport org.openqa.selenium.support.ui.ExpectedConditions;\nimport org.openqa.selenium.support.ui.WebDriverWait;\nimport org.testng.Assert;\nimport org.testng.annotations.AfterMethod;\nimport org.testng.annotations.BeforeMethod;\nimport org.testng.annotations.Test;\nimport io.appium.java_client.*;\n\npublic class AppiumTest1 {\n    \n    public static void main(String[] args) {\n        \n    }\n    \n        public static void openCalculator(){\n        //  public AndroidDriver&lt;MobileElement&gt; driver;\n        DesiredCapabilities cap = new DesiredCapabilities();\n        cap.setCapability(&quot;deviceName&quot;,&quot;Pixel 2 API UpsideDownCakePrivacySandbox&quot;);\n        cap.setCapability(&quot;udid&quot;,&quot;emulator-5554&quot;);\n        cap.setCapability(&quot;platformName&quot;,&quot;Android&quot;);\n        cap.setCapability(&quot;platformVersion&quot;,&quot;14&quot;);  \n        cap.setCapability(&quot;appPackage&quot;, &quot;com.AndroidTest&quot;);\n    }\n    \n    \n@Test   \n    public void appiumtest() throws IOException   \n    {\n        //androiddriver\n        //appium code --&gt; appium server --&gt; mobile\n        UiAutomator2Options options = new UiAutomator2Options();\n        options.setPlatformName(&quot;Android&quot;);\n        options.setDeviceName(&quot;Pixel 2 API UpsideDownCakePrivacySandbox&quot;);\n        options.setApp(&quot;//Appium//src//test//java//Resources//ApiDemos-debug.apk&quot;);\n        AndroidDriver driver = new AndroidDriver(new URL(&quot;172.23.210.190:4723&quot;),options);\n        driver.getCapabilities();\n        \n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":8033114,"reputation":13,"user_id":6057277,"display_name":"Rahul Sharma"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2060,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1692859173,"creation_date":1595961373,"question_id":63140710,"body_markdown":"   \r\n\r\n     package first;\r\n    \r\n    import java.io.File;\r\n    import java.net.MalformedURLException;\r\n    import java.net.URL;\r\n    \r\n    import org.openqa.selenium.remote.DesiredCapabilities;\r\n    \r\n    import io.appium.java_client.android.AndroidDriver;\r\n    import io.appium.java_client.android.AndroidElement;\r\n    import io.appium.java_client.remote.MobileCapabilityType;\r\n    \r\n    public class auto1 {\r\n    \r\n    \tpublic static void main(String[] args) throws MalformedURLException {\r\n    \t\t// TODO Auto-generated method stub\r\n    \t\tFile f = new File(&quot;src&quot;);\r\n    \t\tFile fs = new File(f,&quot;DemoAndroid.apk&quot;);\r\n    \t\t\r\n    \t\tDesiredCapabilities cap = new DesiredCapabilities();\r\n    \t\tcap.setCapability(MobileCapabilityType.DEVICE_NAME,&quot;rahulemulator&quot;);\r\n    \t\tcap.setCapability(MobileCapabilityType.APP, fs.getAbsolutePath());\r\n    \t\tAndroidDriver&lt;AndroidElement&gt; ad = new AndroidDriver&lt;&gt;(new URL(&quot;http://127.0.0.1:4723/wd/hub&quot;),cap);\r\n    \r\n    \t}\r\n\r\n}\r\n\r\n=====================\r\n**Error**\r\n-----------------------\r\n\r\n    Exception in thread &quot;main&quot; org.openqa.selenium.SessionNotCreatedException: Unable to create a new remote session. Please check the server log for more details. Original error: An unknown server-side error occurred while processing the command. Original error: Could not sign with default certificate. Original error Command &#39;C:\\Windows\\system32\\&quot;C:\\Program Files\\Java\\jdk-12&quot;\\bin\\java.exe&#39; not found. Is it installed?\r\n    Build info: version: &#39;3.141.59&#39;, revision: &#39;e82be7d358&#39;, time: &#39;2018-11-14T08:25:48&#39;\r\n    System info: host: &#39;DESKTOP-JIA4NSC&#39;, ip: &#39;192.168.1.6&#39;, os.name: &#39;Windows 10&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;10.0&#39;, java.version: &#39;1.8.0_241&#39;\r\n    Driver info: driver.version: AndroidDriver\r\n    remote stacktrace: UnknownError: An unknown server-side error occurred while processing the command. Original error: Could not sign with default certificate. Original error Command &#39;C:\\Windows\\system32\\&quot;C:\\Program Files\\Java\\jdk-12&quot;\\bin\\java.exe&#39; not found. Is it installed?\r\n        at getResponseForW3CError (C:\\Users\\Akanksha Agarwal\\AppData\\Roaming\\npm\\node_modules\\appium\\node_modules\\appium-base-driver\\lib\\protocol\\errors.js:804:9)\r\n        at asyncHandler (C:\\Users\\Akanksha Agarwal\\AppData\\Roaming\\npm\\node_modules\\appium\\node_modules\\appium-base-driver\\lib\\protocol\\protocol.js:392:37)\r\n    Build info: version: &#39;3.141.59&#39;, revision: &#39;e82be7d358&#39;, time: &#39;2018-11-14T08:25:48&#39;\r\n    System info: host: &#39;DESKTOP-JIA4NSC&#39;, ip: &#39;192.168.1.6&#39;, os.name: &#39;Windows 10&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;10.0&#39;, java.version: &#39;1.8.0_241&#39;\r\n    Driver info: driver.version: AndroidDriver\r\n    \tat io.appium.java_client.remote.AppiumCommandExecutor$1.createSession(AppiumCommandExecutor.java:208)\r\n    \tat io.appium.java_client.remote.AppiumCommandExecutor.createSession(AppiumCommandExecutor.java:217)\r\n    \tat io.appium.java_client.remote.AppiumCommandExecutor.execute(AppiumCommandExecutor.java:239)\r\n    \tat org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:552)\r\n    \tat io.appium.java_client.DefaultGenericMobileDriver.execute(DefaultGenericMobileDriver.java:41)\r\n    \tat io.appium.java_client.AppiumDriver.execute(AppiumDriver.java:1)\r\n    \tat io.appium.java_client.android.AndroidDriver.execute(AndroidDriver.java:1)\r\n    \tat org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:213)\r\n    \tat io.appium.java_client.AppiumDriver.startSession(AppiumDriver.java:336)\r\n    \tat org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:131)\r\n    \tat io.appium.java_client.DefaultGenericMobileDriver.&lt;init&gt;(DefaultGenericMobileDriver.java:37)\r\n    \tat io.appium.java_client.AppiumDriver.&lt;init&gt;(AppiumDriver.java:88)\r\n    \tat io.appium.java_client.AppiumDriver.&lt;init&gt;(AppiumDriver.java:98)\r\n    \tat io.appium.java_client.android.AndroidDriver.&lt;init&gt;(AndroidDriver.java:94)\r\n    \tat first.auto1.main(auto1.java:23)\r\n    Caused by: java.lang.reflect.InvocationTargetException\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n    \tat java.lang.reflect.Method.invoke(Unknown Source)\r\n    \tat io.appium.java_client.remote.AppiumCommandExecutor$1.createSession(AppiumCommandExecutor.java:186)\r\n    \t... 14 more\r\n    Caused by: org.openqa.selenium.WebDriverException: An unknown server-side error occurred while processing the command. Original error: Could not sign with default certificate. Original error Command &#39;C:\\Windows\\system32\\&quot;C:\\Program Files\\Java\\jdk-12&quot;\\bin\\java.exe&#39; not found. Is it installed?\r\n    Build info: version: &#39;3.141.59&#39;, revision: &#39;e82be7d358&#39;, time: &#39;2018-11-14T08:25:48&#39;\r\n    System info: host: &#39;DESKTOP-JIA4NSC&#39;, ip: &#39;192.168.1.6&#39;, os.name: &#39;Windows 10&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;10.0&#39;, java.version: &#39;1.8.0_241&#39;\r\n    Driver info: driver.version: AndroidDriver\r\n    remote stacktrace: UnknownError: An unknown server-side error occurred while processing the command. Original error: Could not sign with default certificate. Original error Command &#39;C:\\Windows\\system32\\&quot;C:\\Program Files\\Java\\jdk-12&quot;\\bin\\java.exe&#39; not found. Is it installed?\r\n        at getResponseForW3CError (C:\\Users\\Akanksha Agarwal\\AppData\\Roaming\\npm\\node_modules\\appium\\node_modules\\appium-base-driver\\lib\\protocol\\errors.js:804:9)\r\n        at asyncHandler (C:\\Users\\Akanksha Agarwal\\AppData\\Roaming\\npm\\node_modules\\appium\\node_modules\\appium-base-driver\\lib\\protocol\\protocol.js:392:37)\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)\r\n    \tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)\r\n    \tat java.lang.reflect.Constructor.newInstance(Unknown Source)\r\n    \tat org.openqa.selenium.remote.W3CHandshakeResponse.lambda$errorHandler$0(W3CHandshakeResponse.java:62)\r\n    \tat org.openqa.selenium.remote.HandshakeResponse.lambda$getResponseFunction$0(HandshakeResponse.java:30)\r\n    \tat org.openqa.selenium.remote.ProtocolHandshake.lambda$createSession$0(ProtocolHandshake.java:126)\r\n    \tat java.util.stream.ReferencePipeline$3$1.accept(Unknown Source)\r\n    \tat java.util.Spliterators$ArraySpliterator.tryAdvance(Unknown Source)\r\n    \tat java.util.stream.ReferencePipeline.forEachWithCancel(Unknown Source)\r\n    \tat java.util.stream.AbstractPipeline.copyIntoWithCancel(Unknown Source)\r\n    \tat java.util.stream.AbstractPipeline.copyInto(Unknown Source)\r\n    \tat java.util.stream.AbstractPipeline.wrapAndCopyInto(Unknown Source)\r\n    \tat java.util.stream.FindOps$FindOp.evaluateSequential(Unknown Source)\r\n    \tat java.util.stream.AbstractPipeline.evaluate(Unknown Source)\r\n    \tat java.util.stream.ReferencePipeline.findFirst(Unknown Source)\r\n    \tat org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:128)\r\n    \t... 19 more\r\n\r\n=======================\r\n\r\n\r\nAppium is also running  \r\n\r\ni tried with command appium --avd rahulandroid\r\nVirtual device is also running \r\ni also tried running appium on adminstrator \r\n\r\n\r\nlogs \r\n\r\n\r\n============\r\n\r\n\r\n \r\n\r\n    POST /wd/hub/session\r\n    [HTTP] {&quot;desiredCapabilities&quot;:{&quot;app&quot;:&quot;C:\\\\Users\\\\Akanksha Agarwal\\\\eclipse-workspace\\\\first\\\\src\\\\Spectra(Android).apk&quot;,&quot;platformName&quot;:&quot;Android&quot;,&quot;deviceName&quot;:&quot;rahulemulator&quot;},&quot;capabilities&quot;:{&quot;firstMatch&quot;:[{&quot;appium:app&quot;:&quot;C:\\\\Users\\\\Akanksha Agarwal\\\\eclipse-workspace\\\\first\\\\src\\\\Spectra(Android).apk&quot;,&quot;appium:deviceName&quot;:&quot;rahulemulator&quot;,&quot;platformName&quot;:&quot;android&quot;}]}}\r\n    [debug] [W3C] Calling AppiumDriver.createSession() with args: [{&quot;app&quot;:&quot;C:\\\\Users\\\\Akanksha Agarwal\\\\eclipse-workspace\\\\first\\\\src\\\\Spectra(Android).apk&quot;,&quot;platformName&quot;:&quot;Android&quot;,&quot;deviceName&quot;:&quot;rahulemulator&quot;},null,{&quot;firstMatch&quot;:[{&quot;appium:app&quot;:&quot;C:\\\\Users\\\\Akanksha Agarwal\\\\eclipse-workspace\\\\first\\\\src\\\\Spectra(Android).apk&quot;,&quot;appium:deviceName&quot;:&quot;rahulemulator&quot;,&quot;platformName&quot;:&quot;android&quot;}]}]\r\n    [debug] [BaseDriver] Event &#39;newSessionRequested&#39; logged at 1595960147399 (23:45:47 GMT+0530 (India Standard Time))\r\n    [BaseDriver] The following capabilities are not standard capabilities and should have an extension prefix:\r\n    [BaseDriver]   avd\r\n    [Appium]\r\n    [Appium] ======================================================================\r\n    [Appium]   DEPRECATION WARNING:\r\n    [Appium]\r\n    [Appium]   The &#39;automationName&#39; capability was not provided in the desired\r\n    [Appium]   capabilities for this Android session\r\n    [Appium]\r\n    [Appium]   Setting &#39;automationName=UiAutomator2&#39; by default and using the\r\n    [Appium]   UiAutomator2 Driver\r\n    [Appium]\r\n    [Appium]   The next major version of Appium (2.x) will **require** the\r\n    [Appium]   &#39;automationName&#39; capability to be set for all sessions on all\r\n    [Appium]   platforms\r\n    [Appium]\r\n    [Appium]   In previous versions (Appium &lt;= 1.13.x), the default was\r\n    [Appium]   &#39;automationName=UiAutomator1&#39;\r\n    [Appium]\r\n    [Appium]   If you wish to use that automation instead of UiAutomator2, please\r\n    [Appium]   add &#39;automationName=UiAutomator1&#39; to your desired capabilities\r\n    [Appium]\r\n    [Appium]   For more information about drivers, please visit\r\n    [Appium]   http://appium.io/docs/en/about-appium/intro/ and explore the\r\n    [Appium]   &#39;Drivers&#39; menu\r\n    [Appium]\r\n    [Appium] ======================================================================\r\n    [Appium]\r\n    [Appium] Appium v1.17.1 creating new AndroidUiautomator2Driver (v1.44.2) session\r\n    [debug] [BaseDriver] W3C capabilities and MJSONWP desired capabilities were provided\r\n    [debug] [BaseDriver] Creating session with W3C capabilities: {\r\n    [debug] [BaseDriver]   &quot;alwaysMatch&quot;: {\r\n    [debug] [BaseDriver]     &quot;platformName&quot;: &quot;android&quot;,\r\n    [debug] [BaseDriver]     &quot;appium:avd&quot;: &quot;rahulandroid&quot;,\r\n    [debug] [BaseDriver]     &quot;appium:app&quot;: &quot;C:\\\\Users\\\\Akanksha Agarwal\\\\eclipse-workspace\\\\first\\\\src\\\\Spectra(Android).apk&quot;,\r\n    [debug] [BaseDriver]     &quot;appium:deviceName&quot;: &quot;rahulemulator&quot;\r\n    [debug] [BaseDriver]   },\r\n    [debug] [BaseDriver]   &quot;firstMatch&quot;: [\r\n    [debug] [BaseDriver]     {}\r\n    [debug] [BaseDriver]   ]\r\n    [debug] [BaseDriver] }\r\n    [BaseDriver] Session created with session id: f540c68d-7e46-4e97-bc3d-0f419c9853df\r\n    [BaseDriver] Using local app &#39;C:\\Users\\Akanksha Agarwal\\eclipse-workspace\\first\\src\\Spectra(Android).apk&#39;\r\n    [debug] [UiAutomator2] Checking whether app is actually present\r\n    [ADB] Found 1 &#39;build-tools&#39; folders under &#39;C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk&#39; (newest first):\r\n    [ADB]     C:/Users/Akanksha Agarwal/AppData/Local/Android/Sdk/build-tools/30.0.0\r\n    [ADB] Using &#39;adb.exe&#39; from &#39;C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe&#39;\r\n    [debug] [ADB] Trying to find &#39;rahulandroid&#39; emulator\r\n    [debug] [ADB] Getting connected emulators\r\n    [debug] [ADB] Getting connected devices...\r\n    [debug] [ADB] Connected devices: [{&quot;udid&quot;:&quot;emulator-5556&quot;,&quot;state&quot;:&quot;device&quot;}]\r\n    [debug] [ADB] 1 emulator(s) connected\r\n    [debug] [ADB] Sending telnet command to device: avd name\r\n    [debug] [ADB] Getting running emulator port\r\n    [debug] [ADB] Socket connection to device created\r\n    [debug] [ADB] Socket connection to device ready\r\n    [debug] [ADB] Telnet command got response: rahulandroid\r\n    [debug] [ADB] Found emulator &#39;rahulandroid&#39; on port 5556\r\n    [debug] [ADB] Setting device id to emulator-5556\r\n    [debug] [AndroidDriver] Not launching AVD because it is already running.\r\n    [AndroidDriver] Using device: emulator-5556\r\n    [ADB] Using &#39;adb.exe&#39; from &#39;C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe&#39;\r\n    [debug] [ADB] Setting device id to emulator-5556\r\n    [debug] [ADB] Running &#39;C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell getprop ro.build.version.sdk&#39;\r\n    [debug] [ADB] Current device property &#39;ro.build.version.sdk&#39;: 28\r\n    [ADB] Getting device platform version\r\n    [debug] [ADB] Running &#39;C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell getprop ro.build.version.release&#39;\r\n    [debug] [ADB] Current device property &#39;ro.build.version.release&#39;: 9\r\n    [debug] [ADB] Device API level: 28\r\n    [UiAutomator2] Relaxing hidden api policy\r\n    [debug] [ADB] Running &#39;C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell settings put global hidden_api_policy_pre_p_apps 1&#39;\r\n    [debug] [ADB] Running &#39;C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell settings put global hidden_api_policy_p_apps 1&#39;\r\n    [debug] [ADB] Running &#39;C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell settings put global hidden_api_policy 1&#39;\r\n    [debug] [AndroidDriver] Parsing package and activity from app manifest\r\n    [ADB] Package name: &#39;com.spectra.consumer&#39;\r\n    [ADB] Main activity name: &#39;com.spectra.consumer.Activities.SplashActivity&#39;\r\n    [debug] [AndroidDriver] Parsed package and activity are: com.spectra.consumer/com.spectra.consumer.Activities.SplashActivity\r\n    [debug] [ADB] Running &#39;C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 wait-for-device&#39;\r\n    [debug] [ADB] Running &#39;C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell echo ping&#39;\r\n    [debug] [AndroidDriver] Pushing settings apk to device...\r\n    [debug] [ADB] Getting install status for io.appium.settings\r\n    [debug] [ADB] Running &#39;C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell dumpsys package io.appium.settings&#39;\r\n    [debug] [ADB] &#39;io.appium.settings&#39; is installed\r\n    [debug] [ADB] Getting package info for &#39;io.appium.settings&#39;\r\n    [debug] [ADB] Running &#39;C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell dumpsys package io.appium.settings&#39;\r\n    [debug] [ADB] The version name of the installed &#39;io.appium.settings&#39; is greater or equal to the application version name (&#39;3.1.0&#39; &gt;= &#39;3.1.0&#39;)\r\n    [debug] [ADB] There is no need to install/upgrade &#39;C:\\Users\\Akanksha Agarwal\\AppData\\Roaming\\npm\\node_modules\\appium\\node_modules\\io.appium.settings\\apks\\settings_apk-debug.apk&#39;\r\n    [debug] [ADB] Getting IDs of all &#39;io.appium.settings&#39; processes\r\n    [debug] [ADB] Running &#39;C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell &#39;pgrep --help; echo $?&#39;&#39;\r\n    [debug] [ADB] Running &#39;C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell pgrep -f io\\\\.appium\\\\.settings&#39;\r\n    [debug] [AndroidDriver] io.appium.settings is already running. There is no need to reset its permissions.\r\n    [debug] [Logcat] Starting logcat capture\r\n    [debug] [UiAutomator2] Forwarding UiAutomator2 Server port 6790 to 8200\r\n    [debug] [ADB] Forwarding system: 8200 to device: 6790\r\n    [debug] [ADB] Running &#39;C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 forward tcp\\:8200 tcp\\:6790&#39;\r\n    [debug] [ADB] Getting install status for io.appium.uiautomator2.server\r\n    [debug] [ADB] Running &#39;C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell dumpsys package io.appium.uiautomator2.server&#39;\r\n    [debug] [ADB] &#39;io.appium.uiautomator2.server&#39; is not installed\r\n    [debug] [ADB] App &#39;C:\\Users\\Akanksha Agarwal\\AppData\\Roaming\\npm\\node_modules\\appium\\node_modules\\appium-uiautomator2-server\\apks\\appium-uiautomator2-server-v4.5.5.apk&#39; is not installed\r\n    [debug] [UiAutomator2] io.appium.uiautomator2.server installation state: notInstalled\r\n    [debug] [ADB] Checking app cert for C:\\Users\\Akanksha Agarwal\\AppData\\Roaming\\npm\\node_modules\\appium\\node_modules\\appium-uiautomator2-server\\apks\\appium-uiautomator2-server-v4.5.5.apk\r\n    [ADB] Using &#39;apksigner.jar&#39; from &#39;C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\build-tools\\30.0.0\\lib\\apksigner.jar&#39;\r\n    [debug] [ADB] Starting apksigner: &#39;C:\\\\Windows\\\\system32\\\\&quot;C:\\\\Program Files\\\\Java\\\\jdk-12&quot;\\\\bin\\\\java.exe&#39; -Xmx1024M -Xss1m -jar &#39;C:\\\\Users\\\\Akanksha Agarwal\\\\AppData\\\\Local\\\\Android\\\\Sdk\\\\build-tools\\\\30.0.0\\\\lib\\\\apksigner.jar&#39; verify --print-certs &#39;C:\\\\Users\\\\Akanksha Agarwal\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\appium\\\\node_modules\\\\appium-uiautomator2-server\\\\apks\\\\appium-uiautomator2-server-v4.5.5.apk&#39;\r\n    [ADB] Cannot use apksigner tool for signature verification. Original error: Command &#39;C:\\Windows\\system32\\&quot;C:\\Program Files\\Java\\jdk-12&quot;\\bin\\java.exe&#39; not found. Is it installed?\r\n    [debug] [ADB] Defaulting to verify.jar\r\n    [debug] [ADB] &#39;C:\\Users\\Akanksha Agarwal\\AppData\\Roaming\\npm\\node_modules\\appium\\node_modules\\appium-uiautomator2-server\\apks\\appium-uiautomator2-server-v4.5.5.apk&#39; is not signed with the default certificate\r\n    [debug] [ADB] Command &#39;C:\\Windows\\system32\\&quot;C:\\Program Files\\Java\\jdk-12&quot;\\bin\\java.exe&#39; not found. Is it installed?\r\n    [ADB] Using &#39;zipalign.exe&#39; from &#39;C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\build-tools\\30.0.0\\zipalign.exe&#39;\r\n    [debug] [ADB] C:\\Users\\Akanksha Agarwal\\AppData\\Roaming\\npm\\node_modules\\appium\\node_modules\\appium-uiautomator2-server\\apks\\appium-uiautomator2-server-v4.5.5.apk&#39; is already zip-aligned. Doing nothing\r\n    [debug] [ADB] Signing &#39;C:\\Users\\Akanksha Agarwal\\AppData\\Roaming\\npm\\node_modules\\appium\\node_modules\\appium-uiautomator2-server\\apks\\appium-uiautomator2-server-v4.5.5.apk&#39; with default cert\r\n    [debug] [ADB] Starting apksigner: &#39;C:\\\\Windows\\\\system32\\\\&quot;C:\\\\Program Files\\\\Java\\\\jdk-12&quot;\\\\bin\\\\java.exe&#39; -Xmx1024M -Xss1m -jar &#39;C:\\\\Users\\\\Akanksha Agarwal\\\\AppData\\\\Local\\\\Android\\\\Sdk\\\\build-tools\\\\30.0.0\\\\lib\\\\apksigner.jar&#39; sign --key &#39;C:\\\\Users\\\\Akanksha Agarwal\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\appium\\\\node_modules\\\\appium-adb\\\\keys\\\\testkey.pk8&#39; --cert &#39;C:\\\\Users\\\\Akanksha Agarwal\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\appium\\\\node_modules\\\\appium-adb\\\\keys\\\\testkey.x509.pem&#39; &#39;C:\\\\Users\\\\Akanksha Agarwal\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\appium\\\\node_modules\\\\appium-uiautomator2-server\\\\apks\\\\appium-uiautomator2-server-v4.5.5.apk&#39;\r\n    [ADB] Cannot use apksigner tool for signing. Defaulting to sign.jar. Original error: Command &#39;C:\\Windows\\system32\\&quot;C:\\Program Files\\Java\\jdk-12&quot;\\bin\\java.exe&#39; not found. Is it installed?\r\n    [debug] [ADB] Starting sign.jar: &#39;C:\\\\Windows\\\\system32\\\\&quot;C:\\\\Program Files\\\\Java\\\\jdk-12&quot;\\\\bin\\\\java.exe&#39; -jar &#39;C:\\\\Users\\\\Akanksha Agarwal\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\appium\\\\node_modules\\\\appium-adb\\\\jars\\\\sign.jar&#39; &#39;C:\\\\Users\\\\Akanksha Agarwal\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\appium\\\\node_modules\\\\appium-uiautomator2-server\\\\apks\\\\appium-uiautomator2-server-v4.5.5.apk&#39; --override\r\n    [debug] [UiAutomator2] Deleting UiAutomator2 session\r\n    [debug] [UiAutomator2] Deleting UiAutomator2 server session\r\n    [debug] [WD Proxy] Matched &#39;/&#39; to command name &#39;deleteSession&#39;\r\n    [UiAutomator2] Did not get confirmation UiAutomator2 deleteSession worked; Error was: UnknownError: An unknown server-side error occurred while processing the command. Original error: Trying to proxy a session command without session id\r\n    [debug] [ADB] Running &#39;C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell am force-stop com.spectra.consumer&#39;\r\n    [debug] [Logcat] Stopping logcat capture\r\n    [debug] [ADB] Removing forwarded port socket connection: 8200\r\n    [debug] [ADB] Running &#39;C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 forward --remove tcp\\:8200&#39;\r\n    [UiAutomator2] Restoring hidden api policy to the device default configuration\r\n    [debug] [ADB] Running &#39;C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell settings delete global hidden_api_policy_pre_p_apps&#39;\r\n    [debug] [ADB] Running &#39;C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell settings delete global hidden_api_policy_p_apps&#39;\r\n    [debug] [ADB] Running &#39;C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell settings delete global hidden_api_policy&#39;\r\n    [debug] [BaseDriver] Event &#39;newSessionStarted&#39; logged at 1595960150494 (23:45:50 GMT+0530 (India Standard Time))\r\n    [debug] [W3C] Encountered internal error running command: Error: Could not sign with default certificate. Original error Command &#39;C:\\Windows\\system32\\&quot;C:\\Program Files\\Java\\jdk-12&quot;\\bin\\java.exe&#39; not found. Is it installed?\r\n    [debug] [W3C]     at ADB.signWithDefaultCert (C:\\Users\\Akanksha Agarwal\\AppData\\Roaming\\npm\\node_modules\\appium\\node_modules\\appium-adb\\lib\\tools\\apk-signing.js:81:13)\r\n    [debug] [W3C] Destroying socket connection\r\n\r\n--------------------------------\r\n\r\n\r\n\r\nThese are the logs which are generated while running the script \r\ni am not able to understand the logs and error\r\n\r\n","title":"Not able to run basic program on appium","body":"<pre><code> package first;\n\nimport java.io.File;\nimport java.net.MalformedURLException;\nimport java.net.URL;\n\nimport org.openqa.selenium.remote.DesiredCapabilities;\n\nimport io.appium.java_client.android.AndroidDriver;\nimport io.appium.java_client.android.AndroidElement;\nimport io.appium.java_client.remote.MobileCapabilityType;\n\npublic class auto1 {\n\n    public static void main(String[] args) throws MalformedURLException {\n        // TODO Auto-generated method stub\n        File f = new File(&quot;src&quot;);\n        File fs = new File(f,&quot;DemoAndroid.apk&quot;);\n        \n        DesiredCapabilities cap = new DesiredCapabilities();\n        cap.setCapability(MobileCapabilityType.DEVICE_NAME,&quot;rahulemulator&quot;);\n        cap.setCapability(MobileCapabilityType.APP, fs.getAbsolutePath());\n        AndroidDriver&lt;AndroidElement&gt; ad = new AndroidDriver&lt;&gt;(new URL(&quot;http://127.0.0.1:4723/wd/hub&quot;),cap);\n\n    }\n</code></pre>\n<p>}</p>\n<h2>=====================\n<strong>Error</strong></h2>\n<pre><code>Exception in thread &quot;main&quot; org.openqa.selenium.SessionNotCreatedException: Unable to create a new remote session. Please check the server log for more details. Original error: An unknown server-side error occurred while processing the command. Original error: Could not sign with default certificate. Original error Command 'C:\\Windows\\system32\\&quot;C:\\Program Files\\Java\\jdk-12&quot;\\bin\\java.exe' not found. Is it installed?\nBuild info: version: '3.141.59', revision: 'e82be7d358', time: '2018-11-14T08:25:48'\nSystem info: host: 'DESKTOP-JIA4NSC', ip: '192.168.1.6', os.name: 'Windows 10', os.arch: 'amd64', os.version: '10.0', java.version: '1.8.0_241'\nDriver info: driver.version: AndroidDriver\nremote stacktrace: UnknownError: An unknown server-side error occurred while processing the command. Original error: Could not sign with default certificate. Original error Command 'C:\\Windows\\system32\\&quot;C:\\Program Files\\Java\\jdk-12&quot;\\bin\\java.exe' not found. Is it installed?\n    at getResponseForW3CError (C:\\Users\\Akanksha Agarwal\\AppData\\Roaming\\npm\\node_modules\\appium\\node_modules\\appium-base-driver\\lib\\protocol\\errors.js:804:9)\n    at asyncHandler (C:\\Users\\Akanksha Agarwal\\AppData\\Roaming\\npm\\node_modules\\appium\\node_modules\\appium-base-driver\\lib\\protocol\\protocol.js:392:37)\nBuild info: version: '3.141.59', revision: 'e82be7d358', time: '2018-11-14T08:25:48'\nSystem info: host: 'DESKTOP-JIA4NSC', ip: '192.168.1.6', os.name: 'Windows 10', os.arch: 'amd64', os.version: '10.0', java.version: '1.8.0_241'\nDriver info: driver.version: AndroidDriver\n    at io.appium.java_client.remote.AppiumCommandExecutor$1.createSession(AppiumCommandExecutor.java:208)\n    at io.appium.java_client.remote.AppiumCommandExecutor.createSession(AppiumCommandExecutor.java:217)\n    at io.appium.java_client.remote.AppiumCommandExecutor.execute(AppiumCommandExecutor.java:239)\n    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:552)\n    at io.appium.java_client.DefaultGenericMobileDriver.execute(DefaultGenericMobileDriver.java:41)\n    at io.appium.java_client.AppiumDriver.execute(AppiumDriver.java:1)\n    at io.appium.java_client.android.AndroidDriver.execute(AndroidDriver.java:1)\n    at org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:213)\n    at io.appium.java_client.AppiumDriver.startSession(AppiumDriver.java:336)\n    at org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:131)\n    at io.appium.java_client.DefaultGenericMobileDriver.&lt;init&gt;(DefaultGenericMobileDriver.java:37)\n    at io.appium.java_client.AppiumDriver.&lt;init&gt;(AppiumDriver.java:88)\n    at io.appium.java_client.AppiumDriver.&lt;init&gt;(AppiumDriver.java:98)\n    at io.appium.java_client.android.AndroidDriver.&lt;init&gt;(AndroidDriver.java:94)\n    at first.auto1.main(auto1.java:23)\nCaused by: java.lang.reflect.InvocationTargetException\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n    at java.lang.reflect.Method.invoke(Unknown Source)\n    at io.appium.java_client.remote.AppiumCommandExecutor$1.createSession(AppiumCommandExecutor.java:186)\n    ... 14 more\nCaused by: org.openqa.selenium.WebDriverException: An unknown server-side error occurred while processing the command. Original error: Could not sign with default certificate. Original error Command 'C:\\Windows\\system32\\&quot;C:\\Program Files\\Java\\jdk-12&quot;\\bin\\java.exe' not found. Is it installed?\nBuild info: version: '3.141.59', revision: 'e82be7d358', time: '2018-11-14T08:25:48'\nSystem info: host: 'DESKTOP-JIA4NSC', ip: '192.168.1.6', os.name: 'Windows 10', os.arch: 'amd64', os.version: '10.0', java.version: '1.8.0_241'\nDriver info: driver.version: AndroidDriver\nremote stacktrace: UnknownError: An unknown server-side error occurred while processing the command. Original error: Could not sign with default certificate. Original error Command 'C:\\Windows\\system32\\&quot;C:\\Program Files\\Java\\jdk-12&quot;\\bin\\java.exe' not found. Is it installed?\n    at getResponseForW3CError (C:\\Users\\Akanksha Agarwal\\AppData\\Roaming\\npm\\node_modules\\appium\\node_modules\\appium-base-driver\\lib\\protocol\\errors.js:804:9)\n    at asyncHandler (C:\\Users\\Akanksha Agarwal\\AppData\\Roaming\\npm\\node_modules\\appium\\node_modules\\appium-base-driver\\lib\\protocol\\protocol.js:392:37)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)\n    at java.lang.reflect.Constructor.newInstance(Unknown Source)\n    at org.openqa.selenium.remote.W3CHandshakeResponse.lambda$errorHandler$0(W3CHandshakeResponse.java:62)\n    at org.openqa.selenium.remote.HandshakeResponse.lambda$getResponseFunction$0(HandshakeResponse.java:30)\n    at org.openqa.selenium.remote.ProtocolHandshake.lambda$createSession$0(ProtocolHandshake.java:126)\n    at java.util.stream.ReferencePipeline$3$1.accept(Unknown Source)\n    at java.util.Spliterators$ArraySpliterator.tryAdvance(Unknown Source)\n    at java.util.stream.ReferencePipeline.forEachWithCancel(Unknown Source)\n    at java.util.stream.AbstractPipeline.copyIntoWithCancel(Unknown Source)\n    at java.util.stream.AbstractPipeline.copyInto(Unknown Source)\n    at java.util.stream.AbstractPipeline.wrapAndCopyInto(Unknown Source)\n    at java.util.stream.FindOps$FindOp.evaluateSequential(Unknown Source)\n    at java.util.stream.AbstractPipeline.evaluate(Unknown Source)\n    at java.util.stream.ReferencePipeline.findFirst(Unknown Source)\n    at org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:128)\n    ... 19 more\n</code></pre>\n<p>=======================</p>\n<p>Appium is also running</p>\n<p>i tried with command appium --avd rahulandroid\nVirtual device is also running\ni also tried running appium on adminstrator</p>\n<p>logs</p>\n<p>============</p>\n<pre><code>POST /wd/hub/session\n[HTTP] {&quot;desiredCapabilities&quot;:{&quot;app&quot;:&quot;C:\\\\Users\\\\Akanksha Agarwal\\\\eclipse-workspace\\\\first\\\\src\\\\Spectra(Android).apk&quot;,&quot;platformName&quot;:&quot;Android&quot;,&quot;deviceName&quot;:&quot;rahulemulator&quot;},&quot;capabilities&quot;:{&quot;firstMatch&quot;:[{&quot;appium:app&quot;:&quot;C:\\\\Users\\\\Akanksha Agarwal\\\\eclipse-workspace\\\\first\\\\src\\\\Spectra(Android).apk&quot;,&quot;appium:deviceName&quot;:&quot;rahulemulator&quot;,&quot;platformName&quot;:&quot;android&quot;}]}}\n[debug] [W3C] Calling AppiumDriver.createSession() with args: [{&quot;app&quot;:&quot;C:\\\\Users\\\\Akanksha Agarwal\\\\eclipse-workspace\\\\first\\\\src\\\\Spectra(Android).apk&quot;,&quot;platformName&quot;:&quot;Android&quot;,&quot;deviceName&quot;:&quot;rahulemulator&quot;},null,{&quot;firstMatch&quot;:[{&quot;appium:app&quot;:&quot;C:\\\\Users\\\\Akanksha Agarwal\\\\eclipse-workspace\\\\first\\\\src\\\\Spectra(Android).apk&quot;,&quot;appium:deviceName&quot;:&quot;rahulemulator&quot;,&quot;platformName&quot;:&quot;android&quot;}]}]\n[debug] [BaseDriver] Event 'newSessionRequested' logged at 1595960147399 (23:45:47 GMT+0530 (India Standard Time))\n[BaseDriver] The following capabilities are not standard capabilities and should have an extension prefix:\n[BaseDriver]   avd\n[Appium]\n[Appium] ======================================================================\n[Appium]   DEPRECATION WARNING:\n[Appium]\n[Appium]   The 'automationName' capability was not provided in the desired\n[Appium]   capabilities for this Android session\n[Appium]\n[Appium]   Setting 'automationName=UiAutomator2' by default and using the\n[Appium]   UiAutomator2 Driver\n[Appium]\n[Appium]   The next major version of Appium (2.x) will **require** the\n[Appium]   'automationName' capability to be set for all sessions on all\n[Appium]   platforms\n[Appium]\n[Appium]   In previous versions (Appium &lt;= 1.13.x), the default was\n[Appium]   'automationName=UiAutomator1'\n[Appium]\n[Appium]   If you wish to use that automation instead of UiAutomator2, please\n[Appium]   add 'automationName=UiAutomator1' to your desired capabilities\n[Appium]\n[Appium]   For more information about drivers, please visit\n[Appium]   http://appium.io/docs/en/about-appium/intro/ and explore the\n[Appium]   'Drivers' menu\n[Appium]\n[Appium] ======================================================================\n[Appium]\n[Appium] Appium v1.17.1 creating new AndroidUiautomator2Driver (v1.44.2) session\n[debug] [BaseDriver] W3C capabilities and MJSONWP desired capabilities were provided\n[debug] [BaseDriver] Creating session with W3C capabilities: {\n[debug] [BaseDriver]   &quot;alwaysMatch&quot;: {\n[debug] [BaseDriver]     &quot;platformName&quot;: &quot;android&quot;,\n[debug] [BaseDriver]     &quot;appium:avd&quot;: &quot;rahulandroid&quot;,\n[debug] [BaseDriver]     &quot;appium:app&quot;: &quot;C:\\\\Users\\\\Akanksha Agarwal\\\\eclipse-workspace\\\\first\\\\src\\\\Spectra(Android).apk&quot;,\n[debug] [BaseDriver]     &quot;appium:deviceName&quot;: &quot;rahulemulator&quot;\n[debug] [BaseDriver]   },\n[debug] [BaseDriver]   &quot;firstMatch&quot;: [\n[debug] [BaseDriver]     {}\n[debug] [BaseDriver]   ]\n[debug] [BaseDriver] }\n[BaseDriver] Session created with session id: f540c68d-7e46-4e97-bc3d-0f419c9853df\n[BaseDriver] Using local app 'C:\\Users\\Akanksha Agarwal\\eclipse-workspace\\first\\src\\Spectra(Android).apk'\n[debug] [UiAutomator2] Checking whether app is actually present\n[ADB] Found 1 'build-tools' folders under 'C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk' (newest first):\n[ADB]     C:/Users/Akanksha Agarwal/AppData/Local/Android/Sdk/build-tools/30.0.0\n[ADB] Using 'adb.exe' from 'C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe'\n[debug] [ADB] Trying to find 'rahulandroid' emulator\n[debug] [ADB] Getting connected emulators\n[debug] [ADB] Getting connected devices...\n[debug] [ADB] Connected devices: [{&quot;udid&quot;:&quot;emulator-5556&quot;,&quot;state&quot;:&quot;device&quot;}]\n[debug] [ADB] 1 emulator(s) connected\n[debug] [ADB] Sending telnet command to device: avd name\n[debug] [ADB] Getting running emulator port\n[debug] [ADB] Socket connection to device created\n[debug] [ADB] Socket connection to device ready\n[debug] [ADB] Telnet command got response: rahulandroid\n[debug] [ADB] Found emulator 'rahulandroid' on port 5556\n[debug] [ADB] Setting device id to emulator-5556\n[debug] [AndroidDriver] Not launching AVD because it is already running.\n[AndroidDriver] Using device: emulator-5556\n[ADB] Using 'adb.exe' from 'C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe'\n[debug] [ADB] Setting device id to emulator-5556\n[debug] [ADB] Running 'C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell getprop ro.build.version.sdk'\n[debug] [ADB] Current device property 'ro.build.version.sdk': 28\n[ADB] Getting device platform version\n[debug] [ADB] Running 'C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell getprop ro.build.version.release'\n[debug] [ADB] Current device property 'ro.build.version.release': 9\n[debug] [ADB] Device API level: 28\n[UiAutomator2] Relaxing hidden api policy\n[debug] [ADB] Running 'C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell settings put global hidden_api_policy_pre_p_apps 1'\n[debug] [ADB] Running 'C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell settings put global hidden_api_policy_p_apps 1'\n[debug] [ADB] Running 'C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell settings put global hidden_api_policy 1'\n[debug] [AndroidDriver] Parsing package and activity from app manifest\n[ADB] Package name: 'com.spectra.consumer'\n[ADB] Main activity name: 'com.spectra.consumer.Activities.SplashActivity'\n[debug] [AndroidDriver] Parsed package and activity are: com.spectra.consumer/com.spectra.consumer.Activities.SplashActivity\n[debug] [ADB] Running 'C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 wait-for-device'\n[debug] [ADB] Running 'C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell echo ping'\n[debug] [AndroidDriver] Pushing settings apk to device...\n[debug] [ADB] Getting install status for io.appium.settings\n[debug] [ADB] Running 'C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell dumpsys package io.appium.settings'\n[debug] [ADB] 'io.appium.settings' is installed\n[debug] [ADB] Getting package info for 'io.appium.settings'\n[debug] [ADB] Running 'C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell dumpsys package io.appium.settings'\n[debug] [ADB] The version name of the installed 'io.appium.settings' is greater or equal to the application version name ('3.1.0' &gt;= '3.1.0')\n[debug] [ADB] There is no need to install/upgrade 'C:\\Users\\Akanksha Agarwal\\AppData\\Roaming\\npm\\node_modules\\appium\\node_modules\\io.appium.settings\\apks\\settings_apk-debug.apk'\n[debug] [ADB] Getting IDs of all 'io.appium.settings' processes\n[debug] [ADB] Running 'C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell 'pgrep --help; echo $?''\n[debug] [ADB] Running 'C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell pgrep -f io\\\\.appium\\\\.settings'\n[debug] [AndroidDriver] io.appium.settings is already running. There is no need to reset its permissions.\n[debug] [Logcat] Starting logcat capture\n[debug] [UiAutomator2] Forwarding UiAutomator2 Server port 6790 to 8200\n[debug] [ADB] Forwarding system: 8200 to device: 6790\n[debug] [ADB] Running 'C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 forward tcp\\:8200 tcp\\:6790'\n[debug] [ADB] Getting install status for io.appium.uiautomator2.server\n[debug] [ADB] Running 'C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell dumpsys package io.appium.uiautomator2.server'\n[debug] [ADB] 'io.appium.uiautomator2.server' is not installed\n[debug] [ADB] App 'C:\\Users\\Akanksha Agarwal\\AppData\\Roaming\\npm\\node_modules\\appium\\node_modules\\appium-uiautomator2-server\\apks\\appium-uiautomator2-server-v4.5.5.apk' is not installed\n[debug] [UiAutomator2] io.appium.uiautomator2.server installation state: notInstalled\n[debug] [ADB] Checking app cert for C:\\Users\\Akanksha Agarwal\\AppData\\Roaming\\npm\\node_modules\\appium\\node_modules\\appium-uiautomator2-server\\apks\\appium-uiautomator2-server-v4.5.5.apk\n[ADB] Using 'apksigner.jar' from 'C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\build-tools\\30.0.0\\lib\\apksigner.jar'\n[debug] [ADB] Starting apksigner: 'C:\\\\Windows\\\\system32\\\\&quot;C:\\\\Program Files\\\\Java\\\\jdk-12&quot;\\\\bin\\\\java.exe' -Xmx1024M -Xss1m -jar 'C:\\\\Users\\\\Akanksha Agarwal\\\\AppData\\\\Local\\\\Android\\\\Sdk\\\\build-tools\\\\30.0.0\\\\lib\\\\apksigner.jar' verify --print-certs 'C:\\\\Users\\\\Akanksha Agarwal\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\appium\\\\node_modules\\\\appium-uiautomator2-server\\\\apks\\\\appium-uiautomator2-server-v4.5.5.apk'\n[ADB] Cannot use apksigner tool for signature verification. Original error: Command 'C:\\Windows\\system32\\&quot;C:\\Program Files\\Java\\jdk-12&quot;\\bin\\java.exe' not found. Is it installed?\n[debug] [ADB] Defaulting to verify.jar\n[debug] [ADB] 'C:\\Users\\Akanksha Agarwal\\AppData\\Roaming\\npm\\node_modules\\appium\\node_modules\\appium-uiautomator2-server\\apks\\appium-uiautomator2-server-v4.5.5.apk' is not signed with the default certificate\n[debug] [ADB] Command 'C:\\Windows\\system32\\&quot;C:\\Program Files\\Java\\jdk-12&quot;\\bin\\java.exe' not found. Is it installed?\n[ADB] Using 'zipalign.exe' from 'C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\build-tools\\30.0.0\\zipalign.exe'\n[debug] [ADB] C:\\Users\\Akanksha Agarwal\\AppData\\Roaming\\npm\\node_modules\\appium\\node_modules\\appium-uiautomator2-server\\apks\\appium-uiautomator2-server-v4.5.5.apk' is already zip-aligned. Doing nothing\n[debug] [ADB] Signing 'C:\\Users\\Akanksha Agarwal\\AppData\\Roaming\\npm\\node_modules\\appium\\node_modules\\appium-uiautomator2-server\\apks\\appium-uiautomator2-server-v4.5.5.apk' with default cert\n[debug] [ADB] Starting apksigner: 'C:\\\\Windows\\\\system32\\\\&quot;C:\\\\Program Files\\\\Java\\\\jdk-12&quot;\\\\bin\\\\java.exe' -Xmx1024M -Xss1m -jar 'C:\\\\Users\\\\Akanksha Agarwal\\\\AppData\\\\Local\\\\Android\\\\Sdk\\\\build-tools\\\\30.0.0\\\\lib\\\\apksigner.jar' sign --key 'C:\\\\Users\\\\Akanksha Agarwal\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\appium\\\\node_modules\\\\appium-adb\\\\keys\\\\testkey.pk8' --cert 'C:\\\\Users\\\\Akanksha Agarwal\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\appium\\\\node_modules\\\\appium-adb\\\\keys\\\\testkey.x509.pem' 'C:\\\\Users\\\\Akanksha Agarwal\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\appium\\\\node_modules\\\\appium-uiautomator2-server\\\\apks\\\\appium-uiautomator2-server-v4.5.5.apk'\n[ADB] Cannot use apksigner tool for signing. Defaulting to sign.jar. Original error: Command 'C:\\Windows\\system32\\&quot;C:\\Program Files\\Java\\jdk-12&quot;\\bin\\java.exe' not found. Is it installed?\n[debug] [ADB] Starting sign.jar: 'C:\\\\Windows\\\\system32\\\\&quot;C:\\\\Program Files\\\\Java\\\\jdk-12&quot;\\\\bin\\\\java.exe' -jar 'C:\\\\Users\\\\Akanksha Agarwal\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\appium\\\\node_modules\\\\appium-adb\\\\jars\\\\sign.jar' 'C:\\\\Users\\\\Akanksha Agarwal\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\appium\\\\node_modules\\\\appium-uiautomator2-server\\\\apks\\\\appium-uiautomator2-server-v4.5.5.apk' --override\n[debug] [UiAutomator2] Deleting UiAutomator2 session\n[debug] [UiAutomator2] Deleting UiAutomator2 server session\n[debug] [WD Proxy] Matched '/' to command name 'deleteSession'\n[UiAutomator2] Did not get confirmation UiAutomator2 deleteSession worked; Error was: UnknownError: An unknown server-side error occurred while processing the command. Original error: Trying to proxy a session command without session id\n[debug] [ADB] Running 'C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell am force-stop com.spectra.consumer'\n[debug] [Logcat] Stopping logcat capture\n[debug] [ADB] Removing forwarded port socket connection: 8200\n[debug] [ADB] Running 'C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 forward --remove tcp\\:8200'\n[UiAutomator2] Restoring hidden api policy to the device default configuration\n[debug] [ADB] Running 'C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell settings delete global hidden_api_policy_pre_p_apps'\n[debug] [ADB] Running 'C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell settings delete global hidden_api_policy_p_apps'\n[debug] [ADB] Running 'C:\\Users\\Akanksha Agarwal\\AppData\\Local\\Android\\Sdk\\platform-tools\\adb.exe -P 5037 -s emulator-5556 shell settings delete global hidden_api_policy'\n[debug] [BaseDriver] Event 'newSessionStarted' logged at 1595960150494 (23:45:50 GMT+0530 (India Standard Time))\n[debug] [W3C] Encountered internal error running command: Error: Could not sign with default certificate. Original error Command 'C:\\Windows\\system32\\&quot;C:\\Program Files\\Java\\jdk-12&quot;\\bin\\java.exe' not found. Is it installed?\n[debug] [W3C]     at ADB.signWithDefaultCert (C:\\Users\\Akanksha Agarwal\\AppData\\Roaming\\npm\\node_modules\\appium\\node_modules\\appium-adb\\lib\\tools\\apk-signing.js:81:13)\n[debug] [W3C] Destroying socket connection\n</code></pre>\n<hr />\n<p>These are the logs which are generated while running the script\ni am not able to understand the logs and error</p>\n"},{"tags":["java","spring-boot","file-upload","vuejs3","multipartform-data"],"owner":{"account_id":18225653,"reputation":13,"user_id":13265507,"display_name":"ginbarca"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692859020,"creation_date":1692858981,"question_id":76966743,"body_markdown":"I run BE in localhost it worked but when deploy to server, it&#39;s not worked.\r\nHere is my API code:\r\n```java\r\n    @Validated\r\n    @PostMapping(value = &quot;/account-info/import&quot;, consumes = { MediaType.MULTIPART_FORM_DATA_VALUE, MediaType.APPLICATION_JSON_VALUE })\r\n    public ResponseEntity&lt;?&gt; importExcel(\r\n            HttpServletRequest servletRequest,\r\n            @ValidExcelFile @RequestPart(&quot;file&quot;) MultipartFile file\r\n    ) throws IOException {\r\n        // something\r\n        return ResponseEntity.noContent().build();\r\n    }\r\n```\r\nHere is `@ValidExcelFile` annotation:\r\n```java\r\n@Documented\r\n@Target({ElementType.METHOD, ElementType.FIELD, ElementType.ANNOTATION_TYPE, ElementType.CONSTRUCTOR, ElementType.PARAMETER, ElementType.TYPE_USE})\r\n@Retention(RetentionPolicy.RUNTIME)\r\n@Constraint(validatedBy = {FileValidator.class})\r\npublic @interface ValidExcelFile {\r\n    String message() default &quot;Only excel file are allowed&quot;;\r\n\r\n    Class&lt;?&gt;[] groups() default {};\r\n\r\n    Class&lt;? extends Payload&gt;[] payload() default {};\r\n}\r\n\r\nclass FileValidator implements ConstraintValidator&lt;ValidExcelFile, MultipartFile&gt; {\r\n\r\n    @Override\r\n    public void initialize(ValidExcelFile constraintAnnotation) {\r\n\r\n    }\r\n\r\n    @Override\r\n    public boolean isValid(MultipartFile multipartFile, ConstraintValidatorContext context) {\r\n\r\n        boolean result = true;\r\n\r\n        String contentType = multipartFile.getContentType();\r\n        if (!isSupportedContentType(contentType)) {\r\n            result = false;\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    private boolean isSupportedContentType(String contentType) {\r\n        return contentType.equals(&quot;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet&quot;);\r\n    }\r\n}\r\n```\r\nHere is my Vue3:\r\n```vue\r\n          &lt;form class=&quot;form row&quot; enctype=&quot;multipart/form-data&quot;&gt;\r\n            &lt;div class=&quot;row fv-row mb-5&quot;&gt;\r\n              &lt;el-upload\r\n                ref=&quot;uploadRef&quot;\r\n                class=&quot;upload-demo&quot;\r\n                action=&quot;http://localhost:8081/api/account-info/import&quot;\r\n                accept=&quot;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet&quot;\r\n                drag\r\n                :limit=&quot;1&quot;\r\n                :headers=&quot;{ &#39;Content-Type&#39;: &#39;multipart/form-data;&#39; }&quot;\r\n                :on-exceed=&quot;handleExceed&quot;\r\n                :http-request=&quot;handleRequest&quot;\r\n              &gt;\r\n              &lt;/el-upload&gt;\r\n            &lt;/div&gt;\r\n          &lt;/form&gt;\r\n```\r\nI set the action is `localhost` then it worked, but if I change to server IP, it got error with status 400: `Current request is not a multipart request`.\r\nThis is request info: [request info][1]\r\n\r\nPlease help me fix this. Thanks!\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/jquqD.png","title":"Spring boot Current request is not a multipart request when deploy to server","body":"<p>I run BE in localhost it worked but when deploy to server, it's not worked.\nHere is my API code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Validated\n    @PostMapping(value = &quot;/account-info/import&quot;, consumes = { MediaType.MULTIPART_FORM_DATA_VALUE, MediaType.APPLICATION_JSON_VALUE })\n    public ResponseEntity&lt;?&gt; importExcel(\n            HttpServletRequest servletRequest,\n            @ValidExcelFile @RequestPart(&quot;file&quot;) MultipartFile file\n    ) throws IOException {\n        // something\n        return ResponseEntity.noContent().build();\n    }\n</code></pre>\n<p>Here is <code>@ValidExcelFile</code> annotation:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Documented\n@Target({ElementType.METHOD, ElementType.FIELD, ElementType.ANNOTATION_TYPE, ElementType.CONSTRUCTOR, ElementType.PARAMETER, ElementType.TYPE_USE})\n@Retention(RetentionPolicy.RUNTIME)\n@Constraint(validatedBy = {FileValidator.class})\npublic @interface ValidExcelFile {\n    String message() default &quot;Only excel file are allowed&quot;;\n\n    Class&lt;?&gt;[] groups() default {};\n\n    Class&lt;? extends Payload&gt;[] payload() default {};\n}\n\nclass FileValidator implements ConstraintValidator&lt;ValidExcelFile, MultipartFile&gt; {\n\n    @Override\n    public void initialize(ValidExcelFile constraintAnnotation) {\n\n    }\n\n    @Override\n    public boolean isValid(MultipartFile multipartFile, ConstraintValidatorContext context) {\n\n        boolean result = true;\n\n        String contentType = multipartFile.getContentType();\n        if (!isSupportedContentType(contentType)) {\n            result = false;\n        }\n\n        return result;\n    }\n\n    private boolean isSupportedContentType(String contentType) {\n        return contentType.equals(&quot;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet&quot;);\n    }\n}\n</code></pre>\n<p>Here is my Vue3:</p>\n<pre class=\"lang-js prettyprint-override\"><code>          &lt;form class=&quot;form row&quot; enctype=&quot;multipart/form-data&quot;&gt;\n            &lt;div class=&quot;row fv-row mb-5&quot;&gt;\n              &lt;el-upload\n                ref=&quot;uploadRef&quot;\n                class=&quot;upload-demo&quot;\n                action=&quot;http://localhost:8081/api/account-info/import&quot;\n                accept=&quot;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet&quot;\n                drag\n                :limit=&quot;1&quot;\n                :headers=&quot;{ 'Content-Type': 'multipart/form-data;' }&quot;\n                :on-exceed=&quot;handleExceed&quot;\n                :http-request=&quot;handleRequest&quot;\n              &gt;\n              &lt;/el-upload&gt;\n            &lt;/div&gt;\n          &lt;/form&gt;\n</code></pre>\n<p>I set the action is <code>localhost</code> then it worked, but if I change to server IP, it got error with status 400: <code>Current request is not a multipart request</code>.\nThis is request info: <a href=\"https://i.stack.imgur.com/jquqD.png\" rel=\"nofollow noreferrer\">request info</a></p>\n<p>Please help me fix this. Thanks!</p>\n"},{"tags":["java","spring","spring-aop","spring-bean"],"comments":[{"owner":{"account_id":974021,"reputation":63348,"user_id":995891,"accept_rate":83,"display_name":"zapl"},"score":1,"creation_date":1539589807,"post_id":52811994,"comment_id":92541844,"body_markdown":"I give you a hint: `IllegalArgumentException: No visible constructors in class com.myprj.aop.service.FinalClass` and `*private* FinalClass(String param) {`","body":"I give you a hint: <code>IllegalArgumentException: No visible constructors in class com.myprj.aop.service.FinalClass</code> and <code>*private* FinalClass(String param) {</code>"},{"owner":{"account_id":2110692,"reputation":431,"user_id":1876040,"accept_rate":12,"display_name":"user1876040"},"score":0,"creation_date":1539590257,"post_id":52811994,"comment_id":92542087,"body_markdown":"Hi @zapl, Thanks, My requirement is the singleton FinalClass class will not have public constructor. So to inject it, creating the bean in the applicationContext.xml and need to use that qualified bean in all other places. If i add a public constructor then it will not meet the purpose of singleton. correct?","body":"Hi @zapl, Thanks, My requirement is the singleton FinalClass class will not have public constructor. So to inject it, creating the bean in the applicationContext.xml and need to use that qualified bean in all other places. If i add a public constructor then it will not meet the purpose of singleton. correct?"},{"owner":{"account_id":974021,"reputation":63348,"user_id":995891,"accept_rate":83,"display_name":"zapl"},"score":1,"creation_date":1539591776,"post_id":52811994,"comment_id":92542813,"body_markdown":"The constructor visibility is irrelevant when nobody else uses it. Spring will use it only once, thus provide a single instance throughout your application. You can also use a `protected` constructor because https://stackoverflow.com/questions/3952815/extends-of-the-class-with-private-constructor is what happens","body":"The constructor visibility is irrelevant when nobody else uses it. Spring will use it only once, thus provide a single instance throughout your application. You can also use a <code>protected</code> constructor because <a href=\"https://stackoverflow.com/questions/3952815/extends-of-the-class-with-private-constructor\" title=\"extends of the class with private constructor\">stackoverflow.com/questions/3952815/&hellip;</a> is what happens"},{"owner":{"account_id":216950,"reputation":20103,"user_id":472495,"accept_rate":92,"display_name":"halfer"},"score":0,"creation_date":1539623863,"post_id":52811994,"comment_id":92560393,"body_markdown":"Please read [Under what circumstances may I add “urgent” or other similar phrases to my question, in order to obtain faster answers?](//meta.stackoverflow.com/q/326569) - the summary is that this is not an ideal way to address volunteers, and is probably counterproductive to obtaining answers. Please refrain from adding this to your questions.","body":"Please read <a href=\"//meta.stackoverflow.com/q/326569\">Under what circumstances may I add “urgent” or other similar phrases to my question, in order to obtain faster answers?</a> - the summary is that this is not an ideal way to address volunteers, and is probably counterproductive to obtaining answers. Please refrain from adding this to your questions."},{"owner":{"account_id":2110692,"reputation":431,"user_id":1876040,"accept_rate":12,"display_name":"user1876040"},"score":0,"creation_date":1539760738,"post_id":52811994,"comment_id":92614247,"body_markdown":"@zapl, I found another workaround to solve the issue, i used &amp;&amp; !within(Singleton class) from being injected and weaved in my LoggingAspect.java. So i will do my explicit logging in that file. Thanks for the suggestions.","body":"@zapl, I found another workaround to solve the issue, i used &amp;&amp; !within(Singleton class) from being injected and weaved in my LoggingAspect.java. So i will do my explicit logging in that file. Thanks for the suggestions."},{"owner":{"account_id":2110692,"reputation":431,"user_id":1876040,"accept_rate":12,"display_name":"user1876040"},"score":0,"creation_date":1539760800,"post_id":52811994,"comment_id":92614286,"body_markdown":"@halfer, Apologies for that. Will take an note on that.","body":"@halfer, Apologies for that. Will take an note on that."}],"answers":[{"tags":[],"owner":{"account_id":5866213,"reputation":970,"user_id":4620086,"display_name":"Michal"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1539589859,"creation_date":1539589859,"answer_id":52812048,"question_id":52811994,"body_markdown":"as your exception says itself \r\n\r\n    No visible constructors in class com.myprj.aop.service.FinalClass\r\n\r\nchange your private constructor to public.","title":"Issue with Spring AOP and Final class throwing &quot;Could not generate CGLIB subclass&quot;","body":"<p>as your exception says itself </p>\n\n<pre><code>No visible constructors in class com.myprj.aop.service.FinalClass\n</code></pre>\n\n<p>change your private constructor to public.</p>\n"},{"tags":[],"owner":{"account_id":7886651,"reputation":1376,"user_id":5958449,"display_name":"Yoav Gur"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1539590054,"creation_date":1539590054,"answer_id":52812090,"question_id":52811994,"body_markdown":"It tells you what the problem is: `No visible constructors in class com.myprj.aop.service.FinalClass`.  \r\n\r\nThere is no way for spring to &quot;guess&quot; which static getInstance() method to call to instantiate the singleton.  \r\nYou must provide a public empty c&#39;tor for it.  \r\n\r\nIf you use spring accross your application, you can define FinalClass as a singleton using the [@Scope][1] property.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring/docs/3.0.0.M3/reference/html/ch04s04.html","title":"Issue with Spring AOP and Final class throwing &quot;Could not generate CGLIB subclass&quot;","body":"<p>It tells you what the problem is: <code>No visible constructors in class com.myprj.aop.service.FinalClass</code>.  </p>\n\n<p>There is no way for spring to \"guess\" which static getInstance() method to call to instantiate the singleton.<br>\nYou must provide a public empty c'tor for it.  </p>\n\n<p>If you use spring accross your application, you can define FinalClass as a singleton using the <a href=\"https://docs.spring.io/spring/docs/3.0.0.M3/reference/html/ch04s04.html\" rel=\"nofollow noreferrer\">@Scope</a> property.</p>\n"},{"tags":[],"owner":{"account_id":594316,"reputation":3088,"user_id":1737590,"accept_rate":60,"display_name":"stenix"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1692858963,"creation_date":1692858963,"answer_id":76966741,"question_id":52811994,"body_markdown":"I had the same issue with my service that was modularized. I solved the issue by adding the line \r\n\r\n      requires spring.aop;\r\n\r\nto `module-info.java`","title":"Issue with Spring AOP and Final class throwing &quot;Could not generate CGLIB subclass&quot;","body":"<p>I had the same issue with my service that was modularized. I solved the issue by adding the line</p>\n<pre><code>  requires spring.aop;\n</code></pre>\n<p>to <code>module-info.java</code></p>\n"}],"owner":{"account_id":2110692,"reputation":431,"user_id":1876040,"accept_rate":12,"display_name":"user1876040"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31032,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1692858963,"creation_date":1539589622,"question_id":52811994,"body_markdown":"1) Below is the small project I have where I do want logging with SpringAOP. Using spring-aop-4.1.6.RELEASE.jar and below is LoggingAspect.java with few point cuts. \r\n\r\n    package com.myprj.aop.aspect;\r\n    \r\n    import org.apache.commons.logging.Log;\r\n    import org.apache.commons.logging.LogFactory;\r\n    import org.aspectj.lang.JoinPoint;\r\n    import org.aspectj.lang.annotation.After;\r\n    import org.aspectj.lang.annotation.Aspect;\r\n    import org.aspectj.lang.annotation.Before;\r\n    import org.aspectj.lang.annotation.Pointcut;\r\n    import org.springframework.stereotype.Component;\r\n    \r\n    @Aspect\r\n    @Component\r\n    public class LoggingAspect {\r\n    \tprivate final Log log = LogFactory.getLog(getClass());\r\n    \r\n    \t@Before(&quot;logForAllMethods()&quot;) // after advice with name pointcut that declared as name logForAllMethods()\r\n    \tpublic void beforeAdviceForAllMethods(JoinPoint jp) throws Throwable {\r\n    \t\tObject clazz = jp.getTarget().getClass().getName();\r\n    \t\tString methodName = jp.getSignature().getName();\r\n    \t\tlog.info(&quot;Before Entering to Class &quot; + clazz + &quot; With Method Name &quot; + methodName);\r\n    \t\t// getting method parameter name\r\n    \t\tObject[] obj = jp.getArgs();\r\n    \t\tfor (Object o : obj) {\r\n    \t\t\tif (o != null) {\r\n    \t\t\t\tlog.info(&quot;Parameter Name...&quot; + o.toString());\r\n    \t\t\t} else {\r\n    \t\t\t\tlog.info(&quot;&quot;);\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n    \t}\r\n    \r\n    \t@After(&quot;logForAllMethods()&quot;) // after advice with name pointcut that declared as name logForAllMethods()\r\n    \tpublic void afterAdviceForAllMethods(JoinPoint jp) throws Throwable {\r\n    \t\tObject clazz = jp.getTarget().getClass().getName();\r\n    \t\tString methodName = jp.getSignature().getName();\r\n    \t\tlog.info(&quot;After Entring to Method &quot; + methodName + &quot; in Calss &quot; + clazz);\r\n    \t}\r\n    \r\n    \t@Pointcut(&quot;execution(public * *(..))&quot;)\t\t// enable for all public methods\r\n    \tpublic void logForAllMethods() {\r\n    \t}\r\n    }\r\n\r\nAlso below is the sample Service and ServiceImpl classes I have \r\n\r\n    package com.myprj.aop.service;\r\n    \r\n    public interface TransferService {\r\n    \r\n    \tvoid transfer(String accountA, String accountB, Long amount);\r\n    \r\n    \tDouble checkBalance(String account);\r\n    \r\n    \tLong withdrawal(String account, Long amount);\r\n    \r\n    \tvoid diposite(String account, Long amount);\r\n    }\r\n\r\n\r\n    package com.myprj.aop.service;\r\n    \r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.beans.factory.annotation.Qualifier;\r\n    import org.springframework.stereotype.Service;\r\n    \r\n    @Service\r\n    public class TransferServiceImpl implements TransferService {\r\n    \t\r\n    \t@Autowired\r\n    \t@Qualifier(&quot;finalClass&quot;)\r\n    \tFinalClass finalClass;\r\n    \r\n    \t@Override\r\n    \tpublic void transfer(String accountA, String accountB, Long amount) {\r\n    \t\tSystem.out.println(amount + &quot; Amount has been tranfered from &quot; + accountA + &quot; to &quot; + accountB);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic Double checkBalance(String account) {\r\n    \t\tSystem.out.println(&quot;Available balance: 50000&quot;);\r\n    \t\tfinalClass.toString();\r\n    \t\treturn new Double(50000);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic Long withdrawal(String account, Long amount) {\r\n    \t\tSystem.out.println(&quot;Withdrawal amount: &quot; + amount);\r\n    \t\tfinalClass.toString();\r\n    \t\treturn amount;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void diposite(String account, Long amount) {\r\n    \t\tSystem.out.println(amount + &quot; Amount has been diposited to &quot; + account);\r\n    \t\tfinalClass.toString();\r\n    \t}\r\n    \r\n    }\r\n\r\nAlso, I have a Singleton class where few methods need to be invoked like below.\r\n\r\n    package com.myprj.aop.service;\r\n    \r\n    public class FinalClass {\r\n    \t\r\n    \tprivate String constructorParam;\r\n    \t\r\n    \tprivate FinalClass(String param) {\r\n    \t\tconstructorParam = param;\r\n    \t}\r\n    \t\r\n    \t@Override\r\n    \tpublic String toString() {\r\n    \t\tSystem.out.println(constructorParam);\r\n    \t\treturn constructorParam;\r\n    \t}\r\n    }\r\n\r\nBelow is applicationContext.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n    \txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:util=&quot;http://www.springframework.org/schema/util&quot;\r\n    \txmlns:context=&quot;http://www.springframework.org/schema/context&quot;\r\n    \txmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;\r\n    \txsi:schemaLocation=&quot;http://www.springframework.org/schema/beans\r\n            http://www.springframework.org/schema/beans/spring-beans.xsd\r\n            http://www.springframework.org/schema/context\r\n            http://www.springframework.org/schema/context/spring-context.xsd\r\n            http://www.springframework.org/schema/util\r\n            http://www.springframework.org/schema/util/spring-util.xsd\r\n            http://www.springframework.org/schema/aop\r\n            http://www.springframework.org/schema/aop/spring-aop-3.0.xsd&quot;&gt;\r\n    \t&lt;context:component-scan base-package=&quot;com.myprj.aop.*&quot; /&gt;\t\t\r\n    \t&lt;bean id=&quot;finalClass&quot; class=&quot;com.myprj.aop.service.FinalClass&quot;&gt;\r\n    \t\t&lt;constructor-arg value=&quot;constructorArg&quot;&gt;&lt;/constructor-arg&gt;\r\n    \t&lt;/bean&gt;\r\n    \t&lt;aop:aspectj-autoproxy/&gt;\t\r\n    &lt;/beans&gt;\r\n\r\nMain class:\r\n\r\n    package com.myprj.aop.test;\r\n    \r\n    import org.springframework.context.ApplicationContext;\r\n    import org.springframework.context.ConfigurableApplicationContext;\r\n    import org.springframework.context.annotation.AnnotationConfigApplicationContext;\r\n    import org.springframework.context.support.ClassPathXmlApplicationContext;\r\n    \r\n    import com.myprj.aop.config.AppConfig;\r\n    import com.myprj.aop.service.TransferService;\r\n    \r\n    \r\n    public class Main {\r\n    \r\n    \t/**\r\n    \t * @param args\r\n    \t */\r\n    \tpublic static void main(String[] args) {\r\n    \t\t// ConfigurableApplicationContext applicationContext = new AnnotationConfigApplicationContext(AppConfig.class);\r\n    \t\tApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);\r\n    \t\tTransferService transferService = applicationContext.getBean(TransferService.class);\r\n    \t\ttransferService.transfer(&quot;accountA&quot;, &quot;accountB&quot;, 50000l);\r\n    \t\ttransferService.checkBalance(&quot;accountA&quot;);\r\n    \t\ttransferService.diposite(&quot;accountA&quot;, 50000l);\r\n    \t\ttransferService.withdrawal(&quot;accountB&quot;, 40000l);\r\n    \t\t//applicationContext.close();\r\n    \t}\r\n    \r\n    }\r\n\r\nGet below error\r\n\r\n    WARNING: Exception encountered during context initialization - cancelling refresh attempt\r\n    org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;transferServiceImpl&#39;: Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: com.myprj.aop.service.FinalClass com.myprj.aop.service.TransferServiceImpl.finalClass; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;finalClass&#39; defined in class path resource [applicationContext.xml]: Initialization of bean failed; nested exception is org.springframework.aop.framework.AopConfigException: Could not generate CGLIB subclass of class [class com.myprj.aop.service.FinalClass]: Common causes of this problem include using a final class or a non-visible class; nested exception is java.lang.IllegalArgumentException: No visible constructors in class com.myprj.aop.service.FinalClass\r\n    \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:334)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1210)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:537)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:476)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:303)\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:299)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:755)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:757)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:480)\r\n    \tat org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:139)\r\n    \tat org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:83)\r\n    \tat com.myprj.aop.test.Main.main(Main.java:19)\r\n    Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: com.myprj.aop.service.FinalClass com.myprj.aop.service.TransferServiceImpl.finalClass; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;finalClass&#39; defined in class path resource [applicationContext.xml]: Initialization of bean failed; nested exception is org.springframework.aop.framework.AopConfigException: Could not generate CGLIB subclass of class [class com.myprj.aop.service.FinalClass]: Common causes of this problem include using a final class or a non-visible class; nested exception is java.lang.IllegalArgumentException: No visible constructors in class com.myprj.aop.service.FinalClass\r\n    \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:561)\r\n    \tat org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:88)\r\n    \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:331)\r\n    \t... 13 more\r\n    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;finalClass&#39; defined in class path resource [applicationContext.xml]: Initialization of bean failed; nested exception is org.springframework.aop.framework.AopConfigException: Could not generate CGLIB subclass of class [class com.myprj.aop.service.FinalClass]: Common causes of this problem include using a final class or a non-visible class; nested exception is java.lang.IllegalArgumentException: No visible constructors in class com.myprj.aop.service.FinalClass\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:547)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:476)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:303)\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:299)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1120)\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1044)\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:942)\r\n    \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:533)\r\n    \t... 15 more\r\n    Caused by: org.springframework.aop.framework.AopConfigException: Could not generate CGLIB subclass of class [class com.myprj.aop.service.FinalClass]: Common causes of this problem include using a final class or a non-visible class; nested exception is java.lang.IllegalArgumentException: No visible constructors in class com.myprj.aop.service.FinalClass\r\n    \tat org.springframework.aop.framework.CglibAopProxy.getProxy(CglibAopProxy.java:212)\r\n    \tat org.springframework.aop.framework.ProxyFactory.getProxy(ProxyFactory.java:109)\r\n    \tat org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.createProxy(AbstractAutoProxyCreator.java:447)\r\n    \tat org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.wrapIfNecessary(AbstractAutoProxyCreator.java:333)\r\n    \tat org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.postProcessAfterInitialization(AbstractAutoProxyCreator.java:293)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsAfterInitialization(AbstractAutowireCapableBeanFactory.java:422)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1579)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:539)\r\n    \t... 24 more\r\n    Caused by: java.lang.IllegalArgumentException: No visible constructors in class com.myprj.aop.service.FinalClass\r\n    \tat org.springframework.cglib.proxy.Enhancer.filterConstructors(Enhancer.java:531)\r\n    \tat org.springframework.cglib.proxy.Enhancer.generateClass(Enhancer.java:448)\r\n    \tat org.springframework.cglib.transform.TransformingClassGenerator.generateClass(TransformingClassGenerator.java:33)\r\n    \tat org.springframework.cglib.core.DefaultGeneratorStrategy.generate(DefaultGeneratorStrategy.java:25)\r\n    \tat org.springframework.cglib.core.AbstractClassGenerator.create(AbstractClassGenerator.java:216)\r\n    \tat org.springframework.cglib.proxy.Enhancer.createHelper(Enhancer.java:377)\r\n    \tat org.springframework.cglib.proxy.Enhancer.createClass(Enhancer.java:317)\r\n    \tat org.springframework.aop.framework.ObjenesisCglibAopProxy.createProxyClassAndInstance(ObjenesisCglibAopProxy.java:57)\r\n    \tat org.springframework.aop.framework.CglibAopProxy.getProxy(CglibAopProxy.java:202)\r\n    \t... 31 more\r\n    \r\n    Exception in thread &quot;main&quot; org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;transferServiceImpl&#39;: Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: com.myprj.aop.service.FinalClass com.myprj.aop.service.TransferServiceImpl.finalClass; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;finalClass&#39; defined in class path resource [applicationContext.xml]: Initialization of bean failed; nested exception is org.springframework.aop.framework.AopConfigException: Could not generate CGLIB subclass of class [class com.myprj.aop.service.FinalClass]: Common causes of this problem include using a final class or a non-visible class; nested exception is java.lang.IllegalArgumentException: No visible constructors in class com.myprj.aop.service.FinalClass\r\n    \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:334)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1210)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:537)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:476)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:303)\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:299)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:755)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:757)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:480)\r\n    \tat org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:139)\r\n    \tat org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:83)\r\n    \tat com.myprj.aop.test.Main.main(Main.java:19)\r\n    Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: com.myprj.aop.service.FinalClass com.myprj.aop.service.TransferServiceImpl.finalClass; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;finalClass&#39; defined in class path resource [applicationContext.xml]: Initialization of bean failed; nested exception is org.springframework.aop.framework.AopConfigException: Could not generate CGLIB subclass of class [class com.myprj.aop.service.FinalClass]: Common causes of this problem include using a final class or a non-visible class; nested exception is java.lang.IllegalArgumentException: No visible constructors in class com.myprj.aop.service.FinalClass\r\n    \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:561)\r\n    \tat org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:88)\r\n    \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:331)\r\n    \t... 13 more\r\n    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;finalClass&#39; defined in class path resource [applicationContext.xml]: Initialization of bean failed; nested exception is org.springframework.aop.framework.AopConfigException: Could not generate CGLIB subclass of class [class com.myprj.aop.service.FinalClass]: Common causes of this problem include using a final class or a non-visible class; nested exception is java.lang.IllegalArgumentException: No visible constructors in class com.myprj.aop.service.FinalClass\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:547)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:476)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:303)\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:299)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1120)\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1044)\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:942)\r\n    \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:533)\r\n    \t... 15 more\r\n    Caused by: org.springframework.aop.framework.AopConfigException: Could not generate CGLIB subclass of class [class com.myprj.aop.service.FinalClass]: Common causes of this problem include using a final class or a non-visible class; nested exception is java.lang.IllegalArgumentException: No visible constructors in class com.myprj.aop.service.FinalClass\r\n    \tat org.springframework.aop.framework.CglibAopProxy.getProxy(CglibAopProxy.java:212)\r\n    \tat org.springframework.aop.framework.ProxyFactory.getProxy(ProxyFactory.java:109)\r\n    \tat org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.createProxy(AbstractAutoProxyCreator.java:447)\r\n    \tat org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.wrapIfNecessary(AbstractAutoProxyCreator.java:333)\r\n    \tat org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.postProcessAfterInitialization(AbstractAutoProxyCreator.java:293)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsAfterInitialization(AbstractAutowireCapableBeanFactory.java:422)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1579)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:539)\r\n    \t... 24 more\r\n    Caused by: java.lang.IllegalArgumentException: No visible constructors in class com.myprj.aop.service.FinalClass\r\n    \tat org.springframework.cglib.proxy.Enhancer.filterConstructors(Enhancer.java:531)\r\n    \tat org.springframework.cglib.proxy.Enhancer.generateClass(Enhancer.java:448)\r\n    \tat org.springframework.cglib.transform.TransformingClassGenerator.generateClass(TransformingClassGenerator.java:33)\r\n    \tat org.springframework.cglib.core.DefaultGeneratorStrategy.generate(DefaultGeneratorStrategy.java:25)\r\n    \tat org.springframework.cglib.core.AbstractClassGenerator.create(AbstractClassGenerator.java:216)\r\n    \tat org.springframework.cglib.proxy.Enhancer.createHelper(Enhancer.java:377)\r\n    \tat org.springframework.cglib.proxy.Enhancer.createClass(Enhancer.java:317)\r\n    \tat org.springframework.aop.framework.ObjenesisCglibAopProxy.createProxyClassAndInstance(ObjenesisCglibAopProxy.java:57)\r\n    \tat org.springframework.aop.framework.CglibAopProxy.getProxy(CglibAopProxy.java:202)\r\n    \t... 31 more\r\n\r\nThe inject injection is failing. After googling, many have suggested setter based injection. But when singleton class is created more operations are done in actual code. Also as per below link, this has been fixed in [Spring 4.0][1]. What is wrong with my code?\r\n\r\n\r\n  [1]: http://blog.codeleak.pl/2014/07/spring-4-cglib-based-proxy-classes-with-no-default-ctor.html\r\n","title":"Issue with Spring AOP and Final class throwing &quot;Could not generate CGLIB subclass&quot;","body":"<p>1) Below is the small project I have where I do want logging with SpringAOP. Using spring-aop-4.1.6.RELEASE.jar and below is LoggingAspect.java with few point cuts. </p>\n\n<pre><code>package com.myprj.aop.aspect;\n\nimport org.apache.commons.logging.Log;\nimport org.apache.commons.logging.LogFactory;\nimport org.aspectj.lang.JoinPoint;\nimport org.aspectj.lang.annotation.After;\nimport org.aspectj.lang.annotation.Aspect;\nimport org.aspectj.lang.annotation.Before;\nimport org.aspectj.lang.annotation.Pointcut;\nimport org.springframework.stereotype.Component;\n\n@Aspect\n@Component\npublic class LoggingAspect {\n    private final Log log = LogFactory.getLog(getClass());\n\n    @Before(\"logForAllMethods()\") // after advice with name pointcut that declared as name logForAllMethods()\n    public void beforeAdviceForAllMethods(JoinPoint jp) throws Throwable {\n        Object clazz = jp.getTarget().getClass().getName();\n        String methodName = jp.getSignature().getName();\n        log.info(\"Before Entering to Class \" + clazz + \" With Method Name \" + methodName);\n        // getting method parameter name\n        Object[] obj = jp.getArgs();\n        for (Object o : obj) {\n            if (o != null) {\n                log.info(\"Parameter Name...\" + o.toString());\n            } else {\n                log.info(\"\");\n            }\n        }\n\n    }\n\n    @After(\"logForAllMethods()\") // after advice with name pointcut that declared as name logForAllMethods()\n    public void afterAdviceForAllMethods(JoinPoint jp) throws Throwable {\n        Object clazz = jp.getTarget().getClass().getName();\n        String methodName = jp.getSignature().getName();\n        log.info(\"After Entring to Method \" + methodName + \" in Calss \" + clazz);\n    }\n\n    @Pointcut(\"execution(public * *(..))\")      // enable for all public methods\n    public void logForAllMethods() {\n    }\n}\n</code></pre>\n\n<p>Also below is the sample Service and ServiceImpl classes I have </p>\n\n<pre><code>package com.myprj.aop.service;\n\npublic interface TransferService {\n\n    void transfer(String accountA, String accountB, Long amount);\n\n    Double checkBalance(String account);\n\n    Long withdrawal(String account, Long amount);\n\n    void diposite(String account, Long amount);\n}\n\n\npackage com.myprj.aop.service;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.beans.factory.annotation.Qualifier;\nimport org.springframework.stereotype.Service;\n\n@Service\npublic class TransferServiceImpl implements TransferService {\n\n    @Autowired\n    @Qualifier(\"finalClass\")\n    FinalClass finalClass;\n\n    @Override\n    public void transfer(String accountA, String accountB, Long amount) {\n        System.out.println(amount + \" Amount has been tranfered from \" + accountA + \" to \" + accountB);\n    }\n\n    @Override\n    public Double checkBalance(String account) {\n        System.out.println(\"Available balance: 50000\");\n        finalClass.toString();\n        return new Double(50000);\n    }\n\n    @Override\n    public Long withdrawal(String account, Long amount) {\n        System.out.println(\"Withdrawal amount: \" + amount);\n        finalClass.toString();\n        return amount;\n    }\n\n    @Override\n    public void diposite(String account, Long amount) {\n        System.out.println(amount + \" Amount has been diposited to \" + account);\n        finalClass.toString();\n    }\n\n}\n</code></pre>\n\n<p>Also, I have a Singleton class where few methods need to be invoked like below.</p>\n\n<pre><code>package com.myprj.aop.service;\n\npublic class FinalClass {\n\n    private String constructorParam;\n\n    private FinalClass(String param) {\n        constructorParam = param;\n    }\n\n    @Override\n    public String toString() {\n        System.out.println(constructorParam);\n        return constructorParam;\n    }\n}\n</code></pre>\n\n<p>Below is applicationContext.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:util=\"http://www.springframework.org/schema/util\"\n    xmlns:context=\"http://www.springframework.org/schema/context\"\n    xmlns:aop=\"http://www.springframework.org/schema/aop\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n        http://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/context\n        http://www.springframework.org/schema/context/spring-context.xsd\n        http://www.springframework.org/schema/util\n        http://www.springframework.org/schema/util/spring-util.xsd\n        http://www.springframework.org/schema/aop\n        http://www.springframework.org/schema/aop/spring-aop-3.0.xsd\"&gt;\n    &lt;context:component-scan base-package=\"com.myprj.aop.*\" /&gt;       \n    &lt;bean id=\"finalClass\" class=\"com.myprj.aop.service.FinalClass\"&gt;\n        &lt;constructor-arg value=\"constructorArg\"&gt;&lt;/constructor-arg&gt;\n    &lt;/bean&gt;\n    &lt;aop:aspectj-autoproxy/&gt;    \n&lt;/beans&gt;\n</code></pre>\n\n<p>Main class:</p>\n\n<pre><code>package com.myprj.aop.test;\n\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.ConfigurableApplicationContext;\nimport org.springframework.context.annotation.AnnotationConfigApplicationContext;\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\n\nimport com.myprj.aop.config.AppConfig;\nimport com.myprj.aop.service.TransferService;\n\n\npublic class Main {\n\n    /**\n     * @param args\n     */\n    public static void main(String[] args) {\n        // ConfigurableApplicationContext applicationContext = new AnnotationConfigApplicationContext(AppConfig.class);\n        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(\"applicationContext.xml\");\n        TransferService transferService = applicationContext.getBean(TransferService.class);\n        transferService.transfer(\"accountA\", \"accountB\", 50000l);\n        transferService.checkBalance(\"accountA\");\n        transferService.diposite(\"accountA\", 50000l);\n        transferService.withdrawal(\"accountB\", 40000l);\n        //applicationContext.close();\n    }\n\n}\n</code></pre>\n\n<p>Get below error</p>\n\n<pre><code>WARNING: Exception encountered during context initialization - cancelling refresh attempt\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transferServiceImpl': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: com.myprj.aop.service.FinalClass com.myprj.aop.service.TransferServiceImpl.finalClass; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'finalClass' defined in class path resource [applicationContext.xml]: Initialization of bean failed; nested exception is org.springframework.aop.framework.AopConfigException: Could not generate CGLIB subclass of class [class com.myprj.aop.service.FinalClass]: Common causes of this problem include using a final class or a non-visible class; nested exception is java.lang.IllegalArgumentException: No visible constructors in class com.myprj.aop.service.FinalClass\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:334)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1210)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:537)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:476)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:303)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:299)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:755)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:757)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:480)\n    at org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:139)\n    at org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:83)\n    at com.myprj.aop.test.Main.main(Main.java:19)\nCaused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: com.myprj.aop.service.FinalClass com.myprj.aop.service.TransferServiceImpl.finalClass; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'finalClass' defined in class path resource [applicationContext.xml]: Initialization of bean failed; nested exception is org.springframework.aop.framework.AopConfigException: Could not generate CGLIB subclass of class [class com.myprj.aop.service.FinalClass]: Common causes of this problem include using a final class or a non-visible class; nested exception is java.lang.IllegalArgumentException: No visible constructors in class com.myprj.aop.service.FinalClass\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:561)\n    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:88)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:331)\n    ... 13 more\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'finalClass' defined in class path resource [applicationContext.xml]: Initialization of bean failed; nested exception is org.springframework.aop.framework.AopConfigException: Could not generate CGLIB subclass of class [class com.myprj.aop.service.FinalClass]: Common causes of this problem include using a final class or a non-visible class; nested exception is java.lang.IllegalArgumentException: No visible constructors in class com.myprj.aop.service.FinalClass\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:547)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:476)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:303)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:299)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1120)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1044)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:942)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:533)\n    ... 15 more\nCaused by: org.springframework.aop.framework.AopConfigException: Could not generate CGLIB subclass of class [class com.myprj.aop.service.FinalClass]: Common causes of this problem include using a final class or a non-visible class; nested exception is java.lang.IllegalArgumentException: No visible constructors in class com.myprj.aop.service.FinalClass\n    at org.springframework.aop.framework.CglibAopProxy.getProxy(CglibAopProxy.java:212)\n    at org.springframework.aop.framework.ProxyFactory.getProxy(ProxyFactory.java:109)\n    at org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.createProxy(AbstractAutoProxyCreator.java:447)\n    at org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.wrapIfNecessary(AbstractAutoProxyCreator.java:333)\n    at org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.postProcessAfterInitialization(AbstractAutoProxyCreator.java:293)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsAfterInitialization(AbstractAutowireCapableBeanFactory.java:422)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1579)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:539)\n    ... 24 more\nCaused by: java.lang.IllegalArgumentException: No visible constructors in class com.myprj.aop.service.FinalClass\n    at org.springframework.cglib.proxy.Enhancer.filterConstructors(Enhancer.java:531)\n    at org.springframework.cglib.proxy.Enhancer.generateClass(Enhancer.java:448)\n    at org.springframework.cglib.transform.TransformingClassGenerator.generateClass(TransformingClassGenerator.java:33)\n    at org.springframework.cglib.core.DefaultGeneratorStrategy.generate(DefaultGeneratorStrategy.java:25)\n    at org.springframework.cglib.core.AbstractClassGenerator.create(AbstractClassGenerator.java:216)\n    at org.springframework.cglib.proxy.Enhancer.createHelper(Enhancer.java:377)\n    at org.springframework.cglib.proxy.Enhancer.createClass(Enhancer.java:317)\n    at org.springframework.aop.framework.ObjenesisCglibAopProxy.createProxyClassAndInstance(ObjenesisCglibAopProxy.java:57)\n    at org.springframework.aop.framework.CglibAopProxy.getProxy(CglibAopProxy.java:202)\n    ... 31 more\n\nException in thread \"main\" org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transferServiceImpl': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: com.myprj.aop.service.FinalClass com.myprj.aop.service.TransferServiceImpl.finalClass; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'finalClass' defined in class path resource [applicationContext.xml]: Initialization of bean failed; nested exception is org.springframework.aop.framework.AopConfigException: Could not generate CGLIB subclass of class [class com.myprj.aop.service.FinalClass]: Common causes of this problem include using a final class or a non-visible class; nested exception is java.lang.IllegalArgumentException: No visible constructors in class com.myprj.aop.service.FinalClass\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:334)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1210)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:537)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:476)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:303)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:299)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:755)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:757)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:480)\n    at org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:139)\n    at org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:83)\n    at com.myprj.aop.test.Main.main(Main.java:19)\nCaused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: com.myprj.aop.service.FinalClass com.myprj.aop.service.TransferServiceImpl.finalClass; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'finalClass' defined in class path resource [applicationContext.xml]: Initialization of bean failed; nested exception is org.springframework.aop.framework.AopConfigException: Could not generate CGLIB subclass of class [class com.myprj.aop.service.FinalClass]: Common causes of this problem include using a final class or a non-visible class; nested exception is java.lang.IllegalArgumentException: No visible constructors in class com.myprj.aop.service.FinalClass\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:561)\n    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:88)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:331)\n    ... 13 more\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'finalClass' defined in class path resource [applicationContext.xml]: Initialization of bean failed; nested exception is org.springframework.aop.framework.AopConfigException: Could not generate CGLIB subclass of class [class com.myprj.aop.service.FinalClass]: Common causes of this problem include using a final class or a non-visible class; nested exception is java.lang.IllegalArgumentException: No visible constructors in class com.myprj.aop.service.FinalClass\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:547)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:476)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:303)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:299)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1120)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1044)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:942)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:533)\n    ... 15 more\nCaused by: org.springframework.aop.framework.AopConfigException: Could not generate CGLIB subclass of class [class com.myprj.aop.service.FinalClass]: Common causes of this problem include using a final class or a non-visible class; nested exception is java.lang.IllegalArgumentException: No visible constructors in class com.myprj.aop.service.FinalClass\n    at org.springframework.aop.framework.CglibAopProxy.getProxy(CglibAopProxy.java:212)\n    at org.springframework.aop.framework.ProxyFactory.getProxy(ProxyFactory.java:109)\n    at org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.createProxy(AbstractAutoProxyCreator.java:447)\n    at org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.wrapIfNecessary(AbstractAutoProxyCreator.java:333)\n    at org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.postProcessAfterInitialization(AbstractAutoProxyCreator.java:293)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsAfterInitialization(AbstractAutowireCapableBeanFactory.java:422)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1579)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:539)\n    ... 24 more\nCaused by: java.lang.IllegalArgumentException: No visible constructors in class com.myprj.aop.service.FinalClass\n    at org.springframework.cglib.proxy.Enhancer.filterConstructors(Enhancer.java:531)\n    at org.springframework.cglib.proxy.Enhancer.generateClass(Enhancer.java:448)\n    at org.springframework.cglib.transform.TransformingClassGenerator.generateClass(TransformingClassGenerator.java:33)\n    at org.springframework.cglib.core.DefaultGeneratorStrategy.generate(DefaultGeneratorStrategy.java:25)\n    at org.springframework.cglib.core.AbstractClassGenerator.create(AbstractClassGenerator.java:216)\n    at org.springframework.cglib.proxy.Enhancer.createHelper(Enhancer.java:377)\n    at org.springframework.cglib.proxy.Enhancer.createClass(Enhancer.java:317)\n    at org.springframework.aop.framework.ObjenesisCglibAopProxy.createProxyClassAndInstance(ObjenesisCglibAopProxy.java:57)\n    at org.springframework.aop.framework.CglibAopProxy.getProxy(CglibAopProxy.java:202)\n    ... 31 more\n</code></pre>\n\n<p>The inject injection is failing. After googling, many have suggested setter based injection. But when singleton class is created more operations are done in actual code. Also as per below link, this has been fixed in <a href=\"http://blog.codeleak.pl/2014/07/spring-4-cglib-based-proxy-classes-with-no-default-ctor.html\" rel=\"nofollow noreferrer\">Spring 4.0</a>. What is wrong with my code?</p>\n"},{"tags":["java","azure","azure-keyvault"],"answers":[{"comments":[{"owner":{"account_id":9797098,"reputation":582,"user_id":7259705,"display_name":"Jonathan Hagen"},"score":0,"creation_date":1670332076,"post_id":74693523,"comment_id":131847784,"body_markdown":"I am actually instantiating SecretClient object in the method so how can I mock this object?","body":"I am actually instantiating SecretClient object in the method so how can I mock this object?"}],"tags":[],"owner":{"account_id":27055146,"reputation":11,"user_id":20607967,"display_name":"Referium"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1670269241,"creation_date":1670269241,"answer_id":74693523,"question_id":74693342,"body_markdown":"You can use a mocking framework such as Mockito to mock the SecretClient object and its methods. For example, you can create a mock object of the SecretClient class and set its getSecret method to return the expected string value. You can then use this mock object in your unit test instead of the actual SecretClient object.\r\n","title":"How to unit test Azure key vault (DefaultAzureCredentialBuilder) in java","body":"<p>You can use a mocking framework such as Mockito to mock the SecretClient object and its methods. For example, you can create a mock object of the SecretClient class and set its getSecret method to return the expected string value. You can then use this mock object in your unit test instead of the actual SecretClient object.</p>\n"},{"tags":[],"owner":{"account_id":1777043,"reputation":43,"user_id":1620629,"display_name":"Aron"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683119838,"creation_date":1683119838,"answer_id":76164315,"question_id":74693342,"body_markdown":"SecretClient is final, so you cannot mock it using Mockito.\r\nI did something like this:\r\n\r\n\r\n    @Bean\r\n    public SecretClient secretClient() {\r\n      return new SecretClientBuilder()\r\n              .vaultUrl(&quot;https://mycompany.com&quot;)\r\n              .pipeline(new HttpPipelineBuilder().httpClient() {\r\n          @Override\r\n          public Mono&lt;HttpResponse&gt; send(HttpRequest request) {\r\n              return null;\r\n          }\r\n      }).build()).buildClient();\r\n    }\r\n\r\n","title":"How to unit test Azure key vault (DefaultAzureCredentialBuilder) in java","body":"<p>SecretClient is final, so you cannot mock it using Mockito.\nI did something like this:</p>\n<pre><code>@Bean\npublic SecretClient secretClient() {\n  return new SecretClientBuilder()\n          .vaultUrl(&quot;https://mycompany.com&quot;)\n          .pipeline(new HttpPipelineBuilder().httpClient() {\n      @Override\n      public Mono&lt;HttpResponse&gt; send(HttpRequest request) {\n          return null;\n      }\n  }).build()).buildClient();\n}\n</code></pre>\n"}],"owner":{"account_id":9797098,"reputation":582,"user_id":7259705,"display_name":"Jonathan Hagen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":243,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1692858952,"creation_date":1670268144,"question_id":74693342,"body_markdown":"I have implemented key vault service for my java class like this:\r\n```\r\n    private final String keyVaultUrl;\r\n\r\n    public KeyVaultServiceImpl(String keyVaultUrl) {\r\n        this.keyVaultUrl = keyVaultUrl;\r\n    }\r\n\r\n    @Override\r\n    public Mono&lt;String&gt; getSecret(String key) {\r\n        SecretClient secretClient = new SecretClientBuilder()\r\n                .vaultUrl(keyVaultUrl)\r\n                .credential(new DefaultAzureCredentialBuilder().build())\r\n                .buildClient();\r\n        KeyVaultSecret retrievedSecret = secretClient.getSecret(key);\r\n        return Mono.just(retrievedSecret.getValue());\r\n    }\r\n```\r\nI am able to connect to my key vault in Azure and get the corresponding values. \r\n\r\nNow I want to unit test this. My approach is that when `secretClient.getSecret(someString)`, then it returns some expected string value I set in the unit test. However, I am not sure how to mock `SecretClient` object which I am building in the method. How should I approach this?","title":"How to unit test Azure key vault (DefaultAzureCredentialBuilder) in java","body":"<p>I have implemented key vault service for my java class like this:</p>\n<pre><code>    private final String keyVaultUrl;\n\n    public KeyVaultServiceImpl(String keyVaultUrl) {\n        this.keyVaultUrl = keyVaultUrl;\n    }\n\n    @Override\n    public Mono&lt;String&gt; getSecret(String key) {\n        SecretClient secretClient = new SecretClientBuilder()\n                .vaultUrl(keyVaultUrl)\n                .credential(new DefaultAzureCredentialBuilder().build())\n                .buildClient();\n        KeyVaultSecret retrievedSecret = secretClient.getSecret(key);\n        return Mono.just(retrievedSecret.getValue());\n    }\n</code></pre>\n<p>I am able to connect to my key vault in Azure and get the corresponding values.</p>\n<p>Now I want to unit test this. My approach is that when <code>secretClient.getSecret(someString)</code>, then it returns some expected string value I set in the unit test. However, I am not sure how to mock <code>SecretClient</code> object which I am building in the method. How should I approach this?</p>\n"},{"tags":["java","spring-boot","spring-security","saml","saml-2.0"],"owner":{"account_id":14924783,"reputation":161,"user_id":10776001,"display_name":"Heyyou"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":293,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":0,"score":6,"last_activity_date":1692858887,"creation_date":1692343902,"question_id":76927269,"body_markdown":"I am upgrading the current Spring Security SAML extension project to SAML2 authentication. I found a question where my sample existing security configuration looks like [Existing Security Configuration][1].\r\n\r\nThere is an official documentation from Spring which is mentioned in the answer. But, I would like to better understand which part of code is getting replaced by which part in the new implementation with some working examples.\r\n\r\nKindly please help. Thanks in advance.\r\n\r\n  [1]: https://stackoverflow.com/questions/75383326/spring-3-samlprocessingfilter-authenticationmanager-must-be-specified","title":"SAML2 Implementation with Spring Boot Version 3.X and Java 17","body":"<p>I am upgrading the current Spring Security SAML extension project to SAML2 authentication. I found a question where my sample existing security configuration looks like <a href=\"https://stackoverflow.com/questions/75383326/spring-3-samlprocessingfilter-authenticationmanager-must-be-specified\">Existing Security Configuration</a>.</p>\n<p>There is an official documentation from Spring which is mentioned in the answer. But, I would like to better understand which part of code is getting replaced by which part in the new implementation with some working examples.</p>\n<p>Kindly please help. Thanks in advance.</p>\n"},{"tags":["java","xml","cxf","quarkus","xml-dsig"],"comments":[{"owner":{"account_id":2922228,"reputation":61034,"user_id":2504224,"display_name":"geoand"},"score":0,"creation_date":1692863805,"post_id":76966727,"comment_id":135682428,"body_markdown":"Have you tried passing `-Djava.util.logging.manager=org.jboss.logmanager.LogManager` ?","body":"Have you tried passing <code>-Djava.util.logging.manager=org.jboss.logmanager.LogManager</code> ?"},{"owner":{"account_id":8875620,"reputation":46,"user_id":6627867,"display_name":"xperjon"},"score":0,"creation_date":1692866630,"post_id":76966727,"comment_id":135683021,"body_markdown":"Hi! If I set the system property on command line I get: &quot;Could not load Logmanager &quot;org.jboss.logmanager.LogManager java.lang.ClassNotFoundException: org.jboss.logmanager.LogManager&quot;\nIf I set it programatically with System.setProperty(&quot;java.util.logging.manager&quot;, &quot;org.jboss.logmanager.LogManager&quot;); I still get no logs.","body":"Hi! If I set the system property on command line I get: &quot;Could not load Logmanager &quot;org.jboss.logmanager.LogManager java.lang.ClassNotFoundException: org.jboss.logmanager.LogManager&quot; If I set it programatically with System.setProperty(&quot;java.util.logging.manager&quot;, &quot;org.jboss.logmanager.LogManager&quot;); I still get no logs."},{"owner":{"account_id":2922228,"reputation":61034,"user_id":2504224,"display_name":"geoand"},"score":0,"creation_date":1692875200,"post_id":76966727,"comment_id":135684705,"body_markdown":"The CNFE is very odd...","body":"The CNFE is very odd..."}],"owner":{"account_id":8875620,"reputation":46,"user_id":6627867,"display_name":"xperjon"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692858773,"creation_date":1692858773,"question_id":76966727,"body_markdown":"I&#39;m trying to use the Java XML Digital Signature API (https://www.oracle.com/technical-resources/articles/java/dig-signature-api.html) together with Quarkus 3.2.4. As stated in the Oracle article to enable debug logging you have to set the following log levels: \r\n\r\n```\r\norg.jcp.xml.dsig.internal.level = FINER\r\ncom.sun.org.apache.xml.internal.security.level = FINER\r\n```\r\n\r\nFrom that I assume JDK java.util.logging (JUL) is used. From the Quarkus logging documentation (https://quarkus.io/guides/logging) I understand that this should be handled by the JBoss Log Manager. No need for extra dependencies - just configure log levels in application.properties. \r\nBut when I try with the following:\r\n\r\n```\r\nquarkus.log.level=TRACE\r\nquarkus.log.min-level=TRACE\r\n\r\nquarkus.log.category.&quot;org.jcp.xml.dsig.internal&quot;.level=TRACE\r\nquarkus.log.category.&quot;org.jcp.xml.dsig.internal&quot;.min-level=TRACE\r\nquarkus.log.category.&quot;com.sun.org.apache.xml.internal.security&quot;.level=TRACE\r\nquarkus.log.category.&quot;com.sun.org.apache.xml.internal.security&quot;.min-level=TRACE\r\n```\r\nI only get debug logs from quarkus itself and nothing from org.jcp.xml.dsig.internal or com.sun.org.apache.xml.internal.security. \r\n\r\nI&#39;m using java 17.\r\n\r\nAnyone have an idea what could be the problem?\r\n\r\n\r\nI&#39;ve made a reproducer here: https://github.com/xperjon/quarkus-xml-dsig","title":"Quarkus - No DEBUG logs appear from Java XML Digital Signature API","body":"<p>I'm trying to use the Java XML Digital Signature API (<a href=\"https://www.oracle.com/technical-resources/articles/java/dig-signature-api.html\" rel=\"nofollow noreferrer\">https://www.oracle.com/technical-resources/articles/java/dig-signature-api.html</a>) together with Quarkus 3.2.4. As stated in the Oracle article to enable debug logging you have to set the following log levels:</p>\n<pre><code>org.jcp.xml.dsig.internal.level = FINER\ncom.sun.org.apache.xml.internal.security.level = FINER\n</code></pre>\n<p>From that I assume JDK java.util.logging (JUL) is used. From the Quarkus logging documentation (<a href=\"https://quarkus.io/guides/logging\" rel=\"nofollow noreferrer\">https://quarkus.io/guides/logging</a>) I understand that this should be handled by the JBoss Log Manager. No need for extra dependencies - just configure log levels in application.properties.\nBut when I try with the following:</p>\n<pre><code>quarkus.log.level=TRACE\nquarkus.log.min-level=TRACE\n\nquarkus.log.category.&quot;org.jcp.xml.dsig.internal&quot;.level=TRACE\nquarkus.log.category.&quot;org.jcp.xml.dsig.internal&quot;.min-level=TRACE\nquarkus.log.category.&quot;com.sun.org.apache.xml.internal.security&quot;.level=TRACE\nquarkus.log.category.&quot;com.sun.org.apache.xml.internal.security&quot;.min-level=TRACE\n</code></pre>\n<p>I only get debug logs from quarkus itself and nothing from org.jcp.xml.dsig.internal or com.sun.org.apache.xml.internal.security.</p>\n<p>I'm using java 17.</p>\n<p>Anyone have an idea what could be the problem?</p>\n<p>I've made a reproducer here: <a href=\"https://github.com/xperjon/quarkus-xml-dsig\" rel=\"nofollow noreferrer\">https://github.com/xperjon/quarkus-xml-dsig</a></p>\n"},{"tags":["java","android","cassandra"],"comments":[{"owner":{"account_id":5357170,"reputation":14233,"user_id":4269535,"display_name":"Erick Ramirez"},"score":0,"creation_date":1692825446,"post_id":76963278,"comment_id":135678514,"body_markdown":"To help understand the issue better, please post (1) the full error message + (2) the full stack trace. Cheers!","body":"To help understand the issue better, please post (1) the full error message + (2) the full stack trace. Cheers!"},{"owner":{"account_id":14411493,"reputation":946,"user_id":10410162,"display_name":"Madhavan"},"score":0,"creation_date":1692825467,"post_id":76963278,"comment_id":135678515,"body_markdown":"Did you try printing the full path, stacktrace, etc?","body":"Did you try printing the full path, stacktrace, etc?"},{"owner":{"account_id":14636270,"reputation":133,"user_id":10570318,"display_name":"BeatEngine"},"score":0,"creation_date":1692858266,"post_id":76963278,"comment_id":135681453,"body_markdown":"I edited my question and added the full stacktrace.","body":"I edited my question and added the full stacktrace."}],"owner":{"account_id":14636270,"reputation":133,"user_id":10570318,"display_name":"BeatEngine"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692858163,"creation_date":1692808208,"question_id":76963278,"body_markdown":"I have the problem in android, that I got a JKS not found (driver exception) for the same file, where a local UnitTest doesn&#39;t complain.\r\n\r\nVersion: **com.datastax.oss:java-driver-core:4.17.0** (older not working too)\r\n\r\nI think the problem could relate to the different location of JavaKeystore on both OS.\r\n\r\ncom.datastax.oss.driver.api.core.DriverExecutionException\r\ncause = java.security.KeyStoreException: JKS not found\r\n\r\ncom.datastax.oss.driver.internal.core.util.concurrent.CompletableFutures.getUninterruptibly(CompletableFutures.java:152)\r\ncom.datastax.oss.driver.api.core.session.SessionBuilder.build(SessionBuilder.java:835)\r\n...getSession(Datastax.java:105)\r\n\r\n\r\n\r\nThe following code only works on local machine not on android:\r\n\r\n\r\n    // Create the CqlSession object:\r\n        try {\r\n            CqlSession session = CqlSession.builder().withCloudSecureConnectBundle(bis)\r\n                    .withAuthCredentials(\r\n                      CryptoChain.byteArrayToString(CryptoChain.encryptBlockwise(Datastax.class.getName().getBytes(), ush))\r\n                     ,CryptoChain.byteArrayToString(CryptoChain.encryptBlockwise(Datastax.class.getName().getBytes(), pwh)))\r\n                    .build();\r\n            return session;\r\n        }catch (final Exception e)\r\n        {\r\n            throw new RuntimeException(e);\r\n        }\r\n\r\nThe full stacktrace:\r\n\r\n&gt; E/AndroidRuntime: FATAL EXCEPTION: main\r\n&gt;     Process: com.abc.testapp, PID: 13518\r\n&gt;     java.lang.RuntimeException: Unable to start activity ComponentInfo{com.abc.testapp/com.abc.testapp.MainActivity}:\r\n&gt; java.lang.RuntimeException:\r\n&gt; com.datastax.oss.driver.api.core.DriverExecutionException\r\n&gt;         at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3455)\r\n&gt;         at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3598)\r\n&gt;         at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:83)\r\n&gt;         at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\r\n&gt;         at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\r\n&gt;         at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2164)\r\n&gt;         at android.os.Handler.dispatchMessage(Handler.java:107)\r\n&gt;         at android.os.Looper.loop(Looper.java:241)\r\n&gt;         at android.app.ActivityThread.main(ActivityThread.java:7582)\r\n&gt;         at java.lang.reflect.Method.invoke(Native Method)\r\n&gt;         at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:492)\r\n&gt;         at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:941)\r\n&gt;      Caused by: java.lang.RuntimeException: com.datastax.oss.driver.api.core.DriverExecutionException\r\n&gt;         at com.abc.testapp.dataapi.Datastax.getSession(Datastax.java:116)\r\n&gt;         at com.abc.testapp.MainActivity.onCreate(MainActivity.java:636)\r\n&gt;         at android.app.Activity.performCreate(Activity.java:7822)\r\n&gt;         at android.app.Activity.performCreate(Activity.java:7811)\r\n&gt;         at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1328)\r\n&gt;         at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3430)\r\n&gt;         at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3598)&#160;\r\n&gt;         at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:83)&#160;\r\n&gt;         at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)&#160;\r\n&gt;         at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)&#160;\r\n&gt;         at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2164)&#160;\r\n&gt;         at android.os.Handler.dispatchMessage(Handler.java:107)&#160;\r\n&gt;         at android.os.Looper.loop(Looper.java:241)&#160;\r\n&gt;         at android.app.ActivityThread.main(ActivityThread.java:7582)&#160;\r\n&gt;         at java.lang.reflect.Method.invoke(Native Method)&#160;\r\n&gt;         at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:492)&#160;\r\n&gt;         at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:941)&#160;\r\n&gt;      Caused by: com.datastax.oss.driver.api.core.DriverExecutionException\r\n&gt;         at com.datastax.oss.driver.internal.core.util.concurrent.CompletableFutures.getUninterruptibly(CompletableFutures.java:152)\r\n&gt;         at com.datastax.oss.driver.api.core.session.SessionBuilder.build(SessionBuilder.java:835)\r\n&gt;         at com.abc.testapp.dataapi.Datastax.getSession(Datastax.java:111)\r\n&gt;         at com.abc.testapp.MainActivity.onCreate(MainActivity.java:636)&#160;\r\n&gt;         at android.app.Activity.performCreate(Activity.java:7822)&#160;\r\n&gt;         at android.app.Activity.performCreate(Activity.java:7811)&#160;\r\n&gt;         at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1328)&#160;\r\n&gt;         at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3430)&#160;\r\n&gt;         at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3598)&#160;\r\n&gt;         at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:83)&#160;\r\n&gt;         at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)&#160;\r\n&gt;         at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)&#160;\r\n&gt;         at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2164)&#160;\r\n&gt;         at android.os.Handler.dispatchMessage(Handler.java:107)&#160;\r\n&gt;         at android.os.Looper.loop(Looper.java:241)&#160;\r\n&gt;         at android.app.ActivityThread.main(ActivityThread.java:7582)&#160;\r\n&gt;         at java.lang.reflect.Method.invoke(Native Method)&#160;\r\n&gt;         at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:492)&#160;\r\n&gt;         at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:941)&#160;\r\n&gt;      Caused by: java.security.KeyStoreException: JKS not found\r\n&gt;         at java.security.KeyStore.getInstance(KeyStore.java:890)\r\n&gt;         at com.datastax.oss.driver.internal.core.config.cloud.CloudConfigFactory.createKeyManagerFactory(CloudConfigFactory.java:202)\r\n&gt;         at com.datastax.oss.driver.internal.core.config.cloud.CloudConfigFactory.createSslContext(CloudConfigFactory.java:191)\r\n&gt;         at com.datastax.oss.driver.internal.core.config.cloud.CloudConfigFactory.createCloudConfig(CloudConfigFactory.java:129)\r\n&gt;         at com.datastax.oss.driver.api.core.session.SessionBuilder.buildDefaultSessionAsync(SessionBuilder.java:876)\r\n&gt;         at com.datastax.oss.driver.api.core.session.SessionBuilder.buildAsync(SessionBuilder.java:817)\r\n&gt;         at com.datastax.oss.driver.api.core.session.SessionBuilder.build(SessionBuilder.java:835)&#160;\r\n&gt;         at com.abc.testapp.dataapi.Datastax.getSession(Datastax.java:111)&#160;\r\n&gt;         at com.abc.testapp.MainActivity.onCreate(MainActivity.java:636)&#160;\r\n&gt;         at android.app.Activity.performCreate(Activity.java:7822)&#160;\r\n&gt;         at android.app.Activity.performCreate(Activity.java:7811)&#160;\r\n&gt;         at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1328)&#160;\r\n&gt;         at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3430)&#160;\r\n&gt;         at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3598)&#160;\r\n&gt;         at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:83)&#160;\r\n&gt;         at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)&#160;\r\n&gt;         at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)&#160;\r\n&gt;         at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2164)&#160;\r\n&gt;         at android.os.Handler.dispatchMessage(Handler.java:107)&#160;\r\n&gt;         at android.os.Looper.loop(Looper.java:241)&#160;\r\n&gt;         at android.app.ActivityThread.main(ActivityThread.java:7582)&#160;\r\n&gt;         at java.lang.reflect.Method.invoke(Native Method)&#160;\r\n&gt;         at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:492)&#160;\r\n&gt;         at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:941)&#160;\r\n&gt;      Caused by: java.security.NoSuchAlgorithmException: JKS KeyStore not available\r\n&gt;         at sun.security.jca.GetInstance.getInstance(GetInstance.java:159)\r\n&gt;         at java.security.Security.getImpl(Security.java:628)\r\n&gt;         at java.security.KeyStore.getInstance(KeyStore.java:887)\r\n&gt;         at com.datastax.oss.driver.internal.core.config.cloud.CloudConfigFactory.createKeyManagerFactory(CloudConfigFactory.java:202)&#160;\r\n&gt;         at com.datastax.oss.driver.internal.core.config.cloud.CloudConfigFactory.createSslContext(CloudConfigFactory.java:191)&#160;\r\n&gt;         at com.datastax.oss.driver.internal.core.config.cloud.CloudConfigFactory.createCloudConfig(CloudConfigFactory.java:129)&#160;\r\n&gt;         at com.datastax.oss.driver.api.core.session.SessionBuilder.buildDefaultSessionAsync(SessionBuilder.java:876)&#160;\r\n&gt;         at com.datastax.oss.driver.api.core.session.SessionBuilder.buildAsync(SessionBuilder.java:817)&#160;\r\n&gt;         at com.datastax.oss.driver.api.core.session.SessionBuilder.build(SessionBuilder.java:835)&#160;\r\n&gt;         at com.abc.testapp.dataapi.Datastax.getSession(Datastax.java:111)&#160;\r\n&gt;         at com.abc.testapp.MainActivity.onCreate(MainActivity.java:636)&#160;\r\n&gt;         at android.app.Activity.performCreate(Activity.java:7822)&#160;\r\n&gt;         at android.app.Activity.performCreate(Activity.java:7811)&#160;\r\n&gt;         at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1328)&#160;\r\n&gt;         at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3430)&#160;\r\n&gt;         at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3598)&#160;\r\n&gt;         at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:83)&#160;\r\n&gt;         at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)&#160;\r\n&gt;         at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)&#160;\r\n&gt;         at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2164)&#160;\r\n&gt;         at android.os.Handler.dispatchMessage(Handler.java:107)&#160;\r\n&gt;         at android.os.Looper.loop(Looper.java:241)&#160;\r\n&gt;         at android.app.ActivityThread.main(ActivityThread.java:7582)&#160;\r\n&gt;         at java.lang.reflect.Method.invoke(Native Method)&#160;\r\n&gt;         at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:492)&#160;\r\n&gt;         at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:941)","title":"Different behaviour of Cassandra java driver on android and other os","body":"<p>I have the problem in android, that I got a JKS not found (driver exception) for the same file, where a local UnitTest doesn't complain.</p>\n<p>Version: <strong>com.datastax.oss:java-driver-core:4.17.0</strong> (older not working too)</p>\n<p>I think the problem could relate to the different location of JavaKeystore on both OS.</p>\n<p>com.datastax.oss.driver.api.core.DriverExecutionException\ncause = java.security.KeyStoreException: JKS not found</p>\n<p>com.datastax.oss.driver.internal.core.util.concurrent.CompletableFutures.getUninterruptibly(CompletableFutures.java:152)\ncom.datastax.oss.driver.api.core.session.SessionBuilder.build(SessionBuilder.java:835)\n...getSession(Datastax.java:105)</p>\n<p>The following code only works on local machine not on android:</p>\n<pre><code>// Create the CqlSession object:\n    try {\n        CqlSession session = CqlSession.builder().withCloudSecureConnectBundle(bis)\n                .withAuthCredentials(\n                  CryptoChain.byteArrayToString(CryptoChain.encryptBlockwise(Datastax.class.getName().getBytes(), ush))\n                 ,CryptoChain.byteArrayToString(CryptoChain.encryptBlockwise(Datastax.class.getName().getBytes(), pwh)))\n                .build();\n        return session;\n    }catch (final Exception e)\n    {\n        throw new RuntimeException(e);\n    }\n</code></pre>\n<p>The full stacktrace:</p>\n<blockquote>\n<p>E/AndroidRuntime: FATAL EXCEPTION: main\nProcess: com.abc.testapp, PID: 13518\njava.lang.RuntimeException: Unable to start activity ComponentInfo{com.abc.testapp/com.abc.testapp.MainActivity}:\njava.lang.RuntimeException:\ncom.datastax.oss.driver.api.core.DriverExecutionException\nat android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3455)\nat android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3598)\nat android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:83)\nat android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\nat android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\nat android.app.ActivityThread$H.handleMessage(ActivityThread.java:2164)\nat android.os.Handler.dispatchMessage(Handler.java:107)\nat android.os.Looper.loop(Looper.java:241)\nat android.app.ActivityThread.main(ActivityThread.java:7582)\nat java.lang.reflect.Method.invoke(Native Method)\nat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:492)\nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:941)\nCaused by: java.lang.RuntimeException: com.datastax.oss.driver.api.core.DriverExecutionException\nat com.abc.testapp.dataapi.Datastax.getSession(Datastax.java:116)\nat com.abc.testapp.MainActivity.onCreate(MainActivity.java:636)\nat android.app.Activity.performCreate(Activity.java:7822)\nat android.app.Activity.performCreate(Activity.java:7811)\nat android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1328)\nat android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3430)\nat android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3598) \nat android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:83) \nat android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135) \nat android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95) \nat android.app.ActivityThread$H.handleMessage(ActivityThread.java:2164) \nat android.os.Handler.dispatchMessage(Handler.java:107) \nat android.os.Looper.loop(Looper.java:241) \nat android.app.ActivityThread.main(ActivityThread.java:7582) \nat java.lang.reflect.Method.invoke(Native Method) \nat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:492) \nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:941) \nCaused by: com.datastax.oss.driver.api.core.DriverExecutionException\nat com.datastax.oss.driver.internal.core.util.concurrent.CompletableFutures.getUninterruptibly(CompletableFutures.java:152)\nat com.datastax.oss.driver.api.core.session.SessionBuilder.build(SessionBuilder.java:835)\nat com.abc.testapp.dataapi.Datastax.getSession(Datastax.java:111)\nat com.abc.testapp.MainActivity.onCreate(MainActivity.java:636) \nat android.app.Activity.performCreate(Activity.java:7822) \nat android.app.Activity.performCreate(Activity.java:7811) \nat android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1328) \nat android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3430) \nat android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3598) \nat android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:83) \nat android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135) \nat android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95) \nat android.app.ActivityThread$H.handleMessage(ActivityThread.java:2164) \nat android.os.Handler.dispatchMessage(Handler.java:107) \nat android.os.Looper.loop(Looper.java:241) \nat android.app.ActivityThread.main(ActivityThread.java:7582) \nat java.lang.reflect.Method.invoke(Native Method) \nat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:492) \nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:941) \nCaused by: java.security.KeyStoreException: JKS not found\nat java.security.KeyStore.getInstance(KeyStore.java:890)\nat com.datastax.oss.driver.internal.core.config.cloud.CloudConfigFactory.createKeyManagerFactory(CloudConfigFactory.java:202)\nat com.datastax.oss.driver.internal.core.config.cloud.CloudConfigFactory.createSslContext(CloudConfigFactory.java:191)\nat com.datastax.oss.driver.internal.core.config.cloud.CloudConfigFactory.createCloudConfig(CloudConfigFactory.java:129)\nat com.datastax.oss.driver.api.core.session.SessionBuilder.buildDefaultSessionAsync(SessionBuilder.java:876)\nat com.datastax.oss.driver.api.core.session.SessionBuilder.buildAsync(SessionBuilder.java:817)\nat com.datastax.oss.driver.api.core.session.SessionBuilder.build(SessionBuilder.java:835) \nat com.abc.testapp.dataapi.Datastax.getSession(Datastax.java:111) \nat com.abc.testapp.MainActivity.onCreate(MainActivity.java:636) \nat android.app.Activity.performCreate(Activity.java:7822) \nat android.app.Activity.performCreate(Activity.java:7811) \nat android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1328) \nat android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3430) \nat android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3598) \nat android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:83) \nat android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135) \nat android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95) \nat android.app.ActivityThread$H.handleMessage(ActivityThread.java:2164) \nat android.os.Handler.dispatchMessage(Handler.java:107) \nat android.os.Looper.loop(Looper.java:241) \nat android.app.ActivityThread.main(ActivityThread.java:7582) \nat java.lang.reflect.Method.invoke(Native Method) \nat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:492) \nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:941) \nCaused by: java.security.NoSuchAlgorithmException: JKS KeyStore not available\nat sun.security.jca.GetInstance.getInstance(GetInstance.java:159)\nat java.security.Security.getImpl(Security.java:628)\nat java.security.KeyStore.getInstance(KeyStore.java:887)\nat com.datastax.oss.driver.internal.core.config.cloud.CloudConfigFactory.createKeyManagerFactory(CloudConfigFactory.java:202) \nat com.datastax.oss.driver.internal.core.config.cloud.CloudConfigFactory.createSslContext(CloudConfigFactory.java:191) \nat com.datastax.oss.driver.internal.core.config.cloud.CloudConfigFactory.createCloudConfig(CloudConfigFactory.java:129) \nat com.datastax.oss.driver.api.core.session.SessionBuilder.buildDefaultSessionAsync(SessionBuilder.java:876) \nat com.datastax.oss.driver.api.core.session.SessionBuilder.buildAsync(SessionBuilder.java:817) \nat com.datastax.oss.driver.api.core.session.SessionBuilder.build(SessionBuilder.java:835) \nat com.abc.testapp.dataapi.Datastax.getSession(Datastax.java:111) \nat com.abc.testapp.MainActivity.onCreate(MainActivity.java:636) \nat android.app.Activity.performCreate(Activity.java:7822) \nat android.app.Activity.performCreate(Activity.java:7811) \nat android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1328) \nat android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3430) \nat android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3598) \nat android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:83) \nat android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135) \nat android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95) \nat android.app.ActivityThread$H.handleMessage(ActivityThread.java:2164) \nat android.os.Handler.dispatchMessage(Handler.java:107) \nat android.os.Looper.loop(Looper.java:241) \nat android.app.ActivityThread.main(ActivityThread.java:7582) \nat java.lang.reflect.Method.invoke(Native Method) \nat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:492) \nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:941)</p>\n</blockquote>\n"},{"tags":["java","android","android-studio","github","dependencies"],"comments":[{"owner":{"account_id":1979244,"reputation":1418,"user_id":1776243,"display_name":"Ram"},"score":0,"creation_date":1625054890,"post_id":68030511,"comment_id":120524311,"body_markdown":"same problem any solution?","body":"same problem any solution?"},{"owner":{"account_id":17020516,"reputation":41,"user_id":12313222,"display_name":"Manav Dave"},"score":0,"creation_date":1625174063,"post_id":68030511,"comment_id":120564780,"body_markdown":"No, I just built my own Contact Picker","body":"No, I just built my own Contact Picker"}],"answers":[{"tags":[],"owner":{"account_id":13944493,"reputation":21,"user_id":10069562,"display_name":"Sebastian Koba"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1626354228,"creation_date":1626354228,"answer_id":68394378,"question_id":68030511,"body_markdown":"I had the same problem but with [geok](https://github.com/piruin/geok) library. I checked syntax of dependencies declaration lines on [JitPack](https://jitpack.io/) website and there were different than I had on my build.gradle file. Finally I changed \r\n\r\nfrom:\r\n```\r\nimplementation &quot;com.github.piruin:geok:$geokVersion&quot;\r\nimplementation &quot;com.github.piruin.geok-gson:$geokVersion&quot;\r\n```\r\n\r\nto: \r\n```\r\nimplementation &quot;com.github.piruin.geok:geok:$geokVersion&quot;\r\nimplementation &quot;com.github.piruin.geok:geok:$geokVersion&quot;\r\n```\r\nand it works. ","title":"Execution failed for task &#39;:app:dataBindingMergeDependencyArtifactsDebug&#39;","body":"<p>I had the same problem but with <a href=\"https://github.com/piruin/geok\" rel=\"nofollow noreferrer\">geok</a> library. I checked syntax of dependencies declaration lines on <a href=\"https://jitpack.io/\" rel=\"nofollow noreferrer\">JitPack</a> website and there were different than I had on my build.gradle file. Finally I changed</p>\n<p>from:</p>\n<pre><code>implementation &quot;com.github.piruin:geok:$geokVersion&quot;\nimplementation &quot;com.github.piruin.geok-gson:$geokVersion&quot;\n</code></pre>\n<p>to:</p>\n<pre><code>implementation &quot;com.github.piruin.geok:geok:$geokVersion&quot;\nimplementation &quot;com.github.piruin.geok:geok:$geokVersion&quot;\n</code></pre>\n<p>and it works.</p>\n"}],"owner":{"account_id":17020516,"reputation":41,"user_id":12313222,"display_name":"Manav Dave"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12191,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1692857290,"creation_date":1623998616,"question_id":68030511,"body_markdown":"I added this library from GitHub into my android app:\r\n\r\n    implementation &#39;com.github.quiin:unifiedContactPicker:1.0&#39;\r\n\r\nNow, this library uses other libraries from GitHub.\r\nWhen I run my app, it tells me that these internal libraries are not found, so I dig them up and find their dependencies and add them to my app&#39;s Gradle file. But the problem is that they are not being detected and this is the error I am getting both times.\r\n\r\nExecution failed for task &#39;:app:dataBindingMergeDependencyArtifactsDebug&#39;.\r\n&gt; Could not resolve all files for configuration &#39;:app:debugCompileClasspath&#39;.\r\n   &gt; Could not find com.hootsuite.android:nachos:1.0.0.\r\n     Required by:\r\n         project :app &gt; com.github.quiin:unifiedContactPicker:1.0\r\n\r\nPossible solution:\r\n - Declare repository providing the artifact, see the documentation at https://docs.gradle.org/current/userguide/declaring_repositories.html\r\n\r\nPlease help, I have been stuck at this for a long time and I need to use this dependency. I have also tried using similar dependencies that fulfil my purpose but they all seem to have the same problem. So I don&#39;t know if there&#39;s a problem with my project or the libraries.\r\n\r\n","title":"Execution failed for task &#39;:app:dataBindingMergeDependencyArtifactsDebug&#39;","body":"<p>I added this library from GitHub into my android app:</p>\n<pre><code>implementation 'com.github.quiin:unifiedContactPicker:1.0'\n</code></pre>\n<p>Now, this library uses other libraries from GitHub.\nWhen I run my app, it tells me that these internal libraries are not found, so I dig them up and find their dependencies and add them to my app's Gradle file. But the problem is that they are not being detected and this is the error I am getting both times.</p>\n<p>Execution failed for task ':app:dataBindingMergeDependencyArtifactsDebug'.</p>\n<blockquote>\n<p>Could not resolve all files for configuration ':app:debugCompileClasspath'.\nCould not find com.hootsuite.android:nachos:1.0.0.\nRequired by:\nproject :app &gt; com.github.quiin:unifiedContactPicker:1.0</p>\n</blockquote>\n<p>Possible solution:</p>\n<ul>\n<li>Declare repository providing the artifact, see the documentation at <a href=\"https://docs.gradle.org/current/userguide/declaring_repositories.html\" rel=\"nofollow noreferrer\">https://docs.gradle.org/current/userguide/declaring_repositories.html</a></li>\n</ul>\n<p>Please help, I have been stuck at this for a long time and I need to use this dependency. I have also tried using similar dependencies that fulfil my purpose but they all seem to have the same problem. So I don't know if there's a problem with my project or the libraries.</p>\n"},{"tags":["java","rest","jersey"],"answers":[{"comments":[{"owner":{"account_id":45201,"reputation":4869,"user_id":133153,"accept_rate":100,"display_name":"joelpet"},"score":3,"creation_date":1410877729,"post_id":19933604,"comment_id":40485267,"body_markdown":"Thank you! I missed adding the *RolesAllowedDynamicFeature* when migrating from Jersey 1.x to 2.x and many hours have been spent looking for exactly this. For anyone wondering where the `register()` call goes, it&#39;s in your `javax.ws.rs.Application` implementation that is handed to the ServletContainer (e.g. `org.glassfish.jersey.servlet.ServletContainer`) through the usage of `&lt;init-param&gt;` inside `web.xml`.","body":"Thank you! I missed adding the <i>RolesAllowedDynamicFeature</i> when migrating from Jersey 1.x to 2.x and many hours have been spent looking for exactly this. For anyone wondering where the <code>register()</code> call goes, it&#39;s in your <code>javax.ws.rs.Application</code> implementation that is handed to the ServletContainer (e.g. <code>org.glassfish.jersey.servlet.ServletContainer</code>) through the usage of <code>&lt;init-param&gt;</code> inside <code>web.xml</code>."}],"tags":[],"owner":{"account_id":2770143,"reputation":1667,"user_id":2384902,"accept_rate":83,"display_name":"TinusSky"},"comment_count":1,"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1384271230,"creation_date":1384271230,"answer_id":19933604,"question_id":19933157,"body_markdown":"Found it :-)\r\n\r\n@RolesAllowed(&quot;admin&quot;) not @RolesAllowed(&quot;{admin}&quot;)\r\n\r\nand the most important one:\r\n\r\nregister(RolesAllowedDynamicFeature.class);","title":"@RolesAllowed is not working with custom SecurityContext in Jersey?","body":"<p>Found it :-)</p>\n\n<p>@RolesAllowed(\"admin\") not @RolesAllowed(\"{admin}\")</p>\n\n<p>and the most important one:</p>\n\n<p>register(RolesAllowedDynamicFeature.class);</p>\n"},{"comments":[{"owner":{"account_id":5193609,"reputation":194,"user_id":4155713,"display_name":"tobitobitobi"},"score":0,"creation_date":1471341745,"post_id":27322308,"comment_id":65297413,"body_markdown":"For anyone coming here from google: this does the trick in Websphere Liberty!","body":"For anyone coming here from google: this does the trick in Websphere Liberty!"}],"tags":[],"owner":{"account_id":4800889,"reputation":99,"user_id":3877552,"display_name":"LeoMandrak"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1692855999,"creation_date":1417803754,"answer_id":27322308,"question_id":19933157,"body_markdown":"You can use this below in your web.xml\r\n\r\n```xml\r\n&lt;context-param&gt;\r\n    &lt;param-name&gt;resteasy.role.based.security&lt;/param-name&gt;\r\n    &lt;param-value&gt;true&lt;/param-value&gt;\r\n&lt;/context-param&gt;\r\n```","title":"@RolesAllowed is not working with custom SecurityContext in Jersey?","body":"<p>You can use this below in your web.xml</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;context-param&gt;\n    &lt;param-name&gt;resteasy.role.based.security&lt;/param-name&gt;\n    &lt;param-value&gt;true&lt;/param-value&gt;\n&lt;/context-param&gt;\n</code></pre>\n"}],"owner":{"account_id":2770143,"reputation":1667,"user_id":2384902,"accept_rate":83,"display_name":"TinusSky"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3305,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":19933604,"answer_count":2,"score":3,"last_activity_date":1692855999,"creation_date":1384270048,"question_id":19933157,"body_markdown":"I have a simple jersey 2.4 resource:\r\n\r\n    @RolesAllowed(&quot;admin&quot;)\r\n    public List&lt;Folder&gt; list(){}\r\n\r\nI also have a ContainerRequestFilter which sets custom securitycontext:\r\n\r\n    public void filter(ContainerRequestContext requestContext) throws IOException {\r\n    requestContext.setSecurityContext(new MySecurityContext(...));\r\n    }\r\n\r\nIn the list() function i do get the correct securitycontext: MySecurityContext. And a call &quot;securityContext.isUserInRole(&quot;admin&quot;)&quot; works. \r\n\r\nBut the annotation @RolesAllowed doesn&#39;t seem to do anything, the function isUserInRole of MySecurityContext is never called.\r\n\r\nDo i need to do something special to get the @RolesAllowed to work?\r\n\r\n","title":"@RolesAllowed is not working with custom SecurityContext in Jersey?","body":"<p>I have a simple jersey 2.4 resource:</p>\n\n<pre><code>@RolesAllowed(\"admin\")\npublic List&lt;Folder&gt; list(){}\n</code></pre>\n\n<p>I also have a ContainerRequestFilter which sets custom securitycontext:</p>\n\n<pre><code>public void filter(ContainerRequestContext requestContext) throws IOException {\nrequestContext.setSecurityContext(new MySecurityContext(...));\n}\n</code></pre>\n\n<p>In the list() function i do get the correct securitycontext: MySecurityContext. And a call \"securityContext.isUserInRole(\"admin\")\" works. </p>\n\n<p>But the annotation @RolesAllowed doesn't seem to do anything, the function isUserInRole of MySecurityContext is never called.</p>\n\n<p>Do i need to do something special to get the @RolesAllowed to work?</p>\n"},{"tags":["java","security","ejb","jax-rs","resteasy"],"answers":[{"comments":[{"owner":{"account_id":2994769,"reputation":1310,"user_id":2541501,"accept_rate":78,"display_name":"PJvG"},"score":0,"creation_date":1411372502,"post_id":25958049,"comment_id":40661529,"body_markdown":"Thanks for taking your time to help me out. Ah yes sorry for that, I did try both `security-role` and `@DeclareRoles`, but no matter what I do it still results in a `javax.ws.rs.ForbiddenException: HTTP 403 Forbidden` warning. I excluded that for brevity, but on second thought it might be an important detail to include in my question. Also, what kind of security do you recommend? (as opposed to &quot;having it embedded in the code&quot;)","body":"Thanks for taking your time to help me out. Ah yes sorry for that, I did try both <code>security-role</code> and <code>@DeclareRoles</code>, but no matter what I do it still results in a <code>javax.ws.rs.ForbiddenException: HTTP 403 Forbidden</code> warning. I excluded that for brevity, but on second thought it might be an important detail to include in my question. Also, what kind of security do you recommend? (as opposed to &quot;having it embedded in the code&quot;)"},{"owner":{"account_id":446597,"reputation":22464,"user_id":839733,"accept_rate":69,"display_name":"Abhijit Sarkar"},"score":1,"creation_date":1411407954,"post_id":25958049,"comment_id":40681474,"body_markdown":"Your problem appears to be between JBoss security config and web container. Your `web.xml` as shown above doesn&#39;t have a `login-config` element without which the web container has no way to know who you&#39;re. I&#39;d recommend that you go back to the basics, ditch the EJB and just try to get a simple POJO JAX-RS service working with declarative security. Then you can incrementally build on it.\nHere&#39;s a [working example](https://github.com/abhijitsarkar/java-ee/tree/master/webservices/jax-rs/jaxrs-security/calculator-decl) using GlassFish from my github. You should be able to port it to JBoss.","body":"Your problem appears to be between JBoss security config and web container. Your <code>web.xml</code> as shown above doesn&#39;t have a <code>login-config</code> element without which the web container has no way to know who you&#39;re. I&#39;d recommend that you go back to the basics, ditch the EJB and just try to get a simple POJO JAX-RS service working with declarative security. Then you can incrementally build on it. Here&#39;s a <a href=\"https://github.com/abhijitsarkar/java-ee/tree/master/webservices/jax-rs/jaxrs-security/calculator-decl\" rel=\"nofollow noreferrer\">working example</a> using GlassFish from my github. You should be able to port it to JBoss."},{"owner":{"account_id":446597,"reputation":22464,"user_id":839733,"accept_rate":69,"display_name":"Abhijit Sarkar"},"score":1,"creation_date":1411408202,"post_id":25958049,"comment_id":40681595,"body_markdown":"Sorry to add 2 comments but couldn&#39;t help it due to the character limit on comments. You asked what&#39;d I recommend instead of having JBoss proprietary annotation in the code. My preference would be to externalize any vendor-specific configuration in XML deployment descriptors. In the link that I gave in my previous comment, you can see I did that using a GF specific DD `glassfish-web.xml`. HTH.","body":"Sorry to add 2 comments but couldn&#39;t help it due to the character limit on comments. You asked what&#39;d I recommend instead of having JBoss proprietary annotation in the code. My preference would be to externalize any vendor-specific configuration in XML deployment descriptors. In the link that I gave in my previous comment, you can see I did that using a GF specific DD <code>glassfish-web.xml</code>. HTH."},{"owner":{"account_id":2994769,"reputation":1310,"user_id":2541501,"accept_rate":78,"display_name":"PJvG"},"score":0,"creation_date":1411463343,"post_id":25958049,"comment_id":40701532,"body_markdown":"Thank you for your comments. Ah I didn&#39;t realize the `login-config` element was required, but it does make sense now. I think I can get it to work by adding `login-config` and updating my deployment descriptors. I think it wouldn&#39;t be too hard to port your example to JBoss/WildFly (for example see [this](http://wildfly.org/news/2014/02/06/GlassFish-to-WildFly-migration/)). I will update here when I implemented a fully functional role-based security system for my Web application.","body":"Thank you for your comments. Ah I didn&#39;t realize the <code>login-config</code> element was required, but it does make sense now. I think I can get it to work by adding <code>login-config</code> and updating my deployment descriptors. I think it wouldn&#39;t be too hard to port your example to JBoss/WildFly (for example see <a href=\"http://wildfly.org/news/2014/02/06/GlassFish-to-WildFly-migration/\" rel=\"nofollow noreferrer\">this</a>). I will update here when I implemented a fully functional role-based security system for my Web application."}],"tags":[],"owner":{"account_id":446597,"reputation":22464,"user_id":839733,"accept_rate":69,"display_name":"Abhijit Sarkar"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1411293853,"creation_date":1411293853,"answer_id":25958049,"question_id":25851374,"body_markdown":"I saw your post on my answer [here][1]. I&#39;m not very familiar with JBoss proprietary security, neither do I recommend having it embedded in the code, but I guess that&#39;s not my problem. From your code, I don&#39;t see `security-role` or `@DeclareRoles` present; it is clearly mentioned in my answer that you need either one for annotation-based security to work. DId you exclude that for brevity or did you miss it? In case of the later, add `@DeclareRoles` to `UserResource` class and see if that helps.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/20025434/839733","title":"How do I get the @RolesAllowed annotation to work for my Web application?","body":"<p>I saw your post on my answer <a href=\"https://stackoverflow.com/a/20025434/839733\">here</a>. I'm not very familiar with JBoss proprietary security, neither do I recommend having it embedded in the code, but I guess that's not my problem. From your code, I don't see <code>security-role</code> or <code>@DeclareRoles</code> present; it is clearly mentioned in my answer that you need either one for annotation-based security to work. DId you exclude that for brevity or did you miss it? In case of the later, add <code>@DeclareRoles</code> to <code>UserResource</code> class and see if that helps.</p>\n"},{"tags":[],"owner":{"account_id":2994769,"reputation":1310,"user_id":2541501,"accept_rate":78,"display_name":"PJvG"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1412688901,"creation_date":1411735312,"answer_id":26059850,"question_id":25851374,"body_markdown":"I found one solution to my problem. However, this isn&#39;t as much a solution to the problem as it is a `workaround`, because it does not use the *@RolesAllowed* annotation.\r\n\r\nSince I was unable to figure out how to define my deployment descriptors and server configuration exactly, I figured the problem would be solved much easier if I simply did not use the *@RolesAllowed* annotation.\r\n\r\nEven though other people might really want to use the `login-config` element in their *web.xml* file and not use any other means of authentication, this approach does not use that element but instead does authentication solely through [RESTful Web Services][1] (which means that nothing needs to change in the deployment descriptors or the server configuration).\r\n\r\nI created a new *Enterprise Java Bean (EJB)* called `SecurityFilter` which checks if a user has the required roles for certain functionalities. It is implemented as follows:\r\n\r\n    import java.util.Arrays;\r\n    import java.util.HashSet;\r\n    import java.util.Set;\r\n    import javax.ejb.EJB;\r\n    import javax.ejb.Stateless;\r\n    import javax.ws.rs.core.HttpHeaders;\r\n    import org.profit.pgb.rest.user.UserService;\r\n    \r\n    @Stateless\r\n    public class SecurityFilter\r\n    {\r\n        @EJB(name = &quot;UserServiceImp&quot;)\r\n        UserService userService;\r\n        \r\n        public boolean isUserAllowed (String[] rolesArray, HttpHeaders hHeaders)\r\n        {\r\n            Set&lt;String&gt; rolesSet = new HashSet&lt;&gt;(Arrays.asList(rolesArray));\r\n            \r\n            String uuid = hHeaders.getRequestHeader(&quot;user&quot;).get(0);\r\n            String token = hHeaders.getRequestHeader(&quot;token&quot;).get(0);\r\n            \r\n            if (userService.isAuthorizationTokenValid(uuid, token))\r\n            {\r\n               if (userService.isUserAllowed(uuid, rolesSet))\r\n               {\r\n                   return true; // user allowed access\r\n               }\r\n            }   \r\n            return false; // 401\r\n        }\r\n    }\r\n\r\nThe method *isUserAllowed* is called in the *create* method of *UserResource.java*. The old implementation of this *create* method can be seen in the question above. The new implementation is as follows:\r\n\r\n    @PermitAll\r\n    @Path(&quot;create&quot;)\r\n    @POST\r\n    public Response create(CreateRequest request, @Context HttpHeaders hHeaders) {  \r\n        if (securityFilter.isUserAllowed(new String[]{&quot;admin&quot;}, hHeaders))\r\n        {\r\n            try {\r\n                System.out.println(&quot;Start of create method&quot;);\r\n                User user = userService.createUser(request);\r\n                return getCreateResponse(user);\r\n            }\r\n            catch (Exception e){\r\n                return Response.status(401).entity(&quot;Failed to create user&quot;).build();\r\n            }\r\n        }\r\n        else\r\n            return Response.status(401).entity(&quot;Access denied! User does not have permission to create user&quot;).build();\r\n    }\r\n\r\nAs you can see, an if-else statement replaces the *@RolesAllowed* annotation in this approach and my security filter is implemented slightly different.\r\n\r\nAlso, this approach uses [HttpHeaders][2] to get the request headers (in which the user ID and token are stored). [The accepted answer][3] on the SO question &quot;https://stackoverflow.com/questions/6503960/how-to-received-accept-header-in-rest-web-service-server-side/6504062#6504062&quot; helped me find [how to get the request headers][4].\r\n\r\nFurthermore, this approach works without changing anything in my *Backbone.js*- and *Bootstrap*-based web pages (i.e. my HTML and JavaScript files).\r\n\r\n\r\n  [1]: http://docs.oracle.com/javaee/6/tutorial/doc/gijqy.html\r\n  [2]: http://docs.oracle.com/javaee/6/api/javax/ws/rs/core/HttpHeaders.html\r\n  [3]: https://stackoverflow.com/a/6504062/2541501\r\n  [4]: https://wikis.oracle.com/display/Jersey/Overview+of+JAX-RS+1.0+Features","title":"How do I get the @RolesAllowed annotation to work for my Web application?","body":"<p>I found one solution to my problem. However, this isn't as much a solution to the problem as it is a <code>workaround</code>, because it does not use the <em>@RolesAllowed</em> annotation.</p>\n\n<p>Since I was unable to figure out how to define my deployment descriptors and server configuration exactly, I figured the problem would be solved much easier if I simply did not use the <em>@RolesAllowed</em> annotation.</p>\n\n<p>Even though other people might really want to use the <code>login-config</code> element in their <em>web.xml</em> file and not use any other means of authentication, this approach does not use that element but instead does authentication solely through <a href=\"http://docs.oracle.com/javaee/6/tutorial/doc/gijqy.html\" rel=\"nofollow noreferrer\">RESTful Web Services</a> (which means that nothing needs to change in the deployment descriptors or the server configuration).</p>\n\n<p>I created a new <em>Enterprise Java Bean (EJB)</em> called <code>SecurityFilter</code> which checks if a user has the required roles for certain functionalities. It is implemented as follows:</p>\n\n<pre><code>import java.util.Arrays;\nimport java.util.HashSet;\nimport java.util.Set;\nimport javax.ejb.EJB;\nimport javax.ejb.Stateless;\nimport javax.ws.rs.core.HttpHeaders;\nimport org.profit.pgb.rest.user.UserService;\n\n@Stateless\npublic class SecurityFilter\n{\n    @EJB(name = \"UserServiceImp\")\n    UserService userService;\n\n    public boolean isUserAllowed (String[] rolesArray, HttpHeaders hHeaders)\n    {\n        Set&lt;String&gt; rolesSet = new HashSet&lt;&gt;(Arrays.asList(rolesArray));\n\n        String uuid = hHeaders.getRequestHeader(\"user\").get(0);\n        String token = hHeaders.getRequestHeader(\"token\").get(0);\n\n        if (userService.isAuthorizationTokenValid(uuid, token))\n        {\n           if (userService.isUserAllowed(uuid, rolesSet))\n           {\n               return true; // user allowed access\n           }\n        }   \n        return false; // 401\n    }\n}\n</code></pre>\n\n<p>The method <em>isUserAllowed</em> is called in the <em>create</em> method of <em>UserResource.java</em>. The old implementation of this <em>create</em> method can be seen in the question above. The new implementation is as follows:</p>\n\n<pre><code>@PermitAll\n@Path(\"create\")\n@POST\npublic Response create(CreateRequest request, @Context HttpHeaders hHeaders) {  \n    if (securityFilter.isUserAllowed(new String[]{\"admin\"}, hHeaders))\n    {\n        try {\n            System.out.println(\"Start of create method\");\n            User user = userService.createUser(request);\n            return getCreateResponse(user);\n        }\n        catch (Exception e){\n            return Response.status(401).entity(\"Failed to create user\").build();\n        }\n    }\n    else\n        return Response.status(401).entity(\"Access denied! User does not have permission to create user\").build();\n}\n</code></pre>\n\n<p>As you can see, an if-else statement replaces the <em>@RolesAllowed</em> annotation in this approach and my security filter is implemented slightly different.</p>\n\n<p>Also, this approach uses <a href=\"http://docs.oracle.com/javaee/6/api/javax/ws/rs/core/HttpHeaders.html\" rel=\"nofollow noreferrer\">HttpHeaders</a> to get the request headers (in which the user ID and token are stored). <a href=\"https://stackoverflow.com/a/6504062/2541501\">The accepted answer</a> on the SO question \"<a href=\"https://stackoverflow.com/questions/6503960/how-to-received-accept-header-in-rest-web-service-server-side/6504062#6504062\">how to received &quot;Accept&quot; header in REST web service server side</a>\" helped me find <a href=\"https://wikis.oracle.com/display/Jersey/Overview+of+JAX-RS+1.0+Features\" rel=\"nofollow noreferrer\">how to get the request headers</a>.</p>\n\n<p>Furthermore, this approach works without changing anything in my <em>Backbone.js</em>- and <em>Bootstrap</em>-based web pages (i.e. my HTML and JavaScript files).</p>\n"},{"tags":[],"owner":{"account_id":1399470,"reputation":6117,"user_id":1328513,"accept_rate":53,"display_name":"Zhenya"},"comment_count":0,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1692855936,"creation_date":1418993987,"answer_id":27566704,"question_id":25851374,"body_markdown":"Based on the error &quot;403&quot;, it seems to me that there is something wrong with your role query. Maybe, your login module doesn&#39;t assign &quot;admin&quot; role to your user. One thing you could do is implement a custom authentication mechanism http://undertow.io/undertow-docs/undertow-docs-1.3.0/#authentication-mechanisms (example: https://github.com/dstraub/spnego-wildfly), and modify it in such a way that you could check which roles your login module assigns to your user. Implementing custom authentication mechanism is going to take you some time, but it helps you understand better how security works in wildfly.\r\n\r\nOther thing I had to do for my Roles annotation to work is modify standalone.xml and set your security-domain as the default one.\r\n\r\nAlso, adding those lines is a step in the right direction, as for me. Without those lines annotations @RolesAllowed don&#39;t work for me.\r\n\r\n```xml\r\n&lt;context-param&gt;\r\n    &lt;param-name&gt;resteasy.role.based.security&lt;/param-name&gt;\r\n    &lt;param-value&gt;true&lt;/param-value&gt;\r\n&lt;/context-param&gt;\r\n```\r\n\r\nAlso, I would advice implementing security using web.xml only, and only after that is done, try adding @RolesAllowed. ","title":"How do I get the @RolesAllowed annotation to work for my Web application?","body":"<p>Based on the error &quot;403&quot;, it seems to me that there is something wrong with your role query. Maybe, your login module doesn't assign &quot;admin&quot; role to your user. One thing you could do is implement a custom authentication mechanism <a href=\"http://undertow.io/undertow-docs/undertow-docs-1.3.0/#authentication-mechanisms\" rel=\"nofollow noreferrer\">http://undertow.io/undertow-docs/undertow-docs-1.3.0/#authentication-mechanisms</a> (example: <a href=\"https://github.com/dstraub/spnego-wildfly\" rel=\"nofollow noreferrer\">https://github.com/dstraub/spnego-wildfly</a>), and modify it in such a way that you could check which roles your login module assigns to your user. Implementing custom authentication mechanism is going to take you some time, but it helps you understand better how security works in wildfly.</p>\n<p>Other thing I had to do for my Roles annotation to work is modify standalone.xml and set your security-domain as the default one.</p>\n<p>Also, adding those lines is a step in the right direction, as for me. Without those lines annotations @RolesAllowed don't work for me.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;context-param&gt;\n    &lt;param-name&gt;resteasy.role.based.security&lt;/param-name&gt;\n    &lt;param-value&gt;true&lt;/param-value&gt;\n&lt;/context-param&gt;\n</code></pre>\n<p>Also, I would advice implementing security using web.xml only, and only after that is done, try adding @RolesAllowed.</p>\n"},{"comments":[{"owner":{"account_id":282504,"reputation":1118,"user_id":579435,"accept_rate":51,"display_name":"sarmahdi"},"score":0,"creation_date":1477955678,"post_id":39633782,"comment_id":67958340,"body_markdown":"If we remove the Stateless annotation then how are we going to use it as a stateless bean. Just confused. there has to be some there way as well.I am having the same issue and it seems that the getUserPrincipal is not called when invoking the EJB.","body":"If we remove the Stateless annotation then how are we going to use it as a stateless bean. Just confused. there has to be some there way as well.I am having the same issue and it seems that the getUserPrincipal is not called when invoking the EJB."},{"owner":{"account_id":2106266,"reputation":5117,"user_id":1872540,"display_name":"LovaBill"},"score":3,"creation_date":1487343460,"post_id":39633782,"comment_id":71756495,"body_markdown":"Break rest class into rest and business. business shall be stateless only and it will be called from rest.","body":"Break rest class into rest and business. business shall be stateless only and it will be called from rest."}],"tags":[],"owner":{"account_id":9239413,"reputation":136,"user_id":6863070,"display_name":"tptptp"},"comment_count":2,"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1474534142,"creation_date":1474532386,"answer_id":39633782,"question_id":25851374,"body_markdown":"Just had the same problem. \r\n\r\nIt&#39;s the `@Stateless` annotation. The marks your class as an EJB and the container attempts to enforce EJB security.\r\n\r\nI discovered this by writing filters and my own SecurityContext, only to find that my `SecurityContext` was never referenced. \r\n\r\nRemoving `@Stateless` resulted in `getUserPrincipal()` being called on the `SecurityContext`.","title":"How do I get the @RolesAllowed annotation to work for my Web application?","body":"<p>Just had the same problem. </p>\n\n<p>It's the <code>@Stateless</code> annotation. The marks your class as an EJB and the container attempts to enforce EJB security.</p>\n\n<p>I discovered this by writing filters and my own SecurityContext, only to find that my <code>SecurityContext</code> was never referenced. </p>\n\n<p>Removing <code>@Stateless</code> resulted in <code>getUserPrincipal()</code> being called on the <code>SecurityContext</code>.</p>\n"},{"comments":[{"owner":{"account_id":9371453,"reputation":11,"user_id":6955311,"display_name":"user9371453"},"score":0,"creation_date":1645601315,"post_id":71219752,"comment_id":125911894,"body_markdown":"For further reference please refer the following url:   https://access.redhat.com/documentation/en-us/jboss_enterprise_application_platform/6.1/html/security_guide/about_the_structure_of_the_security_subsystem","body":"For further reference please refer the following url:   <a href=\"https://access.redhat.com/documentation/en-us/jboss_enterprise_application_platform/6.1/html/security_guide/about_the_structure_of_the_security_subsystem\" rel=\"nofollow noreferrer\">access.redhat.com/documentation/en-us/&hellip;</a>"}],"tags":[],"owner":{"account_id":9371453,"reputation":11,"user_id":6955311,"display_name":"user9371453"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645589352,"creation_date":1645526304,"answer_id":71219752,"question_id":25851374,"body_markdown":"You need to basically access the ejb from a web client\r\n\r\nYou need to add the following code to web.xml\r\n\r\n    &lt;login-config&gt;\r\n        &lt;auth-method&gt;BASIC&lt;/auth-method&gt;\r\n        &lt;realm-name&gt;ManagementRealm&lt;/realm-name&gt;\r\n    &lt;/login-config&gt;\r\n\r\nYou need to add the following code to standalone.xml\r\n\r\n     &lt;security-domain name=&quot;other&quot; cache-type=&quot;default&quot;&gt;\r\n                    &lt;authentication&gt;\r\n                        &lt;login-module code=&quot;Remoting&quot; flag=&quot;optional&quot;&gt;\r\n                            &lt;module-option name=&quot;password-stacking&quot; value=&quot;useFirstPass&quot;/&gt;\r\n                        &lt;/login-module&gt;\r\n\t\t\t&lt;login-module code=&quot;RealmUsersRoles&quot; flag=&quot;required&quot;&gt;\r\n                    \t\t&lt;module-option name=&quot;usersProperties&quot; value=&quot;${jboss.server.config.dir}/application-users.properties&quot;/&gt;\r\n                    \t\t&lt;module-option name=&quot;rolesProperties&quot; value=&quot;${jboss.server.config.dir}/application-roles.properties&quot;/&gt;\r\n                    \t\t&lt;module-option name=&quot;realm&quot; value=&quot;ApplicationRealm&quot;/&gt;\r\n                    \t\t&lt;module-option name=&quot;password-stacking&quot; value=&quot;useFirstPass&quot;/&gt;\r\n                \t&lt;/login-module&gt;\r\n                        &lt;login-module code=&quot;RealmDirect&quot; flag=&quot;required&quot;&gt;\r\n                            &lt;module-option name=&quot;password-stacking&quot; value=&quot;useFirstPass&quot;/&gt;\r\n                        &lt;/login-module&gt;\r\n                    &lt;/authentication&gt;\r\n                &lt;/security-domain&gt;\r\n\r\nYou can easily create an ejb bean and an ejb interface in an EJBproject\r\n\r\nThen you can access this ejb from a web project using a servlet\r\nMy servlet looks as follows:\r\n\r\n```\r\n@WebServlet(&quot;/JbossServlet&quot;)\r\npublic class JbossServlet extends HttpServlet {\r\n\tprivate static final long serialVersionUID = 1L;\r\n       \r\n    @EJB\r\n    Calculator1 calculator1;\r\n        \r\n    public JbossServlet() {}\r\n\t\r\n\tprotected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\t  \r\n        System.out.println(&quot;1 + 1 = &quot; + calculator1.add(1, 1));\r\n\t\tSystem.out.println(&quot;1 - 1 = &quot; + calculator1.subtract(1, 1));\r\n\t    System.out.println(&quot;4/2 = &quot; + calculator1.divide(4, 2));\r\n\t}\r\n\r\n\tprotected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n\t\tdoGet(request, response);\r\n\t} \t\r\n\r\n}\r\n\r\nDon&#39;t forget to create an application user using jboss-cli.bat before accessing it from the url\r\n    \r\nMy EJB3 bean looks as follows:\r\n\r\npackage org.jboss.tutorial.stateless.bean;\r\n\r\nimport java.security.Principal;\r\n\r\nimport javax.annotation.Resource;\r\nimport javax.annotation.security.PermitAll;\r\nimport javax.annotation.security.RolesAllowed;\r\nimport javax.ejb.Remote;\r\nimport javax.ejb.SessionContext;\r\nimport javax.ejb.Stateful;\r\nimport javax.ejb.TransactionAttribute;\r\nimport javax.ejb.TransactionAttributeType;\r\n\r\n\r\nimport org.jboss.logging.Logger;\r\nimport org.jboss.security.annotation.SecurityDomain;\r\n\r\n\r\n@Stateful\r\n@Remote(Calculator1.class)\r\n@SecurityDomain(&quot;Other&quot;)\r\npublic class CalculatorBean1 implements Calculator1 {\r\n\tprivate static Logger log = Logger.getLogger(CalculatorBean1.class.getName());\r\n\r\n\t  @Resource\r\n\t  private SessionContext ctx;\r\n\r\n\t  \r\n\t   @PermitAll\r\n\t   @TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)\r\n\t   public int add(Integer x, Integer y)\r\n\t   {\r\n\t\t   log.info(&quot;ctx&quot;+ctx);\r\n\t      return x + y;\r\n\t   }\r\n\t   \r\n\t   @RolesAllowed({&quot;admin&quot;})\r\n\t   public int subtract(Integer x, Integer y)\r\n\t   {\r\n\t\t   log.info(&quot;inside subtract&quot;);\r\n\t\t   boolean callerInRole=ctx.isCallerInRole(&quot;admin&quot;);\r\n\t\t   Principal callerPrincipal = ctx.getCallerPrincipal();\r\n\t\t   String callerKey = callerPrincipal.getName();\r\n\t\t   log.info(&quot;callerPrincipal&quot;+callerPrincipal);\r\n\t\t   log.info(&quot;callerKey&quot;+callerKey);\r\n\t\t   log.info(&quot;callerInRole&quot;+callerInRole);\r\n\t\t   log.info(&quot;nt isCallerInRole(&#39;RoleOne&#39;): &quot; + callerInRole);\r\n\t\t   log.info(&quot;nnt CalculatorBean  subtract() called...substract= &quot;+(x-y));\r\n\t\t     return x - y;\r\n\t   }\r\n\t   \r\n\t   @RolesAllowed({&quot;admin&quot;})\r\n\t   public Integer divide(Integer x, Integer y)\r\n\t   {\r\n\t\t   log.info(&quot;inside divide&quot;);\r\n\t\t   boolean callerInRole=ctx.isCallerInRole(&quot;RoleTwo&quot;);\r\n\t\t   log.info(&quot;nt isCallerInRole(&#39;RoleTwo&#39;): &quot; + callerInRole);\r\n\t\t   log.info(&quot;nnt CalculatorBean  divide() called...divide= &quot;+(x/y));\r\n\t\t      return x / y;\r\n\t   }\r\n}\r\n    \r\nMy EJB3 interface looks as follows:    \r\n    \r\n    \r\n\r\n package org.jboss.tutorial.stateless.bean;\r\n    \r\n import javax.ejb.Remote;\r\n    \r\n    @Remote\r\n    public interface Calculator1 {\r\n    \tpublic int add(Integer a, Integer b);\r\n    \tpublic int subtract(Integer a, Integer b);\r\n    \tpublic Integer divide(Integer x, Integer y);\r\n    }\r\n\r\n\r\n\r\n","title":"How do I get the @RolesAllowed annotation to work for my Web application?","body":"<p>You need to basically access the ejb from a web client</p>\n<p>You need to add the following code to web.xml</p>\n<pre><code>&lt;login-config&gt;\n    &lt;auth-method&gt;BASIC&lt;/auth-method&gt;\n    &lt;realm-name&gt;ManagementRealm&lt;/realm-name&gt;\n&lt;/login-config&gt;\n</code></pre>\n<p>You need to add the following code to standalone.xml</p>\n<pre><code> &lt;security-domain name=&quot;other&quot; cache-type=&quot;default&quot;&gt;\n                &lt;authentication&gt;\n                    &lt;login-module code=&quot;Remoting&quot; flag=&quot;optional&quot;&gt;\n                        &lt;module-option name=&quot;password-stacking&quot; value=&quot;useFirstPass&quot;/&gt;\n                    &lt;/login-module&gt;\n        &lt;login-module code=&quot;RealmUsersRoles&quot; flag=&quot;required&quot;&gt;\n                        &lt;module-option name=&quot;usersProperties&quot; value=&quot;${jboss.server.config.dir}/application-users.properties&quot;/&gt;\n                        &lt;module-option name=&quot;rolesProperties&quot; value=&quot;${jboss.server.config.dir}/application-roles.properties&quot;/&gt;\n                        &lt;module-option name=&quot;realm&quot; value=&quot;ApplicationRealm&quot;/&gt;\n                        &lt;module-option name=&quot;password-stacking&quot; value=&quot;useFirstPass&quot;/&gt;\n                &lt;/login-module&gt;\n                    &lt;login-module code=&quot;RealmDirect&quot; flag=&quot;required&quot;&gt;\n                        &lt;module-option name=&quot;password-stacking&quot; value=&quot;useFirstPass&quot;/&gt;\n                    &lt;/login-module&gt;\n                &lt;/authentication&gt;\n            &lt;/security-domain&gt;\n</code></pre>\n<p>You can easily create an ejb bean and an ejb interface in an EJBproject</p>\n<p>Then you can access this ejb from a web project using a servlet\nMy servlet looks as follows:</p>\n<pre><code>@WebServlet(&quot;/JbossServlet&quot;)\npublic class JbossServlet extends HttpServlet {\n    private static final long serialVersionUID = 1L;\n       \n    @EJB\n    Calculator1 calculator1;\n        \n    public JbossServlet() {}\n    \n    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {     \n        System.out.println(&quot;1 + 1 = &quot; + calculator1.add(1, 1));\n        System.out.println(&quot;1 - 1 = &quot; + calculator1.subtract(1, 1));\n        System.out.println(&quot;4/2 = &quot; + calculator1.divide(4, 2));\n    }\n\n    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n        doGet(request, response);\n    }   \n\n}\n\nDon't forget to create an application user using jboss-cli.bat before accessing it from the url\n    \nMy EJB3 bean looks as follows:\n\npackage org.jboss.tutorial.stateless.bean;\n\nimport java.security.Principal;\n\nimport javax.annotation.Resource;\nimport javax.annotation.security.PermitAll;\nimport javax.annotation.security.RolesAllowed;\nimport javax.ejb.Remote;\nimport javax.ejb.SessionContext;\nimport javax.ejb.Stateful;\nimport javax.ejb.TransactionAttribute;\nimport javax.ejb.TransactionAttributeType;\n\n\nimport org.jboss.logging.Logger;\nimport org.jboss.security.annotation.SecurityDomain;\n\n\n@Stateful\n@Remote(Calculator1.class)\n@SecurityDomain(&quot;Other&quot;)\npublic class CalculatorBean1 implements Calculator1 {\n    private static Logger log = Logger.getLogger(CalculatorBean1.class.getName());\n\n      @Resource\n      private SessionContext ctx;\n\n      \n       @PermitAll\n       @TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)\n       public int add(Integer x, Integer y)\n       {\n           log.info(&quot;ctx&quot;+ctx);\n          return x + y;\n       }\n       \n       @RolesAllowed({&quot;admin&quot;})\n       public int subtract(Integer x, Integer y)\n       {\n           log.info(&quot;inside subtract&quot;);\n           boolean callerInRole=ctx.isCallerInRole(&quot;admin&quot;);\n           Principal callerPrincipal = ctx.getCallerPrincipal();\n           String callerKey = callerPrincipal.getName();\n           log.info(&quot;callerPrincipal&quot;+callerPrincipal);\n           log.info(&quot;callerKey&quot;+callerKey);\n           log.info(&quot;callerInRole&quot;+callerInRole);\n           log.info(&quot;nt isCallerInRole('RoleOne'): &quot; + callerInRole);\n           log.info(&quot;nnt CalculatorBean  subtract() called...substract= &quot;+(x-y));\n             return x - y;\n       }\n       \n       @RolesAllowed({&quot;admin&quot;})\n       public Integer divide(Integer x, Integer y)\n       {\n           log.info(&quot;inside divide&quot;);\n           boolean callerInRole=ctx.isCallerInRole(&quot;RoleTwo&quot;);\n           log.info(&quot;nt isCallerInRole('RoleTwo'): &quot; + callerInRole);\n           log.info(&quot;nnt CalculatorBean  divide() called...divide= &quot;+(x/y));\n              return x / y;\n       }\n}\n    \nMy EJB3 interface looks as follows:    \n    \n    \n\n package org.jboss.tutorial.stateless.bean;\n    \n import javax.ejb.Remote;\n    \n    @Remote\n    public interface Calculator1 {\n        public int add(Integer a, Integer b);\n        public int subtract(Integer a, Integer b);\n        public Integer divide(Integer x, Integer y);\n    }\n\n\n\n</code></pre>\n"}],"owner":{"account_id":2994769,"reputation":1310,"user_id":2541501,"accept_rate":78,"display_name":"PJvG"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56973,"favorite_count":0,"down_vote_count":0,"up_vote_count":23,"accepted_answer_id":39633782,"answer_count":5,"score":23,"last_activity_date":1692855936,"creation_date":1410794199,"question_id":25851374,"body_markdown":"I am making a Web application using Backbone.js, Bootstrap, NetBeans IDE 8.0, Java EE 7, JDK 8, WildFly server 8.1.0, JBoss RESTEasy (resteasy-jaxrs-3.0.8), JBoss 2.2.22, JBoss EJB 3.\r\n\r\nI am (relatively) new to Web development, and as such I have only just started to grasp a lot of basic concepts and technologies. I am trying to build a permission system with users and roles into a Web application, but I cannot seem to make the *@RolesAllowed annotation* to work in my RESTful Web Service. I am already working on this problem for a few days.\r\n\r\nI have a RESTful resource (Java Enterprise/Session Bean?) called *UserResource.java*, in here I have a method *create* to create a new user for the application:\r\n\r\n    import java.net.URI;\r\n    import java.security.Principal;\r\n    import java.util.List;\r\n    import javax.annotation.security.PermitAll;\r\n    import javax.annotation.security.RolesAllowed;\r\n    import javax.ejb.EJB;\r\n    import javax.ejb.Stateless;\r\n    import javax.ws.rs.*;\r\n    import javax.ws.rs.core.*;\r\n    import org.jboss.ejb3.annotation.SecurityDomain;\r\n    \r\n    @Stateless\r\n    @SecurityDomain(&quot;other&quot;)\r\n    @Path(&quot;/user&quot;)\r\n    public class UserResource {\r\n        @EJB(name = &quot;UserServiceImp&quot;)\r\n        UserService userService;\r\n        \r\n        @Context\r\n        private UriInfo uriInfo;\r\n    \r\n        @RolesAllowed({&quot;admin&quot;})\r\n        @Path(&quot;create&quot;)\r\n        @POST\r\n        public Response create(CreateRequest request) {        \r\n            try {\r\n                System.out.println(&quot;Start of create method&quot;);\r\n                User user = userService.createUser(request);\r\n                return getCreateResponse(user);\r\n            }\r\n            catch (Exception e){\r\n                return Response.status(401).entity(&quot;Failed to create user&quot;).build();\r\n            }\r\n        }\r\n    }\r\n\r\nThis *create* method works if I use the @PermitAll annotation, but it fails with an error if I use the @RolesAllowed annotation.\r\n\r\nI have this Backbone view *CreateUserView* which provides a form (in HTML) to an end user (with admin rights) for creating new users for the application. On clicking the submit button, JSON data gets send to the url &#39;rest/user/create&#39; for creating a new user. Before the *create* method in *UserResource.java* gets executed, my *SecurityInterceptor.java* (which implements *javax.ws.rs.container.ContainerRequestFilter*) checks if the user has the required permissions. I have debugged this thorough and the Security Interceptor is functioning as it should. So after the Security Interceptor gives clear access, something goes wrong in *UserResource.java*. (As a side note, not sure if this is important, but I believe the Security Interceptor is based on [this blog post about RESTEasy security][1]. I was working on the application with another guy, he initially implemented it, so I&#39;m not sure.. but it looks almost identical. Anyway that guy has moved on to another project a few weeks ago.)\r\n\r\nThe error I am getting (output from the server) is the following:\r\n\r\n    16:45:25,775 ERROR [org.jboss.as.ejb3.invocation] (default task-60) JBAS014134: EJB Invocation failed on component UserResource for method public javax.ws.rs.core.Response org.profit.pgb.rest.resource.UserResource.create(org.profit.pgb.rest.api.CreateRequest): javax.ejb.EJBAccessException: JBAS014502: Invocation on method: public javax.ws.rs.core.Response org.profit.pgb.rest.resource.UserResource.create(org.profit.pgb.rest.api.CreateRequest) of bean: UserResource is not allowed\r\n    \tat org.jboss.as.ejb3.security.AuthorizationInterceptor.processInvocation(AuthorizationInterceptor.java:135) [wildfly-ejb3-8.1.0.Final.jar:8.1.0.Final]\r\n    \tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:309)\r\n    \tat org.jboss.as.ejb3.security.SecurityContextInterceptor.processInvocation(SecurityContextInterceptor.java:95) [wildfly-ejb3-8.1.0.Final.jar:8.1.0.Final]\r\n    \tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:309)\r\n    \tat org.jboss.as.ejb3.component.interceptors.ShutDownInterceptorFactory$1.processInvocation(ShutDownInterceptorFactory.java:64) [wildfly-ejb3-8.1.0.Final.jar:8.1.0.Final]\r\n    \tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:309)\r\n    \tat org.jboss.as.ejb3.component.interceptors.LoggingInterceptor.processInvocation(LoggingInterceptor.java:59) [wildfly-ejb3-8.1.0.Final.jar:8.1.0.Final]\r\n    \tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:309)\r\n    \tat org.jboss.as.ee.component.NamespaceContextInterceptor.processInvocation(NamespaceContextInterceptor.java:50)\r\n    \tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:309)\r\n    \tat org.jboss.as.ejb3.component.interceptors.AdditionalSetupInterceptor.processInvocation(AdditionalSetupInterceptor.java:55) [wildfly-ejb3-8.1.0.Final.jar:8.1.0.Final]\r\n    \tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:309)\r\n    \tat org.jboss.invocation.ContextClassLoaderInterceptor.processInvocation(ContextClassLoaderInterceptor.java:64)\r\n    \tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:309)\r\n    \tat org.jboss.invocation.InterceptorContext.run(InterceptorContext.java:326)\r\n    \tat org.wildfly.security.manager.WildFlySecurityManager.doChecked(WildFlySecurityManager.java:448)\r\n    \tat org.jboss.invocation.AccessCheckingInterceptor.processInvocation(AccessCheckingInterceptor.java:61)\r\n    \tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:309)\r\n    \tat org.jboss.invocation.InterceptorContext.run(InterceptorContext.java:326)\r\n    \tat org.jboss.invocation.PrivilegedWithCombinerInterceptor.processInvocation(PrivilegedWithCombinerInterceptor.java:80)\r\n    \tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:309)\r\n    \tat org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61)\r\n    \tat org.jboss.as.ee.component.ViewService$View.invoke(ViewService.java:185)\r\n    \tat org.jboss.as.ee.component.ViewDescription$1.processInvocation(ViewDescription.java:182)\r\n    \tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:309)\r\n    \tat org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61)\r\n    \tat org.jboss.as.ee.component.ProxyInvocationHandler.invoke(ProxyInvocationHandler.java:73)\r\n    \tat org.profit.pgb.rest.resource.UserResource$$$view45.create(Unknown Source) [classes:]\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.8.0_11]\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) [rt.jar:1.8.0_11]\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.8.0_11]\r\n    \tat java.lang.reflect.Method.invoke(Method.java:483) [rt.jar:1.8.0_11]\r\n    \tat org.jboss.weld.util.reflection.Reflections.invokeAndUnwrap(Reflections.java:401) [weld-core-impl-2.1.2.Final.jar:2014-01-09 09:23]\r\n    \tat org.jboss.weld.bean.proxy.EnterpriseBeanProxyMethodHandler.invoke(EnterpriseBeanProxyMethodHandler.java:99) [weld-core-impl-2.1.2.Final.jar:2014-01-09 09:23]\r\n    \tat org.jboss.weld.bean.proxy.EnterpriseTargetBeanInstance.invoke(EnterpriseTargetBeanInstance.java:56) [weld-core-impl-2.1.2.Final.jar:2014-01-09 09:23]\r\n    \tat org.jboss.weld.bean.proxy.InjectionPointPropagatingEnterpriseTargetBeanInstance.invoke(InjectionPointPropagatingEnterpriseTargetBeanInstance.java:65) [weld-core-impl-2.1.2.Final.jar:2014-01-09 09:23]\r\n    \tat org.jboss.weld.bean.proxy.ProxyMethodHandler.invoke(ProxyMethodHandler.java:100) [weld-core-impl-2.1.2.Final.jar:2014-01-09 09:23]\r\n    \tat org.profit.pgb.rest.resource.UserResource$Proxy$_$$_Weld$EnterpriseProxy$.create(Unknown Source) [classes:]\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.8.0_11]\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) [rt.jar:1.8.0_11]\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.8.0_11]\r\n    \tat java.lang.reflect.Method.invoke(Method.java:483) [rt.jar:1.8.0_11]\r\n    \tat org.jboss.resteasy.core.MethodInjectorImpl.invoke(MethodInjectorImpl.java:137) [resteasy-jaxrs-3.0.8.Final.jar:]\r\n    \tat org.jboss.resteasy.core.ResourceMethodInvoker.invokeOnTarget(ResourceMethodInvoker.java:296) [resteasy-jaxrs-3.0.8.Final.jar:]\r\n    \tat org.jboss.resteasy.core.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:250) [resteasy-jaxrs-3.0.8.Final.jar:]\r\n    \tat org.jboss.resteasy.core.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:237) [resteasy-jaxrs-3.0.8.Final.jar:]\r\n    \tat org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:356) [resteasy-jaxrs-3.0.8.Final.jar:]\r\n    \tat org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:179) [resteasy-jaxrs-3.0.8.Final.jar:]\r\n    \tat org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:220) [resteasy-jaxrs-3.0.8.Final.jar:]\r\n    \tat org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:56) [resteasy-jaxrs-3.0.8.Final.jar:]\r\n    \tat org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:51) [resteasy-jaxrs-3.0.8.Final.jar:]\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:790) [jboss-servlet-api_3.1_spec-1.0.0.Final.jar:1.0.0.Final]\r\n    \tat io.undertow.servlet.handlers.ServletHandler.handleRequest(ServletHandler.java:85) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.servlet.handlers.security.ServletSecurityRoleHandler.handleRequest(ServletSecurityRoleHandler.java:61) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.servlet.handlers.ServletDispatchingHandler.handleRequest(ServletDispatchingHandler.java:36) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat org.wildfly.extension.undertow.security.SecurityContextAssociationHandler.handleRequest(SecurityContextAssociationHandler.java:78)\r\n    \tat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:25) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.servlet.handlers.security.SSLInformationAssociationHandler.handleRequest(SSLInformationAssociationHandler.java:113) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.servlet.handlers.security.ServletAuthenticationCallHandler.handleRequest(ServletAuthenticationCallHandler.java:56) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:25) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.security.handlers.AuthenticationConstraintHandler.handleRequest(AuthenticationConstraintHandler.java:51) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.security.handlers.AbstractConfidentialityHandler.handleRequest(AbstractConfidentialityHandler.java:45) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.servlet.handlers.security.ServletConfidentialityConstraintHandler.handleRequest(ServletConfidentialityConstraintHandler.java:61) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.servlet.handlers.security.ServletSecurityConstraintHandler.handleRequest(ServletSecurityConstraintHandler.java:56) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.security.handlers.AuthenticationMechanismsHandler.handleRequest(AuthenticationMechanismsHandler.java:58) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.servlet.handlers.security.CachedAuthenticatedSessionHandler.handleRequest(CachedAuthenticatedSessionHandler.java:70) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.security.handlers.SecurityInitialHandler.handleRequest(SecurityInitialHandler.java:76) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:25) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat org.wildfly.extension.undertow.security.jacc.JACCContextIdHandler.handleRequest(JACCContextIdHandler.java:61)\r\n    \tat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:25) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:25) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.servlet.handlers.ServletInitialHandler.handleFirstRequest(ServletInitialHandler.java:240) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.servlet.handlers.ServletInitialHandler.dispatchRequest(ServletInitialHandler.java:227) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.servlet.handlers.ServletInitialHandler.access$000(ServletInitialHandler.java:73) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.servlet.handlers.ServletInitialHandler$1.handleRequest(ServletInitialHandler.java:146) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.server.Connectors.executeRootHandler(Connectors.java:177) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:727) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [rt.jar:1.8.0_11]\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [rt.jar:1.8.0_11]\r\n    \tat java.lang.Thread.run(Thread.java:745) [rt.jar:1.8.0_11]\r\n    \r\n    16:45:25,957 ERROR [io.undertow.request] (default task-60) UT005023: Exception handling request to /pgb/rest/user/create: org.jboss.resteasy.spi.UnhandledException: javax.ejb.EJBAccessException: JBAS014502: Invocation on method: public javax.ws.rs.core.Response org.profit.pgb.rest.resource.UserResource.create(org.profit.pgb.rest.api.CreateRequest) of bean: UserResource is not allowed\r\n    \tat org.jboss.resteasy.core.ExceptionHandler.handleApplicationException(ExceptionHandler.java:76) [resteasy-jaxrs-3.0.8.Final.jar:]\r\n    \tat org.jboss.resteasy.core.ExceptionHandler.handleException(ExceptionHandler.java:212) [resteasy-jaxrs-3.0.8.Final.jar:]\r\n    \tat org.jboss.resteasy.core.SynchronousDispatcher.writeException(SynchronousDispatcher.java:149) [resteasy-jaxrs-3.0.8.Final.jar:]\r\n    \tat org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:372) [resteasy-jaxrs-3.0.8.Final.jar:]\r\n    \tat org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:179) [resteasy-jaxrs-3.0.8.Final.jar:]\r\n    \tat org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:220) [resteasy-jaxrs-3.0.8.Final.jar:]\r\n    \tat org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:56) [resteasy-jaxrs-3.0.8.Final.jar:]\r\n    \tat org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:51) [resteasy-jaxrs-3.0.8.Final.jar:]\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:790) [jboss-servlet-api_3.1_spec-1.0.0.Final.jar:1.0.0.Final]\r\n    \tat io.undertow.servlet.handlers.ServletHandler.handleRequest(ServletHandler.java:85) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.servlet.handlers.security.ServletSecurityRoleHandler.handleRequest(ServletSecurityRoleHandler.java:61) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.servlet.handlers.ServletDispatchingHandler.handleRequest(ServletDispatchingHandler.java:36) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat org.wildfly.extension.undertow.security.SecurityContextAssociationHandler.handleRequest(SecurityContextAssociationHandler.java:78)\r\n    \tat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:25) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.servlet.handlers.security.SSLInformationAssociationHandler.handleRequest(SSLInformationAssociationHandler.java:113) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.servlet.handlers.security.ServletAuthenticationCallHandler.handleRequest(ServletAuthenticationCallHandler.java:56) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:25) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.security.handlers.AuthenticationConstraintHandler.handleRequest(AuthenticationConstraintHandler.java:51) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.security.handlers.AbstractConfidentialityHandler.handleRequest(AbstractConfidentialityHandler.java:45) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.servlet.handlers.security.ServletConfidentialityConstraintHandler.handleRequest(ServletConfidentialityConstraintHandler.java:61) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.servlet.handlers.security.ServletSecurityConstraintHandler.handleRequest(ServletSecurityConstraintHandler.java:56) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.security.handlers.AuthenticationMechanismsHandler.handleRequest(AuthenticationMechanismsHandler.java:58) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.servlet.handlers.security.CachedAuthenticatedSessionHandler.handleRequest(CachedAuthenticatedSessionHandler.java:70) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.security.handlers.SecurityInitialHandler.handleRequest(SecurityInitialHandler.java:76) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:25) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat org.wildfly.extension.undertow.security.jacc.JACCContextIdHandler.handleRequest(JACCContextIdHandler.java:61)\r\n    \tat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:25) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:25) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.servlet.handlers.ServletInitialHandler.handleFirstRequest(ServletInitialHandler.java:240) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.servlet.handlers.ServletInitialHandler.dispatchRequest(ServletInitialHandler.java:227) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.servlet.handlers.ServletInitialHandler.access$000(ServletInitialHandler.java:73) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.servlet.handlers.ServletInitialHandler$1.handleRequest(ServletInitialHandler.java:146) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.server.Connectors.executeRootHandler(Connectors.java:177) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:727) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [rt.jar:1.8.0_11]\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [rt.jar:1.8.0_11]\r\n    \tat java.lang.Thread.run(Thread.java:745) [rt.jar:1.8.0_11]\r\n    Caused by: javax.ejb.EJBAccessException: JBAS014502: Invocation on method: public javax.ws.rs.core.Response org.profit.pgb.rest.resource.UserResource.create(org.profit.pgb.rest.api.CreateRequest) of bean: UserResource is not allowed\r\n    \tat org.jboss.as.ejb3.security.AuthorizationInterceptor.processInvocation(AuthorizationInterceptor.java:135) [wildfly-ejb3-8.1.0.Final.jar:8.1.0.Final]\r\n    \tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:309)\r\n    \tat org.jboss.as.ejb3.security.SecurityContextInterceptor.processInvocation(SecurityContextInterceptor.java:95) [wildfly-ejb3-8.1.0.Final.jar:8.1.0.Final]\r\n    \tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:309)\r\n    \tat org.jboss.as.ejb3.component.interceptors.ShutDownInterceptorFactory$1.processInvocation(ShutDownInterceptorFactory.java:64) [wildfly-ejb3-8.1.0.Final.jar:8.1.0.Final]\r\n    \tat org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:309)\r\n    \tat ... etc. (not fully shown due to SO&#39;s character limit on questions..)\r\n\r\nI&#39;ve seen other people ask similar questions, some which remain unanswered to this day (e.g. https://stackoverflow.com/questions/19863311/jax-rs-service-rolesallowed-annotation-throwing-exception) and others which have solutions that either do not work for me or maybe I do not apply the solution correctly (e.g. https://stackoverflow.com/questions/24591782/resteasy-support-for-jax-rs-rolesallowed).\r\n\r\nI found this: https://developer.jboss.org/thread/177728?start=0&amp;tstart=0 (titled: *&quot;@RolesAllowed, @DenyAll require presence of org.jboss.ejb3.annotation.SecurityDomain?&quot;*), In tried the solution but I cannot get it to work for my project. Not sure if the solution is not applicable for my situation or if I&#39;m just doing it wrong.\r\n\r\nI found this: https://developer.jboss.org/message/720815 (titled: *&quot;is this a defect for processing org.jboss.ejb3.annotation.SecurityDomain ?&quot;*), but I do not understand where my *jboss-ejb-client.properties* are supposed to be. I think they set their project up quite different from me. So no luck with that.\r\n\r\nI found [a guide on EJB3 security][2], as suggested there, I provided the following code in my *standalone.xml*-file:\r\n\r\n    &lt;security-domain name=&quot;other&quot; cache-type=&quot;default&quot;&gt;\r\n        &lt;authentication&gt;\r\n            &lt;login-module code=&quot;Remoting&quot; flag=&quot;optional&quot;&gt;\r\n                &lt;module-option name=&quot;password-stacking&quot; value=&quot;useFirstPass&quot;/&gt;\r\n            &lt;/login-module&gt;\r\n            &lt;login-module code=&quot;RealmDirect&quot; flag=&quot;required&quot;&gt;\r\n                &lt;module-option name=&quot;password-stacking&quot; value=&quot;useFirstPass&quot;/&gt;\r\n            &lt;/login-module&gt;\r\n        &lt;/authentication&gt;\r\n    &lt;/security-domain&gt;\r\n\r\nBut that did not solve anything at all. I am not sure if it did anything.\r\n\r\nFinally, I found this SO question: https://stackoverflow.com/questions/24591782/resteasy-support-for-jax-rs-rolesallowed (which references to the &lt;a href=&quot;http://docs.jboss.org/resteasy/docs/3.0.5.Final/userguide/html/Securing_JAX-RS_and_RESTeasy.html&quot;&gt;RESTEasy Documentation&lt;/a&gt;). Even though I also mentioned this question a few paragraphs up as containing a solution that does not work for me, it did change the error to another error. As suggested there I added a *&amp;lt;context-param&amp;gt;*-block to my *web.xml*-file:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;web-app version=&quot;2.5&quot; xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot;&gt;\r\n        &lt;security-constraint&gt;\r\n            &lt;web-resource-collection&gt;\r\n                &lt;web-resource-name&gt;PGB&lt;/web-resource-name&gt;\r\n                &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\r\n                &lt;http-method&gt;GET&lt;/http-method&gt;\r\n                &lt;http-method&gt;POST&lt;/http-method&gt;\r\n            &lt;/web-resource-collection&gt;\r\n    \r\n            &lt;user-data-constraint&gt;\r\n                &lt;!-- use of SSL is required when CONFIDENTIAL is specified --&gt;\r\n                &lt;transport-guarantee&gt;CONFIDENTIAL&lt;/transport-guarantee&gt;\r\n            &lt;/user-data-constraint&gt;\r\n        &lt;/security-constraint&gt;\r\n        \r\n        &lt;context-param&gt;\r\n          &lt;param-name&gt;resteasy.role.based.security&lt;/param-name&gt;\r\n          &lt;param-value&gt;true&lt;/param-value&gt;\r\n       &lt;/context-param&gt;\r\n    &lt;/web-app&gt;\r\n\r\nWhich results in the following error if I try to create a new user (not completely posted here due to character limit of SO questions):\r\n\r\n    16:58:45,992 WARN  [org.jboss.resteasy.core.ExceptionHandler] (default task-61) failed to execute: javax.ws.rs.ForbiddenException: HTTP 403 Forbidden\r\n    \tat org.jboss.resteasy.plugins.interceptors.RoleBasedSecurityFilter.filter(RoleBasedSecurityFilter.java:45) [resteasy-jaxrs-3.0.8.Final.jar:]\r\n    \tat ... etc.\r\n\r\nThis error is not very helpful either, in fact, I find even less information when I search on that error than when I search on the previous error. So, I am not sure if that is a step into the right direction. What is better to have returned from the server? A status 500 (Internal Server Error) or a status 403 (Forbidden)? Also, if after applying that &quot;solution&quot; I change the annotation to @PermitAll, then the creation of a new user works just as before, so it didn&#39;t really make the situation any worse.\r\n\r\nHowever, I can find [the source code of RoleBasedSecurityFilter][3], which shows that it throws the `ForbiddenException`. It shows that a certain *isUserInRole* method must return true, but it does not do that in my application. I can&#39;t get it to return true. It makes me wonder, https://stackoverflow.com/q/26039920/2541501\r\n\r\nI also found the following SO question: https://stackoverflow.com/questions/15188895/rolesallowed-cannot-be-resolved-with-jersey, which is answered by Abhijit Sarkar, and he refers to [an IBM article][4]. Maybe the solution to my problem lies in there, but I have not found it yet.. Anyway, it is suggested there that either adding a *security-role* block to my *web.xml*-file or adding a *@DeclareRoles* annotation to my *UserResource.java* file should solve the problem, but the HTTP 403 Forbidden warning still remains after I do so. It is very frustrating.\r\n\r\nMy *security-role* block (in web.xml) looks as follows:\r\n\r\n    &lt;security-role id=&quot;role_admin&quot;&gt;\r\n        &lt;description&gt;This is role 1 (admin)&lt;/description&gt;\r\n        &lt;role-name&gt;admin&lt;/role-name&gt;\r\n    &lt;/security-role&gt;\r\n\r\nAnd I added the following *security-constraint* block (in web.xml): (note the *auth-constraint*)\r\n\r\n    &lt;security-constraint&gt;\r\n        &lt;web-resource-collection&gt;\r\n            &lt;web-resource-name&gt;PGB&lt;/web-resource-name&gt;\r\n            &lt;url-pattern&gt;/rest/user/create&lt;/url-pattern&gt;\r\n            &lt;http-method&gt;GET&lt;/http-method&gt;\r\n            &lt;http-method&gt;POST&lt;/http-method&gt;\r\n        &lt;/web-resource-collection&gt;\r\n        &lt;auth-constraint id=&quot;AuthConstraint_createUser&quot;&gt;\r\n            &lt;description&gt; Only admin can create a new user&lt;/description&gt;\r\n            &lt;role-name&gt;admin&lt;/role-name&gt;\r\n        &lt;/auth-constraint&gt;\r\n        &lt;user-data-constraint&gt;\r\n            &lt;!-- use of SSL is required when CONFIDENTIAL is specified --&gt;\r\n            &lt;transport-guarantee&gt;CONFIDENTIAL&lt;/transport-guarantee&gt;\r\n        &lt;/user-data-constraint&gt;\r\n    &lt;/security-constraint&gt;\r\n\r\nI realize now that my problem lies either in the deployment descriptors (*web.xml*) or the server configuration (WildFly&#39;s *standalone-full.xml*).\r\n\r\nI added a `login-config` element (with [FORM authentication][5]) to my *web.xml* file. Changed my login HTML page to fit [the required format][6]. I followed some of the step of this article on [migrating a Java EE App from GlassFish to WildFly][6], but I think I still did something wrong because I always get at the login error page when trying to log in with valid user credentials.\r\n\r\nSee here the `security-domain` element I added to my WildFly configuration:\r\n\r\n    &lt;security-domain name=&quot;app&quot; cache-type=&quot;default&quot;&gt;\r\n        &lt;authentication&gt;\r\n            &lt;login-module code=&quot;Database&quot; flag=&quot;required&quot;&gt;\r\n                &lt;module-option name=&quot;dsJndiName&quot; value=&quot;java:jboss/datasources/mySQL_pool_rel&quot;/&gt;\r\n                &lt;module-option name=&quot;principalsQuery&quot; value=&quot;select hashed_password from user where email_address=?&quot;/&gt;\r\n                &lt;module-option name=&quot;rolesQuery&quot; value=&quot;select role_name, &#39;Roles&#39; from role r inner join user u on r.role_type = u.role_type where u.email_address = ?&quot;/&gt;\r\n                &lt;module-option name=&quot;hashAlgorithm&quot; value=&quot;SHA-256&quot;/&gt;\r\n                &lt;module-option name=&quot;hashEncoding&quot; value=&quot;BASE64&quot;/&gt;\r\n                &lt;module-option name=&quot;unauthenticatedIdentity&quot; value=&quot;guest&quot;/&gt;\r\n            &lt;/login-module&gt;\r\n            &lt;login-module code=&quot;RoleMapping&quot; flag=&quot;required&quot;&gt;\r\n                 &lt;module-option name=&quot;rolesProperties&quot; value=&quot;file:${jboss.server.config.dir}/app.properties&quot;/&gt;\r\n                 &lt;module-option name=&quot;replaceRole&quot; value=&quot;false&quot;/&gt;\r\n            &lt;/login-module&gt;\r\n        &lt;/authentication&gt;\r\n    &lt;/security-domain&gt;\r\n\r\nI think something is wrong with my *rolesQuery* defined there, but I can&#39;t figure out what.\r\n\r\nI would love to know how to implement role-based security for my Web application. Therefore, I also accept other approaches to role-based security, as long as it works. Suggestions are welcome.\r\n\r\nI also placed [my question on developer.jboss.org][7], but I also got no response there yet.\r\n\r\nI provided one workaround solution to my problem as an answer to this question, but it is not a real solution (as explained in that answer). I am still interested in doing this the right way.\r\n\r\n\r\n  [1]: http://howtodoinjava.com/2013/07/25/jax-rs-2-0-resteasy-3-0-2-final-security-tutorial/\r\n  [2]: https://github.com/jboss-eap/quickstart/tree/master-eap6/ejb-security\r\n  [3]: https://github.com/resteasy/Resteasy/blob/master/jaxrs/resteasy-jaxrs/src/main/java/org/jboss/resteasy/plugins/interceptors/RoleBasedSecurityFilter.java\r\n  [4]: http://www-01.ibm.com/support/knowledgecenter/SSAW57_8.5.5/com.ibm.websphere.nd.multiplatform.doc/ae/twbs_jaxrs_impl_securejaxrs_webcont.html?cp=SSAW57_8.5.5%2F3-3-0-42-3-0\r\n  [5]: http://docs.oracle.com/cd/E19798-01/821-1841/bncbn/index.html\r\n  [6]: http://docs.oracle.com/cd/E19798-01/821-1841/bncca/index.html\r\n  [7]: https://developer.jboss.org/thread/248877","title":"How do I get the @RolesAllowed annotation to work for my Web application?","body":"<p>I am making a Web application using Backbone.js, Bootstrap, NetBeans IDE 8.0, Java EE 7, JDK 8, WildFly server 8.1.0, JBoss RESTEasy (resteasy-jaxrs-3.0.8), JBoss 2.2.22, JBoss EJB 3.</p>\n\n<p>I am (relatively) new to Web development, and as such I have only just started to grasp a lot of basic concepts and technologies. I am trying to build a permission system with users and roles into a Web application, but I cannot seem to make the <em>@RolesAllowed annotation</em> to work in my RESTful Web Service. I am already working on this problem for a few days.</p>\n\n<p>I have a RESTful resource (Java Enterprise/Session Bean?) called <em>UserResource.java</em>, in here I have a method <em>create</em> to create a new user for the application:</p>\n\n<pre><code>import java.net.URI;\nimport java.security.Principal;\nimport java.util.List;\nimport javax.annotation.security.PermitAll;\nimport javax.annotation.security.RolesAllowed;\nimport javax.ejb.EJB;\nimport javax.ejb.Stateless;\nimport javax.ws.rs.*;\nimport javax.ws.rs.core.*;\nimport org.jboss.ejb3.annotation.SecurityDomain;\n\n@Stateless\n@SecurityDomain(\"other\")\n@Path(\"/user\")\npublic class UserResource {\n    @EJB(name = \"UserServiceImp\")\n    UserService userService;\n\n    @Context\n    private UriInfo uriInfo;\n\n    @RolesAllowed({\"admin\"})\n    @Path(\"create\")\n    @POST\n    public Response create(CreateRequest request) {        \n        try {\n            System.out.println(\"Start of create method\");\n            User user = userService.createUser(request);\n            return getCreateResponse(user);\n        }\n        catch (Exception e){\n            return Response.status(401).entity(\"Failed to create user\").build();\n        }\n    }\n}\n</code></pre>\n\n<p>This <em>create</em> method works if I use the @PermitAll annotation, but it fails with an error if I use the @RolesAllowed annotation.</p>\n\n<p>I have this Backbone view <em>CreateUserView</em> which provides a form (in HTML) to an end user (with admin rights) for creating new users for the application. On clicking the submit button, JSON data gets send to the url 'rest/user/create' for creating a new user. Before the <em>create</em> method in <em>UserResource.java</em> gets executed, my <em>SecurityInterceptor.java</em> (which implements <em>javax.ws.rs.container.ContainerRequestFilter</em>) checks if the user has the required permissions. I have debugged this thorough and the Security Interceptor is functioning as it should. So after the Security Interceptor gives clear access, something goes wrong in <em>UserResource.java</em>. (As a side note, not sure if this is important, but I believe the Security Interceptor is based on <a href=\"http://howtodoinjava.com/2013/07/25/jax-rs-2-0-resteasy-3-0-2-final-security-tutorial/\" rel=\"noreferrer\">this blog post about RESTEasy security</a>. I was working on the application with another guy, he initially implemented it, so I'm not sure.. but it looks almost identical. Anyway that guy has moved on to another project a few weeks ago.)</p>\n\n<p>The error I am getting (output from the server) is the following:</p>\n\n<pre><code>16:45:25,775 ERROR [org.jboss.as.ejb3.invocation] (default task-60) JBAS014134: EJB Invocation failed on component UserResource for method public javax.ws.rs.core.Response org.profit.pgb.rest.resource.UserResource.create(org.profit.pgb.rest.api.CreateRequest): javax.ejb.EJBAccessException: JBAS014502: Invocation on method: public javax.ws.rs.core.Response org.profit.pgb.rest.resource.UserResource.create(org.profit.pgb.rest.api.CreateRequest) of bean: UserResource is not allowed\n    at org.jboss.as.ejb3.security.AuthorizationInterceptor.processInvocation(AuthorizationInterceptor.java:135) [wildfly-ejb3-8.1.0.Final.jar:8.1.0.Final]\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:309)\n    at org.jboss.as.ejb3.security.SecurityContextInterceptor.processInvocation(SecurityContextInterceptor.java:95) [wildfly-ejb3-8.1.0.Final.jar:8.1.0.Final]\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:309)\n    at org.jboss.as.ejb3.component.interceptors.ShutDownInterceptorFactory$1.processInvocation(ShutDownInterceptorFactory.java:64) [wildfly-ejb3-8.1.0.Final.jar:8.1.0.Final]\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:309)\n    at org.jboss.as.ejb3.component.interceptors.LoggingInterceptor.processInvocation(LoggingInterceptor.java:59) [wildfly-ejb3-8.1.0.Final.jar:8.1.0.Final]\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:309)\n    at org.jboss.as.ee.component.NamespaceContextInterceptor.processInvocation(NamespaceContextInterceptor.java:50)\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:309)\n    at org.jboss.as.ejb3.component.interceptors.AdditionalSetupInterceptor.processInvocation(AdditionalSetupInterceptor.java:55) [wildfly-ejb3-8.1.0.Final.jar:8.1.0.Final]\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:309)\n    at org.jboss.invocation.ContextClassLoaderInterceptor.processInvocation(ContextClassLoaderInterceptor.java:64)\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:309)\n    at org.jboss.invocation.InterceptorContext.run(InterceptorContext.java:326)\n    at org.wildfly.security.manager.WildFlySecurityManager.doChecked(WildFlySecurityManager.java:448)\n    at org.jboss.invocation.AccessCheckingInterceptor.processInvocation(AccessCheckingInterceptor.java:61)\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:309)\n    at org.jboss.invocation.InterceptorContext.run(InterceptorContext.java:326)\n    at org.jboss.invocation.PrivilegedWithCombinerInterceptor.processInvocation(PrivilegedWithCombinerInterceptor.java:80)\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:309)\n    at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61)\n    at org.jboss.as.ee.component.ViewService$View.invoke(ViewService.java:185)\n    at org.jboss.as.ee.component.ViewDescription$1.processInvocation(ViewDescription.java:182)\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:309)\n    at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61)\n    at org.jboss.as.ee.component.ProxyInvocationHandler.invoke(ProxyInvocationHandler.java:73)\n    at org.profit.pgb.rest.resource.UserResource$$$view45.create(Unknown Source) [classes:]\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.8.0_11]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) [rt.jar:1.8.0_11]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.8.0_11]\n    at java.lang.reflect.Method.invoke(Method.java:483) [rt.jar:1.8.0_11]\n    at org.jboss.weld.util.reflection.Reflections.invokeAndUnwrap(Reflections.java:401) [weld-core-impl-2.1.2.Final.jar:2014-01-09 09:23]\n    at org.jboss.weld.bean.proxy.EnterpriseBeanProxyMethodHandler.invoke(EnterpriseBeanProxyMethodHandler.java:99) [weld-core-impl-2.1.2.Final.jar:2014-01-09 09:23]\n    at org.jboss.weld.bean.proxy.EnterpriseTargetBeanInstance.invoke(EnterpriseTargetBeanInstance.java:56) [weld-core-impl-2.1.2.Final.jar:2014-01-09 09:23]\n    at org.jboss.weld.bean.proxy.InjectionPointPropagatingEnterpriseTargetBeanInstance.invoke(InjectionPointPropagatingEnterpriseTargetBeanInstance.java:65) [weld-core-impl-2.1.2.Final.jar:2014-01-09 09:23]\n    at org.jboss.weld.bean.proxy.ProxyMethodHandler.invoke(ProxyMethodHandler.java:100) [weld-core-impl-2.1.2.Final.jar:2014-01-09 09:23]\n    at org.profit.pgb.rest.resource.UserResource$Proxy$_$$_Weld$EnterpriseProxy$.create(Unknown Source) [classes:]\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.8.0_11]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) [rt.jar:1.8.0_11]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.8.0_11]\n    at java.lang.reflect.Method.invoke(Method.java:483) [rt.jar:1.8.0_11]\n    at org.jboss.resteasy.core.MethodInjectorImpl.invoke(MethodInjectorImpl.java:137) [resteasy-jaxrs-3.0.8.Final.jar:]\n    at org.jboss.resteasy.core.ResourceMethodInvoker.invokeOnTarget(ResourceMethodInvoker.java:296) [resteasy-jaxrs-3.0.8.Final.jar:]\n    at org.jboss.resteasy.core.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:250) [resteasy-jaxrs-3.0.8.Final.jar:]\n    at org.jboss.resteasy.core.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:237) [resteasy-jaxrs-3.0.8.Final.jar:]\n    at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:356) [resteasy-jaxrs-3.0.8.Final.jar:]\n    at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:179) [resteasy-jaxrs-3.0.8.Final.jar:]\n    at org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:220) [resteasy-jaxrs-3.0.8.Final.jar:]\n    at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:56) [resteasy-jaxrs-3.0.8.Final.jar:]\n    at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:51) [resteasy-jaxrs-3.0.8.Final.jar:]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:790) [jboss-servlet-api_3.1_spec-1.0.0.Final.jar:1.0.0.Final]\n    at io.undertow.servlet.handlers.ServletHandler.handleRequest(ServletHandler.java:85) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.servlet.handlers.security.ServletSecurityRoleHandler.handleRequest(ServletSecurityRoleHandler.java:61) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.servlet.handlers.ServletDispatchingHandler.handleRequest(ServletDispatchingHandler.java:36) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\n    at org.wildfly.extension.undertow.security.SecurityContextAssociationHandler.handleRequest(SecurityContextAssociationHandler.java:78)\n    at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:25) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.servlet.handlers.security.SSLInformationAssociationHandler.handleRequest(SSLInformationAssociationHandler.java:113) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.servlet.handlers.security.ServletAuthenticationCallHandler.handleRequest(ServletAuthenticationCallHandler.java:56) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:25) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.security.handlers.AuthenticationConstraintHandler.handleRequest(AuthenticationConstraintHandler.java:51) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.security.handlers.AbstractConfidentialityHandler.handleRequest(AbstractConfidentialityHandler.java:45) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.servlet.handlers.security.ServletConfidentialityConstraintHandler.handleRequest(ServletConfidentialityConstraintHandler.java:61) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.servlet.handlers.security.ServletSecurityConstraintHandler.handleRequest(ServletSecurityConstraintHandler.java:56) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.security.handlers.AuthenticationMechanismsHandler.handleRequest(AuthenticationMechanismsHandler.java:58) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.servlet.handlers.security.CachedAuthenticatedSessionHandler.handleRequest(CachedAuthenticatedSessionHandler.java:70) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.security.handlers.SecurityInitialHandler.handleRequest(SecurityInitialHandler.java:76) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:25) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\n    at org.wildfly.extension.undertow.security.jacc.JACCContextIdHandler.handleRequest(JACCContextIdHandler.java:61)\n    at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:25) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:25) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.servlet.handlers.ServletInitialHandler.handleFirstRequest(ServletInitialHandler.java:240) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.servlet.handlers.ServletInitialHandler.dispatchRequest(ServletInitialHandler.java:227) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.servlet.handlers.ServletInitialHandler.access$000(ServletInitialHandler.java:73) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.servlet.handlers.ServletInitialHandler$1.handleRequest(ServletInitialHandler.java:146) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.server.Connectors.executeRootHandler(Connectors.java:177) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:727) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [rt.jar:1.8.0_11]\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [rt.jar:1.8.0_11]\n    at java.lang.Thread.run(Thread.java:745) [rt.jar:1.8.0_11]\n\n16:45:25,957 ERROR [io.undertow.request] (default task-60) UT005023: Exception handling request to /pgb/rest/user/create: org.jboss.resteasy.spi.UnhandledException: javax.ejb.EJBAccessException: JBAS014502: Invocation on method: public javax.ws.rs.core.Response org.profit.pgb.rest.resource.UserResource.create(org.profit.pgb.rest.api.CreateRequest) of bean: UserResource is not allowed\n    at org.jboss.resteasy.core.ExceptionHandler.handleApplicationException(ExceptionHandler.java:76) [resteasy-jaxrs-3.0.8.Final.jar:]\n    at org.jboss.resteasy.core.ExceptionHandler.handleException(ExceptionHandler.java:212) [resteasy-jaxrs-3.0.8.Final.jar:]\n    at org.jboss.resteasy.core.SynchronousDispatcher.writeException(SynchronousDispatcher.java:149) [resteasy-jaxrs-3.0.8.Final.jar:]\n    at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:372) [resteasy-jaxrs-3.0.8.Final.jar:]\n    at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:179) [resteasy-jaxrs-3.0.8.Final.jar:]\n    at org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:220) [resteasy-jaxrs-3.0.8.Final.jar:]\n    at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:56) [resteasy-jaxrs-3.0.8.Final.jar:]\n    at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:51) [resteasy-jaxrs-3.0.8.Final.jar:]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:790) [jboss-servlet-api_3.1_spec-1.0.0.Final.jar:1.0.0.Final]\n    at io.undertow.servlet.handlers.ServletHandler.handleRequest(ServletHandler.java:85) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.servlet.handlers.security.ServletSecurityRoleHandler.handleRequest(ServletSecurityRoleHandler.java:61) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.servlet.handlers.ServletDispatchingHandler.handleRequest(ServletDispatchingHandler.java:36) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\n    at org.wildfly.extension.undertow.security.SecurityContextAssociationHandler.handleRequest(SecurityContextAssociationHandler.java:78)\n    at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:25) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.servlet.handlers.security.SSLInformationAssociationHandler.handleRequest(SSLInformationAssociationHandler.java:113) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.servlet.handlers.security.ServletAuthenticationCallHandler.handleRequest(ServletAuthenticationCallHandler.java:56) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:25) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.security.handlers.AuthenticationConstraintHandler.handleRequest(AuthenticationConstraintHandler.java:51) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.security.handlers.AbstractConfidentialityHandler.handleRequest(AbstractConfidentialityHandler.java:45) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.servlet.handlers.security.ServletConfidentialityConstraintHandler.handleRequest(ServletConfidentialityConstraintHandler.java:61) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.servlet.handlers.security.ServletSecurityConstraintHandler.handleRequest(ServletSecurityConstraintHandler.java:56) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.security.handlers.AuthenticationMechanismsHandler.handleRequest(AuthenticationMechanismsHandler.java:58) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.servlet.handlers.security.CachedAuthenticatedSessionHandler.handleRequest(CachedAuthenticatedSessionHandler.java:70) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.security.handlers.SecurityInitialHandler.handleRequest(SecurityInitialHandler.java:76) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:25) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\n    at org.wildfly.extension.undertow.security.jacc.JACCContextIdHandler.handleRequest(JACCContextIdHandler.java:61)\n    at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:25) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:25) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.servlet.handlers.ServletInitialHandler.handleFirstRequest(ServletInitialHandler.java:240) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.servlet.handlers.ServletInitialHandler.dispatchRequest(ServletInitialHandler.java:227) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.servlet.handlers.ServletInitialHandler.access$000(ServletInitialHandler.java:73) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.servlet.handlers.ServletInitialHandler$1.handleRequest(ServletInitialHandler.java:146) [undertow-servlet-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.server.Connectors.executeRootHandler(Connectors.java:177) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\n    at io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:727) [undertow-core-1.0.15.Final.jar:1.0.15.Final]\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [rt.jar:1.8.0_11]\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [rt.jar:1.8.0_11]\n    at java.lang.Thread.run(Thread.java:745) [rt.jar:1.8.0_11]\nCaused by: javax.ejb.EJBAccessException: JBAS014502: Invocation on method: public javax.ws.rs.core.Response org.profit.pgb.rest.resource.UserResource.create(org.profit.pgb.rest.api.CreateRequest) of bean: UserResource is not allowed\n    at org.jboss.as.ejb3.security.AuthorizationInterceptor.processInvocation(AuthorizationInterceptor.java:135) [wildfly-ejb3-8.1.0.Final.jar:8.1.0.Final]\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:309)\n    at org.jboss.as.ejb3.security.SecurityContextInterceptor.processInvocation(SecurityContextInterceptor.java:95) [wildfly-ejb3-8.1.0.Final.jar:8.1.0.Final]\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:309)\n    at org.jboss.as.ejb3.component.interceptors.ShutDownInterceptorFactory$1.processInvocation(ShutDownInterceptorFactory.java:64) [wildfly-ejb3-8.1.0.Final.jar:8.1.0.Final]\n    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:309)\n    at ... etc. (not fully shown due to SO's character limit on questions..)\n</code></pre>\n\n<p>I've seen other people ask similar questions, some which remain unanswered to this day (e.g. <a href=\"https://stackoverflow.com/questions/19863311/jax-rs-service-rolesallowed-annotation-throwing-exception\">jax-rs service RolesAllowed Annotation throwing exception</a>) and others which have solutions that either do not work for me or maybe I do not apply the solution correctly (e.g. <a href=\"https://stackoverflow.com/questions/24591782/resteasy-support-for-jax-rs-rolesallowed\">RESTEasy support for JAX-RS @RolesAllowed</a>).</p>\n\n<p>I found this: <a href=\"https://developer.jboss.org/thread/177728?start=0&amp;tstart=0\" rel=\"noreferrer\">https://developer.jboss.org/thread/177728?start=0&amp;tstart=0</a> (titled: <em>\"@RolesAllowed, @DenyAll require presence of org.jboss.ejb3.annotation.SecurityDomain?\"</em>), In tried the solution but I cannot get it to work for my project. Not sure if the solution is not applicable for my situation or if I'm just doing it wrong.</p>\n\n<p>I found this: <a href=\"https://developer.jboss.org/message/720815\" rel=\"noreferrer\">https://developer.jboss.org/message/720815</a> (titled: <em>\"is this a defect for processing org.jboss.ejb3.annotation.SecurityDomain ?\"</em>), but I do not understand where my <em>jboss-ejb-client.properties</em> are supposed to be. I think they set their project up quite different from me. So no luck with that.</p>\n\n<p>I found <a href=\"https://github.com/jboss-eap/quickstart/tree/master-eap6/ejb-security\" rel=\"noreferrer\">a guide on EJB3 security</a>, as suggested there, I provided the following code in my <em>standalone.xml</em>-file:</p>\n\n<pre><code>&lt;security-domain name=\"other\" cache-type=\"default\"&gt;\n    &lt;authentication&gt;\n        &lt;login-module code=\"Remoting\" flag=\"optional\"&gt;\n            &lt;module-option name=\"password-stacking\" value=\"useFirstPass\"/&gt;\n        &lt;/login-module&gt;\n        &lt;login-module code=\"RealmDirect\" flag=\"required\"&gt;\n            &lt;module-option name=\"password-stacking\" value=\"useFirstPass\"/&gt;\n        &lt;/login-module&gt;\n    &lt;/authentication&gt;\n&lt;/security-domain&gt;\n</code></pre>\n\n<p>But that did not solve anything at all. I am not sure if it did anything.</p>\n\n<p>Finally, I found this SO question: <a href=\"https://stackoverflow.com/questions/24591782/resteasy-support-for-jax-rs-rolesallowed\">RESTEasy support for JAX-RS @RolesAllowed</a> (which references to the <a href=\"http://docs.jboss.org/resteasy/docs/3.0.5.Final/userguide/html/Securing_JAX-RS_and_RESTeasy.html\" rel=\"noreferrer\">RESTEasy Documentation</a>). Even though I also mentioned this question a few paragraphs up as containing a solution that does not work for me, it did change the error to another error. As suggested there I added a <em>&lt;context-param&gt;</em>-block to my <em>web.xml</em>-file:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;web-app version=\"2.5\" xmlns=\"http://java.sun.com/xml/ns/javaee\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd\"&gt;\n    &lt;security-constraint&gt;\n        &lt;web-resource-collection&gt;\n            &lt;web-resource-name&gt;PGB&lt;/web-resource-name&gt;\n            &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n            &lt;http-method&gt;GET&lt;/http-method&gt;\n            &lt;http-method&gt;POST&lt;/http-method&gt;\n        &lt;/web-resource-collection&gt;\n\n        &lt;user-data-constraint&gt;\n            &lt;!-- use of SSL is required when CONFIDENTIAL is specified --&gt;\n            &lt;transport-guarantee&gt;CONFIDENTIAL&lt;/transport-guarantee&gt;\n        &lt;/user-data-constraint&gt;\n    &lt;/security-constraint&gt;\n\n    &lt;context-param&gt;\n      &lt;param-name&gt;resteasy.role.based.security&lt;/param-name&gt;\n      &lt;param-value&gt;true&lt;/param-value&gt;\n   &lt;/context-param&gt;\n&lt;/web-app&gt;\n</code></pre>\n\n<p>Which results in the following error if I try to create a new user (not completely posted here due to character limit of SO questions):</p>\n\n<pre><code>16:58:45,992 WARN  [org.jboss.resteasy.core.ExceptionHandler] (default task-61) failed to execute: javax.ws.rs.ForbiddenException: HTTP 403 Forbidden\n    at org.jboss.resteasy.plugins.interceptors.RoleBasedSecurityFilter.filter(RoleBasedSecurityFilter.java:45) [resteasy-jaxrs-3.0.8.Final.jar:]\n    at ... etc.\n</code></pre>\n\n<p>This error is not very helpful either, in fact, I find even less information when I search on that error than when I search on the previous error. So, I am not sure if that is a step into the right direction. What is better to have returned from the server? A status 500 (Internal Server Error) or a status 403 (Forbidden)? Also, if after applying that \"solution\" I change the annotation to @PermitAll, then the creation of a new user works just as before, so it didn't really make the situation any worse.</p>\n\n<p>However, I can find <a href=\"https://github.com/resteasy/Resteasy/blob/master/jaxrs/resteasy-jaxrs/src/main/java/org/jboss/resteasy/plugins/interceptors/RoleBasedSecurityFilter.java\" rel=\"noreferrer\">the source code of RoleBasedSecurityFilter</a>, which shows that it throws the <code>ForbiddenException</code>. It shows that a certain <em>isUserInRole</em> method must return true, but it does not do that in my application. I can't get it to return true. It makes me wonder, <a href=\"https://stackoverflow.com/q/26039920/2541501\">Is it possible to disable RoleBasedSecurityFilter.java of RESTEasy?</a></p>\n\n<p>I also found the following SO question: <a href=\"https://stackoverflow.com/questions/15188895/rolesallowed-cannot-be-resolved-with-jersey\">@RolesAllowed cannot be resolved with Jersey</a>, which is answered by Abhijit Sarkar, and he refers to <a href=\"http://www-01.ibm.com/support/knowledgecenter/SSAW57_8.5.5/com.ibm.websphere.nd.multiplatform.doc/ae/twbs_jaxrs_impl_securejaxrs_webcont.html?cp=SSAW57_8.5.5%2F3-3-0-42-3-0\" rel=\"noreferrer\">an IBM article</a>. Maybe the solution to my problem lies in there, but I have not found it yet.. Anyway, it is suggested there that either adding a <em>security-role</em> block to my <em>web.xml</em>-file or adding a <em>@DeclareRoles</em> annotation to my <em>UserResource.java</em> file should solve the problem, but the HTTP 403 Forbidden warning still remains after I do so. It is very frustrating.</p>\n\n<p>My <em>security-role</em> block (in web.xml) looks as follows:</p>\n\n<pre><code>&lt;security-role id=\"role_admin\"&gt;\n    &lt;description&gt;This is role 1 (admin)&lt;/description&gt;\n    &lt;role-name&gt;admin&lt;/role-name&gt;\n&lt;/security-role&gt;\n</code></pre>\n\n<p>And I added the following <em>security-constraint</em> block (in web.xml): (note the <em>auth-constraint</em>)</p>\n\n<pre><code>&lt;security-constraint&gt;\n    &lt;web-resource-collection&gt;\n        &lt;web-resource-name&gt;PGB&lt;/web-resource-name&gt;\n        &lt;url-pattern&gt;/rest/user/create&lt;/url-pattern&gt;\n        &lt;http-method&gt;GET&lt;/http-method&gt;\n        &lt;http-method&gt;POST&lt;/http-method&gt;\n    &lt;/web-resource-collection&gt;\n    &lt;auth-constraint id=\"AuthConstraint_createUser\"&gt;\n        &lt;description&gt; Only admin can create a new user&lt;/description&gt;\n        &lt;role-name&gt;admin&lt;/role-name&gt;\n    &lt;/auth-constraint&gt;\n    &lt;user-data-constraint&gt;\n        &lt;!-- use of SSL is required when CONFIDENTIAL is specified --&gt;\n        &lt;transport-guarantee&gt;CONFIDENTIAL&lt;/transport-guarantee&gt;\n    &lt;/user-data-constraint&gt;\n&lt;/security-constraint&gt;\n</code></pre>\n\n<p>I realize now that my problem lies either in the deployment descriptors (<em>web.xml</em>) or the server configuration (WildFly's <em>standalone-full.xml</em>).</p>\n\n<p>I added a <code>login-config</code> element (with <a href=\"http://docs.oracle.com/cd/E19798-01/821-1841/bncbn/index.html\" rel=\"noreferrer\">FORM authentication</a>) to my <em>web.xml</em> file. Changed my login HTML page to fit <a href=\"http://docs.oracle.com/cd/E19798-01/821-1841/bncca/index.html\" rel=\"noreferrer\">the required format</a>. I followed some of the step of this article on <a href=\"http://docs.oracle.com/cd/E19798-01/821-1841/bncca/index.html\" rel=\"noreferrer\">migrating a Java EE App from GlassFish to WildFly</a>, but I think I still did something wrong because I always get at the login error page when trying to log in with valid user credentials.</p>\n\n<p>See here the <code>security-domain</code> element I added to my WildFly configuration:</p>\n\n<pre><code>&lt;security-domain name=\"app\" cache-type=\"default\"&gt;\n    &lt;authentication&gt;\n        &lt;login-module code=\"Database\" flag=\"required\"&gt;\n            &lt;module-option name=\"dsJndiName\" value=\"java:jboss/datasources/mySQL_pool_rel\"/&gt;\n            &lt;module-option name=\"principalsQuery\" value=\"select hashed_password from user where email_address=?\"/&gt;\n            &lt;module-option name=\"rolesQuery\" value=\"select role_name, 'Roles' from role r inner join user u on r.role_type = u.role_type where u.email_address = ?\"/&gt;\n            &lt;module-option name=\"hashAlgorithm\" value=\"SHA-256\"/&gt;\n            &lt;module-option name=\"hashEncoding\" value=\"BASE64\"/&gt;\n            &lt;module-option name=\"unauthenticatedIdentity\" value=\"guest\"/&gt;\n        &lt;/login-module&gt;\n        &lt;login-module code=\"RoleMapping\" flag=\"required\"&gt;\n             &lt;module-option name=\"rolesProperties\" value=\"file:${jboss.server.config.dir}/app.properties\"/&gt;\n             &lt;module-option name=\"replaceRole\" value=\"false\"/&gt;\n        &lt;/login-module&gt;\n    &lt;/authentication&gt;\n&lt;/security-domain&gt;\n</code></pre>\n\n<p>I think something is wrong with my <em>rolesQuery</em> defined there, but I can't figure out what.</p>\n\n<p>I would love to know how to implement role-based security for my Web application. Therefore, I also accept other approaches to role-based security, as long as it works. Suggestions are welcome.</p>\n\n<p>I also placed <a href=\"https://developer.jboss.org/thread/248877\" rel=\"noreferrer\">my question on developer.jboss.org</a>, but I also got no response there yet.</p>\n\n<p>I provided one workaround solution to my problem as an answer to this question, but it is not a real solution (as explained in that answer). I am still interested in doing this the right way.</p>\n"},{"tags":["java","groovy","spring-security","jersey","jersey-2.0"],"comments":[{"owner":{"account_id":140755,"reputation":1420,"user_id":347304,"accept_rate":60,"display_name":"JSager"},"score":0,"creation_date":1391627352,"post_id":21586070,"comment_id":32609623,"body_markdown":"I may be off base with the thought that it&#39;s bean scope causing the problem. I used @Scope(&quot;request&quot;) and confirmed with a println that I get a new instance of Equipment with every request but UriInfo is still null. Tried it as session scope, same instance, still null. I may just be barking up the wrong tree here.","body":"I may be off base with the thought that it&#39;s bean scope causing the problem. I used @Scope(&quot;request&quot;) and confirmed with a println that I get a new instance of Equipment with every request but UriInfo is still null. Tried it as session scope, same instance, still null. I may just be barking up the wrong tree here."}],"answers":[{"comments":[{"owner":{"account_id":1072308,"reputation":1659,"user_id":1071289,"accept_rate":70,"display_name":"pWoz"},"score":0,"creation_date":1431595187,"post_id":21586648,"comment_id":48569578,"body_markdown":"Did You try to investigate this problem more (or ask Spring Security developers about that)? I have the same problem and I cannot inject UriInfo at method level because of some other requirements.","body":"Did You try to investigate this problem more (or ask Spring Security developers about that)? I have the same problem and I cannot inject UriInfo at method level because of some other requirements."},{"owner":{"account_id":140755,"reputation":1420,"user_id":347304,"accept_rate":60,"display_name":"JSager"},"score":0,"creation_date":1439476705,"post_id":21586648,"comment_id":51886782,"body_markdown":"@pWoz Sorry this reply is late, but no I didn&#39;t. We wound up dropping Groovy for Clojure and Jersey for Compojure.","body":"@pWoz Sorry this reply is late, but no I didn&#39;t. We wound up dropping Groovy for Clojure and Jersey for Compojure."}],"tags":[],"owner":{"account_id":140755,"reputation":1420,"user_id":347304,"accept_rate":60,"display_name":"JSager"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1391628449,"creation_date":1391628449,"answer_id":21586648,"question_id":21586070,"body_markdown":"So, I&#39;ve come up with a solution that gets me around my problem and I&#39;m leaving it here for posterity. The answer doesn&#39;t satisfy the &quot;why&quot; of it all, but it does get my application working and it&#39;s not really a munge.\r\n\r\nInstead of injecting UriInfo at the class level, I inject it at the method level. I got the idea from [here][1]. Their explanation is that if a method signature might get modified, inject it there. I guess Spring Security is doing that, but I don&#39;t understand why that would break something injected at the class level.\r\n\r\nWorking code for posterity:\r\n\r\n    @PreAuthorize(&quot;hasAnyRole(&#39;ROLE_ANALYST&#39;, &#39;ROLE_DEVELOPER&#39;)&quot;)\r\n\t@GET\r\n    @Produces(MediaType.APPLICATION_JSON)\r\n    public def list(@Context UriInfo ui) {\r\n    \t...\r\n    }\r\n\r\n\r\n  [1]: http://pic.dhe.ibm.com/infocenter/wasinfo/v8r0/index.jsp?topic=/com.ibm.websphere.base.doc/info/aes/ae/twbs_jaxrs_contextobjects_uri.html","title":"Spring Security @PreAuthorize breaks Jersey @Context UriInfo injection","body":"<p>So, I've come up with a solution that gets me around my problem and I'm leaving it here for posterity. The answer doesn't satisfy the \"why\" of it all, but it does get my application working and it's not really a munge.</p>\n\n<p>Instead of injecting UriInfo at the class level, I inject it at the method level. I got the idea from <a href=\"http://pic.dhe.ibm.com/infocenter/wasinfo/v8r0/index.jsp?topic=/com.ibm.websphere.base.doc/info/aes/ae/twbs_jaxrs_contextobjects_uri.html\" rel=\"nofollow\">here</a>. Their explanation is that if a method signature might get modified, inject it there. I guess Spring Security is doing that, but I don't understand why that would break something injected at the class level.</p>\n\n<p>Working code for posterity:</p>\n\n<pre><code>@PreAuthorize(\"hasAnyRole('ROLE_ANALYST', 'ROLE_DEVELOPER')\")\n@GET\n@Produces(MediaType.APPLICATION_JSON)\npublic def list(@Context UriInfo ui) {\n    ...\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3984023,"reputation":43,"user_id":3285194,"display_name":"Richard"},"score":0,"creation_date":1438083548,"post_id":31675097,"comment_id":51292378,"body_markdown":"I filed a bug about this issue against Jersey as well (https://java.net/jira/browse/JERSEY-2919), although it could be a spring or spring-security issue.","body":"I filed a bug about this issue against Jersey as well (<a href=\"https://java.net/jira/browse/JERSEY-2919\" rel=\"nofollow noreferrer\">java.net/jira/browse/JERSEY-2919</a>), although it could be a spring or spring-security issue."}],"tags":[],"owner":{"account_id":3984023,"reputation":43,"user_id":3285194,"display_name":"Richard"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1692855420,"creation_date":1438083186,"answer_id":31675097,"question_id":21586070,"body_markdown":"I&#39;ve run into this same issue and been fighting with it for a couple of weeks now.  The suggested workaround isn&#39;t practical for my uses though.\r\n\r\nAnother workaround I&#39;ve seen suggested is to move the @PreAuthorize annotation down to the service layer (or some other application layer) instead of using it directly on the REST resource.  That solution isn&#39;t practical for me either, but thought I&#39;d add it as another possibility.","title":"Spring Security @PreAuthorize breaks Jersey @Context UriInfo injection","body":"<p>I've run into this same issue and been fighting with it for a couple of weeks now.  The suggested workaround isn't practical for my uses though.</p>\n<p>Another workaround I've seen suggested is to move the @PreAuthorize annotation down to the service layer (or some other application layer) instead of using it directly on the REST resource.  That solution isn't practical for me either, but thought I'd add it as another possibility.</p>\n"}],"owner":{"account_id":140755,"reputation":1420,"user_id":347304,"accept_rate":60,"display_name":"JSager"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1621,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":21586648,"answer_count":2,"score":2,"last_activity_date":1692855420,"creation_date":1391626619,"question_id":21586070,"body_markdown":"I have a problem with a Jersey/Spring RESTful web application I&#39;m building. I want to use the @PreAuthorize annotation to secure my endpoints. However, I need to have access to the UriInfo because I do work with the query parameters.\r\n\r\nEverything works fine until I secure the method, then suddenly my UriInfo is null. I&#39;m fairly certain this has to do with how @PreAuthorize is causing things to be scoped - no longer at the request level.\r\n\r\n    @Component\r\n    @Path(&quot;/equipment&quot;)\r\n    public class Equipment\r\n    {\r\n    \t@Context \r\n    \tUriInfo ui;\r\n    \r\n    \t@PreAuthorize(&quot;hasAnyRole(&#39;ROLE_ANALYST&#39;, &#39;ROLE_DEVELOPER&#39;)&quot;)\r\n    \t@GET\r\n        @Produces(MediaType.APPLICATION_JSON)\r\n        public def list() {\r\n        \tprintln ui\r\n        \treturn [:]\r\n        }\r\n    \r\n    }\r\n\r\nThe simple class below will print &quot;null&quot;.\r\n\r\nIf you remove the @PreAuthorize annotation, you get the expected result - org.glassfish.jersey.internal.inject.UriInfoInjectee@23b21e3\r\n\r\nBased on things I&#39;ve seen in other questions, let me say in advance my application context already has this line: \r\n\r\n`&lt;security:global-method-security pre-post-annotations=&quot;enabled&quot;/&gt;`\r\n\r\nand the authorization part is working perfectly. It&#39;s just the injection of UriInfo that&#39;s failing.\r\n\r\nI am using Spring 3.1.4 and Jersey 2.3. Code provided is in Groovy but that&#39;s not the problem.\r\n\r\nThank you for your help.","title":"Spring Security @PreAuthorize breaks Jersey @Context UriInfo injection","body":"<p>I have a problem with a Jersey/Spring RESTful web application I'm building. I want to use the @PreAuthorize annotation to secure my endpoints. However, I need to have access to the UriInfo because I do work with the query parameters.</p>\n\n<p>Everything works fine until I secure the method, then suddenly my UriInfo is null. I'm fairly certain this has to do with how @PreAuthorize is causing things to be scoped - no longer at the request level.</p>\n\n<pre><code>@Component\n@Path(\"/equipment\")\npublic class Equipment\n{\n    @Context \n    UriInfo ui;\n\n    @PreAuthorize(\"hasAnyRole('ROLE_ANALYST', 'ROLE_DEVELOPER')\")\n    @GET\n    @Produces(MediaType.APPLICATION_JSON)\n    public def list() {\n        println ui\n        return [:]\n    }\n\n}\n</code></pre>\n\n<p>The simple class below will print \"null\".</p>\n\n<p>If you remove the @PreAuthorize annotation, you get the expected result - org.glassfish.jersey.internal.inject.UriInfoInjectee@23b21e3</p>\n\n<p>Based on things I've seen in other questions, let me say in advance my application context already has this line: </p>\n\n<p><code>&lt;security:global-method-security pre-post-annotations=\"enabled\"/&gt;</code></p>\n\n<p>and the authorization part is working perfectly. It's just the injection of UriInfo that's failing.</p>\n\n<p>I am using Spring 3.1.4 and Jersey 2.3. Code provided is in Groovy but that's not the problem.</p>\n\n<p>Thank you for your help.</p>\n"},{"tags":["java","regex","parsing"],"comments":[{"owner":{"account_id":55050,"reputation":190529,"user_id":164835,"accept_rate":80,"display_name":"Kent"},"score":0,"creation_date":1360545385,"post_id":14804591,"comment_id":20735444,"body_markdown":"if the text part has no quotes/brackets etc. how can you distinguish if a text has something like &quot;we have answered 100yes!&quot; or you mean the text can only contain [a-zA-Z]?","body":"if the text part has no quotes/brackets etc. how can you distinguish if a text has something like &quot;we have answered 100yes!&quot; or you mean the text can only contain [a-zA-Z]?"},{"owner":{"account_id":2350143,"reputation":1117,"user_id":2059238,"accept_rate":44,"display_name":"Karan Goel"},"score":0,"creation_date":1360545493,"post_id":14804591,"comment_id":20735458,"body_markdown":"Well that is part of the problem. I should have mentioned, the text can start/end with number. Would it help if you modify the text to include a tab after yes/no to distinguish between the terms?","body":"Well that is part of the problem. I should have mentioned, the text can start/end with number. Would it help if you modify the text to include a tab after yes/no to distinguish between the terms?"},{"owner":{"account_id":214928,"reputation":9307,"user_id":469201,"accept_rate":67,"display_name":"davidbuzatto"},"score":0,"creation_date":1360545499,"post_id":14804591,"comment_id":20735462,"body_markdown":"May you post more examples of what you need to parse? A list of some examples would be good.","body":"May you post more examples of what you need to parse? A list of some examples would be good."},{"owner":{"account_id":55050,"reputation":190529,"user_id":164835,"accept_rate":80,"display_name":"Kent"},"score":0,"creation_date":1360545589,"post_id":14804591,"comment_id":20735476,"body_markdown":"The problem is I don&#39;t know where is the right &quot;yes/no&quot;! How can I modifiy the text?","body":"The problem is I don&#39;t know where is the right &quot;yes/no&quot;! How can I modifiy the text?"},{"owner":{"account_id":2350143,"reputation":1117,"user_id":2059238,"accept_rate":44,"display_name":"Karan Goel"},"score":0,"creation_date":1360545668,"post_id":14804591,"comment_id":20735486,"body_markdown":"@Kent We always have a yes/no after a number. (That number is later used as index of an array). So it might be useful to say that the number, yes/no and text after that all are needed and cannot be dropped.","body":"@Kent We always have a yes/no after a number. (That number is later used as index of an array). So it might be useful to say that the number, yes/no and text after that all are needed and cannot be dropped."},{"owner":{"account_id":214928,"reputation":9307,"user_id":469201,"accept_rate":67,"display_name":"davidbuzatto"},"score":0,"creation_date":1360545726,"post_id":14804591,"comment_id":20735501,"body_markdown":"@user2059238: Wait a moment, I&#39;m writing some code.","body":"@user2059238: Wait a moment, I&#39;m writing some code."},{"owner":{"account_id":55050,"reputation":190529,"user_id":164835,"accept_rate":80,"display_name":"Kent"},"score":0,"creation_date":1360545818,"post_id":14804591,"comment_id":20735515,"body_markdown":"@user2059238 from your example, apart from computer program, I even cannot parse your text with my eye/brain.... what if your text part has number+yes.../no... pattern as well?","body":"@user2059238 from your example, apart from computer program, I even cannot parse your text with my eye/brain.... what if your text part has number+yes.../no... pattern as well?"},{"owner":{"account_id":2350143,"reputation":1117,"user_id":2059238,"accept_rate":44,"display_name":"Karan Goel"},"score":0,"creation_date":1360545910,"post_id":14804591,"comment_id":20735533,"body_markdown":"@Kent Well, it&#39;s basically like this: `number` `yes|no` `text(may/may not be there)` repeated. I&#39;m sorry but I&#39;m not sure how else can I clarify it.","body":"@Kent Well, it&#39;s basically like this: <code>number</code> <code>yes|no</code> <code>text(may&#47;may not be there)</code> repeated. I&#39;m sorry but I&#39;m not sure how else can I clarify it."},{"owner":{"account_id":55050,"reputation":190529,"user_id":164835,"accept_rate":80,"display_name":"Kent"},"score":0,"creation_date":1360546090,"post_id":14804591,"comment_id":20735574,"body_markdown":"let&#39;s say, is there a rule that your text part doesn&#39;t contain `number+yes|no` pattern? for example &quot;303notes&quot;","body":"let&#39;s say, is there a rule that your text part doesn&#39;t contain <code>number+yes|no</code> pattern? for example &quot;303notes&quot;"},{"owner":{"account_id":2350143,"reputation":1117,"user_id":2059238,"accept_rate":44,"display_name":"Karan Goel"},"score":0,"creation_date":1360546293,"post_id":14804591,"comment_id":20735610,"body_markdown":"In your example, 303notes = `303` is the index (number), `no` is the yes/no part, `tes` is the text. However, if the input was 303no404yes =  `303` is the index (number), `no` is the yes/no part, `` is the text, `404` is the index (number), `yes` is the yes/no part, `` is the text","body":"In your example, 303notes = <code>303</code> is the index (number), <code>no</code> is the yes/no part, <code>tes</code> is the text. However, if the input was 303no404yes =  <code>303</code> is the index (number), <code>no</code> is the yes/no part, `` is the text, <code>404</code> is the index (number), <code>yes</code> is the yes/no part, `` is the text"},{"owner":{"account_id":214928,"reputation":9307,"user_id":469201,"accept_rate":67,"display_name":"davidbuzatto"},"score":0,"creation_date":1360546878,"post_id":14804591,"comment_id":20735706,"body_markdown":"Almost there... Wait a little more...","body":"Almost there... Wait a little more..."},{"owner":{"account_id":55050,"reputation":190529,"user_id":164835,"accept_rate":80,"display_name":"Kent"},"score":0,"creation_date":1360546952,"post_id":14804591,"comment_id":20735724,"body_markdown":"@user2059238 you could simply answer &quot;no, text part doesn&#39;t contain indexyes|no pattern&quot;","body":"@user2059238 you could simply answer &quot;no, text part doesn&#39;t contain indexyes|no pattern&quot;"},{"owner":{"account_id":2350143,"reputation":1117,"user_id":2059238,"accept_rate":44,"display_name":"Karan Goel"},"score":0,"creation_date":1360547801,"post_id":14804591,"comment_id":20735871,"body_markdown":"I think this might be helpful: Every number before yes/no is 1 more than the previous number before yes/no, always!","body":"I think this might be helpful: Every number before yes/no is 1 more than the previous number before yes/no, always!"}],"answers":[{"comments":[{"owner":{"account_id":2350143,"reputation":1117,"user_id":2059238,"accept_rate":44,"display_name":"Karan Goel"},"score":0,"creation_date":1360612143,"post_id":14804883,"comment_id":20760331,"body_markdown":"Thanks a lot. I came up with this: http://pastebin.com/VeG7reHk But I get this error: `Exception in thread &quot;main&quot; java.lang.StringIndexOutOfBoundsException: String index out of range: -207\n\tat java.lang.String.substring(String.java:1911)\n\tat ASimpleParser.exec(ASimpleParser.java:67)\n\tat ASimpleParser.main(ASimpleParser.java:23)` when using this data set: http://pastebin.com/zgVRncbJ\n\nI have tried to check the dataset by checking every 10 lines for each batch, and they work fine individually. The problem occurs in line 37 of input.","body":"Thanks a lot. I came up with this: <a href=\"http://pastebin.com/VeG7reHk\" rel=\"nofollow noreferrer\">pastebin.com/VeG7reHk</a> But I get this error: <code>Exception in thread &quot;main&quot; java.lang.StringIndexOutOfBoundsException: String index out of range: -207 \tat java.lang.String.substring(String.java:1911) \tat ASimpleParser.exec(ASimpleParser.java:67) \tat ASimpleParser.main(ASimpleParser.java:23)</code> when using this data set: <a href=\"http://pastebin.com/zgVRncbJ\" rel=\"nofollow noreferrer\">pastebin.com/zgVRncbJ</a>  I have tried to check the dataset by checking every 10 lines for each batch, and they work fine individually. The problem occurs in line 37 of input."},{"owner":{"account_id":2350143,"reputation":1117,"user_id":2059238,"accept_rate":44,"display_name":"Karan Goel"},"score":0,"creation_date":1360612581,"post_id":14804883,"comment_id":20760532,"body_markdown":"Sorry, line 36 of input is messing up.","body":"Sorry, line 36 of input is messing up."}],"tags":[],"owner":{"account_id":214928,"reputation":9307,"user_id":469201,"accept_rate":67,"display_name":"davidbuzatto"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1360548254,"creation_date":1360547784,"answer_id":14804883,"question_id":14804591,"body_markdown":"Try this. I think it will work.  In the end of the parsing, you will have a List of Answers. Now, you just need to make some modifications to return this List and use its answers. My algorithm just detects all the answers and where they start in the main String and with this information, slice the text. So, the algorithm have two steps (1: bounds detection, 2: string slicing). I made some comnents in my code. Hope it works.\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    import java.util.regex.Matcher;\r\n    import java.util.regex.Pattern;\r\n\r\n    /**\r\n     *\r\n     * @author David Buzatto\r\n     */\r\n    public class ASimpleParser {\r\n\r\n        public static void main( String[] args ) {\r\n            new ASimpleParser().exec();\r\n        }\r\n\r\n        public void exec() {\r\n\r\n            String[] in = {\r\n                &quot;30no31yesapproximately 278 billion miles from anything.32no33no34no&quot;,\r\n                &quot;30no31yesapproximately 278 billion miles from anything32no33yessince the invention of call waiting34yesGravity is a contributing factor in 73 percent of all accidents involving falling objects.&quot;,\r\n                &quot;35yesanybody who owns hideous clothing36yes if you take it from another person&#39;s plate37yes172 miles per hour upside down38yesonly more intelligent39yes any product including floor wax that has fat in it&quot;,\r\n                &quot;35no36yestake it from another person&#39;s plate37yes172 miles per hour upside down38no39no&quot;,\r\n                &quot;35no36no37yes172 miles per hour38no39no&quot;,\r\n                &quot;35no36no37yesupside down38no39no&quot;\r\n            };\r\n\r\n            Pattern p = Pattern.compile( &quot;(\\\\d+)(yes|no)&quot; );\r\n            List&lt;Answer&gt; allAnswers = new ArrayList&lt;Answer&gt;();\r\n\r\n            for ( String s : in ) {\r\n\r\n                List&lt;Answer&gt; answers = new ArrayList&lt;Answer&gt;();\r\n                Matcher m = p.matcher( s );\r\n\r\n                // step 1: detecting answer bounds (start)\r\n                while ( m.find() ) {\r\n\r\n                    Answer a = new Answer();\r\n                    a.answerStart = m.group();\r\n                    a.number = m.group( 1 );\r\n                    a.yesOrNo = m.group( 2 );\r\n                    a.startAt = s.indexOf( a.answerStart );\r\n\r\n                    answers.add( a );\r\n\r\n                }\r\n\r\n                // step 2: slicing\r\n                for ( int i = 0; i &lt; answers.size(); i++ ) {\r\n\r\n                    Answer a = answers.get( i );\r\n\r\n                    // needs to compare to the right one, the will have the right bounds\r\n                    if ( i != answers.size() - 1 ) {\r\n\r\n                        Answer rightAnswer = answers.get( i + 1 );\r\n                        a.text = s.substring( a.startAt + a.answerStart.length(), rightAnswer.startAt );\r\n\r\n                    } else { // int the last answer, the right bound is the end of the main String. s.length() may be ommited.\r\n\r\n                        a.text = s.substring( a.startAt + a.answerStart.length(), s.length() );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                allAnswers.addAll( answers );\r\n\r\n            }\r\n\r\n            // just iterating over the answers to show them.\r\n            for ( Answer a : allAnswers ) {\r\n                System.out.println( a );\r\n            }\r\n\r\n        }\r\n\r\n        // a private class to contain the answers data\r\n        private class Answer {\r\n\r\n            String answerStart;\r\n            String number;\r\n            String yesOrNo;\r\n            String text;\r\n            int startAt;\r\n\r\n            @Override\r\n            public String toString() {\r\n                return &quot;Answer{&quot; + &quot;number=&quot; + number + &quot;, answer=&quot; + yesOrNo + &quot;, text=&quot; + text + &quot;, startAt=&quot; + startAt + &#39;}&#39;;\r\n            }\r\n\r\n        }\r\n\r\n    }","title":"How can I parse this kind of text?","body":"<p>Try this. I think it will work.  In the end of the parsing, you will have a List of Answers. Now, you just need to make some modifications to return this List and use its answers. My algorithm just detects all the answers and where they start in the main String and with this information, slice the text. So, the algorithm have two steps (1: bounds detection, 2: string slicing). I made some comnents in my code. Hope it works.</p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\n\n/**\n *\n * @author David Buzatto\n */\npublic class ASimpleParser {\n\n    public static void main( String[] args ) {\n        new ASimpleParser().exec();\n    }\n\n    public void exec() {\n\n        String[] in = {\n            \"30no31yesapproximately 278 billion miles from anything.32no33no34no\",\n            \"30no31yesapproximately 278 billion miles from anything32no33yessince the invention of call waiting34yesGravity is a contributing factor in 73 percent of all accidents involving falling objects.\",\n            \"35yesanybody who owns hideous clothing36yes if you take it from another person's plate37yes172 miles per hour upside down38yesonly more intelligent39yes any product including floor wax that has fat in it\",\n            \"35no36yestake it from another person's plate37yes172 miles per hour upside down38no39no\",\n            \"35no36no37yes172 miles per hour38no39no\",\n            \"35no36no37yesupside down38no39no\"\n        };\n\n        Pattern p = Pattern.compile( \"(\\\\d+)(yes|no)\" );\n        List&lt;Answer&gt; allAnswers = new ArrayList&lt;Answer&gt;();\n\n        for ( String s : in ) {\n\n            List&lt;Answer&gt; answers = new ArrayList&lt;Answer&gt;();\n            Matcher m = p.matcher( s );\n\n            // step 1: detecting answer bounds (start)\n            while ( m.find() ) {\n\n                Answer a = new Answer();\n                a.answerStart = m.group();\n                a.number = m.group( 1 );\n                a.yesOrNo = m.group( 2 );\n                a.startAt = s.indexOf( a.answerStart );\n\n                answers.add( a );\n\n            }\n\n            // step 2: slicing\n            for ( int i = 0; i &lt; answers.size(); i++ ) {\n\n                Answer a = answers.get( i );\n\n                // needs to compare to the right one, the will have the right bounds\n                if ( i != answers.size() - 1 ) {\n\n                    Answer rightAnswer = answers.get( i + 1 );\n                    a.text = s.substring( a.startAt + a.answerStart.length(), rightAnswer.startAt );\n\n                } else { // int the last answer, the right bound is the end of the main String. s.length() may be ommited.\n\n                    a.text = s.substring( a.startAt + a.answerStart.length(), s.length() );\n\n                }\n\n            }\n\n            allAnswers.addAll( answers );\n\n        }\n\n        // just iterating over the answers to show them.\n        for ( Answer a : allAnswers ) {\n            System.out.println( a );\n        }\n\n    }\n\n    // a private class to contain the answers data\n    private class Answer {\n\n        String answerStart;\n        String number;\n        String yesOrNo;\n        String text;\n        int startAt;\n\n        @Override\n        public String toString() {\n            return \"Answer{\" + \"number=\" + number + \", answer=\" + yesOrNo + \", text=\" + text + \", startAt=\" + startAt + '}';\n        }\n\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":2350143,"reputation":1117,"user_id":2059238,"accept_rate":44,"display_name":"Karan Goel"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":147,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":14804883,"answer_count":1,"score":2,"last_activity_date":1692855205,"creation_date":1360544939,"question_id":14804591,"body_markdown":"This is the format my text is in:\r\n\r\n    15no16no17yes the parents who have older children always tell you the next stage is worse.18yes using only their hands and feet make some of the worst movies in the history of the world.19no\r\n\r\nSo the basic format is this:\r\n\r\n`number` `yes|no` `text(may/may not be there)` repeated\r\n\r\nThe text after `yes` or `no` can be empty, or can start with a space. (I have tried to illustrate this above).\r\n\r\nThe code I have works for this format: \r\n`number` `yes|no` repeated\r\n\r\nMore examples of text to parse:\r\n\r\n    30no31yesapproximately 278 billion miles from anything.32no33no34no\r\n    30no31yesapproximately 278 billion miles from anything32no33yessince the invention of call waiting34yesGravity is a contributing factor in 73 percent of all accidents involving falling objects.\r\n    35yesanybody who owns hideous clothing36yes if you take it from another person&#39;s plate37yes172 miles per hour upside down38yesonly more intelligent39yes any product including floor wax that has fat in it\r\n    35no36yestake it from another person&#39;s plate37yes172 miles per hour upside down38no39no\r\n    35no36no37yes172 miles per hour38no39no\r\n    35no36no37yesupside down38no39no\r\n\r\nHow do I modify my code?\r\n\r\n    String regex = &quot;^(\\\\d+)(yes|no)&quot;;\r\n    Pattern p = Pattern.compile(regex);\r\n\r\n\t\twhile(input.hasNextLine()) {\r\n         String line = input.nextLine();\r\n\t\t\tString myStr = line;\r\n\t\t\tMatcher m = p.matcher(myStr);\r\n\t\t\t\t\t\t\r\n\t\t\twhile(m.find()) {\r\n\t\t\t\tString all = m.group();\r\n       \t\tString digits = m.group(1);\r\n        \t\tString bool = m.group(2);\r\n\t\t\t\t// do stuff\r\n\t\t\t\tmyStr = myStr.substring(all.length());\r\n        \t\tm.reset(myStr);\r\n\t\t\t} // end while\r\n\t\t} // end while\r\n\r\nI tried using `String regex = &quot;^(\\\\d+)(yes|no)(.*)&quot;;` but the problem is that it captures everything after a `yes` or `no`. \r\n\r\nWhat do I do?\r\n\r\nPS: Please let me know if anything is unclear and I&#39;ll provide more explanations.","title":"How can I parse this kind of text?","body":"<p>This is the format my text is in:</p>\n\n<pre><code>15no16no17yes the parents who have older children always tell you the next stage is worse.18yes using only their hands and feet make some of the worst movies in the history of the world.19no\n</code></pre>\n\n<p>So the basic format is this:</p>\n\n<p><code>number</code> <code>yes|no</code> <code>text(may/may not be there)</code> repeated</p>\n\n<p>The text after <code>yes</code> or <code>no</code> can be empty, or can start with a space. (I have tried to illustrate this above).</p>\n\n<p>The code I have works for this format: \n<code>number</code> <code>yes|no</code> repeated</p>\n\n<p>More examples of text to parse:</p>\n\n<pre><code>30no31yesapproximately 278 billion miles from anything.32no33no34no\n30no31yesapproximately 278 billion miles from anything32no33yessince the invention of call waiting34yesGravity is a contributing factor in 73 percent of all accidents involving falling objects.\n35yesanybody who owns hideous clothing36yes if you take it from another person's plate37yes172 miles per hour upside down38yesonly more intelligent39yes any product including floor wax that has fat in it\n35no36yestake it from another person's plate37yes172 miles per hour upside down38no39no\n35no36no37yes172 miles per hour38no39no\n35no36no37yesupside down38no39no\n</code></pre>\n\n<p>How do I modify my code?</p>\n\n<pre><code>String regex = \"^(\\\\d+)(yes|no)\";\nPattern p = Pattern.compile(regex);\n\n    while(input.hasNextLine()) {\n     String line = input.nextLine();\n        String myStr = line;\n        Matcher m = p.matcher(myStr);\n\n        while(m.find()) {\n            String all = m.group();\n        String digits = m.group(1);\n            String bool = m.group(2);\n            // do stuff\n            myStr = myStr.substring(all.length());\n            m.reset(myStr);\n        } // end while\n    } // end while\n</code></pre>\n\n<p>I tried using <code>String regex = \"^(\\\\d+)(yes|no)(.*)\";</code> but the problem is that it captures everything after a <code>yes</code> or <code>no</code>. </p>\n\n<p>What do I do?</p>\n\n<p>PS: Please let me know if anything is unclear and I'll provide more explanations.</p>\n"},{"tags":["java","spring","spring-security","jax-rs","cxf"],"comments":[{"owner":{"account_id":1528364,"reputation":125614,"user_id":1426227,"accept_rate":79,"display_name":"cassiomolin"},"score":0,"creation_date":1445355810,"post_id":33240443,"comment_id":54284657,"body_markdown":"Possible duplicate of [Can I use @RolesAllowed on RESTful Resources implemented on Apache CXF?](http://stackoverflow.com/questions/16433315/can-i-use-rolesallowed-on-restful-resources-implemented-on-apache-cxf)","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/16433315/can-i-use-rolesallowed-on-restful-resources-implemented-on-apache-cxf\">Can I use @RolesAllowed on RESTful Resources implemented on Apache CXF?</a>"}],"answers":[{"tags":[],"owner":{"account_id":6463892,"reputation":15974,"user_id":5277820,"accept_rate":68,"display_name":"dur"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1692846231,"creation_date":1445365463,"answer_id":33244066,"question_id":33240443,"body_markdown":"I found four work-arounds:\r\n\r\n1. Extended Interface\r\n\r\n        @Path(&quot;/myresource&quot;)\r\n        public interface MyResource {\r\n\r\n            @Context \r\n            public void setSecurityContext(Security securityContext); \r\n\r\n            @GET\r\n            @Produces(MediaType.TEXT_XML)\r\n            String get();\r\n        }\r\n    \r\n        @Named\r\n        public class MyResourceImpl implements MyResource {\r\n    \r\n            private SecurityContext securityContext;\r\n\r\n            @Override\r\n            public void setSecurityContext(Security securityContext) { \r\n                this.securityContext = securityContext\r\n            }\r\n\r\n            @Override\r\n            @RolesAllowed(&quot;ROLE_user&quot;)\r\n            public String get() {\r\n                return securityContext.getUserPrincipal().getName();\r\n            }\r\n        }\r\n\r\n    But this solution is not perfect, because my [client](https://cxf.apache.org/docs/jax-rs-client-api.html#JAXRSClientAPI-Proxy-basedAPI) should not see implementation details.\r\n\r\n2. [Dedicated interface](http://cxf.547215.n5.nabble.com/IllegalArgumentException-for-UriInfo-context-injection-td5718839.html)\r\n\r\n    If I add a second interface with a public setter for `SecurityContext`, Apache CXF could inject the [JDK proxy](http://docs.spring.io/spring/docs/current/spring-framework-reference/html/aop.html#aop-introduction-proxies) with `SecurityContext`.\r\n\r\n        public interface ContextAware { \r\n\r\n            @Context \r\n            public void setSecurityContext(Security securityContext); \r\n        } \r\n\r\n        @Path(&quot;/myresource&quot;)\r\n        public interface MyResource {\r\n\r\n            @GET\r\n            @Produces(MediaType.TEXT_XML)\r\n            String get();\r\n        }\r\n    \r\n        @Named\r\n        public class MyResourceImpl implements MyResource, ContextAware  {\r\n    \r\n            private SecurityContext securityContext;\r\n\r\n            @Override\r\n            public void setSecurityContext(Security securityContext) { \r\n                this.securityContext = securityContext\r\n            }\r\n\r\n            @Override\r\n            @RolesAllowed(&quot;ROLE_user&quot;)\r\n            public String get() {\r\n                return securityContext.getUserPrincipal().getName();\r\n            }\r\n        }\r\n\r\n3. [CGLIB proxy without interface](http://docs.spring.io/spring/docs/current/spring-framework-reference/html/aop.html#aop-introduction-proxies)\r\n\r\n    If I remove the interface Spring uses a CGLIB proxy. \r\n\r\n        @Named\r\n        @Path(&quot;/myresource&quot;)\r\n        public class MyResourceImpl {\r\n\r\n            @Context\r\n            private SecurityContext securityContext;\r\n\r\n            @RolesAllowed(&quot;ROLE_superadmin&quot;)\r\n            @GET\r\n            @Produces(MediaType.TEXT_XML)\r\n            public String get() {\r\n                return securityContext.getUserPrincipal().getName();\r\n            }\r\n        }\r\n\r\n    But this solution is not good, because my [client](http://cxf.apache.org/docs/jax-rs-client-api.html#JAX-RSClientAPI-Proxy-basedAPI) should not see implementation details. And my client should not need implementation dependencies.\r\n\r\n4. [CGLIB proxy with interface](http://docs.spring.io/spring/docs/current/spring-framework-reference/html/aop.html#aop-proxying)\r\n\r\n        @Path(&quot;/myresource&quot;)\r\n        public interface MyResource {\r\n\r\n            @GET\r\n            @Produces(MediaType.TEXT_XML)\r\n            String get();\r\n        }\r\n    \r\n        @Named\r\n        public class MyResourceImpl implements MyResource {\r\n        \r\n            @Context\r\n            private SecurityContext securityContext;\r\n        \r\n            @Override\r\n            @RolesAllowed(&quot;ROLE_user&quot;)\r\n            public String get() {\r\n                return securityContext.getUserPrincipal().getName();\r\n            }\r\n        }","title":"Combining @Context and @RolesAllowed in a JAX-RS resource?","body":"<p>I found four work-arounds:</p>\n<ol>\n<li><p>Extended Interface</p>\n<pre><code> @Path(&quot;/myresource&quot;)\n public interface MyResource {\n\n     @Context \n     public void setSecurityContext(Security securityContext); \n\n     @GET\n     @Produces(MediaType.TEXT_XML)\n     String get();\n }\n\n @Named\n public class MyResourceImpl implements MyResource {\n\n     private SecurityContext securityContext;\n\n     @Override\n     public void setSecurityContext(Security securityContext) { \n         this.securityContext = securityContext\n     }\n\n     @Override\n     @RolesAllowed(&quot;ROLE_user&quot;)\n     public String get() {\n         return securityContext.getUserPrincipal().getName();\n     }\n }\n</code></pre>\n<p>But this solution is not perfect, because my <a href=\"https://cxf.apache.org/docs/jax-rs-client-api.html#JAXRSClientAPI-Proxy-basedAPI\" rel=\"nofollow noreferrer\">client</a> should not see implementation details.</p>\n</li>\n<li><p><a href=\"http://cxf.547215.n5.nabble.com/IllegalArgumentException-for-UriInfo-context-injection-td5718839.html\" rel=\"nofollow noreferrer\">Dedicated interface</a></p>\n<p>If I add a second interface with a public setter for <code>SecurityContext</code>, Apache CXF could inject the <a href=\"http://docs.spring.io/spring/docs/current/spring-framework-reference/html/aop.html#aop-introduction-proxies\" rel=\"nofollow noreferrer\">JDK proxy</a> with <code>SecurityContext</code>.</p>\n<pre><code> public interface ContextAware { \n\n     @Context \n     public void setSecurityContext(Security securityContext); \n } \n\n @Path(&quot;/myresource&quot;)\n public interface MyResource {\n\n     @GET\n     @Produces(MediaType.TEXT_XML)\n     String get();\n }\n\n @Named\n public class MyResourceImpl implements MyResource, ContextAware  {\n\n     private SecurityContext securityContext;\n\n     @Override\n     public void setSecurityContext(Security securityContext) { \n         this.securityContext = securityContext\n     }\n\n     @Override\n     @RolesAllowed(&quot;ROLE_user&quot;)\n     public String get() {\n         return securityContext.getUserPrincipal().getName();\n     }\n }\n</code></pre>\n</li>\n<li><p><a href=\"http://docs.spring.io/spring/docs/current/spring-framework-reference/html/aop.html#aop-introduction-proxies\" rel=\"nofollow noreferrer\">CGLIB proxy without interface</a></p>\n<p>If I remove the interface Spring uses a CGLIB proxy.</p>\n<pre><code> @Named\n @Path(&quot;/myresource&quot;)\n public class MyResourceImpl {\n\n     @Context\n     private SecurityContext securityContext;\n\n     @RolesAllowed(&quot;ROLE_superadmin&quot;)\n     @GET\n     @Produces(MediaType.TEXT_XML)\n     public String get() {\n         return securityContext.getUserPrincipal().getName();\n     }\n }\n</code></pre>\n<p>But this solution is not good, because my <a href=\"http://cxf.apache.org/docs/jax-rs-client-api.html#JAX-RSClientAPI-Proxy-basedAPI\" rel=\"nofollow noreferrer\">client</a> should not see implementation details. And my client should not need implementation dependencies.</p>\n</li>\n<li><p><a href=\"http://docs.spring.io/spring/docs/current/spring-framework-reference/html/aop.html#aop-proxying\" rel=\"nofollow noreferrer\">CGLIB proxy with interface</a></p>\n<pre><code> @Path(&quot;/myresource&quot;)\n public interface MyResource {\n\n     @GET\n     @Produces(MediaType.TEXT_XML)\n     String get();\n }\n\n @Named\n public class MyResourceImpl implements MyResource {\n\n     @Context\n     private SecurityContext securityContext;\n\n     @Override\n     @RolesAllowed(&quot;ROLE_user&quot;)\n     public String get() {\n         return securityContext.getUserPrincipal().getName();\n     }\n }\n</code></pre>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":50874,"reputation":2522,"user_id":151845,"accept_rate":75,"display_name":"pioto"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692855147,"creation_date":1571427887,"answer_id":58457270,"question_id":33240443,"body_markdown":"I took a slight variation on the solution from @dur. Instead of having the `@Context` as a field, I passed it as a parameter to my method that needed it (I was using `SecurityContext`):\r\n\r\n```java\r\n@Path(&quot;/myresource&quot;)\r\npublic interface MyResource {\r\n    @GET\r\n    @Produces(MediaType.TEXT_XML)\r\n    String get(@Context SecurityContext securityContext);\r\n}\r\n\r\n@Named\r\npublic class MyResourceImpl implements MyResource {\r\n    @Override\r\n    @RolesAllowed(&quot;ROLE_user&quot;)\r\n    public String get(SecurityContext securityContext) {\r\n        return securityContext.getUserPrincipal().getName();\r\n    }\r\n}\r\n```","title":"Combining @Context and @RolesAllowed in a JAX-RS resource?","body":"<p>I took a slight variation on the solution from @dur. Instead of having the <code>@Context</code> as a field, I passed it as a parameter to my method that needed it (I was using <code>SecurityContext</code>):</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Path(&quot;/myresource&quot;)\npublic interface MyResource {\n    @GET\n    @Produces(MediaType.TEXT_XML)\n    String get(@Context SecurityContext securityContext);\n}\n\n@Named\npublic class MyResourceImpl implements MyResource {\n    @Override\n    @RolesAllowed(&quot;ROLE_user&quot;)\n    public String get(SecurityContext securityContext) {\n        return securityContext.getUserPrincipal().getName();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":6463892,"reputation":15974,"user_id":5277820,"accept_rate":68,"display_name":"dur"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1290,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":33244066,"answer_count":2,"score":3,"last_activity_date":1692855147,"creation_date":1445354232,"question_id":33240443,"body_markdown":"Is it possible to use [Context](http://docs.oracle.com/javaee/6/api/javax/ws/rs/core/Context.html) annotation and [RolesAllowed](https://docs.oracle.com/javaee/6/api/javax/annotation/security/RolesAllowed.html) annotation in a JAX-RS resource with Apache CXF 2.4.6 and Spring Security 3.2.8?\r\n\r\nMy CXF configuration:\r\n\r\n```xml\r\n&lt;jaxrs:server address=&quot;/example&quot;&gt;\r\n    &lt;jaxrs:serviceBeans&gt;\r\n        &lt;ref bean=&quot;myResourceImpl&quot;/&gt;\r\n    &lt;/jaxrs:serviceBeans&gt;\r\n&lt;/jaxrs:server&gt;\r\n```\r\n\r\nMy Java source code:\r\n\r\n```java\r\n@Path(&quot;/myresource&quot;)\r\npublic interface MyResource {\r\n\r\n    @GET\r\n    @Produces(MediaType.TEXT_XML)\r\n    String get();\r\n}\r\n\r\n@Named\r\npublic class MyResourceImpl implements MyResource {\r\n\r\n    @Context\r\n    private SecurityContext securityContext;\r\n\r\n    @Override\r\n    @RolesAllowed(&quot;ROLE_user&quot;)\r\n    public String get() {\r\n        return securityContext.getUserPrincipal().getName();\r\n    }\r\n}\r\n```\r\n\r\nAfter starting the server, I get the following exception:\r\n\r\n```lang-text\r\nCaused by: java.lang.IllegalArgumentException: Can not set javax.ws.rs.core.SecurityContext field MyResourceImpl.securityContext to com.sun.proxy.$Proxy473\r\n    at sun.reflect.UnsafeFieldAccessorImpl.throwSetIllegalArgumentException(UnsafeFieldAccessorImpl.java:164)\r\n    at sun.reflect.UnsafeFieldAccessorImpl.throwSetIllegalArgumentException(UnsafeFieldAccessorImpl.java:168)\r\n    at sun.reflect.UnsafeFieldAccessorImpl.ensureObj(UnsafeFieldAccessorImpl.java:55)\r\n    at sun.reflect.UnsafeObjectFieldAccessorImpl.set(UnsafeObjectFieldAccessorImpl.java:75)\r\n    at java.lang.reflect.Field.set(Field.java:741)\r\n    at org.apache.cxf.jaxrs.utils.InjectionUtils$1.run(InjectionUtils.java:164)\r\n    at java.security.AccessController.doPrivileged(Native Method)\r\n    at org.apache.cxf.jaxrs.utils.InjectionUtils.injectFieldValue(InjectionUtils.java:160)\r\n    at org.apache.cxf.jaxrs.utils.InjectionUtils.injectContextProxiesAndApplication(InjectionUtils.java:912)\r\n    at org.apache.cxf.jaxrs.JAXRSServerFactoryBean.injectContexts(JAXRSServerFactoryBean.java:354)\r\n    at org.apache.cxf.jaxrs.JAXRSServerFactoryBean.updateClassResourceProviders(JAXRSServerFactoryBean.java:380)\r\n    at org.apache.cxf.jaxrs.JAXRSServerFactoryBean.create(JAXRSServerFactoryBean.java:145)\r\n    ... 59 more\r\n```\r\n\r\nIf I remove one of the annotations, it works fine. \r\n\r\nThe problem seems to be that Spring creates a [proxy](http://docs.spring.io/spring/docs/current/spring-framework-reference/html/aop.html#aop-introduction-proxies) and Apache CXF cannot inject that proxy with the [SecurityContext](https://docs.oracle.com/javaee/6/api/javax/ws/rs/core/SecurityContext.html).\r\n\r\nI have to use Spring Security and cannot use [container-based security](https://docs.oracle.com/javaee/6/tutorial/doc/bnbxe.html).","title":"Combining @Context and @RolesAllowed in a JAX-RS resource?","body":"<p>Is it possible to use <a href=\"http://docs.oracle.com/javaee/6/api/javax/ws/rs/core/Context.html\" rel=\"nofollow noreferrer\">Context</a> annotation and <a href=\"https://docs.oracle.com/javaee/6/api/javax/annotation/security/RolesAllowed.html\" rel=\"nofollow noreferrer\">RolesAllowed</a> annotation in a JAX-RS resource with Apache CXF 2.4.6 and Spring Security 3.2.8?</p>\n<p>My CXF configuration:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;jaxrs:server address=&quot;/example&quot;&gt;\n    &lt;jaxrs:serviceBeans&gt;\n        &lt;ref bean=&quot;myResourceImpl&quot;/&gt;\n    &lt;/jaxrs:serviceBeans&gt;\n&lt;/jaxrs:server&gt;\n</code></pre>\n<p>My Java source code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Path(&quot;/myresource&quot;)\npublic interface MyResource {\n\n    @GET\n    @Produces(MediaType.TEXT_XML)\n    String get();\n}\n\n@Named\npublic class MyResourceImpl implements MyResource {\n\n    @Context\n    private SecurityContext securityContext;\n\n    @Override\n    @RolesAllowed(&quot;ROLE_user&quot;)\n    public String get() {\n        return securityContext.getUserPrincipal().getName();\n    }\n}\n</code></pre>\n<p>After starting the server, I get the following exception:</p>\n<pre class=\"lang-text prettyprint-override\"><code>Caused by: java.lang.IllegalArgumentException: Can not set javax.ws.rs.core.SecurityContext field MyResourceImpl.securityContext to com.sun.proxy.$Proxy473\n    at sun.reflect.UnsafeFieldAccessorImpl.throwSetIllegalArgumentException(UnsafeFieldAccessorImpl.java:164)\n    at sun.reflect.UnsafeFieldAccessorImpl.throwSetIllegalArgumentException(UnsafeFieldAccessorImpl.java:168)\n    at sun.reflect.UnsafeFieldAccessorImpl.ensureObj(UnsafeFieldAccessorImpl.java:55)\n    at sun.reflect.UnsafeObjectFieldAccessorImpl.set(UnsafeObjectFieldAccessorImpl.java:75)\n    at java.lang.reflect.Field.set(Field.java:741)\n    at org.apache.cxf.jaxrs.utils.InjectionUtils$1.run(InjectionUtils.java:164)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at org.apache.cxf.jaxrs.utils.InjectionUtils.injectFieldValue(InjectionUtils.java:160)\n    at org.apache.cxf.jaxrs.utils.InjectionUtils.injectContextProxiesAndApplication(InjectionUtils.java:912)\n    at org.apache.cxf.jaxrs.JAXRSServerFactoryBean.injectContexts(JAXRSServerFactoryBean.java:354)\n    at org.apache.cxf.jaxrs.JAXRSServerFactoryBean.updateClassResourceProviders(JAXRSServerFactoryBean.java:380)\n    at org.apache.cxf.jaxrs.JAXRSServerFactoryBean.create(JAXRSServerFactoryBean.java:145)\n    ... 59 more\n</code></pre>\n<p>If I remove one of the annotations, it works fine.</p>\n<p>The problem seems to be that Spring creates a <a href=\"http://docs.spring.io/spring/docs/current/spring-framework-reference/html/aop.html#aop-introduction-proxies\" rel=\"nofollow noreferrer\">proxy</a> and Apache CXF cannot inject that proxy with the <a href=\"https://docs.oracle.com/javaee/6/api/javax/ws/rs/core/SecurityContext.html\" rel=\"nofollow noreferrer\">SecurityContext</a>.</p>\n<p>I have to use Spring Security and cannot use <a href=\"https://docs.oracle.com/javaee/6/tutorial/doc/bnbxe.html\" rel=\"nofollow noreferrer\">container-based security</a>.</p>\n"},{"tags":["java","regex","grammar"],"answers":[{"comments":[{"owner":{"account_id":1494484,"reputation":56249,"user_id":1400768,"display_name":"nhahtdh"},"score":0,"creation_date":1359321947,"post_id":14552428,"comment_id":20301257,"body_markdown":"It is very easy to fail your regex, since the grammar is there. How are you going to deal with `D[D[0] + D[7 + D[4 + (5 + 6)]] + (6 + (8 + (5)) + D[3])]`?","body":"It is very easy to fail your regex, since the grammar is there. How are you going to deal with <code>D[D[0] + D[7 + D[4 + (5 + 6)]] + (6 + (8 + (5)) + D[3])]</code>?"},{"owner":{"display_name":"user1596371"},"score":1,"creation_date":1359322078,"post_id":14552428,"comment_id":20301313,"body_markdown":"True, didn&#39;t see that.  Well in that case, use ANTLR","body":"True, didn&#39;t see that.  Well in that case, use ANTLR"}],"tags":[],"owner":{"display_name":"user1596371"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1359321530,"creation_date":1359321530,"answer_id":14552428,"question_id":14552384,"body_markdown":"If you want the data inside of the square brackets then your regex should look something like:\r\n\r\n    D\\[([^\\]]*)\r\n\r\nwhich basically says &quot;Take &#39;D[&#39;, then take everything from there on that isn&#39;t a &#39;]&#39; and store it in the match&quot;.\r\n\r\nCheck out [Regexper][1] to obtain a visualization of your regular expressions.\r\n\r\n\r\n  [1]: http://www.regexper.com/","title":"Matcher and Regex in Java to output what&#39;s inside Square Brackets but only once","body":"<p>If you want the data inside of the square brackets then your regex should look something like:</p>\n\n<pre><code>D\\[([^\\]]*)\n</code></pre>\n\n<p>which basically says \"Take 'D[', then take everything from there on that isn't a ']' and store it in the match\".</p>\n\n<p>Check out <a href=\"http://www.regexper.com/\" rel=\"nofollow\">Regexper</a> to obtain a visualization of your regular expressions.</p>\n"},{"comments":[{"owner":{"account_id":2053185,"reputation":73,"user_id":1831680,"accept_rate":67,"display_name":"user1831680"},"score":0,"creation_date":1359331451,"post_id":14552440,"comment_id":20303782,"body_markdown":"This is the custom parser. I just don&#39;t understand why the Matcher/regex can parse &quot;D[&quot; out of &quot;D[0]&quot; but not &quot;]&quot;. The matcher doesn&#39;t find the ] for some reason. I don&#39;t understand regex.","body":"This is the custom parser. I just don&#39;t understand why the Matcher/regex can parse &quot;D[&quot; out of &quot;D[0]&quot; but not &quot;]&quot;. The matcher doesn&#39;t find the ] for some reason. I don&#39;t understand regex."},{"owner":{"account_id":1494484,"reputation":56249,"user_id":1400768,"display_name":"nhahtdh"},"score":0,"creation_date":1359333664,"post_id":14552440,"comment_id":20304233,"body_markdown":"@user1831680: You are not doing it in the right way. Looking at your code, you are trying to consume whatever `.*` for the Expr inside `D[`, so it won&#39;t work correctly.","body":"@user1831680: You are not doing it in the right way. Looking at your code, you are trying to consume whatever <code>.*</code> for the Expr inside <code>D[</code>, so it won&#39;t work correctly."},{"owner":{"account_id":2053185,"reputation":73,"user_id":1831680,"accept_rate":67,"display_name":"user1831680"},"score":0,"creation_date":1359334876,"post_id":14552440,"comment_id":20304433,"body_markdown":"i thought that was outside of the D[0], as in parenthesis like D[0](1*2) or something. But even if what you are saying is true, the if statement at the end sends D[0] to the else statement where the pattern is just &quot;\\\\\\]&quot; without the &quot;.*&quot; It gives an index out of bounds exception.","body":"i thought that was outside of the D[0], as in parenthesis like D[0](1*2) or something. But even if what you are saying is true, the if statement at the end sends D[0] to the else statement where the pattern is just &quot;\\\\&#93;&quot; without the &quot;.*&quot; It gives an index out of bounds exception."},{"owner":{"account_id":1494484,"reputation":56249,"user_id":1400768,"display_name":"nhahtdh"},"score":0,"creation_date":1359334971,"post_id":14552440,"comment_id":20304448,"body_markdown":"@user1831680: It gives index out of bounds, since you are accessing group 1, while there is no group in the regex.","body":"@user1831680: It gives index out of bounds, since you are accessing group 1, while there is no group in the regex."},{"owner":{"account_id":2053185,"reputation":73,"user_id":1831680,"accept_rate":67,"display_name":"user1831680"},"score":0,"creation_date":1359335054,"post_id":14552440,"comment_id":20304460,"body_markdown":"and how is that added? I dont understand because it works on &quot;D\\[&quot;","body":"and how is that added? I dont understand because it works on &quot;D&#91;&quot;"},{"owner":{"account_id":1494484,"reputation":56249,"user_id":1400768,"display_name":"nhahtdh"},"score":0,"creation_date":1359335243,"post_id":14552440,"comment_id":20304491,"body_markdown":"@user1831680: Your code doesn&#39;t make any sense to me. I suggest that you read a proper guide to parsing before proceed any further.","body":"@user1831680: Your code doesn&#39;t make any sense to me. I suggest that you read a proper guide to parsing before proceed any further."},{"owner":{"account_id":2053185,"reputation":73,"user_id":1831680,"accept_rate":67,"display_name":"user1831680"},"score":0,"creation_date":1359335293,"post_id":14552440,"comment_id":20304500,"body_markdown":"actually, this worked. m being the Matcher type\nm = Pattern.compile(&quot;(.*)\\\\]&quot;).matcher(expr)).find();\n\ni&#39;ll give you the Check, because you helped me the most.","body":"actually, this worked. m being the Matcher type m = Pattern.compile(&quot;(.*)\\&#93;&quot;).matcher(expr)).find();  i&#39;ll give you the Check, because you helped me the most."},{"owner":{"account_id":1494484,"reputation":56249,"user_id":1400768,"display_name":"nhahtdh"},"score":0,"creation_date":1359335400,"post_id":14552440,"comment_id":20304513,"body_markdown":"@user1831680: You don&#39;t need to accept answer if it doesn&#39;t help you with what you are doing. I&#39;m just saying that what you are doing right now is not going to work in general case.","body":"@user1831680: You don&#39;t need to accept answer if it doesn&#39;t help you with what you are doing. I&#39;m just saying that what you are doing right now is not going to work in general case."}],"tags":[],"owner":{"account_id":1494484,"reputation":56249,"user_id":1400768,"display_name":"nhahtdh"},"comment_count":8,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1359321616,"creation_date":1359321616,"answer_id":14552440,"question_id":14552384,"body_markdown":"There is this part `D[ &lt;Expr&gt; ]` and `( &lt;Expr&gt; )`, which introduces the problem of bracket matching. This is not something Java regex can handle, since it doesn&#39;t support recursive regex.\r\n\r\nIn this case, regex is only useful for lexing, you need to write a custom parser for your language.","title":"Matcher and Regex in Java to output what&#39;s inside Square Brackets but only once","body":"<p>There is this part <code>D[ &lt;Expr&gt; ]</code> and <code>( &lt;Expr&gt; )</code>, which introduces the problem of bracket matching. This is not something Java regex can handle, since it doesn't support recursive regex.</p>\n\n<p>In this case, regex is only useful for lexing, you need to write a custom parser for your language.</p>\n"}],"owner":{"account_id":2053185,"reputation":73,"user_id":1831680,"accept_rate":67,"display_name":"user1831680"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":677,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":14552440,"answer_count":2,"score":-1,"last_activity_date":1692855006,"creation_date":1359321271,"question_id":14552384,"body_markdown":"I am having major trouble with understanding what is going wrong with a regex. To be complete I will lay out some background info.\r\n\r\nThis program is supposed to implement a SIMPLESEM interpreter. The grammar in concern here is this:\r\n\r\n    &lt; Expr &gt;    ==&gt;   &lt; Term &gt; {( + | - ) &lt; Term &gt;}\r\n    \r\n    &lt; Term &gt;    ==&gt;   &lt; Factor &gt; {( * | / | % ) &lt; Factor &gt;}\r\n    \r\n    &lt; Factor &gt;  ==&gt;   &lt; Number &gt; | D[&lt; Expr &gt;] | (&lt; Expr &gt;)\r\n    \r\n    &lt; Number &gt;  ==&gt;   0 | (1..9){0..9}\r\n\r\n\r\nI was provided with this code which is supposed to give me the contents inside the square brackets of a `&lt; Factor &gt;`, but it didn&#39;t work:\r\n\t\r\n     Matcher m;\r\n\t\r\n    (m = Pattern.compile(&quot;D\\\\[(.*)&quot;).matcher(expr)).find();\r\n    \t\texpr = parseExpr(m.group(1));\r\n    \t\t(m = Pattern.compile(&quot;\\\\](.*)&quot;).matcher(expr)).find();\r\n    \t\texpr = m.group(1);\r\n\r\nAs example input i have this: \r\n\r\n    jumpt 5, D[0] == 0\r\n\r\nThe `&lt; Factor &gt;` concerned here is `D[0]`. It doesn&#39;t work because the function above feeds `0]` into `parseExpr()` which doesn&#39;t handle the left over bracket, and it shouldn&#39;t. So i switched it to:\r\n\r\n\r\n    (m = Pattern.compile(&quot;D\\\\[(.*)&quot;).matcher(expr)).find();\r\n    \t\texpr = m.group(1);\r\n    \t\t(m = Pattern.compile(&quot;\\\\](.*)&quot;).matcher(expr)).find();\r\n    \t\texpr = parseExpr(m.group(1));\r\n\r\nbut this didn&#39;t work because of the Matcher/Regex.\r\nI believe it outputted an empty string.\r\nSo then I tried this which just gives me an error that there is no match:\r\n\r\n    (m = Pattern.compile(&quot;D\\\\[(.*)&quot;).matcher(expr)).find();\r\n    expr = m.group(1);\r\n    \r\n    if(expr.contains(&quot;(.*)&quot;)) \r\n    {\r\n    \t(m = Pattern.compile(&quot;\\\\](.*)&quot;).matcher(expr)).find();\r\n    }\r\n    else\r\n    {\r\n    \t(m = Pattern.compile(&quot;\\\\]&quot;).matcher(expr)).find();\r\n    }\t\r\n        expr = m.group(1);\r\n        expr = parseExpr(expr);\r\n\r\nIt gives an index out of bounds at the second to last line.\r\nThanks in advance for your help.","title":"Matcher and Regex in Java to output what&#39;s inside Square Brackets but only once","body":"<p>I am having major trouble with understanding what is going wrong with a regex. To be complete I will lay out some background info.</p>\n\n<p>This program is supposed to implement a SIMPLESEM interpreter. The grammar in concern here is this:</p>\n\n<pre><code>&lt; Expr &gt;    ==&gt;   &lt; Term &gt; {( + | - ) &lt; Term &gt;}\n\n&lt; Term &gt;    ==&gt;   &lt; Factor &gt; {( * | / | % ) &lt; Factor &gt;}\n\n&lt; Factor &gt;  ==&gt;   &lt; Number &gt; | D[&lt; Expr &gt;] | (&lt; Expr &gt;)\n\n&lt; Number &gt;  ==&gt;   0 | (1..9){0..9}\n</code></pre>\n\n<p>I was provided with this code which is supposed to give me the contents inside the square brackets of a <code>&lt; Factor &gt;</code>, but it didn't work:</p>\n\n<pre><code> Matcher m;\n\n(m = Pattern.compile(\"D\\\\[(.*)\").matcher(expr)).find();\n        expr = parseExpr(m.group(1));\n        (m = Pattern.compile(\"\\\\](.*)\").matcher(expr)).find();\n        expr = m.group(1);\n</code></pre>\n\n<p>As example input i have this: </p>\n\n<pre><code>jumpt 5, D[0] == 0\n</code></pre>\n\n<p>The <code>&lt; Factor &gt;</code> concerned here is <code>D[0]</code>. It doesn't work because the function above feeds <code>0]</code> into <code>parseExpr()</code> which doesn't handle the left over bracket, and it shouldn't. So i switched it to:</p>\n\n<pre><code>(m = Pattern.compile(\"D\\\\[(.*)\").matcher(expr)).find();\n        expr = m.group(1);\n        (m = Pattern.compile(\"\\\\](.*)\").matcher(expr)).find();\n        expr = parseExpr(m.group(1));\n</code></pre>\n\n<p>but this didn't work because of the Matcher/Regex.\nI believe it outputted an empty string.\nSo then I tried this which just gives me an error that there is no match:</p>\n\n<pre><code>(m = Pattern.compile(\"D\\\\[(.*)\").matcher(expr)).find();\nexpr = m.group(1);\n\nif(expr.contains(\"(.*)\")) \n{\n    (m = Pattern.compile(\"\\\\](.*)\").matcher(expr)).find();\n}\nelse\n{\n    (m = Pattern.compile(\"\\\\]\").matcher(expr)).find();\n}   \n    expr = m.group(1);\n    expr = parseExpr(expr);\n</code></pre>\n\n<p>It gives an index out of bounds at the second to last line.\nThanks in advance for your help.</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":478989,"reputation":1103,"user_id":891391,"display_name":"yatul"},"score":2,"creation_date":1373457403,"post_id":17570005,"comment_id":25562350,"body_markdown":"Thats beacause of greedy regexps. Look at http://stackoverflow.com/a/2301298/891391","body":"Thats beacause of greedy regexps. Look at <a href=\"http://stackoverflow.com/a/2301298/891391\">stackoverflow.com/a/2301298/891391</a>"}],"answers":[{"comments":[{"owner":{"account_id":449588,"reputation":1152,"user_id":844451,"accept_rate":79,"display_name":"hosseio"},"score":0,"creation_date":1373460258,"post_id":17570121,"comment_id":25564087,"body_markdown":"Thank for your response. That saved my day and it is really understable :)","body":"Thank for your response. That saved my day and it is really understable :)"}],"tags":[],"owner":{"account_id":205662,"reputation":189582,"user_id":454533,"accept_rate":74,"display_name":"Explosion Pills"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1373457623,"creation_date":1373457623,"answer_id":17570121,"question_id":17570005,"body_markdown":"`.*` is *greedy* and will try to match *as much as possible*.  You can make it reluctant/ungreedy by appending a question mark.  `.*?`.\r\n\r\nHowever, this *still* won&#39;t give you what you want because `/element|1717_Lorem/64/` will match up to `480`.  A better regex would probably be\r\n\r\n    /element[^/]+/480/","title":"Getting submatches when the regex match with a larger string","body":"<p><code>.*</code> is <em>greedy</em> and will try to match <em>as much as possible</em>.  You can make it reluctant/ungreedy by appending a question mark.  <code>.*?</code>.</p>\n\n<p>However, this <em>still</em> won't give you what you want because <code>/element|1717_Lorem/64/</code> will match up to <code>480</code>.  A better regex would probably be</p>\n\n<pre><code>/element[^/]+/480/\n</code></pre>\n"}],"owner":{"account_id":449588,"reputation":1152,"user_id":844451,"accept_rate":79,"display_name":"hosseio"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":748,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":17570121,"answer_count":1,"score":0,"last_activity_date":1692854976,"creation_date":1373457305,"question_id":17570005,"body_markdown":"I&#39;m trying to match a pattern in a Java string (a json one). This pattern matches in the string several times, but it also matches with a string that contains the others.\r\nLet me explain myself with an example.\r\n\r\n\t\tString json = &quot;IRRELEVANT_TEXT{&#39;/element|1717_todossavoy/480/&#39;: {item_url:&#39;/element|1717_Lorem/64/&#39;, item_description: &#39;Lorem ipsum dolor sit amet&#39;},&#39;/element|1717_Marcrie/480/&#39;: {item_url:&#39;/element|1717_Vestibulum/64/&#39;, item_description: &#39; Vestibulum enim tellus, sodales sit amet consequat ut&#39;},&#39;/element|1717_Cannes05/434/&#39;: {item_url:&#39;/element|1717_Nullam/64/&#39;, item_description: &#39;Nullam gravida risus vehicula nisi egestas&#39;},&#39;/element|1717_babelsavoy/266/&#39;: {item_url:&#39;/element|1717_Pellentesque/64/&#39;, item_description: &#39;Pellentesque habitant morbi tristique senectus&#39;}};IRRELEVANT&quot;;\r\n\t\tMatcher matcher = Pattern.compile(&quot;/element.*480/&quot;).matcher(json);\r\n\t\twhile(matcher.find()) {\r\n\t\t\tSystem.out.println(matcher.group());\r\n\t\t}\r\n\r\nI am getting the following:\r\n\r\n    /element|1717_todossavoy/480/&#39;: {item_url:&#39;/element|1717_Lorem/64/&#39;, item_description: &#39;Lorem ipsum dolor sit amet&#39;},&#39;/element|1717_Marcrie/480/\r\n\r\nBut I&#39;d like to get the 2 following keys:\r\n\r\n    /element|1717_todossavoy/480/\r\n    /element|1717_Marcrie/480/\r\n\r\nWhat am I doing wrong?\r\n\r\n","title":"Getting submatches when the regex match with a larger string","body":"<p>I'm trying to match a pattern in a Java string (a json one). This pattern matches in the string several times, but it also matches with a string that contains the others.\nLet me explain myself with an example.</p>\n\n<pre><code>    String json = \"IRRELEVANT_TEXT{'/element|1717_todossavoy/480/': {item_url:'/element|1717_Lorem/64/', item_description: 'Lorem ipsum dolor sit amet'},'/element|1717_Marcrie/480/': {item_url:'/element|1717_Vestibulum/64/', item_description: ' Vestibulum enim tellus, sodales sit amet consequat ut'},'/element|1717_Cannes05/434/': {item_url:'/element|1717_Nullam/64/', item_description: 'Nullam gravida risus vehicula nisi egestas'},'/element|1717_babelsavoy/266/': {item_url:'/element|1717_Pellentesque/64/', item_description: 'Pellentesque habitant morbi tristique senectus'}};IRRELEVANT\";\n    Matcher matcher = Pattern.compile(\"/element.*480/\").matcher(json);\n    while(matcher.find()) {\n        System.out.println(matcher.group());\n    }\n</code></pre>\n\n<p>I am getting the following:</p>\n\n<pre><code>/element|1717_todossavoy/480/': {item_url:'/element|1717_Lorem/64/', item_description: 'Lorem ipsum dolor sit amet'},'/element|1717_Marcrie/480/\n</code></pre>\n\n<p>But I'd like to get the 2 following keys:</p>\n\n<pre><code>/element|1717_todossavoy/480/\n/element|1717_Marcrie/480/\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"},{"tags":["java","regex","string"],"answers":[{"comments":[{"owner":{"account_id":1504897,"reputation":141,"user_id":1408517,"accept_rate":27,"display_name":"Yasin Caner"},"score":0,"creation_date":1372600714,"post_id":17390981,"comment_id":25248093,"body_markdown":"First of all , thanks for reply. when i compile i can&#39;t get right sentences. it still dont try to match other lines. İ try to leanr where i am wrong on here http://www.vogella.com/articles/JavaRegularExpressions/article.html . but  cant find.","body":"First of all , thanks for reply. when i compile i can&#39;t get right sentences. it still dont try to match other lines. İ try to leanr where i am wrong on here <a href=\"http://www.vogella.com/articles/JavaRegularExpressions/article.html\" rel=\"nofollow noreferrer\">vogella.com/articles/JavaRegularExpressions/article.html</a> . but  cant find."},{"owner":{"account_id":1853886,"reputation":210617,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"score":0,"creation_date":1372600940,"post_id":17390981,"comment_id":25248136,"body_markdown":"@Acablack. Sorry, edited the answer. Missed the `(?m)` flag. Now it would work.","body":"@Acablack. Sorry, edited the answer. Missed the <code>(?m)</code> flag. Now it would work."},{"owner":{"account_id":1504897,"reputation":141,"user_id":1408517,"accept_rate":27,"display_name":"Yasin Caner"},"score":0,"creation_date":1372601138,"post_id":17390981,"comment_id":25248190,"body_markdown":"oww yeah it is for test why it cant match other lines. Thanks for Ps . And yes it is working with (m) flag. But i wonder something. When i put a breakpoint on println and view m.find() it says false. why it turns false after reading true. it is weird.","body":"oww yeah it is for test why it cant match other lines. Thanks for Ps . And yes it is working with (m) flag. But i wonder something. When i put a breakpoint on println and view m.find() it says false. why it turns false after reading true. it is weird."},{"owner":{"account_id":1853886,"reputation":210617,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"score":0,"creation_date":1372601221,"post_id":17390981,"comment_id":25248214,"body_markdown":"@Acablack. I made one more edit. The last quantifier I forgot to make reluctant. Now it will give you both the matches.","body":"@Acablack. I made one more edit. The last quantifier I forgot to make reluctant. Now it will give you both the matches."},{"owner":{"account_id":1853886,"reputation":210617,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"score":0,"creation_date":1372601278,"post_id":17390981,"comment_id":25248230,"body_markdown":"@Acablack. Breakpoint gives you false, because there is only one line matching that regex. So, it will give `true` only once.","body":"@Acablack. Breakpoint gives you false, because there is only one line matching that regex. So, it will give <code>true</code> only once."},{"owner":{"account_id":1504897,"reputation":141,"user_id":1408517,"accept_rate":27,"display_name":"Yasin Caner"},"score":0,"creation_date":1372601424,"post_id":17390981,"comment_id":25248266,"body_markdown":"i think this reguler expression is a art . hard to desing. Thanks again.","body":"i think this reguler expression is a art . hard to desing. Thanks again."},{"owner":{"account_id":1853886,"reputation":210617,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"score":0,"creation_date":1372601861,"post_id":17390981,"comment_id":25248387,"body_markdown":"@AlanMoore. Yeah right. I messed it. First I made it `(?s)` flag instead of `(?m)`. Forgot to remove `(?s)`, and then used reluctant quantifier. Funny things happens :)","body":"@AlanMoore. Yeah right. I messed it. First I made it <code>(?s)</code> flag instead of <code>(?m)</code>. Forgot to remove <code>(?s)</code>, and then used reluctant quantifier. Funny things happens :)"}],"tags":[],"owner":{"account_id":1853886,"reputation":210617,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"comment_count":7,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1372601934,"creation_date":1372599872,"answer_id":17390981,"question_id":17390965,"body_markdown":"You just need to enable *Multiline mode* of matching using `(?m)` embedded flag or [`Pattern.MULTILINE`][1] mode in your regex. This way, the `$` will stop at every line-terminator, instead of the end of entire input.\r\n\r\n    Pattern p1 = Pattern.compile(&quot;(?m)^To: (.*);tag=(.*)$&quot;);\r\n\r\nAlso, instead of:\r\n\r\n    if(m.find())\r\n\r\nyou should use:\r\n\r\n    while (m.find())\r\n\r\nAlso note that you are mismatching the *Matcher* reference name. You are using *matcher* inside your `if`, but you defined *m*.\r\n\r\nP.S: You are re-assigning a new value to your string at the end. Make sure, you use `+=` instead of `=`.\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#MULTILINE","title":"Parse a Protocol paragraph with matcher?","body":"<p>You just need to enable <em>Multiline mode</em> of matching using <code>(?m)</code> embedded flag or <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#MULTILINE\" rel=\"nofollow\"><code>Pattern.MULTILINE</code></a> mode in your regex. This way, the <code>$</code> will stop at every line-terminator, instead of the end of entire input.</p>\n\n<pre><code>Pattern p1 = Pattern.compile(\"(?m)^To: (.*);tag=(.*)$\");\n</code></pre>\n\n<p>Also, instead of:</p>\n\n<pre><code>if(m.find())\n</code></pre>\n\n<p>you should use:</p>\n\n<pre><code>while (m.find())\n</code></pre>\n\n<p>Also note that you are mismatching the <em>Matcher</em> reference name. You are using <em>matcher</em> inside your <code>if</code>, but you defined <em>m</em>.</p>\n\n<p>P.S: You are re-assigning a new value to your string at the end. Make sure, you use <code>+=</code> instead of <code>=</code>.</p>\n"},{"tags":[],"owner":{"account_id":294495,"reputation":32500,"user_id":598420,"accept_rate":91,"display_name":"Anirudha"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1372600968,"creation_date":1372600968,"answer_id":17391131,"question_id":17390965,"body_markdown":"I would use this regex\r\n\r\n    ^To:\\s+([^;]*);tag=(\\w+)","title":"Parse a Protocol paragraph with matcher?","body":"<p>I would use this regex</p>\n\n<pre><code>^To:\\s+([^;]*);tag=(\\w+)\n</code></pre>\n"}],"owner":{"account_id":1504897,"reputation":141,"user_id":1408517,"accept_rate":27,"display_name":"Yasin Caner"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":123,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":17390981,"answer_count":2,"score":0,"last_activity_date":1692854906,"creation_date":1372599768,"question_id":17390965,"body_markdown":"I try to write a Server-Client program. I can send protocol text and get text correctly.\r\nBut when I try to parse text, I got problem with Matcher Class. Because it matches only first line. So how can I find right String and parse text. I think Matcher don&#39;t try to match other line .if it is bug how can I fix it or I am going to split each line and then try to parse.\r\n\r\nAn example is below, I can&#39;t match String on expression.\r\n\r\n    String veri =&quot;SIP/2.0 200 OK\\r\\n&quot;\r\n    +&quot;Via: SIP/2.0/UDP 10.10.10.34:5060;branch=z9hG4bK3834f681a;received=10.10.10.17\\r\\n&quot;\r\n    +&quot;From: &lt;sip:4420145@10.10.10.24&gt;;tag=as153459088\\r\\n&quot;\r\n    +&quot;To: &lt;sip:44520145@10.10.10.24&gt;;tag=as6163450a5a\\r\\n&quot;\r\n    +&quot;Call-ID: 1e0ssdfdb7f456e5977bc0df60645348cf1ce@[::1]\\r\\n&quot;\r\n    +&quot;CSeq: 18368 REGISTER\\r\\n&quot;\r\n    +&quot;Server: Asterisk PBX 11.3.0\\r\\n&quot;\r\n    +&quot;Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, SUBSCRIBE, NOTIFY, INFO, PUBLISH\\r\\n&quot;\r\n    +&quot;Supported: replaces, timer\\r\\n&quot;\r\n    +&quot;Expires: 120\\r\\n&quot;\r\n    +&quot;Contact: &lt;sip:345dgd@10.10.10.17:5060&gt;;expires=120\\r\\n&quot;\r\n    +&quot;Date: Sat, 29 Jun 2013 14:00:50 GMT\\r\\n&quot;\r\n    +&quot;Content-Length: 0&quot;;\r\n      //veri=&quot;To: &lt;sip:3453@10.10.10.24&gt;;tag=34dgd\\r\\n&quot;;\r\n      Pattern p1 = Pattern.compile(&quot;^To\\\\: (.*);tag=(.*)$&quot;);\r\n\r\n      Matcher m = p1.matcher(veri);\r\n\r\n      if(m.find()){\r\n\r\n        System.out.println(m.group(1).trim());\r\n      }\r\n","title":"Parse a Protocol paragraph with matcher?","body":"<p>I try to write a Server-Client program. I can send protocol text and get text correctly.\nBut when I try to parse text, I got problem with Matcher Class. Because it matches only first line. So how can I find right String and parse text. I think Matcher don't try to match other line .if it is bug how can I fix it or I am going to split each line and then try to parse.</p>\n<p>An example is below, I can't match String on expression.</p>\n<pre><code>String veri =&quot;SIP/2.0 200 OK\\r\\n&quot;\n+&quot;Via: SIP/2.0/UDP 10.10.10.34:5060;branch=z9hG4bK3834f681a;received=10.10.10.17\\r\\n&quot;\n+&quot;From: &lt;sip:4420145@10.10.10.24&gt;;tag=as153459088\\r\\n&quot;\n+&quot;To: &lt;sip:44520145@10.10.10.24&gt;;tag=as6163450a5a\\r\\n&quot;\n+&quot;Call-ID: 1e0ssdfdb7f456e5977bc0df60645348cf1ce@[::1]\\r\\n&quot;\n+&quot;CSeq: 18368 REGISTER\\r\\n&quot;\n+&quot;Server: Asterisk PBX 11.3.0\\r\\n&quot;\n+&quot;Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, SUBSCRIBE, NOTIFY, INFO, PUBLISH\\r\\n&quot;\n+&quot;Supported: replaces, timer\\r\\n&quot;\n+&quot;Expires: 120\\r\\n&quot;\n+&quot;Contact: &lt;sip:345dgd@10.10.10.17:5060&gt;;expires=120\\r\\n&quot;\n+&quot;Date: Sat, 29 Jun 2013 14:00:50 GMT\\r\\n&quot;\n+&quot;Content-Length: 0&quot;;\n  //veri=&quot;To: &lt;sip:3453@10.10.10.24&gt;;tag=34dgd\\r\\n&quot;;\n  Pattern p1 = Pattern.compile(&quot;^To\\\\: (.*);tag=(.*)$&quot;);\n\n  Matcher m = p1.matcher(veri);\n\n  if(m.find()){\n\n    System.out.println(m.group(1).trim());\n  }\n</code></pre>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":39574,"reputation":24267,"user_id":114226,"accept_rate":79,"display_name":"PeterMmm"},"score":0,"creation_date":1371484375,"post_id":17151607,"comment_id":24827172,"body_markdown":"What the parentheses are doing in &quot;(&quot; + keyword + &quot;)&quot; ?","body":"What the parentheses are doing in &quot;(&quot; + keyword + &quot;)&quot; ?"},{"owner":{"account_id":279975,"reputation":15386,"user_id":575421,"accept_rate":50,"display_name":"Mikita Belahlazau"},"score":7,"creation_date":1371484520,"post_id":17151607,"comment_id":24827258,"body_markdown":"Why don&#39;t you use `plainText.contains(keyword)` for this task?","body":"Why don&#39;t you use <code>plainText.contains(keyword)</code> for this task?"},{"owner":{"account_id":1268556,"reputation":48088,"user_id":1225328,"accept_rate":93,"display_name":"sp00m"},"score":0,"creation_date":1371484863,"post_id":17151607,"comment_id":24827459,"body_markdown":"Could you provide the values of the `keywords` set and the `plainText` string?","body":"Could you provide the values of the <code>keywords</code> set and the <code>plainText</code> string?"},{"owner":{"account_id":1268556,"reputation":48088,"user_id":1225328,"accept_rate":93,"display_name":"sp00m"},"score":0,"creation_date":1371484964,"post_id":17151607,"comment_id":24827514,"body_markdown":"@NikitaBeloglazov It should be `&quot;.*&quot; + keyword + &quot;.*&quot;` and anyway, it won&#39;t work for multilines input texts.","body":"@NikitaBeloglazov It should be <code>&quot;.*&quot; + keyword + &quot;.*&quot;</code> and anyway, it won&#39;t work for multilines input texts."},{"owner":{"account_id":2380504,"reputation":2993,"user_id":2082631,"accept_rate":70,"display_name":"Nikitin Mikhail"},"score":0,"creation_date":1371554372,"post_id":17151607,"comment_id":24854624,"body_markdown":"Nikita, I need to check not only for words but for regexps too, and, by the way it doesn&#39;t work even with simple words","body":"Nikita, I need to check not only for words but for regexps too, and, by the way it doesn&#39;t work even with simple words"}],"answers":[{"comments":[{"owner":{"account_id":2380504,"reputation":2993,"user_id":2082631,"accept_rate":70,"display_name":"Nikitin Mikhail"},"score":0,"creation_date":1371554266,"post_id":17151829,"comment_id":24854559,"body_markdown":"I still don&#39;t understand what you are trying to say. I changed this:Pattern pt = Pattern.compile(&quot;(qwer)&quot;); to this: Pattern pt = Pattern.compile(&quot;\\\\bqwer\\\\b&quot;); but still have the same result. it can&#39;t found any word in the text","body":"I still don&#39;t understand what you are trying to say. I changed this:Pattern pt = Pattern.compile(&quot;(qwer)&quot;); to this: Pattern pt = Pattern.compile(&quot;\\\\bqwer\\\\b&quot;); but still have the same result. it can&#39;t found any word in the text"},{"owner":{"account_id":2380504,"reputation":2993,"user_id":2082631,"accept_rate":70,"display_name":"Nikitin Mikhail"},"score":0,"creation_date":1371561777,"post_id":17151829,"comment_id":24859231,"body_markdown":"I can&#39;t understand how could it change the result. Why after this it began looking for words right?","body":"I can&#39;t understand how could it change the result. Why after this it began looking for words right?"},{"owner":{"account_id":1545827,"reputation":2887,"user_id":1439401,"display_name":"ctn"},"score":0,"creation_date":1371566391,"post_id":17151829,"comment_id":24862421,"body_markdown":"@NikitinMikhail It wouldn&#39;t change the result. It would help us diagnose the problem. I suspect there is an issue with either plainText or keyword. Also try to print out keyword, by the way :)","body":"@NikitinMikhail It wouldn&#39;t change the result. It would help us diagnose the problem. I suspect there is an issue with either plainText or keyword. Also try to print out keyword, by the way :)"},{"owner":{"account_id":2380504,"reputation":2993,"user_id":2082631,"accept_rate":70,"display_name":"Nikitin Mikhail"},"score":0,"creation_date":1371567928,"post_id":17151829,"comment_id":24863487,"body_markdown":"you didn&#39;t understand. I understand that that was offered to diagnose the problem. I was kidding about this because the method baegan working right. The only thing I&#39;ve done is that I changed one string this way: Pattern pt = Pattern.compile(&quot;(&quot; + keyword + &quot;)&quot;, Pattern.CASE_INSENSITIVE);","body":"you didn&#39;t understand. I understand that that was offered to diagnose the problem. I was kidding about this because the method baegan working right. The only thing I&#39;ve done is that I changed one string this way: Pattern pt = Pattern.compile(&quot;(&quot; + keyword + &quot;)&quot;, Pattern.CASE_INSENSITIVE);"},{"owner":{"account_id":2380504,"reputation":2993,"user_id":2082631,"accept_rate":70,"display_name":"Nikitin Mikhail"},"score":0,"creation_date":1372600992,"post_id":17151829,"comment_id":25248144,"body_markdown":"I tried to follow your advice and received the following exception&#39; ^ java.util.regex.PatternSyntaxException: \\k is not followed by &#39;&lt;&#39; for named capturing group near index 2\n\\khkj\\b\n  ^&#39;","body":"I tried to follow your advice and received the following exception&#39; ^ java.util.regex.PatternSyntaxException: \\k is not followed by &#39;&lt;&#39; for named capturing group near index 2 \\khkj\\b   ^&#39;"},{"owner":{"account_id":1545827,"reputation":2887,"user_id":1439401,"display_name":"ctn"},"score":0,"creation_date":1372602393,"post_id":17151829,"comment_id":25248524,"body_markdown":"The regex pattern contains `\\\\b` at both ends, no `\\\\k`. `\\\\b` means &quot;word Boundary&quot;.","body":"The regex pattern contains <code>\\\\b</code> at both ends, no <code>\\\\k</code>. <code>\\\\b</code> means &quot;word Boundary&quot;."},{"owner":{"account_id":2380504,"reputation":2993,"user_id":2082631,"accept_rate":70,"display_name":"Nikitin Mikhail"},"score":0,"creation_date":1372603497,"post_id":17151829,"comment_id":25248867,"body_markdown":"yes, I&#39;ve didn&#39;t notice that. but nevertheless it doesn&#39;t work","body":"yes, I&#39;ve didn&#39;t notice that. but nevertheless it doesn&#39;t work"}],"tags":[],"owner":{"account_id":1545827,"reputation":2887,"user_id":1439401,"display_name":"ctn"},"comment_count":7,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1371484616,"creation_date":1371484616,"answer_id":17151829,"question_id":17151607,"body_markdown":"The trouble is elsewhere.\r\n\r\n    import java.util.regex.*;\r\n    \r\n    public class HelloWorld {\r\n    \r\n        public static void main(String []args) {\r\n            Pattern pt = Pattern.compile(&quot;(qwer)&quot;);\r\n            Matcher mt = pt.matcher(&quot;asdf qwer zxcv&quot;);\r\n            System.out.println(mt.find());\r\n        }\r\n    }\r\n\r\nThis prints out true. You may want to use word boundary as delimiter, though:\r\n\r\n    import java.util.regex.*;\r\n    \r\n    public class HelloWorld {\r\n    \r\n        public static void main(String []args) {\r\n            Pattern pt = Pattern.compile(&quot;\\\\bqwer\\\\b&quot;);\r\n            Matcher mt = pt.matcher(&quot;asdf qwer zxcv&quot;);\r\n            System.out.println(mt.find());\r\n            mt = pt.matcher(&quot;asdfqwer zxcv&quot;);\r\n            System.out.println(mt.find());\r\n        }\r\n    }\r\n\r\nThe parenthesis are useless unless you need to capture the keyword in a group. But you already have it to begin with.","title":"Matcher can&#39;t match","body":"<p>The trouble is elsewhere.</p>\n\n<pre><code>import java.util.regex.*;\n\npublic class HelloWorld {\n\n    public static void main(String []args) {\n        Pattern pt = Pattern.compile(\"(qwer)\");\n        Matcher mt = pt.matcher(\"asdf qwer zxcv\");\n        System.out.println(mt.find());\n    }\n}\n</code></pre>\n\n<p>This prints out true. You may want to use word boundary as delimiter, though:</p>\n\n<pre><code>import java.util.regex.*;\n\npublic class HelloWorld {\n\n    public static void main(String []args) {\n        Pattern pt = Pattern.compile(\"\\\\bqwer\\\\b\");\n        Matcher mt = pt.matcher(\"asdf qwer zxcv\");\n        System.out.println(mt.find());\n        mt = pt.matcher(\"asdfqwer zxcv\");\n        System.out.println(mt.find());\n    }\n}\n</code></pre>\n\n<p>The parenthesis are useless unless you need to capture the keyword in a group. But you already have it to begin with.</p>\n"},{"comments":[{"owner":{"account_id":1268556,"reputation":48088,"user_id":1225328,"accept_rate":93,"display_name":"sp00m"},"score":0,"creation_date":1371485023,"post_id":17151844,"comment_id":24827554,"body_markdown":"And how do go through each word of the input text? What about case sensitivity?","body":"And how do go through each word of the input text? What about case sensitivity?"},{"owner":{"account_id":2899504,"reputation":775,"user_id":2486561,"accept_rate":60,"display_name":"Lee Fogg"},"score":0,"creation_date":1371486070,"post_id":17151844,"comment_id":24828149,"body_markdown":"If by input text you mean your blacklisted words, go through the them just just like you are currently, then use `keywords.contains(keyword)`, and I don&#39;t think case sensitivity is a problem - make sure your keywords are the right case or make everything `toLower()`.","body":"If by input text you mean your blacklisted words, go through the them just just like you are currently, then use <code>keywords.contains(keyword)</code>, and I don&#39;t think case sensitivity is a problem - make sure your keywords are the right case or make everything <code>toLower()</code>."}],"tags":[],"owner":{"account_id":2899504,"reputation":775,"user_id":2486561,"accept_rate":60,"display_name":"Lee Fogg"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1371484665,"creation_date":1371484665,"answer_id":17151844,"question_id":17151607,"body_markdown":"Use ArrayList&#39;s built in functions `indexOf(Object o)` and `contains(Object o)` to check if a String exists anywhere in the Array and where.\r\ne.g.\r\n\r\n    ArrayList&lt;String&gt; keywords = new ArrayList&lt;String&gt;();\r\n    keywords.add(&quot;hello&quot;);\r\n    System.out.println(keywords.contains(&quot;hello&quot;));\r\n    System.out.println(keywords.indexOf(&quot;hello&quot;));\r\noutputs: &lt;br&gt;\r\ntrue&lt;br&gt;\r\n0","title":"Matcher can&#39;t match","body":"<p>Use ArrayList's built in functions <code>indexOf(Object o)</code> and <code>contains(Object o)</code> to check if a String exists anywhere in the Array and where.\ne.g.</p>\n\n<pre><code>ArrayList&lt;String&gt; keywords = new ArrayList&lt;String&gt;();\nkeywords.add(\"hello\");\nSystem.out.println(keywords.contains(\"hello\"));\nSystem.out.println(keywords.indexOf(\"hello\"));\n</code></pre>\n\n<p>outputs: <br>\ntrue<br>\n0</p>\n"},{"tags":[],"owner":{"account_id":305188,"reputation":9584,"user_id":615182,"accept_rate":86,"display_name":"Narendra Yadala"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1371522310,"creation_date":1371489871,"answer_id":17153292,"question_id":17151607,"body_markdown":"Try this to filter out messages which contain banned words using the following regex which uses `OR` operator.\r\n\r\n    private static void findBannedWords() {\r\n    \tfinal ArrayList&lt;String&gt; keywords = new ArrayList&lt;String&gt;();\r\n    \tkeywords.add(&quot;f$%k&quot;);\r\n    \tkeywords.add(&quot;s!@t&quot;);\r\n    \tkeywords.add(&quot;a$s&quot;);\r\n    \t\t\r\n    \tString input = &quot;what the f$%k&quot;;\r\n    \t\t\r\n    \tString bannedRegex = &quot;&quot;;\r\n    \tfor (String keyword: keywords){\r\n    \t\tbannedRegex =  bannedRegex + &quot;.*&quot; + keyword + &quot;.*&quot; + &quot;|&quot;;\r\n    \t}\r\n    \t\t\r\n    \tPattern pt = Pattern.compile(bannedRegex.substring(0, bannedRegex.length()-1));\r\n    \tMatcher mt = pt.matcher(input);\r\n    \tif (mt.matches()) {\r\n    \t     System.out.println(&quot;message can&#39;t be processed because it doesn&#39;t satisfy the rule &quot;);\r\n    \t}\r\n    }","title":"Matcher can&#39;t match","body":"<p>Try this to filter out messages which contain banned words using the following regex which uses <code>OR</code> operator.</p>\n\n<pre><code>private static void findBannedWords() {\n    final ArrayList&lt;String&gt; keywords = new ArrayList&lt;String&gt;();\n    keywords.add(\"f$%k\");\n    keywords.add(\"s!@t\");\n    keywords.add(\"a$s\");\n\n    String input = \"what the f$%k\";\n\n    String bannedRegex = \"\";\n    for (String keyword: keywords){\n        bannedRegex =  bannedRegex + \".*\" + keyword + \".*\" + \"|\";\n    }\n\n    Pattern pt = Pattern.compile(bannedRegex.substring(0, bannedRegex.length()-1));\n    Matcher mt = pt.matcher(input);\n    if (mt.matches()) {\n         System.out.println(\"message can't be processed because it doesn't satisfy the rule \");\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":2380504,"reputation":2993,"user_id":2082631,"accept_rate":70,"display_name":"Nikitin Mikhail"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":222,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1692854898,"creation_date":1371483922,"question_id":17151607,"body_markdown":"I have the following code. I need to check the text for existing any of the words from some list of banned words. But even if this word exists in the text matcher doesn&#39;t see it. here is the code:\r\n\r\n    final ArrayList&lt;String&gt; regexps = config.getProperty(property);\r\n       for (String regexp: regexps){\r\n       Pattern pt = Pattern.compile(&quot;(&quot; + regexp + &quot;)&quot;, Pattern.CASE_INSENSITIVE);\r\n       Matcher mt = pt.matcher(plainText);                        \r\n       if (mt.find()){\r\n          result = result + &quot;message can&#39;t be processed because it doesn&#39;t satisfy the rule &quot; + property;\r\n          reason = false;\r\n          System.out.println(&quot;reason&quot; + mt.group() + regexp);\r\n                            }\r\n                        }\r\n\r\nWhat is wrong? This code can&#39;f find regexp `в[ыy][шs]лит[еe]`, which is `regexp` in the `plainText = &quot;Вышлите пожалуйста новый счет на оплату на Санг, пока согласовывали, уже\r\nпрошли его сроки. Лиценз...&quot;`. I also tried another variants of the `regexp` but everything is useless","title":"Matcher can&#39;t match","body":"<p>I have the following code. I need to check the text for existing any of the words from some list of banned words. But even if this word exists in the text matcher doesn't see it. here is the code:</p>\n\n<pre><code>final ArrayList&lt;String&gt; regexps = config.getProperty(property);\n   for (String regexp: regexps){\n   Pattern pt = Pattern.compile(\"(\" + regexp + \")\", Pattern.CASE_INSENSITIVE);\n   Matcher mt = pt.matcher(plainText);                        \n   if (mt.find()){\n      result = result + \"message can't be processed because it doesn't satisfy the rule \" + property;\n      reason = false;\n      System.out.println(\"reason\" + mt.group() + regexp);\n                        }\n                    }\n</code></pre>\n\n<p>What is wrong? This code can'f find regexp <code>в[ыy][шs]лит[еe]</code>, which is <code>regexp</code> in the <code>plainText = \"Вышлите пожалуйста новый счет на оплату на Санг, пока согласовывали, уже\nпрошли его сроки. Лиценз...\"</code>. I also tried another variants of the <code>regexp</code> but everything is useless</p>\n"},{"tags":["java","regex","substring"],"answers":[{"tags":[],"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1369269271,"creation_date":1369268567,"answer_id":16703698,"question_id":16703645,"body_markdown":"Are you looking for something like this?\r\n\r\n    yourString = yourString.replaceAll(&quot;yourRegex&quot;,&quot;$0\\n&quot;)\r\n\r\n`$0` represents group 0 which is part matched by entire regex. Also instead of `\\n` you can use `System.getProperty(&quot;line.separator&quot;)` to pick separator used in your OS. ","title":"Line break after substring","body":"<p>Are you looking for something like this?</p>\n\n<pre><code>yourString = yourString.replaceAll(\"yourRegex\",\"$0\\n\")\n</code></pre>\n\n<p><code>$0</code> represents group 0 which is part matched by entire regex. Also instead of <code>\\n</code> you can use <code>System.getProperty(\"line.separator\")</code> to pick separator used in your OS. </p>\n"},{"tags":[],"owner":{"account_id":1594907,"reputation":664,"user_id":1477333,"accept_rate":100,"display_name":"LanternMike"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1369268718,"creation_date":1369268718,"answer_id":16703722,"question_id":16703645,"body_markdown":"There is a nice tutorial on Matcher at http://docs.oracle.com/javase/tutorial/essential/regex/matcher.html\r\n\r\nLooks like  replaceFirst(String) and replaceAll(String) described on that page could work. They will replace the matching text and you can replace with same text plus the \\n.","title":"Line break after substring","body":"<p>There is a nice tutorial on Matcher at <a href=\"http://docs.oracle.com/javase/tutorial/essential/regex/matcher.html\" rel=\"nofollow\">http://docs.oracle.com/javase/tutorial/essential/regex/matcher.html</a></p>\n\n<p>Looks like  replaceFirst(String) and replaceAll(String) described on that page could work. They will replace the matching text and you can replace with same text plus the \\n.</p>\n"},{"tags":[],"owner":{"account_id":2767975,"reputation":66,"user_id":2383210,"display_name":"John484"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1369268769,"creation_date":1369268769,"answer_id":16703728,"question_id":16703645,"body_markdown":"You probably want something like this instead of using matcher.find:\r\n\r\n    System.out.println(contentsToSearch.replaceAll(&quot;\\\\*/&quot;, &quot;\\n&quot;));","title":"Line break after substring","body":"<p>You probably want something like this instead of using matcher.find:</p>\n\n<pre><code>System.out.println(contentsToSearch.replaceAll(\"\\\\*/\", \"\\n\"));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":794766,"reputation":158675,"user_id":871026,"accept_rate":76,"display_name":"Reimeus"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1369269946,"creation_date":1369269110,"answer_id":16703778,"question_id":16703645,"body_markdown":"You could simply do:\r\n\r\n    contentsToSearch = contentsToSearch.replaceAll(&quot;(/\\\\*|\\\\*/)&quot;, &quot;$1\\n&quot;)","title":"Line break after substring","body":"<p>You could simply do:</p>\n\n<pre><code>contentsToSearch = contentsToSearch.replaceAll(\"(/\\\\*|\\\\*/)\", \"$1\\n\")\n</code></pre>\n"}],"owner":{"account_id":1254567,"reputation":13822,"user_id":1565984,"accept_rate":65,"display_name":"kandroidj"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":360,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":16703778,"answer_count":4,"score":0,"last_activity_date":1692854889,"creation_date":1369268149,"question_id":16703645,"body_markdown":"If I use a pattern and matcher in Java how can I add a line break right after I find the substring?\r\n**UPDATE**\r\n\r\nI found a solution using the `replaceAll(String,String);` method\r\n\r\n**Thanks a lot guys my solution has been formatted below**\r\n\r\n     String contentsToSearch = &quot;This is an example string /* example comment in my string */ with some extra text following my inline comment&quot;;\r\n    //String regex = &quot;[*/]&quot; ;\r\n    //Pattern pattern = Pattern.compile(regex);\r\n    //Matcher matcher = pattern.matcher(contentsToSearch);\r\n\r\n    //if(matcher.find()){\r\n          // add a line break to the string i am searching\r\n     //}else{\r\n          // print out my string regularly\r\n      //    System.out.println(contentsToSearch);\r\n     //}\r\n     contentsToSearch = contentsToSearch.replaceAll(&quot;\\\\*/&quot;, &quot;\\\\*/\\n&quot;);\r\n     System.out.println(contentsToSearch);","title":"Line break after substring","body":"<p>If I use a pattern and matcher in Java how can I add a line break right after I find the substring?\n<strong>UPDATE</strong></p>\n\n<p>I found a solution using the <code>replaceAll(String,String);</code> method</p>\n\n<p><strong>Thanks a lot guys my solution has been formatted below</strong></p>\n\n<pre><code> String contentsToSearch = \"This is an example string /* example comment in my string */ with some extra text following my inline comment\";\n//String regex = \"[*/]\" ;\n//Pattern pattern = Pattern.compile(regex);\n//Matcher matcher = pattern.matcher(contentsToSearch);\n\n//if(matcher.find()){\n      // add a line break to the string i am searching\n //}else{\n      // print out my string regularly\n  //    System.out.println(contentsToSearch);\n //}\n contentsToSearch = contentsToSearch.replaceAll(\"\\\\*/\", \"\\\\*/\\n\");\n System.out.println(contentsToSearch);\n</code></pre>\n"},{"tags":["java","scxml","apache-commons-scxml"],"comments":[{"owner":{"account_id":2218384,"reputation":3208,"user_id":1958461,"accept_rate":79,"display_name":"Pete B."},"score":0,"creation_date":1426537025,"post_id":8286760,"comment_id":46405118,"body_markdown":"I like the pom.xml solution the best, good work.","body":"I like the pom.xml solution the best, good work."}],"answers":[{"comments":[{"owner":{"account_id":183857,"reputation":15364,"user_id":419516,"accept_rate":87,"display_name":"user219882"},"score":0,"creation_date":1322410143,"post_id":8286795,"comment_id":10205674,"body_markdown":"Thank you. I only had to add `commons-logging`, `commons-jexl` and `xalan` libraries.","body":"Thank you. I only had to add <code>commons-logging</code>, <code>commons-jexl</code> and <code>xalan</code> libraries."}],"tags":[],"owner":{"account_id":299251,"reputation":335925,"user_id":605744,"accept_rate":100,"display_name":"Tomasz Nurkiewicz"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1322409197,"creation_date":1322409197,"answer_id":8286795,"question_id":8286760,"body_markdown":"Add [`commons-jexl.jar`](http://repo1.maven.org/maven2/commons-jexl/commons-jexl/1.1/commons-jexl-1.1.jar) to the CLASSPATH as well. According to the project [`pom.xml`](http://repo1.maven.org/maven2/commons-scxml/commons-scxml/0.9/commons-scxml-0.9.pom) in version 0.9 you will also need (excluding transitive depndencies):\r\n\r\n* `commons-logging`\r\n* `commons-digester`\r\n* `commons-beanutils`\r\n* `commons-el`\r\n","title":"Apache Commons SCXML - cannot find JexlContext","body":"<p>Add <a href=\"http://repo1.maven.org/maven2/commons-jexl/commons-jexl/1.1/commons-jexl-1.1.jar\" rel=\"nofollow\"><code>commons-jexl.jar</code></a> to the CLASSPATH as well. According to the project <a href=\"http://repo1.maven.org/maven2/commons-scxml/commons-scxml/0.9/commons-scxml-0.9.pom\" rel=\"nofollow\"><code>pom.xml</code></a> in version 0.9 you will also need (excluding transitive depndencies):</p>\n\n<ul>\n<li><code>commons-logging</code></li>\n<li><code>commons-digester</code></li>\n<li><code>commons-beanutils</code></li>\n<li><code>commons-el</code></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":429996,"reputation":33,"user_id":813178,"display_name":"keerthi"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1358289379,"creation_date":1358289379,"answer_id":14348222,"question_id":8286760,"body_markdown":"All SCXML dependency jars can be found here:\r\n\r\nhttp://commons.apache.org/scxml/dependencies.html\r\n","title":"Apache Commons SCXML - cannot find JexlContext","body":"<p>All SCXML dependency jars can be found here:</p>\n\n<p><a href=\"http://commons.apache.org/scxml/dependencies.html\" rel=\"nofollow\">http://commons.apache.org/scxml/dependencies.html</a></p>\n"},{"tags":[],"owner":{"account_id":4849409,"reputation":89,"user_id":3912144,"display_name":"milchreis"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692854829,"creation_date":1692854829,"answer_id":76966423,"question_id":8286760,"body_markdown":"I got the same problem almost 12 years after the question. The answser are not working for the current version of [common-scxml2][1]. I found a soultion with adding the currently needed version of jexl3.\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n    &lt;artifactId&gt;commons-jexl3&lt;/artifactId&gt;\r\n    &lt;version&gt;3.3&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\n\r\n  [1]: https://github.com/apache/commons-scxml","title":"Apache Commons SCXML - cannot find JexlContext","body":"<p>I got the same problem almost 12 years after the question. The answser are not working for the current version of <a href=\"https://github.com/apache/commons-scxml\" rel=\"nofollow noreferrer\">common-scxml2</a>. I found a soultion with adding the currently needed version of jexl3.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n    &lt;artifactId&gt;commons-jexl3&lt;/artifactId&gt;\n    &lt;version&gt;3.3&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":183857,"reputation":15364,"user_id":419516,"accept_rate":87,"display_name":"user219882"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5865,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":8286795,"answer_count":3,"score":3,"last_activity_date":1692854829,"creation_date":1322408893,"question_id":8286760,"body_markdown":"I&#39;m new to SCXML and I cannot start even the simplest application. When I try to start it I get the following exception. But I have the library `commons-scxml-0.9.jar` with that class on classpath. Any ideas?\r\n\r\n    Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/apache/commons/jexl/JexlContext\r\n\tat java.lang.ClassLoader.defineClass1(Native Method)\r\n\tat java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)\r\n\tat java.lang.ClassLoader.defineClass(ClassLoader.java:615)\r\n\tat java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)\r\n\tat java.net.URLClassLoader.defineClass(URLClassLoader.java:283)\r\n\tat java.net.URLClassLoader.access$000(URLClassLoader.java:58)\r\n\tat java.net.URLClassLoader$1.run(URLClassLoader.java:197)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat java.net.URLClassLoader.findClass(URLClassLoader.java:190)\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:306)\r\n\tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:247)\r\n\tat org.apache.commons.scxml.env.AbstractStateMachine.&lt;init&gt;(AbstractStateMachine.java:103)\r\n\tat main.StateMachineImpl.&lt;init&gt;(StateMachineImpl.java:8)\r\n\tat main.Main.main(Main.java:6)\r\n\r\n    Caused by: java.lang.ClassNotFoundException: org.apache.commons.jexl.JexlContext\r\n\tat java.net.URLClassLoader$1.run(URLClassLoader.java:202)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat java.net.URLClassLoader.findClass(URLClassLoader.java:190)\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:306)\r\n\tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:247)\r\n\t... 15 more\r\n\r\n\r\n\r\nHere is the code:\r\n\r\n`Main class`\r\n\r\n    public class Main {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tStateMachineImpl stateMachineImpl = new StateMachineImpl();\r\n    \t\tstateMachineImpl.fireEvent(Event.START.getEvent());\r\n    \t\tstateMachineImpl.fireEvent(Event.STOP.getEvent());\r\n    \t}\r\n    }\r\n\r\n`Event`\r\n\r\n\tpublic enum Event {\r\n\t\r\n\t\tSTART(&quot;event.start&quot;), STOP(&quot;event.stop&quot;);\r\n\t\r\n\t\tprivate String event;\r\n\t\r\n\t\tprivate Event(String event) {\r\n\t\t\tthis.event = event;\r\n\t\t}\r\n\t\r\n\t\tpublic String getEvent() {\r\n\t\t\treturn event;\r\n\t\t}\r\n\t\r\n\t\tpublic void setEvent(String event) {\r\n\t\t\tthis.event = event;\r\n\t\t}\r\n\t\r\n\t}\r\n\r\n\r\n`StateMachineImpl`\r\n\t\r\n\tpublic class StateMachineImpl extends AbstractStateMachine {\r\n\t\r\n\t\tpublic StateMachineImpl() {\r\n\t\t\tsuper(StateMachineImpl.class.getClassLoader().getResource(&quot;state-machine-cfg.xml&quot;));\r\n\t\t}\r\n\t\r\n\t\tpublic void off() {\r\n\t\t\tSystem.out.println(&quot;StateMachine is OFF&quot;);\r\n\t\t}\r\n\t\r\n\t\tpublic void running() {\r\n\t\t\tSystem.out.println(&quot;StateMachine is RUNNING&quot;);\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n`state-machine-cfg.xml`\r\n&lt;!-- language:xml --&gt;\r\n\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\t&lt;scxml xmlns=&quot;http://www.w3.org/2005/07/scxml&quot; version=&quot;1.0&quot;\r\n\t\tinitialstate=&quot;off&quot;&gt;\r\n\t\r\n\t\t&lt;state id=&quot;off&quot;&gt;\r\n\t\t\t&lt;transition event=&quot;event.start&quot; target=&quot;running&quot; /&gt;\r\n\t\t&lt;/state&gt;\r\n\t\t\r\n\t\t&lt;state id=&quot;running&quot;&gt;\r\n\t\t\t&lt;transition event=&quot;event.stop&quot; target=&quot;off&quot; /&gt;\r\n\t\t&lt;/state&gt;\r\n\t\t\r\n\t&lt;/scxml&gt;\r\n\t\r\n**EDIT - solution:**\r\nI have to add additional dependencies (I thought they would be loaded by Maven automatically).\r\n\r\n`pom.xml dependencies`\r\n\r\n    &lt;dependency&gt;\r\n\t\t&lt;groupId&gt;commons-scxml&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;commons-scxml&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;0.9&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;commons-logging&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;1.1.1&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;commons-jexl&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;commons-jexl&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;1.1&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;xalan&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;xalan&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.7.1&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\r\n","title":"Apache Commons SCXML - cannot find JexlContext","body":"<p>I'm new to SCXML and I cannot start even the simplest application. When I try to start it I get the following exception. But I have the library <code>commons-scxml-0.9.jar</code> with that class on classpath. Any ideas?</p>\n\n<pre><code>Exception in thread \"main\" java.lang.NoClassDefFoundError: org/apache/commons/jexl/JexlContext\nat java.lang.ClassLoader.defineClass1(Native Method)\nat java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)\nat java.lang.ClassLoader.defineClass(ClassLoader.java:615)\nat java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)\nat java.net.URLClassLoader.defineClass(URLClassLoader.java:283)\nat java.net.URLClassLoader.access$000(URLClassLoader.java:58)\nat java.net.URLClassLoader$1.run(URLClassLoader.java:197)\nat java.security.AccessController.doPrivileged(Native Method)\nat java.net.URLClassLoader.findClass(URLClassLoader.java:190)\nat java.lang.ClassLoader.loadClass(ClassLoader.java:306)\nat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)\nat java.lang.ClassLoader.loadClass(ClassLoader.java:247)\nat org.apache.commons.scxml.env.AbstractStateMachine.&lt;init&gt;(AbstractStateMachine.java:103)\nat main.StateMachineImpl.&lt;init&gt;(StateMachineImpl.java:8)\nat main.Main.main(Main.java:6)\n\nCaused by: java.lang.ClassNotFoundException: org.apache.commons.jexl.JexlContext\nat java.net.URLClassLoader$1.run(URLClassLoader.java:202)\nat java.security.AccessController.doPrivileged(Native Method)\nat java.net.URLClassLoader.findClass(URLClassLoader.java:190)\nat java.lang.ClassLoader.loadClass(ClassLoader.java:306)\nat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)\nat java.lang.ClassLoader.loadClass(ClassLoader.java:247)\n... 15 more\n</code></pre>\n\n<p>Here is the code:</p>\n\n<p><code>Main class</code></p>\n\n<pre><code>public class Main {\n    public static void main(String[] args) {\n        StateMachineImpl stateMachineImpl = new StateMachineImpl();\n        stateMachineImpl.fireEvent(Event.START.getEvent());\n        stateMachineImpl.fireEvent(Event.STOP.getEvent());\n    }\n}\n</code></pre>\n\n<p><code>Event</code></p>\n\n<pre><code>public enum Event {\n\n    START(\"event.start\"), STOP(\"event.stop\");\n\n    private String event;\n\n    private Event(String event) {\n        this.event = event;\n    }\n\n    public String getEvent() {\n        return event;\n    }\n\n    public void setEvent(String event) {\n        this.event = event;\n    }\n\n}\n</code></pre>\n\n<p><code>StateMachineImpl</code></p>\n\n<pre><code>public class StateMachineImpl extends AbstractStateMachine {\n\n    public StateMachineImpl() {\n        super(StateMachineImpl.class.getClassLoader().getResource(\"state-machine-cfg.xml\"));\n    }\n\n    public void off() {\n        System.out.println(\"StateMachine is OFF\");\n    }\n\n    public void running() {\n        System.out.println(\"StateMachine is RUNNING\");\n    }\n\n}\n</code></pre>\n\n<p><code>state-machine-cfg.xml</code></p>\n\n\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;scxml xmlns=\"http://www.w3.org/2005/07/scxml\" version=\"1.0\"\n    initialstate=\"off\"&gt;\n\n    &lt;state id=\"off\"&gt;\n        &lt;transition event=\"event.start\" target=\"running\" /&gt;\n    &lt;/state&gt;\n\n    &lt;state id=\"running\"&gt;\n        &lt;transition event=\"event.stop\" target=\"off\" /&gt;\n    &lt;/state&gt;\n\n&lt;/scxml&gt;\n</code></pre>\n\n<p><strong>EDIT - solution:</strong>\nI have to add additional dependencies (I thought they would be loaded by Maven automatically).</p>\n\n<p><code>pom.xml dependencies</code></p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;commons-scxml&lt;/groupId&gt;\n    &lt;artifactId&gt;commons-scxml&lt;/artifactId&gt;\n    &lt;version&gt;0.9&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;commons-logging&lt;/groupId&gt;\n    &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\n    &lt;version&gt;1.1.1&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;commons-jexl&lt;/groupId&gt;\n    &lt;artifactId&gt;commons-jexl&lt;/artifactId&gt;\n    &lt;version&gt;1.1&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;xalan&lt;/groupId&gt;\n    &lt;artifactId&gt;xalan&lt;/artifactId&gt;\n    &lt;version&gt;2.7.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":1,"creation_date":1369146558,"post_id":16672539,"comment_id":23989080,"body_markdown":"Don&#39;t make your life difficult, put the queries in a properties file (with any key), load it, and iterate over the valueSet.","body":"Don&#39;t make your life difficult, put the queries in a properties file (with any key), load it, and iterate over the valueSet."},{"owner":{"account_id":1379782,"reputation":1108,"user_id":1313047,"accept_rate":62,"display_name":"Velth"},"score":0,"creation_date":1369146776,"post_id":16672539,"comment_id":23989206,"body_markdown":"That ain&#39;t a possible solution, since I need to work with I get, I cannot demand a format as input. The input is a text file containing SQL commands, which I need to extract/parse.","body":"That ain&#39;t a possible solution, since I need to work with I get, I cannot demand a format as input. The input is a text file containing SQL commands, which I need to extract/parse."},{"owner":{"account_id":1251686,"reputation":29348,"user_id":1531054,"accept_rate":95,"display_name":"s.d"},"score":4,"creation_date":1369146893,"post_id":16672539,"comment_id":23989264,"body_markdown":"Any chance for whoever created that string to include &lt;query&gt;...&lt;/query&gt; ? Using plain text for structured information and forcing a developer to live with it seems a deliberate cruelty.","body":"Any chance for whoever created that string to include &lt;query&gt;...&lt;/query&gt; ? Using plain text for structured information and forcing a developer to live with it seems a deliberate cruelty."},{"owner":{"account_id":1387645,"reputation":7926,"user_id":1319284,"accept_rate":69,"display_name":"kutschkem"},"score":0,"creation_date":1369147229,"post_id":16672539,"comment_id":23989481,"body_markdown":"What is your pseudocode example matching? Looks almost exactly like one of the solutions, so what does not work?","body":"What is your pseudocode example matching? Looks almost exactly like one of the solutions, so what does not work?"},{"owner":{"account_id":1153709,"reputation":5117,"user_id":1134885,"display_name":"NovaDenizen"},"score":2,"creation_date":1369147318,"post_id":16672539,"comment_id":23989533,"body_markdown":"Regexps are not a shortcut to parsing.  Learn to parse.","body":"Regexps are not a shortcut to parsing.  Learn to parse."}],"answers":[{"tags":[],"owner":{"account_id":1529045,"reputation":3980,"user_id":1426742,"accept_rate":74,"display_name":"Walls"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1369146984,"creation_date":1369146984,"answer_id":16672705,"question_id":16672539,"body_markdown":"`(?m)^(UPDATE|SELECT|INSERT INTO).*;$` should work.  This would extend the pattern to match over newlines.  It should be able to loop through and find all your SQL.\r\n\r\nLooking at the example you provided it will match your commands until the `;`.  You can see the example used for testing [here](http://rubular.com/r/LTxNI9Seay).","title":"Regular expression to extract SQL query","body":"<p><code>(?m)^(UPDATE|SELECT|INSERT INTO).*;$</code> should work.  This would extend the pattern to match over newlines.  It should be able to loop through and find all your SQL.</p>\n\n<p>Looking at the example you provided it will match your commands until the <code>;</code>.  You can see the example used for testing <a href=\"http://rubular.com/r/LTxNI9Seay\" rel=\"nofollow\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":1033846,"reputation":3595,"user_id":1041631,"accept_rate":60,"display_name":"Lzh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1369147005,"creation_date":1369147005,"answer_id":16672713,"question_id":16672539,"body_markdown":"If you&#39;re dealing with a language, create a lexer that tokenizes your string. Use [JFlex][1], which is a lexical analyzer generator. It generates a Java class that splits a string into tokens based on a grammar specified in a special file. Take the relevant grammar rules from [this file][2].\r\n\r\nParsing is a separate process than tokenization (or lexical analysis). You might want to use a parser generator, after lexical analysis, if lexical analysis is not enough.\r\n\r\n  [1]: http://jflex.de\r\n  [2]: http://yaxx.googlecode.com/svn/trunk/sql/scn2.l","title":"Regular expression to extract SQL query","body":"<p>If you're dealing with a language, create a lexer that tokenizes your string. Use <a href=\"http://jflex.de\" rel=\"nofollow\">JFlex</a>, which is a lexical analyzer generator. It generates a Java class that splits a string into tokens based on a grammar specified in a special file. Take the relevant grammar rules from <a href=\"http://yaxx.googlecode.com/svn/trunk/sql/scn2.l\" rel=\"nofollow\">this file</a>.</p>\n\n<p>Parsing is a separate process than tokenization (or lexical analysis). You might want to use a parser generator, after lexical analysis, if lexical analysis is not enough.</p>\n"},{"tags":[],"owner":{"account_id":2466460,"reputation":17100,"user_id":2149440,"accept_rate":82,"display_name":"Bart"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1369147618,"creation_date":1369147618,"answer_id":16672933,"question_id":16672539,"body_markdown":"You can match it &quot;properly&quot; as long as the semicolon is the last non-whitespace character on that line.\r\n\r\n    final String regex = ^(SELECT|UPDATE|INSERT)[\\s\\S]+?\\;\\s*?$\r\n\r\n    final Pattern p = Pattern.compile(regex, Pattern.MULTILINE);\r\n    final Matcher matcher = p.matcher(content);","title":"Regular expression to extract SQL query","body":"<p>You can match it \"properly\" as long as the semicolon is the last non-whitespace character on that line.</p>\n\n<pre><code>final String regex = ^(SELECT|UPDATE|INSERT)[\\s\\S]+?\\;\\s*?$\n\nfinal Pattern p = Pattern.compile(regex, Pattern.MULTILINE);\nfinal Matcher matcher = p.matcher(content);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2602354,"reputation":2547,"user_id":2254382,"display_name":"melwil"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1476259467,"creation_date":1369148678,"answer_id":16673307,"question_id":16672539,"body_markdown":"I&#39;ll start off by saying that this is not a good way of doing it, and strongly urge you to find another method of doing it, preferrably tagging it properly where the statements are made, so you don&#39;t end up in this situation.\r\n\r\nThat being said, SQL requires it to start with one of the following; `DELETE`, `SELECT`, `WITH`, `UPDATE` or `INSERT INTO`. It also requires that the input ends with `;`.\r\n\r\nWe can use this to grab all sequences matching SQL with the following:\r\n\r\n    final String regex = &quot;^(INSERT INTO|UPDATE|SELECT|WITH|DELETE)(?:[^;&#39;]|(?:&#39;[^&#39;]+&#39;))+;\\\\s*$&quot;;\r\n    final Pattern p = Pattern.compile(regex, Pattern.MULTILINE | Pattern.DOTALL);\r\n\r\nGroup 1 now holds the operating word, in case you wish to filter valid SQL on `UPDATE` or `SELECT`.\r\n\r\nSee the regex in action, as well as a cave-at here:\r\n\r\nhttps://regex101.com/r/dt9XTK/2","title":"Regular expression to extract SQL query","body":"<p>I'll start off by saying that this is not a good way of doing it, and strongly urge you to find another method of doing it, preferrably tagging it properly where the statements are made, so you don't end up in this situation.</p>\n\n<p>That being said, SQL requires it to start with one of the following; <code>DELETE</code>, <code>SELECT</code>, <code>WITH</code>, <code>UPDATE</code> or <code>INSERT INTO</code>. It also requires that the input ends with <code>;</code>.</p>\n\n<p>We can use this to grab all sequences matching SQL with the following:</p>\n\n<pre><code>final String regex = \"^(INSERT INTO|UPDATE|SELECT|WITH|DELETE)(?:[^;']|(?:'[^']+'))+;\\\\s*$\";\nfinal Pattern p = Pattern.compile(regex, Pattern.MULTILINE | Pattern.DOTALL);\n</code></pre>\n\n<p>Group 1 now holds the operating word, in case you wish to filter valid SQL on <code>UPDATE</code> or <code>SELECT</code>.</p>\n\n<p>See the regex in action, as well as a cave-at here:</p>\n\n<p><a href=\"https://regex101.com/r/dt9XTK/2\" rel=\"nofollow\">https://regex101.com/r/dt9XTK/2</a></p>\n"},{"tags":[],"owner":{"account_id":59490,"reputation":1449,"user_id":178003,"display_name":"Jerome"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1369157075,"creation_date":1369157075,"answer_id":16675951,"question_id":16672539,"body_markdown":"SQL is complicated enough that you will need context to find all statements, meaning that you can&#39;t do this with a regular expression.\r\n\r\nFor example:\r\n\r\n    SELECT Model FROM Product\r\n    WHERE ManufacturerID IN (SELECT ManufacturerID FROM Manufacturer \r\n    WHERE Manufacturer = &#39;Dell&#39;)\r\n\r\n(example comes from http://www.sql-tutorial.com/sql-nested-queries-sql-tutorial/). Nested queries can be nested multiple times, start with different values, etc. **If** you could write a regular expression for the subset you are interested in, it would be unreadable.\r\n\r\n[ANTLR][1] has a [SQL 2003 grammar][2] available (I haven&#39;t tried it).\r\n\r\n\r\n  [1]: http://www.antlr3.org/\r\n  [2]: http://www.antlr3.org/grammar/1302709126925/SQL2003_Grammar.zip","title":"Regular expression to extract SQL query","body":"<p>SQL is complicated enough that you will need context to find all statements, meaning that you can't do this with a regular expression.</p>\n\n<p>For example:</p>\n\n<pre><code>SELECT Model FROM Product\nWHERE ManufacturerID IN (SELECT ManufacturerID FROM Manufacturer \nWHERE Manufacturer = 'Dell')\n</code></pre>\n\n<p>(example comes from <a href=\"http://www.sql-tutorial.com/sql-nested-queries-sql-tutorial/\" rel=\"nofollow\">http://www.sql-tutorial.com/sql-nested-queries-sql-tutorial/</a>). Nested queries can be nested multiple times, start with different values, etc. <strong>If</strong> you could write a regular expression for the subset you are interested in, it would be unreadable.</p>\n\n<p><a href=\"http://www.antlr3.org/\" rel=\"nofollow\">ANTLR</a> has a <a href=\"http://www.antlr3.org/grammar/1302709126925/SQL2003_Grammar.zip\" rel=\"nofollow\">SQL 2003 grammar</a> available (I haven't tried it).</p>\n"}],"owner":{"account_id":1379782,"reputation":1108,"user_id":1313047,"accept_rate":62,"display_name":"Velth"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19297,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":5,"score":6,"last_activity_date":1692854815,"creation_date":1369146444,"question_id":16672539,"body_markdown":"Is there a regex which extracts SQL queries from a string? I&#39;m ***NOT*** interested to validate any SQL syntax, rather, and only extracting a selection of SQL commands. This to parse a given SQL file/string in a flexible manner.\r\n\r\nGiven is the following SQL file/string example:\r\n\r\n    SELECT\r\n        *\r\n    FROM\r\n        test_table\r\n    WHERE\r\n        test_row = &#39;Testing ; semicolon&#39;;\r\n    \r\n    SELECT * FROM another_test_table;\r\n\r\n    INSERT INTO \r\n        table_name \r\n    VALUES \r\n        (value1,&#39;value which contains semicolon ;;;;&#39;,value3,...);\r\n\r\nSome pseudocode example would be: `^(UPDATE|SELECT|INSERT INTO)(.*)(;)$`. In the future I&#39;m looking to extend this with all (possible) commands.\r\n\r\n - Look for a starting match with either: (UPDATE|SELECT|INSERT|INTO)\r\n - Zero or more `any character` (including whitespaces and newlines)\r\n - Stop at `;`, which delimits the SQL query.\r\n\r\nWhenever this would be possible via a regex the following Java code is able to extract all SQL commands:\r\n\r\n    final String regex = &quot;LOOKING_FOR_THIS_ONE&quot;;\r\n    final Pattern p = Pattern.compile(regex, Pattern.MULTILINE);\r\n    final Matcher matcher = p.matcher(content);\r\n    \r\n    while (matcher.find()) {\r\n      // matcher.group() now contains the full SQL command\r\n    }\r\n","title":"Regular expression to extract SQL query","body":"<p>Is there a regex which extracts SQL queries from a string? I'm <em><strong>NOT</strong></em> interested to validate any SQL syntax, rather, and only extracting a selection of SQL commands. This to parse a given SQL file/string in a flexible manner.</p>\n<p>Given is the following SQL file/string example:</p>\n<pre><code>SELECT\n    *\nFROM\n    test_table\nWHERE\n    test_row = 'Testing ; semicolon';\n\nSELECT * FROM another_test_table;\n\nINSERT INTO \n    table_name \nVALUES \n    (value1,'value which contains semicolon ;;;;',value3,...);\n</code></pre>\n<p>Some pseudocode example would be: <code>^(UPDATE|SELECT|INSERT INTO)(.*)(;)$</code>. In the future I'm looking to extend this with all (possible) commands.</p>\n<ul>\n<li>Look for a starting match with either: (UPDATE|SELECT|INSERT|INTO)</li>\n<li>Zero or more <code>any character</code> (including whitespaces and newlines)</li>\n<li>Stop at <code>;</code>, which delimits the SQL query.</li>\n</ul>\n<p>Whenever this would be possible via a regex the following Java code is able to extract all SQL commands:</p>\n<pre><code>final String regex = &quot;LOOKING_FOR_THIS_ONE&quot;;\nfinal Pattern p = Pattern.compile(regex, Pattern.MULTILINE);\nfinal Matcher matcher = p.matcher(content);\n\nwhile (matcher.find()) {\n  // matcher.group() now contains the full SQL command\n}\n</code></pre>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":2509313,"reputation":4808,"user_id":2182172,"display_name":"Lone nebula"},"score":2,"creation_date":1366960052,"post_id":16230586,"comment_id":23216320,"body_markdown":"Are `m` and `m1` the same object?","body":"Are <code>m</code> and <code>m1</code> the same object?"},{"owner":{"display_name":"user2322618"},"score":0,"creation_date":1366960194,"post_id":16230586,"comment_id":23216385,"body_markdown":"oh yes, i&#39;d messed up with editing my code","body":"oh yes, i&#39;d messed up with editing my code"},{"owner":{"account_id":39580,"reputation":385624,"user_id":114251,"accept_rate":87,"display_name":"Arun P Johny"},"score":0,"creation_date":1366960245,"post_id":16230586,"comment_id":23216406,"body_markdown":"what do you mean by `always pass the first occurrence of the regex`?","body":"what do you mean by <code>always pass the first occurrence of the regex</code>?"},{"owner":{"account_id":39580,"reputation":385624,"user_id":114251,"accept_rate":87,"display_name":"Arun P Johny"},"score":0,"creation_date":1366960269,"post_id":16230586,"comment_id":23216418,"body_markdown":"I&#39;m getting the response `/8/,\n/5/,\n/6/,\n/7/`","body":"I&#39;m getting the response <code>&#47;8&#47;, &#47;5&#47;, &#47;6&#47;, &#47;7&#47;</code>"},{"owner":{"display_name":"user2322618"},"score":0,"creation_date":1366960611,"post_id":16230586,"comment_id":23216583,"body_markdown":"I initially named it with m1 and edited it to m just to clean the code. Error still exists","body":"I initially named it with m1 and edited it to m just to clean the code. Error still exists"},{"owner":{"account_id":1251686,"reputation":29348,"user_id":1531054,"accept_rate":95,"display_name":"s.d"},"score":0,"creation_date":1366960614,"post_id":16230586,"comment_id":23216585,"body_markdown":"You&#39;re grouping the regex, first `find()` should give you all matching groups (if any).","body":"You&#39;re grouping the regex, first <code>find()</code> should give you all matching groups (if any)."}],"answers":[{"tags":[],"owner":{"account_id":2305374,"reputation":44549,"user_id":2024761,"display_name":"Rahul"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1366960786,"creation_date":1366960269,"answer_id":16230668,"question_id":16230586,"body_markdown":"I think you need to do this, as you need only the `number` between those `slashes`.\r\n\r\n    while (m.find()) {\r\n        System.out.println(m.group(2));\r\n    }\r\n\r\n**group(0)** - gives the whole match `(/n/)`\r\n\r\n**group(1)** - gives you the first slash `(/)`\r\n\r\n**group(2)** - gives you the number `(n)`\r\n\r\n**group(3)** - gives you the second slash `(/)`","title":"First instance does not match using find() method","body":"<p>I think you need to do this, as you need only the <code>number</code> between those <code>slashes</code>.</p>\n\n<pre><code>while (m.find()) {\n    System.out.println(m.group(2));\n}\n</code></pre>\n\n<p><strong>group(0)</strong> - gives the whole match <code>(/n/)</code></p>\n\n<p><strong>group(1)</strong> - gives you the first slash <code>(/)</code></p>\n\n<p><strong>group(2)</strong> - gives you the number <code>(n)</code></p>\n\n<p><strong>group(3)</strong> - gives you the second slash <code>(/)</code></p>\n"},{"tags":[],"owner":{"account_id":39580,"reputation":385624,"user_id":114251,"accept_rate":87,"display_name":"Arun P Johny"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1366960831,"creation_date":1366960325,"answer_id":16230688,"question_id":16230586,"body_markdown":"If you want only the number to be printed use `m.group(2)`.\r\n\r\n    System.out.println(m.group(2));\r\n\r\nAnother solution is to use [lookahead and lookbehind][1]\r\n\r\n\r\n    Pattern p = Pattern.compile(&quot;(?&lt;=\\\\/)(\\\\d+)(?=\\\\/)&quot;);\r\n    Matcher m = p.matcher(&quot;A/8/E/5/F/6/G/7/H&quot;);\r\n    while (m.find()) {\r\n    \tSystem.out.println(m.group(0));\r\n    }\r\n\r\n\r\n  [1]: http://www.regular-expressions.info/lookaround.html","title":"First instance does not match using find() method","body":"<p>If you want only the number to be printed use <code>m.group(2)</code>.</p>\n\n<pre><code>System.out.println(m.group(2));\n</code></pre>\n\n<p>Another solution is to use <a href=\"http://www.regular-expressions.info/lookaround.html\" rel=\"nofollow\">lookahead and lookbehind</a></p>\n\n<pre><code>Pattern p = Pattern.compile(\"(?&lt;=\\\\/)(\\\\d+)(?=\\\\/)\");\nMatcher m = p.matcher(\"A/8/E/5/F/6/G/7/H\");\nwhile (m.find()) {\n    System.out.println(m.group(0));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":545053,"reputation":191,"user_id":914695,"display_name":"lizard"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1366960537,"creation_date":1366960537,"answer_id":16230752,"question_id":16230586,"body_markdown":"Assuming you mean to use m, your groups are &#39;/&#39;, &#39;8&#39; and &#39;/&#39;. Try &#39;\\\\/(\\\\d+)\\\\/&#39; for matching just &#39;8&#39;","title":"First instance does not match using find() method","body":"<p>Assuming you mean to use m, your groups are '/', '8' and '/'. Try '\\/(\\d+)\\/' for matching just '8'</p>\n"},{"tags":[],"owner":{"account_id":1894536,"reputation":54819,"user_id":1711796,"accept_rate":100,"display_name":"Bernhard Barker"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1366960947,"creation_date":1366960947,"answer_id":16230868,"question_id":16230586,"body_markdown":"You must use `group(i)` to extract the i-th thing in brackets (excluding non-capturing groups).\r\n\r\n`group(0)` or `group()` is the whole pattern.\r\n\r\nSo, for your example, you need `group(2)`.\r\n\r\nAlso note your code won&#39;t work on `8/5/4/3` since `8` can&#39;t match because it doesn&#39;t have a `/` before it, `4` can&#39;t match because `5` used the `/` in between and `3` can&#39;t match because it doesn&#39;t have a `/` after it. You need to include check for start of string (`^`) for `8` and end of string (`$`) for `3` and use look-ahead `(?=...)` for `4`.\r\n\r\nI also used a non-capturing group `(?:...)`, so you can use `group(1)` instead of `group(2)` (this is the only difference `(?:...)` makes).\r\n\r\nAlso, you don&#39;t need to escape `/`.\r\n\r\nFinal code:\r\n\r\n    Pattern p = Pattern.compile(&quot;(?:^|/)(\\\\d+)(?=/|$)&quot;);\r\n    Matcher m = p.matcher(&quot;8/5/4/3&quot;);\r\n    while (m.find()) {\r\n        System.out.println(m.group(1));\r\n    }\r\n\r\n[Regular expression reference](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html).\r\n\r\n[Test](https://ideone.com/13rUGJ).","title":"First instance does not match using find() method","body":"<p>You must use <code>group(i)</code> to extract the i-th thing in brackets (excluding non-capturing groups).</p>\n\n<p><code>group(0)</code> or <code>group()</code> is the whole pattern.</p>\n\n<p>So, for your example, you need <code>group(2)</code>.</p>\n\n<p>Also note your code won't work on <code>8/5/4/3</code> since <code>8</code> can't match because it doesn't have a <code>/</code> before it, <code>4</code> can't match because <code>5</code> used the <code>/</code> in between and <code>3</code> can't match because it doesn't have a <code>/</code> after it. You need to include check for start of string (<code>^</code>) for <code>8</code> and end of string (<code>$</code>) for <code>3</code> and use look-ahead <code>(?=...)</code> for <code>4</code>.</p>\n\n<p>I also used a non-capturing group <code>(?:...)</code>, so you can use <code>group(1)</code> instead of <code>group(2)</code> (this is the only difference <code>(?:...)</code> makes).</p>\n\n<p>Also, you don't need to escape <code>/</code>.</p>\n\n<p>Final code:</p>\n\n<pre><code>Pattern p = Pattern.compile(\"(?:^|/)(\\\\d+)(?=/|$)\");\nMatcher m = p.matcher(\"8/5/4/3\");\nwhile (m.find()) {\n    System.out.println(m.group(1));\n}\n</code></pre>\n\n<p><a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html\" rel=\"nofollow\">Regular expression reference</a>.</p>\n\n<p><a href=\"https://ideone.com/13rUGJ\" rel=\"nofollow\">Test</a>.</p>\n"}],"owner":{"display_name":"user2322618"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1692854805,"creation_date":1366959875,"question_id":16230586,"body_markdown":"I am searching for the substrings with a number between forward slashes (eg. /n/) but the find() method always pass the first occurrence of the regex. \r\nWhy? Is there something wrong with my regex?\r\n\r\n    Pattern p = Pattern.compile(&quot;(\\\\/)(\\\\d+)(\\\\/)&quot;); \r\n    Matcher m = p.matcher(&quot;A/8/E/5/F/6/G/7/H&quot;);\r\n    while (m.find()) {\r\n        System.out.println(m.group(0));\r\n    }\r\n        \r\n","title":"First instance does not match using find() method","body":"<p>I am searching for the substrings with a number between forward slashes (eg. /n/) but the find() method always pass the first occurrence of the regex. \nWhy? Is there something wrong with my regex?</p>\n\n<pre><code>Pattern p = Pattern.compile(\"(\\\\/)(\\\\d+)(\\\\/)\"); \nMatcher m = p.matcher(\"A/8/E/5/F/6/G/7/H\");\nwhile (m.find()) {\n    System.out.println(m.group(0));\n}\n</code></pre>\n"},{"tags":["java","regex","optimization"],"comments":[{"owner":{"account_id":733809,"reputation":43147,"user_id":1211528,"accept_rate":57,"display_name":"plalx"},"score":2,"creation_date":1366445268,"post_id":16118131,"comment_id":23020316,"body_markdown":"Just saying, but the `.` matches any characters. You have to escape it if you want to match an actual `.`.","body":"Just saying, but the <code>.</code> matches any characters. You have to escape it if you want to match an actual <code>.</code>."},{"owner":{"display_name":"user1131435"},"score":0,"creation_date":1366445582,"post_id":16118131,"comment_id":23020377,"body_markdown":"Are you sure your performance issues are with regex and not the database?","body":"Are you sure your performance issues are with regex and not the database?"},{"owner":{"display_name":"user1813228"},"score":0,"creation_date":1366445699,"post_id":16118131,"comment_id":23020403,"body_markdown":"No not the database. I have setup instrumentation at each component level. So on the Database side, it is looking fine. But only in this component I am seeing lot of variations. In this class, I know one problem can be mutltihreading but the other problem I am suspecting this Regex matching. So that is the reason I just wanted to make sure whether using regex like will cause some performance degradation or not.","body":"No not the database. I have setup instrumentation at each component level. So on the Database side, it is looking fine. But only in this component I am seeing lot of variations. In this class, I know one problem can be mutltihreading but the other problem I am suspecting this Regex matching. So that is the reason I just wanted to make sure whether using regex like will cause some performance degradation or not."},{"owner":{"display_name":"user1131435"},"score":0,"creation_date":1366445934,"post_id":16118131,"comment_id":23020460,"body_markdown":"@Farhan Try a crude `System.nanoTime()` benchmark?","body":"@Farhan Try a crude <code>System.nanoTime()</code> benchmark?"},{"owner":{"account_id":325503,"reputation":10378,"user_id":646723,"display_name":"Bruce Martin"},"score":0,"creation_date":1366446054,"post_id":16118131,"comment_id":23020477,"body_markdown":"Also could make r a static constant - saves recompiling it each call","body":"Also could make r a static constant - saves recompiling it each call"},{"owner":{"account_id":37482,"reputation":33416,"user_id":107152,"accept_rate":87,"display_name":"Qtax"},"score":2,"creation_date":1366446691,"post_id":16118131,"comment_id":23020617,"body_markdown":"Escapte the `.`. The expression it self doesn&#39;t have any performance issues. Try compiling the expression outside of the function, and not on every function call.","body":"Escapte the <code>.</code>. The expression it self doesn&#39;t have any performance issues. Try compiling the expression outside of the function, and not on every function call."},{"owner":{"display_name":"user1813228"},"score":0,"creation_date":1366447338,"post_id":16118131,"comment_id":23020727,"body_markdown":"@Qtax, thanks for suggestion. I was not able to understand your first suggestion. Escaping `.`? You are talking about `VALID_DOMAIN`? Right? Can you provide an example what change I need to make corresponding to that? Thanks for the help.","body":"@Qtax, thanks for suggestion. I was not able to understand your first suggestion. Escaping <code>.</code>? You are talking about <code>VALID_DOMAIN</code>? Right? Can you provide an example what change I need to make corresponding to that? Thanks for the help."},{"owner":{"account_id":37482,"reputation":33416,"user_id":107152,"accept_rate":87,"display_name":"Qtax"},"score":0,"creation_date":1366448090,"post_id":16118131,"comment_id":23020877,"body_markdown":"@FarhanJamal, you escape regex meta characters, like `.` with a backslash. So the regex to match a `.` would be `\\.`. Which in a Java string is quoted as `&quot;\\\\.&quot;` (double backslash).","body":"@FarhanJamal, you escape regex meta characters, like <code>.</code> with a backslash. So the regex to match a <code>.</code> would be <code>\\.</code>. Which in a Java string is quoted as <code>&quot;\\\\.&quot;</code> (double backslash)."}],"answers":[{"comments":[{"owner":{"account_id":10959,"reputation":74232,"user_id":20938,"display_name":"Alan Moore"},"score":0,"creation_date":1366450794,"post_id":16118322,"comment_id":23021473,"body_markdown":"Are you deliberately misspelling `sdc.experince.test` to test non-matches, or is that just a typo?","body":"Are you deliberately misspelling <code>sdc.experince.test</code> to test non-matches, or is that just a typo?"},{"owner":{"account_id":10959,"reputation":74232,"user_id":20938,"display_name":"Alan Moore"},"score":2,"creation_date":1366451362,"post_id":16118322,"comment_id":23021601,"body_markdown":"I was trying to give you a graceful way out. ;)  There really should be at least one failing test, don&#39;t you think?  Especially when regexes are involved; it&#39;s usually in the failed match attempts that you see the huge performance penalties.","body":"I was trying to give you a graceful way out. ;)  There really should be at least one failing test, don&#39;t you think?  Especially when regexes are involved; it&#39;s usually in the failed match attempts that you see the huge performance penalties."},{"owner":{"account_id":1056871,"reputation":117749,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":0,"creation_date":1366462756,"post_id":16118322,"comment_id":23024468,"body_markdown":"@AlanMoore when I think about it a bit more, I think you are right. Will added them also. thx","body":"@AlanMoore when I think about it a bit more, I think you are right. Will added them also. thx"},{"owner":{"display_name":"user1813228"},"score":0,"creation_date":1366479260,"post_id":16118322,"comment_id":23029106,"body_markdown":"@Eugene,I guess, you missed declaring Pattern as static in your actual code.","body":"@Eugene,I guess, you missed declaring Pattern as static in your actual code."},{"owner":{"account_id":1056871,"reputation":117749,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":0,"creation_date":1366487062,"post_id":16118322,"comment_id":23031219,"body_markdown":"@FarhanJamal darn you are right :) but it&#39;s as simple as --&gt; private static final Pattern patter = new Pattern(VALID_DOMAIN);","body":"@FarhanJamal darn you are right :) but it&#39;s as simple as --&gt; private static final Pattern patter = new Pattern(VALID_DOMAIN);"}],"tags":[],"owner":{"account_id":1056871,"reputation":117749,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"comment_count":5,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1366450938,"creation_date":1366446827,"answer_id":16118322,"question_id":16118131,"body_markdown":"   \r\nI used caliper to test this and this and the results are: if u compile the Pattern before every method call it is going to be the fastest way.\r\n\r\n**You regex method is the fastest wayto do it, BUT** he only change you need to make is to\r\ncompute the Pattern upfront, not every time:\r\n\r\n     private static Pattern p = Pattern.compile(VALID_DOMAIN);\r\n\r\nthen in your method:\r\n\r\n     Matcher matcher = pattern.matcher(input); ...\r\n\r\nFor the ones interested this is the settings I used for caliper: --warmupMillis 10000  --runMillis 100\r\n\r\n     package stackoverflow;\r\n\r\n     import java.util.regex.Matcher;\r\n     import java.util.regex.Pattern;\r\n\r\n     import com.google.caliper.Param;\r\n     import com.google.caliper.Runner;\r\n     import com.google.caliper.SimpleBenchmark;\r\n     import com.google.common.base.Splitter;\r\n     import com.google.common.collect.Iterables;\r\n\r\n     public class RegexPerformance extends SimpleBenchmark {\r\n          private static final String firstPart    = &quot;technology|computer|sdc|adj|wdc|pp|stub&quot;;\r\n          private static final String secondPart   = &quot;profile|preference|experience|behavioral&quot;;\r\n          private static final String VALID_DOMAIN = &quot;(technology|computer|sdc|adj|wdc|pp|stub)\\\\.(profile|preference|experience|behavioral)&quot;;\r\n\t\r\n          @Param({&quot;technology.profile.financial&quot;, &quot;computer.preference.test&quot;,&quot;sdc.experience.test&quot;})\r\n          private String input;\r\n\t\r\n          public static void main(String[] args) {\r\n               Runner.main(RegexPerformance.class, args);\r\n          }\r\n\t\r\n          public void timeRegexMatch(int reps){\r\n              for(int i=0;i&lt;reps;++i){\r\n                  regexMatch(input);\r\n              }\r\n          }\r\n\t\r\n\t\r\n          public void timeGuavaMatch(int reps){\r\n              for(int i=0;i&lt;reps;++i){\r\n                  guavaMatch(input);\r\n              }\r\n          }\r\n\r\n          public void timeRegexMatchOutsideMethod(int reps){\r\n              for(int i=0;i&lt;reps;++i){\r\n                  regexMatchOutsideMethod(input);\r\n              }\r\n          }\r\n\t\r\n\t\r\n        public String regexMatch(String input){\r\n            Pattern p = Pattern.compile(VALID_DOMAIN);\r\n            Matcher m = p.matcher(input);\r\n            if(m.find()) return m.group();\r\n            return null;\r\n        }\r\n\r\n        public String regexMatchOutsideMethod(String input){\r\n              Matcher matcher = pattern.matcher(input);\r\n              if(matcher.find()) return matcher.group();\r\n              return null;\r\n        }\r\n\t\r\n        public String guavaMatch(String input){\r\n            Iterable&lt;String&gt; tokens = Splitter.on(&quot;.&quot;).omitEmptyStrings().split(input);\r\n            String firstToken  = Iterables.get(tokens, 0);\r\n            String secondToken = Iterables.get(tokens, 1);\r\n            if( (firstPart.contains(firstToken) ) &amp;&amp; (secondPart.contains(secondToken)) ){\r\n                return firstToken+&quot;.&quot;+secondToken;\r\n            }\r\n            return null;\r\n        }\r\n    }\r\n\r\nAnd the results of the test:\r\n\r\n                 RegexMatch technology.profile.financial 2980 ========================\r\n                 RegexMatch     computer.preference.test 2861 =======================\r\n                RegexMatch           sdc.experience.test 3683 ==============================\r\n    RegexMatchOutsideMethod technology.profile.financial  179 =\r\n    RegexMatchOutsideMethod     computer.preference.test  227 =\r\n    RegexMatchOutsideMethod           sdc.experience.test  987 ========\r\n                 GuavaMatch technology.profile.financial  406 ===\r\n                 GuavaMatch     computer.preference.test  421 ===\r\n                GuavaMatch           sdc.experience.test  382 ===","title":"Performance issues in Regular Expression","body":"<p>I used caliper to test this and this and the results are: if u compile the Pattern before every method call it is going to be the fastest way.</p>\n\n<p><strong>You regex method is the fastest wayto do it, BUT</strong> he only change you need to make is to\ncompute the Pattern upfront, not every time:</p>\n\n<pre><code> private static Pattern p = Pattern.compile(VALID_DOMAIN);\n</code></pre>\n\n<p>then in your method:</p>\n\n<pre><code> Matcher matcher = pattern.matcher(input); ...\n</code></pre>\n\n<p>For the ones interested this is the settings I used for caliper: --warmupMillis 10000  --runMillis 100</p>\n\n<pre><code> package stackoverflow;\n\n import java.util.regex.Matcher;\n import java.util.regex.Pattern;\n\n import com.google.caliper.Param;\n import com.google.caliper.Runner;\n import com.google.caliper.SimpleBenchmark;\n import com.google.common.base.Splitter;\n import com.google.common.collect.Iterables;\n\n public class RegexPerformance extends SimpleBenchmark {\n      private static final String firstPart    = \"technology|computer|sdc|adj|wdc|pp|stub\";\n      private static final String secondPart   = \"profile|preference|experience|behavioral\";\n      private static final String VALID_DOMAIN = \"(technology|computer|sdc|adj|wdc|pp|stub)\\\\.(profile|preference|experience|behavioral)\";\n\n      @Param({\"technology.profile.financial\", \"computer.preference.test\",\"sdc.experience.test\"})\n      private String input;\n\n      public static void main(String[] args) {\n           Runner.main(RegexPerformance.class, args);\n      }\n\n      public void timeRegexMatch(int reps){\n          for(int i=0;i&lt;reps;++i){\n              regexMatch(input);\n          }\n      }\n\n\n      public void timeGuavaMatch(int reps){\n          for(int i=0;i&lt;reps;++i){\n              guavaMatch(input);\n          }\n      }\n\n      public void timeRegexMatchOutsideMethod(int reps){\n          for(int i=0;i&lt;reps;++i){\n              regexMatchOutsideMethod(input);\n          }\n      }\n\n\n    public String regexMatch(String input){\n        Pattern p = Pattern.compile(VALID_DOMAIN);\n        Matcher m = p.matcher(input);\n        if(m.find()) return m.group();\n        return null;\n    }\n\n    public String regexMatchOutsideMethod(String input){\n          Matcher matcher = pattern.matcher(input);\n          if(matcher.find()) return matcher.group();\n          return null;\n    }\n\n    public String guavaMatch(String input){\n        Iterable&lt;String&gt; tokens = Splitter.on(\".\").omitEmptyStrings().split(input);\n        String firstToken  = Iterables.get(tokens, 0);\n        String secondToken = Iterables.get(tokens, 1);\n        if( (firstPart.contains(firstToken) ) &amp;&amp; (secondPart.contains(secondToken)) ){\n            return firstToken+\".\"+secondToken;\n        }\n        return null;\n    }\n}\n</code></pre>\n\n<p>And the results of the test:</p>\n\n<pre><code>             RegexMatch technology.profile.financial 2980 ========================\n             RegexMatch     computer.preference.test 2861 =======================\n            RegexMatch           sdc.experience.test 3683 ==============================\nRegexMatchOutsideMethod technology.profile.financial  179 =\nRegexMatchOutsideMethod     computer.preference.test  227 =\nRegexMatchOutsideMethod           sdc.experience.test  987 ========\n             GuavaMatch technology.profile.financial  406 ===\n             GuavaMatch     computer.preference.test  421 ===\n            GuavaMatch           sdc.experience.test  382 ===\n</code></pre>\n"},{"comments":[{"owner":{"display_name":"user1813228"},"score":0,"creation_date":1366483966,"post_id":16118635,"comment_id":23030392,"body_markdown":"Thanks Mike for the suggestion. The only that I didn&#39;t understand how to use `Pattern.CASE_INSENSITIVE` here? Can you provide an example basis on my scenario? Thanks for the help.","body":"Thanks Mike for the suggestion. The only that I didn&#39;t understand how to use <code>Pattern.CASE_INSENSITIVE</code> here? Can you provide an example basis on my scenario? Thanks for the help."},{"owner":{"account_id":1706574,"reputation":13314,"user_id":1565512,"display_name":"MikeM"},"score":0,"creation_date":1366484083,"post_id":16118635,"comment_id":23030421,"body_markdown":"@FarhanJamal. `Pattern r = Pattern.compile(CommonConstants.VALID_DOMAIN, Pattern.CASE_INSENSITIVE);`","body":"@FarhanJamal. <code>Pattern r = Pattern.compile(CommonConstants.VALID_DOMAIN, Pattern.CASE_INSENSITIVE);</code>"}],"tags":[],"owner":{"account_id":1706574,"reputation":13314,"user_id":1565512,"display_name":"MikeM"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1366449399,"creation_date":1366449399,"answer_id":16118635,"question_id":16118131,"body_markdown":"Two small points:\r\n\r\nAs well as compiling the expression outside of the function, as mentioned in the comments, you could make the `()` non-capturing so the content matched by each is not saved, i.e.\r\n\r\n    String  VALID_DOMAIN = &quot;(?:technology|computer|sdc|adj|wdc|pp|stub)\\\\.(?:profile|preference|experience|behavioral)&quot;;\r\n\r\nand if the valid domain must always appear at the beginning of the attribute name you could perhaps use the `lookingAt` method instead of `find`, so the the match can fail quicker, i.e.\r\n\r\n     if (m.lookingAt()) {\r\n\r\nAnd if the expression was compiled outside of the function, you could add `Pattern.CASE_INSENSITIVE` so then you wouldn&#39;t have to call `toLowerCase()` on the `attrName` each time.","title":"Performance issues in Regular Expression","body":"<p>Two small points:</p>\n\n<p>As well as compiling the expression outside of the function, as mentioned in the comments, you could make the <code>()</code> non-capturing so the content matched by each is not saved, i.e.</p>\n\n<pre><code>String  VALID_DOMAIN = \"(?:technology|computer|sdc|adj|wdc|pp|stub)\\\\.(?:profile|preference|experience|behavioral)\";\n</code></pre>\n\n<p>and if the valid domain must always appear at the beginning of the attribute name you could perhaps use the <code>lookingAt</code> method instead of <code>find</code>, so the the match can fail quicker, i.e.</p>\n\n<pre><code> if (m.lookingAt()) {\n</code></pre>\n\n<p>And if the expression was compiled outside of the function, you could add <code>Pattern.CASE_INSENSITIVE</code> so then you wouldn't have to call <code>toLowerCase()</code> on the <code>attrName</code> each time.</p>\n"},{"tags":[],"owner":{"account_id":10959,"reputation":74232,"user_id":20938,"display_name":"Alan Moore"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1366449889,"creation_date":1366449889,"answer_id":16118703,"question_id":16118131,"body_markdown":"Is there any reason why you can&#39;t save the regex as a Pattern ratter than as a string?  If the regex never changes, you&#39;re wasting a lot of time recompiling the regex every time you use it.  For such a simple pattern, compiling the regex probably takes a lot more time than actually matching it.\r\n\r\nAs for the regex itself, there are some changes I would recommend.  These changes will make the regex slightly more efficient, but it probably won&#39;t be enough to notice. The purpose is to make it more robust.\r\n\r\n- Enclose it in word boundaries to avoid false positives on strings like `foo_technology.profile` or `technology.profile_bar`.  I&#39;m sure you know that kind of thing will happen in your case, but why take even the smallest risk when it&#39;s so easy to avoid?\r\n- Escape the dot, as [@plaix suggested](https://stackoverflow.com/questions/16118131/performance-issues-in-regular-expression#comment23020316_16118131).\r\n- Use non-capturing groups instead of capturing. (Assuming you don&#39;t really need to break out the individual components of the attribute name.)\r\n\r\n&amp;nbsp;\r\n\r\n    static final Pattern VALID_DOMAIN_PATTERN = Pattern.compile(\r\n        &quot;\\\\b(?:technology|computer|sdc|adj|wdc|pp|stub)\\\\.(?:profile|preference|experience|behavioral)\\\\b&quot;);","title":"Performance issues in Regular Expression","body":"<p>Is there any reason why you can't save the regex as a Pattern ratter than as a string?  If the regex never changes, you're wasting a lot of time recompiling the regex every time you use it.  For such a simple pattern, compiling the regex probably takes a lot more time than actually matching it.</p>\n\n<p>As for the regex itself, there are some changes I would recommend.  These changes will make the regex slightly more efficient, but it probably won't be enough to notice. The purpose is to make it more robust.</p>\n\n<ul>\n<li>Enclose it in word boundaries to avoid false positives on strings like <code>foo_technology.profile</code> or <code>technology.profile_bar</code>.  I'm sure you know that kind of thing will happen in your case, but why take even the smallest risk when it's so easy to avoid?</li>\n<li>Escape the dot, as <a href=\"https://stackoverflow.com/questions/16118131/performance-issues-in-regular-expression#comment23020316_16118131\">@plaix suggested</a>.</li>\n<li>Use non-capturing groups instead of capturing. (Assuming you don't really need to break out the individual components of the attribute name.)</li>\n</ul>\n\n<p>&nbsp;</p>\n\n<pre><code>static final Pattern VALID_DOMAIN_PATTERN = Pattern.compile(\n    \"\\\\b(?:technology|computer|sdc|adj|wdc|pp|stub)\\\\.(?:profile|preference|experience|behavioral)\\\\b\");\n</code></pre>\n"}],"owner":{"display_name":"user1813228"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1387,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":16118322,"answer_count":3,"score":2,"last_activity_date":1692854780,"creation_date":1366445057,"question_id":16118131,"body_markdown":"I am having my REST service which is running under heavy load, meaning it is getting lot of traffic around some million read calls per day. My REST servcie will do the lookup from the database basis on the userID and retrieve few bunch of columns corresponding to that userID.\r\n\r\nSo I am seeing high performance issues in my code currently. I am suspecting that below method will be one of the methods that I should start optimizing first of all.\r\n\r\nBelow method will accept an `attributeName` and then basis on that it will give me the match using the Regular Expression.\r\n\r\nLet&#39;s take an example- If the `attrName` is `technology.profile.financial`\r\n\r\nThen the below method will return me back as `technology.profile`. And this way it will work for other case as well.\r\n\r\n    private String getAttrDomain(String attrName){\r\n\t\tPattern r = Pattern.compile(CommonConstants.VALID_DOMAIN);\r\n\t    Matcher m = r.matcher(attrName.toLowerCase());\r\n\t    if (m.find()) {\r\n\t      return m.group(0);\r\n\t    }\r\n\t    return null;\r\n\t}\r\n\t\r\nIn `CommonConstants` class file\r\n\t\r\n\tString \tVALID_DOMAIN = &quot;(technology|computer|sdc|adj|wdc|pp|stub).(profile|preference|experience|behavioral)&quot;;\r\n\t\r\n\t\r\nI am just trying to see, whether there might be some performance issues here or not using the regex above? If yes, then what&#39;s the best way to rewrite this thing again keeping in mind performance issues?\r\n","title":"Performance issues in Regular Expression","body":"<p>I am having my REST service which is running under heavy load, meaning it is getting lot of traffic around some million read calls per day. My REST servcie will do the lookup from the database basis on the userID and retrieve few bunch of columns corresponding to that userID.</p>\n<p>So I am seeing high performance issues in my code currently. I am suspecting that below method will be one of the methods that I should start optimizing first of all.</p>\n<p>Below method will accept an <code>attributeName</code> and then basis on that it will give me the match using the Regular Expression.</p>\n<p>Let's take an example- If the <code>attrName</code> is <code>technology.profile.financial</code></p>\n<p>Then the below method will return me back as <code>technology.profile</code>. And this way it will work for other case as well.</p>\n<pre><code>private String getAttrDomain(String attrName){\n    Pattern r = Pattern.compile(CommonConstants.VALID_DOMAIN);\n    Matcher m = r.matcher(attrName.toLowerCase());\n    if (m.find()) {\n      return m.group(0);\n    }\n    return null;\n}\n</code></pre>\n<p>In <code>CommonConstants</code> class file</p>\n<pre><code>String  VALID_DOMAIN = &quot;(technology|computer|sdc|adj|wdc|pp|stub).(profile|preference|experience|behavioral)&quot;;\n</code></pre>\n<p>I am just trying to see, whether there might be some performance issues here or not using the regex above? If yes, then what's the best way to rewrite this thing again keeping in mind performance issues?</p>\n"},{"tags":["java","regex"],"answers":[{"comments":[{"owner":{"account_id":476484,"reputation":8618,"user_id":887421,"accept_rate":68,"display_name":"Achow"},"score":0,"creation_date":1366216902,"post_id":16065559,"comment_id":22929157,"body_markdown":"Thanks,Do you have any documentation to support?","body":"Thanks,Do you have any documentation to support?"},{"owner":{"account_id":1987554,"reputation":8119,"user_id":1782379,"accept_rate":84,"display_name":"bsiamionau"},"score":0,"creation_date":1366217334,"post_id":16065559,"comment_id":22929355,"body_markdown":"Are you sure, that in case of creation `Scanner` object with constructor `Scanner(String source)`, this scanner works with source string as with one complete token? I didn&#39;t find nothing to confirm my guess.","body":"Are you sure, that in case of creation <code>Scanner</code> object with constructor <code>Scanner(String source)</code>, this scanner works with source string as with one complete token? I didn&#39;t find nothing to confirm my guess."},{"owner":{"account_id":1987554,"reputation":8119,"user_id":1782379,"accept_rate":84,"display_name":"bsiamionau"},"score":0,"creation_date":1366217485,"post_id":16065559,"comment_id":22929442,"body_markdown":"Could you post complete working demo? It still doesn&#39;t work for me.","body":"Could you post complete working demo? It still doesn&#39;t work for me."},{"owner":{"account_id":1190755,"reputation":48912,"user_id":1163607,"accept_rate":97,"display_name":"AllTooSir"},"score":0,"creation_date":1366217549,"post_id":16065559,"comment_id":22929475,"body_markdown":"Give me sometime to have my dinner !","body":"Give me sometime to have my dinner !"},{"owner":{"account_id":1190755,"reputation":48912,"user_id":1163607,"accept_rate":97,"display_name":"AllTooSir"},"score":0,"creation_date":1366218721,"post_id":16065559,"comment_id":22930022,"body_markdown":"@zvzfhk: Sorry , but I what code are you talking about ? I have made some edits , please check.","body":"@zvzfhk: Sorry , but I what code are you talking about ? I have made some edits , please check."}],"tags":[],"owner":{"account_id":1190755,"reputation":48912,"user_id":1163607,"accept_rate":97,"display_name":"AllTooSir"},"comment_count":5,"down_vote_count":1,"up_vote_count":5,"is_accepted":true,"score":4,"last_activity_date":1366218579,"creation_date":1366216772,"answer_id":16065559,"question_id":16065144,"body_markdown":"`Scanner` is not the appropriate utility to retrieve patterns using its `hasNext(Pattern pattern)` method . It will check if the **next complete token** has the requested pattern . \r\n\r\n[Java API][1] is the best document.\r\n\r\n[1]: http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#hasNext()\r\n\r\nSome excerpts:\r\n\r\n    hasNext() : Returns true if the next complete token matches the specified \r\n    pattern. A complete token is prefixed and postfixed by input that matches \r\n    the delimiter pattern.`\r\n\r\nSo if you change the input to be delimited by space or any other delimiter ( other delimiters have to be set after defining the `Scanner` object ) , it will work. So this should work(for the current pattern):\r\n\r\n    Scanner scannerSegment = new Scanner(&quot;10 11 00 10 10 11 01 00 11 11 10 00&quot;);\r\n\r\nEven this will work(for the current pattern):\r\n\r\n    Scanner scannerSegment = new Scanner(&quot;10,11,00,10,10,11,01,00,11,11,10,00&quot;);\r\n    scannerSegment.useDelimiter(&quot;,&quot;);\r\n\r\n\r\n\r\nEDIT: [Scanner][2] breaks its input into tokens using a delimiter pattern, which by default matches whitespace.\r\n\r\n[2]: http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html","title":"Java Scanner vs Matcher - Regular Expressions, Matcher works, Scanner doesn&#39;t","body":"<p><code>Scanner</code> is not the appropriate utility to retrieve patterns using its <code>hasNext(Pattern pattern)</code> method . It will check if the <strong>next complete token</strong> has the requested pattern . </p>\n\n<p><a href=\"http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#hasNext%28%29\" rel=\"nofollow\">Java API</a> is the best document.</p>\n\n<p>Some excerpts:</p>\n\n<pre><code>hasNext() : Returns true if the next complete token matches the specified \npattern. A complete token is prefixed and postfixed by input that matches \nthe delimiter pattern.`\n</code></pre>\n\n<p>So if you change the input to be delimited by space or any other delimiter ( other delimiters have to be set after defining the <code>Scanner</code> object ) , it will work. So this should work(for the current pattern):</p>\n\n<pre><code>Scanner scannerSegment = new Scanner(\"10 11 00 10 10 11 01 00 11 11 10 00\");\n</code></pre>\n\n<p>Even this will work(for the current pattern):</p>\n\n<pre><code>Scanner scannerSegment = new Scanner(\"10,11,00,10,10,11,01,00,11,11,10,00\");\nscannerSegment.useDelimiter(\",\");\n</code></pre>\n\n<p>EDIT: <a href=\"http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html\" rel=\"nofollow\">Scanner</a> breaks its input into tokens using a delimiter pattern, which by default matches whitespace.</p>\n"}],"owner":{"account_id":476484,"reputation":8618,"user_id":887421,"accept_rate":68,"display_name":"Achow"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3082,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":16065559,"answer_count":1,"score":8,"last_activity_date":1692854767,"creation_date":1366215365,"question_id":16065144,"body_markdown":"Why the 1st block works but the 2nd block doesn&#39;t?\r\n\r\n    int numberOfDigits = 2;\r\n    Pattern p = Pattern.compile(&quot;[01]{&quot;+numberOfDigits+&quot;}&quot;);\r\n    Matcher m = p.matcher(&quot;101100101011010011111000&quot;);\r\n    while(m.find()){\r\n    \tSystem.out.println(m.group());\r\n    }\r\n\r\nBLock 2\r\n   \r\n\r\n    Scanner scannerSegment = new Scanner(&quot;101100101011010011111000&quot;);\r\n       while(scannerSegment.hasNext(p)){\r\n        String segment = scannerSegment.next(p);\r\n         \tSystem.out.println(segment);\r\n    \r\n    \t}\r\n\r\n\r\n","title":"Java Scanner vs Matcher - Regular Expressions, Matcher works, Scanner doesn&#39;t","body":"<p>Why the 1st block works but the 2nd block doesn't?</p>\n\n<pre><code>int numberOfDigits = 2;\nPattern p = Pattern.compile(\"[01]{\"+numberOfDigits+\"}\");\nMatcher m = p.matcher(\"101100101011010011111000\");\nwhile(m.find()){\n    System.out.println(m.group());\n}\n</code></pre>\n\n<p>BLock 2</p>\n\n<pre><code>Scanner scannerSegment = new Scanner(\"101100101011010011111000\");\n   while(scannerSegment.hasNext(p)){\n    String segment = scannerSegment.next(p);\n        System.out.println(segment);\n\n    }\n</code></pre>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":1610145,"reputation":439,"user_id":1489422,"accept_rate":86,"display_name":"Michael K"},"score":0,"creation_date":1366146193,"post_id":16046938,"comment_id":22897680,"body_markdown":"Also, I want to avoid hard-coding match numbers (matcher.group(1), $2, etc - because I&#39;m not sure how many matches will exist","body":"Also, I want to avoid hard-coding match numbers (matcher.group(1), $2, etc - because I&#39;m not sure how many matches will exist"}],"answers":[{"comments":[{"owner":{"account_id":1610145,"reputation":439,"user_id":1489422,"accept_rate":86,"display_name":"Michael K"},"score":0,"creation_date":1366213894,"post_id":16047535,"comment_id":22927405,"body_markdown":"thanks @Dukeling... I needed to use your suggestion inside of matcher.find() to get the desired output","body":"thanks @Dukeling... I needed to use your suggestion inside of matcher.find() to get the desired output"}],"tags":[],"owner":{"account_id":1894536,"reputation":54819,"user_id":1711796,"accept_rate":100,"display_name":"Bernhard Barker"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1366148434,"creation_date":1366148119,"answer_id":16047535,"question_id":16046938,"body_markdown":"Your regex is problematic since your do `replaceAll`, so it will match `MatcH`, then `MatcH` and `MatcHer` will get replaced in that iteration of the loop. Note that the `\\\\b` doesn&#39;t appear in the output of `group`, so nothing prevents it from replacing `MatcHer`.\r\n\r\nYou can put a `System.out.println` inside the loop to print the output of `group` and the output of `replaceAll` to see what happens and why it does what it does.\r\n\r\nSimplifying your code to just the below will work: (that&#39;s probably &quot;hard-coding match numbers&quot; but I don&#39;t really see a problem with that as it stands and I don&#39;t see a simpler solution)\r\n\r\n    String text = &quot;MatcH one MatcHer two MarcH three&quot;;\r\n    text = text.replaceAll(&quot;\\\\b(M\\\\w*H)\\\\b&quot;, &quot;&lt;wrap&gt;$1&lt;/wrap&gt;&quot;);\r\n\r\nThe above is how regex is supposed to work. If you see that problems may arise in future using something similar to the above, regex may not be the way to go.","title":"How to wrap (surround) java matcher groups with xml?","body":"<p>Your regex is problematic since your do <code>replaceAll</code>, so it will match <code>MatcH</code>, then <code>MatcH</code> and <code>MatcHer</code> will get replaced in that iteration of the loop. Note that the <code>\\\\b</code> doesn't appear in the output of <code>group</code>, so nothing prevents it from replacing <code>MatcHer</code>.</p>\n\n<p>You can put a <code>System.out.println</code> inside the loop to print the output of <code>group</code> and the output of <code>replaceAll</code> to see what happens and why it does what it does.</p>\n\n<p>Simplifying your code to just the below will work: (that's probably \"hard-coding match numbers\" but I don't really see a problem with that as it stands and I don't see a simpler solution)</p>\n\n<pre><code>String text = \"MatcH one MatcHer two MarcH three\";\ntext = text.replaceAll(\"\\\\b(M\\\\w*H)\\\\b\", \"&lt;wrap&gt;$1&lt;/wrap&gt;\");\n</code></pre>\n\n<p>The above is how regex is supposed to work. If you see that problems may arise in future using something similar to the above, regex may not be the way to go.</p>\n"}],"owner":{"account_id":1610145,"reputation":439,"user_id":1489422,"accept_rate":86,"display_name":"Michael K"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1323,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":16047535,"answer_count":1,"score":2,"last_activity_date":1692854757,"creation_date":1366145857,"question_id":16046938,"body_markdown":"Using the following value of a text node...\r\n\r\n    MatcH one MatcHer two MarcH three \r\n\r\n\r\nHow can java matcher.find() be used to create the following output?\r\n\r\n    &lt;wrap&gt;MatcH&lt;/wrap&gt; one MatcHer two &lt;wrap&gt;MarcH&lt;/wrap&gt; three \r\n\r\nAssuming a java regex that captures all words starting with capital &#39;M&#39; and ending with a capital &#39;H&#39; \r\n\r\n    \\bM\\w*H\\b\r\n\r\nBasically, I want to surround anything that matches this regex with **wrap** tags\r\n\r\n    String text = &quot;MatcH one MatcHer two MarcH three&quot;;\r\n    Pattern pattern = Pattern.compile(\\\\bM\\w*H\\b\\);\r\n    Matcher matcher = pattern.matcher(text);\r\n\r\n    // replace each time the regex is found\r\n    while (matcher.find()) {\r\n\t   text = text.replaceAll(matcher.group(), &quot;&lt;wrap&gt;&quot; + \r\n\t\t\t\t+ matcher.group() + &quot;&lt;/wrap&gt;&quot;);\r\n    }\r\n\r\nReplaceFirst/ReplaceAll is not working for me because it results in the following...\r\n\r\n    &lt;wrap&gt;MatcH&lt;/wrap&gt; one &lt;wrap&gt;MatcH&lt;/wrap&gt;er two &lt;wrap&gt;MarcH&lt;/wrap&gt; three\r\n\r\n\r\nThanks in advance...\r\n","title":"How to wrap (surround) java matcher groups with xml?","body":"<p>Using the following value of a text node...</p>\n\n<pre><code>MatcH one MatcHer two MarcH three \n</code></pre>\n\n<p>How can java matcher.find() be used to create the following output?</p>\n\n<pre><code>&lt;wrap&gt;MatcH&lt;/wrap&gt; one MatcHer two &lt;wrap&gt;MarcH&lt;/wrap&gt; three \n</code></pre>\n\n<p>Assuming a java regex that captures all words starting with capital 'M' and ending with a capital 'H' </p>\n\n<pre><code>\\bM\\w*H\\b\n</code></pre>\n\n<p>Basically, I want to surround anything that matches this regex with <strong>wrap</strong> tags</p>\n\n<pre><code>String text = \"MatcH one MatcHer two MarcH three\";\nPattern pattern = Pattern.compile(\\\\bM\\w*H\\b\\);\nMatcher matcher = pattern.matcher(text);\n\n// replace each time the regex is found\nwhile (matcher.find()) {\n   text = text.replaceAll(matcher.group(), \"&lt;wrap&gt;\" + \n            + matcher.group() + \"&lt;/wrap&gt;\");\n}\n</code></pre>\n\n<p>ReplaceFirst/ReplaceAll is not working for me because it results in the following...</p>\n\n<pre><code>&lt;wrap&gt;MatcH&lt;/wrap&gt; one &lt;wrap&gt;MatcH&lt;/wrap&gt;er two &lt;wrap&gt;MarcH&lt;/wrap&gt; three\n</code></pre>\n\n<p>Thanks in advance...</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":1383489,"reputation":7088,"user_id":1316000,"accept_rate":66,"display_name":"Rodrigo Sasaki"},"score":0,"creation_date":1366115776,"post_id":16037036,"comment_id":22879475,"body_markdown":"You don&#39;t really need to escape it (although you can if you want, doesn&#39;t make a difference in practice), but regular expressions consider this case, and have a special way to treat it. Check my answer for an example","body":"You don&#39;t really need to escape it (although you can if you want, doesn&#39;t make a difference in practice), but regular expressions consider this case, and have a special way to treat it. Check my answer for an example"}],"answers":[{"tags":[],"owner":{"account_id":116580,"reputation":118713,"user_id":305644,"accept_rate":75,"display_name":"hvgotcodes"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1366115257,"creation_date":1366115257,"answer_id":16037061,"question_id":16037036,"body_markdown":"You need to escape it.\r\n\r\n`\\\\]`\r\n\r\n[See this.][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/5768480/java-regular-expression-and-escaping-meta-characters","title":"pattern matcher","body":"<p>You need to escape it.</p>\n\n<p><code>\\\\]</code></p>\n\n<p><a href=\"https://stackoverflow.com/questions/5768480/java-regular-expression-and-escaping-meta-characters\">See this.</a></p>\n"},{"comments":[{"owner":{"account_id":1383489,"reputation":7088,"user_id":1316000,"accept_rate":66,"display_name":"Rodrigo Sasaki"},"score":0,"creation_date":1366115654,"post_id":16037065,"comment_id":22879399,"body_markdown":"@Reimeus, it doesn&#39;t really need to be escaped. Check my answer for an alternative","body":"@Reimeus, it doesn&#39;t really need to be escaped. Check my answer for an alternative"},{"owner":{"account_id":794766,"reputation":158675,"user_id":871026,"accept_rate":76,"display_name":"Reimeus"},"score":0,"creation_date":1366115942,"post_id":16037065,"comment_id":22879595,"body_markdown":"Good point but escaping it means you don&#39;t have to remember to have it as the first character in the character class :)","body":"Good point but escaping it means you don&#39;t have to remember to have it as the first character in the character class :)"}],"tags":[],"owner":{"account_id":794766,"reputation":158675,"user_id":871026,"accept_rate":76,"display_name":"Reimeus"},"comment_count":2,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1366115262,"creation_date":1366115262,"answer_id":16037065,"question_id":16037036,"body_markdown":"`]` is a special character used to denote the end of a [character class][1] so it needs to be escaped:\r\n\r\n    Pattern pat = Pattern.compile(&quot;[^a-z][^,.:;\\\\]]&quot;);\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/tutorial/essential/regex/char_classes.html","title":"pattern matcher","body":"<p><code>]</code> is a special character used to denote the end of a <a href=\"http://docs.oracle.com/javase/tutorial/essential/regex/char_classes.html\">character class</a> so it needs to be escaped:</p>\n\n<pre><code>Pattern pat = Pattern.compile(\"[^a-z][^,.:;\\\\]]\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1144443,"reputation":4425,"user_id":2113996,"accept_rate":31,"display_name":"eatSleepCode"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1366115333,"creation_date":1366115333,"answer_id":16037089,"question_id":16037036,"body_markdown":"You can do it by using escape character \\ like this `\\\\].`","title":"pattern matcher","body":"<p>You can do it by using escape character \\ like this <code>\\\\].</code></p>\n"},{"tags":[],"owner":{"account_id":1383489,"reputation":7088,"user_id":1316000,"accept_rate":66,"display_name":"Rodrigo Sasaki"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1366115618,"creation_date":1366115618,"answer_id":16037186,"question_id":16037036,"body_markdown":"You don&#39;t really need to escape it. There is a special rule in Regular Expressions, where if you want the actual `]` character in your list, it has to be the first element on it. And it&#39;ll work just fine. Give this code a try:\r\n\r\n\tpublic static void main(String[] args){\r\n\t\tString texto = &quot;[]hello[]&quot;;\r\n\t\tPattern p = Pattern.compile(&quot;[]]+&quot;);\r\n\t\tMatcher m = p.matcher(texto);\r\n\t\twhile(m.find()){\r\n\t\t\tSystem.out.println(m.group());\r\n\t\t}\r\n\t}","title":"pattern matcher","body":"<p>You don't really need to escape it. There is a special rule in Regular Expressions, where if you want the actual <code>]</code> character in your list, it has to be the first element on it. And it'll work just fine. Give this code a try:</p>\n\n<pre><code>public static void main(String[] args){\n    String texto = \"[]hello[]\";\n    Pattern p = Pattern.compile(\"[]]+\");\n    Matcher m = p.matcher(texto);\n    while(m.find()){\n        System.out.println(m.group());\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1430949,"reputation":667,"user_id":1353394,"accept_rate":90,"display_name":"Eduardo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1366121746,"creation_date":1366120730,"answer_id":16039105,"question_id":16037036,"body_markdown":"The standard way is the use of `quote` function of the `Pattern` class. This function return the literal pattern String for the specified String.\r\n    \r\n    String myLiteralString = Pattern.quote(&quot;,.[:;&quot;);\r\n    Pattern pat = Pattern.compile(&quot;[^a-z][^&quot; + myLiteralString + &quot;]&quot;);\r\n\r\nThis method escape all special characters of the regular expression syntax.","title":"pattern matcher","body":"<p>The standard way is the use of <code>quote</code> function of the <code>Pattern</code> class. This function return the literal pattern String for the specified String.</p>\n\n<pre><code>String myLiteralString = Pattern.quote(\",.[:;\");\nPattern pat = Pattern.compile(\"[^a-z][^\" + myLiteralString + \"]\");\n</code></pre>\n\n<p>This method escape all special characters of the regular expression syntax.</p>\n"}],"owner":{"account_id":1941976,"reputation":2211,"user_id":1747976,"accept_rate":50,"display_name":"Dodi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":439,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":5,"score":1,"last_activity_date":1692854745,"creation_date":1366115170,"question_id":16037036,"body_markdown":"    \r\nI have the following pattern matcher.   \r\n\r\n     Pattern pat = Pattern.compile(&quot;[^a-z][^,.:;]&quot;);\r\n\r\nHow do I include the `]` character itself in it ?","title":"pattern matcher","body":"<p>I have the following pattern matcher.   </p>\n\n<pre><code> Pattern pat = Pattern.compile(\"[^a-z][^,.:;]\");\n</code></pre>\n\n<p>How do I include the <code>]</code> character itself in it ?</p>\n"},{"tags":["java","regex","replaceall"],"answers":[{"comments":[{"owner":{"account_id":1314338,"reputation":2872,"user_id":1261600,"accept_rate":67,"display_name":"Lpc_dark"},"score":0,"creation_date":1366087403,"post_id":16028929,"comment_id":22865581,"body_markdown":"does $1 mean the current match? thank you for taking the time","body":"does $1 mean the current match? thank you for taking the time"},{"owner":{"account_id":2052678,"reputation":134073,"user_id":1831293,"accept_rate":91,"display_name":"Evgeniy Dorofeev"},"score":0,"creation_date":1366087539,"post_id":16028929,"comment_id":22865624,"body_markdown":"$1 means group #1 in current match. group is the expr in round brackets","body":"$1 means group #1 in current match. group is the expr in round brackets"},{"owner":{"account_id":1314338,"reputation":2872,"user_id":1261600,"accept_rate":67,"display_name":"Lpc_dark"},"score":0,"creation_date":1366087736,"post_id":16028929,"comment_id":22865679,"body_markdown":"so i would have to do $1, $2 ..etc for each match then?","body":"so i would have to do $1, $2 ..etc for each match then?"},{"owner":{"account_id":1314338,"reputation":2872,"user_id":1261600,"accept_rate":67,"display_name":"Lpc_dark"},"score":0,"creation_date":1366088191,"post_id":16028929,"comment_id":22865802,"body_markdown":"oooh i get it. I was so confused on what a group is. thank you so much get it to work","body":"oooh i get it. I was so confused on what a group is. thank you so much get it to work"}],"tags":[],"owner":{"account_id":2052678,"reputation":134073,"user_id":1831293,"accept_rate":91,"display_name":"Evgeniy Dorofeev"},"comment_count":4,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1366087321,"creation_date":1366087321,"answer_id":16028929,"question_id":16028876,"body_markdown":"try\r\n\r\n    str = str.replaceAll(&quot;(\\\\b\\\\w\\\\w\\\\b)&quot;, &quot;&lt;h1&gt;$1&lt;/h1&gt;&quot;);","title":"Java replace matched regex","body":"<p>try</p>\n\n<pre><code>str = str.replaceAll(\"(\\\\b\\\\w\\\\w\\\\b)\", \"&lt;h1&gt;$1&lt;/h1&gt;\");\n</code></pre>\n"}],"owner":{"account_id":1314338,"reputation":2872,"user_id":1261600,"accept_rate":67,"display_name":"Lpc_dark"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":204,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"closed_date":1390776270,"accepted_answer_id":16028929,"answer_count":1,"score":1,"last_activity_date":1692854739,"creation_date":1366087033,"question_id":16028876,"body_markdown":"Sorry i had to re write this question i was in the middle of finishing it and someone closed it. \r\nthey weren&#39;t kind enough to explain why so i had to repost? \r\nplease inform me what is confusing.\r\n\r\nMain point: I want to replace a regex match with part of the match\r\nso if i regex hi i want it to be replaced with {hi} \r\nif regex match at i want to replace with {at}\r\n\r\n\r\nthis is awesome look at this two letter words get replaced\r\nthe return would be\r\n\r\n    this &lt;h1&gt;is&lt;/h1&gt; awesome look &lt;h1&gt;at&lt;/h1&gt; this two letter words get replaced\r\n\r\nnotice how the is and at which would match regex \\b\\w\\w\\b would be matched a replaced\r\n\r\nthis is the code i was working on... don&#39;t judge it&#39;s not finished but i am just a little confused and wondering if there is an easier way. i was search the string and finding the matches and then i was going to go it to an arraylist and replace each one. The problem is one of the thing that i am replacing is { and i want to replace it with {{}\r\nnow in a look this will continually replace the brackets because i keep adding them... so my other thought was to replace them all one by one char by char and add to a new `StringBuilder` object?\r\n\r\n    ArrayList&lt;String&gt; replacements= new ArrayList&lt;String&gt;();\r\n    String s=&quot;::&quot;;\r\n    s+=command;\r\n    Pattern p= Pattern.compile(&quot;[!-~]&quot;);\r\n    Matcher match= p.matcher(this.execution);\r\n    while(match.find()){\r\n        replacements.add(match.group());\r\n    }\r\n    StringBuilder string= new StringBuilder();\r\n    for(int i=0;i&lt;this.execution.length();i++){ \r\n        String a=new String(execution.charAt(i));\r\n        if(...){\r\n            ...\r\n        }\r\n    }\r\n    s+=&quot;::&quot;+this.execution;\r\n\r\n","title":"Java replace matched regex","body":"<p>Sorry i had to re write this question i was in the middle of finishing it and someone closed it. \nthey weren't kind enough to explain why so i had to repost? \nplease inform me what is confusing.</p>\n\n<p>Main point: I want to replace a regex match with part of the match\nso if i regex hi i want it to be replaced with {hi} \nif regex match at i want to replace with {at}</p>\n\n<p>this is awesome look at this two letter words get replaced\nthe return would be</p>\n\n<pre><code>this &lt;h1&gt;is&lt;/h1&gt; awesome look &lt;h1&gt;at&lt;/h1&gt; this two letter words get replaced\n</code></pre>\n\n<p>notice how the is and at which would match regex \\b\\w\\w\\b would be matched a replaced</p>\n\n<p>this is the code i was working on... don't judge it's not finished but i am just a little confused and wondering if there is an easier way. i was search the string and finding the matches and then i was going to go it to an arraylist and replace each one. The problem is one of the thing that i am replacing is { and i want to replace it with {{}\nnow in a look this will continually replace the brackets because i keep adding them... so my other thought was to replace them all one by one char by char and add to a new <code>StringBuilder</code> object?</p>\n\n<pre><code>ArrayList&lt;String&gt; replacements= new ArrayList&lt;String&gt;();\nString s=\"::\";\ns+=command;\nPattern p= Pattern.compile(\"[!-~]\");\nMatcher match= p.matcher(this.execution);\nwhile(match.find()){\n    replacements.add(match.group());\n}\nStringBuilder string= new StringBuilder();\nfor(int i=0;i&lt;this.execution.length();i++){ \n    String a=new String(execution.charAt(i));\n    if(...){\n        ...\n    }\n}\ns+=\"::\"+this.execution;\n</code></pre>\n"},{"tags":["java","regex","replaceall"],"answers":[{"comments":[{"owner":{"account_id":1314338,"reputation":2872,"user_id":1261600,"accept_rate":67,"display_name":"Lpc_dark"},"score":0,"creation_date":1366147376,"post_id":16031324,"comment_id":22898221,"body_markdown":"yea wasn&#39;t the smartest move. I was writing it for something else tho. I needed to check each char to make sure it wasn&#39;t a certain char then replace it. so i was adding it to the string builder while building it back up.","body":"yea wasn&#39;t the smartest move. I was writing it for something else tho. I needed to check each char to make sure it wasn&#39;t a certain char then replace it. so i was adding it to the string builder while building it back up."}],"tags":[],"owner":{"account_id":1268556,"reputation":48088,"user_id":1225328,"accept_rate":93,"display_name":"sp00m"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1366097919,"creation_date":1366097919,"answer_id":16031324,"question_id":16028688,"body_markdown":"I don&#39;t really get how could your code solve the requirements you explained above...\r\n\r\nThat said, it seems to be a easier way to do this kind of job by using the JAVA&#39;s [`replaceAll`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String%2C+java.lang.String%29) method, typically for the two-letter words:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    &quot;this is awesome look at this two letter words get replaced&quot;\r\n    .replaceAll(&quot;(\\\\b\\\\w{2}\\\\b)&quot;, &quot;&lt;h1&gt;$1&lt;/h1&gt;&quot;);\r\n\r\nThis prints:\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    this &lt;h1&gt;is&lt;/h1&gt; awesome look &lt;h1&gt;at&lt;/h1&gt; this two letter words get replaced","title":"Java replace Matcher","body":"<p>I don't really get how could your code solve the requirements you explained above...</p>\n\n<p>That said, it seems to be a easier way to do this kind of job by using the JAVA's <a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String%2C+java.lang.String%29\" rel=\"nofollow\"><code>replaceAll</code></a> method, typically for the two-letter words:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>\"this is awesome look at this two letter words get replaced\"\n.replaceAll(\"(\\\\b\\\\w{2}\\\\b)\", \"&lt;h1&gt;$1&lt;/h1&gt;\");\n</code></pre>\n\n<p>This prints:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>this &lt;h1&gt;is&lt;/h1&gt; awesome look &lt;h1&gt;at&lt;/h1&gt; this two letter words get replaced\n</code></pre>\n"}],"owner":{"account_id":1314338,"reputation":2872,"user_id":1261600,"accept_rate":67,"display_name":"Lpc_dark"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1068,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"accepted_answer_id":16031324,"answer_count":1,"score":0,"last_activity_date":1692854726,"creation_date":1366085774,"question_id":16028688,"body_markdown":"I want to find replace part of what is matched.\r\n\r\n***Example:***\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    this is awesome look at this two letter words get replaced\r\n\r\nthe return would be\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    this &lt;h1&gt;is&lt;/h1&gt; awesome look &lt;h1&gt;at&lt;/h1&gt; this two letter words get replaced\r\n\r\nNotice how the `is` and `at` which would match regex `\\b\\w\\w\\b` would be matched are replaced.\r\n\r\nThis is the code I was working on. It&#39;s not finished but I am just a little confused and wondering if there is an easier way. I was searching the string and finding the matches.  Then I was adding it to an ArrayList and replace each one. The problem is one of the thing that I am replacing is `{` and I want to replace it with `{{}`\r\n\r\nNow in a look this will continually replace the brackets because I keep adding them...\r\nSo my other thought was to replace them all one by one char by char and add to a new StringBuilder object?\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    ArrayList&lt;String&gt; replacements = new ArrayList&lt;String&gt;();\r\n    \r\n    String s = &quot;::&quot;;\r\n\r\n    s += command;\r\n\r\n    Pattern p = Pattern.compile(&quot;[!-~]&quot;);\r\n    Matcher match = p.matcher(this.execution);\r\n\r\n    while(match.find())\r\n    {\r\n        replacements.add(match.group());\r\n    }\r\n\r\n    StringBuilder string = new StringBuilder();\r\n\r\n    for(int i=0; i&lt;this.execution.length(); i++)\r\n    { \r\n        String a  =new String(execution.charAt(i));\r\n        if()\r\n        { \r\n        }\r\n    }\r\n    s += &quot;::&quot; + this.execution;","title":"Java replace Matcher","body":"<p>I want to find replace part of what is matched.</p>\n\n<p><em><strong>Example:</em></strong></p>\n\n<pre class=\"lang-html prettyprint-override\"><code>this is awesome look at this two letter words get replaced\n</code></pre>\n\n<p>the return would be</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>this &lt;h1&gt;is&lt;/h1&gt; awesome look &lt;h1&gt;at&lt;/h1&gt; this two letter words get replaced\n</code></pre>\n\n<p>Notice how the <code>is</code> and <code>at</code> which would match regex <code>\\b\\w\\w\\b</code> would be matched are replaced.</p>\n\n<p>This is the code I was working on. It's not finished but I am just a little confused and wondering if there is an easier way. I was searching the string and finding the matches.  Then I was adding it to an ArrayList and replace each one. The problem is one of the thing that I am replacing is <code>{</code> and I want to replace it with <code>{{}</code></p>\n\n<p>Now in a look this will continually replace the brackets because I keep adding them...\nSo my other thought was to replace them all one by one char by char and add to a new StringBuilder object?</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>ArrayList&lt;String&gt; replacements = new ArrayList&lt;String&gt;();\n\nString s = \"::\";\n\ns += command;\n\nPattern p = Pattern.compile(\"[!-~]\");\nMatcher match = p.matcher(this.execution);\n\nwhile(match.find())\n{\n    replacements.add(match.group());\n}\n\nStringBuilder string = new StringBuilder();\n\nfor(int i=0; i&lt;this.execution.length(); i++)\n{ \n    String a  =new String(execution.charAt(i));\n    if()\n    { \n    }\n}\ns += \"::\" + this.execution;\n</code></pre>\n"},{"tags":["java","regex","string"],"answers":[{"tags":[],"owner":{"account_id":1920143,"reputation":7756,"user_id":1731862,"accept_rate":71,"display_name":"Ankur Shanbhag"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1365527685,"creation_date":1365527685,"answer_id":15908263,"question_id":15908197,"body_markdown":"Try this out :\r\n\r\n    String data = &quot;this is a String ${AUTO_TEST_f} body ${GLOBAL_SYNC} ${AUTO_2}&quot;;\r\n\t\tPattern pattern = Pattern.compile(&quot;\\\\$\\\\{.+?\\\\}&quot;);\r\n\r\n\t\tMatcher matcher = pattern.matcher(data);\r\n\r\n\t\twhile (matcher.find()) {\r\n\t\t\t// Indicates match is found. Do further processing\r\n\t\t\tSystem.out.println(matcher.group());\r\n\t\t}\r\n\r\nOutput is :\r\n\r\n${AUTO_TEST_f}&lt;br&gt;\r\n${GLOBAL_SYNC}&lt;br&gt;\r\n${AUTO_2}\r\n","title":"Matching pattern multiple times on text file?","body":"<p>Try this out :</p>\n\n<pre><code>String data = \"this is a String ${AUTO_TEST_f} body ${GLOBAL_SYNC} ${AUTO_2}\";\n    Pattern pattern = Pattern.compile(\"\\\\$\\\\{.+?\\\\}\");\n\n    Matcher matcher = pattern.matcher(data);\n\n    while (matcher.find()) {\n        // Indicates match is found. Do further processing\n        System.out.println(matcher.group());\n    }\n</code></pre>\n\n<p>Output is :</p>\n\n<p>${AUTO_TEST_f}<br>\n${GLOBAL_SYNC}<br>\n${AUTO_2}</p>\n"},{"tags":[],"owner":{"account_id":1494484,"reputation":56249,"user_id":1400768,"display_name":"nhahtdh"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1365527774,"creation_date":1365527774,"answer_id":15908290,"question_id":15908197,"body_markdown":"Whatever you are doing, it is not the right way to code. Composing a regex from smaller components is fine, but it is pointless when you break the component down to single character.\r\n\r\nIf you want to get those that starts with `GLOBAL` or `AUTO`, it is as simple as:\r\n\r\n    \\$\\{(GLOBAL|AUTO)_.*?\\}\r\n\r\nPutting the regex into a string literal:\r\n\r\n    &quot;\\\\$\\\\{(GLOBAL|AUTO)_.*?\\\\}&quot;","title":"Matching pattern multiple times on text file?","body":"<p>Whatever you are doing, it is not the right way to code. Composing a regex from smaller components is fine, but it is pointless when you break the component down to single character.</p>\n\n<p>If you want to get those that starts with <code>GLOBAL</code> or <code>AUTO</code>, it is as simple as:</p>\n\n<pre><code>\\$\\{(GLOBAL|AUTO)_.*?\\}\n</code></pre>\n\n<p>Putting the regex into a string literal:</p>\n\n<pre><code>\"\\\\$\\\\{(GLOBAL|AUTO)_.*?\\\\}\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1944253,"reputation":37590,"user_id":1749753,"display_name":"jlordo"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1365527945,"creation_date":1365527945,"answer_id":15908352,"question_id":15908197,"body_markdown":"Don&#39;t overcomplicate:\r\n\r\n\tString txt = &quot;this is a String ${AUTO_TEST_f} body ${GLOBAL_SYNC} ${AUTO_2}&quot;;\r\n\tString regex = &quot;\\\\$\\\\{(AUTO|GLOBAL)_(.*?)\\\\}&quot;;\r\n\tPattern pattern = Pattern.compile(regex);\r\n\tMatcher matcher = pattern.matcher(txt);\r\n\twhile (matcher.find()) {\r\n\t\tSystem.out.println(matcher.group() + &quot;\\t-&gt;\\t&quot; + matcher.group(2) + &quot;\\t(&quot; + matcher.group(1) + &quot;)&quot; );\r\n\t}\r\n\r\nOutput:\r\n\r\n    ${AUTO_TEST_f}\t-&gt;\tTEST_f\t(AUTO)\r\n    ${GLOBAL_SYNC}\t-&gt;\tSYNC\t(GLOBAL)\r\n    ${AUTO_2}\t    -&gt;\t2   \t(AUTO)\r\n\r\n","title":"Matching pattern multiple times on text file?","body":"<p>Don't overcomplicate:</p>\n\n<pre><code>String txt = \"this is a String ${AUTO_TEST_f} body ${GLOBAL_SYNC} ${AUTO_2}\";\nString regex = \"\\\\$\\\\{(AUTO|GLOBAL)_(.*?)\\\\}\";\nPattern pattern = Pattern.compile(regex);\nMatcher matcher = pattern.matcher(txt);\nwhile (matcher.find()) {\n    System.out.println(matcher.group() + \"\\t-&gt;\\t\" + matcher.group(2) + \"\\t(\" + matcher.group(1) + \")\" );\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>${AUTO_TEST_f}  -&gt;  TEST_f  (AUTO)\n${GLOBAL_SYNC}  -&gt;  SYNC    (GLOBAL)\n${AUTO_2}       -&gt;  2       (AUTO)\n</code></pre>\n"}],"owner":{"account_id":2298361,"reputation":143,"user_id":2019260,"accept_rate":64,"display_name":"user2019260"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5589,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":15908352,"answer_count":3,"score":0,"last_activity_date":1692854705,"creation_date":1365527441,"question_id":15908197,"body_markdown":"The Problem:\r\n-----------\r\nIn Java, I will be parsing scripts and extracting any text from the file that begins with \r\n\r\n        ${GLOBAL_} or ${AUTO_}\r\n\r\nI want to pickup everything until the last curly brace, so for example if I had the following String:\r\n\r\n        &quot;this is a String ${AUTO_TEST_f} body ${GLOBAL_SYNC} ${AUTO_2} ${OTHER_VAR}&quot;\r\nThe results should be:\r\n        \r\n    ${AUTO_TEST_f} \r\n       \r\n    ${GLOBAL_SYNC}\r\n        \r\n    ${AUTO_2} \r\n\r\n\r\nWhat I&#39;ve Attempted:\r\n--------------------\r\n\r\nI&#39;ve attempted to create regex patterns (that I believe do work) and using them to create a Matcher.  I then attempt to use the Matcher to print all the matches to console but I&#39;m having some issues.  For some reason, it&#39;s skipping over ${GLOBAL_VARIABLE_1}. Also, how could I implement this to give me all the matches? A while loop [while match.group(0) != null]?\r\n\r\n\r\nHere&#39;s my code:\r\n\r\n     String re1=&quot;(\\\\$)&quot;;\t// Any Single Character 1\r\n    String re2=&quot;(\\\\{)&quot;;\t// Any Single Character 2\r\n    String re3=&quot;(G)&quot;;\t// Any Single Character 3\r\n    String re4=&quot;(L)&quot;;\t// Any Single Character 4\r\n    String re5=&quot;(O)&quot;;\t// Any Single Character 5\r\n    String re6=&quot;(B)&quot;;\t// Any Single Character 6\r\n    String re7=&quot;(A)&quot;;\t// Any Single Character 7\r\n    String re8=&quot;(L)&quot;;\t// Any Single Character 8\r\n    String re9=&quot;(_)&quot;;\t// Any Single Character 9\r\n    String re10=&quot;(.*?)&quot;;\t// Any Single Character 10\r\n    String re11=&quot;(\\\\})&quot;;\t// Any Single Character 11\r\n    \r\n    \r\n    String r1=&quot;(\\\\$)&quot;;\t// Any Single Character 1\r\n    String r2=&quot;(\\\\{)&quot;;\t// Any Single Character 2\r\n    String r3=&quot;(A)&quot;;\t// Any Single Character 3\r\n    String r4=&quot;(U)&quot;;\t// Any Single Character 4\r\n    String r5=&quot;(T)&quot;;\t// Any Single Character 5\r\n    String r6=&quot;(O)&quot;;\t// Any Single Character 6\r\n    String r7=&quot;(_)&quot;;\t// Any Single Character 7\r\n    String r8=&quot;(.*?)&quot;;\t// Any Single Character 8\r\n    String r9=&quot;(\\\\})&quot;;\t// Any Single Character 9\r\n    \r\n    Pattern p = Pattern.compile((re1+re2+re3+re4+re5+re6+re7+re8+re9+re10+re11));\r\n    Pattern p2 = Pattern.compile(r1+r2+r3+r4+r5+r6+r7+r8+r9);\r\n    \r\n     Matcher m = p.matcher(txt);\r\n     Matcher m1 = p2.matcher(txt);\r\n     m1.find();\r\n     System.out.println(m1.group(0));\r\n     m.find();\r\n     System.out.println(m.group(0));\r\n\r\nAnd this is the Console Results:\r\n   \r\n     Actual Results:\r\n     ${AUTO_1}\r\n     ${GLOBAL_VARIABLE_2}\r\n\r\nHere are my expected Results:\r\n\r\n     Expected Results:\r\n     ${GLOBAL_VARIABLE_1}\r\n     ${AUTO_1}\r\n     ${GLOBAL_VARIABLE_2}\r\n     ${GLOBAL_VARIABLE_3}\r\n\r\n\r\nThanks!","title":"Matching pattern multiple times on text file?","body":"<h2>The Problem:</h2>\n\n<p>In Java, I will be parsing scripts and extracting any text from the file that begins with </p>\n\n<pre><code>    ${GLOBAL_} or ${AUTO_}\n</code></pre>\n\n<p>I want to pickup everything until the last curly brace, so for example if I had the following String:</p>\n\n<pre><code>    \"this is a String ${AUTO_TEST_f} body ${GLOBAL_SYNC} ${AUTO_2} ${OTHER_VAR}\"\n</code></pre>\n\n<p>The results should be:</p>\n\n<pre><code>${AUTO_TEST_f} \n\n${GLOBAL_SYNC}\n\n${AUTO_2} \n</code></pre>\n\n<h2>What I've Attempted:</h2>\n\n<p>I've attempted to create regex patterns (that I believe do work) and using them to create a Matcher.  I then attempt to use the Matcher to print all the matches to console but I'm having some issues.  For some reason, it's skipping over ${GLOBAL_VARIABLE_1}. Also, how could I implement this to give me all the matches? A while loop [while match.group(0) != null]?</p>\n\n<p>Here's my code:</p>\n\n<pre><code> String re1=\"(\\\\$)\";    // Any Single Character 1\nString re2=\"(\\\\{)\"; // Any Single Character 2\nString re3=\"(G)\";   // Any Single Character 3\nString re4=\"(L)\";   // Any Single Character 4\nString re5=\"(O)\";   // Any Single Character 5\nString re6=\"(B)\";   // Any Single Character 6\nString re7=\"(A)\";   // Any Single Character 7\nString re8=\"(L)\";   // Any Single Character 8\nString re9=\"(_)\";   // Any Single Character 9\nString re10=\"(.*?)\";    // Any Single Character 10\nString re11=\"(\\\\})\";    // Any Single Character 11\n\n\nString r1=\"(\\\\$)\";  // Any Single Character 1\nString r2=\"(\\\\{)\";  // Any Single Character 2\nString r3=\"(A)\";    // Any Single Character 3\nString r4=\"(U)\";    // Any Single Character 4\nString r5=\"(T)\";    // Any Single Character 5\nString r6=\"(O)\";    // Any Single Character 6\nString r7=\"(_)\";    // Any Single Character 7\nString r8=\"(.*?)\";  // Any Single Character 8\nString r9=\"(\\\\})\";  // Any Single Character 9\n\nPattern p = Pattern.compile((re1+re2+re3+re4+re5+re6+re7+re8+re9+re10+re11));\nPattern p2 = Pattern.compile(r1+r2+r3+r4+r5+r6+r7+r8+r9);\n\n Matcher m = p.matcher(txt);\n Matcher m1 = p2.matcher(txt);\n m1.find();\n System.out.println(m1.group(0));\n m.find();\n System.out.println(m.group(0));\n</code></pre>\n\n<p>And this is the Console Results:</p>\n\n<pre><code> Actual Results:\n ${AUTO_1}\n ${GLOBAL_VARIABLE_2}\n</code></pre>\n\n<p>Here are my expected Results:</p>\n\n<pre><code> Expected Results:\n ${GLOBAL_VARIABLE_1}\n ${AUTO_1}\n ${GLOBAL_VARIABLE_2}\n ${GLOBAL_VARIABLE_3}\n</code></pre>\n\n<p>Thanks!</p>\n"},{"tags":["java","regex","regex-lookarounds"],"comments":[{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":1,"creation_date":1361386482,"post_id":14987735,"comment_id":21048551,"body_markdown":"Why not `@deprecate` the `API(3,Utils.FIFTY,key1,key4)` form, call the new form internally, and recompile?","body":"Why not <code>@deprecate</code> the <code>API(3,Utils.FIFTY,key1,key4)</code> form, call the new form internally, and recompile?"},{"owner":{"account_id":431119,"reputation":538,"user_id":814981,"accept_rate":75,"display_name":"appu"},"score":0,"creation_date":1361386717,"post_id":14987735,"comment_id":21048690,"body_markdown":"The API is developed by another team and we don&#39;t have access to it. The API still exists for backward compatibility. Since we need the new feature, we need to call the new method","body":"The API is developed by another team and we don&#39;t have access to it. The API still exists for backward compatibility. Since we need the new feature, we need to call the new method"}],"answers":[{"comments":[{"owner":{"account_id":1781872,"reputation":14665,"user_id":1624376,"accept_rate":76,"display_name":"Aubin"},"score":0,"creation_date":1361387475,"post_id":14987836,"comment_id":21049100,"body_markdown":"What about line feed between `(` and `)`?","body":"What about line feed between <code>(</code> and <code>)</code>?"},{"owner":{"account_id":237172,"reputation":203767,"user_id":505154,"accept_rate":100,"display_name":"Andrew Clark"},"score":0,"creation_date":1361389104,"post_id":14987836,"comment_id":21049896,"body_markdown":"@Aubin I replaced the `\\s` so the character classes will match spaces and tabs but not line feeds, good suggestion.","body":"@Aubin I replaced the <code>\\s</code> so the character classes will match spaces and tabs but not line feeds, good suggestion."}],"tags":[],"owner":{"account_id":237172,"reputation":203767,"user_id":505154,"accept_rate":100,"display_name":"Andrew Clark"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1361389067,"creation_date":1361386812,"answer_id":14987836,"question_id":14987735,"body_markdown":"Something like the following should work:\r\n\r\n    API\\([\\.\\w \\t,]*?,\\s*(key[\\.\\w \\t,]*)\\)\r\n\r\nThe main change here was to change the repetition on the first character class from `*` to `*?`, this means it will now match as few characters as possible instead of as many as possible, so you all of your `key` arguments will be included in your matching group.","title":"Regex issue - Matching API name","body":"<p>Something like the following should work:</p>\n\n<pre><code>API\\([\\.\\w \\t,]*?,\\s*(key[\\.\\w \\t,]*)\\)\n</code></pre>\n\n<p>The main change here was to change the repetition on the first character class from <code>*</code> to <code>*?</code>, this means it will now match as few characters as possible instead of as many as possible, so you all of your <code>key</code> arguments will be included in your matching group.</p>\n"},{"comments":[{"owner":{"account_id":431119,"reputation":538,"user_id":814981,"accept_rate":75,"display_name":"appu"},"score":0,"creation_date":1361389340,"post_id":14988213,"comment_id":21050015,"body_markdown":"I don&#39;t have complex scenarios like the first example you mentioned. But the second and third samples are valid for me, means the API can be broken in to multiple lines due to code formatting. Such cases the the reluctant quantifier approach(_*?_) works fine. We have already incorporated **\\s** for the whitespace chanracters.","body":"I don&#39;t have complex scenarios like the first example you mentioned. But the second and third samples are valid for me, means the API can be broken in to multiple lines due to code formatting. Such cases the the reluctant quantifier approach(<i>*?</i>) works fine. We have already incorporated <b>\\s</b> for the whitespace chanracters."}],"tags":[],"owner":{"account_id":1781872,"reputation":14665,"user_id":1624376,"accept_rate":76,"display_name":"Aubin"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1361391689,"creation_date":1361388150,"answer_id":14988213,"question_id":14987735,"body_markdown":"The F.J&#39;s answer doesn&#39;t match this test case:\r\n\r\n    import java.util.regex.Matcher;\r\n    import java.util.regex.Pattern;\r\n    \r\n    public class APIUpdater {\r\n       public static void main( String[] args ) {\r\n          String source = &quot;\\n&quot; +\r\n          \t&quot;API( key.getValue( 18 ),call( key1 ).mth(),key1,key4);\\n&quot; +\r\n          \t&quot;API(\\n&quot; +\r\n          \t&quot;\\t3,\\n&quot; +\r\n          \t&quot;\\tUtils.FIFTY,\\n&quot; +\r\n          \t&quot;\\tkey1,\\n&quot; +\r\n          \t&quot;\\tkey4 );\\n&quot; +\r\n          \t&quot;API(3,Utils.FIFTY,key1,key4);\\n&quot;;\r\n          Pattern p =\r\n             Pattern.compile( &quot;API\\\\([.\\\\w\\\\s,]*?,\\\\s*(key[\\\\.\\\\w\\\\s,]*)\\\\)&quot; );\r\n          Matcher m = p.matcher( source );\r\n          while( m.find())\r\n          {\r\n             System.err.println( m.replaceAll( &quot;API(key1,key4)&quot; ));\r\n          }\r\n       }\r\n    }\r\n\r\nOutput is:\r\n\r\n    API( key.getValue( 18 ),call( key1 ).mth(),key1,key4);\r\n    API(key1,key4);\r\n    API(key1,key4);\r\n\r\nA call on several lines doesn&#39;t match but spaces are correctly handled.\r\n\r\nA true parser with a grammar is required to parse Java, a regular expressions can&#39;t do this complex job because they works at lexical level (the words, not the sentences).\r\n\r\n\r\n","title":"Regex issue - Matching API name","body":"<p>The F.J's answer doesn't match this test case:</p>\n\n<pre><code>import java.util.regex.Matcher;\nimport java.util.regex.Pattern;\n\npublic class APIUpdater {\n   public static void main( String[] args ) {\n      String source = \"\\n\" +\n        \"API( key.getValue( 18 ),call( key1 ).mth(),key1,key4);\\n\" +\n        \"API(\\n\" +\n        \"\\t3,\\n\" +\n        \"\\tUtils.FIFTY,\\n\" +\n        \"\\tkey1,\\n\" +\n        \"\\tkey4 );\\n\" +\n        \"API(3,Utils.FIFTY,key1,key4);\\n\";\n      Pattern p =\n         Pattern.compile( \"API\\\\([.\\\\w\\\\s,]*?,\\\\s*(key[\\\\.\\\\w\\\\s,]*)\\\\)\" );\n      Matcher m = p.matcher( source );\n      while( m.find())\n      {\n         System.err.println( m.replaceAll( \"API(key1,key4)\" ));\n      }\n   }\n}\n</code></pre>\n\n<p>Output is:</p>\n\n<pre><code>API( key.getValue( 18 ),call( key1 ).mth(),key1,key4);\nAPI(key1,key4);\nAPI(key1,key4);\n</code></pre>\n\n<p>A call on several lines doesn't match but spaces are correctly handled.</p>\n\n<p>A true parser with a grammar is required to parse Java, a regular expressions can't do this complex job because they works at lexical level (the words, not the sentences).</p>\n"},{"comments":[{"owner":{"account_id":1781872,"reputation":14665,"user_id":1624376,"accept_rate":76,"display_name":"Aubin"},"score":0,"creation_date":1361391770,"post_id":14988568,"comment_id":21051156,"body_markdown":"+1: this solution tackle the problem at correct abstraction level","body":"+1: this solution tackle the problem at correct abstraction level"},{"owner":{"account_id":431119,"reputation":538,"user_id":814981,"accept_rate":75,"display_name":"appu"},"score":0,"creation_date":1361413300,"post_id":14988568,"comment_id":21058895,"body_markdown":"I liked the Recorder pattern and will have try.","body":"I liked the Recorder pattern and will have try."}],"tags":[],"owner":{"account_id":1359686,"reputation":12160,"user_id":1297272,"accept_rate":86,"display_name":"Javier"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1361389406,"creation_date":1361389406,"answer_id":14988568,"question_id":14987735,"body_markdown":"You may want to try [Recoder][1], which allows you to apply source code transformations. \r\n\r\n\r\n  [1]: http://sourceforge.net/apps/mediawiki/recoder/index.php?title=Writing_transformations","title":"Regex issue - Matching API name","body":"<p>You may want to try <a href=\"http://sourceforge.net/apps/mediawiki/recoder/index.php?title=Writing_transformations\" rel=\"nofollow\">Recoder</a>, which allows you to apply source code transformations. </p>\n"}],"owner":{"account_id":431119,"reputation":538,"user_id":814981,"accept_rate":75,"display_name":"appu"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":524,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":14987836,"answer_count":3,"score":2,"last_activity_date":1692854696,"creation_date":1361386402,"question_id":14987735,"body_markdown":"I am currently working with a large code base, in which recently one of the API&#39;s signature changed. So I need to modify thousands of files to get the new feature. So developed a java program to get take all `*.java` files and look for old API pattern. If found replace it with new pattern. \r\n\r\n###Old API\r\n\r\n    API(3,Utils.FIFTY,key1,key4)\r\n\r\n###New API\r\n\r\n    API(key1,key4)\r\n\r\n\r\nSo I created a regex pattern to match the old API as `API\\([\\d,\\s\\.\\w]*(key[\\.\\w\\s,]*)\\)`\r\nIf it matches it will replace it with \r\n\r\n`replaceString = matcher.group(1) + &quot;(&quot; + matcher.group(2) + &quot;)&quot;;`\r\n\r\nSo with the current code instead of expected `API(key1,key4)`, I am getting `API(key4)`. I&#39;ve analyzed the issue and my inference is that the `\\w` caught the first **key** pattern. If we need to match, we need to do a negative look ahead.\r\n\r\nCan any one share the best consistent way to resolve the regex issue ?\r\n","title":"Regex issue - Matching API name","body":"<p>I am currently working with a large code base, in which recently one of the API's signature changed. So I need to modify thousands of files to get the new feature. So developed a java program to get take all <code>*.java</code> files and look for old API pattern. If found replace it with new pattern. </p>\n\n<h3>Old API</h3>\n\n<pre><code>API(3,Utils.FIFTY,key1,key4)\n</code></pre>\n\n<h3>New API</h3>\n\n<pre><code>API(key1,key4)\n</code></pre>\n\n<p>So I created a regex pattern to match the old API as <code>API\\([\\d,\\s\\.\\w]*(key[\\.\\w\\s,]*)\\)</code>\nIf it matches it will replace it with </p>\n\n<p><code>replaceString = matcher.group(1) + \"(\" + matcher.group(2) + \")\";</code></p>\n\n<p>So with the current code instead of expected <code>API(key1,key4)</code>, I am getting <code>API(key4)</code>. I've analyzed the issue and my inference is that the <code>\\w</code> caught the first <strong>key</strong> pattern. If we need to match, we need to do a negative look ahead.</p>\n\n<p>Can any one share the best consistent way to resolve the regex issue ?</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":1082797,"reputation":2471,"user_id":1079311,"accept_rate":77,"display_name":"AlexIIP"},"score":0,"creation_date":1361261974,"post_id":14952794,"comment_id":20988627,"body_markdown":"I could use an HTML parser, but this is not a full HTML page, this is a small part of an RSS feed which I was hoping to parse without anything fancy.","body":"I could use an HTML parser, but this is not a full HTML page, this is a small part of an RSS feed which I was hoping to parse without anything fancy."},{"owner":{"account_id":1944253,"reputation":37590,"user_id":1749753,"display_name":"jlordo"},"score":2,"creation_date":1361262149,"post_id":14952794,"comment_id":20988701,"body_markdown":"The beginning of your Pattern `&quot;\\\\src` means one whitespace followed by `rc`. This will never match `src` as `s` is not whitespace.","body":"The beginning of your Pattern <code>&quot;\\\\src</code> means one whitespace followed by <code>rc</code>. This will never match <code>src</code> as <code>s</code> is not whitespace."}],"answers":[{"comments":[{"owner":{"account_id":1082797,"reputation":2471,"user_id":1079311,"accept_rate":77,"display_name":"AlexIIP"},"score":0,"creation_date":1361262155,"post_id":14952847,"comment_id":20988704,"body_markdown":"wow.... that works perfectly, I can&#39;t believe I tried so hard. Ill give you answer as soon as I can.","body":"wow.... that works perfectly, I can&#39;t believe I tried so hard. Ill give you answer as soon as I can."}],"tags":[],"owner":{"account_id":1777435,"reputation":11756,"user_id":1620937,"accept_rate":100,"display_name":"Orab&#238;g"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1361262014,"creation_date":1361262014,"answer_id":14952847,"question_id":14952794,"body_markdown":"Why didn&#39;t you try a simplier pattern ? Like this one :\r\n\r\n    Pattern.compile(&quot;src=\\&quot;(.*?)\\&quot;&quot;);\r\n\r\n(Not tested, but should be better)","title":"Java parsing with Matcher and Regex","body":"<p>Why didn't you try a simplier pattern ? Like this one :</p>\n\n<pre><code>Pattern.compile(\"src=\\\"(.*?)\\\"\");\n</code></pre>\n\n<p>(Not tested, but should be better)</p>\n"},{"tags":[],"owner":{"account_id":112681,"reputation":29166,"user_id":297114,"accept_rate":70,"display_name":"Oscar Mederos"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1361262250,"creation_date":1361262250,"answer_id":14952906,"question_id":14952794,"body_markdown":"You can use either of the following regexes:\r\n\r\n    src=&quot;([^&quot;]+)\r\n    src=&quot;(.+?&quot;","title":"Java parsing with Matcher and Regex","body":"<p>You can use either of the following regexes:</p>\n\n<pre><code>src=\"([^\"]+)\nsrc=\"(.+?\"\n</code></pre>\n"}],"owner":{"account_id":1082797,"reputation":2471,"user_id":1079311,"accept_rate":77,"display_name":"AlexIIP"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":222,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":14952847,"answer_count":2,"score":0,"last_activity_date":1692854677,"creation_date":1361261798,"question_id":14952794,"body_markdown":"I have a very simple problem but I am new to Java Matcher and I am having a hard time figuring out how to use it for my specific problem.\r\n\r\n\r\nI have a string which is something like `this &lt;not needed content&gt;src=&quot;url&quot;&lt;not needed content&gt;src=&quot;url2&quot;&lt;not needed content&gt;`\r\n\r\nWhere &lt;&#39;not needed content&#39;&gt; are the things I want to ignore in my string. I basically want to extract the URLs from the string.\r\n\r\nMy code currently looks like this\r\n\r\n    Pattern MY_PATTERN = Pattern.compile(&quot;\\\\src=\\&quot;(.*?)\\\\\\&quot;&quot;);\r\n    Matcher m = MY_PATTERN.matcher(content);\r\n    String s = &quot;something&quot;;\r\n    while (m.find()) {\r\n       s = m.group(1);\r\n    }\r\n\r\nI apologize for such basic, and possibly duplicate question.\r\n\r\nThank you.","title":"Java parsing with Matcher and Regex","body":"<p>I have a very simple problem but I am new to Java Matcher and I am having a hard time figuring out how to use it for my specific problem.</p>\n\n<p>I have a string which is something like <code>this &lt;not needed content&gt;src=\"url\"&lt;not needed content&gt;src=\"url2\"&lt;not needed content&gt;</code></p>\n\n<p>Where &lt;'not needed content'> are the things I want to ignore in my string. I basically want to extract the URLs from the string.</p>\n\n<p>My code currently looks like this</p>\n\n<pre><code>Pattern MY_PATTERN = Pattern.compile(\"\\\\src=\\\"(.*?)\\\\\\\"\");\nMatcher m = MY_PATTERN.matcher(content);\nString s = \"something\";\nwhile (m.find()) {\n   s = m.group(1);\n}\n</code></pre>\n\n<p>I apologize for such basic, and possibly duplicate question.</p>\n\n<p>Thank you.</p>\n"},{"tags":["java","regex","string"],"comments":[{"owner":{"account_id":1853886,"reputation":210617,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"score":0,"creation_date":1360008701,"post_id":14694692,"comment_id":20548370,"body_markdown":"Do you just want the output for INCLUDES? And what is the expected output?","body":"Do you just want the output for INCLUDES? And what is the expected output?"},{"owner":{"account_id":1092551,"reputation":3879,"user_id":1086871,"accept_rate":100,"display_name":"G. Bach"},"score":0,"creation_date":1360008905,"post_id":14694692,"comment_id":20548454,"body_markdown":"Is this just missing a * after the . maybe?","body":"Is this just missing a * after the . maybe?"}],"answers":[{"tags":[],"owner":{"account_id":1853886,"reputation":210617,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1360009005,"creation_date":1360009005,"answer_id":14694840,"question_id":14694692,"body_markdown":"Your regex is not correct. You are just capturing a single character inside the bracket, and hence your regex will fail. \r\n\r\nTry using this: -\r\n\r\n    &quot;\\\\w+\\\\(.*?\\\\)&quot;\r\n\r\nAnd then get `group(0)`, or just `group()`: -\r\n\r\n    String text = &quot;INCLUDES(ABC) EXCLUDES(ABC) EXCLUDES(ABC) INCLUDES(ABC) INCLUDES(ABC)&quot;;\r\n    Matcher matcher = Pattern.compile(&quot;\\\\w+\\\\(.*?\\\\)&quot;).matcher(text);\r\n    \r\n    while (matcher.find()) {\r\n        System.out.println(matcher.group());\r\n    }","title":"string mattcher regex needed","body":"<p>Your regex is not correct. You are just capturing a single character inside the bracket, and hence your regex will fail. </p>\n\n<p>Try using this: -</p>\n\n<pre><code>\"\\\\w+\\\\(.*?\\\\)\"\n</code></pre>\n\n<p>And then get <code>group(0)</code>, or just <code>group()</code>: -</p>\n\n<pre><code>String text = \"INCLUDES(ABC) EXCLUDES(ABC) EXCLUDES(ABC) INCLUDES(ABC) INCLUDES(ABC)\";\nMatcher matcher = Pattern.compile(\"\\\\w+\\\\(.*?\\\\)\").matcher(text);\n\nwhile (matcher.find()) {\n    System.out.println(matcher.group());\n}\n</code></pre>\n"}],"owner":{"account_id":75452,"reputation":57633,"user_id":216431,"accept_rate":91,"display_name":"d-man"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":117,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":14694840,"answer_count":1,"score":0,"last_activity_date":1692854582,"creation_date":1360008463,"question_id":14694692,"body_markdown":"I have java code with matcher to find number of occurence in string using mattcher.find method.\r\n\r\nfollowing is my code\r\n\r\n\r\n    String text = &quot;INCLUDES(ABC) EXCLUDES(ABC) EXCLUDES(ABC) INCLUDES(EFG) INCLUDES(IJK)&quot;;\r\n\r\n    String patternString = &quot;INCLUDES(.)&quot;;\r\n\r\n    Pattern pattern = Pattern.compile(patternString);\r\n    Matcher matcher = pattern.matcher(text);\r\n\r\n    int count = 0;\r\n    while(matcher.find()) {\r\n        count++;\r\n        System.out.println(&quot;found: &quot; + count + &quot; : &quot;\r\n                + matcher.start() + &quot; - &quot; + matcher.end());\r\n        System.out.println(&quot; - &quot; +text.substring(matcher.start(), matcher.end()));\r\n    }\r\n\r\nwhich returns output as \r\n\r\n\r\n    found: 1 : 0 - 9\r\n     - INCLUDES(\r\n    found: 2 : 42 - 51\r\n     - INCLUDES(\r\n    found: 3 : 56 - 65\r\n     - INCLUDES(\r\n\r\nInstead of i want Regex to find and return number of occurrences as INCLUDES(*)\r\n\r\nany solution is appriciated. expected output should be loop printing values\r\n\r\n    INCLUDES(ABC)\r\n    INCLUDES(EFG)\r\n    INCLUDES(IJK)","title":"string mattcher regex needed","body":"<p>I have java code with matcher to find number of occurence in string using mattcher.find method.</p>\n\n<p>following is my code</p>\n\n<pre><code>String text = \"INCLUDES(ABC) EXCLUDES(ABC) EXCLUDES(ABC) INCLUDES(EFG) INCLUDES(IJK)\";\n\nString patternString = \"INCLUDES(.)\";\n\nPattern pattern = Pattern.compile(patternString);\nMatcher matcher = pattern.matcher(text);\n\nint count = 0;\nwhile(matcher.find()) {\n    count++;\n    System.out.println(\"found: \" + count + \" : \"\n            + matcher.start() + \" - \" + matcher.end());\n    System.out.println(\" - \" +text.substring(matcher.start(), matcher.end()));\n}\n</code></pre>\n\n<p>which returns output as </p>\n\n<pre><code>found: 1 : 0 - 9\n - INCLUDES(\nfound: 2 : 42 - 51\n - INCLUDES(\nfound: 3 : 56 - 65\n - INCLUDES(\n</code></pre>\n\n<p>Instead of i want Regex to find and return number of occurrences as INCLUDES(*)</p>\n\n<p>any solution is appriciated. expected output should be loop printing values</p>\n\n<pre><code>INCLUDES(ABC)\nINCLUDES(EFG)\nINCLUDES(IJK)\n</code></pre>\n"},{"tags":["java","regex"],"answers":[{"tags":[],"owner":{"account_id":134022,"reputation":717183,"user_id":335858,"accept_rate":81,"display_name":"Sergey Kalinichenko"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1359951825,"creation_date":1359951825,"answer_id":14680340,"question_id":14680324,"body_markdown":"You need to escape the dash in\r\n\r\n    +-/\r\n\r\nOtherwise, it is interpreted as a range from `&#39;+&#39;` to `&#39;/&#39;` - a range that includes `&#39;+&#39;`, `&#39;,&#39;`, `&#39;-&#39;`. `&#39;.&#39;`, and `&#39;/&#39;`.\r\n\r\n    private static final Pattern VALID_TOKEN = Pattern.compile(&quot;^[a-zA-Z0-9\\\\{\\\\}\\\\[\\\\].+\\\\-/=&gt;&lt;\\\\\\\\*]*$&quot;);\r\n    //                              Here ------------------------------------------------^^\r\n\r\nAlternatively, you can move the dash to the end of the character class (i.e. put it before the closing `]`).\r\n","title":"Java Pattern Matcher COMMA","body":"<p>You need to escape the dash in</p>\n\n<pre><code>+-/\n</code></pre>\n\n<p>Otherwise, it is interpreted as a range from <code>'+'</code> to <code>'/'</code> - a range that includes <code>'+'</code>, <code>','</code>, <code>'-'</code>. <code>'.'</code>, and <code>'/'</code>.</p>\n\n<pre><code>private static final Pattern VALID_TOKEN = Pattern.compile(\"^[a-zA-Z0-9\\\\{\\\\}\\\\[\\\\].+\\\\-/=&gt;&lt;\\\\\\\\*]*$\");\n//                              Here ------------------------------------------------^^\n</code></pre>\n\n<p>Alternatively, you can move the dash to the end of the character class (i.e. put it before the closing <code>]</code>).</p>\n"}],"owner":{"account_id":2323432,"reputation":1297,"user_id":2038475,"accept_rate":78,"display_name":"KernelCurry"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":856,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"closed_date":1655120852,"accepted_answer_id":14680340,"answer_count":1,"score":3,"last_activity_date":1692854561,"creation_date":1359951688,"question_id":14680324,"body_markdown":"I am trying to use a pattern check against a string, and for some reason it is saying that strings that shouldn&#39;t match, do..\r\n\r\nCode:\r\n \r\n    private static final Pattern VALID_TOKEN = Pattern.compile(&quot;^[a-zA-Z0-9\\\\{\\\\}\\\\[\\\\].+-/=&gt;&lt;\\\\\\\\*]*$&quot;);\r\n    System.out.println(VALID_TOKEN.matcher(token).matches());\r\n\r\nExamples:\r\n\r\n    &quot;123&quot; = true\r\n    &quot;1,3&quot; = true // Should NOT BE TRUE\r\n    &quot;123*123&quot; = true\r\n    &quot;123*^123&quot; = false\r\n\r\nAll of the above examples are correct except &quot;1,3&quot;  the pattern should not include a COMMA.  Does anyone have any ideas? \r\n","title":"Java Pattern Matcher COMMA","body":"<p>I am trying to use a pattern check against a string, and for some reason it is saying that strings that shouldn't match, do..</p>\n\n<p>Code:</p>\n\n<pre><code>private static final Pattern VALID_TOKEN = Pattern.compile(\"^[a-zA-Z0-9\\\\{\\\\}\\\\[\\\\].+-/=&gt;&lt;\\\\\\\\*]*$\");\nSystem.out.println(VALID_TOKEN.matcher(token).matches());\n</code></pre>\n\n<p>Examples:</p>\n\n<pre><code>\"123\" = true\n\"1,3\" = true // Should NOT BE TRUE\n\"123*123\" = true\n\"123*^123\" = false\n</code></pre>\n\n<p>All of the above examples are correct except \"1,3\"  the pattern should not include a COMMA.  Does anyone have any ideas? </p>\n"},{"tags":["java","regex","parsing"],"comments":[{"owner":{"account_id":1706574,"reputation":13314,"user_id":1565512,"display_name":"MikeM"},"score":0,"creation_date":1359547340,"post_id":14602518,"comment_id":20388941,"body_markdown":"What is the unpleasant behaviour exactly - can you describe it more clearly? Do you need that many capturing groups `()`?","body":"What is the unpleasant behaviour exactly - can you describe it more clearly? Do you need that many capturing groups <code>()</code>?"},{"owner":{"account_id":2305505,"reputation":13,"user_id":2024867,"display_name":"lugges"},"score":0,"creation_date":1359549312,"post_id":14602518,"comment_id":20389968,"body_markdown":"As the groups 2 to 7 should be null. But there is for example in group 3 the String &quot;0&quot; wich is the last digit of the 190 of the initial string. Even if the overall match is the one i wanted.\nI dont really need all the groups. but I need to get group 3 and group 7 and I need to calculate something with them and then put the calculated values at the specified position","body":"As the groups 2 to 7 should be null. But there is for example in group 3 the String &quot;0&quot; wich is the last digit of the 190 of the initial string. Even if the overall match is the one i wanted. I dont really need all the groups. but I need to get group 3 and group 7 and I need to calculate something with them and then put the calculated values at the specified position"},{"owner":{"account_id":1494484,"reputation":56249,"user_id":1400768,"display_name":"nhahtdh"},"score":0,"creation_date":1359551779,"post_id":14602518,"comment_id":20391336,"body_markdown":"@lugges: How come the regex you put separately is different from the regex in your code?","body":"@lugges: How come the regex you put separately is different from the regex in your code?"},{"owner":{"account_id":2305505,"reputation":13,"user_id":2024867,"display_name":"lugges"},"score":0,"creation_date":1359552383,"post_id":14602518,"comment_id":20391673,"body_markdown":"Thats because in my original code I build the regex from different arrays and i used the print method and put it here as a constant. I removed the round brackets around the &#176;C in the initial post and in my code. Is there another difference that im missing?","body":"Thats because in my original code I build the regex from different arrays and i used the print method and put it here as a constant. I removed the round brackets around the &#176;C in the initial post and in my code. Is there another difference that im missing?"}],"answers":[{"comments":[{"owner":{"account_id":2305505,"reputation":13,"user_id":2024867,"display_name":"lugges"},"score":0,"creation_date":1359556884,"post_id":14606318,"comment_id":20394228,"body_markdown":"Thanks. Good to know that I understood it right and that the behaviour is not logic. Do you have any sugestions for me how i could get a better result suitable for my situation","body":"Thanks. Good to know that I understood it right and that the behaviour is not logic. Do you have any sugestions for me how i could get a better result suitable for my situation"}],"tags":[],"owner":{"account_id":1494484,"reputation":56249,"user_id":1400768,"display_name":"nhahtdh"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1359558812,"creation_date":1359555941,"answer_id":14606318,"question_id":14602518,"body_markdown":"This seems to be a bug (or feature?) in Java&#39;s implementation. It doesn&#39;t seem to reset the captured text for the capturing group when the matching has to be redone from the next index.\r\n\r\nThis test reveals the discrepancy in behavior between Java regex engine and PHP&#39;s PCRE.\r\n\r\n- Regex: `(\\d+(-\\d+)?){1}+(?!x)`\r\n- Input: `34 34-43x 78 90`\r\n- Java result: 3 matches (`34`, `78`, `90`). The 2nd capturing group of the 2nd match is `-43`. The 2nd capturing group captures nothing for 1st and 3rd match.\r\n- [PHP result](http://www.regex101.com/r/zB9oK3): Also the same 3 matches, but 2nd capturing group captures nothing for all matches. For PHP&#39;s PCRE implementation, when the match has to be redone, the captured text of the capturing groups are reset.\r\n\r\nThis is tested this on JRE 6 Update 37 and JRE 7 Update 11.\r\n\r\nSame result for this, just to prove the point that captured text is not reset when matching has to be redone:\r\n\r\n- Regex: `a(\\d+(-\\d+)?){1}+(?!x)`\r\n- Input: `a34 a34-43x a78 a90`\r\n- [PHP result](http://www.regex101.com/r/zH7gL1)\r\n\r\n**Some comment about your regex**\r\n\r\nI think the `++` should be `{1}+`, since it seems that you want to modify one number or one range of number at a time, while making the match possessive to discard unwanted numbers.\r\n\r\n**Workaround**\r\n\r\nThe first group (the outer most capturing group), which captures everything (one number or a range of number), will always be overwritten when a match is found. Hence you can rely on it. You can check whether there exist a `-` in the group 1 (with `contains` method). If there is, then you can tell that capturing group 2 contains captured text from the current match, and you can use the captured text. If there is not, then you can ignore all the captured text in capturing group 2 and its nested capturing groups.","title":"Regular Expression in Java. Unexpected behaviour","body":"<p>This seems to be a bug (or feature?) in Java's implementation. It doesn't seem to reset the captured text for the capturing group when the matching has to be redone from the next index.</p>\n\n<p>This test reveals the discrepancy in behavior between Java regex engine and PHP's PCRE.</p>\n\n<ul>\n<li>Regex: <code>(\\d+(-\\d+)?){1}+(?!x)</code></li>\n<li>Input: <code>34 34-43x 78 90</code></li>\n<li>Java result: 3 matches (<code>34</code>, <code>78</code>, <code>90</code>). The 2nd capturing group of the 2nd match is <code>-43</code>. The 2nd capturing group captures nothing for 1st and 3rd match.</li>\n<li><a href=\"http://www.regex101.com/r/zB9oK3\" rel=\"nofollow\">PHP result</a>: Also the same 3 matches, but 2nd capturing group captures nothing for all matches. For PHP's PCRE implementation, when the match has to be redone, the captured text of the capturing groups are reset.</li>\n</ul>\n\n<p>This is tested this on JRE 6 Update 37 and JRE 7 Update 11.</p>\n\n<p>Same result for this, just to prove the point that captured text is not reset when matching has to be redone:</p>\n\n<ul>\n<li>Regex: <code>a(\\d+(-\\d+)?){1}+(?!x)</code></li>\n<li>Input: <code>a34 a34-43x a78 a90</code></li>\n<li><a href=\"http://www.regex101.com/r/zH7gL1\" rel=\"nofollow\">PHP result</a></li>\n</ul>\n\n<p><strong>Some comment about your regex</strong></p>\n\n<p>I think the <code>++</code> should be <code>{1}+</code>, since it seems that you want to modify one number or one range of number at a time, while making the match possessive to discard unwanted numbers.</p>\n\n<p><strong>Workaround</strong></p>\n\n<p>The first group (the outer most capturing group), which captures everything (one number or a range of number), will always be overwritten when a match is found. Hence you can rely on it. You can check whether there exist a <code>-</code> in the group 1 (with <code>contains</code> method). If there is, then you can tell that capturing group 2 contains captured text from the current match, and you can use the captured text. If there is not, then you can ignore all the captured text in capturing group 2 and its nested capturing groups.</p>\n"}],"owner":{"account_id":2305505,"reputation":13,"user_id":2024867,"display_name":"lugges"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":222,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":14606318,"answer_count":1,"score":1,"last_activity_date":1692854544,"creation_date":1359544040,"question_id":14602518,"body_markdown":"I am trying to match mostly numbers, but depending on the Words which follow the Expression I need to make a difference.\r\n\r\nI match every Number which is not followed by a Temperature Term like &#176;C or a Time Specification. \r\nMy Regular Expression looks like this:\r\n\r\n    (((\\d+?)(\\s*)(\\-)(\\s*))?(\\d+)(\\s*))++(?!minuten|Minuten|min|Min|Stunden|stunden|std|Std|&#176;C| &#176;C)\r\n\r\nHere is an Example:  http://regexr.com?33jeg\r\n\r\nWhile this Behavior is what I expected Java does the Following:\r\nIndex is the corresponding Group to the Match 4\r\n\r\n    0: &quot;4 &quot;1: &quot;4 &quot;2: &quot;0 - &quot;3: &quot;0&quot;4: &quot; &quot;5: &quot;-&quot;6: &quot; &quot;7: &quot;4&quot;8: &quot; &quot;9: &quot;&#176;C&quot;\r\n\r\nYou need to Know that I match every String separate. So the match for the 5 looks like this:\r\n\r\n    0: &quot;5 &quot;1: &quot;5 &quot;2: &quot;null&quot;3: &quot;null&quot;4: &quot;null&quot;5: &quot;null&quot;6: &quot;null&quot;7: &quot;5&quot;8: &quot; &quot;9: &quot;null&quot;\r\n\r\nThis is how Id like the other Match to be. This unpleasant behavior is only when a &quot;-&quot; is somewhere in the String before the Match\r\n\r\nMy Java Code is the following:\r\n\r\n    public static void adaptPortionDetails(EList&lt;Step&gt; steps, double multiplicator){\r\n\t\t\r\n\t\tString portionMatcher = &quot;(((\\\\d+?)(\\\\s*)(\\\\-)(\\\\s*))?(\\\\d+)(\\\\s*))++(?!&#176;C|Grad|minuten|Minuten|min|Min|Stunden|stunden|std|Std)&quot;;\r\n\t\t\r\n\t\tfor (int i = 0; i &lt; steps.size(); i++) {\r\n\t\t\tMatcher matcher = Pattern.compile(portionMatcher).matcher(\r\n\t\t\t\t\tsteps.get(i).getDescription());\r\n\t\t\tStringBuffer sb = new StringBuffer();\r\n\t\t\twhile (matcher.find()) {\r\n\t\t\t\tprintGroups(matcher);\r\n\t\t\t\tString newValue1Str;\r\n\t\t\t\tif (matcher.group(3) == null){\r\n\t\t\t\t\tnewValue1Str = &quot;&quot;;\r\n\t\t\t\t\tSystem.out.println(&quot;test&quot;);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdouble newValue1 = Integer.parseInt(matcher.group(3)) * multiplicator;\r\n\t\t\t\t\tnewValue1Str = Fraction.getFraction(newValue1).toProperString();\r\n\t\t\t\t}\r\n\t\t\t\tdouble newValue2 = Integer.parseInt(matcher.group(7)) * multiplicator;\r\n\t\t\t\tString newValue2Str = Fraction.getFraction(newValue2).toProperString();\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tmatcher.appendReplacement(sb, newValue1Str + &quot;$4$5$6&quot; + newValue2Str + &quot;$8&quot;);\r\n\t\t\t}\r\n\t\t\tmatcher.appendTail(sb);\r\n\t\t\tsteps.get(i).setDescription(sb.toString());\r\n\t\t}\r\n\t}\r\n\r\nHope you can tell what I&#39;m missing.","title":"Regular Expression in Java. Unexpected behaviour","body":"<p>I am trying to match mostly numbers, but depending on the Words which follow the Expression I need to make a difference.</p>\n<p>I match every Number which is not followed by a Temperature Term like °C or a Time Specification.\nMy Regular Expression looks like this:</p>\n<pre><code>(((\\d+?)(\\s*)(\\-)(\\s*))?(\\d+)(\\s*))++(?!minuten|Minuten|min|Min|Stunden|stunden|std|Std|°C| °C)\n</code></pre>\n<p>Here is an Example:  <a href=\"http://regexr.com?33jeg\" rel=\"nofollow noreferrer\">http://regexr.com?33jeg</a></p>\n<p>While this Behavior is what I expected Java does the Following:\nIndex is the corresponding Group to the Match 4</p>\n<pre><code>0: &quot;4 &quot;1: &quot;4 &quot;2: &quot;0 - &quot;3: &quot;0&quot;4: &quot; &quot;5: &quot;-&quot;6: &quot; &quot;7: &quot;4&quot;8: &quot; &quot;9: &quot;°C&quot;\n</code></pre>\n<p>You need to Know that I match every String separate. So the match for the 5 looks like this:</p>\n<pre><code>0: &quot;5 &quot;1: &quot;5 &quot;2: &quot;null&quot;3: &quot;null&quot;4: &quot;null&quot;5: &quot;null&quot;6: &quot;null&quot;7: &quot;5&quot;8: &quot; &quot;9: &quot;null&quot;\n</code></pre>\n<p>This is how Id like the other Match to be. This unpleasant behavior is only when a &quot;-&quot; is somewhere in the String before the Match</p>\n<p>My Java Code is the following:</p>\n<pre><code>public static void adaptPortionDetails(EList&lt;Step&gt; steps, double multiplicator){\n    \n    String portionMatcher = &quot;(((\\\\d+?)(\\\\s*)(\\\\-)(\\\\s*))?(\\\\d+)(\\\\s*))++(?!°C|Grad|minuten|Minuten|min|Min|Stunden|stunden|std|Std)&quot;;\n    \n    for (int i = 0; i &lt; steps.size(); i++) {\n        Matcher matcher = Pattern.compile(portionMatcher).matcher(\n                steps.get(i).getDescription());\n        StringBuffer sb = new StringBuffer();\n        while (matcher.find()) {\n            printGroups(matcher);\n            String newValue1Str;\n            if (matcher.group(3) == null){\n                newValue1Str = &quot;&quot;;\n                System.out.println(&quot;test&quot;);\n            }else{\n                double newValue1 = Integer.parseInt(matcher.group(3)) * multiplicator;\n                newValue1Str = Fraction.getFraction(newValue1).toProperString();\n            }\n            double newValue2 = Integer.parseInt(matcher.group(7)) * multiplicator;\n            String newValue2Str = Fraction.getFraction(newValue2).toProperString();\n            \n            \n            matcher.appendReplacement(sb, newValue1Str + &quot;$4$5$6&quot; + newValue2Str + &quot;$8&quot;);\n        }\n        matcher.appendTail(sb);\n        steps.get(i).setDescription(sb.toString());\n    }\n}\n</code></pre>\n<p>Hope you can tell what I'm missing.</p>\n"},{"tags":["java","regex","stringtokenizer"],"comments":[{"owner":{"account_id":325446,"reputation":17129,"user_id":646634,"accept_rate":100,"display_name":"Brian"},"score":3,"creation_date":1359339035,"post_id":14554472,"comment_id":20305148,"body_markdown":"Maybe a copy and paste error, but it could be that you&#39;re missing the quotes around your regex to make it a `String`.","body":"Maybe a copy and paste error, but it could be that you&#39;re missing the quotes around your regex to make it a <code>String</code>."},{"owner":{"account_id":357343,"reputation":54520,"user_id":697449,"accept_rate":82,"display_name":"Paul Bellora"},"score":0,"creation_date":1359340335,"post_id":14554472,"comment_id":20305403,"body_markdown":"FYI from the [docs](http://docs.oracle.com/javase/7/docs/api/java/util/StringTokenizer.html): &quot;`StringTokenizer` is a legacy class that is retained for compatibility reasons although its use is discouraged in new code. It is recommended that anyone seeking this functionality use the `split` method of `String` or the java.util.regex package instead.&quot;","body":"FYI from the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/StringTokenizer.html\" rel=\"nofollow noreferrer\">docs</a>: &quot;<code>StringTokenizer</code> is a legacy class that is retained for compatibility reasons although its use is discouraged in new code. It is recommended that anyone seeking this functionality use the <code>split</code> method of <code>String</code> or the java.util.regex package instead.&quot;"},{"owner":{"account_id":1776716,"reputation":55,"user_id":1620377,"accept_rate":80,"display_name":"Pau"},"score":0,"creation_date":1359345346,"post_id":14554472,"comment_id":20306318,"body_markdown":"Must be lack of sleep, but thanks Brian! \nIt works now -.-\n\nThe tutorial I was reading online didn&#39;t place quotations and I don&#39;t know why it didn&#39;t occur to me that t needed some. Cheers!","body":"Must be lack of sleep, but thanks Brian!  It works now -.-  The tutorial I was reading online didn&#39;t place quotations and I don&#39;t know why it didn&#39;t occur to me that t needed some. Cheers!"},{"owner":{"account_id":9760,"reputation":85860,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":1,"creation_date":1359363703,"post_id":14554472,"comment_id":20311612,"body_markdown":"@Brian You should post your comment as an answer so it can be accepted.","body":"@Brian You should post your comment as an answer so it can be accepted."}],"answers":[{"tags":[],"owner":{"account_id":325446,"reputation":17129,"user_id":646634,"accept_rate":100,"display_name":"Brian"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1359391769,"creation_date":1359391769,"answer_id":14566941,"question_id":14554472,"body_markdown":"Maybe a copy and paste error, but it could be that you&#39;re missing the quotes around your regex to make it a `String`. For example:\r\n\r\n    while ((line = br.readLine()) != null) { \r\n        StringTokenizer stringTokenizer = new StringTokenizer(line, &quot;\\n&quot;);\r\n    \r\n        while (stringTokenizer.hasMoreElements()) {\r\n            String function = stringTokenizer.nextElement().toString();\r\n    \r\n            if (function.matches(&quot;\\\\s*(unsigned int|float|int|char|void|double)(\\\\s)+[a-zA-Z_](\\\\w)*(\\\\s)*\\\\((\\\\s)*((((unsigned int|float|int|char|double)(\\\\s)*,(\\\\s)*)*((unsigned int|float|int|char|double)(\\\\s)*))|(\\\\s)*|(void)(\\\\s)*)\\\\)(\\\\s)*\\\\;&quot;)) {\r\n                System.out.println(&quot;VALID - &quot;);\r\n            }\r\n        }\r\n    }","title":"Regex and StringTokenizer Syntax Error","body":"<p>Maybe a copy and paste error, but it could be that you're missing the quotes around your regex to make it a <code>String</code>. For example:</p>\n\n<pre><code>while ((line = br.readLine()) != null) { \n    StringTokenizer stringTokenizer = new StringTokenizer(line, \"\\n\");\n\n    while (stringTokenizer.hasMoreElements()) {\n        String function = stringTokenizer.nextElement().toString();\n\n        if (function.matches(\"\\\\s*(unsigned int|float|int|char|void|double)(\\\\s)+[a-zA-Z_](\\\\w)*(\\\\s)*\\\\((\\\\s)*((((unsigned int|float|int|char|double)(\\\\s)*,(\\\\s)*)*((unsigned int|float|int|char|double)(\\\\s)*))|(\\\\s)*|(void)(\\\\s)*)\\\\)(\\\\s)*\\\\;\")) {\n            System.out.println(\"VALID - \");\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1489010,"reputation":7802,"user_id":1396594,"accept_rate":67,"display_name":"exexzian"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1359392853,"creation_date":1359392853,"answer_id":14567301,"question_id":14554472,"body_markdown":"  [`matches` method][1] takes `String` as method argument... So, enclose your regex withing quoutes **&quot; &quot;** \r\nlike this:\r\n  \r\n\r\n    function.matches(&quot;\\\\s*(unsigned int|float|int|char|void|double)(\\\\s)+[a-zA-Z_](\\\\w)*(\\\\s)*\\\\((\\\\s)*((((unsigned int|float|int|char|double)(\\\\s)*,(\\\\s)*)*((unsigned int|float|int|char|double)(\\\\s)*))|(\\\\s)*|(void)(\\\\s)*)\\\\)(\\\\s)*\\\\;)&quot;)\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#matches%28java.lang.String%29","title":"Regex and StringTokenizer Syntax Error","body":"<p><a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#matches%28java.lang.String%29\" rel=\"nofollow\"><code>matches</code> method</a> takes <code>String</code> as method argument... So, enclose your regex withing quoutes <strong>\" \"</strong> \nlike this:</p>\n\n<pre><code>function.matches(\"\\\\s*(unsigned int|float|int|char|void|double)(\\\\s)+[a-zA-Z_](\\\\w)*(\\\\s)*\\\\((\\\\s)*((((unsigned int|float|int|char|double)(\\\\s)*,(\\\\s)*)*((unsigned int|float|int|char|double)(\\\\s)*))|(\\\\s)*|(void)(\\\\s)*)\\\\)(\\\\s)*\\\\;)\")\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2219344,"reputation":2652,"user_id":1959181,"display_name":"Edgard Leal"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1359394731,"creation_date":1359394731,"answer_id":14567861,"question_id":14554472,"body_markdown":"enclose your string withing quotes **&quot; &quot;**, And note that when using the operator &quot;or&quot; (|) for two consecutive words, we should use them in parenthesis `((unsigned int) | float)`\r\n\r\n&lt;br&gt;\r\n\r\n    while ((line = br.readLine()) != null) { \r\n    StringTokenizer stringTokenizer = new StringTokenizer(line, &quot;\\n&quot;);\r\n\r\n    while (stringTokenizer.hasMoreElements()) {\r\n        String function = stringTokenizer.nextElement().toString();\r\n\r\n        if (function.matches(&quot;\\\\s*((unsigned int)|float|int|char|void|double)(\\\\s)+[a-zA-Z_](\\\\w)*(\\\\s)*\\\\((\\\\s)*((((unsigned int|float|int|char|double)(\\\\s)*,(\\\\s)*)*((unsigned int|float|int|char|double)(\\\\s)*))|(\\\\s)*|(void)(\\\\s)*)\\\\)(\\\\s)*\\\\;&quot;)) {\r\n            System.out.println(&quot;VALID - &quot;);\r\n        }\r\n    }\r\n}","title":"Regex and StringTokenizer Syntax Error","body":"<p>enclose your string withing quotes <strong>\" \"</strong>, And note that when using the operator \"or\" (|) for two consecutive words, we should use them in parenthesis <code>((unsigned int) | float)</code></p>\n\n<p><br></p>\n\n<pre><code>while ((line = br.readLine()) != null) { \nStringTokenizer stringTokenizer = new StringTokenizer(line, \"\\n\");\n\nwhile (stringTokenizer.hasMoreElements()) {\n    String function = stringTokenizer.nextElement().toString();\n\n    if (function.matches(\"\\\\s*((unsigned int)|float|int|char|void|double)(\\\\s)+[a-zA-Z_](\\\\w)*(\\\\s)*\\\\((\\\\s)*((((unsigned int|float|int|char|double)(\\\\s)*,(\\\\s)*)*((unsigned int|float|int|char|double)(\\\\s)*))|(\\\\s)*|(void)(\\\\s)*)\\\\)(\\\\s)*\\\\;\")) {\n        System.out.println(\"VALID - \");\n    }\n}\n</code></pre>\n\n<p>}</p>\n"}],"owner":{"account_id":1776716,"reputation":55,"user_id":1620377,"accept_rate":80,"display_name":"Pau"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":315,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":14567861,"answer_count":3,"score":-2,"last_activity_date":1692854474,"creation_date":1359338591,"question_id":14554472,"body_markdown":"I&#39;m new to regular expressions and `StringTokenizer`, and I&#39;m getting a syntax error whenever I put this regex in `matches`:\r\n\r\n    while ((line = br.readLine()) != null) { \r\n        StringTokenizer stringTokenizer = new StringTokenizer(line, &quot;\\n&quot;);\r\n \r\n        while (stringTokenizer.hasMoreElements()) {\r\n            String function = stringTokenizer.nextElement().toString();\r\n\r\n            if (function.matches(\\\\s*(unsigned int|float|int|char|void|double)(\\\\s)+[a-zA-Z_](\\\\w)*(\\\\s)*\\\\((\\\\s)*((((unsigned int|float|int|char|double)(\\\\s)*,(\\\\s)*)*((unsigned int|float|int|char|double)(\\\\s)*))|(\\\\s)*|(void)(\\\\s)*)\\\\)(\\\\s)*\\\\;)) {\r\n                System.out.println(&quot;VALID - &quot;);\r\n            }\r\n        }\r\n    }","title":"Regex and StringTokenizer Syntax Error","body":"<p>I'm new to regular expressions and <code>StringTokenizer</code>, and I'm getting a syntax error whenever I put this regex in <code>matches</code>:</p>\n\n<pre><code>while ((line = br.readLine()) != null) { \n    StringTokenizer stringTokenizer = new StringTokenizer(line, \"\\n\");\n\n    while (stringTokenizer.hasMoreElements()) {\n        String function = stringTokenizer.nextElement().toString();\n\n        if (function.matches(\\\\s*(unsigned int|float|int|char|void|double)(\\\\s)+[a-zA-Z_](\\\\w)*(\\\\s)*\\\\((\\\\s)*((((unsigned int|float|int|char|double)(\\\\s)*,(\\\\s)*)*((unsigned int|float|int|char|double)(\\\\s)*))|(\\\\s)*|(void)(\\\\s)*)\\\\)(\\\\s)*\\\\;)) {\n            System.out.println(\"VALID - \");\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","string","java-11","string-comparison"],"comments":[{"owner":{"account_id":8666367,"reputation":9194,"user_id":6486738,"accept_rate":100,"display_name":"Ted Klein Bergman"},"score":0,"creation_date":1692859107,"post_id":76966315,"comment_id":135681603,"body_markdown":"@MadProgrammer The linked question is not a duplicate. I suggest to reopen it.","body":"@MadProgrammer The linked question is not a duplicate. I suggest to reopen it."},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1692860493,"post_id":76966315,"comment_id":135681825,"body_markdown":"@TedKleinBergman Feel free to cast a re-open vote","body":"@TedKleinBergman Feel free to cast a re-open vote"},{"owner":{"account_id":8666367,"reputation":9194,"user_id":6486738,"accept_rate":100,"display_name":"Ted Klein Bergman"},"score":0,"creation_date":1692860773,"post_id":76966315,"comment_id":135681865,"body_markdown":"@MadProgrammer I can&#39;t cast another; I&#39;ve already cast one before for this question due to it being closed as duplicated with the same question.","body":"@MadProgrammer I can&#39;t cast another; I&#39;ve already cast one before for this question due to it being closed as duplicated with the same question."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1692869932,"post_id":76966315,"comment_id":135683694,"body_markdown":"Do you understand what the term “string literal” means? None of your methods returns a string literal. There is only one string literal in your code (`&quot;&quot;`) but no `return &quot;&quot;;` statement. Neither `n + &quot;&quot;` nor `10 + &quot;&quot;` are string literals.","body":"Do you understand what the term “string literal” means? None of your methods returns a string literal. There is only one string literal in your code (<code>&quot;&quot;</code>) but no <code>return &quot;&quot;;</code> statement. Neither <code>n + &quot;&quot;</code> nor <code>10 + &quot;&quot;</code> are string literals."},{"owner":{"account_id":17530239,"reputation":1,"user_id":12714421,"display_name":"ko-hs"},"score":0,"creation_date":1692874612,"post_id":76966315,"comment_id":135684598,"body_markdown":"@Holger You are correct. I was confusing String and String literal. \n\nNow I understand that a string literal is a fixed string value within the code.\n\nBut based on this understanding, `10 + &quot;&quot;` is a fixed string value within the code, so it is a string literal. Isn&#39;t that correct?","body":"@Holger You are correct. I was confusing String and String literal.   Now I understand that a string literal is a fixed string value within the code.  But based on this understanding, <code>10 + &quot;&quot;</code> is a fixed string value within the code, so it is a string literal. Isn&#39;t that correct?"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1692875173,"post_id":76966315,"comment_id":135684702,"body_markdown":"A string literal is a syntactic construct of the source code. Only `&quot;10&quot;` is a string literal. In contrast, `10 + &quot;&quot;` is an *expression*, but its value is a *compile-time constant*. So both, `&quot;10&quot;` and `10 + &quot;&quot;` are compile-time constants with the same value and hence, guaranteed to refer to the same `String` object at runtime. The source code form doesn’t matter, in other words, it doesn’t need to be a string literal. It has to be a compile-time constant, as specified in [this section of the specification](https://docs.oracle.com/javase/specs/jls/se20/html/jls-15.html#jls-15.29)","body":"A string literal is a syntactic construct of the source code. Only <code>&quot;10&quot;</code> is a string literal. In contrast, <code>10 + &quot;&quot;</code> is an <i>expression</i>, but its value is a <i>compile-time constant</i>. So both, <code>&quot;10&quot;</code> and <code>10 + &quot;&quot;</code> are compile-time constants with the same value and hence, guaranteed to refer to the same <code>String</code> object at runtime. The source code form doesn’t matter, in other words, it doesn’t need to be a string literal. It has to be a compile-time constant, as specified in <a href=\"https://docs.oracle.com/javase/specs/jls/se20/html/jls-15.html#jls-15.29\" rel=\"nofollow noreferrer\">this section of the specification</a>"}],"answers":[{"comments":[{"owner":{"account_id":370994,"reputation":35154,"user_id":719263,"accept_rate":100,"display_name":"Jean-Baptiste Yun&#232;s"},"score":0,"creation_date":1693552868,"post_id":76966390,"comment_id":135778909,"body_markdown":"You may add the use of `intern()` in the first case to ensure that the strings will be the same object. `getString(...).intern()`.","body":"You may add the use of <code>intern()</code> in the first case to ensure that the strings will be the same object. <code>getString(...).intern()</code>."}],"tags":[],"owner":{"account_id":8666367,"reputation":9194,"user_id":6486738,"accept_rate":100,"display_name":"Ted Klein Bergman"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1692854367,"creation_date":1692854367,"answer_id":76966390,"question_id":76966315,"body_markdown":"The string pool is for strings known at compile-time. Case 2 and 3 are known.\r\n\r\nCase 2 always return the string `10 + &quot;&quot;`, so it can be interned.\r\nCase 3 always store the string `10 + &quot;&quot;`, so it can be interned.\r\n\r\nCase 1, however, returns `n + &quot;&quot;` where n can be anything. It wouldn’t make sense for the compiler to store all strings possible for all values of n. Therefore, it is stored in the heap.\r\n\r\nEven if in this simple case, we know that case 1 is `10 + &quot;&quot;` as well, but it would be a bit complicated to go over all functions in your program to try and pre-calculate strings.","title":"Problems when comparing Strings using the &quot;==&quot; operator (Java 11)","body":"<p>The string pool is for strings known at compile-time. Case 2 and 3 are known.</p>\n<p>Case 2 always return the string <code>10 + &quot;&quot;</code>, so it can be interned.\nCase 3 always store the string <code>10 + &quot;&quot;</code>, so it can be interned.</p>\n<p>Case 1, however, returns <code>n + &quot;&quot;</code> where n can be anything. It wouldn’t make sense for the compiler to store all strings possible for all values of n. Therefore, it is stored in the heap.</p>\n<p>Even if in this simple case, we know that case 1 is <code>10 + &quot;&quot;</code> as well, but it would be a bit complicated to go over all functions in your program to try and pre-calculate strings.</p>\n"}],"owner":{"account_id":17530239,"reputation":1,"user_id":12714421,"display_name":"ko-hs"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1692854606,"accepted_answer_id":76966390,"answer_count":1,"score":-3,"last_activity_date":1692854367,"creation_date":1692853016,"question_id":76966315,"body_markdown":"I&#39;m a newbie to Java. Now I&#39;m studying &quot;==&quot; operator with String.\r\n\r\nI know that in java, string literals are stored in String Pool in Heap area to achieve immutability and memory saving. And I know that if I use the &quot;new&quot; keyword, it is stored in the Heap area, not the String pool.\r\n\r\nIn the code below case_1, case_2, case_3 all return the same string literal. So I expected everything to print true. But for case_1 it printed false.\r\n\r\nMy question is:\r\n- Since case_1, 2, and 3 all return the same string literal, they all point to the same address in the string pool, so it should output true, but why does it output false for case_1?\r\n\r\nIf possible, please answer with reference to the String pool in the Heap.\r\n\r\nThanks!\r\n\r\n```\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        MyString ms = new MyString();\r\n\r\n        String str1 = ms.getString1(10);\r\n        String str11 = ms.getString1(10);\r\n\r\n        String str2 = ms.getString2();\r\n        String str22 = ms.getString2();\r\n\r\n        String str3 = 10 + &quot;&quot;;\r\n        String str33 = 10 + &quot;&quot;;\r\n\r\n        System.out.println(str1 == str11); // case_1\r\n        System.out.println(str2 == str22); // case_2\r\n        System.out.println(str3 == str33); // case_3\r\n    }\r\n}\r\n\r\nclass MyString {\r\n    String getString1(int n) {\r\n        return n + &quot;&quot;;\r\n    }\r\n\r\n    String getString2() {\r\n        return 10 + &quot;&quot;;\r\n    }\r\n}\r\n```\r\n\r\nI expected the following\r\n```\r\ntrue\r\ntrue\r\ntrue\r\n```\r\n\r\nbut the actual output like this\r\n```\r\nfalse\r\ntrue\r\ntrue\r\n```\r\n","title":"Problems when comparing Strings using the &quot;==&quot; operator (Java 11)","body":"<p>I'm a newbie to Java. Now I'm studying &quot;==&quot; operator with String.</p>\n<p>I know that in java, string literals are stored in String Pool in Heap area to achieve immutability and memory saving. And I know that if I use the &quot;new&quot; keyword, it is stored in the Heap area, not the String pool.</p>\n<p>In the code below case_1, case_2, case_3 all return the same string literal. So I expected everything to print true. But for case_1 it printed false.</p>\n<p>My question is:</p>\n<ul>\n<li>Since case_1, 2, and 3 all return the same string literal, they all point to the same address in the string pool, so it should output true, but why does it output false for case_1?</li>\n</ul>\n<p>If possible, please answer with reference to the String pool in the Heap.</p>\n<p>Thanks!</p>\n<pre><code>public class Main {\n    public static void main(String[] args) {\n        MyString ms = new MyString();\n\n        String str1 = ms.getString1(10);\n        String str11 = ms.getString1(10);\n\n        String str2 = ms.getString2();\n        String str22 = ms.getString2();\n\n        String str3 = 10 + &quot;&quot;;\n        String str33 = 10 + &quot;&quot;;\n\n        System.out.println(str1 == str11); // case_1\n        System.out.println(str2 == str22); // case_2\n        System.out.println(str3 == str33); // case_3\n    }\n}\n\nclass MyString {\n    String getString1(int n) {\n        return n + &quot;&quot;;\n    }\n\n    String getString2() {\n        return 10 + &quot;&quot;;\n    }\n}\n</code></pre>\n<p>I expected the following</p>\n<pre><code>true\ntrue\ntrue\n</code></pre>\n<p>but the actual output like this</p>\n<pre><code>false\ntrue\ntrue\n</code></pre>\n"},{"tags":["java","regex","replace"],"answers":[{"comments":[{"owner":{"account_id":2259955,"reputation":952,"user_id":1990297,"accept_rate":81,"display_name":"chrixm"},"score":0,"creation_date":1358523446,"post_id":14398759,"comment_id":20039132,"body_markdown":"Thank you for pointing out the obvious :) I assumed it would work the same as find() and not perform a reset, but it works as documented. I have now ended up using a non-region based solution which checks that start() and end() are within my selection.","body":"Thank you for pointing out the obvious :) I assumed it would work the same as find() and not perform a reset, but it works as documented. I have now ended up using a non-region based solution which checks that start() and end() are within my selection."},{"owner":{"account_id":2050891,"reputation":8031,"user_id":1829943,"accept_rate":84,"display_name":"CoffeDeveloper"},"score":0,"creation_date":1405621612,"post_id":14398759,"comment_id":38513273,"body_markdown":"I just had to deal with Matcher class these days, and is rather one of the most bad designed official class I ever seen. Tasks that are simple to do reading char by char (for instance, splitting string after special characters or white spaces) becomes hell to do with this class (that also lack significative usage examples).\nSee this question:\nhttp://stackoverflow.com/questions/24772860/how-to-create-a-tokenizer-with-the-util-regex-matcher-java\nAnother thing that you can get only by trial and test is what is region and internal state.","body":"I just had to deal with Matcher class these days, and is rather one of the most bad designed official class I ever seen. Tasks that are simple to do reading char by char (for instance, splitting string after special characters or white spaces) becomes hell to do with this class (that also lack significative usage examples). See this question: <a href=\"http://stackoverflow.com/questions/24772860/how-to-create-a-tokenizer-with-the-util-regex-matcher-java\" title=\"how to create a tokenizer with the util regex matcher java\">stackoverflow.com/questions/24772860/&hellip;</a> Another thing that you can get only by trial and test is what is region and internal state."}],"tags":[],"owner":{"account_id":1114067,"reputation":196801,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1358511328,"creation_date":1358511328,"answer_id":14398759,"question_id":14398683,"body_markdown":"From the [Javadoc][1]:\r\n\r\n`public boolean find(int start)`\r\n\r\n&gt;**Resets** this matcher and then [...]\r\n\r\n(emphasis mine)\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#find%28int%29","title":"Matcher.find (int start) not working within a region","body":"<p>From the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#find%28int%29\" rel=\"nofollow\">Javadoc</a>:</p>\n\n<p><code>public boolean find(int start)</code></p>\n\n<blockquote>\n  <p><strong>Resets</strong> this matcher and then [...]</p>\n</blockquote>\n\n<p>(emphasis mine)</p>\n"}],"owner":{"account_id":2259955,"reputation":952,"user_id":1990297,"accept_rate":81,"display_name":"chrixm"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1375,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":14398759,"answer_count":1,"score":2,"last_activity_date":1692854357,"creation_date":1358511069,"question_id":14398683,"body_markdown":"I am trying to match within a selection in a JTextArea and I am using Matcher.region() to define the boundary of my match:\r\n\r\n    JTextComponent t;\r\n\r\n    Pattern p = Pattern.compile(&quot;string&quot;, Pattern.CASE_INSENSITIVE | Pattern.MULTILINE);\r\n    Matcher m = p.matcher(t.getText()).region(t.getSelectionStart(), t.getSelectionEnd());\r\n    m.useAnchoringBounds(false);\r\n\r\n    if(m.find()) {\r\n      System.out.println(&quot;Found match from &quot; + m.start() + &quot; to &quot; + m.end());\r\n    }\r\n    else {\r\n      System.out.println(&quot;No match found&quot;);\r\n    }\r\n\r\nThe above works as expected and it will find the first match within the region - if no match is found then it doesn&#39;t find a match.\r\n\r\nHowever, I am trying to loop through the matches within the region (search and replace type function) and if I specify a start position to find() that is within the region then it matches outside of the region:\r\n\r\n    int cPos = m.regionStart();\r\n    if (m.find(cPos) || m.find(m.regionStart())) {\r\n      System.out.println(&quot;Found match from &quot; + m.start() + &quot; to &quot; + m.end());\r\n      cPos = m.end();\r\n    }\r\n    else {\r\n      System.out.println(&quot;No match found&quot;);\r\n    }\r\n\r\nIs this a bug or am I breaking the region if I specify a start position - even if it is contained within the region?\r\n","title":"Matcher.find (int start) not working within a region","body":"<p>I am trying to match within a selection in a JTextArea and I am using Matcher.region() to define the boundary of my match:</p>\n<pre><code>JTextComponent t;\n\nPattern p = Pattern.compile(&quot;string&quot;, Pattern.CASE_INSENSITIVE | Pattern.MULTILINE);\nMatcher m = p.matcher(t.getText()).region(t.getSelectionStart(), t.getSelectionEnd());\nm.useAnchoringBounds(false);\n\nif(m.find()) {\n  System.out.println(&quot;Found match from &quot; + m.start() + &quot; to &quot; + m.end());\n}\nelse {\n  System.out.println(&quot;No match found&quot;);\n}\n</code></pre>\n<p>The above works as expected and it will find the first match within the region - if no match is found then it doesn't find a match.</p>\n<p>However, I am trying to loop through the matches within the region (search and replace type function) and if I specify a start position to find() that is within the region then it matches outside of the region:</p>\n<pre><code>int cPos = m.regionStart();\nif (m.find(cPos) || m.find(m.regionStart())) {\n  System.out.println(&quot;Found match from &quot; + m.start() + &quot; to &quot; + m.end());\n  cPos = m.end();\n}\nelse {\n  System.out.println(&quot;No match found&quot;);\n}\n</code></pre>\n<p>Is this a bug or am I breaking the region if I specify a start position - even if it is contained within the region?</p>\n"},{"tags":["java","regex"],"answers":[{"comments":[{"owner":{"account_id":9226,"reputation":30034,"user_id":16959,"accept_rate":89,"display_name":"Jason Sperske"},"score":1,"creation_date":1358470167,"post_id":14390768,"comment_id":20019442,"body_markdown":"Could this work `Pattern pattern = Pattern.compile(&quot;^[a-zA-Z\\300-\\3770-9\\u0153\\346 \\u002F.&#39;\\\\-\\\\\\\\]*$&quot;);` ?  Back slashes need to be quadruple escaped when written as Java Strings","body":"Could this work <code>Pattern pattern = Pattern.compile(&quot;^[a-zA-Z\\300-\\3770-9\\u0153\\346 \\u002F.&#39;\\\\-\\\\\\\\]*$&quot;);</code> ?  Back slashes need to be quadruple escaped when written as Java Strings"},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":0,"creation_date":1358470265,"post_id":14390768,"comment_id":20019465,"body_markdown":"@JasonSperske Good point with `\\\\\\\\]` in case OP wants to include \\ in his characters class.","body":"@JasonSperske Good point with <code>\\\\\\\\]</code> in case OP wants to include \\ in his characters class."},{"owner":{"account_id":410237,"reputation":12627,"user_id":781965,"accept_rate":72,"display_name":"Jeff"},"score":0,"creation_date":1358470583,"post_id":14390768,"comment_id":20019538,"body_markdown":"@JasonSperske If you want to include `-` as a character, you can just put it at the end. If there&#39;s nothing after it in the character class it will be assumed not to be acting as an operator.","body":"@JasonSperske If you want to include <code>-</code> as a character, you can just put it at the end. If there&#39;s nothing after it in the character class it will be assumed not to be acting as an operator."},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":0,"creation_date":1358470936,"post_id":14390768,"comment_id":20019625,"body_markdown":"@Jeff from what I heard placing `-` at the end or start of character class works for Java but it might be not good practice since not all languages/regex engines accept this way of using it. So it is better to explicit escape its special meaning.","body":"@Jeff from what I heard placing <code>-</code> at the end or start of character class works for Java but it might be not good practice since not all languages/regex engines accept this way of using it. So it is better to explicit escape its special meaning."},{"owner":{"account_id":1029549,"reputation":59,"user_id":1038148,"accept_rate":71,"display_name":"Joseph Vance"},"score":0,"creation_date":1358471091,"post_id":14390768,"comment_id":20019668,"body_markdown":"@Jeff correct. I wanted to include that so I kept it at the end.","body":"@Jeff correct. I wanted to include that so I kept it at the end."},{"owner":{"account_id":410237,"reputation":12627,"user_id":781965,"accept_rate":72,"display_name":"Jeff"},"score":0,"creation_date":1358471377,"post_id":14390768,"comment_id":20019745,"body_markdown":"I don&#39;t know about other languages/regex engines, so I&#39;ll have to take your word for that, but it&#39;s also less maintainable as the minute someone comes along and puts something after it it can cause fairly subtle errors, so I think you&#39;re probably right actually.","body":"I don&#39;t know about other languages/regex engines, so I&#39;ll have to take your word for that, but it&#39;s also less maintainable as the minute someone comes along and puts something after it it can cause fairly subtle errors, so I think you&#39;re probably right actually."}],"tags":[],"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"comment_count":6,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1358470433,"creation_date":1358469991,"answer_id":14390768,"question_id":14390722,"body_markdown":"It is hard to say what are you trying to achieve, but I can see few strange things in your regex:\r\n\r\n 1. you have opened class of characters but never closed it. Instead you used `\\\\]` which makes `]` normal character. \r\n - If you want to include `]` in your characters class then you need additional `]` at the end, like `&quot;^[a-zA-Z\\300-\\3770-9\\u0153\\346 \\u002F.&#39;-\\\\]]*$&quot;`\r\n - if you want to include `\\` in your characters class then you need to use `\\\\\\\\` version, because you need to escape its special meaning two times, in regex engine, and in Javas String\r\n 2. you used `-` with (`&#39;-\\\\]`) which in character class is used to specify range of characters like `a-z` or `A-Z`. To escape its special meaning you need to use `\\\\-`","title":"java regex pattern unclosed character class","body":"<p>It is hard to say what are you trying to achieve, but I can see few strange things in your regex:</p>\n\n<ol>\n<li>you have opened class of characters but never closed it. Instead you used <code>\\\\]</code> which makes <code>]</code> normal character. \n<ul>\n<li>If you want to include <code>]</code> in your characters class then you need additional <code>]</code> at the end, like <code>\"^[a-zA-Z\\300-\\3770-9\\u0153\\346 \\u002F.'-\\\\]]*$\"</code></li>\n<li>if you want to include <code>\\</code> in your characters class then you need to use <code>\\\\\\\\</code> version, because you need to escape its special meaning two times, in regex engine, and in Javas String</li>\n</ul></li>\n<li>you used <code>-</code> with (<code>'-\\\\]</code>) which in character class is used to specify range of characters like <code>a-z</code> or <code>A-Z</code>. To escape its special meaning you need to use <code>\\\\-</code></li>\n</ol>\n"},{"comments":[{"owner":{"account_id":1029549,"reputation":59,"user_id":1038148,"accept_rate":71,"display_name":"Joseph Vance"},"score":0,"creation_date":1358471051,"post_id":14390835,"comment_id":20019655,"body_markdown":"I think everyone hit on. I didn&#39;t realize I would need to quadruple &#39;\\&#39; to achieve that backslash in my regex. I appreciate everyone&#39;s input.","body":"I think everyone hit on. I didn&#39;t realize I would need to quadruple &#39;\\&#39; to achieve that backslash in my regex. I appreciate everyone&#39;s input."}],"tags":[],"owner":{"account_id":410237,"reputation":12627,"user_id":781965,"accept_rate":72,"display_name":"Jeff"},"comment_count":1,"down_vote_count":0,"up_vote_count":23,"is_accepted":true,"score":23,"last_activity_date":1358470404,"creation_date":1358470404,"answer_id":14390835,"question_id":14390722,"body_markdown":"Assuming that you want to match `\\` and `-` and not `]`:\r\n\r\n    Pattern pattern = Pattern.compile(&quot;^[a-zA-Z\\300-\\3770-9\\u0153\\346 \\u002F.&#39;\\\\\\\\-]*$&quot;);\r\n\r\nYou need to double escape your backslashes, as `\\` is also an escape character in regex. Thus `\\\\]` escapes the backslash for java but not for regex. You need to add another java-escaped `\\` in order to regex-escape your second java-escaped `\\`.\r\n\r\nSo `\\\\\\\\` after java escaping becomes `\\\\` which is then regex escaped to `\\`.\r\n\r\nMoving `-` to the end of the sequence means that it is used as a character, instead of a range operator as pointed out by Pshemo.","title":"java regex pattern unclosed character class","body":"<p>Assuming that you want to match <code>\\</code> and <code>-</code> and not <code>]</code>:</p>\n\n<pre><code>Pattern pattern = Pattern.compile(\"^[a-zA-Z\\300-\\3770-9\\u0153\\346 \\u002F.'\\\\\\\\-]*$\");\n</code></pre>\n\n<p>You need to double escape your backslashes, as <code>\\</code> is also an escape character in regex. Thus <code>\\\\]</code> escapes the backslash for java but not for regex. You need to add another java-escaped <code>\\</code> in order to regex-escape your second java-escaped <code>\\</code>.</p>\n\n<p>So <code>\\\\\\\\</code> after java escaping becomes <code>\\\\</code> which is then regex escaped to <code>\\</code>.</p>\n\n<p>Moving <code>-</code> to the end of the sequence means that it is used as a character, instead of a range operator as pointed out by Pshemo.</p>\n"}],"owner":{"account_id":1029549,"reputation":59,"user_id":1038148,"accept_rate":71,"display_name":"Joseph Vance"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":25865,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":14390835,"answer_count":2,"score":5,"last_activity_date":1692854287,"creation_date":1358469623,"question_id":14390722,"body_markdown":"I need some help. Im getting:\r\n\r\n    Caused by: java.util.regex.PatternSyntaxException: Unclosed character class near index 24\r\n    ^[a-zA-Z└-&#160;0-9&#163;&#181; /.&#39;-\\]*$\r\n                            ^\r\n            at java.util.regex.Pattern.error(Pattern.java:1713)\r\n            at java.util.regex.Pattern.clazz(Pattern.java:2254)\r\n            at java.util.regex.Pattern.sequence(Pattern.java:1818)\r\n            at java.util.regex.Pattern.expr(Pattern.java:1752)\r\n            at java.util.regex.Pattern.compile(Pattern.java:1460)\r\n            at java.util.regex.Pattern.&lt;init&gt;(Pattern.java:1133)\r\n            at java.util.regex.Pattern.compile(Pattern.java:823)\r\n\r\nHere is my code:\r\n\r\n\tString testString = value.toString();\r\n\r\n\tPattern pattern = Pattern.compile(&quot;^[a-zA-Z\\300-\\3770-9\\u0153\\346 \\u002F.&#39;-\\\\]*$&quot;);\r\n\tMatcher m = pattern.matcher(testString);\r\n\r\nI have to use the unicode value for some because I&#39;m working with xhtml.\r\n\r\nAny help would be great!\r\n","title":"java regex pattern unclosed character class","body":"<p>I need some help. Im getting:</p>\n\n<pre><code>Caused by: java.util.regex.PatternSyntaxException: Unclosed character class near index 24\n^[a-zA-Z└- 0-9£µ /.'-\\]*$\n                        ^\n        at java.util.regex.Pattern.error(Pattern.java:1713)\n        at java.util.regex.Pattern.clazz(Pattern.java:2254)\n        at java.util.regex.Pattern.sequence(Pattern.java:1818)\n        at java.util.regex.Pattern.expr(Pattern.java:1752)\n        at java.util.regex.Pattern.compile(Pattern.java:1460)\n        at java.util.regex.Pattern.&lt;init&gt;(Pattern.java:1133)\n        at java.util.regex.Pattern.compile(Pattern.java:823)\n</code></pre>\n\n<p>Here is my code:</p>\n\n<pre><code>String testString = value.toString();\n\nPattern pattern = Pattern.compile(\"^[a-zA-Z\\300-\\3770-9\\u0153\\346 \\u002F.'-\\\\]*$\");\nMatcher m = pattern.matcher(testString);\n</code></pre>\n\n<p>I have to use the unicode value for some because I'm working with xhtml.</p>\n\n<p>Any help would be great!</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"display_name":"user554546"},"score":1,"creation_date":1358340501,"post_id":14358826,"comment_id":19963367,"body_markdown":"The string &quot;seems not working&quot; is not a built-in error message in Java.","body":"The string &quot;seems not working&quot; is not a built-in error message in Java."}],"answers":[{"comments":[{"owner":{"account_id":301791,"reputation":4532,"user_id":609760,"accept_rate":57,"display_name":"John Sobolewski"},"score":0,"creation_date":1358341021,"post_id":14358920,"comment_id":19963673,"body_markdown":"@anthony good point but I believe there is an assumption that the data will only contain 0 and 1.  Otherwise it should be \\b[01](?:[01]{2})*\\b","body":"@anthony good point but I believe there is an assumption that the data will only contain 0 and 1.  Otherwise it should be \\b[01](?:[01]{2})*\\b"},{"owner":{"account_id":279975,"reputation":15386,"user_id":575421,"accept_rate":50,"display_name":"Mikita Belahlazau"},"score":0,"creation_date":1358341405,"post_id":14358920,"comment_id":19963887,"body_markdown":"@jsobo Yes. But I don&#39;t know for sure what OP wants to get. Yes, may be your variant is better suits his need.","body":"@jsobo Yes. But I don&#39;t know for sure what OP wants to get. Yes, may be your variant is better suits his need."},{"owner":{"account_id":1138466,"reputation":17496,"user_id":1123020,"accept_rate":60,"display_name":"Yoda"},"score":0,"creation_date":1358352490,"post_id":14358920,"comment_id":19970347,"body_markdown":"@zoom tried that one worked as I wanted, why regex needed different group brackets?","body":"@zoom tried that one worked as I wanted, why regex needed different group brackets?"},{"owner":{"account_id":279975,"reputation":15386,"user_id":575421,"accept_rate":50,"display_name":"Mikita Belahlazau"},"score":0,"creation_date":1358352717,"post_id":14358920,"comment_id":19970470,"body_markdown":"@RobertKilar because `[abc]` - means any symbol from a or b or c. `(abc)` - means exactly &quot;abc&quot; - string of length 3.","body":"@RobertKilar because <code>[abc]</code> - means any symbol from a or b or c. <code>(abc)</code> - means exactly &quot;abc&quot; - string of length 3."}],"tags":[],"owner":{"account_id":279975,"reputation":15386,"user_id":575421,"accept_rate":50,"display_name":"Mikita Belahlazau"},"comment_count":4,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1358340653,"creation_date":1358340653,"answer_id":14358920,"question_id":14358826,"body_markdown":"Try this:\r\n\r\n    String regex = &quot;[01]([01][01])*&quot;;\r\n    &quot;00011&quot;.matches(regex) =&gt; true\r\n    &quot;0001&quot;.matches(regex) =&gt; false","title":"How to detect sequence of 01 of odd length by regex","body":"<p>Try this:</p>\n\n<pre><code>String regex = \"[01]([01][01])*\";\n\"00011\".matches(regex) =&gt; true\n\"0001\".matches(regex) =&gt; false\n</code></pre>\n"}],"owner":{"account_id":1138466,"reputation":17496,"user_id":1123020,"accept_rate":60,"display_name":"Yoda"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":477,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":14358920,"answer_count":1,"score":0,"last_activity_date":1692854267,"creation_date":1358340392,"question_id":14358826,"body_markdown":"I would like to match by regex strings of 01 which have odd length.\r\nExample: `&quot;0&quot;,&quot;001&quot;,&quot;111&quot;,&quot;11111&quot; etc.`\r\n\r\nThe idea is the odd length sequences are 0 or 1 followed by pairs of 0 or 1. But my regex seems not working.\r\nI made this:\r\n\r\n    String regex = &quot;[0-1]{1}[[0-1]{2}]{0,}&quot;;\r\n    \tString txt = &quot;01&quot;;\r\n    \tPattern p = Pattern.compile(regex);\r\n    \tMatcher m = p.matcher(txt);\r\n    \r\n    \t\tSystem.out.println(m.matches());\r\n    \t ","title":"How to detect sequence of 01 of odd length by regex","body":"<p>I would like to match by regex strings of 01 which have odd length.\nExample: <code>\"0\",\"001\",\"111\",\"11111\" etc.</code></p>\n\n<p>The idea is the odd length sequences are 0 or 1 followed by pairs of 0 or 1. But my regex seems not working.\nI made this:</p>\n\n<pre><code>String regex = \"[0-1]{1}[[0-1]{2}]{0,}\";\n    String txt = \"01\";\n    Pattern p = Pattern.compile(regex);\n    Matcher m = p.matcher(txt);\n\n        System.out.println(m.matches());\n</code></pre>\n"},{"tags":["java","regex"],"answers":[{"comments":[{"owner":{"account_id":1494484,"reputation":56249,"user_id":1400768,"display_name":"nhahtdh"},"score":2,"creation_date":1358325737,"post_id":14354166,"comment_id":19956322,"body_markdown":"One &quot;simpler&quot; way is to use capturing group and backreference in replacement string.","body":"One &quot;simpler&quot; way is to use capturing group and backreference in replacement string."},{"owner":{"account_id":138128,"reputation":294236,"user_id":342852,"accept_rate":97,"display_name":"Sean Patrick Floyd"},"score":0,"creation_date":1358327226,"post_id":14354166,"comment_id":19956925,"body_markdown":"@nhahtdh yes, but I wouldn&#39;t call that simpler, I&#39;d call it messier. I like to put all pattern matching into the pattern if it&#39;s possible, and not into the processing logic.","body":"@nhahtdh yes, but I wouldn&#39;t call that simpler, I&#39;d call it messier. I like to put all pattern matching into the pattern if it&#39;s possible, and not into the processing logic."},{"owner":{"account_id":1494484,"reputation":56249,"user_id":1400768,"display_name":"nhahtdh"},"score":0,"creation_date":1358331527,"post_id":14354166,"comment_id":19959104,"body_markdown":"It&#39;s &quot;simpler&quot; (in quote), since it may not apply to everyone. Of course, personally, I&#39;d use look-around.","body":"It&#39;s &quot;simpler&quot; (in quote), since it may not apply to everyone. Of course, personally, I&#39;d use look-around."}],"tags":[],"owner":{"account_id":138128,"reputation":294236,"user_id":342852,"accept_rate":97,"display_name":"Sean Patrick Floyd"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1358325406,"creation_date":1358325406,"answer_id":14354166,"question_id":14354125,"body_markdown":"Use the negative lookahead / lookbehind constructs from [the special constructs section][1] of the Java [`Pattern`][2] documentation.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#special\r\n  [2]: http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html","title":"Regex pattern for string not bounded by character","body":"<p>Use the negative lookahead / lookbehind constructs from <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#special\" rel=\"nofollow\">the special constructs section</a> of the Java <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html\" rel=\"nofollow\"><code>Pattern</code></a> documentation.</p>\n"},{"comments":[{"owner":{"account_id":2250359,"reputation":13,"user_id":1982706,"display_name":"Jyahoo Test"},"score":0,"creation_date":1358386366,"post_id":14354392,"comment_id":19985038,"body_markdown":"Thank you for the correction. I tried a few regex-s unsuccessfully but this is great. :)","body":"Thank you for the correction. I tried a few regex-s unsuccessfully but this is great. :)"}],"tags":[],"owner":{"account_id":1155552,"reputation":355,"user_id":1136274,"display_name":"Rajat Garg"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1358326301,"creation_date":1358326301,"answer_id":14354392,"question_id":14354125,"body_markdown":"Try this :\r\n\r\n    String regex = &quot;([^&#39;])([{}])&quot;;\r\n        Pattern pattern = Pattern.compile(regex);\r\n        Matcher matcher = pattern.matcher(str);\r\n\r\n        while (matcher.find()) {\r\n            if (&quot;{&quot;.equals(matcher.group(2))) {\r\n                matcher.appendReplacement(strBuffer, matcher.group(1) + &quot;&lt;&lt;&quot;);\r\n            } else if (&quot;}&quot;.equals(matcher.group(2))) {\r\n                matcher.appendReplacement(strBuffer,matcher.group(1) + &quot;&gt;&gt;&quot;);\r\n            }\r\n        }\r\n        matcher.appendTail(strBuffer);","title":"Regex pattern for string not bounded by character","body":"<p>Try this :</p>\n\n<pre><code>String regex = \"([^'])([{}])\";\n    Pattern pattern = Pattern.compile(regex);\n    Matcher matcher = pattern.matcher(str);\n\n    while (matcher.find()) {\n        if (\"{\".equals(matcher.group(2))) {\n            matcher.appendReplacement(strBuffer, matcher.group(1) + \"&lt;&lt;\");\n        } else if (\"}\".equals(matcher.group(2))) {\n            matcher.appendReplacement(strBuffer,matcher.group(1) + \"&gt;&gt;\");\n        }\n    }\n    matcher.appendTail(strBuffer);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1944253,"reputation":37590,"user_id":1749753,"display_name":"jlordo"},"score":0,"creation_date":1358327764,"post_id":14354413,"comment_id":19957174,"body_markdown":"+1, Thank you for pointing out the flaw in my (now deleted) answer.","body":"+1, Thank you for pointing out the flaw in my (now deleted) answer."},{"owner":{"account_id":2250359,"reputation":13,"user_id":1982706,"display_name":"Jyahoo Test"},"score":0,"creation_date":1358386804,"post_id":14354413,"comment_id":19985131,"body_markdown":"Sorry everybody, unable to Vote Up on answers (says... not enough reputations). Have answered Yes to the &quot;Was this post useful to you?&quot; question.","body":"Sorry everybody, unable to Vote Up on answers (says... not enough reputations). Have answered Yes to the &quot;Was this post useful to you?&quot; question."}],"tags":[],"owner":{"account_id":1114067,"reputation":196801,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1358326414,"creation_date":1358326414,"answer_id":14354413,"question_id":14354125,"body_markdown":"This is a clear use case for zero-width assertions. The regex you need isn&#39;t very complex:\r\n\r\n    String \r\n       input = &quot;this is single-quoted curly &#39;{&#39;something&#39;}&#39; and this is {not} end&quot;,\r\n      output = &quot;this is single-quoted curly &#39;{&#39;something&#39;}&#39; and this is &lt;&lt;not&gt;&gt; end&quot;;\r\n    System.out.println(input.replaceAll(&quot;(?&lt;!&#39;)\\\\{(.*?)\\\\}(?!&#39;)&quot;, &quot;&lt;&lt;$1&gt;&gt;&quot;)\r\n                            .equals(output));\r\n\r\nprints\r\n\r\n    true","title":"Regex pattern for string not bounded by character","body":"<p>This is a clear use case for zero-width assertions. The regex you need isn't very complex:</p>\n\n<pre><code>String \n   input = \"this is single-quoted curly '{'something'}' and this is {not} end\",\n  output = \"this is single-quoted curly '{'something'}' and this is &lt;&lt;not&gt;&gt; end\";\nSystem.out.println(input.replaceAll(\"(?&lt;!')\\\\{(.*?)\\\\}(?!')\", \"&lt;&lt;$1&gt;&gt;\")\n                        .equals(output));\n</code></pre>\n\n<p>prints</p>\n\n<pre><code>true\n</code></pre>\n"}],"owner":{"account_id":2250359,"reputation":13,"user_id":1982706,"display_name":"Jyahoo Test"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":415,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":14354413,"answer_count":3,"score":1,"last_activity_date":1692854246,"creation_date":1358325201,"question_id":14354125,"body_markdown":"I need java pattern for string not bounded by a character.&lt;br/&gt;\r\n\r\nI have a string (as mentioned below), with some curly brackets bounded by single quotes and other curly brackets that are not. I want to replace the curly brackets that are not bounded by single quotes, with another string.&lt;br/&gt;&lt;br/&gt;\r\nOriginal string:\r\n\r\n    this is single-quoted curly &#39;{&#39;something&#39;}&#39; and this is {not} end\r\nNeeds to be converted to\r\n\r\n    this is single-quoted curly &#39;{&#39;something&#39;}&#39; and this is &lt;&lt;not&gt;&gt; end\r\nNotice that the curly brackets { } that are not bounded by single quotes have been replaced with &lt;&lt; &gt;&gt;.\r\n\r\nHowever, my code prints (character gets eaten up) the text as\r\n\r\n    this is single-quoted curly &#39;{&#39;something&#39;}&#39; and this is&lt;&lt;no&gt;&gt; end\r\n\r\nwhen I use the pattern\r\n\r\n    [^&#39;]([{}])\r\n\r\nMy code is\r\n\r\n    String regex = &quot;[^&#39;]([{}])&quot;;\r\n    Pattern pattern = Pattern.compile(regex);\r\n    Matcher matcher = pattern.matcher(str);\r\n    \r\n    while (matcher.find()) {\r\n    \tif ( &quot;{&quot;.equals(matcher.group(1)) ) {\r\n    \t\tmatcher.appendReplacement(strBuffer, &quot;&amp;lt;&amp;lt;&quot;);\r\n    \t} else if ( &quot;}&quot;.equals(matcher.group(1))) {\r\n    \t\tmatcher.appendReplacement(strBuffer, &quot;&amp;gt;&amp;gt;&quot;);\r\n    \t}\r\n    }\r\n    matcher.appendTail(strBuffer);","title":"Regex pattern for string not bounded by character","body":"<p>I need java pattern for string not bounded by a character.<br/></p>\n\n<p>I have a string (as mentioned below), with some curly brackets bounded by single quotes and other curly brackets that are not. I want to replace the curly brackets that are not bounded by single quotes, with another string.<br/><br/>\nOriginal string:</p>\n\n<pre><code>this is single-quoted curly '{'something'}' and this is {not} end\n</code></pre>\n\n<p>Needs to be converted to</p>\n\n<pre><code>this is single-quoted curly '{'something'}' and this is &lt;&lt;not&gt;&gt; end\n</code></pre>\n\n<p>Notice that the curly brackets { } that are not bounded by single quotes have been replaced with &lt;&lt; >>.</p>\n\n<p>However, my code prints (character gets eaten up) the text as</p>\n\n<pre><code>this is single-quoted curly '{'something'}' and this is&lt;&lt;no&gt;&gt; end\n</code></pre>\n\n<p>when I use the pattern</p>\n\n<pre><code>[^']([{}])\n</code></pre>\n\n<p>My code is</p>\n\n<pre><code>String regex = \"[^']([{}])\";\nPattern pattern = Pattern.compile(regex);\nMatcher matcher = pattern.matcher(str);\n\nwhile (matcher.find()) {\n    if ( \"{\".equals(matcher.group(1)) ) {\n        matcher.appendReplacement(strBuffer, \"&amp;lt;&amp;lt;\");\n    } else if ( \"}\".equals(matcher.group(1))) {\n        matcher.appendReplacement(strBuffer, \"&amp;gt;&amp;gt;\");\n    }\n}\nmatcher.appendTail(strBuffer);\n</code></pre>\n"},{"tags":["java","testing","karate","web-api-testing"],"comments":[{"owner":{"account_id":48302,"reputation":55363,"user_id":143475,"display_name":"Peter Thomas"},"score":0,"creation_date":1692867415,"post_id":76966381,"comment_id":135683192,"body_markdown":"your post does not follow stack overflow guidelines: https://stackoverflow.com/help/how-to-ask - also I don&#39;t think anyone can help you unless you follow this process: https://github.com/karatelabs/karate/wiki/How-to-Submit-an-Issue","body":"your post does not follow stack overflow guidelines: <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a> - also I don&#39;t think anyone can help you unless you follow this process: <a href=\"https://github.com/karatelabs/karate/wiki/How-to-Submit-an-Issue\" rel=\"nofollow noreferrer\">github.com/karatelabs/karate/wiki/How-to-Submit-an-Issue</a>"}],"owner":{"account_id":29250121,"reputation":11,"user_id":22409663,"display_name":"Ayush Mandhana"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1692854222,"creation_date":1692854222,"question_id":76966381,"body_markdown":"I was trying to access the karate-config.js file inside the features file. Created a file name karate-config.js\r\n\r\n```\r\nfunction fn(){\r\nvar config = {\r\nname:&quot;test&quot;,\r\nbaseUrl: &quot;http://example.com&quot;\r\n}\r\nreturn config;\r\n}\r\n```\r\nbut unable to access the baseUrl inside the handler.feature file.\r\n[![handler.feature](https://i.stack.imgur.com/mP05Y.png)](https://i.stack.imgur.com/mP05Y.png)\r\n\r\nI got an error response of undefined\r\n[![Error Response I get](https://i.stack.imgur.com/zlZ2q.png)](https://i.stack.imgur.com/zlZ2q.png)\r\n\r\nI have also gone through the folder structure.\r\n[![Folder Structure](https://i.stack.imgur.com/CQYGT.png)](https://i.stack.imgur.com/CQYGT.png)\r\n\r\n\r\nI have gone through the documentation of karatelabs and had followed the same steps but unable to make it work.","title":"Unable to access the karate-config.js inside my handler.feature file","body":"<p>I was trying to access the karate-config.js file inside the features file. Created a file name karate-config.js</p>\n<pre><code>function fn(){\nvar config = {\nname:&quot;test&quot;,\nbaseUrl: &quot;http://example.com&quot;\n}\nreturn config;\n}\n</code></pre>\n<p>but unable to access the baseUrl inside the handler.feature file.\n<a href=\"https://i.stack.imgur.com/mP05Y.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mP05Y.png\" alt=\"handler.feature\" /></a></p>\n<p>I got an error response of undefined\n<a href=\"https://i.stack.imgur.com/zlZ2q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zlZ2q.png\" alt=\"Error Response I get\" /></a></p>\n<p>I have also gone through the folder structure.\n<a href=\"https://i.stack.imgur.com/CQYGT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CQYGT.png\" alt=\"Folder Structure\" /></a></p>\n<p>I have gone through the documentation of karatelabs and had followed the same steps but unable to make it work.</p>\n"},{"tags":["java","spring-boot","hibernate"],"answers":[{"tags":[],"owner":{"account_id":29165101,"reputation":9,"user_id":22342873,"display_name":"Indunil Prasanna"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1692783897,"creation_date":1692783897,"answer_id":76960157,"question_id":76959808,"body_markdown":"The error message you provided indicates that you&#39;re encountering a duplicate key violation in the &quot;employee&quot; table&#39;s primary key field. This means that you&#39;re trying to insert a record with a value for the primary key column that already exists in the table.\r\n\r\nThe error message specifically mentions &quot;Duplicate entry &#39;1&#39; for key &#39;employee.PRIMARY&#39;&quot;, which indicates that you&#39;re trying to insert a record with a value of &#39;1&#39; in the primary key column, but there is already a record with that value in the table.\r\n\r\nTo resolve this issue:\r\n\r\n1. **Check Data**: Review the data you&#39;re inserting and ensure that you&#39;re not inserting duplicate values for the primary key column.\r\n\r\n2. **Primary Key Sequence**: If the primary key is generated by a sequence or an auto-increment feature, make sure that you&#39;re not manually specifying the primary key value while inserting the record.\r\n\r\n3. **Database State**: Check the current state of the &quot;employee&quot; table to verify if there&#39;s already a record with the primary key value you&#39;re trying to insert.\r\n\r\n4. **Unique Constraint**: Ensure that the primary key column has a unique constraint defined and that there are no data integrity issues in the table.\r\n\r\n5. **Data Insertion Logic**: Double-check your code logic for inserting data into the &quot;employee&quot; table to make sure there are no unintended duplicate insertions.\r\n\r\nBy addressing these points, you should be able to resolve the duplicate key violation issue and successfully insert records into the &quot;employee&quot; table without encountering the constraint violation.","title":"Duplicate entry for primary key on abstract class","body":"<p>The error message you provided indicates that you're encountering a duplicate key violation in the &quot;employee&quot; table's primary key field. This means that you're trying to insert a record with a value for the primary key column that already exists in the table.</p>\n<p>The error message specifically mentions &quot;Duplicate entry '1' for key 'employee.PRIMARY'&quot;, which indicates that you're trying to insert a record with a value of '1' in the primary key column, but there is already a record with that value in the table.</p>\n<p>To resolve this issue:</p>\n<ol>\n<li><p><strong>Check Data</strong>: Review the data you're inserting and ensure that you're not inserting duplicate values for the primary key column.</p>\n</li>\n<li><p><strong>Primary Key Sequence</strong>: If the primary key is generated by a sequence or an auto-increment feature, make sure that you're not manually specifying the primary key value while inserting the record.</p>\n</li>\n<li><p><strong>Database State</strong>: Check the current state of the &quot;employee&quot; table to verify if there's already a record with the primary key value you're trying to insert.</p>\n</li>\n<li><p><strong>Unique Constraint</strong>: Ensure that the primary key column has a unique constraint defined and that there are no data integrity issues in the table.</p>\n</li>\n<li><p><strong>Data Insertion Logic</strong>: Double-check your code logic for inserting data into the &quot;employee&quot; table to make sure there are no unintended duplicate insertions.</p>\n</li>\n</ol>\n<p>By addressing these points, you should be able to resolve the duplicate key violation issue and successfully insert records into the &quot;employee&quot; table without encountering the constraint violation.</p>\n"},{"tags":[],"owner":{"account_id":21967042,"reputation":84,"user_id":16244113,"display_name":"mamJavad"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692784247,"creation_date":1692784247,"answer_id":76960203,"question_id":76959808,"body_markdown":"I think if you add \r\n\r\n    @Id\r\n    @GeneratedValue\r\n    private Long personId;\r\nit will be ok","title":"Duplicate entry for primary key on abstract class","body":"<p>I think if you add</p>\n<pre><code>@Id\n@GeneratedValue\nprivate Long personId;\n</code></pre>\n<p>it will be ok</p>\n"},{"tags":[],"owner":{"account_id":11736247,"reputation":435,"user_id":8589908,"accept_rate":25,"display_name":"Radika Moonesinghe"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692853513,"creation_date":1692853513,"answer_id":76966336,"question_id":76959808,"body_markdown":"The issue is to do with key generation and related to `@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)` being used with `IDENTITY` generation strategy for Id from Hibernate.\r\n\r\nThe `SEQUENCE` generation strategy is preferred and better for hibernate since it tracks the Id generation rather than the database being responsible for it.","title":"Duplicate entry for primary key on abstract class","body":"<p>The issue is to do with key generation and related to <code>@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)</code> being used with <code>IDENTITY</code> generation strategy for Id from Hibernate.</p>\n<p>The <code>SEQUENCE</code> generation strategy is preferred and better for hibernate since it tracks the Id generation rather than the database being responsible for it.</p>\n"}],"owner":{"account_id":11736247,"reputation":435,"user_id":8589908,"accept_rate":25,"display_name":"Radika Moonesinghe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1692853513,"creation_date":1692781037,"question_id":76959808,"body_markdown":"I have a class Employee which extends Person. When I try to save a Employee I am getting an error about duplicate id (Unit Test).\r\n\r\nEnvironment:\r\nHibernate 6.2\r\nSpring Boot 3.2\r\nJava 18\r\n\r\nMy classes:\r\n\r\n**Person**\r\n\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    @Entity\r\n    @Data\r\n    @Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)\r\n    @Table(name=&quot;PERSON&quot;)\r\n    public abstract class Person {\r\n\r\n        @Id\r\n        @GeneratedValue\r\n        private Long personId;\r\n\r\n        @JsonBackReference\r\n        @ManyToOne(fetch = FetchType.LAZY, optional = true)\r\n        private Check check;\r\n    }\r\n\r\nAnd \r\n\r\n**Employee**\r\n\r\n    @Entity\r\n    @Data\r\n    @NoArgsConstructor\r\n    public class Employee extends Person {\r\n\r\n    @Column(unique = true)\r\n    private String empCode;\r\n\r\n    @JoinColumn(name =&quot;dateA&quot;)\r\n    @JsonFormat(pattern=&quot;yyyy-MM-dd&quot;)\r\n    private LocalDate dateA;\r\n\r\n    @Lob\r\n    private String comment;\r\n\r\n    public Pit(String empCode, LocalDate dateA, String comment) {\r\n        this.empCode = empCode;\r\n        this.dateA = dateA;\r\n        this.comment = comment;\r\n       }\r\n    }\r\n\r\nI try to instantiate a instance of Employee\r\n\r\n`Employee emp = employeeRepository.save(new Employee(&quot;XRY827&quot;, LocalDate.of(2023, 03, 28), &quot;comment&quot;));`\r\n\r\nBut I get :\r\n\r\n    could not execute statement [Duplicate entry &#39;1&#39; for key &#39;employee.PRIMARY&#39;] [insert into employee (check_id,code,comment,date_a,person_id) values (?,?,?,?,?)]; SQL [insert into employee (check_id,code,comment,date_inserted,person_id) values (?,?,?,?,?)]; constraint [employee.PRIMARY]\r\n    org.springframework.dao.DataIntegrityViolationException: could not execute statement [Duplicate entry &#39;1&#39; for key &#39;employee.PRIMARY&#39;] [insert into employee(check_id,code,comment,date_inserted,person_id) values (?,?,?,?,?)]; SQL [insert into employee (check_id,code,comment,date_inserted,person_id) values (?,?,?,?,?)]; constraint [employee.PRIMARY]\r\n\r\nFrom the SQL in the error above it looks like hibernate is trying to insert a `person_id` and a `check_id` - even though the `check_id` is optional and the `person_id` is generated?\r\n\r\nHow can I create a new Employee without error?\r\n\r\n","title":"Duplicate entry for primary key on abstract class","body":"<p>I have a class Employee which extends Person. When I try to save a Employee I am getting an error about duplicate id (Unit Test).</p>\n<p>Environment:\nHibernate 6.2\nSpring Boot 3.2\nJava 18</p>\n<p>My classes:</p>\n<p><strong>Person</strong></p>\n<pre><code>@AllArgsConstructor\n@NoArgsConstructor\n@Entity\n@Data\n@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)\n@Table(name=&quot;PERSON&quot;)\npublic abstract class Person {\n\n    @Id\n    @GeneratedValue\n    private Long personId;\n\n    @JsonBackReference\n    @ManyToOne(fetch = FetchType.LAZY, optional = true)\n    private Check check;\n}\n</code></pre>\n<p>And</p>\n<p><strong>Employee</strong></p>\n<pre><code>@Entity\n@Data\n@NoArgsConstructor\npublic class Employee extends Person {\n\n@Column(unique = true)\nprivate String empCode;\n\n@JoinColumn(name =&quot;dateA&quot;)\n@JsonFormat(pattern=&quot;yyyy-MM-dd&quot;)\nprivate LocalDate dateA;\n\n@Lob\nprivate String comment;\n\npublic Pit(String empCode, LocalDate dateA, String comment) {\n    this.empCode = empCode;\n    this.dateA = dateA;\n    this.comment = comment;\n   }\n}\n</code></pre>\n<p>I try to instantiate a instance of Employee</p>\n<p><code>Employee emp = employeeRepository.save(new Employee(&quot;XRY827&quot;, LocalDate.of(2023, 03, 28), &quot;comment&quot;));</code></p>\n<p>But I get :</p>\n<pre><code>could not execute statement [Duplicate entry '1' for key 'employee.PRIMARY'] [insert into employee (check_id,code,comment,date_a,person_id) values (?,?,?,?,?)]; SQL [insert into employee (check_id,code,comment,date_inserted,person_id) values (?,?,?,?,?)]; constraint [employee.PRIMARY]\norg.springframework.dao.DataIntegrityViolationException: could not execute statement [Duplicate entry '1' for key 'employee.PRIMARY'] [insert into employee(check_id,code,comment,date_inserted,person_id) values (?,?,?,?,?)]; SQL [insert into employee (check_id,code,comment,date_inserted,person_id) values (?,?,?,?,?)]; constraint [employee.PRIMARY]\n</code></pre>\n<p>From the SQL in the error above it looks like hibernate is trying to insert a <code>person_id</code> and a <code>check_id</code> - even though the <code>check_id</code> is optional and the <code>person_id</code> is generated?</p>\n<p>How can I create a new Employee without error?</p>\n"},{"tags":["java","mysql","jpa","orm","eclipselink"],"comments":[{"owner":{"account_id":275393,"reputation":4657,"user_id":568254,"accept_rate":60,"display_name":"Daniel B. Chapman"},"score":0,"creation_date":1346615905,"post_id":12002260,"comment_id":16403675,"body_markdown":"Is there a reason you can&#39;t just do a standard import via SQL from Old -&gt; New? Once you have completed that you simply need to adjust the Sequence so that you don&#39;t overwrite the values. After-all, its an ORM and it is reading the database.","body":"Is there a reason you can&#39;t just do a standard import via SQL from Old -&gt; New? Once you have completed that you simply need to adjust the Sequence so that you don&#39;t overwrite the values. After-all, its an ORM and it is reading the database."},{"owner":{"account_id":216313,"reputation":12017,"user_id":471478,"accept_rate":86,"display_name":"scravy"},"score":0,"creation_date":1346622535,"post_id":12002260,"comment_id":16404938,"body_markdown":"The old and the new have completely different schemas and the application is used to transform data from the one model into the other (things like one field for first and last name in the old, two fields in the new, etc.). Of course it would be an alternative option to dump the old database, create a new data script and import these; however, the app is almost complete. Besides, I&#39;d really like to know how to achieve this in general.","body":"The old and the new have completely different schemas and the application is used to transform data from the one model into the other (things like one field for first and last name in the old, two fields in the new, etc.). Of course it would be an alternative option to dump the old database, create a new data script and import these; however, the app is almost complete. Besides, I&#39;d really like to know how to achieve this in general."},{"owner":{"account_id":275393,"reputation":4657,"user_id":568254,"accept_rate":60,"display_name":"Daniel B. Chapman"},"score":0,"creation_date":1346626402,"post_id":12002260,"comment_id":16405611,"body_markdown":"Since you schemas are entirely different, why is there a problem just doing a &quot;clean&quot; import. Aka: build new entities and relationships and persist them? Where I&#39;m leading you is that I think you&#39;re barking up a difficult tree. You can, however, remove the sequence, persist everything manually, then start the sequence.","body":"Since you schemas are entirely different, why is there a problem just doing a &quot;clean&quot; import. Aka: build new entities and relationships and persist them? Where I&#39;m leading you is that I think you&#39;re barking up a difficult tree. You can, however, remove the sequence, persist everything manually, then start the sequence."},{"owner":{"account_id":4131691,"reputation":554,"user_id":3389438,"display_name":"Akzidenzgrotesk"},"score":0,"creation_date":1486295258,"post_id":12002260,"comment_id":71275504,"body_markdown":"`@GeneratedValue(strategy = GenerationType.AUTO)` did the trick in my case. Migrating the old Data first, the existing keys are kept.","body":"<code>@GeneratedValue(strategy = GenerationType.AUTO)</code> did the trick in my case. Migrating the old Data first, the existing keys are kept."}],"answers":[{"comments":[{"owner":{"account_id":216313,"reputation":12017,"user_id":471478,"accept_rate":86,"display_name":"scravy"},"score":0,"creation_date":1345192796,"post_id":12002478,"comment_id":16008469,"body_markdown":"I&#39;m sorry, but this is Hibernate specific (special annotations and classes from hibernate are being used). I&#39;m using EclipseLink (and I can&#39;t switch away from it, since large portions of the project are using eclipselink specific annotations and classes).","body":"I&#39;m sorry, but this is Hibernate specific (special annotations and classes from hibernate are being used). I&#39;m using EclipseLink (and I can&#39;t switch away from it, since large portions of the project are using eclipselink specific annotations and classes)."},{"owner":{"account_id":1334876,"reputation":3668,"user_id":1277864,"accept_rate":70,"display_name":"Dangling Piyush"},"score":0,"creation_date":1345192992,"post_id":12002478,"comment_id":16008527,"body_markdown":"i think EclipseLink also has something called CustomSequencing.","body":"i think EclipseLink also has something called CustomSequencing."},{"owner":{"account_id":216313,"reputation":12017,"user_id":471478,"accept_rate":86,"display_name":"scravy"},"score":0,"creation_date":1346592266,"post_id":12002478,"comment_id":16398877,"body_markdown":"thanks for the correct link, however, custom sequencing seems not to work. Can&#39;t imagine that this is such a rare use case!","body":"thanks for the correct link, however, custom sequencing seems not to work. Can&#39;t imagine that this is such a rare use case!"},{"owner":{"account_id":275393,"reputation":4657,"user_id":568254,"accept_rate":60,"display_name":"Daniel B. Chapman"},"score":0,"creation_date":1346626566,"post_id":12002478,"comment_id":16405638,"body_markdown":"@scravy This should work: post your code. There&#39;s no reason a custom sequence won&#39;t do the trick.","body":"@scravy This should work: post your code. There&#39;s no reason a custom sequence won&#39;t do the trick."}],"tags":[],"owner":{"account_id":1334876,"reputation":3668,"user_id":1277864,"accept_rate":70,"display_name":"Dangling Piyush"},"comment_count":4,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1345192609,"creation_date":1345192609,"answer_id":12002478,"question_id":12002260,"body_markdown":"**Look for Custom Id Generator &lt;br&gt;**\r\n\r\nhttp://blog.anorakgirl.co.uk/2009/01/custom-hibernate-sequence-generator-for-id-field/\r\n\r\n**maybe this could help.**","title":"Manually specify the value of a primary key in JPA @GeneratedValue column","body":"<p><strong>Look for Custom Id Generator <br></strong></p>\n\n<p><a href=\"http://blog.anorakgirl.co.uk/2009/01/custom-hibernate-sequence-generator-for-id-field/\" rel=\"nofollow\">http://blog.anorakgirl.co.uk/2009/01/custom-hibernate-sequence-generator-for-id-field/</a></p>\n\n<p><strong>maybe this could help.</strong></p>\n"},{"tags":[],"owner":{"account_id":181890,"reputation":17919,"user_id":416206,"accept_rate":40,"display_name":"James"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1346767453,"creation_date":1346767453,"answer_id":12265188,"question_id":12002260,"body_markdown":"If you use TABLE sequencing, then EclipseLink will allow you to override the value (or SEQUENCE if your database supports this, MySQL does not).\r\n\r\nFor IDENTITY, I&#39;m not even sure that MySQL will allow you to supply your own Id, you might want to verify this.  In general I would never recommend using IDENTITY as it does not support preallocation.\r\n\r\nThere are a few issues with allowing IDENTITY to provide the id or not.  One is that two different insert SQL will need to be generated depending on the id value, as for IDENTITY the id cannot be in the insert at all.  You may wish to log a bug to have IDENTITY support user provided ids.\r\n\r\nYou should still be able to get it working with your own Sequence subclass, or possibly MySQLPlatform subclass.  You would set your MySQLPlatform subclass using the &quot;eclipselink.target-database&quot; persistence unit property.","title":"Manually specify the value of a primary key in JPA @GeneratedValue column","body":"<p>If you use TABLE sequencing, then EclipseLink will allow you to override the value (or SEQUENCE if your database supports this, MySQL does not).</p>\n\n<p>For IDENTITY, I'm not even sure that MySQL will allow you to supply your own Id, you might want to verify this.  In general I would never recommend using IDENTITY as it does not support preallocation.</p>\n\n<p>There are a few issues with allowing IDENTITY to provide the id or not.  One is that two different insert SQL will need to be generated depending on the id value, as for IDENTITY the id cannot be in the insert at all.  You may wish to log a bug to have IDENTITY support user provided ids.</p>\n\n<p>You should still be able to get it working with your own Sequence subclass, or possibly MySQLPlatform subclass.  You would set your MySQLPlatform subclass using the \"eclipselink.target-database\" persistence unit property.</p>\n"},{"tags":[],"owner":{"account_id":1014607,"reputation":4573,"user_id":1026453,"accept_rate":83,"display_name":"DuncanKinnear"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1346900745,"creation_date":1346900745,"answer_id":12292429,"question_id":12002260,"body_markdown":"I might be missing something obvious, but why not just define another Entity with the same `@Table(name=&quot;.....&quot;)` annotation, with the same fields, but make the id not generated? Then you can use that Entity for the code that copies data from the old DB to the new, and the one with the generated Id can be used for normal creates that require id generation.\r\n\r\nI can&#39;t tell you if it works with EclipseLink, but we&#39;re using Hibernate here and it doesn&#39;t seem to mind it.","title":"Manually specify the value of a primary key in JPA @GeneratedValue column","body":"<p>I might be missing something obvious, but why not just define another Entity with the same <code>@Table(name=\".....\")</code> annotation, with the same fields, but make the id not generated? Then you can use that Entity for the code that copies data from the old DB to the new, and the one with the generated Id can be used for normal creates that require id generation.</p>\n\n<p>I can't tell you if it works with EclipseLink, but we're using Hibernate here and it doesn't seem to mind it.</p>\n"},{"comments":[{"owner":{"account_id":5104723,"reputation":232,"user_id":4093157,"display_name":"Richard Lewan"},"score":0,"creation_date":1486596023,"post_id":12307512,"comment_id":71419028,"body_markdown":"This was excellent and helpful. We&#39;ve implemented this solution on a mySql DB with great success.","body":"This was excellent and helpful. We&#39;ve implemented this solution on a mySql DB with great success."},{"owner":{"account_id":336748,"reputation":22028,"user_id":664577,"accept_rate":98,"display_name":"Anthony Accioly"},"score":0,"creation_date":1486637123,"post_id":12307512,"comment_id":71435480,"body_markdown":"Glad it was useful. It has been a while since I wrote this answer. Generally between ORM specific tools (`Sequence`, `SessionCustomizer`) and database hacks, the second tends to get things done faster and with less unknown consequences","body":"Glad it was useful. It has been a while since I wrote this answer. Generally between ORM specific tools (<code>Sequence</code>, <code>SessionCustomizer</code>) and database hacks, the second tends to get things done faster and with less unknown consequences"}],"tags":[],"owner":{"account_id":336748,"reputation":22028,"user_id":664577,"accept_rate":98,"display_name":"Anthony Accioly"},"comment_count":2,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1486635842,"creation_date":1346961685,"answer_id":12307512,"question_id":12002260,"body_markdown":"Database-centric solution to your problem:\r\n\r\n 1. Create an auxiliary, nullable column in your table. It will hold your manually assigned ids:\r\n\r\n        CREATE TABLE `test_table`\r\n        (\r\n          `id` bigint(20) NOT NULL AUTO_INCREMENT,\r\n          `manual_id` bigint(20) NULL,\r\n          `some_other_field` varchar(200) NOT NULL,\r\n          PRIMARY KEY(id)\r\n        );\r\n\r\n 2. Map this column to a normal field in your Entity:\r\n\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private Long id;\r\n        @Column(name=&quot;manual_id&quot;)\r\n        private Integer manualId;\r\n \r\n 3. Create a trigger that sets the table id to the manual assigned id if it is not null:\r\n\r\n        DELIMITER //\r\n        CREATE TRIGGER `test_table_bi` BEFORE INSERT ON `test_table`\r\n          FOR EACH ROW \r\n          BEGIN\r\n            IF NEW.`manual_id` IS NOT NULL THEN \r\n        \t  SET NEW.`id` = NEW.`manual_id`;\r\n            END IF;\r\n        END;//\r\n        DELIMITER;    \r\n\r\n 4. Always use the `manualId` when you need to assign a custom id. The trigger will do the magic for you:\r\n    \r\n        testEntiy.setManualId(300);\r\n        entityManager.persist(testEntity);\r\n\r\n 5. After the database import phase, simple remove the trigger, the auxiliary column and it&#39;s mapping.\r\n\r\n        DROP TRIGGER `test_table_bi`;\r\n        ALTER TABLE `test_table` DROP COLUMN `manual_id`;\r\n\r\n\r\n----------\r\n\r\n**Warning**\r\n\r\nIf you manually specify an id greater than the current `AUTO_INCREMENT` value, the next generated `id` will jump to the value of the manually assigned id plus 1, e.g.: \r\n\r\n    INSERT INTO `test_table` (manual_id, some_other_field) VALUES (50, &#39;Something&#39;);\r\n    INSERT INTO `test_table` (manual_id, some_other_field) VALUES (NULL, &#39;Something else&#39;);\r\n    INSERT INTO `test_table` (manual_id, some_other_field) VALUES (90, &#39;Something 2&#39;);\r\n    INSERT INTO `test_table` (manual_id, some_other_field) VALUES (NULL, &#39;Something else 2&#39;);\r\n    INSERT INTO `test_table` (manual_id, some_other_field) VALUES (40, &#39;Something 3&#39;);\r\n    INSERT INTO `test_table` (manual_id, some_other_field) VALUES (NULL, &#39;Something else 3&#39;);\r\n\r\nWill wield the results:\r\n\r\n    +----+-----------+------------------+\r\n    | id | manual_id | some_other_field |\r\n    +----+-----------+------------------+\r\n    | 50 |        50 | Something        |\r\n    | 51 |      NULL | Something else   |\r\n    | 90 |        90 | Something 2      |\r\n    | 91 |      NULL | Something else 2 |\r\n    | 40 |        40 | Something 3      |\r\n    | 92 |      NULL | Something else 3 |\r\n    +----+-----------+------------------+\r\n\r\nTo avoid problems it is highly recommended to set the `AUTO_INCREMENT` column to start with a number greater than all of the existing ids in your previous database, e.g.: \r\n\r\n    ALTER TABLE `test_table` AUTO_INCREMENT = 100000;\r\n ","title":"Manually specify the value of a primary key in JPA @GeneratedValue column","body":"<p>Database-centric solution to your problem:</p>\n\n<ol>\n<li><p>Create an auxiliary, nullable column in your table. It will hold your manually assigned ids:</p>\n\n<pre><code>CREATE TABLE `test_table`\n(\n  `id` bigint(20) NOT NULL AUTO_INCREMENT,\n  `manual_id` bigint(20) NULL,\n  `some_other_field` varchar(200) NOT NULL,\n  PRIMARY KEY(id)\n);\n</code></pre></li>\n<li><p>Map this column to a normal field in your Entity:</p>\n\n<pre><code>@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\nprivate Long id;\n@Column(name=\"manual_id\")\nprivate Integer manualId;\n</code></pre></li>\n<li><p>Create a trigger that sets the table id to the manual assigned id if it is not null:</p>\n\n<pre><code>DELIMITER //\nCREATE TRIGGER `test_table_bi` BEFORE INSERT ON `test_table`\n  FOR EACH ROW \n  BEGIN\n    IF NEW.`manual_id` IS NOT NULL THEN \n      SET NEW.`id` = NEW.`manual_id`;\n    END IF;\nEND;//\nDELIMITER;    \n</code></pre></li>\n<li><p>Always use the <code>manualId</code> when you need to assign a custom id. The trigger will do the magic for you:</p>\n\n<pre><code>testEntiy.setManualId(300);\nentityManager.persist(testEntity);\n</code></pre></li>\n<li><p>After the database import phase, simple remove the trigger, the auxiliary column and it's mapping.</p>\n\n<pre><code>DROP TRIGGER `test_table_bi`;\nALTER TABLE `test_table` DROP COLUMN `manual_id`;\n</code></pre></li>\n</ol>\n\n<hr>\n\n<p><strong>Warning</strong></p>\n\n<p>If you manually specify an id greater than the current <code>AUTO_INCREMENT</code> value, the next generated <code>id</code> will jump to the value of the manually assigned id plus 1, e.g.: </p>\n\n<pre><code>INSERT INTO `test_table` (manual_id, some_other_field) VALUES (50, 'Something');\nINSERT INTO `test_table` (manual_id, some_other_field) VALUES (NULL, 'Something else');\nINSERT INTO `test_table` (manual_id, some_other_field) VALUES (90, 'Something 2');\nINSERT INTO `test_table` (manual_id, some_other_field) VALUES (NULL, 'Something else 2');\nINSERT INTO `test_table` (manual_id, some_other_field) VALUES (40, 'Something 3');\nINSERT INTO `test_table` (manual_id, some_other_field) VALUES (NULL, 'Something else 3');\n</code></pre>\n\n<p>Will wield the results:</p>\n\n<pre><code>+----+-----------+------------------+\n| id | manual_id | some_other_field |\n+----+-----------+------------------+\n| 50 |        50 | Something        |\n| 51 |      NULL | Something else   |\n| 90 |        90 | Something 2      |\n| 91 |      NULL | Something else 2 |\n| 40 |        40 | Something 3      |\n| 92 |      NULL | Something else 3 |\n+----+-----------+------------------+\n</code></pre>\n\n<p>To avoid problems it is highly recommended to set the <code>AUTO_INCREMENT</code> column to start with a number greater than all of the existing ids in your previous database, e.g.: </p>\n\n<pre><code>ALTER TABLE `test_table` AUTO_INCREMENT = 100000;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1738665,"reputation":189,"user_id":1590666,"display_name":"poison"},"comment_count":0,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1347117274,"creation_date":1347024327,"answer_id":12319026,"question_id":12002260,"body_markdown":"This works with eclipselink. It will create a seperate table for the sequence, but that shouldn&#39;t pose a problem.\r\n\r\n    @Id\r\n    @GeneratedValue(strategy=GenerationType.AUTO)\r\n    @Column(name=&quot;id&quot;, insertable=true, updatable=true, unique=true, nullable=false)\r\n    private Long id;\r\n\r\nGenerationType.AUTO will choose the ideal generation strategy. Since the field is specified as  insertable and updateable, a TABLE generation strategy will be used. This means eclipselink will generate another table holding the current sequence value and generate the sequence itself instead of delegating it to the database. Since the column is declared insertable, if id is null when persisting, eclipselink will generate the id. Otherwise the existing id will be used.","title":"Manually specify the value of a primary key in JPA @GeneratedValue column","body":"<p>This works with eclipselink. It will create a seperate table for the sequence, but that shouldn't pose a problem.</p>\n\n<pre><code>@Id\n@GeneratedValue(strategy=GenerationType.AUTO)\n@Column(name=\"id\", insertable=true, updatable=true, unique=true, nullable=false)\nprivate Long id;\n</code></pre>\n\n<p>GenerationType.AUTO will choose the ideal generation strategy. Since the field is specified as  insertable and updateable, a TABLE generation strategy will be used. This means eclipselink will generate another table holding the current sequence value and generate the sequence itself instead of delegating it to the database. Since the column is declared insertable, if id is null when persisting, eclipselink will generate the id. Otherwise the existing id will be used.</p>\n"},{"tags":[],"owner":{"account_id":1512641,"reputation":305,"user_id":1414351,"display_name":"szarza"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1371136000,"creation_date":1371136000,"answer_id":17090561,"question_id":12002260,"body_markdown":"Using **GenerationType.SEQUENCE** with PostgreSQL and EclipseLink worked for me.\r\n\r\n1) Change\r\n \r\n\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY) \r\n\r\n   by \r\n \r\n\r\n    @GeneratedValue(strategy=GenerationType.SEQUENCE, generator=&quot;step_id_seq&quot;)\r\n    @SequenceGenerator(name=&quot;step_id_seq&quot;, sequenceName=&quot;step_id_seq&quot;)\r\n\r\nNow, you can call sequence using NativeQuery:\r\n\r\n    return ((Vector&lt;Integer&gt;) em.createNativeQuery(&quot;select nextval(&#39;step_id_seq&#39;)::int&quot;).getSingleResult()).get(0);\r\n\r\nand set the returned Id to your Entity before call EntityManager.persist() method.\r\n\r\nHope it&#39;s not too late!","title":"Manually specify the value of a primary key in JPA @GeneratedValue column","body":"<p>Using <strong>GenerationType.SEQUENCE</strong> with PostgreSQL and EclipseLink worked for me.</p>\n\n<p>1) Change</p>\n\n<pre><code>@GeneratedValue(strategy = GenerationType.IDENTITY) \n</code></pre>\n\n<p>by </p>\n\n<pre><code>@GeneratedValue(strategy=GenerationType.SEQUENCE, generator=\"step_id_seq\")\n@SequenceGenerator(name=\"step_id_seq\", sequenceName=\"step_id_seq\")\n</code></pre>\n\n<p>Now, you can call sequence using NativeQuery:</p>\n\n<pre><code>return ((Vector&lt;Integer&gt;) em.createNativeQuery(\"select nextval('step_id_seq')::int\").getSingleResult()).get(0);\n</code></pre>\n\n<p>and set the returned Id to your Entity before call EntityManager.persist() method.</p>\n\n<p>Hope it's not too late!</p>\n"},{"comments":[{"owner":{"account_id":216313,"reputation":12017,"user_id":471478,"accept_rate":86,"display_name":"scravy"},"score":0,"creation_date":1692987310,"post_id":71250440,"comment_id":135705086,"body_markdown":"my id is an int, not a uuid.","body":"my id is an int, not a uuid."},{"owner":{"account_id":11070566,"reputation":685,"user_id":8128825,"display_name":"Barrrettt"},"score":0,"creation_date":1693839009,"post_id":71250440,"comment_id":135809576,"body_markdown":"ok.use whatever you want. you can generate an int, a long or bananas","body":"ok.use whatever you want. you can generate an int, a long or bananas"}],"tags":[],"owner":{"account_id":11070566,"reputation":685,"user_id":8128825,"display_name":"Barrrettt"},"comment_count":2,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1645698108,"creation_date":1645698108,"answer_id":71250440,"question_id":12002260,"body_markdown":"My way (MySql) is deactivate GeneratedValue:\r\n\r\n    @Id\r\n    //@GeneratedValue\r\n    @Column(unique = true, nullable = false, columnDefinition =&quot;BINARY(16)&quot;)\r\n    private UUID id;\r\n\r\nAnd add in Entity:\r\n\r\n    @PrePersist\r\n    protected void onCreation() {\r\n        if (id == null) setId(UUID.randomUUID());\r\n    }\r\n\r\nNow in my code I can do (on service for example):\r\n    \r\n    String clientID = env.getParam(&quot;id&quot;);\r\n    Entity entity = entityRepository.findFirstById(UUID.fromString(clientID));\r\n    //is new?\r\n    if (entity==null){\r\n      entity = new Entity();\r\n      entity.setId(UUID.fromString(clientID));//set cumstom ID here\r\n    }\r\n\r\n    Entity entityNew = entityRepository.save(entity); //insert\r\n    if (entityNew.getId().equals(entity.getId()) ){\r\n      Log.i(&quot;OK!&quot;)\r\n    }\r\n\r\n&#128076;\r\n","title":"Manually specify the value of a primary key in JPA @GeneratedValue column","body":"<p>My way (MySql) is deactivate GeneratedValue:</p>\n<pre><code>@Id\n//@GeneratedValue\n@Column(unique = true, nullable = false, columnDefinition =&quot;BINARY(16)&quot;)\nprivate UUID id;\n</code></pre>\n<p>And add in Entity:</p>\n<pre><code>@PrePersist\nprotected void onCreation() {\n    if (id == null) setId(UUID.randomUUID());\n}\n</code></pre>\n<p>Now in my code I can do (on service for example):</p>\n<pre><code>String clientID = env.getParam(&quot;id&quot;);\nEntity entity = entityRepository.findFirstById(UUID.fromString(clientID));\n//is new?\nif (entity==null){\n  entity = new Entity();\n  entity.setId(UUID.fromString(clientID));//set cumstom ID here\n}\n\nEntity entityNew = entityRepository.save(entity); //insert\nif (entityNew.getId().equals(entity.getId()) ){\n  Log.i(&quot;OK!&quot;)\n}\n</code></pre>\n<p>👌</p>\n"},{"comments":[{"owner":{"account_id":216313,"reputation":12017,"user_id":471478,"accept_rate":86,"display_name":"scravy"},"score":0,"creation_date":1692987285,"post_id":76966318,"comment_id":135705083,"body_markdown":"but doesn&#39;t let you not set it. this I experimented with myself as stated in the question.","body":"but doesn&#39;t let you not set it. this I experimented with myself as stated in the question."},{"owner":{"account_id":15207672,"reputation":1864,"user_id":10973514,"display_name":"pref"},"score":0,"creation_date":1692992585,"post_id":76966318,"comment_id":135705930,"body_markdown":"why do you define it as PK if you don&#39;t want to have value for it ?!!","body":"why do you define it as PK if you don&#39;t want to have value for it ?!!"}],"tags":[],"owner":{"account_id":15207672,"reputation":1864,"user_id":10973514,"display_name":"pref"},"comment_count":2,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1692853061,"creation_date":1692853061,"answer_id":76966318,"question_id":12002260,"body_markdown":"In my case, \r\n\r\nI commented out **@GeneratedValue** annotation line from the @Id field of my Entity\r\n\r\nand that let me to set the primary key in the object that I&#39;m persisting","title":"Manually specify the value of a primary key in JPA @GeneratedValue column","body":"<p>In my case,</p>\n<p>I commented out <strong>@GeneratedValue</strong> annotation line from the @Id field of my Entity</p>\n<p>and that let me to set the primary key in the object that I'm persisting</p>\n"}],"owner":{"account_id":216313,"reputation":12017,"user_id":471478,"accept_rate":86,"display_name":"scravy"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60559,"favorite_count":0,"down_vote_count":0,"up_vote_count":35,"answer_count":8,"score":35,"last_activity_date":1692853061,"creation_date":1345191707,"question_id":12002260,"body_markdown":"I&#39;m having an Entity which has a primary key / id field like the following:\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\nThis works well. I&#39;m using EclipseLink to create the DDL-Schema, and the column is correctly created like so:\r\n\r\n    `id` bigint(20) NOT NULL AUTO_INCREMENT\r\n\r\nHowever, I&#39;ve got several entities for which I do want to specify the PK myself (it&#39;s a little application that transfers data from an old database to the new one we&#39;re building). If I specify the ID for the POJO (using `setId(Long id)`) and persist it, EclipseLink *does not* save it (i.e. the record is saved, but the id is auto generated by eclipseLink).\r\n\r\n__Is there a way to manually specify the value of a column which has a @GeneratedValue ?__\r\n\r\nHere some thoughts on the issue:\r\n\r\nI tried to work around the problem by not using @GeneratedValue at all, but simply manually define the column to be AUTO_INCREMENTed. However this forces me to manually provide an IDs *always*, since EclipseLink validates the primary key (so it may not be null, zero, or a negative number). The exception message reads that I should specify eclipselink.id_validation, however this does not seem to make any difference (I annotated `@PrimaryKey(validation = IdValidation.NONE)` but still got the same message).\r\n\r\n__To clarify:__ I&#39;m using EclipseLink (2.4.0) as persistence provider and I can&#39;t switch away from it (large portions of the project depend on eclipselink specific query hints, annotations, and classes).\r\n\r\n----------\r\n\r\nEDIT (In Response to the answers):\r\n\r\n__Custom Sequencing:__ I tried to implement my own sequencing. I tried subclassing DefaultSequence, but EclipseLink will tell me `Internal Exception: org.eclipse.persistence.platform.database.MySQLPlatform could not be found`. But I&#39;ve checked: The class is on the classpath.\r\n\r\nSo I subclassed another class, NativeSequence:\r\n\r\n\tpublic class MyNativeSequence extends NativeSequence {\r\n\t\r\n\t\tpublic MyNativeSequence() {\r\n\t\t\tsuper();\r\n\t\t}\r\n\t\r\n\t\tpublic MyNativeSequence(final String name) {\r\n\t\t\tsuper(name);\r\n\t\t}\r\n\t\r\n\t\r\n\t\t@Override\r\n\t\tpublic boolean shouldAlwaysOverrideExistingValue() {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\r\n\t\t@Override\r\n\t\tpublic boolean shouldAlwaysOverrideExistingValue(final String seqName) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\r\n\t}\r\n\r\nHowever, what I get is the following:\r\n\r\n\t\r\n\tjavax.persistence.RollbackException: Exception [EclipseLink-7197] (Eclipse Persistence Services - 2.4.0.v20120608-r11652): org.eclipse.persistence.exceptions.ValidationException\r\n\tException Description: Null or zero primary key encountered in unit of work clone [de.dfv.datenbank.domain.Mitarbeiter[ id=null ]], primary key [null]. Set descriptors IdValidation or the &quot;eclipselink.id-validation&quot; property.\r\n\t\tat org.eclipse.persistence.internal.jpa.transaction.EntityTransactionImpl.commitInternal(EntityTransactionImpl.java:102)\r\n\t\t...\r\n\tCaused by: Exception [EclipseLink-7197] (Eclipse Persistence Services - 2.4.0.v20120608-r11652): org.eclipse.persistence.exceptions.ValidationException\r\n\tException Description: Null or zero primary key encountered in unit of work clone [de.dfv.datenbank.domain.Mitarbeiter[ id=null ]], primary key [null]. Set descriptors IdValidation or the &quot;eclipselink.id-validation&quot; property.\r\n\t\tat org.eclipse.persistence.exceptions.ValidationException.nullPrimaryKeyInUnitOfWorkClone(ValidationException.java:1451)\r\n\t\t...\r\n\r\n(stack trace shortened for clarity). This is the same message which I got before. Shouldn&#39;t I subclass NativeSequence? If so, I don&#39;t know what to implement for the abstract methods in Sequence or StandardSequence.\r\n\r\nIt may also be worth noting, that simply subclassing (without overriding any methods) the class works as expected. However, returing false in `shouldAlwaysOverrideExistingValue(...)` will not generate a single value at all (I stepped through the program and `getGeneratedValue()` is not called once).\r\n\r\nAlso, when I insert like 8 entities of a certain kind within a transaction it resulted in 11 records in the database (what the hell?!).\r\n\r\n**EDIT (2012-09-01):** I still do not have a Solution for the problem, Implementing my own sequence did not solve it. What I need is a way to be able to not set an Id explicitly (so it will be auto generated) and to be able to set an Id explicitly (so it will be used for the creation of the record in the database).\r\n\r\nI tried to define the column as auto_increment myself and ommit @GeneratedValue, however Validation will kick in and not allow me to save such an entity. If I specify a value != 0 and != zero, mysql will complain for a duplicate primary key.\r\n\r\nI&#39;m running out of ideas and options to try. Any? (starting a bounty)","title":"Manually specify the value of a primary key in JPA @GeneratedValue column","body":"<p>I'm having an Entity which has a primary key / id field like the following:</p>\n\n<pre><code>@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\nprivate Long id;\n</code></pre>\n\n<p>This works well. I'm using EclipseLink to create the DDL-Schema, and the column is correctly created like so:</p>\n\n<pre><code>`id` bigint(20) NOT NULL AUTO_INCREMENT\n</code></pre>\n\n<p>However, I've got several entities for which I do want to specify the PK myself (it's a little application that transfers data from an old database to the new one we're building). If I specify the ID for the POJO (using <code>setId(Long id)</code>) and persist it, EclipseLink <em>does not</em> save it (i.e. the record is saved, but the id is auto generated by eclipseLink).</p>\n\n<p><strong>Is there a way to manually specify the value of a column which has a @GeneratedValue ?</strong></p>\n\n<p>Here some thoughts on the issue:</p>\n\n<p>I tried to work around the problem by not using @GeneratedValue at all, but simply manually define the column to be AUTO_INCREMENTed. However this forces me to manually provide an IDs <em>always</em>, since EclipseLink validates the primary key (so it may not be null, zero, or a negative number). The exception message reads that I should specify eclipselink.id_validation, however this does not seem to make any difference (I annotated <code>@PrimaryKey(validation = IdValidation.NONE)</code> but still got the same message).</p>\n\n<p><strong>To clarify:</strong> I'm using EclipseLink (2.4.0) as persistence provider and I can't switch away from it (large portions of the project depend on eclipselink specific query hints, annotations, and classes).</p>\n\n<hr>\n\n<p>EDIT (In Response to the answers):</p>\n\n<p><strong>Custom Sequencing:</strong> I tried to implement my own sequencing. I tried subclassing DefaultSequence, but EclipseLink will tell me <code>Internal Exception: org.eclipse.persistence.platform.database.MySQLPlatform could not be found</code>. But I've checked: The class is on the classpath.</p>\n\n<p>So I subclassed another class, NativeSequence:</p>\n\n<pre><code>public class MyNativeSequence extends NativeSequence {\n\n    public MyNativeSequence() {\n        super();\n    }\n\n    public MyNativeSequence(final String name) {\n        super(name);\n    }\n\n\n    @Override\n    public boolean shouldAlwaysOverrideExistingValue() {\n        return false;\n    }\n\n    @Override\n    public boolean shouldAlwaysOverrideExistingValue(final String seqName) {\n        return false;\n    }\n\n}\n</code></pre>\n\n<p>However, what I get is the following:</p>\n\n<pre><code>javax.persistence.RollbackException: Exception [EclipseLink-7197] (Eclipse Persistence Services - 2.4.0.v20120608-r11652): org.eclipse.persistence.exceptions.ValidationException\nException Description: Null or zero primary key encountered in unit of work clone [de.dfv.datenbank.domain.Mitarbeiter[ id=null ]], primary key [null]. Set descriptors IdValidation or the \"eclipselink.id-validation\" property.\n    at org.eclipse.persistence.internal.jpa.transaction.EntityTransactionImpl.commitInternal(EntityTransactionImpl.java:102)\n    ...\nCaused by: Exception [EclipseLink-7197] (Eclipse Persistence Services - 2.4.0.v20120608-r11652): org.eclipse.persistence.exceptions.ValidationException\nException Description: Null or zero primary key encountered in unit of work clone [de.dfv.datenbank.domain.Mitarbeiter[ id=null ]], primary key [null]. Set descriptors IdValidation or the \"eclipselink.id-validation\" property.\n    at org.eclipse.persistence.exceptions.ValidationException.nullPrimaryKeyInUnitOfWorkClone(ValidationException.java:1451)\n    ...\n</code></pre>\n\n<p>(stack trace shortened for clarity). This is the same message which I got before. Shouldn't I subclass NativeSequence? If so, I don't know what to implement for the abstract methods in Sequence or StandardSequence.</p>\n\n<p>It may also be worth noting, that simply subclassing (without overriding any methods) the class works as expected. However, returing false in <code>shouldAlwaysOverrideExistingValue(...)</code> will not generate a single value at all (I stepped through the program and <code>getGeneratedValue()</code> is not called once).</p>\n\n<p>Also, when I insert like 8 entities of a certain kind within a transaction it resulted in 11 records in the database (what the hell?!).</p>\n\n<p><strong>EDIT (2012-09-01):</strong> I still do not have a Solution for the problem, Implementing my own sequence did not solve it. What I need is a way to be able to not set an Id explicitly (so it will be auto generated) and to be able to set an Id explicitly (so it will be used for the creation of the record in the database).</p>\n\n<p>I tried to define the column as auto_increment myself and ommit @GeneratedValue, however Validation will kick in and not allow me to save such an entity. If I specify a value != 0 and != zero, mysql will complain for a duplicate primary key.</p>\n\n<p>I'm running out of ideas and options to try. Any? (starting a bounty)</p>\n"},{"tags":["java","spring","websocket","jms","broker"],"owner":{"account_id":21136269,"reputation":45,"user_id":15539664,"display_name":"theoutstandingme"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692851361,"creation_date":1692849041,"question_id":76966115,"body_markdown":"I am creating a messenger. Android client is written in java and backend is also written in Java with Spring. \r\nThe client uses okhttp and retrofit.\r\nThe spring app uses boot, mvc, websocket, jms and broker.\r\nI know how to deal with boot and mvc well.\r\nBut I am just attempting to dive into jms and other stuff.\r\nI&#39;ve been struggling with those things for a while.\r\nMy context-path is &quot;gleamy&quot;. It&#39;s my app&#39;s name.\r\nEverything related to generally boot app and controllers is fine. DAOs work correctly.\r\nBut there&#39;re some issues with websocket and broker configs. I consider them troubles with paths, but I&#39;m just learning jms and sockets and don&#39;t know exactly.\r\nWhat it should be:\r\n1. Android client establishes connection with spring.\r\n2. client sends a request to the controller.\r\n3. it should be sent to another client that is in the same chat. I am attempting to send the same msg to all participants.\r\n4. client processes the msg\r\n\r\nPlease, give me a hand to deal with them.\r\n``` java\r\n@Configuration\r\n@EnableWebSocketMessageBroker\r\npublic class JmsConfig implements WebSocketMessageBrokerConfigurer{\r\n@Override\r\n\tpublic void configureMessageBroker(MessageBrokerRegistry registry)\r\n\t{\r\n\t\tregistry.setApplicationDestinationPrefixes(&quot;/gleamy&quot;);\r\n\t\tregistry.enableSimpleBroker(&quot;topic&quot;, &quot;queue&quot;);\r\n\t}\r\n\t@Override\r\n\tpublic void registerStompEndpoints(StompEndpointRegistry registry)\r\n\t{\r\n\t\tregistry.addEndpoint(&quot;/websocket&quot;);\r\n\t}\r\n\t@Override \r\n\tpublic void configureClientInboundChannel(ChannelRegistration registration)\r\n\t{\r\n\t\tregistration.interceptors(new WebSocketInterceptor());\r\n\t}\r\n\t\r\n}\r\n``` \r\n``` java\r\n@Configuration\r\n@EnableWebSocket\r\npublic class WebSocketConfig implements WebSocketConfigurer\r\n{\r\n\tprivate static final Logger logger = LoggerFactory.getLogger(WebSocketConfig.class);\r\n\t@Override\r\n\tpublic void registerWebSocketHandlers(WebSocketHandlerRegistry registry)\r\n\t{\r\n\t\tregistry.addHandler(appWebSocketHandler(), &quot;/websocket&quot;).setAllowedOrigins(&quot;*&quot;);\r\n\t}\r\n\t@Bean\r\n\tpublic WebSocketHandler appWebSocketHandler()\r\n\t{\r\n\t\treturn new TextWebSocketHandler(){\r\n\t\t\t@Override \r\n\t\t\tprotected void handleTextMessage(WebSocketSession session, TextMessage msg)\r\n\t\t\t{\r\n\t\t\t\tlogger.info(msg.toString());\r\n\t\t\t\ttry{\r\n\t\t\t\t\tsession.sendMessage(msg);\r\n\t\t\t\t}\r\n\t\t\t\tcatch(Exception ex)\r\n\t\t\t\t{\r\n\t\t\t\t\tex.printStackTrace(System.err);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n}\r\n\r\n```\r\n``` java\r\n@Service\r\n@Getter @Setter\r\npublic class MessageService {\r\n\t \r\n\tprivate final ApplicationContext appContext;\r\n\tprivate final JmsTemplate jmsTpl;\r\n\tprivate final SimpMessagingTemplate simpJms;\r\n\tprivate final Map&lt;String, AbstractDAO&gt; daos;\r\n\r\n\t@Autowired\r\n\tpublic MessageService(ApplicationContext appContext, JmsTemplate jmsTpl, SimpMessagingTemplate simpJms)\r\n\t{\r\n\t\tthis.appContext = appContext;\r\n\t\tthis.jmsTpl = jmsTpl;\r\n\t\tthis.simpJms = simpJms;\r\n\t\tdaos = new HashMap&lt;&gt;();\r\n\t\taddDAO(&quot;chatDAO&quot;,appContext.getBean(&quot;chatDAO&quot;, ChatDAO.class));\r\n\t}\r\n\t\r\n\tpublic void addDAO(String name, AbstractDAO dao)\r\n\t{\r\n\t\tdaos.put(name, dao);\r\n\t}\r\n\r\n\tpublic void notifyChatMembers(MsgInfo msg) {\r\n\t\tChatDAO chatDAO = (ChatDAO)daos.get(&quot;chatDAO&quot;);\r\n\t\tfor (Long userid : chatDAO.getUserIdsFromChat(msg.getChatid()))\r\n\t\t{\r\n\t\t\tsimpJms.convertAndSend(&quot;/topic/users/&quot; + userid, msg);\r\n\t\t}\r\n\t\t\t\r\n\t}\r\n}\r\n```\r\n``` java\r\n@RestController\r\n@RequestMapping(&quot;/messages&quot;)\r\npublic class MessageController {\r\n    private final MessageDAO msgDAO;\r\n\tprivate final MessageService msgService;\r\n    \r\n    public MessageController(MessageDAO msgDAO, MessageService msgService)\r\n    {\r\n        this.msgDAO  = msgDAO;\r\n\t\tthis.msgService = msgService;\r\n    }\r\n    @PostMapping(&quot;/add&quot;)\r\n    @ResponseBody\r\n    public Map&lt;String, Long&gt; addMessage(@RequestBody MsgInfo msg)\r\n    {\r\n\t\tMap&lt;String, Long&gt; response = new HashMap&lt;&gt;();\r\n\t\tlong msgid = msgDAO.add(msg);\r\n\t\tresponse.put(&quot;msgid&quot;, msgid);\r\n\t\tmsgService.notifyChatMembers(msg);\r\n        return response;\r\n    }\r\n}\r\n```","title":"Client doesn&#39;t receive message from topic","body":"<p>I am creating a messenger. Android client is written in java and backend is also written in Java with Spring.\nThe client uses okhttp and retrofit.\nThe spring app uses boot, mvc, websocket, jms and broker.\nI know how to deal with boot and mvc well.\nBut I am just attempting to dive into jms and other stuff.\nI've been struggling with those things for a while.\nMy context-path is &quot;gleamy&quot;. It's my app's name.\nEverything related to generally boot app and controllers is fine. DAOs work correctly.\nBut there're some issues with websocket and broker configs. I consider them troubles with paths, but I'm just learning jms and sockets and don't know exactly.\nWhat it should be:</p>\n<ol>\n<li>Android client establishes connection with spring.</li>\n<li>client sends a request to the controller.</li>\n<li>it should be sent to another client that is in the same chat. I am attempting to send the same msg to all participants.</li>\n<li>client processes the msg</li>\n</ol>\n<p>Please, give me a hand to deal with them.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableWebSocketMessageBroker\npublic class JmsConfig implements WebSocketMessageBrokerConfigurer{\n@Override\n    public void configureMessageBroker(MessageBrokerRegistry registry)\n    {\n        registry.setApplicationDestinationPrefixes(&quot;/gleamy&quot;);\n        registry.enableSimpleBroker(&quot;topic&quot;, &quot;queue&quot;);\n    }\n    @Override\n    public void registerStompEndpoints(StompEndpointRegistry registry)\n    {\n        registry.addEndpoint(&quot;/websocket&quot;);\n    }\n    @Override \n    public void configureClientInboundChannel(ChannelRegistration registration)\n    {\n        registration.interceptors(new WebSocketInterceptor());\n    }\n    \n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableWebSocket\npublic class WebSocketConfig implements WebSocketConfigurer\n{\n    private static final Logger logger = LoggerFactory.getLogger(WebSocketConfig.class);\n    @Override\n    public void registerWebSocketHandlers(WebSocketHandlerRegistry registry)\n    {\n        registry.addHandler(appWebSocketHandler(), &quot;/websocket&quot;).setAllowedOrigins(&quot;*&quot;);\n    }\n    @Bean\n    public WebSocketHandler appWebSocketHandler()\n    {\n        return new TextWebSocketHandler(){\n            @Override \n            protected void handleTextMessage(WebSocketSession session, TextMessage msg)\n            {\n                logger.info(msg.toString());\n                try{\n                    session.sendMessage(msg);\n                }\n                catch(Exception ex)\n                {\n                    ex.printStackTrace(System.err);\n                }\n            }\n        };\n    }\n}\n\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\n@Getter @Setter\npublic class MessageService {\n     \n    private final ApplicationContext appContext;\n    private final JmsTemplate jmsTpl;\n    private final SimpMessagingTemplate simpJms;\n    private final Map&lt;String, AbstractDAO&gt; daos;\n\n    @Autowired\n    public MessageService(ApplicationContext appContext, JmsTemplate jmsTpl, SimpMessagingTemplate simpJms)\n    {\n        this.appContext = appContext;\n        this.jmsTpl = jmsTpl;\n        this.simpJms = simpJms;\n        daos = new HashMap&lt;&gt;();\n        addDAO(&quot;chatDAO&quot;,appContext.getBean(&quot;chatDAO&quot;, ChatDAO.class));\n    }\n    \n    public void addDAO(String name, AbstractDAO dao)\n    {\n        daos.put(name, dao);\n    }\n\n    public void notifyChatMembers(MsgInfo msg) {\n        ChatDAO chatDAO = (ChatDAO)daos.get(&quot;chatDAO&quot;);\n        for (Long userid : chatDAO.getUserIdsFromChat(msg.getChatid()))\n        {\n            simpJms.convertAndSend(&quot;/topic/users/&quot; + userid, msg);\n        }\n            \n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\n@RequestMapping(&quot;/messages&quot;)\npublic class MessageController {\n    private final MessageDAO msgDAO;\n    private final MessageService msgService;\n    \n    public MessageController(MessageDAO msgDAO, MessageService msgService)\n    {\n        this.msgDAO  = msgDAO;\n        this.msgService = msgService;\n    }\n    @PostMapping(&quot;/add&quot;)\n    @ResponseBody\n    public Map&lt;String, Long&gt; addMessage(@RequestBody MsgInfo msg)\n    {\n        Map&lt;String, Long&gt; response = new HashMap&lt;&gt;();\n        long msgid = msgDAO.add(msg);\n        response.put(&quot;msgid&quot;, msgid);\n        msgService.notifyChatMembers(msg);\n        return response;\n    }\n}\n</code></pre>\n"},{"tags":["java","quartz-scheduler","cronexpression"],"answers":[{"comments":[{"owner":{"account_id":2207538,"reputation":4868,"user_id":1950349,"accept_rate":82,"display_name":"user1950349"},"score":1,"creation_date":1454632455,"post_id":35214234,"comment_id":58144013,"body_markdown":"Thanks Ian. One more thing what will be the cron expression to run every 15 minutes but for the first time it should run immediately? And then afterwards every 15 minutes? Does this looks right `0 0/15 * 1/1 * ? *`?","body":"Thanks Ian. One more thing what will be the cron expression to run every 15 minutes but for the first time it should run immediately? And then afterwards every 15 minutes? Does this looks right <code>0 0&#47;15 * 1&#47;1 * ? *</code>?"},{"owner":{"account_id":7505413,"reputation":5686,"user_id":5702105,"display_name":"Ian Mc"},"score":0,"creation_date":1454632645,"post_id":35214234,"comment_id":58144066,"body_markdown":"That is the correct cron expression for every 15 minutes.  Cron is a rigid structure, and doesn&#39;t conform well what you are asking (now, now+15min, etc).  That cron will run at minute, 0, 15, 30, 45 ..","body":"That is the correct cron expression for every 15 minutes.  Cron is a rigid structure, and doesn&#39;t conform well what you are asking (now, now+15min, etc).  That cron will run at minute, 0, 15, 30, 45 .."},{"owner":{"account_id":7505413,"reputation":5686,"user_id":5702105,"display_name":"Ian Mc"},"score":0,"creation_date":1454632972,"post_id":35214234,"comment_id":58144163,"body_markdown":"Maybe you need Triggers, not cron","body":"Maybe you need Triggers, not cron"},{"owner":{"account_id":13717415,"reputation":1385,"user_id":9898251,"display_name":"Badri Paudel"},"score":0,"creation_date":1647873746,"post_id":35214234,"comment_id":126474247,"body_markdown":"If you&#39;re using  ```spring [spring-boot]``` make sure to omit last  * , otherwise it will throw an error saying can&#39;t accept fields other than six.","body":"If you&#39;re using  <code>spring [spring-boot]</code> make sure to omit last  * , otherwise it will throw an error saying can&#39;t accept fields other than six."}],"tags":[],"owner":{"account_id":7505413,"reputation":5686,"user_id":5702105,"display_name":"Ian Mc"},"comment_count":4,"down_vote_count":0,"up_vote_count":34,"is_accepted":true,"score":34,"last_activity_date":1623136235,"creation_date":1454631750,"answer_id":35214234,"question_id":35214149,"body_markdown":"The first element represents the seconds; to run at second 0 and 30 use the following:\r\n\r\n```\r\n&lt;cron-expression&gt;0/30 0/1 * 1/1 * ? *&lt;/cron-expression&gt;\r\n```","title":"cron expression for every 30 seconds in quartz scheduler?","body":"<p>The first element represents the seconds; to run at second 0 and 30 use the following:</p>\n<pre><code>&lt;cron-expression&gt;0/30 0/1 * 1/1 * ? *&lt;/cron-expression&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7162347,"reputation":75,"user_id":5472704,"accept_rate":20,"display_name":"Shailesh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1505975771,"creation_date":1505975639,"answer_id":46336985,"question_id":35214149,"body_markdown":"If you are using Spring framework, make use of `@PostConstruct` annotation and then `@Scheduled(cron=0 0/15 * 1/1 * ?)` to trigger now, now+15min and so on.","title":"cron expression for every 30 seconds in quartz scheduler?","body":"<p>If you are using Spring framework, make use of <code>@PostConstruct</code> annotation and then <code>@Scheduled(cron=0 0/15 * 1/1 * ?)</code> to trigger now, now+15min and so on.</p>\n"},{"tags":[],"owner":{"account_id":2534969,"reputation":565,"user_id":3632455,"accept_rate":30,"display_name":"hariprasad"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1692851321,"creation_date":1537221042,"answer_id":52376143,"question_id":35214149,"body_markdown":"The same effect we can reach (Quartz Spring) using simpler construction:\r\n\r\n    0/30 * * * * ? *\r\n\r\nThe last asterisk we can omit.\r\n\r\n    0/30 * * * * ?\r\n\r\n[Quartz scheduler cron trigger documentation 2.x][1]\r\n\r\n\r\n  [1]: http://www.quartz-scheduler.org/documentation/quartz-2.x/tutorials/crontrigger.html","title":"cron expression for every 30 seconds in quartz scheduler?","body":"<p>The same effect we can reach (Quartz Spring) using simpler construction:</p>\n<pre><code>0/30 * * * * ? *\n</code></pre>\n<p>The last asterisk we can omit.</p>\n<pre><code>0/30 * * * * ?\n</code></pre>\n<p><a href=\"http://www.quartz-scheduler.org/documentation/quartz-2.x/tutorials/crontrigger.html\" rel=\"nofollow noreferrer\">Quartz scheduler cron trigger documentation 2.x</a></p>\n"},{"tags":[],"owner":{"account_id":1874652,"reputation":955,"user_id":1696115,"accept_rate":0,"display_name":"Jar Yit"},"comment_count":0,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1566964523,"creation_date":1566964523,"answer_id":57684846,"question_id":35214149,"body_markdown":"I hope this answer will help you. Please define the cron expression the below \r\n\r\n     0/30 * * * * ? *\r\n\r\nAnd then you go this website and test [Cron Expression Generator &amp; Explainer - Quartz][1].\r\n\r\n\r\n  [1]: https://www.freeformatter.com/cron-expression-generator-quartz.html","title":"cron expression for every 30 seconds in quartz scheduler?","body":"<p>I hope this answer will help you. Please define the cron expression the below </p>\n\n<pre><code> 0/30 * * * * ? *\n</code></pre>\n\n<p>And then you go this website and test <a href=\"https://www.freeformatter.com/cron-expression-generator-quartz.html\" rel=\"noreferrer\">Cron Expression Generator &amp; Explainer - Quartz</a>.</p>\n"}],"owner":{"account_id":2207538,"reputation":4868,"user_id":1950349,"accept_rate":82,"display_name":"user1950349"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":126421,"favorite_count":0,"down_vote_count":0,"up_vote_count":26,"accepted_answer_id":35214234,"answer_count":4,"score":26,"last_activity_date":1692851321,"creation_date":1454631224,"question_id":35214149,"body_markdown":"I am using Quartz Scheduler to run my jobs. I want to run my job every thirty seconds. What will be my cron expression for that?\r\n\r\nFor every one minute, I am using below cron expression:\r\n\r\n\t&lt;cron-expression&gt;0 0/1 * 1/1 * ? *&lt;/cron-expression&gt;\r\n\t\r\nWhat it will be for every thirty seconds?","title":"cron expression for every 30 seconds in quartz scheduler?","body":"<p>I am using Quartz Scheduler to run my jobs. I want to run my job every thirty seconds. What will be my cron expression for that?</p>\n\n<p>For every one minute, I am using below cron expression:</p>\n\n<pre><code>&lt;cron-expression&gt;0 0/1 * 1/1 * ? *&lt;/cron-expression&gt;\n</code></pre>\n\n<p>What it will be for every thirty seconds?</p>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":27552468,"reputation":25,"user_id":21027269,"display_name":"arief ariefshamsuddin"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1692850737,"creation_date":1692850737,"answer_id":76966197,"question_id":76942418,"body_markdown":"Nevermind, i got the answer after discovering it with my colleague. I should delete `implementation project(&#39;:tcn_liftboard&#39;)` from Module-Level `build.gradle` because it has duplicate issues.","title":"Could not resolve all task dependencies for configuration &#39;:app:debugCompileClasspath&#39; in java for android","body":"<p>Nevermind, i got the answer after discovering it with my colleague. I should delete <code>implementation project(':tcn_liftboard')</code> from Module-Level <code>build.gradle</code> because it has duplicate issues.</p>\n"}],"owner":{"account_id":27552468,"reputation":25,"user_id":21027269,"display_name":"arief ariefshamsuddin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":216,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76966197,"answer_count":1,"score":0,"last_activity_date":1692850737,"creation_date":1692592515,"question_id":76942418,"body_markdown":"I am currently dealing with legacy codes in `Java for android`, however this error comes up after I have dealt with the version of the sdk.\r\n\r\n\r\n```\r\nCould not determine the dependencies of task &#39;:app:compileDebugJavaWithJavac&#39;.\r\n&gt; Could not resolve all task dependencies for configuration &#39;:app:debugCompileClasspath&#39;.\r\n   &gt; Could not resolve project :tcn_liftboard.\r\n     Required by:\r\n         project :app\r\n      &gt; No matching configuration of project :tcn_liftboard was found. The consumer was configured to find an API of a component, preferably optimized for Android, as well as attribute &#39;com.android.build.api.attributes.BuildTypeAttr&#39; with value &#39;debug&#39; but:\r\n          - None of the consumable configurations have attributes.\r\n```\r\n\r\nShown below is the Project-Level `build.gradle`\r\n\r\n\r\n```\r\n// Top-level build file where you can add configuration options common to all sub-projects/modules.\r\n\r\nbuildscript {\r\n    \r\n    repositories {\r\n        google()\r\n        mavenCentral()\r\n    }\r\n    dependencies {\r\n        classpath &#39;com.android.tools.build:gradle:7.0.3&#39;\r\n\r\n\r\n        // NOTE: Do not place your application dependencies here; they belong\r\n        // in the individual module build.gradle files\r\n    }\r\n}\r\n\r\nallprojects {\r\n    repositories {\r\n        google()\r\n        mavenCentral()\r\n    }\r\n}\r\n\r\n\r\next {\r\n    compileVersion = 31\r\n    buildVersion = &#39;27.0.3&#39;\r\n    minVersion = 18\r\n    targetVersion = 31\r\n    supportVersion = &#39;27.1.1&#39;\r\n    commonsNetVersion = &quot;3.6&quot;\r\n    glideVersion = &quot;4.8.0&quot;\r\n    traypVersion = &quot;0.12.0&quot;\r\n    gsonVersion = &quot;2.8.5&quot;\r\n}\r\n\r\ntask clean(type: Delete) {\r\n    delete rootProject.buildDir\r\n}\r\n\r\n```\r\n\r\nand this is the Module-Level `build.gradle`\r\n\r\n\r\n```\r\napply plugin: &#39;com.android.application&#39;\r\n\r\nandroid {\r\n    compileSdkVersion 31\r\n    buildToolsVersion &quot;30.0.3&quot;\r\n    defaultConfig {\r\n        applicationId &quot;com.tcn.sdk.liftdemo&quot;\r\n        minSdkVersion 18\r\n        targetSdkVersion 31\r\n        versionCode 1\r\n        versionName &quot;1.0.1&quot;\r\n        testInstrumentationRunner &quot;android.support.test.runner.AndroidJUnitRunner&quot;\r\n    }\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android.txt&#39;), &#39;proguard-rules.pro&#39;\r\n            android.applicationVariants.all { variant -&gt;\r\n                variant.outputs.all {\r\n                    outputFileName = &quot;TcnSdkLiftDemo-${defaultConfig.versionName}.apk&quot;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    sourceSets {\r\n        main {\r\n            jniLibs.srcDirs = [&#39;src/main/jniLibs&#39;]\r\n            aidl.srcDirs = [&#39;src/main/aidl&#39;]\r\n        }\r\n    }\r\n}\r\n\r\nrepositories {\r\n    flatDir {\r\n        dirs &#39;libs&#39;   // aar目录\r\n    }\r\n}\r\n\r\ndependencies {\r\n    implementation fileTree(dir: &#39;libs&#39;, include: [&#39;*.jar&#39;])\r\n    implementation &quot;androidx.appcompat:appcompat:1.5.1&quot;\r\n    testImplementation &#39;junit:junit:4.12&#39;\r\n    implementation(name: &#39;sdk_auth_lib-release&#39;, ext: &#39;aar&#39;)\r\n    implementation(name: &#39;tcn_liftboard-release&#39;, ext: &#39;aar&#39;)\r\n    implementation project(&#39;:tcn_liftboard&#39;)\r\n}\r\n\r\n```\r\n\r\n\r\nThe gradle sync worked perfectly but the error I encounter is during debugging. \r\n\r\nI tried changing `buildToolsVersion` to multiple versions, but it does not solve my problem.","title":"Could not resolve all task dependencies for configuration &#39;:app:debugCompileClasspath&#39; in java for android","body":"<p>I am currently dealing with legacy codes in <code>Java for android</code>, however this error comes up after I have dealt with the version of the sdk.</p>\n<pre><code>Could not determine the dependencies of task ':app:compileDebugJavaWithJavac'.\n&gt; Could not resolve all task dependencies for configuration ':app:debugCompileClasspath'.\n   &gt; Could not resolve project :tcn_liftboard.\n     Required by:\n         project :app\n      &gt; No matching configuration of project :tcn_liftboard was found. The consumer was configured to find an API of a component, preferably optimized for Android, as well as attribute 'com.android.build.api.attributes.BuildTypeAttr' with value 'debug' but:\n          - None of the consumable configurations have attributes.\n</code></pre>\n<p>Shown below is the Project-Level <code>build.gradle</code></p>\n<pre><code>// Top-level build file where you can add configuration options common to all sub-projects/modules.\n\nbuildscript {\n    \n    repositories {\n        google()\n        mavenCentral()\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:7.0.3'\n\n\n        // NOTE: Do not place your application dependencies here; they belong\n        // in the individual module build.gradle files\n    }\n}\n\nallprojects {\n    repositories {\n        google()\n        mavenCentral()\n    }\n}\n\n\next {\n    compileVersion = 31\n    buildVersion = '27.0.3'\n    minVersion = 18\n    targetVersion = 31\n    supportVersion = '27.1.1'\n    commonsNetVersion = &quot;3.6&quot;\n    glideVersion = &quot;4.8.0&quot;\n    traypVersion = &quot;0.12.0&quot;\n    gsonVersion = &quot;2.8.5&quot;\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n\n</code></pre>\n<p>and this is the Module-Level <code>build.gradle</code></p>\n<pre><code>apply plugin: 'com.android.application'\n\nandroid {\n    compileSdkVersion 31\n    buildToolsVersion &quot;30.0.3&quot;\n    defaultConfig {\n        applicationId &quot;com.tcn.sdk.liftdemo&quot;\n        minSdkVersion 18\n        targetSdkVersion 31\n        versionCode 1\n        versionName &quot;1.0.1&quot;\n        testInstrumentationRunner &quot;android.support.test.runner.AndroidJUnitRunner&quot;\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n            android.applicationVariants.all { variant -&gt;\n                variant.outputs.all {\n                    outputFileName = &quot;TcnSdkLiftDemo-${defaultConfig.versionName}.apk&quot;\n                }\n            }\n        }\n    }\n    sourceSets {\n        main {\n            jniLibs.srcDirs = ['src/main/jniLibs']\n            aidl.srcDirs = ['src/main/aidl']\n        }\n    }\n}\n\nrepositories {\n    flatDir {\n        dirs 'libs'   // aar目录\n    }\n}\n\ndependencies {\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n    implementation &quot;androidx.appcompat:appcompat:1.5.1&quot;\n    testImplementation 'junit:junit:4.12'\n    implementation(name: 'sdk_auth_lib-release', ext: 'aar')\n    implementation(name: 'tcn_liftboard-release', ext: 'aar')\n    implementation project(':tcn_liftboard')\n}\n\n</code></pre>\n<p>The gradle sync worked perfectly but the error I encounter is during debugging.</p>\n<p>I tried changing <code>buildToolsVersion</code> to multiple versions, but it does not solve my problem.</p>\n"},{"tags":["java","linked-list","partition"],"comments":[{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":0,"creation_date":1692829795,"post_id":76965100,"comment_id":135679048,"body_markdown":"hard without the input data.... you can try to debug it, eventually using this [Java Visualizer](https://cscircles.cemc.uwaterloo.ca/java_visualize)","body":"hard without the input data.... you can try to debug it, eventually using this <a href=\"https://cscircles.cemc.uwaterloo.ca/java_visualize\" rel=\"nofollow noreferrer\">Java Visualizer</a>"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":0,"creation_date":1692832991,"post_id":76965100,"comment_id":135679348,"body_markdown":"I suspect when *transferring* a node to the lesser or greater list, its `next` is not being deleted and `less.next = great.next` will eventually create a loop","body":"I suspect when <i>transferring</i> a node to the lesser or greater list, its <code>next</code> is not being deleted and <code>less.next = great.next</code> will eventually create a loop"}],"answers":[{"tags":[],"owner":{"account_id":7142980,"reputation":323263,"user_id":5459839,"display_name":"trincot"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1692832283,"creation_date":1692830040,"answer_id":76965276,"question_id":76965100,"body_markdown":"The problem is at the end of your code:\r\n\r\nAfter the loop, `great` points to the node with the last value that was found greater (or equal) than the pivot. It should thus become the **tail** of your final list. But it might well be that in the original list it was followed by a node with a small value, and this link has not been changed.\r\n\r\nFor instance, with the input example `2→1` and &#119909;=2, we get this situation before the loop starts:\r\n\r\n```none\r\nlesser less\r\n   ↓     ↓\r\n┌───────────┐\r\n│ val: -101 │\r\n│ next: null│\r\n└───────────┘                    \r\n                                 \r\ngreater great      head  temp\r\n   ↓      ↓         ↓     ↓\r\n┌───────────┐     ┌───────────┐     ┌───────────┐\r\n│ val: -101 │     │ val: 2    │     │ val: 1    │\r\n│ next: null│     │ next: ─────────►│ next: null│\r\n└───────────┘     └───────────┘     └───────────┘\r\n```\r\n\r\nAfter the first iteration:\r\n\r\n```none\r\nlesser less\r\n   ↓     ↓\r\n┌───────────┐\r\n│ val: -101 │\r\n│ next: null│\r\n└───────────┘                    \r\n                                 \r\ngreater            head great        temp\r\n   ↓                 ↓    ↓            ↓\r\n┌───────────┐     ┌───────────┐     ┌───────────┐\r\n│ val: -101 │     │ val: 2    │     │ val: 1    │\r\n│ next: ─────────►│ next: ─────────►│ next: null│\r\n└───────────┘     └───────────┘     └───────────┘\r\n```\r\n\r\nAfter the second iteration:\r\n\r\n```none\r\nlesser\r\n   ↓\r\n┌───────────┐\r\n│ val: -101 │\r\n│ next: ────────────────────────┐\r\n└───────────┘                   │ \r\n                                │ \r\ngreater            head great   │     less       temp==null\r\n   ↓                 ↓    ↓     │       ↓\r\n┌───────────┐     ┌───────────┐ │   ┌───────────┐\r\n│ val: -101 │     │ val: 2    │ └──►│ val: 1    │\r\n│ next: ─────────►│ next: ─────────►│ next: null│\r\n└───────────┘     └───────────┘     └───────────┘\r\n```\r\n\r\nAnd now the faulty statement `less.next = great.next` will introduce the loop -- the node with value 1 gets a self reference!\r\n\r\nFirst, realise that `less` is the last node of the first partition, and `great` the last node of the second partition. That means that `great.next` should be set to `null` -- it really must be the last node in the final list.\r\n\r\nSecondly, it is true that `less.next` should be updated, but it should be set to the *first* node of the second partition, which is `greater.next` (not `great.next`). \r\n\r\nCorrection:\r\n\r\n```\r\n        great.next = null; // added\r\n        less.next = greater.next; // corrected\r\n``` \r\n\r\n\r\nAfter these two statements the example will resolve to:\r\n\r\n```none\r\nlesser\r\n   ↓\r\n┌───────────┐\r\n│ val: -101 │\r\n│ next: ────────────────────────┐\r\n└───────────┘                   │ \r\n                                │ \r\ngreater            head great   │     less       temp==null\r\n   ↓                 ↓    ↓     │       ↓\r\n┌───────────┐     ┌───────────┐ │   ┌───────────┐\r\n│ val: -101 │     │ val: 2    │ └──►│ val: 1    │\r\n│ next: ─────────►│ next:null │     │ next: ─┐  │\r\n└───────────┘  ┌─►└───────────┘     └────────│──┘\r\n               └─────────────────────────────┘\r\n```\r\n\r\nAnd when we return `lesser.next` (correct), the local variables run out of scope, and the above simplifies to:\r\n\r\n```none\r\n                                     (returned)     \r\n                                        ↓\r\n                  ┌───────────┐     ┌───────────┐\r\n                  │ val: 2    │     │ val: 1    │\r\n               ┌─►│ next:null │     │ next: ─┐  │\r\n               │  └───────────┘     └────────│──┘\r\n               └─────────────────────────────┘\r\n```\r\n\r\n","title":"Why is my code for partitioning a linked list returning a list with a cycle?","body":"<p>The problem is at the end of your code:</p>\n<p>After the loop, <code>great</code> points to the node with the last value that was found greater (or equal) than the pivot. It should thus become the <strong>tail</strong> of your final list. But it might well be that in the original list it was followed by a node with a small value, and this link has not been changed.</p>\n<p>For instance, with the input example <code>2→1</code> and 𝑥=2, we get this situation before the loop starts:</p>\n<pre class=\"lang-none prettyprint-override\"><code>lesser less\n   ↓     ↓\n┌───────────┐\n│ val: -101 │\n│ next: null│\n└───────────┘                    \n                                 \ngreater great      head  temp\n   ↓      ↓         ↓     ↓\n┌───────────┐     ┌───────────┐     ┌───────────┐\n│ val: -101 │     │ val: 2    │     │ val: 1    │\n│ next: null│     │ next: ─────────►│ next: null│\n└───────────┘     └───────────┘     └───────────┘\n</code></pre>\n<p>After the first iteration:</p>\n<pre class=\"lang-none prettyprint-override\"><code>lesser less\n   ↓     ↓\n┌───────────┐\n│ val: -101 │\n│ next: null│\n└───────────┘                    \n                                 \ngreater            head great        temp\n   ↓                 ↓    ↓            ↓\n┌───────────┐     ┌───────────┐     ┌───────────┐\n│ val: -101 │     │ val: 2    │     │ val: 1    │\n│ next: ─────────►│ next: ─────────►│ next: null│\n└───────────┘     └───────────┘     └───────────┘\n</code></pre>\n<p>After the second iteration:</p>\n<pre class=\"lang-none prettyprint-override\"><code>lesser\n   ↓\n┌───────────┐\n│ val: -101 │\n│ next: ────────────────────────┐\n└───────────┘                   │ \n                                │ \ngreater            head great   │     less       temp==null\n   ↓                 ↓    ↓     │       ↓\n┌───────────┐     ┌───────────┐ │   ┌───────────┐\n│ val: -101 │     │ val: 2    │ └──►│ val: 1    │\n│ next: ─────────►│ next: ─────────►│ next: null│\n└───────────┘     └───────────┘     └───────────┘\n</code></pre>\n<p>And now the faulty statement <code>less.next = great.next</code> will introduce the loop -- the node with value 1 gets a self reference!</p>\n<p>First, realise that <code>less</code> is the last node of the first partition, and <code>great</code> the last node of the second partition. That means that <code>great.next</code> should be set to <code>null</code> -- it really must be the last node in the final list.</p>\n<p>Secondly, it is true that <code>less.next</code> should be updated, but it should be set to the <em>first</em> node of the second partition, which is <code>greater.next</code> (not <code>great.next</code>).</p>\n<p>Correction:</p>\n<pre><code>        great.next = null; // added\n        less.next = greater.next; // corrected\n</code></pre>\n<p>After these two statements the example will resolve to:</p>\n<pre class=\"lang-none prettyprint-override\"><code>lesser\n   ↓\n┌───────────┐\n│ val: -101 │\n│ next: ────────────────────────┐\n└───────────┘                   │ \n                                │ \ngreater            head great   │     less       temp==null\n   ↓                 ↓    ↓     │       ↓\n┌───────────┐     ┌───────────┐ │   ┌───────────┐\n│ val: -101 │     │ val: 2    │ └──►│ val: 1    │\n│ next: ─────────►│ next:null │     │ next: ─┐  │\n└───────────┘  ┌─►└───────────┘     └────────│──┘\n               └─────────────────────────────┘\n</code></pre>\n<p>And when we return <code>lesser.next</code> (correct), the local variables run out of scope, and the above simplifies to:</p>\n<pre class=\"lang-none prettyprint-override\"><code>                                     (returned)     \n                                        ↓\n                  ┌───────────┐     ┌───────────┐\n                  │ val: 2    │     │ val: 1    │\n               ┌─►│ next:null │     │ next: ─┐  │\n               │  └───────────┘     └────────│──┘\n               └─────────────────────────────┘\n</code></pre>\n"},{"tags":[],"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692836952,"creation_date":1692836952,"answer_id":76965606,"question_id":76965100,"body_markdown":"- `lesser` is the first part, starting with a dummy node.\r\n- `greater` is the second part, starting with a dummy node.\r\n- `less` is the tail of the first part.\r\n- `great` is the tail of the second part.\r\n\r\n_Better names would have helped._\r\n\r\nAt the end: remove the dummies and tie the  end of the tails.\r\n\r\n    great.next = null; // When a smaller followed\r\n    less.next = greater.next;\r\n    lesser = lesser.next;\r\n    return lesser;\r\n\r\nAs `less` could have been `lesser` and `great` be `greater` the order of rewiring the links is important.\r\n\r\nYou might have opted for\r\n\r\n    ListNode left = null;\r\n    ListNode leftTail = null;\r\n    ListNode right = null;\r\n    ListNode rightTail = null;\r\n\r\n    while (head != null) {\r\n        if (head.val &lt; x) {\r\n            if (left == null) {\r\n                left = head;\r\n            } else {\r\n                leftTail.next = head;\r\n            }\r\n            leftTail = head;\r\n        } else {\r\n            if (right == null) {\r\n                right = head;\r\n            } else {\r\n                rightTail.next = head;\r\n            }\r\n            rightTail = head;\r\n        }\r\n        head = head.next;\r\n    }\r\n    if (rightTail != null) {\r\n        rightTail.next = null;\r\n    }\r\n    if (leftTail != null) {\r\n        leftTail.next = right;\r\n    } else {\r\n        left = right;\r\n    }\r\n    return left;\r\n\r\nThe above one should have seen (at least once), where the LHS variable stems from a condition, the RHS being the same value.\r\nIn a language like C one would use this style, with _aliases_.","title":"Why is my code for partitioning a linked list returning a list with a cycle?","body":"<ul>\n<li><code>lesser</code> is the first part, starting with a dummy node.</li>\n<li><code>greater</code> is the second part, starting with a dummy node.</li>\n<li><code>less</code> is the tail of the first part.</li>\n<li><code>great</code> is the tail of the second part.</li>\n</ul>\n<p><em>Better names would have helped.</em></p>\n<p>At the end: remove the dummies and tie the  end of the tails.</p>\n<pre><code>great.next = null; // When a smaller followed\nless.next = greater.next;\nlesser = lesser.next;\nreturn lesser;\n</code></pre>\n<p>As <code>less</code> could have been <code>lesser</code> and <code>great</code> be <code>greater</code> the order of rewiring the links is important.</p>\n<p>You might have opted for</p>\n<pre><code>ListNode left = null;\nListNode leftTail = null;\nListNode right = null;\nListNode rightTail = null;\n\nwhile (head != null) {\n    if (head.val &lt; x) {\n        if (left == null) {\n            left = head;\n        } else {\n            leftTail.next = head;\n        }\n        leftTail = head;\n    } else {\n        if (right == null) {\n            right = head;\n        } else {\n            rightTail.next = head;\n        }\n        rightTail = head;\n    }\n    head = head.next;\n}\nif (rightTail != null) {\n    rightTail.next = null;\n}\nif (leftTail != null) {\n    leftTail.next = right;\n} else {\n    left = right;\n}\nreturn left;\n</code></pre>\n<p>The above one should have seen (at least once), where the LHS variable stems from a condition, the RHS being the same value.\nIn a language like C one would use this style, with <em>aliases</em>.</p>\n"},{"tags":[],"owner":{"account_id":19900384,"reputation":81,"user_id":14580500,"display_name":"ash"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692849409,"creation_date":1692849409,"answer_id":76966133,"question_id":76965100,"body_markdown":"I have modified your code based on your design premise.\\\r\nThe exception is you have not deal the node as a simple node ,you think you just put a node after less and great.But actually you put the linked list after the less and great so that the cycle appeared.\\\r\nThe follow is my code .\r\n\r\n    public static ListNode partition(ListNode head, int x) {\r\n            ListNode lesser = new ListNode(-101);\r\n            ListNode less = lesser;\r\n            ListNode greater = new ListNode(-101);\r\n            ListNode great = greater;\r\n            while(head!=null){\r\n                ListNode temp= head;\r\n                head = head.next;\r\n                //this is important ,to cut the list to a single node\r\n                temp.next = null;\r\n                if(temp.val&lt;x){\r\n                    less.next=temp;\r\n                    less=less.next;\r\n                }\r\n                else{\r\n                    great.next=temp;\r\n                    great=great.next;\r\n                }\r\n            }\r\n    \r\n    \r\n            less.next = greater.next;\r\n            return lesser.next;\r\n        }","title":"Why is my code for partitioning a linked list returning a list with a cycle?","body":"<p>I have modified your code based on your design premise.<br />\nThe exception is you have not deal the node as a simple node ,you think you just put a node after less and great.But actually you put the linked list after the less and great so that the cycle appeared.<br />\nThe follow is my code .</p>\n<pre><code>public static ListNode partition(ListNode head, int x) {\n        ListNode lesser = new ListNode(-101);\n        ListNode less = lesser;\n        ListNode greater = new ListNode(-101);\n        ListNode great = greater;\n        while(head!=null){\n            ListNode temp= head;\n            head = head.next;\n            //this is important ,to cut the list to a single node\n            temp.next = null;\n            if(temp.val&lt;x){\n                less.next=temp;\n                less=less.next;\n            }\n            else{\n                great.next=temp;\n                great=great.next;\n            }\n        }\n\n\n        less.next = greater.next;\n        return lesser.next;\n    }\n</code></pre>\n"}],"owner":{"account_id":27785582,"reputation":1,"user_id":21213099,"display_name":"Abhinav Bachchan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1692849409,"creation_date":1692827446,"question_id":76965100,"body_markdown":"I am solving LeetCode problem [86. Partition List](https://leetcode.com/problems/partition-list/description/):\r\n\r\n&gt; Given the head of a linked list and a value `x`, partition it such that all nodes **less than** `x` come before nodes **greater than or equal** to `x`.\r\n&gt; \r\n&gt; You should **preserve** the original relative order of the nodes in each of the two partitions.\r\n&gt; \r\n&gt; ### Example 1:\r\n&gt; **Input:** `head = [1,4,3,2,5,2], x = 3`&lt;br&gt;\r\n&gt; **Output:** `[1,2,2,4,3,5]`\r\n&gt; \r\n&gt; ### Example 2:\r\n&gt; **Input:** `head = [2,1], x = 2`&lt;br&gt;\r\n&gt; **Output:** `[1,2]`\r\n&gt;  \r\n&gt; ### Constraints:\r\n&gt; * The number of nodes in the list is in the range `[0, 200]`.\r\n&gt; * `-100 &lt;= Node.val &lt;= 100`\r\n&gt; * `-200 &lt;= x &lt;= 200`\r\n\r\nMy code:\r\n\r\n```\r\n    public static ListNode partition(ListNode head, int x) {\r\n        ListNode lesser = new ListNode(-101);\r\n        ListNode less = lesser;\r\n        ListNode greater = new ListNode(-101);\r\n        ListNode great = greater;\r\n        ListNode temp= head;\r\n        while(temp!=null){\r\n            if(temp.val&lt;x){\r\n                less.next=temp;\r\n                less=less.next;\r\n            }\r\n            else{\r\n                great.next=temp;\r\n                great=great.next;\r\n            }\r\n            temp=temp.next;\r\n        }\r\n\r\n\r\n        less.next = great.next;\r\n        return lesser.next;\r\n    }\r\n```\r\n\r\nI get this error back from the tests:\r\n\r\n&gt; Error - Found cycle in the ListNode\r\n\r\nCan anybody explain why this error occurs?\r\n","title":"Why is my code for partitioning a linked list returning a list with a cycle?","body":"<p>I am solving LeetCode problem <a href=\"https://leetcode.com/problems/partition-list/description/\" rel=\"nofollow noreferrer\">86. Partition List</a>:</p>\n<blockquote>\n<p>Given the head of a linked list and a value <code>x</code>, partition it such that all nodes <strong>less than</strong> <code>x</code> come before nodes <strong>greater than or equal</strong> to <code>x</code>.</p>\n<p>You should <strong>preserve</strong> the original relative order of the nodes in each of the two partitions.</p>\n<h3>Example 1:</h3>\n<p><strong>Input:</strong> <code>head = [1,4,3,2,5,2], x = 3</code><br>\n<strong>Output:</strong> <code>[1,2,2,4,3,5]</code></p>\n<h3>Example 2:</h3>\n<p><strong>Input:</strong> <code>head = [2,1], x = 2</code><br>\n<strong>Output:</strong> <code>[1,2]</code></p>\n<h3>Constraints:</h3>\n<ul>\n<li>The number of nodes in the list is in the range <code>[0, 200]</code>.</li>\n<li><code>-100 &lt;= Node.val &lt;= 100</code></li>\n<li><code>-200 &lt;= x &lt;= 200</code></li>\n</ul>\n</blockquote>\n<p>My code:</p>\n<pre><code>    public static ListNode partition(ListNode head, int x) {\n        ListNode lesser = new ListNode(-101);\n        ListNode less = lesser;\n        ListNode greater = new ListNode(-101);\n        ListNode great = greater;\n        ListNode temp= head;\n        while(temp!=null){\n            if(temp.val&lt;x){\n                less.next=temp;\n                less=less.next;\n            }\n            else{\n                great.next=temp;\n                great=great.next;\n            }\n            temp=temp.next;\n        }\n\n\n        less.next = great.next;\n        return lesser.next;\n    }\n</code></pre>\n<p>I get this error back from the tests:</p>\n<blockquote>\n<p>Error - Found cycle in the ListNode</p>\n</blockquote>\n<p>Can anybody explain why this error occurs?</p>\n"},{"tags":["java","inputstream","jsch"],"comments":[{"owner":{"account_id":453710,"reputation":192103,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"score":1,"creation_date":1610097247,"post_id":25761400,"comment_id":116029348,"body_markdown":"You generally should not use &quot;shell&quot; channel to automate a command execution. Use &quot;exec&quot; channel instead. If you use &quot;shell&quot; channel, you get into troubles sooner or later. See one example of possible issues out of many, see [JSch issue - Cannot retrieve full command output](http://stackoverflow.com/q/35502600/850848).","body":"You generally should not use &quot;shell&quot; channel to automate a command execution. Use &quot;exec&quot; channel instead. If you use &quot;shell&quot; channel, you get into troubles sooner or later. See one example of possible issues out of many, see <a href=\"http://stackoverflow.com/q/35502600/850848\">JSch issue - Cannot retrieve full command output</a>."}],"answers":[{"comments":[{"owner":{"account_id":2590996,"reputation":1073,"user_id":2245709,"accept_rate":64,"display_name":"aiman"},"score":0,"creation_date":1513864100,"post_id":25845360,"comment_id":82820446,"body_markdown":"Good piece of code Vishnu. In case if i want to execute ps.println(&quot;sudo -u myuser -i&quot;); ps.println(&quot;myPassword&quot;); it is going for a infinite wait/hang. How to deal with this ?","body":"Good piece of code Vishnu. In case if i want to execute ps.println(&quot;sudo -u myuser -i&quot;); ps.println(&quot;myPassword&quot;); it is going for a infinite wait/hang. How to deal with this ?"},{"owner":{"account_id":2164407,"reputation":598,"user_id":1917804,"display_name":"Vishnu Prasad Kallummel"},"score":0,"creation_date":1514441546,"post_id":25845360,"comment_id":82973196,"body_markdown":"sudo -u myuser -i, I have to substitute the actual user right?\nI will get back to you once I have tried it.","body":"sudo -u myuser -i, I have to substitute the actual user right? I will get back to you once I have tried it."}],"tags":[],"owner":{"account_id":2164407,"reputation":598,"user_id":1917804,"display_name":"Vishnu Prasad Kallummel"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1410775057,"creation_date":1410775057,"answer_id":25845360,"question_id":25761400,"body_markdown":"Please try the code below - tested and working\r\n\r\n        Channel channel = session.openChannel(&quot;shell&quot;);\r\n    \tOutputStream ops = channel.getOutputStream();\r\n    \tPrintStream ps = new PrintStream(ops);\r\n    \tchannel.connect();\r\n    \tps.println(&quot;pwd&quot;);\r\n    \tps.println(&quot;exit&quot;);\r\n    \tps.flush();\r\n    \tps.close();\r\n    \t\r\n    \tInputStream in = channel.getInputStream();\r\n    \tBufferedReader reader = new BufferedReader(new InputStreamReader(in));\r\n\t\tSystem.out.println(&quot;Opening...&quot;);\r\n\r\n\t\tString jarOutput;\r\n\t\twhile ((jarOutput = reader.readLine()) != null)\r\n\t\t    System.out.println(jarOutput);\r\n\t\treader.close();\r\n    \tchannel.disconnect();\r\n\r\nOutput - \r\n\r\n&gt; Opening...&lt;br&gt;\r\nuser@host:~&gt; pwd&lt;br&gt;\r\n/home/user&lt;br&gt;\r\nuser@host:~&gt;  &lt;br&gt;\r\nuser@host:~&gt; exit&lt;br&gt;\r\nlogout\r\n\r\n","title":"Jsch : Command Output unavailable","body":"<p>Please try the code below - tested and working</p>\n\n<pre><code>    Channel channel = session.openChannel(\"shell\");\n    OutputStream ops = channel.getOutputStream();\n    PrintStream ps = new PrintStream(ops);\n    channel.connect();\n    ps.println(\"pwd\");\n    ps.println(\"exit\");\n    ps.flush();\n    ps.close();\n\n    InputStream in = channel.getInputStream();\n    BufferedReader reader = new BufferedReader(new InputStreamReader(in));\n    System.out.println(\"Opening...\");\n\n    String jarOutput;\n    while ((jarOutput = reader.readLine()) != null)\n        System.out.println(jarOutput);\n    reader.close();\n    channel.disconnect();\n</code></pre>\n\n<p>Output - </p>\n\n<blockquote>\n  <p>Opening...<br>\n  user@host:~> pwd<br>\n  /home/user<br>\n  user@host:~>  <br>\n  user@host:~> exit<br>\n  logout</p>\n</blockquote>\n"}],"owner":{"account_id":206144,"reputation":14410,"user_id":455257,"accept_rate":56,"display_name":"ayush"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1848,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1692848789,"creation_date":1410339911,"question_id":25761400,"body_markdown":"I am trying to use jsch to connect to a remote switch and run some command and extract the output. \r\n\r\nI am able to connect to the switch using , however the command output is not available in the inputstream. Maybe i am not doing it the right way. Here&#39;s the code\r\n\r\n        \r\n\r\n        session = jsch.getSession(&quot;user&quot;, &quot;10.0.0.0&quot;, 22);\r\n\t\tsession.setPassword(&quot;somepwd&quot;);\r\n\t\tsession.setConfig(&quot;StrictHostKeyChecking&quot;, &quot;no&quot;);\r\n\t\tsession.connect();\r\n\t\tSystem.out.println(&quot;connected to remote host&quot;);\r\n\t\tChannel channel = session.openChannel(&quot;shell&quot;);\r\n\r\n\t\t OutputStream ops = channel.getOutputStream();\r\n\t\t PrintStream ps = new PrintStream(ops);\r\n\t     \tchannel.connect();\r\n         \t\tps.println(&quot;show version&quot;); \r\n         \t\tps.flush();\r\n         \t\tps.close();\r\n         \t\tInputStream in=channel.getInputStream();\r\n         \t\tbyte[] bt=new byte[1024];\r\n        \r\n\r\n         \t\twhile(in.available()&gt;0)\r\n         \t\t{\r\n         \t\t\tint i=in.read(bt, 0, 1024);\r\n         \t\t\tif(i&lt;0)\r\n         \t\t\t break;\r\n            \t\t\tString str=new String(bt, 0, i);\r\n          \t\t\t//displays the output of the command executed.\r\n            \t\t\tSystem.out.print(str);\r\n\t\t        }\r\n         \t\t\r\n\t\tchannel.disconnect();\r\n        session.disconnect();\r\n\r\nWhen i debug the inputStream.isAvailable() always returns zero suggesting that there is no output from the command.  \r\n\r\nTIA!","title":"Jsch : Command Output unavailable","body":"<p>I am trying to use jsch to connect to a remote switch and run some command and extract the output. </p>\n\n<p>I am able to connect to the switch using , however the command output is not available in the inputstream. Maybe i am not doing it the right way. Here's the code</p>\n\n<pre><code>    session = jsch.getSession(\"user\", \"10.0.0.0\", 22);\n    session.setPassword(\"somepwd\");\n    session.setConfig(\"StrictHostKeyChecking\", \"no\");\n    session.connect();\n    System.out.println(\"connected to remote host\");\n    Channel channel = session.openChannel(\"shell\");\n\n     OutputStream ops = channel.getOutputStream();\n     PrintStream ps = new PrintStream(ops);\n        channel.connect();\n            ps.println(\"show version\"); \n            ps.flush();\n            ps.close();\n            InputStream in=channel.getInputStream();\n            byte[] bt=new byte[1024];\n\n\n            while(in.available()&gt;0)\n            {\n                int i=in.read(bt, 0, 1024);\n                if(i&lt;0)\n                 break;\n                    String str=new String(bt, 0, i);\n                //displays the output of the command executed.\n                    System.out.print(str);\n            }\n\n    channel.disconnect();\n    session.disconnect();\n</code></pre>\n\n<p>When i debug the inputStream.isAvailable() always returns zero suggesting that there is no output from the command.  </p>\n\n<p>TIA!</p>\n"},{"tags":["java","android","android-recyclerview","android-database"],"comments":[{"owner":{"account_id":14823820,"reputation":132,"user_id":10705313,"display_name":"pouya"},"score":0,"creation_date":1692814585,"post_id":76963835,"comment_id":135676726,"body_markdown":"provide your modal class ... if your madal has id, read the id column from your db write to your modal and then retrieve it !","body":"provide your modal class ... if your madal has id, read the id column from your db write to your modal and then retrieve it !"},{"owner":{"account_id":29285193,"reputation":1,"user_id":22436958,"display_name":"Orionbobo"},"score":0,"creation_date":1692815496,"post_id":76963835,"comment_id":135676904,"body_markdown":"@pouya I did provide the modal class, and it does have a get id/ set id","body":"@pouya I did provide the modal class, and it does have a get id/ set id"}],"answers":[{"comments":[{"owner":{"account_id":14823820,"reputation":132,"user_id":10705313,"display_name":"pouya"},"score":0,"creation_date":1693302154,"post_id":76966100,"comment_id":135739470,"body_markdown":"well done ... I said to you","body":"well done ... I said to you"}],"tags":[],"owner":{"account_id":29285193,"reputation":1,"user_id":22436958,"display_name":"Orionbobo"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1692848645,"creation_date":1692848645,"answer_id":76966100,"question_id":76963835,"body_markdown":"I used the array id from onBindViewHolder, used CourseModal, and set the id. Then I got that id and switched cursor to use array indexing to change each record as themselves.","title":"How to retrieve database id when clicking recycler view in android studio?","body":"<p>I used the array id from onBindViewHolder, used CourseModal, and set the id. Then I got that id and switched cursor to use array indexing to change each record as themselves.</p>\n"}],"owner":{"account_id":29285193,"reputation":1,"user_id":22436958,"display_name":"Orionbobo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76966100,"answer_count":1,"score":0,"last_activity_date":1692848645,"creation_date":1692813541,"question_id":76963835,"body_markdown":"I&#39;ve been working on an android app, and I need to get the database id when I click on specific row in the recycler view. When I wrote this app previously I updated and deleted the records based on their names, however when I came back to this project I learned pretty quick that deleted or/and changed all the records with that name. Then I wrote a simple rawQuery to get the id from a name list, using cursor. Learned that, that would pull all the ids with that name but I didnt know which one to choose, (since that query would pull options for the ids I had to choose).\r\n\r\n```\r\n public Cursor getDbId(String studentName) {\r\n\r\n        SQLiteDatabase db = this.getWritableDatabase();\r\n\r\n        Cursor getDb = (db.rawQuery(&quot;SELECT &quot; + ID_COL + &quot; FROM &quot; + TABLE_NAME + &quot; WHERE &quot; + NAME_COL + &quot; = ?&quot;, new String[]{studentName}));\r\n        getDb.moveToFirst();\r\n        return getDb;\r\n    }\r\n```\r\n\r\n\r\n```\r\n updateCourseBtn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n\r\n\r\n                if (cursor != null &amp;&amp; cursor.moveToNext()) {\r\n                    String str = cursor.getString(cursor.getColumnIndex(&quot;id&quot;));\r\n\r\n\r\n                    System.out.println(str);\r\n                    dbHandler.updateCourse(str, studentNameUpd.getText().toString(), studentSubjectUpd.getText().toString(), studentHoursUpd.getText().toString(), studentCoreUpd.getText().toString());\r\n\r\n                    // displaying a toast message that our course has been updated.\r\n                    Toast.makeText(UpdateCourseActivity.this, &quot;Course Updated..&quot;, Toast.LENGTH_SHORT).show();\r\n\r\n                    // launching our main activity.\r\n                    Intent i = new Intent(UpdateCourseActivity.this, MainActivity.class);\r\n                    startActivity(i);\r\n                }\r\n                /* inside this method we are calling an update course\r\n                   method and passing all our edit text values. */\r\n\r\n            }\r\n        });\r\n```\r\n\r\n\r\n```\r\n@Override\r\n    public void onBindViewHolder(@NonNull ViewHolder holder, int position) {\r\n\r\n//        Cursor cursor = dbHandler.getDbId(studentName);\r\n        /* on below line we are setting data\r\n           to our views of recycler view item. */\r\n        CourseModal modal = courseModalArrayList.get(position);\r\n\r\n        holder.studentNameRV.setText(modal.getStudentName());\r\n        holder.studentCoreRV.setText(modal.getStudentCore());\r\n        holder.studentSubjectRV.setText(modal.getStudentSubject());\r\n        holder.studentHoursRV.setText(modal.getStudentHours());\r\n\r\n\r\n\r\n        // below line is to add on click listener for our recycler view item.\r\n        holder.itemView.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n\r\n                System.out.println();\r\n\r\n;\r\n                // on below line we are calling an intent.\r\n                Intent i = new Intent(context, UpdateCourseActivity.class);\r\n\r\n                // below we are passing all our values.\r\n                i.putExtra(&quot;name&quot;, modal.getStudentName());\r\n                i.putExtra(&quot;core&quot;, modal.getStudentCore());\r\n                i.putExtra(&quot;subject&quot;, modal.getStudentSubject());\r\n                i.putExtra(&quot;hours&quot;, modal.getStudentHours());\r\n\r\n\r\n                // starting our activity.\r\n                context.startActivity(i);\r\n            }\r\n        });\r\n    }\r\n```\r\n\r\n\r\n    public class CourseModal {\r\n\r\n    /* variables for our studentName,\r\n       description, tracks and duration, id. */\r\n    private String studentName;\r\n    private String studentSubject;\r\n    private String studentHours;\r\n    private String studentCore;\r\n\r\n    public String getStudentName() {\r\n        return studentName;\r\n    }\r\n\r\n    public void setStudentName(String studentName) {\r\n        this.studentName = studentName;\r\n    }\r\n\r\n    public String getStudentSubject() {\r\n        return studentSubject;\r\n    }\r\n\r\n    public void setStudentSubject(String studentSubject) {\r\n        this.studentSubject = studentSubject;\r\n    }\r\n\r\n    public String getStudentHours() {\r\n        return studentHours;\r\n    }\r\n\r\n    public void setStudentHours(String studentHours) {\r\n        this.studentHours = studentHours;\r\n    }\r\n\r\n    public String getStudentCore() {\r\n        return studentCore;\r\n    }\r\n\r\n    public void setStudentCore(String studentCore) {\r\n        this.studentCore = studentCore;\r\n    }\r\n\r\n    private int id;\r\n    int o = 0;\r\n    int i = 0;\r\n\r\n    // creating getter and setter methods\r\n    \r\n\r\n\r\n    public int getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(int id) {\r\n        this.id = id;\r\n    }\r\n\r\n    // constructor\r\n    public CourseModal(String studentName, String studentSubject, String studentHours, String studentCore) {\r\n        this.studentName = studentName;\r\n        this.studentSubject = studentSubject;\r\n        this.studentHours = studentHours;\r\n        this.studentCore = studentCore;\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\n\r\n\r\nI also did try to use the onBindViewHolder position since that would get me a position of what item i clicked. I thought that would pull from the database. However since onBindViewHolder is for me pulling an array id list, that didn&#39;t work. ","title":"How to retrieve database id when clicking recycler view in android studio?","body":"<p>I've been working on an android app, and I need to get the database id when I click on specific row in the recycler view. When I wrote this app previously I updated and deleted the records based on their names, however when I came back to this project I learned pretty quick that deleted or/and changed all the records with that name. Then I wrote a simple rawQuery to get the id from a name list, using cursor. Learned that, that would pull all the ids with that name but I didnt know which one to choose, (since that query would pull options for the ids I had to choose).</p>\n<pre><code> public Cursor getDbId(String studentName) {\n\n        SQLiteDatabase db = this.getWritableDatabase();\n\n        Cursor getDb = (db.rawQuery(&quot;SELECT &quot; + ID_COL + &quot; FROM &quot; + TABLE_NAME + &quot; WHERE &quot; + NAME_COL + &quot; = ?&quot;, new String[]{studentName}));\n        getDb.moveToFirst();\n        return getDb;\n    }\n</code></pre>\n<pre><code> updateCourseBtn.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n\n\n                if (cursor != null &amp;&amp; cursor.moveToNext()) {\n                    String str = cursor.getString(cursor.getColumnIndex(&quot;id&quot;));\n\n\n                    System.out.println(str);\n                    dbHandler.updateCourse(str, studentNameUpd.getText().toString(), studentSubjectUpd.getText().toString(), studentHoursUpd.getText().toString(), studentCoreUpd.getText().toString());\n\n                    // displaying a toast message that our course has been updated.\n                    Toast.makeText(UpdateCourseActivity.this, &quot;Course Updated..&quot;, Toast.LENGTH_SHORT).show();\n\n                    // launching our main activity.\n                    Intent i = new Intent(UpdateCourseActivity.this, MainActivity.class);\n                    startActivity(i);\n                }\n                /* inside this method we are calling an update course\n                   method and passing all our edit text values. */\n\n            }\n        });\n</code></pre>\n<pre><code>@Override\n    public void onBindViewHolder(@NonNull ViewHolder holder, int position) {\n\n//        Cursor cursor = dbHandler.getDbId(studentName);\n        /* on below line we are setting data\n           to our views of recycler view item. */\n        CourseModal modal = courseModalArrayList.get(position);\n\n        holder.studentNameRV.setText(modal.getStudentName());\n        holder.studentCoreRV.setText(modal.getStudentCore());\n        holder.studentSubjectRV.setText(modal.getStudentSubject());\n        holder.studentHoursRV.setText(modal.getStudentHours());\n\n\n\n        // below line is to add on click listener for our recycler view item.\n        holder.itemView.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n\n                System.out.println();\n\n;\n                // on below line we are calling an intent.\n                Intent i = new Intent(context, UpdateCourseActivity.class);\n\n                // below we are passing all our values.\n                i.putExtra(&quot;name&quot;, modal.getStudentName());\n                i.putExtra(&quot;core&quot;, modal.getStudentCore());\n                i.putExtra(&quot;subject&quot;, modal.getStudentSubject());\n                i.putExtra(&quot;hours&quot;, modal.getStudentHours());\n\n\n                // starting our activity.\n                context.startActivity(i);\n            }\n        });\n    }\n</code></pre>\n<pre><code>public class CourseModal {\n\n/* variables for our studentName,\n   description, tracks and duration, id. */\nprivate String studentName;\nprivate String studentSubject;\nprivate String studentHours;\nprivate String studentCore;\n\npublic String getStudentName() {\n    return studentName;\n}\n\npublic void setStudentName(String studentName) {\n    this.studentName = studentName;\n}\n\npublic String getStudentSubject() {\n    return studentSubject;\n}\n\npublic void setStudentSubject(String studentSubject) {\n    this.studentSubject = studentSubject;\n}\n\npublic String getStudentHours() {\n    return studentHours;\n}\n\npublic void setStudentHours(String studentHours) {\n    this.studentHours = studentHours;\n}\n\npublic String getStudentCore() {\n    return studentCore;\n}\n\npublic void setStudentCore(String studentCore) {\n    this.studentCore = studentCore;\n}\n\nprivate int id;\nint o = 0;\nint i = 0;\n\n// creating getter and setter methods\n\n\n\npublic int getId() {\n    return id;\n}\n\npublic void setId(int id) {\n    this.id = id;\n}\n\n// constructor\npublic CourseModal(String studentName, String studentSubject, String studentHours, String studentCore) {\n    this.studentName = studentName;\n    this.studentSubject = studentSubject;\n    this.studentHours = studentHours;\n    this.studentCore = studentCore;\n}\n</code></pre>\n<p>}</p>\n<p>I also did try to use the onBindViewHolder position since that would get me a position of what item i clicked. I thought that would pull from the database. However since onBindViewHolder is for me pulling an array id list, that didn't work.</p>\n"},{"tags":["java","git","github","architecture","repository"],"comments":[{"owner":{"account_id":966579,"reputation":3980,"user_id":989920,"accept_rate":76,"display_name":"evolutionxbox"},"score":0,"creation_date":1570195137,"post_id":58237041,"comment_id":102847268,"body_markdown":"Don&#39;t use git as a dependency managed.","body":"Don&#39;t use git as a dependency managed."}],"answers":[{"tags":[],"owner":{"account_id":4142918,"reputation":1714,"user_id":3397563,"accept_rate":75,"display_name":"oktapodia"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1570194670,"creation_date":1570194670,"answer_id":58237138,"question_id":58237041,"body_markdown":"This [thread][1] can give you the right answer of how to organize the project, but remember that it will only be an opinion based answer as there is not the best way to do it.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/14679614/whats-the-best-practice-for-putting-multiple-projects-in-a-git-repository","title":"Multiple projects in one repository GitHub","body":"<p>This <a href=\"https://stackoverflow.com/questions/14679614/whats-the-best-practice-for-putting-multiple-projects-in-a-git-repository\">thread</a> can give you the right answer of how to organize the project, but remember that it will only be an opinion based answer as there is not the best way to do it.</p>\n"},{"tags":[],"owner":{"account_id":12661572,"reputation":1588,"user_id":9202256,"display_name":"Shmuel"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1570195412,"creation_date":1570195412,"answer_id":58237330,"question_id":58237041,"body_markdown":"You should put each of them in its own git repository.\r\n\r\nYou then can use git submodules to add depending project to another. \r\n\r\nExample:\r\nProject A will contain project B as submodule.\r\n\r\n[Read more about git submodules](https://chrisjean.com/git-submodules-adding-using-removing-and-updating/) &lt;br&gt;\r\n[Official documentation](https://git-scm.com/book/en/v2/Git-Tools-Submodules)","title":"Multiple projects in one repository GitHub","body":"<p>You should put each of them in its own git repository.</p>\n\n<p>You then can use git submodules to add depending project to another. </p>\n\n<p>Example:\nProject A will contain project B as submodule.</p>\n\n<p><a href=\"https://chrisjean.com/git-submodules-adding-using-removing-and-updating/\" rel=\"nofollow noreferrer\">Read more about git submodules</a> <br>\n<a href=\"https://git-scm.com/book/en/v2/Git-Tools-Submodules\" rel=\"nofollow noreferrer\">Official documentation</a></p>\n"},{"tags":[],"owner":{"account_id":100270,"reputation":127154,"user_id":270371,"accept_rate":33,"display_name":"davidxxx"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1570197180,"creation_date":1570196756,"answer_id":58237685,"question_id":58237041,"body_markdown":"In fact your question could be summarized as : should I use a mono-repo approach or a multi-repo approach ?   \r\nThat is broad subject but to make things simple: it depends on the coupling level and the life cycle between these projects.  \r\n\r\nYou want to use a mono repo approach and add multiple projects in if these projects are designed to live and evolve together. For example, if only these projects have dependency between them and that when you change a dependency you will change the consumer, you have clearly no value to split out them in multiple repositories.  \r\nIt will make global source code readability weaker and commit/pull/request/merge on multiple repositories for a same use case, which makes their readability and their consistence weaker. \r\n\r\nYou want to use a multi-repo approach and to have a project by repo in if these projects are not designed to live and evolve together. For example, if some of these projects are used by other applications than those you quote, you have no value to couple the project dependency inside the repository of the consumer project  because there are other consumers, so why that consumer and not the other one ? \r\n\r\nYou have also [the super mono repo approach][1] such as that one used by Google or Facebook that adds **all** projects (or almost) in the same repository, whatever the level of coupling between projects.\r\nDoing such a thing is not simple and demands to custom finely the CDCI and the SCM tools to keep things practical and simple in spit of the repo size.\r\n\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Monorepo","title":"Multiple projects in one repository GitHub","body":"<p>In fact your question could be summarized as : should I use a mono-repo approach or a multi-repo approach ?<br>\nThat is broad subject but to make things simple: it depends on the coupling level and the life cycle between these projects.  </p>\n\n<p>You want to use a mono repo approach and add multiple projects in if these projects are designed to live and evolve together. For example, if only these projects have dependency between them and that when you change a dependency you will change the consumer, you have clearly no value to split out them in multiple repositories.<br>\nIt will make global source code readability weaker and commit/pull/request/merge on multiple repositories for a same use case, which makes their readability and their consistence weaker. </p>\n\n<p>You want to use a multi-repo approach and to have a project by repo in if these projects are not designed to live and evolve together. For example, if some of these projects are used by other applications than those you quote, you have no value to couple the project dependency inside the repository of the consumer project  because there are other consumers, so why that consumer and not the other one ? </p>\n\n<p>You have also <a href=\"https://en.wikipedia.org/wiki/Monorepo\" rel=\"nofollow noreferrer\">the super mono repo approach</a> such as that one used by Google or Facebook that adds <strong>all</strong> projects (or almost) in the same repository, whatever the level of coupling between projects.\nDoing such a thing is not simple and demands to custom finely the CDCI and the SCM tools to keep things practical and simple in spit of the repo size.</p>\n"},{"tags":[],"owner":{"account_id":22169319,"reputation":9,"user_id":16415026,"display_name":"Furkan Shaikh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654452387,"creation_date":1654241138,"answer_id":72486091,"question_id":58237041,"body_markdown":"Apologies as it&#39;s not that concrete solution to it but it does the job, what I tried is I had a situation where for some reason I had to add all the projects to one repository only so I followed the following steps :\r\n\r\n 1. Create a new repository with the main branch (Keep it Empty)\r\n 2. Create a branch from Main (Empty) with the respective project name (Create as many as branches you want with the respective projects you have)\r\n 3. Then Checkout to that branch with the command:\r\n```\r\n$git checkout -b &lt;branch_name&gt;\r\n```\r\n 4. If the origin is already there then remove it first then add the newly created remote origin with the following commands:\r\n```\r\n$ git remote rm origin  (To remove remote origin)\r\n\r\n$ git remote add origin https://github.com/&lt;USERNAME&gt;/&lt;REPO_NAME&gt;.git\r\n```\r\n 5. For authorization of the operation you need to use the following command:\r\n```\r\n$ git remote set-url origin &lt;Access_Token&gt;@github.com/&lt;USERNAME&gt;/&lt;REPO_NAME&gt;.git\r\n```\r\n 6. Now, you can push the code and files to the branch directly by the following command:\r\n```\r\n$ git push -u -f origin &lt;branch_name&gt;\r\n```\r\n 7. If the above command is throwing an error then try first adding the files by the following command and then try step 6 again.\r\n```\r\n$ git add .\r\n```\r\nThis worked for me, as whenever I want to change/pull something in any project I just clone a specific branch make changes in it and then push the changes to that specific branch only. This way you can have multiple projects under one repo. I tried this solution by myself only to bypass the tricky way of Orphan branches or having multiple Repos.\r\n\r\n","title":"Multiple projects in one repository GitHub","body":"<p>Apologies as it's not that concrete solution to it but it does the job, what I tried is I had a situation where for some reason I had to add all the projects to one repository only so I followed the following steps :</p>\n<ol>\n<li>Create a new repository with the main branch (Keep it Empty)</li>\n<li>Create a branch from Main (Empty) with the respective project name (Create as many as branches you want with the respective projects you have)</li>\n<li>Then Checkout to that branch with the command:</li>\n</ol>\n<pre><code>$git checkout -b &lt;branch_name&gt;\n</code></pre>\n<ol start=\"4\">\n<li>If the origin is already there then remove it first then add the newly created remote origin with the following commands:</li>\n</ol>\n<pre><code>$ git remote rm origin  (To remove remote origin)\n\n$ git remote add origin https://github.com/&lt;USERNAME&gt;/&lt;REPO_NAME&gt;.git\n</code></pre>\n<ol start=\"5\">\n<li>For authorization of the operation you need to use the following command:</li>\n</ol>\n<pre><code>$ git remote set-url origin &lt;Access_Token&gt;@github.com/&lt;USERNAME&gt;/&lt;REPO_NAME&gt;.git\n</code></pre>\n<ol start=\"6\">\n<li>Now, you can push the code and files to the branch directly by the following command:</li>\n</ol>\n<pre><code>$ git push -u -f origin &lt;branch_name&gt;\n</code></pre>\n<ol start=\"7\">\n<li>If the above command is throwing an error then try first adding the files by the following command and then try step 6 again.</li>\n</ol>\n<pre><code>$ git add .\n</code></pre>\n<p>This worked for me, as whenever I want to change/pull something in any project I just clone a specific branch make changes in it and then push the changes to that specific branch only. This way you can have multiple projects under one repo. I tried this solution by myself only to bypass the tricky way of Orphan branches or having multiple Repos.</p>\n"}],"owner":{"account_id":15083126,"reputation":346,"user_id":10885193,"display_name":"Jules"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10342,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"accepted_answer_id":58237330,"answer_count":4,"score":3,"last_activity_date":1692847515,"creation_date":1570194283,"question_id":58237041,"body_markdown":"I have 5 java projects working together. At first I was working alone on these projects. Now someone joined me and we actually need to use GitHub to work efficiently.\r\n\r\n* Project A is let&#39;s say the master project it doesn&#39;t depend from any others.\r\n* Project B is depending from project A.\r\n* Project C is depending from B and A.\r\n* Project D etc etc.\r\n\r\nI&#39;m facing a design problem:\r\n\r\n* Should I use one git repo and put all of them together but in different folders?\r\n* Should I use different git repo and keep them independant (might be better for commiting)?\r\n* Should I use different git repo and regroup all of them in a single master git repo?","title":"Multiple projects in one repository GitHub","body":"<p>I have 5 java projects working together. At first I was working alone on these projects. Now someone joined me and we actually need to use GitHub to work efficiently.</p>\n<ul>\n<li>Project A is let's say the master project it doesn't depend from any others.</li>\n<li>Project B is depending from project A.</li>\n<li>Project C is depending from B and A.</li>\n<li>Project D etc etc.</li>\n</ul>\n<p>I'm facing a design problem:</p>\n<ul>\n<li>Should I use one git repo and put all of them together but in different folders?</li>\n<li>Should I use different git repo and keep them independant (might be better for commiting)?</li>\n<li>Should I use different git repo and regroup all of them in a single master git repo?</li>\n</ul>\n"},{"tags":["java","java-8","java-stream"],"comments":[{"owner":{"account_id":1734091,"reputation":92376,"user_id":1587046,"accept_rate":62,"display_name":"Alexis C."},"score":7,"creation_date":1431092402,"post_id":30125296,"comment_id":48360174,"body_markdown":"_&quot;but the syntax does not feel right&quot;_ What makes you think that? This is the usual idiom. Maybe you want to use `mapToLong` to avoid overflows, depending on the values your map can have.","body":"<i>&quot;but the syntax does not feel right&quot;</i> What makes you think that? This is the usual idiom. Maybe you want to use <code>mapToLong</code> to avoid overflows, depending on the values your map can have."},{"owner":{"account_id":1734091,"reputation":92376,"user_id":1587046,"accept_rate":62,"display_name":"Alexis C."},"score":3,"creation_date":1431093014,"post_id":30125296,"comment_id":48360589,"body_markdown":"@JBNizet I find `i -&gt; i` very clear, personally. Well, yes you need to know that the value will be automatically unboxed, but it&#39;s true since Java 5...","body":"@JBNizet I find <code>i -&gt; i</code> very clear, personally. Well, yes you need to know that the value will be automatically unboxed, but it&#39;s true since Java 5..."},{"owner":{"account_id":277416,"reputation":681878,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":4,"creation_date":1431093262,"post_id":30125296,"comment_id":48360764,"body_markdown":"@AlexisC. it&#39;s understandable because it&#39;s passed to mapToInt(), and because I&#39;m an experienced developer. But i -&gt; i, without context, looks like a noop. Integer::intValue is more verbose, but makes the unboxing operation explicit.","body":"@AlexisC. it&#39;s understandable because it&#39;s passed to mapToInt(), and because I&#39;m an experienced developer. But i -&gt; i, without context, looks like a noop. Integer::intValue is more verbose, but makes the unboxing operation explicit."},{"owner":{"account_id":1734091,"reputation":92376,"user_id":1587046,"accept_rate":62,"display_name":"Alexis C."},"score":1,"creation_date":1431093541,"post_id":30125296,"comment_id":48360961,"body_markdown":"@JBNizet People that calls the method `foo(int i)` do not write `foo(myInteger.intValue());` each time they call it (or at least I expect not!!). I agree with you that `Integer::intValue` is more explicit but I think the same applies here. People should just learn it once and then you&#39;re done :-). It&#39;s not like if it was some magic obfuscation.","body":"@JBNizet People that calls the method <code>foo(int i)</code> do not write <code>foo(myInteger.intValue());</code> each time they call it (or at least I expect not!!). I agree with you that <code>Integer::intValue</code> is more explicit but I think the same applies here. People should just learn it once and then you&#39;re done :-). It&#39;s not like if it was some magic obfuscation."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":4,"creation_date":1431095413,"post_id":30125296,"comment_id":48362141,"body_markdown":"@JB Nizet: well, `i -&gt; i` looks like a no-op and conceptionally, it *is* a no-op. Sure, under the hood `Integer.intValue()` gets called, but even deeper under the hood, that methods gets inlined to become exactly the no-op that it looks like in the source code. `Integer::intValue` has the bonus point of not creating a synthetic method in the byte code but it’s not what should drive your decision of how to organize your source code.","body":"@JB Nizet: well, <code>i -&gt; i</code> looks like a no-op and conceptionally, it <i>is</i> a no-op. Sure, under the hood <code>Integer.intValue()</code> gets called, but even deeper under the hood, that methods gets inlined to become exactly the no-op that it looks like in the source code. <code>Integer::intValue</code> has the bonus point of not creating a synthetic method in the byte code but it’s not what should drive your decision of how to organize your source code."},{"owner":{"account_id":277416,"reputation":681878,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":0,"creation_date":1431095639,"post_id":30125296,"comment_id":48362327,"body_markdown":"@Holger that&#39;s my point: it looks like a noop, and the reader thus has a good chance of asking himself why a noop is used in the code every time he/she will read that code. That&#39;s why I prefer Integer::intValue: it says exactly and explicitely what the operation is doing.","body":"@Holger that&#39;s my point: it looks like a noop, and the reader thus has a good chance of asking himself why a noop is used in the code every time he/she will read that code. That&#39;s why I prefer Integer::intValue: it says exactly and explicitely what the operation is doing."},{"owner":{"account_id":480845,"reputation":71,"user_id":894319,"display_name":"user894319twitter"},"score":0,"creation_date":1700106488,"post_id":30125296,"comment_id":136614900,"body_markdown":"Integer overflow and underflow can happen even with 1 value which is close to the limit. Comments about BigInt aren&#39;t pointless!!!","body":"Integer overflow and underflow can happen even with 1 value which is close to the limit. Comments about BigInt aren&#39;t pointless!!!"}],"answers":[{"comments":[{"owner":{"account_id":277416,"reputation":681878,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":2,"creation_date":1431092800,"post_id":30125423,"comment_id":48360456,"body_markdown":"What the OP has is much better, and also clearer. This code would involve a whole loat of unboxing and boxing operations.","body":"What the OP has is much better, and also clearer. This code would involve a whole loat of unboxing and boxing operations."},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":1,"creation_date":1431092860,"post_id":30125423,"comment_id":48360494,"body_markdown":"@JBNizet Unless the escape analysis eliminates the boxing. You would have to try it to see if it can.","body":"@JBNizet Unless the escape analysis eliminates the boxing. You would have to try it to see if it can."},{"owner":{"account_id":277416,"reputation":681878,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":0,"creation_date":1431092965,"post_id":30125423,"comment_id":48360558,"body_markdown":"@PeterLawrey I&#39;d still prefer to operate on primitive values directly, use what the OP has, or Sasha&#39;s first comment solution.","body":"@PeterLawrey I&#39;d still prefer to operate on primitive values directly, use what the OP has, or Sasha&#39;s first comment solution."},{"owner":{"account_id":5956954,"reputation":3080,"user_id":4683264,"accept_rate":92,"display_name":"J Atkin"},"score":0,"creation_date":1431092984,"post_id":30125423,"comment_id":48360568,"body_markdown":"@JBNizet if the numbers are already in a map, the values don.t need to be boxed.","body":"@JBNizet if the numbers are already in a map, the values don.t need to be boxed."},{"owner":{"account_id":277416,"reputation":681878,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":6,"creation_date":1431093042,"post_id":30125423,"comment_id":48360613,"body_markdown":"(x,y) -&gt; x+y needs to unbox x and y, sum them, and then box the result. And start again to add the result with the next element of the stream, and again and again.","body":"(x,y) -&gt; x+y needs to unbox x and y, sum them, and then box the result. And start again to add the result with the next element of the stream, and again and again."},{"owner":{"account_id":277416,"reputation":681878,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":3,"creation_date":1431093423,"post_id":30125423,"comment_id":48360883,"body_markdown":"Integer::sum suffers from the same problem. And if you use mapToInt() to have an IntStream, calling sum() on it is more straightforward than calling reduce().","body":"Integer::sum suffers from the same problem. And if you use mapToInt() to have an IntStream, calling sum() on it is more straightforward than calling reduce()."},{"owner":{"account_id":5956954,"reputation":3080,"user_id":4683264,"accept_rate":92,"display_name":"J Atkin"},"score":0,"creation_date":1431093830,"post_id":30125423,"comment_id":48361167,"body_markdown":"@JBNizet I&#39;m still confused, why does boxing still happen when `Integer::sum` is called on a stream of `Integer`s? Does the boxing happen inside the `sum` method?","body":"@JBNizet I&#39;m still confused, why does boxing still happen when <code>Integer::sum</code> is called on a stream of <code>Integer</code>s? Does the boxing happen inside the <code>sum</code> method?"},{"owner":{"account_id":277416,"reputation":681878,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":3,"creation_date":1431094053,"post_id":30125423,"comment_id":48361296,"body_markdown":"See http://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html#sum-int-int-. The two arguments of Integer.sum() are of type int. So the two Integers from the stream must be unboxed to be passed as arguments to the method. The method returns an int, but reduce() takes a BinaryOperator&lt;Integer&gt; as argument, which thus returns an Integer. So the result of the sum has to be boxed to Integer.","body":"See <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html#sum-int-int-\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/api/java/lang/&hellip;</a>. The two arguments of Integer.sum() are of type int. So the two Integers from the stream must be unboxed to be passed as arguments to the method. The method returns an int, but reduce() takes a BinaryOperator&lt;Integer&gt; as argument, which thus returns an Integer. So the result of the sum has to be boxed to Integer."},{"owner":{"account_id":3228827,"reputation":1569,"user_id":2724543,"display_name":"kikea"},"score":0,"creation_date":1516448678,"post_id":30125423,"comment_id":83697963,"body_markdown":"Thanks! I used this for sum BigDecimal numbers: BigDecimal sum = in.getItems().stream().map(it -&gt; (it.getValue() != null) ? it.getValue() : BigDecimal.ZERO).reduce(BigDecimal.ZERO, BigDecimal::add);","body":"Thanks! I used this for sum BigDecimal numbers: BigDecimal sum = in.getItems().stream().map(it -&gt; (it.getValue() != null) ? it.getValue() : BigDecimal.ZERO).reduce(BigDecimal.ZERO, BigDecimal::add);"}],"tags":[],"owner":{"account_id":5956954,"reputation":3080,"user_id":4683264,"accept_rate":92,"display_name":"J Atkin"},"comment_count":9,"down_vote_count":0,"up_vote_count":97,"is_accepted":false,"score":97,"last_activity_date":1454445519,"creation_date":1431092703,"answer_id":30125423,"question_id":30125296,"body_markdown":"From the [docs](https://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html)\r\n\r\n&gt;Reduction operations\r\nA reduction operation (also called a fold) takes a sequence of input elements and combines them into a single summary result by repeated application of a combining operation, such as finding the sum or maximum of a set of numbers, or accumulating elements into a list. The streams classes have multiple forms of general reduction operations, called reduce() and collect(), as well as multiple specialized reduction forms such as sum(), max(), or count().\r\n\r\n&gt;Of course, such operations can be readily implemented as simple sequential loops, as in:\r\n\r\n\r\n&gt;     int sum = 0;\r\n    for (int x : numbers) {\r\n       sum += x;\r\n    }\r\n \r\n\r\n&gt;However, there are good reasons to prefer a reduce operation over a mutative accumulation such as the above. Not only is a reduction &quot;more abstract&quot; -- it operates on the stream as a whole rather than individual elements -- but a properly constructed reduce operation is inherently parallelizable, so long as the function(s) used to process the elements are associative and stateless. For example, given a stream of numbers for which we want to find the sum, we can write:\r\n\r\n\r\n&gt;     int sum = numbers.stream().reduce(0, (x,y) -&gt; x+y);\r\n \r\n\r\n&gt;or:\r\n\r\n\r\n&gt;     int sum = numbers.stream().reduce(0, Integer::sum);\r\n \r\n\r\n&gt;These reduction operations can run safely in parallel with almost no modification:\r\n\r\n\r\n&gt;     int sum = numbers.parallelStream().reduce(0, Integer::sum);\r\n\r\nSo, for a map you would use:\r\n\r\n    integers.values().stream().mapToInt(i -&gt; i).reduce(0, (x,y) -&gt; x+y);\r\n\r\nOr:\r\n\r\n    integers.values().stream().reduce(0, Integer::sum);\r\n\r\n ","title":"How to sum a list of integers with java streams?","body":"<p>From the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html\">docs</a></p>\n\n<blockquote>\n  <p>Reduction operations\n  A reduction operation (also called a fold) takes a sequence of input elements and combines them into a single summary result by repeated application of a combining operation, such as finding the sum or maximum of a set of numbers, or accumulating elements into a list. The streams classes have multiple forms of general reduction operations, called reduce() and collect(), as well as multiple specialized reduction forms such as sum(), max(), or count().</p>\n  \n  <p>Of course, such operations can be readily implemented as simple sequential loops, as in:</p>\n\n<pre><code>int sum = 0;\nfor (int x : numbers) {\n   sum += x;\n}\n</code></pre>\n  \n  <p>However, there are good reasons to prefer a reduce operation over a mutative accumulation such as the above. Not only is a reduction \"more abstract\" -- it operates on the stream as a whole rather than individual elements -- but a properly constructed reduce operation is inherently parallelizable, so long as the function(s) used to process the elements are associative and stateless. For example, given a stream of numbers for which we want to find the sum, we can write:</p>\n\n<pre><code>int sum = numbers.stream().reduce(0, (x,y) -&gt; x+y);\n</code></pre>\n  \n  <p>or:</p>\n\n<pre><code>int sum = numbers.stream().reduce(0, Integer::sum);\n</code></pre>\n  \n  <p>These reduction operations can run safely in parallel with almost no modification:</p>\n\n<pre><code>int sum = numbers.parallelStream().reduce(0, Integer::sum);\n</code></pre>\n</blockquote>\n\n<p>So, for a map you would use:</p>\n\n<pre><code>integers.values().stream().mapToInt(i -&gt; i).reduce(0, (x,y) -&gt; x+y);\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>integers.values().stream().reduce(0, Integer::sum);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4225608,"reputation":14192,"user_id":3459206,"accept_rate":90,"display_name":"Alex Salauyou"},"comment_count":0,"down_vote_count":0,"up_vote_count":181,"is_accepted":false,"score":181,"last_activity_date":1499964643,"creation_date":1431092893,"answer_id":30125487,"question_id":30125296,"body_markdown":"I suggest 2 more options:\r\n\r\n    integers.values().stream().mapToInt(Integer::intValue).sum();\r\n    integers.values().stream().collect(Collectors.summingInt(Integer::intValue));\r\n\r\nThe second one uses [`Collectors.summingInt()`](https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#summingInt-java.util.function.ToIntFunction-) collector, there is also a `summingLong()` collector which you would use with `mapToLong`.\r\n\r\n----\r\n\r\nAnd a third option: Java 8 introduces a very effective [`LongAdder`][1] accumulator designed to speed-up summarizing in parallel streams and multi-thread environments. Here, here&#39;s an example use:\r\n\r\n    LongAdder a = new LongAdder();\r\n    map.values().parallelStream().forEach(a::add);\r\n    sum = a.intValue();\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/atomic/LongAdder.html","title":"How to sum a list of integers with java streams?","body":"<p>I suggest 2 more options:</p>\n\n<pre><code>integers.values().stream().mapToInt(Integer::intValue).sum();\nintegers.values().stream().collect(Collectors.summingInt(Integer::intValue));\n</code></pre>\n\n<p>The second one uses <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#summingInt-java.util.function.ToIntFunction-\" rel=\"noreferrer\"><code>Collectors.summingInt()</code></a> collector, there is also a <code>summingLong()</code> collector which you would use with <code>mapToLong</code>.</p>\n\n<hr>\n\n<p>And a third option: Java 8 introduces a very effective <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/atomic/LongAdder.html\" rel=\"noreferrer\"><code>LongAdder</code></a> accumulator designed to speed-up summarizing in parallel streams and multi-thread environments. Here, here's an example use:</p>\n\n<pre><code>LongAdder a = new LongAdder();\nmap.values().parallelStream().forEach(a::add);\nsum = a.intValue();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":6410016,"reputation":7025,"user_id":4970079,"accept_rate":76,"display_name":"GOXR3PLUS"},"score":4,"creation_date":1547553643,"post_id":30125523,"comment_id":95223501,"body_markdown":"What if we have a BigInteger :) ?","body":"What if we have a BigInteger :) ?"},{"owner":{"account_id":72720,"reputation":9178,"user_id":209828,"accept_rate":83,"display_name":"Matt"},"score":27,"creation_date":1550441010,"post_id":30125523,"comment_id":96258641,"body_markdown":"One simple option is`BigDecimal sum = numbers.stream().reduce(BigDecimal.ZERO, BigDecimal::add);`","body":"One simple option is<code>BigDecimal sum = numbers.stream().reduce(BigDecimal.ZERO, BigDecimal::add);</code>"},{"owner":{"account_id":97313,"reputation":6321,"user_id":264028,"accept_rate":75,"display_name":"Joaqu&#237;n L. Robles"},"score":1,"creation_date":1613750881,"post_id":30125523,"comment_id":117180943,"body_markdown":"he specifically asked for `Integers`","body":"he specifically asked for <code>Integers</code>"},{"owner":{"account_id":2568640,"reputation":610,"user_id":6760934,"accept_rate":38,"display_name":"DaviesTobi alex"},"score":2,"creation_date":1615543989,"post_id":30125523,"comment_id":117729133,"body_markdown":"How do you sum to a particular value? for example, you have a list of integers but you want to sum till you get the value 20.","body":"How do you sum to a particular value? for example, you have a list of integers but you want to sum till you get the value 20."},{"owner":{"account_id":480845,"reputation":71,"user_id":894319,"display_name":"user894319twitter"},"score":1,"creation_date":1700106337,"post_id":30125523,"comment_id":136614891,"body_markdown":"@Joaqu&#237;nL.Robles basic types are easy to overflow and underflow with most popular languages including Java&#39;s Integer.","body":"@Joaqu&#237;nL.Robles basic types are easy to overflow and underflow with most popular languages including Java&#39;s Integer."}],"tags":[],"owner":{"account_id":5785597,"reputation":9456,"user_id":4564945,"display_name":"Necreaux"},"comment_count":5,"down_vote_count":0,"up_vote_count":640,"is_accepted":false,"score":640,"last_activity_date":1621876892,"creation_date":1431093002,"answer_id":30125523,"question_id":30125296,"body_markdown":"This will work, but the `i -&gt; i` is doing some automatic unboxing which is why it &quot;feels&quot; strange. `mapToInt` converts the stream to an `IntStream`  &quot;of primitive int-valued elements&quot;.  Either of the following will work and better explain what the compiler is doing under the hood with your original syntax:\r\n\r\n    integers.values().stream().mapToInt(i -&gt; i.intValue()).sum();\r\n    integers.values().stream().mapToInt(Integer::intValue).sum();\r\n","title":"How to sum a list of integers with java streams?","body":"<p>This will work, but the <code>i -&gt; i</code> is doing some automatic unboxing which is why it &quot;feels&quot; strange. <code>mapToInt</code> converts the stream to an <code>IntStream</code>  &quot;of primitive int-valued elements&quot;.  Either of the following will work and better explain what the compiler is doing under the hood with your original syntax:</p>\n<pre><code>integers.values().stream().mapToInt(i -&gt; i.intValue()).sum();\nintegers.values().stream().mapToInt(Integer::intValue).sum();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4225608,"reputation":14192,"user_id":3459206,"accept_rate":90,"display_name":"Alex Salauyou"},"score":9,"creation_date":1458903068,"post_id":35035659,"comment_id":60068483,"body_markdown":"There is already such accumulator for `int`, it is `Integer::sum`","body":"There is already such accumulator for <code>int</code>, it is <code>Integer::sum</code>"},{"owner":{"account_id":221275,"reputation":1900,"user_id":479159,"display_name":"Andrei Damian-Fekete"},"score":1,"creation_date":1552380374,"post_id":35035659,"comment_id":96976103,"body_markdown":"You&#39;re returning a long, so it would be better `Long::sum` than `Integer::sum`.","body":"You&#39;re returning a long, so it would be better <code>Long::sum</code> than <code>Integer::sum</code>."}],"tags":[],"owner":{"account_id":56980,"reputation":9928,"user_id":170664,"accept_rate":48,"display_name":"Saeed Zarinfam"},"comment_count":2,"down_vote_count":1,"up_vote_count":36,"is_accepted":false,"score":35,"last_activity_date":1514201617,"creation_date":1453892965,"answer_id":35035659,"question_id":30125296,"body_markdown":"You can use reduce method:\r\n\r\n    long sum = result.stream().map(e -&gt; e.getCreditAmount()).reduce(0L, (x, y) -&gt; x + y);\r\n\r\nor\r\n\r\n    long sum = result.stream().map(e -&gt; e.getCreditAmount()).reduce(0L, Integer::sum);\r\n","title":"How to sum a list of integers with java streams?","body":"<p>You can use reduce method:</p>\n\n<pre><code>long sum = result.stream().map(e -&gt; e.getCreditAmount()).reduce(0L, (x, y) -&gt; x + y);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>long sum = result.stream().map(e -&gt; e.getCreditAmount()).reduce(0L, Integer::sum);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10960916,"reputation":296,"user_id":8054264,"display_name":"Ashish Jha"},"comment_count":0,"down_vote_count":0,"up_vote_count":15,"is_accepted":true,"score":15,"last_activity_date":1521355264,"creation_date":1521355193,"answer_id":49345164,"question_id":30125296,"body_markdown":"You can use collect method to add list of integers.\r\n\r\n    List&lt;Integer&gt; list = Arrays.asList(2, 4, 5, 6);\r\n    int sum = list.stream().collect(Collectors.summingInt(Integer::intValue));","title":"How to sum a list of integers with java streams?","body":"<p>You can use collect method to add list of integers.</p>\n\n<pre><code>List&lt;Integer&gt; list = Arrays.asList(2, 4, 5, 6);\nint sum = list.stream().collect(Collectors.summingInt(Integer::intValue));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7244674,"reputation":331,"user_id":5527030,"display_name":"Johnson Abraham"},"comment_count":0,"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1535242700,"creation_date":1535241599,"answer_id":52022173,"question_id":30125296,"body_markdown":"You can use `reduce()` to sum a list of integers.\r\n\r\n    int sum = integers.values().stream().reduce(0, Integer::sum);","title":"How to sum a list of integers with java streams?","body":"<p>You can use <code>reduce()</code> to sum a list of integers.</p>\n\n<pre><code>int sum = integers.values().stream().reduce(0, Integer::sum);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":15524669,"reputation":2739,"user_id":11199879,"display_name":"Kaplan"},"score":0,"creation_date":1569411645,"post_id":55646615,"comment_id":102587035,"body_markdown":"Unfortunately we don&#39;t have any int-array. So `IntStream.of()` won&#39;t work for this problem, unless we&#39;re making something spooky like this:\n`IntStream.of( integers.values().stream().mapToInt( Integer::intValue ).toArray() ).sum();`","body":"Unfortunately we don&#39;t have any int-array. So <code>IntStream.of()</code> won&#39;t work for this problem, unless we&#39;re making something spooky like this: <code>IntStream.of( integers.values().stream().mapToInt( Integer::intValue ).toArray() ).sum();</code>"},{"owner":{"account_id":2310423,"reputation":1418,"user_id":2028671,"display_name":"Sachith Dickwella"},"score":1,"creation_date":1569419248,"post_id":55646615,"comment_id":102591582,"body_markdown":"No need, this would be enough `integers.values().stream().mapToInt( Integer::intValue ).sum()`.","body":"No need, this would be enough <code>integers.values().stream().mapToInt( Integer::intValue ).sum()</code>."}],"tags":[],"owner":{"account_id":2310423,"reputation":1418,"user_id":2028671,"display_name":"Sachith Dickwella"},"comment_count":2,"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1555054326,"creation_date":1555054326,"answer_id":55646615,"question_id":30125296,"body_markdown":"This would be the shortest way to sum up `int` type array (for `long` array `LongStream`, for `double` array `DoubleStream` and so forth). Not all the primitive integer or floating point types have the `Stream` implementation though. \r\n\r\n    IntStream.of(integers).sum();","title":"How to sum a list of integers with java streams?","body":"<p>This would be the shortest way to sum up <code>int</code> type array (for <code>long</code> array <code>LongStream</code>, for <code>double</code> array <code>DoubleStream</code> and so forth). Not all the primitive integer or floating point types have the <code>Stream</code> implementation though. </p>\n\n<pre><code>IntStream.of(integers).sum();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1299488,"reputation":6269,"user_id":1249710,"display_name":"JDGuide"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1562756019,"creation_date":1562756019,"answer_id":56969167,"question_id":30125296,"body_markdown":"I have declared a list of Integers. \r\n\r\n\r\n    ArrayList&lt;Integer&gt; numberList = new ArrayList&lt;Integer&gt;(Arrays.asList(1, 2, 3, 4, 5));\r\n\r\nYou can try using these different ways below.\r\n\r\nUsing `mapToInt`\r\n\r\n    int sum = numberList.stream().mapToInt(Integer::intValue).sum();\r\n\r\nUsing `summarizingInt`\r\n\r\n    int sum = numberList.stream().collect(Collectors.summarizingInt(Integer::intValue)).getSum();\r\n\r\nUsing `reduce`\r\n\r\n    int sum = numberList.stream().reduce(Integer::sum).get().intValue();\r\n\r\n","title":"How to sum a list of integers with java streams?","body":"<p>I have declared a list of Integers. </p>\n\n<pre><code>ArrayList&lt;Integer&gt; numberList = new ArrayList&lt;Integer&gt;(Arrays.asList(1, 2, 3, 4, 5));\n</code></pre>\n\n<p>You can try using these different ways below.</p>\n\n<p>Using <code>mapToInt</code></p>\n\n<pre><code>int sum = numberList.stream().mapToInt(Integer::intValue).sum();\n</code></pre>\n\n<p>Using <code>summarizingInt</code></p>\n\n<pre><code>int sum = numberList.stream().collect(Collectors.summarizingInt(Integer::intValue)).getSum();\n</code></pre>\n\n<p>Using <code>reduce</code></p>\n\n<pre><code>int sum = numberList.stream().reduce(Integer::sum).get().intValue();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1099760,"reputation":7046,"user_id":1092450,"accept_rate":74,"display_name":"itro"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1576595895,"creation_date":1576595895,"answer_id":59377193,"question_id":30125296,"body_markdown":"**May this help those who have objects on the list.**\r\n\r\nIf you have a list of objects and wanted to sum specific fields of this object use the below.\r\n\r\n\r\n    List&lt;ResultSom&gt; somList = MyUtil.getResultSom();\r\n    BigDecimal result= somList.stream().map(ResultSom::getNetto).reduce(\r\n                                                 BigDecimal.ZERO, BigDecimal::add);","title":"How to sum a list of integers with java streams?","body":"<p><strong>May this help those who have objects on the list.</strong></p>\n\n<p>If you have a list of objects and wanted to sum specific fields of this object use the below.</p>\n\n<pre><code>List&lt;ResultSom&gt; somList = MyUtil.getResultSom();\nBigDecimal result= somList.stream().map(ResultSom::getNetto).reduce(\n                                             BigDecimal.ZERO, BigDecimal::add);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15387,"reputation":63718,"user_id":32453,"accept_rate":92,"display_name":"rogerdpack"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1621881306,"creation_date":1621881306,"answer_id":67677241,"question_id":30125296,"body_markdown":"Unfortunately looks like the Stream API only returns normal streams from, say, `List&lt;Integer&gt;#stream()`.  Guess they&#39;re pretty much forced to because of how generics work.  \r\n\r\nThese normal Streams are of generic objects so don&#39;t have specialized methods like `sum()` etc. so you have to use the weird re-stream &quot;looks like a no-op&quot;  conversion by default to get to those methods... `.mapToInt(i -&gt; i)`.\r\n\r\nAnother option is using &quot;[Eclipse Collections][1]&quot; which are like an expanded java Stream API\r\n\r\n `IntLists.immutable.ofAll(integers.values()).sum();`\r\n\r\n\r\n  [1]: https://www.eclipse.org/collections/javadoc/10.4.0/org/eclipse/collections/api/factory/list/primitive/ImmutableIntListFactory.html#ofAll(java.lang.Iterable)","title":"How to sum a list of integers with java streams?","body":"<p>Unfortunately looks like the Stream API only returns normal streams from, say, <code>List&lt;Integer&gt;#stream()</code>.  Guess they're pretty much forced to because of how generics work.</p>\n<p>These normal Streams are of generic objects so don't have specialized methods like <code>sum()</code> etc. so you have to use the weird re-stream &quot;looks like a no-op&quot;  conversion by default to get to those methods... <code>.mapToInt(i -&gt; i)</code>.</p>\n<p>Another option is using &quot;<a href=\"https://www.eclipse.org/collections/javadoc/10.4.0/org/eclipse/collections/api/factory/list/primitive/ImmutableIntListFactory.html#ofAll(java.lang.Iterable)\" rel=\"nofollow noreferrer\">Eclipse Collections</a>&quot; which are like an expanded java Stream API</p>\n<p><code>IntLists.immutable.ofAll(integers.values()).sum();</code></p>\n"},{"tags":[],"owner":{"account_id":482765,"reputation":4526,"user_id":897373,"accept_rate":85,"display_name":"Saša"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1649242864,"creation_date":1649241012,"answer_id":71765136,"question_id":30125296,"body_markdown":"There is one more option no one considered here and it reflects on usage of multi-core environment. If you want to use its advantages, then next code should be used instead of the other mentioned solutions:\r\n\r\n    int sum = integers.values().parallelStream().mapToInt(Integer::intValue)\r\n            .reduce(0, Integer::sum, Integer::sum);\r\n\r\nThis solution is similar to other ones, but please notice the third argument in reduce. It tells compiler what to do with partial summaries calculated in different chunks of the stream, by different threads. Also instead of `stream()`, the `parallelStream()` is used. In this case it would just summarize it. The other option to put as third argument is `(i, j) -&gt; i + j`, which means that it would add a value of a stream chunk (`j`) to the current value (`i`) and use it as a current value for the next stream chunk until all partial results are processed.\r\n\r\nEven when using plain `stream()` it is useful to tell to reduce what to do with stream chunks&#39; summaries, just in case someone, or you, would like to parallelize it in the future. The initial development is best time for that, since later on you need to remember what this is supposed to be and need to spend some time in understanding the purpose of that code again.\r\n\r\nAnd of course instead of method reference operator you can have different dialect of lambda. I prefer it this way as more compact and still easy readable.\r\n\r\nAlso remember this can be used for more complex calculations too, but always be aware there are no guarantees about sequence and deployment of stream elements to threads.","title":"How to sum a list of integers with java streams?","body":"<p>There is one more option no one considered here and it reflects on usage of multi-core environment. If you want to use its advantages, then next code should be used instead of the other mentioned solutions:</p>\n<pre><code>int sum = integers.values().parallelStream().mapToInt(Integer::intValue)\n        .reduce(0, Integer::sum, Integer::sum);\n</code></pre>\n<p>This solution is similar to other ones, but please notice the third argument in reduce. It tells compiler what to do with partial summaries calculated in different chunks of the stream, by different threads. Also instead of <code>stream()</code>, the <code>parallelStream()</code> is used. In this case it would just summarize it. The other option to put as third argument is <code>(i, j) -&gt; i + j</code>, which means that it would add a value of a stream chunk (<code>j</code>) to the current value (<code>i</code>) and use it as a current value for the next stream chunk until all partial results are processed.</p>\n<p>Even when using plain <code>stream()</code> it is useful to tell to reduce what to do with stream chunks' summaries, just in case someone, or you, would like to parallelize it in the future. The initial development is best time for that, since later on you need to remember what this is supposed to be and need to spend some time in understanding the purpose of that code again.</p>\n<p>And of course instead of method reference operator you can have different dialect of lambda. I prefer it this way as more compact and still easy readable.</p>\n<p>Also remember this can be used for more complex calculations too, but always be aware there are no guarantees about sequence and deployment of stream elements to threads.</p>\n"},{"tags":[],"owner":{"account_id":1653069,"reputation":1472,"user_id":1523263,"accept_rate":46,"display_name":"Nagappa L M"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669040846,"creation_date":1669040846,"answer_id":74520466,"question_id":30125296,"body_markdown":"    IntStream.of(1, 2, 23).sum();\r\n    IntStream.of(1, 2, 23,1, 2, 23,1, 2, 23).max().getAsInt();","title":"How to sum a list of integers with java streams?","body":"<pre><code>IntStream.of(1, 2, 23).sum();\nIntStream.of(1, 2, 23,1, 2, 23,1, 2, 23).max().getAsInt();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22100088,"reputation":31,"user_id":16356696,"display_name":"Jay Patel"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692846942,"creation_date":1692846942,"answer_id":76966032,"question_id":30125296,"body_markdown":"Using **summingInt** \r\n\r\n    Integer sum= listInt.stream().collect(Collectors.summingInt(Integer::intValue));","title":"How to sum a list of integers with java streams?","body":"<p>Using <strong>summingInt</strong></p>\n<pre><code>Integer sum= listInt.stream().collect(Collectors.summingInt(Integer::intValue));\n</code></pre>\n"}],"owner":{"account_id":1229539,"reputation":82701,"user_id":1194415,"accept_rate":76,"display_name":"membersound"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":561609,"favorite_count":0,"down_vote_count":0,"up_vote_count":480,"accepted_answer_id":49345164,"answer_count":13,"score":480,"last_activity_date":1692846942,"creation_date":1431092349,"question_id":30125296,"body_markdown":"I want to sum a list of Integers. It works as follows, but the syntax does not feel right. Could the code be optimized?\r\n\r\n    Map&lt;String, Integer&gt; integers;\r\n    integers.values().stream().mapToInt(i -&gt; i).sum();","title":"How to sum a list of integers with java streams?","body":"<p>I want to sum a list of Integers. It works as follows, but the syntax does not feel right. Could the code be optimized?</p>\n<pre><code>Map&lt;String, Integer&gt; integers;\nintegers.values().stream().mapToInt(i -&gt; i).sum();\n</code></pre>\n"},{"tags":["java","curl","hadoop-yarn","kerberos","kill"],"answers":[{"tags":[],"owner":{"account_id":19900384,"reputation":81,"user_id":14580500,"display_name":"ash"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692846865,"creation_date":1692846865,"answer_id":76966027,"question_id":76965536,"body_markdown":"I am not understand your kerberos implement.\\\r\nI suggest you my general implement.\\\r\nWhen you input your security authentication information,you may get a temporary authentication token, you could transfer this through the http header,and  get the http header on your java app  and then verify it with the temporary authentication token you have saved before.\\\r\nIf you really don’t know how to do this implement functions ,maybe you could add more detail of your java program.Such as the java version ,your http communication framework etc.","title":"How to pass kerberos cred from Java","body":"<p>I am not understand your kerberos implement.<br />\nI suggest you my general implement.<br />\nWhen you input your security authentication information,you may get a temporary authentication token, you could transfer this through the http header,and  get the http header on your java app  and then verify it with the temporary authentication token you have saved before.<br />\nIf you really don’t know how to do this implement functions ,maybe you could add more detail of your java program.Such as the java version ,your http communication framework etc.</p>\n"}],"owner":{"account_id":25954346,"reputation":19,"user_id":19671894,"display_name":"rajani"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692846865,"creation_date":1692835288,"question_id":76965536,"body_markdown":"we are tyring to kill the yarn job from Java using http put call\r\nwith out kerberos it was working..\r\nbut after we enabling kerberos we are getting 403 error\r\n\r\nwe are able to generate kerberos credentials on App server. But how can we pass those credentials from java code.\r\n\r\n","title":"How to pass kerberos cred from Java","body":"<p>we are tyring to kill the yarn job from Java using http put call\nwith out kerberos it was working..\nbut after we enabling kerberos we are getting 403 error</p>\n<p>we are able to generate kerberos credentials on App server. But how can we pass those credentials from java code.</p>\n"},{"tags":["java","logging","configuration","log4j","log4j2"],"comments":[{"owner":{"account_id":37491,"reputation":2118,"user_id":107177,"display_name":"Onots"},"score":0,"creation_date":1391136775,"post_id":21471408,"comment_id":32406376,"body_markdown":"Please provide us with more information. Add some code that logs a message and possibly a sample of the actual output you have now. With more information you&#39;re likely to get more/better help!","body":"Please provide us with more information. Add some code that logs a message and possibly a sample of the actual output you have now. With more information you&#39;re likely to get more/better help!"}],"answers":[{"comments":[{"owner":{"account_id":1628184,"reputation":9512,"user_id":1503237,"accept_rate":67,"display_name":"Matthias Ronge"},"score":2,"creation_date":1543831516,"post_id":21492982,"comment_id":94045741,"body_markdown":"To be precise, as an attribute in the &lt;Logger&gt; tag","body":"To be precise, as an attribute in the &lt;Logger&gt; tag"},{"owner":{"account_id":5692719,"reputation":30507,"user_id":4504191,"display_name":"kris larson"},"score":2,"creation_date":1557496843,"post_id":21492982,"comment_id":98796388,"body_markdown":"It should also be pointed out that this affects the named logger with a log level _equal to or lower_ than the root logger, since that is the case where both loggers are sending the same event to the appender. So `additivity=&quot;false&quot;` should go on the loggers that refer to the root logger&#39;s appender and have an equal/lower log level.","body":"It should also be pointed out that this affects the named logger with a log level <i>equal to or lower</i> than the root logger, since that is the case where both loggers are sending the same event to the appender. So <code>additivity=&quot;false&quot;</code> should go on the loggers that refer to the root logger&#39;s appender and have an equal/lower log level."}],"tags":[],"owner":{"account_id":1555751,"reputation":35615,"user_id":1446916,"display_name":"Remko Popma"},"comment_count":2,"down_vote_count":0,"up_vote_count":52,"is_accepted":true,"score":52,"last_activity_date":1391217974,"creation_date":1391217974,"answer_id":21492982,"question_id":21471408,"body_markdown":"Both your root logger and your named loggers are referring to the same appender. \r\nEach active logger will send an event to its appender, so the appender will receive the event multiple times, once for each logger. (The root logger will get all events, the named loggers will only get the events emitted by the Logger in your code with a matching name.)\r\n\r\nThis is called Additivity. See http://logging.apache.org/log4j/2.x/manual/configuration.html#Additivity\r\n\r\nYou can set additivity=&quot;false&quot; in the named logger config.  ","title":"My log4j2 log file always have double output of each line. How can I stop the duplication please?","body":"<p>Both your root logger and your named loggers are referring to the same appender. \nEach active logger will send an event to its appender, so the appender will receive the event multiple times, once for each logger. (The root logger will get all events, the named loggers will only get the events emitted by the Logger in your code with a matching name.)</p>\n\n<p>This is called Additivity. See <a href=\"http://logging.apache.org/log4j/2.x/manual/configuration.html#Additivity\">http://logging.apache.org/log4j/2.x/manual/configuration.html#Additivity</a></p>\n\n<p>You can set additivity=\"false\" in the named logger config.  </p>\n"},{"comments":[{"owner":{"account_id":4647011,"reputation":41835,"user_id":3764965,"accept_rate":94,"display_name":"Nikolas Charalambidis"},"score":0,"creation_date":1692847684,"post_id":71225740,"comment_id":135680470,"body_markdown":"This sounds more reasonable than &quot;hacky&quot; `additivity=&quot;false&quot;`.","body":"This sounds more reasonable than &quot;hacky&quot; <code>additivity=&quot;false&quot;</code>."}],"tags":[],"owner":{"account_id":17980360,"reputation":53,"user_id":13066866,"display_name":"shrexster42"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1645550920,"creation_date":1645550920,"answer_id":71225740,"question_id":21471408,"body_markdown":"There is no need of specifying a separate appender for each named logger unless the destination is different than the root logger appender. You can also rewrite as below:\r\n\r\n```\r\n&lt;Root level=&quot;error&quot;&gt;\r\n        &lt;!-- &lt;AppenderRef ref=&quot;CONSOLE&quot;/&gt; --&gt;\r\n        &lt;AppenderRef ref=&quot;ROLLING_FILE&quot;/&gt;\r\n&lt;/Root&gt;\r\n&lt;!-- Controls packages --&gt;\r\n&lt;Logger name=&quot;com.jarmel.pharmacy.controls.BarCodeOrderServlet&quot; level=&quot;trace&quot;/&gt;\r\n        \r\n&lt;Logger name=&quot;com.jarmel.pharmacy.controls.GetCodeValues&quot; level=&quot;error&quot;/&gt;\r\n           \r\n&lt;Logger name=&quot;com.jarmel.pharmacy.controls.GetPersonnelServlet&quot; level=&quot;error&quot;/&gt;\r\n            \r\n```","title":"My log4j2 log file always have double output of each line. How can I stop the duplication please?","body":"<p>There is no need of specifying a separate appender for each named logger unless the destination is different than the root logger appender. You can also rewrite as below:</p>\n<pre><code>&lt;Root level=&quot;error&quot;&gt;\n        &lt;!-- &lt;AppenderRef ref=&quot;CONSOLE&quot;/&gt; --&gt;\n        &lt;AppenderRef ref=&quot;ROLLING_FILE&quot;/&gt;\n&lt;/Root&gt;\n&lt;!-- Controls packages --&gt;\n&lt;Logger name=&quot;com.jarmel.pharmacy.controls.BarCodeOrderServlet&quot; level=&quot;trace&quot;/&gt;\n        \n&lt;Logger name=&quot;com.jarmel.pharmacy.controls.GetCodeValues&quot; level=&quot;error&quot;/&gt;\n           \n&lt;Logger name=&quot;com.jarmel.pharmacy.controls.GetPersonnelServlet&quot; level=&quot;error&quot;/&gt;\n            \n</code></pre>\n"}],"owner":{"account_id":3941516,"reputation":279,"user_id":3255707,"display_name":"tsquare"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16292,"favorite_count":0,"down_vote_count":2,"up_vote_count":28,"accepted_answer_id":21492982,"answer_count":2,"score":26,"last_activity_date":1692846241,"creation_date":1391134953,"question_id":21471408,"body_markdown":"My log4j2 log file always has double output of each line. How can I stop the duplication please?\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;Configuration status=&quot;WARN&quot;&gt;\r\n    &lt;properties&gt;\r\n        &lt;property name=&quot;name&quot;&gt;CernerPharmacyWebApp&lt;/property&gt;\r\n        &lt;property name=&quot;pattern&quot;&gt;%d %-5p %C{2} (%F:%L) - %m%n&lt;/property&gt;\r\n    &lt;/properties&gt;\r\n    &lt;Appenders&gt;\r\n        &lt;Console name=&quot;CONSOLE&quot; target=&quot;SYSTEM_OUT&quot;&gt;\r\n            &lt;ThresholdFilter level=&quot;error&quot; onMatch=&quot;ACCEPT&quot; onMismatch=&quot;DENY&quot;/&gt;\r\n            &lt;PatternLayout&gt;\r\n                &lt;pattern&gt;${pattern}&lt;/pattern&gt;\r\n            &lt;/PatternLayout&gt;\r\n        &lt;/Console&gt;\r\n        &lt;RollingFile name=&quot;ROLLING_FILE&quot; fileName=&quot;..\\logs\\${name}.log&quot;\r\n                     filePattern=&quot;..\\logs\\${name}-%d{yyyy-MM-dd}-%i.log&quot;&gt;\r\n            &lt;PatternLayout&gt;\r\n                &lt;pattern&gt;${pattern}&lt;/pattern&gt;\r\n            &lt;/PatternLayout&gt;\r\n            &lt;Policies&gt;\r\n                &lt;TimeBasedTriggeringPolicy/&gt;&lt;!-- Rotated everyday --&gt;\r\n                    &lt;SizeBasedTriggeringPolicy size=&quot;50 MB&quot;/&gt; &lt;!-- Or every 50 MB --&gt;\r\n            &lt;/Policies&gt;\r\n        &lt;/RollingFile&gt;\r\n    &lt;/Appenders&gt;\r\n    &lt;Loggers&gt;\r\n        &lt;Root level=&quot;error&quot;&gt;\r\n            &lt;!-- &lt;AppenderRef ref=&quot;CONSOLE&quot;/&gt; --&gt;\r\n            &lt;AppenderRef ref=&quot;ROLLING_FILE&quot;/&gt;\r\n        &lt;/Root&gt;\r\n        &lt;!-- Controls packages --&gt;\r\n        &lt;Logger name=&quot;com.jarmel.pharmacy.controls.BarCodeOrderServlet&quot; level=&quot;trace&quot;&gt;\r\n            &lt;!-- &lt;AppenderRef ref=&quot;CONSOLE&quot;/&gt; --&gt;\r\n            &lt;AppenderRef ref=&quot;ROLLING_FILE&quot;/&gt;\r\n        &lt;/Logger&gt;\r\n        &lt;Logger name=&quot;com.jarmel.pharmacy.controls.GetCodeValues&quot; level=&quot;error&quot;&gt;\r\n            &lt;!-- &lt;AppenderRef ref=&quot;CONSOLE&quot;/&gt; --&gt;\r\n            &lt;AppenderRef ref=&quot;ROLLING_FILE&quot;/&gt;\r\n        &lt;/Logger&gt;\r\n        &lt;Logger name=&quot;com.jarmel.pharmacy.controls.GetPersonnelServlet&quot; level=&quot;error&quot;&gt;\r\n            &lt;!-- &lt;AppenderRef ref=&quot;CONSOLE&quot;/&gt; --&gt;\r\n            &lt;AppenderRef ref=&quot;ROLLING_FILE&quot;/&gt;\r\n        &lt;/Logger&gt;\r\n   &lt;/Loggers&gt;\r\n&lt;/Configuration&gt;\r\n```\r\n\r\n&gt; Blockquote","title":"My log4j2 log file always have double output of each line. How can I stop the duplication please?","body":"<p>My log4j2 log file always has double output of each line. How can I stop the duplication please?</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;Configuration status=&quot;WARN&quot;&gt;\n    &lt;properties&gt;\n        &lt;property name=&quot;name&quot;&gt;CernerPharmacyWebApp&lt;/property&gt;\n        &lt;property name=&quot;pattern&quot;&gt;%d %-5p %C{2} (%F:%L) - %m%n&lt;/property&gt;\n    &lt;/properties&gt;\n    &lt;Appenders&gt;\n        &lt;Console name=&quot;CONSOLE&quot; target=&quot;SYSTEM_OUT&quot;&gt;\n            &lt;ThresholdFilter level=&quot;error&quot; onMatch=&quot;ACCEPT&quot; onMismatch=&quot;DENY&quot;/&gt;\n            &lt;PatternLayout&gt;\n                &lt;pattern&gt;${pattern}&lt;/pattern&gt;\n            &lt;/PatternLayout&gt;\n        &lt;/Console&gt;\n        &lt;RollingFile name=&quot;ROLLING_FILE&quot; fileName=&quot;..\\logs\\${name}.log&quot;\n                     filePattern=&quot;..\\logs\\${name}-%d{yyyy-MM-dd}-%i.log&quot;&gt;\n            &lt;PatternLayout&gt;\n                &lt;pattern&gt;${pattern}&lt;/pattern&gt;\n            &lt;/PatternLayout&gt;\n            &lt;Policies&gt;\n                &lt;TimeBasedTriggeringPolicy/&gt;&lt;!-- Rotated everyday --&gt;\n                    &lt;SizeBasedTriggeringPolicy size=&quot;50 MB&quot;/&gt; &lt;!-- Or every 50 MB --&gt;\n            &lt;/Policies&gt;\n        &lt;/RollingFile&gt;\n    &lt;/Appenders&gt;\n    &lt;Loggers&gt;\n        &lt;Root level=&quot;error&quot;&gt;\n            &lt;!-- &lt;AppenderRef ref=&quot;CONSOLE&quot;/&gt; --&gt;\n            &lt;AppenderRef ref=&quot;ROLLING_FILE&quot;/&gt;\n        &lt;/Root&gt;\n        &lt;!-- Controls packages --&gt;\n        &lt;Logger name=&quot;com.jarmel.pharmacy.controls.BarCodeOrderServlet&quot; level=&quot;trace&quot;&gt;\n            &lt;!-- &lt;AppenderRef ref=&quot;CONSOLE&quot;/&gt; --&gt;\n            &lt;AppenderRef ref=&quot;ROLLING_FILE&quot;/&gt;\n        &lt;/Logger&gt;\n        &lt;Logger name=&quot;com.jarmel.pharmacy.controls.GetCodeValues&quot; level=&quot;error&quot;&gt;\n            &lt;!-- &lt;AppenderRef ref=&quot;CONSOLE&quot;/&gt; --&gt;\n            &lt;AppenderRef ref=&quot;ROLLING_FILE&quot;/&gt;\n        &lt;/Logger&gt;\n        &lt;Logger name=&quot;com.jarmel.pharmacy.controls.GetPersonnelServlet&quot; level=&quot;error&quot;&gt;\n            &lt;!-- &lt;AppenderRef ref=&quot;CONSOLE&quot;/&gt; --&gt;\n            &lt;AppenderRef ref=&quot;ROLLING_FILE&quot;/&gt;\n        &lt;/Logger&gt;\n   &lt;/Loggers&gt;\n&lt;/Configuration&gt;\n</code></pre>\n<blockquote>\n<p>Blockquote</p>\n</blockquote>\n"},{"tags":["java","annotations","spring-security"],"answers":[{"tags":[],"owner":{"account_id":143980,"reputation":14984,"user_id":352708,"accept_rate":73,"display_name":"Slava Semushin"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1692844931,"creation_date":1330723637,"answer_id":9540610,"question_id":9539936,"body_markdown":"If you change `@RolesAllowed` to `@PreAuthorize(&quot;hasAuthority(&#39;ROLE_ADMIN&#39;)&quot;)` and define `global-method-security` with `pre-post-annotations=&quot;enabled&quot;` attribute, does it work?\r\n\r\nAlso, I suppose that it&#39;s not working because you define `global-method-security` and other configuration in servlet config instead of application context.\r\n\r\nSee similar post: https://stackoverflow.com/a/2525048/352708","title":"@RolesAllowed doesn&#39;t work","body":"<p>If you change <code>@RolesAllowed</code> to <code>@PreAuthorize(&quot;hasAuthority('ROLE_ADMIN')&quot;)</code> and define <code>global-method-security</code> with <code>pre-post-annotations=&quot;enabled&quot;</code> attribute, does it work?</p>\n<p>Also, I suppose that it's not working because you define <code>global-method-security</code> and other configuration in servlet config instead of application context.</p>\n<p>See similar post: <a href=\"https://stackoverflow.com/a/2525048/352708\">https://stackoverflow.com/a/2525048/352708</a></p>\n"}],"owner":{"account_id":1288319,"reputation":9494,"user_id":1240930,"accept_rate":92,"display_name":"John Doe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7424,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":9540610,"answer_count":1,"score":2,"last_activity_date":1692844931,"creation_date":1330720280,"question_id":9539936,"body_markdown":"I searched for the answer, but didn&#39;t find it. If I add `&lt;intercept-url pattern=&quot;/test*&quot; access=&quot;ROLE_USER&quot; /&gt;` inside the `&lt;form-login&gt;` of my spring-security.xml, everything works predictably. But if I want `@RolesAllowed(&quot;ROLE_ADMIN&quot;)` to act for the method:\r\n\r\n    @RolesAllowed(&quot;ROLE_ADMIN&quot;)\r\n    @RequestMapping(value=&quot;/test&quot;, method = RequestMethod.GET)\r\n    public String test() {\r\n        return &quot;test&quot;;\r\n    }        \r\n\r\nAnd if spring-security.xml looks like this (jsr250-annotations are enabled):\r\n\r\n    &lt;http auto-config=&quot;true&quot;&gt;\r\n        &lt;form-login login-page=&quot;/login.html&quot; \r\n                    default-target-url=&quot;/welcome.html&quot;\r\n                    authentication-failure-url=&quot;/loginfailed.html&quot; /&gt;\r\n        &lt;logout logout-success-url=&quot;/logout.html&quot; /&gt;\r\n    &lt;/http&gt;          \r\n    \r\n    &lt;authentication-manager&gt;\r\n      &lt;authentication-provider&gt;\r\n            &lt;user-service&gt;\r\n                    &lt;user name=&quot;john&quot; password=&quot;doe&quot; authorities=&quot;ROLE_ADMIN&quot; /&gt;\r\n                    &lt;user name=&quot;jane&quot; password=&quot;doe&quot; authorities=&quot;ROLE_USER&quot; /&gt;\r\n            &lt;/user-service&gt;\r\n      &lt;/authentication-provider&gt;\r\n    &lt;/authentication-manager&gt;\r\n    \r\n    &lt;global-method-security   secured-annotations=&quot;enabled&quot; jsr250-annotations=&quot;enabled&quot; /&gt;\r\n\r\nWell, in this case both John and Jane can access the test page. I think I missed something basic, the help would be appreciated.","title":"@RolesAllowed doesn&#39;t work","body":"<p>I searched for the answer, but didn't find it. If I add <code>&lt;intercept-url pattern=\"/test*\" access=\"ROLE_USER\" /&gt;</code> inside the <code>&lt;form-login&gt;</code> of my spring-security.xml, everything works predictably. But if I want <code>@RolesAllowed(\"ROLE_ADMIN\")</code> to act for the method:</p>\n\n<pre><code>@RolesAllowed(\"ROLE_ADMIN\")\n@RequestMapping(value=\"/test\", method = RequestMethod.GET)\npublic String test() {\n    return \"test\";\n}        \n</code></pre>\n\n<p>And if spring-security.xml looks like this (jsr250-annotations are enabled):</p>\n\n<pre><code>&lt;http auto-config=\"true\"&gt;\n    &lt;form-login login-page=\"/login.html\" \n                default-target-url=\"/welcome.html\"\n                authentication-failure-url=\"/loginfailed.html\" /&gt;\n    &lt;logout logout-success-url=\"/logout.html\" /&gt;\n&lt;/http&gt;          \n\n&lt;authentication-manager&gt;\n  &lt;authentication-provider&gt;\n        &lt;user-service&gt;\n                &lt;user name=\"john\" password=\"doe\" authorities=\"ROLE_ADMIN\" /&gt;\n                &lt;user name=\"jane\" password=\"doe\" authorities=\"ROLE_USER\" /&gt;\n        &lt;/user-service&gt;\n  &lt;/authentication-provider&gt;\n&lt;/authentication-manager&gt;\n\n&lt;global-method-security   secured-annotations=\"enabled\" jsr250-annotations=\"enabled\" /&gt;\n</code></pre>\n\n<p>Well, in this case both John and Jane can access the test page. I think I missed something basic, the help would be appreciated.</p>\n"},{"tags":["java","java-8","java-stream","collectors"],"comments":[{"owner":{"account_id":444416,"reputation":15934,"user_id":836214,"accept_rate":86,"display_name":"Krease"},"score":2,"creation_date":1450144321,"post_id":34279645,"comment_id":56301437,"body_markdown":"There is no such method that takes in multiple collectors like you&#39;re trying to do - you likely have a compile error. Spend some time reading [this streams tutorial](http://www.oracle.com/technetwork/articles/java/architect-streams-pt2-2227132.html)","body":"There is no such method that takes in multiple collectors like you&#39;re trying to do - you likely have a compile error. Spend some time reading <a href=\"http://www.oracle.com/technetwork/articles/java/architect-streams-pt2-2227132.html\" rel=\"nofollow noreferrer\">this streams tutorial</a>"},{"owner":{"account_id":6243460,"reputation":97907,"user_id":4856258,"accept_rate":100,"display_name":"Tagir Valeev"},"score":1,"creation_date":1450153845,"post_id":34279645,"comment_id":56304055,"body_markdown":"While I answered, I had to guess what exactly do you want to get. Your question would be more clear had you supplied the desired result example.","body":"While I answered, I had to guess what exactly do you want to get. Your question would be more clear had you supplied the desired result example."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1450174033,"post_id":34279645,"comment_id":56313947,"body_markdown":"As a side note, it’s nonsensical to use `Collectors.counting()` when your source is a `List` you can simply call `size()` and save CPU cycles with the current (Java&#160;8) implementation…","body":"As a side note, it’s nonsensical to use <code>Collectors.counting()</code> when your source is a <code>List</code> you can simply call <code>size()</code> and save CPU cycles with the current (Java 8) implementation…"},{"owner":{"account_id":6243460,"reputation":97907,"user_id":4856258,"accept_rate":100,"display_name":"Tagir Valeev"},"score":1,"creation_date":1450174973,"post_id":34279645,"comment_id":56314642,"body_markdown":"@Holger, `counting()` collector will unlikely to be improved even in future Java versions (unlike `count()` method). Even assuming [this](https://bugs.openjdk.java.net/browse/JDK-8072840) questionable feature will be implemented, collector cannot say to the stream that you don&#39;t need to iterate the input.","body":"@Holger, <code>counting()</code> collector will unlikely to be improved even in future Java versions (unlike <code>count()</code> method). Even assuming <a href=\"https://bugs.openjdk.java.net/browse/JDK-8072840\" rel=\"nofollow noreferrer\">this</a> questionable feature will be implemented, collector cannot say to the stream that you don&#39;t need to iterate the input."},{"owner":{"account_id":6243460,"reputation":97907,"user_id":4856258,"accept_rate":100,"display_name":"Tagir Valeev"},"score":1,"creation_date":1450175087,"post_id":34279645,"comment_id":56314722,"body_markdown":"@Holger, well to be precise it *will* be [improved](http://hg.openjdk.java.net/jdk9/dev/jdk/rev/1edfa4abd77a) to avoid unnecessary boxing, but it will still be O(n).","body":"@Holger, well to be precise it <i>will</i> be <a href=\"http://hg.openjdk.java.net/jdk9/dev/jdk/rev/1edfa4abd77a\" rel=\"nofollow noreferrer\">improved</a> to avoid unnecessary boxing, but it will still be O(n)."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1450175349,"post_id":34279645,"comment_id":56314905,"body_markdown":"@Tagir Valeev: I can’t predict how likely it is for Oracle’s reference implementation, however, it’s not that hard to make that improvement even without changing the API. The point is that both, `Collectors` and the `Stream` implementation reside within the same library, even within the same package. There can be any off-API communication the developers want. After all, the only thing needed is the `Stream` implementation to recognize that the specified collector is the counting collector… But anyway, the original statement holds, using `List.size()` is preferable over `Collectors.counting()`.","body":"@Tagir Valeev: I can’t predict how likely it is for Oracle’s reference implementation, however, it’s not that hard to make that improvement even without changing the API. The point is that both, <code>Collectors</code> and the <code>Stream</code> implementation reside within the same library, even within the same package. There can be any off-API communication the developers want. After all, the only thing needed is the <code>Stream</code> implementation to recognize that the specified collector is the counting collector… But anyway, the original statement holds, using <code>List.size()</code> is preferable over <code>Collectors.counting()</code>."}],"answers":[{"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1450174304,"post_id":34281140,"comment_id":56314128,"body_markdown":"I think, the output of `IntSummaryStatistics`’ `toString()` method is more useful than the `statsString`. It doesn’t double the average though, but why would you double the average anyway…","body":"I think, the output of <code>IntSummaryStatistics</code>’ <code>toString()</code> method is more useful than the <code>statsString</code>. It doesn’t double the average though, but why would you double the average anyway…"},{"owner":{"account_id":6243460,"reputation":97907,"user_id":4856258,"accept_rate":100,"display_name":"Tagir Valeev"},"score":1,"creation_date":1450175179,"post_id":34281140,"comment_id":56314785,"body_markdown":"@Holger, probably so. The question is really weird.","body":"@Holger, probably so. The question is really weird."},{"owner":{"account_id":6128151,"reputation":153,"user_id":4779332,"accept_rate":71,"display_name":"Mohamed Aziz Bessrour"},"score":0,"creation_date":1450184645,"post_id":34281140,"comment_id":56321341,"body_markdown":"Thank you for answering @TagirValeev.. you resolved the problem \npartially. In fact, what i want is to return the max,min,count,average and sum in one string and in one line. it should start like this: String joined = employees.stream(). /*...other method*/ . By the way sorry for the weird question, i posted it at 03:00 AM","body":"Thank you for answering @TagirValeev.. you resolved the problem  partially. In fact, what i want is to return the max,min,count,average and sum in one string and in one line. it should start like this: String joined = employees.stream(). /*...other method*/ . By the way sorry for the weird question, i posted it at 03:00 AM"},{"owner":{"account_id":6243460,"reputation":97907,"user_id":4856258,"accept_rate":100,"display_name":"Tagir Valeev"},"score":0,"creation_date":1450193128,"post_id":34281140,"comment_id":56327378,"body_markdown":"@MohamedAzizBessrour, I added one more solution.","body":"@MohamedAzizBessrour, I added one more solution."}],"tags":[],"owner":{"account_id":6243460,"reputation":97907,"user_id":4856258,"accept_rate":100,"display_name":"Tagir Valeev"},"comment_count":4,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1450193108,"creation_date":1450153713,"answer_id":34281140,"question_id":34279645,"body_markdown":"Note that currently you&#39;re trying to get not the max/min salary, but the Employee having such salary. If you actually want to have the max/min salary itself (number), then these characteristics could be calculated at once using `Collectors.summarizingInt()`:\r\n\r\n    IntSummaryStatistics stats = employees.stream()\r\n        .collect(Collectors.summarizingInt(Employee::getSalary));\r\n\r\nIf you want to join them to string, you may use:\r\n\r\n    String statsString = Stream.of(stats.getSum(), stats.getMax(), stats.getMin(), \r\n                                   stats.getAverage()*2, stats.getCount())\r\n                               .map(Object::toString)\r\n                               .collect(Collectors.joining(&quot;, &quot;));\r\n\r\n----\r\n\r\nIf you actually want to get an Employee with max/min salary, here `IntSummaryStatistics` will not help you. However you may create the stream of collectors instead:\r\n\r\n    String result = Stream.&lt;Collector&lt;Employee,?,?&gt;&gt;of(\r\n\t    \t\tCollectors.summingInt(Employee::getSalary),\r\n\t    \t\tCollectors.maxBy(Comparator.comparing(Employee::getSalary)),\r\n\t    \t\tCollectors.minBy(Comparator.comparing(Employee::getSalary)),\r\n\t    \t\tCollectors.averagingLong((Employee e) -&gt;e.getSalary() * 2),\r\n\t    \t\tCollectors.counting())\r\n\t    \t.map(collector -&gt; employees.stream().collect(collector))\r\n            .map(Object::toString)\r\n            .collect(Collectors.joining(&quot;, &quot;));\r\n\r\nNote that in this way you will have an output like (depending on the `Employee.toString()` implementation:\r\n\r\n    1121, Optional[Employee [salary=1000]], Optional[Employee [salary=1]], 560.5, 4\r\n\r\nDon&#39;t forget that `maxBy`/`minBy` return `Optional`.\r\n\r\n----\r\n\r\nIf you are unsatisfied with the first solution and for some reason don&#39;t want to iterate the input several times, you can create a combined collector using a method like this:\r\n\r\n    /**\r\n     * Returns a collector which joins the results of supplied collectors\r\n     * into the single string using the supplied delimiter.\r\n     */\r\n\t@SafeVarargs\r\n\tpublic static &lt;T&gt; Collector&lt;T, ?, String&gt; joining(CharSequence delimiter, \r\n\t\t\tCollector&lt;T, ?, ?&gt;... collectors) {\r\n\t\t@SuppressWarnings(&quot;unchecked&quot;)\r\n\t\tCollector&lt;T, Object, Object&gt;[] cs = (Collector&lt;T, Object, Object&gt;[]) collectors;\r\n\t\treturn Collector.&lt;T, Object[], String&gt;of(\r\n\t\t\t() -&gt; Stream.of(cs).map(c -&gt; c.supplier().get()).toArray(), \r\n\t\t\t(acc, t) -&gt; IntStream.range(0, acc.length)\r\n\t\t\t\t.forEach(idx -&gt; cs[idx].accumulator().accept(acc[idx], t)), \r\n\t\t\t(acc1, acc2) -&gt; IntStream.range(0, acc1.length)\r\n\t\t\t\t.mapToObj(idx -&gt; cs[idx].combiner().apply(acc1[idx], acc2[idx]))\r\n\t\t\t\t.toArray(), \r\n\t\t\tacc -&gt; IntStream.range(0, acc.length)\r\n\t\t\t\t.mapToObj(idx -&gt; cs[idx].finisher().apply(acc[idx]).toString())\r\n\t\t\t\t.collect(Collectors.joining(delimiter)));\r\n\t}\r\n\r\nHaving such method you can write\r\n\r\n\tString stats = employees.stream().collect(joining(&quot;, &quot;,\r\n            Collectors.summingInt(Employee::getSalary),\r\n            Collectors.maxBy(Comparator.comparing(Employee::getSalary)),\r\n            Collectors.minBy(Comparator.comparing(Employee::getSalary)),\r\n            Collectors.averagingLong((Employee e) -&gt;e.getSalary() * 2),\r\n            Collectors.counting()));\r\n","title":"Return in one string the min, max, average, sum, count of salaries with Stream and java8","body":"<p>Note that currently you're trying to get not the max/min salary, but the Employee having such salary. If you actually want to have the max/min salary itself (number), then these characteristics could be calculated at once using <code>Collectors.summarizingInt()</code>:</p>\n\n<pre><code>IntSummaryStatistics stats = employees.stream()\n    .collect(Collectors.summarizingInt(Employee::getSalary));\n</code></pre>\n\n<p>If you want to join them to string, you may use:</p>\n\n<pre><code>String statsString = Stream.of(stats.getSum(), stats.getMax(), stats.getMin(), \n                               stats.getAverage()*2, stats.getCount())\n                           .map(Object::toString)\n                           .collect(Collectors.joining(\", \"));\n</code></pre>\n\n<hr>\n\n<p>If you actually want to get an Employee with max/min salary, here <code>IntSummaryStatistics</code> will not help you. However you may create the stream of collectors instead:</p>\n\n<pre><code>String result = Stream.&lt;Collector&lt;Employee,?,?&gt;&gt;of(\n            Collectors.summingInt(Employee::getSalary),\n            Collectors.maxBy(Comparator.comparing(Employee::getSalary)),\n            Collectors.minBy(Comparator.comparing(Employee::getSalary)),\n            Collectors.averagingLong((Employee e) -&gt;e.getSalary() * 2),\n            Collectors.counting())\n        .map(collector -&gt; employees.stream().collect(collector))\n        .map(Object::toString)\n        .collect(Collectors.joining(\", \"));\n</code></pre>\n\n<p>Note that in this way you will have an output like (depending on the <code>Employee.toString()</code> implementation:</p>\n\n<pre><code>1121, Optional[Employee [salary=1000]], Optional[Employee [salary=1]], 560.5, 4\n</code></pre>\n\n<p>Don't forget that <code>maxBy</code>/<code>minBy</code> return <code>Optional</code>.</p>\n\n<hr>\n\n<p>If you are unsatisfied with the first solution and for some reason don't want to iterate the input several times, you can create a combined collector using a method like this:</p>\n\n<pre><code>/**\n * Returns a collector which joins the results of supplied collectors\n * into the single string using the supplied delimiter.\n */\n@SafeVarargs\npublic static &lt;T&gt; Collector&lt;T, ?, String&gt; joining(CharSequence delimiter, \n        Collector&lt;T, ?, ?&gt;... collectors) {\n    @SuppressWarnings(\"unchecked\")\n    Collector&lt;T, Object, Object&gt;[] cs = (Collector&lt;T, Object, Object&gt;[]) collectors;\n    return Collector.&lt;T, Object[], String&gt;of(\n        () -&gt; Stream.of(cs).map(c -&gt; c.supplier().get()).toArray(), \n        (acc, t) -&gt; IntStream.range(0, acc.length)\n            .forEach(idx -&gt; cs[idx].accumulator().accept(acc[idx], t)), \n        (acc1, acc2) -&gt; IntStream.range(0, acc1.length)\n            .mapToObj(idx -&gt; cs[idx].combiner().apply(acc1[idx], acc2[idx]))\n            .toArray(), \n        acc -&gt; IntStream.range(0, acc.length)\n            .mapToObj(idx -&gt; cs[idx].finisher().apply(acc[idx]).toString())\n            .collect(Collectors.joining(delimiter)));\n}\n</code></pre>\n\n<p>Having such method you can write</p>\n\n<pre><code>String stats = employees.stream().collect(joining(\", \",\n        Collectors.summingInt(Employee::getSalary),\n        Collectors.maxBy(Comparator.comparing(Employee::getSalary)),\n        Collectors.minBy(Comparator.comparing(Employee::getSalary)),\n        Collectors.averagingLong((Employee e) -&gt;e.getSalary() * 2),\n        Collectors.counting()));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":6243460,"reputation":97907,"user_id":4856258,"accept_rate":100,"display_name":"Tagir Valeev"},"score":0,"creation_date":1450194256,"post_id":34293254,"comment_id":56328296,"body_markdown":"Note that your solution solves the different problem. At least what about multiplying the average by 2?","body":"Note that your solution solves the different problem. At least what about multiplying the average by 2?"}],"tags":[],"owner":{"account_id":6128151,"reputation":153,"user_id":4779332,"accept_rate":71,"display_name":"Mohamed Aziz Bessrour"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1450193807,"creation_date":1450193807,"answer_id":34293254,"question_id":34279645,"body_markdown":"I finally found the solution.. Thanks for trying guys\r\n\r\n    String s = employees.stream().mapToDouble(a&gt;a.getSalary()).summaryStatistics().toString();\r\n\r\nand this is the output:\r\n\r\n     DoubleSummaryStatistics{count=21, sum=17200,000000, min=100,000000,\r\n     average=819,047619, max=2100,000000}","title":"Return in one string the min, max, average, sum, count of salaries with Stream and java8","body":"<p>I finally found the solution.. Thanks for trying guys</p>\n\n<pre><code>String s = employees.stream().mapToDouble(a&gt;a.getSalary()).summaryStatistics().toString();\n</code></pre>\n\n<p>and this is the output:</p>\n\n<pre><code> DoubleSummaryStatistics{count=21, sum=17200,000000, min=100,000000,\n average=819,047619, max=2100,000000}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22100088,"reputation":31,"user_id":16356696,"display_name":"Jay Patel"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692844524,"creation_date":1692844524,"answer_id":76965925,"question_id":34279645,"body_markdown":"We can use the below solution if we want to find only the sum of all salaries.\r\n\r\n    Integer a= emp.stream().collect(Collectors.summingInt(Employe::getSalary));","title":"Return in one string the min, max, average, sum, count of salaries with Stream and java8","body":"<p>We can use the below solution if we want to find only the sum of all salaries.</p>\n<pre><code>Integer a= emp.stream().collect(Collectors.summingInt(Employe::getSalary));\n</code></pre>\n"}],"owner":{"account_id":6128151,"reputation":153,"user_id":4779332,"accept_rate":71,"display_name":"Mohamed Aziz Bessrour"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5948,"favorite_count":0,"down_vote_count":3,"up_vote_count":2,"accepted_answer_id":34281140,"answer_count":3,"score":-1,"last_activity_date":1692844524,"creation_date":1450143385,"question_id":34279645,"body_markdown":"I have a `List` of employees which are characterized by a salary. \r\nWhy this code does not work?\r\n\r\n    String joined = employees.stream().collect(\r\n        Collectors.summingInt(Employee::getSalary),\r\n        Collectors.maxBy(Comparator.comparing(Employee::getSalary)),\r\n        Collectors.minBy(Comparator.comparing(Employee::getSalary)),\r\n        Collectors.averagingLong((Employee e) -&gt;e.getSalary() * 2),\r\n        Collectors.counting(),\r\n        Collectors.joining(&quot;, &quot;));\r\n\r\nI&#39;m using a suite of collectors.\r\n","title":"Return in one string the min, max, average, sum, count of salaries with Stream and java8","body":"<p>I have a <code>List</code> of employees which are characterized by a salary. \nWhy this code does not work?</p>\n\n<pre><code>String joined = employees.stream().collect(\n    Collectors.summingInt(Employee::getSalary),\n    Collectors.maxBy(Comparator.comparing(Employee::getSalary)),\n    Collectors.minBy(Comparator.comparing(Employee::getSalary)),\n    Collectors.averagingLong((Employee e) -&gt;e.getSalary() * 2),\n    Collectors.counting(),\n    Collectors.joining(\", \"));\n</code></pre>\n\n<p>I'm using a suite of collectors.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":3,"creation_date":1692840712,"post_id":76965739,"comment_id":135679976,"body_markdown":"A `java.lang.Class` represents the _class_ itself, not an _instance_ of the class. And it&#39;s a final class that inherits directly from `Object`, so it cannot ever be a `BaseHandler`.","body":"A <code>java.lang.Class</code> represents the <i>class</i> itself, not an <i>instance</i> of the class. And it&#39;s a final class that inherits directly from <code>Object</code>, so it cannot ever be a <code>BaseHandler</code>."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1692840773,"post_id":76965739,"comment_id":135679979,"body_markdown":"No, basically a `Class` is a thing by itself.  `BaseHandler` probably inherits from `Object` or some other `Handler` class.  It does not inherit from `Class`.","body":"No, basically a <code>Class</code> is a thing by itself.  <code>BaseHandler</code> probably inherits from <code>Object</code> or some other <code>Handler</code> class.  It does not inherit from <code>Class</code>."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":2,"creation_date":1692841415,"post_id":76965739,"comment_id":135680028,"body_markdown":"Another way of saying this is that an object *has-a* class -- you can call `getClass` on any object.  But an object isn&#39;t *is-a* class.  That&#39;s not the relationship an object has to its class.","body":"Another way of saying this is that an object <i>has-a</i> class -- you can call <code>getClass</code> on any object.  But an object isn&#39;t <i>is-a</i> class.  That&#39;s not the relationship an object has to its class."}],"answers":[{"tags":[],"owner":{"account_id":953149,"reputation":177303,"user_id":978917,"accept_rate":86,"display_name":"ruakh"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1692840891,"creation_date":1692840891,"answer_id":76965756,"question_id":76965739,"body_markdown":"That code doesn&#39;t work for the same reason that\r\n\r\n```\r\nClass&lt;Integer&gt; clazz = Integer.class;\r\nInteger i = clazz;\r\n```\r\n\r\ndoesn&#39;t work, namely, that a `Class` is not an instance of the class it represents.","title":"What makes Java compiler think a parent class cannot stand for its child class","body":"<p>That code doesn't work for the same reason that</p>\n<pre><code>Class&lt;Integer&gt; clazz = Integer.class;\nInteger i = clazz;\n</code></pre>\n<p>doesn't work, namely, that a <code>Class</code> is not an instance of the class it represents.</p>\n"}],"owner":{"account_id":1424899,"reputation":4365,"user_id":1348691,"accept_rate":67,"display_name":"Tiina"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":76965756,"answer_count":1,"score":-2,"last_activity_date":1692840987,"creation_date":1692840514,"question_id":76965739,"body_markdown":"The following code causes error:\r\n```\r\nClass&lt;? extends BaseHandler&lt;?, ?&gt;&gt; aClass = resource.getHandler();\r\nBaseHandler&lt;?, ?&gt; baseHandler       = resource.getHandler();\r\nBaseHandler&lt;?, ?&gt; baseHandler       = (BaseHandler&lt;?, ?&gt;) resource.getHandler();;\r\n```\r\nThe first line works.\r\nThe second line and the third type forcing conversion has error:\r\n\r\n```\r\nInconvertible types; cannot cast &#39;java.lang.Class&lt;capture&lt;? extends c.c.BaseHandler&lt;?,?&gt;&gt;&gt;&#39; to &#39;c.c.BaseHandler&lt;?,?&gt;&#39;\r\n```\r\nThis is what I think:\r\n`Class&lt;? extend BaseHandler&lt;?, ?&gt;&gt;` should be a child Class type of BaseHandler. then `baseHandler` should stand for all children class. Why it has that compile error?","title":"What makes Java compiler think a parent class cannot stand for its child class","body":"<p>The following code causes error:</p>\n<pre><code>Class&lt;? extends BaseHandler&lt;?, ?&gt;&gt; aClass = resource.getHandler();\nBaseHandler&lt;?, ?&gt; baseHandler       = resource.getHandler();\nBaseHandler&lt;?, ?&gt; baseHandler       = (BaseHandler&lt;?, ?&gt;) resource.getHandler();;\n</code></pre>\n<p>The first line works.\nThe second line and the third type forcing conversion has error:</p>\n<pre><code>Inconvertible types; cannot cast 'java.lang.Class&lt;capture&lt;? extends c.c.BaseHandler&lt;?,?&gt;&gt;&gt;' to 'c.c.BaseHandler&lt;?,?&gt;'\n</code></pre>\n<p>This is what I think:\n<code>Class&lt;? extend BaseHandler&lt;?, ?&gt;&gt;</code> should be a child Class type of BaseHandler. then <code>baseHandler</code> should stand for all children class. Why it has that compile error?</p>\n"},{"tags":["java","spring-boot","circuit-breaker","resilience4j"],"comments":[{"owner":{"account_id":3459421,"reputation":15080,"user_id":2897008,"accept_rate":73,"display_name":"vins"},"score":0,"creation_date":1587140783,"post_id":61276120,"comment_id":108401292,"body_markdown":"Take a look at this - http://www.vinsguru.com/resilient-microservice-design-circuit-breaker-pattern/","body":"Take a look at this - <a href=\"http://www.vinsguru.com/resilient-microservice-design-circuit-breaker-pattern/\" rel=\"nofollow noreferrer\">vinsguru.com/&hellip;</a>"},{"owner":{"account_id":12911571,"reputation":843,"user_id":9337098,"display_name":"Swapnil"},"score":0,"creation_date":1587141815,"post_id":61276120,"comment_id":108401860,"body_markdown":"I checked the sample code over there. It is setting timeout in RestTemplate using RestTemplateBuilder. I am looking for the properties through resilience4j. Is it possible to do that?","body":"I checked the sample code over there. It is setting timeout in RestTemplate using RestTemplateBuilder. I am looking for the properties through resilience4j. Is it possible to do that?"}],"answers":[{"comments":[{"owner":{"account_id":12911571,"reputation":843,"user_id":9337098,"display_name":"Swapnil"},"score":0,"creation_date":1631311069,"post_id":69136558,"comment_id":122196830,"body_markdown":"Looks great. I need to try your suggestions. Any idea whether does this work on Java 11? Right now, I can only work on Java versions up to 11. I may give it a try though.","body":"Looks great. I need to try your suggestions. Any idea whether does this work on Java 11? Right now, I can only work on Java versions up to 11. I may give it a try though."},{"owner":{"account_id":16925760,"reputation":1326,"user_id":12241397,"display_name":"Gr&#233;gori Fernandes de Lima"},"score":0,"creation_date":1631313282,"post_id":69136558,"comment_id":122197216,"body_markdown":"Hi, i&#39;ve just changed my microservice project to Java version 11 and the service continue working as expected, i think that it will be work for you too. Try to make changes above to use TimeLimiter and let i know if it works.","body":"Hi, i&#39;ve just changed my microservice project to Java version 11 and the service continue working as expected, i think that it will be work for you too. Try to make changes above to use TimeLimiter and let i know if it works."},{"owner":{"account_id":12911571,"reputation":843,"user_id":9337098,"display_name":"Swapnil"},"score":0,"creation_date":1631313360,"post_id":69136558,"comment_id":122197231,"body_markdown":"Awesome! Thanks for confirming. I will give it a try.","body":"Awesome! Thanks for confirming. I will give it a try."},{"owner":{"account_id":9148659,"reputation":195,"user_id":6803950,"display_name":"zy_sun"},"score":0,"creation_date":1663173889,"post_id":69136558,"comment_id":130178849,"body_markdown":"I got an error . method only  supposed  &#39;CompletableFuture-return-type&#39;  ?","body":"I got an error . method only  supposed  &#39;CompletableFuture-return-type&#39;  ?"},{"owner":{"account_id":1137891,"reputation":345,"user_id":1122559,"accept_rate":47,"display_name":"Mandar K"},"score":0,"creation_date":1665235154,"post_id":69136558,"comment_id":130654784,"body_markdown":"Thanks a lot. &quot;But, be careful, code not worked using spring-cloud-starter-circuitbreaker-resilience4j dependencie, and i have spent a lot time trying to solve it. The only thing that i needed to change to make @TimeLimiter get works is to change my dependecies.&quot; should be in *Bold*. This was exactly the issue.","body":"Thanks a lot. &quot;But, be careful, code not worked using spring-cloud-starter-circuitbreaker-resilience4j dependencie, and i have spent a lot time trying to solve it. The only thing that i needed to change to make @TimeLimiter get works is to change my dependecies.&quot; should be in <i>Bold</i>. This was exactly the issue."},{"owner":{"account_id":3995956,"reputation":179,"user_id":3293515,"display_name":"JPRLCol"},"score":0,"creation_date":1692732034,"post_id":69136558,"comment_id":135664016,"body_markdown":"I used your code on a sevice layer and the `cancel-running-future` is not cancelling the execution of the. `CompletableFuture`","body":"I used your code on a sevice layer and the <code>cancel-running-future</code> is not cancelling the execution of the. <code>CompletableFuture</code>"}],"tags":[],"owner":{"account_id":16925760,"reputation":1326,"user_id":12241397,"display_name":"Gr&#233;gori Fernandes de Lima"},"comment_count":6,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1631304757,"creation_date":1631298350,"answer_id":69136558,"question_id":61276120,"body_markdown":"I had to deal with the same problem as you.\r\n\r\nFor me, TimeLimiter from resilience4j solve my problem and not need to use Hystrix anymore.\r\n\r\nThis is my application.properties:\r\n\r\n    resilience4j.timelimiter.configs.default.timeout-duration=3s\r\n    resilience4j.timelimiter.instances.paymentCalc.base-config=default\r\n    # The max amount of time a call can last\r\n    resilience4j.timelimiter.instances.paymentCalc.timeout-duration=1s\r\n    # Cancel the Running Completable Futures After TimeOut.\r\n    resilience4j.timelimiter.instances.paymentCalc.cancel-running-future=true\r\n    \r\n    # Max amount of parallel executions allowed by the bulkhead\r\n    resilience4j.bulkhead.configs.default.max-concurrent-calls=2\r\n    # Max amount of time a thread should be blocked for when attempting to enter a saturated bulkhead.\r\n    resilience4j.bulkhead.configs.default.max-wait-duration=0\r\n    resilience4j.bulkhead.instances.paymentCalc.base-config=default\r\n\r\n\r\n\r\nThis is my implementation:\r\n\r\n        \r\n        // Bulkhead module is added because TimeLimiter needs separate execution thread instead of request thread\r\n        @Bulkhead(name = &quot;paymentCalc&quot;, fallbackMethod = &quot;localPaymentGenerate&quot;, type = Bulkhead.Type.THREADPOOL)\r\n    \t@TimeLimiter(name = &quot;paymentCalc&quot;, fallbackMethod = &quot;localPaymentGenerate&quot;)\r\n    \t@GetMapping(value = &quot;/{workerId}/days/{days}&quot;)\r\n    \tpublic CompletableFuture&lt;ResponseEntity&lt;Payment&gt;&gt; getPayment(@PathVariable Long workerId, @PathVariable Integer days){\r\n    \t\t\t\r\n    \t\t...\t\t\r\n    \t}\r\n    \t\r\n    \t\r\n    \tpublic CompletableFuture&lt;ResponseEntity&lt;Payment&gt;&gt; localPaymentGenerate(Long workerId, Integer days, Exception e){\r\n\t\t\t\r\n\t\t\tSystem.out.println(e.getMessage()); // prints &quot;TimeLimiter &#39;paymentCalc&#39; recorded a timeout exception&quot;\r\n\t\t\r\n\t\t\t...\r\n\t}\r\n\r\n\r\nBut, be careful, code not worked using `spring-cloud-starter-circuitbreaker-resilience4j` dependencie, and i have spent a lot time trying to solve it.\r\nThe only thing that i needed to change to make @TimeLimiter get works is to change my dependecies.\r\n\r\nI&#39;m using spring-boot `&lt;version&gt;2.5.4&lt;/version&gt;`, `&lt;java.version&gt;16&lt;/java.version&gt;` and my dependencies are:\r\n\r\n   \r\n\r\n     &lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;io.github.resilience4j&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;resilience4j-spring-boot2&lt;/artifactId&gt;\r\n    \t&lt;/dependency&gt;\r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n    \t&lt;/dependency&gt;\r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;\r\n    \t&lt;/dependency&gt;","title":"Resilience4j - Request timeout","body":"<p>I had to deal with the same problem as you.</p>\n<p>For me, TimeLimiter from resilience4j solve my problem and not need to use Hystrix anymore.</p>\n<p>This is my application.properties:</p>\n<pre><code>resilience4j.timelimiter.configs.default.timeout-duration=3s\nresilience4j.timelimiter.instances.paymentCalc.base-config=default\n# The max amount of time a call can last\nresilience4j.timelimiter.instances.paymentCalc.timeout-duration=1s\n# Cancel the Running Completable Futures After TimeOut.\nresilience4j.timelimiter.instances.paymentCalc.cancel-running-future=true\n\n# Max amount of parallel executions allowed by the bulkhead\nresilience4j.bulkhead.configs.default.max-concurrent-calls=2\n# Max amount of time a thread should be blocked for when attempting to enter a saturated bulkhead.\nresilience4j.bulkhead.configs.default.max-wait-duration=0\nresilience4j.bulkhead.instances.paymentCalc.base-config=default\n</code></pre>\n<p>This is my implementation:</p>\n<pre><code>    // Bulkhead module is added because TimeLimiter needs separate execution thread instead of request thread\n    @Bulkhead(name = &quot;paymentCalc&quot;, fallbackMethod = &quot;localPaymentGenerate&quot;, type = Bulkhead.Type.THREADPOOL)\n    @TimeLimiter(name = &quot;paymentCalc&quot;, fallbackMethod = &quot;localPaymentGenerate&quot;)\n    @GetMapping(value = &quot;/{workerId}/days/{days}&quot;)\n    public CompletableFuture&lt;ResponseEntity&lt;Payment&gt;&gt; getPayment(@PathVariable Long workerId, @PathVariable Integer days){\n            \n        ...     \n    }\n    \n    \n    public CompletableFuture&lt;ResponseEntity&lt;Payment&gt;&gt; localPaymentGenerate(Long workerId, Integer days, Exception e){\n        \n        System.out.println(e.getMessage()); // prints &quot;TimeLimiter 'paymentCalc' recorded a timeout exception&quot;\n    \n        ...\n}\n</code></pre>\n<p>But, be careful, code not worked using <code>spring-cloud-starter-circuitbreaker-resilience4j</code> dependencie, and i have spent a lot time trying to solve it.\nThe only thing that i needed to change to make @TimeLimiter get works is to change my dependecies.</p>\n<p>I'm using spring-boot <code>&lt;version&gt;2.5.4&lt;/version&gt;</code>, <code>&lt;java.version&gt;16&lt;/java.version&gt;</code> and my dependencies are:</p>\n<pre><code> &lt;dependency&gt;\n        &lt;groupId&gt;io.github.resilience4j&lt;/groupId&gt;\n        &lt;artifactId&gt;resilience4j-spring-boot2&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":12911571,"reputation":843,"user_id":9337098,"display_name":"Swapnil"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9768,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":1,"score":8,"last_activity_date":1692839694,"creation_date":1587140333,"question_id":61276120,"body_markdown":"I have a service which is using Hystrix *circuit breaker* pattern and it calls 3rd party service. With the help of \r\n\r\n```java  \r\n@HystrixProperty(name = &quot;execution.isolation.thread.timeoutInMilliseconds&quot;, value = &quot;1000&quot;)\r\n```\r\nI have defined the timeout for the 3rd party service. \r\n\r\nSince the Hystrix is in maintenance mode, I am migrating from Hystrix to Resilience4j circuit breaker pattern. How can I achieve similar timeout handling in resiience4j. \r\n\r\nI got to know that similar thing can be achieved by using `@TimeLimiter` annotation which is a part of *resilience4j-timeLimiter* library. But as per [this issue][1], I have to modify the return type of my method to ```CompletableFuture```. It will involve lot of code changes to my existing service.\r\n\r\nHow can I achieve this with Resilience4j?\r\n\r\n  [1]: https://github.com/resilience4j/resilience4j/issues/849","title":"Resilience4j - Request timeout","body":"<p>I have a service which is using Hystrix <em>circuit breaker</em> pattern and it calls 3rd party service. With the help of</p>\n<pre class=\"lang-java prettyprint-override\"><code>@HystrixProperty(name = &quot;execution.isolation.thread.timeoutInMilliseconds&quot;, value = &quot;1000&quot;)\n</code></pre>\n<p>I have defined the timeout for the 3rd party service.</p>\n<p>Since the Hystrix is in maintenance mode, I am migrating from Hystrix to Resilience4j circuit breaker pattern. How can I achieve similar timeout handling in resiience4j.</p>\n<p>I got to know that similar thing can be achieved by using <code>@TimeLimiter</code> annotation which is a part of <em>resilience4j-timeLimiter</em> library. But as per <a href=\"https://github.com/resilience4j/resilience4j/issues/849\" rel=\"nofollow noreferrer\">this issue</a>, I have to modify the return type of my method to <code>CompletableFuture</code>. It will involve lot of code changes to my existing service.</p>\n<p>How can I achieve this with Resilience4j?</p>\n"},{"tags":["java","redis","jedis","nosql"],"comments":[{"owner":{"account_id":464475,"reputation":756,"user_id":868010,"accept_rate":67,"display_name":"Josh Liptzin"},"score":0,"creation_date":1399348586,"post_id":23233673,"comment_id":36012377,"body_markdown":"I am experiencing a similar issue. Trying to fix it as well, will report back with anything that works.","body":"I am experiencing a similar issue. Trying to fix it as well, will report back with anything that works."},{"owner":{"account_id":1812638,"reputation":371,"user_id":1648383,"accept_rate":100,"display_name":"Albin"},"score":0,"creation_date":1511210946,"post_id":23233673,"comment_id":81755157,"body_markdown":"is it solved ? i am facing similar issue","body":"is it solved ? i am facing similar issue"},{"owner":{"account_id":12315074,"reputation":69,"user_id":8985627,"display_name":"RakChun Jang"},"score":0,"creation_date":1511406349,"post_id":23233673,"comment_id":81849067,"body_markdown":"is this only place which using JedisWrapper?","body":"is this only place which using JedisWrapper?"}],"answers":[{"tags":[],"owner":{"account_id":4097278,"reputation":3,"user_id":3363679,"display_name":"Remya"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1401693956,"creation_date":1401693956,"answer_id":23989280,"question_id":23233673,"body_markdown":"In your JedisWrapper, the Jedis is created as a class variable which gets instantiated once. Please declare it inside the methods getJedis, then the problem will be solved","title":"Jedis : Could not get a resource from the pool","body":"<p>In your JedisWrapper, the Jedis is created as a class variable which gets instantiated once. Please declare it inside the methods getJedis, then the problem will be solved</p>\n"},{"tags":[],"owner":{"account_id":6745077,"reputation":294,"user_id":5196928,"accept_rate":71,"display_name":"samith kumarasingha"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1466423776,"creation_date":1466423776,"answer_id":37921956,"question_id":23233673,"body_markdown":"check whether you have permission to access redis through code","title":"Jedis : Could not get a resource from the pool","body":"<p>check whether you have permission to access redis through code</p>\n"}],"owner":{"account_id":423278,"reputation":19940,"user_id":802585,"accept_rate":53,"display_name":"WoooHaaaa"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14526,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":2,"score":5,"last_activity_date":1692839200,"creation_date":1398219591,"question_id":23233673,"body_markdown":"## Background\r\nOur application uses `Jedis-2.2.1` and connects to `Redis-2.6`, here&#39;s how I get jedis resource : \r\n\r\n\r\n    protected static JedisWrapper getRedisUserWrite(String UDID) {\r\n            if (redisUserWritePools.get(0) == null) init();\r\n    \r\n            int hash = hash(UDID);\r\n            Jedis jedis = redisUserWritePools.get(hash).getResource();\r\n            jedis.select(dbs.get(&quot;redisUserWritePools&quot; + hash));\r\n    \r\n            return new JedisWrapper(jedis, redisUserWritePools.get(hash));\r\n        }\r\n\r\nAnd this is my `JedisWrapper`(Unify the management of resources):\r\n\r\n    public class JedisWrapper {\r\n        private Jedis jedis;\r\n        private JedisPool pool;\r\n        \r\n        public JedisWrapper(Jedis jedis, JedisPool pool) {\r\n            this.jedis = jedis;\r\n            this.pool = pool;\r\n        }\r\n    \r\n        public Jedis get(){\r\n            return this.jedis;\r\n        }\r\n        \r\n        public void returnResource() {\r\n            if(null != this.jedis){\r\n                this.pool.returnResource(this.jedis);\r\n            }\r\n        }\r\n        \r\n        public void returnBrokenResource() {\r\n            if(null != this.jedis) {\r\n                this.pool.returnBrokenResource(this.jedis);\r\n            }\r\n            this.jedis = null;\r\n        }\r\n    }\r\n\r\n\r\n`JedisWrapper` is the container if Jedis instance, here&#39;s how I use it :\r\n\r\n    private static void cacheSDKIDs(String UDID, String[] SDKIDs) {\r\n    \r\n            JedisWrapper wrapper = getRedisUserWrite(UDID);\r\n            try {\r\n                if (SDKIDs != null) {\r\n                    wrapper.get().del(UDID);\r\n                    wrapper.get().sadd(UDID, SDKIDs);\r\n                }\r\n            } catch (JedisConnectionException e) {\r\n                e.printStackTrace();\r\n                wrapper.returnBrokenResource();\r\n            }catch (Exception e) {\r\n                e.printStackTrace();\r\n            } finally {\r\n                wrapper.returnResource();\r\n            }\r\n        }\r\n\r\nNote that, `SKDIDs` maybe very large(e.g. could reach the maximum of 8KB).\r\n\r\n\r\n## Here&#39;s the problem\r\nEvery time I restart our application, all redis connections are normal, but several hours\r\n later, the `Could not get a resource from the pool` Exception comes out. And frequency become higher and higher, then all the connections to Redis are disconnected and can create new connection.\r\n\r\nHere&#39;s my configuration : \r\n\r\n    &lt;bean id = &quot;redisConfig&quot; class=&quot;redis.clients.jedis.JedisPoolConfig&quot;&gt;\r\n      \t&lt;property name=&quot;maxActive&quot;  value=&quot;400&quot; /&gt;\r\n        &lt;property name=&quot;maxIdle&quot; value=&quot;100&quot; /&gt;\r\n        &lt;property name=&quot;minIdle&quot; value=&quot;20&quot; /&gt;\r\n        &lt;property name=&quot;maxWait&quot; value=&quot;4000&quot; /&gt;\r\n        &lt;property name=&quot;testOnBorrow&quot;  value=&quot;true&quot;/&gt;\r\n        &lt;property name=&quot;testOnReturn&quot; value=&quot;true&quot; /&gt;\r\n      &lt;/bean&gt;\r\n\r\n\r\nException Stacktrace:\r\n\r\n    Caused by: redis.clients.jedis.exceptions.JedisConnectionException: Could not get a resource from the pool\r\n    \tat redis.clients.util.Pool.getResource(Pool.java:40)\r\n    \tat com.xxxice.redis.BaseRedis.getRedisUserWrite(BaseRedis.java:158)\r\n    \tat com.xxx.service.redis.DeviceRedis.cacheSDKIds(DeviceRedis.java:128)\r\n    \tat com.xxx.redis.DeviceRedis.cacheDevice(DeviceRedis.java:65)\r\n    \tat com.xxx.service.DeviceService.update(DeviceService.java:88)\r\n    \tat com.xxx.controller.Devices.update(Devices.java:25)\r\n    \t... 32 more\r\n    Caused by: java.util.NoSuchElementException: Timeout waiting for idle object\r\n    \tat org.apache.commons.pool.impl.GenericObjectPool.borrowObject(GenericObjectPool.java:1174)\r\n    \tat redis.clients.util.Pool.getResource(Pool.java:38)\r\n    \t... 37 more","title":"Jedis : Could not get a resource from the pool","body":"<h2>Background</h2>\n\n<p>Our application uses <code>Jedis-2.2.1</code> and connects to <code>Redis-2.6</code>, here's how I get jedis resource : </p>\n\n<pre><code>protected static JedisWrapper getRedisUserWrite(String UDID) {\n        if (redisUserWritePools.get(0) == null) init();\n\n        int hash = hash(UDID);\n        Jedis jedis = redisUserWritePools.get(hash).getResource();\n        jedis.select(dbs.get(\"redisUserWritePools\" + hash));\n\n        return new JedisWrapper(jedis, redisUserWritePools.get(hash));\n    }\n</code></pre>\n\n<p>And this is my <code>JedisWrapper</code>(Unify the management of resources):</p>\n\n<pre><code>public class JedisWrapper {\n    private Jedis jedis;\n    private JedisPool pool;\n\n    public JedisWrapper(Jedis jedis, JedisPool pool) {\n        this.jedis = jedis;\n        this.pool = pool;\n    }\n\n    public Jedis get(){\n        return this.jedis;\n    }\n\n    public void returnResource() {\n        if(null != this.jedis){\n            this.pool.returnResource(this.jedis);\n        }\n    }\n\n    public void returnBrokenResource() {\n        if(null != this.jedis) {\n            this.pool.returnBrokenResource(this.jedis);\n        }\n        this.jedis = null;\n    }\n}\n</code></pre>\n\n<p><code>JedisWrapper</code> is the container if Jedis instance, here's how I use it :</p>\n\n<pre><code>private static void cacheSDKIDs(String UDID, String[] SDKIDs) {\n\n        JedisWrapper wrapper = getRedisUserWrite(UDID);\n        try {\n            if (SDKIDs != null) {\n                wrapper.get().del(UDID);\n                wrapper.get().sadd(UDID, SDKIDs);\n            }\n        } catch (JedisConnectionException e) {\n            e.printStackTrace();\n            wrapper.returnBrokenResource();\n        }catch (Exception e) {\n            e.printStackTrace();\n        } finally {\n            wrapper.returnResource();\n        }\n    }\n</code></pre>\n\n<p>Note that, <code>SKDIDs</code> maybe very large(e.g. could reach the maximum of 8KB).</p>\n\n<h2>Here's the problem</h2>\n\n<p>Every time I restart our application, all redis connections are normal, but several hours\n later, the <code>Could not get a resource from the pool</code> Exception comes out. And frequency become higher and higher, then all the connections to Redis are disconnected and can create new connection.</p>\n\n<p>Here's my configuration : </p>\n\n<pre><code>&lt;bean id = \"redisConfig\" class=\"redis.clients.jedis.JedisPoolConfig\"&gt;\n    &lt;property name=\"maxActive\"  value=\"400\" /&gt;\n    &lt;property name=\"maxIdle\" value=\"100\" /&gt;\n    &lt;property name=\"minIdle\" value=\"20\" /&gt;\n    &lt;property name=\"maxWait\" value=\"4000\" /&gt;\n    &lt;property name=\"testOnBorrow\"  value=\"true\"/&gt;\n    &lt;property name=\"testOnReturn\" value=\"true\" /&gt;\n  &lt;/bean&gt;\n</code></pre>\n\n<p>Exception Stacktrace:</p>\n\n<pre><code>Caused by: redis.clients.jedis.exceptions.JedisConnectionException: Could not get a resource from the pool\n    at redis.clients.util.Pool.getResource(Pool.java:40)\n    at com.xxxice.redis.BaseRedis.getRedisUserWrite(BaseRedis.java:158)\n    at com.xxx.service.redis.DeviceRedis.cacheSDKIds(DeviceRedis.java:128)\n    at com.xxx.redis.DeviceRedis.cacheDevice(DeviceRedis.java:65)\n    at com.xxx.service.DeviceService.update(DeviceService.java:88)\n    at com.xxx.controller.Devices.update(Devices.java:25)\n    ... 32 more\nCaused by: java.util.NoSuchElementException: Timeout waiting for idle object\n    at org.apache.commons.pool.impl.GenericObjectPool.borrowObject(GenericObjectPool.java:1174)\n    at redis.clients.util.Pool.getResource(Pool.java:38)\n    ... 37 more\n</code></pre>\n"},{"tags":["java","maven","jax-rs","java-ee-8","payara-micro"],"answers":[{"tags":[],"owner":{"account_id":1475244,"reputation":107,"user_id":1385791,"display_name":"adoughdough"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692838458,"creation_date":1692838458,"answer_id":76965663,"question_id":76917223,"body_markdown":"I meandered my way around this same problem as below. You may want to try it too:\r\n\r\n1. Use jdk-1.8, confirm this by running the command ``java -version`` on command prompt.\r\n2. If the command returns a different version, then:\r\n**2.1.** download and install jdk-1.8.\r\n**2.2.** go to the bin folder created as a result of the installation.\r\n**2.3.** copy at least (and perhaps, javac, javaw) the file &quot;java.exe&quot; and paste it in the folder (let&#39;s call it &quot;folderA&quot;) where java looks for executables.\r\n**2.4.** on my windows machine, the &quot;folderA&quot; is in &quot;C:\\Program Files\\Common Files\\Oracle\\Java\\javapath&quot;.\r\n**2.5** run the command in #2 above again, ensure Jdk-1.8.xxx is returned.   \r\n3. Download Payara Microedition 5.181 (not version 6.0) from here: \r\n          https://jar-download.com/artifacts/fish.payara.extras/payara-micro/5.181/source-code\r\n4. In your POM file, add the following dependencies:\r\n\r\n&gt; dependencies\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\r\n    \t&lt;version&gt;3.0.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.glassfish.jaxb&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;jaxb-runtime&lt;/artifactId&gt;\r\n    \t&lt;version&gt;2.3.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n            &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\r\n            &lt;version&gt;3.0.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n5. Attempt to deploy your app on payara again, it should work. There&#39;s probably a better solution out there though.\r\n","title":"Java EE: Payara micro server not generating REST endpoints (404 error)","body":"<p>I meandered my way around this same problem as below. You may want to try it too:</p>\n<ol>\n<li>Use jdk-1.8, confirm this by running the command <code>java -version</code> on command prompt.</li>\n<li>If the command returns a different version, then:\n<strong>2.1.</strong> download and install jdk-1.8.\n<strong>2.2.</strong> go to the bin folder created as a result of the installation.\n<strong>2.3.</strong> copy at least (and perhaps, javac, javaw) the file &quot;java.exe&quot; and paste it in the folder (let's call it &quot;folderA&quot;) where java looks for executables.\n<strong>2.4.</strong> on my windows machine, the &quot;folderA&quot; is in &quot;C:\\Program Files\\Common Files\\Oracle\\Java\\javapath&quot;.\n<strong>2.5</strong> run the command in #2 above again, ensure Jdk-1.8.xxx is returned.</li>\n<li>Download Payara Microedition 5.181 (not version 6.0) from here:\n<a href=\"https://jar-download.com/artifacts/fish.payara.extras/payara-micro/5.181/source-code\" rel=\"nofollow noreferrer\">https://jar-download.com/artifacts/fish.payara.extras/payara-micro/5.181/source-code</a></li>\n<li>In your POM file, add the following dependencies:</li>\n</ol>\n<blockquote>\n<p>dependencies</p>\n</blockquote>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\n    &lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\n    &lt;version&gt;3.0.0&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.glassfish.jaxb&lt;/groupId&gt;\n    &lt;artifactId&gt;jaxb-runtime&lt;/artifactId&gt;\n    &lt;version&gt;2.3.2&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n        &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\n        &lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\n        &lt;version&gt;3.0.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<ol start=\"5\">\n<li>Attempt to deploy your app on payara again, it should work. There's probably a better solution out there though.</li>\n</ol>\n"}],"owner":{"account_id":4157818,"reputation":1427,"user_id":4233030,"accept_rate":62,"display_name":"Python_user"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":103,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1692838458,"creation_date":1692221831,"question_id":76917223,"body_markdown":"I am new to Java EE development. I downloaded Payara micro-server 6.2023.8 and generated a simple Java EE application through the maven archetype `com.airhacks:javaee8-essentials-archetype:0.0.4` (https://github.com/AdamBien/javaee8-essentials-archetype). \r\n\r\nHowever, when I deploy the `war` file (generated through `mvn clean package`) on the server through the command: \r\n\r\n    java -jar &#39;G:\\Workspace\\payara-micro-6.2023.8.jar&#39; --deploy .\\target\\javaee-demo.war --port 8080\r\n\r\n, the REST endpoint (`http://localhost:8080/javaee-demo/resources/ping`) is not exposed and generates a `404` error when accessed via a browser. The only URL present in the logged output against &#39;`Payara Micro URLs`&#39; is `http://localhost:8080/javaee-demo`.\r\n\r\nHere&#39;s my resource (generated automatically from the archetype used):\r\n\r\n    @Path(&quot;ping&quot;)\r\n    public class PingResource {\r\n    \r\n        @Inject\r\n        @ConfigProperty(name = &quot;message&quot;)\r\n        String message;\r\n    \r\n        @GET\r\n        public String ping() {\r\n            return this.message + &quot; Jakarta EE with MicroProfile 2+!&quot;;\r\n        }\r\n    }\r\n\r\nHere&#39;s my JAX-RS configuration file:\r\n\r\n    @ApplicationPath(&quot;resources&quot;)\r\n    public class JAXRSConfiguration extends Application {\r\n    \r\n    }\r\n\r\nAnd, here&#39;s the (partial) output of running the above command:\r\n\r\n    &quot;Deployed&quot;: [\r\n        {\r\n            &quot;Name&quot;: &quot;javaee-demo&quot;,\r\n            &quot;Type&quot;: &quot;war&quot;,\r\n            &quot;Context Root&quot;: &quot;/javaee-demo&quot;\r\n        }\r\n    ]\r\n\r\n`pom.xml` file for reference:\r\n\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n        &lt;groupId&gt;in.mydemoprojects&lt;/groupId&gt;\r\n        &lt;artifactId&gt;javaee-demo&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n        &lt;packaging&gt;war&lt;/packaging&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;javax&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javaee-api&lt;/artifactId&gt;\r\n                &lt;version&gt;8.0&lt;/version&gt;\r\n                &lt;scope&gt;provided&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.eclipse.microprofile&lt;/groupId&gt;\r\n                &lt;artifactId&gt;microprofile&lt;/artifactId&gt;\r\n                &lt;version&gt;2.0.1&lt;/version&gt;\r\n                &lt;type&gt;pom&lt;/type&gt;\r\n                &lt;scope&gt;provided&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n        &lt;build&gt;\r\n            &lt;finalName&gt;javaee-demo&lt;/finalName&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.3.1&lt;/version&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.8.1&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;source&gt;1.8&lt;/source&gt;\r\n                        &lt;target&gt;1.8&lt;/target&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n        &lt;properties&gt;\r\n            &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n            &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n            &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\r\n        &lt;/properties&gt;\r\n    &lt;/project&gt;\r\n\r\nI looked into the other stackoverflow questions about this, but to no avail. Can someone please help me debug?","title":"Java EE: Payara micro server not generating REST endpoints (404 error)","body":"<p>I am new to Java EE development. I downloaded Payara micro-server 6.2023.8 and generated a simple Java EE application through the maven archetype <code>com.airhacks:javaee8-essentials-archetype:0.0.4</code> (<a href=\"https://github.com/AdamBien/javaee8-essentials-archetype\" rel=\"nofollow noreferrer\">https://github.com/AdamBien/javaee8-essentials-archetype</a>).</p>\n<p>However, when I deploy the <code>war</code> file (generated through <code>mvn clean package</code>) on the server through the command:</p>\n<pre><code>java -jar 'G:\\Workspace\\payara-micro-6.2023.8.jar' --deploy .\\target\\javaee-demo.war --port 8080\n</code></pre>\n<p>, the REST endpoint (<code>http://localhost:8080/javaee-demo/resources/ping</code>) is not exposed and generates a <code>404</code> error when accessed via a browser. The only URL present in the logged output against '<code>Payara Micro URLs</code>' is <code>http://localhost:8080/javaee-demo</code>.</p>\n<p>Here's my resource (generated automatically from the archetype used):</p>\n<pre><code>@Path(&quot;ping&quot;)\npublic class PingResource {\n\n    @Inject\n    @ConfigProperty(name = &quot;message&quot;)\n    String message;\n\n    @GET\n    public String ping() {\n        return this.message + &quot; Jakarta EE with MicroProfile 2+!&quot;;\n    }\n}\n</code></pre>\n<p>Here's my JAX-RS configuration file:</p>\n<pre><code>@ApplicationPath(&quot;resources&quot;)\npublic class JAXRSConfiguration extends Application {\n\n}\n</code></pre>\n<p>And, here's the (partial) output of running the above command:</p>\n<pre><code>&quot;Deployed&quot;: [\n    {\n        &quot;Name&quot;: &quot;javaee-demo&quot;,\n        &quot;Type&quot;: &quot;war&quot;,\n        &quot;Context Root&quot;: &quot;/javaee-demo&quot;\n    }\n]\n</code></pre>\n<p><code>pom.xml</code> file for reference:</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;in.mydemoprojects&lt;/groupId&gt;\n    &lt;artifactId&gt;javaee-demo&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax&lt;/groupId&gt;\n            &lt;artifactId&gt;javaee-api&lt;/artifactId&gt;\n            &lt;version&gt;8.0&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.eclipse.microprofile&lt;/groupId&gt;\n            &lt;artifactId&gt;microprofile&lt;/artifactId&gt;\n            &lt;version&gt;2.0.1&lt;/version&gt;\n            &lt;type&gt;pom&lt;/type&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;build&gt;\n        &lt;finalName&gt;javaee-demo&lt;/finalName&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.3.1&lt;/version&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.8.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;1.8&lt;/source&gt;\n                    &lt;target&gt;1.8&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n        &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\n    &lt;/properties&gt;\n&lt;/project&gt;\n</code></pre>\n<p>I looked into the other stackoverflow questions about this, but to no avail. Can someone please help me debug?</p>\n"},{"tags":["java","wordpress","javadoc"],"answers":[{"tags":[],"owner":{"account_id":2973802,"reputation":48688,"user_id":2525313,"accept_rate":88,"display_name":"Nicolai Parlog"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1407928887,"creation_date":1407928887,"answer_id":25284811,"question_id":22397028,"body_markdown":"The following worked for me:\r\n\r\nWithin my WordPress folder I created a folder _javadoc_ - right next to _wp-admin_ and the like - and dumped all the created JavaDoc-html in there. Going to _http://my-blog/javadoc_ nicely displays the docs.\r\n\r\nI&#39;m a novice in this area, so this might be inadvisable from a best practice or security point of view. I&#39;m actually very interested in an opinion on that!","title":"How to Add a Javadoc Directory to a Wordpress Site","body":"<p>The following worked for me:</p>\n\n<p>Within my WordPress folder I created a folder <em>javadoc</em> - right next to <em>wp-admin</em> and the like - and dumped all the created JavaDoc-html in there. Going to <em>http://my-blog/javadoc</em> nicely displays the docs.</p>\n\n<p>I'm a novice in this area, so this might be inadvisable from a best practice or security point of view. I'm actually very interested in an opinion on that!</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1692961518,"post_id":76961057,"comment_id":135699289,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76961057/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":8864010,"reputation":23,"user_id":6619667,"display_name":"Eugenio Liguori"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692836157,"creation_date":1692791242,"answer_id":76961057,"question_id":22397028,"body_markdown":"In my opinion you could create a directory in the WordPress root giving read-only permissions and place the files generated by javadoc there and then point a link to it, this is definitely the easiest way. The javadoc files are plain html, in my opinion there is not much to do in terms of security, there are no cookies, database access, but only a javascript to find in the pages. Another aspect is the SEO plugins that with this method will not insert the javadoc pages in the sitemap.xml and will have to be inserted manually.\r\n\r\nYou could insert an iframe in a post so that the javadoc is integrated into the page, but the problem with SEO plugins remains.","title":"How to Add a Javadoc Directory to a Wordpress Site","body":"<p>In my opinion you could create a directory in the WordPress root giving read-only permissions and place the files generated by javadoc there and then point a link to it, this is definitely the easiest way. The javadoc files are plain html, in my opinion there is not much to do in terms of security, there are no cookies, database access, but only a javascript to find in the pages. Another aspect is the SEO plugins that with this method will not insert the javadoc pages in the sitemap.xml and will have to be inserted manually.</p>\n<p>You could insert an iframe in a post so that the javadoc is integrated into the page, but the problem with SEO plugins remains.</p>\n"}],"owner":{"account_id":2295340,"reputation":305,"user_id":2016911,"accept_rate":20,"display_name":"Forelight"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":497,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1692836157,"creation_date":1394775571,"question_id":22397028,"body_markdown":"I am hosting a Wordpress site and would like to use it to publish an open source project. I&#39;d like one of the main menu items to link to the javadoc for the project.  For those, unfamiliar with Java, javadoc is a programmatically generated directory hierarchy with many (too many to convert manually) HTML files. The root level contains the index.html file that you start with and all the references are relative to that directory. How can I hook in this structure to the WP site?  Converting each page by hand to a WP page is not an acceptable solution because there are too many of them and they change regularly.","title":"How to Add a Javadoc Directory to a Wordpress Site","body":"<p>I am hosting a Wordpress site and would like to use it to publish an open source project. I'd like one of the main menu items to link to the javadoc for the project.  For those, unfamiliar with Java, javadoc is a programmatically generated directory hierarchy with many (too many to convert manually) HTML files. The root level contains the index.html file that you start with and all the references are relative to that directory. How can I hook in this structure to the WP site?  Converting each page by hand to a WP page is not an acceptable solution because there are too many of them and they change regularly.</p>\n"},{"tags":["java","json","angular","spring-boot","date"],"comments":[{"owner":{"account_id":7507798,"reputation":883,"user_id":5703813,"accept_rate":62,"display_name":"Muhammad Usman"},"score":1,"creation_date":1565080111,"post_id":57371807,"comment_id":101228740,"body_markdown":"You are sanding date with time(2019-08-06T00:00:00.000+0000) but parsing in `LocalDate` just date.","body":"You are sanding date with time(2019-08-06T00:00:00.000+0000) but parsing in <code>LocalDate</code> just date."},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":0,"creation_date":1565080276,"post_id":57371807,"comment_id":101228829,"body_markdown":"`LocalDateTime` or maybe even `OffsetDateTime` should be used here...","body":"<code>LocalDateTime</code> or maybe even <code>OffsetDateTime</code> should be used here..."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1565102198,"post_id":57371807,"comment_id":101241547,"body_markdown":"The exception message mentions index 23, that is where the offset, `+0000`, is. Just an uninformed guess, it may be that parsing expected the offset to be written with a colon between hours and minutes, `+00:00`.","body":"The exception message mentions index 23, that is where the offset, <code>+0000</code>, is. Just an uninformed guess, it may be that parsing expected the offset to be written with a colon between hours and minutes, <code>+00:00</code>."}],"answers":[{"tags":[],"owner":{"account_id":18759986,"reputation":183,"user_id":13679143,"display_name":"dino"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1614787868,"creation_date":1614787868,"answer_id":66460791,"question_id":57371807,"body_markdown":"\r\n\r\nHow to send LocalDate and LocalDateTime from Angular to Spring\r\n\r\nnicer solution:\r\n\r\n**app.module.ts**\r\n\r\n    import {DatePipe} from &#39;@angular/common&#39;;\r\n    .\r\n    .\r\n    .\r\n    providers: [DatePipe]\r\n\r\n\r\n**app.service.ts**\r\n\r\n    import { DatePipe } from &#39;@angular/common&#39;;\r\n    \r\n     constructor( private datePipe: DatePipe) {}\r\n\r\n    public sendStuff():  Observable&lt;any&gt;{\r\n        let params = new HttpParams().set(&quot;date&quot;, this.datePipe.transform(new Date(),&quot;yyyy-MM-dd&quot;))\r\n        .set(&quot;datetime&quot;,new Date().toISOString());\r\n        return this.http.post&lt;any&gt;(&quot;urlPath../values/show&quot;, &quot;Body&quot; , {\r\n          headers: new HttpHeaders({\r\n            &#39;Accept&#39;: &#39;application/json&#39;\r\n          }),\r\n          params\r\n        }); \r\n      }\r\n\r\n  \r\nSpring Part\r\n\t\r\n    @PostMapping(path=&quot;values/show&quot;)\r\n    public Map&lt;String, Object&gt;  showValues(@RequestParam(&quot;date&quot;) @DateTimeFormat(iso = DateTimeFormat.ISO.DATE)  LocalDate date,\r\n     @RequestParam(&quot;datetime&quot;)  @DateTimeFormat(iso = DateTimeFormat.ISO.DATE_TIME)  LocalDateTime datetime) {) {\r\n    ...\r\n    }\r\n\r\nIf you just want to convert LocalDate you can leave the datePipe away and just send new Date().toISOString() from Angular. But since the Questioner especially asked for LocalDate you need some sort of Format to get this kind of Date -&gt; &quot;yyyy-MM-dd&quot; . Only with this Spring is able to do its magic.\r\n\r\nBtw. same is possivle if you just need the time (HH:mm:ss.SSSXXX) which is DateTimeFormat.ISO.TIME . \r\n\r\n\r\n**finish!**\r\n\r\n\r\n**not so nice solution and more uncomfortable -&gt; convert to String** \r\n(**not tested** since i was happy with Spring solution) \r\n \r\n**app.service.ts**\r\n\r\n    public sendStuff():  Observable&lt;any&gt;{\r\n        let params = new HttpParams().set(&quot;datetime&quot;,new Date().toLocaleString())\r\n        .set(&quot;datetime&quot;,new Date().toISOString());\r\n        return this.http.post&lt;any&gt;(&quot;urlPath../values/show&quot;, &quot;Body&quot; , {\r\n          headers: new HttpHeaders({\r\n            &#39;Accept&#39;: &#39;application/json&#39;\r\n          }),\r\n          params\r\n        }); \r\n      }\r\n\r\n Spring:\r\n \r\n\r\n\r\n    @PostMapping(path=&quot;values/show&quot;)\r\n    public Map&lt;String, Object&gt;  showValues( @RequestParam String date,  @RequestParam String datetime) {\r\n    ...\r\n    \t // code to transform String to Date copied somewhere\r\n     //Create a DateTimeFormatter with your required format:\r\n     DateTimeFormatter dateTimeFormat = new DateTimeFormatter(DateTimeFormatter.BASIC_ISO_DATE);\r\n    \r\n        //Next parse the date from the @RequestParam, specifying the TO type as a TemporalQuery:\r\n       LocalDateTime date = dateTimeFormat.parse(datetime, LocalDateTime::from);\r\n    \r\n       // some more code to transform LocalDate...\r\n    }\r\n\r\n  ","title":"How to convert Date type Angular to LocalDate in Java","body":"<p>How to send LocalDate and LocalDateTime from Angular to Spring</p>\n<p>nicer solution:</p>\n<p><strong>app.module.ts</strong></p>\n<pre><code>import {DatePipe} from '@angular/common';\n.\n.\n.\nproviders: [DatePipe]\n</code></pre>\n<p><strong>app.service.ts</strong></p>\n<pre><code>import { DatePipe } from '@angular/common';\n\n constructor( private datePipe: DatePipe) {}\n\npublic sendStuff():  Observable&lt;any&gt;{\n    let params = new HttpParams().set(&quot;date&quot;, this.datePipe.transform(new Date(),&quot;yyyy-MM-dd&quot;))\n    .set(&quot;datetime&quot;,new Date().toISOString());\n    return this.http.post&lt;any&gt;(&quot;urlPath../values/show&quot;, &quot;Body&quot; , {\n      headers: new HttpHeaders({\n        'Accept': 'application/json'\n      }),\n      params\n    }); \n  }\n</code></pre>\n<p>Spring Part</p>\n<pre><code>@PostMapping(path=&quot;values/show&quot;)\npublic Map&lt;String, Object&gt;  showValues(@RequestParam(&quot;date&quot;) @DateTimeFormat(iso = DateTimeFormat.ISO.DATE)  LocalDate date,\n @RequestParam(&quot;datetime&quot;)  @DateTimeFormat(iso = DateTimeFormat.ISO.DATE_TIME)  LocalDateTime datetime) {) {\n...\n}\n</code></pre>\n<p>If you just want to convert LocalDate you can leave the datePipe away and just send new Date().toISOString() from Angular. But since the Questioner especially asked for LocalDate you need some sort of Format to get this kind of Date -&gt; &quot;yyyy-MM-dd&quot; . Only with this Spring is able to do its magic.</p>\n<p>Btw. same is possivle if you just need the time (HH:mm:ss.SSSXXX) which is DateTimeFormat.ISO.TIME .</p>\n<p><strong>finish!</strong></p>\n<p><strong>not so nice solution and more uncomfortable -&gt; convert to String</strong>\n(<strong>not tested</strong> since i was happy with Spring solution)</p>\n<p><strong>app.service.ts</strong></p>\n<pre><code>public sendStuff():  Observable&lt;any&gt;{\n    let params = new HttpParams().set(&quot;datetime&quot;,new Date().toLocaleString())\n    .set(&quot;datetime&quot;,new Date().toISOString());\n    return this.http.post&lt;any&gt;(&quot;urlPath../values/show&quot;, &quot;Body&quot; , {\n      headers: new HttpHeaders({\n        'Accept': 'application/json'\n      }),\n      params\n    }); \n  }\n</code></pre>\n<p>Spring:</p>\n<pre><code>@PostMapping(path=&quot;values/show&quot;)\npublic Map&lt;String, Object&gt;  showValues( @RequestParam String date,  @RequestParam String datetime) {\n...\n     // code to transform String to Date copied somewhere\n //Create a DateTimeFormatter with your required format:\n DateTimeFormatter dateTimeFormat = new DateTimeFormatter(DateTimeFormatter.BASIC_ISO_DATE);\n\n    //Next parse the date from the @RequestParam, specifying the TO type as a TemporalQuery:\n   LocalDateTime date = dateTimeFormat.parse(datetime, LocalDateTime::from);\n\n   // some more code to transform LocalDate...\n}\n</code></pre>\n"}],"owner":{"account_id":13769143,"reputation":33,"user_id":9937073,"display_name":"C&#233;dric R"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10109,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1692835535,"creation_date":1565079765,"question_id":57371807,"body_markdown":"I have a frontend part in Angular 7 and a backend part in Java with Spring Boot framework. I want to post to my backend a Date object. In backend I have a Local Date object. I don&#39;t need LocalDateTime object\r\n\r\nmy date service in angular. I need to preserve Date type and not use string.\r\n\r\n```typescript\r\naddDate(): Observable&lt;Date&gt; {\r\n    let now = new Date();\r\n    return this.http\r\n      .post&lt;Date&gt;(&#39;/api/date&#39;, now)\r\n      .pipe(\r\n        tap(response =&gt; {\r\n          return response;\r\n        }),\r\n        catchError(error =&gt; this.notificationService.handleError(error))\r\n      );\r\n  }\r\n```\r\n\r\nmy backend service :\r\n\r\n```java\r\n\t@PostMapping\r\n\tpublic LocalDate addIrregularity(@RequestBody LocalDate date, HttpServletRequest request) {\r\n\t\tlog.info(date);\r\n\t\treturn date;\r\n\t}\r\n```\r\n\r\nAnd i have this error:\r\n\r\n&gt; 2019-08-06 08:21:02.185  WARN 1444 --- [nio-8080-exec-4]\r\n&gt; .w.s.m.s.DefaultHandlerExceptionResolver : Resolved\r\n&gt; [org.springframework.http.converter.HttpMessageNotReadableException:\r\n&gt; JSON parse error: Cannot deserialize value of type\r\n&gt; `java.time.LocalDate` from String &quot;2019-08-06T00:00:00.000+0000&quot;:\r\n&gt; Failed to deserialize java.time.LocalDate:\r\n&gt; (java.time.format.DateTimeParseException) Text\r\n&gt; &#39;2019-08-06T00:00:00.000+0000&#39; could not be parsed, unparsed text\r\n&gt; found at index 23; nested exception is\r\n&gt; com.fasterxml.jackson.databind.exc.InvalidFormatException: Cannot\r\n&gt; deserialize value of type `java.time.LocalDate` from String\r\n&gt; &quot;2019-08-06T00:00:00.000+0000&quot;: Failed to deserialize\r\n&gt; java.time.LocalDate: (java.time.format.DateTimeParseException) Text\r\n&gt; &#39;2019-08-06T00:00:00.000+0000&#39; could not be parsed, unparsed text\r\n&gt; found at index 23","title":"How to convert Date type Angular to LocalDate in Java","body":"<p>I have a frontend part in Angular 7 and a backend part in Java with Spring Boot framework. I want to post to my backend a Date object. In backend I have a Local Date object. I don't need LocalDateTime object</p>\n\n<p>my date service in angular. I need to preserve Date type and not use string.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>addDate(): Observable&lt;Date&gt; {\n    let now = new Date();\n    return this.http\n      .post&lt;Date&gt;('/api/date', now)\n      .pipe(\n        tap(response =&gt; {\n          return response;\n        }),\n        catchError(error =&gt; this.notificationService.handleError(error))\n      );\n  }\n</code></pre>\n\n<p>my backend service :</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>    @PostMapping\n    public LocalDate addIrregularity(@RequestBody LocalDate date, HttpServletRequest request) {\n        log.info(date);\n        return date;\n    }\n</code></pre>\n\n<p>And i have this error:</p>\n\n<blockquote>\n  <p>2019-08-06 08:21:02.185  WARN 1444 --- [nio-8080-exec-4]\n  .w.s.m.s.DefaultHandlerExceptionResolver : Resolved\n  [org.springframework.http.converter.HttpMessageNotReadableException:\n  JSON parse error: Cannot deserialize value of type\n  <code>java.time.LocalDate</code> from String \"2019-08-06T00:00:00.000+0000\":\n  Failed to deserialize java.time.LocalDate:\n  (java.time.format.DateTimeParseException) Text\n  '2019-08-06T00:00:00.000+0000' could not be parsed, unparsed text\n  found at index 23; nested exception is\n  com.fasterxml.jackson.databind.exc.InvalidFormatException: Cannot\n  deserialize value of type <code>java.time.LocalDate</code> from String\n  \"2019-08-06T00:00:00.000+0000\": Failed to deserialize\n  java.time.LocalDate: (java.time.format.DateTimeParseException) Text\n  '2019-08-06T00:00:00.000+0000' could not be parsed, unparsed text\n  found at index 23</p>\n</blockquote>\n"},{"tags":["java","regex","string","stringbuilder"],"comments":[{"owner":{"account_id":6518557,"reputation":2810,"user_id":5043481,"display_name":"zforgo"},"score":1,"creation_date":1692826643,"post_id":76965006,"comment_id":135678657,"body_markdown":"Welcome to Stack Overflow. Please take the [tour](https://stackoverflow.com/tour) to learn how Stack Overflow works and read [How to Ask](https://stackoverflow.com/help/how-to-ask) or how to improve the quality of your question. Then edit your question to include your full source code you have as a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example), which can be compiled and tested by others. Included sources [should be in text format](https://meta.stackoverflow.com/a/285557/5043481), not an image. Currently you are not asking any question.","body":"Welcome to Stack Overflow. Please take the <a href=\"https://stackoverflow.com/tour\">tour</a> to learn how Stack Overflow works and read <a href=\"https://stackoverflow.com/help/how-to-ask\">How to Ask</a> or how to improve the quality of your question. Then edit your question to include your full source code you have as a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, which can be compiled and tested by others. Included sources <a href=\"https://meta.stackoverflow.com/a/285557/5043481\">should be in text format</a>, not an image. Currently you are not asking any question."},{"owner":{"account_id":5030450,"reputation":8573,"user_id":4040817,"accept_rate":75,"display_name":"Little Santi"},"score":2,"creation_date":1692827455,"post_id":76965006,"comment_id":135678755,"body_markdown":"If you use regular expressions, be careful about international prefixes: In your example, the prefix is just one digit long (&quot;7&quot;), but you must take in account that there are two-digit and even three-digit prefixes. To solve that, you might prepend zeroes at the begginning to fix the input string length to 13.","body":"If you use regular expressions, be careful about international prefixes: In your example, the prefix is just one digit long (&quot;7&quot;), but you must take in account that there are two-digit and even three-digit prefixes. To solve that, you might prepend zeroes at the begginning to fix the input string length to 13."},{"owner":{"account_id":32681,"reputation":138933,"user_id":90848,"accept_rate":90,"display_name":"Laurence Gonsalves"},"score":0,"creation_date":1692828376,"post_id":76965006,"comment_id":135678871,"body_markdown":"Adding to what @LittleSanti said, the &quot;+7&quot; in this example is a country calling code. Not only can the length of the country calling code vary (eg: +7 vs  +44 vs +592), but the length and format of the number that comes after it also depends on the country code in use (eg: +1 uses the format &quot;+1 (XXX) XXX-XXXX&quot; while +86 uses the format &quot;+86 XXX XXXX XXXX&quot;).","body":"Adding to what @LittleSanti said, the &quot;+7&quot; in this example is a country calling code. Not only can the length of the country calling code vary (eg: +7 vs  +44 vs +592), but the length and format of the number that comes after it also depends on the country code in use (eg: +1 uses the format &quot;+1 (XXX) XXX-XXXX&quot; while +86 uses the format &quot;+86 XXX XXXX XXXX&quot;)."}],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1692829584,"creation_date":1692827146,"answer_id":76965069,"question_id":76965006,"body_markdown":"&gt; _&#39;... I need to get a phone number as a string &quot;79991111111&quot; and convert it to this type of string &quot;+7 (999) 111-11-11&quot;. ...&#39;_\r\n\r\nYou can use the _[StringBuilder#insert](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/StringBuilder.html#insert(int,char))_ method to insert a character into a _String_ value.\r\n\r\n```java\r\nStringBuilder string = new StringBuilder(&quot;79991111111&quot;);\r\nstring.insert(0, &#39;+&#39;);\r\nstring.insert(2, &quot; (&quot;);\r\nstring.insert(7, &quot;) &quot;);\r\nstring.insert(12, &#39;-&#39;);\r\nstring.insert(15, &#39;-&#39;);\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n+7 (999) 111-11-11\r\n```\r\n\r\nOr, you could use a _[String#substring](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#substring(int,int))_ for each part of the value.\r\n\r\n```java\r\nString string = &quot;79991111111&quot;;\r\nString[] strings = {\r\n    string.substring(0, 1),\r\n    string.substring(1, 4),\r\n    string.substring(4, 7),\r\n    string.substring(7, 9),\r\n    string.substring(9)\r\n};\r\nstring = &quot;+%s (%s) %s-%s-%s&quot;.formatted(strings);\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n+7 (999) 111-11-11\r\n```\r\n\r\n&gt; _&quot;... I tried to do it via regex, but i don&#39;t know how to change string with using regex&quot;_\r\n\r\nYou can use the _[String#replaceAll](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#replaceAll(java.lang.String,java.lang.String))_ method to capture each group of numbers, and insert values between them.\r\n\r\nSince the value will always be the same length, you can use the _wildcard_ character `.`, and capture syntax `( )`.\r\n\r\n```java\r\nString string = &quot;79991111111&quot;.replaceAll(&quot;(.)(...)(...)(..)(..)&quot;, &quot;+$1 ($2) $3-$4-$5&quot;);\r\n```\r\n\r\n","title":"How to format string in Java when the value goes from parameters?","body":"<blockquote>\n<p><em>'... I need to get a phone number as a string &quot;79991111111&quot; and convert it to this type of string &quot;+7 (999) 111-11-11&quot;. ...'</em></p>\n</blockquote>\n<p>You can use the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/StringBuilder.html#insert(int,char)\" rel=\"nofollow noreferrer\">StringBuilder#insert</a></em> method to insert a character into a <em>String</em> value.</p>\n<pre class=\"lang-java prettyprint-override\"><code>StringBuilder string = new StringBuilder(&quot;79991111111&quot;);\nstring.insert(0, '+');\nstring.insert(2, &quot; (&quot;);\nstring.insert(7, &quot;) &quot;);\nstring.insert(12, '-');\nstring.insert(15, '-');\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>+7 (999) 111-11-11\n</code></pre>\n<p>Or, you could use a <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#substring(int,int)\" rel=\"nofollow noreferrer\">String#substring</a></em> for each part of the value.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String string = &quot;79991111111&quot;;\nString[] strings = {\n    string.substring(0, 1),\n    string.substring(1, 4),\n    string.substring(4, 7),\n    string.substring(7, 9),\n    string.substring(9)\n};\nstring = &quot;+%s (%s) %s-%s-%s&quot;.formatted(strings);\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>+7 (999) 111-11-11\n</code></pre>\n<blockquote>\n<p><em>&quot;... I tried to do it via regex, but i don't know how to change string with using regex&quot;</em></p>\n</blockquote>\n<p>You can use the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#replaceAll(java.lang.String,java.lang.String)\" rel=\"nofollow noreferrer\">String#replaceAll</a></em> method to capture each group of numbers, and insert values between them.</p>\n<p>Since the value will always be the same length, you can use the <em>wildcard</em> character <code>.</code>, and capture syntax <code>( )</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String string = &quot;79991111111&quot;.replaceAll(&quot;(.)(...)(...)(..)(..)&quot;, &quot;+$1 ($2) $3-$4-$5&quot;);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2179728,"reputation":73077,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1692828953,"creation_date":1692827147,"answer_id":76965070,"question_id":76965006,"body_markdown":"You can use capturing groups and then replace the string as the desired pattern.\r\n\r\n**Demo:**\r\n\r\n    import java.time.Duration;\r\n    import java.util.stream.Stream;\r\n    \r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            String regex = &quot;(\\\\d)(\\\\d{3})(\\\\d{3})(\\\\d{2})(\\\\d{2})&quot;;\r\n            // Test\r\n            Stream.of(\r\n                    &quot;79991111111&quot;,\r\n                    &quot;12345678901&quot;\r\n            ).forEach(s -&gt; System.out.println(s.replaceAll(regex,&quot;+$1($2)$3-$4-$5&quot;)));\r\n        }\r\n    }\r\n\r\n**Output:**\r\n\r\n    +7(999)111-11-11\r\n    +1(234)567-89-01\r\n\r\n**Notes:** \r\n\r\n 1. There are 5 capturing groups in the regex pattern and each of them has been used with its position as a replaceable parameter in the replacement string.\r\n 2. `\\d` represents a single digit and `\\d{3}` represents three digits in the regex pattern.\r\n\r\n[Regex Demo](https://regex101.com/r/elej4P/1)","title":"How to format string in Java when the value goes from parameters?","body":"<p>You can use capturing groups and then replace the string as the desired pattern.</p>\n<p><strong>Demo:</strong></p>\n<pre><code>import java.time.Duration;\nimport java.util.stream.Stream;\n\npublic class Main {\n    public static void main(String[] args) {\n        String regex = &quot;(\\\\d)(\\\\d{3})(\\\\d{3})(\\\\d{2})(\\\\d{2})&quot;;\n        // Test\n        Stream.of(\n                &quot;79991111111&quot;,\n                &quot;12345678901&quot;\n        ).forEach(s -&gt; System.out.println(s.replaceAll(regex,&quot;+$1($2)$3-$4-$5&quot;)));\n    }\n}\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>+7(999)111-11-11\n+1(234)567-89-01\n</code></pre>\n<p><strong>Notes:</strong></p>\n<ol>\n<li>There are 5 capturing groups in the regex pattern and each of them has been used with its position as a replaceable parameter in the replacement string.</li>\n<li><code>\\d</code> represents a single digit and <code>\\d{3}</code> represents three digits in the regex pattern.</li>\n</ol>\n<p><a href=\"https://regex101.com/r/elej4P/1\" rel=\"nofollow noreferrer\">Regex Demo</a></p>\n"},{"comments":[{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":0,"creation_date":1692830400,"post_id":76965087,"comment_id":135679108,"body_markdown":"maybe related to the country code.... just  a guess","body":"maybe related to the country code.... just  a guess"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1692831264,"post_id":76965087,"comment_id":135679194,"body_markdown":"@user16320675 Based on the available input and desired output, this works - they weren’t asking about phone numbers  &#129335;‍♂️","body":"@user16320675 Based on the available input and desired output, this works - they weren’t asking about phone numbers  🤷‍♂️"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":0,"creation_date":1692833288,"post_id":76965087,"comment_id":135679379,"body_markdown":"I know it works... and how &quot;they weren’t asking about phone numbers&quot; ?? They wrote &quot;I need to get a phone number&quot; - I believe the downvotes on all answers are because of the country code (`+7`) of given sample number (again, just my guess... people have reason to not help that country)","body":"I know it works... and how &quot;they weren’t asking about phone numbers&quot; ?? They wrote &quot;I need to get a phone number&quot; - I believe the downvotes on all answers are because of the country code (<code>+7</code>) of given sample number (again, just my guess... people have reason to not help that country)"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1692833709,"post_id":76965087,"comment_id":135679424,"body_markdown":"@user16320675 Yeah, I probably skimmed over that part - my bad &#128531;","body":"@user16320675 Yeah, I probably skimmed over that part - my bad 😓"}],"tags":[],"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"comment_count":4,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1692835007,"creation_date":1692827307,"answer_id":76965087,"question_id":76965006,"body_markdown":"Make use of [`MaskFormatter`](https://docs.oracle.com/javase/jp/16/docs/api/java.desktop/javax/swing/text/MaskFormatter.html), for example...\r\n\r\n    MaskFormatter mf = new MaskFormatter(&quot;+# (###) ###-##-##&quot;);\r\n    mf.setValueContainsLiteralCharacters(false);\r\n    System.out.println(mf.valueToString(&quot;79991111111&quot;));\r\n\r\nwhich will output `+7 (999) 111-11-11`\r\n\r\n# Update\r\n\r\nYou should take a look at [Googles libphonenumber](https://github.com/google/libphonenumber) - as formatting phone numbers does not have a simple solution\r\n\r\n*(ps - I&#39;ve never used this before, this is all experimental on my part)*\r\n\r\nSo, based on the documented examples, you could do something like...\r\n\r\n    // I had to add the `+` prefix, otherwise the parsing would fail\r\n    String input = &quot;+79991111111&quot;;\r\n    PhoneNumberUtil phoneUtil = PhoneNumberUtil.getInstance();\r\n    try {\r\n        Phonenumber.PhoneNumber phoneNumber = phoneUtil.parse(input, CountryCodeSource.UNSPECIFIED.name());\r\n        System.out.println(phoneNumber);\r\n        System.out.println(phoneUtil.format(phoneNumber, PhoneNumberFormat.INTERNATIONAL));\r\n        System.out.println(phoneUtil.format(phoneNumber, PhoneNumberFormat.NATIONAL));\r\n        System.out.println(phoneUtil.format(phoneNumber, PhoneNumberFormat.E164));\r\n    } catch (NumberParseException e) {\r\n        System.err.println(&quot;NumberParseException was thrown: &quot; + e.toString());\r\n    }\r\n\r\nAnd this will print ...\r\n\r\n    +7 999 111-11-11\r\n    8 (999) 111-11-11\r\n    +79991111111\r\n\r\nAt this point you &quot;should&quot; be able to walk away, as these are using &quot;standardised&quot; formats, but, if you need to do something &quot;special&quot;, you could make use of `PhoneNumberUtil#formatByPattern`, which might look something like...\r\n\r\n    String input = &quot;+79991111111&quot;;\r\n    PhoneNumberUtil phoneUtil = PhoneNumberUtil.getInstance();\r\n    try {\r\n        NumberFormat newNumFormat = new NumberFormat();\r\n        newNumFormat.setPattern(&quot;(\\\\d{3})(\\\\d{3})(\\\\d{2})(\\\\d{2})&quot;);\r\n        newNumFormat.setFormat(&quot;($1) $2-$3-$4&quot;);\r\n\r\n        List&lt;NumberFormat&gt; newNumberFormats = new ArrayList&lt;NumberFormat&gt;();\r\n        newNumberFormats.add(newNumFormat);\r\n\r\n        String formatted = phoneUtil.formatByPattern(phoneNumber, PhoneNumberFormat.INTERNATIONAL, newNumberFormats);\r\n        System.out.println(formatted);\r\n    } catch (NumberParseException e) {\r\n        System.err.println(&quot;NumberParseException was thrown: &quot; + e.toString());\r\n    }\r\n\r\nand output something like...\r\n\r\n    +7 (999) 111-11-11\r\n\r\nwhich, again, is probably as close as you will get.\r\n\r\nPlease also remember, formatting phone numbers is not simple as there are no real &quot;standard&quot; rules across all countries ... it&#39;s a mess","title":"How to format string in Java when the value goes from parameters?","body":"<p>Make use of <a href=\"https://docs.oracle.com/javase/jp/16/docs/api/java.desktop/javax/swing/text/MaskFormatter.html\" rel=\"nofollow noreferrer\"><code>MaskFormatter</code></a>, for example...</p>\n<pre><code>MaskFormatter mf = new MaskFormatter(&quot;+# (###) ###-##-##&quot;);\nmf.setValueContainsLiteralCharacters(false);\nSystem.out.println(mf.valueToString(&quot;79991111111&quot;));\n</code></pre>\n<p>which will output <code>+7 (999) 111-11-11</code></p>\n<h1>Update</h1>\n<p>You should take a look at <a href=\"https://github.com/google/libphonenumber\" rel=\"nofollow noreferrer\">Googles libphonenumber</a> - as formatting phone numbers does not have a simple solution</p>\n<p><em>(ps - I've never used this before, this is all experimental on my part)</em></p>\n<p>So, based on the documented examples, you could do something like...</p>\n<pre><code>// I had to add the `+` prefix, otherwise the parsing would fail\nString input = &quot;+79991111111&quot;;\nPhoneNumberUtil phoneUtil = PhoneNumberUtil.getInstance();\ntry {\n    Phonenumber.PhoneNumber phoneNumber = phoneUtil.parse(input, CountryCodeSource.UNSPECIFIED.name());\n    System.out.println(phoneNumber);\n    System.out.println(phoneUtil.format(phoneNumber, PhoneNumberFormat.INTERNATIONAL));\n    System.out.println(phoneUtil.format(phoneNumber, PhoneNumberFormat.NATIONAL));\n    System.out.println(phoneUtil.format(phoneNumber, PhoneNumberFormat.E164));\n} catch (NumberParseException e) {\n    System.err.println(&quot;NumberParseException was thrown: &quot; + e.toString());\n}\n</code></pre>\n<p>And this will print ...</p>\n<pre><code>+7 999 111-11-11\n8 (999) 111-11-11\n+79991111111\n</code></pre>\n<p>At this point you &quot;should&quot; be able to walk away, as these are using &quot;standardised&quot; formats, but, if you need to do something &quot;special&quot;, you could make use of <code>PhoneNumberUtil#formatByPattern</code>, which might look something like...</p>\n<pre><code>String input = &quot;+79991111111&quot;;\nPhoneNumberUtil phoneUtil = PhoneNumberUtil.getInstance();\ntry {\n    NumberFormat newNumFormat = new NumberFormat();\n    newNumFormat.setPattern(&quot;(\\\\d{3})(\\\\d{3})(\\\\d{2})(\\\\d{2})&quot;);\n    newNumFormat.setFormat(&quot;($1) $2-$3-$4&quot;);\n\n    List&lt;NumberFormat&gt; newNumberFormats = new ArrayList&lt;NumberFormat&gt;();\n    newNumberFormats.add(newNumFormat);\n\n    String formatted = phoneUtil.formatByPattern(phoneNumber, PhoneNumberFormat.INTERNATIONAL, newNumberFormats);\n    System.out.println(formatted);\n} catch (NumberParseException e) {\n    System.err.println(&quot;NumberParseException was thrown: &quot; + e.toString());\n}\n</code></pre>\n<p>and output something like...</p>\n<pre><code>+7 (999) 111-11-11\n</code></pre>\n<p>which, again, is probably as close as you will get.</p>\n<p>Please also remember, formatting phone numbers is not simple as there are no real &quot;standard&quot; rules across all countries ... it's a mess</p>\n"}],"owner":{"account_id":29286116,"reputation":13,"user_id":22437646,"display_name":"komezh"},"comment_count":3,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":132,"favorite_count":0,"down_vote_count":4,"up_vote_count":2,"closed_date":1700157135,"answer_count":3,"score":-2,"last_activity_date":1692835007,"creation_date":1692826120,"question_id":76965006,"body_markdown":"I have a problem: I need to get a phone number as a string &quot;79991111111&quot; and convert it to this type of string &quot;+7 (999) 111-11-11&quot;.\r\n\r\nAs i got it i&#39;m able to do it by using a String.format() - but in this case I need a string initially, but i know only format of expected string that comes by parameters (ex. &quot;79991111111&quot;), but not the exact string.\r\n\r\n**Summary**: I need do &quot;+7 (999) 111-11-11&quot; from &quot;79991111111&quot; and there is difference values all the time, but the same type and length.\r\n\r\nI tried to do it via regex, but i don&#39;t know how to change string with using regex","title":"How to format string in Java when the value goes from parameters?","body":"<p>I have a problem: I need to get a phone number as a string &quot;79991111111&quot; and convert it to this type of string &quot;+7 (999) 111-11-11&quot;.</p>\n<p>As i got it i'm able to do it by using a String.format() - but in this case I need a string initially, but i know only format of expected string that comes by parameters (ex. &quot;79991111111&quot;), but not the exact string.</p>\n<p><strong>Summary</strong>: I need do &quot;+7 (999) 111-11-11&quot; from &quot;79991111111&quot; and there is difference values all the time, but the same type and length.</p>\n<p>I tried to do it via regex, but i don't know how to change string with using regex</p>\n"},{"tags":["java","google-chrome","selenium-webdriver","selenium-chromedriver"],"answers":[{"tags":[],"owner":{"account_id":9452167,"reputation":1629,"user_id":7028588,"accept_rate":0,"display_name":"HeronAlgoSearch"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692834918,"creation_date":1692834918,"answer_id":76965527,"question_id":76961560,"body_markdown":"The answer is that I needed to add `arguments.add(&quot;--disable-dev-shm-usage&quot;);` to the options. It works now.","title":"&#39;org.openqa.selenium.WebDriverException: unknown error: session deleted because of page crash&#39;","body":"<p>The answer is that I needed to add <code>arguments.add(&quot;--disable-dev-shm-usage&quot;);</code> to the options. It works now.</p>\n"}],"owner":{"account_id":9452167,"reputation":1629,"user_id":7028588,"accept_rate":0,"display_name":"HeronAlgoSearch"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":139,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692834918,"creation_date":1692795330,"question_id":76961560,"body_markdown":"I have standalone chrome Docker image and I want to use it with Java17. My Docker file is:\r\n\r\n```\r\nFROM selenium/standalone-chrome:115.0\r\n\r\nRUN wget -O- https://apt.corretto.aws/corretto.key | sudo apt-key add -\r\n\r\nRUN sudo apt update\r\n# RUN sudo apt upgrade\r\nRUN sudo apt-get -y install software-properties-common\r\nRUN sudo add-apt-repository &#39;deb https://apt.corretto.aws stable main&#39;\r\nRUN sudo apt-get update\r\nRUN sudo apt-get install -y java-17-amazon-corretto-jdk\r\n\r\n\r\nENV CHROMEDRIVER_PORT 4444\r\nENV CHROMEDRIVER_WHITELISTED_IPS &quot;127.0.0.1&quot;\r\nENV CHROMEDRIVER_URL_BASE &#39;&#39;\r\nEXPOSE 4444\r\n\r\nEXPOSE 8080\r\nARG JAR_FILE=target/*.jar\r\nCOPY ${JAR_FILE} app.jar\r\n# For Testing\r\nENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;, &quot;-Xmx600m&quot;,&quot;/app.jar&quot;]\r\n```\r\n\r\nMy java code is\r\n```\r\n//            System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;/usr/local/bin/chromedriver&quot;);\r\n\r\n            ChromeOptions chromeOptions = new ChromeOptions();\r\n//            chromeOptions.setBinary(&quot;/usr/local/bin/chrome&quot;);\r\n            chromeOptions.addArguments(&quot;--headless=new&quot;);\r\n            chromeOptions.addArguments(&quot;--no-sandbox&quot;);\r\n            chromeOptions.addArguments(&quot;--disable-gpu&quot;);\r\n            chromeOptions.addArguments(&quot;--remote-allow-origins=*&quot;);\r\n    WebDriver webDriver = new ChromeDriver(chromeOptions);\r\n    webDriver.get(&quot;https://www.google.com/&quot;);\r\n\r\n```\r\nI am seeing two errors:\r\n```\r\nThe chromedriver version (115.0.5790.102) detected in PATH at /usr/bin/chromedriver might not be compatible with the detected chrome version (115.0.5790.110); currently, chromedriver 115.0.5790.170 is recommended for chrome 115.*, so it is advised to delete the driver in PATH and retry\r\n```\r\nand also\r\n```\r\norg.openqa.selenium.WebDriverException: unknown error: session deleted because of page crash\r\nfrom tab crashed\r\n  (Session info: chrome=115.0.5790.110)\r\nBuild info: version: &#39;4.11.0&#39;, revision: &#39;040bc5406b&#39;\r\nSystem info: os.name: &#39;Linux&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;5.15.49-linuxkit&#39;, java.version: &#39;17.0.8.1&#39;\r\nDriver info: org.openqa.selenium.chrome.ChromeDriver\r\nCommand: [29d1fa15d0fab05c1c479470b82aaa69, get {url=https://www.kcrg.com/2022/02/08/john-deere-acquires-majority-ownership-battery-manufacturer/}]\r\nCapabilities {acceptInsecureCerts: false, browserName: chrome, browserVersion: 115.0.5790.110, chrome: {chromedriverVersion: 115.0.5790.102 (90efd4b0ad6..., userDataDir: /tmp/.org.chromium.Chromium...}, goog:chromeOptions: {debuggerAddress: localhost:43301}, networkConnectionEnabled: false, pageLoadStrategy: normal, platformName: linux, proxy: Proxy(), se:cdp: ws://localhost:43301/devtoo..., se:cdpVersion: 115.0.5790.110, setWindowRect: true, strictFileInteractability: false, timeouts: {implicit: 0, pageLoad: 300000, script: 30000}, unhandledPromptBehavior: dismiss and notify, webauthn:extension:credBlob: true, webauthn:extension:largeBlob: true, webauthn:extension:minPinLength: true, webauthn:extension:prf: true, webauthn:virtualAuthenticators: true}\r\n```\r\n\r\nDoes anyone know how to diagnose/fix? ","title":"&#39;org.openqa.selenium.WebDriverException: unknown error: session deleted because of page crash&#39;","body":"<p>I have standalone chrome Docker image and I want to use it with Java17. My Docker file is:</p>\n<pre><code>FROM selenium/standalone-chrome:115.0\n\nRUN wget -O- https://apt.corretto.aws/corretto.key | sudo apt-key add -\n\nRUN sudo apt update\n# RUN sudo apt upgrade\nRUN sudo apt-get -y install software-properties-common\nRUN sudo add-apt-repository 'deb https://apt.corretto.aws stable main'\nRUN sudo apt-get update\nRUN sudo apt-get install -y java-17-amazon-corretto-jdk\n\n\nENV CHROMEDRIVER_PORT 4444\nENV CHROMEDRIVER_WHITELISTED_IPS &quot;127.0.0.1&quot;\nENV CHROMEDRIVER_URL_BASE ''\nEXPOSE 4444\n\nEXPOSE 8080\nARG JAR_FILE=target/*.jar\nCOPY ${JAR_FILE} app.jar\n# For Testing\nENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;, &quot;-Xmx600m&quot;,&quot;/app.jar&quot;]\n</code></pre>\n<p>My java code is</p>\n<pre><code>//            System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;/usr/local/bin/chromedriver&quot;);\n\n            ChromeOptions chromeOptions = new ChromeOptions();\n//            chromeOptions.setBinary(&quot;/usr/local/bin/chrome&quot;);\n            chromeOptions.addArguments(&quot;--headless=new&quot;);\n            chromeOptions.addArguments(&quot;--no-sandbox&quot;);\n            chromeOptions.addArguments(&quot;--disable-gpu&quot;);\n            chromeOptions.addArguments(&quot;--remote-allow-origins=*&quot;);\n    WebDriver webDriver = new ChromeDriver(chromeOptions);\n    webDriver.get(&quot;https://www.google.com/&quot;);\n\n</code></pre>\n<p>I am seeing two errors:</p>\n<pre><code>The chromedriver version (115.0.5790.102) detected in PATH at /usr/bin/chromedriver might not be compatible with the detected chrome version (115.0.5790.110); currently, chromedriver 115.0.5790.170 is recommended for chrome 115.*, so it is advised to delete the driver in PATH and retry\n</code></pre>\n<p>and also</p>\n<pre><code>org.openqa.selenium.WebDriverException: unknown error: session deleted because of page crash\nfrom tab crashed\n  (Session info: chrome=115.0.5790.110)\nBuild info: version: '4.11.0', revision: '040bc5406b'\nSystem info: os.name: 'Linux', os.arch: 'amd64', os.version: '5.15.49-linuxkit', java.version: '17.0.8.1'\nDriver info: org.openqa.selenium.chrome.ChromeDriver\nCommand: [29d1fa15d0fab05c1c479470b82aaa69, get {url=https://www.kcrg.com/2022/02/08/john-deere-acquires-majority-ownership-battery-manufacturer/}]\nCapabilities {acceptInsecureCerts: false, browserName: chrome, browserVersion: 115.0.5790.110, chrome: {chromedriverVersion: 115.0.5790.102 (90efd4b0ad6..., userDataDir: /tmp/.org.chromium.Chromium...}, goog:chromeOptions: {debuggerAddress: localhost:43301}, networkConnectionEnabled: false, pageLoadStrategy: normal, platformName: linux, proxy: Proxy(), se:cdp: ws://localhost:43301/devtoo..., se:cdpVersion: 115.0.5790.110, setWindowRect: true, strictFileInteractability: false, timeouts: {implicit: 0, pageLoad: 300000, script: 30000}, unhandledPromptBehavior: dismiss and notify, webauthn:extension:credBlob: true, webauthn:extension:largeBlob: true, webauthn:extension:minPinLength: true, webauthn:extension:prf: true, webauthn:virtualAuthenticators: true}\n</code></pre>\n<p>Does anyone know how to diagnose/fix?</p>\n"},{"tags":["java","search","recursion","tree","binary-tree"],"comments":[{"owner":{"account_id":3794041,"reputation":15633,"user_id":3154233,"accept_rate":88,"display_name":"NoobEditor"},"score":0,"creation_date":1391841381,"post_id":21642771,"comment_id":32708487,"body_markdown":"ok..let me put it plain simple...in the code that i posted, its searching max element under the presumption of BST and not BT...right??","body":"ok..let me put it plain simple...in the code that i posted, its searching max element under the presumption of BST and not BT...right??"},{"owner":{"account_id":3794041,"reputation":15633,"user_id":3154233,"accept_rate":88,"display_name":"NoobEditor"},"score":0,"creation_date":1391841385,"post_id":21642771,"comment_id":32708491,"body_markdown":"let us [continue this discussion in chat](http://chat.stackoverflow.com/rooms/47073/discussion-between-noobeditor-and-user2864740)","body":"let us <a href=\"http://chat.stackoverflow.com/rooms/47073/discussion-between-noobeditor-and-user2864740\">continue this discussion in chat</a>"}],"answers":[{"tags":[],"owner":{"account_id":3415784,"reputation":60457,"user_id":2864740,"accept_rate":78,"display_name":"user2864740"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1391843486,"creation_date":1391843149,"answer_id":21643109,"question_id":21642771,"body_markdown":"The difference between a [Binary Tree](http://en.wikipedia.org/wiki/Binary_tree) and [Binary *Search* Tree](http://en.wikipedia.org/wiki/Binary_search_tree) is that a BST has a guaranteed between each node and its left/right child nodes - a plain BT *has no ordering*.\r\n\r\nThe code presented will work for a plain Binary Tree because it *traverses all nodes* in a [*depth first*](http://en.wikipedia.org/wiki/Depth-first_search) manner. (If the data *was* a BST the algorithm would only need to find the &quot;rightmost&quot; node and return it&#39;s value to find the maximum value in the tree.)\r\n\r\nNow, in the BT implementation shown, each recursive function finds the maximum value of the sub-tree given by the left or right child node (the child node is root of the sub-tree) and it is this value that is returned.\r\n\r\nFor instance, consider this Binary Tree, which is not a BST in this case (from Wikipedia):\r\n\r\n![http://upload.wikimedia.org/wikipedia/commons/thumb/f/f7/Binary_tree.svg/192px-Binary_tree.svg.png][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/HTgep.png\r\n\r\nThe call stack, as it works the way through the tree, will look like the following where `-` represents a stack level and the number represents the node.\r\n\r\n&lt;!--language:lang-none--&gt;\r\n\r\n    -2\r\n    --7 (l)\r\n    ---2 (l)\r\n    ---6 (r)\r\n    ----5 (l)\r\n    ----11 (r)\r\n    --5 (r)\r\n    ---9 (r)\r\n    ----4 (l)\r\n\r\nThe stack can only &quot;unwind&quot; when it reaches the terminal case - this *after* the maximum value of the left and right sub-trees has been computed (via recursion into `FindMaxNmb`).\r\n\r\nOn the unwinding phase ..\r\n\r\n- .. when node 11 is reached there is no right node so it returns to 6\r\n- since this finishes searching in the right sub-tree (of 6) it returns to 7\r\n- since this finishes searching in the right sub-tree (of 7) it returns to 2\r\n- since this finishes searching in the left sub-tree (of 2), the right sub-tree (5) is entered ..","title":"Find maximum element in binary tree","body":"<p>The difference between a <a href=\"http://en.wikipedia.org/wiki/Binary_tree\" rel=\"nofollow noreferrer\">Binary Tree</a> and <a href=\"http://en.wikipedia.org/wiki/Binary_search_tree\" rel=\"nofollow noreferrer\">Binary <em>Search</em> Tree</a> is that a BST has a guaranteed between each node and its left/right child nodes - a plain BT <em>has no ordering</em>.</p>\n\n<p>The code presented will work for a plain Binary Tree because it <em>traverses all nodes</em> in a <a href=\"http://en.wikipedia.org/wiki/Depth-first_search\" rel=\"nofollow noreferrer\"><em>depth first</em></a> manner. (If the data <em>was</em> a BST the algorithm would only need to find the \"rightmost\" node and return it's value to find the maximum value in the tree.)</p>\n\n<p>Now, in the BT implementation shown, each recursive function finds the maximum value of the sub-tree given by the left or right child node (the child node is root of the sub-tree) and it is this value that is returned.</p>\n\n<p>For instance, consider this Binary Tree, which is not a BST in this case (from Wikipedia):</p>\n\n<p><img src=\"https://i.stack.imgur.com/HTgep.png\" alt=\"http://upload.wikimedia.org/wikipedia/commons/thumb/f/f7/Binary_tree.svg/192px-Binary_tree.svg.png\"></p>\n\n<p>The call stack, as it works the way through the tree, will look like the following where <code>-</code> represents a stack level and the number represents the node.</p>\n\n\n\n<pre><code>-2\n--7 (l)\n---2 (l)\n---6 (r)\n----5 (l)\n----11 (r)\n--5 (r)\n---9 (r)\n----4 (l)\n</code></pre>\n\n<p>The stack can only \"unwind\" when it reaches the terminal case - this <em>after</em> the maximum value of the left and right sub-trees has been computed (via recursion into <code>FindMaxNmb</code>).</p>\n\n<p>On the unwinding phase ..</p>\n\n<ul>\n<li>.. when node 11 is reached there is no right node so it returns to 6</li>\n<li>since this finishes searching in the right sub-tree (of 6) it returns to 7</li>\n<li>since this finishes searching in the right sub-tree (of 7) it returns to 2</li>\n<li>since this finishes searching in the left sub-tree (of 2), the right sub-tree (5) is entered ..</li>\n</ul>\n"}],"owner":{"account_id":3794041,"reputation":15633,"user_id":3154233,"accept_rate":88,"display_name":"NoobEditor"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7610,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":21643109,"answer_count":1,"score":4,"last_activity_date":1692834083,"creation_date":1391840660,"question_id":21642771,"body_markdown":"I am really confused about finding an element in a `binary tree`.\r\n\r\n**Question:** When we say, search an element in a binary tree, *maximum, in this case,* do we assume that the tree is sorted???&lt;br /&gt;\r\n\r\nIf not, take a look at the below code, I got it from a book and almost every online URL suggests a similar pattern\r\n\r\n```cpp\r\nint FindMaxNmb(BinaryTreeNode root)\r\n{\r\n    int root_val, left, right, max;\r\n\tif(root != null)\r\n\t{\r\n\t    root_val = root.getData();\r\n\t\t\r\n        //recursion - this is what I don&#39;t understand\r\n\t\t\t\r\n\t\t/*\r\n\t\t* This code would have made sense if the binary tree contained\r\n\t    * Sorted elements, like  The left subtree of a node contained \r\n\t\t* Only nodes with keys less than the node&#39;s key The right subtree \r\n\t\t* of a node contained only nodes with keys greater \r\n        * than the node&#39;s key.  \r\n\t\t* */\r\n\r\n\t\tleft = FindMaxNmb(root.getLeft());\r\n\t\tright = FindMaxNmb(root.getRight());\r\n\t\t\t\r\n\t\t//Find max number\r\n\t\tif(left &gt; right)\r\n\t\t{\r\n\t\t    max = left;\r\n        }\r\n        else\r\n        {\r\n            max = right;\r\n        }\r\n\t\r\n        if(root_val &gt; max)\r\n        {\r\n            max = root_val;\r\n        }\r\n    }\r\n\treturn max;\r\n}\r\n```\r\n\r\n**What i don&#39;t understand :** take this recursion for instance \r\n`left = FindMaxNmb(root.getLeft());` this will go on calling unless it reaches the leftmost bottom leaf and then assigns the value, same is with `getRight()`....but this thing only works for the leftmost node having 2 children...how does it check the value of remaining nodes (*I am assuming that binary tree is not sorted*)\r\n\r\nI know I am missing something very obvious here...please help!!","title":"Find maximum element in binary tree","body":"<p>I am really confused about finding an element in a <code>binary tree</code>.</p>\n<p><strong>Question:</strong> When we say, search an element in a binary tree, <em>maximum, in this case,</em> do we assume that the tree is sorted???<br /></p>\n<p>If not, take a look at the below code, I got it from a book and almost every online URL suggests a similar pattern</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>int FindMaxNmb(BinaryTreeNode root)\n{\n    int root_val, left, right, max;\n    if(root != null)\n    {\n        root_val = root.getData();\n        \n        //recursion - this is what I don't understand\n            \n        /*\n        * This code would have made sense if the binary tree contained\n        * Sorted elements, like  The left subtree of a node contained \n        * Only nodes with keys less than the node's key The right subtree \n        * of a node contained only nodes with keys greater \n        * than the node's key.  \n        * */\n\n        left = FindMaxNmb(root.getLeft());\n        right = FindMaxNmb(root.getRight());\n            \n        //Find max number\n        if(left &gt; right)\n        {\n            max = left;\n        }\n        else\n        {\n            max = right;\n        }\n    \n        if(root_val &gt; max)\n        {\n            max = root_val;\n        }\n    }\n    return max;\n}\n</code></pre>\n<p><strong>What i don't understand :</strong> take this recursion for instance\n<code>left = FindMaxNmb(root.getLeft());</code> this will go on calling unless it reaches the leftmost bottom leaf and then assigns the value, same is with <code>getRight()</code>....but this thing only works for the leftmost node having 2 children...how does it check the value of remaining nodes (<em>I am assuming that binary tree is not sorted</em>)</p>\n<p>I know I am missing something very obvious here...please help!!</p>\n"},{"tags":["java","outlook"],"comments":[{"owner":{"account_id":131793,"reputation":64015,"user_id":332059,"accept_rate":57,"display_name":"Dmitry Streblechenko"},"score":0,"creation_date":1692745856,"post_id":76957268,"comment_id":135665784,"body_markdown":"Can you log what gets passed to `new URI()`?","body":"Can you log what gets passed to <code>new URI()</code>?"},{"owner":{"account_id":10032083,"reputation":61,"user_id":7418195,"accept_rate":25,"display_name":"Nisbo"},"score":0,"creation_date":1692747806,"post_id":76957268,"comment_id":135665958,"body_markdown":"If I use \n\n`URLEncoder.encode(subject, &quot;UTF-8&quot;);`\n\nI will get\n\n`mailto:mail1@xxx.com?subject=This+is+the+subject&amp;cc=mail2@xxx.com;mail3@xxx.com&amp;body=Dear+colleagues+this+is+a`","body":"If I use   <code>URLEncoder.encode(subject, &quot;UTF-8&quot;);</code>  I will get  <code>mailto:mail1@xxx.com?subject=This+is+the+subject&amp;cc=mail2@xx&zwnj;&#8203;x.com;mail3@xxx.com&amp;&zwnj;&#8203;body=Dear+colleagues&zwnj;&#8203;+this+is+a</code>"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":1,"creation_date":1692797086,"post_id":76957268,"comment_id":135672973,"body_markdown":"Don’t use URLEncoder for this;  that class is for submitting HTML form data.  The URI class properly encodes URI parts, so use `new URI(&quot;mailto&quot;, to + &quot;?subject=&quot; + subject + &quot;&amp;cc=&quot; + cc + &quot;&amp;body=&quot; + body, null)`.","body":"Don’t use URLEncoder for this;  that class is for submitting HTML form data.  The URI class properly encodes URI parts, so use <code>new URI(&quot;mailto&quot;, to + &quot;?subject=&quot; + subject + &quot;&amp;cc=&quot; + cc + &quot;&amp;body=&quot; + body, null)</code>."},{"owner":{"account_id":10032083,"reputation":61,"user_id":7418195,"accept_rate":25,"display_name":"Nisbo"},"score":0,"creation_date":1692825493,"post_id":76957268,"comment_id":135678519,"body_markdown":"@VGR its working like a charm. thx a lot. :)","body":"@VGR its working like a charm. thx a lot. :)"}],"answers":[{"tags":[],"owner":{"account_id":29271617,"reputation":62,"user_id":22426243,"display_name":"NsoundarMCA"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1692766162,"creation_date":1692765799,"answer_id":76958329,"question_id":76957268,"body_markdown":"you can simply replace like below it works,\r\n\r\nsubject = URLEncoder.encode(subject, &quot;UTF-8&quot;); \r\n\r\nbody = URLEncoder.encode(body, &quot;UTF-8&quot;);\r\n\r\nsubject = subject.replaceAll(&quot;\\\\\\\\+&quot;, &quot;%20&quot;);\r\n\r\nbody = body.replaceAll(&quot;\\\\\\\\+&quot;, &quot;%20&quot;);\r\n\r\n\t            ","title":"Java open outlook and fill subject and body","body":"<p>you can simply replace like below it works,</p>\n<p>subject = URLEncoder.encode(subject, &quot;UTF-8&quot;);</p>\n<p>body = URLEncoder.encode(body, &quot;UTF-8&quot;);</p>\n<p>subject = subject.replaceAll(&quot;\\\\+&quot;, &quot;%20&quot;);</p>\n<p>body = body.replaceAll(&quot;\\\\+&quot;, &quot;%20&quot;);</p>\n"},{"tags":[],"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1692832127,"creation_date":1692832127,"answer_id":76965395,"question_id":76957268,"body_markdown":"Don’t use URLEncoder for this;  that class is for submitting HTML form data.  From [the documentation](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/net/URLEncoder.html):\r\n\r\n&gt;Utility class for HTML form encoding. This class contains static methods for converting a String to the application/x-www-form-urlencoded MIME format.\r\n\r\nFor encoding a URI, just use any of [the URI constructors](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/net/URI.html#constructor-summary) which take more than one argument.  (The single-argument constructor, by design, expects percent-escapes to already be present.)\r\n\r\nIn your case, since mailto URIs are not hierarchical URIs, use the [three-argument constructor](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/net/URI.html#%3Cinit%3E(java.lang.String,java.lang.String,java.lang.String)) that expects a general “scheme-specific part”:\r\n\r\n    Desktop.getDesktop().mail(\r\n        new URI(&quot;mailto&quot;, to + &quot;?subject=&quot; + subject + &quot;&amp;cc=&quot; + cc + &quot;&amp;body=&quot; + body, null));\r\n\r\nOne word of caution:  the above won’t work if any of the mail information contains `&amp;`.  In that case, you’ll have to do the work yourself.  Fortunately, it’s not so hard:\r\n\r\n    Formatter preenc = new Formatter();\r\n    Consumer&lt;String&gt; encoder = s -&gt; {\r\n        for (byte b : s.getBytes(StandardCharsets.UTF_8)) {\r\n            boolean unsafe = (b &lt;= 32 || b &gt;= 127 ||\r\n                &quot;&lt;&gt;#%\\&quot;{}|\\\\^[]`?&amp;=&quot;.indexOf(b) &gt;= 0);\r\n            preenc.format(unsafe ? &quot;%%%02x&quot; : &quot;%c&quot;, b);\r\n        }\r\n    };\r\n\r\n    preenc.format(&quot;%s&quot;, &quot;mailto:&quot;);\r\n    encoder.accept(to);\r\n    preenc.format(&quot;%s&quot;, &quot;?subject=&quot;);\r\n    encoder.accept(subject);\r\n    preenc.format(&quot;%s&quot;, &quot;&amp;cc=&quot;);\r\n    encoder.accept(cc);\r\n    preenc.format(&quot;%s&quot;, &quot;&amp;body=&quot;);\r\n    encoder.accept(body);\r\n\r\n    URI uri = new URI(preenc.toString());\r\n","title":"Java open outlook and fill subject and body","body":"<p>Don’t use URLEncoder for this;  that class is for submitting HTML form data.  From <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/net/URLEncoder.html\" rel=\"nofollow noreferrer\">the documentation</a>:</p>\n<blockquote>\n<p>Utility class for HTML form encoding. This class contains static methods for converting a String to the application/x-www-form-urlencoded MIME format.</p>\n</blockquote>\n<p>For encoding a URI, just use any of <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/net/URI.html#constructor-summary\" rel=\"nofollow noreferrer\">the URI constructors</a> which take more than one argument.  (The single-argument constructor, by design, expects percent-escapes to already be present.)</p>\n<p>In your case, since mailto URIs are not hierarchical URIs, use the <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/net/URI.html#%3Cinit%3E(java.lang.String,java.lang.String,java.lang.String)\" rel=\"nofollow noreferrer\">three-argument constructor</a> that expects a general “scheme-specific part”:</p>\n<pre><code>Desktop.getDesktop().mail(\n    new URI(&quot;mailto&quot;, to + &quot;?subject=&quot; + subject + &quot;&amp;cc=&quot; + cc + &quot;&amp;body=&quot; + body, null));\n</code></pre>\n<p>One word of caution:  the above won’t work if any of the mail information contains <code>&amp;</code>.  In that case, you’ll have to do the work yourself.  Fortunately, it’s not so hard:</p>\n<pre><code>Formatter preenc = new Formatter();\nConsumer&lt;String&gt; encoder = s -&gt; {\n    for (byte b : s.getBytes(StandardCharsets.UTF_8)) {\n        boolean unsafe = (b &lt;= 32 || b &gt;= 127 ||\n            &quot;&lt;&gt;#%\\&quot;{}|\\\\^[]`?&amp;=&quot;.indexOf(b) &gt;= 0);\n        preenc.format(unsafe ? &quot;%%%02x&quot; : &quot;%c&quot;, b);\n    }\n};\n\npreenc.format(&quot;%s&quot;, &quot;mailto:&quot;);\nencoder.accept(to);\npreenc.format(&quot;%s&quot;, &quot;?subject=&quot;);\nencoder.accept(subject);\npreenc.format(&quot;%s&quot;, &quot;&amp;cc=&quot;);\nencoder.accept(cc);\npreenc.format(&quot;%s&quot;, &quot;&amp;body=&quot;);\nencoder.accept(body);\n\nURI uri = new URI(preenc.toString());\n</code></pre>\n"}],"owner":{"account_id":10032083,"reputation":61,"user_id":7418195,"accept_rate":25,"display_name":"Nisbo"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76965395,"answer_count":2,"score":0,"last_activity_date":1692832127,"creation_date":1692744734,"question_id":76957268,"body_markdown":"I try to open Outlook, create a new mail and fill out cc, to, subject and body\r\nSo far, it opens outlook and fill the fields for to and cc.\r\nSubject and body works only, if it contains a single word.\r\nIf there is a space, java will complain about illegal character in URL\r\nI tried to encode the URL but in this case all spaces will be shown with a + in Outlook.\r\nI tried manually to replace the space with %20 but it will show %20 in Outlock.\r\n\r\n\r\n\r\n\t\t\t\tString subject\t= &quot;This is the subject&quot;;// %20\r\n\t\t\t\tString body\t\t= &quot;Dear colleagues this is a&quot;;\r\n\t\t\t\tString to       = &quot;mail1@xxx.com&quot;;\r\n\t\t\t\tString cc\t\t= &quot;mail2@xxx.com;mail3@xxx.com&quot;;\r\n\r\n\t\t        try {\r\n\t\t\t\t\tsubject = URLEncoder.encode(subject, &quot;UTF-8&quot;);\r\n\t\t\t\t\tbody = URLEncoder.encode(body, &quot;UTF-8&quot;);\r\n\t\t\t\t} catch (UnsupportedEncodingException e2) {\r\n\t\t\t\t\t// TODO Auto-generated catch block\r\n\t\t\t\t\te2.printStackTrace();\r\n\t\t\t\t}\r\n\t\t\t        \r\n\t\t\t        \r\n\t            try {\r\n\t\t\t\t\tDesktop.getDesktop().mail( new URI( &quot;mailto:&quot; + to + &quot;?subject=&quot; + subject + &quot;&amp;cc=&quot; + cc + &quot;&amp;body=&quot; + body) );\r\n\t\t\t\t} catch (IOException e1) {\r\n\t\t\t\t\t// TODO Auto-generated catch block\r\n\t\t\t\t\te1.printStackTrace();\r\n\t\t\t\t} catch (URISyntaxException e1) {\r\n\t\t\t\t\t// TODO Auto-generated catch block\r\n\t\t\t\t\te1.printStackTrace();\r\n\t\t\t\t}\r\n\r\n\r\n\r\n\r\nMicrosoft&#174; Outlook&#174; f&#252;r Microsoft 365 MSO (Version 2302 Build 16.0.16130.20684) 64 Bit \r\n\r\nI dont want to send the mail direct with JAVA.","title":"Java open outlook and fill subject and body","body":"<p>I try to open Outlook, create a new mail and fill out cc, to, subject and body\nSo far, it opens outlook and fill the fields for to and cc.\nSubject and body works only, if it contains a single word.\nIf there is a space, java will complain about illegal character in URL\nI tried to encode the URL but in this case all spaces will be shown with a + in Outlook.\nI tried manually to replace the space with %20 but it will show %20 in Outlock.</p>\n<pre><code>            String subject  = &quot;This is the subject&quot;;// %20\n            String body     = &quot;Dear colleagues this is a&quot;;\n            String to       = &quot;mail1@xxx.com&quot;;\n            String cc       = &quot;mail2@xxx.com;mail3@xxx.com&quot;;\n\n            try {\n                subject = URLEncoder.encode(subject, &quot;UTF-8&quot;);\n                body = URLEncoder.encode(body, &quot;UTF-8&quot;);\n            } catch (UnsupportedEncodingException e2) {\n                // TODO Auto-generated catch block\n                e2.printStackTrace();\n            }\n                \n                \n            try {\n                Desktop.getDesktop().mail( new URI( &quot;mailto:&quot; + to + &quot;?subject=&quot; + subject + &quot;&amp;cc=&quot; + cc + &quot;&amp;body=&quot; + body) );\n            } catch (IOException e1) {\n                // TODO Auto-generated catch block\n                e1.printStackTrace();\n            } catch (URISyntaxException e1) {\n                // TODO Auto-generated catch block\n                e1.printStackTrace();\n            }\n</code></pre>\n<p>Microsoft® Outlook® für Microsoft 365 MSO (Version 2302 Build 16.0.16130.20684) 64 Bit</p>\n<p>I dont want to send the mail direct with JAVA.</p>\n"},{"tags":["java","javafx","sprite","game-physics"],"comments":[{"owner":{"account_id":6590934,"reputation":469,"user_id":5092117,"accept_rate":50,"display_name":"TravisF"},"score":0,"creation_date":1487215369,"post_id":42262576,"comment_id":71685591,"body_markdown":"when you call your keyboard commands you are using `object.xPosition` have you tried using `object.setLayoutX = value` , also just to note you have are using functions to try and return a value that you could get without needing to put it in a function, for example `case W:\n                keeper.setyPosition(keeper.getyPosition() - KEYBOARD_MOVEMENT_DELTA);\n                break;`\ncould just be `case W:\n                keeper.setyPosition(keeper.getLayoutY() - KEYBOARD_MOVEMENT_DELTA);\n                break;` no function required.","body":"when you call your keyboard commands you are using <code>object.xPosition</code> have you tried using <code>object.setLayoutX = value</code> , also just to note you have are using functions to try and return a value that you could get without needing to put it in a function, for example <code>case W:                 keeper.setyPosition(keeper.getyPosition() - KEYBOARD_MOVEMENT_DELTA);                 break;</code> could just be <code>case W:                 keeper.setyPosition(keeper.getLayoutY() - KEYBOARD_MOVEMENT_DELTA);                 break;</code> no function required."},{"owner":{"account_id":8557028,"reputation":21,"user_id":6412172,"accept_rate":0,"display_name":"SteveMunroe"},"score":0,"creation_date":1487258863,"post_id":42262576,"comment_id":71712410,"body_markdown":"Thankyou very much for both of the replies by the way, very kind of you. \n\nWhere would you recommend i place the object.setLayoutX = value method?","body":"Thankyou very much for both of the replies by the way, very kind of you.   Where would you recommend i place the object.setLayoutX = value method?"},{"owner":{"account_id":6590934,"reputation":469,"user_id":5092117,"accept_rate":50,"display_name":"TravisF"},"score":0,"creation_date":1487293779,"post_id":42262576,"comment_id":71731668,"body_markdown":"you will need to put them in your level class, as that is where the WarehouseKeeper object is instantized (when it is given a place to go and what Node it needs to be one) it is possible to send the command to another class but to keep it neat your better off just doing it in the same class that it is instantized in, if you read my Answer below, you have it mostly correct you just need to change your keylisteners to use the instantized object in your level Class.","body":"you will need to put them in your level class, as that is where the WarehouseKeeper object is instantized (when it is given a place to go and what Node it needs to be one) it is possible to send the command to another class but to keep it neat your better off just doing it in the same class that it is instantized in, if you read my Answer below, you have it mostly correct you just need to change your keylisteners to use the instantized object in your level Class."},{"owner":{"account_id":8557028,"reputation":21,"user_id":6412172,"accept_rate":0,"display_name":"SteveMunroe"},"score":0,"creation_date":1487367949,"post_id":42262576,"comment_id":71770823,"body_markdown":"Thankyou so much for the help so far, you are the best!\n\nI can&#39;t seem to get it working though, did by any chance get the image to move?","body":"Thankyou so much for the help so far, you are the best!  I can&#39;t seem to get it working though, did by any chance get the image to move?"},{"owner":{"account_id":6590934,"reputation":469,"user_id":5092117,"accept_rate":50,"display_name":"TravisF"},"score":0,"creation_date":1487544145,"post_id":42262576,"comment_id":71819995,"body_markdown":"just double checking your code, you can try parsing the Stage to the moveWareHouse function rather than the scene and put the key listener on the Stage, as that is the global container and that is where it should listen for keypresses. Also be aware it is also good practice to consume the keypress as well using in your case `event.consume();` this will make sure it doesn&#39;t do it doesn&#39;t do anything erratic afterwards. Just for diagnostic purposes, It might be worth putting a `System.out.println(&quot;*direction here* arrow pressed&quot;)` message in there to confirm that it is receiving the event.","body":"just double checking your code, you can try parsing the Stage to the moveWareHouse function rather than the scene and put the key listener on the Stage, as that is the global container and that is where it should listen for keypresses. Also be aware it is also good practice to consume the keypress as well using in your case <code>event.consume();</code> this will make sure it doesn&#39;t do it doesn&#39;t do anything erratic afterwards. Just for diagnostic purposes, It might be worth putting a <code>System.out.println(&quot;*direction here* arrow pressed&quot;)</code> message in there to confirm that it is receiving the event."},{"owner":{"account_id":8557028,"reputation":21,"user_id":6412172,"accept_rate":0,"display_name":"SteveMunroe"},"score":0,"creation_date":1487805924,"post_id":42262576,"comment_id":71955225,"body_markdown":"Thankyou for the advice, added the println on the methods :) \ni had a try and it&#39;s still not working, seems to not like theStage having an event listener on it aswell.","body":"Thankyou for the advice, added the println on the methods :)  i had a try and it&#39;s still not working, seems to not like theStage having an event listener on it aswell."},{"owner":{"account_id":6590934,"reputation":469,"user_id":5092117,"accept_rate":50,"display_name":"TravisF"},"score":0,"creation_date":1487806583,"post_id":42262576,"comment_id":71955510,"body_markdown":"Hi Steve, if you have time I would like to move this to a chat, might be easier.","body":"Hi Steve, if you have time I would like to move this to a chat, might be easier."},{"owner":{"account_id":8557028,"reputation":21,"user_id":6412172,"accept_rate":0,"display_name":"SteveMunroe"},"score":0,"creation_date":1487807301,"post_id":42262576,"comment_id":71955798,"body_markdown":"you&#39;re amazing already. That would be fab. What would be the best way of contacting you?","body":"you&#39;re amazing already. That would be fab. What would be the best way of contacting you?"},{"owner":{"account_id":6590934,"reputation":469,"user_id":5092117,"accept_rate":50,"display_name":"TravisF"},"score":0,"creation_date":1487808024,"post_id":42262576,"comment_id":71956046,"body_markdown":"if we keep chatting it should ask to move this to Chat.","body":"if we keep chatting it should ask to move this to Chat."},{"owner":{"account_id":6590934,"reputation":469,"user_id":5092117,"accept_rate":50,"display_name":"TravisF"},"score":0,"creation_date":1487808085,"post_id":42262576,"comment_id":71956083,"body_markdown":"nevermind, join this chat and we can talk there. http://chat.stackoverflow.com/rooms/135908/discussion-between-travisf-and-mouseevent","body":"nevermind, join this chat and we can talk there. <a href=\"http://chat.stackoverflow.com/rooms/135908/discussion-between-travisf-and-mouseevent\">chat.stackoverflow.com/rooms/135908/&hellip;</a>"},{"owner":{"account_id":8557028,"reputation":21,"user_id":6412172,"accept_rate":0,"display_name":"SteveMunroe"},"score":0,"creation_date":1487812265,"post_id":42262576,"comment_id":71957319,"body_markdown":"hey Travis apparently i can&#39;t use the chatroom due to my reputation","body":"hey Travis apparently i can&#39;t use the chatroom due to my reputation"},{"owner":{"account_id":6590934,"reputation":469,"user_id":5092117,"accept_rate":50,"display_name":"TravisF"},"score":0,"creation_date":1487814491,"post_id":42262576,"comment_id":71958034,"body_markdown":"Ok, does your function still look like this `private static void moveWareHouse(Scene scene, final WarehouseKeeper keeper) {` or does it look like `private static void moveWareHouse(Stage theStage, final WarehouseKeeper keeper) {` and the function caller should look like this `moveWareHouse(theStage, createKeeper());` rather than `moveWareHouse(scene, createKeeper());` the other issue is you are asking for the code `switch (event.getCode()) {` this returns a hexadecimal version of the key that was pressed but you are using switches for the physical character.","body":"Ok, does your function still look like this <code>private static void moveWareHouse(Scene scene, final WarehouseKeeper keeper) {</code> or does it look like <code>private static void moveWareHouse(Stage theStage, final WarehouseKeeper keeper) {</code> and the function caller should look like this <code>moveWareHouse(theStage, createKeeper());</code> rather than <code>moveWareHouse(scene, createKeeper());</code> the other issue is you are asking for the code <code>switch (event.getCode()) {</code> this returns a hexadecimal version of the key that was pressed but you are using switches for the physical character."},{"owner":{"account_id":6590934,"reputation":469,"user_id":5092117,"accept_rate":50,"display_name":"TravisF"},"score":0,"creation_date":1487814603,"post_id":42262576,"comment_id":71958066,"body_markdown":"what you want is `switch (event.getCharacter()) {`","body":"what you want is <code>switch (event.getCharacter()) {</code>"},{"owner":{"account_id":8557028,"reputation":21,"user_id":6412172,"accept_rate":0,"display_name":"SteveMunroe"},"score":0,"creation_date":1487817358,"post_id":42262576,"comment_id":71958804,"body_markdown":"It is giving me an error \n&quot;The method setOnKeyPressed(new EventHandler&lt;KeyEvent&gt;(){}) is undefined for the type Stage&quot; \n\nand the cases cannot be resolved to a variable\n&quot;W cannot be resolved to a variable&quot;","body":"It is giving me an error  &quot;The method setOnKeyPressed(new EventHandler&lt;KeyEvent&gt;(){}) is undefined for the type Stage&quot;   and the cases cannot be resolved to a variable &quot;W cannot be resolved to a variable&quot;"},{"owner":{"account_id":6590934,"reputation":469,"user_id":5092117,"accept_rate":50,"display_name":"TravisF"},"score":0,"creation_date":1487819962,"post_id":42262576,"comment_id":71959513,"body_markdown":"I presume you update `scene.setOnKeyPressed(new EventHandler&lt;KeyEvent&gt;() {` to `theStage.setOnKeyPressed(new EventHandler&lt;KeyEvent&gt;() {`","body":"I presume you update <code>scene.setOnKeyPressed(new EventHandler&lt;KeyEvent&gt;() {</code> to <code>theStage.setOnKeyPressed(new EventHandler&lt;KeyEvent&gt;() {</code>"},{"owner":{"account_id":6590934,"reputation":469,"user_id":5092117,"accept_rate":50,"display_name":"TravisF"},"score":0,"creation_date":1487820068,"post_id":42262576,"comment_id":71959548,"body_markdown":"alright, try `theStage.addEventFilter(KeyEvent.KEY_RELEASED, event -&gt; {\n            event.consume();\n            /* put switch event here */\n        });`\nThe reason is because the stage does not have a function defined for it for `onKeyPress` but you can define one by filtering the event.","body":"alright, try <code>theStage.addEventFilter(KeyEvent.KEY_RELEASED, event -&gt; {             event.consume();             &#47;* put switch event here *&#47;         });</code> The reason is because the stage does not have a function defined for it for <code>onKeyPress</code> but you can define one by filtering the event."},{"owner":{"account_id":8557028,"reputation":21,"user_id":6412172,"accept_rate":0,"display_name":"SteveMunroe"},"score":0,"creation_date":1487855775,"post_id":42262576,"comment_id":71978906,"body_markdown":"Thankyou again for the reply. It is compiling now, my problem now however is getting the keeper to show on the grid so the movement can work as i noticed i was only add the image to the GridPane and not the keeper.But apparently that seems to be fairly difficult.","body":"Thankyou again for the reply. It is compiling now, my problem now however is getting the keeper to show on the grid so the movement can work as i noticed i was only add the image to the GridPane and not the keeper.But apparently that seems to be fairly difficult."},{"owner":{"account_id":6590934,"reputation":469,"user_id":5092117,"accept_rate":50,"display_name":"TravisF"},"score":0,"creation_date":1487892824,"post_id":42262576,"comment_id":72001889,"body_markdown":"Yup, I think you may be over complicating that issue, in your public WarehouseKeeper class, you have a public function called WarehouseKeeper (I would recommend changing that function name) I would recommend building the entire object that you would like the main class (level1) to have an control, then in level1 you can call and create a warehouseKeeper through `final WarehouseKeeper wHK = new WarehouseKeeper.warehouseKeeper();` then parse that wHK to the keyEvent handler rather than it making one.","body":"Yup, I think you may be over complicating that issue, in your public WarehouseKeeper class, you have a public function called WarehouseKeeper (I would recommend changing that function name) I would recommend building the entire object that you would like the main class (level1) to have an control, then in level1 you can call and create a warehouseKeeper through <code>final WarehouseKeeper wHK = new WarehouseKeeper.warehouseKeeper();</code> then parse that wHK to the keyEvent handler rather than it making one."},{"owner":{"account_id":6590934,"reputation":469,"user_id":5092117,"accept_rate":50,"display_name":"TravisF"},"score":0,"creation_date":1487893194,"post_id":42262576,"comment_id":72002011,"body_markdown":"so the warehouseKeeper function in the WarehouseKeeper class could return a group that is complete with image and everything that it needs, to build the keeper, instead of using `final WarehouseKeeper` you would use `final Group wHK = new WarehouseKeeper.warehouseKeeper();` then you can add that group to your level1 root (which I would also recommend is not a group it should be some sort of Pane a StackPane should suffice for your case) this way you can parse the x and y pos directly to the new object from the key events.","body":"so the warehouseKeeper function in the WarehouseKeeper class could return a group that is complete with image and everything that it needs, to build the keeper, instead of using <code>final WarehouseKeeper</code> you would use <code>final Group wHK = new WarehouseKeeper.warehouseKeeper();</code> then you can add that group to your level1 root (which I would also recommend is not a group it should be some sort of Pane a StackPane should suffice for your case) this way you can parse the x and y pos directly to the new object from the key events."},{"owner":{"account_id":6590934,"reputation":469,"user_id":5092117,"accept_rate":50,"display_name":"TravisF"},"score":0,"creation_date":1487894158,"post_id":42262576,"comment_id":72002338,"body_markdown":"just in case that is a bit convoluted something like:\n\n`public Group warehouseKeeper(ImageView warehouseImage) {\nGroup tempGroup;\n/* create entire keeper image here and add to tempGroup here */\nreturn tempGroup;\n}`\n\nand in level1\n`final Group wHK = WarehouseKeeper.warehouseKeeper();\nroot.getChildren().add(wHK);\nmoveWarehouse(theStage,wHK);`\n\nand on the moveWarehouse: `protected moveWarehouse(Stage stage, Group wHK) { /* put the rest of your current code for movement here /* }`","body":"just in case that is a bit convoluted something like:  <code>public Group warehouseKeeper(ImageView warehouseImage) { Group tempGroup; &#47;* create entire keeper image here and add to tempGroup here *&#47; return tempGroup; }</code>  and in level1 <code>final Group wHK = WarehouseKeeper.warehouseKeeper(); root.getChildren().add(wHK); moveWarehouse(theStage,wHK);</code>  and on the moveWarehouse: <code>protected moveWarehouse(Stage stage, Group wHK) { &#47;* put the rest of your current code for movement here &#47;* }</code>"}],"answers":[{"tags":[],"owner":{"account_id":6590934,"reputation":469,"user_id":5092117,"accept_rate":50,"display_name":"TravisF"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1487895620,"creation_date":1487216416,"answer_id":42264433,"question_id":42262576,"body_markdown":"The problem may be with your understanding of how the object orientated JavaFX works, the object may be created by the WareHouseKeeper and ImageLoader class, but the object was instantized on the level class, meaning if you instantized the object on the level class it has to be moved within the level class. For example what you have is \r\n\r\n        private static void moveWareHouse(Scene scene, final WarehouseKeeper keeper) {\r\n\r\n    scene.setOnKeyPressed(new EventHandler&lt;KeyEvent&gt;() {\r\n\r\n        @Override\r\n        public void handle(KeyEvent event) {\r\n\r\n            switch (event.getCode()) {\r\n\r\n            case W:\r\n                keeper.setyPosition(keeper.getyPosition() - KEYBOARD_MOVEMENT_DELTA);\r\n                break;\r\n            case D:\r\n                keeper.setxPosition(keeper.getxPosition() + KEYBOARD_MOVEMENT_DELTA);\r\n                break;\r\n            case A:\r\n                keeper.setyPosition(keeper.getyPosition() + KEYBOARD_MOVEMENT_DELTA);\r\n                break;\r\n            case S:\r\n                keeper.setxPosition(keeper.getxPosition() - KEYBOARD_MOVEMENT_DELTA);\r\n                break;\r\n            }\r\n        }\r\n    });\r\n    }\r\n\r\nAs the object has been passed to the function you would only need to move it directly from within the level class and not from the other Classes, so this would be changed to\r\n\r\n        private static void moveWareHouse(Stage theStage, Group wHK) {\r\n\r\n            theStage.addEventFilter(KeyEvent.KEY_RELEASED, e -&gt; {\r\n            e.consume();\r\n\r\n            switch (e.getCharacter()) {\r\n\r\n            case W:\r\n                keeper.setLayoutY(keeper.getLayoutY() - KEYBOARD_MOVEMENT_DELTA);\r\n                break;\r\n            case D:\r\n                keeper.setLayoutX(keeper.getLayoutX() + KEYBOARD_MOVEMENT_DELTA);\r\n                break;\r\n            case A:\r\n                keeper.setLayoutY(keeper.getLayoutY() + KEYBOARD_MOVEMENT_DELTA);\r\n                break;\r\n            case S:\r\n                keeper.setLayoutX(keeper.getLayoutX() - KEYBOARD_MOVEMENT_DELTA);\r\n                break;\r\n            }\r\n        });\r\n    }\r\n\r\n**EDIT**\r\nI also noticed you have the Scene parsed as the key listener this would require you to click on the scene (to give it focus) before it will listen to the keys, if you set the stage as the key listener no matter where you click it will always be the root focus and always listening for keys.\r\n\r\n**EDITED FURTHER**\r\nAs I mentioned in our conversation up the top, your better off creating the entirety of the WarehouseKeeper in your WarehouseKeeper class and instantizing it into your main class (level1) this way the control of the object is within the level1 but level1 does not have all the code to create it (so if you need to modify the creation of it later or use it again you can call more of them by just creating a new instance of it and adding it to the scene) for example.\r\n\r\n    public final Group warehouseKeeper(ImageView image) {\r\n        Group tempGroup;\r\n        /* insert necessary code here to add image to group and anything else you want in the group */\r\n        return tempGroup;\r\n    }\r\n\r\nThen you can instantize it to level1 by just calling \r\n\r\n    final Group wHK = new WarehouseKeeper.warehouseKeeper();\r\n    wHK.setLayoutX(/*some init val */);\r\n    wHK.setLayoutY(/*some init val */);\r\n    root.getChildren().add(wHK);\r\n\r\n ","title":"JavaFx moving images","body":"<p>The problem may be with your understanding of how the object orientated JavaFX works, the object may be created by the WareHouseKeeper and ImageLoader class, but the object was instantized on the level class, meaning if you instantized the object on the level class it has to be moved within the level class. For example what you have is </p>\n\n<pre><code>    private static void moveWareHouse(Scene scene, final WarehouseKeeper keeper) {\n\nscene.setOnKeyPressed(new EventHandler&lt;KeyEvent&gt;() {\n\n    @Override\n    public void handle(KeyEvent event) {\n\n        switch (event.getCode()) {\n\n        case W:\n            keeper.setyPosition(keeper.getyPosition() - KEYBOARD_MOVEMENT_DELTA);\n            break;\n        case D:\n            keeper.setxPosition(keeper.getxPosition() + KEYBOARD_MOVEMENT_DELTA);\n            break;\n        case A:\n            keeper.setyPosition(keeper.getyPosition() + KEYBOARD_MOVEMENT_DELTA);\n            break;\n        case S:\n            keeper.setxPosition(keeper.getxPosition() - KEYBOARD_MOVEMENT_DELTA);\n            break;\n        }\n    }\n});\n}\n</code></pre>\n\n<p>As the object has been passed to the function you would only need to move it directly from within the level class and not from the other Classes, so this would be changed to</p>\n\n<pre><code>    private static void moveWareHouse(Stage theStage, Group wHK) {\n\n        theStage.addEventFilter(KeyEvent.KEY_RELEASED, e -&gt; {\n        e.consume();\n\n        switch (e.getCharacter()) {\n\n        case W:\n            keeper.setLayoutY(keeper.getLayoutY() - KEYBOARD_MOVEMENT_DELTA);\n            break;\n        case D:\n            keeper.setLayoutX(keeper.getLayoutX() + KEYBOARD_MOVEMENT_DELTA);\n            break;\n        case A:\n            keeper.setLayoutY(keeper.getLayoutY() + KEYBOARD_MOVEMENT_DELTA);\n            break;\n        case S:\n            keeper.setLayoutX(keeper.getLayoutX() - KEYBOARD_MOVEMENT_DELTA);\n            break;\n        }\n    });\n}\n</code></pre>\n\n<p><strong>EDIT</strong>\nI also noticed you have the Scene parsed as the key listener this would require you to click on the scene (to give it focus) before it will listen to the keys, if you set the stage as the key listener no matter where you click it will always be the root focus and always listening for keys.</p>\n\n<p><strong>EDITED FURTHER</strong>\nAs I mentioned in our conversation up the top, your better off creating the entirety of the WarehouseKeeper in your WarehouseKeeper class and instantizing it into your main class (level1) this way the control of the object is within the level1 but level1 does not have all the code to create it (so if you need to modify the creation of it later or use it again you can call more of them by just creating a new instance of it and adding it to the scene) for example.</p>\n\n<pre><code>public final Group warehouseKeeper(ImageView image) {\n    Group tempGroup;\n    /* insert necessary code here to add image to group and anything else you want in the group */\n    return tempGroup;\n}\n</code></pre>\n\n<p>Then you can instantize it to level1 by just calling </p>\n\n<pre><code>final Group wHK = new WarehouseKeeper.warehouseKeeper();\nwHK.setLayoutX(/*some init val */);\nwHK.setLayoutY(/*some init val */);\nroot.getChildren().add(wHK);\n</code></pre>\n"}],"owner":{"account_id":8557028,"reputation":21,"user_id":6412172,"accept_rate":0,"display_name":"SteveMunroe"},"comment_count":20,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8823,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692832095,"creation_date":1487204420,"question_id":42262576,"body_markdown":"Hello all so I&#39;m creating a simple 2D game and so far I&#39;ve had a bit of a nightmare trying to get things to communicate with each other. So far I have a &#39;main menu&#39;, &#39;game grid&#39; and a image showing on the grid. I&#39;m now tackling the movement off it but I can&#39;t seem to get it working. \r\n\r\n`application.package`\r\n\r\n`Level.class`\r\n\r\n    package application;\r\n\r\n    import javafx.event.EventHandler;\r\n    import javafx.geometry.Pos;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.layout.ColumnConstraints;\r\n    import javafx.scene.layout.GridPane;\r\n    import javafx.scene.layout.RowConstraints;\r\n    import javafx.scene.paint.Color;\r\n    import javafx.stage.Stage;\r\n    import javafx.scene.layout.HBox;\r\n    import javafx.scene.Group;\r\n    import javafx.scene.image.ImageView;\r\n    import javafx.scene.input.KeyEvent;\r\n    import javafx.scene.image.Image;\r\n\r\n    public class Level {\r\n\r\n\t// private static Array[] level1;\r\n\t// private WarehouseKeeper warehouse;\r\n\tprivate static ImageView image1 = ImageLoader.showWareHouseImage();\r\n\tprivate static final int KEYBOARD_MOVEMENT_DELTA = 2;\r\n\r\n\tpublic static void runLevel1(Stage theStage) {\r\n\r\n\t\t// ImageView image = new ImageView((Element)\r\n\t\t// ImageLoader.wareHouseImage);\r\n\r\n\t\t// WarehouseKeeper warehouse = new\r\n\t\t// WarehouseKeeper(ImageLoader.wareHouseImage);\r\n\r\n\t\tGroup root = new Group();\r\n\r\n\t\tint columnAmount = 12;\r\n\t\tint rowAmount = 12;\r\n\r\n\t\tGridPane gameGrid = new GridPane();\r\n\r\n\t\tfor (int i = 0; i &lt; columnAmount; i++) {\r\n\t\t\tColumnConstraints columnn = new ColumnConstraints(45);\r\n\t\t\tgameGrid.getColumnConstraints().add(columnn);\r\n\t\t}\r\n\r\n\t\tfor (int i = 0; i &lt; rowAmount; i++) {\r\n\r\n\t\t\tRowConstraints row = new RowConstraints(45);\r\n\t\t\tgameGrid.getRowConstraints().add(row);\r\n\t\t}\r\n\r\n\t\tgameGrid.setStyle(&quot;-fx-background-color: white; -fx-grid-lines-visible:true&quot;);\r\n\t\tScene scene = new Scene(root, (columnAmount * 40) + 66, (rowAmount * 40) + 66, Color.WHITE);\r\n\r\n\t\timage(root, gameGrid);\r\n\r\n\t\tmoveWareHouse(scene, createKeeper());\r\n\r\n\t\ttheStage.setScene(scene);\r\n\r\n\t\ttheStage.show();\r\n\r\n\t}\r\n\r\n\tprivate static void image(Group root, GridPane gameGrid) {\r\n\r\n\t\t// ImageLoader.wareHouseImage;\r\n\r\n\t\t/*\r\n\t\t * ImageView wareHouse = new ImageView(); wareHouse.setFitHeight(45);\r\n\t\t * wareHouse.setFitWidth(45);\r\n\t\t * \r\n\t\t * Image image1 = ImageLoader.showWareHouseImage();\r\n\t\t * wareHouse.setImage(image1);\r\n\t\t */\r\n\r\n\t\tImageView image1 = ImageLoader.showWareHouseImage();\r\n\r\n\t\tfinal HBox picture = new HBox();\r\n\t\tpicture.getChildren().add(image1);\r\n\r\n\t\tgameGrid.setAlignment(Pos.CENTER);\r\n\r\n\t\t// gameGrid.getChildren().add(wareHouse);\r\n\t\tgameGrid.add(picture, 7, 9);\r\n\r\n\t\troot.getChildren().add(gameGrid);\r\n\r\n\t}\r\n\r\n\tprivate static WarehouseKeeper createKeeper() {\r\n\r\n\t\tfinal WarehouseKeeper keeper = new WarehouseKeeper(image1);\r\n\r\n\t\treturn keeper;\r\n\t}\r\n\r\n\tprivate static void moveWareHouse(Scene scene, final WarehouseKeeper keeper) {\r\n\r\n\t\tscene.setOnKeyPressed(new EventHandler&lt;KeyEvent&gt;() {\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void handle(KeyEvent event) {\r\n\r\n\t\t\t\tswitch (event.getCode()) {\r\n\r\n\t\t\t\tcase W:\r\n\t\t\t\t\tkeeper.setyPosition(keeper.getyPosition() - KEYBOARD_MOVEMENT_DELTA);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase D:\r\n\t\t\t\t\tkeeper.setxPosition(keeper.getxPosition() + KEYBOARD_MOVEMENT_DELTA);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase A:\r\n\t\t\t\t\tkeeper.setyPosition(keeper.getyPosition() + KEYBOARD_MOVEMENT_DELTA);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase S:\r\n\t\t\t\t\tkeeper.setxPosition(keeper.getxPosition() - KEYBOARD_MOVEMENT_DELTA);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t   }\r\n    }\r\n    \r\n`WarehouseKeeper.class` extends ImageLoader.\r\n\r\n    package application;\r\n\r\n    import javafx.scene.image.ImageView;\r\n\r\n    import javafx.scene.image.Image;\r\n    import javafx.scene.input.KeyEvent;\r\n\r\n    public class WarehouseKeeper extends ImageLoader {\r\n\r\n\tprivate Image playerImage;\r\n\tprivate ImageView image;\r\n\tprivate int speed;\r\n\tprivate double xPosition;\r\n\tprivate double yPosition;\r\n\r\n\tpublic WarehouseKeeper(ImageView wareHouseImage) {\r\n\r\n\t\tsuper(wareHouseImage);\r\n\r\n\t\tthis.speed = speed;\r\n\t\tthis.xPosition = xPosition;\r\n\t\tthis.yPosition = yPosition;\r\n\t\tthis.wareHouseImage.relocate(xPosition, yPosition);\r\n\r\n\t}\r\n\r\n\tpublic void updateUI() {\r\n\r\n\t\twareHouseImage.relocate(xPosition, yPosition);\r\n\r\n\t}\r\n\r\n\tpublic double getCenterX() {\r\n\r\n\t\treturn xPosition * 0.5;\r\n\r\n\t}\r\n\r\n\tpublic double getCenterY() {\r\n\r\n\t\treturn yPosition * 0.5;\r\n\r\n\t}\r\n\r\n\tpublic int getSpeed() {\r\n\t\treturn speed;\r\n\t}\r\n\r\n\tpublic void setSpeed(int speed) {\r\n\t\tthis.speed = speed;\r\n\t}\r\n\r\n\tpublic double getxPosition() {\r\n\t\treturn xPosition;\r\n\t}\r\n\r\n\t// one of the ideas i had\r\n\tpublic void setxPosition(double xPosition) {\r\n\t\tthis.xPosition = xPosition.setTranslateX(1.0);\r\n\t}\r\n\r\n\tpublic double getyPosition() {\r\n\t\treturn yPosition;\r\n\t}\r\n\r\n\tpublic void setyPosition(double d) {\r\n\t\tthis.yPosition = d + 1.0;\r\n\t}\r\n\r\n\tpublic void setTranslateY(double yPosition) {\r\n\t\t// TODO Auto-generated method stub\r\n\r\n\t\tyPosition = yPosition + 2.0;\r\n\r\n\t  }\r\n    }\r\n\r\n\r\n`ImageLoader.class`\r\n\r\n    package application;\r\n\r\n    import javafx.scene.image.Image;\r\n    import javafx.scene.image.ImageView;\r\n\r\n    public class ImageLoader {\r\n\r\n\tprotected ImageView wareHouseImage;\r\n\tprivate Object diamondImage;\r\n\tprivate Object wallImage;\r\n\tprivate Object mapImage;\r\n\tprivate Object crateImage;\r\n\r\n\tpublic ImageLoader(ImageView wareHouseImage) {\r\n\r\n\t\tthis.wareHouseImage = showWareHouseImage();\r\n\r\n\t}\r\n\r\n\tpublic ImageView getWareHouseImage() {\r\n\t\treturn wareHouseImage;\r\n\t}\r\n\r\n\tpublic void setWareHouseImage(Image wareHouseImage) {\r\n\t\tthis.wareHouseImage = showWareHouseImage();\r\n\t}\r\n\r\n\tpublic static ImageView showWareHouseImage() {\r\n\r\n\t\tImageView wareHouse = new ImageView();\r\n\t\twareHouse.setFitHeight(45);\r\n\t\twareHouse.setFitWidth(45);\r\n\r\n\t\tImage wareHouseImage = new Image(&quot;application/warehouse.png&quot;);\r\n\t\twareHouse.setImage(wareHouseImage);\r\n\r\n\t\treturn wareHouse;\r\n\r\n\t}\r\n\r\n\tpublic Object getDiamondImage() {\r\n\r\n\t\treturn diamondImage;\r\n\r\n\t}\r\n\r\n\tpublic void setDiamondImage(Object diamondImage) {\r\n\r\n\t\tthis.diamondImage = diamondImage;\r\n\r\n\t}\r\n\r\n\tpublic Object getWallImage() {\r\n\r\n\t\treturn wallImage;\r\n\r\n\t}\r\n\r\n\tpublic void setWallImage(Object wallImage) {\r\n\r\n\t\tthis.wallImage = wallImage;\r\n\r\n\t}\r\n\r\n\tpublic Object getMapImage() {\r\n\r\n\t\treturn mapImage;\r\n\r\n\t}\r\n\r\n\tpublic void setMapImage(Object mapImage) {\r\n\r\n\t\tthis.mapImage = mapImage;\r\n\r\n\t}\r\n\r\n\tpublic Object getCrateImage() {\r\n\r\n\t\treturn crateImage;\r\n\r\n\t}\r\n\r\n\tpublic void setCrateImage(Object crateImage) {\r\n\r\n\t\tthis.crateImage = crateImage;\r\n\r\n    \t}\r\n    }\r\n\r\n\r\n","title":"JavaFx moving images","body":"<p>Hello all so I'm creating a simple 2D game and so far I've had a bit of a nightmare trying to get things to communicate with each other. So far I have a 'main menu', 'game grid' and a image showing on the grid. I'm now tackling the movement off it but I can't seem to get it working.</p>\n<p><code>application.package</code></p>\n<p><code>Level.class</code></p>\n<pre><code>package application;\n\nimport javafx.event.EventHandler;\nimport javafx.geometry.Pos;\nimport javafx.scene.Scene;\nimport javafx.scene.layout.ColumnConstraints;\nimport javafx.scene.layout.GridPane;\nimport javafx.scene.layout.RowConstraints;\nimport javafx.scene.paint.Color;\nimport javafx.stage.Stage;\nimport javafx.scene.layout.HBox;\nimport javafx.scene.Group;\nimport javafx.scene.image.ImageView;\nimport javafx.scene.input.KeyEvent;\nimport javafx.scene.image.Image;\n\npublic class Level {\n\n// private static Array[] level1;\n// private WarehouseKeeper warehouse;\nprivate static ImageView image1 = ImageLoader.showWareHouseImage();\nprivate static final int KEYBOARD_MOVEMENT_DELTA = 2;\n\npublic static void runLevel1(Stage theStage) {\n\n    // ImageView image = new ImageView((Element)\n    // ImageLoader.wareHouseImage);\n\n    // WarehouseKeeper warehouse = new\n    // WarehouseKeeper(ImageLoader.wareHouseImage);\n\n    Group root = new Group();\n\n    int columnAmount = 12;\n    int rowAmount = 12;\n\n    GridPane gameGrid = new GridPane();\n\n    for (int i = 0; i &lt; columnAmount; i++) {\n        ColumnConstraints columnn = new ColumnConstraints(45);\n        gameGrid.getColumnConstraints().add(columnn);\n    }\n\n    for (int i = 0; i &lt; rowAmount; i++) {\n\n        RowConstraints row = new RowConstraints(45);\n        gameGrid.getRowConstraints().add(row);\n    }\n\n    gameGrid.setStyle(&quot;-fx-background-color: white; -fx-grid-lines-visible:true&quot;);\n    Scene scene = new Scene(root, (columnAmount * 40) + 66, (rowAmount * 40) + 66, Color.WHITE);\n\n    image(root, gameGrid);\n\n    moveWareHouse(scene, createKeeper());\n\n    theStage.setScene(scene);\n\n    theStage.show();\n\n}\n\nprivate static void image(Group root, GridPane gameGrid) {\n\n    // ImageLoader.wareHouseImage;\n\n    /*\n     * ImageView wareHouse = new ImageView(); wareHouse.setFitHeight(45);\n     * wareHouse.setFitWidth(45);\n     * \n     * Image image1 = ImageLoader.showWareHouseImage();\n     * wareHouse.setImage(image1);\n     */\n\n    ImageView image1 = ImageLoader.showWareHouseImage();\n\n    final HBox picture = new HBox();\n    picture.getChildren().add(image1);\n\n    gameGrid.setAlignment(Pos.CENTER);\n\n    // gameGrid.getChildren().add(wareHouse);\n    gameGrid.add(picture, 7, 9);\n\n    root.getChildren().add(gameGrid);\n\n}\n\nprivate static WarehouseKeeper createKeeper() {\n\n    final WarehouseKeeper keeper = new WarehouseKeeper(image1);\n\n    return keeper;\n}\n\nprivate static void moveWareHouse(Scene scene, final WarehouseKeeper keeper) {\n\n    scene.setOnKeyPressed(new EventHandler&lt;KeyEvent&gt;() {\n\n        @Override\n        public void handle(KeyEvent event) {\n\n            switch (event.getCode()) {\n\n            case W:\n                keeper.setyPosition(keeper.getyPosition() - KEYBOARD_MOVEMENT_DELTA);\n                break;\n            case D:\n                keeper.setxPosition(keeper.getxPosition() + KEYBOARD_MOVEMENT_DELTA);\n                break;\n            case A:\n                keeper.setyPosition(keeper.getyPosition() + KEYBOARD_MOVEMENT_DELTA);\n                break;\n            case S:\n                keeper.setxPosition(keeper.getxPosition() - KEYBOARD_MOVEMENT_DELTA);\n                break;\n            }\n        }\n    });\n   }\n}\n</code></pre>\n<p><code>WarehouseKeeper.class</code> extends ImageLoader.</p>\n<pre><code>package application;\n\nimport javafx.scene.image.ImageView;\n\nimport javafx.scene.image.Image;\nimport javafx.scene.input.KeyEvent;\n\npublic class WarehouseKeeper extends ImageLoader {\n\nprivate Image playerImage;\nprivate ImageView image;\nprivate int speed;\nprivate double xPosition;\nprivate double yPosition;\n\npublic WarehouseKeeper(ImageView wareHouseImage) {\n\n    super(wareHouseImage);\n\n    this.speed = speed;\n    this.xPosition = xPosition;\n    this.yPosition = yPosition;\n    this.wareHouseImage.relocate(xPosition, yPosition);\n\n}\n\npublic void updateUI() {\n\n    wareHouseImage.relocate(xPosition, yPosition);\n\n}\n\npublic double getCenterX() {\n\n    return xPosition * 0.5;\n\n}\n\npublic double getCenterY() {\n\n    return yPosition * 0.5;\n\n}\n\npublic int getSpeed() {\n    return speed;\n}\n\npublic void setSpeed(int speed) {\n    this.speed = speed;\n}\n\npublic double getxPosition() {\n    return xPosition;\n}\n\n// one of the ideas i had\npublic void setxPosition(double xPosition) {\n    this.xPosition = xPosition.setTranslateX(1.0);\n}\n\npublic double getyPosition() {\n    return yPosition;\n}\n\npublic void setyPosition(double d) {\n    this.yPosition = d + 1.0;\n}\n\npublic void setTranslateY(double yPosition) {\n    // TODO Auto-generated method stub\n\n    yPosition = yPosition + 2.0;\n\n  }\n}\n</code></pre>\n<p><code>ImageLoader.class</code></p>\n<pre><code>package application;\n\nimport javafx.scene.image.Image;\nimport javafx.scene.image.ImageView;\n\npublic class ImageLoader {\n\nprotected ImageView wareHouseImage;\nprivate Object diamondImage;\nprivate Object wallImage;\nprivate Object mapImage;\nprivate Object crateImage;\n\npublic ImageLoader(ImageView wareHouseImage) {\n\n    this.wareHouseImage = showWareHouseImage();\n\n}\n\npublic ImageView getWareHouseImage() {\n    return wareHouseImage;\n}\n\npublic void setWareHouseImage(Image wareHouseImage) {\n    this.wareHouseImage = showWareHouseImage();\n}\n\npublic static ImageView showWareHouseImage() {\n\n    ImageView wareHouse = new ImageView();\n    wareHouse.setFitHeight(45);\n    wareHouse.setFitWidth(45);\n\n    Image wareHouseImage = new Image(&quot;application/warehouse.png&quot;);\n    wareHouse.setImage(wareHouseImage);\n\n    return wareHouse;\n\n}\n\npublic Object getDiamondImage() {\n\n    return diamondImage;\n\n}\n\npublic void setDiamondImage(Object diamondImage) {\n\n    this.diamondImage = diamondImage;\n\n}\n\npublic Object getWallImage() {\n\n    return wallImage;\n\n}\n\npublic void setWallImage(Object wallImage) {\n\n    this.wallImage = wallImage;\n\n}\n\npublic Object getMapImage() {\n\n    return mapImage;\n\n}\n\npublic void setMapImage(Object mapImage) {\n\n    this.mapImage = mapImage;\n\n}\n\npublic Object getCrateImage() {\n\n    return crateImage;\n\n}\n\npublic void setCrateImage(Object crateImage) {\n\n    this.crateImage = crateImage;\n\n    }\n}\n</code></pre>\n"},{"tags":["java","android","android-wifi","wifimanager"],"owner":{"account_id":22958037,"reputation":16,"user_id":20718499,"display_name":"Mohamed Lotfi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692831469,"creation_date":1692831469,"question_id":76965350,"body_markdown":"I building a product where we use a board running android 9. One of the programs I am building has to connect to a specific wifi device without user interactions. Most of the time it connects with no problem, but sometimes it refuses to connects whatsoever. Here is the code I use: \r\n\r\n```\r\npublic static boolean connectToWifiNetwork(String networkSSID, String networkPassword) {\r\n\r\n        if (networkSSID == null || networkSSID.equals(&quot;&quot;)) return false;\r\n        Log.v(TAG, &quot;connected name: &quot; + getConnectedWifiName());\r\n        if(getConnectedWifiName() != null &amp;&amp; getConnectedWifiName().equals(networkSSID))return true;\r\n\r\n        WifiConfiguration conf = new WifiConfiguration();\r\n        conf.SSID = &quot;\\&quot;&quot; + networkSSID + &quot;\\&quot;&quot;;   // Please note the quotes. String should contain ssid in quotes\r\n\r\n        conf.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.NONE);\r\n        conf.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.NONE);\r\n        conf.allowedProtocols.set(WifiConfiguration.Protocol.RSN);\r\n        conf.allowedProtocols.set(WifiConfiguration.Protocol.WPA);\r\n        conf.allowedAuthAlgorithms.clear();\r\n        conf.allowedPairwiseCiphers.set(WifiConfiguration.PairwiseCipher.CCMP);\r\n        conf.allowedPairwiseCiphers.set(WifiConfiguration.PairwiseCipher.TKIP);\r\n        conf.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.WEP40);\r\n        conf.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.WEP104);\r\n        conf.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.CCMP);\r\n        conf.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.TKIP);\r\n        conf.priority = 400000; //4000;\r\n        wifiManager.addNetwork(conf);\r\n\r\n        List&lt;WifiConfiguration&gt; list = wifiManager.getConfiguredNetworks();\r\n\r\n        for (WifiConfiguration i : list) {\r\n\r\n            if (i.SSID != null &amp;&amp; i.SSID.equals(&quot;\\&quot;&quot; + networkSSID + &quot;\\&quot;&quot;)) {\r\n                wifiManager.disconnect();\r\n                wifiManager.enableNetwork(i.networkId, true);\r\n\r\n                Log.v(TAG, &quot;Trying to connect&quot;);\r\n               wifiManager.reconnect();\r\n                wifiManager.reassociate();\r\n                wifiManager.reconnect();\r\n                wifiManager.reassociate();\r\n               try {\r\n                    Thread.sleep(2000);\r\n                } catch (InterruptedException e) {\r\n                    throw new RuntimeException(e);\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n\r\n        if (checkWifiConnection().equals(WifiState.CONNECTED)) return true;\r\n\r\n        return false;\r\n```\r\n\r\nIt is worth noting that this wifi device is open (meaning no password). Also, I can connect to that device using my personal phone with no problems. \r\n\r\nAny ideas how to solve this issue?\r\n\r\n\r\nI tried to change the way I connect to the wifi device, but nothing changed. ","title":"Connection to Wifi network programatically","body":"<p>I building a product where we use a board running android 9. One of the programs I am building has to connect to a specific wifi device without user interactions. Most of the time it connects with no problem, but sometimes it refuses to connects whatsoever. Here is the code I use:</p>\n<pre><code>public static boolean connectToWifiNetwork(String networkSSID, String networkPassword) {\n\n        if (networkSSID == null || networkSSID.equals(&quot;&quot;)) return false;\n        Log.v(TAG, &quot;connected name: &quot; + getConnectedWifiName());\n        if(getConnectedWifiName() != null &amp;&amp; getConnectedWifiName().equals(networkSSID))return true;\n\n        WifiConfiguration conf = new WifiConfiguration();\n        conf.SSID = &quot;\\&quot;&quot; + networkSSID + &quot;\\&quot;&quot;;   // Please note the quotes. String should contain ssid in quotes\n\n        conf.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.NONE);\n        conf.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.NONE);\n        conf.allowedProtocols.set(WifiConfiguration.Protocol.RSN);\n        conf.allowedProtocols.set(WifiConfiguration.Protocol.WPA);\n        conf.allowedAuthAlgorithms.clear();\n        conf.allowedPairwiseCiphers.set(WifiConfiguration.PairwiseCipher.CCMP);\n        conf.allowedPairwiseCiphers.set(WifiConfiguration.PairwiseCipher.TKIP);\n        conf.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.WEP40);\n        conf.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.WEP104);\n        conf.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.CCMP);\n        conf.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.TKIP);\n        conf.priority = 400000; //4000;\n        wifiManager.addNetwork(conf);\n\n        List&lt;WifiConfiguration&gt; list = wifiManager.getConfiguredNetworks();\n\n        for (WifiConfiguration i : list) {\n\n            if (i.SSID != null &amp;&amp; i.SSID.equals(&quot;\\&quot;&quot; + networkSSID + &quot;\\&quot;&quot;)) {\n                wifiManager.disconnect();\n                wifiManager.enableNetwork(i.networkId, true);\n\n                Log.v(TAG, &quot;Trying to connect&quot;);\n               wifiManager.reconnect();\n                wifiManager.reassociate();\n                wifiManager.reconnect();\n                wifiManager.reassociate();\n               try {\n                    Thread.sleep(2000);\n                } catch (InterruptedException e) {\n                    throw new RuntimeException(e);\n                }\n\n            }\n        }\n\n\n        if (checkWifiConnection().equals(WifiState.CONNECTED)) return true;\n\n        return false;\n</code></pre>\n<p>It is worth noting that this wifi device is open (meaning no password). Also, I can connect to that device using my personal phone with no problems.</p>\n<p>Any ideas how to solve this issue?</p>\n<p>I tried to change the way I connect to the wifi device, but nothing changed.</p>\n"},{"tags":["java","maven","tomcat","intellij-idea"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":2,"creation_date":1692832542,"post_id":76965345,"comment_id":135679301,"body_markdown":"The situation is simpler than you think. The jars go where any other jar would go - into WEB-INF/lib. All you&#39;ve got to decide is where to put the native binaries and then to ensure that the library path is given in your runtime options","body":"The situation is simpler than you think. The jars go where any other jar would go - into WEB-INF/lib. All you&#39;ve got to decide is where to put the native binaries and then to ensure that the library path is given in your runtime options"},{"owner":{"account_id":4912982,"reputation":14853,"user_id":3957754,"accept_rate":50,"display_name":"JRichardsz"},"score":0,"creation_date":1692848336,"post_id":76965345,"comment_id":135680500,"body_markdown":"If it is similar to eclipse, by default the tomcat is &quot;cloned&quot; to a kind of temp folder. So your jars should be in that folder.  Are you using windows?","body":"If it is similar to eclipse, by default the tomcat is &quot;cloned&quot; to a kind of temp folder. So your jars should be in that folder.  Are you using windows?"},{"owner":{"account_id":72556,"reputation":959,"user_id":209452,"accept_rate":100,"display_name":"Attila Csipak"},"score":0,"creation_date":1692866580,"post_id":76965345,"comment_id":135683014,"body_markdown":"@JRichardsz Yes, IDEA runs on Windows. I&#39;m not familiar with how Tomcat launch configurations work in Eclipse, feel free to elaborate.","body":"@JRichardsz Yes, IDEA runs on Windows. I&#39;m not familiar with how Tomcat launch configurations work in Eclipse, feel free to elaborate."}],"owner":{"account_id":72556,"reputation":959,"user_id":209452,"accept_rate":100,"display_name":"Attila Csipak"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692831335,"creation_date":1692831335,"question_id":76965345,"body_markdown":"I am using IntelliJ IDEA 2023.2. Maven project, single module, war packaging. I have set up a Tomcat Server run configuration for local testing. \r\n\r\nThe project has an external, properietary dependency (let&#39;s call it X), which has platform-dependent variants, so I have to use a different jar for Windows and Linux platforms. The X-win.jar is accompanied by a bunch of dll files, while the X-linux.jar is accompanied by a bunch of *.so files.\r\n\r\nSince none of these are available via online Maven repositories, I had to set up a local repository and upload various versions of library X to it. I upload separate versions for Windows and Linux platform manually after getting the files from the vendor of X. There&#39;s a separate artifact for X.jar and an X-resources.tar.gz, which contains all the native library files that X.jar is supposed to use.\r\n\r\nWhat I figured out so far:\r\n\r\n1. Add the X.jar dependency with scope=provided because it is sufficient to have the Java classes at compile time. The version is different depending on the platform used - Maven profiles and activation are used to decide between win-X.Y.Z and linux-X.Y.Z versions.\r\n\r\n2. When I put the war file on an actual server, in an actual Tomcat instance, I should add the platform specific X.jar + dll/so files to Tomcat&#39;s libraries and via that to the runtime classpath. This can be done either:\r\n\r\n - by putting all the files into $CATALINA_BASE/lib/ or\r\n - by putting them on a path which is then inserted into PATH (Windows) or LD_LIBRARY_PATH (Linux) environment variable and then passed to Tomcat.\r\n\r\nWhat I couldn&#39;t figure out is how I do this latter part (adding the platform-dependent jar + native libraries to the runtime classpath via Tomcat) in IDEA. What I tried:\r\n\r\n - Passing a -Djava.library.path VM option via Tomcat Server run configuration.\r\n - Adding X.jar and the dir with the dlls (Native Library Locations) to the Application Server Libraries section. Not very elegant because Tomcat settings are not project-specific - they will be used in other IDEA projects&#39; runconfigs, too.\r\n - Adding X.jar and the dir with the dlls (Native Library Locations) to Project Structure | Project Settings | Libraries and also to Project Structure | Project Settings | Modules | Dependencies. The latter gets erased after every Maven Project Import action, which may explain why this method did not work.\r\n\r\nNeither of the above worked. The webapp context initialization consistently throws ClassNotFound errors for a class in X.","title":"Unable to add external libraries to IDEA Tomcat runconfig&#39;s runtime classpath","body":"<p>I am using IntelliJ IDEA 2023.2. Maven project, single module, war packaging. I have set up a Tomcat Server run configuration for local testing.</p>\n<p>The project has an external, properietary dependency (let's call it X), which has platform-dependent variants, so I have to use a different jar for Windows and Linux platforms. The X-win.jar is accompanied by a bunch of dll files, while the X-linux.jar is accompanied by a bunch of *.so files.</p>\n<p>Since none of these are available via online Maven repositories, I had to set up a local repository and upload various versions of library X to it. I upload separate versions for Windows and Linux platform manually after getting the files from the vendor of X. There's a separate artifact for X.jar and an X-resources.tar.gz, which contains all the native library files that X.jar is supposed to use.</p>\n<p>What I figured out so far:</p>\n<ol>\n<li><p>Add the X.jar dependency with scope=provided because it is sufficient to have the Java classes at compile time. The version is different depending on the platform used - Maven profiles and activation are used to decide between win-X.Y.Z and linux-X.Y.Z versions.</p>\n</li>\n<li><p>When I put the war file on an actual server, in an actual Tomcat instance, I should add the platform specific X.jar + dll/so files to Tomcat's libraries and via that to the runtime classpath. This can be done either:</p>\n</li>\n</ol>\n<ul>\n<li>by putting all the files into $CATALINA_BASE/lib/ or</li>\n<li>by putting them on a path which is then inserted into PATH (Windows) or LD_LIBRARY_PATH (Linux) environment variable and then passed to Tomcat.</li>\n</ul>\n<p>What I couldn't figure out is how I do this latter part (adding the platform-dependent jar + native libraries to the runtime classpath via Tomcat) in IDEA. What I tried:</p>\n<ul>\n<li>Passing a -Djava.library.path VM option via Tomcat Server run configuration.</li>\n<li>Adding X.jar and the dir with the dlls (Native Library Locations) to the Application Server Libraries section. Not very elegant because Tomcat settings are not project-specific - they will be used in other IDEA projects' runconfigs, too.</li>\n<li>Adding X.jar and the dir with the dlls (Native Library Locations) to Project Structure | Project Settings | Libraries and also to Project Structure | Project Settings | Modules | Dependencies. The latter gets erased after every Maven Project Import action, which may explain why this method did not work.</li>\n</ul>\n<p>Neither of the above worked. The webapp context initialization consistently throws ClassNotFound errors for a class in X.</p>\n"},{"tags":["java","selenium-webdriver","testng","pom.xml"],"owner":{"account_id":20412391,"reputation":23,"user_id":14975443,"display_name":"Raza Sultan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692830740,"creation_date":1692829484,"question_id":76965239,"body_markdown":"I am not an expert in Java and learning things. Let me first let you know that I am using Selenium with Java using page object model and TestNg. Until now all the 1000+ tests run smoothly. As I am using all the following fields in my `baseTestClass` as\r\n\r\n    public static WebDriver driver;\r\n    protected static WebDriverWait wait;\r\n    protected static WebDriverWait longWait;\r\n    public static BasePage basePage;\r\n    public static AreaOfBusiness areaOfBusiness;\r\n    public static String tenantName;\r\n    public static String userRole;\r\n    public static String testType;\r\n    public static String browserName;\r\n\r\n\r\nNow my senior suggested me not use `static` fields but instead use `protected`, because I am going to use the TestNg parallel option to reduce the test suite time.   \r\n\r\nUntil now i modify the base class as follows\r\n\r\n    public class BaseTestClass {\r\n    private static final Logger logger = LoggerFactory.getLogger(BaseSeleniumTest.class);\r\n    protected String browserName;\r\n    protected String tenantName;\r\n    protected String userRole;\r\n    protected String testType;\r\n    protected AreaOfBusiness areaOfBusiness;\r\n    protected WebDriver driver;\r\n    protected WebDriverWait wait; //Explicit Wait\r\n    protected WebDriverWait longWait;\r\n    protected BasePage basePage;\r\n\r\n    @Parameters({&quot;profile&quot;, &quot;browserName&quot;, &quot;userRole&quot;, &quot;testType&quot;, &quot;areaOfBusiness&quot;, &quot;tenantName&quot;})\r\n    @BeforeTest(alwaysRun = true)\r\n    public void setup(@Optional(&quot;local&quot;) String profile, @Optional(&quot;chrome&quot;) String browserName,\r\n                      @Optional String userRole, @Optional String testType,\r\n                      @Optional(&quot;BMW&quot;) AreaOfBusiness areaOfBusiness, @Optional(&quot;Autohaus Huber&quot;) String tenantName )\r\n        throws IOException {\r\n        this.browserName = browserName;\r\n        this.userRole = userRole;\r\n        this.testType = testType;\r\n        this.tenantName = tenantName;\r\n        this.areaOfBusiness = areaOfBusiness;\r\n    \r\n\r\n        logger.atInfo().log(&quot;{}-BaseTest Setup&quot;, areaOfBusiness);\r\n        ConfigurationManager.loadProperties(profile);\r\n        driver = getOrCreateWebDriver(browserName, userRole, testType, areaOfBusiness);\r\n\r\n        this.wait = new WebDriverWait(driver, Duration.ofSeconds(10), Duration.ofSeconds(1));\r\n        this.longWait = new WebDriverWait(driver, Duration.ofSeconds(300));\r\n\r\n        // Instantiate page objects\r\n        this.basePage = new BasePage(driver);\r\n\r\n        if (BMW.equals(areaOfBusiness) &amp;&amp; !&quot;authentication&quot;.equals(testType)) {\r\n            basePage.selectTenant(tenantName);\r\n        }\r\n        logger.info(&quot;Tenant name is {}&quot;, tenantName);\r\n    }\r\n\r\n    public WebDriver createBrowserSession(String browser, String userRole, String testType,\r\n                                          AreaOfBusiness areaOfBusiness)\r\n        throws IOException {\r\n        WebDriver webDriver = switch (Browser.fromString(browser)) {\r\n            case FIREFOX -&gt; {\r\n                WebDriverManager.firefoxdriver().setup();\r\n                yield new FirefoxDriver();\r\n            }\r\n            case EDGE -&gt; {\r\n                WebDriverManager.edgedriver().setup();\r\n                yield new EdgeDriver();\r\n            }\r\n            case CHROME -&gt; {\r\n                WebDriverManager.chromedriver().setup();\r\n                yield new ChromeDriver();\r\n            }\r\n            case SAFARI -&gt; {\r\n                WebDriverManager.safaridriver().setup();\r\n                yield new SafariDriver();\r\n            }\r\n            case UNKNOWN -&gt; {\r\n                throw new RuntimeException(&quot;Browser is unknown&quot;);\r\n            }\r\n        };\r\n        //wait = new WebDriverWait(webDriver, Duration.ofSeconds(10), Duration.ofSeconds(1));\r\n        longWait = new WebDriverWait(webDriver, Duration.ofSeconds(300));\r\n        webDriver.manage().deleteAllCookies();\r\n        String backOfficeBaseUrl = ConfigurationManager.getBackOfficeBaseUrl();\r\n        webDriver.get(MessageFormat.format(backOfficeBaseUrl,\r\n            AreaOfBusiness.fromString(String.valueOf(areaOfBusiness))));\r\n        webDriver.manage().window().maximize();\r\n        //Login process\r\n        if (!&quot;authentication&quot;.equals(testType)) {\r\n            loginProcess(userRole, AreaOfBusiness.fromString(String.valueOf(areaOfBusiness)), webDriver);\r\n        }\r\n        return webDriver;\r\n    }\r\n\r\n    @AfterTest(alwaysRun = true)\r\n    public void tearDown() {\r\n        if (driver != null) {\r\n            logger.info(&quot;TearDown Called!&quot;);\r\n            logger.info(&quot;Browser Closed.&quot;);\r\n            driver.quit();\r\n        }\r\n    }\r\n\r\nNow when I run the test suite after completion of the first test class in the &lt;test&gt; tag all these fields become `null` and I am getting `NullPointerException`\r\n\r\n        &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;!DOCTYPE suite SYSTEM &quot;https://testng.org/testng-1.0.dtd&quot;&gt;\r\n    \r\n    &lt;suite name=&quot;DE BMW-Autohaus Tests on Chrome browser&quot; verbose=&quot;1&quot;&gt;\r\n        &lt;parameter name=&quot;browserName&quot; value=&quot;chrome&quot;/&gt;\r\n        &lt;parameter name=&quot;areaOfBusiness&quot; value=&quot;BMW&quot;/&gt;\r\n        &lt;parameter name=&quot;tenantName&quot; value=&quot;Autohaus Huber&quot;/&gt;\r\n        &lt;listeners&gt;\r\n            &lt;listener class-name=&quot;com.myCom.selenium.util.Reporting&quot;/&gt;\r\n            &lt;listener class-name=&quot;com.myCom.selenium.util.RetryListener&quot;/&gt;\r\n        &lt;/listeners&gt;\r\n        &lt;test name=&quot;Autohaus Huber Authentication Validation, Login and Logout Tests (Chrome)&quot; enabled=&quot;false&quot;&gt;\r\n            &lt;parameter name=&quot;testType&quot; value=&quot;authentication&quot;/&gt;\r\n            &lt;classes&gt;\r\n                &lt;class name=&quot;com.myCom.selenium.testcases.logintests.LoginAndLogoutFunctionalityTest&quot;/&gt;\r\n            &lt;/classes&gt;\r\n        &lt;/test&gt;\r\n        &lt;test name=&quot;Autohaus Huber Process Owner (Administrator) User Tests (Chrome)&quot; enabled=&quot;true&quot;&gt;\r\n            &lt;parameter name=&quot;userRole&quot; value=&quot;process_owner&quot;/&gt;\r\n            &lt;groups&gt;\r\n                &lt;run&gt;\r\n                    &lt;include name=&quot;process_owner&quot;/&gt;\r\n                &lt;/run&gt;\r\n            &lt;/groups&gt;\r\n            &lt;packages&gt;\r\n                &lt;package name=&quot;com.myCom.selenium.testcases.*&quot;&gt;\r\n                    &lt;exclude name=&quot;com.myCom.selenium.testcases.chat&quot;/&gt;\r\n                &lt;/package&gt;\r\n            &lt;/packages&gt;\r\n        &lt;/test&gt;\r\n        &lt;test name=&quot;Autohaus Huber Service Advisor User Tests (Chrome)&quot; enabled=&quot;true&quot; &gt;\r\n            &lt;parameter name=&quot;userRole&quot; value=&quot;service&quot;/&gt;\r\n            &lt;groups&gt;\r\n                &lt;run&gt;\r\n                    &lt;include name=&quot;service_advisor&quot; /&gt;\r\n                &lt;/run&gt;\r\n            &lt;/groups&gt;\r\n            &lt;packages&gt;\r\n                &lt;package name=&quot;com.myCom.selenium.testcases.*&quot;&gt;\r\n                    &lt;exclude name=&quot;com.myCom.selenium.testcases.chat&quot;/&gt;\r\n                &lt;/package&gt;\r\n            &lt;/packages&gt;\r\n        &lt;/test&gt;\r\n    &lt;/suite&gt;\r\n\r\nI am not sure what I am doing wrong for reference let me give you a pageClass and testClass\r\n\r\n \r\n\r\n       @Test(groups = {PROCESS_OWNER, SERVICE_ADVISOR, SERVICE_ASSISTANT})\r\n    public class FieldsValidationTest extends BaseTestClass {\r\n        private InvoiceCreationPage invoiceCreation;\r\n        private ValidationErrorPage validationErrorPage;\r\n        private CreationDialogUtils creationDialogUtils;\r\n    \r\n        @BeforeMethod(alwaysRun = true)\r\n        public void beforeTest() {\r\n            invoiceCreation = new InvoiceCreationPage(driver);\r\n            validationErrorPage = new ValidationErrorPage(driver);\r\n            creationDialogUtils = new CreationDialogUtils();\r\n        }\r\n    \r\n        @Test(description = &quot;To test if the user does not check any of the title checks box and verify validation message&quot;\r\n                + &quot;must be displayed&quot;)\r\n        public void tc019NewCaseFieldTitleValidationTest() throws Exception {\r\n            creationDialogUtils.openInvoiceCreationDialogBox();\r\n            //Invoice creation form\r\n            //Customer data\r\n            var customerData = randomCustomerData();\r\n            customerData.setTitleIndexValue(4);\r\n            creationDialogUtils.fillCustomerData(invoiceCreation, customerData);\r\n            //Invoice data\r\n            var invoiceData = invoiceData();\r\n            creationDialogUtils.fillInvoiceDetails(invoiceCreation, invoiceData, CREATE, INVOICE_CREATION);\r\n            //Click send invoice button\r\n            invoiceCreation.clickSendButton();\r\n            //Verify validation error message\r\n            var errorMessageData = validationErrors(getErrorMessage(&quot;requiredError&quot;,\r\n                    &quot;Title&quot;));\r\n            checkValidationErrors(validationErrorPage, errorMessageData, &quot;title&quot;);\r\n            //Close the form\r\n            invoiceCreation.clickCancelButton();\r\n        }\r\n    @Test()\r\n    .....\r\n    @Test()\r\n    .\r\n    .\r\n    .\r\n    @Test() so on \r\n    \r\n    }\r\n\r\n\r\nBelow is the page object class\r\n\r\n    public class InvoiceCreationPage extends BaseTestClass {\r\n        private final Logger log = LoggerFactory.getLogger(InvoiceCreationPage.class);\r\n    \r\n        public InvoiceCreationPage(WebDriver driver) {\r\n            this.driver = driver;\r\n            initElements(driver, this);\r\n        }\r\n    \r\n        @FindBy(xpath = &quot;//a[contains(@href, &#39;./invoices&#39;)]&quot;)\r\n        WebElement invoiceModuleNavLink;\r\n        @FindBy(id = &quot;loader&quot;)\r\n        WebElement uploadSpinner;\r\n    \r\n    // Some Action methods\r\n    method1();\r\n    method2();\r\n    .\r\n    .\r\n    .\r\n    .\r\n    }\r\n\r\nIf someone helps me, how can I use all the `static` fields as `protected` and also it will be executable in parallel?\r\n\r\nI also want to achieve that every `&lt;test&gt;` tag (including all the test classes in `&lt;test&gt;` tag) runs on the same browser and the next `&lt;test&gt;` tag on its individual browser but in parallel\r\n\r\n","title":"How to run selenium test in parallel while WebDriver and required fields are Protected in Java","body":"<p>I am not an expert in Java and learning things. Let me first let you know that I am using Selenium with Java using page object model and TestNg. Until now all the 1000+ tests run smoothly. As I am using all the following fields in my <code>baseTestClass</code> as</p>\n<pre><code>public static WebDriver driver;\nprotected static WebDriverWait wait;\nprotected static WebDriverWait longWait;\npublic static BasePage basePage;\npublic static AreaOfBusiness areaOfBusiness;\npublic static String tenantName;\npublic static String userRole;\npublic static String testType;\npublic static String browserName;\n</code></pre>\n<p>Now my senior suggested me not use <code>static</code> fields but instead use <code>protected</code>, because I am going to use the TestNg parallel option to reduce the test suite time.</p>\n<p>Until now i modify the base class as follows</p>\n<pre><code>public class BaseTestClass {\nprivate static final Logger logger = LoggerFactory.getLogger(BaseSeleniumTest.class);\nprotected String browserName;\nprotected String tenantName;\nprotected String userRole;\nprotected String testType;\nprotected AreaOfBusiness areaOfBusiness;\nprotected WebDriver driver;\nprotected WebDriverWait wait; //Explicit Wait\nprotected WebDriverWait longWait;\nprotected BasePage basePage;\n\n@Parameters({&quot;profile&quot;, &quot;browserName&quot;, &quot;userRole&quot;, &quot;testType&quot;, &quot;areaOfBusiness&quot;, &quot;tenantName&quot;})\n@BeforeTest(alwaysRun = true)\npublic void setup(@Optional(&quot;local&quot;) String profile, @Optional(&quot;chrome&quot;) String browserName,\n                  @Optional String userRole, @Optional String testType,\n                  @Optional(&quot;BMW&quot;) AreaOfBusiness areaOfBusiness, @Optional(&quot;Autohaus Huber&quot;) String tenantName )\n    throws IOException {\n    this.browserName = browserName;\n    this.userRole = userRole;\n    this.testType = testType;\n    this.tenantName = tenantName;\n    this.areaOfBusiness = areaOfBusiness;\n\n\n    logger.atInfo().log(&quot;{}-BaseTest Setup&quot;, areaOfBusiness);\n    ConfigurationManager.loadProperties(profile);\n    driver = getOrCreateWebDriver(browserName, userRole, testType, areaOfBusiness);\n\n    this.wait = new WebDriverWait(driver, Duration.ofSeconds(10), Duration.ofSeconds(1));\n    this.longWait = new WebDriverWait(driver, Duration.ofSeconds(300));\n\n    // Instantiate page objects\n    this.basePage = new BasePage(driver);\n\n    if (BMW.equals(areaOfBusiness) &amp;&amp; !&quot;authentication&quot;.equals(testType)) {\n        basePage.selectTenant(tenantName);\n    }\n    logger.info(&quot;Tenant name is {}&quot;, tenantName);\n}\n\npublic WebDriver createBrowserSession(String browser, String userRole, String testType,\n                                      AreaOfBusiness areaOfBusiness)\n    throws IOException {\n    WebDriver webDriver = switch (Browser.fromString(browser)) {\n        case FIREFOX -&gt; {\n            WebDriverManager.firefoxdriver().setup();\n            yield new FirefoxDriver();\n        }\n        case EDGE -&gt; {\n            WebDriverManager.edgedriver().setup();\n            yield new EdgeDriver();\n        }\n        case CHROME -&gt; {\n            WebDriverManager.chromedriver().setup();\n            yield new ChromeDriver();\n        }\n        case SAFARI -&gt; {\n            WebDriverManager.safaridriver().setup();\n            yield new SafariDriver();\n        }\n        case UNKNOWN -&gt; {\n            throw new RuntimeException(&quot;Browser is unknown&quot;);\n        }\n    };\n    //wait = new WebDriverWait(webDriver, Duration.ofSeconds(10), Duration.ofSeconds(1));\n    longWait = new WebDriverWait(webDriver, Duration.ofSeconds(300));\n    webDriver.manage().deleteAllCookies();\n    String backOfficeBaseUrl = ConfigurationManager.getBackOfficeBaseUrl();\n    webDriver.get(MessageFormat.format(backOfficeBaseUrl,\n        AreaOfBusiness.fromString(String.valueOf(areaOfBusiness))));\n    webDriver.manage().window().maximize();\n    //Login process\n    if (!&quot;authentication&quot;.equals(testType)) {\n        loginProcess(userRole, AreaOfBusiness.fromString(String.valueOf(areaOfBusiness)), webDriver);\n    }\n    return webDriver;\n}\n\n@AfterTest(alwaysRun = true)\npublic void tearDown() {\n    if (driver != null) {\n        logger.info(&quot;TearDown Called!&quot;);\n        logger.info(&quot;Browser Closed.&quot;);\n        driver.quit();\n    }\n}\n</code></pre>\n<p>Now when I run the test suite after completion of the first test class in the  tag all these fields become <code>null</code> and I am getting <code>NullPointerException</code></p>\n<pre><code>    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;!DOCTYPE suite SYSTEM &quot;https://testng.org/testng-1.0.dtd&quot;&gt;\n\n&lt;suite name=&quot;DE BMW-Autohaus Tests on Chrome browser&quot; verbose=&quot;1&quot;&gt;\n    &lt;parameter name=&quot;browserName&quot; value=&quot;chrome&quot;/&gt;\n    &lt;parameter name=&quot;areaOfBusiness&quot; value=&quot;BMW&quot;/&gt;\n    &lt;parameter name=&quot;tenantName&quot; value=&quot;Autohaus Huber&quot;/&gt;\n    &lt;listeners&gt;\n        &lt;listener class-name=&quot;com.myCom.selenium.util.Reporting&quot;/&gt;\n        &lt;listener class-name=&quot;com.myCom.selenium.util.RetryListener&quot;/&gt;\n    &lt;/listeners&gt;\n    &lt;test name=&quot;Autohaus Huber Authentication Validation, Login and Logout Tests (Chrome)&quot; enabled=&quot;false&quot;&gt;\n        &lt;parameter name=&quot;testType&quot; value=&quot;authentication&quot;/&gt;\n        &lt;classes&gt;\n            &lt;class name=&quot;com.myCom.selenium.testcases.logintests.LoginAndLogoutFunctionalityTest&quot;/&gt;\n        &lt;/classes&gt;\n    &lt;/test&gt;\n    &lt;test name=&quot;Autohaus Huber Process Owner (Administrator) User Tests (Chrome)&quot; enabled=&quot;true&quot;&gt;\n        &lt;parameter name=&quot;userRole&quot; value=&quot;process_owner&quot;/&gt;\n        &lt;groups&gt;\n            &lt;run&gt;\n                &lt;include name=&quot;process_owner&quot;/&gt;\n            &lt;/run&gt;\n        &lt;/groups&gt;\n        &lt;packages&gt;\n            &lt;package name=&quot;com.myCom.selenium.testcases.*&quot;&gt;\n                &lt;exclude name=&quot;com.myCom.selenium.testcases.chat&quot;/&gt;\n            &lt;/package&gt;\n        &lt;/packages&gt;\n    &lt;/test&gt;\n    &lt;test name=&quot;Autohaus Huber Service Advisor User Tests (Chrome)&quot; enabled=&quot;true&quot; &gt;\n        &lt;parameter name=&quot;userRole&quot; value=&quot;service&quot;/&gt;\n        &lt;groups&gt;\n            &lt;run&gt;\n                &lt;include name=&quot;service_advisor&quot; /&gt;\n            &lt;/run&gt;\n        &lt;/groups&gt;\n        &lt;packages&gt;\n            &lt;package name=&quot;com.myCom.selenium.testcases.*&quot;&gt;\n                &lt;exclude name=&quot;com.myCom.selenium.testcases.chat&quot;/&gt;\n            &lt;/package&gt;\n        &lt;/packages&gt;\n    &lt;/test&gt;\n&lt;/suite&gt;\n</code></pre>\n<p>I am not sure what I am doing wrong for reference let me give you a pageClass and testClass</p>\n<pre><code>   @Test(groups = {PROCESS_OWNER, SERVICE_ADVISOR, SERVICE_ASSISTANT})\npublic class FieldsValidationTest extends BaseTestClass {\n    private InvoiceCreationPage invoiceCreation;\n    private ValidationErrorPage validationErrorPage;\n    private CreationDialogUtils creationDialogUtils;\n\n    @BeforeMethod(alwaysRun = true)\n    public void beforeTest() {\n        invoiceCreation = new InvoiceCreationPage(driver);\n        validationErrorPage = new ValidationErrorPage(driver);\n        creationDialogUtils = new CreationDialogUtils();\n    }\n\n    @Test(description = &quot;To test if the user does not check any of the title checks box and verify validation message&quot;\n            + &quot;must be displayed&quot;)\n    public void tc019NewCaseFieldTitleValidationTest() throws Exception {\n        creationDialogUtils.openInvoiceCreationDialogBox();\n        //Invoice creation form\n        //Customer data\n        var customerData = randomCustomerData();\n        customerData.setTitleIndexValue(4);\n        creationDialogUtils.fillCustomerData(invoiceCreation, customerData);\n        //Invoice data\n        var invoiceData = invoiceData();\n        creationDialogUtils.fillInvoiceDetails(invoiceCreation, invoiceData, CREATE, INVOICE_CREATION);\n        //Click send invoice button\n        invoiceCreation.clickSendButton();\n        //Verify validation error message\n        var errorMessageData = validationErrors(getErrorMessage(&quot;requiredError&quot;,\n                &quot;Title&quot;));\n        checkValidationErrors(validationErrorPage, errorMessageData, &quot;title&quot;);\n        //Close the form\n        invoiceCreation.clickCancelButton();\n    }\n@Test()\n.....\n@Test()\n.\n.\n.\n@Test() so on \n\n}\n</code></pre>\n<p>Below is the page object class</p>\n<pre><code>public class InvoiceCreationPage extends BaseTestClass {\n    private final Logger log = LoggerFactory.getLogger(InvoiceCreationPage.class);\n\n    public InvoiceCreationPage(WebDriver driver) {\n        this.driver = driver;\n        initElements(driver, this);\n    }\n\n    @FindBy(xpath = &quot;//a[contains(@href, './invoices')]&quot;)\n    WebElement invoiceModuleNavLink;\n    @FindBy(id = &quot;loader&quot;)\n    WebElement uploadSpinner;\n\n// Some Action methods\nmethod1();\nmethod2();\n.\n.\n.\n.\n}\n</code></pre>\n<p>If someone helps me, how can I use all the <code>static</code> fields as <code>protected</code> and also it will be executable in parallel?</p>\n<p>I also want to achieve that every <code>&lt;test&gt;</code> tag (including all the test classes in <code>&lt;test&gt;</code> tag) runs on the same browser and the next <code>&lt;test&gt;</code> tag on its individual browser but in parallel</p>\n"},{"tags":["java","spring","spring-boot","spring-security"],"answers":[{"comments":[{"owner":{"account_id":19159495,"reputation":25,"user_id":13995601,"display_name":"robertos"},"score":0,"creation_date":1692832787,"post_id":76965311,"comment_id":135679327,"body_markdown":"And how did you bypass security? By using AutoConfigureMockMvc(addFilters = false) annotation, or using different profile or in some other way?","body":"And how did you bypass security? By using AutoConfigureMockMvc(addFilters = false) annotation, or using different profile or in some other way?"},{"owner":{"account_id":5774888,"reputation":14,"user_id":4557258,"display_name":"dalcyonir"},"score":0,"creation_date":1692833096,"post_id":76965311,"comment_id":135679360,"body_markdown":"In my case, it was with AutoConfigureMockMvc(addFilters = false).","body":"In my case, it was with AutoConfigureMockMvc(addFilters = false)."}],"tags":[],"owner":{"account_id":5774888,"reputation":14,"user_id":4557258,"display_name":"dalcyonir"},"comment_count":2,"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1692830642,"creation_date":1692830642,"answer_id":76965311,"question_id":76965093,"body_markdown":"What I would do (and have done) is bypass security on unit/component tests(that need to test a class or specific layer) and add security in integration tests.","title":"Should I exclude security from controller unit tests?","body":"<p>What I would do (and have done) is bypass security on unit/component tests(that need to test a class or specific layer) and add security in integration tests.</p>\n"}],"owner":{"account_id":19159495,"reputation":25,"user_id":13995601,"display_name":"robertos"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1692893715,"accepted_answer_id":76965311,"answer_count":1,"score":0,"last_activity_date":1692830642,"creation_date":1692827384,"question_id":76965093,"body_markdown":"In my Spring application, I want to write tests. So, the &quot;/companies&quot; endpoint is secured and requires an ADMIN or USER role. In unit tests, should I bypass security and focus only on the business logic, and then test with security in integration tests? Or should I rather consider security in unit tests?\r\n\r\n\r\nWithout security:\r\n```\r\n@WebMvcTest(CompanyController.class)\r\n@AutoConfigureMockMvc(addFilters = false)\r\nclass CompanyControllerTest2 {\r\n\r\n    @Autowired\r\n    private MockMvc mockMvc;\r\n\r\n    @MockBean\r\n    private CompanyService companyService;\r\n\r\n    @Autowired\r\n    private ObjectMapper objectMapper;\r\n\r\n    @MockBean\r\n    private ResourceAccessHelper resourceAccessHelper;\r\n\r\n    @MockBean\r\n    private TokenAuthenticationFilter tokenAuthenticationFilter;\r\n\r\n    @Test\r\n    void shouldCreateCompany() throws Exception {\r\n        CompanyDto companyDto = CompanyDto.builder().companyName(&quot;My   Company&quot;).description(&quot;Description&quot;).build();\r\n        CompanyDto savedCompany = companyDto;\r\n        savedCompany.setId(1L);\r\n\r\n        given(companyService.saveNewCompany(companyDto)).willReturn(savedCompany);\r\n\r\n        mockMvc.perform(post(&quot;/companies&quot;)\r\n                .contentType(MediaType.APPLICATION_JSON)\r\n                .content(objectMapper.writeValueAsString(companyDto)))\r\n                .andExpect(status().isCreated())\r\n                .andExpect(header().exists(&quot;Location&quot;));\r\n    }\r\n}\r\n```\r\n\r\nOr use here @WithMockUser(username = &quot;user&quot;, roles = SecurityConfig.USER) for example?\r\nWhich option is a better choice?","title":"Should I exclude security from controller unit tests?","body":"<p>In my Spring application, I want to write tests. So, the &quot;/companies&quot; endpoint is secured and requires an ADMIN or USER role. In unit tests, should I bypass security and focus only on the business logic, and then test with security in integration tests? Or should I rather consider security in unit tests?</p>\n<p>Without security:</p>\n<pre><code>@WebMvcTest(CompanyController.class)\n@AutoConfigureMockMvc(addFilters = false)\nclass CompanyControllerTest2 {\n\n    @Autowired\n    private MockMvc mockMvc;\n\n    @MockBean\n    private CompanyService companyService;\n\n    @Autowired\n    private ObjectMapper objectMapper;\n\n    @MockBean\n    private ResourceAccessHelper resourceAccessHelper;\n\n    @MockBean\n    private TokenAuthenticationFilter tokenAuthenticationFilter;\n\n    @Test\n    void shouldCreateCompany() throws Exception {\n        CompanyDto companyDto = CompanyDto.builder().companyName(&quot;My   Company&quot;).description(&quot;Description&quot;).build();\n        CompanyDto savedCompany = companyDto;\n        savedCompany.setId(1L);\n\n        given(companyService.saveNewCompany(companyDto)).willReturn(savedCompany);\n\n        mockMvc.perform(post(&quot;/companies&quot;)\n                .contentType(MediaType.APPLICATION_JSON)\n                .content(objectMapper.writeValueAsString(companyDto)))\n                .andExpect(status().isCreated())\n                .andExpect(header().exists(&quot;Location&quot;));\n    }\n}\n</code></pre>\n<p>Or use here @WithMockUser(username = &quot;user&quot;, roles = SecurityConfig.USER) for example?\nWhich option is a better choice?</p>\n"},{"tags":["java","selenium-webdriver","selenium-chromedriver","selenium-java"],"comments":[{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":0,"creation_date":1692173750,"post_id":76911590,"comment_id":135586469,"body_markdown":"Are you sure chrome driver is version 116? Because logs state it&#39;s 114 - `Starting ChromeDriver 114.0.5735.90`. Maybe the property for the driver file points to the wrong place?","body":"Are you sure chrome driver is version 116? Because logs state it&#39;s 114 - <code>Starting ChromeDriver 114.0.5735.90</code>. Maybe the property for the driver file points to the wrong place?"},{"owner":{"account_id":15994883,"reputation":3427,"user_id":11543023,"display_name":"djmonki"},"score":0,"creation_date":1693296946,"post_id":76911590,"comment_id":135738503,"body_markdown":"This is the issue regarding the ew CfT endpoint for new Chromedriver releases that also affected WebDriverManager - see answer here: https://stackoverflow.com/a/76998277/11543023","body":"This is the issue regarding the ew CfT endpoint for new Chromedriver releases that also affected WebDriverManager - see answer here: <a href=\"https://stackoverflow.com/a/76998277/11543023\">stackoverflow.com/a/76998277/11543023</a>"}],"answers":[{"comments":[{"owner":{"account_id":17790146,"reputation":101,"user_id":22313877,"display_name":"TheRelentlessNucleophile"},"score":0,"creation_date":1692347285,"post_id":76912466,"comment_id":135613328,"body_markdown":"This worked. Also, don&#39;t forget to download the version of chromedriver compatible with your Chrome version.","body":"This worked. Also, don&#39;t forget to download the version of chromedriver compatible with your Chrome version."}],"tags":[],"owner":{"account_id":10299692,"reputation":5744,"user_id":7598774,"accept_rate":75,"display_name":"Shawn"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1692703569,"creation_date":1692179660,"answer_id":76912466,"question_id":76911590,"body_markdown":"**Issue:** You are using the version of selenium(`4.8.2`) which doesn&#39;t support latest browser.\r\n\r\n**Solution:** Upgrade to the latest version of selenium(`4.11.0` for JAVA and `4.11.2` for PYTHON) which supports this browser version.","title":"Could not start a new session. Response code 500. Message: session not created: This version of ChromeDriver only supports Chrome version 114","body":"<p><strong>Issue:</strong> You are using the version of selenium(<code>4.8.2</code>) which doesn't support latest browser.</p>\n<p><strong>Solution:</strong> Upgrade to the latest version of selenium(<code>4.11.0</code> for JAVA and <code>4.11.2</code> for PYTHON) which supports this browser version.</p>\n"},{"tags":[],"owner":{"account_id":8501978,"reputation":111,"user_id":7498831,"display_name":"Anand"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692252603,"creation_date":1692252603,"answer_id":76918872,"question_id":76911590,"body_markdown":"These are common problems faced by all software qa company when the chrome browser is updated.\r\nwe need to update chromedriver.exe w.r.t the chrome browser version(**version: 115 or latest**).\r\n\r\nFrom the logs we are able to observe chrome driver version is not updated:\r\n\r\nStarting  ChromeDriver:  **114.0.5735.90**\r\n\r\nCurrent browser version: **116.0.5845.97**\r\n\r\nNote: If you have already updated chrome driver and facing the same issue, then check for chromedriver.exe threads in Task manager and kill them.\r\nor execute the following command in command prompt to close all chromedriver.exe threads and build the application.\r\n&quot;**taskkill /F /IM ChromeDriver.exe /T**&quot;","title":"Could not start a new session. Response code 500. Message: session not created: This version of ChromeDriver only supports Chrome version 114","body":"<p>These are common problems faced by all software qa company when the chrome browser is updated.\nwe need to update chromedriver.exe w.r.t the chrome browser version(<strong>version: 115 or latest</strong>).</p>\n<p>From the logs we are able to observe chrome driver version is not updated:</p>\n<p>Starting  ChromeDriver:  <strong>114.0.5735.90</strong></p>\n<p>Current browser version: <strong>116.0.5845.97</strong></p>\n<p>Note: If you have already updated chrome driver and facing the same issue, then check for chromedriver.exe threads in Task manager and kill them.\nor execute the following command in command prompt to close all chromedriver.exe threads and build the application.\n&quot;<strong>taskkill /F /IM ChromeDriver.exe /T</strong>&quot;</p>\n"},{"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":2,"creation_date":1692521372,"post_id":76931006,"comment_id":135632492,"body_markdown":"Pardon me, but I don&#39;t see how your &quot;answer&quot; adds anything that is not already stated in the other answers.","body":"Pardon me, but I don&#39;t see how your &quot;answer&quot; adds anything that is not already stated in the other answers."}],"tags":[],"owner":{"account_id":24021573,"reputation":1,"user_id":18003782,"display_name":"bhavin2p"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692375253,"creation_date":1692375253,"answer_id":76931006,"question_id":76911590,"body_markdown":"Upgrade the Selenium version to latest and Selenium Manager","title":"Could not start a new session. Response code 500. Message: session not created: This version of ChromeDriver only supports Chrome version 114","body":"<p>Upgrade the Selenium version to latest and Selenium Manager</p>\n"},{"comments":[{"owner":{"account_id":4381407,"reputation":358,"user_id":3572954,"display_name":"Venkatesh Pothula"},"score":0,"creation_date":1692798081,"post_id":76931976,"comment_id":135673215,"body_markdown":"Yes its worked for me","body":"Yes its worked for me"}],"tags":[],"owner":{"account_id":29253377,"reputation":21,"user_id":22412226,"display_name":"Pasindu Bhawantha Warnasooriya"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1692385186,"creation_date":1692385141,"answer_id":76931976,"question_id":76911590,"body_markdown":"Worked for me by using the latest versions\r\n\r\n**used the latest version of selenium**\r\n\r\n    &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.11.0&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\r\n**used the latest version of webdriver manager**\r\n\r\n    &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.4.1&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t&lt;/dependency&gt;\r\n\r\nhttps://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-java\r\nhttps://github.com/bonigarcia/webdrivermanager","title":"Could not start a new session. Response code 500. Message: session not created: This version of ChromeDriver only supports Chrome version 114","body":"<p>Worked for me by using the latest versions</p>\n<p><strong>used the latest version of selenium</strong></p>\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n        &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\n        &lt;version&gt;4.11.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p><strong>used the latest version of webdriver manager</strong></p>\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\n        &lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\n        &lt;version&gt;5.4.1&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p><a href=\"https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-java\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-java</a>\n<a href=\"https://github.com/bonigarcia/webdrivermanager\" rel=\"nofollow noreferrer\">https://github.com/bonigarcia/webdrivermanager</a></p>\n"},{"tags":[],"owner":{"account_id":28769760,"reputation":1,"user_id":22033761,"display_name":"Axy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692601195,"creation_date":1692601000,"answer_id":76943007,"question_id":76911590,"body_markdown":"update this in POM\r\n\r\nhttps://mvnrepository.com/artifact/io.github.bonigarcia/webdrivermanager\r\n\r\n&lt;version&gt;5.4.1&lt;/version&gt;\r\n        \r\nupdate this version ","title":"Could not start a new session. Response code 500. Message: session not created: This version of ChromeDriver only supports Chrome version 114","body":"<p>update this in POM</p>\n<p><a href=\"https://mvnrepository.com/artifact/io.github.bonigarcia/webdrivermanager\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/io.github.bonigarcia/webdrivermanager</a></p>\n<p>5.4.1</p>\n<p>update this version</p>\n"},{"tags":[],"owner":{"account_id":29273335,"reputation":1,"user_id":22427623,"display_name":"Mohit Chandak"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692692117,"creation_date":1692692117,"answer_id":76951341,"question_id":76911590,"body_markdown":"For me its work when i tried updating the version of selenium and  webdriver which are \r\nlatest version of selenium\r\n\r\n     &lt;dependency&gt;\r\n                &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n                &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\r\n                &lt;version&gt;4.11.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\nlatest version of webdriver manager\r\n\r\n    &lt;dependency&gt;\r\n            &lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\r\n            &lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\r\n            &lt;version&gt;5.4.1&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\nAlso make the file in the src\\test\\java if they are not there .","title":"Could not start a new session. Response code 500. Message: session not created: This version of ChromeDriver only supports Chrome version 114","body":"<p>For me its work when i tried updating the version of selenium and  webdriver which are\nlatest version of selenium</p>\n<pre><code> &lt;dependency&gt;\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n            &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\n            &lt;version&gt;4.11.0&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>latest version of webdriver manager</p>\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\n        &lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\n        &lt;version&gt;5.4.1&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Also make the file in the src\\test\\java if they are not there .</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1692958217,"post_id":76956711,"comment_id":135698612,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76956711/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":25942086,"reputation":11,"user_id":19661423,"display_name":"Inna Zanko"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692736584,"creation_date":1692736584,"answer_id":76956711,"question_id":76911590,"body_markdown":"if you are using selenide library also update it to the latest version 6.17.1\r\n","title":"Could not start a new session. Response code 500. Message: session not created: This version of ChromeDriver only supports Chrome version 114","body":"<p>if you are using selenide library also update it to the latest version 6.17.1</p>\n"},{"tags":[],"owner":{"account_id":9512991,"reputation":63,"user_id":7070360,"accept_rate":75,"display_name":"Jose Luis"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1692829755,"creation_date":1692829755,"answer_id":76965254,"question_id":76911590,"body_markdown":"there are a new end point to download it, that is the reason that bonigarcia lib can&#39;t download the last driver version. you can check it in the oficial page:\r\n\r\nnew page: https://googlechromelabs.github.io/chrome-for-testing/\r\n\r\noficial page:\r\nhttps://chromedriver.chromium.org/downloads\r\n\r\n[![enter image description here][1]][1]\r\nCurrent Releases\r\nIf you are using Chrome version 115 or newer, please consult the Chrome for Testing availability dashboard. This page provides convenient JSON endpoints for specific ChromeDriver version downloading.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/lNmt3.png","title":"Could not start a new session. Response code 500. Message: session not created: This version of ChromeDriver only supports Chrome version 114","body":"<p>there are a new end point to download it, that is the reason that bonigarcia lib can't download the last driver version. you can check it in the oficial page:</p>\n<p>new page: <a href=\"https://googlechromelabs.github.io/chrome-for-testing/\" rel=\"nofollow noreferrer\">https://googlechromelabs.github.io/chrome-for-testing/</a></p>\n<p>oficial page:\n<a href=\"https://chromedriver.chromium.org/downloads\" rel=\"nofollow noreferrer\">https://chromedriver.chromium.org/downloads</a></p>\n<p><a href=\"https://i.stack.imgur.com/lNmt3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lNmt3.png\" alt=\"enter image description here\" /></a>\nCurrent Releases\nIf you are using Chrome version 115 or newer, please consult the Chrome for Testing availability dashboard. This page provides convenient JSON endpoints for specific ChromeDriver version downloading.</p>\n"}],"owner":{"account_id":29234989,"reputation":53,"user_id":22397799,"display_name":"Hrushikesh Shewale"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":22358,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":76912466,"answer_count":8,"score":5,"last_activity_date":1692829755,"creation_date":1692172802,"question_id":76911590,"body_markdown":"OS : Windows server\r\n\r\nLanguage : Java\r\n\r\nChrome version : 116.0.5845.97\r\n\r\nChrome driver version : 116.0.5845.96\r\n\r\n# OUTPUT : \r\n```\r\nSLF4J: No SLF4J providers were found.\r\nSLF4J: Defaulting to no-operation (NOP) logger implementation\r\nSLF4J: See https://www.slf4j.org/codes.html#noProviders for further details.\r\nStarting ChromeDriver 114.0.5735.90 (386bc09e8f4f2e025eddae123f36f6263096ae49-refs/branch-heads/5735@{#1052}) on port 10267\r\nOnly local connections are allowed.\r\nPlease see https://chromedriver.chromium.org/security-considerations for suggestions on keeping ChromeDriver safe.\r\nChromeDriver was started successfully.\r\nFAILED CONFIGURATION: @BeforeMethod StartDriver\r\norg.openqa.selenium.SessionNotCreatedException: Could not start a new session. Response code 500. Message: session not created: This version of ChromeDriver only supports Chrome version 114\r\nCurrent browser version is 116.0.5845.97 with binary path C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe \r\nHost info: host: &#39;WSAMZN-5U0L0QME&#39;, ip: &#39;10.40.2.21&#39;\r\nBuild info: version: &#39;4.8.2&#39;, revision: &#39;826dbfc730&#39;\r\nSystem info: os.name: &#39;Windows Server 2019&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;10.0&#39;, java.version: &#39;17.0.2&#39;\r\nDriver info: org.openqa.selenium.chrome.ChromeDriver\r\nCommand: [null, newSession {capabilities=[Capabilities {acceptInsecureCerts: true, browserName: chrome, goog:chromeOptions: {args: [--disable-notifications, ----disable-gpu, --disable-blink-features, --disable-blink-features=Au..., enable-automation, --no-sandbox, --disable-setuid-sandbox, --disable-infobars, --disable-dev-shm-usage, --disable-browser-side-navi..., --force-device-scale-factor=1, --remote-allow-origins=*, start-maximized, --safebrowsing-disable-down..., safebrowsing-disable-extens...], extensions: [], prefs: {download.default_directory: D:\\SeleniumWebdriver\\backlo..., download.extensions_to_open: application/exe, download.prompt_for_download: false, safebrowsing.enabled: true}}, pageLoadStrategy: none, unhandledPromptBehavior: accept}], desiredCapabilities=Capabilities {acceptInsecureCerts: true, browserName: chrome, goog:chromeOptions: {args: [--disable-notifications, ----disable-gpu, --disable-blink-features, --disable-blink-features=Au..., enable-automation, --no-sandbox, --disable-setuid-sandbox, --disable-infobars, --disable-dev-shm-usage, --disable-browser-side-navi..., --force-device-scale-factor=1, --remote-allow-origins=*, start-maximized, --safebrowsing-disable-down..., safebrowsing-disable-extens...], extensions: [], prefs: {download.default_directory: D:\\SeleniumWebdriver\\backlo..., download.extensions_to_open: application/exe, download.prompt_for_download: false, safebrowsing.enabled: true}}, pageLoadStrategy: none, unhandledPromptBehavior: accept}}]\r\n\tat org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:148)\r\n\tat org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:106)\r\n\tat org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:67)\r\n\tat org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:165)\r\n\tat org.openqa.selenium.remote.service.DriverCommandExecutor.invokeExecute(DriverCommandExecutor.java:183)\r\n\tat org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:158)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:543)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:229)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:157)\r\n\tat org.openqa.selenium.chromium.ChromiumDriver.&lt;init&gt;(ChromiumDriver.java:101)\r\n\tat org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:88)\r\n\tat org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:84)\r\n\tat org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:73)\r\n\tat com.cgw.resources.Base.StartDriver(Base.java:151)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:133)\r\n\tat org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:62)\r\n\tat org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:385)\r\n\tat org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:321)\r\n\tat org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:700)\r\n\tat org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:527)\r\n\tat org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)\r\n\tat org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)\r\n\tat org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:824)\r\n\tat org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)\r\n\tat org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)\r\n\tat org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat org.testng.TestRunner.privateRun(TestRunner.java:794)\r\n\tat org.testng.TestRunner.run(TestRunner.java:596)\r\n\tat org.testng.SuiteRunner.runTest(SuiteRunner.java:377)\r\n\tat org.testng.SuiteRunner.runSequentially(SuiteRunner.java:371)\r\n\tat org.testng.SuiteRunner.privateRun(SuiteRunner.java:332)\r\n\tat org.testng.SuiteRunner.run(SuiteRunner.java:276)\r\n\tat org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)\r\n\tat org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)\r\n\tat org.testng.TestNG.runSuitesSequentially(TestNG.java:1212)\r\n\tat org.testng.TestNG.runSuitesLocally(TestNG.java:1134)\r\n\tat org.testng.TestNG.runSuites(TestNG.java:1063)\r\n\tat org.testng.TestNG.run(TestNG.java:1031)\r\n\tat org.testng.remote.AbstractRemoteTestNG.run(AbstractRemoteTestNG.java:115)\r\n\tat org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:251)\r\n\tat org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:77)\r\n```","title":"Could not start a new session. Response code 500. Message: session not created: This version of ChromeDriver only supports Chrome version 114","body":"<p>OS : Windows server</p>\n<p>Language : Java</p>\n<p>Chrome version : 116.0.5845.97</p>\n<p>Chrome driver version : 116.0.5845.96</p>\n<h1>OUTPUT :</h1>\n<pre><code>SLF4J: No SLF4J providers were found.\nSLF4J: Defaulting to no-operation (NOP) logger implementation\nSLF4J: See https://www.slf4j.org/codes.html#noProviders for further details.\nStarting ChromeDriver 114.0.5735.90 (386bc09e8f4f2e025eddae123f36f6263096ae49-refs/branch-heads/5735@{#1052}) on port 10267\nOnly local connections are allowed.\nPlease see https://chromedriver.chromium.org/security-considerations for suggestions on keeping ChromeDriver safe.\nChromeDriver was started successfully.\nFAILED CONFIGURATION: @BeforeMethod StartDriver\norg.openqa.selenium.SessionNotCreatedException: Could not start a new session. Response code 500. Message: session not created: This version of ChromeDriver only supports Chrome version 114\nCurrent browser version is 116.0.5845.97 with binary path C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe \nHost info: host: 'WSAMZN-5U0L0QME', ip: '10.40.2.21'\nBuild info: version: '4.8.2', revision: '826dbfc730'\nSystem info: os.name: 'Windows Server 2019', os.arch: 'amd64', os.version: '10.0', java.version: '17.0.2'\nDriver info: org.openqa.selenium.chrome.ChromeDriver\nCommand: [null, newSession {capabilities=[Capabilities {acceptInsecureCerts: true, browserName: chrome, goog:chromeOptions: {args: [--disable-notifications, ----disable-gpu, --disable-blink-features, --disable-blink-features=Au..., enable-automation, --no-sandbox, --disable-setuid-sandbox, --disable-infobars, --disable-dev-shm-usage, --disable-browser-side-navi..., --force-device-scale-factor=1, --remote-allow-origins=*, start-maximized, --safebrowsing-disable-down..., safebrowsing-disable-extens...], extensions: [], prefs: {download.default_directory: D:\\SeleniumWebdriver\\backlo..., download.extensions_to_open: application/exe, download.prompt_for_download: false, safebrowsing.enabled: true}}, pageLoadStrategy: none, unhandledPromptBehavior: accept}], desiredCapabilities=Capabilities {acceptInsecureCerts: true, browserName: chrome, goog:chromeOptions: {args: [--disable-notifications, ----disable-gpu, --disable-blink-features, --disable-blink-features=Au..., enable-automation, --no-sandbox, --disable-setuid-sandbox, --disable-infobars, --disable-dev-shm-usage, --disable-browser-side-navi..., --force-device-scale-factor=1, --remote-allow-origins=*, start-maximized, --safebrowsing-disable-down..., safebrowsing-disable-extens...], extensions: [], prefs: {download.default_directory: D:\\SeleniumWebdriver\\backlo..., download.extensions_to_open: application/exe, download.prompt_for_download: false, safebrowsing.enabled: true}}, pageLoadStrategy: none, unhandledPromptBehavior: accept}}]\n    at org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:148)\n    at org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:106)\n    at org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:67)\n    at org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:165)\n    at org.openqa.selenium.remote.service.DriverCommandExecutor.invokeExecute(DriverCommandExecutor.java:183)\n    at org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:158)\n    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:543)\n    at org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:229)\n    at org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:157)\n    at org.openqa.selenium.chromium.ChromiumDriver.&lt;init&gt;(ChromiumDriver.java:101)\n    at org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:88)\n    at org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:84)\n    at org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:73)\n    at com.cgw.resources.Base.StartDriver(Base.java:151)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:133)\n    at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:62)\n    at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:385)\n    at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:321)\n    at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:700)\n    at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:527)\n    at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)\n    at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)\n    at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:824)\n    at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)\n    at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)\n    at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n    at org.testng.TestRunner.privateRun(TestRunner.java:794)\n    at org.testng.TestRunner.run(TestRunner.java:596)\n    at org.testng.SuiteRunner.runTest(SuiteRunner.java:377)\n    at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:371)\n    at org.testng.SuiteRunner.privateRun(SuiteRunner.java:332)\n    at org.testng.SuiteRunner.run(SuiteRunner.java:276)\n    at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)\n    at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)\n    at org.testng.TestNG.runSuitesSequentially(TestNG.java:1212)\n    at org.testng.TestNG.runSuitesLocally(TestNG.java:1134)\n    at org.testng.TestNG.runSuites(TestNG.java:1063)\n    at org.testng.TestNG.run(TestNG.java:1031)\n    at org.testng.remote.AbstractRemoteTestNG.run(AbstractRemoteTestNG.java:115)\n    at org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:251)\n    at org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:77)\n</code></pre>\n"},{"tags":["java","rest","jakarta-ee","jax-rs"],"comments":[{"owner":{"account_id":26528740,"reputation":367,"user_id":20161294,"display_name":"v-g"},"score":0,"creation_date":1692214794,"post_id":76871840,"comment_id":135594821,"body_markdown":"Is the server correctly configured to support other methods than GET? Sometimes they are dislabled because of security policies but obviously they have to be allowed if you plan to provide REST endpoints with them.","body":"Is the server correctly configured to support other methods than GET? Sometimes they are dislabled because of security policies but obviously they have to be allowed if you plan to provide REST endpoints with them."},{"owner":{"account_id":28969902,"reputation":61,"user_id":22190461,"display_name":"Guillem Chesa"},"score":0,"creation_date":1692619282,"post_id":76871840,"comment_id":135643676,"body_markdown":"They work, and the GET method also works if it&#39;s not empty (ie: `http://example.com/resource/customer/5`). But requesting an empty GET method won&#39;t work unless it&#39;s the only declared method.","body":"They work, and the GET method also works if it&#39;s not empty (ie: <code>http:&#47;&#47;example.com&#47;resource&#47;customer&#47;5</code>). But requesting an empty GET method won&#39;t work unless it&#39;s the only declared method."},{"owner":{"account_id":26528740,"reputation":367,"user_id":20161294,"display_name":"v-g"},"score":0,"creation_date":1692624731,"post_id":76871840,"comment_id":135644977,"body_markdown":"I suspect a parsing error from the web container due to the regex used, did you try to solve the problem by overloading the `getCustomer` method in an analogous way to https://stackoverflow.com/a/19660557/20161294?","body":"I suspect a parsing error from the web container due to the regex used, did you try to solve the problem by overloading the <code>getCustomer</code> method in an analogous way to <a href=\"https://stackoverflow.com/a/19660557/20161294\">stackoverflow.com/a/19660557/20161294</a>?"}],"owner":{"account_id":28969902,"reputation":61,"user_id":22190461,"display_name":"Guillem Chesa"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692829426,"creation_date":1691623777,"question_id":76871840,"body_markdown":"I&#39;m using Jakarta REST API in Jakarta EE 10 and I noticed that if I try to parse an empty `@PathParam` in a GET method it works only if there are no other REST methods in the same class.\r\n\r\nI have the following class, where the `getCustomer()` method takes the request no matter if it&#39;s empty or not. I omitted the method&#39;s body for brevity but basically it just returns a `List` of `RestCustomer` containing all of them if the request is empty or just the ones that match the request if it&#39;s not empty.\r\n\r\n\r\n```\r\n@Path(&quot;/customer/&quot;)\r\npublic class CustomerResource {\r\n\r\n    @GET @Produces(&quot;text/xml&quot;)\r\n    @Path(&quot;{query: .*}/&quot;)\r\n    public List&lt;RestCustomer&gt; getCustomer(@PathParam(&quot;query&quot;) String query) {\r\n       // method body\r\n    }\r\n}\r\n```\r\n\r\nSo far it works good. You can send the request `http://example.com/resources/customer/` or `http://example.com/resource/customer/5` and it will work both ways.\r\n\r\nBut once I add other REST methods such as PUT, POST or DELETE, the `getCustomer()` method just stops working if the request is empty and it throws an `HTTP Status 405 - Method not allowed` error. Why is this happening? Is there any way to solve it?","title":"Jakarta REST: empty @PathParam in GET method only works if there are no other methods","body":"<p>I'm using Jakarta REST API in Jakarta EE 10 and I noticed that if I try to parse an empty <code>@PathParam</code> in a GET method it works only if there are no other REST methods in the same class.</p>\n<p>I have the following class, where the <code>getCustomer()</code> method takes the request no matter if it's empty or not. I omitted the method's body for brevity but basically it just returns a <code>List</code> of <code>RestCustomer</code> containing all of them if the request is empty or just the ones that match the request if it's not empty.</p>\n<pre><code>@Path(&quot;/customer/&quot;)\npublic class CustomerResource {\n\n    @GET @Produces(&quot;text/xml&quot;)\n    @Path(&quot;{query: .*}/&quot;)\n    public List&lt;RestCustomer&gt; getCustomer(@PathParam(&quot;query&quot;) String query) {\n       // method body\n    }\n}\n</code></pre>\n<p>So far it works good. You can send the request <code>http://example.com/resources/customer/</code> or <code>http://example.com/resource/customer/5</code> and it will work both ways.</p>\n<p>But once I add other REST methods such as PUT, POST or DELETE, the <code>getCustomer()</code> method just stops working if the request is empty and it throws an <code>HTTP Status 405 - Method not allowed</code> error. Why is this happening? Is there any way to solve it?</p>\n"},{"tags":["java","recursion","search","tree"],"answers":[{"tags":[],"owner":{"account_id":11049044,"reputation":82,"user_id":8114125,"display_name":"gufidown"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1545519475,"creation_date":1545518896,"answer_id":53899866,"question_id":53899814,"body_markdown":"Looks like your line:\r\n `else component.getDir(name)` is not checked for a return value. No matter whether that recursive call returns a found directory or null (nothing found), the next thing will be another round in the loop.\r\n\r\nJust check whether it returns not null, then return this again.","title":"How to search in a general tree a node in Java nonrecursive","body":"<p>Looks like your line:\n <code>else component.getDir(name)</code> is not checked for a return value. No matter whether that recursive call returns a found directory or null (nothing found), the next thing will be another round in the loop.</p>\n\n<p>Just check whether it returns not null, then return this again.</p>\n"}],"owner":{"account_id":14784411,"reputation":1,"user_id":10677057,"display_name":"aki"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692829221,"creation_date":1545518330,"question_id":53899814,"body_markdown":"I am new to Java so any advice would be really appreciated.  \r\nI have a tree-like File System with files and directories. I want to find a Directory by its name.\r\nComponent is an interface and both File and Directory implement it.\r\nI wrote this method in the class Directory in order to find a Directory named name. \r\n\r\n```java\r\npublic Directory getDir(String name) {\r\n    Iterator&lt;Component&gt; iterator = (Iterator&lt;Component&gt;)components.iterator();\r\n    Component component = null; \r\n    while(iterator.hasNext()) {\r\n        component = iterator.next();\r\n        if(component instanceof Directory) {\r\n            if(component.getName().equals(name))\r\n                return (Directory) component;\r\n            else component.getDir(name);\r\n         }\r\n     }\t\r\n    return null;\r\n}\r\n```\r\n\r\nSomehow, this method won&#39;t stop after finding my Directory.\r\nI tried writing &quot;`return component.getDir(name)`&quot; but it doesn&#39;t help. It won&#39;t search in every component of my node, just in the first one.\r\nWhat am I doing wrong?\r\nPlease help me.\r\nThank you","title":"How to search in a general tree a node in Java nonrecursive","body":"<p>I am new to Java so any advice would be really appreciated.<br />\nI have a tree-like File System with files and directories. I want to find a Directory by its name.\nComponent is an interface and both File and Directory implement it.\nI wrote this method in the class Directory in order to find a Directory named name.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public Directory getDir(String name) {\n    Iterator&lt;Component&gt; iterator = (Iterator&lt;Component&gt;)components.iterator();\n    Component component = null; \n    while(iterator.hasNext()) {\n        component = iterator.next();\n        if(component instanceof Directory) {\n            if(component.getName().equals(name))\n                return (Directory) component;\n            else component.getDir(name);\n         }\n     }  \n    return null;\n}\n</code></pre>\n<p>Somehow, this method won't stop after finding my Directory.\nI tried writing &quot;<code>return component.getDir(name)</code>&quot; but it doesn't help. It won't search in every component of my node, just in the first one.\nWhat am I doing wrong?\nPlease help me.\nThank you</p>\n"},{"tags":["java","hibernate"],"answers":[{"tags":[],"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1692728904,"creation_date":1692728904,"answer_id":76955986,"question_id":76955929,"body_markdown":"In your `heroesMap` class, you have defined the `id` field as an `int`:\r\n\r\n```java\r\nprivate int id;\r\n```\r\n\r\nHowever, in your `getRecord` method, you&#39;re passing a `String` as the ID:\r\n\r\n```java\r\npublic String getRecord(String id){\r\n    return this.session.get(heroesMap.class,id).toString();\r\n}\r\n```","title":"Java Hibernate Error: Provided id of the wrong type for class example4.heroesMap. Expected: class java.lang.Integer, got class java.lang.String","body":"<p>In your <code>heroesMap</code> class, you have defined the <code>id</code> field as an <code>int</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private int id;\n</code></pre>\n<p>However, in your <code>getRecord</code> method, you're passing a <code>String</code> as the ID:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public String getRecord(String id){\n    return this.session.get(heroesMap.class,id).toString();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15220950,"reputation":3,"user_id":11022313,"display_name":"Traums"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692829182,"creation_date":1692728907,"answer_id":76955987,"question_id":76955929,"body_markdown":"My fault was in  `getRecord(String id)`, the parameter should be int, than it works\r\nhttps://stackoverflow.com/questions/38950884/provided-id-of-the-wrong-type-for-class-classname-expected-class-java-lang-inte","title":"Java Hibernate Error: Provided id of the wrong type for class example4.heroesMap. Expected: class java.lang.Integer, got class java.lang.String","body":"<p>My fault was in  <code>getRecord(String id)</code>, the parameter should be int, than it works\n<a href=\"https://stackoverflow.com/questions/38950884/provided-id-of-the-wrong-type-for-class-classname-expected-class-java-lang-inte\">Provided id of the wrong type for class classname Expected: class java.lang.Integer, got class java.lang.String</a></p>\n"}],"owner":{"account_id":15220950,"reputation":3,"user_id":11022313,"display_name":"Traums"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76955986,"answer_count":2,"score":0,"last_activity_date":1692829182,"creation_date":1692728397,"question_id":76955929,"body_markdown":"I have a table \r\n\r\n```\r\ncreate table heroes\r\n(\r\n    id       int          null,\r\n    name     varchar(255) null,\r\n    level    int          null,\r\n    ultimate varchar(255) null\r\n);\r\n```\r\nThen connected cfg.xml file\r\n```\r\n&lt;!DOCTYPE hibernate-configuration PUBLIC\r\n        &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot;\r\n        &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\r\n&lt;hibernate-configuration&gt;\r\n    &lt;session-factory&gt;\r\n        &lt;!-- JDBC Database connection settings --&gt;\r\n        &lt;property name=&quot;connection.driver_class&quot;&gt;com.mysql.cj.jdbc.Driver&lt;/property&gt;\r\n        &lt;property name=&quot;connection.url&quot;&gt;jdbc:mysql://localhost:3306/xxi?useSSL=false&lt;/property&gt;\r\n        &lt;property name=&quot;connection.username&quot;&gt;admin&lt;/property&gt;\r\n        &lt;property name=&quot;connection.password&quot;&gt;12345&lt;/property&gt;\r\n        &lt;!-- JDBC connection pool settings ... using built-in test pool --&gt;\r\n        &lt;property name=&quot;connection.pool_size&quot;&gt;10&lt;/property&gt;\r\n        &lt;!-- Select our SQL dialect --&gt;\r\n        &lt;property name=&quot;dialect&quot;&gt;org.hibernate.dialect.MySQL5Dialect&lt;/property&gt;\r\n        &lt;!-- Echo the SQL to stdout --&gt;\r\n        &lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;\r\n        &lt;!-- Set the current session context --&gt;\r\n        &lt;property name=&quot;current_session_context_class&quot;&gt;thread&lt;/property&gt;\r\n        &lt;!-- Drop and re-create the database schema on startup --&gt;\r\n        &lt;property name=&quot;hbm2ddl.auto&quot;&gt;validate&lt;/property&gt;\r\n\r\n        &lt;mapping class=&quot;example4.heroesMap&quot;&gt;&lt;/mapping&gt;\r\n    &lt;/session-factory&gt;\r\n&lt;/hibernate-configuration&gt;\r\n```\r\nAnd class for my DB\r\n```\r\npackage example4;\r\n\r\nimport org.hibernate.annotations.GeneratorType;\r\n\r\nimport javax.persistence.*;\r\n\r\n@Entity\r\n@Table(name = &quot;heroes&quot;)\r\npublic class heroesMap {\r\n    @Id\r\n//    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private int id;\r\n    @Column(name = &quot;name&quot;)\r\n    private String name;\r\n    @Column(name = &quot;level&quot;)\r\n    private int level;\r\n    @Column(name = &quot;ultimate&quot;)\r\n    private String ultimate;\r\n}\r\n```\r\nError says that type mismatch in table definition but it looks similar, what have I done wrong?\r\nError text:  Provided id of the wrong type for class example4.heroesMap. Expected: class java.lang.Integer, got class java.lang.String\r\n\r\nI wanted to read record from the table but it keeps crashing\r\n```\r\npublic class Hibernate {\r\n    Session session;\r\n    Hibernate(){\r\n        StandardServiceRegistry registry = new StandardServiceRegistryBuilder()\r\n                                                .configure(&quot;hibernate.cfg.xml&quot;).build();\r\n        Metadata meta = new MetadataSources(registry).getMetadataBuilder().build();\r\n        SessionFactory factory = meta.getSessionFactoryBuilder().build();\r\n        this.session = factory.openSession();\r\n    }\r\n    public String getRecord(String id){\r\n        return this.session.get(heroesMap.class,id).toString();\r\n    }\r\n    public void close(){\r\n        this.session.close();\r\n    }\r\n}\r\n```","title":"Java Hibernate Error: Provided id of the wrong type for class example4.heroesMap. Expected: class java.lang.Integer, got class java.lang.String","body":"<p>I have a table</p>\n<pre><code>create table heroes\n(\n    id       int          null,\n    name     varchar(255) null,\n    level    int          null,\n    ultimate varchar(255) null\n);\n</code></pre>\n<p>Then connected cfg.xml file</p>\n<pre><code>&lt;!DOCTYPE hibernate-configuration PUBLIC\n        &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot;\n        &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\n&lt;hibernate-configuration&gt;\n    &lt;session-factory&gt;\n        &lt;!-- JDBC Database connection settings --&gt;\n        &lt;property name=&quot;connection.driver_class&quot;&gt;com.mysql.cj.jdbc.Driver&lt;/property&gt;\n        &lt;property name=&quot;connection.url&quot;&gt;jdbc:mysql://localhost:3306/xxi?useSSL=false&lt;/property&gt;\n        &lt;property name=&quot;connection.username&quot;&gt;admin&lt;/property&gt;\n        &lt;property name=&quot;connection.password&quot;&gt;12345&lt;/property&gt;\n        &lt;!-- JDBC connection pool settings ... using built-in test pool --&gt;\n        &lt;property name=&quot;connection.pool_size&quot;&gt;10&lt;/property&gt;\n        &lt;!-- Select our SQL dialect --&gt;\n        &lt;property name=&quot;dialect&quot;&gt;org.hibernate.dialect.MySQL5Dialect&lt;/property&gt;\n        &lt;!-- Echo the SQL to stdout --&gt;\n        &lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;\n        &lt;!-- Set the current session context --&gt;\n        &lt;property name=&quot;current_session_context_class&quot;&gt;thread&lt;/property&gt;\n        &lt;!-- Drop and re-create the database schema on startup --&gt;\n        &lt;property name=&quot;hbm2ddl.auto&quot;&gt;validate&lt;/property&gt;\n\n        &lt;mapping class=&quot;example4.heroesMap&quot;&gt;&lt;/mapping&gt;\n    &lt;/session-factory&gt;\n&lt;/hibernate-configuration&gt;\n</code></pre>\n<p>And class for my DB</p>\n<pre><code>package example4;\n\nimport org.hibernate.annotations.GeneratorType;\n\nimport javax.persistence.*;\n\n@Entity\n@Table(name = &quot;heroes&quot;)\npublic class heroesMap {\n    @Id\n//    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private int id;\n    @Column(name = &quot;name&quot;)\n    private String name;\n    @Column(name = &quot;level&quot;)\n    private int level;\n    @Column(name = &quot;ultimate&quot;)\n    private String ultimate;\n}\n</code></pre>\n<p>Error says that type mismatch in table definition but it looks similar, what have I done wrong?\nError text:  Provided id of the wrong type for class example4.heroesMap. Expected: class java.lang.Integer, got class java.lang.String</p>\n<p>I wanted to read record from the table but it keeps crashing</p>\n<pre><code>public class Hibernate {\n    Session session;\n    Hibernate(){\n        StandardServiceRegistry registry = new StandardServiceRegistryBuilder()\n                                                .configure(&quot;hibernate.cfg.xml&quot;).build();\n        Metadata meta = new MetadataSources(registry).getMetadataBuilder().build();\n        SessionFactory factory = meta.getSessionFactoryBuilder().build();\n        this.session = factory.openSession();\n    }\n    public String getRecord(String id){\n        return this.session.get(heroesMap.class,id).toString();\n    }\n    public void close(){\n        this.session.close();\n    }\n}\n</code></pre>\n"},{"tags":["java","exception","junit","junit4","assert"],"comments":[{"owner":{"account_id":1405259,"reputation":3061,"user_id":1333157,"accept_rate":92,"display_name":"ZeroOne"},"score":27,"creation_date":1358420754,"post_id":156503,"comment_id":19995904,"body_markdown":"The problem with any other approach but this is that they invariably end the test once the exception has been thrown. I, on the other hand, often still want to call `org.mockito.Mockito.verify` with various parameters to make sure that certain things happened (such that a logger service was called with the correct parameters) before the exception was thrown.","body":"The problem with any other approach but this is that they invariably end the test once the exception has been thrown. I, on the other hand, often still want to call <code>org.mockito.Mockito.verify</code> with various parameters to make sure that certain things happened (such that a logger service was called with the correct parameters) before the exception was thrown."},{"owner":{"account_id":228743,"reputation":10672,"user_id":491245,"accept_rate":93,"display_name":"PhoneixS"},"score":5,"creation_date":1392810371,"post_id":156503,"comment_id":33127980,"body_markdown":"You can see how to exceptions test in JUnit wiki page https://github.com/junit-team/junit/wiki/Exception-testing","body":"You can see how to exceptions test in JUnit wiki page <a href=\"https://github.com/junit-team/junit/wiki/Exception-testing\" rel=\"nofollow noreferrer\">github.com/junit-team/junit/wiki/Exception-testing</a>"},{"owner":{"account_id":21279,"reputation":20918,"user_id":51577,"accept_rate":62,"display_name":"tddmonkey"},"score":6,"creation_date":1419526915,"post_id":156503,"comment_id":43715648,"body_markdown":"@ZeroOne - For that I would have two different tests- one for the exception and one to verify interaction with your mock.","body":"@ZeroOne - For that I would have two different tests- one for the exception and one to verify interaction with your mock."},{"owner":{"account_id":346348,"reputation":2620,"user_id":679822,"accept_rate":73,"display_name":"Dilini Rajapaksha"},"score":0,"creation_date":1493694337,"post_id":156503,"comment_id":74502364,"body_markdown":"There is a way to do this with JUnit 5, I have updated my answer below.","body":"There is a way to do this with JUnit 5, I have updated my answer below."},{"owner":{"account_id":4961451,"reputation":1211,"user_id":3992420,"accept_rate":50,"display_name":"Hitesh Garg"},"score":0,"creation_date":1618251131,"post_id":156503,"comment_id":118540776,"body_markdown":"Here is a nice example on [how assert that an exception is Thrown](https://www.codingeek.com/tutorials/junit/assert-exception-thrown-junit/) it in JUnit4 and JUnit5","body":"Here is a nice example on <a href=\"https://www.codingeek.com/tutorials/junit/assert-exception-thrown-junit/\" rel=\"nofollow noreferrer\">how assert that an exception is Thrown</a> it in JUnit4 and JUnit5"}],"answers":[{"comments":[{"owner":{"account_id":259109,"reputation":2800,"user_id":541755,"accept_rate":71,"display_name":"jontejj"},"score":4,"creation_date":1363277617,"post_id":156515,"comment_id":21795583,"body_markdown":"Also, you won&#39;t see what kind of Exception ex is in the test results when the day comes where the test fails.","body":"Also, you won&#39;t see what kind of Exception ex is in the test results when the day comes where the test fails."},{"owner":{"account_id":76113,"reputation":2618,"user_id":218125,"accept_rate":92,"display_name":"Cypher"},"score":1,"creation_date":1542243266,"post_id":156515,"comment_id":93502730,"body_markdown":"This can be improved a bit by changing how you assert at the end. `assertEquals(ExpectedException.class, e.getClass())` will show you the expected and actual values when the test fails.","body":"This can be improved a bit by changing how you assert at the end. <code>assertEquals(ExpectedException.class, e.getClass())</code> will show you the expected and actual values when the test fails."}],"tags":[],"owner":{"account_id":6685,"reputation":1940,"user_id":11347,"display_name":"Johan"},"comment_count":2,"down_vote_count":4,"up_vote_count":50,"is_accepted":false,"score":46,"last_activity_date":1593030260,"creation_date":1222844581,"answer_id":156515,"question_id":156503,"body_markdown":"How about this: catch a very general exception, make sure it makes it out of the catch block, then assert that the class of the exception is what you expect it to be.  This assert will fail if a) the exception is of the wrong type (eg. if you got a Null Pointer instead) and b) the exception wasn&#39;t ever thrown.\r\n\r\n\r\n    public void testFooThrowsIndexOutOfBoundsException() {\r\n      Throwable e = null;\r\n    \r\n      try {\r\n        foo.doStuff();\r\n      } catch (Throwable ex) {\r\n        e = ex;\r\n      }\r\n    \r\n      assertTrue(e instanceof IndexOutOfBoundsException);\r\n    }","title":"How do you assert that a certain exception is thrown in JUnit tests?","body":"<p>How about this: catch a very general exception, make sure it makes it out of the catch block, then assert that the class of the exception is what you expect it to be.  This assert will fail if a) the exception is of the wrong type (eg. if you got a Null Pointer instead) and b) the exception wasn't ever thrown.</p>\n<pre><code>public void testFooThrowsIndexOutOfBoundsException() {\n  Throwable e = null;\n\n  try {\n    foo.doStuff();\n  } catch (Throwable ex) {\n    e = ex;\n  }\n\n  assertTrue(e instanceof IndexOutOfBoundsException);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9606,"reputation":19644,"user_id":17826,"display_name":"Mark Bessey"},"comment_count":0,"down_vote_count":2,"up_vote_count":14,"is_accepted":false,"score":12,"last_activity_date":1593030467,"creation_date":1222844749,"answer_id":156518,"question_id":156503,"body_markdown":"JUnit has built-in support for this, with an [&quot;expected&quot; attribute][1].\r\n\r\n\r\n  [1]: http://junit.sourceforge.net/doc/faq/faq.htm#tests_7","title":"How do you assert that a certain exception is thrown in JUnit tests?","body":"<p>JUnit has built-in support for this, with an <a href=\"http://junit.sourceforge.net/doc/faq/faq.htm#tests_7\" rel=\"nofollow noreferrer\">&quot;expected&quot; attribute</a>.</p>\n"},{"comments":[{"owner":{"account_id":125813,"reputation":23095,"user_id":321862,"accept_rate":84,"display_name":"Oh Chin Boon"},"score":78,"creation_date":1309186257,"post_id":156528,"comment_id":7637709,"body_markdown":"This piece of code will not work if you expect an exception only somewhere in your code, and not a blanket like this one.","body":"This piece of code will not work if you expect an exception only somewhere in your code, and not a blanket like this one."},{"owner":{"account_id":422603,"reputation":4344,"user_id":801466,"accept_rate":40,"display_name":"Artem Oboturov"},"score":5,"creation_date":1335542508,"post_id":156528,"comment_id":13339396,"body_markdown":"@skaffman This wouldn&#39;t work with org.junit.experimental.theories.Theory runned by org.junit.experimental.theories.Theories","body":"@skaffman This wouldn&#39;t work with org.junit.experimental.theories.Theory runned by org.junit.experimental.theories.Theories"},{"owner":{"account_id":54888,"reputation":101121,"user_id":164299,"accept_rate":99,"display_name":"Rachel"},"score":0,"creation_date":1339181331,"post_id":156528,"comment_id":14298850,"body_markdown":"@skaffman: Is there a way to do similar thing in `junit 3.8`, expect method to throw exception?","body":"@skaffman: Is there a way to do similar thing in <code>junit 3.8</code>, expect method to throw exception?"},{"owner":{"account_id":1488715,"reputation":1432,"user_id":1396362,"display_name":"Kevin Wittek"},"score":85,"creation_date":1421937368,"post_id":156528,"comment_id":44559127,"body_markdown":"Roy Osherove discourages this kind of Exception testing in *The art of Unit Testing*, since the Exception might be anywhere inside the test and not only inside the unit under test.","body":"Roy Osherove discourages this kind of Exception testing in <i>The art of Unit Testing</i>, since the Exception might be anywhere inside the test and not only inside the unit under test."},{"owner":{"account_id":3097283,"reputation":3541,"user_id":2622234,"accept_rate":68,"display_name":"sara"},"score":0,"creation_date":1458659207,"post_id":156528,"comment_id":59953339,"body_markdown":"agree with @Kiview&#39;s point, this way might not actually test what you wanted to test. false positives are a pain.","body":"agree with @Kiview&#39;s point, this way might not actually test what you wanted to test. false positives are a pain."},{"owner":{"account_id":5141156,"reputation":634,"user_id":4118496,"display_name":"nickbdyer"},"score":23,"creation_date":1462278133,"post_id":156528,"comment_id":61560463,"body_markdown":"I disagree with @Kiview/Roy Osherove. In my view, tests should be for behaviour, not implementation. By testing that a specific method can throw an error, you are tying your tests directly to the implementation. I would argue that testing in the method shown above provides a more valuable test. The caveat I would add is that in this case I would test for a custom exception, so that I know I am getting the exception I really want.","body":"I disagree with @Kiview/Roy Osherove. In my view, tests should be for behaviour, not implementation. By testing that a specific method can throw an error, you are tying your tests directly to the implementation. I would argue that testing in the method shown above provides a more valuable test. The caveat I would add is that in this case I would test for a custom exception, so that I know I am getting the exception I really want."},{"owner":{"account_id":1488715,"reputation":1432,"user_id":1396362,"display_name":"Kevin Wittek"},"score":2,"creation_date":1462292256,"post_id":156528,"comment_id":61570795,"body_markdown":"@nickbdyer Of course you want to test the behaviour. But do you want to test the behaviour of `ArrayList?` constructor or of the `get()` method? In the example above, you are testing both. The test would pass if your constructor would throw this exception, although you want to test the `get()` method.","body":"@nickbdyer Of course you want to test the behaviour. But do you want to test the behaviour of <code>ArrayList?</code> constructor or of the <code>get()</code> method? In the example above, you are testing both. The test would pass if your constructor would throw this exception, although you want to test the <code>get()</code> method."},{"owner":{"account_id":5141156,"reputation":634,"user_id":4118496,"display_name":"nickbdyer"},"score":6,"creation_date":1462293189,"post_id":156528,"comment_id":61571336,"body_markdown":"Neither. I want to test the behaviour of the class. What is important, is that if I try to retrieve something that isn&#39;t there, I get an exception. The fact that the data structure is `ArrayList` that responds to `get()` is irrelevant. If I chose in the future to move to a primitive array, I would then have to change this test implementation. The data structure should be hidden, so that the test can focus on the behaviour of the *class*.","body":"Neither. I want to test the behaviour of the class. What is important, is that if I try to retrieve something that isn&#39;t there, I get an exception. The fact that the data structure is <code>ArrayList</code> that responds to <code>get()</code> is irrelevant. If I chose in the future to move to a primitive array, I would then have to change this test implementation. The data structure should be hidden, so that the test can focus on the behaviour of the <i>class</i>."},{"owner":{"account_id":1236305,"reputation":521,"user_id":1199832,"accept_rate":50,"display_name":"Halley"},"score":0,"creation_date":1478608139,"post_id":156528,"comment_id":68217379,"body_markdown":"This question pops up in Google when you search for JUnit Exceptions. Can someone edit this answer and provide the info related to JUnit 4.7&#39;s features? http://stackoverflow.com/a/16725280/1199832","body":"This question pops up in Google when you search for JUnit Exceptions. Can someone edit this answer and provide the info related to JUnit 4.7&#39;s features? <a href=\"http://stackoverflow.com/a/16725280/1199832\">stackoverflow.com/a/16725280/1199832</a>"},{"owner":{"account_id":1913219,"reputation":1641,"user_id":1726450,"accept_rate":61,"display_name":"Dylanthepiguy"},"score":0,"creation_date":1489700834,"post_id":156528,"comment_id":72799285,"body_markdown":"@OhChinBoon You could make your own subclass of Exception or RuntimeException and catch that. And then make sure your subclass isn&#39;t being used in more than one place","body":"@OhChinBoon You could make your own subclass of Exception or RuntimeException and catch that. And then make sure your subclass isn&#39;t being used in more than one place"},{"owner":{"account_id":3093339,"reputation":9944,"user_id":2619038,"accept_rate":100,"display_name":"NoName"},"score":1,"creation_date":1508158919,"post_id":156528,"comment_id":80487346,"body_markdown":"public void testIndexOutOfBoundsException() throws IndexOutOfBoundsException { ... } should be added.","body":"public void testIndexOutOfBoundsException() throws IndexOutOfBoundsException { ... } should be added."},{"owner":{"account_id":7746239,"reputation":417,"user_id":5863896,"accept_rate":86,"display_name":"Juan Salvador"},"score":0,"creation_date":1518203427,"post_id":156528,"comment_id":84424209,"body_markdown":"This works nice !.... but, it seems that when you use this sort of solutions, actually you are not doing the right thing with exceptions. Please read the [link](http://www.baeldung.com/exception-handling-for-rest-with-spring?utm_source=email&amp;utm_medium=email&amp;utm_campaign=series1-rest&amp;tl_inbound=1&amp;tl_target_all=1&amp;tl_period_type=3) the *new solution3*. Errors and Exceptions should not interrupt the unit testing.","body":"This works nice !.... but, it seems that when you use this sort of solutions, actually you are not doing the right thing with exceptions. Please read the <a href=\"http://www.baeldung.com/exception-handling-for-rest-with-spring?utm_source=email&amp;utm_medium=email&amp;utm_campaign=series1-rest&amp;tl_inbound=1&amp;tl_target_all=1&amp;tl_period_type=3\" rel=\"nofollow noreferrer\">link</a> the <i>new solution3</i>. Errors and Exceptions should not interrupt the unit testing."},{"owner":{"account_id":4396854,"reputation":1866,"user_id":3583589,"display_name":"benez"},"score":1,"creation_date":1518605149,"post_id":156528,"comment_id":84571804,"body_markdown":"i think this way is legit as well, just a personal preference. but it is also nice to mention that this might &quot;catch&quot; all exceptions of that type within your test and sometimes it will be more accurate to catch the exception inside the test around a specific method call, where you expect the exception to occur. so if you keep that in mind, it&#39;s legit to write a test just like this","body":"i think this way is legit as well, just a personal preference. but it is also nice to mention that this might &quot;catch&quot; all exceptions of that type within your test and sometimes it will be more accurate to catch the exception inside the test around a specific method call, where you expect the exception to occur. so if you keep that in mind, it&#39;s legit to write a test just like this"},{"owner":{"account_id":7870888,"reputation":473,"user_id":5948237,"display_name":"Vivek Chavda"},"score":3,"creation_date":1529517040,"post_id":156528,"comment_id":88906243,"body_markdown":"@nickbdyer I think there&#39;s some miscommunication here. Kiview/Kevin Wittek is saying any method used in the test could throw the exception and cause the test to pass without reaching the statement that is actually supposed to throw an exception of that type. The data structure being used is irrelevant to his point. If the structure is wrapped inside a method of the class under test, you&#39;re right that it doesn&#39;t matter which statement inside that class is throwing the exception, but he wasn&#39;t contradicting that.","body":"@nickbdyer I think there&#39;s some miscommunication here. Kiview/Kevin Wittek is saying any method used in the test could throw the exception and cause the test to pass without reaching the statement that is actually supposed to throw an exception of that type. The data structure being used is irrelevant to his point. If the structure is wrapped inside a method of the class under test, you&#39;re right that it doesn&#39;t matter which statement inside that class is throwing the exception, but he wasn&#39;t contradicting that."}],"tags":[],"owner":{"account_id":11089,"reputation":400050,"user_id":21234,"accept_rate":91,"display_name":"skaffman"},"comment_count":14,"down_vote_count":27,"up_vote_count":2588,"is_accepted":true,"score":2561,"last_activity_date":1666765656,"creation_date":1222845133,"answer_id":156528,"question_id":156503,"body_markdown":"It depends on the JUnit version and what assert libraries you use.\r\n\r\n* For JUnit5 and 4.13 [see answer](https://stackoverflow.com/a/2935935/2986984)\r\n* If you use AssertJ or google-truth, [see answer](https://stackoverflow.com/a/41019785/2986984)\r\n\r\nThe original answer for `JUnit &lt;= 4.12` was:\r\n\r\n```java\r\n    @Test(expected = IndexOutOfBoundsException.class)\r\n    public void testIndexOutOfBoundsException() {\r\n\r\n        ArrayList emptyList = new ArrayList();\r\n    \tObject o = emptyList.get(0);\r\n\r\n    }\r\n```\r\n\r\nThough [answer](https://stackoverflow.com/a/31826781/2986984) has more options for JUnit &lt;= 4.12.\r\n\r\nReference: \r\n\r\n* [JUnit Test-FAQ](https://junit.org/junit4/faq.html#atests_7)\r\n","title":"How do you assert that a certain exception is thrown in JUnit tests?","body":"<p>It depends on the JUnit version and what assert libraries you use.</p>\n<ul>\n<li>For JUnit5 and 4.13 <a href=\"https://stackoverflow.com/a/2935935/2986984\">see answer</a></li>\n<li>If you use AssertJ or google-truth, <a href=\"https://stackoverflow.com/a/41019785/2986984\">see answer</a></li>\n</ul>\n<p>The original answer for <code>JUnit &lt;= 4.12</code> was:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Test(expected = IndexOutOfBoundsException.class)\n    public void testIndexOutOfBoundsException() {\n\n        ArrayList emptyList = new ArrayList();\n        Object o = emptyList.get(0);\n\n    }\n</code></pre>\n<p>Though <a href=\"https://stackoverflow.com/a/31826781/2986984\">answer</a> has more options for JUnit &lt;= 4.12.</p>\n<p>Reference:</p>\n<ul>\n<li><a href=\"https://junit.org/junit4/faq.html#atests_7\" rel=\"noreferrer\">JUnit Test-FAQ</a></li>\n</ul>\n"},{"comments":[{"owner":{"account_id":37575,"reputation":2652,"user_id":107444,"accept_rate":80,"display_name":"Rodney Gitzel"},"score":111,"creation_date":1286385739,"post_id":156868,"comment_id":4123453,"body_markdown":"Maybe I&#39;m old school but I still prefer this.  It also gives me a place to test the exception itself:  sometimes I have exceptions with getters for certain values, or I might simply look for a particular value in the message (e.g. looking for &quot;xyz&quot; in the message &quot;unrecognized code &#39;xyz&#39;&quot;).","body":"Maybe I&#39;m old school but I still prefer this.  It also gives me a place to test the exception itself:  sometimes I have exceptions with getters for certain values, or I might simply look for a particular value in the message (e.g. looking for &quot;xyz&quot; in the message &quot;unrecognized code &#39;xyz&#39;&quot;)."},{"owner":{"account_id":30392,"reputation":9804,"user_id":82880,"accept_rate":62,"display_name":"Eddie"},"score":3,"creation_date":1299698517,"post_id":156868,"comment_id":5911967,"body_markdown":"I think NamshubWriter&#39;s approach gives you the best of both worlds.","body":"I think NamshubWriter&#39;s approach gives you the best of both worlds."},{"owner":{"account_id":125813,"reputation":23095,"user_id":321862,"accept_rate":84,"display_name":"Oh Chin Boon"},"score":0,"creation_date":1309188051,"post_id":156868,"comment_id":7638297,"body_markdown":"+1 useful in some scenarios where expected = xx doesn&#39;t match requirements.","body":"+1 useful in some scenarios where expected = xx doesn&#39;t match requirements."},{"owner":{"account_id":1179380,"reputation":1392,"user_id":1154664,"accept_rate":75,"display_name":"user1154664"},"score":4,"creation_date":1349802425,"post_id":156868,"comment_id":17316300,"body_markdown":"Using ExpectedException you could call N exception.expect per method to test like this  \nexception.expect(IndexOutOfBoundsException.class);\nfoo.doStuff1();\nexception.expect(IndexOutOfBoundsException.class);\nfoo.doStuff2();\nexception.expect(IndexOutOfBoundsException.class);\nfoo.doStuff3();","body":"Using ExpectedException you could call N exception.expect per method to test like this   exception.expect(IndexOutOfBoundsException.class); foo.doStuff1(); exception.expect(IndexOutOfBoundsException.class); foo.doStuff2(); exception.expect(IndexOutOfBoundsException.class); foo.doStuff3();"},{"owner":{"account_id":34025,"reputation":23628,"user_id":95725,"display_name":"NamshubWriter"},"score":10,"creation_date":1393259200,"post_id":156868,"comment_id":33331182,"body_markdown":"@user1154664 Actually, you can&#39;t. Using ExpectedException you can only test that one method throws an exception, because when that method is called, the test will stop executing because it threw the expected exception!","body":"@user1154664 Actually, you can&#39;t. Using ExpectedException you can only test that one method throws an exception, because when that method is called, the test will stop executing because it threw the expected exception!"},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":2,"creation_date":1406372016,"post_id":156868,"comment_id":38814202,"body_markdown":"Your first sentence just isn&#39;t true.  When using `ExpectedException`, the normal thing to do is to set the expectation immediately before the line that you expect to throw the exception.  That way, if an earlier line throws the exception, it won&#39;t trigger the rule, and the test will fail.","body":"Your first sentence just isn&#39;t true.  When using <code>ExpectedException</code>, the normal thing to do is to set the expectation immediately before the line that you expect to throw the exception.  That way, if an earlier line throws the exception, it won&#39;t trigger the rule, and the test will fail."},{"owner":{"account_id":5529491,"reputation":2847,"user_id":4389984,"accept_rate":34,"display_name":"Anmol Gupta"},"score":0,"creation_date":1444673725,"post_id":156868,"comment_id":53991575,"body_markdown":"This was apt for my case. I wanted to check state of some objects after the exception was thrown which could not be done with &#39;expected&#39; as it just exists after exception is thrown.","body":"This was apt for my case. I wanted to check state of some objects after the exception was thrown which could not be done with &#39;expected&#39; as it just exists after exception is thrown."},{"owner":{"account_id":4236721,"reputation":269,"user_id":3467675,"accept_rate":71,"display_name":"Arthur Welsch"},"score":0,"creation_date":1471939818,"post_id":156868,"comment_id":65538311,"body_markdown":"And also this is compatible with Arquillian-Tests. I tried this with @Rule Annotation but got Initialization Error with Arquillian.","body":"And also this is compatible with Arquillian-Tests. I tried this with @Rule Annotation but got Initialization Error with Arquillian."},{"owner":{"account_id":234362,"reputation":17417,"user_id":500451,"accept_rate":86,"display_name":"Bertie"},"score":0,"creation_date":1498908712,"post_id":156868,"comment_id":76700537,"body_markdown":"Furthermore, with this approach, we could add more assertions in the exception handling for state checks if necessary","body":"Furthermore, with this approach, we could add more assertions in the exception handling for state checks if necessary"},{"owner":{"account_id":199441,"reputation":652,"user_id":444769,"accept_rate":67,"display_name":"Marc Bouvier"},"score":0,"creation_date":1524732894,"post_id":156868,"comment_id":87093638,"body_markdown":"I agree, `ExpectedException` rule is not suitable for every situation.","body":"I agree, <code>ExpectedException</code> rule is not suitable for every situation."},{"owner":{"account_id":2682989,"reputation":264,"user_id":2317924,"display_name":"ebwb"},"score":0,"creation_date":1556804676,"post_id":156868,"comment_id":98559591,"body_markdown":"Still using this in 2019. Makes it easy for me to run other verification code after the (otherwise execution-ending-) exception is thrown.","body":"Still using this in 2019. Makes it easy for me to run other verification code after the (otherwise execution-ending-) exception is thrown."},{"owner":{"account_id":7470674,"reputation":81,"user_id":5678779,"display_name":"JohnnyB"},"score":0,"creation_date":1604951745,"post_id":156868,"comment_id":114499121,"body_markdown":"Problem with that approach is code coverage will never pick up that line of code","body":"Problem with that approach is code coverage will never pick up that line of code"},{"owner":{"account_id":1160223,"reputation":366,"user_id":1139888,"display_name":"SudhirKumar"},"score":0,"creation_date":1635984126,"post_id":156868,"comment_id":123440648,"body_markdown":"i have a method execute() which throws checked IOException, going with above approach, catch block didn&#39;t catch IOException.","body":"i have a method execute() which throws checked IOException, going with above approach, catch block didn&#39;t catch IOException."},{"owner":{"account_id":239945,"reputation":555,"user_id":509882,"accept_rate":23,"display_name":"Arthur"},"score":0,"creation_date":1669678570,"post_id":156868,"comment_id":131692901,"body_markdown":"Nice. But we also want to `fail()` when the wrong exception is thrown, which can easily be tested by adding a `catch (Exception e)` handler.","body":"Nice. But we also want to <code>fail()</code> when the wrong exception is thrown, which can easily be tested by adding a <code>catch (Exception e)</code> handler."}],"tags":[],"owner":{"account_id":6957,"reputation":74531,"user_id":11858,"accept_rate":93,"display_name":"daveb"},"comment_count":14,"down_vote_count":5,"up_vote_count":510,"is_accepted":false,"score":505,"last_activity_date":1222853812,"creation_date":1222853506,"answer_id":156868,"question_id":156503,"body_markdown":"Be careful using expected exception, because it only asserts that the **method** threw that exception, not a **particular line of code** in the test.\r\n\r\nI tend to use this for testing parameter validation, because such methods are usually very simple, but more complex tests might better be served with:\r\n\r\n    try {\r\n        methodThatShouldThrow();\r\n        fail( &quot;My method didn&#39;t throw when I expected it to&quot; );\r\n    } catch (MyException expectedException) {\r\n    }\r\n\r\n\r\nApply judgement.\r\n","title":"How do you assert that a certain exception is thrown in JUnit tests?","body":"<p>Be careful using expected exception, because it only asserts that the <strong>method</strong> threw that exception, not a <strong>particular line of code</strong> in the test.</p>\n\n<p>I tend to use this for testing parameter validation, because such methods are usually very simple, but more complex tests might better be served with:</p>\n\n<pre><code>try {\n    methodThatShouldThrow();\n    fail( \"My method didn't throw when I expected it to\" );\n} catch (MyException expectedException) {\n}\n</code></pre>\n\n<p>Apply judgement.</p>\n"},{"comments":[{"owner":{"account_id":17101,"reputation":9861,"user_id":37941,"accept_rate":70,"display_name":"bacar"},"score":17,"creation_date":1341574915,"post_id":2935935,"comment_id":14966434,"body_markdown":"@skaffman -  If I&#39;ve understood this correctly, it looks like the exception.expect is being applied only within one test, not the whole class.","body":"@skaffman -  If I&#39;ve understood this correctly, it looks like the exception.expect is being applied only within one test, not the whole class."},{"owner":{"account_id":2042701,"reputation":4102,"user_id":1823497,"accept_rate":92,"display_name":"Mohammad Jafar Mashhadi"},"score":5,"creation_date":1372493157,"post_id":2935935,"comment_id":25225338,"body_markdown":"If the exception we expect to be thrown is an checked exception, should we add throws or try-catch or test this situation in another way?","body":"If the exception we expect to be thrown is an checked exception, should we add throws or try-catch or test this situation in another way?"},{"owner":{"account_id":1033857,"reputation":17546,"user_id":1041641,"accept_rate":67,"display_name":"TmTron"},"score":1,"creation_date":1380292558,"post_id":2935935,"comment_id":28159012,"body_markdown":"IMHO the answer from _rwoo_ below is a much better solution (http://code.google.com/p/catch-exception/)\ni.e. in this example when you `throw new NullPointerException();` after `foo.doStuff()` the test will **not** fail with an NPE.","body":"IMHO the answer from <i>rwoo</i> below is a much better solution (<a href=\"http://code.google.com/p/catch-exception/\" rel=\"nofollow noreferrer\">code.google.com/p/catch-exception</a>) i.e. in this example when you <code>throw new NullPointerException();</code> after <code>foo.doStuff()</code> the test will <b>not</b> fail with an NPE."},{"owner":{"account_id":156187,"reputation":4673,"user_id":373327,"accept_rate":65,"display_name":"Jason Thompson"},"score":5,"creation_date":1389974341,"post_id":2935935,"comment_id":31906025,"body_markdown":"@MartinTrummer No code should run after foo.doStuff() since the exception is thrown and the method is exited. Having code after an expected exception (with the exception of closing resources in a finally) is unhelpful anyway since it should never be executed if the exception is thrown.","body":"@MartinTrummer No code should run after foo.doStuff() since the exception is thrown and the method is exited. Having code after an expected exception (with the exception of closing resources in a finally) is unhelpful anyway since it should never be executed if the exception is thrown."},{"owner":{"account_id":1033857,"reputation":17546,"user_id":1041641,"accept_rate":67,"display_name":"TmTron"},"score":1,"creation_date":1390210361,"post_id":2935935,"comment_id":31977767,"body_markdown":"@Jason Thompson: &quot;should&quot; is nice, but not bullet-proof: With verify-exception you can be sure that the test is okay, even if someone else \nadded some code after `doStuff()`: when the new code passes, so does the test and more importantly: when the new code throws, the test will fail. the given &quot;solution&quot; would hide this fact (and moreover verify-exception is more concise and thus less error-prone):","body":"@Jason Thompson: &quot;should&quot; is nice, but not bullet-proof: With verify-exception you can be sure that the test is okay, even if someone else  added some code after <code>doStuff()</code>: when the new code passes, so does the test and more importantly: when the new code throws, the test will fail. the given &quot;solution&quot; would hide this fact (and moreover verify-exception is more concise and thus less error-prone):"},{"owner":{"account_id":156187,"reputation":4673,"user_id":373327,"accept_rate":65,"display_name":"Jason Thompson"},"score":1,"creation_date":1390229483,"post_id":2935935,"comment_id":31989797,"body_markdown":"@MartinTrummer What I&#39;m struggling to understand is how code can execute after an exception is thrown. Perhaps you can give an example. My understanding is that as soon as an exception is thrown, the method exits with an exception. So if I had a function that looked like this: void myMethod { throw new IllegalStateException(); executeOtherMethod(); } As far as I know, there is no way executeOtherMethod() would ever be called. So it&#39;s a non issue. This code doesn&#39;t change how java works, but rather tells the test runner that the method will throw an exception and some characteristics of it.","body":"@MartinTrummer What I&#39;m struggling to understand is how code can execute after an exception is thrown. Perhaps you can give an example. My understanding is that as soon as an exception is thrown, the method exits with an exception. So if I had a function that looked like this: void myMethod { throw new IllegalStateException(); executeOtherMethod(); } As far as I know, there is no way executeOtherMethod() would ever be called. So it&#39;s a non issue. This code doesn&#39;t change how java works, but rather tells the test runner that the method will throw an exception and some characteristics of it."},{"owner":{"account_id":1033857,"reputation":17546,"user_id":1041641,"accept_rate":67,"display_name":"TmTron"},"score":1,"creation_date":1390284863,"post_id":2935935,"comment_id":32013559,"body_markdown":"@Jason but that&#39;s not the code you have.\nyou have `foo.doStuff(); bar.doStuff();` - and you expect `foo.doStuff();` to throw.\n\nso if it does throw, `bar.doStuff()` is never executed (that&#39;s bad).\nbut even worse is the case, when the code changes and `foo.doStuff()` does not throw anymore.\n\nnow it&#39;s possible that `bar.doStuff()` throws insteead- the test passes - and you don&#39;t notice that the new code actually broke the original expectations that `foo.doStuff();` throws.","body":"@Jason but that&#39;s not the code you have. you have <code>foo.doStuff(); bar.doStuff();</code> - and you expect <code>foo.doStuff();</code> to throw.  so if it does throw, <code>bar.doStuff()</code> is never executed (that&#39;s bad). but even worse is the case, when the code changes and <code>foo.doStuff()</code> does not throw anymore.  now it&#39;s possible that <code>bar.doStuff()</code> throws insteead- the test passes - and you don&#39;t notice that the new code actually broke the original expectations that <code>foo.doStuff();</code> throws."},{"owner":{"account_id":31908,"reputation":21538,"user_id":87979,"accept_rate":83,"display_name":"Tom"},"score":0,"creation_date":1403293307,"post_id":2935935,"comment_id":37618136,"body_markdown":"@JasonThompson: usually in a testing environment the exception is swallowed and you assert it was thrown. The test doesn&#39;t exit in that case.","body":"@JasonThompson: usually in a testing environment the exception is swallowed and you assert it was thrown. The test doesn&#39;t exit in that case."},{"owner":{"account_id":31908,"reputation":21538,"user_id":87979,"accept_rate":83,"display_name":"Tom"},"score":0,"creation_date":1403293353,"post_id":2935935,"comment_id":37618154,"body_markdown":"As I commented on rwoo&#39;s answer, I think the drawback with his library is that you can&#39;t proxy every object [for example classes that are final?]... but I&#39;m not sure without trying it out.","body":"As I commented on rwoo&#39;s answer, I think the drawback with his library is that you can&#39;t proxy every object [for example classes that are final?]... but I&#39;m not sure without trying it out."},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":9,"creation_date":1406372327,"post_id":2935935,"comment_id":38814256,"body_markdown":"This is the best approach.  There are two advantages here, compared to skaffman&#39;s solution.  Firstly, the `ExpectedException` class has ways of matching the exception&#39;s message, or even writing your own matcher that depends on the class of exception.  Secondly, you can set your expectation immediately before the line of code that you expect to throw the exception - which means your test will fail if the wrong line of code throws the exception; whereas there&#39;s no way to do that with skaffman&#39;s solution.","body":"This is the best approach.  There are two advantages here, compared to skaffman&#39;s solution.  Firstly, the <code>ExpectedException</code> class has ways of matching the exception&#39;s message, or even writing your own matcher that depends on the class of exception.  Secondly, you can set your expectation immediately before the line of code that you expect to throw the exception - which means your test will fail if the wrong line of code throws the exception; whereas there&#39;s no way to do that with skaffman&#39;s solution."},{"owner":{"account_id":4628451,"reputation":2085,"user_id":3751590,"accept_rate":57,"display_name":"singe3"},"score":0,"creation_date":1407399462,"post_id":2935935,"comment_id":39202011,"body_markdown":"Doesn&#39;t work when we extend TestCase, the test fails although the exception is thrown as expected","body":"Doesn&#39;t work when we extend TestCase, the test fails although the exception is thrown as expected"},{"owner":{"account_id":34025,"reputation":23628,"user_id":95725,"display_name":"NamshubWriter"},"score":1,"creation_date":1411318566,"post_id":2935935,"comment_id":40647519,"body_markdown":"@singe31 The OP asked about JUnit4, and JUnit4-style tests shouldn&#39;t extend TestCase","body":"@singe31 The OP asked about JUnit4, and JUnit4-style tests shouldn&#39;t extend TestCase"},{"owner":{"account_id":313216,"reputation":44997,"user_id":627727,"accept_rate":84,"display_name":"mkobit"},"score":1,"creation_date":1415835106,"post_id":2935935,"comment_id":42350369,"body_markdown":"@DavidWallace the problem I with this approach is if you want to assert or check any behavior after the executed methods (like verify that any mock behavior did or did not occur) you cannot do it because your test will exit execution when the exception is throw. This can lead to unexpected test behavior if you have some `verify` after the method call that you believe is getting executed, but it actually isn&#39;t.","body":"@DavidWallace the problem I with this approach is if you want to assert or check any behavior after the executed methods (like verify that any mock behavior did or did not occur) you cannot do it because your test will exit execution when the exception is throw. This can lead to unexpected test behavior if you have some <code>verify</code> after the method call that you believe is getting executed, but it actually isn&#39;t."},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1415835377,"post_id":2935935,"comment_id":42350459,"body_markdown":"@MikeKobit - So are you testing that the exception is thrown, or are you testing something else?  I am a strong advocate of the &quot;one test case, one assertion&quot; approach - that is, if you&#39;re testing the throwing of the exception, there shouldn&#39;t be any other asserts or verifies occurring after the exception.","body":"@MikeKobit - So are you testing that the exception is thrown, or are you testing something else?  I am a strong advocate of the &quot;one test case, one assertion&quot; approach - that is, if you&#39;re testing the throwing of the exception, there shouldn&#39;t be any other asserts or verifies occurring after the exception."},{"owner":{"account_id":313216,"reputation":44997,"user_id":627727,"accept_rate":84,"display_name":"mkobit"},"score":1,"creation_date":1415841248,"post_id":2935935,"comment_id":42352135,"body_markdown":"@DavidWallace I&#39;ve had the case before where I want to test a method on a component that will throw an exception. I also want to make sure that a side effect has/has not happened. If I am using a mock framework like Mockito with the answer above, I wouldn&#39;t be able to verify any behavior. Example demoing sort of what I am talking about - http://stackoverflow.com/questions/13224288/mockito-verify-after-exception-junit-4-10","body":"@DavidWallace I&#39;ve had the case before where I want to test a method on a component that will throw an exception. I also want to make sure that a side effect has/has not happened. If I am using a mock framework like Mockito with the answer above, I wouldn&#39;t be able to verify any behavior. Example demoing sort of what I am talking about - <a href=\"http://stackoverflow.com/questions/13224288/mockito-verify-after-exception-junit-4-10\" title=\"mockito verify after exception junit 4 10\">stackoverflow.com/questions/13224288/&hellip;</a>"},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1415843547,"post_id":2935935,"comment_id":42352714,"body_markdown":"@MikeKobit OK, fair enough, that sounds reasonable.  I imagine that would be a fairly rare kind of test case though.","body":"@MikeKobit OK, fair enough, that sounds reasonable.  I imagine that would be a fairly rare kind of test case though."},{"owner":{"account_id":3805386,"reputation":6451,"user_id":3469725,"accept_rate":96,"display_name":"Thomas"},"score":0,"creation_date":1427850433,"post_id":2935935,"comment_id":46941951,"body_markdown":"It looks like Eclipse&#39;s coverage tool has trouble with this (not that that really matters)","body":"It looks like Eclipse&#39;s coverage tool has trouble with this (not that that really matters)"},{"owner":{"account_id":34025,"reputation":23628,"user_id":95725,"display_name":"NamshubWriter"},"score":5,"creation_date":1431268731,"post_id":2935935,"comment_id":48412566,"body_markdown":"@MJafarMash if the exception you expect to throw is checked, then you would add that exception to the throws clause of the test method. You do the same any time you are testing a method that is declared to throw a checked exception, even if the exception isn&#39;t triggered in the particular test case.","body":"@MJafarMash if the exception you expect to throw is checked, then you would add that exception to the throws clause of the test method. You do the same any time you are testing a method that is declared to throw a checked exception, even if the exception isn&#39;t triggered in the particular test case."},{"owner":{"account_id":4307921,"reputation":1393,"user_id":3519829,"accept_rate":90,"display_name":"Ungeheuer"},"score":0,"creation_date":1477592958,"post_id":2935935,"comment_id":67841898,"body_markdown":"@DavidWallace how does ExpectedException test for exception message? I dont see anything in the 4.12 API for that.","body":"@DavidWallace how does ExpectedException test for exception message? I dont see anything in the 4.12 API for that."},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1477593118,"post_id":2935935,"comment_id":67841988,"body_markdown":"You can pass a Hamcrest Matcher to `expect` to analyse the exception.  Or even easier - you can pass a `String` to `expectMessage` that you expect to be a substring of the message.  http://junit.org/junit4/javadoc/4.12/org/junit/rules/ExpectedException.html","body":"You can pass a Hamcrest Matcher to <code>expect</code> to analyse the exception.  Or even easier - you can pass a <code>String</code> to <code>expectMessage</code> that you expect to be a substring of the message.  <a href=\"http://junit.org/junit4/javadoc/4.12/org/junit/rules/ExpectedException.html\" rel=\"nofollow noreferrer\">junit.org/junit4/javadoc/4.12/org/junit/rules/&hellip;</a>"},{"owner":{"account_id":199441,"reputation":652,"user_id":444769,"accept_rate":67,"display_name":"Marc Bouvier"},"score":0,"creation_date":1524732754,"post_id":2935935,"comment_id":87093564,"body_markdown":"You can do it that way : `exception.expectMessage(&quot;foo bar&quot;);`","body":"You can do it that way : <code>exception.expectMessage(&quot;foo bar&quot;);</code>"},{"owner":{"account_id":2560593,"reputation":1454,"user_id":2221647,"accept_rate":67,"display_name":"dhalfageme"},"score":0,"creation_date":1584782339,"post_id":2935935,"comment_id":107546201,"body_markdown":"How do you set an error message ofr the test if exception is not thrown?","body":"How do you set an error message ofr the test if exception is not thrown?"}],"tags":[],"owner":{"account_id":34025,"reputation":23628,"user_id":95725,"display_name":"NamshubWriter"},"comment_count":22,"down_vote_count":3,"up_vote_count":1436,"is_accepted":false,"score":1433,"last_activity_date":1605839030,"creation_date":1275153383,"answer_id":2935935,"question_id":156503,"body_markdown":"**Edit:** Now that JUnit 5 and JUnit 4.13 have been released, the best option would be to use [`Assertions.assertThrows()`][1]  (for JUnit 5) and [`Assert.assertThrows()`][2] (for JUnit 4.13+). See [my other answer][3] for details.\r\n\r\n\r\nIf you haven&#39;t migrated to JUnit 5, but can use JUnit 4.7, you can use the [`ExpectedException`][4] Rule:\r\n\r\n    public class FooTest {\r\n      @Rule\r\n      public final ExpectedException exception = ExpectedException.none();\r\n\r\n      @Test\r\n      public void doStuffThrowsIndexOutOfBoundsException() {\r\n        Foo foo = new Foo();\r\n\r\n        exception.expect(IndexOutOfBoundsException.class);\r\n        foo.doStuff();\r\n      }\r\n    }\r\n\r\nThis is much better than `@Test(expected=IndexOutOfBoundsException.class)` because the test will fail if `IndexOutOfBoundsException` is thrown before `foo.doStuff()`\r\n\r\nSee [this article][5] for details.\r\n\r\n\r\n  [1]: https://junit.org/junit5/docs/current/user-guide/#extensions-exception-handling\r\n  [2]: https://junit.org/junit4/javadoc/latest/org/junit/Assert.html#assertThrows(java.lang.Class,%20org.junit.function.ThrowingRunnable)\r\n  [3]: https://stackoverflow.com/a/46514550/95725\r\n  [4]: http://junit.org/javadoc/latest/org/junit/rules/ExpectedException.html\r\n  [5]: http://www.infoq.com/news/2009/07/junit-4.7-rules","title":"How do you assert that a certain exception is thrown in JUnit tests?","body":"<p><strong>Edit:</strong> Now that JUnit 5 and JUnit 4.13 have been released, the best option would be to use <a href=\"https://junit.org/junit5/docs/current/user-guide/#extensions-exception-handling\" rel=\"noreferrer\"><code>Assertions.assertThrows()</code></a>  (for JUnit 5) and <a href=\"https://junit.org/junit4/javadoc/latest/org/junit/Assert.html#assertThrows(java.lang.Class,%20org.junit.function.ThrowingRunnable)\" rel=\"noreferrer\"><code>Assert.assertThrows()</code></a> (for JUnit 4.13+). See <a href=\"https://stackoverflow.com/a/46514550/95725\">my other answer</a> for details.</p>\n<p>If you haven't migrated to JUnit 5, but can use JUnit 4.7, you can use the <a href=\"http://junit.org/javadoc/latest/org/junit/rules/ExpectedException.html\" rel=\"noreferrer\"><code>ExpectedException</code></a> Rule:</p>\n<pre><code>public class FooTest {\n  @Rule\n  public final ExpectedException exception = ExpectedException.none();\n\n  @Test\n  public void doStuffThrowsIndexOutOfBoundsException() {\n    Foo foo = new Foo();\n\n    exception.expect(IndexOutOfBoundsException.class);\n    foo.doStuff();\n  }\n}\n</code></pre>\n<p>This is much better than <code>@Test(expected=IndexOutOfBoundsException.class)</code> because the test will fail if <code>IndexOutOfBoundsException</code> is thrown before <code>foo.doStuff()</code></p>\n<p>See <a href=\"http://www.infoq.com/news/2009/07/junit-4.7-rules\" rel=\"noreferrer\">this article</a> for details.</p>\n"},{"comments":[{"owner":{"account_id":156187,"reputation":4673,"user_id":373327,"accept_rate":65,"display_name":"Jason Thompson"},"score":0,"creation_date":1389976089,"post_id":7927418,"comment_id":31907115,"body_markdown":"I thought about doing something like this as well, but ultimately discovered that the true power of ExpectedException is that not only can you specify the expected exception, but you can also specify certain properties of the exception such as the expected cause or expected message.","body":"I thought about doing something like this as well, but ultimately discovered that the true power of ExpectedException is that not only can you specify the expected exception, but you can also specify certain properties of the exception such as the expected cause or expected message."},{"owner":{"account_id":31908,"reputation":21538,"user_id":87979,"accept_rate":83,"display_name":"Tom"},"score":0,"creation_date":1403293157,"post_id":7927418,"comment_id":37618077,"body_markdown":"My guess is that this solution has some of the same drawbacks as mocks? For example, if `foo` is `final` it will fail because you can&#39;t proxy `foo`?","body":"My guess is that this solution has some of the same drawbacks as mocks? For example, if <code>foo</code> is <code>final</code> it will fail because you can&#39;t proxy <code>foo</code>?"},{"owner":{"account_id":978617,"reputation":1724,"user_id":998938,"display_name":"rwitzel"},"score":0,"creation_date":1421401772,"post_id":7927418,"comment_id":44353720,"body_markdown":"Tom, if doStuff() is part of an interface the proxy approach will work. Otherwise this approach will fail, you are right.","body":"Tom, if doStuff() is part of an interface the proxy approach will work. Otherwise this approach will fail, you are right."}],"tags":[],"owner":{"account_id":978617,"reputation":1724,"user_id":998938,"display_name":"rwitzel"},"comment_count":3,"down_vote_count":2,"up_vote_count":35,"is_accepted":false,"score":33,"last_activity_date":1319793981,"creation_date":1319793981,"answer_id":7927418,"question_id":156503,"body_markdown":"To solve the same problem I did set up a small project: \r\nhttp://code.google.com/p/catch-exception/\r\n\r\nUsing this little helper you would write\r\n\r\n    verifyException(foo, IndexOutOfBoundsException.class).doStuff();\r\n\r\nThis is less verbose than the ExpectedException rule of JUnit 4.7.\r\nIn comparison to the solution provided by skaffman, you can specify in which line of code you expect the exception. I hope this helps.","title":"How do you assert that a certain exception is thrown in JUnit tests?","body":"<p>To solve the same problem I did set up a small project: \n<a href=\"http://code.google.com/p/catch-exception/\">http://code.google.com/p/catch-exception/</a></p>\n\n<p>Using this little helper you would write</p>\n\n<pre><code>verifyException(foo, IndexOutOfBoundsException.class).doStuff();\n</code></pre>\n\n<p>This is less verbose than the ExpectedException rule of JUnit 4.7.\nIn comparison to the solution provided by skaffman, you can specify in which line of code you expect the exception. I hope this helps.</p>\n"},{"comments":[{"owner":{"account_id":413889,"reputation":776,"user_id":787791,"accept_rate":53,"display_name":"grackkle"},"score":0,"creation_date":1414530948,"post_id":12822499,"comment_id":41848178,"body_markdown":"Interesting, but doesn&#39;t fit to AAA (Arrange Act Assert), where you want to do the Act and the Assert step in actually different steps.","body":"Interesting, but doesn&#39;t fit to AAA (Arrange Act Assert), where you want to do the Act and the Assert step in actually different steps."},{"owner":{"account_id":46836,"reputation":12142,"user_id":138513,"accept_rate":46,"display_name":"Hakanai"},"score":1,"creation_date":1422849155,"post_id":12822499,"comment_id":44897268,"body_markdown":"@bln-tom Technically it is two different steps, they&#39;re just not in that order. ;p","body":"@bln-tom Technically it is two different steps, they&#39;re just not in that order. ;p"}],"tags":[],"owner":{"account_id":73951,"reputation":8115,"user_id":212731,"accept_rate":73,"display_name":"Hugh Perkins"},"comment_count":2,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1349881364,"creation_date":1349881364,"answer_id":12822499,"question_id":156503,"body_markdown":"I tried many of the methods here, but they were either complicated or didn&#39;t quite meet my requirements.  In fact, one can write a helper method quite simply:\r\n\r\n    public class ExceptionAssertions {\r\n\t    public static void assertException(BlastContainer blastContainer ) {\r\n\t\t    boolean caughtException = false;\r\n\t\t    try {\r\n\t\t\t    blastContainer.test();\r\n\t\t    } catch( Exception e ) {\r\n\t\t\t    caughtException = true;\r\n\t\t    }\r\n\t\t    if( !caughtException ) {\r\n\t\t\t    throw new AssertionFailedError(&quot;exception expected to be thrown, but was not&quot;);\r\n\t\t    }\r\n\t    }\r\n\t    public static interface BlastContainer {\r\n\t\t    public void test() throws Exception;\r\n\t    }\r\n    }\r\n\r\nUse it like this:\r\n\r\n    assertException(new BlastContainer() {\r\n\t    @Override\r\n\t    public void test() throws Exception {\r\n\t\t    doSomethingThatShouldExceptHere();\r\n\t    }\r\n    });\r\n\r\nZero dependencies: no need for mockito, no need powermock; and works just fine with final classes.\r\n","title":"How do you assert that a certain exception is thrown in JUnit tests?","body":"<p>I tried many of the methods here, but they were either complicated or didn't quite meet my requirements.  In fact, one can write a helper method quite simply:</p>\n\n<pre><code>public class ExceptionAssertions {\n    public static void assertException(BlastContainer blastContainer ) {\n        boolean caughtException = false;\n        try {\n            blastContainer.test();\n        } catch( Exception e ) {\n            caughtException = true;\n        }\n        if( !caughtException ) {\n            throw new AssertionFailedError(\"exception expected to be thrown, but was not\");\n        }\n    }\n    public static interface BlastContainer {\n        public void test() throws Exception;\n    }\n}\n</code></pre>\n\n<p>Use it like this:</p>\n\n<pre><code>assertException(new BlastContainer() {\n    @Override\n    public void test() throws Exception {\n        doSomethingThatShouldExceptHere();\n    }\n});\n</code></pre>\n\n<p>Zero dependencies: no need for mockito, no need powermock; and works just fine with final classes.</p>\n"},{"comments":[{"owner":{"account_id":34025,"reputation":23628,"user_id":95725,"display_name":"NamshubWriter"},"score":12,"creation_date":1421211061,"post_id":16424903,"comment_id":44269105,"body_markdown":"In JUnit tests, it&#39;s better to use `Assert.fail()`, not `assert`, just in case your tests run in an environment where assertions are not enabled.","body":"In JUnit tests, it&#39;s better to use <code>Assert.fail()</code>, not <code>assert</code>, just in case your tests run in an environment where assertions are not enabled."}],"tags":[],"owner":{"account_id":1796997,"reputation":640,"user_id":1636207,"display_name":"John Mikic"},"comment_count":1,"down_vote_count":3,"up_vote_count":25,"is_accepted":false,"score":22,"last_activity_date":1415838061,"creation_date":1367947038,"answer_id":16424903,"question_id":156503,"body_markdown":"You can also do this:\r\n\r\n    @Test\r\n    public void testFooThrowsIndexOutOfBoundsException() {\r\n        try {\r\n            foo.doStuff();\r\n            assert false;\r\n        } catch (IndexOutOfBoundsException e) {\r\n            assert true;\r\n        }\r\n    }","title":"How do you assert that a certain exception is thrown in JUnit tests?","body":"<p>You can also do this:</p>\n\n<pre><code>@Test\npublic void testFooThrowsIndexOutOfBoundsException() {\n    try {\n        foo.doStuff();\n        assert false;\n    } catch (IndexOutOfBoundsException e) {\n        assert true;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1259280,"reputation":1361,"user_id":1218054,"display_name":"Tor P"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1456885721,"creation_date":1370463143,"answer_id":16948961,"question_id":156503,"body_markdown":"Just make a Matcher that can be turned off and on, like this:\r\n\r\n    public class ExceptionMatcher extends BaseMatcher&lt;Throwable&gt; {\r\n        private boolean active = true;\r\n        private Class&lt;? extends Throwable&gt; throwable;\r\n\t\r\n        public ExceptionMatcher(Class&lt;? extends Throwable&gt; throwable) {\r\n            this.throwable = throwable;\r\n        }\r\n\t\r\n        public void on() {\r\n            this.active = true;\r\n        }\r\n\t\r\n        public void off() {\r\n            this.active = false;\r\n        }\r\n\t\r\n        @Override\r\n        public boolean matches(Object object) {\r\n            return active &amp;&amp; throwable.isAssignableFrom(object.getClass());\r\n        }\r\n\r\n        @Override\r\n        public void describeTo(Description description) {\r\n            description.appendText(&quot;not the covered exception type&quot;);\r\n        }\r\n    }\r\n\r\nTo use it:\r\n\r\nadd `public ExpectedException exception = ExpectedException.none();`,\r\nthen:\r\n\r\n    ExceptionMatcher exMatch = new ExceptionMatcher(MyException.class);\r\n    exception.expect(exMatch);\r\n    someObject.somethingThatThrowsMyException();\r\n    exMatch.off();","title":"How do you assert that a certain exception is thrown in JUnit tests?","body":"<p>Just make a Matcher that can be turned off and on, like this:</p>\n\n<pre><code>public class ExceptionMatcher extends BaseMatcher&lt;Throwable&gt; {\n    private boolean active = true;\n    private Class&lt;? extends Throwable&gt; throwable;\n\n    public ExceptionMatcher(Class&lt;? extends Throwable&gt; throwable) {\n        this.throwable = throwable;\n    }\n\n    public void on() {\n        this.active = true;\n    }\n\n    public void off() {\n        this.active = false;\n    }\n\n    @Override\n    public boolean matches(Object object) {\n        return active &amp;&amp; throwable.isAssignableFrom(object.getClass());\n    }\n\n    @Override\n    public void describeTo(Description description) {\n        description.appendText(\"not the covered exception type\");\n    }\n}\n</code></pre>\n\n<p>To use it:</p>\n\n<p>add <code>public ExpectedException exception = ExpectedException.none();</code>,\nthen:</p>\n\n<pre><code>ExceptionMatcher exMatch = new ExceptionMatcher(MyException.class);\nexception.expect(exMatch);\nsomeObject.somethingThatThrowsMyException();\nexMatch.off();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1431635,"reputation":5085,"user_id":1353930,"accept_rate":50,"display_name":"Daniel Alder"},"score":1,"creation_date":1513590015,"post_id":17421500,"comment_id":82696078,"body_markdown":"befor the line with `} catch (`, you should insert `fail(&quot;no exception thrown&quot;);`","body":"befor the line with <code>} catch (</code>, you should insert <code>fail(&quot;no exception thrown&quot;);</code>"}],"tags":[],"owner":{"account_id":1187920,"reputation":607,"user_id":1161494,"accept_rate":44,"display_name":"Macchiatow"},"comment_count":1,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1372755837,"creation_date":1372755837,"answer_id":17421500,"question_id":156503,"body_markdown":"In my case I always get RuntimeException from db, but messages differ. And exception need to be handled respectively. Here is how I tested it:\r\n\r\n    @Test\r\n    public void testThrowsExceptionWhenWrongSku() {\r\n\r\n        // Given\r\n        String articleSimpleSku = &quot;999-999&quot;;\r\n        int amountOfTransactions = 1;\r\n        Exception exception = null;\r\n\r\n        // When\r\n        try {\r\n            createNInboundTransactionsForSku(amountOfTransactions, articleSimpleSku);\r\n        } catch (RuntimeException e) {\r\n            exception = e;\r\n        }\r\n\r\n        // Then\r\n        shouldValidateThrowsExceptionWithMessage(exception, MESSAGE_NON_EXISTENT_SKU);\r\n    }\r\n\r\n    private void shouldValidateThrowsExceptionWithMessage(final Exception e, final String message) {\r\n        assertNotNull(e);\r\n        assertTrue(e.getMessage().contains(message));\r\n    }","title":"How do you assert that a certain exception is thrown in JUnit tests?","body":"<p>In my case I always get RuntimeException from db, but messages differ. And exception need to be handled respectively. Here is how I tested it:</p>\n\n<pre><code>@Test\npublic void testThrowsExceptionWhenWrongSku() {\n\n    // Given\n    String articleSimpleSku = \"999-999\";\n    int amountOfTransactions = 1;\n    Exception exception = null;\n\n    // When\n    try {\n        createNInboundTransactionsForSku(amountOfTransactions, articleSimpleSku);\n    } catch (RuntimeException e) {\n        exception = e;\n    }\n\n    // Then\n    shouldValidateThrowsExceptionWithMessage(exception, MESSAGE_NON_EXISTENT_SKU);\n}\n\nprivate void shouldValidateThrowsExceptionWithMessage(final Exception e, final String message) {\n    assertNotNull(e);\n    assertTrue(e.getMessage().contains(message));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":243786,"reputation":30863,"user_id":516167,"accept_rate":94,"display_name":"MariuszS"},"comment_count":0,"down_vote_count":0,"up_vote_count":39,"is_accepted":false,"score":39,"last_activity_date":1569406200,"creation_date":1384543035,"answer_id":20008854,"question_id":156503,"body_markdown":"[BDD](http://guide.agilealliance.org/guide/gwt.html) Style Solution: [JUnit 4](http://junit.org/) + [Catch Exception][c] + [AssertJ](http://joel-costigliola.github.io/assertj/)\r\n--\r\n\r\n    import static com.googlecode.catchexception.apis.BDDCatchException.*;\r\n\r\n    @Test\r\n    public void testFooThrowsIndexOutOfBoundsException() {\r\n\r\n        when(() -&gt; foo.doStuff());\r\n\r\n        then(caughtException()).isInstanceOf(IndexOutOfBoundsException.class);\r\n\r\n    }\r\n\r\n\r\nDependencies\r\n--\r\n\r\n    eu.codearte.catch-exception:catch-exception:2.0\r\n\r\n[c]: https://github.com/Codearte/catch-exception\r\n","title":"How do you assert that a certain exception is thrown in JUnit tests?","body":"<h2><a href=\"http://guide.agilealliance.org/guide/gwt.html\" rel=\"nofollow noreferrer\">BDD</a> Style Solution: <a href=\"http://junit.org/\" rel=\"nofollow noreferrer\">JUnit 4</a> + <a href=\"https://github.com/Codearte/catch-exception\" rel=\"nofollow noreferrer\">Catch Exception</a> + <a href=\"http://joel-costigliola.github.io/assertj/\" rel=\"nofollow noreferrer\">AssertJ</a></h2>\n\n<pre><code>import static com.googlecode.catchexception.apis.BDDCatchException.*;\n\n@Test\npublic void testFooThrowsIndexOutOfBoundsException() {\n\n    when(() -&gt; foo.doStuff());\n\n    then(caughtException()).isInstanceOf(IndexOutOfBoundsException.class);\n\n}\n</code></pre>\n\n<h2>Dependencies</h2>\n\n<pre><code>eu.codearte.catch-exception:catch-exception:2.0\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1033192,"reputation":3148,"user_id":1041083,"accept_rate":43,"display_name":"Selwyn"},"score":2,"creation_date":1427767672,"post_id":24621006,"comment_id":46903097,"body_markdown":"I like this solution but can I download this from a maven repo?","body":"I like this solution but can I download this from a maven repo?"},{"owner":{"account_id":34025,"reputation":23628,"user_id":95725,"display_name":"NamshubWriter"},"score":0,"creation_date":1431268520,"post_id":24621006,"comment_id":48412506,"body_markdown":"@Airduster one implementation of this idea that&#39;s available on Maven is http://stefanbirkner.github.io/vallado/","body":"@Airduster one implementation of this idea that&#39;s available on Maven is <a href=\"http://stefanbirkner.github.io/vallado/\" rel=\"nofollow noreferrer\">stefanbirkner.github.io/vallado</a>"},{"owner":{"account_id":34025,"reputation":23628,"user_id":95725,"display_name":"NamshubWriter"},"score":6,"creation_date":1437445107,"post_id":24621006,"comment_id":51019634,"body_markdown":"@CristianoFontes a simpler version of this API is slated for JUnit 4.13. See https://github.com/junit-team/junit/commit/bdb1799a6b58c4ab40c418111333f4e8e1816e7e","body":"@CristianoFontes a simpler version of this API is slated for JUnit 4.13. See <a href=\"https://github.com/junit-team/junit/commit/bdb1799a6b58c4ab40c418111333f4e8e1816e7e\" rel=\"nofollow noreferrer\">github.com/junit-team/junit/commit/&hellip;</a>"},{"owner":{"account_id":68665,"reputation":8103,"user_id":200224,"accept_rate":64,"display_name":"Andy"},"score":0,"creation_date":1493408925,"post_id":24621006,"comment_id":74421894,"body_markdown":"@RafalBorowiec technically, `new DummyService()::someMethod` is a `MethodHandle`, but this approach works equally well with lambda expressions.","body":"@RafalBorowiec technically, <code>new DummyService()::someMethod</code> is a <code>MethodHandle</code>, but this approach works equally well with lambda expressions."},{"owner":{"account_id":297814,"reputation":25324,"user_id":603516,"accept_rate":100,"display_name":"Vadzim"},"score":0,"creation_date":1513681322,"post_id":24621006,"comment_id":82736628,"body_markdown":"@NamshubWriter, it seems that junit 4.13 was abandoned in favor of junit 5: https://stackoverflow.com/questions/156503/how-do-you-assert-that-a-certain-exception-is-thrown-in-junit-4-tests/46514550#46514550","body":"@NamshubWriter, it seems that junit 4.13 was abandoned in favor of junit 5: <a href=\"https://stackoverflow.com/questions/156503/how-do-you-assert-that-a-certain-exception-is-thrown-in-junit-4-tests/46514550#46514550\" title=\"how do you assert that a certain exception is thrown in junit 4 tests\">stackoverflow.com/questions/156503/&hellip;</a>"},{"owner":{"account_id":34025,"reputation":23628,"user_id":95725,"display_name":"NamshubWriter"},"score":0,"creation_date":1513698319,"post_id":24621006,"comment_id":82747324,"body_markdown":"@Vadzim JUnit 4.13 is not abandoned. The team realizes that some people cannot migrate to JUnit 5 and 4.13 has some nice fixes, but most of the recent efforts have been focused on the 5.x code base.","body":"@Vadzim JUnit 4.13 is not abandoned. The team realizes that some people cannot migrate to JUnit 5 and 4.13 has some nice fixes, but most of the recent efforts have been focused on the 5.x code base."},{"owner":{"account_id":2078462,"reputation":10342,"user_id":2986984,"accept_rate":80,"display_name":"tkruse"},"score":0,"creation_date":1583209787,"post_id":24621006,"comment_id":107029446,"body_markdown":"Junit 4.13 is out, also a version of this also exists with assertJ and google-truth, as indicated by other answers here.","body":"Junit 4.13 is out, also a version of this also exists with assertJ and google-truth, as indicated by other answers here."}],"tags":[],"owner":{"account_id":740853,"reputation":5144,"user_id":718515,"display_name":"Rafal Borowiec"},"comment_count":7,"down_vote_count":1,"up_vote_count":224,"is_accepted":false,"score":223,"last_activity_date":1480259220,"creation_date":1404772519,"answer_id":24621006,"question_id":156503,"body_markdown":"As answered before, there are many ways of dealing with exceptions in JUnit. But with Java 8 there is another one: using Lambda Expressions. With Lambda Expressions we can achieve a syntax like this:\r\n\r\n    @Test\r\n    public void verifiesTypeAndMessage() {\r\n        assertThrown(new DummyService()::someMethod)\r\n                .isInstanceOf(RuntimeException.class)\r\n                .hasMessage(&quot;Runtime exception occurred&quot;)\r\n                .hasMessageStartingWith(&quot;Runtime&quot;)\r\n                .hasMessageEndingWith(&quot;occurred&quot;)\r\n                .hasMessageContaining(&quot;exception&quot;)\r\n                .hasNoCause();\r\n    }\r\n\r\nassertThrown accepts a functional interface, whose instances can be created with lambda expressions, method references, or constructor references. assertThrown accepting that interface will expect and be ready to handle an exception.\r\n\r\nThis is relatively simple yet powerful technique.\r\n\r\nHave a look at this blog post describing this technique: http://blog.codeleak.pl/2014/07/junit-testing-exception-with-java-8-and-lambda-expressions.html\r\n\r\nThe source code can be found here: https://github.com/kolorobot/unit-testing-demo/tree/master/src/test/java/com/github/kolorobot/exceptions/java8\r\n\r\n*Disclosure: I am the author of the blog and the project.*","title":"How do you assert that a certain exception is thrown in JUnit tests?","body":"<p>As answered before, there are many ways of dealing with exceptions in JUnit. But with Java 8 there is another one: using Lambda Expressions. With Lambda Expressions we can achieve a syntax like this:</p>\n\n<pre><code>@Test\npublic void verifiesTypeAndMessage() {\n    assertThrown(new DummyService()::someMethod)\n            .isInstanceOf(RuntimeException.class)\n            .hasMessage(\"Runtime exception occurred\")\n            .hasMessageStartingWith(\"Runtime\")\n            .hasMessageEndingWith(\"occurred\")\n            .hasMessageContaining(\"exception\")\n            .hasNoCause();\n}\n</code></pre>\n\n<p>assertThrown accepts a functional interface, whose instances can be created with lambda expressions, method references, or constructor references. assertThrown accepting that interface will expect and be ready to handle an exception.</p>\n\n<p>This is relatively simple yet powerful technique.</p>\n\n<p>Have a look at this blog post describing this technique: <a href=\"http://blog.codeleak.pl/2014/07/junit-testing-exception-with-java-8-and-lambda-expressions.html\" rel=\"noreferrer\">http://blog.codeleak.pl/2014/07/junit-testing-exception-with-java-8-and-lambda-expressions.html</a></p>\n\n<p>The source code can be found here: <a href=\"https://github.com/kolorobot/unit-testing-demo/tree/master/src/test/java/com/github/kolorobot/exceptions/java8\" rel=\"noreferrer\">https://github.com/kolorobot/unit-testing-demo/tree/master/src/test/java/com/github/kolorobot/exceptions/java8</a></p>\n\n<p><em>Disclosure: I am the author of the blog and the project.</em></p>\n"},{"comments":[{"owner":{"account_id":34025,"reputation":23628,"user_id":95725,"display_name":"NamshubWriter"},"score":3,"creation_date":1440896811,"post_id":28940773,"comment_id":52461756,"body_markdown":"The second `catch` would swallow the stack trace if some other exception is thrown, losing useful information","body":"The second <code>catch</code> would swallow the stack trace if some other exception is thrown, losing useful information"}],"tags":[],"owner":{"account_id":1477140,"reputation":1906,"user_id":1387275,"accept_rate":100,"display_name":"Shessuky"},"comment_count":1,"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1513766045,"creation_date":1425900097,"answer_id":28940773,"question_id":156503,"body_markdown":"We can use an assertion fail after the method that must return an exception:\r\n  \r\n    try{\r\n       methodThatThrowMyException();\r\n       Assert.fail(&quot;MyException is not thrown !&quot;);\r\n    } catch (final Exception exception) {\r\n       // Verify if the thrown exception is instance of MyException, otherwise throws an assert failure\r\n       assertTrue(exception instanceof MyException, &quot;An exception other than MyException is thrown !&quot;);\r\n       // In case of verifying the error message\r\n       MyException myException = (MyException) exception;\r\n       assertEquals(&quot;EXPECTED ERROR MESSAGE&quot;, myException.getMessage());\r\n    }","title":"How do you assert that a certain exception is thrown in JUnit tests?","body":"<p>We can use an assertion fail after the method that must return an exception:</p>\n\n<pre><code>try{\n   methodThatThrowMyException();\n   Assert.fail(\"MyException is not thrown !\");\n} catch (final Exception exception) {\n   // Verify if the thrown exception is instance of MyException, otherwise throws an assert failure\n   assertTrue(exception instanceof MyException, \"An exception other than MyException is thrown !\");\n   // In case of verifying the error message\n   MyException myException = (MyException) exception;\n   assertEquals(\"EXPECTED ERROR MESSAGE\", myException.getMessage());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1051364,"reputation":988,"user_id":1055223,"accept_rate":92,"display_name":"Alex Collins"},"comment_count":0,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1489514841,"creation_date":1426024187,"answer_id":28974751,"question_id":156503,"body_markdown":"IMHO, the best way to check for exceptions in JUnit is the try/catch/fail/assert pattern:\r\n\r\n    // this try block should be as small as possible,\r\n    // as you want to make sure you only catch exceptions from your code\r\n    try {\r\n        sut.doThing();\r\n        fail(); // fail if this does not throw any exception\r\n    } catch(MyException e) { // only catch the exception you expect,\r\n                             // otherwise you may catch an exception for a dependency unexpectedly\r\n        // a strong assertion on the message, \r\n        // in case the exception comes from anywhere an unexpected line of code,\r\n        // especially important if your checking IllegalArgumentExceptions\r\n        assertEquals(&quot;the message I get&quot;, e.getMessage()); \r\n    }\r\n\r\nThe `assertTrue` might be a bit strong for some people, so `assertThat(e.getMessage(), containsString(&quot;the message&quot;);` might be preferable.","title":"How do you assert that a certain exception is thrown in JUnit tests?","body":"<p>IMHO, the best way to check for exceptions in JUnit is the try/catch/fail/assert pattern:</p>\n\n<pre><code>// this try block should be as small as possible,\n// as you want to make sure you only catch exceptions from your code\ntry {\n    sut.doThing();\n    fail(); // fail if this does not throw any exception\n} catch(MyException e) { // only catch the exception you expect,\n                         // otherwise you may catch an exception for a dependency unexpectedly\n    // a strong assertion on the message, \n    // in case the exception comes from anywhere an unexpected line of code,\n    // especially important if your checking IllegalArgumentExceptions\n    assertEquals(\"the message I get\", e.getMessage()); \n}\n</code></pre>\n\n<p>The <code>assertTrue</code> might be a bit strong for some people, so <code>assertThat(e.getMessage(), containsString(\"the message\");</code> might be preferable.</p>\n"},{"tags":[],"owner":{"account_id":3979051,"reputation":1626,"user_id":3281476,"accept_rate":60,"display_name":"Srini"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1432321764,"creation_date":1432321764,"answer_id":30404203,"question_id":156503,"body_markdown":"Additionally to what [NamShubWriter](https://stackoverflow.com/users/95725/namshubwriter) has said, make sure that: \r\n\r\n - The ExpectedException instance is **public** ([Related Question](https://stackoverflow.com/questions/14335558/why-rule-annotated-fields-in-junit-has-to-be-public))\r\n - The ExpectedException **isn&#39;t** instantiated in say, the @Before method. This [post](https://garygregory.wordpress.com/2011/09/25/understaning-junit-method-order-execution/) clearly explains all the intricacies of JUnit&#39;s order of execution.\r\n\r\nDo **not** do this:    \r\n  \r\n    @Rule    \r\n    public ExpectedException expectedException;\r\n    \r\n    @Before\r\n    public void setup()\r\n    {\r\n        expectedException = ExpectedException.none();\r\n    }\r\n\r\n\r\nFinally, [this](http://jakegoulding.com/blog/2012/09/26/be-careful-when-using-junit-expected-exceptions/) blog post clearly illustrates how to assert that a certain exception is thrown.","title":"How do you assert that a certain exception is thrown in JUnit tests?","body":"<p>Additionally to what <a href=\"https://stackoverflow.com/users/95725/namshubwriter\">NamShubWriter</a> has said, make sure that: </p>\n\n<ul>\n<li>The ExpectedException instance is <strong>public</strong> (<a href=\"https://stackoverflow.com/questions/14335558/why-rule-annotated-fields-in-junit-has-to-be-public\">Related Question</a>)</li>\n<li>The ExpectedException <strong>isn't</strong> instantiated in say, the @Before method. This <a href=\"https://garygregory.wordpress.com/2011/09/25/understaning-junit-method-order-execution/\" rel=\"nofollow noreferrer\">post</a> clearly explains all the intricacies of JUnit's order of execution.</li>\n</ul>\n\n<p>Do <strong>not</strong> do this:    </p>\n\n<pre><code>@Rule    \npublic ExpectedException expectedException;\n\n@Before\npublic void setup()\n{\n    expectedException = ExpectedException.none();\n}\n</code></pre>\n\n<p>Finally, <a href=\"http://jakegoulding.com/blog/2012/09/26/be-careful-when-using-junit-expected-exceptions/\" rel=\"nofollow noreferrer\">this</a> blog post clearly illustrates how to assert that a certain exception is thrown.</p>\n"},{"comments":[{"owner":{"account_id":4214154,"reputation":772,"user_id":3453164,"display_name":"Nicolas Cornette"},"score":11,"creation_date":1466067438,"post_id":31826781,"comment_id":63167150,"body_markdown":"For me this is the best answer, it covers all the ways very clearly, thanks ! Personally I continue using the 3rd option even with Junit4 for readability, to avoid empty catch block you can also catch Throwable and assert type of e","body":"For me this is the best answer, it covers all the ways very clearly, thanks ! Personally I continue using the 3rd option even with Junit4 for readability, to avoid empty catch block you can also catch Throwable and assert type of e"},{"owner":{"account_id":6509492,"reputation":111,"user_id":5249114,"display_name":"miuser"},"score":0,"creation_date":1488446632,"post_id":31826781,"comment_id":72237853,"body_markdown":"Is it possible to use ExpectedException to expect checked exception?","body":"Is it possible to use ExpectedException to expect checked exception?"},{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":0,"creation_date":1525483668,"post_id":31826781,"comment_id":87386914,"body_markdown":"All it is is an accumulation of the top three answers. IMO, this answer shouldn&#39;t even have been posted if it is not adding nothing new. Just answering (a popular question) for the rep. Pretty useless.","body":"All it is is an accumulation of the top three answers. IMO, this answer shouldn&#39;t even have been posted if it is not adding nothing new. Just answering (a popular question) for the rep. Pretty useless."},{"owner":{"account_id":5116480,"reputation":3101,"user_id":4101415,"accept_rate":64,"display_name":"walsh"},"score":0,"creation_date":1528465640,"post_id":31826781,"comment_id":88531695,"body_markdown":"sure, because you can pass any type derived from `Trowable` to the method `ExpectedException.expect`. please see [it&#39;s signature](https://junit.org/junit4/javadoc/4.12/org/junit/rules/ExpectedException.html#expect(java.lang.Class)). @miuser","body":"sure, because you can pass any type derived from <code>Trowable</code> to the method <code>ExpectedException.expect</code>. please see <a href=\"https://junit.org/junit4/javadoc/4.12/org/junit/rules/ExpectedException.html#expect(java.lang.Class)\" rel=\"nofollow noreferrer\">it&#39;s signature</a>. @miuser"},{"owner":{"account_id":1127485,"reputation":4047,"user_id":1114386,"accept_rate":83,"display_name":"avijendr"},"score":0,"creation_date":1593801936,"post_id":31826781,"comment_id":110915923,"body_markdown":"This is the best answer","body":"This is the best answer"},{"owner":{"account_id":74886,"reputation":26643,"user_id":214977,"accept_rate":69,"display_name":"granadaCoder"},"score":2,"creation_date":1611076737,"post_id":31826781,"comment_id":116332084,"body_markdown":"I would point out that Junit 4.13 (emphasis on the &quot;.13&quot;)...supports assertThrows.  I am upvoting, because this is a good &quot;complete overview&quot; answer, but I hope you will consider a 4.13 caveat.","body":"I would point out that Junit 4.13 (emphasis on the &quot;.13&quot;)...supports assertThrows.  I am upvoting, because this is a good &quot;complete overview&quot; answer, but I hope you will consider a 4.13 caveat."},{"owner":{"account_id":6125530,"reputation":2720,"user_id":4777670,"accept_rate":100,"display_name":"Saif"},"score":0,"creation_date":1661034303,"post_id":31826781,"comment_id":129675961,"body_markdown":"`org.junit.rules.ExpectedException#none` is marked as deprecated since 4.13. org.junit.Assert#assertThrows can be used","body":"<code>org.junit.rules.ExpectedException#none</code> is marked as deprecated since 4.13. org.junit.Assert#assertThrows can be used"}],"tags":[],"owner":{"account_id":5116480,"reputation":3101,"user_id":4101415,"accept_rate":64,"display_name":"walsh"},"comment_count":7,"down_vote_count":0,"up_vote_count":241,"is_accepted":false,"score":241,"last_activity_date":1562252281,"creation_date":1438761950,"answer_id":31826781,"question_id":156503,"body_markdown":"in junit, there are four ways to test exception. \r\n\r\njunit5.x\r\n-\r\n\r\n* for junit5.x, you can use `assertThrows` as following\r\n\r\n        @Test\r\n        public void testFooThrowsIndexOutOfBoundsException() {\r\n            Throwable exception = assertThrows(IndexOutOfBoundsException.class, () -&gt; foo.doStuff());\r\n            assertEquals(&quot;expected messages&quot;, exception.getMessage());\r\n        }\r\n\r\njunit4.x\r\n-\r\n\r\n* for junit4.x, use the optional &#39;expected&#39; attribute of Test annonation\r\n\r\n        @Test(expected = IndexOutOfBoundsException.class)\r\n        public void testFooThrowsIndexOutOfBoundsException() {\r\n            foo.doStuff();\r\n        }\r\n\r\n* for junit4.x, use the ExpectedException rule\r\n\r\n        public class XxxTest {\r\n            @Rule\r\n            public ExpectedException thrown = ExpectedException.none();\r\n            \r\n            @Test\r\n            public void testFooThrowsIndexOutOfBoundsException() {\r\n                thrown.expect(IndexOutOfBoundsException.class)\r\n                //you can test the exception message like\r\n                thrown.expectMessage(&quot;expected messages&quot;);\r\n                foo.doStuff();\r\n            }\r\n        }\r\n\r\n* you also can use the classic try/catch way widely used under junit 3 framework\r\n\r\n        @Test\r\n        public void testFooThrowsIndexOutOfBoundsException() {\r\n            try {\r\n                foo.doStuff();\r\n                fail(&quot;expected exception was not occured.&quot;);\r\n            } catch(IndexOutOfBoundsException e) {\r\n                //if execution reaches here, \r\n                //it indicates this exception was occured.\r\n                //so we need not handle it.\r\n            }\r\n        }\r\n\r\n* so\r\n    * if you like junit 5, then you should like the 1st one\r\n    * the 2nd way is used when you only want test the type of exception\r\n    * the first and last two are used when you want test exception message further\r\n    * if you use junit 3, then the 4th one is preferred\r\n\r\n* for more info, you can read [this document](https://github.com/junit-team/junit/wiki/Exception-testing) and [junit5 user guide](https://junit.org/junit5/docs/current/user-guide/) for details.\r\n\r\n","title":"How do you assert that a certain exception is thrown in JUnit tests?","body":"<p>in junit, there are four ways to test exception. </p>\n\n<h2>junit5.x</h2>\n\n<ul>\n<li><p>for junit5.x, you can use <code>assertThrows</code> as following</p>\n\n<pre><code>@Test\npublic void testFooThrowsIndexOutOfBoundsException() {\n    Throwable exception = assertThrows(IndexOutOfBoundsException.class, () -&gt; foo.doStuff());\n    assertEquals(\"expected messages\", exception.getMessage());\n}\n</code></pre></li>\n</ul>\n\n<h2>junit4.x</h2>\n\n<ul>\n<li><p>for junit4.x, use the optional 'expected' attribute of Test annonation</p>\n\n<pre><code>@Test(expected = IndexOutOfBoundsException.class)\npublic void testFooThrowsIndexOutOfBoundsException() {\n    foo.doStuff();\n}\n</code></pre></li>\n<li><p>for junit4.x, use the ExpectedException rule</p>\n\n<pre><code>public class XxxTest {\n    @Rule\n    public ExpectedException thrown = ExpectedException.none();\n\n    @Test\n    public void testFooThrowsIndexOutOfBoundsException() {\n        thrown.expect(IndexOutOfBoundsException.class)\n        //you can test the exception message like\n        thrown.expectMessage(\"expected messages\");\n        foo.doStuff();\n    }\n}\n</code></pre></li>\n<li><p>you also can use the classic try/catch way widely used under junit 3 framework</p>\n\n<pre><code>@Test\npublic void testFooThrowsIndexOutOfBoundsException() {\n    try {\n        foo.doStuff();\n        fail(\"expected exception was not occured.\");\n    } catch(IndexOutOfBoundsException e) {\n        //if execution reaches here, \n        //it indicates this exception was occured.\n        //so we need not handle it.\n    }\n}\n</code></pre></li>\n<li><p>so</p>\n\n<ul>\n<li>if you like junit 5, then you should like the 1st one</li>\n<li>the 2nd way is used when you only want test the type of exception</li>\n<li>the first and last two are used when you want test exception message further</li>\n<li>if you use junit 3, then the 4th one is preferred</li>\n</ul></li>\n<li><p>for more info, you can read <a href=\"https://github.com/junit-team/junit/wiki/Exception-testing\" rel=\"noreferrer\">this document</a> and <a href=\"https://junit.org/junit5/docs/current/user-guide/\" rel=\"noreferrer\">junit5 user guide</a> for details.</p></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":404649,"reputation":57192,"user_id":773113,"accept_rate":72,"display_name":"Mike Nakis"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1619255580,"creation_date":1450464741,"answer_id":34362168,"question_id":156503,"body_markdown":"# Java 8 solution\r\n\r\nIf you would like a solution which:\r\n\r\n* Utilizes Java 8 lambdas\r\n* Does *not* depend on any JUnit magic\r\n* Allows you to check for multiple exceptions within a single test method\r\n* Checks for an exception being thrown by a specific set of lines within your test method instead of any unknown line in the entire test method\r\n* Yields the actual exception object that was thrown so that you can further examine it\r\n\r\nHere is a utility function that I wrote:\r\n\r\n    public final &lt;T extends Throwable&gt; T expectException( Class&lt;T&gt; exceptionClass, Runnable runnable )\r\n    {\r\n        try\r\n        {\r\n            runnable.run();\r\n        }\r\n        catch( Throwable throwable )\r\n        {\r\n            if( throwable instanceof AssertionError &amp;&amp; throwable.getCause() != null )\r\n                throwable = throwable.getCause(); //allows testing for &quot;assert x != null : new IllegalArgumentException();&quot;\r\n            assert exceptionClass.isInstance( throwable ) : throwable; //exception of the wrong kind was thrown.\r\n            assert throwable.getClass() == exceptionClass : throwable; //exception thrown was a subclass, but not the exact class, expected.\r\n            @SuppressWarnings( &quot;unchecked&quot; )\r\n            T result = (T)throwable;\r\n            return result;\r\n        }\r\n        assert false; //expected exception was not thrown.\r\n        return null; //to keep the compiler happy.\r\n    }\r\n\r\n([taken from my blog](http://blog.michael.gr/2014/09/assertions-and-testing.html))\r\n\r\nUse it as follows:\r\n\r\n    @Test\r\n    public void testMyFunction()\r\n    {\r\n        RuntimeException e = expectException( RuntimeException.class, () -&gt; \r\n            {\r\n                myFunction();\r\n            } );\r\n        assert e.getMessage().equals( &quot;I haz fail!&quot; );\r\n    }\r\n\r\n    public void myFunction()\r\n    {\r\n        throw new RuntimeException( &quot;I haz fail!&quot; );\r\n    }\r\n","title":"How do you assert that a certain exception is thrown in JUnit tests?","body":"<h1>Java 8 solution</h1>\n<p>If you would like a solution which:</p>\n<ul>\n<li>Utilizes Java 8 lambdas</li>\n<li>Does <em>not</em> depend on any JUnit magic</li>\n<li>Allows you to check for multiple exceptions within a single test method</li>\n<li>Checks for an exception being thrown by a specific set of lines within your test method instead of any unknown line in the entire test method</li>\n<li>Yields the actual exception object that was thrown so that you can further examine it</li>\n</ul>\n<p>Here is a utility function that I wrote:</p>\n<pre><code>public final &lt;T extends Throwable&gt; T expectException( Class&lt;T&gt; exceptionClass, Runnable runnable )\n{\n    try\n    {\n        runnable.run();\n    }\n    catch( Throwable throwable )\n    {\n        if( throwable instanceof AssertionError &amp;&amp; throwable.getCause() != null )\n            throwable = throwable.getCause(); //allows testing for &quot;assert x != null : new IllegalArgumentException();&quot;\n        assert exceptionClass.isInstance( throwable ) : throwable; //exception of the wrong kind was thrown.\n        assert throwable.getClass() == exceptionClass : throwable; //exception thrown was a subclass, but not the exact class, expected.\n        @SuppressWarnings( &quot;unchecked&quot; )\n        T result = (T)throwable;\n        return result;\n    }\n    assert false; //expected exception was not thrown.\n    return null; //to keep the compiler happy.\n}\n</code></pre>\n<p>(<a href=\"http://blog.michael.gr/2014/09/assertions-and-testing.html\" rel=\"nofollow noreferrer\">taken from my blog</a>)</p>\n<p>Use it as follows:</p>\n<pre><code>@Test\npublic void testMyFunction()\n{\n    RuntimeException e = expectException( RuntimeException.class, () -&gt; \n        {\n            myFunction();\n        } );\n    assert e.getMessage().equals( &quot;I haz fail!&quot; );\n}\n\npublic void myFunction()\n{\n    throw new RuntimeException( &quot;I haz fail!&quot; );\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":881880,"reputation":8346,"user_id":270143,"accept_rate":88,"display_name":"ycomp"},"score":0,"creation_date":1458590608,"post_id":35813323,"comment_id":59919389,"body_markdown":"most concise way and nobody appreciates it, strange.. I only have one problem with the assertJ library, assertThat conflicts name-wise with junit&#39;s. more about assertJ throwby: [JUnit: Testing Exceptions with Java 8 and AssertJ 3.0.0 ~ Codeleak.pl](http://blog.codeleak.pl/2015/04/junit-testing-exceptions-with-java-8.html)","body":"most concise way and nobody appreciates it, strange.. I only have one problem with the assertJ library, assertThat conflicts name-wise with junit&#39;s. more about assertJ throwby: <a href=\"http://blog.codeleak.pl/2015/04/junit-testing-exceptions-with-java-8.html\" rel=\"nofollow noreferrer\">JUnit: Testing Exceptions with Java 8 and AssertJ 3.0.0 ~ Codeleak.pl</a>"},{"owner":{"account_id":148440,"reputation":54364,"user_id":360211,"accept_rate":76,"display_name":"weston"},"score":0,"creation_date":1458809218,"post_id":35813323,"comment_id":60025949,"body_markdown":"@ycomp Well it is a new answer on a very old question, so the score difference is deceptive.","body":"@ycomp Well it is a new answer on a very old question, so the score difference is deceptive."},{"owner":{"account_id":122100,"reputation":16858,"user_id":315677,"accept_rate":81,"display_name":"Pierre Henry"},"score":0,"creation_date":1458918119,"post_id":35813323,"comment_id":60076131,"body_markdown":"That&#39;s probably the best solution if one can use Java 8 and AssertJ !","body":"That&#39;s probably the best solution if one can use Java 8 and AssertJ !"},{"owner":{"account_id":703628,"reputation":14438,"user_id":595305,"accept_rate":83,"display_name":"mike rodent"},"score":0,"creation_date":1476202423,"post_id":35813323,"comment_id":67242227,"body_markdown":"@ycomp I suspect this name conflict may be by design: the AssertJ library therefore strongly encourages you never to use the JUnit `assertThat`, always the AssertJ one.  Also the JUnit method returns only a &quot;regular&quot; type, whereas the AssertJ method returns an `AbstractAssert` subclass ... allowing stringing of methods as above (or whatever the technical terms is for this...).","body":"@ycomp I suspect this name conflict may be by design: the AssertJ library therefore strongly encourages you never to use the JUnit <code>assertThat</code>, always the AssertJ one.  Also the JUnit method returns only a &quot;regular&quot; type, whereas the AssertJ method returns an <code>AbstractAssert</code> subclass ... allowing stringing of methods as above (or whatever the technical terms is for this...)."},{"owner":{"account_id":703628,"reputation":14438,"user_id":595305,"accept_rate":83,"display_name":"mike rodent"},"score":0,"creation_date":1476202487,"post_id":35813323,"comment_id":67242279,"body_markdown":"@weston actually I&#39;ve just used your technique in AssertJ 2.0.0.  No excuse for not upgrading, no doubt, but though you might like to know.","body":"@weston actually I&#39;ve just used your technique in AssertJ 2.0.0.  No excuse for not upgrading, no doubt, but though you might like to know."},{"owner":{"account_id":148440,"reputation":54364,"user_id":360211,"accept_rate":76,"display_name":"weston"},"score":0,"creation_date":1476210007,"post_id":35813323,"comment_id":67246660,"body_markdown":"@mikerodent _&quot;allowing stringing of methods as above (or whatever the technical terms is for this...)&quot;_ fluent would be the term. So, \n_&quot;... allowing fluent statements.&quot;_","body":"@mikerodent <i>&quot;allowing stringing of methods as above (or whatever the technical terms is for this...)&quot;</i> fluent would be the term. So,  <i>&quot;... allowing fluent statements.&quot;</i>"},{"owner":{"account_id":148440,"reputation":54364,"user_id":360211,"accept_rate":76,"display_name":"weston"},"score":0,"creation_date":1476210062,"post_id":35813323,"comment_id":67246691,"body_markdown":"@mikerodent that is interesting that it works in 2, I don&#39;t know why I thought was 3","body":"@mikerodent that is interesting that it works in 2, I don&#39;t know why I thought was 3"}],"tags":[],"owner":{"account_id":148440,"reputation":54364,"user_id":360211,"accept_rate":76,"display_name":"weston"},"comment_count":7,"down_vote_count":1,"up_vote_count":43,"is_accepted":false,"score":42,"last_activity_date":1476210283,"creation_date":1457176044,"answer_id":35813323,"question_id":156503,"body_markdown":"Using an [AssertJ](http://joel-costigliola.github.io/assertj/) assertion, which can be used alongside JUnit:\r\n\r\n    import static org.assertj.core.api.Assertions.*;\r\n\r\n    @Test\r\n    public void testFooThrowsIndexOutOfBoundsException() {\r\n      Foo foo = new Foo();\r\n\r\n      assertThatThrownBy(() -&gt; foo.doStuff())\r\n            .isInstanceOf(IndexOutOfBoundsException.class);\r\n    }\r\n\r\nIt&#39;s better than `@Test(expected=IndexOutOfBoundsException.class)` because it guarantees the expected line in the test threw the exception and lets you check more details about the exception, such as message, easier:\r\n\r\n    assertThatThrownBy(() -&gt;\r\n           {\r\n             throw new Exception(&quot;boom!&quot;);\r\n           })\r\n        .isInstanceOf(Exception.class)\r\n        .hasMessageContaining(&quot;boom&quot;);\r\n\r\n[Maven/Gradle instructions here.](http://joel-costigliola.github.io/assertj/assertj-core-quick-start.html)","title":"How do you assert that a certain exception is thrown in JUnit tests?","body":"<p>Using an <a href=\"http://joel-costigliola.github.io/assertj/\" rel=\"noreferrer\">AssertJ</a> assertion, which can be used alongside JUnit:</p>\n\n<pre><code>import static org.assertj.core.api.Assertions.*;\n\n@Test\npublic void testFooThrowsIndexOutOfBoundsException() {\n  Foo foo = new Foo();\n\n  assertThatThrownBy(() -&gt; foo.doStuff())\n        .isInstanceOf(IndexOutOfBoundsException.class);\n}\n</code></pre>\n\n<p>It's better than <code>@Test(expected=IndexOutOfBoundsException.class)</code> because it guarantees the expected line in the test threw the exception and lets you check more details about the exception, such as message, easier:</p>\n\n<pre><code>assertThatThrownBy(() -&gt;\n       {\n         throw new Exception(\"boom!\");\n       })\n    .isInstanceOf(Exception.class)\n    .hasMessageContaining(\"boom\");\n</code></pre>\n\n<p><a href=\"http://joel-costigliola.github.io/assertj/assertj-core-quick-start.html\" rel=\"noreferrer\">Maven/Gradle instructions here.</a></p>\n"},{"comments":[{"owner":{"account_id":34025,"reputation":23628,"user_id":95725,"display_name":"NamshubWriter"},"score":2,"creation_date":1467685287,"post_id":35908056,"comment_id":63813799,"body_markdown":"The second `catch` would swallow the stack trace if some other exception is thrown, losing useful information","body":"The second <code>catch</code> would swallow the stack trace if some other exception is thrown, losing useful information"}],"tags":[],"owner":{"account_id":6529610,"reputation":1563,"user_id":5051165,"accept_rate":67,"display_name":"Matt Welke"},"comment_count":1,"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1457586605,"creation_date":1457586605,"answer_id":35908056,"question_id":156503,"body_markdown":"I wanted to comment with my solution to this problem, which avoided needing any of the exception related JUnit code.\r\n\r\nI used assertTrue(boolean) combined with try/catch to look for my expected exception to be thrown. Here&#39;s an example:\r\n\r\n    public void testConstructor() {\r\n        boolean expectedExceptionThrown;\r\n        try {\r\n            // Call constructor with bad arguments\r\n            double a = 1;\r\n            double b = 2;\r\n            double c = a + b; // In my example, this is an invalid option for c\r\n            new Triangle(a, b, c);\r\n            expectedExceptionThrown = false; // because it successfully constructed the object\r\n        }\r\n        catch(IllegalArgumentException e) {\r\n            expectedExceptionThrown = true; // because I&#39;m in this catch block\r\n        }\r\n        catch(Exception e) {\r\n            expectedExceptionThrown = false; // because it threw an exception but not the one expected\r\n        }\r\n        assertTrue(expectedExceptionThrown);\r\n    }\r\n     ","title":"How do you assert that a certain exception is thrown in JUnit tests?","body":"<p>I wanted to comment with my solution to this problem, which avoided needing any of the exception related JUnit code.</p>\n\n<p>I used assertTrue(boolean) combined with try/catch to look for my expected exception to be thrown. Here's an example:</p>\n\n<pre><code>public void testConstructor() {\n    boolean expectedExceptionThrown;\n    try {\n        // Call constructor with bad arguments\n        double a = 1;\n        double b = 2;\n        double c = a + b; // In my example, this is an invalid option for c\n        new Triangle(a, b, c);\n        expectedExceptionThrown = false; // because it successfully constructed the object\n    }\n    catch(IllegalArgumentException e) {\n        expectedExceptionThrown = true; // because I'm in this catch block\n    }\n    catch(Exception e) {\n        expectedExceptionThrown = false; // because it threw an exception but not the one expected\n    }\n    assertTrue(expectedExceptionThrown);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":145555,"reputation":21469,"user_id":355438,"display_name":"Ilya Serbis"},"score":0,"creation_date":1589319303,"post_id":38553412,"comment_id":109246320,"body_markdown":"[`expectThrows()`](https://javadoc.jitpack.io/com/github/cbeust/testng/master/javadoc/org/testng/Assert.html#expectThrows-java.lang.Class-org.testng.Assert.ThrowingRunnable-) is a part TestNG, not a JUnit","body":"<a href=\"https://javadoc.jitpack.io/com/github/cbeust/testng/master/javadoc/org/testng/Assert.html#expectThrows-java.lang.Class-org.testng.Assert.ThrowingRunnable-\" rel=\"nofollow noreferrer\"><code>expectThrows()</code></a> is a part TestNG, not a JUnit"}],"tags":[],"owner":{"account_id":1082613,"reputation":4508,"user_id":1079174,"display_name":"Daniel K&#228;fer"},"comment_count":1,"down_vote_count":1,"up_vote_count":15,"is_accepted":false,"score":14,"last_activity_date":1660950355,"creation_date":1469372431,"answer_id":38553412,"question_id":156503,"body_markdown":"## JUnit 5 Solution ##\r\n\r\n    import static org.junit.jupiter.api.Assertions.assertThrows;\r\n\r\n    @Test\r\n    void testFooThrowsIndexOutOfBoundsException() {    \r\n      IndexOutOfBoundsException exception = expectThrows(IndexOutOfBoundsException.class, foo::doStuff);\r\n         \r\n      assertEquals(&quot;some message&quot;, exception.getMessage());\r\n    }\r\n\r\nMore Infos about JUnit 5 on http://junit.org/junit5/docs/current/user-guide/#writing-tests-assertions","title":"How do you assert that a certain exception is thrown in JUnit tests?","body":"<h2>JUnit 5 Solution</h2>\n<pre><code>import static org.junit.jupiter.api.Assertions.assertThrows;\n\n@Test\nvoid testFooThrowsIndexOutOfBoundsException() {    \n  IndexOutOfBoundsException exception = expectThrows(IndexOutOfBoundsException.class, foo::doStuff);\n     \n  assertEquals(&quot;some message&quot;, exception.getMessage());\n}\n</code></pre>\n<p>More Infos about JUnit 5 on <a href=\"http://junit.org/junit5/docs/current/user-guide/#writing-tests-assertions\" rel=\"nofollow noreferrer\">http://junit.org/junit5/docs/current/user-guide/#writing-tests-assertions</a></p>\n"},{"tags":[],"owner":{"account_id":6220832,"reputation":165,"user_id":4840515,"display_name":"Shirsh Sinha"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1477726458,"creation_date":1477726458,"answer_id":40317041,"question_id":156503,"body_markdown":"Take for example, you want to write Junit for below mentioned code fragment\r\n\r\n    public int divideByZeroDemo(int a,int b){\r\n\t\t\r\n\t\treturn a/b;\r\n\t}\r\n\t\r\n\tpublic void exceptionWithMessage(String [] arr){\r\n\t\t\r\n\t\tthrow new ArrayIndexOutOfBoundsException(&quot;Array is out of bound&quot;);\r\n\t}\r\n\r\nThe above code is to test for some unknown exception that may occur and the below one is to assert some exception with custom message.\r\n\r\n\r\n     @Rule\r\n\tpublic ExpectedException exception=ExpectedException.none();\r\n\t\r\n\tprivate Demo demo;\r\n\t@Before\r\n\tpublic void setup(){\r\n\t\t\r\n\t\tdemo=new Demo();\r\n\t}\r\n\t@Test(expected=ArithmeticException.class)\r\n\tpublic void testIfItThrowsAnyException() {\r\n\t\r\n\t\tdemo.divideByZeroDemo(5, 0);\r\n\t\t\r\n\t}\r\n\t\r\n\t@Test\r\n\tpublic void testExceptionWithMessage(){\r\n\t\t\r\n\t\t\r\n\t\texception.expectMessage(&quot;Array is out of bound&quot;);\r\n\t\texception.expect(ArrayIndexOutOfBoundsException.class);\r\n\t\tdemo.exceptionWithMessage(new String[]{&quot;This&quot;,&quot;is&quot;,&quot;a&quot;,&quot;demo&quot;});\r\n\t}","title":"How do you assert that a certain exception is thrown in JUnit tests?","body":"<p>Take for example, you want to write Junit for below mentioned code fragment</p>\n\n<pre><code>public int divideByZeroDemo(int a,int b){\n\n    return a/b;\n}\n\npublic void exceptionWithMessage(String [] arr){\n\n    throw new ArrayIndexOutOfBoundsException(\"Array is out of bound\");\n}\n</code></pre>\n\n<p>The above code is to test for some unknown exception that may occur and the below one is to assert some exception with custom message.</p>\n\n<pre><code> @Rule\npublic ExpectedException exception=ExpectedException.none();\n\nprivate Demo demo;\n@Before\npublic void setup(){\n\n    demo=new Demo();\n}\n@Test(expected=ArithmeticException.class)\npublic void testIfItThrowsAnyException() {\n\n    demo.divideByZeroDemo(5, 0);\n\n}\n\n@Test\npublic void testExceptionWithMessage(){\n\n\n    exception.expectMessage(\"Array is out of bound\");\n    exception.expect(ArrayIndexOutOfBoundsException.class);\n    demo.exceptionWithMessage(new String[]{\"This\",\"is\",\"a\",\"demo\"});\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1843851,"reputation":3637,"user_id":1672678,"display_name":"anre"},"score":1,"creation_date":1501762419,"post_id":41019785,"comment_id":77928172,"body_markdown":"Adding org.junit.jupiter:junit-jupiter-engine:5.0.0-RC2 dependency (in addition to the already existing junit:junit:4.12) to be able to use assertThrows is perhaps not the preferred solution, but did not cause any issues for me.","body":"Adding org.junit.jupiter:junit-jupiter-engine:5.0.0-RC2 dependency (in addition to the already existing junit:junit:4.12) to be able to use assertThrows is perhaps not the preferred solution, but did not cause any issues for me."},{"owner":{"account_id":1681986,"reputation":4236,"user_id":1546042,"display_name":"BitfulByte"},"score":0,"creation_date":1530858884,"post_id":41019785,"comment_id":89389587,"body_markdown":"I&#39;m a fan of using the ExpectedException rule but it always bothered me that it breaks with AAA. You&#39;ve wrote an excellent article to describe all the different approaches and you&#39;ve definitely encouraged me to try AssertJ :-) Thanks!","body":"I&#39;m a fan of using the ExpectedException rule but it always bothered me that it breaks with AAA. You&#39;ve wrote an excellent article to describe all the different approaches and you&#39;ve definitely encouraged me to try AssertJ :-) Thanks!"},{"owner":{"account_id":20228,"reputation":40720,"user_id":48136,"display_name":"bric3"},"score":0,"creation_date":1530863681,"post_id":41019785,"comment_id":89391997,"body_markdown":"@PimHazebroek thanks. AssertJ API is quite rich. Better in my opinion that what JUnit proposes out of the box.","body":"@PimHazebroek thanks. AssertJ API is quite rich. Better in my opinion that what JUnit proposes out of the box."}],"tags":[],"owner":{"account_id":20228,"reputation":40720,"user_id":48136,"display_name":"bric3"},"comment_count":3,"down_vote_count":0,"up_vote_count":138,"is_accepted":false,"score":138,"last_activity_date":1585078021,"creation_date":1481120364,"answer_id":41019785,"question_id":156503,"body_markdown":"**tl;dr**\r\n\r\n* post-JDK8 : Use **AssertJ** or custom lambdas to assert _exceptional_ behaviour.\r\n\r\n* pre-JDK8 : I will recommend the old good `try`-`catch` block. (_Don&#39;t forget to add a `fail()` assertion before the `catch` block_)\r\n\r\n_Regardless of Junit 4 or JUnit 5._\r\n\r\n**the long story**\r\n\r\nIt is possible to write yourself a _do it yourself_ `try`-`catch` block or use the JUnit tools (`@Test(expected = ...)` or the `@Rule ExpectedException` JUnit rule feature).\r\n\r\nBut these ways are not so elegant and don&#39;t mix well _readability wise_ with other tools. Moreover, JUnit tooling does have some pitfalls.\r\n\r\n1. The `try`-`catch` block you have to write the block around the tested behavior and write the assertion in the catch block, that may be fine but many find that this style interrupts the reading flow of a test. Also, you need to write an `Assert.fail` at the end of the `try` block. Otherwise, the test may miss one side of the assertions; _PMD_, _findbugs_ or _Sonar_ will spot such issues.\r\n\r\n2. The `@Test(expected = ...)` feature is interesting as you can write less code and then writing this test is supposedly less prone to coding errors. **But** this approach is lacking in some areas.\r\n    * If the test needs to check additional things on the exception like the cause or the message (good exception messages are really important, having a precise exception type may not be enough). \r\n    * Also as the expectation is placed around in the method, depending on how the tested code is written then the wrong part of the test code can throw the exception, leading to false-positive test and I&#39;m not sure that _PMD_, _findbugs_ or _Sonar_ will give hints on such code.\r\n\r\n            @Test(expected = WantedException.class)\r\n            public void call2_should_throw_a_WantedException__not_call1() {\r\n                // init tested\r\n                tested.call1(); // may throw a WantedException\r\n    \r\n                // call to be actually tested\r\n                tested.call2(); // the call that is supposed to raise an exception\r\n            }\r\n\r\n3. The `ExpectedException` rule is also an attempt to fix the previous caveats, but it feels a bit awkward to use as it uses an expectation style, _EasyMock_ users know very well this style. It might be convenient for some, but if you follow _Behaviour Driven Development_ (BDD) or _Arrange Act Assert_ (AAA) principles the `ExpectedException` rule won&#39;t fit in those writing style. Aside from that it may suffer from the same issue as the `@Test` way, depending on where you place the expectation.\r\n\r\n\r\n        @Rule ExpectedException thrown = ExpectedException.none()\r\n\r\n        @Test\r\n        public void call2_should_throw_a_WantedException__not_call1() {\r\n            // expectations\r\n            thrown.expect(WantedException.class);\r\n            thrown.expectMessage(&quot;boom&quot;);\r\n\r\n            // init tested\r\n            tested.call1(); // may throw a WantedException\r\n    \r\n            // call to be actually tested\r\n            tested.call2(); // the call that is supposed to raise an exception\r\n        }\r\n\r\n    Even the expected exception is placed before the test statement, it breaks your reading flow if the tests follow BDD or AAA.\r\n\r\n    Also, see this [comment][1] issue on JUnit of the author of `ExpectedException`. [JUnit 4.13-beta-2][2] even deprecates this mechanism:\r\n\r\n    &gt; [Pull request #1519][3]: Deprecate ExpectedException\r\n    &gt; \r\n    &gt; The method Assert.assertThrows provides a nicer way for verifying exceptions. In addition, the use of ExpectedException is error-prone when used with other rules like TestWatcher because the order of rules is important in that case.\r\n\r\n\r\nSo these above options have all their load of caveats, and clearly not immune to coder errors.\r\n\r\n4. There&#39;s a project I became aware of after creating this answer that looks promising, it&#39;s [**catch-exception**][4].\r\n\r\n    As the description of the project says, it let a coder write in a fluent line of code catching the exception and offer this exception for the latter assertion. And you can use any assertion library like [Hamcrest][5] or [AssertJ][6].\r\n    \r\n    A rapid example taken from the home page : \r\n    \r\n        // given: an empty list\r\n        List myList = new ArrayList();\r\n        \r\n        // when: we try to get the first element of the list\r\n        when(myList).get(1);\r\n        \r\n        // then: we expect an IndexOutOfBoundsException\r\n        then(caughtException())\r\n                .isInstanceOf(IndexOutOfBoundsException.class)\r\n                .hasMessage(&quot;Index: 1, Size: 0&quot;) \r\n                .hasNoCause();\r\n    \r\n    As you can see the code is really straightforward, you catch the exception on a specific line, the `then` API is an alias that will use AssertJ APIs (similar to using `assertThat(ex).hasNoCause()...`). _At some point the project relied on FEST-Assert the ancestor of AssertJ_. **EDIT:** It seems the project is brewing a Java 8 Lambdas support.\r\n    \r\n    Currently, this library has two shortcomings : \r\n      * At the time of this writing, it is noteworthy to say this library is based on Mockito 1.x as it creates a mock of the tested object behind the scene. As Mockito is still not updated **this library cannot work with final classes or final methods**. And even if it was based on Mockito 2 in the current version, this would require to declare a global mock maker (`inline-mock-maker`), something that may not what you want, as this mock maker has different drawbacks that the regular mock maker.\r\n\r\n      * It requires yet another test dependency.\r\n    \r\n    These issues won&#39;t apply once the library supports lambdas. However, the functionality will be duplicated by the AssertJ toolset.\r\n\r\n    **Taking all into account if you don&#39;t want to use the catch-exception tool, I will recommend the old good way of the `try`-`catch` block, at least up to the JDK7. And for JDK 8 users you might prefer to use AssertJ as it offers may more than just asserting exceptions.**\r\n\r\n5. With the JDK8, lambdas enter the test scene, and they have proved to be an interesting way to assert exceptional behaviour. AssertJ has been updated to provide a nice fluent API to assert exceptional behaviour.\r\n\r\n    And a sample test with [AssertJ][7] :\r\n    \r\n        @Test\r\n        public void test_exception_approach_1() {\r\n            ...\r\n            assertThatExceptionOfType(IOException.class)\r\n                    .isThrownBy(() -&gt; someBadIOOperation())\r\n                    .withMessage(&quot;boom!&quot;); \r\n        }\r\n    \r\n        @Test\r\n        public void test_exception_approach_2() {\r\n            ...\r\n            assertThatThrownBy(() -&gt; someBadIOOperation())\r\n                    .isInstanceOf(Exception.class)\r\n                    .hasMessageContaining(&quot;boom&quot;);\r\n        }\r\n    \r\n        @Test\r\n        public void test_exception_approach_3() {\r\n            ...\r\n            // when\r\n            Throwable thrown = catchThrowable(() -&gt; someBadIOOperation());\r\n    \r\n            // then\r\n            assertThat(thrown).isInstanceOf(Exception.class)\r\n                              .hasMessageContaining(&quot;boom&quot;);\r\n        }\r\n\r\n6. With a near-complete rewrite of JUnit 5, assertions have been [improved][8] a bit, they may prove interesting as an out of the box way to assert properly exception. But really the assertion API is still a bit poor, there&#39;s nothing outside [`assertThrows`][9]. \r\n\r\n        @Test\r\n        @DisplayName(&quot;throws EmptyStackException when peeked&quot;)\r\n        void throwsExceptionWhenPeeked() {\r\n            Throwable t = assertThrows(EmptyStackException.class, () -&gt; stack.peek());\r\n\r\n            Assertions.assertEquals(&quot;...&quot;, t.getMessage());\r\n        }\r\n\r\n    As you noticed `assertEquals` is still returning `void`, and as such doesn&#39;t allow chaining assertions like AssertJ.\r\n\r\n    Also if you remember name clash with `Matcher` or `Assert`, be prepared to meet the same clash with `Assertions`.\r\n\r\nI&#39;d like to conclude that today (2017-03-03) **AssertJ**&#39;s ease of use, discoverable API, the rapid pace of development and as a _de facto_ test dependency is the best solution with JDK8 regardless of the test framework (JUnit or not), prior JDKs should instead rely on **`try`-`catch`** blocks even if they feel clunky.\r\n\r\n\r\n_This answer has been copied from [another question](https://stackoverflow.com/a/17428439/48136) that don&#39;t have the same visibility, I am the same author._\r\n\r\n\r\n  [1]: https://github.com/junit-team/junit4/issues/706#issuecomment-21385116\r\n  [2]: https://github.com/junit-team/junit4/wiki/4.13-Release-Notes\r\n  [3]: https://github.com/junit-team/junit4/pull/1519\r\n  [4]: https://github.com/Codearte/catch-exception\r\n  [5]: https://github.com/hamcrest/JavaHamcrest\r\n  [6]: https://github.com/joel-costigliola/assertj-core\r\n  [7]: http://joel-costigliola.github.io/assertj/\r\n  [8]: http://junit.org/junit5/docs/current/user-guide/#writing-tests-assertions\r\n  [9]: http://junit.org/junit5/docs/current/api/org/junit/jupiter/api/Assertions.html#assertThrows-java.lang.Class-org.junit.jupiter.api.function.Executable-","title":"How do you assert that a certain exception is thrown in JUnit tests?","body":"<p><strong>tl;dr</strong></p>\n\n<ul>\n<li><p>post-JDK8 : Use <strong>AssertJ</strong> or custom lambdas to assert <em>exceptional</em> behaviour.</p></li>\n<li><p>pre-JDK8 : I will recommend the old good <code>try</code>-<code>catch</code> block. (<em>Don't forget to add a <code>fail()</code> assertion before the <code>catch</code> block</em>)</p></li>\n</ul>\n\n<p><em>Regardless of Junit 4 or JUnit 5.</em></p>\n\n<p><strong>the long story</strong></p>\n\n<p>It is possible to write yourself a <em>do it yourself</em> <code>try</code>-<code>catch</code> block or use the JUnit tools (<code>@Test(expected = ...)</code> or the <code>@Rule ExpectedException</code> JUnit rule feature).</p>\n\n<p>But these ways are not so elegant and don't mix well <em>readability wise</em> with other tools. Moreover, JUnit tooling does have some pitfalls.</p>\n\n<ol>\n<li><p>The <code>try</code>-<code>catch</code> block you have to write the block around the tested behavior and write the assertion in the catch block, that may be fine but many find that this style interrupts the reading flow of a test. Also, you need to write an <code>Assert.fail</code> at the end of the <code>try</code> block. Otherwise, the test may miss one side of the assertions; <em>PMD</em>, <em>findbugs</em> or <em>Sonar</em> will spot such issues.</p></li>\n<li><p>The <code>@Test(expected = ...)</code> feature is interesting as you can write less code and then writing this test is supposedly less prone to coding errors. <strong>But</strong> this approach is lacking in some areas.</p>\n\n<ul>\n<li>If the test needs to check additional things on the exception like the cause or the message (good exception messages are really important, having a precise exception type may not be enough). </li>\n<li><p>Also as the expectation is placed around in the method, depending on how the tested code is written then the wrong part of the test code can throw the exception, leading to false-positive test and I'm not sure that <em>PMD</em>, <em>findbugs</em> or <em>Sonar</em> will give hints on such code.</p>\n\n<pre><code>@Test(expected = WantedException.class)\npublic void call2_should_throw_a_WantedException__not_call1() {\n    // init tested\n    tested.call1(); // may throw a WantedException\n\n    // call to be actually tested\n    tested.call2(); // the call that is supposed to raise an exception\n}\n</code></pre></li>\n</ul></li>\n<li><p>The <code>ExpectedException</code> rule is also an attempt to fix the previous caveats, but it feels a bit awkward to use as it uses an expectation style, <em>EasyMock</em> users know very well this style. It might be convenient for some, but if you follow <em>Behaviour Driven Development</em> (BDD) or <em>Arrange Act Assert</em> (AAA) principles the <code>ExpectedException</code> rule won't fit in those writing style. Aside from that it may suffer from the same issue as the <code>@Test</code> way, depending on where you place the expectation.</p>\n\n<pre><code>@Rule ExpectedException thrown = ExpectedException.none()\n\n@Test\npublic void call2_should_throw_a_WantedException__not_call1() {\n    // expectations\n    thrown.expect(WantedException.class);\n    thrown.expectMessage(\"boom\");\n\n    // init tested\n    tested.call1(); // may throw a WantedException\n\n    // call to be actually tested\n    tested.call2(); // the call that is supposed to raise an exception\n}\n</code></pre>\n\n<p>Even the expected exception is placed before the test statement, it breaks your reading flow if the tests follow BDD or AAA.</p>\n\n<p>Also, see this <a href=\"https://github.com/junit-team/junit4/issues/706#issuecomment-21385116\" rel=\"noreferrer\">comment</a> issue on JUnit of the author of <code>ExpectedException</code>. <a href=\"https://github.com/junit-team/junit4/wiki/4.13-Release-Notes\" rel=\"noreferrer\">JUnit 4.13-beta-2</a> even deprecates this mechanism:</p>\n\n<blockquote>\n  <p><a href=\"https://github.com/junit-team/junit4/pull/1519\" rel=\"noreferrer\">Pull request #1519</a>: Deprecate ExpectedException</p>\n  \n  <p>The method Assert.assertThrows provides a nicer way for verifying exceptions. In addition, the use of ExpectedException is error-prone when used with other rules like TestWatcher because the order of rules is important in that case.</p>\n</blockquote></li>\n</ol>\n\n<p>So these above options have all their load of caveats, and clearly not immune to coder errors.</p>\n\n<ol start=\"4\">\n<li><p>There's a project I became aware of after creating this answer that looks promising, it's <a href=\"https://github.com/Codearte/catch-exception\" rel=\"noreferrer\"><strong>catch-exception</strong></a>.</p>\n\n<p>As the description of the project says, it let a coder write in a fluent line of code catching the exception and offer this exception for the latter assertion. And you can use any assertion library like <a href=\"https://github.com/hamcrest/JavaHamcrest\" rel=\"noreferrer\">Hamcrest</a> or <a href=\"https://github.com/joel-costigliola/assertj-core\" rel=\"noreferrer\">AssertJ</a>.</p>\n\n<p>A rapid example taken from the home page : </p>\n\n<pre><code>// given: an empty list\nList myList = new ArrayList();\n\n// when: we try to get the first element of the list\nwhen(myList).get(1);\n\n// then: we expect an IndexOutOfBoundsException\nthen(caughtException())\n        .isInstanceOf(IndexOutOfBoundsException.class)\n        .hasMessage(\"Index: 1, Size: 0\") \n        .hasNoCause();\n</code></pre>\n\n<p>As you can see the code is really straightforward, you catch the exception on a specific line, the <code>then</code> API is an alias that will use AssertJ APIs (similar to using <code>assertThat(ex).hasNoCause()...</code>). <em>At some point the project relied on FEST-Assert the ancestor of AssertJ</em>. <strong>EDIT:</strong> It seems the project is brewing a Java 8 Lambdas support.</p>\n\n<p>Currently, this library has two shortcomings : </p>\n\n<ul>\n<li><p>At the time of this writing, it is noteworthy to say this library is based on Mockito 1.x as it creates a mock of the tested object behind the scene. As Mockito is still not updated <strong>this library cannot work with final classes or final methods</strong>. And even if it was based on Mockito 2 in the current version, this would require to declare a global mock maker (<code>inline-mock-maker</code>), something that may not what you want, as this mock maker has different drawbacks that the regular mock maker.</p></li>\n<li><p>It requires yet another test dependency.</p></li>\n</ul>\n\n<p>These issues won't apply once the library supports lambdas. However, the functionality will be duplicated by the AssertJ toolset.</p>\n\n<p><strong>Taking all into account if you don't want to use the catch-exception tool, I will recommend the old good way of the <code>try</code>-<code>catch</code> block, at least up to the JDK7. And for JDK 8 users you might prefer to use AssertJ as it offers may more than just asserting exceptions.</strong></p></li>\n<li><p>With the JDK8, lambdas enter the test scene, and they have proved to be an interesting way to assert exceptional behaviour. AssertJ has been updated to provide a nice fluent API to assert exceptional behaviour.</p>\n\n<p>And a sample test with <a href=\"http://joel-costigliola.github.io/assertj/\" rel=\"noreferrer\">AssertJ</a> :</p>\n\n<pre><code>@Test\npublic void test_exception_approach_1() {\n    ...\n    assertThatExceptionOfType(IOException.class)\n            .isThrownBy(() -&gt; someBadIOOperation())\n            .withMessage(\"boom!\"); \n}\n\n@Test\npublic void test_exception_approach_2() {\n    ...\n    assertThatThrownBy(() -&gt; someBadIOOperation())\n            .isInstanceOf(Exception.class)\n            .hasMessageContaining(\"boom\");\n}\n\n@Test\npublic void test_exception_approach_3() {\n    ...\n    // when\n    Throwable thrown = catchThrowable(() -&gt; someBadIOOperation());\n\n    // then\n    assertThat(thrown).isInstanceOf(Exception.class)\n                      .hasMessageContaining(\"boom\");\n}\n</code></pre></li>\n<li><p>With a near-complete rewrite of JUnit 5, assertions have been <a href=\"http://junit.org/junit5/docs/current/user-guide/#writing-tests-assertions\" rel=\"noreferrer\">improved</a> a bit, they may prove interesting as an out of the box way to assert properly exception. But really the assertion API is still a bit poor, there's nothing outside <a href=\"http://junit.org/junit5/docs/current/api/org/junit/jupiter/api/Assertions.html#assertThrows-java.lang.Class-org.junit.jupiter.api.function.Executable-\" rel=\"noreferrer\"><code>assertThrows</code></a>. </p>\n\n<pre><code>@Test\n@DisplayName(\"throws EmptyStackException when peeked\")\nvoid throwsExceptionWhenPeeked() {\n    Throwable t = assertThrows(EmptyStackException.class, () -&gt; stack.peek());\n\n    Assertions.assertEquals(\"...\", t.getMessage());\n}\n</code></pre>\n\n<p>As you noticed <code>assertEquals</code> is still returning <code>void</code>, and as such doesn't allow chaining assertions like AssertJ.</p>\n\n<p>Also if you remember name clash with <code>Matcher</code> or <code>Assert</code>, be prepared to meet the same clash with <code>Assertions</code>.</p></li>\n</ol>\n\n<p>I'd like to conclude that today (2017-03-03) <strong>AssertJ</strong>'s ease of use, discoverable API, the rapid pace of development and as a <em>de facto</em> test dependency is the best solution with JDK8 regardless of the test framework (JUnit or not), prior JDKs should instead rely on <strong><code>try</code>-<code>catch</code></strong> blocks even if they feel clunky.</p>\n\n<p><em>This answer has been copied from <a href=\"https://stackoverflow.com/a/17428439/48136\">another question</a> that don't have the same visibility, I am the same author.</em></p>\n"},{"tags":[],"owner":{"account_id":3454996,"reputation":5649,"user_id":2893693,"accept_rate":83,"display_name":"J-J"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1481176099,"creation_date":1481176099,"answer_id":41032596,"question_id":156503,"body_markdown":"In JUnit 4 or later you can test the exceptions as follows\r\n\r\n    @Rule\r\n    public ExpectedException exceptions = ExpectedException.none();\r\n\r\n&lt;br&gt; this provides a lot of features which can be used to improve our JUnit tests. &lt;br&gt; If you see the below example I am testing 3 things on the exception.\r\n    \r\n\r\n 1. The Type of exception thrown\r\n 2. The exception Message\r\n 3. The cause of the exception\r\n\r\n&lt;br&gt;\r\n\r\n    public class MyTest {\r\n    \t\r\n    \t@Rule\r\n    \tpublic ExpectedException exceptions = ExpectedException.none();\r\n    \t\r\n    \tClassUnderTest classUnderTest;\r\n    \t\r\n    \t@Before\r\n    \tpublic void setUp() throws Exception {\r\n    \t\tclassUnderTest = new ClassUnderTest();\r\n    \t}\r\n    \t\r\n    \t@Test\r\n    \tpublic void testAppleisSweetAndRed() throws Exception {\r\n    \t\t\r\n    \t\texceptions.expect(Exception.class);\r\n    \t\texceptions.expectMessage(&quot;this is the exception message&quot;);\r\n    \t\texceptions.expectCause(Matchers.&lt;Throwable&gt;equalTo(exceptionCause));\r\n    \t\t\r\n    \t\tclassUnderTest.methodUnderTest(&quot;param1&quot;, &quot;param2&quot;);\r\n    \t}\r\n    \t\r\n    }","title":"How do you assert that a certain exception is thrown in JUnit tests?","body":"<p>In JUnit 4 or later you can test the exceptions as follows</p>\n\n<pre><code>@Rule\npublic ExpectedException exceptions = ExpectedException.none();\n</code></pre>\n\n<p><br> this provides a lot of features which can be used to improve our JUnit tests. <br> If you see the below example I am testing 3 things on the exception.</p>\n\n<ol>\n<li>The Type of exception thrown</li>\n<li>The exception Message</li>\n<li>The cause of the exception</li>\n</ol>\n\n<p><br></p>\n\n<pre><code>public class MyTest {\n\n    @Rule\n    public ExpectedException exceptions = ExpectedException.none();\n\n    ClassUnderTest classUnderTest;\n\n    @Before\n    public void setUp() throws Exception {\n        classUnderTest = new ClassUnderTest();\n    }\n\n    @Test\n    public void testAppleisSweetAndRed() throws Exception {\n\n        exceptions.expect(Exception.class);\n        exceptions.expectMessage(\"this is the exception message\");\n        exceptions.expectCause(Matchers.&lt;Throwable&gt;equalTo(exceptionCause));\n\n        classUnderTest.methodUnderTest(\"param1\", \"param2\");\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":346348,"reputation":2620,"user_id":679822,"accept_rate":73,"display_name":"Dilini Rajapaksha"},"comment_count":0,"down_vote_count":0,"up_vote_count":54,"is_accepted":false,"score":54,"last_activity_date":1660950429,"creation_date":1484011783,"answer_id":41559786,"question_id":156503,"body_markdown":"**Update:** JUnit5 has an improvement for exceptions testing: `assertThrows`.\r\n\r\nThe following example is from: [Junit 5 User Guide][1]\r\n\r\n    import static org.junit.jupiter.api.Assertions.assertThrows;\r\n\r\n    @Test\r\n    void exceptionTesting() {\r\n        IllegalArgumentException exception = assertThrows(IllegalArgumentException.class, () -&gt; {\r\n            throw new IllegalArgumentException(&quot;a message&quot;);\r\n        });\r\n        assertEquals(&quot;a message&quot;, exception.getMessage());\r\n    }\r\n\r\n**Original answer using JUnit 4.**\r\n\r\nThere are several ways to test that an exception is thrown. I have also discussed the below options in my post [How to write great unit tests with JUnit][2]\r\n\r\nSet the `expected` parameter `@Test(expected = FileNotFoundException.class)`.\r\n\r\n    @Test(expected = FileNotFoundException.class) \r\n    public void testReadFile() { \r\n        myClass.readFile(&quot;test.txt&quot;);\r\n    }\r\n\r\nUsing `try` `catch`\r\n\r\n    public void testReadFile() { \r\n        try {\r\n            myClass.readFile(&quot;test.txt&quot;);\r\n            fail(&quot;Expected a FileNotFoundException to be thrown&quot;);\r\n        } catch (FileNotFoundException e) {\r\n            assertThat(e.getMessage(), is(&quot;The file test.txt does not exist!&quot;));\r\n        }\r\n         \r\n    }\r\n \r\nTesting with `ExpectedException` Rule.\r\n\r\n   \r\n    @Rule\r\n    public ExpectedException thrown = ExpectedException.none();\r\n\r\n    @Test\r\n    public void testReadFile() throws FileNotFoundException {\r\n        \r\n        thrown.expect(FileNotFoundException.class);\r\n        thrown.expectMessage(startsWith(&quot;The file test.txt&quot;));\r\n        myClass.readFile(&quot;test.txt&quot;);\r\n    }\r\n\r\n   \r\n\r\nYou could read more about exceptions testing in [JUnit4 wiki for Exception testing](https://github.com/junit-team/junit4/wiki/Exception-testing) and [bad.robot - Expecting Exceptions JUnit Rule](http://baddotrobot.com/blog/2012/03/27/expecting-exception-with-junit-rule/index.html).\r\n\r\n\r\n  [1]: http://junit.org/junit5/docs/current/user-guide/#extensions-exception-handling\r\n  [2]: https://javacodehouse.com/junit-tutorial","title":"How do you assert that a certain exception is thrown in JUnit tests?","body":"<p><strong>Update:</strong> JUnit5 has an improvement for exceptions testing: <code>assertThrows</code>.</p>\n<p>The following example is from: <a href=\"http://junit.org/junit5/docs/current/user-guide/#extensions-exception-handling\" rel=\"noreferrer\">Junit 5 User Guide</a></p>\n<pre><code>import static org.junit.jupiter.api.Assertions.assertThrows;\n\n@Test\nvoid exceptionTesting() {\n    IllegalArgumentException exception = assertThrows(IllegalArgumentException.class, () -&gt; {\n        throw new IllegalArgumentException(&quot;a message&quot;);\n    });\n    assertEquals(&quot;a message&quot;, exception.getMessage());\n}\n</code></pre>\n<p><strong>Original answer using JUnit 4.</strong></p>\n<p>There are several ways to test that an exception is thrown. I have also discussed the below options in my post <a href=\"https://javacodehouse.com/junit-tutorial\" rel=\"noreferrer\">How to write great unit tests with JUnit</a></p>\n<p>Set the <code>expected</code> parameter <code>@Test(expected = FileNotFoundException.class)</code>.</p>\n<pre><code>@Test(expected = FileNotFoundException.class) \npublic void testReadFile() { \n    myClass.readFile(&quot;test.txt&quot;);\n}\n</code></pre>\n<p>Using <code>try</code> <code>catch</code></p>\n<pre><code>public void testReadFile() { \n    try {\n        myClass.readFile(&quot;test.txt&quot;);\n        fail(&quot;Expected a FileNotFoundException to be thrown&quot;);\n    } catch (FileNotFoundException e) {\n        assertThat(e.getMessage(), is(&quot;The file test.txt does not exist!&quot;));\n    }\n     \n}\n</code></pre>\n<p>Testing with <code>ExpectedException</code> Rule.</p>\n<pre><code>@Rule\npublic ExpectedException thrown = ExpectedException.none();\n\n@Test\npublic void testReadFile() throws FileNotFoundException {\n    \n    thrown.expect(FileNotFoundException.class);\n    thrown.expectMessage(startsWith(&quot;The file test.txt&quot;));\n    myClass.readFile(&quot;test.txt&quot;);\n}\n</code></pre>\n<p>You could read more about exceptions testing in <a href=\"https://github.com/junit-team/junit4/wiki/Exception-testing\" rel=\"noreferrer\">JUnit4 wiki for Exception testing</a> and <a href=\"http://baddotrobot.com/blog/2012/03/27/expecting-exception-with-junit-rule/index.html\" rel=\"noreferrer\">bad.robot - Expecting Exceptions JUnit Rule</a>.</p>\n"},{"tags":[],"owner":{"account_id":1601401,"reputation":31,"user_id":1482358,"display_name":"fahrenx"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1506859418,"creation_date":1506859418,"answer_id":46512202,"question_id":156503,"body_markdown":"With Java 8 you can create a method taking a code to check and expected exception as parameters:\r\n\r\n    private void expectException(Runnable r, Class&lt;?&gt; clazz) { \r\n        try {\r\n          r.run();\r\n          fail(&quot;Expected: &quot; + clazz.getSimpleName() + &quot; but not thrown&quot;);\r\n        } catch (Exception e) {\r\n          if (!clazz.isInstance(e)) fail(&quot;Expected: &quot; + clazz.getSimpleName() + &quot; but &quot; + e.getClass().getSimpleName() + &quot; found&quot;, e);\r\n        }\r\n      }\r\n\r\nand then inside your test:\r\n\r\n    expectException(() -&gt; list.sublist(0, 2).get(2), IndexOutOfBoundsException.class);\r\n\r\n\r\nBenefits:\r\n\r\n - not relying on any library\r\n - localised check - more precise and allows to have multiple assertions like this within one test if needed\r\n - easy to use \r\n","title":"How do you assert that a certain exception is thrown in JUnit tests?","body":"<p>With Java 8 you can create a method taking a code to check and expected exception as parameters:</p>\n\n<pre><code>private void expectException(Runnable r, Class&lt;?&gt; clazz) { \n    try {\n      r.run();\n      fail(\"Expected: \" + clazz.getSimpleName() + \" but not thrown\");\n    } catch (Exception e) {\n      if (!clazz.isInstance(e)) fail(\"Expected: \" + clazz.getSimpleName() + \" but \" + e.getClass().getSimpleName() + \" found\", e);\n    }\n  }\n</code></pre>\n\n<p>and then inside your test:</p>\n\n<pre><code>expectException(() -&gt; list.sublist(0, 2).get(2), IndexOutOfBoundsException.class);\n</code></pre>\n\n<p>Benefits:</p>\n\n<ul>\n<li>not relying on any library</li>\n<li>localised check - more precise and allows to have multiple assertions like this within one test if needed</li>\n<li>easy to use </li>\n</ul>\n"},{"comments":[{"owner":{"account_id":10038600,"reputation":255,"user_id":7473935,"display_name":"Clockwork"},"score":0,"creation_date":1552058364,"post_id":46514550,"comment_id":96879935,"body_markdown":"This approach is clean, but I don&#39;t see how this allows our test to follow &quot;Arrange-Act-Assert&quot;, since we have to wrap the &quot;Act&quot; part in an &quot;assertThrow&quot;, which is an assert.","body":"This approach is clean, but I don&#39;t see how this allows our test to follow &quot;Arrange-Act-Assert&quot;, since we have to wrap the &quot;Act&quot; part in an &quot;assertThrow&quot;, which is an assert."},{"owner":{"account_id":34025,"reputation":23628,"user_id":95725,"display_name":"NamshubWriter"},"score":0,"creation_date":1552324243,"post_id":46514550,"comment_id":96957076,"body_markdown":"@Clockwork The lambda is the &quot;act&quot;. The goal of Arrange-Act-Assert is to make the code clean and simple (and therefore easy to understand and maintain). As you stated, this approach is clean.","body":"@Clockwork The lambda is the &quot;act&quot;. The goal of Arrange-Act-Assert is to make the code clean and simple (and therefore easy to understand and maintain). As you stated, this approach is clean."},{"owner":{"account_id":10038600,"reputation":255,"user_id":7473935,"display_name":"Clockwork"},"score":0,"creation_date":1552327320,"post_id":46514550,"comment_id":96958638,"body_markdown":"I was still hoping I could assert the throw and the exception on the end of the test though, in the &quot;assert&quot; part. In this approach, you need to wrap the act in a first assert to catch it first.","body":"I was still hoping I could assert the throw and the exception on the end of the test though, in the &quot;assert&quot; part. In this approach, you need to wrap the act in a first assert to catch it first."},{"owner":{"account_id":34025,"reputation":23628,"user_id":95725,"display_name":"NamshubWriter"},"score":0,"creation_date":1552329392,"post_id":46514550,"comment_id":96959525,"body_markdown":"That would require more code in every test to do the assertion. That&#39;s more code and would be error-prone.","body":"That would require more code in every test to do the assertion. That&#39;s more code and would be error-prone."}],"tags":[],"owner":{"account_id":34025,"reputation":23628,"user_id":95725,"display_name":"NamshubWriter"},"comment_count":4,"down_vote_count":1,"up_vote_count":92,"is_accepted":false,"score":91,"last_activity_date":1627941216,"creation_date":1506876149,"answer_id":46514550,"question_id":156503,"body_markdown":"Now that JUnit 5 and JUnit 4.13 have been released, the best option would be to use `Assertions.assertThrows()`  (for JUnit 5) and `Assert.assertThrows()` (for JUnit 4.13). See\r\nthe [JUnit 5 User Guide][1].\r\n\r\nHere is an example that  verifies an exception is thrown, and uses [Truth][2] to  make assertions on the exception message:\r\n\r\n\r\n    public class FooTest {\r\n      @Test\r\n      public void doStuffThrowsIndexOutOfBoundsException() {\r\n        Foo foo = new Foo();\r\n\r\n        IndexOutOfBoundsException e = assertThrows(\r\n            IndexOutOfBoundsException.class, foo::doStuff);\r\n\r\n        assertThat(e).hasMessageThat().contains(&quot;woops!&quot;);\r\n      }\r\n    }\r\n\r\nThe advantages over the approaches in the other answers are:\r\n\r\n 1. Built into JUnit\r\n 2. You get a useful exception message if the code in the lambda doesn&#39;t throw an exception, and a stacktrace if it throws a different exception\r\n 3. Concise\r\n 4. Allows your tests to follow Arrange-Act-Assert\r\n 5. You can precisely indicate what code you are expecting to throw the exception\r\n 6. You don&#39;t need to list the expected exception in the `throws` clause\r\n 7. You can use the assertion framework of your choice to make assertions about the caught exception\r\n\r\n\r\n\r\n  [1]: http://junit.org/junit5/docs/current/user-guide/#extensions-exception-handling\r\n  [2]: http://google.github.io/truth/\r\n","title":"How do you assert that a certain exception is thrown in JUnit tests?","body":"<p>Now that JUnit 5 and JUnit 4.13 have been released, the best option would be to use <code>Assertions.assertThrows()</code>  (for JUnit 5) and <code>Assert.assertThrows()</code> (for JUnit 4.13). See\nthe <a href=\"http://junit.org/junit5/docs/current/user-guide/#extensions-exception-handling\" rel=\"noreferrer\">JUnit 5 User Guide</a>.</p>\n<p>Here is an example that  verifies an exception is thrown, and uses <a href=\"http://google.github.io/truth/\" rel=\"noreferrer\">Truth</a> to  make assertions on the exception message:</p>\n<pre><code>public class FooTest {\n  @Test\n  public void doStuffThrowsIndexOutOfBoundsException() {\n    Foo foo = new Foo();\n\n    IndexOutOfBoundsException e = assertThrows(\n        IndexOutOfBoundsException.class, foo::doStuff);\n\n    assertThat(e).hasMessageThat().contains(&quot;woops!&quot;);\n  }\n}\n</code></pre>\n<p>The advantages over the approaches in the other answers are:</p>\n<ol>\n<li>Built into JUnit</li>\n<li>You get a useful exception message if the code in the lambda doesn't throw an exception, and a stacktrace if it throws a different exception</li>\n<li>Concise</li>\n<li>Allows your tests to follow Arrange-Act-Assert</li>\n<li>You can precisely indicate what code you are expecting to throw the exception</li>\n<li>You don't need to list the expected exception in the <code>throws</code> clause</li>\n<li>You can use the assertion framework of your choice to make assertions about the caught exception</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":5016317,"reputation":11,"user_id":4031101,"display_name":"heio"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1507118606,"creation_date":1507115202,"answer_id":46563308,"question_id":156503,"body_markdown":"My solution using Java 8 lambdas:\r\n\r\n    public static &lt;T extends Throwable&gt; T assertThrows(Class&lt;T&gt; expected, ThrowingRunnable action) throws Throwable {\r\n        try {\r\n            action.run();\r\n            Assert.fail(&quot;Did not throw expected &quot; + expected.getSimpleName());\r\n            return null; // never actually\r\n        } catch (Throwable actual) {\r\n            if (!expected.isAssignableFrom(actual.getClass())) { // runtime &#39;!(actual instanceof expected)&#39;\r\n                System.err.println(&quot;Threw &quot; + actual.getClass().getSimpleName() \r\n                                   + &quot;, which is not a subtype of expected &quot; \r\n                                   + expected.getSimpleName());\r\n                throw actual; // throw the unexpected Throwable for maximum transparency\r\n            } else {\r\n                return (T) actual; // return the expected Throwable for further examination\r\n            }\r\n        }\r\n    }\r\n\r\nYou have to define a FunctionalInterface, because `Runnable` doesn&#39;t declare the required `throws`.\r\n\r\n    @FunctionalInterface\r\n    public interface ThrowingRunnable {\r\n        void run() throws Throwable;\r\n    }\r\n\r\nThe method can be used as follows:\r\n\r\n    \r\n    class CustomException extends Exception {\r\n        public final String message;\r\n        public CustomException(final String message) { this.message = message;}\r\n    }\r\n    CustomException e = assertThrows(CustomException.class, () -&gt; {\r\n        throw new CustomException(&quot;Lorem Ipsum&quot;);\r\n    });\r\n    assertEquals(&quot;Lorem Ipsum&quot;, e.message);","title":"How do you assert that a certain exception is thrown in JUnit tests?","body":"<p>My solution using Java 8 lambdas:</p>\n\n<pre><code>public static &lt;T extends Throwable&gt; T assertThrows(Class&lt;T&gt; expected, ThrowingRunnable action) throws Throwable {\n    try {\n        action.run();\n        Assert.fail(\"Did not throw expected \" + expected.getSimpleName());\n        return null; // never actually\n    } catch (Throwable actual) {\n        if (!expected.isAssignableFrom(actual.getClass())) { // runtime '!(actual instanceof expected)'\n            System.err.println(\"Threw \" + actual.getClass().getSimpleName() \n                               + \", which is not a subtype of expected \" \n                               + expected.getSimpleName());\n            throw actual; // throw the unexpected Throwable for maximum transparency\n        } else {\n            return (T) actual; // return the expected Throwable for further examination\n        }\n    }\n}\n</code></pre>\n\n<p>You have to define a FunctionalInterface, because <code>Runnable</code> doesn't declare the required <code>throws</code>.</p>\n\n<pre><code>@FunctionalInterface\npublic interface ThrowingRunnable {\n    void run() throws Throwable;\n}\n</code></pre>\n\n<p>The method can be used as follows:</p>\n\n<pre><code>class CustomException extends Exception {\n    public final String message;\n    public CustomException(final String message) { this.message = message;}\n}\nCustomException e = assertThrows(CustomException.class, () -&gt; {\n    throw new CustomException(\"Lorem Ipsum\");\n});\nassertEquals(\"Lorem Ipsum\", e.message);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10516822,"reputation":1,"user_id":7750672,"display_name":"Mohit ladia"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1510212184,"creation_date":1510208597,"answer_id":47195186,"question_id":156503,"body_markdown":"There are two ways of writing test case \r\n\r\n 1. Annotate the test with the exception which is thrown by the method. Something like this `@Test(expected = IndexOutOfBoundsException.class)`\r\n 2. You can simply catch the exception in the test class using the try catch block and assert on the message that is thrown from the method in test class.\r\n\r\n        try{\r\n        }\r\n        catch(exception to be thrown from method e)\r\n        {\r\n             assertEquals(&quot;message&quot;, e.getmessage());\r\n        }\r\n\r\nI hope this answers your query\r\nHappy learning...","title":"How do you assert that a certain exception is thrown in JUnit tests?","body":"<p>There are two ways of writing test case </p>\n\n<ol>\n<li>Annotate the test with the exception which is thrown by the method. Something like this <code>@Test(expected = IndexOutOfBoundsException.class)</code></li>\n<li><p>You can simply catch the exception in the test class using the try catch block and assert on the message that is thrown from the method in test class.</p>\n\n<pre><code>try{\n}\ncatch(exception to be thrown from method e)\n{\n     assertEquals(\"message\", e.getmessage());\n}\n</code></pre></li>\n</ol>\n\n<p>I hope this answers your query\nHappy learning...</p>\n"},{"tags":[],"owner":{"account_id":2774008,"reputation":18025,"user_id":2387977,"accept_rate":69,"display_name":"Dherik"},"comment_count":0,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1541683711,"creation_date":1516878601,"answer_id":48441467,"question_id":156503,"body_markdown":"The most flexible and elegant answer for Junit 4 I found in the [Mkyong blog][1]. It has the flexibility of the `try/catch` using the `@Rule` annotation. I like this approach because you can read specific attributes of a customized exception.\r\n\r\n    package com.mkyong;\r\n    \r\n    import com.mkyong.examples.CustomerService;\r\n    import com.mkyong.examples.exception.NameNotFoundException;\r\n    import org.junit.Rule;\r\n    import org.junit.Test;\r\n    import org.junit.rules.ExpectedException;\r\n    \r\n    import static org.hamcrest.CoreMatchers.containsString;\r\n    import static org.hamcrest.CoreMatchers.is;\r\n    import static org.hamcrest.Matchers.hasProperty;\r\n    \r\n    public class Exception3Test {\r\n    \r\n        @Rule\r\n        public ExpectedException thrown = ExpectedException.none();\r\n    \r\n        @Test\r\n        public void testNameNotFoundException() throws NameNotFoundException {\r\n    \r\n    \t\t//test specific type of exception\r\n            thrown.expect(NameNotFoundException.class);\r\n    \r\n    \t\t//test message\r\n            thrown.expectMessage(is(&quot;Name is empty!&quot;));\r\n    \r\n            //test detail\r\n            thrown.expect(hasProperty(&quot;errCode&quot;));  //make sure getters n setters are defined.\r\n            thrown.expect(hasProperty(&quot;errCode&quot;, is(666)));\r\n    \r\n            CustomerService cust = new CustomerService();\r\n            cust.findByName(&quot;&quot;);\r\n    \r\n        }\r\n    \r\n    }\r\n\r\n  [1]: https://www.mkyong.com/unittest/junit-4-tutorial-2-expected-exception-test/","title":"How do you assert that a certain exception is thrown in JUnit tests?","body":"<p>The most flexible and elegant answer for Junit 4 I found in the <a href=\"https://www.mkyong.com/unittest/junit-4-tutorial-2-expected-exception-test/\" rel=\"noreferrer\">Mkyong blog</a>. It has the flexibility of the <code>try/catch</code> using the <code>@Rule</code> annotation. I like this approach because you can read specific attributes of a customized exception.</p>\n\n<pre><code>package com.mkyong;\n\nimport com.mkyong.examples.CustomerService;\nimport com.mkyong.examples.exception.NameNotFoundException;\nimport org.junit.Rule;\nimport org.junit.Test;\nimport org.junit.rules.ExpectedException;\n\nimport static org.hamcrest.CoreMatchers.containsString;\nimport static org.hamcrest.CoreMatchers.is;\nimport static org.hamcrest.Matchers.hasProperty;\n\npublic class Exception3Test {\n\n    @Rule\n    public ExpectedException thrown = ExpectedException.none();\n\n    @Test\n    public void testNameNotFoundException() throws NameNotFoundException {\n\n        //test specific type of exception\n        thrown.expect(NameNotFoundException.class);\n\n        //test message\n        thrown.expectMessage(is(\"Name is empty!\"));\n\n        //test detail\n        thrown.expect(hasProperty(\"errCode\"));  //make sure getters n setters are defined.\n        thrown.expect(hasProperty(\"errCode\", is(666)));\n\n        CustomerService cust = new CustomerService();\n        cust.findByName(\"\");\n\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":773585,"reputation":3537,"user_id":1034782,"accept_rate":25,"display_name":"Donatello"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1523032345,"creation_date":1523029927,"answer_id":49696649,"question_id":156503,"body_markdown":"Junit4 solution with Java8 is to use this function:\r\n\r\n\tpublic Throwable assertThrows(Class&lt;? extends Throwable&gt; expectedException, java.util.concurrent.Callable&lt;?&gt; funky) {\r\n\t\ttry {\r\n\t\t\tfunky.call();\r\n\t\t} catch (Throwable e) {\r\n\t\t\tif (expectedException.isInstance(e)) {\r\n\t\t\t\treturn e;\r\n\t\t\t}\r\n\t\t\tthrow new AssertionError(\r\n\t\t\t\t\tString.format(&quot;Expected [%s] to be thrown, but was [%s]&quot;, expectedException, e));\r\n\t\t}\r\n\t\tthrow new AssertionError(\r\n\t\t\t\tString.format(&quot;Expected [%s] to be thrown, but nothing was thrown.&quot;, expectedException));\r\n\t}\r\n\r\nUsage is then:\r\n\r\n\t\tassertThrows(ValidationException.class,\r\n\t\t\t\t() -&gt; finalObject.checkSomething(null));\r\n\r\nNote that the only limitation is to use a `final` object reference in lambda expression.\r\nThis solution allows to continue test assertions instead of expecting thowable at method level using `@Test(expected = IndexOutOfBoundsException.class)` solution.","title":"How do you assert that a certain exception is thrown in JUnit tests?","body":"<p>Junit4 solution with Java8 is to use this function:</p>\n\n<pre><code>public Throwable assertThrows(Class&lt;? extends Throwable&gt; expectedException, java.util.concurrent.Callable&lt;?&gt; funky) {\n    try {\n        funky.call();\n    } catch (Throwable e) {\n        if (expectedException.isInstance(e)) {\n            return e;\n        }\n        throw new AssertionError(\n                String.format(\"Expected [%s] to be thrown, but was [%s]\", expectedException, e));\n    }\n    throw new AssertionError(\n            String.format(\"Expected [%s] to be thrown, but nothing was thrown.\", expectedException));\n}\n</code></pre>\n\n<p>Usage is then:</p>\n\n<pre><code>    assertThrows(ValidationException.class,\n            () -&gt; finalObject.checkSomething(null));\n</code></pre>\n\n<p>Note that the only limitation is to use a <code>final</code> object reference in lambda expression.\nThis solution allows to continue test assertions instead of expecting thowable at method level using <code>@Test(expected = IndexOutOfBoundsException.class)</code> solution.</p>\n"},{"tags":[],"owner":{"account_id":4670913,"reputation":3692,"user_id":3782729,"display_name":"Piotr Rogowski"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1531913557,"creation_date":1531913557,"answer_id":51400976,"question_id":156503,"body_markdown":"I recomend library `assertj-core` to handle exception in junit test\r\n\r\nIn java 8, like this:\r\n\r\n    //given\r\n    \r\n    //when\r\n    Throwable throwable = catchThrowable(() -&gt; anyService.anyMethod(object));\r\n    \r\n    //then\r\n    AnyException anyException = (AnyException) throwable;\r\n    assertThat(anyException.getMessage()).isEqualTo(&quot;........&quot;);\r\n    assertThat(exception.getCode()).isEqualTo(&quot;.......);","title":"How do you assert that a certain exception is thrown in JUnit tests?","body":"<p>I recomend library <code>assertj-core</code> to handle exception in junit test</p>\n\n<p>In java 8, like this:</p>\n\n<pre><code>//given\n\n//when\nThrowable throwable = catchThrowable(() -&gt; anyService.anyMethod(object));\n\n//then\nAnyException anyException = (AnyException) throwable;\nassertThat(anyException.getMessage()).isEqualTo(\"........\");\nassertThat(exception.getCode()).isEqualTo(\".......);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1008902,"reputation":12661,"user_id":1021920,"accept_rate":70,"display_name":"hellow"},"score":4,"creation_date":1533727441,"post_id":51744696,"comment_id":90450550,"body_markdown":"You are answering on a 10 year old question, please expand your answer, why you think it provides something new, that the accepted answer does not cover. Also always try to tell something about your code and provide documentation or explanation.","body":"You are answering on a 10 year old question, please expand your answer, why you think it provides something new, that the accepted answer does not cover. Also always try to tell something about your code and provide documentation or explanation."},{"owner":{"account_id":2933712,"reputation":6419,"user_id":2513200,"accept_rate":83,"display_name":"Hulk"},"score":1,"creation_date":1533730076,"post_id":51744696,"comment_id":90452283,"body_markdown":"This is basically a duplicate of [this 10 year old answer](https://stackoverflow.com/a/156868/2513200) (except for the check for the error message).","body":"This is basically a duplicate of <a href=\"https://stackoverflow.com/a/156868/2513200\">this 10 year old answer</a> (except for the check for the error message)."},{"owner":{"account_id":2021263,"reputation":2451,"user_id":1807373,"accept_rate":75,"display_name":"Houssam Badri"},"score":0,"creation_date":1533745415,"post_id":51744696,"comment_id":90462626,"body_markdown":"I don&#39;t know why to downvote. There is no duplication. Please have a look at the check of the error msg. This is the right answer that I used today with my team @hellow","body":"I don&#39;t know why to downvote. There is no duplication. Please have a look at the check of the error msg. This is the right answer that I used today with my team @hellow"},{"owner":{"account_id":1008902,"reputation":12661,"user_id":1021920,"accept_rate":70,"display_name":"hellow"},"score":1,"creation_date":1533757656,"post_id":51744696,"comment_id":90468712,"body_markdown":"It&#39;s not always the same person who complains about your question/answer and downvots you (like in this case, I didn&#39;t, but please take my words and expand your answer).","body":"It&#39;s not always the same person who complains about your question/answer and downvots you (like in this case, I didn&#39;t, but please take my words and expand your answer)."},{"owner":{"account_id":4558950,"reputation":5580,"user_id":3701807,"accept_rate":59,"display_name":"Nithin"},"score":2,"creation_date":1533806144,"post_id":51744696,"comment_id":90485009,"body_markdown":"I am not sure if the test depending just on the error message is a good practice.","body":"I am not sure if the test depending just on the error message is a good practice."},{"owner":{"account_id":2021263,"reputation":2451,"user_id":1807373,"accept_rate":75,"display_name":"Houssam Badri"},"score":1,"creation_date":1533808841,"post_id":51744696,"comment_id":90486833,"body_markdown":"Yeah it is a good practice and useful when you have many error messages, so that you make sure that this specific one will be thrown (many possible exceptions)","body":"Yeah it is a good practice and useful when you have many error messages, so that you make sure that this specific one will be thrown (many possible exceptions)"},{"owner":{"account_id":2021263,"reputation":2451,"user_id":1807373,"accept_rate":75,"display_name":"Houssam Badri"},"score":1,"creation_date":1533808917,"post_id":51744696,"comment_id":90486874,"body_markdown":"Please what do you mean by expand answer Hebrow, this answer is for the question, so if you understand well the question and the code on it so the answer will be straightforward, he is needing just some code","body":"Please what do you mean by expand answer Hebrow, this answer is for the question, so if you understand well the question and the code on it so the answer will be straightforward, he is needing just some code"}],"tags":[],"owner":{"account_id":2021263,"reputation":2451,"user_id":1807373,"accept_rate":75,"display_name":"Houssam Badri"},"comment_count":7,"down_vote_count":6,"up_vote_count":2,"is_accepted":false,"score":-4,"last_activity_date":1533725029,"creation_date":1533725029,"answer_id":51744696,"question_id":156503,"body_markdown":"    try {\r\n        my method();\r\n        fail( &quot;This method must thrwo&quot; );\r\n    } catch (Exception ex) {\r\n        assertThat(ex.getMessage()).isEqual(myErrormsg);\r\n    }","title":"How do you assert that a certain exception is thrown in JUnit tests?","body":"<pre><code>try {\n    my method();\n    fail( \"This method must thrwo\" );\n} catch (Exception ex) {\n    assertThat(ex.getMessage()).isEqual(myErrormsg);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13139344,"reputation":955,"user_id":9491394,"display_name":"MangduYogii"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1555419247,"creation_date":1555419247,"answer_id":55708672,"question_id":156503,"body_markdown":"        @Test(expectedException=IndexOutOfBoundsException.class) \r\n        public void  testFooThrowsIndexOutOfBoundsException() throws Exception {\r\n             doThrow(IndexOutOfBoundsException.class).when(foo).doStuff();  \r\n             try {\r\n                 foo.doStuff(); \r\n                } catch (IndexOutOfBoundsException e) {\r\n                           assertEquals(IndexOutOfBoundsException .class, ex.getCause().getClass());\r\n                          throw e;\r\n             \r\n                   }\r\n             \r\n        }\r\nHere is another way to check method thrown correct exception or not.","title":"How do you assert that a certain exception is thrown in JUnit tests?","body":"<pre><code>    @Test(expectedException=IndexOutOfBoundsException.class) \n    public void  testFooThrowsIndexOutOfBoundsException() throws Exception {\n         doThrow(IndexOutOfBoundsException.class).when(foo).doStuff();  \n         try {\n             foo.doStuff(); \n            } catch (IndexOutOfBoundsException e) {\n                       assertEquals(IndexOutOfBoundsException .class, ex.getCause().getClass());\n                      throw e;\n\n               }\n\n    }\n</code></pre>\n\n<p>Here is another way to check method thrown correct exception or not.</p>\n"},{"tags":[],"owner":{"account_id":145555,"reputation":21469,"user_id":355438,"display_name":"Ilya Serbis"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1589320119,"creation_date":1589320119,"answer_id":61762605,"question_id":156503,"body_markdown":"JUnit framework has **`assertThrows()`** method:\r\n\r\n    ArithmeticException exception = assertThrows(ArithmeticException.class, () -&gt;\r\n        calculator.divide(1, 0));\r\n    assertEquals(&quot;/ by zero&quot;, exception.getMessage());\r\n\r\n\r\n* for JUnit 5 it&#39;s in [`org.junit.jupiter.api.Assertions`][1] class;\r\n* for JUnit 4.13 it&#39;s in [`org.junit.Assert`][2] class;\r\n* for earlier versions of JUnit 4: just add reference on [`org.junit.jupiter:junit-jupiter-api`][3] to your project and you&#39;ll get perfectly well working version from JUnit 5.\r\n\r\n\r\n\r\n  [1]: https://junit.org/junit5/docs/current/api/org.junit.jupiter.api/org/junit/jupiter/api/Assertions.html#assertThrows(java.lang.Class,org.junit.jupiter.api.function.Executable)\r\n  [2]: https://junit.org/junit4/javadoc/latest/org/junit/Assert.html#assertThrows(java.lang.Class,%20org.junit.function.ThrowingRunnable)\r\n  [3]: https://search.maven.org/artifact/org.junit.jupiter/junit-jupiter-api","title":"How do you assert that a certain exception is thrown in JUnit tests?","body":"<p>JUnit framework has <strong><code>assertThrows()</code></strong> method:</p>\n\n<pre><code>ArithmeticException exception = assertThrows(ArithmeticException.class, () -&gt;\n    calculator.divide(1, 0));\nassertEquals(\"/ by zero\", exception.getMessage());\n</code></pre>\n\n<ul>\n<li>for JUnit 5 it's in <a href=\"https://junit.org/junit5/docs/current/api/org.junit.jupiter.api/org/junit/jupiter/api/Assertions.html#assertThrows(java.lang.Class,org.junit.jupiter.api.function.Executable)\" rel=\"nofollow noreferrer\"><code>org.junit.jupiter.api.Assertions</code></a> class;</li>\n<li>for JUnit 4.13 it's in <a href=\"https://junit.org/junit4/javadoc/latest/org/junit/Assert.html#assertThrows(java.lang.Class,%20org.junit.function.ThrowingRunnable)\" rel=\"nofollow noreferrer\"><code>org.junit.Assert</code></a> class;</li>\n<li>for earlier versions of JUnit 4: just add reference on <a href=\"https://search.maven.org/artifact/org.junit.jupiter/junit-jupiter-api\" rel=\"nofollow noreferrer\"><code>org.junit.jupiter:junit-jupiter-api</code></a> to your project and you'll get perfectly well working version from JUnit 5.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":4667361,"reputation":39,"user_id":3780108,"display_name":"mahb"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692829156,"creation_date":1674766196,"answer_id":75251498,"question_id":156503,"body_markdown":"I would use `assertThatThrownBy`\r\n\r\n```java\r\n@Test\r\npublic void testFooThrowsIndexOutOfBoundsException() {\r\n  assertThatThrownBy(() -&gt; doStuff()).isInstanceOf(IndexOutOfBoundsException.class)\r\n}\r\n```\r\n\r\nRequires AssertJ - documentation references:\r\n\r\n - https://assertj.github.io/doc/#assertj-core-exception-assertions-assertThatThrownBy\r\n - https://www.javadoc.io/doc/org.assertj/assertj-core/3.8.0/org/assertj/core/api/Assertions.html#assertThatThrownBy-org.assertj.core.api.ThrowableAssert.ThrowingCallable-\r\n\r\n","title":"How do you assert that a certain exception is thrown in JUnit tests?","body":"<p>I would use <code>assertThatThrownBy</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Test\npublic void testFooThrowsIndexOutOfBoundsException() {\n  assertThatThrownBy(() -&gt; doStuff()).isInstanceOf(IndexOutOfBoundsException.class)\n}\n</code></pre>\n<p>Requires AssertJ - documentation references:</p>\n<ul>\n<li><a href=\"https://assertj.github.io/doc/#assertj-core-exception-assertions-assertThatThrownBy\" rel=\"nofollow noreferrer\">https://assertj.github.io/doc/#assertj-core-exception-assertions-assertThatThrownBy</a></li>\n<li><a href=\"https://www.javadoc.io/doc/org.assertj/assertj-core/3.8.0/org/assertj/core/api/Assertions.html#assertThatThrownBy-org.assertj.core.api.ThrowableAssert.ThrowingCallable-\" rel=\"nofollow noreferrer\">https://www.javadoc.io/doc/org.assertj/assertj-core/3.8.0/org/assertj/core/api/Assertions.html#assertThatThrownBy-org.assertj.core.api.ThrowableAssert.ThrowingCallable-</a></li>\n</ul>\n"}],"owner":{"account_id":1254,"reputation":57918,"user_id":1666,"accept_rate":84,"display_name":"SCdF"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1883816,"favorite_count":0,"down_vote_count":6,"up_vote_count":2292,"accepted_answer_id":156528,"answer_count":35,"score":2286,"last_activity_date":1692829156,"creation_date":1222844168,"question_id":156503,"body_markdown":"How can I use JUnit idiomatically to test that some code throws an exception?\r\n\r\nWhile I can certainly do something like this:\r\n\r\n    @Test\r\n    public void testFooThrowsIndexOutOfBoundsException() {\r\n    \r\n        boolean thrown = false;\r\n    \r\n        try {\r\n            foo.doStuff();\r\n        } catch (IndexOutOfBoundsException e) {\r\n            thrown = true;\r\n        }\r\n    \r\n        assertTrue(thrown);\r\n    }\r\n\r\nI recall that there is an annotation or an Assert.xyz or *something* that is far less kludgy and far more in-the-spirit of JUnit for these sorts of situations.","title":"How do you assert that a certain exception is thrown in JUnit tests?","body":"<p>How can I use JUnit idiomatically to test that some code throws an exception?</p>\n<p>While I can certainly do something like this:</p>\n<pre><code>@Test\npublic void testFooThrowsIndexOutOfBoundsException() {\n\n    boolean thrown = false;\n\n    try {\n        foo.doStuff();\n    } catch (IndexOutOfBoundsException e) {\n        thrown = true;\n    }\n\n    assertTrue(thrown);\n}\n</code></pre>\n<p>I recall that there is an annotation or an Assert.xyz or <em>something</em> that is far less kludgy and far more in-the-spirit of JUnit for these sorts of situations.</p>\n"},{"tags":["java","database","spring-boot","spring-data-jpa","spring-data"],"comments":[{"owner":{"account_id":18670408,"reputation":143,"user_id":13609359,"display_name":"Slevin"},"score":0,"creation_date":1692828482,"post_id":76964191,"comment_id":135678884,"body_markdown":"FYI: you don&#39;t need to put the `@Repository` annotation to the class, Spring knows what to do anyway when extending a `JpaRepository`.","body":"FYI: you don&#39;t need to put the <code>@Repository</code> annotation to the class, Spring knows what to do anyway when extending a <code>JpaRepository</code>."}],"owner":{"account_id":27325847,"reputation":13,"user_id":20838842,"display_name":"Mohamed Hisham"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692829004,"creation_date":1692816974,"question_id":76964191,"body_markdown":"I am using JpaRepository, the problem Appears when using inside function in the repo class like this and if i use Jpa functions without custom functions it works fine \r\n\r\n```java\r\n@Repository\r\npublic interface SystemEventRepository extends JpaRepository&lt;SystemEvent, Integer&gt; {\r\n    SystemEvent findByEvent(String event);\r\n}\r\n```\r\n\r\n```\r\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;systemEventRepository&#39; defined in repository.SystemEventRepository defined in @EnableJpaRepositories declared on AppConfig: class org.springframework.data.jpa.repository.query.AbstractJpaQuery tried to access private method &#39;void org.springframework.data.util.Lazy.&lt;init&gt;(java.util.function.Supplier)&#39; (org.springframework.data.jpa.repository.query.AbstractJpaQuery and org.springframework.data.util.Lazy are in unnamed module of loader &#39;app&#39;)\r\n```\r\n","title":"Spring-boot JpaRepository when using custom functions","body":"<p>I am using JpaRepository, the problem Appears when using inside function in the repo class like this and if i use Jpa functions without custom functions it works fine</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Repository\npublic interface SystemEventRepository extends JpaRepository&lt;SystemEvent, Integer&gt; {\n    SystemEvent findByEvent(String event);\n}\n</code></pre>\n<pre><code>Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'systemEventRepository' defined in repository.SystemEventRepository defined in @EnableJpaRepositories declared on AppConfig: class org.springframework.data.jpa.repository.query.AbstractJpaQuery tried to access private method 'void org.springframework.data.util.Lazy.&lt;init&gt;(java.util.function.Supplier)' (org.springframework.data.jpa.repository.query.AbstractJpaQuery and org.springframework.data.util.Lazy are in unnamed module of loader 'app')\n</code></pre>\n"},{"tags":["java","angular","spring-boot","cors","api-gateway"],"comments":[{"owner":{"account_id":474440,"reputation":36822,"user_id":884123,"accept_rate":79,"display_name":"Matthieu Riegler"},"score":0,"creation_date":1692802552,"post_id":76962549,"comment_id":135674390,"body_markdown":"Your gateway needs to allow CORS.","body":"Your gateway needs to allow CORS."},{"owner":{"account_id":11489221,"reputation":45,"user_id":8420784,"display_name":"ahdy kefi"},"score":0,"creation_date":1692802778,"post_id":76962549,"comment_id":135674436,"body_markdown":"I already added the cors config to my api-gateway @MatthieuRiegler","body":"I already added the cors config to my api-gateway @MatthieuRiegler"},{"owner":{"account_id":446597,"reputation":22464,"user_id":839733,"accept_rate":69,"display_name":"Abhijit Sarkar"},"score":0,"creation_date":1692822992,"post_id":76962549,"comment_id":135678177,"body_markdown":"Did you try running the gateway with debug logging enabled? If there’s an error, there’s going to be corresponding logging for it. The other option is to simply debug the gateway using a debugger. I’ve had to do that in the past myself.","body":"Did you try running the gateway with debug logging enabled? If there’s an error, there’s going to be corresponding logging for it. The other option is to simply debug the gateway using a debugger. I’ve had to do that in the past myself."}],"answers":[{"comments":[{"owner":{"account_id":11489221,"reputation":45,"user_id":8420784,"display_name":"ahdy kefi"},"score":0,"creation_date":1692829000,"post_id":76964937,"comment_id":135678958,"body_markdown":"Yes, that fixed the problem. Apparently, the CORS config file doesn&#39;t work with the API Gateway because there is no controller in this service. CORS configuration needs to be done in the application.properties file","body":"Yes, that fixed the problem. Apparently, the CORS config file doesn&#39;t work with the API Gateway because there is no controller in this service. CORS configuration needs to be done in the application.properties file"}],"tags":[],"owner":{"account_id":29285937,"reputation":36,"user_id":22437515,"display_name":"Mohamed Ali Bouali"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1692825360,"creation_date":1692825360,"answer_id":76964937,"question_id":76962549,"body_markdown":"please create an application.yml file in your api-gateway and place the following configuration inside. \r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    spring:\r\n      application:\r\n        name: gateway\r\n\r\n      cloud:\r\n        gateway:\r\n          global-cors:\r\n            corsConfigurations:\r\n              &#39;[/**]&#39;:\r\n                allowedOrigins: &quot;*&quot;\r\n                allowedMethods:\r\n                  - GET\r\n                  - POST\r\n                  - PUT\r\n                  - DELETE\r\n                  - PATCH\r\n                allowedHeaders:\r\n                  - &quot;Origin&quot;\r\n                  - &quot;Content-Type&quot;\r\n                  - &quot;Accept&quot;\r\n                  - &quot;Authorization&quot;\r\n                  - &quot;User-Key&quot;\r\n                  - &quot;Request-Tracker&quot;\r\n                  - &quot;Session-Tracker&quot;\r\n                  - &quot;X-XSRF-TOKEN&quot;\r\n                  - &quot;X-IBM-CLIENT-ID&quot;\r\n                  - &quot;Message-ID&quot;\r\n                  - &quot;X-IBM-CLIENT-SECRET&quot;\r\n          default-filters:\r\n            - DedupeResponseHeader=Access-Control-Allow-Credentials Access-Control-Allow-Origin, RETAIN_FIRST\r\n\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"[SOLVED]:&#39;Unknown Error&#39; when sending a POST request to my Spring Boot API Gateway from my Angular app and CORS is configured correctly","body":"<p>please create an application.yml file in your api-gateway and place the following configuration inside.</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>spring:\n  application:\n    name: gateway\n\n  cloud:\n    gateway:\n      global-cors:\n        corsConfigurations:\n          '[/**]':\n            allowedOrigins: \"*\"\n            allowedMethods:\n              - GET\n              - POST\n              - PUT\n              - DELETE\n              - PATCH\n            allowedHeaders:\n              - \"Origin\"\n              - \"Content-Type\"\n              - \"Accept\"\n              - \"Authorization\"\n              - \"User-Key\"\n              - \"Request-Tracker\"\n              - \"Session-Tracker\"\n              - \"X-XSRF-TOKEN\"\n              - \"X-IBM-CLIENT-ID\"\n              - \"Message-ID\"\n              - \"X-IBM-CLIENT-SECRET\"\n      default-filters:\n        - DedupeResponseHeader=Access-Control-Allow-Credentials Access-Control-Allow-Origin, RETAIN_FIRST</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}],"owner":{"account_id":11489221,"reputation":45,"user_id":8420784,"display_name":"ahdy kefi"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":105,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76964937,"answer_count":1,"score":0,"last_activity_date":1692828828,"creation_date":1692802145,"question_id":76962549,"body_markdown":"I&#39;m &quot;Getting &#39;Http failure response for http://localhost:8080/api/user/auth/login: 0 Unknown Error&#39; when sending a POST request to my Spring Boot API Gateway from my Angular app. CORS is configured correctly, and the same request works fine when sent directly to the user-service. The API Gateway logs don&#39;t show any errors, and the browser console doesn&#39;t provide additional insights. Any suggestions on how to troubleshoot this issue?&quot;.\r\n\r\n**API Gateway application.properties**\r\n```\r\neureka.client.register-with-eureka=true\r\neureka.client.fetch-registry=true\r\nspring.application.name=api-gateway\r\neureka.client.service-url.defaultZone= http://localhost:8761/eureka\r\nserver.port=8080\r\n## LOGS\r\nlogging.level.root=INFO\r\n#class responsible for defining and identifying routes\r\nlogging.level.org.springframework.cloud.gateway.route.RouteDefinitionLocator = INFO\r\nlogging.level.org.springframework.cloud.gateway = TRACE\r\n## END LOGS\r\n\r\n## Routes\r\nspring.cloud.gateway.routes[0].id=user-service\r\nspring.cloud.gateway.routes[0].uri = lb://user-service\r\nspring.cloud.gateway.routes[0].predicates[0]=Path=/api/user/**\r\n\r\n```\r\n**Console error:**\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/mnwf1.png\r\n\r\n\r\n**API GatewayCors config**\r\n```\r\n\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.web.servlet.config.annotation.CorsRegistry;\r\nimport org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\r\n\r\n@Configuration\r\npublic class CorsConfig implements WebMvcConfigurer {\r\n    @Override\r\n    public void addCorsMappings(CorsRegistry registry) {\r\n        registry.addMapping(&quot;/**&quot;)\r\n                .allowedOrigins(&quot;*&quot;) // Replace with your Angular application&#39;s URL\r\n                .allowedMethods(&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;DELETE&quot;)\r\n                .allowedHeaders(&quot;Content-Type&quot;, &quot;Authorization&quot;);\r\n    }\r\n}\r\n\r\n\r\n```\r\n**PS:** When I change the URL in my angular app to directly send a request to the user-service everything works fine.","title":"[SOLVED]:&#39;Unknown Error&#39; when sending a POST request to my Spring Boot API Gateway from my Angular app and CORS is configured correctly","body":"<p>I'm &quot;Getting 'Http failure response for http://localhost:8080/api/user/auth/login: 0 Unknown Error' when sending a POST request to my Spring Boot API Gateway from my Angular app. CORS is configured correctly, and the same request works fine when sent directly to the user-service. The API Gateway logs don't show any errors, and the browser console doesn't provide additional insights. Any suggestions on how to troubleshoot this issue?&quot;.</p>\n<p><strong>API Gateway application.properties</strong></p>\n<pre><code>eureka.client.register-with-eureka=true\neureka.client.fetch-registry=true\nspring.application.name=api-gateway\neureka.client.service-url.defaultZone= http://localhost:8761/eureka\nserver.port=8080\n## LOGS\nlogging.level.root=INFO\n#class responsible for defining and identifying routes\nlogging.level.org.springframework.cloud.gateway.route.RouteDefinitionLocator = INFO\nlogging.level.org.springframework.cloud.gateway = TRACE\n## END LOGS\n\n## Routes\nspring.cloud.gateway.routes[0].id=user-service\nspring.cloud.gateway.routes[0].uri = lb://user-service\nspring.cloud.gateway.routes[0].predicates[0]=Path=/api/user/**\n\n</code></pre>\n<p><strong>Console error:</strong>\n<a href=\"https://i.stack.imgur.com/mnwf1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mnwf1.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>API GatewayCors config</strong></p>\n<pre><code>\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.web.servlet.config.annotation.CorsRegistry;\nimport org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\n\n@Configuration\npublic class CorsConfig implements WebMvcConfigurer {\n    @Override\n    public void addCorsMappings(CorsRegistry registry) {\n        registry.addMapping(&quot;/**&quot;)\n                .allowedOrigins(&quot;*&quot;) // Replace with your Angular application's URL\n                .allowedMethods(&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;DELETE&quot;)\n                .allowedHeaders(&quot;Content-Type&quot;, &quot;Authorization&quot;);\n    }\n}\n\n\n</code></pre>\n<p><strong>PS:</strong> When I change the URL in my angular app to directly send a request to the user-service everything works fine.</p>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1692738832,"post_id":76956694,"comment_id":135665057,"body_markdown":"Try running the code in a debugger. Set a break point at `int res = 0, count [] = new int [101];` and then run the code one-step-at-a-time. At each step, check the values of the variables.","body":"Try running the code in a debugger. Set a break point at <code>int res = 0, count [] = new int [101];</code> and then run the code one-step-at-a-time. At each step, check the values of the variables."},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":1,"creation_date":1692739153,"post_id":76956694,"comment_id":135665094,"body_markdown":"TIL `int res = 0, count[] = new int[101];` is valid syntax.","body":"TIL <code>int res = 0, count[] = new int[101];</code> is valid syntax."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1692742136,"post_id":76956694,"comment_id":135665429,"body_markdown":"The value at _count[a]_ will only increase for _a_.  Similar to what _@Shovel_Knight_ said, this would not work with negative numbers, additionally, you&#39;d have to find the maximum value first, to set the size of _count_.","body":"The value at <i>count[a]</i> will only increase for <i>a</i>.  Similar to what <i>@Shovel_Knight</i> said, this would not work with negative numbers, additionally, you&#39;d have to find the maximum value first, to set the size of <i>count</i>."}],"answers":[{"comments":[{"owner":{"account_id":19198384,"reputation":21,"user_id":14026758,"display_name":"Quamrulssss"},"score":0,"creation_date":1692935935,"post_id":76956860,"comment_id":135695011,"body_markdown":"Thanks for such generous explanations @Shovel_Knight","body":"Thanks for such generous explanations @Shovel_Knight"}],"tags":[],"owner":{"account_id":14327066,"reputation":141,"user_id":10348872,"display_name":"Shovel_Knight"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1692750716,"creation_date":1692738389,"answer_id":76956860,"question_id":76956694,"body_markdown":"The best way to understand how a program works is to run it in a debugger. This would allow you to see its internal state.\r\n\r\nThis particular solution works in the following way:\r\n\r\n1. When the array `count[]` is initialized, every element inside it is equal to 0.\r\n\r\n2. As the enhanced for loop `for (int a : A)` goes through the original array, every time it encounters a number, it increments `count[a]` by 1, but only *after* the assignment `res += count[a]++`.\r\n\r\nFor example, if you take one of their example arrays `{1, 2, 3, 1, 1, 3}`:\r\n\r\n`res += count[1]++` -&gt; `res == 0, count[1] == 1`\r\n\r\n`res += count[2]++` -&gt; `res == 0, count[2] == 1`\r\n\r\n`res += count[3]++` -&gt; `res == 0, count[3] == 1`\r\n\r\n`res += count[1]++` -&gt; `res == 1, count[1] == 2`\r\n\r\n`res += count[1]++` -&gt; `res == 3, count[1] == 3`\r\n\r\n`res += count[3]++` -&gt; `res == 4, count[3] == 2`\r\n\r\nIt&#39;s a clever solution but very much tailored to their particular test cases because you are limited by the size of `count[]`. What if integers inside the original array are larger than 100? What if there are negative numbers? ","title":"How count[index]++ counts the identical ekements in an array in Java?","body":"<p>The best way to understand how a program works is to run it in a debugger. This would allow you to see its internal state.</p>\n<p>This particular solution works in the following way:</p>\n<ol>\n<li><p>When the array <code>count[]</code> is initialized, every element inside it is equal to 0.</p>\n</li>\n<li><p>As the enhanced for loop <code>for (int a : A)</code> goes through the original array, every time it encounters a number, it increments <code>count[a]</code> by 1, but only <em>after</em> the assignment <code>res += count[a]++</code>.</p>\n</li>\n</ol>\n<p>For example, if you take one of their example arrays <code>{1, 2, 3, 1, 1, 3}</code>:</p>\n<p><code>res += count[1]++</code> -&gt; <code>res == 0, count[1] == 1</code></p>\n<p><code>res += count[2]++</code> -&gt; <code>res == 0, count[2] == 1</code></p>\n<p><code>res += count[3]++</code> -&gt; <code>res == 0, count[3] == 1</code></p>\n<p><code>res += count[1]++</code> -&gt; <code>res == 1, count[1] == 2</code></p>\n<p><code>res += count[1]++</code> -&gt; <code>res == 3, count[1] == 3</code></p>\n<p><code>res += count[3]++</code> -&gt; <code>res == 4, count[3] == 2</code></p>\n<p>It's a clever solution but very much tailored to their particular test cases because you are limited by the size of <code>count[]</code>. What if integers inside the original array are larger than 100? What if there are negative numbers?</p>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1692827522,"creation_date":1692796980,"answer_id":76961781,"question_id":76956694,"body_markdown":"Consider that for any repeated values, `(e.g.1,1,1,1,1)` the count of subarrays is `1,3,6,10` for `(1,1),(1,1,1),(1,1,1,1), and (1,1,1,1,1)` respectively.  Notice the deltas between the consecutive terms for the pattern are `2,3,and 4`.  Those deltas increment by `1` so the solution for the `nth` value is `n*(n-1)/2`. Where `n = 1` initially.\r\n\r\nTo compute that solution in a loop for `5 of the same value` do it as follows;\r\n```\r\nint delta = 0;\r\nint res = 0;\r\nfor (int n = 0; n &lt; 5; n++) {\r\n   res = res + delta;\r\n   delta++;\r\n}\r\nSystem.out.println(res);\r\n```\r\nprints\r\n```\r\n10\r\n```\r\nThis is exactly what your loop is doing. But I am changing `count[]` to `delta[]` since it more describes what that array contains.\r\n- the array is initialized to `101` to access deltas for values from `0 to 100` inclusive.  By default deltas are all `0`.  They are considered the initial deltas for all possible values.\r\n- Then as you iterate them you are do the following.\r\n-  `res += delta[a]++;`  Where `a` is used as an index into it&#39;s own delta array to sum the good pairs.  It is first used as `0` since one value does not constitute a pair. It them bumps the delta by `1` for the next occurrence of the same value of `a`.\r\n\r\nSo here is a more verbose solution which does the same thing as yours.\r\n```\r\npublic static int numIdenticalPairs(int[] A) {\r\n     int res = 0;\r\n     int[] deltas = new int[101];\r\n     for (int i = 0; i &lt; A.length; i++) {\r\n         int value = A[i];          // get the value from the array\r\n         int delta = deltas[value]; // get current delta for that value\r\n         res += delta;              // adjust the pair count for all values\r\n         deltas[value] = delta + 1; // increment delta for next occurrence of value.\r\n     }\r\n     return res;\r\n}\r\n```\r\n","title":"How count[index]++ counts the identical ekements in an array in Java?","body":"<p>Consider that for any repeated values, <code>(e.g.1,1,1,1,1)</code> the count of subarrays is <code>1,3,6,10</code> for <code>(1,1),(1,1,1),(1,1,1,1), and (1,1,1,1,1)</code> respectively.  Notice the deltas between the consecutive terms for the pattern are <code>2,3,and 4</code>.  Those deltas increment by <code>1</code> so the solution for the <code>nth</code> value is <code>n*(n-1)/2</code>. Where <code>n = 1</code> initially.</p>\n<p>To compute that solution in a loop for <code>5 of the same value</code> do it as follows;</p>\n<pre><code>int delta = 0;\nint res = 0;\nfor (int n = 0; n &lt; 5; n++) {\n   res = res + delta;\n   delta++;\n}\nSystem.out.println(res);\n</code></pre>\n<p>prints</p>\n<pre><code>10\n</code></pre>\n<p>This is exactly what your loop is doing. But I am changing <code>count[]</code> to <code>delta[]</code> since it more describes what that array contains.</p>\n<ul>\n<li>the array is initialized to <code>101</code> to access deltas for values from <code>0 to 100</code> inclusive.  By default deltas are all <code>0</code>.  They are considered the initial deltas for all possible values.</li>\n<li>Then as you iterate them you are do the following.</li>\n<li><code>res += delta[a]++;</code>  Where <code>a</code> is used as an index into it's own delta array to sum the good pairs.  It is first used as <code>0</code> since one value does not constitute a pair. It them bumps the delta by <code>1</code> for the next occurrence of the same value of <code>a</code>.</li>\n</ul>\n<p>So here is a more verbose solution which does the same thing as yours.</p>\n<pre><code>public static int numIdenticalPairs(int[] A) {\n     int res = 0;\n     int[] deltas = new int[101];\n     for (int i = 0; i &lt; A.length; i++) {\n         int value = A[i];          // get the value from the array\n         int delta = deltas[value]; // get current delta for that value\n         res += delta;              // adjust the pair count for all values\n         deltas[value] = delta + 1; // increment delta for next occurrence of value.\n     }\n     return res;\n}\n</code></pre>\n"}],"owner":{"account_id":19198384,"reputation":21,"user_id":14026758,"display_name":"Quamrulssss"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":67,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":2,"score":1,"last_activity_date":1692827522,"creation_date":1692736399,"question_id":76956694,"body_markdown":"I am new in problem solving. I tried this problem from leetcode [Number of good pairs](https://leetcode.com/problems/number-of-good-pairs/description/?source=submission-ac) and I solved using double loops. But later in solutions I got a better solution.\r\nThat&#39;s my code: \r\n\r\n    `        \r\n        public int numIdenticalPairs(int[] nums) {\r\n            int count = 0;\r\n            for(int i=0; i&lt;nums.length; i++){\r\n                for(int j=i+1; j&lt;nums.length; j++){\r\n                    if(nums[i]==nums[j]){\r\n                        count++;\r\n                    }\r\n                }\r\n            }\r\n\r\n            return count;\r\n        }\r\n    `\r\nand the better solution is this: \r\n\r\n    `    \r\n        public int numIdenticalPairs(int[] A) {\r\n            int res = 0, count[] = new int[101];\r\n            for (int a: A) {\r\n                res += count[a]++;\r\n            }\r\n            return res;\r\n        }\r\n    `\r\nBut I don&#39;t understand how count[a]++ can count all the identical elements? Can anyone explain this for me? #TIA","title":"How count[index]++ counts the identical ekements in an array in Java?","body":"<p>I am new in problem solving. I tried this problem from leetcode <a href=\"https://leetcode.com/problems/number-of-good-pairs/description/?source=submission-ac\" rel=\"nofollow noreferrer\">Number of good pairs</a> and I solved using double loops. But later in solutions I got a better solution.\nThat's my code:</p>\n<pre><code>`        \n    public int numIdenticalPairs(int[] nums) {\n        int count = 0;\n        for(int i=0; i&lt;nums.length; i++){\n            for(int j=i+1; j&lt;nums.length; j++){\n                if(nums[i]==nums[j]){\n                    count++;\n                }\n            }\n        }\n\n        return count;\n    }\n`\n</code></pre>\n<p>and the better solution is this:</p>\n<pre><code>`    \n    public int numIdenticalPairs(int[] A) {\n        int res = 0, count[] = new int[101];\n        for (int a: A) {\n            res += count[a]++;\n        }\n        return res;\n    }\n`\n</code></pre>\n<p>But I don't understand how count[a]++ can count all the identical elements? Can anyone explain this for me? #TIA</p>\n"},{"tags":["java","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":1961640,"reputation":12136,"user_id":1763035,"accept_rate":56,"display_name":"Andy Brown"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1488472142,"creation_date":1488472142,"answer_id":42560773,"question_id":42560472,"body_markdown":"You can achieve this by adding a `@NotNull` validator to your mandatory properties. For example:\r\n\r\n    @NotNull\r\n    private String projectId;\r\n\r\n    public void setProjectId(String projectId) {\r\n        this.projectId = projectId;\r\n    }\r\n","title":"Spring Boot not failing when property is missing","body":"<p>You can achieve this by adding a <code>@NotNull</code> validator to your mandatory properties. For example:</p>\n\n<pre><code>@NotNull\nprivate String projectId;\n\npublic void setProjectId(String projectId) {\n    this.projectId = projectId;\n}\n</code></pre>\n"}],"owner":{"account_id":2228996,"reputation":15997,"user_id":1967100,"accept_rate":78,"display_name":"cahen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2765,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":42560773,"answer_count":1,"score":6,"last_activity_date":1692827401,"creation_date":1488471307,"question_id":42560472,"body_markdown":"How can I make Spring-Boot fail during startup if any of the properties of a `@ConfigurationProperties` class is missing?\r\n\r\nIf I use `@Value(...)` instead, the auto-wiring fails as expected, but I want to centralise all properties into a `@ConfigurationProperties` class instead of using `@Value` references spread through the application.\r\n\r\nThe code:\r\n\r\n\r\n    @Component\r\n    @ConfigurationProperties(value = &quot;serving.api&quot;, ignoreUnknownFields = false)\r\n    public class ApplicationProperties {\r\n    \r\n        private String projectId;\r\n    \r\n        private String bigTableInstanceId;\r\n    \r\n        public String getProjectId() {\r\n            return projectId;\r\n        }\r\n    \r\n        public void setProjectId(String projectId) {\r\n            this.projectId = projectId;\r\n        }\r\n    \r\n        public String getBigTableInstanceId() {\r\n            return bigTableInstanceId;\r\n        }\r\n    \r\n        public void setBigTableInstanceId(String bigTableInstanceId) {\r\n            this.bigTableInstanceId = bigTableInstanceId;\r\n        }\r\n    \r\n    }","title":"Spring Boot not failing when property is missing","body":"<p>How can I make Spring-Boot fail during startup if any of the properties of a <code>@ConfigurationProperties</code> class is missing?</p>\n\n<p>If I use <code>@Value(...)</code> instead, the auto-wiring fails as expected, but I want to centralise all properties into a <code>@ConfigurationProperties</code> class instead of using <code>@Value</code> references spread through the application.</p>\n\n<p>The code:</p>\n\n<pre><code>@Component\n@ConfigurationProperties(value = \"serving.api\", ignoreUnknownFields = false)\npublic class ApplicationProperties {\n\n    private String projectId;\n\n    private String bigTableInstanceId;\n\n    public String getProjectId() {\n        return projectId;\n    }\n\n    public void setProjectId(String projectId) {\n        this.projectId = projectId;\n    }\n\n    public String getBigTableInstanceId() {\n        return bigTableInstanceId;\n    }\n\n    public void setBigTableInstanceId(String bigTableInstanceId) {\n        this.bigTableInstanceId = bigTableInstanceId;\n    }\n\n}\n</code></pre>\n"},{"tags":["java","binary-search"],"comments":[{"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"score":0,"creation_date":1692822365,"post_id":76964627,"comment_id":135678104,"body_markdown":"Could you please complete your code with an example array and how you call the function?","body":"Could you please complete your code with an example array and how you call the function?"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":5,"creation_date":1692822733,"post_id":76964627,"comment_id":135678143,"body_markdown":"the only `return` from posted code is `-1` unless the value is found right at the start - what is happening with the values returned by the recursive calls? I recommend to remove the last `return -1;` - that one should never happen...","body":"the only <code>return</code> from posted code is <code>-1</code> unless the value is found right at the start - what is happening with the values returned by the recursive calls? I recommend to remove the last <code>return -1;</code> - that one should never happen..."},{"owner":{"account_id":446597,"reputation":22464,"user_id":839733,"accept_rate":69,"display_name":"Abhijit Sarkar"},"score":0,"creation_date":1692823186,"post_id":76964627,"comment_id":135678212,"body_markdown":"How did you try to debug your code?","body":"How did you try to debug your code?"},{"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"score":0,"creation_date":1692823908,"post_id":76964627,"comment_id":135678310,"body_markdown":"Does this answer your question? [Recursive function in Java prints correct value but returns wrong one](https://stackoverflow.com/questions/74755285/recursive-function-in-java-prints-correct-value-but-returns-wrong-one)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/74755285/recursive-function-in-java-prints-correct-value-but-returns-wrong-one\">Recursive function in Java prints correct value but returns wrong one</a>"}],"answers":[{"tags":[],"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1692827202,"creation_date":1692827202,"answer_id":76965075,"question_id":76964627,"body_markdown":"You need to return the value from each recursive call and remove the last `return -1;` statement\r\n```\r\nint[] array = {1, 6, 7, 9, 11 , 16};\r\nfor (int target : new int[] {3, 7}) {\r\n   int index = recursiveBinarySearch(array, target, array.length, 0);\r\n   System.out.println(index &gt;= 0 ? array[index] : &quot;Target not found!&quot;);\r\n}    \r\n```\r\nprints\r\n```\r\nTarget not found!\r\n7\r\n```\r\n```\r\n\r\npublic static int recursiveBinarySearch(int array[], int key, int high, int low) {\r\n    \r\n    int mid = (high + low) / 2;\r\n    int middleNumber = array[mid];\r\n        \r\n    if (key == middleNumber )\r\n        return mid;\r\n    else if (low &gt; high)\r\n        return -1;\r\n        \r\n    else {\r\n        if (middleNumber &gt; key) {\r\n            high = mid - 1; \r\n            return recursiveBinarySearch(array, key, high, low);\r\n        }\r\n        \r\n        else {\r\n            low = mid + 1; \r\n            return recursiveBinarySearch(array, key, high, low);\r\n        }    \r\n    }\r\n}","title":"Recursive Implementation of Binary Search in Java","body":"<p>You need to return the value from each recursive call and remove the last <code>return -1;</code> statement</p>\n<pre><code>int[] array = {1, 6, 7, 9, 11 , 16};\nfor (int target : new int[] {3, 7}) {\n   int index = recursiveBinarySearch(array, target, array.length, 0);\n   System.out.println(index &gt;= 0 ? array[index] : &quot;Target not found!&quot;);\n}    \n</code></pre>\n<p>prints</p>\n<pre><code>Target not found!\n7\n</code></pre>\n<pre><code>\npublic static int recursiveBinarySearch(int array[], int key, int high, int low) {\n    \n    int mid = (high + low) / 2;\n    int middleNumber = array[mid];\n        \n    if (key == middleNumber )\n        return mid;\n    else if (low &gt; high)\n        return -1;\n        \n    else {\n        if (middleNumber &gt; key) {\n            high = mid - 1; \n            return recursiveBinarySearch(array, key, high, low);\n        }\n        \n        else {\n            low = mid + 1; \n            return recursiveBinarySearch(array, key, high, low);\n        }    \n    }\n}\n</code></pre>\n"}],"owner":{"account_id":29285838,"reputation":3,"user_id":22437441,"display_name":"Areeyoka John"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":76965075,"answer_count":1,"score":-2,"last_activity_date":1692827202,"creation_date":1692821727,"question_id":76964627,"body_markdown":"I am trying to an implementation of the binary search in Java recursively.\r\n\r\n\r\nI came up with this and it only returns -1. However, I do not understand why this is the only result no matter what array I use. \r\n\r\nArray Example: array int =  {1, 6, 7, 9, 11 , 16};\r\n\r\n\r\nCall Example: recursiveBinarySearch(array, 7, array.length, 0);\r\n\r\n\r\n    public static int recursiveBinarySearch(int array[], int key, int high, int low) {\r\n\t\t\r\n\t\tint mid = (high + low) / 2;\r\n\t\tint middleNumber = array[mid];\r\n\t\t\t\r\n\t\tif (key == middleNumber )\r\n\t\t\treturn mid; \r\n\t\telse if (low &gt; high)\r\n\t\t\treturn -1;\r\n\t\t\t\r\n\t\telse {\r\n\t\t\tif (middleNumber &gt; key) {\r\n\t\t\t\thigh = mid - 1; \r\n\t\t\t\trecursiveBinarySearch(array, key, high, low);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\telse {\r\n\t\t\t\tlow = mid + 1; \r\n\t\t\t\trecursiveBinarySearch(array, key, high, low);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\treturn -1;\r\n\t\t\r\n\t}","title":"Recursive Implementation of Binary Search in Java","body":"<p>I am trying to an implementation of the binary search in Java recursively.</p>\n<p>I came up with this and it only returns -1. However, I do not understand why this is the only result no matter what array I use.</p>\n<p>Array Example: array int =  {1, 6, 7, 9, 11 , 16};</p>\n<p>Call Example: recursiveBinarySearch(array, 7, array.length, 0);</p>\n<pre><code>public static int recursiveBinarySearch(int array[], int key, int high, int low) {\n    \n    int mid = (high + low) / 2;\n    int middleNumber = array[mid];\n        \n    if (key == middleNumber )\n        return mid; \n    else if (low &gt; high)\n        return -1;\n        \n    else {\n        if (middleNumber &gt; key) {\n            high = mid - 1; \n            recursiveBinarySearch(array, key, high, low);\n        }\n        \n        else {\n            low = mid + 1; \n            recursiveBinarySearch(array, key, high, low);\n        }\n        \n    }\n    \n    return -1;\n    \n}\n</code></pre>\n"},{"tags":["java","double-quotes"],"comments":[{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":1,"creation_date":1692798508,"post_id":76961640,"comment_id":135673324,"body_markdown":"Those are some rather ugly screen shots, and they can draw attention away from what you are asking. Are you able to include, in the question, body, the important and relevant information *as text*?  Images of text are [not well received](https://meta.stackoverflow.com/questions/285551/why-should-i-not-upload-images-of-code-data-errors) here.","body":"Those are some rather ugly screen shots, and they can draw attention away from what you are asking. Are you able to include, in the question, body, the important and relevant information <i>as text</i>?  Images of text are <a href=\"https://meta.stackoverflow.com/questions/285551/why-should-i-not-upload-images-of-code-data-errors\">not well received</a> here."},{"owner":{"account_id":5754041,"reputation":51,"user_id":11751666,"display_name":"aaa"},"score":0,"creation_date":1692805765,"post_id":76961640,"comment_id":135675101,"body_markdown":"please ignore the screen shots and only read the code snippets I added, I think it&#39;s clear enough, please let me know if not","body":"please ignore the screen shots and only read the code snippets I added, I think it&#39;s clear enough, please let me know if not"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":1,"creation_date":1692811024,"post_id":76961640,"comment_id":135676115,"body_markdown":"I can barely tell what’s happening here.  As Old Dog said, the screen shots are very hard to read.  The first screen shot has some code on lines 592 to 603, which we cannot see.  While this appears to have something to do with escape characters, I cannot tell what is a String literal and what is a printed string value.  Please provide us with lines of code, and please explain with text, not images, what the output is and how you obtained that output (such as println statements, debugger windows, etc.).","body":"I can barely tell what’s happening here.  As Old Dog said, the screen shots are very hard to read.  The first screen shot has some code on lines 592 to 603, which we cannot see.  While this appears to have something to do with escape characters, I cannot tell what is a String literal and what is a printed string value.  Please provide us with lines of code, and please explain with text, not images, what the output is and how you obtained that output (such as println statements, debugger windows, etc.)."},{"owner":{"account_id":5754041,"reputation":51,"user_id":11751666,"display_name":"aaa"},"score":0,"creation_date":1692814329,"post_id":76961640,"comment_id":135676684,"body_markdown":"@OldDogProgrammer - I updated the post, I hope it&#39;s clearer now. thanks!!","body":"@OldDogProgrammer - I updated the post, I hope it&#39;s clearer now. thanks!!"},{"owner":{"account_id":5754041,"reputation":51,"user_id":11751666,"display_name":"aaa"},"score":0,"creation_date":1692814341,"post_id":76961640,"comment_id":135676688,"body_markdown":"@VGR - I updated the post, I hope it&#39;s clearer now. thanks!!","body":"@VGR - I updated the post, I hope it&#39;s clearer now. thanks!!"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1692820137,"post_id":76961640,"comment_id":135677739,"body_markdown":"I am not familiar with Velocity (though I’ve heard of it).  Is there a reason /graphQLTemplates/feedbackDataByDateRange.vm starts and ends with `&quot;`?  That file’s content is not JSON, but rather a string containing a depiction of JSON, which seems unusual to me.  If it were just regular JSON, you could get rid of most of those backslashes, which would make everything easier to understand.","body":"I am not familiar with Velocity (though I’ve heard of it).  Is there a reason /graphQLTemplates/feedbackDataByDateRange.vm starts and ends with <code>&quot;</code>?  That file’s content is not JSON, but rather a string containing a depiction of JSON, which seems unusual to me.  If it were just regular JSON, you could get rid of most of those backslashes, which would make everything easier to understand."}],"answers":[{"comments":[{"owner":{"account_id":5754041,"reputation":51,"user_id":11751666,"display_name":"aaa"},"score":0,"creation_date":1692805600,"post_id":76962591,"comment_id":135675069,"body_markdown":"I tried running the following code but it still doesn&#39;t work: mecApisGraphQLClient.mecGraphQLQuery(MecGraphQLClient.BEARER_PREFIX + mecAccessToken, query.replaceAll(&quot;\\&quot;&quot;, &quot;\\\\\\\\\\&quot;&quot;));","body":"I tried running the following code but it still doesn&#39;t work: mecApisGraphQLClient.mecGraphQLQuery(MecGraphQLClient.BEARER&zwnj;&#8203;_PREFIX + mecAccessToken, query.replaceAll(&quot;\\&quot;&quot;, &quot;\\\\\\\\\\&quot;&quot;));"},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1692806139,"post_id":76962591,"comment_id":135675179,"body_markdown":"@aaa, interesting.  And, it&#39;s working correctly if you copy and paste the value?  Can you add that value to your post?","body":"@aaa, interesting.  And, it&#39;s working correctly if you copy and paste the value?  Can you add that value to your post?"},{"owner":{"account_id":9685245,"reputation":9531,"user_id":7185318,"accept_rate":88,"display_name":"Luatic"},"score":0,"creation_date":1692814432,"post_id":76962591,"comment_id":135676703,"body_markdown":"Escaping typically applies to more than just double quotes. I&#39;d guess this probably needs full JSON string escaping or similar. Your proposed solution is missing at least backslashes, which do appear in the string currently.","body":"Escaping typically applies to more than just double quotes. I&#39;d guess this probably needs full JSON string escaping or similar. Your proposed solution is missing at least backslashes, which do appear in the string currently."},{"owner":{"account_id":5754041,"reputation":51,"user_id":11751666,"display_name":"aaa"},"score":0,"creation_date":1692818521,"post_id":76962591,"comment_id":135677471,"body_markdown":"thanks @Luatic. do you have another solution?","body":"thanks @Luatic. do you have another solution?"},{"owner":{"account_id":9685245,"reputation":9531,"user_id":7185318,"accept_rate":88,"display_name":"Luatic"},"score":0,"creation_date":1692819460,"post_id":76962591,"comment_id":135677636,"body_markdown":"@aaa I don&#39;t, since I don&#39;t know which API you&#39;re working with and what exactly it expects and don&#39;t want to tap in the dark. You could try using the JSON encoded string and JSON encoding it again though.","body":"@aaa I don&#39;t, since I don&#39;t know which API you&#39;re working with and what exactly it expects and don&#39;t want to tap in the dark. You could try using the JSON encoded string and JSON encoding it again though."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1692825637,"post_id":76962591,"comment_id":135678538,"body_markdown":"@aaa, I&#39;ve revised my answer, it might work now.  Originally it wasn&#39;t escaping the _query_ value correctly, which has 3 slashes.","body":"@aaa, I&#39;ve revised my answer, it might work now.  Originally it wasn&#39;t escaping the <i>query</i> value correctly, which has 3 slashes."}],"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":6,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692825121,"creation_date":1692802491,"answer_id":76962591,"question_id":76961640,"body_markdown":"&gt; _&quot;... The api expects to receive the string in the following format (same to value when I copy from variable): ...&quot;_\r\n\r\nIt looks like the _query_ needs to be _&quot;[escaped](https://en.wikipedia.org/wiki/Escape_sequence)&quot;_.  \r\nYou&#39;ll need to add a `\\` before every `&quot;`.\r\n\r\nYou can use the _[String#replace](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#replace(java.lang.CharSequence,java.lang.CharSequence))_ method to escape the values.\r\n\r\nThis will preserve the `\\&quot;` sequences when copy and pasting the value.\r\n\r\n```java\r\nString string = &quot;{ \\&quot;query\\&quot;: \\&quot;query getMecFeedbackDataByDateRange( $filter: Filter, $numPerPage: Int!, $orderBy: [RecordOrder] ) { feedback( filter: $filter, first: $numPerPage, orderBy: $orderBy ) { nodes { e_bp_digital_uuid_txt: fieldValue(fieldId: \\\\\\&quot;e_bp_digital_uuid_txt\\\\\\&quot;) responsedate: fieldValue(fieldId: \\\\\\&quot;e_responsedate\\\\\\&quot;) } totalCount pageInfo { endCursor hasNextPage } } }\\&quot;, \\&quot;variables\\&quot;: { \\&quot;filter\\&quot;: { \\&quot;and\\&quot;: [ { \\&quot;fieldIds\\&quot;: [ \\&quot;e_responsedate\\&quot; ], \\&quot;gte\\&quot;: \\&quot;2023-08-22 01:52:15\\&quot; }, { \\&quot;fieldIds\\&quot;: [ \\&quot;e_responsedate\\&quot; ], \\&quot;lte\\&quot;: \\&quot;2023-08-24 01:57:15\\&quot; } ] }, \\&quot;numPerPage\\&quot;: 1000, \\&quot;orderBy\\&quot;: [ { \\&quot;fieldId\\&quot;: \\&quot;e_responsedate\\&quot;, \\&quot;direction\\&quot;: \\&quot;DESC\\&quot; } ] }}&quot;;\r\nstring = string.replace(&quot;\\&quot;&quot;, &quot;\\\\\\&quot;&quot;).replace(&quot;\\\\\\\\\\&quot;&quot;, &quot;\\\\\\\\\\\\\\&quot;&quot;);\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n{ \\&quot;query\\&quot;: \\&quot;query getMecFeedbackDataByDateRange( $filter: Filter, $numPerPage: Int!, $orderBy: [RecordOrder] ) { feedback( filter: $filter, first: $numPerPage, orderBy: $orderBy ) { nodes { e_bp_digital_uuid_txt: fieldValue(fieldId: \\\\\\&quot;e_bp_digital_uuid_txt\\\\\\&quot;) responsedate: fieldValue(fieldId: \\\\\\&quot;e_responsedate\\\\\\&quot;) } totalCount pageInfo { endCursor hasNextPage } } }\\&quot;, \\&quot;variables\\&quot;: { \\&quot;filter\\&quot;: { \\&quot;and\\&quot;: [ { \\&quot;fieldIds\\&quot;: [ \\&quot;e_responsedate\\&quot; ], \\&quot;gte\\&quot;: \\&quot;2023-08-22 01:52:15\\&quot; }, { \\&quot;fieldIds\\&quot;: [ \\&quot;e_responsedate\\&quot; ], \\&quot;lte\\&quot;: \\&quot;2023-08-24 01:57:15\\&quot; } ] }, \\&quot;numPerPage\\&quot;: 1000, \\&quot;orderBy\\&quot;: [ { \\&quot;fieldId\\&quot;: \\&quot;e_responsedate\\&quot;, \\&quot;direction\\&quot;: \\&quot;DESC\\&quot; } ] }}\r\n```","title":"Different values when I send a string (with quotes) as a parameter and when I send as a string (take the string from parameter)","body":"<blockquote>\n<p><em>&quot;... The api expects to receive the string in the following format (same to value when I copy from variable): ...&quot;</em></p>\n</blockquote>\n<p>It looks like the <em>query</em> needs to be <em>&quot;<a href=\"https://en.wikipedia.org/wiki/Escape_sequence\" rel=\"nofollow noreferrer\">escaped</a>&quot;</em>.<br />\nYou'll need to add a <code>\\</code> before every <code>&quot;</code>.</p>\n<p>You can use the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#replace(java.lang.CharSequence,java.lang.CharSequence)\" rel=\"nofollow noreferrer\">String#replace</a></em> method to escape the values.</p>\n<p>This will preserve the <code>\\&quot;</code> sequences when copy and pasting the value.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String string = &quot;{ \\&quot;query\\&quot;: \\&quot;query getMecFeedbackDataByDateRange( $filter: Filter, $numPerPage: Int!, $orderBy: [RecordOrder] ) { feedback( filter: $filter, first: $numPerPage, orderBy: $orderBy ) { nodes { e_bp_digital_uuid_txt: fieldValue(fieldId: \\\\\\&quot;e_bp_digital_uuid_txt\\\\\\&quot;) responsedate: fieldValue(fieldId: \\\\\\&quot;e_responsedate\\\\\\&quot;) } totalCount pageInfo { endCursor hasNextPage } } }\\&quot;, \\&quot;variables\\&quot;: { \\&quot;filter\\&quot;: { \\&quot;and\\&quot;: [ { \\&quot;fieldIds\\&quot;: [ \\&quot;e_responsedate\\&quot; ], \\&quot;gte\\&quot;: \\&quot;2023-08-22 01:52:15\\&quot; }, { \\&quot;fieldIds\\&quot;: [ \\&quot;e_responsedate\\&quot; ], \\&quot;lte\\&quot;: \\&quot;2023-08-24 01:57:15\\&quot; } ] }, \\&quot;numPerPage\\&quot;: 1000, \\&quot;orderBy\\&quot;: [ { \\&quot;fieldId\\&quot;: \\&quot;e_responsedate\\&quot;, \\&quot;direction\\&quot;: \\&quot;DESC\\&quot; } ] }}&quot;;\nstring = string.replace(&quot;\\&quot;&quot;, &quot;\\\\\\&quot;&quot;).replace(&quot;\\\\\\\\\\&quot;&quot;, &quot;\\\\\\\\\\\\\\&quot;&quot;);\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>{ \\&quot;query\\&quot;: \\&quot;query getMecFeedbackDataByDateRange( $filter: Filter, $numPerPage: Int!, $orderBy: [RecordOrder] ) { feedback( filter: $filter, first: $numPerPage, orderBy: $orderBy ) { nodes { e_bp_digital_uuid_txt: fieldValue(fieldId: \\\\\\&quot;e_bp_digital_uuid_txt\\\\\\&quot;) responsedate: fieldValue(fieldId: \\\\\\&quot;e_responsedate\\\\\\&quot;) } totalCount pageInfo { endCursor hasNextPage } } }\\&quot;, \\&quot;variables\\&quot;: { \\&quot;filter\\&quot;: { \\&quot;and\\&quot;: [ { \\&quot;fieldIds\\&quot;: [ \\&quot;e_responsedate\\&quot; ], \\&quot;gte\\&quot;: \\&quot;2023-08-22 01:52:15\\&quot; }, { \\&quot;fieldIds\\&quot;: [ \\&quot;e_responsedate\\&quot; ], \\&quot;lte\\&quot;: \\&quot;2023-08-24 01:57:15\\&quot; } ] }, \\&quot;numPerPage\\&quot;: 1000, \\&quot;orderBy\\&quot;: [ { \\&quot;fieldId\\&quot;: \\&quot;e_responsedate\\&quot;, \\&quot;direction\\&quot;: \\&quot;DESC\\&quot; } ] }}\n</code></pre>\n"}],"owner":{"account_id":5754041,"reputation":51,"user_id":11751666,"display_name":"aaa"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692825121,"creation_date":1692795856,"question_id":76961640,"body_markdown":"I have a variable that contains string.\r\nwhen I send the variable to the api as param, I get an error.\r\n\r\nwhen I copy the value from variable and send to api, it works well. \r\n\r\nI think its related to behavior of the compiler in the context of `\\&quot;`.\r\n\r\nThe api:\r\n\r\n```\r\n    @PostMapping(value = &quot;/data/v0/query&quot;, consumes = {MediaType.APPLICATION_JSON_VALUE})\r\n    JsonNode mecGraphQLQuery(\r\n            @RequestHeader(HttpHeaders.AUTHORIZATION) String bearerToken,\r\n            @RequestBody String query\r\n    );\r\n\r\n```\r\nThe api expects to receive the &#39;query&#39; param in the following format:\r\n\r\n```\r\n &quot;{ \\&quot;query\\&quot;: \\&quot;query getMecFeedbackDataByDateRange( $filter: Filter, $numPerPage: Int!, $orderBy: [RecordOrder] ) { feedback( filter: $filter, first: $numPerPage, orderBy: $orderBy ) { nodes { e_bp_digital_uuid_txt: fieldValue(fieldId: \\\\\\&quot;e_bp_digital_uuid_txt\\\\\\&quot;) responsedate: fieldValue(fieldId: \\\\\\&quot;e_responsedate\\\\\\&quot;) } totalCount pageInfo { endCursor hasNextPage } } }\\&quot;, \\&quot;variables\\&quot;: { \\&quot;filter\\&quot;: { \\&quot;and\\&quot;: [ { \\&quot;fieldIds\\&quot;: [ \\&quot;e_responsedate\\&quot; ], \\&quot;gte\\&quot;: \\&quot;2023-08-22 01:52:15\\&quot; }, { \\&quot;fieldIds\\&quot;: [ \\&quot;e_responsedate\\&quot; ], \\&quot;lte\\&quot;: \\&quot;2023-08-24 01:57:15\\&quot; } ] }, \\&quot;numPerPage\\&quot;: 1000, \\&quot;orderBy\\&quot;: [ { \\&quot;fieldId\\&quot;: \\&quot;e_responsedate\\&quot;, \\&quot;direction\\&quot;: \\&quot;DESC\\&quot; } ] }}&quot;\r\n```\r\n\r\nI generate the value of a &#39;query&#39; param from a Velocity file:\r\n\r\n```\r\npublic String getMecFeedbackDataByDateRangeQuery(String host, String mecAccessToken, String fromDate, String toDate, Set&lt;MecField&gt; fieldNames) {\r\n        Preconditions.checkArgument(!fieldNames.isEmpty(), &quot;List of fields must not be empty!&quot;);\r\n        Map&lt;String,Object&gt; velocityContext = new HashMap&lt;&gt;();\r\n        velocityContext.put(&quot;fromDate&quot;, fromDate);\r\n        velocityContext.put(&quot;toDate&quot;, toDate);\r\n        velocityContext.put(&quot;fieldNames&quot;, fieldNames);\r\n        String query = generateGraphQLQuery(velocityContext, &quot;/graphQLTemplates/feedbackDataByDateRange.vm&quot;);\r\n        log.info(&quot;MEC GraphQL Query: &quot; + query);\r\n        return query.replace(&quot;\\n&quot;, &quot;&quot;);\r\n}\r\n\r\n\r\nString query = graphQLFeedbackClient.getMecFeedbackDataByDateRangeQuery(mecIntegrationConfiguration.getHostHeader(), mecAccessToken, fromDateAsString, toDateAsString, fieldNames);\r\n\r\n\r\n```\r\n\r\n/graphQLTemplates/feedbackDataByDateRange.vm:\r\n\r\n```\r\n&quot;{\r\n    \\&quot;query\\&quot;:\r\n      \\&quot;query getMecFeedbackDataByDateRange( $filter: Filter, $numPerPage: Int!, $orderBy: [RecordOrder] ) {\r\n        feedback(\r\n            filter: $filter,\r\n            first: $numPerPage,\r\n            orderBy: $orderBy\r\n        ) {\r\n          nodes {\r\n            #foreach ($field in $fieldNames)\r\n              $field.getField(): fieldValue(fieldId: \\\\\\&quot;$field.getField()\\\\\\&quot;)\r\n            #end\r\n            responsedate: fieldValue(fieldId: \\\\\\&quot;e_responsedate\\\\\\&quot;)\r\n          }\r\n          totalCount\r\n          pageInfo {\r\n           endCursor\r\n           hasNextPage\r\n          }\r\n        }\r\n      }\\&quot;,\r\n    \\&quot;variables\\&quot;:\r\n    {\r\n      \\&quot;filter\\&quot;: {\r\n        \\&quot;and\\&quot;: [\r\n          {\r\n            \\&quot;fieldIds\\&quot;: [\r\n              \\&quot;e_responsedate\\&quot;\r\n            ],\r\n            \\&quot;gte\\&quot;: \\&quot;$fromDate\\&quot;\r\n          },\r\n          {\r\n            \\&quot;fieldIds\\&quot;: [\r\n              \\&quot;e_responsedate\\&quot;\r\n            ],\r\n            \\&quot;lte\\&quot;: \\&quot;$toDate\\&quot;\r\n          }\r\n        ]\r\n      },\r\n    \\&quot;numPerPage\\&quot;: 1000,\r\n      \\&quot;orderBy\\&quot;: [\r\n        {\r\n          \\&quot;fieldId\\&quot;: \\&quot;e_responsedate\\&quot;,\r\n          \\&quot;direction\\&quot;: \\&quot;DESC\\&quot;\r\n        }\r\n      ]\r\n    }\r\n}&quot;\r\n```\r\n\r\nwhen I send the &#39;query&#39; variable as param to api - I get error (&#39;invalid input data&#39;):\r\n```\r\nmecApisGraphQLClient.mecGraphQLQuery(MecGraphQLClient.BEARER_PREFIX + mecAccessToken, query)\r\n```\r\n\r\nwhen I copy the data of &#39;query&#39; variable (right click on the &#39;query&#39; variable -&gt; copy value) and send as is to the api - it works fine:\r\n```\r\nmecApisGraphQLClient.mecGraphQLQuery(MecGraphQLClient.BEARER_PREFIX + mecAccessToken, &quot;{ \\&quot;query\\&quot;: \\&quot;query getMecFeedbackDataByDateRange( $filter: Filter, $numPerPage: Int!, $orderBy: [RecordOrder] ) { feedback( filter: $filter, first: $numPerPage, orderBy: $orderBy ) { nodes { e_bp_digital_uuid_txt: fieldValue(fieldId: \\\\\\&quot;e_bp_digital_uuid_txt\\\\\\&quot;) responsedate: fieldValue(fieldId: \\\\\\&quot;e_responsedate\\\\\\&quot;) } totalCount pageInfo { endCursor hasNextPage } } }\\&quot;, \\&quot;variables\\&quot;: { \\&quot;filter\\&quot;: { \\&quot;and\\&quot;: [ { \\&quot;fieldIds\\&quot;: [ \\&quot;e_responsedate\\&quot; ], \\&quot;gte\\&quot;: \\&quot;2023-08-22 01:52:15\\&quot; }, { \\&quot;fieldIds\\&quot;: [ \\&quot;e_responsedate\\&quot; ], \\&quot;lte\\&quot;: \\&quot;2023-08-24 01:57:15\\&quot; } ] }, \\&quot;numPerPage\\&quot;: 1000, \\&quot;orderBy\\&quot;: [ { \\&quot;fieldId\\&quot;: \\&quot;e_responsedate\\&quot;, \\&quot;direction\\&quot;: \\&quot;DESC\\&quot; } ] }}&quot;);\r\n```\r\n\r\n\r\n \r\nI get delta from&#39;DiffUtils.diff&#39;:\r\n[![enter image description here][5]][5]\r\n\r\n\r\n**do you know this behavior? how can I send the string as I take it from the variable?**\r\n\r\nthanks!\r\n\r\n  [5]: https://i.stack.imgur.com/bEnGW.png","title":"Different values when I send a string (with quotes) as a parameter and when I send as a string (take the string from parameter)","body":"<p>I have a variable that contains string.\nwhen I send the variable to the api as param, I get an error.</p>\n<p>when I copy the value from variable and send to api, it works well.</p>\n<p>I think its related to behavior of the compiler in the context of <code>\\&quot;</code>.</p>\n<p>The api:</p>\n<pre><code>    @PostMapping(value = &quot;/data/v0/query&quot;, consumes = {MediaType.APPLICATION_JSON_VALUE})\n    JsonNode mecGraphQLQuery(\n            @RequestHeader(HttpHeaders.AUTHORIZATION) String bearerToken,\n            @RequestBody String query\n    );\n\n</code></pre>\n<p>The api expects to receive the 'query' param in the following format:</p>\n<pre><code> &quot;{ \\&quot;query\\&quot;: \\&quot;query getMecFeedbackDataByDateRange( $filter: Filter, $numPerPage: Int!, $orderBy: [RecordOrder] ) { feedback( filter: $filter, first: $numPerPage, orderBy: $orderBy ) { nodes { e_bp_digital_uuid_txt: fieldValue(fieldId: \\\\\\&quot;e_bp_digital_uuid_txt\\\\\\&quot;) responsedate: fieldValue(fieldId: \\\\\\&quot;e_responsedate\\\\\\&quot;) } totalCount pageInfo { endCursor hasNextPage } } }\\&quot;, \\&quot;variables\\&quot;: { \\&quot;filter\\&quot;: { \\&quot;and\\&quot;: [ { \\&quot;fieldIds\\&quot;: [ \\&quot;e_responsedate\\&quot; ], \\&quot;gte\\&quot;: \\&quot;2023-08-22 01:52:15\\&quot; }, { \\&quot;fieldIds\\&quot;: [ \\&quot;e_responsedate\\&quot; ], \\&quot;lte\\&quot;: \\&quot;2023-08-24 01:57:15\\&quot; } ] }, \\&quot;numPerPage\\&quot;: 1000, \\&quot;orderBy\\&quot;: [ { \\&quot;fieldId\\&quot;: \\&quot;e_responsedate\\&quot;, \\&quot;direction\\&quot;: \\&quot;DESC\\&quot; } ] }}&quot;\n</code></pre>\n<p>I generate the value of a 'query' param from a Velocity file:</p>\n<pre><code>public String getMecFeedbackDataByDateRangeQuery(String host, String mecAccessToken, String fromDate, String toDate, Set&lt;MecField&gt; fieldNames) {\n        Preconditions.checkArgument(!fieldNames.isEmpty(), &quot;List of fields must not be empty!&quot;);\n        Map&lt;String,Object&gt; velocityContext = new HashMap&lt;&gt;();\n        velocityContext.put(&quot;fromDate&quot;, fromDate);\n        velocityContext.put(&quot;toDate&quot;, toDate);\n        velocityContext.put(&quot;fieldNames&quot;, fieldNames);\n        String query = generateGraphQLQuery(velocityContext, &quot;/graphQLTemplates/feedbackDataByDateRange.vm&quot;);\n        log.info(&quot;MEC GraphQL Query: &quot; + query);\n        return query.replace(&quot;\\n&quot;, &quot;&quot;);\n}\n\n\nString query = graphQLFeedbackClient.getMecFeedbackDataByDateRangeQuery(mecIntegrationConfiguration.getHostHeader(), mecAccessToken, fromDateAsString, toDateAsString, fieldNames);\n\n\n</code></pre>\n<p>/graphQLTemplates/feedbackDataByDateRange.vm:</p>\n<pre><code>&quot;{\n    \\&quot;query\\&quot;:\n      \\&quot;query getMecFeedbackDataByDateRange( $filter: Filter, $numPerPage: Int!, $orderBy: [RecordOrder] ) {\n        feedback(\n            filter: $filter,\n            first: $numPerPage,\n            orderBy: $orderBy\n        ) {\n          nodes {\n            #foreach ($field in $fieldNames)\n              $field.getField(): fieldValue(fieldId: \\\\\\&quot;$field.getField()\\\\\\&quot;)\n            #end\n            responsedate: fieldValue(fieldId: \\\\\\&quot;e_responsedate\\\\\\&quot;)\n          }\n          totalCount\n          pageInfo {\n           endCursor\n           hasNextPage\n          }\n        }\n      }\\&quot;,\n    \\&quot;variables\\&quot;:\n    {\n      \\&quot;filter\\&quot;: {\n        \\&quot;and\\&quot;: [\n          {\n            \\&quot;fieldIds\\&quot;: [\n              \\&quot;e_responsedate\\&quot;\n            ],\n            \\&quot;gte\\&quot;: \\&quot;$fromDate\\&quot;\n          },\n          {\n            \\&quot;fieldIds\\&quot;: [\n              \\&quot;e_responsedate\\&quot;\n            ],\n            \\&quot;lte\\&quot;: \\&quot;$toDate\\&quot;\n          }\n        ]\n      },\n    \\&quot;numPerPage\\&quot;: 1000,\n      \\&quot;orderBy\\&quot;: [\n        {\n          \\&quot;fieldId\\&quot;: \\&quot;e_responsedate\\&quot;,\n          \\&quot;direction\\&quot;: \\&quot;DESC\\&quot;\n        }\n      ]\n    }\n}&quot;\n</code></pre>\n<p>when I send the 'query' variable as param to api - I get error ('invalid input data'):</p>\n<pre><code>mecApisGraphQLClient.mecGraphQLQuery(MecGraphQLClient.BEARER_PREFIX + mecAccessToken, query)\n</code></pre>\n<p>when I copy the data of 'query' variable (right click on the 'query' variable -&gt; copy value) and send as is to the api - it works fine:</p>\n<pre><code>mecApisGraphQLClient.mecGraphQLQuery(MecGraphQLClient.BEARER_PREFIX + mecAccessToken, &quot;{ \\&quot;query\\&quot;: \\&quot;query getMecFeedbackDataByDateRange( $filter: Filter, $numPerPage: Int!, $orderBy: [RecordOrder] ) { feedback( filter: $filter, first: $numPerPage, orderBy: $orderBy ) { nodes { e_bp_digital_uuid_txt: fieldValue(fieldId: \\\\\\&quot;e_bp_digital_uuid_txt\\\\\\&quot;) responsedate: fieldValue(fieldId: \\\\\\&quot;e_responsedate\\\\\\&quot;) } totalCount pageInfo { endCursor hasNextPage } } }\\&quot;, \\&quot;variables\\&quot;: { \\&quot;filter\\&quot;: { \\&quot;and\\&quot;: [ { \\&quot;fieldIds\\&quot;: [ \\&quot;e_responsedate\\&quot; ], \\&quot;gte\\&quot;: \\&quot;2023-08-22 01:52:15\\&quot; }, { \\&quot;fieldIds\\&quot;: [ \\&quot;e_responsedate\\&quot; ], \\&quot;lte\\&quot;: \\&quot;2023-08-24 01:57:15\\&quot; } ] }, \\&quot;numPerPage\\&quot;: 1000, \\&quot;orderBy\\&quot;: [ { \\&quot;fieldId\\&quot;: \\&quot;e_responsedate\\&quot;, \\&quot;direction\\&quot;: \\&quot;DESC\\&quot; } ] }}&quot;);\n</code></pre>\n<p>I get delta from'DiffUtils.diff':\n<a href=\"https://i.stack.imgur.com/bEnGW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bEnGW.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>do you know this behavior? how can I send the string as I take it from the variable?</strong></p>\n<p>thanks!</p>\n"},{"tags":["java","json","gson"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1621891704,"post_id":67679090,"comment_id":119626180,"body_markdown":"Set the format to `..SSS&#39;Z&#39;`?","body":"Set the format to <code>..SSS&#39;Z&#39;</code>?"},{"owner":{"account_id":1073482,"reputation":10989,"user_id":1072187,"accept_rate":36,"display_name":"John Little"},"score":1,"creation_date":1621941011,"post_id":67679090,"comment_id":119639723,"body_markdown":"My assumption is that this would add a static char &quot;Z&quot; regardless of the timezone?  If the timezone happened to be +1000, then it should not show Z in this case...","body":"My assumption is that this would add a static char &quot;Z&quot; regardless of the timezone?  If the timezone happened to be +1000, then it should not show Z in this case..."},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1621952471,"post_id":67679090,"comment_id":119645681,"body_markdown":"See https://stackoverflow.com/q/8405087/2541560 and https://stackoverflow.com/q/7556851/2541560","body":"See <a href=\"https://stackoverflow.com/q/8405087/2541560\">stackoverflow.com/q/8405087/2541560</a> and <a href=\"https://stackoverflow.com/q/7556851/2541560\">stackoverflow.com/q/7556851/2541560</a>"},{"owner":{"account_id":1073482,"reputation":10989,"user_id":1072187,"accept_rate":36,"display_name":"John Little"},"score":1,"creation_date":1621954114,"post_id":67679090,"comment_id":119646562,"body_markdown":"Thanks, but those two are both for the de-serialisation, which works fine. Its the serialization which is not working as desired.","body":"Thanks, but those two are both for the de-serialisation, which works fine. Its the serialization which is not working as desired."},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1621965126,"post_id":67679090,"comment_id":119651829,"body_markdown":"That&#39;s completely irrelevant since your issue is with date formatting.","body":"That&#39;s completely irrelevant since your issue is with date formatting."},{"owner":{"account_id":1073482,"reputation":10989,"user_id":1072187,"accept_rate":36,"display_name":"John Little"},"score":0,"creation_date":1622017545,"post_id":67679090,"comment_id":119665766,"body_markdown":"Date formatting works fine in de-serialiseation: I can read Z ok. I just cant get gson to write it. Those posts do not address this unfortunately.","body":"Date formatting works fine in de-serialiseation: I can read Z ok. I just cant get gson to write it. Those posts do not address this unfortunately."},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1622018082,"post_id":67679090,"comment_id":119666009,"body_markdown":"Unfortunately for you, I guess. Many people can get a lot of information out of them. You&#39;re not making a lot of effort to solve your own problem, are you?","body":"Unfortunately for you, I guess. Many people can get a lot of information out of them. You&#39;re not making a lot of effort to solve your own problem, are you?"}],"answers":[{"tags":[],"owner":{"account_id":112547,"reputation":6206,"user_id":296829,"accept_rate":73,"display_name":"Steve Kehlet"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1692824845,"creation_date":1692824845,"answer_id":76964890,"question_id":67679090,"body_markdown":"Yes, use `X`. From [the DateTimeFormatter docs](https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html):\r\n\r\n```\r\n   X       zone-offset &#39;Z&#39; for zero    offset-X          Z; -08; -0830; -08:30; -083015; -08:30:15;\r\n```\r\n\r\nSo a format string like `yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSSX` will give you a date like `2022-07-26T16:46:35.247Z`.\r\n","title":"java Gson json formatter, is it possible to ouptput Z instead of +0000?","body":"<p>Yes, use <code>X</code>. From <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html\" rel=\"nofollow noreferrer\">the DateTimeFormatter docs</a>:</p>\n<pre><code>   X       zone-offset 'Z' for zero    offset-X          Z; -08; -0830; -08:30; -083015; -08:30:15;\n</code></pre>\n<p>So a format string like <code>yyyy-MM-dd'T'HH:mm:ss.SSSX</code> will give you a date like <code>2022-07-26T16:46:35.247Z</code>.</p>\n"}],"owner":{"account_id":1073482,"reputation":10989,"user_id":1072187,"accept_rate":36,"display_name":"John Little"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1692824845,"creation_date":1621891270,"question_id":67679090,"body_markdown":"I need to read in some json, sort it, then output it again.   I am using this to de-seralise and serialise the json:\r\n\r\n    \tprivate static Gson gson = new GsonBuilder()\r\n\t\t\t.setDateFormat(&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSSZ&quot;)\r\n\t\t\t.create();\r\n\r\nIf I parse this to a Date:\r\n\r\n    &quot;activedDate&quot;: &quot;2021-04-20T21:48:04.107Z&quot;,\r\n\r\nThen output it again as Json, I get this:\r\n\r\n    &quot;activedDate&quot;: &quot;2021-04-20T21:48:04.107+0000&quot;,\r\n\r\nBut I need it to have Z instead of +0000 if possible.\r\n\r\nIs this possible (without hacking the resultant strings)?\r\n\r\nI am forcing my laptop to UTC thusly:\r\n\r\n    java -Duser.timezone=UTC  -jar my.jar\r\n\r\n\r\n","title":"java Gson json formatter, is it possible to ouptput Z instead of +0000?","body":"<p>I need to read in some json, sort it, then output it again.   I am using this to de-seralise and serialise the json:</p>\n<pre><code>    private static Gson gson = new GsonBuilder()\n        .setDateFormat(&quot;yyyy-MM-dd'T'HH:mm:ss.SSSZ&quot;)\n        .create();\n</code></pre>\n<p>If I parse this to a Date:</p>\n<pre><code>&quot;activedDate&quot;: &quot;2021-04-20T21:48:04.107Z&quot;,\n</code></pre>\n<p>Then output it again as Json, I get this:</p>\n<pre><code>&quot;activedDate&quot;: &quot;2021-04-20T21:48:04.107+0000&quot;,\n</code></pre>\n<p>But I need it to have Z instead of +0000 if possible.</p>\n<p>Is this possible (without hacking the resultant strings)?</p>\n<p>I am forcing my laptop to UTC thusly:</p>\n<pre><code>java -Duser.timezone=UTC  -jar my.jar\n</code></pre>\n"},{"tags":["java","kotlin","unit-testing","error-handling","rx-java"],"comments":[{"owner":{"account_id":24127,"reputation":69392,"user_id":61158,"accept_rate":98,"display_name":"akarnokd"},"score":0,"creation_date":1692868934,"post_id":76964878,"comment_id":135683503,"body_markdown":"For example, the error handler adds the exception to a list or field. In your test method, you check the list or field and throw its content.","body":"For example, the error handler adds the exception to a list or field. In your test method, you check the list or field and throw its content."}],"owner":{"account_id":23242379,"reputation":15,"user_id":17331466,"display_name":"RAN"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692824745,"creation_date":1692824745,"question_id":76964878,"body_markdown":"I&#39;m writing a unit test which is testing a scenario an exception is being thrown from RX. \r\nI do have an Rx errorHandler, and I want to throw the exception in this case.\r\n```\r\nRxJavaPlugins.setErrorHandler { it : Throwable -&gt; \r\n     if(it meets the condition){\r\n         throw it\r\n     }\r\n}\r\n```\r\n\r\nHow do I catch the exception thrown in the unit test so the test passes? \r\nI keep getting &#39;UndeliverableException: The exception could not be delivered to the consumer because it has already canceled/disposed the flow or the exception has nowhere to go to begin with&#39;.","title":"Unit test an exception being thrown from RX errorHandler - kotlin/java","body":"<p>I'm writing a unit test which is testing a scenario an exception is being thrown from RX.\nI do have an Rx errorHandler, and I want to throw the exception in this case.</p>\n<pre><code>RxJavaPlugins.setErrorHandler { it : Throwable -&gt; \n     if(it meets the condition){\n         throw it\n     }\n}\n</code></pre>\n<p>How do I catch the exception thrown in the unit test so the test passes?\nI keep getting 'UndeliverableException: The exception could not be delivered to the consumer because it has already canceled/disposed the flow or the exception has nowhere to go to begin with'.</p>\n"},{"tags":["java","spring","spring-mvc","dependency-injection","spring-data-jpa"],"comments":[{"owner":{"account_id":25822,"reputation":78747,"user_id":66686,"accept_rate":87,"display_name":"Jens Schauder"},"score":0,"creation_date":1532585880,"post_id":51530140,"comment_id":90031878,"body_markdown":"Do you have `spring-boot-starter-data-jpa` in your dependencies (if you are using Boot) or @EnableJpaRepositories on your context configuration?","body":"Do you have <code>spring-boot-starter-data-jpa</code> in your dependencies (if you are using Boot) or @EnableJpaRepositories on your context configuration?"},{"owner":{"account_id":6660324,"reputation":785,"user_id":5139637,"accept_rate":63,"display_name":"user5139637"},"score":0,"creation_date":1532606361,"post_id":51530140,"comment_id":90044056,"body_markdown":"No, I do not have that dependency. But I am also not using @EnableJpaRepositories","body":"No, I do not have that dependency. But I am also not using @EnableJpaRepositories"},{"owner":{"account_id":25822,"reputation":78747,"user_id":66686,"accept_rate":87,"display_name":"Jens Schauder"},"score":0,"creation_date":1532608380,"post_id":51530140,"comment_id":90045370,"body_markdown":"You should have one of those because that&#39;s what&#39;s creating the repositories.","body":"You should have one of those because that&#39;s what&#39;s creating the repositories."},{"owner":{"account_id":6660324,"reputation":785,"user_id":5139637,"accept_rate":63,"display_name":"user5139637"},"score":0,"creation_date":1532621609,"post_id":51530140,"comment_id":90054351,"body_markdown":"Ok. So where should I place that annotation? In my controller? Also, I am not using Spring Boot, so should I still use @EnableJpaRepositories","body":"Ok. So where should I place that annotation? In my controller? Also, I am not using Spring Boot, so should I still use @EnableJpaRepositories"},{"owner":{"account_id":8026737,"reputation":391,"user_id":6053371,"display_name":"Vlad D."},"score":0,"creation_date":1658639616,"post_id":51530140,"comment_id":129098679,"body_markdown":"It looks like your project dependencies are mismanaged, check out how to set up a basic spring-boot app with jpa and/or use &quot;start.spring.io&quot; tool to see how its pom/gradle would typically look like. \nBtw, AbstractMethodError tells that you most likely have a dependency version conflict.","body":"It looks like your project dependencies are mismanaged, check out how to set up a basic spring-boot app with jpa and/or use &quot;start.spring.io&quot; tool to see how its pom/gradle would typically look like.  Btw, AbstractMethodError tells that you most likely have a dependency version conflict."}],"answers":[{"comments":[{"owner":{"account_id":6660324,"reputation":785,"user_id":5139637,"accept_rate":63,"display_name":"user5139637"},"score":0,"creation_date":1532643698,"post_id":51546342,"comment_id":90064269,"body_markdown":"That did not work. I get another error, See UPDATE 1 in my question above.","body":"That did not work. I get another error, See UPDATE 1 in my question above."},{"owner":{"account_id":25822,"reputation":78747,"user_id":66686,"accept_rate":87,"display_name":"Jens Schauder"},"score":0,"creation_date":1532667887,"post_id":51546342,"comment_id":90069339,"body_markdown":"I disagree. It did solve the problem. You now have a different problem. Please ask a new question. In that question, I recommend including the result of `mvn dependency:tree -D verbose` or equivalent since it seems you have a conflict in library versions.","body":"I disagree. It did solve the problem. You now have a different problem. Please ask a new question. In that question, I recommend including the result of <code>mvn dependency:tree -D verbose</code> or equivalent since it seems you have a conflict in library versions."}],"tags":[],"owner":{"account_id":25822,"reputation":78747,"user_id":66686,"accept_rate":87,"display_name":"Jens Schauder"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1532633846,"creation_date":1532633846,"answer_id":51546342,"question_id":51530140,"body_markdown":"You need to put a `EnableJpaRepositories` on your configuration. Just like `EnableWebMvc`. This triggers the creation of repository beans.\r\n\r\nIf you&#39;d use Spring Boot you instead could also add the `spring-boot-starter-data-jpa` dependency which does the same through some autoconfiguration magic.","title":"UnsatisfiedDependencyException : Error creating bean with name &#39;HController&#39; caused by NoSuchBeanDefinitionException:","body":"<p>You need to put a <code>EnableJpaRepositories</code> on your configuration. Just like <code>EnableWebMvc</code>. This triggers the creation of repository beans.</p>\n\n<p>If you'd use Spring Boot you instead could also add the <code>spring-boot-starter-data-jpa</code> dependency which does the same through some autoconfiguration magic.</p>\n"},{"tags":[],"owner":{"account_id":8026737,"reputation":391,"user_id":6053371,"display_name":"Vlad D."},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658641711,"creation_date":1658641711,"answer_id":73096073,"question_id":51530140,"body_markdown":"Before your update, you had a problem that there was no bean of type UserRepository. For it to become a bean, you need something that would pick up this repository interface and create a repository bean out of it. This is what `spring-data-jpa` module does. In your case, you seem like don&#39;t have an autoconfiguration module to do the job, so you had to enable it manually by adding `@EnableJpaRepositories`.\r\nBy adding `@EnableJpaRepositories`, you made spring to consider these repository interfaces and try to create a bean, but something went wrong... I would guess you are using `spring-data-jpa` module, and its explicitly set version is not in sync with spring core or something - make sure all your spring dependencies are always in sync.\r\n","title":"UnsatisfiedDependencyException : Error creating bean with name &#39;HController&#39; caused by NoSuchBeanDefinitionException:","body":"<p>Before your update, you had a problem that there was no bean of type UserRepository. For it to become a bean, you need something that would pick up this repository interface and create a repository bean out of it. This is what <code>spring-data-jpa</code> module does. In your case, you seem like don't have an autoconfiguration module to do the job, so you had to enable it manually by adding <code>@EnableJpaRepositories</code>.\nBy adding <code>@EnableJpaRepositories</code>, you made spring to consider these repository interfaces and try to create a bean, but something went wrong... I would guess you are using <code>spring-data-jpa</code> module, and its explicitly set version is not in sync with spring core or something - make sure all your spring dependencies are always in sync.</p>\n"}],"owner":{"account_id":6660324,"reputation":785,"user_id":5139637,"accept_rate":63,"display_name":"user5139637"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9908,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1692824520,"creation_date":1532572164,"question_id":51530140,"body_markdown":"I am new to spring and I am trying to use spring&#39;s [CrudRepository][1]. I am receiving a `NoSuchBeanDefinitionException` exception when I try to auto wire a class that implements `org.springframework.data.repository.CrudRepository`. I researched my error and made sure that all my files were under the same package, but I still get this error, and I am having difficulties solving it.\r\n\r\nHere is the controller:\r\n\r\n    package com.H.spring.security.config.core;\r\n    import javax.servlet.http.HttpServletRequest;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.stereotype.Controller;\r\n    import org.springframework.web.bind.annotation.*;\r\n    import org.springframework.web.servlet.ModelAndView;\r\n    \r\n    @Controller\r\n    public class HController {\r\n    \r\n        @Autowired \r\n        private UserRepository userRepository;\r\n    \r\n        @GetMapping(path=&quot;/add&quot;) // Map ONLY GET Requests\r\n        public @ResponseBody String addNewUser (@RequestParam String name\r\n                , @RequestParam String email) {\r\n            User n = new User();\r\n            n.setName(name);\r\n            n.setEmail(email);\r\n            userRepository.save(n);\r\n            return &quot;Saved&quot;;\r\n        }\r\n    \r\n        @GetMapping(path=&quot;/all&quot;)\r\n        public @ResponseBody Iterable&lt;User&gt; getAllUsers() {\r\n            // This returns a JSON or XML with the users\r\n            return userRepository.findAll();\r\n        }\r\n    \r\n    \r\n    }\r\n\r\nHere is the UserRepository:\r\n\r\n    package com.H.spring.security.config.core;\r\n    \r\n    import org.springframework.data.repository.CrudRepository;\r\n   \r\n    \r\n    public interface UserRepository extends CrudRepository&lt;User, Long&gt; {\r\n    \r\n    }\r\n\r\nHere is my application config:\r\n\r\n    package com.H.spring.security.config.core;\r\n    \r\n    @EnableWebMvc\r\n    @Configuration\r\n    @ComponentScan({ &quot;com.H.spring.security.config.*&quot; })\r\n    @Import(value = { HSecurityConfig.class })\r\n    public class HApplicationConfig extends WebMvcConfigurerAdapter implements ApplicationContextAware{\r\n    \r\n    \tprivate ApplicationContext applicationContext;\r\n    \r\n    \t@Override\r\n    \tpublic void setApplicationContext(ApplicationContext applicationContext) throws BeansException {\r\n    \t\tthis.applicationContext = applicationContext;\r\n    \t}\r\n    \r\n    \t@Bean\r\n    \t  public ViewResolver viewResolver() {\r\n    \t    ThymeleafViewResolver resolver = new ThymeleafViewResolver();\r\n    \t    resolver.setTemplateEngine(templateEngine());\r\n    \t    resolver.setCharacterEncoding(&quot;UTF-8&quot;);\r\n    \t    return resolver;\r\n    \t}\r\n    \r\n    \t@Bean\r\n    \t  public TemplateEngine templateEngine() {\r\n    \t    SpringTemplateEngine engine = new SpringTemplateEngine();\r\n    \t    engine.setEnableSpringELCompiler(true);\r\n    \t    engine.setTemplateResolver(templateResolver());\r\n    \t    return engine;\r\n    \t}\r\n    \r\n        @Bean\r\n        public SpringTemplateEngine templateEngine1() {\r\n            SpringTemplateEngine templateEngine = new SpringTemplateEngine();\r\n            templateEngine.setTemplateResolver(templateResolver());\r\n            templateEngine.addDialect(new SpringSecurityDialect());\r\n            return templateEngine;\r\n        }\r\n    \r\n    \tprivate ITemplateResolver templateResolver() {\r\n    \t\tSpringResourceTemplateResolver resolver = new SpringResourceTemplateResolver();\r\n    \t\tresolver.setApplicationContext(applicationContext);\r\n    \t\tresolver.setPrefix(&quot;/WEB-INF/templates/&quot;);\r\n    \t\tresolver.setTemplateMode(TemplateMode.HTML);\r\n    \t\treturn resolver;\r\n    \t}\r\n    \r\n        @Bean(name = &quot;multipartResolver&quot;)\r\n        public MultipartResolver getMultipartResolver() {\r\n            CommonsMultipartResolver resover = new CommonsMultipartResolver();\r\n            resover.setMaxUploadSize(1024 * 1024 * 1024);\r\n            return resover;\r\n        }\r\n    \r\n    \r\n    \t@Override\r\n    \tpublic void addResourceHandlers(final ResourceHandlerRegistry registry) {\r\n    \t    registry.addResourceHandler(&quot;/resources/**&quot;).addResourceLocations(&quot;/resources/&quot;).setCachePeriod(0);\r\n    \t}\r\n    \r\n    }\r\n\r\n\r\nBelow is the error I am receiving:\r\n\r\n    ERROR [org.springframework.web.context.ContextLoader] (ServerService Thread Pool -- 62) Context initialization failed: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;HController&#39;: Unsatisfied dependency expressed through field &#39;userRepository&#39;: No qualifying bean of type [com.H.spring.security.config.core.UserRepository] found for dependency [com.H.spring.security.config.core.UserRepository]: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type [com.H.spring.security.config.core.UserRepository] found for dependency [com.H.spring.security.config.core.UserRepository]: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\r\n    \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:569)\r\n    \tat org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:88)\r\n    \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:349)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1214)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:543)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:482)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306)\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:776)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:861)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:541)\r\n    \tat org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:444)\r\n    \tat org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:326)\r\n    \tat org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:107)\r\n    \r\n    \r\n    Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type [com.H.spring.security.config.core.UserRepository] found for dependency [com.H.spring.security.config.core.UserRepository]: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1406)\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1057)\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1019)\r\n    \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:566)\r\n    \t... 39 more\r\n\r\n\r\n\r\n\r\n**UPDATE 1**\r\n\r\nAfter adding the @EnableJpaRepositories to my configuration, I get the following error:\r\n\r\n\r\n    ERROR [org.springframework.web.context.ContextLoader] (ServerService Thread Pool -- 26) Context initialization failed: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;HController&#39;: Unsatisfied dependency expressed through field &#39;userRepository&#39;: Error creating bean with name &#39;userRepository&#39;: Initialization of bean failed; nested exception is java.lang.AbstractMethodError; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;userRepository&#39;: Initialization of bean failed; nested exception is java.lang.AbstractMethodError\r\n    \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:569)\r\n    \tat org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:88)\r\n    \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:349)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1214)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:543)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:482)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306)\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:776)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:861)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:541)\r\n    \tat org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:444)\r\n    \tat org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:326)\r\n    \tat org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:107)\r\n    \tat io.undertow.servlet.core.ApplicationListeners.contextInitialized(ApplicationListeners.java:187)\r\n    \tat io.undertow.servlet.core.DeploymentManagerImpl$1.call(DeploymentManagerImpl.java:205)\r\n    \tat io.undertow.servlet.core.DeploymentManagerImpl$1.call(DeploymentManagerImpl.java:174)\r\n    \tat io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:42)\r\n    \tat io.undertow.servlet.core.ContextClassLoaderSetupAction$1.call(ContextClassLoaderSetupAction.java:43)\r\n    \tat org.wildfly.extension.undertow.security.SecurityContextThreadSetupAction.lambda$create$0(SecurityContextThreadSetupAction.java:105)\r\n    \tat org.wildfly.extension.undertow.security.SecurityContextThreadSetupAction$$Lambda$895/773328607.call(Unknown Source)\r\n    \tat org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1508)\r\n    \tat org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction$$Lambda$896/1742198405.call(Unknown Source)\r\n    \tat org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1508)\r\n    \tat org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction$$Lambda$896/1742198405.call(Unknown Source)\r\n    \tat org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1508)\r\n    \tat org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction$$Lambda$896/1742198405.call(Unknown Source)\r\n    \tat org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1508)\r\n    \tat org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction$$Lambda$896/1742198405.call(Unknown Source)\r\n    \tat org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1508)\r\n    \tat org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction$$Lambda$896/1742198405.call(Unknown Source)\r\n    \tat io.undertow.servlet.core.DeploymentManagerImpl.deploy(DeploymentManagerImpl.java:239)\r\n    \tat org.wildfly.extension.undertow.deployment.UndertowDeploymentService.startContext(UndertowDeploymentService.java:99)\r\n    \tat org.wildfly.extension.undertow.deployment.UndertowDeploymentService$1.run(UndertowDeploymentService.java:81)\r\n    \tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n    \tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n    \tat java.lang.Thread.run(Thread.java:745)\r\n    \tat org.jboss.threads.JBossThread.run(JBossThread.java:320)\r\n    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;userRepository&#39;: Initialization of bean failed; nested exception is java.lang.AbstractMethodError\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:553)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:482)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306)\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)\r\n    \tat org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:207)\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1214)\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1054)\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1019)\r\n    \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:566)\r\n    \t... 41 more\r\n    Caused by: java.lang.AbstractMethodError\r\n    \tat org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:99)\r\n    \tat org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:302)\r\n    \tat org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:129)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1481)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1226)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:543)\r\n    \t... 51 more\r\n\r\n  [1]: https://spring.io/guides/gs/accessing-data-mysql/\r\n","title":"UnsatisfiedDependencyException : Error creating bean with name &#39;HController&#39; caused by NoSuchBeanDefinitionException:","body":"<p>I am new to spring and I am trying to use spring's <a href=\"https://spring.io/guides/gs/accessing-data-mysql/\" rel=\"nofollow noreferrer\">CrudRepository</a>. I am receiving a <code>NoSuchBeanDefinitionException</code> exception when I try to auto wire a class that implements <code>org.springframework.data.repository.CrudRepository</code>. I researched my error and made sure that all my files were under the same package, but I still get this error, and I am having difficulties solving it.</p>\n\n<p>Here is the controller:</p>\n\n<pre><code>package com.H.spring.security.config.core;\nimport javax.servlet.http.HttpServletRequest;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.*;\nimport org.springframework.web.servlet.ModelAndView;\n\n@Controller\npublic class HController {\n\n    @Autowired \n    private UserRepository userRepository;\n\n    @GetMapping(path=\"/add\") // Map ONLY GET Requests\n    public @ResponseBody String addNewUser (@RequestParam String name\n            , @RequestParam String email) {\n        User n = new User();\n        n.setName(name);\n        n.setEmail(email);\n        userRepository.save(n);\n        return \"Saved\";\n    }\n\n    @GetMapping(path=\"/all\")\n    public @ResponseBody Iterable&lt;User&gt; getAllUsers() {\n        // This returns a JSON or XML with the users\n        return userRepository.findAll();\n    }\n\n\n}\n</code></pre>\n\n<p>Here is the UserRepository:</p>\n\n<pre><code>package com.H.spring.security.config.core;\n\nimport org.springframework.data.repository.CrudRepository;\n\n\npublic interface UserRepository extends CrudRepository&lt;User, Long&gt; {\n\n}\n</code></pre>\n\n<p>Here is my application config:</p>\n\n<pre><code>package com.H.spring.security.config.core;\n\n@EnableWebMvc\n@Configuration\n@ComponentScan({ \"com.H.spring.security.config.*\" })\n@Import(value = { HSecurityConfig.class })\npublic class HApplicationConfig extends WebMvcConfigurerAdapter implements ApplicationContextAware{\n\n    private ApplicationContext applicationContext;\n\n    @Override\n    public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {\n        this.applicationContext = applicationContext;\n    }\n\n    @Bean\n      public ViewResolver viewResolver() {\n        ThymeleafViewResolver resolver = new ThymeleafViewResolver();\n        resolver.setTemplateEngine(templateEngine());\n        resolver.setCharacterEncoding(\"UTF-8\");\n        return resolver;\n    }\n\n    @Bean\n      public TemplateEngine templateEngine() {\n        SpringTemplateEngine engine = new SpringTemplateEngine();\n        engine.setEnableSpringELCompiler(true);\n        engine.setTemplateResolver(templateResolver());\n        return engine;\n    }\n\n    @Bean\n    public SpringTemplateEngine templateEngine1() {\n        SpringTemplateEngine templateEngine = new SpringTemplateEngine();\n        templateEngine.setTemplateResolver(templateResolver());\n        templateEngine.addDialect(new SpringSecurityDialect());\n        return templateEngine;\n    }\n\n    private ITemplateResolver templateResolver() {\n        SpringResourceTemplateResolver resolver = new SpringResourceTemplateResolver();\n        resolver.setApplicationContext(applicationContext);\n        resolver.setPrefix(\"/WEB-INF/templates/\");\n        resolver.setTemplateMode(TemplateMode.HTML);\n        return resolver;\n    }\n\n    @Bean(name = \"multipartResolver\")\n    public MultipartResolver getMultipartResolver() {\n        CommonsMultipartResolver resover = new CommonsMultipartResolver();\n        resover.setMaxUploadSize(1024 * 1024 * 1024);\n        return resover;\n    }\n\n\n    @Override\n    public void addResourceHandlers(final ResourceHandlerRegistry registry) {\n        registry.addResourceHandler(\"/resources/**\").addResourceLocations(\"/resources/\").setCachePeriod(0);\n    }\n\n}\n</code></pre>\n\n<p>Below is the error I am receiving:</p>\n\n<pre><code>ERROR [org.springframework.web.context.ContextLoader] (ServerService Thread Pool -- 62) Context initialization failed: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'HController': Unsatisfied dependency expressed through field 'userRepository': No qualifying bean of type [com.H.spring.security.config.core.UserRepository] found for dependency [com.H.spring.security.config.core.UserRepository]: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type [com.H.spring.security.config.core.UserRepository] found for dependency [com.H.spring.security.config.core.UserRepository]: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:569)\n    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:88)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:349)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1214)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:543)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:482)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:776)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:861)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:541)\n    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:444)\n    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:326)\n    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:107)\n\n\nCaused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type [com.H.spring.security.config.core.UserRepository] found for dependency [com.H.spring.security.config.core.UserRepository]: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1406)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1057)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1019)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:566)\n    ... 39 more\n</code></pre>\n\n<p><strong>UPDATE 1</strong></p>\n\n<p>After adding the @EnableJpaRepositories to my configuration, I get the following error:</p>\n\n<pre><code>ERROR [org.springframework.web.context.ContextLoader] (ServerService Thread Pool -- 26) Context initialization failed: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'HController': Unsatisfied dependency expressed through field 'userRepository': Error creating bean with name 'userRepository': Initialization of bean failed; nested exception is java.lang.AbstractMethodError; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userRepository': Initialization of bean failed; nested exception is java.lang.AbstractMethodError\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:569)\n    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:88)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:349)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1214)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:543)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:482)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:776)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:861)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:541)\n    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:444)\n    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:326)\n    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:107)\n    at io.undertow.servlet.core.ApplicationListeners.contextInitialized(ApplicationListeners.java:187)\n    at io.undertow.servlet.core.DeploymentManagerImpl$1.call(DeploymentManagerImpl.java:205)\n    at io.undertow.servlet.core.DeploymentManagerImpl$1.call(DeploymentManagerImpl.java:174)\n    at io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:42)\n    at io.undertow.servlet.core.ContextClassLoaderSetupAction$1.call(ContextClassLoaderSetupAction.java:43)\n    at org.wildfly.extension.undertow.security.SecurityContextThreadSetupAction.lambda$create$0(SecurityContextThreadSetupAction.java:105)\n    at org.wildfly.extension.undertow.security.SecurityContextThreadSetupAction$$Lambda$895/773328607.call(Unknown Source)\n    at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1508)\n    at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction$$Lambda$896/1742198405.call(Unknown Source)\n    at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1508)\n    at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction$$Lambda$896/1742198405.call(Unknown Source)\n    at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1508)\n    at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction$$Lambda$896/1742198405.call(Unknown Source)\n    at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1508)\n    at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction$$Lambda$896/1742198405.call(Unknown Source)\n    at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1508)\n    at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction$$Lambda$896/1742198405.call(Unknown Source)\n    at io.undertow.servlet.core.DeploymentManagerImpl.deploy(DeploymentManagerImpl.java:239)\n    at org.wildfly.extension.undertow.deployment.UndertowDeploymentService.startContext(UndertowDeploymentService.java:99)\n    at org.wildfly.extension.undertow.deployment.UndertowDeploymentService$1.run(UndertowDeploymentService.java:81)\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\n    at org.jboss.threads.JBossThread.run(JBossThread.java:320)\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userRepository': Initialization of bean failed; nested exception is java.lang.AbstractMethodError\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:553)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:482)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)\n    at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:207)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1214)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1054)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1019)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:566)\n    ... 41 more\nCaused by: java.lang.AbstractMethodError\n    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:99)\n    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:302)\n    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:129)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1481)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1226)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:543)\n    ... 51 more\n</code></pre>\n"},{"tags":["java","linux","tomcat","crash","suse"],"comments":[{"owner":{"account_id":3439841,"reputation":14084,"user_id":2882051,"display_name":"chengpohi"},"score":0,"creation_date":1437103270,"post_id":31467569,"comment_id":50901747,"body_markdown":"Have you checked your os log?","body":"Have you checked your os log?"}],"answers":[{"comments":[{"owner":{"account_id":8219634,"reputation":2222,"user_id":6498687,"display_name":"Sarath S Menon"},"score":0,"creation_date":1593097106,"post_id":31468208,"comment_id":110666257,"body_markdown":"The voiceinitiate.com link is broken","body":"The voiceinitiate.com link is broken"},{"owner":{"account_id":1460087,"reputation":351,"user_id":1374644,"accept_rate":0,"display_name":"susenj"},"score":0,"creation_date":1623410286,"post_id":31468208,"comment_id":120077616,"body_markdown":"The https://weblogs.java.net/blog/kohsuke/archive/2009/02/crash_course_on.html link is broken too.","body":"The <a href=\"https://weblogs.java.net/blog/kohsuke/archive/2009/02/crash_course_on.html\" rel=\"nofollow noreferrer\">weblogs.java.net/blog/kohsuke/archive/2009/02/&hellip;</a> link is broken too."}],"tags":[],"owner":{"account_id":1282323,"reputation":4466,"user_id":1236153,"accept_rate":86,"display_name":"underdog"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1437105742,"creation_date":1437105742,"answer_id":31468208,"question_id":31467569,"body_markdown":"Just a guess Tomcat may be crashing due to insufficient memory. You can use [Eclipse Memory Analysis][1] tool to analyse the heap dump generated.\r\nThe Eclipse Memory Analyzer is a fast and feature-rich Java heap analyzer that helps you find memory leaks and reduce memory consumption.\r\n\r\nCheck [tomcat][2] logs thoroughly. Check [here][3], [here][4] &amp; [here][5].\r\n\r\n\r\n  [1]: http://www.eclipse.org/mat/\r\n  [2]: http://voiceinitiate.com/tag/the-following-web-applications-have-an-unusually-large-number-of-active-sessions-axl-please-collect-all-of-the-tomcat-logs-for-root-cause-analysis-file-get-activelog-tomcatlogs/\r\n  [3]: https://stackoverflow.com/questions/10087032/how-to-analyze-jvm-crash-file-hs-err-pidxyz-log\r\n  [4]: https://weblogs.java.net/blog/kohsuke/archive/2009/02/crash_course_on.html\r\n  [5]: https://www.mulesoft.com/tcat/tomcat-memory","title":"How to diagnose the root cause of tomcat crash","body":"<p>Just a guess Tomcat may be crashing due to insufficient memory. You can use <a href=\"http://www.eclipse.org/mat/\" rel=\"nofollow noreferrer\">Eclipse Memory Analysis</a> tool to analyse the heap dump generated.\nThe Eclipse Memory Analyzer is a fast and feature-rich Java heap analyzer that helps you find memory leaks and reduce memory consumption.</p>\n\n<p>Check <a href=\"http://voiceinitiate.com/tag/the-following-web-applications-have-an-unusually-large-number-of-active-sessions-axl-please-collect-all-of-the-tomcat-logs-for-root-cause-analysis-file-get-activelog-tomcatlogs/\" rel=\"nofollow noreferrer\">tomcat</a> logs thoroughly. Check <a href=\"https://stackoverflow.com/questions/10087032/how-to-analyze-jvm-crash-file-hs-err-pidxyz-log\">here</a>, <a href=\"https://weblogs.java.net/blog/kohsuke/archive/2009/02/crash_course_on.html\" rel=\"nofollow noreferrer\">here</a> &amp; <a href=\"https://www.mulesoft.com/tcat/tomcat-memory\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}],"owner":{"account_id":1386628,"reputation":8709,"user_id":1318528,"accept_rate":74,"display_name":"Jacky"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9493,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692824520,"creation_date":1437100142,"question_id":31467569,"body_markdown":"I have a Tomcat server 7.0.54 running on SUSE Linux 11 SP3, which occasionally crashes.\r\n\r\nI checked the `catalina.out` file and found the log `INFO: Stopping service Catalina` which looked like Tomcat got an abnormal shutdown signal. There is no error log before this Stopping log, which is very weird. \r\n\r\nIt does not look like a JVM crash because it has a process: `pause -&gt; stop -&gt; destroy`. But it seems not to have been shut down by the `shutdown.sh` through the shutdown port normally. Because it would have an important log `org.apache.catalina.core.StandardServer await` if it had been shut down by the shutdown port. \r\n\r\nThis may have two reasons:\r\n\r\n 1. `System.exit` was executed. I checked the code and there is nothing of that kind. \r\n 2. It got a system signal, e.g. `SIGHUP`. \r\n\r\nHow to find which signal it got and which program sent the signal?\r\n\r\nAny suggestion/comments to find the root cause are appreciated. Thanks","title":"How to diagnose the root cause of tomcat crash","body":"<p>I have a Tomcat server 7.0.54 running on SUSE Linux 11 SP3, which occasionally crashes.</p>\n<p>I checked the <code>catalina.out</code> file and found the log <code>INFO: Stopping service Catalina</code> which looked like Tomcat got an abnormal shutdown signal. There is no error log before this Stopping log, which is very weird.</p>\n<p>It does not look like a JVM crash because it has a process: <code>pause -&gt; stop -&gt; destroy</code>. But it seems not to have been shut down by the <code>shutdown.sh</code> through the shutdown port normally. Because it would have an important log <code>org.apache.catalina.core.StandardServer await</code> if it had been shut down by the shutdown port.</p>\n<p>This may have two reasons:</p>\n<ol>\n<li><code>System.exit</code> was executed. I checked the code and there is nothing of that kind.</li>\n<li>It got a system signal, e.g. <code>SIGHUP</code>.</li>\n</ol>\n<p>How to find which signal it got and which program sent the signal?</p>\n<p>Any suggestion/comments to find the root cause are appreciated. Thanks</p>\n"},{"tags":["java","random","cryptography","secure-random"],"comments":[{"owner":{"account_id":4392464,"reputation":5898,"user_id":3580433,"accept_rate":89,"display_name":"Ebrahim Ghasemi"},"score":0,"creation_date":1572034019,"post_id":58304220,"comment_id":103448703,"body_markdown":"[Temporary Comment] : Dear Maarten, sorry to bother you here. Do you have any experience with chip cards that does not return any ATR? Do you have any idea which type of cards does WaveLight use in its products?","body":"[Temporary Comment] : Dear Maarten, sorry to bother you here. Do you have any experience with chip cards that does not return any ATR? Do you have any idea which type of cards does WaveLight use in its products?"},{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":1,"creation_date":1572044103,"post_id":58304220,"comment_id":103451485,"body_markdown":"14443 type B cards don&#39;t return an ATR or ATS, and work on 13.something MHz. Proximity cards should not be picked up. I think the original MiFare cards also don&#39;t use an ATS, but nowadays they generally supply a compatibility layer. No, I don&#39;t know what cards or IC&#39;s they use.","body":"14443 type B cards don&#39;t return an ATR or ATS, and work on 13.something MHz. Proximity cards should not be picked up. I think the original MiFare cards also don&#39;t use an ATS, but nowadays they generally supply a compatibility layer. No, I don&#39;t know what cards or IC&#39;s they use."},{"owner":{"account_id":4392464,"reputation":5898,"user_id":3580433,"accept_rate":89,"display_name":"Ebrahim Ghasemi"},"score":0,"creation_date":1572067367,"post_id":58304220,"comment_id":103454279,"body_markdown":"Thank you dear Marteen for the information. BTW the cards are contact.","body":"Thank you dear Marteen for the information. BTW the cards are contact."},{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":0,"creation_date":1572108071,"post_id":58304220,"comment_id":103461919,"body_markdown":"Are you sure that there is no ATR in that case? Because it makes more sense that there are just no  *historical bytes* within the ATR.","body":"Are you sure that there is no ATR in that case? Because it makes more sense that there are just no  <i>historical bytes</i> within the ATR."},{"owner":{"account_id":4392464,"reputation":5898,"user_id":3580433,"accept_rate":89,"display_name":"Ebrahim Ghasemi"},"score":0,"creation_date":1572699723,"post_id":58304220,"comment_id":103644491,"body_markdown":"Yes dear Maarten, I&#39;m sure that there is no ATR. I guess I found something related. As soon as I get assured about it, I&#39;ll share the data with you.","body":"Yes dear Maarten, I&#39;m sure that there is no ATR. I guess I found something related. As soon as I get assured about it, I&#39;ll share the data with you."}],"answers":[{"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1570626118,"post_id":58304415,"comment_id":102971637,"body_markdown":"@MaartenBodewes hmm? I would read the same property I guess...","body":"@MaartenBodewes hmm? I would read the same property I guess..."},{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":0,"creation_date":1570626682,"post_id":58304415,"comment_id":102971976,"body_markdown":"Yeah, that just dawned on me, and it is probably better than to use `SecureRandom.toString()` which - at least for the OpenJDK implementation - also returns the algorithm in the string.","body":"Yeah, that just dawned on me, and it is probably better than to use <code>SecureRandom.toString()</code> which - at least for the OpenJDK implementation - also returns the algorithm in the string."},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1570626859,"post_id":58304415,"comment_id":102972078,"body_markdown":"@MaartenBodewes then you might want to just use `SecureRandom.getAlgorithm()`, although it can return `unknown` and probably a lot more.","body":"@MaartenBodewes then you might want to just use <code>SecureRandom.getAlgorithm()</code>, although it can return <code>unknown</code> and probably a lot more."},{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":0,"creation_date":1570628479,"post_id":58304415,"comment_id":102973086,"body_markdown":"Now that one *does not* work, it just returns `&quot;DRBG&quot;` instead of the actual algorithm (as I hoped it would, to be honest).","body":"Now that one <i>does not</i> work, it just returns <code>&quot;DRBG&quot;</code> instead of the actual algorithm (as I hoped it would, to be honest)."},{"owner":{"account_id":899926,"reputation":5112,"user_id":1820553,"display_name":"kelalaka"},"score":0,"creation_date":1570638235,"post_id":58304415,"comment_id":102978470,"body_markdown":"I think the default should be highlighted.","body":"I think the default should be highlighted."}],"tags":[],"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"comment_count":5,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1570625046,"creation_date":1570625046,"answer_id":58304415,"question_id":58304220,"body_markdown":"From the [JEP](http://openjdk.java.net/jeps/273)\r\n\r\n&gt; A new [SecureRandomParameters](https://docs.oracle.com/javase/9/docs/api/java/security/SecureRandomParameters.html) interface so that additional input can be\r\n&gt; provided to the new SecureRandom methods.\r\n\r\nFrom there we get to [DrbgParameters](https://docs.oracle.com/javase/9/docs/api/java/security/DrbgParameters.html) which says\r\n\r\n&gt; **Implementation Note:**\r\n&gt; \r\n&gt; The following notes apply to the &quot;DRBG&quot; implementation in the SUN\r\n&gt; provider of the JDK reference implementation. This implementation\r\n&gt; supports the Hash_DRBG and HMAC_DRBG mechanisms with DRBG algorithm\r\n&gt; SHA-224, SHA-512/224, SHA-256, SHA-512/256, SHA-384 and SHA-512, and\r\n&gt; CTR_DRBG (both using derivation function and not using derivation\r\n&gt; function) with DRBG algorithm AES-128, AES-192 and AES-256.\r\n&gt; \r\n&gt; **The mechanism name and DRBG algorithm name are determined by the\r\n&gt; security property securerandom.drbg.config**. The default choice is\r\n&gt; Hash_DRBG with SHA-256.\r\n\r\nSo, implementation dependent and with default impl, switchable only with a property.","title":"What actual algorithm is used by SecureRandom.getInstance(&quot;DRBG&quot;)?","body":"<p>From the <a href=\"http://openjdk.java.net/jeps/273\" rel=\"nofollow noreferrer\">JEP</a></p>\n\n<blockquote>\n  <p>A new <a href=\"https://docs.oracle.com/javase/9/docs/api/java/security/SecureRandomParameters.html\" rel=\"nofollow noreferrer\">SecureRandomParameters</a> interface so that additional input can be\n  provided to the new SecureRandom methods.</p>\n</blockquote>\n\n<p>From there we get to <a href=\"https://docs.oracle.com/javase/9/docs/api/java/security/DrbgParameters.html\" rel=\"nofollow noreferrer\">DrbgParameters</a> which says</p>\n\n<blockquote>\n  <p><strong>Implementation Note:</strong></p>\n  \n  <p>The following notes apply to the \"DRBG\" implementation in the SUN\n  provider of the JDK reference implementation. This implementation\n  supports the Hash_DRBG and HMAC_DRBG mechanisms with DRBG algorithm\n  SHA-224, SHA-512/224, SHA-256, SHA-512/256, SHA-384 and SHA-512, and\n  CTR_DRBG (both using derivation function and not using derivation\n  function) with DRBG algorithm AES-128, AES-192 and AES-256.</p>\n  \n  <p><strong>The mechanism name and DRBG algorithm name are determined by the\n  security property securerandom.drbg.config</strong>. The default choice is\n  Hash_DRBG with SHA-256.</p>\n</blockquote>\n\n<p>So, implementation dependent and with default impl, switchable only with a property.</p>\n"},{"comments":[{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":0,"creation_date":1570625806,"post_id":58304500,"comment_id":102971465,"body_markdown":"That seems to work fine, thanks. Could you indicate if there are any requirements / access conditions for being able to configure the exact algorithm? I&#39;m flabbergasted that it works (although Java has a lot of these static configuration options that can be set from anywhere in the code).","body":"That seems to work fine, thanks. Could you indicate if there are any requirements / access conditions for being able to configure the exact algorithm? I&#39;m flabbergasted that it works (although Java has a lot of these static configuration options that can be set from anywhere in the code)."},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":1,"creation_date":1570626252,"post_id":58304500,"comment_id":102971717,"body_markdown":"@MaartenBodewes you can do a lot when there&#39;s no `SecurityManager` around, like the old trick of [enabling strong encryption](https://stackoverflow.com/questions/42159690/why-are-the-jce-unlimited-strength-not-included-by-default) with reflection (which seems to be unnecessary these days).","body":"@MaartenBodewes you can do a lot when there&#39;s no <code>SecurityManager</code> around, like the old trick of <a href=\"https://stackoverflow.com/questions/42159690/why-are-the-jce-unlimited-strength-not-included-by-default\">enabling strong encryption</a> with reflection (which seems to be unnecessary these days)."}],"tags":[],"owner":{"account_id":2052160,"reputation":2825,"user_id":1830916,"display_name":"locus2k"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1570628693,"creation_date":1570625278,"answer_id":58304500,"question_id":58304220,"body_markdown":"Use Security.SetProperties before calling SecureRandom:\r\n\r\n    Security.setProperty(&quot;securerandom.drbg.config&quot;, &quot;Hash_DRBG&quot;);\r\n    \r\n    SecureRandom random = SecureRandom.getInstance(&quot;DRBG&quot;);\r\n\r\nFor more information this article provides some in-depth info:\r\nhttps://metebalci.com/blog/everything-about-javas-securerandom/","title":"What actual algorithm is used by SecureRandom.getInstance(&quot;DRBG&quot;)?","body":"<p>Use Security.SetProperties before calling SecureRandom:</p>\n\n<pre><code>Security.setProperty(\"securerandom.drbg.config\", \"Hash_DRBG\");\n\nSecureRandom random = SecureRandom.getInstance(\"DRBG\");\n</code></pre>\n\n<p>For more information this article provides some in-depth info:\n<a href=\"https://metebalci.com/blog/everything-about-javas-securerandom/\" rel=\"nofollow noreferrer\">https://metebalci.com/blog/everything-about-javas-securerandom/</a></p>\n"}],"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1608,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":58304415,"answer_count":2,"score":2,"last_activity_date":1692824313,"creation_date":1570624388,"question_id":58304220,"body_markdown":"Java 9 (JSR 379) [introduces the NIST DRBG&#39;s](http://cr.openjdk.java.net/~iris/se/9/java-se-9-pr-spec-01/java-se-9-spec.html#j273) as specified in [*JEP 273: DRBG-Based SecureRandom Implementations*](http://openjdk.java.net/jeps/273). \r\n\r\nHowever, the NIST document [SP 800-90Ar1](https://nvlpubs.nist.gov/nistpubs/SpecialPublications/NIST.SP.800-90Ar1.pdf) (*NIST Special Publication 800-90A Revision 1: Recommendation for Random Number Generation Using Deterministic Random Bit  Generators*) specifies a total of three mechanisms:\r\n\r\n&gt; Implement the three DRBG mechanisms (Hash_DRBG, HMAC_DRBG, CTR_DRBG) in 800-90Ar1 (on all platforms).\r\n\r\n\r\nHowever, although you might expect that we would now have three methods to create such secure random algorithms:\r\n\r\n1. `SecureRandom.getInstance(&quot;Hash_DRBG&quot;)`\r\n2. `SecureRandom.getInstance(&quot;HMAC_DRBG&quot;)`\r\n3. `SecureRandom.getInstance(&quot;CTR_DRBG&quot;)`\r\n\r\n… possibly with various configuration parameters, we seem to have only one:\r\n\r\n1. `SecureRandom.getInstance(&quot;DRBG&quot;)`\r\n\r\nSo how can the developer configure and detect which one of the algorithms is used?\r\n","title":"What actual algorithm is used by SecureRandom.getInstance(&quot;DRBG&quot;)?","body":"<p>Java 9 (JSR 379) <a href=\"http://cr.openjdk.java.net/%7Eiris/se/9/java-se-9-pr-spec-01/java-se-9-spec.html#j273\" rel=\"nofollow noreferrer\">introduces the NIST DRBG's</a> as specified in <a href=\"http://openjdk.java.net/jeps/273\" rel=\"nofollow noreferrer\"><em>JEP 273: DRBG-Based SecureRandom Implementations</em></a>.</p>\n<p>However, the NIST document <a href=\"https://nvlpubs.nist.gov/nistpubs/SpecialPublications/NIST.SP.800-90Ar1.pdf\" rel=\"nofollow noreferrer\">SP 800-90Ar1</a> (<em>NIST Special Publication 800-90A Revision 1: Recommendation for Random Number Generation Using Deterministic Random Bit  Generators</em>) specifies a total of three mechanisms:</p>\n<blockquote>\n<p>Implement the three DRBG mechanisms (Hash_DRBG, HMAC_DRBG, CTR_DRBG) in 800-90Ar1 (on all platforms).</p>\n</blockquote>\n<p>However, although you might expect that we would now have three methods to create such secure random algorithms:</p>\n<ol>\n<li><code>SecureRandom.getInstance(&quot;Hash_DRBG&quot;)</code></li>\n<li><code>SecureRandom.getInstance(&quot;HMAC_DRBG&quot;)</code></li>\n<li><code>SecureRandom.getInstance(&quot;CTR_DRBG&quot;)</code></li>\n</ol>\n<p>… possibly with various configuration parameters, we seem to have only one:</p>\n<ol>\n<li><code>SecureRandom.getInstance(&quot;DRBG&quot;)</code></li>\n</ol>\n<p>So how can the developer configure and detect which one of the algorithms is used?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9905,"page":229,"page_size":100}
