{"items":[{"tags":["java","mongodb","spring-boot","spring-data","javers"],"answers":[{"tags":[],"owner":{"account_id":5338007,"reputation":3416,"user_id":4256260,"display_name":"Bartek Walacik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645345364,"creation_date":1645345364,"answer_id":71192560,"question_id":70372187,"body_markdown":"That&#39;s a good point. In case of Mongo, Javers covers only the methods from the `CrudRepository` interface. See https://github.com/javers/javers/blob/master/javers-spring/src/main/java/org/javers/spring/auditable/aspect/springdata/JaversSpringDataAuditableRepositoryAspect.java\r\n\r\nLooks like `MongoRepository#insert()` should be also covered by the aspect. \r\n\r\nFeel free to contribute a PR to javers, I will merge it. If you want to discuss the design first - please create a discussion here https://github.com/javers/javers/discussions\r\n\r\n","title":"Javers not recognizing insert as an initial change","body":"<p>That's a good point. In case of Mongo, Javers covers only the methods from the <code>CrudRepository</code> interface. See <a href=\"https://github.com/javers/javers/blob/master/javers-spring/src/main/java/org/javers/spring/auditable/aspect/springdata/JaversSpringDataAuditableRepositoryAspect.java\" rel=\"nofollow noreferrer\">https://github.com/javers/javers/blob/master/javers-spring/src/main/java/org/javers/spring/auditable/aspect/springdata/JaversSpringDataAuditableRepositoryAspect.java</a></p>\n<p>Looks like <code>MongoRepository#insert()</code> should be also covered by the aspect.</p>\n<p>Feel free to contribute a PR to javers, I will merge it. If you want to discuss the design first - please create a discussion here <a href=\"https://github.com/javers/javers/discussions\" rel=\"nofollow noreferrer\">https://github.com/javers/javers/discussions</a></p>\n"}],"owner":{"account_id":7969666,"reputation":48,"user_id":6014813,"display_name":"Peter Davison"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":233,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1645345364,"creation_date":1639617211,"question_id":70372187,"body_markdown":"Working on a SpringBoot application using MongoDB as a persistent store.\r\nUsing spring data and MongoRepository to access MongoDB.\r\nUsing Javers to provide auditting.\r\nIf I use mongoRepository.**insert**(document) followed later by a mongoRepository.**save**(document) and then use javers to query the changes to that document, javers does not detect the differences between the object inserted and the object saved.  It reports only a single change as if the **save** call was the original object persisted.\r\n\r\nIf I replace the **insert** call with a **save** and let spring data handle whether or not to insert or update, javers reports the expected change.\r\n\r\nExample:\r\nConsider the following: \r\n\r\n```\r\n@JaversSpringDataAuditable\r\npublic interface SomeDocumentRepository extends MongoRepository&lt;SomeDocument, String&gt; {\r\n}\r\n\r\n@Builder\r\n@Data\r\n@Document(collection = &quot;someDocuments&quot;)\r\npublic class SomeDocument {\r\n    @Id\r\n    private String id;\r\n    private String status;\r\n}\r\n\r\n@Service\r\npublic class SomeDocumentService {\r\n    @Autowired\r\n    private SomeDocumentRepository someDocumentRepository;\r\n\r\n    public SomeDocument insert(SomeDocument doc) {\r\n        return someDocumentRepository.insert(doc);\r\n    }\r\n\r\n    public SomeDocument save(SomeDocument doc) {\r\n        return someDocumentRepository.save(doc);\r\n    }\r\n}\r\n\r\n@Service\r\npublic class AuditService {\r\n    @Autowired\r\n    private Javers javers;\r\n\r\n    public List&lt;Change&gt; getStatusChangesById(String documentId) {\r\n        JqlQuery query = QueryBuilder\r\n            .byInstanceId(documentId, SomeDocument.class)\r\n            .withChangedProperty(&quot;status&quot;)\r\n            .build();\r\n        return javers.findChanges(query);\r\n    }\r\n}\r\n```\r\n\r\nIf I call my service as follows:\r\n```\r\nvar doc = SomeDocument.builder().status(&quot;new&quot;).build();\r\ndoc = someDocumentService.insert(doc);\r\ndoc.setStatus(&quot;change1&quot;);\r\ndoc = someDocumentService.save(doc);\r\n```\r\nand then call the audit service to get the changes:\r\n```\r\nauditService.getStatusChangesById(doc.getId());\r\n```\r\nI get a single change with &quot;left&quot; set to a blank and &quot;right&quot; set to &quot;change1&quot;.\r\n\r\nIf I call &quot;save&quot; instead of &quot;insert&quot; like:\r\n```\r\nvar doc = SomeDocument.builder().status(&quot;new&quot;).build();\r\ndoc = someDocumentService.save(doc);\r\ndoc.setStatus(&quot;change1&quot;);\r\ndoc = someDocumentService.save(doc);\r\n```\r\nand then call the audit service to get the changes I get 2 changes, the first being the most recent change with &quot;left&quot; set to &quot;new&quot;, and &quot;right&quot; set to &quot;change1&quot; and a second change with &quot;left&quot; set to &quot;&quot; and &quot;right&quot; set to &quot;new&quot;.\r\n\r\nIs this a bug?","title":"Javers not recognizing insert as an initial change","body":"<p>Working on a SpringBoot application using MongoDB as a persistent store.\nUsing spring data and MongoRepository to access MongoDB.\nUsing Javers to provide auditting.\nIf I use mongoRepository.<strong>insert</strong>(document) followed later by a mongoRepository.<strong>save</strong>(document) and then use javers to query the changes to that document, javers does not detect the differences between the object inserted and the object saved.  It reports only a single change as if the <strong>save</strong> call was the original object persisted.</p>\n<p>If I replace the <strong>insert</strong> call with a <strong>save</strong> and let spring data handle whether or not to insert or update, javers reports the expected change.</p>\n<p>Example:\nConsider the following:</p>\n<pre><code>@JaversSpringDataAuditable\npublic interface SomeDocumentRepository extends MongoRepository&lt;SomeDocument, String&gt; {\n}\n\n@Builder\n@Data\n@Document(collection = &quot;someDocuments&quot;)\npublic class SomeDocument {\n    @Id\n    private String id;\n    private String status;\n}\n\n@Service\npublic class SomeDocumentService {\n    @Autowired\n    private SomeDocumentRepository someDocumentRepository;\n\n    public SomeDocument insert(SomeDocument doc) {\n        return someDocumentRepository.insert(doc);\n    }\n\n    public SomeDocument save(SomeDocument doc) {\n        return someDocumentRepository.save(doc);\n    }\n}\n\n@Service\npublic class AuditService {\n    @Autowired\n    private Javers javers;\n\n    public List&lt;Change&gt; getStatusChangesById(String documentId) {\n        JqlQuery query = QueryBuilder\n            .byInstanceId(documentId, SomeDocument.class)\n            .withChangedProperty(&quot;status&quot;)\n            .build();\n        return javers.findChanges(query);\n    }\n}\n</code></pre>\n<p>If I call my service as follows:</p>\n<pre><code>var doc = SomeDocument.builder().status(&quot;new&quot;).build();\ndoc = someDocumentService.insert(doc);\ndoc.setStatus(&quot;change1&quot;);\ndoc = someDocumentService.save(doc);\n</code></pre>\n<p>and then call the audit service to get the changes:</p>\n<pre><code>auditService.getStatusChangesById(doc.getId());\n</code></pre>\n<p>I get a single change with &quot;left&quot; set to a blank and &quot;right&quot; set to &quot;change1&quot;.</p>\n<p>If I call &quot;save&quot; instead of &quot;insert&quot; like:</p>\n<pre><code>var doc = SomeDocument.builder().status(&quot;new&quot;).build();\ndoc = someDocumentService.save(doc);\ndoc.setStatus(&quot;change1&quot;);\ndoc = someDocumentService.save(doc);\n</code></pre>\n<p>and then call the audit service to get the changes I get 2 changes, the first being the most recent change with &quot;left&quot; set to &quot;new&quot;, and &quot;right&quot; set to &quot;change1&quot; and a second change with &quot;left&quot; set to &quot;&quot; and &quot;right&quot; set to &quot;new&quot;.</p>\n<p>Is this a bug?</p>\n"},{"tags":["java","multithreading","spring-boot","resttemplate"],"comments":[{"owner":{"account_id":9763630,"reputation":16595,"user_id":7237884,"display_name":"Panagiotis Bougioukos"},"score":0,"creation_date":1645363813,"post_id":71192513,"comment_id":125846471,"body_markdown":"have you tried removing PoolingHttpClientConnectionManager ? I have suspicion that this connection pool seems to be able to cause such error.","body":"have you tried removing PoolingHttpClientConnectionManager ? I have suspicion that this connection pool seems to be able to cause such error."},{"owner":{"account_id":1417830,"reputation":505,"user_id":1343062,"accept_rate":40,"display_name":"supriyo_basak"},"score":0,"creation_date":1645420144,"post_id":71192513,"comment_id":125857896,"body_markdown":"@PanagiotisBougioukos, I tried it and it&#39;s still giving me the ConnectionClosedException repeatedly.","body":"@PanagiotisBougioukos, I tried it and it&#39;s still giving me the ConnectionClosedException repeatedly."}],"owner":{"account_id":1417830,"reputation":505,"user_id":1343062,"accept_rate":40,"display_name":"supriyo_basak"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1033,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1645344912,"creation_date":1645344912,"question_id":71192513,"body_markdown":"I am having a problem in my Spring Boot application where I am using a RestTemplate which is autowired for making POST calls to a REST service. The code where I am initializing the REstTemplate bean is as follows:\r\n\r\n    @Bean(name = &quot;template&quot;)\r\n\tpublic RestTemplate restTemplate(RestTemplateBuilder builder) throws NoSuchAlgorithmException, KeyManagementException {\r\n\r\n\t\tTrustManager[] trustAllCerts = new TrustManager[] {\r\n\t\t\t\tnew X509TrustManager() {\r\n\t\t\t\t\tpublic java.security.cert.X509Certificate[] getAcceptedIssuers() {\r\n\t\t\t\t\t\treturn new X509Certificate[0];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpublic void checkClientTrusted(\r\n\t\t\t\t\t\t\tjava.security.cert.X509Certificate[] certs, String authType) {\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpublic void checkServerTrusted(\r\n\t\t\t\t\t\t\tjava.security.cert.X509Certificate[] certs, String authType) {\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t};  \r\n\t\tSSLContext sslContext = SSLContext.getInstance(&quot;SSL&quot;);\r\n\t\tsslContext.init(null, trustAllCerts, new java.security.SecureRandom()); \r\n\t\t\r\n\t\tHostnameVerifier hostnameVerifier = SSLConnectionSocketFactory.getDefaultHostnameVerifier();\r\n\t\t\r\n\t\t// Conn Pool\r\n\t\t\t\tPoolingHttpClientConnectionManager cm = new PoolingHttpClientConnectionManager(\r\n\t\t\t\t\t\tRegistryBuilder.&lt;ConnectionSocketFactory&gt;create()\r\n\t\t\t\t\t\t.register(&quot;http&quot;, PlainConnectionSocketFactory.getSocketFactory())\r\n\t\t\t\t\t\t.register(&quot;https&quot;, new SSLConnectionSocketFactory(sslContext, hostnameVerifier))\r\n\t\t\t\t\t\t.build());\r\n\t\t\t\tcm.setMaxTotal(Integer.MAX_VALUE);\r\n\t\t\t\tcm.setDefaultMaxPerRoute(50);\r\n\t\t\t\t\r\n\t\tCloseableHttpClient httpClient = HttpClients.custom()\r\n\t\t\t\t.setSSLContext(sslContext)\r\n\t\t\t\t.setConnectionManager(cm)\r\n\t\t\t\t.setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE)\r\n\t\t\t\t.build();   \r\n\t\tHttpComponentsClientHttpRequestFactory customRequestFactory = new HttpComponentsClientHttpRequestFactory();\r\n\t\tcustomRequestFactory.setHttpClient(httpClient);\r\n\t\treturn builder.requestFactory(() -&gt; customRequestFactory).build();  \r\n\t}\r\n\r\nThe RestTemplate is then autowired:\r\n\r\n    @Autowired\r\n\t@Qualifier(&quot;template&quot;)\r\n\tprivate RestTemplate restTemplate;\r\n\r\nAnd the RestTemplate is used thus:\r\n\r\n    restResponse = restTemplate.postForObject(targetUrl, obj, CustomRestResponse.class);\r\n\r\nI am deploying the application to PCF where it is running with 6 instances. It&#39;s then giving me an error like this:\r\n\r\n    org.springframework.web.client.RestClientException: Error while extracting response for type [class com.test.model.CustomRestResponse] and content type [application/json;charset=UTF-8]; nested exception is org.apache.http.ConnectionClosedException: Premature end of chunk coded message body: closing chunk expected\r\n\r\nTo replicate the issue in my local environment, I created a multithreaded application which will spawn multiple threads and call the REST service simultaneously:\r\n\r\n    ExecutorService service = Executors.newFixedThreadPool(10);\r\n\t\tIntStream.range(0, 100).forEach(i -&gt; service.submit(new RestTemplateTesterRunnable(i)));\r\n\r\nAnd I was able to get the exception in my local system as well (Note that I don&#39;t have this multithreading code in the actual application. This is just for replicating the problem in my local since I can&#39;t run 6 instances automatically). The full stacktrace is as follows:\r\n\r\n    org.springframework.web.client.RestClientException: Error while extracting response for type [class com.test.model.CustomRestResponse] and content type [application/json;charset=UTF-8]; nested exception is org.apache.http.ConnectionClosedException: Premature end of chunk coded message body: closing chunk expected\r\n\tat org.springframework.web.client.HttpMessageConverterExtractor.extractData(HttpMessageConverterExtractor.java:119)\r\n\tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:744)\r\n\tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:677)\r\n\tat org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:421)\r\n\tat com.test.RestTemplateTester$RestTemplateTesterRunnable.run(RestTemplateTester.java:237)\r\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n\tat java.lang.Thread.run(Thread.java:745)\r\n    Caused by: org.apache.http.ConnectionClosedException: Premature end of chunk coded message body: closing chunk expected\r\n\tat org.apache.http.impl.io.ChunkedInputStream.getChunkSize(ChunkedInputStream.java:263)\r\n\tat org.apache.http.impl.io.ChunkedInputStream.nextChunk(ChunkedInputStream.java:222)\r\n\tat org.apache.http.impl.io.ChunkedInputStream.read(ChunkedInputStream.java:183)\r\n\tat org.apache.http.impl.io.ChunkedInputStream.read(ChunkedInputStream.java:210)\r\n\tat org.apache.http.impl.io.ChunkedInputStream.close(ChunkedInputStream.java:312)\r\n\tat org.apache.http.impl.execchain.ResponseEntityProxy.streamClosed(ResponseEntityProxy.java:142)\r\n\tat org.apache.http.conn.EofSensorInputStream.checkClose(EofSensorInputStream.java:228)\r\n\tat org.apache.http.conn.EofSensorInputStream.close(EofSensorInputStream.java:172)\r\n\tat java.io.PushbackInputStream.close(PushbackInputStream.java:379)\r\n\tat com.fasterxml.jackson.core.json.UTF8StreamJsonParser._closeInput(UTF8StreamJsonParser.java:252)\r\n\tat com.fasterxml.jackson.core.base.ParserBase.close(ParserBase.java:369)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4210)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3258)\r\n\tat org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.readJavaType(AbstractJackson2HttpMessageConverter.java:239)\r\n\tat org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.read(AbstractJackson2HttpMessageConverter.java:227)\r\n\tat org.springframework.web.client.HttpMessageConverterExtractor.extractData(HttpMessageConverterExtractor.java:104)\r\n\t... 9 more\r\n\r\nHowever, I am not being able to solve the problem. I referred this question:\r\n\r\nhttps://stackoverflow.com/questions/31151990/how-to-efficiently-use-resttemplate-in-multithreading-application\r\n\r\nand this one:\r\n\r\nhttps://stackoverflow.com/questions/21242812/how-to-use-resttemplate-efficiently-in-multithreaded-environment\r\n\r\nand in both of them, people are saying that RestTemplate is thread-safe and there shouldn&#39;t be a problem in using it in a multithreaded environment. However, what I am seeing is that this exception is still happening for me. I thought at first that this was happening due to my use of the CloseableHttpClient, as is given by this post:\r\n\r\nhttps://stackoverflow.com/questions/57851029/connectionclosedexception-premature-end-of-chunk-coded-message-body-with-apache\r\n\r\nHowever, as I am not directly using the client, which is internally used by Spring Boot, I didn&#39;t have much to do about it. But I looked into the internal working of the RestTemplate&#39;s postForObject() method in any case, which led me to this method:\r\n\r\n    @Nullable\r\n\tprotected &lt;T&gt; T doExecute(URI url, @Nullable HttpMethod method, @Nullable RequestCallback requestCallback,\r\n\t\t\t@Nullable ResponseExtractor&lt;T&gt; responseExtractor) throws RestClientException {\r\n\r\n\t\tAssert.notNull(url, &quot;URI is required&quot;);\r\n\t\tAssert.notNull(method, &quot;HttpMethod is required&quot;);\r\n\t\tClientHttpResponse response = null;\r\n\t\ttry {\r\n\t\t\tClientHttpRequest request = createRequest(url, method);\r\n\t\t\tif (requestCallback != null) {\r\n\t\t\t\trequestCallback.doWithRequest(request);\r\n\t\t\t}\r\n\t\t\tresponse = request.execute();\r\n\t\t\thandleResponse(url, method, response);\r\n\t\t\treturn (responseExtractor != null ? responseExtractor.extractData(response) : null);\r\n\t\t}\r\n\t\tcatch (IOException ex) {\r\n\t\t\tString resource = url.toString();\r\n\t\t\tString query = url.getRawQuery();\r\n\t\t\tresource = (query != null ? resource.substring(0, resource.indexOf(&#39;?&#39;)) : resource);\r\n\t\t\tthrow new ResourceAccessException(&quot;I/O error on &quot; + method.name() +\r\n\t\t\t\t\t&quot; request for \\&quot;&quot; + resource + &quot;\\&quot;: &quot; + ex.getMessage(), ex);\r\n\t\t}\r\n\t\tfinally {\r\n\t\t\tif (response != null) {\r\n\t\t\t\tresponse.close();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\nI am seeing that before returning, the response object is being closed, as was being told in the previous StackOverflow post I linked. Can this be the reason for the ConnectionClosedException in a multithreaded environment? If so, what is the solution? I tried to use evictIdleConnections() as given by the Javadocs:\r\n\r\nhttps://hc.apache.org/httpcomponents-client-4.5.x/current/httpclient/apidocs/org/apache/http/impl/client/HttpClientBuilder.html#evictIdleConnections(long,%20java.util.concurrent.TimeUnit)\r\n\r\nSo the code became:\r\n\r\n    CloseableHttpClient httpClient = HttpClients.custom()\r\n\t\t\t\t.setSSLContext(sslContext)\r\n\t\t\t\t.setConnectionManager(cm)\r\n\t\t\t\t.setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE)\r\n\t\t\t\t.evictIdleConnections(10, TimeUnit.MILLISECONDS)\r\n\t\t\t\t.build();\r\n\r\nHowever, this didn&#39;t help. I also saw that some people are using org.apache.commons.httpclient.MultiThreadedHttpConnectionManager, but I found that this is a deprecated connection manager, and the HttpComponentsClientHttpRequestFactory does not support it. Nevertheless, I somehow used it also, but with no results. Please hellp me in getting the actual reason for this exception, and how to resolve it.","title":"How to use RestTemplate in Spring Boot application in multithreaded environment?","body":"<p>I am having a problem in my Spring Boot application where I am using a RestTemplate which is autowired for making POST calls to a REST service. The code where I am initializing the REstTemplate bean is as follows:</p>\n<pre><code>@Bean(name = &quot;template&quot;)\npublic RestTemplate restTemplate(RestTemplateBuilder builder) throws NoSuchAlgorithmException, KeyManagementException {\n\n    TrustManager[] trustAllCerts = new TrustManager[] {\n            new X509TrustManager() {\n                public java.security.cert.X509Certificate[] getAcceptedIssuers() {\n                    return new X509Certificate[0];\n                }\n                public void checkClientTrusted(\n                        java.security.cert.X509Certificate[] certs, String authType) {\n                }\n                public void checkServerTrusted(\n                        java.security.cert.X509Certificate[] certs, String authType) {\n                }\n            }\n    };  \n    SSLContext sslContext = SSLContext.getInstance(&quot;SSL&quot;);\n    sslContext.init(null, trustAllCerts, new java.security.SecureRandom()); \n    \n    HostnameVerifier hostnameVerifier = SSLConnectionSocketFactory.getDefaultHostnameVerifier();\n    \n    // Conn Pool\n            PoolingHttpClientConnectionManager cm = new PoolingHttpClientConnectionManager(\n                    RegistryBuilder.&lt;ConnectionSocketFactory&gt;create()\n                    .register(&quot;http&quot;, PlainConnectionSocketFactory.getSocketFactory())\n                    .register(&quot;https&quot;, new SSLConnectionSocketFactory(sslContext, hostnameVerifier))\n                    .build());\n            cm.setMaxTotal(Integer.MAX_VALUE);\n            cm.setDefaultMaxPerRoute(50);\n            \n    CloseableHttpClient httpClient = HttpClients.custom()\n            .setSSLContext(sslContext)\n            .setConnectionManager(cm)\n            .setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE)\n            .build();   \n    HttpComponentsClientHttpRequestFactory customRequestFactory = new HttpComponentsClientHttpRequestFactory();\n    customRequestFactory.setHttpClient(httpClient);\n    return builder.requestFactory(() -&gt; customRequestFactory).build();  \n}\n</code></pre>\n<p>The RestTemplate is then autowired:</p>\n<pre><code>@Autowired\n@Qualifier(&quot;template&quot;)\nprivate RestTemplate restTemplate;\n</code></pre>\n<p>And the RestTemplate is used thus:</p>\n<pre><code>restResponse = restTemplate.postForObject(targetUrl, obj, CustomRestResponse.class);\n</code></pre>\n<p>I am deploying the application to PCF where it is running with 6 instances. It's then giving me an error like this:</p>\n<pre><code>org.springframework.web.client.RestClientException: Error while extracting response for type [class com.test.model.CustomRestResponse] and content type [application/json;charset=UTF-8]; nested exception is org.apache.http.ConnectionClosedException: Premature end of chunk coded message body: closing chunk expected\n</code></pre>\n<p>To replicate the issue in my local environment, I created a multithreaded application which will spawn multiple threads and call the REST service simultaneously:</p>\n<pre><code>ExecutorService service = Executors.newFixedThreadPool(10);\n    IntStream.range(0, 100).forEach(i -&gt; service.submit(new RestTemplateTesterRunnable(i)));\n</code></pre>\n<p>And I was able to get the exception in my local system as well (Note that I don't have this multithreading code in the actual application. This is just for replicating the problem in my local since I can't run 6 instances automatically). The full stacktrace is as follows:</p>\n<pre><code>org.springframework.web.client.RestClientException: Error while extracting response for type [class com.test.model.CustomRestResponse] and content type [application/json;charset=UTF-8]; nested exception is org.apache.http.ConnectionClosedException: Premature end of chunk coded message body: closing chunk expected\nat org.springframework.web.client.HttpMessageConverterExtractor.extractData(HttpMessageConverterExtractor.java:119)\nat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:744)\nat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:677)\nat org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:421)\nat com.test.RestTemplateTester$RestTemplateTesterRunnable.run(RestTemplateTester.java:237)\nat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\nat java.util.concurrent.FutureTask.run(FutureTask.java:266)\nat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\nat java.lang.Thread.run(Thread.java:745)\nCaused by: org.apache.http.ConnectionClosedException: Premature end of chunk coded message body: closing chunk expected\nat org.apache.http.impl.io.ChunkedInputStream.getChunkSize(ChunkedInputStream.java:263)\nat org.apache.http.impl.io.ChunkedInputStream.nextChunk(ChunkedInputStream.java:222)\nat org.apache.http.impl.io.ChunkedInputStream.read(ChunkedInputStream.java:183)\nat org.apache.http.impl.io.ChunkedInputStream.read(ChunkedInputStream.java:210)\nat org.apache.http.impl.io.ChunkedInputStream.close(ChunkedInputStream.java:312)\nat org.apache.http.impl.execchain.ResponseEntityProxy.streamClosed(ResponseEntityProxy.java:142)\nat org.apache.http.conn.EofSensorInputStream.checkClose(EofSensorInputStream.java:228)\nat org.apache.http.conn.EofSensorInputStream.close(EofSensorInputStream.java:172)\nat java.io.PushbackInputStream.close(PushbackInputStream.java:379)\nat com.fasterxml.jackson.core.json.UTF8StreamJsonParser._closeInput(UTF8StreamJsonParser.java:252)\nat com.fasterxml.jackson.core.base.ParserBase.close(ParserBase.java:369)\nat com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4210)\nat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3258)\nat org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.readJavaType(AbstractJackson2HttpMessageConverter.java:239)\nat org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.read(AbstractJackson2HttpMessageConverter.java:227)\nat org.springframework.web.client.HttpMessageConverterExtractor.extractData(HttpMessageConverterExtractor.java:104)\n... 9 more\n</code></pre>\n<p>However, I am not being able to solve the problem. I referred this question:</p>\n<p><a href=\"https://stackoverflow.com/questions/31151990/how-to-efficiently-use-resttemplate-in-multithreading-application\">How to efficiently use RestTemplate in multithreading application?</a></p>\n<p>and this one:</p>\n<p><a href=\"https://stackoverflow.com/questions/21242812/how-to-use-resttemplate-efficiently-in-multithreaded-environment\">How to use RestTemplate efficiently in Multithreaded environment?</a></p>\n<p>and in both of them, people are saying that RestTemplate is thread-safe and there shouldn't be a problem in using it in a multithreaded environment. However, what I am seeing is that this exception is still happening for me. I thought at first that this was happening due to my use of the CloseableHttpClient, as is given by this post:</p>\n<p><a href=\"https://stackoverflow.com/questions/57851029/connectionclosedexception-premature-end-of-chunk-coded-message-body-with-apache\">ConnectionClosedException: Premature end of chunk coded message body with apache hhtpclient 4.5.5</a></p>\n<p>However, as I am not directly using the client, which is internally used by Spring Boot, I didn't have much to do about it. But I looked into the internal working of the RestTemplate's postForObject() method in any case, which led me to this method:</p>\n<pre><code>@Nullable\nprotected &lt;T&gt; T doExecute(URI url, @Nullable HttpMethod method, @Nullable RequestCallback requestCallback,\n        @Nullable ResponseExtractor&lt;T&gt; responseExtractor) throws RestClientException {\n\n    Assert.notNull(url, &quot;URI is required&quot;);\n    Assert.notNull(method, &quot;HttpMethod is required&quot;);\n    ClientHttpResponse response = null;\n    try {\n        ClientHttpRequest request = createRequest(url, method);\n        if (requestCallback != null) {\n            requestCallback.doWithRequest(request);\n        }\n        response = request.execute();\n        handleResponse(url, method, response);\n        return (responseExtractor != null ? responseExtractor.extractData(response) : null);\n    }\n    catch (IOException ex) {\n        String resource = url.toString();\n        String query = url.getRawQuery();\n        resource = (query != null ? resource.substring(0, resource.indexOf('?')) : resource);\n        throw new ResourceAccessException(&quot;I/O error on &quot; + method.name() +\n                &quot; request for \\&quot;&quot; + resource + &quot;\\&quot;: &quot; + ex.getMessage(), ex);\n    }\n    finally {\n        if (response != null) {\n            response.close();\n        }\n    }\n}\n</code></pre>\n<p>I am seeing that before returning, the response object is being closed, as was being told in the previous StackOverflow post I linked. Can this be the reason for the ConnectionClosedException in a multithreaded environment? If so, what is the solution? I tried to use evictIdleConnections() as given by the Javadocs:</p>\n<p><a href=\"https://hc.apache.org/httpcomponents-client-4.5.x/current/httpclient/apidocs/org/apache/http/impl/client/HttpClientBuilder.html#evictIdleConnections(long,%20java.util.concurrent.TimeUnit)\" rel=\"nofollow noreferrer\">https://hc.apache.org/httpcomponents-client-4.5.x/current/httpclient/apidocs/org/apache/http/impl/client/HttpClientBuilder.html#evictIdleConnections(long,%20java.util.concurrent.TimeUnit)</a></p>\n<p>So the code became:</p>\n<pre><code>CloseableHttpClient httpClient = HttpClients.custom()\n            .setSSLContext(sslContext)\n            .setConnectionManager(cm)\n            .setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE)\n            .evictIdleConnections(10, TimeUnit.MILLISECONDS)\n            .build();\n</code></pre>\n<p>However, this didn't help. I also saw that some people are using org.apache.commons.httpclient.MultiThreadedHttpConnectionManager, but I found that this is a deprecated connection manager, and the HttpComponentsClientHttpRequestFactory does not support it. Nevertheless, I somehow used it also, but with no results. Please hellp me in getting the actual reason for this exception, and how to resolve it.</p>\n"},{"tags":["javascript","java","android","node.js"],"comments":[{"owner":{"account_id":13419629,"reputation":439,"user_id":9682891,"display_name":"MohammadHossein Shafiei"},"score":0,"creation_date":1645344143,"post_id":71192404,"comment_id":125842487,"body_markdown":"do you mean you want to write your entire app with websockets???","body":"do you mean you want to write your entire app with websockets???"},{"owner":{"account_id":13419629,"reputation":439,"user_id":9682891,"display_name":"MohammadHossein Shafiei"},"score":1,"creation_date":1645344279,"post_id":71192404,"comment_id":125842509,"body_markdown":"Yest, because I think its much faster and could provide me real-time communication .","body":"Yest, because I think its much faster and could provide me real-time communication ."}],"answers":[{"tags":[],"owner":{"account_id":13419629,"reputation":439,"user_id":9682891,"display_name":"MohammadHossein Shafiei"},"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1645344567,"creation_date":1645344567,"answer_id":71192476,"question_id":71192404,"body_markdown":"Using socket.io as the main communication system is not a good choice because the communication system is always open.\r\nnow imagine 1000 people want a data trough sockets, it will slowdown your server and sometimes cause server crashes.","title":"What happens if I use socket.io allover the app?","body":"<p>Using socket.io as the main communication system is not a good choice because the communication system is always open.\nnow imagine 1000 people want a data trough sockets, it will slowdown your server and sometimes cause server crashes.</p>\n"}],"owner":{"account_id":13419629,"reputation":439,"user_id":9682891,"display_name":"MohammadHossein Shafiei"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1645579976,"accepted_answer_id":71192476,"answer_count":1,"score":0,"last_activity_date":1645344567,"creation_date":1645343891,"question_id":71192404,"body_markdown":"I am writing an android app using Java and for the back-end I chose socket.io in node js.\r\nI just want to ask what happens if I socket.io instead of rest-api?","title":"What happens if I use socket.io allover the app?","body":"<p>I am writing an android app using Java and for the back-end I chose socket.io in node js.\nI just want to ask what happens if I socket.io instead of rest-api?</p>\n"},{"tags":["java","email","jsf"],"comments":[{"owner":{"account_id":15596976,"reputation":809,"user_id":11252174,"display_name":"Demir"},"score":0,"creation_date":1645302865,"post_id":71188942,"comment_id":125836793,"body_markdown":"Does this answer your question? [Could not connect to SMTP host: smtp.gmail.com, port: 587; nested exception is: java.net.ConnectException: Connection timed out: connect](https://stackoverflow.com/questions/38608089/could-not-connect-to-smtp-host-smtp-gmail-com-port-587-nested-exception-is)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/38608089/could-not-connect-to-smtp-host-smtp-gmail-com-port-587-nested-exception-is\">Could not connect to SMTP host: smtp.gmail.com, port: 587; nested exception is: java.net.ConnectException: Connection timed out: connect</a>"},{"owner":{"account_id":22785404,"reputation":3,"user_id":16940604,"display_name":"Hiba Rida"},"score":0,"creation_date":1645302942,"post_id":71188942,"comment_id":125836810,"body_markdown":"no i have different problem","body":"no i have different problem"},{"owner":{"account_id":16509210,"reputation":564,"user_id":11928455,"display_name":"Amimul Ehsan Rahi"},"score":0,"creation_date":1645304656,"post_id":71188942,"comment_id":125837152,"body_markdown":"Don&#39;t forget to check your firewall. Firewall sometimes prevents from sending email.","body":"Don&#39;t forget to check your firewall. Firewall sometimes prevents from sending email."},{"owner":{"account_id":22785404,"reputation":3,"user_id":16940604,"display_name":"Hiba Rida"},"score":0,"creation_date":1645304775,"post_id":71188942,"comment_id":125837174,"body_markdown":"I disabled it but it still giving me this","body":"I disabled it but it still giving me this"},{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1645367857,"post_id":71188942,"comment_id":125847491,"body_markdown":"Your system cannot resolve the DNS address for smtp.gmail.com, which means you&#39;re either not connected to the internet, or you&#39;re behind a proxy and your local DNS settings (or DNS server) don&#39;t route to the internet.","body":"Your system cannot resolve the DNS address for smtp.gmail.com, which means you&#39;re either not connected to the internet, or you&#39;re behind a proxy and your local DNS settings (or DNS server) don&#39;t route to the internet."}],"answers":[{"tags":[],"owner":{"account_id":7178839,"reputation":166,"user_id":5483654,"display_name":"Ivan Costa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645326808,"creation_date":1645326808,"answer_id":71191103,"question_id":71188942,"body_markdown":"Try these on command line.\r\n\r\nFor SSL: \r\n\r\n    telnet smtp.gmail.com 465\r\n\r\nFor TLS/STARTTLS: \r\n\r\n    telnet smtp.gmail.com 587\r\n\r\nIf there&#39;s no response its a firewall issue.","title":"Send mail through web application","body":"<p>Try these on command line.</p>\n<p>For SSL:</p>\n<pre><code>telnet smtp.gmail.com 465\n</code></pre>\n<p>For TLS/STARTTLS:</p>\n<pre><code>telnet smtp.gmail.com 587\n</code></pre>\n<p>If there's no response its a firewall issue.</p>\n"}],"owner":{"account_id":22785404,"reputation":3,"user_id":16940604,"display_name":"Hiba Rida"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":129,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1645344430,"creation_date":1645302620,"question_id":71188942,"body_markdown":"I am using the following properties to send mail through web application that use jsf but I am getting an error\r\n\r\nThe properties:\r\n\r\n    String host = &quot;smtp.gmail.com&quot;;\r\n    Properties properties = System.getProperties();\r\n    properties.put(&quot;mail.smtp.host&quot;, host);\r\n    properties.put(&quot;mail.smtp.starttls.enable&quot;,&quot;true&quot;);\r\n    properties.put(&quot;mail.smtp.socketFactory.port&quot;, &quot;25&quot;);    \r\n    properties.put(&quot;mail.smtp.socketFactory.class&quot;, &quot;javax.net.ssl.SSLSocketFactory&quot;);    \r\n    properties.put(&quot;mail.smtp.auth&quot;, &quot;true&quot;);    \r\n    properties.put(&quot;mail.smtp.port&quot;, &quot;25&quot;);   \r\n    properties.put(&quot;mail.smtp.ssl.trust&quot;, &quot;*&quot;);\r\n\r\n    Session session = Session.getInstance(properties, new javax.mail.Authenticator() {\r\n\r\n        protected PasswordAuthentication getPasswordAuthentication() {\r\n\r\n            return new PasswordAuthentication(&quot;email@gmail.com&quot;, &quot;password&quot;);\r\n\r\n        }\r\n\r\nThe error:\r\n\r\n    javax.mail.MessagingException: Unknown SMTP host: smtp.gmail.com;\r\n      nested exception is:\r\n    \tjava.net.UnknownHostException: smtp.gmail.com","title":"Send mail through web application","body":"<p>I am using the following properties to send mail through web application that use jsf but I am getting an error</p>\n<p>The properties:</p>\n<pre><code>String host = &quot;smtp.gmail.com&quot;;\nProperties properties = System.getProperties();\nproperties.put(&quot;mail.smtp.host&quot;, host);\nproperties.put(&quot;mail.smtp.starttls.enable&quot;,&quot;true&quot;);\nproperties.put(&quot;mail.smtp.socketFactory.port&quot;, &quot;25&quot;);    \nproperties.put(&quot;mail.smtp.socketFactory.class&quot;, &quot;javax.net.ssl.SSLSocketFactory&quot;);    \nproperties.put(&quot;mail.smtp.auth&quot;, &quot;true&quot;);    \nproperties.put(&quot;mail.smtp.port&quot;, &quot;25&quot;);   \nproperties.put(&quot;mail.smtp.ssl.trust&quot;, &quot;*&quot;);\n\nSession session = Session.getInstance(properties, new javax.mail.Authenticator() {\n\n    protected PasswordAuthentication getPasswordAuthentication() {\n\n        return new PasswordAuthentication(&quot;email@gmail.com&quot;, &quot;password&quot;);\n\n    }\n</code></pre>\n<p>The error:</p>\n<pre><code>javax.mail.MessagingException: Unknown SMTP host: smtp.gmail.com;\n  nested exception is:\n    java.net.UnknownHostException: smtp.gmail.com\n</code></pre>\n"},{"tags":["java","javers"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1641563066,"post_id":70531556,"comment_id":124842759,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":5338007,"reputation":3416,"user_id":4256260,"display_name":"Bartek Walacik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645344227,"creation_date":1645344227,"answer_id":71192437,"question_id":70531556,"body_markdown":"That is an interesting case. There is no such flag but it looks like an easy thing to implement. Feel free to open a PR in https://github.com/javers/javers","title":"Disable javers audit in application.properties","body":"<p>That is an interesting case. There is no such flag but it looks like an easy thing to implement. Feel free to open a PR in <a href=\"https://github.com/javers/javers\" rel=\"nofollow noreferrer\">https://github.com/javers/javers</a></p>\n"}],"owner":{"account_id":14930126,"reputation":3,"user_id":10779748,"display_name":"25Schmeckles"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":210,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1645344227,"creation_date":1640866590,"question_id":70531556,"body_markdown":"We are using Javers in our spring boot application and have several application.properties profiles, e.g. for different environments/local testing. In some profiles we would like to disable javers or if that&#39;s not possible, not persist the audit by using the default h2 repository.\r\n\r\nAll our JpaRepositories are annotated with @JaversSpringDataAuditable. If we try to remove the mongoDB database connection from our application.properties, we get a com.mongodb.MongoTimeoutException.\r\n\r\nDoes anyone know if there is a flag available in the application.properties that could either disable the audit or disable auditing into our mongodb and instead use the default h2 repository?","title":"Disable javers audit in application.properties","body":"<p>We are using Javers in our spring boot application and have several application.properties profiles, e.g. for different environments/local testing. In some profiles we would like to disable javers or if that's not possible, not persist the audit by using the default h2 repository.</p>\n<p>All our JpaRepositories are annotated with @JaversSpringDataAuditable. If we try to remove the mongoDB database connection from our application.properties, we get a com.mongodb.MongoTimeoutException.</p>\n<p>Does anyone know if there is a flag available in the application.properties that could either disable the audit or disable auditing into our mongodb and instead use the default h2 repository?</p>\n"},{"tags":["java","maven-2","servlets","pom.xml"],"comments":[{"owner":{"account_id":3313963,"reputation":11003,"user_id":2786733,"accept_rate":95,"display_name":"Andrejs"},"score":0,"creation_date":1458322506,"post_id":1370414,"comment_id":59825889,"body_markdown":"For some version --&gt; http://mvnrepository.com/artifact/javax.servlet/javax.servlet-api/3.1.0 . On that link you will find XML snippets that allow to add it as a dependency. You can choose another version, of course, just take note of &quot;Note: There is a new version for this artifact&quot;","body":"For some version --&gt; <a href=\"http://mvnrepository.com/artifact/javax.servlet/javax.servlet-api/3.1.0\" rel=\"nofollow noreferrer\">mvnrepository.com/artifact/javax.servlet/javax.servlet-api/&hellip;</a> . On that link you will find XML snippets that allow to add it as a dependency. You can choose another version, of course, just take note of &quot;Note: There is a new version for this artifact&quot;"}],"answers":[{"tags":[],"owner":{"account_id":2785,"reputation":76174,"user_id":3916,"accept_rate":100,"display_name":"Vineet Reynolds"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1251933798,"creation_date":1251933798,"answer_id":1370670,"question_id":1370414,"body_markdown":"It depends on which version of the servlet API you are using.\r\n\r\nThe [javax.servlet][1] artifact will provide jars for all of the servlet API versions.\r\n\r\n  [1]: http://mvnrepository.com/artifact/javax.servlet/servlet-api\r\n  [2]: http://www.ibiblio.org/maven/servletapi/","title":"how to add the servlet api to my pom.xml","body":"<p>It depends on which version of the servlet API you are using.</p>\n\n<p>The <a href=\"http://mvnrepository.com/artifact/javax.servlet/servlet-api\" rel=\"nofollow noreferrer\">javax.servlet</a> artifact will provide jars for all of the servlet API versions.</p>\n"},{"tags":[],"owner":{"account_id":15843,"reputation":13885,"user_id":33889,"accept_rate":82,"display_name":"Michael Rutherfurd"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1251956275,"creation_date":1251934308,"answer_id":1370706,"question_id":1370414,"body_markdown":"We use \r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;javax&lt;/groupId&gt;\r\n        &lt;artifactId&gt;j2ee&lt;/artifactId&gt;\r\n        &lt;version&gt;1.4&lt;/version&gt;\r\n        &lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\nbut if you only need the servlet api you might want to use \r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n        &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;\r\n        &lt;version&gt;?&lt;/version&gt;\r\n        &lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n","title":"how to add the servlet api to my pom.xml","body":"<p>We use </p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;javax&lt;/groupId&gt;\n    &lt;artifactId&gt;j2ee&lt;/artifactId&gt;\n    &lt;version&gt;1.4&lt;/version&gt;\n    &lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>but if you only need the servlet api you might want to use </p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n    &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;\n    &lt;version&gt;?&lt;/version&gt;\n    &lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26084,"reputation":26325,"user_id":67598,"accept_rate":79,"display_name":"digitaljoel"},"down_vote_count":0,"up_vote_count":50,"is_accepted":true,"score":50,"last_activity_date":1477493910,"creation_date":1251935074,"answer_id":1370741,"question_id":1370414,"body_markdown":"I believe most web/app servers come bundled with a version of the servlet api, so you won&#39;t want to bundle the api in your .war file.  You will need to find out which version is included with your server, then you can use\r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n        &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;\r\n        &lt;version&gt;${servlet-api-version}&lt;/version&gt;\r\n        &lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\nreplacing servlet-api-version with your version.  You will want to specify the &quot;provided&quot; scope so the api.jar isn&#39;t included in your war file.","title":"how to add the servlet api to my pom.xml","body":"<p>I believe most web/app servers come bundled with a version of the servlet api, so you won't want to bundle the api in your .war file.  You will need to find out which version is included with your server, then you can use</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n    &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;\n    &lt;version&gt;${servlet-api-version}&lt;/version&gt;\n    &lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>replacing servlet-api-version with your version.  You will want to specify the \"provided\" scope so the api.jar isn't included in your war file.</p>\n"},{"tags":[],"owner":{"account_id":1587846,"reputation":29,"user_id":1471804,"display_name":"Rajkumar Singh"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1350702747,"creation_date":1340274654,"answer_id":11136231,"question_id":1370414,"body_markdown":"Scope provided can be used when you dont want to put jar file inside the `WEB-INF/lib` folder instead you are supplying it at runtime either by container or JDK.\r\n\r\n","title":"how to add the servlet api to my pom.xml","body":"<p>Scope provided can be used when you dont want to put jar file inside the <code>WEB-INF/lib</code> folder instead you are supplying it at runtime either by container or JDK.</p>\n"},{"tags":[],"owner":{"account_id":388484,"reputation":5939,"user_id":747456,"accept_rate":43,"display_name":"Neil"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1369900713,"creation_date":1369900713,"answer_id":16830820,"question_id":1370414,"body_markdown":"        &lt;dependency&gt;\r\n            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n            &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;\r\n            &lt;version&gt;2.5&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n","title":"how to add the servlet api to my pom.xml","body":"<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n        &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;\n        &lt;version&gt;2.5&lt;/version&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2308051,"reputation":1368,"user_id":3247198,"accept_rate":33,"display_name":"amgohan"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1455802893,"creation_date":1449126731,"answer_id":34059849,"question_id":1370414,"body_markdown":"For servlet-api 3.1.0, here is the declaration :\r\n\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\r\n    \t&lt;version&gt;3.1.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n","title":"how to add the servlet api to my pom.xml","body":"<p>For servlet-api 3.1.0, here is the declaration :</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n    &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\n    &lt;version&gt;3.1.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645343712,"creation_date":1645289780,"answer_id":71187119,"question_id":1370414,"body_markdown":"# Jakarta EE\r\n\r\nIn recent years, Oracle transferred the Java EE technologies to the [Eclipse Foundation][1]. There the technologies have been renamed to [*Jakarta EE*][2]. So *Java Servlet* is now known as [*Jakarta Servlet*][3]. \r\n\r\nThis name change was done to respect Oracles trademarks. Do a Web search to find many articles and videos discussing this transition. \r\n\r\nThis name change includes changing the package naming of the classes from `javax.*` to `jakarta.*`. This is a breaking change, though updating your project may be as simple as merely changing your `import` statements. But check that any libraries you depend on have versions available using the new naming as well.\r\n\r\n# Servlet 5\r\n\r\nThis transition has brought new versions of the Servlet specification. [Version 5][4] of the spec is the same as [Servlet 4][5] but with the new naming.\r\n\r\nFor the current version, edit your [POM][6] file to use the following Maven dependency. [Check for updates in a Maven repository][7] of your choice in the version numbering.\r\n\r\nYou can deploy web apps built with Servlet 5 to web containers such as Tomcat 10.0.x, Jetty 11.0.x, Glassfish 6, and several more.\r\n\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;jakarta.servlet&lt;/groupId&gt;\r\n    &lt;artifactId&gt;jakarta.servlet-api&lt;/artifactId&gt;\r\n    &lt;version&gt;5.0.0&lt;/version&gt;\r\n    &lt;scope&gt;provided&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\n# Servlet 6\r\n\r\n[Jakarta Servlet 6][8] specification is currently in development, and will contain significant changes. The spec will be finalized later this year 2022.\r\n\r\nSee the [overview page][8], the [product page][9], [project links page][10], and [repository coordinates page][11].\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;jakarta.servlet&lt;/groupId&gt;\r\n    &lt;artifactId&gt;jakarta.servlet-api&lt;/artifactId&gt;\r\n    &lt;version&gt;6.0.0&lt;/version&gt;\r\n    &lt;scope&gt;provided&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Eclipse_Foundation\r\n  [2]: https://jakarta.ee/\r\n  [3]: https://projects.eclipse.org/projects/ee4j.servlet\r\n  [4]: https://jakarta.ee/specifications/servlet/5.0/\r\n  [5]: https://jakarta.ee/specifications/servlet/4.0/\r\n  [6]: https://en.m.wikipedia.org/wiki/Apache_Maven#Project_Object_Model\r\n  [7]: https://mvnrepository.com/artifact/jakarta.servlet/jakarta.servlet-api\r\n  [8]: https://jakarta.ee/specifications/servlet/6.0/\r\n  [9]: https://projects.eclipse.org/projects/ee4j.servlet/releases/6.0\r\n  [10]: https://eclipse-ee4j.github.io/servlet-api/\r\n  [11]: https://search.maven.org/artifact/jakarta.servlet/jakarta.servlet-api/6.0.0/jar","title":"how to add the servlet api to my pom.xml","body":"<h1>Jakarta EE</h1>\n<p>In recent years, Oracle transferred the Java EE technologies to the <a href=\"https://en.wikipedia.org/wiki/Eclipse_Foundation\" rel=\"nofollow noreferrer\">Eclipse Foundation</a>. There the technologies have been renamed to <a href=\"https://jakarta.ee/\" rel=\"nofollow noreferrer\"><em>Jakarta EE</em></a>. So <em>Java Servlet</em> is now known as <a href=\"https://projects.eclipse.org/projects/ee4j.servlet\" rel=\"nofollow noreferrer\"><em>Jakarta Servlet</em></a>.</p>\n<p>This name change was done to respect Oracles trademarks. Do a Web search to find many articles and videos discussing this transition.</p>\n<p>This name change includes changing the package naming of the classes from <code>javax.*</code> to <code>jakarta.*</code>. This is a breaking change, though updating your project may be as simple as merely changing your <code>import</code> statements. But check that any libraries you depend on have versions available using the new naming as well.</p>\n<h1>Servlet 5</h1>\n<p>This transition has brought new versions of the Servlet specification. <a href=\"https://jakarta.ee/specifications/servlet/5.0/\" rel=\"nofollow noreferrer\">Version 5</a> of the spec is the same as <a href=\"https://jakarta.ee/specifications/servlet/4.0/\" rel=\"nofollow noreferrer\">Servlet 4</a> but with the new naming.</p>\n<p>For the current version, edit your <a href=\"https://en.m.wikipedia.org/wiki/Apache_Maven#Project_Object_Model\" rel=\"nofollow noreferrer\">POM</a> file to use the following Maven dependency. <a href=\"https://mvnrepository.com/artifact/jakarta.servlet/jakarta.servlet-api\" rel=\"nofollow noreferrer\">Check for updates in a Maven repository</a> of your choice in the version numbering.</p>\n<p>You can deploy web apps built with Servlet 5 to web containers such as Tomcat 10.0.x, Jetty 11.0.x, Glassfish 6, and several more.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;jakarta.servlet&lt;/groupId&gt;\n    &lt;artifactId&gt;jakarta.servlet-api&lt;/artifactId&gt;\n    &lt;version&gt;5.0.0&lt;/version&gt;\n    &lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<h1>Servlet 6</h1>\n<p><a href=\"https://jakarta.ee/specifications/servlet/6.0/\" rel=\"nofollow noreferrer\">Jakarta Servlet 6</a> specification is currently in development, and will contain significant changes. The spec will be finalized later this year 2022.</p>\n<p>See the <a href=\"https://jakarta.ee/specifications/servlet/6.0/\" rel=\"nofollow noreferrer\">overview page</a>, the <a href=\"https://projects.eclipse.org/projects/ee4j.servlet/releases/6.0\" rel=\"nofollow noreferrer\">product page</a>, <a href=\"https://eclipse-ee4j.github.io/servlet-api/\" rel=\"nofollow noreferrer\">project links page</a>, and <a href=\"https://search.maven.org/artifact/jakarta.servlet/jakarta.servlet-api/6.0.0/jar\" rel=\"nofollow noreferrer\">repository coordinates page</a>.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;jakarta.servlet&lt;/groupId&gt;\n    &lt;artifactId&gt;jakarta.servlet-api&lt;/artifactId&gt;\n    &lt;version&gt;6.0.0&lt;/version&gt;\n    &lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":24717,"reputation":264452,"user_id":63051,"accept_rate":95,"display_name":"flybywire"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72200,"favorite_count":0,"down_vote_count":1,"up_vote_count":43,"accepted_answer_id":1370741,"answer_count":7,"score":42,"last_activity_date":1645343712,"creation_date":1251929386,"question_id":1370414,"body_markdown":"How do I add the servlets API to my project&#39;s pom.xml\r\n\r\nmvnrepository.com has lots of servlet api and similarly named projects, that I don&#39;t know which is the right one. Or are all of them ok?","title":"how to add the servlet api to my pom.xml","body":"<p>How do I add the servlets API to my project's pom.xml</p>\n\n<p>mvnrepository.com has lots of servlet api and similarly named projects, that I don't know which is the right one. Or are all of them ok?</p>\n"},{"tags":["java","android","postgresql","ssl","jdbc"],"comments":[{"owner":{"account_id":3284439,"reputation":39734,"user_id":2764255,"accept_rate":50,"display_name":"Nikos Paraskevopoulos"},"score":1,"creation_date":1645351736,"post_id":71191911,"comment_id":125843847,"body_markdown":"Just a heads-up, irrelevant to the question: if you are using JDBC directly from the client like this, any user who can get hold of you app and is willing to put some minimal effort, can see the connection properties to your database, including the password. BEWARE!","body":"Just a heads-up, irrelevant to the question: if you are using JDBC directly from the client like this, any user who can get hold of you app and is willing to put some minimal effort, can see the connection properties to your database, including the password. BEWARE!"},{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":1,"creation_date":1645360261,"post_id":71191911,"comment_id":125845582,"body_markdown":"If you don&#39;t use the database user and authentication system for limiting access your app should perform database queries not directly to avoid the problem outlined by Nikos: Set-up a web server that takes e.g. HTTP REST calls and for each API performs the appropriate SQL query. This REST interface can then be limited to authenticated users (own user management) and SQL queries that do not harm the database (only those needed by your app).","body":"If you don&#39;t use the database user and authentication system for limiting access your app should perform database queries not directly to avoid the problem outlined by Nikos: Set-up a web server that takes e.g. HTTP REST calls and for each API performs the appropriate SQL query. This REST interface can then be limited to authenticated users (own user management) and SQL queries that do not harm the database (only those needed by your app)."},{"owner":{"account_id":17965330,"reputation":11,"user_id":13055327,"display_name":"Laeriut"},"score":0,"creation_date":1645363477,"post_id":71191911,"comment_id":125846392,"body_markdown":"It will be for a company and the credentials should be prompted at start. App will not be public and only run on some devices from company without other apps. Its only a sample connection here.","body":"It will be for a company and the credentials should be prompted at start. App will not be public and only run on some devices from company without other apps. Its only a sample connection here."},{"owner":{"account_id":1906465,"reputation":39489,"user_id":1721239,"display_name":"jjanes"},"score":0,"creation_date":1645368229,"post_id":71191911,"comment_id":125847567,"body_markdown":"What you need is the root cert.  It sounds like you aren&#39;t using client certs, so no one needs that.  The server cert (and server key) is needed by the server, not by the client.  Where to store it and how to override is described https://jdbc.postgresql.org/documentation/head/ssl-client.html","body":"What you need is the root cert.  It sounds like you aren&#39;t using client certs, so no one needs that.  The server cert (and server key) is needed by the server, not by the client.  Where to store it and how to override is described <a href=\"https://jdbc.postgresql.org/documentation/head/ssl-client.html\" rel=\"nofollow noreferrer\">jdbc.postgresql.org/documentation/head/ssl-client.html</a>"}],"owner":{"account_id":17965330,"reputation":11,"user_id":13055327,"display_name":"Laeriut"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":143,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1645343183,"creation_date":1645339033,"question_id":71191911,"body_markdown":"I am able to connect to postgresql in my Android App using JDBC:\r\n\r\n\r\n```\r\nimport android.Manifest;\r\nimport android.content.pm.PackageManager;\r\nimport android.os.StrictMode;\r\nimport android.support.v4.app.ActivityCompat;\r\nimport android.support.v7.app.AppCompatActivity;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.Toast;\r\n\r\nimport java.sql.Connection;\r\nimport java.sql.DriverManager;\r\nimport java.sql.SQLException;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    private static String ip = &quot;HOST_IP&quot;;\r\n    private static String port = &quot;5432&quot;;\r\n    private static String Classes = &quot;org.postgresql.Driver&quot;;\r\n    private static String database = &quot;DATABASE_NAME&quot;;\r\n    private static String username = &quot;USERNAME&quot;;\r\n    private static String password = &quot;PASSWORD&quot;;\r\n    private static String url = &quot;jdbc:postgresql://&quot;+ip+&quot;:&quot;+port+&quot;/&quot;+database;\r\n\r\n    private Connection connection = null;\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        \r\n    }\r\n\r\n    public void start(View view) {\r\n        ActivityCompat.requestPermissions(this,new String[]{Manifest.permission.INTERNET}, PackageManager.PERMISSION_GRANTED);\r\n      \r\n        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();\r\n        StrictMode.setThreadPolicy(policy);\r\n        try {\r\n            Class.forName(Classes);\r\n            connection = DriverManager.getConnection(url, username,password);\r\n            Toast.makeText(this, &quot;Connected&quot;, Toast.LENGTH_SHORT).show();\r\n        } catch (ClassNotFoundException e) {\r\n            e.printStackTrace();\r\n            Toast.makeText(this, &quot;Class fail&quot;, Toast.LENGTH_SHORT).show();\r\n        } catch (SQLException e) {\r\n            e.printStackTrace();\r\n            Toast.makeText(this, &quot;Connected no&quot;, Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\nIt works fine. But how can i manage it to use SSL (verify-ca)? I have all 3 certificates (server, client and key) in .pem format. Where should i store these certificates and how to use wit JDBC?","title":"JDBC in Android with SSL Certificates","body":"<p>I am able to connect to postgresql in my Android App using JDBC:</p>\n<pre><code>import android.Manifest;\nimport android.content.pm.PackageManager;\nimport android.os.StrictMode;\nimport android.support.v4.app.ActivityCompat;\nimport android.support.v7.app.AppCompatActivity;\nimport android.os.Bundle;\nimport android.view.View;\nimport android.widget.Toast;\n\nimport java.sql.Connection;\nimport java.sql.DriverManager;\nimport java.sql.SQLException;\n\npublic class MainActivity extends AppCompatActivity {\n\n    private static String ip = &quot;HOST_IP&quot;;\n    private static String port = &quot;5432&quot;;\n    private static String Classes = &quot;org.postgresql.Driver&quot;;\n    private static String database = &quot;DATABASE_NAME&quot;;\n    private static String username = &quot;USERNAME&quot;;\n    private static String password = &quot;PASSWORD&quot;;\n    private static String url = &quot;jdbc:postgresql://&quot;+ip+&quot;:&quot;+port+&quot;/&quot;+database;\n\n    private Connection connection = null;\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        \n    }\n\n    public void start(View view) {\n        ActivityCompat.requestPermissions(this,new String[]{Manifest.permission.INTERNET}, PackageManager.PERMISSION_GRANTED);\n      \n        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();\n        StrictMode.setThreadPolicy(policy);\n        try {\n            Class.forName(Classes);\n            connection = DriverManager.getConnection(url, username,password);\n            Toast.makeText(this, &quot;Connected&quot;, Toast.LENGTH_SHORT).show();\n        } catch (ClassNotFoundException e) {\n            e.printStackTrace();\n            Toast.makeText(this, &quot;Class fail&quot;, Toast.LENGTH_SHORT).show();\n        } catch (SQLException e) {\n            e.printStackTrace();\n            Toast.makeText(this, &quot;Connected no&quot;, Toast.LENGTH_SHORT).show();\n        }\n    }\n}\n\n</code></pre>\n<p>It works fine. But how can i manage it to use SSL (verify-ca)? I have all 3 certificates (server, client and key) in .pem format. Where should i store these certificates and how to use wit JDBC?</p>\n"},{"tags":["java","apache-kafka","kafka-consumer-api"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1645343072,"post_id":71177997,"comment_id":125842308,"body_markdown":"Have you tried attaching a rebalance listener?","body":"Have you tried attaching a rebalance listener?"},{"owner":{"account_id":10653764,"reputation":83,"user_id":7843867,"display_name":"Giovanni Ricciardi"},"score":0,"creation_date":1645782786,"post_id":71177997,"comment_id":125967252,"body_markdown":"I&#39;m sorry, I don&#39;t think I understood. What do you mean with &quot;rebalance listener&quot;? &#128517; By the way, thanks for the answer.","body":"I&#39;m sorry, I don&#39;t think I understood. What do you mean with &quot;rebalance listener&quot;?  By the way, thanks for the answer."},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1645804863,"post_id":71177997,"comment_id":125975033,"body_markdown":"When client cannot connect to brokers, the consumer will rebalance, and you can check that happening rather than catch network exceptions. See javadoc https://kafka.apache.org/26/javadoc/org/apache/kafka/clients/consumer/ConsumerRebalanceListener.html","body":"When client cannot connect to brokers, the consumer will rebalance, and you can check that happening rather than catch network exceptions. See javadoc <a href=\"https://kafka.apache.org/26/javadoc/org/apache/kafka/clients/consumer/ConsumerRebalanceListener.html\" rel=\"nofollow noreferrer\">kafka.apache.org/26/javadoc/org/apache/kafka/clients/consume&zwnj;&#8203;r/&hellip;</a>"},{"owner":{"account_id":10653764,"reputation":83,"user_id":7843867,"display_name":"Giovanni Ricciardi"},"score":0,"creation_date":1648044556,"post_id":71177997,"comment_id":126524603,"body_markdown":"Thanks @onecricketeer but I use a consumer whom directly assigns partitions... &#128555;","body":"Thanks @onecricketeer but I use a consumer whom directly assigns partitions... "},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1648073986,"post_id":71177997,"comment_id":126535491,"body_markdown":"So? `onPartitionsAssigned` and `onPartitionsRevoked` should still be able to be invoked... If not, then I typically suggest using an external AdminClient instance thread that can &quot;ping&quot; the cluster to check for a bootstrap connection","body":"So? <code>onPartitionsAssigned</code> and <code>onPartitionsRevoked</code> should still be able to be invoked... If not, then I typically suggest using an external AdminClient instance thread that can &quot;ping&quot; the cluster to check for a bootstrap connection"}],"owner":{"account_id":10653764,"reputation":83,"user_id":7843867,"display_name":"Giovanni Ricciardi"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1508,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1645343036,"creation_date":1645207342,"question_id":71177997,"body_markdown":"I built a Java Kakfa client using the library [Apache Kafka 2.8.0][1]. Sometime, when the Kafka server become unreachable for some reasons, the Kafka log keeps to print over and over again (approximately every 25 seconds), this WARN: \r\n```\r\n[WARN ][NetworkClient] - [[Consumer clientId=ROMLAPA275, groupId=aws-group-internal] Connection to node -1 (serverhost.internal.net/10.95.12.12:9092) could not be established. Broker may not be available.]\r\n[WARN ][NetworkClient$DefaultMetadataUpdater] - [[Consumer clientId=ROMLAPA275, groupId=aws-group-internal] Bootstrap broker serverhost.internal.net:9092 (id: -1 rack: null) disconnected]\r\n```\r\nIt isn&#39;t an Exception, so I cannot catch it. Is there a way to check the connection status in order to do something when the client cannot reach the Kafka server?\r\n\r\nI tried to get something in debug and I found the connect status in this path:\r\n[![enter image description here][2]][2]\r\n\r\nand I think it means there is a wrong status, but I can reach it in debug.\r\n\r\nAnyone know how can I do this?\r\nThanks!\r\n\r\nBelow the code.\r\n\r\nThis is the Kafka client class, as a **Thread**:\r\n```lang-java\r\n    public KafkaConsumerLoop(int id, String groupId, List&lt;String&gt; topics, String serverConfig, Context context, String clientId) {\r\n\t\tthis.topics = topics;\r\n\t\tthis.context = context;\r\n\t\t\r\n\t\tSystem.out.println(&quot;Instanciate Kafka consumer:&quot;);\r\n\t\tSystem.out.println(&quot; - server: &quot;+serverConfig);\r\n\t\tSystem.out.println(&quot; - topic: &quot;+this.topics);\r\n\t\tSystem.out.println(&quot; - clientId: &quot;+clientId);\r\n\t\tSystem.out.println(&quot; - groupId: &quot;+groupId);\r\n\t\t\r\n\t\tProperties props = new Properties();\r\n\t\tprops.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, serverConfig);\r\n\t\tprops.put(ConsumerConfig.GROUP_ID_CONFIG, groupId);\r\n\t\tprops.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class.getName());\r\n\t\tprops.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class.getName());\r\n\t\tprops.put(ConsumerConfig.CLIENT_ID_CONFIG, clientId);\r\n\t\t\r\n\t\tprops.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, &quot;earliest&quot;);\r\n\t\tprops.put(ConsumerConfig.ENABLE_AUTO_COMMIT_CONFIG, false);\r\n\t\t\r\n\t\tthis.consumer = new KafkaConsumer&lt;&gt;(props);\r\n\t\tSystem.out.println(&quot;Kafka consumer instanciated&quot;);\r\n\t}\r\n```\r\n\r\n\r\nI run it in another class:\r\n```lang-java\r\n\t/** Create and run consumer as a Thread*/\r\n\tprivate void consumer() {\r\n\t\tContext context = (Context)ContextStore.get().clone();\r\n\t\tcontext.setProject(this.getProject());\r\n\t\t\r\n\t\tkafkaConsumerLoop = new KafkaConsumerLoop(\r\n\t\t\t\t1, \r\n\t\t\t\tthis.groupId, \r\n\t\t\t\tArrays.asList(topicConsumer), \r\n\t\t\t\tthis.bootstrapServersConfig, \r\n\t\t\t\tcontext,\r\n\t\t\t\tCLIENT_ID);\r\n\t\t\r\n\t\tkafkaConsumerThread = new Thread(kafkaConsumerLoop);\r\n\t\tkafkaConsumerThread.setName(&quot;consumer_thread_&quot;+kafkaConsumerThread.getId());\r\n\t\tkafkaConsumerThread.start();\r\n\t}\r\n```\r\n\r\nas a loop:\r\n```lang-java\r\n\t@Override\r\n\tpublic void run() {\r\n\t\ttry {\r\n\t\t\tthis.consumer.subscribe(topics);\r\n\t\t\tSystem.out.println(&quot;Consumer running on topic: &quot;+topics);\r\n\t\t\tSystem.out.println(&quot;Current consumer thread name - &quot;+Thread.currentThread().getName()\r\n\t\t\t\t\t+&quot; - ID: &quot;+Thread.currentThread().getId());\r\n\t\t\t\r\n\t\t\tConsumerRecords&lt;String, String&gt; records = null;\r\n\t\t\twhile (!closed.get()) {\r\n\t\t\t\trecords = consumer.poll(Duration.ofMillis(100));\r\n\t\t\t\trecords: for (ConsumerRecord&lt;String, String&gt; record : records) {\r\n\r\n\t\t\t\t\tSystem.out.println(&quot;Current consumer thread name - &quot;+Thread.currentThread().getName()\r\n\t\t\t\t\t\t\t+&quot; - ID: &quot;+Thread.currentThread().getId());\r\n\t\t\t\t\tString clientId = &quot;&quot;; \r\n\t\t\t\t\t\r\n\t\t\t\t\t// If the header contains the own producer Client ID, skip this message\r\n\t\t\t\t\tfor (Header header : record.headers())  {\r\n\t\t\t\t\t\tif(header.key().equals(KafkaClientCommunication.CLIENT_ID_HEADER_KEY))\r\n\t\t\t\t\t\t\tif(new String(header.value()).equals(InetAddress.getLocalHost().getHostName())) {\r\n\t\t\t\t\t\t\t\tBmsCommon.LOG.debug(&quot;Received message from us...&quot;);\r\n\t\t\t\t\t\t\t\tcontinue records;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tclientId = new String(header.value());\r\n\t\t\t\t\t\t\t\tSystem.out.println(&quot;Received message from client-id: &quot;+new String(header.value()));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n...\r\n```\r\n\r\nThanks.\r\n\r\n\r\n  [1]: https://mvnrepository.com/artifact/org.apache.kafka/kafka-clients/2.8.0\r\n  [2]: https://i.stack.imgur.com/MrRah.png","title":"Check Kafka client connection status at runtime","body":"<p>I built a Java Kakfa client using the library <a href=\"https://mvnrepository.com/artifact/org.apache.kafka/kafka-clients/2.8.0\" rel=\"nofollow noreferrer\">Apache Kafka 2.8.0</a>. Sometime, when the Kafka server become unreachable for some reasons, the Kafka log keeps to print over and over again (approximately every 25 seconds), this WARN:</p>\n<pre><code>[WARN ][NetworkClient] - [[Consumer clientId=ROMLAPA275, groupId=aws-group-internal] Connection to node -1 (serverhost.internal.net/10.95.12.12:9092) could not be established. Broker may not be available.]\n[WARN ][NetworkClient$DefaultMetadataUpdater] - [[Consumer clientId=ROMLAPA275, groupId=aws-group-internal] Bootstrap broker serverhost.internal.net:9092 (id: -1 rack: null) disconnected]\n</code></pre>\n<p>It isn't an Exception, so I cannot catch it. Is there a way to check the connection status in order to do something when the client cannot reach the Kafka server?</p>\n<p>I tried to get something in debug and I found the connect status in this path:\n<a href=\"https://i.stack.imgur.com/MrRah.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MrRah.png\" alt=\"enter image description here\" /></a></p>\n<p>and I think it means there is a wrong status, but I can reach it in debug.</p>\n<p>Anyone know how can I do this?\nThanks!</p>\n<p>Below the code.</p>\n<p>This is the Kafka client class, as a <strong>Thread</strong>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public KafkaConsumerLoop(int id, String groupId, List&lt;String&gt; topics, String serverConfig, Context context, String clientId) {\n        this.topics = topics;\n        this.context = context;\n        \n        System.out.println(&quot;Instanciate Kafka consumer:&quot;);\n        System.out.println(&quot; - server: &quot;+serverConfig);\n        System.out.println(&quot; - topic: &quot;+this.topics);\n        System.out.println(&quot; - clientId: &quot;+clientId);\n        System.out.println(&quot; - groupId: &quot;+groupId);\n        \n        Properties props = new Properties();\n        props.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, serverConfig);\n        props.put(ConsumerConfig.GROUP_ID_CONFIG, groupId);\n        props.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class.getName());\n        props.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class.getName());\n        props.put(ConsumerConfig.CLIENT_ID_CONFIG, clientId);\n        \n        props.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, &quot;earliest&quot;);\n        props.put(ConsumerConfig.ENABLE_AUTO_COMMIT_CONFIG, false);\n        \n        this.consumer = new KafkaConsumer&lt;&gt;(props);\n        System.out.println(&quot;Kafka consumer instanciated&quot;);\n    }\n</code></pre>\n<p>I run it in another class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    /** Create and run consumer as a Thread*/\n    private void consumer() {\n        Context context = (Context)ContextStore.get().clone();\n        context.setProject(this.getProject());\n        \n        kafkaConsumerLoop = new KafkaConsumerLoop(\n                1, \n                this.groupId, \n                Arrays.asList(topicConsumer), \n                this.bootstrapServersConfig, \n                context,\n                CLIENT_ID);\n        \n        kafkaConsumerThread = new Thread(kafkaConsumerLoop);\n        kafkaConsumerThread.setName(&quot;consumer_thread_&quot;+kafkaConsumerThread.getId());\n        kafkaConsumerThread.start();\n    }\n</code></pre>\n<p>as a loop:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Override\n    public void run() {\n        try {\n            this.consumer.subscribe(topics);\n            System.out.println(&quot;Consumer running on topic: &quot;+topics);\n            System.out.println(&quot;Current consumer thread name - &quot;+Thread.currentThread().getName()\n                    +&quot; - ID: &quot;+Thread.currentThread().getId());\n            \n            ConsumerRecords&lt;String, String&gt; records = null;\n            while (!closed.get()) {\n                records = consumer.poll(Duration.ofMillis(100));\n                records: for (ConsumerRecord&lt;String, String&gt; record : records) {\n\n                    System.out.println(&quot;Current consumer thread name - &quot;+Thread.currentThread().getName()\n                            +&quot; - ID: &quot;+Thread.currentThread().getId());\n                    String clientId = &quot;&quot;; \n                    \n                    // If the header contains the own producer Client ID, skip this message\n                    for (Header header : record.headers())  {\n                        if(header.key().equals(KafkaClientCommunication.CLIENT_ID_HEADER_KEY))\n                            if(new String(header.value()).equals(InetAddress.getLocalHost().getHostName())) {\n                                BmsCommon.LOG.debug(&quot;Received message from us...&quot;);\n                                continue records;\n                            } else {\n                                clientId = new String(header.value());\n                                System.out.println(&quot;Received message from client-id: &quot;+new String(header.value()));\n                            }\n                    }\n...\n</code></pre>\n<p>Thanks.</p>\n"},{"tags":["java","android","android-studio","retrofit2"],"comments":[{"owner":{"account_id":21192804,"reputation":1215,"user_id":15584964,"display_name":"RaBaKa 78"},"score":1,"creation_date":1645232831,"post_id":71181494,"comment_id":125824559,"body_markdown":"Can&#39;t you create multiple retrofit client","body":"Can&#39;t you create multiple retrofit client"},{"owner":{"account_id":24305940,"reputation":3,"user_id":18248680,"display_name":"AuMobileTools"},"score":0,"creation_date":1645233085,"post_id":71181494,"comment_id":125824587,"body_markdown":"It doesn&#39;t make sense to write all the possibilities one by one. The number of base urls can change constantly. so I have to find a parametric solution.","body":"It doesn&#39;t make sense to write all the possibilities one by one. The number of base urls can change constantly. so I have to find a parametric solution."},{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":0,"creation_date":1645242806,"post_id":71181494,"comment_id":125825398,"body_markdown":"@AuMobileTools He didn&#39;t mean write N classes.  He meant write a function that takes the base url as a parameter and creates a new RetrofitClient instance for that new url when you need it.  There is no other way to do it, you can&#39;t have a mutable base url-  the entire idea of the base url is it never changes.","body":"@AuMobileTools He didn&#39;t mean write N classes.  He meant write a function that takes the base url as a parameter and creates a new RetrofitClient instance for that new url when you need it.  There is no other way to do it, you can&#39;t have a mutable base url-  the entire idea of the base url is it never changes."}],"answers":[{"tags":[],"owner":{"account_id":11405697,"reputation":79,"user_id":8361220,"display_name":"neyogiry"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645276965,"creation_date":1645243072,"answer_id":71182041,"question_id":71181494,"body_markdown":"You can use a dynamic URL in your application during runtime. Retrofit2 introduced the `@Url` annotation that allows us to pass a complete URL for an endpoint:\r\n\r\n    @GET\r\n    public Call&lt;ResponseBody&gt; profilePicture(@Url String url);\r\n\r\n**EDITED**\r\n\r\nYou should create a new Retrofit instance when you want to use a new base URL. \r\n\r\n    public class ServiceGenerator {  \r\n        public static String apiBaseUrl = &quot;http://futurestud.io/api&quot;;\r\n        private static Retrofit retrofit;\r\n    \r\n        private static Retrofit.Builder builder =\r\n                new Retrofit.Builder()\r\n                        .addConverterFactory(GsonConverterFactory.create())\r\n                        .baseUrl(apiBaseUrl);\r\n    \r\n        private static OkHttpClient.Builder httpClient =\r\n                new OkHttpClient.Builder();\r\n    \r\n        // No need to instantiate this class.\r\n        private ServiceGenerator() {\r\n        }\r\n    \r\n        public static void changeApiBaseUrl(String newApiBaseUrl) {\r\n            apiBaseUrl = newApiBaseUrl;\r\n    \r\n            builder = new Retrofit.Builder()\r\n                            .addConverterFactory(GsonConverterFactory.create())\r\n                            .baseUrl(apiBaseUrl);\r\n        }\r\n    \r\n        public static &lt;S&gt; S createService(Class&lt;S&gt; serviceClass, AccessToken token) {\r\n            String authToken = token.getTokenType().concat(token.getAccessToken());\r\n            return createService(serviceClass, authToken);\r\n        }\r\n    \r\n        // more methods\r\n        // ...\r\n    }\r\n\r\nhttps://futurestud.io/tutorials/retrofit-2-how-to-change-api-base-url-at-runtime-2","title":"I want to work with multiple base url in retrofit2","body":"<p>You can use a dynamic URL in your application during runtime. Retrofit2 introduced the <code>@Url</code> annotation that allows us to pass a complete URL for an endpoint:</p>\n<pre><code>@GET\npublic Call&lt;ResponseBody&gt; profilePicture(@Url String url);\n</code></pre>\n<p><strong>EDITED</strong></p>\n<p>You should create a new Retrofit instance when you want to use a new base URL.</p>\n<pre><code>public class ServiceGenerator {  \n    public static String apiBaseUrl = &quot;http://futurestud.io/api&quot;;\n    private static Retrofit retrofit;\n\n    private static Retrofit.Builder builder =\n            new Retrofit.Builder()\n                    .addConverterFactory(GsonConverterFactory.create())\n                    .baseUrl(apiBaseUrl);\n\n    private static OkHttpClient.Builder httpClient =\n            new OkHttpClient.Builder();\n\n    // No need to instantiate this class.\n    private ServiceGenerator() {\n    }\n\n    public static void changeApiBaseUrl(String newApiBaseUrl) {\n        apiBaseUrl = newApiBaseUrl;\n\n        builder = new Retrofit.Builder()\n                        .addConverterFactory(GsonConverterFactory.create())\n                        .baseUrl(apiBaseUrl);\n    }\n\n    public static &lt;S&gt; S createService(Class&lt;S&gt; serviceClass, AccessToken token) {\n        String authToken = token.getTokenType().concat(token.getAccessToken());\n        return createService(serviceClass, authToken);\n    }\n\n    // more methods\n    // ...\n}\n</code></pre>\n<p><a href=\"https://futurestud.io/tutorials/retrofit-2-how-to-change-api-base-url-at-runtime-2\" rel=\"nofollow noreferrer\">https://futurestud.io/tutorials/retrofit-2-how-to-change-api-base-url-at-runtime-2</a></p>\n"},{"tags":[],"owner":{"account_id":8016842,"reputation":327,"user_id":6046829,"display_name":"AmirMohamamd"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645341992,"creation_date":1645341992,"answer_id":71192180,"question_id":71181494,"body_markdown":"I used SharedPreferences to handle this problem:\r\n\r\n    @Singleton\r\n    @Provides\r\n    suspend fun getBaseUrl(preferencesManager: PreferencesManager): String {\r\n        return preferencesManager.getPrefBaseUrl()\r\n     }\r\n\r\n    @Singleton\r\n    @Provides\r\n    fun provideGsonBuilder(): Gson {\r\n        return GsonBuilder()\r\n            .setLenient()\r\n            .create()\r\n    }\r\n\r\n    @Provides\r\n    @Singleton\r\n    fun provideOkHttpClient( ) =\r\n        OkHttpClient\r\n            .Builder()\r\n            .connectTimeout(3, TimeUnit.MINUTES)\r\n            .readTimeout(3, TimeUnit.MINUTES)\r\n            .writeTimeout(3, TimeUnit.MINUTES)\r\n            .build()\r\n\r\n    @Singleton\r\n    @Provides\r\n    fun provideRetrofit(gson: Gson, okHttpClient: OkHttpClient, preferencesManager: PreferencesManager): Retrofit.Builder {\r\n\r\n        return Retrofit.Builder()\r\n            .baseUrl(  preferencesManager.getPrefBaseUrl())\r\n            .addConverterFactory(ScalarsConverterFactory.create())\r\n            .addConverterFactory(GsonConverterFactory.create(gson))\r\n            .client(okHttpClient)\r\n    }\r\n\r\n    @Singleton\r\n    @Provides\r\n    fun provideBlogService(retrofit: Retrofit.Builder): MyApi {\r\n        return retrofit\r\n            .build()\r\n            .create(MyApi::class.java)\r\n    }\r\n","title":"I want to work with multiple base url in retrofit2","body":"<p>I used SharedPreferences to handle this problem:</p>\n<pre><code>@Singleton\n@Provides\nsuspend fun getBaseUrl(preferencesManager: PreferencesManager): String {\n    return preferencesManager.getPrefBaseUrl()\n }\n\n@Singleton\n@Provides\nfun provideGsonBuilder(): Gson {\n    return GsonBuilder()\n        .setLenient()\n        .create()\n}\n\n@Provides\n@Singleton\nfun provideOkHttpClient( ) =\n    OkHttpClient\n        .Builder()\n        .connectTimeout(3, TimeUnit.MINUTES)\n        .readTimeout(3, TimeUnit.MINUTES)\n        .writeTimeout(3, TimeUnit.MINUTES)\n        .build()\n\n@Singleton\n@Provides\nfun provideRetrofit(gson: Gson, okHttpClient: OkHttpClient, preferencesManager: PreferencesManager): Retrofit.Builder {\n\n    return Retrofit.Builder()\n        .baseUrl(  preferencesManager.getPrefBaseUrl())\n        .addConverterFactory(ScalarsConverterFactory.create())\n        .addConverterFactory(GsonConverterFactory.create(gson))\n        .client(okHttpClient)\n}\n\n@Singleton\n@Provides\nfun provideBlogService(retrofit: Retrofit.Builder): MyApi {\n    return retrofit\n        .build()\n        .create(MyApi::class.java)\n}\n</code></pre>\n"}],"owner":{"account_id":24305940,"reputation":3,"user_id":18248680,"display_name":"AuMobileTools"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1884,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1645341992,"creation_date":1645232541,"question_id":71181494,"body_markdown":"I have a structure whose base url address is constantly variable. When my user changes his location in the application, I change the base url to show the closest server to him. but the retrofit client does not regenerate even though I restart the activities and change all the static variables. The only way to do this is to close the application completely and restart it.\r\n\r\nI don&#39;t have a fixed base url. There could be 4 different locations today, 12 different locations tomorrow. so i need to find a permanent solution.\r\n\r\nI have examined a lot in debug mode, but; When the base url changes, it never goes inside the getClient and cannot reassign the base url.\r\n\r\n\r\n\r\n\r\n   \r\n    public static Retrofit retrofit = null;\r\n\r\n    // I want this address to change.\r\n    public static String baseUrl = &quot;&quot;;\r\n\r\n    @Provides\r\n    public static Retrofit getClient() {\r\n        GsonBuilder builder = new GsonBuilder();\r\n        builder.registerTypeAdapter(Date.class, new JsonDeserializer&lt;Date&gt;() {\r\n            @Override\r\n            public Date deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context) throws JsonParseException {\r\n                return new Date(json.getAsJsonPrimitive().getAsLong());\r\n            }\r\n        });\r\n\r\n        Gson gson = builder.create();\r\n        OkHttpClient client = new OkHttpClient.Builder().addInterceptor(new Interceptor() {\r\n            @Override\r\n            public Response intercept(Chain chain) throws IOException {\r\n                Request request = chain.request().newBuilder()\r\n                        .addHeader(&quot;AUTHORIZATION&quot;, &quot;&quot; + JWT_TOKEN)\r\n                        .build();\r\n                return chain.proceed(request);\r\n            }\r\n        }).build();\r\n\r\n        if (retrofit == null) {\r\n            retrofit = new Retrofit.Builder().baseUrl(baseUrl)\r\n                    .addConverterFactory(GsonConverterFactory.create(gson))\r\n                    .client(client)\r\n                    .build();\r\n            return retrofit;\r\n        }\r\n\r\n        return retrofit;\r\n    }\r\n","title":"I want to work with multiple base url in retrofit2","body":"<p>I have a structure whose base url address is constantly variable. When my user changes his location in the application, I change the base url to show the closest server to him. but the retrofit client does not regenerate even though I restart the activities and change all the static variables. The only way to do this is to close the application completely and restart it.</p>\n<p>I don't have a fixed base url. There could be 4 different locations today, 12 different locations tomorrow. so i need to find a permanent solution.</p>\n<p>I have examined a lot in debug mode, but; When the base url changes, it never goes inside the getClient and cannot reassign the base url.</p>\n<pre><code>public static Retrofit retrofit = null;\n\n// I want this address to change.\npublic static String baseUrl = &quot;&quot;;\n\n@Provides\npublic static Retrofit getClient() {\n    GsonBuilder builder = new GsonBuilder();\n    builder.registerTypeAdapter(Date.class, new JsonDeserializer&lt;Date&gt;() {\n        @Override\n        public Date deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context) throws JsonParseException {\n            return new Date(json.getAsJsonPrimitive().getAsLong());\n        }\n    });\n\n    Gson gson = builder.create();\n    OkHttpClient client = new OkHttpClient.Builder().addInterceptor(new Interceptor() {\n        @Override\n        public Response intercept(Chain chain) throws IOException {\n            Request request = chain.request().newBuilder()\n                    .addHeader(&quot;AUTHORIZATION&quot;, &quot;&quot; + JWT_TOKEN)\n                    .build();\n            return chain.proceed(request);\n        }\n    }).build();\n\n    if (retrofit == null) {\n        retrofit = new Retrofit.Builder().baseUrl(baseUrl)\n                .addConverterFactory(GsonConverterFactory.create(gson))\n                .client(client)\n                .build();\n        return retrofit;\n    }\n\n    return retrofit;\n}\n</code></pre>\n"},{"tags":["java","android","android-recyclerview","pagination","cart"],"owner":{"account_id":24181622,"reputation":9,"user_id":18142193,"display_name":"Muhammad Safnad"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1645341179,"creation_date":1645341179,"question_id":71192100,"body_markdown":"**i want to change the keyboard to english when user pressing this search edittext**\r\n\r\n\r\n     &lt;EditText\r\n               android:id=&quot;@+id/search_text&quot;\r\n               android:layout_width=&quot;match_parent&quot;\r\n               android:layout_height=&quot;50dp&quot;\r\n               android:background=&quot;@drawable/search_bg&quot;\r\n               android:drawableLeft=&quot;@drawable/ic_baseline_search_24&quot;\r\n               android:drawablePadding=&quot;12dp&quot;\r\n               android:ems=&quot;10&quot;\r\n               android:hint=&quot;Search your item&quot;\r\n               android:inputType=&quot;textCapSentences&quot;\r\n               android:paddingStart=&quot;20dp&quot;/&gt;\r\n\r\nexample: when an arabic language supported opening my application, and doing searching, then searching should be in english.","title":"my Andoid app supports Arabic languages. but user going to search then the keyboard should be in english, because all my items in database are english","body":"<p><strong>i want to change the keyboard to english when user pressing this search edittext</strong></p>\n<pre><code> &lt;EditText\n           android:id=&quot;@+id/search_text&quot;\n           android:layout_width=&quot;match_parent&quot;\n           android:layout_height=&quot;50dp&quot;\n           android:background=&quot;@drawable/search_bg&quot;\n           android:drawableLeft=&quot;@drawable/ic_baseline_search_24&quot;\n           android:drawablePadding=&quot;12dp&quot;\n           android:ems=&quot;10&quot;\n           android:hint=&quot;Search your item&quot;\n           android:inputType=&quot;textCapSentences&quot;\n           android:paddingStart=&quot;20dp&quot;/&gt;\n</code></pre>\n<p>example: when an arabic language supported opening my application, and doing searching, then searching should be in english.</p>\n"},{"tags":["java","spring-boot","spring-restcontroller"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1645342385,"post_id":71192090,"comment_id":125842196,"body_markdown":"Can you simply omit the header?","body":"Can you simply omit the header?"},{"owner":{"account_id":2272389,"reputation":1347,"user_id":1999453,"accept_rate":67,"display_name":"user1999453"},"score":0,"creation_date":1645344283,"post_id":71192090,"comment_id":125842511,"body_markdown":"@tgdavies oh you mean not adding content type to the header it should be empty or not specifying header at all I should be able to make the rest call?","body":"@tgdavies oh you mean not adding content type to the header it should be empty or not specifying header at all I should be able to make the rest call?"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1645348344,"post_id":71192090,"comment_id":125843236,"body_markdown":"Yes. Please edit your question to explain what error, if any, you are getting when you make the request.","body":"Yes. Please edit your question to explain what error, if any, you are getting when you make the request."},{"owner":{"account_id":2272389,"reputation":1347,"user_id":1999453,"accept_rate":67,"display_name":"user1999453"},"score":0,"creation_date":1645360213,"post_id":71192090,"comment_id":125845569,"body_markdown":"I don&#39;t ve access to the api yet but I am only coding the api call.once I can test it I will post the result.","body":"I don&#39;t ve access to the api yet but I am only coding the api call.once I can test it I will post the result."}],"owner":{"account_id":2272389,"reputation":1347,"user_id":1999453,"accept_rate":67,"display_name":"user1999453"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":314,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1645341094,"creation_date":1645341094,"question_id":71192090,"body_markdown":"I need to make a **GET** rest call and I am using restemplate with Spring boot to make the call. The requirement for the request headers is as follows:\r\n\r\nRequest headers:\r\n\r\n 1. Content-type  - Empty content\r\n 2. Charset - UTF-8\r\n 3. Authorization - Basic\r\n\r\nPlease find piece of code below to implement the above configurations:\r\n\r\n\r\n  \r\n\r\n      public static final String AUTHORISATION = &quot;Authorization&quot;;\r\n      public static final String CHARSET = &quot;Charset&quot;;\r\n      public static final String BASIC = &quot;Basic&quot;;\r\n      public static final String UTF8 = &quot;UTF-8&quot;;\r\n.....\r\n\r\n\tResponseEntity&lt;TransactionResponse&gt; response;\r\n    String url =  findTransactionsEndpoint;\r\n\r\n    HttpHeaders headers = new HttpHeaders();\r\n    headers.set(Constant.AUTHORISATION, Constant.BASIC);\r\n    headers.set(Constant.CHARSET, Constant.UTF8);\r\n\r\n    HttpEntity&lt;Void&gt; requestEntity = new HttpEntity&lt;&gt;(headers);\r\n  \r\n\r\n       response = restTemplate.exchange(url, HttpMethod.GET, requestEntity, TransactionResponse.class, transactionRequest);\r\n\r\nHowever I don&#39;t know how set the Content-type to empty content, any idea how this can be acheived? \r\n\r\nThanks in advance.","title":"how to set Restemplate Content-type to Empty content","body":"<p>I need to make a <strong>GET</strong> rest call and I am using restemplate with Spring boot to make the call. The requirement for the request headers is as follows:</p>\n<p>Request headers:</p>\n<ol>\n<li>Content-type  - Empty content</li>\n<li>Charset - UTF-8</li>\n<li>Authorization - Basic</li>\n</ol>\n<p>Please find piece of code below to implement the above configurations:</p>\n<pre><code>  public static final String AUTHORISATION = &quot;Authorization&quot;;\n  public static final String CHARSET = &quot;Charset&quot;;\n  public static final String BASIC = &quot;Basic&quot;;\n  public static final String UTF8 = &quot;UTF-8&quot;;\n</code></pre>\n<p>.....</p>\n<pre><code>ResponseEntity&lt;TransactionResponse&gt; response;\nString url =  findTransactionsEndpoint;\n\nHttpHeaders headers = new HttpHeaders();\nheaders.set(Constant.AUTHORISATION, Constant.BASIC);\nheaders.set(Constant.CHARSET, Constant.UTF8);\n\nHttpEntity&lt;Void&gt; requestEntity = new HttpEntity&lt;&gt;(headers);\n\n\n   response = restTemplate.exchange(url, HttpMethod.GET, requestEntity, TransactionResponse.class, transactionRequest);\n</code></pre>\n<p>However I don't know how set the Content-type to empty content, any idea how this can be acheived?</p>\n<p>Thanks in advance.</p>\n"},{"tags":["c#","java","encryption","aes"],"comments":[{"owner":{"account_id":3410012,"reputation":2182,"user_id":2860193,"accept_rate":94,"display_name":"deathismyfriend"},"score":2,"creation_date":1383193184,"post_id":19698272,"comment_id":29260034,"body_markdown":"I believe the blockSize should be 128 and the keysize be 256.\nThe keyStr should be 32 characters long and the IVstr should be 16 characters long. This may help as it describes why 128 bits have to be used for block size and what the key sizes can be. http://csrc.nist.gov/publications/fips/fips197/fips-197.pdf","body":"I believe the blockSize should be 128 and the keysize be 256. The keyStr should be 32 characters long and the IVstr should be 16 characters long. This may help as it describes why 128 bits have to be used for block size and what the key sizes can be. <a href=\"http://csrc.nist.gov/publications/fips/fips197/fips-197.pdf\" rel=\"nofollow noreferrer\">csrc.nist.gov/publications/fips/fips197/fips-197.pdf</a>"},{"owner":{"account_id":9586,"reputation":9666,"user_id":17776,"accept_rate":83,"display_name":"jac"},"score":1,"creation_date":1383193369,"post_id":19698272,"comment_id":29260077,"body_markdown":"See if this helps, http://stackoverflow.com/q/5295110/17776","body":"See if this helps, <a href=\"http://stackoverflow.com/q/5295110/17776\">stackoverflow.com/q/5295110/17776</a>"},{"owner":{"account_id":1208733,"reputation":1729,"user_id":1177699,"accept_rate":70,"display_name":"Krishnanunni Jeevan"},"score":2,"creation_date":1383193813,"post_id":19698272,"comment_id":29260185,"body_markdown":"The default padding mode in C# is PaddingMode.PKCS7. I am not sure it is same in java.I think it is better to specify it in both places","body":"The default padding mode in C# is PaddingMode.PKCS7. I am not sure it is same in java.I think it is better to specify it in both places"},{"owner":{"account_id":484547,"reputation":4466,"user_id":900284,"accept_rate":62,"display_name":"Frank Myat Thu"},"score":0,"creation_date":1383222341,"post_id":19698272,"comment_id":29272741,"body_markdown":"@deathismyfriend , Please see me updated function again. And I hope that you can give me more suggestion. Thank","body":"@deathismyfriend , Please see me updated function again. And I hope that you can give me more suggestion. Thank"},{"owner":{"account_id":85671,"reputation":40858,"user_id":238704,"display_name":"President James K. Polk"},"score":0,"creation_date":1383230813,"post_id":19698272,"comment_id":29278469,"body_markdown":"Always a bad thing to use defaults in cryptography. In addition to the other comments I think you should explicitly specify the encoding in the java `String.getBytes()` method. Change `strToEncrypt.getBytes()` to `strToEncrypt.getBytes(&quot;UTF-8&quot;)`","body":"Always a bad thing to use defaults in cryptography. In addition to the other comments I think you should explicitly specify the encoding in the java <code>String.getBytes()</code> method. Change <code>strToEncrypt.getBytes()</code> to <code>strToEncrypt.getBytes(&quot;UTF-8&quot;)</code>"},{"owner":{"account_id":3410012,"reputation":2182,"user_id":2860193,"accept_rate":94,"display_name":"deathismyfriend"},"score":0,"creation_date":1383239318,"post_id":19698272,"comment_id":29284087,"body_markdown":"You have this in the decrypt method. aesEncryption.Padding = PaddingMode.None;   I believe you need to put that in the encrypt method also.","body":"You have this in the decrypt method. aesEncryption.Padding = PaddingMode.None;   I believe you need to put that in the encrypt method also."},{"owner":{"account_id":3410012,"reputation":2182,"user_id":2860193,"accept_rate":94,"display_name":"deathismyfriend"},"score":0,"creation_date":1383239444,"post_id":19698272,"comment_id":29284161,"body_markdown":"Also why not use this method for the key and IV.   \n            aes.Key = ASCIIEncoding.ASCII.GetBytes(keyStr);\n            aes.IV = ASCIIEncoding.ASCII.GetBytes(ivStr);","body":"Also why not use this method for the key and IV.                aes.Key = ASCIIEncoding.ASCII.GetBytes(keyStr);             aes.IV = ASCIIEncoding.ASCII.GetBytes(ivStr);"},{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":0,"creation_date":1383270990,"post_id":19698272,"comment_id":29296019,"body_markdown":"Have you tried FromBase64String? I&#39;m not so sure you are using &quot;Unicode&quot; (which is the incorrect name for UTF-16LE used in C# if I&#39;m not mistaken)? Could you show us the base 64 string?","body":"Have you tried FromBase64String? I&#39;m not so sure you are using &quot;Unicode&quot; (which is the incorrect name for UTF-16LE used in C# if I&#39;m not mistaken)? Could you show us the base 64 string?"},{"owner":{"account_id":484547,"reputation":4466,"user_id":900284,"accept_rate":62,"display_name":"Frank Myat Thu"},"score":0,"creation_date":1383295722,"post_id":19698272,"comment_id":29301916,"body_markdown":"Thank you so much , deathismyfriend, jac, krishnanunni-jeevan, gregs,and owlstead. Because of your help, Now i can solve it.","body":"Thank you so much , deathismyfriend, jac, krishnanunni-jeevan, gregs,and owlstead. Because of your help, Now i can solve it."},{"owner":{"account_id":2572604,"reputation":770,"user_id":2230934,"accept_rate":25,"display_name":"Daryn"},"score":0,"creation_date":1394794051,"post_id":19698272,"comment_id":34060553,"body_markdown":"Does encrypt algorithm work? Because it always returns null for me? Can you help me?","body":"Does encrypt algorithm work? Because it always returns null for me? Can you help me?"},{"owner":{"account_id":484547,"reputation":4466,"user_id":900284,"accept_rate":62,"display_name":"Frank Myat Thu"},"score":0,"creation_date":1394816294,"post_id":19698272,"comment_id":34075743,"body_markdown":"Yes, sure it really work, I can help you. if you want more detail about that, then you can send mail to me myatthu1986@gmail.com.","body":"Yes, sure it really work, I can help you. if you want more detail about that, then you can send mail to me myatthu1986@gmail.com."}],"answers":[{"tags":[],"owner":{"account_id":484547,"reputation":4466,"user_id":900284,"accept_rate":62,"display_name":"Frank Myat Thu"},"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1383297837,"creation_date":1383295571,"answer_id":19723454,"question_id":19698272,"body_markdown":"After I got very helpful suggestions from @deathismyfriend and other, I found out what I am missing in my C# Decrypt function.So I change my function as below.\r\n\r\n    /// C# Error Fixed Version - CipherMode.ECB\r\n    public static string keyStr = &quot;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&quot;;\r\n    \r\n    private static string Encrypt(string PlainText)\r\n    {\r\n    \tRijndaelManaged aes = new RijndaelManaged();\r\n    \taes.BlockSize = 128;\r\n    \taes.KeySize = 256;\r\n    \r\n    \t/// In Java, Same with below code\r\n    \t/// Cipher _Cipher = Cipher.getInstance(&quot;AES&quot;);  // Java Code\r\n    \taes.Mode = CipherMode.ECB; \r\n    \r\n    \tbyte[] keyArr = Convert.FromBase64String(keyStr);\r\n    \tbyte[] KeyArrBytes32Value = new byte[32];\r\n    \tArray.Copy(keyArr, KeyArrBytes32Value, 32);\r\n    \r\n    \taes.Key = KeyArrBytes32Value;\r\n    \r\n    \tICryptoTransform encrypto = aes.CreateEncryptor();\r\n    \r\n    \tbyte[] plainTextByte = ASCIIEncoding.UTF8.GetBytes(PlainText);\r\n    \tbyte[] CipherText = encrypto.TransformFinalBlock(plainTextByte, 0, plainTextByte.Length);\r\n    \treturn Convert.ToBase64String(CipherText);\r\n    }\r\n    \r\n    private static string Decrypt(string CipherText)\r\n    {  \r\n    \tRijndaelManaged aes = new RijndaelManaged();\r\n    \taes.BlockSize = 128;\r\n    \taes.KeySize = 256;\r\n    \r\n    \t/// In Java, Same with below code\r\n    \t/// Cipher _Cipher = Cipher.getInstance(&quot;AES&quot;);  // Java Code\r\n    \taes.Mode = CipherMode.ECB;\r\n       \r\n    \tbyte[] keyArr = Convert.FromBase64String(keyStr);\r\n    \tbyte[] KeyArrBytes32Value = new byte[32];\r\n    \tArray.Copy(keyArr, KeyArrBytes32Value, 32);\r\n    \r\n    \taes.Key = KeyArrBytes32Value;\r\n    \r\n    \tICryptoTransform decrypto = aes.CreateDecryptor();\r\n    \r\n    \tbyte[] encryptedBytes = Convert.FromBase64CharArray(CipherText.ToCharArray(), 0, CipherText.Length);\r\n    \tbyte[] decryptedData = decrypto.TransformFinalBlock(encryptedBytes, 0, encryptedBytes.Length);\r\n    \treturn ASCIIEncoding.UTF8.GetString(decryptedData);\r\n    }\r\n\r\nBy using upper c# function , now I can decrypt and read cipher text.&lt;br&gt;\r\nBelow is what I found out after I getting error again and again. &lt;br&gt;\r\n\r\n    CryptographicException: Padding is invalid and cannot be removed.\r\n     \r\n     Solution:  \r\n    _RijndaelManaged.Padding = CipherMode.xxx;    ///should toggle here\r\n    _RijndaelManaged.Padding = PaddingMode.xxx;   ///should toggle here \r\n    \r\n    \r\n    CryptographicException: Length of the data to decrypt is invalid. \r\n    CryptographicException: Specified initialization vector (IV) does not match the block size for this algorithm.\r\n    \r\n    Solution\r\n    1. _RijndaelManaged.BlockSize = 128; /// Must be\r\n    2. _RijndaelManaged.KeySize = 256; /// Must be\r\n    3. _RijndaelManaged.Key = Byte Array Size must be 32 in length ( more detail 32*8 = 256 KeySize )\r\n    4. _RijndaelManaged.IV = Byte Array Size must be 16 in length ( more detail 16*8 = 128 BlockSize)\r\n\r\nBut when it come to security reason, I think I should not use ECB mode.&lt;br&gt;\r\nAccording to \r\n&lt;ol&gt;\r\n&lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/a/6671819/900284&quot;&gt;ECB mode is not secure&lt;/a&gt;&lt;/li&gt;\r\n&lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/6669181/why-does-my-aes-encryption-throws-an-invalidkeyexception&quot;&gt;StackOverFlow link&lt;/a&gt;&lt;/li&gt;\r\n&lt;/ol&gt;\r\n\r\nSo I Modify it again in Java and C#.\r\n\r\n    // Java code - Cipher mode CBC version.\r\n    // CBC version need Initialization vector IV.\r\n\t// Reference from https://stackoverflow.com/questions/6669181/why-does-my-aes-encryption-throws-an-invalidkeyexception/6669812#6669812\r\n    \r\n    import java.security.Key;\r\n    \r\n    import javax.crypto.Cipher;\r\n    import javax.crypto.spec.IvParameterSpec;\r\n    import javax.crypto.spec.SecretKeySpec;\r\n    import org.apache.commons.codec.binary.Base64;\r\n    \r\n    public class CryptoSecurity {\r\n    \r\n    \tpublic static String key = &quot;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&quot;;\r\n    \tpublic static byte[] key_Array = Base64.decodeBase64(key);\r\n    \t\r\n    \tpublic static String encrypt(String strToEncrypt)\r\n    \t{\t\t\r\n    \t\ttry\r\n    \t\t{\t\r\n    \t\t\t//Cipher _Cipher = Cipher.getInstance(&quot;AES&quot;);\r\n    \t\t\t//Cipher _Cipher = Cipher.getInstance(&quot;AES/ECB/PKCS5PADDING&quot;);\r\n    \t\t\tCipher _Cipher = Cipher.getInstance(&quot;AES/CBC/PKCS5PADDING&quot;);\t\t\r\n    \t\t\t\r\n    \t\t\t// Initialization vector.   \r\n    \t\t\t// It could be any value or generated using a random number generator.\r\n    \t\t\tbyte[] iv = { 1, 2, 3, 4, 5, 6, 6, 5, 4, 3, 2, 1, 7, 7, 7, 7 };\r\n    \t\t\tIvParameterSpec ivspec = new IvParameterSpec(iv);\r\n    \t\t\t\r\n    \t\t\tKey SecretKey = new SecretKeySpec(key_Array, &quot;AES&quot;);\t\r\n    \t\t\t_Cipher.init(Cipher.ENCRYPT_MODE, SecretKey, ivspec);\t\t\r\n    \t\t\t\r\n    \t\t\treturn Base64.encodeBase64String(_Cipher.doFinal(strToEncrypt.getBytes()));\t\t\r\n    \t\t}\r\n    \t\tcatch (Exception e)\r\n    \t\t{\r\n    \t\t\tSystem.out.println(&quot;[Exception]:&quot;+e.getMessage());\r\n    \t\t}\r\n    \t\treturn null;\r\n    \t}\r\n    \r\n    \tpublic static String decrypt(String EncryptedMessage)\r\n    \t{\r\n    \t\ttry\r\n    \t\t{\r\n    \t\t\t//Cipher _Cipher = Cipher.getInstance(&quot;AES&quot;);\r\n    \t\t\t//Cipher _Cipher = Cipher.getInstance(&quot;AES/ECB/PKCS5PADDING&quot;);\r\n    \t\t\tCipher _Cipher = Cipher.getInstance(&quot;AES/CBC/PKCS5PADDING&quot;);\t\t\t\r\n    \t\t\t\r\n    \t\t\t// Initialization vector.   \r\n    \t\t\t// It could be any value or generated using a random number generator.\r\n    \t\t\tbyte[] iv = { 1, 2, 3, 4, 5, 6, 6, 5, 4, 3, 2, 1, 7, 7, 7, 7 };\r\n    \t\t\tIvParameterSpec ivspec = new IvParameterSpec(iv);\r\n    \t\t\t\r\n    \t\t\tKey SecretKey = new SecretKeySpec(key_Array, &quot;AES&quot;);\r\n    \t\t\t_Cipher.init(Cipher.DECRYPT_MODE, SecretKey, ivspec);\t\t\t\r\n    \r\n    \t\t\tbyte DecodedMessage[] = Base64.decodeBase64(EncryptedMessage);\r\n    \t\t\treturn new String(_Cipher.doFinal(DecodedMessage));\r\n    \t\t\t\r\n    \t\t}\r\n    \t\tcatch (Exception e)\r\n    \t\t{\r\n    \t\t\tSystem.out.println(&quot;[Exception]:&quot;+e.getMessage());\t\t\t\r\n    \r\n    \t\t}\r\n    \t\treturn null;\r\n    \t}\r\n    \t\r\n    \tpublic static void main(String[] args) {\r\n    \t\t// TODO Auto-generated method stub\r\n    \t\tStringBuilder sb = new StringBuilder();\r\n    \t\t\r\n    \t\tsb.append(&quot;xml file string ...&quot;);\r\n    \t\t\r\n    \t\tString outputOfEncrypt = encrypt(sb.toString());\t\t\r\n    \t\tSystem.out.println(&quot;[CryptoSecurity.outputOfEncrypt]:&quot;+outputOfEncrypt);\r\n    \r\n    \t\tString outputOfDecrypt = decrypt(outputOfEncrypt);        \r\n            //String outputOfDecrypt = decrypt(sb.toString());        \r\n    \t\tSystem.out.println(&quot;[CryptoSecurity.outputOfDecrypt]:&quot;+outputOfDecrypt);\r\n    \t}\r\n    \t\r\n    }\r\n\r\n\r\nIn C#, I modify it like below.\r\n\r\n    // C# Code, CipherMode.CBC\r\n    // CBC version need Initialization vector IV.\r\n    \r\n    public static string keyStr = &quot;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&quot;;\r\n    private static string Encrypt(string PlainText)\r\n    {\r\n    \tRijndaelManaged aes = new RijndaelManaged();\r\n    \taes.BlockSize = 128;\r\n    \taes.KeySize = 256;\r\n    \r\n    \t// It is equal in java \r\n    \t/// Cipher _Cipher = Cipher.getInstance(&quot;AES/CBC/PKCS5PADDING&quot;);\t\r\n    \taes.Mode = CipherMode.CBC;\t\r\n    \taes.Padding = PaddingMode.PKCS7; \r\n    \r\n    \tbyte[] keyArr = Convert.FromBase64String(keyStr);\r\n    \tbyte[] KeyArrBytes32Value = new byte[32];\r\n    \tArray.Copy(keyArr, KeyArrBytes32Value, 32);\r\n    \r\n    \t// Initialization vector.   \r\n    \t// It could be any value or generated using a random number generator.\r\n    \tbyte[] ivArr = { 1, 2, 3, 4, 5, 6, 6, 5, 4, 3, 2, 1, 7, 7, 7, 7 };\r\n    \tbyte[] IVBytes16Value = new byte[16];\r\n    \tArray.Copy(ivArr, IVBytes16Value, 16);\r\n    \r\n    \taes.Key = KeyArrBytes32Value;\r\n    \taes.IV = IVBytes16Value;\r\n    \r\n    \tICryptoTransform encrypto = aes.CreateEncryptor();\r\n    \r\n    \tbyte[] plainTextByte = ASCIIEncoding.UTF8.GetBytes(PlainText);\r\n    \tbyte[] CipherText = encrypto.TransformFinalBlock(plainTextByte, 0, plainTextByte.Length);\r\n    \treturn Convert.ToBase64String(CipherText);\r\n    \t\r\n    }\r\n    \r\n    private static string Decrypt(string CipherText)\r\n    {\r\n    \tRijndaelManaged aes = new RijndaelManaged();\r\n    \taes.BlockSize = 128;\r\n    \taes.KeySize = 256;\r\n    \r\n    \taes.Mode = CipherMode.CBC;\r\n    \taes.Padding = PaddingMode.PKCS7;\r\n    \r\n    \tbyte[] keyArr = Convert.FromBase64String(keyStr);\r\n    \tbyte[] KeyArrBytes32Value = new byte[32];\r\n    \tArray.Copy(keyArr, KeyArrBytes32Value, 32);\r\n    \r\n    \t// Initialization vector.   \r\n    \t// It could be any value or generated using a random number generator.\r\n    \tbyte[] ivArr = { 1, 2, 3, 4, 5, 6, 6, 5, 4, 3, 2, 1, 7, 7, 7, 7 };            \r\n    \tbyte[] IVBytes16Value = new byte[16];\r\n    \tArray.Copy(ivArr, IVBytes16Value, 16);\r\n    \r\n    \taes.Key = KeyArrBytes32Value;\r\n    \taes.IV = IVBytes16Value;\r\n    \r\n    \tICryptoTransform decrypto = aes.CreateDecryptor();\r\n    \r\n    \tbyte[] encryptedBytes = Convert.FromBase64CharArray(CipherText.ToCharArray(), 0, CipherText.Length);\r\n    \tbyte[] decryptedData = decrypto.TransformFinalBlock(encryptedBytes, 0, encryptedBytes.Length);\r\n    \treturn ASCIIEncoding.UTF8.GetString(decryptedData);\r\n    }\r\n\r\nNow it all work.\r\n&lt;br&gt;For more detail about AES, &lt;a href=&quot;http://csrc.nist.gov/publications/fips/fips197/fips-197.pdf&quot;&gt;click this link&lt;/a&gt; which I was given by @deathismyfriend. \r\n&lt;br&gt;It is also very useful.","title":"Encrypt in java and Decrypt in C# For AES 256 bit","body":"<p>After I got very helpful suggestions from @deathismyfriend and other, I found out what I am missing in my C# Decrypt function.So I change my function as below.</p>\n\n<pre><code>/// C# Error Fixed Version - CipherMode.ECB\npublic static string keyStr = \"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\";\n\nprivate static string Encrypt(string PlainText)\n{\n    RijndaelManaged aes = new RijndaelManaged();\n    aes.BlockSize = 128;\n    aes.KeySize = 256;\n\n    /// In Java, Same with below code\n    /// Cipher _Cipher = Cipher.getInstance(\"AES\");  // Java Code\n    aes.Mode = CipherMode.ECB; \n\n    byte[] keyArr = Convert.FromBase64String(keyStr);\n    byte[] KeyArrBytes32Value = new byte[32];\n    Array.Copy(keyArr, KeyArrBytes32Value, 32);\n\n    aes.Key = KeyArrBytes32Value;\n\n    ICryptoTransform encrypto = aes.CreateEncryptor();\n\n    byte[] plainTextByte = ASCIIEncoding.UTF8.GetBytes(PlainText);\n    byte[] CipherText = encrypto.TransformFinalBlock(plainTextByte, 0, plainTextByte.Length);\n    return Convert.ToBase64String(CipherText);\n}\n\nprivate static string Decrypt(string CipherText)\n{  \n    RijndaelManaged aes = new RijndaelManaged();\n    aes.BlockSize = 128;\n    aes.KeySize = 256;\n\n    /// In Java, Same with below code\n    /// Cipher _Cipher = Cipher.getInstance(\"AES\");  // Java Code\n    aes.Mode = CipherMode.ECB;\n\n    byte[] keyArr = Convert.FromBase64String(keyStr);\n    byte[] KeyArrBytes32Value = new byte[32];\n    Array.Copy(keyArr, KeyArrBytes32Value, 32);\n\n    aes.Key = KeyArrBytes32Value;\n\n    ICryptoTransform decrypto = aes.CreateDecryptor();\n\n    byte[] encryptedBytes = Convert.FromBase64CharArray(CipherText.ToCharArray(), 0, CipherText.Length);\n    byte[] decryptedData = decrypto.TransformFinalBlock(encryptedBytes, 0, encryptedBytes.Length);\n    return ASCIIEncoding.UTF8.GetString(decryptedData);\n}\n</code></pre>\n\n<p>By using upper c# function , now I can decrypt and read cipher text.<br>\nBelow is what I found out after I getting error again and again. <br></p>\n\n<pre><code>CryptographicException: Padding is invalid and cannot be removed.\n\n Solution:  \n_RijndaelManaged.Padding = CipherMode.xxx;    ///should toggle here\n_RijndaelManaged.Padding = PaddingMode.xxx;   ///should toggle here \n\n\nCryptographicException: Length of the data to decrypt is invalid. \nCryptographicException: Specified initialization vector (IV) does not match the block size for this algorithm.\n\nSolution\n1. _RijndaelManaged.BlockSize = 128; /// Must be\n2. _RijndaelManaged.KeySize = 256; /// Must be\n3. _RijndaelManaged.Key = Byte Array Size must be 32 in length ( more detail 32*8 = 256 KeySize )\n4. _RijndaelManaged.IV = Byte Array Size must be 16 in length ( more detail 16*8 = 128 BlockSize)\n</code></pre>\n\n<p>But when it come to security reason, I think I should not use ECB mode.<br>\nAccording to </p>\n\n<ol>\n<li><a href=\"https://stackoverflow.com/a/6671819/900284\">ECB mode is not secure</a></li>\n<li><a href=\"https://stackoverflow.com/questions/6669181/why-does-my-aes-encryption-throws-an-invalidkeyexception\">StackOverFlow link</a></li>\n</ol>\n\n<p>So I Modify it again in Java and C#.</p>\n\n<pre><code>// Java code - Cipher mode CBC version.\n// CBC version need Initialization vector IV.\n// Reference from https://stackoverflow.com/questions/6669181/why-does-my-aes-encryption-throws-an-invalidkeyexception/6669812#6669812\n\nimport java.security.Key;\n\nimport javax.crypto.Cipher;\nimport javax.crypto.spec.IvParameterSpec;\nimport javax.crypto.spec.SecretKeySpec;\nimport org.apache.commons.codec.binary.Base64;\n\npublic class CryptoSecurity {\n\n    public static String key = \"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\";\n    public static byte[] key_Array = Base64.decodeBase64(key);\n\n    public static String encrypt(String strToEncrypt)\n    {       \n        try\n        {   \n            //Cipher _Cipher = Cipher.getInstance(\"AES\");\n            //Cipher _Cipher = Cipher.getInstance(\"AES/ECB/PKCS5PADDING\");\n            Cipher _Cipher = Cipher.getInstance(\"AES/CBC/PKCS5PADDING\");        \n\n            // Initialization vector.   \n            // It could be any value or generated using a random number generator.\n            byte[] iv = { 1, 2, 3, 4, 5, 6, 6, 5, 4, 3, 2, 1, 7, 7, 7, 7 };\n            IvParameterSpec ivspec = new IvParameterSpec(iv);\n\n            Key SecretKey = new SecretKeySpec(key_Array, \"AES\");    \n            _Cipher.init(Cipher.ENCRYPT_MODE, SecretKey, ivspec);       \n\n            return Base64.encodeBase64String(_Cipher.doFinal(strToEncrypt.getBytes()));     \n        }\n        catch (Exception e)\n        {\n            System.out.println(\"[Exception]:\"+e.getMessage());\n        }\n        return null;\n    }\n\n    public static String decrypt(String EncryptedMessage)\n    {\n        try\n        {\n            //Cipher _Cipher = Cipher.getInstance(\"AES\");\n            //Cipher _Cipher = Cipher.getInstance(\"AES/ECB/PKCS5PADDING\");\n            Cipher _Cipher = Cipher.getInstance(\"AES/CBC/PKCS5PADDING\");            \n\n            // Initialization vector.   \n            // It could be any value or generated using a random number generator.\n            byte[] iv = { 1, 2, 3, 4, 5, 6, 6, 5, 4, 3, 2, 1, 7, 7, 7, 7 };\n            IvParameterSpec ivspec = new IvParameterSpec(iv);\n\n            Key SecretKey = new SecretKeySpec(key_Array, \"AES\");\n            _Cipher.init(Cipher.DECRYPT_MODE, SecretKey, ivspec);           \n\n            byte DecodedMessage[] = Base64.decodeBase64(EncryptedMessage);\n            return new String(_Cipher.doFinal(DecodedMessage));\n\n        }\n        catch (Exception e)\n        {\n            System.out.println(\"[Exception]:\"+e.getMessage());          \n\n        }\n        return null;\n    }\n\n    public static void main(String[] args) {\n        // TODO Auto-generated method stub\n        StringBuilder sb = new StringBuilder();\n\n        sb.append(\"xml file string ...\");\n\n        String outputOfEncrypt = encrypt(sb.toString());        \n        System.out.println(\"[CryptoSecurity.outputOfEncrypt]:\"+outputOfEncrypt);\n\n        String outputOfDecrypt = decrypt(outputOfEncrypt);        \n        //String outputOfDecrypt = decrypt(sb.toString());        \n        System.out.println(\"[CryptoSecurity.outputOfDecrypt]:\"+outputOfDecrypt);\n    }\n\n}\n</code></pre>\n\n<p>In C#, I modify it like below.</p>\n\n<pre><code>// C# Code, CipherMode.CBC\n// CBC version need Initialization vector IV.\n\npublic static string keyStr = \"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\";\nprivate static string Encrypt(string PlainText)\n{\n    RijndaelManaged aes = new RijndaelManaged();\n    aes.BlockSize = 128;\n    aes.KeySize = 256;\n\n    // It is equal in java \n    /// Cipher _Cipher = Cipher.getInstance(\"AES/CBC/PKCS5PADDING\");    \n    aes.Mode = CipherMode.CBC;  \n    aes.Padding = PaddingMode.PKCS7; \n\n    byte[] keyArr = Convert.FromBase64String(keyStr);\n    byte[] KeyArrBytes32Value = new byte[32];\n    Array.Copy(keyArr, KeyArrBytes32Value, 32);\n\n    // Initialization vector.   \n    // It could be any value or generated using a random number generator.\n    byte[] ivArr = { 1, 2, 3, 4, 5, 6, 6, 5, 4, 3, 2, 1, 7, 7, 7, 7 };\n    byte[] IVBytes16Value = new byte[16];\n    Array.Copy(ivArr, IVBytes16Value, 16);\n\n    aes.Key = KeyArrBytes32Value;\n    aes.IV = IVBytes16Value;\n\n    ICryptoTransform encrypto = aes.CreateEncryptor();\n\n    byte[] plainTextByte = ASCIIEncoding.UTF8.GetBytes(PlainText);\n    byte[] CipherText = encrypto.TransformFinalBlock(plainTextByte, 0, plainTextByte.Length);\n    return Convert.ToBase64String(CipherText);\n\n}\n\nprivate static string Decrypt(string CipherText)\n{\n    RijndaelManaged aes = new RijndaelManaged();\n    aes.BlockSize = 128;\n    aes.KeySize = 256;\n\n    aes.Mode = CipherMode.CBC;\n    aes.Padding = PaddingMode.PKCS7;\n\n    byte[] keyArr = Convert.FromBase64String(keyStr);\n    byte[] KeyArrBytes32Value = new byte[32];\n    Array.Copy(keyArr, KeyArrBytes32Value, 32);\n\n    // Initialization vector.   \n    // It could be any value or generated using a random number generator.\n    byte[] ivArr = { 1, 2, 3, 4, 5, 6, 6, 5, 4, 3, 2, 1, 7, 7, 7, 7 };            \n    byte[] IVBytes16Value = new byte[16];\n    Array.Copy(ivArr, IVBytes16Value, 16);\n\n    aes.Key = KeyArrBytes32Value;\n    aes.IV = IVBytes16Value;\n\n    ICryptoTransform decrypto = aes.CreateDecryptor();\n\n    byte[] encryptedBytes = Convert.FromBase64CharArray(CipherText.ToCharArray(), 0, CipherText.Length);\n    byte[] decryptedData = decrypto.TransformFinalBlock(encryptedBytes, 0, encryptedBytes.Length);\n    return ASCIIEncoding.UTF8.GetString(decryptedData);\n}\n</code></pre>\n\n<p>Now it all work.\n<br>For more detail about AES, <a href=\"http://csrc.nist.gov/publications/fips/fips197/fips-197.pdf\" rel=\"noreferrer\">click this link</a> which I was given by @deathismyfriend. \n<br>It is also very useful.</p>\n"},{"tags":[],"owner":{"account_id":3410012,"reputation":2182,"user_id":2860193,"accept_rate":94,"display_name":"deathismyfriend"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1383329072,"creation_date":1383329072,"answer_id":19732622,"question_id":19698272,"body_markdown":"I believe the blockSize should be 128 and the keysize be 256. The keyStr should be 32 characters long and the IVstr should be 16 characters long. This may help as it describes why 128 bits have to be used for block size and what the key sizes can be. csrc.nist.gov/publications/fips/fips197/fips-197.pdf\r\n\r\nYou have this in the decrypt method. \r\n\r\n        aesEncryption.Padding = PaddingMode.None; \r\n\r\nI believe you need to put that in the encrypt method also.\r\n\r\nAlso why not use this method for the key and IV. \r\n\r\n        aes.Key = ASCIIEncoding.ASCII.GetBytes(keyStr); \r\n        aes.IV = ASCIIEncoding.ASCII.GetBytes(ivStr);","title":"Encrypt in java and Decrypt in C# For AES 256 bit","body":"<p>I believe the blockSize should be 128 and the keysize be 256. The keyStr should be 32 characters long and the IVstr should be 16 characters long. This may help as it describes why 128 bits have to be used for block size and what the key sizes can be. csrc.nist.gov/publications/fips/fips197/fips-197.pdf</p>\n\n<p>You have this in the decrypt method. </p>\n\n<pre><code>    aesEncryption.Padding = PaddingMode.None; \n</code></pre>\n\n<p>I believe you need to put that in the encrypt method also.</p>\n\n<p>Also why not use this method for the key and IV. </p>\n\n<pre><code>    aes.Key = ASCIIEncoding.ASCII.GetBytes(keyStr); \n    aes.IV = ASCIIEncoding.ASCII.GetBytes(ivStr);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2977213,"reputation":176,"user_id":2528027,"display_name":"A Kimmel"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1429103697,"creation_date":1429103697,"answer_id":29651295,"question_id":19698272,"body_markdown":"On one of my recent projects I was tasked with building up a url with an encrypted portion to pass to another website.  They ran java on their server, whereas we developed in c#. \r\n\r\n*I know this isn&#39;t an exact match to what you were tasked to create, but hopefully this can help out others that are trying to find answers :)*\r\n\r\nI received the following from their developers to build our encryption off from\r\n\r\n![enter image description here][1]\r\n\r\nTo accomplish this in c# I did the following:\r\n\r\n        public String Encrypt(String plainText, String key)\r\n        {\r\n            var plainBytes = Encoding.UTF8.GetBytes(plainText);\r\n            return Convert.ToBase64String(Encrypt(plainBytes, GetRijndaelManaged(key)));\r\n        }\r\n\r\n        private RijndaelManaged GetRijndaelManaged(String secretKey)\r\n        {\r\n            var keyBytes = new byte[16];\r\n            var secretKeyBytes = Encoding.ASCII.GetBytes(secretKey);\r\n            Array.Copy(secretKeyBytes, keyBytes, Math.Min(keyBytes.Length, secretKeyBytes.Length));\r\n            return new RijndaelManaged\r\n            {\r\n                Mode = CipherMode.ECB,\r\n                Padding = PaddingMode.PKCS7,\r\n                KeySize = 128,\r\n                BlockSize = 128,\r\n                Key = keyBytes,\r\n                IV = keyBytes\r\n\r\n            };\r\n        }\r\n\r\n        private byte[] Encrypt(byte[] plainBytes, RijndaelManaged rijndaelManaged)\r\n        {\r\n            return rijndaelManaged.CreateEncryptor()\r\n                .TransformFinalBlock(plainBytes, 0, plainBytes.Length);\r\n        }\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/ZdAxd.png","title":"Encrypt in java and Decrypt in C# For AES 256 bit","body":"<p>On one of my recent projects I was tasked with building up a url with an encrypted portion to pass to another website.  They ran java on their server, whereas we developed in c#. </p>\n\n<p><em>I know this isn't an exact match to what you were tasked to create, but hopefully this can help out others that are trying to find answers :)</em></p>\n\n<p>I received the following from their developers to build our encryption off from</p>\n\n<p><img src=\"https://i.stack.imgur.com/ZdAxd.png\" alt=\"enter image description here\"></p>\n\n<p>To accomplish this in c# I did the following:</p>\n\n<pre><code>    public String Encrypt(String plainText, String key)\n    {\n        var plainBytes = Encoding.UTF8.GetBytes(plainText);\n        return Convert.ToBase64String(Encrypt(plainBytes, GetRijndaelManaged(key)));\n    }\n\n    private RijndaelManaged GetRijndaelManaged(String secretKey)\n    {\n        var keyBytes = new byte[16];\n        var secretKeyBytes = Encoding.ASCII.GetBytes(secretKey);\n        Array.Copy(secretKeyBytes, keyBytes, Math.Min(keyBytes.Length, secretKeyBytes.Length));\n        return new RijndaelManaged\n        {\n            Mode = CipherMode.ECB,\n            Padding = PaddingMode.PKCS7,\n            KeySize = 128,\n            BlockSize = 128,\n            Key = keyBytes,\n            IV = keyBytes\n\n        };\n    }\n\n    private byte[] Encrypt(byte[] plainBytes, RijndaelManaged rijndaelManaged)\n    {\n        return rijndaelManaged.CreateEncryptor()\n            .TransformFinalBlock(plainBytes, 0, plainBytes.Length);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11129155,"reputation":21,"user_id":8169635,"display_name":"Allan Jacques Neves de Oliveir"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1547211738,"creation_date":1547211738,"answer_id":54147091,"question_id":19698272,"body_markdown":"I had a problem with this algorithm (in Java only) and I did a litle changes.\r\n\r\n[Diff Image][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/UKbpj.png\r\n\r\n    // Java code - Cipher mode CBC version.\r\n    // CBC version need Initialization vector IV.\r\n    // Reference from https://stackoverflow.com/questions/6669181/why-does-my-aes-encryption-throws-an-invalidkeyexception/6669812#6669812\r\n    public static String key = &quot;FFClY170hLrhsDnKUEhJ4FhVOnrpNNFFClY170hLrhsDnKUE&quot;;\r\n    public static byte[] key_Array = Base64.decodeBase64(key);\r\n\r\n    public static String encrypt(String strToEncrypt) {\r\n        try {\r\n            //Cipher _Cipher = Cipher.getInstance(&quot;AES&quot;);\r\n            //Cipher _Cipher = Cipher.getInstance(&quot;AES/ECB/PKCS5PADDING&quot;);\r\n            Cipher _Cipher = Cipher.getInstance(&quot;AES/CBC/PKCS5PADDING&quot;);\r\n\r\n            // Initialization vector.   \r\n            // It could be any value or generated using a random number generator.\r\n            byte[] iv = {1, 2, 3, 4, 5, 6, 6, 5, 4, 3, 2, 1, 7, 7, 7, 7};\r\n            IvParameterSpec ivspec = new IvParameterSpec(iv);\r\n\r\n            key_Array = Arrays.copyOf(key_Array, 32);\r\n            \r\n            Key SecretKey = new SecretKeySpec(key_Array, &quot;AES&quot;);\r\n            _Cipher.init(Cipher.ENCRYPT_MODE, SecretKey, ivspec);\r\n\r\n            return Base64.encodeBase64String(_Cipher.doFinal(strToEncrypt.getBytes()));\r\n        } catch (Exception e) {\r\n            System.out.println(&quot;[Exception]:&quot; + e.getMessage());\r\n        }\r\n        return null;\r\n    }\r\n\r\n    public static String decrypt(String EncryptedMessage) {\r\n        try {\r\n            //Cipher _Cipher = Cipher.getInstance(&quot;AES&quot;);\r\n            //Cipher _Cipher = Cipher.getInstance(&quot;AES/ECB/PKCS5PADDING&quot;);\r\n            Cipher _Cipher = Cipher.getInstance(&quot;AES/CBC/PKCS5PADDING&quot;);\r\n\r\n            // Initialization vector.   \r\n            // It could be any value or generated using a random number generator.\r\n            byte[] iv = {1, 2, 3, 4, 5, 6, 6, 5, 4, 3, 2, 1, 7, 7, 7, 7};\r\n            IvParameterSpec ivspec = new IvParameterSpec(iv);\r\n            \r\n            key_Array = Arrays.copyOf(key_Array, 32);\r\n            \r\n            Key SecretKey = new SecretKeySpec(key_Array, &quot;AES&quot;);\r\n            _Cipher.init(Cipher.DECRYPT_MODE, SecretKey, ivspec);\r\n\r\n            byte DecodedMessage[] = Base64.decodeBase64(EncryptedMessage);\r\n            return new String(_Cipher.doFinal(DecodedMessage));\r\n\r\n        } catch (Exception e) {\r\n            System.out.println(&quot;[Exception]:&quot; + e.getMessage());\r\n\r\n        }\r\n        return null;\r\n    }\r\n","title":"Encrypt in java and Decrypt in C# For AES 256 bit","body":"<p>I had a problem with this algorithm (in Java only) and I did a litle changes.</p>\n\n<p><a href=\"https://i.stack.imgur.com/UKbpj.png\" rel=\"nofollow noreferrer\">Diff Image</a></p>\n\n<pre><code>// Java code - Cipher mode CBC version.\n// CBC version need Initialization vector IV.\n// Reference from https://stackoverflow.com/questions/6669181/why-does-my-aes-encryption-throws-an-invalidkeyexception/6669812#6669812\npublic static String key = \"FFClY170hLrhsDnKUEhJ4FhVOnrpNNFFClY170hLrhsDnKUE\";\npublic static byte[] key_Array = Base64.decodeBase64(key);\n\npublic static String encrypt(String strToEncrypt) {\n    try {\n        //Cipher _Cipher = Cipher.getInstance(\"AES\");\n        //Cipher _Cipher = Cipher.getInstance(\"AES/ECB/PKCS5PADDING\");\n        Cipher _Cipher = Cipher.getInstance(\"AES/CBC/PKCS5PADDING\");\n\n        // Initialization vector.   \n        // It could be any value or generated using a random number generator.\n        byte[] iv = {1, 2, 3, 4, 5, 6, 6, 5, 4, 3, 2, 1, 7, 7, 7, 7};\n        IvParameterSpec ivspec = new IvParameterSpec(iv);\n\n        key_Array = Arrays.copyOf(key_Array, 32);\n\n        Key SecretKey = new SecretKeySpec(key_Array, \"AES\");\n        _Cipher.init(Cipher.ENCRYPT_MODE, SecretKey, ivspec);\n\n        return Base64.encodeBase64String(_Cipher.doFinal(strToEncrypt.getBytes()));\n    } catch (Exception e) {\n        System.out.println(\"[Exception]:\" + e.getMessage());\n    }\n    return null;\n}\n\npublic static String decrypt(String EncryptedMessage) {\n    try {\n        //Cipher _Cipher = Cipher.getInstance(\"AES\");\n        //Cipher _Cipher = Cipher.getInstance(\"AES/ECB/PKCS5PADDING\");\n        Cipher _Cipher = Cipher.getInstance(\"AES/CBC/PKCS5PADDING\");\n\n        // Initialization vector.   \n        // It could be any value or generated using a random number generator.\n        byte[] iv = {1, 2, 3, 4, 5, 6, 6, 5, 4, 3, 2, 1, 7, 7, 7, 7};\n        IvParameterSpec ivspec = new IvParameterSpec(iv);\n\n        key_Array = Arrays.copyOf(key_Array, 32);\n\n        Key SecretKey = new SecretKeySpec(key_Array, \"AES\");\n        _Cipher.init(Cipher.DECRYPT_MODE, SecretKey, ivspec);\n\n        byte DecodedMessage[] = Base64.decodeBase64(EncryptedMessage);\n        return new String(_Cipher.doFinal(DecodedMessage));\n\n    } catch (Exception e) {\n        System.out.println(\"[Exception]:\" + e.getMessage());\n\n    }\n    return null;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24306514,"reputation":1,"user_id":18249191,"display_name":"Rupesh Watkar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645340958,"creation_date":1645241242,"answer_id":71181926,"question_id":19698272,"body_markdown":"public static void setSecretkeys(string keyvalue)\r\n    {        byte[] bytes = Encoding.Default.GetBytes(keyvalue);\r\n        keyvalue = Encoding.UTF8.GetString(bytes);\r\n\r\n        byte[] result;\r\n        SHA256 shaM = new SHA256Managed();\r\n        result = shaM.ComputeHash(bytes);\r\n\r\n        Array.Copy(result, keybytes, 16);\r\n       \r\n       \r\n        //Console.WriteLine(&quot;This is the encryption key    &quot; + Encoding.UTF8.GetString(keybytes));\r\n    }\r\n\r\n    public string Decryptxx(string text, string keyValue)\r\n    {\r\n        setSecretkeys(keyValue);\r\n        byte[] src = Convert.FromBase64String(text);\r\n        RijndaelManaged aes = new RijndaelManaged();\r\n        byte[] key = keybytes;\r\n        aes.KeySize = 128;\r\n        aes.Padding = PaddingMode.PKCS7;\r\n        aes.Mode = CipherMode.ECB;\r\n        using (ICryptoTransform decrypt = aes.CreateDecryptor(key, null))\r\n        {\r\n            byte[] dest = decrypt.TransformFinalBlock(src, 0, src.Length);\r\n            decrypt.Dispose();\r\n            return Encoding.UTF8.GetString(dest);\r\n        }\r\n    }\r\n","title":"Encrypt in java and Decrypt in C# For AES 256 bit","body":"<p>public static void setSecretkeys(string keyvalue)\n{        byte[] bytes = Encoding.Default.GetBytes(keyvalue);\nkeyvalue = Encoding.UTF8.GetString(bytes);</p>\n<pre><code>    byte[] result;\n    SHA256 shaM = new SHA256Managed();\n    result = shaM.ComputeHash(bytes);\n\n    Array.Copy(result, keybytes, 16);\n   \n   \n    //Console.WriteLine(&quot;This is the encryption key    &quot; + Encoding.UTF8.GetString(keybytes));\n}\n\npublic string Decryptxx(string text, string keyValue)\n{\n    setSecretkeys(keyValue);\n    byte[] src = Convert.FromBase64String(text);\n    RijndaelManaged aes = new RijndaelManaged();\n    byte[] key = keybytes;\n    aes.KeySize = 128;\n    aes.Padding = PaddingMode.PKCS7;\n    aes.Mode = CipherMode.ECB;\n    using (ICryptoTransform decrypt = aes.CreateDecryptor(key, null))\n    {\n        byte[] dest = decrypt.TransformFinalBlock(src, 0, src.Length);\n        decrypt.Dispose();\n        return Encoding.UTF8.GetString(dest);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":484547,"reputation":4466,"user_id":900284,"accept_rate":62,"display_name":"Frank Myat Thu"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40327,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"accepted_answer_id":19732622,"answer_count":5,"score":16,"last_activity_date":1645340958,"creation_date":1383192518,"question_id":19698272,"body_markdown":"1.I have java function which encrypt xml file and return encrypted String.\r\n\r\n\r\n\r\n    /// Java Class \r\n    import java.security.Key;\r\n    import javax.crypto.Cipher;\r\n    import javax.crypto.spec.SecretKeySpec;\r\n    import org.apache.commons.codec.binary.Base64;\r\n\r\n    public class Crypt {\r\n\t\r\n    \tpublic static String key = &quot;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&quot;;\r\n    \tpublic static byte[] key_Array = Base64.decodeBase64(key);\r\n\t\r\n    \tpublic static String encrypt(String strToEncrypt)\r\n    \t{\t\t\r\n    \t\ttry\r\n    \t\t{\t\r\n    \t\t\t//Cipher _Cipher = Cipher.getInstance(&quot;AES&quot;);\r\n    \t\t\t//Cipher _Cipher = Cipher.getInstance(&quot;AES/ECB/PKCS5PADDING&quot;);\r\n    \t\t\t//Cipher _Cipher = Cipher.getInstance(&quot;AES/CBC/PKCS5PADDING&quot;);\t\t\r\n\t\t\t\r\n    \t\t\tKey SecretKey = new SecretKeySpec(key_Array, &quot;AES&quot;);\r\n\t\t\t\r\n    \t\t\tCipher _Cipher = Cipher.getInstance(&quot;AES&quot;);\t\t\r\n    \t\t\t_Cipher.init(Cipher.ENCRYPT_MODE, SecretKey);\t\t\r\n\t\t\t\r\n    \t\t\treturn Base64.encodeBase64String(_Cipher.doFinal(strToEncrypt.getBytes()));\t\t\r\n    \t\t}\r\n    \t\tcatch (Exception e)\r\n    \t\t{\r\n    \t\t\tSystem.out.println(&quot;[Exception]:&quot;+e.getMessage());\r\n    \t\t}\r\n    \t\treturn null;\r\n    \t}\r\n\t\r\n    \tpublic static void main(String[] args) {\t\t\r\n    \t\tStringBuilder sb = new StringBuilder();\r\n    \t\tsb.append(&quot;xml file string ...&quot;);\r\n\t\t\r\n    \t\tString EncryptedString = encrypt(sb.toString());\t\t\r\n    \t\tSystem.out.println(&quot;[EncryptedString]:&quot;+EncryptedString);\r\n    \t}\r\n    }\r\n\r\n\r\n\r\n\r\n2.I have c# function which decrypt the message which is encrypted by java function.&lt;/li&gt;\r\n\r\n    /// C# Function\r\n    private static string Decrypt(string encryptedText)\r\n    {\r\n    \tRijndaelManaged aesEncryption = new RijndaelManaged();            \r\n    \taesEncryption.BlockSize = 256;\r\n    \t//aesEncryption.KeySize = 256;\r\n    \t//aesEncryption.Mode = CipherMode.CBC;\r\n    \t//aesEncryption.Padding = PaddingMode.PKCS7;\r\n\r\n    \tstring keyStr = &quot;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&quot;;\r\n    \t//string ivStr = &quot;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&quot;;        \r\n\r\n    \tbyte[] keyArr = Convert.FromBase64String(keyStr);\r\n    \t//byte[] ivArr = Convert.FromBase64String(ivStr);\r\n\t\r\n    \taesEncryption.Key = keyArr;\r\n    \t//aesEncryption.IV = ivArr;\r\n\r\n    \tICryptoTransform decrypto = aesEncryption.CreateDecryptor();\r\n\t\r\n    \tbyte[] encryptedBytes = Convert.FromBase64CharArray(encryptedText.ToCharArray(), 0, encryptedText.Length);\t\r\n    \tbyte[] decryptedData = decrypto.TransformFinalBlock(encryptedBytes, 0, encryptedBytes.Length); /// CryptographicException: Length of the data to decrypt is invalid.\t\r\n    \treturn ASCIIEncoding.UTF8.GetString(decryptedData);\t\r\n    }\r\n\r\nJava encrypt function is work well. But the problem is C# function, &lt;br&gt;when I decrypt I get below error message\r\n\r\n    CryptographicException: Length of the data to decrypt is invalid.\r\n\r\nI searched solutions by using below ref\r\n\r\n&lt;ol&gt;\r\n&lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/5295110/aes-encryption-in-java-and-decryption-in-c-sharp&quot;&gt;AES Encryption in Java and Decryption in C#&lt;/a&gt;&lt;/li&gt;\r\n&lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/9584167/c-sharp-java-aes256-encrypt-decrypt&quot;&gt;C# / Java | AES256 encrypt/decrypt&lt;/a&gt;&lt;/li&gt;\r\n&lt;li&gt;&lt;a href=&quot;http://lamahashim.blogspot.sg/2009/08/encyptiondecryption-in-c-and-java.html&quot;&gt;Encyption/Decryption in C# and Java&lt;/a&gt;&lt;/li&gt;\r\n&lt;/ol&gt;\r\n\r\nbut I still face the same error.Could anyone give me suggestion please.\r\n\r\nUpdated\r\n-------\r\n\r\nI Just change my C# crypto function. Below is my change lists\r\n&lt;ol&gt;\r\n&lt;li&gt;Block Size to 128&lt;/li&gt;\r\n&lt;li&gt;Key Size to 256&lt;/li&gt;\r\n&lt;li&gt;IV Size to 16&lt;/li&gt;\r\n&lt;li&gt;Key Size to 32&lt;/li&gt;\r\n&lt;/ol&gt;\r\n\r\n\r\n    /// Updated decrypt function\r\n    private static string Decrypt(string encryptedText)\r\n    {\r\n    \tRijndaelManaged aesEncryption = new RijndaelManaged();            \r\n    \taesEncryption.BlockSize = 128;\r\n    \taesEncryption.KeySize = 256;\r\n\t\r\n    \t//aesEncryption.Mode = CipherMode.CBC;\r\n    \taesEncryption.Padding = PaddingMode.None;\r\n\r\n    \tstring keyStr = &quot;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&quot;;\r\n    \tstring ivStr = &quot;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&quot;;           \r\n\r\n    \tbyte[] ivArr = Convert.FromBase64String(ivStr);\r\n    \tbyte[] IVkey16BytesValue = new byte[16];\r\n    \tArray.Copy(ivArr, IVkey16BytesValue, 16);\r\n\r\n    \tbyte[] keyArr = Convert.FromBase64String(keyStr);\r\n    \tbyte[] KeyArr32BytesValue = new byte[32];\r\n    \tArray.Copy(keyArr, KeyArr32BytesValue, 32);\r\n\r\n    \taesEncryption.IV = IVkey16BytesValue;\r\n    \taesEncryption.Key = KeyArr32BytesValue; \r\n\r\n    \tICryptoTransform decrypto = aesEncryption.CreateDecryptor();\r\n    \t\r\n    \tbyte[] encryptedBytes = Convert.FromBase64CharArray(encryptedText.ToCharArray(), 0, encryptedText.Length);\r\n    \tbyte[] decryptedData = decrypto.TransformFinalBlock(encryptedBytes, 0, encryptedBytes.Length); \r\n    \treturn ASCIIEncoding.UTF8.GetString(decryptedData);\r\n    }\r\n\r\nIn this time, no error occur. But I get decrypted message which i cannot read.\r\n\r\n    g:\\0\\tdY\\\\O\\rLWwHm&gt;f\\au%0\\ ..........\r\n\r\nPlease let me get your suggestion again. ","title":"Encrypt in java and Decrypt in C# For AES 256 bit","body":"<p>1.I have java function which encrypt xml file and return encrypted String.</p>\n\n<pre><code>/// Java Class \nimport java.security.Key;\nimport javax.crypto.Cipher;\nimport javax.crypto.spec.SecretKeySpec;\nimport org.apache.commons.codec.binary.Base64;\n\npublic class Crypt {\n\n    public static String key = \"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\";\n    public static byte[] key_Array = Base64.decodeBase64(key);\n\n    public static String encrypt(String strToEncrypt)\n    {       \n        try\n        {   \n            //Cipher _Cipher = Cipher.getInstance(\"AES\");\n            //Cipher _Cipher = Cipher.getInstance(\"AES/ECB/PKCS5PADDING\");\n            //Cipher _Cipher = Cipher.getInstance(\"AES/CBC/PKCS5PADDING\");      \n\n            Key SecretKey = new SecretKeySpec(key_Array, \"AES\");\n\n            Cipher _Cipher = Cipher.getInstance(\"AES\");     \n            _Cipher.init(Cipher.ENCRYPT_MODE, SecretKey);       \n\n            return Base64.encodeBase64String(_Cipher.doFinal(strToEncrypt.getBytes()));     \n        }\n        catch (Exception e)\n        {\n            System.out.println(\"[Exception]:\"+e.getMessage());\n        }\n        return null;\n    }\n\n    public static void main(String[] args) {        \n        StringBuilder sb = new StringBuilder();\n        sb.append(\"xml file string ...\");\n\n        String EncryptedString = encrypt(sb.toString());        \n        System.out.println(\"[EncryptedString]:\"+EncryptedString);\n    }\n}\n</code></pre>\n\n<p>2.I have c# function which decrypt the message which is encrypted by java function.</li></p>\n\n<pre><code>/// C# Function\nprivate static string Decrypt(string encryptedText)\n{\n    RijndaelManaged aesEncryption = new RijndaelManaged();            \n    aesEncryption.BlockSize = 256;\n    //aesEncryption.KeySize = 256;\n    //aesEncryption.Mode = CipherMode.CBC;\n    //aesEncryption.Padding = PaddingMode.PKCS7;\n\n    string keyStr = \"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\";\n    //string ivStr = \"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\";        \n\n    byte[] keyArr = Convert.FromBase64String(keyStr);\n    //byte[] ivArr = Convert.FromBase64String(ivStr);\n\n    aesEncryption.Key = keyArr;\n    //aesEncryption.IV = ivArr;\n\n    ICryptoTransform decrypto = aesEncryption.CreateDecryptor();\n\n    byte[] encryptedBytes = Convert.FromBase64CharArray(encryptedText.ToCharArray(), 0, encryptedText.Length);  \n    byte[] decryptedData = decrypto.TransformFinalBlock(encryptedBytes, 0, encryptedBytes.Length); /// CryptographicException: Length of the data to decrypt is invalid.    \n    return ASCIIEncoding.UTF8.GetString(decryptedData); \n}\n</code></pre>\n\n<p>Java encrypt function is work well. But the problem is C# function, <br>when I decrypt I get below error message</p>\n\n<pre><code>CryptographicException: Length of the data to decrypt is invalid.\n</code></pre>\n\n<p>I searched solutions by using below ref</p>\n\n<ol>\n<li><a href=\"https://stackoverflow.com/questions/5295110/aes-encryption-in-java-and-decryption-in-c-sharp\">AES Encryption in Java and Decryption in C#</a></li>\n<li><a href=\"https://stackoverflow.com/questions/9584167/c-sharp-java-aes256-encrypt-decrypt\">C# / Java | AES256 encrypt/decrypt</a></li>\n<li><a href=\"http://lamahashim.blogspot.sg/2009/08/encyptiondecryption-in-c-and-java.html\" rel=\"noreferrer\">Encyption/Decryption in C# and Java</a></li>\n</ol>\n\n<p>but I still face the same error.Could anyone give me suggestion please.</p>\n\n<h2>Updated</h2>\n\n<p>I Just change my C# crypto function. Below is my change lists</p>\n\n<ol>\n<li>Block Size to 128</li>\n<li>Key Size to 256</li>\n<li>IV Size to 16</li>\n<li>Key Size to 32</li>\n</ol>\n\n<pre><code>/// Updated decrypt function\nprivate static string Decrypt(string encryptedText)\n{\n    RijndaelManaged aesEncryption = new RijndaelManaged();            \n    aesEncryption.BlockSize = 128;\n    aesEncryption.KeySize = 256;\n\n    //aesEncryption.Mode = CipherMode.CBC;\n    aesEncryption.Padding = PaddingMode.None;\n\n    string keyStr = \"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\";\n    string ivStr = \"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\";           \n\n    byte[] ivArr = Convert.FromBase64String(ivStr);\n    byte[] IVkey16BytesValue = new byte[16];\n    Array.Copy(ivArr, IVkey16BytesValue, 16);\n\n    byte[] keyArr = Convert.FromBase64String(keyStr);\n    byte[] KeyArr32BytesValue = new byte[32];\n    Array.Copy(keyArr, KeyArr32BytesValue, 32);\n\n    aesEncryption.IV = IVkey16BytesValue;\n    aesEncryption.Key = KeyArr32BytesValue; \n\n    ICryptoTransform decrypto = aesEncryption.CreateDecryptor();\n\n    byte[] encryptedBytes = Convert.FromBase64CharArray(encryptedText.ToCharArray(), 0, encryptedText.Length);\n    byte[] decryptedData = decrypto.TransformFinalBlock(encryptedBytes, 0, encryptedBytes.Length); \n    return ASCIIEncoding.UTF8.GetString(decryptedData);\n}\n</code></pre>\n\n<p>In this time, no error occur. But I get decrypted message which i cannot read.</p>\n\n<pre><code>g:\\0\\tdY\\\\O\\rLWwHm&gt;f\\au%0\\ ..........\n</code></pre>\n\n<p>Please let me get your suggestion again. </p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":540737,"reputation":1973,"user_id":901874,"accept_rate":25,"display_name":"Piyush"},"score":0,"creation_date":1415644165,"post_id":26847259,"comment_id":42263291,"body_markdown":"i have deleted my answer i think i got your requirement wrong you just want to remove am/pm from the textclock is this correct or i am still getting this wrong? thanks.","body":"i have deleted my answer i think i got your requirement wrong you just want to remove am/pm from the textclock is this correct or i am still getting this wrong? thanks."}],"answers":[{"tags":[],"owner":{"account_id":5297045,"reputation":367,"user_id":4227943,"accept_rate":50,"display_name":"Galax"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1415634984,"creation_date":1415634984,"answer_id":26847708,"question_id":26847259,"body_markdown":"Just remove \r\n\r\n    android:format24Hour=&quot;HH:mm&quot;\r\n    android:format12Hour=&quot;HH:mm&quot;\r\n\r\nThis will make it so it automatically sets the format to what your phone is","title":"How can I set my textClock to phone&#39;s default time format?","body":"<p>Just remove </p>\n\n<pre><code>android:format24Hour=\"HH:mm\"\nandroid:format12Hour=\"HH:mm\"\n</code></pre>\n\n<p>This will make it so it automatically sets the format to what your phone is</p>\n"},{"tags":[],"owner":{"account_id":540737,"reputation":1973,"user_id":901874,"accept_rate":25,"display_name":"Piyush"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1415644863,"creation_date":1415635092,"answer_id":26847749,"question_id":26847259,"body_markdown":"     &lt;TextClock\r\n                android:format12Hour=&quot;hh:mm&quot;\r\n                android:format24Hour=&quot;kk:mm&quot;\r\n    \r\n                android:textSize=&quot;20sp&quot;\r\n                android:shadowColor=&quot;#7fffffff&quot;\r\n                android:shadowRadius=&quot;3.0&quot;\r\n    \r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot; /&gt;\r\n\r\nI used This code it is not showing me am/pm on my device. ","title":"How can I set my textClock to phone&#39;s default time format?","body":"<pre><code> &lt;TextClock\n            android:format12Hour=\"hh:mm\"\n            android:format24Hour=\"kk:mm\"\n\n            android:textSize=\"20sp\"\n            android:shadowColor=\"#7fffffff\"\n            android:shadowRadius=\"3.0\"\n\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\" /&gt;\n</code></pre>\n\n<p>I used This code it is not showing me am/pm on my device. </p>\n"},{"tags":[],"owner":{"account_id":8179721,"reputation":11,"user_id":6157332,"display_name":"Leonid Shylin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1480351700,"creation_date":1480351700,"answer_id":40849451,"question_id":26847259,"body_markdown":"Also you can try this:\r\n\r\n    TextClock textClock = (TextClock) findViewById(R.id.datetime);\r\n    textClock.setFormat12Hour(null);","title":"How can I set my textClock to phone&#39;s default time format?","body":"<p>Also you can try this:</p>\n\n<pre><code>TextClock textClock = (TextClock) findViewById(R.id.datetime);\ntextClock.setFormat12Hour(null);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12438275,"reputation":1057,"user_id":9057721,"display_name":"Style-7"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645340941,"creation_date":1645340941,"answer_id":71192072,"question_id":26847259,"body_markdown":"Replace:\r\n\r\n    android:format12Hour=&quot;hh:mm a&quot; // 11:59 PM\r\n    android:format24Hour=&quot;HH:mm&quot; // 23:59\r\n\r\n","title":"How can I set my textClock to phone&#39;s default time format?","body":"<p>Replace:</p>\n<pre><code>android:format12Hour=&quot;hh:mm a&quot; // 11:59 PM\nandroid:format24Hour=&quot;HH:mm&quot; // 23:59\n</code></pre>\n"}],"owner":{"account_id":2509747,"reputation":2060,"user_id":2182521,"accept_rate":72,"display_name":"Kala J"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2315,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":26847749,"answer_count":4,"score":1,"last_activity_date":1645340941,"creation_date":1415633679,"question_id":26847259,"body_markdown":"I have my TextClock Set as the following: \r\n\r\n    &lt;TextClock\r\n                    android:id=&quot;@+id/datetime&quot;\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_gravity=&quot;center_horizontal&quot;\r\n                    android:layout_row=&quot;1&quot;\r\n                    android:layout_column=&quot;2&quot;\r\n                    android:textColor=&quot;@color/black&quot;\r\n                    android:format24Hour=&quot;HH:mm&quot;\r\n                    android:format12Hour=&quot;HH:mm&quot;\r\n                    /&gt;\r\n\r\nRight now even though my phone is defaulted to a 12 hour time, it&#39;s showing up as a 24 hour time. \r\n\r\nI want to be able to set it to a 12 hour time zone but not permanently, only in regards to whatever my phone is set as. How can I do that? \r\n\r\nEDIT: \r\n\r\nI removed the format above but I am setting it again in the code like: \r\n\r\n    TextClock textClock = (TextClock) findViewById(R.id.datetime);\r\n            textClock.setFormat12Hour(&quot;HH:mm&quot;);\r\n            textClock.setFormat24Hour(&quot;HH:mm&quot;);\r\n\r\nWould this also affect the phone&#39;s time zone? \r\n\r\nI want to remove the AM/PM from the textclock when a format is not set in XML.\r\n\r\n","title":"How can I set my textClock to phone&#39;s default time format?","body":"<p>I have my TextClock Set as the following: </p>\n\n<pre><code>&lt;TextClock\n                android:id=\"@+id/datetime\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_gravity=\"center_horizontal\"\n                android:layout_row=\"1\"\n                android:layout_column=\"2\"\n                android:textColor=\"@color/black\"\n                android:format24Hour=\"HH:mm\"\n                android:format12Hour=\"HH:mm\"\n                /&gt;\n</code></pre>\n\n<p>Right now even though my phone is defaulted to a 12 hour time, it's showing up as a 24 hour time. </p>\n\n<p>I want to be able to set it to a 12 hour time zone but not permanently, only in regards to whatever my phone is set as. How can I do that? </p>\n\n<p>EDIT: </p>\n\n<p>I removed the format above but I am setting it again in the code like: </p>\n\n<pre><code>TextClock textClock = (TextClock) findViewById(R.id.datetime);\n        textClock.setFormat12Hour(\"HH:mm\");\n        textClock.setFormat24Hour(\"HH:mm\");\n</code></pre>\n\n<p>Would this also affect the phone's time zone? </p>\n\n<p>I want to remove the AM/PM from the textclock when a format is not set in XML.</p>\n"},{"tags":["java","maven","ubuntu","visual-studio-code","error-handling"],"comments":[{"owner":{"account_id":7929209,"reputation":7801,"user_id":5987669,"display_name":"Locke"},"score":0,"creation_date":1645338256,"post_id":71191821,"comment_id":125841640,"body_markdown":"I know it might sound obvious, but I just need to check. Are you sure you are running the right code? How did you compile it? Can you say will complete certainty that your code is inside of `target/hw2-1.0-SNAPSHOT-jar-with-dependencies.jar`?","body":"I know it might sound obvious, but I just need to check. Are you sure you are running the right code? How did you compile it? Can you say will complete certainty that your code is inside of <code>target&#47;hw2-1.0-SNAPSHOT-jar-with-dependencies.jar</code>?"},{"owner":{"account_id":22652797,"reputation":25,"user_id":16827160,"display_name":"Thomas Iskandar"},"score":0,"creation_date":1645339688,"post_id":71191821,"comment_id":125841812,"body_markdown":"Yes, I&#39;m very sure. I have checked it multiple times.","body":"Yes, I&#39;m very sure. I have checked it multiple times."},{"owner":{"account_id":7929209,"reputation":7801,"user_id":5987669,"display_name":"Locke"},"score":0,"creation_date":1645340551,"post_id":71191821,"comment_id":125841924,"body_markdown":"Can you add how you compiled it to your question? Either your code is not in fact being compiled the way you expect or something in your build configuration is not set up correctly. Comments can&#39;t be executed as code. There are no special edge cases.","body":"Can you add how you compiled it to your question? Either your code is not in fact being compiled the way you expect or something in your build configuration is not set up correctly. Comments can&#39;t be executed as code. There are no special edge cases."},{"owner":{"account_id":2739549,"reputation":594,"user_id":2361379,"display_name":"fauzimh"},"score":2,"creation_date":1645345386,"post_id":71191821,"comment_id":125842722,"body_markdown":"I think you missed to compile the new version of the file. Or you are running old copy of jar.\nI suspect the old copy is still there in the jar which still contains: throw new UnsupportedOperationException(&quot;implement this&quot;);\n\ntry deleting the jar, and rerun it. Start fresh.\nif you are using maven, make sure you run mvn clean","body":"I think you missed to compile the new version of the file. Or you are running old copy of jar. I suspect the old copy is still there in the jar which still contains: throw new UnsupportedOperationException(&quot;implement this&quot;);  try deleting the jar, and rerun it. Start fresh. if you are using maven, make sure you run mvn clean"}],"owner":{"account_id":22652797,"reputation":25,"user_id":16827160,"display_name":"Thomas Iskandar"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1645339876,"creation_date":1645338031,"question_id":71191821,"body_markdown":"So I have my main code like this \r\n```\r\nimport ExprUtils;\r\nimport Expr;\r\nimport java.io.IOException;\r\n\r\npublic class SATDriver\r\n{\r\n    public static void main(String[] args) throws Exception\r\n    {\r\n        try\r\n        {\r\n            Expr e = ExprUtils.parseFrom(System.in);\r\n            System.out.println(ExprUtils.checkSAT(e) ? &quot;SAT&quot; : &quot;UNSAT&quot;);            \r\n        }\r\n        catch (IOException ex)\r\n        {\r\n            System.err.println(ex.getMessage());\r\n            ex.printStackTrace();\r\n            System.exit(1);\r\n        }        \r\n    }\r\n}\r\n```\r\nAnd my ExprUtils code like this\r\n```\r\nimport Expr;\r\n\r\npublic class ExprUtils\r\n{    \r\n    public static boolean checkSAT(Expr expr)\r\n    {\r\n        return true; //throw new UnsupportedOperationException(&quot;implement this&quot;);\r\n    }\r\n}\r\n```\r\nMy IDE is VSCode and my OS is Ubuntu. I have the latest version of java and maven. When I run below command on VSCode terminal, it outputs my commented error. I thought it should output SAT.\r\n```\r\njava -cp target/hw2-1.0-SNAPSHOT-jar-with-dependencies.jar edu.utexas.cs.alr.SATDriver &lt; resources/sample-inputs/ex1\r\nException in thread &quot;main&quot; java.lang.UnsupportedOperationException: implement this\r\n        at edu.utexas.cs.alr.util.ExprUtils.checkSAT(ExprUtils.java:32)\r\n        at edu.utexas.cs.alr.SATDriver.main(SATDriver.java:16)\r\n```\r\nFor your info, regardless what my input value from ```resources/sample-inputs/ex1```, it doesn&#39;t matter because I set my function to always true, so you can also ignore ```Expr e```,```parseFrom```, and ```Expr expr``` because it won&#39;t change the return value of my function. Also you don&#39;t have to worry about what&#39;s inside ```Expr```, it doesn&#39;t contains any printing debug and won&#39;t change the return value.\r\n\r\nHowever it outputs my error code that I have commented and the error notification line is exactly the same (i.e. ```System.out.println``` line is on line 16 and ```return true``` line is on line 32). I don&#39;t know why this can happen, I am very confuse.\r\n\r\nAny help would be appreciated. Thanks in advance.","title":"Why my Java code print something I didn&#39;t code?","body":"<p>So I have my main code like this</p>\n<pre><code>import ExprUtils;\nimport Expr;\nimport java.io.IOException;\n\npublic class SATDriver\n{\n    public static void main(String[] args) throws Exception\n    {\n        try\n        {\n            Expr e = ExprUtils.parseFrom(System.in);\n            System.out.println(ExprUtils.checkSAT(e) ? &quot;SAT&quot; : &quot;UNSAT&quot;);            \n        }\n        catch (IOException ex)\n        {\n            System.err.println(ex.getMessage());\n            ex.printStackTrace();\n            System.exit(1);\n        }        \n    }\n}\n</code></pre>\n<p>And my ExprUtils code like this</p>\n<pre><code>import Expr;\n\npublic class ExprUtils\n{    \n    public static boolean checkSAT(Expr expr)\n    {\n        return true; //throw new UnsupportedOperationException(&quot;implement this&quot;);\n    }\n}\n</code></pre>\n<p>My IDE is VSCode and my OS is Ubuntu. I have the latest version of java and maven. When I run below command on VSCode terminal, it outputs my commented error. I thought it should output SAT.</p>\n<pre><code>java -cp target/hw2-1.0-SNAPSHOT-jar-with-dependencies.jar edu.utexas.cs.alr.SATDriver &lt; resources/sample-inputs/ex1\nException in thread &quot;main&quot; java.lang.UnsupportedOperationException: implement this\n        at edu.utexas.cs.alr.util.ExprUtils.checkSAT(ExprUtils.java:32)\n        at edu.utexas.cs.alr.SATDriver.main(SATDriver.java:16)\n</code></pre>\n<p>For your info, regardless what my input value from <code>resources/sample-inputs/ex1</code>, it doesn't matter because I set my function to always true, so you can also ignore <code>Expr e</code>,<code>parseFrom</code>, and <code>Expr expr</code> because it won't change the return value of my function. Also you don't have to worry about what's inside <code>Expr</code>, it doesn't contains any printing debug and won't change the return value.</p>\n<p>However it outputs my error code that I have commented and the error notification line is exactly the same (i.e. <code>System.out.println</code> line is on line 16 and <code>return true</code> line is on line 32). I don't know why this can happen, I am very confuse.</p>\n<p>Any help would be appreciated. Thanks in advance.</p>\n"},{"tags":["java","android","file-attributes"],"owner":{"account_id":20470126,"reputation":433,"user_id":15020768,"display_name":"Shazniq"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":199,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1645339631,"creation_date":1623352015,"question_id":67927145,"body_markdown":"I need to set user defined attributes for 2 reasons, 1- to mark encrypted files, 2- implementing a tag system like MacOS&#39; Finder has.\r\n\r\nHere&#39;s what I&#39;ve tried:\r\n\r\n    Files.setAttribute(\r\n        Paths.get(&quot;/storage/emulated/0/Download/21014040_9_Fizik_KTT.pdf&quot;),\r\n        &quot;user:tagred&quot;,\r\n        &quot;testtesttest&quot;\r\n    ));\r\ngives this error:\r\n&gt;java.lang.UnsupportedOperationException: View &#39;user&#39; not available\r\n\r\n    Path path = new File(filePath).toPath();\r\n    UserDefinedFileAttributeView view = Files.getFileAttributeView(path, UserDefinedFileAttributeView.class);\r\n\r\nHere, view is null.\r\n\r\nWhat should I use instead?\r\n","title":"Is there any way to set custom (aka user defined) file attributes on a file in Android?","body":"<p>I need to set user defined attributes for 2 reasons, 1- to mark encrypted files, 2- implementing a tag system like MacOS' Finder has.</p>\n<p>Here's what I've tried:</p>\n<pre><code>Files.setAttribute(\n    Paths.get(&quot;/storage/emulated/0/Download/21014040_9_Fizik_KTT.pdf&quot;),\n    &quot;user:tagred&quot;,\n    &quot;testtesttest&quot;\n));\n</code></pre>\n<p>gives this error:</p>\n<blockquote>\n<p>java.lang.UnsupportedOperationException: View 'user' not available</p>\n</blockquote>\n<pre><code>Path path = new File(filePath).toPath();\nUserDefinedFileAttributeView view = Files.getFileAttributeView(path, UserDefinedFileAttributeView.class);\n</code></pre>\n<p>Here, view is null.</p>\n<p>What should I use instead?</p>\n"},{"tags":["java","spring-boot","primary-key","dynamically-generated"],"answers":[{"tags":[],"owner":{"account_id":16509210,"reputation":564,"user_id":11928455,"display_name":"Amimul Ehsan Rahi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645338360,"creation_date":1645338360,"answer_id":71191847,"question_id":71191728,"body_markdown":"You need to explicitly add strategy to generated value. Otherwise it will not work. Try this: \r\n\r\n```\r\n@GeneratedValue(strategy = GenerationType.AUTO)\r\n```","title":"@GeneratedValue seemingly does not auto-generate when the Entity is being added using a POST Request","body":"<p>You need to explicitly add strategy to generated value. Otherwise it will not work. Try this:</p>\n<pre><code>@GeneratedValue(strategy = GenerationType.AUTO)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1590699,"reputation":3309,"user_id":1474069,"accept_rate":80,"display_name":"Carlitos Way"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645338443,"creation_date":1645338443,"answer_id":71191855,"question_id":71191728,"body_markdown":"Your `@GeneratedValue` is missing how to generate the value! Given that you&#39;re using PostgreSQL and such RDMS allows the creation of [database sequences][1], I&#39;ll suggest the following configuration ... In your `Song` class, you need to add the `@SequenceGenerator` annotation and make the following changes:\r\n\r\n    @Entity\r\n    @Table(name = &quot;songs&quot;, schema = &quot;dbo&quot;)\r\n    @SequenceGenerator(\r\n        name         = &quot;&lt;AnyNameThatFitsYou&gt;&quot;,\r\n        sequenceName = &quot;&lt;TheNameOfYourDatabaseSequence&gt;&quot;,\r\n        initialValue = &lt;DatabaseSeqInitVal&gt;,\r\n        allocationSize = &lt;HowManyOfTheseValuesShouldBeAllocatedInJPAMemoryForFastAccess&gt;\r\n    )\r\n    public class Song {\r\n        @Id\r\n        @GeneratedValue(\r\n            generator = &quot;&lt;TheNameYouGiveToTheSequenceGenerator&gt;&quot;,\r\n            strategy  = GenerationType.SEQUENCE\r\n        )\r\n        @Column(name = &quot;song_id&quot;)\r\n        private Integer songId;\r\n\r\n        // other properties and getter setters not needed for the question\r\n    }\r\n\r\nThat should be all ...\r\n\r\n  [1]: https://www.geeksforgeeks.org/postgresql-create-sequence/","title":"@GeneratedValue seemingly does not auto-generate when the Entity is being added using a POST Request","body":"<p>Your <code>@GeneratedValue</code> is missing how to generate the value! Given that you're using PostgreSQL and such RDMS allows the creation of <a href=\"https://www.geeksforgeeks.org/postgresql-create-sequence/\" rel=\"nofollow noreferrer\">database sequences</a>, I'll suggest the following configuration ... In your <code>Song</code> class, you need to add the <code>@SequenceGenerator</code> annotation and make the following changes:</p>\n<pre><code>@Entity\n@Table(name = &quot;songs&quot;, schema = &quot;dbo&quot;)\n@SequenceGenerator(\n    name         = &quot;&lt;AnyNameThatFitsYou&gt;&quot;,\n    sequenceName = &quot;&lt;TheNameOfYourDatabaseSequence&gt;&quot;,\n    initialValue = &lt;DatabaseSeqInitVal&gt;,\n    allocationSize = &lt;HowManyOfTheseValuesShouldBeAllocatedInJPAMemoryForFastAccess&gt;\n)\npublic class Song {\n    @Id\n    @GeneratedValue(\n        generator = &quot;&lt;TheNameYouGiveToTheSequenceGenerator&gt;&quot;,\n        strategy  = GenerationType.SEQUENCE\n    )\n    @Column(name = &quot;song_id&quot;)\n    private Integer songId;\n\n    // other properties and getter setters not needed for the question\n}\n</code></pre>\n<p>That should be all ...</p>\n"}],"owner":{"account_id":24308874,"reputation":399,"user_id":18251210,"display_name":"justanotherguy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3567,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1645338443,"creation_date":1645336846,"question_id":71191728,"body_markdown":"This is my Entity class (shortened for obvious reasons):  \r\n`Song.java`:\r\n```lang-java\r\n@Entity\r\n@Table(name = &quot;songs&quot;, schema = &quot;dbo&quot;)\r\npublic class Song {\r\n\t@Id\r\n\t@GeneratedValue\r\n\t@Column(name = &quot;song_id&quot;)\r\n\tprivate Integer songId;\r\n\r\n    // other properties and getter setters not needed for the question\r\n}\r\n```\r\n\r\n\r\n----------\r\n\r\nHere&#39;s my controller (again, shortened for obvious reasons):  \r\n`SongsController.java`:\r\n```lang-java\r\n@RestController\r\n@RequestMapping(&quot;/songs&quot;)\r\npublic class SongsController {\r\n\t\r\n\t@Autowired\r\n\tprivate SongRepository songs;\r\n\r\n    //GET, DELETE and PUT mappings not neeeded for the question\r\n\r\n\t//POST: adds a new song to the repository\r\n\t@PostMapping(&quot;/add&quot;)\r\n\tpublic void addSong(@RequestBody(required = true) Song song) throws DuplicateItemException {\r\n\t\tif(songs.existsById(song.getSongId())) {\r\n\t\t\tthrow new DuplicateItemException();  //simplest possible custom exception handler imaginable\r\n\t\t}\r\n\t\tsongs.save(song);\r\n\t}\r\n}\r\n```\r\n\r\n\r\n----------\r\n\r\nHere&#39;s my POST request from POSTMAN:\r\n```lang-json\r\n{\r\n    &quot;songName&quot;: &quot;Song3&quot;,\r\n    &quot;songDuration&quot;: &quot;490&quot;\r\n}\r\n```\r\n\r\nHere&#39;s what the function receives:\r\n\r\n```\r\nsongName: &quot;Song3&quot;\r\nsongDuration: &quot;490&quot;\r\nsongId: null\r\n```\r\n\r\n\r\n----------\r\n\r\nThe Exception that gets thrown is &quot;songId cannot be null&quot;. How do I fix this?  \r\nMy database is PostgreSQL (12.10.1).","title":"@GeneratedValue seemingly does not auto-generate when the Entity is being added using a POST Request","body":"<p>This is my Entity class (shortened for obvious reasons):<br />\n<code>Song.java</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = &quot;songs&quot;, schema = &quot;dbo&quot;)\npublic class Song {\n    @Id\n    @GeneratedValue\n    @Column(name = &quot;song_id&quot;)\n    private Integer songId;\n\n    // other properties and getter setters not needed for the question\n}\n</code></pre>\n<hr />\n<p>Here's my controller (again, shortened for obvious reasons):<br />\n<code>SongsController.java</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\n@RequestMapping(&quot;/songs&quot;)\npublic class SongsController {\n    \n    @Autowired\n    private SongRepository songs;\n\n    //GET, DELETE and PUT mappings not neeeded for the question\n\n    //POST: adds a new song to the repository\n    @PostMapping(&quot;/add&quot;)\n    public void addSong(@RequestBody(required = true) Song song) throws DuplicateItemException {\n        if(songs.existsById(song.getSongId())) {\n            throw new DuplicateItemException();  //simplest possible custom exception handler imaginable\n        }\n        songs.save(song);\n    }\n}\n</code></pre>\n<hr />\n<p>Here's my POST request from POSTMAN:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n    &quot;songName&quot;: &quot;Song3&quot;,\n    &quot;songDuration&quot;: &quot;490&quot;\n}\n</code></pre>\n<p>Here's what the function receives:</p>\n<pre><code>songName: &quot;Song3&quot;\nsongDuration: &quot;490&quot;\nsongId: null\n</code></pre>\n<hr />\n<p>The Exception that gets thrown is &quot;songId cannot be null&quot;. How do I fix this?<br />\nMy database is PostgreSQL (12.10.1).</p>\n"},{"tags":["java","base64","octave"],"comments":[{"owner":{"account_id":956558,"reputation":30924,"user_id":981744,"display_name":"Erwin Bolwidt"},"score":0,"creation_date":1455199686,"post_id":35341374,"comment_id":58390191,"body_markdown":"The result of the Java base64 encoder is just fine, you can check at https://www.base64decode.org/ (and https://www.base64encode.org/) So your question is really not about Java, but only about Gnu Octave","body":"The result of the Java base64 encoder is just fine, you can check at <a href=\"https://www.base64decode.org/\" rel=\"nofollow noreferrer\">base64decode.org</a> (and <a href=\"https://www.base64encode.org/\" rel=\"nofollow noreferrer\">base64encode.org</a>) So your question is really not about Java, but only about Gnu Octave"}],"answers":[{"tags":[],"owner":{"account_id":956558,"reputation":30924,"user_id":981744,"display_name":"Erwin Bolwidt"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1455200614,"creation_date":1455200614,"answer_id":35341910,"question_id":35341374,"body_markdown":"As the documentation shows, the Octave function `base64_decode` is not a general-purpose base64 decoder function, but rather a function that returns an array of doubles that were encoded as binary:\r\n\r\n&gt; Built-in Function: x = base64_decode (s)\r\n&gt; \r\n&gt; Decode the **double** matrix or array x from the base64 encoded string s.\r\n\r\nYou can see the same in the source code of GNU Octave:\r\n\r\n    56 Array&lt;double&gt;\r\n    57 octave_base64_decode (const std::string&amp; str)\r\n\r\n&lt;!-- --&gt;\r\nAnd the &quot;incorrect input size&quot; error is because your string is not a multiple of the size of a double (typically 8 bytes) long:\r\n\r\n    76       if ((outlen % (sizeof (double) / sizeof (char))) != 0)\r\n    77         {\r\n    78           ::free (out);\r\n    79           (*current_liboctave_error_handler)\r\n    80             (&quot;base64_decode: incorrect input size&quot;);\r\n    81         }\r\n \r\nThat&#39;s your question 1: what you&#39;re doing wrong is, the `base64_decode` function is not meant to decode strings, but only to decode binary doubles.\r\n\r\nYour question 2: the extension package `strings` provides functions `base64encode` and `base64decode` (without underscores) that *do* encode/decode strings:\r\n\r\nhttp://octave.sourceforge.net/strings/\r\n","title":"GNU Octave - base64_decode / base64_encode","body":"<p>As the documentation shows, the Octave function <code>base64_decode</code> is not a general-purpose base64 decoder function, but rather a function that returns an array of doubles that were encoded as binary:</p>\n\n<blockquote>\n  <p>Built-in Function: x = base64_decode (s)</p>\n  \n  <p>Decode the <strong>double</strong> matrix or array x from the base64 encoded string s.</p>\n</blockquote>\n\n<p>You can see the same in the source code of GNU Octave:</p>\n\n<pre><code>56 Array&lt;double&gt;\n57 octave_base64_decode (const std::string&amp; str)\n</code></pre>\n\n<p>\nAnd the \"incorrect input size\" error is because your string is not a multiple of the size of a double (typically 8 bytes) long:</p>\n\n<pre><code>76       if ((outlen % (sizeof (double) / sizeof (char))) != 0)\n77         {\n78           ::free (out);\n79           (*current_liboctave_error_handler)\n80             (\"base64_decode: incorrect input size\");\n81         }\n</code></pre>\n\n<p>That's your question 1: what you're doing wrong is, the <code>base64_decode</code> function is not meant to decode strings, but only to decode binary doubles.</p>\n\n<p>Your question 2: the extension package <code>strings</code> provides functions <code>base64encode</code> and <code>base64decode</code> (without underscores) that <em>do</em> encode/decode strings:</p>\n\n<p><a href=\"http://octave.sourceforge.net/strings/\" rel=\"nofollow\">http://octave.sourceforge.net/strings/</a></p>\n"},{"tags":[],"owner":{"account_id":21426278,"reputation":1,"user_id":18257729,"display_name":"alzi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645338045,"creation_date":1645338045,"answer_id":71191823,"question_id":35341374,"body_markdown":"Try this...\r\n\r\n```\r\n\r\n\r\nfunction r=isOctave()\r\n    a=ver;\r\n    a=a(1).Name;\r\n    r=isequal(a,&#39;Octave&#39;);\r\nend\r\n\r\nfunction r=base64decode8(d)\r\n    if isOctave\r\n        r=typecast(base64_decode(d),&#39;char&#39;);\r\n    else\r\n        r=char(matlab.net.base64decode(d));\r\n    end\r\n    r=r(r&gt;0);\r\nend\r\n\r\nfunction r=base64encode8(d)\r\n    d=[d,repmat(char(0),1,7-mod(length(d)-1,8))]; % add zero characters to expand length to factor of 8\r\n    if isOctave\r\n        r=base64_encode(uint8(d));\r\n    else\r\n        r=matlab.net.base64encode(uint8(d));\r\n    end\r\nend\r\n```\r\n\r\n","title":"GNU Octave - base64_decode / base64_encode","body":"<p>Try this...</p>\n<pre><code>\n\nfunction r=isOctave()\n    a=ver;\n    a=a(1).Name;\n    r=isequal(a,'Octave');\nend\n\nfunction r=base64decode8(d)\n    if isOctave\n        r=typecast(base64_decode(d),'char');\n    else\n        r=char(matlab.net.base64decode(d));\n    end\n    r=r(r&gt;0);\nend\n\nfunction r=base64encode8(d)\n    d=[d,repmat(char(0),1,7-mod(length(d)-1,8))]; % add zero characters to expand length to factor of 8\n    if isOctave\n        r=base64_encode(uint8(d));\n    else\n        r=matlab.net.base64encode(uint8(d));\n    end\nend\n</code></pre>\n"}],"owner":{"account_id":7356020,"reputation":21,"user_id":5600754,"display_name":"nioerd"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":439,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1645338045,"creation_date":1455199181,"question_id":35341374,"body_markdown":"i have the following problem:\r\nInside of a java program i encode a string to the base64 format:\r\n\r\n    package my;\r\n    \r\n    import java.util.Base64;\r\n    \r\n    public class base64 {\r\n    \r\n        public static void main(String[] args) {\r\n            // check for an input\r\n            if(args.length &gt; 0)\r\n            {\r\n                Base64.Encoder encoder = java.util.Base64.getEncoder();\r\n                \r\n                for(int i = 0; i&lt; args.length; ++i)\r\n                {\r\n                    String encoded = encoder.encodeToString(args[i].getBytes());\r\n                    System.out.println(encoded);\r\n                }\r\n            }\r\n        }\r\n        \r\n    }\r\n\r\nThe string ...\r\n\r\n    firstname lastname&lt;$!$&gt;email@domain.tld&lt;$!$&gt;message\r\n\r\n... results in :\r\n\r\n    Zmlyc3RuYW1lIGxhc3RuYW1lPCQhJD5lbWFpbEBkb21haW4udGxkPCQhJD5tZXNzYWdl\r\n\r\nThis seems to work fine. But if i want to decode this base64-string back to a normal string in GNU Octave with the following program:\r\n\r\n    b64encoded = &quot;Zmlyc3RuYW1lIGxhc3RuYW1lPCQhJD5lbWFpbEBkb21haW4udGxkPCQhJD5tZXNzYWdl&quot;;\r\n    decoded = base64_decode(b64encoded);\r\n    \r\n    %output the type and the string\r\n    disp(typeinfo(decoded));\r\n    disp([&quot;decoded : &quot; decoded]);\r\n\r\n... i&#39;m ending up with one of the following error messages every time.\r\n\r\n    error: base64_decode: incorrect input size\r\n\r\nor\r\n\r\n    error: base64_decode: input was not valid base64\r\n\r\n\r\nAs this was not working i tried to encode a given string with Octave, but this doesn&#39;t work because i don&#39;t understand how to transform a string to the array-type which base64_encode wants to have as an input. After that i googled around for 2 days, reading lots of posts, the docu and also tried to understand the underlying c implementation of Octaves base64_encode and base64_decode but this also doesn&#39;t helped me.\r\n\r\nSo my main questions are:\r\n\r\n 1. What is my misstake with octaves decode function?\r\n 2. How do i encode anoctave string to base64?\r\n\r\nThanks in advance,\r\n\r\nnioerd","title":"GNU Octave - base64_decode / base64_encode","body":"<p>i have the following problem:\nInside of a java program i encode a string to the base64 format:</p>\n\n<pre><code>package my;\n\nimport java.util.Base64;\n\npublic class base64 {\n\n    public static void main(String[] args) {\n        // check for an input\n        if(args.length &gt; 0)\n        {\n            Base64.Encoder encoder = java.util.Base64.getEncoder();\n\n            for(int i = 0; i&lt; args.length; ++i)\n            {\n                String encoded = encoder.encodeToString(args[i].getBytes());\n                System.out.println(encoded);\n            }\n        }\n    }\n\n}\n</code></pre>\n\n<p>The string ...</p>\n\n<pre><code>firstname lastname&lt;$!$&gt;email@domain.tld&lt;$!$&gt;message\n</code></pre>\n\n<p>... results in :</p>\n\n<pre><code>Zmlyc3RuYW1lIGxhc3RuYW1lPCQhJD5lbWFpbEBkb21haW4udGxkPCQhJD5tZXNzYWdl\n</code></pre>\n\n<p>This seems to work fine. But if i want to decode this base64-string back to a normal string in GNU Octave with the following program:</p>\n\n<pre><code>b64encoded = \"Zmlyc3RuYW1lIGxhc3RuYW1lPCQhJD5lbWFpbEBkb21haW4udGxkPCQhJD5tZXNzYWdl\";\ndecoded = base64_decode(b64encoded);\n\n%output the type and the string\ndisp(typeinfo(decoded));\ndisp([\"decoded : \" decoded]);\n</code></pre>\n\n<p>... i'm ending up with one of the following error messages every time.</p>\n\n<pre><code>error: base64_decode: incorrect input size\n</code></pre>\n\n<p>or</p>\n\n<pre><code>error: base64_decode: input was not valid base64\n</code></pre>\n\n<p>As this was not working i tried to encode a given string with Octave, but this doesn't work because i don't understand how to transform a string to the array-type which base64_encode wants to have as an input. After that i googled around for 2 days, reading lots of posts, the docu and also tried to understand the underlying c implementation of Octaves base64_encode and base64_decode but this also doesn't helped me.</p>\n\n<p>So my main questions are:</p>\n\n<ol>\n<li>What is my misstake with octaves decode function?</li>\n<li>How do i encode anoctave string to base64?</li>\n</ol>\n\n<p>Thanks in advance,</p>\n\n<p>nioerd</p>\n"},{"tags":["java","unit-testing","hamcrest"],"comments":[{"owner":{"account_id":43866,"reputation":159112,"user_id":128421,"accept_rate":50,"display_name":"the Tin Man"},"score":0,"creation_date":1645304221,"post_id":20103640,"comment_id":125837069,"body_markdown":"Please see &quot;[ask]&quot; and the linked pages and &quot;[MCVE]&quot;.  What is the minimal code that demonstrates the problem you encountered, along with the explanation of the problem, and the minimal input data and the expected result? We need to be able to duplicate the problem, and this example code won&#39;t do that.","body":"Please see &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and the linked pages and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;.  What is the minimal code that demonstrates the problem you encountered, along with the explanation of the problem, and the minimal input data and the expected result? We need to be able to duplicate the problem, and this example code won&#39;t do that."}],"answers":[{"tags":[],"owner":{"account_id":3490280,"reputation":5883,"user_id":2920151,"display_name":"pobrelkey"},"down_vote_count":0,"up_vote_count":63,"is_accepted":true,"score":63,"last_activity_date":1384971799,"creation_date":1384971799,"answer_id":20103892,"question_id":20103640,"body_markdown":"Try explicitly filling in the type parameter - assuming `actual` is a `List&lt;YourPojo&gt;`, try calling:\r\n\r\n    assertThat(actual, hasItem(Matchers.&lt;YourPojo&gt;hasProperty(&quot;id&quot;, equalTo(1L))));","title":"hamcrest hasItem and hasProperty, assert if a object with property value exists","body":"<p>Try explicitly filling in the type parameter - assuming <code>actual</code> is a <code>List&lt;YourPojo&gt;</code>, try calling:</p>\n\n<pre><code>assertThat(actual, hasItem(Matchers.&lt;YourPojo&gt;hasProperty(\"id\", equalTo(1L))));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2404464,"reputation":1067,"user_id":2101345,"display_name":"Cyva"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1480091200,"creation_date":1480091200,"answer_id":40809166,"question_id":20103640,"body_markdown":"The shorter version when you do not have to specify class type:\r\n\r\n    List&lt;IssueDefinitionDto&gt; definitions = ...; // Tested variable\r\n    ...\r\n    assertThat(definitions, hasItem(hasProperty(&quot;id&quot;, is(10L))));\r\n\r\n","title":"hamcrest hasItem and hasProperty, assert if a object with property value exists","body":"<p>The shorter version when you do not have to specify class type:</p>\n\n<pre><code>List&lt;IssueDefinitionDto&gt; definitions = ...; // Tested variable\n...\nassertThat(definitions, hasItem(hasProperty(\"id\", is(10L))));\n</code></pre>\n"}],"owner":{"account_id":2003210,"reputation":1169,"user_id":1793747,"accept_rate":33,"display_name":"wenic"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37381,"favorite_count":0,"down_vote_count":0,"up_vote_count":35,"accepted_answer_id":20103892,"answer_count":2,"score":35,"last_activity_date":1645337945,"creation_date":1384971083,"question_id":20103640,"body_markdown":"    import static org.hamcrest.MatcherAssert.assertThat;\r\n    import static org.hamcrest.Matchers.hasItem;\r\n    import static org.hamcrest.Matchers.equalTo;\r\n\r\n    assertThat(actual, hasItem(hasProperty(&quot;id&quot;, equalTo(1L))));\r\n\r\nwhere actual is a POJO with id as Long.\r\n\r\nI get,\r\n\r\n&gt; The method assertThat(T, Matcher&lt;? super T&gt;) in the type\r\n&gt; MatcherAssert is not applicable for the arguments (List&lt;Pojo&gt;,\r\n&gt; Matcher&lt;Iterable&lt;? super Object&gt;&gt;)\r\n\r\n\r\nFrom various documentation and other stackoverflow pages, it should be valid, but I get the above error.","title":"hamcrest hasItem and hasProperty, assert if a object with property value exists","body":"<pre><code>import static org.hamcrest.MatcherAssert.assertThat;\nimport static org.hamcrest.Matchers.hasItem;\nimport static org.hamcrest.Matchers.equalTo;\n\nassertThat(actual, hasItem(hasProperty(&quot;id&quot;, equalTo(1L))));\n</code></pre>\n<p>where actual is a POJO with id as Long.</p>\n<p>I get,</p>\n<blockquote>\n<p>The method assertThat(T, Matcher&lt;? super T&gt;) in the type\nMatcherAssert is not applicable for the arguments (List,\nMatcher&lt;Iterable&lt;? super Object&gt;&gt;)</p>\n</blockquote>\n<p>From various documentation and other stackoverflow pages, it should be valid, but I get the above error.</p>\n"},{"tags":["java","search","base64","encode"],"answers":[{"tags":[],"owner":{"account_id":3023,"reputation":6307,"user_id":4281,"display_name":"Kris Kumler"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1228625325,"creation_date":1228625325,"answer_id":347241,"question_id":347235,"body_markdown":"The Base64 could take on several different forms or meanings with differing algorithms or implementations.  Even looking at the examples on [Wikipedia][1], one can see that the encoded values of characters may change depending on position.  Short answer: no, you can&#39;t encode just the string and search in the larger encoded text.\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Base64#Example","title":"Base64 encoded string search","body":"<p>The Base64 could take on several different forms or meanings with differing algorithms or implementations.  Even looking at the examples on <a href=\"http://en.wikipedia.org/wiki/Base64#Example\" rel=\"nofollow noreferrer\">Wikipedia</a>, one can see that the encoded values of characters may change depending on position.  Short answer: no, you can't encode just the string and search in the larger encoded text.</p>\n"},{"tags":[],"owner":{"account_id":13320,"reputation":5695,"user_id":26671,"accept_rate":86,"display_name":"Ken Paul"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1228625382,"creation_date":1228625382,"answer_id":347244,"question_id":347235,"body_markdown":"You can&#39;t just search for an encoded substring.  Your search string will be encoded differently depending on where in the original string it appears.  I think you will need to decode the entire string and then search for your substring.","title":"Base64 encoded string search","body":"<p>You can't just search for an encoded substring.  Your search string will be encoded differently depending on where in the original string it appears.  I think you will need to decode the entire string and then search for your substring.</p>\n"},{"tags":[],"owner":{"account_id":3026,"reputation":13749,"user_id":4285,"display_name":"mweerden"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1228629192,"creation_date":1228629192,"answer_id":347296,"question_id":347235,"body_markdown":"The best way is probably to just to decode the string. However, if really necessary, it is possible to do this on the fly instead of a full decode followed by a search. You&#39;ll have to implement your one search and just decode only that part that you are currently inspecting. This is most likely only useful if you have very very big strings that you really do not want to (or cannot) store twice in memory.\r\n\r\nIf the string you search for is long enough, you can also encode that string three times with with different padding (e.g. &#39;&#39;, &#39;x&#39; and &#39;xx&#39;) and search for those without the first 4 and last 4 characters (you don&#39;t want to match the padding). When you find a match, you have to make sure the alignment corresponds with the padding and verify that the parts that you didn&#39;t match yet (due to the padding) are also in place. The latter does require some decoding, of course.","title":"Base64 encoded string search","body":"<p>The best way is probably to just to decode the string. However, if really necessary, it is possible to do this on the fly instead of a full decode followed by a search. You'll have to implement your one search and just decode only that part that you are currently inspecting. This is most likely only useful if you have very very big strings that you really do not want to (or cannot) store twice in memory.</p>\n\n<p>If the string you search for is long enough, you can also encode that string three times with with different padding (e.g. '', 'x' and 'xx') and search for those without the first 4 and last 4 characters (you don't want to match the padding). When you find a match, you have to make sure the alignment corresponds with the padding and verify that the parts that you didn't match yet (due to the padding) are also in place. The latter does require some decoding, of course.</p>\n"},{"tags":[],"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1228640137,"creation_date":1228640137,"answer_id":347400,"question_id":347235,"body_markdown":"Assuming you know the exact form of base64 encoding involved, you could encode your string as if it occurred at each of the three offsets (start%3 == 0, start%3 == 1, start%3 == 2). You&#39;d have to be cunning around the start and end of the string, as those characters will be affected by the surrounding data. You could then just use a normal IndexOf or whatever to check the middle part of the string, and then check the start and end more smartly.\r\n\r\nPersonally I wouldn&#39;t go to all of this trouble though - as the other suggestions recommend, just decode and then search. It&#39;s going to be *much* easier to get right.","title":"Base64 encoded string search","body":"<p>Assuming you know the exact form of base64 encoding involved, you could encode your string as if it occurred at each of the three offsets (start%3 == 0, start%3 == 1, start%3 == 2). You'd have to be cunning around the start and end of the string, as those characters will be affected by the surrounding data. You could then just use a normal IndexOf or whatever to check the middle part of the string, and then check the start and end more smartly.</p>\n\n<p>Personally I wouldn't go to all of this trouble though - as the other suggestions recommend, just decode and then search. It's going to be <em>much</em> easier to get right.</p>\n"},{"tags":[],"owner":{"account_id":13089410,"reputation":429,"user_id":9457431,"display_name":"recvfrom"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1623119347,"creation_date":1623119347,"answer_id":67880688,"question_id":347235,"body_markdown":"As others have noted, encoding the substring and using that directly to search can be challenging. Creating a regular expression from the substring, though, can make it a little bit easier.\r\n\r\nTo walk through an example, consider the use case of determining whether Base64-encoded data corresponds to a Windows executable. Some malware contains Base64-encoded EXEs that it will execute on infected systems, and it can be useful when doing malware analysis to detect this. A Windows executable can be identified by looking for `MZ` at the beginning of the data and `PE\\x00\\x00` somewhere after that.\r\n\r\nBase64 works by interpreting a stream of bytes as 6-bit values corresponding to, by default, the characters `A` through `Z`, `a` through `z`, `0` through `9`, `+`, and `\\`.  The chart below shows these mappings:\r\n\r\n[![Base64 Character Map][1]][1]\r\n\r\nTo begin, first convert `MZ` to its binary equivalent (in this case we can assume the character set is ASCII, so `M` is `01001101` and `Z` is `01011010`). Breaking these 16 bits into 6-bit groups yields:\r\n```\r\n010011 010101 1010xx\r\nT      V      ???\r\n```\r\n\r\nSince 16 isn&#39;t evenly divisible by 6, the last two bits are dependent on the data that follows `MZ`. Since only two bits are missing, though, there are only four possible values for that character:\r\n```\r\n101000: o\r\n101001: p\r\n101010: q\r\n101011: r\r\n```\r\n\r\nThus, to look for `MZ` at the beginning of a Base64-encoded block of text, the regular expression `^TV[o-r]` could be used.\r\n\r\nLooking for `PE\\x00\\x00` is more challenging because we don&#39;t know how many characters appear before it. There are three distinct cases to consider based on how sets of 8 bits divide into the sets of 6 bits to form the Base64 output:\r\n - Zero preceding bytes: No bits from the prior bytes affect the first character (`0 % 6 == 0`)\r\n - One preceding byte: Two bits from the prior byte affect the first character (`8 % 6 == 2`; the last two bits spill over)\r\n - Two preceding bytes: Four bits from the prior byte affect the first character (`16 % 6 == 4`; the last four bits spill over)\r\n - Three preceding bytes: No bits from the prior bytes affect the first character (`24 % 6 == 0`)\r\n - ... and so on\r\n\r\nWorking through the three cases:\r\n\r\n```\r\nZero-bit shift:\r\nP        E        \\x00     \\x00\r\n01010000 01000101 00000000 00000000\r\nbecomes:\r\n010100 000100 010100 000000 000000 00xxxx\r\nU      E      U      A      A      [A-P]\r\n\r\nTwo-bit shift:\r\n???      P        E        \\x00     \\x00\r\nxxxxxxxx 01010000 01000101 00000000 00000000\r\nbecomes:\r\nxxxxxx xx0101 000001 010100 000000 000000 0000xx\r\n       [FVl1] B      F      A      A      [A-D]\r\n\r\nFour-bit shift:\r\n???      ???      P        E        \\x00     \\x00\r\nxxxxxxxx xxxxxxxx 01010000 01000101 00000000 00000000\r\nbecomes:\r\nxxxxxx xxxxxx xxxx01             010000 010001 010000 000000 000000\r\n              [BFJNRVZdhlptx159] Q      R      Q      A      A\r\n```\r\n\r\nSo altogether, you could use the following regex to determine whether Base64-encoded data is a Windows Executable:\r\n\r\n```\r\n^TV[o-r][A-Za-z0-9\\+/]+(?:UEUAA[A-P]|[FVl1]BFAA[A-D]|[BFJNRVZdhlptx159]QRQAA)\r\n```\r\n\r\nNote that in valid executables the space between the DOS header and PE header is likely constrained, so `[A-Za-z0-9\\+/]+` could be replaced with a smaller bound.\r\n\r\n\r\n[1]: https://i.stack.imgur.com/QGM0rl.png\r\n\r\nBase64 character table from: https://en.wikipedia.org/wiki/Base64#Base64_table","title":"Base64 encoded string search","body":"<p>As others have noted, encoding the substring and using that directly to search can be challenging. Creating a regular expression from the substring, though, can make it a little bit easier.</p>\n<p>To walk through an example, consider the use case of determining whether Base64-encoded data corresponds to a Windows executable. Some malware contains Base64-encoded EXEs that it will execute on infected systems, and it can be useful when doing malware analysis to detect this. A Windows executable can be identified by looking for <code>MZ</code> at the beginning of the data and <code>PE\\x00\\x00</code> somewhere after that.</p>\n<p>Base64 works by interpreting a stream of bytes as 6-bit values corresponding to, by default, the characters <code>A</code> through <code>Z</code>, <code>a</code> through <code>z</code>, <code>0</code> through <code>9</code>, <code>+</code>, and <code>\\</code>.  The chart below shows these mappings:</p>\n<p><a href=\"https://i.stack.imgur.com/QGM0rl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QGM0rl.png\" alt=\"Base64 Character Map\" /></a></p>\n<p>To begin, first convert <code>MZ</code> to its binary equivalent (in this case we can assume the character set is ASCII, so <code>M</code> is <code>01001101</code> and <code>Z</code> is <code>01011010</code>). Breaking these 16 bits into 6-bit groups yields:</p>\n<pre><code>010011 010101 1010xx\nT      V      ???\n</code></pre>\n<p>Since 16 isn't evenly divisible by 6, the last two bits are dependent on the data that follows <code>MZ</code>. Since only two bits are missing, though, there are only four possible values for that character:</p>\n<pre><code>101000: o\n101001: p\n101010: q\n101011: r\n</code></pre>\n<p>Thus, to look for <code>MZ</code> at the beginning of a Base64-encoded block of text, the regular expression <code>^TV[o-r]</code> could be used.</p>\n<p>Looking for <code>PE\\x00\\x00</code> is more challenging because we don't know how many characters appear before it. There are three distinct cases to consider based on how sets of 8 bits divide into the sets of 6 bits to form the Base64 output:</p>\n<ul>\n<li>Zero preceding bytes: No bits from the prior bytes affect the first character (<code>0 % 6 == 0</code>)</li>\n<li>One preceding byte: Two bits from the prior byte affect the first character (<code>8 % 6 == 2</code>; the last two bits spill over)</li>\n<li>Two preceding bytes: Four bits from the prior byte affect the first character (<code>16 % 6 == 4</code>; the last four bits spill over)</li>\n<li>Three preceding bytes: No bits from the prior bytes affect the first character (<code>24 % 6 == 0</code>)</li>\n<li>... and so on</li>\n</ul>\n<p>Working through the three cases:</p>\n<pre><code>Zero-bit shift:\nP        E        \\x00     \\x00\n01010000 01000101 00000000 00000000\nbecomes:\n010100 000100 010100 000000 000000 00xxxx\nU      E      U      A      A      [A-P]\n\nTwo-bit shift:\n???      P        E        \\x00     \\x00\nxxxxxxxx 01010000 01000101 00000000 00000000\nbecomes:\nxxxxxx xx0101 000001 010100 000000 000000 0000xx\n       [FVl1] B      F      A      A      [A-D]\n\nFour-bit shift:\n???      ???      P        E        \\x00     \\x00\nxxxxxxxx xxxxxxxx 01010000 01000101 00000000 00000000\nbecomes:\nxxxxxx xxxxxx xxxx01             010000 010001 010000 000000 000000\n              [BFJNRVZdhlptx159] Q      R      Q      A      A\n</code></pre>\n<p>So altogether, you could use the following regex to determine whether Base64-encoded data is a Windows Executable:</p>\n<pre><code>^TV[o-r][A-Za-z0-9\\+/]+(?:UEUAA[A-P]|[FVl1]BFAA[A-D]|[BFJNRVZdhlptx159]QRQAA)\n</code></pre>\n<p>Note that in valid executables the space between the DOS header and PE header is likely constrained, so <code>[A-Za-z0-9\\+/]+</code> could be replaced with a smaller bound.</p>\n<p>Base64 character table from: <a href=\"https://en.wikipedia.org/wiki/Base64#Base64_table\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Base64#Base64_table</a></p>\n"},{"tags":[],"owner":{"account_id":19214812,"reputation":103,"user_id":14039774,"display_name":"nnsk"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1645337844,"creation_date":1645310945,"answer_id":71189858,"question_id":347235,"body_markdown":"You can convert both the plaintext and the base64 string to their bytes or hex representation. Then you can search the bytes or hex as you would with any other string. Then you don&#39;t have to bitshift or anything fancy like that, as there are no differences between the string encodings once they are converted to bytes.\r\n\r\nA javascript implementation can be found here: [https://github.com/nanaknihal/js-search-plaintext-within-base64][1]. \r\n\r\n\r\n  [1]: https://github.com/nanaknihal/js-search-plaintext-within-base64","title":"Base64 encoded string search","body":"<p>You can convert both the plaintext and the base64 string to their bytes or hex representation. Then you can search the bytes or hex as you would with any other string. Then you don't have to bitshift or anything fancy like that, as there are no differences between the string encodings once they are converted to bytes.</p>\n<p>A javascript implementation can be found here: <a href=\"https://github.com/nanaknihal/js-search-plaintext-within-base64\" rel=\"nofollow noreferrer\">https://github.com/nanaknihal/js-search-plaintext-within-base64</a>.</p>\n"}],"owner":{"display_name":"Dell"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7164,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":6,"score":1,"last_activity_date":1645337844,"creation_date":1228625000,"question_id":347235,"body_markdown":"I have string which is base64 encoded. How can I search this string to check if this string contains specific sub string which is not encoded? I don&#39;t want to decode that string and then search it. \r\n\r\nCan I just encode that specific sub string, and search the encoded string by using the encoded sub string?\r\n\r\nThanks,","title":"Base64 encoded string search","body":"<p>I have string which is base64 encoded. How can I search this string to check if this string contains specific sub string which is not encoded? I don't want to decode that string and then search it. </p>\n\n<p>Can I just encode that specific sub string, and search the encoded string by using the encoded sub string?</p>\n\n<p>Thanks,</p>\n"},{"tags":["java","postgresql","spring-boot","jpa","crud-repository"],"answers":[{"tags":[],"owner":{"account_id":10643203,"reputation":541,"user_id":7837530,"display_name":"Geeth"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645336289,"creation_date":1645284806,"answer_id":71186433,"question_id":71183727,"body_markdown":"Your `Song` entity class should be changed like follows. \r\n\r\n    @Entity\r\n    @Table(name = &quot;songs&quot;, schema = &quot;dbo&quot;)\r\n    public class Song {\r\n        @Id\r\n        @GeneratedValue\r\n        @Column(name = &quot;song_id&quot;)\r\n        private Integer songId;\r\n    \r\n        @Column(name = &quot;song_name&quot;)\r\n        private String songName;\r\n        \r\n        @Column(name = &quot;song_duration&quot;)\r\n        private String songDuration;\r\n        \r\n        @JoinColumn(name = &quot;album_id&quot;, referencedColumnName = &quot;album_id&quot;)\r\n        @ManyToOne\r\n        private Album album;\r\n    \r\n        public Integer getSongId() {\r\n            return songId;\r\n        }\r\n    \r\n        public void setSongId(Integer songId) {\r\n            this.songId = songId;\r\n        }\r\n    \r\n        public String getSongName() {\r\n            return songName;\r\n        }\r\n    \r\n        public void setSongName(String songName) {\r\n            this.songName = songName;\r\n        }\r\n    \r\n        public Integer getSongAlbumId() {\r\n            return songAlbumId;\r\n        }\r\n    \r\n        public void setSongAlbumId(Integer songAlbumId) {\r\n            this.songAlbumId = songAlbumId;\r\n        }\r\n    \r\n        public String getSongDuration() {\r\n            return songDuration;\r\n        }\r\n    \r\n        public void setSongDuration(String songDuration) {\r\n            this.songDuration = songDuration;\r\n        }\r\n    \r\n        public Album getAlbum() {\r\n            return album;\r\n        }\r\n    \r\n        public void setAlbum(Album album) {\r\n            this.album = album;\r\n        }\r\n    }\r\n\r\nnow you can get `alubm_id` by `song` enntity using `song.getAlbum().getAlbumId()`\r\n","title":"Incorrect auto-generated SQL query in Spring Boot (JPA) CrudRepository","body":"<p>Your <code>Song</code> entity class should be changed like follows.</p>\n<pre><code>@Entity\n@Table(name = &quot;songs&quot;, schema = &quot;dbo&quot;)\npublic class Song {\n    @Id\n    @GeneratedValue\n    @Column(name = &quot;song_id&quot;)\n    private Integer songId;\n\n    @Column(name = &quot;song_name&quot;)\n    private String songName;\n    \n    @Column(name = &quot;song_duration&quot;)\n    private String songDuration;\n    \n    @JoinColumn(name = &quot;album_id&quot;, referencedColumnName = &quot;album_id&quot;)\n    @ManyToOne\n    private Album album;\n\n    public Integer getSongId() {\n        return songId;\n    }\n\n    public void setSongId(Integer songId) {\n        this.songId = songId;\n    }\n\n    public String getSongName() {\n        return songName;\n    }\n\n    public void setSongName(String songName) {\n        this.songName = songName;\n    }\n\n    public Integer getSongAlbumId() {\n        return songAlbumId;\n    }\n\n    public void setSongAlbumId(Integer songAlbumId) {\n        this.songAlbumId = songAlbumId;\n    }\n\n    public String getSongDuration() {\n        return songDuration;\n    }\n\n    public void setSongDuration(String songDuration) {\n        this.songDuration = songDuration;\n    }\n\n    public Album getAlbum() {\n        return album;\n    }\n\n    public void setAlbum(Album album) {\n        this.album = album;\n    }\n}\n</code></pre>\n<p>now you can get <code>alubm_id</code> by <code>song</code> enntity using <code>song.getAlbum().getAlbumId()</code></p>\n"},{"tags":[],"owner":{"account_id":17216718,"reputation":376,"user_id":12464560,"display_name":"Lookslikeitsnot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1645290175,"creation_date":1645290175,"answer_id":71187182,"question_id":71183727,"body_markdown":"Your mapping is wrong. `Song` should look like this:\r\n```java\r\n@Entity\r\n@Table(name = &quot;songs&quot;, schema = &quot;dbo&quot;)\r\npublic class Song {\r\n  @Id\r\n  @GeneratedValue\r\n  @Column(name = &quot;song_id&quot;)\r\n  private Integer id;\r\n\r\n  @Column(name = &quot;song_name&quot;)\r\n  private String name;\r\n    \r\n  @Column(name = &quot;album_id&quot;)\r\n  private Integer albumId;\r\n    \r\n  @Column(name = &quot;song_duration&quot;)\r\n  private String duration;\r\n    \r\n  @ManyToOne\r\n  @JoinColumn(name = &quot;album_id&quot;, insertable = false, updatable = false)\r\n  private Album album;\r\n} \r\n```\r\nand `Album` like this:\r\n```java\r\n@Entity\r\n@Table(name = &quot;albums&quot;, schema = &quot;dbo&quot;)\r\npublic class Album {\r\n  @Id\r\n  @GeneratedValue\r\n  @Column(name = &quot;album_id&quot;)\r\n  private Integer id;\r\n  \r\n  @Column(name = &quot;album_name&quot;)\r\n  private String name;\r\n  \r\n  @Column(name = &quot;released_by&quot;)\r\n  private String releasedBy;\r\n  \r\n  @Column(name = &quot;total_duration&quot;)\r\n  private Integer totalDuration;\r\n  \r\n  @OneToMany(mappedBy = &quot;album&quot;)\r\n  private List&lt;Song&gt; songs;\r\n}\r\n```\r\n---\r\nBy the way, \r\n1. it&#39;s a little strange to have song duration formatted as String and album duration as Integer.\r\n2. if you&#39;re willing to go from CrudRepository to JpaRepository, you may want to use [Spring data projection](https://www.baeldung.com/spring-data-jpa-projections) instead of manually recasting your song to SongViewModels\r\n\r\n**[Here&#39;s a little example of interface projection for your question](https://github.com/lookslikeitsnot/stackoverflow-71183727)**","title":"Incorrect auto-generated SQL query in Spring Boot (JPA) CrudRepository","body":"<p>Your mapping is wrong. <code>Song</code> should look like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = &quot;songs&quot;, schema = &quot;dbo&quot;)\npublic class Song {\n  @Id\n  @GeneratedValue\n  @Column(name = &quot;song_id&quot;)\n  private Integer id;\n\n  @Column(name = &quot;song_name&quot;)\n  private String name;\n    \n  @Column(name = &quot;album_id&quot;)\n  private Integer albumId;\n    \n  @Column(name = &quot;song_duration&quot;)\n  private String duration;\n    \n  @ManyToOne\n  @JoinColumn(name = &quot;album_id&quot;, insertable = false, updatable = false)\n  private Album album;\n} \n</code></pre>\n<p>and <code>Album</code> like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = &quot;albums&quot;, schema = &quot;dbo&quot;)\npublic class Album {\n  @Id\n  @GeneratedValue\n  @Column(name = &quot;album_id&quot;)\n  private Integer id;\n  \n  @Column(name = &quot;album_name&quot;)\n  private String name;\n  \n  @Column(name = &quot;released_by&quot;)\n  private String releasedBy;\n  \n  @Column(name = &quot;total_duration&quot;)\n  private Integer totalDuration;\n  \n  @OneToMany(mappedBy = &quot;album&quot;)\n  private List&lt;Song&gt; songs;\n}\n</code></pre>\n<hr />\n<p>By the way,</p>\n<ol>\n<li>it's a little strange to have song duration formatted as String and album duration as Integer.</li>\n<li>if you're willing to go from CrudRepository to JpaRepository, you may want to use <a href=\"https://www.baeldung.com/spring-data-jpa-projections\" rel=\"nofollow noreferrer\">Spring data projection</a> instead of manually recasting your song to SongViewModels</li>\n</ol>\n<p><strong><a href=\"https://github.com/lookslikeitsnot/stackoverflow-71183727\" rel=\"nofollow noreferrer\">Here's a little example of interface projection for your question</a></strong></p>\n"}],"owner":{"account_id":24308874,"reputation":399,"user_id":18251210,"display_name":"justanotherguy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":472,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71187182,"answer_count":2,"score":0,"last_activity_date":1645336289,"creation_date":1645263362,"question_id":71183727,"body_markdown":"**My repository interfaces**:\r\n\r\n`SongsRepository`:\r\n```lang-java\r\npublic interface SongRepository extends CrudRepository&lt;Song, Integer&gt; {\r\n\t\r\n}\r\n```\r\n`AlbumsRepository`\r\n```lang-java\r\npublic interface AlbumRepository extends CrudRepository&lt;Album, Integer&gt; {\r\n\t\r\n}\r\n```\r\n\r\n\r\n----------\r\n\r\n\r\n**My Model classes**:\r\n\r\n`Album.java`\r\n\r\n```lang-java\r\n@Entity\r\n@Table(name = &quot;albums&quot;, schema = &quot;dbo&quot;)\r\npublic class Album {\r\n\t\r\n\t@Id\r\n\t@GeneratedValue\r\n\t@Column(name = &quot;album_id&quot;)\r\n\tprivate Integer albumId;\r\n\t\r\n\t@Column(name = &quot;album_name&quot;)\r\n\tprivate String albumName;\r\n\t\r\n\t@Column(name = &quot;released_by&quot;)\r\n\tprivate String releasedBy;\r\n\t\r\n\t@Column(name = &quot;total_duration&quot;)\r\n\tprivate Integer totalDuration;\r\n\t\r\n\t@OneToMany(targetEntity = Song.class)\r\n\tprivate List&lt;Song&gt; songs;\r\n\r\n\tpublic Integer getAlbumId() {\r\n\t\treturn albumId;\r\n\t}\r\n\r\n\tpublic void setAlbumId(Integer albumId) {\r\n\t\tthis.albumId = albumId;\r\n\t}\r\n\r\n\tpublic String getAlbumName() {\r\n\t\treturn albumName;\r\n\t}\r\n\r\n\tpublic void setAlbumName(String albumName) {\r\n\t\tthis.albumName = albumName;\r\n\t}\r\n\r\n\tpublic String getReleasedBy() {\r\n\t\treturn releasedBy;\r\n\t}\r\n\r\n\tpublic void setReleasedBy(String releasedBy) {\r\n\t\tthis.releasedBy = releasedBy;\r\n\t}\r\n\r\n\tpublic Integer getTotalDuration() {\r\n\t\treturn totalDuration;\r\n\t}\r\n\r\n\tpublic void setTotalDuration(Integer totalDuration) {\r\n\t\tthis.totalDuration = totalDuration;\r\n\t}\r\n\r\n\tpublic List&lt;Song&gt; getSongs() {\r\n\t\treturn songs;\r\n\t}\r\n\r\n\tpublic void setSongs(List&lt;Song&gt; songs) {\r\n\t\tthis.songs = songs;\r\n\t}\r\n}\r\n```\r\n\r\n`Song.java`\r\n\r\n```lang-java\r\n@Entity\r\n@Table(name = &quot;songs&quot;, schema = &quot;dbo&quot;)\r\npublic class Song {\r\n\t@Id\r\n\t@GeneratedValue\r\n\t@Column(name = &quot;song_id&quot;)\r\n\tprivate Integer songId;\r\n\r\n\t@Column(name = &quot;song_name&quot;)\r\n\tprivate String songName;\r\n\t\r\n\t@Column(name = &quot;album_id&quot;)\r\n\tprivate Integer songAlbumId;\r\n\t\r\n\t@Column(name = &quot;song_duration&quot;)\r\n\tprivate String songDuration;\r\n\t\r\n\t@ManyToOne(targetEntity = Album.class)\r\n\tprivate Album album;\r\n\r\n\tpublic Integer getSongId() {\r\n\t\treturn songId;\r\n\t}\r\n\r\n\tpublic void setSongId(Integer songId) {\r\n\t\tthis.songId = songId;\r\n\t}\r\n\r\n\tpublic String getSongName() {\r\n\t\treturn songName;\r\n\t}\r\n\r\n\tpublic void setSongName(String songName) {\r\n\t\tthis.songName = songName;\r\n\t}\r\n\r\n\tpublic Integer getSongAlbumId() {\r\n\t\treturn songAlbumId;\r\n\t}\r\n\r\n\tpublic void setSongAlbumId(Integer songAlbumId) {\r\n\t\tthis.songAlbumId = songAlbumId;\r\n\t}\r\n\r\n\tpublic String getSongDuration() {\r\n\t\treturn songDuration;\r\n\t}\r\n\r\n\tpublic void setSongDuration(String songDuration) {\r\n\t\tthis.songDuration = songDuration;\r\n\t}\r\n\r\n\tpublic Album getAlbum() {\r\n\t\treturn album;\r\n\t}\r\n\r\n\tpublic void setAlbum(Album album) {\r\n\t\tthis.album = album;\r\n\t}\r\n}\r\n```\r\n\r\n\r\n----------\r\n\r\n\r\n**My Controller**:\r\n\r\n`SongsController.java`\r\n\r\n```lang-java\r\n@RestController\r\n@RequestMapping(&quot;/songs&quot;)\r\npublic class SongsController {\r\n\t\r\n\t@Autowired\r\n\tprivate SongRepository songs;\r\n\t\r\n\t@Autowired \r\n\tprivate AlbumRepository albums;\r\n\t\r\n\t@Autowired\r\n\tprivate Services services;\r\n\t\r\n\t@GetMapping(&quot;/&quot;)\r\n\tpublic List&lt;SongViewModel&gt; getAllSongs() {\r\n\t\tList&lt;SongViewModel&gt; listOfAllSongs = new ArrayList&lt;&gt;();\r\n\t\tsongs.findAll().forEach(song -&gt; listOfAllSongs.add(services.translateToViewModel(song)));\r\n\t\treturn listOfAllSongs;\r\n\t}\r\n}\r\n```\r\n\r\n\r\n----------\r\n\r\n**Services class**:\r\n\r\n`Services.java`:\r\n\r\n```lang-java\r\n@Service\r\npublic class Services {\r\n\r\n\t@Autowired\r\n\tprivate SongRepository songs;\r\n\t\r\n\t@Autowired\r\n\tprivate AlbumRepository albums;\r\n\t\r\n\tpublic SongViewModel translateToViewModel(Song song) {\r\n\t\tSongViewModel model = new SongViewModel();\r\n\t\tmodel.setSongId(song.getSongId());\r\n\t\tmodel.setSongAlbumId(song.getSongAlbumId());\r\n\t\tmodel.setSongName(song.getSongName());\r\n\t\tmodel.setSongDuration(song.getSongDuration());\r\n\t\tmodel.setSongAlbumName(albums.findById(song.getSongAlbumId()).get().getAlbumName());\r\n\t\treturn model;\r\n\t}\r\n\t\r\n\tpublic AlbumViewModel translateToViewModel(Album album) {\r\n\t\tAlbumViewModel model = new AlbumViewModel();\r\n\t\t\r\n\t\treturn model;\r\n\t}\r\n}\r\n```\r\n\r\n\r\n----------\r\n\r\n\r\n**My View Models**:\r\n\r\n`SongViewModel`:\r\n\r\n```lang-java\r\npublic class SongViewModel {\r\n\tprivate String songName;\r\n\tprivate String songAlbumName;\r\n\tprivate String songDuration;\r\n\tprivate Integer songId;\r\n\tprivate Integer songAlbumId;\r\n\tpublic String getSongName() {\r\n\t\treturn songName;\r\n\t}\r\n\tpublic void setSongName(String songName) {\r\n\t\tthis.songName = songName;\r\n\t}\r\n\tpublic String getSongAlbumName() {\r\n\t\treturn songAlbumName;\r\n\t}\r\n\tpublic void setSongAlbumName(String songAlbumName) {\r\n\t\tthis.songAlbumName = songAlbumName;\r\n\t}\r\n\tpublic String getSongDuration() {\r\n\t\treturn songDuration;\r\n\t}\r\n\tpublic void setSongDuration(String songDuration) {\r\n\t\tthis.songDuration = songDuration;\r\n\t}\r\n\tpublic Integer getSongId() {\r\n\t\treturn songId;\r\n\t}\r\n\tpublic void setSongId(Integer songId) {\r\n\t\tthis.songId = songId;\r\n\t}\r\n\tpublic Integer getSongAlbumId() {\r\n\t\treturn songAlbumId;\r\n\t}\r\n\tpublic void setSongAlbumId(Integer songAlbumId) {\r\n\t\tthis.songAlbumId = songAlbumId;\r\n\t}\r\n}\r\n```\r\n\r\n\r\n----------\r\n\r\n**Logged SQL query**:  \r\n`select song0_.song_id as song_id1_1_, song0_.album_album_id as album_al5_1_, song0_.album_id as album_id2_1_, song0_.song_duration as song_dur3_1_, song0_.song_name as song_nam4_1_ from dbo.songs song0_`\r\n\r\n----------\r\n\r\n**Error**:  \r\n`ERROR: column song0_.album_album_id does not exist`\r\n\r\n\r\n----------\r\n\r\n\r\n[My Database Schema][1] (PostgreSQL 12.10.1)\r\n\r\n\r\n----------\r\n\r\n\r\nThis is my first time using Spring Boot and JPA. What have I done wrong here?  \r\n\r\n\r\n----------\r\n\r\n\r\nFrom the error message, I am guessing that it is trying to find a column called `album_album_id` which does not exist in my database and as a result is unable to find it; but why is it searching for that particular column? (My guess is I&#39;ve messed up the relationship attributes).\r\n\r\n  [1]: https://i.stack.imgur.com/J5Fci.png","title":"Incorrect auto-generated SQL query in Spring Boot (JPA) CrudRepository","body":"<p><strong>My repository interfaces</strong>:</p>\n<p><code>SongsRepository</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface SongRepository extends CrudRepository&lt;Song, Integer&gt; {\n    \n}\n</code></pre>\n<p><code>AlbumsRepository</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface AlbumRepository extends CrudRepository&lt;Album, Integer&gt; {\n    \n}\n</code></pre>\n<hr />\n<p><strong>My Model classes</strong>:</p>\n<p><code>Album.java</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = &quot;albums&quot;, schema = &quot;dbo&quot;)\npublic class Album {\n    \n    @Id\n    @GeneratedValue\n    @Column(name = &quot;album_id&quot;)\n    private Integer albumId;\n    \n    @Column(name = &quot;album_name&quot;)\n    private String albumName;\n    \n    @Column(name = &quot;released_by&quot;)\n    private String releasedBy;\n    \n    @Column(name = &quot;total_duration&quot;)\n    private Integer totalDuration;\n    \n    @OneToMany(targetEntity = Song.class)\n    private List&lt;Song&gt; songs;\n\n    public Integer getAlbumId() {\n        return albumId;\n    }\n\n    public void setAlbumId(Integer albumId) {\n        this.albumId = albumId;\n    }\n\n    public String getAlbumName() {\n        return albumName;\n    }\n\n    public void setAlbumName(String albumName) {\n        this.albumName = albumName;\n    }\n\n    public String getReleasedBy() {\n        return releasedBy;\n    }\n\n    public void setReleasedBy(String releasedBy) {\n        this.releasedBy = releasedBy;\n    }\n\n    public Integer getTotalDuration() {\n        return totalDuration;\n    }\n\n    public void setTotalDuration(Integer totalDuration) {\n        this.totalDuration = totalDuration;\n    }\n\n    public List&lt;Song&gt; getSongs() {\n        return songs;\n    }\n\n    public void setSongs(List&lt;Song&gt; songs) {\n        this.songs = songs;\n    }\n}\n</code></pre>\n<p><code>Song.java</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = &quot;songs&quot;, schema = &quot;dbo&quot;)\npublic class Song {\n    @Id\n    @GeneratedValue\n    @Column(name = &quot;song_id&quot;)\n    private Integer songId;\n\n    @Column(name = &quot;song_name&quot;)\n    private String songName;\n    \n    @Column(name = &quot;album_id&quot;)\n    private Integer songAlbumId;\n    \n    @Column(name = &quot;song_duration&quot;)\n    private String songDuration;\n    \n    @ManyToOne(targetEntity = Album.class)\n    private Album album;\n\n    public Integer getSongId() {\n        return songId;\n    }\n\n    public void setSongId(Integer songId) {\n        this.songId = songId;\n    }\n\n    public String getSongName() {\n        return songName;\n    }\n\n    public void setSongName(String songName) {\n        this.songName = songName;\n    }\n\n    public Integer getSongAlbumId() {\n        return songAlbumId;\n    }\n\n    public void setSongAlbumId(Integer songAlbumId) {\n        this.songAlbumId = songAlbumId;\n    }\n\n    public String getSongDuration() {\n        return songDuration;\n    }\n\n    public void setSongDuration(String songDuration) {\n        this.songDuration = songDuration;\n    }\n\n    public Album getAlbum() {\n        return album;\n    }\n\n    public void setAlbum(Album album) {\n        this.album = album;\n    }\n}\n</code></pre>\n<hr />\n<p><strong>My Controller</strong>:</p>\n<p><code>SongsController.java</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\n@RequestMapping(&quot;/songs&quot;)\npublic class SongsController {\n    \n    @Autowired\n    private SongRepository songs;\n    \n    @Autowired \n    private AlbumRepository albums;\n    \n    @Autowired\n    private Services services;\n    \n    @GetMapping(&quot;/&quot;)\n    public List&lt;SongViewModel&gt; getAllSongs() {\n        List&lt;SongViewModel&gt; listOfAllSongs = new ArrayList&lt;&gt;();\n        songs.findAll().forEach(song -&gt; listOfAllSongs.add(services.translateToViewModel(song)));\n        return listOfAllSongs;\n    }\n}\n</code></pre>\n<hr />\n<p><strong>Services class</strong>:</p>\n<p><code>Services.java</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\npublic class Services {\n\n    @Autowired\n    private SongRepository songs;\n    \n    @Autowired\n    private AlbumRepository albums;\n    \n    public SongViewModel translateToViewModel(Song song) {\n        SongViewModel model = new SongViewModel();\n        model.setSongId(song.getSongId());\n        model.setSongAlbumId(song.getSongAlbumId());\n        model.setSongName(song.getSongName());\n        model.setSongDuration(song.getSongDuration());\n        model.setSongAlbumName(albums.findById(song.getSongAlbumId()).get().getAlbumName());\n        return model;\n    }\n    \n    public AlbumViewModel translateToViewModel(Album album) {\n        AlbumViewModel model = new AlbumViewModel();\n        \n        return model;\n    }\n}\n</code></pre>\n<hr />\n<p><strong>My View Models</strong>:</p>\n<p><code>SongViewModel</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class SongViewModel {\n    private String songName;\n    private String songAlbumName;\n    private String songDuration;\n    private Integer songId;\n    private Integer songAlbumId;\n    public String getSongName() {\n        return songName;\n    }\n    public void setSongName(String songName) {\n        this.songName = songName;\n    }\n    public String getSongAlbumName() {\n        return songAlbumName;\n    }\n    public void setSongAlbumName(String songAlbumName) {\n        this.songAlbumName = songAlbumName;\n    }\n    public String getSongDuration() {\n        return songDuration;\n    }\n    public void setSongDuration(String songDuration) {\n        this.songDuration = songDuration;\n    }\n    public Integer getSongId() {\n        return songId;\n    }\n    public void setSongId(Integer songId) {\n        this.songId = songId;\n    }\n    public Integer getSongAlbumId() {\n        return songAlbumId;\n    }\n    public void setSongAlbumId(Integer songAlbumId) {\n        this.songAlbumId = songAlbumId;\n    }\n}\n</code></pre>\n<hr />\n<p><strong>Logged SQL query</strong>:<br />\n<code>select song0_.song_id as song_id1_1_, song0_.album_album_id as album_al5_1_, song0_.album_id as album_id2_1_, song0_.song_duration as song_dur3_1_, song0_.song_name as song_nam4_1_ from dbo.songs song0_</code></p>\n<hr />\n<p><strong>Error</strong>:<br />\n<code>ERROR: column song0_.album_album_id does not exist</code></p>\n<hr />\n<p><a href=\"https://i.stack.imgur.com/J5Fci.png\" rel=\"nofollow noreferrer\">My Database Schema</a> (PostgreSQL 12.10.1)</p>\n<hr />\n<p>This is my first time using Spring Boot and JPA. What have I done wrong here?</p>\n<hr />\n<p>From the error message, I am guessing that it is trying to find a column called <code>album_album_id</code> which does not exist in my database and as a result is unable to find it; but why is it searching for that particular column? (My guess is I've messed up the relationship attributes).</p>\n"},{"tags":["java","swing","jcombobox","actionlistener","comboboxmodel"],"answers":[{"tags":[],"owner":{"account_id":1247126,"reputation":4475,"user_id":1312147,"accept_rate":61,"display_name":"Sachin Mhetre"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1335933836,"creation_date":1335933836,"answer_id":10407845,"question_id":10407676,"body_markdown":"I dont think it is possible. If you set actionlistener on your combobox, then `actionPerformed()` will always going to call whenver any event is generated on combobox. It does not check whether the event is generated by the user or through program.&lt;br&gt;\r\n\r\nBut you can set **mouselistner** on your combobox, so only whenever you click on you combobox, then only the specified action will be taken.\r\n\r\nAlso another way is to **set flag** for this to check that whether the event is generated by user or through program.\r\n\r\nBut I&#39;ll preffer the first technique of setting mouselistener on combobox.","title":"Is there a way to prevent action listeners from firing when setSelectedItem() is called?","body":"<p>I dont think it is possible. If you set actionlistener on your combobox, then <code>actionPerformed()</code> will always going to call whenver any event is generated on combobox. It does not check whether the event is generated by the user or through program.<br></p>\n\n<p>But you can set <strong>mouselistner</strong> on your combobox, so only whenever you click on you combobox, then only the specified action will be taken.</p>\n\n<p>Also another way is to <strong>set flag</strong> for this to check that whether the event is generated by user or through program.</p>\n\n<p>But I'll preffer the first technique of setting mouselistener on combobox.</p>\n"},{"tags":[],"owner":{"account_id":368268,"reputation":109587,"user_id":714968,"accept_rate":90,"display_name":"mKorbel"},"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1335966438,"creation_date":1335966438,"answer_id":10415083,"question_id":10407676,"body_markdown":"for example\r\n\r\n    import java.awt.*;\r\n    import java.awt.event.*;\r\n    import java.util.*;\r\n    import javax.swing.*;\r\n    \r\n    public class ComboBoxTwo extends JFrame implements ActionListener, ItemListener {\r\n    \r\n        private static final long serialVersionUID = 1L;\r\n        private JComboBox mainComboBox;\r\n        private JComboBox subComboBox;\r\n        private Hashtable&lt;Object, Object&gt; subItems = new Hashtable&lt;Object, Object&gt;();\r\n    \r\n        public ComboBoxTwo() {\r\n            String[] items = {&quot;Select Item&quot;, &quot;Color&quot;, &quot;Shape&quot;, &quot;Fruit&quot;};\r\n            mainComboBox = new JComboBox(items);\r\n            mainComboBox.addActionListener(this);\r\n            mainComboBox.addItemListener(this);\r\n            //prevent action events from being fired when the up/down arrow keys are used\r\n            //mainComboBox.putClientProperty(&quot;JComboBox.isTableCellEditor&quot;, Boolean.TRUE);\r\n            getContentPane().add(mainComboBox, BorderLayout.WEST);\r\n            subComboBox = new JComboBox();//  Create sub combo box with multiple models\r\n            subComboBox.setPrototypeDisplayValue(&quot;XXXXXXXXXX&quot;); // JDK1.4\r\n            subComboBox.addItemListener(this);\r\n            getContentPane().add(subComboBox, BorderLayout.EAST);\r\n            String[] subItems1 = {&quot;Select Color&quot;, &quot;Red&quot;, &quot;Blue&quot;, &quot;Green&quot;};\r\n            subItems.put(items[1], subItems1);\r\n            String[] subItems2 = {&quot;Select Shape&quot;, &quot;Circle&quot;, &quot;Square&quot;, &quot;Triangle&quot;};\r\n            subItems.put(items[2], subItems2);\r\n            String[] subItems3 = {&quot;Select Fruit&quot;, &quot;Apple&quot;, &quot;Orange&quot;, &quot;Banana&quot;};\r\n            subItems.put(items[3], subItems3);\r\n    //      mainComboBox.setSelectedIndex(1);\r\n        }\r\n    \r\n        @Override\r\n        public void actionPerformed(ActionEvent e) {\r\n            String item = (String) mainComboBox.getSelectedItem();\r\n            Object o = subItems.get(item);\r\n            if (o == null) {\r\n                subComboBox.setModel(new DefaultComboBoxModel());\r\n            } else {\r\n                subComboBox.setModel(new DefaultComboBoxModel((String[]) o));\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public void itemStateChanged(ItemEvent e) {\r\n            if (e.getStateChange() == ItemEvent.SELECTED) {\r\n                if (e.getSource() == mainComboBox) {\r\n                    if (mainComboBox.getSelectedIndex() != 0) {\r\n                        FirstDialog firstDialog = new FirstDialog(ComboBoxTwo.this,\r\n                                mainComboBox.getSelectedItem().toString(), &quot;Please wait,  Searching for ..... &quot;);\r\n                    }\r\n                } \r\n            }\r\n        }\r\n    \r\n        private class FirstDialog extends JDialog {\r\n    \r\n            private static final long serialVersionUID = 1L;\r\n    \r\n            FirstDialog(final Frame parent, String winTitle, String msgString) {\r\n                super(parent, winTitle);\r\n                setModalityType(Dialog.ModalityType.APPLICATION_MODAL);\r\n                JLabel myLabel = new JLabel(msgString);\r\n                JButton bNext = new JButton(&quot;Stop Processes&quot;);\r\n                add(myLabel, BorderLayout.CENTER);\r\n                add(bNext, BorderLayout.SOUTH);\r\n                bNext.addActionListener(new ActionListener() {\r\n    \r\n                    @Override\r\n                    public void actionPerformed(ActionEvent evt) {\r\n                        setVisible(false);\r\n                    }\r\n                });\r\n                javax.swing.Timer t = new javax.swing.Timer(1000, new ActionListener() {\r\n    \r\n                    @Override\r\n                    public void actionPerformed(ActionEvent e) {\r\n                        setVisible(false);\r\n                    }\r\n                });\r\n                t.setRepeats(false);\r\n                t.start();\r\n                setLocationRelativeTo(parent);\r\n                setSize(new Dimension(400, 100));\r\n                setVisible(true);\r\n            }\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            JFrame frame = new ComboBoxTwo();\r\n            frame.setDefaultCloseOperation(EXIT_ON_CLOSE);\r\n            frame.pack();\r\n            frame.setLocationRelativeTo(null);\r\n            frame.setVisible(true);\r\n        }\r\n    }\r\n\r\n","title":"Is there a way to prevent action listeners from firing when setSelectedItem() is called?","body":"<p>for example</p>\n\n<pre><code>import java.awt.*;\nimport java.awt.event.*;\nimport java.util.*;\nimport javax.swing.*;\n\npublic class ComboBoxTwo extends JFrame implements ActionListener, ItemListener {\n\n    private static final long serialVersionUID = 1L;\n    private JComboBox mainComboBox;\n    private JComboBox subComboBox;\n    private Hashtable&lt;Object, Object&gt; subItems = new Hashtable&lt;Object, Object&gt;();\n\n    public ComboBoxTwo() {\n        String[] items = {\"Select Item\", \"Color\", \"Shape\", \"Fruit\"};\n        mainComboBox = new JComboBox(items);\n        mainComboBox.addActionListener(this);\n        mainComboBox.addItemListener(this);\n        //prevent action events from being fired when the up/down arrow keys are used\n        //mainComboBox.putClientProperty(\"JComboBox.isTableCellEditor\", Boolean.TRUE);\n        getContentPane().add(mainComboBox, BorderLayout.WEST);\n        subComboBox = new JComboBox();//  Create sub combo box with multiple models\n        subComboBox.setPrototypeDisplayValue(\"XXXXXXXXXX\"); // JDK1.4\n        subComboBox.addItemListener(this);\n        getContentPane().add(subComboBox, BorderLayout.EAST);\n        String[] subItems1 = {\"Select Color\", \"Red\", \"Blue\", \"Green\"};\n        subItems.put(items[1], subItems1);\n        String[] subItems2 = {\"Select Shape\", \"Circle\", \"Square\", \"Triangle\"};\n        subItems.put(items[2], subItems2);\n        String[] subItems3 = {\"Select Fruit\", \"Apple\", \"Orange\", \"Banana\"};\n        subItems.put(items[3], subItems3);\n//      mainComboBox.setSelectedIndex(1);\n    }\n\n    @Override\n    public void actionPerformed(ActionEvent e) {\n        String item = (String) mainComboBox.getSelectedItem();\n        Object o = subItems.get(item);\n        if (o == null) {\n            subComboBox.setModel(new DefaultComboBoxModel());\n        } else {\n            subComboBox.setModel(new DefaultComboBoxModel((String[]) o));\n        }\n    }\n\n    @Override\n    public void itemStateChanged(ItemEvent e) {\n        if (e.getStateChange() == ItemEvent.SELECTED) {\n            if (e.getSource() == mainComboBox) {\n                if (mainComboBox.getSelectedIndex() != 0) {\n                    FirstDialog firstDialog = new FirstDialog(ComboBoxTwo.this,\n                            mainComboBox.getSelectedItem().toString(), \"Please wait,  Searching for ..... \");\n                }\n            } \n        }\n    }\n\n    private class FirstDialog extends JDialog {\n\n        private static final long serialVersionUID = 1L;\n\n        FirstDialog(final Frame parent, String winTitle, String msgString) {\n            super(parent, winTitle);\n            setModalityType(Dialog.ModalityType.APPLICATION_MODAL);\n            JLabel myLabel = new JLabel(msgString);\n            JButton bNext = new JButton(\"Stop Processes\");\n            add(myLabel, BorderLayout.CENTER);\n            add(bNext, BorderLayout.SOUTH);\n            bNext.addActionListener(new ActionListener() {\n\n                @Override\n                public void actionPerformed(ActionEvent evt) {\n                    setVisible(false);\n                }\n            });\n            javax.swing.Timer t = new javax.swing.Timer(1000, new ActionListener() {\n\n                @Override\n                public void actionPerformed(ActionEvent e) {\n                    setVisible(false);\n                }\n            });\n            t.setRepeats(false);\n            t.start();\n            setLocationRelativeTo(parent);\n            setSize(new Dimension(400, 100));\n            setVisible(true);\n        }\n    }\n\n    public static void main(String[] args) {\n        JFrame frame = new ComboBoxTwo();\n        frame.setDefaultCloseOperation(EXIT_ON_CLOSE);\n        frame.pack();\n        frame.setLocationRelativeTo(null);\n        frame.setVisible(true);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11341402,"reputation":975,"user_id":8315348,"display_name":"Andrew Puglionesi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645336109,"creation_date":1645336109,"answer_id":71191676,"question_id":10407676,"body_markdown":"One option is to add a PopupMenuListener instead of an action listener. Its `popupMenuWillBecomeInvisible` method will fire after the user manually selects an item, but not after `setSelectedItem`, `setSelectedIndex`, or `addItem` is called.\r\n\r\nI&#39;ve found one limitation to this method: if the user keeps the dropdown closed and selects an item by typing its first letter, the popup listener won&#39;t fire. In the example below, I worked around this by preventing the user from selecting items by typing alphabetical characters.\r\n\r\n```java\r\nimport java.awt.event.*;\r\nimport java.awt.*;\r\nimport javax.swing.*;\r\nimport javax.swing.event.*;\r\n\r\npublic class ComboBoxExample extends JFrame {\r\n\r\n\tpublic static void main(String[] args) {\r\n\r\n\t\tJFrame frame = new JFrame(&quot;JComboBox Example&quot;);\r\n\r\n        // Create combo box\r\n\t\tJComboBox homeTypeComboBox = new JComboBox(new String[]{&quot;House&quot;, &quot;Condo&quot;, &quot;Apartment&quot;});\r\n        \r\n        // add the popup listener\r\n        homeTypeComboBox.addPopupMenuListener(new HomeTypeChangeListener());\r\n\r\n        // prevent user from selecting an item by typing its first letter\r\n        homeTypeComboBox.setKeySelectionManager((key, model) -&gt; { return -1; });\r\n\r\n\t\tJPanel panel = new JPanel();\r\n\t\tpanel.add(homeTypeComboBox);\r\n\r\n\t\tframe.add(panel);\r\n\t\tframe.setSize(300, 150);\r\n\t\tframe.show();\r\n\r\n        // These will not generate print statements\r\n        homeTypeComboBox.setSelectedItem(&quot;House&quot;);\r\n        homeTypeComboBox.setSelectedItem(&quot;Condo&quot;);\r\n        homeTypeComboBox.setSelectedItem(&quot;Apartment&quot;);\r\n\t}\r\n\r\n    private static class HomeTypeChangeListener implements PopupMenuListener {\r\n        \r\n        public void popupMenuWillBecomeVisible(PopupMenuEvent e) {}\r\n\r\n        public void popupMenuWillBecomeInvisible(PopupMenuEvent e) {\r\n            // triggered when user makes a dropdown selection\r\n            System.out.println(&quot;User changed the dropdown selection. This will not be triggered for programmatic&quot; \r\n                + &quot; calls to JComboBox::setSelectedItem, JComboBox::setSelectedIndex, or JComboBox::addItem.&quot;);\r\n        }\r\n\r\n        public void popupMenuCanceled(PopupMenuEvent e) {}\r\n    }\r\n\r\n}\r\n\r\n```","title":"Is there a way to prevent action listeners from firing when setSelectedItem() is called?","body":"<p>One option is to add a PopupMenuListener instead of an action listener. Its <code>popupMenuWillBecomeInvisible</code> method will fire after the user manually selects an item, but not after <code>setSelectedItem</code>, <code>setSelectedIndex</code>, or <code>addItem</code> is called.</p>\n<p>I've found one limitation to this method: if the user keeps the dropdown closed and selects an item by typing its first letter, the popup listener won't fire. In the example below, I worked around this by preventing the user from selecting items by typing alphabetical characters.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.awt.event.*;\nimport java.awt.*;\nimport javax.swing.*;\nimport javax.swing.event.*;\n\npublic class ComboBoxExample extends JFrame {\n\n    public static void main(String[] args) {\n\n        JFrame frame = new JFrame(&quot;JComboBox Example&quot;);\n\n        // Create combo box\n        JComboBox homeTypeComboBox = new JComboBox(new String[]{&quot;House&quot;, &quot;Condo&quot;, &quot;Apartment&quot;});\n        \n        // add the popup listener\n        homeTypeComboBox.addPopupMenuListener(new HomeTypeChangeListener());\n\n        // prevent user from selecting an item by typing its first letter\n        homeTypeComboBox.setKeySelectionManager((key, model) -&gt; { return -1; });\n\n        JPanel panel = new JPanel();\n        panel.add(homeTypeComboBox);\n\n        frame.add(panel);\n        frame.setSize(300, 150);\n        frame.show();\n\n        // These will not generate print statements\n        homeTypeComboBox.setSelectedItem(&quot;House&quot;);\n        homeTypeComboBox.setSelectedItem(&quot;Condo&quot;);\n        homeTypeComboBox.setSelectedItem(&quot;Apartment&quot;);\n    }\n\n    private static class HomeTypeChangeListener implements PopupMenuListener {\n        \n        public void popupMenuWillBecomeVisible(PopupMenuEvent e) {}\n\n        public void popupMenuWillBecomeInvisible(PopupMenuEvent e) {\n            // triggered when user makes a dropdown selection\n            System.out.println(&quot;User changed the dropdown selection. This will not be triggered for programmatic&quot; \n                + &quot; calls to JComboBox::setSelectedItem, JComboBox::setSelectedIndex, or JComboBox::addItem.&quot;);\n        }\n\n        public void popupMenuCanceled(PopupMenuEvent e) {}\n    }\n\n}\n\n</code></pre>\n"}],"owner":{"display_name":"user259175"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7193,"favorite_count":0,"down_vote_count":3,"up_vote_count":8,"accepted_answer_id":10415083,"answer_count":3,"score":5,"last_activity_date":1645336109,"creation_date":1335932546,"question_id":10407676,"body_markdown":"I have a program with multiple comboboxes, each with their own action listener. Selecting an item from any of the comboboxes will change the items in one or more of the other comboboxes. The problem I&#39;m running into is that calling setSelectedItem() for one combobox will fire the action listener for another combobox, which in turn fires the action listeners of the other ones, etc etc.\r\n\r\nIs there a way to avoid this, either by only allowing the action listeners to be fired from user input, or by detecting that the action was not fired from user input? Say that not using setSelectedItem() is not an option, because I want the program to be able to set the  currently selected item for each comboxbox. Thanks in advance for any help.","title":"Is there a way to prevent action listeners from firing when setSelectedItem() is called?","body":"<p>I have a program with multiple comboboxes, each with their own action listener. Selecting an item from any of the comboboxes will change the items in one or more of the other comboboxes. The problem I'm running into is that calling setSelectedItem() for one combobox will fire the action listener for another combobox, which in turn fires the action listeners of the other ones, etc etc.</p>\n\n<p>Is there a way to avoid this, either by only allowing the action listeners to be fired from user input, or by detecting that the action was not fired from user input? Say that not using setSelectedItem() is not an option, because I want the program to be able to set the  currently selected item for each comboxbox. Thanks in advance for any help.</p>\n"},{"tags":["java","discord-jda"],"answers":[{"tags":[],"owner":{"account_id":14719989,"reputation":5877,"user_id":10630900,"display_name":"Minn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645196502,"creation_date":1644842495,"answer_id":71112083,"question_id":71111006,"body_markdown":"You can use `guild.retrieveMembersByPrefix(...)` &lt;sup&gt;[\\[1\\]][1]&lt;/sup&gt; to get members by name, which you can then filter again to get the exact user you want to ban. This only works if the user is actually a member of the guild, discord does not offer any way to get IDs based on just the name.\r\n\r\n```java\r\n// name is just the username (without the discriminator #1234)\r\nguild.retrieveMembersByPrefix(name, 100).onSuccess(members -&gt; {\r\n  // members is a list of members for the given name\r\n  Member member = members.stream()\r\n    .filter(m -&gt; m.getUser().getAsTag().equals(usertag)) // filter by Name#Discrim like Someone#1234\r\n    .findFirst().orElse(null);\r\n  if (member != null)\r\n    member.ban(0).queue();\r\n  else\r\n    System.out.println(&quot;Couldn&#39;t find a member with that name&quot;);\r\n});\r\n```\r\n\r\n[1]: https://ci.dv8tion.net/job/JDA/javadoc/net/dv8tion/jda/api/entities/Guild.html#retrieveMembersByPrefix(java.lang.String,int)","title":"How to get the ID of a User by its username using JDA","body":"<p>You can use <code>guild.retrieveMembersByPrefix(...)</code> <sup><a href=\"https://ci.dv8tion.net/job/JDA/javadoc/net/dv8tion/jda/api/entities/Guild.html#retrieveMembersByPrefix(java.lang.String,int)\" rel=\"nofollow noreferrer\">[1]</a></sup> to get members by name, which you can then filter again to get the exact user you want to ban. This only works if the user is actually a member of the guild, discord does not offer any way to get IDs based on just the name.</p>\n<pre class=\"lang-java prettyprint-override\"><code>// name is just the username (without the discriminator #1234)\nguild.retrieveMembersByPrefix(name, 100).onSuccess(members -&gt; {\n  // members is a list of members for the given name\n  Member member = members.stream()\n    .filter(m -&gt; m.getUser().getAsTag().equals(usertag)) // filter by Name#Discrim like Someone#1234\n    .findFirst().orElse(null);\n  if (member != null)\n    member.ban(0).queue();\n  else\n    System.out.println(&quot;Couldn't find a member with that name&quot;);\n});\n</code></pre>\n"}],"owner":{"account_id":23541516,"reputation":15,"user_id":17585650,"display_name":"Yashwardhan Bisht"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":778,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1645335593,"creation_date":1644837604,"question_id":71111006,"body_markdown":"I was making a discord bot and to make a command for it to ban a user, I found that this line of code works fine. However, to ban the user, it needs the ID.  \r\nCode:\r\n\r\n    message.getGuild().ban(args[1], 0).queue();\r\n    // Args[1] is the ID of the user needed to be banned\r\n    // message is the argument in onMessageRecieved\r\n\r\nI want that it should work when given the name of the user.\r\nFor eg:  \r\nWhen I type !-ban Someone#1234 (!- is the prefix) it should ban the user.  \r\nIs there any separate command to ban the user by its username? if not, can I get the ID of the user by the username?","title":"How to get the ID of a User by its username using JDA","body":"<p>I was making a discord bot and to make a command for it to ban a user, I found that this line of code works fine. However, to ban the user, it needs the ID.<br />\nCode:</p>\n<pre><code>message.getGuild().ban(args[1], 0).queue();\n// Args[1] is the ID of the user needed to be banned\n// message is the argument in onMessageRecieved\n</code></pre>\n<p>I want that it should work when given the name of the user.\nFor eg:<br />\nWhen I type !-ban Someone#1234 (!- is the prefix) it should ban the user.<br />\nIs there any separate command to ban the user by its username? if not, can I get the ID of the user by the username?</p>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":11224986,"reputation":2603,"user_id":8234870,"display_name":"Udesh"},"score":2,"creation_date":1645331541,"post_id":71191393,"comment_id":125840907,"body_markdown":"use List&lt;Object&gt;","body":"use List&lt;Object&gt;"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":3,"creation_date":1645331574,"post_id":71191393,"comment_id":125840914,"body_markdown":"Create an array of `Object`: `Object[] myArray = new Object[7];` (replace 7 with whatever size you need)","body":"Create an array of <code>Object</code>: <code>Object[] myArray = new Object[7];</code> (replace 7 with whatever size you need)"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1645331632,"post_id":71191393,"comment_id":125840920,"body_markdown":"Every Java class implicitly extends `java.lang.Object`.","body":"Every Java class implicitly extends <code>java.lang.Object</code>."},{"owner":{"account_id":22963383,"reputation":59,"user_id":17360950,"display_name":"giotto1"},"score":0,"creation_date":1645332716,"post_id":71191393,"comment_id":125841053,"body_markdown":"@tgdavies Like this? : `Object[] mixedObjects = new Object[2];\n\t\t\n\t\tmixedObjects[0] = new Plane();\n\t\tmixedObjects[1] = new Boat();`","body":"@tgdavies Like this? : <code>Object[] mixedObjects = new Object[2]; \t\t \t\tmixedObjects[0] = new Plane(); \t\tmixedObjects[1] = new Boat();</code>"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1645332755,"post_id":71191393,"comment_id":125841057,"body_markdown":"Yes, that&#39;s right.","body":"Yes, that&#39;s right."}],"answers":[{"tags":[],"owner":{"account_id":11224986,"reputation":2603,"user_id":8234870,"display_name":"Udesh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1645335072,"creation_date":1645332151,"answer_id":71191426,"question_id":71191393,"body_markdown":"In the code provided `class` is declared as\r\n\r\n    public class Plane\r\n\r\nbut `constructors` created:\r\n\r\n    public Airplane(){...}\r\nand\r\n\r\n    public Airplane(String airplaneBrand, double airplanePrice, int airplanePower) {...}\r\n\r\nconstructor names should be same as class name.\r\n\r\n\r\nSolution:\r\n--------\r\n\r\nCreate a `Object[]` array and use `instanceof` `operator` to find the `class` of the object :\r\n\r\n\r\n    import java.util.*;\r\n    class Airplane {\r\n    \r\n    \r\n    \tprivate String brand;\r\n    \tprivate double price; \r\n    \tprivate int horsepower;\r\n    \r\n    \r\n    \tpublic Airplane() {\r\n    \t\tbrand = &quot;example&quot;;\r\n    \t\tprice = 700000; \r\n    \t\thorsepower = 1750;\r\n    \t}\r\n    \r\n    \tpublic Airplane(String airplaneBrand, double airplanePrice, int airplanePower) {\r\n    \t\tthis.brand = &quot;AirIndia&quot;;\r\n    \t\tthis.price = airplanePrice;\r\n    \t\tthis.horsepower = airplanePower;\r\n    \t}\r\n    \tpublic String getBrand(){\r\n    \t\treturn brand;\r\n    \t}\r\n    \r\n    }\r\n    class Boat {\r\n    \r\n    \tprivate double weight;\r\n    \tprivate double price;\r\n    \r\n    \tpublic Boat() {\r\n    \t\tweight = 3475.6;\r\n    \t\tprice = 700000.99;\r\n    \t}\r\n    \r\n    \tpublic Boat(double boatWeight, double boatPrice) {\r\n    \t\tweight = boatWeight;\r\n    \t\tprice = boatPrice;\r\n    \t}\r\n    \tpublic double getWeight(){\r\n    \t\treturn weight;\r\n    \t}\r\n    }\r\n    \r\n    \r\n    public class Test{\r\n    \tpublic static void main(String ... $){\r\n    \t\tvar out = System.out;\r\n    \t\tObject [] array = new Object[5];\r\n    \t\tarray[0] = new Boat();\r\n    \t\tarray[1] = new Airplane();\r\n    \t\tarray[2] = new Boat();\r\n    \t\tarray[3] = new String(&quot;Foo loves Bar&quot;);\r\n    \t\tfor(var o : array){\r\n    \t\t\tif(o instanceof Boat b){\r\n    \t\t\t\tout.println(b.getWeight());\r\n    \t\t\t}\r\n    \t\t\tif(o instanceof Airplane plane){\r\n    \t\t\t\tout.println(plane.getBrand());\r\n    \t\t\t}\r\n    \t\t\tif(o instanceof String s){\r\n    \t\t\t\tout.println(s);\r\n    \t\t\t}\r\n    \r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nedit: thanks [tgdavies][1] for mentioning the efficient use of `instanceof` \r\n\r\noutput:\r\n-------\r\n\r\n    $ javac Test.java &amp;&amp; java Test\r\n    3475.6\r\n    example\r\n    3475.6\r\n    Foo loves Bar\r\n\r\n  [1]: https://stackoverflow.com/users/11002/tgdavies\r\n\r\n","title":"Is it possible to create an array which contains objects from several classes that don&#39;t necessarily extend each other?","body":"<p>In the code provided <code>class</code> is declared as</p>\n<pre><code>public class Plane\n</code></pre>\n<p>but <code>constructors</code> created:</p>\n<pre><code>public Airplane(){...}\n</code></pre>\n<p>and</p>\n<pre><code>public Airplane(String airplaneBrand, double airplanePrice, int airplanePower) {...}\n</code></pre>\n<p>constructor names should be same as class name.</p>\n<h2>Solution:</h2>\n<p>Create a <code>Object[]</code> array and use <code>instanceof</code> <code>operator</code> to find the <code>class</code> of the object :</p>\n<pre><code>import java.util.*;\nclass Airplane {\n\n\n    private String brand;\n    private double price; \n    private int horsepower;\n\n\n    public Airplane() {\n        brand = &quot;example&quot;;\n        price = 700000; \n        horsepower = 1750;\n    }\n\n    public Airplane(String airplaneBrand, double airplanePrice, int airplanePower) {\n        this.brand = &quot;AirIndia&quot;;\n        this.price = airplanePrice;\n        this.horsepower = airplanePower;\n    }\n    public String getBrand(){\n        return brand;\n    }\n\n}\nclass Boat {\n\n    private double weight;\n    private double price;\n\n    public Boat() {\n        weight = 3475.6;\n        price = 700000.99;\n    }\n\n    public Boat(double boatWeight, double boatPrice) {\n        weight = boatWeight;\n        price = boatPrice;\n    }\n    public double getWeight(){\n        return weight;\n    }\n}\n\n\npublic class Test{\n    public static void main(String ... $){\n        var out = System.out;\n        Object [] array = new Object[5];\n        array[0] = new Boat();\n        array[1] = new Airplane();\n        array[2] = new Boat();\n        array[3] = new String(&quot;Foo loves Bar&quot;);\n        for(var o : array){\n            if(o instanceof Boat b){\n                out.println(b.getWeight());\n            }\n            if(o instanceof Airplane plane){\n                out.println(plane.getBrand());\n            }\n            if(o instanceof String s){\n                out.println(s);\n            }\n\n        }\n    }\n}\n</code></pre>\n<p>edit: thanks <a href=\"https://stackoverflow.com/users/11002/tgdavies\">tgdavies</a> for mentioning the efficient use of <code>instanceof</code></p>\n<h2>output:</h2>\n<pre><code>$ javac Test.java &amp;&amp; java Test\n3475.6\nexample\n3475.6\nFoo loves Bar\n</code></pre>\n"}],"owner":{"account_id":22963383,"reputation":59,"user_id":17360950,"display_name":"giotto1"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":115,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71191426,"answer_count":1,"score":1,"last_activity_date":1645335072,"creation_date":1645331483,"question_id":71191393,"body_markdown":"I currently have 7 different classes in my project, with 5 of those classes being related to each other (4 subclasses and 1 superclass) and the other two being related as well (1 subclass and 1 superclass). My assignment asks me to create an array which holds one object from each of these classes. My question is how can I create an array that can hold objects from unrelated classes? Here is a (much) shorter version of my code for example/clarity purposes: \r\n\r\n```\r\n//First superclass\r\npackage Plane;\r\npublic class Plane {\r\n\t\r\n\t\r\n\t private String brand;\r\n\t private double price; \r\n\t private int horsepower;\r\n\t\r\n\t \r\n\tpublic Airplane() {\r\n\t\tbrand = &quot;example&quot;;\r\n\t\tprice = 700000; \r\n\t\thorsepower = 1750;\r\n\t}\r\n\r\n    public Airplane(String airplaneBrand, double airplanePrice, int airplanePower) {\r\n\t\tthis.brand = planeBrand;\r\n\t\tthis.price = planePrice;\r\n\t\tthis.horsepower = airplanePower;\r\n\t}\r\n```\r\n\r\n\r\n```\r\n//Second superclass\r\npackage Boat;\r\npublic class Boat {\r\n\r\n\tprivate double weight;\r\n\tprivate double price;\r\n\t\r\n\tpublic Boat() {\r\n\t\tweight = 3475.6;\r\n\t\tprice = 700000.99;\r\n\t}\r\n\t\r\n\tpublic Boat(double boatWeight, double boatPrice) {\r\n\t\tweight = boatWeight;\r\n\t\tprice = boatPrice;\r\n\t}\r\n\t\r\n```\r\n\r\nThe exact wording of the assignment is &quot;Your array must include at least one object from each of the classes.&quot; From my understanding, this is what I described above as having one array that can hold objects from both the Plane class and the Boat class. \r\nThe kicker is that I cannot import any of Java&#39;s built-in classes (i.e ArrayList, Hash Maps, etc.) I apologize in advance for any clarity issues as I&#39;m only starting out with programming in general, I&#39;d be happy to edit/add information if needed.","title":"Is it possible to create an array which contains objects from several classes that don&#39;t necessarily extend each other?","body":"<p>I currently have 7 different classes in my project, with 5 of those classes being related to each other (4 subclasses and 1 superclass) and the other two being related as well (1 subclass and 1 superclass). My assignment asks me to create an array which holds one object from each of these classes. My question is how can I create an array that can hold objects from unrelated classes? Here is a (much) shorter version of my code for example/clarity purposes:</p>\n<pre><code>//First superclass\npackage Plane;\npublic class Plane {\n    \n    \n     private String brand;\n     private double price; \n     private int horsepower;\n    \n     \n    public Airplane() {\n        brand = &quot;example&quot;;\n        price = 700000; \n        horsepower = 1750;\n    }\n\n    public Airplane(String airplaneBrand, double airplanePrice, int airplanePower) {\n        this.brand = planeBrand;\n        this.price = planePrice;\n        this.horsepower = airplanePower;\n    }\n</code></pre>\n<pre><code>//Second superclass\npackage Boat;\npublic class Boat {\n\n    private double weight;\n    private double price;\n    \n    public Boat() {\n        weight = 3475.6;\n        price = 700000.99;\n    }\n    \n    public Boat(double boatWeight, double boatPrice) {\n        weight = boatWeight;\n        price = boatPrice;\n    }\n    \n</code></pre>\n<p>The exact wording of the assignment is &quot;Your array must include at least one object from each of the classes.&quot; From my understanding, this is what I described above as having one array that can hold objects from both the Plane class and the Boat class.\nThe kicker is that I cannot import any of Java's built-in classes (i.e ArrayList, Hash Maps, etc.) I apologize in advance for any clarity issues as I'm only starting out with programming in general, I'd be happy to edit/add information if needed.</p>\n"},{"tags":["java","spring-boot","docker","maven","executable-jar"],"comments":[{"owner":{"account_id":2739549,"reputation":594,"user_id":2361379,"display_name":"fauzimh"},"score":0,"creation_date":1645334118,"post_id":71190395,"comment_id":125841192,"body_markdown":"if you directly run the jar file without docker, does it still work?","body":"if you directly run the jar file without docker, does it still work?"},{"owner":{"account_id":15649777,"reputation":38,"user_id":11291380,"display_name":"Ekestfa"},"score":0,"creation_date":1645346404,"post_id":71190395,"comment_id":125842911,"body_markdown":"I have installed `Apache Maven 3.6.3`,  first executed `mvn clean package spring-boot:repackage`, after that, executed `java -jar ./target/demo-0.0.1-SNAPSHOT.jar`,  and it works correctly.","body":"I have installed <code>Apache Maven 3.6.3</code>,  first executed <code>mvn clean package spring-boot:repackage</code>, after that, executed <code>java -jar .&#47;target&#47;demo-0.0.1-SNAPSHOT.jar</code>,  and it works correctly."}],"answers":[{"tags":[],"owner":{"account_id":2739549,"reputation":594,"user_id":2361379,"display_name":"fauzimh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645334808,"creation_date":1645334808,"answer_id":71191589,"question_id":71190395,"body_markdown":"I think you missed to use the plugin. pluginManagement won&#39;t really activate the plugin, but it is just to make the plugin available for the maven sub module to use. Basically, pluginManagement is just to declare that this plugin is available for use. \r\n\r\nsee: https://stackoverflow.com/questions/26736876/difference-between-plugins-and-pluginmanagement-tag-in-maven-pom-xml\r\n\r\nYou should still use this plugin below:\r\n\r\n```\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;mainClass&gt;com.example.demo.DemoApplication&lt;/mainClass&gt;\r\n                &lt;/configuration&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;repackage&lt;/id&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;repackage&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n```\r\n\r\nYou might be able to remove the executions tag from the plugin above as you have declared it in your pluginManagement. Try it out and see. Try running the standalone jar without the docker first.","title":"Docker spring-boot-maven-plugin java jar ClassNotFoundException","body":"<p>I think you missed to use the plugin. pluginManagement won't really activate the plugin, but it is just to make the plugin available for the maven sub module to use. Basically, pluginManagement is just to declare that this plugin is available for use.</p>\n<p>see: <a href=\"https://stackoverflow.com/questions/26736876/difference-between-plugins-and-pluginmanagement-tag-in-maven-pom-xml\">Difference between &lt;plugins&gt; and &lt;pluginManagement&gt; tag in Maven `pom.xml`</a></p>\n<p>You should still use this plugin below:</p>\n<pre><code>    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;mainClass&gt;com.example.demo.DemoApplication&lt;/mainClass&gt;\n                &lt;/configuration&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;repackage&lt;/id&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;repackage&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n</code></pre>\n<p>You might be able to remove the executions tag from the plugin above as you have declared it in your pluginManagement. Try it out and see. Try running the standalone jar without the docker first.</p>\n"}],"owner":{"account_id":15649777,"reputation":38,"user_id":11291380,"display_name":"Ekestfa"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":918,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1645334808,"creation_date":1645317108,"question_id":71190395,"body_markdown":"I tried use `docker-compose`, `docker` build a demo Spring-boot project and run on `docker`. But created the jar file, and that throw `ClassNotFoundException`, when the `CMD [ &quot;java&quot;, &quot;-jar&quot;, &quot;/usr/local/lib/demo.jar&quot;]` command has triggered from `Dockerfile`.\r\n+ I did use `docker-compose run` to build &amp; run.\r\n+ I tried many solution from `StackOverflow`, didn&#39;t solve the problem.\r\n\r\nMy `docker-compose` file:\r\n```sh\r\nversion: &#39;3.5&#39;\r\nservices:\r\n  demo-service:\r\n    container_name: demo-service\r\n    build:\r\n      context: ./demo\r\n      dockerfile: dockerfile.demoservice.mvn\r\n    ports:\r\n      - &quot;9091:9091&quot;\r\n    # depends_on:\r\n    #   - demo-service-db\r\n```\r\n\r\n`Dockerfile` file:\r\n```sh\r\nFROM maven:3.6.3-jdk-11-slim AS build\r\n\r\nRUN mkdir /home/app\r\nCOPY ./pom.xml /home/app/pom.xml\r\nCOPY src /home/app\r\nRUN mvn -f /home/app/pom.xml clean package spring-boot:repackage\r\nRUN ls /home/app/target\r\n\r\n# Package stage\r\nFROM openjdk:11-jre-slim\r\nCOPY --from=build /home/app/target/demo-0.0.1-SNAPSHOT.jar /usr/local/lib/demo.jar\r\nEXPOSE 9091\r\nCMD [ &quot;java&quot;, &quot;-jar&quot;, &quot;/usr/local/lib/demo.jar&quot;]\r\n```\r\n\r\nThere is the `pom.xml`:\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.6.3&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;demo&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;demo&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;11&lt;/java.version&gt;\r\n\t\t&lt;!-- The main class to start by executing &quot;java -jar&quot; --&gt;\r\n        &lt;!-- If I remove this, java -jar will be thrown no main manifest attribute (maven) --&gt;\r\n      \t&lt;start-class&gt;com.example.demo.DemoApplication&lt;/start-class&gt;\r\n\t&lt;/properties&gt;\r\n...\r\n...\r\n...\r\n\t&lt;build&gt;\r\n&lt;!-- Didn&#39;t solve the problem: no main manifest attribute--&gt;\r\n\t  &lt;pluginManagement&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n    \t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n&lt;!-- Didn&#39;t solve the problem: no main manifest attribute--&gt;\r\n    \t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;${project.parent.version}&lt;/version&gt;\r\n    \t&lt;executions&gt;\r\n        \t&lt;execution&gt;\r\n            \t&lt;goals&gt;\r\n                &lt;goal&gt;repackage&lt;/goal&gt;\r\n            \t&lt;/goals&gt;\r\n            \t&lt;configuration&gt;\r\n                \t&lt;classifier&gt;spring-boot&lt;/classifier&gt;\r\n\t\t\t\t\t            &lt;manifest&gt;\r\n              &lt;addClasspath&gt;true&lt;/addClasspath&gt;\r\n              &lt;!-- Didn&#39;t solve the problem: no main manifest attribute--&gt;\r\n&lt;mainClass&gt;com.example.demo.DemoApplication&lt;/mainClass&gt;\r\n            &lt;/manifest&gt;\r\n\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t&lt;exclude&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;/exclude&gt;\r\n\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t\t&lt;!-- Unable to find main class--&gt;\r\n\t\t\t\t\t&lt;!-- &lt;skip&gt;true&lt;/skip&gt; --&gt;\r\n            \t\t&lt;/configuration&gt;\r\n        \t\t\t&lt;/execution&gt;\r\n    \t\t\t&lt;/executions&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t  &lt;/pluginManagement&gt;\r\n\t&lt;/build&gt;\r\n```\r\n\r\nThe project structure is as initialized, didn&#39;t change anything. (main function in `java/com/example/demo/DemoApplication.java`)\r\n\r\nThe error message is: `Exception in thread &quot;main&quot; java.lang.ClassNotFoundException: com.example.demo.DemoApplication`.\r\n+ Java version 11;\r\n+ Spring boot version 2.6.3\r\n+ maven:3.6.3-jdk-11-slim\r\n+ openjdk:11-jre-slim\r\n\r\nWhere did I do wrong? Thanks!\r\n\r\n","title":"Docker spring-boot-maven-plugin java jar ClassNotFoundException","body":"<p>I tried use <code>docker-compose</code>, <code>docker</code> build a demo Spring-boot project and run on <code>docker</code>. But created the jar file, and that throw <code>ClassNotFoundException</code>, when the <code>CMD [ &quot;java&quot;, &quot;-jar&quot;, &quot;/usr/local/lib/demo.jar&quot;]</code> command has triggered from <code>Dockerfile</code>.</p>\n<ul>\n<li>I did use <code>docker-compose run</code> to build &amp; run.</li>\n<li>I tried many solution from <code>StackOverflow</code>, didn't solve the problem.</li>\n</ul>\n<p>My <code>docker-compose</code> file:</p>\n<pre class=\"lang-sh prettyprint-override\"><code>version: '3.5'\nservices:\n  demo-service:\n    container_name: demo-service\n    build:\n      context: ./demo\n      dockerfile: dockerfile.demoservice.mvn\n    ports:\n      - &quot;9091:9091&quot;\n    # depends_on:\n    #   - demo-service-db\n</code></pre>\n<p><code>Dockerfile</code> file:</p>\n<pre class=\"lang-sh prettyprint-override\"><code>FROM maven:3.6.3-jdk-11-slim AS build\n\nRUN mkdir /home/app\nCOPY ./pom.xml /home/app/pom.xml\nCOPY src /home/app\nRUN mvn -f /home/app/pom.xml clean package spring-boot:repackage\nRUN ls /home/app/target\n\n# Package stage\nFROM openjdk:11-jre-slim\nCOPY --from=build /home/app/target/demo-0.0.1-SNAPSHOT.jar /usr/local/lib/demo.jar\nEXPOSE 9091\nCMD [ &quot;java&quot;, &quot;-jar&quot;, &quot;/usr/local/lib/demo.jar&quot;]\n</code></pre>\n<p>There is the <code>pom.xml</code>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.6.3&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;demo&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;demo&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;11&lt;/java.version&gt;\n        &lt;!-- The main class to start by executing &quot;java -jar&quot; --&gt;\n        &lt;!-- If I remove this, java -jar will be thrown no main manifest attribute (maven) --&gt;\n        &lt;start-class&gt;com.example.demo.DemoApplication&lt;/start-class&gt;\n    &lt;/properties&gt;\n...\n...\n...\n    &lt;build&gt;\n&lt;!-- Didn't solve the problem: no main manifest attribute--&gt;\n      &lt;pluginManagement&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n&lt;!-- Didn't solve the problem: no main manifest attribute--&gt;\n        &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n        &lt;version&gt;${project.parent.version}&lt;/version&gt;\n        &lt;executions&gt;\n            &lt;execution&gt;\n                &lt;goals&gt;\n                &lt;goal&gt;repackage&lt;/goal&gt;\n                &lt;/goals&gt;\n                &lt;configuration&gt;\n                    &lt;classifier&gt;spring-boot&lt;/classifier&gt;\n                                &lt;manifest&gt;\n              &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n              &lt;!-- Didn't solve the problem: no main manifest attribute--&gt;\n&lt;mainClass&gt;com.example.demo.DemoApplication&lt;/mainClass&gt;\n            &lt;/manifest&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                    &lt;!-- Unable to find main class--&gt;\n                    &lt;!-- &lt;skip&gt;true&lt;/skip&gt; --&gt;\n                    &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n      &lt;/pluginManagement&gt;\n    &lt;/build&gt;\n</code></pre>\n<p>The project structure is as initialized, didn't change anything. (main function in <code>java/com/example/demo/DemoApplication.java</code>)</p>\n<p>The error message is: <code>Exception in thread &quot;main&quot; java.lang.ClassNotFoundException: com.example.demo.DemoApplication</code>.</p>\n<ul>\n<li>Java version 11;</li>\n<li>Spring boot version 2.6.3</li>\n<li>maven:3.6.3-jdk-11-slim</li>\n<li>openjdk:11-jre-slim</li>\n</ul>\n<p>Where did I do wrong? Thanks!</p>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":5419,"reputation":13287,"user_id":8709,"display_name":"Ken Gentle"},"score":0,"creation_date":1227303906,"post_id":310271,"comment_id":153314,"body_markdown":"Please clarify:  You want to inject the bean via Spring Configuration, Spring dynamically at runtime, or programmatically via a setter?","body":"Please clarify:  You want to inject the bean via Spring Configuration, Spring dynamically at runtime, or programmatically via a setter?"},{"owner":{"account_id":5334,"reputation":8391,"user_id":8528,"accept_rate":81,"display_name":"Spencer Kormos"},"score":0,"creation_date":1227304881,"post_id":310271,"comment_id":153360,"body_markdown":"Any method is fine. The point is that the application has created the object into which I want to inject a bean, so the original object is not managed by the Spring context.","body":"Any method is fine. The point is that the application has created the object into which I want to inject a bean, so the original object is not managed by the Spring context."},{"owner":{"account_id":9867,"reputation":618181,"user_id":18393,"accept_rate":82,"display_name":"cletus"},"score":0,"creation_date":1227315265,"post_id":310271,"comment_id":153599,"body_markdown":"Also, consider using a factory method so you can put the class into the application context and configure it as per a normal Spring bean.  Look at the Spring reference docs regarding bean factories.","body":"Also, consider using a factory method so you can put the class into the application context and configure it as per a normal Spring bean.  Look at the Spring reference docs regarding bean factories."},{"owner":{"account_id":5334,"reputation":8391,"user_id":8528,"accept_rate":81,"display_name":"Spencer Kormos"},"score":0,"creation_date":1227333036,"post_id":310271,"comment_id":153826,"body_markdown":"I&#39;m not sure how a factory method would have anymore access to a bean not managed by the Spring context, which is the point of the question.","body":"I&#39;m not sure how a factory method would have anymore access to a bean not managed by the Spring context, which is the point of the question."}],"answers":[{"tags":[],"owner":{"account_id":10582,"reputation":2468,"user_id":20065,"accept_rate":76,"display_name":"Yonatan Maman"},"down_vote_count":2,"up_vote_count":5,"is_accepted":false,"score":3,"last_activity_date":1504483712,"creation_date":1227436335,"answer_id":312367,"question_id":310271,"body_markdown":"suppose that u have the following dependency chain:\r\n\r\nA --&gt; B --&gt; C --&gt; x --&gt; y -- &gt; Z\r\n\r\nA, B, C are spring managed beans (constructed and manged  by spring framework)\r\nx, y are really simple POJOs that constructed by your application, without spring assistance\r\n\r\nnow if you want that y will get a reference to Z using spring that you need to have a &#39;handle&#39; to the spring ApplicationContext\r\n\r\none way to do it is to implement [ApplicationContextAware][1] interface . In this case I would suggest that either A, B or C will implement this interface and will store the applicationContext reference in a static member. \r\n\r\nso lets take Class C for example:\r\n\r\n    class C implmenets ApplicationContextAware{\r\n        public static ApplicationContex ac;\r\n         void setApplicationContext(ApplicationContext applicationContext)  {\r\n                   ac = applicationContext;\r\n         }\r\n     .............\r\n    }\r\n\r\nnow, in class y you should have:\r\n\r\n    (Z)(C.ac.getBean(&quot;classZ&quot;)).doSomething()\r\n\r\nHTH -- Yonatan\r\n\r\n\r\n   \r\n\r\n\r\n  [1]: http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/context/ApplicationContextAware.html","title":"Injecting beans into a class outside the Spring managed context","body":"<p>suppose that u have the following dependency chain:</p>\n\n<p>A --> B --> C --> x --> y -- > Z</p>\n\n<p>A, B, C are spring managed beans (constructed and manged  by spring framework)\nx, y are really simple POJOs that constructed by your application, without spring assistance</p>\n\n<p>now if you want that y will get a reference to Z using spring that you need to have a 'handle' to the spring ApplicationContext</p>\n\n<p>one way to do it is to implement <a href=\"http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/context/ApplicationContextAware.html\" rel=\"nofollow noreferrer\">ApplicationContextAware</a> interface . In this case I would suggest that either A, B or C will implement this interface and will store the applicationContext reference in a static member. </p>\n\n<p>so lets take Class C for example:</p>\n\n<pre><code>class C implmenets ApplicationContextAware{\n    public static ApplicationContex ac;\n     void setApplicationContext(ApplicationContext applicationContext)  {\n               ac = applicationContext;\n     }\n .............\n}\n</code></pre>\n\n<p>now, in class y you should have:</p>\n\n<pre><code>(Z)(C.ac.getBean(\"classZ\")).doSomething()\n</code></pre>\n\n<p>HTH -- Yonatan</p>\n"},{"tags":[],"owner":{},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1227439172,"creation_date":1227439172,"answer_id":312403,"question_id":310271,"body_markdown":"Be careful that in oldest version of Spring, there is thread-safe problem with bean factory http://jira.springframework.org/browse/SPR-4672","title":"Injecting beans into a class outside the Spring managed context","body":"<p>Be careful that in oldest version of Spring, there is thread-safe problem with bean factory <a href=\"http://jira.springframework.org/browse/SPR-4672\" rel=\"nofollow noreferrer\">http://jira.springframework.org/browse/SPR-4672</a></p>\n"},{"tags":[],"owner":{"account_id":53330,"reputation":9385,"user_id":159434,"accept_rate":76,"display_name":"David Tinker"},"down_vote_count":0,"up_vote_count":68,"is_accepted":true,"score":68,"last_activity_date":1252049788,"creation_date":1252049788,"answer_id":1377740,"question_id":310271,"body_markdown":"You can do this:\r\n\r\n    ApplicationContext ctx = ...\r\n    YourClass someBeanNotCreatedBySpring = ...\r\n    ctx.getAutowireCapableBeanFactory().autowireBeanProperties(\r\n        someBeanNotCreatedBySpring,\r\n        AutowireCapableBeanFactory.AUTOWIRE_AUTODETECT, true);\r\n\r\nYou can use `@Autowired` and so on within `YourClass` to specify fields to be injected etc.\r\n","title":"Injecting beans into a class outside the Spring managed context","body":"<p>You can do this:</p>\n\n<pre><code>ApplicationContext ctx = ...\nYourClass someBeanNotCreatedBySpring = ...\nctx.getAutowireCapableBeanFactory().autowireBeanProperties(\n    someBeanNotCreatedBySpring,\n    AutowireCapableBeanFactory.AUTOWIRE_AUTODETECT, true);\n</code></pre>\n\n<p>You can use <code>@Autowired</code> and so on within <code>YourClass</code> to specify fields to be injected etc.</p>\n"},{"tags":[],"owner":{"account_id":1242572,"reputation":29,"user_id":1204808,"display_name":"user1204808"},"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1351235233,"creation_date":1329444594,"answer_id":9321978,"question_id":310271,"body_markdown":"Searching endless combos of autowire inject spring bean into pojo applicationcontextaware beanaware etc circled me back here but this didnt provide a complete enough solution for me.\r\n\r\nThis is a much better implementation/tutorial of this IMO:\r\nI hope it helps everyone like it finally helped me.\r\n\r\n[Accessing Spring Beans from outside Spring Context][1]\r\n\r\n\r\n  [1]: http://sujitpal.blogspot.com/2007/03/accessing-spring-beans-from-legacy-code.html\r\n\r\n","title":"Injecting beans into a class outside the Spring managed context","body":"<p>Searching endless combos of autowire inject spring bean into pojo applicationcontextaware beanaware etc circled me back here but this didnt provide a complete enough solution for me.</p>\n\n<p>This is a much better implementation/tutorial of this IMO:\nI hope it helps everyone like it finally helped me.</p>\n\n<p><a href=\"http://sujitpal.blogspot.com/2007/03/accessing-spring-beans-from-legacy-code.html\" rel=\"nofollow\">Accessing Spring Beans from outside Spring Context</a></p>\n"},{"tags":[],"owner":{"account_id":76076,"reputation":21604,"user_id":218028,"accept_rate":84,"display_name":"Dave"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1376415082,"creation_date":1376415082,"answer_id":18215559,"question_id":310271,"body_markdown":"Another way to do this is to us use AspectJ.  This is the recommended way of injection Spring beans into non-managed objects that are created with the `new` operator.  See this for details:\r\n\r\nhttp://www.javacodegeeks.com/2011/02/domain-driven-design-spring-aspectj.html\r\n","title":"Injecting beans into a class outside the Spring managed context","body":"<p>Another way to do this is to us use AspectJ.  This is the recommended way of injection Spring beans into non-managed objects that are created with the <code>new</code> operator.  See this for details:</p>\n\n<p><a href=\"http://www.javacodegeeks.com/2011/02/domain-driven-design-spring-aspectj.html\" rel=\"nofollow\">http://www.javacodegeeks.com/2011/02/domain-driven-design-spring-aspectj.html</a></p>\n"},{"tags":[],"owner":{"account_id":114848,"reputation":134179,"user_id":301832,"accept_rate":60,"display_name":"Donal Fellows"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1376421202,"creation_date":1376421202,"answer_id":18217273,"question_id":310271,"body_markdown":"One way to bring a bean into Spring despite its manufacture being external is to use a helper class marked as a `@Configuration` bean that has a method (marked with `@Bean`) that actually makes the instance and hands it back through Spring (which does its property injection and proxy generation at that point).\r\n\r\nI&#39;m not quite sure what scope you need; with `prototype`, you&#39;ll get a fresh bean in each place.\r\n\r\n    @Configuration\r\n    public class FooBarMaker {\r\n        @Bean(autowire = Autowire.BY_TYPE)\r\n        @Scope(&quot;prototype&quot;)\r\n        public FooBar makeAFooBar() {\r\n            // You probably need to do some more work in here, I imagine\r\n            return new FooBar();\r\n        }\r\n    }\r\n\r\nYou can inject properties required for manufacture into the `@Configuration` bean. (I use this to create instances of an interface where the name of the class to instantiate is defined at runtime.)","title":"Injecting beans into a class outside the Spring managed context","body":"<p>One way to bring a bean into Spring despite its manufacture being external is to use a helper class marked as a <code>@Configuration</code> bean that has a method (marked with <code>@Bean</code>) that actually makes the instance and hands it back through Spring (which does its property injection and proxy generation at that point).</p>\n\n<p>I'm not quite sure what scope you need; with <code>prototype</code>, you'll get a fresh bean in each place.</p>\n\n<pre><code>@Configuration\npublic class FooBarMaker {\n    @Bean(autowire = Autowire.BY_TYPE)\n    @Scope(\"prototype\")\n    public FooBar makeAFooBar() {\n        // You probably need to do some more work in here, I imagine\n        return new FooBar();\n    }\n}\n</code></pre>\n\n<p>You can inject properties required for manufacture into the <code>@Configuration</code> bean. (I use this to create instances of an interface where the name of the class to instantiate is defined at runtime.)</p>\n"},{"tags":[],"owner":{"account_id":257549,"reputation":4988,"user_id":539048,"accept_rate":66,"display_name":"GreenGiant"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1394153121,"creation_date":1394153121,"answer_id":22239268,"question_id":310271,"body_markdown":"If you want to create an object *outside* the Spring context, and make that object available for injection into other beans that *are* in the Spring context, you can follow the steps in [this article](http://java.dzone.com/articles/spring-make-externally-created).\r\n\r\nBasically, you create a parent application context and push your external object into this parent context as a singleton. Then you create you main application context (for example, from xml files), with the parent application context as its parent.\r\n\r\n    Object externalObject = ...\r\n    GenericApplicationContext parent = new StaticApplicationContext();\r\n    parent.getBeanFactory().registerSingleton( &quot;externalObject&quot;, externalObject );\r\n    parent.refresh();\r\n    ApplicationContext appContext = new ClassPathXmlApplicationContext( ... , parent);","title":"Injecting beans into a class outside the Spring managed context","body":"<p>If you want to create an object <em>outside</em> the Spring context, and make that object available for injection into other beans that <em>are</em> in the Spring context, you can follow the steps in <a href=\"http://java.dzone.com/articles/spring-make-externally-created\" rel=\"nofollow\">this article</a>.</p>\n\n<p>Basically, you create a parent application context and push your external object into this parent context as a singleton. Then you create you main application context (for example, from xml files), with the parent application context as its parent.</p>\n\n<pre><code>Object externalObject = ...\nGenericApplicationContext parent = new StaticApplicationContext();\nparent.getBeanFactory().registerSingleton( \"externalObject\", externalObject );\nparent.refresh();\nApplicationContext appContext = new ClassPathXmlApplicationContext( ... , parent);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":946203,"reputation":514,"user_id":5499391,"display_name":"mouse_8b"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645334444,"creation_date":1645334444,"answer_id":71191570,"question_id":310271,"body_markdown":"From a Spring configuration class, set a static field on the non-Spring class that needs the beans.\r\n\r\nI have an example in my answer to a Liquibase question: https://stackoverflow.com/a/71191546/5499391","title":"Injecting beans into a class outside the Spring managed context","body":"<p>From a Spring configuration class, set a static field on the non-Spring class that needs the beans.</p>\n<p>I have an example in my answer to a Liquibase question: <a href=\"https://stackoverflow.com/a/71191546/5499391\">https://stackoverflow.com/a/71191546/5499391</a></p>\n"}],"owner":{"account_id":5334,"reputation":8391,"user_id":8528,"accept_rate":81,"display_name":"Spencer Kormos"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85950,"favorite_count":0,"down_vote_count":0,"up_vote_count":66,"accepted_answer_id":1377740,"answer_count":8,"score":66,"last_activity_date":1645334444,"creation_date":1227303317,"question_id":310271,"body_markdown":"I&#39;m an end-user of one of my company&#39;s products. It is not very suitable for integration into Spring, however I am able to get a handle on the context and retrieve the required bean by name.  However, I would still like to know if it was possible to inject a bean into this class, even though the class is not managed by Spring itself.\r\n\r\nClarification: The same application which is managing the lifecycle of some class MyClass, is also managing the lifecycle of the Spring context. Spring does not have any knowledge of the instance of MyClass, and I would like to some how provide the instance to the context, but cannot create the instance in the context itself.","title":"Injecting beans into a class outside the Spring managed context","body":"<p>I'm an end-user of one of my company's products. It is not very suitable for integration into Spring, however I am able to get a handle on the context and retrieve the required bean by name.  However, I would still like to know if it was possible to inject a bean into this class, even though the class is not managed by Spring itself.</p>\n\n<p>Clarification: The same application which is managing the lifecycle of some class MyClass, is also managing the lifecycle of the Spring context. Spring does not have any knowledge of the instance of MyClass, and I would like to some how provide the instance to the context, but cannot create the instance in the context itself.</p>\n"},{"tags":["java","spring","liquibase"],"answers":[{"tags":[],"owner":{"account_id":5493520,"reputation":9833,"user_id":4365460,"accept_rate":90,"display_name":"Roland Weisleder"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1443510956,"creation_date":1443510956,"answer_id":32837910,"question_id":32826600,"body_markdown":"The classes referenced in your changeset.xml are not managed by Spring, so the cool stuff like DI will not work.\r\n\r\nWhat you can do is to inject Spring beans into Non-Spring objects. See this answer: https://stackoverflow.com/a/1377740/4365460","title":"Use other spring beans in liquibase CustomTaskChange class","body":"<p>The classes referenced in your changeset.xml are not managed by Spring, so the cool stuff like DI will not work.</p>\n\n<p>What you can do is to inject Spring beans into Non-Spring objects. See this answer: <a href=\"https://stackoverflow.com/a/1377740/4365460\">https://stackoverflow.com/a/1377740/4365460</a></p>\n"},{"tags":[],"owner":{"account_id":3788650,"reputation":176,"user_id":3145830,"display_name":"vince"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1605838993,"creation_date":1605837293,"answer_id":64922642,"question_id":32826600,"body_markdown":"I&#39;m currently running through this problem as well...After hours of digging, I found 2 solutions, no AOP is needed. \r\n\r\n**Liquibase version: 4.1.1**\r\n\r\n------------------------------------------------------------------------------------------\r\n\r\n**Solution A**\r\n\r\nIn the official example of customChange\r\n\r\nhttps://docs.liquibase.com/change-types/community/custom-change.html\r\n\r\nIn CustomChange.setFileOpener, ResourceAccessor actually is an inner class SpringLiquibase$SpringResourceOpener, and it has a member &#39;resourceLoader&#39;, which is indeed an ApplicationContext. Unfortunately, it&#39;s private and no getter is available.\r\n\r\nSo here comes an ugly solution: **USE REFLECTION TO GET IT AND INVOKE getBean**\r\n\r\n------------------------------------------------------------------------------------------\r\n\r\n**Solution B** (More elegant)\r\n\r\nBefore we get started, let&#39;s see some basic facts about Liquibase. The official way of integrating Liquibase with Spring Boot is by using:\r\n\r\norg.springframework.boot.autoconfigure.liquibase.LiquibaseAutoConfiguration$LiquibaseConfiguration\r\n\r\n  This is a conditional inner config bean for creating SpringLiquibase **ONLY WHEN SpringLiquibase.class IS MISSING**\r\n\r\n    @Configuration\r\n\t@ConditionalOnMissingBean(SpringLiquibase.class)\r\n\t@EnableConfigurationProperties({ DataSourceProperties.class,\r\n\t\t\tLiquibaseProperties.class })\r\n\t@Import(LiquibaseJpaDependencyConfiguration.class)\r\n\tpublic static class LiquibaseConfiguration {...}\r\n\r\nSo we can create our own SpringLiquibase by adding a liquibase config bean\r\n\r\n    @Getter\r\n    @Configuration\r\n    @EnableConfigurationProperties(LiquibaseProperties.class)\r\n    public class LiquibaseConfig {\r\n\r\n        private DataSource dataSource;\r\n\r\n        private LiquibaseProperties properties;\r\n\r\n        public LiquibaseConfig(DataSource dataSource, LiquibaseProperties properties) {\r\n            this.dataSource = dataSource;\r\n            this.properties = properties;\r\n        }\r\n\r\n        @Bean\r\n        public SpringLiquibase liquibase() {\r\n            SpringLiquibase liquibase = new BeanAwareSpringLiquibase();\r\n            liquibase.setDataSource(dataSource);\r\n            liquibase.setChangeLog(this.properties.getChangeLog());\r\n            liquibase.setContexts(this.properties.getContexts());\r\n            liquibase.setDefaultSchema(this.properties.getDefaultSchema());\r\n            liquibase.setDropFirst(this.properties.isDropFirst());\r\n            liquibase.setShouldRun(this.properties.isEnabled());\r\n            liquibase.setLabels(this.properties.getLabels());\r\n            liquibase.setChangeLogParameters(this.properties.getParameters());\r\n            liquibase.setRollbackFile(this.properties.getRollbackFile());\r\n            return liquibase;\r\n       }\r\n    }\r\n\r\ninside which we new an extended class of SpringLiquibase: **BeanAwareSpringLiquibase**\r\n\r\n    public class BeanAwareSpringLiquibase extends SpringLiquibase {\r\n    private static ResourceLoader applicationContext;\r\n\r\n    public BeanAwareSpringLiquibase() {\r\n    }\r\n\r\n    public static final &lt;T&gt; T getBean(Class&lt;T&gt; beanClass) throws Exception {\r\n        if (ApplicationContext.class.isInstance(applicationContext)) {\r\n            return ((ApplicationContext)applicationContext).getBean(beanClass);\r\n        } else {\r\n            throw new Exception(&quot;Resource loader is not an instance of ApplicationContext&quot;);\r\n        }\r\n    }\r\n\r\n    public static final &lt;T&gt; T getBean(String beanName) throws Exception {\r\n        if (ApplicationContext.class.isInstance(applicationContext)) {\r\n            return ((ApplicationContext)applicationContext).getBean(beanName);\r\n        } else {\r\n            throw new Exception(&quot;Resource loader is not an instance of ApplicationContext&quot;);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void setResourceLoader(ResourceLoader resourceLoader) {\r\n        super.setResourceLoader(resourceLoader);\r\n        applicationContext = resourceLoader;\r\n    }}\r\n\r\nBeanAwareSpringLiquibase has a static reference to ResourceLoader aforementioned. On Spring Bootstartup, &#39;setResourceLoader&#39; defined by ResourceLoaderAware interface will be invoked automatically before &#39;afterPropertiesSet&#39; defined by InitializingBean interface, thus the code execution will be like this:\r\n\r\n1. Spring Boot invokes setResourceLoader, injecting resourceLoader(applicationContext) to BeanAwareSpringLiquibase.\r\n\r\n2. Spring Boot invokes afterPropertiesSet, performing Liquibase update including customChange, by now you already have full access to applicationContext\r\n\r\n\r\nPS: \r\n1. Remember adding your Liquibase config bean package path to @ComponentScan or it will still use LiquibaseAutoConfiguration instead of our own LiquibaseConfig.\r\n\r\n2. Prepare all beans you need in &#39;setUp&#39; before &#39;execute&#39; would be a better convention.\r\n\r\n","title":"Use other spring beans in liquibase CustomTaskChange class","body":"<p>I'm currently running through this problem as well...After hours of digging, I found 2 solutions, no AOP is needed.</p>\n<p><strong>Liquibase version: 4.1.1</strong></p>\n<hr />\n<p><strong>Solution A</strong></p>\n<p>In the official example of customChange</p>\n<p><a href=\"https://docs.liquibase.com/change-types/community/custom-change.html\" rel=\"noreferrer\">https://docs.liquibase.com/change-types/community/custom-change.html</a></p>\n<p>In CustomChange.setFileOpener, ResourceAccessor actually is an inner class SpringLiquibase$SpringResourceOpener, and it has a member 'resourceLoader', which is indeed an ApplicationContext. Unfortunately, it's private and no getter is available.</p>\n<p>So here comes an ugly solution: <strong>USE REFLECTION TO GET IT AND INVOKE getBean</strong></p>\n<hr />\n<p><strong>Solution B</strong> (More elegant)</p>\n<p>Before we get started, let's see some basic facts about Liquibase. The official way of integrating Liquibase with Spring Boot is by using:</p>\n<p>org.springframework.boot.autoconfigure.liquibase.LiquibaseAutoConfiguration$LiquibaseConfiguration</p>\n<p>This is a conditional inner config bean for creating SpringLiquibase <strong>ONLY WHEN SpringLiquibase.class IS MISSING</strong></p>\n<pre><code>@Configuration\n@ConditionalOnMissingBean(SpringLiquibase.class)\n@EnableConfigurationProperties({ DataSourceProperties.class,\n        LiquibaseProperties.class })\n@Import(LiquibaseJpaDependencyConfiguration.class)\npublic static class LiquibaseConfiguration {...}\n</code></pre>\n<p>So we can create our own SpringLiquibase by adding a liquibase config bean</p>\n<pre><code>@Getter\n@Configuration\n@EnableConfigurationProperties(LiquibaseProperties.class)\npublic class LiquibaseConfig {\n\n    private DataSource dataSource;\n\n    private LiquibaseProperties properties;\n\n    public LiquibaseConfig(DataSource dataSource, LiquibaseProperties properties) {\n        this.dataSource = dataSource;\n        this.properties = properties;\n    }\n\n    @Bean\n    public SpringLiquibase liquibase() {\n        SpringLiquibase liquibase = new BeanAwareSpringLiquibase();\n        liquibase.setDataSource(dataSource);\n        liquibase.setChangeLog(this.properties.getChangeLog());\n        liquibase.setContexts(this.properties.getContexts());\n        liquibase.setDefaultSchema(this.properties.getDefaultSchema());\n        liquibase.setDropFirst(this.properties.isDropFirst());\n        liquibase.setShouldRun(this.properties.isEnabled());\n        liquibase.setLabels(this.properties.getLabels());\n        liquibase.setChangeLogParameters(this.properties.getParameters());\n        liquibase.setRollbackFile(this.properties.getRollbackFile());\n        return liquibase;\n   }\n}\n</code></pre>\n<p>inside which we new an extended class of SpringLiquibase: <strong>BeanAwareSpringLiquibase</strong></p>\n<pre><code>public class BeanAwareSpringLiquibase extends SpringLiquibase {\nprivate static ResourceLoader applicationContext;\n\npublic BeanAwareSpringLiquibase() {\n}\n\npublic static final &lt;T&gt; T getBean(Class&lt;T&gt; beanClass) throws Exception {\n    if (ApplicationContext.class.isInstance(applicationContext)) {\n        return ((ApplicationContext)applicationContext).getBean(beanClass);\n    } else {\n        throw new Exception(&quot;Resource loader is not an instance of ApplicationContext&quot;);\n    }\n}\n\npublic static final &lt;T&gt; T getBean(String beanName) throws Exception {\n    if (ApplicationContext.class.isInstance(applicationContext)) {\n        return ((ApplicationContext)applicationContext).getBean(beanName);\n    } else {\n        throw new Exception(&quot;Resource loader is not an instance of ApplicationContext&quot;);\n    }\n}\n\n@Override\npublic void setResourceLoader(ResourceLoader resourceLoader) {\n    super.setResourceLoader(resourceLoader);\n    applicationContext = resourceLoader;\n}}\n</code></pre>\n<p>BeanAwareSpringLiquibase has a static reference to ResourceLoader aforementioned. On Spring Bootstartup, 'setResourceLoader' defined by ResourceLoaderAware interface will be invoked automatically before 'afterPropertiesSet' defined by InitializingBean interface, thus the code execution will be like this:</p>\n<ol>\n<li><p>Spring Boot invokes setResourceLoader, injecting resourceLoader(applicationContext) to BeanAwareSpringLiquibase.</p>\n</li>\n<li><p>Spring Boot invokes afterPropertiesSet, performing Liquibase update including customChange, by now you already have full access to applicationContext</p>\n</li>\n</ol>\n<p>PS:</p>\n<ol>\n<li><p>Remember adding your Liquibase config bean package path to @ComponentScan or it will still use LiquibaseAutoConfiguration instead of our own LiquibaseConfig.</p>\n</li>\n<li><p>Prepare all beans you need in 'setUp' before 'execute' would be a better convention.</p>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":946203,"reputation":514,"user_id":5499391,"display_name":"mouse_8b"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1645334016,"creation_date":1645334016,"answer_id":71191546,"question_id":32826600,"body_markdown":"I accomplished this by overriding the Spring Liquibase configuration and setting a static field on the custom task. Setting the fields in the configuration ensures that it is set before the changeset runs.\r\n\r\nThis is not possible to do with every bean, because some beans (like JPA repositories) are dependent on the liquibase bean. Liquibase runs changelogs when the SpringLiquibase bean is initialized, but the entire Spring context is not completely loaded at that point. If you try to autowire a bean that depends on liquibase, you&#39;ll get an exception on startup.\r\n\r\nI also think that this technique is safer than exposing the entire application context statically. Only the fields that are needed are passed to the task, and those are not publicly accessible afterward.\r\n\r\n    /**\r\n\t\tTask that has a static member that will be set in the LiquibaseConfiguration class.\r\n\t*/\r\n\tpublic class MyCustomTask implements CustomTaskChange {\r\n\t\tprivate static MyBean myBean;\r\n\r\n\t    public static void setMyBean(MyBean myBean) {\r\n\t        MyCustomTask.myBean = myBean;\r\n\t    }\r\n\r\n\t    @Override\r\n\t    public void execute(Database database) throws CustomChangeException {\r\n\r\n\t        try {\r\n\t            JdbcConnection jdbcConnection = (JdbcConnection) database.getConnection();\r\n\r\n\t            // do stuff using myBean\r\n\r\n\t        } catch (DatabaseException | SQLException e) {\r\n\t            throw new CustomChangeException(e);\r\n\t        }\r\n\t    }\r\n\r\n\t}\r\n\r\n\t/**\r\n\t\tExtend SpringBoot Liquibase Auto-Configuration\r\n\t\torg.springframework.boot.autoconfigure.liquibase.LiquibaseAutoConfiguration.LiquibaseConfiguration\r\n\t*/\r\n\t@Configuration(proxyBeanMethods = false)\r\n\t@ConditionalOnMissingBean(SpringLiquibase.class)\r\n\t@EnableConfigurationProperties({DataSourceProperties.class, LiquibaseProperties.class})\r\n\tpublic static class MyLiquibaseConfiguration\r\n\t        extends LiquibaseAutoConfiguration.LiquibaseConfiguration {\r\n\r\n\t    /**\r\n\t     * Autowire myBean and set it on {@link MyCustomTask}.\r\n\t     *\r\n\t     * @param properties The {@link LiquibaseProperties} to configure Liquibase.\r\n\t     * @param myBean my bean.\r\n\t     */\r\n\t    public MigrationLiquibaseConfiguration(LiquibaseProperties properties, MyBean myBean) {\r\n\t        super(properties);\r\n\t        MyCustomTask.setMyBean(myBean);\r\n\t    }\r\n\r\n\t}","title":"Use other spring beans in liquibase CustomTaskChange class","body":"<p>I accomplished this by overriding the Spring Liquibase configuration and setting a static field on the custom task. Setting the fields in the configuration ensures that it is set before the changeset runs.</p>\n<p>This is not possible to do with every bean, because some beans (like JPA repositories) are dependent on the liquibase bean. Liquibase runs changelogs when the SpringLiquibase bean is initialized, but the entire Spring context is not completely loaded at that point. If you try to autowire a bean that depends on liquibase, you'll get an exception on startup.</p>\n<p>I also think that this technique is safer than exposing the entire application context statically. Only the fields that are needed are passed to the task, and those are not publicly accessible afterward.</p>\n<pre><code>/**\n    Task that has a static member that will be set in the LiquibaseConfiguration class.\n*/\npublic class MyCustomTask implements CustomTaskChange {\n    private static MyBean myBean;\n\n    public static void setMyBean(MyBean myBean) {\n        MyCustomTask.myBean = myBean;\n    }\n\n    @Override\n    public void execute(Database database) throws CustomChangeException {\n\n        try {\n            JdbcConnection jdbcConnection = (JdbcConnection) database.getConnection();\n\n            // do stuff using myBean\n\n        } catch (DatabaseException | SQLException e) {\n            throw new CustomChangeException(e);\n        }\n    }\n\n}\n\n/**\n    Extend SpringBoot Liquibase Auto-Configuration\n    org.springframework.boot.autoconfigure.liquibase.LiquibaseAutoConfiguration.LiquibaseConfiguration\n*/\n@Configuration(proxyBeanMethods = false)\n@ConditionalOnMissingBean(SpringLiquibase.class)\n@EnableConfigurationProperties({DataSourceProperties.class, LiquibaseProperties.class})\npublic static class MyLiquibaseConfiguration\n        extends LiquibaseAutoConfiguration.LiquibaseConfiguration {\n\n    /**\n     * Autowire myBean and set it on {@link MyCustomTask}.\n     *\n     * @param properties The {@link LiquibaseProperties} to configure Liquibase.\n     * @param myBean my bean.\n     */\n    public MigrationLiquibaseConfiguration(LiquibaseProperties properties, MyBean myBean) {\n        super(properties);\n        MyCustomTask.setMyBean(myBean);\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":3262012,"reputation":1505,"user_id":2747410,"accept_rate":78,"display_name":"SebastianRiemer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11580,"favorite_count":0,"down_vote_count":0,"up_vote_count":17,"accepted_answer_id":32837910,"answer_count":3,"score":17,"last_activity_date":1645334016,"creation_date":1443454016,"question_id":32826600,"body_markdown":"I need to do some data migration, which is too complex to do it in a liquibase changeset. We use spring\r\n\r\nThat&#39;s why I wrote a class implementing the **liquibase.change.custom.CustomTaskChange** class. I then reference it from within a changeset.\r\n\r\nAll is fine to this point.\r\n\r\nMy question is:\r\n**Is it possible to get access to the other spring beans from within such a class?**\r\n\r\nWhen I try to use an autowired bean in this class, it&#39;s null, which makes me think that the autowiring is simply not done at this point?\r\n\r\nI&#39;ve also read in some other thread, that the Liquibase bean must be initialized before all other beans, is that correct?\r\n\r\nHere is a snippet of the class I wrote:\r\n    \r\n    @Component\r\n    public class UpdateJob2 implements CustomTaskChange {\r\n\t\r\n\tprivate String param1;\r\n\r\n\t@Autowired\r\n\tprivate SomeBean someBean;\r\n\r\n\t@Override\r\n\tpublic void execute(Database database) throws CustomChangeException {\r\n\t\ttry {\r\n\t\t\tList&lt;SomeObject&gt; titleTypes = someBean.getSomeObjects(\r\n\t\t\t\t\tparam1\r\n\t\t\t);\r\n\t\t} catch (Exception e) {\t\t\t\r\n\t\t\tthrow new CustomChangeException();\r\n\t\t}\r\n    ...\r\n\r\nI get an exception and when debugging I can see that someBean is null.\r\n\r\nHere is the config for the SpringLiquibase:\r\n\r\n    @Configuration\r\n    @EnableTransactionManagement(proxyTargetClass = true)\r\n    @ComponentScan({\r\n\t&quot;xxx.xxx..&quot;})\r\n    public class DatabaseConfiguration {\r\n\r\n\t@Bean\r\n\tpublic SpringLiquibase springLiquibase() {\r\n\t\tSpringLiquibase liquibase = new SpringLiquibase();\r\n\t\tliquibase.setDataSource(dataSource());\r\n\t\tliquibase.setChangeLog(&quot;classpath:liquibase-changelog.xml&quot;);\r\n\t\treturn liquibase;\r\n\t}\r\n    ...\r\n\r\nSome more config:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;databaseChangeLog xmlns=&quot;http://www.liquibase.org/xml/ns/dbchangelog&quot;\r\n\t\t\t\t   xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\t\t\t\t   xsi:schemaLocation=&quot;http://www.liquibase.org/xml/ns/dbchangelog\r\n         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd&quot;&gt;\r\n\r\n\t    &lt;includeAll path=&quot;dbschema&quot;/&gt;\r\n\r\n    &lt;/databaseChangeLog&gt;\r\n\r\nAnd here the call from the changeset:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;databaseChangeLog xmlns=&quot;http://www.liquibase.org/xml/ns/dbchangelog&quot;\r\n\t\t\t\t   xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\t\t\t\t   xsi:schemaLocation=&quot;http://www.liquibase.org/xml/ns/dbchangelog\r\n         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd&quot;&gt;\r\n\r\n\t&lt;changeSet id=&quot;201509281536&quot; author=&quot;sr&quot;&gt;\r\n\t\t\t&lt;customChange class=&quot;xxx.xxx.xxx.UpdateJob2&quot;&gt;\r\n\t\t\t\t&lt;param name=&quot;param1&quot; value=&quot;2&quot; /&gt;\r\n\t\t\t&lt;/customChange&gt;\r\n\t&lt;/changeSet&gt;\r\n&lt;/databaseChangeLog&gt;\r\n","title":"Use other spring beans in liquibase CustomTaskChange class","body":"<p>I need to do some data migration, which is too complex to do it in a liquibase changeset. We use spring</p>\n\n<p>That's why I wrote a class implementing the <strong>liquibase.change.custom.CustomTaskChange</strong> class. I then reference it from within a changeset.</p>\n\n<p>All is fine to this point.</p>\n\n<p>My question is:\n<strong>Is it possible to get access to the other spring beans from within such a class?</strong></p>\n\n<p>When I try to use an autowired bean in this class, it's null, which makes me think that the autowiring is simply not done at this point?</p>\n\n<p>I've also read in some other thread, that the Liquibase bean must be initialized before all other beans, is that correct?</p>\n\n<p>Here is a snippet of the class I wrote:</p>\n\n<pre><code>@Component\npublic class UpdateJob2 implements CustomTaskChange {\n\nprivate String param1;\n\n@Autowired\nprivate SomeBean someBean;\n\n@Override\npublic void execute(Database database) throws CustomChangeException {\n    try {\n        List&lt;SomeObject&gt; titleTypes = someBean.getSomeObjects(\n                param1\n        );\n    } catch (Exception e) {         \n        throw new CustomChangeException();\n    }\n...\n</code></pre>\n\n<p>I get an exception and when debugging I can see that someBean is null.</p>\n\n<p>Here is the config for the SpringLiquibase:</p>\n\n<pre><code>@Configuration\n@EnableTransactionManagement(proxyTargetClass = true)\n@ComponentScan({\n\"xxx.xxx..\"})\npublic class DatabaseConfiguration {\n\n@Bean\npublic SpringLiquibase springLiquibase() {\n    SpringLiquibase liquibase = new SpringLiquibase();\n    liquibase.setDataSource(dataSource());\n    liquibase.setChangeLog(\"classpath:liquibase-changelog.xml\");\n    return liquibase;\n}\n...\n</code></pre>\n\n<p>Some more config:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;databaseChangeLog xmlns=\"http://www.liquibase.org/xml/ns/dbchangelog\"\n               xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n               xsi:schemaLocation=\"http://www.liquibase.org/xml/ns/dbchangelog\n     http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd\"&gt;\n\n    &lt;includeAll path=\"dbschema\"/&gt;\n\n&lt;/databaseChangeLog&gt;\n</code></pre>\n\n<p>And here the call from the changeset:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;databaseChangeLog xmlns=\"http://www.liquibase.org/xml/ns/dbchangelog\"\n               xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n               xsi:schemaLocation=\"http://www.liquibase.org/xml/ns/dbchangelog\n     http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd\"&gt;\n\n&lt;changeSet id=\"201509281536\" author=\"sr\"&gt;\n        &lt;customChange class=\"xxx.xxx.xxx.UpdateJob2\"&gt;\n            &lt;param name=\"param1\" value=\"2\" /&gt;\n        &lt;/customChange&gt;\n&lt;/changeSet&gt;\n</code></pre>\n\n<p></p>\n"},{"tags":["java","clojure"],"comments":[{"owner":{"account_id":88597,"reputation":4927,"user_id":244935,"accept_rate":75,"display_name":"Daniel Dinnyes"},"score":2,"creation_date":1364494516,"post_id":5419125,"comment_id":22275921,"body_markdown":"It&#39;s a bit unfortunate that your example does not explicitly ask about doing anything with the contents for the `ZipEntry`, only printing the entries name. IMHO the more intricate and error-prone details of the `ZipInputStream` API are how to retrieve the `InputStream` for the entry itself, how to iterate correctly between entries, and finally how to close the `ZipInputStream` properly. It is also unfortunate because all the answers below get away with an easy and less convoluted, but meanwhile a significantly less useful solution (i.e. reading the content).","body":"It&#39;s a bit unfortunate that your example does not explicitly ask about doing anything with the contents for the <code>ZipEntry</code>, only printing the entries name. IMHO the more intricate and error-prone details of the <code>ZipInputStream</code> API are how to retrieve the <code>InputStream</code> for the entry itself, how to iterate correctly between entries, and finally how to close the <code>ZipInputStream</code> properly. It is also unfortunate because all the answers below get away with an easy and less convoluted, but meanwhile a significantly less useful solution (i.e. reading the content)."}],"answers":[{"tags":[],"owner":{"account_id":142918,"reputation":13444,"user_id":350923,"accept_rate":100,"display_name":"skuro"},"down_vote_count":0,"up_vote_count":19,"is_accepted":true,"score":19,"last_activity_date":1402162781,"creation_date":1300972603,"answer_id":5419767,"question_id":5419125,"body_markdown":"I would go with something like the following:\r\n\r\n&lt;!-- language: lang-clj --&gt;\r\n\r\n    (defn entries [zipfile]\r\n     (lazy-seq\r\n      (if-let [entry (.getNextEntry zipfile)]\r\n       (cons entry (entries zipfile)))))\r\n\r\n    (defn walkzip [fileName]\r\n     (with-open [z (ZipInputStream. (FileInputStream. fileName))]\r\n      (doseq [e (entries z)]\r\n       (println (.getName e))\r\n       (.closeEntry z))))\r\n\r\n**EDIT:** the above code was eventually tested and corrected.\r\n\r\n**EDIT:** the following works as expected and it&#39;s much more concise, even though it uses a different Java API\r\n\r\n&lt;!-- language: lang-clj --&gt;\r\n    \r\n    (defn entries [zipfile]\r\n      (enumeration-seq (.entries zipfile)))\r\n\r\n    (defn walkzip [fileName]\r\n      (with-open [z (java.util.zip.ZipFile. fileName)]\r\n                 (doseq [e (entries z)]\r\n                        (println (.getName e)))))\r\n","title":"Reading a zip file using java api from clojure","body":"<p>I would go with something like the following:</p>\n\n<pre class=\"lang-clj prettyprint-override\"><code>(defn entries [zipfile]\n (lazy-seq\n  (if-let [entry (.getNextEntry zipfile)]\n   (cons entry (entries zipfile)))))\n\n(defn walkzip [fileName]\n (with-open [z (ZipInputStream. (FileInputStream. fileName))]\n  (doseq [e (entries z)]\n   (println (.getName e))\n   (.closeEntry z))))\n</code></pre>\n\n<p><strong>EDIT:</strong> the above code was eventually tested and corrected.</p>\n\n<p><strong>EDIT:</strong> the following works as expected and it's much more concise, even though it uses a different Java API</p>\n\n<pre class=\"lang-clj prettyprint-override\"><code>(defn entries [zipfile]\n  (enumeration-seq (.entries zipfile)))\n\n(defn walkzip [fileName]\n  (with-open [z (java.util.zip.ZipFile. fileName)]\n             (doseq [e (entries z)]\n                    (println (.getName e)))))\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8636,"reputation":28679,"user_id":15649,"accept_rate":62,"display_name":"Leonel"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1402162933,"creation_date":1300972770,"answer_id":5419813,"question_id":5419125,"body_markdown":"Clojure-Contrib has libraries [IO][1] and [Jar][2], which make the code shorter:\r\n\r\n&lt;!-- language: lang-clj --&gt;\r\n\r\n    (require &#39;clojure.contrib.jar\r\n             &#39;clojure.contrib.io)\r\n \r\n    (import [java.util.jar JarFile])\r\n\r\n    (defn- read-zip [zip-file]\r\n      (clojure.contrib.jar/filenames-in-jar (JarFile. (clojure.contrib.io/file zip-file))))\r\n\r\n**Caveat:**  Function [filenames-in-jar][3] does not list directory entries in the zip file, only names of actual files.\r\n  [1]: http://clojure.github.com/clojure-contrib/io-api.html\r\n  [2]: http://clojure.github.com/clojure-contrib/jar-api.html\r\n  [3]: http://clojure.github.com/clojure-contrib/jar-api.html#clojure.contrib.jar/filenames-in-jar","title":"Reading a zip file using java api from clojure","body":"<p>Clojure-Contrib has libraries <a href=\"http://clojure.github.com/clojure-contrib/io-api.html\" rel=\"nofollow\">IO</a> and <a href=\"http://clojure.github.com/clojure-contrib/jar-api.html\" rel=\"nofollow\">Jar</a>, which make the code shorter:</p>\n\n<pre class=\"lang-clj prettyprint-override\"><code>(require 'clojure.contrib.jar\n         'clojure.contrib.io)\n\n(import [java.util.jar JarFile])\n\n(defn- read-zip [zip-file]\n  (clojure.contrib.jar/filenames-in-jar (JarFile. (clojure.contrib.io/file zip-file))))\n</code></pre>\n\n<p><strong>Caveat:</strong>  Function <a href=\"http://clojure.github.com/clojure-contrib/jar-api.html#clojure.contrib.jar/filenames-in-jar\" rel=\"nofollow\">filenames-in-jar</a> does not list directory entries in the zip file, only names of actual files.</p>\n"},{"tags":[],"owner":{"account_id":343982,"reputation":384,"user_id":676025,"display_name":"abedra"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1401914465,"creation_date":1301024085,"answer_id":5428265,"question_id":5419125,"body_markdown":"This is a simpler example:\r\n\r\n&lt;!-- language: lang-clj --&gt;\r\n\r\n    (defn filenames-in-zip [filename]\r\n      (let [z (java.util.zip.ZipFile. filename)] \r\n        (map #(.getName %) (enumeration-seq (.entries z)))))\r\n\r\nThis is similar to the code above, but there is no reason to use with-open here.  This example returns a sequence of data that you can then print out or better yet, format.  It&#39;s better to have the function that extracts the data just return data rather than having the side effect of printing contained inside that function.\r\n\r\nIf you want to print the contents out you can use\r\n\r\n&lt;!-- language: lang-clj --&gt;\r\n\r\n    (pprint (filenames-in-zip &quot;my.zip&quot;))\r\n\r\nand it will give you a nice list.","title":"Reading a zip file using java api from clojure","body":"<p>This is a simpler example:</p>\n\n<pre class=\"lang-clj prettyprint-override\"><code>(defn filenames-in-zip [filename]\n  (let [z (java.util.zip.ZipFile. filename)] \n    (map #(.getName %) (enumeration-seq (.entries z)))))\n</code></pre>\n\n<p>This is similar to the code above, but there is no reason to use with-open here.  This example returns a sequence of data that you can then print out or better yet, format.  It's better to have the function that extracts the data just return data rather than having the side effect of printing contained inside that function.</p>\n\n<p>If you want to print the contents out you can use</p>\n\n<pre class=\"lang-clj prettyprint-override\"><code>(pprint (filenames-in-zip \"my.zip\"))\n</code></pre>\n\n<p>and it will give you a nice list.</p>\n"},{"tags":[],"owner":{"account_id":87277,"reputation":4359,"user_id":242135,"accept_rate":83,"display_name":"Zefira"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1484763631,"creation_date":1415128963,"answer_id":26743295,"question_id":5419125,"body_markdown":"This is similar to skuro&#39;s answer that uses `ZipInputStream`, but a slightly more terse definition of `entries`.\r\n\r\n&lt;!-- language: lang-clj --&gt;\r\n\r\n    (defn entries [zip-stream]\r\n      (take-while #(not (nil? %))\r\n                  (repeatedly #(.getNextEntry zip-stream))))\r\n\r\n    (defn walkzip [fileName]\r\n      (with-open [z (ZipInputStream. (FileInputStream. fileName))]\r\n                 (doseq [e (entries z)]\r\n                        (println (.getName e))\r\n                        (.closeEntry z))))\r\n\r\nOr, if you want to actually extract the files you need another helper function for copying. I&#39;ve used `clojure.java.io` for shortening the code, but the same thing could be accomplished without this dependency.\r\n\r\n&lt;!-- language: lang-clj --&gt;\r\n\r\n    (require &#39;[clojure.java.io :as io])\r\n\r\n    (defn entries [zip-stream]\r\n      (take-while #(not (nil? %))\r\n                  (repeatedly #(.getNextEntry zip-stream))))\r\n\r\n    (defn copy-file [zip-stream filename]\r\n      (with-open [out-file (file-out-stream filename)]\r\n                 (let [buff-size 4096\r\n                                 buffer (byte-array buff-size)]\r\n                   (loop [len (.read zip-stream buffer)]\r\n                         (when (&gt; len 0)\r\n                           (.write out-file buffer 0 len)\r\n                           (recur (.read zip-stream buffer)))))))\r\n    \r\n    (defn extract-stream [zip-stream to-folder]\r\n      (let [extract-entry (fn [zip-entry]\r\n                              (when (not (.isDirectory zip-entry))\r\n                                (let [to-file (io/file to-folder\r\n                                                       (.getName zip-entry))\r\n                                              parent-file (io/file (.getParent to-file))]\r\n                                  (.mkdirs parent-file)\r\n                                  (copy-file zip-stream to-file))))]\r\n        (-&gt;&gt; zip-stream\r\n          entries\r\n          (map extract-entry)\r\n          dorun)))\r\n\r\nThis is effectively equivalent to simply unzipping the file with an `unzip` utility.  The beauty of it is that since the entries are in a lazy seq, you can `filter` or `drop` or `take` to your hearts (or requirements) content. Well, I&#39;m pretty sure you can.  Haven&#39;t really tried it yet :)\r\n\r\nAlso do note.  You MUST process the seq inside of the function where you open the zip stream!!!  ","title":"Reading a zip file using java api from clojure","body":"<p>This is similar to skuro's answer that uses <code>ZipInputStream</code>, but a slightly more terse definition of <code>entries</code>.</p>\n\n<pre class=\"lang-clj prettyprint-override\"><code>(defn entries [zip-stream]\n  (take-while #(not (nil? %))\n              (repeatedly #(.getNextEntry zip-stream))))\n\n(defn walkzip [fileName]\n  (with-open [z (ZipInputStream. (FileInputStream. fileName))]\n             (doseq [e (entries z)]\n                    (println (.getName e))\n                    (.closeEntry z))))\n</code></pre>\n\n<p>Or, if you want to actually extract the files you need another helper function for copying. I've used <code>clojure.java.io</code> for shortening the code, but the same thing could be accomplished without this dependency.</p>\n\n<pre class=\"lang-clj prettyprint-override\"><code>(require '[clojure.java.io :as io])\n\n(defn entries [zip-stream]\n  (take-while #(not (nil? %))\n              (repeatedly #(.getNextEntry zip-stream))))\n\n(defn copy-file [zip-stream filename]\n  (with-open [out-file (file-out-stream filename)]\n             (let [buff-size 4096\n                             buffer (byte-array buff-size)]\n               (loop [len (.read zip-stream buffer)]\n                     (when (&gt; len 0)\n                       (.write out-file buffer 0 len)\n                       (recur (.read zip-stream buffer)))))))\n\n(defn extract-stream [zip-stream to-folder]\n  (let [extract-entry (fn [zip-entry]\n                          (when (not (.isDirectory zip-entry))\n                            (let [to-file (io/file to-folder\n                                                   (.getName zip-entry))\n                                          parent-file (io/file (.getParent to-file))]\n                              (.mkdirs parent-file)\n                              (copy-file zip-stream to-file))))]\n    (-&gt;&gt; zip-stream\n      entries\n      (map extract-entry)\n      dorun)))\n</code></pre>\n\n<p>This is effectively equivalent to simply unzipping the file with an <code>unzip</code> utility.  The beauty of it is that since the entries are in a lazy seq, you can <code>filter</code> or <code>drop</code> or <code>take</code> to your hearts (or requirements) content. Well, I'm pretty sure you can.  Haven't really tried it yet :)</p>\n\n<p>Also do note.  You MUST process the seq inside of the function where you open the zip stream!!!  </p>\n"},{"tags":[],"owner":{"account_id":3463409,"reputation":101,"user_id":2899748,"display_name":"Joerg Schmuecker"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645333830,"creation_date":1645333830,"answer_id":71191533,"question_id":5419125,"body_markdown":"My preferred solution is to create a `lazy-seq` of `[#ZipEntry, #InputStream]` from the zip file.\r\n\r\n```\r\n(defn lazy-zip\r\n  &quot;returns a lazy-seq of [entry inputstream] for a zip file\r\n\r\n  The zipfile will be closed when the seq is exhausted. All processing has to be done transient through `map` or similar methods.&quot;\r\n  [filename]\r\n  (let [zf (java.util.zip.ZipFile. filename)]\r\n    (letfn [(helper [entries]\r\n              (lazy-seq\r\n               (if-let [s (seq entries)]\r\n                 (cons [(first entries)\r\n                        (.getInputStream zf (first entries))]\r\n                       (helper (rest entries)))\r\n                 (do (println &quot;closing zipfile&quot;) (.close zf) nil))))]\r\n      (helper (-&gt;&gt; zf (.stream) (.toArray))))))\r\n```\r\nHere is the test that shows the usage:\r\n```\r\n(deftest test-lazy-zip\r\n  (testing &quot;sample zip is read correctly&quot;\r\n    (is (=\r\n         &#39;([&quot;sample.xml&quot; &quot;&lt;?xml version=\\&quot;1.0\\&quot; encoding=\\&quot;UTF-8\\&quot;&gt;&quot; &quot;&lt;foo&gt;&quot; &quot;&lt;bar&gt;&quot; &quot;&lt;baz&gt;The baz value&lt;/baz&gt;&quot; &quot;&lt;/bar&gt;&quot; &quot;&lt;/foo&gt;&quot;])\r\n         (map (fn [[entry reader]]\r\n                (into [(.getName entry)]\r\n                      (line-seq (stream-to-buffered-reader reader))))\r\n              (lazy-zip &quot;sample.xml.zip&quot;))))))\r\n```","title":"Reading a zip file using java api from clojure","body":"<p>My preferred solution is to create a <code>lazy-seq</code> of <code>[#ZipEntry, #InputStream]</code> from the zip file.</p>\n<pre><code>(defn lazy-zip\n  &quot;returns a lazy-seq of [entry inputstream] for a zip file\n\n  The zipfile will be closed when the seq is exhausted. All processing has to be done transient through `map` or similar methods.&quot;\n  [filename]\n  (let [zf (java.util.zip.ZipFile. filename)]\n    (letfn [(helper [entries]\n              (lazy-seq\n               (if-let [s (seq entries)]\n                 (cons [(first entries)\n                        (.getInputStream zf (first entries))]\n                       (helper (rest entries)))\n                 (do (println &quot;closing zipfile&quot;) (.close zf) nil))))]\n      (helper (-&gt;&gt; zf (.stream) (.toArray))))))\n</code></pre>\n<p>Here is the test that shows the usage:</p>\n<pre><code>(deftest test-lazy-zip\n  (testing &quot;sample zip is read correctly&quot;\n    (is (=\n         '([&quot;sample.xml&quot; &quot;&lt;?xml version=\\&quot;1.0\\&quot; encoding=\\&quot;UTF-8\\&quot;&gt;&quot; &quot;&lt;foo&gt;&quot; &quot;&lt;bar&gt;&quot; &quot;&lt;baz&gt;The baz value&lt;/baz&gt;&quot; &quot;&lt;/bar&gt;&quot; &quot;&lt;/foo&gt;&quot;])\n         (map (fn [[entry reader]]\n                (into [(.getName entry)]\n                      (line-seq (stream-to-buffered-reader reader))))\n              (lazy-zip &quot;sample.xml.zip&quot;))))))\n</code></pre>\n"}],"owner":{"account_id":91388,"reputation":4085,"user_id":250944,"accept_rate":82,"display_name":"Dfr"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5999,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":5419767,"answer_count":5,"score":9,"last_activity_date":1645333830,"creation_date":1300969901,"question_id":5419125,"body_markdown":"I&#39;m trying to rewrite following snippet in clojure, but it all comes out ugly, maybe someone will suggest a more elegant solution?\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    import java.io.FileInputStream;\r\n    import java.io.FileNotFoundException;\r\n    import java.io.IOException;\r\n    import java.util.zip.ZipEntry;\r\n    import java.util.zip.ZipInputStream;\r\n    \r\n    public class ZipFileRdrExp {\r\n    \r\n      public static void main(String[] args) {\r\n    \r\n        try {\r\n    \r\n          FileInputStream fis = new FileInputStream(&quot;C:\\\\MyZip.zip&quot;);\r\n          ZipInputStream zis = new ZipInputStream(fis);\r\n          ZipEntry ze;\r\n          while((ze=zis.getNextEntry())!=null){\r\n            System.out.println(ze.getName());\r\n            zis.closeEntry();\r\n          }\r\n    \r\n          zis.close();\r\n    \r\n        } catch (FileNotFoundException e) {\r\n          e.printStackTrace();\r\n        } catch (IOException e) {\r\n          e.printStackTrace();\r\n        }\r\n      }\r\n    }\r\n\r\nHere is my ugly try with duplicate call to getNextEntry:\r\n\r\n&lt;!-- language: lang-clj --&gt;\r\n\r\n    (ns app.core\r\n      (:import\r\n      (java.io FileInputStream FileNotFoundException IOException File)\r\n      (java.util.zip ZipInputStream ZipEntry)))\r\n    \r\n    \r\n    (defn- read-zip [zip-file]\r\n      (let [fis (FileInputStream. zip-file)\r\n            zis (ZipInputStream. fis)]\r\n        (loop [ze (.getNextEntry zis)]\r\n          (when ze\r\n            (println (.getName ze))\r\n            (.closeEntry zis)\r\n            (recur (.getNextEntry zis))))\r\n        (.close zis)))","title":"Reading a zip file using java api from clojure","body":"<p>I'm trying to rewrite following snippet in clojure, but it all comes out ugly, maybe someone will suggest a more elegant solution?</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.FileInputStream;\nimport java.io.FileNotFoundException;\nimport java.io.IOException;\nimport java.util.zip.ZipEntry;\nimport java.util.zip.ZipInputStream;\n\npublic class ZipFileRdrExp {\n\n  public static void main(String[] args) {\n\n    try {\n\n      FileInputStream fis = new FileInputStream(\"C:\\\\MyZip.zip\");\n      ZipInputStream zis = new ZipInputStream(fis);\n      ZipEntry ze;\n      while((ze=zis.getNextEntry())!=null){\n        System.out.println(ze.getName());\n        zis.closeEntry();\n      }\n\n      zis.close();\n\n    } catch (FileNotFoundException e) {\n      e.printStackTrace();\n    } catch (IOException e) {\n      e.printStackTrace();\n    }\n  }\n}\n</code></pre>\n\n<p>Here is my ugly try with duplicate call to getNextEntry:</p>\n\n<pre class=\"lang-clj prettyprint-override\"><code>(ns app.core\n  (:import\n  (java.io FileInputStream FileNotFoundException IOException File)\n  (java.util.zip ZipInputStream ZipEntry)))\n\n\n(defn- read-zip [zip-file]\n  (let [fis (FileInputStream. zip-file)\n        zis (ZipInputStream. fis)]\n    (loop [ze (.getNextEntry zis)]\n      (when ze\n        (println (.getName ze))\n        (.closeEntry zis)\n        (recur (.getNextEntry zis))))\n    (.close zis)))\n</code></pre>\n"},{"tags":["java","apache-kafka"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1645342251,"post_id":71190928,"comment_id":125842167,"body_markdown":"Voting to close as a typo. Port 2181 is Zookeeper, not Kafka. Latest kafka tools have removed Zookeeper connection properties","body":"Voting to close as a typo. Port 2181 is Zookeeper, not Kafka. Latest kafka tools have removed Zookeeper connection properties"}],"answers":[{"tags":[],"owner":{"display_name":"user18256622"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1645333702,"creation_date":1645333702,"answer_id":71191525,"question_id":71190928,"body_markdown":"I resolved this issue. Basically, I enabled listener in server.properties as below,\r\n\r\nlisteners=PLAINTEXT://localhost:9092\r\n\r\nThen while running list command changed port number to 9092\r\n\r\nC:\\kafka_2.13-3.1.0&gt;kafka-topics --bootstrap-server localhost:**9092** --list\r\n\r\nfirst_topic\r\n\r\nC:\\kafka_2.13-3.1.0&gt;","title":"ERROR org.apache.kafka.common.errors.TimeoutException: Timed out waiting for a node assignment - Error while installing kafka 3.1.0+java11 in windows","body":"<p>I resolved this issue. Basically, I enabled listener in server.properties as below,</p>\n<p>listeners=PLAINTEXT://localhost:9092</p>\n<p>Then while running list command changed port number to 9092</p>\n<p>C:\\kafka_2.13-3.1.0&gt;kafka-topics --bootstrap-server localhost:<strong>9092</strong> --list</p>\n<p>first_topic</p>\n<p>C:\\kafka_2.13-3.1.0&gt;</p>\n"}],"owner":{"display_name":"user18256622"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13288,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71191525,"answer_count":1,"score":0,"last_activity_date":1645333702,"creation_date":1645324067,"question_id":71190928,"body_markdown":"I am trying to setup kafka 3.1.0 with java 11 on my local machine. However, while listing existing topics, I am getting timeout exception.\r\n\r\n**Steps followed:**\r\n\r\n1. Started zookeeper server:\r\nzookeeper-server-start.bat config\\zookeeper.properties\r\n\r\n2. Started kafka server:\r\nkafka-server-start.bat config\\server.properties\r\n\r\n3. Command to list topics:\r\nkafka-topics --bootstrap-server localhost:2181 --list\r\n\r\nC:\\kafka_2.13-3.1.0&gt;kafka-topics --bootstrap-server localhost:2181 --list\r\nError while executing topic command : Timed out waiting for a node assignment. Call: listTopics\r\n[2022-02-19 20:11:37,239] ERROR org.apache.kafka.common.errors.TimeoutException: Timed out waiting for a node assignment. Call: listTopics\r\n (kafka.admin.TopicCommand$)\r\n\r\n[Attached stacktrace from command prompt][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Hf47s.jpg","title":"ERROR org.apache.kafka.common.errors.TimeoutException: Timed out waiting for a node assignment - Error while installing kafka 3.1.0+java11 in windows","body":"<p>I am trying to setup kafka 3.1.0 with java 11 on my local machine. However, while listing existing topics, I am getting timeout exception.</p>\n<p><strong>Steps followed:</strong></p>\n<ol>\n<li><p>Started zookeeper server:\nzookeeper-server-start.bat config\\zookeeper.properties</p>\n</li>\n<li><p>Started kafka server:\nkafka-server-start.bat config\\server.properties</p>\n</li>\n<li><p>Command to list topics:\nkafka-topics --bootstrap-server localhost:2181 --list</p>\n</li>\n</ol>\n<p>C:\\kafka_2.13-3.1.0&gt;kafka-topics --bootstrap-server localhost:2181 --list\nError while executing topic command : Timed out waiting for a node assignment. Call: listTopics\n[2022-02-19 20:11:37,239] ERROR org.apache.kafka.common.errors.TimeoutException: Timed out waiting for a node assignment. Call: listTopics\n(kafka.admin.TopicCommand$)</p>\n<p><a href=\"https://i.stack.imgur.com/Hf47s.jpg\" rel=\"nofollow noreferrer\">Attached stacktrace from command prompt</a></p>\n"},{"tags":["java","swing","event-dispatch-thread"],"comments":[{"owner":{"account_id":9722462,"reputation":4365,"user_id":7210739,"display_name":"DontKnowMuchBut Getting Better"},"score":1,"creation_date":1645315470,"post_id":71190211,"comment_id":125839102,"body_markdown":"You&#39;re breaking Swing threading rules with your while true loop which will block the Swing event thread. Use a SwingWorker to help you create a background thread, and listen to the socket from that thread","body":"You&#39;re breaking Swing threading rules with your while true loop which will block the Swing event thread. Use a SwingWorker to help you create a background thread, and listen to the socket from that thread"}],"answers":[{"tags":[],"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1645315624,"creation_date":1645315624,"answer_id":71190279,"question_id":71190211,"body_markdown":"You have a `ServerSocket` blocking to read the client connection on the Event Dispatch Thread. Spawn a new thread when you accept a connection. Something like,\r\n\r\n\tbtnListen.addActionListener(new ActionListener() {\r\n\t\tpublic void actionPerformed(ActionEvent e) {\r\n\r\n\t\t\tint portNum = Integer.parseInt(portInput.getText());\r\n\r\n\t\t\ttry {\r\n\t\t\t\tServerSocket ss = new ServerSocket(portNum, sessionNum, InetAddress.getByName(IPNum));\r\n\t\t\t\tSystem.out.println(&quot;Waiting for client.........&quot;);\r\n\t\t\t\tfinal Socket s = ss.accept();// establishes connection\r\n\t\t\t\tThread t = new Thread(new Runnable() {\r\n\t\t\t\t\tpublic void run() {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tSystem.out.println(&quot;Client connected.........&quot;);\r\n\t\t\t\t\t\t\tvar rawIn = s.getInputStream();\r\n\t\t\t\t\t\t\tvar in = new BufferedReader(new InputStreamReader(rawIn, StandardCharsets.UTF_8));\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\twhile (true) { // Don&#39;t do this on the EDT.\r\n\t\t\t\t\t\t\t\t\tString cmd = in.readLine();\r\n\t\t\t\t\t\t\t\t\tif (cmd == null)\r\n\t\t\t\t\t\t\t\t\t\tbreak; // client is hung up\r\n\t\t\t\t\t\t\t\t\tif (cmd.isEmpty())\r\n\t\t\t\t\t\t\t\t\t\tcontinue; // empty line was sent\r\n\t\t\t\t\t\t\t\t\tSystem.out.println(&quot;Client sent: &quot; + cmd);\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tSystem.out.println(&quot;Closing connection&quot;);\r\n\r\n\t\t\t\t\t\t\t\ts.close();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} catch (Exception e) {\r\n\t\t\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tt.start();\r\n\t\t\t} catch (IOException i) {\r\n\t\t\t\tSystem.out.println(i);\r\n\t\t\t}\r\n\t\t}\r\n\t});","title":"Socket Listener - I almost have it","body":"<p>You have a <code>ServerSocket</code> blocking to read the client connection on the Event Dispatch Thread. Spawn a new thread when you accept a connection. Something like,</p>\n<pre><code>btnListen.addActionListener(new ActionListener() {\n    public void actionPerformed(ActionEvent e) {\n\n        int portNum = Integer.parseInt(portInput.getText());\n\n        try {\n            ServerSocket ss = new ServerSocket(portNum, sessionNum, InetAddress.getByName(IPNum));\n            System.out.println(&quot;Waiting for client.........&quot;);\n            final Socket s = ss.accept();// establishes connection\n            Thread t = new Thread(new Runnable() {\n                public void run() {\n                    try {\n                        System.out.println(&quot;Client connected.........&quot;);\n                        var rawIn = s.getInputStream();\n                        var in = new BufferedReader(new InputStreamReader(rawIn, StandardCharsets.UTF_8));\n                        {\n                            while (true) { // Don't do this on the EDT.\n                                String cmd = in.readLine();\n                                if (cmd == null)\n                                    break; // client is hung up\n                                if (cmd.isEmpty())\n                                    continue; // empty line was sent\n                                System.out.println(&quot;Client sent: &quot; + cmd);\n                            }\n\n                            System.out.println(&quot;Closing connection&quot;);\n\n                            s.close();\n                        }\n                    } catch (Exception e) {\n                        e.printStackTrace();\n                    }\n                }\n            });\n            t.start();\n        } catch (IOException i) {\n            System.out.println(i);\n        }\n    }\n});\n</code></pre>\n"}],"owner":{"account_id":24022869,"reputation":1,"user_id":18004888,"display_name":"bwc"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":107,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1645332267,"creation_date":1645314766,"question_id":71190211,"body_markdown":"I&#39;ve been fighting with this and my own poor coding skills apparently.\r\n\r\nI&#39;m trying to create a small desktop app that will act essentially as a &quot;Socket Listener&quot; where I can display any information sent to the localhost IP and any port I designate. I have the program working without a UI, but I wanted to make it an actual desktop app (part of my learning journey).\r\n\r\nI&#39;ve searched around and borrowed some ideas from others and almost have it working. \r\n\r\nWhen I launch the app, enter a port number and then try to connect to it using PUTTY I don&#39;t see anything displaying in my JTextArea. What should appear is a &quot;Waiting for client&quot; message and then when connected a &quot;Client connected&quot; message, then, of course, any text I type into PUTTY.\r\n\r\nIf I try connecting using PUTTY, type some text, then exit putty, all of that text and the messages above will appear in the JTextArea (JTextArea is at the bottom of the code). \r\n\r\nWhat on earth am I doing wrong here?\r\n\r\n```\r\nimport java.awt.BorderLayout;\r\nimport java.awt.EventQueue;\r\nimport javax.swing.JFrame;\r\nimport javax.swing.JPanel;\r\nimport javax.swing.border.EmptyBorder;\r\nimport javax.swing.JLabel;\r\nimport java.awt.Font;\r\nimport javax.swing.SwingConstants;\r\nimport javax.swing.JTextField;\r\nimport javax.swing.JButton;\r\nimport java.awt.event.ActionListener;\r\nimport java.io.*;\r\nimport java.net.*;\r\nimport java.nio.*;\r\nimport java.nio.charset.StandardCharsets;\r\nimport java.awt.event.ActionEvent;\r\nimport javax.swing.JScrollPane;\r\nimport javax.swing.JTextPane;\r\nimport javax.swing.JTextArea;\r\n\r\npublic class Server extends JFrame {\r\n\r\n    private JPanel contentPane;\r\n    private JTextField portInput;\r\n    static int sessionNum = 1;\r\n    static String IPNum = &quot;127.0.0.1&quot;;\r\n    public JButton btnListen;\r\n    private JTextField textField;\r\n\r\n    /**\r\n     * Launch the application.\r\n     */\r\n    public static void main(String[] args) {\r\n        EventQueue.invokeLater(new Runnable() {\r\n            public void run() {\r\n                try {\r\n                    Server frame = new Server();\r\n                    frame.setVisible(true);\r\n\r\n\r\n                } catch (Exception e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Create the frame.\r\n     */\r\n    public Server() {\r\n        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        setBounds(100, 100, 570, 503);\r\n        contentPane = new JPanel();\r\n        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));\r\n        setContentPane(contentPane);\r\n        contentPane.setLayout(null);\r\n\r\n        JLabel lblAddress = new JLabel(&quot;IP Address:&quot;);\r\n        lblAddress.setHorizontalAlignment(SwingConstants.RIGHT);\r\n        lblAddress.setFont(new Font(&quot;Tahoma&quot;, Font.PLAIN, 16));\r\n        lblAddress.setBounds(10, 29, 81, 27);\r\n        contentPane.add(lblAddress);\r\n\r\n        JLabel lblDisplayAddress = new JLabel(&quot;127.0.0.1&quot;);\r\n        lblDisplayAddress.setFont(new Font(&quot;Tahoma&quot;, Font.PLAIN, 16));\r\n        lblDisplayAddress.setBounds(101, 29, 81, 27);\r\n        contentPane.add(lblDisplayAddress);\r\n\r\n        JLabel lblPort = new JLabel(&quot;Port: &quot;);\r\n        lblPort.setHorizontalAlignment(SwingConstants.RIGHT);\r\n        lblPort.setFont(new Font(&quot;Tahoma&quot;, Font.PLAIN, 16));\r\n        lblPort.setBounds(210, 33, 90, 19);\r\n        contentPane.add(lblPort);\r\n\r\n        portInput = new JTextField();\r\n        portInput.setFont(new Font(&quot;Tahoma&quot;, Font.PLAIN, 16));\r\n        portInput.setBounds(297, 31, 111, 22);\r\n        contentPane.add(portInput);\r\n        portInput.setColumns(10);\r\n\r\n        btnListen = new JButton(&quot;LISTEN&quot;);\r\n        btnListen.addActionListener(new ActionListener() {\r\n            public void actionPerformed(ActionEvent e) {\r\n\r\n                int portNum =  Integer.parseInt(portInput.getText());\r\n\r\n                try{\r\n                    ServerSocket ss=new ServerSocket(portNum, sessionNum, InetAddress.getByName(IPNum));\r\n                    System.out.println(&quot;Waiting for client.........&quot;);\r\n                    Socket s=ss.accept();//establishes connection\r\n                    System.out.println(&quot;Client connected.........&quot;);\r\n                    var rawIn = s.getInputStream();\r\n                    var in = new BufferedReader(new InputStreamReader(rawIn, StandardCharsets.UTF_8)); {\r\n\r\n\r\n                        while (true){\r\n                            String cmd = in.readLine();\r\n                            if (cmd == null) break; //client is hung up\r\n                            if (cmd.isEmpty()) continue; //empty line was sent\r\n                            System.out.println(&quot;Client sent: &quot; + cmd);\r\n                        }\r\n\r\n                        System.out.println(&quot;Closing connection&quot;);\r\n\r\n                        s.close();\r\n                    }\r\n\r\n                }catch(IOException i){System.out.println(i);}\r\n\r\n            }\r\n        });\r\n        btnListen.setFont(new Font(&quot;Tahoma&quot;, Font.PLAIN, 16));\r\n        btnListen.setBounds(450, 31, 89, 23);\r\n        contentPane.add(btnListen);\r\n\r\n        JTextArea output = new JTextArea();\r\n        output.setBounds(10, 77, 536, 382);\r\n        contentPane.add(output);\r\n        PrintStream out = new PrintStream(new OutputStream() {\r\n            @Override\r\n            public void write(int b) throws IOException {\r\n                output.append(&quot;&quot;+(char)(b &amp; 0xFF));\r\n            }\r\n        });\r\n        System.setOut(out);\r\n\r\n\r\n    }\r\n}\r\n```\r\n\r\nUPDATED\r\n\r\nThank you so much for the input. I&#39;ve incorporated your changes and it is so unbelievably close.\r\n\r\nOne question. When I run the current code (below), Why doesn&#39;t the JTextArea show the &quot;Waiting for client...&quot; message right away? It shows up once PUTTY connects, but not before.\r\n\r\n```\r\nimport java.awt.BorderLayout;\r\nimport java.awt.EventQueue;\r\nimport javax.swing.JFrame;\r\nimport javax.swing.JPanel;\r\nimport javax.swing.border.EmptyBorder;\r\nimport javax.swing.JLabel;\r\nimport java.awt.Font;\r\nimport javax.swing.SwingConstants;\r\nimport javax.swing.JTextField;\r\nimport javax.swing.JButton;\r\nimport java.awt.event.ActionListener;\r\nimport java.io.*;\r\nimport java.net.*;\r\nimport java.nio.*;\r\nimport java.nio.charset.StandardCharsets;\r\nimport java.awt.event.ActionEvent;\r\nimport javax.swing.JScrollPane;\r\nimport javax.swing.JTextPane;\r\nimport javax.swing.JTextArea;\r\n\r\npublic class Server extends JFrame {\r\n\r\n    private JPanel contentPane;\r\n    private JTextField portInput;\r\n    static int sessionNum = 1;\r\n    static String IPNum = &quot;127.0.0.1&quot;;\r\n    public JButton btnListen;\r\n    private JTextField textField;\r\n\r\n    /**\r\n     * Launch the application.\r\n     */\r\n    public static void main(String[] args) {\r\n        EventQueue.invokeLater(new Runnable() {\r\n            public void run() {\r\n                try {\r\n                    Server frame = new Server();\r\n                    frame.setVisible(true);\r\n\r\n\r\n                } catch (Exception e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Create the frame.\r\n     */\r\n    public Server() {\r\n        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        setBounds(100, 100, 570, 503);\r\n        contentPane = new JPanel();\r\n        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));\r\n        setContentPane(contentPane);\r\n        contentPane.setLayout(null);\r\n\r\n        JLabel lblAddress = new JLabel(&quot;IP Address:&quot;);\r\n        lblAddress.setHorizontalAlignment(SwingConstants.RIGHT);\r\n        lblAddress.setFont(new Font(&quot;Tahoma&quot;, Font.PLAIN, 16));\r\n        lblAddress.setBounds(10, 29, 81, 27);\r\n        contentPane.add(lblAddress);\r\n\r\n        JLabel lblDisplayAddress = new JLabel(&quot;127.0.0.1&quot;);\r\n        lblDisplayAddress.setFont(new Font(&quot;Tahoma&quot;, Font.PLAIN, 16));\r\n        lblDisplayAddress.setBounds(101, 29, 81, 27);\r\n        contentPane.add(lblDisplayAddress);\r\n\r\n        JLabel lblPort = new JLabel(&quot;Port: &quot;);\r\n        lblPort.setHorizontalAlignment(SwingConstants.RIGHT);\r\n        lblPort.setFont(new Font(&quot;Tahoma&quot;, Font.PLAIN, 16));\r\n        lblPort.setBounds(210, 33, 90, 19);\r\n        contentPane.add(lblPort);\r\n\r\n        portInput = new JTextField();\r\n        portInput.setFont(new Font(&quot;Tahoma&quot;, Font.PLAIN, 16));\r\n        portInput.setBounds(297, 31, 111, 22);\r\n        contentPane.add(portInput);\r\n        portInput.setColumns(10);\r\n\r\n        btnListen = new JButton(&quot;LISTEN&quot;);\r\n        btnListen.addActionListener(new ActionListener() {\r\n            public void actionPerformed(ActionEvent e) {\r\n\r\n                int portNum =  Integer.parseInt(portInput.getText());\r\n\r\n                try {\r\n                    ServerSocket ss = new ServerSocket(portNum, sessionNum, InetAddress.getByName(IPNum));\r\n                    System.out.println(&quot;Waiting for client.........&quot;);\r\n                    Socket s = ss.accept();// establishes connection\r\n                    Thread t = new Thread(new Runnable() {\r\n                        public void run() {\r\n                            try {\r\n                                System.out.println(&quot;Client connected.........&quot;);\r\n                                var rawIn = s.getInputStream();\r\n                                var in = new BufferedReader(new InputStreamReader(rawIn, StandardCharsets.UTF_8));\r\n                                {\r\n                                    while (true) { // Don&#39;t do this on the EDT.\r\n                                        String cmd = in.readLine();\r\n                                        if (cmd == null)\r\n                                            break; // client is hung up\r\n                                        if (cmd.isEmpty())\r\n                                            continue; // empty line was sent\r\n                                        System.out.println(&quot;Client sent: &quot; + cmd);\r\n                                    }\r\n\r\n                                    System.out.println(&quot;Closing connection&quot;);\r\n\r\n                                    s.close();\r\n                                }\r\n                            } catch (Exception e) {\r\n                                e.printStackTrace();\r\n                            }\r\n                        }\r\n                    });\r\n                    t.start();\r\n                } catch (IOException i) {\r\n                    System.out.println(i);\r\n                }\r\n            }\r\n        });\r\n        btnListen.setFont(new Font(&quot;Tahoma&quot;, Font.PLAIN, 16));\r\n        btnListen.setBounds(450, 31, 89, 23);\r\n        contentPane.add(btnListen);\r\n\r\n        JTextArea output = new JTextArea();\r\n        output.setBounds(10, 77, 536, 382);\r\n        contentPane.add(output);\r\n        PrintStream out = new PrintStream(new OutputStream() {\r\n            @Override\r\n            public void write(int b) throws IOException {\r\n                output.append(&quot;&quot;+(char)(b &amp; 0xFF));\r\n            }\r\n        });\r\n        System.setOut(out);\r\n\r\n\r\n    }\r\n}\r\n\r\n```","title":"Socket Listener - I almost have it","body":"<p>I've been fighting with this and my own poor coding skills apparently.</p>\n<p>I'm trying to create a small desktop app that will act essentially as a &quot;Socket Listener&quot; where I can display any information sent to the localhost IP and any port I designate. I have the program working without a UI, but I wanted to make it an actual desktop app (part of my learning journey).</p>\n<p>I've searched around and borrowed some ideas from others and almost have it working.</p>\n<p>When I launch the app, enter a port number and then try to connect to it using PUTTY I don't see anything displaying in my JTextArea. What should appear is a &quot;Waiting for client&quot; message and then when connected a &quot;Client connected&quot; message, then, of course, any text I type into PUTTY.</p>\n<p>If I try connecting using PUTTY, type some text, then exit putty, all of that text and the messages above will appear in the JTextArea (JTextArea is at the bottom of the code).</p>\n<p>What on earth am I doing wrong here?</p>\n<pre><code>import java.awt.BorderLayout;\nimport java.awt.EventQueue;\nimport javax.swing.JFrame;\nimport javax.swing.JPanel;\nimport javax.swing.border.EmptyBorder;\nimport javax.swing.JLabel;\nimport java.awt.Font;\nimport javax.swing.SwingConstants;\nimport javax.swing.JTextField;\nimport javax.swing.JButton;\nimport java.awt.event.ActionListener;\nimport java.io.*;\nimport java.net.*;\nimport java.nio.*;\nimport java.nio.charset.StandardCharsets;\nimport java.awt.event.ActionEvent;\nimport javax.swing.JScrollPane;\nimport javax.swing.JTextPane;\nimport javax.swing.JTextArea;\n\npublic class Server extends JFrame {\n\n    private JPanel contentPane;\n    private JTextField portInput;\n    static int sessionNum = 1;\n    static String IPNum = &quot;127.0.0.1&quot;;\n    public JButton btnListen;\n    private JTextField textField;\n\n    /**\n     * Launch the application.\n     */\n    public static void main(String[] args) {\n        EventQueue.invokeLater(new Runnable() {\n            public void run() {\n                try {\n                    Server frame = new Server();\n                    frame.setVisible(true);\n\n\n                } catch (Exception e) {\n                    e.printStackTrace();\n                }\n            }\n        });\n    }\n\n    /**\n     * Create the frame.\n     */\n    public Server() {\n        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        setBounds(100, 100, 570, 503);\n        contentPane = new JPanel();\n        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));\n        setContentPane(contentPane);\n        contentPane.setLayout(null);\n\n        JLabel lblAddress = new JLabel(&quot;IP Address:&quot;);\n        lblAddress.setHorizontalAlignment(SwingConstants.RIGHT);\n        lblAddress.setFont(new Font(&quot;Tahoma&quot;, Font.PLAIN, 16));\n        lblAddress.setBounds(10, 29, 81, 27);\n        contentPane.add(lblAddress);\n\n        JLabel lblDisplayAddress = new JLabel(&quot;127.0.0.1&quot;);\n        lblDisplayAddress.setFont(new Font(&quot;Tahoma&quot;, Font.PLAIN, 16));\n        lblDisplayAddress.setBounds(101, 29, 81, 27);\n        contentPane.add(lblDisplayAddress);\n\n        JLabel lblPort = new JLabel(&quot;Port: &quot;);\n        lblPort.setHorizontalAlignment(SwingConstants.RIGHT);\n        lblPort.setFont(new Font(&quot;Tahoma&quot;, Font.PLAIN, 16));\n        lblPort.setBounds(210, 33, 90, 19);\n        contentPane.add(lblPort);\n\n        portInput = new JTextField();\n        portInput.setFont(new Font(&quot;Tahoma&quot;, Font.PLAIN, 16));\n        portInput.setBounds(297, 31, 111, 22);\n        contentPane.add(portInput);\n        portInput.setColumns(10);\n\n        btnListen = new JButton(&quot;LISTEN&quot;);\n        btnListen.addActionListener(new ActionListener() {\n            public void actionPerformed(ActionEvent e) {\n\n                int portNum =  Integer.parseInt(portInput.getText());\n\n                try{\n                    ServerSocket ss=new ServerSocket(portNum, sessionNum, InetAddress.getByName(IPNum));\n                    System.out.println(&quot;Waiting for client.........&quot;);\n                    Socket s=ss.accept();//establishes connection\n                    System.out.println(&quot;Client connected.........&quot;);\n                    var rawIn = s.getInputStream();\n                    var in = new BufferedReader(new InputStreamReader(rawIn, StandardCharsets.UTF_8)); {\n\n\n                        while (true){\n                            String cmd = in.readLine();\n                            if (cmd == null) break; //client is hung up\n                            if (cmd.isEmpty()) continue; //empty line was sent\n                            System.out.println(&quot;Client sent: &quot; + cmd);\n                        }\n\n                        System.out.println(&quot;Closing connection&quot;);\n\n                        s.close();\n                    }\n\n                }catch(IOException i){System.out.println(i);}\n\n            }\n        });\n        btnListen.setFont(new Font(&quot;Tahoma&quot;, Font.PLAIN, 16));\n        btnListen.setBounds(450, 31, 89, 23);\n        contentPane.add(btnListen);\n\n        JTextArea output = new JTextArea();\n        output.setBounds(10, 77, 536, 382);\n        contentPane.add(output);\n        PrintStream out = new PrintStream(new OutputStream() {\n            @Override\n            public void write(int b) throws IOException {\n                output.append(&quot;&quot;+(char)(b &amp; 0xFF));\n            }\n        });\n        System.setOut(out);\n\n\n    }\n}\n</code></pre>\n<p>UPDATED</p>\n<p>Thank you so much for the input. I've incorporated your changes and it is so unbelievably close.</p>\n<p>One question. When I run the current code (below), Why doesn't the JTextArea show the &quot;Waiting for client...&quot; message right away? It shows up once PUTTY connects, but not before.</p>\n<pre><code>import java.awt.BorderLayout;\nimport java.awt.EventQueue;\nimport javax.swing.JFrame;\nimport javax.swing.JPanel;\nimport javax.swing.border.EmptyBorder;\nimport javax.swing.JLabel;\nimport java.awt.Font;\nimport javax.swing.SwingConstants;\nimport javax.swing.JTextField;\nimport javax.swing.JButton;\nimport java.awt.event.ActionListener;\nimport java.io.*;\nimport java.net.*;\nimport java.nio.*;\nimport java.nio.charset.StandardCharsets;\nimport java.awt.event.ActionEvent;\nimport javax.swing.JScrollPane;\nimport javax.swing.JTextPane;\nimport javax.swing.JTextArea;\n\npublic class Server extends JFrame {\n\n    private JPanel contentPane;\n    private JTextField portInput;\n    static int sessionNum = 1;\n    static String IPNum = &quot;127.0.0.1&quot;;\n    public JButton btnListen;\n    private JTextField textField;\n\n    /**\n     * Launch the application.\n     */\n    public static void main(String[] args) {\n        EventQueue.invokeLater(new Runnable() {\n            public void run() {\n                try {\n                    Server frame = new Server();\n                    frame.setVisible(true);\n\n\n                } catch (Exception e) {\n                    e.printStackTrace();\n                }\n            }\n        });\n    }\n\n    /**\n     * Create the frame.\n     */\n    public Server() {\n        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        setBounds(100, 100, 570, 503);\n        contentPane = new JPanel();\n        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));\n        setContentPane(contentPane);\n        contentPane.setLayout(null);\n\n        JLabel lblAddress = new JLabel(&quot;IP Address:&quot;);\n        lblAddress.setHorizontalAlignment(SwingConstants.RIGHT);\n        lblAddress.setFont(new Font(&quot;Tahoma&quot;, Font.PLAIN, 16));\n        lblAddress.setBounds(10, 29, 81, 27);\n        contentPane.add(lblAddress);\n\n        JLabel lblDisplayAddress = new JLabel(&quot;127.0.0.1&quot;);\n        lblDisplayAddress.setFont(new Font(&quot;Tahoma&quot;, Font.PLAIN, 16));\n        lblDisplayAddress.setBounds(101, 29, 81, 27);\n        contentPane.add(lblDisplayAddress);\n\n        JLabel lblPort = new JLabel(&quot;Port: &quot;);\n        lblPort.setHorizontalAlignment(SwingConstants.RIGHT);\n        lblPort.setFont(new Font(&quot;Tahoma&quot;, Font.PLAIN, 16));\n        lblPort.setBounds(210, 33, 90, 19);\n        contentPane.add(lblPort);\n\n        portInput = new JTextField();\n        portInput.setFont(new Font(&quot;Tahoma&quot;, Font.PLAIN, 16));\n        portInput.setBounds(297, 31, 111, 22);\n        contentPane.add(portInput);\n        portInput.setColumns(10);\n\n        btnListen = new JButton(&quot;LISTEN&quot;);\n        btnListen.addActionListener(new ActionListener() {\n            public void actionPerformed(ActionEvent e) {\n\n                int portNum =  Integer.parseInt(portInput.getText());\n\n                try {\n                    ServerSocket ss = new ServerSocket(portNum, sessionNum, InetAddress.getByName(IPNum));\n                    System.out.println(&quot;Waiting for client.........&quot;);\n                    Socket s = ss.accept();// establishes connection\n                    Thread t = new Thread(new Runnable() {\n                        public void run() {\n                            try {\n                                System.out.println(&quot;Client connected.........&quot;);\n                                var rawIn = s.getInputStream();\n                                var in = new BufferedReader(new InputStreamReader(rawIn, StandardCharsets.UTF_8));\n                                {\n                                    while (true) { // Don't do this on the EDT.\n                                        String cmd = in.readLine();\n                                        if (cmd == null)\n                                            break; // client is hung up\n                                        if (cmd.isEmpty())\n                                            continue; // empty line was sent\n                                        System.out.println(&quot;Client sent: &quot; + cmd);\n                                    }\n\n                                    System.out.println(&quot;Closing connection&quot;);\n\n                                    s.close();\n                                }\n                            } catch (Exception e) {\n                                e.printStackTrace();\n                            }\n                        }\n                    });\n                    t.start();\n                } catch (IOException i) {\n                    System.out.println(i);\n                }\n            }\n        });\n        btnListen.setFont(new Font(&quot;Tahoma&quot;, Font.PLAIN, 16));\n        btnListen.setBounds(450, 31, 89, 23);\n        contentPane.add(btnListen);\n\n        JTextArea output = new JTextArea();\n        output.setBounds(10, 77, 536, 382);\n        contentPane.add(output);\n        PrintStream out = new PrintStream(new OutputStream() {\n            @Override\n            public void write(int b) throws IOException {\n                output.append(&quot;&quot;+(char)(b &amp; 0xFF));\n            }\n        });\n        System.setOut(out);\n\n\n    }\n}\n\n</code></pre>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":4099584,"reputation":2238,"user_id":3365479,"accept_rate":80,"display_name":"madteapot"},"score":0,"creation_date":1426180228,"post_id":29015934,"comment_id":46276663,"body_markdown":"possible duplicate of [Read .txt file into 2D Array](http://stackoverflow.com/questions/22185683/read-txt-file-into-2d-array)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/22185683/read-txt-file-into-2d-array\">Read .txt file into 2D Array</a>"},{"owner":{"account_id":3647119,"reputation":6259,"user_id":3040064,"accept_rate":59,"display_name":"Jason Hu"},"score":0,"creation_date":1426180262,"post_id":29015934,"comment_id":46276677,"body_markdown":"what do you expect from the output?","body":"what do you expect from the output?"}],"answers":[{"tags":[],"owner":{"account_id":4832206,"reputation":7871,"user_id":3900120,"accept_rate":65,"display_name":"Apurva"},"down_vote_count":1,"up_vote_count":2,"is_accepted":true,"score":1,"last_activity_date":1426182242,"creation_date":1426180299,"answer_id":29016107,"question_id":29015934,"body_markdown":"You should put `System.out.printf(&quot;%n&quot;);` **out side the for loop**.\r\nAs it&#39;s inside the `for` loop, it prints a new line after printing every character.\r\n\r\nIt should be like,\r\n\r\n    while ((line = br.readLine() ) != null ){\r\n\r\n        char[] row = line.toCharArray();\r\n            int x = 0;\r\n            for (int i = 0; i &lt; row.length; i++) {\r\n            maze[x][i] = row[i];\r\n\r\n            System.out.print(maze[i]);\r\n            x++;\r\n            }\r\n            System.out.printf(&quot;%n&quot;);  //mention this\r\n        }\r\n\r\nAnd one more thing, **increment of `x` will not affect the sequence of output**.","title":"How do I take a text file and turn it into a 2D array in Java?","body":"<p>You should put <code>System.out.printf(\"%n\");</code> <strong>out side the for loop</strong>.\nAs it's inside the <code>for</code> loop, it prints a new line after printing every character.</p>\n\n<p>It should be like,</p>\n\n<pre><code>while ((line = br.readLine() ) != null ){\n\n    char[] row = line.toCharArray();\n        int x = 0;\n        for (int i = 0; i &lt; row.length; i++) {\n        maze[x][i] = row[i];\n\n        System.out.print(maze[i]);\n        x++;\n        }\n        System.out.printf(\"%n\");  //mention this\n    }\n</code></pre>\n\n<p>And one more thing, <strong>increment of <code>x</code> will not affect the sequence of output</strong>.</p>\n"},{"tags":[],"owner":{"account_id":949203,"reputation":4454,"user_id":975741,"display_name":"trooper"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1426180879,"creation_date":1426180557,"answer_id":29016205,"question_id":29015934,"body_markdown":"One issue is that you are incrementing `x` within your for loop, and resetting its value to 0 with each iteration of the while loop. Since you are using this variable to count rows, `x++` actually belongs outside of the for loop (but still within the while), and its initialization to 0 belongs before the start of the while loop.\r\n\r\nA similar issue exists with this statement, `System.out.printf(&quot;%n&quot;);`. You are printing this for every iteration of the for loop, so you are getting a new line between every character. Same as `x` above, move this statement outside the for loop (but still within the while).\r\n\r\n         int x = 0;\r\n         while ((line = br.readLine() ) != null )\r\n         {\r\n             char[] row = line.toCharArray();\r\n             for (int i = 0; i &lt; row.length; i++) \r\n             { \r\n                 maze[x][i] = row[i];\r\n                 System.out.print(maze[i]);\r\n             }\r\n             System.out.printf(&quot;%n&quot;);\r\n             x++;\r\n        }\r\n","title":"How do I take a text file and turn it into a 2D array in Java?","body":"<p>One issue is that you are incrementing <code>x</code> within your for loop, and resetting its value to 0 with each iteration of the while loop. Since you are using this variable to count rows, <code>x++</code> actually belongs outside of the for loop (but still within the while), and its initialization to 0 belongs before the start of the while loop.</p>\n\n<p>A similar issue exists with this statement, <code>System.out.printf(\"%n\");</code>. You are printing this for every iteration of the for loop, so you are getting a new line between every character. Same as <code>x</code> above, move this statement outside the for loop (but still within the while).</p>\n\n<pre><code>     int x = 0;\n     while ((line = br.readLine() ) != null )\n     {\n         char[] row = line.toCharArray();\n         for (int i = 0; i &lt; row.length; i++) \n         { \n             maze[x][i] = row[i];\n             System.out.print(maze[i]);\n         }\n         System.out.printf(\"%n\");\n         x++;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5928860,"reputation":1,"user_id":4663993,"display_name":"Siddharth Yadav"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1426186398,"creation_date":1426183372,"answer_id":29017103,"question_id":29015934,"body_markdown":"    BufferedReader br = new BufferedReader(newInputStreamReader(System.in));\r\n    char[][] arr = new char[4][4];\r\n    int i,j;\r\n\r\n    for (i=0; i&lt;4; i++) {\r\n        String[] str1=br.readLine().split(&quot; &quot;);\r\n        for (j=0; j&lt;4; j++) {\r\n\t        arr[i][j] = str1[j].charAt(0);\r\n\t    }\r\n\t}\r\n\r\n    for (i=0; i&lt;4; i++) {\r\n\t    for (j=0; j &lt; 4; j++) {\r\n\t\t    System.out.print(arr[i][j]+&quot; &quot;);\r\n\t\t}\r\n\t    System.out.println();\r\n    }\r\n   ","title":"How do I take a text file and turn it into a 2D array in Java?","body":"<pre><code>BufferedReader br = new BufferedReader(newInputStreamReader(System.in));\nchar[][] arr = new char[4][4];\nint i,j;\n\nfor (i=0; i&lt;4; i++) {\n    String[] str1=br.readLine().split(\" \");\n    for (j=0; j&lt;4; j++) {\n        arr[i][j] = str1[j].charAt(0);\n    }\n}\n\nfor (i=0; i&lt;4; i++) {\n    for (j=0; j &lt; 4; j++) {\n        System.out.print(arr[i][j]+\" \");\n    }\n    System.out.println();\n}\n</code></pre>\n"}],"owner":{"account_id":5868015,"reputation":786,"user_id":4621280,"accept_rate":100,"display_name":"mert d&#246;k&#252;mc&#252;"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1262,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":29016107,"answer_count":3,"score":3,"last_activity_date":1645330309,"creation_date":1426179756,"question_id":29015934,"body_markdown":"I have a text file, it is as follows:\r\n\r\n    1 1 1 0\r\n    0 0 1 0\r\n    0 0 1 0\r\n    0 9 1 0\r\n\r\nI want to read this and turn it into an 2D array line by line. \r\nFirst I used BufferedReader and FileReader, then turned them into one-dimensional arrays. I want to add my one-dimensional arrays to be added to my 2D array. Here is my code:\r\n\r\n    BufferedReader br = new BufferedReader (new FileReader (&quot;num.txt&quot;));\r\n    String line;\r\n    char[][] maze = new char[8][8];\r\n                \r\n    while ((line = br.readLine() ) != null ){\r\n                    \r\n        char[] row = line.toCharArray();\r\n        int x = 0;\r\n        for (int i = 0; i &lt; row.length; i++) {\r\n            maze[x][i] = row[i];\r\n                    \r\n            System.out.print(maze[i]);\r\n            System.out.printf(&quot;%n&quot;);\r\n            x++;\r\n        }\r\n    }\r\n\r\nI am trying to get a 2D array because I am going to check coordinates later on. So I want my 2D array&#39;s rows to be determined by every line of the text file I have.   \r\nBut the output I get is the following:\r\n\r\n    1\r\n      \r\n      1\r\n        \r\n        1\r\n         \r\n          0\r\n    0\r\n    \r\n      0\r\n      \r\n        1\r\n        \r\n          0\r\n    0\r\n     \r\n      0 \r\n    \r\n        1\r\n    \r\n          0\r\n    0\r\n    \r\n      9\r\n    \r\n        1\r\n    \r\n          0\r\n\r\nWhat am I doing wrong?","title":"How do I take a text file and turn it into a 2D array in Java?","body":"<p>I have a text file, it is as follows:</p>\n<pre><code>1 1 1 0\n0 0 1 0\n0 0 1 0\n0 9 1 0\n</code></pre>\n<p>I want to read this and turn it into an 2D array line by line.\nFirst I used BufferedReader and FileReader, then turned them into one-dimensional arrays. I want to add my one-dimensional arrays to be added to my 2D array. Here is my code:</p>\n<pre><code>BufferedReader br = new BufferedReader (new FileReader (&quot;num.txt&quot;));\nString line;\nchar[][] maze = new char[8][8];\n            \nwhile ((line = br.readLine() ) != null ){\n                \n    char[] row = line.toCharArray();\n    int x = 0;\n    for (int i = 0; i &lt; row.length; i++) {\n        maze[x][i] = row[i];\n                \n        System.out.print(maze[i]);\n        System.out.printf(&quot;%n&quot;);\n        x++;\n    }\n}\n</code></pre>\n<p>I am trying to get a 2D array because I am going to check coordinates later on. So I want my 2D array's rows to be determined by every line of the text file I have.<br />\nBut the output I get is the following:</p>\n<pre><code>1\n  \n  1\n    \n    1\n     \n      0\n0\n\n  0\n  \n    1\n    \n      0\n0\n \n  0 \n\n    1\n\n      0\n0\n\n  9\n\n    1\n\n      0\n</code></pre>\n<p>What am I doing wrong?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":14538351,"reputation":59,"user_id":10500918,"display_name":"Fireye"},"score":1,"creation_date":1550701030,"post_id":54796070,"comment_id":96370187,"body_markdown":"don&#39;t dislike this question pls... I could get banned...","body":"don&#39;t dislike this question pls... I could get banned..."},{"owner":{"account_id":2522926,"reputation":30310,"user_id":2192903,"accept_rate":73,"display_name":"Arnaud Denoyelle"},"score":0,"creation_date":1550701640,"post_id":54796070,"comment_id":96370388,"body_markdown":"You have 2 solutions : 1) convert the String to a char array then switch the chars and rebuild the String. Or 2) concatene last character + middle substring + 1st character.","body":"You have 2 solutions : 1) convert the String to a char array then switch the chars and rebuild the String. Or 2) concatene last character + middle substring + 1st character."},{"owner":{"account_id":3345492,"reputation":4077,"user_id":2810730,"display_name":"Oleksii Zghurskyi"},"score":0,"creation_date":1550703473,"post_id":54796070,"comment_id":96371029,"body_markdown":"@Fireye [String.replace(char oldChar, char newChar)](https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace(char,%20char)) returns a new string resulting from replacing *all occurrences* of `oldChar` in this string with `newChar`. So, when you create `String a` you replace all chars equal to `firstLetter` by char equal to `lastLetter`. For details - look at the answer below.","body":"@Fireye <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace(char,%20char)\" rel=\"nofollow noreferrer\">String.replace(char oldChar, char newChar)</a> returns a new string resulting from replacing <i>all occurrences</i> of <code>oldChar</code> in this string with <code>newChar</code>. So, when you create <code>String a</code> you replace all chars equal to <code>firstLetter</code> by char equal to <code>lastLetter</code>. For details - look at the answer below."}],"answers":[{"tags":[],"owner":{"display_name":"user9643348"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1550701196,"creation_date":1550701196,"answer_id":54796126,"question_id":54796070,"body_markdown":"You replaced the First letter with the last, so now the First and the last are equal. Then you replaced the last with the First, which is equal to the last, so the First and the last are equal.","title":"Switch the first and last letters of a string","body":"<p>You replaced the First letter with the last, so now the First and the last are equal. Then you replaced the last with the First, which is equal to the last, so the First and the last are equal.</p>\n"},{"tags":[],"owner":{"account_id":282308,"reputation":2358,"user_id":579123,"display_name":"ItsPete"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1550701324,"creation_date":1550701324,"answer_id":54796151,"question_id":54796070,"body_markdown":"You replace the first letter with the last in a, so when you look for that letter in z there are no instances to replace. It also would replace any instance of the last letter in a.\r\n\r\nOne method would be to substring String3 &amp; prepend/append the needed character.\r\n\r\n    public static String swap(String String3) {\r\n       //finds first &amp; last letter of string\r\n       String firstLetter =  String3.substring(0, 1);\r\n       String lastLetter = String3.substring(String3.length() - 1);\r\n\r\n       String3 = firstLetter + String3.substring(1);\r\n       String3 = String3.substring(0, String3.length() - 1) + lastLetter;\r\n       return String3;\r\n    }\r\n\r\n    public static void main(String[] args){\r\n       System.out.print(&quot;Enter your swap string: &quot;);\r\n       Scanner scan = new Scanner(System.in);\r\n       String String3 = scan.nextLine();\r\n       System.out.println(swap(String3));\r\n    }","title":"Switch the first and last letters of a string","body":"<p>You replace the first letter with the last in a, so when you look for that letter in z there are no instances to replace. It also would replace any instance of the last letter in a.</p>\n\n<p>One method would be to substring String3 &amp; prepend/append the needed character.</p>\n\n<pre><code>public static String swap(String String3) {\n   //finds first &amp; last letter of string\n   String firstLetter =  String3.substring(0, 1);\n   String lastLetter = String3.substring(String3.length() - 1);\n\n   String3 = firstLetter + String3.substring(1);\n   String3 = String3.substring(0, String3.length() - 1) + lastLetter;\n   return String3;\n}\n\npublic static void main(String[] args){\n   System.out.print(\"Enter your swap string: \");\n   Scanner scan = new Scanner(System.in);\n   String String3 = scan.nextLine();\n   System.out.println(swap(String3));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6615217,"reputation":6120,"user_id":5108737,"display_name":"Ruslan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1550702149,"creation_date":1550701452,"answer_id":54796180,"question_id":54796070,"body_markdown":"After the first replace you have string with `lastLetter` at the first and the last position.\r\n\r\n    String a = String3.replace(firstLetter, lastLetter);    // LASTxxxxLAST\r\n\r\nAfter the second replace you obviosly has `firstLetter` here\r\n\r\n    String z = a.replace(lastLetter, firstLetter );    // FIRSTxxxxFIRST\r\n\r\nTo avoid this try to swap first and second replace and use `replaceAll` with `$` sign and `replaceFirst` for the second replacement\r\n        \r\n    ...\r\n    String z = String3.replaceAll(lastLetter + &quot;$&quot;, firstLetter);\r\n    String a = z.replaceFirst(firstLetter, lastLetter);\r\n    return a;\r\n\r\n    \r\n","title":"Switch the first and last letters of a string","body":"<p>After the first replace you have string with <code>lastLetter</code> at the first and the last position.</p>\n\n<pre><code>String a = String3.replace(firstLetter, lastLetter);    // LASTxxxxLAST\n</code></pre>\n\n<p>After the second replace you obviosly has <code>firstLetter</code> here</p>\n\n<pre><code>String z = a.replace(lastLetter, firstLetter );    // FIRSTxxxxFIRST\n</code></pre>\n\n<p>To avoid this try to swap first and second replace and use <code>replaceAll</code> with <code>$</code> sign and <code>replaceFirst</code> for the second replacement</p>\n\n<pre><code>...\nString z = String3.replaceAll(lastLetter + \"$\", firstLetter);\nString a = z.replaceFirst(firstLetter, lastLetter);\nreturn a;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11653359,"reputation":5339,"user_id":8533940,"display_name":"Lothar"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1550729370,"creation_date":1550701476,"answer_id":54796185,"question_id":54796070,"body_markdown":"`String.replace` replaces all occurences of the first character by the second. That&#39;s not what you want. As an example let&#39;s assume the text `abc`. The first replace will lead to `cbc` and the second will lead to `aba` which is what you&#39;ve seen. An input string `abab` will result to `aaaa` as result.\r\n\r\nYou need to create a new `String` to get the swap you want:\r\n\r\n    char first = text.charAt(0);\r\n    char last = text.charAt(text.length() - 1);\r\n    return last + text.substring(1, text.length() - 2) + last;\r\n\r\nAlternatively you can use Regular Expressions:\r\n\r\n    text.replaceAll(&quot;^(.)(.*)(.)$&quot;, &quot;$3$2$1&quot;);\r\n\r\nI skipped the test if the length of the input text is long enough, so an input text `a` will lead to an error with the first solution. The second solution would still work, because the regex doesn&#39;t match and no replacement will take place.","title":"Switch the first and last letters of a string","body":"<p><code>String.replace</code> replaces all occurences of the first character by the second. That's not what you want. As an example let's assume the text <code>abc</code>. The first replace will lead to <code>cbc</code> and the second will lead to <code>aba</code> which is what you've seen. An input string <code>abab</code> will result to <code>aaaa</code> as result.</p>\n\n<p>You need to create a new <code>String</code> to get the swap you want:</p>\n\n<pre><code>char first = text.charAt(0);\nchar last = text.charAt(text.length() - 1);\nreturn last + text.substring(1, text.length() - 2) + last;\n</code></pre>\n\n<p>Alternatively you can use Regular Expressions:</p>\n\n<pre><code>text.replaceAll(\"^(.)(.*)(.)$\", \"$3$2$1\");\n</code></pre>\n\n<p>I skipped the test if the length of the input text is long enough, so an input text <code>a</code> will lead to an error with the first solution. The second solution would still work, because the regex doesn't match and no replacement will take place.</p>\n"},{"tags":[],"owner":{"account_id":117317,"reputation":11245,"user_id":307297,"accept_rate":62,"display_name":"chris01"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1550701535,"creation_date":1550701535,"answer_id":54796195,"question_id":54796070,"body_markdown":"    String3 = String3.substring(String3.length() - 1) +    // last\r\n              String3.substring(1,String3.length() - 2) + // middle\r\n              String3.substring(0, 1);    // first","title":"Switch the first and last letters of a string","body":"<pre><code>String3 = String3.substring(String3.length() - 1) +    // last\n          String3.substring(1,String3.length() - 2) + // middle\n          String3.substring(0, 1);    // first\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3326330,"reputation":1,"user_id":2796333,"display_name":"sachin1410"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1550701972,"creation_date":1550701543,"answer_id":54796198,"question_id":54796070,"body_markdown":"e.g. Using &quot;abc&quot; as input, \r\nIf you debug your code you will find out the mistake - the string before last replace is &quot;cbc&quot; and you are replacing &quot;c&quot; with &quot;a&quot;....hence the result\r\n\r\n        String firstLetter = String3.substring(0, 1);//a\r\n        String lastLetter = String3.substring(String3.length() - 1);//c\r\n        String a = String3.replace(firstLetter, lastLetter);//cbc\r\n        String z = a.replace(lastLetter, firstLetter);//aba","title":"Switch the first and last letters of a string","body":"<p>e.g. Using \"abc\" as input, \nIf you debug your code you will find out the mistake - the string before last replace is \"cbc\" and you are replacing \"c\" with \"a\"....hence the result</p>\n\n<pre><code>    String firstLetter = String3.substring(0, 1);//a\n    String lastLetter = String3.substring(String3.length() - 1);//c\n    String a = String3.replace(firstLetter, lastLetter);//cbc\n    String z = a.replace(lastLetter, firstLetter);//aba\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3345492,"reputation":4077,"user_id":2810730,"display_name":"Oleksii Zghurskyi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1550703635,"creation_date":1550702433,"answer_id":54796393,"question_id":54796070,"body_markdown":"The problem in your solution are these 2 lines:\r\n```\r\n    String a = str.replace(firstLetter, lastLetter); // 1\r\n    String z = a.replace(lastLetter, firstLetter); // 2\r\n```\r\n[`String.replace(char oldChar, char newChar)`][1] returns a new string resulting from replacing **all occurrences** of `oldChar` in this string with `newChar`.  So, when you create `String a` you replace all chars equal to `firstLetter` by char equal to `lastLetter`.\r\n\r\nLet&#39;s analyze with string &quot;abbbabbb&quot; as an input:\r\n\r\n - after executing line 1, you&#39;ll will get &quot;bbbbbbbb&quot; - all `a` got replaced by `b`\r\n - after executing line 2 there will be no effect, because you&#39;re trying to replace letter by itself (in the example input `b` by `b` - hence no effect).\r\n\r\nOne working solution would be the following:\r\n```\r\nimport java.util.Scanner;\r\n\r\nclass Answer {\r\n\r\n  public static void main(String[] args){\r\n    System.out.print(&quot;Enter your swap string: &quot;);\r\n    try (Scanner scan = new Scanner(System.in)) {\r\n      String str = scan.nextLine();\r\n      String swapped = new String(swap(str, 0, str.length() - 1));\r\n      System.out.println(swapped);\r\n    }\r\n  }\r\n  \r\n  private static char[] swap(String str, int i, int j) { \r\n    char[] chars = str.toCharArray(); \r\n    char tmp = chars[i]; \r\n    chars[i] = chars[j]; \r\n    chars[j] = tmp; \r\n    return chars; \r\n  }\r\n}\r\n```\r\nThe benefit of this approach - it can be used to swap any 2 letters in the `String`.\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace(char,%20char)","title":"Switch the first and last letters of a string","body":"<p>The problem in your solution are these 2 lines:</p>\n\n<pre><code>    String a = str.replace(firstLetter, lastLetter); // 1\n    String z = a.replace(lastLetter, firstLetter); // 2\n</code></pre>\n\n<p><a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace(char,%20char)\" rel=\"nofollow noreferrer\"><code>String.replace(char oldChar, char newChar)</code></a> returns a new string resulting from replacing <strong>all occurrences</strong> of <code>oldChar</code> in this string with <code>newChar</code>.  So, when you create <code>String a</code> you replace all chars equal to <code>firstLetter</code> by char equal to <code>lastLetter</code>.</p>\n\n<p>Let's analyze with string \"abbbabbb\" as an input:</p>\n\n<ul>\n<li>after executing line 1, you'll will get \"bbbbbbbb\" - all <code>a</code> got replaced by <code>b</code></li>\n<li>after executing line 2 there will be no effect, because you're trying to replace letter by itself (in the example input <code>b</code> by <code>b</code> - hence no effect).</li>\n</ul>\n\n<p>One working solution would be the following:</p>\n\n<pre><code>import java.util.Scanner;\n\nclass Answer {\n\n  public static void main(String[] args){\n    System.out.print(\"Enter your swap string: \");\n    try (Scanner scan = new Scanner(System.in)) {\n      String str = scan.nextLine();\n      String swapped = new String(swap(str, 0, str.length() - 1));\n      System.out.println(swapped);\n    }\n  }\n\n  private static char[] swap(String str, int i, int j) { \n    char[] chars = str.toCharArray(); \n    char tmp = chars[i]; \n    chars[i] = chars[j]; \n    chars[j] = tmp; \n    return chars; \n  }\n}\n</code></pre>\n\n<p>The benefit of this approach - it can be used to swap any 2 letters in the <code>String</code>.</p>\n"},{"tags":[],"owner":{"account_id":6615217,"reputation":6120,"user_id":5108737,"display_name":"Ruslan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1550703081,"creation_date":1550703081,"answer_id":54796518,"question_id":54796070,"body_markdown":"There is also quite concise solution(but not such fast) with stream api. Convert input string to list of character, then use [Collections.swap](https://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#swap(java.util.List,%20int,%20int)) method and back to string again:\r\n\r\n    List&lt;Character&gt; list = String3.chars().mapToObj(c -&gt; (char)c).collect(Collectors.toList());\r\n    Collections.swap(list, 0, list.size() - 1);\r\n    String result = list.stream().map(Object::toString).reduce((s1, s2) -&gt; s1 + s2).orElse(&quot;&quot;);","title":"Switch the first and last letters of a string","body":"<p>There is also quite concise solution(but not such fast) with stream api. Convert input string to list of character, then use <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#swap(java.util.List,%20int,%20int)\" rel=\"nofollow noreferrer\">Collections.swap</a> method and back to string again:</p>\n\n<pre><code>List&lt;Character&gt; list = String3.chars().mapToObj(c -&gt; (char)c).collect(Collectors.toList());\nCollections.swap(list, 0, list.size() - 1);\nString result = list.stream().map(Object::toString).reduce((s1, s2) -&gt; s1 + s2).orElse(\"\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5784158,"reputation":312,"user_id":4563960,"display_name":"Lucas Sousa"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1550766632,"creation_date":1550704281,"answer_id":54796724,"question_id":54796070,"body_markdown":"Let&#39;s see the cause of the problem and take a look to my approach that solves it.\r\n\r\n# The Problem\r\n\r\nBelow I described a little debug in the code of your `swap` method in the comments:\r\n\r\n    //considering String3 is equals to something like &quot;a---z&quot;\r\n    public static String swap(String String3) {\r\n        System.out.println(String3);\r\n        \r\n        //this stores &quot;a&quot; value\r\n        String firstLetter = String3.substring(0, 1);\r\n        System.out.println(&quot;first: &quot; + firstLetter);\r\n\r\n        //this stores &quot;z&quot; value\r\n        String lastLetter = String3.substring(String3.length() - 1);\r\n        System.out.println(&quot;last: &quot; + lastLetter);\r\n\r\n        /*\r\n        this replaces in the String3 source the character which is\r\n        equals to firstletter (= &quot;a&quot; value) for lastLetter (= &quot;z&quot; value)\r\n        \r\n        the String3 field, which is &quot;a-z&quot; is turned to &quot;z-z&quot;\r\n        \r\n        Then, the final value stored is &quot;z-z&quot; \r\n         */\r\n        String a = String3.replace(firstLetter, lastLetter);\r\n        System.out.println(&quot;a: &quot; + a);\r\n\r\n        /*\r\n        this replaces in the String3 source the character which is\r\n        equals to lastLetter (= &quot;z&quot; value) for firstLetter (= &quot;a&quot; value)\r\n        \r\n        the a field, which is &quot;z-z&quot; is turned to &quot;a-a&quot;\r\n       \r\n        Then, the final value stored is &quot;a-a&quot; \r\n         */\r\n        String z = a.replace(lastLetter, firstLetter);\r\n        System.out.println(&quot;z: &quot; + z);\r\n        \r\n        /*\r\n        by returning the field z you only will get the same character \r\n        at start and end.\r\n         */\r\n        return z;\r\n    }\r\n\r\n# Solving the problem\r\n\r\nI&#39;m suggesting solving this using a `one-liner` method that replaces the characters using `substring()` method. Take a look:\r\n\r\n    /*\r\n     * This avoid creating new fields and uses only the passed parameter.\r\n     * \r\n     * - First we set the FIRST character of the s value to the LAST\r\n     * character of the parameter;\r\n     * \r\n     * - Second we concatenate this with a substring from s, which goes\r\n     * from second character to the &quot;semi last&quot; (last previous);\r\n     * \r\n     * - Then we can add the FIRST character at the END.\r\n     */\r\n    public static String swapFirstAndLast(String s) {\r\n        return s.charAt(s.length() - 1) + s.substring(1, s.length() - 1) + s.charAt(0);\r\n    }","title":"Switch the first and last letters of a string","body":"<p>Let's see the cause of the problem and take a look to my approach that solves it.</p>\n\n<h1>The Problem</h1>\n\n<p>Below I described a little debug in the code of your <code>swap</code> method in the comments:</p>\n\n<pre><code>//considering String3 is equals to something like \"a---z\"\npublic static String swap(String String3) {\n    System.out.println(String3);\n\n    //this stores \"a\" value\n    String firstLetter = String3.substring(0, 1);\n    System.out.println(\"first: \" + firstLetter);\n\n    //this stores \"z\" value\n    String lastLetter = String3.substring(String3.length() - 1);\n    System.out.println(\"last: \" + lastLetter);\n\n    /*\n    this replaces in the String3 source the character which is\n    equals to firstletter (= \"a\" value) for lastLetter (= \"z\" value)\n\n    the String3 field, which is \"a-z\" is turned to \"z-z\"\n\n    Then, the final value stored is \"z-z\" \n     */\n    String a = String3.replace(firstLetter, lastLetter);\n    System.out.println(\"a: \" + a);\n\n    /*\n    this replaces in the String3 source the character which is\n    equals to lastLetter (= \"z\" value) for firstLetter (= \"a\" value)\n\n    the a field, which is \"z-z\" is turned to \"a-a\"\n\n    Then, the final value stored is \"a-a\" \n     */\n    String z = a.replace(lastLetter, firstLetter);\n    System.out.println(\"z: \" + z);\n\n    /*\n    by returning the field z you only will get the same character \n    at start and end.\n     */\n    return z;\n}\n</code></pre>\n\n<h1>Solving the problem</h1>\n\n<p>I'm suggesting solving this using a <code>one-liner</code> method that replaces the characters using <code>substring()</code> method. Take a look:</p>\n\n<pre><code>/*\n * This avoid creating new fields and uses only the passed parameter.\n * \n * - First we set the FIRST character of the s value to the LAST\n * character of the parameter;\n * \n * - Second we concatenate this with a substring from s, which goes\n * from second character to the \"semi last\" (last previous);\n * \n * - Then we can add the FIRST character at the END.\n */\npublic static String swapFirstAndLast(String s) {\n    return s.charAt(s.length() - 1) + s.substring(1, s.length() - 1) + s.charAt(0);\n}\n</code></pre>\n"}],"owner":{"account_id":14538351,"reputation":59,"user_id":10500918,"display_name":"Fireye"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2379,"favorite_count":0,"down_vote_count":3,"up_vote_count":3,"accepted_answer_id":54796724,"answer_count":9,"score":0,"last_activity_date":1645329432,"creation_date":1550700936,"question_id":54796070,"body_markdown":"I am making a program that will switch the first and last letters of a string, but when I run it, it just replaces the last letter with the first and that&#39;s it.\r\n\r\n    public static String swap(String String3) {\r\n        //finds first &amp; last letter of string\r\n\t    String firstLetter =  String3.substring(0, 1);\r\n\t    String lastLetter = String3.substring(String3.length() - 1);\r\n\t    String a = String3.replace(firstLetter, lastLetter); \r\n\t    String z = a.replace(lastLetter, firstLetter );\r\n\t    return z;\r\n    public static void main(String[] args){\r\n        System.out.print(&quot;Enter your swap string: &quot;);\r\n\t\tScanner scan = new Scanner(System.in);\r\n\t\tString String3 = scan.nextLine();\r\n\t\tSystem.out.println(swap(String3));\r\n        }\r\nCan anyone tell me what i&#39;m doing wrong?","title":"Switch the first and last letters of a string","body":"<p>I am making a program that will switch the first and last letters of a string, but when I run it, it just replaces the last letter with the first and that's it.</p>\n\n<pre><code>public static String swap(String String3) {\n    //finds first &amp; last letter of string\n    String firstLetter =  String3.substring(0, 1);\n    String lastLetter = String3.substring(String3.length() - 1);\n    String a = String3.replace(firstLetter, lastLetter); \n    String z = a.replace(lastLetter, firstLetter );\n    return z;\npublic static void main(String[] args){\n    System.out.print(\"Enter your swap string: \");\n    Scanner scan = new Scanner(System.in);\n    String String3 = scan.nextLine();\n    System.out.println(swap(String3));\n    }\n</code></pre>\n\n<p>Can anyone tell me what i'm doing wrong?</p>\n"},{"tags":["java","file","directory","io"],"comments":[{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":2,"creation_date":1645326134,"post_id":71191010,"comment_id":125840327,"body_markdown":"I would use `File#exists` to ensure that the value input by the user a valid directory, beyond that, it seems to work for me","body":"I would use <code>File#exists</code> to ensure that the value input by the user a valid directory, beyond that, it seems to work for me"},{"owner":{"account_id":23140500,"reputation":3,"user_id":17244036,"display_name":"Sam"},"score":0,"creation_date":1645326957,"post_id":71191010,"comment_id":125840420,"body_markdown":"what are you entering when you get prompted?","body":"what are you entering when you get prompted?"},{"owner":{"account_id":23140500,"reputation":3,"user_id":17244036,"display_name":"Sam"},"score":0,"creation_date":1645327261,"post_id":71191010,"comment_id":125840446,"body_markdown":"I&#39;m using a Mac","body":"I&#39;m using a Mac"},{"owner":{"account_id":23140500,"reputation":3,"user_id":17244036,"display_name":"Sam"},"score":0,"creation_date":1645327796,"post_id":71191010,"comment_id":125840495,"body_markdown":"If I enter the text file that is in the folder where my java program is at, I do get an output. How can I include something different?\n\nEnter a directory or a file: \nrandomText.txt\n33 bytes","body":"If I enter the text file that is in the folder where my java program is at, I do get an output. How can I include something different?  Enter a directory or a file:  randomText.txt 33 bytes"},{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1645327958,"post_id":71191010,"comment_id":125840515,"body_markdown":"*&quot;I&#39;m using a Mac&quot;*, there&#39;s no such thing as `C:\\` on Macs","body":"<i>&quot;I&#39;m using a Mac&quot;</i>, there&#39;s no such thing as `C:` on Macs"}],"answers":[{"tags":[],"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1645328265,"creation_date":1645328265,"answer_id":71191189,"question_id":71191010,"body_markdown":"I would use `File#exists` to verify that the user input is a valid path, you could also add `File#isDirectory` check, but since `getSize` is doing this, it&#39;s probably not required.\r\n\r\n&gt; subsequently typing C:\\Users:\r\n&gt; I&#39;m using a Mac\r\n\r\nMac&#39;s don&#39;t have a concept of &quot;drives&quot; like windows, they have &quot;volumes&quot; and as such it should probably be `/Users`, but you could run into other issues, since you won&#39;t have read access to other users.\r\n\r\nThe following will print the path of your &quot;home&quot; directory and also uses `File#exist` to verify the user input\r\n\r\n    import java.io.File;\r\n    import java.util.Scanner;\r\n\r\n    public class Main {\r\n\r\n        public static void main(String[] args) {\r\n            //String s = &quot;C:\\\\Users\\\\\r\n            //File filess = new File(s);\r\n\r\n            String directory = System.getProperty(&quot;user.home&quot;);\r\n            System.out.println(&quot;Your home directory is [&quot; + directory + &quot;]&quot;);\r\n\r\n            System.out.println(&quot;Enter a directory or a file: &quot;);\r\n            Scanner input = new Scanner(System.in);\r\n            directory = input.nextLine();\r\n\r\n            File parent = new File(directory);\r\n            if (parent.exists()) {\r\n                Main obj = new Main();\r\n                System.out.println(obj.getSize(new File(directory)) + &quot; bytes&quot;);\r\n            } else {\r\n                System.out.println(directory + &quot; is not a valid directory&quot;);\r\n            }\r\n        }\r\n\r\n        public static long getSize(File file) {\r\n            long size = 0;\r\n\r\n            System.out.println(&quot;Scanning &quot; + file.getName());\r\n\r\n            if (file.isDirectory()) {\r\n                File[] files = file.listFiles();\r\n                for (int i = 0; files != null &amp;&amp; i &lt; files.length; i++) {\r\n                    size += getSize(files[i]);\r\n                }\r\n            } else {\r\n                size += file.length();\r\n            }\r\n\r\n            return size;\r\n\r\n        }\r\n\r\n    }\r\n\r\n","title":"Is there a way to have a directory run through the main program?","body":"<p>I would use <code>File#exists</code> to verify that the user input is a valid path, you could also add <code>File#isDirectory</code> check, but since <code>getSize</code> is doing this, it's probably not required.</p>\n<blockquote>\n<p>subsequently typing C:\\Users:\nI'm using a Mac</p>\n</blockquote>\n<p>Mac's don't have a concept of &quot;drives&quot; like windows, they have &quot;volumes&quot; and as such it should probably be <code>/Users</code>, but you could run into other issues, since you won't have read access to other users.</p>\n<p>The following will print the path of your &quot;home&quot; directory and also uses <code>File#exist</code> to verify the user input</p>\n<pre><code>import java.io.File;\nimport java.util.Scanner;\n\npublic class Main {\n\n    public static void main(String[] args) {\n        //String s = &quot;C:\\\\Users\\\\\n        //File filess = new File(s);\n\n        String directory = System.getProperty(&quot;user.home&quot;);\n        System.out.println(&quot;Your home directory is [&quot; + directory + &quot;]&quot;);\n\n        System.out.println(&quot;Enter a directory or a file: &quot;);\n        Scanner input = new Scanner(System.in);\n        directory = input.nextLine();\n\n        File parent = new File(directory);\n        if (parent.exists()) {\n            Main obj = new Main();\n            System.out.println(obj.getSize(new File(directory)) + &quot; bytes&quot;);\n        } else {\n            System.out.println(directory + &quot; is not a valid directory&quot;);\n        }\n    }\n\n    public static long getSize(File file) {\n        long size = 0;\n\n        System.out.println(&quot;Scanning &quot; + file.getName());\n\n        if (file.isDirectory()) {\n            File[] files = file.listFiles();\n            for (int i = 0; files != null &amp;&amp; i &lt; files.length; i++) {\n                size += getSize(files[i]);\n            }\n        } else {\n            size += file.length();\n        }\n\n        return size;\n\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":23140500,"reputation":3,"user_id":17244036,"display_name":"Sam"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":71191189,"answer_count":1,"score":-1,"last_activity_date":1645328265,"creation_date":1645325432,"question_id":71191010,"body_markdown":"I am having difficulty passing a directory to the code below. When I am prompted to enter a directory, I do as shown below: C:\\Users\\. I get a 0 byte output, which is not accurate. Meaning that the program is not registering the typed directory.\r\n\r\n\r\n\r\n\r\ncode:\r\n\r\n\r\n    //import jdk.internal.icu.text.UnicodeSet;\r\n    \r\n    import java.io.File;\r\n    import java.util.Scanner;\r\n    import java.util.Queue;\r\n    import java.util.LinkedList;\r\n    \r\n    \r\n    \r\n    public class Hwk2018\r\n    {\r\n        public static void main(String[] args)\r\n        {\r\n    \r\n            //String s = &quot;C:\\\\Users\\\\\r\n    \r\n            //File filess = new File(s);\r\n    \r\n            System.out.println(&quot;Enter a directory or a file: &quot;);\r\n            Scanner input = new Scanner(System.in);\r\n            String directory = input.nextLine();\r\n    \r\n            Hwk2018 obj = new Hwk2018();\r\n    \r\n            System.out.println(obj.getSize(new File(directory)) + &quot; bytes&quot;);\r\n        }\r\n    \r\n    \r\n            int i = 0;\r\n            Queue&lt;File&gt; que = new LinkedList&lt;&gt;();\r\n    \r\n            public long getSSize(File directory)\r\n            {\r\n                long size = 0;\r\n                que.add(directory);\r\n    \r\n    \r\n                while(!que.isEmpty())\r\n                {\r\n                    File t = que.poll();\r\n                    if(!t.isDirectory())\r\n                    {\r\n                        size += t.length();\r\n                    }\r\n                    else\r\n                    {\r\n                        //for(int i = 0; )\r\n    \r\n                        que.add(directory);\r\n    \r\n                    }\r\n                }\r\n                return size;\r\n    \r\n    \r\n            }\r\n    \r\n            public static long getSize(File file)\r\n            {\r\n                long size = 0;\r\n    \r\n                if (file.isDirectory()) {\r\n                    File[] files = file.listFiles();\r\n                    for (int i = 0; files != null &amp;&amp; i &lt; files.length; i++) {\r\n                        size += getSize(files[i]);\r\n                    }\r\n                } else {\r\n                    size += file.length();\r\n                }\r\n    \r\n                return size;\r\n    \r\n            }\r\n    \r\n    }\r\n\r\n\r\n\r\noutput when running &#39;  MBP src % java Hwk2018 &#39; on the terminal and subsequently typing C:\\Users:\r\n\r\n\r\n    0 bytes\r\n\r\n\r\nExpected Output:\r\n\r\n    87 bytes (or some numerical value other than 0)\r\n\r\n\r\n","title":"Is there a way to have a directory run through the main program?","body":"<p>I am having difficulty passing a directory to the code below. When I am prompted to enter a directory, I do as shown below: C:\\Users. I get a 0 byte output, which is not accurate. Meaning that the program is not registering the typed directory.</p>\n<p>code:</p>\n<pre><code>//import jdk.internal.icu.text.UnicodeSet;\n\nimport java.io.File;\nimport java.util.Scanner;\nimport java.util.Queue;\nimport java.util.LinkedList;\n\n\n\npublic class Hwk2018\n{\n    public static void main(String[] args)\n    {\n\n        //String s = &quot;C:\\\\Users\\\\\n\n        //File filess = new File(s);\n\n        System.out.println(&quot;Enter a directory or a file: &quot;);\n        Scanner input = new Scanner(System.in);\n        String directory = input.nextLine();\n\n        Hwk2018 obj = new Hwk2018();\n\n        System.out.println(obj.getSize(new File(directory)) + &quot; bytes&quot;);\n    }\n\n\n        int i = 0;\n        Queue&lt;File&gt; que = new LinkedList&lt;&gt;();\n\n        public long getSSize(File directory)\n        {\n            long size = 0;\n            que.add(directory);\n\n\n            while(!que.isEmpty())\n            {\n                File t = que.poll();\n                if(!t.isDirectory())\n                {\n                    size += t.length();\n                }\n                else\n                {\n                    //for(int i = 0; )\n\n                    que.add(directory);\n\n                }\n            }\n            return size;\n\n\n        }\n\n        public static long getSize(File file)\n        {\n            long size = 0;\n\n            if (file.isDirectory()) {\n                File[] files = file.listFiles();\n                for (int i = 0; files != null &amp;&amp; i &lt; files.length; i++) {\n                    size += getSize(files[i]);\n                }\n            } else {\n                size += file.length();\n            }\n\n            return size;\n\n        }\n\n}\n</code></pre>\n<p>output when running '  MBP src % java Hwk2018 ' on the terminal and subsequently typing C:\\Users:</p>\n<pre><code>0 bytes\n</code></pre>\n<p>Expected Output:</p>\n<pre><code>87 bytes (or some numerical value other than 0)\n</code></pre>\n"},{"tags":["java","algorithm","time-complexity"],"comments":[{"owner":{"account_id":5018541,"reputation":12092,"user_id":4032703,"accept_rate":100,"display_name":"EJoshuaS - Stand with Ukraine"},"score":0,"creation_date":1580165752,"post_id":59939811,"comment_id":106001317,"body_markdown":"*I&#39;m guessing this is because of the nested for loops* Why guess? Why not do performance profiling to figure that out for sure?","body":"<i>I&#39;m guessing this is because of the nested for loops</i> Why guess? Why not do performance profiling to figure that out for sure?"}],"answers":[{"tags":[],"owner":{"account_id":14280875,"reputation":683,"user_id":10436569,"display_name":"Suryakant Bharti"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1580164361,"creation_date":1580164361,"answer_id":59939838,"question_id":59939811,"body_markdown":"Your solution is O(N^3). Hence, getting Time Limit Exceed.\r\n\r\n&gt; The question can be solved more effiiently as shown below:\r\n\r\n    public List&lt;List&lt;Integer&gt;&gt; threeSum(int[] num) {\r\n        Arrays.sort(num);\r\n        List&lt;List&lt;Integer&gt;&gt; res = new LinkedList&lt;&gt;(); \r\n        for (int i = 0; i &lt; num.length-2; i++) {\r\n            if (i == 0 || (i &gt; 0 &amp;&amp; num[i] != num[i-1])) {\r\n                int lo = i+1, hi = num.length-1, sum = 0 - num[i];\r\n                while (lo &lt; hi) {\r\n                    if (num[lo] + num[hi] == sum) {\r\n                        res.add(Arrays.asList(num[i], num[lo], num[hi]));\r\n                        while (lo &lt; hi &amp;&amp; num[lo] == num[lo+1]) lo++;\r\n                        while (lo &lt; hi &amp;&amp; num[hi] == num[hi-1]) hi--;\r\n                        lo++; hi--;\r\n                    } else if (num[lo] + num[hi] &lt; sum) lo++;\r\n                    else hi--;\r\n               }\r\n            }\r\n        }\r\n        return res;\r\n    }","title":"LeetCode 3Sum Time Limit Exceeded","body":"<p>Your solution is O(N^3). Hence, getting Time Limit Exceed.</p>\n\n<blockquote>\n  <p>The question can be solved more effiiently as shown below:</p>\n</blockquote>\n\n<pre><code>public List&lt;List&lt;Integer&gt;&gt; threeSum(int[] num) {\n    Arrays.sort(num);\n    List&lt;List&lt;Integer&gt;&gt; res = new LinkedList&lt;&gt;(); \n    for (int i = 0; i &lt; num.length-2; i++) {\n        if (i == 0 || (i &gt; 0 &amp;&amp; num[i] != num[i-1])) {\n            int lo = i+1, hi = num.length-1, sum = 0 - num[i];\n            while (lo &lt; hi) {\n                if (num[lo] + num[hi] == sum) {\n                    res.add(Arrays.asList(num[i], num[lo], num[hi]));\n                    while (lo &lt; hi &amp;&amp; num[lo] == num[lo+1]) lo++;\n                    while (lo &lt; hi &amp;&amp; num[hi] == num[hi-1]) hi--;\n                    lo++; hi--;\n                } else if (num[lo] + num[hi] &lt; sum) lo++;\n                else hi--;\n           }\n        }\n    }\n    return res;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4783785,"reputation":1,"user_id":3864866,"display_name":"varun.dosapati"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645327118,"creation_date":1645325900,"answer_id":71191039,"question_id":59939811,"body_markdown":"Below is the approach I followed and able to submit to leetcode\r\n\r\n    public List&lt;List&lt;Integer&gt;&gt; threeSum(int[] nums){   \r\n      Arrays.sort(nums);\r\n      List&lt;List&lt;Integer&gt;&gt; result = new ArrayList&lt;List&lt;Integer&gt;&gt;();\r\n     \r\n      for(int i = 0; i &lt; nums.length - 1; i++) {  \r\n        if(i == 0 || (i &gt; 0  &amp;&amp; nums[i] != nums[i-1])) { \r\n          int left = i+1, right = nums.length -1 ;\r\n           while(left &lt; right) {  \r\n            int sum = nums[i] + nums[left] + nums[right];\r\n             if(sum  &gt; 0 ){ \r\n              right -=1;\r\n             } else if(sum &lt; 0) {  \r\n              left +=1; \r\n             } else { \r\n              result.add(Arrays.asList(nums[i], nums[left], nums[right]));\r\n              left += 1;\r\n              while(left &lt; right  &amp;&amp; nums[left] == nums[left -1]) {  \r\n              i +=1; \r\n              }\r\n             }\r\n          } \r\n       }  \r\n    }\r\n    return result;\r\n    }\r\n\r\n\r\n","title":"LeetCode 3Sum Time Limit Exceeded","body":"<p>Below is the approach I followed and able to submit to leetcode</p>\n<pre><code>public List&lt;List&lt;Integer&gt;&gt; threeSum(int[] nums){   \n  Arrays.sort(nums);\n  List&lt;List&lt;Integer&gt;&gt; result = new ArrayList&lt;List&lt;Integer&gt;&gt;();\n \n  for(int i = 0; i &lt; nums.length - 1; i++) {  \n    if(i == 0 || (i &gt; 0  &amp;&amp; nums[i] != nums[i-1])) { \n      int left = i+1, right = nums.length -1 ;\n       while(left &lt; right) {  \n        int sum = nums[i] + nums[left] + nums[right];\n         if(sum  &gt; 0 ){ \n          right -=1;\n         } else if(sum &lt; 0) {  \n          left +=1; \n         } else { \n          result.add(Arrays.asList(nums[i], nums[left], nums[right]));\n          left += 1;\n          while(left &lt; right  &amp;&amp; nums[left] == nums[left -1]) {  \n          i +=1; \n          }\n         }\n      } \n   }  \n}\nreturn result;\n}\n</code></pre>\n"}],"owner":{"account_id":15603058,"reputation":23,"user_id":11256628,"display_name":"Noah Mewes"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":459,"favorite_count":0,"down_vote_count":4,"up_vote_count":1,"answer_count":2,"score":-3,"last_activity_date":1645327118,"creation_date":1580164124,"question_id":59939811,"body_markdown":"So I am trying to complete Leetcode&#39;s 3Sum problem. My solution gets the correct answer, however with longer testcases I get &quot;Time Limit Exceeded&quot;. I&#39;m guessing this is because of the nested for loops I am using but am not sure how to proceed from here.\r\n\r\n    class Solution {\r\n    public List&lt;List&lt;Integer&gt;&gt; threeSum(int[] nums) {\r\n        int x = 0;\r\n        int y = 0;\r\n        int z = 0;\r\n        Arrays.sort(nums);\r\n        List&lt;List&lt;Integer&gt;&gt; res = new ArrayList&lt;&gt;();\r\n        \r\n    \r\n        Map&lt;Integer,Integer&gt; map = new HashMap();\r\n        \r\n        for (int i = 0; i &lt; nums.length; i++){\r\n            map.put(i, nums[i]);\r\n        }\r\n        \r\n        for (int j = 0; j &lt; nums.length - 2; j++){\r\n            x = map.get(j);\r\n            for(int k = j+1;k &lt; nums.length - 1; k++){\r\n                y = map.get(k);\r\n                for(int l = k+1; l &lt;nums.length; l++){\r\n                    z = map.get(l);\r\n                    if((x + y + z) == 0){\r\n                        List&lt;Integer&gt; triplet = new ArrayList&lt;Integer&gt;();\r\n                        triplet.add(x);\r\n                        triplet.add(y);\r\n                        triplet.add(z);\r\n                        System.out.println(triplet);\r\n                        if (!(res.contains(triplet))){\r\n                            res.add(triplet);\r\n                        }\r\n                        \r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return res;\r\n    }\r\nAny tips on how to optimize this solution?","title":"LeetCode 3Sum Time Limit Exceeded","body":"<p>So I am trying to complete Leetcode's 3Sum problem. My solution gets the correct answer, however with longer testcases I get \"Time Limit Exceeded\". I'm guessing this is because of the nested for loops I am using but am not sure how to proceed from here.</p>\n\n<pre><code>class Solution {\npublic List&lt;List&lt;Integer&gt;&gt; threeSum(int[] nums) {\n    int x = 0;\n    int y = 0;\n    int z = 0;\n    Arrays.sort(nums);\n    List&lt;List&lt;Integer&gt;&gt; res = new ArrayList&lt;&gt;();\n\n\n    Map&lt;Integer,Integer&gt; map = new HashMap();\n\n    for (int i = 0; i &lt; nums.length; i++){\n        map.put(i, nums[i]);\n    }\n\n    for (int j = 0; j &lt; nums.length - 2; j++){\n        x = map.get(j);\n        for(int k = j+1;k &lt; nums.length - 1; k++){\n            y = map.get(k);\n            for(int l = k+1; l &lt;nums.length; l++){\n                z = map.get(l);\n                if((x + y + z) == 0){\n                    List&lt;Integer&gt; triplet = new ArrayList&lt;Integer&gt;();\n                    triplet.add(x);\n                    triplet.add(y);\n                    triplet.add(z);\n                    System.out.println(triplet);\n                    if (!(res.contains(triplet))){\n                        res.add(triplet);\n                    }\n\n                }\n            }\n        }\n    }\n    return res;\n}\n</code></pre>\n\n<p>Any tips on how to optimize this solution?</p>\n"},{"tags":["java","spring","testing","controller","jersey"],"answers":[{"tags":[],"owner":{"account_id":7178839,"reputation":166,"user_id":5483654,"display_name":"Ivan Costa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645326499,"creation_date":1645326499,"answer_id":71191079,"question_id":71189488,"body_markdown":"What is the expected body (json entity)? Try with at least one... \r\n\r\n    .post(Entity.json(&quot;{&quot;name&quot;:&quot;value&quot;}&quot;));\r\n\r\nIt seems that you are sending (post) an empty body.","title":"NullPointerException on JerseyTest.target","body":"<p>What is the expected body (json entity)? Try with at least one...</p>\n<pre><code>.post(Entity.json(&quot;{&quot;name&quot;:&quot;value&quot;}&quot;));\n</code></pre>\n<p>It seems that you are sending (post) an empty body.</p>\n"}],"owner":{"account_id":24083557,"reputation":1,"user_id":18057898,"display_name":"Vlasov Pavel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":103,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1645326499,"creation_date":1645307236,"question_id":71189488,"body_markdown":"I&#39;m trying to test controller with Jersey and get NullPointerExcetion on target().\r\n\r\nHere is my pom.xml\r\n\r\n    &lt;project xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n        &lt;properties&gt;\r\n            &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n            &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n            &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n            &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n    \r\n            &lt;slf4j.version&gt;1.7.26&lt;/slf4j.version&gt;\r\n            &lt;persistence-api.version&gt;1.0.2&lt;/persistence-api.version&gt;\r\n            &lt;junit-jupiter.version&gt;5.6.2&lt;/junit-jupiter.version&gt;\r\n            &lt;lombok.version&gt;1.18.22&lt;/lombok.version&gt;\r\n            &lt;mapstruct.version&gt;1.4.2.Final&lt;/mapstruct.version&gt;\r\n            &lt;ojdbc6.version&gt;11.2.0.4&lt;/ojdbc6.version&gt;\r\n            &lt;spring.version&gt;4.2.4.RELEASE&lt;/spring.version&gt;\r\n            &lt;jersey.version&gt;2.26&lt;/jersey.version&gt;\r\n        &lt;/properties&gt;\r\n    \r\n        &lt;dependencies&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\r\n                &lt;version&gt;3.0.1&lt;/version&gt;\r\n                &lt;scope&gt;provided&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;javax.persistence&lt;/groupId&gt;\r\n                &lt;artifactId&gt;persistence-api&lt;/artifactId&gt;\r\n                &lt;version&gt;${persistence-api.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;javax.ws.rs&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javax.ws.rs-api&lt;/artifactId&gt;\r\n                &lt;version&gt;2.0.1&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n                &lt;version&gt;${lombok.version}&lt;/version&gt;\r\n                &lt;scope&gt;provided&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\r\n                &lt;artifactId&gt;mapstruct&lt;/artifactId&gt;\r\n                &lt;version&gt;${mapstruct.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;!-- JUnit 5 --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n                &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\r\n                &lt;version&gt;${junit-jupiter.version}&lt;/version&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n                &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\r\n                &lt;version&gt;${junit-jupiter.version}&lt;/version&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\r\n                &lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\r\n                &lt;version&gt;${junit-jupiter.version}&lt;/version&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.junit.platform&lt;/groupId&gt;\r\n                &lt;artifactId&gt;junit-platform-launcher&lt;/artifactId&gt;\r\n                &lt;version&gt;1.6.2&lt;/version&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;!-- Spring Test --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-test&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring.version}&lt;/version&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;!-- Mockito --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.mockito&lt;/groupId&gt;\r\n                &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\r\n                &lt;version&gt;3.4.6&lt;/version&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;!-- Hamcrest assertions --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.hamcrest&lt;/groupId&gt;\r\n                &lt;artifactId&gt;hamcrest-core&lt;/artifactId&gt;\r\n                &lt;version&gt;2.2&lt;/version&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;!-- AssertJ assertions --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.assertj&lt;/groupId&gt;\r\n                &lt;artifactId&gt;assertj-core&lt;/artifactId&gt;\r\n                &lt;version&gt;3.16.1&lt;/version&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.jayway.jsonpath&lt;/groupId&gt;\r\n                &lt;artifactId&gt;json-path&lt;/artifactId&gt;\r\n                &lt;version&gt;2.4.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n                &lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n                &lt;version&gt;1.4.197&lt;/version&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.oracle&lt;/groupId&gt;\r\n                &lt;artifactId&gt;ojdbc6&lt;/artifactId&gt;\r\n                &lt;version&gt;${ojdbc6.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.glassfish.jersey.test-framework&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jersey-test-framework-core&lt;/artifactId&gt;\r\n                &lt;version&gt;${jersey.version}&lt;/version&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.glassfish.jersey.test-framework.providers&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jersey-test-framework-provider-inmemory&lt;/artifactId&gt;\r\n                &lt;version&gt;${jersey.version}&lt;/version&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n        &lt;/dependencies&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\nand test class\r\n\r\n    import org.glassfish.jersey.server.ResourceConfig;\r\n    import org.glassfish.jersey.test.JerseyTest;\r\n    import org.junit.jupiter.api.*;\r\n    \r\n    import javax.ws.rs.client.Entity;\r\n    import javax.ws.rs.core.*;\r\n    \r\n    public class EndpointTest extends JerseyTest {\r\n    \r\n        @Override\r\n        protected Application configure() {\r\n            return new ResourceConfig(Endpoint.class);\r\n        }\r\n    \r\n        @Test\r\n        void whenTestThenOK() {\r\n            Response response = target(&quot;/endpoint&quot;)\r\n                    .request()\r\n                    .post(Entity.json(&quot;{}&quot;));\r\n    \r\n            Assertions.assertEquals(Response.Status.OK.getStatusCode(), response.getStatus());\r\n    \r\n        }\r\n    }\r\n\r\nOn javax.ws.rs-api version 2.0.1, there was a NoClassDefFoundError error on javax/ws/rs/client/RxInvokerProvider. I changed it to 2.1 and now I get NPE.\r\n\r\nAlso, I tried to add other dependencies, change versions, but even such a simple test cannot be run\r\n\r\nPlease help me.","title":"NullPointerException on JerseyTest.target","body":"<p>I'm trying to test controller with Jersey and get NullPointerExcetion on target().</p>\n<p>Here is my pom.xml</p>\n<pre><code>&lt;project xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n        &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n\n        &lt;slf4j.version&gt;1.7.26&lt;/slf4j.version&gt;\n        &lt;persistence-api.version&gt;1.0.2&lt;/persistence-api.version&gt;\n        &lt;junit-jupiter.version&gt;5.6.2&lt;/junit-jupiter.version&gt;\n        &lt;lombok.version&gt;1.18.22&lt;/lombok.version&gt;\n        &lt;mapstruct.version&gt;1.4.2.Final&lt;/mapstruct.version&gt;\n        &lt;ojdbc6.version&gt;11.2.0.4&lt;/ojdbc6.version&gt;\n        &lt;spring.version&gt;4.2.4.RELEASE&lt;/spring.version&gt;\n        &lt;jersey.version&gt;2.26&lt;/jersey.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\n            &lt;version&gt;3.0.1&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.persistence&lt;/groupId&gt;\n            &lt;artifactId&gt;persistence-api&lt;/artifactId&gt;\n            &lt;version&gt;${persistence-api.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.ws.rs&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.ws.rs-api&lt;/artifactId&gt;\n            &lt;version&gt;2.0.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;version&gt;${lombok.version}&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n            &lt;artifactId&gt;mapstruct&lt;/artifactId&gt;\n            &lt;version&gt;${mapstruct.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- JUnit 5 --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\n            &lt;version&gt;${junit-jupiter.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\n            &lt;version&gt;${junit-jupiter.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\n            &lt;version&gt;${junit-jupiter.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.platform&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-platform-launcher&lt;/artifactId&gt;\n            &lt;version&gt;1.6.2&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Spring Test --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-test&lt;/artifactId&gt;\n            &lt;version&gt;${spring.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Mockito --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n            &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\n            &lt;version&gt;3.4.6&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Hamcrest assertions --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hamcrest&lt;/groupId&gt;\n            &lt;artifactId&gt;hamcrest-core&lt;/artifactId&gt;\n            &lt;version&gt;2.2&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- AssertJ assertions --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.assertj&lt;/groupId&gt;\n            &lt;artifactId&gt;assertj-core&lt;/artifactId&gt;\n            &lt;version&gt;3.16.1&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.jayway.jsonpath&lt;/groupId&gt;\n            &lt;artifactId&gt;json-path&lt;/artifactId&gt;\n            &lt;version&gt;2.4.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\n            &lt;version&gt;1.4.197&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.oracle&lt;/groupId&gt;\n            &lt;artifactId&gt;ojdbc6&lt;/artifactId&gt;\n            &lt;version&gt;${ojdbc6.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.glassfish.jersey.test-framework&lt;/groupId&gt;\n            &lt;artifactId&gt;jersey-test-framework-core&lt;/artifactId&gt;\n            &lt;version&gt;${jersey.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.glassfish.jersey.test-framework.providers&lt;/groupId&gt;\n            &lt;artifactId&gt;jersey-test-framework-provider-inmemory&lt;/artifactId&gt;\n            &lt;version&gt;${jersey.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>and test class</p>\n<pre><code>import org.glassfish.jersey.server.ResourceConfig;\nimport org.glassfish.jersey.test.JerseyTest;\nimport org.junit.jupiter.api.*;\n\nimport javax.ws.rs.client.Entity;\nimport javax.ws.rs.core.*;\n\npublic class EndpointTest extends JerseyTest {\n\n    @Override\n    protected Application configure() {\n        return new ResourceConfig(Endpoint.class);\n    }\n\n    @Test\n    void whenTestThenOK() {\n        Response response = target(&quot;/endpoint&quot;)\n                .request()\n                .post(Entity.json(&quot;{}&quot;));\n\n        Assertions.assertEquals(Response.Status.OK.getStatusCode(), response.getStatus());\n\n    }\n}\n</code></pre>\n<p>On javax.ws.rs-api version 2.0.1, there was a NoClassDefFoundError error on javax/ws/rs/client/RxInvokerProvider. I changed it to 2.1 and now I get NPE.</p>\n<p>Also, I tried to add other dependencies, change versions, but even such a simple test cannot be run</p>\n<p>Please help me.</p>\n"},{"tags":["java","arrays","mongodb"],"answers":[{"tags":[],"owner":{"account_id":7178839,"reputation":166,"user_id":5483654,"display_name":"Ivan Costa"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1645326039,"creation_date":1645326039,"answer_id":71191046,"question_id":71189783,"body_markdown":"I&#39;d suggest you using a framework like spring boot data.\r\n\r\nPlease take a look to this [example][1]\r\n\r\n\r\n  [1]: https://spring.io/guides/gs/accessing-data-mongodb/","title":"How to insert and get an ArrayList&lt;String&gt; from a mongoDB collection?","body":"<p>I'd suggest you using a framework like spring boot data.</p>\n<p>Please take a look to this <a href=\"https://spring.io/guides/gs/accessing-data-mongodb/\" rel=\"nofollow noreferrer\">example</a></p>\n"}],"owner":{"account_id":16452801,"reputation":21,"user_id":11886241,"display_name":"Ulises Bravo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1645326039,"creation_date":1645310140,"question_id":71189783,"body_markdown":"Hi im new to mongodb java driver and need help trying to insert and get an arraylist.\r\n\r\nwhat i want to do is something like this\r\n\r\n    uuid: samplexxxxxxxxx   (this is the index)\r\n    user:sam\r\n    profiles: [ID1,ID2,ID3,ID4]   &lt;- THIS\r\n    ...\r\n\r\nI appreciate suggestions and opinions, if it can be done better too. I am new to both java and mongo.","title":"How to insert and get an ArrayList&lt;String&gt; from a mongoDB collection?","body":"<p>Hi im new to mongodb java driver and need help trying to insert and get an arraylist.</p>\n<p>what i want to do is something like this</p>\n<pre><code>uuid: samplexxxxxxxxx   (this is the index)\nuser:sam\nprofiles: [ID1,ID2,ID3,ID4]   &lt;- THIS\n...\n</code></pre>\n<p>I appreciate suggestions and opinions, if it can be done better too. I am new to both java and mongo.</p>\n"},{"tags":["java","spring","resttemplate"],"comments":[{"owner":{"account_id":37187,"reputation":46683,"user_id":106261,"accept_rate":87,"display_name":"NimChimpsky"},"score":0,"creation_date":1398687937,"post_id":23341054,"comment_id":35742817,"body_markdown":"maybe you credentials are not valid","body":"maybe you credentials are not valid"},{"owner":{"display_name":"user3581291"},"score":0,"creation_date":1398688805,"post_id":23341054,"comment_id":35743381,"body_markdown":"i check it and rest it for more then 100 times","body":"i check it and rest it for more then 100 times"},{"owner":{"account_id":37187,"reputation":46683,"user_id":106261,"accept_rate":87,"display_name":"NimChimpsky"},"score":0,"creation_date":1398688944,"post_id":23341054,"comment_id":35743478,"body_markdown":"and its failed more than 100 times ?","body":"and its failed more than 100 times ?"},{"owner":{"display_name":"user3581291"},"score":0,"creation_date":1398689061,"post_id":23341054,"comment_id":35743558,"body_markdown":"yes its return error 401 unauthorised","body":"yes its return error 401 unauthorised"}],"answers":[{"tags":[],"owner":{"account_id":1232298,"reputation":11323,"user_id":1196603,"display_name":"Jk1"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1398716700,"creation_date":1398689267,"answer_id":23341573,"question_id":23341054,"body_markdown":"First thing to try is to remove `headers.add(&quot;Content-type&quot;, &quot;application/json&quot;);`. Your actual content-type is `application/x-www-form-urlencoded`.\r\n\r\nThe following code works fine for me:\r\n\r\n       RestTemplate restTemplate = new RestTemplate();\r\n       MultiValueMap&lt;String, String&gt; body = new LinkedMultiValueMap&lt;String, String&gt;();\r\n       body.add(&quot;client_id&quot;, &quot;aViwaUZXir44tcdmr6bg7m&quot;);\r\n       body.add(&quot;client_secret&quot;, &quot;65d952744a49774bcf24bcd32c521619&quot;);\r\n       body.add(&quot;grant_type&quot;, &quot;client_credentials&quot;);\r\n       HttpHeaders headers = new HttpHeaders();\r\n       headers.add(&quot;Accept&quot;, &quot;application/json&quot;);\r\n       HttpEntity&lt;?&gt; entity = new HttpEntity&lt;Object&gt;(body, headers);\r\n       ResponseEntity&lt;String&gt; res = restTemplate.exchange(\r\n           &quot;https://api.assembla.com/token?&quot;, HttpMethod.POST, entity, String.class);\r\n\r\nI&#39;m even leaving a valid credentials here, as they are created solely for testing .","title":"Post Request using resttemplate but have 401 unauthorised","body":"<p>First thing to try is to remove <code>headers.add(\"Content-type\", \"application/json\");</code>. Your actual content-type is <code>application/x-www-form-urlencoded</code>.</p>\n\n<p>The following code works fine for me:</p>\n\n<pre><code>   RestTemplate restTemplate = new RestTemplate();\n   MultiValueMap&lt;String, String&gt; body = new LinkedMultiValueMap&lt;String, String&gt;();\n   body.add(\"client_id\", \"aViwaUZXir44tcdmr6bg7m\");\n   body.add(\"client_secret\", \"65d952744a49774bcf24bcd32c521619\");\n   body.add(\"grant_type\", \"client_credentials\");\n   HttpHeaders headers = new HttpHeaders();\n   headers.add(\"Accept\", \"application/json\");\n   HttpEntity&lt;?&gt; entity = new HttpEntity&lt;Object&gt;(body, headers);\n   ResponseEntity&lt;String&gt; res = restTemplate.exchange(\n       \"https://api.assembla.com/token?\", HttpMethod.POST, entity, String.class);\n</code></pre>\n\n<p>I'm even leaving a valid credentials here, as they are created solely for testing .</p>\n"}],"owner":{"display_name":"user3581291"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12697,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":23341573,"answer_count":1,"score":1,"last_activity_date":1645322653,"creation_date":1398687778,"question_id":23341054,"body_markdown":"    String url = &quot;https://api.assembla.com/token?&quot;;\r\n\r\n    RestTemplate restTemplate = new RestTemplate();\r\n\r\n    MultiValueMap&lt;String, String&gt; body = \r\n            new LinkedMultiValueMap&lt;String, String&gt;();\r\n    \r\n    body.add(&quot;client_id&quot;, &quot;myid&quot;);\r\n    body.add(&quot;client_secret&quot;, &quot;mysecret&quot;);\r\n    body.add(&quot;grant_type&quot;, &quot;client_credentials&quot;);\r\n    HttpHeaders headers = new HttpHeaders();\r\n    headers.add(&quot;Accept&quot;, &quot;application/json&quot;);\r\n    headers.add(&quot;Content-type&quot;, &quot;application/json&quot;);\r\n    HttpEntity&lt;?&gt; entity = new HttpEntity&lt;Object&gt;(body, headers);\r\n\r\n    ResponseEntity&lt;JsonResponseType&gt; res = \r\n            restTemplate.exchange(url, HttpMethod.POST, entity, JsonResponseType.class);\r\n    \r\n    System.out.println(&quot;Hello.....&quot; + res);\r\ni m getting 401 unauthorized error can some one remove it\r\n\r\n\r\n\r\nalso use\r\n\r\n\r\n    MultiValueMap&lt;String, String&gt; body = \r\n            new LinkedMultiValueMap&lt;String, String&gt;();\r\n\r\n    body.add(&quot;x-api-key&quot;, &quot;myapikey&quot;);\r\n    body.add(&quot;x-api-secret&quot;, &quot;myapisecret&quot;);\r\n    HttpHeaders headers = new HttpHeaders();\r\n    headers.setContentType(MediaType.APPLICATION_JSON);\r\n    headers.set(&quot;Accept&quot;, &quot;application/json&quot;);\r\n    headers.set(&quot;Content-type&quot;, &quot;application/json&quot;);\r\n\r\n    HttpEntity&lt;?&gt; entity = new HttpEntity&lt;Object&gt;(body, headers);\r\n    entity.getHeaders().setContentType(MediaType.APPLICATION_JSON);\r\n    RestTemplate restTemplate = new RestTemplate();\r\n    List&lt;HttpMessageConverter&lt;?&gt;&gt; messageConverters = new\r\n            ArrayList&lt;HttpMessageConverter&lt;?&gt;&gt;();\r\n    \r\n    messageConverters.add(new MappingJacksonHttpMessageConverter());\r\n    restTemplate.setMessageConverters(messageConverters);\r\n    ResponseEntity&lt;JsonResponseType&gt; response =\r\n            restTemplate.exchange(\r\n                    url, HttpMethod.POST, entity, JsonResponseType.class);\r\n    \r\n    System.out.println(&quot;Hello.....&quot; + response);\r\nthis also have error 401 unauthorized not found\r\n\r\n\r\n\r\ni am also use \r\n\r\n\r\n\r\n    HttpMethod.POST, requestEntity, YourResponseType.class);\r\n    System.out.println(&quot;Hello.....&quot; + responseEntity);`\r\n\r\n    RestTemplate restTemplate = new RestTemplate();\r\n    List&lt;MediaType&gt; acceptableMediaTypes = new ArrayList&lt;MediaType&gt;();\r\n    acceptableMediaTypes.add(MediaType.APPLICATION_JSON);\r\n\r\n    HttpHeaders headers = new HttpHeaders();\r\n    headers.setAccept(acceptableMediaTypes);\r\n\r\n    HttpEntity&lt;String&gt; requestEntity = new HttpEntity&lt;String&gt;(\r\n            &quot;X-Api-Key:myapikey X-Api-Secret:=my api secret&quot;,\r\n            headers);\r\n    ResponseEntity&lt;YourResponseType&gt; responseEntity = restTemplate\r\n            .exchange(&quot;https://api.assembla.com/v1/spaces.json&quot;,\r\n\r\n\r\nthis have also same error ","title":"Post Request using resttemplate but have 401 unauthorised","body":"<pre><code>String url = \"https://api.assembla.com/token?\";\n\nRestTemplate restTemplate = new RestTemplate();\n\nMultiValueMap&lt;String, String&gt; body = \n        new LinkedMultiValueMap&lt;String, String&gt;();\n\nbody.add(\"client_id\", \"myid\");\nbody.add(\"client_secret\", \"mysecret\");\nbody.add(\"grant_type\", \"client_credentials\");\nHttpHeaders headers = new HttpHeaders();\nheaders.add(\"Accept\", \"application/json\");\nheaders.add(\"Content-type\", \"application/json\");\nHttpEntity&lt;?&gt; entity = new HttpEntity&lt;Object&gt;(body, headers);\n\nResponseEntity&lt;JsonResponseType&gt; res = \n        restTemplate.exchange(url, HttpMethod.POST, entity, JsonResponseType.class);\n\nSystem.out.println(\"Hello.....\" + res);\n</code></pre>\n\n<p>i m getting 401 unauthorized error can some one remove it</p>\n\n<p>also use</p>\n\n<pre><code>MultiValueMap&lt;String, String&gt; body = \n        new LinkedMultiValueMap&lt;String, String&gt;();\n\nbody.add(\"x-api-key\", \"myapikey\");\nbody.add(\"x-api-secret\", \"myapisecret\");\nHttpHeaders headers = new HttpHeaders();\nheaders.setContentType(MediaType.APPLICATION_JSON);\nheaders.set(\"Accept\", \"application/json\");\nheaders.set(\"Content-type\", \"application/json\");\n\nHttpEntity&lt;?&gt; entity = new HttpEntity&lt;Object&gt;(body, headers);\nentity.getHeaders().setContentType(MediaType.APPLICATION_JSON);\nRestTemplate restTemplate = new RestTemplate();\nList&lt;HttpMessageConverter&lt;?&gt;&gt; messageConverters = new\n        ArrayList&lt;HttpMessageConverter&lt;?&gt;&gt;();\n\nmessageConverters.add(new MappingJacksonHttpMessageConverter());\nrestTemplate.setMessageConverters(messageConverters);\nResponseEntity&lt;JsonResponseType&gt; response =\n        restTemplate.exchange(\n                url, HttpMethod.POST, entity, JsonResponseType.class);\n\nSystem.out.println(\"Hello.....\" + response);\n</code></pre>\n\n<p>this also have error 401 unauthorized not found</p>\n\n<p>i am also use </p>\n\n<pre><code>HttpMethod.POST, requestEntity, YourResponseType.class);\nSystem.out.println(\"Hello.....\" + responseEntity);`\n\nRestTemplate restTemplate = new RestTemplate();\nList&lt;MediaType&gt; acceptableMediaTypes = new ArrayList&lt;MediaType&gt;();\nacceptableMediaTypes.add(MediaType.APPLICATION_JSON);\n\nHttpHeaders headers = new HttpHeaders();\nheaders.setAccept(acceptableMediaTypes);\n\nHttpEntity&lt;String&gt; requestEntity = new HttpEntity&lt;String&gt;(\n        \"X-Api-Key:myapikey X-Api-Secret:=my api secret\",\n        headers);\nResponseEntity&lt;YourResponseType&gt; responseEntity = restTemplate\n        .exchange(\"https://api.assembla.com/v1/spaces.json\",\n</code></pre>\n\n<p>this have also same error </p>\n"},{"tags":["java","maven","intellij-idea","gson"],"comments":[{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":0,"creation_date":1483919739,"post_id":41539209,"comment_id":70283671,"body_markdown":"Try the mirror http://stackoverflow.com/a/11942110/573032","body":"Try the mirror <a href=\"http://stackoverflow.com/a/11942110/573032\">stackoverflow.com/a/11942110/573032</a>"}],"answers":[{"tags":[],"owner":{"account_id":9940124,"reputation":392,"user_id":7357010,"accept_rate":100,"display_name":"Austin McCalley"},"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1483919998,"creation_date":1483919998,"answer_id":41539256,"question_id":41539209,"body_markdown":"I remembered how to do this real quick. You have to go to File -&gt; Project Structure. Then click the Libraries tab and the the green plus. Once clicked select from Maven and then search GSON and find the correct GSON version you want to use from the menu and then GSON dependency will work.","title":"Google GSON Dependency not found","body":"<p>I remembered how to do this real quick. You have to go to File -> Project Structure. Then click the Libraries tab and the the green plus. Once clicked select from Maven and then search GSON and find the correct GSON version you want to use from the menu and then GSON dependency will work.</p>\n"},{"tags":[],"owner":{"account_id":9841196,"reputation":306,"user_id":7318519,"display_name":"Chris8447"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1517848509,"creation_date":1517848509,"answer_id":48627199,"question_id":41539209,"body_markdown":"I had the same issue. \r\n\r\nGo to File -&gt; Invalidate Caches/ Restart and click the same again.\r\n\r\nAndroid Studio restarts and reloads all your library files.","title":"Google GSON Dependency not found","body":"<p>I had the same issue. </p>\n\n<p>Go to File -> Invalidate Caches/ Restart and click the same again.</p>\n\n<p>Android Studio restarts and reloads all your library files.</p>\n"},{"tags":[],"owner":{"account_id":11191854,"reputation":555,"user_id":8211967,"display_name":"Asanka Sampath"},"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1598594491,"creation_date":1598594491,"answer_id":63628291,"question_id":41539209,"body_markdown":"    &lt;dependency&gt;\r\n       &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\r\n       &lt;artifactId&gt;gson&lt;/artifactId&gt;\r\n       &lt;version&gt;2.8.6&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n ","title":"Google GSON Dependency not found","body":"<pre><code>&lt;dependency&gt;\n   &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\n   &lt;artifactId&gt;gson&lt;/artifactId&gt;\n   &lt;version&gt;2.8.6&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12969102,"reputation":43,"user_id":9375488,"display_name":"pedagogyfirst"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1645321942,"creation_date":1645320942,"answer_id":71190694,"question_id":41539209,"body_markdown":"I had this problem and Invalidate caches and restart (in android studio) didn&#39;t work for me. Sometimes the IDE doesn&#39;t recognize the class that is being tried to be imported.\r\n\r\nAdd dependency in build.gradle(:app) in gradle: \r\n\r\n    dependencies {\r\n        implementation &#39;com.google.code.gson:gson:2.9.0&#39;\r\n    }\r\n\r\nAnd add the line:\r\n\r\n    import com.google.gson.Gson\r\n\r\nWorked for me\r\n    \r\n\r\n ","title":"Google GSON Dependency not found","body":"<p>I had this problem and Invalidate caches and restart (in android studio) didn't work for me. Sometimes the IDE doesn't recognize the class that is being tried to be imported.</p>\n<p>Add dependency in build.gradle(:app) in gradle:</p>\n<pre><code>dependencies {\n    implementation 'com.google.code.gson:gson:2.9.0'\n}\n</code></pre>\n<p>And add the line:</p>\n<pre><code>import com.google.gson.Gson\n</code></pre>\n<p>Worked for me</p>\n"}],"owner":{"account_id":9940124,"reputation":392,"user_id":7357010,"accept_rate":100,"display_name":"Austin McCalley"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":29274,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":41539256,"answer_count":4,"score":5,"last_activity_date":1645321942,"creation_date":1483919512,"question_id":41539209,"body_markdown":"I am trying to have GSON in my pom.xml but IntelliJ is telling me that the dependency &quot;com.google.code.gson:gson:2.8.0&quot; not found. I have tried calling the Maven repository but it still is not working. Also ignore the commented out lines.\r\n\r\nHere is a copy of my pom file.\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;groupId&gt;TagChooser&lt;/groupId&gt;\r\n    &lt;artifactId&gt;TagChooser 1.7.10&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n\r\n\r\n    &lt;dependencies&gt;\r\n\r\n        &lt;!--  Gson: Java to Json conversion --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\r\n            &lt;artifactId&gt;gson&lt;/artifactId&gt;\r\n            &lt;version&gt;2.8.0&lt;/version&gt;\r\n            &lt;scope&gt;compile&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;!--&lt;dependency&gt;--&gt;\r\n            &lt;!--&lt;groupId&gt;mkremins&lt;/groupId&gt;--&gt;\r\n            &lt;!--&lt;artifactId&gt;fanciful&lt;/artifactId&gt;--&gt;\r\n            &lt;!--&lt;version&gt;0.4.0-SNAPSHOT&lt;/version&gt;--&gt;\r\n        &lt;!--&lt;/dependency&gt;--&gt;\r\n\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;repositories&gt;\r\n        &lt;repository&gt;\r\n            &lt;id&gt;central&lt;/id&gt;\r\n            &lt;name&gt;Maven repository&lt;/name&gt;\r\n            &lt;url&gt;http://repo1.maven.org/maven2&lt;/url&gt;\r\n        &lt;/repository&gt;\r\n\r\n        &lt;!--&lt;repository&gt;--&gt;\r\n            &lt;!--&lt;id&gt;stealthyone-repo&lt;/id&gt;--&gt;\r\n            &lt;!--&lt;url&gt;http://repo.stealthyone.com/content/groups/public&lt;/url&gt;--&gt;\r\n        &lt;!--&lt;/repository&gt;--&gt;\r\n\r\n    &lt;/repositories&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n","title":"Google GSON Dependency not found","body":"<p>I am trying to have GSON in my pom.xml but IntelliJ is telling me that the dependency \"com.google.code.gson:gson:2.8.0\" not found. I have tried calling the Maven repository but it still is not working. Also ignore the commented out lines.</p>\n\n<p>Here is a copy of my pom file.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n     xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n     xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n&lt;groupId&gt;TagChooser&lt;/groupId&gt;\n&lt;artifactId&gt;TagChooser 1.7.10&lt;/artifactId&gt;\n&lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n\n&lt;dependencies&gt;\n\n    &lt;!--  Gson: Java to Json conversion --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\n        &lt;artifactId&gt;gson&lt;/artifactId&gt;\n        &lt;version&gt;2.8.0&lt;/version&gt;\n        &lt;scope&gt;compile&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;!--&lt;dependency&gt;--&gt;\n        &lt;!--&lt;groupId&gt;mkremins&lt;/groupId&gt;--&gt;\n        &lt;!--&lt;artifactId&gt;fanciful&lt;/artifactId&gt;--&gt;\n        &lt;!--&lt;version&gt;0.4.0-SNAPSHOT&lt;/version&gt;--&gt;\n    &lt;!--&lt;/dependency&gt;--&gt;\n\n&lt;/dependencies&gt;\n\n&lt;repositories&gt;\n    &lt;repository&gt;\n        &lt;id&gt;central&lt;/id&gt;\n        &lt;name&gt;Maven repository&lt;/name&gt;\n        &lt;url&gt;http://repo1.maven.org/maven2&lt;/url&gt;\n    &lt;/repository&gt;\n\n    &lt;!--&lt;repository&gt;--&gt;\n        &lt;!--&lt;id&gt;stealthyone-repo&lt;/id&gt;--&gt;\n        &lt;!--&lt;url&gt;http://repo.stealthyone.com/content/groups/public&lt;/url&gt;--&gt;\n    &lt;!--&lt;/repository&gt;--&gt;\n\n&lt;/repositories&gt;\n</code></pre>\n\n<p></p>\n"},{"tags":["java","swing","printing"],"comments":[{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1645317323,"post_id":71190349,"comment_id":125839346,"body_markdown":"Ok, so when I use Verdana @ 16 in Word, it produces the same output as your program when printed.  Do you mean that you would like a different font size to be used when printing as to compared to when displaying?","body":"Ok, so when I use Verdana @ 16 in Word, it produces the same output as your program when printed.  Do you mean that you would like a different font size to be used when printing as to compared to when displaying?"},{"owner":{"account_id":997513,"reputation":12945,"user_id":3893496,"accept_rate":54,"display_name":"arcy"},"score":0,"creation_date":1645318719,"post_id":71190349,"comment_id":125839534,"body_markdown":"I&#39;m not in Word, of course. I don&#39;t know what that has to do with this. When I run this program, I get text on the screen that is the size I want on the screen. When I use the `print()` method on the text area, it pops up a dialog box, and, on confirming, prints the text much larger than I want on the printed page. I want to reduce (in this case) the size of the font on the printed page somehow.","body":"I&#39;m not in Word, of course. I don&#39;t know what that has to do with this. When I run this program, I get text on the screen that is the size I want on the screen. When I use the <code>print()</code> method on the text area, it pops up a dialog box, and, on confirming, prints the text much larger than I want on the printed page. I want to reduce (in this case) the size of the font on the printed page somehow."}],"answers":[{"tags":[],"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1645319865,"creation_date":1645319865,"answer_id":71190613,"question_id":71190349,"body_markdown":"Create a new `JTextArea` with the font you want and print that instead of the one on the screen\r\n\r\n    import java.awt.BorderLayout;\r\n    import java.awt.Dimension;\r\n    import java.awt.EventQueue;\r\n    import java.awt.Font;\r\n    import java.awt.event.ActionEvent;\r\n    import java.awt.event.ActionListener;\r\n    import java.awt.print.PrinterException;\r\n    import javax.swing.JButton;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JPanel;\r\n    import javax.swing.JScrollPane;\r\n    import javax.swing.JTextArea;\r\n    import javax.swing.plaf.FontUIResource;\r\n\r\n    public class Main {\r\n\r\n        public static void main(String[] args) {\r\n            new Main();\r\n        }\r\n\r\n        public Main() {\r\n            EventQueue.invokeLater(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    JFrame frame = new JFrame();\r\n                    frame.add(new TestPane());\r\n                    frame.pack();\r\n                    frame.setLocationRelativeTo(null);\r\n                    frame.setVisible(true);\r\n                }\r\n            });\r\n        }\r\n\r\n        public static class TestPane extends JPanel {\r\n\r\n            private static String fontName = Font.MONOSPACED; // &quot;Verdana&quot;\r\n            private static FontUIResource defaultFixedWidthCellFont = new FontUIResource(fontName, Font.PLAIN, 32);\r\n            private static FontUIResource defaultFixedWidthPrintFont = new FontUIResource(fontName, Font.PLAIN, 8);\r\n\r\n            public static FontUIResource getDefaultCellFont() {\r\n                return defaultFixedWidthCellFont;\r\n            }\r\n\r\n            public static FontUIResource getDefaultPrintFont() {\r\n                return defaultFixedWidthPrintFont;\r\n            }\r\n\r\n            public TestPane() {\r\n                setLayout(new BorderLayout());\r\n                JTextArea textArea = new JTextArea();\r\n\r\n                textArea.setEditable(false);\r\n                textArea.setFont(getDefaultCellFont());\r\n\r\n                textArea.setText(&quot;one and two and three&quot;);\r\n                JScrollPane scrollPane = new JScrollPane(textArea);\r\n                add(scrollPane);\r\n\r\n                JButton print = new JButton(&quot;Print&quot;);\r\n                add(print, BorderLayout.SOUTH);\r\n\r\n                print.addActionListener(new ActionListener() {\r\n                    @Override\r\n                    public void actionPerformed(ActionEvent e) {\r\n                        JTextArea printTA = new JTextArea(textArea.getText());\r\n                        printTA.setFont(getDefaultPrintFont());\r\n                        try {\r\n                            printTA.print();\r\n                        } catch (PrinterException pe) {\r\n                            pe.printStackTrace();\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n\r\n            @Override\r\n            public Dimension getPreferredSize() {\r\n                return new Dimension(400, 200);\r\n            }\r\n        }\r\n    }\r\n","title":"Setting font size for a print operation from a text component","body":"<p>Create a new <code>JTextArea</code> with the font you want and print that instead of the one on the screen</p>\n<pre><code>import java.awt.BorderLayout;\nimport java.awt.Dimension;\nimport java.awt.EventQueue;\nimport java.awt.Font;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport java.awt.print.PrinterException;\nimport javax.swing.JButton;\nimport javax.swing.JFrame;\nimport javax.swing.JPanel;\nimport javax.swing.JScrollPane;\nimport javax.swing.JTextArea;\nimport javax.swing.plaf.FontUIResource;\n\npublic class Main {\n\n    public static void main(String[] args) {\n        new Main();\n    }\n\n    public Main() {\n        EventQueue.invokeLater(new Runnable() {\n            @Override\n            public void run() {\n                JFrame frame = new JFrame();\n                frame.add(new TestPane());\n                frame.pack();\n                frame.setLocationRelativeTo(null);\n                frame.setVisible(true);\n            }\n        });\n    }\n\n    public static class TestPane extends JPanel {\n\n        private static String fontName = Font.MONOSPACED; // &quot;Verdana&quot;\n        private static FontUIResource defaultFixedWidthCellFont = new FontUIResource(fontName, Font.PLAIN, 32);\n        private static FontUIResource defaultFixedWidthPrintFont = new FontUIResource(fontName, Font.PLAIN, 8);\n\n        public static FontUIResource getDefaultCellFont() {\n            return defaultFixedWidthCellFont;\n        }\n\n        public static FontUIResource getDefaultPrintFont() {\n            return defaultFixedWidthPrintFont;\n        }\n\n        public TestPane() {\n            setLayout(new BorderLayout());\n            JTextArea textArea = new JTextArea();\n\n            textArea.setEditable(false);\n            textArea.setFont(getDefaultCellFont());\n\n            textArea.setText(&quot;one and two and three&quot;);\n            JScrollPane scrollPane = new JScrollPane(textArea);\n            add(scrollPane);\n\n            JButton print = new JButton(&quot;Print&quot;);\n            add(print, BorderLayout.SOUTH);\n\n            print.addActionListener(new ActionListener() {\n                @Override\n                public void actionPerformed(ActionEvent e) {\n                    JTextArea printTA = new JTextArea(textArea.getText());\n                    printTA.setFont(getDefaultPrintFont());\n                    try {\n                        printTA.print();\n                    } catch (PrinterException pe) {\n                        pe.printStackTrace();\n                    }\n                }\n            });\n        }\n\n        @Override\n        public Dimension getPreferredSize() {\n            return new Dimension(400, 200);\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":997513,"reputation":12945,"user_id":3893496,"accept_rate":54,"display_name":"arcy"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":95,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71190613,"answer_count":1,"score":0,"last_activity_date":1645319865,"creation_date":1645316469,"question_id":71190349,"body_markdown":"I have the following program that puts a text string in a JTextArea and offers a print dialog for printing it:\r\n\r\n    public class PrintTest\r\n    {\r\n      private static String fontName = Font.MONOSPACED; // &quot;Verdana&quot;\r\n      private static FontUIResource defaultFixedWidthCellFont = new FontUIResource(fontName, Font.PLAIN, 16);\r\n      public static FontUIResource getDefaultCellFont() { return defaultFixedWidthCellFont; }\r\n    \r\n      public static void main(String[] args)\r\n      {\r\n        JFrame frame = new JFrame(&quot;Print test&quot;);\r\n        JTextArea textArea = new JTextArea();\r\n        \r\n        textArea.setEditable(false);\r\n        textArea.setFont(getDefaultCellFont());\r\n        textArea.setPreferredSize(new Dimension(400,200));\r\n    \r\n        textArea.setText(&quot;one and two and three&quot;);\r\n        JScrollPane scrollPane = new JScrollPane(textArea);\r\n        frame.add(scrollPane);\r\n        frame.pack();\r\n        frame.setVisible(true);\r\n        \r\n        try { textArea.print(); }\r\n        catch (PrinterException pe) { pe.printStackTrace(); }\r\n    \r\n      }\r\n    \r\n    }\r\n\r\nIn the real application, the text area does not need to be edited, it does need to be a fixed width font of this size. I am willing to use a text component other than a JTextArea, as long as I can set it to a fixed width font size and put it in a JScrollPane. I do not want any text wrapping. After getting put on the screen, it does not change (it&#39;s a report).\r\n\r\nThe problem is that the text, when printed on the printer, is too large. I do not want to reduce the size of the text in the window. I do not want to put the text in a file and print the file. The text is one long string in my Java program, there&#39;s no need to make a file of it.\r\n\r\nWhen I attempt to search solutions, I get lots of articles about printing from eclipse, using System.out.println, and an occasional article that involves using Graphics objects to render individual text strings. I was hoping for something simpler; the program does do the printing, I just need a different font.\r\n\r\nI have tried putting the text into another JTextArea and giving it a derived font with a different size, but that didn&#39;t work -- I did not render that text area, and don&#39;t know if that would matter. Is that a way to get this done? I&#39;ve seen references to off-screen buffers for graphics, but don&#39;t know how I&#39;d go about telling my text component to render itself to an offscreen buffer.\r\n\r\nOr is there a better way to get this done?\r\n","title":"Setting font size for a print operation from a text component","body":"<p>I have the following program that puts a text string in a JTextArea and offers a print dialog for printing it:</p>\n<pre><code>public class PrintTest\n{\n  private static String fontName = Font.MONOSPACED; // &quot;Verdana&quot;\n  private static FontUIResource defaultFixedWidthCellFont = new FontUIResource(fontName, Font.PLAIN, 16);\n  public static FontUIResource getDefaultCellFont() { return defaultFixedWidthCellFont; }\n\n  public static void main(String[] args)\n  {\n    JFrame frame = new JFrame(&quot;Print test&quot;);\n    JTextArea textArea = new JTextArea();\n    \n    textArea.setEditable(false);\n    textArea.setFont(getDefaultCellFont());\n    textArea.setPreferredSize(new Dimension(400,200));\n\n    textArea.setText(&quot;one and two and three&quot;);\n    JScrollPane scrollPane = new JScrollPane(textArea);\n    frame.add(scrollPane);\n    frame.pack();\n    frame.setVisible(true);\n    \n    try { textArea.print(); }\n    catch (PrinterException pe) { pe.printStackTrace(); }\n\n  }\n\n}\n</code></pre>\n<p>In the real application, the text area does not need to be edited, it does need to be a fixed width font of this size. I am willing to use a text component other than a JTextArea, as long as I can set it to a fixed width font size and put it in a JScrollPane. I do not want any text wrapping. After getting put on the screen, it does not change (it's a report).</p>\n<p>The problem is that the text, when printed on the printer, is too large. I do not want to reduce the size of the text in the window. I do not want to put the text in a file and print the file. The text is one long string in my Java program, there's no need to make a file of it.</p>\n<p>When I attempt to search solutions, I get lots of articles about printing from eclipse, using System.out.println, and an occasional article that involves using Graphics objects to render individual text strings. I was hoping for something simpler; the program does do the printing, I just need a different font.</p>\n<p>I have tried putting the text into another JTextArea and giving it a derived font with a different size, but that didn't work -- I did not render that text area, and don't know if that would matter. Is that a way to get this done? I've seen references to off-screen buffers for graphics, but don't know how I'd go about telling my text component to render itself to an offscreen buffer.</p>\n<p>Or is there a better way to get this done?</p>\n"},{"tags":["java","linux","spring-boot","centos","spring-batch"],"answers":[{"tags":[],"owner":{"account_id":158464,"reputation":1228,"user_id":377141,"display_name":"REW"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645319159,"creation_date":1645319159,"answer_id":71190562,"question_id":71183703,"body_markdown":"Generally you will want to redirect output, and you can use the nohup command to spawn it to the background. If you don&#39;t care about capturing stdout or stderr, you can direct those to /dev/null\r\n\r\n    nohup java -Xms256m -Xmx1024m -jar UpdateInfoBatch-0.0.1-SNAPSHOT.jar &gt;/dev/null 2&gt;&amp;1 &amp;\r\n\r\n","title":"How can I correctly run in background a Spring Boot Batch application on a Linux (Centos 7) shell?","body":"<p>Generally you will want to redirect output, and you can use the nohup command to spawn it to the background. If you don't care about capturing stdout or stderr, you can direct those to /dev/null</p>\n<pre><code>nohup java -Xms256m -Xmx1024m -jar UpdateInfoBatch-0.0.1-SNAPSHOT.jar &gt;/dev/null 2&gt;&amp;1 &amp;\n</code></pre>\n"}],"owner":{"account_id":2056257,"reputation":41415,"user_id":1833945,"accept_rate":65,"display_name":"AndreaNobili"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":618,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1645319159,"creation_date":1645263175,"question_id":71183703,"body_markdown":"I have to run a Java Spring Boot application on a Linux machine (Centos 7). I am connecting to a shell via SSH.\r\nThis application is in **jar** format and implement a batch application and containins itself its scheduler.\r\n\r\nI have to run it in background on a remote server in order that after that I quit the shell it is still run.\r\n\r\nI have performed this command in order to run my application in background:\r\n\r\n    java -Xms256m -Xmx1024m -jar UpdateInfoBatch-0.0.1-SNAPSHOT.jar &amp;\r\n\r\nthen I clicked on **CTRL+C** on my keyboard in order to obtain again the keyboard prompt on my shell.\r\n\r\nand here the first trange behavior: I obtain again the shell prompt and the possibility to insert command but if the application log something it is appearing on the shell. Why? I expected that my application still run in background.\r\n\r\nAnyway I now prompt this command in the my shell in order to check if my application is running:\r\n\r\n\r\nxxx@xxx.yyy.it [~/zzz-import-data-batch]# ps aux | grep java\r\nxxx 23307 15.3  1.6 4871172 418980 pts/0  Sl   10:23   0:22 java -Xms256m -Xmx1024m -jar UpdateInfoBatch-0.0.1-SNAPSHOT.jar\r\nwebadmin 23522  0.0  0.0 112812   980 pts/0    S+   10:25   0:00 grep --color=auto java\r\n\r\nAnd yes my application seems to correctly run (the first one).\r\n\r\nThen I close the connection to my shell, I log into it again and I perform again the previous command but now I obtain this:\r\n\r\n\r\nxxx@xxx.spaccount.it [~/zzz-import-data-batch]# ps aux | grep java\r\nxxx 23919  0.0  0.0 112812   980 pts/0    S+   10:27   0:00 grep --color=auto java\r\n\r\nAs you can see after that I disconnect from the shell, when I do a new login my batch application seems that it is not running (and infact my job application doesn&#39;t runned).\r\n\r\nWhat is wrong? What am I missing? What could be a good way to run in background my java jar batch application?\r\n","title":"How can I correctly run in background a Spring Boot Batch application on a Linux (Centos 7) shell?","body":"<p>I have to run a Java Spring Boot application on a Linux machine (Centos 7). I am connecting to a shell via SSH.\nThis application is in <strong>jar</strong> format and implement a batch application and containins itself its scheduler.</p>\n<p>I have to run it in background on a remote server in order that after that I quit the shell it is still run.</p>\n<p>I have performed this command in order to run my application in background:</p>\n<pre><code>java -Xms256m -Xmx1024m -jar UpdateInfoBatch-0.0.1-SNAPSHOT.jar &amp;\n</code></pre>\n<p>then I clicked on <strong>CTRL+C</strong> on my keyboard in order to obtain again the keyboard prompt on my shell.</p>\n<p>and here the first trange behavior: I obtain again the shell prompt and the possibility to insert command but if the application log something it is appearing on the shell. Why? I expected that my application still run in background.</p>\n<p>Anyway I now prompt this command in the my shell in order to check if my application is running:</p>\n<p>xxx@xxx.yyy.it [~/zzz-import-data-batch]# ps aux | grep java\nxxx 23307 15.3  1.6 4871172 418980 pts/0  Sl   10:23   0:22 java -Xms256m -Xmx1024m -jar UpdateInfoBatch-0.0.1-SNAPSHOT.jar\nwebadmin 23522  0.0  0.0 112812   980 pts/0    S+   10:25   0:00 grep --color=auto java</p>\n<p>And yes my application seems to correctly run (the first one).</p>\n<p>Then I close the connection to my shell, I log into it again and I perform again the previous command but now I obtain this:</p>\n<p>xxx@xxx.spaccount.it [~/zzz-import-data-batch]# ps aux | grep java\nxxx 23919  0.0  0.0 112812   980 pts/0    S+   10:27   0:00 grep --color=auto java</p>\n<p>As you can see after that I disconnect from the shell, when I do a new login my batch application seems that it is not running (and infact my job application doesn't runned).</p>\n<p>What is wrong? What am I missing? What could be a good way to run in background my java jar batch application?</p>\n"},{"tags":["java","android","maven","kotlin","maven-publish"],"comments":[{"owner":{"account_id":20732441,"reputation":1553,"user_id":15224052,"display_name":"Oliver"},"score":0,"creation_date":1645282495,"post_id":71184523,"comment_id":125831996,"body_markdown":"I&#39;m not familiar with Gradle and the `maven-publish` plugin, but maybe this helps: https://stackoverflow.com/questions/42908823/publish-to-sonatype-using-new-gradle-plugin-maven-publish.","body":"I&#39;m not familiar with Gradle and the <code>maven-publish</code> plugin, but maybe this helps: <a href=\"https://stackoverflow.com/questions/42908823/publish-to-sonatype-using-new-gradle-plugin-maven-publish\" title=\"publish to sonatype using new gradle plugin maven publish\">stackoverflow.com/questions/42908823/&hellip;</a>."},{"owner":{"account_id":7814869,"reputation":595,"user_id":5909910,"display_name":"Vahid Garousi"},"score":0,"creation_date":1645331683,"post_id":71184523,"comment_id":125840932,"body_markdown":"@Oliver Thank you for your attention, this link did not solve my problem","body":"@Oliver Thank you for your attention, this link did not solve my problem"},{"owner":{"account_id":4706847,"reputation":4485,"user_id":3808675,"accept_rate":95,"display_name":"baywet"},"score":0,"creation_date":1673287498,"post_id":71184523,"comment_id":132460574,"body_markdown":"Does this answer your question? [Publishing is not able to resolve a dependency on a project with multiple publications that have different coordinates](https://stackoverflow.com/questions/51247830/publishing-is-not-able-to-resolve-a-dependency-on-a-project-with-multiple-public)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/51247830/publishing-is-not-able-to-resolve-a-dependency-on-a-project-with-multiple-public\">Publishing is not able to resolve a dependency on a project with multiple publications that have different coordinates</a>"}],"owner":{"account_id":7814869,"reputation":595,"user_id":5909910,"display_name":"Vahid Garousi"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":647,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1645318106,"creation_date":1645269631,"question_id":71184523,"body_markdown":"\r\nI intend to publish my modules in a nexus repository with the following steps.\r\n\r\n\r\n\r\n**first step:**\r\n\r\nCreate a ```android-publications.gradle``` file and add the following contents to it \r\n\r\n**android-publications.gradle** :\r\n\r\n```\r\napply plugin: &#39;maven-publish&#39;\r\n\r\next.moduleVersion = &quot;0.0.0&quot;\r\n\r\ndef moduleGroupId = &quot;team.techvida.framework&quot;\r\ndef moduleRepoUrl = &quot;http://url/repository/maven-releases/&quot;\r\n\r\nafterEvaluate {\r\n    publishing {\r\n        publications {\r\n            debug(MavenPublication) {\r\n                from components.debug\r\n                groupId = moduleGroupId\r\n                artifactId = &quot;$project.name-debug&quot;\r\n                version = moduleVersion\r\n            }\r\n            release(MavenPublication) {\r\n                from components.release\r\n                groupId = moduleGroupId\r\n                artifactId = project.name\r\n                version = moduleVersion\r\n            }\r\n        }\r\n        repositories {\r\n            maven {\r\n                name &quot;nexus&quot;\r\n                url moduleRepoUrl\r\n                allowInsecureProtocol = true\r\n                credentials {\r\n                    username findProperty(&quot;nexusUsername&quot;)\r\n                    password findProperty(&quot;nexusPassword&quot;)\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n**Step two**\r\nUse it in all modules as follows: \r\n\r\ncore module =&gt; \r\n```\r\napply from: &quot;$rootDir/android-library-build.gradle&quot;\r\napply from: &quot;$rootDir/buildSrc/android-publications.gradle&quot;\r\next.moduleVersion = &quot;0.0.1&quot;\r\ndependencies {\r\n\r\n}\r\n```\r\n\r\npresentation module =&gt;\r\n```\r\napply from: &quot;$rootDir/android-library-build.gradle&quot;\r\napply from: &quot;$rootDir/buildSrc/android-publications.gradle&quot;\r\next.moduleVersion = &quot;0.0.1&quot;\r\ndependencies {\r\n\r\n}\r\n```\r\n\r\n\r\n**Third step**\r\nUse in a module that uses other modules \r\n\r\ndi module =&gt; \r\n```\r\napply from: &quot;$rootDir/android-library-build.gradle&quot;\r\napply from: &quot;$rootDir/buildSrc/android-publications.gradle&quot;\r\next.moduleVersion = &quot;0.0.1&quot;\r\n\r\ndependencies {\r\n    implementation(project(Modules.core))\r\n    implementation(project(Modules.imageLoading))\r\n    implementation(project(Modules.prettyLogger))\r\n}\r\n```\r\n\r\nNote 1 : Publishing the second step modules is done successfully. \r\n\r\n\r\n**Step 4** (which leads to a compilation error)\r\nPublish the third step module (di)\r\n\r\nReceived error: \r\n\r\n```\r\n What went wrong:\r\nCould not determine the dependencies of task &#39;:di:publishReleasePublicationToNexusRepository&#39;.\r\n&gt; Publishing is not able to resolve a dependency on a project with multiple publications that have different coordi\r\nnates.\r\n  Found the following publications in project &#39;:image_loading&#39;:\r\n    - Maven publication &#39;debug&#39; with coordinates team.techvida.framework:image_loading-debug:0.0.1\r\n    - Maven publication &#39;release&#39; with coordinates team.techvida.framework:image_loading:0.0.1\r\n\r\n* Try:\r\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run\r\nwith --scan to get full insights.\r\n\r\n```\r\n\r\n\r\nWould you please tell me how to solve this problem? ","title":"Publishing is not able to resolve a dependency on a project with multiple publications that have different coordi nates","body":"<p>I intend to publish my modules in a nexus repository with the following steps.</p>\n<p><strong>first step:</strong></p>\n<p>Create a <code>android-publications.gradle</code> file and add the following contents to it</p>\n<p><strong>android-publications.gradle</strong> :</p>\n<pre><code>apply plugin: 'maven-publish'\n\next.moduleVersion = &quot;0.0.0&quot;\n\ndef moduleGroupId = &quot;team.techvida.framework&quot;\ndef moduleRepoUrl = &quot;http://url/repository/maven-releases/&quot;\n\nafterEvaluate {\n    publishing {\n        publications {\n            debug(MavenPublication) {\n                from components.debug\n                groupId = moduleGroupId\n                artifactId = &quot;$project.name-debug&quot;\n                version = moduleVersion\n            }\n            release(MavenPublication) {\n                from components.release\n                groupId = moduleGroupId\n                artifactId = project.name\n                version = moduleVersion\n            }\n        }\n        repositories {\n            maven {\n                name &quot;nexus&quot;\n                url moduleRepoUrl\n                allowInsecureProtocol = true\n                credentials {\n                    username findProperty(&quot;nexusUsername&quot;)\n                    password findProperty(&quot;nexusPassword&quot;)\n                }\n            }\n        }\n    }\n}\n</code></pre>\n<p><strong>Step two</strong>\nUse it in all modules as follows:</p>\n<p>core module =&gt;</p>\n<pre><code>apply from: &quot;$rootDir/android-library-build.gradle&quot;\napply from: &quot;$rootDir/buildSrc/android-publications.gradle&quot;\next.moduleVersion = &quot;0.0.1&quot;\ndependencies {\n\n}\n</code></pre>\n<p>presentation module =&gt;</p>\n<pre><code>apply from: &quot;$rootDir/android-library-build.gradle&quot;\napply from: &quot;$rootDir/buildSrc/android-publications.gradle&quot;\next.moduleVersion = &quot;0.0.1&quot;\ndependencies {\n\n}\n</code></pre>\n<p><strong>Third step</strong>\nUse in a module that uses other modules</p>\n<p>di module =&gt;</p>\n<pre><code>apply from: &quot;$rootDir/android-library-build.gradle&quot;\napply from: &quot;$rootDir/buildSrc/android-publications.gradle&quot;\next.moduleVersion = &quot;0.0.1&quot;\n\ndependencies {\n    implementation(project(Modules.core))\n    implementation(project(Modules.imageLoading))\n    implementation(project(Modules.prettyLogger))\n}\n</code></pre>\n<p>Note 1 : Publishing the second step modules is done successfully.</p>\n<p><strong>Step 4</strong> (which leads to a compilation error)\nPublish the third step module (di)</p>\n<p>Received error:</p>\n<pre><code> What went wrong:\nCould not determine the dependencies of task ':di:publishReleasePublicationToNexusRepository'.\n&gt; Publishing is not able to resolve a dependency on a project with multiple publications that have different coordi\nnates.\n  Found the following publications in project ':image_loading':\n    - Maven publication 'debug' with coordinates team.techvida.framework:image_loading-debug:0.0.1\n    - Maven publication 'release' with coordinates team.techvida.framework:image_loading:0.0.1\n\n* Try:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run\nwith --scan to get full insights.\n\n</code></pre>\n<p>Would you please tell me how to solve this problem?</p>\n"},{"tags":["java","arrays","split"],"answers":[{"tags":[],"owner":{"account_id":9127082,"reputation":2954,"user_id":6790326,"display_name":"Dorian Gray"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1645316841,"creation_date":1645316054,"answer_id":71190314,"question_id":71189731,"body_markdown":"This link is helpful:\r\n\r\nhttps://konigsberg.blogspot.com/2009/11/final-thoughts-java-puzzler-splitting.html\r\n\r\nBasically, it is for perl compatibility.\r\n\r\nYou can use `split(&quot;:&quot;, -1)` here if you don&#39;t want that behavior.\r\n\r\nOtherwise, `split(&quot;:&quot;)` defaults to `split(&quot;:&quot;, 0)`, and the difference is:\r\n\r\nhttps://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html#split(java.lang.String,int)\r\n\r\n\r\n * If the limit is zero then the pattern will be applied as many times as possible, the array can have any length, **and trailing empty strings will be discarded.**\r\n * If the limit is negative then the pattern will be applied as many times as possible and the array can have any length.\r\n\r\nIn case of `&quot;:&quot;` being splitted, it would result in `{&quot;&quot; , &quot;&quot;}`, but empty traling spaces will be discarded, so it will return an empty array.","title":"Java, splitting string into array","body":"<p>This link is helpful:</p>\n<p><a href=\"https://konigsberg.blogspot.com/2009/11/final-thoughts-java-puzzler-splitting.html\" rel=\"nofollow noreferrer\">https://konigsberg.blogspot.com/2009/11/final-thoughts-java-puzzler-splitting.html</a></p>\n<p>Basically, it is for perl compatibility.</p>\n<p>You can use <code>split(&quot;:&quot;, -1)</code> here if you don't want that behavior.</p>\n<p>Otherwise, <code>split(&quot;:&quot;)</code> defaults to <code>split(&quot;:&quot;, 0)</code>, and the difference is:</p>\n<p><a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html#split(java.lang.String,int)\" rel=\"nofollow noreferrer\">https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html#split(java.lang.String,int)</a></p>\n<ul>\n<li>If the limit is zero then the pattern will be applied as many times as possible, the array can have any length, <strong>and trailing empty strings will be discarded.</strong></li>\n<li>If the limit is negative then the pattern will be applied as many times as possible and the array can have any length.</li>\n</ul>\n<p>In case of <code>&quot;:&quot;</code> being splitted, it would result in <code>{&quot;&quot; , &quot;&quot;}</code>, but empty traling spaces will be discarded, so it will return an empty array.</p>\n"},{"tags":[],"owner":{"account_id":4741976,"reputation":5385,"user_id":3834413,"display_name":"Eugene"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1645318034,"creation_date":1645317325,"answer_id":71190409,"question_id":71189731,"body_markdown":"See the [doc comment in source code][1] or [documentation][2] for `public String[] split(String regex, int limit)` method.\r\n\r\n**Case 1:**\r\n\r\n    String one = &quot;&quot;;\r\n    String[] devided1 = one.trim().split(&quot;:&quot;);\r\n\r\nThe resulting array will have 1 element = original string `String[1] [&quot;&quot;]`, because expresion `&quot;:&quot;` was not match any part of the input string.\r\n\r\nAccording to documentation:\r\n&gt; If the\r\n&gt;      * expression does not match any part of the input then the resulting array\r\n&gt;      * has just one element, namely this string.\r\n\r\n**Case 2:**\r\n\r\n    String two = &quot;:&quot;;\r\n    String[] devided2 = two.trim().split(&quot;:&quot;);\r\n\r\nThe `split(&quot;:&quot;)` has default `limit = 0`. It means that from the resulting array **trailing empty strings** will be removed. So method splits `&quot;:&quot;` string to array with two empty strings and then remove them and as result we get empty array.&lt;br&gt;\r\n\r\nAccording to documentation:\r\n\r\n&gt; If limit is zero then the pattern will be applied as many times as\r\n&gt; possible, the array can have any length, and trailing empty strings\r\n&gt; will be discarded.\r\n\r\n**Case 3:**\r\n\r\n    String two = &quot;:&quot;;\r\n    String[] devided2 = two.trim().split(&quot;:&quot;, -1);\r\n\r\nWe will get an array with two empty strings.&lt;br&gt;\r\n\r\nAccording to documentation:\r\n\r\n&gt; If limit is non-positive then the pattern will be applied as many\r\n&gt; times as possible and the array can have any length\r\n\r\n**Case 4:**\r\n\r\n    String two = &quot;::&quot;;\r\n    String[] devided2 = two.trim().split(&quot;:&quot;);\r\n\r\nWe will get empty array. It is the same like **Case 2**.\r\n\r\n**Case 5:**\r\n\r\n    String one = &quot;: :&quot;;\r\n    String[] devided1 = one.trim().split(&quot;:&quot;);\r\n\r\nThe method will split string to three array elements `[&quot;&quot;, &quot; &quot;, &quot;&quot;]` and then remove empty strings from the end of array, because `limit = 0`. We will get `String[2] [&quot;&quot;, &quot; &quot;]`.&lt;br&gt;\r\n\r\nAccording to documentation:\r\n&gt; If limit is zero then the pattern will be applied as many times as\r\n&gt; possible, the array can have any length, and trailing empty strings\r\n&gt; will be discarded.\r\n\r\n\r\n  [1]: https://github.com/openjdk-mirror/jdk7u-jdk/blob/master/src/share/classes/java/lang/String.java\r\n  [2]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html#split(java.lang.String,int)","title":"Java, splitting string into array","body":"<p>See the <a href=\"https://github.com/openjdk-mirror/jdk7u-jdk/blob/master/src/share/classes/java/lang/String.java\" rel=\"nofollow noreferrer\">doc comment in source code</a> or <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html#split(java.lang.String,int)\" rel=\"nofollow noreferrer\">documentation</a> for <code>public String[] split(String regex, int limit)</code> method.</p>\n<p><strong>Case 1:</strong></p>\n<pre><code>String one = &quot;&quot;;\nString[] devided1 = one.trim().split(&quot;:&quot;);\n</code></pre>\n<p>The resulting array will have 1 element = original string <code>String[1] [&quot;&quot;]</code>, because expresion <code>&quot;:&quot;</code> was not match any part of the input string.</p>\n<p>According to documentation:</p>\n<blockquote>\n<p>If the\n* expression does not match any part of the input then the resulting array\n* has just one element, namely this string.</p>\n</blockquote>\n<p><strong>Case 2:</strong></p>\n<pre><code>String two = &quot;:&quot;;\nString[] devided2 = two.trim().split(&quot;:&quot;);\n</code></pre>\n<p>The <code>split(&quot;:&quot;)</code> has default <code>limit = 0</code>. It means that from the resulting array <strong>trailing empty strings</strong> will be removed. So method splits <code>&quot;:&quot;</code> string to array with two empty strings and then remove them and as result we get empty array.<br></p>\n<p>According to documentation:</p>\n<blockquote>\n<p>If limit is zero then the pattern will be applied as many times as\npossible, the array can have any length, and trailing empty strings\nwill be discarded.</p>\n</blockquote>\n<p><strong>Case 3:</strong></p>\n<pre><code>String two = &quot;:&quot;;\nString[] devided2 = two.trim().split(&quot;:&quot;, -1);\n</code></pre>\n<p>We will get an array with two empty strings.<br></p>\n<p>According to documentation:</p>\n<blockquote>\n<p>If limit is non-positive then the pattern will be applied as many\ntimes as possible and the array can have any length</p>\n</blockquote>\n<p><strong>Case 4:</strong></p>\n<pre><code>String two = &quot;::&quot;;\nString[] devided2 = two.trim().split(&quot;:&quot;);\n</code></pre>\n<p>We will get empty array. It is the same like <strong>Case 2</strong>.</p>\n<p><strong>Case 5:</strong></p>\n<pre><code>String one = &quot;: :&quot;;\nString[] devided1 = one.trim().split(&quot;:&quot;);\n</code></pre>\n<p>The method will split string to three array elements <code>[&quot;&quot;, &quot; &quot;, &quot;&quot;]</code> and then remove empty strings from the end of array, because <code>limit = 0</code>. We will get <code>String[2] [&quot;&quot;, &quot; &quot;]</code>.<br></p>\n<p>According to documentation:</p>\n<blockquote>\n<p>If limit is zero then the pattern will be applied as many times as\npossible, the array can have any length, and trailing empty strings\nwill be discarded.</p>\n</blockquote>\n"}],"owner":{"account_id":24314151,"reputation":13,"user_id":18255644,"display_name":"Ivan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71190409,"answer_count":2,"score":1,"last_activity_date":1645318034,"creation_date":1645309560,"question_id":71189731,"body_markdown":"I am trying to split a string into string array. And I have stumbled to something strange to me. I don&#39;t understand why it works like this.\r\n      \r\n\r\n\r\n\r\n       String one, two;\r\n\t\t\r\n\t\tone = &quot;&quot;;\r\n\t\ttwo = &quot;:&quot;;\r\n\t\t\r\n\t\t\r\n\t\tString[] devided1 = one.trim().split(&quot;:&quot;);\r\n\t\tString[] devided2 = two.trim().split(&quot;:&quot;);\r\n\t\t\r\n\t\tSystem.out.println(&quot;size: &quot;+ devided1.length);\r\n\t\tSystem.out.println(&quot;size: &quot;+ devided2.length);\r\n\t\t\r\n\r\nI get output:\r\n\r\n \r\n       size: 1\r\n       size: 0\r\nWhy is empty string giving me size of one, but string that only has the delimiter gives my array size of 0?\r\nI saw more confusing things like: that size of &quot;::&quot; is 0, but size of &quot;: :&quot; is 2, not 3.\r\nCan someone please explain it to me?","title":"Java, splitting string into array","body":"<p>I am trying to split a string into string array. And I have stumbled to something strange to me. I don't understand why it works like this.</p>\n<pre><code>   String one, two;\n    \n    one = &quot;&quot;;\n    two = &quot;:&quot;;\n    \n    \n    String[] devided1 = one.trim().split(&quot;:&quot;);\n    String[] devided2 = two.trim().split(&quot;:&quot;);\n    \n    System.out.println(&quot;size: &quot;+ devided1.length);\n    System.out.println(&quot;size: &quot;+ devided2.length);\n    \n</code></pre>\n<p>I get output:</p>\n<pre><code>   size: 1\n   size: 0\n</code></pre>\n<p>Why is empty string giving me size of one, but string that only has the delimiter gives my array size of 0?\nI saw more confusing things like: that size of &quot;::&quot; is 0, but size of &quot;: :&quot; is 2, not 3.\nCan someone please explain it to me?</p>\n"},{"tags":["java","algorithm"],"comments":[{"owner":{"account_id":5896458,"reputation":5083,"user_id":4641455,"display_name":"JFPicard"},"score":3,"creation_date":1428957122,"post_id":29614492,"comment_id":47374443,"body_markdown":"Is there any problems with your code ? Some error, something unexpected ?","body":"Is there any problems with your code ? Some error, something unexpected ?"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":2,"creation_date":1428957393,"post_id":29614492,"comment_id":47374569,"body_markdown":"Your code formation is awful. Please take more care next time.","body":"Your code formation is awful. Please take more care next time."},{"owner":{"account_id":5664006,"reputation":85,"user_id":4480711,"accept_rate":71,"display_name":"chmod"},"score":0,"creation_date":1428957426,"post_id":29614492,"comment_id":47374590,"body_markdown":"Thanks for commenting. Added more detail. Basically Im trying to calculate the correct average when the buffer gets overwritten . Refer to comments in the code!","body":"Thanks for commenting. Added more detail. Basically Im trying to calculate the correct average when the buffer gets overwritten . Refer to comments in the code!"},{"owner":{"account_id":1585668,"reputation":554,"user_id":1470091,"accept_rate":78,"display_name":"SaurabhJinturkar"},"score":0,"creation_date":1428958400,"post_id":29614492,"comment_id":47375090,"body_markdown":"CircularBuffer [tail=0, sum=1, buffer=[1, 0, 0], head=1]\nCircularBuffer [tail=0, sum=3, buffer=[1, 2, 0], head=2]\nCircularBuffer [tail=0, sum=6, buffer=[1, 2, 3], head=0]\nCircularBuffer [tail=0, sum=10, buffer=[4, 2, 3], head=1]\nAvg5.0                                                                                                                              Running your program clearly shows your sum is incorrect. And your count of elements is incorrect.","body":"CircularBuffer [tail=0, sum=1, buffer=[1, 0, 0], head=1] CircularBuffer [tail=0, sum=3, buffer=[1, 2, 0], head=2] CircularBuffer [tail=0, sum=6, buffer=[1, 2, 3], head=0] CircularBuffer [tail=0, sum=10, buffer=[4, 2, 3], head=1] Avg5.0                                                                                                                              Running your program clearly shows your sum is incorrect. And your count of elements is incorrect."}],"answers":[{"tags":[],"owner":{"account_id":5896458,"reputation":5083,"user_id":4641455,"display_name":"JFPicard"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1428957509,"creation_date":1428957509,"answer_id":29614644,"question_id":29614492,"body_markdown":"Why can you just separate the average code vs the add code ?\r\n\r\nThen you just have to traverse the array, sum it and divide it by the length.","title":"Algorithm -- Finding the average of numbers in a circular buffer?","body":"<p>Why can you just separate the average code vs the add code ?</p>\n\n<p>Then you just have to traverse the array, sum it and divide it by the length.</p>\n"},{"tags":[],"owner":{"account_id":985197,"reputation":12521,"user_id":1003886,"accept_rate":66,"display_name":"kajacx"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1428958113,"creation_date":1428958113,"answer_id":29614816,"question_id":29614492,"body_markdown":"The `addNumber` method seems not to be working properly.\r\n\r\nFirst, instead of simple `head == tail -1` you also need to consider case where `head==length-1 &amp;&amp; tail==0` if you want to test if your buffer is full.\r\n\r\nSecond, if you buffer is full, you need to increase both head and tail. And you do that by `head = (head+1)%length` instead for simple `head++`, because `head` could have been `length-1`. Same for tail. Also, you forgot to add the number to the sum in this case, as well as actually insert the number into the backing array.\r\n\r\n","title":"Algorithm -- Finding the average of numbers in a circular buffer?","body":"<p>The <code>addNumber</code> method seems not to be working properly.</p>\n\n<p>First, instead of simple <code>head == tail -1</code> you also need to consider case where <code>head==length-1 &amp;&amp; tail==0</code> if you want to test if your buffer is full.</p>\n\n<p>Second, if you buffer is full, you need to increase both head and tail. And you do that by <code>head = (head+1)%length</code> instead for simple <code>head++</code>, because <code>head</code> could have been <code>length-1</code>. Same for tail. Also, you forgot to add the number to the sum in this case, as well as actually insert the number into the backing array.</p>\n"},{"tags":[],"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1428958818,"creation_date":1428958818,"answer_id":29615003,"question_id":29614492,"body_markdown":"I modified your code somewhat.  Here&#39;s the main method, based on what you typed in your question.\r\n\r\n\tpublic static void main(String[] args) {\r\n\r\n\t\tCircularBuffer buf = new CircularBuffer(4);\r\n\t\tbuf.addNumber(1);\r\n\t\tbuf.addNumber(2);\r\n\t\tbuf.addNumber(7);\r\n\t\tbuf.addNumber(3);\r\n\t\tSystem.out.println(&quot;Avg &quot; + buf.avg());\r\n\t\tbuf.addNumber(5);\r\n\t\tSystem.out.println(&quot;Avg &quot; + buf.avg());\r\n\t}\r\n\r\nAnd here&#39;s the result when I ran the code.\r\n\r\n    Avg 3.25\r\n    Avg 4.25\r\n\r\nHere&#39;s what I changed to get your code to first compile, then execute correctly.\r\n\r\n1. I added a class declaration, and made all the variables class variables.\r\n\r\n2. The head variable wasn&#39;t needed.  It&#39;s always the zero position.\r\n\r\n2. I added a boolean to let me know when a value in the circular buffer was overwritten.\r\n\r\n3. I initialized the sum and boolean variable bufferFull in the constructor.\r\n\r\n4. I rewrote the addNumber method so that the sum would always contain the correct value.\r\n\r\n6. Since sum always has the correct value, the avg method just calculates the average.\r\n\r\n7. I formatted the Java code so it would be easier for others to read.\r\n\r\nHere&#39;s the revised code.\r\n\r\n    package com.ggl.testing;\r\n    \r\n    public class CircularBuffer {\r\n    \r\n    \tprivate boolean bufferFull;\r\n    \r\n    \tprivate int tail;\r\n    \tprivate int sum;\r\n    \r\n    \tprivate int[] buffer;\r\n    \r\n    \tpublic CircularBuffer(int n) {\r\n    \t\tthis.bufferFull = false;\r\n    \t\tthis.tail = 0;\r\n    \t\tthis.sum = 0;\r\n    \t\tthis.buffer = new int[n];\r\n    \t}\r\n    \r\n    \tpublic void addNumber(int number) {\r\n    \r\n    \t\tsum += number;\r\n    \t\tif (bufferFull) {\r\n    \t\t\tsum -= buffer[tail];\r\n    \t\t}\r\n    \r\n    \t\tbuffer[tail] = number;\r\n    \t\ttail++;\r\n    \r\n    \t\tif (tail &gt;= buffer.length) {\r\n    \t\t\ttail = tail % buffer.length;\r\n    \t\t\tbufferFull = true;\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tpublic double avg() {\r\n    \r\n    \t\tint length = tail;\r\n    \t\tif (bufferFull) {\r\n    \t\t\tlength = buffer.length;\r\n    \t\t}\r\n    \t\treturn (double) sum / length;\r\n    \r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \r\n    \t\tCircularBuffer buf = new CircularBuffer(4);\r\n    \t\tbuf.addNumber(1);\r\n    \t\tbuf.addNumber(2);\r\n    \t\tbuf.addNumber(7);\r\n    \t\tbuf.addNumber(3);\r\n    \t\tSystem.out.println(&quot;Avg &quot; + buf.avg());\r\n    \t\tbuf.addNumber(5);\r\n    \t\tSystem.out.println(&quot;Avg &quot; + buf.avg());\r\n    \t}\r\n    } \r\n\r\nI hope you understand what I did and can apply these principles to your next assignment.","title":"Algorithm -- Finding the average of numbers in a circular buffer?","body":"<p>I modified your code somewhat.  Here's the main method, based on what you typed in your question.</p>\n\n<pre><code>public static void main(String[] args) {\n\n    CircularBuffer buf = new CircularBuffer(4);\n    buf.addNumber(1);\n    buf.addNumber(2);\n    buf.addNumber(7);\n    buf.addNumber(3);\n    System.out.println(\"Avg \" + buf.avg());\n    buf.addNumber(5);\n    System.out.println(\"Avg \" + buf.avg());\n}\n</code></pre>\n\n<p>And here's the result when I ran the code.</p>\n\n<pre><code>Avg 3.25\nAvg 4.25\n</code></pre>\n\n<p>Here's what I changed to get your code to first compile, then execute correctly.</p>\n\n<ol>\n<li><p>I added a class declaration, and made all the variables class variables.</p></li>\n<li><p>The head variable wasn't needed.  It's always the zero position.</p></li>\n<li><p>I added a boolean to let me know when a value in the circular buffer was overwritten.</p></li>\n<li><p>I initialized the sum and boolean variable bufferFull in the constructor.</p></li>\n<li><p>I rewrote the addNumber method so that the sum would always contain the correct value.</p></li>\n<li><p>Since sum always has the correct value, the avg method just calculates the average.</p></li>\n<li><p>I formatted the Java code so it would be easier for others to read.</p></li>\n</ol>\n\n<p>Here's the revised code.</p>\n\n<pre><code>package com.ggl.testing;\n\npublic class CircularBuffer {\n\n    private boolean bufferFull;\n\n    private int tail;\n    private int sum;\n\n    private int[] buffer;\n\n    public CircularBuffer(int n) {\n        this.bufferFull = false;\n        this.tail = 0;\n        this.sum = 0;\n        this.buffer = new int[n];\n    }\n\n    public void addNumber(int number) {\n\n        sum += number;\n        if (bufferFull) {\n            sum -= buffer[tail];\n        }\n\n        buffer[tail] = number;\n        tail++;\n\n        if (tail &gt;= buffer.length) {\n            tail = tail % buffer.length;\n            bufferFull = true;\n        }\n    }\n\n    public double avg() {\n\n        int length = tail;\n        if (bufferFull) {\n            length = buffer.length;\n        }\n        return (double) sum / length;\n\n    }\n\n    public static void main(String[] args) {\n\n        CircularBuffer buf = new CircularBuffer(4);\n        buf.addNumber(1);\n        buf.addNumber(2);\n        buf.addNumber(7);\n        buf.addNumber(3);\n        System.out.println(\"Avg \" + buf.avg());\n        buf.addNumber(5);\n        System.out.println(\"Avg \" + buf.avg());\n    }\n} \n</code></pre>\n\n<p>I hope you understand what I did and can apply these principles to your next assignment.</p>\n"},{"tags":[],"owner":{"account_id":5345776,"reputation":169,"user_id":4261385,"display_name":"Glissinda"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1428959684,"creation_date":1428958892,"answer_id":29615027,"question_id":29614492,"body_markdown":"You don&#39;t really need the tail, you only need to know if you reached the length of the buffer, so the code looks something like this:\r\n\r\n    class CircularBuffer {\r\n    \r\n        int tail = 0;\r\n        int head = 0;\r\n        int[] buffer;\r\n        int sum = 0;\r\n    \r\n        public CircularBuffer(int n) {\r\n            buffer = new int[n];\r\n        }\r\n    \r\n        void addNumber(int number) {\r\n            sum -= buffer[head];\r\n            sum += number;\r\n            buffer[head++] = number;\r\n            head = head % buffer.length;\r\n            if (tail &lt;= buffer.length) {\r\n                tail++;\r\n            }\r\n        }\r\n    \r\n        double avg() {\r\n            if (head == tail) {\r\n                return (double) sum / (double) head;\r\n            } else {\r\n                return (double) sum / (double) buffer.length;\r\n            }\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n    \r\n            CircularBuffer buf = new CircularBuffer(3);\r\n            buf.addNumber(1);\r\n            buf.addNumber(2);\r\n            buf.addNumber(3);\r\n            buf.addNumber(4);\r\n            System.out.println(&quot;Avg&quot; + buf.avg());\r\n        }\r\n    }\r\n\r\nSince `buffer = new int[n];` fills the buffer with zeros, you don&#39;t need any if/else in method addnumber, you just substract the previous value and add the current. Hope it&#39;s clear.","title":"Algorithm -- Finding the average of numbers in a circular buffer?","body":"<p>You don't really need the tail, you only need to know if you reached the length of the buffer, so the code looks something like this:</p>\n\n<pre><code>class CircularBuffer {\n\n    int tail = 0;\n    int head = 0;\n    int[] buffer;\n    int sum = 0;\n\n    public CircularBuffer(int n) {\n        buffer = new int[n];\n    }\n\n    void addNumber(int number) {\n        sum -= buffer[head];\n        sum += number;\n        buffer[head++] = number;\n        head = head % buffer.length;\n        if (tail &lt;= buffer.length) {\n            tail++;\n        }\n    }\n\n    double avg() {\n        if (head == tail) {\n            return (double) sum / (double) head;\n        } else {\n            return (double) sum / (double) buffer.length;\n        }\n    }\n\n    public static void main(String[] args) {\n\n        CircularBuffer buf = new CircularBuffer(3);\n        buf.addNumber(1);\n        buf.addNumber(2);\n        buf.addNumber(3);\n        buf.addNumber(4);\n        System.out.println(\"Avg\" + buf.avg());\n    }\n}\n</code></pre>\n\n<p>Since <code>buffer = new int[n];</code> fills the buffer with zeros, you don't need any if/else in method addnumber, you just substract the previous value and add the current. Hope it's clear.</p>\n"},{"tags":[],"owner":{"account_id":2152779,"reputation":1425,"user_id":1908670,"accept_rate":29,"display_name":"willSapgreen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645317312,"creation_date":1645317312,"answer_id":71190407,"question_id":29614492,"body_markdown":"Here is my implementation of the circular buffer which calculates sample mean and sample standard deviation when putting a new value into the buffer and getting the oldest value from the buffer.\r\n\r\nI compare my results with ones from numpy.\r\n\r\nAlthough this is implemented in Python, I hope this can help you on implementing the Java version.\r\n\r\nPlease let me know if any questions or suggestions.\r\n\r\n    import numpy as np\r\n    import math\r\n\r\n    # Circular Buffer\r\n    # Ref: https://embeddedartistry.com/blog/2017/05/17/creating-a-circular-buffer-in-c-and-c/\r\n\r\n    # Standard deviation calculated from sum, sum of squares.\r\n    # Ref: https://stats.stackexchange.com/questions/432256/how-would-i-calculate-the-standard-deviation-of-a-sample-given-the-sample-size\r\n\r\n    ###############################################################################\r\n\r\n    class CircularBuffer:\r\n        def __init__(self, buffer_size):\r\n\r\n            if buffer_size &lt;= 0:\r\n                raise Exception(&#39;circular buffer : cannot initialize the circular buffer with zero or negative buffer size&#39;)\r\n\r\n            self.buffer_size = buffer_size\r\n            self.buffer = [0] * buffer_size\r\n            self.head = 0\r\n            self.tail = 0\r\n            self.reset()\r\n\r\n    ###############################################################################\r\n    def reset(self):\r\n        self.head = self.tail\r\n        self.full = False\r\n        self.sum = 0\r\n        self.sumsq = 0\r\n        self.mean = 0\r\n        self.stddev = 0\r\n\r\n    ###############################################################################\r\n    def is_empty(self):\r\n        return (not self.full and (self.head == self.tail))\r\n\r\n    ###############################################################################\r\n    def is_full(self):\r\n        return self.full\r\n\r\n    ###############################################################################\r\n    def capacity(self):\r\n        return self.buffer_size\r\n\r\n    ###############################################################################\r\n    # return the number of using elements in the circular buffer.\r\n    # Because this is a circular buffer, not every element in the buffer counts.\r\n    def size(self):\r\n        available_size = self.buffer_size\r\n        if not self.full:\r\n            if self.head &gt;= self.tail:\r\n                available_size = self.head - self.tail\r\n            else: # can happen if using get()\r\n                available_size = self.buffer_size + self.head - self.tail\r\n        return available_size\r\n\r\n    ###############################################################################\r\n    # put a new element at the head.\r\n    def put(self, item):\r\n        # store the status before putting a new element\r\n        replace_item = self.buffer[self.head]\r\n        pre_head = self.head\r\n        is_already_full = self.full\r\n\r\n        # put a new element and update the status.\r\n        self.buffer[self.head] = item\r\n        if is_already_full:\r\n            self.tail = (self.tail +1) % self.buffer_size\r\n        self.head = (self.head + 1) % self.buffer_size\r\n        self.full = (self.head == self.tail)\r\n\r\n        # calculate sum, sumsq, mean, and stddev.\r\n        stddev_square = 0\r\n        current_size = self.size()\r\n        if is_already_full:\r\n            self.sum = self.sum - replace_item + self.buffer[pre_head]\r\n            self.sumsq = self.sumsq - replace_item*replace_item + \\\r\n                self.buffer[pre_head] * self.buffer[pre_head]\r\n        else:\r\n            self.sum += item\r\n            self.sumsq += (item*item)\r\n\r\n        self.mean = self.sum / current_size\r\n        if current_size &gt; 1:\r\n            denominator_one = 1 / (current_size - 1)\r\n            denominator_two = 1 / (current_size*current_size - current_size)\r\n            stddev_square = denominator_one * self.sumsq - denominator_two * self.sum * self.sum\r\n\r\n        # handle rounding error.\r\n        stddev_square = self.__verify_stddev_square(stddev_square)\r\n        self.stddev = math.sqrt(stddev_square)\r\n\r\n    ###############################################################################\r\n    # get the element at the tail\r\n    def get(self):\r\n        if self.is_empty():\r\n            return None\r\n\r\n        # get the element at the tail\r\n        item = self.buffer[self.tail]\r\n        self.full = False\r\n        self.tail = (self.tail + 1) % self.buffer_size\r\n\r\n        # update sum, sumsq, mean, and stddev\r\n        stddev_square = 0\r\n        current_size = self.size()\r\n        if current_size == 0:\r\n            self.reset()\r\n        else:\r\n            self.sum -= item\r\n            self.sumsq -= (item * item)\r\n            self.mean = self.sum / current_size\r\n            if current_size &gt; 1:\r\n                denominator_one = 1 / (current_size - 1)\r\n                denominator_two = 1 / (current_size*current_size - current_size)\r\n                stddev_square = denominator_one * self.sumsq - denominator_two * self.sum * self.sum\r\n\r\n            stddev_square = self.__verify_stddev_square(stddev_square)\r\n            self.stddev = math.sqrt(stddev_square)\r\n\r\n        return item\r\n\r\n    ###############################################################################\r\n    # handle the rounding error.\r\n    def __verify_stddev_square(self, stddev_square):\r\n        if (stddev_square) &lt; 0.0:\r\n            stddev_square = 0\r\n            current_size = self.size()\r\n            for count in range(1,current_size+1):\r\n                idx = (self.head - count) % current_size\r\n                stddev_square += ((self.buffer[idx] - self.mean) * (self.buffer[idx] - self.mean))\r\n            stddev_square /= (self.size() - 1)\r\n        return stddev_square\r\n\r\n\r\n    ###############################################################################\r\n\r\n    def test_circular_buffer():\r\n\r\n        print(&#39;===== Test 00 =====&#39;)\r\n\r\n        cb = CircularBuffer(10)\r\n        for i in range(6):\r\n            cb.put(i)\r\n        numpyArray = np.array([0,1,2,3,4,5])\r\n\r\n        print(&#39;    cb full: {} vs False&#39;.format(cb.is_full()))\r\n        print(&#39;    cb size: {} vs. 6&#39;.format(cb.size()))\r\n        print(&#39;    cb mean: {} vs {}&#39;.format(cb.mean, np.mean(numpyArray)))\r\n        print(&#39;    cb std: {} vs {}&#39;.format(cb.stddev, np.std(numpyArray, ddof=1)))\r\n        # set ddof=1 for unbiased because we are working on sample, not population\r\n\r\n        print(&#39;===== Test 01 =====&#39;)\r\n\r\n        val = cb.get()\r\n        numpyArray = np.array([1,2,3,4,5])\r\n        print(&#39;    cb full: {} vs False&#39;.format(cb.is_full()))\r\n        print(&#39;    cb size: {} vs. 5&#39;.format(cb.size()))\r\n        print(&#39;    cb mean: {} vs {}&#39;.format(cb.mean, np.mean(numpyArray)))\r\n        print(&#39;    cb std: {} vs {}&#39;.format(cb.stddev, np.std(numpyArray, ddof=1)))\r\n\r\n        print(&#39;===== Test 02 =====&#39;)\r\n\r\n        cb.reset()\r\n        for i in range(10):\r\n            cb.put(i)\r\n        numpyArray = np.array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])\r\n\r\n        print(&#39;    cb full: {} vs True&#39;.format(cb.is_full()))\r\n        print(&#39;    cb size: {} vs. 10&#39;.format(cb.size()))\r\n        print(&#39;    cb mean: {} vs {}&#39;.format(cb.mean, np.mean(numpyArray)))\r\n        print(&#39;    cb std: {} vs {}&#39;.format(cb.stddev, np.std(numpyArray, ddof=1)))\r\n\r\n        print(&#39;===== Test 03 =====&#39;)\r\n\r\n        cb = CircularBuffer(6)\r\n        cb.put(1)\r\n        cb.put(10)\r\n        cb.put(82)\r\n        cb.put(29)\r\n        cb.put(33131)\r\n\r\n        numpyArray = np.array([1, 10, 82, 29, 33131])\r\n        print(&#39;    cb full: {} vs False&#39;.format(cb.is_full()))\r\n        print(&#39;    cb size: {} vs. 5&#39;.format(cb.size()))\r\n        print(&#39;    cb mean: {} vs {}&#39;.format(cb.mean, np.mean(numpyArray)))\r\n        print(&#39;    cb std: {} vs {}&#39;.format(cb.stddev, np.std(numpyArray, ddof=1)))\r\n\r\n        print(&#39;===== Test 04 =====&#39;)\r\n\r\n        cb.put(64)\r\n        numpyArray = np.array([1, 10, 82, 29, 33131, 64])\r\n\r\n        print(&#39;    cb full: {} vs True&#39;.format(cb.is_full()))\r\n        print(&#39;    cb size: {} vs. 6&#39;.format(cb.size()))\r\n        print(&#39;    cb mean: {} vs {}&#39;.format(cb.mean, np.mean(numpyArray)))\r\n        print(&#39;    cb std: {} vs {}&#39;.format(cb.stddev, np.std(numpyArray, ddof=1)))\r\n\r\n        print(&#39;===== Test 05 =====&#39;)\r\n\r\n        val = cb.get()\r\n        val = cb.get()\r\n        val = cb.get()\r\n        val = cb.get()\r\n        numpyArray = np.array([33131, 64])\r\n\r\n        print(&#39;    cb full: {} vs False&#39;.format(cb.is_full()))\r\n        print(&#39;    cb size: {} vs. 2&#39;.format(cb.size()))\r\n        print(&#39;    cb mean: {} vs {}&#39;.format(cb.mean, np.mean(numpyArray)))\r\n        print(&#39;    cb std: {} vs {}&#39;.format(cb.stddev, np.std(numpyArray, ddof=1)))\r\n\r\n        print(&#39;===== Test 06 =====&#39;)\r\n\r\n        cb = CircularBuffer(2)\r\n        cb.put(103)\r\n        cb.put(12)\r\n        val = cb.get()\r\n        val = cb.get()\r\n\r\n        print(&#39;    cb full: {} vs False&#39;.format(cb.is_full()))\r\n        print(&#39;    cb size: {} vs. 0&#39;.format(cb.size()))\r\n\r\n        print(&#39;===== Test 07 =====&#39;)\r\n\r\n        cb = CircularBuffer(2)\r\n        cb.put(103)\r\n        cb.put(12)\r\n        val = cb.get()\r\n        val = cb.get()\r\n        cb.put(11)\r\n\r\n        print(&#39;    cb full: {} vs False&#39;.format(cb.is_full()))\r\n        print(&#39;    cb size: {} vs. 1&#39;.format(cb.size()))\r\n        print(&#39;    cb mean: {} vs 11&#39;.format(cb.mean))\r\n        print(&#39;    cb std: {} vs 0&#39;.format(cb.stddev))\r\n\r\n        print(&#39;===== Test 08 =====&#39;)\r\n\r\n        try:\r\n            cb = CircularBuffer(-1)\r\n        except Exception as e:\r\n            print(&#39;    Catch the exception &quot;{}&quot; as expected&#39;.format(e))\r\n\r\n    ###############################################################################\r\n\r\n    if __name__ == &#39;__main__&#39;:\r\n        test_circular_buffer()\r\n        print(&#39;The End&#39;)\r\n","title":"Algorithm -- Finding the average of numbers in a circular buffer?","body":"<p>Here is my implementation of the circular buffer which calculates sample mean and sample standard deviation when putting a new value into the buffer and getting the oldest value from the buffer.</p>\n<p>I compare my results with ones from numpy.</p>\n<p>Although this is implemented in Python, I hope this can help you on implementing the Java version.</p>\n<p>Please let me know if any questions or suggestions.</p>\n<pre><code>import numpy as np\nimport math\n\n# Circular Buffer\n# Ref: https://embeddedartistry.com/blog/2017/05/17/creating-a-circular-buffer-in-c-and-c/\n\n# Standard deviation calculated from sum, sum of squares.\n# Ref: https://stats.stackexchange.com/questions/432256/how-would-i-calculate-the-standard-deviation-of-a-sample-given-the-sample-size\n\n###############################################################################\n\nclass CircularBuffer:\n    def __init__(self, buffer_size):\n\n        if buffer_size &lt;= 0:\n            raise Exception('circular buffer : cannot initialize the circular buffer with zero or negative buffer size')\n\n        self.buffer_size = buffer_size\n        self.buffer = [0] * buffer_size\n        self.head = 0\n        self.tail = 0\n        self.reset()\n\n###############################################################################\ndef reset(self):\n    self.head = self.tail\n    self.full = False\n    self.sum = 0\n    self.sumsq = 0\n    self.mean = 0\n    self.stddev = 0\n\n###############################################################################\ndef is_empty(self):\n    return (not self.full and (self.head == self.tail))\n\n###############################################################################\ndef is_full(self):\n    return self.full\n\n###############################################################################\ndef capacity(self):\n    return self.buffer_size\n\n###############################################################################\n# return the number of using elements in the circular buffer.\n# Because this is a circular buffer, not every element in the buffer counts.\ndef size(self):\n    available_size = self.buffer_size\n    if not self.full:\n        if self.head &gt;= self.tail:\n            available_size = self.head - self.tail\n        else: # can happen if using get()\n            available_size = self.buffer_size + self.head - self.tail\n    return available_size\n\n###############################################################################\n# put a new element at the head.\ndef put(self, item):\n    # store the status before putting a new element\n    replace_item = self.buffer[self.head]\n    pre_head = self.head\n    is_already_full = self.full\n\n    # put a new element and update the status.\n    self.buffer[self.head] = item\n    if is_already_full:\n        self.tail = (self.tail +1) % self.buffer_size\n    self.head = (self.head + 1) % self.buffer_size\n    self.full = (self.head == self.tail)\n\n    # calculate sum, sumsq, mean, and stddev.\n    stddev_square = 0\n    current_size = self.size()\n    if is_already_full:\n        self.sum = self.sum - replace_item + self.buffer[pre_head]\n        self.sumsq = self.sumsq - replace_item*replace_item + \\\n            self.buffer[pre_head] * self.buffer[pre_head]\n    else:\n        self.sum += item\n        self.sumsq += (item*item)\n\n    self.mean = self.sum / current_size\n    if current_size &gt; 1:\n        denominator_one = 1 / (current_size - 1)\n        denominator_two = 1 / (current_size*current_size - current_size)\n        stddev_square = denominator_one * self.sumsq - denominator_two * self.sum * self.sum\n\n    # handle rounding error.\n    stddev_square = self.__verify_stddev_square(stddev_square)\n    self.stddev = math.sqrt(stddev_square)\n\n###############################################################################\n# get the element at the tail\ndef get(self):\n    if self.is_empty():\n        return None\n\n    # get the element at the tail\n    item = self.buffer[self.tail]\n    self.full = False\n    self.tail = (self.tail + 1) % self.buffer_size\n\n    # update sum, sumsq, mean, and stddev\n    stddev_square = 0\n    current_size = self.size()\n    if current_size == 0:\n        self.reset()\n    else:\n        self.sum -= item\n        self.sumsq -= (item * item)\n        self.mean = self.sum / current_size\n        if current_size &gt; 1:\n            denominator_one = 1 / (current_size - 1)\n            denominator_two = 1 / (current_size*current_size - current_size)\n            stddev_square = denominator_one * self.sumsq - denominator_two * self.sum * self.sum\n\n        stddev_square = self.__verify_stddev_square(stddev_square)\n        self.stddev = math.sqrt(stddev_square)\n\n    return item\n\n###############################################################################\n# handle the rounding error.\ndef __verify_stddev_square(self, stddev_square):\n    if (stddev_square) &lt; 0.0:\n        stddev_square = 0\n        current_size = self.size()\n        for count in range(1,current_size+1):\n            idx = (self.head - count) % current_size\n            stddev_square += ((self.buffer[idx] - self.mean) * (self.buffer[idx] - self.mean))\n        stddev_square /= (self.size() - 1)\n    return stddev_square\n\n\n###############################################################################\n\ndef test_circular_buffer():\n\n    print('===== Test 00 =====')\n\n    cb = CircularBuffer(10)\n    for i in range(6):\n        cb.put(i)\n    numpyArray = np.array([0,1,2,3,4,5])\n\n    print('    cb full: {} vs False'.format(cb.is_full()))\n    print('    cb size: {} vs. 6'.format(cb.size()))\n    print('    cb mean: {} vs {}'.format(cb.mean, np.mean(numpyArray)))\n    print('    cb std: {} vs {}'.format(cb.stddev, np.std(numpyArray, ddof=1)))\n    # set ddof=1 for unbiased because we are working on sample, not population\n\n    print('===== Test 01 =====')\n\n    val = cb.get()\n    numpyArray = np.array([1,2,3,4,5])\n    print('    cb full: {} vs False'.format(cb.is_full()))\n    print('    cb size: {} vs. 5'.format(cb.size()))\n    print('    cb mean: {} vs {}'.format(cb.mean, np.mean(numpyArray)))\n    print('    cb std: {} vs {}'.format(cb.stddev, np.std(numpyArray, ddof=1)))\n\n    print('===== Test 02 =====')\n\n    cb.reset()\n    for i in range(10):\n        cb.put(i)\n    numpyArray = np.array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])\n\n    print('    cb full: {} vs True'.format(cb.is_full()))\n    print('    cb size: {} vs. 10'.format(cb.size()))\n    print('    cb mean: {} vs {}'.format(cb.mean, np.mean(numpyArray)))\n    print('    cb std: {} vs {}'.format(cb.stddev, np.std(numpyArray, ddof=1)))\n\n    print('===== Test 03 =====')\n\n    cb = CircularBuffer(6)\n    cb.put(1)\n    cb.put(10)\n    cb.put(82)\n    cb.put(29)\n    cb.put(33131)\n\n    numpyArray = np.array([1, 10, 82, 29, 33131])\n    print('    cb full: {} vs False'.format(cb.is_full()))\n    print('    cb size: {} vs. 5'.format(cb.size()))\n    print('    cb mean: {} vs {}'.format(cb.mean, np.mean(numpyArray)))\n    print('    cb std: {} vs {}'.format(cb.stddev, np.std(numpyArray, ddof=1)))\n\n    print('===== Test 04 =====')\n\n    cb.put(64)\n    numpyArray = np.array([1, 10, 82, 29, 33131, 64])\n\n    print('    cb full: {} vs True'.format(cb.is_full()))\n    print('    cb size: {} vs. 6'.format(cb.size()))\n    print('    cb mean: {} vs {}'.format(cb.mean, np.mean(numpyArray)))\n    print('    cb std: {} vs {}'.format(cb.stddev, np.std(numpyArray, ddof=1)))\n\n    print('===== Test 05 =====')\n\n    val = cb.get()\n    val = cb.get()\n    val = cb.get()\n    val = cb.get()\n    numpyArray = np.array([33131, 64])\n\n    print('    cb full: {} vs False'.format(cb.is_full()))\n    print('    cb size: {} vs. 2'.format(cb.size()))\n    print('    cb mean: {} vs {}'.format(cb.mean, np.mean(numpyArray)))\n    print('    cb std: {} vs {}'.format(cb.stddev, np.std(numpyArray, ddof=1)))\n\n    print('===== Test 06 =====')\n\n    cb = CircularBuffer(2)\n    cb.put(103)\n    cb.put(12)\n    val = cb.get()\n    val = cb.get()\n\n    print('    cb full: {} vs False'.format(cb.is_full()))\n    print('    cb size: {} vs. 0'.format(cb.size()))\n\n    print('===== Test 07 =====')\n\n    cb = CircularBuffer(2)\n    cb.put(103)\n    cb.put(12)\n    val = cb.get()\n    val = cb.get()\n    cb.put(11)\n\n    print('    cb full: {} vs False'.format(cb.is_full()))\n    print('    cb size: {} vs. 1'.format(cb.size()))\n    print('    cb mean: {} vs 11'.format(cb.mean))\n    print('    cb std: {} vs 0'.format(cb.stddev))\n\n    print('===== Test 08 =====')\n\n    try:\n        cb = CircularBuffer(-1)\n    except Exception as e:\n        print('    Catch the exception &quot;{}&quot; as expected'.format(e))\n\n###############################################################################\n\nif __name__ == '__main__':\n    test_circular_buffer()\n    print('The End')\n</code></pre>\n"}],"owner":{"account_id":5664006,"reputation":85,"user_id":4480711,"accept_rate":71,"display_name":"chmod"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1710,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":5,"score":0,"last_activity_date":1645317312,"creation_date":1428956963,"question_id":29614492,"body_markdown":"I&#39;m trying to think of an algorithm to keep track of the average of the numbers in a circular buffer, assuming numbers are overwritten as the buffer approaches capacity. \r\n\r\n    e.g. size = 4 \r\n    [1,2,7,3] =&gt; avg = 13/4 = 3.25\r\n    add(5)\r\n    [5,2,7,3] =&gt; avg = 17/4 = 4.25\r\n\r\n\r\nHere&#39;s my current approach. \r\n\r\n  \r\n\r\n    class CircularBuffer {\r\n\r\n        int[] buffer;  \r\n    \tint head;\r\n    \tint tail;\r\n    \tint sum;\r\n     \r\n        public CircularBuffer(int n) {   \r\n       \t    tail = 0;\r\n       \t    head = 0;\r\n       \t    buffer = new int[n];\r\n      \t}\r\n    \r\n       \tvoid addNumber(int number) {  \r\n            if (head == tail - 1) {\r\n       \t        sum -= buffer[tail - 1];\r\n            } else if (head != tail - 1) {\r\n                buffer[head++]= number;\r\n        \t    sum += number;\r\n            }\r\n        \t       \r\n            head = head % buffer.length;                 \r\n       \t}\r\n  \r\n       \tdouble avg() {  \t  \r\n            if (head &gt; vtail) {\r\n                return sum / (head - tail + 1);\r\n            } else { \r\n        \t    return sum / buffer.length;\r\n        \t}\r\n        }\r\n\r\n        public static void main(String[] args) {\r\n            CircularBuffer buf = new CircularBuffer(3);\r\n        \tbuf.addNumber(1);\r\n        \tbuf.addNumber(2);\r\n        \tbuf.addNumber(3);\r\n        \tbuf.addNumber(4);\r\n        \tSystem.out.println(&quot;Avg&quot;+ buf.avg());    \t\t  \t\t  \r\n        }\r\n\r\nWhat doesn&#39;t work: Currently returns 5 instead of 3.","title":"Algorithm -- Finding the average of numbers in a circular buffer?","body":"<p>I'm trying to think of an algorithm to keep track of the average of the numbers in a circular buffer, assuming numbers are overwritten as the buffer approaches capacity. </p>\n\n<pre><code>e.g. size = 4 \n[1,2,7,3] =&gt; avg = 13/4 = 3.25\nadd(5)\n[5,2,7,3] =&gt; avg = 17/4 = 4.25\n</code></pre>\n\n<p>Here's my current approach. </p>\n\n<pre><code>class CircularBuffer {\n\n    int[] buffer;  \n    int head;\n    int tail;\n    int sum;\n\n    public CircularBuffer(int n) {   \n        tail = 0;\n        head = 0;\n        buffer = new int[n];\n    }\n\n    void addNumber(int number) {  \n        if (head == tail - 1) {\n            sum -= buffer[tail - 1];\n        } else if (head != tail - 1) {\n            buffer[head++]= number;\n            sum += number;\n        }\n\n        head = head % buffer.length;                 \n    }\n\n    double avg() {        \n        if (head &gt; vtail) {\n            return sum / (head - tail + 1);\n        } else { \n            return sum / buffer.length;\n        }\n    }\n\n    public static void main(String[] args) {\n        CircularBuffer buf = new CircularBuffer(3);\n        buf.addNumber(1);\n        buf.addNumber(2);\n        buf.addNumber(3);\n        buf.addNumber(4);\n        System.out.println(\"Avg\"+ buf.avg());                     \n    }\n</code></pre>\n\n<p>What doesn't work: Currently returns 5 instead of 3.</p>\n"},{"tags":["java","postgresql","jpa","testing","quarkus"],"comments":[{"owner":{"account_id":15400934,"reputation":1598,"user_id":11110455,"display_name":"Felipe Windmoller"},"score":1,"creation_date":1645231973,"post_id":71178054,"comment_id":125824453,"body_markdown":"Are you running with `mvn quarkus:dev`? Looks like there&#39;s a typo at  &quot;quarkus.datasource..jdbc.url=jdbc:postgresql://localhost:5432/quarkus-social&quot;. There are two dots. If you don&#39;t specify the URL of the database, Quarkus uses test containers to start one database for you. There are tutorials on https://quarkus.io/guides/datasource. Here&#39;s one example project https://github.com/quarkusio/quarkus-quickstarts/tree/main/hibernate-orm-quickstart . About tests, you can use test containers or one in memory database as H2. You can find all this on Quarkus guides.","body":"Are you running with <code>mvn quarkus:dev</code>? Looks like there&#39;s a typo at  &quot;quarkus.datasource..jdbc.url=jdbc:postgresql://localhost:54&zwnj;&#8203;32/quarkus-social&quot;. There are two dots. If you don&#39;t specify the URL of the database, Quarkus uses test containers to start one database for you. There are tutorials on <a href=\"https://quarkus.io/guides/datasource\" rel=\"nofollow noreferrer\">quarkus.io/guides/datasource</a>. Here&#39;s one example project <a href=\"https://github.com/quarkusio/quarkus-quickstarts/tree/main/hibernate-orm-quickstart\" rel=\"nofollow noreferrer\">github.com/quarkusio/quarkus-quickstarts/tree/main/&hellip;</a> . About tests, you can use test containers or one in memory database as H2. You can find all this on Quarkus guides."},{"owner":{"account_id":8017300,"reputation":197,"user_id":6047129,"accept_rate":40,"display_name":"Felipe Hogrefe Bento"},"score":1,"creation_date":1645283303,"post_id":71178054,"comment_id":125832218,"body_markdown":"Yes, I&#39;m using mvn quarkus:dev, and the problem was the type, I&#39;m feeling kind dumb rn hehe, thank you","body":"Yes, I&#39;m using mvn quarkus:dev, and the problem was the type, I&#39;m feeling kind dumb rn hehe, thank you"}],"answers":[{"tags":[],"owner":{"account_id":15400934,"reputation":1598,"user_id":11110455,"display_name":"Felipe Windmoller"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1645317109,"creation_date":1645309827,"answer_id":71189755,"question_id":71178054,"body_markdown":"I guess the problem is a small typo.\r\n\r\nChange from\r\n\r\n```properties\r\nquarkus.datasource..jdbc.url=jdbc:postgresql://localhost:5432/quarkus-social\r\n```\r\n\r\nTo\r\n\r\n```properties\r\nquarkus.datasource.jdbc.url=jdbc:postgresql://localhost:5432/quarkus-social\r\n```\r\n\r\nIf you don&#39;t specify the URL of the database and run in `dev` or `test` mode, Quarkus uses test containers to start one database for you. \r\n\r\nThere are tutorials on quarkus.io/guides/datasource.\r\n\r\nAbout tests, you can use test containers or one in memory database as H2. You can find all this on Quarkus guides.","title":"Can&#39;t run my Quarkus app after adding JPA","body":"<p>I guess the problem is a small typo.</p>\n<p>Change from</p>\n<pre><code>quarkus.datasource..jdbc.url=jdbc:postgresql://localhost:5432/quarkus-social\n</code></pre>\n<p>To</p>\n<pre><code>quarkus.datasource.jdbc.url=jdbc:postgresql://localhost:5432/quarkus-social\n</code></pre>\n<p>If you don't specify the URL of the database and run in <code>dev</code> or <code>test</code> mode, Quarkus uses test containers to start one database for you.</p>\n<p>There are tutorials on quarkus.io/guides/datasource.</p>\n<p>About tests, you can use test containers or one in memory database as H2. You can find all this on Quarkus guides.</p>\n"}],"owner":{"account_id":8017300,"reputation":197,"user_id":6047129,"accept_rate":40,"display_name":"Felipe Hogrefe Bento"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1563,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71189755,"answer_count":1,"score":0,"last_activity_date":1645317109,"creation_date":1645207787,"question_id":71178054,"body_markdown":"I&#39;m trying to learn Quarkus, but after adding a JPA dependency the app doesn&#39;t initialize anymore.\r\n\r\nThis is the added dependency:\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n      &lt;artifactId&gt;quarkus-jdbc-postgresql&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\nFollowing are the errors I&#39;m having:\r\n\r\n    [org.tes.uti.TestcontainersConfiguration] (build-47) Attempted to read Testcontainers configuration file at file:/home/fhb/.testcontainers.properties but the file was not found. Exception message: FileNotFoundException: /home/fhb/.testcontainers.properties (No such file or directory)\r\n\r\nAfter that Quarkus keeps on and gets the following error:\r\n\r\n    Caused by: java.lang.RuntimeException: io.quarkus.runtime.configuration.ConfigurationException: Model classes are defined for the default persistence unit &lt;default&gt; but configured datasource &lt;default&gt; not found: the default EntityManagerFactory will not be created. To solve this, configure the default datasource. Refer to https://quarkus.io/guides/datasource for guidance.\r\n\r\nThis is my application.properties file:\r\n\r\n    quarkus.datasource.db-kind=postgresql\r\n    quarkus.datasource.username=postgres\r\n    quarkus.datasource.password=admin\r\n    quarkus.datasource..jdbc.url=jdbc:postgresql://localhost:5432/quarkus-social\r\n    quarkus.datasource.jdbc.max-size=16\r\n\r\nI think that Quarkus is trying to run tests and for that it needs the **.testcontainers.properties** file, which I&#39;ve never created. Anyways I don&#39;t want to create that file in /home/fhb/, so theres a way to specify that file location?\r\n\r\nBesides thatI would like to know if Testcontainers has something to do with unit tests, which I would like to add to my quarkus application.\r\n\r\nThanks in advance for your help.","title":"Can&#39;t run my Quarkus app after adding JPA","body":"<p>I'm trying to learn Quarkus, but after adding a JPA dependency the app doesn't initialize anymore.</p>\n<p>This is the added dependency:</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n  &lt;artifactId&gt;quarkus-jdbc-postgresql&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Following are the errors I'm having:</p>\n<pre><code>[org.tes.uti.TestcontainersConfiguration] (build-47) Attempted to read Testcontainers configuration file at file:/home/fhb/.testcontainers.properties but the file was not found. Exception message: FileNotFoundException: /home/fhb/.testcontainers.properties (No such file or directory)\n</code></pre>\n<p>After that Quarkus keeps on and gets the following error:</p>\n<pre><code>Caused by: java.lang.RuntimeException: io.quarkus.runtime.configuration.ConfigurationException: Model classes are defined for the default persistence unit &lt;default&gt; but configured datasource &lt;default&gt; not found: the default EntityManagerFactory will not be created. To solve this, configure the default datasource. Refer to https://quarkus.io/guides/datasource for guidance.\n</code></pre>\n<p>This is my application.properties file:</p>\n<pre><code>quarkus.datasource.db-kind=postgresql\nquarkus.datasource.username=postgres\nquarkus.datasource.password=admin\nquarkus.datasource..jdbc.url=jdbc:postgresql://localhost:5432/quarkus-social\nquarkus.datasource.jdbc.max-size=16\n</code></pre>\n<p>I think that Quarkus is trying to run tests and for that it needs the <strong>.testcontainers.properties</strong> file, which I've never created. Anyways I don't want to create that file in /home/fhb/, so theres a way to specify that file location?</p>\n<p>Besides thatI would like to know if Testcontainers has something to do with unit tests, which I would like to add to my quarkus application.</p>\n<p>Thanks in advance for your help.</p>\n"},{"tags":["java","swing","awt"],"comments":[{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1645311149,"post_id":71189849,"comment_id":125838468,"body_markdown":"I fall back to point on a circle theory. You know the radius (length of the weapon) its rotation point and its angle, from there you can calculate the point on a circle a projectile should appear, and the angle it should travel","body":"I fall back to point on a circle theory. You know the radius (length of the weapon) its rotation point and its angle, from there you can calculate the point on a circle a projectile should appear, and the angle it should travel"},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1645312222,"post_id":71189849,"comment_id":125838625,"body_markdown":"Two approaches are examined [here](https://stackoverflow.com/q/44363464/230513): one uses use the geometry directly, as @MadProgrammer suggests; the other uses the inverse transform.","body":"Two approaches are examined <a href=\"https://stackoverflow.com/q/44363464/230513\">here</a>: one uses use the geometry directly, as @MadProgrammer suggests; the other uses the inverse transform."}],"answers":[{"tags":[],"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1645316557,"creation_date":1645316557,"answer_id":71190355,"question_id":71189849,"body_markdown":"If you know...\r\n\r\n* The position of the weapon\r\n* It&#39;s angle of direction\r\n* The length (from it&#39;s centre point to it&#39;s end point)\r\n\r\nThen you can simply apply a &quot;point on circle&quot; approach to the problem, for example...\r\n\r\n[![enter image description here][1]][1]\r\n\r\nThe blue line is the weapon, the red line is the projection of the projectile path.  Oddly enough, it&#39;s calculating both the start and end point the projectile should follow &#128521;\r\n\r\n    import java.awt.Color;\r\n    import java.awt.Dimension;\r\n    import java.awt.EventQueue;\r\n    import java.awt.Graphics;\r\n    import java.awt.Graphics2D;\r\n    import java.awt.event.ActionEvent;\r\n    import java.awt.event.ActionListener;\r\n    import java.awt.event.KeyEvent;\r\n    import java.awt.geom.Line2D;\r\n    import java.awt.geom.Point2D;\r\n    import javax.swing.AbstractAction;\r\n    import javax.swing.ActionMap;\r\n    import javax.swing.InputMap;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JPanel;\r\n    import javax.swing.KeyStroke;\r\n    import javax.swing.Timer;\r\n\r\n    public class Main {\r\n\r\n        public static void main(String[] args) {\r\n            new Main();\r\n        }\r\n\r\n        public Main() {\r\n            EventQueue.invokeLater(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    JFrame frame = new JFrame();\r\n                    frame.add(new TestPane());\r\n                    frame.pack();\r\n                    frame.setLocationRelativeTo(null);\r\n                    frame.setVisible(true);\r\n                }\r\n            });\r\n        }\r\n\r\n        enum WeaponInput {\r\n            LEFT, RIGHT, NONE\r\n        }\r\n\r\n        public class TestPane extends JPanel {\r\n\r\n            private static final double MIN_WEAPON_ANGLE = -85;\r\n            private static final double MAX_WEAPON_ANGLE = 85;\r\n\r\n            private double angleOfWeapon = 0;\r\n            private double weaponAngleDelta = 1;\r\n\r\n            private WeaponInput weaponInput = WeaponInput.NONE;\r\n\r\n            private Timer timer;\r\n\r\n            public TestPane() {\r\n                setBackground(Color.BLACK);\r\n\r\n                InputMap im = getInputMap(WHEN_IN_FOCUSED_WINDOW);\r\n                ActionMap am = getActionMap();\r\n\r\n                im.put(KeyStroke.getKeyStroke(KeyEvent.VK_LEFT, 0, false), &quot;Pressed.weaponMoveLeft&quot;);\r\n                im.put(KeyStroke.getKeyStroke(KeyEvent.VK_RIGHT, 0, false), &quot;Pressed.weaponMoveRight&quot;);\r\n                im.put(KeyStroke.getKeyStroke(KeyEvent.VK_LEFT, 0, true), &quot;Pressed.weaponReleasedLeft&quot;);\r\n                im.put(KeyStroke.getKeyStroke(KeyEvent.VK_RIGHT, 0, true), &quot;Pressed.weaponReleasedRight&quot;);\r\n\r\n                WeaponMovementAction.WeaponObserver weaponObserver = new WeaponMovementAction.WeaponObserver() {\r\n                    @Override\r\n                    public void weaponDidMove(WeaponInput weaponInput) {\r\n                        TestPane.this.weaponInput = weaponInput;\r\n                    }\r\n                };\r\n\r\n                am.put(&quot;Pressed.weaponMoveLeft&quot;, new WeaponMovementAction(WeaponInput.LEFT, weaponObserver));\r\n                am.put(&quot;Pressed.weaponMoveRight&quot;, new WeaponMovementAction(WeaponInput.RIGHT, weaponObserver));\r\n                am.put(&quot;Pressed.weaponReleasedLeft&quot;, new WeaponMovementAction(WeaponInput.NONE, weaponObserver));\r\n                am.put(&quot;Pressed.weaponReleasedRight&quot;, new WeaponMovementAction(WeaponInput.NONE, weaponObserver));\r\n\r\n                timer = new Timer(5, new ActionListener() {\r\n                    @Override\r\n                    public void actionPerformed(ActionEvent e) {\r\n                        switch (weaponInput) {\r\n                            case LEFT:\r\n                                angleOfWeapon -= weaponAngleDelta;\r\n                                break;\r\n                            case RIGHT:\r\n                                angleOfWeapon += weaponAngleDelta;\r\n                                break;\r\n                        }\r\n                        if (angleOfWeapon &lt; MIN_WEAPON_ANGLE) {\r\n                            angleOfWeapon = MIN_WEAPON_ANGLE;\r\n                        } else if (angleOfWeapon &gt; MAX_WEAPON_ANGLE) {\r\n                            angleOfWeapon = MAX_WEAPON_ANGLE;\r\n                        }\r\n\r\n                        repaint();\r\n                    }\r\n                });\r\n                timer.start();\r\n            }\r\n\r\n            protected Point2D getPointOnCircle(double degress, double radius) {\r\n                double rads = Math.toRadians(degress - 90); // 0 becomes the top\r\n\r\n                // Calculate the outter point of the line\r\n                double xPosy = Math.cos(rads) * radius;\r\n                double yPosy = Math.sin(rads) * radius;\r\n\r\n                return new Point2D.Double(xPosy, yPosy);\r\n            }\r\n\r\n            @Override\r\n            public Dimension getPreferredSize() {\r\n                return new Dimension(400, 400);\r\n            }\r\n\r\n            @Override\r\n            protected void paintComponent(Graphics g) {\r\n                super.paintComponent(g);\r\n                Graphics2D g2d = (Graphics2D) g.create();\r\n\r\n                int centerX = getWidth() / 2;\r\n                int centerY = getHeight() / 2;\r\n\r\n                g2d.setColor(Color.WHITE);\r\n                g2d.drawRect(centerX - 20, centerY - 20, 40, 40);\r\n\r\n                g2d.setColor(Color.RED);\r\n                g2d.translate(centerX, centerY - 20);\r\n\r\n                // Projection of projectile\r\n                g2d.setColor(Color.BLUE);\r\n                Point2D endOfWeaponPoint = getPointOnCircle(angleOfWeapon, 20);\r\n                g2d.draw(new Line2D.Double(new Point2D.Double(0, 0), endOfWeaponPoint));\r\n\r\n                // Weapon direction\r\n                int radius = Math.max(getWidth(), getHeight());\r\n                g2d.setColor(Color.RED);\r\n                Point2D poc = getPointOnCircle(angleOfWeapon, radius);\r\n                g2d.draw(new Line2D.Double(endOfWeaponPoint, poc));\r\n\r\n                g2d.dispose();\r\n            }\r\n\r\n        }\r\n\r\n        public class WeaponMovementAction extends AbstractAction {\r\n\r\n            public interface WeaponObserver {\r\n\r\n                public void weaponDidMove(WeaponInput weaponInput);\r\n            }\r\n\r\n            private WeaponInput weaponInput;\r\n            private WeaponObserver observer;\r\n\r\n            public WeaponMovementAction(WeaponInput weaponInput, WeaponObserver observer) {\r\n                this.weaponInput = weaponInput;\r\n                this.observer = observer;\r\n            }\r\n\r\n            @Override\r\n            public void actionPerformed(ActionEvent e) {\r\n                getObserver().weaponDidMove(getWeaponInput());\r\n            }\r\n\r\n            public WeaponInput getWeaponInput() {\r\n                return weaponInput;\r\n            }\r\n\r\n            public WeaponObserver getObserver() {\r\n                return observer;\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/xg5un.gif","title":"How can I get a certain point of a rotating image after it has been rotated?","body":"<p>If you know...</p>\n<ul>\n<li>The position of the weapon</li>\n<li>It's angle of direction</li>\n<li>The length (from it's centre point to it's end point)</li>\n</ul>\n<p>Then you can simply apply a &quot;point on circle&quot; approach to the problem, for example...</p>\n<p><a href=\"https://i.stack.imgur.com/xg5un.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xg5un.gif\" alt=\"enter image description here\" /></a></p>\n<p>The blue line is the weapon, the red line is the projection of the projectile path.  Oddly enough, it's calculating both the start and end point the projectile should follow </p>\n<pre><code>import java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.EventQueue;\nimport java.awt.Graphics;\nimport java.awt.Graphics2D;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport java.awt.event.KeyEvent;\nimport java.awt.geom.Line2D;\nimport java.awt.geom.Point2D;\nimport javax.swing.AbstractAction;\nimport javax.swing.ActionMap;\nimport javax.swing.InputMap;\nimport javax.swing.JFrame;\nimport javax.swing.JPanel;\nimport javax.swing.KeyStroke;\nimport javax.swing.Timer;\n\npublic class Main {\n\n    public static void main(String[] args) {\n        new Main();\n    }\n\n    public Main() {\n        EventQueue.invokeLater(new Runnable() {\n            @Override\n            public void run() {\n                JFrame frame = new JFrame();\n                frame.add(new TestPane());\n                frame.pack();\n                frame.setLocationRelativeTo(null);\n                frame.setVisible(true);\n            }\n        });\n    }\n\n    enum WeaponInput {\n        LEFT, RIGHT, NONE\n    }\n\n    public class TestPane extends JPanel {\n\n        private static final double MIN_WEAPON_ANGLE = -85;\n        private static final double MAX_WEAPON_ANGLE = 85;\n\n        private double angleOfWeapon = 0;\n        private double weaponAngleDelta = 1;\n\n        private WeaponInput weaponInput = WeaponInput.NONE;\n\n        private Timer timer;\n\n        public TestPane() {\n            setBackground(Color.BLACK);\n\n            InputMap im = getInputMap(WHEN_IN_FOCUSED_WINDOW);\n            ActionMap am = getActionMap();\n\n            im.put(KeyStroke.getKeyStroke(KeyEvent.VK_LEFT, 0, false), &quot;Pressed.weaponMoveLeft&quot;);\n            im.put(KeyStroke.getKeyStroke(KeyEvent.VK_RIGHT, 0, false), &quot;Pressed.weaponMoveRight&quot;);\n            im.put(KeyStroke.getKeyStroke(KeyEvent.VK_LEFT, 0, true), &quot;Pressed.weaponReleasedLeft&quot;);\n            im.put(KeyStroke.getKeyStroke(KeyEvent.VK_RIGHT, 0, true), &quot;Pressed.weaponReleasedRight&quot;);\n\n            WeaponMovementAction.WeaponObserver weaponObserver = new WeaponMovementAction.WeaponObserver() {\n                @Override\n                public void weaponDidMove(WeaponInput weaponInput) {\n                    TestPane.this.weaponInput = weaponInput;\n                }\n            };\n\n            am.put(&quot;Pressed.weaponMoveLeft&quot;, new WeaponMovementAction(WeaponInput.LEFT, weaponObserver));\n            am.put(&quot;Pressed.weaponMoveRight&quot;, new WeaponMovementAction(WeaponInput.RIGHT, weaponObserver));\n            am.put(&quot;Pressed.weaponReleasedLeft&quot;, new WeaponMovementAction(WeaponInput.NONE, weaponObserver));\n            am.put(&quot;Pressed.weaponReleasedRight&quot;, new WeaponMovementAction(WeaponInput.NONE, weaponObserver));\n\n            timer = new Timer(5, new ActionListener() {\n                @Override\n                public void actionPerformed(ActionEvent e) {\n                    switch (weaponInput) {\n                        case LEFT:\n                            angleOfWeapon -= weaponAngleDelta;\n                            break;\n                        case RIGHT:\n                            angleOfWeapon += weaponAngleDelta;\n                            break;\n                    }\n                    if (angleOfWeapon &lt; MIN_WEAPON_ANGLE) {\n                        angleOfWeapon = MIN_WEAPON_ANGLE;\n                    } else if (angleOfWeapon &gt; MAX_WEAPON_ANGLE) {\n                        angleOfWeapon = MAX_WEAPON_ANGLE;\n                    }\n\n                    repaint();\n                }\n            });\n            timer.start();\n        }\n\n        protected Point2D getPointOnCircle(double degress, double radius) {\n            double rads = Math.toRadians(degress - 90); // 0 becomes the top\n\n            // Calculate the outter point of the line\n            double xPosy = Math.cos(rads) * radius;\n            double yPosy = Math.sin(rads) * radius;\n\n            return new Point2D.Double(xPosy, yPosy);\n        }\n\n        @Override\n        public Dimension getPreferredSize() {\n            return new Dimension(400, 400);\n        }\n\n        @Override\n        protected void paintComponent(Graphics g) {\n            super.paintComponent(g);\n            Graphics2D g2d = (Graphics2D) g.create();\n\n            int centerX = getWidth() / 2;\n            int centerY = getHeight() / 2;\n\n            g2d.setColor(Color.WHITE);\n            g2d.drawRect(centerX - 20, centerY - 20, 40, 40);\n\n            g2d.setColor(Color.RED);\n            g2d.translate(centerX, centerY - 20);\n\n            // Projection of projectile\n            g2d.setColor(Color.BLUE);\n            Point2D endOfWeaponPoint = getPointOnCircle(angleOfWeapon, 20);\n            g2d.draw(new Line2D.Double(new Point2D.Double(0, 0), endOfWeaponPoint));\n\n            // Weapon direction\n            int radius = Math.max(getWidth(), getHeight());\n            g2d.setColor(Color.RED);\n            Point2D poc = getPointOnCircle(angleOfWeapon, radius);\n            g2d.draw(new Line2D.Double(endOfWeaponPoint, poc));\n\n            g2d.dispose();\n        }\n\n    }\n\n    public class WeaponMovementAction extends AbstractAction {\n\n        public interface WeaponObserver {\n\n            public void weaponDidMove(WeaponInput weaponInput);\n        }\n\n        private WeaponInput weaponInput;\n        private WeaponObserver observer;\n\n        public WeaponMovementAction(WeaponInput weaponInput, WeaponObserver observer) {\n            this.weaponInput = weaponInput;\n            this.observer = observer;\n        }\n\n        @Override\n        public void actionPerformed(ActionEvent e) {\n            getObserver().weaponDidMove(getWeaponInput());\n        }\n\n        public WeaponInput getWeaponInput() {\n            return weaponInput;\n        }\n\n        public WeaponObserver getObserver() {\n            return observer;\n        }\n\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":22810851,"reputation":13,"user_id":16962169,"display_name":"Rehan Samaratunga"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71190355,"answer_count":1,"score":0,"last_activity_date":1645316557,"creation_date":1645310887,"question_id":71189849,"body_markdown":"I have been working on a top down game for about a day or two and I am trying to figure out how to get a point after I translate and rotate and object back to its original position. I have an image (a weapon) and I rotate it based off of the mouse location and player however, I want to get a certain point of the rotated image after I have rotated it so I can use this point to set the start draw location for bullets, animations, etc. Does anyone know how I can solve this? thanks!!\r\n\r\n    \r\n\r\n    private Point hand, location, handle, barrelExit;\r\n    private BufferedImage image;\r\n\r\n    private double theta;\r\n\r\n    public WeaponSpriteBase(BufferedImage image, Point location, Point handle, Point barrelExit) {\r\n\r\n        super(image, location);\r\n\r\n        this.image = image;\r\n        this.location = location;\r\n        this.handle = handle;\r\n        this.barrelExit = barrelExit;\r\n\r\n        //Sets the hand location getter\r\n        hand = PlayerSprite.playerHand();\r\n\r\n    }\r\n\r\n    public void draw(Graphics2D g2, int currentMouseX, int currentMouseY) {\r\n\r\n        theta = PlayerSprite.DegreeFinder(currentMouseX, currentMouseY);\r\n\r\n        //Refreshes the hands location getter\r\n        hand = PlayerSprite.playerHand();\r\n\r\n        setLocation(hand.x - handle.x, hand.y - handle.y);\r\n\r\n        g2.translate(hand.x, hand.y);\r\n        g2.rotate(-Math.toRadians(theta));\r\n\r\n        setLocation(-handle.x, - handle.y);\r\n\r\n        if(theta &gt; 90 &amp;&amp; theta &lt; 270) {\r\n            flipVert(g2);\r\n        }\r\n\r\n        else {\r\n            super.draw(g2);\r\n        }\r\n\r\n        g2.rotate(Math.toRadians(theta));\r\n        g2.translate(-hand.x, -hand.y);\r\n\r\n        g2.setColor(Color.RED);\r\n        g2.drawRect(hand.x - 1, hand.y - 1, 2, 2);\r\n        g2.setColor(Color.black);\r\n\r\n\r\n        //Want to get a certain point on the image and draw it here (with barrelExit.x , barrelExit.y) without rotating it\r\n\r\n        \r\n    }\r\n\r\n}","title":"How can I get a certain point of a rotating image after it has been rotated?","body":"<p>I have been working on a top down game for about a day or two and I am trying to figure out how to get a point after I translate and rotate and object back to its original position. I have an image (a weapon) and I rotate it based off of the mouse location and player however, I want to get a certain point of the rotated image after I have rotated it so I can use this point to set the start draw location for bullets, animations, etc. Does anyone know how I can solve this? thanks!!</p>\n<pre><code>private Point hand, location, handle, barrelExit;\nprivate BufferedImage image;\n\nprivate double theta;\n\npublic WeaponSpriteBase(BufferedImage image, Point location, Point handle, Point barrelExit) {\n\n    super(image, location);\n\n    this.image = image;\n    this.location = location;\n    this.handle = handle;\n    this.barrelExit = barrelExit;\n\n    //Sets the hand location getter\n    hand = PlayerSprite.playerHand();\n\n}\n\npublic void draw(Graphics2D g2, int currentMouseX, int currentMouseY) {\n\n    theta = PlayerSprite.DegreeFinder(currentMouseX, currentMouseY);\n\n    //Refreshes the hands location getter\n    hand = PlayerSprite.playerHand();\n\n    setLocation(hand.x - handle.x, hand.y - handle.y);\n\n    g2.translate(hand.x, hand.y);\n    g2.rotate(-Math.toRadians(theta));\n\n    setLocation(-handle.x, - handle.y);\n\n    if(theta &gt; 90 &amp;&amp; theta &lt; 270) {\n        flipVert(g2);\n    }\n\n    else {\n        super.draw(g2);\n    }\n\n    g2.rotate(Math.toRadians(theta));\n    g2.translate(-hand.x, -hand.y);\n\n    g2.setColor(Color.RED);\n    g2.drawRect(hand.x - 1, hand.y - 1, 2, 2);\n    g2.setColor(Color.black);\n\n\n    //Want to get a certain point on the image and draw it here (with barrelExit.x , barrelExit.y) without rotating it\n\n    \n}\n</code></pre>\n<p>}</p>\n"},{"tags":["java","selenium","xpath","automation-testing"],"owner":{"account_id":19943165,"reputation":1,"user_id":14614484,"display_name":"john connor"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":0,"score":-3,"last_activity_date":1645316349,"creation_date":1645316349,"question_id":71190337,"body_markdown":"I need to identify the highlighted element (https://i.stack.imgur.com/hYSrq.png) in the screenshot using xpath. Tried with the xpath higlighted in the rectangular box at the bottom right corner but it&#39;s not working. Could someone please help with this? Thanks in advance","title":"What could be the xpath to identify the highlighted element?","body":"<p>I need to identify the highlighted element (<a href=\"https://i.stack.imgur.com/hYSrq.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/hYSrq.png</a>) in the screenshot using xpath. Tried with the xpath higlighted in the rectangular box at the bottom right corner but it's not working. Could someone please help with this? Thanks in advance</p>\n"},{"tags":["java","swing","awt","graphstream"],"owner":{"account_id":24314618,"reputation":11,"user_id":18256039,"display_name":"zarathustra"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1645314718,"creation_date":1645314718,"question_id":71190209,"body_markdown":"I&#39;m experiencing a rendering/painting issue with a simple drawing of a line in Swing when it is applied to a component which contains an already existing graph created using Graphstream. \r\n\r\n\r\nIssue is when the mouse is dragged and painting method called, the underlying graph is updated and the whole frame flickers and line is not drawn smoothly.\r\n\r\n\r\nIs there a way to freeze the rendering of the underlying graph? \r\n\r\n\r\nI have tried several approaches but all seem to produce the same result. Below the latest example I tried setting a forelayout renderer on the view.\r\n\r\nI believe it is a simple issue related to an incorrect approach to drawing on the canvas without properly managing the concurrency or update of the repaint/render of this foreground layer.\r\n\r\nAlso, as seen below, I remove all listeners from the graph before adding my own custom one (otherwise when dragging the mouse, a bounding box/selection rectangle is drawn by the graphstream library, or a node is dragged). Is there a better way also here to deactivate the drawing and mouse interaction done by graphstream.\r\n\r\n\r\n```\r\nimport org.graphstream.graph.Graph;\r\nimport org.graphstream.graph.implementations.DefaultGraph;\r\nimport org.graphstream.ui.graphicGraph.GraphicGraph;\r\nimport org.graphstream.ui.swing_viewer.DefaultView;\r\nimport org.graphstream.ui.swing_viewer.SwingViewer;\r\nimport org.graphstream.ui.view.LayerRenderer;\r\nimport org.graphstream.ui.view.Viewer;\r\n\r\nimport javax.swing.*;\r\nimport java.awt.*;\r\nimport java.awt.event.*;\r\n\r\n\r\npublic class LinesDrawingOnGraphExample extends JFrame {\r\n    static Point pointStart = null;\r\n    static Point pointEnd = null;\r\n    static LayerRenderer lineRenderer;\r\n    static DefaultView view;\r\n\r\n    public static void main(String args[]) throws Exception {\r\n        JFrame f = new JFrame(&quot;Draw a Red Line on graph&quot;);\r\n        f.setSize(300, 300);\r\n        f.setLocation(300, 300);\r\n        f.setResizable(false);\r\n\r\n\r\n        //build graph\r\n        Graph graph = new DefaultGraph(&quot;g&quot;);\r\n        graph.addNode(&quot;A&quot;);\r\n        graph.addNode(&quot;B&quot;);\r\n        graph.addNode(&quot;C&quot;);\r\n        graph.addNode(&quot;D&quot;);\r\n        graph.addNode(&quot;E&quot;);\r\n        graph.addNode(&quot;F&quot;);\r\n        graph.addNode(&quot;G&quot;);\r\n        graph.addNode(&quot;H&quot;);\r\n        graph.addNode(&quot;I&quot;);\r\n        graph.addEdge(&quot;AB&quot;, &quot;A&quot;, &quot;B&quot;);\r\n        graph.addEdge(&quot;BC&quot;, &quot;B&quot;, &quot;C&quot;);\r\n        graph.addEdge(&quot;CA&quot;, &quot;C&quot;, &quot;A&quot;);\r\n\r\n\r\n        //set viewer\r\n        Viewer viewer = new SwingViewer(graph, Viewer.ThreadingModel.GRAPH_IN_GUI_THREAD);\r\n        view = (DefaultView) viewer.addDefaultView(false);\r\n\r\n        viewer.enableAutoLayout();\r\n        viewer.replayGraph(graph);\r\n\r\n        //backup existing default graph listeners\r\n        MouseListener[] ml = ((DefaultView) viewer.getDefaultView()).getMouseListeners();\r\n        MouseMotionListener[] ml2 = ((DefaultView) viewer.getDefaultView()).getMouseMotionListeners();\r\n\r\n        //remove them (remove the bounding box which is drawn on mouse drag)\r\n        for (MouseListener mouseListener : ml) {\r\n            view.removeMouseListener(mouseListener);\r\n        }\r\n        for (MouseMotionListener mouseListener : ml2) {\r\n            view.removeMouseMotionListener(mouseListener);\r\n        }\r\n\r\n        //add new mouse listeners for drawing\r\n        MouseAdapter newListener = new DrawListener();\r\n        view.addMouseListener(newListener);\r\n        view.addMouseMotionListener(newListener);\r\n\r\n        //use graph forelayout for drawing the line\r\n        lineRenderer = new LayerRenderer&lt;Graphics2D&gt;() {\r\n            @Override\r\n            public void render(Graphics2D g, GraphicGraph graphicGraph, double v, int i, int i1, double v1, double v2, double v3, double v4) {\r\n                if (pointStart != null &amp;&amp; pointEnd != null) {\r\n                    g.setColor(Color.RED);\r\n                    g.drawLine(pointStart.x, pointStart.y, pointEnd.x, pointEnd.y);\r\n                }\r\n            }\r\n        };\r\n\r\n        view.setForeLayoutRenderer(lineRenderer);\r\n        JPanel p = new JPanel(new BorderLayout());\r\n        p.add(view, BorderLayout.CENTER);\r\n        f.add(p);\r\n        f.setVisible(true);\r\n    }\r\n\r\n    private static class DrawListener extends MouseAdapter {\r\n\r\n        public void mousePressed(MouseEvent e) {\r\n            pointStart = e.getPoint();\r\n        }\r\n\r\n        public void mouseReleased(MouseEvent e) {\r\n            pointStart = null;\r\n        }\r\n\r\n        public void mouseDragged(MouseEvent e) {\r\n            pointEnd = e.getPoint();\r\n            view.render((Graphics2D) view.getGraphics());\r\n        }\r\n    }\r\n}\r\n```","title":"Canvas flickering when custom drawing is overlayed on top of graph with Graphstream","body":"<p>I'm experiencing a rendering/painting issue with a simple drawing of a line in Swing when it is applied to a component which contains an already existing graph created using Graphstream.</p>\n<p>Issue is when the mouse is dragged and painting method called, the underlying graph is updated and the whole frame flickers and line is not drawn smoothly.</p>\n<p>Is there a way to freeze the rendering of the underlying graph?</p>\n<p>I have tried several approaches but all seem to produce the same result. Below the latest example I tried setting a forelayout renderer on the view.</p>\n<p>I believe it is a simple issue related to an incorrect approach to drawing on the canvas without properly managing the concurrency or update of the repaint/render of this foreground layer.</p>\n<p>Also, as seen below, I remove all listeners from the graph before adding my own custom one (otherwise when dragging the mouse, a bounding box/selection rectangle is drawn by the graphstream library, or a node is dragged). Is there a better way also here to deactivate the drawing and mouse interaction done by graphstream.</p>\n<pre><code>import org.graphstream.graph.Graph;\nimport org.graphstream.graph.implementations.DefaultGraph;\nimport org.graphstream.ui.graphicGraph.GraphicGraph;\nimport org.graphstream.ui.swing_viewer.DefaultView;\nimport org.graphstream.ui.swing_viewer.SwingViewer;\nimport org.graphstream.ui.view.LayerRenderer;\nimport org.graphstream.ui.view.Viewer;\n\nimport javax.swing.*;\nimport java.awt.*;\nimport java.awt.event.*;\n\n\npublic class LinesDrawingOnGraphExample extends JFrame {\n    static Point pointStart = null;\n    static Point pointEnd = null;\n    static LayerRenderer lineRenderer;\n    static DefaultView view;\n\n    public static void main(String args[]) throws Exception {\n        JFrame f = new JFrame(&quot;Draw a Red Line on graph&quot;);\n        f.setSize(300, 300);\n        f.setLocation(300, 300);\n        f.setResizable(false);\n\n\n        //build graph\n        Graph graph = new DefaultGraph(&quot;g&quot;);\n        graph.addNode(&quot;A&quot;);\n        graph.addNode(&quot;B&quot;);\n        graph.addNode(&quot;C&quot;);\n        graph.addNode(&quot;D&quot;);\n        graph.addNode(&quot;E&quot;);\n        graph.addNode(&quot;F&quot;);\n        graph.addNode(&quot;G&quot;);\n        graph.addNode(&quot;H&quot;);\n        graph.addNode(&quot;I&quot;);\n        graph.addEdge(&quot;AB&quot;, &quot;A&quot;, &quot;B&quot;);\n        graph.addEdge(&quot;BC&quot;, &quot;B&quot;, &quot;C&quot;);\n        graph.addEdge(&quot;CA&quot;, &quot;C&quot;, &quot;A&quot;);\n\n\n        //set viewer\n        Viewer viewer = new SwingViewer(graph, Viewer.ThreadingModel.GRAPH_IN_GUI_THREAD);\n        view = (DefaultView) viewer.addDefaultView(false);\n\n        viewer.enableAutoLayout();\n        viewer.replayGraph(graph);\n\n        //backup existing default graph listeners\n        MouseListener[] ml = ((DefaultView) viewer.getDefaultView()).getMouseListeners();\n        MouseMotionListener[] ml2 = ((DefaultView) viewer.getDefaultView()).getMouseMotionListeners();\n\n        //remove them (remove the bounding box which is drawn on mouse drag)\n        for (MouseListener mouseListener : ml) {\n            view.removeMouseListener(mouseListener);\n        }\n        for (MouseMotionListener mouseListener : ml2) {\n            view.removeMouseMotionListener(mouseListener);\n        }\n\n        //add new mouse listeners for drawing\n        MouseAdapter newListener = new DrawListener();\n        view.addMouseListener(newListener);\n        view.addMouseMotionListener(newListener);\n\n        //use graph forelayout for drawing the line\n        lineRenderer = new LayerRenderer&lt;Graphics2D&gt;() {\n            @Override\n            public void render(Graphics2D g, GraphicGraph graphicGraph, double v, int i, int i1, double v1, double v2, double v3, double v4) {\n                if (pointStart != null &amp;&amp; pointEnd != null) {\n                    g.setColor(Color.RED);\n                    g.drawLine(pointStart.x, pointStart.y, pointEnd.x, pointEnd.y);\n                }\n            }\n        };\n\n        view.setForeLayoutRenderer(lineRenderer);\n        JPanel p = new JPanel(new BorderLayout());\n        p.add(view, BorderLayout.CENTER);\n        f.add(p);\n        f.setVisible(true);\n    }\n\n    private static class DrawListener extends MouseAdapter {\n\n        public void mousePressed(MouseEvent e) {\n            pointStart = e.getPoint();\n        }\n\n        public void mouseReleased(MouseEvent e) {\n            pointStart = null;\n        }\n\n        public void mouseDragged(MouseEvent e) {\n            pointEnd = e.getPoint();\n            view.render((Graphics2D) view.getGraphics());\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","resources","java-7","resource-management","locks"],"comments":[{"owner":{"account_id":378721,"reputation":47508,"user_id":731620,"accept_rate":80,"display_name":"ratchet freak"},"score":3,"creation_date":1312620927,"post_id":6965731,"comment_id":8306887,"body_markdown":"you can make a request to have them do that","body":"you can make a request to have them do that"}],"answers":[{"tags":[],"owner":{"account_id":343645,"reputation":48152,"user_id":675502,"display_name":"dlev"},"down_vote_count":5,"up_vote_count":32,"is_accepted":true,"score":27,"last_activity_date":1339517983,"creation_date":1312620595,"answer_id":6965745,"question_id":6965731,"body_markdown":"No, neither the [`Lock`][1] interface (nor the [`ReentrantLock`][2] class) implement the `AutoCloseable` interface, which is required for use with the new try-with-resource syntax.\r\n\r\nIf you wanted to get this to work, you could write a simple wrapper:\r\n\r\n    public class LockWrapper implements AutoCloseable\r\n    {\r\n        private final Lock _lock;\r\n        public LockWrapper(Lock l) {\r\n           this._lock = l;\r\n        }\r\n    \r\n        public void lock() {\r\n            this._lock.lock();\r\n        }\r\n    \r\n        public void close() {\r\n            this._lock.unlock();\r\n        }\r\n    }\r\n\r\nNow you can write code like this:\r\n\r\n    try (LockWrapper someLock = new LockWrapper(new ReentrantLock()))\r\n    {\r\n        someLock.lock();\r\n        // ...\r\n    }\r\n\r\nI think you&#39;re better off sticking with the old syntax, though. It&#39;s safer to have your locking logic fully visible.\r\n\r\n  [1]: http://download.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html\r\n  [2]: http://download.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReentrantLock.html\r\n","title":"Are Locks AutoCloseable?","body":"<p>No, neither the <a href=\"http://download.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html\" rel=\"noreferrer\"><code>Lock</code></a> interface (nor the <a href=\"http://download.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReentrantLock.html\" rel=\"noreferrer\"><code>ReentrantLock</code></a> class) implement the <code>AutoCloseable</code> interface, which is required for use with the new try-with-resource syntax.</p>\n\n<p>If you wanted to get this to work, you could write a simple wrapper:</p>\n\n<pre><code>public class LockWrapper implements AutoCloseable\n{\n    private final Lock _lock;\n    public LockWrapper(Lock l) {\n       this._lock = l;\n    }\n\n    public void lock() {\n        this._lock.lock();\n    }\n\n    public void close() {\n        this._lock.unlock();\n    }\n}\n</code></pre>\n\n<p>Now you can write code like this:</p>\n\n<pre><code>try (LockWrapper someLock = new LockWrapper(new ReentrantLock()))\n{\n    someLock.lock();\n    // ...\n}\n</code></pre>\n\n<p>I think you're better off sticking with the old syntax, though. It's safer to have your locking logic fully visible.</p>\n"},{"tags":[],"owner":{"account_id":1562037,"reputation":751,"user_id":1451705,"display_name":"Stephen"},"down_vote_count":0,"up_vote_count":63,"is_accepted":false,"score":63,"last_activity_date":1339517069,"creation_date":1339517069,"answer_id":11000458,"question_id":6965731,"body_markdown":"I was looking into doing this myself and did something like this: \r\n\r\n    public class CloseableReentrantLock extends ReentrantLock implements AutoCloseable { \r\n       public CloseableReentrantLock open() { \r\n          this.lock();\r\n          return this;\r\n       }\r\n    \r\n       @Override\r\n       public void close() {\r\n          this.unlock();\r\n       }\r\n    }\r\n\r\nand then this as usage for the class:\r\n\r\n    public class MyClass {\r\n       private final CloseableReentrantLock lock = new CloseableReentrantLock();\r\n    \r\n       public void myMethod() {\r\n          try(CloseableReentrantLock closeableLock = lock.open()) {\r\n             // locked stuff\r\n          }\r\n       }\r\n    }","title":"Are Locks AutoCloseable?","body":"<p>I was looking into doing this myself and did something like this: </p>\n\n<pre><code>public class CloseableReentrantLock extends ReentrantLock implements AutoCloseable { \n   public CloseableReentrantLock open() { \n      this.lock();\n      return this;\n   }\n\n   @Override\n   public void close() {\n      this.unlock();\n   }\n}\n</code></pre>\n\n<p>and then this as usage for the class:</p>\n\n<pre><code>public class MyClass {\n   private final CloseableReentrantLock lock = new CloseableReentrantLock();\n\n   public void myMethod() {\n      try(CloseableReentrantLock closeableLock = lock.open()) {\n         // locked stuff\n      }\n   }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9431,"reputation":9825,"user_id":17428,"accept_rate":80,"display_name":"Eduard Wirch"},"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1394092543,"creation_date":1394092543,"answer_id":22218368,"question_id":6965731,"body_markdown":"The `try-with-resource` works well for resources which are created and destroyed when `try-block` is left. It does not work for resources which need to be kept alive. Locks are not created and destroyed upon each usage. They are kept alive and just locked and unlocked. This is why they are not `AutoClosable`.\r\n\r\nAs others already suggested a wrapper can be used to be created and destroyed by the `try-with-resource` block and to do the locking and unlocking upon creation and destruction.","title":"Are Locks AutoCloseable?","body":"<p>The <code>try-with-resource</code> works well for resources which are created and destroyed when <code>try-block</code> is left. It does not work for resources which need to be kept alive. Locks are not created and destroyed upon each usage. They are kept alive and just locked and unlocked. This is why they are not <code>AutoClosable</code>.</p>\n\n<p>As others already suggested a wrapper can be used to be created and destroyed by the <code>try-with-resource</code> block and to do the locking and unlocking upon creation and destruction.</p>\n"},{"tags":[],"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1438856934,"creation_date":1438856934,"answer_id":31853392,"question_id":6965731,"body_markdown":"    public class AutoCloseableLockWrapper implements AutoCloseable, Lock{\r\n        private final Lock lock;\r\n        public AutoCloseableLockWrapper(Lock l) {\r\n            this.lock = l;\r\n        }\r\n        @Override\r\n        public void lock() {\r\n            this.lock.lock();\r\n        }\r\n    \r\n        @Override\r\n        public void lockInterruptibly() throws InterruptedException {\r\n            lock.lockInterruptibly();\r\n        }\r\n    \r\n        @Override\r\n        public boolean tryLock() {\r\n            return lock.tryLock();\r\n        }\r\n    \r\n        @Override\r\n        public boolean tryLock(long time, TimeUnit unit) throws InterruptedException {\r\n            return lock.tryLock(time,unit);\r\n        }\r\n    \r\n        @Override\r\n        public void unlock() {\r\n            lock.unlock();\r\n        }\r\n    \r\n        @Override\r\n        public Condition newCondition() {\r\n            return lock.newCondition();\r\n        }\r\n        @Override\r\n        public void close() {\r\n            this.lock.unlock();\r\n        }\r\n    }\r\n\r\n","title":"Are Locks AutoCloseable?","body":"<pre><code>public class AutoCloseableLockWrapper implements AutoCloseable, Lock{\n    private final Lock lock;\n    public AutoCloseableLockWrapper(Lock l) {\n        this.lock = l;\n    }\n    @Override\n    public void lock() {\n        this.lock.lock();\n    }\n\n    @Override\n    public void lockInterruptibly() throws InterruptedException {\n        lock.lockInterruptibly();\n    }\n\n    @Override\n    public boolean tryLock() {\n        return lock.tryLock();\n    }\n\n    @Override\n    public boolean tryLock(long time, TimeUnit unit) throws InterruptedException {\n        return lock.tryLock(time,unit);\n    }\n\n    @Override\n    public void unlock() {\n        lock.unlock();\n    }\n\n    @Override\n    public Condition newCondition() {\n        return lock.newCondition();\n    }\n    @Override\n    public void close() {\n        this.lock.unlock();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":283609,"reputation":45044,"user_id":581205,"accept_rate":72,"display_name":"maaartinus"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1464182031,"creation_date":1464182031,"answer_id":37438317,"question_id":6965731,"body_markdown":"There&#39;s no perfect solution, unless you ignore the allocation costs (most application programmers can, but the lock library writers can not). Then you can use a wrapper\r\n\r\n    @RequiredArgsConstructor(access=AccessLevel.PRIVATE)\r\n    public final class MgLockCloseable implements AutoCloseable {\r\n        public static MgLockCloseable tryLock(Lock lock) {\r\n            return new MgLockCloseable(lock.tryLock() ? lock : null);\r\n        }\r\n\r\n        public static MgLockCloseable lock(Lock lock) {\r\n            lock.lock();\r\n            return new MgLockCloseable(lock);\r\n        }\r\n\r\n        @Override public void close() {\r\n            if (isLocked()) {\r\n                lock.unlock();\r\n            }\r\n        }\r\n\r\n        public boolean isLocked() {\r\n            return lock != null;\r\n        }\r\n\r\n        @Nullable private final Lock lock;\r\n    }\r\n\r\nin this construct\r\n\r\n    try (LockCloseable lockCloseable = LockCloseable.lock(lock)) {\r\n        doSomethingUnderLock();\r\n    } // automatic release\r\n\r\nSee also my [question on CR][q].\r\n\r\n[q]: https://codereview.stackexchange.com/q/129068/14363","title":"Are Locks AutoCloseable?","body":"<p>There's no perfect solution, unless you ignore the allocation costs (most application programmers can, but the lock library writers can not). Then you can use a wrapper</p>\n\n<pre><code>@RequiredArgsConstructor(access=AccessLevel.PRIVATE)\npublic final class MgLockCloseable implements AutoCloseable {\n    public static MgLockCloseable tryLock(Lock lock) {\n        return new MgLockCloseable(lock.tryLock() ? lock : null);\n    }\n\n    public static MgLockCloseable lock(Lock lock) {\n        lock.lock();\n        return new MgLockCloseable(lock);\n    }\n\n    @Override public void close() {\n        if (isLocked()) {\n            lock.unlock();\n        }\n    }\n\n    public boolean isLocked() {\n        return lock != null;\n    }\n\n    @Nullable private final Lock lock;\n}\n</code></pre>\n\n<p>in this construct</p>\n\n<pre><code>try (LockCloseable lockCloseable = LockCloseable.lock(lock)) {\n    doSomethingUnderLock();\n} // automatic release\n</code></pre>\n\n<p>See also my <a href=\"https://codereview.stackexchange.com/q/129068/14363\">question on CR</a>.</p>\n"},{"tags":[],"owner":{"account_id":1268556,"reputation":48088,"user_id":1225328,"accept_rate":93,"display_name":"sp00m"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1485181542,"creation_date":1485181542,"answer_id":41808604,"question_id":6965731,"body_markdown":"Taking [user2357112&#39;s shrewd advice](https://stackoverflow.com/questions/6965731/are-locks-autocloseable#comment-49435935) into account:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    public class CloseableLock {\r\n    \r\n      private class Unlocker implements AutoCloseable {\r\n    \r\n        @Override\r\n        public void close() throws Exception {\r\n          lock.unlock();\r\n        }\r\n    \r\n      }\r\n    \r\n      private final Lock lock;\r\n    \r\n      private final Unlocker unlocker = new Unlocker();\r\n    \r\n      public CloseableLock(Lock lock) {\r\n        this.lock = lock;\r\n      }\r\n    \r\n      public AutoCloseable lock() {\r\n        this.lock.lock();\r\n        return unlocker;\r\n      }\r\n    \r\n    }\r\n\r\nUse:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    CloseableLock lock = new CloseableLock(new ReentrantLock());\r\n    \r\n    try (AutoCloseable unlocker = lock.lock()) {\r\n        // lock is acquired, automatically released at the end of this block\r\n    } catch (Exception it) {\r\n        // deal with it\r\n    }\r\n\r\nCould be interesting to make `CloseableLock` implement `java.util.concurrent.locks.Lock`.","title":"Are Locks AutoCloseable?","body":"<p>Taking <a href=\"https://stackoverflow.com/questions/6965731/are-locks-autocloseable#comment-49435935\">user2357112's shrewd advice</a> into account:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class CloseableLock {\n\n  private class Unlocker implements AutoCloseable {\n\n    @Override\n    public void close() throws Exception {\n      lock.unlock();\n    }\n\n  }\n\n  private final Lock lock;\n\n  private final Unlocker unlocker = new Unlocker();\n\n  public CloseableLock(Lock lock) {\n    this.lock = lock;\n  }\n\n  public AutoCloseable lock() {\n    this.lock.lock();\n    return unlocker;\n  }\n\n}\n</code></pre>\n\n<p>Use:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>CloseableLock lock = new CloseableLock(new ReentrantLock());\n\ntry (AutoCloseable unlocker = lock.lock()) {\n    // lock is acquired, automatically released at the end of this block\n} catch (Exception it) {\n    // deal with it\n}\n</code></pre>\n\n<p>Could be interesting to make <code>CloseableLock</code> implement <code>java.util.concurrent.locks.Lock</code>.</p>\n"},{"tags":[],"owner":{"account_id":1558262,"reputation":3089,"user_id":1448767,"accept_rate":20,"display_name":"ocroquette"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1487776465,"creation_date":1487776465,"answer_id":42395373,"question_id":6965731,"body_markdown":"Building on Stephen&#39;s answer and user2357112&#39;s idea, I have written the following class.\r\n\r\nThe MyLock class itself is not closeable itself, to force users of the class to call get().\r\n\r\n\tpublic class MyLock  {\r\n\t\tpublic class Session implements AutoCloseable {\r\n\t\t\t@Override\r\n\t\t\tpublic void close() {\r\n\t\t\t\tfreeLock();\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\t\tprivate ReentrantLock reentrantLock = new ReentrantLock();\r\n\t\r\n\t\tpublic Session get() { \r\n\t\t\treentrantLock.lock();\r\n\t\t\treturn new Session();\r\n\t\t}\r\n\t\r\n\t\tprivate void freeLock() {\r\n\t\t\treentrantLock.unlock();\r\n\t\t}\r\n\t}\r\n\r\nHere is a typical use:\r\n\r\n\tMyLock myLock = new MyLock();\r\n\ttry( MyLock.Session session = myLock.get() ) {\r\n\t\t// Lock acquired\r\n\t}\r\n","title":"Are Locks AutoCloseable?","body":"<p>Building on Stephen's answer and user2357112's idea, I have written the following class.</p>\n\n<p>The MyLock class itself is not closeable itself, to force users of the class to call get().</p>\n\n<pre><code>public class MyLock  {\n    public class Session implements AutoCloseable {\n        @Override\n        public void close() {\n            freeLock();\n        }\n    }\n\n    private ReentrantLock reentrantLock = new ReentrantLock();\n\n    public Session get() { \n        reentrantLock.lock();\n        return new Session();\n    }\n\n    private void freeLock() {\n        reentrantLock.unlock();\n    }\n}\n</code></pre>\n\n<p>Here is a typical use:</p>\n\n<pre><code>MyLock myLock = new MyLock();\ntry( MyLock.Session session = myLock.get() ) {\n    // Lock acquired\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10276489,"reputation":515,"user_id":7583219,"display_name":"skoskav"},"down_vote_count":0,"up_vote_count":30,"is_accepted":false,"score":30,"last_activity_date":1505685443,"creation_date":1505521325,"answer_id":46248923,"question_id":6965731,"body_markdown":"The general-purpose [`ReentrantLock`][1] neither implements nor provides anything that implements the `AutoCloseable` interface necessary for a try-with-resources statement. The concept isn&#39;t completely foreign to the Java API though, as [`FileChannel.lock()`][2] offers this functionality.\r\n\r\nThe answers given so far share solutions that have some issues, such as creating an unnecessary object on each lock call, exposing an error-prone API or risk failing after the lock is acquired but before the try-finally is entered.\r\n\r\n**Java 7** solution:\r\n\r\n    public interface ResourceLock extends AutoCloseable {\r\n\r\n        /**\r\n         * Unlocking doesn&#39;t throw any checked exception.\r\n         */\r\n        @Override\r\n        void close();\r\n    }\r\n\r\n    public class CloseableReentrantLock extends ReentrantLock {\r\n    \r\n        private final ResourceLock unlocker = new ResourceLock() {\r\n            @Override\r\n            public void close() {\r\n                CloseableReentrantLock.this.unlock();\r\n            }\r\n        };\r\n    \r\n        /**\r\n         * @return an {@link AutoCloseable} once the lock has been acquired.\r\n         */\r\n        public ResourceLock lockAsResource() {\r\n            lock();\r\n            return unlocker;\r\n        }\r\n    }\r\n\r\nLeaner **Java 8** solution using a lambda:\r\n\r\n    public class CloseableReentrantLock extends ReentrantLock {\r\n\r\n        /**\r\n         * @return an {@link AutoCloseable} once the lock has been acquired.\r\n         */\r\n        public ResourceLock lockAsResource() {\r\n            lock();\r\n            return this::unlock;\r\n        }\r\n    }\r\n\r\nDemonstration:\r\n\r\n    public static void main(String[] args) {\r\n        CloseableReentrantLock lock = new CloseableReentrantLock();\r\n\r\n        try (ResourceLock ignored = lock.lockAsResource()) {\r\n            try (ResourceLock ignored2 = lock.lockAsResource()) {\r\n                System.out.println(lock.getHoldCount());  // 2\r\n            }\r\n        }\r\n        System.out.println(lock.getHoldCount());  // 0\r\n    }\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReentrantLock.html\r\n  [2]: https://docs.oracle.com/javase/7/docs/api/java/nio/channels/FileChannel.html#lock()","title":"Are Locks AutoCloseable?","body":"<p>The general-purpose <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReentrantLock.html\" rel=\"noreferrer\"><code>ReentrantLock</code></a> neither implements nor provides anything that implements the <code>AutoCloseable</code> interface necessary for a try-with-resources statement. The concept isn't completely foreign to the Java API though, as <a href=\"https://docs.oracle.com/javase/7/docs/api/java/nio/channels/FileChannel.html#lock()\" rel=\"noreferrer\"><code>FileChannel.lock()</code></a> offers this functionality.</p>\n\n<p>The answers given so far share solutions that have some issues, such as creating an unnecessary object on each lock call, exposing an error-prone API or risk failing after the lock is acquired but before the try-finally is entered.</p>\n\n<p><strong>Java 7</strong> solution:</p>\n\n<pre><code>public interface ResourceLock extends AutoCloseable {\n\n    /**\n     * Unlocking doesn't throw any checked exception.\n     */\n    @Override\n    void close();\n}\n\npublic class CloseableReentrantLock extends ReentrantLock {\n\n    private final ResourceLock unlocker = new ResourceLock() {\n        @Override\n        public void close() {\n            CloseableReentrantLock.this.unlock();\n        }\n    };\n\n    /**\n     * @return an {@link AutoCloseable} once the lock has been acquired.\n     */\n    public ResourceLock lockAsResource() {\n        lock();\n        return unlocker;\n    }\n}\n</code></pre>\n\n<p>Leaner <strong>Java 8</strong> solution using a lambda:</p>\n\n<pre><code>public class CloseableReentrantLock extends ReentrantLock {\n\n    /**\n     * @return an {@link AutoCloseable} once the lock has been acquired.\n     */\n    public ResourceLock lockAsResource() {\n        lock();\n        return this::unlock;\n    }\n}\n</code></pre>\n\n<p>Demonstration:</p>\n\n<pre><code>public static void main(String[] args) {\n    CloseableReentrantLock lock = new CloseableReentrantLock();\n\n    try (ResourceLock ignored = lock.lockAsResource()) {\n        try (ResourceLock ignored2 = lock.lockAsResource()) {\n            System.out.println(lock.getHoldCount());  // 2\n        }\n    }\n    System.out.println(lock.getHoldCount());  // 0\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6159169,"reputation":169,"user_id":4801311,"display_name":"SomeUsername1"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1574017687,"creation_date":1574017687,"answer_id":58904146,"question_id":6965731,"body_markdown":"Extending the Java8 solution of @skoskav to ReentrantReadWriteLock:\r\n\r\n```\r\npublic interface ResourceLock extends AutoCloseable {\r\n    /**\r\n     * Unlocking doesn&#39;t throw any checked exception.\r\n     */\r\n    @Override\r\n    void close();\r\n}    \r\n```   \r\n``` \r\npublic class CloseableReentrantRWLock extends ReentrantReadWriteLock {\r\n\r\n    /**\r\n     * @return an {@link AutoCloseable} once the ReadLock has been acquired\r\n     */\r\n    public ResourceLock lockRead() {\r\n        this.readLock().lock();\r\n        return () -&gt; this.readLock().unlock();\r\n    }\r\n\r\n     /**\r\n     * @return an {@link AutoCloseable} once the WriteLock has been acquired.\r\n     */\r\n    public ResourceLock lockWrite() {\r\n        this.writeLock().lock();\r\n        return () -&gt; this.writeLock().unlock();\r\n    }\r\n} \r\n```","title":"Are Locks AutoCloseable?","body":"<p>Extending the Java8 solution of @skoskav to ReentrantReadWriteLock:</p>\n\n<pre><code>public interface ResourceLock extends AutoCloseable {\n    /**\n     * Unlocking doesn't throw any checked exception.\n     */\n    @Override\n    void close();\n}    \n</code></pre>\n\n<pre><code>public class CloseableReentrantRWLock extends ReentrantReadWriteLock {\n\n    /**\n     * @return an {@link AutoCloseable} once the ReadLock has been acquired\n     */\n    public ResourceLock lockRead() {\n        this.readLock().lock();\n        return () -&gt; this.readLock().unlock();\n    }\n\n     /**\n     * @return an {@link AutoCloseable} once the WriteLock has been acquired.\n     */\n    public ResourceLock lockWrite() {\n        this.writeLock().lock();\n        return () -&gt; this.writeLock().unlock();\n    }\n} \n</code></pre>\n"},{"tags":[],"owner":{"account_id":204515,"reputation":11679,"user_id":452775,"accept_rate":63,"display_name":"Lii"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1576181105,"creation_date":1576181105,"answer_id":59311965,"question_id":6965731,"body_markdown":"I think a simple util method which takes a lock and a `Runnable` is better than using the try-with-resource statement with locks.\r\n\r\nLike this:\r\n\r\n\tpublic static void locked(Lock lock, Runnable r) {\r\n\t\tlock.lock();\r\n\t\t\r\n\t\ttry {\r\n\t\t\tr.run();\r\n\t\t} finally {\r\n\t\t\tlock.unlock();\r\n\t\t}\r\n\t}\r\n\r\nUsage example:\r\n\r\n\tlocked(lock, () -&gt; {\r\n\t\t// Do your stuff\r\n\t});\r\n\r\n\r\nAdvantages:\r\n\r\n* There is no dummy variable created for the try-with-resource.\r\n* I think it is very clear.\r\n\r\nDisadvantage\r\n\r\n* A `Runnable` instance is allocated for each calls, something that some of the other solutions avoid. But this is insignificant in almost all cases.\r\n* Only works if you can use Java 8.\r\n","title":"Are Locks AutoCloseable?","body":"<p>I think a simple util method which takes a lock and a <code>Runnable</code> is better than using the try-with-resource statement with locks.</p>\n\n<p>Like this:</p>\n\n<pre><code>public static void locked(Lock lock, Runnable r) {\n    lock.lock();\n\n    try {\n        r.run();\n    } finally {\n        lock.unlock();\n    }\n}\n</code></pre>\n\n<p>Usage example:</p>\n\n<pre><code>locked(lock, () -&gt; {\n    // Do your stuff\n});\n</code></pre>\n\n<p>Advantages:</p>\n\n<ul>\n<li>There is no dummy variable created for the try-with-resource.</li>\n<li>I think it is very clear.</li>\n</ul>\n\n<p>Disadvantage</p>\n\n<ul>\n<li>A <code>Runnable</code> instance is allocated for each calls, something that some of the other solutions avoid. But this is insignificant in almost all cases.</li>\n<li>Only works if you can use Java 8.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":3212773,"reputation":36,"user_id":2712365,"display_name":"Mark Bednarczyk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1608229880,"creation_date":1608229880,"answer_id":65346418,"question_id":6965731,"body_markdown":"Here is another solution that works great and is super efficient at the expense of a `ThreadLocal` lookup per lock request. This solution caches the `AutoCloseable` part/wrapper and reuses it on a per-thread basis.\r\n\r\nFirst we have a wrapper class `ResourceLock` around a normal `Lock` that we will have many instances of. This is the part we want to reuse. The wrapper implements the `Lock` interface so it behaves like a normal `Lock` but one that can be auto closed:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    public class ResourceLock implements AutoCloseable, Lock {\r\n    \r\n    \tprivate Lock lock;\r\n    \r\n    \tpublic ResourceLock(Lock lock) {\r\n    \t\tthis(lock, true);\r\n    \t}\r\n    \t\r\n    \tpublic ResourceLock(Lock lock, boolean eagerLock) {\r\n    \t\tthis.lock = lock;\r\n    \t\t\r\n    \t\tif (eagerLock) {\r\n    \t\t\tlock.lock();\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tpublic void lock() {\r\n    \t\tlock.lock();\r\n    \t}\r\n    \r\n    \tpublic void lockInterruptibly() throws InterruptedException {\r\n    \t\tlock.lockInterruptibly();\r\n    \t}\r\n    \r\n    \tpublic Condition newCondition() {\r\n    \t\treturn lock.newCondition();\r\n    \t}\r\n    \r\n    \tResourceLock setLock(Lock lock) {\r\n    \t\tthis.lock = lock;\r\n    \r\n    \t\treturn this;\r\n    \t}\r\n    \r\n    \tpublic boolean tryLock() {\r\n    \t\treturn lock.tryLock();\r\n    \t}\r\n    \r\n    \tpublic boolean tryLock(long time, TimeUnit unit) throws InterruptedException {\r\n    \t\treturn lock.tryLock(time, unit);\r\n    \t}\r\n    \r\n    \tpublic void unlock() {\r\n    \t\tlock.unlock();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void close() {\r\n    \t\tlock.unlock();\r\n    \t}\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nIn none reusable form you would simply use it like this:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    try (ResourceLock ignore = new ResourceLock(rwl.writeLock())) {\r\n        // Resource locked in here\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nOr we can add a caching capable wrapper which will let us reuse `ResourceLock` objects per thread.\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    public class ResourceLockCache {\r\n    \r\n    \tprivate final Lock lock;\r\n    \tprivate final Supplier&lt;ResourceLock&gt; cachingStrategy;\r\n    \r\n    \tpublic ResourceLockCache(Lock lock) {\r\n    \t\tthis.lock = lock;\r\n    \r\n    \t\tfinal ThreadLocal&lt;ResourceLock&gt; strategy = new ThreadLocal&lt;ResourceLock&gt;() {\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tprotected ResourceLock initialValue() {\r\n    \t\t\t\treturn new ResourceLock();\r\n    \t\t\t}\r\n    \r\n    \t\t};\r\n    \r\n    \t\tthis.cachingStrategy = strategy::get;\r\n    \t}\r\n    \r\n    \tpublic ResourceLockCache(Lock lock, Supplier&lt;ResourceLock&gt; cachingStrategy) {\r\n    \t\tthis.lock = lock;\r\n    \t\tthis.cachingStrategy = cachingStrategy;\r\n    \t}\r\n    \r\n    \tpublic ResourceLock getAsResource() {\r\n    \t\tfinal ResourceLock activeLock = cachingStrategy.get();\r\n    \r\n    \t\tactiveLock.setLock(lock);\r\n    \r\n    \t\treturn activeLock;\r\n    \t}\r\n    \r\n    \tpublic ResourceLock getAsResourceAndLock() {\r\n    \t    final ResourceLock activeLock = cachingStrategy.get();\r\n    \r\n    \t    activeLock.setLock(lock);\r\n    \t    activeLock.lock();\r\n    \r\n    \t    return activeLock;\r\n        }\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nNow we can use reuse each auto-closeable lock:\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    ResourceLockCache rlc = new ResourceLockCache(new ReentrantLock());\r\n    // Or this to change caching strategy to new object per lock\r\n    ResourceLockCache rlc2 = new ResourceLockCache(new ReentrantLock(), ResourceLock::new);\r\n    \r\n    try (ResourceLock ignore = rlc.getAsResourceAndLock()) {\r\n    \t// Resource locked in here\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nAlso have a `ReadWriteLock` variant for more complex locking needs. It implements the `ReadWriteLock` interface so its more versatile as you can use complex locking strategies such as `tryLock` etc:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    public class ResourceRWLockCache implements ReadWriteLock {\r\n    \r\n    \tprivate final ReadWriteLock rwl;\r\n    \tprivate final Supplier&lt;ResourceLock&gt; cachingStrategy;\r\n    \r\n    \tpublic ResourceRWLockCache(ReadWriteLock rwl) {\r\n    \t\tthis.rwl = rwl;\r\n    \r\n    \t\tfinal ThreadLocal&lt;ResourceLock&gt; strategy = new ThreadLocal&lt;ResourceLock&gt;() {\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tprotected ResourceLock initialValue() {\r\n    \t\t\t\treturn new ResourceLock();\r\n    \t\t\t}\r\n    \r\n    \t\t};\r\n    \r\n    \t\tthis.cachingStrategy = strategy::get;\r\n    \t}\r\n    \r\n    \tpublic ResourceRWLockCache(ReadWriteLock rwl, Supplier&lt;ResourceLock&gt; cachingStrategy) {\r\n    \t\tthis.rwl = rwl;\r\n    \t\tthis.cachingStrategy = cachingStrategy;\r\n    \t}\r\n    \r\n    \tpublic ResourceLock readLock() {\r\n    \t\tfinal ResourceLock activeLock = cachingStrategy.get();\r\n    \r\n    \t\tactiveLock.setLock(rwl.readLock());\r\n    \r\n    \t\treturn activeLock;\r\n    \t}\r\n    \r\n    \tpublic ResourceLock readLockAndLock() {\r\n    \t\tfinal ResourceLock activeLock = cachingStrategy.get();\r\n    \r\n    \t\tactiveLock.setLock(rwl.readLock());\r\n    \t\tactiveLock.lock();\r\n    \r\n    \t\treturn activeLock;\r\n    \t}\r\n    \r\n    \tpublic ResourceLock writeLock() {\r\n    \t\tfinal ResourceLock activeLock = cachingStrategy.get();\r\n    \r\n    \t\tactiveLock.setLock(rwl.writeLock());\r\n    \r\n    \t\treturn activeLock;\r\n    \t}\r\n    \r\n    \tpublic ResourceLock writeLockAndLock() {\r\n    \t\tfinal ResourceLock activeLock = cachingStrategy.get();\r\n    \r\n    \t\tactiveLock.setLock(rwl.writeLock());\r\n    \t\tactiveLock.lock();\r\n    \r\n    \t\treturn activeLock;\r\n    \t}\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    ResourceRWLockCache rwl = new ResourceRWLockCache(new ReentrantReadWriteLock());\r\n    // Or this to change caching strategy to new object per lock\r\n    ResourceRWLockCache rwl2 = new ResourceRWLockCache(new ReentrantReadWriteLock(), ResourceLock::new);\r\n    \r\n    try (ResourceLock ignore = rwl.writeLockAndLock()) {\r\n    \t// Resource locked in here\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nHope this solution helps for single and multi lock strategies with re-using the resource release handlers.\r\n\r\n\r\n","title":"Are Locks AutoCloseable?","body":"<p>Here is another solution that works great and is super efficient at the expense of a <code>ThreadLocal</code> lookup per lock request. This solution caches the <code>AutoCloseable</code> part/wrapper and reuses it on a per-thread basis.</p>\n<p>First we have a wrapper class <code>ResourceLock</code> around a normal <code>Lock</code> that we will have many instances of. This is the part we want to reuse. The wrapper implements the <code>Lock</code> interface so it behaves like a normal <code>Lock</code> but one that can be auto closed:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ResourceLock implements AutoCloseable, Lock {\n\n    private Lock lock;\n\n    public ResourceLock(Lock lock) {\n        this(lock, true);\n    }\n    \n    public ResourceLock(Lock lock, boolean eagerLock) {\n        this.lock = lock;\n        \n        if (eagerLock) {\n            lock.lock();\n        }\n    }\n\n    public void lock() {\n        lock.lock();\n    }\n\n    public void lockInterruptibly() throws InterruptedException {\n        lock.lockInterruptibly();\n    }\n\n    public Condition newCondition() {\n        return lock.newCondition();\n    }\n\n    ResourceLock setLock(Lock lock) {\n        this.lock = lock;\n\n        return this;\n    }\n\n    public boolean tryLock() {\n        return lock.tryLock();\n    }\n\n    public boolean tryLock(long time, TimeUnit unit) throws InterruptedException {\n        return lock.tryLock(time, unit);\n    }\n\n    public void unlock() {\n        lock.unlock();\n    }\n\n    @Override\n    public void close() {\n        lock.unlock();\n    }\n}\n</code></pre>\n\n<p>In none reusable form you would simply use it like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>try (ResourceLock ignore = new ResourceLock(rwl.writeLock())) {\n    // Resource locked in here\n}\n</code></pre>\n\n<p>Or we can add a caching capable wrapper which will let us reuse <code>ResourceLock</code> objects per thread.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ResourceLockCache {\n\n    private final Lock lock;\n    private final Supplier&lt;ResourceLock&gt; cachingStrategy;\n\n    public ResourceLockCache(Lock lock) {\n        this.lock = lock;\n\n        final ThreadLocal&lt;ResourceLock&gt; strategy = new ThreadLocal&lt;ResourceLock&gt;() {\n\n            @Override\n            protected ResourceLock initialValue() {\n                return new ResourceLock();\n            }\n\n        };\n\n        this.cachingStrategy = strategy::get;\n    }\n\n    public ResourceLockCache(Lock lock, Supplier&lt;ResourceLock&gt; cachingStrategy) {\n        this.lock = lock;\n        this.cachingStrategy = cachingStrategy;\n    }\n\n    public ResourceLock getAsResource() {\n        final ResourceLock activeLock = cachingStrategy.get();\n\n        activeLock.setLock(lock);\n\n        return activeLock;\n    }\n\n    public ResourceLock getAsResourceAndLock() {\n        final ResourceLock activeLock = cachingStrategy.get();\n\n        activeLock.setLock(lock);\n        activeLock.lock();\n\n        return activeLock;\n    }\n}\n</code></pre>\n\n<p>Now we can use reuse each auto-closeable lock:</p>\n<pre class=\"lang-java prettyprint-override\"><code>ResourceLockCache rlc = new ResourceLockCache(new ReentrantLock());\n// Or this to change caching strategy to new object per lock\nResourceLockCache rlc2 = new ResourceLockCache(new ReentrantLock(), ResourceLock::new);\n\ntry (ResourceLock ignore = rlc.getAsResourceAndLock()) {\n    // Resource locked in here\n}\n</code></pre>\n\n<p>Also have a <code>ReadWriteLock</code> variant for more complex locking needs. It implements the <code>ReadWriteLock</code> interface so its more versatile as you can use complex locking strategies such as <code>tryLock</code> etc:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ResourceRWLockCache implements ReadWriteLock {\n\n    private final ReadWriteLock rwl;\n    private final Supplier&lt;ResourceLock&gt; cachingStrategy;\n\n    public ResourceRWLockCache(ReadWriteLock rwl) {\n        this.rwl = rwl;\n\n        final ThreadLocal&lt;ResourceLock&gt; strategy = new ThreadLocal&lt;ResourceLock&gt;() {\n\n            @Override\n            protected ResourceLock initialValue() {\n                return new ResourceLock();\n            }\n\n        };\n\n        this.cachingStrategy = strategy::get;\n    }\n\n    public ResourceRWLockCache(ReadWriteLock rwl, Supplier&lt;ResourceLock&gt; cachingStrategy) {\n        this.rwl = rwl;\n        this.cachingStrategy = cachingStrategy;\n    }\n\n    public ResourceLock readLock() {\n        final ResourceLock activeLock = cachingStrategy.get();\n\n        activeLock.setLock(rwl.readLock());\n\n        return activeLock;\n    }\n\n    public ResourceLock readLockAndLock() {\n        final ResourceLock activeLock = cachingStrategy.get();\n\n        activeLock.setLock(rwl.readLock());\n        activeLock.lock();\n\n        return activeLock;\n    }\n\n    public ResourceLock writeLock() {\n        final ResourceLock activeLock = cachingStrategy.get();\n\n        activeLock.setLock(rwl.writeLock());\n\n        return activeLock;\n    }\n\n    public ResourceLock writeLockAndLock() {\n        final ResourceLock activeLock = cachingStrategy.get();\n\n        activeLock.setLock(rwl.writeLock());\n        activeLock.lock();\n\n        return activeLock;\n    }\n}\n</code></pre>\n\n<pre class=\"lang-java prettyprint-override\"><code>ResourceRWLockCache rwl = new ResourceRWLockCache(new ReentrantReadWriteLock());\n// Or this to change caching strategy to new object per lock\nResourceRWLockCache rwl2 = new ResourceRWLockCache(new ReentrantReadWriteLock(), ResourceLock::new);\n\ntry (ResourceLock ignore = rwl.writeLockAndLock()) {\n    // Resource locked in here\n}\n</code></pre>\n\n<p>Hope this solution helps for single and multi lock strategies with re-using the resource release handlers.</p>\n"},{"tags":[],"owner":{"account_id":8235,"reputation":87020,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645312599,"creation_date":1645311158,"answer_id":71189885,"question_id":6965731,"body_markdown":"Extending [skoskav](https://stackoverflow.com/a/46248923/14731)&#39;s excellent answer to `ReadWriteLock`:\r\n\r\n**CloseableLock.java:**\r\n\r\n    public interface CloseableLock extends AutoCloseable\r\n    {\r\n    \t/**\r\n    \t * Release the lock.\r\n    \t */\r\n    \t@Override\r\n    \tvoid close();\r\n    }\r\n\r\n**ReadWriteLockAsResource:**\r\n\r\n    import java.util.concurrent.locks.Lock;\r\n    import java.util.concurrent.locks.ReadWriteLock;\r\n    \r\n    /**\r\n     * Enables the use of {@code try-with-resources} with {@code ReadWriteLock}.\r\n     */\r\n    public final class ReadWriteLockAsResource\r\n    {\r\n    \tprivate final ReadWriteLock lock;\r\n    \r\n    \t/**\r\n    \t * @param lock a lock\r\n    \t * @throws NullPointerException if {@code lock} is null\r\n    \t */\r\n    \tpublic ReadWriteLockAsResource(ReadWriteLock lock)\r\n    \t{\r\n    \t\tif (lock == null)\r\n              throw new NullPointerException(&quot;lock may not be null&quot;);\r\n    \t\tthis.lock = lock;\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * Starts a new read-lock.\r\n         *\r\n         * @return the read-lock as a resource\r\n    \t */\r\n    \tpublic CloseableLock readLock()\r\n    \t{\r\n    \t\tLock readLock = lock.readLock();\r\n    \t\treadLock.lock();\r\n    \t\treturn readLock::unlock;\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * Starts a new write-lock.\r\n         *\r\n         * @return the write-lock as a resource\r\n    \t */\r\n    \tpublic CloseableLock writeLock()\r\n    \t{\r\n    \t\tLock writeLock = lock.writeLock();\r\n    \t\twriteLock.lock();\r\n    \t\treturn writeLock::unlock;\r\n    \t}\r\n\r\n    \t/**\r\n\t     * Returns a new condition.\r\n    \t *\r\n\t     * @return a new condition\r\n    \t */\r\n\t    public Condition newCondition()\r\n    \t{\r\n\t    \treturn lock.writeLock().newCondition();\r\n    \t}\r\n    }\r\n\r\n**Usage:**\r\n\r\n    public final class GuideToTheUniverse\r\n    {\r\n    \tprivate final LockAsResource lock = new LockAsResource(new ReentrantReadWriteLock());\r\n    \t\r\n    \tpublic int answerToLife()\r\n    \t{\r\n    \t\ttry (CloseableLock writeLock = lock.writeLock())\r\n    \t\t{\r\n    \t\t\tSystem.out.println(&quot;Look ma&#39;, no hands!&quot;);\r\n    \t\t\treturn 42;\r\n    \t\t}\r\n    \t}\r\n    }","title":"Are Locks AutoCloseable?","body":"<p>Extending <a href=\"https://stackoverflow.com/a/46248923/14731\">skoskav</a>'s excellent answer to <code>ReadWriteLock</code>:</p>\n<p><strong>CloseableLock.java:</strong></p>\n<pre><code>public interface CloseableLock extends AutoCloseable\n{\n    /**\n     * Release the lock.\n     */\n    @Override\n    void close();\n}\n</code></pre>\n<p><strong>ReadWriteLockAsResource:</strong></p>\n<pre><code>import java.util.concurrent.locks.Lock;\nimport java.util.concurrent.locks.ReadWriteLock;\n\n/**\n * Enables the use of {@code try-with-resources} with {@code ReadWriteLock}.\n */\npublic final class ReadWriteLockAsResource\n{\n    private final ReadWriteLock lock;\n\n    /**\n     * @param lock a lock\n     * @throws NullPointerException if {@code lock} is null\n     */\n    public ReadWriteLockAsResource(ReadWriteLock lock)\n    {\n        if (lock == null)\n          throw new NullPointerException(&quot;lock may not be null&quot;);\n        this.lock = lock;\n    }\n\n    /**\n     * Starts a new read-lock.\n     *\n     * @return the read-lock as a resource\n     */\n    public CloseableLock readLock()\n    {\n        Lock readLock = lock.readLock();\n        readLock.lock();\n        return readLock::unlock;\n    }\n\n    /**\n     * Starts a new write-lock.\n     *\n     * @return the write-lock as a resource\n     */\n    public CloseableLock writeLock()\n    {\n        Lock writeLock = lock.writeLock();\n        writeLock.lock();\n        return writeLock::unlock;\n    }\n\n    /**\n     * Returns a new condition.\n     *\n     * @return a new condition\n     */\n    public Condition newCondition()\n    {\n        return lock.writeLock().newCondition();\n    }\n}\n</code></pre>\n<p><strong>Usage:</strong></p>\n<pre><code>public final class GuideToTheUniverse\n{\n    private final LockAsResource lock = new LockAsResource(new ReentrantReadWriteLock());\n    \n    public int answerToLife()\n    {\n        try (CloseableLock writeLock = lock.writeLock())\n        {\n            System.out.println(&quot;Look ma', no hands!&quot;);\n            return 42;\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":91845,"reputation":258335,"user_id":252000,"accept_rate":95,"display_name":"fredoverflow"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19626,"favorite_count":0,"down_vote_count":0,"up_vote_count":53,"accepted_answer_id":6965745,"answer_count":12,"score":53,"last_activity_date":1645312599,"creation_date":1312620395,"question_id":6965731,"body_markdown":"Are `Locks` auto-closeable? That is, instead of:\r\n\r\n    Lock someLock = new ReentrantLock();\r\n    someLock.lock();\r\n    try\r\n    {\r\n        // ...\r\n    }\r\n    finally\r\n    {\r\n        someLock.unlock();\r\n    }\r\n\r\n...can I say:\r\n\r\n    try (Lock someLock = new ReentrantLock())\r\n    {\r\n        someLock.lock();\r\n        // ...\r\n    }\r\n\r\n...in Java 7?","title":"Are Locks AutoCloseable?","body":"<p>Are <code>Locks</code> auto-closeable? That is, instead of:</p>\n\n<pre><code>Lock someLock = new ReentrantLock();\nsomeLock.lock();\ntry\n{\n    // ...\n}\nfinally\n{\n    someLock.unlock();\n}\n</code></pre>\n\n<p>...can I say:</p>\n\n<pre><code>try (Lock someLock = new ReentrantLock())\n{\n    someLock.lock();\n    // ...\n}\n</code></pre>\n\n<p>...in Java 7?</p>\n"},{"tags":["java","list","performance"],"comments":[{"owner":{"account_id":19309260,"reputation":218,"user_id":14115415,"display_name":"AkSh"},"score":0,"creation_date":1645281029,"post_id":71185414,"comment_id":125831669,"body_markdown":"Using stream you can do this faster but of course, you can&#39;t really avoid iteration of 3 times this way.","body":"Using stream you can do this faster but of course, you can&#39;t really avoid iteration of 3 times this way."},{"owner":{"account_id":5418581,"reputation":347,"user_id":4313009,"display_name":"Alfredo Tost&#243;n"},"score":0,"creation_date":1645282164,"post_id":71185414,"comment_id":125831913,"body_markdown":"I can only think in extract `category.isActive() != null` from the `if` and put it on the return (assuming the list has no repeated codes): `return category.isActive() != null &amp;&amp; !category.isActive()`.","body":"I can only think in extract <code>category.isActive() != null</code> from the <code>if</code> and put it on the return (assuming the list has no repeated codes): <code>return category.isActive() != null &amp;&amp; !category.isActive()</code>."}],"answers":[{"tags":[],"owner":{"account_id":960281,"reputation":388,"user_id":9387519,"display_name":"Five"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645294464,"creation_date":1645290710,"answer_id":71187265,"question_id":71185414,"body_markdown":"I would like to share my insights, maybe it is not an answer to your question. I try to list the possibilities that seem to be helpful.\r\n\r\nI think you cannot do much with this data structure. You have collected your data into a list, and that&#39;s why you couldn&#39;t find a list member by its property in a simpler way. So that&#39;s why you need to iterate over this list as many times as you search for an item.\r\n\r\nBasically, you have 2 choices, keeping the base data structure, `List&lt;Category&gt;`, or changing it to another one.\r\n1. *Keeping the list data structure*. - The first thing I can think of, is that you can modify your method slightly, and gather all the Strings you need to test and test each item with them (if you found the item, you should remove the String from the list of Strings). That&#39;s how you need to iterate over the list only once.\r\n\r\n   `private Map&lt;String, Boolean&gt; checkDataFromList(final List&lt;Category&gt; categories, final List&lt;String&gt; val){...}`\r\n\r\n   I don&#39;t recommend this solution. I believe it makes the code harder to understand and you probably won&#39;t yield much performance.\r\n\r\n2. *Changing the data structure* - The first thing that comes to my mind, is mapping. You could map these Categories by their codes. That way you don&#39;t need to iterate over the list. Using `Map&lt;String/*code*/, Category&gt;` can maybe yield performance, but it could make your code more difficult.\r\n\r\n+1 You can often enhance performance by making your data structure items comparable and then using a sorted structure. Besides, you could try using caches if it makes any sense.","title":"Iterating list performance","body":"<p>I would like to share my insights, maybe it is not an answer to your question. I try to list the possibilities that seem to be helpful.</p>\n<p>I think you cannot do much with this data structure. You have collected your data into a list, and that's why you couldn't find a list member by its property in a simpler way. So that's why you need to iterate over this list as many times as you search for an item.</p>\n<p>Basically, you have 2 choices, keeping the base data structure, <code>List&lt;Category&gt;</code>, or changing it to another one.</p>\n<ol>\n<li><p><em>Keeping the list data structure</em>. - The first thing I can think of, is that you can modify your method slightly, and gather all the Strings you need to test and test each item with them (if you found the item, you should remove the String from the list of Strings). That's how you need to iterate over the list only once.</p>\n<p><code>private Map&lt;String, Boolean&gt; checkDataFromList(final List&lt;Category&gt; categories, final List&lt;String&gt; val){...}</code></p>\n<p>I don't recommend this solution. I believe it makes the code harder to understand and you probably won't yield much performance.</p>\n</li>\n<li><p><em>Changing the data structure</em> - The first thing that comes to my mind, is mapping. You could map these Categories by their codes. That way you don't need to iterate over the list. Using <code>Map&lt;String/*code*/, Category&gt;</code> can maybe yield performance, but it could make your code more difficult.</p>\n</li>\n</ol>\n<p>+1 You can often enhance performance by making your data structure items comparable and then using a sorted structure. Besides, you could try using caches if it makes any sense.</p>\n"},{"tags":[],"owner":{"account_id":4741976,"reputation":5385,"user_id":3834413,"display_name":"Eugene"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645312186,"creation_date":1645290933,"answer_id":71187292,"question_id":71185414,"body_markdown":"**Solution 1**&lt;br&gt;\r\nOne loop by categories.\r\n\r\n```java\r\n    public void prepareData(final List&lt;Category&gt; categories, final Map&lt;String, Boolean&gt; preferencesMap) {\r\n        List&lt;String&gt; predefinedCategories = Stream.of(&quot;ACCESSORIES&quot;, &quot;WATCHES&quot;, &quot;PHONES&quot;).collect(Collectors.toList());\r\n        predefinedCategories.forEach(predefineCategory -&gt; preferencesMap.put(predefineCategory, Boolean.FALSE));\r\n\r\n        for(Category category: categories) {\r\n            predefinedCategories.stream().filter(val -&gt; val.equalsIgnoreCase(category.getCode()) &amp;&amp; category.isActive() != null)\r\n                                         .findFirst()\r\n                                         .ifPresent(existingCategoryCode -&gt;\r\n                                         {\r\n                                             preferencesMap.put(existingCategoryCode, !category.isActive());\r\n                                             predefinedCategories.remove(existingCategoryCode);\r\n                                         });\r\n            if (predefinedCategories.isEmpty()) {\r\n                break;\r\n            }\r\n        }\r\n    }\r\n```\r\n\r\n**Solution 2**&lt;br&gt;\r\nIn case if you have ability to change categories `List` to `Map&lt;String, Category&gt;`\r\n\r\n```java\r\n    public void prepareData(final Map&lt;String, Category&gt; categoriesMap, final Map&lt;String, Boolean&gt; preferencesMap) {\r\n         Stream.of(&quot;ACCESSORIES&quot;, &quot;WATCHES&quot;, &quot;PHONES&quot;).forEach(predefinedCategory -&gt; {\r\n            Category category = categoriesMap.get(predefinedCategory);\r\n            preferencesMap.put(predefinedCategory, category != null &amp;&amp; category.isActive() != null &amp;&amp; !category.isActive());\r\n        });\r\n    }\r\n```","title":"Iterating list performance","body":"<p><strong>Solution 1</strong><br>\nOne loop by categories.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public void prepareData(final List&lt;Category&gt; categories, final Map&lt;String, Boolean&gt; preferencesMap) {\n        List&lt;String&gt; predefinedCategories = Stream.of(&quot;ACCESSORIES&quot;, &quot;WATCHES&quot;, &quot;PHONES&quot;).collect(Collectors.toList());\n        predefinedCategories.forEach(predefineCategory -&gt; preferencesMap.put(predefineCategory, Boolean.FALSE));\n\n        for(Category category: categories) {\n            predefinedCategories.stream().filter(val -&gt; val.equalsIgnoreCase(category.getCode()) &amp;&amp; category.isActive() != null)\n                                         .findFirst()\n                                         .ifPresent(existingCategoryCode -&gt;\n                                         {\n                                             preferencesMap.put(existingCategoryCode, !category.isActive());\n                                             predefinedCategories.remove(existingCategoryCode);\n                                         });\n            if (predefinedCategories.isEmpty()) {\n                break;\n            }\n        }\n    }\n</code></pre>\n<p><strong>Solution 2</strong><br>\nIn case if you have ability to change categories <code>List</code> to <code>Map&lt;String, Category&gt;</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>    public void prepareData(final Map&lt;String, Category&gt; categoriesMap, final Map&lt;String, Boolean&gt; preferencesMap) {\n         Stream.of(&quot;ACCESSORIES&quot;, &quot;WATCHES&quot;, &quot;PHONES&quot;).forEach(predefinedCategory -&gt; {\n            Category category = categoriesMap.get(predefinedCategory);\n            preferencesMap.put(predefinedCategory, category != null &amp;&amp; category.isActive() != null &amp;&amp; !category.isActive());\n        });\n    }\n</code></pre>\n"}],"owner":{"account_id":5043672,"reputation":1360,"user_id":4050340,"accept_rate":57,"display_name":"CHARAFI Saad"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1645312186,"creation_date":1645276978,"question_id":71185414,"body_markdown":"I need a solution to improve the performance of this method. I need to insert these inputs in order using LinkedHashMap and it works perfectly. However, I don&#39;t like this solution because I have a list and each time I go through it to retrieve the input that I want to insert into this map.\r\n\r\nHere is my code\r\n\r\n    public void prepareData(final List&lt;Category&gt; categories, final Map&lt;String, Boolean&gt; preferencesMap) {\r\n\t\tpreferencesMap.put(&quot;ACCESSORIES&quot;,checkDataFromList(categories, &quot;ACCESSORIES&quot;));\r\n\t\tpreferencesMap.put(&quot;WATCHES&quot;,checkDataFromList(categories, &quot;WATCHES&quot;));\r\n\t\tpreferencesMap.put(&quot;PHONES&quot;,checkDataFromList(categories, &quot;PHONES&quot;));\r\n\t}\r\n\t\r\n\tprivate Boolean checkDataFromList(final List&lt;Category&gt; categories, final String val){\r\n\t\tfor (Category category: categories) {\r\n\t\t\tif(val.equalsIgnoreCase(category.getCode()) &amp;&amp; category.isActive() != null){\r\n\t\t\t\treturn !category.isActive();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn Boolean.FALSE;\r\n\t}\r\n\r\nI need a way to retrieve these objects without iterating through this list 3 times.\r\n\r\n","title":"Iterating list performance","body":"<p>I need a solution to improve the performance of this method. I need to insert these inputs in order using LinkedHashMap and it works perfectly. However, I don't like this solution because I have a list and each time I go through it to retrieve the input that I want to insert into this map.</p>\n<p>Here is my code</p>\n<pre><code>public void prepareData(final List&lt;Category&gt; categories, final Map&lt;String, Boolean&gt; preferencesMap) {\n    preferencesMap.put(&quot;ACCESSORIES&quot;,checkDataFromList(categories, &quot;ACCESSORIES&quot;));\n    preferencesMap.put(&quot;WATCHES&quot;,checkDataFromList(categories, &quot;WATCHES&quot;));\n    preferencesMap.put(&quot;PHONES&quot;,checkDataFromList(categories, &quot;PHONES&quot;));\n}\n\nprivate Boolean checkDataFromList(final List&lt;Category&gt; categories, final String val){\n    for (Category category: categories) {\n        if(val.equalsIgnoreCase(category.getCode()) &amp;&amp; category.isActive() != null){\n            return !category.isActive();\n        }\n    }\n    return Boolean.FALSE;\n}\n</code></pre>\n<p>I need a way to retrieve these objects without iterating through this list 3 times.</p>\n"},{"tags":["java","if-statement"],"comments":[{"owner":{"account_id":318397,"reputation":203598,"user_id":635608,"display_name":"Mat"},"score":2,"creation_date":1645309319,"post_id":71189686,"comment_id":125838146,"body_markdown":"You have the same test condition in both branches. That doesn&#39;t make sense.","body":"You have the same test condition in both branches. That doesn&#39;t make sense."},{"owner":{"account_id":5971143,"reputation":897,"user_id":4693430,"accept_rate":75,"display_name":"Xanlantos"},"score":0,"creation_date":1645309419,"post_id":71189686,"comment_id":125838167,"body_markdown":"You basically ask: is the balon red twice, elseif only gets called if the first one is not valid","body":"You basically ask: is the balon red twice, elseif only gets called if the first one is not valid"},{"owner":{"account_id":24153111,"reputation":11,"user_id":18117677,"display_name":"Matthew Nichols"},"score":0,"creation_date":1645672769,"post_id":71189686,"comment_id":125936864,"body_markdown":"Thank you both! I also discovered after hours of frustration, but unwilling to copy paste from internet, that my code was also missing the ! symbol for creating a (if &amp;&amp; !). Although I want to throw my computer sometimes, I&#39;m really enjoying Java.","body":"Thank you both! I also discovered after hours of frustration, but unwilling to copy paste from internet, that my code was also missing the ! symbol for creating a (if &amp;&amp; !). Although I want to throw my computer sometimes, I&#39;m really enjoying Java."}],"answers":[{"tags":[],"owner":{"account_id":1232799,"reputation":1734,"user_id":1197030,"display_name":"Joeblade"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645312116,"creation_date":1645312116,"answer_id":71189969,"question_id":71189686,"body_markdown":"I think this is easiest explained by pointing out that &#39;else if&#39; in java isn&#39;t a separate keyword. So it is equivalent to the following (which is harder to read but points out why your code is executed only once)\r\n\r\n    if ( isBalloon &amp;&amp; isRed ) {\r\n        isBalloon=false;\r\n        isRed=false;\r\n        System.out.println(&quot;Not a balloon&quot;);\r\n    } else {\r\n        if ( isBalloon &amp;&amp; isRed ) {\r\n            isBalloon=true;\r\n            isRed=false;\r\n            System.out.println(&quot;Balloon&quot;);\r\n        }\r\n    }\r\n\r\nthis is what else if really does. When your code runs it hits the first if condition and when it is correct it will run the associated block. it then doesn&#39;t process the else block. (that is the idea: only if or else runs, not both).\r\n\r\nIt looks like if / else if / else if / else   has multiple blocks on the same level but secretly they are nested.\r\n\r\nfor instance\r\n\r\n    if (a) {\r\n        // case a\r\n    } else if (b) {\r\n        // case b\r\n    } else if (c) {\r\n        // case c\r\n    } else {\r\n        // otherwise:\r\n    }\r\n\r\nis actually:\r\n\r\n    if (a) {\r\n        // case a\r\n    } else {\r\n        if (b) {\r\n            // case b\r\n        } else {\r\n            if (c) {\r\n                // case c\r\n            } else {\r\n                // otherwise\r\n            }\r\n        }\r\n    }\r\n\r\n","title":"if...else statement will only print my if line","body":"<p>I think this is easiest explained by pointing out that 'else if' in java isn't a separate keyword. So it is equivalent to the following (which is harder to read but points out why your code is executed only once)</p>\n<pre><code>if ( isBalloon &amp;&amp; isRed ) {\n    isBalloon=false;\n    isRed=false;\n    System.out.println(&quot;Not a balloon&quot;);\n} else {\n    if ( isBalloon &amp;&amp; isRed ) {\n        isBalloon=true;\n        isRed=false;\n        System.out.println(&quot;Balloon&quot;);\n    }\n}\n</code></pre>\n<p>this is what else if really does. When your code runs it hits the first if condition and when it is correct it will run the associated block. it then doesn't process the else block. (that is the idea: only if or else runs, not both).</p>\n<p>It looks like if / else if / else if / else   has multiple blocks on the same level but secretly they are nested.</p>\n<p>for instance</p>\n<pre><code>if (a) {\n    // case a\n} else if (b) {\n    // case b\n} else if (c) {\n    // case c\n} else {\n    // otherwise:\n}\n</code></pre>\n<p>is actually:</p>\n<pre><code>if (a) {\n    // case a\n} else {\n    if (b) {\n        // case b\n    } else {\n        if (c) {\n            // case c\n        } else {\n            // otherwise\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":24153111,"reputation":11,"user_id":18117677,"display_name":"Matthew Nichols"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":407,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1645312116,"creation_date":1645309113,"question_id":71189686,"body_markdown":"I&#39;ve run into a problem with my multi branch if...else statements. In the challenge question they ask us to print out a line if certain variables are true|false. My statements will only print my if statement, however they compile. I feel I&#39;m either missing something in my if statement that allows it to continue if a statement is not true|false.\r\n\r\nHere is what I have:\r\n\r\n    if ( isBalloon &amp;&amp; isRed ) {\r\n         isBalloon=false;\r\n         isRed=false;\r\n    System.out.println(&quot;Not a balloon&quot;);\r\n    }\r\n    else if ( isBalloon &amp;&amp; isRed ) {\r\n        isBalloon=true;\r\n        isRed=false;\r\n    System.out.println(&quot;Balloon&quot;);\r\n    }\r\n\r\nAlso, for clarity; when we do a multi branch statement (else if) requires variable declaration, where as (else) is just anything that makes our if statement false. Is this correct?","title":"if...else statement will only print my if line","body":"<p>I've run into a problem with my multi branch if...else statements. In the challenge question they ask us to print out a line if certain variables are true|false. My statements will only print my if statement, however they compile. I feel I'm either missing something in my if statement that allows it to continue if a statement is not true|false.</p>\n<p>Here is what I have:</p>\n<pre><code>if ( isBalloon &amp;&amp; isRed ) {\n     isBalloon=false;\n     isRed=false;\nSystem.out.println(&quot;Not a balloon&quot;);\n}\nelse if ( isBalloon &amp;&amp; isRed ) {\n    isBalloon=true;\n    isRed=false;\nSystem.out.println(&quot;Balloon&quot;);\n}\n</code></pre>\n<p>Also, for clarity; when we do a multi branch statement (else if) requires variable declaration, where as (else) is just anything that makes our if statement false. Is this correct?</p>\n"},{"tags":["java","apache-poi","docx"],"comments":[{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":1,"creation_date":1645337706,"post_id":71189947,"comment_id":125841560,"body_markdown":"What your code does: It adds the picture in a new text run at the end of the found paragraph. What you seem to want: Remove all runs in found paragraph to make it empty. Then add the picture in a new text run at the end of the found paragraph, which is now empty.","body":"What your code does: It adds the picture in a new text run at the end of the found paragraph. What you seem to want: Remove all runs in found paragraph to make it empty. Then add the picture in a new text run at the end of the found paragraph, which is now empty."},{"owner":{"account_id":23480587,"reputation":3,"user_id":17532778,"display_name":"ali zhadigerov"},"score":0,"creation_date":1645359474,"post_id":71189947,"comment_id":125845421,"body_markdown":"@AxelRichter Hi, I get your point, but I cannot remove all runs from a found paragraph, because it contains text on right side. I need a way to `edit` the &quot;run&quot; content.","body":"@AxelRichter Hi, I get your point, but I cannot remove all runs from a found paragraph, because it contains text on right side. I need a way to <code>edit</code> the &quot;run&quot; content."},{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":0,"creation_date":1645360374,"post_id":71189947,"comment_id":125845608,"body_markdown":"Then your picture is misleading. I cannot see any text at right side in same paragraph containing the text &quot;QR&quot;. And replacing single text runs is very complicated as text might spread over multiple different text runs and it is nearly impossible to determine how and why Word spreads text over text runs. Furthermore the picture then would replace characters. And as the picture height doubtless will be higher as the character height, this will disturb the text flow.","body":"Then your picture is misleading. I cannot see any text at right side in same paragraph containing the text &quot;QR&quot;. And replacing single text runs is very complicated as text might spread over multiple different text runs and it is nearly impossible to determine how and why Word spreads text over text runs. Furthermore the picture then would replace characters. And as the picture height doubtless will be higher as the character height, this will disturb the text flow."},{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":0,"creation_date":1645360404,"post_id":71189947,"comment_id":125845614,"body_markdown":"So the task, to replace a part of text in a paragraph with a picture seems over-complicated to me. There rather should be a placeholder picture which then gets replaced.","body":"So the task, to replace a part of text in a paragraph with a picture seems over-complicated to me. There rather should be a placeholder picture which then gets replaced."},{"owner":{"account_id":23480587,"reputation":3,"user_id":17532778,"display_name":"ali zhadigerov"},"score":0,"creation_date":1645371219,"post_id":71189947,"comment_id":125848288,"body_markdown":"@AxelRichter Yes, I used the approach of &quot;pre-adding a placeholder picture&quot;, then detecting and replacing it. The problem is: the placeholder picture shares a paragraph with some text and when I remove the paragraph containing the placeholder picture and place my new picture there, the text also gets erased. Working with POI library seems too complicated for this simple task. My end goal is to convert the docx to pdf, so I&#39;ll probably convert docx -&gt; pdf first (without pic.) and add the picture after.","body":"@AxelRichter Yes, I used the approach of &quot;pre-adding a placeholder picture&quot;, then detecting and replacing it. The problem is: the placeholder picture shares a paragraph with some text and when I remove the paragraph containing the placeholder picture and place my new picture there, the text also gets erased. Working with POI library seems too complicated for this simple task. My end goal is to convert the docx to pdf, so I&#39;ll probably convert docx -&gt; pdf first (without pic.) and add the picture after."},{"owner":{"account_id":23480587,"reputation":3,"user_id":17532778,"display_name":"ali zhadigerov"},"score":0,"creation_date":1645385877,"post_id":71189947,"comment_id":125852103,"body_markdown":"@AxelRichter Ok, it turned out that converting a docx to pdf is not a trivial task either... I returned to this problem now. I followed your suggestion and tried to replace a &quot;placeholder image&quot; with new image and now there is a problem. https://stackoverflow.com/questions/71198054/java-apache-poi-insert-an-image-infront-the-text\n\nCould you help me with this one, please?","body":"@AxelRichter Ok, it turned out that converting a docx to pdf is not a trivial task either... I returned to this problem now. I followed your suggestion and tried to replace a &quot;placeholder image&quot; with new image and now there is a problem. <a href=\"https://stackoverflow.com/questions/71198054/java-apache-poi-insert-an-image-infront-the-text\" title=\"java apache poi insert an image infront the text\">stackoverflow.com/questions/71198054/&hellip;</a>  Could you help me with this one, please?"},{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":0,"creation_date":1645429058,"post_id":71189947,"comment_id":125859810,"body_markdown":"To replace picture templates in Microsoft Word there is no need to delete them. One simply can replace the the binary content with the new. I have shown an example as answer to your new question.","body":"To replace picture templates in Microsoft Word there is no need to delete them. One simply can replace the the binary content with the new. I have shown an example as answer to your new question."}],"owner":{"account_id":23480587,"reputation":3,"user_id":17532778,"display_name":"ali zhadigerov"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":565,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1645311873,"creation_date":1645311873,"question_id":71189947,"body_markdown":"I need to place an image in a specific location in docx file. I can place an image at any paragraph and even create a new paragraph, but aligning breaks.\r\nI tried to put a placeholder in the document and put my image there. Here is my code:\r\n\r\n````\r\ntry (XWPFDocument doc = new XWPFDocument(\r\n                Objects.requireNonNull(getClass().getClassLoader().getResourceAsStream(filePath)));\r\n        ) {\r\n            List&lt;XWPFParagraph&gt; xwpfParagraphList = doc.getParagraphs();\r\n\r\n            for (XWPFParagraph xwpfParagraph : xwpfParagraphList) {\r\n                if (Objects.equals(xwpfParagraph.getText().trim(), &quot;QR&quot;)) {\r\n                    InputStream is = new ByteArrayInputStream(qr);\r\n                    XWPFRun qrRun = xwpfParagraph.createRun();\r\n                    qrRun.addPicture(is, XWPFDocument.PICTURE_TYPE_JPEG, &quot;qr&quot;, Units.toEMU(100), Units.toEMU(120));\r\n                    is.close();\r\n                }\r\n    ...\r\n\r\n````\r\n\r\nand the output docx looks like this:\r\n\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/XsWBW.png\r\n\r\nHow to place an image at the place, where the `QR` placeholder is located?","title":"Java Apache POI: place an image in a specific location","body":"<p>I need to place an image in a specific location in docx file. I can place an image at any paragraph and even create a new paragraph, but aligning breaks.\nI tried to put a placeholder in the document and put my image there. Here is my code:</p>\n<pre><code>try (XWPFDocument doc = new XWPFDocument(\n                Objects.requireNonNull(getClass().getClassLoader().getResourceAsStream(filePath)));\n        ) {\n            List&lt;XWPFParagraph&gt; xwpfParagraphList = doc.getParagraphs();\n\n            for (XWPFParagraph xwpfParagraph : xwpfParagraphList) {\n                if (Objects.equals(xwpfParagraph.getText().trim(), &quot;QR&quot;)) {\n                    InputStream is = new ByteArrayInputStream(qr);\n                    XWPFRun qrRun = xwpfParagraph.createRun();\n                    qrRun.addPicture(is, XWPFDocument.PICTURE_TYPE_JPEG, &quot;qr&quot;, Units.toEMU(100), Units.toEMU(120));\n                    is.close();\n                }\n    ...\n\n</code></pre>\n<p>and the output docx looks like this:</p>\n<p><a href=\"https://i.stack.imgur.com/XsWBW.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>How to place an image at the place, where the <code>QR</code> placeholder is located?</p>\n"},{"tags":["java","spring-mvc","jakarta-ee","jax-rs"],"answers":[{"tags":[],"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1645310410,"creation_date":1645310410,"answer_id":71189810,"question_id":71189744,"body_markdown":"I think what you try to ask is the equivalent JAX-RS annotation for spring-mvc &#39;s `@PathVariable` ? It is `@PathParam`. \r\n\r\nSo given this spring-mvc configuration : \r\n\r\n``` java\r\n@GetMapping(&quot;/page/{pageNo}&quot;)\r\npublic String findPaginated(@PathVariable(&quot;pageNo&quot;) int pageNo) {\r\n\t\r\n}\r\n\r\n```\r\n\r\nthe equivalent JAX-RS version is :\r\n\r\n``` java\r\n@GET\r\n@Path(&quot;/page/{pageNo}&quot;)\r\npublic String findPaginated(@PathParam(&quot;pageNo&quot;) int pageNo) {\r\n\t\r\n}\r\n```","title":"What is analogue of @PathVariable in Jakarta EE?","body":"<p>I think what you try to ask is the equivalent JAX-RS annotation for spring-mvc 's <code>@PathVariable</code> ? It is <code>@PathParam</code>.</p>\n<p>So given this spring-mvc configuration :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@GetMapping(&quot;/page/{pageNo}&quot;)\npublic String findPaginated(@PathVariable(&quot;pageNo&quot;) int pageNo) {\n    \n}\n\n</code></pre>\n<p>the equivalent JAX-RS version is :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@GET\n@Path(&quot;/page/{pageNo}&quot;)\npublic String findPaginated(@PathParam(&quot;pageNo&quot;) int pageNo) {\n    \n}\n</code></pre>\n"}],"owner":{"display_name":"user16722881"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":243,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1645310505,"creation_date":1645309681,"question_id":71189744,"body_markdown":"How can I do the same in Jakarta EE?\r\n\r\n``` java\r\n@GetMapping(&quot;/page/{pageNo}&quot;)\r\npublic String findPaginated(@PathVariable(&quot;pageNo&quot;) int pageNo) {\r\n    // stuff\r\n}\r\n```\r\n\r\n\r\n","title":"What is analogue of @PathVariable in Jakarta EE?","body":"<p>How can I do the same in Jakarta EE?</p>\n<pre class=\"lang-java prettyprint-override\"><code>@GetMapping(&quot;/page/{pageNo}&quot;)\npublic String findPaginated(@PathVariable(&quot;pageNo&quot;) int pageNo) {\n    // stuff\n}\n</code></pre>\n"},{"tags":["java","for-loop"],"owner":{"account_id":24024412,"reputation":11,"user_id":18006226,"display_name":"Eduardom2002"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":0,"score":-2,"last_activity_date":1645310034,"creation_date":1645310034,"question_id":71189770,"body_markdown":"i honestly don&#39;t know what to do to make this work. This should print out the product of the numbers when 1 is entered but instead it prints out 1. To find the sum of all the numbers it works perfectly fine.\r\n\r\n\tfor(int i=1; i&lt;=n; i++) {\r\n\t\t\tif(MorA==1) {\r\n\t\t\t\tif(sum==0) {\r\n\t\t\t\t\tif(sum==1) {\r\n\t\t\t\t\t\tsum=sum*i;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsum=1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(MorA==2) {\r\n\t\t\t\tsum+=i;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\tSystem.out.println(sum);","title":"Why is the sum=1 and not the product of all the numbers in the loop?","body":"<p>i honestly don't know what to do to make this work. This should print out the product of the numbers when 1 is entered but instead it prints out 1. To find the sum of all the numbers it works perfectly fine.</p>\n<pre><code>for(int i=1; i&lt;=n; i++) {\n        if(MorA==1) {\n            if(sum==0) {\n                if(sum==1) {\n                    sum=sum*i;\n                }\n                sum=1;\n            }\n        }\n        if(MorA==2) {\n            sum+=i;\n        }\n        \n    }\n    System.out.println(sum);\n</code></pre>\n"},{"tags":["java","spring-boot","maven-dependency-plugin"],"answers":[{"tags":[],"owner":{"account_id":1081784,"reputation":6851,"user_id":1078565,"accept_rate":50,"display_name":"Kyle Anderson"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1464628727,"creation_date":1464628727,"answer_id":37530867,"question_id":37528928,"body_markdown":"This is normal since your code doesn&#39;t directly utilize any of those dependencies. The way Spring Boot works is it analyzes your classpath and will autoconfigure many different things for you simply by adding the corresponding dependency. Since the configuration is happening outside of your application code, Maven believes these dependencies to be unused. ","title":"Spring boot core dependencies seen as unused by maven-dependency-plugin","body":"<p>This is normal since your code doesn't directly utilize any of those dependencies. The way Spring Boot works is it analyzes your classpath and will autoconfigure many different things for you simply by adding the corresponding dependency. Since the configuration is happening outside of your application code, Maven believes these dependencies to be unused. </p>\n"},{"tags":[],"owner":{"account_id":184855,"reputation":10523,"user_id":421162,"display_name":"Kerem Baydoan"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1507471710,"creation_date":1507471710,"answer_id":46631984,"question_id":37528928,"body_markdown":"If you want to mark these dependencies as used. \r\n\r\nEdit your pom.xml as below\r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n\t&lt;plugin&gt;\r\n\t\t&lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.10&lt;/version&gt;\r\n\t\t&lt;executions&gt;\r\n\t\t\t&lt;execution&gt;\r\n\t\t\t\t&lt;id&gt;analyze&lt;/id&gt;\r\n\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t&lt;goal&gt;analyze-only&lt;/goal&gt;\r\n\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;ignoreNonCompile&gt;true&lt;/ignoreNonCompile&gt;\r\n\t\t\t\t\t&lt;failOnWarning&gt;false&lt;/failOnWarning&gt;\r\n\t\t\t\t\t&lt;outputXML&gt;true&lt;/outputXML&gt;\r\n\t\t\t\t\t&lt;usedDependencies&gt;\r\n\t\t\t\t\t\t&lt;usedDependency&gt;org.springframework.boot:spring-boot-starter-actuator&lt;/usedDependency&gt;\r\n\t\t\t\t\t\t&lt;usedDependency&gt;org.springframework.cloud:spring-cloud-starter-oauth2&lt;/usedDependency&gt;\r\n\t\t\t\t\t\t&lt;usedDependency&gt;org.springframework.boot:spring-boot-configuration-processor&lt;/usedDependency&gt;\r\n\t\t\t\t\t\t&lt;usedDependency&gt;org.springframework.cloud:spring-cloud-starter-eureka&lt;/usedDependency&gt;\r\n\t\t\t\t\t&lt;/usedDependencies&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/execution&gt;\r\n\t\t&lt;/executions&gt;\r\n\t&lt;/plugin&gt;","title":"Spring boot core dependencies seen as unused by maven-dependency-plugin","body":"<p>If you want to mark these dependencies as used. </p>\n\n<p>Edit your pom.xml as below</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n    &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n    &lt;version&gt;2.10&lt;/version&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;id&gt;analyze&lt;/id&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;analyze-only&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n                &lt;ignoreNonCompile&gt;true&lt;/ignoreNonCompile&gt;\n                &lt;failOnWarning&gt;false&lt;/failOnWarning&gt;\n                &lt;outputXML&gt;true&lt;/outputXML&gt;\n                &lt;usedDependencies&gt;\n                    &lt;usedDependency&gt;org.springframework.boot:spring-boot-starter-actuator&lt;/usedDependency&gt;\n                    &lt;usedDependency&gt;org.springframework.cloud:spring-cloud-starter-oauth2&lt;/usedDependency&gt;\n                    &lt;usedDependency&gt;org.springframework.boot:spring-boot-configuration-processor&lt;/usedDependency&gt;\n                    &lt;usedDependency&gt;org.springframework.cloud:spring-cloud-starter-eureka&lt;/usedDependency&gt;\n                &lt;/usedDependencies&gt;\n            &lt;/configuration&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2043778,"reputation":17800,"user_id":1824361,"accept_rate":80,"display_name":"Ahmed Nabil"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1645309976,"creation_date":1645309128,"answer_id":71189687,"question_id":37528928,"body_markdown":"An enhancement for the @Kerem answer is to exclude all spring dependencies once (using regular expression) instead of listing them one by one which needs future attention to unused/used dependencies.\r\n\r\n    &lt;plugin&gt;\r\n\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\r\n\t&lt;version&gt;${maven-dependency-plugin.version}&lt;/version&gt;\r\n\t&lt;executions&gt;\r\n\t\t&lt;execution&gt;\r\n\t\t\t&lt;id&gt;analyze-dependencies&lt;/id&gt;\r\n\t\t\t&lt;goals&gt;\r\n\t\t\t\t&lt;goal&gt;analyze-only&lt;/goal&gt;\r\n\t\t\t&lt;/goals&gt;\r\n\t\t\t&lt;configuration&gt;\r\n\t\t\t\t&lt;failOnWarning&gt;true&lt;/failOnWarning&gt;\r\n\r\n\t\t\t\t&lt;ignoredUnusedDeclaredDependencies&gt;\r\n\t\t\t\t\t&lt;!-- Because of SpringBoot auto-configurations, the configuration is happening outside of your application code, so Maven believes these dependencies to be unused --&gt;\r\n\t\t\t\t\t&lt;!-- Static code analysis tools like (maven-dependency-plugin) can not detect runtime dependencies, so you should instruct them about runtime dependencies --&gt;\r\n\t\t\t\t\t&lt;!-- https://stackoverflow.com/questions/37528928/spring-boot-core-dependencies-seen-as-unused-by-maven-dependency-plugin --&gt;\r\n\t\t\t\t\t&lt;ignoredUnusedDeclaredDependency&gt;org.springframework*:*&lt;/ignoredUnusedDeclaredDependency&gt;\r\n\t\t\t\t&lt;/ignoredUnusedDeclaredDependencies&gt;\r\n\r\n\t\t\t&lt;/configuration&gt;\r\n\t\t&lt;/execution&gt;\r\n\t&lt;/executions&gt;\r\n&lt;/plugin&gt;\r\n\r\n\r\n","title":"Spring boot core dependencies seen as unused by maven-dependency-plugin","body":"<p>An enhancement for the @Kerem answer is to exclude all spring dependencies once (using regular expression) instead of listing them one by one which needs future attention to unused/used dependencies.</p>\n<pre><code>&lt;plugin&gt;\n&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n&lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n&lt;version&gt;${maven-dependency-plugin.version}&lt;/version&gt;\n&lt;executions&gt;\n    &lt;execution&gt;\n        &lt;id&gt;analyze-dependencies&lt;/id&gt;\n        &lt;goals&gt;\n            &lt;goal&gt;analyze-only&lt;/goal&gt;\n        &lt;/goals&gt;\n        &lt;configuration&gt;\n            &lt;failOnWarning&gt;true&lt;/failOnWarning&gt;\n\n            &lt;ignoredUnusedDeclaredDependencies&gt;\n                &lt;!-- Because of SpringBoot auto-configurations, the configuration is happening outside of your application code, so Maven believes these dependencies to be unused --&gt;\n                &lt;!-- Static code analysis tools like (maven-dependency-plugin) can not detect runtime dependencies, so you should instruct them about runtime dependencies --&gt;\n                &lt;!-- https://stackoverflow.com/questions/37528928/spring-boot-core-dependencies-seen-as-unused-by-maven-dependency-plugin --&gt;\n                &lt;ignoredUnusedDeclaredDependency&gt;org.springframework*:*&lt;/ignoredUnusedDeclaredDependency&gt;\n            &lt;/ignoredUnusedDeclaredDependencies&gt;\n\n        &lt;/configuration&gt;\n    &lt;/execution&gt;\n&lt;/executions&gt;\n</code></pre>\n\n"}],"owner":{"account_id":1220308,"reputation":2681,"user_id":1187067,"accept_rate":67,"display_name":"Pleymor"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4919,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":37530867,"answer_count":3,"score":11,"last_activity_date":1645309976,"creation_date":1464621053,"question_id":37528928,"body_markdown":"`maven-dependency-plugin` detects spring boot dependencies as unused, but they are actually requied to run my application. Would I have made something wrong ?\r\n\r\n\r\nMy pom.xml\r\n----------\r\n\r\n&lt;!-- language: xml --&gt;\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n        &lt;artifactId&gt;my-service&lt;/artifactId&gt;\r\n        &lt;packaging&gt;jar&lt;/packaging&gt;\r\n        &lt;name&gt;my-service&lt;/name&gt;\r\n        &lt;description&gt;my service&lt;/description&gt;\r\n    \r\n        &lt;parent&gt;\r\n            &lt;groupId&gt;com.my&lt;/groupId&gt;\r\n            &lt;artifactId&gt;parent&lt;/artifactId&gt;\r\n            &lt;version&gt;0.2.0-SNAPSHOT&lt;/version&gt;\r\n        &lt;/parent&gt;\r\n    \r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-cloud-starter-eureka&lt;/artifactId&gt;\r\n                &lt;exclusions&gt;\r\n                    &lt;exclusion&gt;\r\n                        &lt;groupId&gt;javax.ws.rs&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;jsr311-api&lt;/artifactId&gt;\r\n                    &lt;/exclusion&gt;\r\n                &lt;/exclusions&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\r\n                &lt;optional&gt;true&lt;/optional&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\r\n                &lt;artifactId&gt;tomcat-embed-core&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n                &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.security.oauth&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-security-oauth2&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-cloud-commons&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-autoconfigure&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    \r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;source&gt;1.8&lt;/source&gt;\r\n                        &lt;target&gt;1.8&lt;/target&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;!--Analyze maven dependencies at verify phase--&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;2.10&lt;/version&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;id&gt;analyze&lt;/id&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;analyze-only&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                            &lt;configuration&gt;\r\n                                &lt;ignoreNonCompile&gt;true&lt;/ignoreNonCompile&gt;\r\n                                &lt;failOnWarning&gt;false&lt;/failOnWarning&gt;\r\n                                &lt;outputXML&gt;true&lt;/outputXML&gt;\r\n                            &lt;/configuration&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\nMy logs\r\n-------\r\n\r\n    [INFO] --- maven-dependency-plugin:2.10:analyze-only (analyze) @ resource-service ---\r\n    [WARNING] Unused declared dependencies found:\r\n    [WARNING]    org.springframework.boot:spring-boot-starter-actuator:jar:1.3.5.RELEASE:compile\r\n    [WARNING]    org.springframework.cloud:spring-cloud-starter-oauth2:jar:1.1.0.RELEASE:compile\r\n    [WARNING]    org.springframework.boot:spring-boot-configuration-processor:jar:1.3.5.RELEASE:compile\r\n    [WARNING]    org.springframework.cloud:spring-cloud-starter-eureka:jar:1.1.0.RELEASE:compile\r\n    [INFO] ------------------------------------------------------------------------\r\n","title":"Spring boot core dependencies seen as unused by maven-dependency-plugin","body":"<p><code>maven-dependency-plugin</code> detects spring boot dependencies as unused, but they are actually requied to run my application. Would I have made something wrong ?</p>\n\n<h2>My pom.xml</h2>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://maven.apache.org/POM/4.0.0\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;artifactId&gt;my-service&lt;/artifactId&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n    &lt;name&gt;my-service&lt;/name&gt;\n    &lt;description&gt;my service&lt;/description&gt;\n\n    &lt;parent&gt;\n        &lt;groupId&gt;com.my&lt;/groupId&gt;\n        &lt;artifactId&gt;parent&lt;/artifactId&gt;\n        &lt;version&gt;0.2.0-SNAPSHOT&lt;/version&gt;\n    &lt;/parent&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-eureka&lt;/artifactId&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;javax.ws.rs&lt;/groupId&gt;\n                    &lt;artifactId&gt;jsr311-api&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\n            &lt;artifactId&gt;tomcat-embed-core&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security.oauth&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-oauth2&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-commons&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-autoconfigure&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;1.8&lt;/source&gt;\n                    &lt;target&gt;1.8&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;!--Analyze maven dependencies at verify phase--&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.10&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;analyze&lt;/id&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;analyze-only&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;ignoreNonCompile&gt;true&lt;/ignoreNonCompile&gt;\n                            &lt;failOnWarning&gt;false&lt;/failOnWarning&gt;\n                            &lt;outputXML&gt;true&lt;/outputXML&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n\n<h2>My logs</h2>\n\n<pre><code>[INFO] --- maven-dependency-plugin:2.10:analyze-only (analyze) @ resource-service ---\n[WARNING] Unused declared dependencies found:\n[WARNING]    org.springframework.boot:spring-boot-starter-actuator:jar:1.3.5.RELEASE:compile\n[WARNING]    org.springframework.cloud:spring-cloud-starter-oauth2:jar:1.1.0.RELEASE:compile\n[WARNING]    org.springframework.boot:spring-boot-configuration-processor:jar:1.3.5.RELEASE:compile\n[WARNING]    org.springframework.cloud:spring-cloud-starter-eureka:jar:1.1.0.RELEASE:compile\n[INFO] ------------------------------------------------------------------------\n</code></pre>\n"},{"tags":["java","lambda","java-8","generic-lambda"],"answers":[{"tags":[],"owner":{"account_id":38390,"reputation":2635,"user_id":110156,"accept_rate":80,"display_name":"Jamie Bisotti"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1599960760,"creation_date":1599960760,"answer_id":63866363,"question_id":63866329,"body_markdown":"Look into &quot;functional interface&quot;, added in Java 8. CommandLineRunner is one. That code is equivalent to returning an anonymous class.","title":"Lambda function returned - trying to understand what this means","body":"<p>Look into &quot;functional interface&quot;, added in Java 8. CommandLineRunner is one. That code is equivalent to returning an anonymous class.</p>\n"},{"tags":[],"owner":{"account_id":1475499,"reputation":195,"user_id":1385969,"display_name":"user1385969"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1599961927,"creation_date":1599961927,"answer_id":63866447,"question_id":63866329,"body_markdown":"Thanks to the person who clarified it for me. So this would be the corresponding anonymous class, it seems:\r\n\r\n    @Bean\r\n    \tpublic CommandLineRunner run(RestTemplate restTemplate) throws Exception {\r\n    \t\tCommandLineRunner runner = new CommandLineRunner() {\r\n    \t\t\tpublic void run(String... s) {\r\n    \t\t\t\tSystem.out.println(&quot;run is working&quot;); \t\r\n    \t\t\t}\r\n    \t\t};\r\n    \t\treturn runner;\r\n    \t} ","title":"Lambda function returned - trying to understand what this means","body":"<p>Thanks to the person who clarified it for me. So this would be the corresponding anonymous class, it seems:</p>\n<pre><code>@Bean\n    public CommandLineRunner run(RestTemplate restTemplate) throws Exception {\n        CommandLineRunner runner = new CommandLineRunner() {\n            public void run(String... s) {\n                System.out.println(&quot;run is working&quot;);   \n            }\n        };\n        return runner;\n    } \n</code></pre>\n"},{"tags":[],"owner":{"account_id":15035514,"reputation":1,"user_id":10852069,"display_name":"G.S. Amin Talukder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645309523,"creation_date":1645309523,"answer_id":71189725,"question_id":63866329,"body_markdown":"Thanks I was also looking for the answer of this question. \r\nJust to add - CommandLineRunner is an Interface, more precisely to say &quot;functional interface&quot;, if I understand it correctly, in springboot that has only one method run(). Actually all the functional interface has only one abstract method, there could be default implementation or static method as well though.\r\n\r\nSo the point is - when we are returning a lambda in this context, basically we are returning an implementation of that run method of the functional interface commandlinerunner.\r\n\r\nThats how I understood. Some other useful information with example can be found here:\r\n\r\nhttps://www.baeldung.com/spring-boot-console-app\r\n\r\nWe could also write the same thing as per the below example:\r\n\r\n```@SpringBootApplication\r\npublic class SpringBootConsoleApplication \r\n  implements CommandLineRunner {\r\n\r\n    private static Logger LOG = LoggerFactory\r\n      .getLogger(SpringBootConsoleApplication.class);\r\n\r\n    public static void main(String[] args) {\r\n        LOG.info(&quot;STARTING THE APPLICATION&quot;);\r\n        SpringApplication.run(SpringBootConsoleApplication.class, args);\r\n        LOG.info(&quot;APPLICATION FINISHED&quot;);\r\n    }\r\n \r\n    @Override\r\n    public void run(String... args) {\r\n        LOG.info(&quot;EXECUTING : command line runner&quot;);\r\n \r\n        for (int i = 0; i &lt; args.length; ++i) {\r\n            LOG.info(&quot;args[{}]: {}&quot;, i, args[i]);\r\n        }\r\n    }\r\n}\r\n```\r\n","title":"Lambda function returned - trying to understand what this means","body":"<p>Thanks I was also looking for the answer of this question.\nJust to add - CommandLineRunner is an Interface, more precisely to say &quot;functional interface&quot;, if I understand it correctly, in springboot that has only one method run(). Actually all the functional interface has only one abstract method, there could be default implementation or static method as well though.</p>\n<p>So the point is - when we are returning a lambda in this context, basically we are returning an implementation of that run method of the functional interface commandlinerunner.</p>\n<p>Thats how I understood. Some other useful information with example can be found here:</p>\n<p><a href=\"https://www.baeldung.com/spring-boot-console-app\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-boot-console-app</a></p>\n<p>We could also write the same thing as per the below example:</p>\n<pre><code>public class SpringBootConsoleApplication \n  implements CommandLineRunner {\n\n    private static Logger LOG = LoggerFactory\n      .getLogger(SpringBootConsoleApplication.class);\n\n    public static void main(String[] args) {\n        LOG.info(&quot;STARTING THE APPLICATION&quot;);\n        SpringApplication.run(SpringBootConsoleApplication.class, args);\n        LOG.info(&quot;APPLICATION FINISHED&quot;);\n    }\n \n    @Override\n    public void run(String... args) {\n        LOG.info(&quot;EXECUTING : command line runner&quot;);\n \n        for (int i = 0; i &lt; args.length; ++i) {\n            LOG.info(&quot;args[{}]: {}&quot;, i, args[i]);\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1475499,"reputation":195,"user_id":1385969,"display_name":"user1385969"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":532,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1645309523,"creation_date":1599960391,"question_id":63866329,"body_markdown":"In a simple example of CommandLineRunner from within the main method of a Spring Boot Application class. \r\n \r\nTrying to understand the effect/meaning of **return args-&gt;** lambda function in the run method. The method should return the instance of the CommandLineRunner. \r\n\r\n```\r\n@Bean\r\npublic RestTemplate restTemplate(RestTemplateBuilder builder) {\r\n\treturn builder.build();\r\n}\r\n\r\n@Bean\r\npublic CommandLineRunner run(RestTemplate restTemplate) throws Exception {\r\n    // what happens here? What is the equivalent Java 7 return statement?\r\n\treturn args -&gt; {\r\n        System.out.println(&quot;run is working&quot;); \t\r\n\t};\r\n}\r\n```","title":"Lambda function returned - trying to understand what this means","body":"<p>In a simple example of CommandLineRunner from within the main method of a Spring Boot Application class.</p>\n<p>Trying to understand the effect/meaning of <strong>return args-&gt;</strong> lambda function in the run method. The method should return the instance of the CommandLineRunner.</p>\n<pre><code>@Bean\npublic RestTemplate restTemplate(RestTemplateBuilder builder) {\n    return builder.build();\n}\n\n@Bean\npublic CommandLineRunner run(RestTemplate restTemplate) throws Exception {\n    // what happens here? What is the equivalent Java 7 return statement?\n    return args -&gt; {\n        System.out.println(&quot;run is working&quot;);   \n    };\n}\n</code></pre>\n"},{"tags":["java","selenium","web-crawler","crawler4j"],"comments":[{"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"score":0,"creation_date":1645229818,"post_id":71181176,"comment_id":125824162,"body_markdown":"Which info are you trying to scrape from https://www.rspca.org.uk/findapet#onSubmitSetHere","body":"Which info are you trying to scrape from <a href=\"https://www.rspca.org.uk/findapet#onSubmitSetHere\" rel=\"nofollow noreferrer\">rspca.org.uk/findapet#onSubmitSetHere</a>"},{"owner":{"account_id":3987289,"reputation":1949,"user_id":3287486,"accept_rate":42,"display_name":"breaktop"},"score":0,"creation_date":1645264680,"post_id":71181176,"comment_id":125828369,"body_markdown":"I&#39;m trying to scrape the results and also the content of each result. I&#39;ve updated the question with an image of the search query and result. The result are the animals available for adoption.","body":"I&#39;m trying to scrape the results and also the content of each result. I&#39;ve updated the question with an image of the search query and result. The result are the animals available for adoption."}],"answers":[{"tags":[],"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645309099,"creation_date":1645240169,"answer_id":71181865,"question_id":71181176,"body_markdown":"You could use Selenium to extract information from the DOM once a browser has rendered it, but I think a simpler solution is to use &quot;developer tools&quot; to find the request that the browser makes when the &quot;search&quot; button is clicked, and try to reproduce that.\r\n\r\nIn this case that makes a POST to `https://www.rspca.org.uk/findapet?p_p_id=petSearch2016_WAR_ptlPetRehomingPortlets&amp;p_p_lifecycle=1&amp;p_p_state=normal&amp;p_p_mode=view&amp;_petSearch2016_WAR_ptlPetRehomingPortlets_action=search`\r\n\r\nThe body of the POST request contains a lot of parameters, including `animalType` and `location`. The content-type of the request is application/x-www-form-urlencoded.\r\n\r\nTo see these parameters, go to the &quot;Network&quot; tab in chrome dev tools, click on the &quot;findapet&quot; request (it&#39;s the first one in the list when I do this), and click on the &quot;payload&quot; tab to see the query string parameters *and* the form parameters (which contains `animalType` and `location`)\r\n\r\n\r\nThe response contains HTML.\r\n\r\nI would try making a request to that endpoint and then parsing the HTML in the response.","title":"Scrape a Dynamic Website using Java with Selenium?","body":"<p>You could use Selenium to extract information from the DOM once a browser has rendered it, but I think a simpler solution is to use &quot;developer tools&quot; to find the request that the browser makes when the &quot;search&quot; button is clicked, and try to reproduce that.</p>\n<p>In this case that makes a POST to <code>https://www.rspca.org.uk/findapet?p_p_id=petSearch2016_WAR_ptlPetRehomingPortlets&amp;p_p_lifecycle=1&amp;p_p_state=normal&amp;p_p_mode=view&amp;_petSearch2016_WAR_ptlPetRehomingPortlets_action=search</code></p>\n<p>The body of the POST request contains a lot of parameters, including <code>animalType</code> and <code>location</code>. The content-type of the request is application/x-www-form-urlencoded.</p>\n<p>To see these parameters, go to the &quot;Network&quot; tab in chrome dev tools, click on the &quot;findapet&quot; request (it's the first one in the list when I do this), and click on the &quot;payload&quot; tab to see the query string parameters <em>and</em> the form parameters (which contains <code>animalType</code> and <code>location</code>)</p>\n<p>The response contains HTML.</p>\n<p>I would try making a request to that endpoint and then parsing the HTML in the response.</p>\n"}],"owner":{"account_id":3987289,"reputation":1949,"user_id":3287486,"accept_rate":42,"display_name":"breaktop"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":417,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1645309099,"creation_date":1645228979,"question_id":71181176,"body_markdown":"I&#39;m trying to scrape `https://www.rspca.org.uk/findapet#onSubmitSetHere` to get a list of all pets for adoption. \r\n\r\nI&#39;ve built web scrapers before using `crawler4j` but the websites were static.\r\n\r\nSince `https://www.rspca.org.uk/findapet#onSubmitSetHere` is not a static website, how can I scrape it? Is it possible? What technologies should I use and how?\r\n\r\n**Update:**\r\n\r\nWhen you fill in the search form (Select type of pet and Enter postcode/town or county) in the UI, the results are then displayed below the search box.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nThe red is highlighted as the search bar and the black is highlighted as results.\r\n\r\nI&#39;m trying to scrape the results and also the content of each result.\r\n\r\nI&#39;ve had a look at the request the browser makes to retrieve results, but from Chrome dev tools it isn&#39;t obvious what the request is being made.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/sDaao.jpg","title":"Scrape a Dynamic Website using Java with Selenium?","body":"<p>I'm trying to scrape <code>https://www.rspca.org.uk/findapet#onSubmitSetHere</code> to get a list of all pets for adoption.</p>\n<p>I've built web scrapers before using <code>crawler4j</code> but the websites were static.</p>\n<p>Since <code>https://www.rspca.org.uk/findapet#onSubmitSetHere</code> is not a static website, how can I scrape it? Is it possible? What technologies should I use and how?</p>\n<p><strong>Update:</strong></p>\n<p>When you fill in the search form (Select type of pet and Enter postcode/town or county) in the UI, the results are then displayed below the search box.</p>\n<p><a href=\"https://i.stack.imgur.com/sDaao.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sDaao.jpg\" alt=\"enter image description here\" /></a></p>\n<p>The red is highlighted as the search bar and the black is highlighted as results.</p>\n<p>I'm trying to scrape the results and also the content of each result.</p>\n<p>I've had a look at the request the browser makes to retrieve results, but from Chrome dev tools it isn't obvious what the request is being made.</p>\n"},{"tags":["java","kotlin","atomicinteger"],"answers":[{"tags":[],"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1645308153,"creation_date":1645308153,"answer_id":71189587,"question_id":71189552,"body_markdown":"Sure.  The following is a compareAndSet version, which I think is what you want, but it&#39;s easy enough to change it to compareAndSet:\r\n\r\n```\r\nfun AtomicInt.compareAndSetIfLess(newValue: Int): Boolean {\r\n  do {\r\n    val oldValue = value\r\n    if (newValue &gt; oldValue) {\r\n      return false\r\n    }\r\n  } while (!compareAndSet(oldValue, newValue))\r\n  return true\r\n}\r\n```","title":"Compare and swap value in atomic integer kotlin","body":"<p>Sure.  The following is a compareAndSet version, which I think is what you want, but it's easy enough to change it to compareAndSet:</p>\n<pre><code>fun AtomicInt.compareAndSetIfLess(newValue: Int): Boolean {\n  do {\n    val oldValue = value\n    if (newValue &gt; oldValue) {\n      return false\n    }\n  } while (!compareAndSet(oldValue, newValue))\n  return true\n}\n</code></pre>\n"}],"owner":{"account_id":11271266,"reputation":4747,"user_id":8266651,"display_name":"Kotlin Learner"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":961,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71189587,"answer_count":1,"score":0,"last_activity_date":1645308614,"creation_date":1645307854,"question_id":71189552,"body_markdown":"Hey I am learning atomic integer in kotlin. I want to know is there atomic integer swap value if current value is smaller than new value. For example\r\n\r\nAtomicInt 10 \r\n\r\n**Scenario 1** new value is **5** and it changes to 5 because 5 is lower than 10\r\n\r\n**Scenario 2** new value is **20** it will not change the atomic value because 20 is greater than 10.\r\n\r\nCan we do this throught [CompareAndSwap][1] function? \r\n\r\n\r\nUPDATE after [@LouisWasserman][2] suggestion\r\n\r\n    fun AtomicInt.compareAndSetIfLess(newValue: Int): Boolean {\r\n        do {\r\n            val oldValue = value\r\n            if (newValue &gt; oldValue) {\r\n                return false\r\n            }\r\n        } while (!compareAndSet(oldValue, newValue))\r\n        return true\r\n    }\r\n\r\nI am getting error on `Unresolved reference: AtomicInt`\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.native.concurrent/-atomic-int/compare-and-swap.html#compareandswap\r\n  [2]: https://stackoverflow.com/users/869736/louis-wasserman\r\n  [3]: https://i.stack.imgur.com/2uZv2.png","title":"Compare and swap value in atomic integer kotlin","body":"<p>Hey I am learning atomic integer in kotlin. I want to know is there atomic integer swap value if current value is smaller than new value. For example</p>\n<p>AtomicInt 10</p>\n<p><strong>Scenario 1</strong> new value is <strong>5</strong> and it changes to 5 because 5 is lower than 10</p>\n<p><strong>Scenario 2</strong> new value is <strong>20</strong> it will not change the atomic value because 20 is greater than 10.</p>\n<p>Can we do this throught <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.native.concurrent/-atomic-int/compare-and-swap.html#compareandswap\" rel=\"nofollow noreferrer\">CompareAndSwap</a> function?</p>\n<p>UPDATE after <a href=\"https://stackoverflow.com/users/869736/louis-wasserman\">@LouisWasserman</a> suggestion</p>\n<pre><code>fun AtomicInt.compareAndSetIfLess(newValue: Int): Boolean {\n    do {\n        val oldValue = value\n        if (newValue &gt; oldValue) {\n            return false\n        }\n    } while (!compareAndSet(oldValue, newValue))\n    return true\n}\n</code></pre>\n<p>I am getting error on <code>Unresolved reference: AtomicInt</code></p>\n<p><a href=\"https://i.stack.imgur.com/2uZv2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2uZv2.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","xml"],"comments":[{"owner":{"account_id":1938802,"reputation":12091,"user_id":1745544,"accept_rate":23,"display_name":"OldProgrammer"},"score":0,"creation_date":1645302930,"post_id":71188940,"comment_id":125836804,"body_markdown":"XML does not care about whitespace, or no-whitespace between elements.  If you want to format it, take a look [here](https://stackoverflow.com/questions/139076/how-to-pretty-print-xml-from-java)","body":"XML does not care about whitespace, or no-whitespace between elements.  If you want to format it, take a look <a href=\"https://stackoverflow.com/questions/139076/how-to-pretty-print-xml-from-java\">here</a>"},{"owner":{"account_id":6596539,"reputation":1350,"user_id":5096142,"display_name":"Carlos"},"score":0,"creation_date":1645303349,"post_id":71188940,"comment_id":125836903,"body_markdown":"take a look at javax.xml.* packages and org.w3c.dom.*  example [here](https://mkyong.com/java/how-to-create-xml-file-in-java-dom/#write-xml-to-a-file)","body":"take a look at javax.xml.* packages and org.w3c.dom.*  example <a href=\"https://mkyong.com/java/how-to-create-xml-file-in-java-dom/#write-xml-to-a-file\" rel=\"nofollow noreferrer\">here</a>"},{"owner":{"account_id":15024254,"reputation":83,"user_id":10844676,"display_name":"Aimee Rodr&#237;guez"},"score":0,"creation_date":1645366548,"post_id":71188940,"comment_id":125847181,"body_markdown":"The string corresponding to the XML I need to convert it into a byte array and encode it in base64, for this reason I think it is important that it is well indented, but I am not sure.","body":"The string corresponding to the XML I need to convert it into a byte array and encode it in base64, for this reason I think it is important that it is well indented, but I am not sure."}],"answers":[{"tags":[],"owner":{"account_id":529122,"reputation":158120,"user_id":415448,"accept_rate":33,"display_name":"Michael Kay"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1645305466,"creation_date":1645305466,"answer_id":71189270,"question_id":71188940,"body_markdown":"If you like the StreamWriter API but want more control over serialization, Saxon offers:\r\n\r\n    Processor proc = new Processor(false);\r\n    Serializer ser = proc.newSerializer(stringWriter);\r\n    ser.setOutputProperty(Serializer.Property.METHOD, &quot;xml&quot;);\r\n    ser.setOutputProperty(Serializer.Property.INDENT, &quot;yes&quot;);\r\n    XMLStreamWriter xMLStreamWriter = ser.getXMLStreamWriter();\r\n    ...\r\n\r\nI used the `XMLStreamWriter` API for this purpose myself quite a lot, and eventually decided that it was clumsy and that it was possible to design something better. So Saxon now offers the Push API as an alternative. The main difference is that in the Push API, when you start a container node (document or element) it returns a handle that you use for constructing the children of that node. The result is that elements are self-closing, the API is far less stateful, and it&#39;s much harder to get yourself into the situation where you only discover at the end of the document that you&#39;ve opened more elements than you&#39;ve closed.\r\n\r\nYou example would look more like this:\r\n\r\n    Document doc = push.document();\r\n    \r\n    Element cars = element(&quot;cars&quot;);\r\n\r\n    Element superCars = cars.element(&quot;supercars&quot;);\r\n    superCars.attribute(&quot;company&quot;, &quot;Ferrari&quot;);\r\n\r\n    Element carName = superCars.element(&quot;carname&quot;);\r\n    carName.attribute(&quot;type&quot;, &quot;formula one&quot;);\r\n    carName.text(&quot;Ferrari 101&quot;);\r\n\r\n    carName = superCars.element(&quot;carname&quot;);\r\n    carName.attribute(&quot;type&quot;, &quot;sports&quot;);\r\n    carName.text(&quot;Ferrari 202&quot;);\r\n\r\n    doc.close();\r\n\r\nIt feels rather more DOM-like, but with the difference that nodes have to be created in the right order, because there is no in-memory tree being created.\r\n","title":"What is the best option to create an XML dynamically in Java?","body":"<p>If you like the StreamWriter API but want more control over serialization, Saxon offers:</p>\n<pre><code>Processor proc = new Processor(false);\nSerializer ser = proc.newSerializer(stringWriter);\nser.setOutputProperty(Serializer.Property.METHOD, &quot;xml&quot;);\nser.setOutputProperty(Serializer.Property.INDENT, &quot;yes&quot;);\nXMLStreamWriter xMLStreamWriter = ser.getXMLStreamWriter();\n...\n</code></pre>\n<p>I used the <code>XMLStreamWriter</code> API for this purpose myself quite a lot, and eventually decided that it was clumsy and that it was possible to design something better. So Saxon now offers the Push API as an alternative. The main difference is that in the Push API, when you start a container node (document or element) it returns a handle that you use for constructing the children of that node. The result is that elements are self-closing, the API is far less stateful, and it's much harder to get yourself into the situation where you only discover at the end of the document that you've opened more elements than you've closed.</p>\n<p>You example would look more like this:</p>\n<pre><code>Document doc = push.document();\n\nElement cars = element(&quot;cars&quot;);\n\nElement superCars = cars.element(&quot;supercars&quot;);\nsuperCars.attribute(&quot;company&quot;, &quot;Ferrari&quot;);\n\nElement carName = superCars.element(&quot;carname&quot;);\ncarName.attribute(&quot;type&quot;, &quot;formula one&quot;);\ncarName.text(&quot;Ferrari 101&quot;);\n\ncarName = superCars.element(&quot;carname&quot;);\ncarName.attribute(&quot;type&quot;, &quot;sports&quot;);\ncarName.text(&quot;Ferrari 202&quot;);\n\ndoc.close();\n</code></pre>\n<p>It feels rather more DOM-like, but with the difference that nodes have to be created in the right order, because there is no in-memory tree being created.</p>\n"},{"tags":[],"owner":{"account_id":24254167,"reputation":64,"user_id":18204817,"display_name":"Jinyoung So"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1645308249,"creation_date":1645308249,"answer_id":71189600,"question_id":71188940,"body_markdown":"If you want to modify your code less, you may want to use this.\r\n\r\nAdd Transformer property like this (this remove first line declaring xml)\r\n\r\n\r\n    transformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, &quot;yes&quot;);\r\n\r\n\r\n\r\nIn the part of output, modify like this\r\n\r\n    StringBuffer xmlStringBuffer = new StringBuffer();\r\n    xmlStringBuffer.append(&quot;&lt;?xml version=\\&quot;1.0\\&quot; ?&gt;&quot;);\r\n    xmlStringBuffer.append(System.getProperty(&quot;line.separator&quot;));\r\n    xmlStringBuffer.append(xmlOutput.getWriter().toString());\r\n\r\nmake file with this string buffer\r\n    \r\n    outputXml.write(xmlStringBuffer.toString().getBytes(&quot;UTF-8&quot;));\r\n\r\n\r\n","title":"What is the best option to create an XML dynamically in Java?","body":"<p>If you want to modify your code less, you may want to use this.</p>\n<p>Add Transformer property like this (this remove first line declaring xml)</p>\n<pre><code>transformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, &quot;yes&quot;);\n</code></pre>\n<p>In the part of output, modify like this</p>\n<pre><code>StringBuffer xmlStringBuffer = new StringBuffer();\nxmlStringBuffer.append(&quot;&lt;?xml version=\\&quot;1.0\\&quot; ?&gt;&quot;);\nxmlStringBuffer.append(System.getProperty(&quot;line.separator&quot;));\nxmlStringBuffer.append(xmlOutput.getWriter().toString());\n</code></pre>\n<p>make file with this string buffer</p>\n<pre><code>outputXml.write(xmlStringBuffer.toString().getBytes(&quot;UTF-8&quot;));\n</code></pre>\n"}],"owner":{"account_id":15024254,"reputation":83,"user_id":10844676,"display_name":"Aimee Rodr&#237;guez"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":490,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1645383669,"answer_count":2,"score":0,"last_activity_date":1645308249,"creation_date":1645302617,"question_id":71188940,"body_markdown":"I need to create an XML file dynamically. I tried using StAX with the XMLStreamWriter interface, but in this first code sample, the &quot;cars&quot; node tag is on the same line as the first XML node.\r\n\r\n    try {\r\n\r\n            TransformerFactory transformerFactory = TransformerFactory.newInstance();\r\n            transformerFactory.setFeature(XMLConstants.FEATURE_SECURE_PROCESSING, true);\r\n            transformerFactory.setAttribute(&quot;indent-number&quot;, 2);\r\n\r\n            Transformer transformer = transformerFactory.newTransformer();\r\n            transformer.setOutputProperty(OutputKeys.INDENT, &quot;yes&quot;);\r\n\r\n            StringWriter inputStringWriter = new StringWriter();\r\n\r\n            XMLOutputFactory xMLOutputFactory = XMLOutputFactory.newInstance();\r\n            XMLStreamWriter xMLStreamWriter =\r\n                    xMLOutputFactory.createXMLStreamWriter(inputStringWriter);\r\n\r\n            xMLStreamWriter.writeStartDocument();\r\n            \r\n            xMLStreamWriter.writeStartElement(&quot;cars&quot;);\r\n\r\n            xMLStreamWriter.writeStartElement(&quot;supercars&quot;);\r\n            xMLStreamWriter.writeAttribute(&quot;company&quot;, &quot;Ferrari&quot;);\r\n\r\n            xMLStreamWriter.writeStartElement(&quot;carname&quot;);\r\n            xMLStreamWriter.writeAttribute(&quot;type&quot;, &quot;formula one&quot;);\r\n            xMLStreamWriter.writeCharacters(&quot;Ferrari 101&quot;);\r\n            xMLStreamWriter.writeEndElement();\r\n\r\n            xMLStreamWriter.writeStartElement(&quot;carname&quot;);\r\n            xMLStreamWriter.writeAttribute(&quot;type&quot;, &quot;sports&quot;);\r\n            xMLStreamWriter.writeCharacters(&quot;Ferrari 202&quot;);\r\n            xMLStreamWriter.writeEndElement();\r\n\r\n            xMLStreamWriter.writeEndElement();\r\n            xMLStreamWriter.writeEndElement();\r\n            xMLStreamWriter.writeEndDocument();\r\n\r\n            xMLStreamWriter.flush();\r\n            xMLStreamWriter.close();\r\n\r\n            String xmlString = inputStringWriter.getBuffer().toString();\r\n\r\n            StringWriter outputStringWriter = new StringWriter();\r\n\r\n            StreamResult xmlOutput = new StreamResult(outputStringWriter);\r\n            Source xmlInput = new StreamSource(new StringReader(xmlString));\r\n            transformer.transform(xmlInput, xmlOutput);\r\n\r\n            FileOutputStream outputXml = new FileOutputStream(new File(&quot;./src/temp/myfile.xml&quot;));\r\n            outputXml.write(xmlOutput.getWriter().toString().getBytes(&quot;UTF-8&quot;));\r\n\r\n            inputStringWriter.close();\r\n            outputStringWriter.close();\r\n\r\n            System.out.println(xmlOutput.getWriter().toString());\r\n\r\n        } catch (XMLStreamException e) {\r\n            e.printStackTrace();\r\n        } catch (IOException e) {\r\n            // TODO Auto-generated catch block\r\n            e.printStackTrace();\r\n        } catch (TransformerConfigurationException e) {\r\n            e.printStackTrace();\r\n        } catch (TransformerException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n\r\n![xml output 1](https://i.stack.imgur.com/ypZkj.jpg)\r\n\r\nI tried using IndentingXMLStreamWriter to solve the above code problem, but to use it I need to import com.sun.xml.internal.txw2.output.IndentingXMLStreamWriter and SonarLint flags the import for me as a major quality defect.\r\n\r\n    try {\r\n\r\n            TransformerFactory transformerFactory = TransformerFactory.newInstance();\r\n            transformerFactory.setAttribute(&quot;indent-number&quot;, 4);\r\n\r\n            Transformer transformer = transformerFactory.newTransformer();\r\n            transformer.setOutputProperty(OutputKeys.INDENT, &quot;yes&quot;);\r\n\r\n            StringWriter inputStringWriter = new StringWriter();\r\n\r\n            XMLOutputFactory xMLOutputFactory = XMLOutputFactory.newInstance();\r\n            XMLStreamWriter xMLStreamWriter =\r\n                    new IndentingXMLStreamWriter(xMLOutputFactory.createXMLStreamWriter(inputStringWriter));\r\n\r\n            xMLStreamWriter.writeStartDocument();\r\n            \r\n            xMLStreamWriter.writeStartElement(&quot;cars&quot;);\r\n\r\n            xMLStreamWriter.writeStartElement(&quot;supercars&quot;);\r\n            xMLStreamWriter.writeAttribute(&quot;company&quot;, &quot;Ferrari&quot;);\r\n\r\n            xMLStreamWriter.writeStartElement(&quot;carname&quot;);\r\n            xMLStreamWriter.writeAttribute(&quot;type&quot;, &quot;formula one&quot;);\r\n            xMLStreamWriter.writeCharacters(&quot;Ferrari 101&quot;);\r\n            xMLStreamWriter.writeEndElement();\r\n\r\n            xMLStreamWriter.writeStartElement(&quot;carname&quot;);\r\n            xMLStreamWriter.writeAttribute(&quot;type&quot;, &quot;sports&quot;);\r\n            xMLStreamWriter.writeCharacters(&quot;Ferrari 202&quot;);\r\n            xMLStreamWriter.writeEndElement();\r\n\r\n            xMLStreamWriter.writeEndElement();\r\n            xMLStreamWriter.writeEndElement();\r\n            xMLStreamWriter.writeEndDocument();\r\n\r\n            xMLStreamWriter.flush();\r\n            xMLStreamWriter.close();\r\n\r\n            String xmlString = inputStringWriter.getBuffer().toString();\r\n\r\n            FileOutputStream outputXml = new FileOutputStream(new File(&quot;./src/temp/myfile.xml&quot;));\r\n            outputXml.write(xmlString.getBytes(&quot;UTF-8&quot;));\r\n\r\n            inputStringWriter.close();\r\n            System.out.println(xmlString);\r\n\r\n        } catch (XMLStreamException e) {\r\n            e.printStackTrace();\r\n        } catch (IOException e) {\r\n            // TODO Auto-generated catch block\r\n            e.printStackTrace();\r\n        } catch (TransformerConfigurationException e) {\r\n            e.printStackTrace();\r\n        } catch (TransformerException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n![xml output 1](https://i.stack.imgur.com/wXDdc.jpg)\r\n\r\n![xml output 1](https://i.stack.imgur.com/w7PvP.jpg)\r\n\r\nI am showing a simple XML structure as an example, but in reality the XML that I need to generate is much larger and with internal nodes that will be displayed depending on certain conditions.\r\n\r\nAny recommendation?\r\n\r\n","title":"What is the best option to create an XML dynamically in Java?","body":"<p>I need to create an XML file dynamically. I tried using StAX with the XMLStreamWriter interface, but in this first code sample, the &quot;cars&quot; node tag is on the same line as the first XML node.</p>\n<pre><code>try {\n\n        TransformerFactory transformerFactory = TransformerFactory.newInstance();\n        transformerFactory.setFeature(XMLConstants.FEATURE_SECURE_PROCESSING, true);\n        transformerFactory.setAttribute(&quot;indent-number&quot;, 2);\n\n        Transformer transformer = transformerFactory.newTransformer();\n        transformer.setOutputProperty(OutputKeys.INDENT, &quot;yes&quot;);\n\n        StringWriter inputStringWriter = new StringWriter();\n\n        XMLOutputFactory xMLOutputFactory = XMLOutputFactory.newInstance();\n        XMLStreamWriter xMLStreamWriter =\n                xMLOutputFactory.createXMLStreamWriter(inputStringWriter);\n\n        xMLStreamWriter.writeStartDocument();\n        \n        xMLStreamWriter.writeStartElement(&quot;cars&quot;);\n\n        xMLStreamWriter.writeStartElement(&quot;supercars&quot;);\n        xMLStreamWriter.writeAttribute(&quot;company&quot;, &quot;Ferrari&quot;);\n\n        xMLStreamWriter.writeStartElement(&quot;carname&quot;);\n        xMLStreamWriter.writeAttribute(&quot;type&quot;, &quot;formula one&quot;);\n        xMLStreamWriter.writeCharacters(&quot;Ferrari 101&quot;);\n        xMLStreamWriter.writeEndElement();\n\n        xMLStreamWriter.writeStartElement(&quot;carname&quot;);\n        xMLStreamWriter.writeAttribute(&quot;type&quot;, &quot;sports&quot;);\n        xMLStreamWriter.writeCharacters(&quot;Ferrari 202&quot;);\n        xMLStreamWriter.writeEndElement();\n\n        xMLStreamWriter.writeEndElement();\n        xMLStreamWriter.writeEndElement();\n        xMLStreamWriter.writeEndDocument();\n\n        xMLStreamWriter.flush();\n        xMLStreamWriter.close();\n\n        String xmlString = inputStringWriter.getBuffer().toString();\n\n        StringWriter outputStringWriter = new StringWriter();\n\n        StreamResult xmlOutput = new StreamResult(outputStringWriter);\n        Source xmlInput = new StreamSource(new StringReader(xmlString));\n        transformer.transform(xmlInput, xmlOutput);\n\n        FileOutputStream outputXml = new FileOutputStream(new File(&quot;./src/temp/myfile.xml&quot;));\n        outputXml.write(xmlOutput.getWriter().toString().getBytes(&quot;UTF-8&quot;));\n\n        inputStringWriter.close();\n        outputStringWriter.close();\n\n        System.out.println(xmlOutput.getWriter().toString());\n\n    } catch (XMLStreamException e) {\n        e.printStackTrace();\n    } catch (IOException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    } catch (TransformerConfigurationException e) {\n        e.printStackTrace();\n    } catch (TransformerException e) {\n        e.printStackTrace();\n    }\n</code></pre>\n<p><img src=\"https://i.stack.imgur.com/ypZkj.jpg\" alt=\"xml output 1\" /></p>\n<p>I tried using IndentingXMLStreamWriter to solve the above code problem, but to use it I need to import com.sun.xml.internal.txw2.output.IndentingXMLStreamWriter and SonarLint flags the import for me as a major quality defect.</p>\n<pre><code>try {\n\n        TransformerFactory transformerFactory = TransformerFactory.newInstance();\n        transformerFactory.setAttribute(&quot;indent-number&quot;, 4);\n\n        Transformer transformer = transformerFactory.newTransformer();\n        transformer.setOutputProperty(OutputKeys.INDENT, &quot;yes&quot;);\n\n        StringWriter inputStringWriter = new StringWriter();\n\n        XMLOutputFactory xMLOutputFactory = XMLOutputFactory.newInstance();\n        XMLStreamWriter xMLStreamWriter =\n                new IndentingXMLStreamWriter(xMLOutputFactory.createXMLStreamWriter(inputStringWriter));\n\n        xMLStreamWriter.writeStartDocument();\n        \n        xMLStreamWriter.writeStartElement(&quot;cars&quot;);\n\n        xMLStreamWriter.writeStartElement(&quot;supercars&quot;);\n        xMLStreamWriter.writeAttribute(&quot;company&quot;, &quot;Ferrari&quot;);\n\n        xMLStreamWriter.writeStartElement(&quot;carname&quot;);\n        xMLStreamWriter.writeAttribute(&quot;type&quot;, &quot;formula one&quot;);\n        xMLStreamWriter.writeCharacters(&quot;Ferrari 101&quot;);\n        xMLStreamWriter.writeEndElement();\n\n        xMLStreamWriter.writeStartElement(&quot;carname&quot;);\n        xMLStreamWriter.writeAttribute(&quot;type&quot;, &quot;sports&quot;);\n        xMLStreamWriter.writeCharacters(&quot;Ferrari 202&quot;);\n        xMLStreamWriter.writeEndElement();\n\n        xMLStreamWriter.writeEndElement();\n        xMLStreamWriter.writeEndElement();\n        xMLStreamWriter.writeEndDocument();\n\n        xMLStreamWriter.flush();\n        xMLStreamWriter.close();\n\n        String xmlString = inputStringWriter.getBuffer().toString();\n\n        FileOutputStream outputXml = new FileOutputStream(new File(&quot;./src/temp/myfile.xml&quot;));\n        outputXml.write(xmlString.getBytes(&quot;UTF-8&quot;));\n\n        inputStringWriter.close();\n        System.out.println(xmlString);\n\n    } catch (XMLStreamException e) {\n        e.printStackTrace();\n    } catch (IOException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    } catch (TransformerConfigurationException e) {\n        e.printStackTrace();\n    } catch (TransformerException e) {\n        e.printStackTrace();\n    }\n</code></pre>\n<p><img src=\"https://i.stack.imgur.com/wXDdc.jpg\" alt=\"xml output 1\" /></p>\n<p><img src=\"https://i.stack.imgur.com/w7PvP.jpg\" alt=\"xml output 1\" /></p>\n<p>I am showing a simple XML structure as an example, but in reality the XML that I need to generate is much larger and with internal nodes that will be displayed depending on certain conditions.</p>\n<p>Any recommendation?</p>\n"},{"tags":["java","reactjs","spring-boot","oauth-2.0","cors"],"comments":[{"owner":{"account_id":2021661,"reputation":61998,"user_id":2541573,"accept_rate":100,"display_name":"jub0bs"},"score":0,"creation_date":1645349418,"post_id":71187382,"comment_id":125843427,"body_markdown":"You cannot allow credentials and use the wildcard. See https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS#credentialed_requests_and_wildcards","body":"You cannot allow credentials and use the wildcard. See <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS#credentialed_requests_and_wildcards\" rel=\"nofollow noreferrer\">developer.mozilla.org/en-US/docs/Web/HTTP/&hellip;</a>"},{"owner":{"account_id":20760921,"reputation":19,"user_id":15246121,"display_name":"sirNikolai"},"score":0,"creation_date":1645365446,"post_id":71187382,"comment_id":125846887,"body_markdown":"@jub0bs I should&#39;ve mentioned - tried that too (setting setAllowedOrigins to &quot;http://localhost:3000&quot;). Might be false train of thought but think it&#39;s more related to the fact that google auth doesn&#39;t sent back allowed CORS, not the backend","body":"@jub0bs I should&#39;ve mentioned - tried that too (setting setAllowedOrigins to &quot;<a href=\"http://localhost:3000&quot;\" rel=\"nofollow noreferrer\">localhost:3000&quot;</a>). Might be false train of thought but think it&#39;s more related to the fact that google auth doesn&#39;t sent back allowed CORS, not the backend"},{"owner":{"account_id":7616825,"reputation":178,"user_id":5775990,"accept_rate":62,"display_name":"Ashish"},"score":0,"creation_date":1647346961,"post_id":71187382,"comment_id":126343418,"body_markdown":"did you find a solution? I am facing similar problem.","body":"did you find a solution? I am facing similar problem."},{"owner":{"account_id":20760921,"reputation":19,"user_id":15246121,"display_name":"sirNikolai"},"score":0,"creation_date":1647743154,"post_id":71187382,"comment_id":126446961,"body_markdown":"@Ashish unfortunately not. I instead cut loses and rewrote the frontend in thymeleaf since the project was minimal enough.","body":"@Ashish unfortunately not. I instead cut loses and rewrote the frontend in thymeleaf since the project was minimal enough."},{"owner":{"account_id":7616825,"reputation":178,"user_id":5775990,"accept_rate":62,"display_name":"Ashish"},"score":0,"creation_date":1647747639,"post_id":71187382,"comment_id":126447414,"body_markdown":"Yeah, seems like that is the only solution which exists on the internet if you want to handle oauth2 client from the spring.","body":"Yeah, seems like that is the only solution which exists on the internet if you want to handle oauth2 client from the spring."}],"owner":{"account_id":20760921,"reputation":19,"user_id":15246121,"display_name":"sirNikolai"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1351,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1645308208,"creation_date":1645291555,"question_id":71187382,"body_markdown":"**Background**: Have a react webapp on localhost:3000, spring boot backend on localhost:8080, and use OAuth2 from Google. The end goal is to log in through Oauth2 and retrieve said data from backend.\r\n\r\n**Issue**: When I try perform a query I get the following error in console `Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at https://accounts.google.com/o/oauth2/v2/auth...&amp;redirect_uri=http://localhost:8080/login/oauth2/code/google`\r\n\r\n**Attempted Approaches**: Disable CORS on spring (the config for it is below as what I currently have), change redirect URI to `http://localhost:3000/oauth2/redirect`, add some CORS filter from SO answers\r\n\r\n**SO questions I have used for attempted approaches**: https://stackoverflow.com/questions/60219951/cors-support-in-spring-boot-and-security/60220073#60220073 (CORS Filter), https://stackoverflow.com/questions/62038846/no-access-control-allow-origin-in-spring-boot-spring-security-cors (disable CORS)\r\n\r\n**Relevant Code**:\r\npackage.json (just proxy excerpt): `&quot;proxy&quot;: &quot;http://localhost:8080/&quot;`\r\nApp.js\r\n```js\r\nclass App extends Component {\r\n  state = {\r\n    clients: []\r\n  };\r\n\r\n  async componentDidMount() {\r\n    const response = await fetch(&#39;/cmds&#39;);\r\n    const body = await response.json();\r\n    this.setState({clients: body});\r\n  }\r\n\r\n  render() {\r\n    const {clients} = this.state;\r\n    console.log(clients)\r\n    return (\r\n      &lt;div className=&quot;App&quot;&gt;\r\n        &lt;header className=&quot;App-header&quot;&gt;\r\n          &lt;img src={logo} className=&quot;App-logo&quot; alt=&quot;logo&quot; /&gt;\r\n          &lt;div className=&quot;App-intro&quot;&gt;\r\n              &lt;h2&gt;Clients&lt;/h2&gt;\r\n              {clients.map(client =&gt;\r\n                  &lt;div key={client.description}&gt;\r\n                    {client.description} ({client.global.toString()})\r\n                  &lt;/div&gt;\r\n              )}\r\n            &lt;/div&gt;\r\n        &lt;/header&gt;\r\n      &lt;/div&gt;\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n```\r\n\r\n(Spring) application.yml (client ID and secret removed from question)\r\n```yml\r\nspring:\r\n  security:\r\n    oauth2:\r\n      client:\r\n        registration:\r\n          google:\r\n            redirect-uri: &quot;{baseUrl}/login/oauth2/code/{registrationId}&quot;\r\n            scope:\r\n              - email\r\n              - profile\r\napp:\r\n  cors:\r\n    allowedOrigins: http://localhost:3000,http://localhost:8080\r\n  oauth2:\r\n    authorizedRedirectUris:\r\n      - http://localhost:3000/oauth2/redirect\r\n```\r\n\r\nSecurityConfig.java\r\n```java\r\n@Configuration\r\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity security) throws Exception\r\n    {\r\n        security.cors().and().csrf().disable();\r\n        security\r\n                .cors()\r\n                .configurationSource(corsConfigurationSource())\r\n                .and()\r\n                .csrf()\r\n                .disable()\r\n                .authorizeRequests()\r\n                .anyRequest()\r\n                .authenticated()\r\n                .and()\r\n                .oauth2Login();\r\n    }\r\n\r\n    @Bean\r\n    CorsConfigurationSource corsConfigurationSource() {\r\n        CorsConfiguration configuration = new CorsConfiguration();\r\n        configuration.setAllowedOrigins(Collections.singletonList(CorsConfiguration.ALL));\r\n        configuration.setAllowedMethods(Arrays.asList(&quot;HEAD&quot;, &quot;GET&quot;, &quot;PUT&quot;, &quot;POST&quot;, &quot;DELETE&quot;, &quot;PATCH&quot;));\r\n        configuration.setAllowCredentials(true);\r\n        //the below three lines will add the relevant CORS response headers\r\n        configuration.addAllowedOrigin(&quot;*&quot;);\r\n        configuration.addAllowedHeader(&quot;*&quot;);\r\n        configuration.addAllowedMethod(&quot;*&quot;);\r\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\r\n        source.registerCorsConfiguration(&quot;/**&quot;, configuration);\r\n        return source;\r\n    }\r\n}\r\n```","title":"Spring Boot + React + Google OAuth2 CORS Error","body":"<p><strong>Background</strong>: Have a react webapp on localhost:3000, spring boot backend on localhost:8080, and use OAuth2 from Google. The end goal is to log in through Oauth2 and retrieve said data from backend.</p>\n<p><strong>Issue</strong>: When I try perform a query I get the following error in console <code>Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at https://accounts.google.com/o/oauth2/v2/auth...&amp;redirect_uri=http://localhost:8080/login/oauth2/code/google</code></p>\n<p><strong>Attempted Approaches</strong>: Disable CORS on spring (the config for it is below as what I currently have), change redirect URI to <code>http://localhost:3000/oauth2/redirect</code>, add some CORS filter from SO answers</p>\n<p><strong>SO questions I have used for attempted approaches</strong>: <a href=\"https://stackoverflow.com/questions/60219951/cors-support-in-spring-boot-and-security/60220073#60220073\">CORS support in spring boot and security</a> (CORS Filter), <a href=\"https://stackoverflow.com/questions/62038846/no-access-control-allow-origin-in-spring-boot-spring-security-cors\">No &#39;Access-Control-Allow-Origin&#39; in Spring Boot + Spring Security + CORS</a> (disable CORS)</p>\n<p><strong>Relevant Code</strong>:\npackage.json (just proxy excerpt): <code>&quot;proxy&quot;: &quot;http://localhost:8080/&quot;</code>\nApp.js</p>\n<pre class=\"lang-js prettyprint-override\"><code>class App extends Component {\n  state = {\n    clients: []\n  };\n\n  async componentDidMount() {\n    const response = await fetch('/cmds');\n    const body = await response.json();\n    this.setState({clients: body});\n  }\n\n  render() {\n    const {clients} = this.state;\n    console.log(clients)\n    return (\n      &lt;div className=&quot;App&quot;&gt;\n        &lt;header className=&quot;App-header&quot;&gt;\n          &lt;img src={logo} className=&quot;App-logo&quot; alt=&quot;logo&quot; /&gt;\n          &lt;div className=&quot;App-intro&quot;&gt;\n              &lt;h2&gt;Clients&lt;/h2&gt;\n              {clients.map(client =&gt;\n                  &lt;div key={client.description}&gt;\n                    {client.description} ({client.global.toString()})\n                  &lt;/div&gt;\n              )}\n            &lt;/div&gt;\n        &lt;/header&gt;\n      &lt;/div&gt;\n    );\n  }\n}\n\nexport default App;\n</code></pre>\n<p>(Spring) application.yml (client ID and secret removed from question)</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>spring:\n  security:\n    oauth2:\n      client:\n        registration:\n          google:\n            redirect-uri: &quot;{baseUrl}/login/oauth2/code/{registrationId}&quot;\n            scope:\n              - email\n              - profile\napp:\n  cors:\n    allowedOrigins: http://localhost:3000,http://localhost:8080\n  oauth2:\n    authorizedRedirectUris:\n      - http://localhost:3000/oauth2/redirect\n</code></pre>\n<p>SecurityConfig.java</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n\n    @Override\n    protected void configure(HttpSecurity security) throws Exception\n    {\n        security.cors().and().csrf().disable();\n        security\n                .cors()\n                .configurationSource(corsConfigurationSource())\n                .and()\n                .csrf()\n                .disable()\n                .authorizeRequests()\n                .anyRequest()\n                .authenticated()\n                .and()\n                .oauth2Login();\n    }\n\n    @Bean\n    CorsConfigurationSource corsConfigurationSource() {\n        CorsConfiguration configuration = new CorsConfiguration();\n        configuration.setAllowedOrigins(Collections.singletonList(CorsConfiguration.ALL));\n        configuration.setAllowedMethods(Arrays.asList(&quot;HEAD&quot;, &quot;GET&quot;, &quot;PUT&quot;, &quot;POST&quot;, &quot;DELETE&quot;, &quot;PATCH&quot;));\n        configuration.setAllowCredentials(true);\n        //the below three lines will add the relevant CORS response headers\n        configuration.addAllowedOrigin(&quot;*&quot;);\n        configuration.addAllowedHeader(&quot;*&quot;);\n        configuration.addAllowedMethod(&quot;*&quot;);\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n        source.registerCorsConfiguration(&quot;/**&quot;, configuration);\n        return source;\n    }\n}\n</code></pre>\n"},{"tags":["java","vaadin","vaadin-grid"],"comments":[{"owner":{"account_id":1169697,"reputation":1416,"user_id":1147141,"accept_rate":42,"display_name":"bichito"},"score":0,"creation_date":1499437458,"post_id":44972970,"comment_id":76921340,"body_markdown":"have you looked into  DataProvider&#39;s &quot;fromFilteringCallbacks&quot;? It may help you","body":"have you looked into  DataProvider&#39;s &quot;fromFilteringCallbacks&quot;? It may help you"},{"owner":{"account_id":8242865,"reputation":83,"user_id":6199986,"display_name":"m.gavr"},"score":0,"creation_date":1499438597,"post_id":44972970,"comment_id":76922189,"body_markdown":"yes i have. actually i use `CallbackDataProvider&lt;&gt;` as data provider for grid. But when i fetch filtered data, there is no any association with grid condition (offset and limit for querying data)","body":"yes i have. actually i use <code>CallbackDataProvider&lt;&gt;</code> as data provider for grid. But when i fetch filtered data, there is no any association with grid condition (offset and limit for querying data)"},{"owner":{"account_id":1169697,"reputation":1416,"user_id":1147141,"accept_rate":42,"display_name":"bichito"},"score":0,"creation_date":1499439536,"post_id":44972970,"comment_id":76922934,"body_markdown":"Sorry, I can&#39;t be of more help but fetchfromBackEnd does not help you when the scrolling hits bottom? I use an endpoint for data to keep things simple-ish","body":"Sorry, I can&#39;t be of more help but fetchfromBackEnd does not help you when the scrolling hits bottom? I use an endpoint for data to keep things simple-ish"},{"owner":{"account_id":8242865,"reputation":83,"user_id":6199986,"display_name":"m.gavr"},"score":0,"creation_date":1499441513,"post_id":44972970,"comment_id":76924319,"body_markdown":"nope. if i use `new Query(filter)` constructor, fields `limit` and `offset` stay in their default state 0 and 2147483647. so all data fetched from database. if i set custom values to `limit` and `offset` -- only one query to database executed. and when i scroll down, nothing happens.","body":"nope. if i use <code>new Query(filter)</code> constructor, fields <code>limit</code> and <code>offset</code> stay in their default state 0 and 2147483647. so all data fetched from database. if i set custom values to <code>limit</code> and <code>offset</code> -- only one query to database executed. and when i scroll down, nothing happens."},{"owner":{"account_id":1169697,"reputation":1416,"user_id":1147141,"accept_rate":42,"display_name":"bichito"},"score":0,"creation_date":1499442222,"post_id":44972970,"comment_id":76924804,"body_markdown":"I would check &quot;Interface Grid.FetchItemsCallback&lt;T&gt;&quot;, if you have not done so. Otherwise contact them because the issue with limit and offset does not make much sense. I am working with grid currently so I might try this myself","body":"I would check &quot;Interface Grid.FetchItemsCallback&lt;T&gt;&quot;, if you have not done so. Otherwise contact them because the issue with limit and offset does not make much sense. I am working with grid currently so I might try this myself"},{"owner":{"account_id":8242865,"reputation":83,"user_id":6199986,"display_name":"m.gavr"},"score":0,"creation_date":1499443735,"post_id":44972970,"comment_id":76925776,"body_markdown":"as i understood `Grid.FetchItemsCallback&lt;T&gt;` doesn&#39;t support filters, only sort orders","body":"as i understood <code>Grid.FetchItemsCallback&lt;T&gt;</code> doesn&#39;t support filters, only sort orders"}],"answers":[{"tags":[],"owner":{"account_id":8242865,"reputation":83,"user_id":6199986,"display_name":"m.gavr"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1499675847,"creation_date":1499675847,"answer_id":45007350,"question_id":44972970,"body_markdown":"ok, problem solved by using `ConfigurableFilterDataProvider&lt;&gt;` as wrapper over `CallbackDataProvider&lt;&gt;`.\r\nso, when i filter table, this wrapper adds filtering conditions to all queries, and data loads lazy as usual.","title":"Vaadin grid - filtering with lazy loading","body":"<p>ok, problem solved by using <code>ConfigurableFilterDataProvider&lt;&gt;</code> as wrapper over <code>CallbackDataProvider&lt;&gt;</code>.\nso, when i filter table, this wrapper adds filtering conditions to all queries, and data loads lazy as usual.</p>\n"},{"tags":[],"owner":{"account_id":12328133,"reputation":4037,"user_id":8994998,"display_name":"Brett Sutton"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645308162,"creation_date":1645308162,"answer_id":71189590,"question_id":44972970,"body_markdown":"I arrived here using vaadin 22. The answer probably isn&#39;t in the same context as the question but given I arrived here I suspect others will.\r\n\r\nTo create a grid that uses lazy loading and is able to inject a filter into the query use:\r\n\r\n```java\r\nclass SearchableGrid&lt;E&gt; {\r\n\r\nGrid&lt;E&gt; entityGrid = new Grid&lt;&gt;();\r\n\r\nprivate SearchableGrid(DaoDataProvider daoProvider)\r\n\t{\r\n\t\tvar view = entityGrid.setItems(query -&gt;\r\n\t\t\t{\r\n\t\t\t\t// add the filter to the query\r\n\t\t\t\tvar q = new Query&lt;E, String&gt;(query.getOffset(), query.getLimit(), query.getSortOrders(), null,\r\n\t\t\t\t\t\tgetSearchField().getValue());\r\n\r\n\t\t\t\treturn daoProvider.fetchFromBackEnd(q);\r\n\t\t\t});\r\n\t\tview.setItemCountCallback(query -&gt;\r\n\t\t\t{\r\n\t\t\t\t// add the filter to the query\r\n\t\t\t\tvar q = new Query&lt;E, String&gt;(query.getOffset(), query.getLimit(), query.getSortOrders(), null,\r\n\t\t\t\t\t\tgetSearchField().getValue());\r\n\r\n\t\t\t\treturn daoProvider.sizeInBackEnd(q);\r\n\r\n\t\t\t});\r\n\t}\r\n```\r\n\r\nI&#39;ve packaged the methods into a BackEndDataProvider as the same class\r\ncan be used to as a provider for comboboxes.\r\n\r\n```java\r\npublic class DaoDataProvider&lt;E extends CrudEntity&gt;\r\n\t\textends AbstractBackEndDataProvider&lt;E, String&gt;\r\n{\r\n\tJpaBaseDao&lt;E&gt; dao;\r\n\tGetFilterBuilder&lt;E&gt; getFilterBuilder;\r\n\r\n\tpublic DaoDataProvider(JpaBaseDao&lt;E&gt; daoProvider, GetFilterBuilder&lt;E&gt; getFilterBuilder)\r\n\t{\r\n\t\tthis.dao = daoProvider;\r\n\t\tthis.getFilterBuilder = getFilterBuilder;\r\n\t}\r\n\r\n\t\r\n\r\n\t@Override\r\n\tpublic int sizeInBackEnd(Query&lt;E, String&gt; query)\r\n\t{\r\n\t\t\tvar q = getFilterBuilder.builderFilter(query);\r\n\t\t\treturn (int) q.count().intValue();\r\n\t}\r\n\r\n\t@Override\r\n\tpublic Stream&lt;E&gt; fetchFromBackEnd(Query&lt;E, String&gt; query)\r\n\t{\r\n\r\n\t\t\tvar q = getFilterBuilder.builderFilter(query);\r\n\t\t\tq.startPosition(query.getOffset()).limit(query.getLimit());\r\n\t\t\treturn q.getResultList().stream();\r\n\t}\r\n}\r\n```\r\nThe filterBuilder is where you construct your query for your back end data provider.\r\n","title":"Vaadin grid - filtering with lazy loading","body":"<p>I arrived here using vaadin 22. The answer probably isn't in the same context as the question but given I arrived here I suspect others will.</p>\n<p>To create a grid that uses lazy loading and is able to inject a filter into the query use:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class SearchableGrid&lt;E&gt; {\n\nGrid&lt;E&gt; entityGrid = new Grid&lt;&gt;();\n\nprivate SearchableGrid(DaoDataProvider daoProvider)\n    {\n        var view = entityGrid.setItems(query -&gt;\n            {\n                // add the filter to the query\n                var q = new Query&lt;E, String&gt;(query.getOffset(), query.getLimit(), query.getSortOrders(), null,\n                        getSearchField().getValue());\n\n                return daoProvider.fetchFromBackEnd(q);\n            });\n        view.setItemCountCallback(query -&gt;\n            {\n                // add the filter to the query\n                var q = new Query&lt;E, String&gt;(query.getOffset(), query.getLimit(), query.getSortOrders(), null,\n                        getSearchField().getValue());\n\n                return daoProvider.sizeInBackEnd(q);\n\n            });\n    }\n</code></pre>\n<p>I've packaged the methods into a BackEndDataProvider as the same class\ncan be used to as a provider for comboboxes.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class DaoDataProvider&lt;E extends CrudEntity&gt;\n        extends AbstractBackEndDataProvider&lt;E, String&gt;\n{\n    JpaBaseDao&lt;E&gt; dao;\n    GetFilterBuilder&lt;E&gt; getFilterBuilder;\n\n    public DaoDataProvider(JpaBaseDao&lt;E&gt; daoProvider, GetFilterBuilder&lt;E&gt; getFilterBuilder)\n    {\n        this.dao = daoProvider;\n        this.getFilterBuilder = getFilterBuilder;\n    }\n\n    \n\n    @Override\n    public int sizeInBackEnd(Query&lt;E, String&gt; query)\n    {\n            var q = getFilterBuilder.builderFilter(query);\n            return (int) q.count().intValue();\n    }\n\n    @Override\n    public Stream&lt;E&gt; fetchFromBackEnd(Query&lt;E, String&gt; query)\n    {\n\n            var q = getFilterBuilder.builderFilter(query);\n            q.startPosition(query.getOffset()).limit(query.getLimit());\n            return q.getResultList().stream();\n    }\n}\n</code></pre>\n<p>The filterBuilder is where you construct your query for your back end data provider.</p>\n"}],"owner":{"account_id":8242865,"reputation":83,"user_id":6199986,"display_name":"m.gavr"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1668,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":45007350,"answer_count":2,"score":0,"last_activity_date":1645308162,"creation_date":1499436763,"question_id":44972970,"body_markdown":"I have vaadin grid, and it&#39;s great that it has lazy data loading from the box. But for some reasons I have custom filters, which I use via \r\n\r\n`CallbackDataProvider&lt;&gt; dataProvider.fetch(Query query)`\r\n\r\nQuery object has parameters for loading by portions (`offset` and `limit`), so I need to set it dynamically **(?)** and somehow listen grid scrolling event to load next part of data when user scrolls down **(?)**\r\n\r\n`Grid.dataComunicator` has field `Range pushRows` but there no public methods to get it. And all i have is grid with lazy loading without filtered data or grid with eager loading with filtered data.\r\n\r\nSo, is there any way to implement filtering data with lazy loading in vaadin grid element?","title":"Vaadin grid - filtering with lazy loading","body":"<p>I have vaadin grid, and it's great that it has lazy data loading from the box. But for some reasons I have custom filters, which I use via </p>\n\n<p><code>CallbackDataProvider&lt;&gt; dataProvider.fetch(Query query)</code></p>\n\n<p>Query object has parameters for loading by portions (<code>offset</code> and <code>limit</code>), so I need to set it dynamically <strong>(?)</strong> and somehow listen grid scrolling event to load next part of data when user scrolls down <strong>(?)</strong></p>\n\n<p><code>Grid.dataComunicator</code> has field <code>Range pushRows</code> but there no public methods to get it. And all i have is grid with lazy loading without filtered data or grid with eager loading with filtered data.</p>\n\n<p>So, is there any way to implement filtering data with lazy loading in vaadin grid element?</p>\n"},{"tags":["java","android","android-studio","crash","google-play"],"comments":[{"owner":{"account_id":17433396,"reputation":145,"user_id":12636967,"display_name":"Gaurav Chaudhari"},"score":0,"creation_date":1645293751,"post_id":71186505,"comment_id":125834769,"body_markdown":"I&#39;ll recommend you to first de-obfuscate your stacktrace. It is encoded by proguard. Here is the link  to de-obfuscate logs - [link](https://blog.mindorks.com/how-to-deobfuscate-an-android-stacktrace-using-mapping-file)","body":"I&#39;ll recommend you to first de-obfuscate your stacktrace. It is encoded by proguard. Here is the link  to de-obfuscate logs - <a href=\"https://blog.mindorks.com/how-to-deobfuscate-an-android-stacktrace-using-mapping-file\" rel=\"nofollow noreferrer\">link</a>"},{"owner":{"account_id":22180875,"reputation":106,"user_id":16424611,"display_name":"AR Hakim"},"score":0,"creation_date":1645307676,"post_id":71186505,"comment_id":125837829,"body_markdown":"I have solved this problem, thank you","body":"I have solved this problem, thank you"},{"owner":{"account_id":22180875,"reputation":106,"user_id":16424611,"display_name":"AR Hakim"},"score":0,"creation_date":1673230815,"post_id":71186505,"comment_id":132444664,"body_markdown":"I have update how i solved in description above","body":"I have update how i solved in description above"}],"owner":{"account_id":22180875,"reputation":106,"user_id":16424611,"display_name":"AR Hakim"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":753,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1645307986,"creation_date":1645285320,"question_id":71186505,"body_markdown":"Hello maybe this is a question that has been asked a lot in this forum, I&#39;ve read all the related questions but couldn&#39;t find a question with the same log as my case.\r\n\r\nMy app when run using app-debug.apk or run directly from android studio will run normally. But when the application is downloaded from the Playstore, the application will crash immediately.\r\n\r\nThis is the application log downloaded from playstore:\r\n\r\n```\r\n2022-02-19 22:36:28.928 2092-26101/? E/pageboostd: alp start : app xyzsemogajp\r\n2022-02-19 22:36:28.931 1253-1486/? E/ActivityTaskManager: TouchDown intent received, starting ActiveLaunch\r\n2022-02-19 22:36:28.938 2092-26101/? E/pageboostd: xyzsemogajp, amt 1511424 scnt 4 fcnt 4\r\n2022-02-19 22:36:28.939 2092-26101/? E/pageboostd: xyzsemogajp, amt 2466168 scnt 2 fcnt 0\r\n2022-02-19 22:36:28.939 2092-26101/? E/pageboostd: alp end : app xyzsemogajp data_amount 3977592\r\n2022-02-19 22:36:28.971 25634-25634/? E/xyz.semogajp: Not starting debugger since process cannot load the jdwp agent.\r\n2022-02-19 22:36:29.008 2092-2092/? E/pageboostd: Received HALT command code 2\r\n2022-02-19 22:36:29.135 2092-2092/? E/pageboostd: Received HALT command code 2\r\n2022-02-19 22:36:29.158 1253-1458/? E/PkgPredictorService-Collector: record changed bt=0  wifi=0 screen=0\r\n2022-02-19 22:36:29.435 25634-26129/? E/ion: ioctl c0044901 failed with code -1: Invalid argument\r\n2022-02-19 22:36:29.468 621-694/? E/HYPER-HAL: [Request.cpp]acquire(): Request:: id : 803292, No Resource to set\r\n2022-02-19 22:36:29.475 2092-2092/? E/pageboostd: Received HALT command code 2\r\n2022-02-19 22:36:29.504 1253-3568/? E/WindowManager: win=Window{35d70e6 u0 com.sec.android.app.launcher/com.sec.android.app.launcher.activities.LauncherActivity} destroySurfaces: appStopped=true win.mWindowRemovalAllowed=false win.mRemoveOnExit=false win.mViewVisibility=8 caller=com.android.server.wm.ActivityRecord.destroySurfaces:5248 com.android.server.wm.ActivityRecord.destroySurfaces:5229 com.android.server.wm.ActivityRecord.notifyAppStopped:5288 com.android.server.wm.ActivityRecord.activityStopped:5915 com.android.server.wm.ActivityTaskManagerService.activityStopped:2503 android.app.IActivityTaskManager$Stub.onTransact:2223 android.os.Binder.execTransactInternal:1190 \r\n2022-02-19 22:36:29.549 1253-1274/? E/WindowManager: win=Window{57632b2 u0 Splash Screen xyz.semogajp EXITING} destroySurfaces: appStopped=false win.mWindowRemovalAllowed=true win.mRemoveOnExit=true win.mViewVisibility=0 caller=com.android.server.wm.ActivityRecord.destroySurfaces:5248 com.android.server.wm.ActivityRecord.destroySurfaces:5229 com.android.server.wm.WindowState.onExitAnimationDone:5623 com.android.server.wm.WindowStateAnimator.onAnimationFinished:332 com.android.server.wm.WindowState.onAnimationFinished:6088 com.android.server.wm.-$$Lambda$dwJG8BAnLlvKNGuDY9U3-haNY4M.onAnimationFinished:2 com.android.server.wm.SurfaceAnimator.lambda$getFinishedCallback$0$SurfaceAnimator:112 \r\n2022-02-19 22:36:32.637 600-901/? E/Netd: getNetworkForDns: getNetId from enterpriseCtrl is netid 0\r\n2022-02-19 22:36:32.640 600-26153/? E/Netd: To use pid in case SEC_PRODUCT_FEATURE_KNOX_SUPPORT_NPA is false, to remove build error (unused variable)\r\n2022-02-19 22:36:32.993 25634-25634/? E/RecyclerView: No adapter attached; skipping layout\r\n2022-02-19 22:36:33.212 2092-2092/? E/pageboostd: Received HALT command code 2\r\n2022-02-19 22:36:33.261 25634-25634/? E/AndroidRuntime: FATAL EXCEPTION: main\r\n    Process: xyz.semogajp, PID: 25634\r\n    java.lang.NullPointerException\r\n        at t4.a.a(:2)\r\n        at a6.h.run(:3)\r\n        at android.os.Handler.handleCallback(Handler.java:938)\r\n        at android.os.Handler.dispatchMessage(Handler.java:99)\r\n        at android.os.Looper.loop(Looper.java:246)\r\n        at android.app.ActivityThread.main(ActivityThread.java:8633)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:602)\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1130)\r\n2022-02-19 22:36:33.357 1758-1758/? E/libprocessgroup: set_timerslack_ns write failed: Operation not permitted\r\n2022-02-19 22:36:33.359 1758-1758/? E/PackageLaunchUtils: getVersionCode:android.content.pm.PackageManager$NameNotFoundException: com.samsung.android.themestore\r\n2022-02-19 22:36:33.360 1758-1758/? E/PackageLaunchUtils: com.samsung.android.themestore is not installed \r\n2022-02-19 22:36:33.365 1758-1758/? E/PackageLaunchUtils: getVersionCode:android.content.pm.PackageManager$NameNotFoundException: com.samsung.android.themestore\r\n2022-02-19 22:36:33.367 1758-1758/? E/PackageLaunchUtils: com.samsung.android.themestore is not installed \r\n2022-02-19 22:36:33.377 2092-2092/? E/pageboostd: Received HALT command code 2\r\n2022-02-19 22:36:33.440 1758-1758/? E/libprocessgroup: set_timerslack_ns write failed: Operation not permitted\r\n2022-02-19 22:36:33.474 621-694/? E/HYPER-HAL: [Request.cpp]acquire(): Request:: id : 803292, No Resource to set\r\n2022-02-19 22:36:33.632 1253-1274/? E/WindowManager: win=Window{83015dc u0 xyz.semogajp/io.github.aerhakim.keluaranhktop.activity.SplashScreenActivity EXITING} destroySurfaces: appStopped=false win.mWindowRemovalAllowed=true win.mRemoveOnExit=true win.mViewVisibility=0 caller=com.android.server.wm.ActivityRecord.destroySurfaces:5248 com.android.server.wm.ActivityRecord.destroySurfaces:5229 com.android.server.wm.WindowState.onExitAnimationDone:5623 com.android.server.wm.-$$Lambda$01bPtngJg5AqEoOWfW3rWfV7MH4.accept:2 java.util.ArrayList.forEach:1262 com.android.server.wm.ActivityRecord.onAnimationFinished:7159 com.android.server.wm.-$$Lambda$dwJG8BAnLlvKNGuDY9U3-haNY4M.onAnimationFinished:2 \r\n2022-02-19 22:36:33.637 1253-1274/? E/WindowManager: win=Window{130491a u0 xyz.semogajp/io.github.aerhakim.keluaranhktop.activity.MainActivity EXITING} destroySurfaces: appStopped=false win.mWindowRemovalAllowed=true win.mRemoveOnExit=true win.mViewVisibility=0 caller=com.android.server.wm.ActivityRecord.destroySurfaces:5248 com.android.server.wm.ActivityRecord.destroySurfaces:5229 com.android.server.wm.WindowState.onExitAnimationDone:5623 com.android.server.wm.-$$Lambda$01bPtngJg5AqEoOWfW3rWfV7MH4.accept:2 java.util.ArrayList.forEach:1262 com.android.server.wm.ActivityRecord.onAnimationFinished:7159 com.android.server.wm.-$$Lambda$dwJG8BAnLlvKNGuDY9U3-haNY4M.onAnimationFinished:2 \r\n\r\n\r\n```\r\n\r\nthis is my build.gradle file:\r\n\r\n```\r\nplugins {\r\n    id &#39;com.android.application&#39;\r\n    id &#39;com.google.gms.google-services&#39;\r\n}\r\n\r\nandroid {\r\n    compileSdk 31\r\n\r\n    defaultConfig {\r\n        applicationId &quot;xyz.semogajp&quot;\r\n        minSdk 16\r\n        targetSdk 31\r\n        versionCode 1\r\n        versionName &quot;1.0&quot;\r\n        multiDexEnabled true\r\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled true\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;\r\n        }\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n}\r\n\r\ndependencies {\r\n\r\n    implementation fileTree(dir: &#39;libs&#39;, include: [&#39;*.jar&#39;])\r\n    implementation &#39;androidx.appcompat:appcompat:1.2.0&#39;\r\n    implementation &#39;com.google.android.material:material:1.2.1&#39;\r\n    implementation &#39;androidx.constraintlayout:constraintlayout:2.0.1&#39;\r\n    implementation &#39;androidx.navigation:navigation-fragment:2.3.0&#39;\r\n    implementation &#39;androidx.navigation:navigation-ui:2.3.0&#39;\r\n    implementation &#39;androidx.lifecycle:lifecycle-extensions:2.2.0&#39;\r\n    implementation &#39;androidx.legacy:legacy-support-v4:1.0.0&#39;\r\n    testImplementation &#39;junit:junit:4.13&#39;\r\n    androidTestImplementation &#39;androidx.test.ext:junit:1.1.2&#39;\r\n    androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.3.0&#39;\r\n    //firebase\r\n    implementation &#39;com.google.firebase:firebase-messaging:21.0.1&#39;\r\n    //image\r\n    implementation &#39;com.makeramen:roundedimageview:2.3.0&#39;\r\n    //cardview\r\n    implementation &#39;androidx.cardview:cardview:1.0.0&#39;\r\n    // retrofit, gson\r\n    implementation &#39;com.google.code.gson:gson:2.8.6&#39;\r\n    implementation &#39;com.squareup.retrofit2:retrofit:2.9.0&#39;\r\n    implementation &#39;com.squareup.retrofit2:converter-gson:2.7.1&#39;\r\n    implementation &#39;com.squareup.retrofit2:converter-scalars:2.5.0&#39;\r\n    //retrofit logger\r\n    implementation &quot;com.squareup.okhttp3:logging-interceptor:4.4.0&quot;\r\n    //select effect\r\n    implementation &#39;com.balysv:material-ripple:1.0.2&#39;\r\n    //Shimmer\r\n    implementation &#39;com.facebook.shimmer:shimmer:0.5.0&#39;\r\n    //Image Loading\r\n    implementation &#39;com.github.bumptech.glide:glide:4.12.0&#39;\r\n    annotationProcessor &#39;com.github.bumptech.glide:compiler:4.12.0&#39;\r\n    //Atur size text dan gambar\r\n    implementation &#39;com.intuit.sdp:sdp-android:1.0.6&#39;\r\n    implementation &#39;com.intuit.ssp:ssp-android:1.0.6&#39;\r\n    implementation &#39;androidx.multidex:multidex:2.0.1&#39;\r\n}\r\n```\r\n\r\nIf anyone has a solution or a reference to solve my problem, please help answer this question.\r\n\r\nThank You\r\n\r\n**EDIT**\r\nI&#39;ve solved this problem, it&#39;s probably caused by ProGuard.\r\n\r\nIt&#39;s possible that there are some unreadable classes when activating ProGuard. When I deactivated it, the application was able to run normally.\r\n\r\nI&#39;m still looking for a way to solve the ProGuard problem, you can use this link for reference.\r\n[https://www.guardsquare.com/blog/configuring-proguard-an-easy-step-by-step-tutorial][1]\r\n\r\nBut for now, I will disable ProGuard to meet the deadline.\r\n\r\n\r\n  [1]: https://www.guardsquare.com/blog/configuring-proguard-an-easy-step-by-step-tutorial","title":"Why does my app crash when downloading from playstore, but runs smoothly when using apk-debug.apk?","body":"<p>Hello maybe this is a question that has been asked a lot in this forum, I've read all the related questions but couldn't find a question with the same log as my case.</p>\n<p>My app when run using app-debug.apk or run directly from android studio will run normally. But when the application is downloaded from the Playstore, the application will crash immediately.</p>\n<p>This is the application log downloaded from playstore:</p>\n<pre><code>2022-02-19 22:36:28.928 2092-26101/? E/pageboostd: alp start : app xyzsemogajp\n2022-02-19 22:36:28.931 1253-1486/? E/ActivityTaskManager: TouchDown intent received, starting ActiveLaunch\n2022-02-19 22:36:28.938 2092-26101/? E/pageboostd: xyzsemogajp, amt 1511424 scnt 4 fcnt 4\n2022-02-19 22:36:28.939 2092-26101/? E/pageboostd: xyzsemogajp, amt 2466168 scnt 2 fcnt 0\n2022-02-19 22:36:28.939 2092-26101/? E/pageboostd: alp end : app xyzsemogajp data_amount 3977592\n2022-02-19 22:36:28.971 25634-25634/? E/xyz.semogajp: Not starting debugger since process cannot load the jdwp agent.\n2022-02-19 22:36:29.008 2092-2092/? E/pageboostd: Received HALT command code 2\n2022-02-19 22:36:29.135 2092-2092/? E/pageboostd: Received HALT command code 2\n2022-02-19 22:36:29.158 1253-1458/? E/PkgPredictorService-Collector: record changed bt=0  wifi=0 screen=0\n2022-02-19 22:36:29.435 25634-26129/? E/ion: ioctl c0044901 failed with code -1: Invalid argument\n2022-02-19 22:36:29.468 621-694/? E/HYPER-HAL: [Request.cpp]acquire(): Request:: id : 803292, No Resource to set\n2022-02-19 22:36:29.475 2092-2092/? E/pageboostd: Received HALT command code 2\n2022-02-19 22:36:29.504 1253-3568/? E/WindowManager: win=Window{35d70e6 u0 com.sec.android.app.launcher/com.sec.android.app.launcher.activities.LauncherActivity} destroySurfaces: appStopped=true win.mWindowRemovalAllowed=false win.mRemoveOnExit=false win.mViewVisibility=8 caller=com.android.server.wm.ActivityRecord.destroySurfaces:5248 com.android.server.wm.ActivityRecord.destroySurfaces:5229 com.android.server.wm.ActivityRecord.notifyAppStopped:5288 com.android.server.wm.ActivityRecord.activityStopped:5915 com.android.server.wm.ActivityTaskManagerService.activityStopped:2503 android.app.IActivityTaskManager$Stub.onTransact:2223 android.os.Binder.execTransactInternal:1190 \n2022-02-19 22:36:29.549 1253-1274/? E/WindowManager: win=Window{57632b2 u0 Splash Screen xyz.semogajp EXITING} destroySurfaces: appStopped=false win.mWindowRemovalAllowed=true win.mRemoveOnExit=true win.mViewVisibility=0 caller=com.android.server.wm.ActivityRecord.destroySurfaces:5248 com.android.server.wm.ActivityRecord.destroySurfaces:5229 com.android.server.wm.WindowState.onExitAnimationDone:5623 com.android.server.wm.WindowStateAnimator.onAnimationFinished:332 com.android.server.wm.WindowState.onAnimationFinished:6088 com.android.server.wm.-$$Lambda$dwJG8BAnLlvKNGuDY9U3-haNY4M.onAnimationFinished:2 com.android.server.wm.SurfaceAnimator.lambda$getFinishedCallback$0$SurfaceAnimator:112 \n2022-02-19 22:36:32.637 600-901/? E/Netd: getNetworkForDns: getNetId from enterpriseCtrl is netid 0\n2022-02-19 22:36:32.640 600-26153/? E/Netd: To use pid in case SEC_PRODUCT_FEATURE_KNOX_SUPPORT_NPA is false, to remove build error (unused variable)\n2022-02-19 22:36:32.993 25634-25634/? E/RecyclerView: No adapter attached; skipping layout\n2022-02-19 22:36:33.212 2092-2092/? E/pageboostd: Received HALT command code 2\n2022-02-19 22:36:33.261 25634-25634/? E/AndroidRuntime: FATAL EXCEPTION: main\n    Process: xyz.semogajp, PID: 25634\n    java.lang.NullPointerException\n        at t4.a.a(:2)\n        at a6.h.run(:3)\n        at android.os.Handler.handleCallback(Handler.java:938)\n        at android.os.Handler.dispatchMessage(Handler.java:99)\n        at android.os.Looper.loop(Looper.java:246)\n        at android.app.ActivityThread.main(ActivityThread.java:8633)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:602)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1130)\n2022-02-19 22:36:33.357 1758-1758/? E/libprocessgroup: set_timerslack_ns write failed: Operation not permitted\n2022-02-19 22:36:33.359 1758-1758/? E/PackageLaunchUtils: getVersionCode:android.content.pm.PackageManager$NameNotFoundException: com.samsung.android.themestore\n2022-02-19 22:36:33.360 1758-1758/? E/PackageLaunchUtils: com.samsung.android.themestore is not installed \n2022-02-19 22:36:33.365 1758-1758/? E/PackageLaunchUtils: getVersionCode:android.content.pm.PackageManager$NameNotFoundException: com.samsung.android.themestore\n2022-02-19 22:36:33.367 1758-1758/? E/PackageLaunchUtils: com.samsung.android.themestore is not installed \n2022-02-19 22:36:33.377 2092-2092/? E/pageboostd: Received HALT command code 2\n2022-02-19 22:36:33.440 1758-1758/? E/libprocessgroup: set_timerslack_ns write failed: Operation not permitted\n2022-02-19 22:36:33.474 621-694/? E/HYPER-HAL: [Request.cpp]acquire(): Request:: id : 803292, No Resource to set\n2022-02-19 22:36:33.632 1253-1274/? E/WindowManager: win=Window{83015dc u0 xyz.semogajp/io.github.aerhakim.keluaranhktop.activity.SplashScreenActivity EXITING} destroySurfaces: appStopped=false win.mWindowRemovalAllowed=true win.mRemoveOnExit=true win.mViewVisibility=0 caller=com.android.server.wm.ActivityRecord.destroySurfaces:5248 com.android.server.wm.ActivityRecord.destroySurfaces:5229 com.android.server.wm.WindowState.onExitAnimationDone:5623 com.android.server.wm.-$$Lambda$01bPtngJg5AqEoOWfW3rWfV7MH4.accept:2 java.util.ArrayList.forEach:1262 com.android.server.wm.ActivityRecord.onAnimationFinished:7159 com.android.server.wm.-$$Lambda$dwJG8BAnLlvKNGuDY9U3-haNY4M.onAnimationFinished:2 \n2022-02-19 22:36:33.637 1253-1274/? E/WindowManager: win=Window{130491a u0 xyz.semogajp/io.github.aerhakim.keluaranhktop.activity.MainActivity EXITING} destroySurfaces: appStopped=false win.mWindowRemovalAllowed=true win.mRemoveOnExit=true win.mViewVisibility=0 caller=com.android.server.wm.ActivityRecord.destroySurfaces:5248 com.android.server.wm.ActivityRecord.destroySurfaces:5229 com.android.server.wm.WindowState.onExitAnimationDone:5623 com.android.server.wm.-$$Lambda$01bPtngJg5AqEoOWfW3rWfV7MH4.accept:2 java.util.ArrayList.forEach:1262 com.android.server.wm.ActivityRecord.onAnimationFinished:7159 com.android.server.wm.-$$Lambda$dwJG8BAnLlvKNGuDY9U3-haNY4M.onAnimationFinished:2 \n\n\n</code></pre>\n<p>this is my build.gradle file:</p>\n<pre><code>plugins {\n    id 'com.android.application'\n    id 'com.google.gms.google-services'\n}\n\nandroid {\n    compileSdk 31\n\n    defaultConfig {\n        applicationId &quot;xyz.semogajp&quot;\n        minSdk 16\n        targetSdk 31\n        versionCode 1\n        versionName &quot;1.0&quot;\n        multiDexEnabled true\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled true\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n}\n\ndependencies {\n\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n    implementation 'androidx.appcompat:appcompat:1.2.0'\n    implementation 'com.google.android.material:material:1.2.1'\n    implementation 'androidx.constraintlayout:constraintlayout:2.0.1'\n    implementation 'androidx.navigation:navigation-fragment:2.3.0'\n    implementation 'androidx.navigation:navigation-ui:2.3.0'\n    implementation 'androidx.lifecycle:lifecycle-extensions:2.2.0'\n    implementation 'androidx.legacy:legacy-support-v4:1.0.0'\n    testImplementation 'junit:junit:4.13'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.2'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.3.0'\n    //firebase\n    implementation 'com.google.firebase:firebase-messaging:21.0.1'\n    //image\n    implementation 'com.makeramen:roundedimageview:2.3.0'\n    //cardview\n    implementation 'androidx.cardview:cardview:1.0.0'\n    // retrofit, gson\n    implementation 'com.google.code.gson:gson:2.8.6'\n    implementation 'com.squareup.retrofit2:retrofit:2.9.0'\n    implementation 'com.squareup.retrofit2:converter-gson:2.7.1'\n    implementation 'com.squareup.retrofit2:converter-scalars:2.5.0'\n    //retrofit logger\n    implementation &quot;com.squareup.okhttp3:logging-interceptor:4.4.0&quot;\n    //select effect\n    implementation 'com.balysv:material-ripple:1.0.2'\n    //Shimmer\n    implementation 'com.facebook.shimmer:shimmer:0.5.0'\n    //Image Loading\n    implementation 'com.github.bumptech.glide:glide:4.12.0'\n    annotationProcessor 'com.github.bumptech.glide:compiler:4.12.0'\n    //Atur size text dan gambar\n    implementation 'com.intuit.sdp:sdp-android:1.0.6'\n    implementation 'com.intuit.ssp:ssp-android:1.0.6'\n    implementation 'androidx.multidex:multidex:2.0.1'\n}\n</code></pre>\n<p>If anyone has a solution or a reference to solve my problem, please help answer this question.</p>\n<p>Thank You</p>\n<p><strong>EDIT</strong>\nI've solved this problem, it's probably caused by ProGuard.</p>\n<p>It's possible that there are some unreadable classes when activating ProGuard. When I deactivated it, the application was able to run normally.</p>\n<p>I'm still looking for a way to solve the ProGuard problem, you can use this link for reference.\n<a href=\"https://www.guardsquare.com/blog/configuring-proguard-an-easy-step-by-step-tutorial\" rel=\"nofollow noreferrer\">https://www.guardsquare.com/blog/configuring-proguard-an-easy-step-by-step-tutorial</a></p>\n<p>But for now, I will disable ProGuard to meet the deadline.</p>\n"},{"tags":["java","swing","txt"],"owner":{"account_id":24288478,"reputation":1,"user_id":18233888,"display_name":"Parveen Kaur"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":0,"score":-3,"last_activity_date":1645307602,"creation_date":1645136681,"question_id":71166139,"body_markdown":"How to generate report from a text file, e.g. the text file contains a column for gender (Male and Female)\r\n\r\nFind the percentage of female (means no of count for gender - no of count for female / 100%).\r\n\r\nPlease help me with below code. Ive tried using array but it shows error!\r\n\r\n    private void jGenerateActionPerformed(java.awt.event.ActionEvent evt) {                                          \r\n        String Gender = jGender.getSelectedItem().toString();\r\n        ArrayList&lt;String&gt; Temp = new ArrayList&lt;&gt;(); //creating temporary array to hold data from file\r\n        try (FileReader reader = new FileReader(&quot;customeruser.txt&quot;)) {\r\n            Scanner scan = new Scanner(reader);\r\n            String line;\r\n            String[] Array;\r\n            while (scan.hasNextLine()){\r\n                line = scan.nextLine();// skip 1st fine\r\n                Array = line.split(&quot;\\\\,&quot;);//split lines into arrays\r\n                int total = Array.length;\r\n                if (Array[5].equals(Gender)) {\r\n                    if (&quot;Male&quot;.equals(Gender)) {\r\n                        int countm = Array.length;\r\n                        double mp = total - countm / 100 ;\r\n                        jArea.setText = mp;\r\n                    }\r\n                    if (&quot;Female&quot;.equals(Gender)) {\r\n                        int countf = Array.length;\r\n                        int fp = total - countf / 100 ;\r\n                        jArea.setText = fp;\r\n                    }\r\n                } else {\r\n                    //JOptionPane.showMessageDialog(null, &quot;ERROR&quot;, &quot;ERROR&quot;, JOptionPane.ERROR_MESSAGE);\r\n                }\r\n            }\r\n            reader.close();\r\n        } catch (Exception e) {\r\n            \r\n        }\r\n    }\r\n\r\n\r\n// this is my customer user text file\r\n\r\n    public class Customer {\r\n    public Customer() {\r\n            \r\n        }\r\n        \r\n        public boolean verifyAccount(){    \r\n            boolean valid = false;\r\n            try(Scanner scan = new Scanner(new File(&quot;customeruser.txt&quot;))){\r\n                scan.nextLine(); //CODE to skip first line of file\r\n                while(scan.hasNextLine()){\r\n                    String line = scan.nextLine();// break the line into pieces in array\r\n                    String[] pieces = line.split(&quot;\\\\,&quot;); //the string is a separator\r\n                    if (this.getFname().equalsIgnoreCase(pieces[0])) {\r\n                        valid = true;\r\n                        break;\r\n                    }\r\n                }\r\n            }catch(Exception e){\r\n                System.out.println(e.getMessage());\r\n            }\r\n            return valid;\r\n        }\r\n        \r\n        public boolean addAccount(){\r\n            boolean valid = false;\r\n            try{\r\n                FileWriter fw = new FileWriter (&quot;customeruser.txt&quot;, true);\r\n                try(BufferedWriter bw = new BufferedWriter (fw)){\r\n                    bw.append (this.getFname());\r\n                    bw.append(&quot;,&quot; + this.getLname());\r\n                    bw.append(&quot;,&quot; + this.getAge());\r\n                    bw.append(&quot;,&quot; + this.getAddress());\r\n                    bw.append(&quot;,&quot; + this.getGender());\r\n                    bw.append(&quot;,&quot; + this.getNumber());\r\n                    bw.append(&quot;,&quot; + this.getEmail());\r\n                    bw.newLine();\r\n                    bw.close();\r\n               \r\n                    JOptionPane.showMessageDialog(null, &quot;Saving Successful&quot;, &quot;Information&quot;, JOptionPane.INFORMATION_MESSAGE);\r\n                    valid = true;\r\n                }\r\n            }\r\n            catch(HeadlessException | IOException e){\r\n                Logger.getAnonymousLogger().log(Level.CONFIG,&quot;msg&quot;, e);\r\n            }\r\n            return valid;\r\n        }\r\n        \r\n        private String fname ;\r\n        private String lname ;\r\n        private String age ;\r\n        private String address;\r\n        private String gender ;\r\n        private String number ;\r\n        private String email ;\r\n        \r\n        \r\n        public Customer(String fname, String lname, String age, String address, String gender, String number, String email) {\r\n            this.fname = fname;\r\n            this.lname = lname;\r\n            this.age = age;\r\n            this.address = address;\r\n            this.gender = gender;\r\n            this.number = number;\r\n            this.email = email;\r\n        }\r\n        \r\n        public Customer(String data){\r\n        String [] dataArray = data.split(&quot;\\\\,&quot;);\r\n        this.fname = dataArray[0];\r\n        this.lname = dataArray[1];\r\n        this.age = dataArray[2];\r\n        this.address = dataArray[3];\r\n        this.gender = dataArray[4];\r\n        this.number = dataArray[5];\r\n        this.email = dataArray[6];\r\n        } \r\n        \r\n        public String getFname() {\r\n            return fname;\r\n        }\r\n    \r\n        public void setFname(String fname) {\r\n            this.fname = fname;\r\n        }\r\n        \r\n        public String getLname() {\r\n            return lname;\r\n        }\r\n    \r\n        public void setLname(String lname) {\r\n            this.lname = lname;\r\n        }\r\n        \r\n        public String getAge() {\r\n            return age;\r\n        }\r\n        \r\n        public void setAge(String age) {\r\n            this.age = age;\r\n        }\r\n        \r\n        \r\n        public String getAddress() {\r\n            return address;\r\n        }\r\n    \r\n        public void setAddress(String address) {\r\n            this.address = address;\r\n        }\r\n    \r\n        public String getGender() {\r\n            return gender;\r\n        }\r\n    \r\n        public void setGender(String gender) {\r\n            this.gender = gender;\r\n        }\r\n        \r\n        public String getNumber() {\r\n            return number;\r\n        }\r\n        \r\n        public void setNumber(String number) {\r\n            this.number = number;\r\n        }\r\n        \r\n        public String getEmail() {\r\n            return email;\r\n        }\r\n    \r\n        public void setEmail(String email) {\r\n            this.email = email;\r\n        }\r\n        \r\n    \r\n        \r\n    @Override\r\n        public String toString(){\r\n            return (this.fname+ &quot;,&quot; +this.lname+ &quot;,&quot; +this.age+ &quot;,&quot; +this.address+ &quot;,&quot; \r\n                    +this.gender+ &quot;,&quot; +this.number+ &quot;,&quot; +this.email); \r\n        }   \r\n        \r\n        \r\n        \r\n    }\r\n\r\n","title":"How to generate report from a txt file","body":"<p>How to generate report from a text file, e.g. the text file contains a column for gender (Male and Female)</p>\n<p>Find the percentage of female (means no of count for gender - no of count for female / 100%).</p>\n<p>Please help me with below code. Ive tried using array but it shows error!</p>\n<pre><code>private void jGenerateActionPerformed(java.awt.event.ActionEvent evt) {                                          \n    String Gender = jGender.getSelectedItem().toString();\n    ArrayList&lt;String&gt; Temp = new ArrayList&lt;&gt;(); //creating temporary array to hold data from file\n    try (FileReader reader = new FileReader(&quot;customeruser.txt&quot;)) {\n        Scanner scan = new Scanner(reader);\n        String line;\n        String[] Array;\n        while (scan.hasNextLine()){\n            line = scan.nextLine();// skip 1st fine\n            Array = line.split(&quot;\\\\,&quot;);//split lines into arrays\n            int total = Array.length;\n            if (Array[5].equals(Gender)) {\n                if (&quot;Male&quot;.equals(Gender)) {\n                    int countm = Array.length;\n                    double mp = total - countm / 100 ;\n                    jArea.setText = mp;\n                }\n                if (&quot;Female&quot;.equals(Gender)) {\n                    int countf = Array.length;\n                    int fp = total - countf / 100 ;\n                    jArea.setText = fp;\n                }\n            } else {\n                //JOptionPane.showMessageDialog(null, &quot;ERROR&quot;, &quot;ERROR&quot;, JOptionPane.ERROR_MESSAGE);\n            }\n        }\n        reader.close();\n    } catch (Exception e) {\n        \n    }\n}\n</code></pre>\n<p>// this is my customer user text file</p>\n<pre><code>public class Customer {\npublic Customer() {\n        \n    }\n    \n    public boolean verifyAccount(){    \n        boolean valid = false;\n        try(Scanner scan = new Scanner(new File(&quot;customeruser.txt&quot;))){\n            scan.nextLine(); //CODE to skip first line of file\n            while(scan.hasNextLine()){\n                String line = scan.nextLine();// break the line into pieces in array\n                String[] pieces = line.split(&quot;\\\\,&quot;); //the string is a separator\n                if (this.getFname().equalsIgnoreCase(pieces[0])) {\n                    valid = true;\n                    break;\n                }\n            }\n        }catch(Exception e){\n            System.out.println(e.getMessage());\n        }\n        return valid;\n    }\n    \n    public boolean addAccount(){\n        boolean valid = false;\n        try{\n            FileWriter fw = new FileWriter (&quot;customeruser.txt&quot;, true);\n            try(BufferedWriter bw = new BufferedWriter (fw)){\n                bw.append (this.getFname());\n                bw.append(&quot;,&quot; + this.getLname());\n                bw.append(&quot;,&quot; + this.getAge());\n                bw.append(&quot;,&quot; + this.getAddress());\n                bw.append(&quot;,&quot; + this.getGender());\n                bw.append(&quot;,&quot; + this.getNumber());\n                bw.append(&quot;,&quot; + this.getEmail());\n                bw.newLine();\n                bw.close();\n           \n                JOptionPane.showMessageDialog(null, &quot;Saving Successful&quot;, &quot;Information&quot;, JOptionPane.INFORMATION_MESSAGE);\n                valid = true;\n            }\n        }\n        catch(HeadlessException | IOException e){\n            Logger.getAnonymousLogger().log(Level.CONFIG,&quot;msg&quot;, e);\n        }\n        return valid;\n    }\n    \n    private String fname ;\n    private String lname ;\n    private String age ;\n    private String address;\n    private String gender ;\n    private String number ;\n    private String email ;\n    \n    \n    public Customer(String fname, String lname, String age, String address, String gender, String number, String email) {\n        this.fname = fname;\n        this.lname = lname;\n        this.age = age;\n        this.address = address;\n        this.gender = gender;\n        this.number = number;\n        this.email = email;\n    }\n    \n    public Customer(String data){\n    String [] dataArray = data.split(&quot;\\\\,&quot;);\n    this.fname = dataArray[0];\n    this.lname = dataArray[1];\n    this.age = dataArray[2];\n    this.address = dataArray[3];\n    this.gender = dataArray[4];\n    this.number = dataArray[5];\n    this.email = dataArray[6];\n    } \n    \n    public String getFname() {\n        return fname;\n    }\n\n    public void setFname(String fname) {\n        this.fname = fname;\n    }\n    \n    public String getLname() {\n        return lname;\n    }\n\n    public void setLname(String lname) {\n        this.lname = lname;\n    }\n    \n    public String getAge() {\n        return age;\n    }\n    \n    public void setAge(String age) {\n        this.age = age;\n    }\n    \n    \n    public String getAddress() {\n        return address;\n    }\n\n    public void setAddress(String address) {\n        this.address = address;\n    }\n\n    public String getGender() {\n        return gender;\n    }\n\n    public void setGender(String gender) {\n        this.gender = gender;\n    }\n    \n    public String getNumber() {\n        return number;\n    }\n    \n    public void setNumber(String number) {\n        this.number = number;\n    }\n    \n    public String getEmail() {\n        return email;\n    }\n\n    public void setEmail(String email) {\n        this.email = email;\n    }\n    \n\n    \n@Override\n    public String toString(){\n        return (this.fname+ &quot;,&quot; +this.lname+ &quot;,&quot; +this.age+ &quot;,&quot; +this.address+ &quot;,&quot; \n                +this.gender+ &quot;,&quot; +this.number+ &quot;,&quot; +this.email); \n    }   \n    \n    \n    \n}\n</code></pre>\n"},{"tags":["java","nodes"],"comments":[{"owner":{"account_id":1229115,"reputation":303,"user_id":1194068,"accept_rate":71,"display_name":"Diana Amza"},"score":1,"creation_date":1485766843,"post_id":41931926,"comment_id":71044329,"body_markdown":"You might want to take a look at this one: http://stackoverflow.com/questions/31544501/creating-a-node-class-in-java","body":"You might want to take a look at this one: <a href=\"http://stackoverflow.com/questions/31544501/creating-a-node-class-in-java\" title=\"creating a node class in java\">stackoverflow.com/questions/31544501/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":9428556,"reputation":331,"user_id":7012793,"accept_rate":100,"display_name":"Stefan Lindner"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1485767338,"creation_date":1485767338,"answer_id":41932153,"question_id":41931926,"body_markdown":"I can give you a quick hint on how to do that:\r\n\r\n    Class Node{\r\n    \r\n    \t//these are private class attributes, you need getter and setter to alter them.\r\n    \tprivate int item;\r\n    \tprivate Node nextNode;\r\n    \t\r\n    \t//this is a constructor with a parameter\r\n    \tpublic Node(int item)\r\n    \t{\r\n    \t\tthis.item = item;\r\n            this.nextNode = null;\r\n    \t}\r\n    \t\r\n    \t// a setter for your item \r\n    \tpublic void setItem(int newItem)\r\n    \t{\r\n    \t\tthis.item = newItem;\r\n    \t}\r\n    \t\r\n    \t// this is a getter for your item\r\n    \tpublic int getItem()\r\n    \t{\r\n    \t\treturn this.item;\r\n    \t}\t\r\n\r\n    }\r\n\r\n\r\nYou can create a Node object by calling:\r\n\r\n    Node newNode = Node(2);\r\n\r\n\r\nThis is not a complete solution for your problem, the two parameter constructor and the last node link are missing, but this should lead you in the correct direction.","title":"Need guidance on creating Node class (java)?","body":"<p>I can give you a quick hint on how to do that:</p>\n\n<pre><code>Class Node{\n\n    //these are private class attributes, you need getter and setter to alter them.\n    private int item;\n    private Node nextNode;\n\n    //this is a constructor with a parameter\n    public Node(int item)\n    {\n        this.item = item;\n        this.nextNode = null;\n    }\n\n    // a setter for your item \n    public void setItem(int newItem)\n    {\n        this.item = newItem;\n    }\n\n    // this is a getter for your item\n    public int getItem()\n    {\n        return this.item;\n    }   \n\n}\n</code></pre>\n\n<p>You can create a Node object by calling:</p>\n\n<pre><code>Node newNode = Node(2);\n</code></pre>\n\n<p>This is not a complete solution for your problem, the two parameter constructor and the last node link are missing, but this should lead you in the correct direction.</p>\n"},{"tags":[],"owner":{"account_id":2629478,"reputation":7484,"user_id":2275818,"accept_rate":100,"display_name":"Anthony Raymond"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1485768290,"creation_date":1485767367,"answer_id":41932161,"question_id":41931926,"body_markdown":"Below is a simple example of the Node implementation, (i renamed Item to Value for readability purpose). It has to be implemented somehow like this, because methods signatures seems to be imposed to you. But keep in mind that this is definely not the best way to implement a LinkedList. \r\n\r\n\r\n    public class Node {\r\n        public static final Node NIL = null;\r\n        private Integer value;\r\n        private Integer next;\r\n        \r\n        public Node(Integer value, Node next) {\r\n            this.value = value;\r\n            this.next = next;\r\n        }\r\n        \r\n        public Integer getValue() {\r\n            return this.value;\r\n        }\r\n        public Node getNext() {\r\n            return this.next;\r\n        }\r\n\r\n        public void setValue(Integer value) {\r\n            this.value = value;\r\n        }\r\n\r\n        public void setNext(Node next) {\r\n            this.next = next;\r\n        }\r\n\r\n        public boolean isLastNode() {\r\n            return this.next == Node.NIL || Node;\r\n        }\r\n    }\r\n\r\n\r\n    public class App {\r\n        public static void main(String[] args) {\r\n            Node lastNode = new Node(92, Node.NIL);\r\n            Node secondNode = new Node(64, lastNode);\r\n            Node firstNode = new Node(42, secondNode);\r\n    \r\n            Node iterator = firstNode;\r\n            do () {\r\n                System.out.println(&quot;node value : &quot; + iterator.getValue());\r\n                iterator = iterator.getNext();\r\n            } while (iterator == null || !iterator.isLastNode());\r\n        }\r\n    }\r\n\r\n","title":"Need guidance on creating Node class (java)?","body":"<p>Below is a simple example of the Node implementation, (i renamed Item to Value for readability purpose). It has to be implemented somehow like this, because methods signatures seems to be imposed to you. But keep in mind that this is definely not the best way to implement a LinkedList. </p>\n\n<pre><code>public class Node {\n    public static final Node NIL = null;\n    private Integer value;\n    private Integer next;\n\n    public Node(Integer value, Node next) {\n        this.value = value;\n        this.next = next;\n    }\n\n    public Integer getValue() {\n        return this.value;\n    }\n    public Node getNext() {\n        return this.next;\n    }\n\n    public void setValue(Integer value) {\n        this.value = value;\n    }\n\n    public void setNext(Node next) {\n        this.next = next;\n    }\n\n    public boolean isLastNode() {\n        return this.next == Node.NIL || Node;\n    }\n}\n\n\npublic class App {\n    public static void main(String[] args) {\n        Node lastNode = new Node(92, Node.NIL);\n        Node secondNode = new Node(64, lastNode);\n        Node firstNode = new Node(42, secondNode);\n\n        Node iterator = firstNode;\n        do () {\n            System.out.println(\"node value : \" + iterator.getValue());\n            iterator = iterator.getNext();\n        } while (iterator == null || !iterator.isLastNode());\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8906471,"reputation":131,"user_id":6648126,"display_name":"Rajat Chandak"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1485767398,"creation_date":1485767398,"answer_id":41932175,"question_id":41931926,"body_markdown":"While implementing the custom LinkedList/Tree, we need Node. Here is demo of creating Node and LinkedList. I have not put in all the logic. Just basic skeleton is here and you can then add more on yourself.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Ytph6.png","title":"Need guidance on creating Node class (java)?","body":"<p>While implementing the custom LinkedList/Tree, we need Node. Here is demo of creating Node and LinkedList. I have not put in all the logic. Just basic skeleton is here and you can then add more on yourself.</p>\n\n<p><a href=\"https://i.stack.imgur.com/Ytph6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ytph6.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":14999003,"reputation":1,"user_id":10827317,"display_name":"Batur Toraman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645307362,"creation_date":1645307362,"answer_id":71189503,"question_id":41931926,"body_markdown":"The node class that will be implemented changes according to the linked list you want to implement. If the linked list you are going to implement is circular, then you could just do the following:\r\n\r\n    public class Node {\r\n    \t\r\n    \tint data;\r\n    \tNode next = null;\r\n    \t\r\n    \tpublic Node(int data){\r\n    \t\tthis.data = data;\r\n    \t}\r\n    }\r\n\r\nThen how are you going to implement the next node?\r\n\r\nYou are going to do it in the add method of the circularLinkedList class. You can do it as follows:\r\n\r\n    import java.util.*;\r\n    \r\n    public class CircularLinkedList {\r\n    \t\r\n    \tpublic CircularLinkedList() {}\r\n    \t\r\n    \tpublic Node head = null;\r\n    \tpublic Node tail = null;\r\n    \t\r\n    \tpublic void add(int data) {\r\n    \t\t\r\n    \t\tNode newNode = new Node(data);\r\n    \t\t\r\n    \t\tif(head == null) {\r\n    \t\t\thead = newNode;\r\n    \r\n    \t\t}\r\n    \t\telse {\r\n    \t\t\r\n    \t\t\ttail.next = newNode;\r\n    \t\t\t\r\n    \t\t}\r\n    \t\t\r\n    \t\ttail = newNode;\r\n    \t\ttail.next = head;\r\n    \t}\r\n    \t\r\n    \tpublic void displayList() {\r\n    \t\tSystem.out.println(&quot;Nodes of the circular linked list: &quot;);  \r\n    \t\t\r\n    \t\tNode current = head;\r\n    \t\t\r\n    \t\tif(head == null) {\r\n    \t\t\tSystem.out.println(&quot;Empty list...&quot;);\r\n    \t\t}\r\n    \t\t\r\n    \t\telse {\r\n    \t\t\t\r\n    \t\t\tdo {\r\n    \t\t\t\t\r\n    \t\t\t\tSystem.out.print(&quot; &quot; + current.data);\r\n    \t\t\t\tcurrent = current.next;\r\n    \t\t\t\t\r\n    \t\t\t}while(current != head);\r\n    \t\t\tSystem.out.println();\r\n    \t\t}\r\n    \t\t\r\n    \t}\r\n    }\r\n","title":"Need guidance on creating Node class (java)?","body":"<p>The node class that will be implemented changes according to the linked list you want to implement. If the linked list you are going to implement is circular, then you could just do the following:</p>\n<pre><code>public class Node {\n    \n    int data;\n    Node next = null;\n    \n    public Node(int data){\n        this.data = data;\n    }\n}\n</code></pre>\n<p>Then how are you going to implement the next node?</p>\n<p>You are going to do it in the add method of the circularLinkedList class. You can do it as follows:</p>\n<pre><code>import java.util.*;\n\npublic class CircularLinkedList {\n    \n    public CircularLinkedList() {}\n    \n    public Node head = null;\n    public Node tail = null;\n    \n    public void add(int data) {\n        \n        Node newNode = new Node(data);\n        \n        if(head == null) {\n            head = newNode;\n\n        }\n        else {\n        \n            tail.next = newNode;\n            \n        }\n        \n        tail = newNode;\n        tail.next = head;\n    }\n    \n    public void displayList() {\n        System.out.println(&quot;Nodes of the circular linked list: &quot;);  \n        \n        Node current = head;\n        \n        if(head == null) {\n            System.out.println(&quot;Empty list...&quot;);\n        }\n        \n        else {\n            \n            do {\n                \n                System.out.print(&quot; &quot; + current.data);\n                current = current.next;\n                \n            }while(current != head);\n            System.out.println();\n        }\n        \n    }\n}\n</code></pre>\n"}],"owner":{"account_id":7954073,"reputation":51,"user_id":6004008,"accept_rate":83,"display_name":"J CENA"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8175,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":4,"score":1,"last_activity_date":1645307362,"creation_date":1485766456,"question_id":41931926,"body_markdown":"I need to implement a Node class, where the basic methods are: getItem(), getNext(), setItem() and setNext(). I want the nodes to be able to store at least the default integer range in Java as the item; the next should be a reference or pointer to the next Node in a linked list, or the special Node NIL if this is the last node in the list.I also want to implement a two-argument constructor which  initializes instances with the given item (first argument) and next node (second argument) , I&#39;ve kind of hit a brick wall and need some guidance about implementing this , any ideas ? \r\n\r\nI have this so far:\r\n\r\n    class Node {\r\n\t\t\r\n\t\r\n    public Node(Object o, Node n) {\r\n    \t \r\n    }\r\n    public static final Node NIL = new Node(Node.NIL, Node.NIL);\r\n\r\n    public Object getItem() {\r\n        return null;\r\n    }\r\n    public Node getNext() {\r\n        return null;\r\n    }\r\n    public void setItem(Object o) {\r\n    \t\r\n    }\r\n    public void setNext(Node n) {\r\n    \t\r\n    }\r\n    }","title":"Need guidance on creating Node class (java)?","body":"<p>I need to implement a Node class, where the basic methods are: getItem(), getNext(), setItem() and setNext(). I want the nodes to be able to store at least the default integer range in Java as the item; the next should be a reference or pointer to the next Node in a linked list, or the special Node NIL if this is the last node in the list.I also want to implement a two-argument constructor which  initializes instances with the given item (first argument) and next node (second argument) , I've kind of hit a brick wall and need some guidance about implementing this , any ideas ? </p>\n\n<p>I have this so far:</p>\n\n<pre><code>class Node {\n\n\npublic Node(Object o, Node n) {\n\n}\npublic static final Node NIL = new Node(Node.NIL, Node.NIL);\n\npublic Object getItem() {\n    return null;\n}\npublic Node getNext() {\n    return null;\n}\npublic void setItem(Object o) {\n\n}\npublic void setNext(Node n) {\n\n}\n}\n</code></pre>\n"},{"tags":["java","spring-mvc","locale","spring-3"],"answers":[{"tags":[],"owner":{"account_id":2111403,"reputation":33698,"user_id":1876620,"accept_rate":94,"display_name":"fps"},"down_vote_count":0,"up_vote_count":32,"is_accepted":true,"score":32,"last_activity_date":1444448760,"creation_date":1444448760,"answer_id":33050046,"question_id":33049674,"body_markdown":"In [Spring 3.2 reference docs][1], section 17.3.3, Supported method argument types:\r\n\r\n&gt;The following are the supported method arguments:\r\n&gt;\r\n&gt; - Request or response objects (Servlet API). Choose any specific request or response type, for example ServletRequest or HttpServletRequest.&lt;br&gt;\r\n&gt;&lt;br&gt;\r\n&gt;\r\n&gt;  (...)&lt;br&gt;&lt;br&gt;\r\n&gt;\r\n&gt; - **java.util.Locale** for the current request locale, determined by the most specific locale resolver available, in effect, the configured LocaleResolver in a Servlet environment.\r\n&gt;\r\n\r\nSo all you&#39;d need to do is receive an instance of `Locale` as an argument in every method:\r\n\r\n    @RequestMapping(value = &quot;/wife/mood&quot;)\r\n    public String readWife(Model model, @RequestParam(&quot;whatImDoing&quot;) String iAm, Locale loc) {\r\n        if (iAm.equals(&quot;playingXbox&quot;)) {\r\n            model.addAttribute(&quot;statusTitle&quot;, msgSrc.getMessage(&quot;mood.angry&quot;, null, loc));\r\n            model.addAttribute(&quot;statusDetail&quot;, msgSrc.getMessage(&quot;mood.angry.xboxdiatribe&quot;, null, loc));\r\n        }\r\n        return &quot;moodResult&quot;;\r\n    }\r\n\r\n\r\n  [1]: http://docs.spring.io/spring/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-controller","title":"Elegant way to get Locale in Spring Controller","body":"<p>In <a href=\"http://docs.spring.io/spring/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-controller\">Spring 3.2 reference docs</a>, section 17.3.3, Supported method argument types:</p>\n\n<blockquote>\n  <p>The following are the supported method arguments:</p>\n  \n  <ul>\n  <li><p>Request or response objects (Servlet API). Choose any specific request or response type, for example ServletRequest or HttpServletRequest.<br>\n  <br></p>\n  \n  <p>(...)<br><br></p></li>\n  <li><p><strong>java.util.Locale</strong> for the current request locale, determined by the most specific locale resolver available, in effect, the configured LocaleResolver in a Servlet environment.</p></li>\n  </ul>\n</blockquote>\n\n<p>So all you'd need to do is receive an instance of <code>Locale</code> as an argument in every method:</p>\n\n<pre><code>@RequestMapping(value = \"/wife/mood\")\npublic String readWife(Model model, @RequestParam(\"whatImDoing\") String iAm, Locale loc) {\n    if (iAm.equals(\"playingXbox\")) {\n        model.addAttribute(\"statusTitle\", msgSrc.getMessage(\"mood.angry\", null, loc));\n        model.addAttribute(\"statusDetail\", msgSrc.getMessage(\"mood.angry.xboxdiatribe\", null, loc));\n    }\n    return \"moodResult\";\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":101108,"reputation":13957,"user_id":272180,"accept_rate":62,"display_name":"yglodt"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1645307285,"creation_date":1531975390,"answer_id":51414496,"question_id":33049674,"body_markdown":"As an alternative, you can also autowire the `HttpServletRequest`\r\n\r\n\t@Autowired\r\n\tprivate HttpServletRequest request;\r\n\r\nand then use `request.getLocale()` anywhere in your Controller.","title":"Elegant way to get Locale in Spring Controller","body":"<p>As an alternative, you can also autowire the <code>HttpServletRequest</code></p>\n<pre><code>@Autowired\nprivate HttpServletRequest request;\n</code></pre>\n<p>and then use <code>request.getLocale()</code> anywhere in your Controller.</p>\n"}],"owner":{"account_id":271313,"reputation":787,"user_id":561772,"accept_rate":75,"display_name":"yetimoner"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20618,"favorite_count":0,"down_vote_count":0,"up_vote_count":17,"closed_date":1534858612,"accepted_answer_id":33050046,"answer_count":2,"score":17,"last_activity_date":1645307285,"creation_date":1444444703,"question_id":33049674,"body_markdown":"I&#39;m looking for a cleaner way (in Spring 3.2) to get the current locale than explicitly calling LocaleContextHolder.getLocale() at the start of each Controller method. It has to be compatible with Java annotation, as I&#39;m not using the XML config. Here&#39;s what I&#39;m doing currently.\r\n\r\n    @Controller\r\n    public class WifeController {\r\n        @Autowired\r\n        private MessageSource msgSrc;\r\n        \r\n        @RequestMapping(value = &quot;/wife/mood&quot;)\r\n        public String readWife(Model model,\t@RequestParam(&quot;whatImDoing&quot;) String iAm) {\r\n            Locale loc = LocaleContextHolder.getLocale();\r\n            if(iAm.equals(&quot;playingXbox&quot;)) {\r\n    \t        model.addAttribute( &quot;statusTitle&quot;, msgSrc.getMessage(&quot;mood.angry&quot;, null, loc) );\r\n    \t        model.addAttribute( &quot;statusDetail&quot;, msgSrc.getMessage(&quot;mood.angry.xboxdiatribe&quot;, null, loc) );\r\n            }\r\n            return &quot;moodResult&quot;;\r\n        }\r\n    }","title":"Elegant way to get Locale in Spring Controller","body":"<p>I'm looking for a cleaner way (in Spring 3.2) to get the current locale than explicitly calling LocaleContextHolder.getLocale() at the start of each Controller method. It has to be compatible with Java annotation, as I'm not using the XML config. Here's what I'm doing currently.</p>\n\n<pre><code>@Controller\npublic class WifeController {\n    @Autowired\n    private MessageSource msgSrc;\n\n    @RequestMapping(value = \"/wife/mood\")\n    public String readWife(Model model, @RequestParam(\"whatImDoing\") String iAm) {\n        Locale loc = LocaleContextHolder.getLocale();\n        if(iAm.equals(\"playingXbox\")) {\n            model.addAttribute( \"statusTitle\", msgSrc.getMessage(\"mood.angry\", null, loc) );\n            model.addAttribute( \"statusDetail\", msgSrc.getMessage(\"mood.angry.xboxdiatribe\", null, loc) );\n        }\n        return \"moodResult\";\n    }\n}\n</code></pre>\n"},{"tags":["java","oracle","tomcat","timezone"],"comments":[{"owner":{"account_id":98359,"reputation":184987,"user_id":266304,"display_name":"Alex Poole"},"score":0,"creation_date":1502877716,"post_id":45708785,"comment_id":78379073,"body_markdown":"Is it possible you have a database logon trigger that is setting the session time zone explicitly to +02:00? Or - perhaps more likely - something else in the config is losing or replacing that setting? What session time zone do you see if you connect to the same DB and account via SQL\\*Plus?","body":"Is it possible you have a database logon trigger that is setting the session time zone explicitly to +02:00? Or - perhaps more likely - something else in the config is losing or replacing that setting? What session time zone do you see if you connect to the same DB and account via SQL*Plus?"},{"owner":{"account_id":3631143,"reputation":55363,"user_id":3027266,"accept_rate":75,"display_name":"Wernfried Domscheit"},"score":0,"creation_date":1502878526,"post_id":45708785,"comment_id":78379579,"body_markdown":"The same as defined by environment variable (or Registry settings) `ORA_SDTZ` - as expected.","body":"The same as defined by environment variable (or Registry settings) <code>ORA_SDTZ</code> - as expected."},{"owner":{"account_id":3631143,"reputation":55363,"user_id":3027266,"accept_rate":75,"display_name":"Wernfried Domscheit"},"score":0,"creation_date":1502882115,"post_id":45708785,"comment_id":78382054,"body_markdown":"Logon trigger would be one solution, however in this case I would stay on `ALTER SESSION SET TIME_ZONE = ...;` inside my PL/SQL code. Apart from than I don&#39;t have permissions to create database triggers on this database.","body":"Logon trigger would be one solution, however in this case I would stay on <code>ALTER SESSION SET TIME_ZONE = ...;</code> inside my PL/SQL code. Apart from than I don&#39;t have permissions to create database triggers on this database."},{"owner":{"account_id":98359,"reputation":184987,"user_id":266304,"display_name":"Alex Poole"},"score":0,"creation_date":1502882423,"post_id":45708785,"comment_id":78382243,"body_markdown":"I was asking whether you already had one, rather than recommending you add one *8-) But it seems not anyway if SQL\\*Plus is OK. The `-D` flag you&#39;re using does what you expect, so for some reason it doesn&#39;t seem to be reaching the JVM. I&#39;d check that there isn&#39;t a later setting of `JAVA_OPTS` that&#39;s trashing this one, and that the final JVM call actually uses that variable.","body":"I was asking whether you already had one, rather than recommending you add one *8-) But it seems not anyway if SQL*Plus is OK. The <code>-D</code> flag you&#39;re using does what you expect, so for some reason it doesn&#39;t seem to be reaching the JVM. I&#39;d check that there isn&#39;t a later setting of <code>JAVA_OPTS</code> that&#39;s trashing this one, and that the final JVM call actually uses that variable."}],"answers":[{"tags":[],"owner":{"account_id":7701,"reputation":47163,"user_id":13447,"accept_rate":100,"display_name":"Olaf Kock"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1502877700,"creation_date":1502877700,"answer_id":45710568,"question_id":45708785,"body_markdown":"Seriously, Tomcat5? Tomcat 5.5 has been [decommissioned][1] in 2012. Well, apart from that: I&#39;d recommend to fix this in a different way: Storing Timezone-infested data in the backend is a huge mess, always. Thus, you should always purely store UTC and not worry about any daylight-saving, user&#39;s geolocation or current timezone, unless you&#39;re presenting the data to the user. Only then (and on input) can you relate it to the current timezone for the current user and transform to/from UTC accordingly.\r\n\r\nThus, the question that you ask *might* seem logical, but will lead to *a lot* of pain later. Save yourself the pain and go UTC on the backend. \r\n\r\nYou already know how to set Tomcat&#39;s default timezone, you might want to be able to handle user-specific timezones in addition, but that&#39;s a completely different beast.\r\n\r\n\r\n  [1]: https://tomcat.apache.org/tomcat-55-eol.html","title":"How to set Oracle time zone region in tomcat","body":"<p>Seriously, Tomcat5? Tomcat 5.5 has been <a href=\"https://tomcat.apache.org/tomcat-55-eol.html\" rel=\"nofollow noreferrer\">decommissioned</a> in 2012. Well, apart from that: I'd recommend to fix this in a different way: Storing Timezone-infested data in the backend is a huge mess, always. Thus, you should always purely store UTC and not worry about any daylight-saving, user's geolocation or current timezone, unless you're presenting the data to the user. Only then (and on input) can you relate it to the current timezone for the current user and transform to/from UTC accordingly.</p>\n\n<p>Thus, the question that you ask <em>might</em> seem logical, but will lead to <em>a lot</em> of pain later. Save yourself the pain and go UTC on the backend. </p>\n\n<p>You already know how to set Tomcat's default timezone, you might want to be able to handle user-specific timezones in addition, but that's a completely different beast.</p>\n"}],"owner":{"account_id":3631143,"reputation":55363,"user_id":3027266,"accept_rate":75,"display_name":"Wernfried Domscheit"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":885,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1645306937,"creation_date":1502872535,"question_id":45708785,"body_markdown":"I have a tomcat5 server which connects to an Oracle DB and I like to specify the Oracle session time zone.\r\n\r\nI managed to define it by adding `JAVA_OPTS=&quot;$JAVA_OPTS -Duser.timezone=Europe/Zurich&quot;` to config file `tomcat5.conf`. Problem is when I query in Oracle `SELECT SESSIONTIMEZONE FROM dual;` I get `+02:00`\r\n\r\nCurrently this is OK, however it will become wrong in winter season when daylight-saving-time is off - unless I restart the tomcat server.\r\n\r\nHow can I set time zone to region name (e.g. `Europe/Zurich`) instead of UTC offset (like `+02:00`)? I would like to avoid running explicit `ALTER SESSION SET TIME_ZONE = ...;` in my Oracle.\r\n","title":"How to set Oracle time zone region in tomcat","body":"<p>I have a tomcat5 server which connects to an Oracle DB and I like to specify the Oracle session time zone.</p>\n\n<p>I managed to define it by adding <code>JAVA_OPTS=\"$JAVA_OPTS -Duser.timezone=Europe/Zurich\"</code> to config file <code>tomcat5.conf</code>. Problem is when I query in Oracle <code>SELECT SESSIONTIMEZONE FROM dual;</code> I get <code>+02:00</code></p>\n\n<p>Currently this is OK, however it will become wrong in winter season when daylight-saving-time is off - unless I restart the tomcat server.</p>\n\n<p>How can I set time zone to region name (e.g. <code>Europe/Zurich</code>) instead of UTC offset (like <code>+02:00</code>)? I would like to avoid running explicit <code>ALTER SESSION SET TIME_ZONE = ...;</code> in my Oracle.</p>\n"},{"tags":["java","terminal","zip","wget","corruption"],"comments":[{"owner":{"account_id":14486057,"reputation":264,"user_id":10463949,"display_name":"rostIvan"},"score":0,"creation_date":1645306098,"post_id":71189075,"comment_id":125837488,"body_markdown":"It is a platform-dependent installer and it may fail when after 2sec without connection, you can try to use https://stackoverflow.com/questions/19461910/how-to-download-and-extract-a-zip-file-in-java","body":"It is a platform-dependent installer and it may fail when after 2sec without connection, you can try to use <a href=\"https://stackoverflow.com/questions/19461910/how-to-download-and-extract-a-zip-file-in-java\" title=\"how to download and extract a zip file in java\">stackoverflow.com/questions/19461910/&hellip;</a>"},{"owner":{"account_id":24313722,"reputation":11,"user_id":18255298,"display_name":"Java Programmer7785"},"score":0,"creation_date":1645465393,"post_id":71189075,"comment_id":125873597,"body_markdown":"@rostIvan i fixed it by just downloading the file directly with java using a lib i didn&#39;t add that as an answer cause thats not a solution to my problem just a better way of doing it if that makes sense","body":"@rostIvan i fixed it by just downloading the file directly with java using a lib i didn&#39;t add that as an answer cause thats not a solution to my problem just a better way of doing it if that makes sense"}],"owner":{"account_id":24313722,"reputation":11,"user_id":18255298,"display_name":"Java Programmer7785"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":339,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1645306779,"creation_date":1645303720,"question_id":71189075,"body_markdown":"I&#39;m trying to create an installer for the java program it&#39;s supposed to download a zip file from a URL. to do this I&#39;m using the Wget command to download the files in a specific directory. I made it so the code prints out the command it&#39;s executing so I can copy and paste it to test. When I test the command it works perfectly, but when I run the code to do it automatically it corrupts the zip file. it won&#39;t unzip, and if i transfer the file to my mac it says `Unable to expand filename.zip it is an unsupported file` I believe this is because the file is corrupted.\r\n\r\nThis is the command it runs\r\n\r\n`wget -O /home/pi/1.2.1.zip https://install.swiftpcb.tech/1.2.1.zip`\r\n`unzip /home/pi/1.2.1.zip -d /home/pi`\r\n\r\nthis is the output of running the unzip one manually\r\n\r\n    Archive:  1.2.1.zip\r\n      End-of-central-directory signature not found.  Either this file is not\r\n      a zip file, or it constitutes one disk of a multi-part archive.  In the\r\n      latter case, the central directory and zip file comment will be found on\r\n      the last disk(s) of this archive.\r\n    unzip:  cannot find zipfile directory in one of 1.2.1.zip or\r\n            1.2.1.zip.zip, and cannot find 1.2.1.zip.ZIP, period.\r\n\r\n\r\nthis is the class running the command in java (you only need to focus what in the if statement `ran == 0`\r\n\r\n    package Installer;\r\n    \r\n    import java.io.IOException;\r\n    import java.sql.*;\r\n    \r\n    public class Main {\r\n        public void start() throws IOException, InterruptedException {\r\n            // SQLite connection string\r\n            String url = new Info().getConfigDir();\r\n    \r\n            // SQL statement for creating a new table\r\n            String sql = &quot;CREATE TABLE IF NOT EXISTS appInfo (\\n&quot;\r\n                    + &quot;\t\\&quot;ID\\&quot; INTEGER,\\n&quot;\r\n                    + &quot;\t\\&quot;version\\&quot; TEXT,\\n&quot;\r\n                    + &quot;\t\\&quot;ran\\&quot; INTEGER DEFAULT 0,\\n&quot;\r\n                    + &quot; PRIMARY KEY(\\&quot;ID\\&quot; AUTOINCREMENT) \\n&quot;\r\n                    + &quot;);&quot;;\r\n    \r\n            try (Connection conn = DriverManager.getConnection(url);\r\n                 Statement stmt = conn.createStatement()) {\r\n                stmt.execute(sql);\r\n            } catch (SQLException e) {\r\n                System.out.println(e.getMessage());\r\n            }\r\n    \r\n            SQLite lite = new SQLite();\r\n    \r\n            lite.createData();\r\n            int versionChangeStatus = lite.updateVersionInDB();\r\n    \r\n            if(versionChangeStatus != 0) System.out.println(&quot;Something went wrong&quot;);\r\n    \r\n            int ran = lite.getRanValue();\r\n    \r\n            if(ran == 0){\r\n                String version = new Info().getVersion();\r\n                //for deploy\r\n                Process p = Runtime.getRuntime().exec(&quot;wget -O /home/pi/&quot; + version + &quot;.zip &quot; + &quot;https://install.swiftpcb.tech/&quot; + version + &quot;.zip&quot; + &quot; &amp;&amp; unzip /home/pi/&quot; + version + &quot;.zip -d /home/pi&quot;);\r\n                System.out.println(&quot;wget -O /home/pi/&quot; + version + &quot;.zip &quot; + &quot;https://install.swiftpcb.tech/&quot; + version + &quot;.zip&quot; + &quot; | unzip /home/pi/&quot; + version + &quot;.zip -d /home/pi&quot;);\r\n                Thread.sleep(2 * 1000);\r\n                p = Runtime.getRuntime().exec(&quot;unzip /home/pi/1.2.1.zip -d /home/pi&quot;);\r\n    //            Process p = Runtime.getRuntime().exec(&quot;wget https://install.swiftpcb.tech/&quot; + version + &quot;.zip&quot; + &quot; &amp;&amp; unzip&quot; + version + &quot;.zip -d /home/pi &quot;);\r\n    \r\n                int updateStat = lite.updateRanValue(&quot;1&quot;);\r\n                if(updateStat != 0) System.out.println(&quot;Something went wrong&quot;);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n","title":"How to fix Wget from making a corrupted file in java","body":"<p>I'm trying to create an installer for the java program it's supposed to download a zip file from a URL. to do this I'm using the Wget command to download the files in a specific directory. I made it so the code prints out the command it's executing so I can copy and paste it to test. When I test the command it works perfectly, but when I run the code to do it automatically it corrupts the zip file. it won't unzip, and if i transfer the file to my mac it says <code>Unable to expand filename.zip it is an unsupported file</code> I believe this is because the file is corrupted.</p>\n<p>This is the command it runs</p>\n<p><code>wget -O /home/pi/1.2.1.zip https://install.swiftpcb.tech/1.2.1.zip</code>\n<code>unzip /home/pi/1.2.1.zip -d /home/pi</code></p>\n<p>this is the output of running the unzip one manually</p>\n<pre><code>Archive:  1.2.1.zip\n  End-of-central-directory signature not found.  Either this file is not\n  a zip file, or it constitutes one disk of a multi-part archive.  In the\n  latter case, the central directory and zip file comment will be found on\n  the last disk(s) of this archive.\nunzip:  cannot find zipfile directory in one of 1.2.1.zip or\n        1.2.1.zip.zip, and cannot find 1.2.1.zip.ZIP, period.\n</code></pre>\n<p>this is the class running the command in java (you only need to focus what in the if statement <code>ran == 0</code></p>\n<pre><code>package Installer;\n\nimport java.io.IOException;\nimport java.sql.*;\n\npublic class Main {\n    public void start() throws IOException, InterruptedException {\n        // SQLite connection string\n        String url = new Info().getConfigDir();\n\n        // SQL statement for creating a new table\n        String sql = &quot;CREATE TABLE IF NOT EXISTS appInfo (\\n&quot;\n                + &quot; \\&quot;ID\\&quot; INTEGER,\\n&quot;\n                + &quot; \\&quot;version\\&quot; TEXT,\\n&quot;\n                + &quot; \\&quot;ran\\&quot; INTEGER DEFAULT 0,\\n&quot;\n                + &quot; PRIMARY KEY(\\&quot;ID\\&quot; AUTOINCREMENT) \\n&quot;\n                + &quot;);&quot;;\n\n        try (Connection conn = DriverManager.getConnection(url);\n             Statement stmt = conn.createStatement()) {\n            stmt.execute(sql);\n        } catch (SQLException e) {\n            System.out.println(e.getMessage());\n        }\n\n        SQLite lite = new SQLite();\n\n        lite.createData();\n        int versionChangeStatus = lite.updateVersionInDB();\n\n        if(versionChangeStatus != 0) System.out.println(&quot;Something went wrong&quot;);\n\n        int ran = lite.getRanValue();\n\n        if(ran == 0){\n            String version = new Info().getVersion();\n            //for deploy\n            Process p = Runtime.getRuntime().exec(&quot;wget -O /home/pi/&quot; + version + &quot;.zip &quot; + &quot;https://install.swiftpcb.tech/&quot; + version + &quot;.zip&quot; + &quot; &amp;&amp; unzip /home/pi/&quot; + version + &quot;.zip -d /home/pi&quot;);\n            System.out.println(&quot;wget -O /home/pi/&quot; + version + &quot;.zip &quot; + &quot;https://install.swiftpcb.tech/&quot; + version + &quot;.zip&quot; + &quot; | unzip /home/pi/&quot; + version + &quot;.zip -d /home/pi&quot;);\n            Thread.sleep(2 * 1000);\n            p = Runtime.getRuntime().exec(&quot;unzip /home/pi/1.2.1.zip -d /home/pi&quot;);\n//            Process p = Runtime.getRuntime().exec(&quot;wget https://install.swiftpcb.tech/&quot; + version + &quot;.zip&quot; + &quot; &amp;&amp; unzip&quot; + version + &quot;.zip -d /home/pi &quot;);\n\n            int updateStat = lite.updateRanValue(&quot;1&quot;);\n            if(updateStat != 0) System.out.println(&quot;Something went wrong&quot;);\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":20013244,"reputation":1040,"user_id":14669853,"display_name":"Cactusroot"},"score":1,"creation_date":1645303583,"post_id":71188435,"comment_id":125836950,"body_markdown":"You need a context to start a MediaPlayer, so you could create an instance of your encapsulating class which starts a MediaPlayer using the context from onCreate(). I dont quite know where you got your Context instance from if you started it outside of an activity. You can stop your MediaPlayer in the onStop()-Method in your activity as it might keep playing otherwise (as long as the app is not closed). You won&#39;t need a new thread - android creates one for you. You can call MediaPlayer.setLooping(true); to have it looping and call play in an OnLoadCompleteListener if loading problems occur.","body":"You need a context to start a MediaPlayer, so you could create an instance of your encapsulating class which starts a MediaPlayer using the context from onCreate(). I dont quite know where you got your Context instance from if you started it outside of an activity. You can stop your MediaPlayer in the onStop()-Method in your activity as it might keep playing otherwise (as long as the app is not closed). You won&#39;t need a new thread - android creates one for you. You can call MediaPlayer.setLooping(true); to have it looping and call play in an OnLoadCompleteListener if loading problems occur."},{"owner":{"account_id":20093709,"reputation":51,"user_id":14733647,"display_name":"Zero"},"score":0,"creation_date":1645368294,"post_id":71188435,"comment_id":125847577,"body_markdown":"I got the context from a class that extends a service class that run&#39;s a foreground service so that the app does not get killed after playing the audio for a while in the background. The classes that extend a service class act as a context by themselves you just have to call this or getApplicationContext().","body":"I got the context from a class that extends a service class that run&#39;s a foreground service so that the app does not get killed after playing the audio for a while in the background. The classes that extend a service class act as a context by themselves you just have to call this or getApplicationContext()."}],"answers":[{"tags":[],"owner":{"account_id":2185649,"reputation":121,"user_id":1934124,"accept_rate":60,"display_name":"dkero"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645306747,"creation_date":1645306117,"answer_id":71189354,"question_id":71188435,"body_markdown":"You should start media player inside activity class:\r\n\r\n    // media player uses context to create instance\r\n    MediaPlayer mediaPlayer = new MediaPlayer(this);\r\n    MediaMetadata mediaMetaData = new MediaMetadata.Builder()\r\n                    .putString(MediaMetadata.METADATA_KEY_TITLE, &quot;Your video title&quot;).build();\r\n    \r\n    UriMediaItem item = new UriMediaItem.Builder(Uri.parse(url))\r\n                    .setMetadata(mediaMetaData) // optional\r\n                    .build();\r\n    \r\n    sourceVideoPreview.setPlayer(mediaPlayer);\r\n    mediaPlayer.setMediaItem(item);\r\n    mediaPlayer.prepare();\r\n    mediaPlayer.play();\r\n\r\nNote: This code works and you can use it outside activity too, but you need to pass context outside activity to create media player instance.","title":"Where should I call MediaPlayer.start();","body":"<p>You should start media player inside activity class:</p>\n<pre><code>// media player uses context to create instance\nMediaPlayer mediaPlayer = new MediaPlayer(this);\nMediaMetadata mediaMetaData = new MediaMetadata.Builder()\n                .putString(MediaMetadata.METADATA_KEY_TITLE, &quot;Your video title&quot;).build();\n\nUriMediaItem item = new UriMediaItem.Builder(Uri.parse(url))\n                .setMetadata(mediaMetaData) // optional\n                .build();\n\nsourceVideoPreview.setPlayer(mediaPlayer);\nmediaPlayer.setMediaItem(item);\nmediaPlayer.prepare();\nmediaPlayer.play();\n</code></pre>\n<p>Note: This code works and you can use it outside activity too, but you need to pass context outside activity to create media player instance.</p>\n"}],"owner":{"account_id":20093709,"reputation":51,"user_id":14733647,"display_name":"Zero"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1645306747,"creation_date":1645298889,"question_id":71188435,"body_markdown":"I am new to android development :)\r\n\r\nI am trying to run audio in the background using MediaPlayer, I have a foreground service set up my question is where should I call the `mediaPlayer.start()` do I just call it inside the service class, or do I call it in the activity class and start the service at the same time or do I have to run a thread and call the `mediaPlayer.start()` inside it while calling the thread inside a service class or activity class?\r\n\r\nI tried calling it inside a service class and inside the activity class while calling `startService()` everything worked fine and the audio did not stop after a while.","title":"Where should I call MediaPlayer.start();","body":"<p>I am new to android development :)</p>\n<p>I am trying to run audio in the background using MediaPlayer, I have a foreground service set up my question is where should I call the <code>mediaPlayer.start()</code> do I just call it inside the service class, or do I call it in the activity class and start the service at the same time or do I have to run a thread and call the <code>mediaPlayer.start()</code> inside it while calling the thread inside a service class or activity class?</p>\n<p>I tried calling it inside a service class and inside the activity class while calling <code>startService()</code> everything worked fine and the audio did not stop after a while.</p>\n"},{"tags":["java","angular","spring","typescript","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":15221113,"reputation":10760,"user_id":10982972,"display_name":"Aakash Garg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645201949,"creation_date":1645200678,"answer_id":71176572,"question_id":71176485,"body_markdown":"Because you are expecting date in iso string at backend which is not default when javascript converts date to string. you can use toISOString() method for this.\r\n\r\n    new Date().toISOString()\r\n\r\nthe above is just an example. toISOString can be called on any date object.","title":"Problem sending the type date with Angular","body":"<p>Because you are expecting date in iso string at backend which is not default when javascript converts date to string. you can use toISOString() method for this.</p>\n<pre><code>new Date().toISOString()\n</code></pre>\n<p>the above is just an example. toISOString can be called on any date object.</p>\n"},{"tags":[],"owner":{"account_id":11983833,"reputation":26,"user_id":8768899,"display_name":"Chamath Wanigasooriya"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1645306343,"creation_date":1645216898,"answer_id":71179616,"question_id":71176485,"body_markdown":"First correct the date to local timezone.    \r\nAppend `&#39;Z&#39;` to `date` for getting the correct value with local timezone.\r\n\r\n    const localDate = date + &#39;Z&#39;;\r\n    const dateISO = new Date(localDate).toISOString().substring(0, 10);","title":"Problem sending the type date with Angular","body":"<p>First correct the date to local timezone.<br />\nAppend <code>'Z'</code> to <code>date</code> for getting the correct value with local timezone.</p>\n<pre><code>const localDate = date + 'Z';\nconst dateISO = new Date(localDate).toISOString().substring(0, 10);\n</code></pre>\n"}],"owner":{"account_id":22436368,"reputation":276,"user_id":16641566,"display_name":"Robs"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1055,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71179616,"answer_count":2,"score":1,"last_activity_date":1645306343,"creation_date":1645200288,"question_id":71176485,"body_markdown":"When I add the date to Spring from Angular, Spring save the day before instead the date that I insert.\r\nWhen I tried on postman everything works so the problem is when Angular send the data.\r\nMy code on Spring model is: \r\n\r\n  \r\n\r\n      @DateTimeFormat(iso = DateTimeFormat.ISO.DATE)\r\n            private LocalDate importDate;\r\n            @DateTimeFormat(iso = DateTimeFormat.ISO.DATE)\r\n            private LocalDate expireDate;\r\nin my controller:\r\n   \r\n\r\n    @PostMapping(&quot;/addProduct&quot;)\r\n            public ResponseEntity&lt;Response&gt; saveProduct(@RequestBody @Valid Product product) throws BadRequestException {\r\n                log.info(&quot;Product to String: &quot; + product);\r\n                return ResponseEntity.ok(Response.builder()\r\n                        .timeStamp(now())\r\n                        .data(Map.of(&quot;product&quot;, productService.addProduct(product)))\r\n                        .message(&quot;product added&quot;)\r\n                        .status(CREATED)\r\n                        .statusCode(CREATED.value())\r\n                        .build()\r\n                );\r\n            }\r\n\r\nIn my component.html:\r\n\r\n     &lt;p-calendar appendTo=&quot;body&quot; id=&quot;importDate&quot; [(ngModel)]=&quot;product.importDate&quot; placeholder={{product.importDate}} dateFormat=&quot;yy-mm-dd&quot;&gt;&lt;/p-calendar&gt;\r\n\r\n    In my components ts:\r\n    this.service.saveData(this.product).subscribe({\r\n            next: (v) =&gt; this.toastMessage(v.status,v.message),\r\n          error: (e) =&gt; this.errorMessage(e.error.message),\r\n          complete: ()=&gt; this.service.getData().subscribe(data=&gt;{this.products=data})\r\n          });\r\nI really can&#39;t figure out why, thanks a lot who gonna reply me. \r\n","title":"Problem sending the type date with Angular","body":"<p>When I add the date to Spring from Angular, Spring save the day before instead the date that I insert.\nWhen I tried on postman everything works so the problem is when Angular send the data.\nMy code on Spring model is:</p>\n<pre><code>  @DateTimeFormat(iso = DateTimeFormat.ISO.DATE)\n        private LocalDate importDate;\n        @DateTimeFormat(iso = DateTimeFormat.ISO.DATE)\n        private LocalDate expireDate;\n</code></pre>\n<p>in my controller:</p>\n<pre><code>@PostMapping(&quot;/addProduct&quot;)\n        public ResponseEntity&lt;Response&gt; saveProduct(@RequestBody @Valid Product product) throws BadRequestException {\n            log.info(&quot;Product to String: &quot; + product);\n            return ResponseEntity.ok(Response.builder()\n                    .timeStamp(now())\n                    .data(Map.of(&quot;product&quot;, productService.addProduct(product)))\n                    .message(&quot;product added&quot;)\n                    .status(CREATED)\n                    .statusCode(CREATED.value())\n                    .build()\n            );\n        }\n</code></pre>\n<p>In my component.html:</p>\n<pre><code> &lt;p-calendar appendTo=&quot;body&quot; id=&quot;importDate&quot; [(ngModel)]=&quot;product.importDate&quot; placeholder={{product.importDate}} dateFormat=&quot;yy-mm-dd&quot;&gt;&lt;/p-calendar&gt;\n\nIn my components ts:\nthis.service.saveData(this.product).subscribe({\n        next: (v) =&gt; this.toastMessage(v.status,v.message),\n      error: (e) =&gt; this.errorMessage(e.error.message),\n      complete: ()=&gt; this.service.getData().subscribe(data=&gt;{this.products=data})\n      });\n</code></pre>\n<p>I really can't figure out why, thanks a lot who gonna reply me.</p>\n"},{"tags":["java","discord","webhooks","minecraft-forge"],"answers":[{"tags":[],"owner":{"account_id":8403225,"reputation":311,"user_id":6307611,"display_name":"doej1367"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1645305838,"creation_date":1645305838,"answer_id":71189317,"question_id":71188884,"body_markdown":"Got it! The question &quot;how can Discord even distinguish between the two&quot; gave me the idea to set the `user-agent` to a fixed value - and solved the problem.\r\n\r\n```java\r\n//[...]\r\nurlConnection.setDoInput(true);\r\n        \r\n// this line solved the problem\r\nurlConnection.setRequestProperty(&quot;user-agent&quot;, &quot;Mozilla/5.0 &quot;);\r\n\r\nurlConnection.setRequestProperty(&quot;content-type&quot;, &quot;multipart/form-data; boundary=&quot; + boundary);\r\n//[...]\r\n```","title":"Discord webhook returnes error when called from Forge mod","body":"<p>Got it! The question &quot;how can Discord even distinguish between the two&quot; gave me the idea to set the <code>user-agent</code> to a fixed value - and solved the problem.</p>\n<pre class=\"lang-java prettyprint-override\"><code>//[...]\nurlConnection.setDoInput(true);\n        \n// this line solved the problem\nurlConnection.setRequestProperty(&quot;user-agent&quot;, &quot;Mozilla/5.0 &quot;);\n\nurlConnection.setRequestProperty(&quot;content-type&quot;, &quot;multipart/form-data; boundary=&quot; + boundary);\n//[...]\n</code></pre>\n"}],"owner":{"account_id":8403225,"reputation":311,"user_id":6307611,"display_name":"doej1367"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":599,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71189317,"answer_count":1,"score":0,"last_activity_date":1645305838,"creation_date":1645302153,"question_id":71188884,"body_markdown":"What I want is to send a file over a discord webhook using java code.\r\n\r\nI created a perfectly working code using the knowledge I gained from this [stackoverflow post about curl requests in java](https://stackoverflow.com/a/34409142/6307611) and this [Discord webhooks guide about sending attachments](https://birdie0.github.io/discord-webhooks-guide/tools/curl.html).\r\n\r\nThe problem is, if I call the exact same code, that works perfectly from a standard java programm, from a forge 1.8.9 mod instead, it results in the following error:\r\n```\r\n403: Forbidden\r\nerror code: 1010\r\n```\r\n\r\nDoes anyone know how to solve this?\r\nAnd how can Discord even distinguish between the two?\r\n\r\n---\r\n\r\nThe following is code contains the central method. `LINE_FEED`, `addFormField` and `addFilePart` are directly from the mentioned stackoverflow post and `CHARSET = &quot;UTF-8&quot;`. `channel_id` and `token` are the custom values from the Discord webhook.\r\n```java\r\npublic boolean sendFile(String username, String message, File file) {\r\n\t// mostly from https://stackoverflow.com/a/34409142/6307611\r\n\ttry {\r\n\t\tboundary = &quot;===&quot; + System.currentTimeMillis() + &quot;===&quot;;\r\n\t\tURL url = new URL(&quot;https://discord.com/api/webhooks/&quot; + channel_id + &quot;/&quot; + token);\r\n\t\tHttpsURLConnection urlConnection = (HttpsURLConnection) url.openConnection();\r\n\t\turlConnection.setConnectTimeout(5000);\r\n\t\turlConnection.setUseCaches(false);\r\n\t\turlConnection.setDoOutput(true);\r\n\t\turlConnection.setDoInput(true);\r\n\t\turlConnection.setRequestProperty(&quot;content-type&quot;, &quot;multipart/form-data; boundary=&quot; + boundary);\r\n\r\n\t\tOutputStream os = urlConnection.getOutputStream();\r\n\t\tPrintWriter w = new PrintWriter(new OutputStreamWriter(os, CHARSET), true);\r\n\t\tif (message != null)\r\n\t\t\taddFormField(w, &quot;payload_json&quot;,\r\n\t\t\t\t\t&quot;{\\&quot;username\\&quot;: \\&quot;&quot; + username + &quot;\\&quot;, \\&quot;content\\&quot;: \\&quot;&quot; + message + &quot;\\&quot;}&quot;);\r\n\t\telse\r\n\t\t\taddFormField(w, &quot;payload_json&quot;, &quot;{\\&quot;username\\&quot;: \\&quot;&quot; + username + &quot;\\&quot;}&quot;);\r\n\t\taddFilePart(os, w, &quot;file&quot;, file);\r\n\t\tw.append(LINE_FEED).flush();\r\n\t\tw.append(&quot;--&quot; + boundary + &quot;--&quot;).append(LINE_FEED);\r\n\t\tw.close();\r\n\t\tos.close();\r\n\t\tint code = urlConnection.getResponseCode();\r\n\r\n\t\t// error handling\r\n\t\tSystem.out.println(code + &quot;: &quot; + urlConnection.getResponseMessage());\r\n\t\tBufferedReader br = new BufferedReader(new InputStreamReader(\r\n\t\t\t\t(code &gt;= 100 &amp;&amp; code &lt; 400) ? urlConnection.getInputStream() : urlConnection.getErrorStream()));\r\n\t\tStringBuilder sb = new StringBuilder();\r\n\t\tString buffer;\r\n\t\twhile ((buffer = br.readLine()) != null)\r\n\t\t\tsb.append(buffer);\r\n\t\tSystem.out.println(sb.toString());\r\n\r\n\t\turlConnection.disconnect();\r\n\t\treturn code &gt;= 200 &amp;&amp; code &lt; 300;\r\n\t} catch (MalformedURLException ignored) {\r\n\t\treturn false;\r\n\t} catch (IOException ignored) {\r\n\t\treturn false;\r\n\t}\r\n}\r\n```","title":"Discord webhook returnes error when called from Forge mod","body":"<p>What I want is to send a file over a discord webhook using java code.</p>\n<p>I created a perfectly working code using the knowledge I gained from this <a href=\"https://stackoverflow.com/a/34409142/6307611\">stackoverflow post about curl requests in java</a> and this <a href=\"https://birdie0.github.io/discord-webhooks-guide/tools/curl.html\" rel=\"nofollow noreferrer\">Discord webhooks guide about sending attachments</a>.</p>\n<p>The problem is, if I call the exact same code, that works perfectly from a standard java programm, from a forge 1.8.9 mod instead, it results in the following error:</p>\n<pre><code>403: Forbidden\nerror code: 1010\n</code></pre>\n<p>Does anyone know how to solve this?\nAnd how can Discord even distinguish between the two?</p>\n<hr />\n<p>The following is code contains the central method. <code>LINE_FEED</code>, <code>addFormField</code> and <code>addFilePart</code> are directly from the mentioned stackoverflow post and <code>CHARSET = &quot;UTF-8&quot;</code>. <code>channel_id</code> and <code>token</code> are the custom values from the Discord webhook.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public boolean sendFile(String username, String message, File file) {\n    // mostly from https://stackoverflow.com/a/34409142/6307611\n    try {\n        boundary = &quot;===&quot; + System.currentTimeMillis() + &quot;===&quot;;\n        URL url = new URL(&quot;https://discord.com/api/webhooks/&quot; + channel_id + &quot;/&quot; + token);\n        HttpsURLConnection urlConnection = (HttpsURLConnection) url.openConnection();\n        urlConnection.setConnectTimeout(5000);\n        urlConnection.setUseCaches(false);\n        urlConnection.setDoOutput(true);\n        urlConnection.setDoInput(true);\n        urlConnection.setRequestProperty(&quot;content-type&quot;, &quot;multipart/form-data; boundary=&quot; + boundary);\n\n        OutputStream os = urlConnection.getOutputStream();\n        PrintWriter w = new PrintWriter(new OutputStreamWriter(os, CHARSET), true);\n        if (message != null)\n            addFormField(w, &quot;payload_json&quot;,\n                    &quot;{\\&quot;username\\&quot;: \\&quot;&quot; + username + &quot;\\&quot;, \\&quot;content\\&quot;: \\&quot;&quot; + message + &quot;\\&quot;}&quot;);\n        else\n            addFormField(w, &quot;payload_json&quot;, &quot;{\\&quot;username\\&quot;: \\&quot;&quot; + username + &quot;\\&quot;}&quot;);\n        addFilePart(os, w, &quot;file&quot;, file);\n        w.append(LINE_FEED).flush();\n        w.append(&quot;--&quot; + boundary + &quot;--&quot;).append(LINE_FEED);\n        w.close();\n        os.close();\n        int code = urlConnection.getResponseCode();\n\n        // error handling\n        System.out.println(code + &quot;: &quot; + urlConnection.getResponseMessage());\n        BufferedReader br = new BufferedReader(new InputStreamReader(\n                (code &gt;= 100 &amp;&amp; code &lt; 400) ? urlConnection.getInputStream() : urlConnection.getErrorStream()));\n        StringBuilder sb = new StringBuilder();\n        String buffer;\n        while ((buffer = br.readLine()) != null)\n            sb.append(buffer);\n        System.out.println(sb.toString());\n\n        urlConnection.disconnect();\n        return code &gt;= 200 &amp;&amp; code &lt; 300;\n    } catch (MalformedURLException ignored) {\n        return false;\n    } catch (IOException ignored) {\n        return false;\n    }\n}\n</code></pre>\n"},{"tags":["java","methods","parameters"],"comments":[{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1645304825,"post_id":71189146,"comment_id":125837191,"body_markdown":"You are mixing up some things here. Using `MessagePrompts.invalidInput()` as a parameter first evaluates that method call, the passes the return value of that method as a parameter. So you are not passing a `Method` reference but a value. In this case, the method &quot;returns&quot; `void`, so there is no value and this does not even compile.","body":"You are mixing up some things here. Using <code>MessagePrompts.invalidInput()</code> as a parameter first evaluates that method call, the passes the return value of that method as a parameter. So you are not passing a <code>Method</code> reference but a value. In this case, the method &quot;returns&quot; <code>void</code>, so there is no value and this does not even compile."},{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":1,"creation_date":1645305052,"post_id":71189146,"comment_id":125837244,"body_markdown":"Passing a `Method` uses the java reflection api, which is clunky and too complex for what you want to achieve. Starting with java8, you can make use of function references, so use `MessagePrompts::invalidInput()` and change the parameter type to a functional interface such as `Runnable`.","body":"Passing a <code>Method</code> uses the java reflection api, which is clunky and too complex for what you want to achieve. Starting with java8, you can make use of function references, so use <code>MessagePrompts::invalidInput()</code> and change the parameter type to a functional interface such as <code>Runnable</code>."},{"owner":{"account_id":12148215,"reputation":3,"user_id":18230004,"display_name":"Chris Nippert"},"score":0,"creation_date":1645306649,"post_id":71189146,"comment_id":125837614,"body_markdown":"How would I be able to use parameters in the functional interface that get passed in to `repeatedGetInput()`?","body":"How would I be able to use parameters in the functional interface that get passed in to <code>repeatedGetInput()</code>?"}],"owner":{"account_id":12148215,"reputation":3,"user_id":18230004,"display_name":"Chris Nippert"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1645304385,"creation_date":1645304385,"question_id":71189146,"body_markdown":"So in trying to create some built in error detection, I thought I might want to specify a method to be called when an error occurs. However, I am having trouble getting this to work how I want it to. What am I doing wrong / how do I pass in a method to use it in another method?\r\n```java\r\n/**\r\n     * Gets the input of a user\r\n     *\r\n     * @param prompt input prompt\r\n     * @param type   datatype object you want as an output\r\n     * @param errorMethod Method that executes if there is an invalid input\r\n     * @param params parameters for the errorMethod\r\n     * @return input value\r\n     */\r\n    public static &lt;T&gt; T repeatedGetInput(String prompt, Class&lt;T&gt; type, Method errorMethod, Object... params){\r\n        Scanner scn = new Scanner(System.in);\r\n        while (true) {\r\n            System.out.print(prompt);\r\n            String input = scn.nextLine();\r\n            if (type.equals(String.class))\r\n                return type.cast(input);//String doesn&#39;t have a .valueOf(String str) so I made an edge case\r\n            try {\r\n                Method valueOf = type.getMethod(&quot;valueOf&quot;, String.class);\r\n                return type.cast(valueOf.invoke(null, input));\r\n            } catch (Exception e) {\r\n                try{\r\n                    errorMethod.invoke(null, params);\r\n                    ConsoleFunctions.cls();\r\n                } catch (Exception x) {\r\n                    x.printStackTrace();\r\n                }\r\n            }\r\n        }\r\n    }\r\n```\r\nInvocation:\r\n```java\r\nint value = ConsoleFunctions.repeatedGetInput(&quot;Enter a number: &quot;, Integer.class, MessagePrompts.invalidInput() );\r\n```\r\nI end up getting an error saying this.\r\n```\r\n              Required type      Provided\r\ntype:         Class&lt;T&gt;           Class&lt;Integer&gt;\r\nerrorMethod  :Method             void\r\n\r\nreason: void is not compatible with Method\r\n```\r\nThe method declaration I am passing in looks like this, and I see that it is return type void.\r\n```java\r\npublic static void invalidInput( ) {\r\n```","title":"Using methods passed in to other methods","body":"<p>So in trying to create some built in error detection, I thought I might want to specify a method to be called when an error occurs. However, I am having trouble getting this to work how I want it to. What am I doing wrong / how do I pass in a method to use it in another method?</p>\n<pre class=\"lang-java prettyprint-override\"><code>/**\n     * Gets the input of a user\n     *\n     * @param prompt input prompt\n     * @param type   datatype object you want as an output\n     * @param errorMethod Method that executes if there is an invalid input\n     * @param params parameters for the errorMethod\n     * @return input value\n     */\n    public static &lt;T&gt; T repeatedGetInput(String prompt, Class&lt;T&gt; type, Method errorMethod, Object... params){\n        Scanner scn = new Scanner(System.in);\n        while (true) {\n            System.out.print(prompt);\n            String input = scn.nextLine();\n            if (type.equals(String.class))\n                return type.cast(input);//String doesn't have a .valueOf(String str) so I made an edge case\n            try {\n                Method valueOf = type.getMethod(&quot;valueOf&quot;, String.class);\n                return type.cast(valueOf.invoke(null, input));\n            } catch (Exception e) {\n                try{\n                    errorMethod.invoke(null, params);\n                    ConsoleFunctions.cls();\n                } catch (Exception x) {\n                    x.printStackTrace();\n                }\n            }\n        }\n    }\n</code></pre>\n<p>Invocation:</p>\n<pre class=\"lang-java prettyprint-override\"><code>int value = ConsoleFunctions.repeatedGetInput(&quot;Enter a number: &quot;, Integer.class, MessagePrompts.invalidInput() );\n</code></pre>\n<p>I end up getting an error saying this.</p>\n<pre><code>              Required type      Provided\ntype:         Class&lt;T&gt;           Class&lt;Integer&gt;\nerrorMethod  :Method             void\n\nreason: void is not compatible with Method\n</code></pre>\n<p>The method declaration I am passing in looks like this, and I see that it is return type void.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void invalidInput( ) {\n</code></pre>\n"},{"tags":["java","string","list"],"comments":[{"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":1,"creation_date":1645282146,"post_id":71185990,"comment_id":125831909,"body_markdown":"How long does the query itself take to return all rows? Are you sure its the loop thats causing the slowness? It could be the collection type. What is the output of this: `System.out.println(result.getRows().getClass());`?","body":"How long does the query itself take to return all rows? Are you sure its the loop thats causing the slowness? It could be the collection type. What is the output of this: <code>System.out.println(result.getRows().getClass());</code>?"},{"owner":{"account_id":1072531,"reputation":131,"user_id":1071463,"accept_rate":17,"display_name":"hobbes_child"},"score":0,"creation_date":1645282306,"post_id":71185990,"comment_id":125831950,"body_markdown":"@Bohemian yes, the query only takes a second.  The for loop takes about 30 seconds.  I will check the class...","body":"@Bohemian yes, the query only takes a second.  The for loop takes about 30 seconds.  I will check the class..."},{"owner":{"account_id":1072531,"reputation":131,"user_id":1071463,"accept_rate":17,"display_name":"hobbes_child"},"score":0,"creation_date":1645282393,"post_id":71185990,"comment_id":125831970,"body_markdown":"@Bohemian result.getRows().getClass() is a java.util.SortedMap[]","body":"@Bohemian result.getRows().getClass() is a java.util.SortedMap[]"},{"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1645282527,"post_id":71185990,"comment_id":125832003,"body_markdown":"But does the query return *all rows* within a second, or does it return the *first* rows within a second?","body":"But does the query return <i>all rows</i> within a second, or does it return the <i>first</i> rows within a second?"},{"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":1,"creation_date":1645282670,"post_id":71185990,"comment_id":125832048,"body_markdown":"The type of the row set seems OK - array access is O(1) and each SortedMap has only 1 entry so thats  O(1), so the overall access is O(1).","body":"The type of the row set seems OK - array access is O(1) and each SortedMap has only 1 entry so thats  O(1), so the overall access is O(1)."},{"owner":{"account_id":1072531,"reputation":131,"user_id":1071463,"accept_rate":17,"display_name":"hobbes_child"},"score":0,"creation_date":1645282790,"post_id":71185990,"comment_id":125832081,"body_markdown":"@Bohemian if I have it in debug then it takes 1s to get from the query line to the for line.  Are you saying that the Result is still being built in the background?  On the for line after 1s, the result.getRowCount() is 50k.","body":"@Bohemian if I have it in debug then it takes 1s to get from the query line to the for line.  Are you saying that the Result is still being built in the background?  On the for line after 1s, the result.getRowCount() is 50k."},{"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1645282875,"post_id":71185990,"comment_id":125832106,"body_markdown":"OK. You have convinced me that the whole query takes only 1 second.","body":"OK. You have convinced me that the whole query takes only 1 second."},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1645286747,"post_id":71185990,"comment_id":125832987,"body_markdown":"What are those `SqlQueryResult` and `Result` classes? What does `result.getRows()` do?","body":"What are those <code>SqlQueryResult</code> and <code>Result</code> classes? What does <code>result.getRows()</code> do?"},{"owner":{"account_id":1072531,"reputation":131,"user_id":1071463,"accept_rate":17,"display_name":"hobbes_child"},"score":0,"creation_date":1645287022,"post_id":71185990,"comment_id":125833045,"body_markdown":"@ThomasKl&#228;ger Result is a javax.servlet.jsp.jstl.sql.Result.  result.getRows() is a java.util.SortedMap[]","body":"@ThomasKl&#228;ger Result is a javax.servlet.jsp.jstl.sql.Result.  result.getRows() is a java.util.SortedMap[]"}],"answers":[{"tags":[],"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1645304112,"creation_date":1645304112,"answer_id":71189115,"question_id":71185990,"body_markdown":"Depending on the implementation of `javax.servlet.jsp.jstl.sql.Result#getRows()` (for example the Tomcat taglibs at https://github.com/apache/tomcat-taglibs-standard/blob/main/impl/src/main/java/org/apache/taglibs/standard/tag/common/sql/ResultImpl.java#L134) it can be that `getRows()` does unnecessary work each time you call it.\r\n\r\nYou could rewrite your extraction loop as\r\n\r\n    for (SortedMap m: result.getRows()) {\r\n        m_InternalIds.add((String) m.get(internalIdString));\r\n    }\r\n\r\nwhich calls `getRows()` only once.","title":"Casting a long javax.servlet.jsp.jstl.sql.Result to list of Strings is very slow","body":"<p>Depending on the implementation of <code>javax.servlet.jsp.jstl.sql.Result#getRows()</code> (for example the Tomcat taglibs at <a href=\"https://github.com/apache/tomcat-taglibs-standard/blob/main/impl/src/main/java/org/apache/taglibs/standard/tag/common/sql/ResultImpl.java#L134\" rel=\"nofollow noreferrer\">https://github.com/apache/tomcat-taglibs-standard/blob/main/impl/src/main/java/org/apache/taglibs/standard/tag/common/sql/ResultImpl.java#L134</a>) it can be that <code>getRows()</code> does unnecessary work each time you call it.</p>\n<p>You could rewrite your extraction loop as</p>\n<pre><code>for (SortedMap m: result.getRows()) {\n    m_InternalIds.add((String) m.get(internalIdString));\n}\n</code></pre>\n<p>which calls <code>getRows()</code> only once.</p>\n"}],"owner":{"account_id":1072531,"reputation":131,"user_id":1071463,"accept_rate":17,"display_name":"hobbes_child"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71189115,"answer_count":1,"score":0,"last_activity_date":1645304112,"creation_date":1645281603,"question_id":71185990,"body_markdown":"The for loop at the end of this is very slow when there are 50k rows.  Is there a quicker way to get a list of Strings from the rows of a **javax.servlet.jsp.jstl.sql.Result**?  Use a different collection?  Convert the Strings differently?\r\n\r\nThe query is absolutely fine.  I am not including here the custom objects that are used to run it.  I can&#39;t change them.  I think you only need to know that it returns a Result.\r\n\r\n(I didn&#39;t write any of this code.)\r\n\r\n    \tprivate int m_ObjectGroupId;\r\n\t    private int m_FetchSize;\r\n    \tprivate ArrayList&lt;String&gt; m_InternalIds;\r\n\r\n...method following member initialisation...\r\n\r\n\t\tString internalIdString = &quot;INTERNALID&quot;;\r\n\t\tString selectSql = &quot;SELECT &quot; + internalIdString + &quot; FROM MODELOBJECT WHERE OBJECTGROUPID = ?&quot;;\r\n\r\n\t\tArrayList&lt;Object&gt; valuesToSet = new ArrayList&lt;Object&gt;();\r\n\t\tvaluesToSet.add(m_ObjectGroupId);\r\n\r\n\t\tBaseForPreparedStatement selectStatement = new BaseForPreparedStatement(selectSql.toString(), valuesToSet);\r\n\r\n\t\tSqlQueryResult queryResult = DBUtils.executeQueryRS(p_Context, selectStatement, getConnection(), m_FetchSize);\r\n\t\tResult result = queryResult.getResult();\r\n\t\tm_InternalIds = new ArrayList&lt;&gt;(result.getRowCount());\r\n\r\n\t\tfor (int i = 0; i &lt; result.getRowCount(); i++) {\r\n\t\t\tm_InternalIds.add((String)result.getRows()[i].get(internalIdString));\r\n\t\t}\r\n\r\nUPDATE:\r\nThe query only takes 1s whereas the loop takes 30s.\r\nresult.getRows().getClass() is a java.util.SortedMap[].","title":"Casting a long javax.servlet.jsp.jstl.sql.Result to list of Strings is very slow","body":"<p>The for loop at the end of this is very slow when there are 50k rows.  Is there a quicker way to get a list of Strings from the rows of a <strong>javax.servlet.jsp.jstl.sql.Result</strong>?  Use a different collection?  Convert the Strings differently?</p>\n<p>The query is absolutely fine.  I am not including here the custom objects that are used to run it.  I can't change them.  I think you only need to know that it returns a Result.</p>\n<p>(I didn't write any of this code.)</p>\n<pre><code>    private int m_ObjectGroupId;\n    private int m_FetchSize;\n    private ArrayList&lt;String&gt; m_InternalIds;\n</code></pre>\n<p>...method following member initialisation...</p>\n<pre><code>    String internalIdString = &quot;INTERNALID&quot;;\n    String selectSql = &quot;SELECT &quot; + internalIdString + &quot; FROM MODELOBJECT WHERE OBJECTGROUPID = ?&quot;;\n\n    ArrayList&lt;Object&gt; valuesToSet = new ArrayList&lt;Object&gt;();\n    valuesToSet.add(m_ObjectGroupId);\n\n    BaseForPreparedStatement selectStatement = new BaseForPreparedStatement(selectSql.toString(), valuesToSet);\n\n    SqlQueryResult queryResult = DBUtils.executeQueryRS(p_Context, selectStatement, getConnection(), m_FetchSize);\n    Result result = queryResult.getResult();\n    m_InternalIds = new ArrayList&lt;&gt;(result.getRowCount());\n\n    for (int i = 0; i &lt; result.getRowCount(); i++) {\n        m_InternalIds.add((String)result.getRows()[i].get(internalIdString));\n    }\n</code></pre>\n<p>UPDATE:\nThe query only takes 1s whereas the loop takes 30s.\nresult.getRows().getClass() is a java.util.SortedMap[].</p>\n"},{"tags":["java","selenium","selenium-webdriver","xpath","webdriverwait"],"answers":[{"tags":[],"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1636283272,"creation_date":1636271591,"answer_id":69870645,"question_id":69870531,"body_markdown":"To `click()` on the element with text as _`Log In / SignUp`_ you can use either of the following [Locator Strategies](https://stackoverflow.com/questions/48369043/official-locator-strategies-for-the-webdriver/48376890#48376890):\r\n\r\n- `xpath`:\r\n\r\n\t  driver.findElement(By.xpath(&quot;//div[starts-with(@id, &#39;defaultAvatar&#39;)]//following::span[text()=&#39;Log In / SignUp&#39;]&quot;)).click();\r\n\r\nHowever, as the element is a dynamic element, so to `click()` on the element you need to induce [WebDriverWait](https://stackoverflow.com/questions/48989049/selenium-how-selenium-identifies-elements-visible-or-not-is-is-possible-that-i/48990165#48990165) for the `elementToBeClickable()` and you can use either of the following [Locator Strategies](https://stackoverflow.com/questions/48369043/official-locator-strategies-for-the-webdriver/48376890#48376890):\r\n\r\n- `xpath`:\r\n\r\n\t  new WebDriverWait(driver, 20).until(ExpectedConditions.elementToBeClickable(By.xpath(&quot;//div[starts-with(@id, &#39;defaultAvatar&#39;)]//following::span[text()=&#39;Log In / SignUp&#39;]&quot;))).click();","title":"Not able to click on Login button using selenium webdriver and Java","body":"<p>To <code>click()</code> on the element with text as <em><code>Log In / SignUp</code></em> you can use either of the following <a href=\"https://stackoverflow.com/questions/48369043/official-locator-strategies-for-the-webdriver/48376890#48376890\">Locator Strategies</a>:</p>\n<ul>\n<li><p><code>xpath</code>:</p>\n<pre><code>driver.findElement(By.xpath(&quot;//div[starts-with(@id, 'defaultAvatar')]//following::span[text()='Log In / SignUp']&quot;)).click();\n</code></pre>\n</li>\n</ul>\n<p>However, as the element is a dynamic element, so to <code>click()</code> on the element you need to induce <a href=\"https://stackoverflow.com/questions/48989049/selenium-how-selenium-identifies-elements-visible-or-not-is-is-possible-that-i/48990165#48990165\">WebDriverWait</a> for the <code>elementToBeClickable()</code> and you can use either of the following <a href=\"https://stackoverflow.com/questions/48369043/official-locator-strategies-for-the-webdriver/48376890#48376890\">Locator Strategies</a>:</p>\n<ul>\n<li><p><code>xpath</code>:</p>\n<pre><code>new WebDriverWait(driver, 20).until(ExpectedConditions.elementToBeClickable(By.xpath(&quot;//div[starts-with(@id, 'defaultAvatar')]//following::span[text()='Log In / SignUp']&quot;))).click();\n</code></pre>\n</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":14199152,"reputation":796,"user_id":10257512,"display_name":"Jayanth Bala"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1636353806,"creation_date":1636353806,"answer_id":69879499,"question_id":69870531,"body_markdown":"Actually your code is clicking the login button before the page is loaded properly. please add visibility condition.\r\n\r\n\r\n    wait.until(ExpectedConditions.visibilityOfElementLocated(by));","title":"Not able to click on Login button using selenium webdriver and Java","body":"<p>Actually your code is clicking the login button before the page is loaded properly. please add visibility condition.</p>\n<pre><code>wait.until(ExpectedConditions.visibilityOfElementLocated(by));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24242134,"reputation":11,"user_id":18194355,"display_name":"Sudeep Bidwai"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1645303612,"creation_date":1645303612,"answer_id":71189066,"question_id":69870531,"body_markdown":"Hi I got the point whats happening here : \r\n\r\n 1. Manually navigate to URL: [https://www.nextgenerationautomation.com][1]  (Selenium also loading this URL)\r\n 2. Manually Immediately keep clicking on &quot;LogIn/SignUp button&quot; (Selenium also able to click therefore NO error in console )\r\n 3. &quot;LogIn/SignUp&quot; page not opening unless [enter image description here][2] (LinkedIn following count widget ) gets appear on screen\r\n 4. Once [enter image description here][3] gets appear manually click on &quot;LogIn/SignUp button&quot;, now Login page is opening (Selenium able to click after Thread.Sleep)\r\n\r\nSummery: \r\n 1. This is a codding defect on that page.\r\n 2. &quot;LogIn/SignUp&quot; is not clickable until  [enter image description here][4]  gets added on page\r\n 3. Your selenium code is perfectly fine :)\r\n 4. Xpath I have used is `//span[text()=&#39;Log In / SignUp&#39;]`\r\n\r\n Thanks KS\r\n \r\n  [1]: https://Navigate%20to%20URL:%20https://www.nextgenerationautomation.com\r\n  [2]: https://i.stack.imgur.com/bg66y.png\r\n  [3]: https://i.stack.imgur.com/1MslB.png\r\n  [4]: https://i.stack.imgur.com/q7GNJ.png","title":"Not able to click on Login button using selenium webdriver and Java","body":"<p>Hi I got the point whats happening here :</p>\n<ol>\n<li>Manually navigate to URL: <a href=\"https://Navigate%20to%20URL:%20https://www.nextgenerationautomation.com\" rel=\"nofollow noreferrer\">https://www.nextgenerationautomation.com</a>  (Selenium also loading this URL)</li>\n<li>Manually Immediately keep clicking on &quot;LogIn/SignUp button&quot; (Selenium also able to click therefore NO error in console )</li>\n<li>&quot;LogIn/SignUp&quot; page not opening unless <a href=\"https://i.stack.imgur.com/bg66y.png\" rel=\"nofollow noreferrer\">enter image description here</a> (LinkedIn following count widget ) gets appear on screen</li>\n<li>Once <a href=\"https://i.stack.imgur.com/1MslB.png\" rel=\"nofollow noreferrer\">enter image description here</a> gets appear manually click on &quot;LogIn/SignUp button&quot;, now Login page is opening (Selenium able to click after Thread.Sleep)</li>\n</ol>\n<p>Summery:</p>\n<ol>\n<li>This is a codding defect on that page.</li>\n<li>&quot;LogIn/SignUp&quot; is not clickable until  <a href=\"https://i.stack.imgur.com/q7GNJ.png\" rel=\"nofollow noreferrer\">enter image description here</a>  gets added on page</li>\n<li>Your selenium code is perfectly fine :)</li>\n<li>Xpath I have used is <code>//span[text()='Log In / SignUp']</code></li>\n</ol>\n<p>Thanks KS</p>\n"}],"owner":{"account_id":19354472,"reputation":35,"user_id":14151072,"display_name":"Jyoti"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1478,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1645303612,"creation_date":1636270268,"question_id":69870531,"body_markdown":"Hi I am trying to automate https://www.nextgenerationautomation.com and unable to click on login / SignUp button using Selenium 4    \r\n\r\nSteps:\r\n1)  Navigate to URL: https://www.nextgenerationautomation.com\r\n2) Click on LogIn/SignUp button.\r\n\r\nIssue: when I am using `Thread.Sleep`, code is working fine but when I am using explicit wait &amp; implicit wait it&#39;s not working.  \r\nI have added Implicit in my base class at the time of driver initialization.\r\n\r\nHere is the code that I have tried.\r\n\r\n```\r\npublic class nextGenAutomationLoginPage extends Base {\r\n\r\n\t@FindBy(xpath = &quot;(//button[@class=&#39;_1YW_5&#39;])[1]&quot;)\r\n\tWebElement login;\r\n\r\n\tpublic nextGenAutomationLoginPage() {\r\n\t\tsuper();\r\n\t\tPageFactory.initElements(driver, this);\r\n\t\t// TODO Auto-generated constructor stub\r\n\t}\r\n\r\n\tpublic void clickOnLogin() throws InterruptedException {\r\n\t\tWebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(10));\r\n\t\tSystem.out.println(driver.getTitle());\r\n\t\t// Thread.sleep(2000);\r\n\t\twait.until(ExpectedConditions.elementToBeClickable(login));\r\n\t\t//wait.until(ExpectedConditions.presenceOfNestedElementLocatedBy(login, By.xpath(&quot;//div[@class=&#39;_10b1I&#39;]&quot;) ));\r\n\t\tJavascriptExecutor js = (JavascriptExecutor) driver;\r\n\t\tjs.executeScript(&quot;window.scrollBy(0,document.body.scrollHeight)&quot;);\r\n\t\tjs.executeScript(&quot;arguments[0].scrollIntoView();&quot;, login);\r\n\t\tlogin.click();\r\n\t\t//driver.findElement(By.xpath(&quot;(//button[@class=&#39;_1YW_5&#39;])[1]&quot;)).click();\r\n\t\twait.until(ExpectedConditions.presenceOfAllElementsLocatedBy(By.xpath(&quot;//div[@id=&#39;comp-kaoxkn4a1&#39;]&quot;)));\r\n\t\tString sign = driver.findElement(By.xpath(&quot;//div[@id=&#39;comp-kaoxkn4a1&#39;]/h1/span&quot;)).getText();\r\n\t\tSystem.out.println(sign);\r\n\t}\r\n```\r\n\r\nNote: I tried to add Scroll as well to add some wait before clicking.  \r\n\r\nDOM:\r\n[![enter image description here][1]][1]\r\nPlease let me know if i am missing anything here.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/m3BTy.png","title":"Not able to click on Login button using selenium webdriver and Java","body":"<p>Hi I am trying to automate <a href=\"https://www.nextgenerationautomation.com\" rel=\"nofollow noreferrer\">https://www.nextgenerationautomation.com</a> and unable to click on login / SignUp button using Selenium 4</p>\n<p>Steps:</p>\n<ol>\n<li>Navigate to URL: <a href=\"https://www.nextgenerationautomation.com\" rel=\"nofollow noreferrer\">https://www.nextgenerationautomation.com</a></li>\n<li>Click on LogIn/SignUp button.</li>\n</ol>\n<p>Issue: when I am using <code>Thread.Sleep</code>, code is working fine but when I am using explicit wait &amp; implicit wait it's not working.<br />\nI have added Implicit in my base class at the time of driver initialization.</p>\n<p>Here is the code that I have tried.</p>\n<pre><code>public class nextGenAutomationLoginPage extends Base {\n\n    @FindBy(xpath = &quot;(//button[@class='_1YW_5'])[1]&quot;)\n    WebElement login;\n\n    public nextGenAutomationLoginPage() {\n        super();\n        PageFactory.initElements(driver, this);\n        // TODO Auto-generated constructor stub\n    }\n\n    public void clickOnLogin() throws InterruptedException {\n        WebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(10));\n        System.out.println(driver.getTitle());\n        // Thread.sleep(2000);\n        wait.until(ExpectedConditions.elementToBeClickable(login));\n        //wait.until(ExpectedConditions.presenceOfNestedElementLocatedBy(login, By.xpath(&quot;//div[@class='_10b1I']&quot;) ));\n        JavascriptExecutor js = (JavascriptExecutor) driver;\n        js.executeScript(&quot;window.scrollBy(0,document.body.scrollHeight)&quot;);\n        js.executeScript(&quot;arguments[0].scrollIntoView();&quot;, login);\n        login.click();\n        //driver.findElement(By.xpath(&quot;(//button[@class='_1YW_5'])[1]&quot;)).click();\n        wait.until(ExpectedConditions.presenceOfAllElementsLocatedBy(By.xpath(&quot;//div[@id='comp-kaoxkn4a1']&quot;)));\n        String sign = driver.findElement(By.xpath(&quot;//div[@id='comp-kaoxkn4a1']/h1/span&quot;)).getText();\n        System.out.println(sign);\n    }\n</code></pre>\n<p>Note: I tried to add Scroll as well to add some wait before clicking.</p>\n<p>DOM:\n<a href=\"https://i.stack.imgur.com/m3BTy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/m3BTy.png\" alt=\"enter image description here\" /></a>\nPlease let me know if i am missing anything here.</p>\n"},{"tags":["java","android","android-studio"],"comments":[{"owner":{"account_id":39846,"reputation":991143,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":1,"creation_date":1645302072,"post_id":71188859,"comment_id":125836635,"body_markdown":"&quot;I selected the &quot;src/main/assets&quot; folder&quot; -- the screenshot suggests that you wound up with `src/androidTest/assets`. It has &quot;(androidTests)&quot; after your filename. Personally, I never use that Android view -- I click the drop-down above the project tree and choose &quot;Project&quot;, for an actual honest-to-goodness look at where the files are.","body":"&quot;I selected the &quot;src/main/assets&quot; folder&quot; -- the screenshot suggests that you wound up with <code>src&#47;androidTest&#47;assets</code>. It has &quot;(androidTests)&quot; after your filename. Personally, I never use that Android view -- I click the drop-down above the project tree and choose &quot;Project&quot;, for an actual honest-to-goodness look at where the files are."},{"owner":{"account_id":11728717,"reputation":2354,"user_id":8585023,"display_name":"Doh09"},"score":0,"creation_date":1645302146,"post_id":71188859,"comment_id":125836650,"body_markdown":"Yea I was thinking the same. But if I right clicked again it afterwards showed me the &quot;androidTest&quot; option. And if I clicked that then it just pointed to the exact same folder. Same happened if I selected the &quot;debug&quot; version of the assets folder. All 3 just made the same folder and same location. What I mean is, I have tried main, test and debug.","body":"Yea I was thinking the same. But if I right clicked again it afterwards showed me the &quot;androidTest&quot; option. And if I clicked that then it just pointed to the exact same folder. Same happened if I selected the &quot;debug&quot; version of the assets folder. All 3 just made the same folder and same location. What I mean is, I have tried main, test and debug."},{"owner":{"account_id":39846,"reputation":991143,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1645302182,"post_id":71188859,"comment_id":125836659,"body_markdown":"Perhaps use your development machine&#39;s file manager, or the Project view (see updated comment above), and see where the files really are on the filesystem.","body":"Perhaps use your development machine&#39;s file manager, or the Project view (see updated comment above), and see where the files really are on the filesystem."},{"owner":{"account_id":11728717,"reputation":2354,"user_id":8585023,"display_name":"Doh09"},"score":0,"creation_date":1645302248,"post_id":71188859,"comment_id":125836673,"body_markdown":"Great thinking! I think that could solve it.","body":"Great thinking! I think that could solve it."},{"owner":{"account_id":11728717,"reputation":2354,"user_id":8585023,"display_name":"Doh09"},"score":0,"creation_date":1645302426,"post_id":71188859,"comment_id":125836711,"body_markdown":"It worked! I now get a different error due to the file not being read as it should. But at least now it finds the file. Thanks very much. I resolved it by manually moving the file in Windows Explorer. In Android Studio it looked as though there was just one folder. But in Windows Explorer there were in fact multiple folders. So I moved it from AndroidTest to Main manually there.","body":"It worked! I now get a different error due to the file not being read as it should. But at least now it finds the file. Thanks very much. I resolved it by manually moving the file in Windows Explorer. In Android Studio it looked as though there was just one folder. But in Windows Explorer there were in fact multiple folders. So I moved it from AndroidTest to Main manually there."}],"answers":[{"tags":[],"owner":{"account_id":11728717,"reputation":2354,"user_id":8585023,"display_name":"Doh09"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1645303442,"creation_date":1645302542,"answer_id":71188933,"question_id":71188859,"body_markdown":"As CommonsWare suggested in a comment I could try look outside Android Studio. And it turned out that despite there only appearing one &quot;Assets&quot; folder in Android Studio there were 4 folders. The files were in &quot;androidTest&quot; and i moved them to &quot;main&quot;. Then it found the file.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/LT3xd.png","title":"Android Studio keeps giving a file not found exception. Not sure why","body":"<p>As CommonsWare suggested in a comment I could try look outside Android Studio. And it turned out that despite there only appearing one &quot;Assets&quot; folder in Android Studio there were 4 folders. The files were in &quot;androidTest&quot; and i moved them to &quot;main&quot;. Then it found the file.</p>\n<p><a href=\"https://i.stack.imgur.com/LT3xd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LT3xd.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":11728717,"reputation":2354,"user_id":8585023,"display_name":"Doh09"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":537,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1645303442,"creation_date":1645301910,"question_id":71188859,"body_markdown":"I&#39;m making an Android app in Android Studio. I&#39;m trying to get the app to load an .xlsx file. But whenever I do so it gives me a &quot;File not found&quot; exception.\r\n\r\nThe file is stored in the folder that Android Studio itself created when i selected &quot;Directory&quot; and chose &quot;Assets&quot;. I selected the &quot;src/main/assets&quot; folder.\r\n\r\nIn the screenshots below you can see the error I am getting, the folder structure, the code I use to call the file and a notification I noticed that pops up when debugging. I think the last picture with the notification may not be relevant for this error but I included it just in case it might be relevant.\r\n\r\nWhat have I tried so far?\r\n- Testing with another file. So I have tested with filename and filename2. Respectively a .xlsx file and a .png file.\r\n- I have restarted Android Studio.\r\n- I have cleaned the project, clicked make project and rebuilt the project.\r\n- I have tried renaming the file so it has all lower case letters.\r\n\r\nAny suggestions as to why my Android studio does not find this file?\r\n\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n[![enter image description here][3]][3]\r\n\r\n[![enter image description here][4]][4]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/V7LOk.png\r\n  [2]: https://i.stack.imgur.com/FHaAu.png\r\n  [3]: https://i.stack.imgur.com/RYbLe.png\r\n  [4]: https://i.stack.imgur.com/HeyN1.png","title":"Android Studio keeps giving a file not found exception. Not sure why","body":"<p>I'm making an Android app in Android Studio. I'm trying to get the app to load an .xlsx file. But whenever I do so it gives me a &quot;File not found&quot; exception.</p>\n<p>The file is stored in the folder that Android Studio itself created when i selected &quot;Directory&quot; and chose &quot;Assets&quot;. I selected the &quot;src/main/assets&quot; folder.</p>\n<p>In the screenshots below you can see the error I am getting, the folder structure, the code I use to call the file and a notification I noticed that pops up when debugging. I think the last picture with the notification may not be relevant for this error but I included it just in case it might be relevant.</p>\n<p>What have I tried so far?</p>\n<ul>\n<li>Testing with another file. So I have tested with filename and filename2. Respectively a .xlsx file and a .png file.</li>\n<li>I have restarted Android Studio.</li>\n<li>I have cleaned the project, clicked make project and rebuilt the project.</li>\n<li>I have tried renaming the file so it has all lower case letters.</li>\n</ul>\n<p>Any suggestions as to why my Android studio does not find this file?</p>\n<p><a href=\"https://i.stack.imgur.com/V7LOk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/V7LOk.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/FHaAu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FHaAu.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/RYbLe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RYbLe.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/HeyN1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HeyN1.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","unit-testing","junit","junit4"],"comments":[{"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"score":0,"creation_date":1645303060,"post_id":71188966,"comment_id":125836837,"body_markdown":"What characteristics of this class do you want your test to verify?","body":"What characteristics of this class do you want your test to verify?"},{"owner":{"account_id":17541752,"reputation":13,"user_id":12723802,"display_name":"JCS"},"score":0,"creation_date":1645303166,"post_id":71188966,"comment_id":125836854,"body_markdown":"I just want to test that it returns a random number that is between 1-6 as it is a dice","body":"I just want to test that it returns a random number that is between 1-6 as it is a dice"},{"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"score":0,"creation_date":1645303294,"post_id":71188966,"comment_id":125836886,"body_markdown":"Then you could call it multiple times until you verify its range of output.","body":"Then you could call it multiple times until you verify its range of output."},{"owner":{"account_id":17541752,"reputation":13,"user_id":12723802,"display_name":"JCS"},"score":0,"creation_date":1645303862,"post_id":71188966,"comment_id":125837004,"body_markdown":"Could you demonstrate it please I am very new to this","body":"Could you demonstrate it please I am very new to this"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1645304312,"post_id":71188966,"comment_id":125837087,"body_markdown":"At the end it only tests the java random class.","body":"At the end it only tests the java random class."},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1645304363,"post_id":71188966,"comment_id":125837097,"body_markdown":"BTW. Take care of java naming conventions. Method names should start with lowercase character.","body":"BTW. Take care of java naming conventions. Method names should start with lowercase character."}],"answers":[{"tags":[],"owner":{"account_id":5576597,"reputation":54,"user_id":4419808,"display_name":"Gyz Ny&#225;ri"},"down_vote_count":1,"up_vote_count":2,"is_accepted":true,"score":1,"last_activity_date":1645303242,"creation_date":1645303242,"answer_id":71189012,"question_id":71188966,"body_markdown":"Implement the Dice class like this:\r\n```\r\npublic Dice {\r\n\r\n    private Random random;\r\n\r\n    public Dice(Random random) {\r\n        this.random = random;\r\n    }\r\n}\r\n```\r\nThen in the test you can inject a mock, which can return a predefined value...\r\n","title":"Unit Testing for a random number","body":"<p>Implement the Dice class like this:</p>\n<pre><code>public Dice {\n\n    private Random random;\n\n    public Dice(Random random) {\n        this.random = random;\n    }\n}\n</code></pre>\n<p>Then in the test you can inject a mock, which can return a predefined value...</p>\n"}],"owner":{"account_id":17541752,"reputation":13,"user_id":12723802,"display_name":"JCS"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":689,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":71189012,"answer_count":1,"score":0,"last_activity_date":1645303242,"creation_date":1645302855,"question_id":71188966,"body_markdown":"I am trying to create a junit test on a random number generator. However, I am not sure how you do this.\r\n```\r\npackage main;\r\nimport java.util.Random;\r\n    \r\npublic class Dice {\r\n\tpublic int DiceRoll() {\r\n\t\tRandom rand = new Random();\r\n\t\treturn rand.nextInt(6)+1;\r\n\t}\r\n}\r\n```","title":"Unit Testing for a random number","body":"<p>I am trying to create a junit test on a random number generator. However, I am not sure how you do this.</p>\n<pre><code>package main;\nimport java.util.Random;\n    \npublic class Dice {\n    public int DiceRoll() {\n        Random rand = new Random();\n        return rand.nextInt(6)+1;\n    }\n}\n</code></pre>\n"},{"tags":["java","arrays","recursion"],"comments":[{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":1,"creation_date":1645195615,"post_id":71175278,"comment_id":125813713,"body_markdown":"&quot;If its there, multiply by two&quot; - multiply _what_ by two? The value in the array, or the argument passed into the method?","body":"&quot;If its there, multiply by two&quot; - multiply <i>what</i> by two? The value in the array, or the argument passed into the method?"},{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":1,"creation_date":1645195672,"post_id":71175278,"comment_id":125813743,"body_markdown":"&quot;Return the value if there is no more same value&quot; - return which value? The original value, or the value after you multiplied it by two?","body":"&quot;Return the value if there is no more same value&quot; - return which value? The original value, or the value after you multiplied it by two?"},{"owner":{"account_id":24301238,"reputation":11,"user_id":18244712,"display_name":"calket"},"score":0,"creation_date":1645201627,"post_id":71175278,"comment_id":125816350,"body_markdown":"You&#39;re right, I could&#39;ve worded that better. Here is the original description because I don&#39;t know if you can share the link on stackoverflow:\n1. If original is found in nums, multiply it by two (i.e., set original = 2 * original).\n2. Otherwise, stop the process.\n3. Repeat this process with the new number as long as you keep finding the number.\nReturn the final value of original","body":"You&#39;re right, I could&#39;ve worded that better. Here is the original description because I don&#39;t know if you can share the link on stackoverflow: 1. If original is found in nums, multiply it by two (i.e., set original = 2 * original). 2. Otherwise, stop the process. 3. Repeat this process with the new number as long as you keep finding the number. Return the final value of original"}],"answers":[{"tags":[],"owner":{"account_id":5576597,"reputation":54,"user_id":4419808,"display_name":"Gyz Ny&#225;ri"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645302920,"creation_date":1645196686,"answer_id":71175629,"question_id":71175278,"body_markdown":"Guessing that your problem is that your have not implemented recursion properly:\r\n```\r\nclass Solution {\r\n    public int findFinalValue(int[] nums, int original) {\r\n        int found = original;\r\n        for(int n: nums){\r\n            if(n == original){\r\n                found = findFinalValue(nums, found * 2);\r\n            }\r\n            \r\n        }\r\n        return found;\r\n    }\r\n}\r\n```","title":"Keep multiplying found values in an array error with recursion","body":"<p>Guessing that your problem is that your have not implemented recursion properly:</p>\n<pre><code>class Solution {\n    public int findFinalValue(int[] nums, int original) {\n        int found = original;\n        for(int n: nums){\n            if(n == original){\n                found = findFinalValue(nums, found * 2);\n            }\n            \n        }\n        return found;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20838954,"reputation":76,"user_id":15306166,"display_name":"arpitj938"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645197023,"creation_date":1645197023,"answer_id":71175709,"question_id":71175278,"body_markdown":"It is not iterating from 16 to 4, it is how recursion works. You need to pass the result back or store it in a global variable. Once the dead-end is achieved in recursion it backtracks and comes back to its original state. \r\n\r\nSolution\r\n\r\n```\r\nclass Solution {\r\n    public int findFinalValue(int[] nums, int original) {\r\n        int isPresent = false;\r\n        for(int n: nums){\r\n            if(n == original){\r\n                isPresent = true;\r\n                break;\r\n            }\r\n        }\r\n        if(isPresent) {\r\n           original = findFinalValue(nums, original*2);\r\n        }\r\n        return original;\r\n    }\r\n}\r\n```\r\n\r\nFrankly speaking, you can optimize it by sorting the array at first and then using binary search for finding elements, in addition, the array passed in the next state can be reduced till the index has read. Because original has become twice ","title":"Keep multiplying found values in an array error with recursion","body":"<p>It is not iterating from 16 to 4, it is how recursion works. You need to pass the result back or store it in a global variable. Once the dead-end is achieved in recursion it backtracks and comes back to its original state.</p>\n<p>Solution</p>\n<pre><code>class Solution {\n    public int findFinalValue(int[] nums, int original) {\n        int isPresent = false;\n        for(int n: nums){\n            if(n == original){\n                isPresent = true;\n                break;\n            }\n        }\n        if(isPresent) {\n           original = findFinalValue(nums, original*2);\n        }\n        return original;\n    }\n}\n</code></pre>\n<p>Frankly speaking, you can optimize it by sorting the array at first and then using binary search for finding elements, in addition, the array passed in the next state can be reduced till the index has read. Because original has become twice</p>\n"},{"tags":[],"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645203828,"creation_date":1645203828,"answer_id":71177298,"question_id":71175278,"body_markdown":"I wouldn&#39;t use recursion, but since I think you&#39;re asking about a recursive solution, I would do it like this:\r\n\r\n    public int findFinalValue(int[] nums, int original) {\r\n        return IntStream.of(nums).anyMatch(n -&gt; n == original)\r\n               ? findFinalValue(nums, 2 * original)\r\n               : original;\r\n    }\r\n","title":"Keep multiplying found values in an array error with recursion","body":"<p>I wouldn't use recursion, but since I think you're asking about a recursive solution, I would do it like this:</p>\n<pre><code>public int findFinalValue(int[] nums, int original) {\n    return IntStream.of(nums).anyMatch(n -&gt; n == original)\n           ? findFinalValue(nums, 2 * original)\n           : original;\n}\n</code></pre>\n"}],"owner":{"account_id":24301238,"reputation":11,"user_id":18244712,"display_name":"calket"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":152,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":3,"score":-1,"last_activity_date":1645302920,"creation_date":1645195227,"question_id":71175278,"body_markdown":"I struggle with this coding &quot;challenge&quot;.\r\nI need to look for the **original** value in **nums**. If its there, multiply by two\r\nand redo the whole thing. \r\nReturn the value if there is no more same value.\r\n\r\nIt works on a lot of test cases but I get a weird error with this set while debugging.\r\nAfter I iterate the array and was ready to return the right value, instead of returning the 16, it calls the **findFinalValue** again and iterates itself from 16 down again to 4.\r\n\r\n```\r\npublic class Main {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSolution s = new Solution();\r\n\t\tint[] nums = {8,19,4,2,15,3};\r\n\t\tSystem.out.println(s.findFinalValue(nums, 2));\r\n\r\n\t}\r\n\r\n}\r\n```\r\n```\r\nclass Solution {\r\n    public int findFinalValue(int[] nums, int original) {\r\n    \t\r\n    \tfor(int n: nums){\r\n            if(n == original){\r\n            \toriginal*=2;\r\n            \tfindFinalValue(nums, original);\r\n            }\r\n            \r\n    \t}\r\n\t\treturn original;\r\n    }\r\n}\r\n```","title":"Keep multiplying found values in an array error with recursion","body":"<p>I struggle with this coding &quot;challenge&quot;.\nI need to look for the <strong>original</strong> value in <strong>nums</strong>. If its there, multiply by two\nand redo the whole thing.\nReturn the value if there is no more same value.</p>\n<p>It works on a lot of test cases but I get a weird error with this set while debugging.\nAfter I iterate the array and was ready to return the right value, instead of returning the 16, it calls the <strong>findFinalValue</strong> again and iterates itself from 16 down again to 4.</p>\n<pre><code>public class Main {\n\n    public static void main(String[] args) {\n        Solution s = new Solution();\n        int[] nums = {8,19,4,2,15,3};\n        System.out.println(s.findFinalValue(nums, 2));\n\n    }\n\n}\n</code></pre>\n<pre><code>class Solution {\n    public int findFinalValue(int[] nums, int original) {\n        \n        for(int n: nums){\n            if(n == original){\n                original*=2;\n                findFinalValue(nums, original);\n            }\n            \n        }\n        return original;\n    }\n}\n</code></pre>\n"},{"tags":["java","reflection","equals"],"owner":{"account_id":512063,"reputation":416,"user_id":1922291,"accept_rate":82,"display_name":"QuarterlyQuotaOfQuotes"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1645302466,"creation_date":1645029307,"question_id":71145714,"body_markdown":"I have recently discovered a bug in a Java-based side project I am working on. What happened was: at some point I have added a new primitive field to one of my classes but forgot to update the `equals` method as well as the relevant comparators, which led to two class instances being seen as equivalent, even though they did contain different data.\r\n\r\nThis got to to thinking of possible ways to catch this type of bug in the future.\r\n\r\nI figured it is possible to use reflection to the list of fields in a class and them to make sure that they are referenced in the `equals` somehow. Or alternatively I would use reflection in the equals itself to be sure that every member field matches up and I did not miss any.\r\n\r\nUltimately my question is: is this a good idea?","title":"Unit testing equals and comparators in Java","body":"<p>I have recently discovered a bug in a Java-based side project I am working on. What happened was: at some point I have added a new primitive field to one of my classes but forgot to update the <code>equals</code> method as well as the relevant comparators, which led to two class instances being seen as equivalent, even though they did contain different data.</p>\n<p>This got to to thinking of possible ways to catch this type of bug in the future.</p>\n<p>I figured it is possible to use reflection to the list of fields in a class and them to make sure that they are referenced in the <code>equals</code> somehow. Or alternatively I would use reflection in the equals itself to be sure that every member field matches up and I did not miss any.</p>\n<p>Ultimately my question is: is this a good idea?</p>\n"},{"tags":["java","unit-testing","testing","junit","mockito"],"comments":[{"owner":{"account_id":231683,"reputation":4218,"user_id":496038,"display_name":"pringi"},"score":0,"creation_date":1644578604,"post_id":71078892,"comment_id":125649488,"body_markdown":"employeeRepository should be a mock in your test. Then user mockito.when to have two test for testing condition 1 and another to test condition 2. Otherwise you are performing integration tests and depending on the implementation (and correctness) of employeeRepository.","body":"employeeRepository should be a mock in your test. Then user mockito.when to have two test for testing condition 1 and another to test condition 2. Otherwise you are performing integration tests and depending on the implementation (and correctness) of employeeRepository."},{"owner":{"display_name":"user18085807"},"score":0,"creation_date":1644579148,"post_id":71078892,"comment_id":125649664,"body_markdown":"Thanks for reply, but I completely asked another part. of course I use mockito.when to have two test for testing condition 1 and another to test condition 2. But what about the last part after if block? Should I also test these 2 lines for both of the tests that are created for condition testing?","body":"Thanks for reply, but I completely asked another part. of course I use mockito.when to have two test for testing condition 1 and another to test condition 2. But what about the last part after if block? Should I also test these 2 lines for both of the tests that are created for condition testing?"},{"owner":{"account_id":231683,"reputation":4218,"user_id":496038,"display_name":"pringi"},"score":0,"creation_date":1644579548,"post_id":71078892,"comment_id":125649819,"body_markdown":"I&#39;m sorry but I did not understand your question entirely previously. For me, if it something that you want to verify (it is part of your logic), then you should call verify. You should test each different &quot;branch&quot; entirely. If someone refactors your code, then it will always have the guarantee that her changes will work the same way as intended. If you do so only when testing condition 1 for example, then a refactor can break the method purpose (this is specially true on public methods).","body":"I&#39;m sorry but I did not understand your question entirely previously. For me, if it something that you want to verify (it is part of your logic), then you should call verify. You should test each different &quot;branch&quot; entirely. If someone refactors your code, then it will always have the guarantee that her changes will work the same way as intended. If you do so only when testing condition 1 for example, then a refactor can break the method purpose (this is specially true on public methods)."},{"owner":{"display_name":"user18085807"},"score":0,"creation_date":1644582319,"post_id":71078892,"comment_id":125650750,"body_markdown":"Suppose that I write 2 test method e.g. `test_Condition_One()` and `test_Condition_Two()`. In `test_Condition_One()` method, I will also test `employeeRepository.saveSalary()` and `employeeRepository.saveEmployee()` lines. In this situation, is there any need to test these 2 lines in `test_ConditionTwo()` method?","body":"Suppose that I write 2 test method e.g. <code>test_Condition_One()</code> and <code>test_Condition_Two()</code>. In <code>test_Condition_One()</code> method, I will also test <code>employeeRepository.saveSalary()</code> and <code>employeeRepository.saveEmployee()</code> lines. In this situation, is there any need to test these 2 lines in <code>test_ConditionTwo()</code> method?"}],"answers":[{"tags":[],"owner":{"account_id":9443335,"reputation":15252,"user_id":7023245,"accept_rate":25,"display_name":"Timothy Truckle"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645302352,"creation_date":1645302352,"answer_id":71188909,"question_id":71078892,"body_markdown":"Your question reveals the answer...\r\n\r\nWhen writing UnitTest with each test method we document **a single expectation** about the behavior of the *Code Under Test* (cut).\r\n\r\nFrom your question I understand that you expect the *cut* to  call the methods on `employeeRepository` regardless of the value returned. Therefor I&#39;d  have thee test methods, one with each condition plus one that does not meet either condition, which verify  that the methods on `employeeRepository` are called at all (regardless of the parameter values).\r\nIn addition Id have a fourth test method that verifies, that the methods on  `employeeRepository` are called with the expected parameters (since they don&#39;t seam to depend on the conditions) and maybe in the right order.","title":"Unit Test for different conditions in the same method?","body":"<p>Your question reveals the answer...</p>\n<p>When writing UnitTest with each test method we document <strong>a single expectation</strong> about the behavior of the <em>Code Under Test</em> (cut).</p>\n<p>From your question I understand that you expect the <em>cut</em> to  call the methods on <code>employeeRepository</code> regardless of the value returned. Therefor I'd  have thee test methods, one with each condition plus one that does not meet either condition, which verify  that the methods on <code>employeeRepository</code> are called at all (regardless of the parameter values).\nIn addition Id have a fourth test method that verifies, that the methods on  <code>employeeRepository</code> are called with the expected parameters (since they don't seam to depend on the conditions) and maybe in the right order.</p>\n"}],"owner":{"display_name":"user18085807"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1042,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1645302352,"creation_date":1644576734,"question_id":71078892,"body_markdown":"I am wondering if I should test the same parts of a method when there are multiple conditions in this method in Unit Testing. I mean that, for example, in the following method there are 2 conditions (the code is simplified and unnecessary parts are omitted):\r\n\r\n```\r\nprivate Boolean demo() {\r\n\t\r\n\t\tBoolean result = null;\r\n\t\tList&lt;Employee&gt; employees = employeeRepository.findAll();\r\n\t\t\r\n\t\tif (/* condition 1 */) {            \r\n\t\t\t\tresult = true;\r\n\t\t} else { /* condition 2 */                       \r\n\t\t\t\tresult = false;\r\n\t\t}\r\n\t\t\r\n\t\temployeeRepository.saveSalary(BigDecimal salary);\r\n\t\temployeeRepository.saveEmployee(Employee employee);\r\n\t\t\r\n\t\treturn result;\r\n}\r\n```\r\n\r\nWhen I test condition 1, I also test the parts in the `saveSalary()` and `saveEmployee()` methods. \r\n\r\nIn this scene, when I test condition 2 using another test method in the same Unit Test class, should I also test `saveSalary()` and `saveEmployee()` methods again? Or just verifying them as `verify(employeeRepository, times(1)).saveSalary(any());` and `verify(employeeRepository, times(1)).saveEmployee(any());` enough? What is the correct approach for this kind of situation?","title":"Unit Test for different conditions in the same method?","body":"<p>I am wondering if I should test the same parts of a method when there are multiple conditions in this method in Unit Testing. I mean that, for example, in the following method there are 2 conditions (the code is simplified and unnecessary parts are omitted):</p>\n<pre><code>private Boolean demo() {\n    \n        Boolean result = null;\n        List&lt;Employee&gt; employees = employeeRepository.findAll();\n        \n        if (/* condition 1 */) {            \n                result = true;\n        } else { /* condition 2 */                       \n                result = false;\n        }\n        \n        employeeRepository.saveSalary(BigDecimal salary);\n        employeeRepository.saveEmployee(Employee employee);\n        \n        return result;\n}\n</code></pre>\n<p>When I test condition 1, I also test the parts in the <code>saveSalary()</code> and <code>saveEmployee()</code> methods.</p>\n<p>In this scene, when I test condition 2 using another test method in the same Unit Test class, should I also test <code>saveSalary()</code> and <code>saveEmployee()</code> methods again? Or just verifying them as <code>verify(employeeRepository, times(1)).saveSalary(any());</code> and <code>verify(employeeRepository, times(1)).saveEmployee(any());</code> enough? What is the correct approach for this kind of situation?</p>\n"},{"tags":["java","multithreading","static","jboss","share"],"comments":[{"owner":{"account_id":231683,"reputation":4218,"user_id":496038,"display_name":"pringi"},"score":0,"creation_date":1645095473,"post_id":71155986,"comment_id":125782123,"body_markdown":"Where are you getting null? ThreadSession is private. How do other threads access it?","body":"Where are you getting null? ThreadSession is private. How do other threads access it?"},{"owner":{"account_id":17558924,"reputation":1,"user_id":12737810,"display_name":"cnconline.info"},"score":0,"creation_date":1645184955,"post_id":71155986,"comment_id":125809747,"body_markdown":"inside thread A, B ... but only after re-deployed app\nIf restart jboss the web-app work fine","body":"inside thread A, B ... but only after re-deployed app If restart jboss the web-app work fine"}],"answers":[{"tags":[],"owner":{"account_id":17558924,"reputation":1,"user_id":12737810,"display_name":"cnconline.info"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1645302182,"creation_date":1645302182,"answer_id":71188889,"question_id":71155986,"body_markdown":"After several tests the problem was disappears\r\nI think it was caused by some instability in the application server (jboss 4)","title":"static class&#39;member across threads after redeploy web app (java web-app, jboss4)","body":"<p>After several tests the problem was disappears\nI think it was caused by some instability in the application server (jboss 4)</p>\n"}],"owner":{"account_id":17558924,"reputation":1,"user_id":12737810,"display_name":"cnconline.info"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71188889,"answer_count":1,"score":0,"last_activity_date":1645302182,"creation_date":1645092177,"question_id":71155986,"body_markdown":"In a web app a class is defined so:\r\n\r\n    public class ThreadSession {\r\n    private static final int MAX_AVAILABLE = 1;\r\n    static private final Semaphore semaphore = new Semaphore(MAX_AVAILABLE, true);\r\n\r\nthen there&#39;s one or more threads created by:\r\n\r\n    class wsClientThread extends Thread {\r\n    public void run() { ... }\r\n...\r\n\r\n    wsClientThread clientThread = new wsClientThread(clientSocket);\r\n    clientThread.start();\r\n\r\n\r\nlet&#39;s call these thread A, B, ..\r\n\r\nInside these threads accessing to ThreadSession.semaphore work fine as expected,\r\nbut after redeployed the web-app (by jboss 4.05), and reload my index.jsp, inside thread A, B,.. ThreadSession.semaphore is null (but ThreadSession.MAX_AVAILABLE = 1)\r\n\r\nCannot understand why this .. can anyone help me ?\r\n\r\nThx\r\nCristian","title":"static class&#39;member across threads after redeploy web app (java web-app, jboss4)","body":"<p>In a web app a class is defined so:</p>\n<pre><code>public class ThreadSession {\nprivate static final int MAX_AVAILABLE = 1;\nstatic private final Semaphore semaphore = new Semaphore(MAX_AVAILABLE, true);\n</code></pre>\n<p>then there's one or more threads created by:</p>\n<pre><code>class wsClientThread extends Thread {\npublic void run() { ... }\n</code></pre>\n<p>...</p>\n<pre><code>wsClientThread clientThread = new wsClientThread(clientSocket);\nclientThread.start();\n</code></pre>\n<p>let's call these thread A, B, ..</p>\n<p>Inside these threads accessing to ThreadSession.semaphore work fine as expected,\nbut after redeployed the web-app (by jboss 4.05), and reload my index.jsp, inside thread A, B,.. ThreadSession.semaphore is null (but ThreadSession.MAX_AVAILABLE = 1)</p>\n<p>Cannot understand why this .. can anyone help me ?</p>\n<p>Thx\nCristian</p>\n"},{"tags":["java","spring","spring-boot","jpa","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":9034081,"reputation":39,"user_id":6730751,"display_name":"limon4ick"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645302087,"creation_date":1645302087,"answer_id":71188879,"question_id":71186931,"body_markdown":"You can use `@ControllerAdvice` to handle errors during HTTP call\r\n\r\n    @Component(&quot;MyExceptionHandler&quot;)\r\n    public class ExceptionHandlerAdvice {\r\n\r\n    @ExceptionHandler(ConstraintViolationException.class)\r\n    @ResponseStatus(CONFLICT)\r\n    @ResponseBody\r\n    public SomeErrorDTO handle ConstraintViolationException(ConstraintViolationException e) {\r\n        log.warn(&quot;Encountered ConstraintViolationException: &quot;, e);\r\n        return new SomeErrorDTO(&quot;Duplicate ....&quot;, e.getMessage());\r\n\r\n    }\r\n\r\n","title":"How to send customise response message when any constraint violation error occured in spring boot","body":"<p>You can use <code>@ControllerAdvice</code> to handle errors during HTTP call</p>\n<pre><code>@Component(&quot;MyExceptionHandler&quot;)\npublic class ExceptionHandlerAdvice {\n\n@ExceptionHandler(ConstraintViolationException.class)\n@ResponseStatus(CONFLICT)\n@ResponseBody\npublic SomeErrorDTO handle ConstraintViolationException(ConstraintViolationException e) {\n    log.warn(&quot;Encountered ConstraintViolationException: &quot;, e);\n    return new SomeErrorDTO(&quot;Duplicate ....&quot;, e.getMessage());\n\n}\n</code></pre>\n"}],"owner":{"account_id":17611422,"reputation":178,"user_id":12779384,"display_name":"Malav Mevada"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":252,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1645302087,"creation_date":1645288534,"question_id":71186931,"body_markdown":"Let&#39;s assume, I have one class name Student\r\n\r\n\r\n```\r\n@Entity\r\n@Data\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Builder\r\n@Table(\r\n        name = &quot;tbl_student&quot;,\r\n        uniqueConstraints = @UniqueConstraint(\r\n                name = &quot;emailid_unique&quot;,\r\n                columnNames = &quot;email_address&quot;\r\n        )\r\n)\r\npublic class Student {\r\n\r\n    @Id\r\n    @GeneratedValue(\r\n            strategy = GenerationType.AUTO)\r\n    private Long studentId;\r\n    private String firstName;\r\n    private String lastName;\r\n\r\n    @Column(\r\n            name = &quot;email_address&quot;,\r\n            nullable = false\r\n    )\r\n    private String emailId;\r\n\r\n}\r\n```\r\n\r\n\r\nNow if any duplicate email address receives by the database then it&#39;ll show an error.\r\nBut I want to pass that error message or customize the error message in Api Response. \r\n\r\nPlease let me know if you have any idea about it.","title":"How to send customise response message when any constraint violation error occured in spring boot","body":"<p>Let's assume, I have one class name Student</p>\n<pre><code>@Entity\n@Data\n@AllArgsConstructor\n@NoArgsConstructor\n@Builder\n@Table(\n        name = &quot;tbl_student&quot;,\n        uniqueConstraints = @UniqueConstraint(\n                name = &quot;emailid_unique&quot;,\n                columnNames = &quot;email_address&quot;\n        )\n)\npublic class Student {\n\n    @Id\n    @GeneratedValue(\n            strategy = GenerationType.AUTO)\n    private Long studentId;\n    private String firstName;\n    private String lastName;\n\n    @Column(\n            name = &quot;email_address&quot;,\n            nullable = false\n    )\n    private String emailId;\n\n}\n</code></pre>\n<p>Now if any duplicate email address receives by the database then it'll show an error.\nBut I want to pass that error message or customize the error message in Api Response.</p>\n<p>Please let me know if you have any idea about it.</p>\n"},{"tags":["java","while-loop","integer"],"comments":[{"owner":{"account_id":317953,"reputation":50092,"user_id":634919,"display_name":"Nate Eldredge"},"score":0,"creation_date":1645299944,"post_id":71188262,"comment_id":125836118,"body_markdown":"Hint: under what conditions is `( entry != pin ) || (entry != pintwo )` true?  Don&#39;t read what you intended it to do, step through what it actually does.  Try some examples.","body":"Hint: under what conditions is <code>( entry != pin ) || (entry != pintwo )</code> true?  Don&#39;t read what you intended it to do, step through what it actually does.  Try some examples."},{"owner":{"account_id":22450291,"reputation":364,"user_id":16653700,"display_name":"Alias Cartellano"},"score":0,"creation_date":1645300566,"post_id":71188262,"comment_id":125836268,"body_markdown":"`||` means &quot;or&quot; in Java, so the statement `( entry != pin ) || (entry != pintwo )` is always true since entry is bound to not be one or the other, you need to use `&amp;&amp;` for conditions where you need both to be true in this case that `entry` doesn&#39;t match either.","body":"<code>||</code> means &quot;or&quot; in Java, so the statement <code>( entry != pin ) || (entry != pintwo )</code> is always true since entry is bound to not be one or the other, you need to use <code>&amp;&amp;</code> for conditions where you need both to be true in this case that <code>entry</code> doesn&#39;t match either."}],"answers":[{"tags":[],"owner":{"account_id":18381624,"reputation":126,"user_id":13389594,"display_name":"Tetereou Mouhammad Abdourazak"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645301191,"creation_date":1645301191,"answer_id":71188761,"question_id":71188262,"body_markdown":"  This is the solution I propose.\r\n\r\n\r\n    while (( entry != pin ) &amp;&amp; (entry != pintwo ))\r\n    {\r\n        System.out.println(&quot;\\nINCORRECT PIN. TRY AGAIN.&quot;);\r\n        System.out.print(&quot;ENTER YOUR PIN: &quot;);\r\n        entry = keyboard.nextInt();\r\n    }\r\n\r\n    System.out.println(&quot;\\nPIN ACCEPTED. YOU NOW HAVE ACCESS TO YOUR ACCOUNT.&quot;);\r\n }\r\n\r\n  entry can not be equal to pin and pintwo at the same time.That makes your statement always true.I think you should use &amp;&amp;(and) instead of ||(or)\r\n}","title":"Interger not registering in my while or statment?","body":"<p>This is the solution I propose.</p>\n<pre><code>while (( entry != pin ) &amp;&amp; (entry != pintwo ))\n{\n    System.out.println(&quot;\\nINCORRECT PIN. TRY AGAIN.&quot;);\n    System.out.print(&quot;ENTER YOUR PIN: &quot;);\n    entry = keyboard.nextInt();\n}\n\nSystem.out.println(&quot;\\nPIN ACCEPTED. YOU NOW HAVE ACCESS TO YOUR ACCOUNT.&quot;);\n</code></pre>\n<p>}</p>\n<p>entry can not be equal to pin and pintwo at the same time.That makes your statement always true.I think you should use &amp;&amp;(and) instead of ||(or)\n}</p>\n"}],"owner":{"account_id":24200110,"reputation":1,"user_id":18158060,"display_name":"Tristan Beddingfield"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1645301191,"creation_date":1645297678,"question_id":71188262,"body_markdown":"    import java.util.Scanner;\r\n\r\n     public class EnterPIN1\r\n     {\r\n\t public static void main( String[] args )\r\n\t{\r\n\t\tScanner keyboard = new Scanner(System.in);\r\n\t\tint pin = 12345;\r\n\t\tint pintwo = 54321;\r\n\t\t\r\n\t\t\r\n\r\n\t\tSystem.out.println(&quot;WELCOME TO THE BANK OF MITCHELL.&quot;);\r\n\t\tSystem.out.print(&quot;ENTER YOUR PIN: &quot;);\r\n\t\tint entry = keyboard.nextInt();\r\n\r\n\t\twhile ( entry != pin ) || (entry != pintwo )\r\n\t\t{\r\n\t\t\tSystem.out.println(&quot;\\nINCORRECT PIN. TRY AGAIN.&quot;);\r\n\t\t\tSystem.out.print(&quot;ENTER YOUR PIN: &quot;);\r\n\t\t\tentry = keyboard.nextInt();\r\n\t\t}\r\n\r\n\t\tSystem.out.println(&quot;\\nPIN ACCEPTED. YOU NOW HAVE ACCESS TO YOUR ACCOUNT.&quot;);\r\n\t }\r\n    }\r\n\r\n\r\n\r\nHello all! I am tasked with making an ATM pin system, I have two pins so far that I am using, 12345 and 54321. The first pin works flawlessly and works correctly in the program whereas the other dosent register as a &quot;correct pin&quot;. I am new to java so I dont know if this is because I have both seperate in different interger values or because I have them set up incorrectly in my while statement. Any help would be apperciated! ","title":"Interger not registering in my while or statment?","body":"<pre><code>import java.util.Scanner;\n\n public class EnterPIN1\n {\n public static void main( String[] args )\n{\n    Scanner keyboard = new Scanner(System.in);\n    int pin = 12345;\n    int pintwo = 54321;\n    \n    \n\n    System.out.println(&quot;WELCOME TO THE BANK OF MITCHELL.&quot;);\n    System.out.print(&quot;ENTER YOUR PIN: &quot;);\n    int entry = keyboard.nextInt();\n\n    while ( entry != pin ) || (entry != pintwo )\n    {\n        System.out.println(&quot;\\nINCORRECT PIN. TRY AGAIN.&quot;);\n        System.out.print(&quot;ENTER YOUR PIN: &quot;);\n        entry = keyboard.nextInt();\n    }\n\n    System.out.println(&quot;\\nPIN ACCEPTED. YOU NOW HAVE ACCESS TO YOUR ACCOUNT.&quot;);\n }\n}\n</code></pre>\n<p>Hello all! I am tasked with making an ATM pin system, I have two pins so far that I am using, 12345 and 54321. The first pin works flawlessly and works correctly in the program whereas the other dosent register as a &quot;correct pin&quot;. I am new to java so I dont know if this is because I have both seperate in different interger values or because I have them set up incorrectly in my while statement. Any help would be apperciated!</p>\n"},{"tags":["java","jsp"],"comments":[{"owner":{"account_id":19042414,"reputation":71,"user_id":13902217,"display_name":"Jeka_FRI"},"score":0,"creation_date":1645298703,"post_id":71188101,"comment_id":125835864,"body_markdown":"Most likely you need to wrap the input in `foreach`. `jsp` doesn&#39;t know anything about `dish.id`.","body":"Most likely you need to wrap the input in <code>foreach</code>. <code>jsp</code> doesn&#39;t know anything about <code>dish.id</code>."}],"answers":[{"tags":[],"owner":{"account_id":1122178,"reputation":4384,"user_id":1110291,"display_name":"rickz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1645301067,"creation_date":1645301067,"answer_id":71188741,"question_id":71188101,"body_markdown":"I think you have too many quotes. Here is a demonstration JSP.\r\n\r\n    &lt;%@ page import=&quot;java.util.HashMap, java.util.ArrayList&quot;%&gt;\r\n    &lt;%@ taglib uri=&quot;http://java.sun.com/jsp/jstl/core&quot; prefix=&quot;c&quot;%&gt;\r\n\t&lt;%\r\n\t\tArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;();\r\n\t\tlist.add(&quot;a&quot;);\r\n\t\tlist.add(&quot;b&quot;);\r\n\t\tlist.add(&quot;c&quot;);\r\n\t\tpageContext.setAttribute(&quot;list&quot;, list);\r\n\t\tHashMap&lt;String, Integer&gt; map = new HashMap&lt;String, Integer&gt;();\r\n\t\tmap.put(&quot;a&quot;, 11);\r\n\t\tmap.put(&quot;b&quot;, 22);\r\n\t\tmap.put(&quot;c&quot;, 33);\r\n\t\tpageContext.setAttribute(&quot;map&quot;, map);\r\n\t%&gt;\r\n\t&lt;c:forEach items=&quot;${map}&quot; varStatus=&quot;loopCount&quot;&gt;\r\n\t\t${map[list[loopCount.index]]}\r\n\t&lt;/c:forEach&gt;\r\n\r\nThe output is \r\n11 22 33 . \r\nYou could try using   name=&quot;${dishIdQuantityMap[dish.id]}&quot;\r\n As Jeka_FRIZZ pointed out dish must be in scope.","title":"JSP how to concat value in name attribute?","body":"<p>I think you have too many quotes. Here is a demonstration JSP.</p>\n<pre><code>&lt;%@ page import=&quot;java.util.HashMap, java.util.ArrayList&quot;%&gt;\n&lt;%@ taglib uri=&quot;http://java.sun.com/jsp/jstl/core&quot; prefix=&quot;c&quot;%&gt;\n&lt;%\n    ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;();\n    list.add(&quot;a&quot;);\n    list.add(&quot;b&quot;);\n    list.add(&quot;c&quot;);\n    pageContext.setAttribute(&quot;list&quot;, list);\n    HashMap&lt;String, Integer&gt; map = new HashMap&lt;String, Integer&gt;();\n    map.put(&quot;a&quot;, 11);\n    map.put(&quot;b&quot;, 22);\n    map.put(&quot;c&quot;, 33);\n    pageContext.setAttribute(&quot;map&quot;, map);\n%&gt;\n&lt;c:forEach items=&quot;${map}&quot; varStatus=&quot;loopCount&quot;&gt;\n    ${map[list[loopCount.index]]}\n&lt;/c:forEach&gt;\n</code></pre>\n<p>The output is\n11 22 33 .\nYou could try using   name=&quot;${dishIdQuantityMap[dish.id]}&quot;\nAs Jeka_FRIZZ pointed out dish must be in scope.</p>\n"}],"owner":{"display_name":"user16722881"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":157,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71188741,"answer_count":1,"score":1,"last_activity_date":1645301067,"creation_date":1645296537,"question_id":71188101,"body_markdown":"Here is what I use in Thymeleaf. I just concat dishIdQuantityMap with dish.id.\r\n\r\n            &lt;div class=&quot;single-menu&quot; th:each=&quot;dish : ${dishList}&quot;&gt;\r\n                                  &lt;input\r\n                                th:value=&quot;0&quot;\r\n                                th:name=&quot;${&#39;dishIdQuantityMap[&#39; + dish.id + &#39;]&#39;}&quot;\r\n                                type=&quot;number&quot;\r\n                                min=&quot;0&quot;\r\n                                max=&quot;100&quot;\r\n                                step=&quot;1&quot;\r\n                                readonly\r\n                        /&gt;\r\n\r\nAnd it works fine, but if I do the same in JSP\r\n\r\n         \r\n\r\n       &lt;input\r\n                                    value=&quot;0&quot;\r\n                                    name=&quot;${&#39;dishIdQuantityMap[&#39; + dish.id + &#39;]&#39; }&quot;\r\n                                    type=&quot;number&quot;\r\n                                    min=&quot;0&quot;\r\n                                    max=&quot;100&quot;\r\n                                    step=&quot;1&quot;\r\n                                    readonly\r\n                            /&gt;\r\nIt fails. Exception happens on line 142\r\n[![enter image description here][1]][1]\r\nWhat do I do wrong?\r\n\r\n\r\n&gt; Caused by: java.lang.NumberFormatException: For input string:\r\n&gt; &quot;dishIdQuantityMap&quot;\r\n\r\nUPD.\r\nIf I do it like this, it kinda works\r\n\r\n                                                                    \r\n    name=&quot;${&#39;dishIdQuantityMap[&#39;}${dish.id}${&#39;]&#39;}&quot;\r\n\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/fzHz2.png\r\n\r\n","title":"JSP how to concat value in name attribute?","body":"<p>Here is what I use in Thymeleaf. I just concat dishIdQuantityMap with dish.id.</p>\n<pre><code>        &lt;div class=&quot;single-menu&quot; th:each=&quot;dish : ${dishList}&quot;&gt;\n                              &lt;input\n                            th:value=&quot;0&quot;\n                            th:name=&quot;${'dishIdQuantityMap[' + dish.id + ']'}&quot;\n                            type=&quot;number&quot;\n                            min=&quot;0&quot;\n                            max=&quot;100&quot;\n                            step=&quot;1&quot;\n                            readonly\n                    /&gt;\n</code></pre>\n<p>And it works fine, but if I do the same in JSP</p>\n<pre><code>   &lt;input\n                                value=&quot;0&quot;\n                                name=&quot;${'dishIdQuantityMap[' + dish.id + ']' }&quot;\n                                type=&quot;number&quot;\n                                min=&quot;0&quot;\n                                max=&quot;100&quot;\n                                step=&quot;1&quot;\n                                readonly\n                        /&gt;\n</code></pre>\n<p>It fails. Exception happens on line 142\n<a href=\"https://i.stack.imgur.com/fzHz2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fzHz2.png\" alt=\"enter image description here\" /></a>\nWhat do I do wrong?</p>\n<blockquote>\n<p>Caused by: java.lang.NumberFormatException: For input string:\n&quot;dishIdQuantityMap&quot;</p>\n</blockquote>\n<p>UPD.\nIf I do it like this, it kinda works</p>\n<pre><code>name=&quot;${'dishIdQuantityMap['}${dish.id}${']'}&quot;\n</code></pre>\n"},{"tags":["java","java-stream"],"comments":[{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1645098896,"post_id":71157446,"comment_id":125783444,"body_markdown":"For a starter, you could remove all the unnecessary brackets from the first line. Then, you can use `Map.Entry&lt;String, Long&gt; max = Collections.max(c.entrySet(), Map.Entry.comparingByValue());` And for the future, keep in mind not to compare two `Long` objects using `==`. Use `equals` or declare the variable as `long`, to enforce a numerical comparison.","body":"For a starter, you could remove all the unnecessary brackets from the first line. Then, you can use <code>Map.Entry&lt;String, Long&gt; max = Collections.max(c.entrySet(), Map.Entry.comparingByValue());</code> And for the future, keep in mind not to compare two <code>Long</code> objects using <code>==</code>. Use <code>equals</code> or declare the variable as <code>long</code>, to enforce a numerical comparison."},{"owner":{"account_id":7808156,"reputation":534,"user_id":5905325,"display_name":"murphy"},"score":0,"creation_date":1645114375,"post_id":71157446,"comment_id":125790182,"body_markdown":"Shorter doesn&#39;t mean better. For example I set my `if` and `for,while...` statements always in curly brackets, because it&#39;s a common source for errors.\nYou also could split long statements into multiple lines to improve readability.","body":"Shorter doesn&#39;t mean better. For example I set my <code>if</code> and <code>for,while...</code> statements always in curly brackets, because it&#39;s a common source for errors. You also could split long statements into multiple lines to improve readability."}],"answers":[{"tags":[],"owner":{"account_id":9014228,"reputation":522,"user_id":6717707,"display_name":"Falah H. Abbas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1645260793,"creation_date":1645260793,"answer_id":71183474,"question_id":71157446,"body_markdown":"```\r\n        var c = people.stream()\r\n                .collect((Collectors.groupingBy((Person::getCountry), (Collectors.counting()))))\r\n                .entrySet().stream()\r\n                .max((o1, o2) -&gt; Long.compare(o2.getValue(), o1.getValue())).get().getKey();\r\n```","title":"Print country with most people","body":"<pre><code>        var c = people.stream()\n                .collect((Collectors.groupingBy((Person::getCountry), (Collectors.counting()))))\n                .entrySet().stream()\n                .max((o1, o2) -&gt; Long.compare(o2.getValue(), o1.getValue())).get().getKey();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1967317,"reputation":1280,"user_id":1767204,"display_name":"Ajmal Kunnummal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645301003,"creation_date":1645301003,"answer_id":71188733,"question_id":71157446,"body_markdown":"Combining the two answers:\r\n\r\n```java\r\nvar mostPopulousCountry = people.stream()\r\n   .collect(Collectors.groupingBy(Person::getCountry, Collectors.counting()))\r\n   .entrySet().stream()\r\n   .max(Map.Entry.comparingByValue())\r\n   .get().getKey(); \r\n```","title":"Print country with most people","body":"<p>Combining the two answers:</p>\n<pre class=\"lang-java prettyprint-override\"><code>var mostPopulousCountry = people.stream()\n   .collect(Collectors.groupingBy(Person::getCountry, Collectors.counting()))\n   .entrySet().stream()\n   .max(Map.Entry.comparingByValue())\n   .get().getKey(); \n</code></pre>\n"}],"owner":{"account_id":24287602,"reputation":11,"user_id":18233151,"display_name":"Ayush Rastogi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":88,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1645301003,"creation_date":1645097912,"question_id":71157446,"body_markdown":"I have implemented this logic to print the country with most people. I have a Person class having age, country , name.\r\n\r\n```\r\nMap&lt;String, Long&gt; c = people.stream().collect((Collectors.groupingBy((Person::getCountry),(Collectors.counting()))));\r\nLong f = Collections.max(c.values());\r\nfor (Map.Entry i : c.entrySet()) \r\n    if (i.getValue()==f)\r\n        System.out.println(i.getKey() + &quot; - &quot; + i.getValue());\r\n```\r\n\r\nCan it be written in a shorter way?","title":"Print country with most people","body":"<p>I have implemented this logic to print the country with most people. I have a Person class having age, country , name.</p>\n<pre><code>Map&lt;String, Long&gt; c = people.stream().collect((Collectors.groupingBy((Person::getCountry),(Collectors.counting()))));\nLong f = Collections.max(c.values());\nfor (Map.Entry i : c.entrySet()) \n    if (i.getValue()==f)\n        System.out.println(i.getKey() + &quot; - &quot; + i.getValue());\n</code></pre>\n<p>Can it be written in a shorter way?</p>\n"},{"tags":["java","android","android-fragments","fragmenttransaction"],"comments":[{"owner":{"account_id":1849514,"reputation":193868,"user_id":1676363,"accept_rate":100,"display_name":"ianhanniballake"},"score":0,"creation_date":1645297098,"post_id":71188091,"comment_id":125835537,"body_markdown":"Please include your `view_fragment_graphs.xml` layout file","body":"Please include your <code>view_fragment_graphs.xml</code> layout file"},{"owner":{"account_id":24312458,"reputation":1,"user_id":18254223,"display_name":"Leo"},"score":0,"creation_date":1645300940,"post_id":71188091,"comment_id":125836353,"body_markdown":"I updated the post, let me know if there is other things needed, thanks","body":"I updated the post, let me know if there is other things needed, thanks"},{"owner":{"account_id":24312458,"reputation":1,"user_id":18254223,"display_name":"Leo"},"score":0,"creation_date":1645301879,"post_id":71188091,"comment_id":125836585,"body_markdown":"@ianhanniballake missed the tag","body":"@ianhanniballake missed the tag"}],"owner":{"account_id":24312458,"reputation":1,"user_id":18254223,"display_name":"Leo"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1645300896,"creation_date":1645296437,"question_id":71188091,"body_markdown":"I&#39;m trying to place multiple graphs in a Fragment. So I have some FrameLayout container in a LinearLayout, in the main fragment.\r\n\r\nWhen I make the transaction of all my GraphWidgetFragment in their container, the result I get is the last GraphWidgetFragment instance is in the container intented for first graph.\r\n\r\nAlso, all other containers are filled with default GraphWidgetFragment, but it seems that those ones don&#39;t even pass through onCreateView/onResume etc because I&#39;m updating the TextView in it and the text displayed is the original one (set in xml).\r\n\r\nI know all my graph instances are existing somewhere because I can access them and get values put at construction, but except the last one, others are not visible.\r\n\r\nI replaced GraphFragment with a simple BlankFragment to make it easier to understand and debug.\r\n\r\n- I put onClickListener on FrameLayout containers, so I know that each container is at the right place.\r\n- I tryed to move transaction to onViewCreated() but same result. I tryed to do commit()/commitNow()/commitNowAllowingStateLoss() between all transaction, executePendingTransaction(), setReorderingAllowed(), still the same result as sending all in one commit.\r\n- Fragments are not replaced/superposed in same container, I tried using add() instead of replace() and set transparent colors.\r\n\r\nHere is the &quot;main Fragment&quot; code : (onCreateView() \r\n\r\n```\r\npublic class FMGraphsFragment extends Fragment {\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n\r\n        List&lt;Integer&gt; list = Arrays.asList(0, 1, 2, 3, 4, 5);\r\n\r\n        if (savedInstanceState == null) {\r\n            FragmentTransaction transaction = getChildFragmentManager().beginTransaction();\r\n            transaction.setReorderingAllowed(true);\r\n            transaction.add(R.id.temp_graph_container, new BlankFragment(0), EXTTEMP.toString());\r\n            transaction.add(R.id.ltft_graph_container, new BlankFragment(1), LTFT.toString());\r\n            transaction.add(R.id.stft_graph_container, new BlankFragment(2), STFT.toString());\r\n            transaction.add(R.id.lambda_graph_container, new BlankFragment(3), LAMBDA.toString());\r\n            transaction.add(R.id.realtemp_graph_container, new BlankFragment(4), REALTEMP.toString());\r\n            transaction.add(R.id.dutycycle_graph_container, new BlankFragment(5), DUTYCYCLE.toString());\r\n            transaction.commit();\r\n        } else {\r\n            for(Integer a : list) {\r\n                Fragment fragment = getChildFragmentManager().findFragmentByTag(LAMBDA.toString());\r\n                if (fragment instanceof BlankFragment) {\r\n                    ((BlankFragment)fragment).setA(a);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\r\n        return inflater.inflate(R.layout.view_fragment_graphs, container, false);\r\n    }\r\n}\r\n```\r\n\r\nAnd my futur GraphWidgetFragment (aka Blank) :\r\n```\r\npublic class BlankFragment extends Fragment {\r\n\r\n    private int a;\r\n\r\n    public BlankFragment() {\r\n        // Required empty public constructor\r\n        a = 999;\r\n    }\r\n\r\n    public BlankFragment(int b) {\r\n        a = b;\r\n    }\r\n\r\n    public static BlankFragment newInstance(String param1, String param2) {\r\n        return new BlankFragment();\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        return inflater.inflate(R.layout.fragment_blank, container, false);\r\n    }\r\n\r\n    @Override\r\n    public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {\r\n        super.onViewCreated(view, savedInstanceState);\r\n        TextView tv = (TextView) getActivity().findViewById(R.id.texttt);\r\n        String s = &quot;&quot;;\r\n        for (int i = 0; i &lt; a; i++) {\r\n            s = s + &quot; &quot;;\r\n        }\r\n        s = s + String.valueOf(a);\r\n        tv.setText(s);\r\n    }\r\n\r\n    public void setA(int a) {\r\n        this.a = a;\r\n    }\r\n\r\n    public int getA() {\r\n        return a;\r\n    }\r\n}\r\n```\r\n\r\nThe main fragment xml:\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;ScrollView xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:orientation=&quot;vertical&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    android:layout_margin=&quot;@dimen/margin_fine&quot;\r\n    tools:context=&quot;.ui.graph.FMGraphsFragment&quot;&gt;\r\n\r\n    &lt;LinearLayout\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:orientation=&quot;vertical&quot;&gt;\r\n\r\n        &lt;FrameLayout\r\n            android:id=&quot;@+id/temp_graph_container&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;@dimen/graph_height&quot;\r\n            android:layout_margin=&quot;@dimen/margin_fine&quot;&gt;\r\n        &lt;/FrameLayout &gt;\r\n\r\n        &lt;FrameLayout\r\n            android:id=&quot;@+id/ltft_graph_container&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;@dimen/graph_height&quot;\r\n            android:layout_margin=&quot;@dimen/margin_fine&quot;&gt;\r\n        &lt;/FrameLayout&gt;\r\n\r\n        &lt;FrameLayout\r\n            android:id=&quot;@+id/stft_graph_container&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;@dimen/graph_height&quot;\r\n            android:layout_margin=&quot;@dimen/margin_fine&quot;&gt;\r\n        &lt;/FrameLayout&gt;\r\n\r\n        &lt;FrameLayout\r\n            android:id=&quot;@+id/lambda_graph_container&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;@dimen/graph_height&quot;\r\n            android:layout_margin=&quot;@dimen/margin_fine&quot;&gt;\r\n        &lt;/FrameLayout&gt;\r\n\r\n        &lt;FrameLayout\r\n            android:id=&quot;@+id/realtemp_graph_container&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;@dimen/graph_height&quot;\r\n            android:layout_margin=&quot;@dimen/margin_fine&quot;&gt;\r\n        &lt;/FrameLayout&gt;\r\n\r\n        &lt;FrameLayout\r\n            android:id=&quot;@+id/dutycycle_graph_container&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;@dimen/graph_height&quot;\r\n            android:layout_margin=&quot;@dimen/margin_fine&quot;&gt;\r\n        &lt;/FrameLayout&gt;\r\n\r\n        &lt;FrameLayout\r\n            android:id=&quot;@+id/dummy&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;50dp&quot;&gt;\r\n        &lt;/FrameLayout&gt;\r\n\r\n    &lt;/LinearLayout&gt;\r\n\r\n&lt;/ScrollView&gt;\r\n```\r\n\r\nHere is what I get:\r\n[Phone screenshot][1]\r\n\r\n\r\nI don&#39;t know where to search next so... I rely on you \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/np9N8.png","title":"On multiple fragment transaction, only last one is placed in the first container","body":"<p>I'm trying to place multiple graphs in a Fragment. So I have some FrameLayout container in a LinearLayout, in the main fragment.</p>\n<p>When I make the transaction of all my GraphWidgetFragment in their container, the result I get is the last GraphWidgetFragment instance is in the container intented for first graph.</p>\n<p>Also, all other containers are filled with default GraphWidgetFragment, but it seems that those ones don't even pass through onCreateView/onResume etc because I'm updating the TextView in it and the text displayed is the original one (set in xml).</p>\n<p>I know all my graph instances are existing somewhere because I can access them and get values put at construction, but except the last one, others are not visible.</p>\n<p>I replaced GraphFragment with a simple BlankFragment to make it easier to understand and debug.</p>\n<ul>\n<li>I put onClickListener on FrameLayout containers, so I know that each container is at the right place.</li>\n<li>I tryed to move transaction to onViewCreated() but same result. I tryed to do commit()/commitNow()/commitNowAllowingStateLoss() between all transaction, executePendingTransaction(), setReorderingAllowed(), still the same result as sending all in one commit.</li>\n<li>Fragments are not replaced/superposed in same container, I tried using add() instead of replace() and set transparent colors.</li>\n</ul>\n<p>Here is the &quot;main Fragment&quot; code : (onCreateView()</p>\n<pre><code>public class FMGraphsFragment extends Fragment {\n\n    @Override\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n\n        List&lt;Integer&gt; list = Arrays.asList(0, 1, 2, 3, 4, 5);\n\n        if (savedInstanceState == null) {\n            FragmentTransaction transaction = getChildFragmentManager().beginTransaction();\n            transaction.setReorderingAllowed(true);\n            transaction.add(R.id.temp_graph_container, new BlankFragment(0), EXTTEMP.toString());\n            transaction.add(R.id.ltft_graph_container, new BlankFragment(1), LTFT.toString());\n            transaction.add(R.id.stft_graph_container, new BlankFragment(2), STFT.toString());\n            transaction.add(R.id.lambda_graph_container, new BlankFragment(3), LAMBDA.toString());\n            transaction.add(R.id.realtemp_graph_container, new BlankFragment(4), REALTEMP.toString());\n            transaction.add(R.id.dutycycle_graph_container, new BlankFragment(5), DUTYCYCLE.toString());\n            transaction.commit();\n        } else {\n            for(Integer a : list) {\n                Fragment fragment = getChildFragmentManager().findFragmentByTag(LAMBDA.toString());\n                if (fragment instanceof BlankFragment) {\n                    ((BlankFragment)fragment).setA(a);\n                }\n            }\n        }\n    }\n\n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\n        return inflater.inflate(R.layout.view_fragment_graphs, container, false);\n    }\n}\n</code></pre>\n<p>And my futur GraphWidgetFragment (aka Blank) :</p>\n<pre><code>public class BlankFragment extends Fragment {\n\n    private int a;\n\n    public BlankFragment() {\n        // Required empty public constructor\n        a = 999;\n    }\n\n    public BlankFragment(int b) {\n        a = b;\n    }\n\n    public static BlankFragment newInstance(String param1, String param2) {\n        return new BlankFragment();\n    }\n\n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\n                             Bundle savedInstanceState) {\n        return inflater.inflate(R.layout.fragment_blank, container, false);\n    }\n\n    @Override\n    public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {\n        super.onViewCreated(view, savedInstanceState);\n        TextView tv = (TextView) getActivity().findViewById(R.id.texttt);\n        String s = &quot;&quot;;\n        for (int i = 0; i &lt; a; i++) {\n            s = s + &quot; &quot;;\n        }\n        s = s + String.valueOf(a);\n        tv.setText(s);\n    }\n\n    public void setA(int a) {\n        this.a = a;\n    }\n\n    public int getA() {\n        return a;\n    }\n}\n</code></pre>\n<p>The main fragment xml:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;ScrollView xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:orientation=&quot;vertical&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:layout_margin=&quot;@dimen/margin_fine&quot;\n    tools:context=&quot;.ui.graph.FMGraphsFragment&quot;&gt;\n\n    &lt;LinearLayout\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:orientation=&quot;vertical&quot;&gt;\n\n        &lt;FrameLayout\n            android:id=&quot;@+id/temp_graph_container&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;@dimen/graph_height&quot;\n            android:layout_margin=&quot;@dimen/margin_fine&quot;&gt;\n        &lt;/FrameLayout &gt;\n\n        &lt;FrameLayout\n            android:id=&quot;@+id/ltft_graph_container&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;@dimen/graph_height&quot;\n            android:layout_margin=&quot;@dimen/margin_fine&quot;&gt;\n        &lt;/FrameLayout&gt;\n\n        &lt;FrameLayout\n            android:id=&quot;@+id/stft_graph_container&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;@dimen/graph_height&quot;\n            android:layout_margin=&quot;@dimen/margin_fine&quot;&gt;\n        &lt;/FrameLayout&gt;\n\n        &lt;FrameLayout\n            android:id=&quot;@+id/lambda_graph_container&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;@dimen/graph_height&quot;\n            android:layout_margin=&quot;@dimen/margin_fine&quot;&gt;\n        &lt;/FrameLayout&gt;\n\n        &lt;FrameLayout\n            android:id=&quot;@+id/realtemp_graph_container&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;@dimen/graph_height&quot;\n            android:layout_margin=&quot;@dimen/margin_fine&quot;&gt;\n        &lt;/FrameLayout&gt;\n\n        &lt;FrameLayout\n            android:id=&quot;@+id/dutycycle_graph_container&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;@dimen/graph_height&quot;\n            android:layout_margin=&quot;@dimen/margin_fine&quot;&gt;\n        &lt;/FrameLayout&gt;\n\n        &lt;FrameLayout\n            android:id=&quot;@+id/dummy&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;50dp&quot;&gt;\n        &lt;/FrameLayout&gt;\n\n    &lt;/LinearLayout&gt;\n\n&lt;/ScrollView&gt;\n</code></pre>\n<p>Here is what I get:\n<a href=\"https://i.stack.imgur.com/np9N8.png\" rel=\"nofollow noreferrer\">Phone screenshot</a></p>\n<p>I don't know where to search next so... I rely on you</p>\n"},{"tags":["java","lambda"],"answers":[{"tags":[],"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645299934,"creation_date":1645299934,"answer_id":71188583,"question_id":71188491,"body_markdown":"Youre on the right track.  Try something like:\r\n\r\n    public record MenuOption(String label,\r\n                             String text,\r\n                             Runnable action) {\r\n        // Deliberately empty.\r\n    }\r\n\r\nYou can, as you suspected, construct them with lambdas:\r\n\r\n    MenuOption printOption = new MenuOption(\r\n        &quot;Print&quot;,\r\n        &quot;Send formatted data to a printer&quot;,\r\n        () -&gt; printData());\r\n\r\n    MenuOption exitOption = new MenuOption(\r\n        &quot;Exit&quot;,\r\n        &quot;Close application&quot;,\r\n        () -&gt; System.exit(0));\r\n\r\nIf youre stuck with an older version of Java, you can just make a regular class which is equivalent to a record:\r\n\r\n    public class MenuOption {\r\n        private String label;\r\n        private String text;\r\n        private Runnable action;\r\n\r\n        public MenuOption(String label,\r\n                          String text,\r\n                          Runnable action) {\r\n            this.label = label;\r\n            this.text = text;\r\n            this.action = action;\r\n        }\r\n\r\n        public String getLabel() {\r\n            return label;\r\n        }\r\n\r\n        public String getText() {\r\n            return text;\r\n        }\r\n\r\n        public Runnable getAction() {\r\n            return action;\r\n        }\r\n    }\r\n","title":"Storing/executing code fragments as variables in Java","body":"<p>Youre on the right track.  Try something like:</p>\n<pre><code>public record MenuOption(String label,\n                         String text,\n                         Runnable action) {\n    // Deliberately empty.\n}\n</code></pre>\n<p>You can, as you suspected, construct them with lambdas:</p>\n<pre><code>MenuOption printOption = new MenuOption(\n    &quot;Print&quot;,\n    &quot;Send formatted data to a printer&quot;,\n    () -&gt; printData());\n\nMenuOption exitOption = new MenuOption(\n    &quot;Exit&quot;,\n    &quot;Close application&quot;,\n    () -&gt; System.exit(0));\n</code></pre>\n<p>If youre stuck with an older version of Java, you can just make a regular class which is equivalent to a record:</p>\n<pre><code>public class MenuOption {\n    private String label;\n    private String text;\n    private Runnable action;\n\n    public MenuOption(String label,\n                      String text,\n                      Runnable action) {\n        this.label = label;\n        this.text = text;\n        this.action = action;\n    }\n\n    public String getLabel() {\n        return label;\n    }\n\n    public String getText() {\n        return text;\n    }\n\n    public Runnable getAction() {\n        return action;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2182934,"reputation":2525,"user_id":1932011,"accept_rate":71,"display_name":"JayC667"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1645300448,"creation_date":1645300448,"answer_id":71188649,"question_id":71188491,"body_markdown":"This is the classic Java 8+ version, fully implemented.\r\n\r\n    package stackoverflow;\r\n    \r\n    import java.io.BufferedReader;\r\n    import java.io.IOException;\r\n    import java.io.InputStreamReader;\r\n    import java.util.ArrayList;\r\n    import java.util.Objects;\r\n    \r\n    public class ConsoleMenu {\r\n    \r\n    \tstatic public class MenuOption {\r\n    \t\tpublic final String\t\tlabel;\r\n    \t\tpublic final String\t\ttext;\r\n    \t\tpublic final Runnable\tcode;\r\n    \t\tpublic MenuOption(final String pLabel, final String pText, final Runnable pLambda) {\r\n    \t\t\tlabel = pLabel;\r\n    \t\t\ttext = pText;\r\n    \t\t\tcode = pLambda;\r\n    \t\t}\r\n    \t}\r\n    \r\n    \r\n    \r\n    \tpublic static void main(final String[] args) throws IOException {\r\n    \t\tfinal ArrayList&lt;MenuOption&gt; options = new ArrayList&lt;&gt;();\r\n    \t\toptions.add(new MenuOption(&quot;Option A&quot;, &quot;A&quot;, () -&gt; System.out.println(&quot;Hello this is A&quot;)));\r\n    \t\toptions.add(new MenuOption(&quot;Option B&quot;, &quot;B&quot;, () -&gt; {\r\n    \t\t\tSystem.out.print(&quot;Hello this is B&quot;);\r\n    \t\t\tSystem.out.println(&quot; in multiple lines Lambda&quot;);\r\n    \t\t}));\r\n    \r\n    \r\n    \t\tSystem.out.println(&quot; - - - Menu - - - &quot;);\r\n    \t\tfor (final MenuOption mo : options) {\r\n    \t\t\tSystem.out.println(&quot;\\t&quot; + mo.label + &quot;\\t&quot; + mo.text);\r\n    \t\t}\r\n    \t\tSystem.out.println(&quot;Enter your choice:&quot;);\r\n    \t\ttry (final BufferedReader br = new BufferedReader(new InputStreamReader(System.in));) {\r\n    \t\t\tfinal String line = br.readLine().toLowerCase();\r\n    \t\t\tfor (final MenuOption mo : options) {\r\n    \t\t\t\tif (Objects.equals(line, mo.text.toLowerCase())) {\r\n    \t\t\t\t\tSystem.out.println(&quot;You chose &quot; + mo.label);\r\n    \t\t\t\t\tmo.code.run();\r\n    \t\t\t\t\tbreak;\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n    \t\tSystem.out.println(&quot;All done.&quot;);\r\n    \t}\r\n    \r\n    }\r\n\r\n","title":"Storing/executing code fragments as variables in Java","body":"<p>This is the classic Java 8+ version, fully implemented.</p>\n<pre><code>package stackoverflow;\n\nimport java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.util.ArrayList;\nimport java.util.Objects;\n\npublic class ConsoleMenu {\n\n    static public class MenuOption {\n        public final String     label;\n        public final String     text;\n        public final Runnable   code;\n        public MenuOption(final String pLabel, final String pText, final Runnable pLambda) {\n            label = pLabel;\n            text = pText;\n            code = pLambda;\n        }\n    }\n\n\n\n    public static void main(final String[] args) throws IOException {\n        final ArrayList&lt;MenuOption&gt; options = new ArrayList&lt;&gt;();\n        options.add(new MenuOption(&quot;Option A&quot;, &quot;A&quot;, () -&gt; System.out.println(&quot;Hello this is A&quot;)));\n        options.add(new MenuOption(&quot;Option B&quot;, &quot;B&quot;, () -&gt; {\n            System.out.print(&quot;Hello this is B&quot;);\n            System.out.println(&quot; in multiple lines Lambda&quot;);\n        }));\n\n\n        System.out.println(&quot; - - - Menu - - - &quot;);\n        for (final MenuOption mo : options) {\n            System.out.println(&quot;\\t&quot; + mo.label + &quot;\\t&quot; + mo.text);\n        }\n        System.out.println(&quot;Enter your choice:&quot;);\n        try (final BufferedReader br = new BufferedReader(new InputStreamReader(System.in));) {\n            final String line = br.readLine().toLowerCase();\n            for (final MenuOption mo : options) {\n                if (Objects.equals(line, mo.text.toLowerCase())) {\n                    System.out.println(&quot;You chose &quot; + mo.label);\n                    mo.code.run();\n                    break;\n                }\n            }\n        }\n\n        System.out.println(&quot;All done.&quot;);\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":15872922,"reputation":17,"user_id":11453037,"display_name":"Mckay Holmes"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71188649,"answer_count":2,"score":0,"last_activity_date":1645300448,"creation_date":1645299170,"question_id":71188491,"body_markdown":"I&#39;m trying to create a console based Menu class. I want the class to contain an array (named options) of MenuOption objects which each have a label (String), text (String), and code (TBD) property. The idea is that I want users to input a string and the menu will execute the relevant code with something close to the following:\r\n\r\nfor (MenuOption option: options) &lt;br&gt;\r\n{&lt;br&gt;\r\nif (input.equals(option.label)) execute option.code;&lt;br&gt;\r\n}\r\n\r\nI feel like theres probably a way to do this using lambda functions, but I&#39;ve been hitting dead ends for the last couple of hours. Any suggestions are appreciated.","title":"Storing/executing code fragments as variables in Java","body":"<p>I'm trying to create a console based Menu class. I want the class to contain an array (named options) of MenuOption objects which each have a label (String), text (String), and code (TBD) property. The idea is that I want users to input a string and the menu will execute the relevant code with something close to the following:</p>\n<p>for (MenuOption option: options) <br>\n{<br>\nif (input.equals(option.label)) execute option.code;<br>\n}</p>\n<p>I feel like theres probably a way to do this using lambda functions, but I've been hitting dead ends for the last couple of hours. Any suggestions are appreciated.</p>\n"},{"tags":["java","android-studio","android-event","android-gesture"],"answers":[{"tags":[],"owner":{"account_id":2622541,"reputation":3681,"user_id":2270271,"display_name":"cyroxis"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1465411514,"creation_date":1465411514,"answer_id":37710497,"question_id":37709883,"body_markdown":"From the documentation of [GestureDetector.SimpleOnGestureListener][1]\r\n\r\n&gt; A convenience class to extend when you only want to listen for a\r\n&gt; subset of all the gestures. This implements all methods in the\r\n&gt; GestureDetector.OnGestureListener,\r\n&gt; GestureDetector.OnDoubleTapListener, and\r\n&gt; GestureDetector.OnContextClickListener but does nothing and return\r\n&gt; false for all applicable methods.\r\n\r\nIf you only want to implement a few of the method (not all of them) `SimpleOnGestureListener` has default implementation that do nothing. This prevents your code from being cluttered by multiple methods that do nothing. From a functionality standpoint it does not matter if you use `SimpleOnGestureListener` or implement the interfaces directly.\r\n\r\n**Source Code**\r\n\r\n    public static class SimpleOnGestureListener implements OnGestureListener, OnDoubleTapListener,\r\n            OnContextClickListener {\r\n\r\n        public boolean onSingleTapUp(MotionEvent e) {\r\n            return false;\r\n        }\r\n\r\n        public void onLongPress(MotionEvent e) {\r\n        }\r\n\r\n        public boolean onScroll(MotionEvent e1, MotionEvent e2,\r\n                float distanceX, float distanceY) {\r\n            return false;\r\n        }\r\n\r\n        public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,\r\n                float velocityY) {\r\n            return false;\r\n        }\r\n\r\n        public void onShowPress(MotionEvent e) {\r\n        }\r\n\r\n        public boolean onDown(MotionEvent e) {\r\n            return false;\r\n        }\r\n\r\n        public boolean onDoubleTap(MotionEvent e) {\r\n            return false;\r\n        }\r\n\r\n        public boolean onDoubleTapEvent(MotionEvent e) {\r\n            return false;\r\n        }\r\n\r\n        public boolean onSingleTapConfirmed(MotionEvent e) {\r\n            return false;\r\n        }\r\n\r\n        public boolean onContextClick(MotionEvent e) {\r\n            return false;\r\n        }\r\n    }\r\n\r\n \r\n\r\n  [1]: https://developer.android.com/reference/android/view/GestureDetector.SimpleOnGestureListener.html","title":"Android Development - GestureDetector.OnGestureListener or GestureDetector.SimpleOnGestureListener","body":"<p>From the documentation of <a href=\"https://developer.android.com/reference/android/view/GestureDetector.SimpleOnGestureListener.html\" rel=\"nofollow\">GestureDetector.SimpleOnGestureListener</a></p>\n\n<blockquote>\n  <p>A convenience class to extend when you only want to listen for a\n  subset of all the gestures. This implements all methods in the\n  GestureDetector.OnGestureListener,\n  GestureDetector.OnDoubleTapListener, and\n  GestureDetector.OnContextClickListener but does nothing and return\n  false for all applicable methods.</p>\n</blockquote>\n\n<p>If you only want to implement a few of the method (not all of them) <code>SimpleOnGestureListener</code> has default implementation that do nothing. This prevents your code from being cluttered by multiple methods that do nothing. From a functionality standpoint it does not matter if you use <code>SimpleOnGestureListener</code> or implement the interfaces directly.</p>\n\n<p><strong>Source Code</strong></p>\n\n<pre><code>public static class SimpleOnGestureListener implements OnGestureListener, OnDoubleTapListener,\n        OnContextClickListener {\n\n    public boolean onSingleTapUp(MotionEvent e) {\n        return false;\n    }\n\n    public void onLongPress(MotionEvent e) {\n    }\n\n    public boolean onScroll(MotionEvent e1, MotionEvent e2,\n            float distanceX, float distanceY) {\n        return false;\n    }\n\n    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,\n            float velocityY) {\n        return false;\n    }\n\n    public void onShowPress(MotionEvent e) {\n    }\n\n    public boolean onDown(MotionEvent e) {\n        return false;\n    }\n\n    public boolean onDoubleTap(MotionEvent e) {\n        return false;\n    }\n\n    public boolean onDoubleTapEvent(MotionEvent e) {\n        return false;\n    }\n\n    public boolean onSingleTapConfirmed(MotionEvent e) {\n        return false;\n    }\n\n    public boolean onContextClick(MotionEvent e) {\n        return false;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":263656,"reputation":1,"user_id":549372,"accept_rate":100,"display_name":"Martin Zeitler"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645299882,"creation_date":1645299882,"answer_id":71188574,"question_id":37709883,"body_markdown":"The implementation should look alike this:\r\n\r\n\r\n    public class MyOnGestureListener implements\r\n            GestureOverlayView.OnGestureListener,\r\n            GestureDetector.OnDoubleTapListener,\r\n            GestureDetector.OnContextClickListener {\r\n        @Override public boolean onDoubleTap(MotionEvent event) {return false;}\r\n        @Override public boolean onDoubleTapEvent(MotionEvent event) {return false;}\r\n        @Override public boolean onSingleTapConfirmed(MotionEvent event) {return false;}\r\n        @Override public boolean onContextClick(MotionEvent event) {return false;}\r\n        @Override public void onGestureStarted(GestureOverlayView overlay, MotionEvent event) {}\r\n        @Override public void onGesture(GestureOverlayView overlay, MotionEvent event) {}\r\n        @Override public void onGestureEnded(GestureOverlayView overlay, MotionEvent event) {}\r\n        @Override public void onGestureCancelled(GestureOverlayView overlay, MotionEvent event) {}\r\n    }\r\n","title":"Android Development - GestureDetector.OnGestureListener or GestureDetector.SimpleOnGestureListener","body":"<p>The implementation should look alike this:</p>\n<pre><code>public class MyOnGestureListener implements\n        GestureOverlayView.OnGestureListener,\n        GestureDetector.OnDoubleTapListener,\n        GestureDetector.OnContextClickListener {\n    @Override public boolean onDoubleTap(MotionEvent event) {return false;}\n    @Override public boolean onDoubleTapEvent(MotionEvent event) {return false;}\n    @Override public boolean onSingleTapConfirmed(MotionEvent event) {return false;}\n    @Override public boolean onContextClick(MotionEvent event) {return false;}\n    @Override public void onGestureStarted(GestureOverlayView overlay, MotionEvent event) {}\n    @Override public void onGesture(GestureOverlayView overlay, MotionEvent event) {}\n    @Override public void onGestureEnded(GestureOverlayView overlay, MotionEvent event) {}\n    @Override public void onGestureCancelled(GestureOverlayView overlay, MotionEvent event) {}\n}\n</code></pre>\n"}],"owner":{"account_id":7463612,"reputation":344,"user_id":5674061,"accept_rate":100,"display_name":"Eddy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1495,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":37710497,"answer_count":2,"score":3,"last_activity_date":1645299882,"creation_date":1465409463,"question_id":37709883,"body_markdown":"I&#39;m working on simple code to detect all the gesture like fling, scroll, etc and was going to implement the interface `GestureDetector.OnGestureListener` for overriding its methods but I got to know that same could be done with `GestureDetector.SimpleOnGestureListener`. As far as I know the `SimpleOnGestureListener` is a class which have implemented `OnGestureListener`, `OnDoubleTapListener` and `OnContextClickListener` interfaces and if I&#39;m wrong correct me.\r\n\r\nOn Android Developer website page it is written - \r\n\r\n&gt; If you only want to process a few gestures, you can extend\r\n&gt; `GestureDetector.SimpleOnGestureListener` instead of implementing the\r\n&gt; `GestureDetector.OnGestureListener` interface. \r\n&gt; \r\n&gt; `GestureDetector.SimpleOnGestureListener` provides an implementation\r\n&gt; for all of the `on&lt;TouchEvent&gt;` methods by returning false for all of\r\n&gt; them. Thus you can override only the methods you care about. For\r\n&gt; example, the snippet below creates a class that extends\r\n&gt; `GestureDetector.SimpleOnGestureListener` and overrides `onFling()`\r\n&gt; and `onDown()`.\r\n\r\nI got few questions here,\r\n\r\n1) Why to use `GestureDetector.SimpleOnGestureListener` if we can implement `GestureDetector.OnGestureListener` and other interfaces for using those methods too?\r\n\r\n2) Is `GestureDetector.SimpleOnGestureListener` same with no difference? It is made to simplify coding?","title":"Android Development - GestureDetector.OnGestureListener or GestureDetector.SimpleOnGestureListener","body":"<p>I'm working on simple code to detect all the gesture like fling, scroll, etc and was going to implement the interface <code>GestureDetector.OnGestureListener</code> for overriding its methods but I got to know that same could be done with <code>GestureDetector.SimpleOnGestureListener</code>. As far as I know the <code>SimpleOnGestureListener</code> is a class which have implemented <code>OnGestureListener</code>, <code>OnDoubleTapListener</code> and <code>OnContextClickListener</code> interfaces and if I'm wrong correct me.</p>\n\n<p>On Android Developer website page it is written - </p>\n\n<blockquote>\n  <p>If you only want to process a few gestures, you can extend\n  <code>GestureDetector.SimpleOnGestureListener</code> instead of implementing the\n  <code>GestureDetector.OnGestureListener</code> interface. </p>\n  \n  <p><code>GestureDetector.SimpleOnGestureListener</code> provides an implementation\n  for all of the <code>on&lt;TouchEvent&gt;</code> methods by returning false for all of\n  them. Thus you can override only the methods you care about. For\n  example, the snippet below creates a class that extends\n  <code>GestureDetector.SimpleOnGestureListener</code> and overrides <code>onFling()</code>\n  and <code>onDown()</code>.</p>\n</blockquote>\n\n<p>I got few questions here,</p>\n\n<p>1) Why to use <code>GestureDetector.SimpleOnGestureListener</code> if we can implement <code>GestureDetector.OnGestureListener</code> and other interfaces for using those methods too?</p>\n\n<p>2) Is <code>GestureDetector.SimpleOnGestureListener</code> same with no difference? It is made to simplify coding?</p>\n"},{"tags":["java","oop","inheritance"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1645066338,"post_id":71151874,"comment_id":125774161,"body_markdown":"What&#39;s the problem you&#39;re trying to solve?","body":"What&#39;s the problem you&#39;re trying to solve?"},{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":2,"creation_date":1645066385,"post_id":71151874,"comment_id":125774164,"body_markdown":"Have a BasePerson class which does not contain what you don&#39;t want,  Both Person and Jeff can inherit from BasePerson","body":"Have a BasePerson class which does not contain what you don&#39;t want,  Both Person and Jeff can inherit from BasePerson"},{"owner":{"account_id":2518215,"reputation":355,"user_id":2189108,"accept_rate":80,"display_name":"mdong"},"score":1,"creation_date":1645067713,"post_id":71151874,"comment_id":125774383,"body_markdown":"Part of the problem is that the factory methods are going to have similar logic in them and I&#39;d like to somehow share that as well. Should shared logic between factory methods be spun off into another class as well?","body":"Part of the problem is that the factory methods are going to have similar logic in them and I&#39;d like to somehow share that as well. Should shared logic between factory methods be spun off into another class as well?"},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1645067777,"post_id":71151874,"comment_id":125774394,"body_markdown":"You can create a factory class instead of using static methods.","body":"You can create a factory class instead of using static methods."},{"owner":{"account_id":1809965,"reputation":36736,"user_id":1646240,"accept_rate":91,"display_name":"StepUp"},"score":0,"creation_date":1645628737,"post_id":71151874,"comment_id":125923515,"body_markdown":"Feel free to ask any question. If my reply helps then you can upvote or mark it as an answer to simplify the future search of other users. Pelase, see [How does accepting an answer work?](https://meta.stackexchange.com/questions/5234/how-does-accepting-an-answer-work)","body":"Feel free to ask any question. If my reply helps then you can upvote or mark it as an answer to simplify the future search of other users. Pelase, see <a href=\"https://meta.stackexchange.com/questions/5234/how-does-accepting-an-answer-work\">How does accepting an answer work?</a>"}],"answers":[{"tags":[],"owner":{"account_id":1809965,"reputation":36736,"user_id":1646240,"accept_rate":91,"display_name":"StepUp"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645299507,"creation_date":1645299507,"answer_id":71188531,"question_id":71151874,"body_markdown":"I am trying to use inheritance when derived classes should have the same behavior like base class. [So the public methods should be the same in base and derived classes.][1] So, abstract class should define behavior, and the derived classes should implement that behavior. \r\n\r\nBut, there is no the same behavior in your example classes. So we cannot use inheritance here. However, we can improve code by reducing duplication of code of conversion to meters:\r\n\r\n    public class Conversion\r\n    {\r\n        public double FromCentimetersToMeters(double centimeters) \r\n        {\r\n            return centimeters / 100.0;\r\n        }\r\n\r\n\r\n        public double FromInchesToMeters(double inches)\r\n        {\r\n            return inches / 3.28;\r\n        }\r\n    }\r\n\r\nand then `Person` will be looked like this:\r\n\r\n    public class Person\r\n    {\r\n        public string Name { get; private set; }\r\n\r\n        public double Height { get; private set; }\r\n\r\n\r\n        Conversion conversion = new Conversion();\r\n\r\n\r\n        public Person(string name, double height)\r\n        {\r\n            Name = name;\r\n            Height = height;\r\n        }\r\n\r\n\r\n        public Person FromNameAndCentimeters(string name, double centimeters)\r\n        {\r\n            return new Person(name, conversion.FromCentimetersToMeters(centimeters));\r\n        }\r\n\r\n        \r\n        public Person FromNameAndInches(string name, double inches)\r\n        {\r\n            return new Person(name, conversion.FromInchesToMeters(inches));\r\n        }\r\n    }\r\n\r\nand `Jeff` class:\r\n\r\n    public class Jeff\r\n    {\r\n        public string Name { get; set; } = &quot;Jeff&quot;;\r\n\r\n\r\n        public double Height { get; private set; }\r\n\r\n\r\n        Conversion conversion = new Conversion();\r\n\r\n\r\n        public Jeff(double height)\r\n        {\r\n            Height = height;\r\n        }\r\n\r\n\r\n        public Jeff FromCentimeters(double centimeters)\r\n        {\r\n            return new Jeff(conversion.FromCentimetersToMeters(centimeters));\r\n        }\r\n\r\n\r\n        public Jeff FromInches(double inches)\r\n        {\r\n            return new Jeff(conversion.FromInchesToMeters(inches));\r\n        }\r\n    }\r\n\r\nAnd then you can easily write unit tests for `Conversion` class to check whether the logic of conversion is correct.\r\n\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/49002/prefer-composition-over-inheritance/53354#53354","title":"How should 2 similar static factory classes be related?","body":"<p>I am trying to use inheritance when derived classes should have the same behavior like base class. <a href=\"https://stackoverflow.com/questions/49002/prefer-composition-over-inheritance/53354#53354\">So the public methods should be the same in base and derived classes.</a> So, abstract class should define behavior, and the derived classes should implement that behavior.</p>\n<p>But, there is no the same behavior in your example classes. So we cannot use inheritance here. However, we can improve code by reducing duplication of code of conversion to meters:</p>\n<pre><code>public class Conversion\n{\n    public double FromCentimetersToMeters(double centimeters) \n    {\n        return centimeters / 100.0;\n    }\n\n\n    public double FromInchesToMeters(double inches)\n    {\n        return inches / 3.28;\n    }\n}\n</code></pre>\n<p>and then <code>Person</code> will be looked like this:</p>\n<pre><code>public class Person\n{\n    public string Name { get; private set; }\n\n    public double Height { get; private set; }\n\n\n    Conversion conversion = new Conversion();\n\n\n    public Person(string name, double height)\n    {\n        Name = name;\n        Height = height;\n    }\n\n\n    public Person FromNameAndCentimeters(string name, double centimeters)\n    {\n        return new Person(name, conversion.FromCentimetersToMeters(centimeters));\n    }\n\n    \n    public Person FromNameAndInches(string name, double inches)\n    {\n        return new Person(name, conversion.FromInchesToMeters(inches));\n    }\n}\n</code></pre>\n<p>and <code>Jeff</code> class:</p>\n<pre><code>public class Jeff\n{\n    public string Name { get; set; } = &quot;Jeff&quot;;\n\n\n    public double Height { get; private set; }\n\n\n    Conversion conversion = new Conversion();\n\n\n    public Jeff(double height)\n    {\n        Height = height;\n    }\n\n\n    public Jeff FromCentimeters(double centimeters)\n    {\n        return new Jeff(conversion.FromCentimetersToMeters(centimeters));\n    }\n\n\n    public Jeff FromInches(double inches)\n    {\n        return new Jeff(conversion.FromInchesToMeters(inches));\n    }\n}\n</code></pre>\n<p>And then you can easily write unit tests for <code>Conversion</code> class to check whether the logic of conversion is correct.</p>\n"}],"owner":{"account_id":2518215,"reputation":355,"user_id":2189108,"accept_rate":80,"display_name":"mdong"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1645299507,"creation_date":1645066110,"question_id":71151874,"body_markdown":"Say I have a class for `Person` which I want to implement as a static factory:\r\n\r\n```\r\npublic class Person {\r\n    private String name;\r\n    private Double heightInMeters;\r\n    \r\n    private Person(String name, Double meters) {\r\n      this.name = name;\r\n      this.heightInMeters = meters;\r\n    }\r\n  \r\n    public static Person fromNameAndCentimeters(String name, Double centimeters) {\r\n      return new Person(name, centimeters/100.0);\r\n    }\r\n  \r\n    public static Person fromNameAndInches(String name, Double inches) {\r\n      return new Person(name, inches/3.28);\r\n    }\r\n  \r\n    public string toString() {\r\n      return &quot;My name is &quot; + name + &quot; and my height in meters is &quot; + heightInMeters;\r\n    }\r\n}\r\n```\r\n\r\nBut I also have a nearly identical class `Jeff` for which I want to have slightly different factory methods:\r\n\r\n```\r\npublic class Jeff {\r\n    public static final JEFF_NAME = &quot;Jeff&quot;;\r\n\r\n    private String name = JEFF_NAME;\r\n    private Double heightInMeters;\r\n    \r\n    private Jeff(String name, Double meters) {\r\n      this.name = name;\r\n      this.heightInMeters = meters;\r\n    }\r\n  \r\n    public static Jeff fromCentimeters(Double centimeters) {\r\n      return new Jeff(name, centimeters/100.0);\r\n    }\r\n  \r\n    public static Jeff fromInches(Double inches) {\r\n      return new Jeff(name, inches/3.28);\r\n    }\r\n  \r\n    public String toString() {\r\n      return &quot;My name is &quot; + name + &quot; and my height in meters is &quot; + heightInMeters;\r\n    }\r\n}\r\n```\r\n\r\nClearly, `Jeff` and `Person` are related, and I want to do something like\r\n\r\n```\r\npublic printIntroduction(Object somebody) {\r\n    System.out.println(somebody);\r\n}\r\nprintIntroduction(Person.fromNameAndInches(&quot;Bob&quot;, 65))\r\nprintIntroduction(Jeff.fromInches(60))\r\n```\r\n\r\nMy first thought was to have `Jeff` inherit from `Person` - but child classes inherit static methods, and I don&#39;t want `Jeff` to have `fromNameAndInches`. What&#39;s the best way to go about this?","title":"How should 2 similar static factory classes be related?","body":"<p>Say I have a class for <code>Person</code> which I want to implement as a static factory:</p>\n<pre><code>public class Person {\n    private String name;\n    private Double heightInMeters;\n    \n    private Person(String name, Double meters) {\n      this.name = name;\n      this.heightInMeters = meters;\n    }\n  \n    public static Person fromNameAndCentimeters(String name, Double centimeters) {\n      return new Person(name, centimeters/100.0);\n    }\n  \n    public static Person fromNameAndInches(String name, Double inches) {\n      return new Person(name, inches/3.28);\n    }\n  \n    public string toString() {\n      return &quot;My name is &quot; + name + &quot; and my height in meters is &quot; + heightInMeters;\n    }\n}\n</code></pre>\n<p>But I also have a nearly identical class <code>Jeff</code> for which I want to have slightly different factory methods:</p>\n<pre><code>public class Jeff {\n    public static final JEFF_NAME = &quot;Jeff&quot;;\n\n    private String name = JEFF_NAME;\n    private Double heightInMeters;\n    \n    private Jeff(String name, Double meters) {\n      this.name = name;\n      this.heightInMeters = meters;\n    }\n  \n    public static Jeff fromCentimeters(Double centimeters) {\n      return new Jeff(name, centimeters/100.0);\n    }\n  \n    public static Jeff fromInches(Double inches) {\n      return new Jeff(name, inches/3.28);\n    }\n  \n    public String toString() {\n      return &quot;My name is &quot; + name + &quot; and my height in meters is &quot; + heightInMeters;\n    }\n}\n</code></pre>\n<p>Clearly, <code>Jeff</code> and <code>Person</code> are related, and I want to do something like</p>\n<pre><code>public printIntroduction(Object somebody) {\n    System.out.println(somebody);\n}\nprintIntroduction(Person.fromNameAndInches(&quot;Bob&quot;, 65))\nprintIntroduction(Jeff.fromInches(60))\n</code></pre>\n<p>My first thought was to have <code>Jeff</code> inherit from <code>Person</code> - but child classes inherit static methods, and I don't want <code>Jeff</code> to have <code>fromNameAndInches</code>. What's the best way to go about this?</p>\n"},{"tags":["java","string","selection"],"comments":[{"owner":{"account_id":960281,"reputation":388,"user_id":9387519,"display_name":"Five"},"score":0,"creation_date":1645298202,"post_id":71188238,"comment_id":125835766,"body_markdown":"You should check DecimalFormat, or how to print float numbers in Java with String.format. If you are interested in this particular solution, I think you should consider the edge cases in your while loop.","body":"You should check DecimalFormat, or how to print float numbers in Java with String.format. If you are interested in this particular solution, I think you should consider the edge cases in your while loop."}],"answers":[{"tags":[],"owner":{"account_id":23685228,"reputation":1103,"user_id":17710270,"display_name":"passer-by"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1645298121,"creation_date":1645298121,"answer_id":71188337,"question_id":71188238,"body_markdown":"Multiply by 10,000 (100 for percentage, 100 for the two decimal places), truncate to integer, divide by 100 (to get back to percentage).\r\n\r\nWriting it out one step at a time, for clarity of exposition:\r\n\r\n    Double n = input.nextDouble();\r\n    int i = (int)(n * 10_000);\r\n    Double pc = i / 100.0;\r\n    System.out.printf(&quot;%.2f\\n&quot;, pc);\r\n\r\n\r\n","title":"Removing all but the first two numbers in a decimal","body":"<p>Multiply by 10,000 (100 for percentage, 100 for the two decimal places), truncate to integer, divide by 100 (to get back to percentage).</p>\n<p>Writing it out one step at a time, for clarity of exposition:</p>\n<pre><code>Double n = input.nextDouble();\nint i = (int)(n * 10_000);\nDouble pc = i / 100.0;\nSystem.out.printf(&quot;%.2f\\n&quot;, pc);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645298942,"creation_date":1645298942,"answer_id":71188447,"question_id":71188238,"body_markdown":"You have the number as a String in the variable `toString`. Use regex to trim all characters after the 2&lt;sup&gt;nd&lt;/sup&gt; decimal (if any exist).\r\n\r\nIts a one-liner:\r\n\r\n    toString = toString.replaceAll(&quot;(?&lt;=\\\\...).*&quot;, &quot;&quot;);\r\n\r\nOr just print it directly:\r\n\r\n    System.out.println(toString.replaceAll(&quot;(?&lt;=\\\\...).*&quot;, &quot;&quot;));\r\n","title":"Removing all but the first two numbers in a decimal","body":"<p>You have the number as a String in the variable <code>toString</code>. Use regex to trim all characters after the 2<sup>nd</sup> decimal (if any exist).</p>\n<p>Its a one-liner:</p>\n<pre><code>toString = toString.replaceAll(&quot;(?&lt;=\\\\...).*&quot;, &quot;&quot;);\n</code></pre>\n<p>Or just print it directly:</p>\n<pre><code>System.out.println(toString.replaceAll(&quot;(?&lt;=\\\\...).*&quot;, &quot;&quot;));\n</code></pre>\n"}],"owner":{"account_id":22885261,"reputation":59,"user_id":17026242,"display_name":"Brosef3053"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":132,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71188337,"answer_count":2,"score":0,"last_activity_date":1645298942,"creation_date":1645297519,"question_id":71188238,"body_markdown":"I&#39;m trying to make a program that converts a number the user inputs into a percentage. Once converted, I want to keep the first two numbers after the decimal, but without rounding off the number. For example, inputting 1.23456 would result in 123.45. \r\n\r\nMy line of thinking was that I could take the input, separate the string into before and after the decimal place, and from there create a loop that removes the last digits until it has at most 2 decimal places. My issue is that whenever I create something that would have an output greater than 9 for the decimal, I get the error: Exception in thread &quot;main&quot; java.lang.StringIndexOutOfBoundsException: begin 0, end -1, length 0, so I can only get decimals to the tenths place at the moment.\r\n\r\nMy code:\r\n\r\n    import java.util.Scanner;\r\n    public class percentage {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\ttry (// TODO Auto-generated method stub\r\n\t\tScanner x = new Scanner(System.in)) {\r\n\t\t\tSystem.out.println(&quot;Please input a number with a decimal to be converted into a percentage: &quot;);\r\n\t\t\tString numberAsString = x.next();\r\n\t\t\tdouble number = Double.parseDouble(numberAsString);\r\n\t\t\t\r\n\t\t\tdouble percentage = (number * 100);\t\t\t\r\n\t\t\t\r\n\t\t\tString toString = Double.toString(percentage);\r\n\t\t\t\r\n\t\t\tString[] parts = toString.split(&quot;[.]&quot;);\r\n\t\t\t\r\n\t\t\tString integer = parts[0];\r\n\t\t\tString decimal = parts[1];\r\n\t\t\t\r\n\t\t\tint length = decimal.length();\r\n\r\n\t\t\twhile(length&gt;2) {\r\n\t\t\t\tdecimal = decimal.substring(0,decimal.length()-1);\r\n\t\t\t}\r\n\t\t\tSystem.out.println(&quot;decimal is &quot; + decimal);\r\n\t\t\tSystem.out.println(&quot;integer is &quot; + integer);\r\n\t\t\t}\r\n\t\t\t//System.out.println(decimal);\r\n\t\t\t\r\n\t\t} \r\n\t}\r\n\r\n\r\n","title":"Removing all but the first two numbers in a decimal","body":"<p>I'm trying to make a program that converts a number the user inputs into a percentage. Once converted, I want to keep the first two numbers after the decimal, but without rounding off the number. For example, inputting 1.23456 would result in 123.45.</p>\n<p>My line of thinking was that I could take the input, separate the string into before and after the decimal place, and from there create a loop that removes the last digits until it has at most 2 decimal places. My issue is that whenever I create something that would have an output greater than 9 for the decimal, I get the error: Exception in thread &quot;main&quot; java.lang.StringIndexOutOfBoundsException: begin 0, end -1, length 0, so I can only get decimals to the tenths place at the moment.</p>\n<p>My code:</p>\n<pre><code>import java.util.Scanner;\npublic class percentage {\n\npublic static void main(String[] args) {\n    try (// TODO Auto-generated method stub\n    Scanner x = new Scanner(System.in)) {\n        System.out.println(&quot;Please input a number with a decimal to be converted into a percentage: &quot;);\n        String numberAsString = x.next();\n        double number = Double.parseDouble(numberAsString);\n        \n        double percentage = (number * 100);         \n        \n        String toString = Double.toString(percentage);\n        \n        String[] parts = toString.split(&quot;[.]&quot;);\n        \n        String integer = parts[0];\n        String decimal = parts[1];\n        \n        int length = decimal.length();\n\n        while(length&gt;2) {\n            decimal = decimal.substring(0,decimal.length()-1);\n        }\n        System.out.println(&quot;decimal is &quot; + decimal);\n        System.out.println(&quot;integer is &quot; + integer);\n        }\n        //System.out.println(decimal);\n        \n    } \n}\n</code></pre>\n"},{"tags":["java","android","mp4","mp4parser","mi"],"answers":[{"tags":[],"owner":{"account_id":16674112,"reputation":233,"user_id":12050970,"display_name":"Nabeel Ahmed"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645298538,"creation_date":1645298538,"answer_id":71188399,"question_id":71080435,"body_markdown":"Use [FFmpeg][1] library and it will do all the job. You just have to provide a Facebook Audio and Video link and the storage path of your directory which you will get through File API. It will download the audio and video and then merge them.\r\n\r\nThis simple command will do all the magic.\r\n\r\n    val cmd = &quot;-i $videoUrl -i  $audioUrl -c:v copy -c:a aac $storagePath&quot;\r\n    FFmpeg.executeAsync(cmd, object: ExecuteCallback())\r\n\r\n  [1]: https://github.com/tanersener/mobile-ffmpeg","title":"Mp4Parser audio video merged output not playing in all devices","body":"<p>Use <a href=\"https://github.com/tanersener/mobile-ffmpeg\" rel=\"nofollow noreferrer\">FFmpeg</a> library and it will do all the job. You just have to provide a Facebook Audio and Video link and the storage path of your directory which you will get through File API. It will download the audio and video and then merge them.</p>\n<p>This simple command will do all the magic.</p>\n<pre><code>val cmd = &quot;-i $videoUrl -i  $audioUrl -c:v copy -c:a aac $storagePath&quot;\nFFmpeg.executeAsync(cmd, object: ExecuteCallback())\n</code></pre>\n"}],"owner":{"account_id":20227381,"reputation":92,"user_id":14834877,"display_name":"Nayab"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":696,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1645298538,"creation_date":1644584039,"question_id":71080435,"body_markdown":"In my android application i am downloading Facebook video and audio separately and merging it in an output file. The reason is Facebook videos URLs have no sound and audio URL is separate.\r\nI have tried using this [mp4Parser][1] for merging audio and video and it works pretty well in most of devices but having issues in Redmi/MI devices when playing from device files.\r\n\r\n**Steps i followed**\r\n- Download NO SOUND Video in mp4 format.\r\n- Download audio in m4a format.\r\n- Merge both files and create an output file with mp4 format.\r\n- After merging is done deleted no sound video and temporary audio.\r\n\r\nBelow is my code\r\n\r\n**Dependencies**\r\n\r\n     implementation &#39;com.iceteck.silicompressorr:silicompressor:2.2.4&#39;\r\n        implementation(&#39;com.googlecode.mp4parser:isoparser:1.0.6&#39;) {\r\n            exclude group: &#39;org.aspectj&#39;, module: &#39;aspectjrt&#39;\r\n        }\r\n\r\n**Merging code**\r\n\r\n      private fun mergeAudioAndVideo(\r\n            id: Int,\r\n            model: DatabaseDownloadItem?,\r\n            file: File?,\r\n            activityInstance: LocaleAwareCompatActivity?\r\n        ) {\r\n            val mergingDetail = sharedPreferencesManager.getItemInMergingList(id)\r\n            if (mergingDetail != null) {\r\n                val timeInMillis = System.currentTimeMillis()\r\n                var list: ArrayList&lt;DatabaseDownloadItem&gt;? = sharedViewmodel.pendingMerge.value\r\n                if (list == null) {\r\n                    list = arrayListOf()\r\n                }\r\n                list.add(model!!)\r\n                sharedViewmodel.pendingMerge.postValue(list)\r\n                sharedViewmodel.pendingMerge.value?.add(model!!)\r\n                CoroutineScope(Dispatchers.Main).launch {\r\n                    var mergePendingItems: ArrayList&lt;Int&gt;? =\r\n                        tinyDB?.getMergeList(AppConstants.MERGE_PENDING_DOWNLOADS)\r\n                    if (mergePendingItems == null) {\r\n                        mergePendingItems = arrayListOf()\r\n                    }\r\n                    if (!mergePendingItems.contains(model.id)) {\r\n                        mergePendingItems.add(model.id)\r\n                    }\r\n                    tinyDB?.putMergeList(AppConstants.MERGE_PENDING_DOWNLOADS, mergePendingItems)\r\n                    adapter.notifyDataSetChanged()\r\n                    CoroutineScope(Dispatchers.IO + exceptionHandler).async {\r\n                        val audiopath = mergingDetail.audioPath\r\n                        val videopath = mergingDetail.videoPath\r\n                        /*\r\n                        following comment is kept for reference\r\n                        val audiopath = &quot;/storage/emulated/0/VideoDownloader/tempAudio_1643715180488.m4a&quot;\r\n                        val videopath = &quot;/storage/emulated/0/VideoDownloader/1643715180480.mp4&quot;*/\r\n                        val output: String\r\n                        val outputName = &quot;output_${mergingDetail.originalFileName}&quot;\r\n                        mergingDetail.outputFileName = outputName\r\n                        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R) {\r\n                            val file = File(\r\n                                getDownloaderFolderFromDownloads(),\r\n                                &quot;$outputName.mp4&quot;\r\n                            )\r\n                            output = file.absolutePath\r\n                            mergingDetail.outputFile = file\r\n    \r\n                        } else {\r\n                            val file = File(\r\n                                Environment.getExternalStorageDirectory()\r\n                                    .toString() + &quot;/VideoDownloader/&quot;,\r\n                                &quot;$outputName.mp4&quot;\r\n                            )\r\n                            output = file.absolutePath\r\n                            mergingDetail.outputFile = file\r\n    \r\n                        }\r\n                        var videoOutput: Movie? = null\r\n                        var audioOutput: Movie? = null\r\n                        kotlin.runCatching {\r\n                            videoOutput = MovieCreator.build(videopath)\r\n                            audioOutput = MovieCreator.build(audiopath)\r\n                        }\r\n                        val finalTrack: MutableList&lt;Track&gt; = ArrayList()\r\n                        for (track in videoOutput?.tracks!!) {\r\n                            if (track.handler.equals(&quot;vide&quot;)) finalTrack.add(track)\r\n                        }\r\n                        for (track in audioOutput?.tracks!!) {\r\n                            if (track.handler.equals(&quot;soun&quot;)) finalTrack.add(track)\r\n                        }\r\n                        videoOutput?.tracks = finalTrack\r\n                        val mp4file: Container = DefaultMp4Builder().build(videoOutput)\r\n                        kotlin.runCatching {\r\n                            val fc: FileChannel = FileOutputStream(File(output)).getChannel()\r\n                            mp4file.writeContainer(fc)\r\n                            fc.close()\r\n                        }.onFailure { error -&gt;\r\n                            val abc = error\r\n                        }.onSuccess { someFuncReturnValue -&gt;\r\n                            val abc = &quot;dss&quot;\r\n                        }\r\n    \r\n                    }.await()\r\n                    Toast.makeText(activityInstance, &quot;Audio Video Merging Done&quot;, Toast.LENGTH_SHORT)\r\n                        .show()\r\n                    mergingDetail.isMergingDone = true\r\n                    sharedPreferencesManager.updateItemInMergingList(id, mergingDetail)\r\n                    executeDownloadCompletion(model, file, activityInstance)\r\n                    deleteTempAudioFile(File(mergingDetail.audioPath!!), activityInstance)\r\n                    deleteOldMutedVideo(File(mergingDetail.videoPath!!), activityInstance)\r\n                    renameOutputFileWithDBName(mergingDetail, activityInstance)\r\n                    var list: ArrayList&lt;DatabaseDownloadItem&gt;? = sharedViewmodel.pendingMerge.value\r\n                    if (list != null &amp;&amp; list!!.size &gt; 0) {\r\n                        list!!.remove(model!!)\r\n                        sharedViewmodel.pendingMerge.postValue(list)\r\n                        sharedViewmodel.pendingMerge.value?.add(model!!)\r\n                    }\r\n                    notificationWork(model, file, activityInstance)\r\n                    sharedPreferencesManager.deleteItemInMergingList(id)\r\n    \r\n                }\r\n            }\r\n        }\r\n\r\nThis works fine in most of devices but in MI Devices (i.e **Redmi S2, MUI Version MUI Global 12.0.2**) i am having an issue while playing the output file its corrupted and cannot be played. The error which shows up is just with title unknown.\r\n\r\n**Please note** that i have also tried the following combination of dependencies, but this was generating lags in output file so removed these two. \r\n\r\n    implementation &#39;org.mp4parser:isoparser:1.9.41&#39;\r\n         implementation &#39;org.mp4parser:muxer:1.9.41\r\n\r\nCan somebody please suggest the proper usgae and dependency version of [mp4parser][1] for merging audio file and video file.\r\n\r\nAny help will be appreciated.\r\n\r\nThank you\r\n\r\n\r\n  [1]: https://github.com/sannies/mp4parser","title":"Mp4Parser audio video merged output not playing in all devices","body":"<p>In my android application i am downloading Facebook video and audio separately and merging it in an output file. The reason is Facebook videos URLs have no sound and audio URL is separate.\nI have tried using this <a href=\"https://github.com/sannies/mp4parser\" rel=\"nofollow noreferrer\">mp4Parser</a> for merging audio and video and it works pretty well in most of devices but having issues in Redmi/MI devices when playing from device files.</p>\n<p><strong>Steps i followed</strong></p>\n<ul>\n<li>Download NO SOUND Video in mp4 format.</li>\n<li>Download audio in m4a format.</li>\n<li>Merge both files and create an output file with mp4 format.</li>\n<li>After merging is done deleted no sound video and temporary audio.</li>\n</ul>\n<p>Below is my code</p>\n<p><strong>Dependencies</strong></p>\n<pre><code> implementation 'com.iceteck.silicompressorr:silicompressor:2.2.4'\n    implementation('com.googlecode.mp4parser:isoparser:1.0.6') {\n        exclude group: 'org.aspectj', module: 'aspectjrt'\n    }\n</code></pre>\n<p><strong>Merging code</strong></p>\n<pre><code>  private fun mergeAudioAndVideo(\n        id: Int,\n        model: DatabaseDownloadItem?,\n        file: File?,\n        activityInstance: LocaleAwareCompatActivity?\n    ) {\n        val mergingDetail = sharedPreferencesManager.getItemInMergingList(id)\n        if (mergingDetail != null) {\n            val timeInMillis = System.currentTimeMillis()\n            var list: ArrayList&lt;DatabaseDownloadItem&gt;? = sharedViewmodel.pendingMerge.value\n            if (list == null) {\n                list = arrayListOf()\n            }\n            list.add(model!!)\n            sharedViewmodel.pendingMerge.postValue(list)\n            sharedViewmodel.pendingMerge.value?.add(model!!)\n            CoroutineScope(Dispatchers.Main).launch {\n                var mergePendingItems: ArrayList&lt;Int&gt;? =\n                    tinyDB?.getMergeList(AppConstants.MERGE_PENDING_DOWNLOADS)\n                if (mergePendingItems == null) {\n                    mergePendingItems = arrayListOf()\n                }\n                if (!mergePendingItems.contains(model.id)) {\n                    mergePendingItems.add(model.id)\n                }\n                tinyDB?.putMergeList(AppConstants.MERGE_PENDING_DOWNLOADS, mergePendingItems)\n                adapter.notifyDataSetChanged()\n                CoroutineScope(Dispatchers.IO + exceptionHandler).async {\n                    val audiopath = mergingDetail.audioPath\n                    val videopath = mergingDetail.videoPath\n                    /*\n                    following comment is kept for reference\n                    val audiopath = &quot;/storage/emulated/0/VideoDownloader/tempAudio_1643715180488.m4a&quot;\n                    val videopath = &quot;/storage/emulated/0/VideoDownloader/1643715180480.mp4&quot;*/\n                    val output: String\n                    val outputName = &quot;output_${mergingDetail.originalFileName}&quot;\n                    mergingDetail.outputFileName = outputName\n                    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R) {\n                        val file = File(\n                            getDownloaderFolderFromDownloads(),\n                            &quot;$outputName.mp4&quot;\n                        )\n                        output = file.absolutePath\n                        mergingDetail.outputFile = file\n\n                    } else {\n                        val file = File(\n                            Environment.getExternalStorageDirectory()\n                                .toString() + &quot;/VideoDownloader/&quot;,\n                            &quot;$outputName.mp4&quot;\n                        )\n                        output = file.absolutePath\n                        mergingDetail.outputFile = file\n\n                    }\n                    var videoOutput: Movie? = null\n                    var audioOutput: Movie? = null\n                    kotlin.runCatching {\n                        videoOutput = MovieCreator.build(videopath)\n                        audioOutput = MovieCreator.build(audiopath)\n                    }\n                    val finalTrack: MutableList&lt;Track&gt; = ArrayList()\n                    for (track in videoOutput?.tracks!!) {\n                        if (track.handler.equals(&quot;vide&quot;)) finalTrack.add(track)\n                    }\n                    for (track in audioOutput?.tracks!!) {\n                        if (track.handler.equals(&quot;soun&quot;)) finalTrack.add(track)\n                    }\n                    videoOutput?.tracks = finalTrack\n                    val mp4file: Container = DefaultMp4Builder().build(videoOutput)\n                    kotlin.runCatching {\n                        val fc: FileChannel = FileOutputStream(File(output)).getChannel()\n                        mp4file.writeContainer(fc)\n                        fc.close()\n                    }.onFailure { error -&gt;\n                        val abc = error\n                    }.onSuccess { someFuncReturnValue -&gt;\n                        val abc = &quot;dss&quot;\n                    }\n\n                }.await()\n                Toast.makeText(activityInstance, &quot;Audio Video Merging Done&quot;, Toast.LENGTH_SHORT)\n                    .show()\n                mergingDetail.isMergingDone = true\n                sharedPreferencesManager.updateItemInMergingList(id, mergingDetail)\n                executeDownloadCompletion(model, file, activityInstance)\n                deleteTempAudioFile(File(mergingDetail.audioPath!!), activityInstance)\n                deleteOldMutedVideo(File(mergingDetail.videoPath!!), activityInstance)\n                renameOutputFileWithDBName(mergingDetail, activityInstance)\n                var list: ArrayList&lt;DatabaseDownloadItem&gt;? = sharedViewmodel.pendingMerge.value\n                if (list != null &amp;&amp; list!!.size &gt; 0) {\n                    list!!.remove(model!!)\n                    sharedViewmodel.pendingMerge.postValue(list)\n                    sharedViewmodel.pendingMerge.value?.add(model!!)\n                }\n                notificationWork(model, file, activityInstance)\n                sharedPreferencesManager.deleteItemInMergingList(id)\n\n            }\n        }\n    }\n</code></pre>\n<p>This works fine in most of devices but in MI Devices (i.e <strong>Redmi S2, MUI Version MUI Global 12.0.2</strong>) i am having an issue while playing the output file its corrupted and cannot be played. The error which shows up is just with title unknown.</p>\n<p><strong>Please note</strong> that i have also tried the following combination of dependencies, but this was generating lags in output file so removed these two.</p>\n<pre><code>implementation 'org.mp4parser:isoparser:1.9.41'\n     implementation 'org.mp4parser:muxer:1.9.41\n</code></pre>\n<p>Can somebody please suggest the proper usgae and dependency version of <a href=\"https://github.com/sannies/mp4parser\" rel=\"nofollow noreferrer\">mp4parser</a> for merging audio file and video file.</p>\n<p>Any help will be appreciated.</p>\n<p>Thank you</p>\n"},{"tags":["java","html","css","spring","heroku"],"answers":[{"tags":[],"owner":{"account_id":16179110,"reputation":11,"user_id":11681530,"display_name":"Lamer11"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645039198,"creation_date":1645034149,"answer_id":71146922,"question_id":71144666,"body_markdown":"I found a solution to the problem. Previously, I tried to take the merged from the style.css, but it doesn&#39;t work that way. I had to insert the style tag into tag header of the html page and then everything works.","title":"Background not working in Java Spring app on Heroku","body":"<p>I found a solution to the problem. Previously, I tried to take the merged from the style.css, but it doesn't work that way. I had to insert the style tag into tag header of the html page and then everything works.</p>\n"}],"owner":{"account_id":16179110,"reputation":11,"user_id":11681530,"display_name":"Lamer11"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1645297993,"creation_date":1645025400,"question_id":71144666,"body_markdown":"Help me with my problem. There is do not working backgroundfor pages on the Heroku after I deploing my Java Spring app, althout it work on my local maschine.\r\n\r\nI have following code in the file style.css:\r\n\r\n    .coderovka-fon {\r\n\r\n      background-image: url(&#39;/coderovka-fon-2.png&#39;);\r\n      background-repeat: no-repeat;\r\n      background-position: center center;\r\n      background-attachment: fixed;\r\n      -webkit-background-size: cover;\r\n      -moz-background-size: cover;\r\n      -o-background-size: cover;\r\n      background-size: cover;\t\r\n    \r\n    }\r\n\r\nand on html page:\r\n\r\n    &lt;body class=&quot;coderovka-fon&quot;&gt;\r\n\r\n\r\n\r\nPlease, help me with my problem.\r\nThanks","title":"Background not working in Java Spring app on Heroku","body":"<p>Help me with my problem. There is do not working backgroundfor pages on the Heroku after I deploing my Java Spring app, althout it work on my local maschine.</p>\n<p>I have following code in the file style.css:</p>\n<pre><code>.coderovka-fon {\n\n  background-image: url('/coderovka-fon-2.png');\n  background-repeat: no-repeat;\n  background-position: center center;\n  background-attachment: fixed;\n  -webkit-background-size: cover;\n  -moz-background-size: cover;\n  -o-background-size: cover;\n  background-size: cover;   \n\n}\n</code></pre>\n<p>and on html page:</p>\n<pre><code>&lt;body class=&quot;coderovka-fon&quot;&gt;\n</code></pre>\n<p>Please, help me with my problem.\nThanks</p>\n"},{"tags":["java","spring","hibernate","transactions","spring-transactions"],"comments":[{"owner":{"account_id":48334,"reputation":19092,"user_id":143585,"accept_rate":67,"display_name":"Denis Tulskiy"},"score":1,"creation_date":1351089407,"post_id":13051204,"comment_id":17722951,"body_markdown":"that&#39;s kinda the point of REQUIRES_NEW, to create new transactions every time the method is called. And yes, if you have REQUIRED and the transaction is rolled back, it will roll back the whole thing.","body":"that&#39;s kinda the point of REQUIRES_NEW, to create new transactions every time the method is called. And yes, if you have REQUIRED and the transaction is rolled back, it will roll back the whole thing."},{"owner":{"account_id":1544874,"reputation":19288,"user_id":1438628,"accept_rate":80,"display_name":"Majid Laissi"},"score":0,"creation_date":1351090296,"post_id":13051204,"comment_id":17723401,"body_markdown":"@DenisTulskiy the whole thing being every previous call to that fonction, or the current call stack ?","body":"@DenisTulskiy the whole thing being every previous call to that fonction, or the current call stack ?"},{"owner":{"account_id":48334,"reputation":19092,"user_id":143585,"accept_rate":67,"display_name":"Denis Tulskiy"},"score":3,"creation_date":1351093795,"post_id":13051204,"comment_id":17725064,"body_markdown":"@jidma: whole transaction, see @Eugen&#39;s answer, if `createUser` is the first method your client code invokes, then REQUIRES_NEW and REQUIRED are the same thing","body":"@jidma: whole transaction, see @Eugen&#39;s answer, if <code>createUser</code> is the first method your client code invokes, then REQUIRES_NEW and REQUIRED are the same thing"}],"answers":[{"tags":[],"owner":{"account_id":77857,"reputation":12130,"user_id":221951,"accept_rate":47,"display_name":"Piotr Gwiazda"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1351089464,"creation_date":1351089464,"answer_id":13051470,"question_id":13051204,"body_markdown":"If you really need to do it in separate transaction you need to use `REQUIRES_NEW` and live with the performance overhead. Watch out for dead locks.\r\n\r\nI&#39;d rather do it the other way:\r\n\r\n  - Validate data on Java side.\r\n  - Run everyting in one transaction.\r\n  - If anything goes wrong on DB side -&gt; it&#39;s a major error of DB or validation design. Rollback everything and throw critical top level error.\r\n  - Write good unit tests.","title":"Spring transaction REQUIRED vs REQUIRES_NEW : Rollback Transaction","body":"<p>If you really need to do it in separate transaction you need to use <code>REQUIRES_NEW</code> and live with the performance overhead. Watch out for dead locks.</p>\n\n<p>I'd rather do it the other way:</p>\n\n<ul>\n<li>Validate data on Java side.</li>\n<li>Run everyting in one transaction.</li>\n<li>If anything goes wrong on DB side -> it's a major error of DB or validation design. Rollback everything and throw critical top level error.</li>\n<li>Write good unit tests.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":154496,"reputation":8593,"user_id":370481,"accept_rate":72,"display_name":"Eugen"},"down_vote_count":0,"up_vote_count":119,"is_accepted":true,"score":119,"last_activity_date":1645297953,"creation_date":1351093599,"answer_id":13052757,"question_id":13051204,"body_markdown":"Using `REQUIRES_NEW` is only relevant when the method is invoked from a transactional context; when the method is invoked from a non-transactional context, it will behave exactly as `REQUIRED` - it will create a new transaction. \r\n\r\nThat does not mean that there will only be one single transaction for all your clients - each client will start from a non-transactional context, and as soon as the the request processing will hit a `@Transactional`, it will create a new transaction. \r\n\r\nSo, with that in mind, if using `REQUIRES_NEW` makes sense for the semantics of that operation - than I wouldn&#39;t worry about performance - this would textbook premature optimization - I would rather stress correctness and data integrity and worry about performance once performance metrics have been collected, and not before. \r\n\r\nOn rollback - using `REQUIRES_NEW` will force the start of a new transaction, and so an exception will rollback that transaction. If there is also another transaction that was executing as well - that will or will not be rolled back depending on if the exception bubbles up the stack or is caught - your choice, based on the specifics of the operations. \r\nAlso, for a more in-depth discussion on transactional strategies and rollback, I would recommend: [&#171;Transaction strategies: Understanding transaction pitfalls&#187;, Mark Richards](https://web.archive.org/web/20170213005145/http://www.ibm.com/developerworks/library/j-ts1/index.html).","title":"Spring transaction REQUIRED vs REQUIRES_NEW : Rollback Transaction","body":"<p>Using <code>REQUIRES_NEW</code> is only relevant when the method is invoked from a transactional context; when the method is invoked from a non-transactional context, it will behave exactly as <code>REQUIRED</code> - it will create a new transaction.</p>\n<p>That does not mean that there will only be one single transaction for all your clients - each client will start from a non-transactional context, and as soon as the the request processing will hit a <code>@Transactional</code>, it will create a new transaction.</p>\n<p>So, with that in mind, if using <code>REQUIRES_NEW</code> makes sense for the semantics of that operation - than I wouldn't worry about performance - this would textbook premature optimization - I would rather stress correctness and data integrity and worry about performance once performance metrics have been collected, and not before.</p>\n<p>On rollback - using <code>REQUIRES_NEW</code> will force the start of a new transaction, and so an exception will rollback that transaction. If there is also another transaction that was executing as well - that will or will not be rolled back depending on if the exception bubbles up the stack or is caught - your choice, based on the specifics of the operations.\nAlso, for a more in-depth discussion on transactional strategies and rollback, I would recommend: <a href=\"https://web.archive.org/web/20170213005145/http://www.ibm.com/developerworks/library/j-ts1/index.html\" rel=\"noreferrer\">Transaction strategies: Understanding transaction pitfalls, Mark Richards</a>.</p>\n"}],"owner":{"account_id":1544874,"reputation":19288,"user_id":1438628,"accept_rate":80,"display_name":"Majid Laissi"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":206296,"favorite_count":0,"down_vote_count":0,"up_vote_count":73,"accepted_answer_id":13052757,"answer_count":2,"score":73,"last_activity_date":1645297953,"creation_date":1351088532,"question_id":13051204,"body_markdown":"I have a method that has the `propagation = Propagation.REQUIRES_NEW` transactional property:\r\n\r\n\r\n    @Transactional(propagation = Propagation.REQUIRES_NEW)\r\n    public void createUser(final UserBean userBean) {\r\n        //Some logic here that requires modification in DB\r\n    }\r\n\r\n----\r\n\r\nThis method can be called multiple times simultaneously, and for every transaction if an error occurs than it&#39;s rolled back (independently from the other transactions).\r\n\r\nThe problem is that this might force Spring to create multiple transactions, even if another one is available, and may cause some performance problems.\r\n\r\n-----\r\n\r\nJava doc of `propagation = Propagation.REQUIRED` says: `Support a current transaction, create a new one if none exists.`\r\n\r\nThis seems to solve the performance problem, doesn&#39;t it?\r\n\r\nWhat about the rollback issue ? What if a new method call rolls back while using an existing transaction ? won&#39;t that rollback the whole transaction even the previous calls ?\r\n\r\n**[EDIT]**\r\nI guess my question wasn&#39;t clear enough:\r\n\r\nWe have hundreds of clients connected to our server. \r\n\r\nFor each client we naturally need to send a feedback about the transaction (OK or exception -&gt; rollback). \r\n\r\nMy question is: if I use `REQUIRED`, does it mean only one transaction is used, and if the 100th client encounters a problem the 1st client&#39;s transaction will rollback as well ?\r\n","title":"Spring transaction REQUIRED vs REQUIRES_NEW : Rollback Transaction","body":"<p>I have a method that has the <code>propagation = Propagation.REQUIRES_NEW</code> transactional property:</p>\n\n<pre><code>@Transactional(propagation = Propagation.REQUIRES_NEW)\npublic void createUser(final UserBean userBean) {\n    //Some logic here that requires modification in DB\n}\n</code></pre>\n\n<hr>\n\n<p>This method can be called multiple times simultaneously, and for every transaction if an error occurs than it's rolled back (independently from the other transactions).</p>\n\n<p>The problem is that this might force Spring to create multiple transactions, even if another one is available, and may cause some performance problems.</p>\n\n<hr>\n\n<p>Java doc of <code>propagation = Propagation.REQUIRED</code> says: <code>Support a current transaction, create a new one if none exists.</code></p>\n\n<p>This seems to solve the performance problem, doesn't it?</p>\n\n<p>What about the rollback issue ? What if a new method call rolls back while using an existing transaction ? won't that rollback the whole transaction even the previous calls ?</p>\n\n<p><strong>[EDIT]</strong>\nI guess my question wasn't clear enough:</p>\n\n<p>We have hundreds of clients connected to our server. </p>\n\n<p>For each client we naturally need to send a feedback about the transaction (OK or exception -> rollback). </p>\n\n<p>My question is: if I use <code>REQUIRED</code>, does it mean only one transaction is used, and if the 100th client encounters a problem the 1st client's transaction will rollback as well ?</p>\n"},{"tags":["java","oop"],"comments":[{"owner":{"account_id":1809965,"reputation":36736,"user_id":1646240,"accept_rate":91,"display_name":"StepUp"},"score":0,"creation_date":1645628746,"post_id":71180762,"comment_id":125923519,"body_markdown":"Feel free to ask any question. If my reply helps then you can upvote or mark it as an answer to simplify the future search of other users. Pelase, see [How does accepting an answer work?](https://meta.stackexchange.com/questions/5234/how-does-accepting-an-answer-work)","body":"Feel free to ask any question. If my reply helps then you can upvote or mark it as an answer to simplify the future search of other users. Pelase, see <a href=\"https://meta.stackexchange.com/questions/5234/how-does-accepting-an-answer-work\">How does accepting an answer work?</a>"}],"answers":[{"tags":[],"owner":{"account_id":36759,"reputation":38034,"user_id":104950,"accept_rate":93,"display_name":"Amir Afghani"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645225288,"creation_date":1645225288,"answer_id":71180800,"question_id":71180762,"body_markdown":"Consider using the [Fluent Builder Pattern][1] instead of trying to make your factory fluent.\r\n\r\n\r\n  [1]: https://dzone.com/articles/fluent-builder-pattern","title":"How do I structure factory classes to allow for a fluent interface?","body":"<p>Consider using the <a href=\"https://dzone.com/articles/fluent-builder-pattern\" rel=\"nofollow noreferrer\">Fluent Builder Pattern</a> instead of trying to make your factory fluent.</p>\n"},{"tags":[],"owner":{"account_id":1809965,"reputation":36736,"user_id":1646240,"accept_rate":91,"display_name":"StepUp"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645297119,"creation_date":1645297119,"answer_id":71188181,"question_id":71180762,"body_markdown":"[C# uses fluent programming extensively in LINQ to build queries using &quot;standard query operators&quot;][1].\r\n\r\nThis is `C#` implementation. It looks like this sample code can be converted to `Java` as special features of `C#` is not used.\r\n\r\nSo let&#39;s see an example. We start from an interface `IFluent` which allows to build your actions with settings:\r\n\r\n    public interface IFluent\r\n    {\r\n        IFluent WithAction(Action action);\r\n\r\n\r\n        IFluent WithConfiguration(KeyValuePair&lt;string, object&gt; configuration);\r\n    }\r\n\t\r\nand this is `Fluent` class which implements `IFluent` interface:\r\n\r\n    public class Fluent : IFluent\r\n    {\r\n        private List&lt;Action&gt; actions;\r\n\r\n        public IFluent WithAction(Action action)\r\n        {\r\n            if (actions == null)\r\n                actions = new List&lt;Action&gt;();\r\n\r\n            actions.Add(action);\r\n            return this;\r\n        }\r\n\r\n        public IFluent WithConfiguration(KeyValuePair&lt;string, object&gt; configuration)\r\n        {\r\n            if (actions == null || actions.Count == 0)\r\n                throw new InvalidOperationException(&quot;There are no actions&quot;);\r\n\r\n            int currentActionIndex = actions.Count - 1;\r\n            actions[currentActionIndex].Set(configuration);\r\n            return this;\r\n        }\r\n    }\r\n\t\r\n\t\r\nThen we create an abstract class for `Action` that should define behavior for derived classes:\r\n\r\n    public abstract class Action\r\n    {\r\n        public abstract Dictionary&lt;string, object&gt; Properties { get; set; }\r\n\r\n\r\n        public abstract void Execute();\r\n\r\n\r\n        public abstract void Set(KeyValuePair&lt;string, object&gt; configuration);\r\n\r\n\r\n        public abstract void Add(string name, object value);\r\n    }\r\n\r\nAnd our derived classes would look like this:\r\n\r\n    public class DatabaseAction : Abstract.Action\r\n    {\r\n        public override Dictionary&lt;string, object&gt; Properties { get; set; } \r\n            = new Dictionary&lt;string, object&gt;() \r\n        {\r\n            { &quot;port&quot;, 0},\r\n            { &quot;connectionString&quot;, &quot;foobarConnectionString&quot;},\r\n            { &quot;timeout&quot;, 60}\r\n        };\r\n\r\n\r\n        public override void Execute()\r\n        {\r\n            Console.WriteLine(&quot;It is a database action&quot;);\r\n        }\r\n\r\n\r\n        public override void Set(KeyValuePair&lt;string, object&gt; configuration)\r\n        {\r\n            if (Properties.ContainsKey(configuration.Key))\r\n                Properties[configuration.Key] = configuration.Value;\r\n        }\r\n\r\n\r\n        public override void Add(string name, object value)\r\n        {\r\n            Properties.Add(name, value);\r\n        }\r\n    }\r\n\t\r\nand `EmailAction`:\r\n\r\n    public class EmailAction : Abstract.Action\r\n    {\r\n        public override Dictionary&lt;string, object&gt; Properties { get; set; } \r\n            = new Dictionary&lt;string, object&gt;()\r\n        {\r\n            { &quot;from&quot;, &quot;Head First - Object Oriented Design&quot;},\r\n            { &quot;to&quot;, &quot;who wants to learn object oriented design&quot;},\r\n            { &quot;index&quot;, 123456}\r\n        };\r\n\r\n        public override void Execute()\r\n        {\r\n            Console.WriteLine(&quot;It is a email action&quot;);\r\n        }\r\n\r\n        public override void Set(KeyValuePair&lt;string, object&gt; configuration)\r\n        {\r\n            if (Properties.ContainsKey(configuration.Key))\r\n                Properties[configuration.Key] = configuration.Value;\r\n        }\r\n\r\n        public override void Add(string name, object value)\r\n        {\r\n            Properties.Add(name, value);\r\n        }\r\n    }\r\n\t\r\nand `WebAction`:\r\n\r\n\tpublic class WebAction : Abstract.Action\r\n    {\r\n        public override Dictionary&lt;string, object&gt; Properties { get; set; } \r\n            = new Dictionary&lt;string, object&gt;()\r\n        {\r\n            { &quot;foo&quot;, &quot;1&quot;},\r\n            { &quot;bar&quot;, &quot;2&quot;},\r\n            { &quot;hey&quot;, &quot;hi&quot;}\r\n        };\r\n\r\n        public override void Execute()\r\n        {\r\n            Console.WriteLine(&quot;It is a email action&quot;);\r\n        }\r\n\r\n        public override void Set(KeyValuePair&lt;string, object&gt; configuration)\r\n        {\r\n            if (Properties.ContainsKey(configuration.Key))\r\n                Properties[configuration.Key] = configuration.Value;\r\n        }\r\n\r\n        public override void Add(string name, object value)\r\n        {\r\n            Properties.Add(name, value);\r\n        }\r\n    }\r\n\t\r\nThe it is possible to call code like this:\r\n\r\n    Fluent actions = new Fluent();\r\n\tactions.WithAction(new DatabaseAction())\r\n\t\t.WithConfiguration(new KeyValuePair&lt;string, object&gt;(&quot;port&quot;, 1))\r\n\t\t.WithAction(new EmailAction())\r\n\t\t.WithConfiguration(new KeyValuePair&lt;string, object&gt;(&quot;to&quot;, &quot;me&quot;));\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Fluent_interface#C#","title":"How do I structure factory classes to allow for a fluent interface?","body":"<p><a href=\"https://en.wikipedia.org/wiki/Fluent_interface#C#\" rel=\"nofollow noreferrer\">C# uses fluent programming extensively in LINQ to build queries using &quot;standard query operators&quot;</a>.</p>\n<p>This is <code>C#</code> implementation. It looks like this sample code can be converted to <code>Java</code> as special features of <code>C#</code> is not used.</p>\n<p>So let's see an example. We start from an interface <code>IFluent</code> which allows to build your actions with settings:</p>\n<pre><code>public interface IFluent\n{\n    IFluent WithAction(Action action);\n\n\n    IFluent WithConfiguration(KeyValuePair&lt;string, object&gt; configuration);\n}\n</code></pre>\n<p>and this is <code>Fluent</code> class which implements <code>IFluent</code> interface:</p>\n<pre><code>public class Fluent : IFluent\n{\n    private List&lt;Action&gt; actions;\n\n    public IFluent WithAction(Action action)\n    {\n        if (actions == null)\n            actions = new List&lt;Action&gt;();\n\n        actions.Add(action);\n        return this;\n    }\n\n    public IFluent WithConfiguration(KeyValuePair&lt;string, object&gt; configuration)\n    {\n        if (actions == null || actions.Count == 0)\n            throw new InvalidOperationException(&quot;There are no actions&quot;);\n\n        int currentActionIndex = actions.Count - 1;\n        actions[currentActionIndex].Set(configuration);\n        return this;\n    }\n}\n</code></pre>\n<p>Then we create an abstract class for <code>Action</code> that should define behavior for derived classes:</p>\n<pre><code>public abstract class Action\n{\n    public abstract Dictionary&lt;string, object&gt; Properties { get; set; }\n\n\n    public abstract void Execute();\n\n\n    public abstract void Set(KeyValuePair&lt;string, object&gt; configuration);\n\n\n    public abstract void Add(string name, object value);\n}\n</code></pre>\n<p>And our derived classes would look like this:</p>\n<pre><code>public class DatabaseAction : Abstract.Action\n{\n    public override Dictionary&lt;string, object&gt; Properties { get; set; } \n        = new Dictionary&lt;string, object&gt;() \n    {\n        { &quot;port&quot;, 0},\n        { &quot;connectionString&quot;, &quot;foobarConnectionString&quot;},\n        { &quot;timeout&quot;, 60}\n    };\n\n\n    public override void Execute()\n    {\n        Console.WriteLine(&quot;It is a database action&quot;);\n    }\n\n\n    public override void Set(KeyValuePair&lt;string, object&gt; configuration)\n    {\n        if (Properties.ContainsKey(configuration.Key))\n            Properties[configuration.Key] = configuration.Value;\n    }\n\n\n    public override void Add(string name, object value)\n    {\n        Properties.Add(name, value);\n    }\n}\n</code></pre>\n<p>and <code>EmailAction</code>:</p>\n<pre><code>public class EmailAction : Abstract.Action\n{\n    public override Dictionary&lt;string, object&gt; Properties { get; set; } \n        = new Dictionary&lt;string, object&gt;()\n    {\n        { &quot;from&quot;, &quot;Head First - Object Oriented Design&quot;},\n        { &quot;to&quot;, &quot;who wants to learn object oriented design&quot;},\n        { &quot;index&quot;, 123456}\n    };\n\n    public override void Execute()\n    {\n        Console.WriteLine(&quot;It is a email action&quot;);\n    }\n\n    public override void Set(KeyValuePair&lt;string, object&gt; configuration)\n    {\n        if (Properties.ContainsKey(configuration.Key))\n            Properties[configuration.Key] = configuration.Value;\n    }\n\n    public override void Add(string name, object value)\n    {\n        Properties.Add(name, value);\n    }\n}\n</code></pre>\n<p>and <code>WebAction</code>:</p>\n<pre><code>public class WebAction : Abstract.Action\n{\n    public override Dictionary&lt;string, object&gt; Properties { get; set; } \n        = new Dictionary&lt;string, object&gt;()\n    {\n        { &quot;foo&quot;, &quot;1&quot;},\n        { &quot;bar&quot;, &quot;2&quot;},\n        { &quot;hey&quot;, &quot;hi&quot;}\n    };\n\n    public override void Execute()\n    {\n        Console.WriteLine(&quot;It is a email action&quot;);\n    }\n\n    public override void Set(KeyValuePair&lt;string, object&gt; configuration)\n    {\n        if (Properties.ContainsKey(configuration.Key))\n            Properties[configuration.Key] = configuration.Value;\n    }\n\n    public override void Add(string name, object value)\n    {\n        Properties.Add(name, value);\n    }\n}\n</code></pre>\n<p>The it is possible to call code like this:</p>\n<pre><code>Fluent actions = new Fluent();\nactions.WithAction(new DatabaseAction())\n    .WithConfiguration(new KeyValuePair&lt;string, object&gt;(&quot;port&quot;, 1))\n    .WithAction(new EmailAction())\n    .WithConfiguration(new KeyValuePair&lt;string, object&gt;(&quot;to&quot;, &quot;me&quot;));\n</code></pre>\n"}],"owner":{"account_id":2518215,"reputation":355,"user_id":2189108,"accept_rate":80,"display_name":"mdong"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1645297119,"creation_date":1645224919,"question_id":71180762,"body_markdown":"I want to create a series of `Actions` that do related things\r\n```\r\npublic interface Action{\r\n    public void execute();\r\n}\r\n\r\npublic class DatabaseAction implements Action{\r\n    public void execute(){}\r\n}\r\n\r\npublic class WebAction implements Action{\r\n    public void execute(){}\r\n}\r\n\r\npublic class EmailAction implements Action{\r\n    public void execute(){}\r\n}\r\n```\r\n\r\nGenerally speaking, users don&#39;t care about the details. They want all the actions to run and not worry about it.\r\n\r\nBut there&#39;s going to be some special cases where they only want to run some of the actions, and configure some of the actions.\r\n\r\nAnd I suppose there could be cases where configuration is non-optional.\r\n\r\nI figure a fluent interface is the most readable here.\r\n\r\n```\r\n// Executes all Actions - intended to be used in almost all cases\r\n// I write to a database, call a web API, and send an email.\r\nActions.withAllDefaults().execute(); \r\n\r\n// I don&#39;t need to send an email and I need to configure the database\r\nActions.withAction(DATABASE_ACTION)\r\n  .withConfiguration(DatabaseAction.PORT, 9000)\r\n  .withAction(WEB_ACTION)\r\n  .execute();\r\n```\r\n\r\nIt feels like I should be implementing some sort of factory but it&#39;s hard for me to actually translate that into code.","title":"How do I structure factory classes to allow for a fluent interface?","body":"<p>I want to create a series of <code>Actions</code> that do related things</p>\n<pre><code>public interface Action{\n    public void execute();\n}\n\npublic class DatabaseAction implements Action{\n    public void execute(){}\n}\n\npublic class WebAction implements Action{\n    public void execute(){}\n}\n\npublic class EmailAction implements Action{\n    public void execute(){}\n}\n</code></pre>\n<p>Generally speaking, users don't care about the details. They want all the actions to run and not worry about it.</p>\n<p>But there's going to be some special cases where they only want to run some of the actions, and configure some of the actions.</p>\n<p>And I suppose there could be cases where configuration is non-optional.</p>\n<p>I figure a fluent interface is the most readable here.</p>\n<pre><code>// Executes all Actions - intended to be used in almost all cases\n// I write to a database, call a web API, and send an email.\nActions.withAllDefaults().execute(); \n\n// I don't need to send an email and I need to configure the database\nActions.withAction(DATABASE_ACTION)\n  .withConfiguration(DatabaseAction.PORT, 9000)\n  .withAction(WEB_ACTION)\n  .execute();\n</code></pre>\n<p>It feels like I should be implementing some sort of factory but it's hard for me to actually translate that into code.</p>\n"},{"tags":["java","arrays","processing","slice","pixel"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1512835037,"post_id":47730254,"comment_id":82421235,"body_markdown":"No. Java has no syntactic construct to set a range of an array to a certain value.","body":"No. Java has no syntactic construct to set a range of an array to a certain value."}],"answers":[{"tags":[],"owner":{"account_id":467643,"reputation":41696,"user_id":873165,"accept_rate":84,"display_name":"Kevin Workman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1645297113,"creation_date":1512839071,"answer_id":47730974,"question_id":47730254,"body_markdown":"Processing does have a `set()` function that takes an image parameter. From [the reference](https://processing.org/reference/set_.html):\r\n\r\n    size(100, 100);\r\n    PImage myImage = loadImage(&quot;apples.jpg&quot;);\r\n    set(0, 0, myImage);\r\n    line(0, 0, width, height);\r\n    line(0, height, width, 0);\r\n\r\n[![generated image][1]][1]  \n&lt;sub&gt;(source: [processing.org](https://processing.org/reference/images/set_2.png))&lt;/sub&gt;  \n\r\n\r\nYou could put your color into an image, and then draw the image. I don&#39;t know whether this will be any faster or not.\r\n\r\nAnother option would be to simply resize the input image at startup.\n\n [1]: https://i.stack.imgur.com/HS4PI.png","title":"Processing/Java pixel array slicing assignment","body":"<p>Processing does have a <code>set()</code> function that takes an image parameter. From <a href=\"https://processing.org/reference/set_.html\" rel=\"nofollow noreferrer\">the reference</a>:</p>\n<pre><code>size(100, 100);\nPImage myImage = loadImage(&quot;apples.jpg&quot;);\nset(0, 0, myImage);\nline(0, 0, width, height);\nline(0, height, width, 0);\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/HS4PI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HS4PI.png\" alt=\"generated image\" /></a><br />\n<sub>(source: <a href=\"https://processing.org/reference/images/set_2.png\" rel=\"nofollow noreferrer\">processing.org</a>)</sub></p>\n<p>You could put your color into an image, and then draw the image. I don't know whether this will be any faster or not.</p>\n<p>Another option would be to simply resize the input image at startup.</p>\n"}],"owner":{"account_id":12166528,"reputation":21,"user_id":8882675,"display_name":"R. Versnel"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":90,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1645297113,"creation_date":1512834357,"question_id":47730254,"body_markdown":"I&#39;m am using processing / Java and i am using the pixel array to assign a color to every pixel,  but the framerate is way too low if I assign every pixel so I want to treat a block of 5 pixels as one, so make them the same color.   I am nog doing this,      \r\n\r\n\tfor (int x = 0; x &lt; width; x += 5) {\r\n\t\t// for loop width\r\n\t\tfor (int y = 0; y &lt; height; y += 5) {\r\n\t\t\t// For loop height\r\n\t\t\t// Assigning pixel color\r\n\t\t\tfor (int px = 0; px &lt; 5; px++) {\r\n\t\t\t\tfor (int py = 0; py &lt; 5; py++) {\r\n\t\t\t\t\tpixels[x + px + (y + py) * width] = color(myCol);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\nbut I wanted to know if I can assign a slice of the array something like this \r\n\r\n    pixels[startIndex : endIndex] = color(myColor);\r\n\r\n","title":"Processing/Java pixel array slicing assignment","body":"<p>I'm am using processing / Java and i am using the pixel array to assign a color to every pixel,  but the framerate is way too low if I assign every pixel so I want to treat a block of 5 pixels as one, so make them the same color.   I am nog doing this,      </p>\n\n<pre><code>for (int x = 0; x &lt; width; x += 5) {\n    // for loop width\n    for (int y = 0; y &lt; height; y += 5) {\n        // For loop height\n        // Assigning pixel color\n        for (int px = 0; px &lt; 5; px++) {\n            for (int py = 0; py &lt; 5; py++) {\n                pixels[x + px + (y + py) * width] = color(myCol);\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>but I wanted to know if I can assign a slice of the array something like this </p>\n\n<pre><code>pixels[startIndex : endIndex] = color(myColor);\n</code></pre>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":23409152,"reputation":21,"user_id":17471116,"display_name":"Kiparisov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1645297007,"creation_date":1645297007,"answer_id":71188163,"question_id":71187232,"body_markdown":"Thanks everyone! I solved this problem of deleting the folder **.android** and redownloading AVD.","title":"Android emulator starts but doesn&#39;t run my app","body":"<p>Thanks everyone! I solved this problem of deleting the folder <strong>.android</strong> and redownloading AVD.</p>\n"}],"owner":{"account_id":23409152,"reputation":21,"user_id":17471116,"display_name":"Kiparisov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71188163,"answer_count":1,"score":0,"last_activity_date":1645297007,"creation_date":1645290514,"question_id":71187232,"body_markdown":"Everything works perfectly yesterday, but now my emulator is broken. Emulator starts without erros but app doesn&#39;t launch. I tried to install my app from apk file, but it doesn&#39;t work too(see the screen). Also I tried to run default android studio project and it gives me the same problem.\r\n\r\n[error screen][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/x7eP2.png","title":"Android emulator starts but doesn&#39;t run my app","body":"<p>Everything works perfectly yesterday, but now my emulator is broken. Emulator starts without erros but app doesn't launch. I tried to install my app from apk file, but it doesn't work too(see the screen). Also I tried to run default android studio project and it gives me the same problem.</p>\n<p><a href=\"https://i.stack.imgur.com/x7eP2.png\" rel=\"nofollow noreferrer\">error screen</a></p>\n"},{"tags":["java","android","excel","apache"],"comments":[{"owner":{"account_id":111736,"reputation":11811,"user_id":295004,"display_name":"Morrison Chang"},"score":0,"creation_date":1433178884,"post_id":30578750,"comment_id":49228753,"body_markdown":"One thing to look at is that Java 8 isn&#39;t supported by Android yet: https://developer.android.com/sdk/index.html#Requirements http://stackoverflow.com/questions/23318109/is-it-possible-to-use-java-8-for-android-development","body":"One thing to look at is that Java 8 isn&#39;t supported by Android yet: <a href=\"https://developer.android.com/sdk/index.html#Requirements\" rel=\"nofollow noreferrer\">developer.android.com/sdk/index.html#Requirements</a> <a href=\"http://stackoverflow.com/questions/23318109/is-it-possible-to-use-java-8-for-android-development\" title=\"is it possible to use java 8 for android development\">stackoverflow.com/questions/23318109/&hellip;</a>"},{"owner":{"account_id":2868787,"reputation":1376,"user_id":2462540,"accept_rate":90,"display_name":"Mantas"},"score":0,"creation_date":1433180926,"post_id":30578750,"comment_id":49229832,"body_markdown":"Thanks for noticing this but it didn&#39;t change anything.","body":"Thanks for noticing this but it didn&#39;t change anything."},{"owner":{"account_id":2918128,"reputation":1303,"user_id":2500927,"accept_rate":30,"display_name":"Avyaan"},"score":0,"creation_date":1433182423,"post_id":30578750,"comment_id":49230605,"body_markdown":"is there different version of poi dependency for android ? i just want to know.I am using \t&lt;!--EXCEL SHEET START --&gt;\n\t\t&lt;dependency&gt;\n\t\t\t&lt;groupId&gt;org.apache.poi&lt;/groupId&gt;  \n\t\t\t&lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\n\t\t\t&lt;version&gt;3.9&lt;/version&gt;\n\t\t&lt;/dependency&gt; for java projects and it works","body":"is there different version of poi dependency for android ? i just want to know.I am using \t&lt;!--EXCEL SHEET START --&gt; \t\t&lt;dependency&gt; \t\t\t&lt;groupId&gt;org.apache.poi&lt;/groupId&gt;   \t\t\t&lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt; \t\t\t&lt;version&gt;3.9&lt;/version&gt; \t\t&lt;/dependency&gt; for java projects and it works"},{"owner":{"account_id":2868787,"reputation":1376,"user_id":2462540,"accept_rate":90,"display_name":"Mantas"},"score":0,"creation_date":1433246844,"post_id":30578750,"comment_id":49259594,"body_markdown":"Yes, there is. The newest version in 3.12 and you can get it from here:\nhttps://poi.apache.org/download.html","body":"Yes, there is. The newest version in 3.12 and you can get it from here: <a href=\"https://poi.apache.org/download.html\" rel=\"nofollow noreferrer\">poi.apache.org/download.html</a>"}],"answers":[{"tags":[],"owner":{"account_id":2260663,"reputation":831,"user_id":1990862,"display_name":"Clerenz"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1464775954,"creation_date":1464775954,"answer_id":37565725,"question_id":30578750,"body_markdown":"I faced the same problem. org.apache.poi:poi-ooxml is referencing at the end stax:stax-api, which contains core packages javax.xml.*. The compiler (or predexer or however it is called in android studio) aborts the compiling with a long warning. There are three ways to solve this:\r\n\r\n 1. Use another library than poi, [if there is any that also supports xlsx][1]\r\n 2. Recompile the dependencies. I started recompiling the stax-api. You need to change the package name of the classes wit a tool like jarjar, which is also mentioned in the error output of android studio. The problem: you will also have to recompile the xmlbeans library that references and uses the stax-api. At this point I gave up.\r\n 3. Set the --core-library switch during compilation. This is not recommended as one can see in androids error message. Nevertheless, [here][2] is a discussion on how this would work. Doing this, you should also recompile stax-api and drop all classes that are defined in android.jar (javax.xml.XMLConstants, javax.xml.namespace.*)\r\n\r\nHope that helps!\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/267025/read-xlsx-file-in-java\r\n  [2]: https://stackoverflow.com/questions/24163341/android-studio-ignore-core-library-flag","title":"Dependencies for using Apache POI to read excel files in Android","body":"<p>I faced the same problem. org.apache.poi:poi-ooxml is referencing at the end stax:stax-api, which contains core packages javax.xml.*. The compiler (or predexer or however it is called in android studio) aborts the compiling with a long warning. There are three ways to solve this:</p>\n\n<ol>\n<li>Use another library than poi, <a href=\"https://stackoverflow.com/questions/267025/read-xlsx-file-in-java\">if there is any that also supports xlsx</a></li>\n<li>Recompile the dependencies. I started recompiling the stax-api. You need to change the package name of the classes wit a tool like jarjar, which is also mentioned in the error output of android studio. The problem: you will also have to recompile the xmlbeans library that references and uses the stax-api. At this point I gave up.</li>\n<li>Set the --core-library switch during compilation. This is not recommended as one can see in androids error message. Nevertheless, <a href=\"https://stackoverflow.com/questions/24163341/android-studio-ignore-core-library-flag\">here</a> is a discussion on how this would work. Doing this, you should also recompile stax-api and drop all classes that are defined in android.jar (javax.xml.XMLConstants, javax.xml.namespace.*)</li>\n</ol>\n\n<p>Hope that helps!</p>\n"},{"tags":[],"owner":{"account_id":6819143,"reputation":123,"user_id":5246822,"display_name":"ad3bay0"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1532948955,"creation_date":1532897243,"answer_id":51584433,"question_id":30578750,"body_markdown":"This worked for me: `dependencies {\r\nimplementation &#39;org.apache.poi:poi:3.12&#39;\r\nimplementation &#39;org.apache.poi:poi-ooxml:3.12&#39;\r\nimplementation &#39;com.fasterxml:aalto-xml:1.0.0&#39;}`","title":"Dependencies for using Apache POI to read excel files in Android","body":"<p>This worked for me: <code>dependencies {\nimplementation 'org.apache.poi:poi:3.12'\nimplementation 'org.apache.poi:poi-ooxml:3.12'\nimplementation 'com.fasterxml:aalto-xml:1.0.0'}</code></p>\n"},{"tags":[],"owner":{"account_id":19783404,"reputation":71,"user_id":14487937,"display_name":"Aman Pasricha"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1614312068,"creation_date":1614312068,"answer_id":66379939,"question_id":30578750,"body_markdown":"Just add these two dependencies in your build.gradle module file\r\n\r\n    implementation group: &#39;org.apache.poi&#39;, name: &#39;poi-ooxml&#39;, version: &#39;4.1.2&#39;\r\n    implementation &#39;javax.xml.stream:stax-api:1.0&#39;","title":"Dependencies for using Apache POI to read excel files in Android","body":"<p>Just add these two dependencies in your build.gradle module file</p>\n<pre><code>implementation group: 'org.apache.poi', name: 'poi-ooxml', version: '4.1.2'\nimplementation 'javax.xml.stream:stax-api:1.0'\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11728717,"reputation":2354,"user_id":8585023,"display_name":"Doh09"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645296815,"creation_date":1645296815,"answer_id":71188137,"question_id":30578750,"body_markdown":"You need to remember to sync the gradle file after saving it. That solved the issue for me. The sync button appeared at the top of the gradle file after a change was made.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/4SM54.png","title":"Dependencies for using Apache POI to read excel files in Android","body":"<p>You need to remember to sync the gradle file after saving it. That solved the issue for me. The sync button appeared at the top of the gradle file after a change was made.</p>\n<p><a href=\"https://i.stack.imgur.com/4SM54.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4SM54.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":2868787,"reputation":1376,"user_id":2462540,"accept_rate":90,"display_name":"Mantas"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10685,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":37565725,"answer_count":4,"score":1,"last_activity_date":1645296815,"creation_date":1433176759,"question_id":30578750,"body_markdown":"I want to use Apache POI to read and write excel files (both xlsx and xls) in Android. But I cannot resolve dependency issues that I currently have.\r\n\r\nIf I have only these two dependencies in my gradle file\r\n\r\n    compile files(&#39;libs/poi-3.12-20150511.jar&#39;)\r\n    compile files(&#39;libs/poi-ooxml-3.12-20150511.jar&#39;)\r\n\r\nThen I get the following error:\r\n\r\n       java.lang.NoClassDefFoundError: Failed resolution of: Lorg/apache/xmlbeans/XmlOptions;\r\n                at org.apache.poi.POIXMLDocumentPart.&lt;clinit&gt;(POIXMLDocumentPart.java:59)\r\n                at com.gargzdai.spreadsheet.MainActivity.readData(MainActivity.java:131)\r\n                at com.gargzdai.spreadsheet.MainActivity.prepareForReadingData(MainActivity.java:109)\r\n                at com.gargzdai.spreadsheet.MainActivity.onCreate(MainActivity.java:68)\r\n                at android.app.Activity.performCreate(Activity.java:5990)\r\n                at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1106)\r\n                at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2278)\r\n                at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2387)\r\n                at android.app.ActivityThread.access$800(ActivityThread.java:151)\r\n                at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1303)\r\n                at android.os.Handler.dispatchMessage(Handler.java:102)\r\n                at android.os.Looper.loop(Looper.java:135)\r\n                at android.app.ActivityThread.main(ActivityThread.java:5254)\r\n                at java.lang.reflect.Method.invoke(Native Method)\r\n                at java.lang.reflect.Method.invoke(Method.java:372)\r\n                at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:903)\r\n\r\nThis is the code I&#39;m using to read excel files:\r\n\r\n        if (isXlsxFile)\r\n            myWorkbook = new XSSFWorkbook(OPCPackage.open(file));\r\n        else\r\n            myWorkbook = new HSSFWorkbook(fileStream);\r\n        Sheet mySheet = myWorkbook.getSheetAt(0);\r\n        Iterator rowIterator = mySheet.rowIterator();\r\n      \r\nIt seems that I should add xmlbeans library. After I add this dependency to my gradle file:\r\n\r\n    compile files(&#39;libs/xmlbeans-2.6.0.jar&#39;)\r\n\r\nAfter I add this dependency I get the following error during gradle build:\r\n\r\n    Error:Execution failed for task &#39;:app:preDexDebug&#39;.\r\n    &gt; com.android.ide.common.process.ProcessException: org.gradle.process.internal.ExecException: Process &#39;command &#39;C:\\Program Files\\Java\\jdk1.8.0_40\\bin\\java.exe&#39;&#39; finished with non-zero exit value 1\r\n\r\nAny ideas on how should I approach this problem?","title":"Dependencies for using Apache POI to read excel files in Android","body":"<p>I want to use Apache POI to read and write excel files (both xlsx and xls) in Android. But I cannot resolve dependency issues that I currently have.</p>\n\n<p>If I have only these two dependencies in my gradle file</p>\n\n<pre><code>compile files('libs/poi-3.12-20150511.jar')\ncompile files('libs/poi-ooxml-3.12-20150511.jar')\n</code></pre>\n\n<p>Then I get the following error:</p>\n\n<pre><code>   java.lang.NoClassDefFoundError: Failed resolution of: Lorg/apache/xmlbeans/XmlOptions;\n            at org.apache.poi.POIXMLDocumentPart.&lt;clinit&gt;(POIXMLDocumentPart.java:59)\n            at com.gargzdai.spreadsheet.MainActivity.readData(MainActivity.java:131)\n            at com.gargzdai.spreadsheet.MainActivity.prepareForReadingData(MainActivity.java:109)\n            at com.gargzdai.spreadsheet.MainActivity.onCreate(MainActivity.java:68)\n            at android.app.Activity.performCreate(Activity.java:5990)\n            at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1106)\n            at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2278)\n            at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2387)\n            at android.app.ActivityThread.access$800(ActivityThread.java:151)\n            at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1303)\n            at android.os.Handler.dispatchMessage(Handler.java:102)\n            at android.os.Looper.loop(Looper.java:135)\n            at android.app.ActivityThread.main(ActivityThread.java:5254)\n            at java.lang.reflect.Method.invoke(Native Method)\n            at java.lang.reflect.Method.invoke(Method.java:372)\n            at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:903)\n</code></pre>\n\n<p>This is the code I'm using to read excel files:</p>\n\n<pre><code>    if (isXlsxFile)\n        myWorkbook = new XSSFWorkbook(OPCPackage.open(file));\n    else\n        myWorkbook = new HSSFWorkbook(fileStream);\n    Sheet mySheet = myWorkbook.getSheetAt(0);\n    Iterator rowIterator = mySheet.rowIterator();\n</code></pre>\n\n<p>It seems that I should add xmlbeans library. After I add this dependency to my gradle file:</p>\n\n<pre><code>compile files('libs/xmlbeans-2.6.0.jar')\n</code></pre>\n\n<p>After I add this dependency I get the following error during gradle build:</p>\n\n<pre><code>Error:Execution failed for task ':app:preDexDebug'.\n&gt; com.android.ide.common.process.ProcessException: org.gradle.process.internal.ExecException: Process 'command 'C:\\Program Files\\Java\\jdk1.8.0_40\\bin\\java.exe'' finished with non-zero exit value 1\n</code></pre>\n\n<p>Any ideas on how should I approach this problem?</p>\n"},{"tags":["java","windows","javafx","fxml"],"comments":[{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":1,"creation_date":1645317936,"post_id":71188097,"comment_id":125839439,"body_markdown":"Add an event *filter* for all key events sent to the window.  Dont use fxml just [directly set it on the stage](https://openjfx.io/javadoc/17/javafx.graphics/javafx/stage/Window.html#addEventFilter(javafx.event.EventType,javafx.event.EventHandler)).  Test it for standard alphanumeric keys as well as control, shift, esc, etc, to make sure it is logging as expected.  Then test for the windows key and various windows key combinations.  If the events involving the windows key are logged, you can add appropriate conditions to filter only them, otherwise you cant.","body":"Add an event <i>filter</i> for all key events sent to the window.  Dont use fxml just <a href=\"https://openjfx.io/javadoc/17/javafx.graphics/javafx/stage/Window.html#addEventFilter(javafx.event.EventType,javafx.event.EventHandler)\" rel=\"nofollow noreferrer\">directly set it on the stage</a>.  Test it for standard alphanumeric keys as well as control, shift, esc, etc, to make sure it is logging as expected.  Then test for the windows key and various windows key combinations.  If the events involving the windows key are logged, you can add appropriate conditions to filter only them, otherwise you cant."},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1645341746,"post_id":71188097,"comment_id":125842073,"body_markdown":"If you cant do this with in-built JavaFX key handling, you could perhaps get it working with [jnativehook](https://github.com/kwhat/jnativehook). Integrating that nativehook library into JavaFX apps is a little tricky due to modularity and the native portions of the library, especially if you want to package using jlink or jpackage.","body":"If you cant do this with in-built JavaFX key handling, you could perhaps get it working with <a href=\"https://github.com/kwhat/jnativehook\" rel=\"nofollow noreferrer\">jnativehook</a>. Integrating that nativehook library into JavaFX apps is a little tricky due to modularity and the native portions of the library, especially if you want to package using jlink or jpackage."}],"owner":{"account_id":20588925,"reputation":61,"user_id":15113111,"display_name":"Thomas Basile"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1645296480,"creation_date":1645296480,"question_id":71188097,"body_markdown":"i&#39;m trying to replicate decorate Window behavior on an undecorated window, i wanna use Win+UP keys combination to maximize my window but i can&#39;t manage to put KeyCode.WINDOWS in the KeyCodeCombination so i&#39;ve used CONTROL_ANY to test it and it works but i&#39;d prefer to use Windows key instead of Ctrl, can someone help me?\r\nHere&#39;s the code i&#39;ve managed to write:\r\n\r\n    public final KeyCombination keyMax = new KeyCodeCombination\r\n                (KeyCode.UP, KeyCombination.CONTROL_ANY);\r\n    \r\n    @FXML\r\n    private void onKeyMaximize(KeyEvent event){\r\n     Stage stage = (Stage) pane1.getScene().getWindow();\r\n       if(keyMax.match(event)){\r\n         if(stage.isMaximized()){\r\n           }else {\r\n             stage.setMaximized(true);\r\n             }\r\n        }\r\n    \r\n    }","title":"How to replicate Win+UP to maximize undecorated windows?","body":"<p>i'm trying to replicate decorate Window behavior on an undecorated window, i wanna use Win+UP keys combination to maximize my window but i can't manage to put KeyCode.WINDOWS in the KeyCodeCombination so i've used CONTROL_ANY to test it and it works but i'd prefer to use Windows key instead of Ctrl, can someone help me?\nHere's the code i've managed to write:</p>\n<pre><code>public final KeyCombination keyMax = new KeyCodeCombination\n            (KeyCode.UP, KeyCombination.CONTROL_ANY);\n\n@FXML\nprivate void onKeyMaximize(KeyEvent event){\n Stage stage = (Stage) pane1.getScene().getWindow();\n   if(keyMax.match(event)){\n     if(stage.isMaximized()){\n       }else {\n         stage.setMaximized(true);\n         }\n    }\n\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","junit","spring-data"],"comments":[{"owner":{"account_id":4668137,"reputation":6228,"user_id":9681755,"display_name":"Dirk Deyne"},"score":2,"creation_date":1645293644,"post_id":71187668,"comment_id":125834738,"body_markdown":"You can use `Pageable pageable = PageRequest.of(0, 20);`","body":"You can use <code>Pageable pageable = PageRequest.of(0, 20);</code>"}],"answers":[{"tags":[],"owner":{"account_id":18452928,"reputation":2722,"user_id":14927001,"display_name":"Dmitrii B"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645295917,"creation_date":1645295917,"answer_id":71188011,"question_id":71187668,"body_markdown":"There are two ways. Usually, for making unit test we use mock objects(Junit+Mockito lib) because Unit-test is a behavior test. Hence first way is just mocking Pageable class:\r\n\r\n    final Pageable sourcePageable = mock(Pageable.class);\r\n\r\nand getting a size and a number of page by &quot;when/then&quot;:\r\n\r\n    when(sourcePageable.getPageNumber()).thenReturn(1);\r\n    when(sourcePageable.getPageSize()).thenReturn(20);\r\n\r\nThe second way as said Dirk Deyne above is creating a type which is implementing `Pageable` interface(for example `PageRequest`)\r\n\r\nWhich of them you will use is up to you.\r\n\r\n","title":"How can I correctly create a JUnit test method testing a service method that needs a Pageable object for pagination?","body":"<p>There are two ways. Usually, for making unit test we use mock objects(Junit+Mockito lib) because Unit-test is a behavior test. Hence first way is just mocking Pageable class:</p>\n<pre><code>final Pageable sourcePageable = mock(Pageable.class);\n</code></pre>\n<p>and getting a size and a number of page by &quot;when/then&quot;:</p>\n<pre><code>when(sourcePageable.getPageNumber()).thenReturn(1);\nwhen(sourcePageable.getPageSize()).thenReturn(20);\n</code></pre>\n<p>The second way as said Dirk Deyne above is creating a type which is implementing <code>Pageable</code> interface(for example <code>PageRequest</code>)</p>\n<p>Which of them you will use is up to you.</p>\n"},{"tags":[],"owner":{"account_id":6915613,"reputation":81,"user_id":5310008,"display_name":"roy man"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645296340,"creation_date":1645295921,"answer_id":71188012,"question_id":71187668,"body_markdown":"for Unit Tests you can mock the dependencies which are out of scope of the tests.\r\n\r\nI guess the most popular framework for this job in Java is Mockito\r\n\r\njust use \r\n\r\n```java\r\nimport static org.mockito.Mockito.*;\r\nimport org.springframework.data.domain.Pageable;\r\n\r\nimport org.junit.jupiter.api.Test\r\n\r\nclass MyTest {\r\n  \r\n  @Test\r\n  void testMock() {\r\n    var pageableMock = mock(Pageable.class);\r\n    ....\r\n  }\r\n}\r\n```\r\n\r\nif you have the return values of the mock are used you can even mock the `Pageable` methods.\r\n\r\n```java\r\nwhen(pageableMock.getPageNumber()).thenReturn(1);\r\nwhen(pageableMock.getPageSize()).thenReturn(DEFAULT_PAGE_SIZE);\r\n```","title":"How can I correctly create a JUnit test method testing a service method that needs a Pageable object for pagination?","body":"<p>for Unit Tests you can mock the dependencies which are out of scope of the tests.</p>\n<p>I guess the most popular framework for this job in Java is Mockito</p>\n<p>just use</p>\n<pre class=\"lang-java prettyprint-override\"><code>import static org.mockito.Mockito.*;\nimport org.springframework.data.domain.Pageable;\n\nimport org.junit.jupiter.api.Test\n\nclass MyTest {\n  \n  @Test\n  void testMock() {\n    var pageableMock = mock(Pageable.class);\n    ....\n  }\n}\n</code></pre>\n<p>if you have the return values of the mock are used you can even mock the <code>Pageable</code> methods.</p>\n<pre class=\"lang-java prettyprint-override\"><code>when(pageableMock.getPageNumber()).thenReturn(1);\nwhen(pageableMock.getPageSize()).thenReturn(DEFAULT_PAGE_SIZE);\n</code></pre>\n"}],"owner":{"account_id":2056257,"reputation":41415,"user_id":1833945,"accept_rate":65,"display_name":"AndreaNobili"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":864,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1645296340,"creation_date":1645293448,"question_id":71187668,"body_markdown":"I have this service method that must be tested using JUnit:\r\n\r\n\t@Override\r\n\tpublic Page&lt;WalletDTO&gt; getWalletListByWalletTypes(List&lt;String&gt; walletTypesIds, Pageable pageable) throws NotFoundException {\r\n\r\n\t\tif(walletTypesIds == null) {\r\n\t\t\tPage&lt;Wallet&gt; walletsDTOList = this.walletRepository.findAll(pageable);\r\n\t\t\treturn walletsDTOList.map(m -&gt; conversionService.convert(m, WalletDTO.class));\r\n\t\t}\r\n\t\tList&lt;WalletType&gt; walletsTypesEntity = new ArrayList&lt;&gt;();\r\n\t\tfor(String wt : walletTypesIds){\r\n\t\t\t//WalletType wtEntity = this.walletTypeRepository.findByName(wt);\r\n\t\t\tWalletType wtEntity = this.walletTypeRepository.findById(Integer.parseInt(wt)).get();\r\n\t\t\tif(wtEntity == null) throw new NotFoundException(&quot;WalletType not found: &quot; + wt);\r\n\t\t\twalletsTypesEntity.add(wtEntity);\r\n\t\t}\r\n\r\n\t\t\r\n\t\tPage&lt;Wallet&gt; walletsDTOList = this.walletRepository.findByWalletTypeIn(walletsTypesEntity,pageable);\r\n\t\treturn walletsDTOList.map(m -&gt; conversionService.convert(m, WalletDTO.class));\r\n\t\t\r\n\t}\r\n\r\nAs you can see it takes the **Pageable pageable** object as input parameter in order to page the result.\r\n\r\nThen I created a JUnit test method like this:\r\n\r\n\t@Test\r\n\t@Order(2)\r\n\tpublic void getWalletListByWalletTypesTest() throws NotFoundException {\r\n\t\t\r\n\t\tList&lt;String&gt; singleItemList = Arrays.asList(&quot;1&quot;);\r\n\t\tList&lt;String&gt; multiItemsList = Arrays.asList(&quot;1&quot;, &quot;2&quot;, &quot;3&quot;);\r\n\t\t\r\n\t\tPage&lt;WalletDTO&gt; walletsType1DTOList =  this.walletService.getWalletListByWalletTypes(singleItemList, null);\r\n\t\tPage&lt;WalletDTO&gt; walletsAlltypesDTOList =  this.walletService.getWalletListByWalletTypes(multiItemsList, null);\r\n\t\t\r\n\t\t\r\n\t\tassertTrue(walletsType1DTOList.getNumberOfElements() &gt; 0, &quot;Exist at least one wallet&quot;);\r\n\t\tassertTrue(walletsAlltypesDTOList.getNumberOfElements() &gt; 0, &quot;Exist at least one wallet&quot;);\r\n\t\tassertTrue(walletsAlltypesDTOList.getNumberOfElements() &lt; walletsType1DTOList.getNumberOfElements(), \r\n\t\t\t\t   &quot;The wallets belonging to all the wallets types are &gt; then the wallet belonging to a single wallet type&quot;);\r\n\t\t\r\n\t}\r\n\r\nBut it is not working because when it call the **getWalletListByWalletTypes()** method to be tested it is passing **null** instead passing this **Pageable** parameter. So when the method is executed it thrown an exception when this line of code (when it call the repository method to retrieve data from DB) is executed:\r\n\r\n    Page&lt;Wallet&gt; walletsDTOList = this.walletRepository.findByWalletTypeIn(walletsTypesEntity,pageable);\r\n\r\nit seems to me that I cannot create a **Pageable** object or I am not uderstending how.\r\n\r\nWhat is the way to correctly test a method like this?","title":"How can I correctly create a JUnit test method testing a service method that needs a Pageable object for pagination?","body":"<p>I have this service method that must be tested using JUnit:</p>\n<pre><code>@Override\npublic Page&lt;WalletDTO&gt; getWalletListByWalletTypes(List&lt;String&gt; walletTypesIds, Pageable pageable) throws NotFoundException {\n\n    if(walletTypesIds == null) {\n        Page&lt;Wallet&gt; walletsDTOList = this.walletRepository.findAll(pageable);\n        return walletsDTOList.map(m -&gt; conversionService.convert(m, WalletDTO.class));\n    }\n    List&lt;WalletType&gt; walletsTypesEntity = new ArrayList&lt;&gt;();\n    for(String wt : walletTypesIds){\n        //WalletType wtEntity = this.walletTypeRepository.findByName(wt);\n        WalletType wtEntity = this.walletTypeRepository.findById(Integer.parseInt(wt)).get();\n        if(wtEntity == null) throw new NotFoundException(&quot;WalletType not found: &quot; + wt);\n        walletsTypesEntity.add(wtEntity);\n    }\n\n    \n    Page&lt;Wallet&gt; walletsDTOList = this.walletRepository.findByWalletTypeIn(walletsTypesEntity,pageable);\n    return walletsDTOList.map(m -&gt; conversionService.convert(m, WalletDTO.class));\n    \n}\n</code></pre>\n<p>As you can see it takes the <strong>Pageable pageable</strong> object as input parameter in order to page the result.</p>\n<p>Then I created a JUnit test method like this:</p>\n<pre><code>@Test\n@Order(2)\npublic void getWalletListByWalletTypesTest() throws NotFoundException {\n    \n    List&lt;String&gt; singleItemList = Arrays.asList(&quot;1&quot;);\n    List&lt;String&gt; multiItemsList = Arrays.asList(&quot;1&quot;, &quot;2&quot;, &quot;3&quot;);\n    \n    Page&lt;WalletDTO&gt; walletsType1DTOList =  this.walletService.getWalletListByWalletTypes(singleItemList, null);\n    Page&lt;WalletDTO&gt; walletsAlltypesDTOList =  this.walletService.getWalletListByWalletTypes(multiItemsList, null);\n    \n    \n    assertTrue(walletsType1DTOList.getNumberOfElements() &gt; 0, &quot;Exist at least one wallet&quot;);\n    assertTrue(walletsAlltypesDTOList.getNumberOfElements() &gt; 0, &quot;Exist at least one wallet&quot;);\n    assertTrue(walletsAlltypesDTOList.getNumberOfElements() &lt; walletsType1DTOList.getNumberOfElements(), \n               &quot;The wallets belonging to all the wallets types are &gt; then the wallet belonging to a single wallet type&quot;);\n    \n}\n</code></pre>\n<p>But it is not working because when it call the <strong>getWalletListByWalletTypes()</strong> method to be tested it is passing <strong>null</strong> instead passing this <strong>Pageable</strong> parameter. So when the method is executed it thrown an exception when this line of code (when it call the repository method to retrieve data from DB) is executed:</p>\n<pre><code>Page&lt;Wallet&gt; walletsDTOList = this.walletRepository.findByWalletTypeIn(walletsTypesEntity,pageable);\n</code></pre>\n<p>it seems to me that I cannot create a <strong>Pageable</strong> object or I am not uderstending how.</p>\n<p>What is the way to correctly test a method like this?</p>\n"},{"tags":["java","parent-child","a-star"],"answers":[{"tags":[],"owner":{"account_id":4962253,"reputation":18492,"user_id":3992939,"accept_rate":73,"display_name":"c0der"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1645295227,"creation_date":1645295227,"answer_id":71187906,"question_id":71137834,"body_markdown":"That is what you want: \r\n\r\n\twhile(x.parent.actionFromParent != null){\r\n\t\tSystem.out.println(x.actionFromParent);\r\n\t\tSystem.out.println(x.parent.actionFromParent);\r\n\t\tx = x.parent;\r\n\t}","title":"an object where it has a parent and an action and each parent has a parent and an action","body":"<p>That is what you want:</p>\n<pre><code>while(x.parent.actionFromParent != null){\n    System.out.println(x.actionFromParent);\n    System.out.println(x.parent.actionFromParent);\n    x = x.parent;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5418581,"reputation":347,"user_id":4313009,"display_name":"Alfredo Tost&#243;n"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1645296050,"creation_date":1645295691,"answer_id":71187973,"question_id":71137834,"body_markdown":"You can use a `while` loop or a recursive function.\r\n\r\nWith a `while` loop:\r\n```\r\nState x = theState;\r\nwhile (x != null &amp;&amp; x.actionFromParent != null) {\r\n    System.out.println(x.actionFromParent);\r\n    x = x.parent;\r\n}\r\n```\r\n\r\nWith a recursive function:\r\n```\r\npublic static void printActionsFromParent(State x) {\r\n    if (x != null &amp;&amp; x.actionFromParent != null) {\r\n        System.out.println(x.actionFromParent);\r\n        printActionsFromParent(x.parent);\r\n    }\r\n}\r\n```","title":"an object where it has a parent and an action and each parent has a parent and an action","body":"<p>You can use a <code>while</code> loop or a recursive function.</p>\n<p>With a <code>while</code> loop:</p>\n<pre><code>State x = theState;\nwhile (x != null &amp;&amp; x.actionFromParent != null) {\n    System.out.println(x.actionFromParent);\n    x = x.parent;\n}\n</code></pre>\n<p>With a recursive function:</p>\n<pre><code>public static void printActionsFromParent(State x) {\n    if (x != null &amp;&amp; x.actionFromParent != null) {\n        System.out.println(x.actionFromParent);\n        printActionsFromParent(x.parent);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":19801418,"reputation":101,"user_id":14502339,"display_name":"asmazizou"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":116,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71187906,"answer_count":2,"score":1,"last_activity_date":1645296135,"creation_date":1644996708,"question_id":71137834,"body_markdown":"How can I do this in Java\r\n\r\n```java\r\npublic class State implements Comparable&lt;State&gt; {\r\n    //other attbs;\r\n    State parent;\r\n    String actionFromParent;\r\n// other code\r\n}\r\n```\r\n\r\nwhere x is an object of type State and each parent itself has an action from parent. I want to do this until I have actionFromParent == null.\r\n\r\n\r\nI don&#39;t know how many parents there are. I&#39;m using this to print the path for A* algorithm. I&#39;m stuck at printing the path after x (state currentnode) satisfies the goal, I print all actionfromparents of its child nodes.\r\n\r\n```java\r\nSystem.out.println(x.actionFromParent);\r\nSystem.out.println(x.parent.actionFromParent);\r\nSystem.out.println(x.parent.parent.actionFromParent);\r\nSystem.out.println(x.parent.parent.parent.actionFromParent);\r\n.....\r\nuntil  (x.parent.parent.parent.....parent.actionFromParent == null)\r\n```","title":"an object where it has a parent and an action and each parent has a parent and an action","body":"<p>How can I do this in Java</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class State implements Comparable&lt;State&gt; {\n    //other attbs;\n    State parent;\n    String actionFromParent;\n// other code\n}\n</code></pre>\n<p>where x is an object of type State and each parent itself has an action from parent. I want to do this until I have actionFromParent == null.</p>\n<p>I don't know how many parents there are. I'm using this to print the path for A* algorithm. I'm stuck at printing the path after x (state currentnode) satisfies the goal, I print all actionfromparents of its child nodes.</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.println(x.actionFromParent);\nSystem.out.println(x.parent.actionFromParent);\nSystem.out.println(x.parent.parent.actionFromParent);\nSystem.out.println(x.parent.parent.parent.actionFromParent);\n.....\nuntil  (x.parent.parent.parent.....parent.actionFromParent == null)\n</code></pre>\n"},{"tags":["java","regex","sonarqube"],"answers":[{"tags":[],"owner":{"account_id":6593416,"reputation":27460,"user_id":5093961,"display_name":"Steven Spungin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645290985,"creation_date":1645290985,"answer_id":71187303,"question_id":71186659,"body_markdown":"This will match all negative signs before digits in basic expressions. Execute, and then replace the entire match with a `~`.\r\n\r\nYou did not post your input set, so there might be other cases that need to be coded.\r\n\r\n```\r\n(?&lt;=[-+*\\/0-9 ]|^)-(?=[\\d]+)\r\n```\r\n\r\nHere are some examples of replacements\r\nhttps://regex101.com/r/3H30tU/1https://regex101.com/r/3H30tU/1","title":"Rewrite a Regular Expression without Catastrophic Backtracking?","body":"<p>This will match all negative signs before digits in basic expressions. Execute, and then replace the entire match with a <code>~</code>.</p>\n<p>You did not post your input set, so there might be other cases that need to be coded.</p>\n<pre><code>(?&lt;=[-+*\\/0-9 ]|^)-(?=[\\d]+)\n</code></pre>\n<p>Here are some examples of replacements\n<a href=\"https://regex101.com/r/3H30tU/1https://regex101.com/r/3H30tU/1\" rel=\"nofollow noreferrer\">https://regex101.com/r/3H30tU/1https://regex101.com/r/3H30tU/1</a></p>\n"},{"tags":[],"owner":{"account_id":7089168,"reputation":157118,"user_id":5424988,"display_name":"The fourth bird"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1645295977,"creation_date":1645295977,"answer_id":71188024,"question_id":71186659,"body_markdown":"In the patten `(.*?[^0-9]+?)-([0-9.]+?.*?)` the non greedy part `.*?` at the end can be omitted, as it will not match any characters.\r\n\r\nThis part `[0-9.]+?` will only match 1 character as the quantifier is non greedy so the quantifier can be omitted (as the following `.*?` does not match any character)\r\n\r\nYou can use lookarounds with just a single character in the assertions:\r\n\r\n    (?&lt;!\\d)-(?=\\d)\r\n\r\n- `(?&lt;!\\d)` Negative lookbehind, assert not a digit directly to the left of the current position\r\n- `-` Match a hyphen\r\n- `(?=\\d)` Positive lookahead, assert a digit directly to the right of the current positions\r\n\r\n[Regex demo](https://regex101.com/r/K8tUVK/1)","title":"Rewrite a Regular Expression without Catastrophic Backtracking?","body":"<p>In the patten <code>(.*?[^0-9]+?)-([0-9.]+?.*?)</code> the non greedy part <code>.*?</code> at the end can be omitted, as it will not match any characters.</p>\n<p>This part <code>[0-9.]+?</code> will only match 1 character as the quantifier is non greedy so the quantifier can be omitted (as the following <code>.*?</code> does not match any character)</p>\n<p>You can use lookarounds with just a single character in the assertions:</p>\n<pre><code>(?&lt;!\\d)-(?=\\d)\n</code></pre>\n<ul>\n<li><code>(?&lt;!\\d)</code> Negative lookbehind, assert not a digit directly to the left of the current position</li>\n<li><code>-</code> Match a hyphen</li>\n<li><code>(?=\\d)</code> Positive lookahead, assert a digit directly to the right of the current positions</li>\n</ul>\n<p><a href=\"https://regex101.com/r/K8tUVK/1\" rel=\"nofollow noreferrer\">Regex demo</a></p>\n"}],"owner":{"account_id":8692917,"reputation":65,"user_id":6505316,"display_name":"terranche"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":436,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":71188024,"answer_count":2,"score":0,"last_activity_date":1645295977,"creation_date":1645286507,"question_id":71186659,"body_markdown":"I was wondering if anyone could examine this regular expression and rewrite it without catastrophic backtracking?  My SonarQube seems to be upset.  ;)\r\n\r\n```\r\nString NEGATIVE = &quot;(.*?[^0-9]+?)-([0-9.]+?.*?)&quot;;\r\n```\r\n\r\nAccording to the Java code, it is attempting use this expression to help find and replace negative number signs with tilde characters.\r\n\r\n```\r\n// Replace any negative number signs as they will\r\n// be confused with the subtraction operator.\r\nexpression = expression.replaceAll(NEGATIVE, &quot;$1~$2&quot;).replaceFirst(&quot;^-&quot;, &quot;~&quot;);\r\n```\r\n\r\nThanks.\r\n","title":"Rewrite a Regular Expression without Catastrophic Backtracking?","body":"<p>I was wondering if anyone could examine this regular expression and rewrite it without catastrophic backtracking?  My SonarQube seems to be upset.  ;)</p>\n<pre><code>String NEGATIVE = &quot;(.*?[^0-9]+?)-([0-9.]+?.*?)&quot;;\n</code></pre>\n<p>According to the Java code, it is attempting use this expression to help find and replace negative number signs with tilde characters.</p>\n<pre><code>// Replace any negative number signs as they will\n// be confused with the subtraction operator.\nexpression = expression.replaceAll(NEGATIVE, &quot;$1~$2&quot;).replaceFirst(&quot;^-&quot;, &quot;~&quot;);\n</code></pre>\n<p>Thanks.</p>\n"},{"tags":["java","exception","class","error-handling"],"answers":[{"tags":[],"owner":{"account_id":70088,"reputation":12426,"user_id":203600,"accept_rate":100,"display_name":"Jonathon Faust"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1271185376,"creation_date":1271184398,"answer_id":2632278,"question_id":2632249,"body_markdown":"Classes cannot throw exceptions.  Only methods may throw exceptions.  Avoid using the base `Exception` class.  Throw a specific exception like IllegalStateException or extend `Exception` and make your own.","title":"Java: exception-throwing class?","body":"<p>Classes cannot throw exceptions.  Only methods may throw exceptions.  Avoid using the base <code>Exception</code> class.  Throw a specific exception like IllegalStateException or extend <code>Exception</code> and make your own.</p>\n"},{"tags":[],"owner":{"account_id":36759,"reputation":38034,"user_id":104950,"accept_rate":93,"display_name":"Amir Afghani"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1271185249,"creation_date":1271184580,"answer_id":2632305,"question_id":2632249,"body_markdown":"You have a static code block that throws an exception?  If you really need to do this throw a `RuntimeException` - otherwise move your logic into a method associated with a DirReader or Search class and have those methods throw the appropriate `Exception`.\r\n\r\nHere&#39;s an example you can start with:\r\n\r\n    public class test { \r\n    \r\n    \r\n        static {\r\n            try {\r\n                method1();\r\n            } catch (InterruptedException e) {\r\n                throw new RuntimeException();\r\n            }\r\n        }\r\n    \r\n        protected static void method1() throws InterruptedException {        \r\n            Thread.sleep(1000);        \r\n        }\r\n    \r\n    \r\n    }","title":"Java: exception-throwing class?","body":"<p>You have a static code block that throws an exception?  If you really need to do this throw a <code>RuntimeException</code> - otherwise move your logic into a method associated with a DirReader or Search class and have those methods throw the appropriate <code>Exception</code>.</p>\n\n<p>Here's an example you can start with:</p>\n\n<pre><code>public class test { \n\n\n    static {\n        try {\n            method1();\n        } catch (InterruptedException e) {\n            throw new RuntimeException();\n        }\n    }\n\n    protected static void method1() throws InterruptedException {        \n        Thread.sleep(1000);        \n    }\n\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2496,"reputation":266234,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1271185394,"creation_date":1271185394,"answer_id":2632403,"question_id":2632249,"body_markdown":"It is a compile-time error for a class initializer (&quot;static block&quot;) to terminate with a checked exception. \r\n\r\nIf a class initializer throws an *unchecked* exception, the first attempt to initialize the class will raise an `ExceptionInInitializeError`. Any subsequent attempts to use the class will cause a `NoClassDefFoundError`. If you really want to use an exception, throw something like a `RuntimeException` in the initializer.\r\n\r\nHowever, the approach shown in the question&amp;mdash;setting a flag when the class is initialized correctly&amp;mdash;might actually be a better one for many applications. More specifically, I&#39;d say that unless you want the whole program to terminate when there&#39;s a initialization failure, use a flag. Just remove the &quot;throws&quot; clause from the class declaration, because that isn&#39;t a legal syntax.\r\n","title":"Java: exception-throwing class?","body":"<p>It is a compile-time error for a class initializer (\"static block\") to terminate with a checked exception. </p>\n\n<p>If a class initializer throws an <em>unchecked</em> exception, the first attempt to initialize the class will raise an <code>ExceptionInInitializeError</code>. Any subsequent attempts to use the class will cause a <code>NoClassDefFoundError</code>. If you really want to use an exception, throw something like a <code>RuntimeException</code> in the initializer.</p>\n\n<p>However, the approach shown in the question&mdash;setting a flag when the class is initialized correctly&mdash;might actually be a better one for many applications. More specifically, I'd say that unless you want the whole program to terminate when there's a initialization failure, use a flag. Just remove the \"throws\" clause from the class declaration, because that isn't a legal syntax.</p>\n"},{"tags":[],"owner":{"account_id":62111,"reputation":40153,"user_id":184730,"accept_rate":72,"display_name":"fastcodejava"},"down_vote_count":0,"up_vote_count":44,"is_accepted":false,"score":44,"last_activity_date":1271185952,"creation_date":1271185952,"answer_id":2632470,"question_id":2632249,"body_markdown":"The `throws` keyword cannot be applied at class level, only at the method level.","title":"Java: exception-throwing class?","body":"<p>The <code>throws</code> keyword cannot be applied at class level, only at the method level.</p>\n"},{"tags":[],"owner":{"account_id":14697258,"reputation":1,"user_id":10614313,"display_name":"Hosein Abdollahipoor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1559892943,"creation_date":1559892943,"answer_id":56489930,"question_id":2632249,"body_markdown":"You can&#39;t throw an exception in class definition. You should throw your exception in method definition or use try-catch block.","title":"Java: exception-throwing class?","body":"<p>You can't throw an exception in class definition. You should throw your exception in method definition or use try-catch block.</p>\n"},{"tags":[],"owner":{"account_id":21080024,"reputation":41,"user_id":15494558,"display_name":"Minato"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645295280,"creation_date":1645295280,"answer_id":71187917,"question_id":2632249,"body_markdown":"throwing a specific type of Exceptions will reduce bugs because the base class **Exception** can handle all the types of exceptions.\r\n\r\nyou can find more details here about types of exceptions in the link below :\r\n[here][1]\r\n\r\n\r\n  [1]: https://www.geeksforgeeks.org/types-of-exception-in-java-with-examples/\r\n\r\nthis will give you an idea about types of exceptions.\r\nPS : only methods can handle exceptions in java. ","title":"Java: exception-throwing class?","body":"<p>throwing a specific type of Exceptions will reduce bugs because the base class <strong>Exception</strong> can handle all the types of exceptions.</p>\n<p>you can find more details here about types of exceptions in the link below :\n<a href=\"https://www.geeksforgeeks.org/types-of-exception-in-java-with-examples/\" rel=\"nofollow noreferrer\">here</a></p>\n<p>this will give you an idea about types of exceptions.\nPS : only methods can handle exceptions in java.</p>\n"}],"owner":{"account_id":54832,"reputation":51238,"user_id":164148,"accept_rate":82,"display_name":"hhh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65580,"favorite_count":0,"down_vote_count":0,"up_vote_count":17,"accepted_answer_id":2632403,"answer_count":6,"score":17,"last_activity_date":1645295280,"creation_date":1271184200,"question_id":2632249,"body_markdown":"I have classes DirReader and Search. The search uses DirReader. I want the search to know when DirReader throws exception. So how can I have class throwing exception?\r\n\r\nCurrently, I use initCorrect -dummy var. Exception-style method may be more appropriate.\r\n\r\n**Simplified Example Error**\r\n\r\n    $ javac ExceptionStatic.java \r\n    ExceptionStatic.java:4: &#39;{&#39; expected\r\n    public class ExceptionStatic throws Exception{\r\n                                ^\r\n    1 error\r\n    \r\n**Code** \r\n\r\n    import java.util.*;\r\n    import java.io.*;\r\n    \r\n    // THIS PART NEEDS TO BE FIXED:\r\n    public class ExceptionStatic throws Exception{\r\n    \r\n    \tprivate static boolean initCorrect = false;\r\n    \r\n    \tpublic static String hello;\r\n    \tstatic{\r\n    \t\ttry{\r\n    \t\t\thello = &quot;hallo&quot;;\r\n                      \r\n                //some other conditionals in real code\r\n    \t\t\tif( true) throw new Exception();\r\n    \r\n    \t\t\tinitCorrect=true;\r\n    \t\t}catch(Exception e){\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args){\r\n    \t\tif(initCorrect)\r\n    \t\t\tSystem.out.println(hello);\r\n    \t}\r\n    }\r\n\r\n","title":"Java: exception-throwing class?","body":"<p>I have classes DirReader and Search. The search uses DirReader. I want the search to know when DirReader throws exception. So how can I have class throwing exception?</p>\n\n<p>Currently, I use initCorrect -dummy var. Exception-style method may be more appropriate.</p>\n\n<p><strong>Simplified Example Error</strong></p>\n\n<pre><code>$ javac ExceptionStatic.java \nExceptionStatic.java:4: '{' expected\npublic class ExceptionStatic throws Exception{\n                            ^\n1 error\n</code></pre>\n\n<p><strong>Code</strong> </p>\n\n<pre><code>import java.util.*;\nimport java.io.*;\n\n// THIS PART NEEDS TO BE FIXED:\npublic class ExceptionStatic throws Exception{\n\n    private static boolean initCorrect = false;\n\n    public static String hello;\n    static{\n        try{\n            hello = \"hallo\";\n\n            //some other conditionals in real code\n            if( true) throw new Exception();\n\n            initCorrect=true;\n        }catch(Exception e){\n            e.printStackTrace();\n        }\n    }\n\n    public static void main(String[] args){\n        if(initCorrect)\n            System.out.println(hello);\n    }\n}\n</code></pre>\n"},{"tags":["java","docker","kotlin","amazon-ecr","testcontainers"],"comments":[{"owner":{"account_id":12480263,"reputation":10843,"user_id":9085273,"display_name":"rieckpil"},"score":0,"creation_date":1645343420,"post_id":71187318,"comment_id":125842368,"body_markdown":"This [issue on GitHub](https://github.com/testcontainers/testcontainers-java/issues/1689) didn&#39;t provide any help? What have you tried so far to pass the ECR credentials?","body":"This <a href=\"https://github.com/testcontainers/testcontainers-java/issues/1689\" rel=\"nofollow noreferrer\">issue on GitHub</a> didn&#39;t provide any help? What have you tried so far to pass the ECR credentials?"},{"owner":{"account_id":4645308,"reputation":616,"user_id":3763828,"accept_rate":11,"display_name":"rmpt"},"score":0,"creation_date":1645465422,"post_id":71187318,"comment_id":125873608,"body_markdown":"I&#39;ve been searching for the exact same answer. Looking into LocalStack now...","body":"I&#39;ve been searching for the exact same answer. Looking into LocalStack now..."},{"owner":{"account_id":298886,"reputation":40480,"user_id":605153,"accept_rate":67,"display_name":"Mark Bramnik"},"score":0,"creation_date":1666078625,"post_id":71187318,"comment_id":130844091,"body_markdown":"I&#39;ve stumbled upon the same issue, have you happened to find a solution for that?","body":"I&#39;ve stumbled upon the same issue, have you happened to find a solution for that?"},{"owner":{"account_id":1322374,"reputation":107,"user_id":1267909,"display_name":"Jeff Trimmer"},"score":1,"creation_date":1666385527,"post_id":71187318,"comment_id":130933161,"body_markdown":"@MarkBramnik I ended up using a GitHub action to pull the docker image for the CICD pipelines, so it was found local when running the testing suite. And for running local I had to pull the image in advance with AWS cli. So, in short, not really, but did find a workaround.","body":"@MarkBramnik I ended up using a GitHub action to pull the docker image for the CICD pipelines, so it was found local when running the testing suite. And for running local I had to pull the image in advance with AWS cli. So, in short, not really, but did find a workaround."}],"owner":{"account_id":1322374,"reputation":107,"user_id":1267909,"display_name":"Jeff Trimmer"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1730,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":0,"score":5,"last_activity_date":1645294915,"creation_date":1645291082,"question_id":71187318,"body_markdown":"I am trying to programmatically create and spin up a Testcontainers `GenericContainer` from a docker image hosted in a private AWS ECR repository. This will be used for automated integration tests, will be run locally and within CICD pipelines. I know I need to authenticate to pull down the image but it is not clear to me how best to get and pass authentication information from AWS to the Testcontainers context. I&#39;ve read over the Testcontainers  documentation but have not found details on how to authenticate to a private docker container repository.\r\n\r\nCode I have so far is:\r\n```\r\nimport org.testcontainers.containers.GenericContainer\r\nimport org.testcontainers.utility.DockerImageName\r\n\r\nconst val imageName = &quot;&lt;account&gt;.dkr.ecr.&lt;region&gt;.amazonaws.com/&lt;imageName&gt;:&lt;version&gt;&quot;\r\nval testContainer = GenericContainer(DockerImageName.parse(imageName))\r\ntestContainer.start()\r\n```\r\nOf course, this gives an error:\r\n```\r\nat org.testcontainers.shaded.com.github.dockerjava.core.DefaultInvocationBuilder.execute(DefaultInvocationBuilder.java:247)\r\n\tat org.testcontainers.shaded.com.github.dockerjava.core.DefaultInvocationBuilder.lambda$executeAndStream$1(DefaultInvocationBuilder.java:269)\r\n\tat java.base/java.lang.Thread.run(Thread.java:833)\r\ncom.github.dockerjava.api.exception.InternalServerErrorException: Status 500: {&quot;message&quot;:&quot;Head \\&quot;https://&lt;account&gt;.dkr.ecr.&lt;region&gt;.amazonaws.com/v2/&lt;imageName&gt;/manifests/&lt;version&gt;\\&quot;: no basic auth credentials&quot;}\r\n\r\n```\r\nSo far I have found Testcontainers to be intuitive to use for all things, but this problem has got me stumped. How does one use Testcontainers with private AWS ECR repositories?","title":"How to pull a private docker image from AWS ECR to use with the Testcontainers library in Java/Kotlin?","body":"<p>I am trying to programmatically create and spin up a Testcontainers <code>GenericContainer</code> from a docker image hosted in a private AWS ECR repository. This will be used for automated integration tests, will be run locally and within CICD pipelines. I know I need to authenticate to pull down the image but it is not clear to me how best to get and pass authentication information from AWS to the Testcontainers context. I've read over the Testcontainers  documentation but have not found details on how to authenticate to a private docker container repository.</p>\n<p>Code I have so far is:</p>\n<pre><code>import org.testcontainers.containers.GenericContainer\nimport org.testcontainers.utility.DockerImageName\n\nconst val imageName = &quot;&lt;account&gt;.dkr.ecr.&lt;region&gt;.amazonaws.com/&lt;imageName&gt;:&lt;version&gt;&quot;\nval testContainer = GenericContainer(DockerImageName.parse(imageName))\ntestContainer.start()\n</code></pre>\n<p>Of course, this gives an error:</p>\n<pre><code>at org.testcontainers.shaded.com.github.dockerjava.core.DefaultInvocationBuilder.execute(DefaultInvocationBuilder.java:247)\n    at org.testcontainers.shaded.com.github.dockerjava.core.DefaultInvocationBuilder.lambda$executeAndStream$1(DefaultInvocationBuilder.java:269)\n    at java.base/java.lang.Thread.run(Thread.java:833)\ncom.github.dockerjava.api.exception.InternalServerErrorException: Status 500: {&quot;message&quot;:&quot;Head \\&quot;https://&lt;account&gt;.dkr.ecr.&lt;region&gt;.amazonaws.com/v2/&lt;imageName&gt;/manifests/&lt;version&gt;\\&quot;: no basic auth credentials&quot;}\n\n</code></pre>\n<p>So far I have found Testcontainers to be intuitive to use for all things, but this problem has got me stumped. How does one use Testcontainers with private AWS ECR repositories?</p>\n"},{"tags":["java","java-11","java-17"],"answers":[{"tags":[],"owner":{"display_name":"user14560339"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1645294372,"creation_date":1624907081,"answer_id":68168810,"question_id":68168691,"body_markdown":"Maybe try adding a vm parameter at lauch:\r\n\r\n    java --add-opens java.base/java.lang=ALL-UNNAMED\r\n\r\nThe --illegal-access is set to become ineffective in Java 17 (all values are equivalent to deny) but it will still be possible to use the --add-opens command-line option, or the Add-Opens JAR-file manifest attribute, to open specific packages (cf. openjdk.java.net/jeps/403 )","title":"java.lang.reflect.InaccessibleObjectException: Unable to make protected final java.lang.Class when upgrade from java 11 to 17","body":"<p>Maybe try adding a vm parameter at lauch:</p>\n<pre><code>java --add-opens java.base/java.lang=ALL-UNNAMED\n</code></pre>\n<p>The --illegal-access is set to become ineffective in Java 17 (all values are equivalent to deny) but it will still be possible to use the --add-opens command-line option, or the Add-Opens JAR-file manifest attribute, to open specific packages (cf. openjdk.java.net/jeps/403 )</p>\n"}],"owner":{"account_id":2994486,"reputation":9111,"user_id":2541276,"accept_rate":55,"display_name":"user51"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30884,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"closed_date":1624928585,"answer_count":1,"score":6,"last_activity_date":1645294372,"creation_date":1624906390,"question_id":68168691,"body_markdown":"our project uses [schema-repo-server][1].\r\nThe code for starting the schema-repo-server is below - \r\n\r\n        package technorati.tut.fes;\r\n        \r\n        import org.schemarepo.server.RepositoryServer;\r\n        import java.util.Properties;\r\n        \r\n        public class Main2 {\r\n            public static void main(String[] args) throws Exception {\r\n                Properties props = new Properties();\r\n                props.put(&quot;schema-repo.class&quot;, &quot;com.technorati.camus.schemaregistry.ZooKeeperRepository&quot;);\r\n                props.put(&quot;schema-repo.zookeeper.ensemble&quot;, &quot;kafka01.cap.qa.opal.synacor.com:2181,kafka02.cap.qa.opal.synacor.com:2181,kafka03.cap.qa.opal.synacor.com:2181&quot;);\r\n                RepositoryServer rs = new RepositoryServer(props);\r\n                rs.start();\r\n            }\r\n        \r\n        }\r\n        \r\n\r\nThis code is working fine in java11.\r\n\r\nI&#39;m upgrading java version from java 11 to java 17. After the upgrade when I start the service I get below error.\r\n\r\n\r\n\r\nNote: modules in the startup list are --add-opens java.base/java.lang=ALL-UNNAMED --add-opens java.base/java.util=ALL-UNNAMED --add-opens jdk.management/com.sun.management.internal=ALL-UNNAMED \r\n\r\nHow can I fix this issue?\r\n&gt;\t14:18:48 INFO  [org.schemarepo.server.RepositoryServer  ] Routing java.util.logging traffic through SLF4J\r\n&gt;\tException in thread &quot;main&quot; com.google.inject.internal.util.$ComputationException: java.lang.ExceptionInInitializerError\r\n&gt;\t\tat com.google.inject.internal.util.$MapMaker$StrategyImpl.compute(MapMaker.java:553)\r\n&gt;\t\tat com.google.inject.internal.util.$MapMaker$StrategyImpl.compute(MapMaker.java:419)\r\n&gt;\t\tat com.google.inject.internal.util.$CustomConcurrentHashMap$ComputingImpl.get(CustomConcurrentHashMap.java:2041)\r\n&gt;\t\tat com.google.inject.internal.FailableCache.get(FailableCache.java:50)\r\n&gt;\t\tat com.google.inject.internal.ConstructorInjectorStore.get(ConstructorInjectorStore.java:49)\r\n&gt;\t\tat com.google.inject.internal.ConstructorBindingImpl.initialize(ConstructorBindingImpl.java:125)\r\n&gt;\t\tat com.google.inject.internal.InjectorImpl.initializeBinding(InjectorImpl.java:507)\r\n&gt;\t\tat com.google.inject.internal.AbstractBindingProcessor$Processor$1.run(AbstractBindingProcessor.java:159)\r\n&gt;\t\tat com.google.inject.internal.ProcessedBindingData.initializeBindings(ProcessedBindingData.java:44)\r\n&gt;\t\tat com.google.inject.internal.InternalInjectorCreator.initializeStatically(InternalInjectorCreator.java:122)\r\n&gt;\t\tat com.google.inject.internal.InternalInjectorCreator.build(InternalInjectorCreator.java:106)\r\n&gt;\t\tat com.google.inject.Guice.createInjector(Guice.java:95)\r\n&gt;\t\tat com.google.inject.Guice.createInjector(Guice.java:72)\r\n&gt;\t\tat com.google.inject.Guice.createInjector(Guice.java:62)\r\n&gt;\t\tat org.schemarepo.server.RepositoryServer.&lt;init&gt;(RepositoryServer.java:97)\r\n&gt;\t\tat technorati.tut.fes.Main2.main(Main2.java:12)\r\n&gt;\tCaused by: java.lang.ExceptionInInitializerError\r\n&gt;\t\tat com.google.inject.internal.cglib.reflect.$FastClassEmitter.&lt;init&gt;(FastClassEmitter.java:67)\r\n&gt;\t\tat com.google.inject.internal.cglib.reflect.$FastClass$Generator.generateClass(FastClass.java:72)\r\n&gt;\t\tat com.google.inject.internal.cglib.core.$DefaultGeneratorStrategy.generate(DefaultGeneratorStrategy.java:25)\r\n&gt;\t\tat com.google.inject.internal.cglib.core.$AbstractClassGenerator.create(AbstractClassGenerator.java:216)\r\n&gt;\t\tat com.google.inject.internal.cglib.reflect.$FastClass$Generator.create(FastClass.java:64)\r\n&gt;\t\tat com.google.inject.internal.BytecodeGen.newFastClass(BytecodeGen.java:207)\r\n&gt;\t\tat com.google.inject.internal.DefaultConstructionProxyFactory.create(DefaultConstructionProxyFactory.java:53)\r\n&gt;\t\tat com.google.inject.internal.ProxyFactory.create(ProxyFactory.java:153)\r\n&gt;\t\tat com.google.inject.internal.ConstructorInjectorStore.createConstructor(ConstructorInjectorStore.java:89)\r\n&gt;\t\tat com.google.inject.internal.ConstructorInjectorStore.access$000(ConstructorInjectorStore.java:28)\r\n&gt;\t\tat com.google.inject.internal.ConstructorInjectorStore$1.create(ConstructorInjectorStore.java:36)\r\n&gt;\t\tat com.google.inject.internal.ConstructorInjectorStore$1.create(ConstructorInjectorStore.java:32)\r\n&gt;\t\tat com.google.inject.internal.FailableCache$1.apply(FailableCache.java:39)\r\n&gt;\t\tat com.google.inject.internal.util.$MapMaker$StrategyImpl.compute(MapMaker.java:549)\r\n&gt;\t\t... 15 more\r\n&gt;\tCaused by: java.lang.reflect.InaccessibleObjectException: Unable to make protected final java.lang.Class java.lang.ClassLoader.defineClass(java.lang.String,byte[],int,int,java.security.ProtectionDomain) throws java.lang.ClassFormatError accessible: module java.base does not &quot;opens java.lang&quot; to unnamed module @f0c8a99\r\n&gt;\t\tat java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:357)\r\n&gt;\t\tat java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:297)\r\n&gt;\t\tat java.base/java.lang.reflect.Method.checkCanSetAccessible(Method.java:199)\r\n&gt;\t\tat java.base/java.lang.reflect.Method.setAccessible(Method.java:193)\r\n&gt;\t\tat com.google.inject.internal.cglib.core.$ReflectUtils$2.run(ReflectUtils.java:56)\r\n&gt;\t\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:312)\r\n&gt;\t\tat com.google.inject.internal.cglib.core.$ReflectUtils.&lt;clinit&gt;(ReflectUtils.java:46)\r\n&gt;\t\t... 29 more\r\n&gt;\t\r\n&gt;\tProcess finished with exit code 1\r\n&gt;\t\r\n\r\nThis is working fine \r\n  [1]: https://mvnrepository.com/artifact/org.schemarepo/schema-repo-server.\r\n\r\nNote: I&#39;ve added vm argument ` --illegal-access=permit --add-opens java.base/java.lang=ALL-UNNAMED` but still I&#39;m facing this error on java-17","title":"java.lang.reflect.InaccessibleObjectException: Unable to make protected final java.lang.Class when upgrade from java 11 to 17","body":"<p>our project uses [schema-repo-server][1].\nThe code for starting the schema-repo-server is below -</p>\n<pre><code>    package technorati.tut.fes;\n    \n    import org.schemarepo.server.RepositoryServer;\n    import java.util.Properties;\n    \n    public class Main2 {\n        public static void main(String[] args) throws Exception {\n            Properties props = new Properties();\n            props.put(&quot;schema-repo.class&quot;, &quot;com.technorati.camus.schemaregistry.ZooKeeperRepository&quot;);\n            props.put(&quot;schema-repo.zookeeper.ensemble&quot;, &quot;kafka01.cap.qa.opal.synacor.com:2181,kafka02.cap.qa.opal.synacor.com:2181,kafka03.cap.qa.opal.synacor.com:2181&quot;);\n            RepositoryServer rs = new RepositoryServer(props);\n            rs.start();\n        }\n    \n    }\n    \n</code></pre>\n<p>This code is working fine in java11.</p>\n<p>I'm upgrading java version from java 11 to java 17. After the upgrade when I start the service I get below error.</p>\n<p>Note: modules in the startup list are --add-opens java.base/java.lang=ALL-UNNAMED --add-opens java.base/java.util=ALL-UNNAMED --add-opens jdk.management/com.sun.management.internal=ALL-UNNAMED</p>\n<p>How can I fix this issue?</p>\n<blockquote>\n<p>14:18:48 INFO  [org.schemarepo.server.RepositoryServer  ] Routing java.util.logging traffic through SLF4J\nException in thread &quot;main&quot; com.google.inject.internal.util.$ComputationException: java.lang.ExceptionInInitializerError\nat com.google.inject.internal.util.$MapMaker$StrategyImpl.compute(MapMaker.java:553)\nat com.google.inject.internal.util.$MapMaker$StrategyImpl.compute(MapMaker.java:419)\nat com.google.inject.internal.util.$CustomConcurrentHashMap$ComputingImpl.get(CustomConcurrentHashMap.java:2041)\nat com.google.inject.internal.FailableCache.get(FailableCache.java:50)\nat com.google.inject.internal.ConstructorInjectorStore.get(ConstructorInjectorStore.java:49)\nat com.google.inject.internal.ConstructorBindingImpl.initialize(ConstructorBindingImpl.java:125)\nat com.google.inject.internal.InjectorImpl.initializeBinding(InjectorImpl.java:507)\nat com.google.inject.internal.AbstractBindingProcessor$Processor$1.run(AbstractBindingProcessor.java:159)\nat com.google.inject.internal.ProcessedBindingData.initializeBindings(ProcessedBindingData.java:44)\nat com.google.inject.internal.InternalInjectorCreator.initializeStatically(InternalInjectorCreator.java:122)\nat com.google.inject.internal.InternalInjectorCreator.build(InternalInjectorCreator.java:106)\nat com.google.inject.Guice.createInjector(Guice.java:95)\nat com.google.inject.Guice.createInjector(Guice.java:72)\nat com.google.inject.Guice.createInjector(Guice.java:62)\nat org.schemarepo.server.RepositoryServer.(RepositoryServer.java:97)\nat technorati.tut.fes.Main2.main(Main2.java:12)\nCaused by: java.lang.ExceptionInInitializerError\nat com.google.inject.internal.cglib.reflect.$FastClassEmitter.(FastClassEmitter.java:67)\nat com.google.inject.internal.cglib.reflect.$FastClass$Generator.generateClass(FastClass.java:72)\nat com.google.inject.internal.cglib.core.$DefaultGeneratorStrategy.generate(DefaultGeneratorStrategy.java:25)\nat com.google.inject.internal.cglib.core.$AbstractClassGenerator.create(AbstractClassGenerator.java:216)\nat com.google.inject.internal.cglib.reflect.$FastClass$Generator.create(FastClass.java:64)\nat com.google.inject.internal.BytecodeGen.newFastClass(BytecodeGen.java:207)\nat com.google.inject.internal.DefaultConstructionProxyFactory.create(DefaultConstructionProxyFactory.java:53)\nat com.google.inject.internal.ProxyFactory.create(ProxyFactory.java:153)\nat com.google.inject.internal.ConstructorInjectorStore.createConstructor(ConstructorInjectorStore.java:89)\nat com.google.inject.internal.ConstructorInjectorStore.access$000(ConstructorInjectorStore.java:28)\nat com.google.inject.internal.ConstructorInjectorStore$1.create(ConstructorInjectorStore.java:36)\nat com.google.inject.internal.ConstructorInjectorStore$1.create(ConstructorInjectorStore.java:32)\nat com.google.inject.internal.FailableCache$1.apply(FailableCache.java:39)\nat com.google.inject.internal.util.$MapMaker$StrategyImpl.compute(MapMaker.java:549)\n... 15 more\nCaused by: java.lang.reflect.InaccessibleObjectException: Unable to make protected final java.lang.Class java.lang.ClassLoader.defineClass(java.lang.String,byte[],int,int,java.security.ProtectionDomain) throws java.lang.ClassFormatError accessible: module java.base does not &quot;opens java.lang&quot; to unnamed module @f0c8a99\nat java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:357)\nat java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:297)\nat java.base/java.lang.reflect.Method.checkCanSetAccessible(Method.java:199)\nat java.base/java.lang.reflect.Method.setAccessible(Method.java:193)\nat com.google.inject.internal.cglib.core.$ReflectUtils$2.run(ReflectUtils.java:56)\nat java.base/java.security.AccessController.doPrivileged(AccessController.java:312)\nat com.google.inject.internal.cglib.core.$ReflectUtils.(ReflectUtils.java:46)\n... 29 more</p>\n<p>Process finished with exit code 1</p>\n</blockquote>\n<p>This is working fine\n[1]: <a href=\"https://mvnrepository.com/artifact/org.schemarepo/schema-repo-server\" rel=\"noreferrer\">https://mvnrepository.com/artifact/org.schemarepo/schema-repo-server</a>.</p>\n<p>Note: I've added vm argument <code> --illegal-access=permit --add-opens java.base/java.lang=ALL-UNNAMED</code> but still I'm facing this error on java-17</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":8415,"page":1577,"page_size":100}
