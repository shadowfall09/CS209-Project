{"items":[{"tags":["java","caching","junit"],"answers":[{"tags":[],"owner":{"account_id":29176687,"reputation":332,"user_id":22351796,"display_name":"Karsten"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691703143,"creation_date":1691703143,"answer_id":76879424,"question_id":76879334,"body_markdown":"I don&#39;t see that elements will be removed between the two puts and the size-call.","title":"Trying to get my simple aged cache to pass all unit tests, keeps failing on one of them","body":"<p>I don't see that elements will be removed between the two puts and the size-call.</p>\n"},{"comments":[{"owner":{"account_id":29202222,"reputation":13,"user_id":22372080,"display_name":"gdanylov"},"score":0,"creation_date":1691703762,"post_id":76879433,"comment_id":135531384,"body_markdown":"Thank you that worked. I realized I could also clean expired records when it calls size()","body":"Thank you that worked. I realized I could also clean expired records when it calls size()"}],"tags":[],"owner":{"account_id":14327066,"reputation":141,"user_id":10348872,"display_name":"Shovel_Knight"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691703334,"creation_date":1691703334,"answer_id":76879433,"question_id":76879334,"body_markdown":"Your cleanup method is triggered when the client calls `get()`, but not when it calls `size()`. In other words, when you call `size()`, your cache actually holds two key -&gt; value pairs, and the expired record is removed only when you call `get()`.\r\n\r\nThis should not fail:\r\n\r\n    @Test\r\n    public void getExpired() {\r\n        TestClock clock = new TestClock();\r\n    \r\n        SimpleAgedCache expired = new SimpleAgedCache(clock);\r\n        expired.put(&quot;aKey&quot;, &quot;aValue&quot;, 2000);\r\n        expired.put(&quot;anotherKey&quot;, &quot;anotherValue&quot;, 4000);\r\n    \r\n        clock.offset(Duration.ofMillis(3000));\r\n    \r\n        assertEquals(&quot;anotherValue&quot;, expired.get(&quot;anotherKey&quot;));\r\n        assertEquals(1, expired.size());\r\n    }","title":"Trying to get my simple aged cache to pass all unit tests, keeps failing on one of them","body":"<p>Your cleanup method is triggered when the client calls <code>get()</code>, but not when it calls <code>size()</code>. In other words, when you call <code>size()</code>, your cache actually holds two key -&gt; value pairs, and the expired record is removed only when you call <code>get()</code>.</p>\n<p>This should not fail:</p>\n<pre><code>@Test\npublic void getExpired() {\n    TestClock clock = new TestClock();\n\n    SimpleAgedCache expired = new SimpleAgedCache(clock);\n    expired.put(&quot;aKey&quot;, &quot;aValue&quot;, 2000);\n    expired.put(&quot;anotherKey&quot;, &quot;anotherValue&quot;, 4000);\n\n    clock.offset(Duration.ofMillis(3000));\n\n    assertEquals(&quot;anotherValue&quot;, expired.get(&quot;anotherKey&quot;));\n    assertEquals(1, expired.size());\n}\n</code></pre>\n"}],"owner":{"account_id":29202222,"reputation":13,"user_id":22372080,"display_name":"gdanylov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":605,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76879433,"answer_count":2,"score":1,"last_activity_date":1691703334,"creation_date":1691701989,"question_id":76879334,"body_markdown":"Simple Aged Cache:\r\nI have created a simple aged cache and I have got it to pass all unit tests except getExpired. I have tried running the cleanExpiredRecords method after the put, and before, really not sure how to fix this. Any suggestions would be appreciated.\r\n\r\n```\r\npackage io.collective;\r\n\r\nimport java.time.Clock;\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\npublic class SimpleAgedCache {\r\n    private final Clock clock;\r\n    private final Map&lt;Object, CacheEntry&gt; cacheMap;\r\n\r\n    public SimpleAgedCache(Clock clock) {\r\n        this.clock = clock;\r\n        this.cacheMap = new HashMap&lt;&gt;();\r\n    }\r\n\r\n    public SimpleAgedCache() {\r\n        this(Clock.system(Clock.systemDefaultZone().getZone()));\r\n    }\r\n\r\n    public void put(Object key, Object value, int retentionInMillis) {\r\n        if (key != null &amp;&amp; retentionInMillis &gt; 0){\r\n            long expirationTime = clock.millis() + retentionInMillis;\r\n            cacheMap.put(key, new CacheEntry(value, expirationTime));\r\n        }\r\n    }\r\n\r\n    public boolean isEmpty() {\r\n        return cacheMap.isEmpty();\r\n    }\r\n\r\n    public int size() {\r\n        return cacheMap.size();\r\n    }\r\n\r\n    public Object get(Object key) {\r\n        cleanExpiredRecords();\r\n        CacheEntry entry = cacheMap.get(key);\r\n        if (entry != null){\r\n            return entry.value;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    private void cleanExpiredRecords(){\r\n        long currentTime = clock.millis();\r\n        cacheMap.entrySet().removeIf(entry -&gt; entry.getValue().isExpired(currentTime));\r\n    }\r\n\r\n    private static class CacheEntry{\r\n        Object value;\r\n        long expirationTime;\r\n\r\n        CacheEntry(Object value, long expirationTime){\r\n            this.value = value;\r\n            this.expirationTime = expirationTime;\r\n        }\r\n\r\n        boolean isExpired(long currentTime){\r\n            return currentTime &gt;= expirationTime;\r\n        }\r\n\r\n        boolean isNotExpired(long currentTime){\r\n            return !isExpired(currentTime);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThe Junit test that it keeps failing is below. I am trying to get my code to pass the unit test. However, it keeps returning 2 when the expected answer is 1.\r\nExpected :1\r\nActual   :2\r\n\r\n```\r\n@Test\r\n    public void getExpired() {\r\n        TestClock clock = new TestClock();\r\n\r\n        SimpleAgedCache expired = new SimpleAgedCache(clock);\r\n        expired.put(&quot;aKey&quot;, &quot;aValue&quot;, 2000);\r\n        expired.put(&quot;anotherKey&quot;, &quot;anotherValue&quot;, 4000);\r\n\r\n        clock.offset(Duration.ofMillis(3000));\r\n\r\n        assertEquals(1, expired.size());\r\n        assertEquals(&quot;anotherValue&quot;, expired.get(&quot;anotherKey&quot;));\r\n    }\r\n```\r\n","title":"Trying to get my simple aged cache to pass all unit tests, keeps failing on one of them","body":"<p>Simple Aged Cache:\nI have created a simple aged cache and I have got it to pass all unit tests except getExpired. I have tried running the cleanExpiredRecords method after the put, and before, really not sure how to fix this. Any suggestions would be appreciated.</p>\n<pre><code>package io.collective;\n\nimport java.time.Clock;\nimport java.util.HashMap;\nimport java.util.Map;\n\npublic class SimpleAgedCache {\n    private final Clock clock;\n    private final Map&lt;Object, CacheEntry&gt; cacheMap;\n\n    public SimpleAgedCache(Clock clock) {\n        this.clock = clock;\n        this.cacheMap = new HashMap&lt;&gt;();\n    }\n\n    public SimpleAgedCache() {\n        this(Clock.system(Clock.systemDefaultZone().getZone()));\n    }\n\n    public void put(Object key, Object value, int retentionInMillis) {\n        if (key != null &amp;&amp; retentionInMillis &gt; 0){\n            long expirationTime = clock.millis() + retentionInMillis;\n            cacheMap.put(key, new CacheEntry(value, expirationTime));\n        }\n    }\n\n    public boolean isEmpty() {\n        return cacheMap.isEmpty();\n    }\n\n    public int size() {\n        return cacheMap.size();\n    }\n\n    public Object get(Object key) {\n        cleanExpiredRecords();\n        CacheEntry entry = cacheMap.get(key);\n        if (entry != null){\n            return entry.value;\n        }\n        return null;\n    }\n\n    private void cleanExpiredRecords(){\n        long currentTime = clock.millis();\n        cacheMap.entrySet().removeIf(entry -&gt; entry.getValue().isExpired(currentTime));\n    }\n\n    private static class CacheEntry{\n        Object value;\n        long expirationTime;\n\n        CacheEntry(Object value, long expirationTime){\n            this.value = value;\n            this.expirationTime = expirationTime;\n        }\n\n        boolean isExpired(long currentTime){\n            return currentTime &gt;= expirationTime;\n        }\n\n        boolean isNotExpired(long currentTime){\n            return !isExpired(currentTime);\n        }\n    }\n}\n</code></pre>\n<p>The Junit test that it keeps failing is below. I am trying to get my code to pass the unit test. However, it keeps returning 2 when the expected answer is 1.\nExpected :1\nActual   :2</p>\n<pre><code>@Test\n    public void getExpired() {\n        TestClock clock = new TestClock();\n\n        SimpleAgedCache expired = new SimpleAgedCache(clock);\n        expired.put(&quot;aKey&quot;, &quot;aValue&quot;, 2000);\n        expired.put(&quot;anotherKey&quot;, &quot;anotherValue&quot;, 4000);\n\n        clock.offset(Duration.ofMillis(3000));\n\n        assertEquals(1, expired.size());\n        assertEquals(&quot;anotherValue&quot;, expired.get(&quot;anotherKey&quot;));\n    }\n</code></pre>\n"},{"tags":["java","spring","intellij-idea","aop","aspect"],"answers":[{"tags":[],"owner":{"account_id":1310169,"reputation":3813,"user_id":1258319,"accept_rate":81,"display_name":"Julian"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691702534,"creation_date":1691702534,"answer_id":76879371,"question_id":76878468,"body_markdown":"Just annotate your `ComponentConfig` class with `@EnableAspectJAutoProxy` and your interception will work","title":"i cannot see the aspect logs when i run the method to be intercepted","body":"<p>Just annotate your <code>ComponentConfig</code> class with <code>@EnableAspectJAutoProxy</code> and your interception will work</p>\n"}],"owner":{"account_id":24561597,"reputation":21,"user_id":18469257,"display_name":"alpha"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691702534,"creation_date":1691692426,"question_id":76878468,"body_markdown":"thats my code and this is only showing the logs as method is executed in intellij\r\nINFO: Publishing comment: Demo comment. Also added the dependencies but still i cant see whats the error.\r\n```\r\npackage com.alpha;\r\n\r\nimport com.alpha.exampleApp.Comment;\r\nimport com.alpha.servoces.CommentServoce;\r\nimport org.springframework.context.annotation.AnnotationConfigApplicationContext;\r\n\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        var context = new AnnotationConfigApplicationContext(ComponentConfig.class);\r\n\r\n        var comment = new Comment();\r\n        comment.setAuthor(&quot;Laurentiu&quot;);\r\n        comment.setText(&quot;Demo comment&quot;);\r\n\r\n        var commentServoce = context.getBean(CommentServoce.class);\r\n        commentServoce.publishComment(comment);\r\n\r\n\r\n    }\r\n}\r\n\r\n```\r\nthis is aspect class-&gt;\r\n```\r\npackage com.alpha;\r\n\r\nimport org.aspectj.lang.ProceedingJoinPoint;\r\nimport org.aspectj.lang.annotation.Around;\r\nimport org.aspectj.lang.annotation.Aspect;\r\n\r\nimport java.util.Arrays;\r\nimport java.util.logging.Logger;\r\n\r\n@Aspect\r\npublic class LogAspect {\r\n    private Logger logger = Logger.getLogger(LogAspect.class.getName());\r\n\r\n    @Around(&quot;execution(* com.alpha.servoces.*.*(..))&quot;)\r\n    public Object log(ProceedingJoinPoint joinPoint) throws Throwable {\r\n            String methodName = joinPoint.getSignature().getName();\r\n            Object[] arguments = joinPoint.getArgs();\r\n            logger.info(&quot;Method &quot; + methodName +\r\n                    &quot; with parameters &quot; + Arrays.asList(arguments) +\r\n                    &quot; will execute&quot;);\r\n            Object returnedByMethod = joinPoint.proceed();\r\n            logger.info(&quot;Method executed and returned &quot; + returnedByMethod);\r\n            return returnedByMethod;\r\n\r\n    }\r\n}\r\n\r\n```\r\nthis is my config class-&gt;\r\n```\r\npackage com.alpha;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.ComponentScan;\r\nimport org.springframework.context.annotation.Configuration;\r\n@Configuration\r\n@ComponentScan(basePackages = &quot;com.alpha.servoces&quot;)\r\npublic class ComponentConfig {\r\n    @Bean\r\n    public LogAspect loggingAspect(){\r\n        LogAspect logAspect = new LogAspect();\r\n        return logAspect;\r\n    }\r\n}\r\n\r\n```\r\nthis is the class in which i want the method intercepted-&gt;\r\n```\r\npackage com.alpha.servoces;\r\nimport com.alpha.exampleApp.Comment;\r\nimport org.springframework.stereotype.Service;\r\nimport java.util.logging.Logger;\r\n\r\n@Service\r\npublic class CommentServoce {\r\n    private Logger logger = Logger.getLogger(CommentServoce.class.getName());\r\n\r\n    public String publishComment(Comment comment) {\r\n        logger.info(&quot;Publishing comment: &quot; + comment.getText());\r\n        return &quot;SUCCESS&quot;;\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\n\r\ni wanted to see the logs by intercepting the method through aspects in spring but i couldnt see the logs","title":"i cannot see the aspect logs when i run the method to be intercepted","body":"<p>thats my code and this is only showing the logs as method is executed in intellij\nINFO: Publishing comment: Demo comment. Also added the dependencies but still i cant see whats the error.</p>\n<pre><code>package com.alpha;\n\nimport com.alpha.exampleApp.Comment;\nimport com.alpha.servoces.CommentServoce;\nimport org.springframework.context.annotation.AnnotationConfigApplicationContext;\n\npublic class Main {\n    public static void main(String[] args) {\n        var context = new AnnotationConfigApplicationContext(ComponentConfig.class);\n\n        var comment = new Comment();\n        comment.setAuthor(&quot;Laurentiu&quot;);\n        comment.setText(&quot;Demo comment&quot;);\n\n        var commentServoce = context.getBean(CommentServoce.class);\n        commentServoce.publishComment(comment);\n\n\n    }\n}\n\n</code></pre>\n<p>this is aspect class-&gt;</p>\n<pre><code>package com.alpha;\n\nimport org.aspectj.lang.ProceedingJoinPoint;\nimport org.aspectj.lang.annotation.Around;\nimport org.aspectj.lang.annotation.Aspect;\n\nimport java.util.Arrays;\nimport java.util.logging.Logger;\n\n@Aspect\npublic class LogAspect {\n    private Logger logger = Logger.getLogger(LogAspect.class.getName());\n\n    @Around(&quot;execution(* com.alpha.servoces.*.*(..))&quot;)\n    public Object log(ProceedingJoinPoint joinPoint) throws Throwable {\n            String methodName = joinPoint.getSignature().getName();\n            Object[] arguments = joinPoint.getArgs();\n            logger.info(&quot;Method &quot; + methodName +\n                    &quot; with parameters &quot; + Arrays.asList(arguments) +\n                    &quot; will execute&quot;);\n            Object returnedByMethod = joinPoint.proceed();\n            logger.info(&quot;Method executed and returned &quot; + returnedByMethod);\n            return returnedByMethod;\n\n    }\n}\n\n</code></pre>\n<p>this is my config class-&gt;</p>\n<pre><code>package com.alpha;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.context.annotation.Configuration;\n@Configuration\n@ComponentScan(basePackages = &quot;com.alpha.servoces&quot;)\npublic class ComponentConfig {\n    @Bean\n    public LogAspect loggingAspect(){\n        LogAspect logAspect = new LogAspect();\n        return logAspect;\n    }\n}\n\n</code></pre>\n<p>this is the class in which i want the method intercepted-&gt;</p>\n<pre><code>package com.alpha.servoces;\nimport com.alpha.exampleApp.Comment;\nimport org.springframework.stereotype.Service;\nimport java.util.logging.Logger;\n\n@Service\npublic class CommentServoce {\n    private Logger logger = Logger.getLogger(CommentServoce.class.getName());\n\n    public String publishComment(Comment comment) {\n        logger.info(&quot;Publishing comment: &quot; + comment.getText());\n        return &quot;SUCCESS&quot;;\n    }\n}\n\n</code></pre>\n<p>i wanted to see the logs by intercepting the method through aspects in spring but i couldnt see the logs</p>\n"},{"tags":["java","apache-spark","apache-spark-sql","apache-iceberg"],"owner":{"account_id":1259633,"reputation":1751,"user_id":1218317,"accept_rate":87,"display_name":"ritratt"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691702329,"creation_date":1691009489,"question_id":76823432,"body_markdown":"I am connecting to Iceberg running in Spark and querying tables. I am able to SELECT and INSERT from spark-shell. But face issues when executing the same statements from Java code\r\n\r\n```\r\nSparkConf sparkConf = new SparkConf().setAppName(&quot;my app&quot;);\r\nsparkConf.setMaster(&quot;spark://localhost:7077&quot;); // my spark is running in k8s with port-forward\r\nsparkConf.set(&quot;spark.shuffle.service.enabled&quot;, &quot;false&quot;);\r\nsparkConf.set(&quot;spark.dynamicAllocation.enabled&quot;, &quot;false&quot;);\r\n...\r\n// Bunch of Iceberg+Nessie related config properties\r\n...\r\n\r\nSparkSession spark = SparkSession\r\n                .builder()\r\n                .config(sparkConf)\r\n                .getOrCreate();\r\nspark.sql(&quot;use my;&quot;); // works\r\nspark.sql(&quot;SELECT * FROM my.table LIMIT 1;&quot;);  // works\r\nspark.sql(&quot;INSERT INTO my.table (id, value) VALUES (1, &#39;test&#39;);&quot;)  // Does not work. see errors below\r\n```\r\n\r\nHere&#39;s what I see:\r\n```\r\nInitial job has not accepted any resources; check your cluster UI to ensure that workers are registered and have sufficient resources\r\n```\r\n\r\nBut the error is misleading cuz there&#39;re enough resources.\r\nI tried adding the `spark.driver.host` like so:\r\n```\r\nsparkConf.set(&quot;spark.driver.host&quot;, &quot;localhost&quot;);\r\nsparkConf.set(&quot;spark.driver.port&quot;, &quot;7077&quot;);\r\n```\r\nBut this only results in the job exiting immediately and requesting a new worker.\r\n\r\n\r\nHow do I fix this so that I can run my query? Why is it only happening for INSERT queries?","title":"Spark SQL SELECT works but INSERT fails due to Spark issue","body":"<p>I am connecting to Iceberg running in Spark and querying tables. I am able to SELECT and INSERT from spark-shell. But face issues when executing the same statements from Java code</p>\n<pre><code>SparkConf sparkConf = new SparkConf().setAppName(&quot;my app&quot;);\nsparkConf.setMaster(&quot;spark://localhost:7077&quot;); // my spark is running in k8s with port-forward\nsparkConf.set(&quot;spark.shuffle.service.enabled&quot;, &quot;false&quot;);\nsparkConf.set(&quot;spark.dynamicAllocation.enabled&quot;, &quot;false&quot;);\n...\n// Bunch of Iceberg+Nessie related config properties\n...\n\nSparkSession spark = SparkSession\n                .builder()\n                .config(sparkConf)\n                .getOrCreate();\nspark.sql(&quot;use my;&quot;); // works\nspark.sql(&quot;SELECT * FROM my.table LIMIT 1;&quot;);  // works\nspark.sql(&quot;INSERT INTO my.table (id, value) VALUES (1, 'test');&quot;)  // Does not work. see errors below\n</code></pre>\n<p>Here's what I see:</p>\n<pre><code>Initial job has not accepted any resources; check your cluster UI to ensure that workers are registered and have sufficient resources\n</code></pre>\n<p>But the error is misleading cuz there're enough resources.\nI tried adding the <code>spark.driver.host</code> like so:</p>\n<pre><code>sparkConf.set(&quot;spark.driver.host&quot;, &quot;localhost&quot;);\nsparkConf.set(&quot;spark.driver.port&quot;, &quot;7077&quot;);\n</code></pre>\n<p>But this only results in the job exiting immediately and requesting a new worker.</p>\n<p>How do I fix this so that I can run my query? Why is it only happening for INSERT queries?</p>\n"},{"tags":["java","animation","javafx","css-animations","refresh"],"comments":[{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":3,"creation_date":1691217800,"post_id":76840406,"comment_id":135465016,"body_markdown":"[This](https://stackoverflow.com/questions/9908402/rotate-orbit-node-around-another-object-javafx-2) may help.","body":"<a href=\"https://stackoverflow.com/questions/9908402/rotate-orbit-node-around-another-object-javafx-2\">This</a> may help."},{"owner":{"account_id":3527967,"reputation":11,"user_id":2948501,"display_name":"Tom O."},"score":0,"creation_date":1691218366,"post_id":76840406,"comment_id":135465059,"body_markdown":"I am changing the position of the circle, not rotating it.","body":"I am changing the position of the circle, not rotating it."},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":1,"creation_date":1691219955,"post_id":76840406,"comment_id":135465191,"body_markdown":"I did not run the code, but the linked question talks about rotating a circle around a rectangle.  That would require changing position.","body":"I did not run the code, but the linked question talks about rotating a circle around a rectangle.  That would require changing position."},{"owner":{"account_id":3527967,"reputation":11,"user_id":2948501,"display_name":"Tom O."},"score":1,"creation_date":1691220301,"post_id":76840406,"comment_id":135465206,"body_markdown":"Really, and it worx! THX!!","body":"Really, and it worx! THX!!"},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":0,"creation_date":1691220545,"post_id":76840406,"comment_id":135465222,"body_markdown":"https://stackoverflow.com/questions/20022889/how-to-make-the-ball-bounce-off-the-walls-in-javafx#51561957","body":"<a href=\"https://stackoverflow.com/questions/20022889/how-to-make-the-ball-bounce-off-the-walls-in-javafx#51561957\" title=\"how to make the ball bounce off the walls in javafx%2351561957\">stackoverflow.com/questions/20022889/&hellip;</a>"},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":4,"creation_date":1691225021,"post_id":76840406,"comment_id":135465575,"body_markdown":"I would use a Group or Pane instead of a StackPane, then apply a RotateTransform with a pivot point, and have the animation modify the angle property of the transform l[like this](https://gist.github.com/jewelsea/1475424).  But that is just me.  If you made the StackPane solution work how you want and are happy with the solution, that is fine.","body":"I would use a Group or Pane instead of a StackPane, then apply a RotateTransform with a pivot point, and have the animation modify the angle property of the transform l<a href=\"https://gist.github.com/jewelsea/1475424\" rel=\"nofollow noreferrer\">like this</a>.  But that is just me.  If you made the StackPane solution work how you want and are happy with the solution, that is fine."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":4,"creation_date":1691225533,"post_id":76840406,"comment_id":135465623,"body_markdown":"Another way to do this is a PathTransition with a circular path and an orientation of ORTHOGONAL_TO_TANGENT or NONE.  Try it with a square on the animated path and different orientation types if interested.","body":"Another way to do this is a PathTransition with a circular path and an orientation of ORTHOGONAL_TO_TANGENT or NONE.  Try it with a square on the animated path and different orientation types if interested."}],"owner":{"account_id":3527967,"reputation":11,"user_id":2948501,"display_name":"Tom O."},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691701994,"creation_date":1691216857,"question_id":76840406,"body_markdown":"I am trying a basic animation to move around a circle, but the stage is not showing the circle&#39;s new position.\r\n\r\n    package circler;\r\n\r\n    import javafx.animation.*;\r\n    import javafx.application.Application;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.paint.Color;\r\n    import javafx.scene.shape.*;\r\n    import javafx.stage.Stage;\r\n    import javafx.scene.layout.*;\r\n    import javafx.util.Duration;\r\n\r\n    public class Main extends Application {\r\n        Circle circle;\r\n        int distance = 100;\r\n        int angle = 0;\r\n\r\n        public void start(Stage primaryStage) {\r\n            circle = new Circle();\r\n            circle.setCenterX(400);\r\n            circle.setCenterY(400);\r\n            circle.setRadius(10);\r\n            circle.setFill(Color.RED);\r\n\r\n            Timeline timeline = new Timeline(new KeyFrame(Duration.seconds(0.1), e -&gt; {\r\n                    angle++;\r\n                    angle %= 360;\r\n                    setPosition();\r\n                    primaryStage.show();\r\n            }));\r\n\r\n            timeline.setCycleCount(Animation.INDEFINITE);\r\n            timeline.play();\r\n\r\n            primaryStage.setScene(new Scene(new StackPane(circle), 800, 800));\r\n            primaryStage.show();\r\n        }\r\n\r\n        private int calc(boolean sin) {\r\n            return (int) (sin ? distance * Math.sin(Math.toRadians(angle)) : distance * Math.cos(Math.toRadians(angle)));\r\n        }\r\n        \r\n        private void setPosition() {\r\n            circle.setCenterX(circle.getScene().getHeight() / 2 + calc(true));\r\n            circle.setCenterY(circle.getScene().getHeight() / 2 + calc(false));\r\n            System.out.println(circle.getCenterX());\r\n        }\r\n    }\r\n\r\nI tried every page which tells about refreshing it. I want the circle to move 100ms and the stage should show it at the new position.","title":"Why isn&#39;t javafx stage refreshing?","body":"<p>I am trying a basic animation to move around a circle, but the stage is not showing the circle's new position.</p>\n<pre><code>package circler;\n\nimport javafx.animation.*;\nimport javafx.application.Application;\nimport javafx.scene.Scene;\nimport javafx.scene.paint.Color;\nimport javafx.scene.shape.*;\nimport javafx.stage.Stage;\nimport javafx.scene.layout.*;\nimport javafx.util.Duration;\n\npublic class Main extends Application {\n    Circle circle;\n    int distance = 100;\n    int angle = 0;\n\n    public void start(Stage primaryStage) {\n        circle = new Circle();\n        circle.setCenterX(400);\n        circle.setCenterY(400);\n        circle.setRadius(10);\n        circle.setFill(Color.RED);\n\n        Timeline timeline = new Timeline(new KeyFrame(Duration.seconds(0.1), e -&gt; {\n                angle++;\n                angle %= 360;\n                setPosition();\n                primaryStage.show();\n        }));\n\n        timeline.setCycleCount(Animation.INDEFINITE);\n        timeline.play();\n\n        primaryStage.setScene(new Scene(new StackPane(circle), 800, 800));\n        primaryStage.show();\n    }\n\n    private int calc(boolean sin) {\n        return (int) (sin ? distance * Math.sin(Math.toRadians(angle)) : distance * Math.cos(Math.toRadians(angle)));\n    }\n    \n    private void setPosition() {\n        circle.setCenterX(circle.getScene().getHeight() / 2 + calc(true));\n        circle.setCenterY(circle.getScene().getHeight() / 2 + calc(false));\n        System.out.println(circle.getCenterX());\n    }\n}\n</code></pre>\n<p>I tried every page which tells about refreshing it. I want the circle to move 100ms and the stage should show it at the new position.</p>\n"},{"tags":["java","android","twilio","twilio-api"],"answers":[{"comments":[{"owner":{"account_id":11955309,"reputation":41,"user_id":8747835,"display_name":"JUNAID ALI"},"score":0,"creation_date":1549368661,"post_id":54533942,"comment_id":95869647,"body_markdown":"Thanks a lot for your help, let me go through this that yo shared :)","body":"Thanks a lot for your help, let me go through this that yo shared :)"},{"owner":{"account_id":104520,"reputation":21516,"user_id":279395,"accept_rate":96,"display_name":"Marcos Placona"},"score":0,"creation_date":1549468179,"post_id":54533942,"comment_id":95914711,"body_markdown":"That&#39;s awesome! Please make sure you mark the answer as correct for anyone with that same question in the future.","body":"That&#39;s awesome! Please make sure you mark the answer as correct for anyone with that same question in the future."},{"owner":{"account_id":11955309,"reputation":41,"user_id":8747835,"display_name":"JUNAID ALI"},"score":0,"creation_date":1549470226,"post_id":54533942,"comment_id":95915965,"body_markdown":"I marked it but they are saying my reputation is low","body":"I marked it but they are saying my reputation is low"}],"tags":[],"owner":{"account_id":104520,"reputation":21516,"user_id":279395,"accept_rate":96,"display_name":"Marcos Placona"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1549367949,"creation_date":1549367949,"answer_id":54533942,"question_id":54512235,"body_markdown":"Twilio developer evangelist here. As you&#39;ve noticed, Android will have trouble using our Java SDK as one of its dependencies is the Apache library for HTTP. What you want to do though is use our [Android SDK][1] for making calls.\r\n\r\nYou can see an example of how to use it [here][2], as well as go through the [quickstart][3] that will take you through the entire process.\r\n\r\nIn your example, you are using the Java SDK which beings a security problem into your application, as its now hard coding your account credentials into your final APK. I explain why that is not a good idea in this [blog post][4].\r\n\r\nHope this helps you.\r\n\r\n\r\n  [1]: https://www.twilio.com/docs/voice/voip-sdk\r\n  [2]: https://www.twilio.com/docs/voice/voip-sdk/get-started\r\n  [3]: https://www.twilio.com/docs/voice/voip-sdk/get-started#quickstart\r\n  [4]: https://www.twilio.com/blog/2016/05/how-to-send-an-sms-from-android.html","title":"Facing some error in implementing twilio programmable voice call in java android studio","body":"<p>Twilio developer evangelist here. As you've noticed, Android will have trouble using our Java SDK as one of its dependencies is the Apache library for HTTP. What you want to do though is use our <a href=\"https://www.twilio.com/docs/voice/voip-sdk\" rel=\"nofollow noreferrer\">Android SDK</a> for making calls.</p>\n\n<p>You can see an example of how to use it <a href=\"https://www.twilio.com/docs/voice/voip-sdk/get-started\" rel=\"nofollow noreferrer\">here</a>, as well as go through the <a href=\"https://www.twilio.com/docs/voice/voip-sdk/get-started#quickstart\" rel=\"nofollow noreferrer\">quickstart</a> that will take you through the entire process.</p>\n\n<p>In your example, you are using the Java SDK which beings a security problem into your application, as its now hard coding your account credentials into your final APK. I explain why that is not a good idea in this <a href=\"https://www.twilio.com/blog/2016/05/how-to-send-an-sms-from-android.html\" rel=\"nofollow noreferrer\">blog post</a>.</p>\n\n<p>Hope this helps you.</p>\n"}],"owner":{"account_id":11955309,"reputation":41,"user_id":8747835,"display_name":"JUNAID ALI"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":409,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1691701975,"creation_date":1549267954,"question_id":54512235,"body_markdown":"I&#39;m implementing Twilio programmable voice call in java android studio as description they gave in their docs but facing some error when run\r\n\r\nSee the exception I received below:\r\n\r\n    Exception in thread &quot;main&quot; java.lang.NoSuchFieldError: INSTANCE\r\n        \tat org.apache.http.conn.ssl.SSLConnectionSocketFactory.&lt;clinit&gt;(SSLConnectionSocketFactory.java:144)\r\n        \tat org.apache.http.impl.conn.PoolingHttpClientConnectionManager.getDefaultRegistry(PoolingHttpClientConnectionManager.java:109)\r\n        \tat org.apache.http.impl.conn.PoolingHttpClientConnectionManager.&lt;init&gt;(PoolingHttpClientConnectionManager.java:116)\r\n        \tat com.twilio.http.NetworkHttpClient.&lt;init&gt;(NetworkHttpClient.java:58)\r\n        \tat com.twilio.http.TwilioRestClient$Builder.build(TwilioRestClient.java:102)\r\n        \tat com.twilio.Twilio.getRestClient(Twilio.java:122)\r\n        \tat com.twilio.base.Creator.create(Creator.java:45)\r\n        \tat com.systema.twilliovoicecalltest.MakePhoneCall.main(MakePhoneCall.java:33)\r\n        \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        \tat java.lang.reflect.Method.invoke(Method.java:498)\r\n        \tat com.intellij.rt.execution.application.AppMainV2.main(AppMainV2.java:131)\r\n\r\n\r\nWhen I tried to exclude http libraries like this:\r\n\r\n```\r\nimplementation(group: &quot;com.twilio.sdk&quot;, name: &quot;twilio&quot;, version: &quot;7.34.1&quot;) {\r\n    exclude group: &#39;org.apache.httpcomponents&#39;, module: &#39;httpclient&#39;\r\n    exclude group: &#39;org.apache.httpcomponents&#39;, module: &#39;httpcore&#39;\r\n}\r\n\r\nimplementation(group: &quot;com.sparkjava&quot;, name: &quot;spark-core&quot;, version: &quot;2.7.1&quot;) {\r\n    exclude group: &#39;org.apache.httpcomponents&#39;, module: &#39;httpclient&#39;\r\n    exclude group: &#39;org.apache.httpcomponents&#39;, module: &#39;httpcore&#39;\r\n}\r\n\r\nimplementation(group: &quot;org.slf4j&quot;, name: &quot;slf4j-simple&quot;, version: &quot;1.7.21&quot;) {\r\n    exclude group: &#39;org.apache.httpcomponents&#39;, module: &#39;httpclient&#39;\r\n    exclude group: &#39;org.apache.httpcomponents&#39;, module: &#39;httpcore&#39;\r\n}\r\n```\r\n\r\nthe exception changed to:\r\n\r\n    Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/apache/http/ProtocolVersion\r\n    \tat com.twilio.http.TwilioRestClient$Builder.build(TwilioRestClient.java:102)\r\n    \tat com.twilio.Twilio.getRestClient(Twilio.java:122)\r\n    \tat com.twilio.base.Creator.create(Creator.java:45)\r\n    \tat com.systema.twilliovoicecalltest.MakePhoneCall.main(MakePhoneCall.java:33)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498)\r\n    \tat com.intellij.rt.execution.application.AppMainV2.main(AppMainV2.java:131)\r\n    Caused by: java.lang.ClassNotFoundException: org.apache.http.ProtocolVersion\r\n    \tat java.net.URLClassLoader.findClass(URLClassLoader.java:381)\r\n    \tat java.lang.ClassLoader.loadClass(ClassLoader.java:424)\r\n    \tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:331)\r\n    \tat java.lang.ClassLoader.loadClass(ClassLoader.java:357)\r\n    \t... 9 more\r\n\r\n#### Code\r\n```java\r\npublic static void main(String[] args) throws URISyntaxException {\r\n    Twilio.init(ACCOUNT_SID, AUTH_TOKEN);\r\n\r\n    String from = &quot;+18572632XXX&quot;;\r\n    String to = &quot;+92**********&quot;;\r\n\r\n    Call call = Call.creator(new PhoneNumber(to), new PhoneNumber(from),\r\n            new URI(&quot;http://demo.twilio.com/docs/voice.xml&quot;)).create();\r\n\r\n\r\n    System.out.println(call.getSid());\r\n}\r\n```\r\n\r\nFor the above code, I&#39;ve included the following libraries\r\n\r\n\r\n    implementation group: &quot;com.twilio.sdk&quot;, name: &quot;twilio&quot;, version: &quot;7.34.1&quot;\r\n    implementation group: &quot;com.sparkjava&quot;, name: &quot;spark-core&quot;, version: &quot;2.7.1&quot;\r\n    implementation group: &quot;org.slf4j&quot;, name: &quot;slf4j-simple&quot;, version: &quot;1.7.21&quot;\r\n\r\nAs i have not much experience in this please help \r\n\r\n\r\n\r\n\r\n","title":"Facing some error in implementing twilio programmable voice call in java android studio","body":"<p>I'm implementing Twilio programmable voice call in java android studio as description they gave in their docs but facing some error when run</p>\n<p>See the exception I received below:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.NoSuchFieldError: INSTANCE\n        at org.apache.http.conn.ssl.SSLConnectionSocketFactory.&lt;clinit&gt;(SSLConnectionSocketFactory.java:144)\n        at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.getDefaultRegistry(PoolingHttpClientConnectionManager.java:109)\n        at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.&lt;init&gt;(PoolingHttpClientConnectionManager.java:116)\n        at com.twilio.http.NetworkHttpClient.&lt;init&gt;(NetworkHttpClient.java:58)\n        at com.twilio.http.TwilioRestClient$Builder.build(TwilioRestClient.java:102)\n        at com.twilio.Twilio.getRestClient(Twilio.java:122)\n        at com.twilio.base.Creator.create(Creator.java:45)\n        at com.systema.twilliovoicecalltest.MakePhoneCall.main(MakePhoneCall.java:33)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n        at com.intellij.rt.execution.application.AppMainV2.main(AppMainV2.java:131)\n</code></pre>\n<p>When I tried to exclude http libraries like this:</p>\n<pre><code>implementation(group: &quot;com.twilio.sdk&quot;, name: &quot;twilio&quot;, version: &quot;7.34.1&quot;) {\n    exclude group: 'org.apache.httpcomponents', module: 'httpclient'\n    exclude group: 'org.apache.httpcomponents', module: 'httpcore'\n}\n\nimplementation(group: &quot;com.sparkjava&quot;, name: &quot;spark-core&quot;, version: &quot;2.7.1&quot;) {\n    exclude group: 'org.apache.httpcomponents', module: 'httpclient'\n    exclude group: 'org.apache.httpcomponents', module: 'httpcore'\n}\n\nimplementation(group: &quot;org.slf4j&quot;, name: &quot;slf4j-simple&quot;, version: &quot;1.7.21&quot;) {\n    exclude group: 'org.apache.httpcomponents', module: 'httpclient'\n    exclude group: 'org.apache.httpcomponents', module: 'httpcore'\n}\n</code></pre>\n<p>the exception changed to:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/apache/http/ProtocolVersion\n    at com.twilio.http.TwilioRestClient$Builder.build(TwilioRestClient.java:102)\n    at com.twilio.Twilio.getRestClient(Twilio.java:122)\n    at com.twilio.base.Creator.create(Creator.java:45)\n    at com.systema.twilliovoicecalltest.MakePhoneCall.main(MakePhoneCall.java:33)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at com.intellij.rt.execution.application.AppMainV2.main(AppMainV2.java:131)\nCaused by: java.lang.ClassNotFoundException: org.apache.http.ProtocolVersion\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:381)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:424)\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:331)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:357)\n    ... 9 more\n</code></pre>\n<h4>Code</h4>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) throws URISyntaxException {\n    Twilio.init(ACCOUNT_SID, AUTH_TOKEN);\n\n    String from = &quot;+18572632XXX&quot;;\n    String to = &quot;+92**********&quot;;\n\n    Call call = Call.creator(new PhoneNumber(to), new PhoneNumber(from),\n            new URI(&quot;http://demo.twilio.com/docs/voice.xml&quot;)).create();\n\n\n    System.out.println(call.getSid());\n}\n</code></pre>\n<p>For the above code, I've included the following libraries</p>\n<pre><code>implementation group: &quot;com.twilio.sdk&quot;, name: &quot;twilio&quot;, version: &quot;7.34.1&quot;\nimplementation group: &quot;com.sparkjava&quot;, name: &quot;spark-core&quot;, version: &quot;2.7.1&quot;\nimplementation group: &quot;org.slf4j&quot;, name: &quot;slf4j-simple&quot;, version: &quot;1.7.21&quot;\n</code></pre>\n<p>As i have not much experience in this please help</p>\n"},{"tags":["java","date"],"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":4,"creation_date":1691676277,"post_id":76876189,"comment_id":135525938,"body_markdown":"You shouldn&#39;t use `java.sql.Date` any more. Use `LocalDate` (i.e. when using JDBC, `preparedStatement.setObject(1, localDateValue)` and `resultSet.getObject(1, LocalDate.class)`).","body":"You shouldn&#39;t use <code>java.sql.Date</code> any more. Use <code>LocalDate</code> (i.e. when using JDBC, <code>preparedStatement.setObject(1, localDateValue)</code> and <code>resultSet.getObject(1, LocalDate.class)</code>)."},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":1,"creation_date":1691678766,"post_id":76876189,"comment_id":135526579,"body_markdown":"This required looking up loads of stuff and having to make some leaps of logic, such as: ... this question does not make sense unless OP is running this code on a system that is set to the Asia/Kolkata zone. Fun exercise to figure out this mystery :)","body":"This required looking up loads of stuff and having to make some leaps of logic, such as: ... this question does not make sense unless OP is running this code on a system that is set to the Asia/Kolkata zone. Fun exercise to figure out this mystery :)"}],"answers":[{"comments":[{"owner":{"account_id":2905954,"reputation":31,"user_id":5702331,"display_name":"Elbin Pallimalil"},"score":0,"creation_date":1691679782,"post_id":76876841,"comment_id":135526832,"body_markdown":"Thank you for the detailed explanation. The reason I have to use SQL Date is I&#39;m trying to fix an issue observed in a JDBC driver. We have an implementation of the ResultSet interface, so I need to implement the getDate method which returns SQL date. I need to find out what other way I can fix this odd behaviour.","body":"Thank you for the detailed explanation. The reason I have to use SQL Date is I&#39;m trying to fix an issue observed in a JDBC driver. We have an implementation of the ResultSet interface, so I need to implement the getDate method which returns SQL date. I need to find out what other way I can fix this odd behaviour."},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":1,"creation_date":1691680737,"post_id":76876841,"comment_id":135527064,"body_markdown":"Elbin, is it H2 by any chance? Find all calls to `.setDate`, `.getDate`, `.setTimestamp`, `.getTimestamp`, `getTime`, and `setTime` __and delete them - those methods are fundamentally broken and should never be used__. Replace them with `.setObject`/`getObject`, passing in the JDBC-spec-guaranteed java.time type instead (`LocalDateTime`, `LocalDate`, `LocalTime`, and `OffsetDateTime` depending on what kind of database type we&#39;re talking about).","body":"Elbin, is it H2 by any chance? Find all calls to <code>.setDate</code>, <code>.getDate</code>, <code>.setTimestamp</code>, <code>.getTimestamp</code>, <code>getTime</code>, and <code>setTime</code> <b>and delete them - those methods are fundamentally broken and should never be used</b>. Replace them with <code>.setObject</code>/<code>getObject</code>, passing in the JDBC-spec-guaranteed java.time type instead (<code>LocalDateTime</code>, <code>LocalDate</code>, <code>LocalTime</code>, and <code>OffsetDateTime</code> depending on what kind of database type we&#39;re talking about)."},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1691680786,"post_id":76876841,"comment_id":135527077,"body_markdown":"That helps, but doesn&#39;t fully fix everything; depends on your DB engine (h2 still won&#39;t help here), and if the problem is that you have written data to the DB in the past which is now broken - obviously doesn&#39;t help either. Messing with your tzdata defs using tzupdater is one way. Intentionally using an old joda-time with the old tzdata defs is another.","body":"That helps, but doesn&#39;t fully fix everything; depends on your DB engine (h2 still won&#39;t help here), and if the problem is that you have written data to the DB in the past which is now broken - obviously doesn&#39;t help either. Messing with your tzdata defs using tzupdater is one way. Intentionally using an old joda-time with the old tzdata defs is another."},{"owner":{"account_id":1901481,"reputation":2745,"user_id":1717259,"accept_rate":100,"display_name":"user1717259"},"score":0,"creation_date":1691681566,"post_id":76876841,"comment_id":135527270,"body_markdown":"Nice answer! There are some timezones that can be hard to work with. We had unit tests passing locally but failing on build servers. This was because of changes to the daylight saving regime in `Europe/Istanbul`, that were done between Java 1.8 releases.\nSee:\nhttps://github.com/eggert/tz/blob/ed49cb3d9b24feea35fd92320849a48009222213/europe","body":"Nice answer! There are some timezones that can be hard to work with. We had unit tests passing locally but failing on build servers. This was because of changes to the daylight saving regime in <code>Europe&#47;Istanbul</code>, that were done between Java 1.8 releases. See: <a href=\"https://github.com/eggert/tz/blob/ed49cb3d9b24feea35fd92320849a48009222213/europe\" rel=\"nofollow noreferrer\">github.com/eggert/tz/blob/&hellip;</a>"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1691681623,"post_id":76876841,"comment_id":135527277,"body_markdown":"“The JVM is broken” is a bold claim.  I’m not sure I understand what the bug is.  But I agree that using java.time types with JDBC is a very good idea, and I agree that date/time data should be kept as data types and not strings as much as possible.","body":"“The JVM is broken” is a bold claim.  I’m not sure I understand what the bug is.  But I agree that using java.time types with JDBC is a very good idea, and I agree that date/time data should be kept as data types and not strings as much as possible."},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1691681991,"post_id":76876841,"comment_id":135527375,"body_markdown":"@VGR Sure, it&#39;s bold. Between showing how the OpenJDK team picked the wrong tzdata variant to include and how this actively causes very nasty issues, it&#39;s justified. Note that none of this saves you with h2 (and thus presumably some other DB engines). You&#39;re just hosed. I am now actively running scripts to bugfix every JDK on every system I install them on using tzupdater, and all my apps start with a sanity check and insta-abort with a &#39;.. run the script first&#39; warning then System.exit to make sure I have fixed them all. This is incredibly annoying.","body":"@VGR Sure, it&#39;s bold. Between showing how the OpenJDK team picked the wrong tzdata variant to include and how this actively causes very nasty issues, it&#39;s justified. Note that none of this saves you with h2 (and thus presumably some other DB engines). You&#39;re just hosed. I am now actively running scripts to bugfix every JDK on every system I install them on using tzupdater, and all my apps start with a sanity check and insta-abort with a &#39;.. run the script first&#39; warning then System.exit to make sure I have fixed them all. This is incredibly annoying."},{"owner":{"account_id":2905954,"reputation":31,"user_id":5702331,"display_name":"Elbin Pallimalil"},"score":0,"creation_date":1691682032,"post_id":76876841,"comment_id":135527385,"body_markdown":"@rzwitserloot It&#39;s not H2. If I understood you correctly tzdata in Joda library and OpenJDK could differ, and can give results like I observed. I&#39;m not sure how much refactoring I can do in the driver code, but if I avoid using Joda for human to millis and then millis to human conversion, will I get the correct behaviour.","body":"@rzwitserloot It&#39;s not H2. If I understood you correctly tzdata in Joda library and OpenJDK could differ, and can give results like I observed. I&#39;m not sure how much refactoring I can do in the driver code, but if I avoid using Joda for human to millis and then millis to human conversion, will I get the correct behaviour."},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1691683049,"post_id":76876841,"comment_id":135527630,"body_markdown":"Yes, probably, but for any dates prior to 1970, you might still have issues.","body":"Yes, probably, but for any dates prior to 1970, you might still have issues."},{"owner":{"account_id":2905954,"reputation":31,"user_id":5702331,"display_name":"Elbin Pallimalil"},"score":0,"creation_date":1691990567,"post_id":76876841,"comment_id":135560073,"body_markdown":"@rzwitserloot I get the same millisecond value for &quot;1854-01-01&quot; from both Joda libraries and java.time APIs. This in turn gives an SQL date &quot;1853-12-31&quot; that is different from original. So should I now assume JVM is broken?","body":"@rzwitserloot I get the same millisecond value for &quot;1854-01-01&quot; from both Joda libraries and java.time APIs. This in turn gives an SQL date &quot;1853-12-31&quot; that is different from original. So should I now assume JVM is broken?"},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1692004387,"post_id":76876841,"comment_id":135562224,"body_markdown":"@Elbin That simply means your joda-installation&#39;s copy of the `tzdata` datafiles and your JDK installation&#39;s are the same for, specifically, the combination of 1854-01-01 and the timezone you&#39;re trying this in. No more, and no less. It says nothing about whether these defs are broken. If it&#39;s a recent JDK install (JDK17), it&#39;s broken by definition - all dates before 1970 are. Whether that _actually_ means it&#39;s not the def you want - who knows.","body":"@Elbin That simply means your joda-installation&#39;s copy of the <code>tzdata</code> datafiles and your JDK installation&#39;s are the same for, specifically, the combination of 1854-01-01 and the timezone you&#39;re trying this in. No more, and no less. It says nothing about whether these defs are broken. If it&#39;s a recent JDK install (JDK17), it&#39;s broken by definition - all dates before 1970 are. Whether that <i>actually</i> means it&#39;s not the def you want - who knows."},{"owner":{"account_id":2905954,"reputation":31,"user_id":5702331,"display_name":"Elbin Pallimalil"},"score":0,"creation_date":1692101378,"post_id":76876841,"comment_id":135576429,"body_markdown":"@rzwitserloot So does java.sql.Date use a different tzdata file than java.time APIs?","body":"@rzwitserloot So does java.sql.Date use a different tzdata file than java.time APIs?"},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1692127959,"post_id":76876841,"comment_id":135581542,"body_markdown":"It doesn&#39;t. j.s.Date has other problems ,though. You shouldn&#39;t use it.","body":"It doesn&#39;t. j.s.Date has other problems ,though. You shouldn&#39;t use it."}],"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":12,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1691701588,"creation_date":1691678714,"answer_id":76876841,"question_id":76876189,"body_markdown":"## Preamble\r\n\r\nYour code as written actually would be off by one day for _everything_, __if__ you run that code on any JVM whose default timezone is configured to be &#39;west&#39; of `Asia/Kolkata`, because &#39;your system&#39;s local timezone&#39; is an intrinsic part of it (because `new Date(millis).toString()` prints the date that those millis are in as per your local timezone). Hence, a previous answerer (who since deleted their answer) who put in the effort to fully reproduce your issue misidentified the problem - part of the &#39;input&#39; is _also_ to set the platform default tz to Asia/Kolkata, which, evidently, is what your Computer is already set to.\r\n\r\nThe explanation to this problem is very complicated and requires a bunch of background.\r\n\r\n\r\n## A deep dive on `tzdata`.\r\n\r\nHere is the current [tzdata section for `Asia/Kolkata`](https://github.com/eggert/tz/blob/ed49cb3d9b24feea35fd92320849a48009222213/asia#L1302C1-L1310C14):\r\n\r\n```\r\n# Zone\tNAME\t\tSTDOFF\tRULES\tFORMAT\t[UNTIL]\r\nZone\tAsia/Kolkata\t5:53:28 -\tLMT\t1854 Jun 28 # Kolkata\r\n\t\t\t            5:53:20\t-\tHMT\t1870\t    # Howrah Mean Time?\r\n\t\t\t            5:21:10\t-\tMMT\t1906 Jan  1 # Madras local time\r\n\t\t\t            5:30\t-\tIST\t1941 Oct\r\n\t\t\t            5:30\t1:00\t+0630\t1942 May 15\r\n\t\t\t            5:30\t-\tIST\t1942 Sep\r\n\t\t\t            5:30\t1:00\t+0630\t1945 Oct 15\r\n\t\t\t            5:30\t-\tIST\r\n```\r\n\r\nAs you can see, 1870 is an inflection point for it: A tiny little change, adjusting the offset bij 2 minutes and 10 seconds was introduced.\r\n\r\nThat is just a small snippet of a huge boatload of text that lists every timezone and every inflection point for all of them. This is called the `tzdata` and is a separate project. The thing is, jodatime as a library ships with its own copy of this `tzdata` and uses this for all its calculations, whereas `new Date().toString()` needs to convert its millis too in order to determine what date to show, and it uses your OpenJDK&#39;s definitions (remember, `java.util.Date` __is a lie__ - it does not represent dates at all, it represents epochmillis; its toString is merely confused for backwards compatibility reasons. There&#39;s a reason almost every method in that class is deprecated, __you should not be using this class for anything__).\r\n\r\n## The explanation (in overview)\r\n\r\nIf the `tzdata` that is baked into your joda distro is different from the tzdata baked into your OpenJDK specifically in regards to `Asia/Kolkata` for the relevant date, we have our explanation. Jodatime needs to determine the correct millis for `1854-01-01 00:00:00 in the Asia/Kolkata` zone which it does using its tzdata. This millis is then sent to `j.u.Date`, and then you ask `j.u.Date`: Convert that _back_ to human reckoning, in my system&#39;s default zone (Presumably, also `Asia/Kolkata`). That __SHOULD__ be a lossless conversion - it should always get you right back to 1854-01-01. __Unless the tzdata definitions for `Asia/Kolkata` of your jodatime and your OpenJDK disagree__.\r\n\r\nLooking back in history, the last version of jodatime where there is a disagreement is all the way [back to 2018](https://github.com/JodaOrg/joda-time/blob/c5c681c91c74a508e67911e0af4980846d676ba2/src/main/java/org/joda/time/tz/src/asia#L890C1-L896C14):\r\n\r\n```\r\nZone\tAsia/Kolkata\t5:53:28 -\tLMT\t1880        # Kolkata\r\n\t\t\t            5:53:20\t-\tHMT\t1941 Oct    # Howrah Mean Time?\r\n\t\t\t            6:30\t-\t+0630\t1942 May 15\r\n\t\t\t            5:30\t-\tIST\t1942 Sep\r\n\t\t\t            5:30\t1:00\t+0630\t1945 Oct 15\r\n\t\t\t            5:30\t-\tIST\r\n```\r\n\r\nIt&#39;s subtle: There is a difference in the following date ranges:\r\n\r\nUntil 1870 they are in agreement: Offse of 5:53:28.\r\n\r\nFrom 1870 to 1880, the current def says the offset is 5:53:20. The 2018 version, however, says the offset is 5:53:28.\r\n\r\nThen from 1880 to 1906 the two are in agreement again (both go with 5:53:20).\r\n\r\nFrom 1906 to 1941, the current version says the offset is 5:21:10, whereas the 2018 version says the offset is 5:53:20.\r\n\r\nThen the switchover to the 5:30:00 offset date is also not the same; from 1942 they are in agreement again until the present day.\r\n\r\n__Depending on the direction of the error you won&#39;t notice__. One &#39;direction&#39; of error (Where old thinks the offset is _less_ than new) you won&#39;t notice: The translation errors by translating `1910-01-01 00:00:00` to `1910-01-01 01:00:00` (not exactly - but, with the error _added_ to the date). toString just prints the date, so you can&#39;t tell.\r\n\r\nIts when the old thinks the offset is _more_ than the new that you end up translating `1870-01-01 00:00:00` to `1869-12-31 23:...` - that the error is subtracted, thus resulting in a date that is &#39;too low&#39;.\r\n\r\nI&#39;m 99.9% certain your particular version of jodatime is quite old (2018 or earlier). If you update it to the latest, this problem goes away, but, your code will just fail again if ever these definitions change again. I suggest you read on so you understand how this works, and what you can do to ensure this problem won&#39;t show up in the future.\r\n\r\n## A quick note on tzdata principles\r\n\r\nMore generally, __THE JVM IS BROKEN__ - anytime you have ALL these things happening:\r\n\r\n* You translate any date from human reckoning to millis and back again, one step being done on JDK version X, and another on JDK version Y, where X and Y are on different sides of &#39;the time when OpenJDK messed up and picked the simplified version of the post-tzdata refactor&#39; line (which is, more or less, a point update of OpenJDK17).\r\n* That time is before 1970.\r\n\r\nThen you should assume that an off-by-one error is going to occur in that date. This hits a few time zones particularly hard (for example, Europe/Amsterdam. For example if you store dates in the h2 database system using JDBC&#39;s `.setDate` and `.getDate`, or even `.setObject(x, LocalDate)`, and that date is prior to 1945, __it will be off by one when you upgrade your JDK__.\r\n\r\nThis is a bug, I think the OpenJDK is the primary actor that messed this up, I reported it, they do not understand. I rate the odds they ever fix it as low.\r\n\r\nNB: The reason 1970 is magic, is that the tzdata refactored: They realized that exact knowledge about timezone status prior to 1970 is incredibly hard to verify, so recently they changed policy: Any defs that affect 1970 or after are aggressively verified, fact-checked, and distributed, and an extremely high bar is required if you want to tell the tzdata maintainer that it has an error in it that affects 1970 or later. However, in contrast, a few newspaper articles are enough for pre-1970 updates and the tzdata makes far fewer guarantees about accuracy because being accurate is difficult as a general principle due to lots of details being lost to the mists of time. As part of this policy update, there are &#39;simple&#39; and &#39;complex&#39; versions of tzdata now: The simple version more aggressively errors for pre-1970. For example, it says that The Netherlands was like Belgium pre-1970 which is known-wrong for the second world war years. Nevertheless, tzdata will not fix it because of policy (&#39;we do not guarantee correctness for pre-1970 if you take the simple set&#39;), and don&#39;t want to hear that this was the wrong choice (NL is larger than Belgium, so NL should be &#39;leading&#39;. Or just include both, you don&#39;t guarantee correctness but you don&#39;t guarantee wrongness either). However, the worst offender here is team OpenJDK that messed up by picking the simple set.\r\n\r\n\r\n## How to avoid this problem from hurting you\r\n\r\njoda-time is obsolete and has been for a decade. __Do not use it__ - java itself has a variant of joda-time now (it was added to the JDK by the author of JodaTime!), in the `java.time` package. In your scenario the root cause is that you are operating with different tzdata defs and all sorts of heck is going to break loose when you do that. At least by using java.time, all is in agreement.\r\n\r\nBut that&#39;s not enough - I do that and the `Europe/Amsterdam` thing caused a lot of pain.\r\n\r\nYou also want to avoid millis to human to millis conversion as much as you can. In order to do that properly, __do not ever use `java.util.Date`, and as a corrollary, do not use `java.sql.Date` or `java.sql.Timestamp` either. These things are just broken. Use `.getObject(colIdx, OffsetDateTime.class)` for example. It&#39;s wordy, but JDBC5 spec __requires__ that databases support it.\r\n\r\nThen, use a database that doesn&#39;t implement it badly. H2, unfortunately, messed this up. Understandable, perhaps - this stuff is hard to find.\r\n\r\n## OMG I didn&#39;t do that and now all my data is corrupt.\r\n\r\nYou can load the proper version of a tzdata def straight into the JDK, using the `tzupdater.jar` tool. If this has caused heck on your systems, find out which tzdata version was present when you did step 1 of all your conversions, load that into your JDK using tzupdater, and now the reverse of step 1 no longer causes off-by-1 errors.\r\n","title":"java.sql.Date from millis off by 1 day for dates before 1870","body":"<h2>Preamble</h2>\n<p>Your code as written actually would be off by one day for <em>everything</em>, <strong>if</strong> you run that code on any JVM whose default timezone is configured to be 'west' of <code>Asia/Kolkata</code>, because 'your system's local timezone' is an intrinsic part of it (because <code>new Date(millis).toString()</code> prints the date that those millis are in as per your local timezone). Hence, a previous answerer (who since deleted their answer) who put in the effort to fully reproduce your issue misidentified the problem - part of the 'input' is <em>also</em> to set the platform default tz to Asia/Kolkata, which, evidently, is what your Computer is already set to.</p>\n<p>The explanation to this problem is very complicated and requires a bunch of background.</p>\n<h2>A deep dive on <code>tzdata</code>.</h2>\n<p>Here is the current <a href=\"https://github.com/eggert/tz/blob/ed49cb3d9b24feea35fd92320849a48009222213/asia#L1302C1-L1310C14\" rel=\"nofollow noreferrer\">tzdata section for <code>Asia/Kolkata</code></a>:</p>\n<pre><code># Zone  NAME        STDOFF  RULES   FORMAT  [UNTIL]\nZone    Asia/Kolkata    5:53:28 -   LMT 1854 Jun 28 # Kolkata\n                        5:53:20 -   HMT 1870        # Howrah Mean Time?\n                        5:21:10 -   MMT 1906 Jan  1 # Madras local time\n                        5:30    -   IST 1941 Oct\n                        5:30    1:00    +0630   1942 May 15\n                        5:30    -   IST 1942 Sep\n                        5:30    1:00    +0630   1945 Oct 15\n                        5:30    -   IST\n</code></pre>\n<p>As you can see, 1870 is an inflection point for it: A tiny little change, adjusting the offset bij 2 minutes and 10 seconds was introduced.</p>\n<p>That is just a small snippet of a huge boatload of text that lists every timezone and every inflection point for all of them. This is called the <code>tzdata</code> and is a separate project. The thing is, jodatime as a library ships with its own copy of this <code>tzdata</code> and uses this for all its calculations, whereas <code>new Date().toString()</code> needs to convert its millis too in order to determine what date to show, and it uses your OpenJDK's definitions (remember, <code>java.util.Date</code> <strong>is a lie</strong> - it does not represent dates at all, it represents epochmillis; its toString is merely confused for backwards compatibility reasons. There's a reason almost every method in that class is deprecated, <strong>you should not be using this class for anything</strong>).</p>\n<h2>The explanation (in overview)</h2>\n<p>If the <code>tzdata</code> that is baked into your joda distro is different from the tzdata baked into your OpenJDK specifically in regards to <code>Asia/Kolkata</code> for the relevant date, we have our explanation. Jodatime needs to determine the correct millis for <code>1854-01-01 00:00:00 in the Asia/Kolkata</code> zone which it does using its tzdata. This millis is then sent to <code>j.u.Date</code>, and then you ask <code>j.u.Date</code>: Convert that <em>back</em> to human reckoning, in my system's default zone (Presumably, also <code>Asia/Kolkata</code>). That <strong>SHOULD</strong> be a lossless conversion - it should always get you right back to 1854-01-01. <strong>Unless the tzdata definitions for <code>Asia/Kolkata</code> of your jodatime and your OpenJDK disagree</strong>.</p>\n<p>Looking back in history, the last version of jodatime where there is a disagreement is all the way <a href=\"https://github.com/JodaOrg/joda-time/blob/c5c681c91c74a508e67911e0af4980846d676ba2/src/main/java/org/joda/time/tz/src/asia#L890C1-L896C14\" rel=\"nofollow noreferrer\">back to 2018</a>:</p>\n<pre><code>Zone    Asia/Kolkata    5:53:28 -   LMT 1880        # Kolkata\n                        5:53:20 -   HMT 1941 Oct    # Howrah Mean Time?\n                        6:30    -   +0630   1942 May 15\n                        5:30    -   IST 1942 Sep\n                        5:30    1:00    +0630   1945 Oct 15\n                        5:30    -   IST\n</code></pre>\n<p>It's subtle: There is a difference in the following date ranges:</p>\n<p>Until 1870 they are in agreement: Offse of 5:53:28.</p>\n<p>From 1870 to 1880, the current def says the offset is 5:53:20. The 2018 version, however, says the offset is 5:53:28.</p>\n<p>Then from 1880 to 1906 the two are in agreement again (both go with 5:53:20).</p>\n<p>From 1906 to 1941, the current version says the offset is 5:21:10, whereas the 2018 version says the offset is 5:53:20.</p>\n<p>Then the switchover to the 5:30:00 offset date is also not the same; from 1942 they are in agreement again until the present day.</p>\n<p><strong>Depending on the direction of the error you won't notice</strong>. One 'direction' of error (Where old thinks the offset is <em>less</em> than new) you won't notice: The translation errors by translating <code>1910-01-01 00:00:00</code> to <code>1910-01-01 01:00:00</code> (not exactly - but, with the error <em>added</em> to the date). toString just prints the date, so you can't tell.</p>\n<p>Its when the old thinks the offset is <em>more</em> than the new that you end up translating <code>1870-01-01 00:00:00</code> to <code>1869-12-31 23:...</code> - that the error is subtracted, thus resulting in a date that is 'too low'.</p>\n<p>I'm 99.9% certain your particular version of jodatime is quite old (2018 or earlier). If you update it to the latest, this problem goes away, but, your code will just fail again if ever these definitions change again. I suggest you read on so you understand how this works, and what you can do to ensure this problem won't show up in the future.</p>\n<h2>A quick note on tzdata principles</h2>\n<p>More generally, <strong>THE JVM IS BROKEN</strong> - anytime you have ALL these things happening:</p>\n<ul>\n<li>You translate any date from human reckoning to millis and back again, one step being done on JDK version X, and another on JDK version Y, where X and Y are on different sides of 'the time when OpenJDK messed up and picked the simplified version of the post-tzdata refactor' line (which is, more or less, a point update of OpenJDK17).</li>\n<li>That time is before 1970.</li>\n</ul>\n<p>Then you should assume that an off-by-one error is going to occur in that date. This hits a few time zones particularly hard (for example, Europe/Amsterdam. For example if you store dates in the h2 database system using JDBC's <code>.setDate</code> and <code>.getDate</code>, or even <code>.setObject(x, LocalDate)</code>, and that date is prior to 1945, <strong>it will be off by one when you upgrade your JDK</strong>.</p>\n<p>This is a bug, I think the OpenJDK is the primary actor that messed this up, I reported it, they do not understand. I rate the odds they ever fix it as low.</p>\n<p>NB: The reason 1970 is magic, is that the tzdata refactored: They realized that exact knowledge about timezone status prior to 1970 is incredibly hard to verify, so recently they changed policy: Any defs that affect 1970 or after are aggressively verified, fact-checked, and distributed, and an extremely high bar is required if you want to tell the tzdata maintainer that it has an error in it that affects 1970 or later. However, in contrast, a few newspaper articles are enough for pre-1970 updates and the tzdata makes far fewer guarantees about accuracy because being accurate is difficult as a general principle due to lots of details being lost to the mists of time. As part of this policy update, there are 'simple' and 'complex' versions of tzdata now: The simple version more aggressively errors for pre-1970. For example, it says that The Netherlands was like Belgium pre-1970 which is known-wrong for the second world war years. Nevertheless, tzdata will not fix it because of policy ('we do not guarantee correctness for pre-1970 if you take the simple set'), and don't want to hear that this was the wrong choice (NL is larger than Belgium, so NL should be 'leading'. Or just include both, you don't guarantee correctness but you don't guarantee wrongness either). However, the worst offender here is team OpenJDK that messed up by picking the simple set.</p>\n<h2>How to avoid this problem from hurting you</h2>\n<p>joda-time is obsolete and has been for a decade. <strong>Do not use it</strong> - java itself has a variant of joda-time now (it was added to the JDK by the author of JodaTime!), in the <code>java.time</code> package. In your scenario the root cause is that you are operating with different tzdata defs and all sorts of heck is going to break loose when you do that. At least by using java.time, all is in agreement.</p>\n<p>But that's not enough - I do that and the <code>Europe/Amsterdam</code> thing caused a lot of pain.</p>\n<p>You also want to avoid millis to human to millis conversion as much as you can. In order to do that properly, __do not ever use <code>java.util.Date</code>, and as a corrollary, do not use <code>java.sql.Date</code> or <code>java.sql.Timestamp</code> either. These things are just broken. Use <code>.getObject(colIdx, OffsetDateTime.class)</code> for example. It's wordy, but JDBC5 spec <strong>requires</strong> that databases support it.</p>\n<p>Then, use a database that doesn't implement it badly. H2, unfortunately, messed this up. Understandable, perhaps - this stuff is hard to find.</p>\n<h2>OMG I didn't do that and now all my data is corrupt.</h2>\n<p>You can load the proper version of a tzdata def straight into the JDK, using the <code>tzupdater.jar</code> tool. If this has caused heck on your systems, find out which tzdata version was present when you did step 1 of all your conversions, load that into your JDK using tzupdater, and now the reverse of step 1 no longer causes off-by-1 errors.</p>\n"}],"owner":{"account_id":2905954,"reputation":31,"user_id":5702331,"display_name":"Elbin Pallimalil"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1691701588,"creation_date":1691674137,"question_id":76876189,"body_markdown":"If I create an SQL Date object from millis, the date is off by 1 day for dates before 1870-01-01\r\n\r\n\r\n```\r\npackage org.example;\r\n\r\nimport org.joda.time.DateTime;\r\nimport org.joda.time.DateTimeZone;\r\nimport org.joda.time.format.DateTimeFormatter;\r\nimport org.joda.time.format.ISODateTimeFormat;\r\n\r\nimport java.sql.Date;\r\n\r\n/**\r\n * Hello world!\r\n *\r\n */\r\npublic class App \r\n{\r\n\r\n    static final DateTimeFormatter DATE_FORMATTER = ISODateTimeFormat.date();\r\n    public static void main( String[] args )\r\n    {\r\n        DateTimeZone localTimeZone = DateTimeZone.forID(&quot;Asia/Kolkata&quot;);\r\n        long millis = DATE_FORMATTER.withZone(localTimeZone).parseMillis(String.valueOf(&quot;1854-01-01&quot;));\r\n        Date date = new Date(millis);\r\n        DateTime jodaDate = new DateTime(millis,localTimeZone);\r\n        //Date date = new Date(DATE_FORMATTER.withZone(localTimeZone).parseMillis()\r\n        System.out.println(&quot;millis &quot; + millis + &quot;,date &quot; + date + &quot;,jodadate &quot; + jodaDate);\r\n    }\r\n}\r\n\r\n```\r\n\r\nAbove code gives the output\r\n\r\n```\r\nmillis -3660616408000,date 1853-12-31,jodadate 1854-01-01T00:00:00.000+05:53:28\r\n```\r\n\r\n\r\nIn this code I&#39;m getting the milliseconds from epoch of a string using Joda libraries. Then creating an SQL Date object from it. But this SQL date is one day off from the initial string I parsed.\r\n\r\nStrange thing is I don&#39;t see the SQL date being off I started with any date on or after 1870-01-01. Is there something I&#39;m missing here?\r\n\r\n---EDIT---\r\n\r\nBelow is an example where I *don&#39;t* see the date being one day off.\r\n```\r\npackage org.example;\r\n\r\nimport org.joda.time.DateTime;\r\nimport org.joda.time.DateTimeZone;\r\nimport org.joda.time.format.DateTimeFormatter;\r\nimport org.joda.time.format.ISODateTimeFormat;\r\n\r\nimport java.sql.Date;\r\n\r\n/**\r\n * Hello world!\r\n *\r\n */\r\npublic class App \r\n{\r\n\r\n    static final DateTimeFormatter DATE_FORMATTER = ISODateTimeFormat.date();\r\n    public static void main( String[] args )\r\n    {\r\n        DateTimeZone localTimeZone = DateTimeZone.forID(&quot;Asia/Kolkata&quot;);\r\n        long millis = DATE_FORMATTER.withZone(localTimeZone).parseMillis(String.valueOf(&quot;1870-01-01&quot;));\r\n        Date date = new Date(millis);\r\n        DateTime jodaDate = new DateTime(millis,localTimeZone);\r\n        //Date date = new Date(DATE_FORMATTER.withZone(localTimeZone).parseMillis()\r\n        System.out.println(&quot;millis &quot; + millis + &quot;,date &quot; + date + &quot;,jodadate &quot; + jodaDate);\r\n    }\r\n}\r\n```\r\nAbove code gives output\r\n```\r\nmillis -3155692870000,date 1870-01-01,jodadate 1870-01-01T00:00:00.000+05:21:10\r\n```","title":"java.sql.Date from millis off by 1 day for dates before 1870","body":"<p>If I create an SQL Date object from millis, the date is off by 1 day for dates before 1870-01-01</p>\n<pre><code>package org.example;\n\nimport org.joda.time.DateTime;\nimport org.joda.time.DateTimeZone;\nimport org.joda.time.format.DateTimeFormatter;\nimport org.joda.time.format.ISODateTimeFormat;\n\nimport java.sql.Date;\n\n/**\n * Hello world!\n *\n */\npublic class App \n{\n\n    static final DateTimeFormatter DATE_FORMATTER = ISODateTimeFormat.date();\n    public static void main( String[] args )\n    {\n        DateTimeZone localTimeZone = DateTimeZone.forID(&quot;Asia/Kolkata&quot;);\n        long millis = DATE_FORMATTER.withZone(localTimeZone).parseMillis(String.valueOf(&quot;1854-01-01&quot;));\n        Date date = new Date(millis);\n        DateTime jodaDate = new DateTime(millis,localTimeZone);\n        //Date date = new Date(DATE_FORMATTER.withZone(localTimeZone).parseMillis()\n        System.out.println(&quot;millis &quot; + millis + &quot;,date &quot; + date + &quot;,jodadate &quot; + jodaDate);\n    }\n}\n\n</code></pre>\n<p>Above code gives the output</p>\n<pre><code>millis -3660616408000,date 1853-12-31,jodadate 1854-01-01T00:00:00.000+05:53:28\n</code></pre>\n<p>In this code I'm getting the milliseconds from epoch of a string using Joda libraries. Then creating an SQL Date object from it. But this SQL date is one day off from the initial string I parsed.</p>\n<p>Strange thing is I don't see the SQL date being off I started with any date on or after 1870-01-01. Is there something I'm missing here?</p>\n<p>---EDIT---</p>\n<p>Below is an example where I <em>don't</em> see the date being one day off.</p>\n<pre><code>package org.example;\n\nimport org.joda.time.DateTime;\nimport org.joda.time.DateTimeZone;\nimport org.joda.time.format.DateTimeFormatter;\nimport org.joda.time.format.ISODateTimeFormat;\n\nimport java.sql.Date;\n\n/**\n * Hello world!\n *\n */\npublic class App \n{\n\n    static final DateTimeFormatter DATE_FORMATTER = ISODateTimeFormat.date();\n    public static void main( String[] args )\n    {\n        DateTimeZone localTimeZone = DateTimeZone.forID(&quot;Asia/Kolkata&quot;);\n        long millis = DATE_FORMATTER.withZone(localTimeZone).parseMillis(String.valueOf(&quot;1870-01-01&quot;));\n        Date date = new Date(millis);\n        DateTime jodaDate = new DateTime(millis,localTimeZone);\n        //Date date = new Date(DATE_FORMATTER.withZone(localTimeZone).parseMillis()\n        System.out.println(&quot;millis &quot; + millis + &quot;,date &quot; + date + &quot;,jodadate &quot; + jodaDate);\n    }\n}\n</code></pre>\n<p>Above code gives output</p>\n<pre><code>millis -3155692870000,date 1870-01-01,jodadate 1870-01-01T00:00:00.000+05:21:10\n</code></pre>\n"},{"tags":["java","spring-boot","yt-dlp"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691681212,"post_id":76877129,"comment_id":135527187,"body_markdown":"*i want to get the video or audio as link to download* So why not use your start link in a gui hyperink which downloads the file on click?","body":"<i>i want to get the video or audio as link to download</i> So why not use your start link in a gui hyperink which downloads the file on click?"},{"owner":{"account_id":29200375,"reputation":1,"user_id":22370633,"display_name":"Majed"},"score":0,"creation_date":1691681639,"post_id":76877129,"comment_id":135527281,"body_markdown":"what do you mean ?","body":"what do you mean ?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691682368,"post_id":76877129,"comment_id":135527461,"body_markdown":"I&#39;m not even sure what *you* mean ;) So i&#39;ll check - do you mean you want the user to be able to click on a link and *then* download the video?","body":"I&#39;m not even sure what <i>you</i> mean ;) So i&#39;ll check - do you mean you want the user to be able to click on a link and <i>then</i> download the video?"},{"owner":{"account_id":29200375,"reputation":1,"user_id":22370633,"display_name":"Majed"},"score":0,"creation_date":1691684255,"post_id":76877129,"comment_id":135527940,"body_markdown":"yeah like i want to make after this multiple comboboxs to let the user choose like the media format and the resolution it would be great if you help me with this too.","body":"yeah like i want to make after this multiple comboboxs to let the user choose like the media format and the resolution it would be great if you help me with this too."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691685297,"post_id":76877129,"comment_id":135528137,"body_markdown":"I can&#39;t get into the intricacies of JavaFX guis (I don&#39;t even do it) but there&#39;s not much to this other than responding to user input. You&#39;ll make life easier for yourself if you use `ProcessBuilder` too","body":"I can&#39;t get into the intricacies of JavaFX guis (I don&#39;t even do it) but there&#39;s not much to this other than responding to user input. You&#39;ll make life easier for yourself if you use <code>ProcessBuilder</code> too"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1691757470,"post_id":76877129,"comment_id":135538575,"body_markdown":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example).","body":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}],"answers":[{"tags":[],"owner":{"account_id":9934708,"reputation":997,"user_id":7353417,"display_name":"pierpy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691701586,"creation_date":1691701586,"answer_id":76879314,"question_id":76877129,"body_markdown":"The right command line to get the download link is:  \r\n` yt-dlp --get-url [...]`  \r\n\r\nSo, in your case, maybe   \r\n`stdin.println(dlp + &quot;--get-url &quot; + url + &quot; -f best/bestvideo+bestaudio &quot; );`  does the job.  \r\nPlease note, I&#39;m not familiar with Java, and I don&#39;t know if this is the best way to pass parameters to an external executable","title":"How can i get the download link using yt-dlp","body":"<p>The right command line to get the download link is:<br />\n<code> yt-dlp --get-url [...]</code></p>\n<p>So, in your case, maybe<br />\n<code>stdin.println(dlp + &quot;--get-url &quot; + url + &quot; -f best/bestvideo+bestaudio &quot; );</code>  does the job.<br />\nPlease note, I'm not familiar with Java, and I don't know if this is the best way to pass parameters to an external executable</p>\n"}],"owner":{"account_id":29200375,"reputation":1,"user_id":22370633,"display_name":"Majed"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":782,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691701586,"creation_date":1691680664,"question_id":76877129,"body_markdown":"this java code  will download the youtube video direct to the selectedDirectory. i am trying to figure out if it is possible to get instead a download link print it out. if i paste this link to a browser it will ask me where to save it then it will start download the selected format video or audio.\r\n\r\n```\r\npackage com.chillyfacts.com;\r\n\r\nimport java.io.PrintWriter;\r\nimport javafx.application.Application;\r\nimport javafx.stage.DirectoryChooser;\r\nimport javafx.stage.Stage;\r\n\r\npublic class my_main extends Application {\r\n\r\n    public static void main(String[] args) {\r\n        launch(args);\r\n    }\r\n\r\n    @Override\r\n    public void start(Stage primaryStage) {\r\n        String dlp = &quot;D:\\youtube_db_java\\yt-dlP &quot;;\r\n\r\n        DirectoryChooser directoryChooser = new DirectoryChooser();\r\n\r\n\r\n        java.io.File selectedDirectory = directoryChooser.showDialog(primaryStage);\r\n\r\n\r\n        if (selectedDirectory != null) {\r\n            String chosenPath = selectedDirectory.getAbsolutePath();\r\n            String url = &quot;https://www.youtube.com/watch?v=BaW_jenozKc&quot;;\r\n            String[] command = {\r\n                &quot;cmd&quot;,\r\n            };\r\n            Process p;\r\n            try {\r\n                p = Runtime.getRuntime().exec(command);\r\n                new Thread(new SyncPipe(p.getErrorStream(), System.err)).start();\r\n                new Thread(new SyncPipe(p.getInputStream(), System.out)).start();\r\n                PrintWriter stdin = new PrintWriter(p.getOutputStream());\r\n                stdin.println(&quot;cd &quot;&quot; + chosenPath + &quot;&quot;&quot;);\r\n                stdin.println(dlp + url + &quot; -f best/bestvideo+bestaudio &quot; );\r\n                stdin.close();\r\n                p.waitFor();\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n        } else {\r\n            System.out.println(&quot;No directory selected.&quot;);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\ni want to get the video or audio as link to download\r\n\r\n","title":"How can i get the download link using yt-dlp","body":"<p>this java code  will download the youtube video direct to the selectedDirectory. i am trying to figure out if it is possible to get instead a download link print it out. if i paste this link to a browser it will ask me where to save it then it will start download the selected format video or audio.</p>\n<pre><code>package com.chillyfacts.com;\n\nimport java.io.PrintWriter;\nimport javafx.application.Application;\nimport javafx.stage.DirectoryChooser;\nimport javafx.stage.Stage;\n\npublic class my_main extends Application {\n\n    public static void main(String[] args) {\n        launch(args);\n    }\n\n    @Override\n    public void start(Stage primaryStage) {\n        String dlp = &quot;D:\\youtube_db_java\\yt-dlP &quot;;\n\n        DirectoryChooser directoryChooser = new DirectoryChooser();\n\n\n        java.io.File selectedDirectory = directoryChooser.showDialog(primaryStage);\n\n\n        if (selectedDirectory != null) {\n            String chosenPath = selectedDirectory.getAbsolutePath();\n            String url = &quot;https://www.youtube.com/watch?v=BaW_jenozKc&quot;;\n            String[] command = {\n                &quot;cmd&quot;,\n            };\n            Process p;\n            try {\n                p = Runtime.getRuntime().exec(command);\n                new Thread(new SyncPipe(p.getErrorStream(), System.err)).start();\n                new Thread(new SyncPipe(p.getInputStream(), System.out)).start();\n                PrintWriter stdin = new PrintWriter(p.getOutputStream());\n                stdin.println(&quot;cd &quot;&quot; + chosenPath + &quot;&quot;&quot;);\n                stdin.println(dlp + url + &quot; -f best/bestvideo+bestaudio &quot; );\n                stdin.close();\n                p.waitFor();\n            } catch (Exception e) {\n                e.printStackTrace();\n            }\n        } else {\n            System.out.println(&quot;No directory selected.&quot;);\n        }\n    }\n}\n</code></pre>\n<p>i want to get the video or audio as link to download</p>\n"},{"tags":["java","spring","spring-boot","spring-boot-actuator"],"comments":[{"owner":{"account_id":3200622,"reputation":5051,"user_id":2702730,"accept_rate":81,"display_name":"senseiwu"},"score":1,"creation_date":1523309243,"post_id":48900892,"comment_id":86498496,"body_markdown":"See https://stackoverflow.com/a/48670785/2702730 for a very detailed response","body":"See <a href=\"https://stackoverflow.com/a/48670785/2702730\">stackoverflow.com/a/48670785/2702730</a> for a very detailed response"},{"owner":{"account_id":952426,"reputation":1868,"user_id":978302,"accept_rate":60,"display_name":"RenatoIvancic"},"score":0,"creation_date":1674386711,"post_id":48900892,"comment_id":132699690,"body_markdown":"As mentioned in the link @senseiwu posted. Old properties starting with `endpoints.xyz` are deprecated in favor of properties starting with `management.xyz`. So yes using any recent version of SpringBoot you should rely on `management.endpoints` properties and remove root `endpoints` configurations.","body":"As mentioned in the link @senseiwu posted. Old properties starting with <code>endpoints.xyz</code> are deprecated in favor of properties starting with <code>management.xyz</code>. So yes using any recent version of SpringBoot you should rely on <code>management.endpoints</code> properties and remove root <code>endpoints</code> configurations."}],"answers":[{"comments":[{"owner":{"account_id":9337303,"reputation":9995,"user_id":6931119,"accept_rate":89,"display_name":"Witold Kaczurba"},"score":0,"creation_date":1519214157,"post_id":48901161,"comment_id":84816117,"body_markdown":"I tested the solution for RC1 and it works perfectly. Upvoting. Many thanks.","body":"I tested the solution for RC1 and it works perfectly. Upvoting. Many thanks."},{"owner":{"account_id":143382,"reputation":2912,"user_id":351688,"accept_rate":91,"display_name":"A.W."},"score":25,"creation_date":1530177993,"post_id":48901161,"comment_id":89147127,"body_markdown":"In `application.yml` I had to enter it as `include: &quot;*&quot;`","body":"In <code>application.yml</code> I had to enter it as <code>include: &quot;*&quot;</code>"},{"owner":{"account_id":428239,"reputation":2242,"user_id":810435,"accept_rate":82,"display_name":"naeemgik"},"score":0,"creation_date":1663216830,"post_id":48901161,"comment_id":130188065,"body_markdown":"For me single quotes worked like  include: &#39;*&#39;","body":"For me single quotes worked like  include: &#39;*&#39;"}],"tags":[],"owner":{"account_id":11818,"reputation":57413,"user_id":22982,"accept_rate":100,"display_name":"Brian Clozel"},"comment_count":3,"down_vote_count":0,"up_vote_count":145,"is_accepted":true,"score":145,"last_activity_date":1691700490,"creation_date":1519201651,"answer_id":48901161,"question_id":48900892,"body_markdown":"With Spring Boot 2.0.0.RC**1**, actuator endpoints must be 1) enabled and 2) exposed.\r\n\r\nBy default, all endpoints but `shutdown` are enabled and only `health` and `info` are exposed.\r\n\r\nIn your case, the following should work:\r\n\r\n    management.endpoints.web.expose=*\r\n    # if you&#39;d like to expose shutdown:\r\n    # management.endpoint.shutdown.enabled=true\r\n\r\nNote that this changes (again!) as of Spring Boot 2.0.0.RC**2**:\r\n\r\n    management.endpoints.web.exposure.include=*\r\n    # if you&#39;d like to expose shutdown:\r\n    # management.endpoint.shutdown.enabled=true\r\n\r\nIn doubt, [the dedicated migration guide][1] is always up-to-date with the latest changes.\r\n\r\n**Edit**\r\n\r\nFor easy copy and paste, here&#39;s the `yaml&#180; versions - as of Spring Boot 2.0.0.RC**2**:\r\n\r\n    management:\r\n      endpoints:\r\n        web:\r\n          exposure:\r\n            include: &quot;*&quot;\r\n\r\nSpring Boot 2.0.0.RC**1**: \r\n\r\n    management:\r\n      endpoints:\r\n        web:\r\n          expose: &quot;*&quot;\r\n\r\n  [1]: https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.0-Migration-Guide#endpoints","title":"How to enable all endpoints in actuator (Spring Boot 2.0.0 RC1)","body":"<p>With Spring Boot 2.0.0.RC<strong>1</strong>, actuator endpoints must be 1) enabled and 2) exposed.</p>\n<p>By default, all endpoints but <code>shutdown</code> are enabled and only <code>health</code> and <code>info</code> are exposed.</p>\n<p>In your case, the following should work:</p>\n<pre><code>management.endpoints.web.expose=*\n# if you'd like to expose shutdown:\n# management.endpoint.shutdown.enabled=true\n</code></pre>\n<p>Note that this changes (again!) as of Spring Boot 2.0.0.RC<strong>2</strong>:</p>\n<pre><code>management.endpoints.web.exposure.include=*\n# if you'd like to expose shutdown:\n# management.endpoint.shutdown.enabled=true\n</code></pre>\n<p>In doubt, <a href=\"https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.0-Migration-Guide#endpoints\" rel=\"noreferrer\">the dedicated migration guide</a> is always up-to-date with the latest changes.</p>\n<p><strong>Edit</strong></p>\n<p>For easy copy and paste, here's the `yaml´ versions - as of Spring Boot 2.0.0.RC<strong>2</strong>:</p>\n<pre><code>management:\n  endpoints:\n    web:\n      exposure:\n        include: &quot;*&quot;\n</code></pre>\n<p>Spring Boot 2.0.0.RC<strong>1</strong>:</p>\n<pre><code>management:\n  endpoints:\n    web:\n      expose: &quot;*&quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":129495,"reputation":7313,"user_id":328121,"accept_rate":62,"display_name":"Przemek Nowak"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1519227238,"creation_date":1519227238,"answer_id":48909732,"question_id":48900892,"body_markdown":"I will add that for Spring Boot 2 the actuator security has been changed (for 1.X the security for actuator has separate configuration what often cause problems when it mixes with user configuration). For Spring Boot 2.X the actuator won&#39;t have separate security config. According to Spring documentation:\r\n\r\n&gt; For security purposes, all actuators other than /health and /info are disabled by default. The management.endpoints.web.expose flag can be used to enable the actuators. If Spring Security is on the classpath and no other WebSecurityConfigurerAdapter is present, the actuators are secured by Spring Boot auto-config. If you define a custom WebSecurityConfigurerAdapter, Spring Boot auto-config will back off and you will be in full control of actuator access rules.)","title":"How to enable all endpoints in actuator (Spring Boot 2.0.0 RC1)","body":"<p>I will add that for Spring Boot 2 the actuator security has been changed (for 1.X the security for actuator has separate configuration what often cause problems when it mixes with user configuration). For Spring Boot 2.X the actuator won't have separate security config. According to Spring documentation:</p>\n\n<blockquote>\n  <p>For security purposes, all actuators other than /health and /info are disabled by default. The management.endpoints.web.expose flag can be used to enable the actuators. If Spring Security is on the classpath and no other WebSecurityConfigurerAdapter is present, the actuators are secured by Spring Boot auto-config. If you define a custom WebSecurityConfigurerAdapter, Spring Boot auto-config will back off and you will be in full control of actuator access rules.)</p>\n</blockquote>\n"}],"owner":{"account_id":9337303,"reputation":9995,"user_id":6931119,"accept_rate":89,"display_name":"Witold Kaczurba"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":80239,"favorite_count":0,"down_vote_count":0,"up_vote_count":63,"accepted_answer_id":48901161,"answer_count":2,"score":63,"last_activity_date":1691700490,"creation_date":1519200627,"question_id":48900892,"body_markdown":"I moved to Spring Boot 2.0.0 RC1 from 1.5.10 and I am stuck with actuator in the latest version. How can I enable expose and enable all actuator endpoints?\r\n\r\nThe only endpoints that get exposed are: \r\n\r\n    {\r\n      &quot;_links&quot;: {\r\n        &quot;self&quot;: {\r\n          &quot;href&quot;: &quot;http://127.0.0.1:8080/actuator&quot;,\r\n          &quot;templated&quot;: false\r\n        },\r\n        &quot;health&quot;: {\r\n          &quot;href&quot;: &quot;http://127.0.0.1:8080/actuator/health&quot;,\r\n          &quot;templated&quot;: false\r\n        },\r\n        &quot;info&quot;: {\r\n          &quot;href&quot;: &quot;http://127.0.0.1:8080/actuator/info&quot;,\r\n          &quot;templated&quot;: false\r\n        }\r\n      }\r\n    }\r\n\r\nThis is my `application.properties` files. Any ideas?\r\n\r\n    #The three first ones seem to be obsolete\r\n    endpoints.configprops.enabled=true\r\n    endpoints.beans.enabled=true\r\n    endpoints.shutdown.enabled=true\r\n    \r\n    management.endpoints.enabled-by-default=true\r\n    management.endpoints.sensitive=false\r\n    management.endpoints.enabled=true\r\n    \r\n    management.endpoint.configprops.enabled=true\r\n    management.endpoint.beans.enabled=true\r\n    management.endpoint.shutdown.enabled=true\r\n    \r\n    management.endpoints.web.exposure.include=*","title":"How to enable all endpoints in actuator (Spring Boot 2.0.0 RC1)","body":"<p>I moved to Spring Boot 2.0.0 RC1 from 1.5.10 and I am stuck with actuator in the latest version. How can I enable expose and enable all actuator endpoints?</p>\n\n<p>The only endpoints that get exposed are: </p>\n\n<pre><code>{\n  \"_links\": {\n    \"self\": {\n      \"href\": \"http://127.0.0.1:8080/actuator\",\n      \"templated\": false\n    },\n    \"health\": {\n      \"href\": \"http://127.0.0.1:8080/actuator/health\",\n      \"templated\": false\n    },\n    \"info\": {\n      \"href\": \"http://127.0.0.1:8080/actuator/info\",\n      \"templated\": false\n    }\n  }\n}\n</code></pre>\n\n<p>This is my <code>application.properties</code> files. Any ideas?</p>\n\n<pre><code>#The three first ones seem to be obsolete\nendpoints.configprops.enabled=true\nendpoints.beans.enabled=true\nendpoints.shutdown.enabled=true\n\nmanagement.endpoints.enabled-by-default=true\nmanagement.endpoints.sensitive=false\nmanagement.endpoints.enabled=true\n\nmanagement.endpoint.configprops.enabled=true\nmanagement.endpoint.beans.enabled=true\nmanagement.endpoint.shutdown.enabled=true\n\nmanagement.endpoints.web.exposure.include=*\n</code></pre>\n"},{"tags":["java","spring","mongodb","spring-data-jpa","mongock"],"answers":[{"tags":[],"owner":{"account_id":17889056,"reputation":1273,"user_id":12995983,"display_name":"Mongock team"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691700263,"creation_date":1691700263,"answer_id":76879201,"question_id":76868171,"body_markdown":"There are a couple of aspects to discuss.\r\n\r\n - **Is it good idea to modify existing migration files?** Mongock, as any other migration tool of the kind, it&#39;s designed to take a database from state S(0) to state S(n) by applying a sequence of what we call changeUnits(migration changes) that will make the database go through all the states S(0),S(1),..,S(n-1),S(n). This is specially useful when deploying the application from scratch in new environments. Taking this into account, this renaming process should be another state S(n+1) more. So the answer is NO, we suggest not to amend the existing changeUnits(for this reason)\r\n \r\n - **I will definitely need to modify it because Foo__ classes no longer exist in code** This is the reason why we suggest not to use\r\n   repositories and domain classes in changeUnits and the MongoTemplate(or driver classes) directly instead. At this point, you have three options:\r\n \r\n     - *Changing the migration files in the project*: Not recommended because these files(changeUnits) should remain unchanged as much as possible.\r\n\r\n     - *Keeping the deprecated classes in the project*: Not recommended because force you to keep deprecated code in your project\r\n\r\n     - **Moving these deprecated classes to a separated library and bring it to your project via maven/gradle**. This is not 100% ideal neither, but   the one we recommend because, among the three options, it provides the best balance(the changeUnits remain unchanged and your project can evolve without maintaining deprecated classes)\r\n\r\n\r\nIn conclusion, we suggest.\r\n\r\n 1. No change the existing changeUnits\r\n 2. Perform the renaming in a changeUnit as part of the migration steps\r\n 3. Move the deprecated classes to an independent library and bring it as a maven/gradle dependency","title":"What to do when name of class and collection used in Mongock migration file has changed?","body":"<p>There are a couple of aspects to discuss.</p>\n<ul>\n<li><p><strong>Is it good idea to modify existing migration files?</strong> Mongock, as any other migration tool of the kind, it's designed to take a database from state S(0) to state S(n) by applying a sequence of what we call changeUnits(migration changes) that will make the database go through all the states S(0),S(1),..,S(n-1),S(n). This is specially useful when deploying the application from scratch in new environments. Taking this into account, this renaming process should be another state S(n+1) more. So the answer is NO, we suggest not to amend the existing changeUnits(for this reason)</p>\n</li>\n<li><p><strong>I will definitely need to modify it because Foo__ classes no longer exist in code</strong> This is the reason why we suggest not to use\nrepositories and domain classes in changeUnits and the MongoTemplate(or driver classes) directly instead. At this point, you have three options:</p>\n<ul>\n<li><p><em>Changing the migration files in the project</em>: Not recommended because these files(changeUnits) should remain unchanged as much as possible.</p>\n</li>\n<li><p><em>Keeping the deprecated classes in the project</em>: Not recommended because force you to keep deprecated code in your project</p>\n</li>\n<li><p><strong>Moving these deprecated classes to a separated library and bring it to your project via maven/gradle</strong>. This is not 100% ideal neither, but   the one we recommend because, among the three options, it provides the best balance(the changeUnits remain unchanged and your project can evolve without maintaining deprecated classes)</p>\n</li>\n</ul>\n</li>\n</ul>\n<p>In conclusion, we suggest.</p>\n<ol>\n<li>No change the existing changeUnits</li>\n<li>Perform the renaming in a changeUnit as part of the migration steps</li>\n<li>Move the deprecated classes to an independent library and bring it as a maven/gradle dependency</li>\n</ol>\n"}],"owner":{"account_id":14222519,"reputation":87,"user_id":10274322,"display_name":"Whistleroosh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76879201,"answer_count":1,"score":0,"last_activity_date":1691700263,"creation_date":1691587026,"question_id":76868171,"body_markdown":"I have an app in Spring Boot and use Mogock with MongoDB. Recently, I made a big refactoring and changed many class names and collection names. What I used to have before refactoring is an entity FooDb:\r\n\r\n\r\n    @Document(&quot;foo&quot;)\r\n    public class FooDb {\r\n      @Id\r\n      private String id;\r\n      ...\r\n    }\r\n\r\nand some interface:\r\n\r\n    @Repository\r\n    public interface FooRepository extends MongoRepository&lt;FooDb, String&gt; { ... }\r\n\r\nand migration file:\r\n\r\n\r\n\r\n    @ChangeUnit(order=&quot;001, ...)\r\n    public class CreateFooChangelog {\r\n      ...\r\n      @Execution\r\n      public void migration(FooRepository repository) {\r\n         repository.save(...);\r\n      }\r\n    }\r\n\r\nDuring refactoring I only changed names of collections and classes. Their structure is the same:\r\n\r\n    @Document(&quot;bar&quot;)\r\n    public class BarDb {\r\n      @Id\r\n      private String id;\r\n      ...\r\n    }\r\n    \r\n    @Repository\r\n    public interface BarRepository extends MongoRepository&lt;BarDb, String&gt; { ... }\r\n\r\nHowever, now I am not sure what to do with existing migration file. Is it good idea to modify existing migration files? I will definitely need to modify it because Foo* classes no longer exist in code.\r\n\r\nI can think of solution like this: if there exists a foo collection it needs to be renamed to bar and if not, I need to initialize bar with some default data. Then I could try to modify this migration file like this:\r\n\r\n    @ChangeUnit(order=&quot;001&quot;, ...)\r\n    public class CreateBarChangelog {\r\n      ...\r\n      @Execution\r\n      public void migration(BarRepository repository) {\r\n         // if foo exists, rename it to bar\r\n         // else: repository.save(...);\r\n      }\r\n    }\r\n\r\nIs this the right approach in this scenario or is there a better solution?","title":"What to do when name of class and collection used in Mongock migration file has changed?","body":"<p>I have an app in Spring Boot and use Mogock with MongoDB. Recently, I made a big refactoring and changed many class names and collection names. What I used to have before refactoring is an entity FooDb:</p>\n<pre><code>@Document(&quot;foo&quot;)\npublic class FooDb {\n  @Id\n  private String id;\n  ...\n}\n</code></pre>\n<p>and some interface:</p>\n<pre><code>@Repository\npublic interface FooRepository extends MongoRepository&lt;FooDb, String&gt; { ... }\n</code></pre>\n<p>and migration file:</p>\n<pre><code>@ChangeUnit(order=&quot;001, ...)\npublic class CreateFooChangelog {\n  ...\n  @Execution\n  public void migration(FooRepository repository) {\n     repository.save(...);\n  }\n}\n</code></pre>\n<p>During refactoring I only changed names of collections and classes. Their structure is the same:</p>\n<pre><code>@Document(&quot;bar&quot;)\npublic class BarDb {\n  @Id\n  private String id;\n  ...\n}\n\n@Repository\npublic interface BarRepository extends MongoRepository&lt;BarDb, String&gt; { ... }\n</code></pre>\n<p>However, now I am not sure what to do with existing migration file. Is it good idea to modify existing migration files? I will definitely need to modify it because Foo* classes no longer exist in code.</p>\n<p>I can think of solution like this: if there exists a foo collection it needs to be renamed to bar and if not, I need to initialize bar with some default data. Then I could try to modify this migration file like this:</p>\n<pre><code>@ChangeUnit(order=&quot;001&quot;, ...)\npublic class CreateBarChangelog {\n  ...\n  @Execution\n  public void migration(BarRepository repository) {\n     // if foo exists, rename it to bar\n     // else: repository.save(...);\n  }\n}\n</code></pre>\n<p>Is this the right approach in this scenario or is there a better solution?</p>\n"},{"tags":["java","data-structures","linked-list","modulo"],"comments":[{"owner":{"account_id":19452218,"reputation":204,"user_id":14228343,"display_name":"Aditya Arora"},"score":0,"creation_date":1643710391,"post_id":70938689,"comment_id":125406318,"body_markdown":"10000000000 is greater than 2^31 -1 (max value for an int). Just change datatype of `l` from `int` to `long`","body":"10000000000 is greater than 2^31 -1 (max value for an int). Just change datatype of <code>l</code> from <code>int</code> to <code>long</code>"},{"owner":{"account_id":7226774,"reputation":19717,"user_id":5515060,"accept_rate":100,"display_name":"Lino"},"score":0,"creation_date":1643711404,"post_id":70938689,"comment_id":125406702,"body_markdown":"`(int) 10000000000` causes an overflow, leaving you with `1410065408` where its clear that you get `8` as a result when using `% 10`","body":"<code>(int) 10000000000</code> causes an overflow, leaving you with <code>1410065408</code> where its clear that you get <code>8</code> as a result when using <code>% 10</code>"}],"answers":[{"comments":[{"owner":{"account_id":4680926,"reputation":2259,"user_id":3789665,"accept_rate":57,"display_name":"greybeard"},"score":0,"creation_date":1691741579,"post_id":70939003,"comment_id":135535462,"body_markdown":"I don&#39;t see the wisdom of a `long` variable to hold a value from (-9 to) 0 to 9.","body":"I don&#39;t see the wisdom of a <code>long</code> variable to hold a value from (-9 to) 0 to 9."}],"tags":[],"owner":{"account_id":15031620,"reputation":56,"user_id":10849566,"display_name":"GoodmeetsEvil"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1643711400,"creation_date":1643711400,"answer_id":70939003,"question_id":70938689,"body_markdown":"    int l = (int)sum%10;\r\n\r\nThe problem is here. You are first casting a ***long*** variable to ***int*** and then calculate the remainder. You might want to check out [Storage sizes for primitive datatypes][1]. There it says the following:\r\n\r\n&gt; Also known as an integer, int type holds a wide range of non-fractional number values.\r\n&gt; \r\n&gt; Specifically, Java stores it using 32 bits of memory. In other words,\r\n&gt; it can represent values from -2,147,483,648 (-231) to 2,147,483,647\r\n&gt; (231-1).\r\n\r\nIn other words, because you are converting a number larger than supported to ***int*** you are getting a loss of data. To fix there problem either cast after finding the remainder:\r\n\r\n    int l = (int)(sum % 10)\r\n\r\nOr, better yet, just make your variable ***long***.\r\n\r\n    long l = sum % 10\r\n\r\n  [1]: https://www.baeldung.com/java-primitives#:~:text=Also%20known%20as%20an%20integer,(231%2D1).","title":"10000000000%10 returning 8 in Java","body":"<pre><code>int l = (int)sum%10;\n</code></pre>\n<p>The problem is here. You are first casting a <em><strong>long</strong></em> variable to <em><strong>int</strong></em> and then calculate the remainder. You might want to check out <a href=\"https://www.baeldung.com/java-primitives#:%7E:text=Also%20known%20as%20an%20integer,(231%2D1).\" rel=\"nofollow noreferrer\">Storage sizes for primitive datatypes</a>. There it says the following:</p>\n<blockquote>\n<p>Also known as an integer, int type holds a wide range of non-fractional number values.</p>\n<p>Specifically, Java stores it using 32 bits of memory. In other words,\nit can represent values from -2,147,483,648 (-231) to 2,147,483,647\n(231-1).</p>\n</blockquote>\n<p>In other words, because you are converting a number larger than supported to <em><strong>int</strong></em> you are getting a loss of data. To fix there problem either cast after finding the remainder:</p>\n<pre><code>int l = (int)(sum % 10)\n</code></pre>\n<p>Or, better yet, just make your variable <em><strong>long</strong></em>.</p>\n<pre><code>long l = sum % 10\n</code></pre>\n"}],"owner":{"display_name":"user14661106"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":296,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":70939003,"answer_count":1,"score":-2,"last_activity_date":1691699922,"creation_date":1643710015,"question_id":70938689,"body_markdown":"**Q ) To reverse two linked lists, add them and return a reversed linked list of the sum**`\r\nhttps://leetcode.com/problems/add-two-numbers/\r\n```java\r\nclass Solution \r\n{\r\n    public long reverse(long num)\r\n    {\r\n        long ans = 0;\r\n        while(num &gt; 0)\r\n        {\r\n            ans = ans*10 + (num%10);\r\n            num /= 10;\r\n        }\r\n        return ans;\r\n    }\r\n    \r\n    public ListNode addTwoNumbers(ListNode l1, ListNode l2) \r\n    {\r\n        \r\n        long num1 = 0;\r\n        long num2 = 0;\r\n        while(l1 != null)\r\n        {\r\n            num1 = num1*10 + l1.val;\r\n            l1 = l1.next;\r\n        }\r\n        while(l2 != null)\r\n        {\r\n            num2 = num2*10 + l2.val;\r\n            l2 = l2.next;\r\n        }\r\n        num1 = reverse(num1);\r\n        num2 = reverse(num2);     \r\n        System.out.println(&quot;num1 = &quot; + num1);\r\n        System.out.println(&quot;num2 = &quot; + num2);\r\n        long sum = num1+num2;\r\n        System.out.println(&quot;sum = &quot; + sum);\r\n        int l = (int)sum%10;\r\n        sum /= 10;\r\n        System.out.println(&quot;l = &quot; + l);\r\n        System.out.println(&quot;sum = &quot; + sum);\r\n        ListNode head = new ListNode(l);\r\n        ListNode l3 = head;\r\n        while(sum &gt; 0)\r\n        {\r\n            l = (int)sum%10;\r\n            System.out.println(&quot;l = &quot; + l);\r\n            System.out.println(&quot;sum = &quot; + sum);\r\n            sum/=10;\r\n            ListNode temp = new ListNode(l);\r\n            l3.next = temp;\r\n            l3 = l3.next;\r\n        }\r\n        return head;\r\n    }\r\n}\r\n```\r\n\r\n**For the input:** \r\n\r\n[9]\r\n[1,9,9,9,9,9,9,9,9,9]\r\n\r\n\r\n**Output:**\r\n\r\nnum1 = 9\r\nnum2 = 9999999991\r\n\r\nsum = 10000000000\r\nl = 8 **(why is 10000000000%10=8 here?)**\r\n\r\nsum = 1000000000\r\nl = 0\r\n\r\nsum = 1000000000\r\nl = 0\r\n\r\nsum = 100000000\r\nl = 0\r\n\r\nsum = 10000000\r\nl = 0\r\n\r\nsum = 1000000\r\nl = 0\r\n\r\nsum = 100000\r\nl = 0\r\n\r\nsum = 10000\r\nl = 0\r\n\r\nsum = 1000\r\nl = 0\r\n\r\nsum = 100\r\n l = 0\r\n\r\nsum = 10\r\nl = 1\r\n\r\nsum = 1\r\n\r\nPlease help","title":"10000000000%10 returning 8 in Java","body":"<p><strong>Q ) To reverse two linked lists, add them and return a reversed linked list of the sum</strong>`\n<a href=\"https://leetcode.com/problems/add-two-numbers/\" rel=\"nofollow noreferrer\">https://leetcode.com/problems/add-two-numbers/</a></p>\n<pre class=\"lang-java prettyprint-override\"><code>class Solution \n{\n    public long reverse(long num)\n    {\n        long ans = 0;\n        while(num &gt; 0)\n        {\n            ans = ans*10 + (num%10);\n            num /= 10;\n        }\n        return ans;\n    }\n    \n    public ListNode addTwoNumbers(ListNode l1, ListNode l2) \n    {\n        \n        long num1 = 0;\n        long num2 = 0;\n        while(l1 != null)\n        {\n            num1 = num1*10 + l1.val;\n            l1 = l1.next;\n        }\n        while(l2 != null)\n        {\n            num2 = num2*10 + l2.val;\n            l2 = l2.next;\n        }\n        num1 = reverse(num1);\n        num2 = reverse(num2);     \n        System.out.println(&quot;num1 = &quot; + num1);\n        System.out.println(&quot;num2 = &quot; + num2);\n        long sum = num1+num2;\n        System.out.println(&quot;sum = &quot; + sum);\n        int l = (int)sum%10;\n        sum /= 10;\n        System.out.println(&quot;l = &quot; + l);\n        System.out.println(&quot;sum = &quot; + sum);\n        ListNode head = new ListNode(l);\n        ListNode l3 = head;\n        while(sum &gt; 0)\n        {\n            l = (int)sum%10;\n            System.out.println(&quot;l = &quot; + l);\n            System.out.println(&quot;sum = &quot; + sum);\n            sum/=10;\n            ListNode temp = new ListNode(l);\n            l3.next = temp;\n            l3 = l3.next;\n        }\n        return head;\n    }\n}\n</code></pre>\n<p><strong>For the input:</strong></p>\n<p>[9]\n[1,9,9,9,9,9,9,9,9,9]</p>\n<p><strong>Output:</strong></p>\n<p>num1 = 9\nnum2 = 9999999991</p>\n<p>sum = 10000000000\nl = 8 <strong>(why is 10000000000%10=8 here?)</strong></p>\n<p>sum = 1000000000\nl = 0</p>\n<p>sum = 1000000000\nl = 0</p>\n<p>sum = 100000000\nl = 0</p>\n<p>sum = 10000000\nl = 0</p>\n<p>sum = 1000000\nl = 0</p>\n<p>sum = 100000\nl = 0</p>\n<p>sum = 10000\nl = 0</p>\n<p>sum = 1000\nl = 0</p>\n<p>sum = 100\nl = 0</p>\n<p>sum = 10\nl = 1</p>\n<p>sum = 1</p>\n<p>Please help</p>\n"},{"tags":["java","spring","spring-boot","web-services","tomcat"],"answers":[{"tags":[],"owner":{"account_id":4954355,"reputation":276,"user_id":3987412,"display_name":"Abhinav Ganguly"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691696943,"creation_date":1691696943,"answer_id":76878893,"question_id":76878381,"body_markdown":"The [ServerResponse][1] is from Spring Reactive framework, used in Spring webflux.\r\n\r\nSo for simple healthcheck/heartbeat implementation, your second method `getHello()` construct will do just fine, if you are building spring web project and deploying in a tomcat server. Because your second method&#39;s response status will be  **200 OK** as well.\r\n\r\n**Side-note:** I&#39;ve seen you&#39;ve tagged your question as a `spring-boot`. So, if you are building a spring-boot app, then i&#39;ll suggest to use it&#39;s [spring-boot-actuator][2] which adds many production grade capabilities, out of which, two which i&#39;ve used in our enterprise apps are **health check** and **shutdown**\r\n```\r\n http://localhost:8080/actuator/health\r\n{&quot;status&quot;:&quot;UP&quot;}\r\n\r\nhttp://localhost:8080/actuator/shutdown\r\n{ &quot;message&quot; : &quot;Shutting down, bye...&quot;}\r\n```\r\nSo, `\\actuatot\\health` endpoint is also good fit for heartbeat implementation\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/reactive/function/server/ServerResponse.html\r\n  [2]: https://docs.spring.io/spring-boot/docs/current/actuator-api/htmlsingle/","title":"Correct way to implement a &#39;heartbeat&#39; service in SpringFramework","body":"<p>The <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/reactive/function/server/ServerResponse.html\" rel=\"nofollow noreferrer\">ServerResponse</a> is from Spring Reactive framework, used in Spring webflux.</p>\n<p>So for simple healthcheck/heartbeat implementation, your second method <code>getHello()</code> construct will do just fine, if you are building spring web project and deploying in a tomcat server. Because your second method's response status will be  <strong>200 OK</strong> as well.</p>\n<p><strong>Side-note:</strong> I've seen you've tagged your question as a <code>spring-boot</code>. So, if you are building a spring-boot app, then i'll suggest to use it's <a href=\"https://docs.spring.io/spring-boot/docs/current/actuator-api/htmlsingle/\" rel=\"nofollow noreferrer\">spring-boot-actuator</a> which adds many production grade capabilities, out of which, two which i've used in our enterprise apps are <strong>health check</strong> and <strong>shutdown</strong></p>\n<pre><code> http://localhost:8080/actuator/health\n{&quot;status&quot;:&quot;UP&quot;}\n\nhttp://localhost:8080/actuator/shutdown\n{ &quot;message&quot; : &quot;Shutting down, bye...&quot;}\n</code></pre>\n<p>So, <code>\\actuatot\\health</code> endpoint is also good fit for heartbeat implementation</p>\n"},{"comments":[{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1691698738,"post_id":76879050,"comment_id":135530655,"body_markdown":"Note that `@ResponseStatus` can be used for setting the status as well - this way, it is possible to use a `void` method as well.","body":"Note that <code>@ResponseStatus</code> can be used for setting the status as well - this way, it is possible to use a <code>void</code> method as well."},{"owner":{"account_id":477214,"reputation":5260,"user_id":888580,"display_name":"lane.maxwell"},"score":0,"creation_date":1691699127,"post_id":76879050,"comment_id":135530702,"body_markdown":"@dan1st, most definitely.  I assume that the OP probably doesn&#39;t want to always return `ok,` so by making it return the ResponseEntity, they can modify the method and return a different status if it&#39;s down.","body":"@dan1st, most definitely.  I assume that the OP probably doesn&#39;t want to always return <code>ok,</code> so by making it return the ResponseEntity, they can modify the method and return a different status if it&#39;s down."}],"tags":[],"owner":{"account_id":477214,"reputation":5260,"user_id":888580,"display_name":"lane.maxwell"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1691699775,"creation_date":1691698592,"answer_id":76879050,"question_id":76878381,"body_markdown":"To add to Abhinav&#39;s answer, as he stated don&#39;t use ServerResponse here; it&#39;s not the appropriate response type.\r\n\r\nIf you just want to return a 200 if everything is ok, you can do something like this:\r\n\r\n\timport lombok.extern.slf4j.Slf4j;\r\n\timport org.springframework.http.ResponseEntity;\r\n\timport org.springframework.stereotype.Controller;\r\n\timport org.springframework.web.bind.annotation.CrossOrigin;\r\n\timport org.springframework.web.bind.annotation.GetMapping;\r\n\timport org.springframework.web.bind.annotation.RequestMapping;\r\n\timport org.springframework.web.servlet.function.ServerResponse;\r\n\timport static org.springframework.http.HttpStatus.SERVICE_UNAVAILABLE;\r\n\r\n    ...\r\n\r\n    @CrossOrigin(origins = &quot;*&quot;)\r\n    @GetMapping(path = &quot;/heartbeat&quot;)\r\n    public ResponseEntity&lt;?&gt; getHeartbeat()\r\n    {\r\n        logger.info(&quot;checking heartbeat&quot;);\r\n        if (isEverythingKosher()) {\r\n          return ResponseEntity.ok().build();\r\n        } else {\r\n          return ResponseEntity.status(SERVICE_UNAVAILABLE).build();\r\n        }\r\n    }\r\n\r\nBut, as stated in the previous answer, I would leverage Actuator as it&#39;s already got built-in support for most checks that you&#39;ll want to use.  You can even extend it with your own health checks if you want to by defining a class that extends AbstractHealthIndicator\r\n\r\n    @Component\r\n    public class MyHealthCheck extends AbstractHealthIndicator {\r\n      @Override\r\n      protected void doHealthCheck(Health.Builder builder) throws Exception {\r\n        // Do your checks here, set the builder up or down depending on the status\r\n        if (isEverythingKosher()) {\r\n          builder.up();\r\n        } else {\r\n          builder.down();\r\n        }\r\n      }\r\n    }\r\n\r\nThen when you call the actuator/health endpoint, it will contribute to the health status of your application.\r\n\r\nHere is what the output would look like using the actuator (I set the custom health indicator to indicate down).\r\n\r\n    {\r\n      &quot;status&quot;: &quot;DOWN&quot;,\r\n      &quot;components&quot;: {\r\n        &quot;diskSpace&quot;: {\r\n          &quot;status&quot;: &quot;UP&quot;,\r\n          &quot;details&quot;: {\r\n            &quot;total&quot;: 1000240963584,\r\n            &quot;free&quot;: 472888266752,\r\n            &quot;threshold&quot;: 10485760,\r\n            &quot;path&quot;: &quot;/Users/lane.maxwell/git/actuator-demo/.&quot;,\r\n            &quot;exists&quot;: true\r\n          }\r\n        },\r\n        &quot;mongo&quot;: {\r\n          &quot;status&quot;: &quot;UP&quot;,\r\n          &quot;details&quot;: {\r\n            &quot;maxWireVersion&quot;: 13\r\n          }\r\n        },\r\n        &quot;myHealthCheck&quot;: {\r\n          &quot;status&quot;: &quot;DOWN&quot;\r\n        },\r\n        &quot;ping&quot;: {\r\n          &quot;status&quot;: &quot;UP&quot;\r\n        }\r\n      }\r\n    }","title":"Correct way to implement a &#39;heartbeat&#39; service in SpringFramework","body":"<p>To add to Abhinav's answer, as he stated don't use ServerResponse here; it's not the appropriate response type.</p>\n<p>If you just want to return a 200 if everything is ok, you can do something like this:</p>\n<pre><code>import lombok.extern.slf4j.Slf4j;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.CrossOrigin;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.servlet.function.ServerResponse;\nimport static org.springframework.http.HttpStatus.SERVICE_UNAVAILABLE;\n\n...\n\n@CrossOrigin(origins = &quot;*&quot;)\n@GetMapping(path = &quot;/heartbeat&quot;)\npublic ResponseEntity&lt;?&gt; getHeartbeat()\n{\n    logger.info(&quot;checking heartbeat&quot;);\n    if (isEverythingKosher()) {\n      return ResponseEntity.ok().build();\n    } else {\n      return ResponseEntity.status(SERVICE_UNAVAILABLE).build();\n    }\n}\n</code></pre>\n<p>But, as stated in the previous answer, I would leverage Actuator as it's already got built-in support for most checks that you'll want to use.  You can even extend it with your own health checks if you want to by defining a class that extends AbstractHealthIndicator</p>\n<pre><code>@Component\npublic class MyHealthCheck extends AbstractHealthIndicator {\n  @Override\n  protected void doHealthCheck(Health.Builder builder) throws Exception {\n    // Do your checks here, set the builder up or down depending on the status\n    if (isEverythingKosher()) {\n      builder.up();\n    } else {\n      builder.down();\n    }\n  }\n}\n</code></pre>\n<p>Then when you call the actuator/health endpoint, it will contribute to the health status of your application.</p>\n<p>Here is what the output would look like using the actuator (I set the custom health indicator to indicate down).</p>\n<pre><code>{\n  &quot;status&quot;: &quot;DOWN&quot;,\n  &quot;components&quot;: {\n    &quot;diskSpace&quot;: {\n      &quot;status&quot;: &quot;UP&quot;,\n      &quot;details&quot;: {\n        &quot;total&quot;: 1000240963584,\n        &quot;free&quot;: 472888266752,\n        &quot;threshold&quot;: 10485760,\n        &quot;path&quot;: &quot;/Users/lane.maxwell/git/actuator-demo/.&quot;,\n        &quot;exists&quot;: true\n      }\n    },\n    &quot;mongo&quot;: {\n      &quot;status&quot;: &quot;UP&quot;,\n      &quot;details&quot;: {\n        &quot;maxWireVersion&quot;: 13\n      }\n    },\n    &quot;myHealthCheck&quot;: {\n      &quot;status&quot;: &quot;DOWN&quot;\n    },\n    &quot;ping&quot;: {\n      &quot;status&quot;: &quot;UP&quot;\n    }\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":2090213,"reputation":1431,"user_id":1860222,"accept_rate":52,"display_name":"pbuchheit"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":261,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76879050,"answer_count":2,"score":1,"last_activity_date":1691699775,"creation_date":1691691623,"question_id":76878381,"body_markdown":"I have a java web application running on tomcat. I wanted to create a &#39;heartbeat&#39; method that will simply return a 200 status code that I can use to verify the status of the service. I created a simple controller class that looks like this:\r\n\r\n    import org.slf4j.Logger;\r\n    import org.slf4j.LoggerFactory;\r\n    import org.springframework.stereotype.Controller;\r\n    import org.springframework.web.bind.annotation.CrossOrigin;\r\n    import org.springframework.web.bind.annotation.GetMapping;\r\n    import org.springframework.web.bind.annotation.RequestMapping;\r\n    import org.springframework.web.bind.annotation.ResponseBody;\r\n    import org.springframework.web.servlet.function.ServerResponse;\r\n    \r\n    @CrossOrigin(origins = &quot;*&quot;)\r\n    @Controller\r\n    @RequestMapping(path = &quot;/status&quot;)\r\n    public class StatusController {\r\n    \r\n        private static final Logger logger = LoggerFactory.getLogger(StatusController.class);\r\n        @CrossOrigin(origins = &quot;*&quot;)\r\n        @GetMapping(path = &quot;/heartbeat&quot;)\r\n        public ServerResponse getHeartbeat()\r\n        {\r\n            logger.info(&quot;checking heartbeat&quot;);\r\n            return ServerResponse.ok().build();\r\n        }\r\n    \r\n        @CrossOrigin(origins = &quot;*&quot;)\r\n        @GetMapping(path = &quot;/hello&quot;, produces = &quot;text/html&quot;)\r\n        @ResponseBody\r\n        public String getHello()\r\n        {\r\n            return &quot;Hello World&quot;;\r\n        }\r\n    }\r\n\r\nIf I deploy my application, I can call mysite.com/myapp/status/hello and get a return value of &#39;Hello World&#39;. However, if I try to call the heartbeat service ( mysite.com/myapp/status/heartbeat ) I get a 404 error.\r\n\r\n\r\nI&#39;m not quite sure what I&#39;m doing wrong here. What is the correct way to simply return a status code from a service call?","title":"Correct way to implement a &#39;heartbeat&#39; service in SpringFramework","body":"<p>I have a java web application running on tomcat. I wanted to create a 'heartbeat' method that will simply return a 200 status code that I can use to verify the status of the service. I created a simple controller class that looks like this:</p>\n<pre><code>import org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.CrossOrigin;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.ResponseBody;\nimport org.springframework.web.servlet.function.ServerResponse;\n\n@CrossOrigin(origins = &quot;*&quot;)\n@Controller\n@RequestMapping(path = &quot;/status&quot;)\npublic class StatusController {\n\n    private static final Logger logger = LoggerFactory.getLogger(StatusController.class);\n    @CrossOrigin(origins = &quot;*&quot;)\n    @GetMapping(path = &quot;/heartbeat&quot;)\n    public ServerResponse getHeartbeat()\n    {\n        logger.info(&quot;checking heartbeat&quot;);\n        return ServerResponse.ok().build();\n    }\n\n    @CrossOrigin(origins = &quot;*&quot;)\n    @GetMapping(path = &quot;/hello&quot;, produces = &quot;text/html&quot;)\n    @ResponseBody\n    public String getHello()\n    {\n        return &quot;Hello World&quot;;\n    }\n}\n</code></pre>\n<p>If I deploy my application, I can call mysite.com/myapp/status/hello and get a return value of 'Hello World'. However, if I try to call the heartbeat service ( mysite.com/myapp/status/heartbeat ) I get a 404 error.</p>\n<p>I'm not quite sure what I'm doing wrong here. What is the correct way to simply return a status code from a service call?</p>\n"},{"tags":["java","com.sun.net.httpserver"],"comments":[{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1691694397,"post_id":76878331,"comment_id":135529860,"body_markdown":"Are you trying to return two files for a single request?","body":"Are you trying to return two files for a single request?"},{"owner":{"account_id":15493486,"reputation":83,"user_id":16708103,"display_name":"Aliayub Ali"},"score":0,"creation_date":1691696966,"post_id":76878331,"comment_id":135530322,"body_markdown":"My goal is to serve index.html with its style that&#39;s all. that&#39;s why this post is posted on here.","body":"My goal is to serve index.html with its style that&#39;s all. that&#39;s why this post is posted on here."}],"answers":[{"tags":[],"owner":{"account_id":27460612,"reputation":63,"user_id":20951255,"display_name":"Krzysztof Grabowski"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691699437,"creation_date":1691699437,"answer_id":76879135,"question_id":76878331,"body_markdown":"When a browser loads an HTML file and encounters a link to an external CSS file, it will make a separate request to fetch the CSS file. Your current implementation is trying to serve both the HTML and CSS content for the /home route in a single response, which is incorrect.\r\n\r\nHere&#39;s a way to fix this:\r\n\r\nModify your index.html to reference the style.css as a relative path:\r\n&lt;br&gt; Basicly you should this inside **head** tag\r\n\r\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;/Views/style.css&quot;&gt;\r\n\r\n","title":"Is there a way where I can serve static files one /home route","body":"<p>When a browser loads an HTML file and encounters a link to an external CSS file, it will make a separate request to fetch the CSS file. Your current implementation is trying to serve both the HTML and CSS content for the /home route in a single response, which is incorrect.</p>\n<p>Here's a way to fix this:</p>\n<p>Modify your index.html to reference the style.css as a relative path:\n<br> Basicly you should this inside <strong>head</strong> tag</p>\n<pre><code>&lt;link rel=&quot;stylesheet&quot; href=&quot;/Views/style.css&quot;&gt;\n</code></pre>\n"}],"owner":{"account_id":15493486,"reputation":83,"user_id":16708103,"display_name":"Aliayub Ali"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1691699437,"creation_date":1691691140,"question_id":76878331,"body_markdown":"I have root folder called TodoList this folder contains another folder called TodoList/Views/index.html,style.css my goal is to serve the index.html and the style.css on the route of /home however the index.html has one element &lt;button&gt;Click&lt;/button&gt; and it has style which is to background-color blue orange for the button, but when I run the code on my localhost:8080 I am getting only the html file served not with its style. how can I make the html file keep its style rather than losing it midway thank you.\r\n\r\n\r\n ```import com.sun.net.httpserver.HttpServer;\r\n    import com.sun.net.httpserver.HttpHandler;\r\n    import com.sun.net.httpserver.HttpExchange;\r\n    \r\n    import java.io.IOException;\r\n    import java.io.OutputStream;\r\n    import java.net.InetSocketAddress;\r\n    import java.nio.file.Files;\r\n    import java.nio.file.Path;\r\n    import java.nio.file.Paths;\r\n    \r\n    public class App {\r\n        public static void main(String[] args) throws IOException {\r\n            int port = 8080;\r\n            HttpServer server = HttpServer.create(new InetSocketAddress(port), 0);\r\n    \r\n            server.createContext(&quot;/home&quot;, new RequestHandler());\r\n            server.start();\r\n    \r\n            System.out.println(&quot;Server started on port &quot; + port);\r\n        }\r\n    }\r\n    \r\n    class RequestHandler implements HttpHandler {\r\n        @Override\r\n        public void handle(HttpExchange exchange) throws IOException {\r\n            String requestPath = exchange.getRequestURI().getPath();\r\n            \r\n            if (requestPath.equals(&quot;/home&quot;)) {\r\n                serveFile(exchange, &quot;Views/index.html&quot;, &quot;text/html&quot;);\r\n                serveFile(exchange, &quot;Views/style.css&quot;, &quot;text/css&quot;);\r\n            } else {\r\n                // Handle other requests here\r\n                // For example, you could serve a 404 page\r\n                String response = &quot;404 - Not Found&quot;;\r\n                exchange.sendResponseHeaders(404, response.length());\r\n                try (OutputStream os = exchange.getResponseBody()) {\r\n                    os.write(response.getBytes());\r\n                }\r\n            }\r\n        }\r\n    \r\n        private void serveFile(HttpExchange exchange, String filePath, String contentType) throws IOException {\r\n            Path path = Paths.get(filePath);\r\n            byte[] fileBytes = Files.readAllBytes(path);\r\n    \r\n            exchange.getResponseHeaders().set(&quot;Content-Type&quot;, contentType);\r\n            exchange.sendResponseHeaders(200, fileBytes.length);\r\n    \r\n            try (OutputStream os = exchange.getResponseBody()) {\r\n                os.write(fileBytes);\r\n            }\r\n        }\r\n    }\r\n    ```\r\n\r\n","title":"Is there a way where I can serve static files one /home route","body":"<p>I have root folder called TodoList this folder contains another folder called TodoList/Views/index.html,style.css my goal is to serve the index.html and the style.css on the route of /home however the index.html has one element Click and it has style which is to background-color blue orange for the button, but when I run the code on my localhost:8080 I am getting only the html file served not with its style. how can I make the html file keep its style rather than losing it midway thank you.</p>\n<pre><code>   import com.sun.net.httpserver.HttpHandler;\n   import com.sun.net.httpserver.HttpExchange;\n   \n   import java.io.IOException;\n   import java.io.OutputStream;\n   import java.net.InetSocketAddress;\n   import java.nio.file.Files;\n   import java.nio.file.Path;\n   import java.nio.file.Paths;\n   \n   public class App {\n       public static void main(String[] args) throws IOException {\n           int port = 8080;\n           HttpServer server = HttpServer.create(new InetSocketAddress(port), 0);\n   \n           server.createContext(&quot;/home&quot;, new RequestHandler());\n           server.start();\n   \n           System.out.println(&quot;Server started on port &quot; + port);\n       }\n   }\n   \n   class RequestHandler implements HttpHandler {\n       @Override\n       public void handle(HttpExchange exchange) throws IOException {\n           String requestPath = exchange.getRequestURI().getPath();\n           \n           if (requestPath.equals(&quot;/home&quot;)) {\n               serveFile(exchange, &quot;Views/index.html&quot;, &quot;text/html&quot;);\n               serveFile(exchange, &quot;Views/style.css&quot;, &quot;text/css&quot;);\n           } else {\n               // Handle other requests here\n               // For example, you could serve a 404 page\n               String response = &quot;404 - Not Found&quot;;\n               exchange.sendResponseHeaders(404, response.length());\n               try (OutputStream os = exchange.getResponseBody()) {\n                   os.write(response.getBytes());\n               }\n           }\n       }\n   \n       private void serveFile(HttpExchange exchange, String filePath, String contentType) throws IOException {\n           Path path = Paths.get(filePath);\n           byte[] fileBytes = Files.readAllBytes(path);\n   \n           exchange.getResponseHeaders().set(&quot;Content-Type&quot;, contentType);\n           exchange.sendResponseHeaders(200, fileBytes.length);\n   \n           try (OutputStream os = exchange.getResponseBody()) {\n               os.write(fileBytes);\n           }\n       }\n   }\n   ```\n\n</code></pre>\n"},{"tags":["java","arrays","integer"],"comments":[{"owner":{"account_id":434266,"reputation":15464,"user_id":820127,"display_name":"rossum"},"score":1,"creation_date":1691696111,"post_id":76878795,"comment_id":135530162,"body_markdown":"Check for integer overflow.","body":"Check for integer overflow."},{"owner":{"account_id":5392262,"reputation":4671,"user_id":4294399,"display_name":"General Grievance"},"score":0,"creation_date":1691696334,"post_id":76878795,"comment_id":135530201,"body_markdown":"What error are you getting? What is this code&#39;s function? What inputs are you giving it? When I run `fourSum(new int[]{ 1000000000, 1000000000, 1000000000, 1000000000 }, -294967296)` it doesn&#39;t give me any error.","body":"What error are you getting? What is this code&#39;s function? What inputs are you giving it? When I run <code>fourSum(new int[]{ 1000000000, 1000000000, 1000000000, 1000000000 }, -294967296)</code> it doesn&#39;t give me any error."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1691703737,"post_id":76878795,"comment_id":135531379,"body_markdown":"For reference, this seems to be the LeetCode page for the problem: https://leetcode.com/problems/4sum/","body":"For reference, this seems to be the LeetCode page for the problem: <a href=\"https://leetcode.com/problems/4sum/\" rel=\"nofollow noreferrer\">leetcode.com/problems/4sum</a>"}],"answers":[{"tags":[],"owner":{"account_id":14327066,"reputation":141,"user_id":10348872,"display_name":"Shovel_Knight"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691697106,"creation_date":1691696603,"answer_id":76878871,"question_id":76878795,"body_markdown":"First of all...\r\n\r\n```\r\nif(target&gt;Integer.MAX_VALUE||target&lt;Integer.MIN_VALUE){\r\n    return new ArrayList();\r\n}\r\n```\r\n\r\nThis `if` statement will never trigger because an `int` *by definition* cannot be smaller than `Integer.MIN_VALUE` or larger than `Integer.MAX_VALUE`. In other words, `target &gt; Integer.MAX_VALUE || target &lt; Integer.MIN_VALUE` will always evaluate to `false`.\r\n\r\nThe maximum value an `int` variable can hold is 2^31 - 1, or 2,147,483,647. Your sum is exactly 4 billion which causes your integer variable to overflow. \r\n\r\nYou really should use `long` variables to operate on values of this magnitude.\r\n\r\n**P.S.** What does `integer overflow` mean? `byte`, `short`, `int` and `long` numbers in Java are stored using the [2&#39;s complement system](https://en.wikipedia.org/wiki/Two%27s_complement). The first bit of the value stores the sign. If it&#39;s equal to 0, the number is positive; if it&#39;s 1, the number is negative. Thus the largest positive value an `int` can hold is 01111111111111111111111111111111 in binary. This number happens to be 2,147,483,647 in decimal. If you add 1 to it, it becomes 10000000000000000000000000000000, which is -2,147,483,648 in decimal (it&#39;s negative because the first bit is now 1).","title":"Why does it output -294967296","body":"<p>First of all...</p>\n<pre><code>if(target&gt;Integer.MAX_VALUE||target&lt;Integer.MIN_VALUE){\n    return new ArrayList();\n}\n</code></pre>\n<p>This <code>if</code> statement will never trigger because an <code>int</code> <em>by definition</em> cannot be smaller than <code>Integer.MIN_VALUE</code> or larger than <code>Integer.MAX_VALUE</code>. In other words, <code>target &gt; Integer.MAX_VALUE || target &lt; Integer.MIN_VALUE</code> will always evaluate to <code>false</code>.</p>\n<p>The maximum value an <code>int</code> variable can hold is 2^31 - 1, or 2,147,483,647. Your sum is exactly 4 billion which causes your integer variable to overflow.</p>\n<p>You really should use <code>long</code> variables to operate on values of this magnitude.</p>\n<p><strong>P.S.</strong> What does <code>integer overflow</code> mean? <code>byte</code>, <code>short</code>, <code>int</code> and <code>long</code> numbers in Java are stored using the <a href=\"https://en.wikipedia.org/wiki/Two%27s_complement\" rel=\"nofollow noreferrer\">2's complement system</a>. The first bit of the value stores the sign. If it's equal to 0, the number is positive; if it's 1, the number is negative. Thus the largest positive value an <code>int</code> can hold is 01111111111111111111111111111111 in binary. This number happens to be 2,147,483,647 in decimal. If you add 1 to it, it becomes 10000000000000000000000000000000, which is -2,147,483,648 in decimal (it's negative because the first bit is now 1).</p>\n"},{"tags":[],"owner":{"account_id":29176687,"reputation":332,"user_id":22351796,"display_name":"Karsten"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691699269,"creation_date":1691697981,"answer_id":76878998,"question_id":76878795,"body_markdown":"This is a calculation overflow. Simply put 4 * 1000000000 exceeds Integer.MAX_VALUE. Though the processor won&#39;t limit your result but wraps it into its available bits.\r\n\r\nYou can try using hexadecimal representation: 4 * 0x3B9ACA00 = 0xEE6B2800\r\n\r\n```\r\nSystem.out.println(0xEE6B2800);\r\n```\r\n\r\nJust another tip: Your code has a high complexity already. You should declare variables where you need them. The declarations of lb and ub could go into the for-j-loop, sum is only used within the while-loop. The initial values are never used before set to other values.\r\n\r\nIn my career I found lots of such top-level variables which ware reused in following code for other purposes and no one could really predict which values they have.","title":"Why does it output -294967296","body":"<p>This is a calculation overflow. Simply put 4 * 1000000000 exceeds Integer.MAX_VALUE. Though the processor won't limit your result but wraps it into its available bits.</p>\n<p>You can try using hexadecimal representation: 4 * 0x3B9ACA00 = 0xEE6B2800</p>\n<pre><code>System.out.println(0xEE6B2800);\n</code></pre>\n<p>Just another tip: Your code has a high complexity already. You should declare variables where you need them. The declarations of lb and ub could go into the for-j-loop, sum is only used within the while-loop. The initial values are never used before set to other values.</p>\n<p>In my career I found lots of such top-level variables which ware reused in following code for other purposes and no one could really predict which values they have.</p>\n"}],"owner":{"account_id":23356022,"reputation":1,"user_id":17428983,"display_name":"skeleg"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":157,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1691700917,"accepted_answer_id":76878871,"answer_count":2,"score":-2,"last_activity_date":1691699269,"creation_date":1691695778,"question_id":76878795,"body_markdown":"So in leetcode 4 sum there is a test case [1000000000,1000000000,1000000000,1000000000] and for some reason the addition of these is equal to -294967296 and i do not understand how exactly this works i assumed it was because the actual answer is larger than max val of an int but i tried that and it just threw an error instead so why does that not happen here\r\n\r\n```\r\nclass Solution {\r\n    public List&lt;List&lt;Integer&gt;&gt; fourSum(int[] nums, int target) {\r\n        if(target&gt;Integer.MAX_VALUE||target&lt;Integer.MIN_VALUE){\r\n            return new ArrayList();\r\n        }\r\n        int lb =0;\r\n        int ub  = nums.length-1;\r\n        int sum = 0;\r\n        HashSet&lt;List&lt;Integer&gt;&gt; ans = new HashSet();\r\n        Arrays.sort(nums);\r\n        for(int i = 0;i&lt;nums.length;i++){\r\n\r\n            for(int j = i+1;j&lt;nums.length;j++){\r\n                lb = j+1;\r\n                ub = nums.length-1;\r\n                while(lb&lt;ub){\r\n\r\n                    sum = nums[i]+nums[j]+nums[lb]+nums[ub];\r\n                    if(sum==-294967296){\r\n                        System.out.println(sum);\r\n                        System.out.println(nums[i]);\r\n                        System.out.println(nums[j]);\r\n                        System.out.println(nums[lb]);\r\n                        System.out.println(nums[ub]);\r\n                    }\r\n                    if(sum==target){\r\n                        ans.add(Arrays.asList(nums[i],nums[j],nums[lb],nums[ub]));\r\n                        lb++;\r\n                        ub--;\r\n                    }else if(sum&lt;target){\r\n                        lb++;\r\n                    }else{\r\n                        ub--;\r\n                    }\r\n\r\n                }\r\n            }\r\n        }\r\n        List&lt;List&lt;Integer&gt;&gt; ret = new ArrayList(ans);\r\n        return ret;\r\n    }\r\n}\r\n\r\n```\r\nthis is the code i wrote and i dont think there is an issue here","title":"Why does it output -294967296","body":"<p>So in leetcode 4 sum there is a test case [1000000000,1000000000,1000000000,1000000000] and for some reason the addition of these is equal to -294967296 and i do not understand how exactly this works i assumed it was because the actual answer is larger than max val of an int but i tried that and it just threw an error instead so why does that not happen here</p>\n<pre><code>class Solution {\n    public List&lt;List&lt;Integer&gt;&gt; fourSum(int[] nums, int target) {\n        if(target&gt;Integer.MAX_VALUE||target&lt;Integer.MIN_VALUE){\n            return new ArrayList();\n        }\n        int lb =0;\n        int ub  = nums.length-1;\n        int sum = 0;\n        HashSet&lt;List&lt;Integer&gt;&gt; ans = new HashSet();\n        Arrays.sort(nums);\n        for(int i = 0;i&lt;nums.length;i++){\n\n            for(int j = i+1;j&lt;nums.length;j++){\n                lb = j+1;\n                ub = nums.length-1;\n                while(lb&lt;ub){\n\n                    sum = nums[i]+nums[j]+nums[lb]+nums[ub];\n                    if(sum==-294967296){\n                        System.out.println(sum);\n                        System.out.println(nums[i]);\n                        System.out.println(nums[j]);\n                        System.out.println(nums[lb]);\n                        System.out.println(nums[ub]);\n                    }\n                    if(sum==target){\n                        ans.add(Arrays.asList(nums[i],nums[j],nums[lb],nums[ub]));\n                        lb++;\n                        ub--;\n                    }else if(sum&lt;target){\n                        lb++;\n                    }else{\n                        ub--;\n                    }\n\n                }\n            }\n        }\n        List&lt;List&lt;Integer&gt;&gt; ret = new ArrayList(ans);\n        return ret;\n    }\n}\n\n</code></pre>\n<p>this is the code i wrote and i dont think there is an issue here</p>\n"},{"tags":["java","encryption","character-encoding","urlencode","encoder"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":5,"creation_date":1691666927,"post_id":76875240,"comment_id":135523792,"body_markdown":"Please let me know if you find an encryption algorithm that is both secure and *also* a great compression algorithm. Or, you know, keep it to yourself and become immensely rich.","body":"Please let me know if you find an encryption algorithm that is both secure and <i>also</i> a great compression algorithm. Or, you know, keep it to yourself and become immensely rich."},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1691667311,"post_id":76875240,"comment_id":135523868,"body_markdown":"Now, if you&#39;re looking for a *hash* instead of encryption, you can make those as short as you like. The shorter it is, the higher the chance of collisions. And of course unlike encryption, hashes are not reversible (you cannot obtain the original data).","body":"Now, if you&#39;re looking for a <i>hash</i> instead of encryption, you can make those as short as you like. The shorter it is, the higher the chance of collisions. And of course unlike encryption, hashes are not reversible (you cannot obtain the original data)."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1691670004,"post_id":76875240,"comment_id":135524439,"body_markdown":"I’m afraid that less than five characters isn’t possible","body":"I’m afraid that less than five characters isn’t possible"},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1691683953,"post_id":76875240,"comment_id":135527876,"body_markdown":"Are you trying to encrypt ot to compress? Those are two different things.","body":"Are you trying to encrypt ot to compress? Those are two different things."}],"answers":[{"tags":[],"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691699255,"creation_date":1691699255,"answer_id":76879115,"question_id":76875240,"body_markdown":"There are certainly ways to encode fields to a minimum amount of bits, especially if the values in the data are not randomized. Compression doesn&#39;t work that well for small data sizes as the overhead (to indicate the compression mechanism and such) will likely negate any result.\r\n\r\nThe best you can do using encryption is to break even, see Format Preserving Encryption (FPE) for that. The resulting ciphertext is fully randomized and cannot be compressed, so the compression must be performed beforehand.\r\n\r\nAfter FPE is performed on the binary data then you can perform *base conversion* to encode the value (seen as large integer) into an index, and finally in characters.\r\n\r\n---\r\n\r\nHowever, your data consists of large identifiers, so the chance that you can compress those to 5 characters or less is unlikely to the extreme, even if you&#39;d use all possible printable Unicode characters for the ciphertext.\r\n","title":"Get a shorter encoded characters of an encrypted link using Java","body":"<p>There are certainly ways to encode fields to a minimum amount of bits, especially if the values in the data are not randomized. Compression doesn't work that well for small data sizes as the overhead (to indicate the compression mechanism and such) will likely negate any result.</p>\n<p>The best you can do using encryption is to break even, see Format Preserving Encryption (FPE) for that. The resulting ciphertext is fully randomized and cannot be compressed, so the compression must be performed beforehand.</p>\n<p>After FPE is performed on the binary data then you can perform <em>base conversion</em> to encode the value (seen as large integer) into an index, and finally in characters.</p>\n<hr />\n<p>However, your data consists of large identifiers, so the chance that you can compress those to 5 characters or less is unlikely to the extreme, even if you'd use all possible printable Unicode characters for the ciphertext.</p>\n"}],"owner":{"account_id":26343930,"reputation":1,"user_id":20002621,"display_name":"Sham"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1691726465,"answer_count":1,"score":-3,"last_activity_date":1691699255,"creation_date":1691666331,"question_id":76875240,"body_markdown":"I need to get a shorter characters using my encrypted link. This is is the encoded characters Im currently getting using my code: `data=xvXTyQe6cthuC0GdQcOvCR5PKSlFiMqLBt7tM0zbxHs%3D`. I want to achieve shorter characters than this.\r\n\r\nWhat I have done: \r\n\r\nGiven below is related part of my code:\r\n\r\n    private Map&lt;String, Object&gt; getEUGenericDataMapFields(Map&lt;String, Object&gt; data , Document doc) {\r\n    \r\n    String imeiOrSerial = org.apache.commons.lang3.StringUtils.isNotBlank(doc.getIMEINumber()) ? doc.getIMEINumber() : doc.getDeviceSerialNo();\r\n    String link = imeiOrSerial + PolicyConstants.REGEX_PIPE + PolicyConstants.RENEWAL_SMS;\r\n    \r\n    \tpublic static String encrypt(String strToEncrypt, String secret) {\r\n    \t\ttry {\r\n    \t\t\tKey secretKey = generateKey(secret);\r\n    \t\t\tCipher cipher = Cipher.getInstance(PolicyConstants.AES);\r\n    \t\t\tcipher.init(Cipher.ENCRYPT_MODE, secretKey);\r\n    \t\t\treturn Base64.getEncoder().encodeToString(cipher.doFinal(strToEncrypt.getBytes(StandardCharsets.UTF_8)));\r\n    \t\t} catch (Exception e) {\r\n    \t\t\tlog.error(&quot;Error while encrypting: &quot; + e);\r\n    \t\t}\r\n    \t\treturn null;\r\n    \t}\r\n    \r\n    link = EncryptionUtil.encrypt(link, Config.getSecretKey());\r\n    \tdata.put(PolicyConstants.DATA_LINK, URLEncoder.encode(link, StandardCharsets.UTF_8.toString()));\r\n    return data;\r\n    }\r\n\r\nResult: \r\n\r\n    data=xvXTyQe6cthuC0GdQcOvCR5PKSlFiMqLBt7tM0zbxHs%3D (almost 50 characters)\r\n\r\nExpected result: less than 5 characters if possible.","title":"Get a shorter encoded characters of an encrypted link using Java","body":"<p>I need to get a shorter characters using my encrypted link. This is is the encoded characters Im currently getting using my code: <code>data=xvXTyQe6cthuC0GdQcOvCR5PKSlFiMqLBt7tM0zbxHs%3D</code>. I want to achieve shorter characters than this.</p>\n<p>What I have done:</p>\n<p>Given below is related part of my code:</p>\n<pre><code>private Map&lt;String, Object&gt; getEUGenericDataMapFields(Map&lt;String, Object&gt; data , Document doc) {\n\nString imeiOrSerial = org.apache.commons.lang3.StringUtils.isNotBlank(doc.getIMEINumber()) ? doc.getIMEINumber() : doc.getDeviceSerialNo();\nString link = imeiOrSerial + PolicyConstants.REGEX_PIPE + PolicyConstants.RENEWAL_SMS;\n\n    public static String encrypt(String strToEncrypt, String secret) {\n        try {\n            Key secretKey = generateKey(secret);\n            Cipher cipher = Cipher.getInstance(PolicyConstants.AES);\n            cipher.init(Cipher.ENCRYPT_MODE, secretKey);\n            return Base64.getEncoder().encodeToString(cipher.doFinal(strToEncrypt.getBytes(StandardCharsets.UTF_8)));\n        } catch (Exception e) {\n            log.error(&quot;Error while encrypting: &quot; + e);\n        }\n        return null;\n    }\n\nlink = EncryptionUtil.encrypt(link, Config.getSecretKey());\n    data.put(PolicyConstants.DATA_LINK, URLEncoder.encode(link, StandardCharsets.UTF_8.toString()));\nreturn data;\n}\n</code></pre>\n<p>Result:</p>\n<pre><code>data=xvXTyQe6cthuC0GdQcOvCR5PKSlFiMqLBt7tM0zbxHs%3D (almost 50 characters)\n</code></pre>\n<p>Expected result: less than 5 characters if possible.</p>\n"},{"tags":["java","export-to-csv","opencsv"],"comments":[{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":1,"creation_date":1691570515,"post_id":76865987,"comment_id":135508143,"body_markdown":"Maybe you want to change `.withQuotechar(CSVWriter.NO_QUOTE_CHARACTER)`","body":"Maybe you want to change <code>.withQuotechar(CSVWriter.NO_QUOTE_CHARACTER)</code>"},{"owner":{"account_id":10081276,"reputation":180,"user_id":7451476,"display_name":"tmzafar"},"score":0,"creation_date":1691571543,"post_id":76865987,"comment_id":135508334,"body_markdown":"@ScaryWombat you mean remove it?","body":"@ScaryWombat you mean remove it?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691575233,"post_id":76865987,"comment_id":135509102,"body_markdown":"*but when i write a new csv it actually creates a new line* What do you mean by that? *and here is how it looks like in the arraylist:* Not legible (and [Please never post images of text](https://meta.stackoverflow.com/questions/285551/why-should-i-not-upload-images-of-code-data-errors/285557#285557). They are not searchable, we cannot copy-paste... Always copy-paste the text and format it properly.)","body":"<i>but when i write a new csv it actually creates a new line</i> What do you mean by that? <i>and here is how it looks like in the arraylist:</i> Not legible (and <a href=\"https://meta.stackoverflow.com/questions/285551/why-should-i-not-upload-images-of-code-data-errors/285557#285557\">Please never post images of text</a>. They are not searchable, we cannot copy-paste... Always copy-paste the text and format it properly.)"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691577412,"post_id":76865987,"comment_id":135509554,"body_markdown":"Moreover, from what I can see of &quot;Body&quot;, it looks like a string, and *not*  &quot;a new csv&quot;","body":"Moreover, from what I can see of &quot;Body&quot;, it looks like a string, and <i>not</i>  &quot;a new csv&quot;"},{"owner":{"account_id":10081276,"reputation":180,"user_id":7451476,"display_name":"tmzafar"},"score":0,"creation_date":1691597049,"post_id":76865987,"comment_id":135514037,"body_markdown":"@g00se it is a string, but somehow while writing the csv it is a line break","body":"@g00se it is a string, but somehow while writing the csv it is a line break"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691599385,"post_id":76865987,"comment_id":135514537,"body_markdown":"*.withEscapechar(&#39;\\n&#39;)* doesn&#39;t make sense I don&#39;t *think* (I haven&#39;t used this method before). You wouldn&#39;t want an escape char to be a line feed. I would begin by deleting that line","body":"<i>.withEscapechar(&#39;\\n&#39;)</i> doesn&#39;t make sense I don&#39;t <i>think</i> (I haven&#39;t used this method before). You wouldn&#39;t want an escape char to be a line feed. I would begin by deleting that line"}],"answers":[{"tags":[],"owner":{"account_id":10081276,"reputation":180,"user_id":7451476,"display_name":"tmzafar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691699072,"creation_date":1691699072,"answer_id":76879099,"question_id":76865987,"body_markdown":"The suggestion of @g00se made me remove the *.withEscapechar(&#39;\\n&#39;)* and after that it worked fine. My final Export looks like this:\r\n\r\n    File file = new File(outDirectory, this.outputCSVName);\r\n\r\n        try (\r\n                Writer writer = Files.newBufferedWriter(Paths.get(file.toURI()), StandardCharsets.UTF_8);\r\n        ) {\r\n            StatefulBeanToCsv&lt;Shopify&gt; beanToCsv = new StatefulBeanToCsvBuilder(writer)\r\n                    .withSeparator(&#39;,&#39;)\r\n                    .build();\r\n\r\n            beanToCsv.write(data);\r\n            writer.close();\r\n            return &quot;Export OK&quot;;\r\n        } catch (CsvRequiredFieldEmptyException | IOException e) {\r\n            throw new RuntimeException(e);\r\n        } catch (CsvDataTypeMismatchException e) {\r\n            throw new RuntimeException(e);\r\n        }","title":"How to escape linebreak character while writing a csv with java/opencsv","body":"<p>The suggestion of @g00se made me remove the <em>.withEscapechar('\\n')</em> and after that it worked fine. My final Export looks like this:</p>\n<pre><code>File file = new File(outDirectory, this.outputCSVName);\n\n    try (\n            Writer writer = Files.newBufferedWriter(Paths.get(file.toURI()), StandardCharsets.UTF_8);\n    ) {\n        StatefulBeanToCsv&lt;Shopify&gt; beanToCsv = new StatefulBeanToCsvBuilder(writer)\n                .withSeparator(',')\n                .build();\n\n        beanToCsv.write(data);\n        writer.close();\n        return &quot;Export OK&quot;;\n    } catch (CsvRequiredFieldEmptyException | IOException e) {\n        throw new RuntimeException(e);\n    } catch (CsvDataTypeMismatchException e) {\n        throw new RuntimeException(e);\n    }\n</code></pre>\n"}],"owner":{"account_id":10081276,"reputation":180,"user_id":7451476,"display_name":"tmzafar"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":102,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76879099,"answer_count":1,"score":0,"last_activity_date":1691699072,"creation_date":1691570422,"question_id":76865987,"body_markdown":"I have a CSV file, which is saved as a Bean. One column has HTML tags including \\n character. While reading with opencsv is not a problem, but when i write a new csv it actually creates a new line break/row. [![CSV][1]][1]\r\n\r\nHere is what i have tried:\r\n\r\n    File file = new File(outDirectory, this.outputCSVName);\r\n\r\n        try (\r\n                Writer writer = Files.newBufferedWriter(Paths.get(file.toURI()));\r\n        ) {\r\n            StatefulBeanToCsv&lt;Shopify&gt; beanToCsv = new StatefulBeanToCsvBuilder(writer)\r\n                    .withQuotechar(CSVWriter.NO_QUOTE_CHARACTER)\r\n                    .withApplyQuotesToAll(true)[![enter image description here][1]][1]\r\n                    .withEscapechar(&#39;\\n&#39;)\r\n                    .withLineEnd(&quot;\\n&quot;) // just to test\r\n                    .withSeparator(&#39;,&#39;)\r\n                    .build();\r\n\r\n            beanToCsv.write(data);\r\n            writer.close();\r\n\r\n        } catch (CsvRequiredFieldEmptyException | IOException e) {\r\n            throw new RuntimeException(e);\r\n        } catch (CsvDataTypeMismatchException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n\r\n\r\nand here is how it looks like in the arraylist:[![enter image description here][2]][2]\r\n\r\nHow can i write it as a string? Also how can i export it as a UTF-8 encoded file? \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/kyeVh.png\r\n  [2]: https://i.stack.imgur.com/yr7d4.png","title":"How to escape linebreak character while writing a csv with java/opencsv","body":"<p>I have a CSV file, which is saved as a Bean. One column has HTML tags including \\n character. While reading with opencsv is not a problem, but when i write a new csv it actually creates a new line break/row. <a href=\"https://i.stack.imgur.com/kyeVh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kyeVh.png\" alt=\"CSV\" /></a></p>\n<p>Here is what i have tried:</p>\n<pre><code>File file = new File(outDirectory, this.outputCSVName);\n\n    try (\n            Writer writer = Files.newBufferedWriter(Paths.get(file.toURI()));\n    ) {\n        StatefulBeanToCsv&lt;Shopify&gt; beanToCsv = new StatefulBeanToCsvBuilder(writer)\n                .withQuotechar(CSVWriter.NO_QUOTE_CHARACTER)\n                .withApplyQuotesToAll(true)[![enter image description here][1]][1]\n                .withEscapechar('\\n')\n                .withLineEnd(&quot;\\n&quot;) // just to test\n                .withSeparator(',')\n                .build();\n\n        beanToCsv.write(data);\n        writer.close();\n\n    } catch (CsvRequiredFieldEmptyException | IOException e) {\n        throw new RuntimeException(e);\n    } catch (CsvDataTypeMismatchException e) {\n        throw new RuntimeException(e);\n    }\n</code></pre>\n<p>and here is how it looks like in the arraylist:<a href=\"https://i.stack.imgur.com/yr7d4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yr7d4.png\" alt=\"enter image description here\" /></a></p>\n<p>How can i write it as a string? Also how can i export it as a UTF-8 encoded file?</p>\n"},{"tags":["java","spring","maven","spring-mvc","jpa"],"comments":[{"owner":{"account_id":7478819,"reputation":3597,"user_id":5684265,"accept_rate":100,"display_name":"Jakub Ch."},"score":0,"creation_date":1481827188,"post_id":41170661,"comment_id":69542499,"body_markdown":"How looks your class with main method? Is it annotated with `@SpringBootApplication`? Is it in package that is root package for any others?","body":"How looks your class with main method? Is it annotated with <code>@SpringBootApplication</code>? Is it in package that is root package for any others?"},{"owner":{"account_id":9859819,"reputation":341,"user_id":7303201,"display_name":"Miguel Torrej&#243;n Garv&#237;a"},"score":1,"creation_date":1481827990,"post_id":41170661,"comment_id":69542926,"body_markdown":"package es.uc3m.tiw;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class ClienteSpringApplication {\n\n\tpublic static void main(String[] args) {\n\t\tSpringApplication.run(ClienteSpringApplication.class, args);\n\t}\n}","body":"package es.uc3m.tiw;  import org.springframework.boot.SpringApplication; import org.springframework.boot.autoconfigure.SpringBootApplication&zwnj;&#8203;;  @SpringBootApplication public class ClienteSpringApplication {  \tpublic static void main(String[] args) { \t\tSpringApplication.run(ClienteSpringApplication.class, args); \t} }"}],"answers":[{"tags":[],"owner":{"account_id":9273909,"reputation":3750,"user_id":6887084,"display_name":"ScanQR"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1481868641,"creation_date":1481868641,"answer_id":41178250,"question_id":41170661,"body_markdown":"You are missing repository configuration, as you have to configure it using `@Repository`,\r\n\r\nFollowing is incorrect,\r\n\r\n    public interface UsuarioRepository  extends JpaRepository&lt;Usuario, Long&gt; {\r\n\r\nRather it should be configured as repository as follows,\r\n\r\n    @Repository\r\n    public interface UsuarioRepository  extends JpaRepository&lt;Usuario, Long&gt; {\r\n\r\nThis will make it a bean to be scanned and treat it as a repository and then your following code should work as expected as well,\r\n\r\n    @Autowired\r\n    private UsuarioRepository usuarioDao;\r\n\r\n","title":"Spring Data JPA - Consider defining a bean named &#39;entityManagerFactory&#39; in your configuration","body":"<p>You are missing repository configuration, as you have to configure it using <code>@Repository</code>,</p>\n\n<p>Following is incorrect,</p>\n\n<pre><code>public interface UsuarioRepository  extends JpaRepository&lt;Usuario, Long&gt; {\n</code></pre>\n\n<p>Rather it should be configured as repository as follows,</p>\n\n<pre><code>@Repository\npublic interface UsuarioRepository  extends JpaRepository&lt;Usuario, Long&gt; {\n</code></pre>\n\n<p>This will make it a bean to be scanned and treat it as a repository and then your following code should work as expected as well,</p>\n\n<pre><code>@Autowired\nprivate UsuarioRepository usuarioDao;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1511192,"reputation":205,"user_id":1413278,"display_name":"Deepu Surendran"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1500928156,"creation_date":1500928156,"answer_id":45289507,"question_id":41170661,"body_markdown":"Check persistence-api in pom file and try to change with hibernate-jpa-2.1 which is a part of spring-boot-started-data-jpa jar","title":"Spring Data JPA - Consider defining a bean named &#39;entityManagerFactory&#39; in your configuration","body":"<p>Check persistence-api in pom file and try to change with hibernate-jpa-2.1 which is a part of spring-boot-started-data-jpa jar</p>\n"},{"tags":[],"owner":{"account_id":3746920,"reputation":21,"user_id":3115394,"display_name":"Carvo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1505342688,"creation_date":1505342688,"answer_id":46207916,"question_id":41170661,"body_markdown":"In my case was the h2-1.4.193.jar, that contains the Driver class but it can&#39;t be read (very odd, may be is corrupted), as you can see:\r\n[Driver class from h2-1.4.193][1]\r\n\r\nSo, you can update de spring-boot-starter-parent to 1.5.3.RELEASE (or newer) or override the managed version of your h2 dependency.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nMnUd.png","title":"Spring Data JPA - Consider defining a bean named &#39;entityManagerFactory&#39; in your configuration","body":"<p>In my case was the h2-1.4.193.jar, that contains the Driver class but it can't be read (very odd, may be is corrupted), as you can see:\n<a href=\"https://i.stack.imgur.com/nMnUd.png\" rel=\"nofollow noreferrer\">Driver class from h2-1.4.193</a></p>\n\n<p>So, you can update de spring-boot-starter-parent to 1.5.3.RELEASE (or newer) or override the managed version of your h2 dependency.</p>\n"},{"tags":[],"owner":{"account_id":1867473,"reputation":3093,"user_id":1690657,"accept_rate":90,"display_name":"Alex P."},"comment_count":0,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1515750748,"creation_date":1515750748,"answer_id":48223609,"question_id":41170661,"body_markdown":"In your `ClienteSpringApplication` you only have the `@SpringBootApplication` annotation, wich is the equivalent of `@Configuration`, `@EnableAutoConfiguration` and `@ComponentScan`. What you are missing is the `@EnableJpaRepositories` annotation.\r\n\r\n\r\n    package es.uc3m.tiw;\r\n    \r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    \r\n    @SpringBootApplication\r\n    @EnableJpaRepositories\r\n    public class ClienteSpringApplication {\r\n    \r\n        public static void main(String[] args) {\r\n            SpringApplication.run(ClienteSpringApplication.class, args);\r\n        }\r\n    }\r\n\r\nIf it doesn&#39;t work like that try adding also the package of your repository:\r\n\r\n    @EnableJpaRepositories(&quot;es.uc3m.tiw.dominios&quot;)","title":"Spring Data JPA - Consider defining a bean named &#39;entityManagerFactory&#39; in your configuration","body":"<p>In your <code>ClienteSpringApplication</code> you only have the <code>@SpringBootApplication</code> annotation, wich is the equivalent of <code>@Configuration</code>, <code>@EnableAutoConfiguration</code> and <code>@ComponentScan</code>. What you are missing is the <code>@EnableJpaRepositories</code> annotation.</p>\n\n<pre><code>package es.uc3m.tiw;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\n@EnableJpaRepositories\npublic class ClienteSpringApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(ClienteSpringApplication.class, args);\n    }\n}\n</code></pre>\n\n<p>If it doesn't work like that try adding also the package of your repository:</p>\n\n<pre><code>@EnableJpaRepositories(\"es.uc3m.tiw.dominios\")\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12021263,"reputation":101,"user_id":8794626,"display_name":"Appsstuff Solutions"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1524944199,"creation_date":1524938375,"answer_id":50079546,"question_id":41170661,"body_markdown":"check that you added **@Repository annotation on JpaRepository**\r\nCheck that you make all entity Setter and Getter\r\nclean and build\r\nthen run.","title":"Spring Data JPA - Consider defining a bean named &#39;entityManagerFactory&#39; in your configuration","body":"<p>check that you added <strong>@Repository annotation on JpaRepository</strong>\nCheck that you make all entity Setter and Getter\nclean and build\nthen run.</p>\n"},{"tags":[],"owner":{"account_id":8072907,"reputation":1250,"user_id":6085034,"display_name":"Christian Altamirano Ayala"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1525899613,"creation_date":1525899613,"answer_id":50261969,"question_id":41170661,"body_markdown":"Be careful with jars dependencies loaded by Maven, in my case hibernate-core.jar was corrupted, once I removed and install that dependency the project runs ok.\r\ncheers.","title":"Spring Data JPA - Consider defining a bean named &#39;entityManagerFactory&#39; in your configuration","body":"<p>Be careful with jars dependencies loaded by Maven, in my case hibernate-core.jar was corrupted, once I removed and install that dependency the project runs ok.\ncheers.</p>\n"},{"comments":[{"owner":{"account_id":5814216,"reputation":465,"user_id":4584374,"display_name":"Joginder Malik"},"score":0,"creation_date":1623951086,"post_id":51314877,"comment_id":120230383,"body_markdown":"+1 It worked for me. There were 3 hibernate-core jar files were available in m2\\repository\\org\\hibernate\\hibernate-core folder. I deleted all and update maven project again.","body":"+1 It worked for me. There were 3 hibernate-core jar files were available in m2\\repository\\org\\hibernate\\hibernate-core folder. I deleted all and update maven project again."}],"tags":[],"owner":{"account_id":7029904,"reputation":106,"user_id":5386017,"display_name":"H. Sami Sari"},"comment_count":1,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1531431706,"creation_date":1531431706,"answer_id":51314877,"question_id":41170661,"body_markdown":"I had exact same issue. When I checked maven build log I have realised that there was an error about hibernate packages complaining about &quot;invalid LOC header (bad signature)&quot;. I solved by deleting sub directories under &lt;user-home&gt;\\.m2\\repository\\org\\hibernate\\hibernate-core and recompiling my project.","title":"Spring Data JPA - Consider defining a bean named &#39;entityManagerFactory&#39; in your configuration","body":"<p>I had exact same issue. When I checked maven build log I have realised that there was an error about hibernate packages complaining about \"invalid LOC header (bad signature)\". I solved by deleting sub directories under .m2\\repository\\org\\hibernate\\hibernate-core and recompiling my project.</p>\n"},{"tags":[],"owner":{"account_id":11758526,"reputation":41,"user_id":8605422,"display_name":"Ankit Gupta"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1573549912,"creation_date":1573549912,"answer_id":58815370,"question_id":41170661,"body_markdown":"pom.xml needs to be updated and it works for me:\r\n\r\nI added the following dependency:\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\r\n            &lt;version&gt;2.3.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n","title":"Spring Data JPA - Consider defining a bean named &#39;entityManagerFactory&#39; in your configuration","body":"<p>pom.xml needs to be updated and it works for me:</p>\n\n<p>I added the following dependency:</p>\n\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\n        &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\n        &lt;version&gt;2.3.1&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5256007,"reputation":3439,"user_id":4198907,"display_name":"DaniS"},"score":0,"creation_date":1679947611,"post_id":62976297,"comment_id":133809397,"body_markdown":"Same for me furthermore I had to maven clean install. Also I had org.hibernate version 6.X in a spring boot 2.X project. Perhaps this helps someone.","body":"Same for me furthermore I had to maven clean install. Also I had org.hibernate version 6.X in a spring boot 2.X project. Perhaps this helps someone."}],"tags":[],"owner":{"account_id":8006428,"reputation":363,"user_id":6039603,"display_name":"rsobies"},"comment_count":1,"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1691669949,"creation_date":1595132986,"answer_id":62976297,"question_id":41170661,"body_markdown":"In my case, I had the wrong dependency: `spring-data-jpa`.\r\nwhen I changed to spring-boot-starter-data-jpa, it solved the problem.\r\n\r\nI didn&#39;t have to add any annotation `@Repository` nor `@EnableJpa` etc.\r\n\r\n\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;","title":"Spring Data JPA - Consider defining a bean named &#39;entityManagerFactory&#39; in your configuration","body":"<p>In my case, I had the wrong dependency: <code>spring-data-jpa</code>.\nwhen I changed to spring-boot-starter-data-jpa, it solved the problem.</p>\n<p>I didn't have to add any annotation <code>@Repository</code> nor <code>@EnableJpa</code> etc.</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2217934,"reputation":498,"user_id":1958098,"accept_rate":100,"display_name":"Thomas"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1656533106,"creation_date":1656533106,"answer_id":72807227,"question_id":41170661,"body_markdown":"I faced the same issue some time back and in my case the package declaration in connection configuration was wrong.\r\nSo like others said, either check the annotations in SpringBootApplication class or the configurations in your connectionconfiguration class\r\n\r\n    @Configuration\r\n    @EnableTransactionManagement\r\n    @EnableJpaRepositories(\r\n            entityManagerFactoryRef = &quot;someEntityManagerFactory&quot;,\r\n            transactionManagerRef = &quot;someTransactionManager&quot;,\r\n            **basePackages = {&quot;com.pack.some.database.repository&quot;})**\r\n    public class MyConnectionConfiguration {","title":"Spring Data JPA - Consider defining a bean named &#39;entityManagerFactory&#39; in your configuration","body":"<p>I faced the same issue some time back and in my case the package declaration in connection configuration was wrong.\nSo like others said, either check the annotations in SpringBootApplication class or the configurations in your connectionconfiguration class</p>\n<pre><code>@Configuration\n@EnableTransactionManagement\n@EnableJpaRepositories(\n        entityManagerFactoryRef = &quot;someEntityManagerFactory&quot;,\n        transactionManagerRef = &quot;someTransactionManager&quot;,\n        **basePackages = {&quot;com.pack.some.database.repository&quot;})**\npublic class MyConnectionConfiguration {\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16204252,"reputation":116,"user_id":11699883,"display_name":"Pokrt"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691698416,"creation_date":1667092082,"answer_id":74249891,"question_id":41170661,"body_markdown":"In my case, I was missing Hibernate Entity Manager dependency, \r\n\r\n    &lt;dependency&gt; \r\n      &lt;groupId&gt;org.hibernate&lt;/groupId&gt; \r\n      &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt; \r\n      &lt;version&gt;5.2.3.Final&lt;/version&gt; \r\n    &lt;/dependency&gt;\r\n\r\nbecause I have had only this one (Hibernate Core):\r\n\r\n    &lt;dependency&gt; \r\n      &lt;groupId&gt;org.hibernate&lt;/groupId&gt; \r\n      &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt; \r\n      &lt;version&gt;4.1.4.Final&lt;/version&gt; \r\n    &lt;/dependency&gt;\r\n\r\nFurthermore solved adding this dependency:\r\n\r\n    &lt;dependency&gt; \r\n      &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt; \r\n      &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt; \r\n      &lt;version&gt;2.3.0&lt;/version&gt; \r\n    &lt;/dependency&gt;\r\n\r\nas suggested here: [link][1].\r\n\r\n\r\n  [1]: https://www.edureka.co/community/163776/creating-entitymanagerfactory-defined-resource-invocation","title":"Spring Data JPA - Consider defining a bean named &#39;entityManagerFactory&#39; in your configuration","body":"<p>In my case, I was missing Hibernate Entity Manager dependency,</p>\n<pre><code>&lt;dependency&gt; \n  &lt;groupId&gt;org.hibernate&lt;/groupId&gt; \n  &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt; \n  &lt;version&gt;5.2.3.Final&lt;/version&gt; \n&lt;/dependency&gt;\n</code></pre>\n<p>because I have had only this one (Hibernate Core):</p>\n<pre><code>&lt;dependency&gt; \n  &lt;groupId&gt;org.hibernate&lt;/groupId&gt; \n  &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt; \n  &lt;version&gt;4.1.4.Final&lt;/version&gt; \n&lt;/dependency&gt;\n</code></pre>\n<p>Furthermore solved adding this dependency:</p>\n<pre><code>&lt;dependency&gt; \n  &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt; \n  &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt; \n  &lt;version&gt;2.3.0&lt;/version&gt; \n&lt;/dependency&gt;\n</code></pre>\n<p>as suggested here: <a href=\"https://www.edureka.co/community/163776/creating-entitymanagerfactory-defined-resource-invocation\" rel=\"nofollow noreferrer\">link</a>.</p>\n"},{"tags":[],"owner":{"account_id":20898348,"reputation":41,"user_id":15351994,"display_name":"Hassan Harera"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674055343,"creation_date":1674055343,"answer_id":75161479,"question_id":41170661,"body_markdown":"In my case, the problem was incompatible versions between JPA nad Spring Boot version","title":"Spring Data JPA - Consider defining a bean named &#39;entityManagerFactory&#39; in your configuration","body":"<p>In my case, the problem was incompatible versions between JPA nad Spring Boot version</p>\n"},{"tags":[],"owner":{"account_id":4562312,"reputation":8142,"user_id":3704297,"accept_rate":100,"display_name":"omikes"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678811259,"creation_date":1678751741,"answer_id":75727919,"question_id":41170661,"body_markdown":"After trying a dozen things, I finally gave up and added a bean to my config like it says to do, with a `DataSource` variable named `dataSource` which gets `@Autowired` in the constructor. \r\nThen it wanted another bean that I also added. \r\n\r\nHere is the final config, don&#39;t forget to replace the `repository.package.location` text with the package location of your repository:\r\n\r\n```\r\n@Configuration\r\npublic class JpaConfiguration\r\n{\r\n\tprivate final DataSource dataSource;\r\n\r\n\tpublic JpaConfiguration(DataSource dataSource) {\r\n\t\tthis.dataSource = dataSource;\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic EntityManagerFactory entityManagerFactory() {\r\n\t\tHibernateJpaVendorAdapter vendorAdapter = new HibernateJpaVendorAdapter();\r\n\t\tvendorAdapter.setGenerateDdl(true);\r\n\r\n\t\tLocalContainerEntityManagerFactoryBean factory = new LocalContainerEntityManagerFactoryBean();\r\n\t\tfactory.setJpaVendorAdapter(vendorAdapter);\r\n\t\tfactory.setPackagesToScan(&quot;repository.package.location&quot;);\r\n\t\tfactory.setDataSource(dataSource);\r\n\t\tfactory.afterPropertiesSet();\r\n\r\n\t\treturn factory.getObject();\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic PlatformTransactionManager transactionManager() {\r\n\t\tJpaTransactionManager txManager = new JpaTransactionManager();\r\n\t\ttxManager.setEntityManagerFactory(entityManagerFactory());\r\n\t\treturn txManager;\r\n\t}\r\n}\r\n```","title":"Spring Data JPA - Consider defining a bean named &#39;entityManagerFactory&#39; in your configuration","body":"<p>After trying a dozen things, I finally gave up and added a bean to my config like it says to do, with a <code>DataSource</code> variable named <code>dataSource</code> which gets <code>@Autowired</code> in the constructor.\nThen it wanted another bean that I also added.</p>\n<p>Here is the final config, don't forget to replace the <code>repository.package.location</code> text with the package location of your repository:</p>\n<pre><code>@Configuration\npublic class JpaConfiguration\n{\n    private final DataSource dataSource;\n\n    public JpaConfiguration(DataSource dataSource) {\n        this.dataSource = dataSource;\n    }\n\n    @Bean\n    public EntityManagerFactory entityManagerFactory() {\n        HibernateJpaVendorAdapter vendorAdapter = new HibernateJpaVendorAdapter();\n        vendorAdapter.setGenerateDdl(true);\n\n        LocalContainerEntityManagerFactoryBean factory = new LocalContainerEntityManagerFactoryBean();\n        factory.setJpaVendorAdapter(vendorAdapter);\n        factory.setPackagesToScan(&quot;repository.package.location&quot;);\n        factory.setDataSource(dataSource);\n        factory.afterPropertiesSet();\n\n        return factory.getObject();\n    }\n\n    @Bean\n    public PlatformTransactionManager transactionManager() {\n        JpaTransactionManager txManager = new JpaTransactionManager();\n        txManager.setEntityManagerFactory(entityManagerFactory());\n        return txManager;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":9859819,"reputation":341,"user_id":7303201,"display_name":"Miguel Torrej&#243;n Garv&#237;a"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":150441,"favorite_count":0,"down_vote_count":0,"up_vote_count":34,"answer_count":13,"score":34,"last_activity_date":1691698416,"creation_date":1481825288,"question_id":41170661,"body_markdown":"I am developing an application in Spring, using Tomcat, Mysql5, Java8... The problem is that I cannot deploy it, due to &quot;required bean &#39;entityManagerFactory&#39; not found&quot; problem. I have developed this project with my coworkers but they can perfectly deploy it with any problems, even if I copy-paste the same project in Spring Tool Suite. How can be possible?\r\nError:\r\n\r\n        2016-12-15 17:41:12.777  WARN 3676 --- [           main] ationConfigEmbeddedWebApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;controlador&#39;: Unsatisfied dependency expressed through field &#39;usuarioDao&#39;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;usuarioRepository&#39;: Cannot create inner bean &#39;(inner bean)#59e43e8c&#39; of type [org.springframework.orm.jpa.SharedEntityManagerCreator] while setting bean property &#39;entityManager&#39;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;(inner bean)#59e43e8c&#39;: Cannot resolve reference to bean &#39;entityManagerFactory&#39; while setting constructor argument; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named &#39;entityManagerFactory&#39; available\r\n    2016-12-15 17:41:12.783  INFO 3676 --- [           main] o.apache.catalina.core.StandardService   : Stopping service Tomcat\r\n    2016-12-15 17:41:12.807  WARN 3676 --- [ost-startStop-1] o.a.c.loader.WebappClassLoaderBase       : The web application [ROOT] appears to have started a thread named [Abandoned connection cleanup thread] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:\r\n    2016-12-15 17:41:12.826  INFO 3676 --- [           main] utoConfigurationReportLoggingInitializer : \r\n    \r\n    Error starting ApplicationContext. To display the auto-configuration report re-run your application with &#39;debug&#39; enabled.\r\n    2016-12-15 17:41:12.940 ERROR 3676 --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : \r\n    \r\n    ***************************\r\n    APPLICATION FAILED TO START\r\n    ***************************\r\n    \r\n    Description:\r\n    \r\n    Field usuarioDao in es.uc3m.tiw.Controladores.Controlador required a bean named &#39;entityManagerFactory&#39; that could not be found.\r\n    \r\n    \r\n    Action:\r\n    \r\n    Consider defining a bean named &#39;entityManagerFactory&#39; in your configuration.\r\n\r\n\r\n**Here is my pom.xml**\r\n\r\n        &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n    \t&lt;groupId&gt;es.uc3m.tiw&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;Cliente&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;packaging&gt;jar&lt;/packaging&gt;\r\n    \r\n    \t&lt;name&gt;Cliente&lt;/name&gt;\r\n    \t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n    \r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;1.4.2.RELEASE&lt;/version&gt;\r\n    \t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    \t&lt;/parent&gt;\r\n    \r\n    \t&lt;properties&gt;\r\n    \t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    \t\t&lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n    \t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n    \t&lt;/properties&gt;\r\n    \r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t\r\n    \t&lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\t\r\n            \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n          &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n    \t\r\n    \t\t\r\n    \t&lt;/dependencies&gt;\r\n    \r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    \r\n    \r\n    &lt;/project&gt;\r\n\r\n\r\n**Here is my repository**\r\n\r\n        package es.uc3m.tiw.Daos;\r\n    \r\n    import java.util.List;\r\n    \r\n    import org.springframework.data.jpa.repository.JpaRepository;\r\n    import es.uc3m.tiw.dominios.Usuario;\r\n    \r\n    public interface UsuarioRepository  extends JpaRepository&lt;Usuario, Long&gt; {\r\n    \r\n    \tList&lt;Usuario&gt; findAll();\r\n    \t\r\n    \tUsuario findByNombre(String nombre);\r\n    }\r\n\r\n\r\n**Here is my controller**\r\n\r\n    package es.uc3m.tiw.Controladores;\r\n    \r\n    import java.util.List;\r\n    \r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.web.bind.annotation.RequestBody;\r\n    import org.springframework.web.bind.annotation.RequestMapping;\r\n    import org.springframework.web.bind.annotation.RequestMethod;\r\n    import org.springframework.web.bind.annotation.ResponseBody;\r\n    import org.springframework.web.bind.annotation.RestController;\r\n    \r\n    import es.uc3m.tiw.Daos.AdministradorRepository;\r\n    import es.uc3m.tiw.Daos.UsuarioRepository;\r\n    import es.uc3m.tiw.dominios.Administrador;\r\n    import es.uc3m.tiw.dominios.Usuario;\r\n    \r\n    @RestController\r\n    public class Controlador {\r\n    \r\n    @Autowired\r\n    private UsuarioRepository usuarioDao;\r\n    private AdministradorRepository administradorDao;\r\n    \r\n    \r\n    \t\r\n    \t@RequestMapping(value=&quot;/registroUsuario&quot;, method = RequestMethod.POST)\r\n    \tpublic @ResponseBody Usuario registrarUsuario(@RequestBody Usuario usuarioARegistrar){\r\n    \tusuarioDao.save(usuarioARegistrar); //guardar, editar, borrar, findbyOne(Primary key) son m&#233;todos que vienen implementados ya en el CrudRepository\r\n    \treturn usuarioARegistrar;\r\n    \t}\r\n    \t\r\n    \t@RequestMapping(value=&quot;/editarUsuario&quot;, method = RequestMethod.POST)\r\n        public @ResponseBody Usuario editarUsuario(Usuario usuarioAEditar){\r\n    \t        usuarioAEditar.setNombre(usuarioAEditar.getNombre());\r\n    \t        usuarioAEditar.setApellidos(usuarioAEditar.getApellidos());\r\n    \t        usuarioAEditar.setCiudad(usuarioAEditar.getCiudad());\r\n    \t        usuarioAEditar.setEmail(usuarioAEditar.getEmail());\r\n    \t        usuarioAEditar.setPassword(usuarioAEditar.getPassword());\r\n    \t        usuarioDao.save(usuarioAEditar);\t        \r\n        return usuarioAEditar;\r\n        }\r\n    \t\r\n    \t@RequestMapping(value=&quot;/eliminarUsuario&quot;, method = RequestMethod.DELETE)\r\n        public @ResponseBody Usuario eliminarUsuario(Usuario usuarioAEliminar){\r\n        usuarioDao.delete(usuarioAEliminar);\r\n        return usuarioAEliminar;\r\n        }\r\n    \r\n    \t@RequestMapping(value=&quot;/validar&quot; ,method = RequestMethod.POST)\r\n    \tpublic  @ResponseBody Usuario loginUsuario(@RequestBody Usuario usuarioPendiente){\r\n    \tUsuario usuarioLogeado = null;\r\n    \tList &lt;Usuario&gt; usuarios = usuarioDao.findAll();\r\n    \tusuarioLogeado = comprobarUsuario(usuarios, usuarioPendiente.getEmail(),usuarioPendiente.getPassword()); \r\n    \treturn usuarioLogeado;\r\n    \t}\r\n    \t\r\n    \t@RequestMapping(value=&quot;/verPerfilUsuario&quot;, method = RequestMethod.GET)\r\n        public @ResponseBody Usuario verPerfilUsuario(Usuario usuarioAMostrar){\r\n    \t\tusuarioAMostrar.getNombre();\r\n    \t\tusuarioAMostrar.getApellidos();\r\n    \t\tusuarioAMostrar.getCiudad();\r\n    \t\tusuarioAMostrar.getEmail();\r\n    \t\tusuarioAMostrar.getPassword();\r\n        return usuarioAMostrar;\r\n        }\r\n    \t\r\n    \t@RequestMapping(value=&quot;/loginAdministrador&quot; ,method = RequestMethod.POST)\r\n        public  @ResponseBody Administrador loginAdministrador(@RequestBody Administrador administradorPendiente){\r\n    \t\tAdministrador administradorLogeado = null;\r\n        \tList &lt;Administrador&gt; administradores = administradorDao.findAll();\r\n        \tadministradorLogeado = comprobarAdministrador(administradores, administradorPendiente.getEmail(),administradorPendiente.getPassword());\r\n        \treturn administradorLogeado;\r\n        }\r\n    \t\r\n        private Usuario comprobarUsuario( List&lt;Usuario&gt; usuarios, String email, String password) {\r\n                Usuario u = null;\r\n                for (Usuario usuario : usuarios) {\r\n                        if (email.equals(usuario.getEmail()) &amp;&amp; password.equals(usuario.getPassword())){\r\n                                u = usuario;\r\n                                break;\r\n                        \t\t}\r\n                \t\t}\r\n                return u;\r\n        \t} \r\n     \r\n        private Administrador comprobarAdministrador( List&lt;Administrador&gt; administradores, String email, String password) {\r\n            Administrador ad = null;\r\n            for (Administrador administrador : administradores) {\r\n                    if (email.equals(administrador.getEmail()) &amp;&amp; password.equals(administrador.getPassword())){\r\n                            ad = administrador;\r\n                            //break;\r\n                    \t\t}\r\n            \t\t}\r\n            return ad;\r\n    \t}\r\n    }\r\n\r\n\r\n**Application.properties**\r\n\r\n    server.port=8010\r\n    spring.datasource.url=jdbc:mysql://localhost:3306/tiw\r\n    spring.datasource.username=root\r\n    spring.datasource.password=admin\r\n    spring.datasource.driver-class-name = com.mysql.jdbc.Driver\r\n    \r\n    spring.jpa.hibernate.ddl-auto = update\r\n\r\n**Entity**\r\n\r\n    package es.uc3m.tiw.dominios;\r\n    \r\n    import java.io.Serializable;\r\n    \r\n    import javax.persistence.Column;\r\n    import javax.persistence.Entity;\r\n    import javax.persistence.GeneratedValue;\r\n    import javax.persistence.GenerationType;\r\n    import javax.persistence.Id;\r\n    import javax.persistence.Table;\r\n    \r\n    @Entity\r\n    @Table(name=&quot;USUARIOS&quot;)\r\n    public class Usuario implements Serializable {\r\n    \t\r\n    \t\tprivate static final long serialVersionUID = 1L;\r\n    \r\n    \t\t@Id\r\n    \t\t@GeneratedValue(strategy=GenerationType.AUTO)\r\n    \t\tprivate long id;\r\n    \t\t@Column(length = 25)\r\n    \t\tprivate String nombre;\r\n    \t\t@Column(length = 25)\r\n    \t\tprivate String apellidos;\r\n    \t\t@Column(length = 25)\r\n    \t\tprivate String ciudad;\r\n    \t\t@Column(length = 25, nullable = false, unique = true)\r\n    \t\tprivate String email;\r\n    \t\t@Column(length = 25, nullable = false)\r\n    \t\tprivate String password;\r\n    \t\t\r\n    \t\t\r\n    \t\tpublic Usuario() {\r\n    \t\t}\r\n    \t\t\r\n    \t\tpublic Usuario(long id, String nombre, String apellidos, String ciudad, String password, String email) {\r\n    \t\t\tsuper();\r\n    \t\t\tthis.id = id;\r\n    \t\t\tthis.nombre = nombre;\r\n    \t\t\tthis.apellidos = apellidos;\r\n    \t\t\tthis.ciudad = ciudad;\r\n    \t\t\tthis.password = password;\r\n    \t\t\tthis.email = email;\r\n    \t\t}\r\n    \t\t\r\n    \t\tpublic long getId() {\r\n    \t\t\treturn id;\r\n    \t\t}\r\n    \t\tpublic void setId(long id) {\r\n    \t\t\tthis.id = id;\r\n    \t\t}\t\t\r\n    \t\tpublic String getNombre() {\r\n    \t\t\treturn nombre;\r\n    \t\t}\t\t\r\n    \t\tpublic void setNombre(String nombre) {\r\n    \t\t\tthis.nombre = nombre;\r\n    \t\t}\t\t\r\n    \t\tpublic String getApellidos() {\r\n    \t\t\treturn apellidos;\r\n    \t\t}\t\r\n    \t\tpublic void setApellidos(String apellidos) {\r\n    \t\t\tthis.apellidos = apellidos;\r\n    \t\t}\t\t\r\n    \t\tpublic String getCiudad() {\r\n    \t\t\treturn ciudad;\r\n    \t\t}\r\n    \t\tpublic void setCiudad(String ciudad) {\r\n    \t\t\tthis.ciudad = ciudad;\r\n    \t\t}\t\t\r\n    \t\tpublic String getPassword() {\r\n    \t\t\treturn password;\r\n    \t\t}\t\t\r\n    \t\tpublic void setPassword(String password) {\r\n    \t\t\tthis.password = password;\r\n    \t\t}\t\r\n    \t\tpublic String getEmail() {\r\n    \t\t\treturn email;\r\n    \t\t}\t\r\n    \t\tpublic void setEmail(String email) {\r\n    \t\t\tthis.email = email;\r\n    \t\t}\r\n    }\r\n\r\n\r\n**Here is my main**\r\n\r\n    package es.uc3m.tiw;\r\n    \r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    \r\n    @SpringBootApplication\r\n    public class ClienteSpringApplication {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSpringApplication.run(ClienteSpringApplication.class, args);\r\n    \t}\r\n    }\r\n\r\n\r\n","title":"Spring Data JPA - Consider defining a bean named &#39;entityManagerFactory&#39; in your configuration","body":"<p>I am developing an application in Spring, using Tomcat, Mysql5, Java8... The problem is that I cannot deploy it, due to \"required bean 'entityManagerFactory' not found\" problem. I have developed this project with my coworkers but they can perfectly deploy it with any problems, even if I copy-paste the same project in Spring Tool Suite. How can be possible?\nError:</p>\n\n<pre><code>    2016-12-15 17:41:12.777  WARN 3676 --- [           main] ationConfigEmbeddedWebApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'controlador': Unsatisfied dependency expressed through field 'usuarioDao'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'usuarioRepository': Cannot create inner bean '(inner bean)#59e43e8c' of type [org.springframework.orm.jpa.SharedEntityManagerCreator] while setting bean property 'entityManager'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)#59e43e8c': Cannot resolve reference to bean 'entityManagerFactory' while setting constructor argument; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'entityManagerFactory' available\n2016-12-15 17:41:12.783  INFO 3676 --- [           main] o.apache.catalina.core.StandardService   : Stopping service Tomcat\n2016-12-15 17:41:12.807  WARN 3676 --- [ost-startStop-1] o.a.c.loader.WebappClassLoaderBase       : The web application [ROOT] appears to have started a thread named [Abandoned connection cleanup thread] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:\n2016-12-15 17:41:12.826  INFO 3676 --- [           main] utoConfigurationReportLoggingInitializer : \n\nError starting ApplicationContext. To display the auto-configuration report re-run your application with 'debug' enabled.\n2016-12-15 17:41:12.940 ERROR 3676 --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : \n\n***************************\nAPPLICATION FAILED TO START\n***************************\n\nDescription:\n\nField usuarioDao in es.uc3m.tiw.Controladores.Controlador required a bean named 'entityManagerFactory' that could not be found.\n\n\nAction:\n\nConsider defining a bean named 'entityManagerFactory' in your configuration.\n</code></pre>\n\n<p><strong>Here is my pom.xml</strong></p>\n\n<pre><code>    &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;es.uc3m.tiw&lt;/groupId&gt;\n    &lt;artifactId&gt;Cliente&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n\n    &lt;name&gt;Cliente&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;1.4.2.RELEASE&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;   \n\n    &lt;dependency&gt;\n      &lt;groupId&gt;mysql&lt;/groupId&gt;\n      &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n\n&lt;/project&gt;\n</code></pre>\n\n<p><strong>Here is my repository</strong></p>\n\n<pre><code>    package es.uc3m.tiw.Daos;\n\nimport java.util.List;\n\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport es.uc3m.tiw.dominios.Usuario;\n\npublic interface UsuarioRepository  extends JpaRepository&lt;Usuario, Long&gt; {\n\n    List&lt;Usuario&gt; findAll();\n\n    Usuario findByNombre(String nombre);\n}\n</code></pre>\n\n<p><strong>Here is my controller</strong></p>\n\n<pre><code>package es.uc3m.tiw.Controladores;\n\nimport java.util.List;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.web.bind.annotation.RequestBody;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestMethod;\nimport org.springframework.web.bind.annotation.ResponseBody;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport es.uc3m.tiw.Daos.AdministradorRepository;\nimport es.uc3m.tiw.Daos.UsuarioRepository;\nimport es.uc3m.tiw.dominios.Administrador;\nimport es.uc3m.tiw.dominios.Usuario;\n\n@RestController\npublic class Controlador {\n\n@Autowired\nprivate UsuarioRepository usuarioDao;\nprivate AdministradorRepository administradorDao;\n\n\n\n    @RequestMapping(value=\"/registroUsuario\", method = RequestMethod.POST)\n    public @ResponseBody Usuario registrarUsuario(@RequestBody Usuario usuarioARegistrar){\n    usuarioDao.save(usuarioARegistrar); //guardar, editar, borrar, findbyOne(Primary key) son métodos que vienen implementados ya en el CrudRepository\n    return usuarioARegistrar;\n    }\n\n    @RequestMapping(value=\"/editarUsuario\", method = RequestMethod.POST)\n    public @ResponseBody Usuario editarUsuario(Usuario usuarioAEditar){\n            usuarioAEditar.setNombre(usuarioAEditar.getNombre());\n            usuarioAEditar.setApellidos(usuarioAEditar.getApellidos());\n            usuarioAEditar.setCiudad(usuarioAEditar.getCiudad());\n            usuarioAEditar.setEmail(usuarioAEditar.getEmail());\n            usuarioAEditar.setPassword(usuarioAEditar.getPassword());\n            usuarioDao.save(usuarioAEditar);            \n    return usuarioAEditar;\n    }\n\n    @RequestMapping(value=\"/eliminarUsuario\", method = RequestMethod.DELETE)\n    public @ResponseBody Usuario eliminarUsuario(Usuario usuarioAEliminar){\n    usuarioDao.delete(usuarioAEliminar);\n    return usuarioAEliminar;\n    }\n\n    @RequestMapping(value=\"/validar\" ,method = RequestMethod.POST)\n    public  @ResponseBody Usuario loginUsuario(@RequestBody Usuario usuarioPendiente){\n    Usuario usuarioLogeado = null;\n    List &lt;Usuario&gt; usuarios = usuarioDao.findAll();\n    usuarioLogeado = comprobarUsuario(usuarios, usuarioPendiente.getEmail(),usuarioPendiente.getPassword()); \n    return usuarioLogeado;\n    }\n\n    @RequestMapping(value=\"/verPerfilUsuario\", method = RequestMethod.GET)\n    public @ResponseBody Usuario verPerfilUsuario(Usuario usuarioAMostrar){\n        usuarioAMostrar.getNombre();\n        usuarioAMostrar.getApellidos();\n        usuarioAMostrar.getCiudad();\n        usuarioAMostrar.getEmail();\n        usuarioAMostrar.getPassword();\n    return usuarioAMostrar;\n    }\n\n    @RequestMapping(value=\"/loginAdministrador\" ,method = RequestMethod.POST)\n    public  @ResponseBody Administrador loginAdministrador(@RequestBody Administrador administradorPendiente){\n        Administrador administradorLogeado = null;\n        List &lt;Administrador&gt; administradores = administradorDao.findAll();\n        administradorLogeado = comprobarAdministrador(administradores, administradorPendiente.getEmail(),administradorPendiente.getPassword());\n        return administradorLogeado;\n    }\n\n    private Usuario comprobarUsuario( List&lt;Usuario&gt; usuarios, String email, String password) {\n            Usuario u = null;\n            for (Usuario usuario : usuarios) {\n                    if (email.equals(usuario.getEmail()) &amp;&amp; password.equals(usuario.getPassword())){\n                            u = usuario;\n                            break;\n                            }\n                    }\n            return u;\n        } \n\n    private Administrador comprobarAdministrador( List&lt;Administrador&gt; administradores, String email, String password) {\n        Administrador ad = null;\n        for (Administrador administrador : administradores) {\n                if (email.equals(administrador.getEmail()) &amp;&amp; password.equals(administrador.getPassword())){\n                        ad = administrador;\n                        //break;\n                        }\n                }\n        return ad;\n    }\n}\n</code></pre>\n\n<p><strong>Application.properties</strong></p>\n\n<pre><code>server.port=8010\nspring.datasource.url=jdbc:mysql://localhost:3306/tiw\nspring.datasource.username=root\nspring.datasource.password=admin\nspring.datasource.driver-class-name = com.mysql.jdbc.Driver\n\nspring.jpa.hibernate.ddl-auto = update\n</code></pre>\n\n<p><strong>Entity</strong></p>\n\n<pre><code>package es.uc3m.tiw.dominios;\n\nimport java.io.Serializable;\n\nimport javax.persistence.Column;\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.Table;\n\n@Entity\n@Table(name=\"USUARIOS\")\npublic class Usuario implements Serializable {\n\n        private static final long serialVersionUID = 1L;\n\n        @Id\n        @GeneratedValue(strategy=GenerationType.AUTO)\n        private long id;\n        @Column(length = 25)\n        private String nombre;\n        @Column(length = 25)\n        private String apellidos;\n        @Column(length = 25)\n        private String ciudad;\n        @Column(length = 25, nullable = false, unique = true)\n        private String email;\n        @Column(length = 25, nullable = false)\n        private String password;\n\n\n        public Usuario() {\n        }\n\n        public Usuario(long id, String nombre, String apellidos, String ciudad, String password, String email) {\n            super();\n            this.id = id;\n            this.nombre = nombre;\n            this.apellidos = apellidos;\n            this.ciudad = ciudad;\n            this.password = password;\n            this.email = email;\n        }\n\n        public long getId() {\n            return id;\n        }\n        public void setId(long id) {\n            this.id = id;\n        }       \n        public String getNombre() {\n            return nombre;\n        }       \n        public void setNombre(String nombre) {\n            this.nombre = nombre;\n        }       \n        public String getApellidos() {\n            return apellidos;\n        }   \n        public void setApellidos(String apellidos) {\n            this.apellidos = apellidos;\n        }       \n        public String getCiudad() {\n            return ciudad;\n        }\n        public void setCiudad(String ciudad) {\n            this.ciudad = ciudad;\n        }       \n        public String getPassword() {\n            return password;\n        }       \n        public void setPassword(String password) {\n            this.password = password;\n        }   \n        public String getEmail() {\n            return email;\n        }   \n        public void setEmail(String email) {\n            this.email = email;\n        }\n}\n</code></pre>\n\n<p><strong>Here is my main</strong></p>\n\n<pre><code>package es.uc3m.tiw;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class ClienteSpringApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(ClienteSpringApplication.class, args);\n    }\n}\n</code></pre>\n"},{"tags":["java","logging","slf4j","javalin"],"comments":[{"owner":{"account_id":235131,"reputation":2628,"user_id":501739,"accept_rate":67,"display_name":"Jolta"},"score":0,"creation_date":1555054088,"post_id":55515952,"comment_id":97982356,"body_markdown":"I think this question is not specific to the Javalin library, so I added the Slf4j and Java tags here.","body":"I think this question is not specific to the Javalin library, so I added the Slf4j and Java tags here."},{"owner":{"account_id":2370379,"reputation":2150,"user_id":2075134,"accept_rate":78,"display_name":"MrDumb"},"score":0,"creation_date":1560764623,"post_id":55515952,"comment_id":99829351,"body_markdown":"if you mean path of the file where your log should be stored. Then you should fallow this [link](https://howtodoinjava.com/log4j2/log4j-2-xml-configuration-example/). if this is your requirement and link is not clear let me know. I&#39;ll write you an answer","body":"if you mean path of the file where your log should be stored. Then you should fallow this <a href=\"https://howtodoinjava.com/log4j2/log4j-2-xml-configuration-example/\" rel=\"nofollow noreferrer\">link</a>. if this is your requirement and link is not clear let me know. I&#39;ll write you an answer"},{"owner":{"account_id":371476,"reputation":35019,"user_id":720030,"display_name":"karmakaze"},"score":0,"creation_date":1572493915,"post_id":55515952,"comment_id":103579904,"body_markdown":"The link provided by @MrDumb is if you are using Javalin with `Log4j`. Javalin uses `Slf4j` which in turn can use different log implementations. Other common ones are `logback` and `slf4j-simple`.","body":"The link provided by @MrDumb is if you are using Javalin with <code>Log4j</code>. Javalin uses <code>Slf4j</code> which in turn can use different log implementations. Other common ones are <code>logback</code> and <code>slf4j-simple</code>."}],"answers":[{"tags":[],"owner":{"account_id":7799336,"reputation":48,"user_id":5899345,"display_name":"zugazagoitia"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691698414,"creation_date":1691698414,"answer_id":76879037,"question_id":55515952,"body_markdown":"Javalin does not come with a specific logger, you should check the documentation of the logger you&#39;re using to configure it. \r\n\r\nYou can also check the [Javalin tutorial on logging](https://javalin.io/tutorials/javalin-logging).\r\n","title":"How to give log path in javalin","body":"<p>Javalin does not come with a specific logger, you should check the documentation of the logger you're using to configure it.</p>\n<p>You can also check the <a href=\"https://javalin.io/tutorials/javalin-logging\" rel=\"nofollow noreferrer\">Javalin tutorial on logging</a>.</p>\n"}],"owner":{"account_id":2563085,"reputation":21,"user_id":2223809,"display_name":"purnachand.kodali"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":360,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1691698414,"creation_date":1554380660,"question_id":55515952,"body_markdown":"    public class App {\r\n\t    //private static final Logger logger = LoggerFactory.getLogger(App.class);\r\n\t    private static Logger logger = LoggerFactory.getLogger(App.class.getName());\r\n\t    private static ObjectMapper mapper = new ObjectMapper();\r\n\r\n\t    public static void main(String[] args) {\r\n\t\t    Integer port = args.length&gt;0?Integer.parseInt(args[0]): 7000;\t\t\r\n\t\t    Javalin app = Javalin.create().port(port).start();\t\t\r\n\t\t\r\n\t\t    app.get(&quot;/&quot;, ctx -&gt; ctx.result(&quot;service working&quot;));\t\t\r\n\t\t    app.post(&quot;/mhbwebservice&quot;, handler);\t\t\r\n\t    }\r\n    }\r\n\r\n\r\nCan you please advice on how to give log path in javalin framework","title":"How to give log path in javalin","body":"<pre><code>public class App {\n    //private static final Logger logger = LoggerFactory.getLogger(App.class);\n    private static Logger logger = LoggerFactory.getLogger(App.class.getName());\n    private static ObjectMapper mapper = new ObjectMapper();\n\n    public static void main(String[] args) {\n        Integer port = args.length&gt;0?Integer.parseInt(args[0]): 7000;       \n        Javalin app = Javalin.create().port(port).start();      \n\n        app.get(\"/\", ctx -&gt; ctx.result(\"service working\"));     \n        app.post(\"/mhbwebservice\", handler);        \n    }\n}\n</code></pre>\n\n<p>Can you please advice on how to give log path in javalin framework</p>\n"},{"tags":["java","hashmap"],"comments":[{"owner":{"account_id":277416,"reputation":681878,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":3,"creation_date":1514563001,"post_id":48025072,"comment_id":83019567,"body_markdown":"Use a Map&lt;String, YourClass&gt;, where YourClass has a name, an ip, and a cumulatedDuration. Add an `addDuration(int duration)` method to the class to add a duration to the cumulated duration. Java is an OO language. Use classes. This will make your code much clearer (and faster, too).","body":"Use a Map&lt;String, YourClass&gt;, where YourClass has a name, an ip, and a cumulatedDuration. Add an <code>addDuration(int duration)</code> method to the class to add a duration to the cumulated duration. Java is an OO language. Use classes. This will make your code much clearer (and faster, too)."},{"owner":{"account_id":12426753,"reputation":11,"user_id":9051077,"display_name":"Anton Stoychev"},"score":0,"creation_date":1514563333,"post_id":48025072,"comment_id":83019707,"body_markdown":"Thanks for your advice but the aim is to solve without classes and I am trying :)","body":"Thanks for your advice but the aim is to solve without classes and I am trying :)"}],"answers":[{"tags":[],"owner":{"account_id":69707,"reputation":41791,"user_id":202694,"accept_rate":88,"display_name":"Pace"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1514562930,"creation_date":1514562930,"answer_id":48025102,"question_id":48025072,"body_markdown":"    int oldDuration = users.get(name).get(ip);\r\n    int totalDuration = oldDuration + duration;\r\n    users.get(name).put(ip, totalDuration);","title":"How to sum value in same key HashMap Java?","body":"<pre><code>int oldDuration = users.get(name).get(ip);\nint totalDuration = oldDuration + duration;\nusers.get(name).put(ip, totalDuration);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2452751,"reputation":786,"user_id":2138602,"accept_rate":62,"display_name":"Jesse Nelson"},"score":0,"creation_date":1514564301,"post_id":48025224,"comment_id":83020151,"body_markdown":"Not sure of the setup here but if there is ever the same name and different ip this will throw a null pointer","body":"Not sure of the setup here but if there is ever the same name and different ip this will throw a null pointer"},{"owner":{"account_id":12426753,"reputation":11,"user_id":9051077,"display_name":"Anton Stoychev"},"score":0,"creation_date":1514564497,"post_id":48025224,"comment_id":83020248,"body_markdown":"Yes you are right &quot;Exception in thread &quot;main&quot; java.lang.NullPointerException&quot;","body":"Yes you are right &quot;Exception in thread &quot;main&quot; java.lang.NullPointerException&quot;"},{"owner":{"account_id":2452751,"reputation":786,"user_id":2138602,"accept_rate":62,"display_name":"Jesse Nelson"},"score":0,"creation_date":1514564543,"post_id":48025224,"comment_id":83020269,"body_markdown":"I have an answer above that should work for you in this case","body":"I have an answer above that should work for you in this case"}],"tags":[],"owner":{"account_id":9833659,"reputation":77,"user_id":7284669,"display_name":"Mykyta Lebid"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1514563585,"creation_date":1514563585,"answer_id":48025224,"question_id":48025072,"body_markdown":"I believe it&#39;d be your answer\r\nTry this:\r\n\r\n    for (int i = 0; i &lt; n; i++) {\r\n            String[] input = scanner.readLine().split(&quot;\\\\s+&quot;);\r\n            String ip = input[0];\r\n            String name = input[1];\r\n            int duration = Integer.parseInt(input[2]);\r\n            if (!users.containsKey(name)) {\r\n                users.put(name, new LinkedHashMap&lt;&gt;());\r\n                users.get(name).put(ip, duration);\r\n            } else {\r\n                LinkedHashMap&lt;String, Integer&gt; user = users.get(name);\r\n                Integer userDuration = user.get(ip);\r\n                user.put(ip, userDuration + duration);\r\n            }\r\n        }","title":"How to sum value in same key HashMap Java?","body":"<p>I believe it'd be your answer\nTry this:</p>\n\n<pre><code>for (int i = 0; i &lt; n; i++) {\n        String[] input = scanner.readLine().split(\"\\\\s+\");\n        String ip = input[0];\n        String name = input[1];\n        int duration = Integer.parseInt(input[2]);\n        if (!users.containsKey(name)) {\n            users.put(name, new LinkedHashMap&lt;&gt;());\n            users.get(name).put(ip, duration);\n        } else {\n            LinkedHashMap&lt;String, Integer&gt; user = users.get(name);\n            Integer userDuration = user.get(ip);\n            user.put(ip, userDuration + duration);\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2452751,"reputation":786,"user_id":2138602,"accept_rate":62,"display_name":"Jesse Nelson"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1691698248,"creation_date":1514564170,"answer_id":48025344,"question_id":48025072,"body_markdown":"    LinkedHashMap&lt;String, LinkedHashMap&lt;String, Integer&gt;&gt; users = new LinkedHashMap&lt;&gt;();\r\n        for (int i = 0; i &lt; n; i++) {\r\n            String[] input = scanner.readLine().split(&quot;\\\\s+&quot;);\r\n            String ip = input[0];\r\n            String name = input[1];\r\n            int duration = Integer.parseInt(input[2]);\r\n            LinkedHashMap&lt;String, Integer&gt; ipDurations= users.get(name);\r\n            \r\n            if (ipDurations== null) {\r\n                ipDurations= new LinkedHashMap&lt;&gt;();\r\n                ipDurations.put(ip, duration);\r\n                users.put(name, ipDurations);\r\n            } else {\r\n                Integer cummulativeDuration = ipDurations.get(ip);\r\n                if (cummulativeDuration == null) {\r\n                   cuumulativeDuration = 0;\r\n                   ipDurations.put(ip, cummulativeDuration);\r\n                }\r\n                cummulativeDuration += duration;\r\n              }\r\n         }","title":"How to sum value in same key HashMap Java?","body":"<pre><code>LinkedHashMap&lt;String, LinkedHashMap&lt;String, Integer&gt;&gt; users = new LinkedHashMap&lt;&gt;();\n    for (int i = 0; i &lt; n; i++) {\n        String[] input = scanner.readLine().split(&quot;\\\\s+&quot;);\n        String ip = input[0];\n        String name = input[1];\n        int duration = Integer.parseInt(input[2]);\n        LinkedHashMap&lt;String, Integer&gt; ipDurations= users.get(name);\n        \n        if (ipDurations== null) {\n            ipDurations= new LinkedHashMap&lt;&gt;();\n            ipDurations.put(ip, duration);\n            users.put(name, ipDurations);\n        } else {\n            Integer cummulativeDuration = ipDurations.get(ip);\n            if (cummulativeDuration == null) {\n               cuumulativeDuration = 0;\n               ipDurations.put(ip, cummulativeDuration);\n            }\n            cummulativeDuration += duration;\n          }\n     }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10491045,"reputation":559,"user_id":7732917,"display_name":"Oleg Zinoviev"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1514564899,"creation_date":1514564899,"answer_id":48025502,"question_id":48025072,"body_markdown":"Unfortunately I cannot add full snippet due I type from phone, but I beleive all you need is stream and collect with merge if you need initial map later, or just merge instead put if you dont","title":"How to sum value in same key HashMap Java?","body":"<p>Unfortunately I cannot add full snippet due I type from phone, but I beleive all you need is stream and collect with merge if you need initial map later, or just merge instead put if you dont</p>\n"},{"comments":[{"owner":{"account_id":12426753,"reputation":11,"user_id":9051077,"display_name":"Anton Stoychev"},"score":1,"creation_date":1514578371,"post_id":48027521,"comment_id":83025750,"body_markdown":"You are god, I was waiting exactly about this answer. Simply I wanna sum by names not IP because one user can in by different IPs. Big thanks!","body":"You are god, I was waiting exactly about this answer. Simply I wanna sum by names not IP because one user can in by different IPs. Big thanks!"}],"tags":[],"owner":{"account_id":2111403,"reputation":33698,"user_id":1876620,"accept_rate":94,"display_name":"fps"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1514575974,"creation_date":1514575974,"answer_id":48027521,"question_id":48025072,"body_markdown":"You can do it by using [`Map.computeIfAbsent`][1] in the outer map, along with [`Map.merge`][2] in the inner maps:\r\n\r\n    Map&lt;String, Map&lt;String, Integer&gt;&gt; users = new LinkedHashMap&lt;&gt;();\r\n\r\n    for (int i = 0; i &lt; n; i++) {\r\n        String[] input = scanner.readLine().split(&quot;\\\\s+&quot;);\r\n        String ip = input[0];\r\n        String name = input[1];\r\n        int duration = Integer.parseInt(input[2]);\r\n\r\n        users.computeIfAbsent(name, k -&gt; new LinkedHashMap&lt;&gt;())\r\n            .merge(ip, duration, Integer::sum);\r\n    }\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/9/docs/api/java/util/Map.html#computeIfAbsent-K-java.util.function.Function-\r\n  [2]: https://docs.oracle.com/javase/9/docs/api/java/util/Map.html#merge-K-V-java.util.function.BiFunction-","title":"How to sum value in same key HashMap Java?","body":"<p>You can do it by using <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/Map.html#computeIfAbsent-K-java.util.function.Function-\" rel=\"nofollow noreferrer\"><code>Map.computeIfAbsent</code></a> in the outer map, along with <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/Map.html#merge-K-V-java.util.function.BiFunction-\" rel=\"nofollow noreferrer\"><code>Map.merge</code></a> in the inner maps:</p>\n\n<pre><code>Map&lt;String, Map&lt;String, Integer&gt;&gt; users = new LinkedHashMap&lt;&gt;();\n\nfor (int i = 0; i &lt; n; i++) {\n    String[] input = scanner.readLine().split(\"\\\\s+\");\n    String ip = input[0];\n    String name = input[1];\n    int duration = Integer.parseInt(input[2]);\n\n    users.computeIfAbsent(name, k -&gt; new LinkedHashMap&lt;&gt;())\n        .merge(ip, duration, Integer::sum);\n}\n</code></pre>\n"}],"owner":{"account_id":12426753,"reputation":11,"user_id":9051077,"display_name":"Anton Stoychev"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2387,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":5,"score":1,"last_activity_date":1691698248,"creation_date":1514562808,"question_id":48025072,"body_markdown":"I need to sum the value in same key not just to replace? Thanks.\r\n\r\n        LinkedHashMap&lt;String, LinkedHashMap&lt;String, Integer&gt;&gt; users = new LinkedHashMap&lt;&gt;();\r\n        for (int i = 0; i &lt; n; i++) {\r\n            String[] input = scanner.readLine().split(&quot;\\\\s+&quot;);\r\n            String ip = input[0];\r\n            String name = input[1];\r\n            int duration = Integer.parseInt(input[2]);\r\n            if (!users.containsKey(name)) {\r\n                users.put(name, new LinkedHashMap&lt;&gt;());\r\n                users.get(name).put(ip,duration);\r\n            } else {\r\n                users.get(name).put(ip,duration);\r\n            }\r\n        }","title":"How to sum value in same key HashMap Java?","body":"<p>I need to sum the value in same key not just to replace? Thanks.</p>\n\n<pre><code>    LinkedHashMap&lt;String, LinkedHashMap&lt;String, Integer&gt;&gt; users = new LinkedHashMap&lt;&gt;();\n    for (int i = 0; i &lt; n; i++) {\n        String[] input = scanner.readLine().split(\"\\\\s+\");\n        String ip = input[0];\n        String name = input[1];\n        int duration = Integer.parseInt(input[2]);\n        if (!users.containsKey(name)) {\n            users.put(name, new LinkedHashMap&lt;&gt;());\n            users.get(name).put(ip,duration);\n        } else {\n            users.get(name).put(ip,duration);\n        }\n    }\n</code></pre>\n"},{"tags":["java","spring","jpa","concurrency"],"comments":[{"owner":{"account_id":395375,"reputation":7111,"user_id":3591528,"display_name":"teppic"},"score":0,"creation_date":1551145699,"post_id":54875853,"comment_id":96524469,"body_markdown":"What does the conflict check look like? What database are you using?","body":"What does the conflict check look like? What database are you using?"},{"owner":{"account_id":3823175,"reputation":521,"user_id":3170736,"accept_rate":50,"display_name":"user3170736"},"score":0,"creation_date":1551147125,"post_id":54875853,"comment_id":96524779,"body_markdown":"&quot;SELECT COUNT(*) WHERE time == ?&quot;, Databases are H2 and MySQL","body":"&quot;SELECT COUNT(*) WHERE time == ?&quot;, Databases are H2 and MySQL"},{"owner":{"account_id":395375,"reputation":7111,"user_id":3591528,"display_name":"teppic"},"score":0,"creation_date":1551148982,"post_id":54875853,"comment_id":96525122,"body_markdown":"That does suggest that you could simply add a unique index on `time`. You&#39;d have to handle the exceptions raised in response to duplicate inserts.","body":"That does suggest that you could simply add a unique index on <code>time</code>. You&#39;d have to handle the exceptions raised in response to duplicate inserts."},{"owner":{"account_id":3823175,"reputation":521,"user_id":3170736,"accept_rate":50,"display_name":"user3170736"},"score":0,"creation_date":1551149302,"post_id":54875853,"comment_id":96525188,"body_markdown":"I would need to do it on a series of compound fields. Sorry, I am using mostly sudo code. I dont believe unique index is an option here. It had been considered.","body":"I would need to do it on a series of compound fields. Sorry, I am using mostly sudo code. I dont believe unique index is an option here. It had been considered."},{"owner":{"account_id":395375,"reputation":7111,"user_id":3591528,"display_name":"teppic"},"score":0,"creation_date":1551149500,"post_id":54875853,"comment_id":96525238,"body_markdown":"Can you add more details around the constraints to your question? A database constraint is possible, and is probably the best option.","body":"Can you add more details around the constraints to your question? A database constraint is possible, and is probably the best option."},{"owner":{"account_id":3823175,"reputation":521,"user_id":3170736,"accept_rate":50,"display_name":"user3170736"},"score":0,"creation_date":1551246324,"post_id":54875853,"comment_id":96565600,"body_markdown":"I added some DB details. I suppose I could make a unique constraint of start_time, locationid, and userid which would basically mean the user can&#39;t have more than one reservation a given location with the same start. The problem is the duration. If the start times are slightly different (say 5 min) and the duration (say 35 min) causes overlap (reservation = start_time+duration). Honestly what I think would work is lock table, check conflict, insert, release lock but I cant seem to find anything that says that is feasible.","body":"I added some DB details. I suppose I could make a unique constraint of start_time, locationid, and userid which would basically mean the user can&#39;t have more than one reservation a given location with the same start. The problem is the duration. If the start times are slightly different (say 5 min) and the duration (say 35 min) causes overlap (reservation = start_time+duration). Honestly what I think would work is lock table, check conflict, insert, release lock but I cant seem to find anything that says that is feasible."},{"owner":{"account_id":11583471,"reputation":17797,"user_id":8486518,"display_name":"Mạnh Quyết Nguyễn"},"score":0,"creation_date":1551411870,"post_id":54875853,"comment_id":96639058,"body_markdown":"@user3170736 why do your system support user to make two reservation in the same location and start time?","body":"@user3170736 why do your system support user to make two reservation in the same location and start time?"},{"owner":{"account_id":3823175,"reputation":521,"user_id":3170736,"accept_rate":50,"display_name":"user3170736"},"score":0,"creation_date":1551465463,"post_id":54875853,"comment_id":96663706,"body_markdown":"@MạnhQuyếtNguyễn The location is a table. It supports one user per time. These are the system requirements and this comment is not helpful.","body":"@MạnhQuyếtNguyễn The location is a table. It supports one user per time. These are the system requirements and this comment is not helpful."},{"owner":{"account_id":3823175,"reputation":521,"user_id":3170736,"accept_rate":50,"display_name":"user3170736"},"score":0,"creation_date":1551465554,"post_id":54875853,"comment_id":96663744,"body_markdown":"@NathanHughes台湾不在中国 We are using innoDB and JPA with the Transactional annotation. Row-level locking isnt sufficient here since we arent worried about row data collision. We are worried about two rows of data overlapping.","body":"@NathanHughes台湾不在中国 We are using innoDB and JPA with the Transactional annotation. Row-level locking isnt sufficient here since we arent worried about row data collision. We are worried about two rows of data overlapping."},{"owner":{"account_id":2443099,"reputation":9128,"user_id":2131074,"accept_rate":75,"display_name":"GPI"},"score":1,"creation_date":1551694961,"post_id":54875853,"comment_id":96720300,"body_markdown":"What about replacing check then insert, by insert, commit, check then keep or delete ? (The commit being necessary to insure serial visibility).","body":"What about replacing check then insert, by insert, commit, check then keep or delete ? (The commit being necessary to insure serial visibility)."},{"owner":{"account_id":5433910,"reputation":10649,"user_id":4323935,"accept_rate":69,"display_name":"dpr"},"score":0,"creation_date":1558348761,"post_id":54875853,"comment_id":99058831,"body_markdown":"If one of the answers below fixes your issue, you should accept it (click the check mark next to the appropriate answer). That does two things. It lets everyone know your issue has been resolved to your satisfaction, and it gives the person that helps you credit for the assist. [See here](http://meta.stackexchange.com/a/5235) for a full explanation.","body":"If one of the answers below fixes your issue, you should accept it (click the check mark next to the appropriate answer). That does two things. It lets everyone know your issue has been resolved to your satisfaction, and it gives the person that helps you credit for the assist. <a href=\"http://meta.stackexchange.com/a/5235\">See here</a> for a full explanation."}],"answers":[{"comments":[{"owner":{"display_name":"user3099140"},"score":0,"creation_date":1551964639,"post_id":54980640,"comment_id":96840056,"body_markdown":"The database should be doing this work, not the application.","body":"The database should be doing this work, not the application."},{"owner":{"account_id":5433910,"reputation":10649,"user_id":4323935,"accept_rate":69,"display_name":"dpr"},"score":0,"creation_date":1551964748,"post_id":54980640,"comment_id":96840126,"body_markdown":"@JonathanR, the OP is asking for a distributed JPA based locking mechansim and that&#39;s exactly what my answer provided. Maybe it&#39;s not possible for the OP to execute all involved calls in a DB transaction?","body":"@JonathanR, the OP is asking for a distributed JPA based locking mechansim and that&#39;s exactly what my answer provided. Maybe it&#39;s not possible for the OP to execute all involved calls in a DB transaction?"}],"tags":[],"owner":{"account_id":5433910,"reputation":10649,"user_id":4323935,"accept_rate":69,"display_name":"dpr"},"comment_count":2,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1551694521,"creation_date":1551693153,"answer_id":54980640,"question_id":54875853,"body_markdown":"Implementing something like this from scratch is no rocket science but maybe you may want to take a look at this GitHub project: https://github.com/alturkovic/distributed-lock\r\n\r\nI&#39;m neither involved in this project nor currently using it but it looks very promising. You simply need to create a Spring configuration with `EnableJdbcDistributedLock`:\r\n\r\n``` lang-java\r\n@Configuration\r\n@EnableJdbcDistributedLock\r\npublic class LockConfiguration {\r\n}\r\n```\r\n\r\nAnd create the needed database table:\r\n\r\n``` lang-sql\r\ncreate table lock (\r\n  id int not null auto_increment primary key,\r\n  lock_key varchar(255) unique,\r\n  token varchar(255),\r\n  expireAt timestamp,\r\n);\r\n```\r\n\r\nOnce this is in place you can sychronize method calls in a distributed environment by a simple annotation (taken from the project&#39;s examples):\r\n\r\n``` lang-java\r\n@JdbcLocked(expression = &quot;#name&quot;)\r\npublic String sayHello(final String name) {\r\n  return &quot;Hello &quot; + name + &quot;!&quot;;\r\n}\r\n```\r\n\r\n\r\n","title":"Java - Distributed JPA Lock For Reservation","body":"<p>Implementing something like this from scratch is no rocket science but maybe you may want to take a look at this GitHub project: <a href=\"https://github.com/alturkovic/distributed-lock\" rel=\"noreferrer\">https://github.com/alturkovic/distributed-lock</a></p>\n\n<p>I'm neither involved in this project nor currently using it but it looks very promising. You simply need to create a Spring configuration with <code>EnableJdbcDistributedLock</code>:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableJdbcDistributedLock\npublic class LockConfiguration {\n}\n</code></pre>\n\n<p>And create the needed database table:</p>\n\n<pre class=\"lang-sql prettyprint-override\"><code>create table lock (\n  id int not null auto_increment primary key,\n  lock_key varchar(255) unique,\n  token varchar(255),\n  expireAt timestamp,\n);\n</code></pre>\n\n<p>Once this is in place you can sychronize method calls in a distributed environment by a simple annotation (taken from the project's examples):</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@JdbcLocked(expression = \"#name\")\npublic String sayHello(final String name) {\n  return \"Hello \" + name + \"!\";\n}\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user3099140"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1551894723,"creation_date":1551894723,"answer_id":55029356,"question_id":54875853,"body_markdown":"The database should be handling this. You can either:\r\n\r\n* use locking reads. `SELECT FOR UPDATE` will prevent any rows you&#39;re reading (e.g. in your `COUNT(*)` query) from being written to. See https://dev.mysql.com/doc/refman/8.0/en/innodb-locking-reads.html\r\n* change the database&#39;s isolation level. See https://dev.mysql.com/doc/refman/8.0/en/innodb-transaction-isolation-levels.html\r\n\r\nYou can test your changes locally with a command-line SQL client: open two concurrent transactions, and try different ways of interleaving the `SELECT` and the `INSERT`.","title":"Java - Distributed JPA Lock For Reservation","body":"<p>The database should be handling this. You can either:</p>\n\n<ul>\n<li>use locking reads. <code>SELECT FOR UPDATE</code> will prevent any rows you're reading (e.g. in your <code>COUNT(*)</code> query) from being written to. See <a href=\"https://dev.mysql.com/doc/refman/8.0/en/innodb-locking-reads.html\" rel=\"nofollow noreferrer\">https://dev.mysql.com/doc/refman/8.0/en/innodb-locking-reads.html</a></li>\n<li>change the database's isolation level. See <a href=\"https://dev.mysql.com/doc/refman/8.0/en/innodb-transaction-isolation-levels.html\" rel=\"nofollow noreferrer\">https://dev.mysql.com/doc/refman/8.0/en/innodb-transaction-isolation-levels.html</a></li>\n</ul>\n\n<p>You can test your changes locally with a command-line SQL client: open two concurrent transactions, and try different ways of interleaving the <code>SELECT</code> and the <code>INSERT</code>.</p>\n"},{"tags":[],"owner":{"account_id":3084600,"reputation":5860,"user_id":2612030,"display_name":"ewramner"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1551969730,"creation_date":1551969730,"answer_id":55046460,"question_id":54875853,"body_markdown":"I think the logical thing would be to lock the location. If I understand the domain correctly you are reserving a specific location (such as a room) for a time slot given by start time and duration? In that case you probably have an entity for location already. If not you can perhaps create one and add a matching table. The code would then be simple:\r\n\r\n 1. Get a pessimistic lock on the location from the request with JPA\r\n 2. Check the database for conflicts\r\n 3. Insert the new reservation\r\n 4. Commit\r\n\r\nA table lock will really hurt scalability, but locking a specific location should work.","title":"Java - Distributed JPA Lock For Reservation","body":"<p>I think the logical thing would be to lock the location. If I understand the domain correctly you are reserving a specific location (such as a room) for a time slot given by start time and duration? In that case you probably have an entity for location already. If not you can perhaps create one and add a matching table. The code would then be simple:</p>\n\n<ol>\n<li>Get a pessimistic lock on the location from the request with JPA</li>\n<li>Check the database for conflicts</li>\n<li>Insert the new reservation</li>\n<li>Commit</li>\n</ol>\n\n<p>A table lock will really hurt scalability, but locking a specific location should work.</p>\n"}],"owner":{"account_id":3823175,"reputation":521,"user_id":3170736,"accept_rate":50,"display_name":"user3170736"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3483,"favorite_count":0,"down_vote_count":1,"up_vote_count":12,"answer_count":3,"score":11,"last_activity_date":1691698212,"creation_date":1551134775,"question_id":54875853,"body_markdown":"I am working on a legacy system that allows reservation scheduling. The application is stateless REST and designed to be horizontally scaled. The database, however, is shared between all instances. Before I get a lecture on design and scale, it&#39;s not mine - have to make the best of a bad situation (or codebase). Recently we have seen an issue where there are duplicate reservations. I believe it is because of the nature of request response threads. The process currently is, receive request, check database for conflicting time reservation, if none, insert. Depending on time between reads and insert it&#39;s possible that both get inserted. Scenario seems to look like this:\r\n\r\n    |------|-------|-------|\r\n    R1     C1      I1     RSP\r\n    \r\n    -|--------|-------|---------|\r\n    R2       C2     I2   RSP\r\n\r\n\r\nWhere R = Request, C = DB Check, I = Insert.\r\n\r\nSo I believe I could use the @Synchronized annotation which would force all threads to be ordered. The problem comes with the fact that there are multiple instances running so that wont work overall instances. Pessimistic or Optimistic reads and writes dont seem to apply since we are trying to do a read and write combo unless I completely misunderstand. Any thoughts to handle this problem across scale? Would prefer to handle it in java via a table lock or something similar rather then add additional services (kafka, redis, etc). \r\n\r\n**EDIT**: the database looks something like this and using h2 in dev and mysql in production.\r\n\r\n     id |  start_time  | locationid | postingid | userid | duration\r\n","title":"Java - Distributed JPA Lock For Reservation","body":"<p>I am working on a legacy system that allows reservation scheduling. The application is stateless REST and designed to be horizontally scaled. The database, however, is shared between all instances. Before I get a lecture on design and scale, it's not mine - have to make the best of a bad situation (or codebase). Recently we have seen an issue where there are duplicate reservations. I believe it is because of the nature of request response threads. The process currently is, receive request, check database for conflicting time reservation, if none, insert. Depending on time between reads and insert it's possible that both get inserted. Scenario seems to look like this:</p>\n<pre><code>|------|-------|-------|\nR1     C1      I1     RSP\n\n-|--------|-------|---------|\nR2       C2     I2   RSP\n</code></pre>\n<p>Where R = Request, C = DB Check, I = Insert.</p>\n<p>So I believe I could use the @Synchronized annotation which would force all threads to be ordered. The problem comes with the fact that there are multiple instances running so that wont work overall instances. Pessimistic or Optimistic reads and writes dont seem to apply since we are trying to do a read and write combo unless I completely misunderstand. Any thoughts to handle this problem across scale? Would prefer to handle it in java via a table lock or something similar rather then add additional services (kafka, redis, etc).</p>\n<p><strong>EDIT</strong>: the database looks something like this and using h2 in dev and mysql in production.</p>\n<pre><code> id |  start_time  | locationid | postingid | userid | duration\n</code></pre>\n"},{"tags":["java","spring","logging","logback","slf4j"],"comments":[{"owner":{"account_id":477214,"reputation":5260,"user_id":888580,"display_name":"lane.maxwell"},"score":1,"creation_date":1691702103,"post_id":76878984,"comment_id":135531166,"body_markdown":"Is there any chance you have a property named `debug` in your application.properties or application.yml set to true?  Or the loggers can also be configured through the `logging.level` properties.  There aren&#39;t enough details in your question to answer effectively.","body":"Is there any chance you have a property named <code>debug</code> in your application.properties or application.yml set to true?  Or the loggers can also be configured through the <code>logging.level</code> properties.  There aren&#39;t enough details in your question to answer effectively."},{"owner":{"account_id":326480,"reputation":368,"user_id":5047819,"display_name":"Anders Lindgren"},"score":0,"creation_date":1691702232,"post_id":76878984,"comment_id":135531183,"body_markdown":"Spring is using it application.properties (or yml) file to set the log levels. `logging.level.your.package.here=INFO`. See https://docs.spring.io/spring-boot/docs/current/reference/html/howto.html#howto.logging","body":"Spring is using it application.properties (or yml) file to set the log levels. <code>logging.level.your.package.here=INFO</code>. See <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/howto.html#howto.logging\" rel=\"nofollow noreferrer\">docs.spring.io/spring-boot/docs/current/reference/html/&hellip;</a>"},{"owner":{"account_id":477214,"reputation":5260,"user_id":888580,"display_name":"lane.maxwell"},"score":0,"creation_date":1691726282,"post_id":76878984,"comment_id":135533403,"body_markdown":"@AndersLindgren Correct you are, but this can be overridden in the application&#39;s property files.  For instance, if the OP has the property, `logging.leve.org.springframework`, set to DEBUG in their properties, this would explain why they&#39;re still getting the debug logs.","body":"@AndersLindgren Correct you are, but this can be overridden in the application&#39;s property files.  For instance, if the OP has the property, <code>logging.leve.org.springframework</code>, set to DEBUG in their properties, this would explain why they&#39;re still getting the debug logs."}],"owner":{"account_id":24561597,"reputation":21,"user_id":18469257,"display_name":"alpha"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691697892,"creation_date":1691697892,"question_id":76878984,"body_markdown":"i cannot turn off debug logs in console even after setting in configuration like this-&gt;\r\n\r\n```\r\n&lt;configuration&gt;\r\n    &lt;appender name=&quot;CONSOLE&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\r\n        &lt;encoder&gt;\r\n            &lt;pattern&gt;%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n&lt;/pattern&gt;\r\n        &lt;/encoder&gt;\r\n    &lt;/appender&gt;\r\n    &lt;root level=&quot;INFO&quot;&gt;\r\n        &lt;appender-ref ref=&quot;CONSOLE&quot;/&gt;\r\n    &lt;/root&gt;\r\n&lt;/configuration&gt;\r\n\r\n```\r\ni have added slf4j api and lockback classic implementation, im using spring core, aop and context dependencies too. \r\n\r\n```\r\n&lt;dependency&gt;\r\n        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n        &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n        &lt;version&gt;2.0.7&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\r\n        &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\r\n        &lt;version&gt;1.4.11&lt;/version&gt;\r\n        &lt;scope&gt;compile&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n```\r\n\r\n\r\ntried to remove debug logs but couldnt","title":"Can&#39;t turn off debug logs in console even after setting configuration","body":"<p>i cannot turn off debug logs in console even after setting in configuration like this-&gt;</p>\n<pre><code>&lt;configuration&gt;\n    &lt;appender name=&quot;CONSOLE&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\n        &lt;encoder&gt;\n            &lt;pattern&gt;%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n&lt;/pattern&gt;\n        &lt;/encoder&gt;\n    &lt;/appender&gt;\n    &lt;root level=&quot;INFO&quot;&gt;\n        &lt;appender-ref ref=&quot;CONSOLE&quot;/&gt;\n    &lt;/root&gt;\n&lt;/configuration&gt;\n\n</code></pre>\n<p>i have added slf4j api and lockback classic implementation, im using spring core, aop and context dependencies too.</p>\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n        &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n        &lt;version&gt;2.0.7&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\n        &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\n        &lt;version&gt;1.4.11&lt;/version&gt;\n        &lt;scope&gt;compile&lt;/scope&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>tried to remove debug logs but couldnt</p>\n"},{"tags":["java","spring","spring-tool-suite"],"answers":[{"tags":[],"owner":{"account_id":1391519,"reputation":1710,"user_id":1322243,"accept_rate":66,"display_name":"liltitus27"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1386689742,"creation_date":1386689409,"answer_id":20498452,"question_id":20497813,"body_markdown":"This sounds like a transitive dependency issue.  What this means is that your code relies on a jar or library to do something - evidently, you depend on Spring framework code.  Well, all that Spring code also depends on libraries and jars.  \r\n\r\nMost likely, you need to add the corerctly versioned `org.springframework.core` jar to your classpath so that the `EnvironmentCapable` class can be found when your IDE attempts to build your project.  \r\n\r\nThis might also be a jar collision issue as well, although that sounds less likely.  When an application experiences jar collision (also known as &quot;dll hell&quot;), the compiler is finding multiple jars and classes with the same fully-qualified name.  For example, let&#39;s say you added Spring to your classpath, along with the entire Tomcat server library.  Well, those two jars may contain the same exact named classes, maybe the same version, maybe different versions.  But either way, when the compiler looks for that `EnvironmentCapable` class, it finds two (in this contrived example) - one in the Spring jar and one in the Tomcat jar.  Well, it doesn&#39;t know which one to choose, and so it throws a `ClassDefNotFoundException`, which would/could manifest itself as the error you experienced.","title":"Indirectly referenced from required .class files","body":"<p>This sounds like a transitive dependency issue.  What this means is that your code relies on a jar or library to do something - evidently, you depend on Spring framework code.  Well, all that Spring code also depends on libraries and jars.  </p>\n\n<p>Most likely, you need to add the corerctly versioned <code>org.springframework.core</code> jar to your classpath so that the <code>EnvironmentCapable</code> class can be found when your IDE attempts to build your project.  </p>\n\n<p>This might also be a jar collision issue as well, although that sounds less likely.  When an application experiences jar collision (also known as \"dll hell\"), the compiler is finding multiple jars and classes with the same fully-qualified name.  For example, let's say you added Spring to your classpath, along with the entire Tomcat server library.  Well, those two jars may contain the same exact named classes, maybe the same version, maybe different versions.  But either way, when the compiler looks for that <code>EnvironmentCapable</code> class, it finds two (in this contrived example) - one in the Spring jar and one in the Tomcat jar.  Well, it doesn't know which one to choose, and so it throws a <code>ClassDefNotFoundException</code>, which would/could manifest itself as the error you experienced.</p>\n"},{"tags":[],"owner":{"account_id":9321025,"reputation":11,"user_id":6919750,"display_name":"Anbu Prakash"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1493145363,"creation_date":1493145363,"answer_id":43618478,"question_id":20497813,"body_markdown":" I faced same error while i work with spring security on spring-security-config.i jsut deleted that jar in maven repo and gave maven-&gt;update Project in eclipse.\r\nit is resolved.Please try it once.","title":"Indirectly referenced from required .class files","body":"<p>I faced same error while i work with spring security on spring-security-config.i jsut deleted that jar in maven repo and gave maven->update Project in eclipse.\nit is resolved.Please try it once.</p>\n"},{"tags":[],"owner":{"account_id":220031,"reputation":11,"user_id":3024661,"display_name":"sinanduman"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1527439249,"creation_date":1527439249,"answer_id":50554318,"question_id":20497813,"body_markdown":"From command line, run &quot;mvn clean install&quot;, you&#39;ll see project failed and you&#39;ll see artifacts in the logs that cause such a problem.\r\nAfter that, remove artifacts from .m2/repository, then maven update from eclipse.","title":"Indirectly referenced from required .class files","body":"<p>From command line, run \"mvn clean install\", you'll see project failed and you'll see artifacts in the logs that cause such a problem.\nAfter that, remove artifacts from .m2/repository, then maven update from eclipse.</p>\n"},{"tags":[],"owner":{"account_id":6937456,"reputation":2312,"user_id":5324923,"display_name":"Dezso Gabos"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1543517008,"creation_date":1543517008,"answer_id":53545639,"question_id":20497813,"body_markdown":"To avoid jar collision, make sure you declare your dependency versions under the properties tag in the aggregate pom.xml, and use the property name as a placeholder throughout the project. For example  &lt;spring.version&gt;4.2.5.RELEASE&lt;/spring.version&gt; in the parent pom, and then in the child modules just use ${spring.version} instead of 4.2.5.RELEASE. This way you can avoid having two different versions of the same library on the classpath. \r\n\r\nAlso it is recommended to be consistent with the version of spring dependencies. Use the same version for spring-core, spring-web etc. \r\n\r\nIf you are using maven, then you can use the maven enforcer plugin to ensure dependency convergence, and avoid further issues with transitive dependencies.","title":"Indirectly referenced from required .class files","body":"<p>To avoid jar collision, make sure you declare your dependency versions under the properties tag in the aggregate pom.xml, and use the property name as a placeholder throughout the project. For example  4.2.5.RELEASE in the parent pom, and then in the child modules just use ${spring.version} instead of 4.2.5.RELEASE. This way you can avoid having two different versions of the same library on the classpath. </p>\n\n<p>Also it is recommended to be consistent with the version of spring dependencies. Use the same version for spring-core, spring-web etc. </p>\n\n<p>If you are using maven, then you can use the maven enforcer plugin to ensure dependency convergence, and avoid further issues with transitive dependencies.</p>\n"},{"tags":[],"owner":{"account_id":7444245,"reputation":1031,"user_id":5661010,"accept_rate":33,"display_name":"iLearn"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691697461,"creation_date":1691697461,"answer_id":76878953,"question_id":20497813,"body_markdown":"Follow these Steps if you are using Eclipse:\r\n\r\n 1. Right Click Maven Project\r\n \r\n 2. Select Maven --&gt; For Update of Snapshots / Releases\r\n\r\nThis will update your Maven Projects to Resolve the Dependencies","title":"Indirectly referenced from required .class files","body":"<p>Follow these Steps if you are using Eclipse:</p>\n<ol>\n<li><p>Right Click Maven Project</p>\n</li>\n<li><p>Select Maven --&gt; For Update of Snapshots / Releases</p>\n</li>\n</ol>\n<p>This will update your Maven Projects to Resolve the Dependencies</p>\n"}],"owner":{"account_id":36083,"reputation":11748,"user_id":102689,"accept_rate":57,"display_name":"Srinivasan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36719,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"answer_count":5,"score":9,"last_activity_date":1691697461,"creation_date":1386687720,"question_id":20497813,"body_markdown":"I&#39;m getting below error in STS: \r\n\r\n&gt;    The type org.springframework.core.env.EnvironmentCapable cannot be resolved. It is indirectly referenced from required .class files","title":"Indirectly referenced from required .class files","body":"<p>I'm getting below error in STS: </p>\n\n<blockquote>\n  <p>The type org.springframework.core.env.EnvironmentCapable cannot be resolved. It is indirectly referenced from required .class files</p>\n</blockquote>\n"},{"tags":["java","selenium-webdriver","windows-task-scheduler"],"comments":[{"owner":{"account_id":5355185,"reputation":1862,"user_id":4335488,"accept_rate":79,"display_name":"HSchmale"},"score":0,"creation_date":1520999051,"post_id":49269405,"comment_id":85542023,"body_markdown":"Could the there be another thread running in jvm after yours ends? Are you properly shutting down selenium?","body":"Could the there be another thread running in jvm after yours ends? Are you properly shutting down selenium?"},{"owner":{"account_id":3038036,"reputation":1608,"user_id":2575662,"accept_rate":100,"display_name":"Onel Sarmiento"},"score":0,"creation_date":1520999252,"post_id":49269405,"comment_id":85542061,"body_markdown":"@HSchmale Do you mean the WebDriver? if that&#39;s so, I already verified it, but there&#39;s no chromedriver.exe or any related driver on the process.","body":"@HSchmale Do you mean the WebDriver? if that&#39;s so, I already verified it, but there&#39;s no chromedriver.exe or any related driver on the process."},{"owner":{"account_id":5364291,"reputation":1046,"user_id":4280027,"display_name":"user254948"},"score":1,"creation_date":1521008248,"post_id":49269405,"comment_id":85544684,"body_markdown":"@LeonelSarmiento I would assume another thread is running in the jvm as well. Try using JStack to figure out what threads are running inside the JVM.","body":"@LeonelSarmiento I would assume another thread is running in the jvm as well. Try using JStack to figure out what threads are running inside the JVM."}],"answers":[{"tags":[],"owner":{"account_id":3038036,"reputation":1608,"user_id":2575662,"accept_rate":100,"display_name":"Onel Sarmiento"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1521005730,"creation_date":1521005730,"answer_id":49270356,"question_id":49269405,"body_markdown":"I make a workaround or maybe a solution. I found out that the `System.exit(0)` on main will only close the console application, but the *&quot;Java (TM) Platform SE binary&quot;* will remain. To terminate this I extended to `JFrame` class to be able to override the `ExitApp()`. Inside the `ExitApp()` I add window listener and in `windowClosing()` I called the `disposed()` and `System.exit(0)` once more. I don&#39;t have any idea how this even works. If someone know how this works feel free to update this answer.\r\n\r\n    public class TestClass extends JFrame {\r\n    \r\n    \tpublic void ExitApp() {\r\n    \t\taddWindowListener(new WindowAdapter() {\r\n    \t\t\tpublic void windowClosing(WindowEvent e) {\r\n                    // Dispose Java (TM) Platform SE binary.\r\n    \t\t\t\tdispose();\r\n                    // Close the Java.exe I&#39;m not sure.\r\n    \t\t\t\tSystem.exit(0);\r\n    \t\t\t}\r\n    \t\t});\r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args) {\r\n            // Close Your Application Trigger ExitApp();\r\n    \t\tSystem.exit(0);\r\n    \t}\r\n    } ","title":"Java (TM) Platform SE binary still running on processes","body":"<p>I make a workaround or maybe a solution. I found out that the <code>System.exit(0)</code> on main will only close the console application, but the <em>\"Java (TM) Platform SE binary\"</em> will remain. To terminate this I extended to <code>JFrame</code> class to be able to override the <code>ExitApp()</code>. Inside the <code>ExitApp()</code> I add window listener and in <code>windowClosing()</code> I called the <code>disposed()</code> and <code>System.exit(0)</code> once more. I don't have any idea how this even works. If someone know how this works feel free to update this answer.</p>\n\n<pre><code>public class TestClass extends JFrame {\n\n    public void ExitApp() {\n        addWindowListener(new WindowAdapter() {\n            public void windowClosing(WindowEvent e) {\n                // Dispose Java (TM) Platform SE binary.\n                dispose();\n                // Close the Java.exe I'm not sure.\n                System.exit(0);\n            }\n        });\n    }\n\n    public static void main(String[] args) {\n        // Close Your Application Trigger ExitApp();\n        System.exit(0);\n    }\n} \n</code></pre>\n"}],"owner":{"account_id":3038036,"reputation":1608,"user_id":2575662,"accept_rate":100,"display_name":"Onel Sarmiento"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1884,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":49270356,"answer_count":1,"score":0,"last_activity_date":1691697336,"creation_date":1520998842,"question_id":49269405,"body_markdown":"I created a console application using Java, then exported it as runnable JAR file. but when I run the JAR file the automation is finished but the *&quot;Java (TM) Platform SE binary&quot;* is still on background, I tried to put `System.exit(0)` and still not able to terminate the process.\r\n\r\nI&#39;m also trying to run this automatically in Task Scheduler in indefinitely repetition every 15 minutes, the problem is it will not run again after 15 minutes since the *&quot;Java (TM) Platform SE binary&quot;* is still in process and identified its status as running.\r\n\r\nI&#39;m pretty sure that all my automation task is all finished without error and not creating another threads.\r\n\r\n**Here is my code below:**\r\n\r\n    public static void main(String[] args) {\r\n        String jarName = new File(Selenium.class.getProtectionDomain().getCodeSource().getLocation().getPath())\r\n            .getName();\r\n        System.out.println(&quot;Running &quot; + jarName + &quot; Automation&quot;);\r\n        if (args.length &gt;= 1 &amp;&amp; args[0].toLowerCase().equals(&quot;-run&quot;)) {\r\n            for (int i = 1; i &lt; args.length; i++) {\r\n                String pram = args[i].replace(jarName + &quot;_&quot;, &quot;&quot;);\r\n                if (pram.toLowerCase().equals(&quot;all&quot;)) {\r\n                    GFC.execute(&quot;Login&quot;);\r\n                    GFC.execute(&quot;SwitchIntegration&quot;);\r\n                    GFC.execute(&quot;BODActivate&quot;);\r\n                    GFC.execute(&quot;Users&quot;);\r\n                    GFC.execute(&quot;Settings&quot;);\r\n                    GFC.execute(&quot;AccountingEntityRegistration&quot;);\r\n                    GFC.execute(&quot;CustomizedData&quot;);\r\n                    GFC.execute(&quot;BOD&quot;);\r\n                    GFC.execute(&quot;BODAttributesMDM&quot;);\r\n                    GFC.execute(&quot;BODAttributesTransactional&quot;);\r\n                    GFC.execute(&quot;CMD&quot;);\r\n                    GFC.execute(&quot;CMDAttributes&quot;);\r\n                    GFC.execute(&quot;CMDDataEntry&quot;);\r\n                    GFC.execute(&quot;CMDActivate&quot;);\r\n                    GFC.execute(&quot;AccountingEntity&quot;);\r\n                    GFC.execute(&quot;AccountingEntityMapping&quot;);\r\n                    GFC.execute(&quot;JETemplates&quot;);\r\n                    GFC.execute(&quot;Scenarios&quot;);\r\n                    GFC.execute(&quot;Rules&quot;);\r\n                    GFC.execute(&quot;RulesScript&quot;).quit();\r\n                } else {\r\n                    if (!pram.equals(&quot;Login&quot;)) {\r\n                        GFC.execute(&quot;Login&quot;);\r\n                    }\r\n                    GFC.execute(pram).quit();\r\n                }\r\n            }\r\n    \r\n            if (Boolean.parseBoolean(infor.automation.utils.Properties.get(&quot;gfc.enableemailer&quot;))) {\r\n                sendEmail();\r\n            }\r\n        }\r\n    }\r\n\r\n**Update:** 3/14/2018\r\n\r\n - Worrying might my automation is creating another threads, so I decide\r\n   to create a new project and just a main class and export it as a\r\n   runnable Jar file, and it&#39;s still the same.\r\n - My JDK version is 1.8","title":"Java (TM) Platform SE binary still running on processes","body":"<p>I created a console application using Java, then exported it as runnable JAR file. but when I run the JAR file the automation is finished but the <em>\"Java (TM) Platform SE binary\"</em> is still on background, I tried to put <code>System.exit(0)</code> and still not able to terminate the process.</p>\n\n<p>I'm also trying to run this automatically in Task Scheduler in indefinitely repetition every 15 minutes, the problem is it will not run again after 15 minutes since the <em>\"Java (TM) Platform SE binary\"</em> is still in process and identified its status as running.</p>\n\n<p>I'm pretty sure that all my automation task is all finished without error and not creating another threads.</p>\n\n<p><strong>Here is my code below:</strong></p>\n\n<pre><code>public static void main(String[] args) {\n    String jarName = new File(Selenium.class.getProtectionDomain().getCodeSource().getLocation().getPath())\n        .getName();\n    System.out.println(\"Running \" + jarName + \" Automation\");\n    if (args.length &gt;= 1 &amp;&amp; args[0].toLowerCase().equals(\"-run\")) {\n        for (int i = 1; i &lt; args.length; i++) {\n            String pram = args[i].replace(jarName + \"_\", \"\");\n            if (pram.toLowerCase().equals(\"all\")) {\n                GFC.execute(\"Login\");\n                GFC.execute(\"SwitchIntegration\");\n                GFC.execute(\"BODActivate\");\n                GFC.execute(\"Users\");\n                GFC.execute(\"Settings\");\n                GFC.execute(\"AccountingEntityRegistration\");\n                GFC.execute(\"CustomizedData\");\n                GFC.execute(\"BOD\");\n                GFC.execute(\"BODAttributesMDM\");\n                GFC.execute(\"BODAttributesTransactional\");\n                GFC.execute(\"CMD\");\n                GFC.execute(\"CMDAttributes\");\n                GFC.execute(\"CMDDataEntry\");\n                GFC.execute(\"CMDActivate\");\n                GFC.execute(\"AccountingEntity\");\n                GFC.execute(\"AccountingEntityMapping\");\n                GFC.execute(\"JETemplates\");\n                GFC.execute(\"Scenarios\");\n                GFC.execute(\"Rules\");\n                GFC.execute(\"RulesScript\").quit();\n            } else {\n                if (!pram.equals(\"Login\")) {\n                    GFC.execute(\"Login\");\n                }\n                GFC.execute(pram).quit();\n            }\n        }\n\n        if (Boolean.parseBoolean(infor.automation.utils.Properties.get(\"gfc.enableemailer\"))) {\n            sendEmail();\n        }\n    }\n}\n</code></pre>\n\n<p><strong>Update:</strong> 3/14/2018</p>\n\n<ul>\n<li>Worrying might my automation is creating another threads, so I decide\nto create a new project and just a main class and export it as a\nrunnable Jar file, and it's still the same.</li>\n<li>My JDK version is 1.8</li>\n</ul>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1653455714,"post_id":72371993,"comment_id":127853714,"body_markdown":"`&quot;/storage/emulated/0/DCIM/&quot;` try `&quot;/storage/emulated/0&quot;` instead. And allways check for null before use. How did you grant permissions?","body":"<code>&quot;&#47;storage&#47;emulated&#47;0&#47;DCIM&#47;&quot;</code> try <code>&quot;&#47;storage&#47;emulated&#47;0&quot;</code> instead. And allways check for null before use. How did you grant permissions?"},{"owner":{"account_id":25382549,"reputation":1,"user_id":19194736,"display_name":"Leo Leung"},"score":0,"creation_date":1653463585,"post_id":72371993,"comment_id":127855679,"body_markdown":"I tried to use &quot;/storage/emulated/0&quot;, it can find the all folder path.\nBut I want to delete the files in &quot;/storage/emulated/0/DCIM/&quot;, how can I check?","body":"I tried to use &quot;/storage/emulated/0&quot;, it can find the all folder path. But I want to delete the files in &quot;/storage/emulated/0/DCIM/&quot;, how can I check?"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1653469633,"post_id":72371993,"comment_id":127857839,"body_markdown":"Well first tell if listFiles() really returns null. Or if it returns an empty list. If it returns null you would have a NullPointerException and you did not tell you had one.","body":"Well first tell if listFiles() really returns null. Or if it returns an empty list. If it returns null you would have a NullPointerException and you did not tell you had one."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1653469800,"post_id":72371993,"comment_id":127857929,"body_markdown":"Repeat: `How did you grant permissions? ` Why dont you answer? The user can only grant permissions at runtime.","body":"Repeat: <code>How did you grant permissions? </code> Why dont you answer? The user can only grant permissions at runtime."},{"owner":{"account_id":25382549,"reputation":1,"user_id":19194736,"display_name":"Leo Leung"},"score":0,"creation_date":1653471565,"post_id":72371993,"comment_id":127858546,"body_markdown":"How did you grant permissions? -&gt; I use below setting\n\n    &lt;uses-permission\n        android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot;\n        tools:node=&quot;merge&quot; /&gt;\n    &lt;uses-permission\n        android:name=&quot;android.permission.STORAGE&quot;\n        tools:node=&quot;merge&quot; /&gt;\n    &lt;uses-permission\n        android:name=&quot;android.permission.MANAGE_EXTERNAL_STORAGE&quot;\n        tools:ignore=&quot;ScopedStorage&quot; /&gt;","body":"How did you grant permissions? -&gt; I use below setting      &lt;uses-permission         android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot;         tools:node=&quot;merge&quot; /&gt;     &lt;uses-permission         android:name=&quot;android.permission.STORAGE&quot;         tools:node=&quot;merge&quot; /&gt;     &lt;uses-permission         android:name=&quot;android.permission.MANAGE_EXTERNAL_STORAGE&quot;         tools:ignore=&quot;ScopedStorage&quot; /&gt;"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1653473562,"post_id":72371993,"comment_id":127859325,"body_markdown":"Repeat: `Well first tell if listFiles() really returns null. Or if it returns an empty list. If it returns null you would have a NullPointerException and you did not tell you had one.`  You should answer all questions!!!","body":"Repeat: <code>Well first tell if listFiles() really returns null. Or if it returns an empty list. If it returns null you would have a NullPointerException and you did not tell you had one.</code>  You should answer all questions!!!"},{"owner":{"account_id":25382549,"reputation":1,"user_id":19194736,"display_name":"Leo Leung"},"score":0,"creation_date":1653493442,"post_id":72371993,"comment_id":127867557,"body_markdown":"It returns empty list","body":"It returns empty list"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1653498962,"post_id":72371993,"comment_id":127869634,"body_markdown":"Indeed. It returns an empty list. `I use below setting ` Well we already saw that. But the user has to grant those permissions at runtime too. And you did not tell us if you added the code for that.","body":"Indeed. It returns an empty list. <code>I use below setting </code> Well we already saw that. But the user has to grant those permissions at runtime too. And you did not tell us if you added the code for that."},{"owner":{"account_id":25382549,"reputation":1,"user_id":19194736,"display_name":"Leo Leung"},"score":0,"creation_date":1653533418,"post_id":72371993,"comment_id":127877444,"body_markdown":"I&#39;ve added below code to grant permission.\nThe list can return the file name now\n\n  private void assignPermission() {\n        if (ContextCompat.checkSelfPermission(this, Manifest.permission.WRITE_EXTERNAL_STORAGE) == PackageManager.PERMISSION_DENIED) {\n            ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.WRITE_EXTERNAL_STORAGE}, 1);\n        }\n    }","body":"I&#39;ve added below code to grant permission. The list can return the file name now    private void assignPermission() {         if (ContextCompat.checkSelfPermission(this, Manifest.permission.WRITE_EXTERNAL_STORAGE) == PackageManager.PERMISSION_DENIED) {             ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.WRITE_EXTERNAL_STORAGE}, 1);         }     }"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1653549716,"post_id":72371993,"comment_id":127880340,"body_markdown":"Please put your code in your post. Its unreadable in a comment .","body":"Please put your code in your post. Its unreadable in a comment ."}],"answers":[{"tags":[],"owner":{"account_id":28106482,"reputation":1,"user_id":21474999,"display_name":"Mr17"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691697185,"creation_date":1691697185,"answer_id":76878920,"question_id":72371993,"body_markdown":"You need to get run time permision \r\n\r\n\r\n        if (SDK_INT &gt;= Build.VERSION_CODES.M) {\r\n            requestPermissions(new String[]{WRITE_EXTERNAL_STORAGE}, 1);\r\n        }\r\n        if (SDK_INT &gt;= Build.VERSION_CODES.M) {\r\n            requestPermissions(new String[]{READ_EXTERNAL_STORAGE}, 2);\r\n        }\r\n        if (SDK_INT &gt;= Build.VERSION_CODES.M) {\r\n            requestPermissions(new String[]{Manifest.permission.MANAGE_EXTERNAL_STORAGE}, 3);\r\n        }","title":"Try to the File.listFiles() is returning null in android 11","body":"<p>You need to get run time permision</p>\n<pre><code>    if (SDK_INT &gt;= Build.VERSION_CODES.M) {\n        requestPermissions(new String[]{WRITE_EXTERNAL_STORAGE}, 1);\n    }\n    if (SDK_INT &gt;= Build.VERSION_CODES.M) {\n        requestPermissions(new String[]{READ_EXTERNAL_STORAGE}, 2);\n    }\n    if (SDK_INT &gt;= Build.VERSION_CODES.M) {\n        requestPermissions(new String[]{Manifest.permission.MANAGE_EXTERNAL_STORAGE}, 3);\n    }\n</code></pre>\n"}],"owner":{"account_id":25382549,"reputation":1,"user_id":19194736,"display_name":"Leo Leung"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":139,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691697185,"creation_date":1653453265,"question_id":72371993,"body_markdown":"I was creating an application to test whether File.listFiles() method is working or not. To check this I made an application and I used it there but this returning null in place of an array. This is my full code please help and I have granted all permissions for android 11\r\n\r\nManifest File\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        package=&quot;com.example.myapplication&quot;&gt;\r\n        &lt;uses-permission\r\n            android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot;\r\n            tools:node=&quot;merge&quot; /&gt;\r\n        &lt;uses-permission\r\n            android:name=&quot;android.permission.STORAGE&quot;\r\n            tools:node=&quot;merge&quot; /&gt;\r\n        &lt;uses-permission\r\n            android:name=&quot;android.permission.MANAGE_EXTERNAL_STORAGE&quot;\r\n            tools:ignore=&quot;ScopedStorage&quot; /&gt;\r\n        &lt;application\r\n            android:allowBackup=&quot;true&quot;\r\n            android:icon=&quot;@mipmap/ic_launcher&quot;\r\n            android:label=&quot;@string/app_name&quot;\r\n            android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n            android:supportsRtl=&quot;true&quot;\r\n            android:requestLegacyExternalStorage=&quot;true&quot;\r\n            android:theme=&quot;@style/Theme.MyApplication&quot;&gt;\r\n            &lt;activity\r\n                android:name=&quot;.MainActivity&quot;\r\n                android:exported=&quot;true&quot;&gt;\r\n                &lt;intent-filter&gt;\r\n                    &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n                    &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n                &lt;/intent-filter&gt;\r\n            &lt;/activity&gt;\r\n        &lt;/application&gt;\r\n    &lt;/manifest&gt;\r\n\r\nMainActivity.java\r\n\r\n    package com.example.myapplication;\r\n\r\n    import androidx.appcompat.app.AppCompatActivity;\r\n\r\n    import android.os.Bundle;\r\n    import android.os.Environment;\r\n    import android.view.View;\r\n    import android.widget.Button;\r\n    import android.widget.Toast;\r\n    import java.io.File;\r\n    import java.io.IOException;\r\n    import static android.Manifest.permission.READ_EXTERNAL_STORAGE;\r\n    import static android.Manifest.permission.WRITE_EXTERNAL_STORAGE;\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n        private Button deleteButton;\r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n            initView();\r\n        }\r\n        private void initView() {\r\n            deleteButton = findViewById(R.id.deleteButton);\r\n            deleteButton.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    deleteFiles(view);\r\n                }\r\n            });\r\n        }\r\n        private void deleteFiles(View v) {\r\n            File file = new File(&quot;/storage/emulated/0/DCIM/&quot;);\r\n            if (file.isDirectory())\r\n            {\r\n                File[] files;\r\n                files = file.listFiles();\r\n                int a = files.length;\r\n                for (int i = 0; i &lt; files.length; i++)\r\n                {\r\n                    new File(file, files[i].getName()).delete();\r\n                }\r\n                Toast.makeText(getApplicationContext(), &quot;Done&quot;, Toast.LENGTH_LONG).show();\r\n            }else {\r\n                Toast.makeText(getApplicationContext(), (CharSequence) file,  Toast.LENGTH_LONG).show();\r\n            }\r\n        }\r\n    }","title":"Try to the File.listFiles() is returning null in android 11","body":"<p>I was creating an application to test whether File.listFiles() method is working or not. To check this I made an application and I used it there but this returning null in place of an array. This is my full code please help and I have granted all permissions for android 11</p>\n<p>Manifest File</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    package=&quot;com.example.myapplication&quot;&gt;\n    &lt;uses-permission\n        android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot;\n        tools:node=&quot;merge&quot; /&gt;\n    &lt;uses-permission\n        android:name=&quot;android.permission.STORAGE&quot;\n        tools:node=&quot;merge&quot; /&gt;\n    &lt;uses-permission\n        android:name=&quot;android.permission.MANAGE_EXTERNAL_STORAGE&quot;\n        tools:ignore=&quot;ScopedStorage&quot; /&gt;\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:requestLegacyExternalStorage=&quot;true&quot;\n        android:theme=&quot;@style/Theme.MyApplication&quot;&gt;\n        &lt;activity\n            android:name=&quot;.MainActivity&quot;\n            android:exported=&quot;true&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n    &lt;/application&gt;\n&lt;/manifest&gt;\n</code></pre>\n<p>MainActivity.java</p>\n<pre><code>package com.example.myapplication;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.os.Bundle;\nimport android.os.Environment;\nimport android.view.View;\nimport android.widget.Button;\nimport android.widget.Toast;\nimport java.io.File;\nimport java.io.IOException;\nimport static android.Manifest.permission.READ_EXTERNAL_STORAGE;\nimport static android.Manifest.permission.WRITE_EXTERNAL_STORAGE;\n\npublic class MainActivity extends AppCompatActivity {\n    private Button deleteButton;\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        initView();\n    }\n    private void initView() {\n        deleteButton = findViewById(R.id.deleteButton);\n        deleteButton.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                deleteFiles(view);\n            }\n        });\n    }\n    private void deleteFiles(View v) {\n        File file = new File(&quot;/storage/emulated/0/DCIM/&quot;);\n        if (file.isDirectory())\n        {\n            File[] files;\n            files = file.listFiles();\n            int a = files.length;\n            for (int i = 0; i &lt; files.length; i++)\n            {\n                new File(file, files[i].getName()).delete();\n            }\n            Toast.makeText(getApplicationContext(), &quot;Done&quot;, Toast.LENGTH_LONG).show();\n        }else {\n            Toast.makeText(getApplicationContext(), (CharSequence) file,  Toast.LENGTH_LONG).show();\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","xhtml","w3c-validation","htmltidy","jtidy"],"answers":[{"tags":[],"owner":{"account_id":114789,"reputation":9447,"user_id":301717,"display_name":"J&#233;r&#244;me Pouiller"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1440420029,"creation_date":1440420029,"answer_id":32182584,"question_id":9475049,"body_markdown":"Tidy configuration used by W3C validator is available [here][1]\r\n\r\n\r\n  [1]: https://validator.w3.org/config/tidy.conf","title":"JTidy (HTML-Tidy) Configuration used on w3c HTML Validator","body":"<p>Tidy configuration used by W3C validator is available <a href=\"https://validator.w3.org/config/tidy.conf\" rel=\"nofollow\">here</a></p>\n"}],"owner":{"account_id":45443,"reputation":3769,"user_id":133936,"accept_rate":68,"display_name":"empire29"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1000,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1691697154,"creation_date":1330392170,"question_id":9475049,"body_markdown":"I am using JTidy (the java port of the HTML Tidy library) to scrub some existing sites. When I used my configuration of JTidy is seems to be very strict and ends up cutting off the bottom of the page (bad markup).\r\n\r\nWhen i run the same markup through the w3c HTML validator tool only, It cleans up it up but is more intelligent in its rewriting; instead of chopping off tags, it seems to intelligently guess where the missing tag was and updates the structure accordingly.\r\n\r\nDoes anyone know the HTML-Tidy configuration w3c uses?\r\n\r\nMy jtidy configuratio is as follows:\r\n\r\n        Tidy tidy = new Tidy();\r\n        tidy.setTidyMark(false);\r\n        tidy.setXHTML(true);\r\n        tidy.setXmlOut(false);\r\n        tidy.setNumEntities(true);        \r\n        tidy.setSpaces(2);\r\n        tidy.setWraplen(2000);\r\n        tidy.setUpperCaseTags(false);\r\n        tidy.setUpperCaseAttrs(false);\r\n        tidy.setQuiet(false);\r\n        tidy.setMakeClean(true);\r\n        tidy.setShowWarnings(true);\r\n        tidy.setBreakBeforeBR(true);\r\n        tidy.setHideComments(true);","title":"JTidy (HTML-Tidy) Configuration used on w3c HTML Validator","body":"<p>I am using JTidy (the java port of the HTML Tidy library) to scrub some existing sites. When I used my configuration of JTidy is seems to be very strict and ends up cutting off the bottom of the page (bad markup).</p>\n\n<p>When i run the same markup through the w3c HTML validator tool only, It cleans up it up but is more intelligent in its rewriting; instead of chopping off tags, it seems to intelligently guess where the missing tag was and updates the structure accordingly.</p>\n\n<p>Does anyone know the HTML-Tidy configuration w3c uses?</p>\n\n<p>My jtidy configuratio is as follows:</p>\n\n<pre><code>    Tidy tidy = new Tidy();\n    tidy.setTidyMark(false);\n    tidy.setXHTML(true);\n    tidy.setXmlOut(false);\n    tidy.setNumEntities(true);        \n    tidy.setSpaces(2);\n    tidy.setWraplen(2000);\n    tidy.setUpperCaseTags(false);\n    tidy.setUpperCaseAttrs(false);\n    tidy.setQuiet(false);\n    tidy.setMakeClean(true);\n    tidy.setShowWarnings(true);\n    tidy.setBreakBeforeBR(true);\n    tidy.setHideComments(true);\n</code></pre>\n"},{"tags":["java","hibernate","hibernate-validator","jakarta-validation"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1691677991,"post_id":76876716,"comment_id":135526394,"body_markdown":"Sure, it can be easier. Make your own copy of the class and add the annotations. That, or just use the existing class and manually add the extra validations. I definitely don&#39;t recommend this reflection-based approach.","body":"Sure, it can be easier. Make your own copy of the class and add the annotations. That, or just use the existing class and manually add the extra validations. I definitely don&#39;t recommend this reflection-based approach."},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1691680242,"post_id":76876716,"comment_id":135526930,"body_markdown":"I&#39;d search for a library that can do the validation in some easy way.","body":"I&#39;d search for a library that can do the validation in some easy way."},{"owner":{"account_id":303781,"reputation":3824,"user_id":612925,"accept_rate":67,"display_name":"tomasz-mer"},"score":0,"creation_date":1691736913,"post_id":76876716,"comment_id":135534679,"body_markdown":"Classes are too much to maintenance copies of them or add annotation manually.","body":"Classes are too much to maintenance copies of them or add annotation manually."}],"answers":[{"comments":[{"owner":{"account_id":303781,"reputation":3824,"user_id":612925,"accept_rate":67,"display_name":"tomasz-mer"},"score":0,"creation_date":1691737083,"post_id":76878842,"comment_id":135534710,"body_markdown":"Classes are too much to maintenance xml with constraints. I will add constrainsts programmaticlly iterating through the fields using the reflection. Not the greate solution :/","body":"Classes are too much to maintenance xml with constraints. I will add constrainsts programmaticlly iterating through the fields using the reflection. Not the greate solution :/"}],"tags":[],"owner":{"account_id":6366204,"reputation":2197,"user_id":4940126,"display_name":"mark_o"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691696332,"creation_date":1691696332,"answer_id":76878842,"question_id":76876716,"body_markdown":"For cases when it is not possible to edit the classes to add validation annotations to it there are two options:\r\n\r\nSpecifying the constraints via XML\r\n----------------------------------\r\nTo use this approach you&#39;d need to add a `META-INF/validation.xml` and then inside of it you can define/redefine your constraints:\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;constraint-mappings\r\n    xmlns=&quot;https://jakarta.ee/xml/ns/validation/mapping&quot;\r\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    xsi:schemaLocation=&quot;\r\n        https://jakarta.ee/xml/ns/validation/mapping\r\n        https://jakarta.ee/xml/ns/validation/validation-mapping-3.0.xsd&quot;\r\n    version=&quot;3.0&quot;&gt;\r\n\r\n    &lt;!-- note that you can use ignore-annotations \r\n        to either ignore any annotation constraints \r\n        or include them, depending on your needs --&gt;\r\n    &lt;bean class=&quot;com.acme.common.model.SomeType&quot; ignore-annotations=&quot;false&quot;&gt;\r\n       &lt;field name=&quot;someField&quot;&gt;\r\n           &lt;constraint annotation=&quot;jakarta.validation.constraints.NotBlank&quot;/&gt;\r\n           [...]\r\n       &lt;/field&gt;\r\n       [...]\r\n    &lt;/bean&gt;\r\n&lt;/constraint-mappings&gt;\r\n```\r\nfor more details you should check [this section of the specification][1]. \r\n\r\nProgrammatic constraint definition\r\n--------------------\r\n\r\nAlternatively, Hibernate Validator provides a way to add constraints programmatically:\r\n\r\n```java\r\nHibernateValidatorConfiguration configuration = Validation\r\n        .byProvider( HibernateValidator.class )\r\n        .configure();\r\n\r\nConstraintMapping constraintMapping = configuration.createConstraintMapping();\r\n\r\nconstraintMapping\r\n    .type( Car.class )\r\n        .field( &quot;manufacturer&quot; )\r\n            .constraint( new NotNullDef() )\r\n        .field( &quot;licensePlate&quot; )\r\n            .ignoreAnnotations( true )\r\n            .constraint( new NotNullDef() )\r\n            .constraint( new SizeDef().min( 2 ).max( 14 ) )\r\n    .type( RentalCar.class )\r\n        .getter( &quot;rentalStation&quot; )\r\n            .constraint( new NotNullDef() );\r\n\r\nValidator validator = configuration.addMapping( constraintMapping )\r\n        .buildValidatorFactory()\r\n        .getValidator();\r\n```\r\n\r\nFor more details, check this [section of the Hibernate Validator documentation][2].\r\n\r\n\r\nIf you do not know which fields will need not empty/blank constraint being applied you can try to iterate through the fields using the reflection and then based on that information define the constraints via programmatic API. once constraints are added to the validator you should be able to just use `Validator#validate(..)` \r\n\r\n  [1]: https://jakarta.ee/specifications/bean-validation/3.0/jakarta-bean-validation-spec-3.0.html#xml-mapping-constraintdeclarationinxml\r\n  [2]: https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-programmatic-api","title":"Validating class which cannot be modified by add new annotations","body":"<p>For cases when it is not possible to edit the classes to add validation annotations to it there are two options:</p>\n<h2>Specifying the constraints via XML</h2>\n<p>To use this approach you'd need to add a <code>META-INF/validation.xml</code> and then inside of it you can define/redefine your constraints:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;constraint-mappings\n    xmlns=&quot;https://jakarta.ee/xml/ns/validation/mapping&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;\n        https://jakarta.ee/xml/ns/validation/mapping\n        https://jakarta.ee/xml/ns/validation/validation-mapping-3.0.xsd&quot;\n    version=&quot;3.0&quot;&gt;\n\n    &lt;!-- note that you can use ignore-annotations \n        to either ignore any annotation constraints \n        or include them, depending on your needs --&gt;\n    &lt;bean class=&quot;com.acme.common.model.SomeType&quot; ignore-annotations=&quot;false&quot;&gt;\n       &lt;field name=&quot;someField&quot;&gt;\n           &lt;constraint annotation=&quot;jakarta.validation.constraints.NotBlank&quot;/&gt;\n           [...]\n       &lt;/field&gt;\n       [...]\n    &lt;/bean&gt;\n&lt;/constraint-mappings&gt;\n</code></pre>\n<p>for more details you should check <a href=\"https://jakarta.ee/specifications/bean-validation/3.0/jakarta-bean-validation-spec-3.0.html#xml-mapping-constraintdeclarationinxml\" rel=\"nofollow noreferrer\">this section of the specification</a>.</p>\n<h2>Programmatic constraint definition</h2>\n<p>Alternatively, Hibernate Validator provides a way to add constraints programmatically:</p>\n<pre class=\"lang-java prettyprint-override\"><code>HibernateValidatorConfiguration configuration = Validation\n        .byProvider( HibernateValidator.class )\n        .configure();\n\nConstraintMapping constraintMapping = configuration.createConstraintMapping();\n\nconstraintMapping\n    .type( Car.class )\n        .field( &quot;manufacturer&quot; )\n            .constraint( new NotNullDef() )\n        .field( &quot;licensePlate&quot; )\n            .ignoreAnnotations( true )\n            .constraint( new NotNullDef() )\n            .constraint( new SizeDef().min( 2 ).max( 14 ) )\n    .type( RentalCar.class )\n        .getter( &quot;rentalStation&quot; )\n            .constraint( new NotNullDef() );\n\nValidator validator = configuration.addMapping( constraintMapping )\n        .buildValidatorFactory()\n        .getValidator();\n</code></pre>\n<p>For more details, check this <a href=\"https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-programmatic-api\" rel=\"nofollow noreferrer\">section of the Hibernate Validator documentation</a>.</p>\n<p>If you do not know which fields will need not empty/blank constraint being applied you can try to iterate through the fields using the reflection and then based on that information define the constraints via programmatic API. once constraints are added to the validator you should be able to just use <code>Validator#validate(..)</code></p>\n"}],"owner":{"account_id":303781,"reputation":3824,"user_id":612925,"accept_rate":67,"display_name":"tomasz-mer"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76878842,"answer_count":1,"score":0,"last_activity_date":1691696332,"creation_date":1691677811,"question_id":76876716,"body_markdown":"the model is generated by some tools. Particular fields are annotated by for instance @NotNull annotation. I cannot modify generated classes. I need to do additonal validation of generated classes like check that value of the string field does&#39;t contain empty string and then throw ConstraintViolationException. Currently I iterate over the class to find field type of String and then in case of empty string I need to implement my own ConstraintViolation interface which is deadly hard. So it looks like that:\r\n\r\n        Validator validator = Validation.buildDefaultValidatorFactory()\r\n                .getValidator();\r\n        Set&lt; ConstraintViolation&lt; E &gt; &gt; validationErrors = validator.validate(aEntity);\r\n        Field[] fields = aEntity.getClass().getDeclaredFields();\r\n        for (Field f : fields) {\r\n            Class&lt;?&gt; type = f.getType();\r\n            if (type == String.class) {\r\n                try {\r\n                    String v = (String) f.get(aEntity);\r\n                    // check that value is not an empty string\r\n                    if (v == null || !v.trim().isEmpty()) {\r\n                        validationErrors.add(new ConstraintViolation&lt;E&gt;() {\r\n                            @Override\r\n                            public String getMessage() {\r\n                                return null;\r\n                            }\r\n\r\n                            @Override\r\n                            public String getMessageTemplate() {\r\n                                return null;\r\n                            }\r\n\r\n                            @Override\r\n                            public E getRootBean() {\r\n                                return null;\r\n                            }\r\n\r\n                            @Override\r\n                            public Class&lt;E&gt; getRootBeanClass() {\r\n                                return null;\r\n                            }\r\n\r\n                            @Override\r\n                            public Object getLeafBean() {\r\n                                return null;\r\n                            }\r\n\r\n                            @Override\r\n                            public Object[] getExecutableParameters() {\r\n                                return new Object[0];\r\n                            }\r\n\r\n                            @Override\r\n                            public Object getExecutableReturnValue() {\r\n                                return null;\r\n                            }\r\n\r\n                            @Override\r\n                            public Path getPropertyPath() {\r\n                                return null;\r\n                            }\r\n\r\n                            @Override\r\n                            public Object getInvalidValue() {\r\n                                return null;\r\n                            }\r\n\r\n                            @Override\r\n                            public ConstraintDescriptor&lt;?&gt; getConstraintDescriptor() {\r\n                                return null;\r\n                            }\r\n\r\n                            @Override\r\n                            public &lt;U&gt; U unwrap(Class&lt;U&gt; type) {\r\n                                return null;\r\n                            }\r\n                        });\r\n                    }\r\n                } catch (IllegalAccessException e) {\r\n                    throw new RuntimeException(e);\r\n                }\r\n            }\r\n        }\r\n\r\nIs it possible to make this easier?","title":"Validating class which cannot be modified by add new annotations","body":"<p>the model is generated by some tools. Particular fields are annotated by for instance @NotNull annotation. I cannot modify generated classes. I need to do additonal validation of generated classes like check that value of the string field does't contain empty string and then throw ConstraintViolationException. Currently I iterate over the class to find field type of String and then in case of empty string I need to implement my own ConstraintViolation interface which is deadly hard. So it looks like that:</p>\n<pre><code>    Validator validator = Validation.buildDefaultValidatorFactory()\n            .getValidator();\n    Set&lt; ConstraintViolation&lt; E &gt; &gt; validationErrors = validator.validate(aEntity);\n    Field[] fields = aEntity.getClass().getDeclaredFields();\n    for (Field f : fields) {\n        Class&lt;?&gt; type = f.getType();\n        if (type == String.class) {\n            try {\n                String v = (String) f.get(aEntity);\n                // check that value is not an empty string\n                if (v == null || !v.trim().isEmpty()) {\n                    validationErrors.add(new ConstraintViolation&lt;E&gt;() {\n                        @Override\n                        public String getMessage() {\n                            return null;\n                        }\n\n                        @Override\n                        public String getMessageTemplate() {\n                            return null;\n                        }\n\n                        @Override\n                        public E getRootBean() {\n                            return null;\n                        }\n\n                        @Override\n                        public Class&lt;E&gt; getRootBeanClass() {\n                            return null;\n                        }\n\n                        @Override\n                        public Object getLeafBean() {\n                            return null;\n                        }\n\n                        @Override\n                        public Object[] getExecutableParameters() {\n                            return new Object[0];\n                        }\n\n                        @Override\n                        public Object getExecutableReturnValue() {\n                            return null;\n                        }\n\n                        @Override\n                        public Path getPropertyPath() {\n                            return null;\n                        }\n\n                        @Override\n                        public Object getInvalidValue() {\n                            return null;\n                        }\n\n                        @Override\n                        public ConstraintDescriptor&lt;?&gt; getConstraintDescriptor() {\n                            return null;\n                        }\n\n                        @Override\n                        public &lt;U&gt; U unwrap(Class&lt;U&gt; type) {\n                            return null;\n                        }\n                    });\n                }\n            } catch (IllegalAccessException e) {\n                throw new RuntimeException(e);\n            }\n        }\n    }\n</code></pre>\n<p>Is it possible to make this easier?</p>\n"},{"tags":["java","oracle","wget","tar","dpkg"],"comments":[{"owner":{"account_id":2667845,"reputation":10491,"user_id":2305826,"accept_rate":89,"display_name":"MarsAtomic"},"score":0,"creation_date":1691641303,"post_id":76872499,"comment_id":135519584,"body_markdown":"Can you use dpkg to install files other than .deb? Is there some reason you aren&#39;t using apt?","body":"Can you use dpkg to install files other than .deb? Is there some reason you aren&#39;t using apt?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691654488,"post_id":76872499,"comment_id":135521461,"body_markdown":"Yes why are you installing manually?","body":"Yes why are you installing manually?"},{"owner":{"account_id":326480,"reputation":368,"user_id":5047819,"display_name":"Anders Lindgren"},"score":1,"creation_date":1691660854,"post_id":76872499,"comment_id":135522722,"body_markdown":"You should have downloaded the file ending with deb if you are installing using Debian tools like dpkg. The tar.gz file contains the binary distribution and you could put it anywhere (in theory) on your file system and just add the bin folder to your path.","body":"You should have downloaded the file ending with deb if you are installing using Debian tools like dpkg. The tar.gz file contains the binary distribution and you could put it anywhere (in theory) on your file system and just add the bin folder to your path."},{"owner":{"account_id":8591840,"reputation":46475,"user_id":6436191,"display_name":"The Impaler"},"score":1,"creation_date":1691696257,"post_id":76872499,"comment_id":135530189,"body_markdown":"Consider that Java 20 is a short-lived version of Java, not suitable for serious usage. I would stick with 8, 11, or 17.","body":"Consider that Java 20 is a short-lived version of Java, not suitable for serious usage. I would stick with 8, 11, or 17."},{"owner":{"account_id":14327066,"reputation":141,"user_id":10348872,"display_name":"Shovel_Knight"},"score":0,"creation_date":1691697708,"post_id":76872499,"comment_id":135530461,"body_markdown":"As far as I&#39;m aware, Oracle does not provide .deb packages for AArch64.","body":"As far as I&#39;m aware, Oracle does not provide .deb packages for AArch64."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691702190,"post_id":76872499,"comment_id":135531176,"body_markdown":"Isn&#39;t [Arm64](https://packages.debian.org/bookworm/openjdk-17-jdk) the same thing?","body":"Isn&#39;t <a href=\"https://packages.debian.org/bookworm/openjdk-17-jdk\" rel=\"nofollow noreferrer\">Arm64</a> the same thing?"},{"owner":{"account_id":28747043,"reputation":11,"user_id":22015952,"display_name":"Tyler Roberts"},"score":0,"creation_date":1691705450,"post_id":76872499,"comment_id":135531617,"body_markdown":"I tried to use apt but it said that it was not a deb package","body":"I tried to use apt but it said that it was not a deb package"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691705555,"post_id":76872499,"comment_id":135531631,"body_markdown":"What is your OS?","body":"What is your OS?"},{"owner":{"account_id":28747043,"reputation":11,"user_id":22015952,"display_name":"Tyler Roberts"},"score":0,"creation_date":1691707359,"post_id":76872499,"comment_id":135531869,"body_markdown":"It&#39;s a ChromeOS with Debian 11 Bullseye","body":"It&#39;s a ChromeOS with Debian 11 Bullseye"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691707617,"post_id":76872499,"comment_id":135531895,"body_markdown":"So `sudo apt update` then `sudo apt install openjdk-17-jdk`","body":"So <code>sudo apt update</code> then <code>sudo apt install openjdk-17-jdk</code>"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691708020,"post_id":76872499,"comment_id":135531939,"body_markdown":"If you absolutely must have 20, then there&#39;s [this](https://download.bell-sw.com/java/20.0.2+10/bellsoft-jdk20.0.2+10-linux-aarch64.deb)","body":"If you absolutely must have 20, then there&#39;s <a href=\"https://download.bell-sw.com/java/20.0.2+10/bellsoft-jdk20.0.2+10-linux-aarch64.deb\" rel=\"nofollow noreferrer\">this</a>"}],"answers":[{"comments":[{"owner":{"account_id":28747043,"reputation":11,"user_id":22015952,"display_name":"Tyler Roberts"},"score":0,"creation_date":1691708691,"post_id":76878711,"comment_id":135531988,"body_markdown":"Thank you so much! I always saw the console recommend a PATH file whenever I would use python, but I didn&#39;t knew that it could do this.. How does the PATH file work?","body":"Thank you so much! I always saw the console recommend a PATH file whenever I would use python, but I didn&#39;t knew that it could do this.. How does the PATH file work?"},{"owner":{"account_id":14327066,"reputation":141,"user_id":10348872,"display_name":"Shovel_Knight"},"score":0,"creation_date":1691709252,"post_id":76878711,"comment_id":135532038,"body_markdown":"@TylerRoberts - it&#39;s not a file, it&#39;s an environment variable. It lists all the directories where the system would look for an executable file when you issue a command. So for example, if your PATH is /bin:/usr/bin:/usr/local/bin, it would look for executables in those folders in this exact order. When you add a directory to this list, you basically make executables located in this directory available as console commands.","body":"@TylerRoberts - it&#39;s not a file, it&#39;s an environment variable. It lists all the directories where the system would look for an executable file when you issue a command. So for example, if your PATH is /bin:/usr/bin:/usr/local/bin, it would look for executables in those folders in this exact order. When you add a directory to this list, you basically make executables located in this directory available as console commands."},{"owner":{"account_id":28747043,"reputation":11,"user_id":22015952,"display_name":"Tyler Roberts"},"score":0,"creation_date":1691711607,"post_id":76878711,"comment_id":135532268,"body_markdown":"So when I use java --version, the terminal looks for the file immediately on the PATH?","body":"So when I use java --version, the terminal looks for the file immediately on the PATH?"},{"owner":{"account_id":14327066,"reputation":141,"user_id":10348872,"display_name":"Shovel_Knight"},"score":0,"creation_date":1691712118,"post_id":76878711,"comment_id":135532309,"body_markdown":"Essentially, yes","body":"Essentially, yes"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1691738387,"post_id":76878711,"comment_id":135534952,"body_markdown":"But if you&#39;re unfamiliar with all this then all the more reason to let the package manager install the JDK as it will do all that for you","body":"But if you&#39;re unfamiliar with all this then all the more reason to let the package manager install the JDK as it will do all that for you"}],"tags":[],"owner":{"account_id":14327066,"reputation":141,"user_id":10348872,"display_name":"Shovel_Knight"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691695365,"creation_date":1691694768,"answer_id":76878711,"question_id":76872499,"body_markdown":"You cannot install a tar.gz file using dpkg — it&#39;s not a .deb package, and dpkg does not know what to do with it.\r\n\r\nIf you only need to install Java for your user and not systemwide, you could do the following:\r\n\r\n```\r\ntar -xzvf jdk-20_linux-aarch64_bin.tar.gz\r\n```\r\n\r\nThis would extract the contents of the archive into a directory called `jdk-20.0.2`. Now create the `.bin/java` directory in your home folder:\r\n\r\n```\r\nmkdir -p ~/.bin/java\r\n```\r\n\r\nNow copy the `jdk-20.0.2` folder into your new folder:\r\n\r\n```\r\ncp -rp jdk-20.0.2 ~/.bin/java\r\n```\r\n\r\nNow you will need to edit your shell configuration file, it should be .bashrc by default:\r\n\r\n```\r\nnano ~/.bashrc\r\n```\r\n\r\nAdd the following lines to this config file:\r\n\r\n```\r\nPATH=&quot;$HOME/.bin/java/jdk-20.0.2/bin:$PATH&quot;\r\nexport JAVA_HOME=$HOME/.bin/java/jdk-20.0.2\r\n```\r\n\r\nPress Ctrl-o to save the changes and Ctrl-x to exit the editor.\r\n\r\nNow you need to source your shell configuration file:\r\n\r\n```\r\nsource ~/.bashrc\r\n```\r\n\r\nVerify that you can run the Java VM by using the following command:\r\n\r\n```\r\njava --version\r\n```\r\n\r\nNow you can delete the file you downloaded and the unpacked folder:\r\n\r\n```\r\nrm jdk-20_linux-aarch64_bin.tar.gz\r\nrm -rf jdk-20.0.2/\r\n```","title":"I want to install JDK for Debian using ARM64 but I got todpkg: error: archive &#39;jdk-20.0.2&#39; is not a regular file, how do I fix?","body":"<p>You cannot install a tar.gz file using dpkg — it's not a .deb package, and dpkg does not know what to do with it.</p>\n<p>If you only need to install Java for your user and not systemwide, you could do the following:</p>\n<pre><code>tar -xzvf jdk-20_linux-aarch64_bin.tar.gz\n</code></pre>\n<p>This would extract the contents of the archive into a directory called <code>jdk-20.0.2</code>. Now create the <code>.bin/java</code> directory in your home folder:</p>\n<pre><code>mkdir -p ~/.bin/java\n</code></pre>\n<p>Now copy the <code>jdk-20.0.2</code> folder into your new folder:</p>\n<pre><code>cp -rp jdk-20.0.2 ~/.bin/java\n</code></pre>\n<p>Now you will need to edit your shell configuration file, it should be .bashrc by default:</p>\n<pre><code>nano ~/.bashrc\n</code></pre>\n<p>Add the following lines to this config file:</p>\n<pre><code>PATH=&quot;$HOME/.bin/java/jdk-20.0.2/bin:$PATH&quot;\nexport JAVA_HOME=$HOME/.bin/java/jdk-20.0.2\n</code></pre>\n<p>Press Ctrl-o to save the changes and Ctrl-x to exit the editor.</p>\n<p>Now you need to source your shell configuration file:</p>\n<pre><code>source ~/.bashrc\n</code></pre>\n<p>Verify that you can run the Java VM by using the following command:</p>\n<pre><code>java --version\n</code></pre>\n<p>Now you can delete the file you downloaded and the unpacked folder:</p>\n<pre><code>rm jdk-20_linux-aarch64_bin.tar.gz\nrm -rf jdk-20.0.2/\n</code></pre>\n"}],"owner":{"account_id":28747043,"reputation":11,"user_id":22015952,"display_name":"Tyler Roberts"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":165,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1691695365,"creation_date":1691638489,"question_id":76872499,"body_markdown":"I tried to install Java IDK using https://www.oracle.com/java/technologies/downloads/#jdk18-linux and wget as well as uncompressing it using tar but when I tried to `sudo apt dpkg install` on it, it would result in the error:\r\n\r\n    dpkg: error: \r\n    archive &#39;jdk-20.0.2&#39; is not a regular file. \r\n\r\nWhat does it mean and how can I fix it?\r\n\r\n\r\n1. Installed https://www.oracle.com/java/technologies/downloads/#jdk18-linux using wget\r\n2. Got back jdk-20_linux-aarch64_bin.tar.gz, then went to Downloads directory\r\n3. Unpackaged jdk-20_linux-aarch64_bin.tar.gz using tar zxvf\r\n4. Tried to sudo dpkg -i jdk-20_linux-aarch64_bin.tar.gz\r\n5. &quot;dpkg: error: archive &#39;jdk-20.0.2&#39; is not a regular file&quot;\r\n","title":"I want to install JDK for Debian using ARM64 but I got todpkg: error: archive &#39;jdk-20.0.2&#39; is not a regular file, how do I fix?","body":"<p>I tried to install Java IDK using <a href=\"https://www.oracle.com/java/technologies/downloads/#jdk18-linux\" rel=\"nofollow noreferrer\">https://www.oracle.com/java/technologies/downloads/#jdk18-linux</a> and wget as well as uncompressing it using tar but when I tried to <code>sudo apt dpkg install</code> on it, it would result in the error:</p>\n<pre><code>dpkg: error: \narchive 'jdk-20.0.2' is not a regular file. \n</code></pre>\n<p>What does it mean and how can I fix it?</p>\n<ol>\n<li>Installed <a href=\"https://www.oracle.com/java/technologies/downloads/#jdk18-linux\" rel=\"nofollow noreferrer\">https://www.oracle.com/java/technologies/downloads/#jdk18-linux</a> using wget</li>\n<li>Got back jdk-20_linux-aarch64_bin.tar.gz, then went to Downloads directory</li>\n<li>Unpackaged jdk-20_linux-aarch64_bin.tar.gz using tar zxvf</li>\n<li>Tried to sudo dpkg -i jdk-20_linux-aarch64_bin.tar.gz</li>\n<li>&quot;dpkg: error: archive 'jdk-20.0.2' is not a regular file&quot;</li>\n</ol>\n"},{"tags":["java","spring","hibernate","transactions","hsqldb"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1691052414,"post_id":76826315,"comment_id":135440139,"body_markdown":"Configure HSQLDEB as it was behaving with 1.x (I&#39;m assuming you are mentioning that in upgrade and not Spring Boot). Although I think the code is flawed and that is what should be fixed and not so much the tests. But apparently everything has been written with the `read_uncommitted` level in mind.","body":"Configure HSQLDEB as it was behaving with 1.x (I&#39;m assuming you are mentioning that in upgrade and not Spring Boot). Although I think the code is flawed and that is what should be fixed and not so much the tests. But apparently everything has been written with the <code>read_uncommitted</code> level in mind."},{"owner":{"account_id":23847029,"reputation":23,"user_id":17851416,"display_name":"rabbitvirus"},"score":0,"creation_date":1691062992,"post_id":76826315,"comment_id":135442450,"body_markdown":"I am afraid `read_uncommitted` is no longer in version 2.X. I mean it works as `read_committed`. Also, the rows are committed before, only update part is not, so looks like it is more like HSQLDB &#39;feature&#39; than standard behavior.","body":"I am afraid <code>read_uncommitted</code> is no longer in version 2.X. I mean it works as <code>read_committed</code>. Also, the rows are committed before, only update part is not, so looks like it is more like HSQLDB &#39;feature&#39; than standard behavior."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1691063987,"post_id":76826315,"comment_id":135442637,"body_markdown":"The update part is the problem as it is a new transaction (depending on the row is locked or not) will be overwritten by the pending one. I&#39;m not familiar with HSQLDB that much (It has been years since I used it) so it could throw an error somewhere. I would still say the code is wrong and depended on quircky behavior of the db much more then it should.","body":"The update part is the problem as it is a new transaction (depending on the row is locked or not) will be overwritten by the pending one. I&#39;m not familiar with HSQLDB that much (It has been years since I used it) so it could throw an error somewhere. I would still say the code is wrong and depended on quircky behavior of the db much more then it should."},{"owner":{"account_id":23847029,"reputation":23,"user_id":17851416,"display_name":"rabbitvirus"},"score":0,"creation_date":1691165037,"post_id":76826315,"comment_id":135459685,"body_markdown":"I switched to H2 and the case I described here started to work out of the box. However, I still have a problem with camel routes. When there is a JPA endpoint and a new entity is persisted, it is not visible in next processor on the route...","body":"I switched to H2 and the case I described here started to work out of the box. However, I still have a problem with camel routes. When there is a JPA endpoint and a new entity is persisted, it is not visible in next processor on the route..."},{"owner":{"account_id":23847029,"reputation":23,"user_id":17851416,"display_name":"rabbitvirus"},"score":0,"creation_date":1692014333,"post_id":76826315,"comment_id":135564091,"body_markdown":"Regarding camel - setting shared entity manager helped there.","body":"Regarding camel - setting shared entity manager helped there."}],"answers":[{"comments":[{"owner":{"account_id":23847029,"reputation":23,"user_id":17851416,"display_name":"rabbitvirus"},"score":0,"creation_date":1692014411,"post_id":76878737,"comment_id":135564109,"body_markdown":"Cool, thanks! I switched to H2 for now, I will do some testing and wait for 2.7.3 version. I will replace it back then assuming everything works as expected.","body":"Cool, thanks! I switched to H2 for now, I will do some testing and wait for 2.7.3 version. I will replace it back then assuming everything works as expected."}],"tags":[],"owner":{"account_id":216064,"reputation":24129,"user_id":471070,"display_name":"fredt"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1691695002,"creation_date":1691695002,"answer_id":76878737,"question_id":76826315,"body_markdown":"The issue with HSQLDB was fixed recently. See below:\r\n\r\nhttps://sourceforge.net/p/hsqldb/bugs/1684/\r\n\r\nYou can build the jar from the SVN snapshot and use it for tests.","title":"In-memory HSQLDB issue with REQUIRES_NEW propagation","body":"<p>The issue with HSQLDB was fixed recently. See below:</p>\n<p><a href=\"https://sourceforge.net/p/hsqldb/bugs/1684/\" rel=\"nofollow noreferrer\">https://sourceforge.net/p/hsqldb/bugs/1684/</a></p>\n<p>You can build the jar from the SVN snapshot and use it for tests.</p>\n"}],"owner":{"account_id":23847029,"reputation":23,"user_id":17851416,"display_name":"rabbitvirus"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76878737,"answer_count":1,"score":0,"last_activity_date":1691695002,"creation_date":1691052020,"question_id":76826315,"body_markdown":"I am working in a Spring Boot project, it is not very old, but should be considered to be a bit legacy. For some reason, someone decided to use in-memory HSQL db in tests, unfortunately in 1.X version. I am trying to upgrade it to the latest version 2.X.\r\n\r\nAfter upgrading a dependency, a lot of tests stopped working. There are a few crucial changes between versions 1.X and 2.X, i.e.: read uncommitted was a default isolation level in old version, transaction model is different now (I use MVCC).\r\n\r\nI found an interesting case in the application. Let&#39;s assume I have two tables: `Second` with some columns and `First` with `id, second_id` and other columns. `second_id` is a foreign key. Now, I start a test and there is an SQL script that inserts two rows:\r\n\r\n - `Second` table: a row with `id=1`,\r\n - `First` table: a row with `id=1`, `second_id=null`.\r\n\r\nThe script ends with `COMMIT` instruction, so these rows are committed. So, after the execution of the script, we have two rows which are not linked together by a foreign key.\r\n\r\nNow, inside the application, new transaction starts (through `@Transactional`, propagation=`REQUIRED`). The transaction attempts to run update query on a row with `id=1` from `Second` table (`UPDATE Second SET ... WHERE id=1`). Transaction is ongoing, not committed yet.\r\n\r\nThe code hits another `@Transactional` method, however with `propagation=REQUIRES_NEW`. Current transaction is **suspended** and a new one is spawned. Inside it, the following query is executed: `update First set second_id=1 where id=1` - so basically we want to link both rows together through a foreign key. However, it fails with `foreign key no parent`.\r\n\r\nWhat happens here: row which we are trying to link is currently being modified by the first transaction and it is not visible to that new transaction. And it fails. It seems to be expected according to HSQLDB transaction model, which is a bit strange comparing with other relational dbs.\r\n\r\nDo you have any idea how to make it working without modifying the existing code? I can only touch tests and their configuration. The code has been working fine for years (yeah, the design is not nice, I know) and I am not allowed to change anything related to transaction at the moment. There are a lot of new transactions started with `REQUIRES_NEW` propagation, even in some simple cases, what is an overkill according to me.\r\n\r\nI would be very grateful for any ideas how to proceed with that.","title":"In-memory HSQLDB issue with REQUIRES_NEW propagation","body":"<p>I am working in a Spring Boot project, it is not very old, but should be considered to be a bit legacy. For some reason, someone decided to use in-memory HSQL db in tests, unfortunately in 1.X version. I am trying to upgrade it to the latest version 2.X.</p>\n<p>After upgrading a dependency, a lot of tests stopped working. There are a few crucial changes between versions 1.X and 2.X, i.e.: read uncommitted was a default isolation level in old version, transaction model is different now (I use MVCC).</p>\n<p>I found an interesting case in the application. Let's assume I have two tables: <code>Second</code> with some columns and <code>First</code> with <code>id, second_id</code> and other columns. <code>second_id</code> is a foreign key. Now, I start a test and there is an SQL script that inserts two rows:</p>\n<ul>\n<li><code>Second</code> table: a row with <code>id=1</code>,</li>\n<li><code>First</code> table: a row with <code>id=1</code>, <code>second_id=null</code>.</li>\n</ul>\n<p>The script ends with <code>COMMIT</code> instruction, so these rows are committed. So, after the execution of the script, we have two rows which are not linked together by a foreign key.</p>\n<p>Now, inside the application, new transaction starts (through <code>@Transactional</code>, propagation=<code>REQUIRED</code>). The transaction attempts to run update query on a row with <code>id=1</code> from <code>Second</code> table (<code>UPDATE Second SET ... WHERE id=1</code>). Transaction is ongoing, not committed yet.</p>\n<p>The code hits another <code>@Transactional</code> method, however with <code>propagation=REQUIRES_NEW</code>. Current transaction is <strong>suspended</strong> and a new one is spawned. Inside it, the following query is executed: <code>update First set second_id=1 where id=1</code> - so basically we want to link both rows together through a foreign key. However, it fails with <code>foreign key no parent</code>.</p>\n<p>What happens here: row which we are trying to link is currently being modified by the first transaction and it is not visible to that new transaction. And it fails. It seems to be expected according to HSQLDB transaction model, which is a bit strange comparing with other relational dbs.</p>\n<p>Do you have any idea how to make it working without modifying the existing code? I can only touch tests and their configuration. The code has been working fine for years (yeah, the design is not nice, I know) and I am not allowed to change anything related to transaction at the moment. There are a lot of new transactions started with <code>REQUIRES_NEW</code> propagation, even in some simple cases, what is an overkill according to me.</p>\n<p>I would be very grateful for any ideas how to proceed with that.</p>\n"},{"tags":["java","proxy","load-balancing","javalin","proxy-protocol"],"answers":[{"tags":[],"owner":{"account_id":7799336,"reputation":48,"user_id":5899345,"display_name":"zugazagoitia"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691694733,"creation_date":1691694733,"answer_id":76878707,"question_id":76643022,"body_markdown":"Javalin does not support the Proxy Protocol. \r\n\r\nIf you are proxying your traffic through Nginx, you don&#39;t need to use the proxy protocol in Javalin, since it will be the final destination. Nginx will handle the proxy protocol and forward the request to Javalin. [You can then use the X-Forwarded-For header to get the original IP address.](https://www.nginx.com/resources/wiki/start/topics/examples/forwarded/)\r\n\r\n","title":"How to enable proxy protocol in javalin?","body":"<p>Javalin does not support the Proxy Protocol.</p>\n<p>If you are proxying your traffic through Nginx, you don't need to use the proxy protocol in Javalin, since it will be the final destination. Nginx will handle the proxy protocol and forward the request to Javalin. <a href=\"https://www.nginx.com/resources/wiki/start/topics/examples/forwarded/\" rel=\"nofollow noreferrer\">You can then use the X-Forwarded-For header to get the original IP address.</a></p>\n"}],"owner":{"account_id":28864519,"reputation":11,"user_id":22107570,"display_name":"Lvkas_"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":128,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691694733,"creation_date":1688820373,"question_id":76643022,"body_markdown":"I bought a load balancer at hetzner and for my backend (written in Java, Web-Server is Javalin) I want to use the Proxy Protocol, that the IP-Adresses will be redirected to my web-services.\r\n\r\n[Hetzner Load Balancer enable Proxy Protocol](https://i.stack.imgur.com/h9buW.png)\r\nHetzner says, that my service must support this. They also linked an how-to for nginx: https://docs.nginx.com/nginx/admin-guide/load-balancer/using-proxy-protocol/\r\n\r\nAt the moment, my services aren&#39;t reachable through the load balancer if I enable the proxy protocol:\r\nBad Message 400\r\nreason: Illegal character SPACE=&#39; &#39; \r\n\r\nDoes anyone know, how to do this for Javalin?\r\nThanks alot!","title":"How to enable proxy protocol in javalin?","body":"<p>I bought a load balancer at hetzner and for my backend (written in Java, Web-Server is Javalin) I want to use the Proxy Protocol, that the IP-Adresses will be redirected to my web-services.</p>\n<p><a href=\"https://i.stack.imgur.com/h9buW.png\" rel=\"nofollow noreferrer\">Hetzner Load Balancer enable Proxy Protocol</a>\nHetzner says, that my service must support this. They also linked an how-to for nginx: <a href=\"https://docs.nginx.com/nginx/admin-guide/load-balancer/using-proxy-protocol/\" rel=\"nofollow noreferrer\">https://docs.nginx.com/nginx/admin-guide/load-balancer/using-proxy-protocol/</a></p>\n<p>At the moment, my services aren't reachable through the load balancer if I enable the proxy protocol:\nBad Message 400\nreason: Illegal character SPACE=' '</p>\n<p>Does anyone know, how to do this for Javalin?\nThanks alot!</p>\n"},{"tags":["java","spring-boot","junit","spring-jdbc","spring-boot-test"],"answers":[{"comments":[{"owner":{"account_id":16152922,"reputation":365,"user_id":11660873,"display_name":"Jeet"},"score":0,"creation_date":1691775088,"post_id":76878700,"comment_id":135542122,"body_markdown":"Hello, thanks for your inputs! I have created the application-test.properties but still the DB2 bean is getting created. I want the H2 DB bean to do the job for me but unfortunately it is not the case. I also have created @Activeprofile(&quot;test&quot;)","body":"Hello, thanks for your inputs! I have created the application-test.properties but still the DB2 bean is getting created. I want the H2 DB bean to do the job for me but unfortunately it is not the case. I also have created @Activeprofile(&quot;test&quot;)"},{"owner":{"account_id":4954355,"reputation":276,"user_id":3987412,"display_name":"Abhinav Ganguly"},"score":0,"creation_date":1692720541,"post_id":76878700,"comment_id":135661658,"body_markdown":"Hello Jeet, Will it be possible for you to share your code in a git repo, i can then give it a try, replicating the issue.","body":"Hello Jeet, Will it be possible for you to share your code in a git repo, i can then give it a try, replicating the issue."}],"tags":[],"owner":{"account_id":4954355,"reputation":276,"user_id":3987412,"display_name":"Abhinav Ganguly"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691694615,"creation_date":1691694615,"answer_id":76878700,"question_id":76876324,"body_markdown":"It seems you haven&#39;t maintained separete configurations for dev and test setup of your application. This is basically maintaining dedicated spring profiles.\r\n\r\nIn spring-boot, you can create an `application.properties` containing db config of your actual database, lets say postgre sql\r\n```\r\nspring.datasource.url= jdbc:postgresql://localhost:5432/testdb\r\nspring.datasource.username= postgres\r\nspring.datasource.password= dummypwd\r\n# some more postgres specific properties\r\n```\r\nand `application-test.properties` containing your H2 database config.\r\n\r\n```\r\nspring.datasource.url=jdbc:h2:file:./testdb\r\nspring.datasource.driverClassName=org.h2.Driver\r\nspring.datasource.username=sa\r\nspring.datasource.password=\r\n \r\nspring.jpa.show-sql=true\r\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.H2Dialect\r\nspring.jpa.hibernate.ddl-auto= update\r\n# some more H2 specific properties\r\n```\r\n\r\nAnd then in your Test class, you can use `@ActiveProfiles(value = &quot;test&quot;)` annotation to activate the corresponding profile, and load the configurations associated with it.\r\n\r\nSee [ActiveProfiles][1] for further details\r\n\r\nEg\r\n```\r\n@SpringBootTest(classes={H2Test.class})\r\n@ContectConfiguration(classes ={H2Test.class})\r\n@ActiveProfiles(value = &quot;test&quot;)\r\npublic class mainTest{\r\n\r\n\r\n@Test\r\npublic void testMain() throws Exception{\r\n\r\nA a=new A();\r\nAssertions.assertDoesNotThrow(()-&gt; a.main());\r\n//call the main method of the application here\r\n}\r\n}\r\n\r\n```\r\n\r\nPlease note:\r\nYou&#39;ll may need to refactor your first line in `mainTest` class to `@SpringBootTest(classes = YourApplication.class) ` where `YourApplication.class` is your Spring-Boot Application&#39;s main class\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/context/ActiveProfiles.html","title":"How to use the bean created in the test to run an application?","body":"<p>It seems you haven't maintained separete configurations for dev and test setup of your application. This is basically maintaining dedicated spring profiles.</p>\n<p>In spring-boot, you can create an <code>application.properties</code> containing db config of your actual database, lets say postgre sql</p>\n<pre><code>spring.datasource.url= jdbc:postgresql://localhost:5432/testdb\nspring.datasource.username= postgres\nspring.datasource.password= dummypwd\n# some more postgres specific properties\n</code></pre>\n<p>and <code>application-test.properties</code> containing your H2 database config.</p>\n<pre><code>spring.datasource.url=jdbc:h2:file:./testdb\nspring.datasource.driverClassName=org.h2.Driver\nspring.datasource.username=sa\nspring.datasource.password=\n \nspring.jpa.show-sql=true\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.H2Dialect\nspring.jpa.hibernate.ddl-auto= update\n# some more H2 specific properties\n</code></pre>\n<p>And then in your Test class, you can use <code>@ActiveProfiles(value = &quot;test&quot;)</code> annotation to activate the corresponding profile, and load the configurations associated with it.</p>\n<p>See <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/context/ActiveProfiles.html\" rel=\"nofollow noreferrer\">ActiveProfiles</a> for further details</p>\n<p>Eg</p>\n<pre><code>@SpringBootTest(classes={H2Test.class})\n@ContectConfiguration(classes ={H2Test.class})\n@ActiveProfiles(value = &quot;test&quot;)\npublic class mainTest{\n\n\n@Test\npublic void testMain() throws Exception{\n\nA a=new A();\nAssertions.assertDoesNotThrow(()-&gt; a.main());\n//call the main method of the application here\n}\n}\n\n</code></pre>\n<p>Please note:\nYou'll may need to refactor your first line in <code>mainTest</code> class to <code>@SpringBootTest(classes = YourApplication.class) </code> where <code>YourApplication.class</code> is your Spring-Boot Application's main class</p>\n"}],"owner":{"account_id":16152922,"reputation":365,"user_id":11660873,"display_name":"Jeet"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1691694615,"creation_date":1691675059,"question_id":76876324,"body_markdown":"I am writing test for an application where DataSource is created as a Bean when connecting to the DB2 Database. For the test I would like to use an in-memory H2 Database and call the main method to run the application. I have created a bean for the Datasource with H2 Database in the test folder. However when I call the main method, the control is always going to the original application and the Bean with the DB2 database is always created. How can I make use of the bean with H2 database in the application? The config class that I have written in the test is never called and so the bean with H2 Database is never created. \r\n\r\nI have the config class in the test folder that is imported later in the test file.\r\n\r\n\r\n```\r\n@TestConfiguration\r\n@AutoConfiguration\r\npublic class H2Test {\r\n\r\n\r\n@Primary\r\n@Bean\r\n@ConditionalOnMissingBean\r\n\r\npublic Datasource getH2bean() {\r\nJdbcDataSource jdbcDataSource=new JdbcDataSource();\r\njdbcDataSource.setURL(&lt;&lt;Url to the H2 in-memory Database&gt;&gt;);\r\n//further code\r\nreturn jdbcDataSource;\r\n}\r\n}\r\n```\r\n\r\nI want the bean of datasource above (`getH2bean`) to be used while running the complete application as I want to call the main method of the application.\r\n\r\nThe test file from where I call the main method is as below-\r\n\r\n\r\n```\r\n@SpringBootTest(classes={H2Test.class})\r\n@ContectConfiguration(classes ={H2Test.class})\r\npublic class mainTest{\r\n\r\n\r\n@Test\r\npublic void testMain() throws Exception{\r\n\r\nA a=new A();\r\nAssertions.assertDoesNotThrow(()-&gt; a.main());\r\n//call the main method of the application here\r\n}\r\n}\r\n\r\n```\r\n\r\nHow to use the `getH2bean()` in the original application in this context?","title":"How to use the bean created in the test to run an application?","body":"<p>I am writing test for an application where DataSource is created as a Bean when connecting to the DB2 Database. For the test I would like to use an in-memory H2 Database and call the main method to run the application. I have created a bean for the Datasource with H2 Database in the test folder. However when I call the main method, the control is always going to the original application and the Bean with the DB2 database is always created. How can I make use of the bean with H2 database in the application? The config class that I have written in the test is never called and so the bean with H2 Database is never created.</p>\n<p>I have the config class in the test folder that is imported later in the test file.</p>\n<pre><code>@TestConfiguration\n@AutoConfiguration\npublic class H2Test {\n\n\n@Primary\n@Bean\n@ConditionalOnMissingBean\n\npublic Datasource getH2bean() {\nJdbcDataSource jdbcDataSource=new JdbcDataSource();\njdbcDataSource.setURL(&lt;&lt;Url to the H2 in-memory Database&gt;&gt;);\n//further code\nreturn jdbcDataSource;\n}\n}\n</code></pre>\n<p>I want the bean of datasource above (<code>getH2bean</code>) to be used while running the complete application as I want to call the main method of the application.</p>\n<p>The test file from where I call the main method is as below-</p>\n<pre><code>@SpringBootTest(classes={H2Test.class})\n@ContectConfiguration(classes ={H2Test.class})\npublic class mainTest{\n\n\n@Test\npublic void testMain() throws Exception{\n\nA a=new A();\nAssertions.assertDoesNotThrow(()-&gt; a.main());\n//call the main method of the application here\n}\n}\n\n</code></pre>\n<p>How to use the <code>getH2bean()</code> in the original application in this context?</p>\n"},{"tags":["java","stream","heap","space-complexity","peek"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1691693317,"post_id":76878399,"comment_id":135529670,"body_markdown":"You&#39;re trying to do paging and get the max count at the same time. But you&#39;re trying to do it in a real silly way (especially if you&#39;re retrieving all data just to get the max count). Where does the stream originate from? Why don&#39;t you do the limit/offset in the original datasource, so it&#39;ll be more efficient.","body":"You&#39;re trying to do paging and get the max count at the same time. But you&#39;re trying to do it in a real silly way (especially if you&#39;re retrieving all data just to get the max count). Where does the stream originate from? Why don&#39;t you do the limit/offset in the original datasource, so it&#39;ll be more efficient."},{"owner":{"account_id":27460612,"reputation":63,"user_id":20951255,"display_name":"Krzysztof Grabowski"},"score":0,"creation_date":1691696549,"post_id":76878399,"comment_id":135530245,"body_markdown":"I understand your concerns. However, the solution I&#39;ve presented is due to the requirements of a legacy code structure I have to work with. I&#39;m trying to find the most efficient way to operate within these constraints. Thank you for the feedback.","body":"I understand your concerns. However, the solution I&#39;ve presented is due to the requirements of a legacy code structure I have to work with. I&#39;m trying to find the most efficient way to operate within these constraints. Thank you for the feedback."}],"answers":[{"comments":[{"owner":{"account_id":27460612,"reputation":63,"user_id":20951255,"display_name":"Krzysztof Grabowski"},"score":0,"creation_date":1691692457,"post_id":76878451,"comment_id":135529510,"body_markdown":"Thank you for your suggestion. However, this approach increments the counter only for elements after the skip() and limit() operations. I need to count all the items in the stream before applying those operations. It&#39;s a very specific use case.","body":"Thank you for your suggestion. However, this approach increments the counter only for elements after the skip() and limit() operations. I need to count all the items in the stream before applying those operations. It&#39;s a very specific use case."}],"tags":[],"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691694395,"creation_date":1691692235,"answer_id":76878451,"question_id":76878399,"body_markdown":"The only viable solution that deals with the case you&#39;ve described looks like\r\n\r\n```\r\nstreamData.forEachOrdered(elem -&gt; {\r\n  int i = totalCount.getAndIncrement();\r\n  if (i &gt;= startPosition &amp;&amp; i &lt; startPosition + itemsPerPage) {\r\n    itemHandler.accept(i);\r\n  }\r\n})\r\n```\r\n\r\nI don&#39;t believe a better solution exists; streams are really not designed to do what you&#39;re trying to do with them.","title":"Java: How to count and process elements in a Stream without auxiliary structures or peek()?","body":"<p>The only viable solution that deals with the case you've described looks like</p>\n<pre><code>streamData.forEachOrdered(elem -&gt; {\n  int i = totalCount.getAndIncrement();\n  if (i &gt;= startPosition &amp;&amp; i &lt; startPosition + itemsPerPage) {\n    itemHandler.accept(i);\n  }\n})\n</code></pre>\n<p>I don't believe a better solution exists; streams are really not designed to do what you're trying to do with them.</p>\n"}],"owner":{"account_id":27460612,"reputation":63,"user_id":20951255,"display_name":"Krzysztof Grabowski"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76878451,"answer_count":1,"score":0,"last_activity_date":1691694395,"creation_date":1691691763,"question_id":76878399,"body_markdown":"I&#39;m working with Java streams and I need a method to both count all elements in the stream and, at the same time, perform operations on a subset of them using skip() and limit().\r\nI&#39;m aiming to do this without using any auxiliary structures to reduce heap space usage, because the data entered can be very large.\r\n\r\nI&#39;d also prefer to steer clear of the peek() method due to its potential side effects in specific scenarios, as detailed in this [article](https://4comprehension.com/idiomatic-peeking/)\r\n\r\n    public static &lt;T&gt; long extractAndProcess(Stream&lt;T&gt; streamData, int pageIndex, int itemsPerPage,   Consumer&lt;T&gt; itemHandler) {\r\n\r\n        long startPosition = (long) pageIndex * itemsPerPage;\r\n        AtomicLong totalCount = new AtomicLong();\r\n\r\n        streamData.peek(item -&gt; totalCount.incrementAndGet())\r\n                  .skip(startPosition)\r\n                  .limit(itemsPerPage)\r\n                  .forEachOrdered(itemHandler);\r\n\r\n        return totalCount.get();\r\n    }\r\n\r\nI tried to use peek() here, but in combination with .limit() it doesn&#39;t work as I assumed in the specific cases.","title":"Java: How to count and process elements in a Stream without auxiliary structures or peek()?","body":"<p>I'm working with Java streams and I need a method to both count all elements in the stream and, at the same time, perform operations on a subset of them using skip() and limit().\nI'm aiming to do this without using any auxiliary structures to reduce heap space usage, because the data entered can be very large.</p>\n<p>I'd also prefer to steer clear of the peek() method due to its potential side effects in specific scenarios, as detailed in this <a href=\"https://4comprehension.com/idiomatic-peeking/\" rel=\"nofollow noreferrer\">article</a></p>\n<pre><code>public static &lt;T&gt; long extractAndProcess(Stream&lt;T&gt; streamData, int pageIndex, int itemsPerPage,   Consumer&lt;T&gt; itemHandler) {\n\n    long startPosition = (long) pageIndex * itemsPerPage;\n    AtomicLong totalCount = new AtomicLong();\n\n    streamData.peek(item -&gt; totalCount.incrementAndGet())\n              .skip(startPosition)\n              .limit(itemsPerPage)\n              .forEachOrdered(itemHandler);\n\n    return totalCount.get();\n}\n</code></pre>\n<p>I tried to use peek() here, but in combination with .limit() it doesn't work as I assumed in the specific cases.</p>\n"},{"tags":["java","webclient","helidon","helidon-webclient"],"answers":[{"comments":[{"owner":{"account_id":7718945,"reputation":709,"user_id":5845739,"display_name":"Pratik Gaurav"},"score":0,"creation_date":1691735485,"post_id":76878663,"comment_id":135534400,"body_markdown":"thank you for responding back, I was returning the 302 from my downstream application. I changed it 200. It&#39;s working fine now.","body":"thank you for responding back, I was returning the 302 from my downstream application. I changed it 200. It&#39;s working fine now."}],"tags":[],"owner":{"account_id":1824964,"reputation":468,"user_id":1658022,"display_name":"Romain Grecourt"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691694209,"creation_date":1691694209,"answer_id":76878663,"question_id":76865400,"body_markdown":"[302][1] is used for redirects.\r\n\r\nPostman probably follows redirects by default, however Helidon WebClient does not. You need to use `.followRedirects(true)` on either WebClient.Builder or request instance.\r\n\r\n  [1]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/302","title":"Helidon : Caused by: io.helidon.webclient.WebClientException: Request failed with code 302","body":"<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/302\" rel=\"nofollow noreferrer\">302</a> is used for redirects.</p>\n<p>Postman probably follows redirects by default, however Helidon WebClient does not. You need to use <code>.followRedirects(true)</code> on either WebClient.Builder or request instance.</p>\n"}],"owner":{"account_id":7718945,"reputation":709,"user_id":5845739,"display_name":"Pratik Gaurav"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691694209,"creation_date":1691565060,"question_id":76865400,"body_markdown":"I&#39;m writing a helidon web-client, I&#39;m getting \r\n\r\n```\r\nCaused by: io.helidon.webclient.WebClientException: Request failed with code 302\r\n```\r\n\r\n```\r\nimport java.util.concurrent.ExecutionException;\r\nimport io.helidon.media.jsonp.JsonpSupport;\r\nimport io.helidon.webclient.WebClient;\r\nimport jakarta.enterprise.context.RequestScoped;\r\nimport jakarta.json.JsonArray;\r\nimport jakarta.ws.rs.GET;\r\nimport jakarta.ws.rs.Path;\r\n@Path(&quot;/consumer&quot;)\r\n@RequestScoped\r\npublic class ConsumerController {\r\n\t\r\n\tprivate String producerUrl=&quot;http://localhost:8080/books-db/&quot;;\r\n\t\r\n\t@GET\r\n\tpublic JsonArray getBookData(){\r\n\t\tSystem.out.println(&quot;producerUrl :: &quot;+producerUrl);\r\n\t\ttry {\r\n\t\tWebClient client = WebClient.builder().baseUri(producerUrl)\r\n\t\t\t\t.addMediaSupport(JsonpSupport.create()).addHeader(&quot;Accept&quot;, &quot;application/json&quot;).build();\r\n\t\t\t\treturn client.method(&quot;GET&quot;).request(JsonArray.class).get();\r\n\t\t}\r\n\t\tcatch(InterruptedException | ExecutionException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\r\n\t}\r\n}\r\n\r\n```\r\n\r\nThe entire stack trace is:\r\n```\r\n2023.08.09 12:17:27 INFO io.helidon.common.LogConfig Thread[main,5,main]: Logging at initialization configured using classpath: /logging.properties\r\n2023.08.09 12:17:27 INFO io.helidon.microprofile.server.ServerCdiExtension Thread[main,5,main]: Registering JAX-RS Application: HelidonMP\r\n2023.08.09 12:17:28 INFO io.helidon.webserver.NettyWebServer Thread[nioEventLoopGroup-2-1,10,main]: Channel &#39;@default&#39; started: [id: 0xeba066a3, L:/[0:0:0:0:0:0:0:0]:9090]\r\n2023.08.09 12:17:28 INFO io.helidon.microprofile.server.ServerCdiExtension Thread[main,5,main]: Server started on http://localhost:9090 (and all other host addresses) in 1019 milliseconds (since JVM startup).\r\n2023.08.09 12:17:28 INFO io.helidon.common.HelidonFeatures Thread[features-thread,5,main]: Helidon MP 3.2.2 features: [CDI, Config, Health, JAX-RS, Metrics, Open API, Server]\r\nproducerUrl :: http://localhost:8080/books-db/\r\njava.util.concurrent.ExecutionException: io.helidon.webclient.WebClientException: Request failed with code 302\r\n\tat java.base/java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:396)\r\n\tat java.base/java.util.concurrent.CompletableFuture.get(CompletableFuture.java:2073)\r\n\tat io.helidon.common.reactive.Single.get(Single.java:730)\r\n\tat com.oracle.controller.ConsumerController.getBookData(ConsumerController.java:25)\r\n\tat com.oracle.controller.ConsumerController$Proxy$_$$_WeldClientProxy.getBookData(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory.lambda$static$0(ResourceMethodInvocationHandlerFactory.java:52)\r\n\tat org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:134)\r\n\tat org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:177)\r\n\tat org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$TypeOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:219)\r\n\tat org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:81)\r\n\tat org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:478)\r\n\tat org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:400)\r\n\tat org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:81)\r\n\tat org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:256)\r\n\tat org.glassfish.jersey.internal.Errors$1.call(Errors.java:248)\r\n\tat org.glassfish.jersey.internal.Errors$1.call(Errors.java:244)\r\n\tat org.glassfish.jersey.internal.Errors.process(Errors.java:292)\r\n\tat org.glassfish.jersey.internal.Errors.process(Errors.java:274)\r\n\tat org.glassfish.jersey.internal.Errors.process(Errors.java:244)\r\n\tat org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:265)\r\n\tat org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:235)\r\n\tat org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:684)\r\n\tat io.helidon.webserver.jersey.JerseySupport$JerseyHandler.lambda$doAccept$6(JerseySupport.java:339)\r\n\tat io.helidon.common.context.Contexts.runInContext(Contexts.java:117)\r\n\tat io.helidon.common.context.ContextAwareExecutorImpl.lambda$wrap$7(ContextAwareExecutorImpl.java:154)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n\tat java.base/java.lang.Thread.run(Thread.java:833)\r\nCaused by: io.helidon.webclient.WebClientException: Request failed with code 302\r\n\tat io.helidon.webclient.WebClientRequestBuilderImpl.getContentFromClientResponse(WebClientRequestBuilderImpl.java:682)\r\n\tat io.helidon.common.reactive.MultiMapperPublisher$MapperSubscriber.onNext(MultiMapperPublisher.java:73)\r\n\tat io.helidon.common.reactive.SingleFromPublisher$SingleSubscriber.onComplete(SingleFromPublisher.java:86)\r\n\tat io.helidon.common.context.Contexts.runInContext(Contexts.java:117)\r\n\tat io.helidon.webclient.WebClientRequestBuilderImpl.runInContext(WebClientRequestBuilderImpl.java:641)\r\n\tat io.helidon.webclient.WebClientRequestBuilderImpl$1.onComplete(WebClientRequestBuilderImpl.java:674)\r\n\tat io.helidon.common.reactive.DeferredScalarSubscription.complete(DeferredScalarSubscription.java:92)\r\n\tat io.helidon.common.reactive.MultiFromCompletionStage$CompletionStageSubscription.accept(MultiFromCompletionStage.java:72)\r\n\tat io.helidon.common.reactive.MultiFromCompletionStage$CompletionStageSubscription.accept(MultiFromCompletionStage.java:52)\r\n\tat io.helidon.common.reactive.MultiFromCompletionStage$AtomicBiConsumer.accept(MultiFromCompletionStage.java:95)\r\n\tat io.helidon.common.reactive.MultiFromCompletionStage$AtomicBiConsumer.accept(MultiFromCompletionStage.java:88)\r\n\tat java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:863)\r\n\tat java.base/java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:841)\r\n\tat java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)\r\n\tat java.base/java.util.concurrent.CompletableFuture.complete(CompletableFuture.java:2147)\r\n\tat io.helidon.webclient.NettyClientHandler.lambda$channelRead0$7(NettyClientHandler.java:190)\r\n\tat java.base/java.util.concurrent.CompletableFuture.uniRunNow(CompletableFuture.java:819)\r\n\tat java.base/java.util.concurrent.CompletableFuture.uniRunStage(CompletableFuture.java:803)\r\n\tat java.base/java.util.concurrent.CompletableFuture.thenRun(CompletableFuture.java:2195)\r\n\tat io.helidon.webclient.NettyClientHandler.lambda$channelRead0$9(NettyClientHandler.java:183)\r\n\tat java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:863)\r\n\tat java.base/java.util.concurrent.CompletableFuture.uniWhenCompleteStage(CompletableFuture.java:887)\r\n\tat java.base/java.util.concurrent.CompletableFuture.whenComplete(CompletableFuture.java:2325)\r\n\tat java.base/java.util.concurrent.CompletableFuture.whenComplete(CompletableFuture.java:144)\r\n\tat io.helidon.webclient.NettyClientHandler.channelRead0(NettyClientHandler.java:176)\r\n\tat io.helidon.webclient.NettyClientHandler.channelRead0(NettyClientHandler.java:61)\r\n\tat io.netty.channel.SimpleChannelInboundHandler.channelRead(SimpleChannelInboundHandler.java:99)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n\tat io.netty.handler.timeout.IdleStateHandler.channelRead(IdleStateHandler.java:286)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n\tat io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:103)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n\tat io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelRead(CombinedChannelDuplexHandler.java:436)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:346)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:333)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:454)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:290)\r\n\tat io.netty.channel.CombinedChannelDuplexHandler.channelRead(CombinedChannelDuplexHandler.java:251)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n\tat io.netty.handler.logging.LoggingHandler.channelRead(LoggingHandler.java:280)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n\tat io.netty.handler.timeout.IdleStateHandler.channelRead(IdleStateHandler.java:286)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n\tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\r\n\tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)\r\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\r\n\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n\t... 5 more\r\n\r\n```\r\n\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/lxj9S.png","title":"Helidon : Caused by: io.helidon.webclient.WebClientException: Request failed with code 302","body":"<p>I'm writing a helidon web-client, I'm getting</p>\n<pre><code>Caused by: io.helidon.webclient.WebClientException: Request failed with code 302\n</code></pre>\n<pre><code>import java.util.concurrent.ExecutionException;\nimport io.helidon.media.jsonp.JsonpSupport;\nimport io.helidon.webclient.WebClient;\nimport jakarta.enterprise.context.RequestScoped;\nimport jakarta.json.JsonArray;\nimport jakarta.ws.rs.GET;\nimport jakarta.ws.rs.Path;\n@Path(&quot;/consumer&quot;)\n@RequestScoped\npublic class ConsumerController {\n    \n    private String producerUrl=&quot;http://localhost:8080/books-db/&quot;;\n    \n    @GET\n    public JsonArray getBookData(){\n        System.out.println(&quot;producerUrl :: &quot;+producerUrl);\n        try {\n        WebClient client = WebClient.builder().baseUri(producerUrl)\n                .addMediaSupport(JsonpSupport.create()).addHeader(&quot;Accept&quot;, &quot;application/json&quot;).build();\n                return client.method(&quot;GET&quot;).request(JsonArray.class).get();\n        }\n        catch(InterruptedException | ExecutionException e) {\n            e.printStackTrace();\n            return null;\n        }\n    \n    }\n}\n\n</code></pre>\n<p>The entire stack trace is:</p>\n<pre><code>2023.08.09 12:17:27 INFO io.helidon.common.LogConfig Thread[main,5,main]: Logging at initialization configured using classpath: /logging.properties\n2023.08.09 12:17:27 INFO io.helidon.microprofile.server.ServerCdiExtension Thread[main,5,main]: Registering JAX-RS Application: HelidonMP\n2023.08.09 12:17:28 INFO io.helidon.webserver.NettyWebServer Thread[nioEventLoopGroup-2-1,10,main]: Channel '@default' started: [id: 0xeba066a3, L:/[0:0:0:0:0:0:0:0]:9090]\n2023.08.09 12:17:28 INFO io.helidon.microprofile.server.ServerCdiExtension Thread[main,5,main]: Server started on http://localhost:9090 (and all other host addresses) in 1019 milliseconds (since JVM startup).\n2023.08.09 12:17:28 INFO io.helidon.common.HelidonFeatures Thread[features-thread,5,main]: Helidon MP 3.2.2 features: [CDI, Config, Health, JAX-RS, Metrics, Open API, Server]\nproducerUrl :: http://localhost:8080/books-db/\njava.util.concurrent.ExecutionException: io.helidon.webclient.WebClientException: Request failed with code 302\n    at java.base/java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:396)\n    at java.base/java.util.concurrent.CompletableFuture.get(CompletableFuture.java:2073)\n    at io.helidon.common.reactive.Single.get(Single.java:730)\n    at com.oracle.controller.ConsumerController.getBookData(ConsumerController.java:25)\n    at com.oracle.controller.ConsumerController$Proxy$_$$_WeldClientProxy.getBookData(Unknown Source)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory.lambda$static$0(ResourceMethodInvocationHandlerFactory.java:52)\n    at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:134)\n    at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:177)\n    at org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$TypeOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:219)\n    at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:81)\n    at org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:478)\n    at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:400)\n    at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:81)\n    at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:256)\n    at org.glassfish.jersey.internal.Errors$1.call(Errors.java:248)\n    at org.glassfish.jersey.internal.Errors$1.call(Errors.java:244)\n    at org.glassfish.jersey.internal.Errors.process(Errors.java:292)\n    at org.glassfish.jersey.internal.Errors.process(Errors.java:274)\n    at org.glassfish.jersey.internal.Errors.process(Errors.java:244)\n    at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:265)\n    at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:235)\n    at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:684)\n    at io.helidon.webserver.jersey.JerseySupport$JerseyHandler.lambda$doAccept$6(JerseySupport.java:339)\n    at io.helidon.common.context.Contexts.runInContext(Contexts.java:117)\n    at io.helidon.common.context.ContextAwareExecutorImpl.lambda$wrap$7(ContextAwareExecutorImpl.java:154)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\n    at java.base/java.lang.Thread.run(Thread.java:833)\nCaused by: io.helidon.webclient.WebClientException: Request failed with code 302\n    at io.helidon.webclient.WebClientRequestBuilderImpl.getContentFromClientResponse(WebClientRequestBuilderImpl.java:682)\n    at io.helidon.common.reactive.MultiMapperPublisher$MapperSubscriber.onNext(MultiMapperPublisher.java:73)\n    at io.helidon.common.reactive.SingleFromPublisher$SingleSubscriber.onComplete(SingleFromPublisher.java:86)\n    at io.helidon.common.context.Contexts.runInContext(Contexts.java:117)\n    at io.helidon.webclient.WebClientRequestBuilderImpl.runInContext(WebClientRequestBuilderImpl.java:641)\n    at io.helidon.webclient.WebClientRequestBuilderImpl$1.onComplete(WebClientRequestBuilderImpl.java:674)\n    at io.helidon.common.reactive.DeferredScalarSubscription.complete(DeferredScalarSubscription.java:92)\n    at io.helidon.common.reactive.MultiFromCompletionStage$CompletionStageSubscription.accept(MultiFromCompletionStage.java:72)\n    at io.helidon.common.reactive.MultiFromCompletionStage$CompletionStageSubscription.accept(MultiFromCompletionStage.java:52)\n    at io.helidon.common.reactive.MultiFromCompletionStage$AtomicBiConsumer.accept(MultiFromCompletionStage.java:95)\n    at io.helidon.common.reactive.MultiFromCompletionStage$AtomicBiConsumer.accept(MultiFromCompletionStage.java:88)\n    at java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:863)\n    at java.base/java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:841)\n    at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)\n    at java.base/java.util.concurrent.CompletableFuture.complete(CompletableFuture.java:2147)\n    at io.helidon.webclient.NettyClientHandler.lambda$channelRead0$7(NettyClientHandler.java:190)\n    at java.base/java.util.concurrent.CompletableFuture.uniRunNow(CompletableFuture.java:819)\n    at java.base/java.util.concurrent.CompletableFuture.uniRunStage(CompletableFuture.java:803)\n    at java.base/java.util.concurrent.CompletableFuture.thenRun(CompletableFuture.java:2195)\n    at io.helidon.webclient.NettyClientHandler.lambda$channelRead0$9(NettyClientHandler.java:183)\n    at java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:863)\n    at java.base/java.util.concurrent.CompletableFuture.uniWhenCompleteStage(CompletableFuture.java:887)\n    at java.base/java.util.concurrent.CompletableFuture.whenComplete(CompletableFuture.java:2325)\n    at java.base/java.util.concurrent.CompletableFuture.whenComplete(CompletableFuture.java:144)\n    at io.helidon.webclient.NettyClientHandler.channelRead0(NettyClientHandler.java:176)\n    at io.helidon.webclient.NettyClientHandler.channelRead0(NettyClientHandler.java:61)\n    at io.netty.channel.SimpleChannelInboundHandler.channelRead(SimpleChannelInboundHandler.java:99)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\n    at io.netty.handler.timeout.IdleStateHandler.channelRead(IdleStateHandler.java:286)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\n    at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:103)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\n    at io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelRead(CombinedChannelDuplexHandler.java:436)\n    at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:346)\n    at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:333)\n    at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:454)\n    at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:290)\n    at io.netty.channel.CombinedChannelDuplexHandler.channelRead(CombinedChannelDuplexHandler.java:251)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\n    at io.netty.handler.logging.LoggingHandler.channelRead(LoggingHandler.java:280)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\n    at io.netty.handler.timeout.IdleStateHandler.channelRead(IdleStateHandler.java:286)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\n    at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n    at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\n    at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)\n    at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)\n    at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)\n    at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)\n    at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\n    at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\n    at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\n    ... 5 more\n\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/lxj9S.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lxj9S.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","lambda","java-8"],"comments":[{"owner":{"account_id":137113,"reputation":11637,"user_id":341091,"accept_rate":75,"display_name":"Martin"},"score":46,"creation_date":1399968504,"post_id":13604703,"comment_id":36275149,"body_markdown":"Good question. And you are right: None of the tutorials contain that part.","body":"Good question. And you are right: None of the tutorials contain that part."}],"answers":[{"comments":[{"owner":{"account_id":1191,"reputation":58105,"user_id":1585,"accept_rate":73,"display_name":"Marius"},"score":11,"creation_date":1354104605,"post_id":13604748,"comment_id":18650973,"body_markdown":"Will there be built-in interfaces to be used, or must I create an interface for every lambda I want to take?","body":"Will there be built-in interfaces to be used, or must I create an interface for every lambda I want to take?"},{"owner":{"account_id":2132732,"reputation":681,"user_id":1893172,"accept_rate":40,"display_name":"Will Byrne"},"score":1,"creation_date":1433967754,"post_id":13604748,"comment_id":49585162,"body_markdown":"A good compromise to the reusability vs. descriptive name dilemma would be to extend the built in interface without overriding the method it specifies. That gives you your descriptive name with only a single additional line of code.","body":"A good compromise to the reusability vs. descriptive name dilemma would be to extend the built in interface without overriding the method it specifies. That gives you your descriptive name with only a single additional line of code."},{"owner":{"account_id":300331,"reputation":50767,"user_id":607407,"accept_rate":71,"display_name":"Tom&#225;š Zato"},"score":2,"creation_date":1451969121,"post_id":13604748,"comment_id":56954205,"body_markdown":"I don&#39;t get it. He can pass lambda for anything and it will work? What happens if he passes `(int a, int b, int c)` for `TwoArgIntOperator`. What happens if `TwoArgIntOperator` has **two** methods with the same signature. This answer is confusing.","body":"I don&#39;t get it. He can pass lambda for anything and it will work? What happens if he passes <code>(int a, int b, int c)</code> for <code>TwoArgIntOperator</code>. What happens if <code>TwoArgIntOperator</code> has <b>two</b> methods with the same signature. This answer is confusing."},{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":9,"creation_date":1452102942,"post_id":13604748,"comment_id":57024501,"body_markdown":"@Tom&#225;šZato: if you use a lambda with non-matching arguments the compiler will complain. And interfaces with two (non-default) methods will not be usable as lambdas, as only [functional interfaces](http://www.lambdafaq.org/what-is-a-functional-interface/) can be used.","body":"@Tom&#225;šZato: if you use a lambda with non-matching arguments the compiler will complain. And interfaces with two (non-default) methods will not be usable as lambdas, as only <a href=\"http://www.lambdafaq.org/what-is-a-functional-interface/\" rel=\"nofollow noreferrer\">functional interfaces</a> can be used."},{"owner":{"account_id":897936,"reputation":2966,"user_id":934796,"accept_rate":71,"display_name":"instanceOfObject"},"score":0,"creation_date":1507931451,"post_id":13604748,"comment_id":80423905,"body_markdown":"A basic question: I think I still don&#39;t understand the aspect of passing a method as a parameter with the parameters of that method missing. If he is passing TwoArgIntOperator as a parameter and he needs to pass the parameter of that method separately, doesn&#39;t it look ugly? Is there a way to pass the complete execution body along with the parameter? Like in your example, a way to avoid hardcoding &quot;5&quot; and &quot;10&quot;.","body":"A basic question: I think I still don&#39;t understand the aspect of passing a method as a parameter with the parameters of that method missing. If he is passing TwoArgIntOperator as a parameter and he needs to pass the parameter of that method separately, doesn&#39;t it look ugly? Is there a way to pass the complete execution body along with the parameter? Like in your example, a way to avoid hardcoding &quot;5&quot; and &quot;10&quot;."},{"owner":{"account_id":1094163,"reputation":3336,"user_id":7023816,"display_name":"Cameron Hudson"},"score":0,"creation_date":1551569842,"post_id":13604748,"comment_id":96689012,"body_markdown":"This example doesn&#39;t show a lambda being used... Am I missing something?","body":"This example doesn&#39;t show a lambda being used... Am I missing something?"},{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1551575057,"post_id":13604748,"comment_id":96689910,"body_markdown":"@CameronHudson: the question is about how to *define a method that takes a Lambda*. I assumed that those who care about that already know how to *use* a lambda (it&#39;s even shown in the question).","body":"@CameronHudson: the question is about how to <i>define a method that takes a Lambda</i>. I assumed that those who care about that already know how to <i>use</i> a lambda (it&#39;s even shown in the question)."},{"owner":{"account_id":295869,"reputation":73614,"user_id":600500,"accept_rate":54,"display_name":"Paŭlo Ebermann"},"score":1,"creation_date":1590438947,"post_id":13604748,"comment_id":109674996,"body_markdown":"@instanceOfObject the idea is that whoever you are passing that method/lambda/function to knows by itself what parameters to use, but doesn&#39;t know what function to call. The most known examples would be all the Stream manipulations from java.util.stream.*. If you want to pass method + parameters, you basically have a parameterless function (from the point of view of whoever is calling it), and can use `Runnable` or `Producer&lt;T&gt;` (depending on whether the return value is needed) as your functional interface.","body":"@instanceOfObject the idea is that whoever you are passing that method/lambda/function to knows by itself what parameters to use, but doesn&#39;t know what function to call. The most known examples would be all the Stream manipulations from java.util.stream.*. If you want to pass method + parameters, you basically have a parameterless function (from the point of view of whoever is calling it), and can use <code>Runnable</code> or <code>Producer&lt;T&gt;</code> (depending on whether the return value is needed) as your functional interface."}],"tags":[],"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"comment_count":8,"down_vote_count":4,"up_vote_count":326,"is_accepted":true,"score":322,"last_activity_date":1648226455,"creation_date":1354104543,"answer_id":13604748,"question_id":13604703,"body_markdown":"Lambdas are purely a call-site construct: the recipient of the lambda does not need to know that a Lambda is involved, instead it accepts an Interface with the appropriate method.\r\n\r\nIn other words, you define or use a functional interface (i.e. an interface with a single method) that accepts and returns exactly what you want.\r\n\r\nSince Java 8 there is a set of commonly-used interface types in [`java.util.function`][1].\r\n\r\nFor this specific use case there&#39;s [`java.util.function.IntBinaryOperator`][2] with [a single `int applyAsInt(int left, int right)` method][3], so you could write your `method` like this:\r\n\r\n    static int method(IntBinaryOperator op){\r\n        return op.applyAsInt(5, 10);\r\n    }\r\n\r\nBut you can just as well define your own interface and use it like this:\r\n\r\n    public interface TwoArgIntOperator {\r\n        public int op(int a, int b);\r\n    }\r\n\r\n    //elsewhere:\r\n    static int method(TwoArgIntOperator operator) {\r\n        return operator.op(5, 10);\r\n    }\r\n\r\nThen call the method with a lambda as parameter:\r\n\r\n    public static void main(String[] args) {\r\n        TwoArgIntOperator addTwoInts = (a, b) -&gt; a + b;\r\n        int result = method(addTwoInts);\r\n        System.out.println(&quot;Result: &quot; + result);\r\n    }\r\n\r\nUsing your own interface has the advantage that you can have names that more clearly indicate the intent.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/package-summary.html\r\n  [2]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/IntBinaryOperator.html\r\n  [3]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/IntBinaryOperator.html#applyAsInt(int,int)","title":"How do I define a method which takes a lambda as a parameter in Java 8?","body":"<p>Lambdas are purely a call-site construct: the recipient of the lambda does not need to know that a Lambda is involved, instead it accepts an Interface with the appropriate method.</p>\n<p>In other words, you define or use a functional interface (i.e. an interface with a single method) that accepts and returns exactly what you want.</p>\n<p>Since Java 8 there is a set of commonly-used interface types in <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/package-summary.html\" rel=\"noreferrer\"><code>java.util.function</code></a>.</p>\n<p>For this specific use case there's <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/IntBinaryOperator.html\" rel=\"noreferrer\"><code>java.util.function.IntBinaryOperator</code></a> with <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/IntBinaryOperator.html#applyAsInt(int,int)\" rel=\"noreferrer\">a single <code>int applyAsInt(int left, int right)</code> method</a>, so you could write your <code>method</code> like this:</p>\n<pre><code>static int method(IntBinaryOperator op){\n    return op.applyAsInt(5, 10);\n}\n</code></pre>\n<p>But you can just as well define your own interface and use it like this:</p>\n<pre><code>public interface TwoArgIntOperator {\n    public int op(int a, int b);\n}\n\n//elsewhere:\nstatic int method(TwoArgIntOperator operator) {\n    return operator.op(5, 10);\n}\n</code></pre>\n<p>Then call the method with a lambda as parameter:</p>\n<pre><code>public static void main(String[] args) {\n    TwoArgIntOperator addTwoInts = (a, b) -&gt; a + b;\n    int result = method(addTwoInts);\n    System.out.println(&quot;Result: &quot; + result);\n}\n</code></pre>\n<p>Using your own interface has the advantage that you can have names that more clearly indicate the intent.</p>\n"},{"comments":[{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":2,"creation_date":1354116884,"post_id":13605634,"comment_id":18657481,"body_markdown":"Thanks for the link and the fact that you maintain that site! I took the liberty to add links to your public JavaDoc to my answer.","body":"Thanks for the link and the fact that you maintain that site! I took the liberty to add links to your public JavaDoc to my answer."},{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":1,"creation_date":1354117164,"post_id":13605634,"comment_id":18657617,"body_markdown":"As a side note: It seems you&#39;re building for Lambdas what Angelika Langer has [built for Generics](http://www.angelikalanger.com/GenericsFAQ/JavaGenericsFAQ.html). Thanks for that, Java needs such resources!","body":"As a side note: It seems you&#39;re building for Lambdas what Angelika Langer has <a href=\"http://www.angelikalanger.com/GenericsFAQ/JavaGenericsFAQ.html\" rel=\"nofollow noreferrer\">built for Generics</a>. Thanks for that, Java needs such resources!"},{"owner":{"account_id":1019282,"reputation":3616,"user_id":1030125,"display_name":"ClearLogic"},"score":1,"creation_date":1528844382,"post_id":13605634,"comment_id":88658539,"body_markdown":"While this link may answer the question, it is better to include the essential parts of the answer here and provide the link for reference.  Link-only answers can become invalid if the linked page changes. - [From Review](/review/low-quality-posts/20004706)","body":"While this link may answer the question, it is better to include the essential parts of the answer here and provide the link for reference.  Link-only answers can become invalid if the linked page changes. - <a href=\"/review/low-quality-posts/20004706\">From Review</a>"},{"owner":{"account_id":29398,"reputation":10394,"user_id":1859863,"display_name":"Maurice Naftalin"},"score":0,"creation_date":1528968653,"post_id":13605634,"comment_id":88710967,"body_markdown":"@ClearLogic Yes, agreed. AFAIR I didn&#39;t want to add anything to existing answers but only to point out where I had posted a copy of the API documentation, which at that time wasn&#39;t otherwise easily accessible.","body":"@ClearLogic Yes, agreed. AFAIR I didn&#39;t want to add anything to existing answers but only to point out where I had posted a copy of the API documentation, which at that time wasn&#39;t otherwise easily accessible."}],"tags":[],"owner":{"account_id":29398,"reputation":10394,"user_id":1859863,"display_name":"Maurice Naftalin"},"comment_count":4,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1528968472,"creation_date":1354107564,"answer_id":13605634,"question_id":13604703,"body_markdown":"There&#39;s a public Web-accessible version of the Lambda-enabled Java 8 JavaDocs, linked from http://lambdafaq.org/lambda-resources.  (This should obviously be a comment on Joachim Sauer&#39;s answer, but I can&#39;t get into my SO account with the reputation points I need to add a comment.)  The lambdafaq site (I maintain it) answers this and a lot of other Java-lambda questions.\r\n\r\nNB This answer was written before the Java 8 GA documentation became [publicly available][1]. I&#39;ve left in place, though, because the [Lambda FAQ][2] might still be useful to people learning about features introduced in Java 8.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/\r\n  [2]: http://lambdafaq.org","title":"How do I define a method which takes a lambda as a parameter in Java 8?","body":"<p>There's a public Web-accessible version of the Lambda-enabled Java 8 JavaDocs, linked from <a href=\"http://lambdafaq.org/lambda-resources\" rel=\"nofollow noreferrer\">http://lambdafaq.org/lambda-resources</a>.  (This should obviously be a comment on Joachim Sauer's answer, but I can't get into my SO account with the reputation points I need to add a comment.)  The lambdafaq site (I maintain it) answers this and a lot of other Java-lambda questions.</p>\n\n<p>NB This answer was written before the Java 8 GA documentation became <a href=\"https://docs.oracle.com/javase/8/docs/api/\" rel=\"nofollow noreferrer\">publicly available</a>. I've left in place, though, because the <a href=\"http://lambdafaq.org\" rel=\"nofollow noreferrer\">Lambda FAQ</a> might still be useful to people learning about features introduced in Java 8.</p>\n"},{"comments":[{"owner":{"account_id":5890189,"reputation":513,"user_id":4637060,"display_name":"Hendrikto"},"score":0,"creation_date":1461699716,"post_id":22510656,"comment_id":61315238,"body_markdown":"The link to the `IntBinaryOperator` documentation is dead.","body":"The link to the <code>IntBinaryOperator</code> documentation is dead."},{"owner":{"account_id":2813952,"reputation":301,"user_id":2419556,"accept_rate":0,"display_name":"JimmySmithJR"},"score":1,"creation_date":1478826032,"post_id":22510656,"comment_id":68318537,"body_markdown":"this is the best example of lambda&#39;s I&#39;ve found so far, and it was the only one that really had me &#39;get&#39; it finally.","body":"this is the best example of lambda&#39;s I&#39;ve found so far, and it was the only one that really had me &#39;get&#39; it finally."},{"owner":{"account_id":3774,"reputation":205987,"user_id":5486,"accept_rate":59,"display_name":"Ryan Lundy"},"score":1,"creation_date":1524145557,"post_id":22510656,"comment_id":86861008,"body_markdown":"Sooooooo...basically a delegate, but we&#39;re not supposed to call it that?","body":"Sooooooo...basically a delegate, but we&#39;re not supposed to call it that?"},{"owner":{"account_id":4876099,"reputation":421,"user_id":4455546,"display_name":"Clement Cherlin"},"score":1,"creation_date":1618241867,"post_id":22510656,"comment_id":118537045,"body_markdown":"This answer doesn&#39;t answer the question, which is &quot;how to make a method taking a lambda as a parameter&quot;, not &quot;how to create and use a lambda&quot;.","body":"This answer doesn&#39;t answer the question, which is &quot;how to make a method taking a lambda as a parameter&quot;, not &quot;how to create and use a lambda&quot;."}],"tags":[],"owner":{"account_id":3037387,"reputation":5468,"user_id":2575134,"display_name":"pardeep131085"},"comment_count":4,"down_vote_count":0,"up_vote_count":74,"is_accepted":false,"score":74,"last_activity_date":1604154006,"creation_date":1395242926,"answer_id":22510656,"question_id":13604703,"body_markdown":"To use Lambda expression you need to either create your own functional interface or use Java functional interface for operation that require two integer and return as value. [IntBinaryOperator][1]\r\n\r\n\r\n**Using user defined functional interface**\r\n\r\n    interface TwoArgInterface {\r\n    \r\n        public int operation(int a, int b);\r\n    }\r\n\r\n    public class MyClass {\r\n    \r\n        public static void main(String javalatte[]) {\r\n            // this is lambda expression\r\n            TwoArgInterface plusOperation = (a, b) -&gt; a + b;\r\n            System.out.println(&quot;Sum of 10,34 : &quot; + plusOperation.operation(10, 34));\r\n    \r\n        }\r\n    }\r\n\r\n**Using Java functional interface**\r\n\r\n    import java.util.function.IntBinaryOperator;\r\n    \r\n    public class MyClass1 {\r\n    \r\n        static void main(String javalatte[]) {\r\n            // this is lambda expression\r\n            IntBinaryOperator plusOperation = (a, b) -&gt; a + b;\r\n            System.out.println(&quot;Sum of 10,34 : &quot; + plusOperation.applyAsInt(10, 34));\r\n    \r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/function/IntBinaryOperator.html\r\n","title":"How do I define a method which takes a lambda as a parameter in Java 8?","body":"<p>To use Lambda expression you need to either create your own functional interface or use Java functional interface for operation that require two integer and return as value. <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/function/IntBinaryOperator.html\" rel=\"noreferrer\">IntBinaryOperator</a></p>\n<p><strong>Using user defined functional interface</strong></p>\n<pre><code>interface TwoArgInterface {\n\n    public int operation(int a, int b);\n}\n\npublic class MyClass {\n\n    public static void main(String javalatte[]) {\n        // this is lambda expression\n        TwoArgInterface plusOperation = (a, b) -&gt; a + b;\n        System.out.println(&quot;Sum of 10,34 : &quot; + plusOperation.operation(10, 34));\n\n    }\n}\n</code></pre>\n<p><strong>Using Java functional interface</strong></p>\n<pre><code>import java.util.function.IntBinaryOperator;\n\npublic class MyClass1 {\n\n    static void main(String javalatte[]) {\n        // this is lambda expression\n        IntBinaryOperator plusOperation = (a, b) -&gt; a + b;\n        System.out.println(&quot;Sum of 10,34 : &quot; + plusOperation.applyAsInt(10, 34));\n\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6304904,"reputation":590,"user_id":4898269,"display_name":"David Wu"},"comment_count":0,"down_vote_count":0,"up_vote_count":49,"is_accepted":false,"score":49,"last_activity_date":1432696772,"creation_date":1432696772,"answer_id":30472555,"question_id":13604703,"body_markdown":"**For functions that do not have more than 2 parameters, you can pass them without defining your own interface. For example,**\r\n\r\n    class Klass {\r\n      static List&lt;String&gt; foo(Integer a, String b) { ... }\r\n    }\r\n\r\n    class MyClass{\r\n  \r\n      static List&lt;String&gt; method(BiFunction&lt;Integer, String, List&lt;String&gt;&gt; fn){\r\n        return fn.apply(5, &quot;FooBar&quot;);\r\n      }\r\n    }\r\n\r\n    List&lt;String&gt; lStr = MyClass.method((a, b) -&gt; Klass.foo((Integer) a, (String) b));\r\n\r\nIn **`BiFunction&lt;Integer, String, List&lt;String&gt;&gt;`**, `Integer` and `String` are its parameters, and `List&lt;String&gt;` is its return type. \r\n\r\nFor a function with only one parameter, you can use **`Function&lt;T, R&gt;`**, where **`T`** is its parameter type, and **`R`** is its return value type.  Refer to this [page](https://docs.oracle.com/javase/8/docs/api/java/util/function/package-summary.html) for all the interfaces that are already made available by Java.   ","title":"How do I define a method which takes a lambda as a parameter in Java 8?","body":"<p><strong>For functions that do not have more than 2 parameters, you can pass them without defining your own interface. For example,</strong></p>\n\n<pre><code>class Klass {\n  static List&lt;String&gt; foo(Integer a, String b) { ... }\n}\n\nclass MyClass{\n\n  static List&lt;String&gt; method(BiFunction&lt;Integer, String, List&lt;String&gt;&gt; fn){\n    return fn.apply(5, \"FooBar\");\n  }\n}\n\nList&lt;String&gt; lStr = MyClass.method((a, b) -&gt; Klass.foo((Integer) a, (String) b));\n</code></pre>\n\n<p>In <strong><code>BiFunction&lt;Integer, String, List&lt;String&gt;&gt;</code></strong>, <code>Integer</code> and <code>String</code> are its parameters, and <code>List&lt;String&gt;</code> is its return type. </p>\n\n<p>For a function with only one parameter, you can use <strong><code>Function&lt;T, R&gt;</code></strong>, where <strong><code>T</code></strong> is its parameter type, and <strong><code>R</code></strong> is its return value type.  Refer to this <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/function/package-summary.html\">page</a> for all the interfaces that are already made available by Java.   </p>\n"},{"tags":[],"owner":{"account_id":6236104,"reputation":681,"user_id":4851359,"display_name":"infoj"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1485703329,"creation_date":1439312971,"answer_id":31947904,"question_id":13604703,"body_markdown":"Lambda expression can be passed as a argument.To pass a lambda expression as an argument the type of the parameter (which receives the lambda expression as an argument) must be of functional interface type.\r\n\r\nIf there is a functional interface - \r\n\r\n    interface IMyFunc {\r\n       boolean test(int num);\r\n    }\r\nAnd there is a filter method which adds the int in the list only if it is greater than 5. Note here that filter method has funtional interface IMyFunc as one of the parameter. In that case lambda expression can be passed as an argument for the method parameter.\r\n\r\n    public class LambdaDemo {\r\n        public static List&lt;Integer&gt; filter(IMyFunc testNum, List&lt;Integer&gt; listItems) {\r\n            List&lt;Integer&gt; result = new ArrayList&lt;Integer&gt;();\r\n            for(Integer item: listItems) {\r\n                if(testNum.test(item)) {\r\n                    result.add(item);\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n        public static void main(String[] args) {\r\n            List&lt;Integer&gt; myList = new ArrayList&lt;Integer&gt;();\r\n            myList.add(1);\r\n            myList.add(4);\r\n            myList.add(6);\r\n            myList.add(7);\r\n            // calling filter method with a lambda expression\r\n            // as one of the param\r\n            Collection&lt;Integer&gt; values = filter(n -&gt; n &gt; 5, myList);\r\n                    \r\n            System.out.println(&quot;Filtered values &quot; + values);\r\n        }\r\n    }\r\n\r\n","title":"How do I define a method which takes a lambda as a parameter in Java 8?","body":"<p>Lambda expression can be passed as a argument.To pass a lambda expression as an argument the type of the parameter (which receives the lambda expression as an argument) must be of functional interface type.</p>\n\n<p>If there is a functional interface - </p>\n\n<pre><code>interface IMyFunc {\n   boolean test(int num);\n}\n</code></pre>\n\n<p>And there is a filter method which adds the int in the list only if it is greater than 5. Note here that filter method has funtional interface IMyFunc as one of the parameter. In that case lambda expression can be passed as an argument for the method parameter.</p>\n\n<pre><code>public class LambdaDemo {\n    public static List&lt;Integer&gt; filter(IMyFunc testNum, List&lt;Integer&gt; listItems) {\n        List&lt;Integer&gt; result = new ArrayList&lt;Integer&gt;();\n        for(Integer item: listItems) {\n            if(testNum.test(item)) {\n                result.add(item);\n            }\n        }\n        return result;\n    }\n    public static void main(String[] args) {\n        List&lt;Integer&gt; myList = new ArrayList&lt;Integer&gt;();\n        myList.add(1);\n        myList.add(4);\n        myList.add(6);\n        myList.add(7);\n        // calling filter method with a lambda expression\n        // as one of the param\n        Collection&lt;Integer&gt; values = filter(n -&gt; n &gt; 5, myList);\n\n        System.out.println(\"Filtered values \" + values);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3836319,"reputation":2792,"user_id":5620851,"display_name":"hi.nitish"},"comment_count":0,"down_vote_count":3,"up_vote_count":1,"is_accepted":false,"score":-2,"last_activity_date":1499405461,"creation_date":1489448115,"answer_id":42775316,"question_id":13604703,"body_markdown":"There is flexibility in using lambda as parameter. It enables functional programming in java. The basic syntax is \n\n&gt; param -&gt; method_body\n\nFollowing is a way, you can define a method taking functional interface (lambda is used) as parameter.\na. if you wish to define a method declared inside a functional interface, \nsay, the **functional interface** is given as an argument/parameter to a method called from `main()`\n   \n\n    @FunctionalInterface\n    interface FInterface{\n        int callMeLambda(String temp);\n    }\n    \n\n    class ConcreteClass{\n            \n        void funcUsesAnonymousOrLambda(FInterface fi){\n            System.out.println(&quot;===Executing method arg instantiated with Lambda===&quot;));\n        }\n            \n        public static void main(){\n            // calls a method having FInterface as an argument.\n            funcUsesAnonymousOrLambda(new FInterface() {\n            \n                int callMeLambda(String temp){ //define callMeLambda(){} here..\n                    return 0;\n                }\n            }\n        }\n            \n    /***********Can be replaced by Lambda below*********/\n            funcUsesAnonymousOrLambda( (x) -&gt; {\n                return 0; //(1)\n            }\n           \n        }\n\n&gt; FInterface fi = (x) -&gt; { return 0; };\n&gt; \n&gt; funcUsesAnonymousOrLambda(fi);\n&gt;\n&gt;Here above it can be seen, how a lambda expression can be replaced with an interface.\n\nAbove explains a particular usage of lambda expression, there are more.\nref\nhttps://stackoverflow.com/questions/23451579/java-8-lambda-within-a-lambda-cant-modify-variable-from-outer-lambda\n\n  [1]: http://www.oracle.com/technetwork/articles/java/architect-lambdas-part1-2080972.html\n","title":"How do I define a method which takes a lambda as a parameter in Java 8?","body":"<p>There is flexibility in using lambda as parameter. It enables functional programming in java. The basic syntax is</p>\n<blockquote>\n<p>param -&gt; method_body</p>\n</blockquote>\n<p>Following is a way, you can define a method taking functional interface (lambda is used) as parameter.\na. if you wish to define a method declared inside a functional interface,\nsay, the <strong>functional interface</strong> is given as an argument/parameter to a method called from <code>main()</code></p>\n<pre><code>@FunctionalInterface\ninterface FInterface{\n    int callMeLambda(String temp);\n}\n\n\nclass ConcreteClass{\n        \n    void funcUsesAnonymousOrLambda(FInterface fi){\n        System.out.println(&quot;===Executing method arg instantiated with Lambda===&quot;));\n    }\n        \n    public static void main(){\n        // calls a method having FInterface as an argument.\n        funcUsesAnonymousOrLambda(new FInterface() {\n        \n            int callMeLambda(String temp){ //define callMeLambda(){} here..\n                return 0;\n            }\n        }\n    }\n        \n/***********Can be replaced by Lambda below*********/\n        funcUsesAnonymousOrLambda( (x) -&gt; {\n            return 0; //(1)\n        }\n       \n    }\n</code></pre>\n<blockquote>\n<p>FInterface fi = (x) -&gt; { return 0; };</p>\n<p>funcUsesAnonymousOrLambda(fi);</p>\n<p>Here above it can be seen, how a lambda expression can be replaced with an interface.</p>\n</blockquote>\n<p>Above explains a particular usage of lambda expression, there are more.\nref\n<a href=\"https://stackoverflow.com/questions/23451579/java-8-lambda-within-a-lambda-cant-modify-variable-from-outer-lambda\">Java 8 lambda within a lambda can&#39;t modify variable from outer lambda</a></p>\n"},{"tags":[],"owner":{"account_id":3990598,"reputation":2191,"user_id":3289673,"accept_rate":64,"display_name":"SanchelliosProg"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1524203181,"creation_date":1524203181,"answer_id":49934799,"question_id":13604703,"body_markdown":"Well, that&#39;s easy. The purpose of lambda expression is to implement Functional Interface. It is the interface with only one method. [Here is awesone article about predefined and legacy functional interfaces.][1]\r\n\r\n\r\n  [1]: http://www.baeldung.com/java-8-functional-interfaces\r\n\r\n\r\nAnyway, if you want to implement your own functional interface, make it. Just for simple example:\r\n\r\n    public interface MyFunctionalInterface {\r\n        String makeIt(String s);\r\n    }\r\n\r\nSo let&#39;s make a class, where we will create a method, which accepts the type of *MyFunctionalInterface* :\r\n\r\n    public class Main {\r\n    \r\n        static void printIt(String s, MyFunctionalInterface f) {\r\n            System.out.println(f.makeIt(s));\r\n        }\r\n        \r\n        public static void main(String[] args) {\r\n            \r\n        }\r\n    }\r\nThe last thing you should do is to pass the implementation of the *MyFunctionalInterface* to the method we&#39;ve defined:\r\n\r\n    public class Main {\r\n    \r\n        static void printIt(String s, MyFunctionalInterface f) {\r\n            System.out.println(f.makeIt(s));\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            printIt(&quot;Java&quot;, s -&gt; s + &quot; is Awesome&quot;);\r\n        }\r\n    }\r\nThat&#39;s it!","title":"How do I define a method which takes a lambda as a parameter in Java 8?","body":"<p>Well, that's easy. The purpose of lambda expression is to implement Functional Interface. It is the interface with only one method. <a href=\"http://www.baeldung.com/java-8-functional-interfaces\" rel=\"nofollow noreferrer\">Here is awesone article about predefined and legacy functional interfaces.</a></p>\n\n<p>Anyway, if you want to implement your own functional interface, make it. Just for simple example:</p>\n\n<pre><code>public interface MyFunctionalInterface {\n    String makeIt(String s);\n}\n</code></pre>\n\n<p>So let's make a class, where we will create a method, which accepts the type of <em>MyFunctionalInterface</em> :</p>\n\n<pre><code>public class Main {\n\n    static void printIt(String s, MyFunctionalInterface f) {\n        System.out.println(f.makeIt(s));\n    }\n\n    public static void main(String[] args) {\n\n    }\n}\n</code></pre>\n\n<p>The last thing you should do is to pass the implementation of the <em>MyFunctionalInterface</em> to the method we've defined:</p>\n\n<pre><code>public class Main {\n\n    static void printIt(String s, MyFunctionalInterface f) {\n        System.out.println(f.makeIt(s));\n    }\n\n    public static void main(String[] args) {\n        printIt(\"Java\", s -&gt; s + \" is Awesome\");\n    }\n}\n</code></pre>\n\n<p>That's it!</p>\n"},{"comments":[{"owner":{"account_id":7733764,"reputation":181,"user_id":5855973,"display_name":"Rahul"},"score":0,"creation_date":1615355909,"post_id":50677895,"comment_id":117662274,"body_markdown":"@FuntionalInterface annotation is optional but not mandatory. This can prevent users from adding another abstract method to the interface.","body":"@FuntionalInterface annotation is optional but not mandatory. This can prevent users from adding another abstract method to the interface."}],"tags":[],"owner":{"account_id":8802416,"reputation":171,"user_id":6578100,"display_name":"raja emani"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1528106174,"creation_date":1528106174,"answer_id":50677895,"question_id":13604703,"body_markdown":"Lambda is not a object but a Functional Interface.\r\nOne can define as many as Functional Interfaces as they can using the @FuntionalInterface as an annotation\r\n\r\n    @FuntionalInterface\r\n    public interface SumLambdaExpression {\r\n         public int do(int a, int b);\r\n    }\r\n    \r\n    public class MyClass {\r\n         public static void main(String [] args) {\r\n              SumLambdaExpression s = (a,b)-&gt;a+b;\r\n              lambdaArgFunction(s);\r\n         }\r\n\r\n         public static void lambdaArgFunction(SumLambdaExpression s) {\r\n              System.out.println(&quot;Output : &quot;+s.do(2,5));\r\n         }\r\n    }\r\n\r\nThe Output will be as follows\r\n\r\n    Output : 7\r\n\r\nThe Basic concept of a Lambda Expression is to define your own logic but already defined Arguments. So in the above code the you can change the definition of the do function from addition to any other definition, but your arguments are limited to 2.","title":"How do I define a method which takes a lambda as a parameter in Java 8?","body":"<p>Lambda is not a object but a Functional Interface.\nOne can define as many as Functional Interfaces as they can using the @FuntionalInterface as an annotation</p>\n\n<pre><code>@FuntionalInterface\npublic interface SumLambdaExpression {\n     public int do(int a, int b);\n}\n\npublic class MyClass {\n     public static void main(String [] args) {\n          SumLambdaExpression s = (a,b)-&gt;a+b;\n          lambdaArgFunction(s);\n     }\n\n     public static void lambdaArgFunction(SumLambdaExpression s) {\n          System.out.println(\"Output : \"+s.do(2,5));\n     }\n}\n</code></pre>\n\n<p>The Output will be as follows</p>\n\n<pre><code>Output : 7\n</code></pre>\n\n<p>The Basic concept of a Lambda Expression is to define your own logic but already defined Arguments. So in the above code the you can change the definition of the do function from addition to any other definition, but your arguments are limited to 2.</p>\n"},{"comments":[{"owner":{"account_id":31617,"reputation":52351,"user_id":86967,"accept_rate":56,"display_name":"Brent Bradburn"},"score":1,"creation_date":1538068098,"post_id":51920960,"comment_id":92023821,"body_markdown":"Instead of `Consumer&lt;Pair&lt;A,B&gt;&gt;`, use `BiConsumer&lt;A,B&gt;` for this case.  ([docs](https://docs.oracle.com/javase/8/docs/api/java/util/function/package-summary.html))","body":"Instead of <code>Consumer&lt;Pair&lt;A,B&gt;&gt;</code>, use <code>BiConsumer&lt;A,B&gt;</code> for this case.  (<a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/function/package-summary.html\" rel=\"nofollow noreferrer\">docs</a>)"},{"owner":{"account_id":11990777,"reputation":957,"user_id":8773964,"display_name":"Big_Bad_E"},"score":0,"creation_date":1539216019,"post_id":51920960,"comment_id":92424884,"body_markdown":"Didn&#39;t know that existed, I should sift through the function package next time.","body":"Didn&#39;t know that existed, I should sift through the function package next time."}],"tags":[],"owner":{"account_id":11990777,"reputation":957,"user_id":8773964,"display_name":"Big_Bad_E"},"comment_count":2,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1539216059,"creation_date":1534705636,"answer_id":51920960,"question_id":13604703,"body_markdown":"For anyone who is googling this, a good method would be to use `java.util.function.BiConsumer`.\r\nex:\r\n\r\n    Import java.util.function.Consumer\r\n    public Class Main {\r\n        public static void runLambda(BiConsumer&lt;Integer, Integer&gt; lambda) {\r\n            lambda.accept(102, 54)\r\n        }\r\n        \r\n        public static void main(String[] args) {\r\n            runLambda((int1, int2) -&gt; System.out.println(int1 + &quot; + &quot; + int2 + &quot; = &quot; + (int1 + int2)));\r\n        }\r\n\r\nThe outprint would be: 166\r\n\r\n","title":"How do I define a method which takes a lambda as a parameter in Java 8?","body":"<p>For anyone who is googling this, a good method would be to use <code>java.util.function.BiConsumer</code>.\nex:</p>\n\n<pre><code>Import java.util.function.Consumer\npublic Class Main {\n    public static void runLambda(BiConsumer&lt;Integer, Integer&gt; lambda) {\n        lambda.accept(102, 54)\n    }\n\n    public static void main(String[] args) {\n        runLambda((int1, int2) -&gt; System.out.println(int1 + \" + \" + int2 + \" = \" + (int1 + int2)));\n    }\n</code></pre>\n\n<p>The outprint would be: 166</p>\n"},{"comments":[{"owner":{"account_id":5875967,"reputation":4179,"user_id":4626775,"display_name":"Bernardo Ramos"},"score":4,"creation_date":1626051445,"post_id":53377897,"comment_id":120781671,"body_markdown":"We can also use a Runnable instead of the above interface","body":"We can also use a Runnable instead of the above interface"},{"owner":{"account_id":2287887,"reputation":2894,"user_id":2011505,"accept_rate":83,"display_name":"Tharkius"},"score":1,"creation_date":1655319177,"post_id":53377897,"comment_id":128307155,"body_markdown":"Thanks, finally the simple answer I was looking for! Was having serious doubts that the only way to do this was using the weird-ass classes in the other answers.","body":"Thanks, finally the simple answer I was looking for! Was having serious doubts that the only way to do this was using the weird-ass classes in the other answers."}],"tags":[],"owner":{"account_id":1332839,"reputation":9052,"user_id":1276306,"accept_rate":91,"display_name":"Mick&#228;el A."},"comment_count":2,"down_vote_count":1,"up_vote_count":25,"is_accepted":false,"score":24,"last_activity_date":1542641525,"creation_date":1542641525,"answer_id":53377897,"question_id":13604703,"body_markdown":"To me, the solution that makes the most sense is to define a `Callback` interface :\r\n\r\n    interface Callback {\r\n        void call();\r\n    }\r\n\r\nand then to use it as parameter in the function you want to call :\r\n\r\n    void somewhereInYourCode() {\r\n        method(() -&gt; {\r\n            // You&#39;ve passed a lambda!\r\n            // method() is done, do whatever you want here.\r\n        });\r\n    }\r\n    \r\n    void method(Callback callback) {\r\n        // Do what you have to do\r\n        // ...\r\n    \r\n        // Don&#39;t forget to notify the caller once you&#39;re done\r\n        callback.call();\r\n    }\r\n\r\n## Just a precision though\r\n\r\nA lambda is not a special interface, class or anything else you could declare by yourself. `Lambda` is just the name given to the `() -&gt; {}` special syntax, which allows better readability when passing single-method interfaces as parameter. It was designed to replace this :\r\n\r\n    method(new Callback() {\r\n        @Override\r\n        public void call() {\r\n            // Classic interface implementation, lot of useless boilerplate code.\r\n            // method() is done, do whatever you want here.\r\n        }\r\n    });\r\n\r\nSo in the example above, `Callback` is **not** a lambda, it&#39;s just a regular interface ; `lambda` is the name of the shortcut syntax you can use to implement it.","title":"How do I define a method which takes a lambda as a parameter in Java 8?","body":"<p>To me, the solution that makes the most sense is to define a <code>Callback</code> interface :</p>\n\n<pre><code>interface Callback {\n    void call();\n}\n</code></pre>\n\n<p>and then to use it as parameter in the function you want to call :</p>\n\n<pre><code>void somewhereInYourCode() {\n    method(() -&gt; {\n        // You've passed a lambda!\n        // method() is done, do whatever you want here.\n    });\n}\n\nvoid method(Callback callback) {\n    // Do what you have to do\n    // ...\n\n    // Don't forget to notify the caller once you're done\n    callback.call();\n}\n</code></pre>\n\n<h2>Just a precision though</h2>\n\n<p>A lambda is not a special interface, class or anything else you could declare by yourself. <code>Lambda</code> is just the name given to the <code>() -&gt; {}</code> special syntax, which allows better readability when passing single-method interfaces as parameter. It was designed to replace this :</p>\n\n<pre><code>method(new Callback() {\n    @Override\n    public void call() {\n        // Classic interface implementation, lot of useless boilerplate code.\n        // method() is done, do whatever you want here.\n    }\n});\n</code></pre>\n\n<p>So in the example above, <code>Callback</code> is <strong>not</strong> a lambda, it's just a regular interface ; <code>lambda</code> is the name of the shortcut syntax you can use to implement it.</p>\n"},{"tags":[],"owner":{"account_id":12694207,"reputation":148,"user_id":10567048,"display_name":"Arasn"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1555756244,"creation_date":1555748505,"answer_id":55771659,"question_id":13604703,"body_markdown":"Do the following ..\r\n\r\nYou have declared `method(lambda l)` \r\nAll you want to do is create a Interface with the name `lambda` and declare one abstract method \r\n\r\n    public int add(int a,int b);  \r\n\r\nmethod name does not matter here..\r\n\r\nSo when u call `MyClass.method( (a,b)-&gt;a+b)` \r\nThis implementation  `(a,b)-&gt;a+b` will be injected to your interface add method .So whenever you call `l.add` it is going to take this implementation and perform addition of `a` and `b`  and `return l.add(2,3)` will return `5`.\r\n- Basically this is what lambda does..\r\n","title":"How do I define a method which takes a lambda as a parameter in Java 8?","body":"<p>Do the following ..</p>\n\n<p>You have declared <code>method(lambda l)</code> \nAll you want to do is create a Interface with the name <code>lambda</code> and declare one abstract method </p>\n\n<pre><code>public int add(int a,int b);  \n</code></pre>\n\n<p>method name does not matter here..</p>\n\n<p>So when u call <code>MyClass.method( (a,b)-&gt;a+b)</code> \nThis implementation  <code>(a,b)-&gt;a+b</code> will be injected to your interface add method .So whenever you call <code>l.add</code> it is going to take this implementation and perform addition of <code>a</code> and <code>b</code>  and <code>return l.add(2,3)</code> will return <code>5</code>.\n- Basically this is what lambda does..</p>\n"},{"tags":[],"owner":{"account_id":13137240,"reputation":33,"user_id":9489816,"display_name":"Vamshi "},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1557473545,"creation_date":1557473545,"answer_id":56072805,"question_id":13604703,"body_markdown":"Basically to pass a lamda expression as a parameter, we need a type in which we can hold it. Just as an integer value we hold in primitive **int** or Integer class. Java doesn&#39;t have a separate type for lamda expression instead it uses an interface as the type to hold the argument. But that interface should be a **functional interface**. ","title":"How do I define a method which takes a lambda as a parameter in Java 8?","body":"<p>Basically to pass a lamda expression as a parameter, we need a type in which we can hold it. Just as an integer value we hold in primitive <strong>int</strong> or Integer class. Java doesn't have a separate type for lamda expression instead it uses an interface as the type to hold the argument. But that interface should be a <strong>functional interface</strong>. </p>\n"},{"tags":[],"owner":{"account_id":16870089,"reputation":133,"user_id":12198775,"display_name":"ank"},"comment_count":0,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1571759683,"creation_date":1571759683,"answer_id":58508080,"question_id":13604703,"body_markdown":"You can use functional interfaces as mentioned above.\r\nbelow are some of the examples\r\n\r\n    Function&lt;Integer, Integer&gt; f1 = num-&gt;(num*2+1);\r\n    System.out.println(f1.apply(10));\r\n\r\n    Predicate&lt;Integer&gt; f2= num-&gt;(num &gt; 10);\r\n    System.out.println(f2.test(10));\r\n    System.out.println(f2.test(11));\r\n\r\n    Supplier&lt;Integer&gt; f3= ()-&gt; 100;\r\n    System.out.println(f3.get());\r\n\r\nHope it helps","title":"How do I define a method which takes a lambda as a parameter in Java 8?","body":"<p>You can use functional interfaces as mentioned above.\nbelow are some of the examples</p>\n\n<pre><code>Function&lt;Integer, Integer&gt; f1 = num-&gt;(num*2+1);\nSystem.out.println(f1.apply(10));\n\nPredicate&lt;Integer&gt; f2= num-&gt;(num &gt; 10);\nSystem.out.println(f2.test(10));\nSystem.out.println(f2.test(11));\n\nSupplier&lt;Integer&gt; f3= ()-&gt; 100;\nSystem.out.println(f3.get());\n</code></pre>\n\n<p>Hope it helps</p>\n"},{"comments":[{"owner":{"account_id":4139180,"reputation":5596,"user_id":3395015,"accept_rate":85,"display_name":"garryp"},"score":0,"creation_date":1634805457,"post_id":59924830,"comment_id":123126227,"body_markdown":"A proper programming language :-D :-D I miss C#","body":"A proper programming language :-D :-D I miss C#"}],"tags":[],"owner":{"account_id":1413245,"reputation":3058,"user_id":1339436,"accept_rate":82,"display_name":"craigrs84"},"comment_count":1,"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1591120039,"creation_date":1580095481,"answer_id":59924830,"question_id":13604703,"body_markdown":"Here&#39;s roughly how C# handles this problem (but expressed as Java code).  Something like this could handle almost all your needs:\r\n\r\n\timport static org.util.function.Functions.*;\r\n\r\n\tpublic class Test {\r\n\r\n\t\tpublic static void main(String[] args)\r\n\t\t{\r\n\t\t\tTest.invoke((a, b) -&gt; a + b);\t\t\r\n\t\t}\r\n\t\t\r\n\t\tpublic static void invoke(Func2&lt;Integer, Integer, Integer&gt; func)\r\n\t\t{\r\n\t\t\tSystem.out.println(func.apply(5, 6));\r\n\t\t}\r\n\t}\r\n\r\n---\r\n    package org.util.function;\r\n\r\n\tpublic interface Functions {\r\n\r\n\t\t//Actions:\r\n\t\tpublic interface Action {\r\n\t\t\tpublic void apply();\r\n\t\t}\r\n\t\t\r\n\t\tpublic interface Action1&lt;T1&gt; {\r\n\t\t\tpublic void apply(T1 arg1);\r\n\t\t}\r\n\r\n\t\tpublic interface Action2&lt;T1, T2&gt; {\r\n\t\t\tpublic void apply(T1 arg1, T2 arg2);\r\n\t\t}\r\n\r\n\t\tpublic interface Action3&lt;T1, T2, T3&gt; {\r\n\t\t\tpublic void apply(T1 arg1, T2 arg2, T3 arg3);\r\n\t\t}\r\n\r\n\t\tpublic interface Action4&lt;T1, T2, T3, T4&gt; {\r\n\t\t\tpublic void apply(T1 arg1, T2 arg2, T3 arg3, T4 arg4);\r\n\t\t}\r\n\r\n\t\tpublic interface Action5&lt;T1, T2, T3, T4, T5&gt; {\r\n\t\t\tpublic void apply(T1 arg1, T2 arg2, T3 arg3, T4 arg4, T5 arg5);\r\n\t\t}\r\n\r\n\t\tpublic interface Action6&lt;T1, T2, T3, T4, T5, T6&gt; {\r\n\t\t\tpublic void apply(T1 arg1, T2 arg2, T3 arg3, T4 arg4, T5 arg5, T6 arg6);\r\n\t\t}\r\n\r\n\t\tpublic interface Action7&lt;T1, T2, T3, T4, T5, T6, T7&gt; {\r\n\t\t\tpublic void apply(T1 arg1, T2 arg2, T3 arg3, T4 arg4, T5 arg5, T6 arg6, T7 arg7);\r\n\t\t}\r\n\r\n\t\tpublic interface Action8&lt;T1, T2, T3, T4, T5, T6, T7, T8&gt; {\r\n\t\t\tpublic void apply(T1 arg1, T2 arg2, T3 arg3, T4 arg4, T5 arg5, T6 arg6, T7 arg7, T8 arg8);\r\n\t\t}\r\n\t\t\r\n\t\t//Functions:\r\n\t\tpublic interface Func&lt;TResult&gt; {\r\n\t\t\tpublic TResult apply();\r\n\t\t}\r\n\t\t\r\n\t\tpublic interface Func1&lt;T1, TResult&gt; {\r\n\t\t\tpublic TResult apply(T1 arg1);\r\n\t\t}\r\n\r\n\t\tpublic interface Func2&lt;T1, T2, TResult&gt; {\r\n\t\t\tpublic TResult apply(T1 arg1, T2 arg2);\r\n\t\t}\r\n\r\n\t\tpublic interface Func3&lt;T1, T2, T3, TResult&gt; {\r\n\t\t\tpublic TResult apply(T1 arg1, T2 arg2, T3 arg3);\r\n\t\t}\r\n\r\n\t\tpublic interface Func4&lt;T1, T2, T3, T4, TResult&gt; {\r\n\t\t\tpublic TResult apply(T1 arg1, T2 arg2, T3 arg3, T4 arg4);\r\n\t\t}\r\n\r\n\t\tpublic interface Func5&lt;T1, T2, T3, T4, T5, TResult&gt; {\r\n\t\t\tpublic TResult apply(T1 arg1, T2 arg2, T3 arg3, T4 arg4, T5 arg5);\r\n\t\t}\r\n\r\n\t\tpublic interface Func6&lt;T1, T2, T3, T4, T5, T6, TResult&gt; {\r\n\t\t\tpublic TResult apply(T1 arg1, T2 arg2, T3 arg3, T4 arg4, T5 arg5, T6 arg6);\r\n\t\t}\r\n\r\n\t\tpublic interface Func7&lt;T1, T2, T3, T4, T5, T6, T7, TResult&gt; {\r\n\t\t\tpublic TResult apply(T1 arg1, T2 arg2, T3 arg3, T4 arg4, T5 arg5, T6 arg6, T7 arg7);\r\n\t\t}\r\n\r\n\t\tpublic interface Func8&lt;T1, T2, T3, T4, T5, T6, T7, T8, TResult&gt; {\r\n\t\t\tpublic TResult apply(T1 arg1, T2 arg2, T3 arg3, T4 arg4, T5 arg5, T6 arg6, T7 arg7, T8 arg8);\r\n\t\t}\r\n\t}","title":"How do I define a method which takes a lambda as a parameter in Java 8?","body":"<p>Here's roughly how C# handles this problem (but expressed as Java code).  Something like this could handle almost all your needs:</p>\n\n<pre><code>import static org.util.function.Functions.*;\n\npublic class Test {\n\n    public static void main(String[] args)\n    {\n        Test.invoke((a, b) -&gt; a + b);       \n    }\n\n    public static void invoke(Func2&lt;Integer, Integer, Integer&gt; func)\n    {\n        System.out.println(func.apply(5, 6));\n    }\n}\n</code></pre>\n\n<hr>\n\n<pre><code>package org.util.function;\n\npublic interface Functions {\n\n    //Actions:\n    public interface Action {\n        public void apply();\n    }\n\n    public interface Action1&lt;T1&gt; {\n        public void apply(T1 arg1);\n    }\n\n    public interface Action2&lt;T1, T2&gt; {\n        public void apply(T1 arg1, T2 arg2);\n    }\n\n    public interface Action3&lt;T1, T2, T3&gt; {\n        public void apply(T1 arg1, T2 arg2, T3 arg3);\n    }\n\n    public interface Action4&lt;T1, T2, T3, T4&gt; {\n        public void apply(T1 arg1, T2 arg2, T3 arg3, T4 arg4);\n    }\n\n    public interface Action5&lt;T1, T2, T3, T4, T5&gt; {\n        public void apply(T1 arg1, T2 arg2, T3 arg3, T4 arg4, T5 arg5);\n    }\n\n    public interface Action6&lt;T1, T2, T3, T4, T5, T6&gt; {\n        public void apply(T1 arg1, T2 arg2, T3 arg3, T4 arg4, T5 arg5, T6 arg6);\n    }\n\n    public interface Action7&lt;T1, T2, T3, T4, T5, T6, T7&gt; {\n        public void apply(T1 arg1, T2 arg2, T3 arg3, T4 arg4, T5 arg5, T6 arg6, T7 arg7);\n    }\n\n    public interface Action8&lt;T1, T2, T3, T4, T5, T6, T7, T8&gt; {\n        public void apply(T1 arg1, T2 arg2, T3 arg3, T4 arg4, T5 arg5, T6 arg6, T7 arg7, T8 arg8);\n    }\n\n    //Functions:\n    public interface Func&lt;TResult&gt; {\n        public TResult apply();\n    }\n\n    public interface Func1&lt;T1, TResult&gt; {\n        public TResult apply(T1 arg1);\n    }\n\n    public interface Func2&lt;T1, T2, TResult&gt; {\n        public TResult apply(T1 arg1, T2 arg2);\n    }\n\n    public interface Func3&lt;T1, T2, T3, TResult&gt; {\n        public TResult apply(T1 arg1, T2 arg2, T3 arg3);\n    }\n\n    public interface Func4&lt;T1, T2, T3, T4, TResult&gt; {\n        public TResult apply(T1 arg1, T2 arg2, T3 arg3, T4 arg4);\n    }\n\n    public interface Func5&lt;T1, T2, T3, T4, T5, TResult&gt; {\n        public TResult apply(T1 arg1, T2 arg2, T3 arg3, T4 arg4, T5 arg5);\n    }\n\n    public interface Func6&lt;T1, T2, T3, T4, T5, T6, TResult&gt; {\n        public TResult apply(T1 arg1, T2 arg2, T3 arg3, T4 arg4, T5 arg5, T6 arg6);\n    }\n\n    public interface Func7&lt;T1, T2, T3, T4, T5, T6, T7, TResult&gt; {\n        public TResult apply(T1 arg1, T2 arg2, T3 arg3, T4 arg4, T5 arg5, T6 arg6, T7 arg7);\n    }\n\n    public interface Func8&lt;T1, T2, T3, T4, T5, T6, T7, T8, TResult&gt; {\n        public TResult apply(T1 arg1, T2 arg2, T3 arg3, T4 arg4, T5 arg5, T6 arg6, T7 arg7, T8 arg8);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7572005,"reputation":661,"user_id":5745574,"display_name":"Vipul Kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1629202080,"creation_date":1629202080,"answer_id":68817100,"question_id":13604703,"body_markdown":"**If you&#39;re using Java along with Kotlin language (As we do in Android Development) you can pass lambda function without defining any additional interface:**\r\n\r\n    import kotlin.jvm.functions.Function0;\r\n    import kotlin.jvm.functions.Function1;\r\n    import kotlin.jvm.functions.Function2;\r\n    \r\n    void foo(Function0&lt;Boolean&gt; param1) //for zero param\r\n    {\r\n        param1.invoke();\r\n    }\r\n\r\n    void foo1(Function1&lt;Integer, Boolean&gt; param1) //for one param\r\n    {\r\n        param1.invoke(1);\r\n    }\r\n\r\n    void foo2(Function2&lt;Integer, Boolean, Boolean&gt; param1) //for two param\r\n    {\r\n        param1.invoke(1, true);\r\n    }\r\n    \r\n    //how to call\r\n    void main() \r\n    {\r\n        foo(() -&gt; {\r\n            return true;\r\n        });\r\n\r\n        foo1((var1) -&gt; {\r\n            return true;\r\n        });\r\n\r\n        foo2((var1, var2) -&gt; {\r\n            return true;\r\n        });\r\n            \r\n    }\r\n\r\n","title":"How do I define a method which takes a lambda as a parameter in Java 8?","body":"<p><strong>If you're using Java along with Kotlin language (As we do in Android Development) you can pass lambda function without defining any additional interface:</strong></p>\n<pre><code>import kotlin.jvm.functions.Function0;\nimport kotlin.jvm.functions.Function1;\nimport kotlin.jvm.functions.Function2;\n\nvoid foo(Function0&lt;Boolean&gt; param1) //for zero param\n{\n    param1.invoke();\n}\n\nvoid foo1(Function1&lt;Integer, Boolean&gt; param1) //for one param\n{\n    param1.invoke(1);\n}\n\nvoid foo2(Function2&lt;Integer, Boolean, Boolean&gt; param1) //for two param\n{\n    param1.invoke(1, true);\n}\n\n//how to call\nvoid main() \n{\n    foo(() -&gt; {\n        return true;\n    });\n\n    foo1((var1) -&gt; {\n        return true;\n    });\n\n    foo2((var1, var2) -&gt; {\n        return true;\n    });\n        \n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1691698471,"post_id":76878661,"comment_id":135530615,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76878661/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":29201720,"reputation":1,"user_id":22371705,"display_name":"dave"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691694158,"creation_date":1691694158,"answer_id":76878661,"question_id":13604703,"body_markdown":"    ToDoubleFunction&lt;DataSource&gt; getValueOf(String methodName) {\r\n        return (DataSource ds) -&gt; {\r\n            try {\r\n                Method method = DataSource.class.getMethod(methodName);\r\n                Integer i = (Integer) method.invoke(ds);\r\n                return Double.valueOf(i);\r\n            } catch (Exception throwables) {\r\n                throwables.printStackTrace();\r\n            }\r\n            return 0;\r\n        };\r\n    }","title":"How do I define a method which takes a lambda as a parameter in Java 8?","body":"<pre><code>ToDoubleFunction&lt;DataSource&gt; getValueOf(String methodName) {\n    return (DataSource ds) -&gt; {\n        try {\n            Method method = DataSource.class.getMethod(methodName);\n            Integer i = (Integer) method.invoke(ds);\n            return Double.valueOf(i);\n        } catch (Exception throwables) {\n            throwables.printStackTrace();\n        }\n        return 0;\n    };\n}\n</code></pre>\n"}],"owner":{"account_id":1191,"reputation":58105,"user_id":1585,"accept_rate":73,"display_name":"Marius"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":390093,"favorite_count":0,"down_vote_count":0,"up_vote_count":483,"accepted_answer_id":13604748,"answer_count":16,"score":483,"last_activity_date":1691694158,"creation_date":1354104392,"question_id":13604703,"body_markdown":"In Java 8, methods can be created as Lambda expressions and can be passed by reference (with a little work under the hood). There are plenty of examples online with lambdas being created and used with methods, but no examples of how to make a method taking a lambda as a parameter. What is the syntax for that?\r\n\r\n    MyClass.method((a, b) -&gt; a+b);\r\n    \r\n\r\n    class MyClass{\r\n      //How do I define this method?\r\n      static int method(Lambda l){\r\n        return l(5, 10);\r\n      }\r\n    }","title":"How do I define a method which takes a lambda as a parameter in Java 8?","body":"<p>In Java 8, methods can be created as Lambda expressions and can be passed by reference (with a little work under the hood). There are plenty of examples online with lambdas being created and used with methods, but no examples of how to make a method taking a lambda as a parameter. What is the syntax for that?</p>\n\n<pre><code>MyClass.method((a, b) -&gt; a+b);\n\n\nclass MyClass{\n  //How do I define this method?\n  static int method(Lambda l){\n    return l(5, 10);\n  }\n}\n</code></pre>\n"},{"tags":["java","stream","apache-flink","flink-streaming"],"answers":[{"comments":[{"owner":{"account_id":4032106,"reputation":16084,"user_id":3317808,"accept_rate":54,"display_name":"overexchange"},"score":0,"creation_date":1691630169,"post_id":76872005,"comment_id":135518724,"body_markdown":"It is one table database. We compare a incoming(stream) data key with the table key for a match. If key don&#39;t match, then we add that incoming(stream) data as  table record otherwise  drop that incoming(stream) data. Requirement is, incoming(stream) data key should be compared with table records that are less than 2 hours old. So, we would like to delete the record older than 2 hours.","body":"It is one table database. We compare a incoming(stream) data key with the table key for a match. If key don&#39;t match, then we add that incoming(stream) data as  table record otherwise  drop that incoming(stream) data. Requirement is, incoming(stream) data key should be compared with table records that are less than 2 hours old. So, we would like to delete the record older than 2 hours."},{"owner":{"account_id":4032106,"reputation":16084,"user_id":3317808,"accept_rate":54,"display_name":"overexchange"},"score":0,"creation_date":1691630302,"post_id":76872005,"comment_id":135518734,"body_markdown":"In the doc, what does *idle state* mean? Does idle state mean,, idle record in a table? So, once a record is inserted, in the table, that record will be available for 2 hours. Correct me.","body":"In the doc, what does <i>idle state</i> mean? Does idle state mean,, idle record in a table? So, once a record is inserted, in the table, that record will be available for 2 hours. Correct me."},{"owner":{"account_id":2274094,"reputation":40374,"user_id":2000823,"display_name":"David Anderson"},"score":0,"creation_date":1691693528,"post_id":76872005,"comment_id":135529698,"body_markdown":"Once inserted, a row will be available for at least 2 hours, unless it is updated, in which case the timer is reset.","body":"Once inserted, a row will be available for at least 2 hours, unless it is updated, in which case the timer is reset."},{"owner":{"account_id":2274094,"reputation":40374,"user_id":2000823,"display_name":"David Anderson"},"score":0,"creation_date":1691693908,"post_id":76872005,"comment_id":135529759,"body_markdown":"See my updated answer for a short explanation as to why you shouldn&#39;t need to worry about this, so long as you bake the temporal constraint into the query itself.  For your specific use case, I believe an over aggregation will do the trick. https://nightlies.apache.org/flink/flink-docs-stable/docs/dev/table/sql/queries/over-agg/#over-aggregation","body":"See my updated answer for a short explanation as to why you shouldn&#39;t need to worry about this, so long as you bake the temporal constraint into the query itself.  For your specific use case, I believe an over aggregation will do the trick. <a href=\"https://nightlies.apache.org/flink/flink-docs-stable/docs/dev/table/sql/queries/over-agg/#over-aggregation\" rel=\"nofollow noreferrer\">nightlies.apache.org/flink/flink-docs-stable/docs/dev/table/&zwnj;&#8203;sql/&hellip;</a>"},{"owner":{"account_id":4032106,"reputation":16084,"user_id":3317808,"accept_rate":54,"display_name":"overexchange"},"score":0,"creation_date":1691761808,"post_id":76872005,"comment_id":135539564,"body_markdown":"How does parallelism work with statebackend using  rocksdb? https://stackoverflow.com/q/76872428/3317808","body":"How does parallelism work with statebackend using  rocksdb? <a href=\"https://stackoverflow.com/q/76872428/3317808\">stackoverflow.com/q/76872428/3317808</a>"}],"tags":[],"owner":{"account_id":2274094,"reputation":40374,"user_id":2000823,"display_name":"David Anderson"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691693835,"creation_date":1691627964,"answer_id":76872005,"question_id":76871477,"body_markdown":"What you can do is to set `table.exec.state.ttl` to two hours -- see [the docs](https://nightlies.apache.org/flink/flink-docs-stable/docs/dev/table/config/#table-exec-state-ttl) for the specifics.\r\n\r\nThe effect of this will be to expire all of the state for this job after two hours. There&#39;s (currently) no way to specific the state TTL on a per-table basis.\r\n\r\nUpdate:\r\n\r\nIn many cases it&#39;s not necessary to do this sort of state management yourself. If you construct your queries so that the temporal constraints are part of the query, then Flink SQL will automatically clear state that is no longer useful.\r\n\r\nQueries that can do this include interval and temporal joins, windows, over aggregations, and match_recognize.","title":"Flink - Can statebackend allow purging old data in RocksDB table?","body":"<p>What you can do is to set <code>table.exec.state.ttl</code> to two hours -- see <a href=\"https://nightlies.apache.org/flink/flink-docs-stable/docs/dev/table/config/#table-exec-state-ttl\" rel=\"nofollow noreferrer\">the docs</a> for the specifics.</p>\n<p>The effect of this will be to expire all of the state for this job after two hours. There's (currently) no way to specific the state TTL on a per-table basis.</p>\n<p>Update:</p>\n<p>In many cases it's not necessary to do this sort of state management yourself. If you construct your queries so that the temporal constraints are part of the query, then Flink SQL will automatically clear state that is no longer useful.</p>\n<p>Queries that can do this include interval and temporal joins, windows, over aggregations, and match_recognize.</p>\n"}],"owner":{"account_id":4032106,"reputation":16084,"user_id":3317808,"accept_rate":54,"display_name":"overexchange"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76872005,"answer_count":1,"score":0,"last_activity_date":1691693835,"creation_date":1691617687,"question_id":76871477,"body_markdown":"In the below code:\r\n\r\n    class EnrichmentStream {\r\n        private val checkpointsDir  = &quot;file://${System.getProperty(&quot;user.dir&quot;)}/checkpoints/&quot;\r\n        private val rocksDBStateDir = &quot;file://${System.getProperty(&quot;user.dir&quot;)}/state/rocksdb/&quot;\r\n    \r\n        companion object {\r\n            @JvmStatic\r\n            fun main(args: Array&lt;String&gt;) {\r\n                EnrichmentStream().runStream()\r\n            }\r\n        }\r\n    \r\n        fun runStream() {\r\n            val environment = StreamExecutionEnvironment\r\n                .createLocalEnvironmentWithWebUI(Configuration())\r\n    \r\n            environment.parallelism = 3\r\n    \r\n            // Checkpoint Configurations\r\n            environment.enableCheckpointing(5000)\r\n            environment.checkpointConfig.minPauseBetweenCheckpoints = 100\r\n            environment.checkpointConfig.setCheckpointStorage(checkpointsDir)\r\n    \r\n            val stateBackend = EmbeddedRocksDBStateBackend()\r\n            stateBackend.setDbStoragePath(rocksDBStateDir)\r\n            environment.stateBackend = stateBackend\r\n    \r\n            environment.checkpointConfig.externalizedCheckpointCleanup =\r\n                CheckpointConfig.ExternalizedCheckpointCleanup.RETAIN_ON_CANCELLATION\r\n    \r\n            // Configure Restart Strategy\r\n            environment.restartStrategy = RestartStrategies.fixedDelayRestart(5, Time.seconds(5))\r\n    \r\n            val tableEnvironment = StreamTableEnvironment.create(environment)\r\n    \r\n            // Run some SQL queries to check the existing Catalogs, Databases and Tables\r\n            tableEnvironment\r\n                .executeSql(&quot;SHOW CATALOGS&quot;)\r\n                .print()\r\n    \r\n            tableEnvironment\r\n                .executeSql(&quot;SHOW DATABASES&quot;)\r\n                .print()\r\n    \r\n            tableEnvironment\r\n                .executeSql(&quot;SHOW TABLES&quot;)\r\n                .print()\r\n    \r\n            tableEnvironment\r\n                .executeSql(&quot;CREATE TABLE Orders (`user` BIGINT, product STRING, amount INT) WITH (...)&quot;)\r\n                .print()\r\n    \r\n        }\r\n    }\r\n\r\n-----------------------\r\n\r\nCan Flink statebackend delete old records(more than 2 hours old) in RocksDB table(`Orders`)? so that table(`Orders`) has records whose life is less than 2 hours old, at any point of time. We use this data for comparison.\r\n\r\nif yes, what is the syntax for `CREATE TABLE` to inform that interval?\r\n\r\n\r\n","title":"Flink - Can statebackend allow purging old data in RocksDB table?","body":"<p>In the below code:</p>\n<pre><code>class EnrichmentStream {\n    private val checkpointsDir  = &quot;file://${System.getProperty(&quot;user.dir&quot;)}/checkpoints/&quot;\n    private val rocksDBStateDir = &quot;file://${System.getProperty(&quot;user.dir&quot;)}/state/rocksdb/&quot;\n\n    companion object {\n        @JvmStatic\n        fun main(args: Array&lt;String&gt;) {\n            EnrichmentStream().runStream()\n        }\n    }\n\n    fun runStream() {\n        val environment = StreamExecutionEnvironment\n            .createLocalEnvironmentWithWebUI(Configuration())\n\n        environment.parallelism = 3\n\n        // Checkpoint Configurations\n        environment.enableCheckpointing(5000)\n        environment.checkpointConfig.minPauseBetweenCheckpoints = 100\n        environment.checkpointConfig.setCheckpointStorage(checkpointsDir)\n\n        val stateBackend = EmbeddedRocksDBStateBackend()\n        stateBackend.setDbStoragePath(rocksDBStateDir)\n        environment.stateBackend = stateBackend\n\n        environment.checkpointConfig.externalizedCheckpointCleanup =\n            CheckpointConfig.ExternalizedCheckpointCleanup.RETAIN_ON_CANCELLATION\n\n        // Configure Restart Strategy\n        environment.restartStrategy = RestartStrategies.fixedDelayRestart(5, Time.seconds(5))\n\n        val tableEnvironment = StreamTableEnvironment.create(environment)\n\n        // Run some SQL queries to check the existing Catalogs, Databases and Tables\n        tableEnvironment\n            .executeSql(&quot;SHOW CATALOGS&quot;)\n            .print()\n\n        tableEnvironment\n            .executeSql(&quot;SHOW DATABASES&quot;)\n            .print()\n\n        tableEnvironment\n            .executeSql(&quot;SHOW TABLES&quot;)\n            .print()\n\n        tableEnvironment\n            .executeSql(&quot;CREATE TABLE Orders (`user` BIGINT, product STRING, amount INT) WITH (...)&quot;)\n            .print()\n\n    }\n}\n</code></pre>\n<hr />\n<p>Can Flink statebackend delete old records(more than 2 hours old) in RocksDB table(<code>Orders</code>)? so that table(<code>Orders</code>) has records whose life is less than 2 hours old, at any point of time. We use this data for comparison.</p>\n<p>if yes, what is the syntax for <code>CREATE TABLE</code> to inform that interval?</p>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"comments":[{"owner":{"account_id":5299479,"reputation":4080,"user_id":4229637,"accept_rate":50,"display_name":"nirvair"},"score":0,"creation_date":1505902600,"post_id":46318898,"comment_id":79599542,"body_markdown":"So, how will my request be like? Will the vehicleDto have an object named bike? or the vehicle dto will be an instance of BikeDto?","body":"So, how will my request be like? Will the vehicleDto have an object named bike? or the vehicle dto will be an instance of BikeDto?"},{"owner":{"account_id":7126482,"reputation":2638,"user_id":5449250,"display_name":"Anatoly Shamov"},"score":1,"creation_date":1505902869,"post_id":46318898,"comment_id":79599734,"body_markdown":"BikeDto is an instance of VehicleDto. Also, if VehicleDto alone should not be used - you can make it abstract.","body":"BikeDto is an instance of VehicleDto. Also, if VehicleDto alone should not be used - you can make it abstract."},{"owner":{"account_id":5299479,"reputation":4080,"user_id":4229637,"accept_rate":50,"display_name":"nirvair"},"score":0,"creation_date":1505904107,"post_id":46318898,"comment_id":79600513,"body_markdown":"And, what does name=bike mean here `@JsonSubTypes.Type(value = BikeDto.class, name = &quot;bike&quot;)` ? Is it the value of `vType` ?","body":"And, what does name=bike mean here <code>@JsonSubTypes.Type(value = BikeDto.class, name = &quot;bike&quot;)</code> ? Is it the value of <code>vType</code> ?"},{"owner":{"account_id":7126482,"reputation":2638,"user_id":5449250,"display_name":"Anatoly Shamov"},"score":0,"creation_date":1505904285,"post_id":46318898,"comment_id":79600615,"body_markdown":"Yes. Depends on value of &#39;type&#39; (just renamed it from &#39;vType&#39;, as I use &#39;type&#39; field in project), the real class of VehicleDto&#39;s child will be resolved. &quot;bike&quot; refers to BikeDto.class, and &quot;car&quot; refers to CarDto.class","body":"Yes. Depends on value of &#39;type&#39; (just renamed it from &#39;vType&#39;, as I use &#39;type&#39; field in project), the real class of VehicleDto&#39;s child will be resolved. &quot;bike&quot; refers to BikeDto.class, and &quot;car&quot; refers to CarDto.class"},{"owner":{"account_id":5299479,"reputation":4080,"user_id":4229637,"accept_rate":50,"display_name":"nirvair"},"score":0,"creation_date":1505905035,"post_id":46318898,"comment_id":79601065,"body_markdown":"For some reasons my code breaks at that if condition where it checks if it is an instance of BikeDto.class. It doesn&#39;t go inside if condition.","body":"For some reasons my code breaks at that if condition where it checks if it is an instance of BikeDto.class. It doesn&#39;t go inside if condition."},{"owner":{"account_id":7126482,"reputation":2638,"user_id":5449250,"display_name":"Anatoly Shamov"},"score":0,"creation_date":1505905221,"post_id":46318898,"comment_id":79601181,"body_markdown":"You&#39;ve tried to run my example, or made changes to your code? Show your @Controller class and POST request body, please.","body":"You&#39;ve tried to run my example, or made changes to your code? Show your @Controller class and POST request body, please."},{"owner":{"account_id":7126482,"reputation":2638,"user_id":5449250,"display_name":"Anatoly Shamov"},"score":0,"creation_date":1505905284,"post_id":46318898,"comment_id":79601227,"body_markdown":"Let us [continue this discussion in chat](http://chat.stackoverflow.com/rooms/154883/discussion-between-anatoly-shamov-and-nirvair).","body":"Let us <a href=\"http://chat.stackoverflow.com/rooms/154883/discussion-between-anatoly-shamov-and-nirvair\">continue this discussion in chat</a>."}],"tags":[],"owner":{"account_id":7126482,"reputation":2638,"user_id":5449250,"display_name":"Anatoly Shamov"},"comment_count":7,"down_vote_count":0,"up_vote_count":16,"is_accepted":true,"score":16,"last_activity_date":1505904161,"creation_date":1505901340,"answer_id":46318898,"question_id":46310281,"body_markdown":"Why not use inheritance instead of association for DTO&#39;s, just like for entities?\r\nAnd then map these DTO&#39;s to entites and back with some mapper (I prefer [mapstruct][1]).\r\n\r\nI&#39;ve made a complete example [on github][2].\r\n\r\nDTO&#39;s:\r\n\r\n    @Data\r\n    @JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.PROPERTY, property = &quot;type&quot;)\r\n    @JsonSubTypes({\r\n            @JsonSubTypes.Type(value = CarDto.class, name = &quot;car&quot;),\r\n            @JsonSubTypes.Type(value = BikeDto.class, name = &quot;bike&quot;)\r\n    })\r\n    public class VehicleDto {\r\n        private Long id;\r\n        private String type;\r\n        private Integer modelYear;\r\n    }\r\n    \r\n    @Data\r\n    public class BikeDto extends VehicleDto {\r\n        private String frameType;\r\n    }\r\n\r\n    @Data\r\n    public class CarDto extends VehicleDto {\r\n        private Boolean isCabriolet;\r\n    }\r\n\r\n[@JsonTypeInfo][3] and [@JsonSubTypes][4] are needed to automatically resolve DTO type in `Controller`. My sample controller receives `VehicleDto` and tries to store it in database as `Bike` entity with `DtoMapper` and `VehicleService`. Last step - it reads it again from database and responds with `BikeDto`.\r\n\r\n    @Controller\r\n    public class SampleController {\r\n    \r\n    \t@Autowired\r\n    \tprivate VehicleService vehicleService;\r\n    \r\n    \t@Autowired\r\n    \tprivate DtoMapper mapper;\r\n    \r\n    \t@PostMapping(&quot;/testDto&quot;)\r\n    \t@ResponseBody\r\n    \t@Transactional\r\n    \tpublic BikeDto testDto(@RequestBody VehicleDto vehicleDto) {\r\n    \r\n    \t\tif (vehicleDto instanceof BikeDto)\r\n    \t\t\tvehicleService.saveBike(mapper.toBikeEntity((BikeDto) vehicleDto));\r\n    \r\n    \t\treturn mapper.toBikeDto(vehicleService.getBike(vehicleDto.getId()));\r\n    \t}\r\n    }\r\n\r\nFor `DtoMapper` I&#39;ve used Mapstruct, it converts my `Bike` entity to `BikeDto` and back:\r\n\r\n    @Mapper(componentModel = &quot;spring&quot;)\r\n    @Component\r\n    public interface DtoMapper {\r\n    \r\n        @Mapping(target = &quot;type&quot;, constant = &quot;bike&quot;)\r\n        BikeDto toBikeDto(Bike entity);\r\n    \r\n        Bike toBikeEntity(BikeDto dto);\r\n    }\r\n\r\nAnd last, test class for this example. It passes `BikeDto` as POST body and expects it to return back.\r\n\r\n    @RunWith(SpringRunner.class)\r\n    @SpringBootTest\r\n    @ActiveProfiles(&quot;scratch&quot;)\r\n    public class SampleDataJpaApplicationTests {\r\n    \r\n    \t@Autowired\r\n    \tprivate WebApplicationContext context;\r\n    \tprivate MockMvc mvc;\r\n    \r\n    \t@Before\r\n    \tpublic void setUp() {\r\n    \t\tthis.mvc = MockMvcBuilders.webAppContextSetup(this.context).build();\r\n    \t}\r\n    \r\n    \t@Test\r\n    \tpublic void testDto() throws Exception {\r\n    \r\n    \t\tBikeDto bikeDto = new BikeDto();\r\n    \t\tbikeDto.setId(42L);\r\n    \t\tbikeDto.setType(&quot;bike&quot;);\r\n    \t\tbikeDto.setModelYear(2019);\r\n    \t\tbikeDto.setFrameType(&quot;carbon&quot;);\r\n    \r\n    \t\tGson gson = new Gson();\r\n    \t\tString json = gson.toJson(bikeDto);\r\n    \r\n    \t\tthis.mvc.perform(post(&quot;/testDto&quot;).contentType(MediaType.APPLICATION_JSON).content(json))\r\n    \t\t\t\t.andExpect(status().isOk())\r\n    \t\t\t\t.andExpect(content().json(json));\r\n    \t}\r\n    }\r\n\r\nPOST (`BikeDto`) body:\r\n\r\n    {\r\n     &quot;id&quot;:42,\r\n     &quot;type&quot;:&quot;bike&quot;,\r\n     &quot;modelYear&quot;:2019,\r\n     &quot;frameType&quot;:&quot;carbon&quot;\r\n    }\r\n\r\nOther classes (entities, services, repositories) you can watch in complete example [on github][2].\r\n\r\n\r\n  [1]: http://mapstruct.org/\r\n  [2]: https://github.com/anatoly-shamov/spring-boot-dto-hierarchy\r\n  [3]: https://fasterxml.github.io/jackson-annotations/javadoc/2.4/com/fasterxml/jackson/annotation/JsonTypeInfo.html\r\n  [4]: https://fasterxml.github.io/jackson-annotations/javadoc/2.4/com/fasterxml/jackson/annotation/JsonSubTypes.html","title":"Design of multiple child dtos into a single request spring boot","body":"<p>Why not use inheritance instead of association for DTO's, just like for entities?\nAnd then map these DTO's to entites and back with some mapper (I prefer <a href=\"http://mapstruct.org/\" rel=\"noreferrer\">mapstruct</a>).</p>\n\n<p>I've made a complete example <a href=\"https://github.com/anatoly-shamov/spring-boot-dto-hierarchy\" rel=\"noreferrer\">on github</a>.</p>\n\n<p>DTO's:</p>\n\n<pre><code>@Data\n@JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.PROPERTY, property = \"type\")\n@JsonSubTypes({\n        @JsonSubTypes.Type(value = CarDto.class, name = \"car\"),\n        @JsonSubTypes.Type(value = BikeDto.class, name = \"bike\")\n})\npublic class VehicleDto {\n    private Long id;\n    private String type;\n    private Integer modelYear;\n}\n\n@Data\npublic class BikeDto extends VehicleDto {\n    private String frameType;\n}\n\n@Data\npublic class CarDto extends VehicleDto {\n    private Boolean isCabriolet;\n}\n</code></pre>\n\n<p><a href=\"https://fasterxml.github.io/jackson-annotations/javadoc/2.4/com/fasterxml/jackson/annotation/JsonTypeInfo.html\" rel=\"noreferrer\">@JsonTypeInfo</a> and <a href=\"https://fasterxml.github.io/jackson-annotations/javadoc/2.4/com/fasterxml/jackson/annotation/JsonSubTypes.html\" rel=\"noreferrer\">@JsonSubTypes</a> are needed to automatically resolve DTO type in <code>Controller</code>. My sample controller receives <code>VehicleDto</code> and tries to store it in database as <code>Bike</code> entity with <code>DtoMapper</code> and <code>VehicleService</code>. Last step - it reads it again from database and responds with <code>BikeDto</code>.</p>\n\n<pre><code>@Controller\npublic class SampleController {\n\n    @Autowired\n    private VehicleService vehicleService;\n\n    @Autowired\n    private DtoMapper mapper;\n\n    @PostMapping(\"/testDto\")\n    @ResponseBody\n    @Transactional\n    public BikeDto testDto(@RequestBody VehicleDto vehicleDto) {\n\n        if (vehicleDto instanceof BikeDto)\n            vehicleService.saveBike(mapper.toBikeEntity((BikeDto) vehicleDto));\n\n        return mapper.toBikeDto(vehicleService.getBike(vehicleDto.getId()));\n    }\n}\n</code></pre>\n\n<p>For <code>DtoMapper</code> I've used Mapstruct, it converts my <code>Bike</code> entity to <code>BikeDto</code> and back:</p>\n\n<pre><code>@Mapper(componentModel = \"spring\")\n@Component\npublic interface DtoMapper {\n\n    @Mapping(target = \"type\", constant = \"bike\")\n    BikeDto toBikeDto(Bike entity);\n\n    Bike toBikeEntity(BikeDto dto);\n}\n</code></pre>\n\n<p>And last, test class for this example. It passes <code>BikeDto</code> as POST body and expects it to return back.</p>\n\n<pre><code>@RunWith(SpringRunner.class)\n@SpringBootTest\n@ActiveProfiles(\"scratch\")\npublic class SampleDataJpaApplicationTests {\n\n    @Autowired\n    private WebApplicationContext context;\n    private MockMvc mvc;\n\n    @Before\n    public void setUp() {\n        this.mvc = MockMvcBuilders.webAppContextSetup(this.context).build();\n    }\n\n    @Test\n    public void testDto() throws Exception {\n\n        BikeDto bikeDto = new BikeDto();\n        bikeDto.setId(42L);\n        bikeDto.setType(\"bike\");\n        bikeDto.setModelYear(2019);\n        bikeDto.setFrameType(\"carbon\");\n\n        Gson gson = new Gson();\n        String json = gson.toJson(bikeDto);\n\n        this.mvc.perform(post(\"/testDto\").contentType(MediaType.APPLICATION_JSON).content(json))\n                .andExpect(status().isOk())\n                .andExpect(content().json(json));\n    }\n}\n</code></pre>\n\n<p>POST (<code>BikeDto</code>) body:</p>\n\n<pre><code>{\n \"id\":42,\n \"type\":\"bike\",\n \"modelYear\":2019,\n \"frameType\":\"carbon\"\n}\n</code></pre>\n\n<p>Other classes (entities, services, repositories) you can watch in complete example <a href=\"https://github.com/anatoly-shamov/spring-boot-dto-hierarchy\" rel=\"noreferrer\">on github</a>.</p>\n"}],"owner":{"account_id":5299479,"reputation":4080,"user_id":4229637,"accept_rate":50,"display_name":"nirvair"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15127,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":46318898,"answer_count":1,"score":7,"last_activity_date":1691693617,"creation_date":1505857969,"question_id":46310281,"body_markdown":"So, I have a VehicleDto:\r\n\r\n    class VehicleDto {\r\n        private String someId\r\n        private String vType;\r\n        private CarDto car;\r\n        private BikeDto bike;\r\n    }\r\n\r\nI need to have either the CarDto or BikeDto in the request payload. \r\n\r\nIn the post request payload there will be multiple fields which are properties of VehicleDto, for example, here someId. Now, this someId is also a part of CarDto and BikeDto, and any other Dto that is a child of VehicleDto. \r\n\r\nSo when I try to save into the db, I have some issues there. \r\n\r\n    if (vehicleDto.getVType().equals(&quot;CAR&quot;)) {\r\n        this.saveCar(vehicleDto);\r\n    }\r\n\r\n    private boolean saveCar(TicketSoldCreateDto ticketSoldCreateDto) {\r\n        CarDto carDto = ticketSoldCreateDto.getCar();\r\n        carDto is mapped to Car model\r\n        // Now how do I map the rest of the fields in vehicleDto to Car model??\r\n    }\r\n\r\nSuper class Vehicle:\r\n\r\n    @MappedSuperclass\r\n    @Data\r\n    public abstract class Vehicle extends AbstractBaseEntity {\r\n    // fields same as vehicleDto\r\n    }\r\n\r\nChild class Car:\r\n\r\n    @Entity\r\n    @Data\r\n    public class Car extends Vehicle {\r\n    // Some fields\r\n    }\r\n\r\nHow should I design such problems?","title":"Design of multiple child dtos into a single request spring boot","body":"<p>So, I have a VehicleDto:</p>\n\n<pre><code>class VehicleDto {\n    private String someId\n    private String vType;\n    private CarDto car;\n    private BikeDto bike;\n}\n</code></pre>\n\n<p>I need to have either the CarDto or BikeDto in the request payload. </p>\n\n<p>In the post request payload there will be multiple fields which are properties of VehicleDto, for example, here someId. Now, this someId is also a part of CarDto and BikeDto, and any other Dto that is a child of VehicleDto. </p>\n\n<p>So when I try to save into the db, I have some issues there. </p>\n\n<pre><code>if (vehicleDto.getVType().equals(\"CAR\")) {\n    this.saveCar(vehicleDto);\n}\n\nprivate boolean saveCar(TicketSoldCreateDto ticketSoldCreateDto) {\n    CarDto carDto = ticketSoldCreateDto.getCar();\n    carDto is mapped to Car model\n    // Now how do I map the rest of the fields in vehicleDto to Car model??\n}\n</code></pre>\n\n<p>Super class Vehicle:</p>\n\n<pre><code>@MappedSuperclass\n@Data\npublic abstract class Vehicle extends AbstractBaseEntity {\n// fields same as vehicleDto\n}\n</code></pre>\n\n<p>Child class Car:</p>\n\n<pre><code>@Entity\n@Data\npublic class Car extends Vehicle {\n// Some fields\n}\n</code></pre>\n\n<p>How should I design such problems?</p>\n"},{"tags":["java","spring","polymorphism","overloading","keyword"],"answers":[{"comments":[{"owner":{"account_id":5353778,"reputation":11,"user_id":19088425,"display_name":"ConeaGG"},"score":0,"creation_date":1691706992,"post_id":76878463,"comment_id":135531826,"body_markdown":"Ohh, I see. That makes sense. Thanks!","body":"Ohh, I see. That makes sense. Thanks!"}],"tags":[],"owner":{"account_id":5018541,"reputation":12090,"user_id":4032703,"accept_rate":100,"display_name":"EJoshuaS - Stand with Ukraine"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691693210,"creation_date":1691692348,"answer_id":76878463,"question_id":76878438,"body_markdown":"Your answer is perfectly correct to the question as stated. The interviewer didn&#39;t know what they were talking about.\r\n\r\nI think that they were probably mixing up &quot;overloading&quot; (which, as you indicated, does *not* require a keyword) with &quot;overriding&quot; (which does).","title":"I just got one question that I am confused from an interview. &quot;What is the keyword that uses with overloading?&quot;","body":"<p>Your answer is perfectly correct to the question as stated. The interviewer didn't know what they were talking about.</p>\n<p>I think that they were probably mixing up &quot;overloading&quot; (which, as you indicated, does <em>not</em> require a keyword) with &quot;overriding&quot; (which does).</p>\n"}],"owner":{"account_id":5353778,"reputation":11,"user_id":19088425,"display_name":"ConeaGG"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1691693210,"creation_date":1691692163,"question_id":76878438,"body_markdown":"I was in an interview for Java SEDT. The interviewer asked me this question: &quot;What is the keyword that uses with overloading?&quot;\r\n\r\nI answered that overloading doesn&#39;t need keyword, we can do overloading by creating methods with the same name but different parameters, for example different arguments.\r\nBut the interviewer kept asking for the keyword.\r\n\r\nIs that any keyword that uses with overloading?","title":"I just got one question that I am confused from an interview. &quot;What is the keyword that uses with overloading?&quot;","body":"<p>I was in an interview for Java SEDT. The interviewer asked me this question: &quot;What is the keyword that uses with overloading?&quot;</p>\n<p>I answered that overloading doesn't need keyword, we can do overloading by creating methods with the same name but different parameters, for example different arguments.\nBut the interviewer kept asking for the keyword.</p>\n<p>Is that any keyword that uses with overloading?</p>\n"},{"tags":["java","spring","spring-boot","oauth-2.0"],"comments":[{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1686334557,"post_id":76441297,"comment_id":134789773,"body_markdown":"have you tried to set it as an attribute ? `oAuth2AutorizeRequest.getAttributes().put(&quot;userId&quot;, request.getHeader(&quot;UserId&quot;))`.","body":"have you tried to set it as an attribute ? <code>oAuth2AutorizeRequest.getAttributes().put(&quot;userId&quot;, request.getHeader(&quot;UserId&quot;))</code>."},{"owner":{"account_id":26345002,"reputation":29,"user_id":20003532,"display_name":"javaLearnMushigi"},"score":0,"creation_date":1686658810,"post_id":76441297,"comment_id":134826666,"body_markdown":"It&#39;s nod add header","body":"It&#39;s nod add header"}],"answers":[{"comments":[{"owner":{"account_id":26345002,"reputation":29,"user_id":20003532,"display_name":"javaLearnMushigi"},"score":0,"creation_date":1686659009,"post_id":76448469,"comment_id":134826721,"body_markdown":"Thanks for your answer, how can I check the formed post-request? For some reason, headers and body with logging.level.root = trace - not show me this request","body":"Thanks for your answer, how can I check the formed post-request? For some reason, headers and body with logging.level.root = trace - not show me this request"},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1686682211,"post_id":76448469,"comment_id":134832068,"body_markdown":"Web client is reactive. Have you called `.block()` in your test code to subscribe to the request?","body":"Web client is reactive. Have you called <code>.block()</code> in your test code to subscribe to the request?"},{"owner":{"account_id":26345002,"reputation":29,"user_id":20003532,"display_name":"javaLearnMushigi"},"score":0,"creation_date":1686728825,"post_id":76448469,"comment_id":134837440,"body_markdown":"*.block()* on call tokenEndpoint? And why in  *final var expiry = now.plusSeconds((Long) resp.get(&quot;expires_in&quot;) - 2);* are you do *- 2* on the end?","body":"<i>.block()</i> on call tokenEndpoint? And why in  <i>final var expiry = now.plusSeconds((Long) resp.get(&quot;expires_in&quot;) - 2);</i> are you do <i>- 2</i> on the end?"},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1686739023,"post_id":76448469,"comment_id":134839557,"body_markdown":"You are in a servlet (synchronized app, not a reactive one) =&gt; you have to subscribe to a Mono (`.block()`) for the inner code to be executed. In my sample, it is done after `flatMap` a second Mono in the controller method. The `-2` seconds on expiry is because network can be slow and you don&#39;t want to return a token expiring within the next second. You could completely remove caching logic too.","body":"You are in a servlet (synchronized app, not a reactive one) =&gt; you have to subscribe to a Mono (<code>.block()</code>) for the inner code to be executed. In my sample, it is done after <code>flatMap</code> a second Mono in the controller method. The <code>-2</code> seconds on expiry is because network can be slow and you don&#39;t want to return a token expiring within the next second. You could completely remove caching logic too."}],"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686682090,"creation_date":1686438082,"answer_id":76448469,"question_id":76441297,"body_markdown":"You could try with a `@Service` like that (provided that you have an OAuth2 client registration labeled &quot;machin&quot; in your Spring Boot properties):\r\n```java\r\n@Service\r\npublic class ClientCredentialsService {\r\n    \r\n    private final WebClient tokenEndpoint;\r\n    private final String spaceDelimitedScopes;\r\n    \r\n    private Map&lt;String, AccessToken&gt; cachedTokens = new ConcurrentHashMap&lt;&gt;();\r\n    \r\n    public ClientCredentialsService(ClientRegistrationRepository clientRegistrationRepo) {\r\n        final var clientRegistration = clientRegistrationRepo.findByRegistrationId(&quot;machin&quot;);\r\n        \r\n        // According to your question, this should contain at least message.read\r\n        this.spaceDelimitedScopes = clientRegistration.getScopes().stream().collect(Collectors.joining(&quot; &quot;));\r\n        \r\n        // In client_credentials flow, according to the spec,\r\n        // the access token should be fetched by calling the token endpoint \r\n        // with client_id and client_secret passed as Basic Authorization header\r\n        // See https://www.rfc-editor.org/rfc/rfc6749#section-4.4\r\n        tokenEndpoint= WebClient.builder()\r\n            .baseUrl(clientRegistration.getProviderDetails().getTokenUri())\r\n            .filter(ExchangeFilterFunctions.basicAuthentication(clientRegistration.getClientId(), clientRegistration.getClientSecret()))\r\n            .build();\r\n    }\r\n\r\n    public Mono&lt;String&gt; getAccessToken(String userId) {\r\n        final var now = Instant.now();\r\n\r\n        // cache cleanup\r\n        this.cachedTokens = cachedTokens.entrySet().stream().filter(at -&gt; at.getValue().expiryTime().isAfter(now)).collect(Collectors.toConcurrentMap(Map.Entry::getKey, Map.Entry::getValue));\r\n        \r\n        final var cached = cachedTokens.get(userId);\r\n        if(cached != null) {\r\n            return Mono.just(cached.value);\r\n        }\r\n        \r\n        // This is a call to an OAuth2 token endpoint,\r\n        // using client_credentials flow and a custom header\r\n        // See the spec linked above for the request body (content of the application/x-www-form-urlencoded body)\r\n        return tokenEndpoint.post()\r\n                .header(&quot;userId&quot;, userId)\r\n                .body(BodyInserters\r\n                        .fromFormData(&quot;grant_type&quot;, &quot;client_credentials&quot;)\r\n                        .with(&quot;scope&quot;, spaceDelimitedScopes))\r\n                .retrieve()\r\n                .bodyToMono(Map.class)\r\n                .map(resp -&gt; {\r\n                    final var token = (String) resp.get(&quot;access_token&quot;);\r\n                    final var expiry = now.plusSeconds((Long) resp.get(&quot;expires_in&quot;) - 2);\r\n                    this.cachedTokens.put(userId, new AccessToken(token, expiry));\r\n                    return token;\r\n                });\r\n    }\r\n    \r\n    public Mono&lt;WebClient&gt; getAuthorizedClient(String userId) {\r\n        return getAccessToken(userId).map(accessToken -&gt;  WebClient\r\n                .builder()\r\n                .defaultHeader(HttpHeaders.AUTHORIZATION, &quot;Bearer %s&quot;.formatted(accessToken))\r\n                .build());\r\n    }\r\n    \r\n    static private record AccessToken(String value, Instant expiryTime) {}\r\n}\r\n```\r\nUsage as follow:\r\n```java\r\n@RestController\r\n@RequiredArgsConstructor\r\npublic class MyController {\r\n    private static final String OAUTH2_RESOURCE_URI = &quot;https://other.service/some-resource&quot;;\r\n\r\n    private final ClientCredentialsService clientCredentialsService;\r\n\r\n    @GetMapping(&quot;/something-from-an-oauth2-resource-server&quot;)\r\n    public String getSomething(HttpServletRequest request) {\r\n        return clientCredentialsService\r\n                .getAuthorizedClient(request.getHeader(&quot;UserId&quot;))\r\n                .flatMap(client -&gt; client\r\n                        .get()\r\n                        .uri(OAUTH2_RESOURCE_URI)\r\n                        .retrieve()\r\n                        // This should be changed with the type of DTO returned by the OAuth2 delegate\r\n                        .bodyToMono(String.class))\r\n                .block();\r\n    }\r\n}\r\n```","title":"Custom header in spring-security-oauth2-client by RestController","body":"<p>You could try with a <code>@Service</code> like that (provided that you have an OAuth2 client registration labeled &quot;machin&quot; in your Spring Boot properties):</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\npublic class ClientCredentialsService {\n    \n    private final WebClient tokenEndpoint;\n    private final String spaceDelimitedScopes;\n    \n    private Map&lt;String, AccessToken&gt; cachedTokens = new ConcurrentHashMap&lt;&gt;();\n    \n    public ClientCredentialsService(ClientRegistrationRepository clientRegistrationRepo) {\n        final var clientRegistration = clientRegistrationRepo.findByRegistrationId(&quot;machin&quot;);\n        \n        // According to your question, this should contain at least message.read\n        this.spaceDelimitedScopes = clientRegistration.getScopes().stream().collect(Collectors.joining(&quot; &quot;));\n        \n        // In client_credentials flow, according to the spec,\n        // the access token should be fetched by calling the token endpoint \n        // with client_id and client_secret passed as Basic Authorization header\n        // See https://www.rfc-editor.org/rfc/rfc6749#section-4.4\n        tokenEndpoint= WebClient.builder()\n            .baseUrl(clientRegistration.getProviderDetails().getTokenUri())\n            .filter(ExchangeFilterFunctions.basicAuthentication(clientRegistration.getClientId(), clientRegistration.getClientSecret()))\n            .build();\n    }\n\n    public Mono&lt;String&gt; getAccessToken(String userId) {\n        final var now = Instant.now();\n\n        // cache cleanup\n        this.cachedTokens = cachedTokens.entrySet().stream().filter(at -&gt; at.getValue().expiryTime().isAfter(now)).collect(Collectors.toConcurrentMap(Map.Entry::getKey, Map.Entry::getValue));\n        \n        final var cached = cachedTokens.get(userId);\n        if(cached != null) {\n            return Mono.just(cached.value);\n        }\n        \n        // This is a call to an OAuth2 token endpoint,\n        // using client_credentials flow and a custom header\n        // See the spec linked above for the request body (content of the application/x-www-form-urlencoded body)\n        return tokenEndpoint.post()\n                .header(&quot;userId&quot;, userId)\n                .body(BodyInserters\n                        .fromFormData(&quot;grant_type&quot;, &quot;client_credentials&quot;)\n                        .with(&quot;scope&quot;, spaceDelimitedScopes))\n                .retrieve()\n                .bodyToMono(Map.class)\n                .map(resp -&gt; {\n                    final var token = (String) resp.get(&quot;access_token&quot;);\n                    final var expiry = now.plusSeconds((Long) resp.get(&quot;expires_in&quot;) - 2);\n                    this.cachedTokens.put(userId, new AccessToken(token, expiry));\n                    return token;\n                });\n    }\n    \n    public Mono&lt;WebClient&gt; getAuthorizedClient(String userId) {\n        return getAccessToken(userId).map(accessToken -&gt;  WebClient\n                .builder()\n                .defaultHeader(HttpHeaders.AUTHORIZATION, &quot;Bearer %s&quot;.formatted(accessToken))\n                .build());\n    }\n    \n    static private record AccessToken(String value, Instant expiryTime) {}\n}\n</code></pre>\n<p>Usage as follow:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\n@RequiredArgsConstructor\npublic class MyController {\n    private static final String OAUTH2_RESOURCE_URI = &quot;https://other.service/some-resource&quot;;\n\n    private final ClientCredentialsService clientCredentialsService;\n\n    @GetMapping(&quot;/something-from-an-oauth2-resource-server&quot;)\n    public String getSomething(HttpServletRequest request) {\n        return clientCredentialsService\n                .getAuthorizedClient(request.getHeader(&quot;UserId&quot;))\n                .flatMap(client -&gt; client\n                        .get()\n                        .uri(OAUTH2_RESOURCE_URI)\n                        .retrieve()\n                        // This should be changed with the type of DTO returned by the OAuth2 delegate\n                        .bodyToMono(String.class))\n                .block();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":26345002,"reputation":29,"user_id":20003532,"display_name":"javaLearnMushigi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":611,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1691693093,"creation_date":1686321702,"question_id":76441297,"body_markdown":"I made a rest-application that receives a request from the Client and goes to the resource server, simultaneously authorizing via OAuth2 using client_Credentials\r\nBut the authorization server, instead of the default request, also waits for the UserId in header, which must be filled with data from the Client&#39;s request\r\n\r\nI use this bean implementation:\r\n```\r\n\t@Configuration\r\n\tpublic class WebClientConfig {\r\n\t\t@Bean\r\n\t\tOAuth2AuthorizedClientManager authorizedClientManager(\r\n\t\t\t\tClientRegistrationRepository clientRegistrationRepository,\r\n\t\t\t\tOAuth2AuthorizedClientRepository authorizedClientRepository) {\r\n\t\t\tOAuth2AuthorizedClientProvider authorizedClientProvider =\r\n\t\t\t\t\tOAuth2AuthorizedClientProviderBuilder.builder()\r\n\t\t\t\t\t\t\t.clientCredentials()\r\n\t\t\t\t\t\t\t.build();\r\n\t\t\tDefaultOAuth2AuthorizedClientManager authorizedClientManager = new DefaultOAuth2AuthorizedClientManager(\r\n\t\t\t\t\tclientRegistrationRepository, authorizedClientRepository);\r\n\t\t\tauthorizedClientManager.setAuthorizedClientProvider(authorizedClientProvider);\r\n\t\t\treturn authorizedClientManager;\r\n\t\t}\r\n\t}\r\n```\r\n\r\nI request an access token via OAuth2AutorizeRequest:\r\n```\r\n\tOAuth2AutorizeRequest oAuth2AutorizeRequest = OAuth2AutorizeRequest.withClientRegistrationId(&quot;test&quot;).principal(&quot;test&quot;).build();\r\n\tOAuth2AccessToken token = authorizedClientManager.authorize(oAuth2AutorizeRequest).getAccessToken;\r\n```\r\n\t\r\nHow can I add a UserId headers to the Authorization header when sending a POST request, which will be filled from the Client request?\r\n\r\nExample:\r\n\r\n    POST /oauth2/token HTTP/1.1\r\n    Host: auth-server:1111\r\n    Content-Type: application/x-www-form-urlencoded\r\n    Authorization: Basic bWVzc2FnaW5nLWNsaWVudDpzZWNyZXQ=\r\n    UserId : naW5nLbWVzcVudDpzZ\r\n    grant_type=client_credentials&amp;scope=message.read\r\n\r\n","title":"Custom header in spring-security-oauth2-client by RestController","body":"<p>I made a rest-application that receives a request from the Client and goes to the resource server, simultaneously authorizing via OAuth2 using client_Credentials\nBut the authorization server, instead of the default request, also waits for the UserId in header, which must be filled with data from the Client's request</p>\n<p>I use this bean implementation:</p>\n<pre><code>    @Configuration\n    public class WebClientConfig {\n        @Bean\n        OAuth2AuthorizedClientManager authorizedClientManager(\n                ClientRegistrationRepository clientRegistrationRepository,\n                OAuth2AuthorizedClientRepository authorizedClientRepository) {\n            OAuth2AuthorizedClientProvider authorizedClientProvider =\n                    OAuth2AuthorizedClientProviderBuilder.builder()\n                            .clientCredentials()\n                            .build();\n            DefaultOAuth2AuthorizedClientManager authorizedClientManager = new DefaultOAuth2AuthorizedClientManager(\n                    clientRegistrationRepository, authorizedClientRepository);\n            authorizedClientManager.setAuthorizedClientProvider(authorizedClientProvider);\n            return authorizedClientManager;\n        }\n    }\n</code></pre>\n<p>I request an access token via OAuth2AutorizeRequest:</p>\n<pre><code>    OAuth2AutorizeRequest oAuth2AutorizeRequest = OAuth2AutorizeRequest.withClientRegistrationId(&quot;test&quot;).principal(&quot;test&quot;).build();\n    OAuth2AccessToken token = authorizedClientManager.authorize(oAuth2AutorizeRequest).getAccessToken;\n</code></pre>\n<p>How can I add a UserId headers to the Authorization header when sending a POST request, which will be filled from the Client request?</p>\n<p>Example:</p>\n<pre><code>POST /oauth2/token HTTP/1.1\nHost: auth-server:1111\nContent-Type: application/x-www-form-urlencoded\nAuthorization: Basic bWVzc2FnaW5nLWNsaWVudDpzZWNyZXQ=\nUserId : naW5nLbWVzcVudDpzZ\ngrant_type=client_credentials&amp;scope=message.read\n</code></pre>\n"},{"tags":["java","maven","selenium-webdriver","junit","maven-surefire-plugin"],"comments":[{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1691696715,"post_id":76878535,"comment_id":135530275,"body_markdown":"How do you start the browser? How does your test code looks like ? I recommend to upgrade to most recent version of the plugin ans also follow naming conventions because ui tests are typcially integration tests (maven-failsafe-plugin)...","body":"How do you start the browser? How does your test code looks like ? I recommend to upgrade to most recent version of the plugin ans also follow naming conventions because ui tests are typcially integration tests (maven-failsafe-plugin)..."}],"owner":{"account_id":14382262,"reputation":53,"user_id":10389122,"display_name":"HELENDOUDOU"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691692944,"creation_date":1691692944,"question_id":76878535,"body_markdown":"I am trying to run the selenium UI tests in parallel with maven and Junit 4 but it&#39;s not working, only see one browser running the test.\r\n\r\nMy test suite class to run 2 test classes\r\n\r\n    @RunWith(Categories.class)\r\n    @SuiteClasses({testClass1.class, testClass2.class})\r\n    public class MySmokeTestSuite {\r\n    }\r\n\r\nMaven settings\r\n\r\n     &lt;profile&gt;\r\n                &lt;id&gt;MyUISmoke&lt;/id&gt;\r\n                &lt;build&gt;\r\n                    &lt;plugins&gt;\r\n                        &lt;plugin&gt;\r\n                            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                            &lt;version&gt;3.0.0-M4&lt;/version&gt;\r\n                            &lt;configuration&gt;\r\n                                &lt;parallel&gt;methods&lt;/parallel&gt;\r\n                                &lt;threadCount&gt;5&lt;/threadCount&gt;\r\n                                &lt;includes&gt;\r\n                                    &lt;include&gt;**/runner/maven/MySmokeTestSuite.java&lt;/include&gt;\r\n                                &lt;/includes&gt;\r\n                            &lt;/configuration&gt;\r\n                        &lt;/plugin&gt;\r\n                    &lt;/plugins&gt;\r\n                &lt;/build&gt;\r\n            &lt;/profile&gt;\r\n\r\nWhen I run `mvn clean test -PMyUISmoke -Dtarget.env=qa_int -Ddriver-type=chrome` locally\r\nI was expecting there are multiple browser opening and running tests in parallel but it didn&#39;t.\r\nDid I miss something in the config? \r\n","title":"Parallel tests with Junit 4 and Maven are not working","body":"<p>I am trying to run the selenium UI tests in parallel with maven and Junit 4 but it's not working, only see one browser running the test.</p>\n<p>My test suite class to run 2 test classes</p>\n<pre><code>@RunWith(Categories.class)\n@SuiteClasses({testClass1.class, testClass2.class})\npublic class MySmokeTestSuite {\n}\n</code></pre>\n<p>Maven settings</p>\n<pre><code> &lt;profile&gt;\n            &lt;id&gt;MyUISmoke&lt;/id&gt;\n            &lt;build&gt;\n                &lt;plugins&gt;\n                    &lt;plugin&gt;\n                        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                        &lt;version&gt;3.0.0-M4&lt;/version&gt;\n                        &lt;configuration&gt;\n                            &lt;parallel&gt;methods&lt;/parallel&gt;\n                            &lt;threadCount&gt;5&lt;/threadCount&gt;\n                            &lt;includes&gt;\n                                &lt;include&gt;**/runner/maven/MySmokeTestSuite.java&lt;/include&gt;\n                            &lt;/includes&gt;\n                        &lt;/configuration&gt;\n                    &lt;/plugin&gt;\n                &lt;/plugins&gt;\n            &lt;/build&gt;\n        &lt;/profile&gt;\n</code></pre>\n<p>When I run <code>mvn clean test -PMyUISmoke -Dtarget.env=qa_int -Ddriver-type=chrome</code> locally\nI was expecting there are multiple browser opening and running tests in parallel but it didn't.\nDid I miss something in the config?</p>\n"},{"tags":["java","polymorphism"],"comments":[{"owner":{"account_id":482174,"reputation":2664,"user_id":1321399,"accept_rate":71,"display_name":"khan"},"score":1,"creation_date":1339859211,"post_id":11064409,"comment_id":14479286,"body_markdown":"I think he wants to know Is there any Difference Between flm.fly() and j.fly()? If yes? than What?","body":"I think he wants to know Is there any Difference Between flm.fly() and j.fly()? If yes? than What?"},{"owner":{"account_id":1857516,"reputation":951,"user_id":1682790,"accept_rate":64,"display_name":"Jack_Hu"},"score":0,"creation_date":1574213158,"post_id":11064409,"comment_id":104148872,"body_markdown":"There&#39;s a distinction to be made here between *compile-time* and *run-time*... The Java Compiler will see `flm.fly();` evaluate to: `System.out.println(&quot;No implementation&quot;);`... The Java Virtual Machine, at run-time will see `flm.fly();` evaluate to: `System.out.println(&quot;Start, Taxi, Fly&quot;);`... If you changed line 20 from `flm.fly();` to, `flm.bombardment();`, you would get a compilation error, as the `bombardment()` message is not part of `FlyingMachines` protocol.","body":"There&#39;s a distinction to be made here between <i>compile-time</i> and <i>run-time</i>... The Java Compiler will see <code>flm.fly();</code> evaluate to: <code>System.out.println(&quot;No implementation&quot;);</code>... The Java Virtual Machine, at run-time will see <code>flm.fly();</code> evaluate to: <code>System.out.println(&quot;Start, Taxi, Fly&quot;);</code>... If you changed line 20 from <code>flm.fly();</code> to, <code>flm.bombardment();</code>, you would get a compilation error, as the <code>bombardment()</code> message is not part of <code>FlyingMachines</code> protocol."}],"answers":[{"tags":[],"owner":{"account_id":444729,"reputation":27341,"user_id":836738,"display_name":"Tim Pote"},"comment_count":0,"down_vote_count":0,"up_vote_count":57,"is_accepted":false,"score":57,"last_activity_date":1339859226,"creation_date":1339858164,"answer_id":11064425,"question_id":11064409,"body_markdown":"In your example, the use of polymorphism isn&#39;t incredibly helpful since you only have one subclass of `FlyingMachine`.  Polymorphism becomes helpful if you have multiple kinds of `FlyingMachine`.  Then you could have a method that accepts any kind of `FlyingMachine` and uses its `fly()` method.  An example might be `testMaxAltitude(FlyingMachine)`.\r\n\r\nAnother feature that is only available with polymorphism is the ability to have a `List&lt;FlyingMachine&gt;` and use it to store `Jet`, `Kite`, or `VerySmallPebbles`.\r\n\r\nOne of the best cases one can make for using polymorphism is the ability to refer to interfaces rather than implementations.\r\n\r\nFor example, it&#39;s better to have a method that returns as `List&lt;FlyingMachine&gt;` rather than an `ArrayList&lt;FlyingMachine&gt;`.  That way, I can change my implementation within the method to a `LinkedList` or a `Stack` without breaking any code that uses my method.","title":"Why to use Polymorphism?","body":"<p>In your example, the use of polymorphism isn't incredibly helpful since you only have one subclass of <code>FlyingMachine</code>.  Polymorphism becomes helpful if you have multiple kinds of <code>FlyingMachine</code>.  Then you could have a method that accepts any kind of <code>FlyingMachine</code> and uses its <code>fly()</code> method.  An example might be <code>testMaxAltitude(FlyingMachine)</code>.</p>\n\n<p>Another feature that is only available with polymorphism is the ability to have a <code>List&lt;FlyingMachine&gt;</code> and use it to store <code>Jet</code>, <code>Kite</code>, or <code>VerySmallPebbles</code>.</p>\n\n<p>One of the best cases one can make for using polymorphism is the ability to refer to interfaces rather than implementations.</p>\n\n<p>For example, it's better to have a method that returns as <code>List&lt;FlyingMachine&gt;</code> rather than an <code>ArrayList&lt;FlyingMachine&gt;</code>.  That way, I can change my implementation within the method to a <code>LinkedList</code> or a <code>Stack</code> without breaking any code that uses my method.</p>\n"},{"comments":[{"owner":{"account_id":1322191,"reputation":11583,"user_id":1267768,"accept_rate":83,"display_name":"Matt"},"score":1,"creation_date":1339862568,"post_id":11064446,"comment_id":14479985,"body_markdown":"No, overriding is defined as the same method signature with different behavior.  Polymorphism is a broader view that essentially encompassing constructing an object of one type, and treating it as another type (ie, treating Jet as a FlyingMachine).  Inheritance, overriding and overloading are tools that allow you to achieve effective polymorphism (overriding and overloading are what is called ad-hoc polymorphism).","body":"No, overriding is defined as the same method signature with different behavior.  Polymorphism is a broader view that essentially encompassing constructing an object of one type, and treating it as another type (ie, treating Jet as a FlyingMachine).  Inheritance, overriding and overloading are tools that allow you to achieve effective polymorphism (overriding and overloading are what is called ad-hoc polymorphism)."}],"tags":[],"owner":{"account_id":1344409,"reputation":9495,"user_id":1285418,"display_name":"Pau Kiat Wee"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1339858666,"creation_date":1339858296,"answer_id":11064446,"question_id":11064409,"body_markdown":"Both `flm.fly()` and `j.fly()` give you the same answer because of the type of the instance is actually the same, which is `Jet`, so they are behave the same.\r\n\r\nYou can see the difference when you:\r\n\r\n    FlyingMachines flm = new FlyingMachines();\r\n    flm.fly();\r\n    \r\n    Jet j = new Jet();\r\n    j.bombarment();\r\n    j.fly();\r\n\r\nPolymorphism is define as same method signature with difference behaviour. As you can see, both `FlyingMachines` and `Jet` have method `fly()` defined, but the method is implemented differently, which consider as behave differently.\r\n\r\nSee\r\naa\r\n\r\n - [Polymorphism][1]\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Polymorphism_%28computer_science%29","title":"Why to use Polymorphism?","body":"<p>Both <code>flm.fly()</code> and <code>j.fly()</code> give you the same answer because of the type of the instance is actually the same, which is <code>Jet</code>, so they are behave the same.</p>\n\n<p>You can see the difference when you:</p>\n\n<pre><code>FlyingMachines flm = new FlyingMachines();\nflm.fly();\n\nJet j = new Jet();\nj.bombarment();\nj.fly();\n</code></pre>\n\n<p>Polymorphism is define as same method signature with difference behaviour. As you can see, both <code>FlyingMachines</code> and <code>Jet</code> have method <code>fly()</code> defined, but the method is implemented differently, which consider as behave differently.</p>\n\n<p>See\naa</p>\n\n<ul>\n<li><a href=\"http://en.wikipedia.org/wiki/Polymorphism_%28computer_science%29\" rel=\"nofollow\">Polymorphism</a></li>\n</ul>\n"},{"comments":[{"owner":{"account_id":999370,"reputation":3418,"user_id":1014576,"accept_rate":59,"display_name":"baig772"},"score":0,"creation_date":1339858741,"post_id":11064455,"comment_id":14479165,"body_markdown":"Thanks @Sebastian Piu - Let me add two more child classes 1) Heli 2) Aeroplane - So i know my question is still same.","body":"Thanks @Sebastian Piu - Let me add two more child classes 1) Heli 2) Aeroplane - So i know my question is still same."}],"tags":[],"owner":{"account_id":221654,"reputation":7898,"user_id":479760,"accept_rate":86,"display_name":"Sebastian Piu"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1339859215,"creation_date":1339858348,"answer_id":11064455,"question_id":11064409,"body_markdown":"It doesn&#39;t add much if you are going to have just Jets, the advantage will come when you have different FlyingMachines, e.g. Aeroplane \r\n\r\nNow that you&#39;ve modified to include more classes, the advantage of polymorphism is that abstraction from what the specific type (and business concept) of the instance you receive, you just care that it can fly","title":"Why to use Polymorphism?","body":"<p>It doesn't add much if you are going to have just Jets, the advantage will come when you have different FlyingMachines, e.g. Aeroplane </p>\n\n<p>Now that you've modified to include more classes, the advantage of polymorphism is that abstraction from what the specific type (and business concept) of the instance you receive, you just care that it can fly</p>\n"},{"tags":[],"owner":{"account_id":438835,"reputation":1820,"user_id":827371,"accept_rate":83,"display_name":"steve8918"},"comment_count":0,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1339859041,"creation_date":1339859041,"answer_id":11064551,"question_id":11064409,"body_markdown":"The reason why you use polymorphism is when you build generic frameworks that take a whole bunch of different objects **with the same interface**.  When you create a new type of object, you don&#39;t need to change the framework to accommodate the new object type, as long as it follows the &quot;rules&quot; of the object.\r\n\r\nSo in your case, a more useful example is creating an object type &quot;Airport&quot; that accepts different types of FlyingMachines.  The Airport will define a &quot;AllowPlaneToLand&quot; function, similar to:\r\n\r\n    //pseudocode\r\n    void AllowPlaneToLand(FlyingMachine fm)\r\n    {\r\n        fm.LandPlane();\r\n    }\r\n\r\nAs long as each type of FlyingMachine defines a proper LandPlane method, it can land itself properly.  The Airport doesn&#39;t need to know anything about the FlyingMachine, except that to land the plane, it needs to invoke LandPlane on the FlyingMachine.  So the Airport no longer needs to change, and can continue to accept new types of FlyingMachines, be it a handglider, a UFO, a parachute, etc.\r\n\r\nSo polymorphism is useful for the frameworks that are built around these objects, that can generically access these methods without having to change.","title":"Why to use Polymorphism?","body":"<p>The reason why you use polymorphism is when you build generic frameworks that take a whole bunch of different objects <strong>with the same interface</strong>.  When you create a new type of object, you don't need to change the framework to accommodate the new object type, as long as it follows the \"rules\" of the object.</p>\n\n<p>So in your case, a more useful example is creating an object type \"Airport\" that accepts different types of FlyingMachines.  The Airport will define a \"AllowPlaneToLand\" function, similar to:</p>\n\n<pre><code>//pseudocode\nvoid AllowPlaneToLand(FlyingMachine fm)\n{\n    fm.LandPlane();\n}\n</code></pre>\n\n<p>As long as each type of FlyingMachine defines a proper LandPlane method, it can land itself properly.  The Airport doesn't need to know anything about the FlyingMachine, except that to land the plane, it needs to invoke LandPlane on the FlyingMachine.  So the Airport no longer needs to change, and can continue to accept new types of FlyingMachines, be it a handglider, a UFO, a parachute, etc.</p>\n\n<p>So polymorphism is useful for the frameworks that are built around these objects, that can generically access these methods without having to change.</p>\n"},{"tags":[],"owner":{"account_id":1093119,"reputation":367,"user_id":1087294,"display_name":"Cruis"},"comment_count":0,"down_vote_count":2,"up_vote_count":12,"is_accepted":true,"score":10,"last_activity_date":1339860608,"creation_date":1339860608,"answer_id":11064767,"question_id":11064409,"body_markdown":"let&#39;s look at OO design first, inheritance represents a IS-A relationship, generally we can say something like &quot;let our `FlyingMachines` fly&quot;. every specific `FlyingMachines` (sub class) IS-A `FlyingMachines` (parent class), let say `Jet`, fits this &quot;let our `FlyingMachines` fly&quot;, while we want this flying actually be the fly function of the specific one (sub class), that&#39;s polymorphism take over.\r\n\r\nso we do things in abstract way, oriented interfaces and base class, do not actually depend on detail implementation, polymorphism will do the right thing!  ","title":"Why to use Polymorphism?","body":"<p>let's look at OO design first, inheritance represents a IS-A relationship, generally we can say something like \"let our <code>FlyingMachines</code> fly\". every specific <code>FlyingMachines</code> (sub class) IS-A <code>FlyingMachines</code> (parent class), let say <code>Jet</code>, fits this \"let our <code>FlyingMachines</code> fly\", while we want this flying actually be the fly function of the specific one (sub class), that's polymorphism take over.</p>\n\n<p>so we do things in abstract way, oriented interfaces and base class, do not actually depend on detail implementation, polymorphism will do the right thing!  </p>\n"},{"tags":[],"owner":{"account_id":1363065,"reputation":1271,"user_id":1300056,"accept_rate":33,"display_name":"RTA"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1410976051,"creation_date":1389251494,"answer_id":21013806,"question_id":11064409,"body_markdown":"**polymorphism as stated clear by itself, a one which mapped for many.**\r\n\r\njava is a oops language so it have implementation for it by abstract, overloading and overriding\r\n\r\nremember java would not have specification for run time polymorphism.\r\n\r\nit have some best of example for it too.\r\n\r\n    public abstract class Human {\r\n    \r\n    \tpublic abstract String getGender();\r\n    \r\n    }\r\n    \r\n    class Male extends Human\r\n    {\r\n    \t@Override\r\n    \tpublic String getGender() {\r\n    \t\treturn &quot;male&quot;;\r\n    \t}\r\n    }\r\n    \r\n    class Female extends Human\r\n    {\r\n    \t@Override\r\n    \tpublic String getGender() {\r\n    \t\treturn &quot;female&quot;;\r\n    \t}\r\n    }\r\n\r\n**Overriding**\r\n\r\nredefine the behavior of base class.\r\nfor example i want to add a speed count int the existing functionality of move in my base Car.\r\n\r\n**Overloading**\r\n\r\ncan have behavior with same name with different signature.\r\nfor example a particular president speaks clear an loud but another one speaks only loud. ","title":"Why to use Polymorphism?","body":"<p><strong>polymorphism as stated clear by itself, a one which mapped for many.</strong></p>\n\n<p>java is a oops language so it have implementation for it by abstract, overloading and overriding</p>\n\n<p>remember java would not have specification for run time polymorphism.</p>\n\n<p>it have some best of example for it too.</p>\n\n<pre><code>public abstract class Human {\n\n    public abstract String getGender();\n\n}\n\nclass Male extends Human\n{\n    @Override\n    public String getGender() {\n        return \"male\";\n    }\n}\n\nclass Female extends Human\n{\n    @Override\n    public String getGender() {\n        return \"female\";\n    }\n}\n</code></pre>\n\n<p><strong>Overriding</strong></p>\n\n<p>redefine the behavior of base class.\nfor example i want to add a speed count int the existing functionality of move in my base Car.</p>\n\n<p><strong>Overloading</strong></p>\n\n<p>can have behavior with same name with different signature.\nfor example a particular president speaks clear an loud but another one speaks only loud. </p>\n"},{"tags":[],"owner":{"account_id":4319750,"reputation":1,"user_id":3528370,"display_name":"Harkaran"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1397368195,"creation_date":1397368195,"answer_id":23039613,"question_id":11064409,"body_markdown":"The good reason for why Polymorphism is need in java is because the concept is extensively used in implementing inheritance.It plays an important role in allowing objects having different internal structures to share the same external interface.","title":"Why to use Polymorphism?","body":"<p>The good reason for why Polymorphism is need in java is because the concept is extensively used in implementing inheritance.It plays an important role in allowing objects having different internal structures to share the same external interface.</p>\n"},{"comments":[{"owner":{"account_id":16570397,"reputation":1111,"user_id":11973720,"display_name":"Neha Chaudhary"},"score":0,"creation_date":1609175451,"post_id":32909025,"comment_id":115768257,"body_markdown":"Very nicely explained. Thank you!","body":"Very nicely explained. Thank you!"},{"owner":{"account_id":15662,"reputation":20442,"user_id":33311,"accept_rate":92,"display_name":"Lernkurve"},"score":0,"creation_date":1609241481,"post_id":32909025,"comment_id":115785967,"body_markdown":"Happy to hear that, @NehaChaudhary!","body":"Happy to hear that, @NehaChaudhary!"}],"tags":[],"owner":{"account_id":15662,"reputation":20442,"user_id":33311,"accept_rate":92,"display_name":"Lernkurve"},"comment_count":2,"down_vote_count":0,"up_vote_count":32,"is_accepted":false,"score":32,"last_activity_date":1443796155,"creation_date":1443794804,"answer_id":32909025,"question_id":11064409,"body_markdown":"&gt; What is the advantage of polymorphism when both `flm.fly()` and `j.fly()`\r\n&gt; give me the same answer?\r\n\r\nThe advantage is that\r\n\r\n    FlyingMachines flm = new Jet();\r\n    flm.fly();\r\n\r\nreturns\r\n\r\n    &quot;Start, Taxi, Fly&quot;\r\n\r\ninstead of\r\n\r\n    &quot;No implementation&quot;\r\n\r\nThat&#39;s polymorphism. You call `fly()` on an object of type `FlyingMachine` and it still knows that it is in fact a `Jet` and calls the appropriate `fly()` method instead of the wrong one which outputs `&quot;No implementation&quot;`.\r\n\r\nThat means you can write methods that work with objects of type `FlyingMachine` and feed it with all kinds of subtypes like `Jet` or `Helicopter` and those methods will always do the right thing, i.e. calling the `fly()` method of the appropriate type instead of always doing the same thing, i.e. outputting `&quot;No implementation&quot;.`\r\n\r\n###Polymorphism\r\n\r\nPolymorphism is not useful in your example.\r\n\r\n - a) It gets useful when you have different types of objects and can write classes that can work with all those different types because they all adhere to the same API.\r\n\r\n - b) It also gets useful when you can add new `FlyingMachine`s to your application without changing any of the existing logic.\r\n\r\na) and b) are two sides of the same coin.\r\n\r\nLet me show how.\r\n\r\n###Code example\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    import static java.lang.System.out;\r\n    \r\n    public class PolymorphismDemo {\r\n    \t\r\n    \tpublic static void main(String[] args) {\r\n    \t\tList&lt;FlyingMachine&gt; machines = new ArrayList&lt;FlyingMachine&gt;();\r\n    \t\tmachines.add(new FlyingMachine());\r\n    \t\tmachines.add(new Jet());\r\n    \t\tmachines.add(new Helicopter());\r\n    \t\tmachines.add(new Jet());\r\n\r\n    \t\tnew MakeThingsFly().letTheMachinesFly(machines);\r\n    \t}\r\n    }\r\n    \r\n    class MakeThingsFly {\r\n    \tpublic void letTheMachinesFly(List&lt;FlyingMachine&gt; flyingMachines) {\r\n    \t\tfor (FlyingMachine flyingMachine : flyingMachines) {\r\n    \t\t\tflyingMachine.fly();\r\n    \t\t}\r\n    \t}\r\n    }\r\n    \r\n    class FlyingMachine {\r\n        public void fly() {\r\n            out.println(&quot;No implementation&quot;);\r\n        }\r\n    }\r\n    \r\n    class Jet extends FlyingMachine {\r\n        @Override\r\n    \tpublic void fly() {\r\n            out.println(&quot;Start, taxi, fly&quot;);\r\n        }\r\n    \r\n        public void bombardment() {\r\n            out.println(&quot;Fire missile&quot;);\r\n        }\r\n    }\r\n    \r\n    class Helicopter extends FlyingMachine {\r\n    \t@Override\r\n    \tpublic void fly() {\r\n            out.println(&quot;Start vertically, hover, fly&quot;);\r\n        }\r\n    }\r\n\r\n###Explanation\r\n\r\na) The `MakeThingsFly` class can work with everything that is of type `FlyingMachine`.\r\n\r\nb) The method `letTheMachinesFly` also works without any change (!) when you add a new class, for example `PropellerPlane`:\r\n\r\n    public void letTheMachinesFly(List&lt;FlyingMachine&gt; flyingMachines) {\r\n    \t\tfor (FlyingMachine flyingMachine : flyingMachines) {\r\n    \t\t\tflyingMachine.fly();\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n\r\nThat&#39;s the power of polymorphism. You can implement the [open-closed-principle][1] with it.\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Open/closed_principle#Polymorphic_open.2Fclosed_principle","title":"Why to use Polymorphism?","body":"<blockquote>\n  <p>What is the advantage of polymorphism when both <code>flm.fly()</code> and <code>j.fly()</code>\n  give me the same answer?</p>\n</blockquote>\n\n<p>The advantage is that</p>\n\n<pre><code>FlyingMachines flm = new Jet();\nflm.fly();\n</code></pre>\n\n<p>returns</p>\n\n<pre><code>\"Start, Taxi, Fly\"\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>\"No implementation\"\n</code></pre>\n\n<p>That's polymorphism. You call <code>fly()</code> on an object of type <code>FlyingMachine</code> and it still knows that it is in fact a <code>Jet</code> and calls the appropriate <code>fly()</code> method instead of the wrong one which outputs <code>\"No implementation\"</code>.</p>\n\n<p>That means you can write methods that work with objects of type <code>FlyingMachine</code> and feed it with all kinds of subtypes like <code>Jet</code> or <code>Helicopter</code> and those methods will always do the right thing, i.e. calling the <code>fly()</code> method of the appropriate type instead of always doing the same thing, i.e. outputting <code>\"No implementation\".</code></p>\n\n<h3>Polymorphism</h3>\n\n<p>Polymorphism is not useful in your example.</p>\n\n<ul>\n<li><p>a) It gets useful when you have different types of objects and can write classes that can work with all those different types because they all adhere to the same API.</p></li>\n<li><p>b) It also gets useful when you can add new <code>FlyingMachine</code>s to your application without changing any of the existing logic.</p></li>\n</ul>\n\n<p>a) and b) are two sides of the same coin.</p>\n\n<p>Let me show how.</p>\n\n<h3>Code example</h3>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\n\nimport static java.lang.System.out;\n\npublic class PolymorphismDemo {\n\n    public static void main(String[] args) {\n        List&lt;FlyingMachine&gt; machines = new ArrayList&lt;FlyingMachine&gt;();\n        machines.add(new FlyingMachine());\n        machines.add(new Jet());\n        machines.add(new Helicopter());\n        machines.add(new Jet());\n\n        new MakeThingsFly().letTheMachinesFly(machines);\n    }\n}\n\nclass MakeThingsFly {\n    public void letTheMachinesFly(List&lt;FlyingMachine&gt; flyingMachines) {\n        for (FlyingMachine flyingMachine : flyingMachines) {\n            flyingMachine.fly();\n        }\n    }\n}\n\nclass FlyingMachine {\n    public void fly() {\n        out.println(\"No implementation\");\n    }\n}\n\nclass Jet extends FlyingMachine {\n    @Override\n    public void fly() {\n        out.println(\"Start, taxi, fly\");\n    }\n\n    public void bombardment() {\n        out.println(\"Fire missile\");\n    }\n}\n\nclass Helicopter extends FlyingMachine {\n    @Override\n    public void fly() {\n        out.println(\"Start vertically, hover, fly\");\n    }\n}\n</code></pre>\n\n<h3>Explanation</h3>\n\n<p>a) The <code>MakeThingsFly</code> class can work with everything that is of type <code>FlyingMachine</code>.</p>\n\n<p>b) The method <code>letTheMachinesFly</code> also works without any change (!) when you add a new class, for example <code>PropellerPlane</code>:</p>\n\n<pre><code>public void letTheMachinesFly(List&lt;FlyingMachine&gt; flyingMachines) {\n        for (FlyingMachine flyingMachine : flyingMachines) {\n            flyingMachine.fly();\n        }\n    }\n}\n</code></pre>\n\n<p>That's the power of polymorphism. You can implement the <a href=\"https://en.wikipedia.org/wiki/Open/closed_principle#Polymorphic_open.2Fclosed_principle\" rel=\"noreferrer\">open-closed-principle</a> with it.</p>\n"},{"tags":[],"owner":{"account_id":1675111,"reputation":786,"user_id":1540840,"accept_rate":55,"display_name":"Luca Marzi"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1443795640,"creation_date":1443795640,"answer_id":32909318,"question_id":11064409,"body_markdown":"Polymorphism gives you benefits only if you need Polymorphism. \nIt&#39;s used when an entity of your conceptual project can be seen as the specialization of another entity. \nThe main idea is &quot;specialization&quot;. \nA great example stands in the so called Taxonomy,for example applied to living beings. \nDogs and Humans are both Mammals. \nThis means that, the class Mammals group all the entities that have some properties and behaviors in common. \n\nAlso, an ElectricCar and a DieselCar are a specialization of a Car. \nSo both have a isThereFuel() because when you drive a car you expect to know if there&#39;s fuel enough for driving it. \nAnother great concept is &quot;expectation&quot;. \n\nIt&#39;s always a great idea to draw an ER (entity relationship)  diagram of the domain of your software before starting it. \nThat&#39;s because your are forced to picture which kind of entities are gonna be created and, if you&#39;re able enough, you can save lot of code finding common behaviors between entities. \nBut saving code isn&#39;t the only benefit of a good project. \n\nYou might be interested in finding out the so called &quot;software engineering&quot;  that it&#39;s a collection of techniques and concepts that allows you to write &quot;clean code&quot;  (there&#39;s also a great book called &quot;Clean code&quot; that&#39;s widely suggested by pro-grammes). \n\n","title":"Why to use Polymorphism?","body":"<p>Polymorphism gives you benefits only if you need Polymorphism. \nIt's used when an entity of your conceptual project can be seen as the specialization of another entity. \nThe main idea is \"specialization\". \nA great example stands in the so called Taxonomy,for example applied to living beings. \nDogs and Humans are both Mammals. \nThis means that, the class Mammals group all the entities that have some properties and behaviors in common. </p>\n\n<p>Also, an ElectricCar and a DieselCar are a specialization of a Car. \nSo both have a isThereFuel() because when you drive a car you expect to know if there's fuel enough for driving it. \nAnother great concept is \"expectation\". </p>\n\n<p>It's always a great idea to draw an ER (entity relationship)  diagram of the domain of your software before starting it. \nThat's because your are forced to picture which kind of entities are gonna be created and, if you're able enough, you can save lot of code finding common behaviors between entities. \nBut saving code isn't the only benefit of a good project. </p>\n\n<p>You might be interested in finding out the so called \"software engineering\"  that it's a collection of techniques and concepts that allows you to write \"clean code\"  (there's also a great book called \"Clean code\" that's widely suggested by pro-grammes). </p>\n"},{"tags":[],"owner":{"account_id":3985733,"reputation":1506,"user_id":3286353,"accept_rate":67,"display_name":"murali kurapati"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1682850680,"creation_date":1480772370,"answer_id":40948395,"question_id":11064409,"body_markdown":"Polymorphism can also help our code to remove the &quot;if&quot; conditionals which is intended to produce production level code because removing conditionals will increase the code readability and helps us to write better unit test cases, we know for &quot;n&quot; if cases there comes n!(n factorial) possibilities.\r\n\r\nLet us see how. If you have class FlyingMachine which takes a string in the constructor defining the type of FlyMachine as below:\r\n\r\n    class FlyingMachine{\r\n    \r\n        private type;\r\n\r\n        public FlyingMachine(String type){\r\n                 this.type = type;\r\n        }\r\n\r\n        public int getFlyingSpeedInMph {\r\n             if(type.equals(&quot;Jet&quot;))\r\n                  return 600;\r\n             if(type.equals(&quot;AirPlane&quot;))\r\n                  return 300;\r\n        }\r\n\r\n     }\r\n\r\nWe can create two instances of FlyingMachine as:\r\n\r\n     FlyingMachine jet = new FlyingMachine(&quot;Jet&quot;);\r\n     FlyingMachine airPlane = new FlyingMachine(&quot;AirPlane&quot;);\r\nand get the speeds using\r\n\r\n     jet.fylingSpeedInMph();\r\n     airPlane.flyingSpeedInMph();\r\n\r\n\r\nBut if you use polymorphism you are going to remove the if conditions by extending the generic FlyMachine class and overriding the getFlyingSpeedInMph as below:\r\n\r\n    class interface FlyingMachine {\r\n         \r\n         public int abstract getFlyingSpeedInMph;\r\n    }\r\n\r\n     \r\n    class Jet extends FlyingMachine {\r\n        @Override\r\n        public int getFlyingSpeedInMph(){\r\n              return 600;\r\n        }\r\n    }\r\n                                       \r\n    class Airplane extends FlyingMachine {\r\n        @Override\r\n        public int getFlyingSpeedInMph(){\r\n              return 300;\r\n        }\r\n    }\r\n\r\nNow you can get the flying speeds as below:\r\n\r\n     FlyingMachine jet = new Jet();\r\n     jet.flyingSpeed();\r\n\r\n     FlyingMachine airPlane = new AirPlane();\r\n     airPlane.flyingSpeed();\r\n \r\n","title":"Why to use Polymorphism?","body":"<p>Polymorphism can also help our code to remove the &quot;if&quot; conditionals which is intended to produce production level code because removing conditionals will increase the code readability and helps us to write better unit test cases, we know for &quot;n&quot; if cases there comes n!(n factorial) possibilities.</p>\n<p>Let us see how. If you have class FlyingMachine which takes a string in the constructor defining the type of FlyMachine as below:</p>\n<pre><code>class FlyingMachine{\n\n    private type;\n\n    public FlyingMachine(String type){\n             this.type = type;\n    }\n\n    public int getFlyingSpeedInMph {\n         if(type.equals(&quot;Jet&quot;))\n              return 600;\n         if(type.equals(&quot;AirPlane&quot;))\n              return 300;\n    }\n\n }\n</code></pre>\n<p>We can create two instances of FlyingMachine as:</p>\n<pre><code> FlyingMachine jet = new FlyingMachine(&quot;Jet&quot;);\n FlyingMachine airPlane = new FlyingMachine(&quot;AirPlane&quot;);\n</code></pre>\n<p>and get the speeds using</p>\n<pre><code> jet.fylingSpeedInMph();\n airPlane.flyingSpeedInMph();\n</code></pre>\n<p>But if you use polymorphism you are going to remove the if conditions by extending the generic FlyMachine class and overriding the getFlyingSpeedInMph as below:</p>\n<pre><code>class interface FlyingMachine {\n     \n     public int abstract getFlyingSpeedInMph;\n}\n\n \nclass Jet extends FlyingMachine {\n    @Override\n    public int getFlyingSpeedInMph(){\n          return 600;\n    }\n}\n                                   \nclass Airplane extends FlyingMachine {\n    @Override\n    public int getFlyingSpeedInMph(){\n          return 300;\n    }\n}\n</code></pre>\n<p>Now you can get the flying speeds as below:</p>\n<pre><code> FlyingMachine jet = new Jet();\n jet.flyingSpeed();\n\n FlyingMachine airPlane = new AirPlane();\n airPlane.flyingSpeed();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6701697,"reputation":197,"user_id":5167964,"accept_rate":100,"display_name":"Vivek Buddhadev"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1490778006,"creation_date":1490778006,"answer_id":43088923,"question_id":11064409,"body_markdown":"Let&#39;s add one more class in this, It help&#39;s you to understand use of polymorphism..\r\n\r\n    class FlyingMachines {\r\n        public void fly() {\r\n            System.out.println(&quot;No implementation&quot;);\r\n        }\r\n    }\r\n    \r\n    class Jet extends FlyingMachines {\r\n        public void fly() {\r\n            System.out.println(&quot;Start, Jet, Fly&quot;);\r\n        }\r\n    }\r\n    \r\n    class FighterPlan extends FlyingMachines {\r\n        public void fly() {\r\n            System.out.println(&quot;Start, Fighter, Fight&quot;);\r\n        }\r\n    }\r\n    \r\n    public class PolymorphicTest {\r\n        public static void main(String[] args) {\r\n            FlyingMachines flm = new Jet();\r\n            flm.fly();\r\n    \r\n            FlyingMachines flm2 = new FighterPlan();\r\n            flm2.fly();\r\n        }\r\n    }\r\n\r\nOutput:\r\n\r\n    Start, Jet, Fly\r\n    Start, Fighter, Fight","title":"Why to use Polymorphism?","body":"<p>Let's add one more class in this, It help's you to understand use of polymorphism..</p>\n\n<pre><code>class FlyingMachines {\n    public void fly() {\n        System.out.println(\"No implementation\");\n    }\n}\n\nclass Jet extends FlyingMachines {\n    public void fly() {\n        System.out.println(\"Start, Jet, Fly\");\n    }\n}\n\nclass FighterPlan extends FlyingMachines {\n    public void fly() {\n        System.out.println(\"Start, Fighter, Fight\");\n    }\n}\n\npublic class PolymorphicTest {\n    public static void main(String[] args) {\n        FlyingMachines flm = new Jet();\n        flm.fly();\n\n        FlyingMachines flm2 = new FighterPlan();\n        flm2.fly();\n    }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Start, Jet, Fly\nStart, Fighter, Fight\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1592127,"reputation":18171,"user_id":1475228,"accept_rate":84,"display_name":"Pritam Banerjee"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1497857222,"creation_date":1496774233,"answer_id":44397479,"question_id":11064409,"body_markdown":"[Polymorphism][1] (both runtime and compile time) is necessary in Java for quite a few reasons.\r\n\r\nMethod overriding is a *run time polymorphism* and overloading is *compile time polymorphism.*\r\n\r\nFew of them are(some of them are already discussed):\r\n\r\n 1. **Collections**: Suppose you have multiple type of flying machines and you want to have them all in a single collection. You can just define a list of type `FlyingMachines` and add them all.\r\n   \r\n        List&lt;FlyingMachine&gt; fmList = new ArrayList&lt;&gt;();\r\n        fmList.add(new new JetPlaneExtendingFlyingMachine());\r\n        fmList.add(new PassengerPlanePlaneExtendingFlyingMachine());\r\n   The above can be done only by polymorphism. Otherwise you would have to maintain two separate lists.\r\n 2. **Caste one type to another** : Declare the objects like :\r\n\r\n        FlyingMachine fm1 = new JetPlaneExtendingFlyingMachine();\r\n        FlyingMachine fm2 = new PassengerPlanePlaneExtendingFlyingMachine();\r\n        fm1 = fm2; //can be done\r\n\r\n 3. **Overloading**: Not related with the code you gave, But overloading is also another type of polymorphism called **compile time polymorphism**.\r\n\r\n 4. Can have a single method which accepts type `FlyingMachine` handle all types i.e. subclasses of FlyingMachine. Can only be achieved with `Polymorphism`.\r\n\r\n    \r\n\r\n\r\n  [1]: http://prinavtech.blogspot.com/2017/06/why-is-polymorphism-needed-in-java.html","title":"Why to use Polymorphism?","body":"<p><a href=\"http://prinavtech.blogspot.com/2017/06/why-is-polymorphism-needed-in-java.html\" rel=\"noreferrer\">Polymorphism</a> (both runtime and compile time) is necessary in Java for quite a few reasons.</p>\n\n<p>Method overriding is a <em>run time polymorphism</em> and overloading is <em>compile time polymorphism.</em></p>\n\n<p>Few of them are(some of them are already discussed):</p>\n\n<ol>\n<li><p><strong>Collections</strong>: Suppose you have multiple type of flying machines and you want to have them all in a single collection. You can just define a list of type <code>FlyingMachines</code> and add them all.</p>\n\n<pre><code>List&lt;FlyingMachine&gt; fmList = new ArrayList&lt;&gt;();\nfmList.add(new new JetPlaneExtendingFlyingMachine());\nfmList.add(new PassengerPlanePlaneExtendingFlyingMachine());\n</code></pre>\n\n<p>The above can be done only by polymorphism. Otherwise you would have to maintain two separate lists.</p></li>\n<li><p><strong>Caste one type to another</strong> : Declare the objects like :</p>\n\n<pre><code>FlyingMachine fm1 = new JetPlaneExtendingFlyingMachine();\nFlyingMachine fm2 = new PassengerPlanePlaneExtendingFlyingMachine();\nfm1 = fm2; //can be done\n</code></pre></li>\n<li><p><strong>Overloading</strong>: Not related with the code you gave, But overloading is also another type of polymorphism called <strong>compile time polymorphism</strong>.</p></li>\n<li><p>Can have a single method which accepts type <code>FlyingMachine</code> handle all types i.e. subclasses of FlyingMachine. Can only be achieved with <code>Polymorphism</code>.</p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":13562132,"reputation":251,"user_id":9783461,"display_name":"Jayshree"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1526572524,"creation_date":1526566888,"answer_id":50393867,"question_id":11064409,"body_markdown":"Here, for this particular code, there is no need of polymorphism. \r\n\r\nLet&#39;s understand why and when we need polymorphism.\r\n\r\nSuppose there are different kinds of machines (like car, scooter, washing machine, electric motor, etc.) and we know that every machine starts and stops. But the logic to start and stop a machine is different for each machine. Here, every machine will have different implementations to start and stop. So, to provide different implementations we need polymorphism. \r\n\r\nHere we can have a base class machine with `start()` and `stop()` as its methods and each machine type can extend this functionality and `@Override` these methods.","title":"Why to use Polymorphism?","body":"<p>Here, for this particular code, there is no need of polymorphism. </p>\n\n<p>Let's understand why and when we need polymorphism.</p>\n\n<p>Suppose there are different kinds of machines (like car, scooter, washing machine, electric motor, etc.) and we know that every machine starts and stops. But the logic to start and stop a machine is different for each machine. Here, every machine will have different implementations to start and stop. So, to provide different implementations we need polymorphism. </p>\n\n<p>Here we can have a base class machine with <code>start()</code> and <code>stop()</code> as its methods and each machine type can extend this functionality and <code>@Override</code> these methods.</p>\n"}],"owner":{"account_id":999370,"reputation":3418,"user_id":1014576,"accept_rate":59,"display_name":"baig772"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":97937,"favorite_count":0,"down_vote_count":2,"up_vote_count":43,"accepted_answer_id":11064767,"answer_count":13,"score":41,"last_activity_date":1691692895,"creation_date":1339858058,"question_id":11064409,"body_markdown":"I have the following code in which I have a parent class and its child. I am trying to determine how the code benefits from using polymorphism. \r\n\r\n\tclass FlyingMachines {\r\n\t\tpublic void fly() {\r\n\t\t\tSystem.out.println(&quot;No implementation&quot;);\r\n\t\t}\r\n\t}\r\n\t\r\n\tclass Jet extends FlyingMachines {\r\n\t\tpublic void fly() {\r\n\t\t\tSystem.out.println(&quot;Start, Taxi, Fly&quot;);\r\n\t\t}\r\n\t\r\n\t\tpublic void bombardment() {\r\n\t\t\tSystem.out.println(&quot;Throw Missile&quot;);\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic class PolymorphicTest {\r\n\t\tpublic static void main(String[] args) {\r\n\t\t\tFlyingMachines flm = new Jet();\r\n\t\t\tflm.fly();\r\n\t\r\n\t\t\tJet j = new Jet();\r\n\t\t\tj.bombardment();\r\n\t\t\tj.fly();\r\n\t\t}\r\n\t}\r\n\r\nWhat is the advantage of polymorphism when both `flm.fly()` and `j.fly()` give me the same answer?\r\n","title":"Why to use Polymorphism?","body":"<p>I have the following code in which I have a parent class and its child. I am trying to determine how the code benefits from using polymorphism. </p>\n\n<pre><code>class FlyingMachines {\n    public void fly() {\n        System.out.println(\"No implementation\");\n    }\n}\n\nclass Jet extends FlyingMachines {\n    public void fly() {\n        System.out.println(\"Start, Taxi, Fly\");\n    }\n\n    public void bombardment() {\n        System.out.println(\"Throw Missile\");\n    }\n}\n\npublic class PolymorphicTest {\n    public static void main(String[] args) {\n        FlyingMachines flm = new Jet();\n        flm.fly();\n\n        Jet j = new Jet();\n        j.bombardment();\n        j.fly();\n    }\n}\n</code></pre>\n\n<p>What is the advantage of polymorphism when both <code>flm.fly()</code> and <code>j.fly()</code> give me the same answer?</p>\n"},{"tags":["java","google-chrome","selenium-webdriver","jenkins","selenium-chromedriver"],"owner":{"account_id":16321984,"reputation":1,"user_id":11787563,"display_name":"Gabriel Mart&#237;n Quiroga Golini"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691692443,"creation_date":1691685584,"question_id":76877729,"body_markdown":"Found this error\r\n\r\n    net.thucydides.core.webdriver.DriverConfigurationError: \r\n    WebDriver was unable to create a new instance of type class org.openqa.selenium.chrome.ChromeDriver\r\n    WebDriver reported the following message: Could not start a new session. Response code 500. Message: unknown error: Chrome failed to start: crashed.\r\n      (unknown error: DevToolsActivePort file doesn&#39;t exist)\r\n      (The process started from chrome location /usr/bin/google-chrome is no longer running, so ChromeDriver is assuming that Chrome has crashed.)\r\n\r\n \r\n\r\nAfter try a lot of things like\r\n- Install chromedriver and google-chrome\r\n- Set credentials\r\n- Change file path\r\n- Change google chrome capabilities...\r\n\r\nAdding this capability worked for me :) \r\n\r\n&quot;--crash-dumps-dir=/tmp&quot;","title":"Automation error - serenity bdd - selenium - java - chrome - jenkins","body":"<p>Found this error</p>\n<pre><code>net.thucydides.core.webdriver.DriverConfigurationError: \nWebDriver was unable to create a new instance of type class org.openqa.selenium.chrome.ChromeDriver\nWebDriver reported the following message: Could not start a new session. Response code 500. Message: unknown error: Chrome failed to start: crashed.\n  (unknown error: DevToolsActivePort file doesn't exist)\n  (The process started from chrome location /usr/bin/google-chrome is no longer running, so ChromeDriver is assuming that Chrome has crashed.)\n</code></pre>\n<p>After try a lot of things like</p>\n<ul>\n<li>Install chromedriver and google-chrome</li>\n<li>Set credentials</li>\n<li>Change file path</li>\n<li>Change google chrome capabilities...</li>\n</ul>\n<p>Adding this capability worked for me :)</p>\n<p>&quot;--crash-dumps-dir=/tmp&quot;</p>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1688896947,"post_id":76645385,"comment_id":135133297,"body_markdown":"`I just cant use the annotation to pull the information I want` is a very bad way of describing what it is you want. JWTs dont use principals they use `JwtAuthenticationToken` this will solve what you are doing https://thomasandolf.medium.com/spring-security-jwts-getting-started-ebdb4e4f1dd1","body":"<code>I just cant use the annotation to pull the information I want</code> is a very bad way of describing what it is you want. JWTs dont use principals they use <code>JwtAuthenticationToken</code> this will solve what you are doing <a href=\"https://thomasandolf.medium.com/spring-security-jwts-getting-started-ebdb4e4f1dd1\" rel=\"nofollow noreferrer\">thomasandolf.medium.com/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":14218206,"reputation":11,"user_id":10271432,"display_name":"Caledrith"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1688972249,"creation_date":1688972249,"answer_id":76651333,"question_id":76645385,"body_markdown":"`@AuthenticationPrincipal` is an annotation that should be usable with almost any Spring Security authentication schema. Using [this tutorial][1], I realized that the issue was that I wasn&#39;t in a `@RequestMapping` annotation, but rather a `@GET` and `@PATH` annotation as my original project was off a very old version of Spring. Once I adjusted the Controller to the below code, `@AuthenticationPrincipal` got the JWT properly.\r\n```\r\n@RestController\r\npublic class ConnectionController {\r\n    private final ConnectionService connectionService;\r\n\r\n    @Inject\r\n    public ConnectionController(final ConnectionService connectionService)\r\n    {\r\n        this.connectionService = connectionService;\r\n    }\r\n    @GetMapping(&quot;/user/{userId}&quot;)\r\n    @Produces(MediaType.APPLICATION_JSON)\r\n    @Operation(description = &quot;Retrieve connections by userId&quot;)\r\n    //@PreAuthorize(&quot;authentication.principal.userId.equals(#userId)&quot;)\r\n    public List&lt;ConnectionDto&gt; getConnectionsByUserId(@PathVariable(&quot;userId&quot;) final String userId, @Parameter(hidden = true) @AuthenticationPrincipal Jwt authentication)\r\n    {\r\n        SecurityContext context = SecurityContextHolder.getContext();\r\n        Authentication authentication1 = context.getAuthentication();\r\n        Object jwt = context.getAuthentication().getPrincipal();\r\n        Assert.hasText(userId, &quot;User id must be provided&quot;);\r\n        return this.connectionService.getConnectionsByUserId(userId);\r\n    }\r\n}\r\n```\r\n\r\n  [1]: https://curity.io/resources/learn/spring-boot-api/","title":"@AuthenticationPrincipal (and Authentication/Principal) return null in method","body":"<p><code>@AuthenticationPrincipal</code> is an annotation that should be usable with almost any Spring Security authentication schema. Using <a href=\"https://curity.io/resources/learn/spring-boot-api/\" rel=\"nofollow noreferrer\">this tutorial</a>, I realized that the issue was that I wasn't in a <code>@RequestMapping</code> annotation, but rather a <code>@GET</code> and <code>@PATH</code> annotation as my original project was off a very old version of Spring. Once I adjusted the Controller to the below code, <code>@AuthenticationPrincipal</code> got the JWT properly.</p>\n<pre><code>@RestController\npublic class ConnectionController {\n    private final ConnectionService connectionService;\n\n    @Inject\n    public ConnectionController(final ConnectionService connectionService)\n    {\n        this.connectionService = connectionService;\n    }\n    @GetMapping(&quot;/user/{userId}&quot;)\n    @Produces(MediaType.APPLICATION_JSON)\n    @Operation(description = &quot;Retrieve connections by userId&quot;)\n    //@PreAuthorize(&quot;authentication.principal.userId.equals(#userId)&quot;)\n    public List&lt;ConnectionDto&gt; getConnectionsByUserId(@PathVariable(&quot;userId&quot;) final String userId, @Parameter(hidden = true) @AuthenticationPrincipal Jwt authentication)\n    {\n        SecurityContext context = SecurityContextHolder.getContext();\n        Authentication authentication1 = context.getAuthentication();\n        Object jwt = context.getAuthentication().getPrincipal();\n        Assert.hasText(userId, &quot;User id must be provided&quot;);\n        return this.connectionService.getConnectionsByUserId(userId);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":14218206,"reputation":11,"user_id":10271432,"display_name":"Caledrith"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":751,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":76651333,"answer_count":1,"score":-1,"last_activity_date":1691692350,"creation_date":1688860738,"question_id":76645385,"body_markdown":"I am trying to figure out how to implement endpoint user security via https://spring.io/guides/topicals/spring-security-architecture/#_working_with_threads and https://stackoverflow.com/questions/51712724/how-to-allow-a-user-only-access-their-own-data-in-spring-boot-spring-security However, `@AuthenticationPrincipal`, `Authentication`, and `Principal` when used in this manner. What am I missing? I am certain I have the right secrets/Jwt set up because the authentication itself works, I just cant use the annotation to pull the information I want\r\n\r\n**SecurityConfig.class**\r\n```\r\n@Configuration\r\n@EnableWebSecurity\r\n@EnableGlobalMethodSecurity(prePostEnabled = true, securedEnabled = true, jsr250Enabled = true)\r\npublic class SecurityConfig {\r\n\r\n    private static final String[] AUTH_WHITELIST = {\r\n            // -- Swagger UI v2\r\n            &quot;/v2/api-docs&quot;,\r\n            &quot;/swagger-resources&quot;,\r\n            &quot;/swagger-resources/**&quot;,\r\n            &quot;/configuration/ui&quot;,\r\n            &quot;/configuration/security&quot;,\r\n            &quot;/swagger-ui.html&quot;,\r\n            &quot;/webjars/**&quot;,\r\n            // -- Swagger UI v3 (OpenAPI)\r\n            &quot;/v3/api-docs/**&quot;,\r\n            &quot;/swagger-ui/**&quot;\r\n            // other public endpoints of your API may be appended to this array\r\n    };\r\n    \r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n        http\r\n                .authorizeRequests()\r\n                // Our public endpoints\r\n                .antMatchers(&quot;/**/openapi.json&quot;).permitAll()\r\n                .antMatchers(&quot;/api/ims/auth/**&quot;).permitAll()\r\n                .antMatchers(AUTH_WHITELIST).permitAll()\r\n                .anyRequest().authenticated()\r\n                .and()\r\n                .oauth2ResourceServer(OAuth2ResourceServerConfigurer::jwt);\r\n        return http.build();\r\n    }\r\n\r\n    // Used by JwtAuthenticationProvider to decode and validate JWT tokens\r\n    @Bean\r\n    public JwtDecoder jwtDecoder() {\r\n        SecretKey secretKey = new SecretKeySpec(&quot;INSERTSECRETHERE&quot;.getBytes(), &quot;HMACSHA256&quot;);\r\n        return NimbusJwtDecoder.withSecretKey(secretKey).macAlgorithm(MacAlgorithm.HS256).build();\r\n    }\r\n}\r\n```\r\n\r\n**ConnectionController.class**\r\n```\r\n@Path(&quot;connection/v1&quot;)\r\n@SecurityScheme(name = SWAGGER_AUTH_NAME, type = HTTP, scheme = SWAGGER_AUTH_SCHEME, in = HEADER)\r\n@Tag(name = &quot;Connection Controller&quot;, description = &quot;Manage connection resources&quot;)\r\n@RestController\r\npublic class ConnectionController {\r\n    private final ConnectionService connectionService;\r\n    @Inject\r\n    public ConnectionController(final ConnectionService connectionService)\r\n    {\r\n        this.connectionService = connectionService;\r\n    }\r\n\r\n    @GET\r\n    @Path(&quot;/user/{userId}&quot;)\r\n    @Produces(MediaType.APPLICATION_JSON)\r\n    @Operation(description = &quot;Retrieve connections by userId&quot;)\r\n    //@PreAuthorize(&quot;authentication.principal.claims.userId.equals(#userId)&quot;)\r\n    public List&lt;ConnectionDto&gt; getConnectionsByUserId(@PathParam(&quot;userId&quot;) final String userId, @Parameter(hidden = true) @AuthenticationPrincipal Jwt authentication)\r\n    {\r\n        SecurityContext context = SecurityContextHolder.getContext();\r\n        Authentication authentication1 = context.getAuthentication();\r\n        Object jwt = context.getAuthentication().getPrincipal();\r\n        Assert.hasText(userId, &quot;User id must be provided&quot;);\r\n        return this.connectionService.getConnectionsByUserId(userId);\r\n    }\r\n}\r\n```\r\n\r\nVariables `context`, `authentication`, and `jwt` all return what I anticipate, the last being a `Jwt` object, which is exactly what I&#39;d want `@AuthenticationPrincipal` to return. However, `@AuthenticationPrincipal`, `Authentication`, and `Principal` all return null from that method.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/51712724/how-to-allow-a-user-only-access-their-own-data-in-spring-boot-spring-security","title":"@AuthenticationPrincipal (and Authentication/Principal) return null in method","body":"<p>I am trying to figure out how to implement endpoint user security via <a href=\"https://spring.io/guides/topicals/spring-security-architecture/#_working_with_threads\" rel=\"nofollow noreferrer\">https://spring.io/guides/topicals/spring-security-architecture/#_working_with_threads</a> and <a href=\"https://stackoverflow.com/questions/51712724/how-to-allow-a-user-only-access-their-own-data-in-spring-boot-spring-security\">How to allow a User only access their own data in Spring Boot / Spring Security?</a> However, <code>@AuthenticationPrincipal</code>, <code>Authentication</code>, and <code>Principal</code> when used in this manner. What am I missing? I am certain I have the right secrets/Jwt set up because the authentication itself works, I just cant use the annotation to pull the information I want</p>\n<p><strong>SecurityConfig.class</strong></p>\n<pre><code>@Configuration\n@EnableWebSecurity\n@EnableGlobalMethodSecurity(prePostEnabled = true, securedEnabled = true, jsr250Enabled = true)\npublic class SecurityConfig {\n\n    private static final String[] AUTH_WHITELIST = {\n            // -- Swagger UI v2\n            &quot;/v2/api-docs&quot;,\n            &quot;/swagger-resources&quot;,\n            &quot;/swagger-resources/**&quot;,\n            &quot;/configuration/ui&quot;,\n            &quot;/configuration/security&quot;,\n            &quot;/swagger-ui.html&quot;,\n            &quot;/webjars/**&quot;,\n            // -- Swagger UI v3 (OpenAPI)\n            &quot;/v3/api-docs/**&quot;,\n            &quot;/swagger-ui/**&quot;\n            // other public endpoints of your API may be appended to this array\n    };\n    \n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http\n                .authorizeRequests()\n                // Our public endpoints\n                .antMatchers(&quot;/**/openapi.json&quot;).permitAll()\n                .antMatchers(&quot;/api/ims/auth/**&quot;).permitAll()\n                .antMatchers(AUTH_WHITELIST).permitAll()\n                .anyRequest().authenticated()\n                .and()\n                .oauth2ResourceServer(OAuth2ResourceServerConfigurer::jwt);\n        return http.build();\n    }\n\n    // Used by JwtAuthenticationProvider to decode and validate JWT tokens\n    @Bean\n    public JwtDecoder jwtDecoder() {\n        SecretKey secretKey = new SecretKeySpec(&quot;INSERTSECRETHERE&quot;.getBytes(), &quot;HMACSHA256&quot;);\n        return NimbusJwtDecoder.withSecretKey(secretKey).macAlgorithm(MacAlgorithm.HS256).build();\n    }\n}\n</code></pre>\n<p><strong>ConnectionController.class</strong></p>\n<pre><code>@Path(&quot;connection/v1&quot;)\n@SecurityScheme(name = SWAGGER_AUTH_NAME, type = HTTP, scheme = SWAGGER_AUTH_SCHEME, in = HEADER)\n@Tag(name = &quot;Connection Controller&quot;, description = &quot;Manage connection resources&quot;)\n@RestController\npublic class ConnectionController {\n    private final ConnectionService connectionService;\n    @Inject\n    public ConnectionController(final ConnectionService connectionService)\n    {\n        this.connectionService = connectionService;\n    }\n\n    @GET\n    @Path(&quot;/user/{userId}&quot;)\n    @Produces(MediaType.APPLICATION_JSON)\n    @Operation(description = &quot;Retrieve connections by userId&quot;)\n    //@PreAuthorize(&quot;authentication.principal.claims.userId.equals(#userId)&quot;)\n    public List&lt;ConnectionDto&gt; getConnectionsByUserId(@PathParam(&quot;userId&quot;) final String userId, @Parameter(hidden = true) @AuthenticationPrincipal Jwt authentication)\n    {\n        SecurityContext context = SecurityContextHolder.getContext();\n        Authentication authentication1 = context.getAuthentication();\n        Object jwt = context.getAuthentication().getPrincipal();\n        Assert.hasText(userId, &quot;User id must be provided&quot;);\n        return this.connectionService.getConnectionsByUserId(userId);\n    }\n}\n</code></pre>\n<p>Variables <code>context</code>, <code>authentication</code>, and <code>jwt</code> all return what I anticipate, the last being a <code>Jwt</code> object, which is exactly what I'd want <code>@AuthenticationPrincipal</code> to return. However, <code>@AuthenticationPrincipal</code>, <code>Authentication</code>, and <code>Principal</code> all return null from that method.</p>\n"},{"tags":["java","maven","osgi","apache-servicemix"],"comments":[{"owner":{"account_id":2755966,"reputation":140,"user_id":2374033,"display_name":"wagnermarques"},"score":0,"creation_date":1691693921,"post_id":76876712,"comment_id":135529765,"body_markdown":"I&#39;m not sure if I understand your question, but this is a simple camel osgi blueprint that generate a jar that is deployed in karaf deploy directory and works ok for me... https://github.com/wagnermarques/camel-routes-with-karaf/tree/main/bundles/blueprint-osgi-camel-bundles/processadordearquivos","body":"I&#39;m not sure if I understand your question, but this is a simple camel osgi blueprint that generate a jar that is deployed in karaf deploy directory and works ok for me... <a href=\"https://github.com/wagnermarques/camel-routes-with-karaf/tree/main/bundles/blueprint-osgi-camel-bundles/processadordearquivos\" rel=\"nofollow noreferrer\">github.com/wagnermarques/camel-routes-with-karaf/tree/main/&hellip;</a>"}],"owner":{"account_id":18991244,"reputation":15,"user_id":13860472,"display_name":"Maciej Kajetan Chrzanowski"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691692310,"creation_date":1691677773,"question_id":76876712,"body_markdown":"I&#39;ve got maven project (non Spring one), what should I change inside my pom.xml to build jar to be executable by SMX/OSGI container. I&#39;ve used felix plugin for spring projects like this:\r\n\r\n```\r\n  &lt;plugin&gt;\r\n    &lt;groupId&gt;org.apache.felix&lt;/groupId&gt;\r\n    &lt;artifactId&gt;maven-bundle-plugin&lt;/artifactId&gt;\r\n    &lt;version&gt;5.1.9&lt;/version&gt;\r\n    &lt;extensions&gt;true&lt;/extensions&gt;\r\n    &lt;configuration&gt;\r\n      &lt;instructions&gt;\r\n        &lt;Bundle-SymbolicName&gt;\r\n          ${project.groupId}.${project.artifactId}\r\n        &lt;/Bundle-SymbolicName&gt;\r\n        &lt;Bundle-Name&gt;${project.artifactId}&lt;/Bundle-Name&gt;\r\n        &lt;Bundle-Version&gt;${project.version}&lt;/Bundle-Version&gt;\r\n        &lt;Bundle-Activator&gt;\r\n          com.project.SpringBootBundleActivator\r\n        &lt;/Bundle-Activator&gt;\r\n        &lt;Export-Package&gt;\r\n          com.project\r\n        &lt;/Export-Package&gt;\r\n        &lt;Import-Package&gt;\r\n          com.project\r\n          !org.springframework.*,\r\n          !sun.*,\r\n          !org.apache.tools.*,\r\n          *;resolution:=optional\r\n        &lt;/Import-Package&gt;\r\n        &lt;Embed-Dependency&gt;*;scope=compile&lt;/Embed-Dependency&gt;\r\n        &lt;Embed-Transitive&gt;true&lt;/Embed-Transitive&gt;\r\n      &lt;/instructions&gt;\r\n      &lt;buildDirectory&gt;target/deploy&lt;/buildDirectory&gt;\r\n    &lt;/configuration&gt;\r\n  &lt;/plugin&gt;\r\n```\r\n\r\nIt&#39;s working fine, but I cannot figure it out for non spring classes, cause what it does right now. It&#39;s trigger activation class with annotation @SpringBootApplication and allows me to deploy my app inside SMX. \r\nWhat I would like to achieve is, instead of using Spring classes, use some camelContext.xml, that&#39;s got &lt;blueprint&gt; and &lt;camelContext&gt; inside and just define some beans from my custom classes inside it. For example, &lt;bean id=&quot;someClass&quot; class=&quot;com.project.SomeClass&quot;/&gt; and use method of this class in routes, but when I&#39;m trying installing this classes there is problem with installing bundle inside of the contener. Error is related with OSGI R3 not supported.","title":"Create OSGI bundle from plain java maven project","body":"<p>I've got maven project (non Spring one), what should I change inside my pom.xml to build jar to be executable by SMX/OSGI container. I've used felix plugin for spring projects like this:</p>\n<pre><code>  &lt;plugin&gt;\n    &lt;groupId&gt;org.apache.felix&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-bundle-plugin&lt;/artifactId&gt;\n    &lt;version&gt;5.1.9&lt;/version&gt;\n    &lt;extensions&gt;true&lt;/extensions&gt;\n    &lt;configuration&gt;\n      &lt;instructions&gt;\n        &lt;Bundle-SymbolicName&gt;\n          ${project.groupId}.${project.artifactId}\n        &lt;/Bundle-SymbolicName&gt;\n        &lt;Bundle-Name&gt;${project.artifactId}&lt;/Bundle-Name&gt;\n        &lt;Bundle-Version&gt;${project.version}&lt;/Bundle-Version&gt;\n        &lt;Bundle-Activator&gt;\n          com.project.SpringBootBundleActivator\n        &lt;/Bundle-Activator&gt;\n        &lt;Export-Package&gt;\n          com.project\n        &lt;/Export-Package&gt;\n        &lt;Import-Package&gt;\n          com.project\n          !org.springframework.*,\n          !sun.*,\n          !org.apache.tools.*,\n          *;resolution:=optional\n        &lt;/Import-Package&gt;\n        &lt;Embed-Dependency&gt;*;scope=compile&lt;/Embed-Dependency&gt;\n        &lt;Embed-Transitive&gt;true&lt;/Embed-Transitive&gt;\n      &lt;/instructions&gt;\n      &lt;buildDirectory&gt;target/deploy&lt;/buildDirectory&gt;\n    &lt;/configuration&gt;\n  &lt;/plugin&gt;\n</code></pre>\n<p>It's working fine, but I cannot figure it out for non spring classes, cause what it does right now. It's trigger activation class with annotation @SpringBootApplication and allows me to deploy my app inside SMX.\nWhat I would like to achieve is, instead of using Spring classes, use some camelContext.xml, that's got  and  inside and just define some beans from my custom classes inside it. For example,  and use method of this class in routes, but when I'm trying installing this classes there is problem with installing bundle inside of the contener. Error is related with OSGI R3 not supported.</p>\n"},{"tags":["java","spring-boot","certificate","keystore"],"answers":[{"tags":[],"owner":{"account_id":1480790,"reputation":380,"user_id":1390246,"accept_rate":50,"display_name":"zlsmith86"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691692242,"creation_date":1691692242,"answer_id":76878452,"question_id":71321477,"body_markdown":"In your application.yml file add the following section.  In the example below it is reading the certificate that visual studio generated previously and placed in the windows personal certificate store\r\n\r\n    server:\r\n      port: 8443\r\n      ssl:\r\n        enabled: true\r\n          key-store: .\r\n          key-store-type: windows-MY\r\n          key-alias: ASP.NET Core HTTPS development certificate","title":"Spring-Boot HTTPS via windows-MY keystore","body":"<p>In your application.yml file add the following section.  In the example below it is reading the certificate that visual studio generated previously and placed in the windows personal certificate store</p>\n<pre><code>server:\n  port: 8443\n  ssl:\n    enabled: true\n      key-store: .\n      key-store-type: windows-MY\n      key-alias: ASP.NET Core HTTPS development certificate\n</code></pre>\n"}],"owner":{"account_id":24427655,"reputation":11,"user_id":18353018,"display_name":"Maos"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":238,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1691692242,"creation_date":1646218598,"question_id":71321477,"body_markdown":"I am trying to enable HTTPS for our spring-boot web service using the windows-MY keystore since some of our customers do not want to use a keystore located on the file-system.\r\n\r\nI do know that it is possible to configure tomcat by itself to use the windows-MY keystore, however I am unable to find any information as to do this for spring-boot.\r\n\r\nIs it possible to use the windows-MY keystore with spring-boot and if so, how do I configure this?","title":"Spring-Boot HTTPS via windows-MY keystore","body":"<p>I am trying to enable HTTPS for our spring-boot web service using the windows-MY keystore since some of our customers do not want to use a keystore located on the file-system.</p>\n<p>I do know that it is possible to configure tomcat by itself to use the windows-MY keystore, however I am unable to find any information as to do this for spring-boot.</p>\n<p>Is it possible to use the windows-MY keystore with spring-boot and if so, how do I configure this?</p>\n"},{"tags":["java","spring-boot","multi-tenant"],"answers":[{"comments":[{"owner":{"account_id":14422240,"reputation":167,"user_id":12446654,"display_name":"Capitano Giovarco"},"score":0,"creation_date":1689233194,"post_id":76673268,"comment_id":135184920,"body_markdown":"Hi @ch4mp!\n\nThanks for sharing your ticket. Damn, that explain why I was so lost not finding a fitting solution...\n\nI tried your code, marking it as a @Component, and your code is called on the first login. I was able to debug it and I&#39;ll play around with it. Better than being completely lost &#128076;\n\nHowever, I noticed that I won&#39;t be prompted to log in with the second tenant, nor your code will be proc&#39;ed in your case. Is this intended?","body":"Hi @ch4mp!  Thanks for sharing your ticket. Damn, that explain why I was so lost not finding a fitting solution...  I tried your code, marking it as a @Component, and your code is called on the first login. I was able to debug it and I&#39;ll play around with it. Better than being completely lost 👌  However, I noticed that I won&#39;t be prompted to log in with the second tenant, nor your code will be proc&#39;ed in your case. Is this intended?"},{"owner":{"account_id":14422240,"reputation":167,"user_id":12446654,"display_name":"Capitano Giovarco"},"score":0,"creation_date":1689233340,"post_id":76673268,"comment_id":135184946,"body_markdown":"By the way, having multiple gateways is a no-go at the moment because having only one is a requirement. We don&#39;t want specific istances being run for specific customers. I hope, you can help working around the problem.","body":"By the way, having multiple gateways is a no-go at the moment because having only one is a requirement. We don&#39;t want specific istances being run for specific customers. I hope, you can help working around the problem."},{"owner":{"account_id":14422240,"reputation":167,"user_id":12446654,"display_name":"Capitano Giovarco"},"score":0,"creation_date":1689233754,"post_id":76673268,"comment_id":135185037,"body_markdown":"I really hope, we can help also other people with similar issues with this thread.","body":"I really hope, we can help also other people with similar issues with this thread."},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1689273887,"post_id":76673268,"comment_id":135194116,"body_markdown":"**you really should write down why you need a user to be authenticated against several tenants at the same time** : this is precisely because people don&#39;t think it is useful that it is no implemented. I think that you should change your mind about your requirement: if you read my answer again, you&#39;ll see that there is a single entrypoint, the per-tenant gateways acting behind this single entry-point.","body":"<b>you really should write down why you need a user to be authenticated against several tenants at the same time</b> : this is precisely because people don&#39;t think it is useful that it is no implemented. I think that you should change your mind about your requirement: if you read my answer again, you&#39;ll see that there is a single entrypoint, the per-tenant gateways acting behind this single entry-point."},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1689274155,"post_id":76673268,"comment_id":135194177,"body_markdown":"The code I reported in the ticket makes it possible to store (and retrieve) more than one identity at a time for a single user in a spring OAuth2 client. It does not trigger new loggins, you still have to implement that part. you might have a look at my [resource-server_with_uil](https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials/resource-server_with_ui) tutoria which demoes the usage of several simultaneous identities for a single user.","body":"The code I reported in the ticket makes it possible to store (and retrieve) more than one identity at a time for a single user in a spring OAuth2 client. It does not trigger new loggins, you still have to implement that part. you might have a look at my <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials/resource-server_with_ui\" rel=\"nofollow noreferrer\">resource-server_with_uil</a> tutoria which demoes the usage of several simultaneous identities for a single user."}],"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689184787,"creation_date":1689184368,"answer_id":76673268,"question_id":76671272,"body_markdown":"I think that in your case, the easiest way to achieve what you want is to deploy a gateway for each tenant: \r\n- one gateway instance (configured as OAuth2 client) responsible for `/tenant/tenant-1-id/**` \r\n- another gateway (configured as OAuth2 client too) for `/tenant/tenant-2-id/**`\r\n- a 3rd gateway (without any OAuth2 configuration) or an ingress, a load-balancer, or whatever, to route requests to the right tenant specific gateway\r\n\r\nI believe that you hit the same kind of limitation as the one I reported in [this ticket][1]: a spring application with `oauth2Login` is a client and current Spring Security implementation for OAuth2 clients is very single-tenant, and it&#39;s not just a matter of session: all the stack (`OAuth2AuthenticationToken` which is the `Authentication` implementation for OAuth2 clients, but also `OAuth2AuthorizedClientRepository`) was designed with the idea that a user is limited to a single identity at a time: a single `subject` in a claim-set issued by a single authorization server. This design decision is reflected between the lines if you read the comments in the [pull request for Back-Channel Logout][2] which, I bet, will be limited to single tenant scenarios too.\r\n\r\nThe thing is that, alone, I am not considered seriously enough to have any influence on Spring teams design decisions and it&#39;s pretty unlikely that multi tenancy for OAuth2 clients is something they get interested in anytime soon. Would you please elaborate on why you need the different identities for a single user session and comment on the ticket I opened?\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-security/issues/12862\r\n  [2]: https://github.com/spring-projects/spring-security/pull/12570","title":"Spring Boot multi-tenant API gateway: how to handle multiple sessions","body":"<p>I think that in your case, the easiest way to achieve what you want is to deploy a gateway for each tenant:</p>\n<ul>\n<li>one gateway instance (configured as OAuth2 client) responsible for <code>/tenant/tenant-1-id/**</code></li>\n<li>another gateway (configured as OAuth2 client too) for <code>/tenant/tenant-2-id/**</code></li>\n<li>a 3rd gateway (without any OAuth2 configuration) or an ingress, a load-balancer, or whatever, to route requests to the right tenant specific gateway</li>\n</ul>\n<p>I believe that you hit the same kind of limitation as the one I reported in <a href=\"https://github.com/spring-projects/spring-security/issues/12862\" rel=\"nofollow noreferrer\">this ticket</a>: a spring application with <code>oauth2Login</code> is a client and current Spring Security implementation for OAuth2 clients is very single-tenant, and it's not just a matter of session: all the stack (<code>OAuth2AuthenticationToken</code> which is the <code>Authentication</code> implementation for OAuth2 clients, but also <code>OAuth2AuthorizedClientRepository</code>) was designed with the idea that a user is limited to a single identity at a time: a single <code>subject</code> in a claim-set issued by a single authorization server. This design decision is reflected between the lines if you read the comments in the <a href=\"https://github.com/spring-projects/spring-security/pull/12570\" rel=\"nofollow noreferrer\">pull request for Back-Channel Logout</a> which, I bet, will be limited to single tenant scenarios too.</p>\n<p>The thing is that, alone, I am not considered seriously enough to have any influence on Spring teams design decisions and it's pretty unlikely that multi tenancy for OAuth2 clients is something they get interested in anytime soon. Would you please elaborate on why you need the different identities for a single user session and comment on the ticket I opened?</p>\n"}],"owner":{"account_id":14422240,"reputation":167,"user_id":12446654,"display_name":"Capitano Giovarco"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":417,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1691691935,"creation_date":1689169497,"question_id":76671272,"body_markdown":"I&#39;m creating an API Gateway that supports multi-tenancy.\r\n\r\nI&#39;ll explain things through an example:\r\n\r\nI call */tenant/tenant-1-id/test-endpoint* from the browser, and this triggers a log in in Keycloak (can be any OpenId compatible).\r\n\r\nAfter entering username and password, I&#39;m correctly logged in and get a response  with some text. It doesn&#39;t matter what for this example.\r\n\r\nNow I call */tenant/**tenant-2-id**/test-endpoint* from the browser, and:\r\n\r\n**Expectation:** I&#39;m prompted to log in again, and from here on I can both call */tenant/tenant-1-id/test-endpoint* and */tenant/tenant-2-id/test-endpoint* without logging in again.\r\n\r\n**Actual:** Log in is not triggered and the endpoint returns a response.\r\n\r\nI know that the problem resides in the same cookie/session being used for both calls, but I&#39;m not quite sure how to proceed.\r\n\r\n**TenantContext.java:**\r\n\r\n    @Slf4j\r\n    public final class TenantContext {\r\n    \r\n        private TenantContext() {}\r\n    \r\n        private static InheritableThreadLocal&lt;TenantInfo&gt; currentTenant = new InheritableThreadLocal&lt;&gt;();\r\n    \r\n        public static void setTenantInfo(TenantInfo tenantId) {\r\n            log.info(&quot;Setting tenantId to &quot; + tenantId);\r\n            currentTenant.set(tenantId);\r\n        }\r\n    \r\n        public static TenantInfo getTenantInfo() {\r\n            return currentTenant.get();\r\n        }\r\n    \r\n        public static void clear(){\r\n            currentTenant.remove();\r\n        }\r\n    }\r\n\r\n**TenantInfo.java:**\r\n\r\n    @ToString\r\n    @Getter\r\n    @Builder\r\n    class TenantInfo {\r\n        private String url;\r\n        private int port;\r\n        private String realm;\r\n        private String clientId; // Should be the name of the service, the same for all realms\r\n        private String secret;\r\n    }\r\n\r\n**WebConfiguration.java:**\r\n\r\n    @Configuration\r\n    public class WebConfiguration implements WebMvcConfigurer {\r\n    \r\n        private final TenantInterceptor tenantInterceptor;\r\n    \r\n        @Autowired\r\n        public WebConfiguration(TenantInterceptor tenantInterceptor) {\r\n            this.tenantInterceptor = tenantInterceptor;\r\n        }\r\n    \r\n        @Override\r\n        public void addInterceptors(InterceptorRegistry registry) {\r\n            registry.addWebRequestInterceptor(tenantInterceptor);\r\n        }\r\n    \r\n    }\r\n\r\n**TenantInterceptor.java:**\r\n\r\n    @Slf4j\r\n    @Component\r\n    public class TenantInterceptor implements WebRequestInterceptor {\r\n    \r\n        private final static Map&lt;String, TenantInfo&gt; idToIss = Map.of(\r\n            &quot;bank1-id&quot;,\r\n            TenantInfo.builder()\r\n                .url(&quot;...&quot;)\r\n                .port(...)\r\n                .realm(&quot;...&quot;)\r\n                .clientId(&quot;...&quot;)\r\n                .secret(&quot;...&quot;)\r\n                .build(),\r\n            &quot;bank2-id&quot;,\r\n            TenantInfo.builder()\r\n                .url(&quot;...&quot;)\r\n                .port(...)\r\n                .realm(&quot;...&quot;)\r\n                .clientId(&quot;...&quot;)\r\n                .secret(&quot;...&quot;)\r\n                .build()\r\n        );\r\n    \r\n        @Override\r\n        public void preHandle(WebRequest request) throws Exception {\r\n    \r\n            final String path = ((DispatcherServletWebRequest) request).getRequest().getServletPath(); // E.G. &quot;/tenant/bank2-id/test&quot;\r\n    \r\n            if (path.equals(&quot;/error&quot;)) {\r\n                log.warn(&quot;Error was detected. Bypassing TenantInterceptor.&quot;); // TODO: Implement proper handling for errors\r\n                return;\r\n            }\r\n    \r\n            final String[] pieces = path.split(&quot;/&quot;);\r\n            if (pieces.length &lt; 4 || !pieces[1].equals(&quot;tenant&quot;)) {\r\n                throw new IllegalArgumentException(&quot;Invalid path. It should be &#39;/tenant/{id}/*&#39; but was &#39;&quot; + path + &quot;&#39;&quot;);\r\n            }\r\n            final String tenantId = pieces[2];\r\n            final TenantInfo tenantInfo = idToIss.get(tenantId);\r\n            if (tenantInfo == null) {\r\n                throw new IllegalStateException(&quot;Tenant &quot; + tenantId + &quot; does not exist&quot;);\r\n            }\r\n    \r\n            TenantContext.setTenantInfo(tenantInfo);\r\n        }\r\n    \r\n    \r\n        @Override\r\n        public void postHandle(WebRequest request, ModelMap model) throws Exception {\r\n            TenantContext.clear();\r\n        }\r\n    \r\n        @Override\r\n        public void afterCompletion(WebRequest request, Exception ex) throws Exception {\r\n        }\r\n    \r\n    }\r\n\r\n**Maven dependencies:**\r\n\r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t&lt;/dependency&gt;\r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-cloud-starter&lt;/artifactId&gt;\r\n    \t&lt;/dependency&gt;\r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt;\r\n    \t&lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-oauth2-client&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\nOf course the TenantInterceptor is super working in progress. Mapping id to ISS won&#39;t be stored in memory, but in a Spring Config Server, meaning that the tenants can be added or removed at any given time. But this is just an hint for you.\r\n\r\nI think that I&#39;m in the right track to archieve what I want to do. I just need a little help to solve the log in issue.","title":"Spring Boot multi-tenant API gateway: how to handle multiple sessions","body":"<p>I'm creating an API Gateway that supports multi-tenancy.</p>\n<p>I'll explain things through an example:</p>\n<p>I call <em>/tenant/tenant-1-id/test-endpoint</em> from the browser, and this triggers a log in in Keycloak (can be any OpenId compatible).</p>\n<p>After entering username and password, I'm correctly logged in and get a response  with some text. It doesn't matter what for this example.</p>\n<p>Now I call <em>/tenant/<strong>tenant-2-id</strong>/test-endpoint</em> from the browser, and:</p>\n<p><strong>Expectation:</strong> I'm prompted to log in again, and from here on I can both call <em>/tenant/tenant-1-id/test-endpoint</em> and <em>/tenant/tenant-2-id/test-endpoint</em> without logging in again.</p>\n<p><strong>Actual:</strong> Log in is not triggered and the endpoint returns a response.</p>\n<p>I know that the problem resides in the same cookie/session being used for both calls, but I'm not quite sure how to proceed.</p>\n<p><strong>TenantContext.java:</strong></p>\n<pre><code>@Slf4j\npublic final class TenantContext {\n\n    private TenantContext() {}\n\n    private static InheritableThreadLocal&lt;TenantInfo&gt; currentTenant = new InheritableThreadLocal&lt;&gt;();\n\n    public static void setTenantInfo(TenantInfo tenantId) {\n        log.info(&quot;Setting tenantId to &quot; + tenantId);\n        currentTenant.set(tenantId);\n    }\n\n    public static TenantInfo getTenantInfo() {\n        return currentTenant.get();\n    }\n\n    public static void clear(){\n        currentTenant.remove();\n    }\n}\n</code></pre>\n<p><strong>TenantInfo.java:</strong></p>\n<pre><code>@ToString\n@Getter\n@Builder\nclass TenantInfo {\n    private String url;\n    private int port;\n    private String realm;\n    private String clientId; // Should be the name of the service, the same for all realms\n    private String secret;\n}\n</code></pre>\n<p><strong>WebConfiguration.java:</strong></p>\n<pre><code>@Configuration\npublic class WebConfiguration implements WebMvcConfigurer {\n\n    private final TenantInterceptor tenantInterceptor;\n\n    @Autowired\n    public WebConfiguration(TenantInterceptor tenantInterceptor) {\n        this.tenantInterceptor = tenantInterceptor;\n    }\n\n    @Override\n    public void addInterceptors(InterceptorRegistry registry) {\n        registry.addWebRequestInterceptor(tenantInterceptor);\n    }\n\n}\n</code></pre>\n<p><strong>TenantInterceptor.java:</strong></p>\n<pre><code>@Slf4j\n@Component\npublic class TenantInterceptor implements WebRequestInterceptor {\n\n    private final static Map&lt;String, TenantInfo&gt; idToIss = Map.of(\n        &quot;bank1-id&quot;,\n        TenantInfo.builder()\n            .url(&quot;...&quot;)\n            .port(...)\n            .realm(&quot;...&quot;)\n            .clientId(&quot;...&quot;)\n            .secret(&quot;...&quot;)\n            .build(),\n        &quot;bank2-id&quot;,\n        TenantInfo.builder()\n            .url(&quot;...&quot;)\n            .port(...)\n            .realm(&quot;...&quot;)\n            .clientId(&quot;...&quot;)\n            .secret(&quot;...&quot;)\n            .build()\n    );\n\n    @Override\n    public void preHandle(WebRequest request) throws Exception {\n\n        final String path = ((DispatcherServletWebRequest) request).getRequest().getServletPath(); // E.G. &quot;/tenant/bank2-id/test&quot;\n\n        if (path.equals(&quot;/error&quot;)) {\n            log.warn(&quot;Error was detected. Bypassing TenantInterceptor.&quot;); // TODO: Implement proper handling for errors\n            return;\n        }\n\n        final String[] pieces = path.split(&quot;/&quot;);\n        if (pieces.length &lt; 4 || !pieces[1].equals(&quot;tenant&quot;)) {\n            throw new IllegalArgumentException(&quot;Invalid path. It should be '/tenant/{id}/*' but was '&quot; + path + &quot;'&quot;);\n        }\n        final String tenantId = pieces[2];\n        final TenantInfo tenantInfo = idToIss.get(tenantId);\n        if (tenantInfo == null) {\n            throw new IllegalStateException(&quot;Tenant &quot; + tenantId + &quot; does not exist&quot;);\n        }\n\n        TenantContext.setTenantInfo(tenantInfo);\n    }\n\n\n    @Override\n    public void postHandle(WebRequest request, ModelMap model) throws Exception {\n        TenantContext.clear();\n    }\n\n    @Override\n    public void afterCompletion(WebRequest request, Exception ex) throws Exception {\n    }\n\n}\n</code></pre>\n<p><strong>Maven dependencies:</strong></p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-cloud-starter&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n&lt;dependency&gt;\n  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n  &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n  &lt;artifactId&gt;spring-boot-starter-oauth2-client&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Of course the TenantInterceptor is super working in progress. Mapping id to ISS won't be stored in memory, but in a Spring Config Server, meaning that the tenants can be added or removed at any given time. But this is just an hint for you.</p>\n<p>I think that I'm in the right track to archieve what I want to do. I just need a little help to solve the log in issue.</p>\n"},{"tags":["java","spring-boot","spring-security","microservices","spring-security-oauth2"],"answers":[{"tags":[],"owner":{"account_id":10728079,"reputation":1543,"user_id":7895005,"display_name":"Pramod H G"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1690961389,"creation_date":1690961389,"answer_id":76817533,"question_id":76737471,"body_markdown":"Whenever oauth token **expires_in** value is **0** (In a rare cases) for the Hybris oauth token response, \r\nThe older version of **Spring-security-oauth2 (2.4.0 &amp; below)** was setting the **expiresAt** (Token expiration date time used to validate the token) as curent date,\r\nHowever, **Spring-security-oauth2 2.5.0** sets the **expiresAt** value as **null** in the above scenario, due to this whenever Oauth2RestTemplate is checking token validity it is wrongly identifying it as valid always. Hence the refresh token won&#39;t be called until service re-start.\r\n\r\n \r\n\r\n**Work around:**\r\n\r\nDowngraded the Spring-security-oauth2 version to 2.4.0","title":"OAuth2RestTemplate not refreshing the oauth token upon expiry with Spring Boot 2.7.6","body":"<p>Whenever oauth token <strong>expires_in</strong> value is <strong>0</strong> (In a rare cases) for the Hybris oauth token response,\nThe older version of <strong>Spring-security-oauth2 (2.4.0 &amp; below)</strong> was setting the <strong>expiresAt</strong> (Token expiration date time used to validate the token) as curent date,\nHowever, <strong>Spring-security-oauth2 2.5.0</strong> sets the <strong>expiresAt</strong> value as <strong>null</strong> in the above scenario, due to this whenever Oauth2RestTemplate is checking token validity it is wrongly identifying it as valid always. Hence the refresh token won't be called until service re-start.</p>\n<p><strong>Work around:</strong></p>\n<p>Downgraded the Spring-security-oauth2 version to 2.4.0</p>\n"}],"owner":{"account_id":10728079,"reputation":1543,"user_id":7895005,"display_name":"Pramod H G"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":118,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76817533,"answer_count":1,"score":-1,"last_activity_date":1691691301,"creation_date":1689938031,"question_id":76737471,"body_markdown":"I am using **Spring-Boot 2.7.6** with **Spring-Cloud 2021.0.5** application running on VMWare Tanzu, \r\nUsing OAuth2RestTemplate for authenticating my APIs with Hybris/SAP Commerce application via Feign client.\r\nHowever, intermittently I&#39;m getting &#39;401 Unauthorized&#39; (Invalid token error) exception for my APIs.\r\n\r\nSample feign interface:\r\n\r\n    @FeignClient(name = &quot;hybris&quot;, url = &quot;${URL}&quot;, fallbackFactory = HybrisClientFallbackFactory.class, configuration = {\r\n        HybrisFeignClientRequestInterceptor.class, FeignRetryConfiguration.class, FeignRetryer.class})\r\n    public interface HybrisClient\r\n    {\r\n\r\n         @PostMapping(&quot;/epInternal/order/order-history&quot;)\r\n         OrderHistoryResponse getOrderHistory(OrderHistoryRequest orderHistoryRequest);\r\n    }\r\n\r\nFeign request interceptor:\r\n\r\n    public class HybrisFeignClientRequestInterceptor {\r\n    \r\n      @Qualifier(&quot;hybrisOAuth2RestTemplate&quot;)\r\n      private final OAuth2RestTemplate hybrisOAuth2RestTemplate;\r\n\r\n      @Bean\r\n      public RequestInterceptor apigeeHybrisOauth2RequestInterceptor() {\r\n         return (requestTemplate) -&gt; {\r\n\t\t\t requestTemplate.header(&quot;Authorization&quot;, new String[]{String.format(&quot;%s %s&quot;, &quot;Bearer&quot;, this.hybrisOAuth2RestTemplate.getAccessToken().getValue())});\r\n\t\t\t requestTemplate.header(&quot;x-api-key&quot;, new String[]{clientId});\r\n         };\r\n       }\r\n    }\r\n\r\nThe above code works seamlesly with old spring boot version for the same application (which is running in Prod) But intermittently fails with SB-2.7.6.\r\nWhen it fails, until system restart it keeps failing.\r\n\r\nOn further investigation found that, it fails only on one instance at the same time it works fine on the other instance of the application and both uses different access tokens at that time (Found this info from log)\r\n\r\n","title":"OAuth2RestTemplate not refreshing the oauth token upon expiry with Spring Boot 2.7.6","body":"<p>I am using <strong>Spring-Boot 2.7.6</strong> with <strong>Spring-Cloud 2021.0.5</strong> application running on VMWare Tanzu,\nUsing OAuth2RestTemplate for authenticating my APIs with Hybris/SAP Commerce application via Feign client.\nHowever, intermittently I'm getting '401 Unauthorized' (Invalid token error) exception for my APIs.</p>\n<p>Sample feign interface:</p>\n<pre><code>@FeignClient(name = &quot;hybris&quot;, url = &quot;${URL}&quot;, fallbackFactory = HybrisClientFallbackFactory.class, configuration = {\n    HybrisFeignClientRequestInterceptor.class, FeignRetryConfiguration.class, FeignRetryer.class})\npublic interface HybrisClient\n{\n\n     @PostMapping(&quot;/epInternal/order/order-history&quot;)\n     OrderHistoryResponse getOrderHistory(OrderHistoryRequest orderHistoryRequest);\n}\n</code></pre>\n<p>Feign request interceptor:</p>\n<pre><code>public class HybrisFeignClientRequestInterceptor {\n\n  @Qualifier(&quot;hybrisOAuth2RestTemplate&quot;)\n  private final OAuth2RestTemplate hybrisOAuth2RestTemplate;\n\n  @Bean\n  public RequestInterceptor apigeeHybrisOauth2RequestInterceptor() {\n     return (requestTemplate) -&gt; {\n         requestTemplate.header(&quot;Authorization&quot;, new String[]{String.format(&quot;%s %s&quot;, &quot;Bearer&quot;, this.hybrisOAuth2RestTemplate.getAccessToken().getValue())});\n         requestTemplate.header(&quot;x-api-key&quot;, new String[]{clientId});\n     };\n   }\n}\n</code></pre>\n<p>The above code works seamlesly with old spring boot version for the same application (which is running in Prod) But intermittently fails with SB-2.7.6.\nWhen it fails, until system restart it keeps failing.</p>\n<p>On further investigation found that, it fails only on one instance at the same time it works fine on the other instance of the application and both uses different access tokens at that time (Found this info from log)</p>\n"},{"tags":["java","amazon-web-services","aws-sdk","amazon-sagemaker","feature-store"],"owner":{"account_id":12875245,"reputation":547,"user_id":9312181,"display_name":"tusharRawat"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691691106,"creation_date":1691690666,"question_id":76878281,"body_markdown":"We have not set the **rate limit** values in both `feature-store` and `sagemaker` aws service but we are getting `rate limit exceeded` errors in very low RPS.\r\n\r\n**Case** :-\r\n\r\n`Sagemaker` : Current RPS to SageMaker service is `5 RPS`. It goes to `12 RPS` in fractions of millis at 8pm due to sale, which is not very high, but it&#39;s a sudden jump. At this point in time `SageMaker` calls give us error as below : \r\n\r\n    Message : Rate exceeded (Service: SageMakerRuntime, Status Code: 400, Request ID: 64a3ba3d-fc15-406b-b73a-ebc321e28ff8)\r\n\r\n\r\n`FeatureStore` : Current RPS to FeatureStore service is `55 RPS`. It goes to `100RPS` in fractions of millis at 8pm due to sale, which is not something that feature-store can&#39;t handle. At this point in time `FeatureStore` calls gives us error as below:\r\n\r\n    Message : Rate exceeded (Service: SageMakerFeatureStoreRuntime, Status Code: 400, Request ID: 5b7341bd-21e1-4ec9-a2d6-c204244e9780).\r\n\r\nSome other errors the has been observed while calling the `feature-store` service, though the quantum of these errors are very less like 3 times a day or so but they are there. Given below 2 errors.\r\n\r\n    Error: software.amazon.awssdk.core.exception.SdkClientException: Unable to execute HTTP request: Connection reset at software.amazon.awssdk.core.exception.SdkClientException\r\n\r\n    Error: software.amazon.awssdk.core.exception.SdkClientException: Unable to execute HTTP request: The target server failed to respond at software.amazon.awssdk.core.exception.SdkClientException$BuilderImpl.build(SdkClientException.java:111).\r\n\r\n&gt; Should we not worry about these 2 errors ?\r\n\r\n\r\nThis is how we configured the `Feature-store` and `SageMaker` client in our application.\r\n\r\nJava version: 17\r\naws sdk version : 2.20.26\r\n\r\n**FeatureStore client config**: \r\n\r\n        ClientOverrideConfiguration clientOverrideConfiguration = ClientOverrideConfiguration.builder()\r\n                .apiCallTimeout(Duration.of(featureStoreConfig.getApiCallAttemptTimeout(), ChronoUnit.MILLIS))\r\n                .retryPolicy(RetryPolicy.builder().numRetries(0).build())\r\n                .build();\r\n\r\n        featureStoreRuntimeClient = SageMakerFeatureStoreRuntimeClient.builder()\r\n                .overrideConfiguration(clientOverrideConfiguration)\r\n                .credentialsProvider(DefaultCredentialsProvider.create())\r\n                .region(Region.AP_SOUTHEAST_1).build();\r\n\r\n**Sagemaker client config** :\r\n\r\n        ClientOverrideConfiguration clientOverrideConfiguration = ClientOverrideConfiguration.builder()\r\n                .apiCallTimeout(Duration.of(sageMakerConfig.getApiCallAttemptTimeout(), ChronoUnit.MILLIS))\r\n                .retryPolicy(RetryPolicy.builder().numRetries(0).build())\r\n        .build();\r\n\r\n        sageMakerRuntimeClient = SageMakerRuntimeClient.builder()\r\n                .overrideConfiguration(clientOverrideConfiguration)\r\n                .credentialsProvider(DefaultCredentialsProvider.create())\r\n                .region(Region.AP_SOUTHEAST_1)\r\n                .build();\r\n\r\n\r\n\r\n&gt; Another interesting observation is if we keep the RPS same as peak RPS\r\n&gt; for some amount of time. This rate limit exceeded error goes away. It\r\n&gt; seems this **throttling** only happens on sudden increase of RPS. How\r\n&gt; do we solve for this? Could 0 retry be the issue here, but why at the calls are being throttled at first place with such low `RPS` ?\r\n\r\n","title":"Throtling in both sagemakerruntime and sagemakerfeaturestoreruntime","body":"<p>We have not set the <strong>rate limit</strong> values in both <code>feature-store</code> and <code>sagemaker</code> aws service but we are getting <code>rate limit exceeded</code> errors in very low RPS.</p>\n<p><strong>Case</strong> :-</p>\n<p><code>Sagemaker</code> : Current RPS to SageMaker service is <code>5 RPS</code>. It goes to <code>12 RPS</code> in fractions of millis at 8pm due to sale, which is not very high, but it's a sudden jump. At this point in time <code>SageMaker</code> calls give us error as below :</p>\n<pre><code>Message : Rate exceeded (Service: SageMakerRuntime, Status Code: 400, Request ID: 64a3ba3d-fc15-406b-b73a-ebc321e28ff8)\n</code></pre>\n<p><code>FeatureStore</code> : Current RPS to FeatureStore service is <code>55 RPS</code>. It goes to <code>100RPS</code> in fractions of millis at 8pm due to sale, which is not something that feature-store can't handle. At this point in time <code>FeatureStore</code> calls gives us error as below:</p>\n<pre><code>Message : Rate exceeded (Service: SageMakerFeatureStoreRuntime, Status Code: 400, Request ID: 5b7341bd-21e1-4ec9-a2d6-c204244e9780).\n</code></pre>\n<p>Some other errors the has been observed while calling the <code>feature-store</code> service, though the quantum of these errors are very less like 3 times a day or so but they are there. Given below 2 errors.</p>\n<pre><code>Error: software.amazon.awssdk.core.exception.SdkClientException: Unable to execute HTTP request: Connection reset at software.amazon.awssdk.core.exception.SdkClientException\n\nError: software.amazon.awssdk.core.exception.SdkClientException: Unable to execute HTTP request: The target server failed to respond at software.amazon.awssdk.core.exception.SdkClientException$BuilderImpl.build(SdkClientException.java:111).\n</code></pre>\n<blockquote>\n<p>Should we not worry about these 2 errors ?</p>\n</blockquote>\n<p>This is how we configured the <code>Feature-store</code> and <code>SageMaker</code> client in our application.</p>\n<p>Java version: 17\naws sdk version : 2.20.26</p>\n<p><strong>FeatureStore client config</strong>:</p>\n<pre><code>    ClientOverrideConfiguration clientOverrideConfiguration = ClientOverrideConfiguration.builder()\n            .apiCallTimeout(Duration.of(featureStoreConfig.getApiCallAttemptTimeout(), ChronoUnit.MILLIS))\n            .retryPolicy(RetryPolicy.builder().numRetries(0).build())\n            .build();\n\n    featureStoreRuntimeClient = SageMakerFeatureStoreRuntimeClient.builder()\n            .overrideConfiguration(clientOverrideConfiguration)\n            .credentialsProvider(DefaultCredentialsProvider.create())\n            .region(Region.AP_SOUTHEAST_1).build();\n</code></pre>\n<p><strong>Sagemaker client config</strong> :</p>\n<pre><code>    ClientOverrideConfiguration clientOverrideConfiguration = ClientOverrideConfiguration.builder()\n            .apiCallTimeout(Duration.of(sageMakerConfig.getApiCallAttemptTimeout(), ChronoUnit.MILLIS))\n            .retryPolicy(RetryPolicy.builder().numRetries(0).build())\n    .build();\n\n    sageMakerRuntimeClient = SageMakerRuntimeClient.builder()\n            .overrideConfiguration(clientOverrideConfiguration)\n            .credentialsProvider(DefaultCredentialsProvider.create())\n            .region(Region.AP_SOUTHEAST_1)\n            .build();\n</code></pre>\n<blockquote>\n<p>Another interesting observation is if we keep the RPS same as peak RPS\nfor some amount of time. This rate limit exceeded error goes away. It\nseems this <strong>throttling</strong> only happens on sudden increase of RPS. How\ndo we solve for this? Could 0 retry be the issue here, but why at the calls are being throttled at first place with such low <code>RPS</code> ?</p>\n</blockquote>\n"},{"tags":["java","multithreading","spring-boot","threadpool","spring-scheduled"],"answers":[{"tags":[],"owner":{"account_id":29201497,"reputation":1,"user_id":22371532,"display_name":"user22371532"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691691084,"creation_date":1691691084,"answer_id":76878326,"question_id":74826917,"body_markdown":"See this answer:\r\nhttps://stackoverflow.com/questions/67965661/spring-boot-stackoverflowerror-null\r\n\r\nI had the same error when we had a @Data annotation on an entity, which only resulted in an overflow error when the logger tried to log an error having to do with that entity.","title":"What is causing the following stackoverflow error in a spring boot application with a scheduler?","body":"<p>See this answer:\n<a href=\"https://stackoverflow.com/questions/67965661/spring-boot-stackoverflowerror-null\">Spring Boot StackOverFlowError : Null</a></p>\n<p>I had the same error when we had a @Data annotation on an entity, which only resulted in an overflow error when the logger tried to log an error having to do with that entity.</p>\n"}],"owner":{"account_id":18328293,"reputation":185,"user_id":13347446,"display_name":"Jithin M V"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":172,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691691084,"creation_date":1671206491,"question_id":74826917,"body_markdown":"**The issue happened in production and need an immediate fix. Please help me**\r\n\r\nI have a spring boot application which is dockerized and running on an ec2 instance. Today the application started giving java.lang.StackOverflowError: null error suddenly without even making any changes. \r\n\r\nThe stack trace is attached below\r\n\r\n[![Stack Trace][1]][1]\r\n\r\n\r\nSo in the stack trace you can see coffeejms-4, That is nothing but a thread&#39;s name. So issue happened within a thread that is running a scheduled job in my spring boot application. \r\n\r\nThe scheduler configuration is attached below\r\n\r\n[![Scheduler Config][2]][2]\r\n\r\nI don&#39;t know what caused this all of a sudden. I just restarted my docker container. I didn&#39;t change the image at all. I have tried following things\r\n\r\n 1. Restarted docker service\r\n 2. Restarted my ec2 instance\r\n 3. Assigned more memory for the spring boot app\r\n\r\nBut nothing is helping it. If someone could help me with this as soon as possible that would be greatly appreciated.\r\n\r\nThanks\r\n\r\n  [1]: https://i.stack.imgur.com/3sDFH.png\r\n  [2]: https://i.stack.imgur.com/qc5dz.png","title":"What is causing the following stackoverflow error in a spring boot application with a scheduler?","body":"<p><strong>The issue happened in production and need an immediate fix. Please help me</strong></p>\n<p>I have a spring boot application which is dockerized and running on an ec2 instance. Today the application started giving java.lang.StackOverflowError: null error suddenly without even making any changes.</p>\n<p>The stack trace is attached below</p>\n<p><a href=\"https://i.stack.imgur.com/3sDFH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3sDFH.png\" alt=\"Stack Trace\" /></a></p>\n<p>So in the stack trace you can see coffeejms-4, That is nothing but a thread's name. So issue happened within a thread that is running a scheduled job in my spring boot application.</p>\n<p>The scheduler configuration is attached below</p>\n<p><a href=\"https://i.stack.imgur.com/qc5dz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qc5dz.png\" alt=\"Scheduler Config\" /></a></p>\n<p>I don't know what caused this all of a sudden. I just restarted my docker container. I didn't change the image at all. I have tried following things</p>\n<ol>\n<li>Restarted docker service</li>\n<li>Restarted my ec2 instance</li>\n<li>Assigned more memory for the spring boot app</li>\n</ol>\n<p>But nothing is helping it. If someone could help me with this as soon as possible that would be greatly appreciated.</p>\n<p>Thanks</p>\n"},{"tags":["java","kotlin","spring-security","request-headers"],"answers":[{"tags":[],"owner":{"account_id":2258060,"reputation":3689,"user_id":1988798,"accept_rate":83,"display_name":"Gaurav"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691690860,"creation_date":1691690860,"answer_id":76878300,"question_id":76873667,"body_markdown":"`StrictHttpFirewall` checks for a header but **lazily**. Also, you have to notice that `StrictHttpFirewall` wraps the request and response both into `Wrapper`. \r\n\r\nWith this, `StrictHttpFirewall` won&#39;t actually reject the request unless down the `filterChain`, a request is made to access one of the black listed headers. It means even if you have a blacklisted header, but nobody in filter chain or controller is trying to read from that header, your request won&#39;t be rejected until it is attempted to be read.\r\n\r\nIn PR where such protection was introduced, a discussion was held related to performance of such header check as this check would be executed multiple times.\r\n\r\nTo address your requirement, I don&#39;t think this can be handled by `StrictHttpFirewall`. To reject a request eagerly, you will have to write a filter that sits at the beginning of filter chain, or at the mvc layer, checks for presence of such headers and rejects it.\r\n\r\nOne advantage that you can have by introducing request in filter chain is `FilterChainProxy` accepts a `RequestReject(ed)Handler` that will be able to handle `RequestReject(ed)Exception` should you choose to throw it.","title":"Spring security StrictHttpFirewall isn&#39;t validating the headers","body":"<p><code>StrictHttpFirewall</code> checks for a header but <strong>lazily</strong>. Also, you have to notice that <code>StrictHttpFirewall</code> wraps the request and response both into <code>Wrapper</code>.</p>\n<p>With this, <code>StrictHttpFirewall</code> won't actually reject the request unless down the <code>filterChain</code>, a request is made to access one of the black listed headers. It means even if you have a blacklisted header, but nobody in filter chain or controller is trying to read from that header, your request won't be rejected until it is attempted to be read.</p>\n<p>In PR where such protection was introduced, a discussion was held related to performance of such header check as this check would be executed multiple times.</p>\n<p>To address your requirement, I don't think this can be handled by <code>StrictHttpFirewall</code>. To reject a request eagerly, you will have to write a filter that sits at the beginning of filter chain, or at the mvc layer, checks for presence of such headers and rejects it.</p>\n<p>One advantage that you can have by introducing request in filter chain is <code>FilterChainProxy</code> accepts a <code>RequestReject(ed)Handler</code> that will be able to handle <code>RequestReject(ed)Exception</code> should you choose to throw it.</p>\n"}],"owner":{"account_id":20980887,"reputation":3,"user_id":15415746,"display_name":"DgKyK"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":141,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76878300,"answer_count":1,"score":0,"last_activity_date":1691690860,"creation_date":1691654001,"question_id":76873667,"body_markdown":"I am trying to add my custom StrictHttpFirewall to be able to reject requests in case of headers are not matching my pattern. \r\n\r\nI have the following configuration of Spring security:\r\n\r\n```\r\n@Configuration\r\n@EnableWebSecurity\r\nclass SecurityConfig {\r\n\r\n    companion object {\r\n        private val HEADER_NAME_PATTERN = &quot;^[a-z1-9_-]{1,512}$&quot;.toRegex(RegexOption.IGNORE_CASE)\r\n        private val HEADER_VALUE_BASE_PATTERN = &quot;[\\\\p{IsAssigned}&amp;&amp;[^\\\\p{IsControl}]]*&quot;.toRegex()\r\n        private val HEADER_VALUE_ERROR_PATTERN = &quot;[&lt;&gt;]&quot;.toRegex()\r\n    }\r\n\r\n    @Bean\r\n    fun requestRejectedHandler(): RequestRejectedHandler = ErrorResponseRequestRejectedHandler()\r\n\r\n    @Bean\r\n    fun httpFirewall(): HttpFirewall {\r\n        val firewall = StrictHttpFirewall()\r\n        val headerNames = { header: String -&gt; HEADER_NAME_PATTERN.matches(header) }\r\n        val headerValues = { value: String -&gt;\r\n            HEADER_VALUE_BASE_PATTERN.containsMatchIn(value).and(\r\n                !HEADER_VALUE_ERROR_PATTERN.containsMatchIn(value)\r\n            )\r\n        }\r\n        firewall.setAllowedHeaderNames(headerNames)\r\n        firewall.setAllowedHeaderValues(headerValues)\r\n        firewall.setAllowedHttpMethods(\r\n            listOf(GET.name(), POST.name(), PUT.name(), PATCH.name(), DELETE.name())\r\n        )\r\n        return firewall\r\n    }\r\n\r\n    @Bean\r\n    @Throws(Exception::class)\r\n    fun filterChain(http: HttpSecurity): SecurityFilterChain =\r\n        http\r\n            .authorizeHttpRequests { it.anyRequest().permitAll() }\r\n            .sessionManagement {\r\n                it\r\n                    .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n                    .disable()\r\n            }\r\n            .headers {\r\n                it\r\n                    .frameOptions { option -&gt; option.sameOrigin() }\r\n                    .xssProtection(Customizer.withDefaults())\r\n                    .cacheControl { cache -&gt; cache.disable() }\r\n                    .contentSecurityPolicy(Customizer.withDefaults())\r\n            }\r\n            .cors { it.disable() }\r\n            .csrf { it.disable() }\r\n            .requestCache { it.disable() }\r\n            .build()\r\n}\r\n```\r\nBut unfortunately it&#39;s not working, I am still able to pass headers that is not match my regex. \r\nI have a long debugging session, and it seams like request itself (made by mockMVC) having all the headers, but spring security is not checking the headers from request itself. Interesting note: it&#39;s validating the header that I specified as mandatory on my controller method parameter level - like @RequestHeader(value = &quot;my-header&quot;, required = true). Would be appreciate for any help.\r\n\r\nAlready tried:\r\n1) Explicitly set httpFirewall to WebSecurity - no success\r\n2) Added custom filter to debug the headers, as result header names become validated, but just because I explicitly called the `request.headerNames.toList()`\r\nbecause the request itself is wrapped internally with HttpFirewallRequest implementation, that have overriden method `getHeaders` with the validation that I actually expected.\r\n3) Make request not only from `mockMvc` but also `RestTemplate` and just make the request via postman - no success  ","title":"Spring security StrictHttpFirewall isn&#39;t validating the headers","body":"<p>I am trying to add my custom StrictHttpFirewall to be able to reject requests in case of headers are not matching my pattern.</p>\n<p>I have the following configuration of Spring security:</p>\n<pre><code>@Configuration\n@EnableWebSecurity\nclass SecurityConfig {\n\n    companion object {\n        private val HEADER_NAME_PATTERN = &quot;^[a-z1-9_-]{1,512}$&quot;.toRegex(RegexOption.IGNORE_CASE)\n        private val HEADER_VALUE_BASE_PATTERN = &quot;[\\\\p{IsAssigned}&amp;&amp;[^\\\\p{IsControl}]]*&quot;.toRegex()\n        private val HEADER_VALUE_ERROR_PATTERN = &quot;[&lt;&gt;]&quot;.toRegex()\n    }\n\n    @Bean\n    fun requestRejectedHandler(): RequestRejectedHandler = ErrorResponseRequestRejectedHandler()\n\n    @Bean\n    fun httpFirewall(): HttpFirewall {\n        val firewall = StrictHttpFirewall()\n        val headerNames = { header: String -&gt; HEADER_NAME_PATTERN.matches(header) }\n        val headerValues = { value: String -&gt;\n            HEADER_VALUE_BASE_PATTERN.containsMatchIn(value).and(\n                !HEADER_VALUE_ERROR_PATTERN.containsMatchIn(value)\n            )\n        }\n        firewall.setAllowedHeaderNames(headerNames)\n        firewall.setAllowedHeaderValues(headerValues)\n        firewall.setAllowedHttpMethods(\n            listOf(GET.name(), POST.name(), PUT.name(), PATCH.name(), DELETE.name())\n        )\n        return firewall\n    }\n\n    @Bean\n    @Throws(Exception::class)\n    fun filterChain(http: HttpSecurity): SecurityFilterChain =\n        http\n            .authorizeHttpRequests { it.anyRequest().permitAll() }\n            .sessionManagement {\n                it\n                    .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n                    .disable()\n            }\n            .headers {\n                it\n                    .frameOptions { option -&gt; option.sameOrigin() }\n                    .xssProtection(Customizer.withDefaults())\n                    .cacheControl { cache -&gt; cache.disable() }\n                    .contentSecurityPolicy(Customizer.withDefaults())\n            }\n            .cors { it.disable() }\n            .csrf { it.disable() }\n            .requestCache { it.disable() }\n            .build()\n}\n</code></pre>\n<p>But unfortunately it's not working, I am still able to pass headers that is not match my regex.\nI have a long debugging session, and it seams like request itself (made by mockMVC) having all the headers, but spring security is not checking the headers from request itself. Interesting note: it's validating the header that I specified as mandatory on my controller method parameter level - like @RequestHeader(value = &quot;my-header&quot;, required = true). Would be appreciate for any help.</p>\n<p>Already tried:</p>\n<ol>\n<li>Explicitly set httpFirewall to WebSecurity - no success</li>\n<li>Added custom filter to debug the headers, as result header names become validated, but just because I explicitly called the <code>request.headerNames.toList()</code>\nbecause the request itself is wrapped internally with HttpFirewallRequest implementation, that have overriden method <code>getHeaders</code> with the validation that I actually expected.</li>\n<li>Make request not only from <code>mockMvc</code> but also <code>RestTemplate</code> and just make the request via postman - no success</li>\n</ol>\n"},{"tags":["java","spring","postgresql","sorting","search"],"answers":[{"tags":[],"owner":{"account_id":28506077,"reputation":78,"user_id":21816714,"display_name":"Mohammad Nayem"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691685455,"creation_date":1691685455,"answer_id":76877717,"question_id":76875299,"body_markdown":"One approach you can consider is to calculate the relevance value in your Java code after fetching the data and then sort the results. This way, you have more flexibility in defining the relevance calculation logic. However, as you mentioned, sorting the collection in memory after fetching it from the repository might be slow, especially when dealing with large datasets.\r\n\r\nTo optimize this process, you can consider using PriorityQueue along with a custom comparator that considers the calculated relevance value. This allows you to keep the collection sorted efficiently while fetching data. For example:\r\n```\r\n// Define your custom comparator for the priority queue\r\nComparator&lt;CompanyEntity&gt; relevanceComparator = (company1, company2) -&gt; {\r\n    // Calculate relevance values for company1 and company2\r\n    double relevance1 = calculateRelevance(company1);\r\n    double relevance2 = calculateRelevance(company2);\r\n    \r\n    // Compare based on relevance values\r\n    return Double.compare(relevance2, relevance1); // Reverse order for higher relevance first\r\n};\r\n\r\nPriorityQueue&lt;CompanyEntity&gt; sortedCompanies = new PriorityQueue&lt;&gt;(relevanceComparator);\r\n\r\n// Fetch data and add to the priority queue\r\nfor (CompanyEntity company : companyEntities) {\r\n    double relevance = calculateRelevance(company);\r\n    company.setRelevance(relevance); // Store the calculated relevance in the entity\r\n    sortedCompanies.offer(company);\r\n}\r\n\r\n// Paginate the sorted results\r\nList&lt;CompanyEntity&gt; paginatedResults = new ArrayList&lt;&gt;();\r\nint startIndex = searchDto.getPage() * PAGE_SIZE;\r\nint endIndex = startIndex + PAGE_SIZE;\r\nfor (int i = 0; i &lt; startIndex &amp;&amp; !sortedCompanies.isEmpty(); i++) {\r\n    sortedCompanies.poll(); // Discard companies before the desired page\r\n}\r\nfor (int i = startIndex; i &lt; endIndex &amp;&amp; !sortedCompanies.isEmpty(); i++) {\r\n    paginatedResults.add(sortedCompanies.poll());\r\n}\r\n\r\n```\r\n\r\nAlthough this approach requires more memory to store the priority queue, it can be much more efficient than sorting the entire collection in memory.","title":"How to use dynamic sort with pagable in Spring boot","body":"<p>One approach you can consider is to calculate the relevance value in your Java code after fetching the data and then sort the results. This way, you have more flexibility in defining the relevance calculation logic. However, as you mentioned, sorting the collection in memory after fetching it from the repository might be slow, especially when dealing with large datasets.</p>\n<p>To optimize this process, you can consider using PriorityQueue along with a custom comparator that considers the calculated relevance value. This allows you to keep the collection sorted efficiently while fetching data. For example:</p>\n<pre><code>// Define your custom comparator for the priority queue\nComparator&lt;CompanyEntity&gt; relevanceComparator = (company1, company2) -&gt; {\n    // Calculate relevance values for company1 and company2\n    double relevance1 = calculateRelevance(company1);\n    double relevance2 = calculateRelevance(company2);\n    \n    // Compare based on relevance values\n    return Double.compare(relevance2, relevance1); // Reverse order for higher relevance first\n};\n\nPriorityQueue&lt;CompanyEntity&gt; sortedCompanies = new PriorityQueue&lt;&gt;(relevanceComparator);\n\n// Fetch data and add to the priority queue\nfor (CompanyEntity company : companyEntities) {\n    double relevance = calculateRelevance(company);\n    company.setRelevance(relevance); // Store the calculated relevance in the entity\n    sortedCompanies.offer(company);\n}\n\n// Paginate the sorted results\nList&lt;CompanyEntity&gt; paginatedResults = new ArrayList&lt;&gt;();\nint startIndex = searchDto.getPage() * PAGE_SIZE;\nint endIndex = startIndex + PAGE_SIZE;\nfor (int i = 0; i &lt; startIndex &amp;&amp; !sortedCompanies.isEmpty(); i++) {\n    sortedCompanies.poll(); // Discard companies before the desired page\n}\nfor (int i = startIndex; i &lt; endIndex &amp;&amp; !sortedCompanies.isEmpty(); i++) {\n    paginatedResults.add(sortedCompanies.poll());\n}\n\n</code></pre>\n<p>Although this approach requires more memory to store the priority queue, it can be much more efficient than sorting the entire collection in memory.</p>\n"}],"owner":{"account_id":28717387,"reputation":11,"user_id":21991741,"display_name":"Andor P&#225;l"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1691690818,"creation_date":1691666873,"question_id":76875299,"body_markdown":"I want to build a search algorithm in Spring boot.\r\nI have a **Company Entity** and I would like to get a collection with pagination.\r\nI want to sort the collection based on a calculated **relevance value** which is calculated from values mapped with the  **CompanyEntity**, such as how many reviews the company has, average review, owner activity.\r\n\r\n\r\n\r\n```\r\nSpecification&lt;CompanyEntity&gt; specification = CompanySpecification.build(searchDto);\r\nPageable pageable = PageRequest.of(searchDto.getPage(),PAGE_SIZE,utility.sortBuilder(searchDto));\r\nPage&lt;CompanyEntity&gt; companyEntities = companyRepository.findAll(specification,pageable);\r\n```\r\n\r\nSorting the collection after getting it from the repository is too slow.\r\nI tried using Sort objects but i can sort only by column names. Do i have to calculate this relevance value in the SQL level or there is a already made up solution for this in Spring?\r\nTy.\r\n","title":"How to use dynamic sort with pagable in Spring boot","body":"<p>I want to build a search algorithm in Spring boot.\nI have a <strong>Company Entity</strong> and I would like to get a collection with pagination.\nI want to sort the collection based on a calculated <strong>relevance value</strong> which is calculated from values mapped with the  <strong>CompanyEntity</strong>, such as how many reviews the company has, average review, owner activity.</p>\n<pre><code>Specification&lt;CompanyEntity&gt; specification = CompanySpecification.build(searchDto);\nPageable pageable = PageRequest.of(searchDto.getPage(),PAGE_SIZE,utility.sortBuilder(searchDto));\nPage&lt;CompanyEntity&gt; companyEntities = companyRepository.findAll(specification,pageable);\n</code></pre>\n<p>Sorting the collection after getting it from the repository is too slow.\nI tried using Sort objects but i can sort only by column names. Do i have to calculate this relevance value in the SQL level or there is a already made up solution for this in Spring?\nTy.</p>\n"},{"tags":["java","spring-boot","exception"],"answers":[{"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691013019,"creation_date":1691013019,"answer_id":76823733,"question_id":76823554,"body_markdown":"You can add an [`@ExceptionHandler`][1] for `ClientAuthorizationException`.\r\n\r\nAs a side note, I&#39;d keep a `5xx` status as what&#39;s happening actually is internal to your servers (maybe `503`?).\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/reference/web/webmvc/mvc-controller/ann-exceptionhandler.html","title":"Custom Spring Boot Oauth2 exceptions","body":"<p>You can add an <a href=\"https://docs.spring.io/spring-framework/reference/web/webmvc/mvc-controller/ann-exceptionhandler.html\" rel=\"nofollow noreferrer\"><code>@ExceptionHandler</code></a> for <code>ClientAuthorizationException</code>.</p>\n<p>As a side note, I'd keep a <code>5xx</code> status as what's happening actually is internal to your servers (maybe <code>503</code>?).</p>\n"}],"owner":{"account_id":1424447,"reputation":107,"user_id":1348348,"accept_rate":60,"display_name":"Riggster"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":113,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1691690521,"creation_date":1691010642,"question_id":76823554,"body_markdown":"In my spring boot application, I have a rest controller with methods that use a WebClient to send requests to an external api, and that endpoint uses oauth for authentication. My issue is related to throwing custom exceptions. Within the WebClient, I can throw custom exceptions based on the http status code that&#39;s returned. For example, if I send a GET request with a non-existent ID, I can handle the 404 NOT FOUND that is returned just fine.\r\n\r\nMy issue is figuring out how to throw custom exceptions resulting from the authentication endpoint being unavailable. Currently, if I send a GET request and the authentication endpoint is down, a 404 NOT FOUND is returned from the authentication endpoint, which causes a ClientAuthorizationException to be thrown, and ultimately a response with a 500 INTERNAL SERVER ERROR http status is returned by the method in my rest controller, along with the stack trace. How do throw a custom exception in this case? \r\n\r\nFor reference, here is the configuration code I use to create the WebClient bean with the oauth included. It was originally taken from a blog at okta.com. \r\n\r\n```\r\n@Configuration\r\npublic class OAuthClientConfiguration {\r\n\r\n    @Bean\r\n    ReactiveClientRegistrationRepository clientRegistrations(\r\n            @Value(&quot;${spring.security.oauth2.client.provider.okta.token-uri}&quot;) String token_uri,\r\n            @Value(&quot;${spring.security.oauth2.client.registration.okta.client-id}&quot;) String client_id,\r\n            @Value(&quot;${spring.security.oauth2.client.registration.okta.client-secret}&quot;) String client_secret,\r\n            @Value(&quot;${spring.security.oauth2.client.registration.okta.scope}&quot;) String scope,\r\n            @Value(&quot;${spring.security.oauth2.client.registration.okta.authorization-grant-type}&quot;) String authorizationGrantType\r\n\r\n    ) {\r\n        ClientRegistration registration = ClientRegistration\r\n                .withRegistrationId(&quot;okta&quot;)\r\n                .tokenUri(token_uri)\r\n                .clientId(client_id)\r\n                .clientSecret(client_secret)\r\n                .scope(scope)\r\n                .authorizationGrantType(new AuthorizationGrantType(authorizationGrantType))\r\n                .build();\r\n        return new InMemoryReactiveClientRegistrationRepository(registration);\r\n    }\r\n\r\n    @Bean\r\n    WebClient webClient(ReactiveClientRegistrationRepository clientRegistrations) {\r\n        InMemoryReactiveOAuth2AuthorizedClientService clientService = new InMemoryReactiveOAuth2AuthorizedClientService(clientRegistrations);\r\n        AuthorizedClientServiceReactiveOAuth2AuthorizedClientManager authorizedClientManager = new AuthorizedClientServiceReactiveOAuth2AuthorizedClientManager(clientRegistrations, clientService);\r\n        ServerOAuth2AuthorizedClientExchangeFilterFunction oauth = new ServerOAuth2AuthorizedClientExchangeFilterFunction(authorizedClientManager);\r\n        oauth.setDefaultClientRegistrationId(&quot;okta&quot;);\r\n        return WebClient.builder()\r\n                .filter(oauth)\r\n                .build();\r\n    }\r\n\r\n}\r\n```\r\nAlso for reference, here is how I am throwing errors in my service. When the service throws the custom exception, a global exception handler intercepts the exception and gracefully returns a response entity with the exception message and correct http status code.\r\n\r\n```\r\nwebClient.get()\r\n    .uri(finalURL)\r\n    .accept(MediaType.APPLICATION_JSON)\r\n    .exchangeToMono(clientResponse -&gt; {\r\n        switch (clientResponse.rawStatusCode()) {\r\n            case OK:\r\n                return clientResponse\r\n                    .bodyToMono(Resource.class);\r\n            case NOT_FOUND:\r\n                throw new ResourceNotFoundException(id);\r\n            case INTERNAL_SERVER_ERROR:\r\n                throw new InternalServerErrorException();\r\n            default:\r\n                return Mono.empty();\r\n        }\r\n    })\r\n```\r\n","title":"Custom Spring Boot Oauth2 exceptions","body":"<p>In my spring boot application, I have a rest controller with methods that use a WebClient to send requests to an external api, and that endpoint uses oauth for authentication. My issue is related to throwing custom exceptions. Within the WebClient, I can throw custom exceptions based on the http status code that's returned. For example, if I send a GET request with a non-existent ID, I can handle the 404 NOT FOUND that is returned just fine.</p>\n<p>My issue is figuring out how to throw custom exceptions resulting from the authentication endpoint being unavailable. Currently, if I send a GET request and the authentication endpoint is down, a 404 NOT FOUND is returned from the authentication endpoint, which causes a ClientAuthorizationException to be thrown, and ultimately a response with a 500 INTERNAL SERVER ERROR http status is returned by the method in my rest controller, along with the stack trace. How do throw a custom exception in this case?</p>\n<p>For reference, here is the configuration code I use to create the WebClient bean with the oauth included. It was originally taken from a blog at okta.com.</p>\n<pre><code>@Configuration\npublic class OAuthClientConfiguration {\n\n    @Bean\n    ReactiveClientRegistrationRepository clientRegistrations(\n            @Value(&quot;${spring.security.oauth2.client.provider.okta.token-uri}&quot;) String token_uri,\n            @Value(&quot;${spring.security.oauth2.client.registration.okta.client-id}&quot;) String client_id,\n            @Value(&quot;${spring.security.oauth2.client.registration.okta.client-secret}&quot;) String client_secret,\n            @Value(&quot;${spring.security.oauth2.client.registration.okta.scope}&quot;) String scope,\n            @Value(&quot;${spring.security.oauth2.client.registration.okta.authorization-grant-type}&quot;) String authorizationGrantType\n\n    ) {\n        ClientRegistration registration = ClientRegistration\n                .withRegistrationId(&quot;okta&quot;)\n                .tokenUri(token_uri)\n                .clientId(client_id)\n                .clientSecret(client_secret)\n                .scope(scope)\n                .authorizationGrantType(new AuthorizationGrantType(authorizationGrantType))\n                .build();\n        return new InMemoryReactiveClientRegistrationRepository(registration);\n    }\n\n    @Bean\n    WebClient webClient(ReactiveClientRegistrationRepository clientRegistrations) {\n        InMemoryReactiveOAuth2AuthorizedClientService clientService = new InMemoryReactiveOAuth2AuthorizedClientService(clientRegistrations);\n        AuthorizedClientServiceReactiveOAuth2AuthorizedClientManager authorizedClientManager = new AuthorizedClientServiceReactiveOAuth2AuthorizedClientManager(clientRegistrations, clientService);\n        ServerOAuth2AuthorizedClientExchangeFilterFunction oauth = new ServerOAuth2AuthorizedClientExchangeFilterFunction(authorizedClientManager);\n        oauth.setDefaultClientRegistrationId(&quot;okta&quot;);\n        return WebClient.builder()\n                .filter(oauth)\n                .build();\n    }\n\n}\n</code></pre>\n<p>Also for reference, here is how I am throwing errors in my service. When the service throws the custom exception, a global exception handler intercepts the exception and gracefully returns a response entity with the exception message and correct http status code.</p>\n<pre><code>webClient.get()\n    .uri(finalURL)\n    .accept(MediaType.APPLICATION_JSON)\n    .exchangeToMono(clientResponse -&gt; {\n        switch (clientResponse.rawStatusCode()) {\n            case OK:\n                return clientResponse\n                    .bodyToMono(Resource.class);\n            case NOT_FOUND:\n                throw new ResourceNotFoundException(id);\n            case INTERNAL_SERVER_ERROR:\n                throw new InternalServerErrorException();\n            default:\n                return Mono.empty();\n        }\n    })\n</code></pre>\n"},{"tags":["java","eclipse","maven","selenium-webdriver","selenium-chromedriver"],"comments":[{"owner":{"account_id":16999473,"reputation":189,"user_id":12297200,"display_name":"Amirhossein"},"score":2,"creation_date":1691540422,"post_id":76863832,"comment_id":135504663,"body_markdown":"Maybe it has something to do with the arabic port digits?","body":"Maybe it has something to do with the arabic port digits?"},{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1691540432,"post_id":76863832,"comment_id":135504664,"body_markdown":"For normal selenium use `io.github.bonigarcia.wdm.WebDriverManager` is not required.  Why are you using this third-party jar?","body":"For normal selenium use <code>io.github.bonigarcia.wdm.WebDriverManager</code> is not required.  Why are you using this third-party jar?"},{"owner":{"account_id":28705640,"reputation":1,"user_id":21982032,"display_name":"Hussien Saed"},"score":0,"creation_date":1691540959,"post_id":76863832,"comment_id":135504717,"body_markdown":"i don&#39;t know , i just learning online and I do what instructor do","body":"i don&#39;t know , i just learning online and I do what instructor do"},{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":1,"creation_date":1691541587,"post_id":76863832,"comment_id":135504768,"body_markdown":"Posted code does not match error. Does not contain &quot;٤٠١٩٦&quot;, but &quot;٤٠١٩٦&quot; is not a valid port number. I&#39;m not certain what the first two glyphs are, and the last three aren&#39;t the digits 197... where do you have `٤٠١٩٦`?","body":"Posted code does not match error. Does not contain &quot;٤٠١٩٦&quot;, but &quot;٤٠١٩٦&quot; is not a valid port number. I&#39;m not certain what the first two glyphs are, and the last three aren&#39;t the digits 197... where do you have <code>٤٠١٩٦</code>?"}],"answers":[{"tags":[],"owner":{"account_id":28705640,"reputation":1,"user_id":21982032,"display_name":"Hussien Saed"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691690463,"creation_date":1691690463,"answer_id":76878259,"question_id":76863832,"body_markdown":"The problem was solved by upgrading my windows  from 8 to 10 \r\nThanks all","title":"How can i fix this error ? Unable to parse URL: http://localhost:٤٠١٩٦/session","body":"<p>The problem was solved by upgrading my windows  from 8 to 10\nThanks all</p>\n"}],"owner":{"account_id":28705640,"reputation":1,"user_id":21982032,"display_name":"Hussien Saed"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":125,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691690463,"creation_date":1691540135,"question_id":76863832,"body_markdown":"i&#39;m a begainner in selenuim web driver and i tried alot of things to solve this error but i coudn&#39;t solve it \r\n\r\n    package Com.google.SeleniumNew;\r\n    \r\n    import org.openqa.selenium.WebDriver;\r\n    \r\n    import org.openqa.selenium.firefox.FirefoxDriver;\r\n    \r\n    import io.github.bonigarcia.wdm.WebDriverManager;\r\n    \r\n    public class ChromeDriverDemo {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tWebDriverManager.firefoxdriver().setup();\r\n    \r\n    \t\t\r\n    \t\tWebDriver driver= new FirefoxDriver();\r\n    \r\n    \t\t\r\n    \t\tdriver.get(&quot;http://www.google.com&quot;);\r\n    \r\n    \t}\r\n    \r\n    }\r\n\r\nand give me thihs errors \r\n\r\n        --marionette-host &lt;HOST&gt;\r\n            Host to use to connect to Gecko [default: 127.0.0.1]\r\n\r\n        --marionette-port &lt;PORT&gt;\r\n            Port to use to connect to Gecko [default: system-allocated port]\r\n\r\n    -p, --port &lt;PORT&gt;\r\n            Port to use for WebDriver server [default: 4444]\r\n\r\n        --profile-root &lt;PROFILE_ROOT&gt;\r\n            Directory in which to create profiles. Defaults to the system temporary directory.\r\n\r\n    -v\r\n            Log level verbosity (-v for debug and -vv for trace level)\r\n\r\n    -V, --version\r\n            Prints version and copying information\r\n\r\n        --websocket-port &lt;PORT&gt;\r\n            Port to use to connect to WebDriver BiDi [default: 9222]\r\n\r\n    Exception in thread &quot;main&quot; org.openqa.selenium.WebDriverException: java.io.IOException: Unable to parse URL: http://localhost:٤٠١٩٦/session\r\n    Build info: version: &#39;3.141.59&#39;, revision: &#39;e82be7d358&#39;, time: &#39;2018-11-14T08:17:03&#39;\r\n    System info: host: &#39;HUSSIEN&#39;, ip: &#39;192.168.2.7&#39;, os.name: &#39;Windows 8.1&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;6.3&#39;, java.version: &#39;17.0.7&#39;\r\n    Driver info: driver.version: FirefoxDriver\r\n    \tat org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:92)\r\n    \tat org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:552)\r\n    \tat org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:213)\r\n    \tat org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:131)\r\n    \tat org.openqa.selenium.firefox.FirefoxDriver.&lt;init&gt;(FirefoxDriver.java:147)\r\n    \tat org.openqa.selenium.firefox.FirefoxDriver.&lt;init&gt;(FirefoxDriver.java:125)\r\n    \tat Com.google.SeleniumNew.ChromeDriverDemo.main(ChromeDriverDemo.java:18)\r\n    Caused by: java.io.IOException: Unable to parse URL: http://localhost:٤٠١٩٦/session\r\n    \tat org.openqa.selenium.remote.internal.OkHttpClient.execute(OkHttpClient.java:64)\r\n    \tat org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:105)\r\n    \tat org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:74)\r\n    \tat org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:136)\r\n    \tat org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:83)\r\n    \t... 6 more\r\n\r\n\r\nand I changed selenium to 4.7.1  and I get this error \r\n\r\n    SLF4J: No SLF4J providers were found.\r\n    SLF4J: Defaulting to no-operation (NOP) logger implementation\r\n    SLF4J: See https://www.slf4j.org/codes.html#noProviders for further details.\r\n    SLF4J: Class path contains SLF4J bindings targeting slf4j-api versions 1.7.x or earlier.\r\n    SLF4J: Ignoring binding found at [jar:file:/C:/Users/Hussien%20saeid/.m2/repository/org/slf4j/slf4j-nop/1.7.28/slf4j-nop-1.7.28.jar!/org/slf4j/impl/StaticLoggerBinder.class]\r\n    SLF4J: See https://www.slf4j.org/codes.html#ignoredBindings for an explanation.\r\n    log4j:WARN No appenders could be found for logger (io.netty.util.internal.logging.InternalLoggerFactory).\r\n    log4j:WARN Please initialize the log4j system properly.\r\n    log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.\r\n    C:\\Users\\Hussien saeid\\.cache\\selenium\\geckodriver\\win64\\0.33.0\\geckodriver.exe: error: invalid --port: invalid digit found in string: ٣٥٦٩٤\r\n    geckodriver 0.33.0 (a80e5fd61076 2023-04-02 18:31 +0000) \r\n    WebDriver implementation for Firefox\r\n    \r\n    USAGE:\r\n        geckodriver.exe [OPTIONS]\r\n    \r\n    OPTIONS:\r\n            --allow-hosts &lt;ALLOW_HOSTS&gt;...\r\n                List of hostnames to allow. By default the value of --host is allowed, and in addition\r\n                if that&#39;s a well known local address, other variations on well known local addresses are\r\n                allowed. If --allow-hosts is provided only exactly those hosts are allowed.\r\n    \r\n            --allow-origins &lt;ALLOW_ORIGINS&gt;...\r\n                List of request origins to allow. These must be formatted as scheme://host:port. By\r\n                default any request with an origin header is rejected. If --allow-origins is provided\r\n                then only exactly those origins are allowed.\r\n    \r\n            --android-storage &lt;ANDROID_STORAGE&gt;\r\n                Selects storage location to be used for test data (deprecated). [possible values: auto,\r\n                app, internal, sdcard]\r\n    \r\n        -b, --binary &lt;BINARY&gt;\r\n                Path to the Firefox binary\r\n    \r\n            --connect-existing\r\n                Connect to an existing Firefox instance\r\n    \r\n        -h, --help\r\n                Prints this message\r\n    \r\n            --host &lt;HOST&gt;\r\n                Host IP to use for WebDriver server [default: 127.0.0.1]\r\n    \r\n            --jsdebugger\r\n                Attach browser toolbox debugger for Firefox\r\n    \r\n            --log &lt;LEVEL&gt;\r\n                Set Gecko log level [possible values: fatal, error, warn, info, config, debug, trace]\r\n    \r\n            --log-no-truncate\r\n                Disable truncation of long log lines\r\n    \r\n            --marionette-host &lt;HOST&gt;\r\n                Host to use to connect to Gecko [default: 127.0.0.1]\r\n    \r\n            --marionette-port &lt;PORT&gt;\r\n                Port to use to connect to Gecko [default: system-allocated port]\r\n    \r\n        -p, --port &lt;PORT&gt;\r\n                Port to use for WebDriver server [default: 4444]\r\n    \r\n            --profile-root &lt;PROFILE_ROOT&gt;\r\n                Directory in which to create profiles. Defaults to the system temporary directory.\r\n    \r\n        -v\r\n                Log level verbosity (-v for debug and -vv for trace level)\r\n    \r\n        -V, --version\r\n                Prints version and copying information\r\n    \r\n            --websocket-port &lt;PORT&gt;\r\n                Port to use to connect to WebDriver BiDi [default: 9222]\r\n    \r\n    Exception in thread &quot;main&quot; org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Possible causes are invalid address of the remote server or browser start-up failure. \r\n    Host info: host: &#39;HUSSIEN&#39;, ip: &#39;192.168.2.7&#39;\r\n    \tat org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:569)\r\n    \tat org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:244)\r\n    \tat org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:159)\r\n    \tat org.openqa.selenium.firefox.FirefoxDriver.&lt;init&gt;(FirefoxDriver.java:111)\r\n    \tat org.openqa.selenium.firefox.FirefoxDriver.&lt;init&gt;(FirefoxDriver.java:99)\r\n    \tat org.openqa.selenium.firefox.FirefoxDriver.&lt;init&gt;(FirefoxDriver.java:95)\r\n    \tat Com.google.SeleniumNew.ChromeDriverDemo.main(ChromeDriverDemo.java:18)\r\n    Caused by: org.openqa.selenium.WebDriverException: Driver server process died prematurely.\r\n    Build info: version: &#39;4.7.1&#39;, revision: &#39;c6795baf1a3&#39;\r\n    System info: os.name: &#39;Windows 8.1&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;6.3&#39;, java.version: &#39;17.0.7&#39;\r\n    Driver info: driver.version: FirefoxDriver\r\n    \tat org.openqa.selenium.remote.service.DriverService.start(DriverService.java:243)\r\n    \tat org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:98)\r\n    \tat org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:551)\r\n    \t... 6 more\r\n\r\n","title":"How can i fix this error ? Unable to parse URL: http://localhost:٤٠١٩٦/session","body":"<p>i'm a begainner in selenuim web driver and i tried alot of things to solve this error but i coudn't solve it</p>\n<pre><code>package Com.google.SeleniumNew;\n\nimport org.openqa.selenium.WebDriver;\n\nimport org.openqa.selenium.firefox.FirefoxDriver;\n\nimport io.github.bonigarcia.wdm.WebDriverManager;\n\npublic class ChromeDriverDemo {\n\n    public static void main(String[] args) {\n        WebDriverManager.firefoxdriver().setup();\n\n        \n        WebDriver driver= new FirefoxDriver();\n\n        \n        driver.get(&quot;http://www.google.com&quot;);\n\n    }\n\n}\n</code></pre>\n<p>and give me thihs errors</p>\n<pre><code>    --marionette-host &lt;HOST&gt;\n        Host to use to connect to Gecko [default: 127.0.0.1]\n\n    --marionette-port &lt;PORT&gt;\n        Port to use to connect to Gecko [default: system-allocated port]\n\n-p, --port &lt;PORT&gt;\n        Port to use for WebDriver server [default: 4444]\n\n    --profile-root &lt;PROFILE_ROOT&gt;\n        Directory in which to create profiles. Defaults to the system temporary directory.\n\n-v\n        Log level verbosity (-v for debug and -vv for trace level)\n\n-V, --version\n        Prints version and copying information\n\n    --websocket-port &lt;PORT&gt;\n        Port to use to connect to WebDriver BiDi [default: 9222]\n\nException in thread &quot;main&quot; org.openqa.selenium.WebDriverException: java.io.IOException: Unable to parse URL: http://localhost:٤٠١٩٦/session\nBuild info: version: '3.141.59', revision: 'e82be7d358', time: '2018-11-14T08:17:03'\nSystem info: host: 'HUSSIEN', ip: '192.168.2.7', os.name: 'Windows 8.1', os.arch: 'amd64', os.version: '6.3', java.version: '17.0.7'\nDriver info: driver.version: FirefoxDriver\n    at org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:92)\n    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:552)\n    at org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:213)\n    at org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:131)\n    at org.openqa.selenium.firefox.FirefoxDriver.&lt;init&gt;(FirefoxDriver.java:147)\n    at org.openqa.selenium.firefox.FirefoxDriver.&lt;init&gt;(FirefoxDriver.java:125)\n    at Com.google.SeleniumNew.ChromeDriverDemo.main(ChromeDriverDemo.java:18)\nCaused by: java.io.IOException: Unable to parse URL: http://localhost:٤٠١٩٦/session\n    at org.openqa.selenium.remote.internal.OkHttpClient.execute(OkHttpClient.java:64)\n    at org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:105)\n    at org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:74)\n    at org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:136)\n    at org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:83)\n    ... 6 more\n</code></pre>\n<p>and I changed selenium to 4.7.1  and I get this error</p>\n<pre><code>SLF4J: No SLF4J providers were found.\nSLF4J: Defaulting to no-operation (NOP) logger implementation\nSLF4J: See https://www.slf4j.org/codes.html#noProviders for further details.\nSLF4J: Class path contains SLF4J bindings targeting slf4j-api versions 1.7.x or earlier.\nSLF4J: Ignoring binding found at [jar:file:/C:/Users/Hussien%20saeid/.m2/repository/org/slf4j/slf4j-nop/1.7.28/slf4j-nop-1.7.28.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: See https://www.slf4j.org/codes.html#ignoredBindings for an explanation.\nlog4j:WARN No appenders could be found for logger (io.netty.util.internal.logging.InternalLoggerFactory).\nlog4j:WARN Please initialize the log4j system properly.\nlog4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.\nC:\\Users\\Hussien saeid\\.cache\\selenium\\geckodriver\\win64\\0.33.0\\geckodriver.exe: error: invalid --port: invalid digit found in string: ٣٥٦٩٤\ngeckodriver 0.33.0 (a80e5fd61076 2023-04-02 18:31 +0000) \nWebDriver implementation for Firefox\n\nUSAGE:\n    geckodriver.exe [OPTIONS]\n\nOPTIONS:\n        --allow-hosts &lt;ALLOW_HOSTS&gt;...\n            List of hostnames to allow. By default the value of --host is allowed, and in addition\n            if that's a well known local address, other variations on well known local addresses are\n            allowed. If --allow-hosts is provided only exactly those hosts are allowed.\n\n        --allow-origins &lt;ALLOW_ORIGINS&gt;...\n            List of request origins to allow. These must be formatted as scheme://host:port. By\n            default any request with an origin header is rejected. If --allow-origins is provided\n            then only exactly those origins are allowed.\n\n        --android-storage &lt;ANDROID_STORAGE&gt;\n            Selects storage location to be used for test data (deprecated). [possible values: auto,\n            app, internal, sdcard]\n\n    -b, --binary &lt;BINARY&gt;\n            Path to the Firefox binary\n\n        --connect-existing\n            Connect to an existing Firefox instance\n\n    -h, --help\n            Prints this message\n\n        --host &lt;HOST&gt;\n            Host IP to use for WebDriver server [default: 127.0.0.1]\n\n        --jsdebugger\n            Attach browser toolbox debugger for Firefox\n\n        --log &lt;LEVEL&gt;\n            Set Gecko log level [possible values: fatal, error, warn, info, config, debug, trace]\n\n        --log-no-truncate\n            Disable truncation of long log lines\n\n        --marionette-host &lt;HOST&gt;\n            Host to use to connect to Gecko [default: 127.0.0.1]\n\n        --marionette-port &lt;PORT&gt;\n            Port to use to connect to Gecko [default: system-allocated port]\n\n    -p, --port &lt;PORT&gt;\n            Port to use for WebDriver server [default: 4444]\n\n        --profile-root &lt;PROFILE_ROOT&gt;\n            Directory in which to create profiles. Defaults to the system temporary directory.\n\n    -v\n            Log level verbosity (-v for debug and -vv for trace level)\n\n    -V, --version\n            Prints version and copying information\n\n        --websocket-port &lt;PORT&gt;\n            Port to use to connect to WebDriver BiDi [default: 9222]\n\nException in thread &quot;main&quot; org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Possible causes are invalid address of the remote server or browser start-up failure. \nHost info: host: 'HUSSIEN', ip: '192.168.2.7'\n    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:569)\n    at org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:244)\n    at org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:159)\n    at org.openqa.selenium.firefox.FirefoxDriver.&lt;init&gt;(FirefoxDriver.java:111)\n    at org.openqa.selenium.firefox.FirefoxDriver.&lt;init&gt;(FirefoxDriver.java:99)\n    at org.openqa.selenium.firefox.FirefoxDriver.&lt;init&gt;(FirefoxDriver.java:95)\n    at Com.google.SeleniumNew.ChromeDriverDemo.main(ChromeDriverDemo.java:18)\nCaused by: org.openqa.selenium.WebDriverException: Driver server process died prematurely.\nBuild info: version: '4.7.1', revision: 'c6795baf1a3'\nSystem info: os.name: 'Windows 8.1', os.arch: 'amd64', os.version: '6.3', java.version: '17.0.7'\nDriver info: driver.version: FirefoxDriver\n    at org.openqa.selenium.remote.service.DriverService.start(DriverService.java:243)\n    at org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:98)\n    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:551)\n    ... 6 more\n</code></pre>\n"},{"tags":["java","opengl","javafx"],"comments":[{"owner":{"account_id":2181042,"reputation":7158,"user_id":1930535,"accept_rate":78,"display_name":"Appleshell"},"score":0,"creation_date":1370452736,"post_id":16946030,"comment_id":24468450,"body_markdown":"There are not many examples on the internet, but an implementation can be seen here: http://www.java-gaming.org/topics/lwjgl-javafx-integration/27801/view.html","body":"There are not many examples on the internet, but an implementation can be seen here: <a href=\"http://www.java-gaming.org/topics/lwjgl-javafx-integration/27801/view.html\" rel=\"nofollow noreferrer\">java-gaming.org/topics/lwjgl-javafx-integration/27801/view.h&zwnj;&#8203;tml</a>"},{"owner":{"account_id":48178,"reputation":434,"user_id":143013,"display_name":"R. van Twisk"},"score":0,"creation_date":1389619655,"post_id":16946030,"comment_id":31727325,"body_markdown":"You can use this project as a base : https://github.com/Spasi/LWJGL-FX","body":"You can use this project as a base : <a href=\"https://github.com/Spasi/LWJGL-FX\" rel=\"nofollow noreferrer\">github.com/Spasi/LWJGL-FX</a>"}],"answers":[{"comments":[{"owner":{"account_id":2181042,"reputation":7158,"user_id":1930535,"accept_rate":78,"display_name":"Appleshell"},"score":11,"creation_date":1370452910,"post_id":16946060,"comment_id":24468543,"body_markdown":"You sure can use JOGL or LWJGL to use OpenGL from Java, but it is really not that simple to implement it in an existing JavaFX window.","body":"You sure can use JOGL or LWJGL to use OpenGL from Java, but it is really not that simple to implement it in an existing JavaFX window."},{"owner":{"account_id":9104,"reputation":33430,"user_id":16673,"accept_rate":89,"display_name":"Suma"},"score":0,"creation_date":1517476449,"post_id":16946060,"comment_id":84113697,"body_markdown":"This does not answer the question much. The question asks how, the answer just points in a general direction.","body":"This does not answer the question much. The question asks how, the answer just points in a general direction."}],"tags":[],"owner":{"account_id":1706263,"reputation":3067,"user_id":1565247,"accept_rate":50,"display_name":"Quetzalcoatl"},"comment_count":2,"down_vote_count":3,"up_vote_count":4,"is_accepted":false,"score":1,"last_activity_date":1370452634,"creation_date":1370452634,"answer_id":16946060,"question_id":16946030,"body_markdown":"Yes, by all means, you can use [JOGL][1] to achieve effectively everything you could in Java with OpenGL as you can in C/C++.\r\n\r\n\r\n  [1]: https://jogamp.org/jogl/www/","title":"How to use OpenGL in JavaFX?","body":"<p>Yes, by all means, you can use <a href=\"https://jogamp.org/jogl/www/\" rel=\"nofollow\">JOGL</a> to achieve effectively everything you could in Java with OpenGL as you can in C/C++.</p>\n"},{"comments":[{"owner":{"account_id":1517424,"reputation":8052,"user_id":1418097,"accept_rate":83,"display_name":"Display Name"},"score":9,"creation_date":1401695743,"post_id":16949909,"comment_id":36967261,"body_markdown":"So, almost 1 year has passed... Are there any news about OpenGLNode?","body":"So, almost 1 year has passed... Are there any news about OpenGLNode?"},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":5,"creation_date":1401697375,"post_id":16949909,"comment_id":36967955,"body_markdown":"No Sarge, you can try asking on the mailing list linked in the answer.","body":"No Sarge, you can try asking on the mailing list linked in the answer."},{"owner":{"account_id":4954279,"reputation":922,"user_id":3987353,"accept_rate":42,"display_name":"wax_lyrical"},"score":6,"creation_date":1507624541,"post_id":16949909,"comment_id":80272663,"body_markdown":"This is such a desirable addition to JavaFX. Wish this would materialise.","body":"This is such a desirable addition to JavaFX. Wish this would materialise."}],"tags":[],"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"comment_count":3,"down_vote_count":0,"up_vote_count":18,"is_accepted":true,"score":18,"last_activity_date":1499261440,"creation_date":1370466472,"answer_id":16949909,"question_id":16946030,"body_markdown":"Internally, JavaFX can use OpenGL as a rendering pipeline, so some care on integration between the two is required to avoid conflicts.\r\n\r\n**OpenGLNode in JavaFX**\r\n\r\nRichard Bair, JavaFX team lead posted on the [openjfx development mailing list][1]:\r\n\r\n&gt; One thing I want to see done (for example) for the 8 update is to have an OpenGLNode or NativeSurfaceNode or something along those lines so that if you are doing your own D3D / OpenGL you can have a way to send those raw commands down to the graphics card but still have your node composited in the scene graph.\r\n\r\nSo a future JavaFX release update might include an OpenGLNode. \r\nSuch a feature would probably not see inclusion in a JavaFX general availability release until the next JavaFX feature release after the initial Java 8 release (my guess is that would put it at about September 2014).\r\n\r\n**3rd Party OpenGL/JavaFX integration**\r\n\r\nYou don&#39;t need to wait so long to start integrating JavaFX and OpenGL.  All of the required source code to start an implementation is open in the [OpenJFX repository][2], so you could try building a custom integration of that code with a library such as [lwjgl][3] or [jogl][4].  \r\n\r\nThis answer will get dated as developers start performing integrations of JavaFX with existing Java wrappers for OpenGL apis.  Some developers have started such work already - run a google search of `lwjgl javafx` or `jogl javafx` to find out about current integration projects and their status.\r\n\r\nThe simplest integration is probably to have a 3rd party library render to an off screen buffer then transfer the pixels from the buffer to a JavaFX [WritableImage][5] or [Canvas][6] as required to get the OpenGL rendered graphics composited into the JavaFX scene graph.\r\n\r\n**JavaFX 3D API Alternative**\r\n\r\nJavaFX has its own lightweight 3D api that provides the ability to composite phong shaded 3d models into the JavaFX scene graph.  The JavaFX 3D api is not going to provide all the power of a full OpenGL api integration, however using the JavaFX 3D api is relatively simple.  A description, with code examples of the [3D features in Java 8 is on the open-jfx wiki][7].\r\n\r\nInteractive Mesh provides a free [3D model importer for JavaFX][8], that allows you to very simply bring complex shaded and textured 3D models into a JavaFX scene graph.\r\n\r\nThere is a [3D Viewer project][9] in the [openjfx repository][10] that you could fork to create a basis for your proposed JavaFX based 3D editor.\r\n\r\nThe nashorn JavaScript engine has a switch that allows you to [use JavaFX and its 3D features from JavaScript][11], so you can use alternative jvm languages to access JavaFX 3D features if you prefer.\r\n\r\n  [1]: http://mail.openjdk.java.net/pipermail/openjfx-dev/2013-May/007451.html\r\n  [2]: http://openjdk.java.net/projects/openjfx/\r\n  [3]: http://www.lwjgl.org/\r\n  [4]: https://jogamp.org/jogl/\r\n  [5]: http://docs.oracle.com/javafx/2/api/javafx/scene/image/WritableImage.html\r\n  [6]: http://docs.oracle.com/javafx/2/api/javafx/scene/canvas/Canvas.html\r\n  [7]: https://wiki.openjdk.java.net/display/OpenJFX/3D+Features\r\n  [8]: http://www.interactivemesh.org/models/jfx3dimporter.html\r\n  [9]: http://hg.openjdk.java.net/openjfx/8/master/rt/file/tip/apps/experiments/3DViewer/\r\n  [10]: http://openjdk.java.net/projects/openjfx/\r\n  [11]: https://blogs.oracle.com/nashorn/entry/jjs_fx","title":"How to use OpenGL in JavaFX?","body":"<p>Internally, JavaFX can use OpenGL as a rendering pipeline, so some care on integration between the two is required to avoid conflicts.</p>\n\n<p><strong>OpenGLNode in JavaFX</strong></p>\n\n<p>Richard Bair, JavaFX team lead posted on the <a href=\"http://mail.openjdk.java.net/pipermail/openjfx-dev/2013-May/007451.html\" rel=\"noreferrer\">openjfx development mailing list</a>:</p>\n\n<blockquote>\n  <p>One thing I want to see done (for example) for the 8 update is to have an OpenGLNode or NativeSurfaceNode or something along those lines so that if you are doing your own D3D / OpenGL you can have a way to send those raw commands down to the graphics card but still have your node composited in the scene graph.</p>\n</blockquote>\n\n<p>So a future JavaFX release update might include an OpenGLNode. \nSuch a feature would probably not see inclusion in a JavaFX general availability release until the next JavaFX feature release after the initial Java 8 release (my guess is that would put it at about September 2014).</p>\n\n<p><strong>3rd Party OpenGL/JavaFX integration</strong></p>\n\n<p>You don't need to wait so long to start integrating JavaFX and OpenGL.  All of the required source code to start an implementation is open in the <a href=\"http://openjdk.java.net/projects/openjfx/\" rel=\"noreferrer\">OpenJFX repository</a>, so you could try building a custom integration of that code with a library such as <a href=\"http://www.lwjgl.org/\" rel=\"noreferrer\">lwjgl</a> or <a href=\"https://jogamp.org/jogl/\" rel=\"noreferrer\">jogl</a>.  </p>\n\n<p>This answer will get dated as developers start performing integrations of JavaFX with existing Java wrappers for OpenGL apis.  Some developers have started such work already - run a google search of <code>lwjgl javafx</code> or <code>jogl javafx</code> to find out about current integration projects and their status.</p>\n\n<p>The simplest integration is probably to have a 3rd party library render to an off screen buffer then transfer the pixels from the buffer to a JavaFX <a href=\"http://docs.oracle.com/javafx/2/api/javafx/scene/image/WritableImage.html\" rel=\"noreferrer\">WritableImage</a> or <a href=\"http://docs.oracle.com/javafx/2/api/javafx/scene/canvas/Canvas.html\" rel=\"noreferrer\">Canvas</a> as required to get the OpenGL rendered graphics composited into the JavaFX scene graph.</p>\n\n<p><strong>JavaFX 3D API Alternative</strong></p>\n\n<p>JavaFX has its own lightweight 3D api that provides the ability to composite phong shaded 3d models into the JavaFX scene graph.  The JavaFX 3D api is not going to provide all the power of a full OpenGL api integration, however using the JavaFX 3D api is relatively simple.  A description, with code examples of the <a href=\"https://wiki.openjdk.java.net/display/OpenJFX/3D+Features\" rel=\"noreferrer\">3D features in Java 8 is on the open-jfx wiki</a>.</p>\n\n<p>Interactive Mesh provides a free <a href=\"http://www.interactivemesh.org/models/jfx3dimporter.html\" rel=\"noreferrer\">3D model importer for JavaFX</a>, that allows you to very simply bring complex shaded and textured 3D models into a JavaFX scene graph.</p>\n\n<p>There is a <a href=\"http://hg.openjdk.java.net/openjfx/8/master/rt/file/tip/apps/experiments/3DViewer/\" rel=\"noreferrer\">3D Viewer project</a> in the <a href=\"http://openjdk.java.net/projects/openjfx/\" rel=\"noreferrer\">openjfx repository</a> that you could fork to create a basis for your proposed JavaFX based 3D editor.</p>\n\n<p>The nashorn JavaScript engine has a switch that allows you to <a href=\"https://blogs.oracle.com/nashorn/entry/jjs_fx\" rel=\"noreferrer\">use JavaFX and its 3D features from JavaScript</a>, so you can use alternative jvm languages to access JavaFX 3D features if you prefer.</p>\n"},{"comments":[{"owner":{"account_id":2658237,"reputation":584,"user_id":2298490,"display_name":"grill2010"},"score":0,"creation_date":1700478515,"post_id":68778425,"comment_id":136655354,"body_markdown":"This could turn out as the best available option of how to do this in JavaFX. The performance is awesome, it&#39;s cross platform, Windows/ Linux and potentially MacOS is supported, you can use it with LGWL or JOGL and it offers DirectX support via NV_DX_interop. I use it for my real time video streaming app and despite small issues which the dev is currently working on its working flawlessly. Really one of the best open source libs I found in the past recent years.","body":"This could turn out as the best available option of how to do this in JavaFX. The performance is awesome, it&#39;s cross platform, Windows/ Linux and potentially MacOS is supported, you can use it with LGWL or JOGL and it offers DirectX support via NV_DX_interop. I use it for my real time video streaming app and despite small issues which the dev is currently working on its working flawlessly. Really one of the best open source libs I found in the past recent years."}],"tags":[],"owner":{"account_id":11900174,"reputation":380,"user_id":9193035,"display_name":"Husker"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1639743603,"creation_date":1628889339,"answer_id":68778425,"question_id":16946030,"body_markdown":"You can use the [OpenGLFX](https://github.com/husker-dev/openglfx) library, which mixes the previously mentioned JOGL/LWJGL and JavaFX. The code has the best performance available without changing the source code of JavaFX itself.","title":"How to use OpenGL in JavaFX?","body":"<p>You can use the <a href=\"https://github.com/husker-dev/openglfx\" rel=\"nofollow noreferrer\">OpenGLFX</a> library, which mixes the previously mentioned JOGL/LWJGL and JavaFX. The code has the best performance available without changing the source code of JavaFX itself.</p>\n"},{"tags":[],"owner":{"account_id":5647593,"reputation":498,"user_id":4469165,"accept_rate":62,"display_name":"Andy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679753816,"creation_date":1679753816,"answer_id":75842290,"question_id":16946030,"body_markdown":"**DriftFX** allows you to render any OpenGL content directly into JavaFX nodes.\r\nDirect means that there is no transfer between GPU and main memory. The textures never leave the GPU.\r\n\r\nYou can access the project on GitHub : [DriftFX][1]\r\n\r\n\r\n  [1]: https://github.com/eclipse-efx/efxclipse-drift","title":"How to use OpenGL in JavaFX?","body":"<p><strong>DriftFX</strong> allows you to render any OpenGL content directly into JavaFX nodes.\nDirect means that there is no transfer between GPU and main memory. The textures never leave the GPU.</p>\n<p>You can access the project on GitHub : <a href=\"https://github.com/eclipse-efx/efxclipse-drift\" rel=\"nofollow noreferrer\">DriftFX</a></p>\n"},{"tags":[],"owner":{"account_id":81375,"reputation":2305,"user_id":229513,"accept_rate":57,"display_name":"Martin Pernollet"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1680276825,"creation_date":1680276825,"answer_id":75900307,"question_id":16946030,"body_markdown":"[PanamaGL][1] allows rendering OpenGL scenes in a JavaFX canvas. It uses recent Oracle FFM API as of JDK19 to bind to OpenGL, which make it extremely simple to build.\r\n\r\n\r\n  [1]: https://gitlab.com/jzy3d/panama-gl","title":"How to use OpenGL in JavaFX?","body":"<p><a href=\"https://gitlab.com/jzy3d/panama-gl\" rel=\"nofollow noreferrer\">PanamaGL</a> allows rendering OpenGL scenes in a JavaFX canvas. It uses recent Oracle FFM API as of JDK19 to bind to OpenGL, which make it extremely simple to build.</p>\n"},{"tags":[],"owner":{"account_id":207965,"reputation":3704,"user_id":458157,"accept_rate":75,"display_name":"gouessej"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691690383,"creation_date":1691690383,"answer_id":76878252,"question_id":16946030,"body_markdown":"You can simply use [NewtCanvasJFX][1] available in JOGL &gt;= 2.4.0. I advise you to read [my article][2] that explains in details how to mix JOGL with JavaFX/OpenJFX. NewtCanvasJFX acts as a bridge between JOGL NEWT GLWindow used to perform OpenGL rendering and an OpenJFX/JavaFX group that you can add into a Scene, then you add the Scene into the Stage of your OpenJFX/JavaFX Application.\r\n\r\n\r\n  [1]: https://jogamp.org/deployment/jogamp-next/javadoc/jogl/javadoc/com/jogamp/newt/javafx/NewtCanvasJFX.html\r\n  [2]: https://gouessej.wordpress.com/2020/04/05/javafx-et-jogl-fonctionnent-ensemble-javafx-and-jogl-work-together/","title":"How to use OpenGL in JavaFX?","body":"<p>You can simply use <a href=\"https://jogamp.org/deployment/jogamp-next/javadoc/jogl/javadoc/com/jogamp/newt/javafx/NewtCanvasJFX.html\" rel=\"nofollow noreferrer\">NewtCanvasJFX</a> available in JOGL &gt;= 2.4.0. I advise you to read <a href=\"https://gouessej.wordpress.com/2020/04/05/javafx-et-jogl-fonctionnent-ensemble-javafx-and-jogl-work-together/\" rel=\"nofollow noreferrer\">my article</a> that explains in details how to mix JOGL with JavaFX/OpenJFX. NewtCanvasJFX acts as a bridge between JOGL NEWT GLWindow used to perform OpenGL rendering and an OpenJFX/JavaFX group that you can add into a Scene, then you add the Scene into the Stage of your OpenJFX/JavaFX Application.</p>\n"}],"owner":{"account_id":289233,"reputation":27667,"user_id":590083,"accept_rate":72,"display_name":"Lai Yu-Hsuan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32697,"favorite_count":0,"down_vote_count":0,"up_vote_count":17,"accepted_answer_id":16949909,"answer_count":6,"score":17,"last_activity_date":1691690383,"creation_date":1370452522,"question_id":16946030,"body_markdown":"I want to write a very simple Java 3D editor(for experiment). I know the basic JavaFX usage, and I know enough OpenGL knowledge. But all my OpenGL experience is from working with C/C++. \r\n\r\nCould I make a &#39;canvas&#39; in JavaFx application and map OpenGL viewport on it?","title":"How to use OpenGL in JavaFX?","body":"<p>I want to write a very simple Java 3D editor(for experiment). I know the basic JavaFX usage, and I know enough OpenGL knowledge. But all my OpenGL experience is from working with C/C++. </p>\n\n<p>Could I make a 'canvas' in JavaFx application and map OpenGL viewport on it?</p>\n"},{"tags":["java","macos"],"comments":[{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":0,"creation_date":1691606691,"post_id":76870447,"comment_id":135515807,"body_markdown":"You need to check if the classpath is correct. What does it $APPDIR resolve to?","body":"You need to check if the classpath is correct. What does it $APPDIR resolve to?"},{"owner":{"account_id":2001225,"reputation":15,"user_id":3825574,"accept_rate":80,"display_name":"Josh"},"score":0,"creation_date":1691606777,"post_id":76870447,"comment_id":135515823,"body_markdown":"$APPDIR resolves to the .app package contents folder.","body":"$APPDIR resolves to the .app package contents folder."}],"answers":[{"comments":[{"owner":{"account_id":2001225,"reputation":15,"user_id":3825574,"accept_rate":80,"display_name":"Josh"},"score":0,"creation_date":1691607061,"post_id":76870501,"comment_id":135515870,"body_markdown":"That is one of the things I tried with the same result. Adding the extension was actually a test I hadn’t removed from the cfg yet.  I updated the question to reflect that current values.","body":"That is one of the things I tried with the same result. Adding the extension was actually a test I hadn’t removed from the cfg yet.  I updated the question to reflect that current values."},{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":0,"creation_date":1691608921,"post_id":76870501,"comment_id":135516158,"body_markdown":"If you checked all that it is unlikely the error message is correct now. Plus: What is the content of your jar?","body":"If you checked all that it is unlikely the error message is correct now. Plus: What is the content of your jar?"},{"owner":{"account_id":2001225,"reputation":15,"user_id":3825574,"accept_rate":80,"display_name":"Josh"},"score":0,"creation_date":1691609494,"post_id":76870501,"comment_id":135516229,"body_markdown":"it&#39;s an application for tracking livestock.  I pulled out the pdf files etc since they aren&#39;t referenced in the code anywhere and I&#39;ve tried both a jar and runnable jar.  The manifest is empty on both.","body":"it&#39;s an application for tracking livestock.  I pulled out the pdf files etc since they aren&#39;t referenced in the code anywhere and I&#39;ve tried both a jar and runnable jar.  The manifest is empty on both."}],"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691606868,"creation_date":1691606868,"answer_id":76870501,"question_id":76870447,"body_markdown":"Your classpath may be correct, but your main class is not. Instead of\r\n\r\n    app.mainclass=com/lionEdge/ranchManager/ui/main/RanchManagerApplication.java\r\n\r\nuse\r\n\r\n    app.mainclass=com/lionEdge/ranchManager/ui/main/RanchManagerApplication","title":"Java 8 in Mac .app Could not find or load main class","body":"<p>Your classpath may be correct, but your main class is not. Instead of</p>\n<pre><code>app.mainclass=com/lionEdge/ranchManager/ui/main/RanchManagerApplication.java\n</code></pre>\n<p>use</p>\n<pre><code>app.mainclass=com/lionEdge/ranchManager/ui/main/RanchManagerApplication\n</code></pre>\n"}],"owner":{"account_id":2001225,"reputation":15,"user_id":3825574,"accept_rate":80,"display_name":"Josh"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1691651066,"answer_count":1,"score":-1,"last_activity_date":1691689912,"creation_date":1691606311,"question_id":76870447,"body_markdown":"Unfortunately i&#39;m stuck supporting a Java 8 application on Mac.  The issue is i keep getting:\r\n    `Error: Could not find or load main class             com.lionEdge.ranchManager.ui.main.RanchManagerApplication.java`\r\n\r\nWhen running the app.  Here is the Config file: \r\n```\r\n    [Application]\r\n    app.name=RanchManagerOSX\r\n    app.mainjar=$APPDIR/Java/ranchManager.jar\r\n    app.version=3.2.8\r\n    app.preferences.id=com/lionEdge/ranchManager/ui/main\r\n    app.mainclass=com/lionEdge/ranchManager/ui/main/RanchManagerApplication\r\n    app.classpath=$APPDIR/Java/jhall.jar: $APPDIR/Java/ranchManager.jar:                $APPDIR/Java/rmHelp.jar\r\n    app.runtime=$APPDIR/PlugIns/Java.runtime\r\n    app.identifier=com.whitemountainslivestock.ranchmanager\r\n\r\n    [JVMOptions]\r\n\r\n    [JVMUserOptions]\r\n    -Xmx=2048m\r\n\r\n    [ArgOptions]\r\n```\r\n\r\n\r\nThe application runs fine on windows and the path to the main method is correct.  I&#39;ve unpacked the jar and verified the path.  Here is the directory structure\r\n\r\n    ```\r\n    RanchManagerOSX.app\r\n    - Contents\r\n     -- Info.plist\r\n     -- PkgInfo\r\n     --PlugIns (Directory)\r\n      --- Java.runtime\r\n     -- Java (Directory)\r\n      --- jhall.jar\r\n      --- ranchManager.jar\r\n      ---rmHelp.jar\r\n      --- RanchManagerOSX.cfg (contents listed above)\r\n      --- jh.jar\r\n     -- MacOS (Directory)\r\n      --- RanchManagerOSX (executable)\r\n      --- lib packager.dylib\r\n    ```\r\n\r\n\r\nAny assistance getting this application working would be greatly appreciated.  \r\n**Note: upgrading java versions isn&#39;t an option since the application is currently being rewritten in .NET MAUI with a release date (tentative) of Q3 2025.\r\n\r\nI&#39;ve changed the classpath multiple times as well as the order of items in the classpath,  I can run the jar directly without issues but the launcher script (RanchManagerOSX) keeps throwing the error.\r\n\r\n**RESOLUTION: The spaces added to the classpath were causing the error. \r\n Once they were removed (i.e. $APPDIR/Java/jhall.jar:$APPDIR/Java/rmHelp.jar etc the issue was resolved.**","title":"Java 8 in Mac .app Could not find or load main class","body":"<p>Unfortunately i'm stuck supporting a Java 8 application on Mac.  The issue is i keep getting:\n<code>Error: Could not find or load main class             com.lionEdge.ranchManager.ui.main.RanchManagerApplication.java</code></p>\n<p>When running the app.  Here is the Config file:</p>\n<pre><code>    [Application]\n    app.name=RanchManagerOSX\n    app.mainjar=$APPDIR/Java/ranchManager.jar\n    app.version=3.2.8\n    app.preferences.id=com/lionEdge/ranchManager/ui/main\n    app.mainclass=com/lionEdge/ranchManager/ui/main/RanchManagerApplication\n    app.classpath=$APPDIR/Java/jhall.jar: $APPDIR/Java/ranchManager.jar:                $APPDIR/Java/rmHelp.jar\n    app.runtime=$APPDIR/PlugIns/Java.runtime\n    app.identifier=com.whitemountainslivestock.ranchmanager\n\n    [JVMOptions]\n\n    [JVMUserOptions]\n    -Xmx=2048m\n\n    [ArgOptions]\n</code></pre>\n<p>The application runs fine on windows and the path to the main method is correct.  I've unpacked the jar and verified the path.  Here is the directory structure</p>\n<pre><code>```\nRanchManagerOSX.app\n- Contents\n -- Info.plist\n -- PkgInfo\n --PlugIns (Directory)\n  --- Java.runtime\n -- Java (Directory)\n  --- jhall.jar\n  --- ranchManager.jar\n  ---rmHelp.jar\n  --- RanchManagerOSX.cfg (contents listed above)\n  --- jh.jar\n -- MacOS (Directory)\n  --- RanchManagerOSX (executable)\n  --- lib packager.dylib\n```\n</code></pre>\n<p>Any assistance getting this application working would be greatly appreciated.<br />\n**Note: upgrading java versions isn't an option since the application is currently being rewritten in .NET MAUI with a release date (tentative) of Q3 2025.</p>\n<p>I've changed the classpath multiple times as well as the order of items in the classpath,  I can run the jar directly without issues but the launcher script (RanchManagerOSX) keeps throwing the error.</p>\n<p><strong>RESOLUTION: The spaces added to the classpath were causing the error.\nOnce they were removed (i.e. $APPDIR/Java/jhall.jar:$APPDIR/Java/rmHelp.jar etc the issue was resolved.</strong></p>\n"},{"tags":["java","database","hibernate","jboss","persistence"],"comments":[{"owner":{"account_id":96415,"reputation":1902,"user_id":262067,"display_name":"mkro"},"score":0,"creation_date":1317240846,"post_id":7588657,"comment_id":9204794,"body_markdown":"what SELECT statements does hibernate generate?","body":"what SELECT statements does hibernate generate?"},{"owner":{"account_id":214278,"reputation":2298,"user_id":468160,"accept_rate":50,"display_name":"kand"},"score":0,"creation_date":1317244908,"post_id":7588657,"comment_id":9205894,"body_markdown":"it generates a SELECT for each object in my domain, which I don&#39;t want to do because I already know my objects are completely new and unique.","body":"it generates a SELECT for each object in my domain, which I don&#39;t want to do because I already know my objects are completely new and unique."}],"answers":[{"tags":[],"owner":{"account_id":319894,"reputation":43513,"user_id":637889,"accept_rate":93,"display_name":"andyb"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1317241052,"creation_date":1317241052,"answer_id":7589074,"question_id":7588657,"body_markdown":"Hibernate is trying to determine if the object is transient or not, so is performing a `SELECT` before `INSERT`. You might be able to adapt this answer from https://stackoverflow.com/questions/5208334/hibernate-onetoone-mapping-executes-select-statement-before-insert-not-sure-why/5280956#5280956 to avoid the `SELECT`.\r\n\r\nOr, I remember a post in a forum about overriding the `version` column that hibernate uses in the transient check (and for optimistic locking). I&#39;ll edit this answer when I find it.","title":"Force Hibernate Insert Without Select Statements","body":"<p>Hibernate is trying to determine if the object is transient or not, so is performing a <code>SELECT</code> before <code>INSERT</code>. You might be able to adapt this answer from <a href=\"https://stackoverflow.com/questions/5208334/hibernate-onetoone-mapping-executes-select-statement-before-insert-not-sure-why/5280956#5280956\">Hibernate OneToOne mapping executes select statement before insert; not sure why</a> to avoid the <code>SELECT</code>.</p>\n\n<p>Or, I remember a post in a forum about overriding the <code>version</code> column that hibernate uses in the transient check (and for optimistic locking). I'll edit this answer when I find it.</p>\n"},{"tags":[],"owner":{"account_id":941680,"reputation":511,"user_id":969650,"display_name":"Patrick Finnegan"},"comment_count":0,"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1602791816,"creation_date":1317241241,"answer_id":7589106,"question_id":7588657,"body_markdown":"You can use the persist() method rather than save(). \r\n\r\nhttps://forum.hibernate.org/viewtopic.php?f=1&amp;t=1011405\r\n\r\nHowever, unlike save(), persist() does not guarantee that the identifier value will be set immediately on the persisted instance.\r\n\r\nhttps://forum.hibernate.org/viewtopic.php?f=1&amp;t=951275\r\n\r\n(and you can jump to christian&#39;s last post in the thread)","title":"Force Hibernate Insert Without Select Statements","body":"<p>You can use the persist() method rather than save().</p>\n<p><a href=\"https://forum.hibernate.org/viewtopic.php?f=1&amp;t=1011405\" rel=\"nofollow noreferrer\">https://forum.hibernate.org/viewtopic.php?f=1&amp;t=1011405</a></p>\n<p>However, unlike save(), persist() does not guarantee that the identifier value will be set immediately on the persisted instance.</p>\n<p><a href=\"https://forum.hibernate.org/viewtopic.php?f=1&amp;t=951275\" rel=\"nofollow noreferrer\">https://forum.hibernate.org/viewtopic.php?f=1&amp;t=951275</a></p>\n<p>(and you can jump to christian's last post in the thread)</p>\n"},{"tags":[],"owner":{"account_id":446547,"reputation":126635,"user_id":839646,"accept_rate":70,"display_name":"Ryan Stewart"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1317262846,"creation_date":1317262846,"answer_id":7591766,"question_id":7588657,"body_markdown":"Hibernate doesn&#39;t issue a select to see if an object is unique upon a `save()`. In point of fact, Hibernate doesn&#39;t even issue an insert when you call `save()`. That happens when you `flush()` or commit the transaction. You&#39;ll need to find out exactly what the selects are for and what&#39;s initiating them. To help narrow it down, you could write a quick test like\r\n\r\n    Session session = openSession();\r\n    Transaction tx = session.beginTransaction();\r\n    session.save(myObject);\r\n    tx.commit();\r\n\r\nand see what statements that produces.","title":"Force Hibernate Insert Without Select Statements","body":"<p>Hibernate doesn't issue a select to see if an object is unique upon a <code>save()</code>. In point of fact, Hibernate doesn't even issue an insert when you call <code>save()</code>. That happens when you <code>flush()</code> or commit the transaction. You'll need to find out exactly what the selects are for and what's initiating them. To help narrow it down, you could write a quick test like</p>\n\n<pre><code>Session session = openSession();\nTransaction tx = session.beginTransaction();\nsession.save(myObject);\ntx.commit();\n</code></pre>\n\n<p>and see what statements that produces.</p>\n"},{"tags":[],"owner":{"account_id":7080403,"reputation":84,"user_id":5419028,"display_name":"Volo Myhal"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691689768,"creation_date":1691689768,"answer_id":76878196,"question_id":7588657,"body_markdown":"Inherit Persistable&lt;KeyType&gt; and override isNew as following:\r\n```\r\npublic class MyEntity implements Persistable&lt;KeyType&gt; {\r\n  @Id\r\n  private KeyType id;\r\n\r\n  @Transient\r\n  private boolean isNew = false;  // this tells next `save()` usually to do `UPDATE to DB`\r\n\r\n  public KeyType getId() {\r\n    return id;\r\n  }\r\n\r\n  public boolean isNew() {\r\n    return isNew;\r\n  }\r\n\r\n  // constructor when you create new Entity assigning 100% new unique id:\r\n  public MyEntity(String id) {\r\n    this.id = id;\r\n    this.isNew = true;  // this tells next `save()` to do `INSERT INTO DB`\r\n    ...\r\n  }\r\n  \r\n  ...\r\n}\r\n\r\n```\r\n","title":"Force Hibernate Insert Without Select Statements","body":"<p>Inherit Persistable and override isNew as following:</p>\n<pre><code>public class MyEntity implements Persistable&lt;KeyType&gt; {\n  @Id\n  private KeyType id;\n\n  @Transient\n  private boolean isNew = false;  // this tells next `save()` usually to do `UPDATE to DB`\n\n  public KeyType getId() {\n    return id;\n  }\n\n  public boolean isNew() {\n    return isNew;\n  }\n\n  // constructor when you create new Entity assigning 100% new unique id:\n  public MyEntity(String id) {\n    this.id = id;\n    this.isNew = true;  // this tells next `save()` to do `INSERT INTO DB`\n    ...\n  }\n  \n  ...\n}\n\n</code></pre>\n"}],"owner":{"account_id":214278,"reputation":2298,"user_id":468160,"accept_rate":50,"display_name":"kand"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17136,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":7589106,"answer_count":4,"score":13,"last_activity_date":1691689768,"creation_date":1317238796,"question_id":7588657,"body_markdown":"I am attempting to insert a new record into a table that I know is unique before hand. I have tried calling save() on the object, but that does a bunch of SELECT statements before doing any INSERTs, which I don&#39;t want to do because I know the object is already unique.\r\n\r\nI am opening a new session for each transaction, which I can see being an issue, but that is a constraint of my domain. Is there some way to force Hibernate to not do any SELECTs before it INSERTs? ","title":"Force Hibernate Insert Without Select Statements","body":"<p>I am attempting to insert a new record into a table that I know is unique before hand. I have tried calling save() on the object, but that does a bunch of SELECT statements before doing any INSERTs, which I don't want to do because I know the object is already unique.</p>\n\n<p>I am opening a new session for each transaction, which I can see being an issue, but that is a constraint of my domain. Is there some way to force Hibernate to not do any SELECTs before it INSERTs? </p>\n"},{"tags":["java","datetime","timezone","simpledateformat","gmt"],"comments":[{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":3,"creation_date":1691563068,"post_id":76865162,"comment_id":135506726,"body_markdown":"Basically, there&#39;s no such thing as a `Date` in a particular time zone. See https://codeblog.jonskeet.uk/2017/04/23/all-about-java-util-date/ (I&#39;d very strongly advise you to use java.time instead.)","body":"Basically, there&#39;s no such thing as a <code>Date</code> in a particular time zone. See <a href=\"https://codeblog.jonskeet.uk/2017/04/23/all-about-java-util-date/\" rel=\"nofollow noreferrer\">codeblog.jonskeet.uk/2017/04/23/all-about-java-util-date</a> (I&#39;d very strongly advise you to use java.time instead.)"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1691569666,"post_id":76865162,"comment_id":135507960,"body_markdown":"*I am trying to convert the Date received from Server* How is it received and in what form?","body":"<i>I am trying to convert the Date received from Server</i> How is it received and in what form?"},{"owner":{"account_id":9917587,"reputation":640,"user_id":7341878,"accept_rate":10,"display_name":"Prakash"},"score":0,"creation_date":1691579441,"post_id":76865162,"comment_id":135509953,"body_markdown":"new Date() provides a Server date in GMT format.","body":"new Date() provides a Server date in GMT format."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1691579736,"post_id":76865162,"comment_id":135510008,"body_markdown":"You should probably start with `Instant.now()` at the server, having ensured the system clock is set to UTC","body":"You should probably start with <code>Instant.now()</code> at the server, having ensured the system clock is set to UTC"},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1691580689,"post_id":76865162,"comment_id":135510193,"body_markdown":"I strongly recommend that you do not use `Date`, `SimpleDateFormat` and `TimeZone`. Those classes were poorly designed and are long outdated. Use `ZonedDateTime`, `ZoneId` and `DateTimeFormatter`, all from [java.time, the modern Java date and time API](https://docs.oracle.com/javase/tutorial/datetime/index.html).","body":"I strongly recommend that you do not use <code>Date</code>, <code>SimpleDateFormat</code> and <code>TimeZone</code>. Those classes were poorly designed and are long outdated. Use <code>ZonedDateTime</code>, <code>ZoneId</code> and <code>DateTimeFormatter</code>, all from <a href=\"https://docs.oracle.com/javase/tutorial/datetime/index.html\" rel=\"nofollow noreferrer\">java.time, the modern Java date and time API</a>."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1691580863,"post_id":76865162,"comment_id":135510227,"body_markdown":"@Prakash It does not since a `java.util.Date` neither can have a format nor be in GMT (GMT is not a format, it’s a time zone or an offset of zero).","body":"@Prakash It does not since a <code>java.util.Date</code> neither can have a format nor be in GMT (GMT is not a format, it’s a time zone or an offset of zero)."},{"owner":{"account_id":2179728,"reputation":73077,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"score":1,"creation_date":1691658783,"post_id":76865162,"comment_id":135522312,"body_markdown":"*I am trying to convert the Date received from Server to user specific date format (IST) and returning as Date datatype.* - Return your result as `String`, not `Date` as a `Date` can not hold the information about format and timezone.","body":"<i>I am trying to convert the Date received from Server to user specific date format (IST) and returning as Date datatype.</i> - Return your result as <code>String</code>, not <code>Date</code> as a <code>Date</code> can not hold the information about format and timezone."}],"owner":{"account_id":9917587,"reputation":640,"user_id":7341878,"accept_rate":10,"display_name":"Prakash"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1691688895,"answer_count":0,"score":0,"last_activity_date":1691689111,"creation_date":1691563001,"question_id":76865162,"body_markdown":"I am trying to convert the Date received from Server to user specific date format (IST) and returning as Date datatype. Attached the sample code and result as below\r\n\r\n```\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.Date;\r\nimport java.util.TimeZone;\r\n\r\npublic class ServerToClientDateTime {\r\n\tpublic static void main(String[] args) {\r\n\t\ttry {\r\n\t\t\tString clientSpecificFormat = &quot;yyyy-MM-dd HH:mm:ss&quot;;\r\n\t\t\tString clientTimezone1 = &quot;America/New_York&quot;;\r\n\t\t\tString clientTimezone2 = &quot;Asia/Kolkata&quot;;\r\n\t\t\tDate date = new Date();\r\n\t\t\tSystem.out.println(new Date());\r\n\t\t\tSimpleDateFormat dateFormat = new g(clientSpecificFormat);\r\n\t\t\tTimeZone americaNewyork = TimeZone.getTimeZone(clientTimezone1);\r\n\t\t\tTimeZone asiaKolkata = TimeZone.getTimeZone(clientTimezone2);\r\n\t\t\tdateFormat.setTimeZone(americaNewyork);\r\n\r\n\t\t\tSystem.out.println(&quot;\\namerica/ newyork:&quot; + dateFormat.format(date));\r\n\t\t\tSystem.out.println(&quot;Date format :&quot; + dateFormat.parse(dateFormat.format(date)));\r\n\r\n\t\t\tdateFormat.setTimeZone(asiaKolkata);\r\n\t\t\tSystem.out.println(&quot;\\nAsia/ Kolkata:&quot; + dateFormat.format(date));\r\n\t\t\tSystem.out.println(&quot;Date format :&quot; + dateFormat.parse(dateFormat.format(date)));\r\n\t\t} catch (Exception exp) {\r\n\t\t\tSystem.out.println(exp);\r\n\t\t}\r\n\t}\r\n\t\r\n}\r\n```\r\n\r\nResult for the Program as \r\n```\r\nWed Aug 09 11:57:46 IST 2023\r\n\r\namerica/ newyork:2023-08-09 02:27:46\r\nDate format :Wed Aug 09 11:57:46 IST 2023\r\n\r\nAsia/ Kolkata:2023-08-09 11:57:46\r\nDate format :Wed Aug 09 11:57:46 IST 2023\r\n```\r\n\r\nwhy **America/New_York** return same as GMT after parsing, how to get the expected IST date format.\r\n\r\nThanks","title":"Converting Server GMT date and time to User specified date and time zone with specified format, returning with Date datatype","body":"<p>I am trying to convert the Date received from Server to user specific date format (IST) and returning as Date datatype. Attached the sample code and result as below</p>\n<pre><code>import java.text.SimpleDateFormat;\nimport java.util.Date;\nimport java.util.TimeZone;\n\npublic class ServerToClientDateTime {\n    public static void main(String[] args) {\n        try {\n            String clientSpecificFormat = &quot;yyyy-MM-dd HH:mm:ss&quot;;\n            String clientTimezone1 = &quot;America/New_York&quot;;\n            String clientTimezone2 = &quot;Asia/Kolkata&quot;;\n            Date date = new Date();\n            System.out.println(new Date());\n            SimpleDateFormat dateFormat = new g(clientSpecificFormat);\n            TimeZone americaNewyork = TimeZone.getTimeZone(clientTimezone1);\n            TimeZone asiaKolkata = TimeZone.getTimeZone(clientTimezone2);\n            dateFormat.setTimeZone(americaNewyork);\n\n            System.out.println(&quot;\\namerica/ newyork:&quot; + dateFormat.format(date));\n            System.out.println(&quot;Date format :&quot; + dateFormat.parse(dateFormat.format(date)));\n\n            dateFormat.setTimeZone(asiaKolkata);\n            System.out.println(&quot;\\nAsia/ Kolkata:&quot; + dateFormat.format(date));\n            System.out.println(&quot;Date format :&quot; + dateFormat.parse(dateFormat.format(date)));\n        } catch (Exception exp) {\n            System.out.println(exp);\n        }\n    }\n    \n}\n</code></pre>\n<p>Result for the Program as</p>\n<pre><code>Wed Aug 09 11:57:46 IST 2023\n\namerica/ newyork:2023-08-09 02:27:46\nDate format :Wed Aug 09 11:57:46 IST 2023\n\nAsia/ Kolkata:2023-08-09 11:57:46\nDate format :Wed Aug 09 11:57:46 IST 2023\n</code></pre>\n<p>why <strong>America/New_York</strong> return same as GMT after parsing, how to get the expected IST date format.</p>\n<p>Thanks</p>\n"},{"tags":["java","exception","intellij-idea","spring-boot"],"comments":[{"owner":{"account_id":322284,"reputation":16565,"user_id":641627,"display_name":"alexbt"},"score":0,"creation_date":1471791139,"post_id":39064537,"comment_id":65479595,"body_markdown":"can you show your pom.xml ?","body":"can you show your pom.xml ?"}],"answers":[{"comments":[{"owner":{"account_id":1113149,"reputation":2249,"user_id":1103179,"accept_rate":33,"display_name":"saeedj"},"score":4,"creation_date":1471819087,"post_id":39068186,"comment_id":65487365,"body_markdown":"Thank you so much. That was exactly my problem. I changed &quot;spring-boot-starter-tomcat&quot; dependency scope to compile and it was run properly.","body":"Thank you so much. That was exactly my problem. I changed &quot;spring-boot-starter-tomcat&quot; dependency scope to compile and it was run properly."},{"owner":{"account_id":1414723,"reputation":1607,"user_id":1340601,"accept_rate":83,"display_name":"Oskar"},"score":9,"creation_date":1524120551,"post_id":39068186,"comment_id":86844348,"body_markdown":"They have added a checkbox in the Application Run Configuration to &quot;Include dependencies with &#39;Provided&#39; scope&quot;","body":"They have added a checkbox in the Application Run Configuration to &quot;Include dependencies with &#39;Provided&#39; scope&quot;"},{"owner":{"account_id":926610,"reputation":3521,"user_id":957286,"display_name":"Ena"},"score":0,"creation_date":1524211700,"post_id":39068186,"comment_id":86889432,"body_markdown":"@Giorgio can you tell me in which version of IntelliJ you see the option?","body":"@Giorgio can you tell me in which version of IntelliJ you see the option?"},{"owner":{"account_id":1414723,"reputation":1607,"user_id":1340601,"accept_rate":83,"display_name":"Oskar"},"score":0,"creation_date":1524460161,"post_id":39068186,"comment_id":86963353,"body_markdown":"@Ena I am using:\nIntelliJ IDEA 2018.1.1 (Community Edition)\nBuild #IC-181.4445.78, built on April 10, 2018\nJRE: 1.8.0_152-release-1136-b27 x86_64\nJVM: OpenJDK 64-Bit Server VM by JetBrains s.r.o\nmacOS 10.13.4","body":"@Ena I am using: IntelliJ IDEA 2018.1.1 (Community Edition) Build #IC-181.4445.78, built on April 10, 2018 JRE: 1.8.0_152-release-1136-b27 x86_64 JVM: OpenJDK 64-Bit Server VM by JetBrains s.r.o macOS 10.13.4"},{"owner":{"account_id":7940179,"reputation":303,"user_id":5994546,"display_name":"serdarsen"},"score":0,"creation_date":1592729394,"post_id":39068186,"comment_id":110523906,"body_markdown":"Thank you this also solved my problem on Ubuntu 20.04, IntelliJ IDEA 2020.2 EAP (Community Edition)\nBuild #IC-202.5792.28, built on June 18, 2020\nRuntime version: 11.0.7+10-b944.12 amd64\nVM: OpenJDK 64-Bit Server VM by JetBrains s.r.o.\nLinux 5.4.0-37-generic\nGC: ParNew, ConcurrentMarkSweep\nMemory: 725M\nCores: 8\nNon-Bundled Plugins: com.intellij.plugins.watcher\nCurrent Desktop: ubuntu:GNOME","body":"Thank you this also solved my problem on Ubuntu 20.04, IntelliJ IDEA 2020.2 EAP (Community Edition) Build #IC-202.5792.28, built on June 18, 2020 Runtime version: 11.0.7+10-b944.12 amd64 VM: OpenJDK 64-Bit Server VM by JetBrains s.r.o. Linux 5.4.0-37-generic GC: ParNew, ConcurrentMarkSweep Memory: 725M Cores: 8 Non-Bundled Plugins: com.intellij.plugins.watcher Current Desktop: ubuntu:GNOME"},{"owner":{"account_id":3533661,"reputation":80,"user_id":2952510,"display_name":"Goldman7911"},"score":0,"creation_date":1637331136,"post_id":39068186,"comment_id":123804759,"body_markdown":"Thanks solved my problem in Windows 21H1 and IntelliJ build 2021.2.3 (CE) &amp; OpenJDK 64-Bit Server VM Temurin-11.0.12+7","body":"Thanks solved my problem in Windows 21H1 and IntelliJ build 2021.2.3 (CE) &amp; OpenJDK 64-Bit Server VM Temurin-11.0.12+7"},{"owner":{"account_id":17302935,"reputation":169,"user_id":12532291,"display_name":"Vignesh Ravichandran"},"score":0,"creation_date":1659540591,"post_id":39068186,"comment_id":129319749,"body_markdown":"Thank you so much., It solved my problem, Had a confusion why my code runs in STS and fails in Intellij IDEA","body":"Thank you so much., It solved my problem, Had a confusion why my code runs in STS and fails in Intellij IDEA"}],"tags":[],"owner":{"account_id":304234,"reputation":32207,"user_id":613628,"accept_rate":100,"display_name":"Stephane Nicoll"},"comment_count":7,"down_vote_count":0,"up_vote_count":29,"is_accepted":true,"score":29,"last_activity_date":1564503328,"creation_date":1471808317,"answer_id":39068186,"question_id":39064537,"body_markdown":"I am guessing you have a `war` packaging project with Maven and you&#39;ve flagged your servlet engine (tomcat) as provided. \r\n\r\nUnfortunately, IntellIJ IDEA does not [add `provided` dependencies in the runtime classpath](https://youtrack.jetbrains.com/issue/IDEA-107048), that&#39;s why your project does not work when you run it from the IDE.\r\n\r\n**UPDATE 7/30/2019**\r\n\r\nAs per Giorgio:\r\n\r\n&gt; They have added a checkbox in the Application Run Configuration to\r\n&gt; &quot;Include dependencies with &#39;Provided&#39; scope&quot;","title":"Unable to start spring-boot application in IntelliJ Idea","body":"<p>I am guessing you have a <code>war</code> packaging project with Maven and you've flagged your servlet engine (tomcat) as provided. </p>\n\n<p>Unfortunately, IntellIJ IDEA does not <a href=\"https://youtrack.jetbrains.com/issue/IDEA-107048\" rel=\"noreferrer\">add <code>provided</code> dependencies in the runtime classpath</a>, that's why your project does not work when you run it from the IDE.</p>\n\n<p><strong>UPDATE 7/30/2019</strong></p>\n\n<p>As per Giorgio:</p>\n\n<blockquote>\n  <p>They have added a checkbox in the Application Run Configuration to\n  \"Include dependencies with 'Provided' scope\"</p>\n</blockquote>\n"}],"owner":{"account_id":1113149,"reputation":2249,"user_id":1103179,"accept_rate":33,"display_name":"saeedj"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26160,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"accepted_answer_id":39068186,"answer_count":1,"score":16,"last_activity_date":1691688969,"creation_date":1471784862,"question_id":39064537,"body_markdown":"**Overview**\r\n\r\nI can run the application by using maven plugin of spring-boot but not run it with the IDE. The following lines give some detail about my program.\r\n\r\nThe application class is as follows: \r\n\r\n    package com.blss.retailServices.dataExportRouter;\r\n    \r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.EnableAutoConfiguration;\r\n    import org.springframework.boot.autoconfigure.velocity.VelocityAutoConfiguration;\r\n    import org.springframework.context.annotation.ComponentScan;\r\n    import org.springframework.context.annotation.Configuration;\r\n    \r\n    @Configuration\r\n    @ComponentScan\r\n    @EnableAutoConfiguration(exclude = { VelocityAutoConfiguration.class })\r\n    public class DataExportRouterApplication {\r\n        public static void main(String[] args) throws Exception {\r\n            SpringApplication.run(DataExportRouterApplication.class, args);\r\n        }\r\n    }\r\n\r\nThe exception stack trace is as follows: \r\n\r\n    org.springframework.context.ApplicationContextException: Unable to start embedded container; nested exception is org.springframework.context.ApplicationContextException: Unable to start EmbeddedWebApplicationContext due to missing EmbeddedServletContainerFactory bean.\r\n    \tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.onRefresh(EmbeddedWebApplicationContext.java:133) ~[spring-boot-1.3.3.RELEASE.jar:1.3.3.RELEASE]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:532) ~[spring-context-4.2.5.RELEASE.jar:4.2.5.RELEASE]\r\n    \tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:118) ~[spring-boot-1.3.3.RELEASE.jar:1.3.3.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:766) [spring-boot-1.3.3.RELEASE.jar:1.3.3.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.createAndRefreshContext(SpringApplication.java:361) [spring-boot-1.3.3.RELEASE.jar:1.3.3.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:307) [spring-boot-1.3.3.RELEASE.jar:1.3.3.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1191) [spring-boot-1.3.3.RELEASE.jar:1.3.3.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1180) [spring-boot-1.3.3.RELEASE.jar:1.3.3.RELEASE]\r\n    \tat com.blss.retailServices.dataExportRouter.DataExportRouterApplication.main(DataExportRouterApplication.java:14) [classes/:na]\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_74]\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_74]\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_74]\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_74]\r\n    \tat com.intellij.rt.execution.application.AppMain.main(AppMain.java:147) [idea_rt.jar:na]\r\n    Caused by: org.springframework.context.ApplicationContextException: Unable to start EmbeddedWebApplicationContext due to missing EmbeddedServletContainerFactory bean.\r\n    \tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.getEmbeddedServletContainerFactory(EmbeddedWebApplicationContext.java:185) ~[spring-boot-1.3.3.RELEASE.jar:1.3.3.RELEASE]\r\n    \tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.createEmbeddedServletContainer(EmbeddedWebApplicationContext.java:158) ~[spring-boot-1.3.3.RELEASE.jar:1.3.3.RELEASE]\r\n    \tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.onRefresh(EmbeddedWebApplicationContext.java:130) ~[spring-boot-1.3.3.RELEASE.jar:1.3.3.RELEASE]\r\n    \t... 13 common frames omitted\r\n\r\nI used @SpringbootApplication but to no avail. \r\n\r\n**Question**\r\n\r\nSo I would appreciate it if anyone could help me solve this issue.","title":"Unable to start spring-boot application in IntelliJ Idea","body":"<p><strong>Overview</strong></p>\n\n<p>I can run the application by using maven plugin of spring-boot but not run it with the IDE. The following lines give some detail about my program.</p>\n\n<p>The application class is as follows: </p>\n\n<pre><code>package com.blss.retailServices.dataExportRouter;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.EnableAutoConfiguration;\nimport org.springframework.boot.autoconfigure.velocity.VelocityAutoConfiguration;\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.context.annotation.Configuration;\n\n@Configuration\n@ComponentScan\n@EnableAutoConfiguration(exclude = { VelocityAutoConfiguration.class })\npublic class DataExportRouterApplication {\n    public static void main(String[] args) throws Exception {\n        SpringApplication.run(DataExportRouterApplication.class, args);\n    }\n}\n</code></pre>\n\n<p>The exception stack trace is as follows: </p>\n\n<pre><code>org.springframework.context.ApplicationContextException: Unable to start embedded container; nested exception is org.springframework.context.ApplicationContextException: Unable to start EmbeddedWebApplicationContext due to missing EmbeddedServletContainerFactory bean.\n    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.onRefresh(EmbeddedWebApplicationContext.java:133) ~[spring-boot-1.3.3.RELEASE.jar:1.3.3.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:532) ~[spring-context-4.2.5.RELEASE.jar:4.2.5.RELEASE]\n    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:118) ~[spring-boot-1.3.3.RELEASE.jar:1.3.3.RELEASE]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:766) [spring-boot-1.3.3.RELEASE.jar:1.3.3.RELEASE]\n    at org.springframework.boot.SpringApplication.createAndRefreshContext(SpringApplication.java:361) [spring-boot-1.3.3.RELEASE.jar:1.3.3.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:307) [spring-boot-1.3.3.RELEASE.jar:1.3.3.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1191) [spring-boot-1.3.3.RELEASE.jar:1.3.3.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1180) [spring-boot-1.3.3.RELEASE.jar:1.3.3.RELEASE]\n    at com.blss.retailServices.dataExportRouter.DataExportRouterApplication.main(DataExportRouterApplication.java:14) [classes/:na]\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_74]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_74]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_74]\n    at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_74]\n    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:147) [idea_rt.jar:na]\nCaused by: org.springframework.context.ApplicationContextException: Unable to start EmbeddedWebApplicationContext due to missing EmbeddedServletContainerFactory bean.\n    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.getEmbeddedServletContainerFactory(EmbeddedWebApplicationContext.java:185) ~[spring-boot-1.3.3.RELEASE.jar:1.3.3.RELEASE]\n    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.createEmbeddedServletContainer(EmbeddedWebApplicationContext.java:158) ~[spring-boot-1.3.3.RELEASE.jar:1.3.3.RELEASE]\n    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.onRefresh(EmbeddedWebApplicationContext.java:130) ~[spring-boot-1.3.3.RELEASE.jar:1.3.3.RELEASE]\n    ... 13 common frames omitted\n</code></pre>\n\n<p>I used @SpringbootApplication but to no avail. </p>\n\n<p><strong>Question</strong></p>\n\n<p>So I would appreciate it if anyone could help me solve this issue.</p>\n"},{"tags":["java","mysql","spring-boot","spring-data-jpa"],"comments":[{"owner":{"account_id":4688171,"reputation":11056,"user_id":3795036,"accept_rate":88,"display_name":"K.Nicholas"},"score":0,"creation_date":1691688259,"post_id":76877981,"comment_id":135528668,"body_markdown":"You cannot do joins with projections.","body":"You cannot do joins with projections."},{"owner":{"account_id":4479383,"reputation":525,"user_id":3643590,"display_name":"Pervez"},"score":0,"creation_date":1691690697,"post_id":76877981,"comment_id":135529173,"body_markdown":"Joins with projections is possible. If I will use left join or other joins. Only join fetch creates problem","body":"Joins with projections is possible. If I will use left join or other joins. Only join fetch creates problem"},{"owner":{"account_id":17705436,"reputation":731,"user_id":12854146,"display_name":"tremendous7"},"score":0,"creation_date":1691804821,"post_id":76877981,"comment_id":135545338,"body_markdown":"hello! join fetch fetches the right association of the join. in your case the semantic exception is raised because the return type does not need to fetch the association because your query does not return the association. if the return type contains the association, join fetch will raise no semantic exception. if the return type does not contain the association that was join fetched, than a semantic exception is thrown.","body":"hello! join fetch fetches the right association of the join. in your case the semantic exception is raised because the return type does not need to fetch the association because your query does not return the association. if the return type contains the association, join fetch will raise no semantic exception. if the return type does not contain the association that was join fetched, than a semantic exception is thrown."}],"owner":{"account_id":4479383,"reputation":525,"user_id":3643590,"display_name":"Pervez"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691687836,"creation_date":1691687836,"question_id":76877981,"body_markdown":"In my JPA application, I encountered an error when attempting to use a **`join fetch`** clause within a select query. The error message I received was as follows:\r\n\r\n\r\n`Caused by: java.lang.IllegalArgumentException: org.hibernate.query.SemanticException: query specified join fetching, but the owner of the fetched association was not present in the select list [SqmListJoin(com.knitkota.jpademo.entity.UserEntity(u).addressEntities(a))]`\r\n\r\n\r\nInterestingly, I noticed that the **`join fetch`** operation worked successfully when used without the select statement.\r\n\r\nIn the provided repository, particularly in the **`ServiceClass.java`** file, you can observe two methods implemented in the **`UserRepository.java`** class. The method **`userRepository.findAllJoinFetch();`** executes without any issues. However, the method **`userRepository.findAllJoinFetchDto();`** triggers the error mentioned above.\r\n\r\nI would greatly appreciate your guidance in comprehending the underlying problem related to the **`join fetch`** operation.\r\n\r\nThank you for your assistance in clarifying this matter.\r\n\r\nGit repository: [https://github.com/pervez8ktt/SpringBootJpaDemo](https://github.com/pervez8ktt/SpringBootJpaDemo)\r\n","title":"Problem with Join fetch in Spring boot JPA","body":"<p>In my JPA application, I encountered an error when attempting to use a <strong><code>join fetch</code></strong> clause within a select query. The error message I received was as follows:</p>\n<p><code>Caused by: java.lang.IllegalArgumentException: org.hibernate.query.SemanticException: query specified join fetching, but the owner of the fetched association was not present in the select list [SqmListJoin(com.knitkota.jpademo.entity.UserEntity(u).addressEntities(a))]</code></p>\n<p>Interestingly, I noticed that the <strong><code>join fetch</code></strong> operation worked successfully when used without the select statement.</p>\n<p>In the provided repository, particularly in the <strong><code>ServiceClass.java</code></strong> file, you can observe two methods implemented in the <strong><code>UserRepository.java</code></strong> class. The method <strong><code>userRepository.findAllJoinFetch();</code></strong> executes without any issues. However, the method <strong><code>userRepository.findAllJoinFetchDto();</code></strong> triggers the error mentioned above.</p>\n<p>I would greatly appreciate your guidance in comprehending the underlying problem related to the <strong><code>join fetch</code></strong> operation.</p>\n<p>Thank you for your assistance in clarifying this matter.</p>\n<p>Git repository: <a href=\"https://github.com/pervez8ktt/SpringBootJpaDemo\" rel=\"nofollow noreferrer\">https://github.com/pervez8ktt/SpringBootJpaDemo</a></p>\n"},{"tags":["java","spring-mvc","spring-data","customization","spring-data-rest"],"answers":[{"comments":[{"owner":{"account_id":5519628,"reputation":437,"user_id":4383061,"accept_rate":20,"display_name":"Mr2dishes"},"score":0,"creation_date":1501260644,"post_id":45244179,"comment_id":77718787,"body_markdown":"Thanks for your answer but i need &quot;technical&quot; api description. I need to parse attribute to get objet description. Not really need human description like in asciidoctor (spring rest docs)","body":"Thanks for your answer but i need &quot;technical&quot; api description. I need to parse attribute to get objet description. Not really need human description like in asciidoctor (spring rest docs)"}],"tags":[],"owner":{"account_id":7137213,"reputation":92,"user_id":5456355,"display_name":"Sonka"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1500660719,"creation_date":1500660719,"answer_id":45244179,"question_id":44804766,"body_markdown":"Unfortunately, you cannot add anything to alps, you can only add customs links to your API. If you what go white good documentation for your API which is mixing Spring MVC and Spring data rest, it is better to choose another way of doing this. For example, you can use [Spring rest docs][1]\r\n\r\n\r\n  [1]: http://docs.spring.io/autorepo/docs/spring-restdocs/1.1.0.BUILD-SNAPSHOT/reference/html5/","title":"Customize alps generation in Spring Data Rest","body":"<p>Unfortunately, you cannot add anything to alps, you can only add customs links to your API. If you what go white good documentation for your API which is mixing Spring MVC and Spring data rest, it is better to choose another way of doing this. For example, you can use <a href=\"http://docs.spring.io/autorepo/docs/spring-restdocs/1.1.0.BUILD-SNAPSHOT/reference/html5/\" rel=\"nofollow noreferrer\">Spring rest docs</a></p>\n"}],"owner":{"account_id":5519628,"reputation":437,"user_id":4383061,"accept_rate":20,"display_name":"Mr2dishes"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1107,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1691687470,"creation_date":1498658603,"question_id":44804766,"body_markdown":"I am mixing SDR (Spring Data Rest) with custom controller like define in:\r\n\r\nhttps://docs.spring.io/spring-data/rest/docs/current/reference/html/#customizing-sdr.overriding-sdr-response-handlers \r\n\r\nWith this to keep HATEOAS link between SDR and custom Controller: \r\n\r\nhttps://docs.spring.io/spring-data/rest/docs/current/reference/html/#_the_resourceprocessor_interface\r\n\r\nEverything works find except for handling ALPS metadata. There an automatic ALPS generator in Spring data Rest http://localhost:8080/profile and I don&#39;t know how to include custom metadata which is not handle by SDR\r\n\r\nUPDATE:\r\nplease see author response in the comments of this article: https://spring.io/blog/2014/07/14/spring-data-rest-now-comes-with-alps-metadata but I don&#39;t know how add ALPS through Spring Hateoas...\r\n\r\nsimilar SO post: https://stackoverflow.com/questions/25469923/alps-metadata-for-all-spring-mvc-controller\r\n\r\nHelp!","title":"Customize alps generation in Spring Data Rest","body":"<p>I am mixing SDR (Spring Data Rest) with custom controller like define in:</p>\n<p><a href=\"https://docs.spring.io/spring-data/rest/docs/current/reference/html/#customizing-sdr.overriding-sdr-response-handlers\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-data/rest/docs/current/reference/html/#customizing-sdr.overriding-sdr-response-handlers</a></p>\n<p>With this to keep HATEOAS link between SDR and custom Controller:</p>\n<p><a href=\"https://docs.spring.io/spring-data/rest/docs/current/reference/html/#_the_resourceprocessor_interface\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-data/rest/docs/current/reference/html/#_the_resourceprocessor_interface</a></p>\n<p>Everything works find except for handling ALPS metadata. There an automatic ALPS generator in Spring data Rest http://localhost:8080/profile and I don't know how to include custom metadata which is not handle by SDR</p>\n<p>UPDATE:\nplease see author response in the comments of this article: <a href=\"https://spring.io/blog/2014/07/14/spring-data-rest-now-comes-with-alps-metadata\" rel=\"nofollow noreferrer\">https://spring.io/blog/2014/07/14/spring-data-rest-now-comes-with-alps-metadata</a> but I don't know how add ALPS through Spring Hateoas...</p>\n<p>similar SO post: <a href=\"https://stackoverflow.com/questions/25469923/alps-metadata-for-all-spring-mvc-controller\">ALPS metadata for all Spring-MVC Controller</a></p>\n<p>Help!</p>\n"},{"tags":["java","jpa"],"comments":[{"owner":{"account_id":16177910,"reputation":1,"user_id":11680108,"display_name":"Vinamer"},"score":0,"creation_date":1594993753,"post_id":62955304,"comment_id":111329596,"body_markdown":"I think a similar question is mentioned here.\nhttps://stackoverflow.com/questions/13700565/jpa-query-getresultlist-use-in-a-generic-way","body":"I think a similar question is mentioned here. <a href=\"https://stackoverflow.com/questions/13700565/jpa-query-getresultlist-use-in-a-generic-way\" title=\"jpa query getresultlist use in a generic way\">stackoverflow.com/questions/13700565/&hellip;</a>"},{"owner":{"account_id":1223835,"reputation":75878,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1594993854,"post_id":62955304,"comment_id":111329648,"body_markdown":"So use JPA as it&#39;s intended and use a JPQL query of `SELECT new ResultClass...`","body":"So use JPA as it&#39;s intended and use a JPQL query of <code>SELECT new ResultClass...</code>"},{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1594993912,"post_id":62955304,"comment_id":111329681,"body_markdown":"@chrylis-cautiouslyoptimistic- You can&#39;t use constructor expression with native queries","body":"@chrylis-cautiouslyoptimistic- You can&#39;t use constructor expression with native queries"},{"owner":{"account_id":1223835,"reputation":75878,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1594993962,"post_id":62955304,"comment_id":111329704,"body_markdown":"@SimonMartinelli I meant to say &quot;JPQL query&quot; (updated), but that was the exact point of &quot;JPQL&quot;.","body":"@SimonMartinelli I meant to say &quot;JPQL query&quot; (updated), but that was the exact point of &quot;JPQL&quot;."}],"answers":[{"comments":[{"owner":{"account_id":19052452,"reputation":29,"user_id":13910319,"display_name":"raj dhanani"},"score":0,"creation_date":1595047959,"post_id":62955432,"comment_id":111346243,"body_markdown":"qlrm works for me, but just a small issue. it does not perform wide conversion (type casting for Byte to Integer) ... It works by creating special constructor for this. thanks though...","body":"qlrm works for me, but just a small issue. it does not perform wide conversion (type casting for Byte to Integer) ... It works by creating special constructor for this. thanks though..."},{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1595149972,"post_id":62955432,"comment_id":111369509,"body_markdown":"QLRM is very basic. I decided not to implement conversion because of the other options","body":"QLRM is very basic. I decided not to implement conversion because of the other options"},{"owner":{"account_id":19052452,"reputation":29,"user_id":13910319,"display_name":"raj dhanani"},"score":0,"creation_date":1597644393,"post_id":62955432,"comment_id":112189032,"body_markdown":"how can I do the one to many mapping using QLRM, is it possible? and is there some sort of documentation for this?","body":"how can I do the one to many mapping using QLRM, is it possible? and is there some sort of documentation for this?"},{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1597644683,"post_id":62955432,"comment_id":112189108,"body_markdown":"No that&#39;s not possible. Because the goal of QLRM is to map a result of a query to a DTO. And the result of a query is always a flat ResultSet","body":"No that&#39;s not possible. Because the goal of QLRM is to map a result of a query to a DTO. And the result of a query is always a flat ResultSet"},{"owner":{"account_id":19052452,"reputation":29,"user_id":13910319,"display_name":"raj dhanani"},"score":0,"creation_date":1598088477,"post_id":62955432,"comment_id":112348192,"body_markdown":"so what do you suggest in this case what&#39;s the alternative?","body":"so what do you suggest in this case what&#39;s the alternative?"}],"tags":[],"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1594993875,"creation_date":1594993875,"answer_id":62955432,"question_id":62955304,"body_markdown":"Either use ConstructorResult (JPA) or ResultTransformer (Hibernate) or QLRM.\r\n\r\nConstructorResult is JPA standard and you have to create a Annotation with the column mapping:\r\n\r\n    @SqlResultSetMapping(\r\n        name = &quot;BookValueMapping&quot;,\r\n        classes = @ConstructorResult(\r\n                targetClass = BookValue.class,\r\n                columns = {\r\n                    @ColumnResult(name = &quot;id&quot;, type = Long.class),\r\n                    @ColumnResult(name = &quot;title&quot;),\r\n                    @ColumnResult(name = &quot;version&quot;, type = Long.class),\r\n                    @ColumnResult(name = &quot;authorName&quot;)}))\r\n\r\nFrom https://thorben-janssen.com/result-set-mapping-constructor-result-mappings/\r\n\r\nAnd ResultTransformer is Hibernate proprietary and you must use the Hibernate session:\r\n\r\n    List&lt;PersonSummaryDTO&gt; dtos = session.createNativeQuery(\r\n    \t&quot;SELECT p.id as \\&quot;id\\&quot;, p.name as \\&quot;name\\&quot; &quot; +\r\n    \t&quot;FROM Person p&quot;)\r\n    .setResultTransformer( Transformers.aliasToBean( PersonSummaryDTO.class ) )\r\n    .list();\r\n\r\nFrom https://docs.jboss.org/hibernate/orm/5.4/userguide/html_single/Hibernate_User_Guide.html#sql-dto-query\r\n\r\nOr QLRM is a library that maps the result to a DTO using the constructor:\r\n\r\n    JpaResultMapper jpaResultMapper = new JpaResultMapper();\r\n    \r\n    Query q = em.createNativeQuery(&quot;SELECT ID, NAME FROM EMPLOYEE&quot;);\r\n    List&lt;EmployeeTO&gt; list = jpaResultMapper.list(q, EmployeeTO.class);\r\n\r\nhttps://github.com/72services/qlrm","title":"How to convert Array of Object to Custom Class Object (that is array to object)?","body":"<p>Either use ConstructorResult (JPA) or ResultTransformer (Hibernate) or QLRM.</p>\n<p>ConstructorResult is JPA standard and you have to create a Annotation with the column mapping:</p>\n<pre><code>@SqlResultSetMapping(\n    name = &quot;BookValueMapping&quot;,\n    classes = @ConstructorResult(\n            targetClass = BookValue.class,\n            columns = {\n                @ColumnResult(name = &quot;id&quot;, type = Long.class),\n                @ColumnResult(name = &quot;title&quot;),\n                @ColumnResult(name = &quot;version&quot;, type = Long.class),\n                @ColumnResult(name = &quot;authorName&quot;)}))\n</code></pre>\n<p>From <a href=\"https://thorben-janssen.com/result-set-mapping-constructor-result-mappings/\" rel=\"nofollow noreferrer\">https://thorben-janssen.com/result-set-mapping-constructor-result-mappings/</a></p>\n<p>And ResultTransformer is Hibernate proprietary and you must use the Hibernate session:</p>\n<pre><code>List&lt;PersonSummaryDTO&gt; dtos = session.createNativeQuery(\n    &quot;SELECT p.id as \\&quot;id\\&quot;, p.name as \\&quot;name\\&quot; &quot; +\n    &quot;FROM Person p&quot;)\n.setResultTransformer( Transformers.aliasToBean( PersonSummaryDTO.class ) )\n.list();\n</code></pre>\n<p>From <a href=\"https://docs.jboss.org/hibernate/orm/5.4/userguide/html_single/Hibernate_User_Guide.html#sql-dto-query\" rel=\"nofollow noreferrer\">https://docs.jboss.org/hibernate/orm/5.4/userguide/html_single/Hibernate_User_Guide.html#sql-dto-query</a></p>\n<p>Or QLRM is a library that maps the result to a DTO using the constructor:</p>\n<pre><code>JpaResultMapper jpaResultMapper = new JpaResultMapper();\n\nQuery q = em.createNativeQuery(&quot;SELECT ID, NAME FROM EMPLOYEE&quot;);\nList&lt;EmployeeTO&gt; list = jpaResultMapper.list(q, EmployeeTO.class);\n</code></pre>\n<p><a href=\"https://github.com/72services/qlrm\" rel=\"nofollow noreferrer\">https://github.com/72services/qlrm</a></p>\n"},{"comments":[{"owner":{"account_id":19052452,"reputation":29,"user_id":13910319,"display_name":"raj dhanani"},"score":0,"creation_date":1594995490,"post_id":62955591,"comment_id":111330484,"body_markdown":"Can named query be dynamic? I need to you different joins based on stored procedures as well is it possible to do so?","body":"Can named query be dynamic? I need to you different joins based on stored procedures as well is it possible to do so?"},{"owner":{"account_id":2052160,"reputation":2825,"user_id":1830916,"display_name":"locus2k"},"score":0,"creation_date":1594995585,"post_id":62955591,"comment_id":111330527,"body_markdown":"Named queries cannot be dynamic but you can craft your JPQL query and execute that. See my edit. Also can check out the link https://www.objectdb.com/java/jpa/query/api to help you further","body":"Named queries cannot be dynamic but you can craft your JPQL query and execute that. See my edit. Also can check out the link <a href=\"https://www.objectdb.com/java/jpa/query/api\" rel=\"nofollow noreferrer\">objectdb.com/java/jpa/query/api</a> to help you further"}],"tags":[],"owner":{"account_id":2052160,"reputation":2825,"user_id":1830916,"display_name":"locus2k"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1594995789,"creation_date":1594994410,"answer_id":62955591,"question_id":62955304,"body_markdown":"Id suggest creating a POJO that can be mapped to your table you&#39;re retrieving values from:\r\n\r\n    @Entity\r\n    @Table(name = &quot;MyTable&quot;)\r\n    @NamedQueries({\r\n      @NamedQuery(name = &quot;MyTable.findAll&quot;, query = &quot;SELECT m FROM MyTable m&quot;)})\r\n    public class MyTable implements Serializable {\r\n    \r\n      private static final long serialVersionUID = 1L;\r\n      @Id\r\n      @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n      @Basic(optional = false)\r\n      @Column(name = &quot;id&quot;)\r\n      private Integer id;\r\n      \r\n      @Basic(optional = false)\r\n      @Column(name = &quot;name&quot;)\r\n      private String name;\r\n      \r\n      @Basic(optional = false)\r\n      @Column(name = &quot;display_name&quot;)\r\n      private String displayName;\r\n      \r\n    \r\n      public MyTable() {\r\n      }\r\n    \r\n      public MyTable(Integer id) {\r\n        this.id = id;\r\n      }\r\n    \r\n      public MyTable(Integer id, String name, String displayName) {\r\n        this.id = id;\r\n        this.name = name;\r\n        this.displayName = displayName;\r\n      }\r\n    \r\n      public Integer getId() {\r\n        return id;\r\n      }\r\n    \r\n      public void setId(Integer id) {\r\n        this.id = id;\r\n      }\r\n    \r\n      public String getName() {\r\n        return name;\r\n      }\r\n    \r\n      public void setName(String name) {\r\n        this.name = name;\r\n      }\r\n    \r\n      public String getDisplayName() {\r\n        return displayName;\r\n      }\r\n    \r\n      public void setDisplayName(String displayName) {\r\n        this.displayName = displayName;\r\n      }\r\n    \r\n    \r\n      @Override\r\n      public boolean equals(Object object) {\r\n        // TODO: Warning - this method won&#39;t work in the case the id fields are not set\r\n        if (!(object instanceof MyTable)) {\r\n          return false;\r\n        }\r\n        MyTable other = (MyTable ) object;\r\n        if ((this.id == null &amp;&amp; other.id != null) || (this.id != null &amp;&amp; !this.id.equals(other.id))) {\r\n          return false;\r\n        }\r\n        return true;\r\n      }\r\n    \r\n      @Override\r\n      public String toString() {\r\n        return &quot;MyTable[ id=&quot; + id + &quot; ]&quot;;\r\n      }\r\n      \r\n    }\r\n\r\nObviously fill in the fields as you need with the corresponding database datatype repersentation.\r\n\r\nNotice how i have `NamedQueries`  we can now take advantage of those named queries to do our fetches\r\n\r\n    TypedQuery&lt;MyTable&gt; query = entityManager.createNamedQuery(&quot;MyTable.findAll&quot;, MyTable.class);\r\n    List&lt;MyTable&gt; results = query.getResultList();\r\n\r\nthis will do all the casting and conversions for you. You can add all the named queries you want. \r\n\r\nhttps://www.objectdb.com/java/jpa/query/named\r\n\r\n**UPDATE**\r\n\r\nIf you need to dynamically create a query you can do the following:\r\n\r\n    String query = &quot;SELECT m FROM MyTable m Where m.id =:id and m.name=:name&quot;; \r\n    ///modify the query as needed based off of other conditions)\r\n    \r\n    TypedQuery&lt;MyTable &gt; query = em.createQuery(query, MyTable .class);\r\n    query.setParameter(&quot;id&quot;, id);\r\n    query.setParameter(&quot;name&quot;, name);\r\n\r\n    List&lt;MyTable&gt; results = query.getResultList();\r\n\r\nhttps://www.objectdb.com/java/jpa/query/api","title":"How to convert Array of Object to Custom Class Object (that is array to object)?","body":"<p>Id suggest creating a POJO that can be mapped to your table you're retrieving values from:</p>\n<pre><code>@Entity\n@Table(name = &quot;MyTable&quot;)\n@NamedQueries({\n  @NamedQuery(name = &quot;MyTable.findAll&quot;, query = &quot;SELECT m FROM MyTable m&quot;)})\npublic class MyTable implements Serializable {\n\n  private static final long serialVersionUID = 1L;\n  @Id\n  @GeneratedValue(strategy = GenerationType.IDENTITY)\n  @Basic(optional = false)\n  @Column(name = &quot;id&quot;)\n  private Integer id;\n  \n  @Basic(optional = false)\n  @Column(name = &quot;name&quot;)\n  private String name;\n  \n  @Basic(optional = false)\n  @Column(name = &quot;display_name&quot;)\n  private String displayName;\n  \n\n  public MyTable() {\n  }\n\n  public MyTable(Integer id) {\n    this.id = id;\n  }\n\n  public MyTable(Integer id, String name, String displayName) {\n    this.id = id;\n    this.name = name;\n    this.displayName = displayName;\n  }\n\n  public Integer getId() {\n    return id;\n  }\n\n  public void setId(Integer id) {\n    this.id = id;\n  }\n\n  public String getName() {\n    return name;\n  }\n\n  public void setName(String name) {\n    this.name = name;\n  }\n\n  public String getDisplayName() {\n    return displayName;\n  }\n\n  public void setDisplayName(String displayName) {\n    this.displayName = displayName;\n  }\n\n\n  @Override\n  public boolean equals(Object object) {\n    // TODO: Warning - this method won't work in the case the id fields are not set\n    if (!(object instanceof MyTable)) {\n      return false;\n    }\n    MyTable other = (MyTable ) object;\n    if ((this.id == null &amp;&amp; other.id != null) || (this.id != null &amp;&amp; !this.id.equals(other.id))) {\n      return false;\n    }\n    return true;\n  }\n\n  @Override\n  public String toString() {\n    return &quot;MyTable[ id=&quot; + id + &quot; ]&quot;;\n  }\n  \n}\n</code></pre>\n<p>Obviously fill in the fields as you need with the corresponding database datatype repersentation.</p>\n<p>Notice how i have <code>NamedQueries</code>  we can now take advantage of those named queries to do our fetches</p>\n<pre><code>TypedQuery&lt;MyTable&gt; query = entityManager.createNamedQuery(&quot;MyTable.findAll&quot;, MyTable.class);\nList&lt;MyTable&gt; results = query.getResultList();\n</code></pre>\n<p>this will do all the casting and conversions for you. You can add all the named queries you want.</p>\n<p><a href=\"https://www.objectdb.com/java/jpa/query/named\" rel=\"nofollow noreferrer\">https://www.objectdb.com/java/jpa/query/named</a></p>\n<p><strong>UPDATE</strong></p>\n<p>If you need to dynamically create a query you can do the following:</p>\n<pre><code>String query = &quot;SELECT m FROM MyTable m Where m.id =:id and m.name=:name&quot;; \n///modify the query as needed based off of other conditions)\n\nTypedQuery&lt;MyTable &gt; query = em.createQuery(query, MyTable .class);\nquery.setParameter(&quot;id&quot;, id);\nquery.setParameter(&quot;name&quot;, name);\n\nList&lt;MyTable&gt; results = query.getResultList();\n</code></pre>\n<p><a href=\"https://www.objectdb.com/java/jpa/query/api\" rel=\"nofollow noreferrer\">https://www.objectdb.com/java/jpa/query/api</a></p>\n"},{"tags":[],"owner":{"account_id":14365136,"reputation":890,"user_id":10376405,"display_name":"Paul"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1594995086,"creation_date":1594995086,"answer_id":62955803,"question_id":62955304,"body_markdown":"if you have set up a DatabaseConfig like this [tutorial][1] then you can simply create a class that you annotate with ```@Entity``` and ```@Table(name = &quot;yourDatabaseTableName&quot;)``` Don&#39;t forget to define: \r\n```\r\n    @Id\r\n    @Column(name = &quot;ID&quot;)\r\n    private Long id;\r\n```\r\nand annotate all your colums with ```@Column(name = &quot;databaseColumnName&quot;)```\r\nThen, create an interface that you annotate with ```@Repository``` which ```extends JpaRepository&lt;YourEntityClass, Long&gt;```where the Long-parameter is the type you&#39;ve given to the id-variable of your Entity. \r\n\r\nNow you can use simple JPA-methodqueries like ```findAll()``` or you can create your own JPQL-queries like:\r\n```\r\n@Query(&quot;SELECT e FROM Entity e &quot;\r\n        + &quot;WHERE e.id = :id&quot;)\r\nOptional&lt;Entity&gt; findById(@Param(&quot;id&quot;) Long id);\r\n```\r\nIt&#39;s even possible to use NativeQueries in this way: \r\n```\r\n@Query(value = &quot;SELECT e FROM Entity e &quot;\r\n        + &quot;WHERE e.id = :id&quot;,\r\n        nativeQuery = true)\r\nOptional&lt;Entity&gt; findById(@Param(&quot;id&quot;) Long id);\r\n```\r\n\r\n  [1]: https://www.baeldung.com/the-persistence-layer-with-spring-and-jpa","title":"How to convert Array of Object to Custom Class Object (that is array to object)?","body":"<p>if you have set up a DatabaseConfig like this <a href=\"https://www.baeldung.com/the-persistence-layer-with-spring-and-jpa\" rel=\"nofollow noreferrer\">tutorial</a> then you can simply create a class that you annotate with <code>@Entity</code> and <code>@Table(name = &quot;yourDatabaseTableName&quot;)</code> Don't forget to define:</p>\n<pre><code>    @Id\n    @Column(name = &quot;ID&quot;)\n    private Long id;\n</code></pre>\n<p>and annotate all your colums with <code>@Column(name = &quot;databaseColumnName&quot;)</code>\nThen, create an interface that you annotate with <code>@Repository</code> which <code>extends JpaRepository&lt;YourEntityClass, Long&gt;</code>where the Long-parameter is the type you've given to the id-variable of your Entity.</p>\n<p>Now you can use simple JPA-methodqueries like <code>findAll()</code> or you can create your own JPQL-queries like:</p>\n<pre><code>@Query(&quot;SELECT e FROM Entity e &quot;\n        + &quot;WHERE e.id = :id&quot;)\nOptional&lt;Entity&gt; findById(@Param(&quot;id&quot;) Long id);\n</code></pre>\n<p>It's even possible to use NativeQueries in this way:</p>\n<pre><code>@Query(value = &quot;SELECT e FROM Entity e &quot;\n        + &quot;WHERE e.id = :id&quot;,\n        nativeQuery = true)\nOptional&lt;Entity&gt; findById(@Param(&quot;id&quot;) Long id);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16523562,"reputation":9,"user_id":11939001,"display_name":"Harsh Sharma"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691687002,"creation_date":1691687002,"answer_id":76877895,"question_id":62955304,"body_markdown":"You can convert **Object[] array** results into Map of instances which will be key value pairs as columns and their subsequent values, by using the custom algorithm I built. And later on you can use the map instance to construct your custom bean via constructor or setters.\r\n\r\n    /**\r\n     * method to convert and transform an array of objects into a list of map instances, consisting columns as keys\r\n     * and their subsequent values\r\n     *\r\n     * @param arrays - a list of object type array instances, representing the values retrieved from a SQL query\r\n     * @param query  - a string value representing the SQL query which has retrieved the Object array values\r\n     *\r\n     *               &lt;p&gt; Note : The String Query must satisfy the below statements&lt;/p&gt;\r\n     *               &lt;p&gt; 1. Query must not contain any of \\n or \\t in it.&lt;/p&gt;\r\n     *               &lt;p&gt; 2. Query must not contain asterick, instead should contain all the concrete column names.&lt;/p&gt;\r\n     *               &lt;p&gt; 3. All the FROM keyword inside the query should be either fully capitalised or fully non capitalised i.e. FROM or from. &lt;/p&gt;\r\n     * @return\r\n     * @author - Harsh Sharma\r\n     */\r\n    public List&lt;Map&lt;String, Object&gt;&gt; convertQueryResultIntoMap(List&lt;Object[]&gt; arrays, String query) {\r\n        // base cases\r\n        if (CollectionUtils.isEmpty(arrays) || query == null || query.equals(&quot;&quot;)) return null;\r\n        int lastFROMClauseIndex = -1;\r\n        char[] arr = query.toCharArray();\r\n        Stack&lt;Character&gt; stack = new Stack&lt;&gt;();\r\n        for (int i = arr.length - 1; i &gt; -1; i--) {\r\n            if (i - 3 &gt; -1 &amp;&amp; ((arr[i] == &#39;M&#39; &amp;&amp; arr[i - 1] == &#39;O&#39; &amp;&amp; arr[i - 2] == &#39;R&#39; &amp;&amp; arr[i - 3] == &#39;F&#39;)\r\n                    || (arr[i] == &#39;m&#39; &amp;&amp; arr[i - 1] == &#39;o&#39; &amp;&amp; arr[i - 2] == &#39;r&#39; &amp;&amp; arr[i - 3] == &#39;f&#39;))) {\r\n                lastFROMClauseIndex = i - 3;\r\n                if (stack.isEmpty()) break;\r\n            } else {\r\n                if (arr[i] == &#39;)&#39;) stack.push(arr[i]);\r\n                else if (arr[i] == &#39;(&#39;) stack.pop();\r\n            }\r\n        }\r\n\r\n        List&lt;String&gt; columnNames = new ArrayList&lt;&gt;();\r\n        List&lt;Map&lt;String, Object&gt;&gt; mapList = new ArrayList&lt;&gt;();\r\n        for (int i = 0; i &lt; arr.length; i++) {\r\n            StringBuilder columnName = new StringBuilder(&quot;&quot;);\r\n            if (i &lt; arr.length - 1 &amp;&amp; arr[i] == &#39;,&#39;) {\r\n                int anyAlphabetEncounteredIndex = -1;\r\n                int lastAlphabetEncounteredIndex = -1;\r\n                int j = i - 1;\r\n                for (; j &gt; -1; j--) {\r\n                    if (anyAlphabetEncounteredIndex != -1 &amp;&amp; (arr[j] == &#39; &#39; || arr[j] == &#39;.&#39;)) break;\r\n                    if (arr[j] != &#39; &#39;) {\r\n                        if (lastAlphabetEncounteredIndex == -1) lastAlphabetEncounteredIndex = j;\r\n                        anyAlphabetEncounteredIndex = j;\r\n                    }\r\n                }\r\n                for (; anyAlphabetEncounteredIndex &lt;= lastAlphabetEncounteredIndex; anyAlphabetEncounteredIndex++) {\r\n                    columnName.append(arr[anyAlphabetEncounteredIndex]);\r\n                }\r\n                if (!columnName.toString().equals(&quot;&quot;)) {\r\n                    columnNames.add(columnName.toString());\r\n                }\r\n            } else if (i == lastFROMClauseIndex) {\r\n                int anyAlphabetEncounteredIndex = -1;\r\n                int lastAlphabetEncounteredIndex = -1;\r\n                int j = i - 1;\r\n                for (; j &gt; -1; j--) {\r\n                    if (anyAlphabetEncounteredIndex != -1 &amp;&amp; (arr[j] == &#39; &#39; || arr[j] == &#39;.&#39;)) break;\r\n                    if (arr[j] != &#39; &#39; &amp;&amp; arr[j] != &#39;.&#39;) {\r\n                        if (lastAlphabetEncounteredIndex == -1) lastAlphabetEncounteredIndex = j;\r\n                        anyAlphabetEncounteredIndex = j;\r\n                    }\r\n                }\r\n                for (; anyAlphabetEncounteredIndex &lt;= lastAlphabetEncounteredIndex; anyAlphabetEncounteredIndex++) {\r\n                    columnName.append(arr[anyAlphabetEncounteredIndex]);\r\n                }\r\n                if (!columnName.toString().equals(&quot;&quot;)) {\r\n                    columnNames.add(columnName.toString());\r\n                }\r\n                break;\r\n            }\r\n        }\r\n\r\n        if (!CollectionUtils.isEmpty(arrays) &amp;&amp; !CollectionUtils.isEmpty(columnNames)) {\r\n            int columnSize = columnNames.size();\r\n            for (Object[] dbData : arrays) {\r\n                Map&lt;String, Object&gt; map = new LinkedHashMap&lt;&gt;();\r\n                for (int i = 0; i &lt; columnSize; i++) {\r\n                    map.put(columnNames.get(i), dbData[i]);\r\n                }\r\n                mapList.add(map);\r\n            }\r\n        }\r\n        return mapList;\r\n    }","title":"How to convert Array of Object to Custom Class Object (that is array to object)?","body":"<p>You can convert <strong>Object[] array</strong> results into Map of instances which will be key value pairs as columns and their subsequent values, by using the custom algorithm I built. And later on you can use the map instance to construct your custom bean via constructor or setters.</p>\n<pre><code>/**\n * method to convert and transform an array of objects into a list of map instances, consisting columns as keys\n * and their subsequent values\n *\n * @param arrays - a list of object type array instances, representing the values retrieved from a SQL query\n * @param query  - a string value representing the SQL query which has retrieved the Object array values\n *\n *               &lt;p&gt; Note : The String Query must satisfy the below statements&lt;/p&gt;\n *               &lt;p&gt; 1. Query must not contain any of \\n or \\t in it.&lt;/p&gt;\n *               &lt;p&gt; 2. Query must not contain asterick, instead should contain all the concrete column names.&lt;/p&gt;\n *               &lt;p&gt; 3. All the FROM keyword inside the query should be either fully capitalised or fully non capitalised i.e. FROM or from. &lt;/p&gt;\n * @return\n * @author - Harsh Sharma\n */\npublic List&lt;Map&lt;String, Object&gt;&gt; convertQueryResultIntoMap(List&lt;Object[]&gt; arrays, String query) {\n    // base cases\n    if (CollectionUtils.isEmpty(arrays) || query == null || query.equals(&quot;&quot;)) return null;\n    int lastFROMClauseIndex = -1;\n    char[] arr = query.toCharArray();\n    Stack&lt;Character&gt; stack = new Stack&lt;&gt;();\n    for (int i = arr.length - 1; i &gt; -1; i--) {\n        if (i - 3 &gt; -1 &amp;&amp; ((arr[i] == 'M' &amp;&amp; arr[i - 1] == 'O' &amp;&amp; arr[i - 2] == 'R' &amp;&amp; arr[i - 3] == 'F')\n                || (arr[i] == 'm' &amp;&amp; arr[i - 1] == 'o' &amp;&amp; arr[i - 2] == 'r' &amp;&amp; arr[i - 3] == 'f'))) {\n            lastFROMClauseIndex = i - 3;\n            if (stack.isEmpty()) break;\n        } else {\n            if (arr[i] == ')') stack.push(arr[i]);\n            else if (arr[i] == '(') stack.pop();\n        }\n    }\n\n    List&lt;String&gt; columnNames = new ArrayList&lt;&gt;();\n    List&lt;Map&lt;String, Object&gt;&gt; mapList = new ArrayList&lt;&gt;();\n    for (int i = 0; i &lt; arr.length; i++) {\n        StringBuilder columnName = new StringBuilder(&quot;&quot;);\n        if (i &lt; arr.length - 1 &amp;&amp; arr[i] == ',') {\n            int anyAlphabetEncounteredIndex = -1;\n            int lastAlphabetEncounteredIndex = -1;\n            int j = i - 1;\n            for (; j &gt; -1; j--) {\n                if (anyAlphabetEncounteredIndex != -1 &amp;&amp; (arr[j] == ' ' || arr[j] == '.')) break;\n                if (arr[j] != ' ') {\n                    if (lastAlphabetEncounteredIndex == -1) lastAlphabetEncounteredIndex = j;\n                    anyAlphabetEncounteredIndex = j;\n                }\n            }\n            for (; anyAlphabetEncounteredIndex &lt;= lastAlphabetEncounteredIndex; anyAlphabetEncounteredIndex++) {\n                columnName.append(arr[anyAlphabetEncounteredIndex]);\n            }\n            if (!columnName.toString().equals(&quot;&quot;)) {\n                columnNames.add(columnName.toString());\n            }\n        } else if (i == lastFROMClauseIndex) {\n            int anyAlphabetEncounteredIndex = -1;\n            int lastAlphabetEncounteredIndex = -1;\n            int j = i - 1;\n            for (; j &gt; -1; j--) {\n                if (anyAlphabetEncounteredIndex != -1 &amp;&amp; (arr[j] == ' ' || arr[j] == '.')) break;\n                if (arr[j] != ' ' &amp;&amp; arr[j] != '.') {\n                    if (lastAlphabetEncounteredIndex == -1) lastAlphabetEncounteredIndex = j;\n                    anyAlphabetEncounteredIndex = j;\n                }\n            }\n            for (; anyAlphabetEncounteredIndex &lt;= lastAlphabetEncounteredIndex; anyAlphabetEncounteredIndex++) {\n                columnName.append(arr[anyAlphabetEncounteredIndex]);\n            }\n            if (!columnName.toString().equals(&quot;&quot;)) {\n                columnNames.add(columnName.toString());\n            }\n            break;\n        }\n    }\n\n    if (!CollectionUtils.isEmpty(arrays) &amp;&amp; !CollectionUtils.isEmpty(columnNames)) {\n        int columnSize = columnNames.size();\n        for (Object[] dbData : arrays) {\n            Map&lt;String, Object&gt; map = new LinkedHashMap&lt;&gt;();\n            for (int i = 0; i &lt; columnSize; i++) {\n                map.put(columnNames.get(i), dbData[i]);\n            }\n            mapList.add(map);\n        }\n    }\n    return mapList;\n}\n</code></pre>\n"}],"owner":{"account_id":19052452,"reputation":29,"user_id":13910319,"display_name":"raj dhanani"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2726,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":62955432,"answer_count":4,"score":0,"last_activity_date":1691687002,"creation_date":1594993502,"question_id":62955304,"body_markdown":"I am working on a spring boot project and using JPA for querying the database with Entity manager.\r\n\r\ni.e. \r\n\r\n```\r\nQuery query = entityManager.createNativeQuery(&quot;SELECT * FROM TABLE_NAME WHERE ID = 1&quot;); // SUPPOSE\r\n\r\nList&lt;Object[]&gt; result = (List&lt;Object[]&gt;) query.getResultList();\r\n```\r\nnow after this what I want to achieve here is creating an Object of that corresponding result.\r\n\r\n```\r\ni.e.  ResultObject obj = (ResultObject) result.get(0); \r\n// here ResultObject is user defined.\r\n```\r\nbut this type of casting is not possible directly.\r\n\r\nso what I am currently doing is:\r\n```\r\nResultObject obj = new ResultObject(); \r\nobj.setArribute1((String) obj[0]);\r\nobj.setArribute2((Integer) obj[1]);\r\n...\r\n```\r\n**and on average i will be having 15 attributes per object. so its really tiresome...**\r\n\r\nI have tried using:\r\n```\r\nList&lt;ResultObject&gt; obj = (List&lt;ResultObject&gt;)query.getResultList();\r\n```\r\n**but doesn&#39;t work.**","title":"How to convert Array of Object to Custom Class Object (that is array to object)?","body":"<p>I am working on a spring boot project and using JPA for querying the database with Entity manager.</p>\n<p>i.e.</p>\n<pre><code>Query query = entityManager.createNativeQuery(&quot;SELECT * FROM TABLE_NAME WHERE ID = 1&quot;); // SUPPOSE\n\nList&lt;Object[]&gt; result = (List&lt;Object[]&gt;) query.getResultList();\n</code></pre>\n<p>now after this what I want to achieve here is creating an Object of that corresponding result.</p>\n<pre><code>i.e.  ResultObject obj = (ResultObject) result.get(0); \n// here ResultObject is user defined.\n</code></pre>\n<p>but this type of casting is not possible directly.</p>\n<p>so what I am currently doing is:</p>\n<pre><code>ResultObject obj = new ResultObject(); \nobj.setArribute1((String) obj[0]);\nobj.setArribute2((Integer) obj[1]);\n...\n</code></pre>\n<p><strong>and on average i will be having 15 attributes per object. so its really tiresome...</strong></p>\n<p>I have tried using:</p>\n<pre><code>List&lt;ResultObject&gt; obj = (List&lt;ResultObject&gt;)query.getResultList();\n</code></pre>\n<p><strong>but doesn't work.</strong></p>\n"},{"tags":["java","glassfish"],"answers":[{"comments":[{"owner":{"account_id":1109305,"reputation":667,"user_id":1100074,"accept_rate":78,"display_name":"Wannabe Coder"},"score":0,"creation_date":1689111617,"post_id":76592666,"comment_id":135166565,"body_markdown":"Thanks for the reply but it did not work. The assignment is over and I&#39;ve moved onto another assignment. I was able to use an IntelliJ to complete the assignment.","body":"Thanks for the reply but it did not work. The assignment is over and I&#39;ve moved onto another assignment. I was able to use an IntelliJ to complete the assignment."}],"tags":[],"owner":{"account_id":411863,"reputation":7400,"user_id":784594,"display_name":"OndroMih"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688167051,"creation_date":1688167051,"answer_id":76592666,"question_id":76548036,"body_markdown":"Try replacing all those “javax” with “jakarta” in lines that start with “import”. For example:\r\n\r\n    import jakarta.servlet.ServletException;\r\n\r\nThe latest GlassFish changed the packages to be imported to start with jakarta.","title":"Setup Class Path Glassfish Server","body":"<p>Try replacing all those “javax” with “jakarta” in lines that start with “import”. For example:</p>\n<pre><code>import jakarta.servlet.ServletException;\n</code></pre>\n<p>The latest GlassFish changed the packages to be imported to start with jakarta.</p>\n"},{"tags":[],"owner":{"account_id":28682652,"reputation":47,"user_id":21963506,"display_name":"Farhood Naqizadeh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691686931,"creation_date":1691686931,"answer_id":76877883,"question_id":76548036,"body_markdown":"Add this to pom file or if your not convert your project to maven do it and than add this\r\n```\r\n     &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\r\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;jakarta.platform&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jakarta.jakartaee-web-api&lt;/artifactId&gt;\r\n            &lt;version&gt;10.0.0&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n```\r\nor if you don&#39;t want to use jump to google and get jar file for maven jakarta.platform add to project build path.\r\nafter that you can use jakarta package that replaced with javax!\r\n","title":"Setup Class Path Glassfish Server","body":"<p>Add this to pom file or if your not convert your project to maven do it and than add this</p>\n<pre><code>     &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;jakarta.platform&lt;/groupId&gt;\n            &lt;artifactId&gt;jakarta.jakartaee-web-api&lt;/artifactId&gt;\n            &lt;version&gt;10.0.0&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n</code></pre>\n<p>or if you don't want to use jump to google and get jar file for maven jakarta.platform add to project build path.\nafter that you can use jakarta package that replaced with javax!</p>\n"}],"owner":{"account_id":1109305,"reputation":667,"user_id":1100074,"accept_rate":78,"display_name":"Wannabe Coder"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691686931,"creation_date":1687641721,"question_id":76548036,"body_markdown":"I&#39;m trying to get a school assignment to run. I&#39;ve never developed in Java and was given a java web application that I need to run and evaluate and then write test cases. I cannot even get the application to run. I started by installing Glassfish server, per instructions but cannot get any further from here. I&#39;ve included a screen shot of some of the errors. It seems to be related since those are web libraries. I don&#39;t know what libraries I&#39;m missing. \r\nI cannot figure out how to set up a server classpath and did not see anything that seemed to make sense...or I&#39;m searching for the wrong terms to find answer. Can someone please help?\r\n\r\n[![enter image description here][1]][1]\r\n\r\n**Error in output window when trying to build**\r\n\r\nThe Java EE server classpath is not correctly set up - server home directory is missing.\r\nEither open the project in the IDE and assign the server or setup the server classpath manually.\r\nFor example like this:\r\n   ant -Dj2ee.server.home=&lt;app_server_installation_directory&gt;\r\nBUILD FAILED (total time: 0 seconds)\r\n\r\n**My NetBeans version, including the output of installing Glassfish 7.**\r\n\r\nProduct Version: Apache NetBeans IDE 17\r\nJava: 11.0.16; Java HotSpot(TM) 64-Bit Server VM 11.0.16+11-LTS-199\r\nRuntime: Java(TM) SE Runtime Environment 11.0.16+11-LTS-199\r\n\r\n\r\nRunning the create-domain subcommand\r\nUsing port 4848 for Admin.\r\nUsing port 8080 for HTTP Instance.\r\nUsing default port 7676 for JMS.\r\nUsing default port 3700 for IIOP.\r\nUsing default port 8181 for HTTP_SSL.\r\nUsing default port 3820 for IIOP_SSL.\r\nUsing default port 3920 for IIOP_MUTUALAUTH.\r\nUsing default port 8686 for JMX_ADMIN.\r\nUsing default port 6666 for OSGI_SHELL.\r\nUsing default port 9009 for JAVA_DEBUGGER.\r\nUsing default port 4900 for Hazelcast DAS.\r\nUsing default port 5900 for Hazelcast Start.\r\nDistinguished Name of the self-signed X.509 Server Certificate is:\r\n[CN=MIkesLaptop.lan,OU=Payara,O=Payara Foundation,L=Great Malvern,ST=Worcestershire,C=UK]\r\nDistinguished Name of the self-signed X.509 Server Certificate is:\r\n[CN=MIkesLaptop.lan-instance,OU=Payara,O=Payara Foundation,L=Great Malvern,ST=Worcestershire,C=UK]\r\nDomain FlyDomain created.\r\nDomain FlyDomain admin port is 4848.\r\nDomain FlyDomain allows admin login as user &quot;admin&quot; with no password.\r\nCommand create-domain executed successfully.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/51XRj.png","title":"Setup Class Path Glassfish Server","body":"<p>I'm trying to get a school assignment to run. I've never developed in Java and was given a java web application that I need to run and evaluate and then write test cases. I cannot even get the application to run. I started by installing Glassfish server, per instructions but cannot get any further from here. I've included a screen shot of some of the errors. It seems to be related since those are web libraries. I don't know what libraries I'm missing.\nI cannot figure out how to set up a server classpath and did not see anything that seemed to make sense...or I'm searching for the wrong terms to find answer. Can someone please help?</p>\n<p><a href=\"https://i.stack.imgur.com/51XRj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/51XRj.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Error in output window when trying to build</strong></p>\n<p>The Java EE server classpath is not correctly set up - server home directory is missing.\nEither open the project in the IDE and assign the server or setup the server classpath manually.\nFor example like this:\nant -Dj2ee.server.home=&lt;app_server_installation_directory&gt;\nBUILD FAILED (total time: 0 seconds)</p>\n<p><strong>My NetBeans version, including the output of installing Glassfish 7.</strong></p>\n<p>Product Version: Apache NetBeans IDE 17\nJava: 11.0.16; Java HotSpot(TM) 64-Bit Server VM 11.0.16+11-LTS-199\nRuntime: Java(TM) SE Runtime Environment 11.0.16+11-LTS-199</p>\n<p>Running the create-domain subcommand\nUsing port 4848 for Admin.\nUsing port 8080 for HTTP Instance.\nUsing default port 7676 for JMS.\nUsing default port 3700 for IIOP.\nUsing default port 8181 for HTTP_SSL.\nUsing default port 3820 for IIOP_SSL.\nUsing default port 3920 for IIOP_MUTUALAUTH.\nUsing default port 8686 for JMX_ADMIN.\nUsing default port 6666 for OSGI_SHELL.\nUsing default port 9009 for JAVA_DEBUGGER.\nUsing default port 4900 for Hazelcast DAS.\nUsing default port 5900 for Hazelcast Start.\nDistinguished Name of the self-signed X.509 Server Certificate is:\n[CN=MIkesLaptop.lan,OU=Payara,O=Payara Foundation,L=Great Malvern,ST=Worcestershire,C=UK]\nDistinguished Name of the self-signed X.509 Server Certificate is:\n[CN=MIkesLaptop.lan-instance,OU=Payara,O=Payara Foundation,L=Great Malvern,ST=Worcestershire,C=UK]\nDomain FlyDomain created.\nDomain FlyDomain admin port is 4848.\nDomain FlyDomain allows admin login as user &quot;admin&quot; with no password.\nCommand create-domain executed successfully.</p>\n"},{"tags":["java","spring","oauth","spring-boot"],"comments":[{"owner":{"account_id":304234,"reputation":32207,"user_id":613628,"accept_rate":100,"display_name":"Stephane Nicoll"},"score":1,"creation_date":1463467296,"post_id":37264739,"comment_id":62063872,"body_markdown":"One thing you could do is define a bean of type `AuthoritiesExtractor` and do that check there (throwing an appropriate exception if the type of the email doesn&#39;t match","body":"One thing you could do is define a bean of type <code>AuthoritiesExtractor</code> and do that check there (throwing an appropriate exception if the type of the email doesn&#39;t match"}],"answers":[{"comments":[{"owner":{"account_id":49695,"reputation":620,"user_id":148088,"accept_rate":50,"display_name":"Fernando M. Pinheiro"},"score":0,"creation_date":1465497668,"post_id":37680108,"comment_id":62938849,"body_markdown":"this code ins&#39;t called in my login process. Maybe I have to configure something else?","body":"this code ins&#39;t called in my login process. Maybe I have to configure something else?"},{"owner":{"account_id":295505,"reputation":1024,"user_id":599958,"accept_rate":43,"display_name":"Juan Carlos Gonz&#225;lez"},"score":1,"creation_date":1465555001,"post_id":37680108,"comment_id":62961865,"body_markdown":"Hi Fernando. Have you defined a custom WebSecurityConfigurerAdapter and annotated it with EnableOAuth2Sso?. Please take a look at the examples available in the link I mentioned above.","body":"Hi Fernando. Have you defined a custom WebSecurityConfigurerAdapter and annotated it with EnableOAuth2Sso?. Please take a look at the examples available in the link I mentioned above."},{"owner":{"account_id":236233,"reputation":724,"user_id":503574,"display_name":"Joel"},"score":1,"creation_date":1520629988,"post_id":37680108,"comment_id":85409723,"body_markdown":"Hi @FernandoM.Pinheiro,  I know this thread is very old, but I&#39;m having the same issue.  Just wondered if you remember how you resolved it?\n\nI&#39;ve defined an AuthoritiesExtractor but it&#39;s not being picked up.","body":"Hi @FernandoM.Pinheiro,  I know this thread is very old, but I&#39;m having the same issue.  Just wondered if you remember how you resolved it?  I&#39;ve defined an AuthoritiesExtractor but it&#39;s not being picked up."},{"owner":{"account_id":236233,"reputation":724,"user_id":503574,"display_name":"Joel"},"score":0,"creation_date":1520782924,"post_id":37680108,"comment_id":85447099,"body_markdown":"Thank you @JuanCarlosGonz&#225;lez","body":"Thank you @JuanCarlosGonz&#225;lez"}],"tags":[],"owner":{"account_id":295505,"reputation":1024,"user_id":599958,"accept_rate":43,"display_name":"Juan Carlos Gonz&#225;lez"},"comment_count":4,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1551802466,"creation_date":1465304337,"answer_id":37680108,"question_id":37264739,"body_markdown":"According to St&#233;phane suggestion, I came to this [tutorial][1], and finally implemented this, which works for me with a Google+ profile:\r\n\r\n\r\n    @Configuration\r\n    @EnableOAuth2Sso\r\n    public class WebSecurityConfig extends WebSecurityConfigurerAdapter {\r\n    \r\n        private static final String GOOGLE_PLUS_DOMAIN_ATTRIBUTE = &quot;domain&quot;;\r\n        private static final String CSRF_COOKIE_NAME = &quot;XSRF-TOKEN&quot;;\r\n        private static final String CSRF_HEADER_NAME = &quot;X-XSRF-TOKEN&quot;;\r\n    \r\n        @Bean\r\n        public AuthoritiesExtractor authoritiesExtractor(\r\n                @Value(&quot;#{&#39;${security.allowed-domains}&#39;.split(&#39;,&#39;)}&quot;) final List&lt;String&gt; allowedDomains) {\r\n    \r\n            return new AuthoritiesExtractor() {\r\n                @Override\r\n                public List&lt;GrantedAuthority&gt; extractAuthorities(final Map&lt;String, Object&gt; map) {\r\n                    if (map != null &amp;&amp; map.containsKey(GOOGLE_PLUS_DOMAIN_ATTRIBUTE)) {\r\n                        final String domain = (String) map.get(GOOGLE_PLUS_DOMAIN_ATTRIBUTE);\r\n                        if (!allowedDomains.contains(domain)) {\r\n                            throw new BadCredentialsException(&quot;Not an allowed domain&quot;);\r\n                        }\r\n                        return AuthorityUtils.commaSeparatedStringToAuthorityList(&quot;ROLE_USER&quot;);\r\n                    }\r\n                    return null;\r\n                }\r\n            };\r\n        }\r\n    \r\n        @Override\r\n        protected void configure(final HttpSecurity http) throws Exception {\r\n            // @formatter:off\r\n            http.antMatcher(&quot;/**&quot;)\r\n            .authorizeRequests()\r\n            .antMatchers(&quot;/logout&quot;, &quot;/api/mappings/**&quot;, &quot;/public/**&quot;).permitAll()\r\n            .anyRequest().hasAuthority(&quot;ROLE_USER&quot;)\r\n            .and().logout().logoutUrl(&quot;/api/logout&quot;).logoutSuccessUrl(&quot;/logout&quot;)\r\n            .and().csrf().csrfTokenRepository(csrfTokenRepository()).ignoringAntMatchers(&quot;/api/mappings/**&quot;)\r\n            .and().addFilterAfter(csrfHeaderFilter(), CsrfFilter.class);\r\n            // @formatter:on\r\n        }\r\n    \r\n        private Filter csrfHeaderFilter() {\r\n            return new OncePerRequestFilter() {\r\n                @Override\r\n                protected void doFilterInternal(final HttpServletRequest request, final HttpServletResponse response,\r\n                        final FilterChain filterChain) throws ServletException, IOException {\r\n    \r\n                    final CsrfToken csrf = (CsrfToken) request.getAttribute(CsrfToken.class.getName());\r\n                    if (csrf != null) {\r\n                        Cookie cookie = WebUtils.getCookie(request, CSRF_COOKIE_NAME);\r\n                        final String token = csrf.getToken();\r\n                        if (cookie == null || token != null &amp;&amp; !token.equals(cookie.getValue())) {\r\n                            cookie = new Cookie(CSRF_COOKIE_NAME, token);\r\n                            cookie.setPath(&quot;/&quot;);\r\n                            response.addCookie(cookie);\r\n                        }\r\n                    }\r\n                    filterChain.doFilter(request, response);\r\n                }\r\n            };\r\n        }\r\n    \r\n        private CsrfTokenRepository csrfTokenRepository() {\r\n            final HttpSessionCsrfTokenRepository repository = new HttpSessionCsrfTokenRepository();\r\n            repository.setHeaderName(CSRF_HEADER_NAME);\r\n            return repository;\r\n        }\r\n    }\r\n\r\nMy application.yml file contains the following entries regarding oauth:\r\n\r\n    security:\r\n         oauth2:\r\n             client:\r\n                    access-token-uri: https://www.googleapis.com/oauth2/v3/token\r\n                    user-authorization-uri: https://accounts.google.com/o/oauth2/auth\r\n                    client-authentication-scheme: form\r\n                    scope: profile,email\r\n             resource:\r\n                    user-info-uri: https://www.googleapis.com/plus/v1/people/me\r\n                    prefer-token-info: false\r\n\r\nWhen working with a Google+ profile, the resource server response provided in the map, contains an entry for domain. I just compared this value with configured allowed domains.\r\n\r\nHope this helps.\r\n\r\n  [1]: https://spring.io/guides/tutorials/spring-boot-oauth2/\r\n\r\nUpdate: On March 7th 2019, Google is deprecating Google+ APIs. If you&#39;re like me, you&#39;ll have received an email from Google suggesting to update your software. In our case, the url https://www.googleapis.com/plus/v1/people/me, will be deprecated. So, I&#39;m posting here my updated configuration (build with Spring Boot 1.3.5).\r\n\r\n    security:\r\n     oauth2:\r\n         client:\r\n                clientId: *your client id from Google*\r\n                clientSecret: *your client secret from Google*                \r\n                accessTokenUri: https://www.googleapis.com/oauth2/v4/token\r\n                userAuthorizationUri: https://accounts.google.com/o/oauth2/v2/auth\r\n                clientAuthenticationScheme: form\r\n                scope: \r\n                  - email\r\n                  - profile                \r\n         resource:\r\n                userInfoUri: https://www.googleapis.com/oauth2/v3/userinfo\r\n                preferTokenInfo: false\r\n\r\n     # Comma-separated list of domains                \r\n     allowed-domains: *your allowed domains*\r\n\r\n\r\n\r\n\r\nPlease note that minor change must be done in you WebSecurityConfigurerAdapter as the attribute domain has changed its name. So you&#39;ll need to replace the line:\r\n\r\nprivate static final String GOOGLE_PLUS_DOMAIN_ATTRIBUTE = &quot;domain&quot;;\r\n\r\nwith\r\n\r\nprivate static final String HOSTED_DOMAIN_ATTRIBUTE = &quot;hd&quot;;\r\n\r\n","title":"How to restrict to a specific domain to login with Spring-Boot and OAuth2","body":"<p>According to Stéphane suggestion, I came to this <a href=\"https://spring.io/guides/tutorials/spring-boot-oauth2/\" rel=\"nofollow noreferrer\">tutorial</a>, and finally implemented this, which works for me with a Google+ profile:</p>\n\n<pre><code>@Configuration\n@EnableOAuth2Sso\npublic class WebSecurityConfig extends WebSecurityConfigurerAdapter {\n\n    private static final String GOOGLE_PLUS_DOMAIN_ATTRIBUTE = \"domain\";\n    private static final String CSRF_COOKIE_NAME = \"XSRF-TOKEN\";\n    private static final String CSRF_HEADER_NAME = \"X-XSRF-TOKEN\";\n\n    @Bean\n    public AuthoritiesExtractor authoritiesExtractor(\n            @Value(\"#{'${security.allowed-domains}'.split(',')}\") final List&lt;String&gt; allowedDomains) {\n\n        return new AuthoritiesExtractor() {\n            @Override\n            public List&lt;GrantedAuthority&gt; extractAuthorities(final Map&lt;String, Object&gt; map) {\n                if (map != null &amp;&amp; map.containsKey(GOOGLE_PLUS_DOMAIN_ATTRIBUTE)) {\n                    final String domain = (String) map.get(GOOGLE_PLUS_DOMAIN_ATTRIBUTE);\n                    if (!allowedDomains.contains(domain)) {\n                        throw new BadCredentialsException(\"Not an allowed domain\");\n                    }\n                    return AuthorityUtils.commaSeparatedStringToAuthorityList(\"ROLE_USER\");\n                }\n                return null;\n            }\n        };\n    }\n\n    @Override\n    protected void configure(final HttpSecurity http) throws Exception {\n        // @formatter:off\n        http.antMatcher(\"/**\")\n        .authorizeRequests()\n        .antMatchers(\"/logout\", \"/api/mappings/**\", \"/public/**\").permitAll()\n        .anyRequest().hasAuthority(\"ROLE_USER\")\n        .and().logout().logoutUrl(\"/api/logout\").logoutSuccessUrl(\"/logout\")\n        .and().csrf().csrfTokenRepository(csrfTokenRepository()).ignoringAntMatchers(\"/api/mappings/**\")\n        .and().addFilterAfter(csrfHeaderFilter(), CsrfFilter.class);\n        // @formatter:on\n    }\n\n    private Filter csrfHeaderFilter() {\n        return new OncePerRequestFilter() {\n            @Override\n            protected void doFilterInternal(final HttpServletRequest request, final HttpServletResponse response,\n                    final FilterChain filterChain) throws ServletException, IOException {\n\n                final CsrfToken csrf = (CsrfToken) request.getAttribute(CsrfToken.class.getName());\n                if (csrf != null) {\n                    Cookie cookie = WebUtils.getCookie(request, CSRF_COOKIE_NAME);\n                    final String token = csrf.getToken();\n                    if (cookie == null || token != null &amp;&amp; !token.equals(cookie.getValue())) {\n                        cookie = new Cookie(CSRF_COOKIE_NAME, token);\n                        cookie.setPath(\"/\");\n                        response.addCookie(cookie);\n                    }\n                }\n                filterChain.doFilter(request, response);\n            }\n        };\n    }\n\n    private CsrfTokenRepository csrfTokenRepository() {\n        final HttpSessionCsrfTokenRepository repository = new HttpSessionCsrfTokenRepository();\n        repository.setHeaderName(CSRF_HEADER_NAME);\n        return repository;\n    }\n}\n</code></pre>\n\n<p>My application.yml file contains the following entries regarding oauth:</p>\n\n<pre><code>security:\n     oauth2:\n         client:\n                access-token-uri: https://www.googleapis.com/oauth2/v3/token\n                user-authorization-uri: https://accounts.google.com/o/oauth2/auth\n                client-authentication-scheme: form\n                scope: profile,email\n         resource:\n                user-info-uri: https://www.googleapis.com/plus/v1/people/me\n                prefer-token-info: false\n</code></pre>\n\n<p>When working with a Google+ profile, the resource server response provided in the map, contains an entry for domain. I just compared this value with configured allowed domains.</p>\n\n<p>Hope this helps.</p>\n\n<p>Update: On March 7th 2019, Google is deprecating Google+ APIs. If you're like me, you'll have received an email from Google suggesting to update your software. In our case, the url <a href=\"https://www.googleapis.com/plus/v1/people/me\" rel=\"nofollow noreferrer\">https://www.googleapis.com/plus/v1/people/me</a>, will be deprecated. So, I'm posting here my updated configuration (build with Spring Boot 1.3.5).</p>\n\n<pre><code>security:\n oauth2:\n     client:\n            clientId: *your client id from Google*\n            clientSecret: *your client secret from Google*                \n            accessTokenUri: https://www.googleapis.com/oauth2/v4/token\n            userAuthorizationUri: https://accounts.google.com/o/oauth2/v2/auth\n            clientAuthenticationScheme: form\n            scope: \n              - email\n              - profile                \n     resource:\n            userInfoUri: https://www.googleapis.com/oauth2/v3/userinfo\n            preferTokenInfo: false\n\n # Comma-separated list of domains                \n allowed-domains: *your allowed domains*\n</code></pre>\n\n<p>Please note that minor change must be done in you WebSecurityConfigurerAdapter as the attribute domain has changed its name. So you'll need to replace the line:</p>\n\n<p>private static final String GOOGLE_PLUS_DOMAIN_ATTRIBUTE = \"domain\";</p>\n\n<p>with</p>\n\n<p>private static final String HOSTED_DOMAIN_ATTRIBUTE = \"hd\";</p>\n"},{"comments":[{"owner":{"account_id":49695,"reputation":620,"user_id":148088,"accept_rate":50,"display_name":"Fernando M. Pinheiro"},"score":0,"creation_date":1624628583,"post_id":66885508,"comment_id":120417968,"body_markdown":"Interesting! I do not have the code to evaluate your solution, but it seems to be a more cleaner (and I hope, correct) way to do that! Thanks for sharing.","body":"Interesting! I do not have the code to evaluate your solution, but it seems to be a more cleaner (and I hope, correct) way to do that! Thanks for sharing."}],"tags":[],"owner":{"account_id":1070157,"reputation":33,"user_id":1069641,"display_name":"neee"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1617184682,"creation_date":1617184682,"answer_id":66885508,"question_id":37264739,"body_markdown":"I found new solution! You should choose one: **non-reactive** or **reactive** case it&#39;s important don&#39;t forget:\r\n\r\n**non-reactive:**\r\n\r\n    @Bean\r\n    fun oauth2UserService(rest: WebClient): OAuth2UserService&lt;OAuth2UserRequest, OAuth2User&gt; {\r\n        val delegate = DefaultOAuth2UserService()\r\n        return OAuth2UserService&lt;OAuth2UserRequest, OAuth2User&gt; { request -&gt;\r\n            val user = delegate.loadUser(request)\r\n            val hd = user.getAttribute&lt;String&gt;(&quot;hd&quot;)\r\n            if (hd == &quot;your.domain.name&quot;)\r\n                user\r\n            else\r\n                throw OAuth2AuthenticationException(OAuth2Error(&quot;invalid_token&quot;, &quot;Not in the Team&quot;, &quot;&quot;))\r\n        }\r\n    }\r\n\r\n**reactive:**\r\n\r\n    @Bean\r\n    fun oauth2UserService(rest: WebClient): ReactiveOAuth2UserService&lt;OAuth2UserRequest, OAuth2User&gt; {\r\n        val delegate = DefaultOAuth2UserService()\r\n        return ReactiveOAuth2UserService&lt;OAuth2UserRequest, OAuth2User&gt; { request -&gt;\r\n            val user = delegate.loadUser(request)\r\n            val hd = user.getAttribute&lt;String&gt;(&quot;hd&quot;)\r\n            if (hd == &quot;your.domain.name&quot;)\r\n                Mono.just(user)\r\n            else\r\n                throw OAuth2AuthenticationException(OAuth2Error(&quot;invalid_token&quot;, &quot;Not in the Team&quot;, &quot;&quot;))\r\n        }\r\n    }","title":"How to restrict to a specific domain to login with Spring-Boot and OAuth2","body":"<p>I found new solution! You should choose one: <strong>non-reactive</strong> or <strong>reactive</strong> case it's important don't forget:</p>\n<p><strong>non-reactive:</strong></p>\n<pre><code>@Bean\nfun oauth2UserService(rest: WebClient): OAuth2UserService&lt;OAuth2UserRequest, OAuth2User&gt; {\n    val delegate = DefaultOAuth2UserService()\n    return OAuth2UserService&lt;OAuth2UserRequest, OAuth2User&gt; { request -&gt;\n        val user = delegate.loadUser(request)\n        val hd = user.getAttribute&lt;String&gt;(&quot;hd&quot;)\n        if (hd == &quot;your.domain.name&quot;)\n            user\n        else\n            throw OAuth2AuthenticationException(OAuth2Error(&quot;invalid_token&quot;, &quot;Not in the Team&quot;, &quot;&quot;))\n    }\n}\n</code></pre>\n<p><strong>reactive:</strong></p>\n<pre><code>@Bean\nfun oauth2UserService(rest: WebClient): ReactiveOAuth2UserService&lt;OAuth2UserRequest, OAuth2User&gt; {\n    val delegate = DefaultOAuth2UserService()\n    return ReactiveOAuth2UserService&lt;OAuth2UserRequest, OAuth2User&gt; { request -&gt;\n        val user = delegate.loadUser(request)\n        val hd = user.getAttribute&lt;String&gt;(&quot;hd&quot;)\n        if (hd == &quot;your.domain.name&quot;)\n            Mono.just(user)\n        else\n            throw OAuth2AuthenticationException(OAuth2Error(&quot;invalid_token&quot;, &quot;Not in the Team&quot;, &quot;&quot;))\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":49695,"reputation":620,"user_id":148088,"accept_rate":50,"display_name":"Fernando M. Pinheiro"},"score":0,"creation_date":1692904041,"post_id":76877850,"comment_id":135691366,"body_markdown":"Interesting! I cannot validate right now, but it seems cleaner :-)","body":"Interesting! I cannot validate right now, but it seems cleaner :-)"}],"tags":[],"owner":{"account_id":29583,"reputation":7140,"user_id":80075,"accept_rate":100,"display_name":"Tony BenBrahim"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691686681,"creation_date":1691686681,"answer_id":76877850,"question_id":37264739,"body_markdown":"Just add `?hd=acme.com` to your authorization uri, and Google will restrict the domain for you, and users will only see one domain, not their personal accounts.","title":"How to restrict to a specific domain to login with Spring-Boot and OAuth2","body":"<p>Just add <code>?hd=acme.com</code> to your authorization uri, and Google will restrict the domain for you, and users will only see one domain, not their personal accounts.</p>\n"}],"owner":{"account_id":49695,"reputation":620,"user_id":148088,"accept_rate":50,"display_name":"Fernando M. Pinheiro"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6596,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":37680108,"answer_count":3,"score":0,"last_activity_date":1691686681,"creation_date":1463441046,"question_id":37264739,"body_markdown":"I have successfully done a OAuth2 login with spring boot and Google, but I&#39;d like to restrict logins to a specific domain (we&#39;re using Google Apps for Work).\r\n\r\nI think that I should handle by extending class OAuth2ClientAuthenticationProcessingFilter (as specified [in this thread][1]), but I&#39;m not sure how to do that.\r\n\r\nBasically, I&#39;d like to use Google OAuth 2.0 as the identity provider, but only company users (@company.com) must be accepted.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/34855468/spring-boot-and-oauth2-social-login-unable-to-get-refreshtoken","title":"How to restrict to a specific domain to login with Spring-Boot and OAuth2","body":"<p>I have successfully done a OAuth2 login with spring boot and Google, but I'd like to restrict logins to a specific domain (we're using Google Apps for Work).</p>\n\n<p>I think that I should handle by extending class OAuth2ClientAuthenticationProcessingFilter (as specified <a href=\"https://stackoverflow.com/questions/34855468/spring-boot-and-oauth2-social-login-unable-to-get-refreshtoken\">in this thread</a>), but I'm not sure how to do that.</p>\n\n<p>Basically, I'd like to use Google OAuth 2.0 as the identity provider, but only company users (@company.com) must be accepted.</p>\n"},{"tags":["java","multipartform-data","mockserver"],"answers":[{"comments":[{"owner":{"account_id":26031204,"reputation":1,"user_id":19737403,"display_name":"Parimala Kolisetty"},"score":0,"creation_date":1661232372,"post_id":73325460,"comment_id":129715821,"body_markdown":"do you have any other suggestions for mocking multipart formbody","body":"do you have any other suggestions for mocking multipart formbody"}],"tags":[],"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661261933,"creation_date":1660243139,"answer_id":73325460,"question_id":73310417,"body_markdown":"Try this regex:\r\n``` lang-none\r\n^(--[\\w]+)$\\n(?:^Content-Disposition: form-data; name=\\&quot;\\w+?\\&quot;$\\n^Content-Type: text/plain;charset=UTF-8$\\n^Content-Length: \\d+? [\\w,]+ \\1(?:-- $|$\\n))+\r\n```\r\n\r\nIn your version I didn&#39;t see that you are escaping the double quotes `&quot;` to a `\\&quot;`, wondering if the code compiles at all.\r\nAlso the `[\\n.\\w\\W]` seems to be a bit too generic.\r\n\r\nThe above version is also generic, but in a different way:\r\n\r\n`(--[\\w]+)` - this is a group that expects the &lt;del&gt;border&lt;/del&gt; _boundary_ string. In the rest of the expression the match it is &quot;back referenced&quot; as `\\1`, this means only requests with the same border over the whole request are accepted.\r\n\r\nA longer part is following for one of the parts between the &lt;del&gt;borders&lt;/del&gt; _boundaries_. Please note that the expression does not care which parts are actually contained in the request. If you need that, let me know then I can update the expression to accept just the given parts.\r\n\r\nUpdate to state it clearly: You can put any string between the boundaries that you want, any headers etc. But you have to use regular expression syntax there when it comes to line breaks and other stuff that is interpreted special in a regex, like `\\`, `&quot;`, `.` and many others. Escape them!\r\n\r\nSo to sum it up: you put the regex for the boundary `(--[\\w]+)` only for the first occurence and put a back reference to that (`\\1`) everywhere after where you expect _the same_ boundary (the same characters, not just the same pattern). Inbetween you can place any stuff you want, just take care to escape it properly for a regex. In Java you can do this (just for the &quot;inner&quot; part) with `java.util.Pattern.quote(String)`\r\n\r\nUpdate 2:\r\nWhen your body does not contain line breaks but just separates the parts with spaces, you can try this modified regex:\r\n``` lang-none\r\n^(--[\\w]+)\\s+(?:Content-Disposition: form-data; name=\\&quot;\\w+?\\&quot;\\s+Content-Type: text/plain;charset=UTF-8\\s+Content-Length: \\d+? [\\w,]+ \\1(?:-- $|\\s+))+\r\n```","title":"How to Mock Post request with multi part form body","body":"<p>Try this regex:</p>\n<pre class=\"lang-none prettyprint-override\"><code>^(--[\\w]+)$\\n(?:^Content-Disposition: form-data; name=\\&quot;\\w+?\\&quot;$\\n^Content-Type: text/plain;charset=UTF-8$\\n^Content-Length: \\d+? [\\w,]+ \\1(?:-- $|$\\n))+\n</code></pre>\n<p>In your version I didn't see that you are escaping the double quotes <code>&quot;</code> to a <code>\\&quot;</code>, wondering if the code compiles at all.\nAlso the <code>[\\n.\\w\\W]</code> seems to be a bit too generic.</p>\n<p>The above version is also generic, but in a different way:</p>\n<p><code>(--[\\w]+)</code> - this is a group that expects the <del>border</del> <em>boundary</em> string. In the rest of the expression the match it is &quot;back referenced&quot; as <code>\\1</code>, this means only requests with the same border over the whole request are accepted.</p>\n<p>A longer part is following for one of the parts between the <del>borders</del> <em>boundaries</em>. Please note that the expression does not care which parts are actually contained in the request. If you need that, let me know then I can update the expression to accept just the given parts.</p>\n<p>Update to state it clearly: You can put any string between the boundaries that you want, any headers etc. But you have to use regular expression syntax there when it comes to line breaks and other stuff that is interpreted special in a regex, like <code>\\</code>, <code>&quot;</code>, <code>.</code> and many others. Escape them!</p>\n<p>So to sum it up: you put the regex for the boundary <code>(--[\\w]+)</code> only for the first occurence and put a back reference to that (<code>\\1</code>) everywhere after where you expect <em>the same</em> boundary (the same characters, not just the same pattern). Inbetween you can place any stuff you want, just take care to escape it properly for a regex. In Java you can do this (just for the &quot;inner&quot; part) with <code>java.util.Pattern.quote(String)</code></p>\n<p>Update 2:\nWhen your body does not contain line breaks but just separates the parts with spaces, you can try this modified regex:</p>\n<pre class=\"lang-none prettyprint-override\"><code>^(--[\\w]+)\\s+(?:Content-Disposition: form-data; name=\\&quot;\\w+?\\&quot;\\s+Content-Type: text/plain;charset=UTF-8\\s+Content-Length: \\d+? [\\w,]+ \\1(?:-- $|\\s+))+\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1661262031,"post_id":73406835,"comment_id":129726325,"body_markdown":"I updated my answer with a hopefully better explanation, how to proceed if you try &quot;to use regex only for boundary part&quot;, and another update if your body doesn&#39;t contain linebreaks but just spaces instead (as your &quot;Actual Request&quot; here suggests)","body":"I updated my answer with a hopefully better explanation, how to proceed if you try &quot;to use regex only for boundary part&quot;, and another update if your body doesn&#39;t contain linebreaks but just spaces instead (as your &quot;Actual Request&quot; here suggests)"}],"tags":[],"owner":{"account_id":26031204,"reputation":1,"user_id":19737403,"display_name":"Parimala Kolisetty"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660885466,"creation_date":1660841709,"answer_id":73406835,"question_id":73310417,"body_markdown":"@cyberbrain. Thanks for looking into this.\r\n\r\nI am trying to mock  post request with multipart - form data , where the post body looks like i have shown below (where the boundary value changes on every run) . so , i am trying to use regex only for boundary part .Any pointers will be really helpful.\r\n\r\nI tried the regex you have suggested but it didnt work .\r\nActual Request - \r\n\r\n    {\r\n    &quot;method&quot;:&quot;POST&quot;\r\n    &quot;path&quot;:&quot;/abc/xyz&quot;\r\n    &quot;headers&quot;:{...}\r\n    &quot;keepAlive&quot;:true\r\n    &quot;secure&quot;:false\r\n    &quot;body&quot;:&quot;--y_My4VSoa71UaoRG6KF4DM_MZAP7AKDz54 Content-Disposition: form-data; name=&quot;dataset&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 14 drug --y_My4VSoa71UaoRG6KF4DM_MZAP7AKDz54 Content-Disposition: form-data; name=&quot;searchQuery&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 6 cancer --y_My4VSoa71UaoRG6KF4DM_MZAP7AKDz54 Content-Disposition: form-data; name=&quot;queryLanguage&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 4 ssql --y_My4VSoa71UaoRG6KF4DM_MZAP7AKDz54 Content-Disposition: form-data; name=&quot;returnFields&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 7 Id,Name --y_My4VSoa71UaoRG6KF4DM_MZAP7AKDz54 Content-Disposition: form-data; name=&quot;returnLimit&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 1 1 --y_My4VSoa71UaoRG6KF4DM_MZAP7AKDz54 Content-Disposition: form-data; name=&quot;offset&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 1 0 --y_My4VSoa71UaoRG6KF4DM_MZAP7AKDz54-- &quot;\r\n    }\r\n**mock request i gave like this** - \r\n\r\n    mockServerClient\r\n    .when(\r\n          request()\r\n            .withMethod(&quot;POST&quot;)\r\n    //      .withHeaders(\r\n    //         new Header(&quot;Content-Type&quot;, &quot;multipart/form-data&quot;))\r\n            .withPath(&quot;/abc/xyz&quot;)\r\n            .withBody(regex(&quot;(--[\\\\w]+) Content-Disposition: form-data; name=\\&quot;dataset\\&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 14 drug (--[\\\\w]+) Content-Disposition: form-data; name=\\&quot;searchQuery\\&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 6 cancer (--[\\\\w]+) Content-Disposition: form-data; name=\\&quot;queryLanguage\\&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 4 ssql (--[\\\\w]+) Content-Disposition: form-data; name=\\&quot;returnFields\\&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 7 Id,Name (--[\\\\w]+) Content-Disposition: form-data; name=\\&quot;returnLimit\\&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 1 1 (--[\\\\w]+) Content-Disposition: form-data; name=\\&quot;offset\\&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 1 0 (--[\\\\w]+)-- &quot;))\r\n    )\r\n\r\n**and the  expectation set by Mock Server as-  ** -\r\n\r\n    &quot;httpRequest&quot;:{\r\n    &quot;method&quot;:&quot;POST&quot;\r\n    &quot;path&quot;:&quot;/abc/xyz&quot;\r\n    &quot;body&quot;:{\r\n    &quot;type&quot;:&quot;REGEX&quot;\r\n    &quot;regex&quot;:&quot;(--[\\w]+) Content-Disposition: form-data; name=&quot;dataset&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 14 drug (--[\\w]+) Content-Disposition: form-data; name=&quot;searchQuery&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 6 cancer (--[\\w]+) Content-Disposition: form-data; name=&quot;queryLanguage&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 4 ssql (--[\\w]+) Content-Disposition: form-data; name=&quot;returnFields&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 7 Id,Name (--[\\w]+) Content-Disposition: form-data; name=&quot;returnLimit&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 1 1 (--[\\w]+) Content-Disposition: form-data; name=&quot;offset&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 1 0 (--[\\w]+)-- &quot;\r\n    }\r\n    }","title":"How to Mock Post request with multi part form body","body":"<p>@cyberbrain. Thanks for looking into this.</p>\n<p>I am trying to mock  post request with multipart - form data , where the post body looks like i have shown below (where the boundary value changes on every run) . so , i am trying to use regex only for boundary part .Any pointers will be really helpful.</p>\n<p>I tried the regex you have suggested but it didnt work .\nActual Request -</p>\n<pre><code>{\n&quot;method&quot;:&quot;POST&quot;\n&quot;path&quot;:&quot;/abc/xyz&quot;\n&quot;headers&quot;:{...}\n&quot;keepAlive&quot;:true\n&quot;secure&quot;:false\n&quot;body&quot;:&quot;--y_My4VSoa71UaoRG6KF4DM_MZAP7AKDz54 Content-Disposition: form-data; name=&quot;dataset&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 14 drug --y_My4VSoa71UaoRG6KF4DM_MZAP7AKDz54 Content-Disposition: form-data; name=&quot;searchQuery&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 6 cancer --y_My4VSoa71UaoRG6KF4DM_MZAP7AKDz54 Content-Disposition: form-data; name=&quot;queryLanguage&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 4 ssql --y_My4VSoa71UaoRG6KF4DM_MZAP7AKDz54 Content-Disposition: form-data; name=&quot;returnFields&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 7 Id,Name --y_My4VSoa71UaoRG6KF4DM_MZAP7AKDz54 Content-Disposition: form-data; name=&quot;returnLimit&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 1 1 --y_My4VSoa71UaoRG6KF4DM_MZAP7AKDz54 Content-Disposition: form-data; name=&quot;offset&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 1 0 --y_My4VSoa71UaoRG6KF4DM_MZAP7AKDz54-- &quot;\n}\n</code></pre>\n<p><strong>mock request i gave like this</strong> -</p>\n<pre><code>mockServerClient\n.when(\n      request()\n        .withMethod(&quot;POST&quot;)\n//      .withHeaders(\n//         new Header(&quot;Content-Type&quot;, &quot;multipart/form-data&quot;))\n        .withPath(&quot;/abc/xyz&quot;)\n        .withBody(regex(&quot;(--[\\\\w]+) Content-Disposition: form-data; name=\\&quot;dataset\\&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 14 drug (--[\\\\w]+) Content-Disposition: form-data; name=\\&quot;searchQuery\\&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 6 cancer (--[\\\\w]+) Content-Disposition: form-data; name=\\&quot;queryLanguage\\&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 4 ssql (--[\\\\w]+) Content-Disposition: form-data; name=\\&quot;returnFields\\&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 7 Id,Name (--[\\\\w]+) Content-Disposition: form-data; name=\\&quot;returnLimit\\&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 1 1 (--[\\\\w]+) Content-Disposition: form-data; name=\\&quot;offset\\&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 1 0 (--[\\\\w]+)-- &quot;))\n)\n</code></pre>\n<p>**and the  expectation set by Mock Server as-  ** -</p>\n<pre><code>&quot;httpRequest&quot;:{\n&quot;method&quot;:&quot;POST&quot;\n&quot;path&quot;:&quot;/abc/xyz&quot;\n&quot;body&quot;:{\n&quot;type&quot;:&quot;REGEX&quot;\n&quot;regex&quot;:&quot;(--[\\w]+) Content-Disposition: form-data; name=&quot;dataset&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 14 drug (--[\\w]+) Content-Disposition: form-data; name=&quot;searchQuery&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 6 cancer (--[\\w]+) Content-Disposition: form-data; name=&quot;queryLanguage&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 4 ssql (--[\\w]+) Content-Disposition: form-data; name=&quot;returnFields&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 7 Id,Name (--[\\w]+) Content-Disposition: form-data; name=&quot;returnLimit&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 1 1 (--[\\w]+) Content-Disposition: form-data; name=&quot;offset&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 1 0 (--[\\w]+)-- &quot;\n}\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1691697757,"post_id":76877845,"comment_id":135530469,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76877845/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":13975041,"reputation":1,"user_id":10126961,"display_name":"Artem Sobolenko"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691686635,"creation_date":1691686635,"answer_id":76877845,"question_id":73310417,"body_markdown":"Try this!\r\n\r\n    String regex = &quot;--[\\\\w-]+\\\\sContent-Disposition: form-data; name=\\&quot;[^\\&quot;]+\\&quot;\\\\sContent-Type: text/plain;charset=UTF-8\\\\sContent-Length: \\\\d+\\\\s[\\\\s\\\\S]*?--[\\\\w-]+--\\\\s&quot;;\r\n\r\n","title":"How to Mock Post request with multi part form body","body":"<p>Try this!</p>\n<pre><code>String regex = &quot;--[\\\\w-]+\\\\sContent-Disposition: form-data; name=\\&quot;[^\\&quot;]+\\&quot;\\\\sContent-Type: text/plain;charset=UTF-8\\\\sContent-Length: \\\\d+\\\\s[\\\\s\\\\S]*?--[\\\\w-]+--\\\\s&quot;;\n</code></pre>\n"}],"owner":{"account_id":26031204,"reputation":1,"user_id":19737403,"display_name":"Parimala Kolisetty"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1209,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1691686635,"creation_date":1660152298,"question_id":73310417,"body_markdown":"I need to mock a post request with multipart form body as given below. I tried with a regex pattern for the unique string in the body --Z5KfGboCdJvPl4VsEq74AeK7PZN4EyN , but it didn&#39;t work. Can some one guide me on this?\r\n\r\n**BODY :**\r\n\r\n    &quot;body&quot;:&quot;--Z5KfGboCdJvPl4VsEq74AeK7PZN4EyN\r\n    Content-Disposition: form-data; name=&quot;dataset&quot;\r\n    Content-Type: text/plain;charset=UTF-8\r\n    Content-Length: 14 drugs --Z5KfGboCdJvPl4VsEq74AeK7PZN4EyN\r\n    Content-Disposition: form-data; name=&quot;searchQuery&quot;\r\n    Content-Type: text/plain;charset=UTF-8\r\n    Content-Length: 6 cancer --Z5KfGboCdJvPl4VsEq74AeK7PZN4EyN\r\n    Content-Disposition: form-data; name=&quot;queryLanguage&quot;\r\n    Content-Type: text/plain;charset=UTF-8\r\n    Content-Length: 4 ssql --Z5KfGboCdJvPl4VsEq74AeK7PZN4EyN\r\n    Content-Disposition: form-data; name=&quot;returnFields&quot;\r\n    Content-Type: text/plain;charset=UTF-8\r\n    Content-Length: 22 Id,name --Z5KfGboCdJvPl4VsEq74AeK7PZN4EyN\r\n    Content-Disposition: form-data; name=&quot;returnLimit&quot;\r\n    Content-Type: text/plain;charset=UTF-8\r\n    Content-Length: 1 1 --Z5KfGboCdJvPl4VsEq74AeK7PZN4EyN\r\n    Content-Disposition: form-data; name=&quot;offset&quot;\r\n    Content-Type: text/plain;charset=UTF-8\r\n    Content-Length: 1 0 --Z5KfGboCdJvPl4VsEq74AeK7PZN4EyN-- &quot;\r\n\r\n**I tried like -**\r\n\r\n    mockServerClient\r\n    .when(\r\n    request()\r\n    .withMethod(&quot;POST&quot;)\r\n    .withHeaders(\r\n    new Header(&quot;Content-Type&quot;, &quot;multipart/form-data&quot;))\r\n    .withPath(&quot;abc/xyz&quot;)\r\n    .withBody(**regex(&quot;[\\n.\\w\\W]***\r\n    Content-Disposition: form-data; name=&quot;dataset&quot;\r\n    Content-Type: text/plain;charset=UTF-8\r\n    Content-Length: 14 drugs [\\n.\\w\\W]*\r\n    Content-Disposition: form-data; name=&quot;searchQuery&quot;\r\n    Content-Type: text/plain;charset=UTF-8\r\n    Content-Length: 6 cancer [\\n.\\w\\W]*\r\n    Content-Disposition: form-data; name=&quot;queryLanguage&quot;\r\n    Content-Type: text/plain;charset=UTF-8\r\n    Content-Length: 4 ssql [\\n.\\w\\W]*\r\n    Content-Disposition: form-data; name=&quot;returnFields&quot;\r\n    Content-Type: text/plain;charset=UTF-8\r\n    Content-Length: 22 Id,name [\\n.\\w\\W]*\r\n    Content-Disposition: form-data; name=&quot;returnLimit&quot;\r\n    Content-Type: text/plain;charset=UTF-8\r\n    Content-Length: 1 1 [\\n.\\w\\W]*\r\n    Content-Disposition: form-data; name=&quot;offset&quot;\r\n    Content-Type: text/plain;charset=UTF-8\r\n    Content-Length: 1 0 [\\n.\\w\\W]*-- &quot;))\r\n    )","title":"How to Mock Post request with multi part form body","body":"<p>I need to mock a post request with multipart form body as given below. I tried with a regex pattern for the unique string in the body --Z5KfGboCdJvPl4VsEq74AeK7PZN4EyN , but it didn't work. Can some one guide me on this?</p>\n<p><strong>BODY :</strong></p>\n<pre><code>&quot;body&quot;:&quot;--Z5KfGboCdJvPl4VsEq74AeK7PZN4EyN\nContent-Disposition: form-data; name=&quot;dataset&quot;\nContent-Type: text/plain;charset=UTF-8\nContent-Length: 14 drugs --Z5KfGboCdJvPl4VsEq74AeK7PZN4EyN\nContent-Disposition: form-data; name=&quot;searchQuery&quot;\nContent-Type: text/plain;charset=UTF-8\nContent-Length: 6 cancer --Z5KfGboCdJvPl4VsEq74AeK7PZN4EyN\nContent-Disposition: form-data; name=&quot;queryLanguage&quot;\nContent-Type: text/plain;charset=UTF-8\nContent-Length: 4 ssql --Z5KfGboCdJvPl4VsEq74AeK7PZN4EyN\nContent-Disposition: form-data; name=&quot;returnFields&quot;\nContent-Type: text/plain;charset=UTF-8\nContent-Length: 22 Id,name --Z5KfGboCdJvPl4VsEq74AeK7PZN4EyN\nContent-Disposition: form-data; name=&quot;returnLimit&quot;\nContent-Type: text/plain;charset=UTF-8\nContent-Length: 1 1 --Z5KfGboCdJvPl4VsEq74AeK7PZN4EyN\nContent-Disposition: form-data; name=&quot;offset&quot;\nContent-Type: text/plain;charset=UTF-8\nContent-Length: 1 0 --Z5KfGboCdJvPl4VsEq74AeK7PZN4EyN-- &quot;\n</code></pre>\n<p><strong>I tried like -</strong></p>\n<pre><code>mockServerClient\n.when(\nrequest()\n.withMethod(&quot;POST&quot;)\n.withHeaders(\nnew Header(&quot;Content-Type&quot;, &quot;multipart/form-data&quot;))\n.withPath(&quot;abc/xyz&quot;)\n.withBody(**regex(&quot;[\\n.\\w\\W]***\nContent-Disposition: form-data; name=&quot;dataset&quot;\nContent-Type: text/plain;charset=UTF-8\nContent-Length: 14 drugs [\\n.\\w\\W]*\nContent-Disposition: form-data; name=&quot;searchQuery&quot;\nContent-Type: text/plain;charset=UTF-8\nContent-Length: 6 cancer [\\n.\\w\\W]*\nContent-Disposition: form-data; name=&quot;queryLanguage&quot;\nContent-Type: text/plain;charset=UTF-8\nContent-Length: 4 ssql [\\n.\\w\\W]*\nContent-Disposition: form-data; name=&quot;returnFields&quot;\nContent-Type: text/plain;charset=UTF-8\nContent-Length: 22 Id,name [\\n.\\w\\W]*\nContent-Disposition: form-data; name=&quot;returnLimit&quot;\nContent-Type: text/plain;charset=UTF-8\nContent-Length: 1 1 [\\n.\\w\\W]*\nContent-Disposition: form-data; name=&quot;offset&quot;\nContent-Type: text/plain;charset=UTF-8\nContent-Length: 1 0 [\\n.\\w\\W]*-- &quot;))\n)\n</code></pre>\n"},{"tags":["java","spring","spring-boot","dynamic","proxy"],"answers":[{"tags":[],"owner":{"account_id":28578269,"reputation":142,"user_id":21879587,"display_name":"tamtejszystan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691686513,"creation_date":1691686513,"answer_id":76877834,"question_id":76869991,"body_markdown":"Assuming you have situation like this:\r\n\r\n```java\r\npublic interface MyService {\r\n    void doSomething();\r\n}\r\n\r\n@CustomProxy\r\npublic class OriginalService implements MyService {\r\n    @Override\r\n    public void doSomething() {\r\n        // Original logic here\r\n    }\r\n}\r\n\r\npublic class PlaceholderService implements MyService {\r\n    @Override\r\n    public void doSomething() {\r\n        // No logic or placeholder logic here\r\n    }\r\n}\r\n```\r\n\r\nI would try to use Spring AOP like so:\r\n\r\n```java\r\nimport org.aspectj.lang.annotation.Aspect;\r\nimport org.aspectj.lang.annotation.Before;\r\nimport org.springframework.context.annotation.Configuration;\r\n\r\n@Aspect\r\n@Configuration\r\npublic class ProxyAspect {\r\n\r\n    @Before(&quot;@within(com.example.CustomProxy)&quot;)\r\n    public void beforeCustomProxy() {\r\n        // Logic to determine which version of the proxy to use\r\n        // You can conditionally switch between OriginalService and PlaceholderService\r\n        boolean condition = /* your condition here */;\r\n\r\n        if (condition) {\r\n            // Return the instance of OriginalService\r\n        } else {\r\n            // Return the instance of PlaceholderService\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nPlease let me know if this has been helpful to you","title":"how to create dynamic proxy with java condition","body":"<p>Assuming you have situation like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface MyService {\n    void doSomething();\n}\n\n@CustomProxy\npublic class OriginalService implements MyService {\n    @Override\n    public void doSomething() {\n        // Original logic here\n    }\n}\n\npublic class PlaceholderService implements MyService {\n    @Override\n    public void doSomething() {\n        // No logic or placeholder logic here\n    }\n}\n</code></pre>\n<p>I would try to use Spring AOP like so:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.aspectj.lang.annotation.Aspect;\nimport org.aspectj.lang.annotation.Before;\nimport org.springframework.context.annotation.Configuration;\n\n@Aspect\n@Configuration\npublic class ProxyAspect {\n\n    @Before(&quot;@within(com.example.CustomProxy)&quot;)\n    public void beforeCustomProxy() {\n        // Logic to determine which version of the proxy to use\n        // You can conditionally switch between OriginalService and PlaceholderService\n        boolean condition = /* your condition here */;\n\n        if (condition) {\n            // Return the instance of OriginalService\n        } else {\n            // Return the instance of PlaceholderService\n        }\n    }\n}\n</code></pre>\n<p>Please let me know if this has been helpful to you</p>\n"}],"owner":{"account_id":27437374,"reputation":1,"user_id":20932947,"display_name":"Kaspersky"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691686513,"creation_date":1691601496,"question_id":76869991,"body_markdown":"I need your help. \r\nI have a Spring annotation that I apply to an interface. This interface is implemented by another class. I need to create a proxy object for classes that implement the interface with my annotation. This proxy object should have two implementations: \r\n- the first one with the original logic\r\n- the second one without any logic, just as a placeholder.\r\n \r\nAdditionally, this should be wrapped in an `if()` conditional statement. If you have any ideas or suggestions, I would be grateful.\r\n\r\n\r\nI tried to create a proxy object and disable and display, but for some reason they do not fall into the context\r\n","title":"how to create dynamic proxy with java condition","body":"<p>I need your help.\nI have a Spring annotation that I apply to an interface. This interface is implemented by another class. I need to create a proxy object for classes that implement the interface with my annotation. This proxy object should have two implementations:</p>\n<ul>\n<li>the first one with the original logic</li>\n<li>the second one without any logic, just as a placeholder.</li>\n</ul>\n<p>Additionally, this should be wrapped in an <code>if()</code> conditional statement. If you have any ideas or suggestions, I would be grateful.</p>\n<p>I tried to create a proxy object and disable and display, but for some reason they do not fall into the context</p>\n"},{"tags":["java","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":14473519,"reputation":2064,"user_id":10454736,"display_name":"Tushar Mahajan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691686487,"creation_date":1691686487,"answer_id":76877831,"question_id":76877438,"body_markdown":"Try using ContentCachingResponseWrapper from spring\r\n\r\n    ContentCachingResponseWrapper wrapper = new ContentCachingResponseWrapper(HttpServletResponseObject);\r\n    filterchain.doFilter(httpServletRequestObject, wrapper);\r\n    byte[] data = wrapper.getContentAsByteArray();\r\n    response.getOutputStream().write(data);\r\n\r\nmaybe it will help\r\n\r\n","title":"How to prevent downstream filters from overriding the HTTP response body","body":"<p>Try using ContentCachingResponseWrapper from spring</p>\n<pre><code>ContentCachingResponseWrapper wrapper = new ContentCachingResponseWrapper(HttpServletResponseObject);\nfilterchain.doFilter(httpServletRequestObject, wrapper);\nbyte[] data = wrapper.getContentAsByteArray();\nresponse.getOutputStream().write(data);\n</code></pre>\n<p>maybe it will help</p>\n"}],"owner":{"account_id":4949717,"reputation":1119,"user_id":3984101,"accept_rate":60,"display_name":"Nipun Thathsara"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691686487,"creation_date":1691683039,"question_id":76877438,"body_markdown":"I&#39;m using Spring boot ControllerAdvisor class to write the JSON response body of the `HttpServletResponse` object due to unavoidable reason. Still my downstream Tomcat filters(Over which I don&#39;t have any control) override my response. \r\n\r\nHow can I prevent them from overriding this status. Setting `isCommited` to `true` seems to be a dirty hack even though I couldn&#39;t figure how to do so. \r\n\r\nAppreciate any help. Thanks in advance!\r\n\r\n```\r\n// Inside the controller advisor\r\nprivate void writeHttpResponseForTechnicalErrors(HttpServletRequest httpRequest,\r\n        HttpServletResponse httpResponse, ResponseEntity responseEntity) {\r\n\r\n        String jsonResponse jsonResponse = new ObjectMapper().writeValueAsString(responseEntity.getBody());\r\n        httpResponse.getWriter().write(jsonResponse);\r\n}\r\n```\r\n\r\nEdit:\r\n\r\nI was able to set `isCommited` to `true` with below. Still doesn&#39;t feel like this is a very good approach. Lemme know :)","title":"How to prevent downstream filters from overriding the HTTP response body","body":"<p>I'm using Spring boot ControllerAdvisor class to write the JSON response body of the <code>HttpServletResponse</code> object due to unavoidable reason. Still my downstream Tomcat filters(Over which I don't have any control) override my response.</p>\n<p>How can I prevent them from overriding this status. Setting <code>isCommited</code> to <code>true</code> seems to be a dirty hack even though I couldn't figure how to do so.</p>\n<p>Appreciate any help. Thanks in advance!</p>\n<pre><code>// Inside the controller advisor\nprivate void writeHttpResponseForTechnicalErrors(HttpServletRequest httpRequest,\n        HttpServletResponse httpResponse, ResponseEntity responseEntity) {\n\n        String jsonResponse jsonResponse = new ObjectMapper().writeValueAsString(responseEntity.getBody());\n        httpResponse.getWriter().write(jsonResponse);\n}\n</code></pre>\n<p>Edit:</p>\n<p>I was able to set <code>isCommited</code> to <code>true</code> with below. Still doesn't feel like this is a very good approach. Lemme know :)</p>\n"},{"tags":["java","android","kotlin","default"],"answers":[{"tags":[],"owner":{"account_id":14596857,"reputation":375,"user_id":10542284,"display_name":"Jugert Mucoimaj"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691686221,"creation_date":1691686221,"answer_id":76877800,"question_id":76868443,"body_markdown":"To all the people that might want to get past this and want their app to be registered as the default phone app, they need to follow this very [important doc][1] from Android. These are quite important:\r\n\r\n \r\n\r\n&gt; In order to fill the RoleManager.ROLE_DIALER role, an app must meet a\r\n&gt; number of requirements:\r\n&gt; \r\n&gt;     \r\n&gt;\r\n&gt; - It must handle the Intent#ACTION_DIAL intent. This means the app must\r\n   provide a dial pad UI for the user to initiate outgoing calls.\r\n&gt; - It must fully implement the InCallService API and provide both an incoming call UI, as well as an ongoing call UI.\r\n\r\nIf you do these two things Android is going to ask the user which to set for default dialer and you are all set!\r\n\r\n  [1]: https://developer.android.com/reference/android/telecom/InCallService#becoming-the-default-phone-app","title":"I&#39;m getting RESULT_CANCELED from startActivityForResult()","body":"<p>To all the people that might want to get past this and want their app to be registered as the default phone app, they need to follow this very <a href=\"https://developer.android.com/reference/android/telecom/InCallService#becoming-the-default-phone-app\" rel=\"nofollow noreferrer\">important doc</a> from Android. These are quite important:</p>\n<blockquote>\n<p>In order to fill the RoleManager.ROLE_DIALER role, an app must meet a\nnumber of requirements:</p>\n<ul>\n<li>It must handle the Intent#ACTION_DIAL intent. This means the app must\nprovide a dial pad UI for the user to initiate outgoing calls.</li>\n<li>It must fully implement the InCallService API and provide both an incoming call UI, as well as an ongoing call UI.</li>\n</ul>\n</blockquote>\n<p>If you do these two things Android is going to ask the user which to set for default dialer and you are all set!</p>\n"}],"owner":{"account_id":14596857,"reputation":375,"user_id":10542284,"display_name":"Jugert Mucoimaj"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76877800,"answer_count":1,"score":1,"last_activity_date":1691686221,"creation_date":1691589190,"question_id":76868443,"body_markdown":"I&#39;m trying to set my app as the default phone app in `Android 10` and above and when I say default &quot;phone app&quot; is the one that you find when you go to `Settings &gt; Apps &gt; Default Apps &gt; Phone` I have this main activity class:\r\n\r\n```\r\n@RequiresApi(Build.VERSION_CODES.Q)\r\nclass MainActivity : ComponentActivity() {\r\n\r\n    private lateinit var setPhoneAppLauncher: ActivityResultLauncher&lt;Intent&gt;\r\n    private val roleManager: RoleManager by lazy {\r\n        getSystemService(Context.ROLE_SERVICE) as RoleManager\r\n    }\r\n\r\n    private val permissions = arrayOf(\r\n        android.Manifest.permission.READ_PHONE_STATE,\r\n        android.Manifest.permission.CALL_PHONE,\r\n        android.Manifest.permission.ANSWER_PHONE_CALLS,\r\n        android.Manifest.permission.READ_CALL_LOG,\r\n        android.Manifest.permission.WRITE_CALL_LOG,\r\n        android.Manifest.permission.READ_CONTACTS\r\n    )\r\n    private val requestCode = 201002\r\n    //    private val REQUESTCODESETDEFAULTDIALER = 1\r\n    private lateinit var contactLoader: ContactLoader\r\n    private val contactDisplayUI = ContactDisplayUI(activity = this)\r\n\r\n    companion object {\r\n        const val PERMISSIONS_REQUEST_READ_CONTACTS = 100\r\n        const val REQUESTCODESETDEFAULTDIALER = 1\r\n        const val role = RoleManager.ROLE_DIALER\r\n    }\r\n\r\n\r\n    @OptIn(ExperimentalMaterial3Api::class)\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n\r\n        setPhoneAppLauncher = registerForActivityResult(ActivityResultContracts.StartActivityForResult()) {\r\n            if (it.resultCode == RESULT_CANCELED) {\r\n                // Permission granted, proceed with your logic here.\r\n                Log.d(&quot;MainActivity&quot;, &quot;Success?&quot;)\r\n               // checkDefaultDialer()\r\n            } else {\r\n                // Handle other possible result codes if needed.\r\n                Log.d(&quot;MainActivity&quot;, it.resultCode.toString())\r\n                Log.d(&quot;YourActivity&quot;, &quot;Something went wrong.&quot;)\r\n            }\r\n        }\r\n\r\n        checkAndRequestPermissions()\r\n\r\n    }\r\n\r\n\r\n    private fun selectRegisterLogic() {\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {\r\n            Log.d(&quot;YourActivity&quot;, &quot;HereQ.&quot;)\r\n            registerAsDefaultDialerQ()\r\n        } else {\r\n            Log.d(&quot;YourActivity&quot;, &quot;HereL.&quot;)\r\n            registerAsDefaultDialerLegacy()\r\n        }\r\n    }\r\n\r\n    @RequiresApi(Build.VERSION_CODES.Q)\r\n    private fun registerAsDefaultDialerQ() {\r\n        val roleManager = getSystemService(Context.ROLE_SERVICE) as RoleManager\r\n        if (roleManager.isRoleAvailable(RoleManager.ROLE_DIALER)) {\r\n            // ... rest of your code\r\n            Log.d(&quot;MainActivity&quot;, &quot;Role Manager is available on this device.&quot;)\r\n            if (!roleManager.isRoleHeld(RoleManager.ROLE_DIALER)) {\r\n                val intent = roleManager.createRequestRoleIntent(RoleManager.ROLE_DIALER)\r\n                Log.d(&quot;MainActivity&quot;, &quot;Requesting ROLE_DIALER intent: $intent&quot;)\r\n\r\n                setPhoneAppLauncher.launch(intent)\r\n            } else {\r\n                // Your app already holds the role, proceed with your logic here.\r\n                Log.e(&quot;MainActivity&quot;, &quot;It is the default.&quot;)\r\n            }\r\n        } else {\r\n            Log.e(&quot;MainActivity&quot;, &quot;Role Manager not available on this device.&quot;)\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n    private fun registerAsDefaultDialerLegacy() {\r\n\r\n        val telecomManager = getSystemService(Context.TELECOM_SERVICE) as TelecomManager\r\n        if (!packageName.equals(telecomManager.defaultDialerPackage)) {\r\n            val intent = Intent(TelecomManager.ACTION_CHANGE_DEFAULT_DIALER)\r\n            intent.putExtra(\r\n                TelecomManager.EXTRA_CHANGE_DEFAULT_DIALER_PACKAGE_NAME,\r\n                packageName\r\n            )\r\n            startActivity(intent)\r\n        }\r\n\r\n    }\r\n\r\n    //    @RequiresApi(Build.VERSION_CODES.Q)\r\n    private fun checkDefaultDialer() {\r\n        val telecomManager = getSystemService(TelecomManager::class.java)\r\n        if (packageName == telecomManager.defaultDialerPackage) {\r\n            // Your app is the default dialer, proceed with your logic here.\r\n            Log.d(&quot;YourActivity&quot;, &quot;Phone app is the default dialer.&quot;)\r\n        } else {\r\n            // Your app is not the default dialer, handle this case.\r\n            selectRegisterLogic()\r\n            Log.d(&quot;YourActivity&quot;, &quot;Phone app is NOT the default dialer.&quot;)\r\n//\r\n        }\r\n    }\r\n\r\n    private fun checkAndRequestPermissions() {\r\n        val permissionsToRequest = permissions.filter {\r\n            ContextCompat.checkSelfPermission(this, it) != PackageManager.PERMISSION_GRANTED\r\n        }\r\n\r\n        if (permissionsToRequest.isNotEmpty()) {\r\n            // Request missing permissions using the ActivityResultLauncher\r\n            requestPermissionLauncher.launch(permissionsToRequest.toTypedArray())\r\n        } else {\r\n\r\n            Log.d(&quot;somelog&quot;, &quot;yeas&quot;)\r\n        }\r\n    }\r\n\r\n\r\n    private val requestPermissionLauncher = registerForActivityResult(\r\n        ActivityResultContracts.RequestMultiplePermissions()\r\n    ) { permissions -&gt;\r\n        val allPermissionsGranted = permissions.all { it.value }\r\n        if (allPermissionsGranted) {\r\n            Log.d(&quot;somelog&quot;, allPermissionsGranted.toString())\r\n            // Permissions granted, register as the default dialer\r\n            selectRegisterLogic()\r\n        } else {\r\n            // Handle case when permissions are not granted\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\nSince I want to handle from Android API level 23 and above I set some `if else` logic to handle necessary things. And I think I have set the necessary permissions in the `AndroidManifest.xml` file. What&#39;s going wrong?","title":"I&#39;m getting RESULT_CANCELED from startActivityForResult()","body":"<p>I'm trying to set my app as the default phone app in <code>Android 10</code> and above and when I say default &quot;phone app&quot; is the one that you find when you go to <code>Settings &gt; Apps &gt; Default Apps &gt; Phone</code> I have this main activity class:</p>\n<pre><code>@RequiresApi(Build.VERSION_CODES.Q)\nclass MainActivity : ComponentActivity() {\n\n    private lateinit var setPhoneAppLauncher: ActivityResultLauncher&lt;Intent&gt;\n    private val roleManager: RoleManager by lazy {\n        getSystemService(Context.ROLE_SERVICE) as RoleManager\n    }\n\n    private val permissions = arrayOf(\n        android.Manifest.permission.READ_PHONE_STATE,\n        android.Manifest.permission.CALL_PHONE,\n        android.Manifest.permission.ANSWER_PHONE_CALLS,\n        android.Manifest.permission.READ_CALL_LOG,\n        android.Manifest.permission.WRITE_CALL_LOG,\n        android.Manifest.permission.READ_CONTACTS\n    )\n    private val requestCode = 201002\n    //    private val REQUESTCODESETDEFAULTDIALER = 1\n    private lateinit var contactLoader: ContactLoader\n    private val contactDisplayUI = ContactDisplayUI(activity = this)\n\n    companion object {\n        const val PERMISSIONS_REQUEST_READ_CONTACTS = 100\n        const val REQUESTCODESETDEFAULTDIALER = 1\n        const val role = RoleManager.ROLE_DIALER\n    }\n\n\n    @OptIn(ExperimentalMaterial3Api::class)\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n\n        setPhoneAppLauncher = registerForActivityResult(ActivityResultContracts.StartActivityForResult()) {\n            if (it.resultCode == RESULT_CANCELED) {\n                // Permission granted, proceed with your logic here.\n                Log.d(&quot;MainActivity&quot;, &quot;Success?&quot;)\n               // checkDefaultDialer()\n            } else {\n                // Handle other possible result codes if needed.\n                Log.d(&quot;MainActivity&quot;, it.resultCode.toString())\n                Log.d(&quot;YourActivity&quot;, &quot;Something went wrong.&quot;)\n            }\n        }\n\n        checkAndRequestPermissions()\n\n    }\n\n\n    private fun selectRegisterLogic() {\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {\n            Log.d(&quot;YourActivity&quot;, &quot;HereQ.&quot;)\n            registerAsDefaultDialerQ()\n        } else {\n            Log.d(&quot;YourActivity&quot;, &quot;HereL.&quot;)\n            registerAsDefaultDialerLegacy()\n        }\n    }\n\n    @RequiresApi(Build.VERSION_CODES.Q)\n    private fun registerAsDefaultDialerQ() {\n        val roleManager = getSystemService(Context.ROLE_SERVICE) as RoleManager\n        if (roleManager.isRoleAvailable(RoleManager.ROLE_DIALER)) {\n            // ... rest of your code\n            Log.d(&quot;MainActivity&quot;, &quot;Role Manager is available on this device.&quot;)\n            if (!roleManager.isRoleHeld(RoleManager.ROLE_DIALER)) {\n                val intent = roleManager.createRequestRoleIntent(RoleManager.ROLE_DIALER)\n                Log.d(&quot;MainActivity&quot;, &quot;Requesting ROLE_DIALER intent: $intent&quot;)\n\n                setPhoneAppLauncher.launch(intent)\n            } else {\n                // Your app already holds the role, proceed with your logic here.\n                Log.e(&quot;MainActivity&quot;, &quot;It is the default.&quot;)\n            }\n        } else {\n            Log.e(&quot;MainActivity&quot;, &quot;Role Manager not available on this device.&quot;)\n        }\n    }\n\n\n\n\n    private fun registerAsDefaultDialerLegacy() {\n\n        val telecomManager = getSystemService(Context.TELECOM_SERVICE) as TelecomManager\n        if (!packageName.equals(telecomManager.defaultDialerPackage)) {\n            val intent = Intent(TelecomManager.ACTION_CHANGE_DEFAULT_DIALER)\n            intent.putExtra(\n                TelecomManager.EXTRA_CHANGE_DEFAULT_DIALER_PACKAGE_NAME,\n                packageName\n            )\n            startActivity(intent)\n        }\n\n    }\n\n    //    @RequiresApi(Build.VERSION_CODES.Q)\n    private fun checkDefaultDialer() {\n        val telecomManager = getSystemService(TelecomManager::class.java)\n        if (packageName == telecomManager.defaultDialerPackage) {\n            // Your app is the default dialer, proceed with your logic here.\n            Log.d(&quot;YourActivity&quot;, &quot;Phone app is the default dialer.&quot;)\n        } else {\n            // Your app is not the default dialer, handle this case.\n            selectRegisterLogic()\n            Log.d(&quot;YourActivity&quot;, &quot;Phone app is NOT the default dialer.&quot;)\n//\n        }\n    }\n\n    private fun checkAndRequestPermissions() {\n        val permissionsToRequest = permissions.filter {\n            ContextCompat.checkSelfPermission(this, it) != PackageManager.PERMISSION_GRANTED\n        }\n\n        if (permissionsToRequest.isNotEmpty()) {\n            // Request missing permissions using the ActivityResultLauncher\n            requestPermissionLauncher.launch(permissionsToRequest.toTypedArray())\n        } else {\n\n            Log.d(&quot;somelog&quot;, &quot;yeas&quot;)\n        }\n    }\n\n\n    private val requestPermissionLauncher = registerForActivityResult(\n        ActivityResultContracts.RequestMultiplePermissions()\n    ) { permissions -&gt;\n        val allPermissionsGranted = permissions.all { it.value }\n        if (allPermissionsGranted) {\n            Log.d(&quot;somelog&quot;, allPermissionsGranted.toString())\n            // Permissions granted, register as the default dialer\n            selectRegisterLogic()\n        } else {\n            // Handle case when permissions are not granted\n        }\n    }\n}\n\n</code></pre>\n<p>Since I want to handle from Android API level 23 and above I set some <code>if else</code> logic to handle necessary things. And I think I have set the necessary permissions in the <code>AndroidManifest.xml</code> file. What's going wrong?</p>\n"},{"tags":["java","android","android-custom-view"],"comments":[{"owner":{"account_id":8373673,"reputation":61868,"user_id":6287910,"display_name":"Cheticamp"},"score":0,"creation_date":1691456907,"post_id":76839786,"comment_id":135491192,"body_markdown":"The rotation seems to be maintained regardless of the pivot point selected. What happens if you pull up you app and change the pivot point without doing any rotation or translation?","body":"The rotation seems to be maintained regardless of the pivot point selected. What happens if you pull up you app and change the pivot point without doing any rotation or translation?"},{"owner":{"account_id":16537587,"reputation":486,"user_id":11949116,"display_name":"Abdo21"},"score":0,"creation_date":1691483807,"post_id":76839786,"comment_id":135494290,"body_markdown":"Hey @Cheticamp , I&#39;ve made some updates to the question to highlight a crucial observation. When the view rotation angle is precisely zero, regardless of whether I apply any translations to the view, no issue arises.","body":"Hey @Cheticamp , I&#39;ve made some updates to the question to highlight a crucial observation. When the view rotation angle is precisely zero, regardless of whether I apply any translations to the view, no issue arises."},{"owner":{"account_id":16537587,"reputation":486,"user_id":11949116,"display_name":"Abdo21"},"score":0,"creation_date":1691484213,"post_id":76839786,"comment_id":135494377,"body_markdown":"I&#39;ve realized that the problem only shows up when I rotate the view and then try to change the pivot point.","body":"I&#39;ve realized that the problem only shows up when I rotate the view and then try to change the pivot point."},{"owner":{"account_id":8373673,"reputation":61868,"user_id":6287910,"display_name":"Cheticamp"},"score":0,"creation_date":1691499467,"post_id":76839786,"comment_id":135497585,"body_markdown":"Check your calculations for the rectangles that control the layout and position of your custom view. Views in Android always present themselves as unrotated rectangles on the screen. In other words, the width of the view will be from the left-most corner to the right-most corner measured along the x-axis. The height is from the bottom-most corner to the top-most corner, measured along the y-axis. The width/height of the view will differ based upon the rotation. I can&#39;t say that this is definitely the problem, but check it out.","body":"Check your calculations for the rectangles that control the layout and position of your custom view. Views in Android always present themselves as unrotated rectangles on the screen. In other words, the width of the view will be from the left-most corner to the right-most corner measured along the x-axis. The height is from the bottom-most corner to the top-most corner, measured along the y-axis. The width/height of the view will differ based upon the rotation. I can&#39;t say that this is definitely the problem, but check it out."},{"owner":{"account_id":24764408,"reputation":306,"user_id":18648400,"display_name":"Mirco0"},"score":0,"creation_date":1691534595,"post_id":76839786,"comment_id":135504133,"body_markdown":"You have to set a new postion for the view, because the position you see on the screen is the result of the sum of the pivot + the actual position","body":"You have to set a new postion for the view, because the position you see on the screen is the result of the sum of the pivot + the actual position"},{"owner":{"account_id":6979173,"reputation":942,"user_id":6576302,"display_name":"C.F.G"},"score":0,"creation_date":1691634070,"post_id":76839786,"comment_id":135519049,"body_markdown":"@Abdo21: What is the `com.abdo.rotateviewquestion.FixedPosLayout`? How can I import it?","body":"@Abdo21: What is the <code>com.abdo.rotateviewquestion.FixedPosLayout</code>? How can I import it?"},{"owner":{"account_id":16537587,"reputation":486,"user_id":11949116,"display_name":"Abdo21"},"score":0,"creation_date":1691634321,"post_id":76839786,"comment_id":135519065,"body_markdown":"@C.F.G I&#39;ve included the source code for that class within the question.","body":"@C.F.G I&#39;ve included the source code for that class within the question."},{"owner":{"account_id":6979173,"reputation":942,"user_id":6576302,"display_name":"C.F.G"},"score":0,"creation_date":1691634505,"post_id":76839786,"comment_id":135519082,"body_markdown":"@Abdo21: I mean what is the `&lt;com.abdo.rotateviewquestion.FixedPosLayout` in xml file?","body":"@Abdo21: I mean what is the <code>&lt;com.abdo.rotateviewquestion.FixedPosLayout</code> in xml file?"},{"owner":{"account_id":16537587,"reputation":486,"user_id":11949116,"display_name":"Abdo21"},"score":0,"creation_date":1691636180,"post_id":76839786,"comment_id":135519208,"body_markdown":"Hi @Mirco0, I&#39;m not completely sure about that. If it&#39;s true, why does the problem only happen when I rotate the view? And also, remember that the pivot point is set using the view&#39;s own coordinates.","body":"Hi @Mirco0, I&#39;m not completely sure about that. If it&#39;s true, why does the problem only happen when I rotate the view? And also, remember that the pivot point is set using the view&#39;s own coordinates."},{"owner":{"account_id":24764408,"reputation":306,"user_id":18648400,"display_name":"Mirco0"},"score":0,"creation_date":1691667355,"post_id":76839786,"comment_id":135523876,"body_markdown":"@Abdo2 that happends because the vertical distance of the points becomes different than 0","body":"@Abdo2 that happends because the vertical distance of the points becomes different than 0"}],"answers":[{"tags":[],"owner":{"account_id":13654747,"reputation":38532,"user_id":9851608,"display_name":"Zain"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1691686215,"creation_date":1691686215,"answer_id":76877798,"question_id":76839786,"body_markdown":"## Cause:\r\n\r\n&gt; setRotation\r\n&gt; Sets the degrees that the view is rotated around the pivot point. Increasing values result in clockwise rotation.\r\n\r\nThe [documentation][2] says that the rotation changes around the pivot point; so when you change the rotation before modifying the pivot point, the rotation considered the original pivot point; then after you modify the pivot, still the rotation considers the original pivot; and therefore you&#39;d see the view jumps.\r\n\r\nIn addition, changing the `pivotX`/`pivotY` values of a view would change the view position on the screen in case that the screen coordinates are different than the pivot point. This answer has a nice [breakdown][1] for that. So, you&#39;d not notice a change for the initial rotation because in that case the pivot point are the same as the screen coordinates. But, that will not be the case when the view is rotated.\r\n\r\n## Solution:\r\n\r\nSo, one simple solution is to get the difference between the view location before and after modifying the pivot; and relocate the view position x/y with that difference:\r\n\r\n```\r\nString TAG = &quot;LOG_TAG&quot;;\r\n\r\npublic void setPivotPoint(int position) {\r\n\r\n\t// Get the location of the View on the screen\r\n\tint[] locationBefore = new int[2];\r\n\tgetLocationOnScreen(locationBefore);\r\n\tLog.d(TAG, &quot;\\ngetLocationOnScreen: x = &quot; + locationBefore[0] + &quot; y = &quot; + locationBefore[1]);\r\n\r\n\tswitch (position) {\r\n\t\t// Set center point as pivot\r\n\t\tcase 0: {\r\n\t\t\tfloat width = getWidth();\r\n\t\t\tfloat height = getHeight();\r\n\t\t\tsetPivotX(width / 2);\r\n\t\t\tsetPivotY(height / 2);\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\t// Set Point 1 as pivot\r\n\t\tcase 1: {\r\n\t\t\tsetPivotX(rectPoint1.centerX());\r\n\t\t\tsetPivotY(rectPoint1.centerY());\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\t// Set Point 2 as pivot\r\n\t\tcase 2: {\r\n\t\t\tsetPivotX(rectPoint2.centerX());\r\n\t\t\tsetPivotY(rectPoint2.centerY());\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\t// Get the new location of the View on the screen after changing the pivotX &amp; pivotY\r\n\tint[] locationAfter = new int[2];\r\n\tgetLocationOnScreen(locationAfter);\r\n\tLog.d(TAG, &quot;getLocationOnScreen: x = &quot; + locationAfter[0] + &quot; y = &quot; + locationAfter[1]);\r\n\r\n\t// Change the current location of the View back to the original location\r\n\tint xDiff = locationAfter[0] - locationBefore[0];\r\n\tsetX(getX() - xDiff);\r\n\tint yDiff = locationAfter[1] - locationBefore[1];\r\n\tsetY(getY() - yDiff);\r\n\r\n\t// Checking the new location\r\n\tgetLocationOnScreen(locationAfter);\r\n\tLog.d(TAG, &quot;getLocationOnScreen: x = &quot; + locationAfter[0] + &quot; y = &quot; + locationAfter[1]);\r\n\r\n}\r\n```\r\n\r\nPreview:\r\n\r\n![](https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExeXpzZHRoemRtMms5MzExdXF6cHE0MnFiMW0zbG5jdHptYXcxYzV2MyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/qCPbqf4NEtOKCT7hXI/giphy.gif)\r\n\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/29367064/9851608\r\n  [2]: https://developer.android.com/reference/android/view/View#setRotation(float)","title":"Issue with Custom View Position Jump when Changing Pivot Point","body":"<h2>Cause:</h2>\n<blockquote>\n<p>setRotation\nSets the degrees that the view is rotated around the pivot point. Increasing values result in clockwise rotation.</p>\n</blockquote>\n<p>The <a href=\"https://developer.android.com/reference/android/view/View#setRotation(float)\" rel=\"nofollow noreferrer\">documentation</a> says that the rotation changes around the pivot point; so when you change the rotation before modifying the pivot point, the rotation considered the original pivot point; then after you modify the pivot, still the rotation considers the original pivot; and therefore you'd see the view jumps.</p>\n<p>In addition, changing the <code>pivotX</code>/<code>pivotY</code> values of a view would change the view position on the screen in case that the screen coordinates are different than the pivot point. This answer has a nice <a href=\"https://stackoverflow.com/a/29367064/9851608\">breakdown</a> for that. So, you'd not notice a change for the initial rotation because in that case the pivot point are the same as the screen coordinates. But, that will not be the case when the view is rotated.</p>\n<h2>Solution:</h2>\n<p>So, one simple solution is to get the difference between the view location before and after modifying the pivot; and relocate the view position x/y with that difference:</p>\n<pre><code>String TAG = &quot;LOG_TAG&quot;;\n\npublic void setPivotPoint(int position) {\n\n    // Get the location of the View on the screen\n    int[] locationBefore = new int[2];\n    getLocationOnScreen(locationBefore);\n    Log.d(TAG, &quot;\\ngetLocationOnScreen: x = &quot; + locationBefore[0] + &quot; y = &quot; + locationBefore[1]);\n\n    switch (position) {\n        // Set center point as pivot\n        case 0: {\n            float width = getWidth();\n            float height = getHeight();\n            setPivotX(width / 2);\n            setPivotY(height / 2);\n            break;\n        }\n\n        // Set Point 1 as pivot\n        case 1: {\n            setPivotX(rectPoint1.centerX());\n            setPivotY(rectPoint1.centerY());\n            break;\n        }\n\n        // Set Point 2 as pivot\n        case 2: {\n            setPivotX(rectPoint2.centerX());\n            setPivotY(rectPoint2.centerY());\n            break;\n        }\n    }\n\n    // Get the new location of the View on the screen after changing the pivotX &amp; pivotY\n    int[] locationAfter = new int[2];\n    getLocationOnScreen(locationAfter);\n    Log.d(TAG, &quot;getLocationOnScreen: x = &quot; + locationAfter[0] + &quot; y = &quot; + locationAfter[1]);\n\n    // Change the current location of the View back to the original location\n    int xDiff = locationAfter[0] - locationBefore[0];\n    setX(getX() - xDiff);\n    int yDiff = locationAfter[1] - locationBefore[1];\n    setY(getY() - yDiff);\n\n    // Checking the new location\n    getLocationOnScreen(locationAfter);\n    Log.d(TAG, &quot;getLocationOnScreen: x = &quot; + locationAfter[0] + &quot; y = &quot; + locationAfter[1]);\n\n}\n</code></pre>\n<p>Preview:</p>\n<p><img src=\"https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExeXpzZHRoemRtMms5MzExdXF6cHE0MnFiMW0zbG5jdHptYXcxYzV2MyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/qCPbqf4NEtOKCT7hXI/giphy.gif\" alt=\"\" /></p>\n"}],"owner":{"account_id":16537587,"reputation":486,"user_id":11949116,"display_name":"Abdo21"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":133,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":76877798,"answer_count":1,"score":1,"last_activity_date":1691686215,"creation_date":1691198313,"question_id":76839786,"body_markdown":"I&#39;m encountering an unexpected behavior in my Android app involving a custom view named `MyView`. I&#39;m attempting to achieve both translation and rotation effects on this view. When the pivot point is set to the center of the view, everything work as expected. However, as soon as I change the pivot point (for instance, to &quot;Point 2&quot; selected from a spinner), the view unexpectedly jumps to a different position, as illustrated in this GIF:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n**Edit**: \r\n\r\n**Observations:**\r\n- The issue primarily arises when the view is rotated. If the view has no rotation (rotation = 0), changing the pivot point doesn&#39;t cause any problems.\r\n- Also if before changing the pivot point, I restore the view to its initial rotation (rotation = 0) this prevent also the issue from occurring.\r\nTo illustrate this point further, here&#39;s an example:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nCould anyone kindly advise on what might be causing the view displacement when changing the pivot point and suggest potential fixes? Your help is much appreciated.\r\n\r\nBelow is the complete code:\r\n\r\n// MainActivity.java\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n    \r\n            FixedPosLayout fixedPosLayout = findViewById(R.id.fixedPosLayout);\r\n    \r\n            MyView myView = new MyView(this);\r\n    \r\n            FixedPosLayout.LayoutParams params =\r\n                    new FixedPosLayout.LayoutParams(200, 400, 300, 80);\r\n    \r\n            fixedPosLayout.addView(myView, params);\r\n    \r\n            ImageButton moveLeftButton = findViewById(R.id.moveLeftButton);\r\n            ImageButton moveRightButton = findViewById(R.id.moveRightButton);\r\n            ImageButton moveUpButton = findViewById(R.id.moveUpButton);\r\n            ImageButton moveBottomButton = findViewById(R.id.moveBottomButton);\r\n    \r\n            ImageButton rotateLeftButton = findViewById(R.id.rotateLeftButton);\r\n            ImageButton rotateRightButton = findViewById(R.id.rotateRightButton);\r\n    \r\n            AppCompatButton resetButton = findViewById(R.id.resetButton);\r\n    \r\n            Spinner spinner = findViewById(R.id.pivotPointSpinner);\r\n    \r\n            float d = 10;\r\n            float r = 10;\r\n    \r\n            moveLeftButton.setOnClickListener(v -&gt; myView.moveLeftBy(d));\r\n            moveRightButton.setOnClickListener(v -&gt; myView.moveRightBy(d));\r\n            moveUpButton.setOnClickListener(v -&gt; myView.moveUpBy(d));\r\n            moveBottomButton.setOnClickListener(v -&gt; myView.moveDownBy(d));\r\n            rotateRightButton.setOnClickListener(v -&gt; myView.rotateClockwiseBy(r));\r\n            rotateLeftButton.setOnClickListener(v -&gt; myView.rotateConterClockwiseBy(r));\r\n    \r\n            resetButton.setOnClickListener(v -&gt; {\r\n                myView.reset();\r\n                spinner.setSelection(0); // Select first item\r\n            });\r\n    \r\n            // Spinner\r\n            String[] items = {&quot;Center Point&quot;, &quot;Point 1&quot;, &quot;Point 2&quot;};\r\n    \r\n            ArrayAdapter&lt;String&gt; adapter = new ArrayAdapter&lt;&gt;(this,\r\n                    android.R.layout.simple_spinner_item, items);\r\n    \r\n            adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);\r\n    \r\n            spinner.setAdapter(adapter);\r\n    \r\n            // Handle spinner click\r\n            spinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {\r\n                @Override\r\n                public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {\r\n                    myView.setPivotPoint(position);\r\n                }\r\n    \r\n                @Override\r\n                public void onNothingSelected(AdapterView&lt;?&gt; parent) {\r\n                    myView.setPivotPoint(0); // Set center point as default pivot point\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n// MyView.java\r\n\r\n    public class MyView extends View {\r\n    \r\n        public static final int RADIUS = 24; // Anchor radius\r\n        public static final int OFFSET = 1;\r\n    \r\n        private final Paint paint;\r\n    \r\n        public RectF rectPoint1;\r\n        public RectF rectPoint2;\r\n    \r\n        public MyView(Context context) {\r\n            super(context);\r\n    \r\n            paint = new Paint();\r\n            paint.setStyle(Paint.Style.STROKE);\r\n    \r\n            rectPoint1 = new RectF();\r\n            rectPoint2 = new RectF();\r\n        }\r\n    \r\n        public void moveRightBy(float dRight) {\r\n            setX(getX() + dRight);\r\n        }\r\n    \r\n        public void moveLeftBy(float dLeft) {\r\n            moveRightBy(-dLeft);\r\n        }\r\n    \r\n        public void moveDownBy(float dDown) {\r\n            setY(getY() + dDown);\r\n        }\r\n    \r\n        public void moveUpBy(float dUp) {\r\n            moveDownBy(-dUp);\r\n        }\r\n    \r\n        public void rotateClockwiseBy(float dDegree) {\r\n            setRotation(getRotation() + dDegree);\r\n        }\r\n    \r\n        public void rotateConterClockwiseBy(float dDegree){\r\n            rotateClockwiseBy(-dDegree);\r\n        }\r\n    \r\n        public void setPivotPoint(int position) {\r\n            switch (position) {\r\n                // Set center point as pivot\r\n                case 0: {\r\n                    float width = getWidth();\r\n                    float height = getHeight();\r\n    \r\n                    setPivotX(width/2);\r\n                    setPivotY(height/2);\r\n                    break;\r\n                }\r\n    \r\n                // Set Point 1 as pivot\r\n                case 1: {\r\n                    setPivotX(rectPoint1.centerX());\r\n                    setPivotY(rectPoint1.centerY());\r\n                    break;\r\n                }\r\n    \r\n                // Set Point 2 as pivot\r\n                case 2: {\r\n                    setPivotX(rectPoint2.centerX());\r\n                    setPivotY(rectPoint2.centerY());\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        protected void onDraw(Canvas canvas) {\r\n            float width = getWidth();\r\n            float height = getHeight();\r\n    \r\n            //Draw line between anchor points\r\n            canvas.drawLine(\r\n                    rectPoint1.centerX(), rectPoint1.centerY(),\r\n                    rectPoint2.centerX(), rectPoint2.centerY(), paint);\r\n    \r\n            //Draw anchor circle\r\n            canvas.drawCircle(rectPoint1.centerX(), rectPoint1.centerY(), RADIUS, paint);\r\n            canvas.drawCircle(rectPoint2.centerX(), rectPoint2.centerY(), RADIUS, paint);\r\n    \r\n            //Draw bounding rect\r\n            canvas.drawRect(OFFSET, OFFSET, width - OFFSET, height - OFFSET, paint);\r\n    \r\n            // Draw anchors label\r\n            canvas.drawText(&quot;1&quot;, rectPoint1.centerX(), rectPoint1.centerY(), paint);\r\n            canvas.drawText(&quot;2&quot;, rectPoint2.centerX(), rectPoint2.centerY(), paint);\r\n    \r\n            // Draw small circle at the center\r\n            canvas.drawCircle(width/2f, height/2f, 4, paint);\r\n        }\r\n    \r\n        @Override\r\n        protected void onSizeChanged(int w, int h, int oldw, int oldh) {\r\n            //Recompute anchors rect\r\n            rectPoint1.set(\r\n                    OFFSET, h /2f - RADIUS + OFFSET,\r\n                    2*RADIUS, h /2f + RADIUS - OFFSET\r\n            );\r\n    \r\n            rectPoint2.set(\r\n                    w - 2*RADIUS, h /2f - RADIUS + OFFSET,\r\n                    w - OFFSET, h /2f + RADIUS - OFFSET\r\n            );\r\n        }\r\n    \r\n        @Override\r\n        protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {\r\n            // Measure exactly\r\n            int width = MeasureSpec.getSize(widthMeasureSpec);\r\n            int height = MeasureSpec.getSize(heightMeasureSpec);\r\n    \r\n            setMeasuredDimension(width, height);\r\n        }\r\n    \r\n    \r\n        public void reset() {\r\n            setPivotPoint(0);\r\n    \r\n            setRotation(0);\r\n    \r\n            setX(200);\r\n            setY(400);\r\n        }\r\n    }\r\n\r\n\r\n// FixedPosLayout.java\r\n\r\n    public class FixedPosLayout extends ViewGroup {\r\n    \r\n        public FixedPosLayout(Context context) {\r\n            super(context);\r\n        }\r\n    \r\n        public FixedPosLayout(Context context, AttributeSet attrs) {\r\n            super(context, attrs);\r\n        }\r\n    \r\n        public FixedPosLayout(Context context, AttributeSet attrs, int defStyleAttr) {\r\n            super(context, attrs, defStyleAttr);\r\n        }\r\n    \r\n        @Override\r\n        protected void onLayout(boolean changed, int l, int t, int r, int b) {\r\n            int count = getChildCount();\r\n    \r\n            for (int i = 0; i&lt;count; ++i) {\r\n                View child = getChildAt(i);\r\n    \r\n                FixedPosLayout.LayoutParams params =\r\n                        (FixedPosLayout.LayoutParams) child.getLayoutParams();\r\n    \r\n                int left = params.x;\r\n                int top = params.y;\r\n    \r\n                child.layout(left, top,\r\n                        left + child.getMeasuredWidth(),\r\n                        top + child.getMeasuredHeight());\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {\r\n            // Measure this view\r\n            super.onMeasure(widthMeasureSpec, heightMeasureSpec);\r\n    \r\n            // Measure children\r\n            int count = getChildCount();\r\n            for (int i = 0; i&lt;count; ++i) {\r\n                View child = getChildAt(i);\r\n    \r\n                FixedPosLayout.LayoutParams lp =\r\n                        (FixedPosLayout.LayoutParams) child.getLayoutParams();\r\n    \r\n                int childWidthMeasureSpec =\r\n                        MeasureSpec.makeMeasureSpec(lp.width, MeasureSpec.EXACTLY);\r\n    \r\n                int childHeightMeasureSpec =\r\n                        MeasureSpec.makeMeasureSpec(lp.height, MeasureSpec.EXACTLY);\r\n    \r\n                child.measure(childWidthMeasureSpec, childHeightMeasureSpec);\r\n            }\r\n        }\r\n    \r\n        public static class LayoutParams extends ViewGroup.LayoutParams {\r\n            public int x;\r\n            public int y;\r\n    \r\n            public LayoutParams(int x, int y, int width, int height) {\r\n                super(width, height);\r\n                this.x = x;\r\n                this.y = y;\r\n            }\r\n        }\r\n    }\r\n\r\nactivity_main.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;androidx.constraintlayout.widget.ConstraintLayout\r\n        xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        tools:context=&quot;.MainActivity&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:layout_width=&quot;match_parent&quot;&gt;\r\n    \r\n        &lt;com.abdo.rotateviewquestion.FixedPosLayout\r\n            android:layout_width=&quot;0dp&quot;\r\n            android:layout_height=&quot;0dp&quot;\r\n            android:id=&quot;@+id/fixedPosLayout&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n            app:layout_constraintBottom_toTopOf=&quot;@id/barrier_horizontal_top&quot;/&gt;\r\n        \r\n        &lt;ImageButton\r\n            android:id=&quot;@+id/moveRightButton&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:src=&quot;@drawable/move_right&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toEndOf=&quot;@+id/barrier_vertical_right&quot;/&gt;\r\n    \r\n        &lt;ImageButton\r\n            android:id=&quot;@+id/moveLeftButton&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:src=&quot;@drawable/move_left&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintEnd_toStartOf=&quot;@id/barrier_vertical_left&quot;/&gt;\r\n    \r\n        &lt;ImageButton\r\n            android:id=&quot;@+id/moveUpButton&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:src=&quot;@drawable/move_up&quot;\r\n            app:layout_constraintBottom_toTopOf=&quot;@+id/moveBottomButton&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;@id/moveBottomButton&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;@id/moveBottomButton&quot; /&gt;\r\n    \r\n        &lt;ImageButton\r\n            android:id=&quot;@+id/moveBottomButton&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:src=&quot;@drawable/move_down&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toEndOf=&quot;@+id/moveLeftButton&quot;/&gt;\r\n    \r\n        &lt;ImageButton\r\n            android:id=&quot;@+id/rotateLeftButton&quot;\r\n            android:layout_width=&quot;70dp&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:src=&quot;@drawable/rotate_left&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot; /&gt;\r\n        \r\n        &lt;ImageButton\r\n            android:id=&quot;@+id/rotateRightButton&quot;\r\n            android:layout_width=&quot;70dp&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:src=&quot;@drawable/rotate_right&quot;\r\n            app:layout_constraintEnd_toStartOf=&quot;@id/rotateLeftButton&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot; /&gt;\r\n        \r\n        &lt;Spinner\r\n            android:id=&quot;@+id/pivotPointSpinner&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toBottomOf=&quot;@id/barrier_horizontal_top&quot;/&gt;\r\n    \r\n        &lt;androidx.appcompat.widget.AppCompatButton\r\n            android:id=&quot;@+id/resetButton&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;Reset&quot;\r\n            app:layout_constraintTop_toBottomOf=&quot;@id/barrier_horizontal_top&quot;\r\n            app:layout_constraintEnd_toStartOf=&quot;@id/pivotPointSpinner&quot;/&gt;\r\n    \r\n        &lt;androidx.constraintlayout.widget.Barrier\r\n            android:id=&quot;@+id/barrier_vertical_right&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            app:barrierDirection=&quot;right&quot;\r\n            app:constraint_referenced_ids=&quot;moveUpButton, moveBottomButton&quot;/&gt;\r\n    \r\n    \r\n        &lt;androidx.constraintlayout.widget.Barrier\r\n            android:id=&quot;@+id/barrier_vertical_left&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            app:barrierDirection=&quot;left&quot;\r\n            app:constraint_referenced_ids=&quot;moveUpButton, moveBottomButton&quot;/&gt;\r\n    \r\n        &lt;androidx.constraintlayout.widget.Barrier\r\n            android:id=&quot;@+id/barrier_horizontal_top&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            app:barrierDirection=&quot;top&quot;\r\n            app:constraint_referenced_ids=&quot;moveUpButton, rotateLeftButton, rotateRightButton&quot;/&gt;\r\n        \r\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/baia0.gif\r\n  [2]: https://i.stack.imgur.com/GG2yF.gif","title":"Issue with Custom View Position Jump when Changing Pivot Point","body":"<p>I'm encountering an unexpected behavior in my Android app involving a custom view named <code>MyView</code>. I'm attempting to achieve both translation and rotation effects on this view. When the pivot point is set to the center of the view, everything work as expected. However, as soon as I change the pivot point (for instance, to &quot;Point 2&quot; selected from a spinner), the view unexpectedly jumps to a different position, as illustrated in this GIF:</p>\n<p><a href=\"https://i.stack.imgur.com/baia0.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/baia0.gif\" alt=\"enter image description here\" /></a></p>\n<p><strong>Edit</strong>:</p>\n<p><strong>Observations:</strong></p>\n<ul>\n<li>The issue primarily arises when the view is rotated. If the view has no rotation (rotation = 0), changing the pivot point doesn't cause any problems.</li>\n<li>Also if before changing the pivot point, I restore the view to its initial rotation (rotation = 0) this prevent also the issue from occurring.\nTo illustrate this point further, here's an example:</li>\n</ul>\n<p><a href=\"https://i.stack.imgur.com/GG2yF.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GG2yF.gif\" alt=\"enter image description here\" /></a></p>\n<p>Could anyone kindly advise on what might be causing the view displacement when changing the pivot point and suggest potential fixes? Your help is much appreciated.</p>\n<p>Below is the complete code:</p>\n<p>// MainActivity.java</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        FixedPosLayout fixedPosLayout = findViewById(R.id.fixedPosLayout);\n\n        MyView myView = new MyView(this);\n\n        FixedPosLayout.LayoutParams params =\n                new FixedPosLayout.LayoutParams(200, 400, 300, 80);\n\n        fixedPosLayout.addView(myView, params);\n\n        ImageButton moveLeftButton = findViewById(R.id.moveLeftButton);\n        ImageButton moveRightButton = findViewById(R.id.moveRightButton);\n        ImageButton moveUpButton = findViewById(R.id.moveUpButton);\n        ImageButton moveBottomButton = findViewById(R.id.moveBottomButton);\n\n        ImageButton rotateLeftButton = findViewById(R.id.rotateLeftButton);\n        ImageButton rotateRightButton = findViewById(R.id.rotateRightButton);\n\n        AppCompatButton resetButton = findViewById(R.id.resetButton);\n\n        Spinner spinner = findViewById(R.id.pivotPointSpinner);\n\n        float d = 10;\n        float r = 10;\n\n        moveLeftButton.setOnClickListener(v -&gt; myView.moveLeftBy(d));\n        moveRightButton.setOnClickListener(v -&gt; myView.moveRightBy(d));\n        moveUpButton.setOnClickListener(v -&gt; myView.moveUpBy(d));\n        moveBottomButton.setOnClickListener(v -&gt; myView.moveDownBy(d));\n        rotateRightButton.setOnClickListener(v -&gt; myView.rotateClockwiseBy(r));\n        rotateLeftButton.setOnClickListener(v -&gt; myView.rotateConterClockwiseBy(r));\n\n        resetButton.setOnClickListener(v -&gt; {\n            myView.reset();\n            spinner.setSelection(0); // Select first item\n        });\n\n        // Spinner\n        String[] items = {&quot;Center Point&quot;, &quot;Point 1&quot;, &quot;Point 2&quot;};\n\n        ArrayAdapter&lt;String&gt; adapter = new ArrayAdapter&lt;&gt;(this,\n                android.R.layout.simple_spinner_item, items);\n\n        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);\n\n        spinner.setAdapter(adapter);\n\n        // Handle spinner click\n        spinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {\n            @Override\n            public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {\n                myView.setPivotPoint(position);\n            }\n\n            @Override\n            public void onNothingSelected(AdapterView&lt;?&gt; parent) {\n                myView.setPivotPoint(0); // Set center point as default pivot point\n            }\n        });\n    }\n}\n</code></pre>\n<p>// MyView.java</p>\n<pre><code>public class MyView extends View {\n\n    public static final int RADIUS = 24; // Anchor radius\n    public static final int OFFSET = 1;\n\n    private final Paint paint;\n\n    public RectF rectPoint1;\n    public RectF rectPoint2;\n\n    public MyView(Context context) {\n        super(context);\n\n        paint = new Paint();\n        paint.setStyle(Paint.Style.STROKE);\n\n        rectPoint1 = new RectF();\n        rectPoint2 = new RectF();\n    }\n\n    public void moveRightBy(float dRight) {\n        setX(getX() + dRight);\n    }\n\n    public void moveLeftBy(float dLeft) {\n        moveRightBy(-dLeft);\n    }\n\n    public void moveDownBy(float dDown) {\n        setY(getY() + dDown);\n    }\n\n    public void moveUpBy(float dUp) {\n        moveDownBy(-dUp);\n    }\n\n    public void rotateClockwiseBy(float dDegree) {\n        setRotation(getRotation() + dDegree);\n    }\n\n    public void rotateConterClockwiseBy(float dDegree){\n        rotateClockwiseBy(-dDegree);\n    }\n\n    public void setPivotPoint(int position) {\n        switch (position) {\n            // Set center point as pivot\n            case 0: {\n                float width = getWidth();\n                float height = getHeight();\n\n                setPivotX(width/2);\n                setPivotY(height/2);\n                break;\n            }\n\n            // Set Point 1 as pivot\n            case 1: {\n                setPivotX(rectPoint1.centerX());\n                setPivotY(rectPoint1.centerY());\n                break;\n            }\n\n            // Set Point 2 as pivot\n            case 2: {\n                setPivotX(rectPoint2.centerX());\n                setPivotY(rectPoint2.centerY());\n                break;\n            }\n        }\n    }\n\n    @Override\n    protected void onDraw(Canvas canvas) {\n        float width = getWidth();\n        float height = getHeight();\n\n        //Draw line between anchor points\n        canvas.drawLine(\n                rectPoint1.centerX(), rectPoint1.centerY(),\n                rectPoint2.centerX(), rectPoint2.centerY(), paint);\n\n        //Draw anchor circle\n        canvas.drawCircle(rectPoint1.centerX(), rectPoint1.centerY(), RADIUS, paint);\n        canvas.drawCircle(rectPoint2.centerX(), rectPoint2.centerY(), RADIUS, paint);\n\n        //Draw bounding rect\n        canvas.drawRect(OFFSET, OFFSET, width - OFFSET, height - OFFSET, paint);\n\n        // Draw anchors label\n        canvas.drawText(&quot;1&quot;, rectPoint1.centerX(), rectPoint1.centerY(), paint);\n        canvas.drawText(&quot;2&quot;, rectPoint2.centerX(), rectPoint2.centerY(), paint);\n\n        // Draw small circle at the center\n        canvas.drawCircle(width/2f, height/2f, 4, paint);\n    }\n\n    @Override\n    protected void onSizeChanged(int w, int h, int oldw, int oldh) {\n        //Recompute anchors rect\n        rectPoint1.set(\n                OFFSET, h /2f - RADIUS + OFFSET,\n                2*RADIUS, h /2f + RADIUS - OFFSET\n        );\n\n        rectPoint2.set(\n                w - 2*RADIUS, h /2f - RADIUS + OFFSET,\n                w - OFFSET, h /2f + RADIUS - OFFSET\n        );\n    }\n\n    @Override\n    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {\n        // Measure exactly\n        int width = MeasureSpec.getSize(widthMeasureSpec);\n        int height = MeasureSpec.getSize(heightMeasureSpec);\n\n        setMeasuredDimension(width, height);\n    }\n\n\n    public void reset() {\n        setPivotPoint(0);\n\n        setRotation(0);\n\n        setX(200);\n        setY(400);\n    }\n}\n</code></pre>\n<p>// FixedPosLayout.java</p>\n<pre><code>public class FixedPosLayout extends ViewGroup {\n\n    public FixedPosLayout(Context context) {\n        super(context);\n    }\n\n    public FixedPosLayout(Context context, AttributeSet attrs) {\n        super(context, attrs);\n    }\n\n    public FixedPosLayout(Context context, AttributeSet attrs, int defStyleAttr) {\n        super(context, attrs, defStyleAttr);\n    }\n\n    @Override\n    protected void onLayout(boolean changed, int l, int t, int r, int b) {\n        int count = getChildCount();\n\n        for (int i = 0; i&lt;count; ++i) {\n            View child = getChildAt(i);\n\n            FixedPosLayout.LayoutParams params =\n                    (FixedPosLayout.LayoutParams) child.getLayoutParams();\n\n            int left = params.x;\n            int top = params.y;\n\n            child.layout(left, top,\n                    left + child.getMeasuredWidth(),\n                    top + child.getMeasuredHeight());\n        }\n    }\n\n    @Override\n    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {\n        // Measure this view\n        super.onMeasure(widthMeasureSpec, heightMeasureSpec);\n\n        // Measure children\n        int count = getChildCount();\n        for (int i = 0; i&lt;count; ++i) {\n            View child = getChildAt(i);\n\n            FixedPosLayout.LayoutParams lp =\n                    (FixedPosLayout.LayoutParams) child.getLayoutParams();\n\n            int childWidthMeasureSpec =\n                    MeasureSpec.makeMeasureSpec(lp.width, MeasureSpec.EXACTLY);\n\n            int childHeightMeasureSpec =\n                    MeasureSpec.makeMeasureSpec(lp.height, MeasureSpec.EXACTLY);\n\n            child.measure(childWidthMeasureSpec, childHeightMeasureSpec);\n        }\n    }\n\n    public static class LayoutParams extends ViewGroup.LayoutParams {\n        public int x;\n        public int y;\n\n        public LayoutParams(int x, int y, int width, int height) {\n            super(width, height);\n            this.x = x;\n            this.y = y;\n        }\n    }\n}\n</code></pre>\n<p>activity_main.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    tools:context=&quot;.MainActivity&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:layout_width=&quot;match_parent&quot;&gt;\n\n    &lt;com.abdo.rotateviewquestion.FixedPosLayout\n        android:layout_width=&quot;0dp&quot;\n        android:layout_height=&quot;0dp&quot;\n        android:id=&quot;@+id/fixedPosLayout&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        app:layout_constraintBottom_toTopOf=&quot;@id/barrier_horizontal_top&quot;/&gt;\n    \n    &lt;ImageButton\n        android:id=&quot;@+id/moveRightButton&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:src=&quot;@drawable/move_right&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintStart_toEndOf=&quot;@+id/barrier_vertical_right&quot;/&gt;\n\n    &lt;ImageButton\n        android:id=&quot;@+id/moveLeftButton&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:src=&quot;@drawable/move_left&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintEnd_toStartOf=&quot;@id/barrier_vertical_left&quot;/&gt;\n\n    &lt;ImageButton\n        android:id=&quot;@+id/moveUpButton&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:src=&quot;@drawable/move_up&quot;\n        app:layout_constraintBottom_toTopOf=&quot;@+id/moveBottomButton&quot;\n        app:layout_constraintEnd_toEndOf=&quot;@id/moveBottomButton&quot;\n        app:layout_constraintStart_toStartOf=&quot;@id/moveBottomButton&quot; /&gt;\n\n    &lt;ImageButton\n        android:id=&quot;@+id/moveBottomButton&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:src=&quot;@drawable/move_down&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintStart_toEndOf=&quot;@+id/moveLeftButton&quot;/&gt;\n\n    &lt;ImageButton\n        android:id=&quot;@+id/rotateLeftButton&quot;\n        android:layout_width=&quot;70dp&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:src=&quot;@drawable/rotate_left&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot; /&gt;\n    \n    &lt;ImageButton\n        android:id=&quot;@+id/rotateRightButton&quot;\n        android:layout_width=&quot;70dp&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:src=&quot;@drawable/rotate_right&quot;\n        app:layout_constraintEnd_toStartOf=&quot;@id/rotateLeftButton&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot; /&gt;\n    \n    &lt;Spinner\n        android:id=&quot;@+id/pivotPointSpinner&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintTop_toBottomOf=&quot;@id/barrier_horizontal_top&quot;/&gt;\n\n    &lt;androidx.appcompat.widget.AppCompatButton\n        android:id=&quot;@+id/resetButton&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;Reset&quot;\n        app:layout_constraintTop_toBottomOf=&quot;@id/barrier_horizontal_top&quot;\n        app:layout_constraintEnd_toStartOf=&quot;@id/pivotPointSpinner&quot;/&gt;\n\n    &lt;androidx.constraintlayout.widget.Barrier\n        android:id=&quot;@+id/barrier_vertical_right&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        app:barrierDirection=&quot;right&quot;\n        app:constraint_referenced_ids=&quot;moveUpButton, moveBottomButton&quot;/&gt;\n\n\n    &lt;androidx.constraintlayout.widget.Barrier\n        android:id=&quot;@+id/barrier_vertical_left&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        app:barrierDirection=&quot;left&quot;\n        app:constraint_referenced_ids=&quot;moveUpButton, moveBottomButton&quot;/&gt;\n\n    &lt;androidx.constraintlayout.widget.Barrier\n        android:id=&quot;@+id/barrier_horizontal_top&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        app:barrierDirection=&quot;top&quot;\n        app:constraint_referenced_ids=&quot;moveUpButton, rotateLeftButton, rotateRightButton&quot;/&gt;\n    \n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n"},{"tags":["java","3d"],"comments":[{"owner":{"account_id":682692,"reputation":49061,"user_id":535275,"accept_rate":91,"display_name":"Scott Hunter"},"score":0,"creation_date":1691685498,"post_id":76877699,"comment_id":135528177,"body_markdown":"Please post your code as text, not a link to text.","body":"Please post your code as text, not a link to text."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1691701912,"post_id":76877699,"comment_id":135531127,"body_markdown":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example).","body":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":23308839,"reputation":36,"user_id":17388407,"display_name":"Caleb Thoburn"},"score":0,"creation_date":1692659307,"post_id":76877699,"comment_id":135651275,"body_markdown":"I would like to note that replacing this:\n\nMatrix3 transform = headingTransform.multiply(pitchTransform);\n\nwith this:\n\nMatrix3 transform = pitchTransform.multiply(headingTransform);\n\nFixes the x rotation, but ruins the y rotation.","body":"I would like to note that replacing this:  Matrix3 transform = headingTransform.multiply(pitchTransform);  with this:  Matrix3 transform = pitchTransform.multiply(headingTransform);  Fixes the x rotation, but ruins the y rotation."}],"owner":{"account_id":23308839,"reputation":36,"user_id":17388407,"display_name":"Caleb Thoburn"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691686001,"creation_date":1691685304,"question_id":76877699,"body_markdown":"I have recently been working on a 3D renderer in java for the first time, It works well when the user drags it along the y axis, but dragging an object along the x axis doesn&#39;t always properly rotate it relitive to the user.[![cube example](https://i.stack.imgur.com/36zSX.gif)](https://i.stack.imgur.com/36zSX.gif) This cube only rotates along the x axis correctly when the green side is on the top. Otherwise it will roll, or spin backwards. This is my code:\r\n\r\n        package Main;\r\n        \r\n        import java.awt.BorderLayout;\r\n        import java.awt.Color;\r\n        import java.awt.Container;\r\n        import java.awt.Graphics;\r\n        import java.awt.Graphics2D;\r\n        import java.awt.Image;\r\n        import java.awt.MouseInfo;\r\n        import java.awt.event.MouseEvent;\r\n        import java.awt.event.MouseMotionListener;\r\n        import java.awt.geom.Path2D;\r\n        import java.awt.image.BufferedImage;\r\n        import java.util.ArrayList;\r\n        import java.util.Arrays;\r\n        import java.util.List;\r\n        import java.util.stream.Collectors;\r\n\r\n        import javax.swing.JFrame;\r\n        import javax.swing.JPanel;\r\n\r\n\r\n        public class Main {\r\n\t\r\n\t        public static void main(String[] args) {\r\n\t\t\r\n\t\t        final int[] x = {0};\r\n\t\t        final int[] y = {0};\r\n\t\t\r\n\t\t        JFrame frame = new JFrame();\r\n\t\t        Container pane = frame.getContentPane();\r\n\t\t        pane.setLayout(new BorderLayout());\r\n\t\t\r\n\t\t        JPanel renderPanel = new JPanel() {\r\n\t\t\r\n\t\t\t        public void paintComponent(Graphics g) {\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t        Graphics2D g2 = (Graphics2D) g;\r\n\t\t\t\t        g2.setColor(Color.BLACK);\r\n\t\t\t\t        g2.fillRect(0, 0, getWidth(), getHeight());\r\n\t\t\t\t\r\n\t\t\t\t        List&lt;Polygon&gt; polygons = new ArrayList&lt;&gt;();\r\n\t\t\t\t        polygons.add(new Polygon(new ArrayList&lt;&gt;(), Color.WHITE));\r\n\t\t\t\t        polygons.get(0).vertices.add(new Point(100, 100, 100));\r\n\t\t\t\t        polygons.get(0).vertices.add(new Point(-100, 100, 100));\r\n\t\t\t\t        polygons.get(0).vertices.add(new Point(-100, -100, 100));\r\n\t\t\t\t        polygons.get(0).vertices.add(new Point(100, -100, 100));\r\n\t\t\t\t\r\n\t\t\t\t        polygons.add(new Polygon(new ArrayList&lt;&gt;(), Color.RED));\r\n\t\t\t\t        polygons.get(1).vertices.add(new Point(100, 100, -100));\r\n\t\t\t\t        polygons.get(1).vertices.add(new Point(-100, 100, -100));\r\n\t\t\t\t        polygons.get(1).vertices.add(new Point(-100, -100, -100));\r\n\t\t\t\t        polygons.get(1).vertices.add(new Point(100, -100, -100));\r\n\r\n\t\t\t\t        polygons.add(new Polygon(new ArrayList&lt;&gt;(), Color.BLUE));\r\n\t\t\t\t        polygons.get(2).vertices.add(new Point(100, 100, 100));\r\n\t\t\t\t        polygons.get(2).vertices.add(new Point(-100, 100, 100));\r\n\t\t\t\t        polygons.get(2).vertices.add(new Point(-100, 100, -100));\r\n\t\t\t\t        polygons.get(2).vertices.add(new Point(100, 100, -100));\r\n\t\t\t\r\n\t\t\t\t        polygons.add(new Polygon(new ArrayList&lt;&gt;(), Color.GREEN));\r\n\t\t\t\t        polygons.get(3).vertices.add(new Point(-100, -100, 100));\r\n\t\t\t\t        polygons.get(3).vertices.add(new Point(-100, -100, -100));\r\n\t\t\t\t        polygons.get(3).vertices.add(new Point(100, -100, -100));\r\n\t\t\t\t        polygons.get(3).vertices.add(new Point(100, -100, 100));\r\n\t\t\t\t\r\n\t\t\t\t        polygons.add(new Polygon(new ArrayList&lt;&gt;(), Color.YELLOW));\r\n\t\t\t\t        polygons.get(4).vertices.add(new Point(100, 100, 100));\r\n\t\t\t\t        polygons.get(4).vertices.add(new Point(100, -100, 100));\r\n\t\t\t\t        polygons.get(4).vertices.add(new Point(100, -100, -100));\r\n\t\t\t\t        polygons.get(4).vertices.add(new Point(100, 100, -100));\r\n\r\n\t\t\t\t        polygons.add(new Polygon(new ArrayList&lt;&gt;(), Color.ORANGE));\r\n\t\t\t\t        polygons.get(5).vertices.add(new Point(-100, 100, 100));\r\n\t\t\t\t        polygons.get(5).vertices.add(new Point(-100, -100, 100));\r\n\t\t\t\t        polygons.get(5).vertices.add(new Point(-100, -100, -100));\r\n\t\t\t\t        polygons.get(5).vertices.add(new Point(-100, 100, -100));\r\n\t\t\t\t\r\n\t\t\t\t        double heading = Math.toRadians(x[0]);\r\n\t\t\t\t        Matrix3 headingTransform = new Matrix3(new double[] {\r\n\t\t\t\t\t\t        Math.cos(heading), 0, -Math.sin(heading),\r\n\t\t\t\t\t\t        0,1,0,\r\n\t\t\t\t\t\t        Math.sin(heading), 0, Math.cos(heading)\r\n\t\t\t\t        });\r\n\t\t\t\t\r\n\t\t\t\t        double pitch = Math.toRadians(y[0]);\r\n\t\t\t\t        Matrix3 pitchTransform = new Matrix3(new double[] {\r\n\t\t\t\t\t\t        1, 0, 0,\r\n\t\t\t\t\t\t        0, Math.cos(pitch), Math.sin(pitch),\r\n\t\t\t\t\t\t        0, -Math.sin(pitch), Math.cos(pitch)\r\n\t\t\t\t        });\r\n\t\t\t\t\r\n\t\t\t\t        Matrix3 transform = headingTransform.multiply(pitchTransform);\r\n\t\t\t\t\r\n\t\t\t\t        g2.translate(getWidth() / 2, getHeight() / 2);\r\n\t\t\t\t\r\n\t\t\t\t        BufferedImage img = new BufferedImage(frame.getWidth(), frame.getHeight(), BufferedImage.TYPE_INT_ARGB);\r\n\r\n\t\t\t\t        double[] zBuffer = new double[img.getWidth() * img.getHeight()];\r\n\r\n\t\t\t\t        for (int q = 0; q &lt; zBuffer.length; q++) {\r\n\t\t\t\t            zBuffer[q] = Double.NEGATIVE_INFINITY;\r\n\t\t\t\t        }\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t        for (Polygon polygon : polygons) {\r\n\t\t\t\t\t        Polygon transformedPolygon = new Polygon(new ArrayList&lt;&gt;(), polygon.color);\r\n\t\t\t\t\t        for(Point point : polygon.vertices) {\r\n\t\t\t\t\t\ttransformedPolygon.vertices.add(transform.transform(point));\r\n\t\t\t\t\t        }\r\n\t\t\t\t\t\r\n\t\t\t\t\t        double minX = Double.POSITIVE_INFINITY;\r\n\t\t\t\t\t        double maxX = Double.NEGATIVE_INFINITY;\r\n\t\t\t\t\t        double minY = Double.POSITIVE_INFINITY;\r\n\t\t\t\t\t        double maxY = Double.NEGATIVE_INFINITY;\r\n\t\t\t\t\t\r\n\t\t\t\t\t        for (Point point : transformedPolygon.vertices) {\r\n\t\t\t\t\t            minX = Math.min(minX, point.x);\r\n\t\t\t\t\t            maxX = Math.max(maxX, point.x);\r\n\t\t\t\t\t            minY = Math.min(minY, point.y);\r\n\t\t\t\t\t            maxY = Math.max(maxY, point.y);\r\n\t\t\t\t        \t}\r\n\t\t\t\t\t\r\n\t\t\t\t        \tminX = Math.max(-frame.getWidth()/2, minX);\r\n\t\t\t\t        \tmaxX = Math.min(frame.getWidth(), maxX);\r\n\t\t\t\t        \tminY = Math.max(-frame.getHeight()/2, minY);\r\n\t\t\t\t        \tmaxY = Math.min(frame.getHeight(), maxY);\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t        \tfor (int y = (int) minY; y &lt;= maxY; y++) {\r\n\t\t\t\t\t        \t\tfor (int x = (int) minX; x &lt;= maxX; x++) {\r\n\t\t\t\t\t\t\t        \tPoint pixel = new Point(x, y, 0);\r\n\t\t\t\t\t\t\t        \tif (transformedPolygon.isPointInsidePolygon(pixel)) {\r\n\t\t\t\t\t\t\t        \t\tdouble depth = 0;\r\n\t\t\t\t\t\t\t        \t\tfor(Point point: transformedPolygon.vertices) {\r\n\t\t\t\t\t\t\t\t\t        \tdepth += point.z;\r\n\t\t\t\t\t\t\t\t\t        }\r\n\t\t\t\t\t\t\t\t\t        int zIndex = ((y + frame.getHeight()/2) * img.getWidth()) + x + frame.getWidth()/2;\r\n\t\t\t\t\t\t\t\t        \tif (zBuffer[zIndex] &lt; depth) {\r\n\t\t\t\t\t\t\t\t\t        \timg.setRGB(x + frame.getWidth()/2, y + frame.getHeight()/2, transformedPolygon.color.getRGB());\r\n\t\t\t\t\t\t\t\t\t        \tzBuffer[zIndex] = depth;\r\n\t\t\t\t\t\t\t\t\t        }\r\n\t\t\t\t\t\t\t\t        }\r\n\t\t\t\t\t\t\t        }\r\n\t\t\t\t\t        \t} \r\n\t\t\t\t\t        g2.drawImage(img, -frame.getWidth()/2, -frame.getHeight()/2, null);\t\r\n\t\t\t\t        }\r\n\t\t\t        }\r\n\t        \t};\r\n\t\t\r\n\t\t        renderPanel.addMouseMotionListener(new MouseMotionListener() {\r\n\t\t\t        Point mousePos = new Point(MouseInfo.getPointerInfo().getLocation().x,MouseInfo.getPointerInfo().getLocation().y, 0);\r\n\t\t\t        Point lastMousePosition = new Point(0, 0, 0);\r\n\t\t\t        @Override\r\n\t\t\t        public void mouseDragged(MouseEvent e) {\r\n\t\t\t        \tmousePos = new Point(MouseInfo.getPointerInfo().getLocation().x,MouseInfo.getPointerInfo().getLocation().y, 0);\r\n\t\t\t\t        x[0] += (mousePos.x - lastMousePosition.x);\r\n\t\t\t\t        y[0] -= (mousePos.y - lastMousePosition.y);\r\n\t\t\t        \tlastMousePosition.x = mousePos.x;\r\n\t\t\t        \tlastMousePosition.y = mousePos.y;\r\n\t\t\t        \trenderPanel.repaint();\r\n\t\t        \t}\r\n\r\n\t\t\t        @Override\r\n\t\t\t        public void mouseMoved(MouseEvent e) {\r\n\t\t\t        \tif (e.getButton() != MouseEvent.BUTTON1) {\r\n\t\t\t\t        \tmousePos = new Point(MouseInfo.getPointerInfo().getLocation().x,MouseInfo.getPointerInfo().getLocation().y, 0);\r\n\t\t\t\t        \tlastMousePosition.x = mousePos.x;\r\n\t\t\t\t\t        lastMousePosition.y = mousePos.y;\r\n\t\t\t\t        }\r\n\t\t\t        }\r\n\t\t        });\r\n\t\t\r\n\t\t        pane.add(renderPanel, BorderLayout.CENTER);\r\n\t\t\r\n\t\t        frame.setSize(600, 600);\r\n\t\t        frame.setVisible(true);\r\n\t        }\r\n        }\r\n        class Point {\r\n\t        double x;\r\n\t        double y;\r\n\t        double z;\r\n\t        Point(double x, double y, double z) {\r\n\t\t        this.x = x;\r\n\t\t        this.y = y;\r\n\t\t        this.z = z;\r\n\t        }\r\n        }\r\n\r\n        class Polygon {\r\n\t        ArrayList&lt;Point&gt; vertices;\r\n\t        Color color;\r\n\t        Polygon(ArrayList&lt;Point&gt; verticies, Color color) {\r\n\t        \tthis.vertices = verticies;\r\n\t        \tthis.color = color;\r\n\t        }\r\n\t\r\n\t        boolean isPointOnLine(Point p, Point p1, Point p2) {\r\n\t            if (p.x &lt;= Math.max(p1.x, p2.x)\r\n\t                    &amp;&amp; p.x &gt;= Math.min(p1.x, p2.x)\r\n\t                    &amp;&amp; (p.y &lt;= Math.max(p1.y, p2.y)\r\n\t                        &amp;&amp; p.y &gt;= Math.min(p1.y, p2.y))) {\r\n\t            \treturn true;\r\n\t            }else {\r\n\t                return false;\r\n\t            }\t     \r\n\t        }\r\n\t\r\n\t        int direction(Point p, Point q, Point r) {\r\n\t            return (int) ((q.y - p.y) * (r.x - q.x) - (q.x - p.x) * (r.y - q.y));\r\n\t        }\r\n\t\r\n            public boolean isPointInsidePolygon(Point point) {\r\n    \t        Point outsidePoint = new Point(99999, point.y,0);\r\n    \t        int intersections = 0;\r\n    \t        int i;\r\n    \t        for(i = 0; i &lt; this.vertices.size(); i++) {\r\n    \t\t        Point sidePoint1 = this.vertices.get(i);\r\n    \t\t        Point sidePoint2 = this.vertices.get((i+1) % this.vertices.size());\r\n    \t\t\r\n    \t            int d1 = direction(point, outsidePoint, sidePoint1);\r\n    \t            int d2 = direction(point, outsidePoint, sidePoint2);\r\n    \t            int d3 = direction(sidePoint1, sidePoint2, point);\r\n    \t            int d4 = direction(sidePoint1, sidePoint2, outsidePoint);\r\n    \t    \r\n    \t            if ((((d1 &gt; 0 &amp;&amp; d2 &lt; 0) || (d1 &lt; 0 &amp;&amp; d2 &gt; 0)) &amp;&amp; ((d3 &gt; 0 &amp;&amp; d4 &lt; 0) || (d3 &lt; 0 &amp;&amp; d4 &gt; 0)))) {\r\n    \t    \t        intersections++;\r\n    \t            }   \r\n    \t        }\r\n    \t\r\n    \t        if(intersections % 2 == 1) {\r\n    \t\t        if(intersections != 1 &amp;&amp; intersections != 0) {\r\n        \t        \tSystem.out.print(intersections);\r\n    \t\t        }\r\n    \t\t        return true;\r\n            \t}else {\r\n    \t        \treturn false;\r\n    \t        }\r\n            }\r\n        }\r\n\r\n        class Matrix3 {\r\n        \tdouble[] values;\r\n        \tMatrix3(double[] values) {\r\n\t        \tthis.values = values;\r\n\t        }\r\n\t        Matrix3 multiply(Matrix3 other) {\r\n\t        \tdouble[] result = new double[9];\r\n\t        \tfor (int row = 0; row &lt; 3; row++) {\r\n\t\t        \tfor (int col = 0; col &lt; 3; col++) {\r\n\t\t\t        \tfor (int i = 0; i &lt; 3; i++) {\r\n\t\t\t        \t\tresult[row * 3 + col] += this.values[row * 3 + i] * other.values[i * 3 + col];\r\n\t\t\t\t        }\r\n\t\t\t        }\r\n\t        \t}\r\n\t\t        return new Matrix3(result);\r\n\t        }\r\n\t        Point transform(Point v) {\r\n\t\t\r\n\t\t        return new Point(\r\n\t\t        \tv.x * values[0] + v.y * values[3] + v.z * values[6],\r\n\t\t\t        v.x * values[1] + v.y * values[4] + v.z * values[7],\r\n\t\t        \tv.x * values[2] + v.y * values[5] + v.z * values[8]\r\n\t\t\t\r\n\t\t        );\r\n\t        }\r\n        }\r\n\r\nI thought maybe I got my matricies values incorrect, but I checked them with several sources and they appear right.","title":"3D object in java won&#39;t rotate properly along the x axis","body":"<p>I have recently been working on a 3D renderer in java for the first time, It works well when the user drags it along the y axis, but dragging an object along the x axis doesn't always properly rotate it relitive to the user.<a href=\"https://i.stack.imgur.com/36zSX.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/36zSX.gif\" alt=\"cube example\" /></a> This cube only rotates along the x axis correctly when the green side is on the top. Otherwise it will roll, or spin backwards. This is my code:</p>\n<pre><code>    package Main;\n    \n    import java.awt.BorderLayout;\n    import java.awt.Color;\n    import java.awt.Container;\n    import java.awt.Graphics;\n    import java.awt.Graphics2D;\n    import java.awt.Image;\n    import java.awt.MouseInfo;\n    import java.awt.event.MouseEvent;\n    import java.awt.event.MouseMotionListener;\n    import java.awt.geom.Path2D;\n    import java.awt.image.BufferedImage;\n    import java.util.ArrayList;\n    import java.util.Arrays;\n    import java.util.List;\n    import java.util.stream.Collectors;\n\n    import javax.swing.JFrame;\n    import javax.swing.JPanel;\n\n\n    public class Main {\n\n        public static void main(String[] args) {\n    \n            final int[] x = {0};\n            final int[] y = {0};\n    \n            JFrame frame = new JFrame();\n            Container pane = frame.getContentPane();\n            pane.setLayout(new BorderLayout());\n    \n            JPanel renderPanel = new JPanel() {\n    \n                public void paintComponent(Graphics g) {\n                            \n                    Graphics2D g2 = (Graphics2D) g;\n                    g2.setColor(Color.BLACK);\n                    g2.fillRect(0, 0, getWidth(), getHeight());\n            \n                    List&lt;Polygon&gt; polygons = new ArrayList&lt;&gt;();\n                    polygons.add(new Polygon(new ArrayList&lt;&gt;(), Color.WHITE));\n                    polygons.get(0).vertices.add(new Point(100, 100, 100));\n                    polygons.get(0).vertices.add(new Point(-100, 100, 100));\n                    polygons.get(0).vertices.add(new Point(-100, -100, 100));\n                    polygons.get(0).vertices.add(new Point(100, -100, 100));\n            \n                    polygons.add(new Polygon(new ArrayList&lt;&gt;(), Color.RED));\n                    polygons.get(1).vertices.add(new Point(100, 100, -100));\n                    polygons.get(1).vertices.add(new Point(-100, 100, -100));\n                    polygons.get(1).vertices.add(new Point(-100, -100, -100));\n                    polygons.get(1).vertices.add(new Point(100, -100, -100));\n\n                    polygons.add(new Polygon(new ArrayList&lt;&gt;(), Color.BLUE));\n                    polygons.get(2).vertices.add(new Point(100, 100, 100));\n                    polygons.get(2).vertices.add(new Point(-100, 100, 100));\n                    polygons.get(2).vertices.add(new Point(-100, 100, -100));\n                    polygons.get(2).vertices.add(new Point(100, 100, -100));\n        \n                    polygons.add(new Polygon(new ArrayList&lt;&gt;(), Color.GREEN));\n                    polygons.get(3).vertices.add(new Point(-100, -100, 100));\n                    polygons.get(3).vertices.add(new Point(-100, -100, -100));\n                    polygons.get(3).vertices.add(new Point(100, -100, -100));\n                    polygons.get(3).vertices.add(new Point(100, -100, 100));\n            \n                    polygons.add(new Polygon(new ArrayList&lt;&gt;(), Color.YELLOW));\n                    polygons.get(4).vertices.add(new Point(100, 100, 100));\n                    polygons.get(4).vertices.add(new Point(100, -100, 100));\n                    polygons.get(4).vertices.add(new Point(100, -100, -100));\n                    polygons.get(4).vertices.add(new Point(100, 100, -100));\n\n                    polygons.add(new Polygon(new ArrayList&lt;&gt;(), Color.ORANGE));\n                    polygons.get(5).vertices.add(new Point(-100, 100, 100));\n                    polygons.get(5).vertices.add(new Point(-100, -100, 100));\n                    polygons.get(5).vertices.add(new Point(-100, -100, -100));\n                    polygons.get(5).vertices.add(new Point(-100, 100, -100));\n            \n                    double heading = Math.toRadians(x[0]);\n                    Matrix3 headingTransform = new Matrix3(new double[] {\n                            Math.cos(heading), 0, -Math.sin(heading),\n                            0,1,0,\n                            Math.sin(heading), 0, Math.cos(heading)\n                    });\n            \n                    double pitch = Math.toRadians(y[0]);\n                    Matrix3 pitchTransform = new Matrix3(new double[] {\n                            1, 0, 0,\n                            0, Math.cos(pitch), Math.sin(pitch),\n                            0, -Math.sin(pitch), Math.cos(pitch)\n                    });\n            \n                    Matrix3 transform = headingTransform.multiply(pitchTransform);\n            \n                    g2.translate(getWidth() / 2, getHeight() / 2);\n            \n                    BufferedImage img = new BufferedImage(frame.getWidth(), frame.getHeight(), BufferedImage.TYPE_INT_ARGB);\n\n                    double[] zBuffer = new double[img.getWidth() * img.getHeight()];\n\n                    for (int q = 0; q &lt; zBuffer.length; q++) {\n                        zBuffer[q] = Double.NEGATIVE_INFINITY;\n                    }\n                            \n                    for (Polygon polygon : polygons) {\n                        Polygon transformedPolygon = new Polygon(new ArrayList&lt;&gt;(), polygon.color);\n                        for(Point point : polygon.vertices) {\n                    transformedPolygon.vertices.add(transform.transform(point));\n                        }\n                \n                        double minX = Double.POSITIVE_INFINITY;\n                        double maxX = Double.NEGATIVE_INFINITY;\n                        double minY = Double.POSITIVE_INFINITY;\n                        double maxY = Double.NEGATIVE_INFINITY;\n                \n                        for (Point point : transformedPolygon.vertices) {\n                            minX = Math.min(minX, point.x);\n                            maxX = Math.max(maxX, point.x);\n                            minY = Math.min(minY, point.y);\n                            maxY = Math.max(maxY, point.y);\n                        }\n                \n                        minX = Math.max(-frame.getWidth()/2, minX);\n                        maxX = Math.min(frame.getWidth(), maxX);\n                        minY = Math.max(-frame.getHeight()/2, minY);\n                        maxY = Math.min(frame.getHeight(), maxY);\n                                    \n                            for (int y = (int) minY; y &lt;= maxY; y++) {\n                                for (int x = (int) minX; x &lt;= maxX; x++) {\n                                    Point pixel = new Point(x, y, 0);\n                                    if (transformedPolygon.isPointInsidePolygon(pixel)) {\n                                        double depth = 0;\n                                        for(Point point: transformedPolygon.vertices) {\n                                            depth += point.z;\n                                        }\n                                        int zIndex = ((y + frame.getHeight()/2) * img.getWidth()) + x + frame.getWidth()/2;\n                                        if (zBuffer[zIndex] &lt; depth) {\n                                            img.setRGB(x + frame.getWidth()/2, y + frame.getHeight()/2, transformedPolygon.color.getRGB());\n                                            zBuffer[zIndex] = depth;\n                                        }\n                                    }\n                                }\n                            } \n                        g2.drawImage(img, -frame.getWidth()/2, -frame.getHeight()/2, null); \n                    }\n                }\n            };\n    \n            renderPanel.addMouseMotionListener(new MouseMotionListener() {\n                Point mousePos = new Point(MouseInfo.getPointerInfo().getLocation().x,MouseInfo.getPointerInfo().getLocation().y, 0);\n                Point lastMousePosition = new Point(0, 0, 0);\n                @Override\n                public void mouseDragged(MouseEvent e) {\n                    mousePos = new Point(MouseInfo.getPointerInfo().getLocation().x,MouseInfo.getPointerInfo().getLocation().y, 0);\n                    x[0] += (mousePos.x - lastMousePosition.x);\n                    y[0] -= (mousePos.y - lastMousePosition.y);\n                    lastMousePosition.x = mousePos.x;\n                    lastMousePosition.y = mousePos.y;\n                    renderPanel.repaint();\n                }\n\n                @Override\n                public void mouseMoved(MouseEvent e) {\n                    if (e.getButton() != MouseEvent.BUTTON1) {\n                        mousePos = new Point(MouseInfo.getPointerInfo().getLocation().x,MouseInfo.getPointerInfo().getLocation().y, 0);\n                        lastMousePosition.x = mousePos.x;\n                        lastMousePosition.y = mousePos.y;\n                    }\n                }\n            });\n    \n            pane.add(renderPanel, BorderLayout.CENTER);\n    \n            frame.setSize(600, 600);\n            frame.setVisible(true);\n        }\n    }\n    class Point {\n        double x;\n        double y;\n        double z;\n        Point(double x, double y, double z) {\n            this.x = x;\n            this.y = y;\n            this.z = z;\n        }\n    }\n\n    class Polygon {\n        ArrayList&lt;Point&gt; vertices;\n        Color color;\n        Polygon(ArrayList&lt;Point&gt; verticies, Color color) {\n            this.vertices = verticies;\n            this.color = color;\n        }\n\n        boolean isPointOnLine(Point p, Point p1, Point p2) {\n            if (p.x &lt;= Math.max(p1.x, p2.x)\n                    &amp;&amp; p.x &gt;= Math.min(p1.x, p2.x)\n                    &amp;&amp; (p.y &lt;= Math.max(p1.y, p2.y)\n                        &amp;&amp; p.y &gt;= Math.min(p1.y, p2.y))) {\n                return true;\n            }else {\n                return false;\n            }        \n        }\n\n        int direction(Point p, Point q, Point r) {\n            return (int) ((q.y - p.y) * (r.x - q.x) - (q.x - p.x) * (r.y - q.y));\n        }\n\n        public boolean isPointInsidePolygon(Point point) {\n            Point outsidePoint = new Point(99999, point.y,0);\n            int intersections = 0;\n            int i;\n            for(i = 0; i &lt; this.vertices.size(); i++) {\n                Point sidePoint1 = this.vertices.get(i);\n                Point sidePoint2 = this.vertices.get((i+1) % this.vertices.size());\n        \n                int d1 = direction(point, outsidePoint, sidePoint1);\n                int d2 = direction(point, outsidePoint, sidePoint2);\n                int d3 = direction(sidePoint1, sidePoint2, point);\n                int d4 = direction(sidePoint1, sidePoint2, outsidePoint);\n        \n                if ((((d1 &gt; 0 &amp;&amp; d2 &lt; 0) || (d1 &lt; 0 &amp;&amp; d2 &gt; 0)) &amp;&amp; ((d3 &gt; 0 &amp;&amp; d4 &lt; 0) || (d3 &lt; 0 &amp;&amp; d4 &gt; 0)))) {\n                    intersections++;\n                }   \n            }\n    \n            if(intersections % 2 == 1) {\n                if(intersections != 1 &amp;&amp; intersections != 0) {\n                    System.out.print(intersections);\n                }\n                return true;\n            }else {\n                return false;\n            }\n        }\n    }\n\n    class Matrix3 {\n        double[] values;\n        Matrix3(double[] values) {\n            this.values = values;\n        }\n        Matrix3 multiply(Matrix3 other) {\n            double[] result = new double[9];\n            for (int row = 0; row &lt; 3; row++) {\n                for (int col = 0; col &lt; 3; col++) {\n                    for (int i = 0; i &lt; 3; i++) {\n                        result[row * 3 + col] += this.values[row * 3 + i] * other.values[i * 3 + col];\n                    }\n                }\n            }\n            return new Matrix3(result);\n        }\n        Point transform(Point v) {\n    \n            return new Point(\n                v.x * values[0] + v.y * values[3] + v.z * values[6],\n                v.x * values[1] + v.y * values[4] + v.z * values[7],\n                v.x * values[2] + v.y * values[5] + v.z * values[8]\n        \n            );\n        }\n    }\n</code></pre>\n<p>I thought maybe I got my matricies values incorrect, but I checked them with several sources and they appear right.</p>\n"},{"tags":["java","resttemplate","openapi-generator","swagger-codegen","spring-micrometer"],"owner":{"account_id":4230767,"reputation":521,"user_id":6077973,"display_name":"kagof"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691685948,"creation_date":1691667993,"question_id":76875444,"body_markdown":"My team generates some Java code using `RestTemplate`s from an OpenAPI spec using the maven plugins for this. We have used both the `swagger-codegen-maven-plugin` and `openapi-generator-maven-plugin` which both seem to generate approximately the same code.\r\n\r\nWhen it comes to collecting metrics from these `RestTemplate`s using Micrometer, I find that the URIs aren&#39;t templated in the tags. For example, with a REST endpoint like `/customers/{cid}`, I&#39;d want the Micrometer metric to be tagged with `uri=/customers/{cid}`. However, instead we find that the metric is tagged with `uri=/customers/customer1`, `uri=/customers/customer2`, etc. This effectively makes this tag useless for us.\r\n\r\nNote from [this question](https://stackoverflow.com/questions/58942924/how-do-i-get-templated-values-in-uri-tag-for-http-client-requests-metrics-using) that if the `RestTemplate` is allowed to do the templating itself, then the metric will be tagged in the way I want.\r\n\r\nHowever, the generated code always looks like this:\r\n\r\n```java\r\nString path = UriComponentsBuilder.fromPath(&quot;/customers/{cid}&quot;).buildAndExpand(uriVariables).toUriString();\r\n```\r\n\r\nie, the templating is done *before* the `RestTemplate`, and thus the metrics are tagged with the fully fleshed out URI.\r\n\r\nOur configuration for the plugins looks like this. When using the openapi-generator version it also looks similar. I&#39;ve tried playing around with a few of the configuration parameters to no avail.\r\n\r\n```xml\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;io.swagger&lt;/groupId&gt;\r\n                &lt;artifactId&gt;swagger-codegen-maven-plugin&lt;/artifactId&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;generate&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;inputSpec&gt;${project.basedir}/src/main/resources/my-spec.yml&lt;/inputSpec&gt;\r\n                            &lt;language&gt;java&lt;/language&gt;\r\n                            &lt;generateApiTests&gt;false&lt;/generateApiTests&gt;\r\n                            &lt;generateModelTests&gt;false&lt;/generateModelTests&gt;\r\n                            &lt;configOptions&gt;\r\n                                &lt;useOptional&gt;true&lt;/useOptional&gt;\r\n                                &lt;modelPackage&gt;${my.groupId}.model&lt;/modelPackage&gt;\r\n                                &lt;apiPackage&gt;${my.groupId}.api&lt;/apiPackage&gt;\r\n                                &lt;invokerPackage&gt;${my.groupId}&lt;/invokerPackage&gt;\r\n                                &lt;groupId&gt;${my.groupId}&lt;/groupId&gt;\r\n                                &lt;artifactId&gt;api&lt;/artifactId&gt;\r\n                                &lt;fullJavaUtil&gt;false&lt;/fullJavaUtil&gt;\r\n                                &lt;java8&gt;true&lt;/java8&gt;\r\n                                &lt;dateLibrary&gt;java8-instant&lt;/dateLibrary&gt;\r\n                            &lt;/configOptions&gt;\r\n                            &lt;library&gt;resttemplate&lt;/library&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n```\r\n\r\n\r\nI&#39;ve looked into the configuration properties for both the swagger-codegen plugin and the openapi-generator plugin and haven&#39;t found anything that seems to help with this. Does anyone know of a way to fix/improve this behaviour?\r\n\r\nEDIT: After looking into it a bit more, the `openapi-generator-maven-plugin` version of the code does seem to do something that I&#39;d expect to use the `RestTemplate` for url templating. However in the `RestTemplateExchangeTagsProvider` the `urlTemplate` is still coming through as `null`.","title":"Improperly tagged metrics when using Swagger/OpenAPI codegen with a RestTemplate","body":"<p>My team generates some Java code using <code>RestTemplate</code>s from an OpenAPI spec using the maven plugins for this. We have used both the <code>swagger-codegen-maven-plugin</code> and <code>openapi-generator-maven-plugin</code> which both seem to generate approximately the same code.</p>\n<p>When it comes to collecting metrics from these <code>RestTemplate</code>s using Micrometer, I find that the URIs aren't templated in the tags. For example, with a REST endpoint like <code>/customers/{cid}</code>, I'd want the Micrometer metric to be tagged with <code>uri=/customers/{cid}</code>. However, instead we find that the metric is tagged with <code>uri=/customers/customer1</code>, <code>uri=/customers/customer2</code>, etc. This effectively makes this tag useless for us.</p>\n<p>Note from <a href=\"https://stackoverflow.com/questions/58942924/how-do-i-get-templated-values-in-uri-tag-for-http-client-requests-metrics-using\">this question</a> that if the <code>RestTemplate</code> is allowed to do the templating itself, then the metric will be tagged in the way I want.</p>\n<p>However, the generated code always looks like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String path = UriComponentsBuilder.fromPath(&quot;/customers/{cid}&quot;).buildAndExpand(uriVariables).toUriString();\n</code></pre>\n<p>ie, the templating is done <em>before</em> the <code>RestTemplate</code>, and thus the metrics are tagged with the fully fleshed out URI.</p>\n<p>Our configuration for the plugins looks like this. When using the openapi-generator version it also looks similar. I've tried playing around with a few of the configuration parameters to no avail.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>            &lt;plugin&gt;\n                &lt;groupId&gt;io.swagger&lt;/groupId&gt;\n                &lt;artifactId&gt;swagger-codegen-maven-plugin&lt;/artifactId&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;generate&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;inputSpec&gt;${project.basedir}/src/main/resources/my-spec.yml&lt;/inputSpec&gt;\n                            &lt;language&gt;java&lt;/language&gt;\n                            &lt;generateApiTests&gt;false&lt;/generateApiTests&gt;\n                            &lt;generateModelTests&gt;false&lt;/generateModelTests&gt;\n                            &lt;configOptions&gt;\n                                &lt;useOptional&gt;true&lt;/useOptional&gt;\n                                &lt;modelPackage&gt;${my.groupId}.model&lt;/modelPackage&gt;\n                                &lt;apiPackage&gt;${my.groupId}.api&lt;/apiPackage&gt;\n                                &lt;invokerPackage&gt;${my.groupId}&lt;/invokerPackage&gt;\n                                &lt;groupId&gt;${my.groupId}&lt;/groupId&gt;\n                                &lt;artifactId&gt;api&lt;/artifactId&gt;\n                                &lt;fullJavaUtil&gt;false&lt;/fullJavaUtil&gt;\n                                &lt;java8&gt;true&lt;/java8&gt;\n                                &lt;dateLibrary&gt;java8-instant&lt;/dateLibrary&gt;\n                            &lt;/configOptions&gt;\n                            &lt;library&gt;resttemplate&lt;/library&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n</code></pre>\n<p>I've looked into the configuration properties for both the swagger-codegen plugin and the openapi-generator plugin and haven't found anything that seems to help with this. Does anyone know of a way to fix/improve this behaviour?</p>\n<p>EDIT: After looking into it a bit more, the <code>openapi-generator-maven-plugin</code> version of the code does seem to do something that I'd expect to use the <code>RestTemplate</code> for url templating. However in the <code>RestTemplateExchangeTagsProvider</code> the <code>urlTemplate</code> is still coming through as <code>null</code>.</p>\n"},{"tags":["java","maven","intellij-idea","libgdx"],"comments":[{"owner":{"account_id":36734,"reputation":392137,"user_id":104891,"display_name":"CrazyCoder"},"score":1,"creation_date":1682533188,"post_id":76113852,"comment_id":134232863,"body_markdown":"See https://www.jetbrains.com/help/idea/run-debug-configuration.html#createExplicitly. &quot;Add VM options&quot;.","body":"See <a href=\"https://www.jetbrains.com/help/idea/run-debug-configuration.html#createExplicitly\" rel=\"nofollow noreferrer\">jetbrains.com/help/idea/&hellip;</a>. &quot;Add VM options&quot;."}],"answers":[{"tags":[],"owner":{"account_id":213966,"reputation":18513,"user_id":467650,"accept_rate":75,"display_name":"Roy Solberg"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691685517,"creation_date":1691685517,"answer_id":76877725,"question_id":76113852,"body_markdown":"I had the same issue when running a libGDX game on my Macbook with a M1 processor.\r\n\r\nYou need to run your program with the additional JVM option `-XstartOnFirstThread`.\r\n\r\nTypically when you run it from IntelliJ you can create (or edit) a run configuration and add in exactly `-XstartOnFirstThread` as a &quot;JVM option&quot;.\r\n\r\nIf you add it as a &quot;program argument&quot; it will not work. It&#39;s a flag for the virtual machine, and not the program itself.\r\n\r\nThe [link @CrazyCoder gave in the comment][1] of your question gives a good\r\nexplanation on how to do this in IntelliJ. It&#39;s similar for Android Studio.\r\n\r\n  [1]: https://www.jetbrains.com/help/idea/run-debug-configuration.html#createExplicitly","title":"How can I run the JVM with the -XstartOnFirstThread","body":"<p>I had the same issue when running a libGDX game on my Macbook with a M1 processor.</p>\n<p>You need to run your program with the additional JVM option <code>-XstartOnFirstThread</code>.</p>\n<p>Typically when you run it from IntelliJ you can create (or edit) a run configuration and add in exactly <code>-XstartOnFirstThread</code> as a &quot;JVM option&quot;.</p>\n<p>If you add it as a &quot;program argument&quot; it will not work. It's a flag for the virtual machine, and not the program itself.</p>\n<p>The <a href=\"https://www.jetbrains.com/help/idea/run-debug-configuration.html#createExplicitly\" rel=\"nofollow noreferrer\">link @CrazyCoder gave in the comment</a> of your question gives a good\nexplanation on how to do this in IntelliJ. It's similar for Android Studio.</p>\n"}],"owner":{"account_id":28251389,"reputation":1,"user_id":21597578,"display_name":"Adam Szponikowski"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":117,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691685517,"creation_date":1682532716,"question_id":76113852,"body_markdown":"I&#39;m trying to run my first program in java using maven in intelliJ. But I&#39;m having an error like below : &quot;GLFW may only be used on the main thread and that thread must be the first thread in the process. Please run the JVM with -XstartOnFirstThread&quot;\r\nHow can I work it out?\r\n\r\nI was looking for the answer in the internet but could not find it out","title":"How can I run the JVM with the -XstartOnFirstThread","body":"<p>I'm trying to run my first program in java using maven in intelliJ. But I'm having an error like below : &quot;GLFW may only be used on the main thread and that thread must be the first thread in the process. Please run the JVM with -XstartOnFirstThread&quot;\nHow can I work it out?</p>\n<p>I was looking for the answer in the internet but could not find it out</p>\n"},{"tags":["java","spring","hibernate","spring-data","hibernate-mapping"],"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1691987360,"post_id":76876624,"comment_id":135559809,"body_markdown":"The problem is with your SQL query and has nothing to do with Hibernate. `join` is for joining two database tables. You seem to be trying to join a database table with a column in that table. Also, is `s1` a column in database table `SystemParameterValueImpl`? If not then maybe you mean `select s1.*`? I suggest that you [edit] your question and post the structure of the database tables involved in your query, i.e. the column names and their data types. It may also help if you post some sample data as well as your expected result of your database query based on that sample data.","body":"The problem is with your SQL query and has nothing to do with Hibernate. <code>join</code> is for joining two database tables. You seem to be trying to join a database table with a column in that table. Also, is <code>s1</code> a column in database table <code>SystemParameterValueImpl</code>? If not then maybe you mean <code>select s1.*</code>? I suggest that you <a href=\"https://stackoverflow.com/posts/76876624/edit\">edit</a> your question and post the structure of the database tables involved in your query, i.e. the column names and their data types. It may also help if you post some sample data as well as your expected result of your database query based on that sample data."}],"answers":[{"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1691987477,"post_id":76877424,"comment_id":135559819,"body_markdown":"I don&#39;t see the [database] table names nor columns in the SQL in the original question. Maybe you made a mistake and answered a different question to the one you intended to answer?","body":"I don&#39;t see the [database] table names nor columns in the SQL in the original question. Maybe you made a mistake and answered a different question to the one you intended to answer?"}],"tags":[],"owner":{"account_id":29200265,"reputation":3,"user_id":22370542,"display_name":"Tiziano"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691685000,"creation_date":1691682992,"answer_id":76877424,"question_id":76876624,"body_markdown":"Try removing the &#39;AS&#39; keyword to define the table alias\r\n\r\nThis is an example of how to write a join:\r\n\r\n    SELECT gn.*\r\n    FROM GENERAL_NOTIFICATIONS gn\r\n    JOIN NOTIFICATION_ROLE nr ON (cign.ID = cinr.NOTIFICATION_ID)\r\n\r\n","title":"Hibernate exception SQL command not properly ended","body":"<p>Try removing the 'AS' keyword to define the table alias</p>\n<p>This is an example of how to write a join:</p>\n<pre><code>SELECT gn.*\nFROM GENERAL_NOTIFICATIONS gn\nJOIN NOTIFICATION_ROLE nr ON (cign.ID = cinr.NOTIFICATION_ID)\n</code></pre>\n"}],"owner":{"account_id":23171414,"reputation":195,"user_id":17270610,"display_name":"dynamo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691685000,"creation_date":1691677243,"question_id":76876624,"body_markdown":"getting this exception when running a named query\r\n\r\n```\r\nCaused by: org.hibernate.exception.SQLGrammarException: could not extract ResultSet\r\n.....\r\nCaused by: java.sql.SQLSyntaxErrorException: ORA-00933: SQL command not properly ended\r\n.....\r\nCaused by: Error : 933, Position : 40, Sql = select s1 from SystemParameterValueImpl as s1 join s1.systemParameter as p1 \r\n\t\t        where p1.id = :1  and s1.effectiveGasDay = \r\n\t\t            (select max(s2.effectiveGasDay ) \r\n\t\t            from SystemParameterValueImpl s2 join s2.systemParameter as p2 \r\n\t\t            where p1.id = p2.id and s2.effectiveGasDay &lt;= :2 ) \r\n\t\t        order by p1.id, \r\nOriginalSql = select s1 from SystemParameterValueImpl as s1 join s1.systemParameter as p1 \r\n\t\t        where p1.id = ? and s1.effectiveGasDay = \r\n\t\t            (select max(s2.effectiveGasDay ) \r\n\t\t            from SystemParameterValueImpl s2 join s2.systemParameter as p2 \r\n\t\t            where p1.id = p2.id and s2.effectiveGasDay &lt;= ?) \r\n\t\t        order by p1.id, Error Msg = ORA-00933: SQL command not properly ended\r\n```\r\n\r\nthis is the named query in my hbm file\r\n\r\n```\r\n    &lt;sql-query  name=&quot;findSystemParameterValueApplicableOnDate&quot;&gt;\r\n    \t&lt;return class=&quot;com.amor.hcplus.application.systemparameter.domain.SystemParameterValueImpl&quot; /&gt;\r\n\t\t    &lt;![CDATA[\r\n\t\t        select s1 from SystemParameterValueImpl as s1 join s1.systemParameter as p1 where p1.id = :parameterName and s1.effectiveGasDay = (select max(s2.effectiveGasDay ) from SystemParameterValueImpl s2 join s2.systemParameter as p2 where p1.id = p2.id and s2.effectiveGasDay &lt;= :date) order by p1.id\r\n\t\t    ]]&gt;\r\n    &lt;/sql-query&gt;\r\n ```\r\n\r\nand here is where i call the namedQuery\r\n\r\n```\r\n\t\tSQLQuery query = (SQLQuery) getSession().getNamedQuery(&quot;findSystemParameterValueApplicableOnDate&quot;)\r\n\t\t\t\t.setParameter(&quot;parameterName&quot;, parameterName)\r\n\t\t\t\t.setParameter(&quot;date&quot;, date);\r\n\t\t\r\n\t\tList list = query.list();\r\n```","title":"Hibernate exception SQL command not properly ended","body":"<p>getting this exception when running a named query</p>\n<pre><code>Caused by: org.hibernate.exception.SQLGrammarException: could not extract ResultSet\n.....\nCaused by: java.sql.SQLSyntaxErrorException: ORA-00933: SQL command not properly ended\n.....\nCaused by: Error : 933, Position : 40, Sql = select s1 from SystemParameterValueImpl as s1 join s1.systemParameter as p1 \n                where p1.id = :1  and s1.effectiveGasDay = \n                    (select max(s2.effectiveGasDay ) \n                    from SystemParameterValueImpl s2 join s2.systemParameter as p2 \n                    where p1.id = p2.id and s2.effectiveGasDay &lt;= :2 ) \n                order by p1.id, \nOriginalSql = select s1 from SystemParameterValueImpl as s1 join s1.systemParameter as p1 \n                where p1.id = ? and s1.effectiveGasDay = \n                    (select max(s2.effectiveGasDay ) \n                    from SystemParameterValueImpl s2 join s2.systemParameter as p2 \n                    where p1.id = p2.id and s2.effectiveGasDay &lt;= ?) \n                order by p1.id, Error Msg = ORA-00933: SQL command not properly ended\n</code></pre>\n<p>this is the named query in my hbm file</p>\n<pre><code>    &lt;sql-query  name=&quot;findSystemParameterValueApplicableOnDate&quot;&gt;\n        &lt;return class=&quot;com.amor.hcplus.application.systemparameter.domain.SystemParameterValueImpl&quot; /&gt;\n            &lt;![CDATA[\n                select s1 from SystemParameterValueImpl as s1 join s1.systemParameter as p1 where p1.id = :parameterName and s1.effectiveGasDay = (select max(s2.effectiveGasDay ) from SystemParameterValueImpl s2 join s2.systemParameter as p2 where p1.id = p2.id and s2.effectiveGasDay &lt;= :date) order by p1.id\n            ]]&gt;\n    &lt;/sql-query&gt;\n</code></pre>\n<p>and here is where i call the namedQuery</p>\n<pre><code>        SQLQuery query = (SQLQuery) getSession().getNamedQuery(&quot;findSystemParameterValueApplicableOnDate&quot;)\n                .setParameter(&quot;parameterName&quot;, parameterName)\n                .setParameter(&quot;date&quot;, date);\n        \n        List list = query.list();\n</code></pre>\n"},{"tags":["java","android","pdf","android-recyclerview","itext"],"answers":[{"tags":[],"owner":{"account_id":22432165,"reputation":1234,"user_id":16637863,"display_name":"Pawan Harariya"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691683875,"creation_date":1691683875,"answer_id":76877556,"question_id":76876881,"body_markdown":"What ever item the user adds, it will be added to a list, and then the list populates the recyclerView. So, you can easily iterate the list, and for every element in the list add the details in the pdf. Here is an example given below, you can find the complete code [here.][1]\r\n```\r\nprivate void createPdf(Order order) throws FileNotFoundException, DocumentException {\r\n       \r\n        File docsFolder = new File(Environment.getExternalStorageDirectory() + &quot;/Documents&quot;);\r\n        if (!docsFolder.exists()) {\r\n            docsFolder.mkdir();\r\n        }\r\n        String pdfName = order.getOrderId() + &quot;ST.pdf&quot;;\r\n\r\n        // This is the list of product items, that populates the recyclerView\r\n        List&lt;ProductItem&gt; items = order.getItemsList();\r\n        \r\n        File pdfFile = new File(docsFolder.getAbsolutePath(), pdfName);\r\n        OutputStream output = new FileOutputStream(pdfFile);\r\n        Document document = new Document(PageSize.A4);\r\n\r\n        // We create a table to store different details of each product\r\n        PdfPTable table = new PdfPTable(new float[]{3, 5, 3, 3});\r\n        \r\n        // This is some formatting done to make it look good\r\n        table.getDefaultCell().setHorizontalAlignment(Element.ALIGN_CENTER);\r\n        table.getDefaultCell().setFixedHeight(28);\r\n        table.setTotalWidth(PageSize.A4.getWidth());\r\n        table.setWidthPercentage(100);\r\n        table.getDefaultCell().setVerticalAlignment(Element.ALIGN_MIDDLE);\r\n\r\n        // We add the headers for each column of the table\r\n        table.addCell(&quot;Product Id&quot;);\r\n        table.addCell(&quot;Name&quot;);\r\n        table.addCell(&quot;Quantity&quot;);\r\n        table.addCell(&quot;Price&quot;);\r\n        table.setHeaderRows(1);\r\n        PdfPCell[] cells = table.getRow(0).getCells();\r\n        for (PdfPCell cell : cells) {\r\n            cell.setBackgroundColor(BaseColor.LIGHT_GRAY);\r\n        }\r\n        \r\n        // Here we iterate over the list, and for every product in the list we add a row in the table with details of the product.\r\n        for (ProductItem item : items) {\r\n            table.addCell(String.valueOf(item.getProductId()));\r\n            table.addCell(String.valueOf(item.getProductName()));\r\n            int quantity = item.getProductQuantity();\r\n            table.addCell(String.valueOf(quantity));\r\n            table.addCell(String.valueOf(item.getProductPrice() * quantity));\r\n        }\r\n\r\n        // Now we add the table to the document\r\n        PdfWriter.getInstance(document, output);\r\n        document.open();\r\n        document.add(table);\r\n        document.close();\r\n    }\r\n```\r\n\r\n\r\n  [1]: https://github.com/pawanharariya/Scan-and-Pay/blob/102ade1ecd7b6d35f5e80d6ddfeb1cb6ec90fd17/Scan%20and%20Pay%20-%20Partner%20App/app/src/main/java/com/anvay/noqueuepaydashboard/fragments/HomeFragment.java#L199C1-L200C1","title":"How I can get recyclerView list to itext PDF?","body":"<p>What ever item the user adds, it will be added to a list, and then the list populates the recyclerView. So, you can easily iterate the list, and for every element in the list add the details in the pdf. Here is an example given below, you can find the complete code <a href=\"https://github.com/pawanharariya/Scan-and-Pay/blob/102ade1ecd7b6d35f5e80d6ddfeb1cb6ec90fd17/Scan%20and%20Pay%20-%20Partner%20App/app/src/main/java/com/anvay/noqueuepaydashboard/fragments/HomeFragment.java#L199C1-L200C1\" rel=\"nofollow noreferrer\">here.</a></p>\n<pre><code>private void createPdf(Order order) throws FileNotFoundException, DocumentException {\n       \n        File docsFolder = new File(Environment.getExternalStorageDirectory() + &quot;/Documents&quot;);\n        if (!docsFolder.exists()) {\n            docsFolder.mkdir();\n        }\n        String pdfName = order.getOrderId() + &quot;ST.pdf&quot;;\n\n        // This is the list of product items, that populates the recyclerView\n        List&lt;ProductItem&gt; items = order.getItemsList();\n        \n        File pdfFile = new File(docsFolder.getAbsolutePath(), pdfName);\n        OutputStream output = new FileOutputStream(pdfFile);\n        Document document = new Document(PageSize.A4);\n\n        // We create a table to store different details of each product\n        PdfPTable table = new PdfPTable(new float[]{3, 5, 3, 3});\n        \n        // This is some formatting done to make it look good\n        table.getDefaultCell().setHorizontalAlignment(Element.ALIGN_CENTER);\n        table.getDefaultCell().setFixedHeight(28);\n        table.setTotalWidth(PageSize.A4.getWidth());\n        table.setWidthPercentage(100);\n        table.getDefaultCell().setVerticalAlignment(Element.ALIGN_MIDDLE);\n\n        // We add the headers for each column of the table\n        table.addCell(&quot;Product Id&quot;);\n        table.addCell(&quot;Name&quot;);\n        table.addCell(&quot;Quantity&quot;);\n        table.addCell(&quot;Price&quot;);\n        table.setHeaderRows(1);\n        PdfPCell[] cells = table.getRow(0).getCells();\n        for (PdfPCell cell : cells) {\n            cell.setBackgroundColor(BaseColor.LIGHT_GRAY);\n        }\n        \n        // Here we iterate over the list, and for every product in the list we add a row in the table with details of the product.\n        for (ProductItem item : items) {\n            table.addCell(String.valueOf(item.getProductId()));\n            table.addCell(String.valueOf(item.getProductName()));\n            int quantity = item.getProductQuantity();\n            table.addCell(String.valueOf(quantity));\n            table.addCell(String.valueOf(item.getProductPrice() * quantity));\n        }\n\n        // Now we add the table to the document\n        PdfWriter.getInstance(document, output);\n        document.open();\n        document.add(table);\n        document.close();\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2755641,"reputation":8698,"user_id":2373819,"display_name":"Andrew"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691684929,"creation_date":1691684929,"answer_id":76877661,"question_id":76876881,"body_markdown":"As an alternative you don&#39;t have to use itext and then have to deal with it&#39;s licensing, you can create a PDF using the Android built in PDF classes.\r\n\r\nAn example that creates a multiple page PDF from a recyclerview is at https://github.com/Zardozz/RecyclerviewPdf","title":"How I can get recyclerView list to itext PDF?","body":"<p>As an alternative you don't have to use itext and then have to deal with it's licensing, you can create a PDF using the Android built in PDF classes.</p>\n<p>An example that creates a multiple page PDF from a recyclerview is at <a href=\"https://github.com/Zardozz/RecyclerviewPdf\" rel=\"nofollow noreferrer\">https://github.com/Zardozz/RecyclerviewPdf</a></p>\n"}],"owner":{"account_id":28779976,"reputation":25,"user_id":22041790,"display_name":"HGSu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76877556,"answer_count":2,"score":1,"last_activity_date":1691684929,"creation_date":1691679003,"question_id":76876881,"body_markdown":"I want to add recyclerView list to itext PDF document,\r\nrecyclerview is created from user input, I didn&#39;t Know how many item will user add,\r\nand each item of recyclerView contain many text.\r\n\r\nHow I can do it?","title":"How I can get recyclerView list to itext PDF?","body":"<p>I want to add recyclerView list to itext PDF document,\nrecyclerview is created from user input, I didn't Know how many item will user add,\nand each item of recyclerView contain many text.</p>\n<p>How I can do it?</p>\n"},{"tags":["java","ubuntu-20.04","path-variables"],"comments":[{"owner":{"display_name":"user2711811"},"score":0,"creation_date":1623329520,"post_id":67920408,"comment_id":120052207,"body_markdown":"The jdk directorys and the jre directorys are different - similar errors found elsewhere indicate it is looking for something like .../jre../bin in path.  Sorry if a bit vague...","body":"The jdk directorys and the jre directorys are different - similar errors found elsewhere indicate it is looking for something like .../jre../bin in path.  Sorry if a bit vague..."}],"answers":[{"tags":[],"owner":{"account_id":12670441,"reputation":11,"user_id":18305228,"display_name":"kkkaiqiang"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1645764212,"creation_date":1645764212,"answer_id":71261154,"question_id":67920408,"body_markdown":"Maybe it has been too late but i encounter the same problem when installing the CPLEX progrom. I had found the solution here at [IBM support](https://www.ibm.com/docs/en/ds8870/7.3?topic=HW213_7.3.0/com.ibm.storage.ssic.help.doc/f2c_clijavaerror_2lfq3j.html). Simply pass the java path using the LAX_VM flag.\r\n\r\n    ./cplex_studio128.linux-x86-64.bin LAX_VM /opt/ibm-Java-whatever/java/bin/java","title":"No Java virtual machine could be found from your PATH environment variable. You must install a VM prior to running this program","body":"<p>Maybe it has been too late but i encounter the same problem when installing the CPLEX progrom. I had found the solution here at <a href=\"https://www.ibm.com/docs/en/ds8870/7.3?topic=HW213_7.3.0/com.ibm.storage.ssic.help.doc/f2c_clijavaerror_2lfq3j.html\" rel=\"nofollow noreferrer\">IBM support</a>. Simply pass the java path using the LAX_VM flag.</p>\n<pre><code>./cplex_studio128.linux-x86-64.bin LAX_VM /opt/ibm-Java-whatever/java/bin/java\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6286349,"reputation":43,"user_id":4885430,"display_name":"Adailton J&#250;nior"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691684863,"creation_date":1691684863,"answer_id":76877651,"question_id":67920408,"body_markdown":"I had this problem trying to install S32 Design Studio from NXP.\r\nFollowing the answer from @kkkaiqiang who used IBM solution I did\r\n\r\n    ./S32DS_Power_Linux_v1.2_b170613.bin LAX_VM /usr/lib/jvm/java-8-openjdk-amd64/bin/java\r\n\r\n","title":"No Java virtual machine could be found from your PATH environment variable. You must install a VM prior to running this program","body":"<p>I had this problem trying to install S32 Design Studio from NXP.\nFollowing the answer from @kkkaiqiang who used IBM solution I did</p>\n<pre><code>./S32DS_Power_Linux_v1.2_b170613.bin LAX_VM /usr/lib/jvm/java-8-openjdk-amd64/bin/java\n</code></pre>\n"}],"owner":{"account_id":16002923,"reputation":31,"user_id":13070739,"display_name":"Pooja Hegde"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3801,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1691684863,"creation_date":1623325157,"question_id":67920408,"body_markdown":"I know this has been asked several times but I can&#39;t seem to get rid of this error.\\\r\nSetup:\r\n- I have installed java on ubuntu 20.04 with sudo apt install default-jre\r\n- echo **$JAVA_HOME** gives **/usr/lib/jvm/java-11-openjdk-amd64/** which I see is correct.\r\n- PATH variable is also set correctly. When I type java in shell it shows me available options.\r\n- **ls** in the /usr/lib/jvm gives \\\r\ndefault-java  java-1.11.0-openjdk-amd64  java-11-openjdk-amd64  openjdk-11\r\n\r\nError:\\\r\nWhen I try to install lmadmin I get the following:\\\r\nPreparing to install\r\nExtracting the installation resources from the installer archive...\r\nConfiguring the installer for this system&#39;s environment...\r\nNo Java virtual machine could be found from your PATH\r\nenvironment variable.  You must install a VM prior to\r\nrunning this program.\r\n\r\nThings I have tried so far:\r\n- add the export path lines to .bashrc , .bash_profile , /etc/environment\r\n- reinstalled the java package\r\n\r\nAny help is appreciated.\r\n\r\n\r\n\r\n","title":"No Java virtual machine could be found from your PATH environment variable. You must install a VM prior to running this program","body":"<p>I know this has been asked several times but I can't seem to get rid of this error.<br />\nSetup:</p>\n<ul>\n<li>I have installed java on ubuntu 20.04 with sudo apt install default-jre</li>\n<li>echo <strong>$JAVA_HOME</strong> gives <strong>/usr/lib/jvm/java-11-openjdk-amd64/</strong> which I see is correct.</li>\n<li>PATH variable is also set correctly. When I type java in shell it shows me available options.</li>\n<li><strong>ls</strong> in the /usr/lib/jvm gives <br />\ndefault-java  java-1.11.0-openjdk-amd64  java-11-openjdk-amd64  openjdk-11</li>\n</ul>\n<p>Error:<br />\nWhen I try to install lmadmin I get the following:<br />\nPreparing to install\nExtracting the installation resources from the installer archive...\nConfiguring the installer for this system's environment...\nNo Java virtual machine could be found from your PATH\nenvironment variable.  You must install a VM prior to\nrunning this program.</p>\n<p>Things I have tried so far:</p>\n<ul>\n<li>add the export path lines to .bashrc , .bash_profile , /etc/environment</li>\n<li>reinstalled the java package</li>\n</ul>\n<p>Any help is appreciated.</p>\n"},{"tags":["java","spring-boot","docker-compose","dockerfile","containers"],"owner":{"account_id":11045728,"reputation":1,"user_id":8111950,"display_name":"Omar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691684704,"creation_date":1691684704,"question_id":76877629,"body_markdown":"I&#39;m trying to run my services with a Docker compose on MacBook Air M2, I launch three containers that are connected to each other per ports, When I run the application locally (not with Docker), it seems to work fine. Only I start Docker compose, I get an error with backend container, the other two containers (mysql and frontend are Ok), I&#39;m new to Docker and Spring Boot, any suggestions?\r\n\r\nNote: port 8443 is available on my machine and there are no other service using it...\r\n\r\nthis is Dockerfile of backend service\r\n\r\n\r\n```\r\n# Stage 1: Build the application\r\nFROM maven:3.8.4-openjdk-11 AS build\r\nWORKDIR /app\r\n\r\n\r\n\r\nCOPY ./devops_bht_ss23_backend/ /app\r\nRUN mvn clean package -DskipTests\r\n\r\n# Stage 2: Create the runtime image\r\nFROM openjdk:11-jre-slim\r\nWORKDIR /app\r\nCOPY --from=build /app/target/spring-boot-jwt-0.0.1-SNAPSHOT.jar .\r\n# RUN sh -c &#39;touch spring-boot-jwt-0.0.1-SNAPSHOT.jar&#39;\r\n\r\n\r\nEXPOSE 8443\r\nCMD [&quot;java&quot;, &quot;-jar&quot;, &quot;spring-boot-jwt-0.0.1-SNAPSHOT.jar&quot;]\r\n```\r\n\r\n\r\n here is my application.properties file \r\n\r\n\r\n```\r\nspring.datasource.url = jdbc:mysql://db:3306/mylist?useSSL=false&amp;allowPublicKeyRetrieval=true\r\nspring.datasource.username = root\r\nspring.datasource.password = ****\r\n\r\nspring.jpa.properties.hibernate.dialect = org.hibernate.dialect.MySQL5InnoDBDialect\r\n\r\nspring.jpa.hibernate.ddl-auto = update\r\njwt.secret = WHENTOD******\r\n\r\nlogging.level.org.hibernate.SQL = DEBUG\r\nlogging.level.org.hibernate.type = TRACE\r\nspring.jpa.properties.hibernate.format_sql = true\r\n\r\nspring.mail.host = smtp.gmail.com\r\nspring.mail.port = 587\r\nspring.mail.username = ****8@gmail.com\r\nspring.mail.password = *****\r\nspring.mail.properties.mail.smtp.auth = true\r\nspring.mail.properties.mail.smtp.starttls.enable = true\r\nspring.mail.properties.mail.smtp.starttls.required = true\r\nspring.mail.properties.mail.timeout = 30000\r\n\r\nserver.port = 8443\r\nserver.ssl.enabled = true\r\nserver.ssl.key-store = src/main/resources/bootsecurity.p12\r\nserver.ssl.key-store-password = bootsecuritypassword\r\nserver.ssl.key-store-type = PKCS12\r\nserver.ssl.key-alias = bootsecurity\r\n\r\n```\r\n\r\n here is Docker Compose File with the three services:\r\n\r\n\r\n```\r\nversion: &#39;3&#39;\r\nservices:\r\n  backend:\r\n    build:\r\n      context: ./\r\n      dockerfile: ./devops_bht_ss23_backend/Dockerfile\r\n    ports:\r\n      - 8443:8443\r\n    depends_on:\r\n      - db\r\n    environment:\r\n       spring.datasource.url: jdbc:mysql://db:3306/mylist?useSSL=false&amp;allowPublicKeyRetrieval=true\r\n       spring.datasource.username: root\r\n       spring.datasource.password: *****\r\n       spring.jpa.properties.hibernate.dialect: org.hibernate.dialect.MySQL5InnoDBDialect\r\n       spring.jpa.hibernate.ddl-auto: update\r\n       jwt.secret: WHENTODOLISTISCOOL\r\n       logging.level.org.hibernate.SQL: DEBUG\r\n       logging.level.org.hibernate.type: TRACE\r\n       spring.jpa.properties.hibernate.format_sql: true\r\n\r\n       spring.mail.host: smtp.gmail.com\r\n       spring.mail.port: 587\r\n       spring.mail.username: *****@gmail.com\r\n       spring.mail.password: *****\r\n       spring.mail.properties.mail.smtp.auth: true\r\n       spring.mail.properties.mail.smtp.starttls.enable: true\r\n       spring.mail.properties.mail.smtp.starttls.required: true\r\n       spring.mail.properties.mail.timeout: 30000\r\n       server.port: 8443\r\n       server.ssl.enabled: true\r\n       server.ssl.key-store: src/main/resources/bootsecurity.p12\r\n       server.ssl.key-store-password: bootsecuritypassword\r\n       server.ssl.key-store-type: PKCS12\r\n       server.ssl.key-alias: bootsecurity\r\n       DEBUG: true\r\n\r\n\r\n\r\n    volumes:\r\n      - mysql_data:/var/lib/mysql\r\n\r\n  db:\r\n    image: mysql:latest\r\n    environment:\r\n      MYSQL_DATABASE: mylist\r\n      MYSQL_ROOT_PASSWORD: *****\r\n    ports:\r\n      - 3306:3306\r\n    volumes:\r\n      - mysql_data:/var/lib/mysql\r\n\r\n  frontend:\r\n    build:\r\n      context: ./devops_bht_ss23_frontend\r\n      dockerfile: Dockerfile\r\n    ports:\r\n      - 3000:3000\r\n    depends_on:\r\n      - backend\r\n\r\nvolumes:\r\n  mysql_data:\r\n\r\n```\r\n\r\nhere is my project structure from backend project:\r\n[backend structure](https://i.stack.imgur.com/Ipa4w.png)\r\n\r\nand here a part of log output:\r\n\r\n\r\n```\r\n2023-08-10 16:38:38 2023-08-10 14:38:38.824 DEBUG 1 --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : Application failed to start due to an exception\r\n2023-08-10 16:38:38 \r\n2023-08-10 16:38:38 org.springframework.boot.web.embedded.tomcat.ConnectorStartFailedException: Connector configured to listen on port 8443 failed to start\r\n2023-08-10 16:38:38     at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.checkConnectorHasStarted(TomcatWebServer.java:232) ~[spring-boot-2.1.1.RELEASE.jar!/:2.1.1.RELEASE]\r\n2023-08-10 16:38:38     at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.checkThatConnectorsHaveStarted(TomcatWebServer.java:224) ~[spring-boot-2.1.1.RELEASE.jar!/:2.1.1.RELEASE]\r\n2023-08-10 16:38:38     at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.start(TomcatWebServer.java:202) ~[spring-boot-2.1.1.RELEASE.jar!/:2.1.1.RELEASE]\r\n2023-08-10 16:38:38     at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.startWebServer(ServletWebServerApplicationContext.java:311) ~[spring-boot-2.1.1.RELEASE.jar!/:2.1.1.RELEASE]\r\n2023-08-10 16:38:38     at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.finishRefresh(ServletWebServerApplicationContext.java:164) ~[spring-boot-2.1.1.RELEASE.jar!/:2.1.1.RELEASE]\r\n2023-08-10 16:38:38     at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:549) ~[spring-context-5.1.3.RELEASE.jar!/:5.1.3.RELEASE]\r\n2023-08-10 16:38:38     at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:142) ~[spring-boot-2.1.1.RELEASE.jar!/:2.1.1.RELEASE]\r\n2023-08-10 16:38:38     at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775) ~[spring-boot-2.1.1.RELEASE.jar!/:2.1.1.RELEASE]\r\n2023-08-10 16:38:38     at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397) ~[spring-boot-2.1.1.RELEASE.jar!/:2.1.1.RELEASE]\r\n2023-08-10 16:38:38     at org.springframework.boot.SpringApplication.run(SpringApplication.java:316) ~[spring-boot-2.1.1.RELEASE.jar!/:2.1.1.RELEASE]\r\n2023-08-10 16:38:38     at org.springframework.boot.SpringApplication.run(SpringApplication.java:1260) ~[spring-boot-2.1.1.RELEASE.jar!/:2.1.1.RELEASE]\r\n2023-08-10 16:38:38     at org.springframework.boot.SpringApplication.run(SpringApplication.java:1248) ~[spring-boot-2.1.1.RELEASE.jar!/:2.1.1.RELEASE]\r\n2023-08-10 16:38:38     at com.todolist.Application.main(Application.java:17) ~[classes!/:0.0.1-SNAPSHOT]\r\n2023-08-10 16:38:38     at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n2023-08-10 16:38:38     at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) ~[na:na]\r\n2023-08-10 16:38:38     at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) ~[na:na]\r\n2023-08-10 16:38:38     at java.base/java.lang.reflect.Method.invoke(Unknown Source) ~[na:na]\r\n2023-08-10 16:38:38     at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:48) ~[spring-boot-jwt-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\r\n2023-08-10 16:38:38     at org.springframework.boot.loader.Launcher.launch(Launcher.java:87) ~[spring-boot-jwt-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\r\n2023-08-10 16:38:38     at org.springframework.boot.loader.Launcher.launch(Launcher.java:50) ~[spring-boot-jwt-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\r\n2023-08-10 16:38:38     at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:51) ~[spring-boot-jwt-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\r\n2023-08-10 16:38:38 \r\n2023-08-10 16:38:38 2023-08-10 14:38:38.825 ERROR 1 --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : \r\n2023-08-10 16:38:38 \r\n2023-08-10 16:38:38 ***************************\r\n2023-08-10 16:38:38 APPLICATION FAILED TO START\r\n2023-08-10 16:38:38 ***************************\r\n2023-08-10 16:38:38 \r\n2023-08-10 16:38:38 Description:\r\n2023-08-10 16:38:38 \r\n2023-08-10 16:38:38 The Tomcat connector configured to listen on port 8443 failed to start. The port may already be in use or the connector may be misconfigured.\r\n2023-08-10 16:38:38 \r\n2023-08-10 16:38:38 Action:\r\n2023-08-10 16:38:38 \r\n2023-08-10 16:38:38 Verify the connector&#39;s configuration, identify and stop any process that&#39;s listening on port 8443, or configure this application to listen on another port.\r\n2023-08-10 16:38:38 \r\n2023-08-10 16:38:38 2023-08-10 14:38:38.825 DEBUG 1 --- [           main] ConfigServletWebServerApplicationContext : Closing org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext@76f2b07d, started on Thu Aug 10 14:38:36 UTC 2023\r\n2023-08-10 16:38:38 2023-08-10 14:38:38.828  INFO 1 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService &#39;applicationTaskExecutor&#39;\r\n2023-08-10 16:38:38 2023-08-10 14:38:38.829  INFO 1 --- [           main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit &#39;default&#39;\r\n2023-08-10 16:38:38 2023-08-10 14:38:38.829 TRACE 1 --- [           main] o.h.type.spi.TypeConfiguration$Scope     : Handling #sessionFactoryClosed from [org.hibernate.internal.SessionFactoryImpl@5fad41be] for TypeConfiguration\r\n2023-08-10 16:38:38 2023-08-10 14:38:38.829 DEBUG 1 --- [           main] o.h.type.spi.TypeConfiguration$Scope     : Un-scoping TypeConfiguration [org.hibernate.type.spi.TypeConfiguration$Scope@70d77826] from SessionFactory [org.hibernate.internal.SessionFactoryImpl@5fad41be]\r\n2023-08-10 16:38:38 2023-08-10 14:38:38.830  INFO 1 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...\r\n2023-08-10 16:38:38 2023-08-10 14:38:38.842  INFO 1 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.\r\n```\r\n","title":"Starting a Spring Boot Applications with SSL connection, Mysql in IntellIJ, and a veu Application using docker compose","body":"<p>I'm trying to run my services with a Docker compose on MacBook Air M2, I launch three containers that are connected to each other per ports, When I run the application locally (not with Docker), it seems to work fine. Only I start Docker compose, I get an error with backend container, the other two containers (mysql and frontend are Ok), I'm new to Docker and Spring Boot, any suggestions?</p>\n<p>Note: port 8443 is available on my machine and there are no other service using it...</p>\n<p>this is Dockerfile of backend service</p>\n<pre><code># Stage 1: Build the application\nFROM maven:3.8.4-openjdk-11 AS build\nWORKDIR /app\n\n\n\nCOPY ./devops_bht_ss23_backend/ /app\nRUN mvn clean package -DskipTests\n\n# Stage 2: Create the runtime image\nFROM openjdk:11-jre-slim\nWORKDIR /app\nCOPY --from=build /app/target/spring-boot-jwt-0.0.1-SNAPSHOT.jar .\n# RUN sh -c 'touch spring-boot-jwt-0.0.1-SNAPSHOT.jar'\n\n\nEXPOSE 8443\nCMD [&quot;java&quot;, &quot;-jar&quot;, &quot;spring-boot-jwt-0.0.1-SNAPSHOT.jar&quot;]\n</code></pre>\n<p>here is my application.properties file</p>\n<pre><code>spring.datasource.url = jdbc:mysql://db:3306/mylist?useSSL=false&amp;allowPublicKeyRetrieval=true\nspring.datasource.username = root\nspring.datasource.password = ****\n\nspring.jpa.properties.hibernate.dialect = org.hibernate.dialect.MySQL5InnoDBDialect\n\nspring.jpa.hibernate.ddl-auto = update\njwt.secret = WHENTOD******\n\nlogging.level.org.hibernate.SQL = DEBUG\nlogging.level.org.hibernate.type = TRACE\nspring.jpa.properties.hibernate.format_sql = true\n\nspring.mail.host = smtp.gmail.com\nspring.mail.port = 587\nspring.mail.username = ****8@gmail.com\nspring.mail.password = *****\nspring.mail.properties.mail.smtp.auth = true\nspring.mail.properties.mail.smtp.starttls.enable = true\nspring.mail.properties.mail.smtp.starttls.required = true\nspring.mail.properties.mail.timeout = 30000\n\nserver.port = 8443\nserver.ssl.enabled = true\nserver.ssl.key-store = src/main/resources/bootsecurity.p12\nserver.ssl.key-store-password = bootsecuritypassword\nserver.ssl.key-store-type = PKCS12\nserver.ssl.key-alias = bootsecurity\n\n</code></pre>\n<p>here is Docker Compose File with the three services:</p>\n<pre><code>version: '3'\nservices:\n  backend:\n    build:\n      context: ./\n      dockerfile: ./devops_bht_ss23_backend/Dockerfile\n    ports:\n      - 8443:8443\n    depends_on:\n      - db\n    environment:\n       spring.datasource.url: jdbc:mysql://db:3306/mylist?useSSL=false&amp;allowPublicKeyRetrieval=true\n       spring.datasource.username: root\n       spring.datasource.password: *****\n       spring.jpa.properties.hibernate.dialect: org.hibernate.dialect.MySQL5InnoDBDialect\n       spring.jpa.hibernate.ddl-auto: update\n       jwt.secret: WHENTODOLISTISCOOL\n       logging.level.org.hibernate.SQL: DEBUG\n       logging.level.org.hibernate.type: TRACE\n       spring.jpa.properties.hibernate.format_sql: true\n\n       spring.mail.host: smtp.gmail.com\n       spring.mail.port: 587\n       spring.mail.username: *****@gmail.com\n       spring.mail.password: *****\n       spring.mail.properties.mail.smtp.auth: true\n       spring.mail.properties.mail.smtp.starttls.enable: true\n       spring.mail.properties.mail.smtp.starttls.required: true\n       spring.mail.properties.mail.timeout: 30000\n       server.port: 8443\n       server.ssl.enabled: true\n       server.ssl.key-store: src/main/resources/bootsecurity.p12\n       server.ssl.key-store-password: bootsecuritypassword\n       server.ssl.key-store-type: PKCS12\n       server.ssl.key-alias: bootsecurity\n       DEBUG: true\n\n\n\n    volumes:\n      - mysql_data:/var/lib/mysql\n\n  db:\n    image: mysql:latest\n    environment:\n      MYSQL_DATABASE: mylist\n      MYSQL_ROOT_PASSWORD: *****\n    ports:\n      - 3306:3306\n    volumes:\n      - mysql_data:/var/lib/mysql\n\n  frontend:\n    build:\n      context: ./devops_bht_ss23_frontend\n      dockerfile: Dockerfile\n    ports:\n      - 3000:3000\n    depends_on:\n      - backend\n\nvolumes:\n  mysql_data:\n\n</code></pre>\n<p>here is my project structure from backend project:\n<a href=\"https://i.stack.imgur.com/Ipa4w.png\" rel=\"nofollow noreferrer\">backend structure</a></p>\n<p>and here a part of log output:</p>\n<pre><code>2023-08-10 16:38:38 2023-08-10 14:38:38.824 DEBUG 1 --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : Application failed to start due to an exception\n2023-08-10 16:38:38 \n2023-08-10 16:38:38 org.springframework.boot.web.embedded.tomcat.ConnectorStartFailedException: Connector configured to listen on port 8443 failed to start\n2023-08-10 16:38:38     at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.checkConnectorHasStarted(TomcatWebServer.java:232) ~[spring-boot-2.1.1.RELEASE.jar!/:2.1.1.RELEASE]\n2023-08-10 16:38:38     at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.checkThatConnectorsHaveStarted(TomcatWebServer.java:224) ~[spring-boot-2.1.1.RELEASE.jar!/:2.1.1.RELEASE]\n2023-08-10 16:38:38     at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.start(TomcatWebServer.java:202) ~[spring-boot-2.1.1.RELEASE.jar!/:2.1.1.RELEASE]\n2023-08-10 16:38:38     at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.startWebServer(ServletWebServerApplicationContext.java:311) ~[spring-boot-2.1.1.RELEASE.jar!/:2.1.1.RELEASE]\n2023-08-10 16:38:38     at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.finishRefresh(ServletWebServerApplicationContext.java:164) ~[spring-boot-2.1.1.RELEASE.jar!/:2.1.1.RELEASE]\n2023-08-10 16:38:38     at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:549) ~[spring-context-5.1.3.RELEASE.jar!/:5.1.3.RELEASE]\n2023-08-10 16:38:38     at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:142) ~[spring-boot-2.1.1.RELEASE.jar!/:2.1.1.RELEASE]\n2023-08-10 16:38:38     at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775) ~[spring-boot-2.1.1.RELEASE.jar!/:2.1.1.RELEASE]\n2023-08-10 16:38:38     at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397) ~[spring-boot-2.1.1.RELEASE.jar!/:2.1.1.RELEASE]\n2023-08-10 16:38:38     at org.springframework.boot.SpringApplication.run(SpringApplication.java:316) ~[spring-boot-2.1.1.RELEASE.jar!/:2.1.1.RELEASE]\n2023-08-10 16:38:38     at org.springframework.boot.SpringApplication.run(SpringApplication.java:1260) ~[spring-boot-2.1.1.RELEASE.jar!/:2.1.1.RELEASE]\n2023-08-10 16:38:38     at org.springframework.boot.SpringApplication.run(SpringApplication.java:1248) ~[spring-boot-2.1.1.RELEASE.jar!/:2.1.1.RELEASE]\n2023-08-10 16:38:38     at com.todolist.Application.main(Application.java:17) ~[classes!/:0.0.1-SNAPSHOT]\n2023-08-10 16:38:38     at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n2023-08-10 16:38:38     at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) ~[na:na]\n2023-08-10 16:38:38     at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) ~[na:na]\n2023-08-10 16:38:38     at java.base/java.lang.reflect.Method.invoke(Unknown Source) ~[na:na]\n2023-08-10 16:38:38     at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:48) ~[spring-boot-jwt-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\n2023-08-10 16:38:38     at org.springframework.boot.loader.Launcher.launch(Launcher.java:87) ~[spring-boot-jwt-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\n2023-08-10 16:38:38     at org.springframework.boot.loader.Launcher.launch(Launcher.java:50) ~[spring-boot-jwt-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\n2023-08-10 16:38:38     at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:51) ~[spring-boot-jwt-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\n2023-08-10 16:38:38 \n2023-08-10 16:38:38 2023-08-10 14:38:38.825 ERROR 1 --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : \n2023-08-10 16:38:38 \n2023-08-10 16:38:38 ***************************\n2023-08-10 16:38:38 APPLICATION FAILED TO START\n2023-08-10 16:38:38 ***************************\n2023-08-10 16:38:38 \n2023-08-10 16:38:38 Description:\n2023-08-10 16:38:38 \n2023-08-10 16:38:38 The Tomcat connector configured to listen on port 8443 failed to start. The port may already be in use or the connector may be misconfigured.\n2023-08-10 16:38:38 \n2023-08-10 16:38:38 Action:\n2023-08-10 16:38:38 \n2023-08-10 16:38:38 Verify the connector's configuration, identify and stop any process that's listening on port 8443, or configure this application to listen on another port.\n2023-08-10 16:38:38 \n2023-08-10 16:38:38 2023-08-10 14:38:38.825 DEBUG 1 --- [           main] ConfigServletWebServerApplicationContext : Closing org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext@76f2b07d, started on Thu Aug 10 14:38:36 UTC 2023\n2023-08-10 16:38:38 2023-08-10 14:38:38.828  INFO 1 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'applicationTaskExecutor'\n2023-08-10 16:38:38 2023-08-10 14:38:38.829  INFO 1 --- [           main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'\n2023-08-10 16:38:38 2023-08-10 14:38:38.829 TRACE 1 --- [           main] o.h.type.spi.TypeConfiguration$Scope     : Handling #sessionFactoryClosed from [org.hibernate.internal.SessionFactoryImpl@5fad41be] for TypeConfiguration\n2023-08-10 16:38:38 2023-08-10 14:38:38.829 DEBUG 1 --- [           main] o.h.type.spi.TypeConfiguration$Scope     : Un-scoping TypeConfiguration [org.hibernate.type.spi.TypeConfiguration$Scope@70d77826] from SessionFactory [org.hibernate.internal.SessionFactoryImpl@5fad41be]\n2023-08-10 16:38:38 2023-08-10 14:38:38.830  INFO 1 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...\n2023-08-10 16:38:38 2023-08-10 14:38:38.842  INFO 1 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.\n</code></pre>\n"},{"tags":["java","amazon-web-services","apache-camel","amazon-sqs","amazon-sns"],"answers":[{"comments":[{"owner":{"account_id":14194855,"reputation":11,"user_id":10254458,"display_name":"Mykola Afanasiev"},"score":0,"creation_date":1625815530,"post_id":68285437,"comment_id":120732911,"body_markdown":"Thanks for your answer.  I had implemented a subscription using AmazonSNS and AmazonSQS (from aws-java-sdk libraries). But I want to use a more simple approach by Camel Routes to eliminate using SDK components.","body":"Thanks for your answer.  I had implemented a subscription using AmazonSNS and AmazonSQS (from aws-java-sdk libraries). But I want to use a more simple approach by Camel Routes to eliminate using SDK components."},{"owner":{"account_id":17352297,"reputation":2252,"user_id":12570528,"display_name":"Gregor Zurowski"},"score":0,"creation_date":1626163415,"post_id":68285437,"comment_id":120812706,"body_markdown":"I understand that you want to use Camel&#39;s AWS components for integrating with SNS and SQS, but I thought your initial question was about how to determine the account number for the `queueUrl ` parameter that is needed as part of the component URI?","body":"I understand that you want to use Camel&#39;s AWS components for integrating with SNS and SQS, but I thought your initial question was about how to determine the account number for the <code>queueUrl </code> parameter that is needed as part of the component URI?"},{"owner":{"account_id":14194855,"reputation":11,"user_id":10254458,"display_name":"Mykola Afanasiev"},"score":0,"creation_date":1626251716,"post_id":68285437,"comment_id":120840177,"body_markdown":"Sorry. Maybe the question wasn&#39;t clear. I edited my question. I want to find a simple solution using only Camel by the specified name of the SNS topic and SQS queue. Thanks for your efforts.","body":"Sorry. Maybe the question wasn&#39;t clear. I edited my question. I want to find a simple solution using only Camel by the specified name of the SNS topic and SQS queue. Thanks for your efforts."}],"tags":[],"owner":{"account_id":17352297,"reputation":2252,"user_id":12570528,"display_name":"Gregor Zurowski"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1625658471,"creation_date":1625658471,"answer_id":68285437,"question_id":68284375,"body_markdown":"If you have access to the AWS account via CLI, you could simply list all existing queues as follows:\r\n\r\n```\r\naws sqs list-queues\r\n```\r\n\r\nThis will return the SQS queue URLs as follows:\r\n\r\n```\r\nhttps://queue.amazonaws.com/80398EXAMPLE/MyQueue\r\n```\r\n\r\nIn the above example, the account number would be `80398EXAMPLE`.\r\n\r\nYou could also get the account details for the current IAM user/role using the following command:\r\n\r\n```\r\naws sts get-caller-identity\r\n```\r\n\r\nThis will return the account number with the `Account` field.","title":"Apache Camel: How I can create AWS SQS and subscribe to SNS topic","body":"<p>If you have access to the AWS account via CLI, you could simply list all existing queues as follows:</p>\n<pre><code>aws sqs list-queues\n</code></pre>\n<p>This will return the SQS queue URLs as follows:</p>\n<pre><code>https://queue.amazonaws.com/80398EXAMPLE/MyQueue\n</code></pre>\n<p>In the above example, the account number would be <code>80398EXAMPLE</code>.</p>\n<p>You could also get the account details for the current IAM user/role using the following command:</p>\n<pre><code>aws sts get-caller-identity\n</code></pre>\n<p>This will return the account number with the <code>Account</code> field.</p>\n"},{"tags":[],"owner":{"account_id":140655,"reputation":11655,"user_id":347137,"accept_rate":64,"display_name":"Simone"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691683632,"creation_date":1691683632,"answer_id":76877528,"question_id":68284375,"body_markdown":"I still haven&#39;t tried this solution on AWS, but I tested it on LocalStack and it seems to work properly:\r\n\r\n```java\r\n    class LocalStack extends org.apache.camel.builder.RouteBuilder {\r\n        @Override\r\n        public void configure() throws Exception {\r\n            AwsBasicCredentials credentials = AwsBasicCredentials.create(&quot;dummy&quot;, &quot;dummy&quot;);\r\n\r\n            bindToRegistry(&quot;amazonSQSClient&quot;,\r\n                    SqsClient.builder()\r\n                            .endpointOverride(new URI(&quot;http://localhost:4566&quot;))\r\n                            .credentialsProvider(StaticCredentialsProvider.create(credentials))\r\n                            .build());\r\n\r\n            bindToRegistry(&quot;amazonSNSClient&quot;,\r\n                    SnsClient.builder()\r\n                            .endpointOverride(new URI(&quot;http://localhost:4566&quot;))\r\n                            .credentialsProvider(StaticCredentialsProvider.create(credentials))\r\n                            .build());\r\n\r\n            from(&quot;aws2-sqs://MyQueue?amazonSQSClient=#amazonSQSClient&amp;autoCreateQueue=true&quot;).to(&quot;mock:result&quot;);\r\n\r\n            Endpoint endpoint = camelContext.getEndpoint(&quot;aws2-sqs://MyQueue?amazonSQSClient=#amazonSQSClient&amp;autoCreateQueue=true&quot;);\r\n            Assert.assertTrue(endpoint instanceof Sqs2Endpoint);\r\n\r\n            SqsClient sqsClient = ((Sqs2Endpoint) endpoint).getClient();\r\n            String url = sqsClient.getQueueUrl(builder -&gt; builder.queueName(&quot;MyQueue&quot;)).queueUrl();\r\n\r\n            from(&quot;direct:start&quot;)\r\n                    .to(&quot;aws2-sns://active_inventory-int-public-outgoing-notifications&quot; +\r\n                            &quot;?autoCreateTopic=true&quot; +\r\n                            &quot;&amp;amazonSNSClient=#amazonSNSClient&quot; +\r\n                            &quot;&amp;subscribeSNStoSQS=true&quot; +\r\n                            &quot;&amp;queueUrl=&quot; + url);\r\n        }\r\n```\r\n\r\nThe code should be self-explanatory. The calls to `bindToRegistry` are needed just because I&#39;m working on LocalStack, otherwise the default should be fine.","title":"Apache Camel: How I can create AWS SQS and subscribe to SNS topic","body":"<p>I still haven't tried this solution on AWS, but I tested it on LocalStack and it seems to work properly:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    class LocalStack extends org.apache.camel.builder.RouteBuilder {\n        @Override\n        public void configure() throws Exception {\n            AwsBasicCredentials credentials = AwsBasicCredentials.create(&quot;dummy&quot;, &quot;dummy&quot;);\n\n            bindToRegistry(&quot;amazonSQSClient&quot;,\n                    SqsClient.builder()\n                            .endpointOverride(new URI(&quot;http://localhost:4566&quot;))\n                            .credentialsProvider(StaticCredentialsProvider.create(credentials))\n                            .build());\n\n            bindToRegistry(&quot;amazonSNSClient&quot;,\n                    SnsClient.builder()\n                            .endpointOverride(new URI(&quot;http://localhost:4566&quot;))\n                            .credentialsProvider(StaticCredentialsProvider.create(credentials))\n                            .build());\n\n            from(&quot;aws2-sqs://MyQueue?amazonSQSClient=#amazonSQSClient&amp;autoCreateQueue=true&quot;).to(&quot;mock:result&quot;);\n\n            Endpoint endpoint = camelContext.getEndpoint(&quot;aws2-sqs://MyQueue?amazonSQSClient=#amazonSQSClient&amp;autoCreateQueue=true&quot;);\n            Assert.assertTrue(endpoint instanceof Sqs2Endpoint);\n\n            SqsClient sqsClient = ((Sqs2Endpoint) endpoint).getClient();\n            String url = sqsClient.getQueueUrl(builder -&gt; builder.queueName(&quot;MyQueue&quot;)).queueUrl();\n\n            from(&quot;direct:start&quot;)\n                    .to(&quot;aws2-sns://active_inventory-int-public-outgoing-notifications&quot; +\n                            &quot;?autoCreateTopic=true&quot; +\n                            &quot;&amp;amazonSNSClient=#amazonSNSClient&quot; +\n                            &quot;&amp;subscribeSNStoSQS=true&quot; +\n                            &quot;&amp;queueUrl=&quot; + url);\n        }\n</code></pre>\n<p>The code should be self-explanatory. The calls to <code>bindToRegistry</code> are needed just because I'm working on LocalStack, otherwise the default should be fine.</p>\n"}],"owner":{"account_id":14194855,"reputation":11,"user_id":10254458,"display_name":"Mykola Afanasiev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":539,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691683632,"creation_date":1625654020,"question_id":68284375,"body_markdown":"I want to create AWS SQS and then subscribe it to an existing SNS topic. For use [this approach][1], from Camel documentation, I must know a queue URL.\r\n```java\r\n//create SQS\r\nfrom(&quot;aws-sqs://MyQueue?amazonSQSClient=#client&amp;delay=5000&amp;maxMessagesPerPoll=5&quot;)\r\n.startupOrder(1)\r\n.to(&quot;mock:result&quot;);\r\n\r\n//create SNS and subscribe to SQS\r\nfrom(&quot;direct:start&quot;)\r\n.startupOrder(2)\r\n.to(&quot;aws-sns://test-camel-sns1?amazonSNSClient=#amazonSNSClient&amp;amazonSQSClient=#amazonSQSClient&amp;subscribeSNStoSQS=true&amp;queueUrl=https://sqs.eu-central-1.amazonaws.com/780410022472/MyQueue&quot;);\r\n```\r\nBut I want to use previously created SQS (I know the name of SQS) and I don&#39;t know the account value(780410022472).\r\nHow can I create SQS and subscribe to SNS without additional information(like an account value) by Camel? \r\n\r\n  [1]: https://camel.apache.org/components/3.4.x/aws-sns-component.html#_create_a_subscription_between_an_aws_sns_topic_and_an_aws_sqs_queue","title":"Apache Camel: How I can create AWS SQS and subscribe to SNS topic","body":"<p>I want to create AWS SQS and then subscribe it to an existing SNS topic. For use <a href=\"https://camel.apache.org/components/3.4.x/aws-sns-component.html#_create_a_subscription_between_an_aws_sns_topic_and_an_aws_sqs_queue\" rel=\"nofollow noreferrer\">this approach</a>, from Camel documentation, I must know a queue URL.</p>\n<pre class=\"lang-java prettyprint-override\"><code>//create SQS\nfrom(&quot;aws-sqs://MyQueue?amazonSQSClient=#client&amp;delay=5000&amp;maxMessagesPerPoll=5&quot;)\n.startupOrder(1)\n.to(&quot;mock:result&quot;);\n\n//create SNS and subscribe to SQS\nfrom(&quot;direct:start&quot;)\n.startupOrder(2)\n.to(&quot;aws-sns://test-camel-sns1?amazonSNSClient=#amazonSNSClient&amp;amazonSQSClient=#amazonSQSClient&amp;subscribeSNStoSQS=true&amp;queueUrl=https://sqs.eu-central-1.amazonaws.com/780410022472/MyQueue&quot;);\n</code></pre>\n<p>But I want to use previously created SQS (I know the name of SQS) and I don't know the account value(780410022472).\nHow can I create SQS and subscribe to SNS without additional information(like an account value) by Camel?</p>\n"},{"tags":["java","arrays","mongodb","mongodb-query","aggregate"],"owner":{"account_id":3887559,"reputation":797,"user_id":3218553,"accept_rate":79,"display_name":"Shabeeralimsn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691683494,"creation_date":1691680560,"question_id":76877109,"body_markdown":"I have the below code to perform and upsert on the MongoDB collection.\r\nupsert operation contains $set, $increment and $cond also.\r\n\r\n\r\n\r\n  \r\n\r\n     try (MongoClient mongoClient = MongoClients.create(&quot;mongodb://localhost:27017&quot;)) {\r\n    \r\n            MongoDatabase database = mongoClient.getDatabase(&quot;DBName&quot;);\r\n    \r\n            MongoCollection&lt;Document&gt; collection = database.getCollection(&quot;collCourse&quot;);\r\n    \r\n            Document globalFilter = new Document();\r\n    \r\n            Document updateQuery = new Document();\r\n    \r\n            System.out.println(&quot;Connected to DB&quot;);\r\n    \r\n            globalFilter.append(&quot;status&quot;, &quot;Open&quot;);\r\n    \r\n            Date eventDtm = new Date();\r\n    \r\n            Document appendDoc = new Document();\r\n    \r\n            Document ds = new Document(&quot;$set&quot;, appendDoc.append(&quot;sn&quot;, &quot;CS&quot;));\r\n    \r\n            appendDoc.append(&quot;rp&quot;, &quot;Invalid&quot;);\r\n            appendDoc.append(&quot;ldtm&quot;, new Date());\r\n            appendDoc.append(&quot;dtim&quot;, &quot;9876&quot;);\r\n    \r\n            updateQuery.putAll(ds);\r\n    \r\n            /** Increment fields **/\r\n            Document incrementOps = new Document(&quot;$inc&quot;,\r\n                            new Document(&quot;dv&quot;, 10).append(&quot;pc&quot;, 1).append(&quot;tc&quot;, 1).append(&quot;tv&quot;, 2).append(&quot;tb&quot;, 3));\r\n    \r\n            updateQuery.putAll(incrementOps);\r\n    \r\n            /** conditionaly update Start and End Dtm **/\r\n            Document updateSdtm = new Document(&quot;$set&quot;, new Document().append(&quot;sdtm&quot;, new Document(&quot;$cond&quot;,\r\n                            Arrays.asList(new Document(&quot;$lt&quot;, Arrays.asList(eventDtm, &quot;$sdtm&quot;)), eventDtm, &quot;$sdtm&quot;))));\r\n    \r\n            Document updateEdtm = new Document(&quot;$set&quot;, new Document().append(&quot;edtm&quot;, new Document(&quot;$cond&quot;,\r\n                            Arrays.asList(new Document(&quot;$gt&quot;, Arrays.asList(eventDtm, &quot;$edtm&quot;)), eventDtm, &quot;$edtm&quot;))));\r\n    \r\n            updateQuery.putAll(updateSdtm);\r\n            updateQuery.putAll(updateEdtm);\r\n            \r\n           \r\n            collection.updateMany(globalFilter, Arrays.asList(updateQuery), new UpdateOptions().upsert(true));\r\n            \r\n            System.out.println(&quot;Done&quot;);\r\n    \r\n    }\r\n\r\nwhile running this I am getting an error \r\n\r\n&gt; com.mongodb.MongoCommandException: Command failed with error 40323\r\n&gt; (Location40323): &#39;A pipeline stage specification object must contain\r\n&gt; exactly one field.&#39; on server localhost:27017. The full response is\r\n&gt; {&quot;ok&quot;: 0.0, &quot;errmsg&quot;: &quot;A pipeline stage specification object must\r\n&gt; contain exactly one field.&quot;, &quot;code&quot;: 40323, &quot;codeName&quot;:\r\n&gt; &quot;Location40323&quot;} \tat\r\n&gt; com.mongodb.internal.connection.ProtocolHelper.getCommandFailureException(ProtocolHelper.java:205)\r\n\r\n\r\nI tried multiple ways. Could someone suggest the best way to perform upsert with increment and set(with condition) operators?","title":"Java client throwing A pipeline stage specification object must contain exactly one field error","body":"<p>I have the below code to perform and upsert on the MongoDB collection.\nupsert operation contains $set, $increment and $cond also.</p>\n<pre><code> try (MongoClient mongoClient = MongoClients.create(&quot;mongodb://localhost:27017&quot;)) {\n\n        MongoDatabase database = mongoClient.getDatabase(&quot;DBName&quot;);\n\n        MongoCollection&lt;Document&gt; collection = database.getCollection(&quot;collCourse&quot;);\n\n        Document globalFilter = new Document();\n\n        Document updateQuery = new Document();\n\n        System.out.println(&quot;Connected to DB&quot;);\n\n        globalFilter.append(&quot;status&quot;, &quot;Open&quot;);\n\n        Date eventDtm = new Date();\n\n        Document appendDoc = new Document();\n\n        Document ds = new Document(&quot;$set&quot;, appendDoc.append(&quot;sn&quot;, &quot;CS&quot;));\n\n        appendDoc.append(&quot;rp&quot;, &quot;Invalid&quot;);\n        appendDoc.append(&quot;ldtm&quot;, new Date());\n        appendDoc.append(&quot;dtim&quot;, &quot;9876&quot;);\n\n        updateQuery.putAll(ds);\n\n        /** Increment fields **/\n        Document incrementOps = new Document(&quot;$inc&quot;,\n                        new Document(&quot;dv&quot;, 10).append(&quot;pc&quot;, 1).append(&quot;tc&quot;, 1).append(&quot;tv&quot;, 2).append(&quot;tb&quot;, 3));\n\n        updateQuery.putAll(incrementOps);\n\n        /** conditionaly update Start and End Dtm **/\n        Document updateSdtm = new Document(&quot;$set&quot;, new Document().append(&quot;sdtm&quot;, new Document(&quot;$cond&quot;,\n                        Arrays.asList(new Document(&quot;$lt&quot;, Arrays.asList(eventDtm, &quot;$sdtm&quot;)), eventDtm, &quot;$sdtm&quot;))));\n\n        Document updateEdtm = new Document(&quot;$set&quot;, new Document().append(&quot;edtm&quot;, new Document(&quot;$cond&quot;,\n                        Arrays.asList(new Document(&quot;$gt&quot;, Arrays.asList(eventDtm, &quot;$edtm&quot;)), eventDtm, &quot;$edtm&quot;))));\n\n        updateQuery.putAll(updateSdtm);\n        updateQuery.putAll(updateEdtm);\n        \n       \n        collection.updateMany(globalFilter, Arrays.asList(updateQuery), new UpdateOptions().upsert(true));\n        \n        System.out.println(&quot;Done&quot;);\n\n}\n</code></pre>\n<p>while running this I am getting an error</p>\n<blockquote>\n<p>com.mongodb.MongoCommandException: Command failed with error 40323\n(Location40323): 'A pipeline stage specification object must contain\nexactly one field.' on server localhost:27017. The full response is\n{&quot;ok&quot;: 0.0, &quot;errmsg&quot;: &quot;A pipeline stage specification object must\ncontain exactly one field.&quot;, &quot;code&quot;: 40323, &quot;codeName&quot;:\n&quot;Location40323&quot;}  at\ncom.mongodb.internal.connection.ProtocolHelper.getCommandFailureException(ProtocolHelper.java:205)</p>\n</blockquote>\n<p>I tried multiple ways. Could someone suggest the best way to perform upsert with increment and set(with condition) operators?</p>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691683391,"creation_date":1691683391,"answer_id":76877499,"question_id":76877151,"body_markdown":"About `default`:\r\nDefault profile used by Spring profile is the `default`. All the beans with no profile annotation are specified belongs to the default profile.\r\n\r\nAbout your current `.yml` config, is declared that if `config.activate.on-profile:` equals with `local` you will have another database instead `H2`, for more details check this one resource [spring.config.activate.on-profile][1]. \r\n\r\nIn your case to change the profile try to replace:\r\n\r\n        spring:\r\n          config.activate.on-profile: local\r\n\r\nTo:\r\n\r\n        spring:\r\n          profiles:\r\n            active: local\r\n\r\nAnd check if, the `default` profile was changed to `local` and of course if database also was change to another one instead `H2` \r\n\r\nAlso i recommend you to have a look at [configuration.set-active-spring-profiles][2]\r\n\r\nLet me know if it helped you.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/3.0.0-M4/reference/htmlsingle/#howto.properties-and-configuration.change-configuration-depending-on-the-environment\r\n  [2]: https://docs.spring.io/spring-boot/docs/3.0.0-M4/reference/htmlsingle/#howto.properties-and-configuration.set-active-spring-profiles","title":"Use something other than H2 for local Build and Unit Tests","body":"<p>About <code>default</code>:\nDefault profile used by Spring profile is the <code>default</code>. All the beans with no profile annotation are specified belongs to the default profile.</p>\n<p>About your current <code>.yml</code> config, is declared that if <code>config.activate.on-profile:</code> equals with <code>local</code> you will have another database instead <code>H2</code>, for more details check this one resource <a href=\"https://docs.spring.io/spring-boot/docs/3.0.0-M4/reference/htmlsingle/#howto.properties-and-configuration.change-configuration-depending-on-the-environment\" rel=\"nofollow noreferrer\">spring.config.activate.on-profile</a>.</p>\n<p>In your case to change the profile try to replace:</p>\n<pre><code>    spring:\n      config.activate.on-profile: local\n</code></pre>\n<p>To:</p>\n<pre><code>    spring:\n      profiles:\n        active: local\n</code></pre>\n<p>And check if, the <code>default</code> profile was changed to <code>local</code> and of course if database also was change to another one instead <code>H2</code></p>\n<p>Also i recommend you to have a look at <a href=\"https://docs.spring.io/spring-boot/docs/3.0.0-M4/reference/htmlsingle/#howto.properties-and-configuration.set-active-spring-profiles\" rel=\"nofollow noreferrer\">configuration.set-active-spring-profiles</a></p>\n<p>Let me know if it helped you.</p>\n"}],"owner":{"account_id":7087876,"reputation":2294,"user_id":5424117,"accept_rate":56,"display_name":"jb62"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691683391,"creation_date":1691680790,"question_id":76877151,"body_markdown":"I have inherited a Spring Boot app that spins up and runs an H2 in-memory database when I Build or run Unit Tests locally.\r\n\r\nI want to address a &quot;real&quot; database instead. I don&#39;t know how to configure this or if it&#39;s even possible to somehow override whatever is happening.\r\n\r\nI suspect it comes from a Spring profile, but I&#39;m not sure.\r\n\r\nHere is what I do have in the application.yaml file. To my mind this implies a &quot;default&quot; profile (which is not mentioned anywhere in the yaml file) that Spring uses to fire up the H2 database, but I could be wrong.\r\n```yaml\r\n# list of things that the local profile does that default doesn&#39;t:\r\n# uses mysql instead of h2\r\n# logs all queries\r\n# emails erdteam\r\nspring:\r\n  config.activate.on-profile: local\r\n  datasource:\r\n    url: jdbc:mysql://localhost/my_database?useSSL=false&amp;createDatabaseIfNotExist=true&amp;useConfigs=maxPerformance&amp;useCursorFetch=true&amp;profileSQL=true\r\n    username: root\r\n    password: root\r\n  jpa.show-sql: true\r\n```","title":"Use something other than H2 for local Build and Unit Tests","body":"<p>I have inherited a Spring Boot app that spins up and runs an H2 in-memory database when I Build or run Unit Tests locally.</p>\n<p>I want to address a &quot;real&quot; database instead. I don't know how to configure this or if it's even possible to somehow override whatever is happening.</p>\n<p>I suspect it comes from a Spring profile, but I'm not sure.</p>\n<p>Here is what I do have in the application.yaml file. To my mind this implies a &quot;default&quot; profile (which is not mentioned anywhere in the yaml file) that Spring uses to fire up the H2 database, but I could be wrong.</p>\n<pre class=\"lang-yaml prettyprint-override\"><code># list of things that the local profile does that default doesn't:\n# uses mysql instead of h2\n# logs all queries\n# emails erdteam\nspring:\n  config.activate.on-profile: local\n  datasource:\n    url: jdbc:mysql://localhost/my_database?useSSL=false&amp;createDatabaseIfNotExist=true&amp;useConfigs=maxPerformance&amp;useCursorFetch=true&amp;profileSQL=true\n    username: root\n    password: root\n  jpa.show-sql: true\n</code></pre>\n"},{"tags":["java","spring-boot","spring-security","java-security"],"owner":{"account_id":10758528,"reputation":11,"user_id":7915706,"display_name":"Gavin Hunt"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691683266,"creation_date":1691683266,"question_id":76877477,"body_markdown":"I&#39;ve come across a bizzare problem that has been plagueing me for days now as I cant seem to find the cause. I have a Spring boot application that on request returns some not very sensitive information that has been signed. (example code below) \r\nNow whats causing confusion is its runtime behaviour on one of my Ubuntu servers a colleague has. The tests written pass on both my windows machine and on the Ubuntu server but when running I get a BadPaddingException thrown within RSACore.java:200 available to view here: [git](https://github.com/frohoff/jdk8u-jdk/blob/master/src/share/classes/sun/security/rsa/RSACore.java)\r\nnow for the stripped down code:\r\n\r\n```\r\nSignature signer = Signature.getInstance(&quot;SHA1withRSA&quot;);\r\nPrivateKey key = KeyFactory.getInstance(&quot;RSA&quot;).generatePrivate(new PKCS8EncodedKeySpec(PRIVATE_KEY_BYTES));\r\nsigner.initSign(key);\r\nsigner.update(BASE_64_ENCODED_STRING.getBytes());\r\nbyte[] bytes = signer.sign();//EXCEPTION IS THROWN HERE WHILST RUNNING ONLY ON UBUNTU SERVER\r\n//returns object that has byte[] &#39;obj&#39; and Base64.getEncoder().encodeToString(bytes) &#39;sig&#39;;\r\n```\r\n\r\nnow what makes this a little more confusing is that it runs and returns correctly the signed oject I expect and it can decoded on windows and mac machines just fine.\r\n\r\nA test that runs successfully on both machines is similar to this:\r\n\r\n\r\n```\r\nresponse = callAboveCode(BASE_64_ENCODED_STRING);\r\nSignature verify = Signature.getInstance(&quot;SHA1withRSA&quot;);\r\nPublicKey key = KeyFactory.getInstance(&quot;RSA&quot;).generatePublic(new X509EncodedKeySpec(PUBLIC_KEY_BYTES));\r\nverify.initVerify(key);\r\nverify.update(response.obj);\r\nassertTrue(verify.verify(Base64.getDecoder().decode(response.sig)));\r\n```\r\n\r\nI shouldnt need to provide the public or private key byte[]&#39;s here as ive checked on both machines they are identical. Ive also checked that both machines are using the same jdk 1.8 and have identical BASE_64_ENCODED_STRING content fed into the function.\r\n\r\nAnything I can try next would be awesome! And if someones come across a similar issue how have you gone about resolving it?\r\n\r\nP.S. I cant re-make my public and private keys as they are already in my application and are working as intended if i produce the signed content on a windows machine.\r\n\r\nI&#39;ve tried setting the Signature provider and I get a similar error from BouncyCastleProvider that looks to be throwing at the exact same place/check that the RSACore class does : [BouncyCastleSource](http://www.java2s.com/example/java-src/pkg/org/bouncycastle/crypto/engines/rsablindedengine-e697f.html) at the check for arjen lenstras crt attack &#39;if (!input.equals(result.modPow(e, m)))&#39;","title":"What could cause this BadPaddingException to be thrown from within Java 1.8 Signature.sign()?","body":"<p>I've come across a bizzare problem that has been plagueing me for days now as I cant seem to find the cause. I have a Spring boot application that on request returns some not very sensitive information that has been signed. (example code below)\nNow whats causing confusion is its runtime behaviour on one of my Ubuntu servers a colleague has. The tests written pass on both my windows machine and on the Ubuntu server but when running I get a BadPaddingException thrown within RSACore.java:200 available to view here: <a href=\"https://github.com/frohoff/jdk8u-jdk/blob/master/src/share/classes/sun/security/rsa/RSACore.java\" rel=\"nofollow noreferrer\">git</a>\nnow for the stripped down code:</p>\n<pre><code>Signature signer = Signature.getInstance(&quot;SHA1withRSA&quot;);\nPrivateKey key = KeyFactory.getInstance(&quot;RSA&quot;).generatePrivate(new PKCS8EncodedKeySpec(PRIVATE_KEY_BYTES));\nsigner.initSign(key);\nsigner.update(BASE_64_ENCODED_STRING.getBytes());\nbyte[] bytes = signer.sign();//EXCEPTION IS THROWN HERE WHILST RUNNING ONLY ON UBUNTU SERVER\n//returns object that has byte[] 'obj' and Base64.getEncoder().encodeToString(bytes) 'sig';\n</code></pre>\n<p>now what makes this a little more confusing is that it runs and returns correctly the signed oject I expect and it can decoded on windows and mac machines just fine.</p>\n<p>A test that runs successfully on both machines is similar to this:</p>\n<pre><code>response = callAboveCode(BASE_64_ENCODED_STRING);\nSignature verify = Signature.getInstance(&quot;SHA1withRSA&quot;);\nPublicKey key = KeyFactory.getInstance(&quot;RSA&quot;).generatePublic(new X509EncodedKeySpec(PUBLIC_KEY_BYTES));\nverify.initVerify(key);\nverify.update(response.obj);\nassertTrue(verify.verify(Base64.getDecoder().decode(response.sig)));\n</code></pre>\n<p>I shouldnt need to provide the public or private key byte[]'s here as ive checked on both machines they are identical. Ive also checked that both machines are using the same jdk 1.8 and have identical BASE_64_ENCODED_STRING content fed into the function.</p>\n<p>Anything I can try next would be awesome! And if someones come across a similar issue how have you gone about resolving it?</p>\n<p>P.S. I cant re-make my public and private keys as they are already in my application and are working as intended if i produce the signed content on a windows machine.</p>\n<p>I've tried setting the Signature provider and I get a similar error from BouncyCastleProvider that looks to be throwing at the exact same place/check that the RSACore class does : <a href=\"http://www.java2s.com/example/java-src/pkg/org/bouncycastle/crypto/engines/rsablindedengine-e697f.html\" rel=\"nofollow noreferrer\">BouncyCastleSource</a> at the check for arjen lenstras crt attack 'if (!input.equals(result.modPow(e, m)))'</p>\n"},{"tags":["java","mysql","kotlin","jndi","tomcat8"],"comments":[{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":1,"creation_date":1691683596,"post_id":76877357,"comment_id":135527771,"body_markdown":"I guess that if that was possible it could be a security vulnerability.","body":"I guess that if that was possible it could be a security vulnerability."},{"owner":{"account_id":10180794,"reputation":73,"user_id":7517656,"accept_rate":67,"display_name":"TheBudderBomb"},"score":0,"creation_date":1691695468,"post_id":76877357,"comment_id":135530061,"body_markdown":"After further consideration I suppose you&#39;re entirely correct. I hadnt thought of it that way","body":"After further consideration I suppose you&#39;re entirely correct. I hadnt thought of it that way"}],"owner":{"account_id":10180794,"reputation":73,"user_id":7517656,"accept_rate":67,"display_name":"TheBudderBomb"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691682406,"creation_date":1691682406,"question_id":76877357,"body_markdown":"Ive been provided a mysql datasource to work with defined in my tomcat server.xml file, and I do not have the power to edit the datasource directly. However, I&#39;ve run into an exception on zeroed timestamp conversion - which would typically require me to edit the URL on the datasource to include a suffix like `?zeroDateTimeBehavior=convertToNull`. I&#39;m accessing the datasource via JndiDatasourceLookup - is there a way for me to programmatically add that suffix onto the connection?","title":"Append URL parameter to server.xml datasource","body":"<p>Ive been provided a mysql datasource to work with defined in my tomcat server.xml file, and I do not have the power to edit the datasource directly. However, I've run into an exception on zeroed timestamp conversion - which would typically require me to edit the URL on the datasource to include a suffix like <code>?zeroDateTimeBehavior=convertToNull</code>. I'm accessing the datasource via JndiDatasourceLookup - is there a way for me to programmatically add that suffix onto the connection?</p>\n"},{"tags":["java","apache-spark","java-8","user-defined-functions"],"answers":[{"comments":[{"owner":{"account_id":29200010,"reputation":3,"user_id":22370342,"display_name":"Ahmed Troudi"},"score":0,"creation_date":1691700601,"post_id":76877326,"comment_id":135530931,"body_markdown":"Thanks for the detailed reply!! The main reason I registered the UDF was because I read somewhere that it can provide performance optimizations but I don&#39;t know how significant that is. I&#39;ll test this code tomorrow and if no issues I&#39;ll accept this answer.","body":"Thanks for the detailed reply!! The main reason I registered the UDF was because I read somewhere that it can provide performance optimizations but I don&#39;t know how significant that is. I&#39;ll test this code tomorrow and if no issues I&#39;ll accept this answer."},{"owner":{"account_id":1017255,"reputation":1526,"user_id":1028537,"display_name":"Chris"},"score":0,"creation_date":1691742364,"post_id":76877326,"comment_id":135535596,"body_markdown":"YW, Registering the udf doesn&#39;t provide any difference in performance it just exposes it to the parsing mechanism, it&#39;s not a big change to do that (see the link) and it can be really useful.","body":"YW, Registering the udf doesn&#39;t provide any difference in performance it just exposes it to the parsing mechanism, it&#39;s not a big change to do that (see the link) and it can be really useful."}],"tags":[],"owner":{"account_id":1017255,"reputation":1526,"user_id":1028537,"display_name":"Chris"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691682133,"creation_date":1691682133,"answer_id":76877326,"question_id":76876617,"body_markdown":"See [here](https://stackoverflow.com/questions/50949384/how-to-create-a-spark-udf-in-java-kotlin-which-returns-a-complex-type).\r\n\r\nUDFs aren&#39;t, out of the box, supporting complex types and you are forced to use Row directly.  For Scala there was https://github.com/gaborbarna/typedudf and _is_ https://github.com/typelevel/frameless providing typed udf&#39;s that derive and use encoders correctly to work with Row.\r\n\r\nThat said if you can live without using the udf function in sql then you can define this helper function using the encoders which will work for any param types (tested on Spark 3.4.1, ScalaUDF may be different on other versions):\r\n\r\n```java\r\npublic &lt;A, B, R&gt; BiFunction&lt;Column, Column, Column&gt; withEncoders(UDF2&lt;A, B, R&gt; udf2, String name, Encoder&lt;A&gt; encA, Encoder&lt;B&gt; encB, Encoder&lt;R&gt; encR, DataType returnType){\r\n    DataType replaced = CharVarcharUtils.failIfHasCharVarchar(returnType);\r\n    scala.Function2&lt;A, B, R&gt; func = new scala.runtime.AbstractFunction2&lt;A, B, R&gt;(){\r\n\r\n        @Override\r\n        public Object apply(Object v1, Object v2) {\r\n            try {\r\n                return ((UDF2&lt;Object, Object, Object&gt;) udf2).call(v1, v2);\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n                return null;\r\n            }\r\n        }\r\n    };\r\n    return (Column a, Column b) -&gt; {\r\n        ScalaUDF udf = new ScalaUDF(func, replaced, Seq$.MODULE$.&lt; Expression&gt;newBuilder().$plus$eq(a.expr()).$plus$eq(b.expr()).result(),\r\n                Seq$.MODULE$.&lt; scala.Option&lt;ExpressionEncoder&lt;?&gt;&gt; &gt;newBuilder().$plus$eq(Some$.MODULE$.apply((ExpressionEncoder&lt;A&gt;) encA)).\r\n                        $plus$eq(Some$.MODULE$.apply((ExpressionEncoder&lt;B&gt;)encB)).result(),\r\n                Some$.MODULE$.apply((ExpressionEncoder&lt;R&gt;) encR), Some$.MODULE$.apply(name), true, true);\r\n        return new Column(udf);\r\n    };\r\n}\r\n```\r\n\r\nThen:\r\n\r\n```java\r\nUDF2&lt;Integer, Tuple2&lt;Double, String&gt;, Tuple2&lt;Double, String&gt;&gt; calculateScoreRaw = (feature, ScoreValueAndReason) -&gt; {\r\n    double new_ScoreValue = 0.5;\r\n\r\n    String new_ScoreReason = &quot;Null Issue&quot;;\r\n    double ScoreValue = ScoreValueAndReason._1();\r\n    String ScoreReason = ScoreValueAndReason._2();\r\n\r\n    double updated_ScoreValue = Math.min(ScoreValue, new_ScoreValue);\r\n    String updated_ScoreReason = new_ScoreValue &lt; ScoreValue ? new_ScoreReason: ScoreReason;\r\n\r\n    return new Tuple2&lt;&gt;(updated_ScoreValue, updated_ScoreReason);\r\n\r\n};\r\n\r\nEncoder&lt;Tuple2&lt;Double, String&gt;&gt; dsTEncoder = Encoders.tuple(Encoders.DOUBLE(), Encoders.STRING());\r\n\r\nBiFunction&lt;Column, Column, Column&gt; calculateScore = withEncoders(calculateScoreRaw, &quot;calculateScore&quot;,\r\n        Encoders.INT(), dsTEncoder, dsTEncoder\r\n        , DataTypes.createStructType(new StructField[]{\r\n        new StructField(&quot;_1&quot;, DataTypes.DoubleType, false, Metadata.empty()),\r\n        new StructField(&quot;_2&quot;, DataTypes.StringType, false, Metadata.empty())\r\n}));\r\n\r\nDataset&lt;Row&gt; df = spark.createDataFrame(Arrays.asList(\r\n        RowFactory.create(1, 2, 3, 4),\r\n        RowFactory.create(2, 1, 4, 3),\r\n        RowFactory.create(3, 4, 9, 2),\r\n        RowFactory.create(4, 3, 2, 1)\r\n), new StructType(new StructField[]{\r\n        new StructField(&quot;A&quot;, DataTypes.IntegerType, true, Metadata.empty()),\r\n        new StructField(&quot;B&quot;, DataTypes.IntegerType, true, Metadata.empty()),\r\n        new StructField(&quot;C&quot;, DataTypes.IntegerType, true, Metadata.empty()),\r\n        new StructField(&quot;D&quot;, DataTypes.IntegerType, true, Metadata.empty())\r\n}));\r\n\r\nString[] columnNames = df.columns();\r\n\r\ndf = df.withColumn(&quot;ScoreValueAndReason&quot;,\r\n        functions.struct(functions.lit(1.0), functions.lit(&quot;No issues&quot;))\r\n);\r\ndf.show();\r\n\r\n// Register the UDF\r\n//spark.udf().register(&quot;calculateScore&quot;, calculateScore, );\r\n\r\nfor (String columnName: columnNames) {\r\n    df = df.withColumn(columnName, calculateScore.apply( col(columnName), col(&quot;ScoreValueAndReason&quot;)));\r\n}\r\ndf.show();\r\n```\r\n\r\nproduces:\r\n\r\n```\r\n+-----------------+-----------------+-----------------+-----------------+-------------------+\r\n|                A|                B|                C|                D|ScoreValueAndReason|\r\n+-----------------+-----------------+-----------------+-----------------+-------------------+\r\n|{0.5, Null Issue}|{0.5, Null Issue}|{0.5, Null Issue}|{0.5, Null Issue}|   {1.0, No issues}|\r\n|{0.5, Null Issue}|{0.5, Null Issue}|{0.5, Null Issue}|{0.5, Null Issue}|   {1.0, No issues}|\r\n|{0.5, Null Issue}|{0.5, Null Issue}|{0.5, Null Issue}|{0.5, Null Issue}|   {1.0, No issues}|\r\n|{0.5, Null Issue}|{0.5, Null Issue}|{0.5, Null Issue}|{0.5, Null Issue}|   {1.0, No issues}|\r\n+-----------------+-----------------+-----------------+-----------------+-------------------+\r\n```\r\n\r\nso a few bits have moved around from your original source (crucially the columnNames also has to move up otherwise it&#39;ll incorrectly include ScoreValueAndReason).\r\n\r\nThe creation of the ScalaUDF maker:\r\n\r\n```java\r\nBiFunction&lt;Column, Column, Column&gt; calculateScore = withEncoders(calculateScoreRaw, &quot;calculateScore&quot;,\r\n        Encoders.INT(), dsTEncoder, dsTEncoder\r\n        , DataTypes.createStructType(new StructField[]{\r\n        new StructField(&quot;_1&quot;, DataTypes.DoubleType, false, Metadata.empty()),\r\n        new StructField(&quot;_2&quot;, DataTypes.StringType, false, Metadata.empty())\r\n}));\r\n```\r\n\r\npasses in the original UDF you defined, with the correct encoders and the return type.  You can also make this sql callable but that&#39;s [another question&#39;s answer](https://stackoverflow.com/a/76838424/1028537).","title":"How to create a Spark UDF that returns a Tuple or updates two columns at the same time?","body":"<p>See <a href=\"https://stackoverflow.com/questions/50949384/how-to-create-a-spark-udf-in-java-kotlin-which-returns-a-complex-type\">here</a>.</p>\n<p>UDFs aren't, out of the box, supporting complex types and you are forced to use Row directly.  For Scala there was <a href=\"https://github.com/gaborbarna/typedudf\" rel=\"nofollow noreferrer\">https://github.com/gaborbarna/typedudf</a> and <em>is</em> <a href=\"https://github.com/typelevel/frameless\" rel=\"nofollow noreferrer\">https://github.com/typelevel/frameless</a> providing typed udf's that derive and use encoders correctly to work with Row.</p>\n<p>That said if you can live without using the udf function in sql then you can define this helper function using the encoders which will work for any param types (tested on Spark 3.4.1, ScalaUDF may be different on other versions):</p>\n<pre class=\"lang-java prettyprint-override\"><code>public &lt;A, B, R&gt; BiFunction&lt;Column, Column, Column&gt; withEncoders(UDF2&lt;A, B, R&gt; udf2, String name, Encoder&lt;A&gt; encA, Encoder&lt;B&gt; encB, Encoder&lt;R&gt; encR, DataType returnType){\n    DataType replaced = CharVarcharUtils.failIfHasCharVarchar(returnType);\n    scala.Function2&lt;A, B, R&gt; func = new scala.runtime.AbstractFunction2&lt;A, B, R&gt;(){\n\n        @Override\n        public Object apply(Object v1, Object v2) {\n            try {\n                return ((UDF2&lt;Object, Object, Object&gt;) udf2).call(v1, v2);\n            } catch (Exception e) {\n                e.printStackTrace();\n                return null;\n            }\n        }\n    };\n    return (Column a, Column b) -&gt; {\n        ScalaUDF udf = new ScalaUDF(func, replaced, Seq$.MODULE$.&lt; Expression&gt;newBuilder().$plus$eq(a.expr()).$plus$eq(b.expr()).result(),\n                Seq$.MODULE$.&lt; scala.Option&lt;ExpressionEncoder&lt;?&gt;&gt; &gt;newBuilder().$plus$eq(Some$.MODULE$.apply((ExpressionEncoder&lt;A&gt;) encA)).\n                        $plus$eq(Some$.MODULE$.apply((ExpressionEncoder&lt;B&gt;)encB)).result(),\n                Some$.MODULE$.apply((ExpressionEncoder&lt;R&gt;) encR), Some$.MODULE$.apply(name), true, true);\n        return new Column(udf);\n    };\n}\n</code></pre>\n<p>Then:</p>\n<pre class=\"lang-java prettyprint-override\"><code>UDF2&lt;Integer, Tuple2&lt;Double, String&gt;, Tuple2&lt;Double, String&gt;&gt; calculateScoreRaw = (feature, ScoreValueAndReason) -&gt; {\n    double new_ScoreValue = 0.5;\n\n    String new_ScoreReason = &quot;Null Issue&quot;;\n    double ScoreValue = ScoreValueAndReason._1();\n    String ScoreReason = ScoreValueAndReason._2();\n\n    double updated_ScoreValue = Math.min(ScoreValue, new_ScoreValue);\n    String updated_ScoreReason = new_ScoreValue &lt; ScoreValue ? new_ScoreReason: ScoreReason;\n\n    return new Tuple2&lt;&gt;(updated_ScoreValue, updated_ScoreReason);\n\n};\n\nEncoder&lt;Tuple2&lt;Double, String&gt;&gt; dsTEncoder = Encoders.tuple(Encoders.DOUBLE(), Encoders.STRING());\n\nBiFunction&lt;Column, Column, Column&gt; calculateScore = withEncoders(calculateScoreRaw, &quot;calculateScore&quot;,\n        Encoders.INT(), dsTEncoder, dsTEncoder\n        , DataTypes.createStructType(new StructField[]{\n        new StructField(&quot;_1&quot;, DataTypes.DoubleType, false, Metadata.empty()),\n        new StructField(&quot;_2&quot;, DataTypes.StringType, false, Metadata.empty())\n}));\n\nDataset&lt;Row&gt; df = spark.createDataFrame(Arrays.asList(\n        RowFactory.create(1, 2, 3, 4),\n        RowFactory.create(2, 1, 4, 3),\n        RowFactory.create(3, 4, 9, 2),\n        RowFactory.create(4, 3, 2, 1)\n), new StructType(new StructField[]{\n        new StructField(&quot;A&quot;, DataTypes.IntegerType, true, Metadata.empty()),\n        new StructField(&quot;B&quot;, DataTypes.IntegerType, true, Metadata.empty()),\n        new StructField(&quot;C&quot;, DataTypes.IntegerType, true, Metadata.empty()),\n        new StructField(&quot;D&quot;, DataTypes.IntegerType, true, Metadata.empty())\n}));\n\nString[] columnNames = df.columns();\n\ndf = df.withColumn(&quot;ScoreValueAndReason&quot;,\n        functions.struct(functions.lit(1.0), functions.lit(&quot;No issues&quot;))\n);\ndf.show();\n\n// Register the UDF\n//spark.udf().register(&quot;calculateScore&quot;, calculateScore, );\n\nfor (String columnName: columnNames) {\n    df = df.withColumn(columnName, calculateScore.apply( col(columnName), col(&quot;ScoreValueAndReason&quot;)));\n}\ndf.show();\n</code></pre>\n<p>produces:</p>\n<pre><code>+-----------------+-----------------+-----------------+-----------------+-------------------+\n|                A|                B|                C|                D|ScoreValueAndReason|\n+-----------------+-----------------+-----------------+-----------------+-------------------+\n|{0.5, Null Issue}|{0.5, Null Issue}|{0.5, Null Issue}|{0.5, Null Issue}|   {1.0, No issues}|\n|{0.5, Null Issue}|{0.5, Null Issue}|{0.5, Null Issue}|{0.5, Null Issue}|   {1.0, No issues}|\n|{0.5, Null Issue}|{0.5, Null Issue}|{0.5, Null Issue}|{0.5, Null Issue}|   {1.0, No issues}|\n|{0.5, Null Issue}|{0.5, Null Issue}|{0.5, Null Issue}|{0.5, Null Issue}|   {1.0, No issues}|\n+-----------------+-----------------+-----------------+-----------------+-------------------+\n</code></pre>\n<p>so a few bits have moved around from your original source (crucially the columnNames also has to move up otherwise it'll incorrectly include ScoreValueAndReason).</p>\n<p>The creation of the ScalaUDF maker:</p>\n<pre class=\"lang-java prettyprint-override\"><code>BiFunction&lt;Column, Column, Column&gt; calculateScore = withEncoders(calculateScoreRaw, &quot;calculateScore&quot;,\n        Encoders.INT(), dsTEncoder, dsTEncoder\n        , DataTypes.createStructType(new StructField[]{\n        new StructField(&quot;_1&quot;, DataTypes.DoubleType, false, Metadata.empty()),\n        new StructField(&quot;_2&quot;, DataTypes.StringType, false, Metadata.empty())\n}));\n</code></pre>\n<p>passes in the original UDF you defined, with the correct encoders and the return type.  You can also make this sql callable but that's <a href=\"https://stackoverflow.com/a/76838424/1028537\">another question's answer</a>.</p>\n"}],"owner":{"account_id":29200010,"reputation":3,"user_id":22370342,"display_name":"Ahmed Troudi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76877326,"answer_count":1,"score":0,"last_activity_date":1691682133,"creation_date":1691677212,"question_id":76876617,"body_markdown":"I&#39;m trying to create UDF in java that performs a computation by iterating over all columns in the dataset, calculates a score for each column and sets a flag with a specific string. I tried having a UDF that updates two columns at the same time but no success. So my current approach is to have a single column composed of a tuple that I plan on splitting into two in a subsequent step.\r\n\r\nThis is my attempt (example code):\r\n\r\n```\r\npublic static void main(String[] args) {\r\n        // Spark session\r\n        SparkSession spark = SparkSession.builder()\r\n                .appName(&quot;UDFExample&quot;)\r\n                .config(&quot;spark.master&quot;, &quot;local&quot;)\r\n                .getOrCreate();\r\n\r\n\r\n        UDF2&lt;Integer, Tuple2&lt;Double, String&gt;, Tuple2&lt;Double, String&gt;&gt; calculateScore = (feature, ScoreValueAndReason) -&gt; {\r\n            double new_ScoreValue = 0.5;\r\n\r\n            String new_ScoreReason = &quot;Null Issue&quot;;\r\n            double ScoreValue = ScoreValueAndReason._1();\r\n            String ScoreReason = ScoreValueAndReason._2();\r\n\r\n            double updated_ScoreValue = Math.min(ScoreValue, new_ScoreValue);\r\n            String updated_ScoreReason = new_ScoreValue &lt; ScoreValue ? new_ScoreReason: ScoreReason;\r\n\r\n            return new Tuple2&lt;&gt;(updated_ScoreValue, updated_ScoreReason);\r\n\r\n        };\r\n        Dataset&lt;Row&gt; df = spark.createDataFrame(Arrays.asList(\r\n                RowFactory.create(1, 2, 3, 4),\r\n                RowFactory.create(2, 1, 4, 3),\r\n                RowFactory.create(3, 4, 9, 2),\r\n                RowFactory.create(4, 3, 2, 1)\r\n        ), new StructType(new StructField[]{\r\n                new StructField(&quot;A&quot;, DataTypes.IntegerType, true, Metadata.empty()),\r\n                new StructField(&quot;B&quot;, DataTypes.IntegerType, true, Metadata.empty()),\r\n                new StructField(&quot;C&quot;, DataTypes.IntegerType, true, Metadata.empty()),\r\n                new StructField(&quot;D&quot;, DataTypes.IntegerType, true, Metadata.empty())\r\n        }));\r\n\r\n        df = df.withColumn(&quot;ScoreValueAndReason&quot;,\r\n                functions.struct(functions.lit(1.0), functions.lit(&quot;No issues&quot;))\r\n        );\r\n        df.show();\r\n\r\n        // Register the UDF\r\n        spark.udf().register(&quot;calculateScore&quot;, calculateScore, DataTypes.createStructType(new StructField[]{\r\n                new StructField(&quot;_1&quot;, DataTypes.DoubleType, false, Metadata.empty()),\r\n                new StructField(&quot;_2&quot;, DataTypes.StringType, false, Metadata.empty())\r\n        }));\r\n\r\n        String[] columnNames = df.columns();\r\n        for (String columnName: columnNames) {\r\n            df = df.withColumn(columnName, functions.callUDF(&quot;calculateScore&quot;, col(columnName), col(&quot;ScoreValueAndReason&quot;)));\r\n        }\r\n        df.show();\r\n```\r\n\r\nI tried the implementation above as well as a slightly different udf, but I keep running into this error: `org.apache.spark.sql.catalyst.expressions.GenericRowWithSchema incompatible with scala.Tuple2`\r\n\r\nI expect a resulting dataframe with either two new columns scoreeReason and scoreValue or (more like in the example I provided) a single column scoreReasonAndValue that contains the values updated by my udf.","title":"How to create a Spark UDF that returns a Tuple or updates two columns at the same time?","body":"<p>I'm trying to create UDF in java that performs a computation by iterating over all columns in the dataset, calculates a score for each column and sets a flag with a specific string. I tried having a UDF that updates two columns at the same time but no success. So my current approach is to have a single column composed of a tuple that I plan on splitting into two in a subsequent step.</p>\n<p>This is my attempt (example code):</p>\n<pre><code>public static void main(String[] args) {\n        // Spark session\n        SparkSession spark = SparkSession.builder()\n                .appName(&quot;UDFExample&quot;)\n                .config(&quot;spark.master&quot;, &quot;local&quot;)\n                .getOrCreate();\n\n\n        UDF2&lt;Integer, Tuple2&lt;Double, String&gt;, Tuple2&lt;Double, String&gt;&gt; calculateScore = (feature, ScoreValueAndReason) -&gt; {\n            double new_ScoreValue = 0.5;\n\n            String new_ScoreReason = &quot;Null Issue&quot;;\n            double ScoreValue = ScoreValueAndReason._1();\n            String ScoreReason = ScoreValueAndReason._2();\n\n            double updated_ScoreValue = Math.min(ScoreValue, new_ScoreValue);\n            String updated_ScoreReason = new_ScoreValue &lt; ScoreValue ? new_ScoreReason: ScoreReason;\n\n            return new Tuple2&lt;&gt;(updated_ScoreValue, updated_ScoreReason);\n\n        };\n        Dataset&lt;Row&gt; df = spark.createDataFrame(Arrays.asList(\n                RowFactory.create(1, 2, 3, 4),\n                RowFactory.create(2, 1, 4, 3),\n                RowFactory.create(3, 4, 9, 2),\n                RowFactory.create(4, 3, 2, 1)\n        ), new StructType(new StructField[]{\n                new StructField(&quot;A&quot;, DataTypes.IntegerType, true, Metadata.empty()),\n                new StructField(&quot;B&quot;, DataTypes.IntegerType, true, Metadata.empty()),\n                new StructField(&quot;C&quot;, DataTypes.IntegerType, true, Metadata.empty()),\n                new StructField(&quot;D&quot;, DataTypes.IntegerType, true, Metadata.empty())\n        }));\n\n        df = df.withColumn(&quot;ScoreValueAndReason&quot;,\n                functions.struct(functions.lit(1.0), functions.lit(&quot;No issues&quot;))\n        );\n        df.show();\n\n        // Register the UDF\n        spark.udf().register(&quot;calculateScore&quot;, calculateScore, DataTypes.createStructType(new StructField[]{\n                new StructField(&quot;_1&quot;, DataTypes.DoubleType, false, Metadata.empty()),\n                new StructField(&quot;_2&quot;, DataTypes.StringType, false, Metadata.empty())\n        }));\n\n        String[] columnNames = df.columns();\n        for (String columnName: columnNames) {\n            df = df.withColumn(columnName, functions.callUDF(&quot;calculateScore&quot;, col(columnName), col(&quot;ScoreValueAndReason&quot;)));\n        }\n        df.show();\n</code></pre>\n<p>I tried the implementation above as well as a slightly different udf, but I keep running into this error: <code>org.apache.spark.sql.catalyst.expressions.GenericRowWithSchema incompatible with scala.Tuple2</code></p>\n<p>I expect a resulting dataframe with either two new columns scoreeReason and scoreValue or (more like in the example I provided) a single column scoreReasonAndValue that contains the values updated by my udf.</p>\n"},{"tags":["java","spring","stomp","spring-websocket","sockjs"],"answers":[{"tags":[],"owner":{"account_id":7903461,"reputation":1,"user_id":5969769,"display_name":"Chris H."},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691682119,"creation_date":1691682119,"answer_id":76877319,"question_id":75757945,"body_markdown":"I found this question while working on something similar and the answer to https://stackoverflow.com/questions/36159859/spring-websocketstompclient-proxy seemed to cover most of it, but used an older `HttpClientBuilder`.\r\n\r\nIn short, passing in a custom `RestTemplate` with your desired proxy configuration, to the `RestTemplateXhrTransport` constructor.\r\n\r\n```\r\nimport org.apache.hc.client5.http.impl.classic.CloseableHttpClient;\r\nimport org.apache.hc.client5.http.impl.classic.HttpClients;\r\nimport org.apache.hc.core5.http.HttpHost;\r\nimport org.springframework.web.client.RestTemplate;\r\n\r\n...\r\ntransports.add(new RestTemplateXhrTransport(getRestTemplate()));\r\n...\r\n\r\nprivate RestTemplate getRestTemplate() {\r\n    HttpHost myProxy = new HttpHost(proxyHost, proxyPort);\r\n    // Proxy can be configured as needed.\r\n    CloseableHttpClient closeableHttpClient = HttpClients.custom().setProxy(myProxy).build();\r\n    \r\n    HttpComponentsClientHttpRequestFactory factory = new HttpComponentsClientHttpRequestFactory();\r\n    factory.setHttpClient(closeableHttpClient);\r\n    return new RestTemplate(factory);\r\n}\r\n```\r\n\r\n","title":"Programatical proxy support in Spring WebSockets&#39; SockJsClient","body":"<p>I found this question while working on something similar and the answer to <a href=\"https://stackoverflow.com/questions/36159859/spring-websocketstompclient-proxy\">Spring WebSocket(Stomp)Client proxy</a> seemed to cover most of it, but used an older <code>HttpClientBuilder</code>.</p>\n<p>In short, passing in a custom <code>RestTemplate</code> with your desired proxy configuration, to the <code>RestTemplateXhrTransport</code> constructor.</p>\n<pre><code>import org.apache.hc.client5.http.impl.classic.CloseableHttpClient;\nimport org.apache.hc.client5.http.impl.classic.HttpClients;\nimport org.apache.hc.core5.http.HttpHost;\nimport org.springframework.web.client.RestTemplate;\n\n...\ntransports.add(new RestTemplateXhrTransport(getRestTemplate()));\n...\n\nprivate RestTemplate getRestTemplate() {\n    HttpHost myProxy = new HttpHost(proxyHost, proxyPort);\n    // Proxy can be configured as needed.\n    CloseableHttpClient closeableHttpClient = HttpClients.custom().setProxy(myProxy).build();\n    \n    HttpComponentsClientHttpRequestFactory factory = new HttpComponentsClientHttpRequestFactory();\n    factory.setHttpClient(closeableHttpClient);\n    return new RestTemplate(factory);\n}\n</code></pre>\n"}],"owner":{"account_id":9088765,"reputation":26,"user_id":6765610,"display_name":"LouBen3010"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":127,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691682119,"creation_date":1678978520,"question_id":75757945,"body_markdown":"I&#39;m developing a tiny Java 15 application which connects to a Spring Boot based infrastructure using STOMP over WebSockets. Basically this is a no-brainer but unfortunately corporate proxy settings are very disturbing. Since it could be possible that the corporate security policies require different proxies for different applications it should be possible to configure this programatically.\r\n\r\nAs said previously the application is written in Java 15 and the pom.xml where I referred spring-websockets and spring-messaging looks like this:\r\n\r\n```xml\r\n&lt;!-- ... --&gt;\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;spring-websocket&lt;/artifactId&gt;\r\n\t&lt;version&gt;5.2.11.RELEASE&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;spring-messaging&lt;/artifactId&gt;\r\n\t&lt;version&gt;5.2.11.RELEASE&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;!-- ... --&gt;\r\n```\r\n\r\nWith other applications where I used standard Java HttpClients it was really simple. In this cases it is sufficient to configure the HttpClient like this:\r\n\r\n```java\r\nHttpClient.newBuilder().proxy( ProxySelector.of( new InetSocketAddress( proxyHostAddr, proxyPort ) ) ).authenticator( proxyAuthenticator ).build();\r\n```\r\n\r\nBecause WebSockets are indeed based on the HTTP protocol I assumed that there is a place in the Spring universe where I just can get the underlying HttpClient (if this is used of course) and update its proxy settings.\r\n\r\nWith the following snipped I initialize a very basic STOMP client:\r\n\r\n```java\r\n// Set up WebSocket connection transports (different ways to communicate with a WS server)\r\nList&lt;Transport&gt; transports = new ArrayList&lt;&gt;( 2 );\r\ntransports.add( new WebSocketTransport( new StandardWebSocketClient() ) );\r\ntransports.add( new RestTemplateXhrTransport() );\r\n\r\nthis.stompClient = new WebSocketStompClient( new SockJsClient( transports ) );\r\n```\r\n\r\nI wasn&#39;t able to find out where I can intercept or implement a interface or something like that to ONLY exchange the proxy settings.\r\n\r\nThere was only a single way how I managed to get this running: When building my application as .jar I can tell the JVM which proxies to use by calling the JAR like this:\r\n\r\n```sh\r\njava -Dhttp.proxyHost=127.0.0.1 -Dhttp.proxyPort=8081 -Dhttps.proxyHost=127.0.0.1 -Dhttps.proxyPort=8081 -jar myJar.jar\r\n```\r\n\r\nSince I don&#39;t know the proxy settings at each customer this solution is not acceptable and it also leads to the situation that ALL networking stuff inside this JVM instance is lead through the proxy.\r\n\r\nThanks in advance!\r\n\r\nEdit:\r\nAs I&#39;m debugging for hours now I found out something new: The underlying WebSocket implementation is `org.apache.tomcat.websocket.WsWebSocketContainer`. Inside this class the system proxy is retrieved using the `ProxySelector.getDefault()` call. Unfortunately this class doesn&#39;t offer any method to override the way of how the proxies are gathered. In the worst case I have to copy this whole 800-line class and just replace the particular piece of code. But I feel uncomfortable doing this. Maybe someone in the audience here has a clue.","title":"Programatical proxy support in Spring WebSockets&#39; SockJsClient","body":"<p>I'm developing a tiny Java 15 application which connects to a Spring Boot based infrastructure using STOMP over WebSockets. Basically this is a no-brainer but unfortunately corporate proxy settings are very disturbing. Since it could be possible that the corporate security policies require different proxies for different applications it should be possible to configure this programatically.</p>\n<p>As said previously the application is written in Java 15 and the pom.xml where I referred spring-websockets and spring-messaging looks like this:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;!-- ... --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-websocket&lt;/artifactId&gt;\n    &lt;version&gt;5.2.11.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-messaging&lt;/artifactId&gt;\n    &lt;version&gt;5.2.11.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;!-- ... --&gt;\n</code></pre>\n<p>With other applications where I used standard Java HttpClients it was really simple. In this cases it is sufficient to configure the HttpClient like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>HttpClient.newBuilder().proxy( ProxySelector.of( new InetSocketAddress( proxyHostAddr, proxyPort ) ) ).authenticator( proxyAuthenticator ).build();\n</code></pre>\n<p>Because WebSockets are indeed based on the HTTP protocol I assumed that there is a place in the Spring universe where I just can get the underlying HttpClient (if this is used of course) and update its proxy settings.</p>\n<p>With the following snipped I initialize a very basic STOMP client:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Set up WebSocket connection transports (different ways to communicate with a WS server)\nList&lt;Transport&gt; transports = new ArrayList&lt;&gt;( 2 );\ntransports.add( new WebSocketTransport( new StandardWebSocketClient() ) );\ntransports.add( new RestTemplateXhrTransport() );\n\nthis.stompClient = new WebSocketStompClient( new SockJsClient( transports ) );\n</code></pre>\n<p>I wasn't able to find out where I can intercept or implement a interface or something like that to ONLY exchange the proxy settings.</p>\n<p>There was only a single way how I managed to get this running: When building my application as .jar I can tell the JVM which proxies to use by calling the JAR like this:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>java -Dhttp.proxyHost=127.0.0.1 -Dhttp.proxyPort=8081 -Dhttps.proxyHost=127.0.0.1 -Dhttps.proxyPort=8081 -jar myJar.jar\n</code></pre>\n<p>Since I don't know the proxy settings at each customer this solution is not acceptable and it also leads to the situation that ALL networking stuff inside this JVM instance is lead through the proxy.</p>\n<p>Thanks in advance!</p>\n<p>Edit:\nAs I'm debugging for hours now I found out something new: The underlying WebSocket implementation is <code>org.apache.tomcat.websocket.WsWebSocketContainer</code>. Inside this class the system proxy is retrieved using the <code>ProxySelector.getDefault()</code> call. Unfortunately this class doesn't offer any method to override the way of how the proxies are gathered. In the worst case I have to copy this whole 800-line class and just replace the particular piece of code. But I feel uncomfortable doing this. Maybe someone in the audience here has a clue.</p>\n"},{"tags":["java","neo4j"],"comments":[{"owner":{"account_id":8261395,"reputation":2529,"user_id":12586837,"display_name":"Samitha Nanayakkara"},"score":0,"creation_date":1533816485,"post_id":51766428,"comment_id":90491725,"body_markdown":"Are you certain that you are using URI instead of URL? This occurs mostly because of using URL with bolt.","body":"Are you certain that you are using URI instead of URL? This occurs mostly because of using URL with bolt."},{"owner":{"account_id":14123011,"reputation":1,"user_id":10203054,"display_name":"Christy Augustine"},"score":0,"creation_date":1533911633,"post_id":51766428,"comment_id":90534783,"body_markdown":"I had tried to connect with the URI instead of URL since bolt is being used.","body":"I had tried to connect with the URI instead of URL since bolt is being used."}],"answers":[{"tags":[],"owner":{"account_id":16048114,"reputation":1,"user_id":11582749,"display_name":"Manila"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691681864,"creation_date":1691672598,"answer_id":76875986,"question_id":51766428,"body_markdown":"    //Try this in your Configuration Neo4j class:\r\n    \r\n     @Bean\r\n        public Driver neo4jDriver() {\r\n    \r\n            Driver driver = GraphDatabase.driver(&quot;bolt://127.0.0.1:7687&quot;,\r\n                    AuthTokens.basic(&lt;user&gt;, &lt;pass&gt;));\r\n    \r\n            return driver;\r\n    \r\n        }\r\n\r\n   ","title":"How do we call neo4j 3.4 database uri from java?","body":"<pre><code>//Try this in your Configuration Neo4j class:\n\n @Bean\n    public Driver neo4jDriver() {\n\n        Driver driver = GraphDatabase.driver(&quot;bolt://127.0.0.1:7687&quot;,\n                AuthTokens.basic(&lt;user&gt;, &lt;pass&gt;));\n\n        return driver;\n\n    }\n</code></pre>\n"}],"owner":{"account_id":14123011,"reputation":1,"user_id":10203054,"display_name":"Christy Augustine"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691681864,"creation_date":1533815891,"question_id":51766428,"body_markdown":"I have upgraded my neo4j from 2.3 to 3.4. Initially I had used WebTarget to connect the same. Now its been changed to bolt URI. While trying to connect with bolt://localhost:7687, I am getting an error like &quot;javax.ws.rs.ProcessingException: java.net.MalformedURLException: unknown protocol: bolt&quot;. How can I solve this?","title":"How do we call neo4j 3.4 database uri from java?","body":"<p>I have upgraded my neo4j from 2.3 to 3.4. Initially I had used WebTarget to connect the same. Now its been changed to bolt URI. While trying to connect with bolt://localhost:7687, I am getting an error like \"javax.ws.rs.ProcessingException: java.net.MalformedURLException: unknown protocol: bolt\". How can I solve this?</p>\n"},{"tags":["java","spring","spring-security","jwt"],"comments":[{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":1,"creation_date":1678464172,"post_id":75697944,"comment_id":133543296,"body_markdown":"`after i moved the project to another folder it just stopped working` show your folder structure for your project. What did you move?","body":"<code>after i moved the project to another folder it just stopped working</code> show your folder structure for your project. What did you move?"}],"answers":[{"tags":[],"owner":{"account_id":7952914,"reputation":91,"user_id":6516369,"display_name":"Paulo Matos"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691681419,"creation_date":1691681419,"answer_id":76877231,"question_id":75697944,"body_markdown":"In my case it was because I moved the main class, the one with @SpringBootApplication, to a different folder (bootloader). So since it was not on a higher or same level than my security classes, the security classes started to be ignored.\r\n\r\nSo I just moved the main class to my root package and security started to work again.","title":"SpringBoot App Stopped Working - Security Issues","body":"<p>In my case it was because I moved the main class, the one with @SpringBootApplication, to a different folder (bootloader). So since it was not on a higher or same level than my security classes, the security classes started to be ignored.</p>\n<p>So I just moved the main class to my root package and security started to work again.</p>\n"}],"owner":{"account_id":26366719,"reputation":37,"user_id":20022057,"display_name":"Pablo Costa"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":273,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1691681419,"creation_date":1678461755,"question_id":75697944,"body_markdown":"I&#39;ve built an SpringBoot APP using a tutorial from YouTube. It worked flawlessly, did everything i could (wrote all the code from the video, fixed parts where the code wasn&#39;t working \\ component was deprecated, etc). So far so good.\r\n\r\nHowever, after i moved the project to another folder it just stopped working. The log shows something like:\r\n\r\n&gt; Using generated security password:\r\n&gt; 762a8270-b075-45b5-ba17-691aa31d86cb\r\n&gt; \r\n&gt; This generated password is for development use only. Your security\r\n&gt; configuration must be updated before running your application in\r\n&gt; production.\r\n\r\nFrom what i&#39;ve read, its something about the security in the app.\r\nI&#39;m using JWT and correctly configured securityFilterChain (since WebSecurityConfigureAdapter is deprecated). The app was working fine, it just stopped working after i moved it from another folder (moved using InteliJ).\r\n\r\nI&#39;ve also tried to clone my latest commit from github to another folder, but the problem persisted. Nothing changed.\r\n\r\nHere&#39;s the full initialization log:\r\n\r\n    2023-03-10T11:52:27.803-03:00  INFO 19088 --- [           main] c.i.c.CafeManagementSystemApplication    : Starting CafeManagementSystemApplication using Java 19.0.1 with PID 19088 (C:\\Portfolio\\Cafe Management System (Angular, Spring Boot - Java, MySQL Database)\\Java\\com.inn.cafe\\target\\classes started by Pablo in C:\\Portfolio\\Cafe Management System (Angular, Spring Boot - Java, MySQL Database)\\Java)\r\n    2023-03-10T11:52:27.808-03:00  INFO 19088 --- [           main] c.i.c.CafeManagementSystemApplication    : No active profile set, falling back to 1 default profile: &quot;default&quot;\r\n    2023-03-10T11:52:28.784-03:00  INFO 19088 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\r\n    2023-03-10T11:52:28.816-03:00  INFO 19088 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 18 ms. Found 0 JPA repository interfaces.\r\n    2023-03-10T11:52:29.696-03:00  INFO 19088 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8081 (http)\r\n    2023-03-10T11:52:29.710-03:00  INFO 19088 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\r\n    2023-03-10T11:52:29.711-03:00  INFO 19088 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.5]\r\n    2023-03-10T11:52:29.827-03:00  INFO 19088 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\r\n    2023-03-10T11:52:29.829-03:00  INFO 19088 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1940 ms\r\n    2023-03-10T11:52:30.097-03:00  INFO 19088 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]\r\n    2023-03-10T11:52:30.183-03:00  INFO 19088 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.7.Final\r\n    2023-03-10T11:52:30.535-03:00  INFO 19088 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\r\n    2023-03-10T11:52:30.882-03:00  INFO 19088 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2cae5fa7\r\n    2023-03-10T11:52:30.885-03:00  INFO 19088 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.\r\n    2023-03-10T11:52:30.952-03:00  INFO 19088 --- [           main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect\r\n    2023-03-10T11:52:31.502-03:00  INFO 19088 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\r\n    2023-03-10T11:52:31.513-03:00  INFO 19088 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit &#39;default&#39;\r\n    2023-03-10T11:52:32.119-03:00  WARN 19088 --- [           main] .s.s.UserDetailsServiceAutoConfiguration : \r\n    \r\n    Using generated security password: 762a8270-b075-45b5-ba17-691aa31d86cb\r\n    \r\n    This generated password is for development use only. Your security configuration must be updated before running your application in production.\r\n    \r\n    2023-03-10T11:52:32.296-03:00  INFO 19088 --- [           main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@3b8d2abe, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6669cba, org.springframework.security.web.context.SecurityContextHolderFilter@4ab90d01, org.springframework.security.web.header.HeaderWriterFilter@35af1558, org.springframework.security.web.csrf.CsrfFilter@1edac3b4, org.springframework.security.web.authentication.logout.LogoutFilter@7e2a76be, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@b842275, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@3a116ca6, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@37c74e4e, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@4a6ef712, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2d88c1bf, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@56d5460f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@128a188a, org.springframework.security.web.access.ExceptionTranslationFilter@72b10258, org.springframework.security.web.access.intercept.AuthorizationFilter@44c27b8b]\r\n    2023-03-10T11:52:32.397-03:00  INFO 19088 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8081 (http) with context path &#39;&#39;\r\n    2023-03-10T11:52:32.410-03:00  INFO 19088 --- [           main] c.i.c.CafeManagementSystemApplication    : Started CafeManagementSystemApplication in 5.17 seconds (process running for 5.761)\r\n\r\nI&#39;ve read several pages around SO, and most of em just tell to do this:\r\n\r\n    @EnableAutoConfiguration(exclude = { SecurityAutoConfiguration.class })\r\n\r\nTo exclude SecurityAutoConfiguration.class on springboot main initializer. However i need to authenticate users on my app, i can&#39;t disable security.\r\n\r\nIs there anything i&#39;m missing? I&#39;ll show here my SecurityConfig class, i believe its the only one that may have something to do with this issue. Any additional information required just post on the comments and i&#39;ll edit the question.\r\n\r\nThanks in advance for any input!\r\n\r\n\r\npackage com.inn.cafe.JWT;\r\n\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\n\r\n\r\n    @Configuration\r\n    @EnableGlobalMethodSecurity(\r\n            // securedEnabled = true,\r\n            // jsr250Enabled = true,\r\n            prePostEnabled = true)\r\n    public class SecurityConfig    {\r\n        @Autowired\r\n        CustomerUserDetailsService customerUserDetailsService;\r\n        @Autowired\r\n        JwtFilter jwtFilter;\r\n        @Autowired\r\n        private AuthEntryPointJwt unauthorizedHandler;\r\n        @Bean\r\n        public WebSecurityCustomizer webSecurityCustomizer(){\r\n            return (web) -&gt; web.ignoring().requestMatchers(&quot;/users/login&quot;, &quot;/users/signup&quot;,&quot;/users/forgotPassword&quot;);\r\n        }\r\n    \r\n        @Bean\r\n        public PasswordEncoder passwordEncoder(){\r\n            var encodedPwd = new BCryptPasswordEncoder();\r\n            return encodedPwd;\r\n        }\r\n        @Bean(name = BeanIds.AUTHENTICATION_MANAGER)\r\n        public AuthenticationManager authenticationManager(AuthenticationConfiguration authConfig) throws Exception {\r\n            return authConfig.getAuthenticationManager();\r\n        }\r\n        @Bean\r\n        public DaoAuthenticationProvider authenticationProvider(){\r\n            DaoAuthenticationProvider authProvider = new DaoAuthenticationProvider();\r\n            authProvider.setUserDetailsService(customerUserDetailsService);\r\n            authProvider.setPasswordEncoder(passwordEncoder());\r\n            return authProvider;\r\n        }\r\n        @Bean\r\n        public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n            http\r\n                    .cors()\r\n                    .and()\r\n                    .csrf()\r\n                    .disable()\r\n                    .exceptionHandling()\r\n                    .authenticationEntryPoint(unauthorizedHandler)\r\n                    .and()\r\n                    .sessionManagement()\r\n                    .sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\r\n                    .authorizeRequests()\r\n                    .requestMatchers(&quot;/user/login&quot;)\r\n                    .permitAll()\r\n                    .requestMatchers(&quot;/user/signup&quot;)\r\n                    .permitAll()\r\n                    .requestMatchers(&quot;/user/forgotPassword&quot;)\r\n                    .permitAll()\r\n                    .anyRequest()\r\n                    .authenticated();\r\n    \r\n    \r\n    \r\n          http.addFilterBefore(jwtFilter, UsernamePasswordAuthenticationFilter.class);\r\n    \r\n          http.authenticationProvider(authenticationProvider());\r\n    \r\n    \r\n            return http.build();\r\n        }\r\n    \r\n    \r\n    \r\n    }\r\n\r\nEDIT: Some information.\r\n1) SpringBoot main class in on the top.\r\n2) Tried to add:\r\n\r\n&gt; @SpringBootApplication(scanBasePackages=&quot;com.inn.cafe&quot;)\r\n\r\nNothing changed.\r\n\r\n3) It isn&#39;t scanning my SecurityConfig class. I added a few log entries there, and nothing was shown when i started the app.\r\n4) Using @EnableGlobalMethodSecurity on the SecurityConfig class.\r\n5) I&#39;m not using WebSecurityConfigureAdpter. I&#39;m aware its deprecated.","title":"SpringBoot App Stopped Working - Security Issues","body":"<p>I've built an SpringBoot APP using a tutorial from YouTube. It worked flawlessly, did everything i could (wrote all the code from the video, fixed parts where the code wasn't working \\ component was deprecated, etc). So far so good.</p>\n<p>However, after i moved the project to another folder it just stopped working. The log shows something like:</p>\n<blockquote>\n<p>Using generated security password:\n762a8270-b075-45b5-ba17-691aa31d86cb</p>\n<p>This generated password is for development use only. Your security\nconfiguration must be updated before running your application in\nproduction.</p>\n</blockquote>\n<p>From what i've read, its something about the security in the app.\nI'm using JWT and correctly configured securityFilterChain (since WebSecurityConfigureAdapter is deprecated). The app was working fine, it just stopped working after i moved it from another folder (moved using InteliJ).</p>\n<p>I've also tried to clone my latest commit from github to another folder, but the problem persisted. Nothing changed.</p>\n<p>Here's the full initialization log:</p>\n<pre><code>2023-03-10T11:52:27.803-03:00  INFO 19088 --- [           main] c.i.c.CafeManagementSystemApplication    : Starting CafeManagementSystemApplication using Java 19.0.1 with PID 19088 (C:\\Portfolio\\Cafe Management System (Angular, Spring Boot - Java, MySQL Database)\\Java\\com.inn.cafe\\target\\classes started by Pablo in C:\\Portfolio\\Cafe Management System (Angular, Spring Boot - Java, MySQL Database)\\Java)\n2023-03-10T11:52:27.808-03:00  INFO 19088 --- [           main] c.i.c.CafeManagementSystemApplication    : No active profile set, falling back to 1 default profile: &quot;default&quot;\n2023-03-10T11:52:28.784-03:00  INFO 19088 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\n2023-03-10T11:52:28.816-03:00  INFO 19088 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 18 ms. Found 0 JPA repository interfaces.\n2023-03-10T11:52:29.696-03:00  INFO 19088 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8081 (http)\n2023-03-10T11:52:29.710-03:00  INFO 19088 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\n2023-03-10T11:52:29.711-03:00  INFO 19088 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.5]\n2023-03-10T11:52:29.827-03:00  INFO 19088 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\n2023-03-10T11:52:29.829-03:00  INFO 19088 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1940 ms\n2023-03-10T11:52:30.097-03:00  INFO 19088 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]\n2023-03-10T11:52:30.183-03:00  INFO 19088 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.7.Final\n2023-03-10T11:52:30.535-03:00  INFO 19088 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\n2023-03-10T11:52:30.882-03:00  INFO 19088 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2cae5fa7\n2023-03-10T11:52:30.885-03:00  INFO 19088 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.\n2023-03-10T11:52:30.952-03:00  INFO 19088 --- [           main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect\n2023-03-10T11:52:31.502-03:00  INFO 19088 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\n2023-03-10T11:52:31.513-03:00  INFO 19088 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'\n2023-03-10T11:52:32.119-03:00  WARN 19088 --- [           main] .s.s.UserDetailsServiceAutoConfiguration : \n\nUsing generated security password: 762a8270-b075-45b5-ba17-691aa31d86cb\n\nThis generated password is for development use only. Your security configuration must be updated before running your application in production.\n\n2023-03-10T11:52:32.296-03:00  INFO 19088 --- [           main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@3b8d2abe, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6669cba, org.springframework.security.web.context.SecurityContextHolderFilter@4ab90d01, org.springframework.security.web.header.HeaderWriterFilter@35af1558, org.springframework.security.web.csrf.CsrfFilter@1edac3b4, org.springframework.security.web.authentication.logout.LogoutFilter@7e2a76be, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@b842275, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@3a116ca6, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@37c74e4e, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@4a6ef712, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2d88c1bf, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@56d5460f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@128a188a, org.springframework.security.web.access.ExceptionTranslationFilter@72b10258, org.springframework.security.web.access.intercept.AuthorizationFilter@44c27b8b]\n2023-03-10T11:52:32.397-03:00  INFO 19088 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8081 (http) with context path ''\n2023-03-10T11:52:32.410-03:00  INFO 19088 --- [           main] c.i.c.CafeManagementSystemApplication    : Started CafeManagementSystemApplication in 5.17 seconds (process running for 5.761)\n</code></pre>\n<p>I've read several pages around SO, and most of em just tell to do this:</p>\n<pre><code>@EnableAutoConfiguration(exclude = { SecurityAutoConfiguration.class })\n</code></pre>\n<p>To exclude SecurityAutoConfiguration.class on springboot main initializer. However i need to authenticate users on my app, i can't disable security.</p>\n<p>Is there anything i'm missing? I'll show here my SecurityConfig class, i believe its the only one that may have something to do with this issue. Any additional information required just post on the comments and i'll edit the question.</p>\n<p>Thanks in advance for any input!</p>\n<p>package com.inn.cafe.JWT;</p>\n<p>import org.springframework.beans.factory.annotation.Autowired;</p>\n<pre><code>@Configuration\n@EnableGlobalMethodSecurity(\n        // securedEnabled = true,\n        // jsr250Enabled = true,\n        prePostEnabled = true)\npublic class SecurityConfig    {\n    @Autowired\n    CustomerUserDetailsService customerUserDetailsService;\n    @Autowired\n    JwtFilter jwtFilter;\n    @Autowired\n    private AuthEntryPointJwt unauthorizedHandler;\n    @Bean\n    public WebSecurityCustomizer webSecurityCustomizer(){\n        return (web) -&gt; web.ignoring().requestMatchers(&quot;/users/login&quot;, &quot;/users/signup&quot;,&quot;/users/forgotPassword&quot;);\n    }\n\n    @Bean\n    public PasswordEncoder passwordEncoder(){\n        var encodedPwd = new BCryptPasswordEncoder();\n        return encodedPwd;\n    }\n    @Bean(name = BeanIds.AUTHENTICATION_MANAGER)\n    public AuthenticationManager authenticationManager(AuthenticationConfiguration authConfig) throws Exception {\n        return authConfig.getAuthenticationManager();\n    }\n    @Bean\n    public DaoAuthenticationProvider authenticationProvider(){\n        DaoAuthenticationProvider authProvider = new DaoAuthenticationProvider();\n        authProvider.setUserDetailsService(customerUserDetailsService);\n        authProvider.setPasswordEncoder(passwordEncoder());\n        return authProvider;\n    }\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http\n                .cors()\n                .and()\n                .csrf()\n                .disable()\n                .exceptionHandling()\n                .authenticationEntryPoint(unauthorizedHandler)\n                .and()\n                .sessionManagement()\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\n                .authorizeRequests()\n                .requestMatchers(&quot;/user/login&quot;)\n                .permitAll()\n                .requestMatchers(&quot;/user/signup&quot;)\n                .permitAll()\n                .requestMatchers(&quot;/user/forgotPassword&quot;)\n                .permitAll()\n                .anyRequest()\n                .authenticated();\n\n\n\n      http.addFilterBefore(jwtFilter, UsernamePasswordAuthenticationFilter.class);\n\n      http.authenticationProvider(authenticationProvider());\n\n\n        return http.build();\n    }\n\n\n\n}\n</code></pre>\n<p>EDIT: Some information.</p>\n<ol>\n<li>SpringBoot main class in on the top.</li>\n<li>Tried to add:</li>\n</ol>\n<blockquote>\n<p>@SpringBootApplication(scanBasePackages=&quot;com.inn.cafe&quot;)</p>\n</blockquote>\n<p>Nothing changed.</p>\n<ol start=\"3\">\n<li>It isn't scanning my SecurityConfig class. I added a few log entries there, and nothing was shown when i started the app.</li>\n<li>Using @EnableGlobalMethodSecurity on the SecurityConfig class.</li>\n<li>I'm not using WebSecurityConfigureAdpter. I'm aware its deprecated.</li>\n</ol>\n"},{"tags":["java","visual-studio-code"],"comments":[{"owner":{"account_id":6363922,"reputation":5664,"user_id":6651840,"display_name":"Dean Van Greunen"},"score":0,"creation_date":1568046485,"post_id":57857855,"comment_id":102141922,"body_markdown":"whats your full app class name space? like `com.acme.example.ListAppuals`","body":"whats your full app class name space? like <code>com.acme.example.ListAppuals</code>"},{"owner":{"account_id":16009454,"reputation":719,"user_id":11554082,"display_name":"Dani"},"score":0,"creation_date":1568048006,"post_id":57857855,"comment_id":102142619,"body_markdown":"@DeanVanGreunen Where can I find the namespace?","body":"@DeanVanGreunen Where can I find the namespace?"},{"owner":{"account_id":12695174,"reputation":45207,"user_id":9223839,"display_name":"Joakim Danielson"},"score":0,"creation_date":1568049557,"post_id":57857855,"comment_id":102143245,"body_markdown":"Where did you get that run button in the upper right corner, it&#39;s not part of the standard Visual Studio Code as far as I can see? Some extension you installed? Since standard &#39;Run&#39; works maybe you should just ignore that button?","body":"Where did you get that run button in the upper right corner, it&#39;s not part of the standard Visual Studio Code as far as I can see? Some extension you installed? Since standard &#39;Run&#39; works maybe you should just ignore that button?"},{"owner":{"account_id":1289016,"reputation":697,"user_id":1781376,"accept_rate":88,"display_name":"GuiRitter"},"score":0,"creation_date":1642098591,"post_id":57857855,"comment_id":124987875,"body_markdown":"Seems to not be your case, but I had the same problem because of special characters in the source&#39;s path.","body":"Seems to not be your case, but I had the same problem because of special characters in the source&#39;s path."}],"answers":[{"comments":[{"owner":{"account_id":16009454,"reputation":719,"user_id":11554082,"display_name":"Dani"},"score":0,"creation_date":1568048603,"post_id":57857973,"comment_id":102142858,"body_markdown":"I added the .classpath file. What do I need to change in it?","body":"I added the .classpath file. What do I need to change in it?"}],"tags":[],"owner":{"account_id":16138853,"reputation":11,"user_id":11650595,"display_name":"SenorC4"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1568046866,"creation_date":1568046866,"answer_id":57857973,"question_id":57857855,"body_markdown":"Try editing your .classpath file to show it where your main class is.\r\n\r\nAn easier, but much more jank method, is to move your .java file to the root of your project directory to help vscode find it.","title":"Could not find or load main class - VS Code","body":"<p>Try editing your .classpath file to show it where your main class is.</p>\n\n<p>An easier, but much more jank method, is to move your .java file to the root of your project directory to help vscode find it.</p>\n"},{"comments":[{"owner":{"account_id":16009454,"reputation":719,"user_id":11554082,"display_name":"Dani"},"score":0,"creation_date":1568129722,"post_id":57863396,"comment_id":102173014,"body_markdown":"Yes, I installed **Code Runner**, In order to run C programs.","body":"Yes, I installed <b>Code Runner</b>, In order to run C programs."},{"owner":{"account_id":14914321,"reputation":15846,"user_id":10768653,"display_name":"Leo Zhu"},"score":1,"creation_date":1568179746,"post_id":57863396,"comment_id":102188000,"body_markdown":"I also encountered the same issue with CodeRunner, that seems to be the package name（app） of your class if you configure it in the `setting.json` file like `&quot;java&quot;:&quot;cd $dir &amp;&amp; javac -d . $fileName  &amp;&amp; java app.$fileNameWithoutExt&quot;`,it would work","body":"I also encountered the same issue with CodeRunner, that seems to be the package name（app） of your class if you configure it in the <code>setting.json</code> file like <code>&quot;java&quot;:&quot;cd $dir &amp;&amp; javac -d . $fileName  &amp;&amp; java app.$fileNameWithoutExt&quot;</code>,it would work"},{"owner":{"account_id":14694030,"reputation":925,"user_id":10611878,"display_name":"Pulsara Sandeepa"},"score":0,"creation_date":1599331826,"post_id":57863396,"comment_id":112744691,"body_markdown":"Code Runner is the problem I think, Your answer worked for me.","body":"Code Runner is the problem I think, Your answer worked for me."}],"tags":[],"owner":{"account_id":14914321,"reputation":15846,"user_id":10768653,"display_name":"Leo Zhu"},"comment_count":3,"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1568083677,"creation_date":1568083677,"answer_id":57863396,"question_id":57857855,"body_markdown":"i think you install the **Code Runner** Extension,so you have a `Run` icon in the upper right-hand corner，you could try to uninstall it,\r\n\r\nthen **F1 -&gt;Clean the java language server workspace.**,run your code with `F5` or the `Run` above your `Main` method","title":"Could not find or load main class - VS Code","body":"<p>i think you install the <strong>Code Runner</strong> Extension,so you have a <code>Run</code> icon in the upper right-hand corner，you could try to uninstall it,</p>\n\n<p>then <strong>F1 ->Clean the java language server workspace.</strong>,run your code with <code>F5</code> or the <code>Run</code> above your <code>Main</code> method</p>\n"},{"comments":[{"owner":{"account_id":3370948,"reputation":4617,"user_id":2830167,"accept_rate":100,"display_name":"ZhaoGang"},"score":15,"creation_date":1617173259,"post_id":58370823,"comment_id":118226535,"body_markdown":"upvote for  `F1 -&gt;Clean the java language server workspace`.","body":"upvote for  <code>F1 -&gt;Clean the java language server workspace</code>."},{"owner":{"account_id":171978,"reputation":1460,"user_id":399723,"accept_rate":25,"display_name":"Douglas Held"},"score":0,"creation_date":1661803395,"post_id":58370823,"comment_id":129854102,"body_markdown":"I don&#39;t know if this will help anybody, but I had this problem because my class with the main method didn&#39;t have the .java file extension. Renaming the file allowed the compiler to start working. This was misleading because the file was detected and a maroon &quot;J&quot; icon decorated the file in the project listing pane.","body":"I don&#39;t know if this will help anybody, but I had this problem because my class with the main method didn&#39;t have the .java file extension. Renaming the file allowed the compiler to start working. This was misleading because the file was detected and a maroon &quot;J&quot; icon decorated the file in the project listing pane."}],"tags":[],"owner":{"account_id":323866,"reputation":986,"user_id":5361649,"display_name":"jinbo wang"},"comment_count":2,"down_vote_count":0,"up_vote_count":89,"is_accepted":false,"score":89,"last_activity_date":1571036198,"creation_date":1571032718,"answer_id":58370823,"question_id":57857855,"body_markdown":"This is a known issue https://github.com/microsoft/vscode-java-debug/issues/606, https://github.com/eclipse/eclipse.jdt.ls/issues/1137, which caused the new package not recognized during building workspace. It&#39;s expected to be fixed in vscode-java Middle October release.\r\n\r\nCurrent workaround is **reload VS Code window**, or **F1 -&gt;Clean the java language server workspace**.","title":"Could not find or load main class - VS Code","body":"<p>This is a known issue <a href=\"https://github.com/microsoft/vscode-java-debug/issues/606\" rel=\"noreferrer\">https://github.com/microsoft/vscode-java-debug/issues/606</a>, <a href=\"https://github.com/eclipse/eclipse.jdt.ls/issues/1137\" rel=\"noreferrer\">https://github.com/eclipse/eclipse.jdt.ls/issues/1137</a>, which caused the new package not recognized during building workspace. It's expected to be fixed in vscode-java Middle October release.</p>\n\n<p>Current workaround is <strong>reload VS Code window</strong>, or <strong>F1 ->Clean the java language server workspace</strong>.</p>\n"},{"tags":[],"owner":{"account_id":8112068,"reputation":594,"user_id":6111835,"display_name":"Cortex"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1619027931,"creation_date":1619027931,"answer_id":67201181,"question_id":57857855,"body_markdown":"If none of the solutions worked, **simply re-build your project to generate updated `.class`** file for the class that contains the main method.\r\n\r\nBasically, this error means that Java compiler was unable to find the proper `.class` file, and your source `.java` has a main method that wasn&#39;t added to the compiled `.class` yet.\r\n\r\nThis can be the case mainly for Maven projects.\r\n","title":"Could not find or load main class - VS Code","body":"<p>If none of the solutions worked, <strong>simply re-build your project to generate updated <code>.class</code></strong> file for the class that contains the main method.</p>\n<p>Basically, this error means that Java compiler was unable to find the proper <code>.class</code> file, and your source <code>.java</code> has a main method that wasn't added to the compiled <code>.class</code> yet.</p>\n<p>This can be the case mainly for Maven projects.</p>\n"},{"tags":[],"owner":{"account_id":13881837,"reputation":11,"user_id":10022023,"display_name":"J.Correa"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1625524966,"creation_date":1625524966,"answer_id":68262737,"question_id":57857855,"body_markdown":"Hey there was still having the same issue. My solution was to compile the code from the command line. This made the .class file for me, and then I was able to run my code. Probably better solutions out there but that&#39;s what I did","title":"Could not find or load main class - VS Code","body":"<p>Hey there was still having the same issue. My solution was to compile the code from the command line. This made the .class file for me, and then I was able to run my code. Probably better solutions out there but that's what I did</p>\n"},{"tags":[],"owner":{"account_id":17656870,"reputation":1,"user_id":12816257,"display_name":"Subtlecobra"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1626795343,"creation_date":1626795343,"answer_id":68457648,"question_id":57857855,"body_markdown":"I think this is because there isn&#39;t a &#39;Main&#39; Class, and the compiler is looking for that specific class, might be an issue with the project manager naming the class App instead of &#39;Main&#39;, a quick fix ***might*** be to name the Class &#39;Main&#39; and see if that works instead.","title":"Could not find or load main class - VS Code","body":"<p>I think this is because there isn't a 'Main' Class, and the compiler is looking for that specific class, might be an issue with the project manager naming the class App instead of 'Main', a quick fix <em><strong>might</strong></em> be to name the Class 'Main' and see if that works instead.</p>\n"},{"tags":[],"owner":{"account_id":170657,"reputation":14413,"user_id":397524,"accept_rate":89,"display_name":"Display Name"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1627071327,"creation_date":1627071327,"answer_id":68504630,"question_id":57857855,"body_markdown":"Pressing `ctrl+f5` solves the problem.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nTerminal output:\r\n\r\n    PS F:\\Testing&gt;  &amp; &#39;c:\\Users\\xyz\\.vscode\\extensions\\vscjava.vscode-java-debug-0.34.0\\scripts\\launcher.bat&#39; &#39;C:\\jdk-18\\bin\\java.exe&#39; &#39;-XX:+ShowCodeDetailsInExceptionMessages&#39; &#39;-Dfile.encoding=UTF-8&#39; &#39;-cp&#39; &#39;C:\\Users\\xyz\\AppData\\Roaming\\Code\\User\\workspaceStorage\\1edb6264f8da6da9dda20a68800df89b\\redhat.java\\jdt_ws\\Testing_e004a758\\bin&#39; &#39;mypackage.Foo&#39;\r\n    hello\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/HswPs.png","title":"Could not find or load main class - VS Code","body":"<p>Pressing <code>ctrl+f5</code> solves the problem.</p>\n<p><a href=\"https://i.stack.imgur.com/HswPs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HswPs.png\" alt=\"enter image description here\" /></a></p>\n<p>Terminal output:</p>\n<pre><code>PS F:\\Testing&gt;  &amp; 'c:\\Users\\xyz\\.vscode\\extensions\\vscjava.vscode-java-debug-0.34.0\\scripts\\launcher.bat' 'C:\\jdk-18\\bin\\java.exe' '-XX:+ShowCodeDetailsInExceptionMessages' '-Dfile.encoding=UTF-8' '-cp' 'C:\\Users\\xyz\\AppData\\Roaming\\Code\\User\\workspaceStorage\\1edb6264f8da6da9dda20a68800df89b\\redhat.java\\jdt_ws\\Testing_e004a758\\bin' 'mypackage.Foo'\nhello\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18779282,"reputation":31,"user_id":13694304,"display_name":"Naufil"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1627170557,"creation_date":1627154175,"answer_id":68513106,"question_id":57857855,"body_markdown":"Install `java` extension package and try running it by `CTRL` + `F5`. Works well by the time it gets fixed.","title":"Could not find or load main class - VS Code","body":"<p>Install <code>java</code> extension package and try running it by <code>CTRL</code> + <code>F5</code>. Works well by the time it gets fixed.</p>\n"},{"comments":[{"owner":{"account_id":1484420,"reputation":1237,"user_id":3423750,"accept_rate":76,"display_name":"Phalgun"},"score":1,"creation_date":1630861358,"post_id":69064854,"comment_id":122065056,"body_markdown":"This does not explain what the problem is and why the answer would solve the problem.","body":"This does not explain what the problem is and why the answer would solve the problem."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1630861394,"post_id":69064854,"comment_id":122065065,"body_markdown":"Please provide additional details in your answer. As it&#39;s currently written, it&#39;s hard to understand your solution.","body":"Please provide additional details in your answer. As it&#39;s currently written, it&#39;s hard to understand your solution."}],"tags":[],"owner":{"account_id":22663459,"reputation":1,"user_id":16836198,"display_name":"Nguy&#234;n"},"comment_count":2,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1630856539,"creation_date":1630856539,"answer_id":69064854,"question_id":57857855,"body_markdown":"try deleting the .vscode folder and run it again\r\n","title":"Could not find or load main class - VS Code","body":"<p>try deleting the .vscode folder and run it again</p>\n"},{"tags":[],"owner":{"account_id":22668154,"reputation":121,"user_id":16840210,"display_name":"deateaterOG"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633067943,"creation_date":1632820615,"answer_id":69358970,"question_id":57857855,"body_markdown":"The same happened for me but it was easy fix,\r\nCheck the launch.json if the class name is correct\r\n\r\nSince I changed the group of my class.\r\n\r\nCheck wheter your launch.json file data is correct.\r\nSince sometimes launch.json does not auto-update.\r\n\r\nHope it helps.","title":"Could not find or load main class - VS Code","body":"<p>The same happened for me but it was easy fix,\nCheck the launch.json if the class name is correct</p>\n<p>Since I changed the group of my class.</p>\n<p>Check wheter your launch.json file data is correct.\nSince sometimes launch.json does not auto-update.</p>\n<p>Hope it helps.</p>\n"},{"tags":[],"owner":{"account_id":10229352,"reputation":172,"user_id":7550716,"display_name":"David Wei"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634871111,"creation_date":1634870782,"answer_id":69670841,"question_id":57857855,"body_markdown":"In my case, I added the `launch.json` in the project, and modified the default configs from ${file} like this:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/54GOi.png\r\n\r\nthen I started debugging and it worked as usual.","title":"Could not find or load main class - VS Code","body":"<p>In my case, I added the <code>launch.json</code> in the project, and modified the default configs from ${file} like this:\n<a href=\"https://i.stack.imgur.com/54GOi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/54GOi.png\" alt=\"enter image description here\" /></a></p>\n<p>then I started debugging and it worked as usual.</p>\n"},{"tags":[],"owner":{"account_id":24504525,"reputation":1,"user_id":18419718,"display_name":"Shivakrishna Talla"},"comment_count":0,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1646845925,"creation_date":1646835564,"answer_id":71410823,"question_id":57857855,"body_markdown":"Create a file `settings.json` inside the `.vscode` folder of your application and add below configuration.\r\n\r\n```\r\n&quot;java.configuration.updateBuildConfiguration&quot;: &quot;automatic&quot;\r\n```","title":"Could not find or load main class - VS Code","body":"<p>Create a file <code>settings.json</code> inside the <code>.vscode</code> folder of your application and add below configuration.</p>\n<pre><code>&quot;java.configuration.updateBuildConfiguration&quot;: &quot;automatic&quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9203666,"reputation":343,"user_id":6854444,"display_name":"Bojie Shuai"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1652639025,"creation_date":1652639025,"answer_id":72251087,"question_id":57857855,"body_markdown":"If none of the above works for you, check your folder/file name. See if there is any non-English naming.\r\n\r\nMy issue was I can compile and run the program with no problem in terminal, but got the error when running in VScode. Solve the problem by renaming my file path from `/Documents/算法/App.java` to `/Documents/Algo/App.java`","title":"Could not find or load main class - VS Code","body":"<p>If none of the above works for you, check your folder/file name. See if there is any non-English naming.</p>\n<p>My issue was I can compile and run the program with no problem in terminal, but got the error when running in VScode. Solve the problem by renaming my file path from <code>/Documents/算法/App.java</code> to <code>/Documents/Algo/App.java</code></p>\n"},{"tags":[],"owner":{"account_id":14228563,"reputation":702,"user_id":10278427,"display_name":"Pouria Moosavi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667668977,"creation_date":1667668977,"answer_id":74329934,"question_id":57857855,"body_markdown":"For me the problem was that the project&#39;s folder name had some Persian/Arabic characters in it. After I renamed the folder, everything started to working.  ","title":"Could not find or load main class - VS Code","body":"<p>For me the problem was that the project's folder name had some Persian/Arabic characters in it. After I renamed the folder, everything started to working.</p>\n"},{"tags":[],"owner":{"account_id":4206618,"reputation":808,"user_id":4180447,"accept_rate":47,"display_name":"tarekahf"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669653393,"creation_date":1669653393,"answer_id":74603747,"question_id":57857855,"body_markdown":"In my case, I get the same error when I am debugging a multi-module maven project. It seems that the `classpath` is not set automatically or not set correctly when you try t debug without using a launch config. You need to define a `lunch` request in the `launch.json` file and set the `classpath` to point to the correct `jar` files. You must build the project using `mvn install` to generate the required jar files for the project which are defined in `pom.xml&#39; for all modules. I tried to set the classpath to point to the generated `*.class` binary files but it didn&#39;t work I think because I need to specify each and everyone which wasn&#39;t possible.\r\n\r\nTo ensure you are using the correct config, first, find out the command line details using `java.exe` which is required to run your application, and then configure this command using the `launch.json` file.\r\n\r\nAlso, configure the `console` of the `debug` session to be the `integrated terminal`  and lunch the debug with or without the `launch.json&#39; file. Then start the debug and watch out for the generated commands and you can find what is wrong by analyzing the commands used to launch the application.\r\n\r\n\r\nBelow is an example of a config item in `launch.json&#39; file:\r\n\r\n```\r\n        {\r\n            &quot;name&quot;: &quot;Java&quot;,\r\n            &quot;type&quot;: &quot;java&quot;,\r\n            &quot;request&quot;: &quot;launch&quot;,\r\n            &quot;classPaths&quot;: [\r\n                &quot;${workspaceFolder}/&quot;,\r\n                &quot;${workspaceFolder}/path/to/jar&quot;,\r\n                &quot;${workspaceFolder}/path/to/jar&quot;,\r\n                ...\r\n            ],\r\n            &quot;mainClass&quot;: &quot;com.startup.class.name&quot;,\r\n            &quot;projectName&quot;: &quot;project name&quot;,\r\n            &quot;vmArgs&quot;: [\r\n                &quot;-Xms64m -Xmx950m&quot;\r\n            ],\r\n\r\n        }\r\n```","title":"Could not find or load main class - VS Code","body":"<p>In my case, I get the same error when I am debugging a multi-module maven project. It seems that the <code>classpath</code> is not set automatically or not set correctly when you try t debug without using a launch config. You need to define a <code>lunch</code> request in the <code>launch.json</code> file and set the <code>classpath</code> to point to the correct <code>jar</code> files. You must build the project using <code>mvn install</code> to generate the required jar files for the project which are defined in <code>pom.xml' for all modules. I tried to set the classpath to point to the generated </code>*.class` binary files but it didn't work I think because I need to specify each and everyone which wasn't possible.</p>\n<p>To ensure you are using the correct config, first, find out the command line details using <code>java.exe</code> which is required to run your application, and then configure this command using the <code>launch.json</code> file.</p>\n<p>Also, configure the <code>console</code> of the <code>debug</code> session to be the <code>integrated terminal</code>  and lunch the debug with or without the `launch.json' file. Then start the debug and watch out for the generated commands and you can find what is wrong by analyzing the commands used to launch the application.</p>\n<p>Below is an example of a config item in `launch.json' file:</p>\n<pre><code>        {\n            &quot;name&quot;: &quot;Java&quot;,\n            &quot;type&quot;: &quot;java&quot;,\n            &quot;request&quot;: &quot;launch&quot;,\n            &quot;classPaths&quot;: [\n                &quot;${workspaceFolder}/&quot;,\n                &quot;${workspaceFolder}/path/to/jar&quot;,\n                &quot;${workspaceFolder}/path/to/jar&quot;,\n                ...\n            ],\n            &quot;mainClass&quot;: &quot;com.startup.class.name&quot;,\n            &quot;projectName&quot;: &quot;project name&quot;,\n            &quot;vmArgs&quot;: [\n                &quot;-Xms64m -Xmx950m&quot;\n            ],\n\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28870034,"reputation":1,"user_id":22111779,"display_name":"vijay"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687399072,"creation_date":1687399072,"answer_id":76528165,"question_id":57857855,"body_markdown":"For me it is resolved by ensuring the installed jdk on my machine matches with the java.version in the pom.xml.\r\n\r\n    &lt;properties&gt;\r\n        &lt;java.version&gt;20.0.1&lt;/java.version&gt;\r\n    &lt;/properties&gt;","title":"Could not find or load main class - VS Code","body":"<p>For me it is resolved by ensuring the installed jdk on my machine matches with the java.version in the pom.xml.</p>\n<pre><code>&lt;properties&gt;\n    &lt;java.version&gt;20.0.1&lt;/java.version&gt;\n&lt;/properties&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24668,"reputation":5578,"user_id":62889,"accept_rate":91,"display_name":"Sachin Chavan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690960543,"creation_date":1690960543,"answer_id":76817436,"question_id":57857855,"body_markdown":"Faced same issue on VSCode on macOS.\r\n\r\nRenaming the extension to all small resolved my issue.\r\n\r\nFileName.***J***ava to FileName.***j***ava","title":"Could not find or load main class - VS Code","body":"<p>Faced same issue on VSCode on macOS.</p>\n<p>Renaming the extension to all small resolved my issue.</p>\n<p>FileName.<em><strong>J</strong></em>ava to FileName.<em><strong>j</strong></em>ava</p>\n"},{"tags":[],"owner":{"account_id":23880231,"reputation":1,"user_id":17881012,"display_name":"Shivam771"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691681213,"creation_date":1691681213,"answer_id":76877199,"question_id":57857855,"body_markdown":"Check if you haven&#39;t made your **main() method static**. The &quot;*Static*&quot; key word says that the method belongs to this class itself. If you haven&#39;t made you main() *static* then it will be confused between all classes of the same program/directory/workspace, especially in vscode editor workspace.\r\nif it still doesn&#39;t works, relode vs code window or clean your workspace by pressing **f1** followed by typing **clean java language server workspace.**","title":"Could not find or load main class - VS Code","body":"<p>Check if you haven't made your <strong>main() method static</strong>. The &quot;<em>Static</em>&quot; key word says that the method belongs to this class itself. If you haven't made you main() <em>static</em> then it will be confused between all classes of the same program/directory/workspace, especially in vscode editor workspace.\nif it still doesn't works, relode vs code window or clean your workspace by pressing <strong>f1</strong> followed by typing <strong>clean java language server workspace.</strong></p>\n"}],"owner":{"account_id":16009454,"reputation":719,"user_id":11554082,"display_name":"Dani"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":128481,"favorite_count":0,"down_vote_count":1,"up_vote_count":34,"answer_count":18,"score":33,"last_activity_date":1691681213,"creation_date":1568046345,"question_id":57857855,"body_markdown":"I created a new java project (with the option `Create Java Project`), and \r\nWhen I click the run button (marked with the red circle), it gives me the error `Could not find or load main class`.\r\n\r\nWhen I run the program from the `run` option above the `main`(marked with the green circle), it works and doesn&#39;t show me the error.\r\n\r\nHow can I fix it?\r\n\r\n[![The project][1]][1]\r\n\r\nThis is the `.classpath` file:\r\n\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;classpath&gt;\r\n\t    &lt;classpathentry kind=&quot;con&quot; path=&quot;org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/JavaSE-1.8&quot;/&gt;\r\n\t    &lt;classpathentry kind=&quot;src&quot; path=&quot;src&quot;/&gt;\r\n\t    &lt;classpathentry kind=&quot;output&quot; path=&quot;bin&quot;/&gt;\r\n    &lt;/classpath&gt;\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/9qZwE.png","title":"Could not find or load main class - VS Code","body":"<p>I created a new java project (with the option <code>Create Java Project</code>), and \nWhen I click the run button (marked with the red circle), it gives me the error <code>Could not find or load main class</code>.</p>\n\n<p>When I run the program from the <code>run</code> option above the <code>main</code>(marked with the green circle), it works and doesn't show me the error.</p>\n\n<p>How can I fix it?</p>\n\n<p><a href=\"https://i.stack.imgur.com/9qZwE.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/9qZwE.png\" alt=\"The project\"></a></p>\n\n<p>This is the <code>.classpath</code> file:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;classpath&gt;\n    &lt;classpathentry kind=\"con\" path=\"org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/JavaSE-1.8\"/&gt;\n    &lt;classpathentry kind=\"src\" path=\"src\"/&gt;\n    &lt;classpathentry kind=\"output\" path=\"bin\"/&gt;\n&lt;/classpath&gt;\n</code></pre>\n"},{"tags":["java","gradle"],"owner":{"account_id":1923350,"reputation":11,"user_id":1734330,"display_name":"kateryna"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691681200,"creation_date":1691680276,"question_id":76877079,"body_markdown":"We use gradle 7.6.2 and jdk 17\r\nThere is following build.gradle.kts\r\n\r\n```\r\ndependencies {\r\n\r\n    implementation(group = &quot;jakarta.xml.ws&quot;, name = &quot;jakarta.xml.ws-api&quot;, version = jaxwsToolsVersion)\r\n    implementation(group = &quot;jakarta.xml.bind&quot;, name = &quot;jakarta.xml.bind-api&quot;, version = jaxwsToolsVersion)\r\n    compileOnly(group = &quot;jakarta.jws&quot;, name = &quot;jakarta.jws-api&quot;, version = &quot;3.0.0&quot;)\r\n\r\n    ...\r\n}\r\n\r\n\r\nwsdl2java {\r\n    groups {\r\n        register(&quot;wsdl1&quot;) {\r\n            wsdlDir.set(layout.projectDirectory.dir(&quot;$projectDir/src/main/resources/wsdls&quot;))\r\n            includes.set(listOf(&quot;MessageService.wsdl&quot;))\r\n            packageName.set(&quot;com.service.mom&quot;)\r\n            generatedSourceDir.set(layout.projectDirectory.dir(&quot;$buildDir/generated/wsdl1/src/main/java&quot;))\r\n        }\r\n        register(&quot;wsld2&quot;) {\r\n            wsdlDir.set(layout.projectDirectory.dir(&quot;$projectDir/src/main/resources/wsdls&quot;))\r\n            includes.set(listOf(&quot;SREngine.wsdl&quot;))\r\n            packageName.set(&quot;com.service.rpt.engine&quot;)\r\n            generatedSourceDir.set(layout.projectDirectory.dir(&quot;$buildDir/generated/wsdl2/src/main/java&quot;));\r\n        }\r\n      \r\n    }\r\n}\r\n\r\nval generated: SourceSet by sourceSets.creating {\r\n    java.srcDir(&quot;$buildDir/generated/wsdl1/src/main/java&quot;)\r\n    java.srcDir(&quot;$buildDir/generated/wsdl2/src/main/java&quot;)\r\n}\r\n\r\nsourceSets.main.configure {\r\n    java.srcDir(&quot;$buildDir/generated/wsdl1/src/main/java&quot;)\r\n    java.srcDir(&quot;$buildDir/generated/wsdl2/src/main/java&quot;)\r\n\r\n    compileClasspath += generated.output\r\n    runtimeClasspath += generated.output\r\n}\r\n\r\ntasks.compileJava {\r\n    dependsOn(&quot;wsdl2java&quot;)\r\n}\r\n```\r\nBuild fails with following error:\r\n&gt; Task :server:compileGeneratedJava FAILED\r\nC:\\work\\sandbox\\web\\server\\build\\generated\\wsdl1\\src\\main\\java\\com\\service\\mom\\Acknowledge.java:4: error: package jakarta.xml.bind.annotation does not exist\r\nimport jakarta.xml.bind.annotation.XmlAccessType;\r\n\r\n\r\n\r\nI suppose that dependencies not available in generate classes compilation task\r\nHow to configure generate sources classpath?","title":"gradle kts compileGeneratedJava FAILED","body":"<p>We use gradle 7.6.2 and jdk 17\nThere is following build.gradle.kts</p>\n<pre><code>dependencies {\n\n    implementation(group = &quot;jakarta.xml.ws&quot;, name = &quot;jakarta.xml.ws-api&quot;, version = jaxwsToolsVersion)\n    implementation(group = &quot;jakarta.xml.bind&quot;, name = &quot;jakarta.xml.bind-api&quot;, version = jaxwsToolsVersion)\n    compileOnly(group = &quot;jakarta.jws&quot;, name = &quot;jakarta.jws-api&quot;, version = &quot;3.0.0&quot;)\n\n    ...\n}\n\n\nwsdl2java {\n    groups {\n        register(&quot;wsdl1&quot;) {\n            wsdlDir.set(layout.projectDirectory.dir(&quot;$projectDir/src/main/resources/wsdls&quot;))\n            includes.set(listOf(&quot;MessageService.wsdl&quot;))\n            packageName.set(&quot;com.service.mom&quot;)\n            generatedSourceDir.set(layout.projectDirectory.dir(&quot;$buildDir/generated/wsdl1/src/main/java&quot;))\n        }\n        register(&quot;wsld2&quot;) {\n            wsdlDir.set(layout.projectDirectory.dir(&quot;$projectDir/src/main/resources/wsdls&quot;))\n            includes.set(listOf(&quot;SREngine.wsdl&quot;))\n            packageName.set(&quot;com.service.rpt.engine&quot;)\n            generatedSourceDir.set(layout.projectDirectory.dir(&quot;$buildDir/generated/wsdl2/src/main/java&quot;));\n        }\n      \n    }\n}\n\nval generated: SourceSet by sourceSets.creating {\n    java.srcDir(&quot;$buildDir/generated/wsdl1/src/main/java&quot;)\n    java.srcDir(&quot;$buildDir/generated/wsdl2/src/main/java&quot;)\n}\n\nsourceSets.main.configure {\n    java.srcDir(&quot;$buildDir/generated/wsdl1/src/main/java&quot;)\n    java.srcDir(&quot;$buildDir/generated/wsdl2/src/main/java&quot;)\n\n    compileClasspath += generated.output\n    runtimeClasspath += generated.output\n}\n\ntasks.compileJava {\n    dependsOn(&quot;wsdl2java&quot;)\n}\n</code></pre>\n<p>Build fails with following error:</p>\n<blockquote>\n<p>Task :server:compileGeneratedJava FAILED\nC:\\work\\sandbox\\web\\server\\build\\generated\\wsdl1\\src\\main\\java\\com\\service\\mom\\Acknowledge.java:4: error: package jakarta.xml.bind.annotation does not exist\nimport jakarta.xml.bind.annotation.XmlAccessType;</p>\n</blockquote>\n<p>I suppose that dependencies not available in generate classes compilation task\nHow to configure generate sources classpath?</p>\n"},{"tags":["java","servlets","servlet-filters"],"answers":[{"tags":[],"owner":{"account_id":26588,"reputation":11301,"user_id":69340,"accept_rate":78,"display_name":"Suresh Kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":32,"is_accepted":true,"score":32,"last_activity_date":1691679905,"creation_date":1315306999,"answer_id":7318845,"question_id":7318632,"body_markdown":"Looks like the restlet framework has called `getRequestEntityStream()` on the Request object which in turn calls `getInputStream()`, so calling `getReader()` on the request throws `IllegalStateException`. The Servlet API documentation for `getReader()` and `getInputStream()` says:\r\n\r\n   \r\n\r\n     public java.io.BufferedReader getReader()\r\n        ...\r\n        ...\r\n    Throws:\r\n        java.lang.IllegalStateException - if getInputStream() method has been called on this request\r\n\r\n     public ServletInputStream getInputStream()\r\n        ...\r\n        ...\r\n        Throws:\r\n        java.lang.IllegalStateException - if the getReader() method has already been called for this request\r\n\r\n\r\nFrom the documentation, it seems that we cannot call both `getReader()` and `getInputStream()` on the Request object. I suggest you use `getInputStream()` rather than `getReader()` in your wrapper.","title":"java.lang.IllegalStateException: getReader() has already been called for this request","body":"<p>Looks like the restlet framework has called <code>getRequestEntityStream()</code> on the Request object which in turn calls <code>getInputStream()</code>, so calling <code>getReader()</code> on the request throws <code>IllegalStateException</code>. The Servlet API documentation for <code>getReader()</code> and <code>getInputStream()</code> says:</p>\n<pre><code> public java.io.BufferedReader getReader()\n    ...\n    ...\nThrows:\n    java.lang.IllegalStateException - if getInputStream() method has been called on this request\n\n public ServletInputStream getInputStream()\n    ...\n    ...\n    Throws:\n    java.lang.IllegalStateException - if the getReader() method has already been called for this request\n</code></pre>\n<p>From the documentation, it seems that we cannot call both <code>getReader()</code> and <code>getInputStream()</code> on the Request object. I suggest you use <code>getInputStream()</code> rather than <code>getReader()</code> in your wrapper.</p>\n"},{"tags":[],"owner":{"account_id":54119,"reputation":5756,"user_id":161895,"display_name":"Kennet"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1315307051,"creation_date":1315307051,"answer_id":7318855,"question_id":7318632,"body_markdown":"The main problem is that you can&#39;t read the input both as binary stream and character stream, not even if the one is called in a filter and the other in the servlet. \r\n\r\n","title":"java.lang.IllegalStateException: getReader() has already been called for this request","body":"<p>The main problem is that you can't read the input both as binary stream and character stream, not even if the one is called in a filter and the other in the servlet. </p>\n"},{"tags":[],"owner":{"account_id":933262,"reputation":7628,"user_id":962696,"accept_rate":67,"display_name":"JonnyRaa"},"comment_count":0,"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1406812220,"creation_date":1406812220,"answer_id":25059731,"question_id":7318632,"body_markdown":"As far as I can tell servlets are fundamentally broken in this regard.  You can try and work around this problem as outlined [here](http://natch3z.blogspot.co.uk/2009/01/read-request-body-in-filter.html) but that causes other mysterious problems when other things try and work with it.\r\n\r\nEffectively he suggests cloning the request, reading the body and then in the the cloned class overriding the getReader and getInputStream methods to return the stuff already retrieved.\r\n\r\nThe code I ended up with was this:\r\n\r\n    import javax.servlet.ServletInputStream;\r\n    import javax.servlet.http.HttpServletRequest;\r\n    import javax.servlet.http.HttpServletRequestWrapper;\r\n    import java.io.*;\r\n    \r\n    //this class stops reading the request payload twice causing an exception\r\n    public class WrappedRequest extends HttpServletRequestWrapper\r\n    {\r\n        private String _body;\r\n        private HttpServletRequest _request;\r\n    \r\n        public WrappedRequest(HttpServletRequest request) throws IOException\r\n        {\r\n            super(request);\r\n            _request = request;\r\n    \r\n            _body = &quot;&quot;;\r\n            try (BufferedReader bufferedReader = request.getReader())\r\n            {\r\n                String line;\r\n                while ((line = bufferedReader.readLine()) != null)\r\n                    _body += line;\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public ServletInputStream getInputStream() throws IOException\r\n        {\r\n            final ByteArrayInputStream byteArrayInputStream = new ByteArrayInputStream(_body.getBytes());\r\n            return new ServletInputStream()\r\n            {\r\n                public int read() throws IOException\r\n                {\r\n                    return byteArrayInputStream.read();\r\n                }\r\n            };\r\n        }\r\n    \r\n        @Override\r\n        public BufferedReader getReader() throws IOException\r\n        {\r\n            return new BufferedReader(new InputStreamReader(this.getInputStream()));\r\n        }\r\n    }\r\n\r\nAnyway this appeared to be working fine until we realised that uploading a file from the browser wasn&#39;t working.  I bisected through the changes and discovered this was the culprit.\r\n\r\nSome people in the comments in that article say you need to override methods to do with parameters but don&#39;t explain how to do this.  \r\n\r\nAs a result I checked to see if there was any difference in the two requests.  However after cloning the request it had identical sets of parameters (both original request + cloned had none) aswell as an identical set of headers.  \r\n\r\nHowever in some manner the request was being effected and screwing up the understanding of the request further down the line - in my case causing a bizaare error in a library (extdirectspring) where something was trying to read the contents as Json.  Taking out the code that read the body in the filter made it work again.\r\n\r\nMy calling code looked like this:\r\n\r\n    @Override\r\n    public void doFilter(ServletRequest request, ServletResponse response, FilterChain filterChain) throws IOException, ServletException\r\n    {\r\n        HttpServletRequest properRequest = ((HttpServletRequest)request);\r\n\r\n        String pathInfo = properRequest.getPathInfo();\r\n        String target = &quot;&quot;;\r\n        if(pathInfo == null)\r\n            pathInfo = &quot;&quot;;\r\n\r\n        if(pathInfo.equals(&quot;/router&quot;))\r\n        {\r\n            //note this is because servlet requests hate you!\r\n            //if you read their contents more than once then they throw an exception so we need to do some madness\r\n            //to make this not the case\r\n            WrappedRequest wrappedRequest = new WrappedRequest(properRequest);\r\n            target = ParseExtDirectTargetFrom(wrappedRequest);\r\n            request = wrappedRequest;\r\n        }\r\n\r\n        boolean callingSpecialResetMethod = pathInfo.equals(&quot;/resetErrorState&quot;) || target.equals(&quot;resetErrorState&quot;);\r\n        if(_errorHandler.IsRejectingRequests() &amp;&amp; !callingSpecialResetMethod)\r\n            return;\r\n\r\n        try {\r\n            filterChain.doFilter(request, response);\r\n        }\r\n        catch (Exception exception) {\r\n            ((HttpServletResponse) response).sendError(HttpServletResponse.SC_INTERNAL_SERVER_ERROR, &quot;ERROR&quot;);\r\n            _errorHandler.NotifyOf(exception);\r\n        }\r\n    }\r\n\r\nI&#39;ve ommitted the contents of `ParseExtDirectTargetFrom` but it calls getReader().\r\n\r\nIn my case the filter was working for all other requests but the strange behaviour in this case made me realise something wasn&#39;t quite right and what I was trying to do (implement sensible exception handling behaviour for tests) wasn&#39;t worth potentially breaking random future requests (as I couldn&#39;t figure out what had caused the request to become broken).\r\n\r\nAlso it&#39;s worth noting that the broken code is unavoidable - I assumed it might be something from spring but ServletRequest goes all the way up - thats all you get even if you were making a servlet from scratch by subclassing [HttpServlet](http://docs.oracle.com/javaee/1.4/api/javax/servlet/http/HttpServlet.html)\r\n\r\nMy recommendation would be this - **don&#39;t read the request body in a filter**.  You&#39;ll be opening up a can of worms that will cause strange problems later on.","title":"java.lang.IllegalStateException: getReader() has already been called for this request","body":"<p>As far as I can tell servlets are fundamentally broken in this regard.  You can try and work around this problem as outlined <a href=\"http://natch3z.blogspot.co.uk/2009/01/read-request-body-in-filter.html\" rel=\"noreferrer\">here</a> but that causes other mysterious problems when other things try and work with it.</p>\n\n<p>Effectively he suggests cloning the request, reading the body and then in the the cloned class overriding the getReader and getInputStream methods to return the stuff already retrieved.</p>\n\n<p>The code I ended up with was this:</p>\n\n<pre><code>import javax.servlet.ServletInputStream;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletRequestWrapper;\nimport java.io.*;\n\n//this class stops reading the request payload twice causing an exception\npublic class WrappedRequest extends HttpServletRequestWrapper\n{\n    private String _body;\n    private HttpServletRequest _request;\n\n    public WrappedRequest(HttpServletRequest request) throws IOException\n    {\n        super(request);\n        _request = request;\n\n        _body = \"\";\n        try (BufferedReader bufferedReader = request.getReader())\n        {\n            String line;\n            while ((line = bufferedReader.readLine()) != null)\n                _body += line;\n        }\n    }\n\n    @Override\n    public ServletInputStream getInputStream() throws IOException\n    {\n        final ByteArrayInputStream byteArrayInputStream = new ByteArrayInputStream(_body.getBytes());\n        return new ServletInputStream()\n        {\n            public int read() throws IOException\n            {\n                return byteArrayInputStream.read();\n            }\n        };\n    }\n\n    @Override\n    public BufferedReader getReader() throws IOException\n    {\n        return new BufferedReader(new InputStreamReader(this.getInputStream()));\n    }\n}\n</code></pre>\n\n<p>Anyway this appeared to be working fine until we realised that uploading a file from the browser wasn't working.  I bisected through the changes and discovered this was the culprit.</p>\n\n<p>Some people in the comments in that article say you need to override methods to do with parameters but don't explain how to do this.  </p>\n\n<p>As a result I checked to see if there was any difference in the two requests.  However after cloning the request it had identical sets of parameters (both original request + cloned had none) aswell as an identical set of headers.  </p>\n\n<p>However in some manner the request was being effected and screwing up the understanding of the request further down the line - in my case causing a bizaare error in a library (extdirectspring) where something was trying to read the contents as Json.  Taking out the code that read the body in the filter made it work again.</p>\n\n<p>My calling code looked like this:</p>\n\n<pre><code>@Override\npublic void doFilter(ServletRequest request, ServletResponse response, FilterChain filterChain) throws IOException, ServletException\n{\n    HttpServletRequest properRequest = ((HttpServletRequest)request);\n\n    String pathInfo = properRequest.getPathInfo();\n    String target = \"\";\n    if(pathInfo == null)\n        pathInfo = \"\";\n\n    if(pathInfo.equals(\"/router\"))\n    {\n        //note this is because servlet requests hate you!\n        //if you read their contents more than once then they throw an exception so we need to do some madness\n        //to make this not the case\n        WrappedRequest wrappedRequest = new WrappedRequest(properRequest);\n        target = ParseExtDirectTargetFrom(wrappedRequest);\n        request = wrappedRequest;\n    }\n\n    boolean callingSpecialResetMethod = pathInfo.equals(\"/resetErrorState\") || target.equals(\"resetErrorState\");\n    if(_errorHandler.IsRejectingRequests() &amp;&amp; !callingSpecialResetMethod)\n        return;\n\n    try {\n        filterChain.doFilter(request, response);\n    }\n    catch (Exception exception) {\n        ((HttpServletResponse) response).sendError(HttpServletResponse.SC_INTERNAL_SERVER_ERROR, \"ERROR\");\n        _errorHandler.NotifyOf(exception);\n    }\n}\n</code></pre>\n\n<p>I've ommitted the contents of <code>ParseExtDirectTargetFrom</code> but it calls getReader().</p>\n\n<p>In my case the filter was working for all other requests but the strange behaviour in this case made me realise something wasn't quite right and what I was trying to do (implement sensible exception handling behaviour for tests) wasn't worth potentially breaking random future requests (as I couldn't figure out what had caused the request to become broken).</p>\n\n<p>Also it's worth noting that the broken code is unavoidable - I assumed it might be something from spring but ServletRequest goes all the way up - thats all you get even if you were making a servlet from scratch by subclassing <a href=\"http://docs.oracle.com/javaee/1.4/api/javax/servlet/http/HttpServlet.html\" rel=\"noreferrer\">HttpServlet</a></p>\n\n<p>My recommendation would be this - <strong>don't read the request body in a filter</strong>.  You'll be opening up a can of worms that will cause strange problems later on.</p>\n"},{"tags":[],"owner":{"account_id":5163994,"reputation":2550,"user_id":4134683,"display_name":"Swarit Agarwal"},"comment_count":0,"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1691680075,"creation_date":1499073721,"answer_id":44881961,"question_id":7318632,"body_markdown":"Use `ContentCachingRequestWrapper` class. Wrapping `HttpServletRequest` in this will resolve the issue.\r\n\r\n**Sample** : if you want to convert your **&quot;HttpServletRequest servletRequest&quot;** you can do some thing like\r\n\r\n    import org.springframework.web.util.ContentCachingRequestWrapper;\r\n\r\n    ContentCachingRequestWrapper request = new ContentCachingRequestWrapper(servletRequest);\r\n\r\nHope it helps!!!","title":"java.lang.IllegalStateException: getReader() has already been called for this request","body":"<p>Use <code>ContentCachingRequestWrapper</code> class. Wrapping <code>HttpServletRequest</code> in this will resolve the issue.</p>\n<p><strong>Sample</strong> : if you want to convert your <strong>&quot;HttpServletRequest servletRequest&quot;</strong> you can do some thing like</p>\n<pre><code>import org.springframework.web.util.ContentCachingRequestWrapper;\n\nContentCachingRequestWrapper request = new ContentCachingRequestWrapper(servletRequest);\n</code></pre>\n<p>Hope it helps!!!</p>\n"},{"tags":[],"owner":{"account_id":11875387,"reputation":145,"user_id":8690573,"display_name":"Dagon"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691680964,"creation_date":1646413115,"answer_id":71354717,"question_id":7318632,"body_markdown":"Well, maybe this is something quite obvious, but I want to share with you this code that works OK for me. In a Spring Boot project with JWT, for the request of the client, was necessary to save all requests with their responses in a database table, and the same time authorize the access to consume the resources. Of course, I used `getReader()` for getting the  request body, but I was obtaining java.lang.IllegalStateException...\r\n\r\n    @Slf4j\r\n    @Component\r\n    @RequiredArgsConstructor\r\n    public class CustomAuthorizationFilter extends OncePerRequestFilter {\r\n\r\n    private final AuthorizationService authorizationService;\r\n    private String requestBody;     \r\n\r\n    @Override\r\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) {\r\n        HttpRequestDto requestDto = new HttpRequestDto();\r\n        try {\r\n            if (RequestMethod.POST.name().equalsIgnoreCase(request.getMethod()) &amp;&amp; requestBody != null) { //This line and validation is useful for me [requestBody != null]\r\n                requestBody = request.getReader().lines().collect(Collectors.joining(System.lineSeparator()));\r\n            }\r\n            //Do all JWT control\r\n            requestDto.setRequestURI(request.getRequestURI());\r\n            requestDto.setMethod(request.getMethod());\r\n            requestDto.setBody(requestBody);\r\n        }catch (IOException ie) {\r\n            responseError(_3001, response, ie);\r\n        } finally {\r\n            try {\r\n                ContentCachingResponseWrapper responseWrapper = new ContentCachingResponseWrapper(response);\r\n                filterChain.doFilter(request, responseWrapper);\r\n                saveResponse(responseWrapper, requestDto);\r\n            } catch (ServletException | IOException se) {\r\n                responseError(_3002, response, se);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    private void saveResponse(ContentCachingResponseWrapper responseWrapper, HttpRequestDto requestDto) {\r\n        try {\r\n            HttpResponseDto responseDto = new HttpResponseDto();\r\n            responseDto.setStatus(responseWrapper.getStatus());\r\n            byte[] responseArray = responseWrapper.getContentAsByteArray();\r\n            String responseBody = new String(responseArray, responseWrapper.getCharacterEncoding());\r\n            responseDto.setBody(responseBody);\r\n            responseWrapper.copyBodyToResponse();\r\n            authorizationService.seveInDatabase(requestDto, responseDto);            \r\n        } catch (Exception e) {\r\n            log.error(&quot;Error ServletException | IOException in CustomAuthorizationFilter.saveResponse&quot;, e);\r\n        }\r\n    }\r\n\r\n    private void responseError(LogCode code, HttpServletResponse response, Exception e) {\r\n        try {\r\n            Map&lt;String, Object&gt; error = new HashMap&lt;&gt;();\r\n            error.put(&quot;log&quot;, LogUtil.getLog(code));\r\n            error.put(&quot;message&quot;, e.getMessage());\r\n            response.setContentType(APPLICATION_JSON_VALUE);\r\n            new ObjectMapper().writeValue(response.getOutputStream(), error);\r\n            e.printStackTrace();\r\n        } catch (IOException ie) {\r\n            log.error(&quot;Error IOException in HttpLoggingFilter.responseError:&quot;, ie);\r\n        }\r\n    }\r\n\r\n\r\n    public String getRequestBody() {\r\n        return requestBody;\r\n    }\r\n\r\n    public void setRequestBody(String requestBody) {\r\n        this.requestBody = requestBody;\r\n    }\r\n\r\n    }\r\n\r\nSo my solution was use getter and setter methods of de local attribute requestBody, for validate if this is or not null and does not call again getReader() method because save in memory when set value. This worked perfect for me. Regards.","title":"java.lang.IllegalStateException: getReader() has already been called for this request","body":"<p>Well, maybe this is something quite obvious, but I want to share with you this code that works OK for me. In a Spring Boot project with JWT, for the request of the client, was necessary to save all requests with their responses in a database table, and the same time authorize the access to consume the resources. Of course, I used <code>getReader()</code> for getting the  request body, but I was obtaining java.lang.IllegalStateException...</p>\n<pre><code>@Slf4j\n@Component\n@RequiredArgsConstructor\npublic class CustomAuthorizationFilter extends OncePerRequestFilter {\n\nprivate final AuthorizationService authorizationService;\nprivate String requestBody;     \n\n@Override\nprotected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) {\n    HttpRequestDto requestDto = new HttpRequestDto();\n    try {\n        if (RequestMethod.POST.name().equalsIgnoreCase(request.getMethod()) &amp;&amp; requestBody != null) { //This line and validation is useful for me [requestBody != null]\n            requestBody = request.getReader().lines().collect(Collectors.joining(System.lineSeparator()));\n        }\n        //Do all JWT control\n        requestDto.setRequestURI(request.getRequestURI());\n        requestDto.setMethod(request.getMethod());\n        requestDto.setBody(requestBody);\n    }catch (IOException ie) {\n        responseError(_3001, response, ie);\n    } finally {\n        try {\n            ContentCachingResponseWrapper responseWrapper = new ContentCachingResponseWrapper(response);\n            filterChain.doFilter(request, responseWrapper);\n            saveResponse(responseWrapper, requestDto);\n        } catch (ServletException | IOException se) {\n            responseError(_3002, response, se);\n        }\n    }\n}\n\n\nprivate void saveResponse(ContentCachingResponseWrapper responseWrapper, HttpRequestDto requestDto) {\n    try {\n        HttpResponseDto responseDto = new HttpResponseDto();\n        responseDto.setStatus(responseWrapper.getStatus());\n        byte[] responseArray = responseWrapper.getContentAsByteArray();\n        String responseBody = new String(responseArray, responseWrapper.getCharacterEncoding());\n        responseDto.setBody(responseBody);\n        responseWrapper.copyBodyToResponse();\n        authorizationService.seveInDatabase(requestDto, responseDto);            \n    } catch (Exception e) {\n        log.error(&quot;Error ServletException | IOException in CustomAuthorizationFilter.saveResponse&quot;, e);\n    }\n}\n\nprivate void responseError(LogCode code, HttpServletResponse response, Exception e) {\n    try {\n        Map&lt;String, Object&gt; error = new HashMap&lt;&gt;();\n        error.put(&quot;log&quot;, LogUtil.getLog(code));\n        error.put(&quot;message&quot;, e.getMessage());\n        response.setContentType(APPLICATION_JSON_VALUE);\n        new ObjectMapper().writeValue(response.getOutputStream(), error);\n        e.printStackTrace();\n    } catch (IOException ie) {\n        log.error(&quot;Error IOException in HttpLoggingFilter.responseError:&quot;, ie);\n    }\n}\n\n\npublic String getRequestBody() {\n    return requestBody;\n}\n\npublic void setRequestBody(String requestBody) {\n    this.requestBody = requestBody;\n}\n\n}\n</code></pre>\n<p>So my solution was use getter and setter methods of de local attribute requestBody, for validate if this is or not null and does not call again getReader() method because save in memory when set value. This worked perfect for me. Regards.</p>\n"},{"tags":[],"owner":{"account_id":14537432,"reputation":874,"user_id":10500330,"display_name":"Anurag Bhalekar"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1686297622,"creation_date":1686297622,"answer_id":76438321,"question_id":7318632,"body_markdown":"Implementing other solutions would possibly lead you to the following exception\r\n\r\n    java.lang.IllegalStateException: getInputStream() has already been called for this request\r\n\r\nTo read HttpServletRequest, following needs to be implemented.\r\n\r\n**Background:**\r\n\r\nTo get the request body from the request, HttpServletRequest is provided with and InputStream class. The getReader() is what is usually used to stream the request. This function internally calls getInputStream() function, which returns us the stream for us to read the request. Now, note that its a stream, and can be opened only once. Hence, while reading this (i.e. implementing the solutions given in this thread) it usually throws &quot;stream is already closed.&quot; exception. Now this happens because, the tomcat server has already opened and read the request once. Hence, we need to implement a wrapper here, which helps us to re-open an already read stream by keeping an instance of it. This wrapper again, cannot be used directly, instead, needs to be added at spring filter level, while the tomcat server is reading it. \r\n\r\n**Code:**\r\n\r\nServlet Request Wrapper Class:\r\n\r\n    import lombok.extern.slf4j.Slf4j;\r\n    import javax.servlet.ReadListener;\r\n    import javax.servlet.ServletInputStream;\r\n    import javax.servlet.http.HttpServletRequest;\r\n    import javax.servlet.http.HttpServletRequestWrapper;\r\n    import java.io.*;\r\n    @Slf4j\r\n    public class MyHttpServletRequestWrapper extends HttpServletRequestWrapper {\r\n    private final String body;public MyHttpServletRequestWrapper(HttpServletRequest request) {\r\n        super(request);\r\n\r\n        StringBuilder stringBuilder = new StringBuilder();\r\n        BufferedReader bufferedReader = null;\r\n\r\n        try {\r\n            InputStream inputStream = request.getInputStream();\r\n\r\n            if (inputStream != null) {\r\n                bufferedReader = new BufferedReader(new InputStreamReader(inputStream));\r\n\r\n                char[] charBuffer = new char[128];\r\n                int bytesRead = -1;\r\n\r\n                while ((bytesRead = bufferedReader.read(charBuffer)) &gt; 0) {\r\n                    stringBuilder.append(charBuffer, 0, bytesRead);\r\n                }\r\n            } else {\r\n                stringBuilder.append(&quot;&quot;);\r\n            }\r\n        } catch (IOException ex) {\r\n            log.error(&quot;Error reading the request body...&quot;);\r\n        } finally {\r\n            if (bufferedReader != null) {\r\n                try {\r\n                    bufferedReader.close();\r\n                } catch (IOException ex) {\r\n                    log.error(&quot;Error closing bufferedReader...&quot;);\r\n                }\r\n            }\r\n        }\r\n\r\n        body = stringBuilder.toString();\r\n    }\r\n\r\n    @Override\r\n    public ServletInputStream getInputStream () {\r\n        final ByteArrayInputStream byteArrayInputStream = new ByteArrayInputStream(body.getBytes());\r\n\r\n        ServletInputStream inputStream = new ServletInputStream() {\r\n            @Override\r\n            public boolean isFinished() {\r\n                return false;\r\n            }\r\n\r\n            @Override\r\n            public boolean isReady() {\r\n                return false;\r\n            }\r\n\r\n            @Override\r\n            public void setReadListener(ReadListener readListener) {\r\n\r\n            }\r\n\r\n            public int read () throws IOException {\r\n                return byteArrayInputStream.read();\r\n            }\r\n        };\r\n\r\n        return inputStream;\r\n    }\r\n\r\n    @Override\r\n    public BufferedReader getReader(){\r\n        return new BufferedReader(new InputStreamReader(this.getInputStream()));\r\n    }\r\n    }\r\n\r\nNow we need to use the wrapper my implementing it in a filter, as shown below.\r\n\r\n    import lombok.extern.slf4j.Slf4j;\r\n    import org.springframework.core.annotation.Order;\r\n    import org.springframework.stereotype.Component;\r\n    import javax.servlet.*;\r\n    import javax.servlet.http.HttpServletRequest;\r\n    import java.io.IOException;\r\n    import java.util.Objects;\r\n    @Component\r\n    @Order(1)\r\n    @Slf4j\r\n    public class ServletFilter implements Filter {\r\n\r\n    @Override\r\n    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException {\r\n            ServletRequest requestWrapper = null;\r\n            if (servletRequest instanceof HttpServletRequest) {\r\n                requestWrapper = new MyHttpServletRequestWrapper((HttpServletRequest) servletRequest);\r\n            }\r\n            if (Objects.isNull(requestWrapper)){\r\n                filterChain.doFilter(servletRequest, servletResponse);\r\n            } else {\r\n                filterChain.doFilter(requestWrapper, servletResponse);\r\n            }\r\n    }\r\n    }\r\n\r\nThen, the suggested implementations can be used as follows to get the request body as following:\r\n\r\n        private String getRequestBody(HttpServletRequest request) {\r\n        try {\r\n            return request.getReader().lines().collect(Collectors.joining());\r\n        }catch (Exception e){\r\n            e.printStackTrace();\r\n            return &quot;{}&quot;;\r\n        }\r\n    }","title":"java.lang.IllegalStateException: getReader() has already been called for this request","body":"<p>Implementing other solutions would possibly lead you to the following exception</p>\n<pre><code>java.lang.IllegalStateException: getInputStream() has already been called for this request\n</code></pre>\n<p>To read HttpServletRequest, following needs to be implemented.</p>\n<p><strong>Background:</strong></p>\n<p>To get the request body from the request, HttpServletRequest is provided with and InputStream class. The getReader() is what is usually used to stream the request. This function internally calls getInputStream() function, which returns us the stream for us to read the request. Now, note that its a stream, and can be opened only once. Hence, while reading this (i.e. implementing the solutions given in this thread) it usually throws &quot;stream is already closed.&quot; exception. Now this happens because, the tomcat server has already opened and read the request once. Hence, we need to implement a wrapper here, which helps us to re-open an already read stream by keeping an instance of it. This wrapper again, cannot be used directly, instead, needs to be added at spring filter level, while the tomcat server is reading it.</p>\n<p><strong>Code:</strong></p>\n<p>Servlet Request Wrapper Class:</p>\n<pre><code>import lombok.extern.slf4j.Slf4j;\nimport javax.servlet.ReadListener;\nimport javax.servlet.ServletInputStream;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletRequestWrapper;\nimport java.io.*;\n@Slf4j\npublic class MyHttpServletRequestWrapper extends HttpServletRequestWrapper {\nprivate final String body;public MyHttpServletRequestWrapper(HttpServletRequest request) {\n    super(request);\n\n    StringBuilder stringBuilder = new StringBuilder();\n    BufferedReader bufferedReader = null;\n\n    try {\n        InputStream inputStream = request.getInputStream();\n\n        if (inputStream != null) {\n            bufferedReader = new BufferedReader(new InputStreamReader(inputStream));\n\n            char[] charBuffer = new char[128];\n            int bytesRead = -1;\n\n            while ((bytesRead = bufferedReader.read(charBuffer)) &gt; 0) {\n                stringBuilder.append(charBuffer, 0, bytesRead);\n            }\n        } else {\n            stringBuilder.append(&quot;&quot;);\n        }\n    } catch (IOException ex) {\n        log.error(&quot;Error reading the request body...&quot;);\n    } finally {\n        if (bufferedReader != null) {\n            try {\n                bufferedReader.close();\n            } catch (IOException ex) {\n                log.error(&quot;Error closing bufferedReader...&quot;);\n            }\n        }\n    }\n\n    body = stringBuilder.toString();\n}\n\n@Override\npublic ServletInputStream getInputStream () {\n    final ByteArrayInputStream byteArrayInputStream = new ByteArrayInputStream(body.getBytes());\n\n    ServletInputStream inputStream = new ServletInputStream() {\n        @Override\n        public boolean isFinished() {\n            return false;\n        }\n\n        @Override\n        public boolean isReady() {\n            return false;\n        }\n\n        @Override\n        public void setReadListener(ReadListener readListener) {\n\n        }\n\n        public int read () throws IOException {\n            return byteArrayInputStream.read();\n        }\n    };\n\n    return inputStream;\n}\n\n@Override\npublic BufferedReader getReader(){\n    return new BufferedReader(new InputStreamReader(this.getInputStream()));\n}\n}\n</code></pre>\n<p>Now we need to use the wrapper my implementing it in a filter, as shown below.</p>\n<pre><code>import lombok.extern.slf4j.Slf4j;\nimport org.springframework.core.annotation.Order;\nimport org.springframework.stereotype.Component;\nimport javax.servlet.*;\nimport javax.servlet.http.HttpServletRequest;\nimport java.io.IOException;\nimport java.util.Objects;\n@Component\n@Order(1)\n@Slf4j\npublic class ServletFilter implements Filter {\n\n@Override\npublic void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException {\n        ServletRequest requestWrapper = null;\n        if (servletRequest instanceof HttpServletRequest) {\n            requestWrapper = new MyHttpServletRequestWrapper((HttpServletRequest) servletRequest);\n        }\n        if (Objects.isNull(requestWrapper)){\n            filterChain.doFilter(servletRequest, servletResponse);\n        } else {\n            filterChain.doFilter(requestWrapper, servletResponse);\n        }\n}\n}\n</code></pre>\n<p>Then, the suggested implementations can be used as follows to get the request body as following:</p>\n<pre><code>    private String getRequestBody(HttpServletRequest request) {\n    try {\n        return request.getReader().lines().collect(Collectors.joining());\n    }catch (Exception e){\n        e.printStackTrace();\n        return &quot;{}&quot;;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":279561,"reputation":26283,"user_id":574799,"accept_rate":74,"display_name":"lukastymo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":86795,"favorite_count":0,"down_vote_count":1,"up_vote_count":46,"accepted_answer_id":7318845,"answer_count":6,"score":45,"last_activity_date":1691680964,"creation_date":1315305954,"question_id":7318632,"body_markdown":"I want to add logging to my Servlet, so I&#39;ve created Filter which should display request and go to the Servlet. But unfortunately I&#39;ve encoutered exception:\r\n\r\n    java.lang.IllegalStateException: getReader() has already been called for this request\r\n    \tat org.apache.catalina.connector.Request.getInputStream(Request.java:948)\r\n    \tat org.apache.catalina.connector.RequestFacade.getInputStream(RequestFacade.java:338)\r\n    \tat com.noelios.restlet.ext.servlet.ServletCall.getRequestEntityStream(ServletCall.java:190)\r\n\r\nSo to fix this problem I&#39;ve found solution with Wrapper, but it doesn&#39;t work. What else can I use/change in code? Any ideas?\r\n\r\n[MyHttpServletRequestWrapper]\r\n\r\n    public class MyHttpServletRequestWrapper extends HttpServletRequestWrapper\r\n    {\r\n        public MyHttpServletRequestWrapper(HttpServletRequest request)\r\n        {\r\n            super(request);\r\n        }\r\n    \r\n        private String getBodyAsString()\r\n        {\r\n            StringBuffer buff = new StringBuffer();\r\n            buff.append(&quot; BODY_DATA START [ &quot;);\r\n            char[] charArr = new char[getContentLength()];\r\n            try\r\n            {\r\n                BufferedReader reader = new BufferedReader(getReader());\r\n                reader.read(charArr, 0, charArr.length);\r\n                reader.close();\r\n            }\r\n            catch (IOException e)\r\n            {\r\n                e.printStackTrace();\r\n            }\r\n            buff.append(charArr);\r\n            buff.append(&quot; ] BODY_DATA END &quot;);\r\n            return buff.toString();\r\n        }\r\n    \r\n        public String toString()\r\n        {\r\n            return getBodyAsString();\r\n        }\r\n    }\r\n\r\n\r\n[MyFilter]\r\n\r\n    public class MyFilterimplements Filter\r\n    {\r\n        @Override\r\n        public void init(FilterConfig filterConfig) throws ServletException\r\n        {\r\n        }\r\n    \r\n        @Override\r\n        public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException\r\n        {\r\n            final HttpServletRequest httpServletRequest = (HttpServletRequest) request;\r\n            final HttpServletResponse httpServletResponse = (HttpServletResponse) response;\r\n    \r\n            final HttpServletRequestWrapper requestWrapper = new MyHttpServletRequestWrapper(httpServletRequest);\r\n            final String requestBody = requestWrapper.toString();\r\n    \r\n            chain.doFilter(request, response);\r\n        }\r\n    }\r\n\r\n","title":"java.lang.IllegalStateException: getReader() has already been called for this request","body":"<p>I want to add logging to my Servlet, so I've created Filter which should display request and go to the Servlet. But unfortunately I've encoutered exception:</p>\n\n<pre><code>java.lang.IllegalStateException: getReader() has already been called for this request\n    at org.apache.catalina.connector.Request.getInputStream(Request.java:948)\n    at org.apache.catalina.connector.RequestFacade.getInputStream(RequestFacade.java:338)\n    at com.noelios.restlet.ext.servlet.ServletCall.getRequestEntityStream(ServletCall.java:190)\n</code></pre>\n\n<p>So to fix this problem I've found solution with Wrapper, but it doesn't work. What else can I use/change in code? Any ideas?</p>\n\n<p>[MyHttpServletRequestWrapper]</p>\n\n<pre><code>public class MyHttpServletRequestWrapper extends HttpServletRequestWrapper\n{\n    public MyHttpServletRequestWrapper(HttpServletRequest request)\n    {\n        super(request);\n    }\n\n    private String getBodyAsString()\n    {\n        StringBuffer buff = new StringBuffer();\n        buff.append(\" BODY_DATA START [ \");\n        char[] charArr = new char[getContentLength()];\n        try\n        {\n            BufferedReader reader = new BufferedReader(getReader());\n            reader.read(charArr, 0, charArr.length);\n            reader.close();\n        }\n        catch (IOException e)\n        {\n            e.printStackTrace();\n        }\n        buff.append(charArr);\n        buff.append(\" ] BODY_DATA END \");\n        return buff.toString();\n    }\n\n    public String toString()\n    {\n        return getBodyAsString();\n    }\n}\n</code></pre>\n\n<p>[MyFilter]</p>\n\n<pre><code>public class MyFilterimplements Filter\n{\n    @Override\n    public void init(FilterConfig filterConfig) throws ServletException\n    {\n    }\n\n    @Override\n    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException\n    {\n        final HttpServletRequest httpServletRequest = (HttpServletRequest) request;\n        final HttpServletResponse httpServletResponse = (HttpServletResponse) response;\n\n        final HttpServletRequestWrapper requestWrapper = new MyHttpServletRequestWrapper(httpServletRequest);\n        final String requestBody = requestWrapper.toString();\n\n        chain.doFilter(request, response);\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","aop"],"comments":[{"owner":{"account_id":9735171,"reputation":2264,"user_id":7218656,"accept_rate":75,"display_name":"Arun Sudhakaran"},"score":0,"creation_date":1691642997,"post_id":76872206,"comment_id":135519736,"body_markdown":"Does this answer your question? [Can Intellij show warning if advice advices no method?](https://stackoverflow.com/questions/42435691/can-intellij-show-warning-if-advice-advices-no-method)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/42435691/can-intellij-show-warning-if-advice-advices-no-method\">Can Intellij show warning if advice advices no method?</a>"},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1691649021,"post_id":76872206,"comment_id":135520409,"body_markdown":"The first question that comes to my mind when seeing this question is: Why do you not just try and run the application to see for yourself, if IDEA tells you the truth or not?","body":"The first question that comes to my mind when seeing this question is: Why do you not just try and run the application to see for yourself, if IDEA tells you the truth or not?"},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1691649264,"post_id":76872206,"comment_id":135520448,"body_markdown":"Reading the code without having tried to copy and run it, the pointcut looks OK to me. Did you maybe not configure your Spring project correctly for component scan? But really, just run the project, let the aspect advice log something and see if it gets triggered.","body":"Reading the code without having tried to copy and run it, the pointcut looks OK to me. Did you maybe not configure your Spring project correctly for component scan? But really, just run the project, let the aspect advice log something and see if it gets triggered."},{"owner":{"account_id":28965224,"reputation":321,"user_id":22186847,"display_name":"JoreJoh"},"score":0,"creation_date":1691669300,"post_id":76872206,"comment_id":135524273,"body_markdown":"@kriegaex the IDE, alas, was right... Please see the edit","body":"@kriegaex the IDE, alas, was right... Please see the edit"}],"answers":[{"tags":[],"owner":{"account_id":28965224,"reputation":321,"user_id":22186847,"display_name":"JoreJoh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691680075,"creation_date":1691680075,"answer_id":76877045,"question_id":76872206,"body_markdown":"Oh boy, oh boy... Rookie mistake... I forgot to include the `@EnableAspectJAutoProxy` annotation\r\n```java\r\npackage org.example.configurations;\r\n\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\nimport com.fasterxml.jackson.module.paramnames.ParameterNamesModule;\r\nimport org.example.requestRateManagers.RequestRateManager;\r\nimport org.example.requestRateManagers.RequestRateManagerImpl;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.ComponentScan;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.context.annotation.EnableAspectJAutoProxy;\r\n\r\nimport java.util.concurrent.TimeUnit;\r\n\r\n@Configuration\r\n@ComponentScan(basePackages = &quot;org.example&quot;)\r\n@EnableAspectJAutoProxy // this is important\r\npublic class SpringConfig {\r\n    @Bean\r\n    public RequestRateManager requestRateManager() {\r\n        return new RequestRateManagerImpl(TimeUnit.MINUTES, 100);\r\n    }\r\n\r\n    @Bean\r\n    public ObjectMapper objectMapper() {\r\n        return new ObjectMapper().registerModule(new ParameterNamesModule());\r\n    }\r\n}\r\n```\r\nHowever, the IDE is still not convinced\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/5GHDH.png","title":"&quot;This advice advises no methods&quot;","body":"<p>Oh boy, oh boy... Rookie mistake... I forgot to include the <code>@EnableAspectJAutoProxy</code> annotation</p>\n<pre class=\"lang-java prettyprint-override\"><code>package org.example.configurations;\n\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport com.fasterxml.jackson.module.paramnames.ParameterNamesModule;\nimport org.example.requestRateManagers.RequestRateManager;\nimport org.example.requestRateManagers.RequestRateManagerImpl;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.context.annotation.EnableAspectJAutoProxy;\n\nimport java.util.concurrent.TimeUnit;\n\n@Configuration\n@ComponentScan(basePackages = &quot;org.example&quot;)\n@EnableAspectJAutoProxy // this is important\npublic class SpringConfig {\n    @Bean\n    public RequestRateManager requestRateManager() {\n        return new RequestRateManagerImpl(TimeUnit.MINUTES, 100);\n    }\n\n    @Bean\n    public ObjectMapper objectMapper() {\n        return new ObjectMapper().registerModule(new ParameterNamesModule());\n    }\n}\n</code></pre>\n<p>However, the IDE is still not convinced</p>\n<p><a href=\"https://i.stack.imgur.com/5GHDH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5GHDH.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":28965224,"reputation":321,"user_id":22186847,"display_name":"JoreJoh"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":92,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76877045,"answer_count":1,"score":0,"last_activity_date":1691680075,"creation_date":1691632777,"question_id":76872206,"body_markdown":"I am trying to complete a simple (but, tbh, badly formulated) entry test. I used an aspect to incorporate the request limit feature, but the chances are it doesn&#39;t work. The IDE says &quot;This advice advises no methods&quot;. I wrote and ran an integration test, and it seems the IDE is correct. **What is my mistake, why doesn&#39;t my advice get applied?** I need to aspect all methods within the `org.example` package that have the `@ManageRequestRate` annotation (it applies only to one method, but let&#39;s imagine I can include more methods like that in the future)\r\n```java\r\npackage org.example.aspects;\r\n\r\nimport lombok.RequiredArgsConstructor;\r\nimport org.aspectj.lang.annotation.Aspect;\r\nimport org.aspectj.lang.annotation.Before;\r\nimport org.aspectj.lang.annotation.Pointcut;\r\nimport org.example.requestRateManagers.RequestRateManager;\r\nimport org.springframework.stereotype.Component;\r\n\r\n@Component\r\n@Aspect\r\n@RequiredArgsConstructor\r\npublic class RequestRateAspect {\r\n    private final RequestRateManager requestRateManager;\r\n\r\n    @Pointcut(&quot;within(org.example..*) &amp;&amp; @annotation(org.example.annotations.ManageRequestRate)&quot;)\r\n    public void annotationManageRequests() {\r\n    }\r\n\r\n    @Before(&quot;annotationManageRequests()&quot;)\r\n    public void requestRateAdvice() {\r\n        System.out.println(&quot;Running requestRateAdvice()...&quot;); // a simple log to see whether it works\r\n        requestRateManager.ensureRequestRate();\r\n    }\r\n}\r\n```\r\n```java\r\npackage org.example.annotations;\r\n\r\nimport java.lang.annotation.ElementType;\r\nimport java.lang.annotation.Retention;\r\nimport java.lang.annotation.RetentionPolicy;\r\nimport java.lang.annotation.Target;\r\n\r\n@Retention(RetentionPolicy.RUNTIME)\r\n@Target(ElementType.METHOD)\r\npublic @interface ManageRequestRate {\r\n}\r\n```\r\n```java\r\npackage org.example.requestRateManagers;\r\n\r\npublic interface RequestRateManager {\r\n    void ensureRequestRate();\r\n}\r\n```\r\n```java\r\npackage org.example.requestRateManagers;\r\n\r\nimport org.example.exceptions.CrptException;\r\n\r\nimport java.util.concurrent.Executors;\r\nimport java.util.concurrent.Semaphore;\r\nimport java.util.concurrent.TimeUnit;\r\n\r\npublic class RequestRateManagerImpl implements RequestRateManager {\r\n    private final TimeUnit timeUnit;\r\n    private final int requestsPerTimeUnit;\r\n    private final Semaphore semaphore;\r\n\r\n    public RequestRateManagerImpl(TimeUnit timeUnit, int requestsPerTimeUnit) {\r\n        this.timeUnit = timeUnit;\r\n        this.requestsPerTimeUnit = requestsPerTimeUnit;\r\n        this.semaphore = new Semaphore(requestsPerTimeUnit, true);\r\n        startScheduledExecutor();\r\n    }\r\n\r\n    private void startScheduledExecutor() {\r\n        Executors.newSingleThreadScheduledExecutor()\r\n                .scheduleAtFixedRate(this::releasePermits, 0, 1, timeUnit);\r\n    }\r\n\r\n    @Override\r\n    public void ensureRequestRate() {\r\n        try {\r\n            semaphore.acquire();\r\n        } catch (InterruptedException e) {\r\n            throw new CrptException(e);\r\n        } finally {\r\n            semaphore.release();\r\n        }\r\n    }\r\n\r\n    private void releasePermits() {\r\n        int numberOfPermitsToRelease = requestsPerTimeUnit - semaphore.availablePermits();\r\n        semaphore.release(numberOfPermitsToRelease);\r\n    }\r\n}\r\n```\r\n```java\r\npackage org.example;\r\n\r\nimport com.fasterxml.jackson.core.JsonProcessingException;\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\nimport lombok.RequiredArgsConstructor;\r\nimport org.example.annotations.ManageRequestRate;\r\nimport org.example.exceptions.CrptException;\r\nimport org.example.models.Item;\r\nimport org.springframework.stereotype.Component;\r\n\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\n@Component\r\n@RequiredArgsConstructor\r\npublic class CrptAPI {\r\n    private final ObjectMapper objectMapper;\r\n\r\n    @ManageRequestRate\r\n    public String createDocument(Item item, String signature) {\r\n        Map&lt;String, Object&gt; documentMap = getDocumentMap(item, signature);\r\n        String document;\r\n        try {\r\n            document = objectMapper.writeValueAsString(documentMap);\r\n        } catch (JsonProcessingException e) {\r\n            throw new CrptException(e);\r\n        }\r\n        return document;\r\n    }\r\n\r\n    private Map&lt;String, Object&gt; getDocumentMap(Item item, String signature) {\r\n        Map&lt;String, Object&gt; documentMap = new HashMap&lt;&gt;();\r\n        documentMap.put(item.getClass().getSimpleName().toLowerCase(), item);\r\n        documentMap.put(&quot;signature&quot;, signature);\r\n        return documentMap;\r\n    }\r\n}\r\n```\r\n```java\r\npublic class CrptAPIIntegrationTest {\r\n    private final ApplicationContext context = new AnnotationConfigApplicationContext(SpringConfig.class);\r\n\r\n    @Test\r\n    public void testCreateDocument() throws JSONException {\r\n        Item item = new Item(UUID.randomUUID(), &quot;test product name&quot;,\r\n                &quot;test brand&quot;, &quot;1234-5678&quot;, &quot;test agent name&quot;);\r\n        UUID id = item.getId();\r\n        CrptAPI crptAPI = context.getBean(CrptAPI.class);\r\n        String documentJson = crptAPI.createDocument(item, &quot;test signature&quot;);\r\n        String expectedJson = &quot;&quot;&quot;\r\n                {\r\n                &quot;item&quot;:\r\n                {\r\n                &quot;id&quot;:&quot;&quot;&quot; + id + &quot;,&quot; + &quot;&quot;&quot;\r\n                &quot;productName&quot;:&quot;test product name&quot;,\r\n                &quot;brand&quot;:&quot;test brand&quot;,\r\n                &quot;agentTaxIdNumber&quot;:&quot;1234-5678&quot;,\r\n                &quot;agentName&quot;:&quot;test agent name&quot;\r\n                },\r\n                &quot;signature&quot;:&quot;test signature&quot;}\r\n                &quot;&quot;&quot;;\r\n        JSONAssert.assertEquals(expectedJson, documentJson, JSONCompareMode.STRICT); // passes, but no log is printed\r\n    }\r\n}\r\n```\r\n[![IntelliJ IDEA with the message &quot;This advice advices no methods&quot;][1]][1]\r\n\r\n[This questions][2] asks a whole nother thing. I have no clue why it was suggested as a potential duplicate\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/vQ2nX.png\r\n  [2]: https://stackoverflow.com/questions/42435691/can-intellij-show-warning-if-advice-advices-no-method","title":"&quot;This advice advises no methods&quot;","body":"<p>I am trying to complete a simple (but, tbh, badly formulated) entry test. I used an aspect to incorporate the request limit feature, but the chances are it doesn't work. The IDE says &quot;This advice advises no methods&quot;. I wrote and ran an integration test, and it seems the IDE is correct. <strong>What is my mistake, why doesn't my advice get applied?</strong> I need to aspect all methods within the <code>org.example</code> package that have the <code>@ManageRequestRate</code> annotation (it applies only to one method, but let's imagine I can include more methods like that in the future)</p>\n<pre class=\"lang-java prettyprint-override\"><code>package org.example.aspects;\n\nimport lombok.RequiredArgsConstructor;\nimport org.aspectj.lang.annotation.Aspect;\nimport org.aspectj.lang.annotation.Before;\nimport org.aspectj.lang.annotation.Pointcut;\nimport org.example.requestRateManagers.RequestRateManager;\nimport org.springframework.stereotype.Component;\n\n@Component\n@Aspect\n@RequiredArgsConstructor\npublic class RequestRateAspect {\n    private final RequestRateManager requestRateManager;\n\n    @Pointcut(&quot;within(org.example..*) &amp;&amp; @annotation(org.example.annotations.ManageRequestRate)&quot;)\n    public void annotationManageRequests() {\n    }\n\n    @Before(&quot;annotationManageRequests()&quot;)\n    public void requestRateAdvice() {\n        System.out.println(&quot;Running requestRateAdvice()...&quot;); // a simple log to see whether it works\n        requestRateManager.ensureRequestRate();\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package org.example.annotations;\n\nimport java.lang.annotation.ElementType;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\n\n@Retention(RetentionPolicy.RUNTIME)\n@Target(ElementType.METHOD)\npublic @interface ManageRequestRate {\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package org.example.requestRateManagers;\n\npublic interface RequestRateManager {\n    void ensureRequestRate();\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package org.example.requestRateManagers;\n\nimport org.example.exceptions.CrptException;\n\nimport java.util.concurrent.Executors;\nimport java.util.concurrent.Semaphore;\nimport java.util.concurrent.TimeUnit;\n\npublic class RequestRateManagerImpl implements RequestRateManager {\n    private final TimeUnit timeUnit;\n    private final int requestsPerTimeUnit;\n    private final Semaphore semaphore;\n\n    public RequestRateManagerImpl(TimeUnit timeUnit, int requestsPerTimeUnit) {\n        this.timeUnit = timeUnit;\n        this.requestsPerTimeUnit = requestsPerTimeUnit;\n        this.semaphore = new Semaphore(requestsPerTimeUnit, true);\n        startScheduledExecutor();\n    }\n\n    private void startScheduledExecutor() {\n        Executors.newSingleThreadScheduledExecutor()\n                .scheduleAtFixedRate(this::releasePermits, 0, 1, timeUnit);\n    }\n\n    @Override\n    public void ensureRequestRate() {\n        try {\n            semaphore.acquire();\n        } catch (InterruptedException e) {\n            throw new CrptException(e);\n        } finally {\n            semaphore.release();\n        }\n    }\n\n    private void releasePermits() {\n        int numberOfPermitsToRelease = requestsPerTimeUnit - semaphore.availablePermits();\n        semaphore.release(numberOfPermitsToRelease);\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package org.example;\n\nimport com.fasterxml.jackson.core.JsonProcessingException;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport lombok.RequiredArgsConstructor;\nimport org.example.annotations.ManageRequestRate;\nimport org.example.exceptions.CrptException;\nimport org.example.models.Item;\nimport org.springframework.stereotype.Component;\n\nimport java.util.HashMap;\nimport java.util.Map;\n\n@Component\n@RequiredArgsConstructor\npublic class CrptAPI {\n    private final ObjectMapper objectMapper;\n\n    @ManageRequestRate\n    public String createDocument(Item item, String signature) {\n        Map&lt;String, Object&gt; documentMap = getDocumentMap(item, signature);\n        String document;\n        try {\n            document = objectMapper.writeValueAsString(documentMap);\n        } catch (JsonProcessingException e) {\n            throw new CrptException(e);\n        }\n        return document;\n    }\n\n    private Map&lt;String, Object&gt; getDocumentMap(Item item, String signature) {\n        Map&lt;String, Object&gt; documentMap = new HashMap&lt;&gt;();\n        documentMap.put(item.getClass().getSimpleName().toLowerCase(), item);\n        documentMap.put(&quot;signature&quot;, signature);\n        return documentMap;\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class CrptAPIIntegrationTest {\n    private final ApplicationContext context = new AnnotationConfigApplicationContext(SpringConfig.class);\n\n    @Test\n    public void testCreateDocument() throws JSONException {\n        Item item = new Item(UUID.randomUUID(), &quot;test product name&quot;,\n                &quot;test brand&quot;, &quot;1234-5678&quot;, &quot;test agent name&quot;);\n        UUID id = item.getId();\n        CrptAPI crptAPI = context.getBean(CrptAPI.class);\n        String documentJson = crptAPI.createDocument(item, &quot;test signature&quot;);\n        String expectedJson = &quot;&quot;&quot;\n                {\n                &quot;item&quot;:\n                {\n                &quot;id&quot;:&quot;&quot;&quot; + id + &quot;,&quot; + &quot;&quot;&quot;\n                &quot;productName&quot;:&quot;test product name&quot;,\n                &quot;brand&quot;:&quot;test brand&quot;,\n                &quot;agentTaxIdNumber&quot;:&quot;1234-5678&quot;,\n                &quot;agentName&quot;:&quot;test agent name&quot;\n                },\n                &quot;signature&quot;:&quot;test signature&quot;}\n                &quot;&quot;&quot;;\n        JSONAssert.assertEquals(expectedJson, documentJson, JSONCompareMode.STRICT); // passes, but no log is printed\n    }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/vQ2nX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vQ2nX.png\" alt=\"IntelliJ IDEA with the message &quot;This advice advices no methods&quot;\" /></a></p>\n<p><a href=\"https://stackoverflow.com/questions/42435691/can-intellij-show-warning-if-advice-advices-no-method\">This questions</a> asks a whole nother thing. I have no clue why it was suggested as a potential duplicate</p>\n"},{"tags":["java","dynamic","open-telemetry","otel"],"answers":[{"comments":[{"owner":{"account_id":18509115,"reputation":1,"user_id":13484770,"display_name":"Himanshu Gupta"},"score":0,"creation_date":1691737434,"post_id":76876815,"comment_id":135534779,"body_markdown":"But for this we will need redeployment or restart after fetching envs. wanted to do this at run time.","body":"But for this we will need redeployment or restart after fetching envs. wanted to do this at run time."},{"owner":{"account_id":3053597,"reputation":580,"user_id":2587704,"accept_rate":50,"display_name":"JackB"},"score":0,"creation_date":1692631218,"post_id":76876815,"comment_id":135646476,"body_markdown":"Yes that&#39;s correct. There is currently no way to enable / disable instrumentation at runtime.","body":"Yes that&#39;s correct. There is currently no way to enable / disable instrumentation at runtime."}],"tags":[],"owner":{"account_id":3053597,"reputation":580,"user_id":2587704,"accept_rate":50,"display_name":"JackB"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1691678506,"creation_date":1691678506,"answer_id":76876815,"question_id":76873681,"body_markdown":"You can disable the agent entirely with [OTEL_JAVAAGENT_ENABLED=false](https://opentelemetry.io/docs/instrumentation/java/automatic/agent-config/#disabling-the-agent-entirely).\r\n\r\nOr you can have the javaagent install instrumentation, but disable the OpenTelemetry SDK with [OTEL_SDK_DISABLED](https://github.com/open-telemetry/opentelemetry-java/tree/main/sdk-extensions/autoconfigure#disabling-opentelemetrysdk). \r\n\r\nOr you can suppress specific instrumentation with [OTEL_INSTRUMENTATION_[NAME]_ENABLED=false](https://opentelemetry.io/docs/instrumentation/java/automatic/agent-config/#suppressing-specific-agent-instrumentation).","title":"Java opentelemetry agent enable/disable at run time","body":"<p>You can disable the agent entirely with <a href=\"https://opentelemetry.io/docs/instrumentation/java/automatic/agent-config/#disabling-the-agent-entirely\" rel=\"nofollow noreferrer\">OTEL_JAVAAGENT_ENABLED=false</a>.</p>\n<p>Or you can have the javaagent install instrumentation, but disable the OpenTelemetry SDK with <a href=\"https://github.com/open-telemetry/opentelemetry-java/tree/main/sdk-extensions/autoconfigure#disabling-opentelemetrysdk\" rel=\"nofollow noreferrer\">OTEL_SDK_DISABLED</a>.</p>\n<p>Or you can suppress specific instrumentation with <a href=\"https://opentelemetry.io/docs/instrumentation/java/automatic/agent-config/#suppressing-specific-agent-instrumentation\" rel=\"nofollow noreferrer\">OTEL_INSTRUMENTATION_[NAME]_ENABLED=false</a>.</p>\n"}],"owner":{"account_id":18509115,"reputation":1,"user_id":13484770,"display_name":"Himanshu Gupta"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":226,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691678506,"creation_date":1691654101,"question_id":76873681,"body_markdown":"what to enable and disable java auto instrumentation done using otel java agent at runtime to avoid redeployment of service in case of issues. Any idea on how we can do this?\r\n\r\nwe can also do this if we have some way to access and modify tracer used by otel agent.\r\n\r\nfound nothing on internet","title":"Java opentelemetry agent enable/disable at run time","body":"<p>what to enable and disable java auto instrumentation done using otel java agent at runtime to avoid redeployment of service in case of issues. Any idea on how we can do this?</p>\n<p>we can also do this if we have some way to access and modify tracer used by otel agent.</p>\n<p>found nothing on internet</p>\n"},{"tags":["java","list","set"],"comments":[{"owner":{"account_id":1322191,"reputation":11583,"user_id":1267768,"accept_rate":83,"display_name":"Matt"},"score":0,"creation_date":1343091464,"post_id":11621585,"comment_id":15391475,"body_markdown":"I&#39;m having a hard time seeing a use case as well.  Typically when you want to cache things, you need a key to retrieve what&#39;s being cached, hence why every cache implementation works with the Map interface (or something similar).","body":"I&#39;m having a hard time seeing a use case as well.  Typically when you want to cache things, you need a key to retrieve what&#39;s being cached, hence why every cache implementation works with the Map interface (or something similar)."},{"owner":{"account_id":271693,"reputation":7924,"user_id":562363,"accept_rate":59,"display_name":"Absurd-Mind"},"score":0,"creation_date":1343092901,"post_id":11621585,"comment_id":15391715,"body_markdown":"you can still iterate over the Set","body":"you can still iterate over the Set"},{"owner":{"account_id":1491019,"reputation":353,"user_id":1398099,"display_name":"Rabbyte"},"score":1,"creation_date":1345346816,"post_id":11621585,"comment_id":16046128,"body_markdown":"I&#39;m making an anti-repeat message plugin for a chatroom where users talk. I use a map to link the user to a list of messages that I check the new message against. I want to only store 5 messages in any one user&#39;s list(already completed), and have any stored messages that are over x units of time old expire.","body":"I&#39;m making an anti-repeat message plugin for a chatroom where users talk. I use a map to link the user to a list of messages that I check the new message against. I want to only store 5 messages in any one user&#39;s list(already completed), and have any stored messages that are over x units of time old expire."},{"owner":{"account_id":2374041,"reputation":943,"user_id":2077917,"accept_rate":25,"display_name":"Winster"},"score":0,"creation_date":1589448980,"post_id":11621585,"comment_id":109300728,"body_markdown":"Another use case is to get the number of requests received in a server in the past 1 hour","body":"Another use case is to get the number of requests received in a server in the past 1 hour"}],"answers":[{"comments":[{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":9,"creation_date":1343089442,"post_id":11621916,"comment_id":15391098,"body_markdown":"Not so simple. Re-inventing the `HashSet` class is a bad idea, and you can&#39;t just &quot;make HashSet use a CacheBuilder instead&quot;","body":"Not so simple. Re-inventing the <code>HashSet</code> class is a bad idea, and you can&#39;t just &quot;make HashSet use a CacheBuilder instead&quot;"},{"owner":{"account_id":271693,"reputation":7924,"user_id":562363,"accept_rate":59,"display_name":"Absurd-Mind"},"score":0,"creation_date":1343093949,"post_id":11621916,"comment_id":15391880,"body_markdown":"yes, the clean code solution would be to extend AbstractSet and use internally a Map which is passed by dependecy injection.","body":"yes, the clean code solution would be to extend AbstractSet and use internally a Map which is passed by dependecy injection."}],"tags":[],"owner":{"account_id":271693,"reputation":7924,"user_id":562363,"accept_rate":59,"display_name":"Absurd-Mind"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1343086130,"creation_date":1343085409,"answer_id":11621916,"question_id":11621585,"body_markdown":"Since the Java HashSet implementation uses internally a HashMap, it should be really easy to copy/modify the code so that it uses Guavas CacheBuilder.\r\n\r\n    public class HashSet&lt;E&gt;\r\n        extends AbstractSet&lt;E&gt;\r\n        implements Set&lt;E&gt;, Cloneable, java.io.Serializable\r\n    {\r\n        static final long serialVersionUID = -5024744406713321676L;\r\n    \r\n        private transient HashMap&lt;E,Object&gt; map;\r\n    ...\r\n\r\nIn other words, just implement your `SetWithExpiration` as a `CacheBuilder` map from key to key.  This will lose no more efficiency than the Java `HashSet` implementation loses by using an underlying `HashMap`.","title":"Java time expiring List/Set?","body":"<p>Since the Java HashSet implementation uses internally a HashMap, it should be really easy to copy/modify the code so that it uses Guavas CacheBuilder.</p>\n\n<pre><code>public class HashSet&lt;E&gt;\n    extends AbstractSet&lt;E&gt;\n    implements Set&lt;E&gt;, Cloneable, java.io.Serializable\n{\n    static final long serialVersionUID = -5024744406713321676L;\n\n    private transient HashMap&lt;E,Object&gt; map;\n...\n</code></pre>\n\n<p>In other words, just implement your <code>SetWithExpiration</code> as a <code>CacheBuilder</code> map from key to key.  This will lose no more efficiency than the Java <code>HashSet</code> implementation loses by using an underlying <code>HashMap</code>.</p>\n"},{"comments":[{"owner":{"account_id":237529,"reputation":18988,"user_id":2621917,"accept_rate":80,"display_name":"Michael Piefel"},"score":1,"creation_date":1428311964,"post_id":18817340,"comment_id":47098924,"body_markdown":"Or use your objects as key and value. Just take care not to create a new object for each dummy, as that would be waste.","body":"Or use your objects as key and value. Just take care not to create a new object for each dummy, as that would be waste."}],"tags":[],"owner":{"account_id":2185113,"reputation":619,"user_id":1933678,"accept_rate":74,"display_name":"Paddy"},"comment_count":1,"down_vote_count":1,"up_vote_count":13,"is_accepted":false,"score":12,"last_activity_date":1428311889,"creation_date":1379277936,"answer_id":18817340,"question_id":11621585,"body_markdown":"To use `CacheBuilder` to get a time expired list, you could put your objects in the map as keys and some dummy object as values.","title":"Java time expiring List/Set?","body":"<p>To use <code>CacheBuilder</code> to get a time expired list, you could put your objects in the map as keys and some dummy object as values.</p>\n"},{"comments":[{"owner":{"account_id":1657205,"reputation":1900,"user_id":1526421,"accept_rate":73,"display_name":"avmohan"},"score":1,"creation_date":1602649608,"post_id":55504620,"comment_id":113784134,"body_markdown":"I don&#39;t think this is the intention. Each entry should have its own timestamp.","body":"I don&#39;t think this is the intention. Each entry should have its own timestamp."},{"owner":{"account_id":3753631,"reputation":2325,"user_id":3120564,"accept_rate":80,"display_name":"Jaumzera"},"score":0,"creation_date":1602678902,"post_id":55504620,"comment_id":113795854,"body_markdown":"So you should use a map.","body":"So you should use a map."},{"owner":{"account_id":1657205,"reputation":1900,"user_id":1526421,"accept_rate":73,"display_name":"avmohan"},"score":2,"creation_date":1602747268,"post_id":55504620,"comment_id":113819171,"body_markdown":"No. It&#39;s like a set where the entry is no longer present once the time has passed.\nOf course, you can get the same behaviour with a guava cache map where the value is some dummy value like the key itself or boolean.","body":"No. It&#39;s like a set where the entry is no longer present once the time has passed. Of course, you can get the same behaviour with a guava cache map where the value is some dummy value like the key itself or boolean."}],"tags":[],"owner":{"account_id":3753631,"reputation":2325,"user_id":3120564,"accept_rate":80,"display_name":"Jaumzera"},"comment_count":3,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1554327134,"creation_date":1554327134,"answer_id":55504620,"question_id":11621585,"body_markdown":"You could decorate a collection implementation to do that. Something like this: \r\n\r\n&lt;!-- language: java --&gt;\r\n    \r\n    public class ExpirableArrayList&lt;E&gt; extends ArrayList&lt;E&gt; {\r\n    \r\n        private final Date creation = new Date();\r\n    \r\n        private final long timeToLiveInMs;\r\n    \r\n        public ExpirableArrayList(long timeToLiveInMs, int initialCapacity) {\r\n            super(initialCapacity);\r\n            this.timeToLiveInMs = timeToLiveInMs;\r\n        }\r\n    \r\n        public ExpirableArrayList(long timeToLiveInMs) {\r\n            this.timeToLiveInMs = timeToLiveInMs;\r\n        }\r\n    \r\n        public ExpirableArrayList(long timeToLiveInMs, Collection&lt;? extends E&gt; c) {\r\n            super(c);\r\n            this.timeToLiveInMs = timeToLiveInMs;\r\n        }\r\n        \r\n        private void expire() {\r\n            if (System.currentTimeMillis() - creation.getTime() &gt; timeToLiveInMs) {\r\n                clear();\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public int size() {\r\n            expire();\r\n            return super.size();\r\n        }\r\n    \r\n        @Override\r\n        public boolean isEmpty() {\r\n            expire();\r\n            return super.isEmpty();\r\n        }\r\n    \r\n        @Override\r\n        public boolean contains(Object o) {\r\n            expire();\r\n            return super.contains(o);\r\n        }\r\n    \r\n        @Override\r\n        public Iterator&lt;E&gt; iterator() {\r\n            expire();\r\n            return super.iterator();\r\n        }\r\n    \r\n        @Override\r\n        public Object[] toArray() {\r\n            expire();\r\n            return super.toArray();\r\n        }\r\n    \r\n        @Override\r\n        public &lt;T&gt; T[] toArray(T[] a) {\r\n            expire();\r\n            return super.toArray(a);\r\n        }\r\n    \r\n        @Override\r\n        public boolean add(E e) {\r\n            expire();\r\n            return super.add(e);\r\n        }\r\n    \r\n        @Override\r\n        public boolean remove(Object o) {\r\n            expire();\r\n            return super.remove(o);\r\n        }\r\n    \r\n        @Override\r\n        public boolean containsAll(Collection&lt;?&gt; c) {\r\n            expire();\r\n            return super.contains(c);\r\n        }\r\n    \r\n        @Override\r\n        public boolean addAll(Collection&lt;? extends E&gt; c) {\r\n            expire();\r\n            return super.addAll(c);\r\n        }\r\n    \r\n        @Override\r\n        public boolean addAll(int index, Collection&lt;? extends E&gt; c) {\r\n            expire();\r\n            return super.addAll(index, c);\r\n        }\r\n    \r\n        @Override\r\n        public boolean removeAll(Collection&lt;?&gt; c) {\r\n            expire();\r\n            return super.removeAll(c);\r\n        }\r\n    \r\n        @Override\r\n        public boolean retainAll(Collection&lt;?&gt; c) {\r\n            expire();\r\n            return super.retainAll(c);\r\n        }\r\n        \r\n        @Override\r\n        public E get(int index) {\r\n            expire();\r\n            return super.get(index);\r\n        }\r\n    \r\n        @Override\r\n        public E set(int index, E element) {\r\n            expire();\r\n            return super.set(index, element);\r\n        }\r\n    \r\n        @Override\r\n        public E remove(int index) {\r\n            expire();\r\n            return super.remove(index);\r\n        }\r\n    \r\n        @Override\r\n        public int indexOf(Object o) {\r\n            expire();\r\n            return indexOf(o);\r\n        }\r\n    \r\n        @Override\r\n        public int lastIndexOf(Object o) {\r\n            expire();\r\n            return lastIndexOf(o);\r\n        }\r\n    \r\n        @Override\r\n        public ListIterator&lt;E&gt; listIterator() {\r\n            expire();\r\n            return listIterator();\r\n        }\r\n    \r\n        @Override\r\n        public ListIterator&lt;E&gt; listIterator(int index) {\r\n            expire();\r\n            return listIterator();\r\n        }\r\n    \r\n        @Override\r\n        public List&lt;E&gt; subList(int fromIndex, int toIndex) {\r\n            expire();\r\n            return subList(fromIndex, toIndex);\r\n        }\r\n    }\r\n    ","title":"Java time expiring List/Set?","body":"<p>You could decorate a collection implementation to do that. Something like this: </p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class ExpirableArrayList&lt;E&gt; extends ArrayList&lt;E&gt; {\n\n    private final Date creation = new Date();\n\n    private final long timeToLiveInMs;\n\n    public ExpirableArrayList(long timeToLiveInMs, int initialCapacity) {\n        super(initialCapacity);\n        this.timeToLiveInMs = timeToLiveInMs;\n    }\n\n    public ExpirableArrayList(long timeToLiveInMs) {\n        this.timeToLiveInMs = timeToLiveInMs;\n    }\n\n    public ExpirableArrayList(long timeToLiveInMs, Collection&lt;? extends E&gt; c) {\n        super(c);\n        this.timeToLiveInMs = timeToLiveInMs;\n    }\n\n    private void expire() {\n        if (System.currentTimeMillis() - creation.getTime() &gt; timeToLiveInMs) {\n            clear();\n        }\n    }\n\n    @Override\n    public int size() {\n        expire();\n        return super.size();\n    }\n\n    @Override\n    public boolean isEmpty() {\n        expire();\n        return super.isEmpty();\n    }\n\n    @Override\n    public boolean contains(Object o) {\n        expire();\n        return super.contains(o);\n    }\n\n    @Override\n    public Iterator&lt;E&gt; iterator() {\n        expire();\n        return super.iterator();\n    }\n\n    @Override\n    public Object[] toArray() {\n        expire();\n        return super.toArray();\n    }\n\n    @Override\n    public &lt;T&gt; T[] toArray(T[] a) {\n        expire();\n        return super.toArray(a);\n    }\n\n    @Override\n    public boolean add(E e) {\n        expire();\n        return super.add(e);\n    }\n\n    @Override\n    public boolean remove(Object o) {\n        expire();\n        return super.remove(o);\n    }\n\n    @Override\n    public boolean containsAll(Collection&lt;?&gt; c) {\n        expire();\n        return super.contains(c);\n    }\n\n    @Override\n    public boolean addAll(Collection&lt;? extends E&gt; c) {\n        expire();\n        return super.addAll(c);\n    }\n\n    @Override\n    public boolean addAll(int index, Collection&lt;? extends E&gt; c) {\n        expire();\n        return super.addAll(index, c);\n    }\n\n    @Override\n    public boolean removeAll(Collection&lt;?&gt; c) {\n        expire();\n        return super.removeAll(c);\n    }\n\n    @Override\n    public boolean retainAll(Collection&lt;?&gt; c) {\n        expire();\n        return super.retainAll(c);\n    }\n\n    @Override\n    public E get(int index) {\n        expire();\n        return super.get(index);\n    }\n\n    @Override\n    public E set(int index, E element) {\n        expire();\n        return super.set(index, element);\n    }\n\n    @Override\n    public E remove(int index) {\n        expire();\n        return super.remove(index);\n    }\n\n    @Override\n    public int indexOf(Object o) {\n        expire();\n        return indexOf(o);\n    }\n\n    @Override\n    public int lastIndexOf(Object o) {\n        expire();\n        return lastIndexOf(o);\n    }\n\n    @Override\n    public ListIterator&lt;E&gt; listIterator() {\n        expire();\n        return listIterator();\n    }\n\n    @Override\n    public ListIterator&lt;E&gt; listIterator(int index) {\n        expire();\n        return listIterator();\n    }\n\n    @Override\n    public List&lt;E&gt; subList(int fromIndex, int toIndex) {\n        expire();\n        return subList(fromIndex, toIndex);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1491019,"reputation":353,"user_id":1398099,"display_name":"Rabbyte"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18354,"favorite_count":0,"down_vote_count":0,"up_vote_count":25,"answer_count":3,"score":25,"last_activity_date":1691678114,"creation_date":1343083392,"question_id":11621585,"body_markdown":"I&#39;ve been looking around for a Java list, set, or something similar that has entries expire after a given time period, but I have yet to find one. I&#39;ve found Guava&#39;s [`CacheBuilder`][1], which would be almost perfect for my use, but that it is a map rather than a List or Set. Is there already something out there like this, or will I have to make one if I want to use it?\r\n\r\n\r\n  [1]: https://guava.dev/releases/snapshot-jre/api/docs/com/google/common/cache/CacheBuilder.html","title":"Java time expiring List/Set?","body":"<p>I've been looking around for a Java list, set, or something similar that has entries expire after a given time period, but I have yet to find one. I've found Guava's <a href=\"https://guava.dev/releases/snapshot-jre/api/docs/com/google/common/cache/CacheBuilder.html\" rel=\"nofollow noreferrer\"><code>CacheBuilder</code></a>, which would be almost perfect for my use, but that it is a map rather than a List or Set. Is there already something out there like this, or will I have to make one if I want to use it?</p>\n"},{"tags":["java","spring","mocking","spring-test-mvc"],"comments":[{"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":27,"creation_date":1377005586,"post_id":18336277,"comment_id":26914113,"body_markdown":"Just as advice, 400 status code shouldn&#39;t be returned for something like `&quot;Username already taken&quot;`. That should be more of a 409 Conflict.","body":"Just as advice, 400 status code shouldn&#39;t be returned for something like <code>&quot;Username already taken&quot;</code>. That should be more of a 409 Conflict."},{"owner":{"account_id":1320022,"reputation":23263,"user_id":1266040,"accept_rate":69,"display_name":"pbaranski"},"score":1,"creation_date":1377019304,"post_id":18336277,"comment_id":26922654,"body_markdown":"Thanx - the goal of this test is to specify such things.","body":"Thanx - the goal of this test is to specify such things."}],"answers":[{"tags":[],"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"comment_count":0,"down_vote_count":4,"up_vote_count":534,"is_accepted":false,"score":530,"last_activity_date":1668698041,"creation_date":1377005783,"answer_id":18336481,"question_id":18336277,"body_markdown":"You can call [`andReturn()`][1] and use the returned [`MvcResult`][2] object to get the content as a `String`.\r\n\r\nSee below:\r\n\r\n    MvcResult result = mockMvc.perform(post(&quot;/api/users&quot;).header(&quot;Authorization&quot;, base64ForTestUser).contentType(MediaType.APPLICATION_JSON)\r\n                .content(&quot;{\\&quot;userName\\&quot;:\\&quot;testUserDetails\\&quot;,\\&quot;firstName\\&quot;:\\&quot;xxx\\&quot;,\\&quot;lastName\\&quot;:\\&quot;xxx\\&quot;,\\&quot;password\\&quot;:\\&quot;xxx\\&quot;}&quot;))\r\n                .andDo(MockMvcResultHandlers.print())\r\n                .andExpect(status().isBadRequest())\r\n                .andReturn();\r\n    \r\n    String content = result.getResponse().getContentAsString();\r\n    // do what you will \r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/web/servlet/ResultActions.html#andReturn()\r\n  [2]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/web/servlet/MvcResult.html","title":"How to check String in response body with mockMvc","body":"<p>You can call <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/web/servlet/ResultActions.html#andReturn()\" rel=\"noreferrer\"><code>andReturn()</code></a> and use the returned <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/web/servlet/MvcResult.html\" rel=\"noreferrer\"><code>MvcResult</code></a> object to get the content as a <code>String</code>.</p>\n<p>See below:</p>\n<pre><code>MvcResult result = mockMvc.perform(post(&quot;/api/users&quot;).header(&quot;Authorization&quot;, base64ForTestUser).contentType(MediaType.APPLICATION_JSON)\n            .content(&quot;{\\&quot;userName\\&quot;:\\&quot;testUserDetails\\&quot;,\\&quot;firstName\\&quot;:\\&quot;xxx\\&quot;,\\&quot;lastName\\&quot;:\\&quot;xxx\\&quot;,\\&quot;password\\&quot;:\\&quot;xxx\\&quot;}&quot;))\n            .andDo(MockMvcResultHandlers.print())\n            .andExpect(status().isBadRequest())\n            .andReturn();\n\nString content = result.getResponse().getContentAsString();\n// do what you will \n</code></pre>\n"},{"comments":[{"owner":{"account_id":142190,"reputation":2002,"user_id":349731,"accept_rate":100,"display_name":"molholm"},"score":26,"creation_date":1401106464,"post_id":18341107,"comment_id":36741341,"body_markdown":"Just in case someone has messages with dynamic IDs, like i did, it is helpfully to know that the string() method also accepts a hamcrest *containsString* matcher: `.andExpect(content().string(containsString(&quot;\\&quot;Username already taken&quot;);`","body":"Just in case someone has messages with dynamic IDs, like i did, it is helpfully to know that the string() method also accepts a hamcrest <i>containsString</i> matcher: <code>.andExpect(content().string(containsString(&quot;\\&quot;Username already taken&quot;);</code>"},{"owner":{"account_id":62234,"reputation":19819,"user_id":185034,"accept_rate":100,"display_name":"Paul"},"score":4,"creation_date":1418237938,"post_id":18341107,"comment_id":43261899,"body_markdown":"@TimB&#252;the, that is incorrect.  If you&#39;ve got such a problem you should post it as a question because that is definitely not the expected behavior nor is it behavior I&#39;ve witnessed in my own code.","body":"@TimB&#252;the, that is incorrect.  If you&#39;ve got such a problem you should post it as a question because that is definitely not the expected behavior nor is it behavior I&#39;ve witnessed in my own code."},{"owner":{"account_id":1229539,"reputation":82701,"user_id":1194415,"accept_rate":76,"display_name":"membersound"},"score":2,"creation_date":1576496661,"post_id":18341107,"comment_id":104906506,"body_markdown":"Just note that the import is `org.hamcrest.Matchers.containsString()`.","body":"Just note that the import is <code>org.hamcrest.Matchers.containsString()</code>."},{"owner":{"account_id":1626128,"reputation":3775,"user_id":1501661,"accept_rate":90,"display_name":"Iwo Kucharski"},"score":1,"creation_date":1586436196,"post_id":18341107,"comment_id":108130739,"body_markdown":"I also used `org.hamcrest.Matchers.equalToIgnoringWhiteSpace()` matcher to ignore all white-space characters. Maybe it will be useful tip for someone","body":"I also used <code>org.hamcrest.Matchers.equalToIgnoringWhiteSpace()</code> matcher to ignore all white-space characters. Maybe it will be useful tip for someone"},{"owner":{"account_id":7263023,"reputation":447,"user_id":5538923,"display_name":"marcor92"},"score":0,"creation_date":1660214904,"post_id":18341107,"comment_id":129482521,"body_markdown":"To check for any object (not just a string), in my case it worked by extending the BaseMatcher class, as explained in the StackOverflow question here: https://stackoverflow.com/a/47719850/5538923","body":"To check for any object (not just a string), in my case it worked by extending the BaseMatcher class, as explained in the StackOverflow question here: <a href=\"https://stackoverflow.com/a/47719850/5538923\">stackoverflow.com/a/47719850/5538923</a>"}],"tags":[],"owner":{"account_id":1320022,"reputation":23263,"user_id":1266040,"accept_rate":69,"display_name":"pbaranski"},"comment_count":5,"down_vote_count":1,"up_vote_count":169,"is_accepted":true,"score":168,"last_activity_date":1377018823,"creation_date":1377018823,"answer_id":18341107,"question_id":18336277,"body_markdown":"@Sotirios Delimanolis answer do the job however I was looking for comparing strings within this mockMvc assertion\r\n\r\nSo here it is \r\n\r\n    .andExpect(content().string(&quot;\\&quot;Username already taken - please try with different username\\&quot;&quot;));\r\n\r\nOf course my assertion fail:\r\n\r\n    java.lang.AssertionError: Response content expected:\r\n    &lt;&quot;Username already taken - please try with different username&quot;&gt; but was:&lt;&quot;Something gone wrong&quot;&gt;\r\n\r\nbecause:\r\n\r\n      MockHttpServletResponse:\r\n                Body = &quot;Something gone wrong&quot;\r\n\r\nSo this is proof that it works!\r\n","title":"How to check String in response body with mockMvc","body":"<p>@Sotirios Delimanolis answer do the job however I was looking for comparing strings within this mockMvc assertion</p>\n\n<p>So here it is </p>\n\n<pre><code>.andExpect(content().string(\"\\\"Username already taken - please try with different username\\\"\"));\n</code></pre>\n\n<p>Of course my assertion fail:</p>\n\n<pre><code>java.lang.AssertionError: Response content expected:\n&lt;\"Username already taken - please try with different username\"&gt; but was:&lt;\"Something gone wrong\"&gt;\n</code></pre>\n\n<p>because:</p>\n\n<pre><code>  MockHttpServletResponse:\n            Body = \"Something gone wrong\"\n</code></pre>\n\n<p>So this is proof that it works!</p>\n"},{"comments":[{"owner":{"account_id":1298254,"reputation":2903,"user_id":1248724,"accept_rate":67,"display_name":"Zarathustra"},"score":2,"creation_date":1437128501,"post_id":30703950,"comment_id":50912382,"body_markdown":"could you provide a full example? Doesen&#39;t need `ContentRequestMatchers` to support this feature as well?","body":"could you provide a full example? Doesen&#39;t need <code>ContentRequestMatchers</code> to support this feature as well?"}],"tags":[],"owner":{"account_id":452783,"reputation":7609,"user_id":849402,"accept_rate":89,"display_name":"vertti"},"comment_count":1,"down_vote_count":0,"up_vote_count":91,"is_accepted":false,"score":91,"last_activity_date":1468971177,"creation_date":1433750559,"answer_id":30703950,"question_id":18336277,"body_markdown":"Spring MockMvc now has direct support for JSON. So you just say:\r\n\r\n    .andExpect(content().json(&quot;{&#39;message&#39;:&#39;ok&#39;}&quot;));\r\n\r\nand unlike string comparison, it will say something like &quot;missing field xyz&quot; or &quot;message Expected &#39;ok&#39; got &#39;nok&#39;.\r\n\r\nThis method was introduced in Spring 4.1.","title":"How to check String in response body with mockMvc","body":"<p>Spring MockMvc now has direct support for JSON. So you just say:</p>\n\n<pre><code>.andExpect(content().json(\"{'message':'ok'}\"));\n</code></pre>\n\n<p>and unlike string comparison, it will say something like \"missing field xyz\" or \"message Expected 'ok' got 'nok'.</p>\n\n<p>This method was introduced in Spring 4.1.</p>\n"},{"comments":[{"owner":{"account_id":1160681,"reputation":5035,"user_id":1140237,"accept_rate":25,"display_name":"user1140237"},"score":0,"creation_date":1452318428,"post_id":34688967,"comment_id":57126683,"body_markdown":"wheres explanation ? it is needed or you can give it in comment this type of answer","body":"wheres explanation ? it is needed or you can give it in comment this type of answer"}],"tags":[],"owner":{"account_id":5043431,"reputation":387,"user_id":4050148,"accept_rate":40,"display_name":"justAnotherGuy"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1464120480,"creation_date":1452305413,"answer_id":34688967,"question_id":18336277,"body_markdown":"    String body = mockMvc.perform(bla... bla).andReturn().getResolvedException().getMessage()\r\n\r\nThis should give you the body of the response. &quot;Username already taken&quot; in your case.","title":"How to check String in response body with mockMvc","body":"<pre><code>String body = mockMvc.perform(bla... bla).andReturn().getResolvedException().getMessage()\n</code></pre>\n\n<p>This should give you the body of the response. \"Username already taken\" in your case.</p>\n"},{"comments":[{"owner":{"account_id":1876444,"reputation":2828,"user_id":1697575,"accept_rate":100,"display_name":"user1697575"},"score":1,"creation_date":1569009565,"post_id":35226506,"comment_id":102470998,"body_markdown":"kudos for &quot;.andExpect(MockMvcResultMatchers.jsonPath(&quot;$.data&quot;).value(expectedData))&quot;","body":"kudos for &quot;.andExpect(MockMvcResultMatchers.jsonPath(&quot;$.data&quot;).value(e&zwnj;&#8203;xpectedData))&quot;"},{"owner":{"account_id":320962,"reputation":31681,"user_id":639520,"accept_rate":72,"display_name":"E-Riz"},"score":0,"creation_date":1678130047,"post_id":35226506,"comment_id":133470312,"body_markdown":"If you statically import `MockMvcResultMatchers.jsonPath` and Hamcrest `Matchers.*` then these tests read more clearly: `.andExpect(jsonPath(&quot;$.emailAddress&quot;, is(expectedEmailAddress)))`","body":"If you statically import <code>MockMvcResultMatchers.jsonPath</code> and Hamcrest <code>Matchers.*</code> then these tests read more clearly: <code>.andExpect(jsonPath(&quot;$.emailAddress&quot;, is(expectedEmailAddress)))</code>"}],"tags":[],"owner":{"account_id":253638,"reputation":3428,"user_id":532489,"accept_rate":71,"display_name":"Jeremy"},"comment_count":2,"down_vote_count":0,"up_vote_count":75,"is_accepted":false,"score":75,"last_activity_date":1454682958,"creation_date":1454682293,"answer_id":35226506,"question_id":18336277,"body_markdown":"Reading these answers, I can see a lot relating to Spring version 4.x, I am using version 3.2.0 for various reasons. So things like json support straight from the ```content()``` is not possible.\r\n\r\nI found that using ```MockMvcResultMatchers.jsonPath``` is really easy and works a treat. Here is an example testing a post method.\r\n\r\nThe bonus with this solution is that you&#39;re still matching on attributes, not relying on full json string comparisons.\r\n\r\n(Using ```org.springframework.test.web.servlet.result.MockMvcResultMatchers```)\r\n\r\n    String expectedData = &quot;some value&quot;;\r\n    mockMvc.perform(post(&quot;/endPoint&quot;)\r\n                    .contentType(MediaType.APPLICATION_JSON)\r\n                    .content(mockRequestBodyAsString.getBytes()))\r\n                    .andExpect(status().isOk())\r\n                    .andExpect(MockMvcResultMatchers.jsonPath(&quot;$.data&quot;).value(expectedData));\r\n\r\nThe request body was just a json string, which you can easily load from a real json mock data file if you wanted, but I didnt include that here as it would have deviated from the question.\r\n\r\nThe actual json returned would have looked like this:\r\n\r\n    {\r\n        &quot;data&quot;:&quot;some value&quot;\r\n    }\r\n\r\n","title":"How to check String in response body with mockMvc","body":"<p>Reading these answers, I can see a lot relating to Spring version 4.x, I am using version 3.2.0 for various reasons. So things like json support straight from the <code>content()</code> is not possible.</p>\n\n<p>I found that using <code>MockMvcResultMatchers.jsonPath</code> is really easy and works a treat. Here is an example testing a post method.</p>\n\n<p>The bonus with this solution is that you're still matching on attributes, not relying on full json string comparisons.</p>\n\n<p>(Using <code>org.springframework.test.web.servlet.result.MockMvcResultMatchers</code>)</p>\n\n<pre><code>String expectedData = \"some value\";\nmockMvc.perform(post(\"/endPoint\")\n                .contentType(MediaType.APPLICATION_JSON)\n                .content(mockRequestBodyAsString.getBytes()))\n                .andExpect(status().isOk())\n                .andExpect(MockMvcResultMatchers.jsonPath(\"$.data\").value(expectedData));\n</code></pre>\n\n<p>The request body was just a json string, which you can easily load from a real json mock data file if you wanted, but I didnt include that here as it would have deviated from the question.</p>\n\n<p>The actual json returned would have looked like this:</p>\n\n<pre><code>{\n    \"data\":\"some value\"\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":250258,"reputation":3515,"user_id":1399539,"accept_rate":91,"display_name":"Michael W"},"comment_count":0,"down_vote_count":0,"up_vote_count":31,"is_accepted":false,"score":31,"last_activity_date":1509841022,"creation_date":1509841022,"answer_id":47116960,"question_id":18336277,"body_markdown":"Spring security&#39;s `@WithMockUser` and hamcrest&#39;s `containsString` matcher makes for a simple and elegant solution:\r\n\r\n    @Test\r\n\t@WithMockUser(roles = &quot;USER&quot;)\r\n\tpublic void loginWithRoleUserThenExpectUserSpecificContent() throws Exception {\r\n\t\tmockMvc.perform(get(&quot;/index&quot;))\r\n\t\t\t\t.andExpect(status().isOk())\r\n\t\t\t\t.andExpect(content().string(containsString(&quot;This content is only shown to users.&quot;)));\r\n\t}\r\n\r\n\r\n[More examples on github][1]\r\n\r\n\r\n  [1]: https://github.com/MWhyte/spring-security-basic/blob/master/src/test/java/com/codenerve/spring/sec/ApplicationTests.java","title":"How to check String in response body with mockMvc","body":"<p>Spring security's <code>@WithMockUser</code> and hamcrest's <code>containsString</code> matcher makes for a simple and elegant solution:</p>\n\n<pre><code>@Test\n@WithMockUser(roles = \"USER\")\npublic void loginWithRoleUserThenExpectUserSpecificContent() throws Exception {\n    mockMvc.perform(get(\"/index\"))\n            .andExpect(status().isOk())\n            .andExpect(content().string(containsString(\"This content is only shown to users.\")));\n}\n</code></pre>\n\n<p><a href=\"https://github.com/MWhyte/spring-security-basic/blob/master/src/test/java/com/codenerve/spring/sec/ApplicationTests.java\" rel=\"noreferrer\">More examples on github</a></p>\n"},{"comments":[{"owner":{"account_id":41235,"reputation":20401,"user_id":119790,"accept_rate":72,"display_name":"Ian Vaughan"},"score":2,"creation_date":1549031418,"post_id":48784872,"comment_id":95770004,"body_markdown":"I get `error: incompatible types: RequestMatcher cannot be converted to ResultMatcher\n` for `.andExpect(content().contentType(contentType))`","body":"I get <code>error: incompatible types: RequestMatcher cannot be converted to ResultMatcher </code> for <code>.andExpect(content().contentType(contentType))</code>"},{"owner":{"account_id":1466149,"reputation":122,"user_id":1378901,"display_name":"Rajkumar"},"score":0,"creation_date":1581613762,"post_id":48784872,"comment_id":106504257,"body_markdown":"@IanVaughan\nMockMvcResultMatchers.content().contentType(contentType)","body":"@IanVaughan MockMvcResultMatchers.content().contentType(contentType)"}],"tags":[],"owner":{"account_id":3370433,"reputation":3392,"user_id":2829759,"accept_rate":39,"display_name":"user2829759"},"comment_count":2,"down_vote_count":0,"up_vote_count":48,"is_accepted":false,"score":48,"last_activity_date":1576847478,"creation_date":1518604055,"answer_id":48784872,"question_id":18336277,"body_markdown":"Taken from spring&#39;s [tutorial](https://spring.io/guides/tutorials/bookmarks/)\r\n\r\n```java\r\nmockMvc.perform(get(&quot;/&quot; + userName + &quot;/bookmarks/&quot; \r\n    + this.bookmarkList.get(0).getId()))\r\n    .andExpect(status().isOk())\r\n    .andExpect(content().contentType(contentType))\r\n    .andExpect(jsonPath(&quot;$.id&quot;, is(this.bookmarkList.get(0).getId().intValue())))\r\n    .andExpect(jsonPath(&quot;$.uri&quot;, is(&quot;http://bookmark.com/1/&quot; + userName)))\r\n    .andExpect(jsonPath(&quot;$.description&quot;, is(&quot;A description&quot;)));\r\n```\r\n`is` is available from `import static org.hamcrest.Matchers.*;`\r\n\r\n`jsonPath` is available from `import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.jsonPath;`\r\n\r\nand `jsonPath` reference can be found [here](https://github.com/json-path/JsonPath)","title":"How to check String in response body with mockMvc","body":"<p>Taken from spring's <a href=\"https://spring.io/guides/tutorials/bookmarks/\" rel=\"noreferrer\">tutorial</a></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>mockMvc.perform(get(\"/\" + userName + \"/bookmarks/\" \n    + this.bookmarkList.get(0).getId()))\n    .andExpect(status().isOk())\n    .andExpect(content().contentType(contentType))\n    .andExpect(jsonPath(\"$.id\", is(this.bookmarkList.get(0).getId().intValue())))\n    .andExpect(jsonPath(\"$.uri\", is(\"http://bookmark.com/1/\" + userName)))\n    .andExpect(jsonPath(\"$.description\", is(\"A description\")));\n</code></pre>\n\n<p><code>is</code> is available from <code>import static org.hamcrest.Matchers.*;</code></p>\n\n<p><code>jsonPath</code> is available from <code>import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.jsonPath;</code></p>\n\n<p>and <code>jsonPath</code> reference can be found <a href=\"https://github.com/json-path/JsonPath\" rel=\"noreferrer\">here</a></p>\n"},{"tags":[],"owner":{"account_id":8341509,"reputation":131,"user_id":6266697,"display_name":"Ricardo Ribeiro"},"comment_count":0,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1565117074,"creation_date":1565117074,"answer_id":57382212,"question_id":18336277,"body_markdown":"here a more elegant way\r\n\r\n    mockMvc.perform(post(&quot;/retrieve?page=1&amp;countReg=999999&quot;)\r\n                .header(&quot;Authorization&quot;, &quot;Bearer &quot; + validToken))\r\n                .andExpect(status().isOk())\r\n                .andExpect(content().string(containsString(&quot;regCount&quot;)));","title":"How to check String in response body with mockMvc","body":"<p>here a more elegant way</p>\n\n<pre><code>mockMvc.perform(post(\"/retrieve?page=1&amp;countReg=999999\")\n            .header(\"Authorization\", \"Bearer \" + validToken))\n            .andExpect(status().isOk())\n            .andExpect(content().string(containsString(\"regCount\")));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1044212,"reputation":3002,"user_id":1049542,"accept_rate":36,"display_name":"Sergey Ponomarev"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1598756169,"creation_date":1565339560,"answer_id":57426258,"question_id":18336277,"body_markdown":"Here is an example how to parse JSON response and even how to send a request with a bean in JSON form:\r\n\r\n```\r\n  @Autowired\r\n  protected MockMvc mvc;\r\n\r\n  private static final ObjectMapper MAPPER = new ObjectMapper()\r\n    .configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, false)\r\n    .configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false)\r\n    .registerModule(new JavaTimeModule());\r\n\r\n  public static String requestBody(Object request) {\r\n    try {\r\n      return MAPPER.writeValueAsString(request);\r\n    } catch (JsonProcessingException e) {\r\n      throw new RuntimeException(e);\r\n    }\r\n  }\r\n\r\n  public static &lt;T&gt; T parseResponse(MvcResult result, Class&lt;T&gt; responseClass) {\r\n    try {\r\n      String contentAsString = result.getResponse().getContentAsString();\r\n      return MAPPER.readValue(contentAsString, responseClass);\r\n    } catch (IOException e) {\r\n      throw new RuntimeException(e);\r\n    }\r\n  }\r\n\r\n  @Test\r\n  public void testUpdate() {\r\n    Book book = new Book();\r\n    book.setTitle(&quot;1984&quot;);\r\n    book.setAuthor(&quot;Orwell&quot;);\r\n    MvcResult requestResult = mvc.perform(post(&quot;http://example.com/book/&quot;)\r\n      .contentType(MediaType.APPLICATION_JSON)\r\n      .content(requestBody(book)))\r\n      .andExpect(status().isOk())\r\n      .andReturn();\r\n    UpdateBookResponse updateBookResponse = parseResponse(requestResult, UpdateBookResponse.class);\r\n    assertEquals(&quot;1984&quot;, updateBookResponse.getTitle());\r\n    assertEquals(&quot;Orwell&quot;, updateBookResponse.getAuthor());\r\n  }\r\n```\r\n\r\nAs you can see here the `Book` is a request DTO and the `UpdateBookResponse` is a response object parsed from JSON. You may want to change the Jackson&#39;s `ObjectMapper` configuration.","title":"How to check String in response body with mockMvc","body":"<p>Here is an example how to parse JSON response and even how to send a request with a bean in JSON form:</p>\n<pre><code>  @Autowired\n  protected MockMvc mvc;\n\n  private static final ObjectMapper MAPPER = new ObjectMapper()\n    .configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, false)\n    .configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false)\n    .registerModule(new JavaTimeModule());\n\n  public static String requestBody(Object request) {\n    try {\n      return MAPPER.writeValueAsString(request);\n    } catch (JsonProcessingException e) {\n      throw new RuntimeException(e);\n    }\n  }\n\n  public static &lt;T&gt; T parseResponse(MvcResult result, Class&lt;T&gt; responseClass) {\n    try {\n      String contentAsString = result.getResponse().getContentAsString();\n      return MAPPER.readValue(contentAsString, responseClass);\n    } catch (IOException e) {\n      throw new RuntimeException(e);\n    }\n  }\n\n  @Test\n  public void testUpdate() {\n    Book book = new Book();\n    book.setTitle(&quot;1984&quot;);\n    book.setAuthor(&quot;Orwell&quot;);\n    MvcResult requestResult = mvc.perform(post(&quot;http://example.com/book/&quot;)\n      .contentType(MediaType.APPLICATION_JSON)\n      .content(requestBody(book)))\n      .andExpect(status().isOk())\n      .andReturn();\n    UpdateBookResponse updateBookResponse = parseResponse(requestResult, UpdateBookResponse.class);\n    assertEquals(&quot;1984&quot;, updateBookResponse.getTitle());\n    assertEquals(&quot;Orwell&quot;, updateBookResponse.getAuthor());\n  }\n</code></pre>\n<p>As you can see here the <code>Book</code> is a request DTO and the <code>UpdateBookResponse</code> is a response object parsed from JSON. You may want to change the Jackson's <code>ObjectMapper</code> configuration.</p>\n"},{"tags":[],"owner":{"account_id":4008309,"reputation":3688,"user_id":3302424,"accept_rate":70,"display_name":"Hari Krishna"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1599398173,"creation_date":1578472351,"answer_id":59642068,"question_id":18336277,"body_markdown":"You can use `getContentAsString` method to get the response data as string.\r\n\r\n        String payload = &quot;....&quot;;\r\n        String apiToTest = &quot;....&quot;;\r\n        \r\n        MvcResult mvcResult = mockMvc.\r\n        \t\t\tperform(post(apiToTest).\r\n        \t\t\tcontent(payload).\r\n        \t\t\tcontentType(MediaType.APPLICATION_JSON)).\r\n        \t\t\tandReturn();\r\n        \r\n        String responseData = mvcResult.getResponse().getContentAsString();\r\n\r\n\r\nYou can refer this [link][1] for test application.\r\n\r\n\r\n  [1]: https://self-learning-java-tutorial.blogspot.com/2019/10/spring-boot-write-unit-tests-for.html","title":"How to check String in response body with mockMvc","body":"<p>You can use <code>getContentAsString</code> method to get the response data as string.</p>\n<pre><code>    String payload = &quot;....&quot;;\n    String apiToTest = &quot;....&quot;;\n    \n    MvcResult mvcResult = mockMvc.\n                perform(post(apiToTest).\n                content(payload).\n                contentType(MediaType.APPLICATION_JSON)).\n                andReturn();\n    \n    String responseData = mvcResult.getResponse().getContentAsString();\n</code></pre>\n<p>You can refer this <a href=\"https://self-learning-java-tutorial.blogspot.com/2019/10/spring-boot-write-unit-tests-for.html\" rel=\"nofollow noreferrer\">link</a> for test application.</p>\n"},{"tags":[],"owner":{"account_id":1202806,"reputation":23223,"user_id":1173112,"accept_rate":89,"display_name":"Koray Tugay"},"comment_count":0,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1599398327,"creation_date":1592174262,"answer_id":62379012,"question_id":18336277,"body_markdown":"One possible approach is to simply include `gson` dependency:\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\r\n    &lt;artifactId&gt;gson&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nand parse the value to make your verifications:\r\n\r\n```java\r\n@RunWith(SpringRunner.class)\r\n@WebMvcTest(HelloController.class)\r\npublic class HelloControllerTest {\r\n\r\n    @Autowired\r\n    private MockMvc mockMvc;\r\n\r\n    @MockBean\r\n    private HelloService helloService;\r\n\r\n    @Before\r\n    public void before() {\r\n        Mockito.when(helloService.message()).thenReturn(&quot;hello world!&quot;);\r\n    }\r\n\r\n    @Test\r\n    public void testMessage() throws Exception {\r\n        MvcResult mvcResult = mockMvc.perform(MockMvcRequestBuilders.get(&quot;/&quot;))\r\n                .andExpect(status().isOk())\r\n                .andExpect(content().contentTypeCompatibleWith(MediaType.APPLICATION_JSON_VALUE))\r\n                .andReturn();\r\n\r\n        String responseBody = mvcResult.getResponse().getContentAsString();\r\n        ResponseDto responseDto\r\n                = new Gson().fromJson(responseBody, ResponseDto.class);\r\n        Assertions.assertThat(responseDto.message).isEqualTo(&quot;hello world!&quot;);\r\n    }\r\n}\r\n```","title":"How to check String in response body with mockMvc","body":"<p>One possible approach is to simply include <code>gson</code> dependency:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\n    &lt;artifactId&gt;gson&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>and parse the value to make your verifications:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RunWith(SpringRunner.class)\n@WebMvcTest(HelloController.class)\npublic class HelloControllerTest {\n\n    @Autowired\n    private MockMvc mockMvc;\n\n    @MockBean\n    private HelloService helloService;\n\n    @Before\n    public void before() {\n        Mockito.when(helloService.message()).thenReturn(&quot;hello world!&quot;);\n    }\n\n    @Test\n    public void testMessage() throws Exception {\n        MvcResult mvcResult = mockMvc.perform(MockMvcRequestBuilders.get(&quot;/&quot;))\n                .andExpect(status().isOk())\n                .andExpect(content().contentTypeCompatibleWith(MediaType.APPLICATION_JSON_VALUE))\n                .andReturn();\n\n        String responseBody = mvcResult.getResponse().getContentAsString();\n        ResponseDto responseDto\n                = new Gson().fromJson(responseBody, ResponseDto.class);\n        Assertions.assertThat(responseDto.message).isEqualTo(&quot;hello world!&quot;);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3481319,"reputation":876,"user_id":2913290,"accept_rate":50,"display_name":"Daniel Vilas-Boas"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1601339881,"creation_date":1601339881,"answer_id":64111350,"question_id":18336277,"body_markdown":"Another option is:\r\n\r\n    when:\r\n    \r\n    def response = mockMvc.perform(\r\n                get(&#39;/path/to/api&#39;)\r\n                .header(&quot;Content-Type&quot;, &quot;application/json&quot;))\r\n\r\n    then:\r\n    \r\n    response.andExpect(status().isOk())\r\n    response.andReturn().getResponse().getContentAsString() == &quot;what you expect&quot;","title":"How to check String in response body with mockMvc","body":"<p>Another option is:</p>\n<pre><code>when:\n\ndef response = mockMvc.perform(\n            get('/path/to/api')\n            .header(&quot;Content-Type&quot;, &quot;application/json&quot;))\n\nthen:\n\nresponse.andExpect(status().isOk())\nresponse.andReturn().getResponse().getContentAsString() == &quot;what you expect&quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13936451,"reputation":71,"user_id":10063334,"display_name":"NXT Dev"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1653481099,"creation_date":1653481099,"answer_id":72377515,"question_id":18336277,"body_markdown":"Another example is:                                  \r\n\r\n`.andExpect(jsonPath(&quot;$&quot;).value(containsString(&quot;You have successfully deleted&quot;)));`\r\n\r\n\r\nThe body response:\r\n\r\n`Body = You have successfully deleted a [Object] with ID: 1`\r\n\r\n\r\n","title":"How to check String in response body with mockMvc","body":"<p>Another example is:</p>\n<p><code>.andExpect(jsonPath(&quot;$&quot;).value(containsString(&quot;You have successfully deleted&quot;)));</code></p>\n<p>The body response:</p>\n<p><code>Body = You have successfully deleted a [Object] with ID: 1</code></p>\n"},{"tags":[],"owner":{"account_id":11025680,"reputation":184,"user_id":8098669,"display_name":"neshant sharma"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1667062712,"creation_date":1667062712,"answer_id":74247170,"question_id":18336277,"body_markdown":"Here is a more production ready way of doing it where you if you may have big json responses then you do not have to clutter your test files with json strings, just load them from static Resources folder and assert them directly.\r\n\r\n```\r\n  @Test\r\n  @DisplayName(&quot;invalid fields&quot;)\r\n  void invalidfields() throws Exception {\r\n\r\n    String request = getResourceFileAsString(&quot;test-data/http-request/invalid-fields.json&quot;);\r\n    String response_file_path = &quot;test-data/http-response/error-messages/invalid-fields.json&quot;;\r\n    String expected_response = getResourceFileAsString(response_file_path);\r\n\r\n    mockMvc.perform(evaluateRulesOnData(TRACKING_ID.toString(), request))\r\n        .andExpect(status().isBadRequest())\r\n        .andExpect(content().json(expected_response));\r\n  }\r\n```\r\nhelper function to load test files from classpath\r\n\r\n```\r\n  public static String getResourceFileAsString(String fileName) throws IOException {\r\n    Resource resource = new ClassPathResource(fileName);\r\n    File file = resource.getFile();\r\n    return new String(Files.readAllBytes(file.toPath()));\r\n  }\r\n```\r\n\r\nThe expected response has an array with many elements in the list which are matched despite being in random order during each test run.\r\n\r\n","title":"How to check String in response body with mockMvc","body":"<p>Here is a more production ready way of doing it where you if you may have big json responses then you do not have to clutter your test files with json strings, just load them from static Resources folder and assert them directly.</p>\n<pre><code>  @Test\n  @DisplayName(&quot;invalid fields&quot;)\n  void invalidfields() throws Exception {\n\n    String request = getResourceFileAsString(&quot;test-data/http-request/invalid-fields.json&quot;);\n    String response_file_path = &quot;test-data/http-response/error-messages/invalid-fields.json&quot;;\n    String expected_response = getResourceFileAsString(response_file_path);\n\n    mockMvc.perform(evaluateRulesOnData(TRACKING_ID.toString(), request))\n        .andExpect(status().isBadRequest())\n        .andExpect(content().json(expected_response));\n  }\n</code></pre>\n<p>helper function to load test files from classpath</p>\n<pre><code>  public static String getResourceFileAsString(String fileName) throws IOException {\n    Resource resource = new ClassPathResource(fileName);\n    File file = resource.getFile();\n    return new String(Files.readAllBytes(file.toPath()));\n  }\n</code></pre>\n<p>The expected response has an array with many elements in the list which are matched despite being in random order during each test run.</p>\n"},{"tags":[],"owner":{"account_id":1622089,"reputation":17709,"user_id":1498427,"accept_rate":89,"display_name":"catch23"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691678006,"creation_date":1691678006,"answer_id":76876751,"question_id":18336277,"body_markdown":"If your response is JSON and it is not so small you could do like following.\r\n\r\nCreate utility class:\r\n\r\n```\r\n@UtilityClass\r\npublic class FileUtils {\r\n    public String readFromFile(String fileName) throws IOException {\r\n        String filePath = String.format(&quot;responses/%s&quot;, fileName);\r\n        File resource = new ClassPathResource(filePath).getFile();\r\n        byte[] byteArray = Files.readAllBytes(resource.toPath());\r\n        return new String(byteArray);\r\n    }\r\n}\r\n```\r\n\r\nAnd use it directly from your tests for example:\r\n\r\n```\r\n@Test\r\nvoid getAllDepartments() throws Exception {\r\n    mockMvc.perform(get(&quot;/v1/departments&quot;)\r\n                    .header(AUTHORIZATION_HEADER, generateToken())\r\n                    .contentType(MediaType.APPLICATION_JSON_VALUE))\r\n            .andDo(print())\r\n            .andExpect(status().isOk())\r\n            .andExpect(content().json(FileUtils.readFromFile(&quot;departments-response.json&quot;)));\r\n}\r\n```\r\n\r\nwhere `departments-response.json` is:\r\n\r\n```\r\n[\r\n  {\r\n    &quot;id&quot;: 1,\r\n    &quot;name&quot;: &quot;Gryffindor&quot;\r\n  },\r\n  {\r\n    &quot;id&quot;: 2,\r\n    &quot;name&quot;: &quot;Hufflepuff&quot;\r\n  }\r\n]\r\n```","title":"How to check String in response body with mockMvc","body":"<p>If your response is JSON and it is not so small you could do like following.</p>\n<p>Create utility class:</p>\n<pre><code>@UtilityClass\npublic class FileUtils {\n    public String readFromFile(String fileName) throws IOException {\n        String filePath = String.format(&quot;responses/%s&quot;, fileName);\n        File resource = new ClassPathResource(filePath).getFile();\n        byte[] byteArray = Files.readAllBytes(resource.toPath());\n        return new String(byteArray);\n    }\n}\n</code></pre>\n<p>And use it directly from your tests for example:</p>\n<pre><code>@Test\nvoid getAllDepartments() throws Exception {\n    mockMvc.perform(get(&quot;/v1/departments&quot;)\n                    .header(AUTHORIZATION_HEADER, generateToken())\n                    .contentType(MediaType.APPLICATION_JSON_VALUE))\n            .andDo(print())\n            .andExpect(status().isOk())\n            .andExpect(content().json(FileUtils.readFromFile(&quot;departments-response.json&quot;)));\n}\n</code></pre>\n<p>where <code>departments-response.json</code> is:</p>\n<pre><code>[\n  {\n    &quot;id&quot;: 1,\n    &quot;name&quot;: &quot;Gryffindor&quot;\n  },\n  {\n    &quot;id&quot;: 2,\n    &quot;name&quot;: &quot;Hufflepuff&quot;\n  }\n]\n</code></pre>\n"}],"owner":{"account_id":1320022,"reputation":23263,"user_id":1266040,"accept_rate":69,"display_name":"pbaranski"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":523059,"favorite_count":0,"down_vote_count":0,"up_vote_count":381,"accepted_answer_id":18341107,"answer_count":15,"score":381,"last_activity_date":1691678006,"creation_date":1377005117,"question_id":18336277,"body_markdown":"I have simple integration test \r\n\r\n```java\r\n@Test\r\npublic void shouldReturnErrorMessageToAdminWhenCreatingUserWithUsedUserName() throws Exception {\r\n    mockMvc.perform(post(&quot;/api/users&quot;).header(&quot;Authorization&quot;, base64ForTestUser).contentType(MediaType.APPLICATION_JSON)\r\n        .content(&quot;{\\&quot;userName\\&quot;:\\&quot;testUserDetails\\&quot;,\\&quot;firstName\\&quot;:\\&quot;xxx\\&quot;,\\&quot;lastName\\&quot;:\\&quot;xxx\\&quot;,\\&quot;password\\&quot;:\\&quot;xxx\\&quot;}&quot;))\r\n        .andDo(print())\r\n        .andExpect(status().isBadRequest())\r\n        .andExpect(?);\r\n}\r\n```\r\n\r\nIn last line I want to compare string received in response body to expected string\r\n\r\nAnd in response I get:\r\n\r\n    MockHttpServletResponse:\r\n              Status = 400\r\n       Error message = null\r\n             Headers = {Content-Type=[application/json]}\r\n        Content type = application/json\r\n                Body = &quot;Username already taken&quot;\r\n       Forwarded URL = null\r\n      Redirected URL = null\r\n\r\nTried some tricks with content(), body() but nothing worked.","title":"How to check String in response body with mockMvc","body":"<p>I have simple integration test </p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Test\npublic void shouldReturnErrorMessageToAdminWhenCreatingUserWithUsedUserName() throws Exception {\n    mockMvc.perform(post(\"/api/users\").header(\"Authorization\", base64ForTestUser).contentType(MediaType.APPLICATION_JSON)\n        .content(\"{\\\"userName\\\":\\\"testUserDetails\\\",\\\"firstName\\\":\\\"xxx\\\",\\\"lastName\\\":\\\"xxx\\\",\\\"password\\\":\\\"xxx\\\"}\"))\n        .andDo(print())\n        .andExpect(status().isBadRequest())\n        .andExpect(?);\n}\n</code></pre>\n\n<p>In last line I want to compare string received in response body to expected string</p>\n\n<p>And in response I get:</p>\n\n<pre><code>MockHttpServletResponse:\n          Status = 400\n   Error message = null\n         Headers = {Content-Type=[application/json]}\n    Content type = application/json\n            Body = \"Username already taken\"\n   Forwarded URL = null\n  Redirected URL = null\n</code></pre>\n\n<p>Tried some tricks with content(), body() but nothing worked.</p>\n"},{"tags":["java","layout","vaadin","vaadin-flow"],"answers":[{"comments":[{"owner":{"account_id":113115,"reputation":2308,"user_id":298103,"accept_rate":91,"display_name":"Rolf"},"score":1,"creation_date":1691731510,"post_id":76876455,"comment_id":135533835,"body_markdown":"Also: what is that HorizontalLayout placed inside? Whatever that is, it also needs to have a defined height. (Unless it&#39;s the root element of the view, in which case it already has height through setSizeFull)","body":"Also: what is that HorizontalLayout placed inside? Whatever that is, it also needs to have a defined height. (Unless it&#39;s the root element of the view, in which case it already has height through setSizeFull)"}],"tags":[],"owner":{"account_id":170090,"reputation":2858,"user_id":396573,"display_name":"Jouni"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1691676023,"creation_date":1691676023,"answer_id":76876455,"question_id":76876114,"body_markdown":"I think you’re missing explicit heights on the layout components. Try `setHeightFull()` on `layout`, `tableBox`, and `detailsBox`.","title":"Vaadin: How to implement horizontal layout with scrollable column?","body":"<p>I think you’re missing explicit heights on the layout components. Try <code>setHeightFull()</code> on <code>layout</code>, <code>tableBox</code>, and <code>detailsBox</code>.</p>\n"},{"tags":[],"owner":{"account_id":12039827,"reputation":348,"user_id":8817161,"display_name":"Maxim"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691677867,"creation_date":1691677867,"answer_id":76876727,"question_id":76876114,"body_markdown":"Ok, I got it. All Vaadin layout controls are basically flex containers. And this task isn&#39;t solvable with flex alone, but it can be solved with custom CSS, which I did following this snippet.\r\n\r\nhttps://stackoverflow.com/a/59550839/8817161","title":"Vaadin: How to implement horizontal layout with scrollable column?","body":"<p>Ok, I got it. All Vaadin layout controls are basically flex containers. And this task isn't solvable with flex alone, but it can be solved with custom CSS, which I did following this snippet.</p>\n<p><a href=\"https://stackoverflow.com/a/59550839/8817161\">https://stackoverflow.com/a/59550839/8817161</a></p>\n"}],"owner":{"account_id":12039827,"reputation":348,"user_id":8817161,"display_name":"Maxim"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691677867,"creation_date":1691673546,"question_id":76876114,"body_markdown":"I want to implement a HorizontalLayout with the table content area on the left side and the accordion-based details column on the right. The content area should occupy the remaining page height (basically, `100vh - navbarHeight`) and it should not exceed that value.\r\n\r\nThe issue is in the details column, specifically with the accordion. Expanded panels can contain many rows, so I put the accordion inside a scroller, but it&#39;s not working. Instead of getting a scrollable accordion, it expands the root container and I get scrollable window instead.\r\n\r\n[![enter image description here][1]][1] \r\n\r\nSimplified code:\r\n\r\n```java\r\nvar grid = new Grid&lt;&gt;(Pojo.class, false);\r\n\r\nvar tableBox = new VerticalLayout(grid);\r\ntableBox.setHeightFull();\r\n\r\nvar accordion = new Accordion();\r\naccordion.setWidthFull();\r\n\r\nvar detailsBox = new Scroller(accordion);\r\ndetailsBox.setScrollDirection(Scroller.ScrollDirection.VERTICAL);\r\ndetailsBox.setWidth(&quot;450px&quot;);\r\n\r\nvar layout = new HorizontalLayout();\r\nlayout.add(tableBox);\r\nlayout.add(detailsBox);\r\nlayout.setFlexGrow(1, tableBox);\r\nlayout.setFlexGrow(0, detailsBox);\r\nlayout.setSizeFull();\r\n```\r\n\r\nI&#39;m using Vaadin 24.\r\n\r\n  [1]: https://i.stack.imgur.com/g4gNd.png","title":"Vaadin: How to implement horizontal layout with scrollable column?","body":"<p>I want to implement a HorizontalLayout with the table content area on the left side and the accordion-based details column on the right. The content area should occupy the remaining page height (basically, <code>100vh - navbarHeight</code>) and it should not exceed that value.</p>\n<p>The issue is in the details column, specifically with the accordion. Expanded panels can contain many rows, so I put the accordion inside a scroller, but it's not working. Instead of getting a scrollable accordion, it expands the root container and I get scrollable window instead.</p>\n<p><a href=\"https://i.stack.imgur.com/g4gNd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/g4gNd.png\" alt=\"enter image description here\" /></a></p>\n<p>Simplified code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>var grid = new Grid&lt;&gt;(Pojo.class, false);\n\nvar tableBox = new VerticalLayout(grid);\ntableBox.setHeightFull();\n\nvar accordion = new Accordion();\naccordion.setWidthFull();\n\nvar detailsBox = new Scroller(accordion);\ndetailsBox.setScrollDirection(Scroller.ScrollDirection.VERTICAL);\ndetailsBox.setWidth(&quot;450px&quot;);\n\nvar layout = new HorizontalLayout();\nlayout.add(tableBox);\nlayout.add(detailsBox);\nlayout.setFlexGrow(1, tableBox);\nlayout.setFlexGrow(0, detailsBox);\nlayout.setSizeFull();\n</code></pre>\n<p>I'm using Vaadin 24.</p>\n"},{"tags":["java","selenium-webdriver","selenium-chromedriver"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1691677190,"post_id":76876562,"comment_id":135526177,"body_markdown":"Are you asking why the Selenium developers did it differently in Python and Java? We can&#39;t answer that. Ask them.","body":"Are you asking why the Selenium developers did it differently in Python and Java? We can&#39;t answer that. Ask them."},{"owner":{"account_id":28682652,"reputation":47,"user_id":21963506,"display_name":"Farhood Naqizadeh"},"score":0,"creation_date":1691677310,"post_id":76876562,"comment_id":135526208,"body_markdown":"nope I&#39;m looking for some way to do it in code like python. have you? The selenium is just an example","body":"nope I&#39;m looking for some way to do it in code like python. have you? The selenium is just an example"}],"answers":[{"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1691677627,"post_id":76876678,"comment_id":135526297,"body_markdown":"I had no idea Selenium could do that nowadays. That&#39;s very convenient!","body":"I had no idea Selenium could do that nowadays. That&#39;s very convenient!"},{"owner":{"account_id":28682652,"reputation":47,"user_id":21963506,"display_name":"Farhood Naqizadeh"},"score":0,"creation_date":1691678050,"post_id":76876678,"comment_id":135526413,"body_markdown":"So you said we can do it, but the programmer of library need to do it?","body":"So you said we can do it, but the programmer of library need to do it?"},{"owner":{"account_id":10299692,"reputation":5744,"user_id":7598774,"accept_rate":75,"display_name":"Shawn"},"score":1,"creation_date":1691678266,"post_id":76876678,"comment_id":135526468,"body_markdown":"Programmer of the library has already implemented this feature in selenium `v4.6.0` and above. This tool is available to all binding languages like Java, Python etc. [Introducing Selenium Manager](https://www.selenium.dev/blog/2022/introducing-selenium-manager/)","body":"Programmer of the library has already implemented this feature in selenium <code>v4.6.0</code> and above. This tool is available to all binding languages like Java, Python etc. <a href=\"https://www.selenium.dev/blog/2022/introducing-selenium-manager/\" rel=\"nofollow noreferrer\">Introducing Selenium Manager</a>"},{"owner":{"account_id":28682652,"reputation":47,"user_id":21963506,"display_name":"Farhood Naqizadeh"},"score":0,"creation_date":1691678268,"post_id":76876678,"comment_id":135526471,"body_markdown":"It&#39;s work your example. but the Question is not about one libraries, about what can we do for all libraries that we have like python as do it with.And thanks for reply","body":"It&#39;s work your example. but the Question is not about one libraries, about what can we do for all libraries that we have like python as do it with.And thanks for reply"},{"owner":{"account_id":10299692,"reputation":5744,"user_id":7598774,"accept_rate":75,"display_name":"Shawn"},"score":0,"creation_date":1691678361,"post_id":76876678,"comment_id":135526492,"body_markdown":"Sorry I didn&#39;t understand your above comment!","body":"Sorry I didn&#39;t understand your above comment!"},{"owner":{"account_id":28682652,"reputation":47,"user_id":21963506,"display_name":"Farhood Naqizadeh"},"score":0,"creation_date":1691678672,"post_id":76876678,"comment_id":135526555,"body_markdown":"My question is, in java like python have any library management  or module that can control the code libraries ? maven do it in best way but if you need execute file it can not management for you.","body":"My question is, in java like python have any library management  or module that can control the code libraries ? maven do it in best way but if you need execute file it can not management for you."}],"tags":[],"owner":{"account_id":10299692,"reputation":5744,"user_id":7598774,"accept_rate":75,"display_name":"Shawn"},"comment_count":6,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691677690,"creation_date":1691677577,"answer_id":76876678,"question_id":76876562,"body_markdown":"Your understand is incorrect, so is ChatGPT&#39;s answer. \r\n\r\nWith selenium `v4.6.0` and onwards (IRRESPECTIVE OF BINDING LANGUAGE, BE IT JAVA, PYTHON, C# etc.), setting up the `driver.exe` is not mandatory. Selenium&#39;s inbuilt tool known as [Selenium Manager](https://www.selenium.dev/blog/2022/introducing-selenium-manager/) will handle/download the drivers programmatically. \r\n\r\nJust like your Python code, Java code also can be as simple as:\r\n````\r\nWebDriver driver = new ChromeDriver();\r\ndriver.get(&quot;https://www.google.com&quot;);\r\n````\r\n\r\nBelow line is not mandatory anymore, if you specify, it will take `driver.exe` from the provided path, else Selenium will download and use it internally.\r\n````\r\nSystem.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:\\\\path\\\\to\\\\chromedriver.exe&quot;);\r\n````","title":"Why a python library can download needed modules but java can&#39;t?","body":"<p>Your understand is incorrect, so is ChatGPT's answer.</p>\n<p>With selenium <code>v4.6.0</code> and onwards (IRRESPECTIVE OF BINDING LANGUAGE, BE IT JAVA, PYTHON, C# etc.), setting up the <code>driver.exe</code> is not mandatory. Selenium's inbuilt tool known as <a href=\"https://www.selenium.dev/blog/2022/introducing-selenium-manager/\" rel=\"nofollow noreferrer\">Selenium Manager</a> will handle/download the drivers programmatically.</p>\n<p>Just like your Python code, Java code also can be as simple as:</p>\n<pre><code>WebDriver driver = new ChromeDriver();\ndriver.get(&quot;https://www.google.com&quot;);\n</code></pre>\n<p>Below line is not mandatory anymore, if you specify, it will take <code>driver.exe</code> from the provided path, else Selenium will download and use it internally.</p>\n<pre><code>System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:\\\\path\\\\to\\\\chromedriver.exe&quot;);\n</code></pre>\n"}],"owner":{"account_id":28682652,"reputation":47,"user_id":21963506,"display_name":"Farhood Naqizadeh"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1691680402,"answer_count":1,"score":-1,"last_activity_date":1691677690,"creation_date":1691676826,"question_id":76876562,"body_markdown":"In some libraries like selenium we can download necessary library or module from code like download Chrome driver or Firefox driver in easy way, but in java code we don&#39;t.\r\n\r\nWe need to download manually and add to the path in project or system environment and after that use it in code providing a path for the library or execute environment.\r\n\r\nJava code example:\r\n```\r\nSystem.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:\\\\path\\\\to\\\\chromedriver.exe&quot;);\r\nChromeOptions options = new ChromeOptions();\r\noptions.addArguments(&quot;start-maximized&quot;); // open Browser in maximized mode\r\noptions.addArguments(&quot;disable-infobars&quot;); // disabling infobars\r\noptions.addArguments(&quot;--disable-extensions&quot;); // disabling extensions\r\noptions.addArguments(&quot;--disable-gpu&quot;); // applicable to windows os only\r\noptions.addArguments(&quot;--disable-dev-shm-usage&quot;); // overcome limited resource problems\r\noptions.addArguments(&quot;--no-sandbox&quot;); // Bypass OS security model\r\nWebDriver driver = new ChromeDriver(options);\r\ndriver.get(&quot;https://google.com&quot;);\r\n```\r\n\r\nPython code example:\r\n\r\n```\r\nfrom selenium import webdriver\r\nfrom selenium.webdriver.chrome.options import Options\r\nchrome_options = Options()\r\nchrome_options.add_argument(&quot;--disable-extensions&quot;)\r\ndriver = webdriver.Chrome(chrome_options=chrome_options)\r\n```\r\n\r\nas you see the driver can download from python but java need to downloaded and placed somewhere in environment and than use it in code.\r\n\r\nAm I wrong or misunderstanding?\r\n\r\nchat gpt answer:\r\n\r\n&gt;You are correct in your understanding. In Java, when using libraries like Selenium, you typically need to manually download the necessary driver executable (e.g., ChromeDriver or GeckoDriver for Firefox) and specify its location in your code or system environment.\r\n&gt;\r\n&gt;Unlike Python, where you can easily install and manage drivers through package managers like pip, Java requires a manual approach for managing the driver executables.\r\n&gt;\r\n&gt;In your Java code example, you can see that you need to set the system property &quot;webdriver.chrome.driver&quot; to the location of the downloaded ChromeDriver executable. This tells the Selenium library where to find the driver on your system.\r\n&gt;\r\n&gt;Once you have downloaded the appropriate driver executable and provided the correct path, you can create an instance of the driver (e.g., ChromeDriver) and configure any desired options before using it to interact with web pages.\r\n&gt;\r\n&gt;Although the process may seem more involved in Java compared to Python, it allows for greater flexibility in managing different versions of the driver and ensuring compatibility with your browser.\r\n&gt;\r\n&gt;In summary, your understanding is correct. Java requires manual downloading and placement of the driver executable, while Python provides a more streamlined approach for downloading and managing drivers through package managers.\r\n","title":"Why a python library can download needed modules but java can&#39;t?","body":"<p>In some libraries like selenium we can download necessary library or module from code like download Chrome driver or Firefox driver in easy way, but in java code we don't.</p>\n<p>We need to download manually and add to the path in project or system environment and after that use it in code providing a path for the library or execute environment.</p>\n<p>Java code example:</p>\n<pre><code>System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:\\\\path\\\\to\\\\chromedriver.exe&quot;);\nChromeOptions options = new ChromeOptions();\noptions.addArguments(&quot;start-maximized&quot;); // open Browser in maximized mode\noptions.addArguments(&quot;disable-infobars&quot;); // disabling infobars\noptions.addArguments(&quot;--disable-extensions&quot;); // disabling extensions\noptions.addArguments(&quot;--disable-gpu&quot;); // applicable to windows os only\noptions.addArguments(&quot;--disable-dev-shm-usage&quot;); // overcome limited resource problems\noptions.addArguments(&quot;--no-sandbox&quot;); // Bypass OS security model\nWebDriver driver = new ChromeDriver(options);\ndriver.get(&quot;https://google.com&quot;);\n</code></pre>\n<p>Python code example:</p>\n<pre><code>from selenium import webdriver\nfrom selenium.webdriver.chrome.options import Options\nchrome_options = Options()\nchrome_options.add_argument(&quot;--disable-extensions&quot;)\ndriver = webdriver.Chrome(chrome_options=chrome_options)\n</code></pre>\n<p>as you see the driver can download from python but java need to downloaded and placed somewhere in environment and than use it in code.</p>\n<p>Am I wrong or misunderstanding?</p>\n<p>chat gpt answer:</p>\n<blockquote>\n<p>You are correct in your understanding. In Java, when using libraries like Selenium, you typically need to manually download the necessary driver executable (e.g., ChromeDriver or GeckoDriver for Firefox) and specify its location in your code or system environment.</p>\n<p>Unlike Python, where you can easily install and manage drivers through package managers like pip, Java requires a manual approach for managing the driver executables.</p>\n<p>In your Java code example, you can see that you need to set the system property &quot;webdriver.chrome.driver&quot; to the location of the downloaded ChromeDriver executable. This tells the Selenium library where to find the driver on your system.</p>\n<p>Once you have downloaded the appropriate driver executable and provided the correct path, you can create an instance of the driver (e.g., ChromeDriver) and configure any desired options before using it to interact with web pages.</p>\n<p>Although the process may seem more involved in Java compared to Python, it allows for greater flexibility in managing different versions of the driver and ensuring compatibility with your browser.</p>\n<p>In summary, your understanding is correct. Java requires manual downloading and placement of the driver executable, while Python provides a more streamlined approach for downloading and managing drivers through package managers.</p>\n</blockquote>\n"},{"tags":["java","android","kotlin","version"],"comments":[{"owner":{"account_id":2806090,"reputation":80148,"user_id":2413303,"accept_rate":100,"display_name":"EpicPandaForce"},"score":0,"creation_date":1691667941,"post_id":76875401,"comment_id":135524007,"body_markdown":"Yes, I have seen https://stackoverflow.com/questions/65139541/how-can-the-methods-makeconcat-and-makeconcatwithconstants-in-stringconcat and https://stackoverflow.com/questions/51430731/java-string-concatenationhow-come-this-is-giving-this-exception but it does not help.","body":"Yes, I have seen <a href=\"https://stackoverflow.com/questions/65139541/how-can-the-methods-makeconcat-and-makeconcatwithconstants-in-stringconcat\" title=\"how can the methods makeconcat and makeconcatwithconstants in stringconcat\">stackoverflow.com/questions/65139541/&hellip;</a> and <a href=\"https://stackoverflow.com/questions/51430731/java-string-concatenationhow-come-this-is-giving-this-exception\" title=\"java string concatenationhow come this is giving this exception\">stackoverflow.com/questions/51430731/&hellip;</a> but it does not help."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1691673431,"post_id":76875401,"comment_id":135525219,"body_markdown":"There’s a huge gap from Java 8 to Java 17. Try taking smaller steps. Also I’m curious what happens if you also increase source compatibility?","body":"There’s a huge gap from Java 8 to Java 17. Try taking smaller steps. Also I’m curious what happens if you also increase source compatibility?"},{"owner":{"account_id":2806090,"reputation":80148,"user_id":2413303,"accept_rate":100,"display_name":"EpicPandaForce"},"score":0,"creation_date":1691677305,"post_id":76875401,"comment_id":135526204,"body_markdown":"@OleV.V. setting Java 9 source compatibility + enabling core library desugaring fixed it.","body":"@OleV.V. setting Java 9 source compatibility + enabling core library desugaring fixed it."}],"answers":[{"comments":[{"owner":{"account_id":2806090,"reputation":80148,"user_id":2413303,"accept_rate":100,"display_name":"EpicPandaForce"},"score":0,"creation_date":1692128573,"post_id":76876630,"comment_id":135581632,"body_markdown":"No, I am not sure if target 17 is correct, or if it should be 9 or 11.","body":"No, I am not sure if target 17 is correct, or if it should be 9 or 11."},{"owner":{"account_id":2806090,"reputation":80148,"user_id":2413303,"accept_rate":100,"display_name":"EpicPandaForce"},"score":1,"creation_date":1692131930,"post_id":76876630,"comment_id":135582112,"body_markdown":"One day I&#39;ll check if the solution was just adding `kotlin {\n    jvmToolchain(17)\n  }`","body":"One day I&#39;ll check if the solution was just adding <code>kotlin {     jvmToolchain(17)   }</code>"}],"tags":[],"owner":{"account_id":2806090,"reputation":80148,"user_id":2413303,"accept_rate":100,"display_name":"EpicPandaForce"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691677287,"creation_date":1691677287,"answer_id":76876630,"question_id":76875401,"body_markdown":"Setting a higher source compatibility (`JavaVersion.VERSION_1_9`) allows for the code to compile. \r\n\r\nAfterwards, it is important to enable core library desugaring, as Android supports Java 8 from SDK 26, and Java 9+ only at higher API levels, so core library desugaring must be enabled.\r\n\r\nResult is:\r\n\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_9\r\n        targetCompatibility JavaVersion.VERSION_17\r\n\r\n        coreLibraryDesugaringEnabled true\r\n    }\r\n    kotlinOptions {\r\n        jvmTarget = &quot;17&quot;\r\n        languageVersion = &#39;1.9&#39; \r\n    }\r\n\r\n    dependencies {\r\n        coreLibraryDesugaring &#39;com.android.tools:desugar_jdk_libs:2.0.3&#39;","title":"Java string concatenation operation fails with &quot;symbol not found: StringConcatFactory.makeConcatWithConstants&quot;","body":"<p>Setting a higher source compatibility (<code>JavaVersion.VERSION_1_9</code>) allows for the code to compile.</p>\n<p>Afterwards, it is important to enable core library desugaring, as Android supports Java 8 from SDK 26, and Java 9+ only at higher API levels, so core library desugaring must be enabled.</p>\n<p>Result is:</p>\n<pre><code>compileOptions {\n    sourceCompatibility JavaVersion.VERSION_1_9\n    targetCompatibility JavaVersion.VERSION_17\n\n    coreLibraryDesugaringEnabled true\n}\nkotlinOptions {\n    jvmTarget = &quot;17&quot;\n    languageVersion = '1.9' \n}\n\ndependencies {\n    coreLibraryDesugaring 'com.android.tools:desugar_jdk_libs:2.0.3'\n</code></pre>\n"}],"owner":{"account_id":2806090,"reputation":80148,"user_id":2413303,"accept_rate":100,"display_name":"EpicPandaForce"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":187,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76876630,"answer_count":1,"score":1,"last_activity_date":1691677287,"creation_date":1691667659,"question_id":76875401,"body_markdown":"I have the following Java snippet:\r\n\r\n    public static DetailChecklistFormDescriptor.ChecklistItemRadioField.RadioOption getRadioOptionFromList(List items, int position) {\r\n        Object item = items.get(position);\r\n        if(item instanceof DetailChecklistFormDescriptor.ChecklistItemRadioField.RadioOption) {\r\n            return (DetailChecklistFormDescriptor.ChecklistItemRadioField.RadioOption) item;\r\n        } else if(item instanceof com.google.gson.internal.LinkedTreeMap) {\r\n            return new DetailChecklistFormDescriptor.ChecklistItemRadioField.RadioOption(\r\n                    (String) ((com.google.gson.internal.LinkedTreeMap) item).get(&quot;radioKey&quot;),\r\n                    (String) ((com.google.gson.internal.LinkedTreeMap) item).get(&quot;radioValue&quot;)\r\n            );\r\n        }\r\n        throw new IllegalArgumentException(&quot;Could not deserialize radio option from list&quot; + Arrays.toString(items.toArray())); // &lt;-- !!!\r\n    }\r\n\r\nSpecifically this line:\r\n\r\n    &quot;Could not deserialize radio option from list&quot; + Arrays.toString(items.toArray())\r\n\r\nI&#39;m in the process of upgrading Gradle to 8.2, Compose to 1.5.0, Kotlin to 1.9.0 (this feels like a possible culprit), Android Gradle Plugin to 8.1, and had to make updates to the Java/Kotlin JVM target.\r\n\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_17 // &lt;-- was 1.8\r\n    }\r\n    kotlinOptions {\r\n        jvmTarget = &quot;17&quot; // &lt;-- was 1.8\r\n        languageVersion = &#39;1.9&#39;\r\n    }\r\n\r\nNow I can obviously replace the code with\r\n\r\n\r\n        throw new IllegalArgumentException(new StringBuilder()\r\n            .append(&quot;Could not deserialize radio option from list&quot;)\r\n            .append(Arrays.toString(items.toArray()))\r\n            .toString());\r\n\r\nSame in other Java code that has String concatenation\r\n\r\n            throw new IllegalArgumentException(new StringBuilder()\r\n                .append(getClass())\r\n                .append(&quot; cannot deserialize to &quot;)\r\n                .append(typeOfT)\r\n                .toString());\r\n\r\nBut it seems somewhat eerie that ALL string concatenation operations **done in Java** with the `+` operator would suddenly just &quot;start failing&quot;.\r\n\r\nAny clues what needs to be configured in order to prevent this error?\r\n\r\n    error: cannot find symbol, \r\n\r\n    symbol: method makeConcatWithConstants(Lookup,String,MethodType,String), \r\n\r\n    location: interface StringConcatFactory","title":"Java string concatenation operation fails with &quot;symbol not found: StringConcatFactory.makeConcatWithConstants&quot;","body":"<p>I have the following Java snippet:</p>\n<pre><code>public static DetailChecklistFormDescriptor.ChecklistItemRadioField.RadioOption getRadioOptionFromList(List items, int position) {\n    Object item = items.get(position);\n    if(item instanceof DetailChecklistFormDescriptor.ChecklistItemRadioField.RadioOption) {\n        return (DetailChecklistFormDescriptor.ChecklistItemRadioField.RadioOption) item;\n    } else if(item instanceof com.google.gson.internal.LinkedTreeMap) {\n        return new DetailChecklistFormDescriptor.ChecklistItemRadioField.RadioOption(\n                (String) ((com.google.gson.internal.LinkedTreeMap) item).get(&quot;radioKey&quot;),\n                (String) ((com.google.gson.internal.LinkedTreeMap) item).get(&quot;radioValue&quot;)\n        );\n    }\n    throw new IllegalArgumentException(&quot;Could not deserialize radio option from list&quot; + Arrays.toString(items.toArray())); // &lt;-- !!!\n}\n</code></pre>\n<p>Specifically this line:</p>\n<pre><code>&quot;Could not deserialize radio option from list&quot; + Arrays.toString(items.toArray())\n</code></pre>\n<p>I'm in the process of upgrading Gradle to 8.2, Compose to 1.5.0, Kotlin to 1.9.0 (this feels like a possible culprit), Android Gradle Plugin to 8.1, and had to make updates to the Java/Kotlin JVM target.</p>\n<pre><code>compileOptions {\n    sourceCompatibility JavaVersion.VERSION_1_8\n    targetCompatibility JavaVersion.VERSION_17 // &lt;-- was 1.8\n}\nkotlinOptions {\n    jvmTarget = &quot;17&quot; // &lt;-- was 1.8\n    languageVersion = '1.9'\n}\n</code></pre>\n<p>Now I can obviously replace the code with</p>\n<pre><code>    throw new IllegalArgumentException(new StringBuilder()\n        .append(&quot;Could not deserialize radio option from list&quot;)\n        .append(Arrays.toString(items.toArray()))\n        .toString());\n</code></pre>\n<p>Same in other Java code that has String concatenation</p>\n<pre><code>        throw new IllegalArgumentException(new StringBuilder()\n            .append(getClass())\n            .append(&quot; cannot deserialize to &quot;)\n            .append(typeOfT)\n            .toString());\n</code></pre>\n<p>But it seems somewhat eerie that ALL string concatenation operations <strong>done in Java</strong> with the <code>+</code> operator would suddenly just &quot;start failing&quot;.</p>\n<p>Any clues what needs to be configured in order to prevent this error?</p>\n<pre><code>error: cannot find symbol, \n\nsymbol: method makeConcatWithConstants(Lookup,String,MethodType,String), \n\nlocation: interface StringConcatFactory\n</code></pre>\n"},{"tags":["java","spring","maven","spring-mvc","spring-boot"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1445762414,"post_id":33327678,"comment_id":54452593,"body_markdown":"A redirect is client side, so what you pass after the `redirect:` should lead to a valid URL not a view name... And stop mixing versions you are mixing Spring Boot 1.2.0 and 1.2.7. Change the parent to 1.2.7 and remove the versions elsewhere.","body":"A redirect is client side, so what you pass after the <code>redirect:</code> should lead to a valid URL not a view name... And stop mixing versions you are mixing Spring Boot 1.2.0 and 1.2.7. Change the parent to 1.2.7 and remove the versions elsewhere."},{"owner":{"account_id":2345503,"reputation":87,"user_id":2055876,"accept_rate":43,"display_name":"supreethmurthy"},"score":0,"creation_date":1445763940,"post_id":33327678,"comment_id":54452968,"body_markdown":"@M.Deinum: Thanks for bringing up the discrepancy in version numbers. I have corrected that. I changed the redirect to say ModelAndView mv = new ModelAndView(&quot;redirect:nextpage.html&quot;); and also moved the nextpage.html under the static folder in my project structure. It doesn&#39;t work. I also tried &quot;redirect:/nextpage.html&quot;. Both of them didn&#39;t work. I tried http://localhost:8080/nextpage.html and the content loads up fine.","body":"@M.Deinum: Thanks for bringing up the discrepancy in version numbers. I have corrected that. I changed the redirect to say ModelAndView mv = new ModelAndView(&quot;redirect:nextpage.html&quot;); and also moved the nextpage.html under the static folder in my project structure. It doesn&#39;t work. I also tried &quot;redirect:/nextpage.html&quot;. Both of them didn&#39;t work. I tried <a href=\"http://localhost:8080/nextpage.html\" rel=\"nofollow noreferrer\">localhost:8080/nextpage.html</a> and the content loads up fine."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1445772696,"post_id":33327678,"comment_id":54455231,"body_markdown":"You have both `@RestController` and `@Controller` which is it... Judging from your return types you need `@Controller` not `@RestController`. Also the `@EnableAutoConfiguration` is useless on this class.","body":"You have both <code>@RestController</code> and <code>@Controller</code> which is it... Judging from your return types you need <code>@Controller</code> not <code>@RestController</code>. Also the <code>@EnableAutoConfiguration</code> is useless on this class."}],"answers":[{"comments":[{"owner":{"account_id":2345503,"reputation":87,"user_id":2055876,"accept_rate":43,"display_name":"supreethmurthy"},"score":1,"creation_date":1445822741,"post_id":33328490,"comment_id":54470874,"body_markdown":"I tried redirecting to another controller method instead of an html file and the redirected controller method is hit. I see a sys out from the new method. In the new method, I tried redirect, forward and also generic way like this. ModelAndView mv = new ModelAndView(&quot;nextpage&quot;);\n        mv.addObject(&quot;message&quot;, Calendar.getInstance().getTime().toString());\n        return mv; This isn&#39;t working either. From the new controller, the page isn&#39;t loaded. There is no error on the console either.","body":"I tried redirecting to another controller method instead of an html file and the redirected controller method is hit. I see a sys out from the new method. In the new method, I tried redirect, forward and also generic way like this. ModelAndView mv = new ModelAndView(&quot;nextpage&quot;);         mv.addObject(&quot;message&quot;, Calendar.getInstance().getTime().toString());         return mv; This isn&#39;t working either. From the new controller, the page isn&#39;t loaded. There is no error on the console either."},{"owner":{"account_id":7758115,"reputation":1662,"user_id":5871709,"display_name":"funder7"},"score":0,"creation_date":1599775428,"post_id":33328490,"comment_id":112886982,"body_markdown":"It&#39;s old but reading this I would say that the browser has reached the final result, while your spring application continued the execution..","body":"It&#39;s old but reading this I would say that the browser has reached the final result, while your spring application continued the execution.."}],"tags":[],"owner":{"account_id":104911,"reputation":119222,"user_id":280244,"accept_rate":81,"display_name":"Ralph"},"comment_count":2,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1445767834,"creation_date":1445767834,"answer_id":33328490,"question_id":33327678,"body_markdown":"Try to use [RedirectView][1] explicite\r\n\r\n    @RequestMapping(value=&quot;/gotoNextPage&quot;,method = RequestMethod.GET)\r\n    public  ModelAndView gotoNextPage(HttpServletRequest request, HttpServletResponse response){\r\n        System.out.println(&quot;Inside gotoNextPage!!!!!!&quot;);\r\n    \r\n        ModelMap model = new ModelMap();\r\n        model.add(&quot;message&quot;, &quot;next page&quot;);\r\n        return new ModelAndView(\r\n           new RedirectView(&quot;/nextpage&quot;, true),\r\n           //or new RedirectView(&quot;/nextpage.html&quot;, true),\r\n           model\r\n        );\r\n    }\r\n\r\n\r\n  [1]: http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/servlet/view/RedirectView.html","title":"Springboot Controller redirect not working","body":"<p>Try to use <a href=\"http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/servlet/view/RedirectView.html\" rel=\"nofollow\">RedirectView</a> explicite</p>\n\n<pre><code>@RequestMapping(value=\"/gotoNextPage\",method = RequestMethod.GET)\npublic  ModelAndView gotoNextPage(HttpServletRequest request, HttpServletResponse response){\n    System.out.println(\"Inside gotoNextPage!!!!!!\");\n\n    ModelMap model = new ModelMap();\n    model.add(\"message\", \"next page\");\n    return new ModelAndView(\n       new RedirectView(\"/nextpage\", true),\n       //or new RedirectView(\"/nextpage.html\", true),\n       model\n    );\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2345503,"reputation":87,"user_id":2055876,"accept_rate":43,"display_name":"supreethmurthy"},"score":0,"creation_date":1445822578,"post_id":33332124,"comment_id":54470812,"body_markdown":"I tried your code. That isn&#39;t working. I have placed the nextpage.html in the static folder. The function is being hit and I see the sys out. But the page isn&#39;t redirecting.","body":"I tried your code. That isn&#39;t working. I have placed the nextpage.html in the static folder. The function is being hit and I see the sys out. But the page isn&#39;t redirecting."},{"owner":{"account_id":351196,"reputation":2555,"user_id":687515,"display_name":"daniel.eichten"},"score":0,"creation_date":1445838128,"post_id":33332124,"comment_id":54474432,"body_markdown":"It seems that you do have a different issue. Can you check the Http headers? Can you get the nextpage when you open it in the browser directly?","body":"It seems that you do have a different issue. Can you check the Http headers? Can you get the nextpage when you open it in the browser directly?"},{"owner":{"account_id":2345503,"reputation":87,"user_id":2055876,"accept_rate":43,"display_name":"supreethmurthy"},"score":0,"creation_date":1445875735,"post_id":33332124,"comment_id":54496103,"body_markdown":"Yes. I am able to open the page directly on the browser. Also in my controller method, if I don&#39;t use redirect, I am able to invoke the contents of nextpage directly when I type /gotoNextPage on the browser. The other thing that is baffling me is if I type redirect:www.google.com, I don&#39;t see google.com on my browser either. It seems like the controller is able to redirect but the browser is not reloading the page. Am I missing any configuration in the property file? Thanks for your help.","body":"Yes. I am able to open the page directly on the browser. Also in my controller method, if I don&#39;t use redirect, I am able to invoke the contents of nextpage directly when I type /gotoNextPage on the browser. The other thing that is baffling me is if I type redirect:www.google.com, I don&#39;t see google.com on my browser either. It seems like the controller is able to redirect but the browser is not reloading the page. Am I missing any configuration in the property file? Thanks for your help."},{"owner":{"account_id":5939623,"reputation":5436,"user_id":4671372,"display_name":"VadymVL"},"score":0,"creation_date":1445928764,"post_id":33332124,"comment_id":54518350,"body_markdown":"@supreethmurthy, you should use full URL, like this `redirect:http://www.google.com` for redirect to external page.","body":"@supreethmurthy, you should use full URL, like this <code>redirect:http:&#47;&#47;www.google.com</code> for redirect to external page."},{"owner":{"account_id":2345503,"reputation":87,"user_id":2055876,"accept_rate":43,"display_name":"supreethmurthy"},"score":0,"creation_date":1445929906,"post_id":33332124,"comment_id":54518866,"body_markdown":"I looked at the http headers. I am getting a status of 200, which is correct. But I am making a call through XmlHttpRequest on the client side. Could that be causing the problem?","body":"I looked at the http headers. I am getting a status of 200, which is correct. But I am making a call through XmlHttpRequest on the client side. Could that be causing the problem?"},{"owner":{"account_id":351196,"reputation":2555,"user_id":687515,"display_name":"daniel.eichten"},"score":0,"creation_date":1445930550,"post_id":33332124,"comment_id":54519162,"body_markdown":"But 200 is incorrect. You are expecting a redirect and therefore you should get a 302. Do you maybe have a catchall clause in another method or controller in your app?","body":"But 200 is incorrect. You are expecting a redirect and therefore you should get a 302. Do you maybe have a catchall clause in another method or controller in your app?"},{"owner":{"account_id":2345503,"reputation":87,"user_id":2055876,"accept_rate":43,"display_name":"supreethmurthy"},"score":0,"creation_date":1445930601,"post_id":33332124,"comment_id":54519191,"body_markdown":"@hrrgttnchml: Thanks for your suggestion. I looked at the http header as you suggested. I was making a calling through $http.get in angular. I had to handle the event myself. I changed my JS call to do a window.location.href and it works fine.","body":"@hrrgttnchml: Thanks for your suggestion. I looked at the http header as you suggested. I was making a calling through $http.get in angular. I had to handle the event myself. I changed my JS call to do a window.location.href and it works fine."}],"tags":[],"owner":{"account_id":351196,"reputation":2555,"user_id":687515,"display_name":"daniel.eichten"},"comment_count":7,"down_vote_count":1,"up_vote_count":4,"is_accepted":true,"score":3,"last_activity_date":1445790910,"creation_date":1445790910,"answer_id":33332124,"question_id":33327678,"body_markdown":"I&#39;d try to simplify the method to use `Model` and return a simple `String`:\r\n\r\n    @RequestMapping(value=&quot;/gotoNextPage&quot;,method = RequestMethod.GET)\r\n    public String gotoNextPage(Model model){\r\n        LOG.debug(&quot;Inside gotoNextPage!!!!!!&quot;);\r\n        model.addAttribute(&quot;message&quot;, &quot;next page&quot;);\r\n        return &quot;redirect:nextpage.html&quot;;\r\n    }","title":"Springboot Controller redirect not working","body":"<p>I'd try to simplify the method to use <code>Model</code> and return a simple <code>String</code>:</p>\n\n<pre><code>@RequestMapping(value=\"/gotoNextPage\",method = RequestMethod.GET)\npublic String gotoNextPage(Model model){\n    LOG.debug(\"Inside gotoNextPage!!!!!!\");\n    model.addAttribute(\"message\", \"next page\");\n    return \"redirect:nextpage.html\";\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2345503,"reputation":87,"user_id":2055876,"accept_rate":43,"display_name":"supreethmurthy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1445930713,"creation_date":1445930713,"answer_id":33362052,"question_id":33327678,"body_markdown":"The problem was making a call through xmlhttprequest object on the client end. I had to handle the completion of the event. I got rid of the $http.get call on the client and did a window.location.href instead. My controller redirects and the page loads automatically. ","title":"Springboot Controller redirect not working","body":"<p>The problem was making a call through xmlhttprequest object on the client end. I had to handle the completion of the event. I got rid of the $http.get call on the client and did a window.location.href instead. My controller redirects and the page loads automatically. </p>\n"},{"tags":[],"owner":{"account_id":7404936,"reputation":21,"user_id":5634099,"display_name":"hahugao"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1449137270,"creation_date":1449137270,"answer_id":34063041,"question_id":33327678,"body_markdown":"If you want to use &quot;redirect:&quot; with springboot,You must inject &quot;InternalResourceViewResolver&quot;.Although Spring Boot provides auto-configuration,if you use &quot;@EnableWebMvc&quot;,&quot;InternalResourceViewResolver&quot; will not inject.[look here](http://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#boot-features-spring-mvc-auto-configuration)","title":"Springboot Controller redirect not working","body":"<p>If you want to use \"redirect:\" with springboot,You must inject \"InternalResourceViewResolver\".Although Spring Boot provides auto-configuration,if you use \"@EnableWebMvc\",\"InternalResourceViewResolver\" will not inject.<a href=\"http://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#boot-features-spring-mvc-auto-configuration\" rel=\"nofollow\">look here</a></p>\n"},{"tags":[],"owner":{"account_id":6502239,"reputation":1558,"user_id":5032550,"accept_rate":67,"display_name":"Luis Cabrera Benito"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1566849795,"creation_date":1566849795,"answer_id":57664278,"question_id":33327678,"body_markdown":"If you are trying to redirect and it does not work, remember that you mustn&#39;t put the `@ResponseBody` annotation.\r\n\r\nSo, this **will not** work:\r\n\r\n    @PostMapping(value = &quot;/agregar&quot;)\r\n    @ResponseBody // Annotation here\r\n    public String guardarProducto() {\r\n        // magic here\r\n        return &quot;redirect:/productos/mostrar&quot;;\r\n    }\r\n\r\nBut this **will do** (remove the `@ResponseBody` Annotation):\r\n\r\n    @PostMapping(value = &quot;/agregar&quot;)\r\n    public String guardarProducto() {\r\n        // magic here\r\n        return &quot;redirect:/productos/mostrar&quot;;\r\n    }\r\n\r\nMore info about redirect in Spring Boot [here][1].\r\n\r\n\r\n  [1]: https://parzibyte.me/blog/en/2019/08/26/how-to-redirect-spring-boot/","title":"Springboot Controller redirect not working","body":"<p>If you are trying to redirect and it does not work, remember that you mustn't put the <code>@ResponseBody</code> annotation.</p>\n\n<p>So, this <strong>will not</strong> work:</p>\n\n<pre><code>@PostMapping(value = \"/agregar\")\n@ResponseBody // Annotation here\npublic String guardarProducto() {\n    // magic here\n    return \"redirect:/productos/mostrar\";\n}\n</code></pre>\n\n<p>But this <strong>will do</strong> (remove the <code>@ResponseBody</code> Annotation):</p>\n\n<pre><code>@PostMapping(value = \"/agregar\")\npublic String guardarProducto() {\n    // magic here\n    return \"redirect:/productos/mostrar\";\n}\n</code></pre>\n\n<p>More info about redirect in Spring Boot <a href=\"https://parzibyte.me/blog/en/2019/08/26/how-to-redirect-spring-boot/\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}],"owner":{"account_id":2345503,"reputation":87,"user_id":2055876,"accept_rate":43,"display_name":"supreethmurthy"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38003,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":33332124,"answer_count":5,"score":3,"last_activity_date":1691677227,"creation_date":1445761858,"question_id":33327678,"body_markdown":"I am trying a quick prototype using Spring boot. \r\n\r\nI have the following Controller code minus the imports\r\n\r\n    @EnableAutoConfiguration\r\n    @RestController\r\n    @Controller\r\n    public class IndexController{\r\n        @RequestMapping(value = &quot;/&quot;)\r\n        public ModelAndView firstPage(HttpServletRequest request, HttpServletResponse response){\r\n            ModelAndView mv = new ModelAndView(&quot;index&quot;);\r\n            mv.addObject(&quot;message&quot;, Calendar.getInstance().getTime().toString());\r\n            return mv;\r\n        }\r\n        @RequestMapping(value=&quot;/gotoNextPage&quot;,method = RequestMethod.GET)\r\n        public  ModelAndView gotoNextPage(HttpServletRequest request, HttpServletResponse response){\r\n            System.out.println(&quot;Inside gotoNextPage!!!!!!&quot;);\r\n            ModelAndView mv = new ModelAndView(&quot;redirect:nextpage&quot;);\r\n            mv.addObject(&quot;message&quot;, &quot;next page&quot;);\r\n            return mv;\r\n        }\r\n    }\r\n\r\n**From my HTML, I invoke the /gotoNextPage and in my Server, I see the Inside gotoNextPage!!!! print statement. However, the nextPage doesn&#39;t load. If I don&#39;t use redirect and I type http://localhost:8080/gotoNextPage, the HTML content loads fine. Also, the index.html also loads fine** \r\n\r\nI am using spring boot mvc, thymeleaf, angularjs\r\n\r\nMy project structure is shown below:\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/qCcVP.png\r\n\r\n\r\nMy POM XML file dependencies are shown below:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n        &lt;groupId&gt;ng-spring-boot-helloworld&lt;/groupId&gt;\r\n        &lt;artifactId&gt;ng-spring-boot-helloworld&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0.0&lt;/version&gt;\r\n    \r\n        &lt;parent&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n            &lt;version&gt;1.2.0.RELEASE&lt;/version&gt;\r\n        &lt;/parent&gt;\r\n    \r\n        &lt;dependencyManagement&gt;\r\n            &lt;dependencies&gt;\r\n                &lt;dependency&gt;\r\n                    &lt;groupId&gt;org.hsqldb&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;hsqldb&lt;/artifactId&gt;\r\n                    &lt;version&gt;2.3.2&lt;/version&gt;\r\n                &lt;/dependency&gt;\r\n                &lt;dependency&gt;\r\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n                    &lt;version&gt;1.2.7.RELEASE&lt;/version&gt;\r\n                &lt;/dependency&gt;\r\n            &lt;/dependencies&gt;\r\n        &lt;/dependencyManagement&gt;\r\n    \r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    \r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.hsqldb&lt;/groupId&gt;\r\n                &lt;artifactId&gt;hsqldb&lt;/artifactId&gt;\r\n                &lt;scope&gt;runtime&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\nPlease help.\r\n\r\nThanks in advance. ","title":"Springboot Controller redirect not working","body":"<p>I am trying a quick prototype using Spring boot. </p>\n\n<p>I have the following Controller code minus the imports</p>\n\n<pre><code>@EnableAutoConfiguration\n@RestController\n@Controller\npublic class IndexController{\n    @RequestMapping(value = \"/\")\n    public ModelAndView firstPage(HttpServletRequest request, HttpServletResponse response){\n        ModelAndView mv = new ModelAndView(\"index\");\n        mv.addObject(\"message\", Calendar.getInstance().getTime().toString());\n        return mv;\n    }\n    @RequestMapping(value=\"/gotoNextPage\",method = RequestMethod.GET)\n    public  ModelAndView gotoNextPage(HttpServletRequest request, HttpServletResponse response){\n        System.out.println(\"Inside gotoNextPage!!!!!!\");\n        ModelAndView mv = new ModelAndView(\"redirect:nextpage\");\n        mv.addObject(\"message\", \"next page\");\n        return mv;\n    }\n}\n</code></pre>\n\n<p><strong>From my HTML, I invoke the /gotoNextPage and in my Server, I see the Inside gotoNextPage!!!! print statement. However, the nextPage doesn't load. If I don't use redirect and I type <a href=\"http://localhost:8080/gotoNextPage\" rel=\"nofollow\">http://localhost:8080/gotoNextPage</a>, the HTML content loads fine. Also, the index.html also loads fine</strong> </p>\n\n<p>I am using spring boot mvc, thymeleaf, angularjs</p>\n\n<p>My project structure is shown below:\n<a href=\"https://i.stack.imgur.com/qCcVP.png\" rel=\"nofollow\">enter image description here</a></p>\n\n<p>My POM XML file dependencies are shown below:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;ng-spring-boot-helloworld&lt;/groupId&gt;\n    &lt;artifactId&gt;ng-spring-boot-helloworld&lt;/artifactId&gt;\n    &lt;version&gt;1.0.0&lt;/version&gt;\n\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;1.2.0.RELEASE&lt;/version&gt;\n    &lt;/parent&gt;\n\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.hsqldb&lt;/groupId&gt;\n                &lt;artifactId&gt;hsqldb&lt;/artifactId&gt;\n                &lt;version&gt;2.3.2&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n                &lt;version&gt;1.2.7.RELEASE&lt;/version&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hsqldb&lt;/groupId&gt;\n            &lt;artifactId&gt;hsqldb&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n&lt;/project&gt;\n</code></pre>\n\n<p>Please help.</p>\n\n<p>Thanks in advance. </p>\n"},{"tags":["java","android","android-studio","android-drawable"],"comments":[{"owner":{"account_id":2843880,"reputation":5219,"user_id":2442831,"display_name":"Lino"},"score":0,"creation_date":1691645770,"post_id":76872556,"comment_id":135520019,"body_markdown":"and what did you try?","body":"and what did you try?"},{"owner":{"account_id":14338249,"reputation":3125,"user_id":10357086,"display_name":"Dev4Life"},"score":1,"creation_date":1691646798,"post_id":76872556,"comment_id":135520118,"body_markdown":"Explain what solutions you have already tried.","body":"Explain what solutions you have already tried."},{"owner":{"account_id":8852920,"reputation":393,"user_id":6611534,"display_name":"khushbu vadi"},"score":0,"creation_date":1691668286,"post_id":76872556,"comment_id":135524084,"body_markdown":"@Lino  - didn&#39;t try anything. because not getting any idea to get this shape.","body":"@Lino  - didn&#39;t try anything. because not getting any idea to get this shape."},{"owner":{"account_id":8852920,"reputation":393,"user_id":6611534,"display_name":"khushbu vadi"},"score":0,"creation_date":1691668308,"post_id":76872556,"comment_id":135524086,"body_markdown":"@Dev4Life - didn&#39;t try anything. because not getting any idea to get this shape.","body":"@Dev4Life - didn&#39;t try anything. because not getting any idea to get this shape."},{"owner":{"account_id":14338249,"reputation":3125,"user_id":10357086,"display_name":"Dev4Life"},"score":0,"creation_date":1691725907,"post_id":76872556,"comment_id":135533372,"body_markdown":"You can start drawing custom shapes by learning how to draw basic custom views.","body":"You can start drawing custom shapes by learning how to draw basic custom views."}],"answers":[{"comments":[{"owner":{"account_id":8852920,"reputation":393,"user_id":6611534,"display_name":"khushbu vadi"},"score":0,"creation_date":1691811903,"post_id":76874559,"comment_id":135545646,"body_markdown":"How to draw this shape? I want to learn this vector drawable. Please tell me. This is exact same as like i want.","body":"How to draw this shape? I want to learn this vector drawable. Please tell me. This is exact same as like i want."},{"owner":{"account_id":22432165,"reputation":1234,"user_id":16637863,"display_name":"Pawan Harariya"},"score":0,"creation_date":1691822342,"post_id":76874559,"comment_id":135546257,"body_markdown":"I used this site https://svg2vector.com/ However, this is not always accurate, so once xml is generated you can try playing with it, to adjust.","body":"I used this site <a href=\"https://svg2vector.com/\" rel=\"nofollow noreferrer\">svg2vector.com</a> However, this is not always accurate, so once xml is generated you can try playing with it, to adjust."}],"tags":[],"owner":{"account_id":22432165,"reputation":1234,"user_id":16637863,"display_name":"Pawan Harariya"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691660899,"creation_date":1691660899,"answer_id":76874559,"question_id":76872556,"body_markdown":"Give this a try.\r\n```\r\n&lt;vector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; xmlns:aapt=&quot;http://schemas.android.com/aapt&quot;\r\n    android:viewportWidth=&quot;908&quot;\r\n    android:viewportHeight=&quot;804&quot;\r\n    android:width=&quot;200dp&quot;\r\n    android:height=&quot;200dp&quot;&gt;\r\n\r\n    &lt;path\r\n        android:pathData=&quot;M0 0L541 0.5Q526.3 9.8 516 23.5Q497.1 45.6 487 76.5L482 96.5L481 110.5L480 111.5L480 142.5L486 174.5L498 202.5Q513.7 229.3 536.5 249Q565 273.5 599.5 292L638.5 312L709.5 345L750.5 369Q797.8 399.2 835 439.5Q869 476 890 525.5L898 548.5L904 574.5L904 579.5L906 586.5L906 594.5L907 595.5L907 607.5L908 608.5L908 633.5L907 634.5L907 647.5L906 648.5L906 656.5L905 657.5L903 675.5L895 708.5Q878.7 761 854 804L0 804L0 0Z&quot;\r\n        android:fillColor=&quot;#ECD3F3&quot;\r\n        android:strokeColor=&quot;#ECD3F3&quot;\r\n        android:strokeWidth=&quot;1&quot; /&gt;\r\n&lt;/vector&gt;\r\n```","title":"Custom shape drawable in android programmatically","body":"<p>Give this a try.</p>\n<pre><code>&lt;vector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; xmlns:aapt=&quot;http://schemas.android.com/aapt&quot;\n    android:viewportWidth=&quot;908&quot;\n    android:viewportHeight=&quot;804&quot;\n    android:width=&quot;200dp&quot;\n    android:height=&quot;200dp&quot;&gt;\n\n    &lt;path\n        android:pathData=&quot;M0 0L541 0.5Q526.3 9.8 516 23.5Q497.1 45.6 487 76.5L482 96.5L481 110.5L480 111.5L480 142.5L486 174.5L498 202.5Q513.7 229.3 536.5 249Q565 273.5 599.5 292L638.5 312L709.5 345L750.5 369Q797.8 399.2 835 439.5Q869 476 890 525.5L898 548.5L904 574.5L904 579.5L906 586.5L906 594.5L907 595.5L907 607.5L908 608.5L908 633.5L907 634.5L907 647.5L906 648.5L906 656.5L905 657.5L903 675.5L895 708.5Q878.7 761 854 804L0 804L0 0Z&quot;\n        android:fillColor=&quot;#ECD3F3&quot;\n        android:strokeColor=&quot;#ECD3F3&quot;\n        android:strokeWidth=&quot;1&quot; /&gt;\n&lt;/vector&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":8852920,"reputation":393,"user_id":6611534,"display_name":"khushbu vadi"},"score":0,"creation_date":1691812004,"post_id":76876599,"comment_id":135545651,"body_markdown":"Sahin - Thank you very much for this solution. Now I can make any shape from this website. rhanks once again. you save my time.","body":"Sahin - Thank you very much for this solution. Now I can make any shape from this website. rhanks once again. you save my time."}],"tags":[],"owner":{"account_id":10989694,"reputation":11,"user_id":8074142,"display_name":"Enes Şahin"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691677158,"creation_date":1691677103,"answer_id":76876599,"question_id":76872556,"body_markdown":"You can use this:\r\n\r\n    \r\n\r\n&lt;!-- begin snippet: js hide: false console: false babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    &lt;vector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        android:width=&quot;908dp&quot;\r\n        android:height=&quot;804dp&quot;\r\n        android:viewportWidth=&quot;908&quot;\r\n        android:viewportHeight=&quot;804&quot;&gt;\r\n        &lt;path\r\n          android:pathData=&quot;M0,0L541.08,0Q515.69,19.78 500.21,47.45Q488.31,68.72 483.35,93.11C482.95,95.1 482.81,97.62 482.35,99.8C478.68,117.24 479.43,137.46 482.18,155.02C497.37,252.38 606.34,296.43 683.44,332.29C797.61,385.4 904.17,478.44 908,614.56L908,627.31C905.67,690.02 884.34,749.83 853.69,804L0,804L0,0Z&quot;\r\n          android:fillColor=&quot;#ecd3f3&quot;/&gt;\r\n    &lt;/vector&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n\r\nHow did I made it?\r\n\r\n 1. Downloaded your image\r\n 2. Uploaded [this][1] website\r\n 3. The website gave me vector format of your shape.\r\n 4. I added android studio as a vector asset (You can see below)\r\n\r\nImage 1: [Select This][2]\r\nImage 2: [Browse svg file][3]\r\n\r\n\r\n  [1]: https://vectorizer.ai\r\n  [2]: https://i.stack.imgur.com/pfcna.png\r\n  [3]: https://i.stack.imgur.com/aSlfV.png","title":"Custom shape drawable in android programmatically","body":"<p>You can use this:</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"false\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;vector xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:width=\"908dp\"\n    android:height=\"804dp\"\n    android:viewportWidth=\"908\"\n    android:viewportHeight=\"804\"&gt;\n    &lt;path\n      android:pathData=\"M0,0L541.08,0Q515.69,19.78 500.21,47.45Q488.31,68.72 483.35,93.11C482.95,95.1 482.81,97.62 482.35,99.8C478.68,117.24 479.43,137.46 482.18,155.02C497.37,252.38 606.34,296.43 683.44,332.29C797.61,385.4 904.17,478.44 908,614.56L908,627.31C905.67,690.02 884.34,749.83 853.69,804L0,804L0,0Z\"\n      android:fillColor=\"#ecd3f3\"/&gt;\n&lt;/vector&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>How did I made it?</p>\n<ol>\n<li>Downloaded your image</li>\n<li>Uploaded <a href=\"https://vectorizer.ai\" rel=\"nofollow noreferrer\">this</a> website</li>\n<li>The website gave me vector format of your shape.</li>\n<li>I added android studio as a vector asset (You can see below)</li>\n</ol>\n<p>Image 1: <a href=\"https://i.stack.imgur.com/pfcna.png\" rel=\"nofollow noreferrer\">Select This</a>\nImage 2: <a href=\"https://i.stack.imgur.com/aSlfV.png\" rel=\"nofollow noreferrer\">Browse svg file</a></p>\n"}],"owner":{"account_id":8852920,"reputation":393,"user_id":6611534,"display_name":"khushbu vadi"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1691752617,"answer_count":2,"score":0,"last_activity_date":1691677158,"creation_date":1691639691,"question_id":76872556,"body_markdown":"I want to make this custom shape in drawable in android studio. How to make this shape?\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/11Hzy.png\r\n\r\n\r\n","title":"Custom shape drawable in android programmatically","body":"<p>I want to make this custom shape in drawable in android studio. How to make this shape?</p>\n<p><a href=\"https://i.stack.imgur.com/11Hzy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/11Hzy.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","oracle","ojdbc"],"answers":[{"comments":[{"owner":{"account_id":1550701,"reputation":836,"user_id":2788531,"accept_rate":88,"display_name":"Adrian"},"score":0,"creation_date":1416497771,"post_id":27029238,"comment_id":42605833,"body_markdown":"Please ignore the name of the variable because I forgot to edit in this post haha. Btw, the problem is that the program is not terminating and stuck while it is executing executeUpdate() method.","body":"Please ignore the name of the variable because I forgot to edit in this post haha. Btw, the problem is that the program is not terminating and stuck while it is executing executeUpdate() method."}],"tags":[],"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1416440781,"creation_date":1416440781,"answer_id":27029238,"question_id":27029049,"body_markdown":"If you didn&#39;t get an exception, which you don&#39;t state one way or the other, you need to examine the return value of `executeUpdate()`, which is the number of affected rows. If it was zero, no rows were deleted, probably because nothing matched the `WHERE` clause. If it was non-zero, that many rows were deleted. You certainly shouldn&#39;t be printing `&quot;Record is deleted!&quot;` when nothing may have happened at all. Your program may be lying to the user.\r\n\r\nNB `insertTableSQL` is a stupid name for a variable containing an SQL `DELETE` statement.","title":"Java - JDBC executeUpdate() not working","body":"<p>If you didn't get an exception, which you don't state one way or the other, you need to examine the return value of <code>executeUpdate()</code>, which is the number of affected rows. If it was zero, no rows were deleted, probably because nothing matched the <code>WHERE</code> clause. If it was non-zero, that many rows were deleted. You certainly shouldn't be printing <code>\"Record is deleted!\"</code> when nothing may have happened at all. Your program may be lying to the user.</p>\n\n<p>NB <code>insertTableSQL</code> is a stupid name for a variable containing an SQL <code>DELETE</code> statement.</p>\n"},{"tags":[],"owner":{"account_id":1550701,"reputation":836,"user_id":2788531,"accept_rate":88,"display_name":"Adrian"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1416499582,"creation_date":1416499582,"answer_id":27044124,"question_id":27029049,"body_markdown":"**THIS IS NOT THE OFFICIAL ANSWER, BUT THE PROBLEM IS RESOLVED SOMEHOW**\r\n\r\nThere was Java update notification, and I followed it. After update, the status of JRE System Library(JavaSE - 1.7) is changed to **unbound**. I changed Execution environment to JavaSE - 1.6 (Oracle WebLogic Server 11gR1 (10.3.6) JRE), and the issue was resolved..weird..\r\n\r\nThere was no syntax problem \r\n\r\n    DELETE FROM mytable WHERE id = 6\r\n    DELETE mytable WHERE id = 6\r\n\r\nIf anyone can explain me how this issue could be resolved, your help would be much appreciated.\r\n\r\nFYI. \r\n\r\n    C:\\&gt;java -version\r\n    java version &quot;1.7.0_67&quot;\r\n    Java(TM) SE Runtime Environment (build 1.7.0_67-b01)\r\n    Java HotSpot(TM) Client VM (build 24.65-b04, mixed mode, sharing)\r\n","title":"Java - JDBC executeUpdate() not working","body":"<p><strong>THIS IS NOT THE OFFICIAL ANSWER, BUT THE PROBLEM IS RESOLVED SOMEHOW</strong></p>\n\n<p>There was Java update notification, and I followed it. After update, the status of JRE System Library(JavaSE - 1.7) is changed to <strong>unbound</strong>. I changed Execution environment to JavaSE - 1.6 (Oracle WebLogic Server 11gR1 (10.3.6) JRE), and the issue was resolved..weird..</p>\n\n<p>There was no syntax problem </p>\n\n<pre><code>DELETE FROM mytable WHERE id = 6\nDELETE mytable WHERE id = 6\n</code></pre>\n\n<p>If anyone can explain me how this issue could be resolved, your help would be much appreciated.</p>\n\n<p>FYI. </p>\n\n<pre><code>C:\\&gt;java -version\njava version \"1.7.0_67\"\nJava(TM) SE Runtime Environment (build 1.7.0_67-b01)\nJava HotSpot(TM) Client VM (build 24.65-b04, mixed mode, sharing)\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1337754,"reputation":1329,"user_id":1280060,"accept_rate":50,"display_name":"jdex"},"score":0,"creation_date":1521602089,"post_id":47978906,"comment_id":85796740,"body_markdown":"This is what it was for me too, an operation on the table in sqldeveloper was performed but not committed, my java code would block at executeUpdate.","body":"This is what it was for me too, an operation on the table in sqldeveloper was performed but not committed, my java code would block at executeUpdate."}],"tags":[],"owner":{"account_id":10037608,"reputation":41,"user_id":7421630,"display_name":"Sushanth Bangera"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1514369065,"creation_date":1514292621,"answer_id":47978906,"question_id":27029049,"body_markdown":"Since its stuck it must be waiting for some resource which might be locked. \r\nI had faced this issue for simple update query. Here the update query was run on sql developer tool and the commit was not done. \r\n\r\nThanks to [a comment by Prabhmanmeet Singh on this link][1]\r\n\r\n\r\n  [1]: https://coderanch.com/t/304569/databases/executeUpdate-updating-exception-thrown","title":"Java - JDBC executeUpdate() not working","body":"<p>Since its stuck it must be waiting for some resource which might be locked. \nI had faced this issue for simple update query. Here the update query was run on sql developer tool and the commit was not done. </p>\n\n<p>Thanks to <a href=\"https://coderanch.com/t/304569/databases/executeUpdate-updating-exception-thrown\" rel=\"nofollow noreferrer\">a comment by Prabhmanmeet Singh on this link</a></p>\n"}],"owner":{"account_id":1550701,"reputation":836,"user_id":2788531,"accept_rate":88,"display_name":"Adrian"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11193,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":27044124,"answer_count":3,"score":1,"last_activity_date":1691676855,"creation_date":1416439766,"question_id":27029049,"body_markdown":"I am trying to insert/update/delete a row using jdbc. Inserting is working, and I only changed the query string (or **insertTableSQL**) By debugging, I suspect that **executeUpdate()** is not terminated and console does not show me any error message. (JUST BLANK)\r\n\r\n**[EDIT]**&lt;br/&gt;\r\n**The program is stuck while executeUpate() is exeucting, meaning that I cannot even see the return value**\r\n\r\nInstead of using query string, I also tried **PreparedStatement** but no luck :(\r\n\r\n    String deleteRecordSQL = &quot;DELETE mytable WHERE id = ?&quot;;\r\n    PreparedStatement ps = dbConnection.prepareStatement(deleteRecordSQL);\r\n\tps.setInt(1, 6);\r\n\tps.executeUpdate();\r\n\r\nFull Code:\r\n\r\n    import java.sql.DriverManager;\r\n    import java.sql.Connection;\r\n    import java.sql.PreparedStatement;\r\n    import java.sql.SQLException;\r\n    import java.sql.Statement;\r\n \r\n    public class DeleteRow {\r\n \r\n\tprivate static final String DB_DRIVER = &quot;oracle.jdbc.driver.OracleDriver&quot;;\r\n\tprivate static final String DB_CONNECTION = &quot;&quot;;\r\n\tprivate static final String DB_USER = &quot;&quot;;\r\n\tprivate static final String DB_PASSWORD = &quot;&quot;;\r\n \r\n\tpublic static void main(String[] argv) {\r\n \r\n\t\ttry {\r\n \r\n\t\t\tdeleteRecordFromDbUserTable();\r\n \r\n\t\t} catch (SQLException e) {\r\n \r\n\t\t\tSystem.out.println(e.getMessage());\r\n \r\n\t\t}\r\n \r\n\t}\r\n \r\n\tprivate static void deleteRecordFromDbUserTable() throws SQLException {\r\n \r\n\t\tConnection dbConnection = null;\r\n\t\tStatement statement = null;\r\n \t\t\r\n\t\ttry {\r\n\t\t\tdbConnection = getDBConnection();\r\n\t\t\tstatement = dbConnection.createStatement();\r\n\t\t\tstatement.executeUpdate(&quot;DELETE mytable WHERE id = 6&quot;);\r\n \r\n\t\t\tSystem.out.println(&quot;Record is deleted!&quot;);\r\n\r\n \r\n\t\t} catch (SQLException e) {\r\n \r\n\t\t\tSystem.out.println(e.getMessage());\r\n \r\n\t\t} finally {\r\n \r\n\t\t\tif (statement != null) {\r\n\t\t\t\tstatement.close();\r\n\t\t\t}\r\n \r\n\t\t\tif (dbConnection != null) {\r\n\t\t\t\tdbConnection.close();\r\n\t\t\t}\r\n \r\n\t\t}\r\n \r\n\t}\r\n \r\n\tprivate static Connection getDBConnection() {\r\n \r\n\t\tConnection dbConnection = null;\r\n \r\n\t\ttry {\r\n \r\n\t\t\tClass.forName(DB_DRIVER);\r\n \r\n\t\t} catch (ClassNotFoundException e) {\r\n \r\n\t\t\tSystem.out.println(e.getMessage());\r\n \r\n\t\t}\r\n \r\n\t\ttry {\r\n \r\n\t\t\tdbConnection = DriverManager.getConnection(\r\n                               DB_CONNECTION, DB_USER,DB_PASSWORD);\r\n\t\t\treturn dbConnection;\r\n \r\n\t\t} catch (SQLException e) {\r\n \r\n\t\t\tSystem.out.println(e.getMessage());\r\n \r\n\t\t}\r\n \r\n\t\treturn dbConnection;\r\n \r\n\t}\r\n}\r\n\r\nAny help?","title":"Java - JDBC executeUpdate() not working","body":"<p>I am trying to insert/update/delete a row using jdbc. Inserting is working, and I only changed the query string (or <strong>insertTableSQL</strong>) By debugging, I suspect that <strong>executeUpdate()</strong> is not terminated and console does not show me any error message. (JUST BLANK)</p>\n\n<p><strong>[EDIT]</strong><br/>\n<strong>The program is stuck while executeUpate() is exeucting, meaning that I cannot even see the return value</strong></p>\n\n<p>Instead of using query string, I also tried <strong>PreparedStatement</strong> but no luck :(</p>\n\n<pre><code>String deleteRecordSQL = \"DELETE mytable WHERE id = ?\";\nPreparedStatement ps = dbConnection.prepareStatement(deleteRecordSQL);\nps.setInt(1, 6);\nps.executeUpdate();\n</code></pre>\n\n<p>Full Code:</p>\n\n<pre><code>import java.sql.DriverManager;\nimport java.sql.Connection;\nimport java.sql.PreparedStatement;\nimport java.sql.SQLException;\nimport java.sql.Statement;\n\npublic class DeleteRow {\n\nprivate static final String DB_DRIVER = \"oracle.jdbc.driver.OracleDriver\";\nprivate static final String DB_CONNECTION = \"\";\nprivate static final String DB_USER = \"\";\nprivate static final String DB_PASSWORD = \"\";\n\npublic static void main(String[] argv) {\n\n    try {\n\n        deleteRecordFromDbUserTable();\n\n    } catch (SQLException e) {\n\n        System.out.println(e.getMessage());\n\n    }\n\n}\n\nprivate static void deleteRecordFromDbUserTable() throws SQLException {\n\n    Connection dbConnection = null;\n    Statement statement = null;\n\n    try {\n        dbConnection = getDBConnection();\n        statement = dbConnection.createStatement();\n        statement.executeUpdate(\"DELETE mytable WHERE id = 6\");\n\n        System.out.println(\"Record is deleted!\");\n\n\n    } catch (SQLException e) {\n\n        System.out.println(e.getMessage());\n\n    } finally {\n\n        if (statement != null) {\n            statement.close();\n        }\n\n        if (dbConnection != null) {\n            dbConnection.close();\n        }\n\n    }\n\n}\n\nprivate static Connection getDBConnection() {\n\n    Connection dbConnection = null;\n\n    try {\n\n        Class.forName(DB_DRIVER);\n\n    } catch (ClassNotFoundException e) {\n\n        System.out.println(e.getMessage());\n\n    }\n\n    try {\n\n        dbConnection = DriverManager.getConnection(\n                           DB_CONNECTION, DB_USER,DB_PASSWORD);\n        return dbConnection;\n\n    } catch (SQLException e) {\n\n        System.out.println(e.getMessage());\n\n    }\n\n    return dbConnection;\n\n}\n</code></pre>\n\n<p>}</p>\n\n<p>Any help?</p>\n"},{"tags":["java","spring","spring-boot","spring-boot-cloud"],"comments":[{"owner":{"account_id":12908744,"reputation":3232,"user_id":9335205,"accept_rate":50,"display_name":"JGleason"},"score":0,"creation_date":1691521088,"post_id":76821109,"comment_id":135502150,"body_markdown":"So going theory is it deals with the ability to serialize the calls in some sort of order but still a theory.","body":"So going theory is it deals with the ability to serialize the calls in some sort of order but still a theory."},{"owner":{"account_id":1056871,"reputation":117749,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":0,"creation_date":1699961894,"post_id":76821109,"comment_id":136593734,"body_markdown":"you are kind of comparing oranges and apples. `BootstrapRegistryInitializer` is used most of the time to register a bean that is needed in the _bootstrap_ part of your application. the easiest way to make a difference between these two is to read what `bootstrap.yaml` vs `application.yaml` is. Also note that bootstrap, in general, is deprecated, in favor of ConfigData API. `EnvironmentPostProcessor` is exactly that, to post process your Environment.","body":"you are kind of comparing oranges and apples. <code>BootstrapRegistryInitializer</code> is used most of the time to register a bean that is needed in the <i>bootstrap</i> part of your application. the easiest way to make a difference between these two is to read what <code>bootstrap.yaml</code> vs <code>application.yaml</code> is. Also note that bootstrap, in general, is deprecated, in favor of ConfigData API. <code>EnvironmentPostProcessor</code> is exactly that, to post process your Environment."}],"answers":[{"comments":[{"owner":{"account_id":12908744,"reputation":3232,"user_id":9335205,"accept_rate":50,"display_name":"JGleason"},"score":0,"creation_date":1691697678,"post_id":76876541,"comment_id":135530451,"body_markdown":"Can you provide links in the documentation to your answer to provide references for your assertions and I will give the bounty","body":"Can you provide links in the documentation to your answer to provide references for your assertions and I will give the bounty"},{"owner":{"account_id":22668541,"reputation":136,"user_id":16840542,"display_name":"Ishant Modi"},"score":0,"creation_date":1691728973,"post_id":76876541,"comment_id":135533615,"body_markdown":"Sure!\nUse this link for bootstrapregistryinitializer and also check out its &quot;see also&quot; links: [link](https://javadoc.org/artifact/org.springframework.boot/spring-boot/2.6.3/docs/org/springframework/boot/BootstrapRegistryInitializer.html)\n\nThis link explains my point for environmentpostprocessor with an example  : [link](https://www.baeldung.com/spring-boot-environmentpostprocessor)","body":"Sure! Use this link for bootstrapregistryinitializer and also check out its &quot;see also&quot; links: <a href=\"https://javadoc.org/artifact/org.springframework.boot/spring-boot/2.6.3/docs/org/springframework/boot/BootstrapRegistryInitializer.html\" rel=\"nofollow noreferrer\">link</a>  This link explains my point for environmentpostprocessor with an example  : <a href=\"https://www.baeldung.com/spring-boot-environmentpostprocessor\" rel=\"nofollow noreferrer\">link</a>"}],"tags":[],"owner":{"account_id":22668541,"reputation":136,"user_id":16840542,"display_name":"Ishant Modi"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1691676677,"creation_date":1691676677,"answer_id":76876541,"question_id":76821109,"body_markdown":"Both BootstrapRegistryInitializer and EnvironmentPostProcessor are used for customizing the Spring Boot application&#39;s initialization process, but they serve slightly different purposes. Breaking  down their differences and appropriate use cases:\r\n\r\n**1. BootstrapRegistryInitializer:**\r\n\r\nThis interface is used to register additional configuration sources early in the Spring Boot application&#39;s startup process. It allows you to contribute to the Spring Bootstrap Context, which is a special context that exists before the main ApplicationContext is fully created. It&#39;s a mechanism that allows you to affect the application&#39;s configuration very early in the startup sequence.\r\n\r\n**Use Cases:**\r\n\r\nRegistering additional configuration sources or properties that should be available during application context creation.\r\nInfluencing the application context configuration at a very low level before other processing takes place.\r\nCustomizing the application&#39;s behavior based on conditions that need to be evaluated very early.\r\n\r\n**2.EnvironmentPostProcessor:**\r\n\r\nThis interface is used to customize the Spring Environment before the application context is created. The Environment holds properties, profiles, and other configuration details used by the application. This provides a way to modify these configuration details before they are used to create the main application context.\r\n\r\n**Use Cases:**\r\n\r\nModifying properties, profiles, or configuration settings based on external factors or conditions.\r\nDynamically adjusting configuration values that are needed during the application context creation.\r\nImplementing logic that should influence the application context based on specific environment characteristics.\r\n\r\nIn your provided examples, both BootstrapRegistryInitializer and EnvironmentPostProcessor can be used to achieve similar goals, but the key distinction is the point in the startup process at which they operate and the context they interact with.\r\n\r\nThere is no indication that either of these mechanisms is deprecated in favor of the other. The choice between them depends on the specific use case and the timing of customization required. If you need to affect the Bootstrap Context very early in the startup process, BootstrapRegistryInitializer is suitable. If you need to customize the Environment before the main application context is created, EnvironmentPostProcessor is the appropriate choice.\r\n\r\nChoose the one that aligns best with your requirements and the timing of your customization logic.","title":"What is the difference between BootstrapRegistryInitializer.initialize and EnvironmentPostProcessor.postProcessEnvironment","body":"<p>Both BootstrapRegistryInitializer and EnvironmentPostProcessor are used for customizing the Spring Boot application's initialization process, but they serve slightly different purposes. Breaking  down their differences and appropriate use cases:</p>\n<p><strong>1. BootstrapRegistryInitializer:</strong></p>\n<p>This interface is used to register additional configuration sources early in the Spring Boot application's startup process. It allows you to contribute to the Spring Bootstrap Context, which is a special context that exists before the main ApplicationContext is fully created. It's a mechanism that allows you to affect the application's configuration very early in the startup sequence.</p>\n<p><strong>Use Cases:</strong></p>\n<p>Registering additional configuration sources or properties that should be available during application context creation.\nInfluencing the application context configuration at a very low level before other processing takes place.\nCustomizing the application's behavior based on conditions that need to be evaluated very early.</p>\n<p><strong>2.EnvironmentPostProcessor:</strong></p>\n<p>This interface is used to customize the Spring Environment before the application context is created. The Environment holds properties, profiles, and other configuration details used by the application. This provides a way to modify these configuration details before they are used to create the main application context.</p>\n<p><strong>Use Cases:</strong></p>\n<p>Modifying properties, profiles, or configuration settings based on external factors or conditions.\nDynamically adjusting configuration values that are needed during the application context creation.\nImplementing logic that should influence the application context based on specific environment characteristics.</p>\n<p>In your provided examples, both BootstrapRegistryInitializer and EnvironmentPostProcessor can be used to achieve similar goals, but the key distinction is the point in the startup process at which they operate and the context they interact with.</p>\n<p>There is no indication that either of these mechanisms is deprecated in favor of the other. The choice between them depends on the specific use case and the timing of customization required. If you need to affect the Bootstrap Context very early in the startup process, BootstrapRegistryInitializer is suitable. If you need to customize the Environment before the main application context is created, EnvironmentPostProcessor is the appropriate choice.</p>\n<p>Choose the one that aligns best with your requirements and the timing of your customization logic.</p>\n"}],"owner":{"account_id":12908744,"reputation":3232,"user_id":9335205,"accept_rate":50,"display_name":"JGleason"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":196,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76876541,"answer_count":1,"score":0,"last_activity_date":1691676677,"creation_date":1690987874,"question_id":76821109,"body_markdown":"Looking to do some http calls to grab profile .yml files. I was looking into a couple interface implementations. One seems to be the `BootstrapRegistryInitializer.initialize` and looks like this...\r\n\r\n```java\r\npublic class Boostrap implements BootstrapRegistryInitializer {\r\n\r\n    @Override\r\n    public void initialize(BootstrapRegistry registry) {\r\n        registry.register(\r\n            BootstrapItem.class,\r\n            context -&gt; {\r\n                ... // Do something with the Bootstrap Context\r\n            }\r\n        );\r\n    }\r\n```\r\n\r\nthere is also the `void addCloseListener(ApplicationListener&lt;BootstrapContextClosedEvent&gt; listener);` event which allows access to both and says\r\n\r\n```\r\nAdd an ApplicationListener that will be called with a BootstrapContextClosedEvent when the BootstrapContext is closed and the ApplicationContext has been prepared.\r\n```\r\n\r\nThe other is `EnvironmentPostProcessor.postProcessEnvironment` and looks like this\r\n\r\n```java\r\n    private final ConfigurableBootstrapContext context;\r\n\r\n    public BootstrapPostProcessor(final ConfigurableBootstrapContext context) {\r\n        this.context = context;\r\n    }\r\n\r\n    @Override\r\n    public void postProcessEnvironment(final ConfigurableEnvironment environment, final SpringApplication application) {\r\n      ... // Do something with the Bootstrap Context\r\n    }\r\n}\r\n```\r\n\r\n**My question is they seem to be pretty similar in their interface so which one should I use in which scenarios? Is one deprecated in favor of the other pattern?**\r\n","title":"What is the difference between BootstrapRegistryInitializer.initialize and EnvironmentPostProcessor.postProcessEnvironment","body":"<p>Looking to do some http calls to grab profile .yml files. I was looking into a couple interface implementations. One seems to be the <code>BootstrapRegistryInitializer.initialize</code> and looks like this...</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Boostrap implements BootstrapRegistryInitializer {\n\n    @Override\n    public void initialize(BootstrapRegistry registry) {\n        registry.register(\n            BootstrapItem.class,\n            context -&gt; {\n                ... // Do something with the Bootstrap Context\n            }\n        );\n    }\n</code></pre>\n<p>there is also the <code>void addCloseListener(ApplicationListener&lt;BootstrapContextClosedEvent&gt; listener);</code> event which allows access to both and says</p>\n<pre><code>Add an ApplicationListener that will be called with a BootstrapContextClosedEvent when the BootstrapContext is closed and the ApplicationContext has been prepared.\n</code></pre>\n<p>The other is <code>EnvironmentPostProcessor.postProcessEnvironment</code> and looks like this</p>\n<pre class=\"lang-java prettyprint-override\"><code>    private final ConfigurableBootstrapContext context;\n\n    public BootstrapPostProcessor(final ConfigurableBootstrapContext context) {\n        this.context = context;\n    }\n\n    @Override\n    public void postProcessEnvironment(final ConfigurableEnvironment environment, final SpringApplication application) {\n      ... // Do something with the Bootstrap Context\n    }\n}\n</code></pre>\n<p><strong>My question is they seem to be pretty similar in their interface so which one should I use in which scenarios? Is one deprecated in favor of the other pattern?</strong></p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":7302044,"reputation":148,"user_id":5564391,"accept_rate":100,"display_name":"Elio"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1468661176,"creation_date":1468661176,"answer_id":38409666,"question_id":38409638,"body_markdown":"A square is a rectangle, but a rectangle is not a square, the same goes here, an integer is a float but a float is not an integer, plus here 5.6 is considered as a double. 5.6f is a float. Use: \r\n\r\n    int i= (int)5.6\r\nTo convert the double to integer.\r\n\r\n    int i= 5.6f //still won&#39;t work, (use the &quot;(int)&quot;)","title":"lossy conversion from float to int.type checking in java","body":"<p>A square is a rectangle, but a rectangle is not a square, the same goes here, an integer is a float but a float is not an integer, plus here 5.6 is considered as a double. 5.6f is a float. Use: </p>\n\n<pre><code>int i= (int)5.6\n</code></pre>\n\n<p>To convert the double to integer.</p>\n\n<pre><code>int i= 5.6f //still won't work, (use the \"(int)\")\n</code></pre>\n"}],"owner":{"account_id":8670378,"reputation":53,"user_id":6489516,"accept_rate":33,"display_name":"vineeth"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7600,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":1,"score":-1,"last_activity_date":1691676651,"creation_date":1468660945,"question_id":38409638,"body_markdown":"Why does assigning `5.6` to an `int` produce the `Possible lossy conversion from double to int` error?\r\n\r\n    int i = 5.6;\r\n\r\n\r\n[screenshot of the error][1]\r\n   \r\n  [1]: https://i.stack.imgur.com/2cAvn.png","title":"lossy conversion from float to int.type checking in java","body":"<p>Why does assigning <code>5.6</code> to an <code>int</code> produce the <code>Possible lossy conversion from double to int</code> error?</p>\n<pre><code>int i = 5.6;\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/2cAvn.png\" rel=\"nofollow noreferrer\">screenshot of the error</a></p>\n"},{"tags":["java","database","spring-boot","hibernate","jpa"],"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":1,"creation_date":1691614583,"post_id":76859862,"comment_id":135517055,"body_markdown":"This is a hibernate issue where they switched behavior in https://github.com/hibernate/hibernate-orm/discussions/4361 to use OID instead of text on Postgres. You might try writing your own custom dialect to override that behavior change, or have it use TEXT without the Lob designation. Otherwise, there is no DB agnostic way to specify Text column type should be used within your entity - though you could define DB specific orm.xml files","body":"This is a hibernate issue where they switched behavior in <a href=\"https://github.com/hibernate/hibernate-orm/discussions/4361\" rel=\"nofollow noreferrer\">github.com/hibernate/hibernate-orm/discussions/4361</a> to use OID instead of text on Postgres. You might try writing your own custom dialect to override that behavior change, or have it use TEXT without the Lob designation. Otherwise, there is no DB agnostic way to specify Text column type should be used within your entity - though you could define DB specific orm.xml files"},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1691614940,"post_id":76859862,"comment_id":135517132,"body_markdown":"As per https://hibernate.atlassian.net/browse/HHH-14211 , you can use the @Type(type = ”text”) annotation, but I don&#39;t know how DB agnostic that is.","body":"As per <a href=\"https://hibernate.atlassian.net/browse/HHH-14211\" rel=\"nofollow noreferrer\">hibernate.atlassian.net/browse/HHH-14211</a> , you can use the @Type(type = ”text”) annotation, but I don&#39;t know how DB agnostic that is."}],"answers":[{"comments":[{"owner":{"account_id":897684,"reputation":1000,"user_id":934597,"accept_rate":41,"display_name":"Bahri G&#246;kcan"},"score":0,"creation_date":1691504955,"post_id":76860065,"comment_id":135498941,"body_markdown":"I updated the question to clarify. @Lob generates oid type column in postgresql","body":"I updated the question to clarify. @Lob generates oid type column in postgresql"}],"tags":[],"owner":{"account_id":1100252,"reputation":10087,"user_id":1092818,"display_name":"crizzis"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691501519,"creation_date":1691501519,"answer_id":76860065,"question_id":76859862,"body_markdown":"The question is a bit confusing because you first mention the type `LONGTEXT` which is specific to MySQL/MariaDB, and you then ask for a database-agnostic solution. \r\n\r\nAssuming you want for a large character-data type to be used (`LONGTEXT`, `CLOB`, `TEXT` etc.), isn&#39;t `@Lob private String longTextAttribute;` what you want?","title":"Configure JPA Attribute Converter to Use LONGTEXT Instead of VARCHAR","body":"<p>The question is a bit confusing because you first mention the type <code>LONGTEXT</code> which is specific to MySQL/MariaDB, and you then ask for a database-agnostic solution.</p>\n<p>Assuming you want for a large character-data type to be used (<code>LONGTEXT</code>, <code>CLOB</code>, <code>TEXT</code> etc.), isn't <code>@Lob private String longTextAttribute;</code> what you want?</p>\n"}],"owner":{"account_id":897684,"reputation":1000,"user_id":934597,"accept_rate":41,"display_name":"Bahri G&#246;kcan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":136,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691676282,"creation_date":1691499890,"question_id":76859862,"body_markdown":"I&#39;m using JPA attribute converters to map a custom data type to a database column. The attribute converter I&#39;ve implemented serializes my custom type to JSON and stores it as a VARCHAR column in the database. However, I need the column to be of type a large character-data type, and I&#39;d like to achieve this without writing RDBMS-specific column definitions.\r\n\r\nHere&#39;s the current implementation of my attribute converter:\r\n```\r\n@Converter\r\npublic class GenericDataConvertor implements AttributeConverter&lt;Object, String&gt; {\r\n    // ... (converter methods)\r\n}\r\n```\r\n\r\nThe issue is that the generated column in the database is of type VARCHAR, and I want it to be of type a large character-data type. I&#39;m aware that I can achieve this by providing RDBMS-specific column definitions, but I&#39;m looking for a more database-agnostic solution that would work across different database systems without modifying the column definition for each.\r\n\r\n\r\n\r\nConvertor is used \r\n```\r\n    @Convert(converter = GenericDataConvertor.class)\r\n    @Lob\r\n    Object value;\r\n```\r\n\r\nWhen I use @Lob, type of column becomes oid in Postgresql. But I want to it to be text type. \r\nIf I remove @Lob, column type becomes varchar. \r\n\r\n**My Questions:**\r\n\r\n 1. Is there a way to configure JPA or the attribute converter to generate a a large character-data type column instead of a VARCHAR column without writing RDBMS-specific column definitions?\r\n 2. Are there any annotations, configurations, or settings that I can use to influence the generated column type in a more database-agnostic manner?\r\n 3. If such an approach is not available, what would be the recommended way to handle this requirement while maintaining database portability?\r\n\r\nI appreciate any advice or guidance on how to achieve this modification to the column type without resorting to specifying RDBMS-specific column definitions. Thank you for your assistance!\r\n","title":"Configure JPA Attribute Converter to Use LONGTEXT Instead of VARCHAR","body":"<p>I'm using JPA attribute converters to map a custom data type to a database column. The attribute converter I've implemented serializes my custom type to JSON and stores it as a VARCHAR column in the database. However, I need the column to be of type a large character-data type, and I'd like to achieve this without writing RDBMS-specific column definitions.</p>\n<p>Here's the current implementation of my attribute converter:</p>\n<pre><code>@Converter\npublic class GenericDataConvertor implements AttributeConverter&lt;Object, String&gt; {\n    // ... (converter methods)\n}\n</code></pre>\n<p>The issue is that the generated column in the database is of type VARCHAR, and I want it to be of type a large character-data type. I'm aware that I can achieve this by providing RDBMS-specific column definitions, but I'm looking for a more database-agnostic solution that would work across different database systems without modifying the column definition for each.</p>\n<p>Convertor is used</p>\n<pre><code>    @Convert(converter = GenericDataConvertor.class)\n    @Lob\n    Object value;\n</code></pre>\n<p>When I use @Lob, type of column becomes oid in Postgresql. But I want to it to be text type.\nIf I remove @Lob, column type becomes varchar.</p>\n<p><strong>My Questions:</strong></p>\n<ol>\n<li>Is there a way to configure JPA or the attribute converter to generate a a large character-data type column instead of a VARCHAR column without writing RDBMS-specific column definitions?</li>\n<li>Are there any annotations, configurations, or settings that I can use to influence the generated column type in a more database-agnostic manner?</li>\n<li>If such an approach is not available, what would be the recommended way to handle this requirement while maintaining database portability?</li>\n</ol>\n<p>I appreciate any advice or guidance on how to achieve this modification to the column type without resorting to specifying RDBMS-specific column definitions. Thank you for your assistance!</p>\n"},{"tags":["java","javafx","tableview","onclicklistener","factory"],"comments":[{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":2,"creation_date":1691522421,"post_id":76862541,"comment_id":135502380,"body_markdown":"I see no reason that wouldn&#39;t work. Create and post a [mre].","body":"I see no reason that wouldn&#39;t work. Create and post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1691522752,"post_id":76862541,"comment_id":135502430,"body_markdown":"Note also that in JavaFX 20 and later, you could implement the formatting with `row.itemProperty().map(Job::onHoldProperty).orElse(false).addListener((obs, wasOnHold, isOnHold) -&gt; row.setStyle(isOnHold ? &quot;-fx-background-color: #baffba;&quot; : &quot;&quot;));`, which would avoid the need for subclassing `TableRow` and could be combined with the original implementation of drag and drop. (Still no reason your suggested approach doesn&#39;t work, though.)","body":"Note also that in JavaFX 20 and later, you could implement the formatting with <code>row.itemProperty().map(Job::onHoldProperty).orElse(false).ad&zwnj;&#8203;dListener((obs, wasOnHold, isOnHold) -&gt; row.setStyle(isOnHold ? &quot;-fx-background-color: #baffba;&quot; : &quot;&quot;));</code>, which would avoid the need for subclassing <code>TableRow</code> and could be combined with the original implementation of drag and drop. (Still no reason your suggested approach doesn&#39;t work, though.)"},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":3,"creation_date":1691531266,"post_id":76862541,"comment_id":135503741,"body_markdown":"I tested this out as best I could without a reproducible example, and it worked just fine. If it’s not working, the problem almost certainly lies in code you haven’t posted","body":"I tested this out as best I could without a reproducible example, and it worked just fine. If it’s not working, the problem almost certainly lies in code you haven’t posted"},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":2,"creation_date":1691539439,"post_id":76862541,"comment_id":135504578,"body_markdown":"A more generic solution to styling the on hold jobs would be to use a style class or psuedoclass, similar to how the default tableview row styling styles odd and even rows.  But that is not really the issue with the code you have, so I won&#39;t elaborate on it here.","body":"A more generic solution to styling the on hold jobs would be to use a style class or psuedoclass, similar to how the default tableview row styling styles odd and even rows.  But that is not really the issue with the code you have, so I won&#39;t elaborate on it here."},{"owner":{"account_id":1026356,"reputation":461,"user_id":1035582,"accept_rate":79,"display_name":"cworner1"},"score":1,"creation_date":1691570808,"post_id":76862541,"comment_id":135508201,"body_markdown":"Thank you for your replies.  I genuinely didn&#39;t think I could write minimal reproducible code because I thought the underlying problem was my lack of understanding of functions, lambdas and Callbacks. Because I was told it *should* work I went back to basics and rewrote the code from scratch and it does indeed work. I haven&#39;t really identified what the original problem was.","body":"Thank you for your replies.  I genuinely didn&#39;t think I could write minimal reproducible code because I thought the underlying problem was my lack of understanding of functions, lambdas and Callbacks. Because I was told it <i>should</i> work I went back to basics and rewrote the code from scratch and it does indeed work. I haven&#39;t really identified what the original problem was."}],"owner":{"account_id":1026356,"reputation":461,"user_id":1035582,"accept_rate":79,"display_name":"cworner1"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1691613522,"answer_count":0,"score":1,"last_activity_date":1691676233,"creation_date":1691521655,"question_id":76862541,"body_markdown":"I have a class `JobTable` which extends `TableView`. The `TableView` has a *drag and drop* feature from the following code:\r\n\r\n    setRowFactory(tv -&gt; {\r\n        TableRow&lt;Job&gt; row = new TableRow&lt;&gt;();\r\n        row.setOnDragDetected(event -&gt; {\r\n            if (!row.isEmpty()) {\r\n                Dragboard db = row.startDragAndDrop(TransferMode.MOVE);\r\n                ClipboardContent content = new ClipboardContent();\r\n                content.putString(Integer.toString(row.getIndex()));\r\n                db.setContent(content);\r\n            }\r\n\r\n            event.consume();\r\n        });\r\n\r\n        row.setOnDragOver(event -&gt; {\r\n            Dragboard db = event.getDragboard();\r\n            if (db.hasString()) {\r\n                int draggedIndex = Integer.parseInt(db.getString());\r\n                if (draggedIndex != row.getIndex())\r\n                    event.acceptTransferModes(TransferMode.MOVE);\r\n            }\r\n\r\n            event.consume();\r\n        });\r\n\r\n        row.setOnDragDropped(event -&gt; {\r\n            Dragboard db = event.getDragboard();\r\n            if (db.hasString()) {\r\n                int draggedIndex = Integer.parseInt(db.getString());\r\n                Job draggedItem = getItems().get(draggedIndex);\r\n\r\n                int dropIndex = (row.isEmpty()) ? this.getItems().size() : row.getIndex();\r\n                    \r\n                reIndexJobs(draggedIndex + 1, dropIndex + 1, draggedItem.getCategoryProperty().getValue());\r\n\r\n                event.setDropCompleted(true);\r\n                refreshDataModel();\r\n                getSelectionModel().select(dropIndex);\r\n            }\r\n\r\n            event.consume();\r\n        });\r\n\r\n        return row;\r\n    });\r\n\r\nCode works fine. I later wanted to add some formatting so I wrote the following code afterwards:\r\n\r\n    setRowFactory(tv -&gt; new TableRow&lt;Job&gt;() {\r\n        @Override\r\n        protected void updateItem(Job job, boolean empty) {\r\n            super.updateItem(job, empty);\r\n                \r\n            System.out.println(&quot;Checkpoint&quot;);\r\n                \r\n            if (job == null)\r\n                setStyle(&quot;&quot;);\r\n            else if (job.isOnHold())\r\n                setStyle(&quot;-fx-background-color: #baffba;&quot;);\r\n            else\r\n                setStyle(&quot;&quot;);\r\n        }\r\n    });\r\n\r\nThis also worked correctly. However at the moment I can only `setRowFactory` to either one or the other. I tried to combine both features by extending `TableRow` in an inner class declared in `JobTable`:\r\n\r\n    public class CustomTableRow extends TableRow&lt;Job&gt; {\r\n        public CustomTableRow() {\r\n            super();            \r\n            \r\n            setOnDragDetected(event -&gt; {\r\n                if (!isEmpty()) {\r\n                    Dragboard db = startDragAndDrop(TransferMode.MOVE);\r\n                    ClipboardContent content = new ClipboardContent();\r\n                    content.putString(Integer.toString(getIndex()));\r\n                    db.setContent(content);\r\n                }\r\n\r\n                event.consume();\r\n            });\r\n\r\n            setOnDragOver(event -&gt; {\r\n                Dragboard db = event.getDragboard();\r\n                if (db.hasString()) {\r\n                    int draggedIndex = Integer.parseInt(db.getString());\r\n                    if (draggedIndex != getIndex())\r\n                        event.acceptTransferModes(TransferMode.MOVE);\r\n                }\r\n\r\n                event.consume();\r\n            });\r\n\r\n            setOnDragDropped(event -&gt; {\r\n                Dragboard db = event.getDragboard();\r\n                if (db.hasString()) {\r\n                    int draggedIndex = Integer.parseInt(db.getString());\r\n                    Job draggedItem = getItems().get(draggedIndex);\r\n\r\n                    int dropIndex = (isEmpty()) ? getItems().size() : getIndex();            \r\n                    \r\n                    reIndexJobs(draggedIndex + 1, dropIndex + 1, \r\n                            draggedItem.getCategoryProperty().getValue());\r\n\r\n                    event.setDropCompleted(true);\r\n                    refreshDataModel();\r\n                    getSelectionModel().select(dropIndex);\r\n                }\r\n\r\n                event.consume();\r\n            });\r\n        }\r\n        \r\n        @Override\r\n        protected void updateItem(Job job, boolean empty) {\r\n            super.updateItem(job, empty);\r\n\r\n            if (job == null) \r\n                setStyle(&quot;&quot;);                        \r\n            else if (job.isOnHold()) \r\n                setStyle(&quot;-fx-background-color: #baffba;&quot;);                        \r\n            else \r\n                setStyle(&quot;&quot;);\r\n        }\r\n    }\r\n\r\n\r\nThen set the row factory to the new `CustomTableRow` class: ```setRowFactory(tv -&gt; new CustomTableRow());```\r\n\r\nThe formatting works, but I&#39;ve lost the drag and drop feature. I&#39;m fairly new to functional programming so I&#39;m struggling a bit...","title":"Add both listeners and text formatting to TableRow","body":"<p>I have a class <code>JobTable</code> which extends <code>TableView</code>. The <code>TableView</code> has a <em>drag and drop</em> feature from the following code:</p>\n<pre><code>setRowFactory(tv -&gt; {\n    TableRow&lt;Job&gt; row = new TableRow&lt;&gt;();\n    row.setOnDragDetected(event -&gt; {\n        if (!row.isEmpty()) {\n            Dragboard db = row.startDragAndDrop(TransferMode.MOVE);\n            ClipboardContent content = new ClipboardContent();\n            content.putString(Integer.toString(row.getIndex()));\n            db.setContent(content);\n        }\n\n        event.consume();\n    });\n\n    row.setOnDragOver(event -&gt; {\n        Dragboard db = event.getDragboard();\n        if (db.hasString()) {\n            int draggedIndex = Integer.parseInt(db.getString());\n            if (draggedIndex != row.getIndex())\n                event.acceptTransferModes(TransferMode.MOVE);\n        }\n\n        event.consume();\n    });\n\n    row.setOnDragDropped(event -&gt; {\n        Dragboard db = event.getDragboard();\n        if (db.hasString()) {\n            int draggedIndex = Integer.parseInt(db.getString());\n            Job draggedItem = getItems().get(draggedIndex);\n\n            int dropIndex = (row.isEmpty()) ? this.getItems().size() : row.getIndex();\n                \n            reIndexJobs(draggedIndex + 1, dropIndex + 1, draggedItem.getCategoryProperty().getValue());\n\n            event.setDropCompleted(true);\n            refreshDataModel();\n            getSelectionModel().select(dropIndex);\n        }\n\n        event.consume();\n    });\n\n    return row;\n});\n</code></pre>\n<p>Code works fine. I later wanted to add some formatting so I wrote the following code afterwards:</p>\n<pre><code>setRowFactory(tv -&gt; new TableRow&lt;Job&gt;() {\n    @Override\n    protected void updateItem(Job job, boolean empty) {\n        super.updateItem(job, empty);\n            \n        System.out.println(&quot;Checkpoint&quot;);\n            \n        if (job == null)\n            setStyle(&quot;&quot;);\n        else if (job.isOnHold())\n            setStyle(&quot;-fx-background-color: #baffba;&quot;);\n        else\n            setStyle(&quot;&quot;);\n    }\n});\n</code></pre>\n<p>This also worked correctly. However at the moment I can only <code>setRowFactory</code> to either one or the other. I tried to combine both features by extending <code>TableRow</code> in an inner class declared in <code>JobTable</code>:</p>\n<pre><code>public class CustomTableRow extends TableRow&lt;Job&gt; {\n    public CustomTableRow() {\n        super();            \n        \n        setOnDragDetected(event -&gt; {\n            if (!isEmpty()) {\n                Dragboard db = startDragAndDrop(TransferMode.MOVE);\n                ClipboardContent content = new ClipboardContent();\n                content.putString(Integer.toString(getIndex()));\n                db.setContent(content);\n            }\n\n            event.consume();\n        });\n\n        setOnDragOver(event -&gt; {\n            Dragboard db = event.getDragboard();\n            if (db.hasString()) {\n                int draggedIndex = Integer.parseInt(db.getString());\n                if (draggedIndex != getIndex())\n                    event.acceptTransferModes(TransferMode.MOVE);\n            }\n\n            event.consume();\n        });\n\n        setOnDragDropped(event -&gt; {\n            Dragboard db = event.getDragboard();\n            if (db.hasString()) {\n                int draggedIndex = Integer.parseInt(db.getString());\n                Job draggedItem = getItems().get(draggedIndex);\n\n                int dropIndex = (isEmpty()) ? getItems().size() : getIndex();            \n                \n                reIndexJobs(draggedIndex + 1, dropIndex + 1, \n                        draggedItem.getCategoryProperty().getValue());\n\n                event.setDropCompleted(true);\n                refreshDataModel();\n                getSelectionModel().select(dropIndex);\n            }\n\n            event.consume();\n        });\n    }\n    \n    @Override\n    protected void updateItem(Job job, boolean empty) {\n        super.updateItem(job, empty);\n\n        if (job == null) \n            setStyle(&quot;&quot;);                        \n        else if (job.isOnHold()) \n            setStyle(&quot;-fx-background-color: #baffba;&quot;);                        \n        else \n            setStyle(&quot;&quot;);\n    }\n}\n</code></pre>\n<p>Then set the row factory to the new <code>CustomTableRow</code> class: <code>setRowFactory(tv -&gt; new CustomTableRow());</code></p>\n<p>The formatting works, but I've lost the drag and drop feature. I'm fairly new to functional programming so I'm struggling a bit...</p>\n"},{"tags":["java","eclipse-plugin","decompiler"],"comments":[{"owner":{"account_id":3159259,"reputation":109678,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1691684708,"post_id":76876480,"comment_id":135528022,"body_markdown":"What do you get when you click &quot;Add...&quot; in the &quot;Associated editors&quot; section","body":"What do you get when you click &quot;Add...&quot; in the &quot;Associated editors&quot; section"},{"owner":{"account_id":24207140,"reputation":135,"user_id":18164170,"display_name":"Pramit Pakhira"},"score":0,"creation_date":1691689267,"post_id":76876480,"comment_id":135528903,"body_markdown":"@greg-449 Clicking on Add I am able to see two types of editors to choose from - 1) Internal editors 2) External programs. Both have got a number of options under them. However, neither fits here. I assume, an Editor related with this Enhanced Class Decompiler should have been added there.","body":"@greg-449 Clicking on Add I am able to see two types of editors to choose from - 1) Internal editors 2) External programs. Both have got a number of options under them. However, neither fits here. I assume, an Editor related with this Enhanced Class Decompiler should have been added there."},{"owner":{"account_id":3159259,"reputation":109678,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1691695761,"post_id":76876480,"comment_id":135530112,"body_markdown":"Does it show up in the installed software list (Help &gt; About Eclipse &gt; Installation Details &gt; Installation Software)? Try the install from the update site as described on the project page https://ecd-plugin.github.io/ecd/","body":"Does it show up in the installed software list (Help &gt; About Eclipse &gt; Installation Details &gt; Installation Software)? Try the install from the update site as described on the project page <a href=\"https://ecd-plugin.github.io/ecd/\" rel=\"nofollow noreferrer\">ecd-plugin.github.io/ecd</a>"},{"owner":{"account_id":24207140,"reputation":135,"user_id":18164170,"display_name":"Pramit Pakhira"},"score":0,"creation_date":1691729363,"post_id":76876480,"comment_id":135533655,"body_markdown":"Yes, they did show up in that software list (Help &gt; About Eclipse &gt; Installation Details &gt; Installation Software). Additionally, I installed it again both from the project page guided steps and directly doing a drag and drop of the installer in running Eclipse workspace. However, still no luck.\nJust wanted to mention here, I am working in the Eclipse 2023-06 edition installed in a 64 bit Windows 11 system with JDK 17. Could this combination have anything to do with this issue?","body":"Yes, they did show up in that software list (Help &gt; About Eclipse &gt; Installation Details &gt; Installation Software). Additionally, I installed it again both from the project page guided steps and directly doing a drag and drop of the installer in running Eclipse workspace. However, still no luck. Just wanted to mention here, I am working in the Eclipse 2023-06 edition installed in a 64 bit Windows 11 system with JDK 17. Could this combination have anything to do with this issue?"},{"owner":{"account_id":3159259,"reputation":109678,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1691734456,"post_id":76876480,"comment_id":135534221,"body_markdown":"You can report issues direct to the developers on the github site https://github.com/ecd-plugin/ecd/issues","body":"You can report issues direct to the developers on the github site <a href=\"https://github.com/ecd-plugin/ecd/issues\" rel=\"nofollow noreferrer\">github.com/ecd-plugin/ecd/issues</a>"},{"owner":{"account_id":24207140,"reputation":135,"user_id":18164170,"display_name":"Pramit Pakhira"},"score":0,"creation_date":1691756436,"post_id":76876480,"comment_id":135538354,"body_markdown":"I reported this on GitHub, got some suggestions as well. However, still no luck! \n\nLater, I tried installing Eclipse 2023-03 (just the previous version) and there this entire Decompiler plugin thing has worked in one shot! Looks like this is really an issue currently with the latest version i.e., Eclipse 2023-06 or at least for the combination that I had, Windows 11 64 Bit + JDK17 + Eclipse 2023-06, not sure.","body":"I reported this on GitHub, got some suggestions as well. However, still no luck!   Later, I tried installing Eclipse 2023-03 (just the previous version) and there this entire Decompiler plugin thing has worked in one shot! Looks like this is really an issue currently with the latest version i.e., Eclipse 2023-06 or at least for the combination that I had, Windows 11 64 Bit + JDK17 + Eclipse 2023-06, not sure."}],"owner":{"account_id":24207140,"reputation":135,"user_id":18164170,"display_name":"Pramit Pakhira"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":91,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691676210,"creation_date":1691676210,"question_id":76876480,"body_markdown":"I am trying to configure Java Decompiler in Eclipse 2023-06 in order to get into .class files from within JARs, where no sources are attached. For that, I have installed the Enhanced Class Decompiler 3.3.0 plugin from Eclipse Marketplace -\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nFollowing that I have restarted, quit and opened Eclipse multiple times. However, I don&#39;t see any new editor to be added under *Associated Editors* in this path, Windows -&gt; Preference -&gt; Editors -&gt; File Associations. The available options don&#39;t work.\r\n\r\n[![enter image description here][2]][2]\r\n\r\nAlso, I have tried searching *Decompiler* under Preference search, which in usual case, is supposed to be there under Java. But here in my case, nothing shows up -\r\n\r\n[![enter image description here][3]][3]\r\n\r\nAm I missing something here or is this indeed some issue currently present with this latest version of Eclipse?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Vr0oe.jpg\r\n  [2]: https://i.stack.imgur.com/dYdaN.jpg\r\n  [3]: https://i.stack.imgur.com/EUZtw.jpg","title":"Unable to configure Java Decompiler in Eclipse 2023-06","body":"<p>I am trying to configure Java Decompiler in Eclipse 2023-06 in order to get into .class files from within JARs, where no sources are attached. For that, I have installed the Enhanced Class Decompiler 3.3.0 plugin from Eclipse Marketplace -</p>\n<p><a href=\"https://i.stack.imgur.com/Vr0oe.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Vr0oe.jpg\" alt=\"enter image description here\" /></a></p>\n<p>Following that I have restarted, quit and opened Eclipse multiple times. However, I don't see any new editor to be added under <em>Associated Editors</em> in this path, Windows -&gt; Preference -&gt; Editors -&gt; File Associations. The available options don't work.</p>\n<p><a href=\"https://i.stack.imgur.com/dYdaN.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dYdaN.jpg\" alt=\"enter image description here\" /></a></p>\n<p>Also, I have tried searching <em>Decompiler</em> under Preference search, which in usual case, is supposed to be there under Java. But here in my case, nothing shows up -</p>\n<p><a href=\"https://i.stack.imgur.com/EUZtw.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EUZtw.jpg\" alt=\"enter image description here\" /></a></p>\n<p>Am I missing something here or is this indeed some issue currently present with this latest version of Eclipse?</p>\n"},{"tags":["java","scala","apache-spark","apache-spark-sql","heap-memory"],"comments":[{"owner":{"account_id":7034556,"reputation":12335,"user_id":5389127,"display_name":"Ga&#235;l J"},"score":0,"creation_date":1632339517,"post_id":69289692,"comment_id":122468774,"body_markdown":"Show us your code and explain what you do or want to do with the output?","body":"Show us your code and explain what you do or want to do with the output?"},{"owner":{"account_id":7034556,"reputation":12335,"user_id":5389127,"display_name":"Ga&#235;l J"},"score":1,"creation_date":1632339540,"post_id":69289692,"comment_id":122468788,"body_markdown":"You talk about broadcast.. broadcasting what data?","body":"You talk about broadcast.. broadcasting what data?"},{"owner":{"account_id":15055042,"reputation":546,"user_id":10913131,"display_name":"Sankar"},"score":0,"creation_date":1632340453,"post_id":69289692,"comment_id":122469053,"body_markdown":"We have an application, and the data are related to people visiting our application, like timestamp, location, device using which they have connected, the pages that they have visited, whether they have subscribed to our channel, so on and so forth, these data are confidential otherwise I would have shared, each table has 100+ columns in it. Regarding code part, it is very simpler and straight forward left join and couple of filters, I am really sorry if this is not sufficient enough :)","body":"We have an application, and the data are related to people visiting our application, like timestamp, location, device using which they have connected, the pages that they have visited, whether they have subscribed to our channel, so on and so forth, these data are confidential otherwise I would have shared, each table has 100+ columns in it. Regarding code part, it is very simpler and straight forward left join and couple of filters, I am really sorry if this is not sufficient enough :)"},{"owner":{"account_id":3859079,"reputation":2069,"user_id":3197244,"accept_rate":50,"display_name":"jgp"},"score":1,"creation_date":1632340662,"post_id":69289692,"comment_id":122469124,"body_markdown":"Code always helps... ;) Have you tried to not use the heap? which v of Spark are you using?","body":"Code always helps... ;) Have you tried to not use the heap? which v of Spark are you using?"},{"owner":{"account_id":15055042,"reputation":546,"user_id":10913131,"display_name":"Sankar"},"score":0,"creation_date":1632341448,"post_id":69289692,"comment_id":122469388,"body_markdown":"Hello @jgp, added the first query - it had a bunch of case(when then) which I removed. And I am using spark 2.4","body":"Hello @jgp, added the first query - it had a bunch of case(when then) which I removed. And I am using spark 2.4"},{"owner":{"account_id":7034556,"reputation":12335,"user_id":5389127,"display_name":"Ga&#235;l J"},"score":0,"creation_date":1632341806,"post_id":69289692,"comment_id":122469491,"body_markdown":"What do you want to do with the 120B rows output? Write to a file ? My point was: do you really need to cache it / collect it ?","body":"What do you want to do with the 120B rows output? Write to a file ? My point was: do you really need to cache it / collect it ?"},{"owner":{"account_id":15055042,"reputation":546,"user_id":10913131,"display_name":"Sankar"},"score":0,"creation_date":1632341960,"post_id":69289692,"comment_id":122469529,"body_markdown":"so I will be using that dataframe with 120M rows in 2 other queries, and the final output will be written to S3","body":"so I will be using that dataframe with 120M rows in 2 other queries, and the final output will be written to S3"},{"owner":{"account_id":15055042,"reputation":546,"user_id":10913131,"display_name":"Sankar"},"score":0,"creation_date":1632342943,"post_id":69289692,"comment_id":122469820,"body_markdown":"added the spark plan","body":"added the spark plan"}],"owner":{"account_id":15055042,"reputation":546,"user_id":10913131,"display_name":"Sankar"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3405,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691676209,"creation_date":1632336135,"question_id":69289692,"body_markdown":"I am doing a left join between two tables - the left table(let&#39;s say A) has 1.4 billion records with size estimator giving it a size of 17GB, the right table(B) has 100 million records - with an approx size of 1.3GB.\r\n\r\nThe output of the above-joined dataframe has 120 million records (there are filters in place which brought down the record number after the left join). The output dataframe is getting used twice - so I cached it.\r\n\r\nNow, when I ran the job as it is - took 1 hour and 40 minutes to run.\r\n\r\nSo to reduce the processing time, I was trying to implement broadcast join on the first left join between A and B. Now here comes the issue.\r\n\r\nI am using the below configurations parameters - \r\n\r\n```\r\n&quot;spark.ui.threadDumpsEnabled&quot; = &quot;true&quot;\r\n&quot;spark.memory.storageFraction&quot; = &quot;0.5&quot;\r\n&quot;spark.sql.shuffle.partitions&quot; = &quot;400&quot;\r\n&quot;spark.driver.maxResultSize&quot; = &quot;8G&quot;\r\n&quot;spark.sql.broadcastTimeout&quot; = &quot;36000&quot;\r\n&quot;spark.driver.memory&quot; = &quot;30G&quot;\r\n&quot;spark.executor.memory&quot; = &quot;15G&quot;\r\n&quot;spark.executor.cores&quot; = &quot;4&quot;\r\n&quot;spark.executor.instances&quot; = &quot;3&quot;\r\n&quot;spark.kryoserializer.buffer.max&quot; = &quot;1500m&quot;\r\n&quot;spark.driver.cores&quot; = &quot;4&quot;\r\n&quot;spark.dynamicAllocation.enabled&quot; = &quot;false&quot;\r\n&quot;spark.serializer&quot; = &quot;org.apache.spark.serializer.KryoSerializer&quot;\r\n&quot;spark.executor.defaultJavaOptions=-XX:+UseG1GC -Xss100M -XX:+UnlockDiagnosticVMOptions -XX:+G1SummarizeConcMark -XX:InitiatingHeapOccupancyPercent&quot; = &quot;45&quot;\r\n&quot;spark.driver.defaultJavaOptions=-XX:+UseG1GC -Xss100M -XX:+UnlockDiagnosticVMOptions -XX:+G1SummarizeConcMark -XX:InitiatingHeapOccupancyPercent&quot; = &quot;45&quot;\r\n\r\n``` \r\n\r\nAll these parameters came into the picture one after another as I was encountering numerous memory issues.\r\n\r\n``` &quot;spark.sql.broadcastTimeout&quot; = &quot;36000&quot; ```\r\n-- this came because I was facing below error \r\n```\r\n[org.apache.spark.sql.execution.exchange.BroadcastExchangeExec.logError@91] - Could not execute broadcast in 300 secs.\r\njava.util.concurrent.TimeoutException: Futures timed out after [300 seconds]\r\n```\r\n\r\n```&quot;spark.kryoserializer.buffer.max&quot; = &quot;1500m&quot;``` - this came because -\r\n```\r\norg.apache.spark.SparkException: Kryo serialization failed: Buffer overflow. Available: 0, required: 4658915. To avoid this, increase spark.kryoserializer.buffer.max value\r\n```\r\n\r\nI also faced these errors - \r\n\r\n```\r\nb) java.lang.OutOfMemoryError: GC overhead limit exceeded\r\nc) java.lang.StackOverflowError\r\n```\r\n\r\nBut, currently, I am facing this issue which is completely new to me and I could not find a solution - \r\n\r\n```\r\nCaused by: org.apache.spark.SparkException: There is no enough memory to build hash map\r\n\tat org.apache.spark.sql.execution.joins.UnsafeHashedRelation$.apply(HashedRelation.scala:314)\r\n\tat org.apache.spark.sql.execution.joins.HashedRelation$.apply(HashedRelation.scala:109)\r\n\tat org.apache.spark.sql.execution.joins.HashedRelationBroadcastMode.transform(HashedRelation.scala:857)\r\n\tat org.apache.spark.sql.execution.joins.HashedRelationBroadcastMode.transform(HashedRelation.scala:845)\r\n\tat org.apache.spark.sql.execution.exchange.BroadcastExchangeExec$$anonfun$relationFuture$1$$anonfun$apply$1.apply(BroadcastExchangeExec.scala:89)\r\n\tat org.apache.spark.sql.execution.exchange.BroadcastExchangeExec$$anonfun$relationFuture$1$$anonfun$apply$1.apply(BroadcastExchangeExec.scala:76)\r\n\tat org.apache.spark.sql.execution.SQLExecution$$anonfun$withExecutionId$1.apply(SQLExecution.scala:141)\r\n\tat org.apache.spark.sql.execution.SQLExecution$.withSQLConfPropagated(SQLExecution.scala:165)\r\n\tat org.apache.spark.sql.execution.SQLExecution$.withExecutionId(SQLExecution.scala:138)\r\n\tat org.apache.spark.sql.execution.exchange.BroadcastExchangeExec$$anonfun$relationFuture$1.apply(BroadcastExchangeExec.scala:75)\r\n\tat org.apache.spark.sql.execution.exchange.BroadcastExchangeExec$$anonfun$relationFuture$1.apply(BroadcastExchangeExec.scala:75)\r\n\tat scala.concurrent.impl.Future$PromiseCompletingRunnable.liftedTree1$1(Future.scala:24)\r\n\tat scala.concurrent.impl.Future$PromiseCompletingRunnable.run(Future.scala:24)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n```\r\n\r\nThinking it is coming because I am not using any ```action``` until the last step of the execution, I tried to break the lineage by using intermediate ```action``` like ```count```\r\n\r\nBut the issue still persists, I also tried to increase the driver memory to a great extent, but no luck.\r\n\r\n\r\n\r\nEDITS\r\n=====================\r\nThis is the first query I was talking about\r\n\r\n```\r\nval a = spark.sql(&quot;&quot;&quot;\r\nselect \r\n/*+ BROADCAST(schema.table2) */\r\nvisit_date, \r\nv4.visid, \r\nvisit_num,\r\ndevice_family,\r\noperating_system,\r\n&#39;test&#39; AS traffic_grouping,\r\n&#39;test2&#39;Junk_Filter,\r\n&#39;test3&#39; visit_start_evar26,\r\nvisit_start_pagename,\r\nvisit_start_url,\r\nreferrer_domain,\r\nsession_duration,\r\nisp_domain,\r\npages_visited,\r\nqbo_sui_click,\r\nqbo_sui_trial_click,\r\nqbo_sui_buy_click,\r\nqbse_sui_click,\r\nqbse_sui_trial_click,\r\nqbse_sui_buy_click,\r\nqbse_customer_flag,\r\nqbo_customer_flag,\r\ncase when s.ivid is not null then 1 else 0 end as segment_qbo\r\nfrom schema.table2 v4\r\nleft join schema.table2 s \r\n    on v4.ivid = s.ivid and v4.visit_date &gt; s.qbo_signup_date and source = &#39;check&#39;\r\nWHERE visit_date &gt;= &#39;2020-07-14&#39;\r\nand country in (&#39;Australia&#39;,&#39;Australia&#39;)\r\nand  ((ipd_flag = 0\r\n    AND sbbg_flag = 0)\r\n  or lower(visit_start_evar26) like (&#39;%buy%&#39;))\r\ngroup by 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23\r\n&quot;&quot;&quot;)\r\n```\r\nhere I have done a broadcast join.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nIf anyone has any leads, it would really be a great help, thanks in advance!\r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n[![enter image description here][4]][4]\r\n\r\n\r\n[![enter image description here][5]][5]\r\n\r\n\r\n[![enter image description here][6]][6]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/QF1Vp.png\r\n  [2]: https://i.stack.imgur.com/uPV4x.png\r\n  [3]: https://i.stack.imgur.com/45ABe.png\r\n  [4]: https://i.stack.imgur.com/Arvhe.png\r\n  [5]: https://i.stack.imgur.com/CMd51.png\r\n  [6]: https://i.stack.imgur.com/afwBo.png","title":"Spark Memory Issue - &quot;There is no enough memory to build hash map&quot;","body":"<p>I am doing a left join between two tables - the left table(let's say A) has 1.4 billion records with size estimator giving it a size of 17GB, the right table(B) has 100 million records - with an approx size of 1.3GB.</p>\n<p>The output of the above-joined dataframe has 120 million records (there are filters in place which brought down the record number after the left join). The output dataframe is getting used twice - so I cached it.</p>\n<p>Now, when I ran the job as it is - took 1 hour and 40 minutes to run.</p>\n<p>So to reduce the processing time, I was trying to implement broadcast join on the first left join between A and B. Now here comes the issue.</p>\n<p>I am using the below configurations parameters -</p>\n<pre><code>&quot;spark.ui.threadDumpsEnabled&quot; = &quot;true&quot;\n&quot;spark.memory.storageFraction&quot; = &quot;0.5&quot;\n&quot;spark.sql.shuffle.partitions&quot; = &quot;400&quot;\n&quot;spark.driver.maxResultSize&quot; = &quot;8G&quot;\n&quot;spark.sql.broadcastTimeout&quot; = &quot;36000&quot;\n&quot;spark.driver.memory&quot; = &quot;30G&quot;\n&quot;spark.executor.memory&quot; = &quot;15G&quot;\n&quot;spark.executor.cores&quot; = &quot;4&quot;\n&quot;spark.executor.instances&quot; = &quot;3&quot;\n&quot;spark.kryoserializer.buffer.max&quot; = &quot;1500m&quot;\n&quot;spark.driver.cores&quot; = &quot;4&quot;\n&quot;spark.dynamicAllocation.enabled&quot; = &quot;false&quot;\n&quot;spark.serializer&quot; = &quot;org.apache.spark.serializer.KryoSerializer&quot;\n&quot;spark.executor.defaultJavaOptions=-XX:+UseG1GC -Xss100M -XX:+UnlockDiagnosticVMOptions -XX:+G1SummarizeConcMark -XX:InitiatingHeapOccupancyPercent&quot; = &quot;45&quot;\n&quot;spark.driver.defaultJavaOptions=-XX:+UseG1GC -Xss100M -XX:+UnlockDiagnosticVMOptions -XX:+G1SummarizeConcMark -XX:InitiatingHeapOccupancyPercent&quot; = &quot;45&quot;\n\n</code></pre>\n<p>All these parameters came into the picture one after another as I was encountering numerous memory issues.</p>\n<p><code>&quot;spark.sql.broadcastTimeout&quot; = &quot;36000&quot;</code>\n-- this came because I was facing below error</p>\n<pre><code>[org.apache.spark.sql.execution.exchange.BroadcastExchangeExec.logError@91] - Could not execute broadcast in 300 secs.\njava.util.concurrent.TimeoutException: Futures timed out after [300 seconds]\n</code></pre>\n<p><code>&quot;spark.kryoserializer.buffer.max&quot; = &quot;1500m&quot;</code> - this came because -</p>\n<pre><code>org.apache.spark.SparkException: Kryo serialization failed: Buffer overflow. Available: 0, required: 4658915. To avoid this, increase spark.kryoserializer.buffer.max value\n</code></pre>\n<p>I also faced these errors -</p>\n<pre><code>b) java.lang.OutOfMemoryError: GC overhead limit exceeded\nc) java.lang.StackOverflowError\n</code></pre>\n<p>But, currently, I am facing this issue which is completely new to me and I could not find a solution -</p>\n<pre><code>Caused by: org.apache.spark.SparkException: There is no enough memory to build hash map\n    at org.apache.spark.sql.execution.joins.UnsafeHashedRelation$.apply(HashedRelation.scala:314)\n    at org.apache.spark.sql.execution.joins.HashedRelation$.apply(HashedRelation.scala:109)\n    at org.apache.spark.sql.execution.joins.HashedRelationBroadcastMode.transform(HashedRelation.scala:857)\n    at org.apache.spark.sql.execution.joins.HashedRelationBroadcastMode.transform(HashedRelation.scala:845)\n    at org.apache.spark.sql.execution.exchange.BroadcastExchangeExec$$anonfun$relationFuture$1$$anonfun$apply$1.apply(BroadcastExchangeExec.scala:89)\n    at org.apache.spark.sql.execution.exchange.BroadcastExchangeExec$$anonfun$relationFuture$1$$anonfun$apply$1.apply(BroadcastExchangeExec.scala:76)\n    at org.apache.spark.sql.execution.SQLExecution$$anonfun$withExecutionId$1.apply(SQLExecution.scala:141)\n    at org.apache.spark.sql.execution.SQLExecution$.withSQLConfPropagated(SQLExecution.scala:165)\n    at org.apache.spark.sql.execution.SQLExecution$.withExecutionId(SQLExecution.scala:138)\n    at org.apache.spark.sql.execution.exchange.BroadcastExchangeExec$$anonfun$relationFuture$1.apply(BroadcastExchangeExec.scala:75)\n    at org.apache.spark.sql.execution.exchange.BroadcastExchangeExec$$anonfun$relationFuture$1.apply(BroadcastExchangeExec.scala:75)\n    at scala.concurrent.impl.Future$PromiseCompletingRunnable.liftedTree1$1(Future.scala:24)\n    at scala.concurrent.impl.Future$PromiseCompletingRunnable.run(Future.scala:24)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n</code></pre>\n<p>Thinking it is coming because I am not using any <code>action</code> until the last step of the execution, I tried to break the lineage by using intermediate <code>action</code> like <code>count</code></p>\n<p>But the issue still persists, I also tried to increase the driver memory to a great extent, but no luck.</p>\n<h1>EDITS</h1>\n<p>This is the first query I was talking about</p>\n<pre><code>val a = spark.sql(&quot;&quot;&quot;\nselect \n/*+ BROADCAST(schema.table2) */\nvisit_date, \nv4.visid, \nvisit_num,\ndevice_family,\noperating_system,\n'test' AS traffic_grouping,\n'test2'Junk_Filter,\n'test3' visit_start_evar26,\nvisit_start_pagename,\nvisit_start_url,\nreferrer_domain,\nsession_duration,\nisp_domain,\npages_visited,\nqbo_sui_click,\nqbo_sui_trial_click,\nqbo_sui_buy_click,\nqbse_sui_click,\nqbse_sui_trial_click,\nqbse_sui_buy_click,\nqbse_customer_flag,\nqbo_customer_flag,\ncase when s.ivid is not null then 1 else 0 end as segment_qbo\nfrom schema.table2 v4\nleft join schema.table2 s \n    on v4.ivid = s.ivid and v4.visit_date &gt; s.qbo_signup_date and source = 'check'\nWHERE visit_date &gt;= '2020-07-14'\nand country in ('Australia','Australia')\nand  ((ipd_flag = 0\n    AND sbbg_flag = 0)\n  or lower(visit_start_evar26) like ('%buy%'))\ngroup by 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23\n&quot;&quot;&quot;)\n</code></pre>\n<p>here I have done a broadcast join.</p>\n<p><a href=\"https://i.stack.imgur.com/QF1Vp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QF1Vp.png\" alt=\"enter image description here\" /></a></p>\n<p>If anyone has any leads, it would really be a great help, thanks in advance!</p>\n<p><a href=\"https://i.stack.imgur.com/uPV4x.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uPV4x.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/45ABe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/45ABe.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/Arvhe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Arvhe.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/CMd51.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CMd51.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/afwBo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/afwBo.png\" alt=\"enter image description here\" /></a></p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9878,"page":256,"page_size":100}
