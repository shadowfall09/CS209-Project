{"items":[{"tags":["java","naming-conventions","package"],"comments":[{"owner":{"account_id":50932,"reputation":6550,"user_id":152061,"accept_rate":80,"display_name":"Brad Cupit"},"score":30,"creation_date":1369942186,"post_id":3179216,"comment_id":24289947,"body_markdown":"another example not yet mentioned is using a period: `com.stackoverflow.my.package`","body":"another example not yet mentioned is using a period: <code>com.stackoverflow.my.package</code>"},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":25,"creation_date":1511262127,"post_id":3179216,"comment_id":81776135,"body_markdown":"(2) isn&#39;t legal Java. Unclear why you&#39;re even asking about it.","body":"(2) isn&#39;t legal Java. Unclear why you&#39;re even asking about it."},{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1584787520,"post_id":3179216,"comment_id":107547323,"body_markdown":"Note that all this is just to ensure uniqueness.  Only thing actually enforced is to stay out of the java.* space.","body":"Note that all this is just to ensure uniqueness.  Only thing actually enforced is to stay out of the java.* space."}],"answers":[{"tags":[],"owner":{"account_id":92026,"reputation":35050,"user_id":1977903,"accept_rate":96,"display_name":"bragboy"},"down_vote_count":1,"up_vote_count":420,"is_accepted":false,"score":419,"last_activity_date":1505752665,"creation_date":1278330641,"answer_id":3179221,"question_id":3179216,"body_markdown":"All three are not the conventions.\r\n\r\nUse `com.stackoverflow.mypackage`.\r\n\r\nThe package names do not follow camel casing or underscores or hyphens [package naming convention][1].\r\n\r\nAlso, [Google Java Style Guide](https://google.github.io/styleguide/javaguide.html) specifies exactly the same (i.e. `com.stackoverflow.mypackage`) convention:\r\n\r\n&gt; ### 5.2.1 Package names\r\n&gt;\r\n&gt; Package names are all lowercase, with consecutive words simply concatenated together (no underscores). For example, `com.example.deepspace`, **not** `com.example.deepSpace` or `com.example.deep_space`.\r\n&gt;\r\n&gt; — &lt;cite&gt;[Google Java Style Guide: 5.2 Rules by identifier type: 5.2.1 Package names](https://google.github.io/styleguide/javaguide.html#s5.2.1-package-names)&lt;/cite&gt;.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/java/package/namingpkgs.html","title":"What is the convention for word separator in Java package names?","body":"<p>All three are not the conventions.</p>\n\n<p>Use <code>com.stackoverflow.mypackage</code>.</p>\n\n<p>The package names do not follow camel casing or underscores or hyphens <a href=\"https://docs.oracle.com/javase/tutorial/java/package/namingpkgs.html\" rel=\"noreferrer\">package naming convention</a>.</p>\n\n<p>Also, <a href=\"https://google.github.io/styleguide/javaguide.html\" rel=\"noreferrer\">Google Java Style Guide</a> specifies exactly the same (i.e. <code>com.stackoverflow.mypackage</code>) convention:</p>\n\n<blockquote>\n  <h3>5.2.1 Package names</h3>\n  \n  <p>Package names are all lowercase, with consecutive words simply concatenated together (no underscores). For example, <code>com.example.deepspace</code>, <strong>not</strong> <code>com.example.deepSpace</code> or <code>com.example.deep_space</code>.</p>\n  \n  <p>— <a href=\"https://google.github.io/styleguide/javaguide.html#s5.2.1-package-names\" rel=\"noreferrer\">Google Java Style Guide: 5.2 Rules by identifier type: 5.2.1 Package names</a>.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":36858,"reputation":113744,"user_id":105224,"accept_rate":73,"display_name":"Andreas Dolk"},"down_vote_count":1,"up_vote_count":21,"is_accepted":false,"score":20,"last_activity_date":1691661279,"creation_date":1278331166,"answer_id":3179266,"question_id":3179216,"body_markdown":"The official naming conventions aren&#39;t that strict, they don&#39;t even &#39;forbid&#39; camel case notation except for prefix (`com` in your example).\r\n\r\nBut I personally would avoid upper case letters &lt;strike&gt;and hyphenations&lt;/strike&gt;, even numbers. I&#39;d choose `com.stackoverflow.mypackage` like Bragboy suggested too.\r\n\r\n(hyphenations &#39;-&#39; are not legal in package names)\r\n\r\n**EDIT**\r\n\r\nInteresting - the language specification has something to say about naming conventions too.\r\n\r\nIn [Chapter 7.7 Unique Package Names][1] we see examples with package names that consist of upper case letters (so CamelCase notation would be OK) and they suggest replacing hyphenation by an underscore (&quot;mary-lou&quot; -&gt; &quot;mary_lou&quot;) and prefix java keywords with an underscore (&quot;com.example.enum&quot; -&gt; &quot;com.example._enum&quot;)\r\n\r\nSome more examples for upper case letters in package names can be found in chapter [6.8.1 Package Names][2].\r\n\r\n\r\n  [1]: http://java.sun.com/docs/books/jls/third_edition/html/packages.html#40169\r\n  [2]: http://java.sun.com/docs/books/jls/third_edition/html/names.html#6.8.1","title":"What is the convention for word separator in Java package names?","body":"<p>The official naming conventions aren't that strict, they don't even 'forbid' camel case notation except for prefix (<code>com</code> in your example).</p>\n<p>But I personally would avoid upper case letters <strike>and hyphenations</strike>, even numbers. I'd choose <code>com.stackoverflow.mypackage</code> like Bragboy suggested too.</p>\n<p>(hyphenations '-' are not legal in package names)</p>\n<p><strong>EDIT</strong></p>\n<p>Interesting - the language specification has something to say about naming conventions too.</p>\n<p>In <a href=\"http://java.sun.com/docs/books/jls/third_edition/html/packages.html#40169\" rel=\"nofollow noreferrer\">Chapter 7.7 Unique Package Names</a> we see examples with package names that consist of upper case letters (so CamelCase notation would be OK) and they suggest replacing hyphenation by an underscore (&quot;mary-lou&quot; -&gt; &quot;mary_lou&quot;) and prefix java keywords with an underscore (&quot;com.example.enum&quot; -&gt; &quot;com.example._enum&quot;)</p>\n<p>Some more examples for upper case letters in package names can be found in chapter <a href=\"http://java.sun.com/docs/books/jls/third_edition/html/names.html#6.8.1\" rel=\"nofollow noreferrer\">6.8.1 Package Names</a>.</p>\n"},{"tags":[],"owner":{"account_id":102991,"reputation":378282,"user_id":276101,"accept_rate":67,"display_name":"polygenelubricants"},"down_vote_count":9,"up_vote_count":310,"is_accepted":true,"score":301,"last_activity_date":1560969151,"creation_date":1278331230,"answer_id":3179277,"question_id":3179216,"body_markdown":"Here&#39;s what the official naming conventions document prescribes:\r\n\r\n&gt; ### Packages\r\n\t\r\n&gt; The prefix of a unique package name is always written in all-lowercase ASCII letters and should be one of the top-level domain names, currently `com`, `edu`, `gov`, `mil`, `net`, `org`, or one of the English two-letter codes identifying countries as specified in ISO Standard 3166, 1981.\r\n\r\n&gt; Subsequent components of the package name vary according to an organization&#39;s own internal naming conventions. Such conventions might specify that certain directory name components be division, department, project, machine, or login names.\r\n\t\r\n&gt; ### Examples\r\n\r\n&gt; * `com.sun.eng`\r\n&gt; * `com.apple.quicktime.v2`\r\n&gt; * `edu.cmu.cs.bovik.cheese`\r\n\r\n### References\r\n\r\n* [java.sun.com - Code Conventions/Naming](http://java.sun.com/docs/codeconv/html/CodeConventions.doc8.html)\r\n\r\n---\r\n\r\nNote that in particular, anything following the top-level domain prefix isn&#39;t specified by the above document. The JLS also agrees with this by giving the following examples:\r\n\r\n&gt; * `com.sun.sunsoft.DOE`\r\n&gt; * `gov.whitehouse.socks.mousefinder`\r\n&gt; * `com.JavaSoft.jag.Oak`\r\n&gt; * `org.npr.pledge.driver`\r\n&gt; * `uk.ac.city.rugby.game`\r\n\r\nThe following excerpt is also relevant:\r\n\r\n&gt; In some cases, the internet domain name may not be a valid package name. Here are some suggested conventions for dealing with these situations:\r\n\r\n&gt; * If the domain name contains a hyphen, or any other special character not allowed in an identifier, convert it into an underscore.\r\n&gt; * If any of the resulting package name components are keywords then append underscore to them.\r\n&gt; * If any of the resulting package name components start with a digit, or any other character that is not allowed as an initial character of an identifier, have an underscore prefixed to the component. \r\n\r\n### References\r\n\r\n* [JLS 6.1 Package Names](https://docs.oracle.com/javase/specs/jls/se12/html/jls-6.html#jls-6.1)\r\n","title":"What is the convention for word separator in Java package names?","body":"<p>Here's what the official naming conventions document prescribes:</p>\n\n<blockquote>\n  <h3>Packages</h3>\n  \n  <p>The prefix of a unique package name is always written in all-lowercase ASCII letters and should be one of the top-level domain names, currently <code>com</code>, <code>edu</code>, <code>gov</code>, <code>mil</code>, <code>net</code>, <code>org</code>, or one of the English two-letter codes identifying countries as specified in ISO Standard 3166, 1981.</p>\n  \n  <p>Subsequent components of the package name vary according to an organization's own internal naming conventions. Such conventions might specify that certain directory name components be division, department, project, machine, or login names.</p>\n  \n  <h3>Examples</h3>\n  \n  <ul>\n  <li><code>com.sun.eng</code></li>\n  <li><code>com.apple.quicktime.v2</code></li>\n  <li><code>edu.cmu.cs.bovik.cheese</code></li>\n  </ul>\n</blockquote>\n\n<h3>References</h3>\n\n<ul>\n<li><a href=\"http://java.sun.com/docs/codeconv/html/CodeConventions.doc8.html\" rel=\"noreferrer\">java.sun.com - Code Conventions/Naming</a></li>\n</ul>\n\n<hr>\n\n<p>Note that in particular, anything following the top-level domain prefix isn't specified by the above document. The JLS also agrees with this by giving the following examples:</p>\n\n<blockquote>\n  <ul>\n  <li><code>com.sun.sunsoft.DOE</code></li>\n  <li><code>gov.whitehouse.socks.mousefinder</code></li>\n  <li><code>com.JavaSoft.jag.Oak</code></li>\n  <li><code>org.npr.pledge.driver</code></li>\n  <li><code>uk.ac.city.rugby.game</code></li>\n  </ul>\n</blockquote>\n\n<p>The following excerpt is also relevant:</p>\n\n<blockquote>\n  <p>In some cases, the internet domain name may not be a valid package name. Here are some suggested conventions for dealing with these situations:</p>\n  \n  <ul>\n  <li>If the domain name contains a hyphen, or any other special character not allowed in an identifier, convert it into an underscore.</li>\n  <li>If any of the resulting package name components are keywords then append underscore to them.</li>\n  <li>If any of the resulting package name components start with a digit, or any other character that is not allowed as an initial character of an identifier, have an underscore prefixed to the component. </li>\n  </ul>\n</blockquote>\n\n<h3>References</h3>\n\n<ul>\n<li><a href=\"https://docs.oracle.com/javase/specs/jls/se12/html/jls-6.html#jls-6.1\" rel=\"noreferrer\">JLS 6.1 Package Names</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":4889311,"reputation":883,"user_id":3940893,"accept_rate":25,"display_name":"Himanshu Mori"},"down_vote_count":1,"up_vote_count":39,"is_accepted":false,"score":38,"last_activity_date":1568215953,"creation_date":1480400170,"answer_id":40858966,"question_id":3179216,"body_markdown":"Anyone can use underscore **_** (its Okay)\r\n\r\nNo one should use hypen **-** (its Bad practice)\r\n\r\nNo one should use capital letters inside package names (Bad practice)\r\n\r\n*NOTE: Here &quot;Bad Practice&quot; is meant for technically you are allowed to use that, but conventionally its not in good manners to write.*\r\n\r\nSource: [Naming a Package(docs.oracle)][3] \r\n\r\n[![][2]][2]\r\n\r\n\r\n  [2]: https://i.stack.imgur.com/R2HcY.png\r\n  [3]: https://docs.oracle.com/javase/tutorial/java/package/namingpkgs.html","title":"What is the convention for word separator in Java package names?","body":"<p>Anyone can use underscore <strong>_</strong> (its Okay)</p>\n\n<p>No one should use hypen <strong>-</strong> (its Bad practice)</p>\n\n<p>No one should use capital letters inside package names (Bad practice)</p>\n\n<p><em>NOTE: Here \"Bad Practice\" is meant for technically you are allowed to use that, but conventionally its not in good manners to write.</em></p>\n\n<p>Source: <a href=\"https://docs.oracle.com/javase/tutorial/java/package/namingpkgs.html\" rel=\"noreferrer\">Naming a Package(docs.oracle)</a> </p>\n\n<p><a href=\"https://i.stack.imgur.com/R2HcY.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/R2HcY.png\" alt=\"\"></a></p>\n"},{"tags":[],"owner":{"account_id":233198,"reputation":712,"user_id":498531,"accept_rate":62,"display_name":"jpangamarca"},"down_vote_count":3,"up_vote_count":10,"is_accepted":false,"score":7,"last_activity_date":1691661341,"creation_date":1486482340,"answer_id":42094075,"question_id":3179216,"body_markdown":"Underscores look ugly in package names. For what it&#39;s worth, in case of names compound of three or more words, I use initials (for example: `com.company.app.ingresoegresofijo (ingreso/egreso fijo) -&gt; com.company.app.iefijo`) and then document the package purpose in `package-info.java`.","title":"What is the convention for word separator in Java package names?","body":"<p>Underscores look ugly in package names. For what it's worth, in case of names compound of three or more words, I use initials (for example: <code>com.company.app.ingresoegresofijo (ingreso/egreso fijo) -&gt; com.company.app.iefijo</code>) and then document the package purpose in <code>package-info.java</code>.</p>\n"},{"tags":[],"owner":{"account_id":3305788,"reputation":101,"user_id":2780655,"display_name":"CraUmm"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1497934916,"creation_date":1497934916,"answer_id":44644168,"question_id":3179216,"body_markdown":"Concatenation of words in the package name is something most developers don&#39;t do. \r\n\r\nYou can use something like. \r\n\r\n```com.stackoverflow.mypackage```\r\n\r\nRefer [JLS Name Declaration](http://docs.oracle.com/javase/specs/jls/se8/html/jls-6.html#jls-6.1)\r\n\r\n","title":"What is the convention for word separator in Java package names?","body":"<p>Concatenation of words in the package name is something most developers don't do. </p>\n\n<p>You can use something like. </p>\n\n<p><code>com.stackoverflow.mypackage</code></p>\n\n<p>Refer <a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-6.html#jls-6.1\" rel=\"nofollow noreferrer\">JLS Name Declaration</a></p>\n"}],"owner":{"account_id":27280,"reputation":8951,"user_id":71858,"accept_rate":81,"display_name":"Jigar"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":244573,"favorite_count":0,"down_vote_count":1,"up_vote_count":524,"accepted_answer_id":3179277,"answer_count":6,"score":523,"last_activity_date":1691661341,"creation_date":1278330580,"question_id":3179216,"body_markdown":"How should one separate words in package names? Which of the following are correct?\r\n\r\n1. `com.stackoverflow.my_package` (`Snake Case` using underscore)\r\n2. `com.stackoverflow.my-package` (`Kebab Case` using hyphens)\r\n3. `com.stackoverflow.myPackage` (`Camel Case`)\r\n4. `com.stackoverflow.MyPackage` (`Pascal Case`)\r\n\r\n\r\nWhat is the general standard?","title":"What is the convention for word separator in Java package names?","body":"<p>How should one separate words in package names? Which of the following are correct?</p>\n<ol>\n<li><code>com.stackoverflow.my_package</code> (<code>Snake Case</code> using underscore)</li>\n<li><code>com.stackoverflow.my-package</code> (<code>Kebab Case</code> using hyphens)</li>\n<li><code>com.stackoverflow.myPackage</code> (<code>Camel Case</code>)</li>\n<li><code>com.stackoverflow.MyPackage</code> (<code>Pascal Case</code>)</li>\n</ol>\n<p>What is the general standard?</p>\n"},{"tags":["java","selenium-webdriver","intellij-idea","xpath","cucumber"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1691742178,"post_id":76874598,"comment_id":135535555,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":29197860,"reputation":1,"user_id":22368573,"display_name":"David"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691661296,"creation_date":1691661201,"question_id":76874598,"body_markdown":"I have tried to setup my test to click on a series of buttons in order on a website and it the test gets stuck on the button I have chosen.\r\nThe website in question has multiple panels with buttons on each panel, and I feel like the WebDriver doesn&#39;t know what button to look for when I input the XPath of the button into my web.yml file.\r\n\r\nThis test works on other webpages and other elements, just stuck on this specific website.\r\n\r\n**Feature file**\r\n\r\nWhen WebAgent click on MainMenuButton\r\n\r\n**web.yml file**\r\n\r\nSearchPage:\r\n\r\nMainMenuButton: //*[@id=&quot;div_1_2_1_1&quot;]/div/div/div/div[1]/a\r\n\r\n\r\nThings I have tried:\r\nCopying XPath of element on webpage\r\nTrying the full XPath of element\r\nUsing different Click On methods in feature file\r\n\r\nExpected Outcome - Agent to click on specified button when test run\r\nActual Outcome - Nothing happens on website when agent is asked to click on the button\r\n\r\nConsole \r\nCaused by: java.lang.NullPointerException","title":"Click on a button inside a panel on a website - using Selenium WebDriver with Cucumber Java","body":"<p>I have tried to setup my test to click on a series of buttons in order on a website and it the test gets stuck on the button I have chosen.\nThe website in question has multiple panels with buttons on each panel, and I feel like the WebDriver doesn't know what button to look for when I input the XPath of the button into my web.yml file.</p>\n<p>This test works on other webpages and other elements, just stuck on this specific website.</p>\n<p><strong>Feature file</strong></p>\n<p>When WebAgent click on MainMenuButton</p>\n<p><strong>web.yml file</strong></p>\n<p>SearchPage:</p>\n<p>MainMenuButton: //*[@id=&quot;div_1_2_1_1&quot;]/div/div/div/div[1]/a</p>\n<p>Things I have tried:\nCopying XPath of element on webpage\nTrying the full XPath of element\nUsing different Click On methods in feature file</p>\n<p>Expected Outcome - Agent to click on specified button when test run\nActual Outcome - Nothing happens on website when agent is asked to click on the button</p>\n<p>Console\nCaused by: java.lang.NullPointerException</p>\n"},{"tags":["java","android","firebase-cloud-messaging"],"owner":{"account_id":19474480,"reputation":31,"user_id":16302763,"display_name":"Rasiel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691661118,"creation_date":1691661118,"question_id":76874591,"body_markdown":"I am using firebase-admin SDK to run the push code in the server environment. The code has been run in a Singapore server for quite a while but sometimes I found the delay is very high(around 15 seconds). \r\n\r\nIt happens almost every day but not in high frequency（5 times at most）. I am currently using \r\n```\r\nFirebaseMessaging.getInstance().sendAll() \r\n```\r\nto send high-priority notification for both single and batch push to Android devices. Is there anything I can do to improve the performance?\r\n","title":"FCM notification sometime got high delay (Server environment)","body":"<p>I am using firebase-admin SDK to run the push code in the server environment. The code has been run in a Singapore server for quite a while but sometimes I found the delay is very high(around 15 seconds).</p>\n<p>It happens almost every day but not in high frequency（5 times at most）. I am currently using</p>\n<pre><code>FirebaseMessaging.getInstance().sendAll() \n</code></pre>\n<p>to send high-priority notification for both single and batch push to Android devices. Is there anything I can do to improve the performance?</p>\n"},{"tags":["java","junit","mockito"],"answers":[{"tags":[],"owner":{"account_id":6646841,"reputation":608,"user_id":5130640,"accept_rate":0,"display_name":"martijn p"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1570014461,"creation_date":1570014461,"answer_id":58200255,"question_id":58199214,"body_markdown":"It seems that this might be caused because it can&#39;t find bytebuddy installed, referring to:\r\n&gt;Caused by: java.lang.NoSuchMethodError: net.bytebuddy.dynamic.loading.MultipleParentClassLoader$Builder.appendMostSpecific(Ljava/util/Collection;)Lnet/bytebuddy/dynamic/loading/MultipleParentClassLoader$Builder;\r\n\r\nFrom what I can find online adding bytebuddy to your dependencies might fix this.\r\n```\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;net.bytebuddy&lt;/groupId&gt;\r\n      &lt;artifactId&gt;byte-buddy&lt;/artifactId&gt;\r\n      &lt;version&gt;XXX&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n```","title":"Mockito - Mockito cannot mock this class - IllegalArgumentException: Could not create type","body":"<p>It seems that this might be caused because it can't find bytebuddy installed, referring to:</p>\n\n<blockquote>\n  <p>Caused by: java.lang.NoSuchMethodError: net.bytebuddy.dynamic.loading.MultipleParentClassLoader$Builder.appendMostSpecific(Ljava/util/Collection;)Lnet/bytebuddy/dynamic/loading/MultipleParentClassLoader$Builder;</p>\n</blockquote>\n\n<p>From what I can find online adding bytebuddy to your dependencies might fix this.</p>\n\n<pre><code>    &lt;dependency&gt;\n      &lt;groupId&gt;net.bytebuddy&lt;/groupId&gt;\n      &lt;artifactId&gt;byte-buddy&lt;/artifactId&gt;\n      &lt;version&gt;XXX&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7141303,"reputation":6626,"user_id":5458827,"accept_rate":0,"display_name":"riorio"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1570016967,"creation_date":1570016967,"answer_id":58200905,"question_id":58199214,"body_markdown":"I was able to fix the problem after downgrading the `Mockito` version:\r\n\r\n`&lt;version&gt;2.13.0&lt;/version&gt; `","title":"Mockito - Mockito cannot mock this class - IllegalArgumentException: Could not create type","body":"<p>I was able to fix the problem after downgrading the <code>Mockito</code> version:</p>\n\n<p><code>&lt;version&gt;2.13.0&lt;/version&gt;</code></p>\n"},{"tags":[],"owner":{"account_id":4597459,"reputation":949,"user_id":3729081,"display_name":"Deep"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1590410776,"creation_date":1590410776,"answer_id":62002689,"question_id":58199214,"body_markdown":"In my case, it was caused because it was referring to another version of **byte-buddy** which was actually not compatible with the mockito library. \r\n\r\nThis additional version of byte-buddy, coming from **hibernate-core** (version 5.3.7) which was also present in my classpath.\r\n\r\nInitially, I was using mockito-core library version-3.3.3 which actually required byte-buddy 1.10.5.\r\n\r\nSo, I downgraded the mockito-core library to 2.21.0 version which uses byte-buddy version 1.8.15.\r\n\r\nAnd it started working fine for me.\r\n\r\nAn additional solution for me was to update to a newer version of hibernate (version&gt;=5.4.11.Final) which includes byte-buddy version compatible with the mockito library. \r\n\r\nBut that could have a larger impact on the project so I went for the first solution like follows depending on which library you are using :\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.mockito&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mockito-junit-jupiter&lt;/artifactId&gt;\r\n            &lt;version&gt;2.21.0&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\nOR\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.mockito&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\r\n            &lt;version&gt;2.21.0&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\nAlso, this issue was being addressed here: https://github.com/mockito/mockito/issues/1606 which helped me to find the solution for me.","title":"Mockito - Mockito cannot mock this class - IllegalArgumentException: Could not create type","body":"<p>In my case, it was caused because it was referring to another version of <strong>byte-buddy</strong> which was actually not compatible with the mockito library. </p>\n\n<p>This additional version of byte-buddy, coming from <strong>hibernate-core</strong> (version 5.3.7) which was also present in my classpath.</p>\n\n<p>Initially, I was using mockito-core library version-3.3.3 which actually required byte-buddy 1.10.5.</p>\n\n<p>So, I downgraded the mockito-core library to 2.21.0 version which uses byte-buddy version 1.8.15.</p>\n\n<p>And it started working fine for me.</p>\n\n<p>An additional solution for me was to update to a newer version of hibernate (version>=5.4.11.Final) which includes byte-buddy version compatible with the mockito library. </p>\n\n<p>But that could have a larger impact on the project so I went for the first solution like follows depending on which library you are using :</p>\n\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n        &lt;artifactId&gt;mockito-junit-jupiter&lt;/artifactId&gt;\n        &lt;version&gt;2.21.0&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n        &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\n        &lt;version&gt;2.21.0&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n</code></pre>\n\n<p>Also, this issue was being addressed here: <a href=\"https://github.com/mockito/mockito/issues/1606\" rel=\"noreferrer\">https://github.com/mockito/mockito/issues/1606</a> which helped me to find the solution for me.</p>\n"},{"tags":[],"owner":{"account_id":3662779,"reputation":492,"user_id":3052125,"accept_rate":12,"display_name":"Siddhartha"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691661116,"creation_date":1691661116,"answer_id":76874590,"question_id":58199214,"body_markdown":"Faced similar issue. I&#39;m using \r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    &lt;junit.version&gt;4.13.2&lt;/junit.version&gt;\r\n    &lt;mockito.version&gt;4.4.0&lt;/mockito.version&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nObserved that I was not using byte-buddy &amp; using the current latest version of byte-buddy helped me fix this issue &amp; move forward - \r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    &lt;dependency&gt;\r\n       &lt;groupId&gt;net.bytebuddy&lt;/groupId&gt;\r\n       &lt;artifactId&gt;byte-buddy&lt;/artifactId&gt;\r\n       &lt;version&gt;1.14.5&lt;/version&gt;\r\n     &lt;/dependency&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n","title":"Mockito - Mockito cannot mock this class - IllegalArgumentException: Could not create type","body":"<p>Faced similar issue. I'm using</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;junit.version&gt;4.13.2&lt;/junit.version&gt;\n&lt;mockito.version&gt;4.4.0&lt;/mockito.version&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>Observed that I was not using byte-buddy &amp; using the current latest version of byte-buddy helped me fix this issue &amp; move forward -</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;dependency&gt;\n   &lt;groupId&gt;net.bytebuddy&lt;/groupId&gt;\n   &lt;artifactId&gt;byte-buddy&lt;/artifactId&gt;\n   &lt;version&gt;1.14.5&lt;/version&gt;\n &lt;/dependency&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}],"owner":{"account_id":7141303,"reputation":6626,"user_id":5458827,"accept_rate":0,"display_name":"riorio"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23604,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"accepted_answer_id":58200905,"answer_count":4,"score":12,"last_activity_date":1691661116,"creation_date":1570010012,"question_id":58199214,"body_markdown":"I was trying to use a `Mock` class in a test of mine and getting this error:\r\n\r\n    org.mockito.exceptions.base.MockitoException: \r\n    Mockito cannot mock this class: class com.example.Car.\r\n\r\n    Mockito can only mock non-private &amp; non-final classes.\r\n    If you&#39;re not sure why you&#39;re getting this error, please report to the mailing list.\r\n\r\n\r\n    Java               : 1.8\r\n    JVM vendor name    : Oracle Corporation\r\n    JVM vendor version : 25.161-b12\r\n    JVM name           : Java HotSpot(TM) Client VM\r\n    JVM version        : 1.8.0_161-b12\r\n    JVM info           : mixed mode, sharing\r\n    OS name            : Windows 10\r\n    OS version         : 10.0\r\n\r\n\r\n    Underlying exception : java.lang.IllegalArgumentException: Could not create type\r\n\r\n\tat org.mockito.internal.runners.DefaultInternalRunner$1$1.evaluate(DefaultInternalRunner.java:43)\r\n\tat org.junit.rules.ExpectedException$ExpectedExceptionStatement.evaluate(ExpectedException.java:239)\r\n\tat org.junit.rules.RunRules.evaluate(RunRules.java:20)\r\n\tat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)\r\n\tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\r\n\tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\r\n\tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\r\n\tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\r\n\tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\r\n\tat org.junit.runners.ParentRunner.run(ParentRunner.java:363)\r\n\tat org.mockito.internal.runners.DefaultInternalRunner$1.run(DefaultInternalRunner.java:74)\r\n\tat org.mockito.internal.runners.DefaultInternalRunner.run(DefaultInternalRunner.java:80)\r\n\tat org.mockito.internal.runners.StrictRunner.run(StrictRunner.java:39)\r\n\tat org.mockito.junit.MockitoJUnitRunner.run(MockitoJUnitRunner.java:163)\r\n\tat org.junit.runner.JUnitCore.run(JUnitCore.java:137)\r\n\tat com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:68)\r\n\tat com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:47)\r\n\tat com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)\r\n\tat com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)\r\n    Caused by: java.lang.IllegalArgumentException: Could not create type\r\n\tat net.bytebuddy.TypeCache.findOrInsert(TypeCache.java:139)\r\n\tat net.bytebuddy.TypeCache$WithInlineExpunction.findOrInsert(TypeCache.java:344)\r\n\tat net.bytebuddy.TypeCache.findOrInsert(TypeCache.java:159)\r\n\tat net.bytebuddy.TypeCache$WithInlineExpunction.findOrInsert(TypeCache.java:353)\r\n\tat org.mockito.internal.creation.bytebuddy.TypeCachingBytecodeGenerator.mockClass(TypeCachingBytecodeGenerator.java:32)\r\n\tat org.mockito.internal.creation.bytebuddy.SubclassByteBuddyMockMaker.createMockType(SubclassByteBuddyMockMaker.java:71)\r\n\tat org.mockito.internal.creation.bytebuddy.SubclassByteBuddyMockMaker.createMock(SubclassByteBuddyMockMaker.java:42)\r\n\tat org.mockito.internal.creation.bytebuddy.ByteBuddyMockMaker.createMock(ByteBuddyMockMaker.java:25)\r\n\tat org.mockito.internal.util.MockUtil.createMock(MockUtil.java:35)\r\n\tat org.mockito.internal.MockitoCore.mock(MockitoCore.java:62)\r\n\tat org.mockito.Mockito.mock(Mockito.java:1908)\r\n\tat org.mockito.internal.configuration.MockAnnotationProcessor.processAnnotationForMock(MockAnnotationProcessor.java:44)\r\n\tat org.mockito.internal.configuration.MockAnnotationProcessor.process(MockAnnotationProcessor.java:19)\r\n\tat org.mockito.internal.configuration.MockAnnotationProcessor.process(MockAnnotationProcessor.java:16)\r\n\tat org.mockito.internal.configuration.IndependentAnnotationEngine.createMockFor(IndependentAnnotationEngine.java:38)\r\n\tat org.mockito.internal.configuration.IndependentAnnotationEngine.process(IndependentAnnotationEngine.java:62)\r\n\tat org.mockito.internal.configuration.InjectingAnnotationEngine.processIndependentAnnotations(InjectingAnnotationEngine.java:49)\r\n\tat org.mockito.internal.configuration.InjectingAnnotationEngine.process(InjectingAnnotationEngine.java:41)\r\n\tat org.mockito.MockitoAnnotations.initMocks(MockitoAnnotations.java:69)\r\n\t... 21 more\r\n    Caused by: java.lang.NoSuchMethodError: net.bytebuddy.dynamic.loading.MultipleParentClassLoader$Builder.appendMostSpecific(Ljava/util/Collection;)Lnet/bytebuddy/dynamic/loading/MultipleParentClassLoader$Builder;\r\n\tat org.mockito.internal.creation.bytebuddy.SubclassBytecodeGenerator.mockClass(SubclassBytecodeGenerator.java:83)\r\n\tat org.mockito.internal.creation.bytebuddy.TypeCachingBytecodeGenerator$1.call(TypeCachingBytecodeGenerator.java:37)\r\n\tat org.mockito.internal.creation.bytebuddy.TypeCachingBytecodeGenerator$1.call(TypeCachingBytecodeGenerator.java:34)\r\n\tat net.bytebuddy.TypeCache.findOrInsert(TypeCache.java:137)\r\n\t... 39 more\r\n\r\n-----------------------\r\nIn the pom:\r\n\r\n         &lt;dependency&gt;\r\n            &lt;groupId&gt;org.mockito&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\r\n            &lt;version&gt;2.28.2&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n(Also tried version `3.0.0` )\r\n\r\n\r\nclass `Car` :\r\n\r\n    public class Car{\r\n    \r\n      // Some properties. Non of them is final / static.\r\n\r\n     // constructor\r\n    }\r\n\r\n\r\n`Test` class:\r\n\r\n    @RunWith(MockitoJUnitRunner.class)\r\n    public class ParkinglotTest{\r\n\r\n    @Mock\r\n    private Car car;\r\n\r\n    private Parkinglog parkinglot;\r\n\r\n    @Before\r\n     public void setUp(){\r\n        parkinglot = new Parkinglot(car);\r\n    }\r\n\r\n     \r\n    ....\r\n\r\n\r\n","title":"Mockito - Mockito cannot mock this class - IllegalArgumentException: Could not create type","body":"<p>I was trying to use a <code>Mock</code> class in a test of mine and getting this error:</p>\n\n<pre><code>org.mockito.exceptions.base.MockitoException: \nMockito cannot mock this class: class com.example.Car.\n\nMockito can only mock non-private &amp; non-final classes.\nIf you're not sure why you're getting this error, please report to the mailing list.\n\n\nJava               : 1.8\nJVM vendor name    : Oracle Corporation\nJVM vendor version : 25.161-b12\nJVM name           : Java HotSpot(TM) Client VM\nJVM version        : 1.8.0_161-b12\nJVM info           : mixed mode, sharing\nOS name            : Windows 10\nOS version         : 10.0\n\n\nUnderlying exception : java.lang.IllegalArgumentException: Could not create type\n\nat org.mockito.internal.runners.DefaultInternalRunner$1$1.evaluate(DefaultInternalRunner.java:43)\nat org.junit.rules.ExpectedException$ExpectedExceptionStatement.evaluate(ExpectedException.java:239)\nat org.junit.rules.RunRules.evaluate(RunRules.java:20)\nat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\nat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)\nat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)\nat org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\nat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\nat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\nat org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\nat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\nat org.junit.runners.ParentRunner.run(ParentRunner.java:363)\nat org.mockito.internal.runners.DefaultInternalRunner$1.run(DefaultInternalRunner.java:74)\nat org.mockito.internal.runners.DefaultInternalRunner.run(DefaultInternalRunner.java:80)\nat org.mockito.internal.runners.StrictRunner.run(StrictRunner.java:39)\nat org.mockito.junit.MockitoJUnitRunner.run(MockitoJUnitRunner.java:163)\nat org.junit.runner.JUnitCore.run(JUnitCore.java:137)\nat com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:68)\nat com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:47)\nat com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)\nat com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)\nCaused by: java.lang.IllegalArgumentException: Could not create type\nat net.bytebuddy.TypeCache.findOrInsert(TypeCache.java:139)\nat net.bytebuddy.TypeCache$WithInlineExpunction.findOrInsert(TypeCache.java:344)\nat net.bytebuddy.TypeCache.findOrInsert(TypeCache.java:159)\nat net.bytebuddy.TypeCache$WithInlineExpunction.findOrInsert(TypeCache.java:353)\nat org.mockito.internal.creation.bytebuddy.TypeCachingBytecodeGenerator.mockClass(TypeCachingBytecodeGenerator.java:32)\nat org.mockito.internal.creation.bytebuddy.SubclassByteBuddyMockMaker.createMockType(SubclassByteBuddyMockMaker.java:71)\nat org.mockito.internal.creation.bytebuddy.SubclassByteBuddyMockMaker.createMock(SubclassByteBuddyMockMaker.java:42)\nat org.mockito.internal.creation.bytebuddy.ByteBuddyMockMaker.createMock(ByteBuddyMockMaker.java:25)\nat org.mockito.internal.util.MockUtil.createMock(MockUtil.java:35)\nat org.mockito.internal.MockitoCore.mock(MockitoCore.java:62)\nat org.mockito.Mockito.mock(Mockito.java:1908)\nat org.mockito.internal.configuration.MockAnnotationProcessor.processAnnotationForMock(MockAnnotationProcessor.java:44)\nat org.mockito.internal.configuration.MockAnnotationProcessor.process(MockAnnotationProcessor.java:19)\nat org.mockito.internal.configuration.MockAnnotationProcessor.process(MockAnnotationProcessor.java:16)\nat org.mockito.internal.configuration.IndependentAnnotationEngine.createMockFor(IndependentAnnotationEngine.java:38)\nat org.mockito.internal.configuration.IndependentAnnotationEngine.process(IndependentAnnotationEngine.java:62)\nat org.mockito.internal.configuration.InjectingAnnotationEngine.processIndependentAnnotations(InjectingAnnotationEngine.java:49)\nat org.mockito.internal.configuration.InjectingAnnotationEngine.process(InjectingAnnotationEngine.java:41)\nat org.mockito.MockitoAnnotations.initMocks(MockitoAnnotations.java:69)\n... 21 more\nCaused by: java.lang.NoSuchMethodError: net.bytebuddy.dynamic.loading.MultipleParentClassLoader$Builder.appendMostSpecific(Ljava/util/Collection;)Lnet/bytebuddy/dynamic/loading/MultipleParentClassLoader$Builder;\nat org.mockito.internal.creation.bytebuddy.SubclassBytecodeGenerator.mockClass(SubclassBytecodeGenerator.java:83)\nat org.mockito.internal.creation.bytebuddy.TypeCachingBytecodeGenerator$1.call(TypeCachingBytecodeGenerator.java:37)\nat org.mockito.internal.creation.bytebuddy.TypeCachingBytecodeGenerator$1.call(TypeCachingBytecodeGenerator.java:34)\nat net.bytebuddy.TypeCache.findOrInsert(TypeCache.java:137)\n... 39 more\n</code></pre>\n\n<hr>\n\n<p>In the pom:</p>\n\n<pre><code>     &lt;dependency&gt;\n        &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n        &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\n        &lt;version&gt;2.28.2&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n</code></pre>\n\n<p>(Also tried version <code>3.0.0</code> )</p>\n\n<p>class <code>Car</code> :</p>\n\n<pre><code>public class Car{\n\n  // Some properties. Non of them is final / static.\n\n // constructor\n}\n</code></pre>\n\n<p><code>Test</code> class:</p>\n\n<pre><code>@RunWith(MockitoJUnitRunner.class)\npublic class ParkinglotTest{\n\n@Mock\nprivate Car car;\n\nprivate Parkinglog parkinglot;\n\n@Before\n public void setUp(){\n    parkinglot = new Parkinglot(car);\n}\n\n\n....\n</code></pre>\n"},{"tags":["java","spring-boot","keycloak","keycloak-services","keycloak-spi"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1691677375,"post_id":76874582,"comment_id":135526229,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."}],"owner":{"account_id":15459410,"reputation":1,"user_id":11152438,"display_name":"C.Quang B&#249;i"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691661088,"creation_date":1691661088,"question_id":76874582,"body_markdown":"My keycloak version is 16.1.1\r\nMy client needs features like a linked account. Example Account A linked to account B, account C, account D.\r\nIn session A want to switch to session account B without login with username/password again. ( May be exchange access token acccount A --&gt; access token account B).\r\n\r\n\r\nI have a few options to solve the problem like:\r\n\r\n1. Use Impersonate (a feature of Keycloak ) --&gt; Problem: seem Keycloak 16 does not support.\r\n2. For Every account login i will save the refresh token to attribute of user, they can switch to another account by refresh token exchange access token --&gt; Problem: Access token too long timespan and at least account need to login 1 time\r\n3. Find way to generate access token like keycloak but i cant find any code ( spi, or code ). Maybe need to overwrite or see code at endpoint /realms/{realm}/protocol/openid-connect/token\r\n---&gt; I hope someone gives me some ideas to resolve this problem.\r\nI am very happy to hear you all. Thanks so much.","title":"Feature Switch account without logout login","body":"<p>My keycloak version is 16.1.1\nMy client needs features like a linked account. Example Account A linked to account B, account C, account D.\nIn session A want to switch to session account B without login with username/password again. ( May be exchange access token acccount A --&gt; access token account B).</p>\n<p>I have a few options to solve the problem like:</p>\n<ol>\n<li>Use Impersonate (a feature of Keycloak ) --&gt; Problem: seem Keycloak 16 does not support.</li>\n<li>For Every account login i will save the refresh token to attribute of user, they can switch to another account by refresh token exchange access token --&gt; Problem: Access token too long timespan and at least account need to login 1 time</li>\n<li>Find way to generate access token like keycloak but i cant find any code ( spi, or code ). Maybe need to overwrite or see code at endpoint /realms/{realm}/protocol/openid-connect/token\n---&gt; I hope someone gives me some ideas to resolve this problem.\nI am very happy to hear you all. Thanks so much.</li>\n</ol>\n"},{"tags":["java","spring-webflux","netty","project-reactor","reactor-netty"],"comments":[{"owner":{"account_id":2366187,"reputation":60152,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":0,"creation_date":1660936831,"post_id":73069155,"comment_id":129659914,"body_markdown":"You need the [epoll dependency](https://mvnrepository.com/artifact/io.netty/netty-transport-native-epoll) to use epoll - which includes native code. You also need to be running a UNIX OS (ie not windows). Otherwise NIO is a generic platform agnostic solution.","body":"You need the <a href=\"https://mvnrepository.com/artifact/io.netty/netty-transport-native-epoll\" rel=\"nofollow noreferrer\">epoll dependency</a> to use epoll - which includes native code. You also need to be running a UNIX OS (ie not windows). Otherwise NIO is a generic platform agnostic solution."},{"owner":{"account_id":15328195,"reputation":2461,"user_id":11058704,"display_name":"RamPrakash"},"score":0,"creation_date":1664836092,"post_id":73069155,"comment_id":130557815,"body_markdown":"even with docker, it still seems to use NIO. not epoll. It is confusing.","body":"even with docker, it still seems to use NIO. not epoll. It is confusing."}],"answers":[{"tags":[],"owner":{"account_id":70791,"reputation":1619,"user_id":204950,"accept_rate":92,"display_name":"banterCZ"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687241453,"creation_date":1687241453,"answer_id":76511810,"question_id":73069155,"body_markdown":"Netty provides platform-specific JNI transports. I see `netty-transport-native-epoll` dependency only for `linux-x86_64` architecture. That is most probably why you see such warnings for Mac `osx-aarch_64`.\r\n\r\nSee https://netty.io/wiki/native-transports.html and https://projectreactor.io/docs/netty/release/reference/index.html#connection-timeout","title":"How does Reactor Netty client internally decide which Channel object to use","body":"<p>Netty provides platform-specific JNI transports. I see <code>netty-transport-native-epoll</code> dependency only for <code>linux-x86_64</code> architecture. That is most probably why you see such warnings for Mac <code>osx-aarch_64</code>.</p>\n<p>See <a href=\"https://netty.io/wiki/native-transports.html\" rel=\"nofollow noreferrer\">https://netty.io/wiki/native-transports.html</a> and <a href=\"https://projectreactor.io/docs/netty/release/reference/index.html#connection-timeout\" rel=\"nofollow noreferrer\">https://projectreactor.io/docs/netty/release/reference/index.html#connection-timeout</a></p>\n"}],"owner":{"account_id":6691602,"reputation":989,"user_id":5160940,"display_name":"DockYard"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1801,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1691660659,"creation_date":1658418261,"question_id":73069155,"body_markdown":"I have created an object of `HttpClient` class(from Reactor Netty jar), and used this httpClient to create an object of `Webclient` class(from Spring Webflux jar) as below:\r\n\r\n\r\n&lt;pre&gt;&lt;code&gt;\r\n\r\n    HttpClient &lt;i&gt;httpClient&lt;/i&gt; = HttpClient.create()\r\n\t    .option(ChannelOption.CONNECT_TIMEOUT_MILLIS, 5000)\r\n\t    .option(ChannelOption.SO_KEEPALIVE, true)\r\n\t    &lt;b&gt;.option(EpollChannelOption.TCP_KEEPIDLE, 300)\r\n\t    .option(EpollChannelOption.TCP_KEEPINTVL, 60)\r\n\t    .option(EpollChannelOption.TCP_KEEPCNT, 8)&lt;/b&gt;\r\n\t    .doOnConnected(//custom stuff);\r\n\r\n\r\n\r\n    Webclient webclient = WebClient.builder()\r\n        .baseUrl(&lt;my custom url&gt;)\r\n        .defaultHeader(&lt;my custom headers&gt;)\r\n        .codecs(\r\n                configurer -&gt; {\r\n                    configurer.defaultCodecs().jaxb2Encoder(new Jaxb2XmlEncoder());\r\n                    configurer.defaultCodecs().jaxb2Decoder(new Jaxb2XmlDecoder());\r\n                })\r\n        .clientConnector(new ReactorClientHttpConnector(&lt;i&gt;httpClient&lt;/i&gt;)\r\n        .build();\r\n&lt;/code&gt;\r\n&lt;/pre&gt;\r\n\r\nThen I&#39;m using this WebClient to make a POST API request.\r\n\r\nAlthough I&#39;m getting the API response correctly, I was getting below warnings in the logs:\r\n\r\n```\r\nUnknown channel option &#39;io.netty.channel.epoll.EpollChannelOption#TCP_KEEPIDLE&#39; for channel &#39;[id: 0x76c8c652]&#39;\r\n\r\nUnknown channel option &#39;io.netty.channel.epoll.EpollChannelOption#TCP_KEEPCNT&#39; for channel &#39;[id: 0x76c8c652]&#39;\r\n\r\nUnknown channel option &#39;io.netty.channel.epoll.EpollChannelOption#TCP_KEEPINTVL&#39; for channel &#39;[id: 0x76c8c652]&#39;\r\n\r\n```\r\n\r\nThe properties(`TCP_KEEPIDLE, TCP_KEEPCNT`, `TCP_KEEPINTVL` etc) in the above warning are  set in the HttpClient` object creation code as shown in the above code.\r\n\r\nI debugged this and found out that the warnings are getting generated in  \r\n`TransportConnector.setChannelOptions(Channel channel, Map&lt;ChannelOption&lt;?&gt;, ?&gt; options, boolean isDomainSocket)` method which is there in the reactor netty jar.\r\n\r\nAnd the reason the warnings are coming is because the `Channel` object in the above mentioned method is an object of `NioSocketChannel`. After reading the `reactor netty` documentation I realized that if the Channel is `NioSocketChannel` then we need to change the configs from `EpollChannelOption` to `NioChannelOption` as below:\r\n\r\n&lt;pre&gt;&lt;code&gt;\r\n\r\n\r\n    HttpClient httpClient = HttpClient.create()\r\n\t    .option(ChannelOption.CONNECT_TIMEOUT_MILLIS, 5000)\r\n\t    .option(ChannelOption.SO_KEEPALIVE, true)\r\n\t    &lt;b&gt;.option(NioChannelOption.of(ExtendedSocketOptions.TCP_KEEPIDLE), 300)\r\n        .option(NioChannelOption.of(ExtendedSocketOptions.TCP_KEEPINTERVAL), 60)\r\n        .option(NioChannelOption.of(ExtendedSocketOptions.TCP_KEEPCOUNT), 8)&lt;/b&gt;\r\n\t    .doOnConnected(//custom stuff);\r\n\r\n\r\n&lt;/code&gt;\r\n&lt;/pre&gt;\r\n\r\nAnd it worked fine after the above change, as no warnings are coming now.\r\n\r\nHowever here is my **problem** needing clarification:\r\n\r\nThis exact project has been working fine in one of our production environment. Also from the logs I could see the underlying `channel` in production was `EpollSocketChannelConfig` in contrast to my local where the `channel` was `NioSocketChannel`.\r\n\r\nIn what circumstances can the  underlying `Channel` be different for the same codebase?\r\n\r\nI haven&#39;t used the `runOn ` method either anywhere in the codebase.\r\n\r\nSome info about my setup: \r\nMy local is a Mac M1 is where the Channel is NIO\r\nwhereas \r\nthe Production is running Linux where the Channel is NIO. \r\n\r\nThe java version in both the machines is Java 11.\r\n\r\nPlease help\r\n","title":"How does Reactor Netty client internally decide which Channel object to use","body":"<p>I have created an object of <code>HttpClient</code> class(from Reactor Netty jar), and used this httpClient to create an object of <code>Webclient</code> class(from Spring Webflux jar) as below:</p>\n<pre><code>\n\n    HttpClient <i>httpClient</i> = HttpClient.create()\n        .option(ChannelOption.CONNECT_TIMEOUT_MILLIS, 5000)\n        .option(ChannelOption.SO_KEEPALIVE, true)\n        <b>.option(EpollChannelOption.TCP_KEEPIDLE, 300)\n        .option(EpollChannelOption.TCP_KEEPINTVL, 60)\n        .option(EpollChannelOption.TCP_KEEPCNT, 8)</b>\n        .doOnConnected(//custom stuff);\n\n\n\n    Webclient webclient = WebClient.builder()\n        .baseUrl()\n        .defaultHeader()\n        .codecs(\n                configurer -> {\n                    configurer.defaultCodecs().jaxb2Encoder(new Jaxb2XmlEncoder());\n                    configurer.defaultCodecs().jaxb2Decoder(new Jaxb2XmlDecoder());\n                })\n        .clientConnector(new ReactorClientHttpConnector(<i>httpClient</i>)\n        .build();\n</code>\n</pre>\n<p>Then I'm using this WebClient to make a POST API request.</p>\n<p>Although I'm getting the API response correctly, I was getting below warnings in the logs:</p>\n<pre><code>Unknown channel option 'io.netty.channel.epoll.EpollChannelOption#TCP_KEEPIDLE' for channel '[id: 0x76c8c652]'\n\nUnknown channel option 'io.netty.channel.epoll.EpollChannelOption#TCP_KEEPCNT' for channel '[id: 0x76c8c652]'\n\nUnknown channel option 'io.netty.channel.epoll.EpollChannelOption#TCP_KEEPINTVL' for channel '[id: 0x76c8c652]'\n\n</code></pre>\n<p>The properties(<code>TCP_KEEPIDLE, TCP_KEEPCNT</code>, <code>TCP_KEEPINTVL</code> etc) in the above warning are  set in the HttpClient` object creation code as shown in the above code.</p>\n<p>I debugged this and found out that the warnings are getting generated in<br />\n<code>TransportConnector.setChannelOptions(Channel channel, Map&lt;ChannelOption&lt;?&gt;, ?&gt; options, boolean isDomainSocket)</code> method which is there in the reactor netty jar.</p>\n<p>And the reason the warnings are coming is because the <code>Channel</code> object in the above mentioned method is an object of <code>NioSocketChannel</code>. After reading the <code>reactor netty</code> documentation I realized that if the Channel is <code>NioSocketChannel</code> then we need to change the configs from <code>EpollChannelOption</code> to <code>NioChannelOption</code> as below:</p>\n<pre><code>\n\n\n    HttpClient httpClient = HttpClient.create()\n        .option(ChannelOption.CONNECT_TIMEOUT_MILLIS, 5000)\n        .option(ChannelOption.SO_KEEPALIVE, true)\n        <b>.option(NioChannelOption.of(ExtendedSocketOptions.TCP_KEEPIDLE), 300)\n        .option(NioChannelOption.of(ExtendedSocketOptions.TCP_KEEPINTERVAL), 60)\n        .option(NioChannelOption.of(ExtendedSocketOptions.TCP_KEEPCOUNT), 8)</b>\n        .doOnConnected(//custom stuff);\n\n\n</code>\n</pre>\n<p>And it worked fine after the above change, as no warnings are coming now.</p>\n<p>However here is my <strong>problem</strong> needing clarification:</p>\n<p>This exact project has been working fine in one of our production environment. Also from the logs I could see the underlying <code>channel</code> in production was <code>EpollSocketChannelConfig</code> in contrast to my local where the <code>channel</code> was <code>NioSocketChannel</code>.</p>\n<p>In what circumstances can the  underlying <code>Channel</code> be different for the same codebase?</p>\n<p>I haven't used the <code>runOn </code> method either anywhere in the codebase.</p>\n<p>Some info about my setup:\nMy local is a Mac M1 is where the Channel is NIO\nwhereas\nthe Production is running Linux where the Channel is NIO.</p>\n<p>The java version in both the machines is Java 11.</p>\n<p>Please help</p>\n"},{"tags":["java","swing","opencv","image-processing"],"answers":[{"tags":[],"owner":{"account_id":1405485,"reputation":3174,"user_id":1333331,"display_name":"lukk"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1429028205,"creation_date":1394492834,"answer_id":22313258,"question_id":22284823,"body_markdown":"You can convert `Mat` object to `BufferedImage` object using following method:\r\n\r\n    public static BufferedImage createAwtImage(Mat mat) {\r\n\r\n        int type = 0;\r\n        if (mat.channels() == 1) {\r\n            type = BufferedImage.TYPE_BYTE_GRAY;\r\n        } else if (mat.channels() == 3) {\r\n            type = BufferedImage.TYPE_3BYTE_BGR;\r\n        } else {\r\n            return null;\r\n        }\r\n\r\n        BufferedImage image = new BufferedImage(mat.width(), mat.height(), type);\r\n        WritableRaster raster = image.getRaster();\r\n        DataBufferByte dataBuffer = (DataBufferByte) raster.getDataBuffer();\r\n        byte[] data = dataBuffer.getData();\r\n        mat.get(0, 0, data);\r\n\r\n        return image;\r\n    }\r\n\r\nThen you can simply display image using `ImageIcon`:\r\n\r\n    // Load image using Highgui or create Mat object other way you want\r\n    Mat mat = Highgui.imread(&quot;.../img.jpg&quot;);\r\n\r\n    ImageIcon image = new ImageIcon(createAwtImage(mat));\r\n\r\n","title":"OpenCV output Using Mat object in Jpanel","body":"<p>You can convert <code>Mat</code> object to <code>BufferedImage</code> object using following method:</p>\n\n<pre><code>public static BufferedImage createAwtImage(Mat mat) {\n\n    int type = 0;\n    if (mat.channels() == 1) {\n        type = BufferedImage.TYPE_BYTE_GRAY;\n    } else if (mat.channels() == 3) {\n        type = BufferedImage.TYPE_3BYTE_BGR;\n    } else {\n        return null;\n    }\n\n    BufferedImage image = new BufferedImage(mat.width(), mat.height(), type);\n    WritableRaster raster = image.getRaster();\n    DataBufferByte dataBuffer = (DataBufferByte) raster.getDataBuffer();\n    byte[] data = dataBuffer.getData();\n    mat.get(0, 0, data);\n\n    return image;\n}\n</code></pre>\n\n<p>Then you can simply display image using <code>ImageIcon</code>:</p>\n\n<pre><code>// Load image using Highgui or create Mat object other way you want\nMat mat = Highgui.imread(\".../img.jpg\");\n\nImageIcon image = new ImageIcon(createAwtImage(mat));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29198008,"reputation":1,"user_id":22368697,"display_name":"guest"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691658171,"creation_date":1691658171,"answer_id":76874187,"question_id":22284823,"body_markdown":"The idea seems still sound but does not compile (anymore?) with \r\n```\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.bytedeco&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;javacv-platform&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.5.8&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n```\r\n\r\n\r\n&gt; The method width() is undefined for the type Mat\r\n\r\n&gt; The method height() is undefined for the type Mat\r\n\r\n&gt;The method get(int, int, byte[]) is undefined for the type Mat\r\n\r\n","title":"OpenCV output Using Mat object in Jpanel","body":"<p>The idea seems still sound but does not compile (anymore?) with</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.bytedeco&lt;/groupId&gt;\n            &lt;artifactId&gt;javacv-platform&lt;/artifactId&gt;\n            &lt;version&gt;1.5.8&lt;/version&gt;\n        &lt;/dependency&gt;\n\n</code></pre>\n<blockquote>\n<p>The method width() is undefined for the type Mat</p>\n</blockquote>\n<blockquote>\n<p>The method height() is undefined for the type Mat</p>\n</blockquote>\n<blockquote>\n<p>The method get(int, int, byte[]) is undefined for the type Mat</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":29198285,"reputation":1,"user_id":22368936,"display_name":"guest"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691660389,"creation_date":1691660389,"answer_id":76874490,"question_id":22284823,"body_markdown":"This fixed version of the above works on bytedeco 1.5.8:\r\n```\r\n\tpublic static BufferedImage createImage(Mat mat) {\r\n\t\tint type = 0;\r\n\t\tif (mat.channels() == 1) {\r\n\t\t\ttype = BufferedImage.TYPE_BYTE_GRAY;\r\n\t\t} else if (mat.channels() == 3) {\r\n\t\t\ttype = BufferedImage.TYPE_3BYTE_BGR;\r\n\t\t} else {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tBufferedImage image = new BufferedImage(mat.cols(), mat.rows(), type);\r\n\t\tWritableRaster raster = image.getRaster();\r\n\t\tDataBufferByte dataBuffer = (DataBufferByte) raster.getDataBuffer();\r\n\t\tbyte[] data = dataBuffer.getData();\r\n\t\tmat.data().get(data);\r\n\r\n\t\treturn image;\r\n\t}\r\n```","title":"OpenCV output Using Mat object in Jpanel","body":"<p>This fixed version of the above works on bytedeco 1.5.8:</p>\n<pre><code>    public static BufferedImage createImage(Mat mat) {\n        int type = 0;\n        if (mat.channels() == 1) {\n            type = BufferedImage.TYPE_BYTE_GRAY;\n        } else if (mat.channels() == 3) {\n            type = BufferedImage.TYPE_3BYTE_BGR;\n        } else {\n            return null;\n        }\n\n        BufferedImage image = new BufferedImage(mat.cols(), mat.rows(), type);\n        WritableRaster raster = image.getRaster();\n        DataBufferByte dataBuffer = (DataBufferByte) raster.getDataBuffer();\n        byte[] data = dataBuffer.getData();\n        mat.data().get(data);\n\n        return image;\n    }\n</code></pre>\n"}],"owner":{"account_id":3934762,"reputation":47,"user_id":3251550,"display_name":"Rabbir"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3800,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":22313258,"answer_count":3,"score":0,"last_activity_date":1691660389,"creation_date":1394382745,"question_id":22284823,"body_markdown":"I know we can output an Image using Jpanel using the following code:\r\n\r\n       JFrame frame = new JFrame(&quot;IMG&quot;);\r\n\t   frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n\t   \r\n\t   frame.setResizable(true);\r\n\t   frame.setLocationRelativeTo(null);\r\n\t   \r\n\t   ImageIcon image = new ImageIcon(&quot;.../img.jpg&quot;);\r\n\t   frame.setSize(image.getIconWidth()+10,image.getIconHeight()+35);\r\n\t   \r\n\t   JLabel label1 = new JLabel(&quot; &quot;, image, JLabel.CENTER);\r\n\t   frame.getContentPane().add(label1);\r\n\t    \r\n\t   frame.validate();\r\n\t   frame.setVisible(true);\r\n\r\nThis code would assume that I have created or already have an image file in my directory. But what I want to do is output the image in the Jpanel directly without creating the image file. How do I do that using OpenCV Mat object in JAVA?","title":"OpenCV output Using Mat object in Jpanel","body":"<p>I know we can output an Image using Jpanel using the following code:</p>\n\n<pre><code>   JFrame frame = new JFrame(\"IMG\");\n   frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n\n   frame.setResizable(true);\n   frame.setLocationRelativeTo(null);\n\n   ImageIcon image = new ImageIcon(\".../img.jpg\");\n   frame.setSize(image.getIconWidth()+10,image.getIconHeight()+35);\n\n   JLabel label1 = new JLabel(\" \", image, JLabel.CENTER);\n   frame.getContentPane().add(label1);\n\n   frame.validate();\n   frame.setVisible(true);\n</code></pre>\n\n<p>This code would assume that I have created or already have an image file in my directory. But what I want to do is output the image in the Jpanel directly without creating the image file. How do I do that using OpenCV Mat object in JAVA?</p>\n"},{"tags":["java","spring","security"],"answers":[{"tags":[],"owner":{"account_id":20926511,"reputation":1,"user_id":15373814,"display_name":"Kristijan P."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691660373,"creation_date":1691660373,"answer_id":76874487,"question_id":76870505,"body_markdown":"Instead of using `.requestMatchers(&quot;/static/**&quot;).permitAll();` \r\nI needed to use \r\n\r\n    .requestMatchers(&quot;/css/**&quot;, &quot;/js/**&quot;, &quot;/fonts/**&quot;, &quot;img/**&quot;).permitAll(); \r\n\r\n`since my resources.static-locations` are set to static folder where I keep all my static content.","title":"Static content not loading status code 302 Java Spring Security","body":"<p>Instead of using <code>.requestMatchers(&quot;/static/**&quot;).permitAll();</code>\nI needed to use</p>\n<pre><code>.requestMatchers(&quot;/css/**&quot;, &quot;/js/**&quot;, &quot;/fonts/**&quot;, &quot;img/**&quot;).permitAll(); \n</code></pre>\n<p><code>since my resources.static-locations</code> are set to static folder where I keep all my static content.</p>\n"}],"owner":{"account_id":20926511,"reputation":1,"user_id":15373814,"display_name":"Kristijan P."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691660373,"creation_date":1691606966,"question_id":76870505,"body_markdown":"After I added security to my application, static content stopped loading, it makes a request for JS and CSS but status code 303 is returned.\r\n\r\nOnly raw HTML is shown. \r\n\r\nHere is my config also i made changes to the location of static content, properties file below.\r\n```\r\n\r\n@Configuration\r\n@EnableWebSecurity\r\npublic class Security {\r\n\r\n    @Bean\r\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n        http.csrf(Customizer.withDefaults())\r\n                .cors(Customizer.withDefaults())\r\n                .authorizeHttpRequests(request -&gt; {\r\n                    request.requestMatchers(&quot;/backoffice/**&quot;).authenticated()\r\n                            .requestMatchers(&quot;/index/**&quot;).permitAll()\r\n                            .requestMatchers(&quot;/static/**&quot;).permitAll();\r\n                })\r\n                .formLogin(form -&gt; form\r\n                        .loginPage(&quot;/login&quot;)\r\n                        .permitAll()\r\n                );\r\n        return http.build();\r\n    }\r\n}\r\n```\r\n\r\nproperties file\r\n\r\n```\r\nspring.messages.basename=lang/messages\r\n# Thymeleaf\r\nspring.thymeleaf.cache=false\r\nspring.thymeleaf.mode=HTML\r\nspring.thymeleaf.encoding=utf-8\r\nspring.thymeleaf.prefix=file:src/main/resources/templates/\r\n# Static resources\r\nspring.web.resources.cache.period=0\r\nspring.web.resources.static-locations=file:src/main/resources/static/,file:uploads/ProductImages/\r\n# Connection string\r\nspring.data.mongodb.uri=${CONNECTION_STRING}\r\n# Custom File Size\r\nspring.servlet.multipart.max-file-size=5MB\r\nspring.servlet.multipart.max-request-size=5MB\r\n# Custom folder for serving product images\r\n```\r\n\r\n\r\n\r\nWhen I delete security config content loads normally.  ","title":"Static content not loading status code 302 Java Spring Security","body":"<p>After I added security to my application, static content stopped loading, it makes a request for JS and CSS but status code 303 is returned.</p>\n<p>Only raw HTML is shown.</p>\n<p>Here is my config also i made changes to the location of static content, properties file below.</p>\n<pre><code>\n@Configuration\n@EnableWebSecurity\npublic class Security {\n\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n        http.csrf(Customizer.withDefaults())\n                .cors(Customizer.withDefaults())\n                .authorizeHttpRequests(request -&gt; {\n                    request.requestMatchers(&quot;/backoffice/**&quot;).authenticated()\n                            .requestMatchers(&quot;/index/**&quot;).permitAll()\n                            .requestMatchers(&quot;/static/**&quot;).permitAll();\n                })\n                .formLogin(form -&gt; form\n                        .loginPage(&quot;/login&quot;)\n                        .permitAll()\n                );\n        return http.build();\n    }\n}\n</code></pre>\n<p>properties file</p>\n<pre><code>spring.messages.basename=lang/messages\n# Thymeleaf\nspring.thymeleaf.cache=false\nspring.thymeleaf.mode=HTML\nspring.thymeleaf.encoding=utf-8\nspring.thymeleaf.prefix=file:src/main/resources/templates/\n# Static resources\nspring.web.resources.cache.period=0\nspring.web.resources.static-locations=file:src/main/resources/static/,file:uploads/ProductImages/\n# Connection string\nspring.data.mongodb.uri=${CONNECTION_STRING}\n# Custom File Size\nspring.servlet.multipart.max-file-size=5MB\nspring.servlet.multipart.max-request-size=5MB\n# Custom folder for serving product images\n</code></pre>\n<p>When I delete security config content loads normally.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":0,"creation_date":1691701478,"post_id":76874446,"comment_id":135531066,"body_markdown":"Can we please get a [mcve]? I&#39;d also not swallow any exceptions, generally.","body":"Can we please get a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>? I&#39;d also not swallow any exceptions, generally."}],"owner":{"account_id":29198202,"reputation":1,"user_id":22368867,"display_name":"prashant kumar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691660360,"creation_date":1691660003,"question_id":76874446,"body_markdown":"\tbyte[] buf = new byte[4096];\r\n\tfor (int len; (len = fis.read(buf)) &gt; 0 || tail;)\r\n    {\r\n\t\t\tif (len &gt; 0) {\r\n\t\t\t\t\tos.write(buf, 0, len);\r\n\t\t\t\t\tos.flush();\r\n\t\t\t\t\tresponse.flushBuffer();\r\n\t\t\t} else {\r\n\t\t\t\t\tos.write(&#39;.&#39;);\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tThread.sleep(1000);\r\n\t\t\t\t\t} catch (Exception e) {}\r\n\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\tos.flush();\r\n\t}\r\n\r\nwhile printing the large log file into servlet getting not enough heap memory error.","title":"reading log file sys_trace.log and printing the data into servlet out of memory error","body":"<pre><code>byte[] buf = new byte[4096];\nfor (int len; (len = fis.read(buf)) &gt; 0 || tail;)\n{\n        if (len &gt; 0) {\n                os.write(buf, 0, len);\n                os.flush();\n                response.flushBuffer();\n        } else {\n                os.write('.');\n                try {\n                        Thread.sleep(1000);\n                } catch (Exception e) {}\n        }\n                        \n        os.flush();\n}\n</code></pre>\n<p>while printing the large log file into servlet getting not enough heap memory error.</p>\n"},{"tags":["java","spring","spring-mvc","annotations"],"comments":[{"owner":{"account_id":2524075,"reputation":36076,"user_id":2193767,"accept_rate":78,"display_name":"TheLostMind"},"score":2,"creation_date":1455692084,"post_id":35449808,"comment_id":58596761,"body_markdown":"That would probably screw up your transactions. A service needs to pass transactions that need propagation to the DAO. Both are components so creation of a bean wont be a problem.","body":"That would probably screw up your transactions. A service needs to pass transactions that need propagation to the DAO. Both are components so creation of a bean wont be a problem."}],"answers":[{"tags":[],"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1455694291,"creation_date":1455694291,"answer_id":35450425,"question_id":35449808,"body_markdown":"It depends on what you use for the remainder of the framework. In theory nothing changes as the `@Service` and `@Repository` annotations are basically `@Component` annotations. The same could be said for `@Controller` or `@Endpoint` (for Spring Ws and there are more). \r\n\r\nHowever they express an intent of what a class is (a service, a repository) and makes it clear to the user to what layer that class belongs. \r\n\r\nHowever if you also use Spring for transaction managemnt then `@Repository` is also a trigger for [adding exception translation][1] to that class (also see the [reference guide][2]). \r\n\r\nAlthough nothing *has* to break it probably will at some point. \r\n\r\n\r\n\r\n[1]: https://github.com/spring-projects/spring-framework/blob/master/spring-tx/src/main/java/org/springframework/dao/annotation/PersistenceExceptionTranslationPostProcessor.java\r\n[2]: http://docs.spring.io/spring/docs/current/spring-framework-reference/html/dao.html#dao-annotations","title":"What will happen if we interchange @service and @repository annotation in the spring MVC","body":"<p>It depends on what you use for the remainder of the framework. In theory nothing changes as the <code>@Service</code> and <code>@Repository</code> annotations are basically <code>@Component</code> annotations. The same could be said for <code>@Controller</code> or <code>@Endpoint</code> (for Spring Ws and there are more). </p>\n\n<p>However they express an intent of what a class is (a service, a repository) and makes it clear to the user to what layer that class belongs. </p>\n\n<p>However if you also use Spring for transaction managemnt then <code>@Repository</code> is also a trigger for <a href=\"https://github.com/spring-projects/spring-framework/blob/master/spring-tx/src/main/java/org/springframework/dao/annotation/PersistenceExceptionTranslationPostProcessor.java\" rel=\"nofollow\">adding exception translation</a> to that class (also see the <a href=\"http://docs.spring.io/spring/docs/current/spring-framework-reference/html/dao.html#dao-annotations\" rel=\"nofollow\">reference guide</a>). </p>\n\n<p>Although nothing <em>has</em> to break it probably will at some point. </p>\n"},{"tags":[],"owner":{"account_id":5757383,"reputation":13785,"user_id":4544823,"display_name":"Ken Bekov"},"down_vote_count":0,"up_vote_count":18,"is_accepted":true,"score":18,"last_activity_date":1622825886,"creation_date":1455694779,"answer_id":35450552,"question_id":35449808,"body_markdown":"According to [documentaion][1] `@Repository`,`@Service`,`@Controller` are all synonyms. They all are just specializations of `@Component` annotation. So, generally, they can be used one instead of other. But ... you should not do this.\r\n\r\nFirst reason: any of these annotations *make clear the role* of your component in the application. Shows - is this component belongs to the controller, service, or data layer.\r\n\r\nSecond reason: some of these annotations processed differently by different Spring modules. For example, `Spring Data JPA` will process `@Repository` and will try to replace with implementation any interface marked by this annotation. Spring also will apply automatic exception translation to such classes. Another example: `Spring Web MVC` processes `@Controller`, and uses classes marked with it in URL mappings.\r\n\r\nActually, in future versions, some modules of Spring could process `@Service` in a particular way. Not as simple `@Component`. That&#39;s why documentation advises:\r\n\r\n&gt; It is also possible that @Repository, @Service, and @Controller may\r\n&gt; carry additional semantics in future releases of the Spring Framework.\r\n&gt; Thus, if you are choosing between using @Component or @Service for\r\n&gt; your service layer, @Service is clearly the better choice.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-stereotype-annotations","title":"What will happen if we interchange @service and @repository annotation in the spring MVC","body":"<p>According to <a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-stereotype-annotations\" rel=\"nofollow noreferrer\">documentaion</a> <code>@Repository</code>,<code>@Service</code>,<code>@Controller</code> are all synonyms. They all are just specializations of <code>@Component</code> annotation. So, generally, they can be used one instead of other. But ... you should not do this.</p>\n<p>First reason: any of these annotations <em>make clear the role</em> of your component in the application. Shows - is this component belongs to the controller, service, or data layer.</p>\n<p>Second reason: some of these annotations processed differently by different Spring modules. For example, <code>Spring Data JPA</code> will process <code>@Repository</code> and will try to replace with implementation any interface marked by this annotation. Spring also will apply automatic exception translation to such classes. Another example: <code>Spring Web MVC</code> processes <code>@Controller</code>, and uses classes marked with it in URL mappings.</p>\n<p>Actually, in future versions, some modules of Spring could process <code>@Service</code> in a particular way. Not as simple <code>@Component</code>. That's why documentation advises:</p>\n<blockquote>\n<p>It is also possible that @Repository, @Service, and @Controller may\ncarry additional semantics in future releases of the Spring Framework.\nThus, if you are choosing between using @Component or @Service for\nyour service layer, @Service is clearly the better choice.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":17722198,"reputation":63,"user_id":12866947,"display_name":"Pushpendra Kushvaha"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691660354,"creation_date":1691660354,"answer_id":76874486,"question_id":35449808,"body_markdown":"**According to documentation**\r\n\r\nService.java\r\n\r\n&gt;     @Target(ElementType.TYPE)\r\n&gt;     @Retention(RetentionPolicy.RUNTIME)\r\n&gt;     @Documented\r\n&gt;     @Component\r\n&gt;     public @interface Service {\r\n&gt;     \t@AliasFor(annotation = Component.class)\r\n&gt;     \tString value() default &quot;&quot;;\r\n&gt;     }\r\n\r\nRepository.java\r\n\r\n&gt; \r\n&gt;     @Target(ElementType.TYPE)\r\n&gt;     @Retention(RetentionPolicy.RUNTIME)\r\n&gt;     @Documented\r\n&gt;     @Component\r\n&gt;     public @interface Repository {\r\n&gt;     \t@AliasFor(annotation = Component.class)\r\n&gt;     \tString value() default &quot;&quot;;\r\n&gt;     }\r\n\r\nSo after reading documentation, it seems we don&#39;t get immediate error and theoretically is possible but it is not good practice.If in future Spring offically add new line of code then we may get error.","title":"What will happen if we interchange @service and @repository annotation in the spring MVC","body":"<p><strong>According to documentation</strong></p>\n<p>Service.java</p>\n<blockquote>\n<pre><code>@Target(ElementType.TYPE)\n@Retention(RetentionPolicy.RUNTIME)\n@Documented\n@Component\npublic @interface Service {\n  @AliasFor(annotation = Component.class)\n  String value() default &quot;&quot;;\n}\n</code></pre>\n</blockquote>\n<p>Repository.java</p>\n<blockquote>\n<pre><code>@Target(ElementType.TYPE)\n@Retention(RetentionPolicy.RUNTIME)\n@Documented\n@Component\npublic @interface Repository {\n  @AliasFor(annotation = Component.class)\n  String value() default &quot;&quot;;\n}\n</code></pre>\n</blockquote>\n<p>So after reading documentation, it seems we don't get immediate error and theoretically is possible but it is not good practice.If in future Spring offically add new line of code then we may get error.</p>\n"}],"owner":{"account_id":7581856,"reputation":153,"user_id":5752316,"display_name":"Hisoban"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24958,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"accepted_answer_id":35450552,"answer_count":3,"score":15,"last_activity_date":1691660354,"creation_date":1455691928,"question_id":35449808,"body_markdown":"Why we needs to use `@service` inside the service Implementation and `@repository` in the DAO Implementation. There are no problem occur when I interchange the `@service` and `@repository` annotation in the spring MVC.","title":"What will happen if we interchange @service and @repository annotation in the spring MVC","body":"<p>Why we needs to use <code>@service</code> inside the service Implementation and <code>@repository</code> in the DAO Implementation. There are no problem occur when I interchange the <code>@service</code> and <code>@repository</code> annotation in the spring MVC.</p>\n"},{"tags":["java","mysql","hibernate","jpa","jpql"],"comments":[{"owner":{"account_id":8505101,"reputation":4502,"user_id":6376955,"display_name":"Zeromus"},"score":0,"creation_date":1500374439,"post_id":45164322,"comment_id":77296677,"body_markdown":"1- what&#39;s vorg.email vorg is not an alias.\n2- :email and @param define with name &quot;emailId&quot;","body":"1- what&#39;s vorg.email vorg is not an alias. 2- :email and @param define with name &quot;emailId&quot;"},{"owner":{"account_id":8012388,"reputation":3367,"user_id":6043669,"accept_rate":79,"display_name":"HopeKing"},"score":0,"creation_date":1500374621,"post_id":45164322,"comment_id":77296814,"body_markdown":"There was a small typo. Corrected it now, hope is clear now. Thanks.","body":"There was a small typo. Corrected it now, hope is clear now. Thanks."}],"answers":[{"tags":[],"owner":{"account_id":91502,"reputation":88301,"user_id":251173,"accept_rate":86,"display_name":"Buhake Sindi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1500374760,"creation_date":1500374760,"answer_id":45164564,"question_id":45164322,"body_markdown":"    Select v from Vendor v join v.categories cats WHERE vorg.email =:email AND (cats in :categories or cats IS EMPTY)\r\n\r\nYou can use the `IS [NOT] EMPTY` operator to test for empty collections. JPA doesn&#39;t necessarily bring back a NULL collection. Think about it, DB returns an empty collection.\r\n\r\nOh, I fixed your query (though I didn&#39;t test it).\r\n","title":"Checking for NULL on a Collection in JPQL queries?","body":"<pre><code>Select v from Vendor v join v.categories cats WHERE vorg.email =:email AND (cats in :categories or cats IS EMPTY)\n</code></pre>\n\n<p>You can use the <code>IS [NOT] EMPTY</code> operator to test for empty collections. JPA doesn't necessarily bring back a NULL collection. Think about it, DB returns an empty collection.</p>\n\n<p>Oh, I fixed your query (though I didn't test it).</p>\n"},{"tags":[],"owner":{"account_id":59485,"reputation":1177,"user_id":177987,"accept_rate":60,"display_name":"Loathian"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1531513453,"creation_date":1531513453,"answer_id":51332354,"question_id":45164322,"body_markdown":"So I was stuck doing something quite similar. Basically you want to check to see if either\r\n\r\n 1. the collection you are passing in is empty: then don&#39;t include it in the query\r\n 2. the collection you are passing in is populated: then do include it in the query\r\n\r\nThe problem with this is there is no good way to handle this part:\r\n\r\n    :categories = NULL\r\n\r\nThis is because when translated to SQL it is going to look something like this (when 2 items are in the collection):\r\n\r\n    @p0, @p1 = NULL\r\n\r\nYou cannot wrap it in parenthesis either, because this is not valid in SQL:\r\n\r\n    (@p0, @p1) = NULL\r\n\r\nI tried to use coalesce to reduce the values down to NULL, but I couldn&#39;t get that to work either. \r\n\r\nBasically from what I can tell there isn&#39;t anything in JPQL that lets you run some kind of function of a collection (hashset, etc) to see if it is populated or not. If anyone knows of one please let us know. \r\n\r\nFinally I resorted to a hack, in the calling code I check the collection to see if it is populated. If it is not I simple pass in one more parameter ... an empty string.\r\n\r\n    String catString = &quot;&quot;;\r\n    if (categoryList != null &amp;&amp; !categoryList.isEmpty()) catString = &quot;HasCats&quot;;\r\n\r\nThen in the JPQL do this:\r\n\r\n    WHERE (:catsString = &#39;&#39; or cats IN (:categories)) &quot;\r\n\r\nNot the best solution in the world but it is functional. ","title":"Checking for NULL on a Collection in JPQL queries?","body":"<p>So I was stuck doing something quite similar. Basically you want to check to see if either</p>\n\n<ol>\n<li>the collection you are passing in is empty: then don't include it in the query</li>\n<li>the collection you are passing in is populated: then do include it in the query</li>\n</ol>\n\n<p>The problem with this is there is no good way to handle this part:</p>\n\n<pre><code>:categories = NULL\n</code></pre>\n\n<p>This is because when translated to SQL it is going to look something like this (when 2 items are in the collection):</p>\n\n<pre><code>@p0, @p1 = NULL\n</code></pre>\n\n<p>You cannot wrap it in parenthesis either, because this is not valid in SQL:</p>\n\n<pre><code>(@p0, @p1) = NULL\n</code></pre>\n\n<p>I tried to use coalesce to reduce the values down to NULL, but I couldn't get that to work either. </p>\n\n<p>Basically from what I can tell there isn't anything in JPQL that lets you run some kind of function of a collection (hashset, etc) to see if it is populated or not. If anyone knows of one please let us know. </p>\n\n<p>Finally I resorted to a hack, in the calling code I check the collection to see if it is populated. If it is not I simple pass in one more parameter ... an empty string.</p>\n\n<pre><code>String catString = \"\";\nif (categoryList != null &amp;&amp; !categoryList.isEmpty()) catString = \"HasCats\";\n</code></pre>\n\n<p>Then in the JPQL do this:</p>\n\n<pre><code>WHERE (:catsString = '' or cats IN (:categories)) \"\n</code></pre>\n\n<p>Not the best solution in the world but it is functional. </p>\n"},{"tags":[],"owner":{"account_id":9198536,"reputation":421,"user_id":6836408,"display_name":"Jefferson Trigueiro"},"down_vote_count":0,"up_vote_count":42,"is_accepted":false,"score":42,"last_activity_date":1534900610,"creation_date":1534899440,"answer_id":51958547,"question_id":45164322,"body_markdown":"I was able to got it like this:\r\n\r\n    coalesce(:myIdCollection, null) is null or id in (:myIdCollection)","title":"Checking for NULL on a Collection in JPQL queries?","body":"<p>I was able to got it like this:</p>\n\n<pre><code>coalesce(:myIdCollection, null) is null or id in (:myIdCollection)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12155171,"reputation":41,"user_id":8874308,"display_name":"qqsergiu"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1607525154,"creation_date":1607525154,"answer_id":65219065,"question_id":45164322,"body_markdown":"If anyone using PostgreSQL encounters this problem, it can easily be fixed by adding parentheses:\r\n\r\n    (cats in :categories or (:categories) IS NULL)","title":"Checking for NULL on a Collection in JPQL queries?","body":"<p>If anyone using PostgreSQL encounters this problem, it can easily be fixed by adding parentheses:</p>\n<pre><code>(cats in :categories or (:categories) IS NULL)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8137066,"reputation":619,"user_id":6128392,"display_name":"Pasquale Vitale"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681988090,"creation_date":1681988090,"answer_id":76063295,"question_id":45164322,"body_markdown":"With **spring-data** you can use the **SpEL** on @Query definitions.\r\n\r\nfor example:\r\n\r\n&gt; where (:#{#categoryIds == null || #categoryIds.isEmpty()} = true OR s.id in (:categoryIds))\r\n\r\nthe *where conditions* generated in several cases are:\r\n\r\n 1. empty categoryIds\r\n\r\n&gt; where (?=1 or 1=0)\r\n\r\n 2. null categoryIds\r\n\r\n&gt; where (?=1 or s3_0.SHOP_CATEGORY_ID in(?))\r\n\r\n 3. two items in categoryIds\r\n\r\n&gt; where (?=1 or s3_0.SHOP_CATEGORY_ID in(?,?))\r\n\r\n 4. one item in categoryIds\r\n\r\n&gt; where (?=1 or s3_0.SHOP_CATEGORY_ID in(?))\r\n","title":"Checking for NULL on a Collection in JPQL queries?","body":"<p>With <strong>spring-data</strong> you can use the <strong>SpEL</strong> on @Query definitions.</p>\n<p>for example:</p>\n<blockquote>\n<p>where (:#{#categoryIds == null || #categoryIds.isEmpty()} = true OR s.id in (:categoryIds))</p>\n</blockquote>\n<p>the <em>where conditions</em> generated in several cases are:</p>\n<ol>\n<li>empty categoryIds</li>\n</ol>\n<blockquote>\n<p>where (?=1 or 1=0)</p>\n</blockquote>\n<ol start=\"2\">\n<li>null categoryIds</li>\n</ol>\n<blockquote>\n<p>where (?=1 or s3_0.SHOP_CATEGORY_ID in(?))</p>\n</blockquote>\n<ol start=\"3\">\n<li>two items in categoryIds</li>\n</ol>\n<blockquote>\n<p>where (?=1 or s3_0.SHOP_CATEGORY_ID in(?,?))</p>\n</blockquote>\n<ol start=\"4\">\n<li>one item in categoryIds</li>\n</ol>\n<blockquote>\n<p>where (?=1 or s3_0.SHOP_CATEGORY_ID in(?))</p>\n</blockquote>\n"}],"owner":{"account_id":8012388,"reputation":3367,"user_id":6043669,"accept_rate":79,"display_name":"HopeKing"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12327,"favorite_count":0,"down_vote_count":0,"up_vote_count":20,"accepted_answer_id":51332354,"answer_count":5,"score":20,"last_activity_date":1691659822,"creation_date":1500374148,"question_id":45164322,"body_markdown":"I am writing a JPQL query which queries based on a **Categories** collection. My categories can be null and hence I am checking using :categories=NULL.\r\n\r\n\r\n\r\n\r\n    @Query(&quot;Select v from Vendor v join v.org vorg join v.categories cats WHERE vorg.email =:email AND (cats in :categories or :categories = NULL)&quot;)\r\n\tSet&lt;Vendor&gt; filterVendors(@Param(&quot;emailId&quot;) String emailId, @Param(&quot;categories&quot;) Set&lt;Category&gt; categories);\r\n\r\nThe above works fine when categories is NULL. However, when categories is more than one value I get the error \r\n\r\n&gt; java.sql.SQLException: Operand should contain 1 column(s)\r\n\r\nAnd the hibernate relevant trace is \r\n\r\n&gt;  category6_.category_id in (\r\n                ? , ?\r\n            ) \r\n            or (\r\n                ? , ?\r\n            ) is null\r\n        ) \r\n\r\nHow does one check for null on a collection in JPQL ? I think solving for that should resolve this error. Any help appreciated\r\n\r\nThanks.","title":"Checking for NULL on a Collection in JPQL queries?","body":"<p>I am writing a JPQL query which queries based on a <strong>Categories</strong> collection. My categories can be null and hence I am checking using :categories=NULL.</p>\n\n<pre><code>@Query(\"Select v from Vendor v join v.org vorg join v.categories cats WHERE vorg.email =:email AND (cats in :categories or :categories = NULL)\")\nSet&lt;Vendor&gt; filterVendors(@Param(\"emailId\") String emailId, @Param(\"categories\") Set&lt;Category&gt; categories);\n</code></pre>\n\n<p>The above works fine when categories is NULL. However, when categories is more than one value I get the error </p>\n\n<blockquote>\n  <p>java.sql.SQLException: Operand should contain 1 column(s)</p>\n</blockquote>\n\n<p>And the hibernate relevant trace is </p>\n\n<blockquote>\n  <p>category6_.category_id in (\n                  ? , ?\n              ) \n              or (\n                  ? , ?\n              ) is null\n          ) </p>\n</blockquote>\n\n<p>How does one check for null on a collection in JPQL ? I think solving for that should resolve this error. Any help appreciated</p>\n\n<p>Thanks.</p>\n"},{"tags":["java","spring","spring-boot","spring-boot-test"],"comments":[{"owner":{"account_id":4565343,"reputation":12775,"user_id":3710490,"accept_rate":64,"display_name":"Valijon"},"score":0,"creation_date":1691661506,"post_id":76874350,"comment_id":135522848,"body_markdown":"Just add `@Profile(&quot;!local&quot;)` to your `HazelcastConfig` class and it should do the trick","body":"Just add <code>@Profile(&quot;!local&quot;)</code> to your <code>HazelcastConfig</code> class and it should do the trick"}],"owner":{"account_id":1133967,"reputation":316,"user_id":1119421,"display_name":"kma8794"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691659440,"creation_date":1691659440,"question_id":76874350,"body_markdown":"I&#39;ve faced multiple times with the scenario, when **I need to remove some Configuration from SpringBootApplication in the test scope**, without changing the source scope, and I can&#39;t find the correct solution.\r\n\r\nLet&#39;s say I have some SpringBootApplication\r\n```\r\n@SpringBootApplication\r\npublic class Application {\r\n    public static void main(String args[]) {\r\n        SpringApplication.run(Application.class, args);\r\n    }\r\n}\r\n```\r\n\r\nThere are multiple configurations in the base package, including this one, which creates Hazelcast client and expects to connect to some existing hazelcast instance:\r\n```\r\n@Configuration\r\npublic class HazelcastConfig {\r\n\r\n    @Bean\r\n    public HazelcastInstance hazelcastInstance() {\r\n        ClientConfig config = ...\r\n        return HazelcastClient.newHazelcastClient(clientConfig);\r\n    }\r\n}\r\n```\r\n\r\n**Now, what I want to do, is to create some SandboxLocalApplicationLauncher in the test scope, which would run Application with some pre-existing configs for local environment.** But I don&#39;t have Hazelcast cluster in the local environment, so I want to be able to override HazelcastInstance bean, something like this:\r\n\r\n```\r\n@Import(SandboxLocalApplicationLauncher.IsolatedLocalConfig.class)\r\npublic class SandboxLocalApplicationLauncher {\r\n    \r\n    public static void main(String[] args) {\r\n        SpringApplication app = new SpringApplication(SandboxLocalApplicationLauncher.class);\r\n        app.setAdditionalProfiles(&quot;local&quot;);\r\n        app.run(args);\r\n    }\r\n\r\n    @TestConfiguration\r\n    @EnableAutoConfiguration\r\n    @ComponentScan(basePackage= &quot;...&quot;,\r\n        excludeFilters = {\r\n            @ComponentScan.Filter(type= FilterType.ASSIGNABLE_TYPE, classes = Application.class),\r\n            @ComponentScan.Filter(type= FilterType.ASSIGNABLE_TYPE, classes = HazelcastConfig.class),\r\n        }\r\n    )\r\n    @Profile(&quot;local&quot;)\r\n    public class IsolatedLocalConfig {\r\n    \r\n        @Bean\r\n        @Primary\r\n        public HazelcastInstance localHazelcastInstance() {\r\n            return myCustomHazelcastMock...;\r\n        }\r\n\r\n}\r\n```\r\n\r\nThe problem is, that even if I&#39;m able to use my local hazelcast instance as a primary bean, the one from the source context is still initializing, which results in an error and failure of the whole application.\r\n\r\nWhatever I do (trying to configure ComponentScan with exclude filters), I&#39;m not able to get rid of the original HazelcastConfig or the original HazelcastInstance bean creation.\r\n\r\nThe only work-around I could achieve is to use ConditionalOnProperty for HazelcastConfig, but I don&#39;t want to introduce such conditions for Prod code, I want it to be overriden only in the test context.\r\n\r\nAny suggestions how I can exclude Configuration?\r\n","title":"Remove Configuration from SpringBootApplication","body":"<p>I've faced multiple times with the scenario, when <strong>I need to remove some Configuration from SpringBootApplication in the test scope</strong>, without changing the source scope, and I can't find the correct solution.</p>\n<p>Let's say I have some SpringBootApplication</p>\n<pre><code>@SpringBootApplication\npublic class Application {\n    public static void main(String args[]) {\n        SpringApplication.run(Application.class, args);\n    }\n}\n</code></pre>\n<p>There are multiple configurations in the base package, including this one, which creates Hazelcast client and expects to connect to some existing hazelcast instance:</p>\n<pre><code>@Configuration\npublic class HazelcastConfig {\n\n    @Bean\n    public HazelcastInstance hazelcastInstance() {\n        ClientConfig config = ...\n        return HazelcastClient.newHazelcastClient(clientConfig);\n    }\n}\n</code></pre>\n<p><strong>Now, what I want to do, is to create some SandboxLocalApplicationLauncher in the test scope, which would run Application with some pre-existing configs for local environment.</strong> But I don't have Hazelcast cluster in the local environment, so I want to be able to override HazelcastInstance bean, something like this:</p>\n<pre><code>@Import(SandboxLocalApplicationLauncher.IsolatedLocalConfig.class)\npublic class SandboxLocalApplicationLauncher {\n    \n    public static void main(String[] args) {\n        SpringApplication app = new SpringApplication(SandboxLocalApplicationLauncher.class);\n        app.setAdditionalProfiles(&quot;local&quot;);\n        app.run(args);\n    }\n\n    @TestConfiguration\n    @EnableAutoConfiguration\n    @ComponentScan(basePackage= &quot;...&quot;,\n        excludeFilters = {\n            @ComponentScan.Filter(type= FilterType.ASSIGNABLE_TYPE, classes = Application.class),\n            @ComponentScan.Filter(type= FilterType.ASSIGNABLE_TYPE, classes = HazelcastConfig.class),\n        }\n    )\n    @Profile(&quot;local&quot;)\n    public class IsolatedLocalConfig {\n    \n        @Bean\n        @Primary\n        public HazelcastInstance localHazelcastInstance() {\n            return myCustomHazelcastMock...;\n        }\n\n}\n</code></pre>\n<p>The problem is, that even if I'm able to use my local hazelcast instance as a primary bean, the one from the source context is still initializing, which results in an error and failure of the whole application.</p>\n<p>Whatever I do (trying to configure ComponentScan with exclude filters), I'm not able to get rid of the original HazelcastConfig or the original HazelcastInstance bean creation.</p>\n<p>The only work-around I could achieve is to use ConditionalOnProperty for HazelcastConfig, but I don't want to introduce such conditions for Prod code, I want it to be overriden only in the test context.</p>\n<p>Any suggestions how I can exclude Configuration?</p>\n"},{"tags":["java","swing","syntax-highlighting","swingx","styleddocument"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1691659253,"post_id":76874276,"comment_id":135522396,"body_markdown":"`TextStyle` has a `color` parameter","body":"<code>TextStyle</code> has a <code>color</code> parameter"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1691677815,"post_id":76874276,"comment_id":135526356,"body_markdown":"The logic is much more complicated than that. What if &quot;keywords&quot; are contained in comments? What about handling multi-line comments? The highlighting logic would need to be done every time a character is added/remove from the document. This is a big task and you are not going to get a solution here. You best bet is to try and find code you can insert into your program.","body":"The logic is much more complicated than that. What if &quot;keywords&quot; are contained in comments? What about handling multi-line comments? The highlighting logic would need to be done every time a character is added/remove from the document. This is a big task and you are not going to get a solution here. You best bet is to try and find code you can insert into your program."}],"owner":{"account_id":22037265,"reputation":11,"user_id":16303558,"display_name":"GamePlanner"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691658814,"creation_date":1691658814,"question_id":76874276,"body_markdown":"I am building my own code editor in java. How do I add syntax coloring like other code editors in it? I am able to add syntax highlighting like one we can do in Word or Excel (in which highlight background).\r\n\r\nHere is my function for syntax highlighting:\r\n```\r\n    private void addSyntaxHighlighting() {\r\n        StyledDocument doc = textPane.getStyledDocument();\r\n\r\n        Style keywordStyle = doc.addStyle(&quot;Keyword&quot;, null);\r\n        StyleConstants.setForeground(keywordStyle, Color.BLUE);\r\n\r\n        Style stringStyle = doc.addStyle(&quot;String&quot;, null);\r\n        StyleConstants.setForeground(stringStyle, Color.GREEN);\r\n\r\n        Style commentStyle = doc.addStyle(&quot;Comment&quot;, null);\r\n        StyleConstants.setForeground(commentStyle, Color.GRAY);\r\n\r\n        Pattern[] patterns = {\r\n                Pattern.compile(&quot;\\\\b(if|else|while|for|class|public|private)\\\\b&quot;),\r\n                Pattern.compile(&quot;\\&quot;.*?\\&quot;&quot;),\r\n                Pattern.compile(&quot;//.*&quot;)\r\n        };\r\n\r\n        try {\r\n            String content = textPane.getText();\r\n            doc.remove(0, doc.getLength());\r\n            doc.insertString(0, content, null);\r\n\r\n            for (Pattern pattern : patterns) {\r\n                Matcher matcher = pattern.matcher(content);\r\n                while (matcher.find()) {\r\n                    int start = matcher.start();\r\n                    int end = matcher.end();\r\n                    Style style;\r\n\r\n                    if (pattern.pattern().equals(&quot;\\\\b(if|else|while|for|class|public|private)\\\\b&quot;)) {\r\n                        style = keywordStyle;\r\n                    } else if (pattern.pattern().equals(&quot;\\&quot;.*?\\&quot;&quot;)) {\r\n                        style = stringStyle;\r\n                    } else {\r\n                        style = commentStyle;\r\n                    }\r\n\r\n                    doc.setCharacterAttributes(start, end - start, style, false);\r\n                }\r\n            }\r\n        } catch (BadLocationException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n    }\r\n```\r\n","title":"How do I add syntax coloring in my own code editor?","body":"<p>I am building my own code editor in java. How do I add syntax coloring like other code editors in it? I am able to add syntax highlighting like one we can do in Word or Excel (in which highlight background).</p>\n<p>Here is my function for syntax highlighting:</p>\n<pre><code>    private void addSyntaxHighlighting() {\n        StyledDocument doc = textPane.getStyledDocument();\n\n        Style keywordStyle = doc.addStyle(&quot;Keyword&quot;, null);\n        StyleConstants.setForeground(keywordStyle, Color.BLUE);\n\n        Style stringStyle = doc.addStyle(&quot;String&quot;, null);\n        StyleConstants.setForeground(stringStyle, Color.GREEN);\n\n        Style commentStyle = doc.addStyle(&quot;Comment&quot;, null);\n        StyleConstants.setForeground(commentStyle, Color.GRAY);\n\n        Pattern[] patterns = {\n                Pattern.compile(&quot;\\\\b(if|else|while|for|class|public|private)\\\\b&quot;),\n                Pattern.compile(&quot;\\&quot;.*?\\&quot;&quot;),\n                Pattern.compile(&quot;//.*&quot;)\n        };\n\n        try {\n            String content = textPane.getText();\n            doc.remove(0, doc.getLength());\n            doc.insertString(0, content, null);\n\n            for (Pattern pattern : patterns) {\n                Matcher matcher = pattern.matcher(content);\n                while (matcher.find()) {\n                    int start = matcher.start();\n                    int end = matcher.end();\n                    Style style;\n\n                    if (pattern.pattern().equals(&quot;\\\\b(if|else|while|for|class|public|private)\\\\b&quot;)) {\n                        style = keywordStyle;\n                    } else if (pattern.pattern().equals(&quot;\\&quot;.*?\\&quot;&quot;)) {\n                        style = stringStyle;\n                    } else {\n                        style = commentStyle;\n                    }\n\n                    doc.setCharacterAttributes(start, end - start, style, false);\n                }\n            }\n        } catch (BadLocationException e) {\n            e.printStackTrace();\n        }\n\n    }\n</code></pre>\n"},{"tags":["java","junit","static","void","powermockito"],"answers":[{"tags":[],"owner":{"account_id":482765,"reputation":4526,"user_id":897373,"accept_rate":85,"display_name":"Saša"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1690973071,"creation_date":1690815443,"answer_id":76804840,"question_id":76804807,"body_markdown":"I have found solution myself, but could not find it online. Actually I just have created an Answer which throws the needed exception and that&#39;s it:\r\n\r\n    @RunWith(PowerMockRunner.class)\r\n    @PrepareForTest(TheUtilsClass.class)\r\n    public class MyTest {\r\n        @Test\r\n        public void theTest() {\r\n    \t\tPowerMockito.mockStatic(BeanUtils.class, new Answer&lt;Void&gt;() {\r\n\t\t\t    @Override\r\n\t\t\t    public Void answer(InvocationOnMock invocation) throws Throwable {\r\n\t\t\t\t    throw new RuntimeException();\r\n\t\t\t    }\r\n            });\r\n        }\r\n    }\r\n","title":"How to mock overloaded public static method which returns void with PowerMockito","body":"<p>I have found solution myself, but could not find it online. Actually I just have created an Answer which throws the needed exception and that's it:</p>\n<pre><code>@RunWith(PowerMockRunner.class)\n@PrepareForTest(TheUtilsClass.class)\npublic class MyTest {\n    @Test\n    public void theTest() {\n        PowerMockito.mockStatic(BeanUtils.class, new Answer&lt;Void&gt;() {\n            @Override\n            public Void answer(InvocationOnMock invocation) throws Throwable {\n                throw new RuntimeException();\n            }\n        });\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":482765,"reputation":4526,"user_id":897373,"accept_rate":85,"display_name":"Saša"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76804840,"answer_count":1,"score":1,"last_activity_date":1691658707,"creation_date":1690815214,"question_id":76804807,"body_markdown":"I got a problem mocking a public static method which returns void.\r\n\r\nThis is what I have so far:\r\n\r\n    @RunWith(PowerMockRunner.class)\r\n    @PrepareForTest(TheUtilsClass.class)\r\n    public class MyTest {\r\n        @Test\r\n        public void theTest() {\r\n            PowerMockito.mockStatic(TheUtilsClass.class);\r\n            PowerMockito.doThrow(new RuntimeException.class).when(TheUtilsClass.class, &quot;methodToBeMocked&quot;, any(FirstParam.class), any(SecondParam.class));\r\n        }\r\n    }\r\n\r\nAnd this does not work because &quot;methodToBeMocked&quot; is overloaded several times. Instead I got the exception **TooManyMethodsFoundException** where I could not suppress other methods.","title":"How to mock overloaded public static method which returns void with PowerMockito","body":"<p>I got a problem mocking a public static method which returns void.</p>\n<p>This is what I have so far:</p>\n<pre><code>@RunWith(PowerMockRunner.class)\n@PrepareForTest(TheUtilsClass.class)\npublic class MyTest {\n    @Test\n    public void theTest() {\n        PowerMockito.mockStatic(TheUtilsClass.class);\n        PowerMockito.doThrow(new RuntimeException.class).when(TheUtilsClass.class, &quot;methodToBeMocked&quot;, any(FirstParam.class), any(SecondParam.class));\n    }\n}\n</code></pre>\n<p>And this does not work because &quot;methodToBeMocked&quot; is overloaded several times. Instead I got the exception <strong>TooManyMethodsFoundException</strong> where I could not suppress other methods.</p>\n"},{"tags":["java","spring","spring-boot","jackson","domain-driven-design"],"answers":[{"tags":[],"owner":{"account_id":14950553,"reputation":11,"user_id":10794374,"display_name":"Michał Tymiński"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691494955,"creation_date":1691494955,"answer_id":76859221,"question_id":76823037,"body_markdown":"The problem I can see here is a mix of validations of your request with domain object. \r\n\r\nYou should separate a business logic of your bean which represent a domain object from data incoming from external world.\r\n\r\nFor example:\r\n\r\nYou require a dataset which incoming to your controller in a request object.\r\nIt can be Json mapped to an java object. This object can be validated via jakarta library. Here you check @NonNull, @SomeOther field validations. \r\n\r\nWhen something is wrong validated in this part of process, you can create a response with validation error. \r\n\r\nAnd remember, this is an error of request data, not a domain bean or a process.\r\n\r\nWhen request data is validated correctly in the next step you should pass this request to factory/constructor to create a domain object or you should create a command with data for a process handler. \r\n\r\nThis domain object or command should be validated against defined DOMAIN rules before creation. \r\n\r\nI proposed my solution. It can be done also in the other way but I think it is the simplest way.\r\n\r\nYou can also look at this github repo: https://github.com/krzysztofslusarski/jug-hex\r\nwhere is shown ddd in practice (without restAPI, but this is only an input interface, so it can be replaced by other thing).","title":"Bean validation and consistent value objects","body":"<p>The problem I can see here is a mix of validations of your request with domain object.</p>\n<p>You should separate a business logic of your bean which represent a domain object from data incoming from external world.</p>\n<p>For example:</p>\n<p>You require a dataset which incoming to your controller in a request object.\nIt can be Json mapped to an java object. This object can be validated via jakarta library. Here you check @NonNull, @SomeOther field validations.</p>\n<p>When something is wrong validated in this part of process, you can create a response with validation error.</p>\n<p>And remember, this is an error of request data, not a domain bean or a process.</p>\n<p>When request data is validated correctly in the next step you should pass this request to factory/constructor to create a domain object or you should create a command with data for a process handler.</p>\n<p>This domain object or command should be validated against defined DOMAIN rules before creation.</p>\n<p>I proposed my solution. It can be done also in the other way but I think it is the simplest way.</p>\n<p>You can also look at this github repo: <a href=\"https://github.com/krzysztofslusarski/jug-hex\" rel=\"nofollow noreferrer\">https://github.com/krzysztofslusarski/jug-hex</a>\nwhere is shown ddd in practice (without restAPI, but this is only an input interface, so it can be replaced by other thing).</p>\n"},{"tags":[],"owner":{"account_id":217127,"reputation":977,"user_id":472774,"display_name":"Sylvain Lecoy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691657631,"creation_date":1691657631,"answer_id":76874126,"question_id":76823037,"body_markdown":"If its an option don&#39;t use bean validation.\r\n\r\nI like my object to have &quot;zero time invalid state&quot; and so everything is validated in the constructor.","title":"Bean validation and consistent value objects","body":"<p>If its an option don't use bean validation.</p>\n<p>I like my object to have &quot;zero time invalid state&quot; and so everything is validated in the constructor.</p>\n"}],"owner":{"account_id":29146863,"reputation":11,"user_id":22328565,"display_name":"LM_Coding"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":103,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1691657631,"creation_date":1691005239,"question_id":76823037,"body_markdown":"I am using domain-driven design for a current project, which is a Java-based Spring Boot REST-API. Therefore, it should not be possible to create inconsistent value objects, and my problem sits right there.\r\n\r\nI want to implement bean validation to provide clear error responses for my consumers. However, the bean validation is not able to validate all required fields because the process will be interrupted by the already existing constructor validation of my value objects. If invalid data gets passed, an exception will be thrown, and the bean validation process will be ended instantaneously.\r\n\r\nThe constructor validation within my value objects is mandatory and can&#39;t be removed.\r\n\r\n(I am using @Validated on class level, @Valid on complex objects and @Pattern/NotNull... on primitive constructor parameter)\r\n\r\nA possible solution might be to create inconsistent value objects during deserialization by using a custom deserializer and the value objects&#39; default constructor.\r\n\r\nSadly, I am not sure how to implement this. How can I trigger bean validation in this scenario?\r\n","title":"Bean validation and consistent value objects","body":"<p>I am using domain-driven design for a current project, which is a Java-based Spring Boot REST-API. Therefore, it should not be possible to create inconsistent value objects, and my problem sits right there.</p>\n<p>I want to implement bean validation to provide clear error responses for my consumers. However, the bean validation is not able to validate all required fields because the process will be interrupted by the already existing constructor validation of my value objects. If invalid data gets passed, an exception will be thrown, and the bean validation process will be ended instantaneously.</p>\n<p>The constructor validation within my value objects is mandatory and can't be removed.</p>\n<p>(I am using @Validated on class level, @Valid on complex objects and @Pattern/NotNull... on primitive constructor parameter)</p>\n<p>A possible solution might be to create inconsistent value objects during deserialization by using a custom deserializer and the value objects' default constructor.</p>\n<p>Sadly, I am not sure how to implement this. How can I trigger bean validation in this scenario?</p>\n"},{"tags":["java","logging","web-services"],"answers":[{"tags":[],"owner":{"account_id":544302,"reputation":692,"user_id":913707,"display_name":"joragupra"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1332426639,"creation_date":1332352752,"answer_id":9810218,"question_id":2477128,"body_markdown":"Try logging these two packages with DEBUG level:\r\n\r\n- httpclient.wire\r\n- org.apache.commons.httpclient\r\n\r\nYou should see the following output like for any request you make:\r\n\r\n    &gt;&gt; &quot;SOAPAction: urn:GeteBayOfficialTime[\\r][\\n]&quot;\r\n    &gt;&gt; &quot;User-Agent: Axis2[\\r][\\n]&quot;\r\n    &gt;&gt; &quot;Host: api.sandbox.ebay.com[\\r][\\n]&quot;\r\n    &gt;&gt; &quot;Content-Length: 1546[\\r][\\n]&quot;\r\n    &gt;&gt; &quot;Content-Type: text/xml; charset=UTF-8[\\r][\\n]&quot;\r\n    &gt;&gt; &quot;&lt;?xml version=&#39;1.0&#39; encoding=&#39;UTF-8&#39;?&gt;&lt;soapenv:Envelope xmlns:soapenv=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&gt;&lt;soapenv:Header&gt;&lt;ns1:RequesterCredentials xmlns:ns1=&quot;urn:ebay:apis:eBLBaseComponents&quot;&gt;&lt;ns1:eBayAuthToken&gt;XYZ_ABCD&lt;/ns1:eBayAuthToken&gt;&lt;/ns1:RequesterCredentials&gt;&lt;/soapenv:Header&gt;&lt;soapenv:Body&gt;&lt;ns1:GeteBayOfficialTimeRequest xmlns:ns1=&quot;urn:ebay:apis:eBLBaseComponents&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:type=&quot;ns1:GeteBayOfficialTimeRequestType&quot;&gt;&lt;ns1:DetailLevelCodeType&gt;ReturnAll&lt;/ns1:DetailLevelCodeType&gt;&lt;ns1:ErrorLanguage&gt;en_US&lt;/ns1:ErrorLanguage&gt;&lt;ns1:Version&gt;427&lt;/ns1:Version&gt;&lt;/ns1:GeteBayOfficialTimeRequest&gt;&lt;/soapenv:Body&gt;&lt;/soapenv:Envelope&gt;\r\n\r\nAnd for incoming responses:\r\n\r\n    &lt;&lt; &quot;HTTP/1.1 200 OK[\\r][\\n]&quot;\r\n    &lt;&lt; &quot;Date: Wed, 23 Aug 2006 02:17:33 GMT[\\r][\\n]&quot;\r\n    &lt;&lt; &quot;Server: Microsoft-IIS/5.0[\\r][\\n]&quot;\r\n    &lt;&lt; &quot;X-EBAY-API-SERVER-NAME: ZXCVBA[\\r][\\n]&quot;\r\n    &lt;&lt; &quot;Content-Type: text/xml;charset=utf-8[\\r][\\n]&quot;\r\n    &lt;&lt; &quot;X-Cache: MISS from thrasher.sjc.ebay.com[\\r][\\n]&quot;\r\n    &lt;&lt; &quot;Connection: close[\\r][\\n]&quot;\r\n    &lt;&lt; &quot;&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;[\\n]&quot;\r\n    &lt;&lt; &quot;&lt;soapenv:Envelope xmlns:soapenv=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;[\\n]&quot;\r\n    &lt;&lt; &quot; &lt;soapenv:Body&gt;[\\n]&quot;\r\n    &lt;&lt; &quot; &lt;GeteBayOfficialTimeResponse xmlns=&quot;urn:ebay:apis:eBLBaseComponents&quot;&gt;[\\n]&quot;\r\n    &lt;&lt; &quot; &lt;Timestamp&gt;2006-08-23T02:17:33.544Z&lt;/Timestamp&gt;[\\n]&quot;\r\n    &lt;&lt; &quot; &lt;Ack&gt;Success&lt;/Ack&gt;[\\n]&quot;\r\n    &lt;&lt; &quot; &lt;Version&gt;475&lt;/Version&gt;[\\n]&quot;\r\n    &lt;&lt; &quot; &lt;Build&gt;e475_core_Bundled_3434772_R1&lt;/Build&gt;[\\n]&quot;\r\n    &lt;&lt; &quot; &lt;/GeteBayOfficialTimeResponse&gt;[\\n]&quot;\r\n    &lt;&lt; &quot; &lt;/soapenv:Body&gt;[\\n]&quot;\r\n    &lt;&lt; &quot;&lt;/soapenv:Envelope&gt;&quot;\r\n","title":"SOAP logging axis2","body":"<p>Try logging these two packages with DEBUG level:</p>\n\n<ul>\n<li>httpclient.wire</li>\n<li>org.apache.commons.httpclient</li>\n</ul>\n\n<p>You should see the following output like for any request you make:</p>\n\n<pre><code>&gt;&gt; \"SOAPAction: urn:GeteBayOfficialTime[\\r][\\n]\"\n&gt;&gt; \"User-Agent: Axis2[\\r][\\n]\"\n&gt;&gt; \"Host: api.sandbox.ebay.com[\\r][\\n]\"\n&gt;&gt; \"Content-Length: 1546[\\r][\\n]\"\n&gt;&gt; \"Content-Type: text/xml; charset=UTF-8[\\r][\\n]\"\n&gt;&gt; \"&lt;?xml version='1.0' encoding='UTF-8'?&gt;&lt;soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\"&gt;&lt;soapenv:Header&gt;&lt;ns1:RequesterCredentials xmlns:ns1=\"urn:ebay:apis:eBLBaseComponents\"&gt;&lt;ns1:eBayAuthToken&gt;XYZ_ABCD&lt;/ns1:eBayAuthToken&gt;&lt;/ns1:RequesterCredentials&gt;&lt;/soapenv:Header&gt;&lt;soapenv:Body&gt;&lt;ns1:GeteBayOfficialTimeRequest xmlns:ns1=\"urn:ebay:apis:eBLBaseComponents\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:type=\"ns1:GeteBayOfficialTimeRequestType\"&gt;&lt;ns1:DetailLevelCodeType&gt;ReturnAll&lt;/ns1:DetailLevelCodeType&gt;&lt;ns1:ErrorLanguage&gt;en_US&lt;/ns1:ErrorLanguage&gt;&lt;ns1:Version&gt;427&lt;/ns1:Version&gt;&lt;/ns1:GeteBayOfficialTimeRequest&gt;&lt;/soapenv:Body&gt;&lt;/soapenv:Envelope&gt;\n</code></pre>\n\n<p>And for incoming responses:</p>\n\n<pre><code>&lt;&lt; \"HTTP/1.1 200 OK[\\r][\\n]\"\n&lt;&lt; \"Date: Wed, 23 Aug 2006 02:17:33 GMT[\\r][\\n]\"\n&lt;&lt; \"Server: Microsoft-IIS/5.0[\\r][\\n]\"\n&lt;&lt; \"X-EBAY-API-SERVER-NAME: ZXCVBA[\\r][\\n]\"\n&lt;&lt; \"Content-Type: text/xml;charset=utf-8[\\r][\\n]\"\n&lt;&lt; \"X-Cache: MISS from thrasher.sjc.ebay.com[\\r][\\n]\"\n&lt;&lt; \"Connection: close[\\r][\\n]\"\n&lt;&lt; \"&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;[\\n]\"\n&lt;&lt; \"&lt;soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"&gt;[\\n]\"\n&lt;&lt; \" &lt;soapenv:Body&gt;[\\n]\"\n&lt;&lt; \" &lt;GeteBayOfficialTimeResponse xmlns=\"urn:ebay:apis:eBLBaseComponents\"&gt;[\\n]\"\n&lt;&lt; \" &lt;Timestamp&gt;2006-08-23T02:17:33.544Z&lt;/Timestamp&gt;[\\n]\"\n&lt;&lt; \" &lt;Ack&gt;Success&lt;/Ack&gt;[\\n]\"\n&lt;&lt; \" &lt;Version&gt;475&lt;/Version&gt;[\\n]\"\n&lt;&lt; \" &lt;Build&gt;e475_core_Bundled_3434772_R1&lt;/Build&gt;[\\n]\"\n&lt;&lt; \" &lt;/GeteBayOfficialTimeResponse&gt;[\\n]\"\n&lt;&lt; \" &lt;/soapenv:Body&gt;[\\n]\"\n&lt;&lt; \"&lt;/soapenv:Envelope&gt;\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4439251,"reputation":1427,"user_id":3614215,"display_name":"Marco"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691657553,"creation_date":1691657553,"answer_id":76874110,"question_id":2477128,"body_markdown":"In the last versions of Apache Axis2 you log the request and the response by setting the DEBUG level to package: `org.apache.http`.","title":"SOAP logging axis2","body":"<p>In the last versions of Apache Axis2 you log the request and the response by setting the DEBUG level to package: <code>org.apache.http</code>.</p>\n"}],"owner":{"account_id":75281,"reputation":563,"user_id":215989,"display_name":"Niclas &#197;strand"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5979,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":2,"score":5,"last_activity_date":1691657553,"creation_date":1269001120,"question_id":2477128,"body_markdown":"Using axis1 it is possible to log incoming/outgoing soap messages by adding logging on HTTPSender in log4j.properties. After migrating to axis2 (version 1.4.1) I have a hard time figuring out how to accomplish the same kind of logging. I have tried to add logging on the axis2 package and org.apache.commons.httpclient but no logging is provided.\r\n\r\nAny ideas?\r\n\r\nTIA","title":"SOAP logging axis2","body":"<p>Using axis1 it is possible to log incoming/outgoing soap messages by adding logging on HTTPSender in log4j.properties. After migrating to axis2 (version 1.4.1) I have a hard time figuring out how to accomplish the same kind of logging. I have tried to add logging on the axis2 package and org.apache.commons.httpclient but no logging is provided.</p>\n\n<p>Any ideas?</p>\n\n<p>TIA</p>\n"},{"tags":["java","sql-server-2008","hibernate"],"comments":[{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1384406894,"post_id":19970161,"comment_id":29727339,"body_markdown":"java.sql.Date or java.util.Date?","body":"java.sql.Date or java.util.Date?"},{"owner":{"account_id":434437,"reputation":15453,"user_id":820410,"accept_rate":60,"display_name":"Pankaj Singhal"},"score":0,"creation_date":1384406932,"post_id":19970161,"comment_id":29727350,"body_markdown":"java.util.Date.\nBut it gives the same error with new java.sql.Time(new java.util.Date().getTime()) also. i.e. con not compare time and datetime","body":"java.util.Date. But it gives the same error with new java.sql.Time(new java.util.Date().getTime()) also. i.e. con not compare time and datetime"},{"owner":{"account_id":434437,"reputation":15453,"user_id":820410,"accept_rate":60,"display_name":"Pankaj Singhal"},"score":0,"creation_date":1384407703,"post_id":19970161,"comment_id":29727590,"body_markdown":"nobody has ever compared time in sql server???","body":"nobody has ever compared time in sql server???"}],"answers":[{"tags":[],"owner":{"account_id":1783732,"reputation":11618,"user_id":1625740,"accept_rate":59,"display_name":"Haim Raman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691657549,"creation_date":1384408139,"answer_id":19970487,"question_id":19970161,"body_markdown":"Refer to the following blog:  \r\nhttps://techcommunity.microsoft.com/t5/sql-server-blog/using-time-and-date-data-types-part-1-it-s-about-time/ba-p/383611\r\n\r\nNeed to add the following to your hibernate connection url string&lt;br&gt;\r\nI am not sure if it&#39;s true/false just play with it.&lt;br&gt;\r\nsendTimeAsDateTime=false\r\n","title":"comparing time in sql server through hibernate","body":"<p>Refer to the following blog:<br />\n<a href=\"https://techcommunity.microsoft.com/t5/sql-server-blog/using-time-and-date-data-types-part-1-it-s-about-time/ba-p/383611\" rel=\"nofollow noreferrer\">https://techcommunity.microsoft.com/t5/sql-server-blog/using-time-and-date-data-types-part-1-it-s-about-time/ba-p/383611</a></p>\n<p>Need to add the following to your hibernate connection url string<br>\nI am not sure if it's true/false just play with it.<br>\nsendTimeAsDateTime=false</p>\n"}],"owner":{"account_id":434437,"reputation":15453,"user_id":820410,"accept_rate":60,"display_name":"Pankaj Singhal"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2343,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":19970487,"answer_count":1,"score":0,"last_activity_date":1691657549,"creation_date":1384406563,"question_id":19970161,"body_markdown":"I am trying to compare time through hibernate in SQL Server 2008.\r\n\r\nThe following code returns this error : `The data types time and datetime are incompatible in the less than or equal to operator.`\r\n\r\n    crit = session.createCriteria(ObdBlackoutHours.class);\r\n\tCriterion start = Restrictions.le(&quot;blackoutStart&quot;, new Date());\r\n\t\t\tCriterion end = Restrictions.gt(&quot;blackoutEnd&quot;,new Date());\r\n\t\t\tList list = crit.add(Restrictions.conjunction().add(start).add(end))\r\n\t\t\t\t\t.list();\r\n\t\t\tif(list.isEmpty())\r\n\t\t\t\treturn false;\r\n\t\t\telse \r\n\t\t\t\treturn true;\r\n\r\nThe table design is the following: \r\n\r\n    CREATE TABLE [dbo].[obd_blackout_hours](\r\n\t[id] [int] NOT NULL,\r\n\t[blackout_end] [time](7) NOT NULL,\r\n\t[blackout_start] [time](7) NOT NULL)\r\n\r\nI understand that the db contains only `10:17:37` and what I am passing is something like this `Thu Nov 14 10:17:37 IST 2013` which it is unable to compare. I tested the same code in `mysql` which seems to be working very fine. But `SQL Server 2008` is creating the problem. I also tried passing\r\n\r\n `currentDate = new SimpleDateFormat(&quot;HH:mm:ss&quot;).parse(new SimpleDateFormat(&quot;HH:mm:ss&quot;).format(Calendar.getInstance().getTime()));` \r\n\r\nand\r\n\r\n`new ObdBlackoutHours(1,new Date(),new Date()).getBlackoutStart()`\r\n\r\ninstead of the just the Date() object. This also fails. How should I compare time and get results.\r\n\r\n\r\n\r\nThe following is the entity class\r\n\r\n    @Entity\r\n    @Table(name = &quot;obd_blackout_hours&quot;, schema = &quot;dbo&quot;, catalog = &quot;IVR_Data&quot;)\r\n    public class ObdBlackoutHours implements java.io.Serializable {\r\n\r\n\tprivate int id;\r\n\tprivate Date blackoutStart;\r\n\tprivate Date blackoutEnd;\r\n\tprivate Set&lt;Service&gt; services = new HashSet&lt;Service&gt;(0);\r\n\r\n\tpublic ObdBlackoutHours() {\r\n\t}\r\n\r\n\tpublic ObdBlackoutHours(int id, Date blackoutStart, Date blackoutEnd) {\r\n\t\tthis.id = id;\r\n\t\tthis.blackoutStart = blackoutStart;\r\n\t\tthis.blackoutEnd = blackoutEnd;\r\n\t}\r\n\r\n\tpublic ObdBlackoutHours(int id, Date blackoutStart, Date blackoutEnd,\r\n\t\t\tSet&lt;Service&gt; services) {\r\n\t\tthis.id = id;\r\n\t\tthis.blackoutStart = blackoutStart;\r\n\t\tthis.blackoutEnd = blackoutEnd;\r\n\t\tthis.services = services;\r\n\t}\r\n\r\n\t@Id\r\n\t@Column(name = &quot;id&quot;, unique = true, nullable = false)\r\n\tpublic int getId() {\r\n\t\treturn this.id;\r\n\t}\r\n\r\n\tpublic void setId(int id) {\r\n\t\tthis.id = id;\r\n\t}\r\n\r\n\t@Temporal(TemporalType.TIME)\r\n\t@Column(name = &quot;blackout_start&quot;, nullable = false, length = 16)\r\n\tpublic Date getBlackoutStart() {\r\n\t\treturn this.blackoutStart;\r\n\t}\r\n\r\n\tpublic void setBlackoutStart(Date blackoutStart) {\r\n\t\tthis.blackoutStart = blackoutStart;\r\n\t}\r\n\r\n\t@Temporal(TemporalType.TIME)\r\n\t@Column(name = &quot;blackout_end&quot;, nullable = false, length = 16)\r\n\tpublic Date getBlackoutEnd() {\r\n\t\treturn this.blackoutEnd;\r\n\t}\r\n\r\n\tpublic void setBlackoutEnd(Date blackoutEnd) {\r\n\t\tthis.blackoutEnd = blackoutEnd;\r\n\t}\r\n\r\n\t@OneToMany(fetch = FetchType.LAZY, mappedBy = &quot;obdBlackoutHours&quot;)\r\n\tpublic Set&lt;Service&gt; getServices() {\r\n\t\treturn this.services;\r\n\t}\r\n\r\n\tpublic void setServices(Set&lt;Service&gt; services) {\r\n\t\tthis.services = services;\r\n\t}\r\n\r\n    }\r\n","title":"comparing time in sql server through hibernate","body":"<p>I am trying to compare time through hibernate in SQL Server 2008.</p>\n\n<p>The following code returns this error : <code>The data types time and datetime are incompatible in the less than or equal to operator.</code></p>\n\n<pre><code>crit = session.createCriteria(ObdBlackoutHours.class);\nCriterion start = Restrictions.le(\"blackoutStart\", new Date());\n        Criterion end = Restrictions.gt(\"blackoutEnd\",new Date());\n        List list = crit.add(Restrictions.conjunction().add(start).add(end))\n                .list();\n        if(list.isEmpty())\n            return false;\n        else \n            return true;\n</code></pre>\n\n<p>The table design is the following: </p>\n\n<pre><code>CREATE TABLE [dbo].[obd_blackout_hours](\n[id] [int] NOT NULL,\n[blackout_end] [time](7) NOT NULL,\n[blackout_start] [time](7) NOT NULL)\n</code></pre>\n\n<p>I understand that the db contains only <code>10:17:37</code> and what I am passing is something like this <code>Thu Nov 14 10:17:37 IST 2013</code> which it is unable to compare. I tested the same code in <code>mysql</code> which seems to be working very fine. But <code>SQL Server 2008</code> is creating the problem. I also tried passing</p>\n\n<p><code>currentDate = new SimpleDateFormat(\"HH:mm:ss\").parse(new SimpleDateFormat(\"HH:mm:ss\").format(Calendar.getInstance().getTime()));</code> </p>\n\n<p>and</p>\n\n<p><code>new ObdBlackoutHours(1,new Date(),new Date()).getBlackoutStart()</code></p>\n\n<p>instead of the just the Date() object. This also fails. How should I compare time and get results.</p>\n\n<p>The following is the entity class</p>\n\n<pre><code>@Entity\n@Table(name = \"obd_blackout_hours\", schema = \"dbo\", catalog = \"IVR_Data\")\npublic class ObdBlackoutHours implements java.io.Serializable {\n\nprivate int id;\nprivate Date blackoutStart;\nprivate Date blackoutEnd;\nprivate Set&lt;Service&gt; services = new HashSet&lt;Service&gt;(0);\n\npublic ObdBlackoutHours() {\n}\n\npublic ObdBlackoutHours(int id, Date blackoutStart, Date blackoutEnd) {\n    this.id = id;\n    this.blackoutStart = blackoutStart;\n    this.blackoutEnd = blackoutEnd;\n}\n\npublic ObdBlackoutHours(int id, Date blackoutStart, Date blackoutEnd,\n        Set&lt;Service&gt; services) {\n    this.id = id;\n    this.blackoutStart = blackoutStart;\n    this.blackoutEnd = blackoutEnd;\n    this.services = services;\n}\n\n@Id\n@Column(name = \"id\", unique = true, nullable = false)\npublic int getId() {\n    return this.id;\n}\n\npublic void setId(int id) {\n    this.id = id;\n}\n\n@Temporal(TemporalType.TIME)\n@Column(name = \"blackout_start\", nullable = false, length = 16)\npublic Date getBlackoutStart() {\n    return this.blackoutStart;\n}\n\npublic void setBlackoutStart(Date blackoutStart) {\n    this.blackoutStart = blackoutStart;\n}\n\n@Temporal(TemporalType.TIME)\n@Column(name = \"blackout_end\", nullable = false, length = 16)\npublic Date getBlackoutEnd() {\n    return this.blackoutEnd;\n}\n\npublic void setBlackoutEnd(Date blackoutEnd) {\n    this.blackoutEnd = blackoutEnd;\n}\n\n@OneToMany(fetch = FetchType.LAZY, mappedBy = \"obdBlackoutHours\")\npublic Set&lt;Service&gt; getServices() {\n    return this.services;\n}\n\npublic void setServices(Set&lt;Service&gt; services) {\n    this.services = services;\n}\n\n}\n</code></pre>\n"},{"tags":["java","spring","hibernate","kotlin"],"comments":[{"owner":{"account_id":22866981,"reputation":131,"user_id":17010647,"display_name":"Ksu"},"score":0,"creation_date":1691670053,"post_id":76874085,"comment_id":135524455,"body_markdown":"can you add ddl table examples?","body":"can you add ddl table examples?"}],"owner":{"account_id":11791627,"reputation":1124,"user_id":8627570,"accept_rate":46,"display_name":"Maciaz"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1008,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691657392,"creation_date":1691657392,"question_id":76874085,"body_markdown":"I was getting an error:\r\n```\r\nCaused by: java.lang.ClassCastException: class org.hibernate.mapping.BasicValue cannot be cast to class org.hibernate.mapping.ToOne (org.hibernate.mapping.BasicValue and org.hibernate.mapping.ToOne are in unnamed module of loader &#39;app&#39;)\r\n```\r\n\r\nI&#39;ve read that there is a bug in Hibernate 6.2 regarding this issue, so I had to change the mapping of the entities in the application.\r\n\r\nThe entity was implemented as unidirectional, so the use of `mappedBy` was probably not correct. This is what I had: \r\n```\r\n@Entity\r\n@Table(name = &quot;customer&quot;)\r\nclass Customer(\r\n    @Id\r\n    val id: UUID = UUID.randomUUID(),\r\n\r\n    @OneToMany(mappedBy = &quot;customerPortfolioId&quot;, fetch = FetchType.EAGER, cascade = [CascadeType.ALL])\r\n    var customerPortfolios: List&lt;CustomerPortfolio&gt; = mutableListOf()\r\n)\r\n```\r\nWhat I changed it into:\r\n```\r\n@Entity\r\n@Table(name = &quot;customer&quot;)\r\nclass Customer(\r\n    @Id\r\n    val id: UUID = UUID.randomUUID(),\r\n\r\n    @OneToMany(fetch = FetchType.EAGER, cascade = [CascadeType.ALL])\r\n    @JoinColumn(name = “customerPortfolioId”)\r\n    var customerPortfolios: List&lt;CustomerPortfolio&gt; = mutableListOf()\r\n)\r\n```\r\n\r\nCustomerPortfolio is just a simple:\r\n```\r\n@Entity\r\n@Table(name = “customer_portfolio”)\r\ndata class CustomerPortfolio(\r\n    @Id\r\n    val id: UUID = UUID.randomUUID(),\r\n\r\n    val customerPortfolioId: UUID\r\n)\r\n```\r\n\r\nThe mentioned exception is gone, but right now I&#39;m getting \r\n```\r\norg.springframework.dao.DataIntegrityViolationException: could not execute statement [ERROR: null value in column &quot;customer_portfolio_id&quot; violates not-null constraint\r\n  Detail: Failing row contains (a338ef9f-6b9f-4741-b7b3-7fd1a4894db0, null).] [update customer_portfolio set customer_portfolio_id=null where customer_portfolio_id=?]; SQL [update update customer_portfolio set customer_portfolio_id=null where customer_portfolio_id=?]; constraint [customer_portfolio_id]\r\n```\r\n...and I have no clue where this `UPDATE` sql comes from. I don&#39;t have it in my code. Any ideas on how to fix it?","title":"Hibernate 6.2 - from ClassCastException: BasicValue cannot be cast to ToOne to DataIntegrityViolationException","body":"<p>I was getting an error:</p>\n<pre><code>Caused by: java.lang.ClassCastException: class org.hibernate.mapping.BasicValue cannot be cast to class org.hibernate.mapping.ToOne (org.hibernate.mapping.BasicValue and org.hibernate.mapping.ToOne are in unnamed module of loader 'app')\n</code></pre>\n<p>I've read that there is a bug in Hibernate 6.2 regarding this issue, so I had to change the mapping of the entities in the application.</p>\n<p>The entity was implemented as unidirectional, so the use of <code>mappedBy</code> was probably not correct. This is what I had:</p>\n<pre><code>@Entity\n@Table(name = &quot;customer&quot;)\nclass Customer(\n    @Id\n    val id: UUID = UUID.randomUUID(),\n\n    @OneToMany(mappedBy = &quot;customerPortfolioId&quot;, fetch = FetchType.EAGER, cascade = [CascadeType.ALL])\n    var customerPortfolios: List&lt;CustomerPortfolio&gt; = mutableListOf()\n)\n</code></pre>\n<p>What I changed it into:</p>\n<pre><code>@Entity\n@Table(name = &quot;customer&quot;)\nclass Customer(\n    @Id\n    val id: UUID = UUID.randomUUID(),\n\n    @OneToMany(fetch = FetchType.EAGER, cascade = [CascadeType.ALL])\n    @JoinColumn(name = “customerPortfolioId”)\n    var customerPortfolios: List&lt;CustomerPortfolio&gt; = mutableListOf()\n)\n</code></pre>\n<p>CustomerPortfolio is just a simple:</p>\n<pre><code>@Entity\n@Table(name = “customer_portfolio”)\ndata class CustomerPortfolio(\n    @Id\n    val id: UUID = UUID.randomUUID(),\n\n    val customerPortfolioId: UUID\n)\n</code></pre>\n<p>The mentioned exception is gone, but right now I'm getting</p>\n<pre><code>org.springframework.dao.DataIntegrityViolationException: could not execute statement [ERROR: null value in column &quot;customer_portfolio_id&quot; violates not-null constraint\n  Detail: Failing row contains (a338ef9f-6b9f-4741-b7b3-7fd1a4894db0, null).] [update customer_portfolio set customer_portfolio_id=null where customer_portfolio_id=?]; SQL [update update customer_portfolio set customer_portfolio_id=null where customer_portfolio_id=?]; constraint [customer_portfolio_id]\n</code></pre>\n<p>...and I have no clue where this <code>UPDATE</code> sql comes from. I don't have it in my code. Any ideas on how to fix it?</p>\n"},{"tags":["java","testing","mockito"],"answers":[{"tags":[],"owner":{"account_id":8198,"reputation":176773,"user_id":14637,"accept_rate":88,"display_name":"Thomas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691657300,"creation_date":1691657300,"answer_id":76874073,"question_id":76873971,"body_markdown":"It would be hard to test that _nothing_ happens. But you shouldn&#39;t: a unit test should only test _observable_ behaviour. Whatever happens inside the implementation is not the test&#39;s concern.\r\n\r\nFor example, if the implementation is changed to write a warning to a log file to inform the developers that a client might be buggy, this should probably not break the test. (You could argue that logging is also observable behaviour, but it&#39;s not usually part of the contract.)\r\n\r\nSo, what _should_ you test for in this case?\r\n\r\nYour test is already testing something, namely, that `raceResults.removeSubscriber(clientA);` does not throw an exception. In other words, it verifies that it&#39;s not an error to remove a client that&#39;s not subscribed. This might already be enough!\r\n\r\nIf you also have a method like `boolean isSubscribed(Client client)`, you could additionally verify that the client is not subscribed after unsubscribing.\r\n\r\nYou could also send a message and verify that the unsubscribed client does not receive it.","title":"How to test for no interaction using Mockito","body":"<p>It would be hard to test that <em>nothing</em> happens. But you shouldn't: a unit test should only test <em>observable</em> behaviour. Whatever happens inside the implementation is not the test's concern.</p>\n<p>For example, if the implementation is changed to write a warning to a log file to inform the developers that a client might be buggy, this should probably not break the test. (You could argue that logging is also observable behaviour, but it's not usually part of the contract.)</p>\n<p>So, what <em>should</em> you test for in this case?</p>\n<p>Your test is already testing something, namely, that <code>raceResults.removeSubscriber(clientA);</code> does not throw an exception. In other words, it verifies that it's not an error to remove a client that's not subscribed. This might already be enough!</p>\n<p>If you also have a method like <code>boolean isSubscribed(Client client)</code>, you could additionally verify that the client is not subscribed after unsubscribing.</p>\n<p>You could also send a message and verify that the unsubscribed client does not receive it.</p>\n"}],"owner":{"account_id":16435976,"reputation":162,"user_id":11873562,"display_name":"IceMajor"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691657300,"creation_date":1691656535,"question_id":76873971,"body_markdown":"I&#39;m currently studying the book written by Tomasz Kaczanowski: &quot;Practical Unit Testing with JUnit and Mockito&quot;. Right now, I&#39;m on the section concerning mocks, stubs, test doubles and the Mockito framework.\r\n\r\nAs part of the practice, there&#39;s a to-be-unit-tested program which sends messages to the subscribed clients. Here&#39;s the part of the exercise I&#39;m currently struggling with.\r\n***\r\n* What should happen if a client that is not subscribed tries to unsubscribe? Make up your mind about it, write a test which verifies this behaviour, and make RaceResultsService behave accordingly.\r\n***\r\nI would like *nothing* to happen on such occasion. No exception, no messages... And I want to test it. But how do I do that? How do I test that *nothing* happens (without getting too deep into implementation and, for example, checking the size of collection containing subscribed clients)?\r\n\r\nHere&#39;s the test I&#39;ve written which does not do so:\r\n```\r\n@Test\r\nvoid unsubscribingWhenAlreadyUnsubscribedShouldReturnVoid() {\r\n\traceResults.removeSubscriber(clientA);\r\n\r\n\tverifyNoInteractions(clientA);\r\n}\r\n```\r\nAnd here&#39;s the concerned method of the `RaceResultsService.java`:\r\n```\r\npublic class RaceResultsService {\r\n\r\n\tprivate Collection&lt;Client&gt; clients = new HashSet&lt;Client&gt;();\r\n\r\n    // other fields and methods\r\n\r\n    public void removeSubscriber(Client client) {\r\n\t    clients.remove(client);\r\n    }\r\n}\r\n```\r\nObviously, the `removeSubscriber` method will actually do *something*, not nothing. It will execute the `HashSet.remove` but, as the client is not in the `clients` collection (field), it will not modify anything. But how do I test for this without actually touching the associated `Collection&lt;Client&gt;`?\r\n\r\nI&#39;d appreciate any suggestions, thanks!","title":"How to test for no interaction using Mockito","body":"<p>I'm currently studying the book written by Tomasz Kaczanowski: &quot;Practical Unit Testing with JUnit and Mockito&quot;. Right now, I'm on the section concerning mocks, stubs, test doubles and the Mockito framework.</p>\n<p>As part of the practice, there's a to-be-unit-tested program which sends messages to the subscribed clients. Here's the part of the exercise I'm currently struggling with.</p>\n<hr />\n<ul>\n<li>What should happen if a client that is not subscribed tries to unsubscribe? Make up your mind about it, write a test which verifies this behaviour, and make RaceResultsService behave accordingly.</li>\n</ul>\n<hr />\n<p>I would like <em>nothing</em> to happen on such occasion. No exception, no messages... And I want to test it. But how do I do that? How do I test that <em>nothing</em> happens (without getting too deep into implementation and, for example, checking the size of collection containing subscribed clients)?</p>\n<p>Here's the test I've written which does not do so:</p>\n<pre><code>@Test\nvoid unsubscribingWhenAlreadyUnsubscribedShouldReturnVoid() {\n    raceResults.removeSubscriber(clientA);\n\n    verifyNoInteractions(clientA);\n}\n</code></pre>\n<p>And here's the concerned method of the <code>RaceResultsService.java</code>:</p>\n<pre><code>public class RaceResultsService {\n\n    private Collection&lt;Client&gt; clients = new HashSet&lt;Client&gt;();\n\n    // other fields and methods\n\n    public void removeSubscriber(Client client) {\n        clients.remove(client);\n    }\n}\n</code></pre>\n<p>Obviously, the <code>removeSubscriber</code> method will actually do <em>something</em>, not nothing. It will execute the <code>HashSet.remove</code> but, as the client is not in the <code>clients</code> collection (field), it will not modify anything. But how do I test for this without actually touching the associated <code>Collection&lt;Client&gt;</code>?</p>\n<p>I'd appreciate any suggestions, thanks!</p>\n"},{"tags":["java","android","android-studio"],"owner":{"account_id":29189521,"reputation":1,"user_id":22361888,"display_name":"안아줘요"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2508,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691657298,"creation_date":1691563216,"question_id":76865183,"body_markdown":"I am trying to build Unity in Android Studio by integrating Android Studio and Unity.\r\n\r\nI used an example from GitHub called uaal example (https://github.com/Unity-Technologies/uaal-example/blob/uaal-example/22LTS/docs/android.md).\r\n\r\nUpon checking the log using logcat, it says that it cannot find the file called libpenguin.so.\r\n\r\nAfter checking all the files on my computer, I found that the file libpenguin.so does not exist.\r\n\r\nI used Google AR Core, AR Foundation, and XR Package Management in Unity on a Mac environment, and currently, I&#39;m building Unity by linking Unity and Android Studio on Windows 10.\r\n\r\nI&#39;m wondering if there is a possibility that the libpenguin.so file could be missing when transferring a Unity project made in a Mac environment to Windows 10.\r\n\r\nAlso, I&#39;m curious about how the error was fixed by replacing the non-existing libpenguin.so in some way.\r\n\r\nAdditionally, when I build by linking Android Studio and Unity, the UI appears, but the AR screen is entirely black. I&#39;m curious if fixing the error regarding the libpenguin.so file could also fix this black screen issue.\r\n\r\nUsed Versions\r\nUnity: 2022.3.4f1\r\nAndroid Studio: 2022 version\r\nSDK: Same version as Unity\r\nNDK: Same version as Unity\r\n\r\njinlibs\r\n\r\n[![Picture 1][1]][1]\r\n\r\nlogcat\r\n[![Picture 2][2]][2]\r\n\r\nI&#39;m not sure where and how the error is occurring, so I can&#39;t post the code. If there&#39;s any specific code you need, please let me know, and I&#39;ll provide it.\r\n\r\nThank you.\r\n\r\nI transferred the Unity project to a Windows 10 environment and tried to build it anew to check if the problem arises when building from Unity to Android. -&gt; But the error continued to occur.\r\n\r\nI tried copying and pasting the libpenguin.so file from another external GitHub file, but the error still occurred.\r\n\r\nTo fix the issue of the black screen continuously appearing, I tried building using the uaal ar example, but the black screen still appears.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Cra44.png\r\n  [2]: https://i.stack.imgur.com/uyPGQ.png","title":"Unable to open libpenguin.so: dlopen failed: library &quot;libpenguin.so&quot; not found","body":"<p>I am trying to build Unity in Android Studio by integrating Android Studio and Unity.</p>\n<p>I used an example from GitHub called uaal example (<a href=\"https://github.com/Unity-Technologies/uaal-example/blob/uaal-example/22LTS/docs/android.md\" rel=\"nofollow noreferrer\">https://github.com/Unity-Technologies/uaal-example/blob/uaal-example/22LTS/docs/android.md</a>).</p>\n<p>Upon checking the log using logcat, it says that it cannot find the file called libpenguin.so.</p>\n<p>After checking all the files on my computer, I found that the file libpenguin.so does not exist.</p>\n<p>I used Google AR Core, AR Foundation, and XR Package Management in Unity on a Mac environment, and currently, I'm building Unity by linking Unity and Android Studio on Windows 10.</p>\n<p>I'm wondering if there is a possibility that the libpenguin.so file could be missing when transferring a Unity project made in a Mac environment to Windows 10.</p>\n<p>Also, I'm curious about how the error was fixed by replacing the non-existing libpenguin.so in some way.</p>\n<p>Additionally, when I build by linking Android Studio and Unity, the UI appears, but the AR screen is entirely black. I'm curious if fixing the error regarding the libpenguin.so file could also fix this black screen issue.</p>\n<p>Used Versions\nUnity: 2022.3.4f1\nAndroid Studio: 2022 version\nSDK: Same version as Unity\nNDK: Same version as Unity</p>\n<p>jinlibs</p>\n<p><a href=\"https://i.stack.imgur.com/Cra44.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Cra44.png\" alt=\"Picture 1\" /></a></p>\n<p>logcat\n<a href=\"https://i.stack.imgur.com/uyPGQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uyPGQ.png\" alt=\"Picture 2\" /></a></p>\n<p>I'm not sure where and how the error is occurring, so I can't post the code. If there's any specific code you need, please let me know, and I'll provide it.</p>\n<p>Thank you.</p>\n<p>I transferred the Unity project to a Windows 10 environment and tried to build it anew to check if the problem arises when building from Unity to Android. -&gt; But the error continued to occur.</p>\n<p>I tried copying and pasting the libpenguin.so file from another external GitHub file, but the error still occurred.</p>\n<p>To fix the issue of the black screen continuously appearing, I tried building using the uaal ar example, but the black screen still appears.</p>\n"},{"tags":["java","apache-axis"],"answers":[{"tags":[],"owner":{"account_id":4439251,"reputation":1427,"user_id":3614215,"display_name":"Marco"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691657265,"creation_date":1691657265,"answer_id":76874069,"question_id":75733595,"body_markdown":"In the last versions of Apache Axis2, at least starting from version 18.x, you can log the request and the response by simply setting the `debug` level to `org.apache.http`.","title":"Why is debug logging SOAP Requests with Axis2 1.8 not working ANYMORE?","body":"<p>In the last versions of Apache Axis2, at least starting from version 18.x, you can log the request and the response by simply setting the <code>debug</code> level to <code>org.apache.http</code>.</p>\n"}],"owner":{"account_id":28013331,"reputation":1,"user_id":21395485,"display_name":"Flo Feil"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":118,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691657265,"creation_date":1678799524,"question_id":75733595,"body_markdown":"I am currently working to upgrade a relatively old application to utilize Axis2 - the current version 1.8.2 as a SOAP Client (formerly using AXis2 1.3)\r\nWhen there was a need to analyze the generated SOAP request (and response), it was easy:\r\nI added the following VM Arguments to the run configuration (or as startup parameters on a test environment) \r\nApache Tomcat 8.5\r\n\r\n    -Dorg.apache.commons.logging.Log=org.apache.commons.logging.impl.SimpleLog\r\n    -Dorg.apache.commons.logging.simplelog.showdatetime=true\r\n    -Dorg.apache.commons.logging.simplelog.log.httpclient.wire=debug\r\n    -Dorg.apache.commons.logging.simplelog.log.org.apache.commons.httpclient=debug\r\n\r\n...and perfect and complete the xml structures appeared in the console log and/or logfile.\r\n\r\neg.:\r\n    2023/03/10 08:27:22:518 CET [DEBUG] header - -&gt;&gt; &quot;Content-Type: text/xml; charset=UTF-8[\\r][\\n]&quot;\r\n    2023/03/10 08:27:22:518 CET [DEBUG] header - -&gt;&gt; &quot;SOAPAction: &quot;http://www.host.com/servicece-3.0/startProcessInstance&quot;[\\r][\\n]&quot;\r\n    2023/03/10 08:27:22:518 CET [DEBUG] header - -&gt;&gt; &quot;User-Agent: Axis2[\\r][\\n]&quot;\r\n    2023/03/10 08:27:22:518 CET [DEBUG] header - -&gt;&gt; &quot;Host: host.at:9085[\\r][\\n]&quot;\r\n    2023/03/10 08:27:22:518 CET [DEBUG] header - -&gt;&gt; &quot;Content-Length: 3732[\\r][\\n]&quot;\r\n    2023/03/10 08:27:22:518 CET [DEBUG] header - -&gt;&gt; &quot;[\\r][\\n]&quot;\r\n    2023/03/10 08:27:22:519 CET [DEBUG] content - -&gt;&gt; &quot;&lt;?xml version=&#39;1.0&#39; encoding=&#39;UTF-8&#39;?&gt;&lt;soapenv:Envelope xmlns:soapenv=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&gt;&lt;soapenv:Header&gt;&lt;ns49:ServiceContext xmlns:ns49=&quot;http://www.example.com/jp/ServiceLayerTypes-1.4&quot; soapenv:mustUnderstand=&quot;0&quot;&gt; [...]\r\n    2023/03/10 08:27:22:519 CET [DEBUG] EntityEnclosingMethod - -Request body sent\r\n\r\nWith Axi2 1.8.2 - nothing! I search configuration files for options, i read documentation on Axis2, Tomcat, searched forums...\r\nDoes anyone know about this? Experienced a similar problem? Any ideas?\r\nThnx\r\n\r\nI tried the same configuration as with Axis2 1.3 and 1.8.2 - i expect the same debug output.","title":"Why is debug logging SOAP Requests with Axis2 1.8 not working ANYMORE?","body":"<p>I am currently working to upgrade a relatively old application to utilize Axis2 - the current version 1.8.2 as a SOAP Client (formerly using AXis2 1.3)\nWhen there was a need to analyze the generated SOAP request (and response), it was easy:\nI added the following VM Arguments to the run configuration (or as startup parameters on a test environment)\nApache Tomcat 8.5</p>\n<pre><code>-Dorg.apache.commons.logging.Log=org.apache.commons.logging.impl.SimpleLog\n-Dorg.apache.commons.logging.simplelog.showdatetime=true\n-Dorg.apache.commons.logging.simplelog.log.httpclient.wire=debug\n-Dorg.apache.commons.logging.simplelog.log.org.apache.commons.httpclient=debug\n</code></pre>\n<p>...and perfect and complete the xml structures appeared in the console log and/or logfile.</p>\n<p>eg.:\n2023/03/10 08:27:22:518 CET [DEBUG] header - -&gt;&gt; &quot;Content-Type: text/xml; charset=UTF-8[\\r][\\n]&quot;\n2023/03/10 08:27:22:518 CET [DEBUG] header - -&gt;&gt; &quot;SOAPAction: &quot;http://www.host.com/servicece-3.0/startProcessInstance&quot;[\\r][\\n]&quot;\n2023/03/10 08:27:22:518 CET [DEBUG] header - -&gt;&gt; &quot;User-Agent: Axis2[\\r][\\n]&quot;\n2023/03/10 08:27:22:518 CET [DEBUG] header - -&gt;&gt; &quot;Host: host.at:9085[\\r][\\n]&quot;\n2023/03/10 08:27:22:518 CET [DEBUG] header - -&gt;&gt; &quot;Content-Length: 3732[\\r][\\n]&quot;\n2023/03/10 08:27:22:518 CET [DEBUG] header - -&gt;&gt; &quot;[\\r][\\n]&quot;\n2023/03/10 08:27:22:519 CET [DEBUG] content - -&gt;&gt; &quot;&lt;soapenv:Envelope xmlns:soapenv=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&gt;soapenv:Header&lt;ns49:ServiceContext xmlns:ns49=&quot;http://www.example.com/jp/ServiceLayerTypes-1.4&quot; soapenv:mustUnderstand=&quot;0&quot;&gt; [...]\n2023/03/10 08:27:22:519 CET [DEBUG] EntityEnclosingMethod - -Request body sent</p>\n<p>With Axi2 1.8.2 - nothing! I search configuration files for options, i read documentation on Axis2, Tomcat, searched forums...\nDoes anyone know about this? Experienced a similar problem? Any ideas?\nThnx</p>\n<p>I tried the same configuration as with Axis2 1.3 and 1.8.2 - i expect the same debug output.</p>\n"},{"tags":["java","google-chrome","selenium-webdriver"],"comments":[{"owner":{"account_id":15994883,"reputation":3427,"user_id":11543023,"display_name":"djmonki"},"score":0,"creation_date":1693297441,"post_id":76874068,"comment_id":135738614,"body_markdown":"How do you get chromedriver ?","body":"How do you get chromedriver ?"}],"owner":{"account_id":28682652,"reputation":47,"user_id":21963506,"display_name":"Farhood Naqizadeh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":139,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691657263,"creation_date":1691657263,"question_id":76874068,"body_markdown":"Hello I use selenium on ubuntu with java, I create a user for glassfish and run glassfish on it, The selenium version and chrome I use for chrome 115, But when I start selenium the errors shows :\r\n\r\n```\r\n&quot;Unknown Computer&quot;,&quot;127.0.1.1&quot;,&quot;Linux 5.4.0-155-generic, architecture: amd64-64&quot;,&quot;glassfishuser&quot;,&quot;Cbc&quot;,&quot;0.1.0 nightly&quot;,&quot;Java version 17.0.8&quot;,FATAL,41395277,2023-08-10 10:42:22.771 IRST,ir.mehritco.megnatis.cbc.CbcRobot.&lt;init&gt;(CbcRobot.java:49),&quot;We have problem with instance chrome Driver : Could not start a new session. Response code 500. Message: unknown error: Chrome failed to start: exited abnormally.\r\n  (unknown error: DevToolsActivePort file doesn&#39;t exist)\r\n  (The process started from chrome location /opt/google/chrome/chrome is no longer running, so ChromeDriver is assuming that Chrome has crashed.) \r\nHost info: host: &#39;srv2851084109&#39;, ip: &#39;127.0.1.1&#39;\r\nBuild info: version: &#39;4.11.0&#39;, revision: &#39;040bc5406b&#39;\r\nSystem info: os.name: &#39;Linux&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;5.4.0-155-generic&#39;, java.version: &#39;17.0.8&#39;\r\nDriver info: org.openqa.selenium.chrome.ChromeDriver\r\nCommand: [null, newSession {capabilities=[Capabilities {browserName: chrome, goog:chromeOptions: {args: [--remote-allow-origins=*, --user-data-dir=/home/glass..., user-agent=Mozilla/5.0 (Win..., --lang=en-GB, --disable-dev-shm-usage, --ignore-certificate-errors, --disable-gpu, start-maximized, --no-sandbox, disable-infobars, --disable-extensions, --enable-sandbox], excludeSwitches: [enable-automation], extensions: [], useAutomationExtension: false}}]}]&quot;,,,&quot;&quot;,,&quot;&quot;,\r\n&quot;Unknown Computer&quot;,&quot;127.0.1.1&quot;,&quot;Linux 5.4.0-155-generic, architecture: amd64-64&quot;,&quot;glassfishuser&quot;,&quot;Cbc&quot;,&quot;0.1.0 nightly&quot;,&quot;Java version 17.0.8&quot;,INFO,41395278,2023-08-10 10:42:22.772\r\n```\r\nThe chrome Present at the location : /opt/google/chrome/chrome\r\nand work if excute in terminal.\r\nThis is log from my log server. and the Option for Selenium is :\r\n\r\n```\r\n    public final ChromeDriver headless(String profileLocation) {\r\n        ChromeOptions options = new ChromeOptions();\r\n        options.addArguments(&quot;--user-data-dir=&quot; + profileLocation);//#e.g. C:\\Users\\You\\AppData\\Local\\Google\\Chrome\\User Data\r\n        options.setCapability(ChromeOptions.CAPABILITY, options);\r\n        options.addArguments(userAgent[1]);\r\n        options.addArguments(&quot;--lang=en-GB&quot;);\r\n        options.setExperimentalOption(&quot;excludeSwitches&quot;, Collections.singletonList(&quot;enable-automation&quot;));\r\n        options.setExperimentalOption(&quot;useAutomationExtension&quot;, false);\r\n        options.addArguments(&quot;--disable-dev-shm-usage&quot;); // overcome limited resource problems\r\n        //https://stackoverflow.com/questions/63649026/how-to-disable-remove-the-chrome-headless-disclaimer-in-selenium-and-java\r\n        options.addArguments(&quot;--ignore-certificate-errors&quot;);\r\n        System.setProperty(&quot;java.awt.headless&quot;, &quot;false&quot;);\r\n        //https://www.selenium.dev/blog/2023/headless-is-going-away/\r\n//        options.addArguments(&quot;--headless&quot;);\r\n        options.addArguments(&quot;--disable-gpu&quot;);\r\n        options.addArguments(&quot;start-maximized&quot;);\r\n//        options.addArguments(&quot;--window-size=1400,800&quot;);\r\n        options.addArguments(&quot;--no-sandbox&quot;); // Bypass OS security model\r\n        options.addArguments(&quot;disable-infobars&quot;);\r\n        options.addArguments(&quot;--disable-extensions&quot;);\r\n\r\n\r\n        options.addArguments(&quot;--enable-sandbox&quot;);\r\n        return new ChromeDriver(options);\r\n    }\r\n```\r\n\r\nAnd The headless mode is off (headless==false).\r\nbut the error keep goes and all application fails to run.\r\n\r\nI added the chrome driver from System property.\r\n\r\n``` System.setProperty(&quot;webdriver.chrome.driver&quot;, chromeDriverPath);```","title":"Chrome failed to start: exited abnormally .(unknown error: DevToolsActivePort file doesn&#39;t exist) in java","body":"<p>Hello I use selenium on ubuntu with java, I create a user for glassfish and run glassfish on it, The selenium version and chrome I use for chrome 115, But when I start selenium the errors shows :</p>\n<pre><code>&quot;Unknown Computer&quot;,&quot;127.0.1.1&quot;,&quot;Linux 5.4.0-155-generic, architecture: amd64-64&quot;,&quot;glassfishuser&quot;,&quot;Cbc&quot;,&quot;0.1.0 nightly&quot;,&quot;Java version 17.0.8&quot;,FATAL,41395277,2023-08-10 10:42:22.771 IRST,ir.mehritco.megnatis.cbc.CbcRobot.&lt;init&gt;(CbcRobot.java:49),&quot;We have problem with instance chrome Driver : Could not start a new session. Response code 500. Message: unknown error: Chrome failed to start: exited abnormally.\n  (unknown error: DevToolsActivePort file doesn't exist)\n  (The process started from chrome location /opt/google/chrome/chrome is no longer running, so ChromeDriver is assuming that Chrome has crashed.) \nHost info: host: 'srv2851084109', ip: '127.0.1.1'\nBuild info: version: '4.11.0', revision: '040bc5406b'\nSystem info: os.name: 'Linux', os.arch: 'amd64', os.version: '5.4.0-155-generic', java.version: '17.0.8'\nDriver info: org.openqa.selenium.chrome.ChromeDriver\nCommand: [null, newSession {capabilities=[Capabilities {browserName: chrome, goog:chromeOptions: {args: [--remote-allow-origins=*, --user-data-dir=/home/glass..., user-agent=Mozilla/5.0 (Win..., --lang=en-GB, --disable-dev-shm-usage, --ignore-certificate-errors, --disable-gpu, start-maximized, --no-sandbox, disable-infobars, --disable-extensions, --enable-sandbox], excludeSwitches: [enable-automation], extensions: [], useAutomationExtension: false}}]}]&quot;,,,&quot;&quot;,,&quot;&quot;,\n&quot;Unknown Computer&quot;,&quot;127.0.1.1&quot;,&quot;Linux 5.4.0-155-generic, architecture: amd64-64&quot;,&quot;glassfishuser&quot;,&quot;Cbc&quot;,&quot;0.1.0 nightly&quot;,&quot;Java version 17.0.8&quot;,INFO,41395278,2023-08-10 10:42:22.772\n</code></pre>\n<p>The chrome Present at the location : /opt/google/chrome/chrome\nand work if excute in terminal.\nThis is log from my log server. and the Option for Selenium is :</p>\n<pre><code>    public final ChromeDriver headless(String profileLocation) {\n        ChromeOptions options = new ChromeOptions();\n        options.addArguments(&quot;--user-data-dir=&quot; + profileLocation);//#e.g. C:\\Users\\You\\AppData\\Local\\Google\\Chrome\\User Data\n        options.setCapability(ChromeOptions.CAPABILITY, options);\n        options.addArguments(userAgent[1]);\n        options.addArguments(&quot;--lang=en-GB&quot;);\n        options.setExperimentalOption(&quot;excludeSwitches&quot;, Collections.singletonList(&quot;enable-automation&quot;));\n        options.setExperimentalOption(&quot;useAutomationExtension&quot;, false);\n        options.addArguments(&quot;--disable-dev-shm-usage&quot;); // overcome limited resource problems\n        //https://stackoverflow.com/questions/63649026/how-to-disable-remove-the-chrome-headless-disclaimer-in-selenium-and-java\n        options.addArguments(&quot;--ignore-certificate-errors&quot;);\n        System.setProperty(&quot;java.awt.headless&quot;, &quot;false&quot;);\n        //https://www.selenium.dev/blog/2023/headless-is-going-away/\n//        options.addArguments(&quot;--headless&quot;);\n        options.addArguments(&quot;--disable-gpu&quot;);\n        options.addArguments(&quot;start-maximized&quot;);\n//        options.addArguments(&quot;--window-size=1400,800&quot;);\n        options.addArguments(&quot;--no-sandbox&quot;); // Bypass OS security model\n        options.addArguments(&quot;disable-infobars&quot;);\n        options.addArguments(&quot;--disable-extensions&quot;);\n\n\n        options.addArguments(&quot;--enable-sandbox&quot;);\n        return new ChromeDriver(options);\n    }\n</code></pre>\n<p>And The headless mode is off (headless==false).\nbut the error keep goes and all application fails to run.</p>\n<p>I added the chrome driver from System property.</p>\n<p><code> System.setProperty(&quot;webdriver.chrome.driver&quot;, chromeDriverPath);</code></p>\n"},{"tags":["java","spring-boot","spring-security","jwt"],"owner":{"account_id":6647035,"reputation":31,"user_id":5130754,"display_name":"compumike08"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1691591445,"answer_count":0,"score":0,"last_activity_date":1691657213,"creation_date":1691528980,"question_id":76863213,"body_markdown":"I am writing a web application using Spring Security which uses JWT tokens for authentication. The problem I am having is with the register new user endpoint. I configured spring security to allow unauthenticated requests to the `/registerUser` endpoint so new user accounts can be created. Once I start up the application, for some reason I am able to successfully call the `/registerUser` endpoint, but only once. After I call it once successfully, every subsequent call to the endpoint returns 403 - Forbidden. If I shut down the application and start it up again, I am again able to call the `/registerUser` endpoint only once. All subsequent calls return 403. Calls to the `/authenticate` endpoint, which also allows calls which are unauthenticated, work successfully no matter how many times I call it. It is only the `/registerUser` endpoint which only works once. I am at a loss to explain this behavior.\r\n\r\nEndpoints which are protected and require authentication use stateless JSON Web Tokens (JWT), so there are no cookies involved.\r\n\r\nI am currently using an H2 in-memory database for development (so the database gets wiped every time the application restarts). I am unsure if this plays a role or not in the issue I&#39;m having with &quot;/registerUser&quot;.\r\n\r\nThis is my config file extending `WebSecurityConfigurerAdapter`:\r\n```\r\npackage mh.michael.monopolybanking.config;\r\n\r\nimport mh.michael.monopolybanking.security.JwtTokenAuthorizationOncePerRequestFilter;\r\nimport mh.michael.monopolybanking.security.JwtUnAuthorizedResponseAuthenticationEntryPoint;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.http.HttpMethod;\r\nimport org.springframework.security.authentication.AuthenticationManager;\r\nimport org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\r\nimport org.springframework.security.config.annotation.method.configuration.EnableGlobalMethodSecurity;\r\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\nimport org.springframework.security.config.annotation.web.builders.WebSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\r\nimport org.springframework.security.config.http.SessionCreationPolicy;\r\nimport org.springframework.security.core.userdetails.UserDetailsService;\r\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\r\nimport org.springframework.security.crypto.password.PasswordEncoder;\r\nimport org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;\r\n\r\n@Configuration\r\n@EnableWebSecurity\r\n@EnableGlobalMethodSecurity(prePostEnabled = true)\r\npublic class JWTWebSecurityConfig extends WebSecurityConfigurerAdapter {\r\n    private final JwtUnAuthorizedResponseAuthenticationEntryPoint jwtUnAuthorizedResponseAuthenticationEntryPoint;\r\n    private final UserDetailsService databaseAuthUserDetailsService;\r\n    private final JwtTokenAuthorizationOncePerRequestFilter jwtAuthenticationTokenFilter;\r\n\r\n    public JWTWebSecurityConfig(\r\n            JwtUnAuthorizedResponseAuthenticationEntryPoint jwtUnAuthorizedResponseAuthenticationEntryPoint,\r\n            UserDetailsService databaseAuthUserDetailsService,\r\n            JwtTokenAuthorizationOncePerRequestFilter jwtAuthenticationTokenFilter\r\n    ) {\r\n        this.jwtUnAuthorizedResponseAuthenticationEntryPoint = jwtUnAuthorizedResponseAuthenticationEntryPoint;\r\n        this.databaseAuthUserDetailsService = databaseAuthUserDetailsService;\r\n        this.jwtAuthenticationTokenFilter = jwtAuthenticationTokenFilter;\r\n    }\r\n\r\n    @Autowired\r\n    public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception {\r\n        auth\r\n                .userDetailsService(databaseAuthUserDetailsService);\r\n    }\r\n\r\n    @Bean\r\n    @Override\r\n    public AuthenticationManager authenticationManagerBean() throws Exception {\r\n        return super.authenticationManagerBean();\r\n    }\r\n\r\n    @Bean\r\n    public PasswordEncoder passwordEncoder() {\r\n        return new BCryptPasswordEncoder();\r\n    }\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity httpSecurity) throws Exception {\r\n        httpSecurity\r\n                .httpBasic().disable()\r\n                .cors().and().csrf().disable()\r\n                .exceptionHandling().authenticationEntryPoint(jwtUnAuthorizedResponseAuthenticationEntryPoint).and()\r\n                .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\r\n                .authorizeRequests()\r\n                .antMatchers(\r\n                        HttpMethod.POST,\r\n                        &quot;/authenticate&quot;,\r\n                        &quot;/registerUser&quot;\r\n                ).permitAll()\r\n                .anyRequest().authenticated();\r\n\r\n        httpSecurity\r\n                .addFilterBefore(jwtAuthenticationTokenFilter, UsernamePasswordAuthenticationFilter.class);\r\n\r\n        httpSecurity\r\n                .headers()\r\n                .frameOptions().sameOrigin()  //H2 Console Needs this setting\r\n                .cacheControl(); //disable caching\r\n    }\r\n\r\n    @Override\r\n    public void configure(WebSecurity webSecurity) throws Exception {\r\n        webSecurity\r\n                .ignoring()\r\n                .antMatchers(\r\n                        HttpMethod.POST,\r\n                        &quot;/authenticate&quot;\r\n                )\r\n                .antMatchers(\r\n                        HttpMethod.POST,\r\n                        &quot;/registerUser&quot;\r\n                )\r\n                .antMatchers(HttpMethod.OPTIONS, &quot;/**&quot;)\r\n                .and()\r\n                .ignoring()\r\n                .antMatchers(\r\n                        HttpMethod.GET,\r\n                        &quot;/favicon.ico&quot;\r\n                )\r\n                .and()\r\n                .ignoring()\r\n                .antMatchers(\r\n                        HttpMethod.POST,\r\n                        &quot;/ws/**&quot;\r\n                )\r\n                .and()\r\n                .ignoring()\r\n                .antMatchers(\r\n                        HttpMethod.GET,\r\n                        &quot;/ws/**&quot;\r\n                )\r\n                .and()\r\n                .ignoring()\r\n                .antMatchers(\r\n                        HttpMethod.GET,\r\n                        &quot;/&quot;\r\n                )\r\n                .and()\r\n                .ignoring()\r\n                .antMatchers(&quot;/static/**&quot;)\r\n                .and()\r\n                .ignoring()\r\n                .antMatchers(&quot;/h2-console/**/**&quot;);//Should not be in Production!\r\n    }\r\n}\r\n\r\n```\r\n\r\n`JwtTokenAuthorizationOncePerRequestFilter`:\r\n```\r\npackage mh.michael.monopolybanking.security;\r\n\r\nimport io.jsonwebtoken.ExpiredJwtException;\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport org.springframework.beans.factory.annotation.Value;\r\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\r\nimport org.springframework.security.core.context.SecurityContextHolder;\r\nimport org.springframework.security.core.userdetails.UserDetails;\r\nimport org.springframework.security.core.userdetails.UserDetailsService;\r\nimport org.springframework.security.web.authentication.WebAuthenticationDetailsSource;\r\nimport org.springframework.stereotype.Component;\r\nimport org.springframework.web.filter.OncePerRequestFilter;\r\n\r\nimport javax.servlet.FilterChain;\r\nimport javax.servlet.ServletException;\r\nimport javax.servlet.http.HttpServletRequest;\r\nimport javax.servlet.http.HttpServletResponse;\r\nimport java.io.IOException;\r\n\r\n@Component\r\n@Slf4j\r\npublic class JwtTokenAuthorizationOncePerRequestFilter extends OncePerRequestFilter {\r\n    private final UserDetailsService databaseAuthUserDetailsService;\r\n    private final JwtTokenUtil jwtTokenUtil;\r\n\r\n    @Value(&quot;${jwt.http.request.header}&quot;)\r\n    private String tokenHeader;\r\n\r\n    public JwtTokenAuthorizationOncePerRequestFilter(\r\n            UserDetailsService databaseAuthUserDetailsService,\r\n            JwtTokenUtil jwtTokenUtil\r\n    ) {\r\n        this.databaseAuthUserDetailsService = databaseAuthUserDetailsService;\r\n        this.jwtTokenUtil = jwtTokenUtil;\r\n    }\r\n\r\n    @Override\r\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain chain) throws ServletException, IOException {\r\n        log.debug(&quot;Authentication Request For &#39;{}&#39;&quot;, request.getRequestURL());\r\n\r\n        final String requestTokenHeader = request.getHeader(this.tokenHeader);\r\n\r\n        String username = null;\r\n        String jwtToken = null;\r\n        if (requestTokenHeader != null &amp;&amp; requestTokenHeader.startsWith(&quot;Bearer &quot;)) {\r\n            jwtToken = requestTokenHeader.substring(7);\r\n            try {\r\n                username = jwtTokenUtil.getUsernameFromToken(jwtToken);\r\n            } catch (IllegalArgumentException e) {\r\n                log.error(&quot;JWT_TOKEN_UNABLE_TO_GET_USERNAME&quot;, e);\r\n            } catch (ExpiredJwtException e) {\r\n                log.warn(&quot;JWT_TOKEN_EXPIRED&quot;, e);\r\n            }\r\n        } else {\r\n            log.warn(&quot;JWT_TOKEN_DOES_NOT_START_WITH_BEARER_STRING&quot;);\r\n        }\r\n\r\n        log.debug(&quot;JWT_TOKEN_USERNAME_VALUE &#39;{}&#39;&quot;, username);\r\n        if (username != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null) {\r\n\r\n            UserDetails userDetails = this.databaseAuthUserDetailsService.loadUserByUsername(username);\r\n\r\n            if (jwtTokenUtil.validateToken(jwtToken, userDetails)) {\r\n                UsernamePasswordAuthenticationToken usernamePasswordAuthenticationToken = new UsernamePasswordAuthenticationToken(userDetails, null, userDetails.getAuthorities());\r\n                usernamePasswordAuthenticationToken.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\r\n                SecurityContextHolder.getContext().setAuthentication(usernamePasswordAuthenticationToken);\r\n            }\r\n        }\r\n\r\n        chain.doFilter(request, response);\r\n    }\r\n}\r\n```\r\n\r\n`DatabaseAuthUserDetailsService`:\r\n```\r\npackage mh.michael.monopolybanking.security;\r\n\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport mh.michael.monopolybanking.model.User;\r\nimport mh.michael.monopolybanking.repository.UserRepository;\r\nimport org.springframework.security.core.userdetails.UserDetails;\r\nimport org.springframework.security.core.userdetails.UserDetailsService;\r\nimport org.springframework.security.core.userdetails.UsernameNotFoundException;\r\nimport org.springframework.stereotype.Service;\r\n\r\n@Service\r\n@Slf4j\r\npublic class DatabaseAuthUserDetailsService implements UserDetailsService {\r\n    private final UserRepository userRepository;\r\n\r\n    public DatabaseAuthUserDetailsService(UserRepository userRepository) {\r\n        this.userRepository = userRepository;\r\n    }\r\n\r\n    @Override\r\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\r\n        User user = userRepository.findByUsername(username)\r\n                .orElseThrow(() -&gt; new UsernameNotFoundException(&quot;User Not Found with username: &quot; + username));\r\n\r\n        return JwtUserDetails.build(user);\r\n    }\r\n}\r\n```\r\n\r\n`JwtTokenAuthorizationOncePerRequestFilter`:\r\n```\r\npackage mh.michael.monopolybanking.security;\r\n\r\nimport io.jsonwebtoken.ExpiredJwtException;\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport org.springframework.beans.factory.annotation.Value;\r\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\r\nimport org.springframework.security.core.context.SecurityContextHolder;\r\nimport org.springframework.security.core.userdetails.UserDetails;\r\nimport org.springframework.security.core.userdetails.UserDetailsService;\r\nimport org.springframework.security.web.authentication.WebAuthenticationDetailsSource;\r\nimport org.springframework.stereotype.Component;\r\nimport org.springframework.web.filter.OncePerRequestFilter;\r\n\r\nimport javax.servlet.FilterChain;\r\nimport javax.servlet.ServletException;\r\nimport javax.servlet.http.HttpServletRequest;\r\nimport javax.servlet.http.HttpServletResponse;\r\nimport java.io.IOException;\r\n\r\n@Component\r\n@Slf4j\r\npublic class JwtTokenAuthorizationOncePerRequestFilter extends OncePerRequestFilter {\r\n    private final UserDetailsService databaseAuthUserDetailsService;\r\n    private final JwtTokenUtil jwtTokenUtil;\r\n\r\n    @Value(&quot;${jwt.http.request.header}&quot;)\r\n    private String tokenHeader;\r\n\r\n    public JwtTokenAuthorizationOncePerRequestFilter(\r\n            UserDetailsService databaseAuthUserDetailsService,\r\n            JwtTokenUtil jwtTokenUtil\r\n    ) {\r\n        this.databaseAuthUserDetailsService = databaseAuthUserDetailsService;\r\n        this.jwtTokenUtil = jwtTokenUtil;\r\n    }\r\n\r\n    @Override\r\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain chain) throws ServletException, IOException {\r\n        log.debug(&quot;Authentication Request For &#39;{}&#39;&quot;, request.getRequestURL());\r\n\r\n        final String requestTokenHeader = request.getHeader(this.tokenHeader);\r\n\r\n        String username = null;\r\n        String jwtToken = null;\r\n        if (requestTokenHeader != null &amp;&amp; requestTokenHeader.startsWith(&quot;Bearer &quot;)) {\r\n            jwtToken = requestTokenHeader.substring(7);\r\n            try {\r\n                username = jwtTokenUtil.getUsernameFromToken(jwtToken);\r\n            } catch (IllegalArgumentException e) {\r\n                log.error(&quot;JWT_TOKEN_UNABLE_TO_GET_USERNAME&quot;, e);\r\n            } catch (ExpiredJwtException e) {\r\n                log.warn(&quot;JWT_TOKEN_EXPIRED&quot;, e);\r\n            }\r\n        } else {\r\n            log.warn(&quot;JWT_TOKEN_DOES_NOT_START_WITH_BEARER_STRING&quot;);\r\n        }\r\n\r\n        log.debug(&quot;JWT_TOKEN_USERNAME_VALUE &#39;{}&#39;&quot;, username);\r\n        if (username != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null) {\r\n\r\n            UserDetails userDetails = this.databaseAuthUserDetailsService.loadUserByUsername(username);\r\n\r\n            if (jwtTokenUtil.validateToken(jwtToken, userDetails)) {\r\n                UsernamePasswordAuthenticationToken usernamePasswordAuthenticationToken = new UsernamePasswordAuthenticationToken(userDetails, null, userDetails.getAuthorities());\r\n                usernamePasswordAuthenticationToken.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\r\n                SecurityContextHolder.getContext().setAuthentication(usernamePasswordAuthenticationToken);\r\n            }\r\n        }\r\n\r\n        chain.doFilter(request, response);\r\n    }\r\n}\r\n```\r\n\r\nThis is my controller for registering new users and authentication (`JwtAuthenticationRestController`):\r\n```\r\npackage mh.michael.monopolybanking.controller;\r\n\r\nimport mh.michael.monopolybanking.dto.NewUserRequestDTO;\r\nimport mh.michael.monopolybanking.dto.UserDTO;\r\nimport mh.michael.monopolybanking.exceptions.AuthenticationException;\r\nimport mh.michael.monopolybanking.security.JwtTokenRequest;\r\nimport mh.michael.monopolybanking.security.JwtTokenResponse;\r\nimport mh.michael.monopolybanking.security.JwtTokenUtil;\r\nimport mh.michael.monopolybanking.service.UserService;\r\nimport org.springframework.beans.factory.annotation.Value;\r\nimport org.springframework.http.HttpStatus;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.security.authentication.AuthenticationManager;\r\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\r\nimport org.springframework.security.core.Authentication;\r\nimport org.springframework.security.core.context.SecurityContextHolder;\r\nimport org.springframework.security.core.userdetails.UserDetails;\r\nimport org.springframework.security.core.userdetails.UserDetailsService;\r\nimport org.springframework.web.bind.annotation.*;\r\n\r\nimport javax.servlet.http.HttpServletRequest;\r\n\r\n@RestController\r\n@CrossOrigin(origins={ &quot;http://localhost:3000&quot;, &quot;http://localhost:8080&quot; })\r\npublic class JwtAuthenticationRestController {\r\n    @Value(&quot;${jwt.http.request.header}&quot;)\r\n    private String tokenHeader;\r\n\r\n    private final JwtTokenUtil jwtTokenUtil;\r\n    private final UserDetailsService databaseAuthUserDetailsService;\r\n    private final AuthenticationManager authenticationManager;\r\n    private final UserService userService;\r\n\r\n    public JwtAuthenticationRestController(\r\n            JwtTokenUtil jwtTokenUtil,\r\n            UserDetailsService databaseAuthUserDetailsService,\r\n            AuthenticationManager authenticationManager,\r\n            UserService userService\r\n    ) {\r\n        this.jwtTokenUtil = jwtTokenUtil;\r\n        this.databaseAuthUserDetailsService = databaseAuthUserDetailsService;\r\n        this.authenticationManager = authenticationManager;\r\n        this.userService = userService;\r\n    }\r\n\r\n    @PostMapping(value = &quot;/authenticate&quot;)\r\n    public ResponseEntity&lt;?&gt; createAuthenticationToken(@RequestBody JwtTokenRequest authenticationRequest)\r\n            throws AuthenticationException {\r\n        Authentication authentication = authenticationManager.authenticate(\r\n                new UsernamePasswordAuthenticationToken(authenticationRequest.getUsername(), authenticationRequest.getPassword()));\r\n\r\n        SecurityContextHolder.getContext().setAuthentication(authentication);\r\n\r\n        final UserDetails userDetails = (UserDetails) authentication.getPrincipal();\r\n        final String token = jwtTokenUtil.generateToken(userDetails);\r\n        return ResponseEntity.ok(new JwtTokenResponse(token));\r\n    }\r\n\r\n    @PostMapping(value = &quot;/refresh&quot;)\r\n    public ResponseEntity&lt;?&gt; refreshAndGetAuthenticationToken(HttpServletRequest request) {\r\n        String authToken = request.getHeader(tokenHeader);\r\n        final String token = authToken.substring(7);\r\n\r\n        if (jwtTokenUtil.canTokenBeRefreshed(token)) {\r\n            String refreshedToken = jwtTokenUtil.refreshToken(token);\r\n            return ResponseEntity.ok(new JwtTokenResponse(refreshedToken));\r\n        } else {\r\n            return ResponseEntity.badRequest().body(null);\r\n        }\r\n    }\r\n\r\n    @PostMapping(value = &quot;/registerUser&quot;)\r\n    public UserDTO registerNewUser(@RequestBody NewUserRequestDTO newUserRequestDTO) {\r\n        return userService.createNewUser(newUserRequestDTO);\r\n    }\r\n\r\n    @ExceptionHandler({ AuthenticationException.class })\r\n    public ResponseEntity&lt;String&gt; handleAuthenticationException(AuthenticationException e) {\r\n        return ResponseEntity.status(HttpStatus.UNAUTHORIZED).body(e.getMessage());\r\n    }\r\n}\r\n```\r\n\r\nThe complete code I have so far can be found here: &lt;https://github.com/compumike08/monopoly-banking&gt;. Note that the front-end code I have written so far doesn&#39;t have registerUser or authenticate pages yet, so I&#39;ve been using Postman to call the backend endpoints directly for testing.","title":"Spring security returning 403 for calls to user endpoint after first call to register endpoint is successful","body":"<p>I am writing a web application using Spring Security which uses JWT tokens for authentication. The problem I am having is with the register new user endpoint. I configured spring security to allow unauthenticated requests to the <code>/registerUser</code> endpoint so new user accounts can be created. Once I start up the application, for some reason I am able to successfully call the <code>/registerUser</code> endpoint, but only once. After I call it once successfully, every subsequent call to the endpoint returns 403 - Forbidden. If I shut down the application and start it up again, I am again able to call the <code>/registerUser</code> endpoint only once. All subsequent calls return 403. Calls to the <code>/authenticate</code> endpoint, which also allows calls which are unauthenticated, work successfully no matter how many times I call it. It is only the <code>/registerUser</code> endpoint which only works once. I am at a loss to explain this behavior.</p>\n<p>Endpoints which are protected and require authentication use stateless JSON Web Tokens (JWT), so there are no cookies involved.</p>\n<p>I am currently using an H2 in-memory database for development (so the database gets wiped every time the application restarts). I am unsure if this plays a role or not in the issue I'm having with &quot;/registerUser&quot;.</p>\n<p>This is my config file extending <code>WebSecurityConfigurerAdapter</code>:</p>\n<pre><code>package mh.michael.monopolybanking.config;\n\nimport mh.michael.monopolybanking.security.JwtTokenAuthorizationOncePerRequestFilter;\nimport mh.michael.monopolybanking.security.JwtUnAuthorizedResponseAuthenticationEntryPoint;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.http.HttpMethod;\nimport org.springframework.security.authentication.AuthenticationManager;\nimport org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\nimport org.springframework.security.config.annotation.method.configuration.EnableGlobalMethodSecurity;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.builders.WebSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\nimport org.springframework.security.config.http.SessionCreationPolicy;\nimport org.springframework.security.core.userdetails.UserDetailsService;\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\nimport org.springframework.security.crypto.password.PasswordEncoder;\nimport org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;\n\n@Configuration\n@EnableWebSecurity\n@EnableGlobalMethodSecurity(prePostEnabled = true)\npublic class JWTWebSecurityConfig extends WebSecurityConfigurerAdapter {\n    private final JwtUnAuthorizedResponseAuthenticationEntryPoint jwtUnAuthorizedResponseAuthenticationEntryPoint;\n    private final UserDetailsService databaseAuthUserDetailsService;\n    private final JwtTokenAuthorizationOncePerRequestFilter jwtAuthenticationTokenFilter;\n\n    public JWTWebSecurityConfig(\n            JwtUnAuthorizedResponseAuthenticationEntryPoint jwtUnAuthorizedResponseAuthenticationEntryPoint,\n            UserDetailsService databaseAuthUserDetailsService,\n            JwtTokenAuthorizationOncePerRequestFilter jwtAuthenticationTokenFilter\n    ) {\n        this.jwtUnAuthorizedResponseAuthenticationEntryPoint = jwtUnAuthorizedResponseAuthenticationEntryPoint;\n        this.databaseAuthUserDetailsService = databaseAuthUserDetailsService;\n        this.jwtAuthenticationTokenFilter = jwtAuthenticationTokenFilter;\n    }\n\n    @Autowired\n    public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception {\n        auth\n                .userDetailsService(databaseAuthUserDetailsService);\n    }\n\n    @Bean\n    @Override\n    public AuthenticationManager authenticationManagerBean() throws Exception {\n        return super.authenticationManagerBean();\n    }\n\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n\n    @Override\n    protected void configure(HttpSecurity httpSecurity) throws Exception {\n        httpSecurity\n                .httpBasic().disable()\n                .cors().and().csrf().disable()\n                .exceptionHandling().authenticationEntryPoint(jwtUnAuthorizedResponseAuthenticationEntryPoint).and()\n                .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\n                .authorizeRequests()\n                .antMatchers(\n                        HttpMethod.POST,\n                        &quot;/authenticate&quot;,\n                        &quot;/registerUser&quot;\n                ).permitAll()\n                .anyRequest().authenticated();\n\n        httpSecurity\n                .addFilterBefore(jwtAuthenticationTokenFilter, UsernamePasswordAuthenticationFilter.class);\n\n        httpSecurity\n                .headers()\n                .frameOptions().sameOrigin()  //H2 Console Needs this setting\n                .cacheControl(); //disable caching\n    }\n\n    @Override\n    public void configure(WebSecurity webSecurity) throws Exception {\n        webSecurity\n                .ignoring()\n                .antMatchers(\n                        HttpMethod.POST,\n                        &quot;/authenticate&quot;\n                )\n                .antMatchers(\n                        HttpMethod.POST,\n                        &quot;/registerUser&quot;\n                )\n                .antMatchers(HttpMethod.OPTIONS, &quot;/**&quot;)\n                .and()\n                .ignoring()\n                .antMatchers(\n                        HttpMethod.GET,\n                        &quot;/favicon.ico&quot;\n                )\n                .and()\n                .ignoring()\n                .antMatchers(\n                        HttpMethod.POST,\n                        &quot;/ws/**&quot;\n                )\n                .and()\n                .ignoring()\n                .antMatchers(\n                        HttpMethod.GET,\n                        &quot;/ws/**&quot;\n                )\n                .and()\n                .ignoring()\n                .antMatchers(\n                        HttpMethod.GET,\n                        &quot;/&quot;\n                )\n                .and()\n                .ignoring()\n                .antMatchers(&quot;/static/**&quot;)\n                .and()\n                .ignoring()\n                .antMatchers(&quot;/h2-console/**/**&quot;);//Should not be in Production!\n    }\n}\n\n</code></pre>\n<p><code>JwtTokenAuthorizationOncePerRequestFilter</code>:</p>\n<pre><code>package mh.michael.monopolybanking.security;\n\nimport io.jsonwebtoken.ExpiredJwtException;\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\nimport org.springframework.security.core.context.SecurityContextHolder;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.security.core.userdetails.UserDetailsService;\nimport org.springframework.security.web.authentication.WebAuthenticationDetailsSource;\nimport org.springframework.stereotype.Component;\nimport org.springframework.web.filter.OncePerRequestFilter;\n\nimport javax.servlet.FilterChain;\nimport javax.servlet.ServletException;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\nimport java.io.IOException;\n\n@Component\n@Slf4j\npublic class JwtTokenAuthorizationOncePerRequestFilter extends OncePerRequestFilter {\n    private final UserDetailsService databaseAuthUserDetailsService;\n    private final JwtTokenUtil jwtTokenUtil;\n\n    @Value(&quot;${jwt.http.request.header}&quot;)\n    private String tokenHeader;\n\n    public JwtTokenAuthorizationOncePerRequestFilter(\n            UserDetailsService databaseAuthUserDetailsService,\n            JwtTokenUtil jwtTokenUtil\n    ) {\n        this.databaseAuthUserDetailsService = databaseAuthUserDetailsService;\n        this.jwtTokenUtil = jwtTokenUtil;\n    }\n\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain chain) throws ServletException, IOException {\n        log.debug(&quot;Authentication Request For '{}'&quot;, request.getRequestURL());\n\n        final String requestTokenHeader = request.getHeader(this.tokenHeader);\n\n        String username = null;\n        String jwtToken = null;\n        if (requestTokenHeader != null &amp;&amp; requestTokenHeader.startsWith(&quot;Bearer &quot;)) {\n            jwtToken = requestTokenHeader.substring(7);\n            try {\n                username = jwtTokenUtil.getUsernameFromToken(jwtToken);\n            } catch (IllegalArgumentException e) {\n                log.error(&quot;JWT_TOKEN_UNABLE_TO_GET_USERNAME&quot;, e);\n            } catch (ExpiredJwtException e) {\n                log.warn(&quot;JWT_TOKEN_EXPIRED&quot;, e);\n            }\n        } else {\n            log.warn(&quot;JWT_TOKEN_DOES_NOT_START_WITH_BEARER_STRING&quot;);\n        }\n\n        log.debug(&quot;JWT_TOKEN_USERNAME_VALUE '{}'&quot;, username);\n        if (username != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null) {\n\n            UserDetails userDetails = this.databaseAuthUserDetailsService.loadUserByUsername(username);\n\n            if (jwtTokenUtil.validateToken(jwtToken, userDetails)) {\n                UsernamePasswordAuthenticationToken usernamePasswordAuthenticationToken = new UsernamePasswordAuthenticationToken(userDetails, null, userDetails.getAuthorities());\n                usernamePasswordAuthenticationToken.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\n                SecurityContextHolder.getContext().setAuthentication(usernamePasswordAuthenticationToken);\n            }\n        }\n\n        chain.doFilter(request, response);\n    }\n}\n</code></pre>\n<p><code>DatabaseAuthUserDetailsService</code>:</p>\n<pre><code>package mh.michael.monopolybanking.security;\n\nimport lombok.extern.slf4j.Slf4j;\nimport mh.michael.monopolybanking.model.User;\nimport mh.michael.monopolybanking.repository.UserRepository;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.security.core.userdetails.UserDetailsService;\nimport org.springframework.security.core.userdetails.UsernameNotFoundException;\nimport org.springframework.stereotype.Service;\n\n@Service\n@Slf4j\npublic class DatabaseAuthUserDetailsService implements UserDetailsService {\n    private final UserRepository userRepository;\n\n    public DatabaseAuthUserDetailsService(UserRepository userRepository) {\n        this.userRepository = userRepository;\n    }\n\n    @Override\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\n        User user = userRepository.findByUsername(username)\n                .orElseThrow(() -&gt; new UsernameNotFoundException(&quot;User Not Found with username: &quot; + username));\n\n        return JwtUserDetails.build(user);\n    }\n}\n</code></pre>\n<p><code>JwtTokenAuthorizationOncePerRequestFilter</code>:</p>\n<pre><code>package mh.michael.monopolybanking.security;\n\nimport io.jsonwebtoken.ExpiredJwtException;\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\nimport org.springframework.security.core.context.SecurityContextHolder;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.security.core.userdetails.UserDetailsService;\nimport org.springframework.security.web.authentication.WebAuthenticationDetailsSource;\nimport org.springframework.stereotype.Component;\nimport org.springframework.web.filter.OncePerRequestFilter;\n\nimport javax.servlet.FilterChain;\nimport javax.servlet.ServletException;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\nimport java.io.IOException;\n\n@Component\n@Slf4j\npublic class JwtTokenAuthorizationOncePerRequestFilter extends OncePerRequestFilter {\n    private final UserDetailsService databaseAuthUserDetailsService;\n    private final JwtTokenUtil jwtTokenUtil;\n\n    @Value(&quot;${jwt.http.request.header}&quot;)\n    private String tokenHeader;\n\n    public JwtTokenAuthorizationOncePerRequestFilter(\n            UserDetailsService databaseAuthUserDetailsService,\n            JwtTokenUtil jwtTokenUtil\n    ) {\n        this.databaseAuthUserDetailsService = databaseAuthUserDetailsService;\n        this.jwtTokenUtil = jwtTokenUtil;\n    }\n\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain chain) throws ServletException, IOException {\n        log.debug(&quot;Authentication Request For '{}'&quot;, request.getRequestURL());\n\n        final String requestTokenHeader = request.getHeader(this.tokenHeader);\n\n        String username = null;\n        String jwtToken = null;\n        if (requestTokenHeader != null &amp;&amp; requestTokenHeader.startsWith(&quot;Bearer &quot;)) {\n            jwtToken = requestTokenHeader.substring(7);\n            try {\n                username = jwtTokenUtil.getUsernameFromToken(jwtToken);\n            } catch (IllegalArgumentException e) {\n                log.error(&quot;JWT_TOKEN_UNABLE_TO_GET_USERNAME&quot;, e);\n            } catch (ExpiredJwtException e) {\n                log.warn(&quot;JWT_TOKEN_EXPIRED&quot;, e);\n            }\n        } else {\n            log.warn(&quot;JWT_TOKEN_DOES_NOT_START_WITH_BEARER_STRING&quot;);\n        }\n\n        log.debug(&quot;JWT_TOKEN_USERNAME_VALUE '{}'&quot;, username);\n        if (username != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null) {\n\n            UserDetails userDetails = this.databaseAuthUserDetailsService.loadUserByUsername(username);\n\n            if (jwtTokenUtil.validateToken(jwtToken, userDetails)) {\n                UsernamePasswordAuthenticationToken usernamePasswordAuthenticationToken = new UsernamePasswordAuthenticationToken(userDetails, null, userDetails.getAuthorities());\n                usernamePasswordAuthenticationToken.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\n                SecurityContextHolder.getContext().setAuthentication(usernamePasswordAuthenticationToken);\n            }\n        }\n\n        chain.doFilter(request, response);\n    }\n}\n</code></pre>\n<p>This is my controller for registering new users and authentication (<code>JwtAuthenticationRestController</code>):</p>\n<pre><code>package mh.michael.monopolybanking.controller;\n\nimport mh.michael.monopolybanking.dto.NewUserRequestDTO;\nimport mh.michael.monopolybanking.dto.UserDTO;\nimport mh.michael.monopolybanking.exceptions.AuthenticationException;\nimport mh.michael.monopolybanking.security.JwtTokenRequest;\nimport mh.michael.monopolybanking.security.JwtTokenResponse;\nimport mh.michael.monopolybanking.security.JwtTokenUtil;\nimport mh.michael.monopolybanking.service.UserService;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.security.authentication.AuthenticationManager;\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\nimport org.springframework.security.core.Authentication;\nimport org.springframework.security.core.context.SecurityContextHolder;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.security.core.userdetails.UserDetailsService;\nimport org.springframework.web.bind.annotation.*;\n\nimport javax.servlet.http.HttpServletRequest;\n\n@RestController\n@CrossOrigin(origins={ &quot;http://localhost:3000&quot;, &quot;http://localhost:8080&quot; })\npublic class JwtAuthenticationRestController {\n    @Value(&quot;${jwt.http.request.header}&quot;)\n    private String tokenHeader;\n\n    private final JwtTokenUtil jwtTokenUtil;\n    private final UserDetailsService databaseAuthUserDetailsService;\n    private final AuthenticationManager authenticationManager;\n    private final UserService userService;\n\n    public JwtAuthenticationRestController(\n            JwtTokenUtil jwtTokenUtil,\n            UserDetailsService databaseAuthUserDetailsService,\n            AuthenticationManager authenticationManager,\n            UserService userService\n    ) {\n        this.jwtTokenUtil = jwtTokenUtil;\n        this.databaseAuthUserDetailsService = databaseAuthUserDetailsService;\n        this.authenticationManager = authenticationManager;\n        this.userService = userService;\n    }\n\n    @PostMapping(value = &quot;/authenticate&quot;)\n    public ResponseEntity&lt;?&gt; createAuthenticationToken(@RequestBody JwtTokenRequest authenticationRequest)\n            throws AuthenticationException {\n        Authentication authentication = authenticationManager.authenticate(\n                new UsernamePasswordAuthenticationToken(authenticationRequest.getUsername(), authenticationRequest.getPassword()));\n\n        SecurityContextHolder.getContext().setAuthentication(authentication);\n\n        final UserDetails userDetails = (UserDetails) authentication.getPrincipal();\n        final String token = jwtTokenUtil.generateToken(userDetails);\n        return ResponseEntity.ok(new JwtTokenResponse(token));\n    }\n\n    @PostMapping(value = &quot;/refresh&quot;)\n    public ResponseEntity&lt;?&gt; refreshAndGetAuthenticationToken(HttpServletRequest request) {\n        String authToken = request.getHeader(tokenHeader);\n        final String token = authToken.substring(7);\n\n        if (jwtTokenUtil.canTokenBeRefreshed(token)) {\n            String refreshedToken = jwtTokenUtil.refreshToken(token);\n            return ResponseEntity.ok(new JwtTokenResponse(refreshedToken));\n        } else {\n            return ResponseEntity.badRequest().body(null);\n        }\n    }\n\n    @PostMapping(value = &quot;/registerUser&quot;)\n    public UserDTO registerNewUser(@RequestBody NewUserRequestDTO newUserRequestDTO) {\n        return userService.createNewUser(newUserRequestDTO);\n    }\n\n    @ExceptionHandler({ AuthenticationException.class })\n    public ResponseEntity&lt;String&gt; handleAuthenticationException(AuthenticationException e) {\n        return ResponseEntity.status(HttpStatus.UNAUTHORIZED).body(e.getMessage());\n    }\n}\n</code></pre>\n<p>The complete code I have so far can be found here: <a href=\"https://github.com/compumike08/monopoly-banking\" rel=\"nofollow noreferrer\">https://github.com/compumike08/monopoly-banking</a>. Note that the front-end code I have written so far doesn't have registerUser or authenticate pages yet, so I've been using Postman to call the backend endpoints directly for testing.</p>\n"},{"tags":["java","arrays","sorting"],"comments":[{"owner":{"account_id":2172,"reputation":364880,"user_id":2988,"display_name":"J&#246;rg W Mittag"},"score":2,"creation_date":1691601301,"post_id":76869936,"comment_id":135514885,"body_markdown":"&quot;doesn&#39;t work properly&quot; is not a precise enough problem description for us to help you. *What* doesn&#39;t work? *How* doesn&#39;t it work? What trouble do you have with your code? Do you get an error message? What is the error message? Is the result you are getting not the result you are expecting? What result do you expect and why, what is the result you are getting and how do the two differ? Is the behavior you are observing not the desired behavior? What is the desired behavior and why, what is the observed behavior, and in what way do they differ?","body":"&quot;doesn&#39;t work properly&quot; is not a precise enough problem description for us to help you. <i>What</i> doesn&#39;t work? <i>How</i> doesn&#39;t it work? What trouble do you have with your code? Do you get an error message? What is the error message? Is the result you are getting not the result you are expecting? What result do you expect and why, what is the result you are getting and how do the two differ? Is the behavior you are observing not the desired behavior? What is the desired behavior and why, what is the observed behavior, and in what way do they differ?"},{"owner":{"account_id":2172,"reputation":364880,"user_id":2988,"display_name":"J&#246;rg W Mittag"},"score":1,"creation_date":1691601316,"post_id":76869936,"comment_id":135514892,"body_markdown":"https://idownvotedbecau.se/itsnotworking/ https://idownvotedbecau.se/noexceptiondetails/","body":"<a href=\"https://idownvotedbecau.se/itsnotworking/\" rel=\"nofollow noreferrer\">idownvotedbecau.se/itsnotworking</a> <a href=\"https://idownvotedbecau.se/noexceptiondetails/\" rel=\"nofollow noreferrer\">idownvotedbecau.se/noexceptiondetails</a>"},{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":2,"creation_date":1691601618,"post_id":76869936,"comment_id":135514939,"body_markdown":"Simplify your algorithm, no need for nested loops, one is enough. Assign appropriate initial values to min and max, `Integer` has useful constants for this case. Rethink your `if-else` condition, it&#39;s clearly wrong.","body":"Simplify your algorithm, no need for nested loops, one is enough. Assign appropriate initial values to min and max, <code>Integer</code> has useful constants for this case. Rethink your <code>if-else</code> condition, it&#39;s clearly wrong."},{"owner":{"account_id":29193687,"reputation":9,"user_id":22365307,"display_name":"jacki"},"score":0,"creation_date":1691601638,"post_id":76869936,"comment_id":135514941,"body_markdown":"when i compile it, the results are: Max: 4 Min: 4, but i want the result to be Min:1 and Max 5","body":"when i compile it, the results are: Max: 4 Min: 4, but i want the result to be Min:1 and Max 5"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1691603344,"post_id":76869936,"comment_id":135515242,"body_markdown":"If you want to regularly create software, you should develop debugging skills. If you want to become a professional, debugging will be a *necessary* skill. Questions on Stack Overflow that are about bugs will receive more interest and support if the question describes attempts to resolve the issue or find bugs. https://www.google.com/search?q=how+to+debug+small+programs  A debugger is a useful tool for problems like this. A debugger allows you to set a breakpoint, at which execution of the program stops. You can then proceed one-line-at-a-time, and monitor the value of the variables.","body":"If you want to regularly create software, you should develop debugging skills. If you want to become a professional, debugging will be a <i>necessary</i> skill. Questions on Stack Overflow that are about bugs will receive more interest and support if the question describes attempts to resolve the issue or find bugs. <a href=\"https://www.google.com/search?q=how+to+debug+small+programs\" rel=\"nofollow noreferrer\">google.com/search?q=how+to+debug+small+programs</a>  A debugger is a useful tool for problems like this. A debugger allows you to set a breakpoint, at which execution of the program stops. You can then proceed one-line-at-a-time, and monitor the value of the variables."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1691604588,"post_id":76869936,"comment_id":135515438,"body_markdown":"*&quot;when i compile it, the results are: Max: 4 Min: 4, but i want the result to be Min:1 and Max 5&quot;* -- That information should be in the question body. Please edit the question to add it there.","body":"<i>&quot;when i compile it, the results are: Max: 4 Min: 4, but i want the result to be Min:1 and Max 5&quot;</i> -- That information should be in the question body. Please edit the question to add it there."}],"answers":[{"tags":[],"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691601578,"creation_date":1691601578,"answer_id":76869998,"question_id":76869936,"body_markdown":"In your code, you&#39;re initializing `min` and `max` both to 0. This will cause problems if all the numbers in the array are positive because 0 is smaller than any positive number.\r\n\r\nThe logic you&#39;ve used inside the nested loop is not correct, however, you should be comparing the current element of the array with `min` and `max`.                  \r\n\r\nYou can do it this way:\r\n\r\n```java\r\npublic class Solution {\r\n    public static void main(String[] args) {\r\n        int[] tab = { 3, 2, 1, 5, 4 };\r\n        int min = Integer.MAX_VALUE; // Initialize min to a large value\r\n        int max = Integer.MIN_VALUE; // Initialize max to a small value\r\n        \r\n        for (int i = 0; i &lt; tab.length; i++) {\r\n            if (tab[i] &lt; min) {\r\n                min = tab[i];\r\n            }\r\n            if (tab[i] &gt; max) {\r\n                max = tab[i];\r\n            }\r\n        }\r\n\r\n        System.out.println(&quot;Max: &quot; + max + &quot; Min: &quot; + min);\r\n    }\r\n}\r\n```","title":"Error in a Java program that displays the minimum and maximum elements of an array","body":"<p>In your code, you're initializing <code>min</code> and <code>max</code> both to 0. This will cause problems if all the numbers in the array are positive because 0 is smaller than any positive number.</p>\n<p>The logic you've used inside the nested loop is not correct, however, you should be comparing the current element of the array with <code>min</code> and <code>max</code>.</p>\n<p>You can do it this way:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Solution {\n    public static void main(String[] args) {\n        int[] tab = { 3, 2, 1, 5, 4 };\n        int min = Integer.MAX_VALUE; // Initialize min to a large value\n        int max = Integer.MIN_VALUE; // Initialize max to a small value\n        \n        for (int i = 0; i &lt; tab.length; i++) {\n            if (tab[i] &lt; min) {\n                min = tab[i];\n            }\n            if (tab[i] &gt; max) {\n                max = tab[i];\n            }\n        }\n\n        System.out.println(&quot;Max: &quot; + max + &quot; Min: &quot; + min);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":29193687,"reputation":9,"user_id":22365307,"display_name":"jacki"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"closed_date":1691602185,"answer_count":1,"score":-2,"last_activity_date":1691657205,"creation_date":1691601000,"question_id":76869936,"body_markdown":"I&#39;m supposed to display the minimum and maximum elements of an array, butthis code doesn&#39;t work properly and i couldn&#39;t find the problem. any suggestions !\r\n\r\n```java\r\npublic class Solution {\r\n\tpublic static void main(String[] args) {\r\n\t\tint[] tab = { 3, 2, 1, 5, 4 };\r\n\t\tint temp = 0;\r\n\t\tint min = 0;\r\n\t\tint max = 0;\r\n\t\tfor (int i = 0; i &lt; tab.length; i++) {\r\n\t\t\ttemp = tab[i]; // 3\r\n\t\t\tfor (int j = 0; j &lt; tab.length; j++) {\r\n\t\t\t\tif (temp &lt; tab[j]) { // 3 &lt; 3\r\n\r\n\t\t\t\t\tmin = temp; // 1\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmax = temp; // 3\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tSystem.out.println(&quot;Max: &quot; + max + &quot; Min: &quot; + min);\r\n\t}\r\n}\r\n```","title":"Error in a Java program that displays the minimum and maximum elements of an array","body":"<p>I'm supposed to display the minimum and maximum elements of an array, butthis code doesn't work properly and i couldn't find the problem. any suggestions !</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Solution {\n    public static void main(String[] args) {\n        int[] tab = { 3, 2, 1, 5, 4 };\n        int temp = 0;\n        int min = 0;\n        int max = 0;\n        for (int i = 0; i &lt; tab.length; i++) {\n            temp = tab[i]; // 3\n            for (int j = 0; j &lt; tab.length; j++) {\n                if (temp &lt; tab[j]) { // 3 &lt; 3\n\n                    min = temp; // 1\n\n                } else {\n                    max = temp; // 3\n                }\n            }\n        }\n        System.out.println(&quot;Max: &quot; + max + &quot; Min: &quot; + min);\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","postgresql","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":1022086,"reputation":14601,"user_id":1032167,"accept_rate":50,"display_name":"varren"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1505956189,"creation_date":1505956189,"answer_id":46333865,"question_id":46333810,"body_markdown":"Use `import javax.persistence.Id;`, not ` org.springframework.data.annotation.Id;`","title":"Error with entity in Spring Boot / Java application","body":"<p>Use <code>import javax.persistence.Id;</code>, not <code>org.springframework.data.annotation.Id;</code></p>\n"},{"tags":[],"owner":{"account_id":23097518,"reputation":1,"user_id":17207388,"display_name":"Canon 505"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691657191,"creation_date":1691396162,"answer_id":76849909,"question_id":46333810,"body_markdown":"Working with maven.\r\n\r\n 1. In pom.xml under dependences place:\r\n\t\r\n```xml\r\n&lt;dependency&gt;\r\n        &lt;groupId&gt;javax.persistence&lt;/groupId&gt;\r\n        &lt;artifactId&gt;javax.persistence-api&lt;/artifactId&gt;\r\n        &lt;version&gt;2.2&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\n 2. Import the dependency in your project by:\r\n\r\n```java\r\nimport javax.persistence.Entity;\r\n```\r\n\r\n","title":"Error with entity in Spring Boot / Java application","body":"<p>Working with maven.</p>\n<ol>\n<li>In pom.xml under dependences place:</li>\n</ol>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n        &lt;groupId&gt;javax.persistence&lt;/groupId&gt;\n        &lt;artifactId&gt;javax.persistence-api&lt;/artifactId&gt;\n        &lt;version&gt;2.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<ol start=\"2\">\n<li>Import the dependency in your project by:</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>import javax.persistence.Entity;\n</code></pre>\n"}],"owner":{"account_id":6309439,"reputation":321,"user_id":5385471,"display_name":"Fernando Barbosa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2400,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":46333865,"answer_count":2,"score":0,"last_activity_date":1691657191,"creation_date":1505955581,"question_id":46333810,"body_markdown":"I have a class with all annotations needed for comunication with database. I&#39;m using Postgres as database.\r\n\r\nHere is the class in Java:\r\n\r\n    package com.prave.demo.model;\r\n    \r\n    import java.io.Serializable;\r\n    \r\n    import javax.persistence.Column;\r\n    import javax.persistence.Entity;\r\n    import javax.persistence.GeneratedValue;\r\n    import javax.persistence.GenerationType;\r\n    import javax.persistence.SequenceGenerator;\r\n    \r\n    import org.hibernate.validator.constraints.NotBlank;\r\n    import org.springframework.data.annotation.Id;\r\n    \r\n    @Entity(name = &quot;fabricante&quot;)\r\n    public class Fabricante implements Serializable {\r\n    \tprivate static long serialVersionUID = 1L;\r\n    \r\n    \t@Id\r\n        @SequenceGenerator(name = &quot;fabricante_seq&quot;, sequenceName = &quot;fabricante_seq&quot;)\r\n        @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;fabricante_seq&quot;)\r\n    \tprivate long idFabricante;\r\n    \t\r\n    \t@Column(nullable = false, length = 70)\r\n        @NotBlank(message = &quot;Nome &#233; uma informa&#231;&#227;o obrigat&#243;ria.&quot;)\r\n        private String nome;\r\n    \r\n        //getters and setters omited\r\n    }\r\n\r\nAnd here is the stack:\r\n\r\n    org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;entityManagerFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaAutoConfiguration.class]: Invocation of init method failed; nested exception is org.hibernate.AnnotationException: No identifier specified for entity: com.prave.demo.model.Fabricante\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1589) ~[spring-beans-4.3.5.RELEASE.jar:4.3.5.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:554) ~[spring-beans-4.3.5.RELEASE.jar:4.3.5.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:483) ~[spring-beans-4.3.5.RELEASE.jar:4.3.5.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306) ~[spring-beans-4.3.5.RELEASE.jar:4.3.5.RELEASE]\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230) ~[spring-beans-4.3.5.RELEASE.jar:4.3.5.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302) ~[spring-beans-4.3.5.RELEASE.jar:4.3.5.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197) ~[spring-beans-4.3.5.RELEASE.jar:4.3.5.RELEASE]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1081) ~[spring-context-4.3.5.RELEASE.jar:4.3.5.RELEASE]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:856) ~[spring-context-4.3.5.RELEASE.jar:4.3.5.RELEASE]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:542) ~[spring-context-4.3.5.RELEASE.jar:4.3.5.RELEASE]\r\n    \tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:122) ~[spring-boot-1.4.3.RELEASE.jar:1.4.3.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:761) [spring-boot-1.4.3.RELEASE.jar:1.4.3.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:371) [spring-boot-1.4.3.RELEASE.jar:1.4.3.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:315) [spring-boot-1.4.3.RELEASE.jar:1.4.3.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1186) [spring-boot-1.4.3.RELEASE.jar:1.4.3.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1175) [spring-boot-1.4.3.RELEASE.jar:1.4.3.RELEASE]\r\n    \tat com.prave.demo.DemoApplication.main(DemoApplication.java:10) [classes/:na]\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_131]\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) ~[na:1.8.0_131]\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) ~[na:1.8.0_131]\r\n    \tat java.lang.reflect.Method.invoke(Unknown Source) ~[na:1.8.0_131]\r\n    \tat org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49) [spring-boot-devtools-1.4.3.RELEASE.jar:1.4.3.RELEASE]\r\n\r\nDatabase is created and connected. The table and columns are created too. \r\n\r\n","title":"Error with entity in Spring Boot / Java application","body":"<p>I have a class with all annotations needed for comunication with database. I'm using Postgres as database.</p>\n\n<p>Here is the class in Java:</p>\n\n<pre><code>package com.prave.demo.model;\n\nimport java.io.Serializable;\n\nimport javax.persistence.Column;\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.SequenceGenerator;\n\nimport org.hibernate.validator.constraints.NotBlank;\nimport org.springframework.data.annotation.Id;\n\n@Entity(name = \"fabricante\")\npublic class Fabricante implements Serializable {\n    private static long serialVersionUID = 1L;\n\n    @Id\n    @SequenceGenerator(name = \"fabricante_seq\", sequenceName = \"fabricante_seq\")\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = \"fabricante_seq\")\n    private long idFabricante;\n\n    @Column(nullable = false, length = 70)\n    @NotBlank(message = \"Nome é uma informação obrigatória.\")\n    private String nome;\n\n    //getters and setters omited\n}\n</code></pre>\n\n<p>And here is the stack:</p>\n\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaAutoConfiguration.class]: Invocation of init method failed; nested exception is org.hibernate.AnnotationException: No identifier specified for entity: com.prave.demo.model.Fabricante\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1589) ~[spring-beans-4.3.5.RELEASE.jar:4.3.5.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:554) ~[spring-beans-4.3.5.RELEASE.jar:4.3.5.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:483) ~[spring-beans-4.3.5.RELEASE.jar:4.3.5.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306) ~[spring-beans-4.3.5.RELEASE.jar:4.3.5.RELEASE]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230) ~[spring-beans-4.3.5.RELEASE.jar:4.3.5.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302) ~[spring-beans-4.3.5.RELEASE.jar:4.3.5.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197) ~[spring-beans-4.3.5.RELEASE.jar:4.3.5.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1081) ~[spring-context-4.3.5.RELEASE.jar:4.3.5.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:856) ~[spring-context-4.3.5.RELEASE.jar:4.3.5.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:542) ~[spring-context-4.3.5.RELEASE.jar:4.3.5.RELEASE]\n    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:122) ~[spring-boot-1.4.3.RELEASE.jar:1.4.3.RELEASE]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:761) [spring-boot-1.4.3.RELEASE.jar:1.4.3.RELEASE]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:371) [spring-boot-1.4.3.RELEASE.jar:1.4.3.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:315) [spring-boot-1.4.3.RELEASE.jar:1.4.3.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1186) [spring-boot-1.4.3.RELEASE.jar:1.4.3.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1175) [spring-boot-1.4.3.RELEASE.jar:1.4.3.RELEASE]\n    at com.prave.demo.DemoApplication.main(DemoApplication.java:10) [classes/:na]\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_131]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) ~[na:1.8.0_131]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) ~[na:1.8.0_131]\n    at java.lang.reflect.Method.invoke(Unknown Source) ~[na:1.8.0_131]\n    at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49) [spring-boot-devtools-1.4.3.RELEASE.jar:1.4.3.RELEASE]\n</code></pre>\n\n<p>Database is created and connected. The table and columns are created too. </p>\n"},{"tags":["java","libgdx","scene2d","freetype"],"answers":[{"tags":[],"owner":{"account_id":6751434,"reputation":101,"user_id":5201317,"display_name":"Anubitum"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1526548859,"creation_date":1526548859,"answer_id":50387796,"question_id":45227586,"body_markdown":"You need to add font before loading the rest of the widgets.\r\n\r\nTry to first create the skin, before loading the VisUI. Then add the font, atlas and json file. Then load the generated skin with VisUI.\r\n\r\n\r\n\t\tSkin skn = new Skin();\r\n\t\tskn.add(&quot;default-font&quot;, font12, BitmapFont.class);\r\n\t\t \r\n\t\tskn.addRegions(new TextureAtlas(Gdx.files.internal((&quot;x1/uiskin.atlas&quot;))));\r\n\t\tskn.load(Gdx.files.internal(&quot;x1/uiskin.json&quot;));\r\n\t\tVisUI.load(skn);\r\n\r\nIn skin json file remove (since you will be adding it trough code):\r\n\r\n    com.badlogic.gdx.graphics.g2d.BitmapFont: {\r\n\tdefault-font: {file: default.fnt }},","title":"Libgdx - Changing Vis UI font using Scene 2d doesn&#39;t work, is there an alternative?","body":"<p>You need to add font before loading the rest of the widgets.</p>\n\n<p>Try to first create the skin, before loading the VisUI. Then add the font, atlas and json file. Then load the generated skin with VisUI.</p>\n\n<pre><code>    Skin skn = new Skin();\n    skn.add(\"default-font\", font12, BitmapFont.class);\n\n    skn.addRegions(new TextureAtlas(Gdx.files.internal((\"x1/uiskin.atlas\"))));\n    skn.load(Gdx.files.internal(\"x1/uiskin.json\"));\n    VisUI.load(skn);\n</code></pre>\n\n<p>In skin json file remove (since you will be adding it trough code):</p>\n\n<pre><code>com.badlogic.gdx.graphics.g2d.BitmapFont: {\ndefault-font: {file: default.fnt }},\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1274370,"reputation":913,"user_id":1229913,"display_name":"axlan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1576222698,"creation_date":1576222698,"answer_id":59318104,"question_id":45227586,"body_markdown":"After going back to https://stackoverflow.com/questions/24856201/putting-freetypefont-into-libgdx-skin the only solution that worked for me was using an AssetManager. For example:\r\n\r\n    AssetManager assetManager = new AssetManager();\r\n    ObjectMap&lt;String, Object&gt; fontMap = new ObjectMap&lt;String, Object&gt;();\r\n    fontMap.put(&quot;default-font&quot;, myNewFont);\r\n    SkinLoader.SkinParameter parameter = new SkinLoader.SkinParameter(fontMap);\r\n    assetManager.load(&quot;skins/basic/uiskin.json&quot;, Skin.class, parameter);\r\n    assetManager.finishLoading();\r\n    VisUI.load(assetManager.get(&quot;skins/basic/uiskin.json&quot;, Skin.class));","title":"Libgdx - Changing Vis UI font using Scene 2d doesn&#39;t work, is there an alternative?","body":"<p>After going back to <a href=\"https://stackoverflow.com/questions/24856201/putting-freetypefont-into-libgdx-skin\">Putting Freetypefont into libgdx skin</a> the only solution that worked for me was using an AssetManager. For example:</p>\n\n<pre><code>AssetManager assetManager = new AssetManager();\nObjectMap&lt;String, Object&gt; fontMap = new ObjectMap&lt;String, Object&gt;();\nfontMap.put(\"default-font\", myNewFont);\nSkinLoader.SkinParameter parameter = new SkinLoader.SkinParameter(fontMap);\nassetManager.load(\"skins/basic/uiskin.json\", Skin.class, parameter);\nassetManager.finishLoading();\nVisUI.load(assetManager.get(\"skins/basic/uiskin.json\", Skin.class));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":956143,"reputation":89,"user_id":981408,"accept_rate":60,"display_name":"winrid"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691656744,"creation_date":1691656744,"answer_id":76873996,"question_id":45227586,"body_markdown":"It seems like the font does not get overridden if it&#39;s already in the font file. So, copy the visui skin assets into your &quot;assets&quot; folder (uiskin.json, uiskin.atlas, uiskin.png).\r\n\r\nYou can find these via fuzzy search in your IDE. You&#39;ll probably want to customize them later anyway.\r\n\r\nThen remove the font definition (the whole block) from the top of uiskin.json.\r\n\r\nHere&#39;s a working example. You&#39;ll probably want to tune the density stuff a bit:\r\n\r\n        AssetManager assetManager = new AssetManager();\r\n        ObjectMap&lt;String, Object&gt; fontMap = new ObjectMap&lt;&gt;();\r\n\r\n        FreeTypeFontGenerator fontGenerator = new FreeTypeFontGenerator(Gdx.files.internal(&quot;Roboto-Regular.ttf&quot;));\r\n        FreeTypeFontGenerator.FreeTypeFontParameter fontParameter = new FreeTypeFontGenerator.FreeTypeFontParameter();\r\n\r\n        int size = (int) (20 * Gdx.graphics.getDensity());\r\n        fontParameter.size = size;\r\n        fontParameter.color = new Color(1, 1, 1, 1);\r\n        fontParameter.genMipMaps = true;\r\n        fontParameter.magFilter = Texture.TextureFilter.Nearest;\r\n        fontParameter.minFilter = Texture.TextureFilter.MipMap;\r\n\r\n        fontGenerator.scaleForPixelHeight(size);\r\n        BitmapFont font = fontGenerator.generateFont(fontParameter);\r\n\r\n        fontMap.put(&quot;default-font&quot;, font);\r\n        fontMap.put(&quot;small-font&quot;, font);\r\n\r\n        SkinLoader.SkinParameter parameter = new SkinLoader.SkinParameter(fontMap);\r\n        assetManager.load(Gdx.files.internal(&quot;uiskin.json&quot;).path(), Skin.class, parameter);\r\n        assetManager.finishLoading();\r\n        VisUI.load(assetManager.get(Gdx.files.internal(&quot;uiskin.json&quot;).path(), Skin.class));\r\n\r\nI found that many of the examples on SO did not work, so here you! :)\r\n\r\nYou&#39;ll also probably want to generate different fonts for default vs small font. Here I use the same one for both for brevity.\r\n","title":"Libgdx - Changing Vis UI font using Scene 2d doesn&#39;t work, is there an alternative?","body":"<p>It seems like the font does not get overridden if it's already in the font file. So, copy the visui skin assets into your &quot;assets&quot; folder (uiskin.json, uiskin.atlas, uiskin.png).</p>\n<p>You can find these via fuzzy search in your IDE. You'll probably want to customize them later anyway.</p>\n<p>Then remove the font definition (the whole block) from the top of uiskin.json.</p>\n<p>Here's a working example. You'll probably want to tune the density stuff a bit:</p>\n<pre><code>    AssetManager assetManager = new AssetManager();\n    ObjectMap&lt;String, Object&gt; fontMap = new ObjectMap&lt;&gt;();\n\n    FreeTypeFontGenerator fontGenerator = new FreeTypeFontGenerator(Gdx.files.internal(&quot;Roboto-Regular.ttf&quot;));\n    FreeTypeFontGenerator.FreeTypeFontParameter fontParameter = new FreeTypeFontGenerator.FreeTypeFontParameter();\n\n    int size = (int) (20 * Gdx.graphics.getDensity());\n    fontParameter.size = size;\n    fontParameter.color = new Color(1, 1, 1, 1);\n    fontParameter.genMipMaps = true;\n    fontParameter.magFilter = Texture.TextureFilter.Nearest;\n    fontParameter.minFilter = Texture.TextureFilter.MipMap;\n\n    fontGenerator.scaleForPixelHeight(size);\n    BitmapFont font = fontGenerator.generateFont(fontParameter);\n\n    fontMap.put(&quot;default-font&quot;, font);\n    fontMap.put(&quot;small-font&quot;, font);\n\n    SkinLoader.SkinParameter parameter = new SkinLoader.SkinParameter(fontMap);\n    assetManager.load(Gdx.files.internal(&quot;uiskin.json&quot;).path(), Skin.class, parameter);\n    assetManager.finishLoading();\n    VisUI.load(assetManager.get(Gdx.files.internal(&quot;uiskin.json&quot;).path(), Skin.class));\n</code></pre>\n<p>I found that many of the examples on SO did not work, so here you! :)</p>\n<p>You'll also probably want to generate different fonts for default vs small font. Here I use the same one for both for brevity.</p>\n"}],"owner":{"account_id":5845072,"reputation":1689,"user_id":4605456,"accept_rate":70,"display_name":"Fish"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":998,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1691656744,"creation_date":1500600667,"question_id":45227586,"body_markdown":"I am currently using Scene 2d to create some user interface for this libgdx app I am making. I found [Vis UI][1] and realized that it would work out pretty well. Everything is fine except for the font.\r\n\r\nSince, Vis UI is made on Scene 2d, I attempted to use the mothods descriped [here][2], to change the font. \r\n\r\nI tried the simple answer (which was also marked correct)\r\n\r\n            Skin skin = VisUI.getSkin();\r\n            VisUI.dispose(false);\r\n            FreeTypeFontGenerator generator = new FreeTypeFontGenerator(Gdx.files.internal(&quot;customText.ttf&quot;));\r\n            FreeTypeFontGenerator.FreeTypeFontParameter parameter = new FreeTypeFontGenerator.FreeTypeFontParameter();\r\n        parameter.size = 14;\r\n            skin.add(&quot;default-font&quot;, generator.generateFont(parameter), BitmapFont.class);\r\n            skin.add(&quot;small-font&quot;, generator.generateFont(parameter), BitmapFont.class);\r\n            VisUI.load(skin);\r\n\r\nThen I tried the more complex answer\r\n        \r\n        VisUI.dispose(true);\r\n\r\n        FreeTypeFontGenerator generator = new FreeTypeFontGenerator(Gdx.files.internal(&quot;customText.ttf&quot;));\r\n        FreeTypeFontGenerator.FreeTypeFontParameter parameter = new FreeTypeFontGenerator.FreeTypeFontParameter();\r\n        parameter.size = 14;\r\n\r\n        ObjectMap&lt;String, Object&gt; fontMap = new ObjectMap&lt;String, Object&gt;();\r\n        fontMap.put(&quot;default-font&quot;, generator.generateFont(parameter));\r\n        fontMap.put(&quot;small-font&quot;, generator.generateFont(parameter));\r\n\r\n        SkinLoader.SkinParameter par = new SkinLoader.SkinParameter(fontMap);\r\n\r\n        assets.load(VisUI.SkinScale.X1.getSkinFile().path(), Skin.class, par);\r\n        assets.finishLoading();\r\n\r\n        Skin skin = assets.get(VisUI.SkinScale.X1.getSkinFile().path());\r\n        VisUI.load(skin);\r\n\r\n\r\nNone of the two methods actually made a difference with the `ScrollableTextArea`\r\n\r\nThe previous code was placed in the constructor while  I made sure that I created my `VisWindow` after changes to VisUI since I place the window creation in the `show()` method in libgdx&#39;s Screen interface.\r\n\r\nInside the `VisWindow` it is basially the following items and thats it.\r\n\r\n        textArea = new ScrollableTextArea(&quot;...&quot;);\r\n\r\n        VisTable table = new VisTable();\r\n\r\n        VisScrollPane scrollPane = new VisScrollPane(table);\r\n        scrollPane.setFlickScroll(false);\r\n        scrollPane.setFadeScrollBars(false);\r\n\r\n        add(textArea.createCompatibleScrollPane()).growX().growY().row();\r\n\r\nI don&#39;t get what I did wrong. Am I not supposed to use Scene2d to change the font? Or did I forget something somewhere. \r\n\r\nAny suggestion is welcome. Thanks in advance.\r\n\r\n  [1]: https://github.com/kotcrab/vis-editor/wiki/VisUI\r\n  [2]: https://stackoverflow.com/questions/24856201/putting-freetypefont-into-libgdx-skin","title":"Libgdx - Changing Vis UI font using Scene 2d doesn&#39;t work, is there an alternative?","body":"<p>I am currently using Scene 2d to create some user interface for this libgdx app I am making. I found <a href=\"https://github.com/kotcrab/vis-editor/wiki/VisUI\" rel=\"nofollow noreferrer\">Vis UI</a> and realized that it would work out pretty well. Everything is fine except for the font.</p>\n\n<p>Since, Vis UI is made on Scene 2d, I attempted to use the mothods descriped <a href=\"https://stackoverflow.com/questions/24856201/putting-freetypefont-into-libgdx-skin\">here</a>, to change the font. </p>\n\n<p>I tried the simple answer (which was also marked correct)</p>\n\n<pre><code>        Skin skin = VisUI.getSkin();\n        VisUI.dispose(false);\n        FreeTypeFontGenerator generator = new FreeTypeFontGenerator(Gdx.files.internal(\"customText.ttf\"));\n        FreeTypeFontGenerator.FreeTypeFontParameter parameter = new FreeTypeFontGenerator.FreeTypeFontParameter();\n    parameter.size = 14;\n        skin.add(\"default-font\", generator.generateFont(parameter), BitmapFont.class);\n        skin.add(\"small-font\", generator.generateFont(parameter), BitmapFont.class);\n        VisUI.load(skin);\n</code></pre>\n\n<p>Then I tried the more complex answer</p>\n\n<pre><code>    VisUI.dispose(true);\n\n    FreeTypeFontGenerator generator = new FreeTypeFontGenerator(Gdx.files.internal(\"customText.ttf\"));\n    FreeTypeFontGenerator.FreeTypeFontParameter parameter = new FreeTypeFontGenerator.FreeTypeFontParameter();\n    parameter.size = 14;\n\n    ObjectMap&lt;String, Object&gt; fontMap = new ObjectMap&lt;String, Object&gt;();\n    fontMap.put(\"default-font\", generator.generateFont(parameter));\n    fontMap.put(\"small-font\", generator.generateFont(parameter));\n\n    SkinLoader.SkinParameter par = new SkinLoader.SkinParameter(fontMap);\n\n    assets.load(VisUI.SkinScale.X1.getSkinFile().path(), Skin.class, par);\n    assets.finishLoading();\n\n    Skin skin = assets.get(VisUI.SkinScale.X1.getSkinFile().path());\n    VisUI.load(skin);\n</code></pre>\n\n<p>None of the two methods actually made a difference with the <code>ScrollableTextArea</code></p>\n\n<p>The previous code was placed in the constructor while  I made sure that I created my <code>VisWindow</code> after changes to VisUI since I place the window creation in the <code>show()</code> method in libgdx's Screen interface.</p>\n\n<p>Inside the <code>VisWindow</code> it is basially the following items and thats it.</p>\n\n<pre><code>    textArea = new ScrollableTextArea(\"...\");\n\n    VisTable table = new VisTable();\n\n    VisScrollPane scrollPane = new VisScrollPane(table);\n    scrollPane.setFlickScroll(false);\n    scrollPane.setFadeScrollBars(false);\n\n    add(textArea.createCompatibleScrollPane()).growX().growY().row();\n</code></pre>\n\n<p>I don't get what I did wrong. Am I not supposed to use Scene2d to change the font? Or did I forget something somewhere. </p>\n\n<p>Any suggestion is welcome. Thanks in advance.</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":28879405,"reputation":112,"user_id":22119186,"display_name":"bschaffh"},"score":0,"creation_date":1691656512,"post_id":76873886,"comment_id":135521830,"body_markdown":"Does this answer your question? [Spring Boot. Forward on RestController](https://stackoverflow.com/questions/73108875/spring-boot-forward-on-restcontroller)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/73108875/spring-boot-forward-on-restcontroller\">Spring Boot. Forward on RestController</a>"},{"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1691656636,"post_id":76873886,"comment_id":135521844,"body_markdown":"Should you redirect to an internal API(from Controller A to Controller B) or external redirect ?","body":"Should you redirect to an internal API(from Controller A to Controller B) or external redirect ?"},{"owner":{"account_id":26174516,"reputation":19,"user_id":19858917,"display_name":"unknown1101"},"score":0,"creation_date":1691656832,"post_id":76873886,"comment_id":135521875,"body_markdown":"It will be external","body":"It will be external"},{"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1691657553,"post_id":76873886,"comment_id":135522010,"body_markdown":"just have a look at [spring-cloud-feign](https://docs.spring.io/spring-cloud-openfeign/docs/current/reference/html/#spring-cloud-feign)","body":"just have a look at <a href=\"https://docs.spring.io/spring-cloud-openfeign/docs/current/reference/html/#spring-cloud-feign\" rel=\"nofollow noreferrer\">spring-cloud-feign</a>"}],"owner":{"account_id":26174516,"reputation":19,"user_id":19858917,"display_name":"unknown1101"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691656647,"creation_date":1691655795,"question_id":76873886,"body_markdown":"An orchestration API is supposed to take a JSON request body and forward to another API. What features of Springboot allow for forwarding a request to another endpoint? In the below code, how can I forward the request body through the redirect?   \r\n\r\n     @PostMapping(&quot;/redirect&quot;)\r\n        public RedirectView getRedirection(@RequestBody List&lt;Request&gt; request){\r\n         return new RedirectView(&quot;other api url&quot;);\r\n      }","title":"API to receive JSON request body and forward to another API - Springboot","body":"<p>An orchestration API is supposed to take a JSON request body and forward to another API. What features of Springboot allow for forwarding a request to another endpoint? In the below code, how can I forward the request body through the redirect?</p>\n<pre><code> @PostMapping(&quot;/redirect&quot;)\n    public RedirectView getRedirection(@RequestBody List&lt;Request&gt; request){\n     return new RedirectView(&quot;other api url&quot;);\n  }\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1691653280,"post_id":76873558,"comment_id":135521214,"body_markdown":"Show the code you wrote. If you are hitting a specific issue, we can help you better.","body":"Show the code you wrote. If you are hitting a specific issue, we can help you better."}],"answers":[{"tags":[],"owner":{"account_id":24792239,"reputation":413,"user_id":18675173,"display_name":"lant"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691655108,"creation_date":1691654077,"answer_id":76873677,"question_id":76873558,"body_markdown":" Your approach is quite close,\r\n\r\n    itemList.stream()\r\n            .collect(Collectors.groupingBy\r\n            (\r\n                ContrastItem::getRange,\r\n                Collectors.summingLong(ContrastItem::getContrast)\r\n            ));\r\n\r\nthis code creates a map `{01:00:00-01:59:59=0, 00:00:00-00:59:59=4}`  \r\n\r\nthen you need to convert to ContrastItem list\r\n  \r\n    public static void main(String[] args) {\r\n        List&lt;ContrastItem&gt; itemList = new ArrayList&lt;&gt;();\r\n        itemList.add(new ContrastItem(&quot;00:00:00-00:59:59&quot;, 3L));\r\n        itemList.add(new ContrastItem(&quot;00:00:00-00:59:59&quot;, 1L));\r\n        itemList.add(new ContrastItem(&quot;01:00:00-01:59:59&quot;, 0L));\r\n        itemList.add(new ContrastItem(&quot;01:00:00-01:59:59&quot;, 0L));\r\n\r\n        List&lt;ContrastItem&gt; collect = itemList.stream()\r\n                .collect(Collectors.groupingBy(\r\n                        ContrastItem::getRange,\r\n                        Collectors.summingLong(ContrastItem::getContrast)))\r\n                .entrySet().stream()\r\n                .map(entry -&gt; new ContrastItem(entry.getKey(), entry.getValue()))\r\n                .collect(Collectors.toList());\r\n        System.out.println(collect);\r\n    }","title":"How to merge duplicated property value and sum their other property - java","body":"<p>Your approach is quite close,</p>\n<pre><code>itemList.stream()\n        .collect(Collectors.groupingBy\n        (\n            ContrastItem::getRange,\n            Collectors.summingLong(ContrastItem::getContrast)\n        ));\n</code></pre>\n<p>this code creates a map <code>{01:00:00-01:59:59=0, 00:00:00-00:59:59=4}</code></p>\n<p>then you need to convert to ContrastItem list</p>\n<pre><code>public static void main(String[] args) {\n    List&lt;ContrastItem&gt; itemList = new ArrayList&lt;&gt;();\n    itemList.add(new ContrastItem(&quot;00:00:00-00:59:59&quot;, 3L));\n    itemList.add(new ContrastItem(&quot;00:00:00-00:59:59&quot;, 1L));\n    itemList.add(new ContrastItem(&quot;01:00:00-01:59:59&quot;, 0L));\n    itemList.add(new ContrastItem(&quot;01:00:00-01:59:59&quot;, 0L));\n\n    List&lt;ContrastItem&gt; collect = itemList.stream()\n            .collect(Collectors.groupingBy(\n                    ContrastItem::getRange,\n                    Collectors.summingLong(ContrastItem::getContrast)))\n            .entrySet().stream()\n            .map(entry -&gt; new ContrastItem(entry.getKey(), entry.getValue()))\n            .collect(Collectors.toList());\n    System.out.println(collect);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691656292,"creation_date":1691656292,"answer_id":76873943,"question_id":76873558,"body_markdown":"You can definitely do it with `Stream` and it looks not very complicated. `groupingBy + reducing` is what you need.\r\n\r\n```java\r\nCollection&lt;ContrastItem&gt; items = contrastItems.stream()\r\n   .collect(Collectors.groupingBy(\r\n      ContrastItem::getRange,\r\n      Collectors.reducing(new ContrastItem(0L, &quot;&quot;),\r\n         (one, two) -&gt; new ContrastItem(one.getContrast() + two.getContrast(),\r\n                                        two.getRange()))))\r\n   .values();\r\n```","title":"How to merge duplicated property value and sum their other property - java","body":"<p>You can definitely do it with <code>Stream</code> and it looks not very complicated. <code>groupingBy + reducing</code> is what you need.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Collection&lt;ContrastItem&gt; items = contrastItems.stream()\n   .collect(Collectors.groupingBy(\n      ContrastItem::getRange,\n      Collectors.reducing(new ContrastItem(0L, &quot;&quot;),\n         (one, two) -&gt; new ContrastItem(one.getContrast() + two.getContrast(),\n                                        two.getRange()))))\n   .values();\n</code></pre>\n"}],"owner":{"account_id":26458579,"reputation":3,"user_id":20100847,"display_name":"demonpink"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76873677,"answer_count":2,"score":0,"last_activity_date":1691656292,"creation_date":1691653183,"question_id":76873558,"body_markdown":"I have list of this object, wanted to sum duplicated item&#39;s contrast and remove duplicates.\r\n\r\n```\r\n\r\npublic class ContrastItem {\r\n    private String range;\r\n    private Long contrast;\r\n}\r\n```\r\n\r\n```\r\n            [{\r\n                &quot;contrast&quot;: 3,\r\n                &quot;range&quot;: &quot;00:00:00-00:59:59&quot;\r\n            },\r\n            {\r\n                &quot;contrast&quot;: 1,\r\n                &quot;range&quot;: &quot;00:00:00-00:59:59&quot;\r\n            },\r\n            {\r\n                &quot;contrast&quot;: 0,\r\n                &quot;range&quot;: &quot;01:00:00-01:59:59&quot;\r\n            },\r\n            {\r\n                &quot;contrast&quot;: 0,\r\n                &quot;range&quot;: &quot;01:00:00-01:59:59&quot;\r\n            }]\r\n```\r\nExpected:\r\n\r\n```\r\n            [{\r\n                &quot;contrast&quot;: 4,\r\n                &quot;range&quot;: &quot;00:00:00-00:59:59&quot;\r\n            },\r\n            {\r\n                &quot;contrast&quot;: 0,\r\n                &quot;range&quot;: &quot;01:00:00-01:59:59&quot;\r\n            }]\r\n```\r\n\r\n\r\nI have tried stream mapping the list with groupby and summingLong but could&#39;t wrap around my head to solve it.(don&#39;t know what i&#39;m doing)\r\n```\r\nmylist.stream()\r\n.collect(Collectors.groupingBy(\r\nContrastItem::getRange,Collectors.summingLong(ContrastItem::getContrast)))\r\n.entrySet().stream().map().collect(Collectors.toList());\r\n```","title":"How to merge duplicated property value and sum their other property - java","body":"<p>I have list of this object, wanted to sum duplicated item's contrast and remove duplicates.</p>\n<pre><code>\npublic class ContrastItem {\n    private String range;\n    private Long contrast;\n}\n</code></pre>\n<pre><code>            [{\n                &quot;contrast&quot;: 3,\n                &quot;range&quot;: &quot;00:00:00-00:59:59&quot;\n            },\n            {\n                &quot;contrast&quot;: 1,\n                &quot;range&quot;: &quot;00:00:00-00:59:59&quot;\n            },\n            {\n                &quot;contrast&quot;: 0,\n                &quot;range&quot;: &quot;01:00:00-01:59:59&quot;\n            },\n            {\n                &quot;contrast&quot;: 0,\n                &quot;range&quot;: &quot;01:00:00-01:59:59&quot;\n            }]\n</code></pre>\n<p>Expected:</p>\n<pre><code>            [{\n                &quot;contrast&quot;: 4,\n                &quot;range&quot;: &quot;00:00:00-00:59:59&quot;\n            },\n            {\n                &quot;contrast&quot;: 0,\n                &quot;range&quot;: &quot;01:00:00-01:59:59&quot;\n            }]\n</code></pre>\n<p>I have tried stream mapping the list with groupby and summingLong but could't wrap around my head to solve it.(don't know what i'm doing)</p>\n<pre><code>mylist.stream()\n.collect(Collectors.groupingBy(\nContrastItem::getRange,Collectors.summingLong(ContrastItem::getContrast)))\n.entrySet().stream().map().collect(Collectors.toList());\n</code></pre>\n"},{"tags":["java","hibernate","session","transactions"],"comments":[{"owner":{"account_id":3953938,"reputation":2256,"user_id":3263183,"display_name":"neildo"},"score":0,"creation_date":1391714423,"post_id":21608835,"comment_id":32654030,"body_markdown":"Are you using Hibernate as your JPA provider?  Are all entities mapped in both Hibernate and JPA?","body":"Are you using Hibernate as your JPA provider?  Are all entities mapped in both Hibernate and JPA?"},{"owner":{"account_id":910121,"reputation":543,"user_id":944162,"accept_rate":86,"display_name":"qbd"},"score":0,"creation_date":1391719841,"post_id":21608835,"comment_id":32657384,"body_markdown":"Yes, Hibernate is used as a JPA provider. All entities are mapped in both JPA and Hibernate. Essentially, we are using JPA EntityManager for the exact thing we used HibernateTemplate/Session.","body":"Yes, Hibernate is used as a JPA provider. All entities are mapped in both JPA and Hibernate. Essentially, we are using JPA EntityManager for the exact thing we used HibernateTemplate/Session."},{"owner":{"account_id":3953938,"reputation":2256,"user_id":3263183,"display_name":"neildo"},"score":1,"creation_date":1391720643,"post_id":21608835,"comment_id":32657905,"body_markdown":"You might consider using EntityManager.unrwap(Session.class) to get the Hibernate Session instead of having both a Hibernate SessionFactory and EntityManagerFactory:  http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html#unwrap(java.lang.Class)","body":"You might consider using EntityManager.unrwap(Session.class) to get the Hibernate Session instead of having both a Hibernate SessionFactory and EntityManagerFactory:  <a href=\"http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html#unwrap(java.lang.Class)\" rel=\"nofollow noreferrer\">docs.oracle.com/javaee/6/api/javax/persistence/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":2674923,"reputation":9479,"user_id":2311528,"accept_rate":59,"display_name":"Lonzak"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683874988,"creation_date":1683874988,"answer_id":76233869,"question_id":21608835,"body_markdown":"It has been a while but if I remember correctly it is as you have written: the hibernate session and the EntityManager each have a connection to the database - so when your are using both it must be ensured that they share the same transaction.\r\nI would directly get the session from the EntityManager like this:\r\n\r\n    // the old way\r\n    Session session = ((HibernateEntityManager)em).getSession();\r\n\r\nSince Hibernate 5 the `HibernateEntityManager` was deprecated thus you should use the `unwrap` method which is a standard JPA method and thus makes your code more portable between different JPA providers. But I mentioned it in case you are stuck with an older version of hibernate and you can&#39;t upgrade...\r\n \r\n    Session session = em.unwrap(Session.class);\r\n\r\n    Query hqlQuery = session.createQuery(&quot;DELETE FROM address WHERE user_id = 1&quot;);\r\n    hqlQuery.executeUpdate();\r\n\r\n    Query jpaQuery = em.createQuery(&quot;DELETE FROM user WHERE id = 1&quot;);\r\n    jpaQuery.executeUpdate();\r\n\r\nAnother possibility could be to finish the first transaction and afterwards do the user delete. But this has several disadvantages like manually managing rollback and the &quot;mixture&quot; between annotation based and manual transaction handling. I haven&#39;t tested this and the exception handling is omitted:\r\n\r\n    //Session session = sessionFactory.openSession();\r\n    Transaction tx = session.beginTransaction(); // or session.getTransaction()\r\n    \r\n    hqlQuery = session.createQuery(&quot;DELETE FROM address WHERE user_id = 1&quot;);\r\n    hqlQuery.executeUpdate();\r\n\r\n    session.flush();\r\n    tx.commit();\r\n    //session.close();\r\n\r\n    //now do the user deletion\r\n    jpaQuery = em.createQuery(&quot;DELETE FROM user WHERE id = 1&quot;);\r\n    jpaQuery.executeUpdate();\r\n    ","title":"Do Hibernate session and Entity manager share the same transaction?","body":"<p>It has been a while but if I remember correctly it is as you have written: the hibernate session and the EntityManager each have a connection to the database - so when your are using both it must be ensured that they share the same transaction.\nI would directly get the session from the EntityManager like this:</p>\n<pre><code>// the old way\nSession session = ((HibernateEntityManager)em).getSession();\n</code></pre>\n<p>Since Hibernate 5 the <code>HibernateEntityManager</code> was deprecated thus you should use the <code>unwrap</code> method which is a standard JPA method and thus makes your code more portable between different JPA providers. But I mentioned it in case you are stuck with an older version of hibernate and you can't upgrade...</p>\n<pre><code>Session session = em.unwrap(Session.class);\n\nQuery hqlQuery = session.createQuery(&quot;DELETE FROM address WHERE user_id = 1&quot;);\nhqlQuery.executeUpdate();\n\nQuery jpaQuery = em.createQuery(&quot;DELETE FROM user WHERE id = 1&quot;);\njpaQuery.executeUpdate();\n</code></pre>\n<p>Another possibility could be to finish the first transaction and afterwards do the user delete. But this has several disadvantages like manually managing rollback and the &quot;mixture&quot; between annotation based and manual transaction handling. I haven't tested this and the exception handling is omitted:</p>\n<pre><code>//Session session = sessionFactory.openSession();\nTransaction tx = session.beginTransaction(); // or session.getTransaction()\n\nhqlQuery = session.createQuery(&quot;DELETE FROM address WHERE user_id = 1&quot;);\nhqlQuery.executeUpdate();\n\nsession.flush();\ntx.commit();\n//session.close();\n\n//now do the user deletion\njpaQuery = em.createQuery(&quot;DELETE FROM user WHERE id = 1&quot;);\njpaQuery.executeUpdate();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17228781,"reputation":3548,"user_id":12473843,"display_name":"Sergey Tsypanov"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1691656046,"creation_date":1684154094,"answer_id":76254122,"question_id":21608835,"body_markdown":"Well, `EntityManager` is a Java Persistence API-related interface, and `Session` (or rather `SessionImpl`) is Hibernate-provided implementation of `EntityManager`. \r\n\r\nAt runtime `em.createQuery()` returns `javax.persistence.Query` and  `session.createQuery()` returns `org.hibernate.query.Query` which in turn extends `javax.persistence.Query` :)\r\n\r\nSo eventually under the hood you deal with the same code.\r\n\r\nNow, as soon as your code is executed under the same method annotated with `@Transactional` all the operations within that method share one and the same transaction. To make sure you could log transaction begin/end.\r\n\r\nTo solve your problem I think you need to rewrite your code to use native queries, for as far as I understand `user_id` references table column, not an entity field:\r\n```java\r\nhqlQuery = session.createNativeQuery(&quot;DELETE FROM address WHERE user_id = 1&quot;);\r\nhqlQuery.executeUpdate();\r\n\r\njpaQuery = em.createNativeQuery(&quot;DELETE FROM user WHERE id = 1&quot;);\r\njpaQuery.executeUpdate();\r\n```\r\n\r\nHowever, if you deal with entities and want to keep `*.createQuery()` you need to execute `session.flush()` after `hqlQuery.executeUpdate()`.\r\n\r\nIt&#39;s important to understand, that  without Entities mapped onto both the tables involved `em/Session.createQuery()` wouldn&#39;t work out. See this answer: https://stackoverflow.com/a/40645955/12473843","title":"Do Hibernate session and Entity manager share the same transaction?","body":"<p>Well, <code>EntityManager</code> is a Java Persistence API-related interface, and <code>Session</code> (or rather <code>SessionImpl</code>) is Hibernate-provided implementation of <code>EntityManager</code>.</p>\n<p>At runtime <code>em.createQuery()</code> returns <code>javax.persistence.Query</code> and  <code>session.createQuery()</code> returns <code>org.hibernate.query.Query</code> which in turn extends <code>javax.persistence.Query</code> :)</p>\n<p>So eventually under the hood you deal with the same code.</p>\n<p>Now, as soon as your code is executed under the same method annotated with <code>@Transactional</code> all the operations within that method share one and the same transaction. To make sure you could log transaction begin/end.</p>\n<p>To solve your problem I think you need to rewrite your code to use native queries, for as far as I understand <code>user_id</code> references table column, not an entity field:</p>\n<pre class=\"lang-java prettyprint-override\"><code>hqlQuery = session.createNativeQuery(&quot;DELETE FROM address WHERE user_id = 1&quot;);\nhqlQuery.executeUpdate();\n\njpaQuery = em.createNativeQuery(&quot;DELETE FROM user WHERE id = 1&quot;);\njpaQuery.executeUpdate();\n</code></pre>\n<p>However, if you deal with entities and want to keep <code>*.createQuery()</code> you need to execute <code>session.flush()</code> after <code>hqlQuery.executeUpdate()</code>.</p>\n<p>It's important to understand, that  without Entities mapped onto both the tables involved <code>em/Session.createQuery()</code> wouldn't work out. See this answer: <a href=\"https://stackoverflow.com/a/40645955/12473843\">https://stackoverflow.com/a/40645955/12473843</a></p>\n"}],"owner":{"account_id":910121,"reputation":543,"user_id":944162,"accept_rate":86,"display_name":"qbd"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1722,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1691656046,"creation_date":1391704991,"question_id":21608835,"body_markdown":"we are currently using Hibernate 3.6 on our application. Application is full of uses of Hibernate Session, Spring HibernateTemplate - recently we started migrating the code to more standard Entity Manager, but it is a gradual process.\r\n\r\nSo I got into the problem where we use both hibernate session and entity manager in one method (service method which is @Transactional) and one operation depends on the other, like this:\r\n\r\n    hqlQuery = session.createQuery(&quot;DELETE FROM address WHERE user_id = 1&quot;);\r\n    hqlQuery.executeUpdate();\r\n\r\n    jpaQuery = em.createQuery(&quot;DELETE FROM user WHERE id = 1&quot;);\r\n    jpaQuery.executeUpdate();\r\n    // this throws org.hibernate.exception.ConstraintViolationException - cannot delete user because there are still references to this user in address\r\n\r\nI suspect that this could be because Hibernate uses different transaction (in different connection) for Session and EntityManager - delete of addreses are done in one transaction and delete of user is done in a second transaction - then it&#39;s clear why delete of user fails because of foreign key constraint. \r\n\r\nSession and EntityManager share the same transaction manager but I have no idea if this is important. \r\n\r\nI wanted to test this by getting some transaction ID from session.getTransaction() and em.getTransaction() but there&#39;s no identifier.\r\n\r\nSo the question is - is it possible to share one transaction between Session and EntityManager? If it is, how?\r\n\r\nThanks!","title":"Do Hibernate session and Entity manager share the same transaction?","body":"<p>we are currently using Hibernate 3.6 on our application. Application is full of uses of Hibernate Session, Spring HibernateTemplate - recently we started migrating the code to more standard Entity Manager, but it is a gradual process.</p>\n\n<p>So I got into the problem where we use both hibernate session and entity manager in one method (service method which is @Transactional) and one operation depends on the other, like this:</p>\n\n<pre><code>hqlQuery = session.createQuery(\"DELETE FROM address WHERE user_id = 1\");\nhqlQuery.executeUpdate();\n\njpaQuery = em.createQuery(\"DELETE FROM user WHERE id = 1\");\njpaQuery.executeUpdate();\n// this throws org.hibernate.exception.ConstraintViolationException - cannot delete user because there are still references to this user in address\n</code></pre>\n\n<p>I suspect that this could be because Hibernate uses different transaction (in different connection) for Session and EntityManager - delete of addreses are done in one transaction and delete of user is done in a second transaction - then it's clear why delete of user fails because of foreign key constraint. </p>\n\n<p>Session and EntityManager share the same transaction manager but I have no idea if this is important. </p>\n\n<p>I wanted to test this by getting some transaction ID from session.getTransaction() and em.getTransaction() but there's no identifier.</p>\n\n<p>So the question is - is it possible to share one transaction between Session and EntityManager? If it is, how?</p>\n\n<p>Thanks!</p>\n"},{"tags":["java","java-stream","collectors","groupingby","reducing"],"answers":[{"tags":[],"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1663426035,"creation_date":1663425539,"answer_id":73755754,"question_id":73755679,"body_markdown":"You must _not_ modify the input arguments to `Collectors.reducing`. `new Item()` is only executed once and all your reduction operations will share the same &quot;aggregation instance&quot;. In other words: the map will contain the same value instance 4 times (you can easily check yourself with `System.identityHashCode()` or by comparing for reference-equality: `aggregatedItems.get(&quot;CODE1&quot;) == aggregatedItems.get(&quot;CODE2&quot;)`).\r\n\r\nInstead, return a new result instance:\r\n\r\n```\r\n        final Map&lt;String, Item&gt; aggregatedItems = itemList\r\n            .stream()\r\n            .collect(Collectors.groupingBy(\r\n                Item::getCode,\r\n                Collectors.reducing(new Item(), (item1, item2) -&gt; {\r\n                    final Item reduced = new Item();\r\n                    reduced.setQuantity(item1.getQuantity() + item2.getQuantity());\r\n                    reduced.setAmount(item1.getAmount() + item2.getAmount());\r\n                    return reduced;\r\n                })\r\n            ));\r\n```\r\n\r\nOutput:\r\n\r\n```\r\nMap total size: 4\r\n\r\nkey: CODE2\r\nvalue - quantity: 5 - amount: 64.0\r\n\r\nkey: CODE1\r\nvalue - quantity: 1 - amount: 12.0\r\n\r\nkey: CODE4\r\nvalue - quantity: 10 - amount: 31.0\r\n\r\nkey: CODE3\r\nvalue - quantity: 5 - amount: 50.0\r\n```","title":"Java Stream GroupBy and Reduce","body":"<p>You must <em>not</em> modify the input arguments to <code>Collectors.reducing</code>. <code>new Item()</code> is only executed once and all your reduction operations will share the same &quot;aggregation instance&quot;. In other words: the map will contain the same value instance 4 times (you can easily check yourself with <code>System.identityHashCode()</code> or by comparing for reference-equality: <code>aggregatedItems.get(&quot;CODE1&quot;) == aggregatedItems.get(&quot;CODE2&quot;)</code>).</p>\n<p>Instead, return a new result instance:</p>\n<pre><code>        final Map&lt;String, Item&gt; aggregatedItems = itemList\n            .stream()\n            .collect(Collectors.groupingBy(\n                Item::getCode,\n                Collectors.reducing(new Item(), (item1, item2) -&gt; {\n                    final Item reduced = new Item();\n                    reduced.setQuantity(item1.getQuantity() + item2.getQuantity());\n                    reduced.setAmount(item1.getAmount() + item2.getAmount());\n                    return reduced;\n                })\n            ));\n</code></pre>\n<p>Output:</p>\n<pre><code>Map total size: 4\n\nkey: CODE2\nvalue - quantity: 5 - amount: 64.0\n\nkey: CODE1\nvalue - quantity: 1 - amount: 12.0\n\nkey: CODE4\nvalue - quantity: 10 - amount: 31.0\n\nkey: CODE3\nvalue - quantity: 5 - amount: 50.0\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1663426555,"creation_date":1663426555,"answer_id":73755904,"question_id":73755679,"body_markdown":"You are using `reducing`, which assumes that you won&#39;t mutate the accumulator passed in. `reducing` won&#39;t create new `Item`s for you for each new group, and expects you to create new `Item`s and return them in the lambda, like this:\r\n\r\n    // this works as expected\r\n    .collect(Collectors.groupingBy(\r\n        Item::getCode,\r\n        Collectors.reducing(new Item(), (item1, item2) -&gt; createItem(\r\n            item1.getCode(),\r\n            item1.getQuantity() + item2.getQuantity(),\r\n            item1.getAmount() + item2.getAmount()\r\n        ))\r\n    ));\r\n\r\nso it is very suitable if you are using immutable objects like numbers or strings.\r\n\r\nSince you are not creating new `Item`s in your code, `reducing` keeps on reusing that same instance, resulting in the behaviour you see.\r\n\r\nIf you want to mutate the objects, you can do mutable reduction in a thread safe way with `Collector.of`:\r\n\r\n    .collect(Collectors.groupingBy(\r\n        Item::getCode,\r\n        Collector.of(Item::new, (aggregatedItem, item) -&gt; {\r\n            int aggregatedQuantity = aggregatedItem.getQuantity();\r\n            double aggregatedAmount = aggregatedItem.getAmount();\r\n\r\n            aggregatedItem.setQuantity(aggregatedQuantity + item.getQuantity());\r\n            aggregatedItem.setAmount(aggregatedAmount + item.getAmount());\r\n        }, (item1, item2) -&gt; createItem(\r\n            item1.getCode(),\r\n            item1.getQuantity() + item2.getQuantity(),\r\n            item1.getAmount() + item2.getAmount()\r\n        ))\r\n    ));\r\n\r\nNotice that you now pass the reference to `Item`&#39;s constructor, i.e. a way to create new `Item`s when necessary, as opposed to just a single `new Item()`. In addition, you also provide a third argument, the combiner, that tells the collector how to create a new item from two existing ones, which will be used if this collector is used in a concurrent situation. (See [here][1] for more info about the combiner)\r\n\r\nThis contrast between `Collector.of` and `Collectors.reducing` is the same contrast between `Stream.reduce` and `Stream.collect`. [Learn more here][2].\r\n\r\n\r\n  [1]: https://stackoverflow.com/q/29959795/5133585\r\n  [2]: https://stackoverflow.com/a/22577274/5133585","title":"Java Stream GroupBy and Reduce","body":"<p>You are using <code>reducing</code>, which assumes that you won't mutate the accumulator passed in. <code>reducing</code> won't create new <code>Item</code>s for you for each new group, and expects you to create new <code>Item</code>s and return them in the lambda, like this:</p>\n<pre><code>// this works as expected\n.collect(Collectors.groupingBy(\n    Item::getCode,\n    Collectors.reducing(new Item(), (item1, item2) -&gt; createItem(\n        item1.getCode(),\n        item1.getQuantity() + item2.getQuantity(),\n        item1.getAmount() + item2.getAmount()\n    ))\n));\n</code></pre>\n<p>so it is very suitable if you are using immutable objects like numbers or strings.</p>\n<p>Since you are not creating new <code>Item</code>s in your code, <code>reducing</code> keeps on reusing that same instance, resulting in the behaviour you see.</p>\n<p>If you want to mutate the objects, you can do mutable reduction in a thread safe way with <code>Collector.of</code>:</p>\n<pre><code>.collect(Collectors.groupingBy(\n    Item::getCode,\n    Collector.of(Item::new, (aggregatedItem, item) -&gt; {\n        int aggregatedQuantity = aggregatedItem.getQuantity();\n        double aggregatedAmount = aggregatedItem.getAmount();\n\n        aggregatedItem.setQuantity(aggregatedQuantity + item.getQuantity());\n        aggregatedItem.setAmount(aggregatedAmount + item.getAmount());\n    }, (item1, item2) -&gt; createItem(\n        item1.getCode(),\n        item1.getQuantity() + item2.getQuantity(),\n        item1.getAmount() + item2.getAmount()\n    ))\n));\n</code></pre>\n<p>Notice that you now pass the reference to <code>Item</code>'s constructor, i.e. a way to create new <code>Item</code>s when necessary, as opposed to just a single <code>new Item()</code>. In addition, you also provide a third argument, the combiner, that tells the collector how to create a new item from two existing ones, which will be used if this collector is used in a concurrent situation. (See <a href=\"https://stackoverflow.com/q/29959795/5133585\">here</a> for more info about the combiner)</p>\n<p>This contrast between <code>Collector.of</code> and <code>Collectors.reducing</code> is the same contrast between <code>Stream.reduce</code> and <code>Stream.collect</code>. <a href=\"https://stackoverflow.com/a/22577274/5133585\">Learn more here</a>.</p>\n"},{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1663430129,"creation_date":1663426950,"answer_id":73755965,"question_id":73755679,"body_markdown":"# Mutable reduction vs Immutable reduction\r\n\r\nIn this case, `Collectors.reducing()` isn&#39;t the right tool because it meant for **immutable reduction**, i.e. for performing folding operation in which every reduction step results in creation of a **new** immutable object.\r\n\r\nBut instead of generating a new object at each reduction step, you&#39;re changing the state of the object provided as an *identity*.\r\n\r\nAs a consequence, you&#39;re getting an incorrect result because the *identity* object would be created only **once** per thread. This single instance of the `Item` is used for accumulation, and reference to it end up in every value of the map.\r\n\r\nMore elaborate information you can find in the *Stream API documentation*, specifically in these parts: [*Reduction*](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/package-summary.html#Reduction) and [*Mutable Reduction*](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/package-summary.html#MutableReduction).\r\n\r\nAnd here&#39;s a short quote explaining how `Stream.reduce()` works (the mechanism behind `Collectors.reducing()` is the same):\r\n\r\n&gt; The **accumulator function** takes a partial result and the next element, and produces a **new partial result**.\r\n\r\n# Use mutable reduction\r\n\r\nThe problem can be fixed by generating a new instance of `Item` while accumulating *values* mapped to the same *key* with, but a more performant approach would be to use **mutable reduction** instead. \r\n\r\nFor that, you can implement a *custom collector* created via static method [`Collector.of()`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Collector.html#of(java.util.function.Supplier,java.util.function.BiConsumer,java.util.function.BinaryOperator,java.util.stream.Collector.Characteristics...)):\r\n\r\n```\r\nMap&lt;String, Item&gt; aggregatedItems = itemList.stream()\r\n    .collect(Collectors.groupingBy(\r\n        Item::getCode,\r\n        Collector.of(\r\n            Item::new,   // mutable container of the collector\r\n            Item::merge, // accumulator - defines how stream data should be accumulated\r\n            Item::merge  // combiner - mergin the two containers while executing stream in parallel\r\n        )\r\n    ));\r\n```\r\n\r\nFor convenience, you can introduce method `merge()` responsible for accumulating properties of the two *items*. It would allow to avoid repeating the same logic in *accumulator* and *combiner*, and keep the collector implementation lean and well-readable.\r\n\r\n    public class Item {\r\n        private String code;\r\n        private int quantity;\r\n        private double amount;\r\n        \r\n        // getters, constructor, etc.\r\n        \r\n        public Item merge(Item other) {\r\n            this.quantity += other.quantity;\r\n            this.amount += other.amount;\r\n            return this;\r\n        }\r\n    }","title":"Java Stream GroupBy and Reduce","body":"<h1>Mutable reduction vs Immutable reduction</h1>\n<p>In this case, <code>Collectors.reducing()</code> isn't the right tool because it meant for <strong>immutable reduction</strong>, i.e. for performing folding operation in which every reduction step results in creation of a <strong>new</strong> immutable object.</p>\n<p>But instead of generating a new object at each reduction step, you're changing the state of the object provided as an <em>identity</em>.</p>\n<p>As a consequence, you're getting an incorrect result because the <em>identity</em> object would be created only <strong>once</strong> per thread. This single instance of the <code>Item</code> is used for accumulation, and reference to it end up in every value of the map.</p>\n<p>More elaborate information you can find in the <em>Stream API documentation</em>, specifically in these parts: <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/package-summary.html#Reduction\" rel=\"nofollow noreferrer\"><em>Reduction</em></a> and <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/package-summary.html#MutableReduction\" rel=\"nofollow noreferrer\"><em>Mutable Reduction</em></a>.</p>\n<p>And here's a short quote explaining how <code>Stream.reduce()</code> works (the mechanism behind <code>Collectors.reducing()</code> is the same):</p>\n<blockquote>\n<p>The <strong>accumulator function</strong> takes a partial result and the next element, and produces a <strong>new partial result</strong>.</p>\n</blockquote>\n<h1>Use mutable reduction</h1>\n<p>The problem can be fixed by generating a new instance of <code>Item</code> while accumulating <em>values</em> mapped to the same <em>key</em> with, but a more performant approach would be to use <strong>mutable reduction</strong> instead.</p>\n<p>For that, you can implement a <em>custom collector</em> created via static method <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Collector.html#of(java.util.function.Supplier,java.util.function.BiConsumer,java.util.function.BinaryOperator,java.util.stream.Collector.Characteristics...)\" rel=\"nofollow noreferrer\"><code>Collector.of()</code></a>:</p>\n<pre><code>Map&lt;String, Item&gt; aggregatedItems = itemList.stream()\n    .collect(Collectors.groupingBy(\n        Item::getCode,\n        Collector.of(\n            Item::new,   // mutable container of the collector\n            Item::merge, // accumulator - defines how stream data should be accumulated\n            Item::merge  // combiner - mergin the two containers while executing stream in parallel\n        )\n    ));\n</code></pre>\n<p>For convenience, you can introduce method <code>merge()</code> responsible for accumulating properties of the two <em>items</em>. It would allow to avoid repeating the same logic in <em>accumulator</em> and <em>combiner</em>, and keep the collector implementation lean and well-readable.</p>\n<pre><code>public class Item {\n    private String code;\n    private int quantity;\n    private double amount;\n    \n    // getters, constructor, etc.\n    \n    public Item merge(Item other) {\n        this.quantity += other.quantity;\n        this.amount += other.amount;\n        return this;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":981796,"reputation":3273,"user_id":1001335,"accept_rate":74,"display_name":"hakuna matata"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4365,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":73755754,"answer_count":3,"score":4,"last_activity_date":1691655978,"creation_date":1663424879,"question_id":73755679,"body_markdown":"I have an Item class which contains a code, quantity and amount fields, and a list of items which may contain many items (with same code). I want to group the items by code and sum up their quantities and amounts.\r\n\r\nI was able to achieve half of it using stream&#39;s `groupingBy` and `reduce`. The grouping by worked, but the reduce is reducing all of the grouped items into one single item repeated over the different codes (`groupingBy` key).\r\n\r\nShouldn&#39;t reduce here reduce the list of items for each code from the map? Why is it retuning the same combined item for all.\r\n\r\nBelow is a sample code.\r\n\r\n    import java.util.List;\r\n    import java.util.Arrays;\r\n    import java.util.stream.Collectors;\r\n    import java.util.Map;\r\n    \r\n    class HelloWorld {\r\n        public static void main(String[] args) {\r\n            List&lt;Item&gt; itemList = Arrays.asList(\r\n                createItem(&quot;CODE1&quot;, 1, 12),\r\n                createItem(&quot;CODE2&quot;, 4, 22),\r\n                createItem(&quot;CODE3&quot;, 5, 50),\r\n                createItem(&quot;CODE4&quot;, 2, 11),\r\n                createItem(&quot;CODE4&quot;, 8, 20),\r\n                createItem(&quot;CODE2&quot;, 1, 42)\r\n            );\r\n            \r\n            Map&lt;String, Item&gt; aggregatedItems = itemList\r\n                .stream()\r\n                .collect(Collectors.groupingBy(\r\n                    Item::getCode,\r\n                    Collectors.reducing(new Item(), (aggregatedItem, item) -&gt; {\r\n                        int aggregatedQuantity = aggregatedItem.getQuantity();\r\n                        double aggregatedAmount = aggregatedItem.getAmount();\r\n                        \r\n                        aggregatedItem.setQuantity(aggregatedQuantity + item.getQuantity());\r\n                        aggregatedItem.setAmount(aggregatedAmount + item.getAmount());\r\n                        \r\n                        return aggregatedItem;\r\n                    })\r\n                ));\r\n            \r\n            System.out.println(&quot;Map total size: &quot; + aggregatedItems.size()); // expected 4\r\n            System.out.println();\r\n            aggregatedItems.forEach((key, value) -&gt; {\r\n                System.out.println(&quot;key: &quot; + key);\r\n                System.out.println(&quot;value - quantity: &quot; + value.getQuantity() + &quot; - amount: &quot; + value.getAmount());\r\n                System.out.println();\r\n            });\r\n        }\r\n        \r\n        private static Item createItem(String code, int quantity, double amount) {\r\n            Item item = new Item();\r\n            item.setCode(code);\r\n            item.setQuantity(quantity);\r\n            item.setAmount(amount);\r\n            return item;\r\n        }\r\n    }\r\n    \r\n    class Item {\r\n        private String code;\r\n        private int quantity;\r\n        private double amount;\r\n        \r\n        public Item() {\r\n            quantity = 0;\r\n            amount = 0.0;\r\n        }\r\n        \r\n        public String getCode() { return code; }\r\n        public int getQuantity() { return quantity; }\r\n        public double getAmount() { return amount; }\r\n        \r\n        public void setCode(String code) { this.code = code; }\r\n        public void setQuantity(int quantity) { this.quantity = quantity; }\r\n        public void setAmount(double amount) { this.amount = amount; }\r\n    }\r\n\r\nand below is the output.\r\n\r\n    Map total size: 4\r\n    \r\n    key: CODE2\r\n    value - quantity: 21 - amount: 157.0\r\n    \r\n    key: CODE1\r\n    value - quantity: 21 - amount: 157.0\r\n    \r\n    key: CODE4\r\n    value - quantity: 21 - amount: 157.0\r\n    \r\n    key: CODE3\r\n    value - quantity: 21 - amount: 157.0","title":"Java Stream GroupBy and Reduce","body":"<p>I have an Item class which contains a code, quantity and amount fields, and a list of items which may contain many items (with same code). I want to group the items by code and sum up their quantities and amounts.</p>\n<p>I was able to achieve half of it using stream's <code>groupingBy</code> and <code>reduce</code>. The grouping by worked, but the reduce is reducing all of the grouped items into one single item repeated over the different codes (<code>groupingBy</code> key).</p>\n<p>Shouldn't reduce here reduce the list of items for each code from the map? Why is it retuning the same combined item for all.</p>\n<p>Below is a sample code.</p>\n<pre><code>import java.util.List;\nimport java.util.Arrays;\nimport java.util.stream.Collectors;\nimport java.util.Map;\n\nclass HelloWorld {\n    public static void main(String[] args) {\n        List&lt;Item&gt; itemList = Arrays.asList(\n            createItem(&quot;CODE1&quot;, 1, 12),\n            createItem(&quot;CODE2&quot;, 4, 22),\n            createItem(&quot;CODE3&quot;, 5, 50),\n            createItem(&quot;CODE4&quot;, 2, 11),\n            createItem(&quot;CODE4&quot;, 8, 20),\n            createItem(&quot;CODE2&quot;, 1, 42)\n        );\n        \n        Map&lt;String, Item&gt; aggregatedItems = itemList\n            .stream()\n            .collect(Collectors.groupingBy(\n                Item::getCode,\n                Collectors.reducing(new Item(), (aggregatedItem, item) -&gt; {\n                    int aggregatedQuantity = aggregatedItem.getQuantity();\n                    double aggregatedAmount = aggregatedItem.getAmount();\n                    \n                    aggregatedItem.setQuantity(aggregatedQuantity + item.getQuantity());\n                    aggregatedItem.setAmount(aggregatedAmount + item.getAmount());\n                    \n                    return aggregatedItem;\n                })\n            ));\n        \n        System.out.println(&quot;Map total size: &quot; + aggregatedItems.size()); // expected 4\n        System.out.println();\n        aggregatedItems.forEach((key, value) -&gt; {\n            System.out.println(&quot;key: &quot; + key);\n            System.out.println(&quot;value - quantity: &quot; + value.getQuantity() + &quot; - amount: &quot; + value.getAmount());\n            System.out.println();\n        });\n    }\n    \n    private static Item createItem(String code, int quantity, double amount) {\n        Item item = new Item();\n        item.setCode(code);\n        item.setQuantity(quantity);\n        item.setAmount(amount);\n        return item;\n    }\n}\n\nclass Item {\n    private String code;\n    private int quantity;\n    private double amount;\n    \n    public Item() {\n        quantity = 0;\n        amount = 0.0;\n    }\n    \n    public String getCode() { return code; }\n    public int getQuantity() { return quantity; }\n    public double getAmount() { return amount; }\n    \n    public void setCode(String code) { this.code = code; }\n    public void setQuantity(int quantity) { this.quantity = quantity; }\n    public void setAmount(double amount) { this.amount = amount; }\n}\n</code></pre>\n<p>and below is the output.</p>\n<pre><code>Map total size: 4\n\nkey: CODE2\nvalue - quantity: 21 - amount: 157.0\n\nkey: CODE1\nvalue - quantity: 21 - amount: 157.0\n\nkey: CODE4\nvalue - quantity: 21 - amount: 157.0\n\nkey: CODE3\nvalue - quantity: 21 - amount: 157.0\n</code></pre>\n"},{"tags":["java","spring","spring-boot","gradle","crystal-reports"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1691716677,"post_id":76873775,"comment_id":135532725,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."}],"owner":{"account_id":23033457,"reputation":1,"user_id":17152579,"display_name":"Pol Moreno Castelar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691654993,"creation_date":1691654905,"question_id":76873775,"body_markdown":"I am working on a Java project where I need to generate a report using Crystal Reports and then export it to a PDF file. My goal is to achieve this within a specific Java function, to which an ID will be passed as a parameter. However, I am facing difficulties in understanding how I can effectively achieve this integration.\r\n\r\nMy question revolves around how I can structure this process in an organized manner. Here is the flow I have in mind:\r\n\r\nReceive an ID as a parameter in a Java function.\r\n\r\nI want to call a pre-designed report in Crystal Reports from this function.\r\n\r\nPass the ID collected in step 1 as a parameter to the Crystal Reports report.\r\n\r\nGenerate the report in Crystal Reports using the provided ID.\r\n\r\nExport the generated report to a PDF file.\r\n\r\nI am seeking guidance on how I can achieve each of these steps effectively. I would like to know how I can establish communication between Java and Crystal Reports, how to pass the ID as a parameter to the report, and how to finally generate and export the report in PDF format.\r\n\r\nI would greatly appreciate if someone could provide me with clear examples, code snippets, or useful resources that help me understand and resolve this issue. I am confident that this community has experience in integrating Java and Crystal Reports, and any assistance you can provide will be highly appreciated.\r\n\r\nThank you in advance for your help and guidance on this matter!\r\n\r\nIn my pursuit of a viable solution, I have diligently experimented with multiple libraries, including JasperReports, in an effort to establish a functional integration between Java and Crystal Reports. However, despite my endeavors, I have encountered roadblocks that have thus far hindered my progress","title":"Generating a Crystal Reports Report in Java and Passing an ID as a Parameter","body":"<p>I am working on a Java project where I need to generate a report using Crystal Reports and then export it to a PDF file. My goal is to achieve this within a specific Java function, to which an ID will be passed as a parameter. However, I am facing difficulties in understanding how I can effectively achieve this integration.</p>\n<p>My question revolves around how I can structure this process in an organized manner. Here is the flow I have in mind:</p>\n<p>Receive an ID as a parameter in a Java function.</p>\n<p>I want to call a pre-designed report in Crystal Reports from this function.</p>\n<p>Pass the ID collected in step 1 as a parameter to the Crystal Reports report.</p>\n<p>Generate the report in Crystal Reports using the provided ID.</p>\n<p>Export the generated report to a PDF file.</p>\n<p>I am seeking guidance on how I can achieve each of these steps effectively. I would like to know how I can establish communication between Java and Crystal Reports, how to pass the ID as a parameter to the report, and how to finally generate and export the report in PDF format.</p>\n<p>I would greatly appreciate if someone could provide me with clear examples, code snippets, or useful resources that help me understand and resolve this issue. I am confident that this community has experience in integrating Java and Crystal Reports, and any assistance you can provide will be highly appreciated.</p>\n<p>Thank you in advance for your help and guidance on this matter!</p>\n<p>In my pursuit of a viable solution, I have diligently experimented with multiple libraries, including JasperReports, in an effort to establish a functional integration between Java and Crystal Reports. However, despite my endeavors, I have encountered roadblocks that have thus far hindered my progress</p>\n"},{"tags":["java","openapi-generator","spring-resttemplate","openapi-generator-maven-plugin"],"owner":{"account_id":14006816,"reputation":1,"user_id":10116699,"display_name":"Ho&#224;ng Đức Cương"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691654561,"creation_date":1691654561,"question_id":76873740,"body_markdown":"I have a Java/Spring-based microservices architecture with two services:\r\n\r\n- A - has a public endpoint which does some stuff and then calls the below endpoint on B. This endpoint requires an Authorization header to identify the user.\r\n\r\n- B - has an endpoint that also requires an Authorization header so that it can determine which user made the call.\r\n\r\nMy openapi secutiry scheme is:\r\n```\r\ncomponents:\r\n  securitySchemes:\r\n    bearerAuth:\r\n      type: http\r\n      in: header\r\n      scheme: bearer\r\n      bearerFormat: JWT\r\nsecurity:\r\n  - bearerAuth: []\r\n```\r\n\r\nwhat do I need to do to pass the Authorization header along from A to B?\r\n","title":"Pass Authorization Header in OpenAPI Generator-generated Java WebClient Code","body":"<p>I have a Java/Spring-based microservices architecture with two services:</p>\n<ul>\n<li><p>A - has a public endpoint which does some stuff and then calls the below endpoint on B. This endpoint requires an Authorization header to identify the user.</p>\n</li>\n<li><p>B - has an endpoint that also requires an Authorization header so that it can determine which user made the call.</p>\n</li>\n</ul>\n<p>My openapi secutiry scheme is:</p>\n<pre><code>components:\n  securitySchemes:\n    bearerAuth:\n      type: http\n      in: header\n      scheme: bearer\n      bearerFormat: JWT\nsecurity:\n  - bearerAuth: []\n</code></pre>\n<p>what do I need to do to pass the Authorization header along from A to B?</p>\n"},{"tags":["java","android","checkbox","colors"],"answers":[{"tags":[],"owner":{"account_id":5204135,"reputation":2985,"user_id":4162647,"display_name":"Gabriella Angelova"},"down_vote_count":6,"up_vote_count":2,"is_accepted":true,"score":-4,"last_activity_date":1450372054,"creation_date":1450372054,"answer_id":34340347,"question_id":34340256,"body_markdown":"Did you try to create a `selector` and assign this `selector` to your `CheckBox` like this for example:\r\n\r\n    //drawable file called cb_selector\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;selector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\r\n        &lt;item android:state_checked=&quot;true&quot; android:drawable=&quot;@drawable/checked&quot; /&gt;\r\n        &lt;item android:state_checked=&quot;false&quot; android:drawable=&quot;@drawable/unchecked&quot; /&gt;\r\n    &lt;/selector&gt;\r\nIn your layout file apply this file to your checkBox\r\n\r\n    &lt;CheckBox\r\n        android:id=&quot;@+id/myCheckBox&quot;\r\n        android:text=&quot;My CheckBox&quot;\r\n        android:button=&quot;@drawable/cb_selector&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;/&gt;\r\n\r\n`@drawable/checked` and `@drawable/unchecked` are two images of your checkbox, so you could put there a color that you want\r\n\r\n\r\nOR without changing the button layout, with adding this attribute to your checkbox\r\n\r\n    android:buttonTint=&quot;@color/YOUR_CHECKMARK_COLOR_HERE&quot;","title":"How to change checkbox checked color programmatically","body":"<p>Did you try to create a <code>selector</code> and assign this <code>selector</code> to your <code>CheckBox</code> like this for example:</p>\n\n<pre><code>//drawable file called cb_selector\n&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;selector xmlns:android=\"http://schemas.android.com/apk/res/android\"&gt;\n    &lt;item android:state_checked=\"true\" android:drawable=\"@drawable/checked\" /&gt;\n    &lt;item android:state_checked=\"false\" android:drawable=\"@drawable/unchecked\" /&gt;\n&lt;/selector&gt;\n</code></pre>\n\n<p>In your layout file apply this file to your checkBox</p>\n\n<pre><code>&lt;CheckBox\n    android:id=\"@+id/myCheckBox\"\n    android:text=\"My CheckBox\"\n    android:button=\"@drawable/cb_selector\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"/&gt;\n</code></pre>\n\n<p><code>@drawable/checked</code> and <code>@drawable/unchecked</code> are two images of your checkbox, so you could put there a color that you want</p>\n\n<p>OR without changing the button layout, with adding this attribute to your checkbox</p>\n\n<pre><code>android:buttonTint=\"@color/YOUR_CHECKMARK_COLOR_HERE\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1622897,"reputation":93,"user_id":4290407,"display_name":"Amit Sinha"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1450380022,"creation_date":1450380022,"answer_id":34342556,"question_id":34340256,"body_markdown":"    implement this file in res \r\n    \r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    \r\n    &lt;selector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\r\n     &lt;item android:state_checked=&quot;true&quot; android:state_focused=&quot;true&quot;\r\n      android:drawable=&quot;@drawable/checkbox_on_background_focus_yellow&quot; /&gt;\r\n     &lt;item android:state_checked=&quot;false&quot; android:state_focused=&quot;true&quot;\r\n      android:drawable=&quot;@drawable/checkbox_off_background_focus_yellow&quot; /&gt;\r\n     &lt;item android:state_checked=&quot;false&quot;\r\n      android:drawable=&quot;@drawable/checkbox_off_background&quot; /&gt;\r\n     &lt;item android:state_checked=&quot;true&quot;\r\n      android:drawable=&quot;@drawable/checkbox_on_background&quot; /&gt;\r\n    &lt;/selector&gt;\r\n    \r\n    \r\n    \r\n    and then add button to checkbox\r\n    \r\n    &lt;CheckBox android:layout_width=&quot;wrap_content&quot;\r\n     android:layout_height=&quot;wrap_content&quot; \r\n     android:text=&quot;new checkbox&quot;\r\n     android:background=&quot;@drawable/checkbox_background&quot; \r\n     android:button=&quot;@drawable/checkbox&quot; /&gt;","title":"How to change checkbox checked color programmatically","body":"<pre><code>implement this file in res \n\n&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n\n&lt;selector xmlns:android=\"http://schemas.android.com/apk/res/android\"&gt;\n &lt;item android:state_checked=\"true\" android:state_focused=\"true\"\n  android:drawable=\"@drawable/checkbox_on_background_focus_yellow\" /&gt;\n &lt;item android:state_checked=\"false\" android:state_focused=\"true\"\n  android:drawable=\"@drawable/checkbox_off_background_focus_yellow\" /&gt;\n &lt;item android:state_checked=\"false\"\n  android:drawable=\"@drawable/checkbox_off_background\" /&gt;\n &lt;item android:state_checked=\"true\"\n  android:drawable=\"@drawable/checkbox_on_background\" /&gt;\n&lt;/selector&gt;\n\n\n\nand then add button to checkbox\n\n&lt;CheckBox android:layout_width=\"wrap_content\"\n android:layout_height=\"wrap_content\" \n android:text=\"new checkbox\"\n android:background=\"@drawable/checkbox_background\" \n android:button=\"@drawable/checkbox\" /&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4905952,"reputation":11595,"user_id":3952691,"accept_rate":29,"display_name":"ywwynm"},"down_vote_count":0,"up_vote_count":24,"is_accepted":false,"score":24,"last_activity_date":1476350174,"creation_date":1476350174,"answer_id":40016892,"question_id":34340256,"body_markdown":"Replace your `CheckBox` with `AppCompatCheckBox` and call following method:\r\n\r\n    public static void setCheckBoxColor(AppCompatCheckBox checkBox, int uncheckedColor, int checkedColor) {\r\n        ColorStateList colorStateList = new ColorStateList(\r\n                new int[][] {\r\n                        new int[] { -android.R.attr.state_checked }, // unchecked\r\n                        new int[] {  android.R.attr.state_checked }  // checked\r\n                },\r\n                new int[] {\r\n                        uncheckedColor,\r\n                        checkedColor\r\n                }\r\n        );\r\n        checkBox.setSupportButtonTintList(colorStateList);\r\n    }","title":"How to change checkbox checked color programmatically","body":"<p>Replace your <code>CheckBox</code> with <code>AppCompatCheckBox</code> and call following method:</p>\n\n<pre><code>public static void setCheckBoxColor(AppCompatCheckBox checkBox, int uncheckedColor, int checkedColor) {\n    ColorStateList colorStateList = new ColorStateList(\n            new int[][] {\n                    new int[] { -android.R.attr.state_checked }, // unchecked\n                    new int[] {  android.R.attr.state_checked }  // checked\n            },\n            new int[] {\n                    uncheckedColor,\n                    checkedColor\n            }\n    );\n    checkBox.setSupportButtonTintList(colorStateList);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1172561,"reputation":5924,"user_id":1149398,"accept_rate":100,"display_name":"sud007"},"down_vote_count":0,"up_vote_count":40,"is_accepted":false,"score":40,"last_activity_date":1507274223,"creation_date":1507273911,"answer_id":46600207,"question_id":34340256,"body_markdown":"To tint the CompoundButton Tints try this, for Both the **API&gt;21 and below**. \r\n\r\n    if (Build.VERSION.SDK_INT &lt; 21) {\r\n        CompoundButtonCompat.setButtonTintList(button, ColorStateList.valueOf(tintColor));//Use android.support.v4.widget.CompoundButtonCompat when necessary else\r\n    } else {\r\n        button.setButtonTintList(ColorStateList.valueOf(tintColor));//setButtonTintList is accessible directly on API&gt;19\r\n    }","title":"How to change checkbox checked color programmatically","body":"<p>To tint the CompoundButton Tints try this, for Both the <strong>API>21 and below</strong>. </p>\n\n<pre><code>if (Build.VERSION.SDK_INT &lt; 21) {\n    CompoundButtonCompat.setButtonTintList(button, ColorStateList.valueOf(tintColor));//Use android.support.v4.widget.CompoundButtonCompat when necessary else\n} else {\n    button.setButtonTintList(ColorStateList.valueOf(tintColor));//setButtonTintList is accessible directly on API&gt;19\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21373830,"reputation":595,"user_id":15740938,"display_name":"ladytoky0"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1629449129,"creation_date":1629449129,"answer_id":68859399,"question_id":34340256,"body_markdown":"In kotlin you can just write this:\r\n```\r\nrefBtn.buttonTintList = ColorStateList.valueOf(Color.GRAY)\r\n```\r\n\r\nYou change change &#39;Color.GRAY&#39; by the color you want, or write Color.rgb() and define the color :)","title":"How to change checkbox checked color programmatically","body":"<p>In kotlin you can just write this:</p>\n<pre><code>refBtn.buttonTintList = ColorStateList.valueOf(Color.GRAY)\n</code></pre>\n<p>You change change 'Color.GRAY' by the color you want, or write Color.rgb() and define the color :)</p>\n"},{"tags":[],"owner":{"account_id":14172306,"reputation":1738,"user_id":10238560,"display_name":"Tarif Chakder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1636953383,"creation_date":1636884874,"answer_id":69962067,"question_id":34340256,"body_markdown":"**This is kotlin extension**\r\n\r\n    fun AppCompatCheckBox.setTintAuto(enabledColor : Int, disabledColor : Int) {\r\n    \r\n    val colorTint = ColorStateList(\r\n        arrayOf(\r\n            intArrayOf(-R.attr.state_checked),\r\n            intArrayOf(R.attr.state_checked)\r\n        ), intArrayOf(enabledColor , disabledColor )\r\n    )\r\n    this.buttonTintList = colorTint \r\n    this.setTextColor(colorTint )\r\n    }\r\n\r\n**Then use it**\r\n\r\n    checkBox.setTintAuto(activeColor,disabledColor)","title":"How to change checkbox checked color programmatically","body":"<p><strong>This is kotlin extension</strong></p>\n<pre><code>fun AppCompatCheckBox.setTintAuto(enabledColor : Int, disabledColor : Int) {\n\nval colorTint = ColorStateList(\n    arrayOf(\n        intArrayOf(-R.attr.state_checked),\n        intArrayOf(R.attr.state_checked)\n    ), intArrayOf(enabledColor , disabledColor )\n)\nthis.buttonTintList = colorTint \nthis.setTextColor(colorTint )\n}\n</code></pre>\n<p><strong>Then use it</strong></p>\n<pre><code>checkBox.setTintAuto(activeColor,disabledColor)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14542256,"reputation":348,"user_id":10503567,"display_name":"Maruf Alam"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691654243,"creation_date":1691654243,"answer_id":76873699,"question_id":34340256,"body_markdown":"**It works well for me (kotlin*)**\r\n\r\n \r\n\r\n    if (isChecked){\r\n                checkBox.buttonTintList = ColorStateList.valueOf(WHITE)\r\n            }else{\r\n                checkBox.buttonTintList = ColorStateList.valueOf(RED)\r\n            }","title":"How to change checkbox checked color programmatically","body":"<p><em><em>It works well for me (kotlin</em>)</em>*</p>\n<pre><code>if (isChecked){\n            checkBox.buttonTintList = ColorStateList.valueOf(WHITE)\n        }else{\n            checkBox.buttonTintList = ColorStateList.valueOf(RED)\n        }\n</code></pre>\n"}],"owner":{"account_id":1233989,"reputation":688,"user_id":1197993,"accept_rate":60,"display_name":"user112016322"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32646,"favorite_count":0,"down_vote_count":1,"up_vote_count":16,"accepted_answer_id":34340347,"answer_count":7,"score":15,"last_activity_date":1691654243,"creation_date":1450371767,"question_id":34340256,"body_markdown":"I&#39;m using the CheckBox view in Android.  I would like to change the color of it when its checked.  Right now its that default dark green color when its checked and I would like to change it to something different and when not checked, just be the default colors.\r\n\r\nHere&#39;s my code:\r\n\r\n    CheckBox c = new CheckBox(this);\r\n    c.setId(View.generateViewId());\r\n\r\n    c.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\r\n        @Override\r\n        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\r\n            if(buttonView.isChecked())\r\n            {\r\n                buttonView.setBackgroundColor(Color.rgb(64, 131, 207));\r\n            }\r\n            if(!buttonView.isChecked())\r\n            {\r\n                buttonView.setBackgroundColor(Color.WHITE);\r\n            }\r\n\r\n        }\r\n    });\r\n\r\nThe problem is that it does not change the right thing.  Any ideas on how to change this color?\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/bca81.png\r\n","title":"How to change checkbox checked color programmatically","body":"<p>I'm using the CheckBox view in Android.  I would like to change the color of it when its checked.  Right now its that default dark green color when its checked and I would like to change it to something different and when not checked, just be the default colors.</p>\n\n<p>Here's my code:</p>\n\n<pre><code>CheckBox c = new CheckBox(this);\nc.setId(View.generateViewId());\n\nc.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\n    @Override\n    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\n        if(buttonView.isChecked())\n        {\n            buttonView.setBackgroundColor(Color.rgb(64, 131, 207));\n        }\n        if(!buttonView.isChecked())\n        {\n            buttonView.setBackgroundColor(Color.WHITE);\n        }\n\n    }\n});\n</code></pre>\n\n<p>The problem is that it does not change the right thing.  Any ideas on how to change this color?</p>\n\n<p><a href=\"https://i.stack.imgur.com/bca81.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/bca81.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":["java","checkstyle"],"comments":[{"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1613549410,"post_id":66237859,"comment_id":117105334,"body_markdown":"Add a rule that every line match `^( {4})*(\\S.*)?$`","body":"Add a rule that every line match <code>^( {4})*(\\S.*)?$</code>"}],"answers":[{"tags":[],"owner":{"account_id":17059809,"reputation":171,"user_id":13160102,"display_name":"Nick Mancuso"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691654045,"creation_date":1614777952,"answer_id":66458020,"question_id":66237859,"body_markdown":"By default, Checkstyle&#39;s indentation check only ensures that your line wrapping indentation is *at least* 4. You can configure IndentationCheck to enforce exactly four spaces using the `forceStrictCondition` property:\r\n\r\n```\r\n&lt;module name=&quot;Indentation&quot;&gt;\r\n  &lt;property name=&quot;forceStrictCondition&quot; value=&quot;true&quot;/&gt;\r\n&lt;/module&gt;\r\n```\r\n\r\nRead more at [Checkstyle Indentation](https://checkstyle.org/checks/misc/indentation.html).","title":"Enforce exact 4-spaces indentation with Checkstyle","body":"<p>By default, Checkstyle's indentation check only ensures that your line wrapping indentation is <em>at least</em> 4. You can configure IndentationCheck to enforce exactly four spaces using the <code>forceStrictCondition</code> property:</p>\n<pre><code>&lt;module name=&quot;Indentation&quot;&gt;\n  &lt;property name=&quot;forceStrictCondition&quot; value=&quot;true&quot;/&gt;\n&lt;/module&gt;\n</code></pre>\n<p>Read more at <a href=\"https://checkstyle.org/checks/misc/indentation.html\" rel=\"nofollow noreferrer\">Checkstyle Indentation</a>.</p>\n"}],"owner":{"account_id":8052037,"reputation":862,"user_id":6070255,"display_name":"Aunmag"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1102,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691654045,"creation_date":1613548922,"question_id":66237859,"body_markdown":"How do I make chekstyle check that every indentation have four spaces, not five, not eigth.\r\n\r\n```java\r\n// good\r\nvar foo = baz()\r\n    .bar()\r\n    .foo();\r\n```\r\n\r\n```java\r\n// bad\r\nvar foo = baz()\r\n        .bar()\r\n        .foo();\r\n```\r\n","title":"Enforce exact 4-spaces indentation with Checkstyle","body":"<p>How do I make chekstyle check that every indentation have four spaces, not five, not eigth.</p>\n<pre class=\"lang-java prettyprint-override\"><code>// good\nvar foo = baz()\n    .bar()\n    .foo();\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>// bad\nvar foo = baz()\n        .bar()\n        .foo();\n</code></pre>\n"},{"tags":["java","android","in-app-purchase","in-app-billing"],"comments":[{"owner":{"account_id":4642355,"reputation":55,"user_id":4031613,"display_name":"deeppandya"},"score":0,"creation_date":1695222904,"post_id":76873624,"comment_id":135996352,"body_markdown":"With billing client 6.0.1, you have to set offerToken for skudetails. can you check if you have added the offer token ? i don&#39;t see it in the code you posted above.","body":"With billing client 6.0.1, you have to set offerToken for skudetails. can you check if you have added the offer token ? i don&#39;t see it in the code you posted above."}],"owner":{"account_id":17183107,"reputation":245,"user_id":12438238,"display_name":"Vasant Raval"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":95,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691653669,"creation_date":1691653669,"question_id":76873624,"body_markdown":"I have recetly added iap in my app but dont know why im no getting any dialog i have followed this blog\r\n\r\nhttps://programtown.com/how-to-make-in-app-purchase-in-android-using-google-play-billing-library/\r\n\r\nbut with some modifiation \r\n\r\n    public class Image_PostFragment extends Fragment implements PurchasesUpdatedListener {\r\n        private final String premiumProductId = &quot;com.dummyDevName.AppName.productid_premium&quot;;\r\n        MaterialButton  Premium_ImgPostTab;\r\n        AcknowledgePurchaseResponseListener ackPurchase = new AcknowledgePurchaseResponseListener() {\r\n            @Override\r\n            public void onAcknowledgePurchaseResponse(BillingResult billingResult) {\r\n                if (billingResult.getResponseCode() == BillingClient.BillingResponseCode.OK) {\r\n                    // Acknowledgment successful\r\n                    Toast.makeText(requireContext(), &quot;Acknowledgment successful&quot;, Toast.LENGTH_SHORT).show();\r\n                } else {\r\n                    // Handle acknowledgment error\r\n                    Toast.makeText(requireContext(), &quot;Acknowledgment unsuccessful&quot;, Toast.LENGTH_SHORT).show();\r\n                }\r\n            }\r\n        };\r\n    \r\n        // IAP\r\n        private BillingClient billingClient;\r\n    \r\n        @Override\r\n        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\r\n            // Inflate the layout for this fragment\r\n            View view = inflater.inflate(R.layout.fragment_image_post_tab, container, false);\r\n            //Var Initialization\r\n           \r\n            Premium_ImgPostTab = view.findViewById(R.id.buyPremium_ImgPostTab);\r\n           \r\n    \r\n    \r\n            // Initialize BillingClient\r\n            billingClient = BillingClient.newBuilder(requireContext()).enablePendingPurchases().setListener(this) // Use &quot;this&quot; if Image_PostFragment is implementing PurchasesUpdatedListener\r\n                    .build();\r\n    \r\n            billingClient.startConnection(new BillingClientStateListener() {\r\n                @Override\r\n                public void onBillingSetupFinished(BillingResult billingResult) {\r\n                    if (billingResult.getResponseCode() == BillingClient.BillingResponseCode.OK) {\r\n                        // You can query purchases here if needed\r\n                    }\r\n                }\r\n    \r\n                @Override\r\n                public void onBillingServiceDisconnected() {\r\n                    // Handle disconnection\r\n                }\r\n            });\r\n    \r\n    \r\n    \r\n            // Buy Premium Btn Click\r\n            Premium_ImgPostTab.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n    \r\n                    if (billingClient.isReady()) {\r\n                        purchase(v);\r\n                    } else {\r\n                        // Handle BillingClient not ready\r\n                        Toast.makeText(requireContext(), &quot;Unable to load win&quot;, Toast.LENGTH_SHORT).show();\r\n                    }\r\n                }\r\n            });\r\n    \r\n            return view;\r\n        }\r\n    \r\n         //initiate purchase on button click\r\n        public void purchase(View view) {\r\n            //check if service is already connected\r\n            if (billingClient.isReady()) {\r\n                initiatePurchase();\r\n            }\r\n            //else reconnect service\r\n            else {\r\n                billingClient = BillingClient.newBuilder(requireContext()).enablePendingPurchases().setListener((PurchasesUpdatedListener) requireContext()).build();\r\n                billingClient.startConnection(new BillingClientStateListener() {\r\n                    @Override\r\n                    public void onBillingSetupFinished(BillingResult billingResult) {\r\n                        if (billingResult.getResponseCode() == BillingClient.BillingResponseCode.OK) {\r\n                            initiatePurchase();\r\n                        } else {\r\n                            Toast.makeText(requireContext(), &quot;Error &quot; + billingResult.getDebugMessage(), Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    }\r\n    \r\n                    @Override\r\n                    public void onBillingServiceDisconnected() {\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    \r\n        private void initiatePurchase() {\r\n            List&lt;String&gt; skuList = new ArrayList&lt;&gt;();\r\n            skuList.add(premiumProductId);\r\n            SkuDetailsParams.Builder params = SkuDetailsParams.newBuilder();\r\n            params.setSkusList(skuList).setType(BillingClient.SkuType.INAPP);\r\n    \r\n            billingClient.querySkuDetailsAsync(params.build(), new SkuDetailsResponseListener() {\r\n                @Override\r\n                public void onSkuDetailsResponse(BillingResult billingResult, List&lt;SkuDetails&gt; skuDetailsList) {\r\n                    if (billingResult.getResponseCode() == BillingClient.BillingResponseCode.OK) {\r\n                        if (skuDetailsList != null &amp;&amp; skuDetailsList.size() &gt; 0) {\r\n                            BillingFlowParams flowParams = BillingFlowParams.newBuilder().setSkuDetails(skuDetailsList.get(0)).build();\r\n                            billingClient.launchBillingFlow(requireActivity(), flowParams);\r\n                        } else {\r\n                            // Handle case where SKU details are not available\r\n                        }\r\n                    } else {\r\n                        // Handle error\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    \r\n        @Override\r\n        public void onPurchasesUpdated(BillingResult billingResult, List&lt;Purchase&gt; purchases) {\r\n            Log.d(&quot;Billing&quot;, &quot;onPurchasesUpdated: Response Code: &quot; + billingResult.getResponseCode());\r\n    \r\n            if (billingResult.getResponseCode() == BillingClient.BillingResponseCode.OK &amp;&amp; purchases != null) {\r\n                Log.d(&quot;Billing&quot;, &quot;onPurchasesUpdated: Loading Ad&quot;);\r\n                Toast.makeText(requireContext(), &quot;Loading Ad&quot;, Toast.LENGTH_SHORT).show();\r\n                handlePurchases(purchases);\r\n            } else if (billingResult.getResponseCode() == BillingClient.BillingResponseCode.ITEM_ALREADY_OWNED) {\r\n                Log.d(&quot;Billing&quot;, &quot;onPurchasesUpdated: Already Owned&quot;);\r\n                Toast.makeText(requireContext(), &quot;Already Owned &quot;, Toast.LENGTH_SHORT).show();\r\n            } else if (billingResult.getResponseCode() == BillingClient.BillingResponseCode.USER_CANCELED) {\r\n                Log.d(&quot;Billing&quot;, &quot;onPurchasesUpdated: Purchase Canceled&quot;);\r\n                Toast.makeText(requireContext(), &quot;Purchase Canceled&quot;, Toast.LENGTH_SHORT).show();\r\n            } else {\r\n                Log.d(&quot;Billing&quot;, &quot;onPurchasesUpdated: Unknown Error&quot;);\r\n                Toast.makeText(requireContext(), &quot;Unknown Error&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n        }\r\n    \r\n    \r\n        // Handle Purchase\r\n        private void handlePurchases(List&lt;Purchase&gt; purchases) {\r\n            for (Purchase purchase : purchases) {\r\n                if (premiumProductId.equals(purchase.getSkus()) &amp;&amp; purchase.getPurchaseState() == Purchase.PurchaseState.PURCHASED) {\r\n                    // Handle valid purchase\r\n                    if (!purchase.isAcknowledged()) {\r\n                        AcknowledgePurchaseParams acknowledgePurchaseParams = AcknowledgePurchaseParams.newBuilder().setPurchaseToken(purchase.getPurchaseToken()).build();\r\n                        billingClient.acknowledgePurchase(acknowledgePurchaseParams, ackPurchase);\r\n                    } else {\r\n                        // Purchase is acknowledged, check if it&#39;s not yet saved in SharedPreferences\r\n                        if (!getPurchaseValueFromPref()) {\r\n                            // Save purchase status to SharedPreferences\r\n                            savePurchaseValueToPref(true);\r\n                            Toast.makeText(requireContext(), &quot;Item Purchased&quot;, Toast.LENGTH_SHORT).show();\r\n                            requireActivity().recreate();\r\n                        }\r\n                    }\r\n                }\r\n                // Handle other purchase states (PENDING, UNSPECIFIED_STATE)\r\n            }\r\n        }\r\n    \r\n        // Get purchase value from SharedPreferences\r\n        private boolean getPurchaseValueFromPref() {\r\n            return mSharedPrefs.getBoolean(REWARD_GRANTED_KEY, false);\r\n        }\r\n    \r\n        // Save purchase value to SharedPreferences\r\n        private void savePurchaseValueToPref(boolean value) {\r\n            mSharedPrefs.edit().putBoolean(REWARD_GRANTED_KEY, value).apply();\r\n        }\r\n    }\r\n\r\n\r\ni have also added the Security.java file as mention in the article mentioned \r\n\r\n    public class Security {\r\n        private static final String TAG = &quot;IABUtil/Security&quot;;\r\n    \r\n        private static final String KEY_FACTORY_ALGORITHM = &quot;RSA&quot;;\r\n        private static final String SIGNATURE_ALGORITHM = &quot;SHA1withRSA&quot;;\r\n    \r\n        /**\r\n         * Verifies that the data was signed with the given signature, and returns the verified\r\n         * purchase.\r\n         * @param base64PublicKey the base64-encoded public key to use for verifying.\r\n         * @param signedData the signed JSON string (signed, not encrypted)\r\n         * @param signature the signature for the data, signed with the private key\r\n         * @throws IOException if encoding algorithm is not supported or key specification\r\n         * is invalid\r\n         */\r\n        public static boolean verifyPurchase(String base64PublicKey, String signedData,\r\n                                             String signature) throws IOException {\r\n            if (TextUtils.isEmpty(signedData) || TextUtils.isEmpty(base64PublicKey)\r\n                    || TextUtils.isEmpty(signature)) {\r\n                //Purchase verification failed: missing data\r\n                return false;\r\n            }\r\n    \r\n            PublicKey key = generatePublicKey(&quot;added the key from monitization&gt;license&quot;);\r\n            return verify(key, signedData, signature);\r\n        }\r\n    \r\n        /**\r\n         * Generates a PublicKey instance from a string containing the Base64-encoded public key.\r\n         *\r\n         * @param encodedPublicKey Base64-encoded public key\r\n         * @throws IOException if encoding algorithm is not supported or key specification\r\n         * is invalid\r\n         */\r\n        public static PublicKey generatePublicKey(String encodedPublicKey) throws IOException {\r\n            try {\r\n                byte[] decodedKey = Base64.decode(encodedPublicKey, Base64.DEFAULT);\r\n                KeyFactory keyFactory = KeyFactory.getInstance(KEY_FACTORY_ALGORITHM);\r\n                return keyFactory.generatePublic(new X509EncodedKeySpec(decodedKey));\r\n            } catch (NoSuchAlgorithmException e) {\r\n                // &quot;RSA&quot; is guaranteed to be available.\r\n                throw new RuntimeException(e);\r\n            } catch (InvalidKeySpecException e) {\r\n                String msg = &quot;Invalid key specification: &quot; + e;\r\n                throw new IOException(msg);\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * Verifies that the signature from the server matches the computed signature on the data.\r\n         * Returns true if the data is correctly signed.\r\n         *\r\n         * @param publicKey public key associated with the developer account\r\n         * @param signedData signed data from server\r\n         * @param signature server signature\r\n         * @return true if the data and signature match\r\n         */\r\n        public static boolean verify(PublicKey publicKey, String signedData, String signature) {\r\n            byte[] signatureBytes;\r\n            try {\r\n                signatureBytes = Base64.decode(signature, Base64.DEFAULT);\r\n            } catch (IllegalArgumentException e) {\r\n                //Base64 decoding failed\r\n                return false;\r\n            }\r\n            try {\r\n                Signature signatureAlgorithm = Signature.getInstance(SIGNATURE_ALGORITHM);\r\n                signatureAlgorithm.initVerify(publicKey);\r\n                signatureAlgorithm.update(signedData.getBytes());\r\n                if (!signatureAlgorithm.verify(signatureBytes)) {\r\n                    //Signature verification failed\r\n                    return false;\r\n                }\r\n                return true;\r\n            } catch (NoSuchAlgorithmException e) {\r\n                // &quot;RSA&quot; is guaranteed to be available\r\n                throw new RuntimeException(e);\r\n            } catch (InvalidKeyException e) {\r\n                //Invalid key specification\r\n            } catch (SignatureException e) {\r\n                //Signature exception\r\n            }\r\n            return false;\r\n        }\r\n    }\r\n\r\n\r\n\r\nPlease note that i have added both keys properly the product id and the Base64-encoded RSA public key \r\n\r\nand cross verified 3 times , there is no issue with the keys in particlaur \r\n\r\n","title":"Issue with Loading In-App Purchase Dialog","body":"<p>I have recetly added iap in my app but dont know why im no getting any dialog i have followed this blog</p>\n<p><a href=\"https://programtown.com/how-to-make-in-app-purchase-in-android-using-google-play-billing-library/\" rel=\"nofollow noreferrer\">https://programtown.com/how-to-make-in-app-purchase-in-android-using-google-play-billing-library/</a></p>\n<p>but with some modifiation</p>\n<pre><code>public class Image_PostFragment extends Fragment implements PurchasesUpdatedListener {\n    private final String premiumProductId = &quot;com.dummyDevName.AppName.productid_premium&quot;;\n    MaterialButton  Premium_ImgPostTab;\n    AcknowledgePurchaseResponseListener ackPurchase = new AcknowledgePurchaseResponseListener() {\n        @Override\n        public void onAcknowledgePurchaseResponse(BillingResult billingResult) {\n            if (billingResult.getResponseCode() == BillingClient.BillingResponseCode.OK) {\n                // Acknowledgment successful\n                Toast.makeText(requireContext(), &quot;Acknowledgment successful&quot;, Toast.LENGTH_SHORT).show();\n            } else {\n                // Handle acknowledgment error\n                Toast.makeText(requireContext(), &quot;Acknowledgment unsuccessful&quot;, Toast.LENGTH_SHORT).show();\n            }\n        }\n    };\n\n    // IAP\n    private BillingClient billingClient;\n\n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\n        // Inflate the layout for this fragment\n        View view = inflater.inflate(R.layout.fragment_image_post_tab, container, false);\n        //Var Initialization\n       \n        Premium_ImgPostTab = view.findViewById(R.id.buyPremium_ImgPostTab);\n       \n\n\n        // Initialize BillingClient\n        billingClient = BillingClient.newBuilder(requireContext()).enablePendingPurchases().setListener(this) // Use &quot;this&quot; if Image_PostFragment is implementing PurchasesUpdatedListener\n                .build();\n\n        billingClient.startConnection(new BillingClientStateListener() {\n            @Override\n            public void onBillingSetupFinished(BillingResult billingResult) {\n                if (billingResult.getResponseCode() == BillingClient.BillingResponseCode.OK) {\n                    // You can query purchases here if needed\n                }\n            }\n\n            @Override\n            public void onBillingServiceDisconnected() {\n                // Handle disconnection\n            }\n        });\n\n\n\n        // Buy Premium Btn Click\n        Premium_ImgPostTab.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n\n                if (billingClient.isReady()) {\n                    purchase(v);\n                } else {\n                    // Handle BillingClient not ready\n                    Toast.makeText(requireContext(), &quot;Unable to load win&quot;, Toast.LENGTH_SHORT).show();\n                }\n            }\n        });\n\n        return view;\n    }\n\n     //initiate purchase on button click\n    public void purchase(View view) {\n        //check if service is already connected\n        if (billingClient.isReady()) {\n            initiatePurchase();\n        }\n        //else reconnect service\n        else {\n            billingClient = BillingClient.newBuilder(requireContext()).enablePendingPurchases().setListener((PurchasesUpdatedListener) requireContext()).build();\n            billingClient.startConnection(new BillingClientStateListener() {\n                @Override\n                public void onBillingSetupFinished(BillingResult billingResult) {\n                    if (billingResult.getResponseCode() == BillingClient.BillingResponseCode.OK) {\n                        initiatePurchase();\n                    } else {\n                        Toast.makeText(requireContext(), &quot;Error &quot; + billingResult.getDebugMessage(), Toast.LENGTH_SHORT).show();\n                    }\n                }\n\n                @Override\n                public void onBillingServiceDisconnected() {\n                }\n            });\n        }\n    }\n\n    private void initiatePurchase() {\n        List&lt;String&gt; skuList = new ArrayList&lt;&gt;();\n        skuList.add(premiumProductId);\n        SkuDetailsParams.Builder params = SkuDetailsParams.newBuilder();\n        params.setSkusList(skuList).setType(BillingClient.SkuType.INAPP);\n\n        billingClient.querySkuDetailsAsync(params.build(), new SkuDetailsResponseListener() {\n            @Override\n            public void onSkuDetailsResponse(BillingResult billingResult, List&lt;SkuDetails&gt; skuDetailsList) {\n                if (billingResult.getResponseCode() == BillingClient.BillingResponseCode.OK) {\n                    if (skuDetailsList != null &amp;&amp; skuDetailsList.size() &gt; 0) {\n                        BillingFlowParams flowParams = BillingFlowParams.newBuilder().setSkuDetails(skuDetailsList.get(0)).build();\n                        billingClient.launchBillingFlow(requireActivity(), flowParams);\n                    } else {\n                        // Handle case where SKU details are not available\n                    }\n                } else {\n                    // Handle error\n                }\n            }\n        });\n    }\n\n    @Override\n    public void onPurchasesUpdated(BillingResult billingResult, List&lt;Purchase&gt; purchases) {\n        Log.d(&quot;Billing&quot;, &quot;onPurchasesUpdated: Response Code: &quot; + billingResult.getResponseCode());\n\n        if (billingResult.getResponseCode() == BillingClient.BillingResponseCode.OK &amp;&amp; purchases != null) {\n            Log.d(&quot;Billing&quot;, &quot;onPurchasesUpdated: Loading Ad&quot;);\n            Toast.makeText(requireContext(), &quot;Loading Ad&quot;, Toast.LENGTH_SHORT).show();\n            handlePurchases(purchases);\n        } else if (billingResult.getResponseCode() == BillingClient.BillingResponseCode.ITEM_ALREADY_OWNED) {\n            Log.d(&quot;Billing&quot;, &quot;onPurchasesUpdated: Already Owned&quot;);\n            Toast.makeText(requireContext(), &quot;Already Owned &quot;, Toast.LENGTH_SHORT).show();\n        } else if (billingResult.getResponseCode() == BillingClient.BillingResponseCode.USER_CANCELED) {\n            Log.d(&quot;Billing&quot;, &quot;onPurchasesUpdated: Purchase Canceled&quot;);\n            Toast.makeText(requireContext(), &quot;Purchase Canceled&quot;, Toast.LENGTH_SHORT).show();\n        } else {\n            Log.d(&quot;Billing&quot;, &quot;onPurchasesUpdated: Unknown Error&quot;);\n            Toast.makeText(requireContext(), &quot;Unknown Error&quot;, Toast.LENGTH_SHORT).show();\n        }\n    }\n\n\n    // Handle Purchase\n    private void handlePurchases(List&lt;Purchase&gt; purchases) {\n        for (Purchase purchase : purchases) {\n            if (premiumProductId.equals(purchase.getSkus()) &amp;&amp; purchase.getPurchaseState() == Purchase.PurchaseState.PURCHASED) {\n                // Handle valid purchase\n                if (!purchase.isAcknowledged()) {\n                    AcknowledgePurchaseParams acknowledgePurchaseParams = AcknowledgePurchaseParams.newBuilder().setPurchaseToken(purchase.getPurchaseToken()).build();\n                    billingClient.acknowledgePurchase(acknowledgePurchaseParams, ackPurchase);\n                } else {\n                    // Purchase is acknowledged, check if it's not yet saved in SharedPreferences\n                    if (!getPurchaseValueFromPref()) {\n                        // Save purchase status to SharedPreferences\n                        savePurchaseValueToPref(true);\n                        Toast.makeText(requireContext(), &quot;Item Purchased&quot;, Toast.LENGTH_SHORT).show();\n                        requireActivity().recreate();\n                    }\n                }\n            }\n            // Handle other purchase states (PENDING, UNSPECIFIED_STATE)\n        }\n    }\n\n    // Get purchase value from SharedPreferences\n    private boolean getPurchaseValueFromPref() {\n        return mSharedPrefs.getBoolean(REWARD_GRANTED_KEY, false);\n    }\n\n    // Save purchase value to SharedPreferences\n    private void savePurchaseValueToPref(boolean value) {\n        mSharedPrefs.edit().putBoolean(REWARD_GRANTED_KEY, value).apply();\n    }\n}\n</code></pre>\n<p>i have also added the Security.java file as mention in the article mentioned</p>\n<pre><code>public class Security {\n    private static final String TAG = &quot;IABUtil/Security&quot;;\n\n    private static final String KEY_FACTORY_ALGORITHM = &quot;RSA&quot;;\n    private static final String SIGNATURE_ALGORITHM = &quot;SHA1withRSA&quot;;\n\n    /**\n     * Verifies that the data was signed with the given signature, and returns the verified\n     * purchase.\n     * @param base64PublicKey the base64-encoded public key to use for verifying.\n     * @param signedData the signed JSON string (signed, not encrypted)\n     * @param signature the signature for the data, signed with the private key\n     * @throws IOException if encoding algorithm is not supported or key specification\n     * is invalid\n     */\n    public static boolean verifyPurchase(String base64PublicKey, String signedData,\n                                         String signature) throws IOException {\n        if (TextUtils.isEmpty(signedData) || TextUtils.isEmpty(base64PublicKey)\n                || TextUtils.isEmpty(signature)) {\n            //Purchase verification failed: missing data\n            return false;\n        }\n\n        PublicKey key = generatePublicKey(&quot;added the key from monitization&gt;license&quot;);\n        return verify(key, signedData, signature);\n    }\n\n    /**\n     * Generates a PublicKey instance from a string containing the Base64-encoded public key.\n     *\n     * @param encodedPublicKey Base64-encoded public key\n     * @throws IOException if encoding algorithm is not supported or key specification\n     * is invalid\n     */\n    public static PublicKey generatePublicKey(String encodedPublicKey) throws IOException {\n        try {\n            byte[] decodedKey = Base64.decode(encodedPublicKey, Base64.DEFAULT);\n            KeyFactory keyFactory = KeyFactory.getInstance(KEY_FACTORY_ALGORITHM);\n            return keyFactory.generatePublic(new X509EncodedKeySpec(decodedKey));\n        } catch (NoSuchAlgorithmException e) {\n            // &quot;RSA&quot; is guaranteed to be available.\n            throw new RuntimeException(e);\n        } catch (InvalidKeySpecException e) {\n            String msg = &quot;Invalid key specification: &quot; + e;\n            throw new IOException(msg);\n        }\n    }\n\n    /**\n     * Verifies that the signature from the server matches the computed signature on the data.\n     * Returns true if the data is correctly signed.\n     *\n     * @param publicKey public key associated with the developer account\n     * @param signedData signed data from server\n     * @param signature server signature\n     * @return true if the data and signature match\n     */\n    public static boolean verify(PublicKey publicKey, String signedData, String signature) {\n        byte[] signatureBytes;\n        try {\n            signatureBytes = Base64.decode(signature, Base64.DEFAULT);\n        } catch (IllegalArgumentException e) {\n            //Base64 decoding failed\n            return false;\n        }\n        try {\n            Signature signatureAlgorithm = Signature.getInstance(SIGNATURE_ALGORITHM);\n            signatureAlgorithm.initVerify(publicKey);\n            signatureAlgorithm.update(signedData.getBytes());\n            if (!signatureAlgorithm.verify(signatureBytes)) {\n                //Signature verification failed\n                return false;\n            }\n            return true;\n        } catch (NoSuchAlgorithmException e) {\n            // &quot;RSA&quot; is guaranteed to be available\n            throw new RuntimeException(e);\n        } catch (InvalidKeyException e) {\n            //Invalid key specification\n        } catch (SignatureException e) {\n            //Signature exception\n        }\n        return false;\n    }\n}\n</code></pre>\n<p>Please note that i have added both keys properly the product id and the Base64-encoded RSA public key</p>\n<p>and cross verified 3 times , there is no issue with the keys in particlaur</p>\n"},{"tags":["java","android","android-camera2","android-camerax"],"owner":{"account_id":26971467,"reputation":1,"user_id":20537422,"display_name":"Mecap"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691653626,"creation_date":1691653626,"question_id":76873617,"body_markdown":"how can i open two different &#39;back facing&#39; physical cameras and set preview?\r\n\r\nI want to use both Camera Id 0 (with physical Camera Ids \\[2,5,6,7\\]) and Camera Id 2 simultaneously..\r\n\r\nI could get one back facing logical camera and front facing camera at the same time, but failed to get two back facing physical cameras with error on logcat\r\n\r\n```\r\nCameraService           cameraserver          E     Conflicts with: Device 2, client package com.young.camera2demoapp (PID 30624, score -2, state 2)\r\n```\r\n\r\n```\r\nfor (String cameraId : cameraIdArray) {\r\n    if (cameraId.equals(cameraID_0)) {\r\n        TextureView textureView = textureView_1;\r\n        textureView.setSurfaceTextureListener(new TextureView.SurfaceTextureListener() {...});\r\n    else if(cameraId.equals(cameraID_2)){\r\n        TextureView textureView = textureView_1;\r\n        textureView.setSurfaceTextureListener(new TextureView.SurfaceTextureListener() {...});\r\n```\r\n\r\nusing for loop for targeting cameraIds (in my case id 0 and 2), I set two surfaceTextureListeners for each camera and &#39;openCamera()&#39; inside of &#39;onSurfaceTextureAvailable()&#39;\r\n\r\n```\r\npublic void onSurfaceTextureAvailable(SurfaceTexture surfaceTexture, int width, int height){\r\n    Surface surface = new Surface(surfaceTexture);\r\n    cameraManager.openCamera(cameraId, new CameraDevice.StateCallback() {\r\n        public void onOpened(@NonNull CameraDevice camera) {\r\n            List&lt;Surface&gt; outputSurfaces = new ArrayList&lt;&gt;();\r\n            outputSurfaces.add(surface);\r\n            camera.createCaptureSession(outputSurfaces, new CameraCaptureSession.StateCallback() \r\n            {\r\n                @Override\r\n                public void onConfigured(@NonNull CameraCaptureSession session) {\r\n                    CaptureRequest.Builder captureBuilder = \r\n                        camera.createCaptureRequest(CameraDevice.TEMPLATE_PREVIEW);\r\n                    captureBuilder.addTarget(surface);\r\n                    session.setRepeatingRequest(captureBuilder.build(), null, null);\r\n            }\r\n        ..\r\n}\r\n```\r\n\r\nin &#39;onSurfaceTextureAvailable()&#39;, cameraMangaer open camera with id and create each capture session and request\r\n\r\nthen setRequest.","title":"Multiple cameras preview issue on Camera2 Android","body":"<p>how can i open two different 'back facing' physical cameras and set preview?</p>\n<p>I want to use both Camera Id 0 (with physical Camera Ids [2,5,6,7]) and Camera Id 2 simultaneously..</p>\n<p>I could get one back facing logical camera and front facing camera at the same time, but failed to get two back facing physical cameras with error on logcat</p>\n<pre><code>CameraService           cameraserver          E     Conflicts with: Device 2, client package com.young.camera2demoapp (PID 30624, score -2, state 2)\n</code></pre>\n<pre><code>for (String cameraId : cameraIdArray) {\n    if (cameraId.equals(cameraID_0)) {\n        TextureView textureView = textureView_1;\n        textureView.setSurfaceTextureListener(new TextureView.SurfaceTextureListener() {...});\n    else if(cameraId.equals(cameraID_2)){\n        TextureView textureView = textureView_1;\n        textureView.setSurfaceTextureListener(new TextureView.SurfaceTextureListener() {...});\n</code></pre>\n<p>using for loop for targeting cameraIds (in my case id 0 and 2), I set two surfaceTextureListeners for each camera and 'openCamera()' inside of 'onSurfaceTextureAvailable()'</p>\n<pre><code>public void onSurfaceTextureAvailable(SurfaceTexture surfaceTexture, int width, int height){\n    Surface surface = new Surface(surfaceTexture);\n    cameraManager.openCamera(cameraId, new CameraDevice.StateCallback() {\n        public void onOpened(@NonNull CameraDevice camera) {\n            List&lt;Surface&gt; outputSurfaces = new ArrayList&lt;&gt;();\n            outputSurfaces.add(surface);\n            camera.createCaptureSession(outputSurfaces, new CameraCaptureSession.StateCallback() \n            {\n                @Override\n                public void onConfigured(@NonNull CameraCaptureSession session) {\n                    CaptureRequest.Builder captureBuilder = \n                        camera.createCaptureRequest(CameraDevice.TEMPLATE_PREVIEW);\n                    captureBuilder.addTarget(surface);\n                    session.setRepeatingRequest(captureBuilder.build(), null, null);\n            }\n        ..\n}\n</code></pre>\n<p>in 'onSurfaceTextureAvailable()', cameraMangaer open camera with id and create each capture session and request</p>\n<p>then setRequest.</p>\n"},{"tags":["java","java-8","enums","switch-statement"],"comments":[{"owner":{"account_id":11683,"reputation":1438169,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":3,"creation_date":1691650867,"post_id":76873286,"comment_id":135520717,"body_markdown":"I suggest you write a method in `ResponseCode` to convert a string code to the corresponding `ResponseCode`.","body":"I suggest you write a method in <code>ResponseCode</code> to convert a string code to the corresponding <code>ResponseCode</code>."},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":1,"creation_date":1691651346,"post_id":76873286,"comment_id":135520803,"body_markdown":"`ResponseCode rc= ResponseCode.valueOf(response);`, then switch on that value.","body":"<code>ResponseCode rc= ResponseCode.valueOf(response);</code>, then switch on that value."},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1691651672,"post_id":76873286,"comment_id":135520874,"body_markdown":"Please share an [mcve]","body":"Please share an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"},{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1691652286,"post_id":76873286,"comment_id":135521009,"body_markdown":"@AndyTurner I m confused as to why it is not a constant value. Isnt it already set inside the enum that the value of the response code is a certain final value APPROVED --&gt; &quot;AP&quot;? Why is it not valid?","body":"@AndyTurner I m confused as to why it is not a constant value. Isnt it already set inside the enum that the value of the response code is a certain final value APPROVED --&gt; &quot;AP&quot;? Why is it not valid?"},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":2,"creation_date":1691652392,"post_id":76873286,"comment_id":135521025,"body_markdown":"@experimentunit1998X the Java Language Specification has a narrow definition of constant expressions: things like literals are, things like method invocations are not. The compiler has no way of knowing that the method body only returns a constant-valued field.","body":"@experimentunit1998X the Java Language Specification has a narrow definition of constant expressions: things like literals are, things like method invocations are not. The compiler has no way of knowing that the method body only returns a constant-valued field."}],"answers":[{"tags":[],"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691651715,"creation_date":1691650867,"answer_id":76873300,"question_id":76873286,"body_markdown":"You can use the enum directly:\r\n\r\n    ResponseCode responseCode = ...\r\n\r\n    switch(responseCode) {\r\n    case APPROVED:\r\n        // Response handling here\r\n        break;\r\n    ...\r\n    }\r\n\r\n","title":"Using a Switch-Case with an enum that has string values, in Java?","body":"<p>You can use the enum directly:</p>\n<pre><code>ResponseCode responseCode = ...\n\nswitch(responseCode) {\ncase APPROVED:\n    // Response handling here\n    break;\n...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1691651411,"creation_date":1691651411,"answer_id":76873369,"question_id":76873286,"body_markdown":"Convert your String to a ResponseCode:\r\n\r\n```\r\nResponseCode rc= ResponseCode.valueOf(response);\r\n```\r\n\r\nthen switch on that value:\r\n\r\n```\r\nswitch (rc) {\r\n  case APPROVED:\r\n    // Response handling here\r\n    break;\r\n...\r\n}\r\n```\r\n\r\nYou should probably also handle the case where the String can&#39;t be converted to an enum value.","title":"Using a Switch-Case with an enum that has string values, in Java?","body":"<p>Convert your String to a ResponseCode:</p>\n<pre><code>ResponseCode rc= ResponseCode.valueOf(response);\n</code></pre>\n<p>then switch on that value:</p>\n<pre><code>switch (rc) {\n  case APPROVED:\n    // Response handling here\n    break;\n...\n}\n</code></pre>\n<p>You should probably also handle the case where the String can't be converted to an enum value.</p>\n"},{"tags":[],"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1691651603,"creation_date":1691651603,"answer_id":76873389,"question_id":76873286,"body_markdown":"You are switching on a `String`, but you are using `ResponseCode` as the cases, which doesn&#39;t make sense. A `String` can never match a `ResponseCode`.\r\n\r\nThere are multiple ways around this. Instead of an enum, you can use `static final` constants:\r\n\r\n```\r\nfinal class ResponseCode {\r\n    private ResponseCode() {}\r\n    public static final String APPROVED = &quot;AP&quot;;\r\n    public static final String REJECTED = &quot;RJ&quot;;\r\n}\r\n```\r\n\r\n```\r\nswitch (someResponseCode) {\r\n    case ResponseCode.APPROVED -&gt; { ... }\r\n    case ResponseCode.REJECTED -&gt; { ... }\r\n    // remember to handle the case of not matching any response code!\r\n    default -&gt; { ... }\r\n}\r\n```\r\n\r\nAlternatively, write a method that converts `String`s to your enum:\r\n\r\n    public static ResponseCode fromString(String s) {\r\n        return switch (s) {\r\n            case &quot;AP&quot; -&gt; APPROVED;\r\n            case &quot;RJ&quot; -&gt; REJECTED;\r\n            default -&gt; null;\r\n        };\r\n        // or: Arrays.stream(ResponseCode.values()).filter(x -&gt; x.code.equals(s)).findFirst().orElse(null);\r\n    }\r\n\r\nNote that you can remove the `code` field, if you don&#39;t need it for anything else.\r\n\r\nThen you can `switch` like this:\r\n\r\n```\r\nswitch (ResponseCode.fromString(someResponseCode)) {\r\n    case APPROVED -&gt; { ... }\r\n    case REJECTED -&gt; { ... }\r\n    // remember to handle the case of not matching any response code!\r\n    case null -&gt; { ... }\r\n}\r\n```","title":"Using a Switch-Case with an enum that has string values, in Java?","body":"<p>You are switching on a <code>String</code>, but you are using <code>ResponseCode</code> as the cases, which doesn't make sense. A <code>String</code> can never match a <code>ResponseCode</code>.</p>\n<p>There are multiple ways around this. Instead of an enum, you can use <code>static final</code> constants:</p>\n<pre><code>final class ResponseCode {\n    private ResponseCode() {}\n    public static final String APPROVED = &quot;AP&quot;;\n    public static final String REJECTED = &quot;RJ&quot;;\n}\n</code></pre>\n<pre><code>switch (someResponseCode) {\n    case ResponseCode.APPROVED -&gt; { ... }\n    case ResponseCode.REJECTED -&gt; { ... }\n    // remember to handle the case of not matching any response code!\n    default -&gt; { ... }\n}\n</code></pre>\n<p>Alternatively, write a method that converts <code>String</code>s to your enum:</p>\n<pre><code>public static ResponseCode fromString(String s) {\n    return switch (s) {\n        case &quot;AP&quot; -&gt; APPROVED;\n        case &quot;RJ&quot; -&gt; REJECTED;\n        default -&gt; null;\n    };\n    // or: Arrays.stream(ResponseCode.values()).filter(x -&gt; x.code.equals(s)).findFirst().orElse(null);\n}\n</code></pre>\n<p>Note that you can remove the <code>code</code> field, if you don't need it for anything else.</p>\n<p>Then you can <code>switch</code> like this:</p>\n<pre><code>switch (ResponseCode.fromString(someResponseCode)) {\n    case APPROVED -&gt; { ... }\n    case REJECTED -&gt; { ... }\n    // remember to handle the case of not matching any response code!\n    case null -&gt; { ... }\n}\n</code></pre>\n"}],"owner":{"account_id":18044530,"reputation":23,"user_id":13115866,"display_name":"LaplacesCat"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":89,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":76873389,"answer_count":3,"score":1,"last_activity_date":1691653519,"creation_date":1691650748,"question_id":76873286,"body_markdown":"In my application, I receive a response that has hard-coded values it can be.\r\nI have created an enum with those responses as so:\r\n```java\r\nenum ResponseCode {\r\n    APPROVED(&quot;AP&quot;),\r\n    REJECTED(&quot;RJ&quot;),\r\n    ...;\r\n\r\n    private final String code;\r\n\r\n    private ResponseCode(String code) {\r\n        this.code = code;\r\n    }\r\n}\r\n```\r\nI would handle a response differently depending on which code I receive. I thought of using a switch-case to solve this problem.\r\n```java\r\nString response = functionThatReturnsString(); // Could be &quot;AP&quot; or &quot;RJ&quot; etc.\r\n\r\nswitch(response) {\r\ncase ResponseCode.APPROVED:\r\n    // Response handling here\r\n    break;\r\n...\r\n}\r\n```\r\nHowever, I get the error `Type mismatch: cannot convert from ResponseCode to String`\r\n\r\nIs there a way to get around this? Or is there a better way to do this?","title":"Using a Switch-Case with an enum that has string values, in Java?","body":"<p>In my application, I receive a response that has hard-coded values it can be.\nI have created an enum with those responses as so:</p>\n<pre class=\"lang-java prettyprint-override\"><code>enum ResponseCode {\n    APPROVED(&quot;AP&quot;),\n    REJECTED(&quot;RJ&quot;),\n    ...;\n\n    private final String code;\n\n    private ResponseCode(String code) {\n        this.code = code;\n    }\n}\n</code></pre>\n<p>I would handle a response differently depending on which code I receive. I thought of using a switch-case to solve this problem.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String response = functionThatReturnsString(); // Could be &quot;AP&quot; or &quot;RJ&quot; etc.\n\nswitch(response) {\ncase ResponseCode.APPROVED:\n    // Response handling here\n    break;\n...\n}\n</code></pre>\n<p>However, I get the error <code>Type mismatch: cannot convert from ResponseCode to String</code></p>\n<p>Is there a way to get around this? Or is there a better way to do this?</p>\n"},{"tags":["java","velocity","apache-velocity","velocity-template-language"],"comments":[{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":0,"creation_date":1653458830,"post_id":72327225,"comment_id":127854322,"body_markdown":"If velocity doesn&#39;t provide that functionality (which I am sure it does not), you can implement it yourself [and use it in velocity](https://stackoverflow.com/a/35656731/7109162)","body":"If velocity doesn&#39;t provide that functionality (which I am sure it does not), you can implement it yourself <a href=\"https://stackoverflow.com/a/35656731/7109162\">and use it in velocity</a>"},{"owner":{"account_id":1041234,"reputation":1441,"user_id":1047226,"accept_rate":70,"display_name":"hell_storm2004"},"score":0,"creation_date":1661786873,"post_id":72327225,"comment_id":129848744,"body_markdown":"The is definitely no set API for this. You would have to write your own logic for this. At the end of the day, Velocity does support Java-like code, the syntax is bit different. So you can write you own in Velocity.","body":"The is definitely no set API for this. You would have to write your own logic for this. At the end of the day, Velocity does support Java-like code, the syntax is bit different. So you can write you own in Velocity."}],"owner":{"account_id":19126627,"reputation":113,"user_id":13969476,"display_name":"Ayush Naithani"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":184,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691653463,"creation_date":1653114641,"question_id":72327225,"body_markdown":"I am using velocity template, I want to convert number to words, Is there any library present for that? \r\n\r\neg: 99999999 = ninety-nine million nine hundred ninety-nine thousand nine hundred ninety-nine\r\n","title":"How to covert number to words in velocity template?","body":"<p>I am using velocity template, I want to convert number to words, Is there any library present for that?</p>\n<p>eg: 99999999 = ninety-nine million nine hundred ninety-nine thousand nine hundred ninety-nine</p>\n"},{"tags":["java","exception","netty"],"comments":[{"owner":{"account_id":1695831,"reputation":141,"user_id":1557229,"display_name":"Tuan Huy"},"score":2,"creation_date":1356428423,"post_id":14029393,"comment_id":19378136,"body_markdown":"The exception raises more frequently when i write to send data to multi-client in for-loop","body":"The exception raises more frequently when i write to send data to multi-client in for-loop"},{"owner":{"account_id":1695831,"reputation":141,"user_id":1557229,"display_name":"Tuan Huy"},"score":0,"creation_date":1356430237,"post_id":14029393,"comment_id":19378495,"body_markdown":"Thanks Tube. Code like this                                                      for (PlayerInfo p:this.players.values()){                                \n   ChannelBuffer bff = ChannelBuffers.buffer(18);\t\t\t\t\t    bff.writeByte(Events.S_SERVER_PUSH);                            \n   bff.writeByte(typePush);bff.writeInt(idRoom);                            \n\t\t\t\t\tbff.writeInt(idGame); \n\t\t\t\t\tbff.writeInt(gameCnt*2);\n\t\t\t\t\tbff.writeInt(freePlayer);                               \t\t\t\t\t\n\t\t\t\t\tp.getChannel().write(bff);\n\t\t\t\t\tThread.sleep(100);\t\t\t\t\t\n\t\t\t}\n\t\t}","body":"Thanks Tube. Code like this                                                      for (PlayerInfo p:this.players.values()){                                    ChannelBuffer bff = ChannelBuffers.buffer(18);\t\t\t\t\t    bff.writeByte(Events.S_SERVER_PUSH);                                bff.writeByte(typePush);bff.writeInt(idRoom);                             \t\t\t\t\tbff.writeInt(idGame);  \t\t\t\t\tbff.writeInt(gameCnt*2); \t\t\t\t\tbff.writeInt(freePlayer);                               \t\t\t\t\t \t\t\t\t\tp.getChannel().write(bff); \t\t\t\t\tThread.sleep(100);\t\t\t\t\t \t\t\t} \t\t}"},{"owner":{"account_id":4747041,"reputation":1667,"user_id":3838094,"accept_rate":44,"display_name":"james"},"score":0,"creation_date":1406409044,"post_id":14029393,"comment_id":38824221,"body_markdown":"Related question - https://stackoverflow.com/questions/24975455/how-do-you-detect-a-network-disconnection-when-downloading-a-file-in-java","body":"Related question - <a href=\"https://stackoverflow.com/questions/24975455/how-do-you-detect-a-network-disconnection-when-downloading-a-file-in-java\" title=\"how do you detect a network disconnection when downloading a file in java\">stackoverflow.com/questions/24975455/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":22568,"reputation":12271,"user_id":55808,"accept_rate":92,"display_name":"trustin"},"down_vote_count":1,"up_vote_count":13,"is_accepted":false,"score":12,"last_activity_date":1544020627,"creation_date":1356496062,"answer_id":14036000,"question_id":14029393,"body_markdown":"`ClosedChannelException` merely tells you that the connection has been closed, so, the write request you issued could not be done.  It usually means either:    \r\n  \r\n(1) your application closed the connection somewhere else before you write the message or   \r\n(2) your peer closed the connection before reading your message.    \r\n\r\nIf you fix (1) and (2), you should not see the `ClosedChannelException` anymore.","title":"Exception java.nio.channels.ClosedChannelException when write to client channel","body":"<p><code>ClosedChannelException</code> merely tells you that the connection has been closed, so, the write request you issued could not be done.  It usually means either:    </p>\n\n<p>(1) your application closed the connection somewhere else before you write the message or<br>\n(2) your peer closed the connection before reading your message.    </p>\n\n<p>If you fix (1) and (2), you should not see the <code>ClosedChannelException</code> anymore.</p>\n"},{"tags":[],"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1390705082,"creation_date":1390705082,"answer_id":21359088,"question_id":14029393,"body_markdown":"ClosedChannelException means *you* have closed the channel and continued to use it. It is a programming error on your part.","title":"Exception java.nio.channels.ClosedChannelException when write to client channel","body":"<p>ClosedChannelException means <em>you</em> have closed the channel and continued to use it. It is a programming error on your part.</p>\n"},{"tags":[],"owner":{"account_id":29197474,"reputation":11,"user_id":22368257,"display_name":"Aax"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691653449,"creation_date":1691653449,"answer_id":76873597,"question_id":14029393,"body_markdown":"I recently ran into this problem, and it was a bit of a pain to debug.\r\nIn my case, the reason was that I was creating network connection from GUI thread. Basically I just had a simple button and established websocket connection there.\r\nThis seemed innocent enough to me, as this was just supposed to be a quick test to figure out connection capabilities of my app.\r\nWhat I didn&#39;t know is that Android 3.0+ explicitly forbids any networking from GUI thread, so it throws an internal exception and then the connection gets closed. Unfortunately, none of that was communicated to me by the library I used (Jetty), and because this is an async process - you just gotta know where to look.\r\n\r\nTLDR: If you run into this, make sure to check you are not creating connections from GUI thread, because Android WILL close them. :D","title":"Exception java.nio.channels.ClosedChannelException when write to client channel","body":"<p>I recently ran into this problem, and it was a bit of a pain to debug.\nIn my case, the reason was that I was creating network connection from GUI thread. Basically I just had a simple button and established websocket connection there.\nThis seemed innocent enough to me, as this was just supposed to be a quick test to figure out connection capabilities of my app.\nWhat I didn't know is that Android 3.0+ explicitly forbids any networking from GUI thread, so it throws an internal exception and then the connection gets closed. Unfortunately, none of that was communicated to me by the library I used (Jetty), and because this is an async process - you just gotta know where to look.</p>\n<p>TLDR: If you run into this, make sure to check you are not creating connections from GUI thread, because Android WILL close them. :D</p>\n"}],"owner":{"account_id":1695831,"reputation":141,"user_id":1557229,"display_name":"Tuan Huy"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":118685,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"answer_count":3,"score":14,"last_activity_date":1691653449,"creation_date":1356427738,"question_id":14029393,"body_markdown":"I have created a game server using netty 3.5.8.\r\nAt first, there is not any problem with sending data from server to client.\r\nBut when server operates for a while, there are many exceptions [`java.nio.channels.ClosedChannelException`] when I write data to the client channel.\r\n\r\nAnyone has gotten this exception before. Is there any tip to fix this?\r\nI think about cache buffer cause this.\r\n\r\nMy code sample like this:\r\n\r\n    ChannelBuffer bff = ChannelBuffers.buffer(18);\r\n    bff.writeByte(Events.S_SERVER_PUSH);  \r\n    bff.writeByte((byte)0);\r\n    bff.writeInt(idRoom);            \r\n    bff.writeInt(playerCnt);\r\n    bff.writeInt(gameCnt);\r\n    bff.writeInt(freePlayer);\r\n    channel.write(bff);\r\n\r\n\r\nException: java.nio.channels.ClosedChannelException\r\n\r\n    java.nio.channels.ClosedChannelException\r\n            at org.jboss.netty.channel.socket.nio.AbstractNioWorker.cleanUpWriteBuffer(AbstractNioWorker.java:784)\r\n            at org.jboss.netty.channel.socket.nio.AbstractNioWorker.writeFromUserCode(AbstractNioWorker.java:507)\r\n            at org.jboss.netty.channel.socket.nio.NioServerSocketPipelineSink.handleAcceptedSocket(NioServerSocketPipelineSink.java:129)\r\n            at org.jboss.netty.channel.socket.nio.NioServerSocketPipelineSink.eventSunk(NioServerSocketPipelineSink.java:66)\r\n            at org.jboss.netty.channel.Channels.write(Channels.java:733)\r\n            at org.jboss.netty.handler.codec.oneone.OneToOneEncoder.doEncode(OneToOneEncoder.java:71)\r\n            at org.jboss.netty.handler.codec.oneone.OneToOneEncoder.handleDownstream(OneToOneEncoder.java:60)\r\n            at org.jboss.netty.channel.Channels.write(Channels.java:712)\r\n            at org.jboss.netty.channel.Channels.write(Channels.java:679)\r\n            at org.jboss.netty.channel.AbstractChannel.write(AbstractChannel.java:248)\r\n           at myclass.SendPushData(GameRoom.java:231)\r\n            at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:296)\r\n            at org.jboss.netty.handler.codec.frame.FrameDecoder.unfoldAndFireMessageReceived(FrameDecoder.java:458)\r\n            at org.jboss.netty.handler.codec.frame.FrameDecoder.callDecode(FrameDecoder.java:439)\r\n            at org.jboss.netty.handler.codec.frame.FrameDecoder.messageReceived(FrameDecoder.java:303)\r\n            at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:268)\r\n            at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:255)\r\n            at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:84)\r\n            at org.jboss.netty.channel.socket.nio.AbstractNioWorker.processSelectedKeys(AbstractNioWorker.java:471)\r\n            at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:332)\r\n            at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:35)\r\n            at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\r\n            at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\r\n            at java.lang.Thread.run(Unknown Source)","title":"Exception java.nio.channels.ClosedChannelException when write to client channel","body":"<p>I have created a game server using netty 3.5.8.\nAt first, there is not any problem with sending data from server to client.\nBut when server operates for a while, there are many exceptions [<code>java.nio.channels.ClosedChannelException</code>] when I write data to the client channel.</p>\n\n<p>Anyone has gotten this exception before. Is there any tip to fix this?\nI think about cache buffer cause this.</p>\n\n<p>My code sample like this:</p>\n\n<pre><code>ChannelBuffer bff = ChannelBuffers.buffer(18);\nbff.writeByte(Events.S_SERVER_PUSH);  \nbff.writeByte((byte)0);\nbff.writeInt(idRoom);            \nbff.writeInt(playerCnt);\nbff.writeInt(gameCnt);\nbff.writeInt(freePlayer);\nchannel.write(bff);\n</code></pre>\n\n<p>Exception: java.nio.channels.ClosedChannelException</p>\n\n<pre><code>java.nio.channels.ClosedChannelException\n        at org.jboss.netty.channel.socket.nio.AbstractNioWorker.cleanUpWriteBuffer(AbstractNioWorker.java:784)\n        at org.jboss.netty.channel.socket.nio.AbstractNioWorker.writeFromUserCode(AbstractNioWorker.java:507)\n        at org.jboss.netty.channel.socket.nio.NioServerSocketPipelineSink.handleAcceptedSocket(NioServerSocketPipelineSink.java:129)\n        at org.jboss.netty.channel.socket.nio.NioServerSocketPipelineSink.eventSunk(NioServerSocketPipelineSink.java:66)\n        at org.jboss.netty.channel.Channels.write(Channels.java:733)\n        at org.jboss.netty.handler.codec.oneone.OneToOneEncoder.doEncode(OneToOneEncoder.java:71)\n        at org.jboss.netty.handler.codec.oneone.OneToOneEncoder.handleDownstream(OneToOneEncoder.java:60)\n        at org.jboss.netty.channel.Channels.write(Channels.java:712)\n        at org.jboss.netty.channel.Channels.write(Channels.java:679)\n        at org.jboss.netty.channel.AbstractChannel.write(AbstractChannel.java:248)\n       at myclass.SendPushData(GameRoom.java:231)\n        at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:296)\n        at org.jboss.netty.handler.codec.frame.FrameDecoder.unfoldAndFireMessageReceived(FrameDecoder.java:458)\n        at org.jboss.netty.handler.codec.frame.FrameDecoder.callDecode(FrameDecoder.java:439)\n        at org.jboss.netty.handler.codec.frame.FrameDecoder.messageReceived(FrameDecoder.java:303)\n        at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:268)\n        at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:255)\n        at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:84)\n        at org.jboss.netty.channel.socket.nio.AbstractNioWorker.processSelectedKeys(AbstractNioWorker.java:471)\n        at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:332)\n        at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:35)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n        at java.lang.Thread.run(Unknown Source)\n</code></pre>\n"},{"tags":["java","android","android-bluetooth","a2dp","bluetooth-profile"],"owner":{"account_id":22011354,"reputation":394,"user_id":16281582,"display_name":"Venkat"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":82,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691652796,"creation_date":1691652796,"question_id":76873522,"body_markdown":"I&#39;m working on a Android app which needs to work with similar functionalities of Bluetooth earphones. i.e., when I connect the mobile (in which my app installed) to other bluetooth devices like pc or another mobile, i need to set the moble as a receiver and want to play audio of those source devices in this mobile speaker. As of my research to achieve this functionality, I need to set the bluetooth in mobile as sink (receiver). \r\n\r\nBut I found no way to achieve this directly in Android, but we can use some reflections to make this possible.\r\n\r\nhere are some of the resources that I referred.\r\n\r\n - [https://android.googlesource.com/platform/packages/apps/Bluetooth/+/refs/heads/main/src/com/android/bluetooth/a2dpsink/A2dpSinkService.java][1]\r\n - [https://stackoverflow.com/questions/27763756/android-device-as-a-receiver-for-a2dp-profile][2]\r\n - [https://stackoverflow.com/questions/34624595/android-5-0-bluetooth-a2dp-sink][3]\r\n - [https://stackoverflow.com/questions/21104611/how-to-modify-androids-bluetooth-stack-to-enable-a2dp-sink][4]\r\n\r\nany help/suggesions would greatly appreciated.\r\n\r\n\r\n  [1]: https://android.googlesource.com/platform/packages/apps/Bluetooth/+/refs/heads/main/src/com/android/bluetooth/a2dpsink/A2dpSinkService.java\r\n  [2]: https://stackoverflow.com/questions/27763756/android-device-as-a-receiver-for-a2dp-profile\r\n  [3]: https://stackoverflow.com/questions/34624595/android-5-0-bluetooth-a2dp-sink\r\n  [4]: https://stackoverflow.com/questions/21104611/how-to-modify-androids-bluetooth-stack-to-enable-a2dp-sink","title":"How to set android as Bluetooth Sink to act like a Bluetooth earphones","body":"<p>I'm working on a Android app which needs to work with similar functionalities of Bluetooth earphones. i.e., when I connect the mobile (in which my app installed) to other bluetooth devices like pc or another mobile, i need to set the moble as a receiver and want to play audio of those source devices in this mobile speaker. As of my research to achieve this functionality, I need to set the bluetooth in mobile as sink (receiver).</p>\n<p>But I found no way to achieve this directly in Android, but we can use some reflections to make this possible.</p>\n<p>here are some of the resources that I referred.</p>\n<ul>\n<li><a href=\"https://android.googlesource.com/platform/packages/apps/Bluetooth/+/refs/heads/main/src/com/android/bluetooth/a2dpsink/A2dpSinkService.java\" rel=\"nofollow noreferrer\">https://android.googlesource.com/platform/packages/apps/Bluetooth/+/refs/heads/main/src/com/android/bluetooth/a2dpsink/A2dpSinkService.java</a></li>\n<li><a href=\"https://stackoverflow.com/questions/27763756/android-device-as-a-receiver-for-a2dp-profile\">Android device as a receiver for A2DP profile</a></li>\n<li><a href=\"https://stackoverflow.com/questions/34624595/android-5-0-bluetooth-a2dp-sink\">Android 5.0 Bluetooth A2DP Sink</a></li>\n<li><a href=\"https://stackoverflow.com/questions/21104611/how-to-modify-androids-bluetooth-stack-to-enable-a2dp-sink\">How To Modify Android&#39;s Bluetooth Stack to Enable A2dp Sink</a></li>\n</ul>\n<p>any help/suggesions would greatly appreciated.</p>\n"},{"tags":["java","log4j2"],"answers":[{"tags":[],"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691516799,"creation_date":1691516799,"answer_id":76862027,"question_id":76860849,"body_markdown":"The routing appender is tricky, because everything **except** the contents of `&lt;Route&gt;` is interpolated at compile-time, while the contents of `&lt;Route&gt;` will be evaluated if that route is chosen. Therefore if you have:\r\n```xml\r\n&lt;Routing name=&quot;RoutingAppender&quot;&gt;\r\n  &lt;Routes pattern=&quot;$${ctx:threadName}&quot;&gt;\r\n    &lt;Route key=&quot;$${ctx:threadName}&quot;&gt;\r\n      &lt;!-- Content 1 --&gt;\r\n    &lt;/Route&gt;\r\n    &lt;Route&gt;\r\n      &lt;!-- Content 2 --&gt;\r\n    &lt;/Route&gt;\r\n  &lt;/Routes&gt;\r\n&lt;/Routing&gt;\r\n```\r\nit will be interpolated at configuration time to obtain:\r\n```xml\r\n&lt;Routing name=&quot;RoutingAppender&quot;&gt;\r\n  &lt;Routes pattern=&quot;${ctx:threadName}&quot;&gt;\r\n    &lt;Route key=&quot;${ctx:threadName}&quot;&gt;\r\n      &lt;!-- Content 1 unchanged --&gt;\r\n    &lt;/Route&gt;\r\n    &lt;Route&gt;\r\n      &lt;!-- Content 2 unchanged --&gt;\r\n    &lt;/Route&gt;\r\n  &lt;/Routes&gt;\r\n&lt;/Routing&gt;\r\n```\r\n\r\nAt runtime the pattern `${ctx:threadName}` will be interpolated and matched against **non-interpolated** keys. Therefore:\r\n - if `ThreadContext.get(&quot;threadName&quot;)` is `null`, the expression `${ctx:threadName}` will evaluate to itself `${ctx:threadName}` and match the key of the **first** (not second) route,\r\n - if `ThreadContext.get(&quot;threadName&quot;)` is **not** `null`, it will not match any key and the **second** (default) route will be chosen.\r\n\r\n## Solutions\r\n\r\nYou can:\r\n- either replace the contents of the second route with the fist one (in your last attempts) and viceversa,\r\n- or add a default value for `${ctx:threadName}` and use just a single default route:\r\n```xml\r\n&lt;Properties&gt;\r\n  &lt;Property name=&quot;threadName&quot; value=&quot;default-service&quot;/&gt;\r\n&lt;/Properties&gt;\r\n&lt;Appenders&gt;\r\n  &lt;Routing name=&quot;RoutingAppender&quot;&gt;\r\n    &lt;Routes pattern=&quot;$${ctx:threadName}&quot;&gt;\r\n      &lt;Route&gt;\r\n        &lt;RollingFile name=&quot;Rolling-${ctx:threadName}&quot;\r\n                     fileName=&quot;../log/${ctx:threadName}.log&quot;\r\n                     filePattern=&quot;../log/${ctx:threadName}.log-%d{yyyy-MM-dd}&quot;\r\n                     createOnDemand=&quot;true&quot;&gt;\r\n        ...\r\n        &lt;/RollingFile&gt;\r\n      &lt;/Route&gt;\r\n    &lt;/Routes&gt;\r\n  &lt;/Routing&gt;\r\n&lt;/Appenders&gt;\r\n```\r\n","title":"Log4J2 with Routing Appenders and ThreadContext","body":"<p>The routing appender is tricky, because everything <strong>except</strong> the contents of <code>&lt;Route&gt;</code> is interpolated at compile-time, while the contents of <code>&lt;Route&gt;</code> will be evaluated if that route is chosen. Therefore if you have:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;Routing name=&quot;RoutingAppender&quot;&gt;\n  &lt;Routes pattern=&quot;$${ctx:threadName}&quot;&gt;\n    &lt;Route key=&quot;$${ctx:threadName}&quot;&gt;\n      &lt;!-- Content 1 --&gt;\n    &lt;/Route&gt;\n    &lt;Route&gt;\n      &lt;!-- Content 2 --&gt;\n    &lt;/Route&gt;\n  &lt;/Routes&gt;\n&lt;/Routing&gt;\n</code></pre>\n<p>it will be interpolated at configuration time to obtain:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;Routing name=&quot;RoutingAppender&quot;&gt;\n  &lt;Routes pattern=&quot;${ctx:threadName}&quot;&gt;\n    &lt;Route key=&quot;${ctx:threadName}&quot;&gt;\n      &lt;!-- Content 1 unchanged --&gt;\n    &lt;/Route&gt;\n    &lt;Route&gt;\n      &lt;!-- Content 2 unchanged --&gt;\n    &lt;/Route&gt;\n  &lt;/Routes&gt;\n&lt;/Routing&gt;\n</code></pre>\n<p>At runtime the pattern <code>${ctx:threadName}</code> will be interpolated and matched against <strong>non-interpolated</strong> keys. Therefore:</p>\n<ul>\n<li>if <code>ThreadContext.get(&quot;threadName&quot;)</code> is <code>null</code>, the expression <code>${ctx:threadName}</code> will evaluate to itself <code>${ctx:threadName}</code> and match the key of the <strong>first</strong> (not second) route,</li>\n<li>if <code>ThreadContext.get(&quot;threadName&quot;)</code> is <strong>not</strong> <code>null</code>, it will not match any key and the <strong>second</strong> (default) route will be chosen.</li>\n</ul>\n<h2>Solutions</h2>\n<p>You can:</p>\n<ul>\n<li>either replace the contents of the second route with the fist one (in your last attempts) and viceversa,</li>\n<li>or add a default value for <code>${ctx:threadName}</code> and use just a single default route:</li>\n</ul>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;Properties&gt;\n  &lt;Property name=&quot;threadName&quot; value=&quot;default-service&quot;/&gt;\n&lt;/Properties&gt;\n&lt;Appenders&gt;\n  &lt;Routing name=&quot;RoutingAppender&quot;&gt;\n    &lt;Routes pattern=&quot;$${ctx:threadName}&quot;&gt;\n      &lt;Route&gt;\n        &lt;RollingFile name=&quot;Rolling-${ctx:threadName}&quot;\n                     fileName=&quot;../log/${ctx:threadName}.log&quot;\n                     filePattern=&quot;../log/${ctx:threadName}.log-%d{yyyy-MM-dd}&quot;\n                     createOnDemand=&quot;true&quot;&gt;\n        ...\n        &lt;/RollingFile&gt;\n      &lt;/Route&gt;\n    &lt;/Routes&gt;\n  &lt;/Routing&gt;\n&lt;/Appenders&gt;\n</code></pre>\n"}],"owner":{"account_id":450916,"reputation":1435,"user_id":846507,"accept_rate":64,"display_name":"Hauke"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":175,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76862027,"answer_count":1,"score":0,"last_activity_date":1691652388,"creation_date":1691507118,"question_id":76860849,"body_markdown":"I have some issues with log4j2 and the routing appenders.\r\n\r\nMy application generates different threads and within each thread I do something like this\r\n\r\n```ThreadContext.put(&quot;threadName&quot;, processName); ```\r\n\r\nand **processName** will be generated within the thread based on different information. But that is not important, the only important information is, that **processName** will be different in each thread.\r\n\r\nNow I have this **log4j2.xml** file\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;Configuration status=&quot;INFO&quot;&gt;\r\n    &lt;Appenders&gt;\r\n        &lt;Console name=&quot;console&quot; target=&quot;SYSTEM_OUT&quot;&gt;\r\n            &lt;PatternLayout pattern=&quot;%d{ABSOLUTE} %-5p [%-40.-40c{1}] %m%n&quot;/&gt;\r\n        &lt;/Console&gt;\r\n        &lt;Routing name=&quot;RoutingAppender&quot;&gt;\r\n            &lt;Routes pattern=&quot;${ctx:threadName}&quot;&gt;\r\n                &lt;Route&gt;\r\n                    &lt;RollingFile name=&quot;Rolling-${ctx:threadName}&quot;\r\n                                 fileName=&quot;../log/${ctx:threadName}.log&quot;\r\n                                 filePattern=&quot;../log/${ctx:threadName}-%d{yyyy-MM-dd}.log&quot;\r\n                                 createOnDemand=&quot;true&quot;&gt;\r\n                        &lt;PatternLayout pattern=&quot;%d{ABSOLUTE} %-5p [%-40.-40c{1}] %m%n&quot;/&gt;\r\n                        &lt;Policies&gt;\r\n                            &lt;TimeBasedTriggeringPolicy interval=&quot;1&quot; modulate=&quot;true&quot;/&gt;\r\n                        &lt;/Policies&gt;\r\n                    &lt;/RollingFile&gt;\r\n                &lt;/Route&gt;\r\n            &lt;/Routes&gt;\r\n        &lt;/Routing&gt;\r\n    &lt;/Appenders&gt;\r\n    &lt;Loggers&gt;\r\n        &lt;Logger name=&quot;de.company&quot; level=&quot;INFO&quot; additivity=&quot;false&quot;&gt;\r\n            &lt;AppenderRef ref=&quot;RoutingAppender&quot;/&gt;\r\n            &lt;AppenderRef ref=&quot;console&quot;/&gt;\r\n        &lt;/Logger&gt;\r\n        &lt;Logger name=&quot;com.company&quot; level=&quot;INFO&quot; additivity=&quot;false&quot;&gt;\r\n            &lt;AppenderRef ref=&quot;RoutingAppender&quot;/&gt;\r\n            &lt;AppenderRef ref=&quot;console&quot;/&gt;\r\n        &lt;/Logger&gt;\r\n        &lt;Root level=&quot;INFO&quot;&gt;\r\n            &lt;AppenderRef ref=&quot;RoutingAppender&quot;/&gt;\r\n            &lt;AppenderRef ref=&quot;console&quot;/&gt;\r\n        &lt;/Root&gt;\r\n    &lt;/Loggers&gt;\r\n&lt;/Configuration&gt;\r\n```\r\n\r\nAnd log4j creates logfiles for each thread without any issues. \r\n\r\nUnfortunately log4j will create a logfile called **${ctx:threadName}.log**. In this logfile the log messages from JSCH will appear. I guess that JSCH will create its own thread and since JSCH won&#39;t put a ThredName into the ThreadContext, log4j can not replace the variable and uses the variable from the configuration as the logfile name.\r\n\r\nMy goal would be to write all logfiles **without** a threadName in the ThreadContext into a single logfile.\r\n\r\nI found this link in the documentation from log4j\r\n\r\nhttps://logging.apache.org/log4j/log4j-2.2/faq.html#separate_log_files\r\n\r\nbut the issue is, that in that example they know what the value of threadName is. In my case I don&#39;t know the value.\r\n\r\nChatGPT told me, that I have to change the **pattern** within the &lt;Routes&gt; element and use a double $ like this\r\n\r\n```&lt;Routes pattern=&quot;$${ctx:threadName}&quot;&gt;```\r\n\r\nand than I can add a second &lt;Route&gt; element like this\r\n\r\n```\r\n&lt;Routing name=&quot;RoutingAppender&quot;&gt;\r\n            &lt;Routes pattern=&quot;$${ctx:threadName}&quot;&gt;\r\n                &lt;Route key=&quot;$${ctx:threadName}&quot;&gt;\r\n                    &lt;RollingFile name=&quot;Rolling-${ctx:threadName}&quot;\r\n                                 fileName=&quot;../log/${ctx:threadName}.log&quot;\r\n                                 filePattern=&quot;../log/${ctx:threadName}.log-%d{yyyy-MM-dd}&quot;\r\n                                 createOnDemand=&quot;true&quot;&gt;\r\n                        &lt;PatternLayout pattern=&quot;%d{ABSOLUTE} %-5p [%-40.-40c{1}] %m%n&quot;/&gt;\r\n                        &lt;Policies&gt;\r\n                            &lt;TimeBasedTriggeringPolicy interval=&quot;1&quot; modulate=&quot;true&quot;/&gt;\r\n                        &lt;/Policies&gt;\r\n                    &lt;/RollingFile&gt;\r\n                &lt;/Route&gt;\t\t\t\r\n\t\t\t\t&lt;Route key=&quot;null&quot;&gt;\r\n\t\t\t\t\t&lt;RollingFile name=&quot;Rolling-service&quot; \r\n\t\t\t\t\t\t\t\tfileName=&quot;../log/default-service.log&quot; \r\n\t\t\t\t\t\t\t\tfilePattern=&quot;../log/default-service.log-%d{yyyy-MM-dd}&quot; \r\n\t\t\t\t\t\t\t\tcreateOnDemand=&quot;true&quot;&gt;\r\n\t\t\t\t\t\t&lt;PatternLayout pattern=&quot;%d{ABSOLUTE} %-5p [%-40.-40c{1}] %m%n&quot;/&gt;\r\n\t\t\t\t\t\t&lt;Policies&gt;\r\n\t\t\t\t\t\t\t&lt;TimeBasedTriggeringPolicy interval=&quot;1&quot; modulate=&quot;true&quot;/&gt;\r\n\t\t\t\t\t\t&lt;/Policies&gt;\r\n\t\t\t\t\t&lt;/RollingFile&gt;\r\n\t\t\t\t&lt;/Route&gt;\t\t\t\r\n\r\n            &lt;/Routes&gt;\r\n        &lt;/Routing&gt;\r\n```\r\n\r\nBut this is not working - I guess log4j interprets **null** as a String. The second approach was to remove the key attribute from the **fallback route** like this\r\n\r\n\r\n```\r\n            &lt;Routes pattern=&quot;$${ctx:threadName}&quot;&gt;\r\n                &lt;Route key=&quot;$${ctx:threadName}&quot;&gt;\r\n                    &lt;RollingFile name=&quot;Rolling-${ctx:threadName}&quot;\r\n                                 fileName=&quot;../log/${ctx:threadName}.log&quot;\r\n                                 filePattern=&quot;../log/${ctx:threadName}.log-%d{yyyy-MM-dd}&quot;\r\n                                 createOnDemand=&quot;true&quot;&gt;\r\n                        &lt;PatternLayout pattern=&quot;%d{ABSOLUTE} %-5p [%-40.-40c{1}] %m%n&quot;/&gt;\r\n                        &lt;Policies&gt;\r\n                            &lt;TimeBasedTriggeringPolicy interval=&quot;1&quot; modulate=&quot;true&quot;/&gt;\r\n                        &lt;/Policies&gt;\r\n                    &lt;/RollingFile&gt;\r\n                &lt;/Route&gt;\r\n                &lt;Route&gt;\r\n                    &lt;RollingFile name=&quot;Rolling-service&quot;\r\n                                fileName=&quot;../log/default-service.log&quot;\r\n                                filePattern=&quot;../log/default-service.log-%d{yyyy-MM-dd}&quot;\r\n                                createOnDemand=&quot;true&quot;&gt;\r\n                        &lt;PatternLayout pattern=&quot;%d{ABSOLUTE} %-5p [%-40.-40c{1}] %m%n&quot;/&gt;\r\n                        &lt;Policies&gt;\r\n                            &lt;TimeBasedTriggeringPolicy interval=&quot;1&quot; modulate=&quot;true&quot;/&gt;\r\n                        &lt;/Policies&gt;\r\n                    &lt;/RollingFile&gt;\r\n                &lt;/Route&gt;\r\n\r\n            &lt;/Routes&gt;\r\n```\r\n\r\nBut in this case all  log messages will be stored in the default-service.log. \r\n\r\nDoes anyone has a good idea what to do in this case?\r\n\r\n\r\nMany greetings and thank you for your help!\r\n\r\n","title":"Log4J2 with Routing Appenders and ThreadContext","body":"<p>I have some issues with log4j2 and the routing appenders.</p>\n<p>My application generates different threads and within each thread I do something like this</p>\n<p><code>ThreadContext.put(&quot;threadName&quot;, processName); </code></p>\n<p>and <strong>processName</strong> will be generated within the thread based on different information. But that is not important, the only important information is, that <strong>processName</strong> will be different in each thread.</p>\n<p>Now I have this <strong>log4j2.xml</strong> file</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;Configuration status=&quot;INFO&quot;&gt;\n    &lt;Appenders&gt;\n        &lt;Console name=&quot;console&quot; target=&quot;SYSTEM_OUT&quot;&gt;\n            &lt;PatternLayout pattern=&quot;%d{ABSOLUTE} %-5p [%-40.-40c{1}] %m%n&quot;/&gt;\n        &lt;/Console&gt;\n        &lt;Routing name=&quot;RoutingAppender&quot;&gt;\n            &lt;Routes pattern=&quot;${ctx:threadName}&quot;&gt;\n                &lt;Route&gt;\n                    &lt;RollingFile name=&quot;Rolling-${ctx:threadName}&quot;\n                                 fileName=&quot;../log/${ctx:threadName}.log&quot;\n                                 filePattern=&quot;../log/${ctx:threadName}-%d{yyyy-MM-dd}.log&quot;\n                                 createOnDemand=&quot;true&quot;&gt;\n                        &lt;PatternLayout pattern=&quot;%d{ABSOLUTE} %-5p [%-40.-40c{1}] %m%n&quot;/&gt;\n                        &lt;Policies&gt;\n                            &lt;TimeBasedTriggeringPolicy interval=&quot;1&quot; modulate=&quot;true&quot;/&gt;\n                        &lt;/Policies&gt;\n                    &lt;/RollingFile&gt;\n                &lt;/Route&gt;\n            &lt;/Routes&gt;\n        &lt;/Routing&gt;\n    &lt;/Appenders&gt;\n    &lt;Loggers&gt;\n        &lt;Logger name=&quot;de.company&quot; level=&quot;INFO&quot; additivity=&quot;false&quot;&gt;\n            &lt;AppenderRef ref=&quot;RoutingAppender&quot;/&gt;\n            &lt;AppenderRef ref=&quot;console&quot;/&gt;\n        &lt;/Logger&gt;\n        &lt;Logger name=&quot;com.company&quot; level=&quot;INFO&quot; additivity=&quot;false&quot;&gt;\n            &lt;AppenderRef ref=&quot;RoutingAppender&quot;/&gt;\n            &lt;AppenderRef ref=&quot;console&quot;/&gt;\n        &lt;/Logger&gt;\n        &lt;Root level=&quot;INFO&quot;&gt;\n            &lt;AppenderRef ref=&quot;RoutingAppender&quot;/&gt;\n            &lt;AppenderRef ref=&quot;console&quot;/&gt;\n        &lt;/Root&gt;\n    &lt;/Loggers&gt;\n&lt;/Configuration&gt;\n</code></pre>\n<p>And log4j creates logfiles for each thread without any issues.</p>\n<p>Unfortunately log4j will create a logfile called <strong>${ctx:threadName}.log</strong>. In this logfile the log messages from JSCH will appear. I guess that JSCH will create its own thread and since JSCH won't put a ThredName into the ThreadContext, log4j can not replace the variable and uses the variable from the configuration as the logfile name.</p>\n<p>My goal would be to write all logfiles <strong>without</strong> a threadName in the ThreadContext into a single logfile.</p>\n<p>I found this link in the documentation from log4j</p>\n<p><a href=\"https://logging.apache.org/log4j/log4j-2.2/faq.html#separate_log_files\" rel=\"nofollow noreferrer\">https://logging.apache.org/log4j/log4j-2.2/faq.html#separate_log_files</a></p>\n<p>but the issue is, that in that example they know what the value of threadName is. In my case I don't know the value.</p>\n<p>ChatGPT told me, that I have to change the <strong>pattern</strong> within the  element and use a double $ like this</p>\n<p><code>&lt;Routes pattern=&quot;$${ctx:threadName}&quot;&gt;</code></p>\n<p>and than I can add a second  element like this</p>\n<pre><code>&lt;Routing name=&quot;RoutingAppender&quot;&gt;\n            &lt;Routes pattern=&quot;$${ctx:threadName}&quot;&gt;\n                &lt;Route key=&quot;$${ctx:threadName}&quot;&gt;\n                    &lt;RollingFile name=&quot;Rolling-${ctx:threadName}&quot;\n                                 fileName=&quot;../log/${ctx:threadName}.log&quot;\n                                 filePattern=&quot;../log/${ctx:threadName}.log-%d{yyyy-MM-dd}&quot;\n                                 createOnDemand=&quot;true&quot;&gt;\n                        &lt;PatternLayout pattern=&quot;%d{ABSOLUTE} %-5p [%-40.-40c{1}] %m%n&quot;/&gt;\n                        &lt;Policies&gt;\n                            &lt;TimeBasedTriggeringPolicy interval=&quot;1&quot; modulate=&quot;true&quot;/&gt;\n                        &lt;/Policies&gt;\n                    &lt;/RollingFile&gt;\n                &lt;/Route&gt;            \n                &lt;Route key=&quot;null&quot;&gt;\n                    &lt;RollingFile name=&quot;Rolling-service&quot; \n                                fileName=&quot;../log/default-service.log&quot; \n                                filePattern=&quot;../log/default-service.log-%d{yyyy-MM-dd}&quot; \n                                createOnDemand=&quot;true&quot;&gt;\n                        &lt;PatternLayout pattern=&quot;%d{ABSOLUTE} %-5p [%-40.-40c{1}] %m%n&quot;/&gt;\n                        &lt;Policies&gt;\n                            &lt;TimeBasedTriggeringPolicy interval=&quot;1&quot; modulate=&quot;true&quot;/&gt;\n                        &lt;/Policies&gt;\n                    &lt;/RollingFile&gt;\n                &lt;/Route&gt;            \n\n            &lt;/Routes&gt;\n        &lt;/Routing&gt;\n</code></pre>\n<p>But this is not working - I guess log4j interprets <strong>null</strong> as a String. The second approach was to remove the key attribute from the <strong>fallback route</strong> like this</p>\n<pre><code>            &lt;Routes pattern=&quot;$${ctx:threadName}&quot;&gt;\n                &lt;Route key=&quot;$${ctx:threadName}&quot;&gt;\n                    &lt;RollingFile name=&quot;Rolling-${ctx:threadName}&quot;\n                                 fileName=&quot;../log/${ctx:threadName}.log&quot;\n                                 filePattern=&quot;../log/${ctx:threadName}.log-%d{yyyy-MM-dd}&quot;\n                                 createOnDemand=&quot;true&quot;&gt;\n                        &lt;PatternLayout pattern=&quot;%d{ABSOLUTE} %-5p [%-40.-40c{1}] %m%n&quot;/&gt;\n                        &lt;Policies&gt;\n                            &lt;TimeBasedTriggeringPolicy interval=&quot;1&quot; modulate=&quot;true&quot;/&gt;\n                        &lt;/Policies&gt;\n                    &lt;/RollingFile&gt;\n                &lt;/Route&gt;\n                &lt;Route&gt;\n                    &lt;RollingFile name=&quot;Rolling-service&quot;\n                                fileName=&quot;../log/default-service.log&quot;\n                                filePattern=&quot;../log/default-service.log-%d{yyyy-MM-dd}&quot;\n                                createOnDemand=&quot;true&quot;&gt;\n                        &lt;PatternLayout pattern=&quot;%d{ABSOLUTE} %-5p [%-40.-40c{1}] %m%n&quot;/&gt;\n                        &lt;Policies&gt;\n                            &lt;TimeBasedTriggeringPolicy interval=&quot;1&quot; modulate=&quot;true&quot;/&gt;\n                        &lt;/Policies&gt;\n                    &lt;/RollingFile&gt;\n                &lt;/Route&gt;\n\n            &lt;/Routes&gt;\n</code></pre>\n<p>But in this case all  log messages will be stored in the default-service.log.</p>\n<p>Does anyone has a good idea what to do in this case?</p>\n<p>Many greetings and thank you for your help!</p>\n"},{"tags":["java","hashmap"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":4,"creation_date":1691594437,"post_id":76869065,"comment_id":135513409,"body_markdown":"When you have unsynchronized thread access of shared memory, the results are undefined.  Anything could happen.  One author (Brian Goetz) says that unsynchronized operations &quot;have no useful semantics.&quot;","body":"When you have unsynchronized thread access of shared memory, the results are undefined.  Anything could happen.  One author (Brian Goetz) says that unsynchronized operations &quot;have no useful semantics.&quot;"}],"answers":[{"tags":[],"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1691595965,"creation_date":1691595965,"answer_id":76869371,"question_id":76869065,"body_markdown":"The result could be looping infinitely, not even returning a value but simply running forever.\r\n\r\nIt could also be that, but only on Tuesdays, and on other days it works perfectly normally.\r\n\r\nThe behavior is undefined.","title":"One thread reading hashmap while other thread causing resizing","body":"<p>The result could be looping infinitely, not even returning a value but simply running forever.</p>\n<p>It could also be that, but only on Tuesdays, and on other days it works perfectly normally.</p>\n<p>The behavior is undefined.</p>\n"},{"tags":[],"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1691596208,"creation_date":1691596208,"answer_id":76869404,"question_id":76869065,"body_markdown":"From [the Javadoc of HashMap](https://docs.oracle.com/javase/8/docs/api/java/util/HashMap.html):\r\n\r\n&gt; If multiple threads access a hash map concurrently, and at least one of the threads modifies the map structurally, it _must_ be synchronized externally.\r\n\r\nIn other words, the behavior described in the documentation only applies if you externally synchronize the access correctly.\r\n\r\nIf you do anything else, the behavior is undefined: it could literally do anything. Certain behaviors are more likely than others, for sure, but none of them are predictable or useful.","title":"One thread reading hashmap while other thread causing resizing","body":"<p>From <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/HashMap.html\" rel=\"nofollow noreferrer\">the Javadoc of HashMap</a>:</p>\n<blockquote>\n<p>If multiple threads access a hash map concurrently, and at least one of the threads modifies the map structurally, it <em>must</em> be synchronized externally.</p>\n</blockquote>\n<p>In other words, the behavior described in the documentation only applies if you externally synchronize the access correctly.</p>\n<p>If you do anything else, the behavior is undefined: it could literally do anything. Certain behaviors are more likely than others, for sure, but none of them are predictable or useful.</p>\n"},{"tags":[],"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1691607020,"creation_date":1691606714,"answer_id":76870484,"question_id":76869065,"body_markdown":"In C lang specs, the result is literally undefined - the computer can blast some polka music from the speakers and that would still be fine.\r\n\r\nIn java, it&#39;s not like that, but it is __effectively__ the same. The JMM (The Java Memory Model - see [section &#167;17.4 of the JVM Spec](https://docs.oracle.com/javase/specs/jls/se8/html/jls-17.html)) can more or less accurately be simplified to the concept of an evil coin. Anytime any 2 threads interact with the same field __anywhere in the entire heap space__, unless they&#39;re all only reading and never writing, the JVM flips an evil coin. On heads, the threads share the variable, on tails, each thread gets a local copy that is synced back up at a random time in the future, possibly days ahead, perhaps never.\r\n\r\nThe coin is evil: At least if it was a fair-ish flip every time we just rerun a test a lot and eventually we&#39;ll cover every permutation of coin flips. But it&#39;s not - it&#39;s evil. Today it will flip such that all your tests pass and your application works perfectly. And it will tomorrow too. But 2 weeks from now just as that important customer comes in? Whoops.\r\n\r\nThe difference between C and java is that java at least _has_ a coin, but in practice if you wrote your code such that it only works correctly if the coin lands the same way every time, it&#39;s a buggy mess. In many ways it&#39;s worse: An app that just straight up does the wrong thing at least is easily tested to confirm it&#39;s wrong.\r\n\r\nIn general here are the guarantees that the JVM offers:\r\n\r\n* If there are 2 bytecode instructions (more or less, 2 lines of java code) that have an officially defined Happens-Before relationship (see section 17.4 that outlines how you establish that. `synchronized` is one way), then the JMM guarantees that the afterwards bytecode cannot observe any state as it was before the before-it line modified that state. If the after-it line doesn&#39;t try to observe any state, the JMM makes no guarantees that the &#39;before&#39; line actually runs before. It only guarantees that you can&#39;t observe it. And it doesn&#39;t even guarantee that strictly: For example, any observation you do via timing (how long certain things take) aren&#39;t covered by the guarantee either.\r\n* Theoretically, any operations on `long` and `double` can be observed in a sheared state, where the top 32 bits are in flight being updated but the bottom 32 bits haven&#39;t yet, or vice versa. In practice you won&#39;t be able to do that (you can&#39;t ever actually see shearing on 64-bit JVM impls on 64-bit hardware, and good luck finding some 32-bit hardware today). But a JVM is not broken if it shears longs or doubles, and if you were to report a bug to the OpenJDK project about such a thing it would be closed as &#39;specced and intended behaviour&#39;.\r\n* Other than that, the JVM guarantees atomic updates. Even for references if they happen to be processed as 64-bit. An atomic update means that if you have this code, and this is the only code that _ever_ writes to this field: `private int x = 0; ... later on: x = -1;`, and you have other code running elsewhere (i.e. no Happens-Before established), then the other code is guaranteed to read either `0` or `-1`; the evil coin decides which one you get. But, if you get, say, `5`, then the JVM is buggy. For a `long` that doesn&#39;t theoretically hold due to the shearing thing. You might observe the top 32 bits being all zeroes and the bottom 32 bits being all ones (`-1` is, in bit terms, 64 one-bits), thus if you make that `private long x;` and a JVM ends up running such that a thread that runs `System.out.println(x)` ends up printing 4294967296, that&#39;s legal (thats 32 zero bits followed by 32 one bits): Due to shearing the top half is from the &#39;0&#39; value and the bottom half is the &#39;-1&#39; value.\r\n* The JMM makes absolutely no guarantees whatsoever about ordering (outside of Happens-Before), and no guarantees about synchronization. In particular, an object that has become garbage can remain (un-garbage-collected) for days on end, and 2 threads each having a conflicting local copy may continue on with their local copy even if you can clearly tell the CPU has spent _hours_ idling. The CPU isn&#39;t going to check for any &#39;work&#39; to do if it doesn&#39;t have to. Or it does - evil coin decides.\r\n\r\n## So, what about hashmap?\r\n\r\nThis is where we run into trouble. Any operations on fields themselves are at least atomic, so that means the university splits in twain anytime you do an unprotected read (one not guarded with a happens-before) - and thus you have to now consider &#39;2 universes&#39;. Which is doable. But 2 becomes 4, and 4 becomes 8 very very quickly. Because the JMM&#39;s guarantees about consistency are limited. If you somehow determine that the last out of 20 field reads __definitely__ is a local cache value somehow, than you _cannot_ conclude the previous 19 field reads must therefore also be local cache values. The JMM is free to flip the coin on every field. That means in theory your universe has now exploded into 2^20 = 1048576 distinct possibilities. In practice hardware limitations and OS implementations probably result in only 2 possibilities ever being even observable in the first place, but that&#39;s just today: The spec leaves the door open for some future where something else can happen, and, of course, CPU makers aren&#39;t sitting still either. Some behaviour that the spec says is theoretically possible but the JVM+ways CPU work today says it cannot possibly occur - might occur on as-yet-to-be-designed chips.\r\n\r\nThis is __why__ folks like Brian Goetz say that while Java, unlike C, does lock down specifically which of a number of different ways contended situations can go - that&#39;s not __meaningfully__ semantically useful.\r\n\r\nWhich gets us to your hashmap: The HashMap specification (the javadoc) would have to, more or less, duplicate __precisely__ how the entire thing works, basically copy/paste every line of source code straight into the javadoc, if you want the spec to be able to tell you precisely what can happen for all permutations of every flip of the evil coin.\r\n\r\nWhich is silly - and isn&#39;t a thing HashMap has actually done. Therefore, HashMap __itself__ has granted itself some leeway and spec-wise is allowed to act in ways that in practice cannot possibly occur __today__ even if tomorrow with some point-update release of the JVM, all of a sudden it can occur.\r\n\r\nThus, even though at least at an individual field access level we can enumerate all possible things that the JMM spec dictates are possible - at the level of &#39;a bunch of code that acts as a consistent whole&#39; such as `HashMap`, that has exploded into an unspecified universe that can be enumerated but contains so many options (millions) that there&#39;s no actual point.\r\n\r\nThat means __in practice__ java is like C: If you break the rules and write code that violates the JMM (as in, does unsafe field reads), then you should act as if &#39;anything could happen, literally anything. Bugs that never happen except on the fifth monday of the third month when jupiter is ascending and the moon is in its seventh house and Bob Dylan is playing in the music player, oh, while the ambient temperature is above 30&#186;C - that kind of &#39;anything can happen&#39;. Code that is buggy in a way that might be completely impossible to test for right now but which __will__ show itself later, on a customer&#39;s computer.\r\n\r\nTo boil it down to the simplest conclusion: __Do not violate the JMM. Do not ever ship any code whose behaviour depends on any evil coin flip. Do not attempt to write code that is designed to avoid the cost of establishing HB by ending up doing the right thing regardless of flips because it&#39;s incredibly complicated and literally untestable. You will mess up, you won&#39;t know where or why, and you&#39;ll spend literally months bugchasing it. It isn&#39;t, ever, worth doing this__.\r\n\r\nAnd thus, your question? It is unanswerable. Which is fine, because the answer is irrelevant. If you think it&#39;s worthwhile to know what could happen to figure out if some code is fine or not, the answer is already clear: No, the code is wrong, fix it.\r\n\r\nNote that it&#39;s not just the resizing. If one thread puts something in the map while another thread also does so, even if no resizing is occurring, the hashmap may well completely break. And never in a nice way (that&#39;d be that it starts throwing exceptions that tell you what happened). No, it&#39;ll just start answering wrong. Or you call `.get(someKey)` and the get method just hangs forever wasting 100% CPU. You __cannot__ access the same hashmap from two threads unless you protect with HB (for example, if all such accesses are in `synchronized (thatMap) {}` you&#39;d be fine).\r\n","title":"One thread reading hashmap while other thread causing resizing","body":"<p>In C lang specs, the result is literally undefined - the computer can blast some polka music from the speakers and that would still be fine.</p>\n<p>In java, it's not like that, but it is <strong>effectively</strong> the same. The JMM (The Java Memory Model - see <a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-17.html\" rel=\"nofollow noreferrer\">section §17.4 of the JVM Spec</a>) can more or less accurately be simplified to the concept of an evil coin. Anytime any 2 threads interact with the same field <strong>anywhere in the entire heap space</strong>, unless they're all only reading and never writing, the JVM flips an evil coin. On heads, the threads share the variable, on tails, each thread gets a local copy that is synced back up at a random time in the future, possibly days ahead, perhaps never.</p>\n<p>The coin is evil: At least if it was a fair-ish flip every time we just rerun a test a lot and eventually we'll cover every permutation of coin flips. But it's not - it's evil. Today it will flip such that all your tests pass and your application works perfectly. And it will tomorrow too. But 2 weeks from now just as that important customer comes in? Whoops.</p>\n<p>The difference between C and java is that java at least <em>has</em> a coin, but in practice if you wrote your code such that it only works correctly if the coin lands the same way every time, it's a buggy mess. In many ways it's worse: An app that just straight up does the wrong thing at least is easily tested to confirm it's wrong.</p>\n<p>In general here are the guarantees that the JVM offers:</p>\n<ul>\n<li>If there are 2 bytecode instructions (more or less, 2 lines of java code) that have an officially defined Happens-Before relationship (see section 17.4 that outlines how you establish that. <code>synchronized</code> is one way), then the JMM guarantees that the afterwards bytecode cannot observe any state as it was before the before-it line modified that state. If the after-it line doesn't try to observe any state, the JMM makes no guarantees that the 'before' line actually runs before. It only guarantees that you can't observe it. And it doesn't even guarantee that strictly: For example, any observation you do via timing (how long certain things take) aren't covered by the guarantee either.</li>\n<li>Theoretically, any operations on <code>long</code> and <code>double</code> can be observed in a sheared state, where the top 32 bits are in flight being updated but the bottom 32 bits haven't yet, or vice versa. In practice you won't be able to do that (you can't ever actually see shearing on 64-bit JVM impls on 64-bit hardware, and good luck finding some 32-bit hardware today). But a JVM is not broken if it shears longs or doubles, and if you were to report a bug to the OpenJDK project about such a thing it would be closed as 'specced and intended behaviour'.</li>\n<li>Other than that, the JVM guarantees atomic updates. Even for references if they happen to be processed as 64-bit. An atomic update means that if you have this code, and this is the only code that <em>ever</em> writes to this field: <code>private int x = 0; ... later on: x = -1;</code>, and you have other code running elsewhere (i.e. no Happens-Before established), then the other code is guaranteed to read either <code>0</code> or <code>-1</code>; the evil coin decides which one you get. But, if you get, say, <code>5</code>, then the JVM is buggy. For a <code>long</code> that doesn't theoretically hold due to the shearing thing. You might observe the top 32 bits being all zeroes and the bottom 32 bits being all ones (<code>-1</code> is, in bit terms, 64 one-bits), thus if you make that <code>private long x;</code> and a JVM ends up running such that a thread that runs <code>System.out.println(x)</code> ends up printing 4294967296, that's legal (thats 32 zero bits followed by 32 one bits): Due to shearing the top half is from the '0' value and the bottom half is the '-1' value.</li>\n<li>The JMM makes absolutely no guarantees whatsoever about ordering (outside of Happens-Before), and no guarantees about synchronization. In particular, an object that has become garbage can remain (un-garbage-collected) for days on end, and 2 threads each having a conflicting local copy may continue on with their local copy even if you can clearly tell the CPU has spent <em>hours</em> idling. The CPU isn't going to check for any 'work' to do if it doesn't have to. Or it does - evil coin decides.</li>\n</ul>\n<h2>So, what about hashmap?</h2>\n<p>This is where we run into trouble. Any operations on fields themselves are at least atomic, so that means the university splits in twain anytime you do an unprotected read (one not guarded with a happens-before) - and thus you have to now consider '2 universes'. Which is doable. But 2 becomes 4, and 4 becomes 8 very very quickly. Because the JMM's guarantees about consistency are limited. If you somehow determine that the last out of 20 field reads <strong>definitely</strong> is a local cache value somehow, than you <em>cannot</em> conclude the previous 19 field reads must therefore also be local cache values. The JMM is free to flip the coin on every field. That means in theory your universe has now exploded into 2^20 = 1048576 distinct possibilities. In practice hardware limitations and OS implementations probably result in only 2 possibilities ever being even observable in the first place, but that's just today: The spec leaves the door open for some future where something else can happen, and, of course, CPU makers aren't sitting still either. Some behaviour that the spec says is theoretically possible but the JVM+ways CPU work today says it cannot possibly occur - might occur on as-yet-to-be-designed chips.</p>\n<p>This is <strong>why</strong> folks like Brian Goetz say that while Java, unlike C, does lock down specifically which of a number of different ways contended situations can go - that's not <strong>meaningfully</strong> semantically useful.</p>\n<p>Which gets us to your hashmap: The HashMap specification (the javadoc) would have to, more or less, duplicate <strong>precisely</strong> how the entire thing works, basically copy/paste every line of source code straight into the javadoc, if you want the spec to be able to tell you precisely what can happen for all permutations of every flip of the evil coin.</p>\n<p>Which is silly - and isn't a thing HashMap has actually done. Therefore, HashMap <strong>itself</strong> has granted itself some leeway and spec-wise is allowed to act in ways that in practice cannot possibly occur <strong>today</strong> even if tomorrow with some point-update release of the JVM, all of a sudden it can occur.</p>\n<p>Thus, even though at least at an individual field access level we can enumerate all possible things that the JMM spec dictates are possible - at the level of 'a bunch of code that acts as a consistent whole' such as <code>HashMap</code>, that has exploded into an unspecified universe that can be enumerated but contains so many options (millions) that there's no actual point.</p>\n<p>That means <strong>in practice</strong> java is like C: If you break the rules and write code that violates the JMM (as in, does unsafe field reads), then you should act as if 'anything could happen, literally anything. Bugs that never happen except on the fifth monday of the third month when jupiter is ascending and the moon is in its seventh house and Bob Dylan is playing in the music player, oh, while the ambient temperature is above 30ºC - that kind of 'anything can happen'. Code that is buggy in a way that might be completely impossible to test for right now but which <strong>will</strong> show itself later, on a customer's computer.</p>\n<p>To boil it down to the simplest conclusion: <strong>Do not violate the JMM. Do not ever ship any code whose behaviour depends on any evil coin flip. Do not attempt to write code that is designed to avoid the cost of establishing HB by ending up doing the right thing regardless of flips because it's incredibly complicated and literally untestable. You will mess up, you won't know where or why, and you'll spend literally months bugchasing it. It isn't, ever, worth doing this</strong>.</p>\n<p>And thus, your question? It is unanswerable. Which is fine, because the answer is irrelevant. If you think it's worthwhile to know what could happen to figure out if some code is fine or not, the answer is already clear: No, the code is wrong, fix it.</p>\n<p>Note that it's not just the resizing. If one thread puts something in the map while another thread also does so, even if no resizing is occurring, the hashmap may well completely break. And never in a nice way (that'd be that it starts throwing exceptions that tell you what happened). No, it'll just start answering wrong. Or you call <code>.get(someKey)</code> and the get method just hangs forever wasting 100% CPU. You <strong>cannot</strong> access the same hashmap from two threads unless you protect with HB (for example, if all such accesses are in <code>synchronized (thatMap) {}</code> you'd be fine).</p>\n"}],"owner":{"account_id":3213965,"reputation":2185,"user_id":2713255,"accept_rate":29,"display_name":"Manas Saxena"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1691651339,"creation_date":1691593540,"question_id":76869065,"body_markdown":"I understand that HashMap is not thread safe and resizing is triggered from an update operation.\r\n\r\nMy question is what happens if there are two threads one performing get from HashMap and other thread performing put which results in resizing of hashMap.\r\n\r\nWhat could be the possible output of get operation?","title":"One thread reading hashmap while other thread causing resizing","body":"<p>I understand that HashMap is not thread safe and resizing is triggered from an update operation.</p>\n<p>My question is what happens if there are two threads one performing get from HashMap and other thread performing put which results in resizing of hashMap.</p>\n<p>What could be the possible output of get operation?</p>\n"},{"tags":["java","android","firebase","google-cloud-platform","firebase-authentication"],"comments":[{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1691562262,"post_id":76861848,"comment_id":135506624,"body_markdown":"So to be more clear, the `credential` object is `null`, right? Where in code are you using these lines of code?","body":"So to be more clear, the <code>credential</code> object is <code>null</code>, right? Where in code are you using these lines of code?"},{"owner":{"account_id":14349390,"reputation":659,"user_id":10365380,"display_name":"Rohaitas Tanoli"},"score":0,"creation_date":1691578647,"post_id":76861848,"comment_id":135509794,"body_markdown":"It is not null. But the id is email. I want to confirm that ID is always email?","body":"It is not null. But the id is email. I want to confirm that ID is always email?"}],"answers":[{"tags":[],"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691651223,"creation_date":1691579343,"answer_id":76867184,"question_id":76861848,"body_markdown":"According to your last comment:\r\n\r\n&gt; But the id is email. I want to confirm that ID is always email?\r\n\r\nAccording to official documentation of the [SignInCredential#getId()][1] method:\r\n\r\n&gt; Returns the identifier of the credential. For an ID token credential, this returns the **email address** of the user&#39;s account and for a password-backed credential, it returns the **username** for that password.\r\n\r\nSo not, it is **not** always the email. It might also be a username.\r\n\r\n  [1]: https://developers.google.com/android/reference/com/google/android/gms/auth/api/identity/SignInCredential#getId()","title":"Firebase Gmail Login googleCredential.getId() is it always email?","body":"<p>According to your last comment:</p>\n<blockquote>\n<p>But the id is email. I want to confirm that ID is always email?</p>\n</blockquote>\n<p>According to official documentation of the <a href=\"https://developers.google.com/android/reference/com/google/android/gms/auth/api/identity/SignInCredential#getId()\" rel=\"nofollow noreferrer\">SignInCredential#getId()</a> method:</p>\n<blockquote>\n<p>Returns the identifier of the credential. For an ID token credential, this returns the <strong>email address</strong> of the user's account and for a password-backed credential, it returns the <strong>username</strong> for that password.</p>\n</blockquote>\n<p>So not, it is <strong>not</strong> always the email. It might also be a username.</p>\n"}],"owner":{"account_id":14349390,"reputation":659,"user_id":10365380,"display_name":"Rohaitas Tanoli"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76867184,"answer_count":1,"score":0,"last_activity_date":1691651223,"creation_date":1691514981,"question_id":76861848,"body_markdown":"I have implemented a Gmail One Tap login using Firebase using the following [documentation][1].\r\n\r\nAfter account selection:\r\n\r\n    SignInCredential credential = signInClient.getSignInCredentialFromIntent(data);\r\n    credential.getId()  // this id\r\n    \r\nThe credential id is my Gmail account. What I would like to confirm is whether that is always email.\r\n\r\n\r\n  [1]: https://firebase.google.com/docs/auth/android/google-signin","title":"Firebase Gmail Login googleCredential.getId() is it always email?","body":"<p>I have implemented a Gmail One Tap login using Firebase using the following <a href=\"https://firebase.google.com/docs/auth/android/google-signin\" rel=\"nofollow noreferrer\">documentation</a>.</p>\n<p>After account selection:</p>\n<pre><code>SignInCredential credential = signInClient.getSignInCredentialFromIntent(data);\ncredential.getId()  // this id\n</code></pre>\n<p>The credential id is my Gmail account. What I would like to confirm is whether that is always email.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1691648594,"post_id":76872749,"comment_id":135520355,"body_markdown":"Best guess: JDK20 is giving you the index in just the authority (`www.goo gle.com`) and JDK19 is giving you the index in the whole string (including `http://`). Such minor implementation details can change between releases, I wouldn&#39;t worry about it.","body":"Best guess: JDK20 is giving you the index in just the authority (<code>www.goo gle.com</code>) and JDK19 is giving you the index in the whole string (including <code>http:&#47;&#47;</code>). Such minor implementation details can change between releases, I wouldn&#39;t worry about it."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1691651269,"post_id":76872749,"comment_id":135520781,"body_markdown":"Based on Jorn&#39;s plausible explanation, this difference is due to a bug fix in Java 20.  And there&#39;s **no practical way** to get both versions to give you the same answer.","body":"Based on Jorn&#39;s plausible explanation, this difference is due to a bug fix in Java 20.  And there&#39;s <b>no practical way</b> to get both versions to give you the same answer."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1691654836,"post_id":76872749,"comment_id":135521532,"body_markdown":"You don&#39;t actually have any basis for that expectation. The message isn&#39;t specified anywhere, so there is nothing to rely on.","body":"You don&#39;t actually have any basis for that expectation. The message isn&#39;t specified anywhere, so there is nothing to rely on."},{"owner":{"account_id":11180480,"reputation":7021,"user_id":8207228,"display_name":"Ralf Kleberhoff"},"score":0,"creation_date":1691756120,"post_id":76872749,"comment_id":135538295,"body_markdown":"@user207421 With most exceptions, you&#39;d be right, but for the URISyntaxException, there is a specification (see my answer).","body":"@user207421 With most exceptions, you&#39;d be right, but for the URISyntaxException, there is a specification (see my answer)."}],"answers":[{"tags":[],"owner":{"account_id":11180480,"reputation":7021,"user_id":8207228,"display_name":"Ralf Kleberhoff"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691650870,"creation_date":1691650870,"answer_id":76873301,"question_id":76872749,"body_markdown":"If you look at the [URI constructor specification][1], it states that a URISyntaxException can be thrown.\r\n\r\nWhat you see as the exception text, is the result of a [getMessage() call][2], and that defines the structure of the text. After the colon is the input string, in your case `&quot;http://www.goo gle.com&quot;`, and the index given should be an index into exactly that input string. The offending space character is at index 14 in that string, so the JDK 20 implementation is correct, and JDK 19 is wrong in stating the index to be 7.\r\n\r\nBut, relying on such fine details of exception instances is never a good idea.\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/net/URI.html#%3Cinit%3E(java.lang.String)\r\n  [2]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/net/URISyntaxException.html#getMessage()","title":"URISyntaxException different message in JDK19 &amp; JDK20","body":"<p>If you look at the <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/net/URI.html#%3Cinit%3E(java.lang.String)\" rel=\"nofollow noreferrer\">URI constructor specification</a>, it states that a URISyntaxException can be thrown.</p>\n<p>What you see as the exception text, is the result of a <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/net/URISyntaxException.html#getMessage()\" rel=\"nofollow noreferrer\">getMessage() call</a>, and that defines the structure of the text. After the colon is the input string, in your case <code>&quot;http://www.goo gle.com&quot;</code>, and the index given should be an index into exactly that input string. The offending space character is at index 14 in that string, so the JDK 20 implementation is correct, and JDK 19 is wrong in stating the index to be 7.</p>\n<p>But, relying on such fine details of exception instances is never a good idea.</p>\n"}],"owner":{"account_id":28408271,"reputation":45,"user_id":21731993,"display_name":"sKarwasra"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76873301,"answer_count":1,"score":-1,"last_activity_date":1691651094,"creation_date":1691643514,"question_id":76872749,"body_markdown":"If i am running below code in jdk19 and jdk20 different exception message is coming\r\n\r\n```\r\npublic static void main(String[] args) {\r\n        URI uri;\r\n        try {\r\n            uri = new URI(&quot;http://www.goo gle.com&quot;);\r\n        } catch (URISyntaxException e) {\r\n            System.out.println(&quot;Bad URI&quot; + e.getMessage());\r\n            throw new RuntimeException(e);\r\n        }\r\n        System.out.println(&quot;Hello World&quot; + uri);\r\n\r\n    }\r\n```\r\nIn jdk19 - `Caused by: java.net.URISyntaxException: Illegal character in authority at index 7: http://www.goo gle.com`\r\n\r\nIn jdk20 - `Caused by: java.net.URISyntaxException: Illegal character in authority at index 14: http://www.goo gle.com`\r\n\r\nIn jdk19 the index is coming as 7 but in jdk20 the index is coming 14 for same URI.\r\n\r\nExpecting same index should come in the exception message.","title":"URISyntaxException different message in JDK19 &amp; JDK20","body":"<p>If i am running below code in jdk19 and jdk20 different exception message is coming</p>\n<pre><code>public static void main(String[] args) {\n        URI uri;\n        try {\n            uri = new URI(&quot;http://www.goo gle.com&quot;);\n        } catch (URISyntaxException e) {\n            System.out.println(&quot;Bad URI&quot; + e.getMessage());\n            throw new RuntimeException(e);\n        }\n        System.out.println(&quot;Hello World&quot; + uri);\n\n    }\n</code></pre>\n<p>In jdk19 - <code>Caused by: java.net.URISyntaxException: Illegal character in authority at index 7: http://www.goo gle.com</code></p>\n<p>In jdk20 - <code>Caused by: java.net.URISyntaxException: Illegal character in authority at index 14: http://www.goo gle.com</code></p>\n<p>In jdk19 the index is coming as 7 but in jdk20 the index is coming 14 for same URI.</p>\n<p>Expecting same index should come in the exception message.</p>\n"},{"tags":["java","comparison","code-analysis"],"comments":[{"owner":{"display_name":"user9035826"},"score":0,"creation_date":1691619762,"post_id":76871486,"comment_id":135517845,"body_markdown":"There are a couple of things in your own code that can potentially get you an &quot;array out of bound&quot; error. The &quot;else&quot; statement needs to be removed as it causes receipts to be skipped while you are counting. Secondly, the statement &quot;newReceipts[i] = receipts[i]&quot; needs to be changed to &quot;newReceipts[j++] = receipts[i]&quot; where j should be defined and initialized to 0 before the for loop.","body":"There are a couple of things in your own code that can potentially get you an &quot;array out of bound&quot; error. The &quot;else&quot; statement needs to be removed as it causes receipts to be skipped while you are counting. Secondly, the statement &quot;newReceipts[i] = receipts[i]&quot; needs to be changed to &quot;newReceipts[j++] = receipts[i]&quot; where j should be defined and initialized to 0 before the for loop."}],"owner":{"account_id":16232629,"reputation":101,"user_id":22366334,"display_name":"Bishop_1"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691650920,"creation_date":1691617796,"question_id":76871486,"body_markdown":"I&#39;ve been going through some exam questions and stumbled upon two different implementations for a receipt selection task. I&#39;m trying to understand the key differences between these two code snippets. The first code snippet is my own, and the second one is from the exam question.\r\n\r\n**Code Example 1:**\r\n```java\r\npublic static Receipt[] selectReceipts(Receipt[] receipts, String currency) {\r\n\r\n    int countReceipts = 0;\r\n    for (int i = 0; i &lt; receipts.length; i++) {\r\n        if (receipts[i].getCurrency().equals(currency)) {\r\n            countReceipts++;\r\n        } else {\r\n            i++; \r\n        }\r\n    }\r\n\r\n    Receipt[] newReceipts = new Receipt[countReceipts];\r\n\r\n    for (int i = 0; i &lt; receipts.length; i++) {\r\n        if (receipts[i].getCurrency().equals(currency)) {\r\n            newReceipts[i] = receipts[i];\r\n        }\r\n    }\r\n\r\n    return newReceipts; \r\n}\r\n```\r\n\r\n**Code Example 2:**\r\n```java\r\npublic static Receipt[] selectReceipts(Receipt[] receipts, String currency) {\r\n\r\n    int countReceipts = 0;\r\n    for (Receipt receipt : receipts) {\r\n        if (receipt.getCurrency().equals(currency)) {\r\n            countReceipts++;\r\n        }\r\n    }\r\n\r\n    Receipt[] selectedReceipts = new Receipt[countReceipts];\r\n    int i = 0;\r\n    int j = 0;\r\n    while (j &lt; countReceipts) {\r\n        if (receipts[i].getCurrency().equals(currency)) {\r\n            selectedReceipts[j++] = receipts[i];\r\n        }\r\n        i++;\r\n    }\r\n\r\n    return selectedReceipts;\r\n}\r\n```\r\n\r\nI&#39;d appreciate it if someone could shed light on this. What are the significant differences between the `for` loop structure in my Code Example 1 and the combination of `for-each` and `while` loops in Code Example 2? Is the inclusion of the `else` statement in my Code Example 1 necessary? Additionally, should I consider renaming the `newReceipts` array for better clarity?  \r\n\r\nAnd finally, does the code functionally achieve the same thing? My own code is Example 1, so in all likelihood, if there&#39;s an error, it would be there.\r\n\r\nI received some valuable insights regarding the potential issues in my code. Specifically, there seems to be a bug in my first example&#39;s second loop where the newReceipts array might be of a shorter length compared to the receipts array, potentially leading to incorrect results.\r\n\r\n","title":"Clarification needed: core differences between two receipt selection code snippets","body":"<p>I've been going through some exam questions and stumbled upon two different implementations for a receipt selection task. I'm trying to understand the key differences between these two code snippets. The first code snippet is my own, and the second one is from the exam question.</p>\n<p><strong>Code Example 1:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>public static Receipt[] selectReceipts(Receipt[] receipts, String currency) {\n\n    int countReceipts = 0;\n    for (int i = 0; i &lt; receipts.length; i++) {\n        if (receipts[i].getCurrency().equals(currency)) {\n            countReceipts++;\n        } else {\n            i++; \n        }\n    }\n\n    Receipt[] newReceipts = new Receipt[countReceipts];\n\n    for (int i = 0; i &lt; receipts.length; i++) {\n        if (receipts[i].getCurrency().equals(currency)) {\n            newReceipts[i] = receipts[i];\n        }\n    }\n\n    return newReceipts; \n}\n</code></pre>\n<p><strong>Code Example 2:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>public static Receipt[] selectReceipts(Receipt[] receipts, String currency) {\n\n    int countReceipts = 0;\n    for (Receipt receipt : receipts) {\n        if (receipt.getCurrency().equals(currency)) {\n            countReceipts++;\n        }\n    }\n\n    Receipt[] selectedReceipts = new Receipt[countReceipts];\n    int i = 0;\n    int j = 0;\n    while (j &lt; countReceipts) {\n        if (receipts[i].getCurrency().equals(currency)) {\n            selectedReceipts[j++] = receipts[i];\n        }\n        i++;\n    }\n\n    return selectedReceipts;\n}\n</code></pre>\n<p>I'd appreciate it if someone could shed light on this. What are the significant differences between the <code>for</code> loop structure in my Code Example 1 and the combination of <code>for-each</code> and <code>while</code> loops in Code Example 2? Is the inclusion of the <code>else</code> statement in my Code Example 1 necessary? Additionally, should I consider renaming the <code>newReceipts</code> array for better clarity?</p>\n<p>And finally, does the code functionally achieve the same thing? My own code is Example 1, so in all likelihood, if there's an error, it would be there.</p>\n<p>I received some valuable insights regarding the potential issues in my code. Specifically, there seems to be a bug in my first example's second loop where the newReceipts array might be of a shorter length compared to the receipts array, potentially leading to incorrect results.</p>\n"},{"tags":["java","hibernate"],"comments":[{"owner":{"account_id":169237,"reputation":39170,"user_id":395202,"accept_rate":59,"display_name":"Adrian Shum"},"score":0,"creation_date":1429242359,"post_id":29655306,"comment_id":47516552,"body_markdown":"It is actually absolutely fine to have same table mapped to multiple entities.  However if you are solving your &quot;unproxy&quot; problem (I bet you mean you are navigating the whole object graph?) by such approach, you are going to be in deep trouble in the future, especially you have more complicated object relationships, and in different function you need different combination of relationships.","body":"It is actually absolutely fine to have same table mapped to multiple entities.  However if you are solving your &quot;unproxy&quot; problem (I bet you mean you are navigating the whole object graph?) by such approach, you are going to be in deep trouble in the future, especially you have more complicated object relationships, and in different function you need different combination of relationships."},{"owner":{"account_id":1080801,"reputation":1019,"user_id":1077863,"accept_rate":36,"display_name":"kennyg"},"score":0,"creation_date":1429250985,"post_id":29655306,"comment_id":47519624,"body_markdown":"Hmm could you explain further why this may be a problem down the line?","body":"Hmm could you explain further why this may be a problem down the line?"},{"owner":{"account_id":169237,"reputation":39170,"user_id":395202,"accept_rate":59,"display_name":"Adrian Shum"},"score":0,"creation_date":1429259948,"post_id":29655306,"comment_id":47524907,"body_markdown":"for example, If you system continue to grow, you may have an entity A having relationship to B, C, D and E.  And you may have different functions that function 1 will need only A, function 2 will need A + B, function 3 will need A + C + D,  function 4 will need A + C + E etc.  By using your approach, you will need to have different forms of A entity to cope with use of different function.  That&#39;s going to be a maintenance nightmare","body":"for example, If you system continue to grow, you may have an entity A having relationship to B, C, D and E.  And you may have different functions that function 1 will need only A, function 2 will need A + B, function 3 will need A + C + D,  function 4 will need A + C + E etc.  By using your approach, you will need to have different forms of A entity to cope with use of different function.  That&#39;s going to be a maintenance nightmare"}],"answers":[{"tags":[],"owner":{"account_id":6150857,"reputation":569,"user_id":4795299,"display_name":"Bartun"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1429175225,"creation_date":1429175225,"answer_id":29670114,"question_id":29655306,"body_markdown":"    \r\nUserReference.java\r\n\r\n    @Entity\r\n    @DiscriminatorColumn(name = &quot;type&quot;)\r\n    @DiscriminatorValue(value = &quot;UserReference&quot;)\r\n    @Inheritance(strategy = InheritanceType.SINGLE_TABLE)\r\n    public class UserReference extends BaseEntity {\r\n    \r\n    \tprivate String name;\r\n    }\r\nUser.java\r\n\r\n    @Entity\r\n    @DiscriminatorValue(value = &quot;User&quot;)\r\n    public class User extends UserReference {\r\n    \t@OneToOne\r\n    \t@JoinColumn(name = &quot;address_id&quot;)\r\n    \tprivate Address address;\r\n    \r\n    }\r\n\r\n","title":"How can i map multiple classes to one table in hibernate?","body":"<p>UserReference.java</p>\n\n<pre><code>@Entity\n@DiscriminatorColumn(name = \"type\")\n@DiscriminatorValue(value = \"UserReference\")\n@Inheritance(strategy = InheritanceType.SINGLE_TABLE)\npublic class UserReference extends BaseEntity {\n\n    private String name;\n}\n</code></pre>\n\n<p>User.java</p>\n\n<pre><code>@Entity\n@DiscriminatorValue(value = \"User\")\npublic class User extends UserReference {\n    @OneToOne\n    @JoinColumn(name = \"address_id\")\n    private Address address;\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1914874,"reputation":13438,"user_id":1727645,"accept_rate":81,"display_name":"Prasad Kharkar"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1429176437,"creation_date":1429176437,"answer_id":29670581,"question_id":29655306,"body_markdown":"Your question is not very clear to me but I&#39;ll try to answer as per my understanding. It depends upon what you really want to persist and what you want as a java entity. \r\n\r\nConsider you want to represent User class with a database table i.e. represent User as entity in JPA. Now you can Create an Embeddable class which will be part of another class. \r\n\r\nSo you can map an Address class in User Entity and make the Address class as Embeddable using [@Embeddable annotation][1]\r\npackage com.thejavageek.embeddabledemo;\r\n\r\n    import javax.persistence.Embeddable;\r\n\r\n    @Embeddable\r\n    public class Address {\r\n    \r\n    \tprivate String area;\r\n    \tprivate String city;\r\n    \tprivate String pincode;\r\n    \r\n    \tpublic String getArea() {\r\n    \t\treturn area;\r\n    \t}\r\n    \r\n    \tpublic void setArea(String area) {\r\n    \t\tthis.area = area;\r\n    \t}\r\n    \r\n    \tpublic String getCity() {\r\n    \t\treturn city;\r\n    \t}\r\n    \r\n    \tpublic void setCity(String city) {\r\n    \t\tthis.city = city;\r\n    \t}\r\n    \r\n    \tpublic String getPincode() {\r\n    \t\treturn pincode;\r\n    \t}\r\n    \r\n    \tpublic void setPincode(String pincode) {\r\n    \t\tthis.pincode = pincode;\r\n    \t}\r\n    \r\n    }\r\n\r\nand you can embed this embeddable class as below \r\n\r\n    package com.thejavageek.embeddabledemo;\r\n    \r\n    import javax.persistence.Embedded;\r\n    import javax.persistence.Entity;\r\n    import javax.persistence.GeneratedValue;\r\n    import javax.persistence.GenerationType;\r\n    import javax.persistence.Id;\r\n    import javax.persistence.TableGenerator;\r\n    \r\n    @Entity\r\n    public class Person {\r\n    \r\n    \t@TableGenerator(name = &quot;person_gen&quot;, table = &quot;id_gen&quot;, pkColumnName = &quot;gen_name&quot;, valueColumnName = &quot;gen_val&quot;, allocationSize = 100)\r\n    \t@Id\r\n    \t@GeneratedValue(strategy = GenerationType.TABLE, generator = &quot;person_gen&quot;)\r\n    \tprivate String idperson;\r\n    \tprivate String name;\r\n    \r\n    \t@Embedded\r\n    \tprivate Address address;\r\n    \r\n    \tpublic String getIdperson() {\r\n    \t\treturn idperson;\r\n    \t}\r\n    \r\n    \tpublic void setIdperson(String idperson) {\r\n    \t\tthis.idperson = idperson;\r\n    \t}\r\n    \r\n    \tpublic String getName() {\r\n    \t\treturn name;\r\n    \t}\r\n    \r\n    \tpublic void setName(String name) {\r\n    \t\tthis.name = name;\r\n    \t}\r\n    \r\n    \tpublic Address getAddress() {\r\n    \t\treturn address;\r\n    \t}\r\n    \r\n    \tpublic void setAddress(Address address) {\r\n    \t\tthis.address = address;\r\n    \t}\r\n    \r\n    }\r\n\r\n  [1]: http://www.thejavageek.com/2014/01/25/jpa-embeddable-annotation/","title":"How can i map multiple classes to one table in hibernate?","body":"<p>Your question is not very clear to me but I'll try to answer as per my understanding. It depends upon what you really want to persist and what you want as a java entity. </p>\n\n<p>Consider you want to represent User class with a database table i.e. represent User as entity in JPA. Now you can Create an Embeddable class which will be part of another class. </p>\n\n<p>So you can map an Address class in User Entity and make the Address class as Embeddable using <a href=\"http://www.thejavageek.com/2014/01/25/jpa-embeddable-annotation/\" rel=\"noreferrer\">@Embeddable annotation</a>\npackage com.thejavageek.embeddabledemo;</p>\n\n<pre><code>import javax.persistence.Embeddable;\n\n@Embeddable\npublic class Address {\n\n    private String area;\n    private String city;\n    private String pincode;\n\n    public String getArea() {\n        return area;\n    }\n\n    public void setArea(String area) {\n        this.area = area;\n    }\n\n    public String getCity() {\n        return city;\n    }\n\n    public void setCity(String city) {\n        this.city = city;\n    }\n\n    public String getPincode() {\n        return pincode;\n    }\n\n    public void setPincode(String pincode) {\n        this.pincode = pincode;\n    }\n\n}\n</code></pre>\n\n<p>and you can embed this embeddable class as below </p>\n\n<pre><code>package com.thejavageek.embeddabledemo;\n\nimport javax.persistence.Embedded;\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.TableGenerator;\n\n@Entity\npublic class Person {\n\n    @TableGenerator(name = \"person_gen\", table = \"id_gen\", pkColumnName = \"gen_name\", valueColumnName = \"gen_val\", allocationSize = 100)\n    @Id\n    @GeneratedValue(strategy = GenerationType.TABLE, generator = \"person_gen\")\n    private String idperson;\n    private String name;\n\n    @Embedded\n    private Address address;\n\n    public String getIdperson() {\n        return idperson;\n    }\n\n    public void setIdperson(String idperson) {\n        this.idperson = idperson;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public Address getAddress() {\n        return address;\n    }\n\n    public void setAddress(Address address) {\n        this.address = address;\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":169237,"reputation":39170,"user_id":395202,"accept_rate":59,"display_name":"Adrian Shum"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1429240615,"creation_date":1429240615,"answer_id":29689616,"question_id":29655306,"body_markdown":"I think what you mean is you have a table like\r\n\r\n    USER\r\n    - USER_ID\r\n    - USER_NAME\r\n    - ADDRESS_ID\r\n\r\nand \r\n\r\n    ADDRESS\r\n    - ADDRESS_ID\r\n    - ADDRESS_DETAIL\r\n\r\nsomething like that?\r\n\r\nAnd you want to have 2 `User` entities, one of it contains reference to Address and another did not (so it save SQL join time, as you said), is my understanding correct?\r\n\r\nIf so, you do not need to do so.\r\n\r\nSimply have one `User` entity and put its `Address` relationship to be LAZY fetched.  \r\n\r\nIf in any function you need `Address` in your `User`, do a join fetch.\r\n\r\ne.g.\r\n\r\n    @Entity\r\n    public class User {\r\n        @Id\r\n        private Long id;\r\n    \r\n        private String name;\r\n    \r\n        @ManyToOne(fetch=FetchType.LAZY)\r\n        private Address address;\r\n    }\r\n\r\nin such case, all normal retrieval of `User` will not incur any join to `Address` table.  However it is flexible to do something like\r\n\r\n    from User u left join fetch u.address where u.name like &#39;blabala&#39;\r\n\r\n\r\n\r\n","title":"How can i map multiple classes to one table in hibernate?","body":"<p>I think what you mean is you have a table like</p>\n\n<pre><code>USER\n- USER_ID\n- USER_NAME\n- ADDRESS_ID\n</code></pre>\n\n<p>and </p>\n\n<pre><code>ADDRESS\n- ADDRESS_ID\n- ADDRESS_DETAIL\n</code></pre>\n\n<p>something like that?</p>\n\n<p>And you want to have 2 <code>User</code> entities, one of it contains reference to Address and another did not (so it save SQL join time, as you said), is my understanding correct?</p>\n\n<p>If so, you do not need to do so.</p>\n\n<p>Simply have one <code>User</code> entity and put its <code>Address</code> relationship to be LAZY fetched.  </p>\n\n<p>If in any function you need <code>Address</code> in your <code>User</code>, do a join fetch.</p>\n\n<p>e.g.</p>\n\n<pre><code>@Entity\npublic class User {\n    @Id\n    private Long id;\n\n    private String name;\n\n    @ManyToOne(fetch=FetchType.LAZY)\n    private Address address;\n}\n</code></pre>\n\n<p>in such case, all normal retrieval of <code>User</code> will not incur any join to <code>Address</code> table.  However it is flexible to do something like</p>\n\n<pre><code>from User u left join fetch u.address where u.name like 'blabala'\n</code></pre>\n"}],"owner":{"account_id":1080801,"reputation":1019,"user_id":1077863,"accept_rate":36,"display_name":"kennyg"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16237,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":3,"score":7,"last_activity_date":1691649972,"creation_date":1429113995,"question_id":29655306,"body_markdown":"From my research, it seems not likely that it&#39;s possible, but here is my use case.\r\n\r\nI have a table called user with an address id.\r\n\r\nI&#39;d like to map a UserReference and User class to this table where UserReference does not contain the Address object (to save sql joining time) and User *does* contain the Address object (in case it&#39;s needed).\r\n\r\nI can&#39;t use *subclass* since it expects a join table, and I can&#39;t just define two separate classes because a get() seems to return double of every row (one for User, one for UserReference).\r\n\r\nDoes anyone know how I could go about this?\r\n\r\n------------------------\r\n\r\nI guess I should try to explain myself better.\r\n\r\n    public class UserReference {\r\n        private int id;\r\n        private String name;\r\n    }\r\n\r\n    public class User extends UserReference {\r\n        private Address;\r\n    }\r\n\r\nI&#39;d like to map both UserReference and User so that I can query for UserReference when I only need the basic details, and User whenever I need the full object.\r\n\r\nI understand that I can simply have Address be lazy loaded but I have a two tier system which unproxies all objects once it passes through the layers.\r\n\r\n--------------------------\r\nedit:\r\n\r\nPerhaps my question was too ambiguous, but based on the answers, it doesn&#39;t seem very possible to do what I want. Thanks anyway everyone.","title":"How can i map multiple classes to one table in hibernate?","body":"<p>From my research, it seems not likely that it's possible, but here is my use case.</p>\n<p>I have a table called user with an address id.</p>\n<p>I'd like to map a UserReference and User class to this table where UserReference does not contain the Address object (to save sql joining time) and User <em>does</em> contain the Address object (in case it's needed).</p>\n<p>I can't use <em>subclass</em> since it expects a join table, and I can't just define two separate classes because a get() seems to return double of every row (one for User, one for UserReference).</p>\n<p>Does anyone know how I could go about this?</p>\n<hr />\n<p>I guess I should try to explain myself better.</p>\n<pre><code>public class UserReference {\n    private int id;\n    private String name;\n}\n\npublic class User extends UserReference {\n    private Address;\n}\n</code></pre>\n<p>I'd like to map both UserReference and User so that I can query for UserReference when I only need the basic details, and User whenever I need the full object.</p>\n<p>I understand that I can simply have Address be lazy loaded but I have a two tier system which unproxies all objects once it passes through the layers.</p>\n<hr />\n<p>edit:</p>\n<p>Perhaps my question was too ambiguous, but based on the answers, it doesn't seem very possible to do what I want. Thanks anyway everyone.</p>\n"},{"tags":["java","maven","tomcat"],"answers":[{"tags":[],"owner":{"account_id":2390644,"reputation":4058,"user_id":2090555,"accept_rate":83,"display_name":"Himanshu Bhardwaj"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691585449,"creation_date":1691585449,"answer_id":76867971,"question_id":76866380,"body_markdown":"    mvn -Ddb.user=db-user -Ddb.pwd=db-pwd tomcat7:deploy\r\n\r\nThis command does not mean that war will be deployed in a tomcat VM with these system properties (db.user, db.pwd) The documentation is not good enough (https://tomcat.apache.org/maven-plugin-2.2/run-mojo-features.html) but look at the `systemProperties` section\r\n\r\n    &lt;plugin&gt;\r\n     &lt;groupId&gt;org.apache.tomcat.maven&lt;/groupId&gt;\r\n     &lt;artifactId&gt;tomcat7-maven-plugin&lt;/artifactId&gt;\r\n     &lt;version&gt;2.2&lt;/version&gt;\r\n     &lt;configuration&gt;\r\n         &lt;url&gt;http://localhost:8080/manager/text&lt;/url&gt;\r\n         &lt;username&gt;role-user&lt;/username&gt;\r\n         &lt;password&gt;role-pwd&lt;/password&gt;\r\n         &lt;path&gt;/abc&lt;/path&gt;\r\n         &lt;update&gt;true&lt;/update&gt;\r\n         &lt;systemProperties&gt;\r\n           &lt;db.user&gt;${db.user}&lt;/db.user&gt;\r\n           &lt;db.pwd&gt;${db.pwd}&lt;/db.pwd&gt;\r\n        &lt;/systemProperties&gt;\r\n     &lt;/configuration&gt;\r\n    &lt;/plugin&gt;\r\n\r\n\r\nAnd then run via mvn command:\r\n\r\n    mvn -Ddb.user=db-user -Ddb.pwd=db-pwd tomcat7:deploy\r\n\r\n\r\nThis should hopefully work.","title":"Deployed application at context path [/abc] but context failed to start - Maven Spring Project Issue","body":"<pre><code>mvn -Ddb.user=db-user -Ddb.pwd=db-pwd tomcat7:deploy\n</code></pre>\n<p>This command does not mean that war will be deployed in a tomcat VM with these system properties (db.user, db.pwd) The documentation is not good enough (<a href=\"https://tomcat.apache.org/maven-plugin-2.2/run-mojo-features.html\" rel=\"nofollow noreferrer\">https://tomcat.apache.org/maven-plugin-2.2/run-mojo-features.html</a>) but look at the <code>systemProperties</code> section</p>\n<pre><code>&lt;plugin&gt;\n &lt;groupId&gt;org.apache.tomcat.maven&lt;/groupId&gt;\n &lt;artifactId&gt;tomcat7-maven-plugin&lt;/artifactId&gt;\n &lt;version&gt;2.2&lt;/version&gt;\n &lt;configuration&gt;\n     &lt;url&gt;http://localhost:8080/manager/text&lt;/url&gt;\n     &lt;username&gt;role-user&lt;/username&gt;\n     &lt;password&gt;role-pwd&lt;/password&gt;\n     &lt;path&gt;/abc&lt;/path&gt;\n     &lt;update&gt;true&lt;/update&gt;\n     &lt;systemProperties&gt;\n       &lt;db.user&gt;${db.user}&lt;/db.user&gt;\n       &lt;db.pwd&gt;${db.pwd}&lt;/db.pwd&gt;\n    &lt;/systemProperties&gt;\n &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>And then run via mvn command:</p>\n<pre><code>mvn -Ddb.user=db-user -Ddb.pwd=db-pwd tomcat7:deploy\n</code></pre>\n<p>This should hopefully work.</p>\n"},{"tags":[],"owner":{"account_id":7608559,"reputation":314,"user_id":5770332,"accept_rate":60,"display_name":"Abhay"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691648874,"creation_date":1691648874,"answer_id":76873109,"question_id":76866380,"body_markdown":"I was able to make it work after some tweaks\r\n\r\nRemove username,password and url from plugin details\r\n\r\n```\r\n&lt;plugin&gt;\r\n &lt;groupId&gt;org.apache.tomcat.maven&lt;/groupId&gt;\r\n &lt;artifactId&gt;tomcat7-maven-plugin&lt;/artifactId&gt;\r\n &lt;version&gt;2.2&lt;/version&gt;\r\n &lt;configuration&gt;\r\n     &lt;path&gt;/abc&lt;/path&gt;\r\n     &lt;update&gt;true&lt;/update&gt;\r\n     &lt;systemProperties&gt;\r\n       &lt;db.user&gt;${db.user}&lt;/db.user&gt;\r\n       &lt;db.pwd&gt;${db.pwd}&lt;/db.pwd&gt;\r\n    &lt;/systemProperties&gt;\r\n &lt;/configuration&gt;\r\n&lt;/plugin&gt;\r\n```\r\n\r\nUse the below command to deploy\r\n`mvn -Ddb.user=db-user -Ddb.pwd=db-pwd tomcat7:run`\r\n\r\nIt will start its own tomcat container, hence is no need to run any instance of tomcat beforehand or create any user in `tomcat-users.xml`\r\n\r\nOnce you see the below lines on terminal/cmd\r\n```\r\nAug 10, 2023 11:49:25 AM org.apache.coyote.AbstractProtocol start\r\nINFO: Starting ProtocolHandler [&quot;http-bio-8080&quot;]\r\n```\r\nApp is deployed and can be checke on the browser at `localhost:8080/abc`\r\n\r\nIf need to change port(eg-8081) add `&lt;port&gt;8081&lt;/port&gt;` under `configuration` tag\r\n\r\nBut now I am curious about how the previous thing works, have seen many posts/blogs about that. If anybody knows, please comment.","title":"Deployed application at context path [/abc] but context failed to start - Maven Spring Project Issue","body":"<p>I was able to make it work after some tweaks</p>\n<p>Remove username,password and url from plugin details</p>\n<pre><code>&lt;plugin&gt;\n &lt;groupId&gt;org.apache.tomcat.maven&lt;/groupId&gt;\n &lt;artifactId&gt;tomcat7-maven-plugin&lt;/artifactId&gt;\n &lt;version&gt;2.2&lt;/version&gt;\n &lt;configuration&gt;\n     &lt;path&gt;/abc&lt;/path&gt;\n     &lt;update&gt;true&lt;/update&gt;\n     &lt;systemProperties&gt;\n       &lt;db.user&gt;${db.user}&lt;/db.user&gt;\n       &lt;db.pwd&gt;${db.pwd}&lt;/db.pwd&gt;\n    &lt;/systemProperties&gt;\n &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>Use the below command to deploy\n<code>mvn -Ddb.user=db-user -Ddb.pwd=db-pwd tomcat7:run</code></p>\n<p>It will start its own tomcat container, hence is no need to run any instance of tomcat beforehand or create any user in <code>tomcat-users.xml</code></p>\n<p>Once you see the below lines on terminal/cmd</p>\n<pre><code>Aug 10, 2023 11:49:25 AM org.apache.coyote.AbstractProtocol start\nINFO: Starting ProtocolHandler [&quot;http-bio-8080&quot;]\n</code></pre>\n<p>App is deployed and can be checke on the browser at <code>localhost:8080/abc</code></p>\n<p>If need to change port(eg-8081) add <code>&lt;port&gt;8081&lt;/port&gt;</code> under <code>configuration</code> tag</p>\n<p>But now I am curious about how the previous thing works, have seen many posts/blogs about that. If anybody knows, please comment.</p>\n"}],"owner":{"account_id":7608559,"reputation":314,"user_id":5770332,"accept_rate":60,"display_name":"Abhay"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691648874,"creation_date":1691573484,"question_id":76866380,"body_markdown":"I have a maven spring web-app which is deployed on AWS Beanstalk and working fine. Now, I want to shift it to OCI VPS/VM and use tomcat7-maven-plugin to deploy using the maven command. Using command line args to pass DB credentials. followed the below steps but deployment is failing.\r\n\r\n 1. Installed Maven and Tomcat 9.\r\n 2. Added a user in **tomcat-users.xml** with role **manager-script**\r\n```\r\n&lt;user username=&quot;role-user&lt;&quot; password=&quot;role-pwd&quot; roles=&quot;manager-script&quot;/&gt;\r\n```\r\n 3. Added the plugin in pom.xml\r\n```\r\n&lt;plugin&gt;\r\n     &lt;groupId&gt;org.apache.tomcat.maven&lt;/groupId&gt;\r\n     &lt;artifactId&gt;tomcat7-maven-plugin&lt;/artifactId&gt;\r\n     &lt;version&gt;2.2&lt;/version&gt;\r\n     &lt;configuration&gt;\r\n         &lt;url&gt;http://localhost:8080/manager/text&lt;/url&gt;\r\n\t\t &lt;username&gt;role-user&lt;/username&gt;\r\n\t\t &lt;password&gt;role-pwd&lt;/password&gt;\r\n         &lt;path&gt;/abc&lt;/path&gt;\r\n\t\t &lt;update&gt;true&lt;/update&gt;\r\n     &lt;/configuration&gt;\r\n&lt;/plugin&gt;\r\n```\r\n 4. Ran the command to deploy - `mvn -Ddb.user=db-user -Ddb.pwd=db-pwd tomcat7:deploy`\r\n\r\nIt uploads the WAR in /webapps then fails with this message `FAIL - Deployed application at context path [/abc] but context failed to start`.\r\n\r\nI tried it on my local also, thinking maybe the setup on VM needs some additional config, didn&#39;t work.\r\n\r\nIn the logs, it says db.user property not found, so not able to read command line args for some reason.\r\n```\r\nInvalid bean definition with name &#39;dataSource&#39; defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Could not resolve placeholder\r\n```\r\n\r\nBefore trying the above steps, I tried to upload the WAR file via the Tomcat UI and it didn&#39;t work because I don&#39;t know how to pass additional args there or if it is even possible.\r\n\r\nIf someone can help with either of those approaches it would be much appreciated.\r\n\r\nTIA\r\n\r\nPS - I am not a Java developer and this is a side project I work on sometimes, last time I used java/tomcat in a project was more than 7 yrs ago. So, maybe there is a silly mistake or straight forward solution and I am not aware of it.","title":"Deployed application at context path [/abc] but context failed to start - Maven Spring Project Issue","body":"<p>I have a maven spring web-app which is deployed on AWS Beanstalk and working fine. Now, I want to shift it to OCI VPS/VM and use tomcat7-maven-plugin to deploy using the maven command. Using command line args to pass DB credentials. followed the below steps but deployment is failing.</p>\n<ol>\n<li>Installed Maven and Tomcat 9.</li>\n<li>Added a user in <strong>tomcat-users.xml</strong> with role <strong>manager-script</strong></li>\n</ol>\n<pre><code>&lt;user username=&quot;role-user&lt;&quot; password=&quot;role-pwd&quot; roles=&quot;manager-script&quot;/&gt;\n</code></pre>\n<ol start=\"3\">\n<li>Added the plugin in pom.xml</li>\n</ol>\n<pre><code>&lt;plugin&gt;\n     &lt;groupId&gt;org.apache.tomcat.maven&lt;/groupId&gt;\n     &lt;artifactId&gt;tomcat7-maven-plugin&lt;/artifactId&gt;\n     &lt;version&gt;2.2&lt;/version&gt;\n     &lt;configuration&gt;\n         &lt;url&gt;http://localhost:8080/manager/text&lt;/url&gt;\n         &lt;username&gt;role-user&lt;/username&gt;\n         &lt;password&gt;role-pwd&lt;/password&gt;\n         &lt;path&gt;/abc&lt;/path&gt;\n         &lt;update&gt;true&lt;/update&gt;\n     &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n<ol start=\"4\">\n<li>Ran the command to deploy - <code>mvn -Ddb.user=db-user -Ddb.pwd=db-pwd tomcat7:deploy</code></li>\n</ol>\n<p>It uploads the WAR in /webapps then fails with this message <code>FAIL - Deployed application at context path [/abc] but context failed to start</code>.</p>\n<p>I tried it on my local also, thinking maybe the setup on VM needs some additional config, didn't work.</p>\n<p>In the logs, it says db.user property not found, so not able to read command line args for some reason.</p>\n<pre><code>Invalid bean definition with name 'dataSource' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Could not resolve placeholder\n</code></pre>\n<p>Before trying the above steps, I tried to upload the WAR file via the Tomcat UI and it didn't work because I don't know how to pass additional args there or if it is even possible.</p>\n<p>If someone can help with either of those approaches it would be much appreciated.</p>\n<p>TIA</p>\n<p>PS - I am not a Java developer and this is a side project I work on sometimes, last time I used java/tomcat in a project was more than 7 yrs ago. So, maybe there is a silly mistake or straight forward solution and I am not aware of it.</p>\n"},{"tags":["java","vcf-vcard"],"owner":{"account_id":5031261,"reputation":13,"user_id":4041362,"display_name":"Manju"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":877,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691647670,"creation_date":1431497134,"question_id":30206867,"body_markdown":"creating `.vcf` files fore all customers stored in DB so that we can push it to mobile contacts I was able to create `.vcf` file wondering how can i save this files to mobile contact automatically . if i save `.vcf` file to SD card once again it asks me to save it in contacts \r\n\r\nbut i need to save contacts directly \r\n\r\nCan i save this to Google and can i sync from there \r\nbelow is the code what i have done \r\n\r\n\r\n    import java.io.*;\r\n    \r\n    public class Vcard{\r\n      \r\n        public static void main(String[] args) throws IOException{\r\n      \r\n          File f=new File(&quot;D:\\\\contact.vcf&quot;);\r\n          FileOutputStream fop=new FileOutputStream(f);\r\n           \r\n          if(f.exists()){\r\n          String str=&quot;BEGIN:VCARD\\n&quot; +\r\n                     &quot;VERSION:4.0\\n&quot; +\r\n                     &quot;N:Gump;Forrest;;;\\n&quot; +\r\n                     &quot;FN:Forrest Gump\\n&quot;+\r\n                     &quot;ORG:Bubba Gump Shrimp Co.\\n&quot;+\r\n                     &quot;TITLE:Shrimp Man\\n&quot;+\r\n                     &quot;TEL;TYPE=work,voice;VALUE=uri:tel:+1-111-555-1212\\n&quot;+\r\n                     \t&quot;EMAIL:forrestgump@example.com\\n&quot;+\r\n                \r\n                     &quot;END:VCARD&quot;;\r\n              fop.write(str.getBytes());\r\n              //Now read the content of the vCard after writing data into it\r\n              BufferedReader br = null;\r\n              String sCurrentLine;\r\n              br = new BufferedReader(new FileReader(&quot;contact.vcf&quot;));\r\n              while ((sCurrentLine = br.readLine()) != null) {\r\n      System.out.println(sCurrentLine);\r\n       }\r\n              //close the output stream and buffer reader\r\n              fop.flush();\r\n              fop.close();\r\n              System.out.println(&quot;The data has been written&quot;);\r\n              }\r\n      \r\n              else\r\n                System.out.println(&quot;This file does not exist&quot;);\r\n        }\r\n      }\r\n\r\nAny help will be appreciated ","title":"Creating .vcf file and save it into mobile contacts","body":"<p>creating <code>.vcf</code> files fore all customers stored in DB so that we can push it to mobile contacts I was able to create <code>.vcf</code> file wondering how can i save this files to mobile contact automatically . if i save <code>.vcf</code> file to SD card once again it asks me to save it in contacts </p>\n\n<p>but i need to save contacts directly </p>\n\n<p>Can i save this to Google and can i sync from there \nbelow is the code what i have done </p>\n\n<pre><code>import java.io.*;\n\npublic class Vcard{\n\n    public static void main(String[] args) throws IOException{\n\n      File f=new File(\"D:\\\\contact.vcf\");\n      FileOutputStream fop=new FileOutputStream(f);\n\n      if(f.exists()){\n      String str=\"BEGIN:VCARD\\n\" +\n                 \"VERSION:4.0\\n\" +\n                 \"N:Gump;Forrest;;;\\n\" +\n                 \"FN:Forrest Gump\\n\"+\n                 \"ORG:Bubba Gump Shrimp Co.\\n\"+\n                 \"TITLE:Shrimp Man\\n\"+\n                 \"TEL;TYPE=work,voice;VALUE=uri:tel:+1-111-555-1212\\n\"+\n                    \"EMAIL:forrestgump@example.com\\n\"+\n\n                 \"END:VCARD\";\n          fop.write(str.getBytes());\n          //Now read the content of the vCard after writing data into it\n          BufferedReader br = null;\n          String sCurrentLine;\n          br = new BufferedReader(new FileReader(\"contact.vcf\"));\n          while ((sCurrentLine = br.readLine()) != null) {\n  System.out.println(sCurrentLine);\n   }\n          //close the output stream and buffer reader\n          fop.flush();\n          fop.close();\n          System.out.println(\"The data has been written\");\n          }\n\n          else\n            System.out.println(\"This file does not exist\");\n    }\n  }\n</code></pre>\n\n<p>Any help will be appreciated </p>\n"},{"tags":["java","gradle","gradle-kotlin-dsl","java-module"],"owner":{"account_id":17417683,"reputation":65,"user_id":12623787,"display_name":"sogytots"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691647659,"creation_date":1691420399,"question_id":76852924,"body_markdown":"I have a java module with many 3rd party jars added. I am migrating the java 8 project to java 17. I have added the module-info.java file with all the 3rd party dependencies. \r\n\r\n    module com.ib.core {\r\n    exports com.ib.core.interfaces.dbserver.projects;\r\n    exports com.ib.core.rmi;\r\n    exports com.ib.core.interfaces.castor.common;\r\n    exports com.ib.core.bo.struct.datasource.connector.riversand.bo.config;\r\n    exports com.ib.core.interfaces.dbserver.projects.versioning;\r\n    exports com.ib.core.utils;\r\n    exports com.ib.core.bo.holders;\r\n    requires java.xml;\r\n    requires commons.io;\r\n    requires dom4j;\r\n    requires software.amazon.awssdk.services.s3;\r\n    requires com.arangodb.core;\r\n    requires com.fasterxml.jackson.databind;\r\n    requires org.apache.logging.log4j;\r\n    requires jackson.mapper.asl;\r\n    requires java.rmi;\r\n    requires java.sql;\r\n    requires java.ws.rs;}\r\n\r\nI have the libraries added in Core/lib/all the jars\r\n below is my classpath sample\r\n\r\n          &lt;classpathentry kind=&quot;src&quot; path=&quot;src/main&quot;/&gt;\r\n          &lt;classpathentry kind=&quot;src&quot; path=&quot;src/generated&quot;/&gt;\r\n           &lt;classpathentry kind=&quot;src&quot; path=&quot;src/obfuscated&quot;/&gt;\r\n          &lt;classpathentry kind=&quot;lib&quot; path=&quot;lib/commons-io-2.5.jar&quot;&gt;\r\n    \t\t&lt;attributes&gt;\r\n    \t\t\t&lt;attribute name=&quot;module&quot; value=&quot;true&quot;/&gt;\r\n    \t\t&lt;/attributes&gt;\r\n    \t&lt;/classpathentry&gt;\r\n    \t&lt;classpathentry kind=&quot;lib&quot; path=&quot;lib/jaxb-api-2.4.0-b180830.0359.jar&quot;&gt;\r\n    \t\t&lt;attributes&gt;\r\n    \t\t\t&lt;attribute name=&quot;module&quot; value=&quot;true&quot;/&gt;\r\n    \t\t&lt;/attributes&gt;\r\n    \t&lt;/classpathentry&gt;\r\n    &lt;classpathentry kind=&quot;lib&quot; path=&quot;lib/dom4j-2.0.3.jar&quot;&gt;\r\n    \t\t&lt;attributes&gt;\r\n    \t\t\t&lt;attribute name=&quot;module&quot; value=&quot;true&quot;/&gt;\r\n    \t\t&lt;/attributes&gt;\r\n    \t&lt;/classpathentry&gt;\r\n\r\nand below is my gradle script\r\n\r\n    \r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-css --&gt;\r\n\r\n    buildscript {\r\n          repositories {\r\n            mavenCentral()\r\n            flatDir {\r\n                dir(&quot;C:/BuildUtils/proguard&quot;)\r\n            }\r\n          }\r\n          dependencies {\r\n                classpath (&quot;com.guardsquare:proguard-gradle:7.3.2&quot;)\r\n            }\r\n        }\r\n\r\n        plugins {\r\n            java\r\n        \tid (&quot;com.zyxist.chainsaw&quot;) version &quot;0.3.1&quot; apply false\r\n        }\r\n\r\n        sourceSets {\r\n           getByName(&quot;main&quot;).java.srcDirs(&quot;src/main&quot;, &quot;src/generation&quot;, &quot;src/obfuscated&quot;) \r\n        }\r\n\r\n        // In this section you declare where to find the dependencies of your project\r\n        repositories {\r\n           flatDir {\r\n               dir(&quot;lib&quot;)\r\n           }\r\n        }\r\n\r\n        val licenseManager = configurations.create(&quot;licenseManager&quot;)\r\n\r\n\r\n        dependencies {\r\n            licenseManager(project(path = &quot;:LicenseManager&quot;, configuration = &quot;applib&quot;))\r\n            implementation(project(path = &quot;:LicenseManager&quot;, configuration = &quot;applib&quot;))\r\n            implementation(fileTree(&quot;lib&quot;) { \r\n               include(&quot;*.jar&quot;)\r\n            })\r\n        \t\r\n        \timplementation(fileTree(&quot;$rootDir/IBCore/lib/awsarango&quot;) { \r\n               include(&quot;*.jar&quot;)\r\n            })\r\n        \t&quot;licenseManager&quot;(fileTree(&quot;$rootDir/IBCore/lib&quot;) { \r\n               include(&quot;*.jar&quot;)\r\n            })\r\n\r\n        }\r\n\r\n        ant.withGroovyBuilder {\r\n            &quot;taskdef&quot;(&quot;resource&quot; to &quot;tasks.properties&quot;) {\r\n                &quot;classpath&quot; {\r\n                    &quot;fileset&quot;(&quot;dir&quot; to &quot;C:/BuildUtils/encrypt&quot;, &quot;includes&quot; to &quot;encrypt.jar&quot;)    \r\n                }\r\n            }\r\n        }\r\n\r\n        val coreClasses = listOf(&quot;com/ib/core/secure/**/*&quot;, &quot;com/ib/core/obfuscated/**/*&quot;, &quot;com/ib/licensemanager/secure/**/*&quot;, &quot;com/ib/licensemanager/obfuscated/**/*&quot;)\r\n        val coreResources = listOf(&quot;**/serverstore&quot;, &quot;**/creator_private&quot;)\r\n        val encryptedCoreResources = file(&quot;$buildDir/tmp_encrypt/core&quot;)\r\n        val jarMetaFiles = listOf(&quot;META-INF/*.DSA&quot;, &quot;META-INF/*.RSA&quot;, &quot;META-INF/*.SF&quot;)\r\n\r\n        val ibCoreJarForRelease = tasks.create&lt;Jar&gt;(&quot;ibCoreJarForRelease&quot;) {\r\n            dependsOn(&quot;compileJava&quot;)\r\n            group = &quot;Build&quot;\r\n            archiveName = &quot;IBCore.jar&quot;\r\n            description = &quot;Builds fat runnable jarForRelease for &quot; + project.name\r\n            destinationDir = file(&quot;$buildDir/dist&quot;)\r\n            from(licenseManager.filter { it.name.endsWith(&quot;LicenseManager.jar&quot;) }.map { zipTree(it) })\r\n        \tfrom(sourceSets[&quot;main&quot;].output)\r\n            from(sourceSets[&quot;main&quot;].java.srcDirs) {\r\n              exclude(&quot;**/*.java&quot;)\r\n            }\r\n            exclude(coreClasses)\r\n            exclude(coreResources)\r\n            exclude(jarMetaFiles)\r\n            includeEmptyDirs = false\r\n            manifest {\r\n                attributes(&quot;Built-By&quot; ABC, &quot;Class-Path&quot; to &quot;../Libraries/Core/core.jar&quot;)\r\n            }\r\n        }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nwhen I run this, I get the following error\r\n\r\n    \r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-css --&gt;\r\n\r\n    Task :IBCore:compileJava FAILED\r\n        D:\\InBetween\\IBCore\\src\\main\\module-info.java:64: error: module not found: commons.io\r\n                requires commons.io;\r\n                                ^\r\n        D:\\InBetween\\IBCore\\src\\main\\module-info.java:69: error: module not found: jackson.mapper.asl\r\n                requires jackson.mapper.asl;\r\n                                       ^\r\n        D:\\InBetween\\IBCore\\src\\main\\module-info.java:73: error: module not found: org.apache.oltu.oauth2.client\r\n                requires org.apache.oltu.oauth2.client;\r\n                                               ^\r\n        D:\\InBetween\\IBCore\\src\\main\\module-info.java:75: error: module not found: jackson.core.asl\r\n                requires jackson.core.asl;\r\n                                     ^\r\n        D:\\InBetween\\IBCore\\src\\main\\module-info.java:76: error: module not found: dom4j\r\n                requires dom4j;\r\n                         ^\r\n        5 errors\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nAs you can see in the dependencies, I have added the file tree and included all the jars from lib. it compiles totally fine in eclipse.\r\n\r\nCan anyone tell me why this is happening and how I can fix it? ","title":"Gradle 7.3.1. giving error when building with module-info.java having 3rd party jars","body":"<p>I have a java module with many 3rd party jars added. I am migrating the java 8 project to java 17. I have added the module-info.java file with all the 3rd party dependencies.</p>\n<pre><code>module com.ib.core {\nexports com.ib.core.interfaces.dbserver.projects;\nexports com.ib.core.rmi;\nexports com.ib.core.interfaces.castor.common;\nexports com.ib.core.bo.struct.datasource.connector.riversand.bo.config;\nexports com.ib.core.interfaces.dbserver.projects.versioning;\nexports com.ib.core.utils;\nexports com.ib.core.bo.holders;\nrequires java.xml;\nrequires commons.io;\nrequires dom4j;\nrequires software.amazon.awssdk.services.s3;\nrequires com.arangodb.core;\nrequires com.fasterxml.jackson.databind;\nrequires org.apache.logging.log4j;\nrequires jackson.mapper.asl;\nrequires java.rmi;\nrequires java.sql;\nrequires java.ws.rs;}\n</code></pre>\n<p>I have the libraries added in Core/lib/all the jars\nbelow is my classpath sample</p>\n<pre><code>      &lt;classpathentry kind=&quot;src&quot; path=&quot;src/main&quot;/&gt;\n      &lt;classpathentry kind=&quot;src&quot; path=&quot;src/generated&quot;/&gt;\n       &lt;classpathentry kind=&quot;src&quot; path=&quot;src/obfuscated&quot;/&gt;\n      &lt;classpathentry kind=&quot;lib&quot; path=&quot;lib/commons-io-2.5.jar&quot;&gt;\n        &lt;attributes&gt;\n            &lt;attribute name=&quot;module&quot; value=&quot;true&quot;/&gt;\n        &lt;/attributes&gt;\n    &lt;/classpathentry&gt;\n    &lt;classpathentry kind=&quot;lib&quot; path=&quot;lib/jaxb-api-2.4.0-b180830.0359.jar&quot;&gt;\n        &lt;attributes&gt;\n            &lt;attribute name=&quot;module&quot; value=&quot;true&quot;/&gt;\n        &lt;/attributes&gt;\n    &lt;/classpathentry&gt;\n&lt;classpathentry kind=&quot;lib&quot; path=&quot;lib/dom4j-2.0.3.jar&quot;&gt;\n        &lt;attributes&gt;\n            &lt;attribute name=&quot;module&quot; value=&quot;true&quot;/&gt;\n        &lt;/attributes&gt;\n    &lt;/classpathentry&gt;\n</code></pre>\n<p>and below is my gradle script</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>buildscript {\n      repositories {\n        mavenCentral()\n        flatDir {\n            dir(\"C:/BuildUtils/proguard\")\n        }\n      }\n      dependencies {\n            classpath (\"com.guardsquare:proguard-gradle:7.3.2\")\n        }\n    }\n\n    plugins {\n        java\n        id (\"com.zyxist.chainsaw\") version \"0.3.1\" apply false\n    }\n\n    sourceSets {\n       getByName(\"main\").java.srcDirs(\"src/main\", \"src/generation\", \"src/obfuscated\") \n    }\n\n    // In this section you declare where to find the dependencies of your project\n    repositories {\n       flatDir {\n           dir(\"lib\")\n       }\n    }\n\n    val licenseManager = configurations.create(\"licenseManager\")\n\n\n    dependencies {\n        licenseManager(project(path = \":LicenseManager\", configuration = \"applib\"))\n        implementation(project(path = \":LicenseManager\", configuration = \"applib\"))\n        implementation(fileTree(\"lib\") { \n           include(\"*.jar\")\n        })\n        \n        implementation(fileTree(\"$rootDir/IBCore/lib/awsarango\") { \n           include(\"*.jar\")\n        })\n        \"licenseManager\"(fileTree(\"$rootDir/IBCore/lib\") { \n           include(\"*.jar\")\n        })\n\n    }\n\n    ant.withGroovyBuilder {\n        \"taskdef\"(\"resource\" to \"tasks.properties\") {\n            \"classpath\" {\n                \"fileset\"(\"dir\" to \"C:/BuildUtils/encrypt\", \"includes\" to \"encrypt.jar\")    \n            }\n        }\n    }\n\n    val coreClasses = listOf(\"com/ib/core/secure/**/*\", \"com/ib/core/obfuscated/**/*\", \"com/ib/licensemanager/secure/**/*\", \"com/ib/licensemanager/obfuscated/**/*\")\n    val coreResources = listOf(\"**/serverstore\", \"**/creator_private\")\n    val encryptedCoreResources = file(\"$buildDir/tmp_encrypt/core\")\n    val jarMetaFiles = listOf(\"META-INF/*.DSA\", \"META-INF/*.RSA\", \"META-INF/*.SF\")\n\n    val ibCoreJarForRelease = tasks.create&lt;Jar&gt;(\"ibCoreJarForRelease\") {\n        dependsOn(\"compileJava\")\n        group = \"Build\"\n        archiveName = \"IBCore.jar\"\n        description = \"Builds fat runnable jarForRelease for \" + project.name\n        destinationDir = file(\"$buildDir/dist\")\n        from(licenseManager.filter { it.name.endsWith(\"LicenseManager.jar\") }.map { zipTree(it) })\n        from(sourceSets[\"main\"].output)\n        from(sourceSets[\"main\"].java.srcDirs) {\n          exclude(\"**/*.java\")\n        }\n        exclude(coreClasses)\n        exclude(coreResources)\n        exclude(jarMetaFiles)\n        includeEmptyDirs = false\n        manifest {\n            attributes(\"Built-By\" ABC, \"Class-Path\" to \"../Libraries/Core/core.jar\")\n        }\n    }</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>when I run this, I get the following error</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>Task :IBCore:compileJava FAILED\n    D:\\InBetween\\IBCore\\src\\main\\module-info.java:64: error: module not found: commons.io\n            requires commons.io;\n                            ^\n    D:\\InBetween\\IBCore\\src\\main\\module-info.java:69: error: module not found: jackson.mapper.asl\n            requires jackson.mapper.asl;\n                                   ^\n    D:\\InBetween\\IBCore\\src\\main\\module-info.java:73: error: module not found: org.apache.oltu.oauth2.client\n            requires org.apache.oltu.oauth2.client;\n                                           ^\n    D:\\InBetween\\IBCore\\src\\main\\module-info.java:75: error: module not found: jackson.core.asl\n            requires jackson.core.asl;\n                                 ^\n    D:\\InBetween\\IBCore\\src\\main\\module-info.java:76: error: module not found: dom4j\n            requires dom4j;\n                     ^\n    5 errors</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>As you can see in the dependencies, I have added the file tree and included all the jars from lib. it compiles totally fine in eclipse.</p>\n<p>Can anyone tell me why this is happening and how I can fix it?</p>\n"},{"tags":["java","spring-mvc"],"answers":[{"tags":[],"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"down_vote_count":1,"up_vote_count":81,"is_accepted":false,"score":80,"last_activity_date":1421751821,"creation_date":1336135146,"answer_id":10448965,"question_id":10448935,"body_markdown":"You need to name the entity that holds the association to User. For example, \r\n\r\n    ... INNER JOIN ug.user u ...\r\n\r\nThat&#39;s the &quot;path&quot; the error message is complaining about -- path from UserGroup to User entity.\r\n\r\nHibernate relies on declarative JOINs, for which the join condition is declared in the mapping metadata. This is why it is impossible to construct the native SQL query without having the path.","title":"HQL ERROR: Path expected for join","body":"<p>You need to name the entity that holds the association to User. For example, </p>\n\n<pre><code>... INNER JOIN ug.user u ...\n</code></pre>\n\n<p>That's the \"path\" the error message is complaining about -- path from UserGroup to User entity.</p>\n\n<p>Hibernate relies on declarative JOINs, for which the join condition is declared in the mapping metadata. This is why it is impossible to construct the native SQL query without having the path.</p>\n"},{"tags":[],"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"down_vote_count":3,"up_vote_count":148,"is_accepted":true,"score":145,"last_activity_date":1518798744,"creation_date":1336135228,"answer_id":10448991,"question_id":10448935,"body_markdown":"&lt;!-- language: SQL --&gt;\r\n\r\n    select u from UserGroup ug inner join ug.user u \r\n    where ug.group_id = :groupId \r\n    order by u.lastname\r\n\r\nAs a named query:\r\n\r\n&lt;!-- language: Java --&gt;\r\n\r\n    @NamedQuery(\r\n      name = &quot;User.findByGroupId&quot;,\r\n      query =\r\n        &quot;SELECT u FROM UserGroup ug &quot; +\r\n        &quot;INNER JOIN ug.user u WHERE ug.group_id = :groupId ORDER BY u.lastname&quot;\r\n    )\r\n\r\nUse paths in the HQL statement, from one entity to the other. See the [Hibernate documentation on HQL and joins][1] for details.\r\n\r\n\r\n  [1]: http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#queryhql-joins","title":"HQL ERROR: Path expected for join","body":"<pre><code>select u from UserGroup ug inner join ug.user u \nwhere ug.group_id = :groupId \norder by u.lastname\n</code></pre>\n\n<p>As a named query:</p>\n\n<pre><code>@NamedQuery(\n  name = \"User.findByGroupId\",\n  query =\n    \"SELECT u FROM UserGroup ug \" +\n    \"INNER JOIN ug.user u WHERE ug.group_id = :groupId ORDER BY u.lastname\"\n)\n</code></pre>\n\n<p>Use paths in the HQL statement, from one entity to the other. See the <a href=\"http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#queryhql-joins\" rel=\"noreferrer\">Hibernate documentation on HQL and joins</a> for details.</p>\n"},{"tags":[],"owner":{"account_id":10473075,"reputation":39,"user_id":7720408,"display_name":"Domingos Manuel"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1691646650,"creation_date":1631909627,"answer_id":69229011,"question_id":10448935,"body_markdown":"You&#39;ll be better off using where clauses. Hibernate does not accept inner joins for tables where the PK/FK relationship is not there between Entities\r\n\r\ndo \r\n\r\n```sql\r\nSELECT s.first_name, s.surname, sd.telephone_number FROM Student s, StudentDetails sd WHERE s.id = sd.student_id\r\n```\r\n\r\ninstead of\r\n\r\n```sql\r\nSELECT s.first_name, s.surname, sd.telephone_number FROM Student s INNER JOIN StudentDetails sd on s.id = sd.student_id\r\n```\r\n\r\nThe latter will only work if Student&#39;s id (s.id) is referenced as FK on StudentDetails (sd.student_id)) table design / erd","title":"HQL ERROR: Path expected for join","body":"<p>You'll be better off using where clauses. Hibernate does not accept inner joins for tables where the PK/FK relationship is not there between Entities</p>\n<p>do</p>\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT s.first_name, s.surname, sd.telephone_number FROM Student s, StudentDetails sd WHERE s.id = sd.student_id\n</code></pre>\n<p>instead of</p>\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT s.first_name, s.surname, sd.telephone_number FROM Student s INNER JOIN StudentDetails sd on s.id = sd.student_id\n</code></pre>\n<p>The latter will only work if Student's id (s.id) is referenced as FK on StudentDetails (sd.student_id)) table design / erd</p>\n"}],"owner":{"account_id":67541,"reputation":60858,"user_id":197606,"accept_rate":85,"display_name":"Ben"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":189168,"favorite_count":0,"down_vote_count":0,"up_vote_count":115,"accepted_answer_id":10448991,"answer_count":3,"score":115,"last_activity_date":1691646650,"creation_date":1336135028,"question_id":10448935,"body_markdown":"I keep trying variations of this query and can&#39;t seem to make this happen.  I&#39;ve also referenced this post: https://stackoverflow.com/questions/5759707/path-expected-for-join-nhibernate-error and can&#39;t seem to apply the same logic to my query.  My `User` object has a `UserGroup` collection.\r\n\r\nI understand that the query needs to reference entities within the object, but from what I&#39;m seeing I am...\r\n\r\n&lt;!-- language: Java --&gt;\r\n\r\n    @NamedQuery(\r\n      name = &quot;User.findByGroupId&quot;,\r\n      query =\r\n        &quot;SELECT u FROM UserGroup ug &quot; +\r\n        &quot;INNER JOIN User u WHERE ug.group_id = :groupId ORDER BY u.lastname&quot;\r\n    )\r\n","title":"HQL ERROR: Path expected for join","body":"<p>I keep trying variations of this query and can't seem to make this happen.  I've also referenced this post: <a href=\"https://stackoverflow.com/questions/5759707/path-expected-for-join-nhibernate-error\">Path Expected for Join! Nhibernate Error</a> and can't seem to apply the same logic to my query.  My <code>User</code> object has a <code>UserGroup</code> collection.</p>\n\n<p>I understand that the query needs to reference entities within the object, but from what I'm seeing I am...</p>\n\n<pre><code>@NamedQuery(\n  name = \"User.findByGroupId\",\n  query =\n    \"SELECT u FROM UserGroup ug \" +\n    \"INNER JOIN User u WHERE ug.group_id = :groupId ORDER BY u.lastname\"\n)\n</code></pre>\n"},{"tags":["java","hibernate","intellij-idea"],"answers":[{"tags":[],"owner":{"account_id":539,"reputation":19288,"user_id":699,"accept_rate":75,"display_name":"Michael Neale"},"down_vote_count":1,"up_vote_count":21,"is_accepted":true,"score":20,"last_activity_date":1691646407,"creation_date":1265149925,"answer_id":2188263,"question_id":2188186,"body_markdown":"IntelliJ is trying to validate your HQL query inside the string itself. To do this, it needs to be configured to know about your hibernate configuration to ensure that a mapping exists for MyTable (it does at runtime, as you know - as it executes!). \r\n\r\nCheck out the hibernate config section in IntelliJ for your project. \r\n\r\nThere is probably a way of turning it off if it is more hindrance than help. ","title":"Why does Hibernate query have compile error in IntelliJ?","body":"<p>IntelliJ is trying to validate your HQL query inside the string itself. To do this, it needs to be configured to know about your hibernate configuration to ensure that a mapping exists for MyTable (it does at runtime, as you know - as it executes!).</p>\n<p>Check out the hibernate config section in IntelliJ for your project.</p>\n<p>There is probably a way of turning it off if it is more hindrance than help.</p>\n"},{"tags":[],"owner":{"account_id":3728985,"reputation":1053,"user_id":3101995,"display_name":"Bram Luyten"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1392545384,"creation_date":1392545384,"answer_id":21809813,"question_id":2188186,"body_markdown":"In IntelliJ IDEA 13 for Mac OS X I could find this option as\r\n&quot;Query Language Checks&quot; under &quot;JPA Issues&quot;","title":"Why does Hibernate query have compile error in IntelliJ?","body":"<p>In IntelliJ IDEA 13 for Mac OS X I could find this option as\n\"Query Language Checks\" under \"JPA Issues\"</p>\n"},{"tags":[],"owner":{"display_name":"user65839"},"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1396280589,"creation_date":1396280589,"answer_id":22766049,"question_id":2188186,"body_markdown":"Make sure that you have your Facets configured correctly. I was getting errors in my Spring Data JPA @Query annotations of &quot;Can&#39;t resolve symbol&quot; (just within IntelliJ IDEA; the code itself worked fine when I ran it) and I needed to go into Project Structure, Facets and add the JPA facet. (I assume if one is using Hibernate without JPA, then one would just add the Hibernate facet rather than the JPA facet.)","title":"Why does Hibernate query have compile error in IntelliJ?","body":"<p>Make sure that you have your Facets configured correctly. I was getting errors in my Spring Data JPA @Query annotations of \"Can't resolve symbol\" (just within IntelliJ IDEA; the code itself worked fine when I ran it) and I needed to go into Project Structure, Facets and add the JPA facet. (I assume if one is using Hibernate without JPA, then one would just add the Hibernate facet rather than the JPA facet.)</p>\n"},{"tags":[],"owner":{"account_id":305482,"reputation":539,"user_id":615669,"accept_rate":50,"display_name":"tumanov"},"down_vote_count":1,"up_vote_count":31,"is_accepted":false,"score":30,"last_activity_date":1399151767,"creation_date":1399151219,"answer_id":23449839,"question_id":2188186,"body_markdown":"Add a &quot;Hibernate&quot; Facet under &quot;Project Structure&quot;, then for that Facet select the &quot;hibernate.cfg.xml&quot; file for &quot;Hibernate Configuration&quot;. This will let IDEA know about your class to table mapping and will help it recognize those classes in HQL queries.\r\n\r\nIf you don&#39;t use &quot;hibernate.cfg.xml&quot;, for example for Spring you may just use &quot;applicationContext.xml&quot; to initialize your datasource, having Hibernate Facet declared may be enough. ","title":"Why does Hibernate query have compile error in IntelliJ?","body":"<p>Add a \"Hibernate\" Facet under \"Project Structure\", then for that Facet select the \"hibernate.cfg.xml\" file for \"Hibernate Configuration\". This will let IDEA know about your class to table mapping and will help it recognize those classes in HQL queries.</p>\n\n<p>If you don't use \"hibernate.cfg.xml\", for example for Spring you may just use \"applicationContext.xml\" to initialize your datasource, having Hibernate Facet declared may be enough. </p>\n"}],"owner":{"account_id":19971,"reputation":55479,"user_id":47281,"accept_rate":83,"display_name":"Marcus Leon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27215,"favorite_count":0,"down_vote_count":0,"up_vote_count":24,"accepted_answer_id":2188263,"answer_count":4,"score":24,"last_activity_date":1691646407,"creation_date":1265149284,"question_id":2188186,"body_markdown":"I have this Hibernate code: \r\n\r\n    Query q = session.createQuery(&quot;from MyTable where status = :status&quot;);\r\n\r\nIt compiles and works fine..  \r\n\r\nBut in IntelliJ I get this error reported:\r\n\r\n&gt; Can&#39;t resolve expression, Can&#39;t\r\n&gt; resolve symbol &#39;MyTable&#39;\r\n\r\nWhy is IntelliJ complaining??","title":"Why does Hibernate query have compile error in IntelliJ?","body":"<p>I have this Hibernate code: </p>\n\n<pre><code>Query q = session.createQuery(\"from MyTable where status = :status\");\n</code></pre>\n\n<p>It compiles and works fine..  </p>\n\n<p>But in IntelliJ I get this error reported:</p>\n\n<blockquote>\n  <p>Can't resolve expression, Can't\n  resolve symbol 'MyTable'</p>\n</blockquote>\n\n<p>Why is IntelliJ complaining??</p>\n"},{"tags":["java","file","formatter"],"comments":[{"owner":{"account_id":4728704,"reputation":17022,"user_id":3824919,"display_name":"Tom"},"score":2,"creation_date":1430056472,"post_id":29878237,"comment_id":47881030,"body_markdown":"You should recheck your knowledge, because `Scanner(String)` won&#39;t create a file.","body":"You should recheck your knowledge, because <code>Scanner(String)</code> won&#39;t create a file."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1691647770,"post_id":29878237,"comment_id":135520246,"body_markdown":"`RandomAccessFile.setLength()` with a zero length.","body":"<code>RandomAccessFile.setLength()</code> with a zero length."}],"answers":[{"tags":[],"owner":{"account_id":428023,"reputation":15099,"user_id":810077,"accept_rate":83,"display_name":"Chetan Kinger"},"down_vote_count":2,"up_vote_count":9,"is_accepted":false,"score":7,"last_activity_date":1430055791,"creation_date":1430055118,"answer_id":29878289,"question_id":29878237,"body_markdown":"You could delete the file and create it again instead of doing a lot of io. \r\n\r\n    if(file.delete()){\r\n        file.createNewFile();\r\n    }else{\r\n        //throw an exception indicating that the file could not be cleared\r\n    }\r\n\r\nAlternately, you could just overwrite the contents of the file in one go as explained in the other answers :\r\n\r\n    PrintWriter writer = new PrintWriter(file);\r\n    writer.print(&quot;&quot;);\r\n    writer.close();\r\n\r\nAlso, you are using the constructor from `Scanner` that takes a `String` argument. This constructor will not read from a file but use the `String` argument as the text to be scanned. You should first created a file handle and then pass it to the `Scanner` constructor :\r\n\r\n    File file = new File(&quot;jibberish.txt&quot;);\r\n    Scanner scanner = new Scanner(file);","title":"Java - How to Clear a text file without deleting it?","body":"<p>You could delete the file and create it again instead of doing a lot of io. </p>\n\n<pre><code>if(file.delete()){\n    file.createNewFile();\n}else{\n    //throw an exception indicating that the file could not be cleared\n}\n</code></pre>\n\n<p>Alternately, you could just overwrite the contents of the file in one go as explained in the other answers :</p>\n\n<pre><code>PrintWriter writer = new PrintWriter(file);\nwriter.print(\"\");\nwriter.close();\n</code></pre>\n\n<p>Also, you are using the constructor from <code>Scanner</code> that takes a <code>String</code> argument. This constructor will not read from a file but use the <code>String</code> argument as the text to be scanned. You should first created a file handle and then pass it to the <code>Scanner</code> constructor :</p>\n\n<pre><code>File file = new File(\"jibberish.txt\");\nScanner scanner = new Scanner(file);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3630760,"reputation":3906,"user_id":3027001,"accept_rate":58,"display_name":"Ankur Anand"},"down_vote_count":1,"up_vote_count":7,"is_accepted":true,"score":6,"last_activity_date":1430064360,"creation_date":1430055364,"answer_id":29878333,"question_id":29878237,"body_markdown":"If you want to clear the file without deleting may be you can workaround this \r\n\r\n    public static void clearTheFile() {\r\n            FileWriter fwOb = new FileWriter(&quot;FileName&quot;, false); \r\n            PrintWriter pwOb = new PrintWriter(fwOb, false);\r\n            pwOb.flush();\r\n            pwOb.close();\r\n            fwOb.close();\r\n        }\r\n\r\nEdit: It throws exception so need to catch the exceptions","title":"Java - How to Clear a text file without deleting it?","body":"<p>If you want to clear the file without deleting may be you can workaround this </p>\n\n<pre><code>public static void clearTheFile() {\n        FileWriter fwOb = new FileWriter(\"FileName\", false); \n        PrintWriter pwOb = new PrintWriter(fwOb, false);\n        pwOb.flush();\n        pwOb.close();\n        fwOb.close();\n    }\n</code></pre>\n\n<p>Edit: It throws exception so need to catch the exceptions</p>\n"},{"tags":[],"owner":{"account_id":1260595,"reputation":7659,"user_id":1218985,"display_name":"1218985"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1430055437,"creation_date":1430055437,"answer_id":29878343,"question_id":29878237,"body_markdown":"You can just print an empty string into the file.\r\n\r\n    PrintWriter writer = new PrintWriter(file);\r\n    writer.print(&quot;&quot;);\r\n    writer.close();","title":"Java - How to Clear a text file without deleting it?","body":"<p>You can just print an empty string into the file.</p>\n\n<pre><code>PrintWriter writer = new PrintWriter(file);\nwriter.print(\"\");\nwriter.close();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5967997,"reputation":3627,"user_id":4691230,"accept_rate":40,"display_name":"The Coder"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1487272257,"creation_date":1487272257,"answer_id":42282671,"question_id":29878237,"body_markdown":"Best I could think of is :\r\n\r\n    Files.newBufferedWriter(pathObject , StandardOpenOption.TRUNCATE_EXISTING);\r\n\r\nand\r\n\r\n    Files.newInputStream(pathObject , StandardOpenOption.TRUNCATE_EXISTING);\r\n\r\nIn both the cases if the file specified in pathObject is writable, then that file will be truncated. No need to call write() function. Above code is sufficient to empty/truncate a file.This is new in java 8.\r\n\r\nHope it Helps","title":"Java - How to Clear a text file without deleting it?","body":"<p>Best I could think of is :</p>\n\n<pre><code>Files.newBufferedWriter(pathObject , StandardOpenOption.TRUNCATE_EXISTING);\n</code></pre>\n\n<p>and</p>\n\n<pre><code>Files.newInputStream(pathObject , StandardOpenOption.TRUNCATE_EXISTING);\n</code></pre>\n\n<p>In both the cases if the file specified in pathObject is writable, then that file will be truncated. No need to call write() function. Above code is sufficient to empty/truncate a file.This is new in java 8.</p>\n\n<p>Hope it Helps</p>\n"},{"tags":[],"owner":{"account_id":19418522,"reputation":91,"user_id":14201453,"display_name":"StreamsGit"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1599765169,"creation_date":1599765169,"answer_id":63836281,"question_id":29878237,"body_markdown":"type \r\n\r\n    new PrintWriter(PATH_FILE).close();\r\n","title":"Java - How to Clear a text file without deleting it?","body":"<p>type</p>\n<pre><code>new PrintWriter(PATH_FILE).close();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7499374,"reputation":363,"user_id":5698386,"display_name":"Mohamed Aymen Charrada"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1662104768,"creation_date":1662104768,"answer_id":73579330,"question_id":29878237,"body_markdown":"Better to use this:\r\n\r\n    \tpublic static void clear(String filename) throws IOException {\r\n        FileWriter fwOb = new FileWriter(filename, false); \r\n        PrintWriter pwOb = new PrintWriter(fwOb, false);\r\n        pwOb.flush();\r\n        pwOb.close();\r\n        fwOb.close();\r\n    }","title":"Java - How to Clear a text file without deleting it?","body":"<p>Better to use this:</p>\n<pre><code>    public static void clear(String filename) throws IOException {\n    FileWriter fwOb = new FileWriter(filename, false); \n    PrintWriter pwOb = new PrintWriter(fwOb, false);\n    pwOb.flush();\n    pwOb.close();\n    fwOb.close();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29181020,"reputation":1,"user_id":22355197,"display_name":"Brennen Le"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1691646399,"creation_date":1691457366,"answer_id":76855978,"question_id":29878237,"body_markdown":"I had the same problem. Using class `FileWriter` worked for me.\r\n\r\n    import java.io.File;\r\n    import java.io.IOException; \r\n\r\n    FileWriter myWriter = new FileWriter(&quot;src\\\\LoginInformationList.txt&quot;);\r\n    ArrayList&lt;String&gt; loginInfo = LInfo.passLoginInformation();\r\n    for (String line: loginInfo){\r\n        myWriter.write(line);\r\n    }\r\n    myWriter.close();\r\nThe above cleared the text file and wrote my login information.\r\n\r\nw3schools guide: https://www.w3schools.com/java/java_files_create.asp","title":"Java - How to Clear a text file without deleting it?","body":"<p>I had the same problem. Using class <code>FileWriter</code> worked for me.</p>\n<pre><code>import java.io.File;\nimport java.io.IOException; \n\nFileWriter myWriter = new FileWriter(&quot;src\\\\LoginInformationList.txt&quot;);\nArrayList&lt;String&gt; loginInfo = LInfo.passLoginInformation();\nfor (String line: loginInfo){\n    myWriter.write(line);\n}\nmyWriter.close();\n</code></pre>\n<p>The above cleared the text file and wrote my login information.</p>\n<p>w3schools guide: <a href=\"https://www.w3schools.com/java/java_files_create.asp\" rel=\"nofollow noreferrer\">https://www.w3schools.com/java/java_files_create.asp</a></p>\n"}],"owner":{"account_id":4235428,"reputation":321,"user_id":3466705,"accept_rate":87,"display_name":"Kemosabe"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":80272,"favorite_count":0,"down_vote_count":1,"up_vote_count":7,"accepted_answer_id":29878333,"answer_count":7,"score":6,"last_activity_date":1691646399,"creation_date":1430054842,"question_id":29878237,"body_markdown":"I am wondering what the best way to clear a file is. I know that java automatically creates a file with \r\n\r\n    f = new Formatter(&quot;jibberish.txt&quot;);  \r\n    s = new Scanner(&quot;jibberish.txt&quot;);\r\n\r\nif none already exists. But what if one exists and I want to clear it every time I run the program? That is what I am wondering: to say it again how do I clear a file that already exists to just be blank? \r\nHere is what I was thinking: \r\n\r\n\tpublic void clearFile(){\r\n\t\t//go through and do this every time in order to delete previous crap\r\n\t\twhile(s.hasNext()){\r\n\t\t\tf.format(&quot; &quot;);\r\n\t\t}\r\n\t} \r\n ","title":"Java - How to Clear a text file without deleting it?","body":"<p>I am wondering what the best way to clear a file is. I know that java automatically creates a file with </p>\n\n<pre><code>f = new Formatter(\"jibberish.txt\");  \ns = new Scanner(\"jibberish.txt\");\n</code></pre>\n\n<p>if none already exists. But what if one exists and I want to clear it every time I run the program? That is what I am wondering: to say it again how do I clear a file that already exists to just be blank? \nHere is what I was thinking: </p>\n\n<pre><code>public void clearFile(){\n    //go through and do this every time in order to delete previous crap\n    while(s.hasNext()){\n        f.format(\" \");\n    }\n} \n</code></pre>\n"},{"tags":["java","hibernate","intellij-idea"],"answers":[{"tags":[],"owner":{"account_id":3511027,"reputation":2596,"user_id":2935333,"accept_rate":29,"display_name":"Rocherlee"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1476076248,"creation_date":1476076248,"answer_id":39951615,"question_id":39948392,"body_markdown":"You can disable an inspection for highlighted issue in the editor\r\n\r\n 1. Set the caret at the word `from`\r\n 2. Click the bulb icon or press Alt+Enter to reveal the inspection alert and suggestion list.\r\n 3. **Hover** to the inspection to be disabled, then **click** right arrow button or just press the right arrow key.\r\n 4. On the submenu, click Disable &quot;inspection name&quot;\r\n\r\n[![enter image description here][1]][1]\r\n\r\nRefer to [IntelliJ Doc][2] for another ways\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/TgWqM.png\r\n  [2]: https://www.jetbrains.com/help/idea/2016.2/disabling-and-enabling-inspections.html","title":"Intellij Idea 14 + HIbernate query","body":"<p>You can disable an inspection for highlighted issue in the editor</p>\n\n<ol>\n<li>Set the caret at the word <code>from</code></li>\n<li>Click the bulb icon or press Alt+Enter to reveal the inspection alert and suggestion list.</li>\n<li><strong>Hover</strong> to the inspection to be disabled, then <strong>click</strong> right arrow button or just press the right arrow key.</li>\n<li>On the submenu, click Disable \"inspection name\"</li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/TgWqM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TgWqM.png\" alt=\"enter image description here\"></a></p>\n\n<p>Refer to <a href=\"https://www.jetbrains.com/help/idea/2016.2/disabling-and-enabling-inspections.html\" rel=\"nofollow noreferrer\">IntelliJ Doc</a> for another ways</p>\n"},{"tags":[],"owner":{"account_id":1529832,"reputation":7281,"user_id":1427295,"accept_rate":83,"display_name":"Brett Y"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1691646295,"creation_date":1527136712,"answer_id":50501067,"question_id":39948392,"body_markdown":"JetBrains / IntelliJ provides coding assistance, such as syntax highlighting, in string literals via &quot;Language Injection&quot;.\r\n\r\nYou can set the language to inject via `Settings &gt; Editor &gt; Language Injections`.\r\n\r\nIn your case, you need to set the language for `org.hibernate.Session` to Hibernate QL / HQL. I had to do the same thing for `javax.persistance.EntityManager`.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/fvz6I.png","title":"Intellij Idea 14 + HIbernate query","body":"<p>JetBrains / IntelliJ provides coding assistance, such as syntax highlighting, in string literals via &quot;Language Injection&quot;.</p>\n<p>You can set the language to inject via <code>Settings &gt; Editor &gt; Language Injections</code>.</p>\n<p>In your case, you need to set the language for <code>org.hibernate.Session</code> to Hibernate QL / HQL. I had to do the same thing for <code>javax.persistance.EntityManager</code>.</p>\n<p><a href=\"https://i.stack.imgur.com/fvz6I.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fvz6I.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":1751061,"reputation":478,"user_id":1600140,"display_name":"vk23"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1195,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":39951615,"answer_count":2,"score":1,"last_activity_date":1691646295,"creation_date":1476046160,"question_id":39948392,"body_markdown":"Whenever I write hibernate query such as this:&lt;br&gt;\r\n&lt;code&gt;session.createQuery(&quot;from Table&quot;)&lt;/code&gt;&lt;br&gt;\r\nIntellijIdea 14 marks the word &quot;from&quot; as an error and show this description for it: &quot;&#39;from&#39; unexpected&quot;. Although project compiles successfully (maven) and everything works fine in production.\r\n&lt;br&gt;\r\nSo my question is: **How to prevent IDE from fail-marking that kind of code?**","title":"Intellij Idea 14 + HIbernate query","body":"<p>Whenever I write hibernate query such as this:<br>\n<code>session.createQuery(\"from Table\")</code><br>\nIntellijIdea 14 marks the word \"from\" as an error and show this description for it: \"'from' unexpected\". Although project compiles successfully (maven) and everything works fine in production.\n<br>\nSo my question is: <strong>How to prevent IDE from fail-marking that kind of code?</strong></p>\n"},{"tags":["java","spring-boot","websocket","spring-websocket","spring-cloud-gateway"],"owner":{"account_id":23010353,"reputation":5,"user_id":17132957,"display_name":"slt"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691645645,"creation_date":1691645645,"question_id":76872885,"body_markdown":"I&#39;m using Spring Cloud Gateway in Microservice system with Eureka as service discovery and a business service using STOMP websocket with SockJS implemented.\r\nWhen I connect the STOMP client (which uses ReactJS) directly with the business service, everything works fine. However, if I do connect via Spring Cloud Gateway, the websocket connection closes immediately after sending first message, but after I refresh the page everything works fine.\r\nThis is my gateway route configuration:\r\n\r\n         - id: chat-service\r\n          uri: lb://chat-service\r\n          predicates:\r\n            - Path=/chat/**\r\n          filters:\r\n            - name: CircuitBreaker\r\n              args:\r\n                name: chat-service\r\n                fallbackUri: forward:/message-fallback\r\n            - RewritePath=/chat/(?&lt;path&gt;.*), /$\\{path}\r\n        - id: chat-service-sockjs\r\n          uri: http://chat-service\r\n          predicates:\r\n            - Path=/websocket/info/**\r\n        - id: chat-service-websocket\r\n          uri: lb:ws://chat-service\r\n          predicates:\r\n            - Path=/chat/**\r\nMy MessageBrokerConfig\r\n\r\n    @Configuration\r\n    @EnableWebSocketMessageBroker\r\n    public class WebSocketMessageBrokerConfig implements WebSocketMessageBrokerConfigurer {\r\n\r\n        private final TaskScheduler taskScheduler;\r\n\r\n        public WebSocketMessageBrokerConfig(@Lazy TaskScheduler taskScheduler) {\r\n            this.taskScheduler = taskScheduler;\r\n        }\r\n\r\n        @Override\r\n        public void configureMessageBroker(MessageBrokerRegistry registry) {\r\n            registry.enableSimpleBroker(&quot;/conversation&quot;)\r\n                    .setHeartbeatValue(new long[]{1000, 1000})\r\n                    .setTaskScheduler(taskScheduler);\r\n            registry.setApplicationDestinationPrefixes(&quot;/chat&quot;);\r\n        }\r\n\r\n        @Override\r\n        public void registerStompEndpoints(StompEndpointRegistry registry) {\r\n            registry.addEndpoint(&quot;/websocket&quot;)\r\n                    .setAllowedOriginPatterns(&quot;*&quot;)\r\n                    .withSockJS();\r\n        }\r\n    }\r\nMy Websocket controller\r\n\r\n    @Slf4j\r\n    @Controller\r\n    @RequiredArgsConstructor\r\n    @CrossOrigin(origins = &quot;*&quot;, allowedHeaders = &quot;*&quot;)\r\n    public class WsConversationController \r\n\r\n        @MessageMapping(&quot;/startConversation/{id}&quot;)\r\n        @SendTo(&quot;/conversation/{id}&quot;)\r\n        public String startConversation(@DestinationVariable String id) {\r\n            return &quot;Hello&quot;;\r\n        }\r\n\r\n        @MessageMapping(&quot;/sendMessage/{id}&quot;)\r\n        @SendTo(&quot;/conversation/{id}&quot;)\r\n        public String sendMessage(@DestinationVariable String id) {\r\n            return &quot;Received&quot;;\r\n        }\r\n\r\n        @MessageMapping(&quot;/stopConversation/{id}&quot;)\r\n        @SendTo(&quot;/conversation/{id}&quot;)\r\n        public String stopConversation(@DestinationVariable String id) {\r\n            return &quot;Stopped&quot;;\r\n        }\r\n    }\r\nMy ReactJS app\r\n\r\n    const ChatBoxPanel = () =&gt; {\r\n      const [state, setState] = useState&lt;ChatState&gt;({\r\n        stompClient: null,\r\n        id: &#39;&#39;,\r\n      })\r\n\r\n      const initWs = () =&gt; {\r\n        const initStompClient = () =&gt; {\r\n          const stompClient = Stomp.over(() =&gt; new SockJS(&#39;http://localhost:8088/chat/websocket&#39;)) // 8088 is gateway&#39;s port\r\n          const id = uuidv4()\r\n\r\n          const onConnected = () =&gt; {\r\n\r\n            stompClient.publish({\r\n              destination: `/chat/startConversation/${id}`,\r\n              body: &#39;Start&#39;,\r\n            })\r\n\r\n            stompClient.subscribe(&#39;/conversation/&#39; + id, (message) =&gt; {\r\n              // do something when receive message\r\n            })\r\n          }\r\n\r\n          const onError = (error) =&gt; {\r\n            console.log(&#39;error&#39;, error)\r\n          }\r\n\r\n          stompClient.connect({}, onConnected, onError)\r\n\r\n          setState({\r\n            ...state,\r\n            id,\r\n            stompClient,\r\n          })\r\n        }\r\n\r\n        initStompClient()\r\n      }\r\n\r\n      const sendMessage = (message: string) =&gt; {\r\n        if (state.stompClient) {\r\n          state.stompClient.publish({\r\n            destination: `/chat/sendMessage/${state.id}`,\r\n            body: message,\r\n          })\r\n        }\r\n      }\r\n\r\n      const closeWs = () =&gt; {\r\n        if (state.stompClient) {\r\n          state.stompClient.publish({\r\n            destination: `/chat/stopConversation/${state.id}`,\r\n          })\r\n          state.stompClient.disconnect(() =&gt; setState({ ...state, stompClient: null }))\r\n        }\r\n      }\r\n\r\n      useEffect(() =&gt; {\r\n        initWs()\r\n        return closeWs()\r\n      }, [])\r\n\r\n      return (\r\n        &lt;ChatPanel\r\n          key={&#39;chat-panel&#39;}\r\n          onSend={sendMessage}\r\n          onClose={closeWs}\r\n        /&gt;\r\n      )\r\n    }\r\nBrowser&#39;s console log on the first load\r\n[console log when error][1]\r\n\r\nBrowser&#39;s console log after refresh\r\n[console log when no error][2]\r\n\r\nPlease help\r\n\r\n  [1]: https://i.stack.imgur.com/WeclQ.png\r\n  [2]: https://i.stack.imgur.com/OL0zY.png","title":"STOMP Websocket connection via Spring Cloud Gateway suddenly closes after sending first message","body":"<p>I'm using Spring Cloud Gateway in Microservice system with Eureka as service discovery and a business service using STOMP websocket with SockJS implemented.\nWhen I connect the STOMP client (which uses ReactJS) directly with the business service, everything works fine. However, if I do connect via Spring Cloud Gateway, the websocket connection closes immediately after sending first message, but after I refresh the page everything works fine.\nThis is my gateway route configuration:</p>\n<pre><code>     - id: chat-service\n      uri: lb://chat-service\n      predicates:\n        - Path=/chat/**\n      filters:\n        - name: CircuitBreaker\n          args:\n            name: chat-service\n            fallbackUri: forward:/message-fallback\n        - RewritePath=/chat/(?&lt;path&gt;.*), /$\\{path}\n    - id: chat-service-sockjs\n      uri: http://chat-service\n      predicates:\n        - Path=/websocket/info/**\n    - id: chat-service-websocket\n      uri: lb:ws://chat-service\n      predicates:\n        - Path=/chat/**\n</code></pre>\n<p>My MessageBrokerConfig</p>\n<pre><code>@Configuration\n@EnableWebSocketMessageBroker\npublic class WebSocketMessageBrokerConfig implements WebSocketMessageBrokerConfigurer {\n\n    private final TaskScheduler taskScheduler;\n\n    public WebSocketMessageBrokerConfig(@Lazy TaskScheduler taskScheduler) {\n        this.taskScheduler = taskScheduler;\n    }\n\n    @Override\n    public void configureMessageBroker(MessageBrokerRegistry registry) {\n        registry.enableSimpleBroker(&quot;/conversation&quot;)\n                .setHeartbeatValue(new long[]{1000, 1000})\n                .setTaskScheduler(taskScheduler);\n        registry.setApplicationDestinationPrefixes(&quot;/chat&quot;);\n    }\n\n    @Override\n    public void registerStompEndpoints(StompEndpointRegistry registry) {\n        registry.addEndpoint(&quot;/websocket&quot;)\n                .setAllowedOriginPatterns(&quot;*&quot;)\n                .withSockJS();\n    }\n}\n</code></pre>\n<p>My Websocket controller</p>\n<pre><code>@Slf4j\n@Controller\n@RequiredArgsConstructor\n@CrossOrigin(origins = &quot;*&quot;, allowedHeaders = &quot;*&quot;)\npublic class WsConversationController \n\n    @MessageMapping(&quot;/startConversation/{id}&quot;)\n    @SendTo(&quot;/conversation/{id}&quot;)\n    public String startConversation(@DestinationVariable String id) {\n        return &quot;Hello&quot;;\n    }\n\n    @MessageMapping(&quot;/sendMessage/{id}&quot;)\n    @SendTo(&quot;/conversation/{id}&quot;)\n    public String sendMessage(@DestinationVariable String id) {\n        return &quot;Received&quot;;\n    }\n\n    @MessageMapping(&quot;/stopConversation/{id}&quot;)\n    @SendTo(&quot;/conversation/{id}&quot;)\n    public String stopConversation(@DestinationVariable String id) {\n        return &quot;Stopped&quot;;\n    }\n}\n</code></pre>\n<p>My ReactJS app</p>\n<pre><code>const ChatBoxPanel = () =&gt; {\n  const [state, setState] = useState&lt;ChatState&gt;({\n    stompClient: null,\n    id: '',\n  })\n\n  const initWs = () =&gt; {\n    const initStompClient = () =&gt; {\n      const stompClient = Stomp.over(() =&gt; new SockJS('http://localhost:8088/chat/websocket')) // 8088 is gateway's port\n      const id = uuidv4()\n\n      const onConnected = () =&gt; {\n\n        stompClient.publish({\n          destination: `/chat/startConversation/${id}`,\n          body: 'Start',\n        })\n\n        stompClient.subscribe('/conversation/' + id, (message) =&gt; {\n          // do something when receive message\n        })\n      }\n\n      const onError = (error) =&gt; {\n        console.log('error', error)\n      }\n\n      stompClient.connect({}, onConnected, onError)\n\n      setState({\n        ...state,\n        id,\n        stompClient,\n      })\n    }\n\n    initStompClient()\n  }\n\n  const sendMessage = (message: string) =&gt; {\n    if (state.stompClient) {\n      state.stompClient.publish({\n        destination: `/chat/sendMessage/${state.id}`,\n        body: message,\n      })\n    }\n  }\n\n  const closeWs = () =&gt; {\n    if (state.stompClient) {\n      state.stompClient.publish({\n        destination: `/chat/stopConversation/${state.id}`,\n      })\n      state.stompClient.disconnect(() =&gt; setState({ ...state, stompClient: null }))\n    }\n  }\n\n  useEffect(() =&gt; {\n    initWs()\n    return closeWs()\n  }, [])\n\n  return (\n    &lt;ChatPanel\n      key={'chat-panel'}\n      onSend={sendMessage}\n      onClose={closeWs}\n    /&gt;\n  )\n}\n</code></pre>\n<p>Browser's console log on the first load\n<a href=\"https://i.stack.imgur.com/WeclQ.png\" rel=\"nofollow noreferrer\">console log when error</a></p>\n<p>Browser's console log after refresh\n<a href=\"https://i.stack.imgur.com/OL0zY.png\" rel=\"nofollow noreferrer\">console log when no error</a></p>\n<p>Please help</p>\n"},{"tags":["java","android","android-studio","android-gradle-plugin"],"comments":[{"owner":{"account_id":13727895,"reputation":356,"user_id":9906156,"display_name":"Openwell"},"score":9,"creation_date":1544373064,"post_id":53648319,"comment_id":94244035,"body_markdown":"I found the source of the problem. I noticed that the andriod.jar file in C:\\Users\\**\\AppData\\Local\\Android\\Sdk\\platforms\\android-28 was missing, the file was 0kb. which shouldn&#39;t be so. So I reinstalled the Android SDK platform and sources by uninstalling it from SDK Manager and installed it back. then the problem was solved.","body":"I found the source of the problem. I noticed that the andriod.jar file in C:\\Users**\\AppData\\Local\\Android\\Sdk\\platforms\\android-28 was missing, the file was 0kb. which shouldn&#39;t be so. So I reinstalled the Android SDK platform and sources by uninstalling it from SDK Manager and installed it back. then the problem was solved."}],"answers":[{"tags":[],"owner":{"account_id":11153366,"reputation":407,"user_id":8185831,"display_name":"Kevin Yuan"},"down_vote_count":0,"up_vote_count":28,"is_accepted":false,"score":28,"last_activity_date":1555469476,"creation_date":1555469476,"answer_id":55719196,"question_id":53648319,"body_markdown":"@Openwell  thanks  a  lot.   you  save my  day!\r\n\r\nI found the source of the problem. I noticed that the andriod.jar file in C:\\Users**\\AppData\\Local\\Android\\Sdk\\platforms\\android-28 was missing, the file was 0kb. which shouldn&#39;t be so. So I reinstalled the Android SDK platform and sources by uninstalling it from SDK Manager and installed it back. then the problem was solved. ","title":"Could not resolve all files for configuration &#39;:app:androidApis&#39;","body":"<p>@Openwell  thanks  a  lot.   you  save my  day!</p>\n\n<p>I found the source of the problem. I noticed that the andriod.jar file in C:\\Users**\\AppData\\Local\\Android\\Sdk\\platforms\\android-28 was missing, the file was 0kb. which shouldn't be so. So I reinstalled the Android SDK platform and sources by uninstalling it from SDK Manager and installed it back. then the problem was solved. </p>\n"},{"tags":[],"owner":{"account_id":137331,"reputation":10559,"user_id":341443,"accept_rate":76,"display_name":"praveenb"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1602773698,"creation_date":1602773698,"answer_id":64374327,"question_id":53648319,"body_markdown":"After upgrading AndroidStudio version to 4.1, also upgraded Android Gradle plugin to 4.1.0.\r\n\r\nBut in Project root folder build.gradle file, In dependencies, it has this below gradle classpath for com.google.gms:google-services version as 4.3.0. Caused the issue.\r\n\r\n   \r\n\r\n    dependencies {\r\n            classpath &#39;com.android.tools.build:gradle:4.1.0&#39;\r\n            classpath &#39;com.google.gms:google-services:4.3.0&#39;\r\n        }\r\n\r\n\r\nafter upgrading com.google.gms:google-services to latest version, and Sync project.\r\n\r\n    dependencies {\r\n                classpath &#39;com.android.tools.build:gradle:4.1.0&#39;\r\n                classpath &#39;com.google.gms:google-services:4.3.4&#39;\r\n            }\r\n\r\nSolved the issue.\r\n","title":"Could not resolve all files for configuration &#39;:app:androidApis&#39;","body":"<p>After upgrading AndroidStudio version to 4.1, also upgraded Android Gradle plugin to 4.1.0.</p>\n<p>But in Project root folder build.gradle file, In dependencies, it has this below gradle classpath for com.google.gms:google-services version as 4.3.0. Caused the issue.</p>\n<pre><code>dependencies {\n        classpath 'com.android.tools.build:gradle:4.1.0'\n        classpath 'com.google.gms:google-services:4.3.0'\n    }\n</code></pre>\n<p>after upgrading com.google.gms:google-services to latest version, and Sync project.</p>\n<pre><code>dependencies {\n            classpath 'com.android.tools.build:gradle:4.1.0'\n            classpath 'com.google.gms:google-services:4.3.4'\n        }\n</code></pre>\n<p>Solved the issue.</p>\n"},{"tags":[],"owner":{"account_id":16720820,"reputation":51,"user_id":12085796,"display_name":"Bharath"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1622667100,"creation_date":1622667100,"answer_id":67812426,"question_id":53648319,"body_markdown":"I just changed the compiled version to API level to which I have downloaded in the SDK Manager. For me in File=&gt;Project Structure, the compiled version is set to 29 which I haven&#39;t downloaded SDK. So I changed it to 28 which I have downloaded.Then it worked.","title":"Could not resolve all files for configuration &#39;:app:androidApis&#39;","body":"<p>I just changed the compiled version to API level to which I have downloaded in the SDK Manager. For me in File=&gt;Project Structure, the compiled version is set to 29 which I haven't downloaded SDK. So I changed it to 28 which I have downloaded.Then it worked.</p>\n"},{"tags":[],"owner":{"account_id":21102390,"reputation":81,"user_id":15512039,"display_name":"Krishnansh Singh Tomar"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1685611811,"creation_date":1685611811,"answer_id":76380480,"question_id":53648319,"body_markdown":"for mac users go to Users/***/Library/Android/sdk/platforms and then delete all the platform, and run the application. This works for me.","title":"Could not resolve all files for configuration &#39;:app:androidApis&#39;","body":"<p>for mac users go to Users/***/Library/Android/sdk/platforms and then delete all the platform, and run the application. This works for me.</p>\n"}],"owner":{"account_id":13727895,"reputation":356,"user_id":9906156,"display_name":"Openwell"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30861,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"answer_count":4,"score":16,"last_activity_date":1691645197,"creation_date":1544088902,"question_id":53648319,"body_markdown":"&gt;CONFIGURE SUCCESSFUL in 1s\r\n\r\n&gt;Calling mockable JAR artifact transform to create file: C:\\Users\\..\\.gradle\\caches\\transforms-1\\files-1.1\\android.jar\\637e2bccbff6bd0f7a7583f7e9d4551b\\android.jar with input C:\\Users\\...\\AppData\\Local\\Android\\Sdk\\platforms\\android-28\\android.jar\r\n\r\n&gt;Gradle sync failed: Could not resolve all files for configuration &#39;:app:androidApis&#39;.\r\nFailed to transform file &#39;android.jar&#39; to match attributes {artifactType=android-mockable-jar, returnDefaultValues=false} using transform MockableJarTransform\r\n\r\n&gt;Cannot create mockable android.jar\r\nzip file is empty\r\n\r\nI am new to android studio. I have tried all the answers I could get none worked.\r\nI changed my gradle plugin to 3.1.1 and lower is still the same thing.\r\nI have clean build and invalidate cache/reset.\r\n\r\nDo I have to install a lower android studio. Why is this happening for a new project?\r\nAndriod studio 3.2.1","title":"Could not resolve all files for configuration &#39;:app:androidApis&#39;","body":"<blockquote>\n<p>CONFIGURE SUCCESSFUL in 1s</p>\n</blockquote>\n<blockquote>\n<p>Calling mockable JAR artifact transform to create file: C:\\Users...gradle\\caches\\transforms-1\\files-1.1\\android.jar\\637e2bccbff6bd0f7a7583f7e9d4551b\\android.jar with input C:\\Users...\\AppData\\Local\\Android\\Sdk\\platforms\\android-28\\android.jar</p>\n</blockquote>\n<blockquote>\n<p>Gradle sync failed: Could not resolve all files for configuration ':app:androidApis'.\nFailed to transform file 'android.jar' to match attributes {artifactType=android-mockable-jar, returnDefaultValues=false} using transform MockableJarTransform</p>\n</blockquote>\n<blockquote>\n<p>Cannot create mockable android.jar\nzip file is empty</p>\n</blockquote>\n<p>I am new to android studio. I have tried all the answers I could get none worked.\nI changed my gradle plugin to 3.1.1 and lower is still the same thing.\nI have clean build and invalidate cache/reset.</p>\n<p>Do I have to install a lower android studio. Why is this happening for a new project?\nAndriod studio 3.2.1</p>\n"},{"tags":["java","elasticsearch","elasticsearch-painless"],"comments":[{"owner":{"account_id":5843921,"reputation":210855,"user_id":4604579,"display_name":"Val"},"score":0,"creation_date":1691647428,"post_id":76872821,"comment_id":135520185,"body_markdown":"Can you provide some more insights as to [the context](https://www.elastic.co/guide/en/elasticsearch/painless/8.9/painless-contexts.html) in which this script needs to be executed?","body":"Can you provide some more insights as to <a href=\"https://www.elastic.co/guide/en/elasticsearch/painless/8.9/painless-contexts.html\" rel=\"nofollow noreferrer\">the context</a> in which this script needs to be executed?"},{"owner":{"account_id":463980,"reputation":6162,"user_id":867206,"accept_rate":14,"display_name":"Ajay Takur"},"score":0,"creation_date":1691666189,"post_id":76872821,"comment_id":135523643,"body_markdown":"for Update by query","body":"for Update by query"},{"owner":{"account_id":5843921,"reputation":210855,"user_id":4604579,"display_name":"Val"},"score":0,"creation_date":1691666974,"post_id":76872821,"comment_id":135523802,"body_markdown":"Then the same syntax should work","body":"Then the same syntax should work"}],"owner":{"account_id":463980,"reputation":6162,"user_id":867206,"accept_rate":14,"display_name":"Ajay Takur"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691644678,"creation_date":1691644678,"question_id":76872821,"body_markdown":"The syntax below mentioned is written in Groovy at the time of 2.3 elastic and now the same syntax has to be migrated to painless 8.9 elastic. Could someone help me with the same in the painless script?\r\n\r\n    ctx._source.bid=bid;\r\n    ctx._source.aid=aid;\r\n    ctx._source.aname=aname;","title":"Migrating groovy syntax to painless syntax - Elastic search 8.9","body":"<p>The syntax below mentioned is written in Groovy at the time of 2.3 elastic and now the same syntax has to be migrated to painless 8.9 elastic. Could someone help me with the same in the painless script?</p>\n<pre><code>ctx._source.bid=bid;\nctx._source.aid=aid;\nctx._source.aname=aname;\n</code></pre>\n"},{"tags":["java","jdbc","mockito","powermockito"],"owner":{"account_id":29191759,"reputation":11,"user_id":22363749,"display_name":"Vikas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691644369,"creation_date":1691584954,"question_id":76867907,"body_markdown":"\r\n```\r\npublic class Manager {\r\n\t\r\n\tpublic void testConnection() throws SQLException {\r\n\t\tConnection c = DriverManager.getConnection(&quot;&quot;, &quot;&quot;, &quot;&quot;);\r\n\t\tc.prepareStatement(&quot;&quot;);\r\n\t}\r\n}\r\n\r\nimport static org.junit.Assert.assertEquals;\r\nimport static org.mockito.ArgumentMatchers.anyInt;\r\nimport static org.mockito.ArgumentMatchers.anyString;\r\nimport static org.mockito.Mockito.when;\r\n\r\nimport java.sql.Connection;\r\nimport java.sql.DriverManager;\r\nimport java.sql.PreparedStatement;\r\nimport java.sql.SQLException;\r\n\r\nimport org.junit.Before;\r\nimport org.junit.Test;\r\nimport org.junit.runner.RunWith;\r\nimport org.mockito.Mock;\r\nimport org.mockito.Mockito;\r\nimport org.mockito.MockitoAnnotations;\r\nimport org.powermock.api.mockito.PowerMockito;\r\nimport org.powermock.core.classloader.annotations.PrepareForTest;\r\nimport org.powermock.modules.junit4.PowerMockRunner;\r\n\r\n@RunWith(PowerMockRunner.class)\r\n@PrepareForTest({DriverManager.class})\r\npublic class JUnit4PowerMockMockitoStaticExample2 {\r\n\r\n\t@Mock\r\n\tConnection c;\r\n\r\n\t@Mock\r\n\tPreparedStatement ps;\r\n\r\n\t@Before\r\n\tpublic void setUp() throws SQLException {\r\n\t\tMockitoAnnotations.initMocks(this);\r\n\t\tPowerMockito.mockStatic(DriverManager.class);\r\n\t\twhen(DriverManager.getConnection(anyString(), anyString(), anyString())).thenReturn(c);\r\n\t\twhen(c.prepareStatement(anyString())).thenReturn(ps);\r\n\t}\r\n\r\n\t@Test\r\n\tpublic void testCon() throws SQLException {\r\n\t\tManager m = new Manager();\r\n//\t\tConnection c = DriverManager.getConnection(&quot;&quot;, &quot;&quot;, &quot;&quot;);\r\n//\t\tc.prepareStatement(&quot;&quot;);\r\n\t\tm.testConnection();\r\n\t}\r\n}\r\n\r\n&lt;properties&gt;\r\n\t\t&lt;junit4.version&gt;4.12&lt;/junit4.version&gt;\r\n\t\t&lt;testng.version&gt;6.14.3&lt;/testng.version&gt;\r\n\t\t&lt;powermock.version&gt;2.0.0-beta.5&lt;/powermock.version&gt;\r\n\t\t&lt;java.version&gt;8&lt;/java.version&gt;\r\n\t\t&lt;easymock.version&gt;3.6&lt;/easymock.version&gt;\r\n\t\t&lt;mockito-core.version&gt;2.19.0&lt;/mockito-core.version&gt;\r\n\t&lt;/properties&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;junit&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${junit4.version}&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.testng&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;testng&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${testng.version}&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.easymock&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;easymock&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${easymock.version}&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.powermock&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;powermock-module-junit4&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${powermock.version}&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.powermock&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;powermock-module-testng&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${powermock.version}&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.powermock&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;powermock-api-easymock&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${powermock.version}&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t\r\n\t\t&lt;!--mockito  --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.mockito&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${mockito-core.version}&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.powermock&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;powermock-api-mockito2&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${powermock.version}&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n```\r\n\r\nDriverManager call from Manager class testConnection method is not getting mocked, where as if I uncomment line in testCon method, DriverManager is getting mocked in Test class properly. Can someone please suggest, whats going wrong here.\r\n\r\nHow to mock DriverManager using powermockito in Manager class?","title":"Mock DriverManager using powermockito","body":"<pre><code>public class Manager {\n    \n    public void testConnection() throws SQLException {\n        Connection c = DriverManager.getConnection(&quot;&quot;, &quot;&quot;, &quot;&quot;);\n        c.prepareStatement(&quot;&quot;);\n    }\n}\n\nimport static org.junit.Assert.assertEquals;\nimport static org.mockito.ArgumentMatchers.anyInt;\nimport static org.mockito.ArgumentMatchers.anyString;\nimport static org.mockito.Mockito.when;\n\nimport java.sql.Connection;\nimport java.sql.DriverManager;\nimport java.sql.PreparedStatement;\nimport java.sql.SQLException;\n\nimport org.junit.Before;\nimport org.junit.Test;\nimport org.junit.runner.RunWith;\nimport org.mockito.Mock;\nimport org.mockito.Mockito;\nimport org.mockito.MockitoAnnotations;\nimport org.powermock.api.mockito.PowerMockito;\nimport org.powermock.core.classloader.annotations.PrepareForTest;\nimport org.powermock.modules.junit4.PowerMockRunner;\n\n@RunWith(PowerMockRunner.class)\n@PrepareForTest({DriverManager.class})\npublic class JUnit4PowerMockMockitoStaticExample2 {\n\n    @Mock\n    Connection c;\n\n    @Mock\n    PreparedStatement ps;\n\n    @Before\n    public void setUp() throws SQLException {\n        MockitoAnnotations.initMocks(this);\n        PowerMockito.mockStatic(DriverManager.class);\n        when(DriverManager.getConnection(anyString(), anyString(), anyString())).thenReturn(c);\n        when(c.prepareStatement(anyString())).thenReturn(ps);\n    }\n\n    @Test\n    public void testCon() throws SQLException {\n        Manager m = new Manager();\n//      Connection c = DriverManager.getConnection(&quot;&quot;, &quot;&quot;, &quot;&quot;);\n//      c.prepareStatement(&quot;&quot;);\n        m.testConnection();\n    }\n}\n\n&lt;properties&gt;\n        &lt;junit4.version&gt;4.12&lt;/junit4.version&gt;\n        &lt;testng.version&gt;6.14.3&lt;/testng.version&gt;\n        &lt;powermock.version&gt;2.0.0-beta.5&lt;/powermock.version&gt;\n        &lt;java.version&gt;8&lt;/java.version&gt;\n        &lt;easymock.version&gt;3.6&lt;/easymock.version&gt;\n        &lt;mockito-core.version&gt;2.19.0&lt;/mockito-core.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;version&gt;${junit4.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.testng&lt;/groupId&gt;\n            &lt;artifactId&gt;testng&lt;/artifactId&gt;\n            &lt;version&gt;${testng.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.easymock&lt;/groupId&gt;\n            &lt;artifactId&gt;easymock&lt;/artifactId&gt;\n            &lt;version&gt;${easymock.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.powermock&lt;/groupId&gt;\n            &lt;artifactId&gt;powermock-module-junit4&lt;/artifactId&gt;\n            &lt;version&gt;${powermock.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.powermock&lt;/groupId&gt;\n            &lt;artifactId&gt;powermock-module-testng&lt;/artifactId&gt;\n            &lt;version&gt;${powermock.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.powermock&lt;/groupId&gt;\n            &lt;artifactId&gt;powermock-api-easymock&lt;/artifactId&gt;\n            &lt;version&gt;${powermock.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        \n        &lt;!--mockito  --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n            &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\n            &lt;version&gt;${mockito-core.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.powermock&lt;/groupId&gt;\n            &lt;artifactId&gt;powermock-api-mockito2&lt;/artifactId&gt;\n            &lt;version&gt;${powermock.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>DriverManager call from Manager class testConnection method is not getting mocked, where as if I uncomment line in testCon method, DriverManager is getting mocked in Test class properly. Can someone please suggest, whats going wrong here.</p>\n<p>How to mock DriverManager using powermockito in Manager class?</p>\n"},{"tags":["java","unit-testing","testing","junit"],"comments":[{"owner":{"account_id":5553464,"reputation":17547,"user_id":4405757,"accept_rate":57,"display_name":"Thiyagu"},"score":0,"creation_date":1691648485,"post_id":76872770,"comment_id":135520336,"body_markdown":"Why there is a cast here - `(Specification&lt;PurchasedBase&gt;) any(PurchasedBaseSpec.class)`? Also, I&#39;m not sure what is returned by `PurchasedBaseSpec.filter(..)`. Can you check with just `any()` to verify if the issue is with the types i.e., `when(purchasedBaseRepository.findAll(any(), any(Pageable.class)))\n.thenReturn(mockPagePurchasedBase);`","body":"Why there is a cast here - <code>(Specification&lt;PurchasedBase&gt;) any(PurchasedBaseSpec.class)</code>? Also, I&#39;m not sure what is returned by <code>PurchasedBaseSpec.filter(..)</code>. Can you check with just <code>any()</code> to verify if the issue is with the types i.e., <code>when(purchasedBaseRepository.findAll(any(), any(Pageable.class))) .thenReturn(mockPagePurchasedBase);</code>"}],"owner":{"account_id":9065133,"reputation":36,"user_id":7832744,"display_name":"Jean Schuchardt"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691643856,"creation_date":1691643856,"question_id":76872770,"body_markdown":"```\r\n@ExtendWith(SpringExtension.class)\r\nclass ExportServiceTest {\r\n\r\n    @Mock\r\n    PurchasedBaseRepository purchasedBaseRepository;\r\n\r\n    @Mock\r\n    ModelMapper modelMapper;\r\n\r\n    @InjectMocks\r\n    ExportService exportService;\r\n\r\n    @Test\r\n    void report() {\r\n        // Mock data and behavior for purchasedBaseRepository\r\n        Page&lt;PurchasedBase&gt; mockPagePurchasedBase = new PageImpl&lt;&gt;(Collections.singletonList(new PurchasedBase()));\r\n        when(purchasedBaseRepository.findAll((Specification&lt;PurchasedBase&gt;) any(PurchasedBaseSpec.class), any(Pageable.class)))\r\n                .thenReturn(mockPagePurchasedBase);\r\n\r\n        List&lt;PurchasedBaseDTO&gt; mockDTOList = Collections.singletonList(new PurchasedBaseDTO()); // Create a sample DTO\r\n        when(modelMapper.map(any(PurchasedBase.class), eq(PurchasedBaseDTO.class))).thenReturn(mockDTOList.get(0));\r\n\r\n        // Call the method being tested\r\n        Page&lt;PurchasedBaseDTO&gt; result = exportService.report(new PurchasedBaseFilter(), Pageable.unpaged());\r\n\r\n        // Verify that the repository method and modelMapper were called\r\n        verify(purchasedBaseRepository).findAll((Specification&lt;PurchasedBase&gt;) any(PurchasedBaseSpec.class), any(Pageable.class));\r\n        verify(modelMapper).map(any(PurchasedBase.class), eq(PurchasedBaseDTO.class));\r\n\r\n        // Verify the result\r\n        assertNotNull(result); // Add more assertions as needed\r\n    }\r\n}\r\n```\r\n\r\nwhen I execute the test it return an exception\r\n\r\njava.lang.RuntimeException: report: Error=Cannot invoke &quot;org.springframework.data.domain.Page.getNumberOfElements()&quot; because &quot;pagePurchasedBase&quot; is null\r\n\r\n\tat com.governance.purchasedbaseservice.api.v1.services.ExportService.report(ExportService.java:224)\r\n\tat com.governance.purchasedbaseservice.api.v1.services.ExportServiceTest.report(ExportServiceTest.java:69)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)\r\n\tat org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\r\n\tat \r\n\r\nI\\`m not understand why it returning null\r\n\r\nhere the method that Iḿ testing\r\n\r\n```\r\npublic Page&lt;PurchasedBaseDTO&gt; report(PurchasedBaseFilter filter, Pageable pageable){\r\n\t\ttry {\r\n\t\t\tPage&lt;PurchasedBase&gt; pagePurchasedBase = null;\r\n\t\t\tList&lt;PurchasedBaseDTO&gt; purchasedBaseDTO = null;\r\n\t\t\tPageImpl&lt;PurchasedBaseDTO&gt; pageResult = null;\r\n\r\n\t\t\tlog.info(&quot;searching in database&quot;);\r\n\t\t\tpagePurchasedBase = purchasedBaseRepository.findAll(PurchasedBaseSpec.filter(filter), pageable);\r\n\r\n\t\t\tif (pagePurchasedBase.getNumberOfElements() &gt; 0) {\r\n\t\t\t\t\r\n\t\t\t\tpurchasedBaseDTO = pagePurchasedBase.getContent().stream()\r\n\t\t\t\t\t\t.map(purchasedBase -&gt; modelMapper.map(purchasedBase, PurchasedBaseDTO.class))                \r\n\t\t\t\t\t\t.collect(Collectors.toList());\r\n\t\t\t\t\r\n\t\t\t\tlog.info(&quot;searching in database completed&quot;);\r\n\t\t\t\tpageResult = new PageImpl&lt;&gt;(purchasedBaseDTO, pageable, pagePurchasedBase.getTotalElements());\r\n\t\t\t} else {\r\n\t\t\t\tlog.warn(&quot;Nenhum resultado encontrado.&quot;);\r\n\t\t\t\tthrow new ResourceNotFoundException(&quot;Nenhum resultado encontrado.&quot;);\r\n\t\t\t}\r\n\t\t\treturn pageResult;\r\n\t\t} catch (ResourceNotFoundException notFound) {\r\n\t\t\tthrow new ResourceNotFoundException(notFound.getMessage());\r\n\t\t} catch (Exception e) {\r\n\t\t\tthrow new RuntimeException(&quot;report: Error=&quot; + e.getMessage());\r\n\t\t}\r\n\t}\r\n```\r\n\r\nwhen the test get over this line the pagePurchasedBase is null and it cause the failure but I not understand what I can do different to avoid this error.\r\n\r\n```\r\npagePurchasedBase = purchasedBaseRepository.findAll(PurchasedBaseSpec.filter(filter), pageable);\r\n```","title":"unit test faling report: Error=Cannot invoke &quot;Page.getNumberOfElements()&quot; because &quot;pagePurchasedBase&quot; is null","body":"<pre><code>@ExtendWith(SpringExtension.class)\nclass ExportServiceTest {\n\n    @Mock\n    PurchasedBaseRepository purchasedBaseRepository;\n\n    @Mock\n    ModelMapper modelMapper;\n\n    @InjectMocks\n    ExportService exportService;\n\n    @Test\n    void report() {\n        // Mock data and behavior for purchasedBaseRepository\n        Page&lt;PurchasedBase&gt; mockPagePurchasedBase = new PageImpl&lt;&gt;(Collections.singletonList(new PurchasedBase()));\n        when(purchasedBaseRepository.findAll((Specification&lt;PurchasedBase&gt;) any(PurchasedBaseSpec.class), any(Pageable.class)))\n                .thenReturn(mockPagePurchasedBase);\n\n        List&lt;PurchasedBaseDTO&gt; mockDTOList = Collections.singletonList(new PurchasedBaseDTO()); // Create a sample DTO\n        when(modelMapper.map(any(PurchasedBase.class), eq(PurchasedBaseDTO.class))).thenReturn(mockDTOList.get(0));\n\n        // Call the method being tested\n        Page&lt;PurchasedBaseDTO&gt; result = exportService.report(new PurchasedBaseFilter(), Pageable.unpaged());\n\n        // Verify that the repository method and modelMapper were called\n        verify(purchasedBaseRepository).findAll((Specification&lt;PurchasedBase&gt;) any(PurchasedBaseSpec.class), any(Pageable.class));\n        verify(modelMapper).map(any(PurchasedBase.class), eq(PurchasedBaseDTO.class));\n\n        // Verify the result\n        assertNotNull(result); // Add more assertions as needed\n    }\n}\n</code></pre>\n<p>when I execute the test it return an exception</p>\n<p>java.lang.RuntimeException: report: Error=Cannot invoke &quot;org.springframework.data.domain.Page.getNumberOfElements()&quot; because &quot;pagePurchasedBase&quot; is null</p>\n<pre><code>at com.governance.purchasedbaseservice.api.v1.services.ExportService.report(ExportService.java:224)\nat com.governance.purchasedbaseservice.api.v1.services.ExportServiceTest.report(ExportServiceTest.java:69)\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.base/java.lang.reflect.Method.invoke(Method.java:568)\nat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)\nat org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\nat \n</code></pre>\n<p>I`m not understand why it returning null</p>\n<p>here the method that Iḿ testing</p>\n<pre><code>public Page&lt;PurchasedBaseDTO&gt; report(PurchasedBaseFilter filter, Pageable pageable){\n        try {\n            Page&lt;PurchasedBase&gt; pagePurchasedBase = null;\n            List&lt;PurchasedBaseDTO&gt; purchasedBaseDTO = null;\n            PageImpl&lt;PurchasedBaseDTO&gt; pageResult = null;\n\n            log.info(&quot;searching in database&quot;);\n            pagePurchasedBase = purchasedBaseRepository.findAll(PurchasedBaseSpec.filter(filter), pageable);\n\n            if (pagePurchasedBase.getNumberOfElements() &gt; 0) {\n                \n                purchasedBaseDTO = pagePurchasedBase.getContent().stream()\n                        .map(purchasedBase -&gt; modelMapper.map(purchasedBase, PurchasedBaseDTO.class))                \n                        .collect(Collectors.toList());\n                \n                log.info(&quot;searching in database completed&quot;);\n                pageResult = new PageImpl&lt;&gt;(purchasedBaseDTO, pageable, pagePurchasedBase.getTotalElements());\n            } else {\n                log.warn(&quot;Nenhum resultado encontrado.&quot;);\n                throw new ResourceNotFoundException(&quot;Nenhum resultado encontrado.&quot;);\n            }\n            return pageResult;\n        } catch (ResourceNotFoundException notFound) {\n            throw new ResourceNotFoundException(notFound.getMessage());\n        } catch (Exception e) {\n            throw new RuntimeException(&quot;report: Error=&quot; + e.getMessage());\n        }\n    }\n</code></pre>\n<p>when the test get over this line the pagePurchasedBase is null and it cause the failure but I not understand what I can do different to avoid this error.</p>\n<pre><code>pagePurchasedBase = purchasedBaseRepository.findAll(PurchasedBaseSpec.filter(filter), pageable);\n</code></pre>\n"},{"tags":["java","class","generics","casting"],"comments":[{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":4,"creation_date":1691643455,"post_id":76872734,"comment_id":135519779,"body_markdown":"How about `new Comparable[length]`?","body":"How about <code>new Comparable[length]</code>?"},{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":0,"creation_date":1691643503,"post_id":76872734,"comment_id":135519788,"body_markdown":"Why do you need it? Usually the functions that accept a `Comparable` also provide an overload that takes a generic object as well as a `Comparator` .","body":"Why do you need it? Usually the functions that accept a <code>Comparable</code> also provide an overload that takes a generic object as well as a <code>Comparator</code> ."},{"owner":{"account_id":15192247,"reputation":11,"user_id":10962676,"display_name":"abhinav"},"score":0,"creation_date":1691644259,"post_id":76872734,"comment_id":135519862,"body_markdown":"@Sweeper your solution works, but why? I did not try it before because I thought we cannot instantiate interfaces using the new keyword! (I am a student and not very well aware of the intricacies of the Java language)","body":"@Sweeper your solution works, but why? I did not try it before because I thought we cannot instantiate interfaces using the new keyword! (I am a student and not very well aware of the intricacies of the Java language)"},{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":2,"creation_date":1691644456,"post_id":76872734,"comment_id":135519888,"body_markdown":"You are not instantiating an interface. You are instantiating an array, which can contain instances of classes that implement `Comparable`.","body":"You are not instantiating an interface. You are instantiating an array, which can contain instances of classes that implement <code>Comparable</code>."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1691647854,"post_id":76872734,"comment_id":135520256,"body_markdown":"do not confuse `new Comparable` and `new Comparable[]` - first is creating (or trying to create) an instance of that interface; second is creating an instance of an array for elements of that type (no instance of that type is created yet)","body":"do not confuse <code>new Comparable</code> and <code>new Comparable[]</code> - first is creating (or trying to create) an instance of that interface; second is creating an instance of an array for elements of that type (no instance of that type is created yet)"}],"owner":{"account_id":15192247,"reputation":11,"user_id":10962676,"display_name":"abhinav"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691643370,"creation_date":1691643208,"question_id":76872734,"body_markdown":"I am working with a generic type `&lt;T extends Comparable&lt;T&gt;&gt;`, and want to create an array of the same.\r\n\r\nI tried this approach :\r\n\r\n    T[] arr = (T[]) new Object[length]\r\n\r\nBut the code breaks with `ClassCastException : class java.lang.Object cannot be cast to class java.lang.Comparable`.\r\n\r\nOf course, I can instantiate it using a class that implements `Comparable`. For example: \r\n\r\n    T[] arr = (T[]) new Integer[length]\r\n\r\nBut this would kill the purpose of my code. Does anyone know any workarounds?","title":"Problem with generic array initialization in java","body":"<p>I am working with a generic type <code>&lt;T extends Comparable&lt;T&gt;&gt;</code>, and want to create an array of the same.</p>\n<p>I tried this approach :</p>\n<pre><code>T[] arr = (T[]) new Object[length]\n</code></pre>\n<p>But the code breaks with <code>ClassCastException : class java.lang.Object cannot be cast to class java.lang.Comparable</code>.</p>\n<p>Of course, I can instantiate it using a class that implements <code>Comparable</code>. For example:</p>\n<pre><code>T[] arr = (T[]) new Integer[length]\n</code></pre>\n<p>But this would kill the purpose of my code. Does anyone know any workarounds?</p>\n"},{"tags":["java","ajax","spring","xmlhttprequest","blob"],"owner":{"account_id":22215254,"reputation":146,"user_id":16453806,"display_name":"wnotunas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691643359,"creation_date":1691641275,"question_id":76872633,"body_markdown":"I&#39;ve developed an API for validating Excel files and displaying the code content within it. My goal is to call this API using Ajax on the client-side. However, I&#39;ve encountered an issue with the **`blob`** type **`xhrcontent`**, which seems to be causing confusion. To help clarify, I&#39;m providing an overview of the relevant code snippets:\r\n\r\n- Here is the API\r\n\r\n```\r\n@PostMapping(&quot;/valid-excel&quot;)\r\npublic ResponseEntity&lt;Object&gt; validateExcel(@RequestParam(&quot;file&quot;) MultipartFile file) {\r\n    try (InputStream is = file.getInputStream()) {\r\n            \r\n     /* code handle read and write excel file etc..\r\n      * inside a count variable for counting error\r\n      * if count &gt; 0 mean error exist and give out file for client can download \r\n      * else if count == 0 mean notifying client that their file good has no err\r\n      * if the system has interval error, fire swal popup for them \r\n      */\r\n\r\n      if (count != 0) {\r\n          ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\r\n          workbook.write(outputStream);\r\n\r\n          HttpHeaders headers = new HttpHeaders();\r\n                headers.setContentType(MediaType.APPLICATION_OCTET_STREAM);\r\n          String fileName = &quot;IMPORT_FILE_&quot; + file.getName() + &quot;_validate.xlsx&quot;;\r\n          headers.setContentDispositionFormData(fileName, fileName);\r\n          return ResponseEntity.ok().headers(headers).body(outputStream.toByteArray());\r\n      } else {\r\n          return ResponseEntity.ok().body(new ResponseDto(true, Message.SUCCESS_VALID_EXCEL.value()));\r\n      }\r\n\r\n    } catch (Exception e) {\r\n        return ResponseEntity.internalServerError().body(new ResponseDto(false, Message.ERROR_INTERVAL_SERVER.value()));\r\n    }\r\n}\r\n```\r\n\r\n- Here is the ajax at client-side\r\n\r\n```\r\n$.ajax({\r\n    url: &#39;/valid-excel&#39;,\r\n    type: &#39;POST&#39;,\r\n    data: file,\r\n    processData: false,\r\n    contentType: false,\r\n    success: function (response) {\r\n        if (response.status != true || response.status == undefined ){\r\n            var url = window.URL.createObjectURL(data);\r\n            var blob = new Blob([response.body], { type: &#39;application/octet-stream&#39; });\r\n            var downloadLink = document.createElement(&#39;a&#39;);\r\n            downloadLink.href = url;\r\n            downloadLink.download = &#39;VALIDATED_EXCEL_FILE.xlsx&#39;;\r\n            downloadLink.textContent = &#39;Download Validated Excel File&#39;;\r\n            $(&#39;#fileInput&#39;).after(downloadLink);\r\n         } else {\r\n             Swal.fire({\r\n                 icon: &#39;success&#39;,\r\n                 title: &#39;Success&#39;,\r\n                 text: response.data,\r\n             });\r\n         }       \r\n     },\r\n     error: function (error) {\r\n         console.log({error})\r\n         Swal.fire({\r\n             icon: &#39;error&#39;,\r\n             title: &#39;Error&#39;,\r\n             text: &#39;An error occurred while processing the file.&#39;,\r\n         });\r\n     }\r\n});\r\n```\r\n\r\nAlthough this approach works, the file isn&#39;t functioning correctly. When attempting to open the file, an error message is displayed:\r\n\r\n`&quot;Excel cannot open the file because the format is not valid. Verify that the file has not been corrupted and that the file extension matches the format of the file.&quot;`\r\n\r\nI suspect that the error might be occurring during the conversion of the byte stream to a file using the **`blob`** approach.  \r\n  \r\nCan anyone help me fix this for the type Blob in Ajax side, I tested my API on Postman and I&#39;m sure myself that the file has err (count \\&gt;0) of response (open success and show what i want) and the file has no err mean response (count==0) already be the result as expected. Any support will be valueable to me, **Appreciate** your time and help!\r\n\r\n- I try to add this option on the Ajax request setup, then the file works well, but when variable `count` has no error ( mean count == 0 ), the response `ResponseDto` to transfer data to the popup does not work and Ajax throws the error case for `responseText` inside after `console.log(error)` is `[object Blob]`\r\n\r\n  ```\r\n  xhrFields: {\r\n     responseType: &#39;blob&#39;\r\n  }, \r\n  ```\r\n\r\n- Then with the same option above, I tried add this `xhr.responseType = &#39;&#39;;` if `response.isOk == true` inside success area, but it seem meaningless","title":"Binding Blob type from ajax","body":"<p>I've developed an API for validating Excel files and displaying the code content within it. My goal is to call this API using Ajax on the client-side. However, I've encountered an issue with the <strong><code>blob</code></strong> type <strong><code>xhrcontent</code></strong>, which seems to be causing confusion. To help clarify, I'm providing an overview of the relevant code snippets:</p>\n<ul>\n<li>Here is the API</li>\n</ul>\n<pre><code>@PostMapping(&quot;/valid-excel&quot;)\npublic ResponseEntity&lt;Object&gt; validateExcel(@RequestParam(&quot;file&quot;) MultipartFile file) {\n    try (InputStream is = file.getInputStream()) {\n            \n     /* code handle read and write excel file etc..\n      * inside a count variable for counting error\n      * if count &gt; 0 mean error exist and give out file for client can download \n      * else if count == 0 mean notifying client that their file good has no err\n      * if the system has interval error, fire swal popup for them \n      */\n\n      if (count != 0) {\n          ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\n          workbook.write(outputStream);\n\n          HttpHeaders headers = new HttpHeaders();\n                headers.setContentType(MediaType.APPLICATION_OCTET_STREAM);\n          String fileName = &quot;IMPORT_FILE_&quot; + file.getName() + &quot;_validate.xlsx&quot;;\n          headers.setContentDispositionFormData(fileName, fileName);\n          return ResponseEntity.ok().headers(headers).body(outputStream.toByteArray());\n      } else {\n          return ResponseEntity.ok().body(new ResponseDto(true, Message.SUCCESS_VALID_EXCEL.value()));\n      }\n\n    } catch (Exception e) {\n        return ResponseEntity.internalServerError().body(new ResponseDto(false, Message.ERROR_INTERVAL_SERVER.value()));\n    }\n}\n</code></pre>\n<ul>\n<li>Here is the ajax at client-side</li>\n</ul>\n<pre><code>$.ajax({\n    url: '/valid-excel',\n    type: 'POST',\n    data: file,\n    processData: false,\n    contentType: false,\n    success: function (response) {\n        if (response.status != true || response.status == undefined ){\n            var url = window.URL.createObjectURL(data);\n            var blob = new Blob([response.body], { type: 'application/octet-stream' });\n            var downloadLink = document.createElement('a');\n            downloadLink.href = url;\n            downloadLink.download = 'VALIDATED_EXCEL_FILE.xlsx';\n            downloadLink.textContent = 'Download Validated Excel File';\n            $('#fileInput').after(downloadLink);\n         } else {\n             Swal.fire({\n                 icon: 'success',\n                 title: 'Success',\n                 text: response.data,\n             });\n         }       \n     },\n     error: function (error) {\n         console.log({error})\n         Swal.fire({\n             icon: 'error',\n             title: 'Error',\n             text: 'An error occurred while processing the file.',\n         });\n     }\n});\n</code></pre>\n<p>Although this approach works, the file isn't functioning correctly. When attempting to open the file, an error message is displayed:</p>\n<p><code>&quot;Excel cannot open the file because the format is not valid. Verify that the file has not been corrupted and that the file extension matches the format of the file.&quot;</code></p>\n<p>I suspect that the error might be occurring during the conversion of the byte stream to a file using the <strong><code>blob</code></strong> approach.</p>\n<p>Can anyone help me fix this for the type Blob in Ajax side, I tested my API on Postman and I'm sure myself that the file has err (count &gt;0) of response (open success and show what i want) and the file has no err mean response (count==0) already be the result as expected. Any support will be valueable to me, <strong>Appreciate</strong> your time and help!</p>\n<ul>\n<li><p>I try to add this option on the Ajax request setup, then the file works well, but when variable <code>count</code> has no error ( mean count == 0 ), the response <code>ResponseDto</code> to transfer data to the popup does not work and Ajax throws the error case for <code>responseText</code> inside after <code>console.log(error)</code> is <code>[object Blob]</code></p>\n<pre><code>xhrFields: {\n   responseType: 'blob'\n}, \n</code></pre>\n</li>\n<li><p>Then with the same option above, I tried add this <code>xhr.responseType = '';</code> if <code>response.isOk == true</code> inside success area, but it seem meaningless</p>\n</li>\n</ul>\n"},{"tags":["java","jconsole","jlink"],"answers":[{"tags":[],"owner":{"account_id":8423897,"reputation":1034,"user_id":7505687,"display_name":"Dilermando Lima"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669299228,"creation_date":1669299228,"answer_id":74562111,"question_id":74560777,"body_markdown":"Try use `jdeps` to check all modules are required in your build.\r\n\r\n\r\nExample of listing all modules from `.jar`\r\n```.bash\r\njdeps --ignore-missing-deps --print-module-deps --multi-release 17 your-jar.jar \r\n```\r\n\r\nExample to `jlink`\r\n\r\n```.bash\r\njlink \\\r\n    --module-path /path-with-all-jdk-modules \\\r\n    --add-modules $(jdeps --ignore-missing-deps --print-module-deps --multi-release 17 your-jar.jar ) \\\r\n    --output /path-output-jre-custom \\\r\n    --strip-debug \\\r\n    --no-header-files \\\r\n    --no-man-pages \\\r\n    --compress 2\r\n\r\n```","title":"Unable to connect from jconsole to an application built with jlink","body":"<p>Try use <code>jdeps</code> to check all modules are required in your build.</p>\n<p>Example of listing all modules from <code>.jar</code></p>\n<pre><code>jdeps --ignore-missing-deps --print-module-deps --multi-release 17 your-jar.jar \n</code></pre>\n<p>Example to <code>jlink</code></p>\n<pre><code>jlink \\\n    --module-path /path-with-all-jdk-modules \\\n    --add-modules $(jdeps --ignore-missing-deps --print-module-deps --multi-release 17 your-jar.jar ) \\\n    --output /path-output-jre-custom \\\n    --strip-debug \\\n    --no-header-files \\\n    --no-man-pages \\\n    --compress 2\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29196557,"reputation":1,"user_id":22367538,"display_name":"Jupp Zupp"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691643329,"creation_date":1691643329,"answer_id":76872739,"question_id":74560777,"body_markdown":"I had to add `jdk.management.agent`. That added `management.dll` and `management_agent.dll`. The `management_ext.dll` doesn&#39;t seem to be necessary.","title":"Unable to connect from jconsole to an application built with jlink","body":"<p>I had to add <code>jdk.management.agent</code>. That added <code>management.dll</code> and <code>management_agent.dll</code>. The <code>management_ext.dll</code> doesn't seem to be necessary.</p>\n"}],"owner":{"account_id":27034895,"reputation":1,"user_id":20590672,"display_name":"Martin Herbst"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":111,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691643329,"creation_date":1669292800,"question_id":74560777,"body_markdown":"I have written a Java 17 application that provides several MBeans. If I start the jar with a standard Java 17 SDK via `java -jar myjar.jar` the applications starts and I can connect to it from JConsole.\r\n\r\nThen I have created a custom runtime image with jlink.\r\n\r\nThe application itself runs fine with this image. It gets the MBeanServer and registers successfully my MBean. \r\n\r\nWhen I start Jconsole I can select the running application (as &quot;Local Process&quot;) but then the connection to this process can&#39;t be created.\r\n\r\nI have tried to add a number of additional modules (like jdk.management, java.management, ...) but without success. It seems that at least one module is missing because in my customer runtime image e.g. the DLL management_ext.dll is missng.\r\n\r\nAny idea which modules are necessary?","title":"Unable to connect from jconsole to an application built with jlink","body":"<p>I have written a Java 17 application that provides several MBeans. If I start the jar with a standard Java 17 SDK via <code>java -jar myjar.jar</code> the applications starts and I can connect to it from JConsole.</p>\n<p>Then I have created a custom runtime image with jlink.</p>\n<p>The application itself runs fine with this image. It gets the MBeanServer and registers successfully my MBean.</p>\n<p>When I start Jconsole I can select the running application (as &quot;Local Process&quot;) but then the connection to this process can't be created.</p>\n<p>I have tried to add a number of additional modules (like jdk.management, java.management, ...) but without success. It seems that at least one module is missing because in my customer runtime image e.g. the DLL management_ext.dll is missng.</p>\n<p>Any idea which modules are necessary?</p>\n"},{"tags":["java","selenium-webdriver"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691062164,"post_id":76827415,"comment_id":135442250,"body_markdown":"`ProcessBuilder` much better. Check [this](https://stackoverflow.com/questions/18026393/read-stdout-of-runas-child-process-started-by-processbuilder-or-defaultexecuto) out","body":"<code>ProcessBuilder</code> much better. Check <a href=\"https://stackoverflow.com/questions/18026393/read-stdout-of-runas-child-process-started-by-processbuilder-or-defaultexecuto\">this</a> out"},{"owner":{"account_id":26976369,"reputation":33,"user_id":20541520,"display_name":"tt_time"},"score":0,"creation_date":1691416370,"post_id":76827415,"comment_id":135484652,"body_markdown":"I tried ProcessBuilder but the exe wouldn&#39;t run.\nI ended up using,\nRuntime.getRuntime().exec(&quot;cmd runas /user:administrator /savecred /c start \\&quot;\\&quot; \\&quot;C:\\\\Scripts\\\\selectFile-open1jpg.exe\\&quot;&quot;);","body":"I tried ProcessBuilder but the exe wouldn&#39;t run. I ended up using, Runtime.getRuntime().exec(&quot;cmd runas /user:administrator /savecred /c start \\&quot;\\&quot; \\&quot;C:\\\\Scripts\\\\selectFile-open1jpg.exe\\&quot;&quot;);"}],"answers":[{"tags":[],"owner":{"account_id":26976369,"reputation":33,"user_id":20541520,"display_name":"tt_time"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691642652,"creation_date":1691416481,"answer_id":76852415,"question_id":76827415,"body_markdown":"```java\r\nRuntime.getRuntime().exec(&quot;cmd runas /user:administrator /savecred /c start \\&quot;\\&quot; \\&quot;C:\\\\Scripts\\\\selectFile-open1jpg.exe\\&quot;&quot;);\r\n```","title":"Execute Runtime.getRuntime().exec to run an exe as admin","body":"<pre class=\"lang-java prettyprint-override\"><code>Runtime.getRuntime().exec(&quot;cmd runas /user:administrator /savecred /c start \\&quot;\\&quot; \\&quot;C:\\\\Scripts\\\\selectFile-open1jpg.exe\\&quot;&quot;);\n</code></pre>\n"}],"owner":{"account_id":26976369,"reputation":33,"user_id":20541520,"display_name":"tt_time"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76852415,"answer_count":1,"score":0,"last_activity_date":1691642652,"creation_date":1691060140,"question_id":76827415,"body_markdown":"In my Windows Selenium Java project I am trying to run a AutoHotKey exe, but the execution of the exe needs to be done as admin.\r\nHow would I run the following as admin?\r\n\r\n    Runtime.getRuntime().exec(&quot;C:\\\\Scripts\\\\selectFile-emailmsg.exe&quot;);\r\n\r\nThanks.\r\n","title":"Execute Runtime.getRuntime().exec to run an exe as admin","body":"<p>In my Windows Selenium Java project I am trying to run a AutoHotKey exe, but the execution of the exe needs to be done as admin.\nHow would I run the following as admin?</p>\n<pre><code>Runtime.getRuntime().exec(&quot;C:\\\\Scripts\\\\selectFile-emailmsg.exe&quot;);\n</code></pre>\n<p>Thanks.</p>\n"},{"tags":["java","keycloak","keycloak-rest-api"],"owner":{"account_id":5704335,"reputation":257,"user_id":4508409,"accept_rate":65,"display_name":"Kavi Chinna"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":143,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691642638,"creation_date":1691595145,"question_id":76869266,"body_markdown":"I have created my Own custom API to generate the action-token from Keycloak. When I hit the my custom API from Postman it&#39;s giving HTTP 404 Not Found.\r\n\r\nI&#39;m using **Keycloak version 20.0.2**\r\n\r\nBelow is my Implementation approach,\r\n\r\nProviderFactory class\r\n\r\n    public class ActionTokenProviderFactory implements RealmResourceProviderFactory {\r\n    \r\n        public static final String PROVIDER_ID = &quot;custom-action-token&quot;;\r\n        // Logger\r\n        private static final Logger log = LoggerFactory.getLogger(ActionTokenProviderFactory.class);\r\n    \r\n        @Override\r\n        public ActionTokenProvider create(KeycloakSession keycloakSession) {\r\n            log.info(&quot;ActionTokenProviderFactory create()&quot;);\r\n            return new ActionTokenProvider(keycloakSession);\r\n        }\r\n    \r\n        @Override\r\n        public void init(Config.Scope scope) {\r\n    \r\n        }\r\n    \r\n        @Override\r\n        public void postInit(KeycloakSessionFactory keycloakSessionFactory) {\r\n    \r\n        }\r\n    \r\n        @Override\r\n        public void close() {\r\n    \r\n        }\r\n    \r\n        @Override\r\n        public String getId() {\r\n            return PROVIDER_ID;\r\n        }\r\n    }\r\n\r\nProvider class\r\n\r\n    public class ActionTokenProvider implements RealmResourceProvider {\r\n    \r\n        // Logger\r\n        private static final Logger log = LoggerFactory.getLogger(ActionTokenProvider.class);\r\n        private final KeycloakSession keycloakSession;\r\n        public ActionTokenProvider(KeycloakSession keycloakSession){\r\n            this.keycloakSession=keycloakSession;\r\n        }\r\n    \r\n        @POST\r\n        @Path(&quot;generate-action-tokens&quot;)\r\n        @Produces({MediaType.APPLICATION_JSON})\r\n        public Response getActionToken(@QueryParam(&quot;userId&quot;) String userId,\r\n                                       @QueryParam(&quot;email&quot;) String email,\r\n                                       @QueryParam(&quot;redirectUri&quot;) String redirectUri,\r\n                                       @QueryParam(&quot;clientId&quot;) String clientId,\r\n                                       @Context UriInfo uriInfo){\r\n            log.info(&quot;ActionTokenProvider getActionToken() ::: &quot;+userId+&quot;, &quot;+email+&quot;, &quot;+&quot;, &quot;+clientId);\r\n            KeycloakContext keycloakContext = keycloakSession.getContext();\r\n            RealmModel realm = keycloakContext.getRealm();\r\n            int accessTokenLifespan = realm.getAccessTokenLifespan();\r\n            int absoluteExpirationInSecs = Time.currentTime() + accessTokenLifespan;\r\n            log.info(&quot;ActionTokenProvider getActionToken() absoluteExpirationInSecs ::: &quot;+absoluteExpirationInSecs);\r\n    \r\n            List&lt;String&gt; requiredActions=new LinkedList&lt;&gt;();\r\n            requiredActions.add(UserModel.RequiredAction.UPDATE_PASSWORD.name());\r\n    \r\n            String token = new ExecuteActionsActionToken(\r\n                    userId, absoluteExpirationInSecs, requiredActions, redirectUri, clientId)\r\n                    .serialize(keycloakSession, keycloakContext.getRealm(), uriInfo);\r\n            log.info(&quot;ActionTokenProvider getActionToken() token ::: &quot;+token);\r\n    \r\n            return Response.status(200).entity(token).build();\r\n        }\r\n    \r\n    \r\n        @Override\r\n        public Object getResource() {\r\n            return this;\r\n        }\r\n    \r\n        @Override\r\n        public void close() {\r\n    \r\n        }\r\n\r\n**src\\main\\resources\\META-INF\\services\\**\r\n\r\nFile name : `org.keycloak.services.resource.RealmResourceProviderFactory`\r\nFile contetn : `com.event.actiontoken.provider.ActionTokenProviderFactory`\r\n\r\nUsing the above stuff I have build my Project and copy the JAR file under **\\target** folder and paste it into **Keycloak standalone deployments** folder.\r\n\r\nThis **\\standalone\\deployments** was not exists in my Keyclaok directory, So I created this manually and paste the JAR file here.\r\n\r\nThis is my directory structure **keycloak-20.0.2\\standalone\\deployments**\r\n\r\nAnd then I tried to access my API from Postman but getting 404 error. below is the API details\r\n\r\n    http://localhost:8080/realms/my_realm/custom-action-token/generate-action-tokens\r\n    \r\n    Query Parameters\r\n        userId:055b07a3-9fd9-4285-88b2-34165d8f3022\r\n        email:rck1234@gmail.com\r\n        clientId:my_own_client\r\n        redirectUri:http://localhost:1030/\r\n\r\nFor security reason I gave dummy values here, when I hit this I was getting 401 Unauthorized error, So I passed Bearer Token then its giving 404 Not Found error.\r\n\r\nI tried with **/admin/realms/my_realm/** and **/auth/admin/realms/my_realm/** also, but its returning same response.\r\n\r\nDid I miss anything here or Do I need to configure anything Keycloak to make it work?\r\n\r\nHelp me on this.","title":"Custom API in Keycloak is returning HTTP 404 Not Found","body":"<p>I have created my Own custom API to generate the action-token from Keycloak. When I hit the my custom API from Postman it's giving HTTP 404 Not Found.</p>\n<p>I'm using <strong>Keycloak version 20.0.2</strong></p>\n<p>Below is my Implementation approach,</p>\n<p>ProviderFactory class</p>\n<pre><code>public class ActionTokenProviderFactory implements RealmResourceProviderFactory {\n\n    public static final String PROVIDER_ID = &quot;custom-action-token&quot;;\n    // Logger\n    private static final Logger log = LoggerFactory.getLogger(ActionTokenProviderFactory.class);\n\n    @Override\n    public ActionTokenProvider create(KeycloakSession keycloakSession) {\n        log.info(&quot;ActionTokenProviderFactory create()&quot;);\n        return new ActionTokenProvider(keycloakSession);\n    }\n\n    @Override\n    public void init(Config.Scope scope) {\n\n    }\n\n    @Override\n    public void postInit(KeycloakSessionFactory keycloakSessionFactory) {\n\n    }\n\n    @Override\n    public void close() {\n\n    }\n\n    @Override\n    public String getId() {\n        return PROVIDER_ID;\n    }\n}\n</code></pre>\n<p>Provider class</p>\n<pre><code>public class ActionTokenProvider implements RealmResourceProvider {\n\n    // Logger\n    private static final Logger log = LoggerFactory.getLogger(ActionTokenProvider.class);\n    private final KeycloakSession keycloakSession;\n    public ActionTokenProvider(KeycloakSession keycloakSession){\n        this.keycloakSession=keycloakSession;\n    }\n\n    @POST\n    @Path(&quot;generate-action-tokens&quot;)\n    @Produces({MediaType.APPLICATION_JSON})\n    public Response getActionToken(@QueryParam(&quot;userId&quot;) String userId,\n                                   @QueryParam(&quot;email&quot;) String email,\n                                   @QueryParam(&quot;redirectUri&quot;) String redirectUri,\n                                   @QueryParam(&quot;clientId&quot;) String clientId,\n                                   @Context UriInfo uriInfo){\n        log.info(&quot;ActionTokenProvider getActionToken() ::: &quot;+userId+&quot;, &quot;+email+&quot;, &quot;+&quot;, &quot;+clientId);\n        KeycloakContext keycloakContext = keycloakSession.getContext();\n        RealmModel realm = keycloakContext.getRealm();\n        int accessTokenLifespan = realm.getAccessTokenLifespan();\n        int absoluteExpirationInSecs = Time.currentTime() + accessTokenLifespan;\n        log.info(&quot;ActionTokenProvider getActionToken() absoluteExpirationInSecs ::: &quot;+absoluteExpirationInSecs);\n\n        List&lt;String&gt; requiredActions=new LinkedList&lt;&gt;();\n        requiredActions.add(UserModel.RequiredAction.UPDATE_PASSWORD.name());\n\n        String token = new ExecuteActionsActionToken(\n                userId, absoluteExpirationInSecs, requiredActions, redirectUri, clientId)\n                .serialize(keycloakSession, keycloakContext.getRealm(), uriInfo);\n        log.info(&quot;ActionTokenProvider getActionToken() token ::: &quot;+token);\n\n        return Response.status(200).entity(token).build();\n    }\n\n\n    @Override\n    public Object getResource() {\n        return this;\n    }\n\n    @Override\n    public void close() {\n\n    }\n</code></pre>\n<p>*<em>src\\main\\resources\\META-INF\\services*</em></p>\n<p>File name : <code>org.keycloak.services.resource.RealmResourceProviderFactory</code>\nFile contetn : <code>com.event.actiontoken.provider.ActionTokenProviderFactory</code></p>\n<p>Using the above stuff I have build my Project and copy the JAR file under <strong>\\target</strong> folder and paste it into <strong>Keycloak standalone deployments</strong> folder.</p>\n<p>This <strong>\\standalone\\deployments</strong> was not exists in my Keyclaok directory, So I created this manually and paste the JAR file here.</p>\n<p>This is my directory structure <strong>keycloak-20.0.2\\standalone\\deployments</strong></p>\n<p>And then I tried to access my API from Postman but getting 404 error. below is the API details</p>\n<pre><code>http://localhost:8080/realms/my_realm/custom-action-token/generate-action-tokens\n\nQuery Parameters\n    userId:055b07a3-9fd9-4285-88b2-34165d8f3022\n    email:rck1234@gmail.com\n    clientId:my_own_client\n    redirectUri:http://localhost:1030/\n</code></pre>\n<p>For security reason I gave dummy values here, when I hit this I was getting 401 Unauthorized error, So I passed Bearer Token then its giving 404 Not Found error.</p>\n<p>I tried with <strong>/admin/realms/my_realm/</strong> and <strong>/auth/admin/realms/my_realm/</strong> also, but its returning same response.</p>\n<p>Did I miss anything here or Do I need to configure anything Keycloak to make it work?</p>\n<p>Help me on this.</p>\n"},{"tags":["java","spring","session","spring-security","vaadin"],"comments":[{"owner":{"account_id":12280349,"reputation":10212,"user_id":8962195,"display_name":"Tatu Lund"},"score":0,"creation_date":1691656969,"post_id":76872677,"comment_id":135521897,"body_markdown":"The UIDetachedException is natural. You have ever running background thread, eventually user will close the Browser / navigate to other page, but your thread is still running. Thus you need to catch that exception and stop the thread when UI has been detached.","body":"The UIDetachedException is natural. You have ever running background thread, eventually user will close the Browser / navigate to other page, but your thread is still running. Thus you need to catch that exception and stop the thread when UI has been detached."}],"owner":{"account_id":25174873,"reputation":57,"user_id":19017210,"display_name":"YaziD"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691642588,"creation_date":1691642168,"question_id":76872677,"body_markdown":"I am developing a vaadin application with spring security. I have set a defined time to Http session maximum inactive interval. \r\n\r\nAfter the session is expired, the user should redirect to the login page.\r\n\r\nBut after the session is expired, UI promotes a large error box. If I click that error box or refresh the page, it successfully redirects to the login page. That&#39;s fine, but my concern is the large error message.\r\n\r\n\r\n**SecurityConfig class**\r\n\r\n```\r\npublic class SecurityConfig {\r\n\r\n    private static final String LOGIN_PAGE = &quot;/login&quot;;\r\n\r\n    @Autowired\r\n    private CustomAuthenticationProvider authProvider;\r\n\r\n    @Bean\r\n    public AuthenticationManager authManager(HttpSecurity http) throws Exception {\r\n        AuthenticationManagerBuilder authenticationManagerBuilder = http.getSharedObject(AuthenticationManagerBuilder.class);\r\n        authenticationManagerBuilder.authenticationProvider(authProvider);\r\n        return authenticationManagerBuilder.build();\r\n    }\r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n        http\r\n                .csrf().disable()\r\n                .authorizeHttpRequests(auth -&gt; auth\r\n                        .anyRequest().authenticated())\r\n                .sessionManagement(session -&gt; session\r\n                        .sessionFixation()\r\n                        .migrateSession()\r\n                        .sessionCreationPolicy(SessionCreationPolicy.IF_REQUIRED)\r\n                        .invalidSessionUrl(LOGIN_PAGE)\r\n                        .maximumSessions(1)\r\n                        .expiredUrl(LOGIN_PAGE))\r\n                .formLogin(withDefaults());\r\n        return http.build();\r\n    }\r\n}\r\n```\r\n\r\n**CustomAuthenticationProvider class**\r\n\r\n```\r\nif(isAuthSuccess){\r\n            Authentication authenticatedToken = new UsernamePasswordAuthenticationToken(username, password, new ArrayList&lt;&gt;());\r\n\r\n            // Store the access and refresh token in the session\r\n            SecurityContextHolder.getContext().setAuthentication(authenticatedToken);\r\n            ServletRequestAttributes request = (ServletRequestAttributes) RequestContextHolder.currentRequestAttributes();\r\n            HttpSession session = request.getRequest().getSession(false);\r\n\r\n            // Set session expiration based on access token expiration time\r\n            session.setMaxInactiveInterval(expiry_time);\r\n\r\n            return authenticatedToken;\r\n\r\n        }else {\r\n            throw new BadCredentialsException(&quot;Authentication failed&quot;);\r\n        }\r\n```\r\n\r\n\r\n\r\n```\r\n  @Override\r\n    protected void onAttach(AttachEvent attachEvent) {\r\n        UI ui = attachEvent.getUI();\r\n\r\n\r\n        feederThread = new Thread(() -&gt; {\r\n            while (true) {\r\n                try {\r\n                    ui.access(() -&gt; {\r\n                        updateResults();\r\n                    });\r\n                    Thread.sleep(5000);\r\n                } catch (InterruptedException e) {\r\n                    logger.error(e.getMessage() + &quot; UI Error&quot;);\r\n                }\r\n            }\r\n        });\r\n        feederThread.start();\r\n    }\r\n```\r\n\r\nUI Error erro log is returning when that large error box is showing.\r\n\r\n**Error box**\r\n\r\n[![enter image description here](https://i.stack.imgur.com/wjUpx.png)](https://i.stack.imgur.com/wjUpx.png)\r\n\r\n**Log error**\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n\r\nI need to remove this erro box showing in the UI. Iam in beginer level in the vaadin development.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/3d3ZL.png","title":"Vaadin shows large error box in the UI and gets Detached Exception in the log","body":"<p>I am developing a vaadin application with spring security. I have set a defined time to Http session maximum inactive interval.</p>\n<p>After the session is expired, the user should redirect to the login page.</p>\n<p>But after the session is expired, UI promotes a large error box. If I click that error box or refresh the page, it successfully redirects to the login page. That's fine, but my concern is the large error message.</p>\n<p><strong>SecurityConfig class</strong></p>\n<pre><code>public class SecurityConfig {\n\n    private static final String LOGIN_PAGE = &quot;/login&quot;;\n\n    @Autowired\n    private CustomAuthenticationProvider authProvider;\n\n    @Bean\n    public AuthenticationManager authManager(HttpSecurity http) throws Exception {\n        AuthenticationManagerBuilder authenticationManagerBuilder = http.getSharedObject(AuthenticationManagerBuilder.class);\n        authenticationManagerBuilder.authenticationProvider(authProvider);\n        return authenticationManagerBuilder.build();\n    }\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http\n                .csrf().disable()\n                .authorizeHttpRequests(auth -&gt; auth\n                        .anyRequest().authenticated())\n                .sessionManagement(session -&gt; session\n                        .sessionFixation()\n                        .migrateSession()\n                        .sessionCreationPolicy(SessionCreationPolicy.IF_REQUIRED)\n                        .invalidSessionUrl(LOGIN_PAGE)\n                        .maximumSessions(1)\n                        .expiredUrl(LOGIN_PAGE))\n                .formLogin(withDefaults());\n        return http.build();\n    }\n}\n</code></pre>\n<p><strong>CustomAuthenticationProvider class</strong></p>\n<pre><code>if(isAuthSuccess){\n            Authentication authenticatedToken = new UsernamePasswordAuthenticationToken(username, password, new ArrayList&lt;&gt;());\n\n            // Store the access and refresh token in the session\n            SecurityContextHolder.getContext().setAuthentication(authenticatedToken);\n            ServletRequestAttributes request = (ServletRequestAttributes) RequestContextHolder.currentRequestAttributes();\n            HttpSession session = request.getRequest().getSession(false);\n\n            // Set session expiration based on access token expiration time\n            session.setMaxInactiveInterval(expiry_time);\n\n            return authenticatedToken;\n\n        }else {\n            throw new BadCredentialsException(&quot;Authentication failed&quot;);\n        }\n</code></pre>\n<pre><code>  @Override\n    protected void onAttach(AttachEvent attachEvent) {\n        UI ui = attachEvent.getUI();\n\n\n        feederThread = new Thread(() -&gt; {\n            while (true) {\n                try {\n                    ui.access(() -&gt; {\n                        updateResults();\n                    });\n                    Thread.sleep(5000);\n                } catch (InterruptedException e) {\n                    logger.error(e.getMessage() + &quot; UI Error&quot;);\n                }\n            }\n        });\n        feederThread.start();\n    }\n</code></pre>\n<p>UI Error erro log is returning when that large error box is showing.</p>\n<p><strong>Error box</strong></p>\n<p><a href=\"https://i.stack.imgur.com/wjUpx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wjUpx.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Log error</strong></p>\n<p><a href=\"https://i.stack.imgur.com/3d3ZL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3d3ZL.png\" alt=\"enter image description here\" /></a></p>\n<p>I need to remove this erro box showing in the UI. Iam in beginer level in the vaadin development.</p>\n"},{"tags":["java","file-upload","veracode"],"owner":{"account_id":25616906,"reputation":11,"user_id":19389372,"display_name":"Janu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1691518354,"answer_count":0,"score":-3,"last_activity_date":1691640309,"creation_date":1691127435,"question_id":76833179,"body_markdown":"Getting CWE-80 error while reading the file and processing the contents in the rest api call.Is there any fix for this? Please comment.\r\n\r\nWe have a rest api which accepts file as input and we in the service we are reading the data from file and doing some validations and then we are updating the data in DB .\r\n\r\nIn this api iam getting veracode issue CEW-80.PFB error in the veracode scan &#39;&#39;\r\n&quot;cwe_id&quot;: &quot;80&quot;,\r\n      &quot;display_text&quot;: &quot;\\u003cspan\\u003eThis call to uploadFile() contains a cross-site scripting (XSS) flaw.  The application populates the HTTP response with untrusted input, allowing an attacker to embed malicious content, such as Javascript code, which will be executed in the context of the victim\\u0027s browser.  XSS vulnerabilities are commonly exploited to steal or manipulate cookies, modify presentation of content, and compromise confidential information, with new attack vectors being discovered on a regular basis. The tainted data originated from an earlier call to org.springframework.data.repository.CrudRepository.save.\\u003c/span\\u003e \\u003cspan\\u003eUse contextual escaping on all untrusted data before using it to construct any portion of an HTTP response.  The escaping method should be chosen based on the specific use case of the untrusted data, otherwise it may not protect fully against the attack. For example, if the data is being written to the body of an HTML page, use HTML entity escaping; if the data is being written to an attribute, use attribute escaping; etc.  Both the OWASP Java Encoder library and the Microsoft AntiXSS library provide contextual escaping methods. For more details on contextual escaping, see https://github.com/OWASP/CheatSheetSeries/blob/master/cheatsheets/Cross_Site_Scripting_Prevention_Cheat_Sheet.md. In addition, as a best practice, always validate untrusted input to ensure that it conforms to the expected format, using centralized data validation routines when possible.\\u003c/span\\u003e \\u003cspan\\u003eReferences: \\u003ca href\\u003d\\&quot;https://cwe.mitre.org/data/definitions/79.html\\&quot;\\u003eCWE\\u003c/a\\u003e \\u003ca href\\u003d\\&quot;https://owasp.org/www-community/attacks/xss/\\&quot;\\u003eOWASP\\u003c/a\\u003e \\u003ca href\\u003d\\&quot;https://docs.veracode.com/r/review_cleansers\\&quot;\\u003eSupported Cleansers\\u003c/a\\u003e\\u003c/span\\u003e&quot;,","title":"CWE-80 error in java file upload veracode scan","body":"<p>Getting CWE-80 error while reading the file and processing the contents in the rest api call.Is there any fix for this? Please comment.</p>\n<p>We have a rest api which accepts file as input and we in the service we are reading the data from file and doing some validations and then we are updating the data in DB .</p>\n<p>In this api iam getting veracode issue CEW-80.PFB error in the veracode scan ''\n&quot;cwe_id&quot;: &quot;80&quot;,\n&quot;display_text&quot;: &quot;\\u003cspan\\u003eThis call to uploadFile() contains a cross-site scripting (XSS) flaw.  The application populates the HTTP response with untrusted input, allowing an attacker to embed malicious content, such as Javascript code, which will be executed in the context of the victim\\u0027s browser.  XSS vulnerabilities are commonly exploited to steal or manipulate cookies, modify presentation of content, and compromise confidential information, with new attack vectors being discovered on a regular basis. The tainted data originated from an earlier call to org.springframework.data.repository.CrudRepository.save.\\u003c/span\\u003e \\u003cspan\\u003eUse contextual escaping on all untrusted data before using it to construct any portion of an HTTP response.  The escaping method should be chosen based on the specific use case of the untrusted data, otherwise it may not protect fully against the attack. For example, if the data is being written to the body of an HTML page, use HTML entity escaping; if the data is being written to an attribute, use attribute escaping; etc.  Both the OWASP Java Encoder library and the Microsoft AntiXSS library provide contextual escaping methods. For more details on contextual escaping, see <a href=\"https://github.com/OWASP/CheatSheetSeries/blob/master/cheatsheets/Cross_Site_Scripting_Prevention_Cheat_Sheet.md\" rel=\"nofollow noreferrer\">https://github.com/OWASP/CheatSheetSeries/blob/master/cheatsheets/Cross_Site_Scripting_Prevention_Cheat_Sheet.md</a>. In addition, as a best practice, always validate untrusted input to ensure that it conforms to the expected format, using centralized data validation routines when possible.\\u003c/span\\u003e \\u003cspan\\u003eReferences: \\u003ca href\\u003d&quot;https://cwe.mitre.org/data/definitions/79.html&quot;\\u003eCWE\\u003c/a\\u003e \\u003ca href\\u003d&quot;https://owasp.org/www-community/attacks/xss/&quot;\\u003eOWASP\\u003c/a\\u003e \\u003ca href\\u003d&quot;https://docs.veracode.com/r/review_cleansers&quot;\\u003eSupported Cleansers\\u003c/a\\u003e\\u003c/span\\u003e&quot;,</p>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":7,"creation_date":1449757219,"post_id":1038007,"comment_id":56152853,"body_markdown":"Note:   Oracle documentation calls this idiom a &quot;guarded block&quot;  https://docs.oracle.com/javase/tutorial/essential/concurrency/guardmeth.html","body":"Note:   Oracle documentation calls this idiom a &quot;guarded block&quot;  <a href=\"https://docs.oracle.com/javase/tutorial/essential/concurrency/guardmeth.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/essential/concurrency/&hellip;</a>"},{"owner":{"account_id":1416522,"reputation":91354,"user_id":3553087,"display_name":"Brian Goetz"},"score":3,"creation_date":1533567568,"post_id":1038007,"comment_id":90382185,"body_markdown":"It only works &quot;fine&quot; in a loop in trivial cases.  The rest of the time, your program is subtly broken.  See chapter 14 of _Java Concurrency in Practice_ for examples of what can go wrong.","body":"It only works &quot;fine&quot; in a loop in trivial cases.  The rest of the time, your program is subtly broken.  See chapter 14 of <i>Java Concurrency in Practice</i> for examples of what can go wrong."}],"answers":[{"tags":[],"owner":{"account_id":35972,"reputation":7289,"user_id":102281,"display_name":"Philipp"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1245846069,"creation_date":1245846069,"answer_id":1038024,"question_id":1038007,"body_markdown":"There might be more then just one worker waiting for a condition to become true.\r\n\r\nIf two or more worker get awake (notifyAll) they have to check the condition again.\r\notherwise all workers would continue even though there might only be data for one of them.","title":"Why should wait() always be called inside a loop","body":"<p>There might be more then just one worker waiting for a condition to become true.</p>\n\n<p>If two or more worker get awake (notifyAll) they have to check the condition again.\notherwise all workers would continue even though there might only be data for one of them.</p>\n"},{"tags":[],"owner":{"account_id":1889,"reputation":120472,"user_id":2603,"accept_rate":75,"display_name":"Aaron Maenpaa"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1245846181,"creation_date":1245846181,"answer_id":1038033,"question_id":1038007,"body_markdown":"Because wait and notify are used to implement [condition variables](http://en.wikipedia.org/wiki/Monitor_(synchronization\\)#Blocking_condition_variables) and so you need to check whether the specific predicate you&#39;re waiting on is true before continuing.","title":"Why should wait() always be called inside a loop","body":"<p>Because wait and notify are used to implement [condition variables](<a href=\"http://en.wikipedia.org/wiki/Monitor_(synchronization)#Blocking_condition_variables)\" rel=\"noreferrer\">http://en.wikipedia.org/wiki/Monitor_(synchronization)#Blocking_condition_variables)</a> and so you need to check whether the specific predicate you're waiting on is true before continuing.</p>\n"},{"tags":[],"owner":{"account_id":24127,"reputation":69392,"user_id":61158,"accept_rate":98,"display_name":"akarnokd"},"down_vote_count":0,"up_vote_count":80,"is_accepted":false,"score":80,"last_activity_date":1245849726,"creation_date":1245846292,"answer_id":1038039,"question_id":1038007,"body_markdown":"You need not only to loop it but check your condition in the loop. Java does not guarantee that your thread will be woken up only by a notify()/notifyAll() call or the right notify()/notifyAll() call at all. Because of this property the loop-less version might work on your development environment and fail on the production environment unexpectedly.\r\n\r\nFor example, you are waiting for something:\r\n\r\n    synchronized (theObjectYouAreWaitingOn) {\r\n       while (!carryOn) {\r\n          theObjectYouAreWaitingOn.wait();\r\n       }\r\n    }\r\n\r\nAn evil thread comes along and:\r\n\r\n    theObjectYouAreWaitingOn.notifyAll();\r\n\r\nIf the evil thread does not/can not mess with the `carryOn` you just continue to wait for the proper client.\r\n\r\n**Edit:** Added some more samples. \r\nThe wait can be interrupted. It throws InterruptedException and you might need to wrap the wait in a try-catch. Depending on your business needs, you can exit or suppress the exception and continue waiting.","title":"Why should wait() always be called inside a loop","body":"<p>You need not only to loop it but check your condition in the loop. Java does not guarantee that your thread will be woken up only by a notify()/notifyAll() call or the right notify()/notifyAll() call at all. Because of this property the loop-less version might work on your development environment and fail on the production environment unexpectedly.</p>\n\n<p>For example, you are waiting for something:</p>\n\n<pre><code>synchronized (theObjectYouAreWaitingOn) {\n   while (!carryOn) {\n      theObjectYouAreWaitingOn.wait();\n   }\n}\n</code></pre>\n\n<p>An evil thread comes along and:</p>\n\n<pre><code>theObjectYouAreWaitingOn.notifyAll();\n</code></pre>\n\n<p>If the evil thread does not/can not mess with the <code>carryOn</code> you just continue to wait for the proper client.</p>\n\n<p><strong>Edit:</strong> Added some more samples. \nThe wait can be interrupted. It throws InterruptedException and you might need to wrap the wait in a try-catch. Depending on your business needs, you can exit or suppress the exception and continue waiting.</p>\n"},{"tags":[],"owner":{"account_id":39415,"reputation":12303,"user_id":113662,"accept_rate":93,"display_name":"Tadeusz Kopec for Ukraine"},"down_vote_count":0,"up_vote_count":41,"is_accepted":false,"score":41,"last_activity_date":1245847051,"creation_date":1245847051,"answer_id":1038098,"question_id":1038007,"body_markdown":"It&#39;s answered in [documentation for Object.wait(long milis)][1]\r\n\r\n&gt;  A thread can also wake up without being notified, interrupted, or timing out, a so-called spurious wakeup. While this will rarely occur in practice, applications must guard against it by testing for the condition that should have caused the thread to be awakened, and continuing to wait if the condition is not satisfied. In other words, waits should always occur in loops, like this one:\r\n\r\n     synchronized (obj) {\r\n         while (&lt;condition does not hold&gt;)\r\n             obj.wait(timeout);\r\n         ... // Perform action appropriate to condition\r\n     }\r\n \r\n\r\n&gt; (For more information on this topic,\r\n&gt; see Section 3.2.3 in Doug Lea&#39;s\r\n&gt; &quot;Concurrent Programming in Java\r\n&gt; (Second Edition)&quot; (Addison-Wesley,\r\n&gt; 2000), or Item 50 in Joshua Bloch&#39;s\r\n&gt; &quot;Effective Java Programming Language\r\n&gt; Guide&quot; (Addison-Wesley, 2001).\r\n\r\n\r\n  [1]: http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html#wait(long)","title":"Why should wait() always be called inside a loop","body":"<p>It's answered in <a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html#wait(long)\" rel=\"noreferrer\">documentation for Object.wait(long milis)</a></p>\n\n<blockquote>\n  <p>A thread can also wake up without being notified, interrupted, or timing out, a so-called spurious wakeup. While this will rarely occur in practice, applications must guard against it by testing for the condition that should have caused the thread to be awakened, and continuing to wait if the condition is not satisfied. In other words, waits should always occur in loops, like this one:</p>\n</blockquote>\n\n<pre><code> synchronized (obj) {\n     while (&lt;condition does not hold&gt;)\n         obj.wait(timeout);\n     ... // Perform action appropriate to condition\n }\n</code></pre>\n\n<blockquote>\n  <p>(For more information on this topic,\n  see Section 3.2.3 in Doug Lea's\n  \"Concurrent Programming in Java\n  (Second Edition)\" (Addison-Wesley,\n  2000), or Item 50 in Joshua Bloch's\n  \"Effective Java Programming Language\n  Guide\" (Addison-Wesley, 2001).</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":60171,"reputation":115485,"user_id":179850,"accept_rate":100,"display_name":"Gray"},"down_vote_count":1,"up_vote_count":19,"is_accepted":false,"score":18,"last_activity_date":1577111854,"creation_date":1334069690,"answer_id":10091092,"question_id":1038007,"body_markdown":"&gt; Why should wait() always be called inside a loop\r\n\r\nThe primary reason why `while` loops are so important is race conditions between threads.  Certainly spurious wakeups are real and for certain architectures they are common, but race conditions are a much more likely reason for the `while` loop.\r\n\r\nFor example:\r\n\r\n    synchronized (queue) {\r\n        // this needs to be while\r\n        while (queue.isEmpty()) {\r\n           queue.wait();\r\n        }\r\n        queue.remove();\r\n    }\r\n\r\nWith the above code, there may be 2 consumer threads.  When the producer locks the `queue` to add to it, consumer #1 may be blocked at the `synchronized` lock while consumer #2 is waiting on the `queue`.  When the item is added to the queue and `notify` called by the producer, #2 is moved from the wait queue to be blocked on the `queue` lock, but it will be _behind_ the #1 consumer which was already blocked on the lock.  This means that the #1 consumer gets to go forward first to call `remove()` from the `queue`.  If the `while` loop is just an `if`, then when consumer #2 gets the lock after #1 and calls `remove()`, an exception would occur because the `queue` is now empty -- the other consumer thread already removed the item.  Even though it was notified, it needs to be make sure the `queue` is for sure not empty because of this race condition.\r\n\r\nThis well documented.  Here&#39;s a web page I created a while back which explains the [race condition in detail][1] and has some sample code.\r\n\r\n  [1]: http://256stuff.com/gray/docs/misc/producer_consumer_race_conditions/","title":"Why should wait() always be called inside a loop","body":"<blockquote>\n  <p>Why should wait() always be called inside a loop</p>\n</blockquote>\n\n<p>The primary reason why <code>while</code> loops are so important is race conditions between threads.  Certainly spurious wakeups are real and for certain architectures they are common, but race conditions are a much more likely reason for the <code>while</code> loop.</p>\n\n<p>For example:</p>\n\n<pre><code>synchronized (queue) {\n    // this needs to be while\n    while (queue.isEmpty()) {\n       queue.wait();\n    }\n    queue.remove();\n}\n</code></pre>\n\n<p>With the above code, there may be 2 consumer threads.  When the producer locks the <code>queue</code> to add to it, consumer #1 may be blocked at the <code>synchronized</code> lock while consumer #2 is waiting on the <code>queue</code>.  When the item is added to the queue and <code>notify</code> called by the producer, #2 is moved from the wait queue to be blocked on the <code>queue</code> lock, but it will be <em>behind</em> the #1 consumer which was already blocked on the lock.  This means that the #1 consumer gets to go forward first to call <code>remove()</code> from the <code>queue</code>.  If the <code>while</code> loop is just an <code>if</code>, then when consumer #2 gets the lock after #1 and calls <code>remove()</code>, an exception would occur because the <code>queue</code> is now empty -- the other consumer thread already removed the item.  Even though it was notified, it needs to be make sure the <code>queue</code> is for sure not empty because of this race condition.</p>\n\n<p>This well documented.  Here's a web page I created a while back which explains the <a href=\"http://256stuff.com/gray/docs/misc/producer_consumer_race_conditions/\" rel=\"nofollow noreferrer\">race condition in detail</a> and has some sample code.</p>\n"},{"tags":[],"owner":{"account_id":7331072,"reputation":827,"user_id":5594698,"accept_rate":38,"display_name":"Adil"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1449749624,"creation_date":1449749624,"answer_id":34201632,"question_id":1038007,"body_markdown":"From your Question:\r\n\r\n&gt;I have read that we should always called a wait() from within a loop:\r\n\r\nAlthough wait( ) normally waits until notify( ) or notifyAll( ) is called, there is a possibility that in very rare cases the waiting thread could be awakened due to a spurious wakeup. In this case, a waiting thread resumes without notify( ) or notifyAll( ) having been called.\r\n\r\nIn essence, the thread resumes for no apparent reason.\r\n\r\nBecause of this remote possibility, Oracle recommends that calls to wait( ) should take place within a loop that checks the condition on which the thread is waiting.","title":"Why should wait() always be called inside a loop","body":"<p>From your Question:</p>\n\n<blockquote>\n  <p>I have read that we should always called a wait() from within a loop:</p>\n</blockquote>\n\n<p>Although wait( ) normally waits until notify( ) or notifyAll( ) is called, there is a possibility that in very rare cases the waiting thread could be awakened due to a spurious wakeup. In this case, a waiting thread resumes without notify( ) or notifyAll( ) having been called.</p>\n\n<p>In essence, the thread resumes for no apparent reason.</p>\n\n<p>Because of this remote possibility, Oracle recommends that calls to wait( ) should take place within a loop that checks the condition on which the thread is waiting.</p>\n"},{"tags":[],"owner":{"account_id":6855836,"reputation":51,"user_id":5271408,"display_name":"Sameer Patel"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1466618071,"creation_date":1466618071,"answer_id":37975114,"question_id":1038007,"body_markdown":"Both safety and liveness  are concerns when using the wait/notify mechanism. The safety property requires that all objects maintain consistent states in a multithreaded environment. The liveness property requires that every operation or method invocation execute to completion without interruption.\r\n\r\nTo guarantee liveness, programs must test the while loop condition before invoking the wait() method. This early test checks whether another thread has already satisfied the condition predicate and sent a notification. Invoking the wait() method after the notification has been sent results in indefinite blocking.\r\n\r\nTo guarantee safety, programs must test the while loop condition after returning from the wait() method. Although wait() is intended to block indefinitely until a notification is received, it still must be encased within a loop to prevent the following vulnerabilities:\r\n\r\n**Thread in the middle:** A third thread can acquire the lock on the shared object during the interval between a notification being sent and the receiving thread resuming execution. This third thread can change the state of the object, leaving it inconsistent. This is a time-of-check, time-of-use (TOCTOU) race condition.\r\n\r\n**Malicious notification:** A random or malicious notification can be received when the condition predicate is false. Such a notification would cancel the wait() method.\r\n\r\n**Misdelivered notification:** The order in which threads execute after receipt of a notifyAll() signal is unspecified. Consequently, an unrelated thread could start executing and discover that its condition predicate is satisfied. Consequently, it could resume execution despite being required to remain dormant.\r\n\r\n**Spurious wakeups:** Certain Java Virtual Machine (JVM) implementations are vulnerable to spurious wakeups that result in waiting threads waking up even without a notification.\r\n\r\nFor these reasons, programs must check the condition predicate after the wait() method returns. A while loop is the best choice for checking the condition predicate both before and after invoking wait().\r\n\r\nSimilarly, the await() method of the Condition interface also must be invoked inside a loop. According to the Java API, Interface Condition\r\n\r\n&gt; When waiting upon a Condition, a &quot;spurious wakeup&quot; is permitted to\r\n&gt; occur, in general, as a concession to the underlying platform\r\n&gt; semantics. This has little practical impact on most application\r\n&gt; programs as a Condition should always be waited upon in a loop,\r\n&gt; testing the state predicate that is being waited for. An\r\n&gt; implementation is free to remove the possibility of spurious wakeups\r\n&gt; but it is recommended that applications programmers always assume that\r\n&gt; they can occur and so always wait in a loop.\r\n\r\nNew code should use the java.util.concurrent.locks concurrency utilities in place of the wait/notify mechanism. However, legacy code that complies with the other requirements of this rule is permitted to depend on the wait/notify mechanism.\r\n\r\n**Noncompliant Code Example**\r\nThis noncompliant code example invokes the wait() method inside a traditional if block and fails to check the postcondition after the notification is received. If the notification were accidental or malicious, the thread could wake up prematurely.\r\n\r\n    synchronized (object) {\r\n      if (&lt;condition does not hold&gt;) {\r\n        object.wait();\r\n      }\r\n      // Proceed when condition holds\r\n    }\r\n\r\n**Compliant Solution**\r\nThis compliant solution calls the wait() method from within a while loop to check the condition both before and after the call to wait():\r\n\r\n    synchronized (object) {\r\n      while (&lt;condition does not hold&gt;) {\r\n        object.wait();\r\n      }\r\n      // Proceed when condition holds\r\n    }\r\n\r\nInvocations of the java.util.concurrent.locks.Condition.await() method also must be enclosed in a similar loop.","title":"Why should wait() always be called inside a loop","body":"<p>Both safety and liveness  are concerns when using the wait/notify mechanism. The safety property requires that all objects maintain consistent states in a multithreaded environment. The liveness property requires that every operation or method invocation execute to completion without interruption.</p>\n\n<p>To guarantee liveness, programs must test the while loop condition before invoking the wait() method. This early test checks whether another thread has already satisfied the condition predicate and sent a notification. Invoking the wait() method after the notification has been sent results in indefinite blocking.</p>\n\n<p>To guarantee safety, programs must test the while loop condition after returning from the wait() method. Although wait() is intended to block indefinitely until a notification is received, it still must be encased within a loop to prevent the following vulnerabilities:</p>\n\n<p><strong>Thread in the middle:</strong> A third thread can acquire the lock on the shared object during the interval between a notification being sent and the receiving thread resuming execution. This third thread can change the state of the object, leaving it inconsistent. This is a time-of-check, time-of-use (TOCTOU) race condition.</p>\n\n<p><strong>Malicious notification:</strong> A random or malicious notification can be received when the condition predicate is false. Such a notification would cancel the wait() method.</p>\n\n<p><strong>Misdelivered notification:</strong> The order in which threads execute after receipt of a notifyAll() signal is unspecified. Consequently, an unrelated thread could start executing and discover that its condition predicate is satisfied. Consequently, it could resume execution despite being required to remain dormant.</p>\n\n<p><strong>Spurious wakeups:</strong> Certain Java Virtual Machine (JVM) implementations are vulnerable to spurious wakeups that result in waiting threads waking up even without a notification.</p>\n\n<p>For these reasons, programs must check the condition predicate after the wait() method returns. A while loop is the best choice for checking the condition predicate both before and after invoking wait().</p>\n\n<p>Similarly, the await() method of the Condition interface also must be invoked inside a loop. According to the Java API, Interface Condition</p>\n\n<blockquote>\n  <p>When waiting upon a Condition, a \"spurious wakeup\" is permitted to\n  occur, in general, as a concession to the underlying platform\n  semantics. This has little practical impact on most application\n  programs as a Condition should always be waited upon in a loop,\n  testing the state predicate that is being waited for. An\n  implementation is free to remove the possibility of spurious wakeups\n  but it is recommended that applications programmers always assume that\n  they can occur and so always wait in a loop.</p>\n</blockquote>\n\n<p>New code should use the java.util.concurrent.locks concurrency utilities in place of the wait/notify mechanism. However, legacy code that complies with the other requirements of this rule is permitted to depend on the wait/notify mechanism.</p>\n\n<p><strong>Noncompliant Code Example</strong>\nThis noncompliant code example invokes the wait() method inside a traditional if block and fails to check the postcondition after the notification is received. If the notification were accidental or malicious, the thread could wake up prematurely.</p>\n\n<pre><code>synchronized (object) {\n  if (&lt;condition does not hold&gt;) {\n    object.wait();\n  }\n  // Proceed when condition holds\n}\n</code></pre>\n\n<p><strong>Compliant Solution</strong>\nThis compliant solution calls the wait() method from within a while loop to check the condition both before and after the call to wait():</p>\n\n<pre><code>synchronized (object) {\n  while (&lt;condition does not hold&gt;) {\n    object.wait();\n  }\n  // Proceed when condition holds\n}\n</code></pre>\n\n<p>Invocations of the java.util.concurrent.locks.Condition.await() method also must be enclosed in a similar loop.</p>\n"},{"tags":[],"owner":{"account_id":3408167,"reputation":690,"user_id":2859238,"accept_rate":32,"display_name":"user104309"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1477752504,"creation_date":1477752504,"answer_id":40320268,"question_id":1038007,"body_markdown":"I think I got @Gray &#39;s answer.\r\n\r\nLet me try to rephrase that for newbies like me and request the experts to correct me if I am wrong.\r\n\r\n**Consumer synchronized block:**:\r\n\r\n    synchronized (queue) {\r\n        // this needs to be while\r\n        while (queue.isEmpty()) {\r\n           queue.wait();\r\n        }\r\n        queue.remove();\r\n    }\r\n\r\n**Producer synchronized block:**:\r\n\r\n    synchronized(queue) {\r\n     // producer produces inside the queue\r\n        queue.notify();\r\n    }\r\n\r\nAssume the following happens in the given order:\r\n\r\n1) consumer#2 gets inside the consumer `synchronized` block and is waiting since queue is empty.\r\n\r\n2) Now, producer obtains the lock on `queue`and inserts inside the queue and calls notify().\r\n\r\nNow,either consumer#1 can be chosen to run which is waiting for `queue` lock to enter the `synchronized` block for the first time \r\n\r\nor\r\n\r\nconsumer#2 can be chosen to run.\r\n\r\n3) say, consumer#1 is chosen to continue with the execution. When it checks the condition,it will be true and it will `remove()` from the queue.\r\n\r\n4) say,consumer#2 is proceeding from where it halted its execution (the line after the `wait()` method). If &#39;while&#39; condition is not there (instead an `if` condition), it will just proceed to call `remove()` which might result in an exception/unexpected behaviour.","title":"Why should wait() always be called inside a loop","body":"<p>I think I got @Gray 's answer.</p>\n\n<p>Let me try to rephrase that for newbies like me and request the experts to correct me if I am wrong.</p>\n\n<p><strong>Consumer synchronized block:</strong>:</p>\n\n<pre><code>synchronized (queue) {\n    // this needs to be while\n    while (queue.isEmpty()) {\n       queue.wait();\n    }\n    queue.remove();\n}\n</code></pre>\n\n<p><strong>Producer synchronized block:</strong>:</p>\n\n<pre><code>synchronized(queue) {\n // producer produces inside the queue\n    queue.notify();\n}\n</code></pre>\n\n<p>Assume the following happens in the given order:</p>\n\n<p>1) consumer#2 gets inside the consumer <code>synchronized</code> block and is waiting since queue is empty.</p>\n\n<p>2) Now, producer obtains the lock on <code>queue</code>and inserts inside the queue and calls notify().</p>\n\n<p>Now,either consumer#1 can be chosen to run which is waiting for <code>queue</code> lock to enter the <code>synchronized</code> block for the first time </p>\n\n<p>or</p>\n\n<p>consumer#2 can be chosen to run.</p>\n\n<p>3) say, consumer#1 is chosen to continue with the execution. When it checks the condition,it will be true and it will <code>remove()</code> from the queue.</p>\n\n<p>4) say,consumer#2 is proceeding from where it halted its execution (the line after the <code>wait()</code> method). If 'while' condition is not there (instead an <code>if</code> condition), it will just proceed to call <code>remove()</code> which might result in an exception/unexpected behaviour.</p>\n"},{"tags":[],"owner":{"account_id":75804,"reputation":94815,"user_id":217324,"accept_rate":96,"display_name":"Nathan Hughes"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654701873,"creation_date":1569596734,"answer_id":58137117,"question_id":1038007,"body_markdown":"Three things you will see people do:\r\n\r\n* Using wait without checking anything (BROKEN)\r\n\r\n* Using wait with a condition, using an if check first (BROKEN).\r\n\r\n* Using wait in a loop, where the loop test checks the condition (NOT BROKEN).\r\n\r\nNot appreciating these details about how wait and notify work leads people to choose the wrong approach:\r\n\r\n* One is that a thread doesn&#39;t remember notifications that happened before it got around to waiting. The notify and notifyAll methods only effect threads that are already waiting, if a thread isn&#39;t waiting at the time it is out of luck. \r\n\r\n* Another is that a thread releases the lock once it starts waiting. Once it gets a notification it re-acquires the lock and continues on where it left off. Releasing the lock means that thread does not know *anything* about the current state once it wakes back up, any number of other threads could have made changes since then. The check made before the thread started waiting doesn&#39;t tell you anything about what the state is currently.\r\n\r\nSo the first case, with no checking, makes your code vulnerable to race conditions. It might happen to work by accident if one thread has enough of a head start over another. Or you may have threads waiting forever. If you sprinkle in timeouts then you end up with slow code that sometimes doesn&#39;t do what you want.\r\n\r\nAdding a condition to check apart from the notification itself protects your code from these race conditions and gives your code a way to know what the state is even if the thread wasn&#39;t waiting at the right time. \r\n\r\nThe second case, with if-checks, is likely to work if you have only 2 threads. That puts a limit on the number of states things can get into and when you made faulty assumptions you don&#39;t get burned so badly. This is the situation for lots of toy example code exercises. The result is people come away thinking they understand, when they really don&#39;t. \r\n\r\nProtip: Real world code has more than two threads.\r\n\r\nUsing the loop lets you re-check the condition once you re-acquire the lock so that you&#39;re moving forward based on current state, not on stale state. \r\n\r\n\r\n\r\n","title":"Why should wait() always be called inside a loop","body":"<p>Three things you will see people do:</p>\n<ul>\n<li><p>Using wait without checking anything (BROKEN)</p>\n</li>\n<li><p>Using wait with a condition, using an if check first (BROKEN).</p>\n</li>\n<li><p>Using wait in a loop, where the loop test checks the condition (NOT BROKEN).</p>\n</li>\n</ul>\n<p>Not appreciating these details about how wait and notify work leads people to choose the wrong approach:</p>\n<ul>\n<li><p>One is that a thread doesn't remember notifications that happened before it got around to waiting. The notify and notifyAll methods only effect threads that are already waiting, if a thread isn't waiting at the time it is out of luck.</p>\n</li>\n<li><p>Another is that a thread releases the lock once it starts waiting. Once it gets a notification it re-acquires the lock and continues on where it left off. Releasing the lock means that thread does not know <em>anything</em> about the current state once it wakes back up, any number of other threads could have made changes since then. The check made before the thread started waiting doesn't tell you anything about what the state is currently.</p>\n</li>\n</ul>\n<p>So the first case, with no checking, makes your code vulnerable to race conditions. It might happen to work by accident if one thread has enough of a head start over another. Or you may have threads waiting forever. If you sprinkle in timeouts then you end up with slow code that sometimes doesn't do what you want.</p>\n<p>Adding a condition to check apart from the notification itself protects your code from these race conditions and gives your code a way to know what the state is even if the thread wasn't waiting at the right time.</p>\n<p>The second case, with if-checks, is likely to work if you have only 2 threads. That puts a limit on the number of states things can get into and when you made faulty assumptions you don't get burned so badly. This is the situation for lots of toy example code exercises. The result is people come away thinking they understand, when they really don't.</p>\n<p>Protip: Real world code has more than two threads.</p>\n<p>Using the loop lets you re-check the condition once you re-acquire the lock so that you're moving forward based on current state, not on stale state.</p>\n"},{"tags":[],"owner":{"account_id":14401011,"reputation":43,"user_id":10402659,"display_name":"Aravind Sundarraj"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1578271537,"creation_date":1578271537,"answer_id":59605500,"question_id":1038007,"body_markdown":"In simple words,\r\n\r\n&#39;if&#39; is a conditional statement , once condition is satisfied remaining block of code will get executed.\r\n\r\n&#39;while&#39; is a loop which going check the condition unless condition  is not satisfied.\r\n","title":"Why should wait() always be called inside a loop","body":"<p>In simple words,</p>\n\n<p>'if' is a conditional statement , once condition is satisfied remaining block of code will get executed.</p>\n\n<p>'while' is a loop which going check the condition unless condition  is not satisfied.</p>\n"},{"tags":[],"owner":{"account_id":2126071,"reputation":812,"user_id":1888207,"accept_rate":50,"display_name":"gaurav414u"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1586602400,"creation_date":1586602400,"answer_id":61155599,"question_id":1038007,"body_markdown":"Before getting to the answer, lets see how wait is probably implemented.\n\n    wait(mutex) {\n       // automatically release mutex\n       // and go on wait queue\n    \n       // ... wait ... wait ... wait ...\n    \n       // remove from queue\n       // re-acquire mutex\n       // exit the wait operation\n    }\n\nIn your example `mutex` is the `obj` with the assumption that your code is running inside `synchronized(obj) { }` block.\n\n&gt; A mutex is called as monitor in Java [some subtle differences though]\n\n## A concurrency example using condition variable with `if`\n\n    synchronized(obj) {\n      if (!condition) { \n        obj.wait(); \n      }\n      // Do some stuff related to condition\n      condition = false;\n    }\n\n\nLets say we have 2 threads. **Thread 1** and **Thread 2**.\nLets see some states along the timeline.\n## at t = x\n**Thread 1 state**:\n\nwaiting on `... wait ... wait ... wait ..`\n\n**Thread 2 state**:\n\nJust entered the synchronised section, since as per the thread 1&#39;s state, the mutex/monitor is released. \n\n&gt; You can read more about wait() here [java.sun.com/javase/6/docs/api/java/lang/Object.html#wait(long)][1].\n\nThis is the only thing that is tricky to understand. When 1 thread is inside the synchronized block. Another thread can still enter the synchronized block because wait() causes the monitor/mutex to be released.\n\n  [1]: http://java.sun.com/javase/6/docs/api/java/lang/Object.html#wait(long)\n\nThread 2 is about to read `if (!condition)` statement.\n\n## at t = x + 1\nnotify() is triggered by some thread on this mutex/monitor.\n\n`condition` becomes `true`\n\n### Thread 1 state:\n\nWaiting at `re-acquire mutex`, [Since thread-2 has the lock now]\n\n### Thread 2 state: \nDoesn&#39;t go inside if condition and marks the `condition = false`.\n\n## at t = x + 2\n\n### Thread 1 state:\nExits the wait operation and about to mark `condition = false`.\n\n\n**This state is inconsistent** as `condition` is supposed to be `true` but is `false` already, because **thread 2** marked it `false` previously.\n\nAnd thats the reason, `while` is required instead of `if`. As `while` would trigger the condition to be checked again for `thread 1` and thread 1 will begin waiting again.\n\n## Result\nIn order to avoid this inconsistency the correct code seems to be like this:\n\n    synchronized(obj) {\n      while (!condition) { \n        obj.wait(); \n      }\n      // Do some stuff related to condition\n      condition = false;\n    }","title":"Why should wait() always be called inside a loop","body":"<p>Before getting to the answer, lets see how wait is probably implemented.</p>\n<pre><code>wait(mutex) {\n   // automatically release mutex\n   // and go on wait queue\n\n   // ... wait ... wait ... wait ...\n\n   // remove from queue\n   // re-acquire mutex\n   // exit the wait operation\n}\n</code></pre>\n<p>In your example <code>mutex</code> is the <code>obj</code> with the assumption that your code is running inside <code>synchronized(obj) { }</code> block.</p>\n<blockquote>\n<p>A mutex is called as monitor in Java [some subtle differences though]</p>\n</blockquote>\n<h2>A concurrency example using condition variable with <code>if</code></h2>\n<pre><code>synchronized(obj) {\n  if (!condition) { \n    obj.wait(); \n  }\n  // Do some stuff related to condition\n  condition = false;\n}\n</code></pre>\n<p>Lets say we have 2 threads. <strong>Thread 1</strong> and <strong>Thread 2</strong>.\nLets see some states along the timeline.</p>\n<h2>at t = x</h2>\n<p><strong>Thread 1 state</strong>:</p>\n<p>waiting on <code>... wait ... wait ... wait ..</code></p>\n<p><strong>Thread 2 state</strong>:</p>\n<p>Just entered the synchronised section, since as per the thread 1's state, the mutex/monitor is released.</p>\n<blockquote>\n<p>You can read more about wait() here <a href=\"http://java.sun.com/javase/6/docs/api/java/lang/Object.html#wait(long)\" rel=\"nofollow noreferrer\">java.sun.com/javase/6/docs/api/java/lang/Object.html#wait(long)</a>.</p>\n</blockquote>\n<p>This is the only thing that is tricky to understand. When 1 thread is inside the synchronized block. Another thread can still enter the synchronized block because wait() causes the monitor/mutex to be released.</p>\n<p>Thread 2 is about to read <code>if (!condition)</code> statement.</p>\n<h2>at t = x + 1</h2>\n<p>notify() is triggered by some thread on this mutex/monitor.</p>\n<p><code>condition</code> becomes <code>true</code></p>\n<h3>Thread 1 state:</h3>\n<p>Waiting at <code>re-acquire mutex</code>, [Since thread-2 has the lock now]</p>\n<h3>Thread 2 state:</h3>\n<p>Doesn't go inside if condition and marks the <code>condition = false</code>.</p>\n<h2>at t = x + 2</h2>\n<h3>Thread 1 state:</h3>\n<p>Exits the wait operation and about to mark <code>condition = false</code>.</p>\n<p><strong>This state is inconsistent</strong> as <code>condition</code> is supposed to be <code>true</code> but is <code>false</code> already, because <strong>thread 2</strong> marked it <code>false</code> previously.</p>\n<p>And thats the reason, <code>while</code> is required instead of <code>if</code>. As <code>while</code> would trigger the condition to be checked again for <code>thread 1</code> and thread 1 will begin waiting again.</p>\n<h2>Result</h2>\n<p>In order to avoid this inconsistency the correct code seems to be like this:</p>\n<pre><code>synchronized(obj) {\n  while (!condition) { \n    obj.wait(); \n  }\n  // Do some stuff related to condition\n  condition = false;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4555074,"reputation":138,"user_id":3699039,"accept_rate":0,"display_name":"Muhammad_08"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691640288,"creation_date":1691640288,"answer_id":76872592,"question_id":1038007,"body_markdown":"If i was able to understand all above you mentioned this part i could not able to understand. In both case if its if block it will goes to wait if there’s while it also gonna waiting state\r\n**And thats the reason, while is required instead of if. As while would trigger the condition to be checked again for thread 1 and thread 1 will begin waiting again.**","title":"Why should wait() always be called inside a loop","body":"<p>If i was able to understand all above you mentioned this part i could not able to understand. In both case if its if block it will goes to wait if there’s while it also gonna waiting state\n<strong>And thats the reason, while is required instead of if. As while would trigger the condition to be checked again for thread 1 and thread 1 will begin waiting again.</strong></p>\n"}],"owner":{"account_id":35904,"reputation":23169,"user_id":102040,"accept_rate":66,"display_name":"Geek"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65390,"favorite_count":0,"down_vote_count":1,"up_vote_count":84,"answer_count":12,"score":83,"last_activity_date":1691640288,"creation_date":1245845837,"question_id":1038007,"body_markdown":"I have read that we should always call a `wait()` from within a loop:\r\n\r\n    while (!condition) { obj.wait(); }\r\n\r\n\r\nIt works fine without a loop so why is that?","title":"Why should wait() always be called inside a loop","body":"<p>I have read that we should always call a <code>wait()</code> from within a loop:</p>\n\n<pre><code>while (!condition) { obj.wait(); }\n</code></pre>\n\n<p>It works fine without a loop so why is that?</p>\n"},{"tags":["java","switch-statement","instanceof"],"comments":[{"owner":{"account_id":63531,"reputation":3979,"user_id":188014,"accept_rate":89,"display_name":"vickirk"},"score":7,"creation_date":1302171182,"post_id":5579309,"comment_id":6348141,"body_markdown":"If you really feel you need a switch you could hash the class name to an int and use that, watch out for possible clashes though. Adding as comment rather than an answer as I don&#39;t like the idea of this actually been used.  Maybe what you really need is the visitor pattern.","body":"If you really feel you need a switch you could hash the class name to an int and use that, watch out for possible clashes though. Adding as comment rather than an answer as I don&#39;t like the idea of this actually been used.  Maybe what you really need is the visitor pattern."},{"owner":{"account_id":1816520,"reputation":1969,"user_id":1651498,"display_name":"Mitja"},"score":1,"creation_date":1401725679,"post_id":5579309,"comment_id":36985000,"body_markdown":"As of java 7 you could even switch on the fully qualified class name to avoid such hash clashes as @vickirk pointed out, but it&#39;s still ugly.","body":"As of java 7 you could even switch on the fully qualified class name to avoid such hash clashes as @vickirk pointed out, but it&#39;s still ugly."},{"owner":{"account_id":5644665,"reputation":35941,"user_id":4467208,"accept_rate":51,"display_name":"Murat Karag&#246;z"},"score":0,"creation_date":1553700387,"post_id":5579309,"comment_id":97483947,"body_markdown":"It is possible with [the classname as an Enum value](https://stackoverflow.com/a/55380782/4467208)","body":"It is possible with <a href=\"https://stackoverflow.com/a/55380782/4467208\">the classname as an Enum value</a>"}],"answers":[{"tags":[],"owner":{"account_id":276297,"reputation":4677,"user_id":569659,"accept_rate":80,"display_name":"mark-cs"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1302171894,"creation_date":1302170761,"answer_id":5579346,"question_id":5579309,"body_markdown":"You can&#39;t a switch only works with the byte, short, char, int, String and enumerated types (and the object versions of the primitives, it also depends on your java version, Strings can be `switch`ed on in java 7)","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>You can't a switch only works with the byte, short, char, int, String and enumerated types (and the object versions of the primitives, it also depends on your java version, Strings can be <code>switch</code>ed on in java 7)</p>\n"},{"tags":[],"owner":{"account_id":205326,"reputation":13432,"user_id":454017,"accept_rate":90,"display_name":"Carlo V. Dango"},"down_vote_count":1,"up_vote_count":31,"is_accepted":false,"score":30,"last_activity_date":1363076444,"creation_date":1302170801,"answer_id":5579355,"question_id":5579309,"body_markdown":"You can&#39;t. The `switch` statement can only contain `case` statements which are compile time constants and which evaluate to an integer (Up to Java 6 and a string in Java 7). \r\n\r\nWhat you are looking for is called &quot;pattern matching&quot; in functional programming.\r\n\r\nSee also https://stackoverflow.com/questions/2790144/avoiding-instanceof-in-java","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>You can't. The <code>switch</code> statement can only contain <code>case</code> statements which are compile time constants and which evaluate to an integer (Up to Java 6 and a string in Java 7). </p>\n\n<p>What you are looking for is called \"pattern matching\" in functional programming.</p>\n\n<p>See also <a href=\"https://stackoverflow.com/questions/2790144/avoiding-instanceof-in-java\">Avoiding instanceof in Java</a></p>\n"},{"tags":[],"owner":{"account_id":263812,"reputation":7348,"user_id":549641,"display_name":"jmg"},"down_vote_count":10,"up_vote_count":280,"is_accepted":true,"score":270,"last_activity_date":1302171196,"creation_date":1302170964,"answer_id":5579385,"question_id":5579309,"body_markdown":"This is a typical scenario where subtype polymorphism helps. Do the following\r\n\r\n    interface I {\r\n      void do();\r\n    }\r\n\r\n    class A implements I { void do() { doA() } ... }\r\n    class B implements I { void do() { doB() } ... }\r\n    class C implements I { void do() { doC() } ... }\r\n    \r\nThen you can simply call `do()` on `this`. \r\n\r\nIf you are not free to change `A`, `B`, and `C`, you could apply the visitor pattern to achieve the same.\r\n","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>This is a typical scenario where subtype polymorphism helps. Do the following</p>\n\n<pre><code>interface I {\n  void do();\n}\n\nclass A implements I { void do() { doA() } ... }\nclass B implements I { void do() { doB() } ... }\nclass C implements I { void do() { doC() } ... }\n</code></pre>\n\n<p>Then you can simply call <code>do()</code> on <code>this</code>. </p>\n\n<p>If you are not free to change <code>A</code>, <code>B</code>, and <code>C</code>, you could apply the visitor pattern to achieve the same.</p>\n"},{"tags":[],"owner":{"account_id":331053,"reputation":1135,"user_id":655504,"accept_rate":100,"display_name":"Andreas Johansson"},"down_vote_count":2,"up_vote_count":8,"is_accepted":false,"score":6,"last_activity_date":1302170968,"creation_date":1302170968,"answer_id":5579389,"question_id":5579309,"body_markdown":"Nope, there is no way to do this. What you might want to do is however to consider **[Polymorphism][1]** as a way to handle these kind of problems.\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming &quot;Polymorphism&quot;","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>Nope, there is no way to do this. What you might want to do is however to consider <strong><a href=\"http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming\" rel=\"noreferrer\" title=\"Polymorphism\">Polymorphism</a></strong> as a way to handle these kind of problems.</p>\n"},{"tags":[],"owner":{"account_id":261142,"reputation":47118,"user_id":545127,"accept_rate":69,"display_name":"Raedwald"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1302171054,"creation_date":1302171054,"answer_id":5579405,"question_id":5579309,"body_markdown":"Using switch statements like this is not the object oriented way. You should instead use the power of _polymorphism_. Simply write\r\n\r\n    this.do()\r\n\r\nHaving previously set up a base class:\r\n\r\n    abstract class Base {\r\n       abstract void do();\r\n       ...\r\n    }\r\n\r\nwhich is the base class for `A`, `B` and `C`:\r\n\r\n    class A extends Base {\r\n        void do() { this.doA() }\r\n    }\r\n\r\n    class B extends Base {\r\n        void do() { this.doB() }\r\n    }\r\n\r\n    class C extends Base {\r\n        void do() { this.doC() }\r\n    }\r\n","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>Using switch statements like this is not the object oriented way. You should instead use the power of <em>polymorphism</em>. Simply write</p>\n\n<pre><code>this.do()\n</code></pre>\n\n<p>Having previously set up a base class:</p>\n\n<pre><code>abstract class Base {\n   abstract void do();\n   ...\n}\n</code></pre>\n\n<p>which is the base class for <code>A</code>, <code>B</code> and <code>C</code>:</p>\n\n<pre><code>class A extends Base {\n    void do() { this.doA() }\n}\n\nclass B extends Base {\n    void do() { this.doB() }\n}\n\nclass C extends Base {\n    void do() { this.doC() }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":45949,"reputation":1954,"user_id":135644,"accept_rate":100,"display_name":"Nico"},"down_vote_count":3,"up_vote_count":126,"is_accepted":false,"score":123,"last_activity_date":1302176748,"creation_date":1302176338,"answer_id":5580433,"question_id":5579309,"body_markdown":"if you absolutely cannot code to an interface, then you could use an enum as an intermediary:\r\n\r\n   \r\n\tpublic A() {\r\n\t\t\r\n\t\tCLAZZ z = CLAZZ.valueOf(this.getClass().getSimpleName());\r\n\t\tswitch (z) {\r\n\t\tcase A:\r\n\t\t\tdoA();\r\n\t\t\tbreak;\r\n\t\tcase B:\r\n\t\t\tdoB();\r\n\t\t\tbreak;\r\n\t\tcase C:\r\n\t\t\tdoC();\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\t\r\n\tenum CLAZZ {\r\n\t\tA,B,C;\r\n\t\t\r\n\t}","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>if you absolutely cannot code to an interface, then you could use an enum as an intermediary:</p>\n\n<pre><code>public A() {\n\n    CLAZZ z = CLAZZ.valueOf(this.getClass().getSimpleName());\n    switch (z) {\n    case A:\n        doA();\n        break;\n    case B:\n        doB();\n        break;\n    case C:\n        doC();\n        break;\n    }\n}\n\n\nenum CLAZZ {\n    A,B,C;\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":371771,"reputation":1901,"user_id":720489,"accept_rate":83,"display_name":"se.solovyev"},"down_vote_count":10,"up_vote_count":51,"is_accepted":false,"score":41,"last_activity_date":1318241244,"creation_date":1318241244,"answer_id":7711220,"question_id":5579309,"body_markdown":"Just in case if someone will read it:\r\n\r\nThe BEST solution in java is : \r\n\r\n    public enum Action { \r\n    \ta{\r\n    \t\tvoid doAction(...){\r\n    \t\t\t// some code\r\n    \t\t}\r\n    \t\t\r\n    \t}, \r\n    \tb{\r\n    \t\tvoid doAction(...){\r\n    \t\t\t// some code\r\n    \t\t}\r\n    \t\t\r\n    \t}, \r\n    \tc{\r\n    \t\tvoid doAction(...){\r\n    \t\t\t// some code\r\n    \t\t}\r\n    \t\t\r\n    \t};\r\n    \r\n    \tabstract void doAction (...);\r\n    }\r\n\r\nThe GREAT benefits of such pattern are:\r\n\r\n 1. You just do it like (NO switches at all):\r\n\r\n        void someFunction ( Action action ) {\r\n            action.doAction(...);\t\r\n        }\r\n\r\n 2. In case if you add new Action called &quot;d&quot; you MUST imlement doAction(...) method\r\n\r\nNOTE: This pattern is described in Joshua&#39;s Bloch &quot;Effective Java (2nd Edition)&quot;\r\n\r\n","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>Just in case if someone will read it:</p>\n\n<p>The BEST solution in java is : </p>\n\n<pre><code>public enum Action { \n    a{\n        void doAction(...){\n            // some code\n        }\n\n    }, \n    b{\n        void doAction(...){\n            // some code\n        }\n\n    }, \n    c{\n        void doAction(...){\n            // some code\n        }\n\n    };\n\n    abstract void doAction (...);\n}\n</code></pre>\n\n<p>The GREAT benefits of such pattern are:</p>\n\n<ol>\n<li><p>You just do it like (NO switches at all):</p>\n\n<pre><code>void someFunction ( Action action ) {\n    action.doAction(...);   \n}\n</code></pre></li>\n<li><p>In case if you add new Action called \"d\" you MUST imlement doAction(...) method</p></li>\n</ol>\n\n<p>NOTE: This pattern is described in Joshua's Bloch \"Effective Java (2nd Edition)\"</p>\n"},{"tags":[],"owner":{"account_id":2066132,"reputation":45,"user_id":1841609,"display_name":"Joeri"},"down_vote_count":3,"up_vote_count":5,"is_accepted":false,"score":2,"last_activity_date":1360332859,"creation_date":1353493548,"answer_id":13491175,"question_id":5579309,"body_markdown":"How about this ?\r\n \r\n\r\n\r\n    switch (this.name) \r\n    {\r\n      case &quot;A&quot;:\r\n        doA();\r\n        break;\r\n      case &quot;B&quot;:\r\n        doB();\r\n        break;\r\n      case &quot;C&quot;:\r\n        doC();\r\n        break;\r\n      default:\r\n        console.log(&#39;Undefined instance&#39;);\r\n    }\r\n\r\n\r\n","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>How about this ?</p>\n\n<pre><code>switch (this.name) \n{\n  case \"A\":\n    doA();\n    break;\n  case \"B\":\n    doB();\n    break;\n  case \"C\":\n    doC();\n    break;\n  default:\n    console.log('Undefined instance');\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2577835,"reputation":11,"user_id":2235131,"display_name":"BeToken"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1364889791,"creation_date":1364889791,"answer_id":15759039,"question_id":5579309,"body_markdown":"I think there are reasons to use a switch statement. If you are using xText generated Code perhaps. Or another kind of EMF generated classes.\r\n\r\n\r\n    instance.getClass().getName();\r\nreturns a String of the Class Implementation Name. i.e:\r\n    org.eclipse.emf.ecore.util.EcoreUtil\r\n\r\n\r\n    instance.getClass().getSimpleName();\r\nreturns the simple represenation i.e:\r\n    EcoreUtil","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>I think there are reasons to use a switch statement. If you are using xText generated Code perhaps. Or another kind of EMF generated classes.</p>\n\n<pre><code>instance.getClass().getName();\n</code></pre>\n\n<p>returns a String of the Class Implementation Name. i.e:\n    org.eclipse.emf.ecore.util.EcoreUtil</p>\n\n<pre><code>instance.getClass().getSimpleName();\n</code></pre>\n\n<p>returns the simple represenation i.e:\n    EcoreUtil</p>\n"},{"tags":[],"owner":{"account_id":982989,"reputation":4440,"user_id":1002222,"accept_rate":96,"display_name":"Gaʀʀʏ"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1490367485,"creation_date":1381247150,"answer_id":19252352,"question_id":5579309,"body_markdown":"If you can manipulate the common interface, you could do add in an enum and have each class return a unique value. You won&#39;t need instanceof or a visitor pattern.\r\n\r\nFor me, the logic needed to be in the written in the switch statement, not the object itself. This was my solution:\r\n\r\n`ClassA, ClassB, and ClassC implement CommonClass`\r\n\r\nInterface:\r\n\r\n    public interface CommonClass {\r\n       MyEnum getEnumType();\r\n    }\r\n\r\nEnum:\r\n\r\n    public enum MyEnum {\r\n      ClassA(0), ClassB(1), ClassC(2);\r\n    \r\n      private int value;\r\n    \r\n      private MyEnum(final int value) {\r\n        this.value = value;\r\n      }\r\n    \r\n      public int getValue() {\r\n        return value;\r\n      }\r\n\r\nImpl:\r\n\r\n    ...\r\n      switch(obj.getEnumType())\r\n      {\r\n    \tcase MyEnum.ClassA:\r\n    \t  ClassA classA = (ClassA) obj;\r\n    \tbreak;\r\n\r\n    \tcase MyEnum.ClassB:\r\n    \t  ClassB classB = (ClassB) obj;\r\n    \tbreak;\r\n\r\n    \tcase MyEnum.ClassC:\r\n    \t  ClassC classC = (ClassC) obj;\r\n    \tbreak;\r\n      }\r\n    ...\r\n\r\nIf you are on java 7, you can put string values for the enum and the switch case block will still work.","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>If you can manipulate the common interface, you could do add in an enum and have each class return a unique value. You won't need instanceof or a visitor pattern.</p>\n\n<p>For me, the logic needed to be in the written in the switch statement, not the object itself. This was my solution:</p>\n\n<p><code>ClassA, ClassB, and ClassC implement CommonClass</code></p>\n\n<p>Interface:</p>\n\n<pre><code>public interface CommonClass {\n   MyEnum getEnumType();\n}\n</code></pre>\n\n<p>Enum:</p>\n\n<pre><code>public enum MyEnum {\n  ClassA(0), ClassB(1), ClassC(2);\n\n  private int value;\n\n  private MyEnum(final int value) {\n    this.value = value;\n  }\n\n  public int getValue() {\n    return value;\n  }\n</code></pre>\n\n<p>Impl:</p>\n\n<pre><code>...\n  switch(obj.getEnumType())\n  {\n    case MyEnum.ClassA:\n      ClassA classA = (ClassA) obj;\n    break;\n\n    case MyEnum.ClassB:\n      ClassB classB = (ClassB) obj;\n    break;\n\n    case MyEnum.ClassC:\n      ClassC classC = (ClassC) obj;\n    break;\n  }\n...\n</code></pre>\n\n<p>If you are on java 7, you can put string values for the enum and the switch case block will still work.</p>\n"},{"tags":[],"owner":{"account_id":3550689,"reputation":318,"user_id":2965659,"display_name":"JohnK"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1393498223,"creation_date":1393498223,"answer_id":22066250,"question_id":5579309,"body_markdown":"I know this is very late but for future readers ... \r\n\r\nBeware of the approaches above that are based only on the *name* of the class of **A**, **B**, **C** ... : \r\n\r\nUnless you can guarantee that **A**, **B**, **C** ... (all subclasses or implementers of **Base**) are **final** then subclasses of **A**, **B**, **C** ... will not be dealt with.\r\n\r\nEven though the **if, elseif, elseif ..**  approach is slower for large number of subclasses/implementers, it is more accurate.\r\n","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>I know this is very late but for future readers ... </p>\n\n<p>Beware of the approaches above that are based only on the <em>name</em> of the class of <strong>A</strong>, <strong>B</strong>, <strong>C</strong> ... : </p>\n\n<p>Unless you can guarantee that <strong>A</strong>, <strong>B</strong>, <strong>C</strong> ... (all subclasses or implementers of <strong>Base</strong>) are <strong>final</strong> then subclasses of <strong>A</strong>, <strong>B</strong>, <strong>C</strong> ... will not be dealt with.</p>\n\n<p>Even though the <strong>if, elseif, elseif ..</strong>  approach is slower for large number of subclasses/implementers, it is more accurate.</p>\n"},{"tags":[],"owner":{"account_id":20288,"reputation":3490,"user_id":48340,"display_name":"Pavel"},"down_vote_count":1,"up_vote_count":21,"is_accepted":false,"score":20,"last_activity_date":1599878671,"creation_date":1441780654,"answer_id":32472488,"question_id":5579309,"body_markdown":"As discussed in the top answers, the traditional OOP approach is to use polymorphism instead of switch. There is even a well documented refactoring pattern for this trick: [Replace Conditional with Polymorphism](http://www.refactoring.com/catalog/replaceConditionalWithPolymorphism.html). Whenever I reach for this approach, I like to also implement a [Null object](http://refactoring.com/catalog/introduceNullObject.html) to provide the default behaviour.\r\n\r\nStarting with Java 8, we can use lambdas and generics to give us something functional programmers are very familiar with: pattern matching. It&#39;s not a core language feature but the [VAVR Library](https://www.vavr.io/) - formerly Javaslang library provides one implementation. Example from the docs:\r\n\r\n    Match.ofType(Number.class)\r\n        .caze((Integer i) -&gt; i)\r\n        .caze((String s) -&gt; new BigDecimal(s))\r\n        .orElse(() -&gt; -1)\r\n        .apply(1.0d); // result: -1\r\n\r\nIt&#39;s not the most natural paradigm in the Java world so use it with caution. While the generic methods will save you from having to typecast the matched value, we&#39;re missing a standard way to decompose the matched object as with [Scala&#39;s case classes](http://docs.scala-lang.org/tutorials/tour/case-classes.html) for example.","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>As discussed in the top answers, the traditional OOP approach is to use polymorphism instead of switch. There is even a well documented refactoring pattern for this trick: <a href=\"http://www.refactoring.com/catalog/replaceConditionalWithPolymorphism.html\" rel=\"nofollow noreferrer\">Replace Conditional with Polymorphism</a>. Whenever I reach for this approach, I like to also implement a <a href=\"http://refactoring.com/catalog/introduceNullObject.html\" rel=\"nofollow noreferrer\">Null object</a> to provide the default behaviour.</p>\n<p>Starting with Java 8, we can use lambdas and generics to give us something functional programmers are very familiar with: pattern matching. It's not a core language feature but the <a href=\"https://www.vavr.io/\" rel=\"nofollow noreferrer\">VAVR Library</a> - formerly Javaslang library provides one implementation. Example from the docs:</p>\n<pre><code>Match.ofType(Number.class)\n    .caze((Integer i) -&gt; i)\n    .caze((String s) -&gt; new BigDecimal(s))\n    .orElse(() -&gt; -1)\n    .apply(1.0d); // result: -1\n</code></pre>\n<p>It's not the most natural paradigm in the Java world so use it with caution. While the generic methods will save you from having to typecast the matched value, we're missing a standard way to decompose the matched object as with <a href=\"http://docs.scala-lang.org/tutorials/tour/case-classes.html\" rel=\"nofollow noreferrer\">Scala's case classes</a> for example.</p>\n"},{"tags":[],"owner":{"account_id":1435086,"reputation":4492,"user_id":2323964,"accept_rate":87,"display_name":"Novaterata"},"down_vote_count":0,"up_vote_count":77,"is_accepted":false,"score":77,"last_activity_date":1608504945,"creation_date":1488297014,"answer_id":42513186,"question_id":5579309,"body_markdown":"Create a `Map` where the key is `Class&lt;?&gt;` and the value is an expression (lambda or similar). Consider:\r\n\r\n&lt;!--  language: java --&gt;\r\n\r\n    Map&lt;Class,Runnable&gt; doByClass = new HashMap&lt;&gt;();\r\n    doByClass.put(Foo.class, () -&gt; doAClosure(this));\r\n    doByClass.put(Bar.class, this::doBMethod);\r\n    doByClass.put(Baz.class, new MyCRunnable());\r\n\r\n    // of course, refactor this to only initialize once\r\n    \r\n    doByClass.get(getClass()).run();\r\n\r\nIf you need checked exceptions than implement a `FunctionalInterface` that throws the `Exception` and use that instead of `Runnable`.\r\n\r\n---\r\n\r\nHere&#39;s a real-word before-and-after showing how this approach can simplify code.\r\n\r\nThe code before refactoring to a map:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    private Object unmarshall(\r\n      final Property&lt;?&gt; property, final Object configValue ) {\r\n      final Object result;\r\n      final String value = configValue.toString();\r\n    \r\n      if( property instanceof SimpleDoubleProperty ) {\r\n        result = Double.parseDouble( value );\r\n      }\r\n      else if( property instanceof SimpleFloatProperty ) {\r\n        result = Float.parseFloat( value );\r\n      }\r\n      else if( property instanceof SimpleBooleanProperty ) {\r\n        result = Boolean.parseBoolean( value );\r\n      }\r\n      else if( property instanceof SimpleFileProperty ) {\r\n        result = new File( value );\r\n      }\r\n      else {\r\n        result = value;\r\n      }\r\n    \r\n      return result;\r\n    }\r\n\r\nThe code after refactoring to a map:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    private final Map&lt;Class&lt;?&gt;, Function&lt;String, Object&gt;&gt; UNMARSHALL = \r\n    Map.of(\r\n      SimpleBooleanProperty.class, Boolean::parseBoolean,\r\n      SimpleDoubleProperty.class, Double::parseDouble,\r\n      SimpleFloatProperty.class, Float::parseFloat,\r\n      SimpleFileProperty.class, File::new\r\n    );\r\n    \r\n    private Object unmarshall(\r\n      final Property&lt;?&gt; property, final Object configValue ) {\r\n      return UNMARSHALL\r\n        .getOrDefault( property.getClass(), ( v ) -&gt; v )\r\n        .apply( configValue.toString() );\r\n    }\r\n\r\nThis avoids repetition, eliminates nearly all branching statements, and simplifies maintenance.\r\n","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>Create a <code>Map</code> where the key is <code>Class&lt;?&gt;</code> and the value is an expression (lambda or similar). Consider:</p>\n\n<pre><code>Map&lt;Class,Runnable&gt; doByClass = new HashMap&lt;&gt;();\ndoByClass.put(Foo.class, () -&gt; doAClosure(this));\ndoByClass.put(Bar.class, this::doBMethod);\ndoByClass.put(Baz.class, new MyCRunnable());\n\n// of course, refactor this to only initialize once\n\ndoByClass.get(getClass()).run();\n</code></pre>\n<p>If you need checked exceptions than implement a <code>FunctionalInterface</code> that throws the <code>Exception</code> and use that instead of <code>Runnable</code>.</p>\n<hr />\n<p>Here's a real-word before-and-after showing how this approach can simplify code.</p>\n<p>The code before refactoring to a map:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private Object unmarshall(\n  final Property&lt;?&gt; property, final Object configValue ) {\n  final Object result;\n  final String value = configValue.toString();\n\n  if( property instanceof SimpleDoubleProperty ) {\n    result = Double.parseDouble( value );\n  }\n  else if( property instanceof SimpleFloatProperty ) {\n    result = Float.parseFloat( value );\n  }\n  else if( property instanceof SimpleBooleanProperty ) {\n    result = Boolean.parseBoolean( value );\n  }\n  else if( property instanceof SimpleFileProperty ) {\n    result = new File( value );\n  }\n  else {\n    result = value;\n  }\n\n  return result;\n}\n</code></pre>\n<p>The code after refactoring to a map:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private final Map&lt;Class&lt;?&gt;, Function&lt;String, Object&gt;&gt; UNMARSHALL = \nMap.of(\n  SimpleBooleanProperty.class, Boolean::parseBoolean,\n  SimpleDoubleProperty.class, Double::parseDouble,\n  SimpleFloatProperty.class, Float::parseFloat,\n  SimpleFileProperty.class, File::new\n);\n\nprivate Object unmarshall(\n  final Property&lt;?&gt; property, final Object configValue ) {\n  return UNMARSHALL\n    .getOrDefault( property.getClass(), ( v ) -&gt; v )\n    .apply( configValue.toString() );\n}\n</code></pre>\n<p>This avoids repetition, eliminates nearly all branching statements, and simplifies maintenance.</p>\n"},{"tags":[],"owner":{"account_id":2374648,"reputation":619,"user_id":2078368,"display_name":"Sergey Krivenkov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1490946588,"creation_date":1490946588,"answer_id":43135351,"question_id":5579309,"body_markdown":"If you need to &quot;switch&quot; thru the class type of &quot;this&quot; object, this answer is the best https://stackoverflow.com/a/5579385/2078368\r\n\r\nBut if you need to apply &quot;switch&quot; to any other variable. I would suggest another solution. Define following interface:\r\n\r\n    public interface ClassTypeInterface {\r\n        public String getType();\r\n    }\r\n\r\nImplement this interface in every class you want to &quot;switch&quot;. Example:\r\n\r\n    public class A extends Something implements ClassTypeInterface {\r\n    \r\n        public final static String TYPE = &quot;A&quot;;\r\n    \r\n        @Override\r\n        public String getType() {\r\n            return TYPE;\r\n        }\r\n    }\r\n\r\nAfter that you can use it in following way:\r\n\r\n    switch (var.getType()) {\r\n        case A.TYPE: {\r\n            break;\r\n        }\r\n        case B.TYPE: {\r\n            break;\r\n        }\r\n        ...\r\n    }\r\n\r\nThe only thing you should care about - keep the &quot;types&quot; unique across all the classes implementing the ClassTypeInterface. It&#39;s not a big problem, because in case of any intersection you receive a compile-time error for the &quot;switch-case&quot; statement.\r\n","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>If you need to \"switch\" thru the class type of \"this\" object, this answer is the best <a href=\"https://stackoverflow.com/a/5579385/2078368\">https://stackoverflow.com/a/5579385/2078368</a></p>\n\n<p>But if you need to apply \"switch\" to any other variable. I would suggest another solution. Define following interface:</p>\n\n<pre><code>public interface ClassTypeInterface {\n    public String getType();\n}\n</code></pre>\n\n<p>Implement this interface in every class you want to \"switch\". Example:</p>\n\n<pre><code>public class A extends Something implements ClassTypeInterface {\n\n    public final static String TYPE = \"A\";\n\n    @Override\n    public String getType() {\n        return TYPE;\n    }\n}\n</code></pre>\n\n<p>After that you can use it in following way:</p>\n\n<pre><code>switch (var.getType()) {\n    case A.TYPE: {\n        break;\n    }\n    case B.TYPE: {\n        break;\n    }\n    ...\n}\n</code></pre>\n\n<p>The only thing you should care about - keep the \"types\" unique across all the classes implementing the ClassTypeInterface. It's not a big problem, because in case of any intersection you receive a compile-time error for the \"switch-case\" statement.</p>\n"},{"tags":[],"owner":{"account_id":8468157,"reputation":6871,"user_id":6351733,"accept_rate":22,"display_name":"Maurice"},"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1498480719,"creation_date":1498480719,"answer_id":44759944,"question_id":5579309,"body_markdown":"there is an even simpler way of emulating a switch structure that uses instanceof, you do this by creating a code block in your method and naming it with a label. Then you use if structures to emulate the case statements. If a case is true then you use the break LABEL_NAME to get out of your makeshift switch structure.\r\n\r\n            DEFINE_TYPE:\r\n            {\r\n                if (a instanceof x){\r\n                    //do something\r\n                    break DEFINE_TYPE;\r\n                }\r\n                if (a instanceof y){\r\n                   //do something\r\n                    break DEFINE_TYPE;\r\n                }\r\n                if (a instanceof z){\r\n                    // do something\r\n                    break DEFINE_TYPE;\r\n                }\r\n            }","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>there is an even simpler way of emulating a switch structure that uses instanceof, you do this by creating a code block in your method and naming it with a label. Then you use if structures to emulate the case statements. If a case is true then you use the break LABEL_NAME to get out of your makeshift switch structure.</p>\n\n<pre><code>        DEFINE_TYPE:\n        {\n            if (a instanceof x){\n                //do something\n                break DEFINE_TYPE;\n            }\n            if (a instanceof y){\n               //do something\n                break DEFINE_TYPE;\n            }\n            if (a instanceof z){\n                // do something\n                break DEFINE_TYPE;\n            }\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1920832,"reputation":811,"user_id":1732392,"display_name":"Feiteira"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1619685557,"creation_date":1510589244,"answer_id":47268628,"question_id":5579309,"body_markdown":"I personally like the following Java 1.8 code:\r\n\r\n        mySwitch(&quot;YY&quot;)\r\n                .myCase(&quot;AA&quot;, (o) -&gt; {\r\n                    System.out.println(o+&quot;aa&quot;);\r\n                })\r\n                .myCase(&quot;BB&quot;, (o) -&gt; {\r\n                    System.out.println(o+&quot;bb&quot;);\r\n                })\r\n                .myCase(&quot;YY&quot;, (o) -&gt; {\r\n                    System.out.println(o+&quot;yy&quot;);\r\n                })\r\n                .myCase(&quot;ZZ&quot;, (o) -&gt; {\r\n                    System.out.println(o+&quot;zz&quot;);\r\n                });\r\n\r\nWill output:\r\n\r\n    YYyy\r\n\r\nThe sample code uses Strings but you can use any object type, including Class. e.g. `.myCase(this.getClass(), (o) -&gt; ...`\r\n\r\nNeeds the following snippet:\r\n\r\n    public Case mySwitch(Object reference) {\r\n        return new Case(reference);\r\n    }\r\n\r\n    public class Case {\r\n\r\n        private Object reference;\r\n\r\n        public Case(Object reference) {\r\n            this.reference = reference;\r\n        }\r\n\r\n        public Case myCase(Object b, OnMatchDo task) {\r\n            if (reference.equals(b)) {\r\n                task.task(reference);\r\n            }\r\n            return this;\r\n        }\r\n    }\r\n\r\n    public interface OnMatchDo {\r\n        public void task(Object o);\r\n    }\r\n","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>I personally like the following Java 1.8 code:</p>\n<pre><code>    mySwitch(&quot;YY&quot;)\n            .myCase(&quot;AA&quot;, (o) -&gt; {\n                System.out.println(o+&quot;aa&quot;);\n            })\n            .myCase(&quot;BB&quot;, (o) -&gt; {\n                System.out.println(o+&quot;bb&quot;);\n            })\n            .myCase(&quot;YY&quot;, (o) -&gt; {\n                System.out.println(o+&quot;yy&quot;);\n            })\n            .myCase(&quot;ZZ&quot;, (o) -&gt; {\n                System.out.println(o+&quot;zz&quot;);\n            });\n</code></pre>\n<p>Will output:</p>\n<pre><code>YYyy\n</code></pre>\n<p>The sample code uses Strings but you can use any object type, including Class. e.g. <code>.myCase(this.getClass(), (o) -&gt; ...</code></p>\n<p>Needs the following snippet:</p>\n<pre><code>public Case mySwitch(Object reference) {\n    return new Case(reference);\n}\n\npublic class Case {\n\n    private Object reference;\n\n    public Case(Object reference) {\n        this.reference = reference;\n    }\n\n    public Case myCase(Object b, OnMatchDo task) {\n        if (reference.equals(b)) {\n            task.task(reference);\n        }\n        return this;\n    }\n}\n\npublic interface OnMatchDo {\n    public void task(Object o);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":201558,"reputation":20189,"user_id":448078,"accept_rate":61,"display_name":"Mike"},"down_vote_count":1,"up_vote_count":11,"is_accepted":false,"score":10,"last_activity_date":1613643992,"creation_date":1528890465,"answer_id":50836481,"question_id":5579309,"body_markdown":"java 7+\r\n\r\n    public &lt;T&gt; T process(Object model) {\r\n        switch (model.getClass().getSimpleName()) {\r\n        case &quot;Trade&quot;:\r\n            return processTrade((Trade) model);\r\n        case &quot;InsuranceTransaction&quot;:\r\n            return processInsuranceTransaction((InsuranceTransaction) model);\r\n        case &quot;CashTransaction&quot;:\r\n            return processCashTransaction((CashTransaction) model);\r\n        case &quot;CardTransaction&quot;:\r\n            return processCardTransaction((CardTransaction) model);\r\n        case &quot;TransferTransaction&quot;:\r\n            return processTransferTransaction((TransferTransaction) model);\r\n        case &quot;ClientAccount&quot;:\r\n            return processAccount((ClientAccount) model);\r\n        ...\r\n        default:\r\n            throw new IllegalArgumentException(model.getClass().getSimpleName());\r\n        }\r\n    }\r\n\r\n---\r\nYou can be even faster by for omitting string manipulation inside `getSimpleName` by for introducing constants and using full class name:\r\n\r\n    public static final TRADE = Trade.class.getName();\r\n    ...\r\n    switch (model.getClass().getName()) {\r\n    case TRADE:","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>java 7+</p>\n<pre><code>public &lt;T&gt; T process(Object model) {\n    switch (model.getClass().getSimpleName()) {\n    case &quot;Trade&quot;:\n        return processTrade((Trade) model);\n    case &quot;InsuranceTransaction&quot;:\n        return processInsuranceTransaction((InsuranceTransaction) model);\n    case &quot;CashTransaction&quot;:\n        return processCashTransaction((CashTransaction) model);\n    case &quot;CardTransaction&quot;:\n        return processCardTransaction((CardTransaction) model);\n    case &quot;TransferTransaction&quot;:\n        return processTransferTransaction((TransferTransaction) model);\n    case &quot;ClientAccount&quot;:\n        return processAccount((ClientAccount) model);\n    ...\n    default:\n        throw new IllegalArgumentException(model.getClass().getSimpleName());\n    }\n}\n</code></pre>\n<hr />\n<p>You can be even faster by for omitting string manipulation inside <code>getSimpleName</code> by for introducing constants and using full class name:</p>\n<pre><code>public static final TRADE = Trade.class.getName();\n...\nswitch (model.getClass().getName()) {\ncase TRADE:\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3233258,"reputation":560,"user_id":2728007,"display_name":"Siva Kumar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1530076890,"creation_date":1530076890,"answer_id":51055018,"question_id":5579309,"body_markdown":"Create an **Enum** with Class names.\r\n\r\n    public enum ClassNameEnum {\r\n        A, B, C\r\n    }\r\n\r\nFind the *Class name* of the object.\r\nWrite a **switch** case over the enum.\r\n\r\n    private void switchByClassType(Object obj) {\r\n    \r\n            ClassNameEnum className = ClassNameEnum.valueOf(obj.getClass().getSimpleName());\r\n    \r\n            switch (className) {\r\n                case A:\r\n                    doA();\r\n                    break;\r\n                case B:\r\n                    doB();\r\n                    break;\r\n                case C:\r\n                    doC();\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n\r\nHope this helps.","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>Create an <strong>Enum</strong> with Class names.</p>\n\n<pre><code>public enum ClassNameEnum {\n    A, B, C\n}\n</code></pre>\n\n<p>Find the <em>Class name</em> of the object.\nWrite a <strong>switch</strong> case over the enum.</p>\n\n<pre><code>private void switchByClassType(Object obj) {\n\n        ClassNameEnum className = ClassNameEnum.valueOf(obj.getClass().getSimpleName());\n\n        switch (className) {\n            case A:\n                doA();\n                break;\n            case B:\n                doB();\n                break;\n            case C:\n                doC();\n                break;\n        }\n    }\n}\n</code></pre>\n\n<p>Hope this helps.</p>\n"},{"tags":[],"owner":{"account_id":2234801,"reputation":1443,"user_id":1971503,"accept_rate":57,"display_name":"Viswanath"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1531989019,"creation_date":1531989019,"answer_id":51417880,"question_id":5579309,"body_markdown":"Here&#39;s a functional way of accomplishing it in Java 8 using http://www.vavr.io/\r\n\r\n\r\n    import static io.vavr.API.*;\r\n    import static io.vavr.Predicates.instanceOf;\r\n    public Throwable liftRootCause(final Throwable throwable) {\r\n            return Match(throwable).of(\r\n                    Case($(instanceOf(CompletionException.class)), Throwable::getCause),\r\n                    Case($(instanceOf(ExecutionException.class)), Throwable::getCause),\r\n                    Case($(), th -&gt; th)\r\n            );\r\n        }","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>Here's a functional way of accomplishing it in Java 8 using <a href=\"http://www.vavr.io/\" rel=\"nofollow noreferrer\">http://www.vavr.io/</a></p>\n\n<pre><code>import static io.vavr.API.*;\nimport static io.vavr.Predicates.instanceOf;\npublic Throwable liftRootCause(final Throwable throwable) {\n        return Match(throwable).of(\n                Case($(instanceOf(CompletionException.class)), Throwable::getCause),\n                Case($(instanceOf(ExecutionException.class)), Throwable::getCause),\n                Case($(), th -&gt; th)\n        );\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4746727,"reputation":707,"user_id":3837873,"accept_rate":100,"display_name":"Arcanefoam"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1551976983,"creation_date":1551976983,"answer_id":55048871,"question_id":5579309,"body_markdown":"The Eclipse Modelling Framework has an interesting idea that also considers inheritance. The basic concept is defined in the Switch [interface][1]: switching is done by invoking the *doSwitch* method.\r\n\r\nWhat is really interesting is the implementation. For each type of interest, a\r\n\r\n    public T caseXXXX(XXXX object);\r\n\r\nmethod must be implemented (with a default implementation returning null). The *doSwitch* implementation will attempt to call al the *caseXXX* methods on the object for all its type hierarchy. Something in the lines of:\r\n\r\n    BaseType baseType = (BaseType)object;\r\n    T result = caseBaseType(eAttribute);\r\n    if (result == null) result = caseSuperType1(baseType);\r\n    if (result == null) result = caseSuperType2(baseType);\r\n    if (result == null) result = caseSuperType3(baseType);\r\n    if (result == null) result = caseSuperType4(baseType);\r\n    if (result == null) result = defaultCase(object);\r\n    return result;\r\n\r\nThe actual framework uses an integer id for each class, so the logic is actually a pure switch:\r\n\r\n    public T doSwitch(Object object) {\r\n        return doSwitch(object.class(), eObject);\r\n    }\r\n    \r\n    protected T doSwitch(Class clazz, Object object) {\r\n        return doSwitch(getClassifierID(clazz), object);\r\n    }\r\n    \r\n    protected T doSwitch(int classifierID, Object theObject) {\r\n        switch (classifierID) {\r\n        case MyClasses.BASETYPE:\r\n        {\r\n          BaseType baseType = (BaseType)object;\r\n          ...\r\n          return result;\r\n        }\r\n        case MyClasses.TYPE1:\r\n        {\r\n          ...\r\n        }\r\n      ...\r\n\r\nYou can look at a complete implementation of the [ECoreSwitch][2] to get a better idea.\r\n\r\n\r\n  [1]: https://download.eclipse.org/modeling/emf/emf/javadoc/2.9.0/org/eclipse/emf/ecore/util/Switch.html\r\n  [2]: https://github.com/eclipse/emf/blob/master/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/util/EcoreSwitch.java","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>The Eclipse Modelling Framework has an interesting idea that also considers inheritance. The basic concept is defined in the Switch <a href=\"https://download.eclipse.org/modeling/emf/emf/javadoc/2.9.0/org/eclipse/emf/ecore/util/Switch.html\" rel=\"nofollow noreferrer\">interface</a>: switching is done by invoking the <em>doSwitch</em> method.</p>\n\n<p>What is really interesting is the implementation. For each type of interest, a</p>\n\n<pre><code>public T caseXXXX(XXXX object);\n</code></pre>\n\n<p>method must be implemented (with a default implementation returning null). The <em>doSwitch</em> implementation will attempt to call al the <em>caseXXX</em> methods on the object for all its type hierarchy. Something in the lines of:</p>\n\n<pre><code>BaseType baseType = (BaseType)object;\nT result = caseBaseType(eAttribute);\nif (result == null) result = caseSuperType1(baseType);\nif (result == null) result = caseSuperType2(baseType);\nif (result == null) result = caseSuperType3(baseType);\nif (result == null) result = caseSuperType4(baseType);\nif (result == null) result = defaultCase(object);\nreturn result;\n</code></pre>\n\n<p>The actual framework uses an integer id for each class, so the logic is actually a pure switch:</p>\n\n<pre><code>public T doSwitch(Object object) {\n    return doSwitch(object.class(), eObject);\n}\n\nprotected T doSwitch(Class clazz, Object object) {\n    return doSwitch(getClassifierID(clazz), object);\n}\n\nprotected T doSwitch(int classifierID, Object theObject) {\n    switch (classifierID) {\n    case MyClasses.BASETYPE:\n    {\n      BaseType baseType = (BaseType)object;\n      ...\n      return result;\n    }\n    case MyClasses.TYPE1:\n    {\n      ...\n    }\n  ...\n</code></pre>\n\n<p>You can look at a complete implementation of the <a href=\"https://github.com/eclipse/emf/blob/master/plugins/org.eclipse.emf.ecore/src/org/eclipse/emf/ecore/util/EcoreSwitch.java\" rel=\"nofollow noreferrer\">ECoreSwitch</a> to get a better idea.</p>\n"},{"tags":[],"owner":{"account_id":5644665,"reputation":35941,"user_id":4467208,"accept_rate":51,"display_name":"Murat Karag&#246;z"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1574354611,"creation_date":1553700083,"answer_id":55380782,"question_id":5579309,"body_markdown":"Unfortunately, it is not possible out of the box since the switch-case statement expects a constant expression. To overcome this, one way would be to use enum values with the class names e.g.\r\n\r\n\r\n    public enum MyEnum {\r\n       A(A.class.getName()), \r\n       B(B.class.getName()),\r\n       C(C.class.getName());\r\n\r\n\tprivate String refClassname;\r\n\tprivate static final Map&lt;String, MyEnum&gt; ENUM_MAP;\r\n\r\n\tMyEnum (String refClassname) {\r\n\t\tthis.refClassname = refClassname;\r\n\t}\r\n\r\n\tstatic {\r\n\t\tMap&lt;String, MyEnum&gt; map = new ConcurrentHashMap&lt;String, MyEnum&gt;();\r\n\t\tfor (MyEnum instance : MyEnum.values()) {\r\n\t\t\tmap.put(instance.refClassname, instance);\r\n\t\t}\r\n\t\tENUM_MAP = Collections.unmodifiableMap(map);\r\n\t}\r\n\r\n\tpublic static MyEnum get(String name) {\r\n\t\treturn ENUM_MAP.get(name);\r\n\t }\r\n    }\r\n\r\nWith that is is possible to use the switch statement like this\r\n\r\n    MyEnum type = MyEnum.get(clazz.getName());\r\n    switch (type) {\r\n    case A:\r\n        ... // it&#39;s A class\r\n    case B:\r\n        ... // it&#39;s B class\r\n    case C:\r\n        ... // it&#39;s C class\r\n    }\r\n\r\n\r\n","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>Unfortunately, it is not possible out of the box since the switch-case statement expects a constant expression. To overcome this, one way would be to use enum values with the class names e.g.</p>\n\n<pre><code>public enum MyEnum {\n   A(A.class.getName()), \n   B(B.class.getName()),\n   C(C.class.getName());\n\nprivate String refClassname;\nprivate static final Map&lt;String, MyEnum&gt; ENUM_MAP;\n\nMyEnum (String refClassname) {\n    this.refClassname = refClassname;\n}\n\nstatic {\n    Map&lt;String, MyEnum&gt; map = new ConcurrentHashMap&lt;String, MyEnum&gt;();\n    for (MyEnum instance : MyEnum.values()) {\n        map.put(instance.refClassname, instance);\n    }\n    ENUM_MAP = Collections.unmodifiableMap(map);\n}\n\npublic static MyEnum get(String name) {\n    return ENUM_MAP.get(name);\n }\n}\n</code></pre>\n\n<p>With that is is possible to use the switch statement like this</p>\n\n<pre><code>MyEnum type = MyEnum.get(clazz.getName());\nswitch (type) {\ncase A:\n    ... // it's A class\ncase B:\n    ... // it's B class\ncase C:\n    ... // it's C class\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1231014,"reputation":594,"user_id":1195605,"display_name":"Ravi Sanwal"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1555352901,"creation_date":1555352901,"answer_id":55695243,"question_id":5579309,"body_markdown":"While it is not possible to write a switch statement, it is possible to branch out to specific processing for each given type. One way of doing this is to use standard double dispatch mechanism. An example where we want to &quot;switch&quot; based on type is Jersey Exception mapper where we need to map multitude of exceptions to error responses. While for this specific case there is probably a better way (i.e. using a polymorphic method that translates each exception to an error response), using double dispatch mechanism is still useful and practical.\r\n\r\n    interface Processable {\r\n        &lt;R&gt; R process(final Processor&lt;R&gt; processor);\r\n    }\r\n    \r\n    interface Processor&lt;R&gt; {\r\n        R process(final A a);\r\n        R process(final B b);\r\n        R process(final C c);\r\n        // for each type of Processable\r\n        ...\r\n    }\r\n    \r\n    class A implements Processable {\r\n        // other class logic here\r\n    \r\n        &lt;R&gt; R process(final Processor&lt;R&gt; processor){\r\n            return processor.process(this);\r\n        }\r\n    }\r\n    \r\n    class B implements Processable {\r\n        // other class logic here\r\n    \r\n        &lt;R&gt; R process(final Processor&lt;R&gt; processor){\r\n            return processor.process(this);\r\n        }\r\n    }\r\n    \r\n    class C implements Processable {\r\n        // other class logic here\r\n    \r\n        &lt;R&gt; R process(final Processor&lt;R&gt; processor){\r\n            return processor.process(this);\r\n        }\r\n    }\r\n\r\nThen where ever the &quot;switch&quot; is needed, you can do it as follows:\r\n\r\n    public class LogProcessor implements Processor&lt;String&gt; {\r\n        private static final Logger log = Logger.for(LogProcessor.class);\r\n    \r\n        public void logIt(final Processable base) {\r\n            log.info(&quot;Logging for type {}&quot;, process(base));\r\n        }\r\n    \r\n        // Processor methods, these are basically the effective &quot;case&quot; statements\r\n        String process(final A a) {\r\n            return &quot;Stringifying A&quot;;\r\n        }\r\n    \r\n        String process(final B b) {\r\n            return &quot;Stringifying B&quot;;\r\n        }\r\n    \r\n        String process(final C c) {\r\n            return &quot;Stringifying C&quot;;\r\n        }\r\n    }\r\n","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>While it is not possible to write a switch statement, it is possible to branch out to specific processing for each given type. One way of doing this is to use standard double dispatch mechanism. An example where we want to \"switch\" based on type is Jersey Exception mapper where we need to map multitude of exceptions to error responses. While for this specific case there is probably a better way (i.e. using a polymorphic method that translates each exception to an error response), using double dispatch mechanism is still useful and practical.</p>\n\n<pre><code>interface Processable {\n    &lt;R&gt; R process(final Processor&lt;R&gt; processor);\n}\n\ninterface Processor&lt;R&gt; {\n    R process(final A a);\n    R process(final B b);\n    R process(final C c);\n    // for each type of Processable\n    ...\n}\n\nclass A implements Processable {\n    // other class logic here\n\n    &lt;R&gt; R process(final Processor&lt;R&gt; processor){\n        return processor.process(this);\n    }\n}\n\nclass B implements Processable {\n    // other class logic here\n\n    &lt;R&gt; R process(final Processor&lt;R&gt; processor){\n        return processor.process(this);\n    }\n}\n\nclass C implements Processable {\n    // other class logic here\n\n    &lt;R&gt; R process(final Processor&lt;R&gt; processor){\n        return processor.process(this);\n    }\n}\n</code></pre>\n\n<p>Then where ever the \"switch\" is needed, you can do it as follows:</p>\n\n<pre><code>public class LogProcessor implements Processor&lt;String&gt; {\n    private static final Logger log = Logger.for(LogProcessor.class);\n\n    public void logIt(final Processable base) {\n        log.info(\"Logging for type {}\", process(base));\n    }\n\n    // Processor methods, these are basically the effective \"case\" statements\n    String process(final A a) {\n        return \"Stringifying A\";\n    }\n\n    String process(final B b) {\n        return \"Stringifying B\";\n    }\n\n    String process(final C c) {\n        return \"Stringifying C\";\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6528461,"reputation":3279,"user_id":5050431,"accept_rate":60,"display_name":"A_Arnold"},"down_vote_count":1,"up_vote_count":77,"is_accepted":false,"score":76,"last_activity_date":1677008053,"creation_date":1565361151,"answer_id":57432241,"question_id":5579309,"body_markdown":"Java now allows you to switch in the manner of the OP. They call it [Pattern Matching][1] for switch. It was released as a preview feature of Java 17. The example given in the JEP is \r\n\r\n```java\r\n    String formatted;\r\nswitch (obj) {\r\n    case Integer i : formatted = String.format ( &quot;int %d&quot;, i); break;\r\n    case Byte b : formatted = String.format ( &quot;byte %d&quot;, b); break;\r\n    case Long l : formatted = String.format ( &quot;long %d&quot;, l); break;\r\n    case Double d : formatted = String.format ( &quot;double %f&quot;, d); break;\r\n    case String s : formatted = String.format ( &quot;String %s&quot;, s); break\r\n    default: formatted = obj.toString();\r\n}  \r\n```\r\n\r\nor using their lambda syntax and returning a value \r\n\r\n```java\r\nString formatted = switch (obj) {\r\n                      case Integer i -&gt; String.format ( &quot;int %d&quot;, i )\r\n                      case Byte b -&gt; String.format ( &quot;byte %d&quot;, b );\r\n                      case Long l -&gt; String.format ( &quot;long %d&quot;, l );\r\n                      case Double d -&gt; String.format ( &quot;double %f&quot;, d );\r\n                      case String s -&gt; String.format ( &quot;String %s&quot;, s );\r\n                      default -&gt; obj.toString();\r\n                   };\r\n```\r\neither way they&#39;ve been doing cool stuff with switches. \r\n  \r\n\r\n\r\n  [1]: https://openjdk.org/jeps/406","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>Java now allows you to switch in the manner of the OP. They call it <a href=\"https://openjdk.org/jeps/406\" rel=\"noreferrer\">Pattern Matching</a> for switch. It was released as a preview feature of Java 17. The example given in the JEP is</p>\n<pre class=\"lang-java prettyprint-override\"><code>    String formatted;\nswitch (obj) {\n    case Integer i : formatted = String.format ( &quot;int %d&quot;, i); break;\n    case Byte b : formatted = String.format ( &quot;byte %d&quot;, b); break;\n    case Long l : formatted = String.format ( &quot;long %d&quot;, l); break;\n    case Double d : formatted = String.format ( &quot;double %f&quot;, d); break;\n    case String s : formatted = String.format ( &quot;String %s&quot;, s); break\n    default: formatted = obj.toString();\n}  \n</code></pre>\n<p>or using their lambda syntax and returning a value</p>\n<pre class=\"lang-java prettyprint-override\"><code>String formatted = switch (obj) {\n                      case Integer i -&gt; String.format ( &quot;int %d&quot;, i )\n                      case Byte b -&gt; String.format ( &quot;byte %d&quot;, b );\n                      case Long l -&gt; String.format ( &quot;long %d&quot;, l );\n                      case Double d -&gt; String.format ( &quot;double %f&quot;, d );\n                      case String s -&gt; String.format ( &quot;String %s&quot;, s );\n                      default -&gt; obj.toString();\n                   };\n</code></pre>\n<p>either way they've been doing cool stuff with switches.</p>\n"},{"tags":[],"owner":{"account_id":1693760,"reputation":9824,"user_id":1555615,"accept_rate":62,"display_name":"Marinos An"},"down_vote_count":7,"up_vote_count":2,"is_accepted":false,"score":-5,"last_activity_date":1635758168,"creation_date":1594057884,"answer_id":62761706,"question_id":5579309,"body_markdown":"If you want to avoid the verbosity of `if(){} else if{}`, you may consider switching this single file to [kotlin](https://en.wikipedia.org/wiki/Kotlin_(programming_language)) and use the switch-like [when expression](https://kotlinlang.org/docs/reference/control-flow.html#when-expression) in combination with `is` operator. \r\n\r\nIn any case [Kotlin and java files can co-exist in a project](https://kotlinlang.org/docs/reference/using-maven.html#compiling-kotlin-and-java-sources) and result in a jar that can run in JVM.\r\n\r\n```kotlin\r\nwhen (this) { //switch-like statement in kotlin supporting class-pattern-matching and smart casts via `is` operator.\r\n    is A -&gt; doA()\r\n    is B -&gt; doB()\r\n    is C -&gt; doC()\r\n}\r\n```","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>If you want to avoid the verbosity of <code>if(){} else if{}</code>, you may consider switching this single file to <a href=\"https://en.wikipedia.org/wiki/Kotlin_(programming_language)\" rel=\"nofollow noreferrer\">kotlin</a> and use the switch-like <a href=\"https://kotlinlang.org/docs/reference/control-flow.html#when-expression\" rel=\"nofollow noreferrer\">when expression</a> in combination with <code>is</code> operator.</p>\n<p>In any case <a href=\"https://kotlinlang.org/docs/reference/using-maven.html#compiling-kotlin-and-java-sources\" rel=\"nofollow noreferrer\">Kotlin and java files can co-exist in a project</a> and result in a jar that can run in JVM.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>when (this) { //switch-like statement in kotlin supporting class-pattern-matching and smart casts via `is` operator.\n    is A -&gt; doA()\n    is B -&gt; doB()\n    is C -&gt; doC()\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7798354,"reputation":6929,"user_id":5898696,"accept_rate":89,"display_name":"J-Alex"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1659632796,"creation_date":1659632796,"answer_id":73239825,"question_id":5579309,"body_markdown":"Starting from Java 17 you can use pattern matching for switch expressions (preview feature) [JEP-406][1].\r\n\r\n    public void doAction(Object o) {\r\n        return switch (o) {\r\n            case A a -&gt; doA(a);\r\n            case B b -&gt; doB(b);\r\n            case C c -&gt; doC(c);\r\n            default -&gt; log.warn(&quot;Unrecognized type of {}&quot;, o);\r\n        };\r\n    }\r\n\r\nGuard pattern is also available:\r\n\r\n    public void doAction(Object o) {\r\n        return switch (o) {\r\n            case String s &amp;&amp; !s.isBlank() -&gt; handle(s);\r\n        };\r\n    }\r\n\r\nYou need to enable preview features to use it: `java --enable-preview`\r\n\r\n  [1]: https://openjdk.org/jeps/406","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>Starting from Java 17 you can use pattern matching for switch expressions (preview feature) <a href=\"https://openjdk.org/jeps/406\" rel=\"nofollow noreferrer\">JEP-406</a>.</p>\n<pre><code>public void doAction(Object o) {\n    return switch (o) {\n        case A a -&gt; doA(a);\n        case B b -&gt; doB(b);\n        case C c -&gt; doC(c);\n        default -&gt; log.warn(&quot;Unrecognized type of {}&quot;, o);\n    };\n}\n</code></pre>\n<p>Guard pattern is also available:</p>\n<pre><code>public void doAction(Object o) {\n    return switch (o) {\n        case String s &amp;&amp; !s.isBlank() -&gt; handle(s);\n    };\n}\n</code></pre>\n<p>You need to enable preview features to use it: <code>java --enable-preview</code></p>\n"},{"tags":[],"owner":{"account_id":12331407,"reputation":284,"user_id":8997268,"display_name":"Umesh Sulakude"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1664178027,"creation_date":1664178027,"answer_id":73850924,"question_id":5579309,"body_markdown":"In Java 19 recent release this has been very easy and useful :\r\nCreate interface and have method called makesomenoise() which accepts animal parameter.\r\n\r\n    void makeSomeNoise (Animal animal) {\r\n    switch (animal) {\r\n    case Dog dog → dog.bark();\r\n    case Cat catcat.meow();\r\n    default throw new RuntimeException (&quot;WTH is it???&quot;);\r\n    }\r\n    }","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>In Java 19 recent release this has been very easy and useful :\nCreate interface and have method called makesomenoise() which accepts animal parameter.</p>\n<pre><code>void makeSomeNoise (Animal animal) {\nswitch (animal) {\ncase Dog dog → dog.bark();\ncase Cat catcat.meow();\ndefault throw new RuntimeException (&quot;WTH is it???&quot;);\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9239692,"reputation":31,"user_id":6863299,"display_name":"Lump"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687159755,"creation_date":1687159755,"answer_id":76504480,"question_id":5579309,"body_markdown":"In Java 21 you can use &quot;Pattern Matching for Switch&quot;. See https://openjdk.org/jeps/441. This is no preview feature anymore.","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>In Java 21 you can use &quot;Pattern Matching for Switch&quot;. See <a href=\"https://openjdk.org/jeps/441\" rel=\"nofollow noreferrer\">https://openjdk.org/jeps/441</a>. This is no preview feature anymore.</p>\n"},{"tags":[],"owner":{"account_id":57788,"reputation":46110,"user_id":173149,"accept_rate":62,"display_name":"gavenkoa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689144428,"creation_date":1689144428,"answer_id":76667796,"question_id":5579309,"body_markdown":"Before we get stable pattern matching for `switch` statement, Java 16/17 could provide limited support with &quot;Pattern Matching for instanceof&quot;:\r\n\r\n```java\r\nif (req instanceof UserRequest userReq) {\r\n    userReq.doUserStuff();\r\n} else if (req instanceof AdminRequest adminReq) {\r\n    adminReq.doAdminStuff();\r\n}\r\n```\r\n\r\nIt frees you from extra casting statement.\r\n\r\nSee https://openjdk.org/jeps/394","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>Before we get stable pattern matching for <code>switch</code> statement, Java 16/17 could provide limited support with &quot;Pattern Matching for instanceof&quot;:</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (req instanceof UserRequest userReq) {\n    userReq.doUserStuff();\n} else if (req instanceof AdminRequest adminReq) {\n    adminReq.doAdminStuff();\n}\n</code></pre>\n<p>It frees you from extra casting statement.</p>\n<p>See <a href=\"https://openjdk.org/jeps/394\" rel=\"nofollow noreferrer\">https://openjdk.org/jeps/394</a></p>\n"},{"tags":[],"owner":{"account_id":17266527,"reputation":29,"user_id":12503105,"display_name":"Nanuno"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1691638766,"creation_date":1691638766,"answer_id":76872512,"question_id":5579309,"body_markdown":"I think we can do it more naturally without any modifications like this:\r\n\r\n    switch (true) {\r\n      case X instanceof A:\r\n        // do something;\r\n        break;\r\n      case X instanceof B:\r\n        // do something;\r\n        break;\r\n      default:\r\n        // do something;\r\n        break;\r\n    }\r\n\r\nHope it helps! :)","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>I think we can do it more naturally without any modifications like this:</p>\n<pre><code>switch (true) {\n  case X instanceof A:\n    // do something;\n    break;\n  case X instanceof B:\n    // do something;\n    break;\n  default:\n    // do something;\n    break;\n}\n</code></pre>\n<p>Hope it helps! :)</p>\n"}],"owner":{"account_id":180086,"reputation":20208,"user_id":413174,"accept_rate":87,"display_name":"olidev"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":403437,"favorite_count":0,"down_vote_count":0,"up_vote_count":358,"accepted_answer_id":5579385,"answer_count":29,"score":358,"last_activity_date":1691638766,"creation_date":1302170608,"question_id":5579309,"body_markdown":"I have a question of using switch case for `instanceof` object:\r\n\r\nFor example: my problem can be reproduced in Java:\r\n\r\n    if(this instanceof A)\r\n        doA();\r\n    else if(this instanceof B)\r\n        doB();\r\n    else if(this instanceof C)\r\n        doC():\r\n\r\nHow would it be implemented using `switch...case`?","title":"Is it possible to use the instanceof operator in a switch statement?","body":"<p>I have a question of using switch case for <code>instanceof</code> object:</p>\n\n<p>For example: my problem can be reproduced in Java:</p>\n\n<pre><code>if(this instanceof A)\n    doA();\nelse if(this instanceof B)\n    doB();\nelse if(this instanceof C)\n    doC():\n</code></pre>\n\n<p>How would it be implemented using <code>switch...case</code>?</p>\n"},{"tags":["java","spring-boot","jpa","filtering","specifications"],"owner":{"account_id":9999928,"reputation":143,"user_id":7396271,"display_name":"Abdou"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691638558,"creation_date":1691625120,"question_id":76871883,"body_markdown":"I have table `paysheet` that contains monthYear values in this format :\r\n\r\n08/2023\r\n06/2023\r\n05/2023\r\n\r\nthey&#39;re stored as strings in the database, i&#39;m tasked to implement filtering using JPA specifications, i decided to create seperate columns for month+year, and transfer the old data there, keeping the month_year column like this :\r\n\r\n    ALTER TABLE paysheet\r\n        ADD COLUMN IF NOT EXISTS month INT,\r\n        ADD COLUMN IF NOT EXISTS year INT;\r\n    \r\n    UPDATE paysheet\r\n    SET\r\n        month = CAST(SPLIT_PART(month_year, &#39;/&#39;, 1) AS INT),\r\n        year = CAST(SPLIT_PART(month_year, &#39;/&#39;, 2) AS INT);\r\n\r\nhere&#39;s my filtering logic : \r\n\r\nI parse the monthYear strings &quot;05/2023&quot; to a YearMonth : \r\n\r\n    public static YearMonth parseMonthYear(String input) {\r\n        return YearMonth.parse(input, DateTimeFormatter.ofPattern(&quot;MM/yyyy&quot;));\r\n    }\r\n\r\nand then create my spec : \r\n\r\n        YearMonth startDate = DateUtils.parseMonthYear(searchPaySheetDTO.getStartDate());\r\n        YearMonth endDate = DateUtils.parseMonthYear(searchPaySheetDTO.getEndDate());\r\n        Specification&lt;Paysheet&gt; specification = Specification\r\n                .where(this.filterByStartInterval(startDate))\r\n                .and(this.filterByEndInterval(endDate))\r\n                .and(this.filterByCollaborator(collaborator));\r\n\r\nthere are my predicate builders ( for the dates ) : \r\n\r\n    private Specification&lt;Paysheet&gt; filterByStartInterval(YearMonth startDate) {\r\n        return (root, query, criteriaBuilder) -&gt; {\r\n            List&lt;Predicate&gt; predicates = new ArrayList&lt;&gt;();\r\n\r\n            predicates.add(criteriaBuilder.greaterThanOrEqualTo(root.get(&quot;month&quot;), startDate.getMonthValue()));\r\n            predicates.add(criteriaBuilder.greaterThanOrEqualTo(root.get(&quot;year&quot;), startDate.getYear()));\r\n\r\n            return criteriaBuilder.and(predicates.toArray(new Predicate[0]));\r\n        };\r\n    }\r\n\r\n    private Specification&lt;Paysheet&gt; filterByEndInterval(YearMonth endDate) {\r\n        return (root, query, criteriaBuilder) -&gt; {\r\n            List&lt;Predicate&gt; predicates = new ArrayList&lt;&gt;();\r\n\r\n            predicates.add(criteriaBuilder.lessThanOrEqualTo(root.get(&quot;month&quot;), endDate.getMonthValue()));\r\n            predicates.add(criteriaBuilder.lessThanOrEqualTo(root.get(&quot;year&quot;), endDate.getYear()));\r\n\r\n            return criteriaBuilder.and(predicates.toArray(new Predicate[0]));\r\n        };\r\n    }\r\n\r\n\r\nclearly my logic is wrong, because this test case doesn&#39;t pass : \r\n\r\n    {\r\n      &quot;startDate&quot;: &quot;09/2021&quot;,\r\n      &quot;endDate&quot;: &quot;02/2026&quot;\r\n    }\r\n\r\nit does a `where month &gt; 9 and month &lt; 2` in sql which doesn&#39;t work.\r\n\r\nI&#39;m a bit stuck and will appreciate ur help.\r\n\r\n","title":"JPA Specification filter within an interval while ignoring days of month","body":"<p>I have table <code>paysheet</code> that contains monthYear values in this format :</p>\n<p>08/2023\n06/2023\n05/2023</p>\n<p>they're stored as strings in the database, i'm tasked to implement filtering using JPA specifications, i decided to create seperate columns for month+year, and transfer the old data there, keeping the month_year column like this :</p>\n<pre><code>ALTER TABLE paysheet\n    ADD COLUMN IF NOT EXISTS month INT,\n    ADD COLUMN IF NOT EXISTS year INT;\n\nUPDATE paysheet\nSET\n    month = CAST(SPLIT_PART(month_year, '/', 1) AS INT),\n    year = CAST(SPLIT_PART(month_year, '/', 2) AS INT);\n</code></pre>\n<p>here's my filtering logic :</p>\n<p>I parse the monthYear strings &quot;05/2023&quot; to a YearMonth :</p>\n<pre><code>public static YearMonth parseMonthYear(String input) {\n    return YearMonth.parse(input, DateTimeFormatter.ofPattern(&quot;MM/yyyy&quot;));\n}\n</code></pre>\n<p>and then create my spec :</p>\n<pre><code>    YearMonth startDate = DateUtils.parseMonthYear(searchPaySheetDTO.getStartDate());\n    YearMonth endDate = DateUtils.parseMonthYear(searchPaySheetDTO.getEndDate());\n    Specification&lt;Paysheet&gt; specification = Specification\n            .where(this.filterByStartInterval(startDate))\n            .and(this.filterByEndInterval(endDate))\n            .and(this.filterByCollaborator(collaborator));\n</code></pre>\n<p>there are my predicate builders ( for the dates ) :</p>\n<pre><code>private Specification&lt;Paysheet&gt; filterByStartInterval(YearMonth startDate) {\n    return (root, query, criteriaBuilder) -&gt; {\n        List&lt;Predicate&gt; predicates = new ArrayList&lt;&gt;();\n\n        predicates.add(criteriaBuilder.greaterThanOrEqualTo(root.get(&quot;month&quot;), startDate.getMonthValue()));\n        predicates.add(criteriaBuilder.greaterThanOrEqualTo(root.get(&quot;year&quot;), startDate.getYear()));\n\n        return criteriaBuilder.and(predicates.toArray(new Predicate[0]));\n    };\n}\n\nprivate Specification&lt;Paysheet&gt; filterByEndInterval(YearMonth endDate) {\n    return (root, query, criteriaBuilder) -&gt; {\n        List&lt;Predicate&gt; predicates = new ArrayList&lt;&gt;();\n\n        predicates.add(criteriaBuilder.lessThanOrEqualTo(root.get(&quot;month&quot;), endDate.getMonthValue()));\n        predicates.add(criteriaBuilder.lessThanOrEqualTo(root.get(&quot;year&quot;), endDate.getYear()));\n\n        return criteriaBuilder.and(predicates.toArray(new Predicate[0]));\n    };\n}\n</code></pre>\n<p>clearly my logic is wrong, because this test case doesn't pass :</p>\n<pre><code>{\n  &quot;startDate&quot;: &quot;09/2021&quot;,\n  &quot;endDate&quot;: &quot;02/2026&quot;\n}\n</code></pre>\n<p>it does a <code>where month &gt; 9 and month &lt; 2</code> in sql which doesn't work.</p>\n<p>I'm a bit stuck and will appreciate ur help.</p>\n"},{"tags":["java","spring-mvc","thymeleaf"],"comments":[{"owner":{"account_id":3275313,"reputation":5882,"user_id":2757561,"accept_rate":71,"display_name":"cralfaro"},"score":0,"creation_date":1493120863,"post_id":43598674,"comment_id":74268361,"body_markdown":"just to try to understand better your problem, why you didnt have the html thymeleaf files inside your webapp as a normal resource?","body":"just to try to understand better your problem, why you didnt have the html thymeleaf files inside your webapp as a normal resource?"},{"owner":{"account_id":434034,"reputation":18496,"user_id":819732,"accept_rate":80,"display_name":"kasdega"},"score":0,"creation_date":1493129758,"post_id":43598674,"comment_id":74275240,"body_markdown":"That is a long story.  Let&#39;s just get crazy and assume that we need to have at least some of our templates available through the database.","body":"That is a long story.  Let&#39;s just get crazy and assume that we need to have at least some of our templates available through the database."},{"owner":{"account_id":1555433,"reputation":2537,"user_id":1446707,"accept_rate":100,"display_name":"Ali.Mojtahed"},"score":0,"creation_date":1493207297,"post_id":43598674,"comment_id":74314460,"body_markdown":"Are u disabled Thymleafe cache?","body":"Are u disabled Thymleafe cache?"}],"answers":[{"tags":[],"owner":{"account_id":434034,"reputation":18496,"user_id":819732,"accept_rate":80,"display_name":"kasdega"},"down_vote_count":0,"up_vote_count":24,"is_accepted":true,"score":24,"last_activity_date":1493220640,"creation_date":1493217984,"answer_id":43637491,"question_id":43598674,"body_markdown":"Through mostly trial and error I was able to piece this together.  Posting it here to help the next person looking for something similar.\r\n\r\nThis is made easier in the newer version of Thymeleaf.  All one needs to do now is to extend StringTemplateResolver.\r\n\r\n    import java.util.Map;\r\n    import org.thymeleaf.IEngineConfiguration;\r\n    import org.thymeleaf.templateresolver.StringTemplateResolver;\r\n    import org.thymeleaf.templateresource.ITemplateResource;\r\n    \r\n    import com.google.common.collect.Sets;\r\n    \r\n    public class ThymeleafDatabaseResourceResolver extends StringTemplateResolver {\r\n    \tprivate final static String PREFIX = &quot;&quot;;\r\n    \r\n    \t@Autowired ThymeleafTemplateDao thymeleaftemplateDao;\r\n    \r\n    \tpublic ThymeleafDatabaseResourceResolver() {\r\n    \t\tsetResolvablePatterns(Sets.newHashSet(PREFIX + &quot;*&quot;));\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tprotected ITemplateResource computeTemplateResource(IEngineConfiguration configuration, String ownerTemplate, String template, Map&lt;String, Object&gt; templateResolutionAttributes) {\r\n    \r\n            // ThymeleafTemplate is our internal object that contains the content.  \r\n            // You should change this to match you&#39;re set up.\r\n    \r\n            ThymeleafTemplateDao thymeleaftemplateDao = ApplicationContextProvider.getApplicationContext().getBean(ThymeleafTemplateDao.class);\r\n    \t\tThymeleafTemplate thymeleafTemplate = thymeleaftemplateDao.findByTemplateName(template);  \r\n    \t\tif (thymeleafTemplate != null) {\r\n    \t\t\treturn super.computeTemplateResource(configuration, ownerTemplate, thymeleafTemplate.getContent(), templateResolutionAttributes);\r\n    \t\t}\r\n    \t\treturn null;\r\n    \t}\r\n    \r\n    }\r\n\r\n","title":"How to read a Thymeleaf template from DB in Thymeleaf 3.0.5?","body":"<p>Through mostly trial and error I was able to piece this together.  Posting it here to help the next person looking for something similar.</p>\n\n<p>This is made easier in the newer version of Thymeleaf.  All one needs to do now is to extend StringTemplateResolver.</p>\n\n<pre><code>import java.util.Map;\nimport org.thymeleaf.IEngineConfiguration;\nimport org.thymeleaf.templateresolver.StringTemplateResolver;\nimport org.thymeleaf.templateresource.ITemplateResource;\n\nimport com.google.common.collect.Sets;\n\npublic class ThymeleafDatabaseResourceResolver extends StringTemplateResolver {\n    private final static String PREFIX = \"\";\n\n    @Autowired ThymeleafTemplateDao thymeleaftemplateDao;\n\n    public ThymeleafDatabaseResourceResolver() {\n        setResolvablePatterns(Sets.newHashSet(PREFIX + \"*\"));\n    }\n\n    @Override\n    protected ITemplateResource computeTemplateResource(IEngineConfiguration configuration, String ownerTemplate, String template, Map&lt;String, Object&gt; templateResolutionAttributes) {\n\n        // ThymeleafTemplate is our internal object that contains the content.  \n        // You should change this to match you're set up.\n\n        ThymeleafTemplateDao thymeleaftemplateDao = ApplicationContextProvider.getApplicationContext().getBean(ThymeleafTemplateDao.class);\n        ThymeleafTemplate thymeleafTemplate = thymeleaftemplateDao.findByTemplateName(template);  \n        if (thymeleafTemplate != null) {\n            return super.computeTemplateResource(configuration, ownerTemplate, thymeleafTemplate.getContent(), templateResolutionAttributes);\n        }\n        return null;\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":434034,"reputation":18496,"user_id":819732,"accept_rate":80,"display_name":"kasdega"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7471,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":43637491,"answer_count":1,"score":11,"last_activity_date":1691638461,"creation_date":1493072811,"question_id":43598674,"body_markdown":"We&#39;re upgrading from Thymeleaf 2.1 to 3.0.5.  Our current set up (before upgrading) has many thymeleaf templates defined and stored in a database table.  \r\nWhen we attempt to upgrade to 3.x our 2.1 code no longer works...ok fine but we can&#39;t find any good examples on how to do basically the same thing with Thymeleaf 3.0.5.  Has anyone implemented this?\r\n\r\nEven a decent example of how to implement org.thymeleaf.templateresolver.StringTemplateResolver would probably push us in the right direction...but we can&#39;t find anything on that either.\r\n\r\nThis is what we used in 2.1:\r\n\r\n    public class ThymeleafTemplateResolver extends TemplateResolver {\r\n    \r\n        private final static String PREFIX = &quot;&quot;; \r\n    \r\n        public ThymeleafTemplateResolver() {\r\n            setResourceResolver(new DbResourceResolver());\r\n            setResolvablePatterns(Sets.newHashSet(PREFIX + &quot;*&quot;));\r\n        }\r\n    \r\n        @Override\r\n        protected String computeResourceName(TemplateProcessingParameters params) {\r\n            String templateName = params.getTemplateName();\r\n            return templateName.substring(PREFIX.length());\r\n        }\r\n    \r\n        private class DbResourceResolver implements IResourceResolver {\r\n    \r\n            @Override\r\n            public InputStream getResourceAsStream(TemplateProcessingParameters params, String template) {\r\n            \tThymeleafTemplateDao thymeleaftemplateDao = ApplicationContextProvider.getApplicationContext().getBean(ThymeleafTemplateDao.class);\r\n            \tThymeleafTemplate thymeleafTemplate = thymeleaftemplateDao.findByTemplate(template);\r\n                if (thymeleafTemplate != null) {\r\n                    return new ByteArrayInputStream(thymeleafTemplate.getContent().getBytes());\r\n                }\r\n                return null;\r\n            }\r\n    \r\n            @Override\r\n            public String getName() {\r\n                return &quot;dbResourceResolver&quot;;\r\n            }\r\n        }\r\n    }\r\n\r\nAny help is appreciated...\r\n\r\n","title":"How to read a Thymeleaf template from DB in Thymeleaf 3.0.5?","body":"<p>We're upgrading from Thymeleaf 2.1 to 3.0.5.  Our current set up (before upgrading) has many thymeleaf templates defined and stored in a database table.<br>\nWhen we attempt to upgrade to 3.x our 2.1 code no longer works...ok fine but we can't find any good examples on how to do basically the same thing with Thymeleaf 3.0.5.  Has anyone implemented this?</p>\n\n<p>Even a decent example of how to implement org.thymeleaf.templateresolver.StringTemplateResolver would probably push us in the right direction...but we can't find anything on that either.</p>\n\n<p>This is what we used in 2.1:</p>\n\n<pre><code>public class ThymeleafTemplateResolver extends TemplateResolver {\n\n    private final static String PREFIX = \"\"; \n\n    public ThymeleafTemplateResolver() {\n        setResourceResolver(new DbResourceResolver());\n        setResolvablePatterns(Sets.newHashSet(PREFIX + \"*\"));\n    }\n\n    @Override\n    protected String computeResourceName(TemplateProcessingParameters params) {\n        String templateName = params.getTemplateName();\n        return templateName.substring(PREFIX.length());\n    }\n\n    private class DbResourceResolver implements IResourceResolver {\n\n        @Override\n        public InputStream getResourceAsStream(TemplateProcessingParameters params, String template) {\n            ThymeleafTemplateDao thymeleaftemplateDao = ApplicationContextProvider.getApplicationContext().getBean(ThymeleafTemplateDao.class);\n            ThymeleafTemplate thymeleafTemplate = thymeleaftemplateDao.findByTemplate(template);\n            if (thymeleafTemplate != null) {\n                return new ByteArrayInputStream(thymeleafTemplate.getContent().getBytes());\n            }\n            return null;\n        }\n\n        @Override\n        public String getName() {\n            return \"dbResourceResolver\";\n        }\n    }\n}\n</code></pre>\n\n<p>Any help is appreciated...</p>\n"},{"tags":["java","android","firebase","firebase-realtime-database"],"answers":[{"tags":[],"owner":{"account_id":72426,"reputation":573714,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691638064,"creation_date":1691638064,"answer_id":76872478,"question_id":76872145,"body_markdown":"You&#39;re storing your user profiles under path `/Users/Customers` in your database, so you can set up a reference to that parent node as:\r\n```\r\nDatabaseReference referenceProfile =\r\n                         FirebaseDatabase.getInstance().getReference(&quot;Users/Customers&quot;); \r\n```\r\n\r\n","title":"How can I get the correct DatabaseReference","body":"<p>You're storing your user profiles under path <code>/Users/Customers</code> in your database, so you can set up a reference to that parent node as:</p>\n<pre><code>DatabaseReference referenceProfile =\n                         FirebaseDatabase.getInstance().getReference(&quot;Users/Customers&quot;); \n</code></pre>\n"}],"owner":{"account_id":29159969,"reputation":51,"user_id":22338949,"display_name":"Chichi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76872478,"answer_count":1,"score":0,"last_activity_date":1691638064,"creation_date":1691631628,"question_id":76872145,"body_markdown":"I am creating a user profile but I do not know how can I get the child node and display it in the user profile, How can I reference this correctly? I would greatly appreciate any comments or suggestion, thank you in advance!!\r\n\r\n\r\nUSER PROFILE\r\n\r\n```\r\nprivate void showUserProfile( FirebaseUser firebaseUser) {\r\n\r\nString userID = firebaseUser.getUid();\r\n\r\nDatabaseReference referenceProfile = FirebaseDatabase.getInstance().getReference(&quot;Users&quot;); \r\n// &#128070;\r\nreferenceProfile.child(userID).addListenerForSingleValueEvent(new ValueEventListener() {\r\n    @Override\r\n    public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n        ReadWriteUserDetails readUserDetail = snapshot.getValue(ReadWriteUserDetails.class);\r\n        if(readUserDetail != null){\r\n            fullname = firebaseUser.getDisplayName();\r\n            email = firebaseUser.getEmail();\r\n            doB = readUserDetail.birthday;\r\n            discount = readUserDetail.discount;\r\n\r\n            textViewFullName.setText(fullname);\r\n            textViewEmail.setText(email);\r\n            textViewDoB.setText(doB);\r\n            textViewDiscount.setText(discount);\r\n        }\r\n    }\r\n```\r\n\r\nFirebase\r\n\r\n[![FIREBASE][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/dkOu3.png\r\n\r\n\r\nReadWriteUserDetail class\r\n```\r\npublic class ReadWriteUserDetails {\r\n    public String birthday, discount;\r\n\r\n    public ReadWriteUserDetails(){};\r\n\r\n    public ReadWriteUserDetails(String textBirthday, String textDiscount){\r\n        this.birthday = textBirthday;\r\n        this.discount = textDiscount;\r\n    }\r\n}\r\n```","title":"How can I get the correct DatabaseReference","body":"<p>I am creating a user profile but I do not know how can I get the child node and display it in the user profile, How can I reference this correctly? I would greatly appreciate any comments or suggestion, thank you in advance!!</p>\n<p>USER PROFILE</p>\n<pre><code>private void showUserProfile( FirebaseUser firebaseUser) {\n\nString userID = firebaseUser.getUid();\n\nDatabaseReference referenceProfile = FirebaseDatabase.getInstance().getReference(&quot;Users&quot;); \n// 👆\nreferenceProfile.child(userID).addListenerForSingleValueEvent(new ValueEventListener() {\n    @Override\n    public void onDataChange(@NonNull DataSnapshot snapshot) {\n        ReadWriteUserDetails readUserDetail = snapshot.getValue(ReadWriteUserDetails.class);\n        if(readUserDetail != null){\n            fullname = firebaseUser.getDisplayName();\n            email = firebaseUser.getEmail();\n            doB = readUserDetail.birthday;\n            discount = readUserDetail.discount;\n\n            textViewFullName.setText(fullname);\n            textViewEmail.setText(email);\n            textViewDoB.setText(doB);\n            textViewDiscount.setText(discount);\n        }\n    }\n</code></pre>\n<p>Firebase</p>\n<p><a href=\"https://i.stack.imgur.com/dkOu3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dkOu3.png\" alt=\"FIREBASE\" /></a></p>\n<p>ReadWriteUserDetail class</p>\n<pre><code>public class ReadWriteUserDetails {\n    public String birthday, discount;\n\n    public ReadWriteUserDetails(){};\n\n    public ReadWriteUserDetails(String textBirthday, String textDiscount){\n        this.birthday = textBirthday;\n        this.discount = textDiscount;\n    }\n}\n</code></pre>\n"},{"tags":["java","data-structures"],"comments":[{"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"score":0,"creation_date":1686953351,"post_id":76493704,"comment_id":134874570,"body_markdown":"Did I understood correctly, that foodPreference+gender are attributes of a couple, not attributes of a single person?","body":"Did I understood correctly, that foodPreference+gender are attributes of a couple, not attributes of a single person?"},{"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"score":0,"creation_date":1686954217,"post_id":76493704,"comment_id":134874669,"body_markdown":"If so, does Person-&gt;gender attribute also exists and does it correlate with Pair&#39;s gender?","body":"If so, does Person-&gt;gender attribute also exists and does it correlate with Pair&#39;s gender?"},{"owner":{"account_id":247381,"reputation":76,"user_id":1147136,"display_name":"sankalpn"},"score":0,"creation_date":1686954370,"post_id":76493704,"comment_id":134874689,"body_markdown":"Would be easier to define right abstractions with some fundamental questions:\n1) What do the dimensions signify?\n2) Why do you need to store Pair instances in dimensions? In other words, why can these dimensional filters not apply on demand?\n3) What are read/write use cases?","body":"Would be easier to define right abstractions with some fundamental questions: 1) What do the dimensions signify? 2) Why do you need to store Pair instances in dimensions? In other words, why can these dimensional filters not apply on demand? 3) What are read/write use cases?"},{"owner":{"account_id":14448550,"reputation":230,"user_id":12118403,"display_name":"David Krell"},"score":0,"creation_date":1686954710,"post_id":76493704,"comment_id":134874735,"body_markdown":"@gdomo Yes the foodPreference and gender attributes are attributes of a Pair. A person also has a gender and a foodPreference. If both persons in the Pair are male then the gender is male, if both are female then the gender is female and if both are mixed then the gender is mixed. For the foodPreference: if the foodPreference from both persons is equal than the foodPreference of the Pair is the foodPreference from one of the Persons. If its (vegan, veggie) than its vegan. Pairs with one meat and one veggie/vegan person are not existing.","body":"@gdomo Yes the foodPreference and gender attributes are attributes of a Pair. A person also has a gender and a foodPreference. If both persons in the Pair are male then the gender is male, if both are female then the gender is female and if both are mixed then the gender is mixed. For the foodPreference: if the foodPreference from both persons is equal than the foodPreference of the Pair is the foodPreference from one of the Persons. If its (vegan, veggie) than its vegan. Pairs with one meat and one veggie/vegan person are not existing."},{"owner":{"account_id":14448550,"reputation":230,"user_id":12118403,"display_name":"David Krell"},"score":0,"creation_date":1686995150,"post_id":76493704,"comment_id":134877308,"body_markdown":"@sankalpn I am not sure if I understand the questions correctly. 1) The dimensions are not really signifying anything. I just have a list of Pairs and have to split it such that I can access for example Pairs that are meat eaters and are male. 2) I thought that it might not be good to apply the filters each time I have to access the lists, because I have to access it in numerous methods. 3) Let&#39;s say that I have the 3D List like presented, then I never add a Pair to these lists. But I remove Pairs in one method, but the other methods still need the list from the beginning.","body":"@sankalpn I am not sure if I understand the questions correctly. 1) The dimensions are not really signifying anything. I just have a list of Pairs and have to split it such that I can access for example Pairs that are meat eaters and are male. 2) I thought that it might not be good to apply the filters each time I have to access the lists, because I have to access it in numerous methods. 3) Let&#39;s say that I have the 3D List like presented, then I never add a Pair to these lists. But I remove Pairs in one method, but the other methods still need the list from the beginning."},{"owner":{"account_id":247381,"reputation":76,"user_id":1147136,"display_name":"sankalpn"},"score":0,"creation_date":1687216739,"post_id":76493704,"comment_id":134902865,"body_markdown":"@DavidKrell then it might be simpler to have a wrapper class, say PairManager which has a List&lt;Pair&gt; allPairs and a cache List&lt;Pair&gt; maleMeatEaters. First use, you filter, next use you only return from cache. That way, cache can also be transparent to callers. You add or remove pairs with a call to PairManager class and that can internally invalidate cache.","body":"@DavidKrell then it might be simpler to have a wrapper class, say PairManager which has a List&lt;Pair&gt; allPairs and a cache List&lt;Pair&gt; maleMeatEaters. First use, you filter, next use you only return from cache. That way, cache can also be transparent to callers. You add or remove pairs with a call to PairManager class and that can internally invalidate cache."}],"answers":[{"tags":[],"owner":{"account_id":8909811,"reputation":2612,"user_id":6650475,"display_name":"Andrew S"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686952675,"creation_date":1686952675,"answer_id":76493789,"question_id":76493704,"body_markdown":"Should be able to use a single `List&lt;Pair&gt;`, and apply various filters to get a subset of relevant pairs.\r\n\r\nFor example:\r\n\r\n    List&lt;Pair&gt; allPairs = List.of(new Pair(...), \r\n                                  new Pair(...), \r\n                                  new Pair(...),\r\n                                  ....);\r\n\r\n    List&lt;Pair&gt; allMaleCarnivores = allPairs.stream()\r\n                                      .filter(p -&gt; p.getPerson1().isCarnivore() \r\n                                                     &amp;&amp; p.getPerson2().isCarnivore()\r\n                                                     &amp;&amp; p.getPerson1().isMale()\r\n                                                     &amp;&amp; p.getPerson2().isMale()\r\n                                              )\r\n                                      .toList();\r\n   \r\n    \r\n     // then do something with the subset\r\n     allMaleCarnivores.forEach(p -&gt; eatSalad(p);\r\n","title":"How to refactor a three dimensional list?","body":"<p>Should be able to use a single <code>List&lt;Pair&gt;</code>, and apply various filters to get a subset of relevant pairs.</p>\n<p>For example:</p>\n<pre><code>List&lt;Pair&gt; allPairs = List.of(new Pair(...), \n                              new Pair(...), \n                              new Pair(...),\n                              ....);\n\nList&lt;Pair&gt; allMaleCarnivores = allPairs.stream()\n                                  .filter(p -&gt; p.getPerson1().isCarnivore() \n                                                 &amp;&amp; p.getPerson2().isCarnivore()\n                                                 &amp;&amp; p.getPerson1().isMale()\n                                                 &amp;&amp; p.getPerson2().isMale()\n                                          )\n                                  .toList();\n\n\n // then do something with the subset\n allMaleCarnivores.forEach(p -&gt; eatSalad(p);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1687004903,"creation_date":1686956468,"answer_id":76494006,"question_id":76493704,"body_markdown":"While @Andrew S answer works, I could also suggest to use a `Map` for quick retrieve of a desired Pairs. It would take constant (O(1)) time to look up instead of filtering the whole list (O(n)). The flip side is extra memory consumption.\r\n\r\nTo do that you have to extract a kind of `PairAttributes` class which holds foodPreference and gender with properly defined `equals` and `hashCode` methods. Use lombok or auto-generation by IDE. Don&#39;t forget to update them in case of new attributes.\r\n\r\n    public static class PairAttributes {\r\n        private final String foodPreference;\r\n        private final String gender;\r\n\r\n        public PairAttributes(Pair pair) {\r\n            this.foodPreference = pair.foodPreference;\r\n            this.gender = pair.gender;\r\n        }\r\n\r\n        public PairAttributes(String foodPreference, String gender) {\r\n            this.foodPreference = foodPreference;\r\n            this.gender = gender;\r\n        }\r\n\r\n        // getters\r\n\r\n        @Override\r\n        public boolean equals(Object o) {\r\n            if (this == o) return true;\r\n            if (o == null || getClass() != o.getClass()) return false;\r\n            PairAttributes that = (PairAttributes) o;\r\n            return foodPreference.equals(that.foodPreference) &amp;&amp; gender.equals(that.gender);\r\n        }\r\n\r\n        @Override\r\n        public int hashCode() {\r\n            return Objects.hash(foodPreference, gender);\r\n        }\r\n    }\r\n\r\nNow, just put given Pairs to a `HashMap` with `PairAttributes` as a key:\r\n\r\none by one\r\n\r\n        private final Map&lt;PairAttributes, List&lt;Pair&gt;&gt; pairsByAttributes = new HashMap&lt;&gt;();\r\n        ...\r\n        pairsByAttributes.computeIfAbsent(new PairAttributes(somePair), p -&gt; new ArrayList&lt;&gt;()).add(somePair);\r\nor if given a whole list:\r\n\r\n    List&lt;Pair&gt; allPairs = List.of(new Pair(...),\r\n            new Pair(...),\r\n            new Pair(...),\r\n            ...\r\n    );\r\n\r\n    Map&lt;PairAttributes, List&lt;Pair&gt;&gt; pairsByAttributes = allPairs\r\n            .stream().\r\n            collect(Collectors.groupingBy(PairAttributes::new));\r\n\r\nthen to get desired pairs just `get` them:\r\n\r\n    List&lt;Pair&gt; veggieMales = pairsByAttributes.get(\r\n            new PairAttributes(&quot;veggie&quot;, &quot;male&quot;)\r\n    );\r\n\r\n","title":"How to refactor a three dimensional list?","body":"<p>While @Andrew S answer works, I could also suggest to use a <code>Map</code> for quick retrieve of a desired Pairs. It would take constant (O(1)) time to look up instead of filtering the whole list (O(n)). The flip side is extra memory consumption.</p>\n<p>To do that you have to extract a kind of <code>PairAttributes</code> class which holds foodPreference and gender with properly defined <code>equals</code> and <code>hashCode</code> methods. Use lombok or auto-generation by IDE. Don't forget to update them in case of new attributes.</p>\n<pre><code>public static class PairAttributes {\n    private final String foodPreference;\n    private final String gender;\n\n    public PairAttributes(Pair pair) {\n        this.foodPreference = pair.foodPreference;\n        this.gender = pair.gender;\n    }\n\n    public PairAttributes(String foodPreference, String gender) {\n        this.foodPreference = foodPreference;\n        this.gender = gender;\n    }\n\n    // getters\n\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (o == null || getClass() != o.getClass()) return false;\n        PairAttributes that = (PairAttributes) o;\n        return foodPreference.equals(that.foodPreference) &amp;&amp; gender.equals(that.gender);\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(foodPreference, gender);\n    }\n}\n</code></pre>\n<p>Now, just put given Pairs to a <code>HashMap</code> with <code>PairAttributes</code> as a key:</p>\n<p>one by one</p>\n<pre><code>    private final Map&lt;PairAttributes, List&lt;Pair&gt;&gt; pairsByAttributes = new HashMap&lt;&gt;();\n    ...\n    pairsByAttributes.computeIfAbsent(new PairAttributes(somePair), p -&gt; new ArrayList&lt;&gt;()).add(somePair);\n</code></pre>\n<p>or if given a whole list:</p>\n<pre><code>List&lt;Pair&gt; allPairs = List.of(new Pair(...),\n        new Pair(...),\n        new Pair(...),\n        ...\n);\n\nMap&lt;PairAttributes, List&lt;Pair&gt;&gt; pairsByAttributes = allPairs\n        .stream().\n        collect(Collectors.groupingBy(PairAttributes::new));\n</code></pre>\n<p>then to get desired pairs just <code>get</code> them:</p>\n<pre><code>List&lt;Pair&gt; veggieMales = pairsByAttributes.get(\n        new PairAttributes(&quot;veggie&quot;, &quot;male&quot;)\n);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686959664,"creation_date":1686959664,"answer_id":76494147,"question_id":76493704,"body_markdown":"&gt; _&quot;... I read this question, where it is stated that if you are implementing a 3D list you are probably not handling your data right. ...&quot;_\r\n\r\nMore or less; typically, 3-dimensional arrays are used to represent mathematical matrices.\r\n\r\n&gt; _&quot;... In the mentioned question there is also an answer where a Map is used to store the data, but I am not really understanding this abstraction and I don&#39;t know how it could be used for my case. ...&quot;_\r\n\r\nIn computer science, a _map_ structure&amp;mdash;sometimes referred to as a _dictionary_, or an _[associative array](https://en.wikipedia.org/wiki/Associative_array)_&amp;mdash;it&#39;s simply a list of values, each of which are mapped to separate keys.&amp;nbsp; Similar to a literal _dictionary_, which has a word and a definition.\r\n\r\nHere is the _Java Tutorial_ on using the _Map_ collection.  \r\n_[The Map Interface (The Java&amp;trade; Tutorials &amp;gt; Collections &amp;gt; Interfaces)](https://docs.oracle.com/javase/tutorial/collections/interfaces/map.html)_.\r\n\r\nHere is a basic example.\r\n\r\n```java\r\nMap&lt;String, Integer&gt; map = new HashMap&lt;&gt;();\r\nmap.put(&quot;abc&quot;, 123);\r\nmap.put(&quot;def&quot;, 456);\r\n```\r\n\r\nAnd, you can retrieve values using the _&quot;key&quot;_.\r\n\r\n```java\r\nmap.get(&quot;abc&quot;);\r\n```\r\n\r\n&gt; _... Is there a better, cleaner way to do the storing of the Pairs, where I can still get only the Pairs which have foodPreference x and gender y or is my way with the three dimensional list the best way for my specific data?&quot;_\r\n\r\nYes, I&#39;ll demonstrate; you can use a single _ArrayList_.\r\n\r\nConsider the following objects, to hold your data.\r\n\r\n```java\r\nclass Pair {\r\n    Person personA, personB;\r\n}\r\n\r\nclass Person {\r\n    String name, location;\r\n    int age;\r\n    Gender gender;\r\n    FoodPreference foodPreference;\r\n}\r\n\r\nenum Gender {\r\n    MALE, FEMALE, MIXED\r\n}\r\n\r\nenum FoodPreference {\r\n    MEAT, VEGGIE, VEGAN\r\n}\r\n```\r\n\r\nFrom here, you can create new constructors for both _Person_, and _Pair_.  \r\nAdditionally, here I added a _toString_ method, as a way to debug the data.\r\n\r\n```java\r\nclass Pair {\r\n    Person personA, personB;\r\n\r\n    public Pair(Person personA, Person personB) {\r\n        this.personA = personA;\r\n        this.personB = personB;\r\n    }\r\n}\r\n\r\nclass Person {\r\n    String name, location;\r\n    int age;\r\n    Gender gender;\r\n    FoodPreference foodPreference;\r\n\r\n    public Person(Gender gender, FoodPreference foodPreference) {\r\n        this.gender = gender;\r\n        this.foodPreference = foodPreference;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return name;\r\n    }\r\n}\r\n```\r\n\r\nHere is an example of adding new items to the list.\r\n\r\n```java\r\nList&lt;Pair&gt; list = new ArrayList&lt;&gt;();\r\n\r\nPerson personA = new Person(&quot;personA&quot;, 1, Gender.MALE);\r\npersonA.foodPreference = FoodPreference.MEAT;\r\nPerson personB = new Person(&quot;personB&quot;, 2, Gender.FEMALE);\r\npersonB.foodPreference = FoodPreference.VEGGIE;\r\nlist.add(new Pair(personA, personB));\r\n\r\nPerson personC = new Person(&quot;personC&quot;, 3, Gender.MALE);\r\npersonC.foodPreference = FoodPreference.MEAT;\r\nPerson personD = new Person(&quot;personD&quot;, 4, Gender.FEMALE);\r\npersonD.foodPreference = FoodPreference.VEGAN;\r\nlist.add(new Pair(personC, personD));\r\n```\r\n\r\nAnd, here is an example of acquiring _Person_ objects, with a specific value.\r\n\r\n```java\r\nList&lt;Person&gt; find(List&lt;Pair&gt; list, FoodPreference foodPreference, Gender gender) {\r\n    List&lt;Person&gt; matches = new ArrayList&lt;&gt;();\r\n    Person person;\r\n    for (Pair pair : list) {\r\n        person = pair.personA;\r\n        if (person.foodPreference == foodPreference &amp;&amp; person.gender == gender)\r\n            matches.add(person);\r\n        person = pair.personB;\r\n        if (person.foodPreference == foodPreference &amp;&amp; person.gender == gender)\r\n            matches.add(person);\r\n    }\r\n    return matches;\r\n}\r\n```\r\n\r\nAnd, usage.\r\n\r\n```java\r\nList&lt;Person&gt; matches = find(list, FoodPreference.MEAT, Gender.MALE);\r\n```\r\n\r\nOutput\r\n\r\n```java\r\npersonA\r\npersonC\r\n```","title":"How to refactor a three dimensional list?","body":"<blockquote>\n<p><em>&quot;... I read this question, where it is stated that if you are implementing a 3D list you are probably not handling your data right. ...&quot;</em></p>\n</blockquote>\n<p>More or less; typically, 3-dimensional arrays are used to represent mathematical matrices.</p>\n<blockquote>\n<p><em>&quot;... In the mentioned question there is also an answer where a Map is used to store the data, but I am not really understanding this abstraction and I don't know how it could be used for my case. ...&quot;</em></p>\n</blockquote>\n<p>In computer science, a <em>map</em> structure—sometimes referred to as a <em>dictionary</em>, or an <em><a href=\"https://en.wikipedia.org/wiki/Associative_array\" rel=\"nofollow noreferrer\">associative array</a></em>—it's simply a list of values, each of which are mapped to separate keys.  Similar to a literal <em>dictionary</em>, which has a word and a definition.</p>\n<p>Here is the <em>Java Tutorial</em> on using the <em>Map</em> collection.<br />\n<em><a href=\"https://docs.oracle.com/javase/tutorial/collections/interfaces/map.html\" rel=\"nofollow noreferrer\">The Map Interface (The Java™ Tutorials &gt; Collections &gt; Interfaces)</a></em>.</p>\n<p>Here is a basic example.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;String, Integer&gt; map = new HashMap&lt;&gt;();\nmap.put(&quot;abc&quot;, 123);\nmap.put(&quot;def&quot;, 456);\n</code></pre>\n<p>And, you can retrieve values using the <em>&quot;key&quot;</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>map.get(&quot;abc&quot;);\n</code></pre>\n<blockquote>\n<p><em>... Is there a better, cleaner way to do the storing of the Pairs, where I can still get only the Pairs which have foodPreference x and gender y or is my way with the three dimensional list the best way for my specific data?&quot;</em></p>\n</blockquote>\n<p>Yes, I'll demonstrate; you can use a single <em>ArrayList</em>.</p>\n<p>Consider the following objects, to hold your data.</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Pair {\n    Person personA, personB;\n}\n\nclass Person {\n    String name, location;\n    int age;\n    Gender gender;\n    FoodPreference foodPreference;\n}\n\nenum Gender {\n    MALE, FEMALE, MIXED\n}\n\nenum FoodPreference {\n    MEAT, VEGGIE, VEGAN\n}\n</code></pre>\n<p>From here, you can create new constructors for both <em>Person</em>, and <em>Pair</em>.<br />\nAdditionally, here I added a <em>toString</em> method, as a way to debug the data.</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Pair {\n    Person personA, personB;\n\n    public Pair(Person personA, Person personB) {\n        this.personA = personA;\n        this.personB = personB;\n    }\n}\n\nclass Person {\n    String name, location;\n    int age;\n    Gender gender;\n    FoodPreference foodPreference;\n\n    public Person(Gender gender, FoodPreference foodPreference) {\n        this.gender = gender;\n        this.foodPreference = foodPreference;\n    }\n\n    @Override\n    public String toString() {\n        return name;\n    }\n}\n</code></pre>\n<p>Here is an example of adding new items to the list.</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Pair&gt; list = new ArrayList&lt;&gt;();\n\nPerson personA = new Person(&quot;personA&quot;, 1, Gender.MALE);\npersonA.foodPreference = FoodPreference.MEAT;\nPerson personB = new Person(&quot;personB&quot;, 2, Gender.FEMALE);\npersonB.foodPreference = FoodPreference.VEGGIE;\nlist.add(new Pair(personA, personB));\n\nPerson personC = new Person(&quot;personC&quot;, 3, Gender.MALE);\npersonC.foodPreference = FoodPreference.MEAT;\nPerson personD = new Person(&quot;personD&quot;, 4, Gender.FEMALE);\npersonD.foodPreference = FoodPreference.VEGAN;\nlist.add(new Pair(personC, personD));\n</code></pre>\n<p>And, here is an example of acquiring <em>Person</em> objects, with a specific value.</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Person&gt; find(List&lt;Pair&gt; list, FoodPreference foodPreference, Gender gender) {\n    List&lt;Person&gt; matches = new ArrayList&lt;&gt;();\n    Person person;\n    for (Pair pair : list) {\n        person = pair.personA;\n        if (person.foodPreference == foodPreference &amp;&amp; person.gender == gender)\n            matches.add(person);\n        person = pair.personB;\n        if (person.foodPreference == foodPreference &amp;&amp; person.gender == gender)\n            matches.add(person);\n    }\n    return matches;\n}\n</code></pre>\n<p>And, usage.</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Person&gt; matches = find(list, FoodPreference.MEAT, Gender.MALE);\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-java prettyprint-override\"><code>personA\npersonC\n</code></pre>\n"},{"tags":[],"owner":{"account_id":247381,"reputation":76,"user_id":1147136,"display_name":"sankalpn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691637759,"creation_date":1687217352,"answer_id":76510573,"question_id":76493704,"body_markdown":"After some discussion with OP, I think we have a layer of abstraction missing. Not including any necessary synchronized keywords, as I don&#39;t yet know all details.\r\n\r\n    public class PairManager {\r\n        List&lt;Pair&gt; allPairs;\r\n\r\n        // Add any cache worthy queries\r\n        List&lt;Pair&gt; maleMeatEaters;\r\n\r\n        public addPair(Pair newPair) {\r\n            allPairs.add(newPair);\r\n            // invalidate caches\r\n            maleMeatEaters = null;\r\n        }\r\n\r\n        public removePair(Pair pair) {\r\n            allPairs.remove(pair)\r\n            // invalidate caches\r\n            maleMeatEaters = null;\r\n        }\r\n\r\n        public List&lt;Pair&gt; listMaleMeatEaters() {\r\n            return maleMeatEaters == null ? filterMaleMeatEaters() : maleMeatEaters;\r\n        }\r\n\r\n        private List&lt;Pair&gt; filterMaleMeatEaters() {\r\n            maleMeatEaters = allPairs.stream()\r\n                .filter(pair -&gt; pair.getGender() == Gender.MALE)\r\n                .filter(pair -&gt; pair.getFoodPreference() == FoodPreference.MEAT)\r\n                .toList(); // pre-Java17 .collect(Collectors.toList());\r\n            return maleMeatEaters;\r\n        }\r\n    }","title":"How to refactor a three dimensional list?","body":"<p>After some discussion with OP, I think we have a layer of abstraction missing. Not including any necessary synchronized keywords, as I don't yet know all details.</p>\n<pre><code>public class PairManager {\n    List&lt;Pair&gt; allPairs;\n\n    // Add any cache worthy queries\n    List&lt;Pair&gt; maleMeatEaters;\n\n    public addPair(Pair newPair) {\n        allPairs.add(newPair);\n        // invalidate caches\n        maleMeatEaters = null;\n    }\n\n    public removePair(Pair pair) {\n        allPairs.remove(pair)\n        // invalidate caches\n        maleMeatEaters = null;\n    }\n\n    public List&lt;Pair&gt; listMaleMeatEaters() {\n        return maleMeatEaters == null ? filterMaleMeatEaters() : maleMeatEaters;\n    }\n\n    private List&lt;Pair&gt; filterMaleMeatEaters() {\n        maleMeatEaters = allPairs.stream()\n            .filter(pair -&gt; pair.getGender() == Gender.MALE)\n            .filter(pair -&gt; pair.getFoodPreference() == FoodPreference.MEAT)\n            .toList(); // pre-Java17 .collect(Collectors.toList());\n        return maleMeatEaters;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":14448550,"reputation":230,"user_id":12118403,"display_name":"David Krell"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76494006,"answer_count":4,"score":1,"last_activity_date":1691637759,"creation_date":1686951352,"question_id":76493704,"body_markdown":"I currently have a three dimensional list in my Java project. I am using it to store the following. I have a list of Pairs. A Pair has a gender (male, female or mixed) and a food preference (meat, veggie or vegan). \r\n\r\nIn my code I have to access sometimes only the pairs which have veggie as food preference and are male or other combinations. I first thought that a three dimensional list would be the best to do this. My 3D list looks like the following:\r\n\r\n    ArrayList&lt;ArrayList&lt;ArrayList&lt;Pair&gt;&gt;&gt; pairsSplitUp;\r\n\r\nThe list is filled with values such that if we access it we get the following:\r\n\r\n - Index 0: Index 0: all Pairs that are male and have meat as food Preference\r\n - Index 0: Index 1: all Pairs that are female and have meat as food Preference\r\n - Index 0: Index 2: all Pairs that are mixed and have meat as food Preference\r\n - Index 1: Index 0: all Pairs that are male and have veggie as food Preference\r\n - ...\r\n - Index 2: Index 0: all Pairs that are male and have vegan as food Preference\r\n - ...\r\n\r\nI first thought that this might be the best way to store this data, but then I read this [question](https://stackoverflow.com/questions/3102761/list-of-lists-of-lists/3102901#3102901), where it is stated that if you are implementing a 3D list you are probably not handling your data right. In the mentioned question there is also an [answer](https://stackoverflow.com/a/3102858/12118403) where a Map is used to store the data, but I am not really understanding this abstraction and I don&#39;t know how it could be used for my case. Because of this I wanted to ask, if there is a better, cleaner way for storing my data such that I can still access only the Pairs which are male and vegan etc. \r\n\r\nIn the code there exists a ```ArrayList&lt;Pair&gt; pairList``` which holds all the Pairs. The Pair class looks like the following:\r\n\r\n    public class Pair {\r\n        private Person person1;\r\n        private Person person2; \r\n        private String foodPreference;\r\n        private String gender;\r\n        \r\n        public Pair(Person person1, Person person2) {\r\n            this.person1 = person1;\r\n            this.person2 = person2;\r\n            this.foodPreference = decideFoodPreference();\r\n            this.gender = decideGender();\r\n        }\r\n     \r\n        /*\r\n          contains Getter for the fields and methods to decide and set the foodPreference\r\n          and the gender.\r\n        */\r\n\r\n    }\r\nThe Person class contains information about a specific Person like the name, age, gender, location and so on.\r\n\r\nIs there a better, cleaner way to do the storing of the Pairs, where I can still get only the Pairs which have foodPreference *x* and gender *y* or is my way with the three dimensional list the best way for my specific data?\r\n","title":"How to refactor a three dimensional list?","body":"<p>I currently have a three dimensional list in my Java project. I am using it to store the following. I have a list of Pairs. A Pair has a gender (male, female or mixed) and a food preference (meat, veggie or vegan).</p>\n<p>In my code I have to access sometimes only the pairs which have veggie as food preference and are male or other combinations. I first thought that a three dimensional list would be the best to do this. My 3D list looks like the following:</p>\n<pre><code>ArrayList&lt;ArrayList&lt;ArrayList&lt;Pair&gt;&gt;&gt; pairsSplitUp;\n</code></pre>\n<p>The list is filled with values such that if we access it we get the following:</p>\n<ul>\n<li>Index 0: Index 0: all Pairs that are male and have meat as food Preference</li>\n<li>Index 0: Index 1: all Pairs that are female and have meat as food Preference</li>\n<li>Index 0: Index 2: all Pairs that are mixed and have meat as food Preference</li>\n<li>Index 1: Index 0: all Pairs that are male and have veggie as food Preference</li>\n<li>...</li>\n<li>Index 2: Index 0: all Pairs that are male and have vegan as food Preference</li>\n<li>...</li>\n</ul>\n<p>I first thought that this might be the best way to store this data, but then I read this <a href=\"https://stackoverflow.com/questions/3102761/list-of-lists-of-lists/3102901#3102901\">question</a>, where it is stated that if you are implementing a 3D list you are probably not handling your data right. In the mentioned question there is also an <a href=\"https://stackoverflow.com/a/3102858/12118403\">answer</a> where a Map is used to store the data, but I am not really understanding this abstraction and I don't know how it could be used for my case. Because of this I wanted to ask, if there is a better, cleaner way for storing my data such that I can still access only the Pairs which are male and vegan etc.</p>\n<p>In the code there exists a <code>ArrayList&lt;Pair&gt; pairList</code> which holds all the Pairs. The Pair class looks like the following:</p>\n<pre><code>public class Pair {\n    private Person person1;\n    private Person person2; \n    private String foodPreference;\n    private String gender;\n    \n    public Pair(Person person1, Person person2) {\n        this.person1 = person1;\n        this.person2 = person2;\n        this.foodPreference = decideFoodPreference();\n        this.gender = decideGender();\n    }\n \n    /*\n      contains Getter for the fields and methods to decide and set the foodPreference\n      and the gender.\n    */\n\n}\n</code></pre>\n<p>The Person class contains information about a specific Person like the name, age, gender, location and so on.</p>\n<p>Is there a better, cleaner way to do the storing of the Pairs, where I can still get only the Pairs which have foodPreference <em>x</em> and gender <em>y</em> or is my way with the three dimensional list the best way for my specific data?</p>\n"},{"tags":["java","if-statement"],"comments":[{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":0,"creation_date":1691616078,"post_id":76871198,"comment_id":135517302,"body_markdown":"You entered six as the salary. `sum = 6`. `else if(sum &gt; 5)` is true. You need to enter salary as `2` to get `R1:1`. Your code will have `R1:2` though.","body":"You entered six as the salary. <code>sum = 6</code>. <code>else if(sum &gt; 5)</code> is true. You need to enter salary as <code>2</code> to get <code>R1:1</code>. Your code will have <code>R1:2</code> though."},{"owner":{"display_name":"user9035826"},"score":0,"creation_date":1691616587,"post_id":76871198,"comment_id":135517375,"body_markdown":"Your program is in an infinite loop with &quot;else if&quot; because sum=1.","body":"Your program is in an infinite loop with &quot;else if&quot; because sum=1."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":3,"creation_date":1691617707,"post_id":76871198,"comment_id":135517550,"body_markdown":"If you want to regularly create software, you will need some ability to debug program. If you want to become a professional developer, you will *need* some debugging skill. This is a good program to debug. One way is to run the program in a debugger. It allows you to set a breakpoint, at which program execution will pause. From that point, you can run the program one-step-at-a-time. That allows you to follow how the program branches, while monitoring the values of variables. This allows you to see how those values affect the control of the program.","body":"If you want to regularly create software, you will need some ability to debug program. If you want to become a professional developer, you will <i>need</i> some debugging skill. This is a good program to debug. One way is to run the program in a debugger. It allows you to set a breakpoint, at which program execution will pause. From that point, you can run the program one-step-at-a-time. That allows you to follow how the program branches, while monitoring the values of variables. This allows you to see how those values affect the control of the program."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":1,"creation_date":1691617760,"post_id":76871198,"comment_id":135517561,"body_markdown":"You might find more advice with Google:  https://www.google.com/search?q=how+to+debug+small+programs&amp;oq=how","body":"You might find more advice with Google:  <a href=\"https://www.google.com/search?q=how+to+debug+small+programs&amp;oq=how\" rel=\"nofollow noreferrer\">google.com/search?q=how+to+debug+small+programs&amp;oq=how</a>"},{"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"score":1,"creation_date":1691624903,"post_id":76871198,"comment_id":135518317,"body_markdown":"I see you are retrieving the modulus of `sum` within each `if` statement. *What exactly is this code suppose to achieve?*","body":"I see you are retrieving the modulus of <code>sum</code> within each <code>if</code> statement. <i>What exactly is this code suppose to achieve?</i>"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1691629793,"post_id":76871198,"comment_id":135518688,"body_markdown":"To add to the comment by @DevilsHnd, including, in the question, a clear statement of what the code is supposed to do is part of writing a good question.","body":"To add to the comment by @DevilsHnd, including, in the question, a clear statement of what the code is supposed to do is part of writing a good question."}],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691636798,"creation_date":1691634020,"answer_id":76872267,"question_id":76871198,"body_markdown":"&gt; _&quot;... I got different out put when use else and if else for the lase else if condition ...&quot;_\r\n\r\nWhen _sum_ is 1, the _while-loop_ will loop indefinitely.\r\n\r\nIf you use _else_, instead of _else if_, a value of _1_ will be matched, and the loop exits correctly.\r\n\r\nSince you are repeating the same procedure, just use a _loop_.  \r\nThis will match each of those conditions, and additionally checks to see when _sum_ equals _1_.\r\n\r\n```java\r\nint[] sums = { 5000, 2000, 1000, 500, 200, 100, 50, 10, 5, 2, 1 };\r\nfor (int value : sums) {\r\n    if (sum &gt; value || (sum == 1 &amp;&amp; value == 1)) {\r\n        System.out.printf(&quot;R%d : %d%n&quot;, value, sum / value);\r\n        sum %= value * (sum / value);\r\n    }\r\n}\r\n```\r\n\r\nHere are some example outputs,\r\n\r\n```none\r\nInput number of employees : 1\r\nInput Salary : 1 : 6\r\nTotal Salary ; 6\r\n====================\r\nR5 : 1\r\nR1 : 1\r\n```\r\n\r\n```none\r\nInput number of employees : 3\r\nInput Salary : 1 : 123\r\nInput Salary : 2 : 456\r\nInput Salary : 3 : 789\r\nTotal Salary ; 1368\r\n====================\r\nR1000 : 1\r\nR200 : 1\r\nR100 : 1\r\nR50 : 1\r\nR10 : 1\r\nR5 : 1\r\nR2 : 1\r\nR1 : 1\r\n```","title":"Using else and else if i got the errors","body":"<blockquote>\n<p><em>&quot;... I got different out put when use else and if else for the lase else if condition ...&quot;</em></p>\n</blockquote>\n<p>When <em>sum</em> is 1, the <em>while-loop</em> will loop indefinitely.</p>\n<p>If you use <em>else</em>, instead of <em>else if</em>, a value of <em>1</em> will be matched, and the loop exits correctly.</p>\n<p>Since you are repeating the same procedure, just use a <em>loop</em>.<br />\nThis will match each of those conditions, and additionally checks to see when <em>sum</em> equals <em>1</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>int[] sums = { 5000, 2000, 1000, 500, 200, 100, 50, 10, 5, 2, 1 };\nfor (int value : sums) {\n    if (sum &gt; value || (sum == 1 &amp;&amp; value == 1)) {\n        System.out.printf(&quot;R%d : %d%n&quot;, value, sum / value);\n        sum %= value * (sum / value);\n    }\n}\n</code></pre>\n<p>Here are some example outputs,</p>\n<pre class=\"lang-none prettyprint-override\"><code>Input number of employees : 1\nInput Salary : 1 : 6\nTotal Salary ; 6\n====================\nR5 : 1\nR1 : 1\n</code></pre>\n<pre class=\"lang-none prettyprint-override\"><code>Input number of employees : 3\nInput Salary : 1 : 123\nInput Salary : 2 : 456\nInput Salary : 3 : 789\nTotal Salary ; 1368\n====================\nR1000 : 1\nR200 : 1\nR100 : 1\nR50 : 1\nR10 : 1\nR5 : 1\nR2 : 1\nR1 : 1\n</code></pre>\n"}],"owner":{"account_id":23868173,"reputation":1,"user_id":17870236,"display_name":"Akila Umayanga"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691636798,"creation_date":1691614374,"question_id":76871198,"body_markdown":"```\r\nimport java.util.*;\r\nclass Example{\r\n\tpublic static void main(String args[]){\r\n\t\tScanner input =new Scanner(System.in);\r\n\t\tSystem.out.print(&quot;Input number of employees : &quot;);\r\n\t\tint num = input.nextInt();\r\n\t\tint sum = 0;\r\n\t\tfor (int i = 1;i&lt;=num;i++){\r\n\t\t\t\tSystem.out.print(&quot;Input Salary : &quot;+i+&quot; : &quot;);\r\n\t\t\t\tint sal = input.nextInt();\r\n\t\t\t\tsum += sal;\t\r\n\t\t}\r\n\t\tSystem.out.println(&quot;Total Salary ; &quot;+sum);\r\n\t\tSystem.out.println(&quot;====================&quot;);\r\n\t\twhile(sum!=0){\r\n\t\t\tif(sum &gt; 5000){\r\n\t\t\t\t\tint r5000 = sum/5000;\r\n\t\t\t\t\tSystem.out.println(&quot;R5000 : &quot;+r5000);\r\n\t\t\t\t\tsum %= 5000; \r\n\t\t\t\t}else if(sum &gt; 2000){\r\n\t\t\t\t\tint r2000 = sum/2000;\r\n\t\t\t\t\tSystem.out.println(&quot;R2000 : &quot;+r2000);\r\n\t\t\t\t\tsum %= 2000; \r\n\t\t\t\t}else if(sum &gt; 1000){\t\r\n\t\t\t\t\tint r1000 = sum/1000;\r\n\t\t\t\t\tSystem.out.println(&quot;R1000 : &quot;+r1000);\r\n\t\t\t\t\tsum %= 1000; \r\n\t\t\t\t\t}\r\n\t\t\t\telse if(sum &gt; 500){\t\r\n\t\t\t\t\tint r500 = sum/500;\r\n\t\t\t\t\tSystem.out.println(&quot;R500 : &quot;+r500);\r\n\t\t\t\t\tsum %= 500; \r\n\t\t\t\t}else if(sum &gt; 200){\t\r\n\t\t\t\t\tint r200 = sum/200;\r\n\t\t\t\t\tSystem.out.println(&quot;R200 : &quot;+r200);\r\n\t\t\t\t\tsum %= 200; \r\n\t\t\t\t}else if(sum &gt; 100){\t\r\n\t\t\t\t\tint r100 = sum/100;\r\n\t\t\t\t\tSystem.out.println(&quot;R100 : &quot;+r100);\r\n\t\t\t\t\tsum %= 100; \r\n\t\t\t\t}else if(sum &gt; 50){\t\r\n\t\t\t\t\tint r50 = sum/50;\r\n\t\t\t\t\tSystem.out.println(&quot;R50 : &quot;+50);\r\n\t\t\t\t\tsum %= 50; \r\n\t\t\t\t}else if(sum &gt; 10){\t\r\n\t\t\t\t\tint r10 = sum/10;\r\n\t\t\t\t\tSystem.out.println(&quot;R10 : &quot;+r10);\r\n\t\t\t\t\tsum %= 10; \r\n\t\t\t\t}else if(sum &gt; 5){\t\r\n\t\t\t\t\tint r5 = sum/5;\r\n\t\t\t\t\tSystem.out.println(&quot;R5 : &quot;+r5);\r\n\t\t\t\t\tsum %= 5; \r\n\t\t\t\t}else if(sum &gt; 2){\t\r\n\t\t\t\t\tint r2 = sum/2;\r\n\t\t\t\t\tSystem.out.println(&quot;R2 : &quot;+r2);\r\n\t\t\t\t\tsum %= 2; \r\n\t\t\t\t} else if(sum &gt; 1){\t//2nd time I used else instead of else if\r\n\t\t\t\t\tint r1 = sum/1;\r\n\t\t\t\t\tSystem.out.println(&quot;R1 : &quot;+r1);\r\n\t\t\t\t\tsum %= 1; \r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t}\r\n}\r\n```\r\n\r\nThis is my code I got different out put when use else and if else for the lase else if condition:\r\n\r\nusing else if I got below output but its wrong need to show R1 : 1 as same but when use else i got write answer explain me?\r\n\r\n&gt; Input number of employees : 1\r\n&gt;\r\n&gt; Input Salary : 1 : 6\r\n&gt;\r\n&gt; Total Salary ; 6\r\n&gt;\r\n&gt; ====================\r\n&gt;\r\n&gt; R5 : 1\r\n\r\nusing else/ else if, I got above output but its wrong need to show R1 : 1 as same but when use else i got write answer explain me?","title":"Using else and else if i got the errors","body":"<pre><code>import java.util.*;\nclass Example{\n    public static void main(String args[]){\n        Scanner input =new Scanner(System.in);\n        System.out.print(&quot;Input number of employees : &quot;);\n        int num = input.nextInt();\n        int sum = 0;\n        for (int i = 1;i&lt;=num;i++){\n                System.out.print(&quot;Input Salary : &quot;+i+&quot; : &quot;);\n                int sal = input.nextInt();\n                sum += sal; \n        }\n        System.out.println(&quot;Total Salary ; &quot;+sum);\n        System.out.println(&quot;====================&quot;);\n        while(sum!=0){\n            if(sum &gt; 5000){\n                    int r5000 = sum/5000;\n                    System.out.println(&quot;R5000 : &quot;+r5000);\n                    sum %= 5000; \n                }else if(sum &gt; 2000){\n                    int r2000 = sum/2000;\n                    System.out.println(&quot;R2000 : &quot;+r2000);\n                    sum %= 2000; \n                }else if(sum &gt; 1000){   \n                    int r1000 = sum/1000;\n                    System.out.println(&quot;R1000 : &quot;+r1000);\n                    sum %= 1000; \n                    }\n                else if(sum &gt; 500){ \n                    int r500 = sum/500;\n                    System.out.println(&quot;R500 : &quot;+r500);\n                    sum %= 500; \n                }else if(sum &gt; 200){    \n                    int r200 = sum/200;\n                    System.out.println(&quot;R200 : &quot;+r200);\n                    sum %= 200; \n                }else if(sum &gt; 100){    \n                    int r100 = sum/100;\n                    System.out.println(&quot;R100 : &quot;+r100);\n                    sum %= 100; \n                }else if(sum &gt; 50){ \n                    int r50 = sum/50;\n                    System.out.println(&quot;R50 : &quot;+50);\n                    sum %= 50; \n                }else if(sum &gt; 10){ \n                    int r10 = sum/10;\n                    System.out.println(&quot;R10 : &quot;+r10);\n                    sum %= 10; \n                }else if(sum &gt; 5){  \n                    int r5 = sum/5;\n                    System.out.println(&quot;R5 : &quot;+r5);\n                    sum %= 5; \n                }else if(sum &gt; 2){  \n                    int r2 = sum/2;\n                    System.out.println(&quot;R2 : &quot;+r2);\n                    sum %= 2; \n                } else if(sum &gt; 1){ //2nd time I used else instead of else if\n                    int r1 = sum/1;\n                    System.out.println(&quot;R1 : &quot;+r1);\n                    sum %= 1; \n                    }\n                }\n    }\n}\n</code></pre>\n<p>This is my code I got different out put when use else and if else for the lase else if condition:</p>\n<p>using else if I got below output but its wrong need to show R1 : 1 as same but when use else i got write answer explain me?</p>\n<blockquote>\n<p>Input number of employees : 1</p>\n<p>Input Salary : 1 : 6</p>\n<p>Total Salary ; 6</p>\n<p>====================</p>\n<p>R5 : 1</p>\n</blockquote>\n<p>using else/ else if, I got above output but its wrong need to show R1 : 1 as same but when use else i got write answer explain me?</p>\n"},{"tags":["java","audio","encryption","download","mp3"],"comments":[{"owner":{"account_id":85671,"reputation":40847,"user_id":238704,"display_name":"President James K. Polk"},"score":0,"creation_date":1571926650,"post_id":58539266,"comment_id":103408121,"body_markdown":"Please try to ask a real question related to the problem you are having. As it is, we have to guess your problem based on your statements of fact.","body":"Please try to ask a real question related to the problem you are having. As it is, we have to guess your problem based on your statements of fact."},{"owner":{"account_id":15559838,"reputation":553,"user_id":11225221,"display_name":"MrinmoyMk"},"score":0,"creation_date":1571935544,"post_id":58539266,"comment_id":103412684,"body_markdown":"Sorry, I have missed a point while asking the question which I have edited now. Actually I want help in how to encrypt audio files while downloading and decrypt it during playing. I have tried a lot to achieve it but did not succeeded.","body":"Sorry, I have missed a point while asking the question which I have edited now. Actually I want help in how to encrypt audio files while downloading and decrypt it during playing. I have tried a lot to achieve it but did not succeeded."},{"owner":{"account_id":149787,"reputation":160287,"user_id":362536,"accept_rate":88,"display_name":"Brad"},"score":0,"creation_date":1571962046,"post_id":58539266,"comment_id":103421930,"body_markdown":"What&#39;s the reason for this?  If you&#39;re trying to protect media files, know that the client that has the decryption key can always decrypt it so there&#39;s little point.","body":"What&#39;s the reason for this?  If you&#39;re trying to protect media files, know that the client that has the decryption key can always decrypt it so there&#39;s little point."},{"owner":{"account_id":15559838,"reputation":553,"user_id":11225221,"display_name":"MrinmoyMk"},"score":0,"creation_date":1572008404,"post_id":58539266,"comment_id":103437056,"body_markdown":"Yes, I know if anyone has decryption key they can decrypt it but I want to decrypt for the rest who are unauthorised. Could you please help with a code","body":"Yes, I know if anyone has decryption key they can decrypt it but I want to decrypt for the rest who are unauthorised. Could you please help with a code"},{"owner":{"account_id":1809323,"reputation":11348,"user_id":1645712,"accept_rate":73,"display_name":"gusto2"},"score":0,"creation_date":1572110308,"post_id":58539266,"comment_id":103462485,"body_markdown":"We still don&#39;t understand where is the problem. Just keeping it simple - you can use https for encryption in transit and give access to media only to authorized users. Or do you want to download the content encrypted? Then you cannot use the default player","body":"We still don&#39;t understand where is the problem. Just keeping it simple - you can use https for encryption in transit and give access to media only to authorized users. Or do you want to download the content encrypted? Then you cannot use the default player"},{"owner":{"account_id":15559838,"reputation":553,"user_id":11225221,"display_name":"MrinmoyMk"},"score":0,"creation_date":1572199363,"post_id":58539266,"comment_id":103478289,"body_markdown":"I am using exoplayer for playing songs. My problem is that without encryption the songs can be easily downloaded and anyone can re-upload it anywhere. So it leads to illegal uploading , so to prevent piracy we need to encrypt the songs while download. But I am unable to perform the encryption despite lot of try. Could you please help me with this.","body":"I am using exoplayer for playing songs. My problem is that without encryption the songs can be easily downloaded and anyone can re-upload it anywhere. So it leads to illegal uploading , so to prevent piracy we need to encrypt the songs while download. But I am unable to perform the encryption despite lot of try. Could you please help me with this."},{"owner":{"account_id":15559838,"reputation":553,"user_id":11225221,"display_name":"MrinmoyMk"},"score":0,"creation_date":1572200505,"post_id":58539266,"comment_id":103478539,"body_markdown":"yes I want to download the encrypted and then again decrypt it when required to play","body":"yes I want to download the encrypted and then again decrypt it when required to play"},{"owner":{"account_id":4351181,"reputation":342,"user_id":3551460,"display_name":"dp2050"},"score":1,"creation_date":1581944642,"post_id":58539266,"comment_id":106595073,"body_markdown":"Have you found a solution? I totally get your point. It seems, we need to use jetpack. But as of now, I have no idea how or what exactly","body":"Have you found a solution? I totally get your point. It seems, we need to use jetpack. But as of now, I have no idea how or what exactly"},{"owner":{"account_id":15559838,"reputation":553,"user_id":11225221,"display_name":"MrinmoyMk"},"score":0,"creation_date":1581950943,"post_id":58539266,"comment_id":106598652,"body_markdown":"Thanks for your comment but I have not found any solution. For the timing I am looking at different aspects of my project leaving it for other time. If you find anything tell me we could discuss about it.","body":"Thanks for your comment but I have not found any solution. For the timing I am looking at different aspects of my project leaving it for other time. If you find anything tell me we could discuss about it."},{"owner":{"account_id":15559838,"reputation":553,"user_id":11225221,"display_name":"MrinmoyMk"},"score":0,"creation_date":1587941584,"post_id":58539266,"comment_id":108701434,"body_markdown":"@dp2050 I just got a solution which I seem is working fine","body":"@dp2050 I just got a solution which I seem is working fine"},{"owner":{"account_id":11064233,"reputation":957,"user_id":8124496,"display_name":"coolbeatz71"},"score":0,"creation_date":1605022683,"post_id":58539266,"comment_id":114522506,"body_markdown":"Hey @MrinmoyMk can you share your solution, please? I also have the same problem","body":"Hey @MrinmoyMk can you share your solution, please? I also have the same problem"},{"owner":{"account_id":15559838,"reputation":553,"user_id":11225221,"display_name":"MrinmoyMk"},"score":0,"creation_date":1605980413,"post_id":58539266,"comment_id":114822100,"body_markdown":"@coolbeatz71 are you using exoplayer to play the audio files?","body":"@coolbeatz71 are you using exoplayer to play the audio files?"},{"owner":{"account_id":11064233,"reputation":957,"user_id":8124496,"display_name":"coolbeatz71"},"score":0,"creation_date":1606068546,"post_id":58539266,"comment_id":114841367,"body_markdown":"Yes, @MrinmoyMk  I am using exoplayer. But I want to decrypt the file as it&#39;s playing. Means, to decrypt byte by byte and play the decrypted stream without storing the decrypted file. This will avoid illegal copy","body":"Yes, @MrinmoyMk  I am using exoplayer. But I want to decrypt the file as it&#39;s playing. Means, to decrypt byte by byte and play the decrypted stream without storing the decrypted file. This will avoid illegal copy"},{"owner":{"account_id":1679016,"reputation":271,"user_id":1543784,"accept_rate":75,"display_name":"user1543784"},"score":0,"creation_date":1610287933,"post_id":58539266,"comment_id":116079367,"body_markdown":"@MrinmoyMk, you mentioned that you have found the solution. Can you share it here? Or the link(s) to helpful content?","body":"@MrinmoyMk, you mentioned that you have found the solution. Can you share it here? Or the link(s) to helpful content?"},{"owner":{"account_id":15559838,"reputation":553,"user_id":11225221,"display_name":"MrinmoyMk"},"score":0,"creation_date":1610299310,"post_id":58539266,"comment_id":116082996,"body_markdown":"Okay I have added the solution. Hope it helps you","body":"Okay I have added the solution. Hope it helps you"}],"answers":[{"tags":[],"owner":{"account_id":15559838,"reputation":553,"user_id":11225221,"display_name":"MrinmoyMk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1610299280,"creation_date":1610299280,"answer_id":65656209,"question_id":58539266,"body_markdown":"I have found a solution to my question and have been using it in my app since many days without any problem so I think it is good to answer my own question also as many users had asked for solution in comments. So just follow the below codes-\r\n\r\n\r\n      //Downloading and encrypting the audio\r\n\r\n      AesCipherDataSink encryptingDataSink = new AesCipherDataSink(\r\n          Util.getUtf8Bytes(&quot;4J95qN8RxBP8hTpk&quot;),\r\n          new DataSink() {\r\n           private FileOutputStream fileOutputStream;\r\n\r\n           @Override\r\n           public void open(DataSpec dataSpec) throws IOException {\r\n                   fileOutputStream = new FileOutputStream(file);\r\n            }\r\n\r\n           @Override\r\n           public void write(byte[] buffer, int offset, int length) throws IOException {\r\n              fileOutputStream.write(buffer, offset, length);\r\n            }\r\n\r\n           @Override\r\n           public void close() throws IOException {\r\n                 fileOutputStream.close();\r\n             }\r\n            });\r\n\r\n       // Push the data through the sink, and close everything.\r\n       encryptingDataSink.open(new DataSpec(Uri.fromFile(file)));\r\n       URL downloadURL = new URL(strings[0]);\r\n       HttpURLConnection connection = (HttpURLConnection) downloadURL.openConnection();\r\n       connection.setChunkedStreamingMode(0);\r\n       connection.setDoInput(true);\r\n       connection.connect();\r\n       if (connection.getResponseCode() != HttpURLConnection.HTTP_OK) {\r\n          return &quot;Server error&quot;;\r\n       }\r\n\r\n       InputStream inputStream = connection.getInputStream();\r\n       byte[] buffer = new byte[1024];\r\n       int newLength;\r\n       while ((newLength = inputStream.read(buffer)) &gt; 0) {\r\n            encryptingDataSink.write(buffer, 0, newLength);\r\n        }\r\n       encryptingDataSink.close();\r\n       inputStream.close();\r\n\r\n\r\n\r\n       //decrypting and playing the audio\r\n       DataSource.Factory factory =\r\n                    new CustomDataSourceFactory(\r\n                            context,\r\n                            new OkHttpDataSourceFactory(new OkHttpClient(), Util.getUserAgent(context,\r\n                                  context.getResources().getString(R.string.app_name)))\r\n                    );\r\n\r\n        MediaSource videoSource =\r\n                    new ProgressiveMediaSource.Factory(factory)\r\n                            .createMediaSource(Uri.parse(tempFile.getAbsolutePath()));\r\n        exoPlayer.addMediaSource(videoSource);\r\n\r\n        \r\n       //CustomDataSourceFactoryClass\r\n\r\n        public class CustomDataSourceFactory implements DataSource.Factory {\r\n\r\n          private final Context context;\r\n          private final DataSource.Factory baseDataSourceFactory;\r\n\r\n\r\n          public CustomDataSourceFactory(Context context, DataSource.Factory baseDataSourceFactory) {\r\n            this.context = context.getApplicationContext();\r\n            this.baseDataSourceFactory = baseDataSourceFactory;\r\n           }\r\n\r\n           @Override\r\n            public DataSource createDataSource() {\r\n             return new CryptedDefaultDataSource(context, baseDataSourceFactory.createDataSource());\r\n             }\r\n          }\r\n\r\n       //CryptedDafaultDataSource\r\n        public class CryptedDefaultDataSource implements DataSource {\r\n\r\n          private final List&lt;TransferListener&gt; transferListeners;\r\n          private final DataSource baseDataSource;\r\n          private @Nullable\r\n          DataSource fileDataSource,aesCipherDataSource,dataSource;\r\n          private Context context;\r\n\r\n          CryptedDefaultDataSource(Context context, DataSource baseDataSource) {\r\n             this.context=context;\r\n             this.baseDataSource = Assertions.checkNotNull(baseDataSource);\r\n             transferListeners = new ArrayList&lt;&gt;();\r\n          }\r\n\r\n          @Override\r\n          public void addTransferListener(TransferListener transferListener) {\r\n           baseDataSource.addTransferListener(transferListener);\r\n           transferListeners.add(transferListener);\r\n           maybeAddListenerToDataSource(fileDataSource, transferListener);\r\n           maybeAddListenerToDataSource(aesCipherDataSource, transferListener);\r\n          }\r\n\r\n         @Override\r\n         public long open(DataSpec dataSpec) throws IOException {\r\n            Assertions.checkState(dataSource == null);\r\n            if (Util.isLocalFileUri(dataSpec.uri)) {\r\n              dataSource = getCryptedDataSource(getFileDataSource());\r\n            } else {\r\n              dataSource = getCryptedDataSource(baseDataSource);\r\n            }\r\n           return dataSource.open(dataSpec);\r\n          }\r\n\r\n         @Override\r\n          public int read(byte[] buffer, int offset, int readLength) throws IOException {\r\n             return Assertions.checkNotNull(dataSource).read(buffer, offset, readLength);\r\n           }\r\n\r\n          @Nullable\r\n          @Override\r\n           public Uri getUri() {\r\n            return dataSource == null ? null : dataSource.getUri();\r\n          }\r\n\r\n          @Override\r\n          public Map&lt;String, List&lt;String&gt;&gt; getResponseHeaders() {\r\n              return dataSource == null\r\n                ? DataSource.super.getResponseHeaders()\r\n                : dataSource.getResponseHeaders();\r\n           }\r\n\r\n         @Override\r\n         public void close() throws IOException {\r\n           if (dataSource != null) {\r\n            try {\r\n                dataSource.close();\r\n            } finally {\r\n                dataSource = null;\r\n            }\r\n          }\r\n         }\r\n\r\n        private DataSource getFileDataSource() {\r\n          if (fileDataSource == null) {\r\n             fileDataSource = new FileDataSource();\r\n             addListenersToDataSource(fileDataSource);\r\n           }\r\n           return fileDataSource;\r\n         }\r\n\r\n        private DataSource getCryptedDataSource(DataSource upstreamDataSource) {\r\n          if (aesCipherDataSource == null) {\r\n            aesCipherDataSource = new AesCipherDataSource(&quot;4J95qN8RxBP8hTpk&quot;.getBytes(),upstreamDataSource);\r\n            addListenersToDataSource(aesCipherDataSource);\r\n          }\r\n          return aesCipherDataSource;\r\n         }\r\n\r\n       private void addListenersToDataSource(DataSource dataSource) {\r\n         for (int i = 0; i &lt; transferListeners.size(); i++) {\r\n            dataSource.addTransferListener(transferListeners.get(i));\r\n         }\r\n       }\r\n\r\n         private void maybeAddListenerToDataSource(\r\n            @Nullable DataSource dataSource, TransferListener listener) {\r\n          if (dataSource != null) {\r\n            dataSource.addTransferListener(listener);\r\n          }\r\n         }\r\n       }\r\n\r\n\r\n        ","title":"Encrypt audio mp3 file while downloading and decrypt it while playing in android","body":"<p>I have found a solution to my question and have been using it in my app since many days without any problem so I think it is good to answer my own question also as many users had asked for solution in comments. So just follow the below codes-</p>\n<pre><code>  //Downloading and encrypting the audio\n\n  AesCipherDataSink encryptingDataSink = new AesCipherDataSink(\n      Util.getUtf8Bytes(&quot;4J95qN8RxBP8hTpk&quot;),\n      new DataSink() {\n       private FileOutputStream fileOutputStream;\n\n       @Override\n       public void open(DataSpec dataSpec) throws IOException {\n               fileOutputStream = new FileOutputStream(file);\n        }\n\n       @Override\n       public void write(byte[] buffer, int offset, int length) throws IOException {\n          fileOutputStream.write(buffer, offset, length);\n        }\n\n       @Override\n       public void close() throws IOException {\n             fileOutputStream.close();\n         }\n        });\n\n   // Push the data through the sink, and close everything.\n   encryptingDataSink.open(new DataSpec(Uri.fromFile(file)));\n   URL downloadURL = new URL(strings[0]);\n   HttpURLConnection connection = (HttpURLConnection) downloadURL.openConnection();\n   connection.setChunkedStreamingMode(0);\n   connection.setDoInput(true);\n   connection.connect();\n   if (connection.getResponseCode() != HttpURLConnection.HTTP_OK) {\n      return &quot;Server error&quot;;\n   }\n\n   InputStream inputStream = connection.getInputStream();\n   byte[] buffer = new byte[1024];\n   int newLength;\n   while ((newLength = inputStream.read(buffer)) &gt; 0) {\n        encryptingDataSink.write(buffer, 0, newLength);\n    }\n   encryptingDataSink.close();\n   inputStream.close();\n\n\n\n   //decrypting and playing the audio\n   DataSource.Factory factory =\n                new CustomDataSourceFactory(\n                        context,\n                        new OkHttpDataSourceFactory(new OkHttpClient(), Util.getUserAgent(context,\n                              context.getResources().getString(R.string.app_name)))\n                );\n\n    MediaSource videoSource =\n                new ProgressiveMediaSource.Factory(factory)\n                        .createMediaSource(Uri.parse(tempFile.getAbsolutePath()));\n    exoPlayer.addMediaSource(videoSource);\n\n    \n   //CustomDataSourceFactoryClass\n\n    public class CustomDataSourceFactory implements DataSource.Factory {\n\n      private final Context context;\n      private final DataSource.Factory baseDataSourceFactory;\n\n\n      public CustomDataSourceFactory(Context context, DataSource.Factory baseDataSourceFactory) {\n        this.context = context.getApplicationContext();\n        this.baseDataSourceFactory = baseDataSourceFactory;\n       }\n\n       @Override\n        public DataSource createDataSource() {\n         return new CryptedDefaultDataSource(context, baseDataSourceFactory.createDataSource());\n         }\n      }\n\n   //CryptedDafaultDataSource\n    public class CryptedDefaultDataSource implements DataSource {\n\n      private final List&lt;TransferListener&gt; transferListeners;\n      private final DataSource baseDataSource;\n      private @Nullable\n      DataSource fileDataSource,aesCipherDataSource,dataSource;\n      private Context context;\n\n      CryptedDefaultDataSource(Context context, DataSource baseDataSource) {\n         this.context=context;\n         this.baseDataSource = Assertions.checkNotNull(baseDataSource);\n         transferListeners = new ArrayList&lt;&gt;();\n      }\n\n      @Override\n      public void addTransferListener(TransferListener transferListener) {\n       baseDataSource.addTransferListener(transferListener);\n       transferListeners.add(transferListener);\n       maybeAddListenerToDataSource(fileDataSource, transferListener);\n       maybeAddListenerToDataSource(aesCipherDataSource, transferListener);\n      }\n\n     @Override\n     public long open(DataSpec dataSpec) throws IOException {\n        Assertions.checkState(dataSource == null);\n        if (Util.isLocalFileUri(dataSpec.uri)) {\n          dataSource = getCryptedDataSource(getFileDataSource());\n        } else {\n          dataSource = getCryptedDataSource(baseDataSource);\n        }\n       return dataSource.open(dataSpec);\n      }\n\n     @Override\n      public int read(byte[] buffer, int offset, int readLength) throws IOException {\n         return Assertions.checkNotNull(dataSource).read(buffer, offset, readLength);\n       }\n\n      @Nullable\n      @Override\n       public Uri getUri() {\n        return dataSource == null ? null : dataSource.getUri();\n      }\n\n      @Override\n      public Map&lt;String, List&lt;String&gt;&gt; getResponseHeaders() {\n          return dataSource == null\n            ? DataSource.super.getResponseHeaders()\n            : dataSource.getResponseHeaders();\n       }\n\n     @Override\n     public void close() throws IOException {\n       if (dataSource != null) {\n        try {\n            dataSource.close();\n        } finally {\n            dataSource = null;\n        }\n      }\n     }\n\n    private DataSource getFileDataSource() {\n      if (fileDataSource == null) {\n         fileDataSource = new FileDataSource();\n         addListenersToDataSource(fileDataSource);\n       }\n       return fileDataSource;\n     }\n\n    private DataSource getCryptedDataSource(DataSource upstreamDataSource) {\n      if (aesCipherDataSource == null) {\n        aesCipherDataSource = new AesCipherDataSource(&quot;4J95qN8RxBP8hTpk&quot;.getBytes(),upstreamDataSource);\n        addListenersToDataSource(aesCipherDataSource);\n      }\n      return aesCipherDataSource;\n     }\n\n   private void addListenersToDataSource(DataSource dataSource) {\n     for (int i = 0; i &lt; transferListeners.size(); i++) {\n        dataSource.addTransferListener(transferListeners.get(i));\n     }\n   }\n\n     private void maybeAddListenerToDataSource(\n        @Nullable DataSource dataSource, TransferListener listener) {\n      if (dataSource != null) {\n        dataSource.addTransferListener(listener);\n      }\n     }\n   }\n\n\n    \n</code></pre>\n"}],"owner":{"account_id":15559838,"reputation":553,"user_id":11225221,"display_name":"MrinmoyMk"},"comment_count":15,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1121,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":65656209,"answer_count":1,"score":1,"last_activity_date":1691636662,"creation_date":1571912557,"question_id":58539266,"body_markdown":"I have an android application which downloads and play mp3 files. But I want to encrypt audio files while downloading and then decrypt to play it. I have already checked everywhere in the internet but did not find any solution. Could anyone please help me how to encrypt audio files while downloading and then decrypt during playing\r\nHere is my code to download the files\r\n \r\n         private void download() {\r\n        if (Constant.arrayList_play.size() &gt; 0) {\r\n\r\n            File root = new File(Environment.getExternalStorageDirectory().getAbsolutePath() + &quot;/Myapp/cache&quot;);\r\n            if (!root.exists()) {\r\n                root.mkdirs();\r\n            }\r\n\r\n            File file = new File(root, Constant.arrayList_play.get(viewpager.getCurrentItem()).getMp3Name() + &quot;.mp3&quot;);\r\n\r\n            if (!file.exists()) {\r\n\r\n                String url = Constant.arrayList_play.get(viewpager.getCurrentItem()).getMp3Url();\r\n                DownloadManager.Request request = new DownloadManager.Request(Uri.parse(url));\r\n                request.setDescription(getResources().getString(R.string.downloading) + &quot; - &quot; + Constant.arrayList_play.get(viewpager.getCurrentItem()).getMp3Name());\r\n                request.setTitle(Constant.arrayList_play.get(viewpager.getCurrentItem()).getMp3Name());\r\n                request.allowScanningByMediaScanner();\r\n                request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED);\r\n                request.setDestinationUri(Uri.parse(&quot;file://&quot; + Environment.getExternalStorageDirectory().getAbsolutePath() + &quot;/Myapp/cache/&quot; + Constant.arrayList_play.get(viewpager.getCurrentItem()).getMp3Name() + &quot;.mp3&quot;));\r\n                DownloadManager manager = (DownloadManager) getSystemService(Context.DOWNLOAD_SERVICE);\r\n                manager.enqueue(request);\r\n\r\n                new AsyncTask&lt;String, String, String&gt;() {\r\n                    @Override\r\n                    protected String doInBackground(String... strings) {\r\n                        String json = JsonUtils.getJSONString(Constant.URL_DOWNLOAD_COUNT + Constant.arrayList_play.get(viewpager.getCurrentItem()).getId());\r\n                        Log.e(&quot;aaa - &quot;, json);\r\n                        return null;\r\n                    }\r\n                }.execute();\r\n                Toast.makeText(MainActivity.this, getResources().getString(R.string.downloading), Toast.LENGTH_SHORT).show();\r\n            } else {\r\n                Toast.makeText(MainActivity.this, getResources().getString(R.string.already_download), Toast.LENGTH_SHORT).show();\r\n            }\r\n        } else {\r\n            Toast.makeText(MainActivity.this, getResources().getString(R.string.no_song_selected), Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\nSo could you please help me with a code.","title":"Encrypt audio mp3 file while downloading and decrypt it while playing in android","body":"<p>I have an android application which downloads and play mp3 files. But I want to encrypt audio files while downloading and then decrypt to play it. I have already checked everywhere in the internet but did not find any solution. Could anyone please help me how to encrypt audio files while downloading and then decrypt during playing\nHere is my code to download the files</p>\n\n<pre><code>     private void download() {\n    if (Constant.arrayList_play.size() &gt; 0) {\n\n        File root = new File(Environment.getExternalStorageDirectory().getAbsolutePath() + \"/Myapp/cache\");\n        if (!root.exists()) {\n            root.mkdirs();\n        }\n\n        File file = new File(root, Constant.arrayList_play.get(viewpager.getCurrentItem()).getMp3Name() + \".mp3\");\n\n        if (!file.exists()) {\n\n            String url = Constant.arrayList_play.get(viewpager.getCurrentItem()).getMp3Url();\n            DownloadManager.Request request = new DownloadManager.Request(Uri.parse(url));\n            request.setDescription(getResources().getString(R.string.downloading) + \" - \" + Constant.arrayList_play.get(viewpager.getCurrentItem()).getMp3Name());\n            request.setTitle(Constant.arrayList_play.get(viewpager.getCurrentItem()).getMp3Name());\n            request.allowScanningByMediaScanner();\n            request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED);\n            request.setDestinationUri(Uri.parse(\"file://\" + Environment.getExternalStorageDirectory().getAbsolutePath() + \"/Myapp/cache/\" + Constant.arrayList_play.get(viewpager.getCurrentItem()).getMp3Name() + \".mp3\"));\n            DownloadManager manager = (DownloadManager) getSystemService(Context.DOWNLOAD_SERVICE);\n            manager.enqueue(request);\n\n            new AsyncTask&lt;String, String, String&gt;() {\n                @Override\n                protected String doInBackground(String... strings) {\n                    String json = JsonUtils.getJSONString(Constant.URL_DOWNLOAD_COUNT + Constant.arrayList_play.get(viewpager.getCurrentItem()).getId());\n                    Log.e(\"aaa - \", json);\n                    return null;\n                }\n            }.execute();\n            Toast.makeText(MainActivity.this, getResources().getString(R.string.downloading), Toast.LENGTH_SHORT).show();\n        } else {\n            Toast.makeText(MainActivity.this, getResources().getString(R.string.already_download), Toast.LENGTH_SHORT).show();\n        }\n    } else {\n        Toast.makeText(MainActivity.this, getResources().getString(R.string.no_song_selected), Toast.LENGTH_SHORT).show();\n    }\n}\n</code></pre>\n\n<p>So could you please help me with a code.</p>\n"},{"tags":["java","maven","selenium-webdriver","testng","software-quality"],"comments":[{"owner":{"account_id":19680594,"reputation":149,"user_id":14407807,"display_name":"Farha Mansuri"},"score":0,"creation_date":1691555337,"post_id":76864534,"comment_id":135505828,"body_markdown":"Have you written javascript or jquery for your calendar?","body":"Have you written javascript or jquery for your calendar?"},{"owner":{"account_id":14433320,"reputation":16,"user_id":10426045,"display_name":"Fahim"},"score":0,"creation_date":1691557599,"post_id":76864534,"comment_id":135506056,"body_markdown":"No, I have not written any.","body":"No, I have not written any."}],"answers":[{"tags":[],"owner":{"account_id":10299692,"reputation":5719,"user_id":7598774,"accept_rate":75,"display_name":"Shawn"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691571025,"creation_date":1691571025,"answer_id":76866051,"question_id":76864534,"body_markdown":"**Refer the below working code with explanation:**\r\n````\r\npublic static void main(String[] args) {\r\n    // TODO Auto-generated method stub\r\n    WebDriver driver = new ChromeDriver();\r\n\tdriver.manage().window().maximize();\r\n\tdriver.get(&quot;https://www.wufoo.com/html5/date-type/&quot;);\r\n\tWebDriverWait wait = new WebDriverWait(driver,Duration.ofSeconds(30));\r\n\t// below line will accept cookies\r\n\twait.until(ExpectedConditions.elementToBeClickable(By.id(&quot;onetrust-accept-btn-handler&quot;))).click();\r\n\t\t\r\n\t// below 2 lines will get the next Monday in dd/MM/yyyy format\r\n\tDateTimeFormatter dtf = DateTimeFormatter.ofPattern(&quot;dd/MM/yyyy&quot;);  \r\n\tLocalDateTime now = LocalDateTime.now();\r\n\tString nextMonday = Objects.toString(dtf.format(now.with(TemporalAdjusters.nextOrSame(DayOfWeek.MONDAY))));\r\n\t\t\r\n\t// below line will send next Monday&#39;s date to date picker input text box\r\n\twait.until(ExpectedConditions.elementToBeClickable(By.name(&quot;date&quot;))).sendKeys(nextMonday);\r\n}\r\n````\r\n\r\n**Required imports:**\r\n````\r\nimport java.time.DayOfWeek;\r\nimport java.time.Duration;\r\nimport java.time.LocalDateTime;\r\nimport java.time.format.DateTimeFormatter;\r\nimport java.time.temporal.TemporalAdjusters;\r\nimport java.util.Objects;\r\nimport org.openqa.selenium.By;\r\nimport org.openqa.selenium.WebDriver;\r\nimport org.openqa.selenium.chrome.ChromeDriver;\r\nimport org.openqa.selenium.support.ui.ExpectedConditions;\r\nimport org.openqa.selenium.support.ui.WebDriverWait;\r\n````\r\n\r\n**Result:**\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/mGqqZ.png","title":"How to select today from html date picker instead of just putting the date there using selenuim and testng for a maven project","body":"<p><strong>Refer the below working code with explanation:</strong></p>\n<pre><code>public static void main(String[] args) {\n    // TODO Auto-generated method stub\n    WebDriver driver = new ChromeDriver();\n    driver.manage().window().maximize();\n    driver.get(&quot;https://www.wufoo.com/html5/date-type/&quot;);\n    WebDriverWait wait = new WebDriverWait(driver,Duration.ofSeconds(30));\n    // below line will accept cookies\n    wait.until(ExpectedConditions.elementToBeClickable(By.id(&quot;onetrust-accept-btn-handler&quot;))).click();\n        \n    // below 2 lines will get the next Monday in dd/MM/yyyy format\n    DateTimeFormatter dtf = DateTimeFormatter.ofPattern(&quot;dd/MM/yyyy&quot;);  \n    LocalDateTime now = LocalDateTime.now();\n    String nextMonday = Objects.toString(dtf.format(now.with(TemporalAdjusters.nextOrSame(DayOfWeek.MONDAY))));\n        \n    // below line will send next Monday's date to date picker input text box\n    wait.until(ExpectedConditions.elementToBeClickable(By.name(&quot;date&quot;))).sendKeys(nextMonday);\n}\n</code></pre>\n<p><strong>Required imports:</strong></p>\n<pre><code>import java.time.DayOfWeek;\nimport java.time.Duration;\nimport java.time.LocalDateTime;\nimport java.time.format.DateTimeFormatter;\nimport java.time.temporal.TemporalAdjusters;\nimport java.util.Objects;\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.chrome.ChromeDriver;\nimport org.openqa.selenium.support.ui.ExpectedConditions;\nimport org.openqa.selenium.support.ui.WebDriverWait;\n</code></pre>\n<p><strong>Result:</strong></p>\n<p><a href=\"https://i.stack.imgur.com/mGqqZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mGqqZ.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":26682848,"reputation":3533,"user_id":20292589,"display_name":"Yaroslavm"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691571248,"creation_date":1691571248,"answer_id":76866086,"question_id":76864534,"body_markdown":"It&#39;s not easy to do, as far as opened calendar is actually not DOM element.\r\nSo &#39;user behaviour&#39; as native click you can only simulate as clicking by coordinates (which I suggest you not to do).\r\n\r\nHowever. you can pass date in input itself via `sendKeys`, that would be easiest solution in your case.\r\n\r\n```java\r\nWebElement dateElement = wdwait.until(ExpectedConditions.visibilityOfElementLocated(new By.ByCssSelector(&quot;[type=date]&quot;)));\r\nLocalDate currentDate = LocalDate.now();\r\nDateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;ddMMyyyy&quot;);\r\ndateElement.sendKeys(currentDate.format(formatter));\r\n```","title":"How to select today from html date picker instead of just putting the date there using selenuim and testng for a maven project","body":"<p>It's not easy to do, as far as opened calendar is actually not DOM element.\nSo 'user behaviour' as native click you can only simulate as clicking by coordinates (which I suggest you not to do).</p>\n<p>However. you can pass date in input itself via <code>sendKeys</code>, that would be easiest solution in your case.</p>\n<pre class=\"lang-java prettyprint-override\"><code>WebElement dateElement = wdwait.until(ExpectedConditions.visibilityOfElementLocated(new By.ByCssSelector(&quot;[type=date]&quot;)));\nLocalDate currentDate = LocalDate.now();\nDateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;ddMMyyyy&quot;);\ndateElement.sendKeys(currentDate.format(formatter));\n</code></pre>\n"}],"owner":{"account_id":14433320,"reputation":16,"user_id":10426045,"display_name":"Fahim"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691635588,"creation_date":1691554545,"question_id":76864534,"body_markdown":"I can not click the today button in calender. here is an example in this website **&lt;https://www.wufoo.com/html5/date-type/&gt;**. `&lt;input type=&quot;date&quot;&gt;` this is the html for date i am talking about. how to select and click today button in this.\r\n\r\n[![here i want to click this Today button](https://i.stack.imgur.com/SIuoK.png)](https://i.stack.imgur.com/SIuoK.png).\r\n\r\nI could send the date value in the date input field. But I am expecting to click the today button instead of sending the date as input\r\n\r\nHere is the pom.xml file\r\n\r\n```\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n  &lt;groupId&gt;org.example&lt;/groupId&gt;\r\n  &lt;artifactId&gt;delete_it&lt;/artifactId&gt;\r\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n  &lt;packaging&gt;jar&lt;/packaging&gt;\r\n\r\n  &lt;name&gt;delete_it&lt;/name&gt;\r\n  &lt;url&gt;http://maven.apache.org&lt;/url&gt;\r\n\r\n  &lt;properties&gt;\r\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n  &lt;/properties&gt;\r\n\r\n  &lt;dependencies&gt;\r\n    &lt;!-- https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-java --&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n      &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\r\n      &lt;version&gt;3.141.59&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\r\n      &lt;artifactId&gt;guava&lt;/artifactId&gt;\r\n      &lt;version&gt;31.0.1-jre&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.testng&lt;/groupId&gt;\r\n      &lt;artifactId&gt;testng&lt;/artifactId&gt;\r\n      &lt;version&gt;6.9.8&lt;/version&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;!-- https://mvnrepository.com/artifact/io.github.bonigarcia/webdrivermanager --&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\r\n      &lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\r\n      &lt;version&gt;5.3.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;!-- https://mvnrepository.com/artifact/org.slf4j/slf4j-api --&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n      &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n      &lt;version&gt;1.7.36&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;!-- https://mvnrepository.com/artifact/com.googlecode.json-simple/json-simple --&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.googlecode.json-simple&lt;/groupId&gt;\r\n      &lt;artifactId&gt;json-simple&lt;/artifactId&gt;\r\n      &lt;version&gt;1.1.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n      &lt;artifactId&gt;selenium-firefox-driver&lt;/artifactId&gt;\r\n      &lt;version&gt;4.1.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\n\r\n\r\n  &lt;/dependencies&gt;\r\n  &lt;build&gt;\r\n    &lt;plugins&gt;\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n        &lt;configuration&gt;\r\n          &lt;source&gt;1.8&lt;/source&gt;\r\n          &lt;target&gt;1.8&lt;/target&gt;\r\n        &lt;/configuration&gt;\r\n      &lt;/plugin&gt;\r\n    &lt;/plugins&gt;\r\n  &lt;/build&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\nThis is the test file\r\n\r\n```\r\npackage org.example;\r\n\r\nimport io.github.bonigarcia.wdm.WebDriverManager;\r\nimport org.openqa.selenium.By;\r\nimport org.openqa.selenium.WebDriver;\r\nimport org.openqa.selenium.chrome.ChromeDriver;\r\nimport org.testng.annotations.Test;\r\n\r\nimport java.time.LocalDate;\r\n\r\npublic class AppTest\r\n{\r\n    public static WebDriver driver;\r\n    public LocalDate today = LocalDate.now();\r\n\r\n    @Test\r\n    public void wow() throws InterruptedException {\r\n        WebDriverManager.chromedriver().setup();\r\n        driver = new ChromeDriver();\r\n        driver.manage().window().maximize();\r\n        driver.get(&quot;https://www.wufoo.com/html5/date-type/&quot;);\r\n        Thread.sleep(0500);\r\n        driver.findElement(By.xpath(&quot;//*[@id=\\&quot;main\\&quot;]/section[1]/div/p[3]/input&quot;)).click(); // want to click the calender button. but it is clicking the text input field\r\n    }\r\n\r\n\r\n}\r\n```","title":"How to select today from html date picker instead of just putting the date there using selenuim and testng for a maven project","body":"<p>I can not click the today button in calender. here is an example in this website <strong><a href=\"https://www.wufoo.com/html5/date-type/\" rel=\"nofollow noreferrer\">https://www.wufoo.com/html5/date-type/</a></strong>. <code>&lt;input type=&quot;date&quot;&gt;</code> this is the html for date i am talking about. how to select and click today button in this.</p>\n<p><a href=\"https://i.stack.imgur.com/SIuoK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SIuoK.png\" alt=\"here i want to click this Today button\" /></a>.</p>\n<p>I could send the date value in the date input field. But I am expecting to click the today button instead of sending the date as input</p>\n<p>Here is the pom.xml file</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n  &lt;groupId&gt;org.example&lt;/groupId&gt;\n  &lt;artifactId&gt;delete_it&lt;/artifactId&gt;\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n  &lt;packaging&gt;jar&lt;/packaging&gt;\n\n  &lt;name&gt;delete_it&lt;/name&gt;\n  &lt;url&gt;http://maven.apache.org&lt;/url&gt;\n\n  &lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n  &lt;/properties&gt;\n\n  &lt;dependencies&gt;\n    &lt;!-- https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-java --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n      &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\n      &lt;version&gt;3.141.59&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\n      &lt;artifactId&gt;guava&lt;/artifactId&gt;\n      &lt;version&gt;31.0.1-jre&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.testng&lt;/groupId&gt;\n      &lt;artifactId&gt;testng&lt;/artifactId&gt;\n      &lt;version&gt;6.9.8&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/io.github.bonigarcia/webdrivermanager --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\n      &lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\n      &lt;version&gt;5.3.0&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/org.slf4j/slf4j-api --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n      &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n      &lt;version&gt;1.7.36&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/com.googlecode.json-simple/json-simple --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;com.googlecode.json-simple&lt;/groupId&gt;\n      &lt;artifactId&gt;json-simple&lt;/artifactId&gt;\n      &lt;version&gt;1.1.1&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n      &lt;artifactId&gt;selenium-firefox-driver&lt;/artifactId&gt;\n      &lt;version&gt;4.1.1&lt;/version&gt;\n    &lt;/dependency&gt;\n\n\n\n\n  &lt;/dependencies&gt;\n  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n        &lt;configuration&gt;\n          &lt;source&gt;1.8&lt;/source&gt;\n          &lt;target&gt;1.8&lt;/target&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>This is the test file</p>\n<pre><code>package org.example;\n\nimport io.github.bonigarcia.wdm.WebDriverManager;\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.chrome.ChromeDriver;\nimport org.testng.annotations.Test;\n\nimport java.time.LocalDate;\n\npublic class AppTest\n{\n    public static WebDriver driver;\n    public LocalDate today = LocalDate.now();\n\n    @Test\n    public void wow() throws InterruptedException {\n        WebDriverManager.chromedriver().setup();\n        driver = new ChromeDriver();\n        driver.manage().window().maximize();\n        driver.get(&quot;https://www.wufoo.com/html5/date-type/&quot;);\n        Thread.sleep(0500);\n        driver.findElement(By.xpath(&quot;//*[@id=\\&quot;main\\&quot;]/section[1]/div/p[3]/input&quot;)).click(); // want to click the calender button. but it is clicking the text input field\n    }\n\n\n}\n</code></pre>\n"},{"tags":["java","sublimetext4"],"owner":{"account_id":1153695,"reputation":1,"user_id":1134875,"display_name":"John"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691634923,"creation_date":1691634923,"question_id":76872321,"body_markdown":"imports like the following:\r\n```\r\n    import org.lwjgl.Version;\r\n    import org.jsoup.select.Elements;\r\n    import org.slf4j.Logger;\r\n```\r\nhave red squiggly lines under them and the error reads cannot resolve import.\r\nIt all complies and runs but, there is no autocomplete.\r\nThe CLASSPATH is set to &#39;/usr/share/java&#39; and the jars are definitely there.\r\nThe latest of LSP and jdtls are installed and Submlie Text is version 4.\r\n\r\n\r\n\r\nI&#39;ve read all the documentation i can find from sublime text and lsp.\r\n\r\nI&#39;ve tried different build systems, gradle, maven and ant but I don&#39;t see how that would make a difference.\r\n\r\nWhat are some likely reasons autocomplete isn&#39;t working? \r\nIs lsp actually suppose to do autocomplete if it has access to the jars files?\r\n\r\n","title":"sublime text lsp-jdtls cannot resolve imports","body":"<p>imports like the following:</p>\n<pre><code>    import org.lwjgl.Version;\n    import org.jsoup.select.Elements;\n    import org.slf4j.Logger;\n</code></pre>\n<p>have red squiggly lines under them and the error reads cannot resolve import.\nIt all complies and runs but, there is no autocomplete.\nThe CLASSPATH is set to '/usr/share/java' and the jars are definitely there.\nThe latest of LSP and jdtls are installed and Submlie Text is version 4.</p>\n<p>I've read all the documentation i can find from sublime text and lsp.</p>\n<p>I've tried different build systems, gradle, maven and ant but I don't see how that would make a difference.</p>\n<p>What are some likely reasons autocomplete isn't working?\nIs lsp actually suppose to do autocomplete if it has access to the jars files?</p>\n"},{"tags":["java","spring-boot","docker"],"comments":[{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1691633385,"post_id":76872233,"comment_id":135518986,"body_markdown":"is the jar a uber jar? Why not just build in the dependency into the image or include it in the jar?","body":"is the jar a uber jar? Why not just build in the dependency into the image or include it in the jar?"},{"owner":{"account_id":9337172,"reputation":1341,"user_id":6931023,"accept_rate":50,"display_name":"gladiator"},"score":0,"creation_date":1691635860,"post_id":76872233,"comment_id":135519183,"body_markdown":"In your pom change junit dependency to be included in jar, also junit test cases be included in jar","body":"In your pom change junit dependency to be included in jar, also junit test cases be included in jar"},{"owner":{"account_id":13863020,"reputation":137023,"user_id":10008173,"display_name":"David Maze"},"score":0,"creation_date":1691661299,"post_id":76872233,"comment_id":135522813,"body_markdown":"A typical Java image _only_ contains a JRE and the jar file built out of the main application code; the image wouldn&#39;t contain the source code or compiled unit tests at all, which means you can&#39;t run tests _after_ you&#39;ve built the image.  Can you run the tests on your host system _before_ building the image?","body":"A typical Java image <i>only</i> contains a JRE and the jar file built out of the main application code; the image wouldn&#39;t contain the source code or compiled unit tests at all, which means you can&#39;t run tests <i>after</i> you&#39;ve built the image.  Can you run the tests on your host system <i>before</i> building the image?"},{"owner":{"account_id":13863020,"reputation":137023,"user_id":10008173,"display_name":"David Maze"},"score":0,"creation_date":1691661355,"post_id":76872233,"comment_id":135522826,"body_markdown":"(If your image doesn&#39;t look like that, please [edit] the question to include a [mcve].)","body":"(If your image doesn&#39;t look like that, please <a href=\"https://stackoverflow.com/posts/76872233/edit\">edit</a> the question to include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>.)"},{"owner":{"account_id":11044876,"reputation":142,"user_id":11922928,"display_name":"Anıl Şenocak"},"score":0,"creation_date":1692254016,"post_id":76872233,"comment_id":135598865,"body_markdown":"This is not good enough to understand the problem here, please share the code block along with what you&#39;ve done.","body":"This is not good enough to understand the problem here, please share the code block along with what you&#39;ve done."}],"owner":{"account_id":29195854,"reputation":11,"user_id":22366972,"display_name":"Cristian Salazar"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1691633211,"creation_date":1691633211,"question_id":76872233,"body_markdown":"I have a springboot application which is deployed using docker. Its Dockerfile has ENTRYPOINT[&quot;java&quot;], so I can execute the application with a java command, but I need to execute on demand the unit tests within the springboot application using docker. How I can do that?\r\n\r\nI tried something like this \r\n\r\n`docker run -it --rm --entrypoint mvn test-java-service test -Dtest=com.service.integration.ControllerTest`, but I get Junit dependecy is required.","title":"I have a docker image of a springboot application with ENTRYPOINT[&quot;java&quot;]. How I can execute a unit test within the application?","body":"<p>I have a springboot application which is deployed using docker. Its Dockerfile has ENTRYPOINT[&quot;java&quot;], so I can execute the application with a java command, but I need to execute on demand the unit tests within the springboot application using docker. How I can do that?</p>\n<p>I tried something like this</p>\n<p><code>docker run -it --rm --entrypoint mvn test-java-service test -Dtest=com.service.integration.ControllerTest</code>, but I get Junit dependecy is required.</p>\n"},{"tags":["java","javafx","fxml"],"comments":[{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":2,"creation_date":1454615603,"post_id":35210120,"comment_id":58135885,"body_markdown":"Try `System.out.println(&quot;java version: &quot;+System.getProperty(&quot;java.version&quot;));` and `System.out.println(&quot;javafx.version: &quot; + System.getProperty(&quot;javafx.version&quot;));`. They will almost certainly be the same, so maybe you are not running with the OS Java version you think you are.","body":"Try <code>System.out.println(&quot;java version: &quot;+System.getProperty(&quot;java.version&quot;));</code> and <code>System.out.println(&quot;javafx.version: &quot; + System.getProperty(&quot;javafx.version&quot;));</code>. They will almost certainly be the same, so maybe you are not running with the OS Java version you think you are."},{"owner":{"account_id":5237964,"reputation":6741,"user_id":4185959,"accept_rate":64,"display_name":"Itai"},"score":0,"creation_date":1454616018,"post_id":35210120,"comment_id":58136117,"body_markdown":"They are in fact not the same. I have edited my question. I suspect since javafx still comes on a separate package on Debian it somehow was not updated.","body":"They are in fact not the same. I have edited my question. I suspect since javafx still comes on a separate package on Debian it somehow was not updated."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":2,"creation_date":1454616574,"post_id":35210120,"comment_id":58136454,"body_markdown":"Ah, yes, you&#39;re using open JDK (I guess), so JavaFX is a separate package. It looks like you have an old version of JavaFX. So I don&#39;t know of any FXML that is specific to u65 over u60, but in general I guess you should probably execute with a version at least as new as the version with which you built it. I&#39;d just go ahead and bring your JavaFX version up to date with your Java version, if possible.","body":"Ah, yes, you&#39;re using open JDK (I guess), so JavaFX is a separate package. It looks like you have an old version of JavaFX. So I don&#39;t know of any FXML that is specific to u65 over u60, but in general I guess you should probably execute with a version at least as new as the version with which you built it. I&#39;d just go ahead and bring your JavaFX version up to date with your Java version, if possible."},{"owner":{"account_id":5237964,"reputation":6741,"user_id":4185959,"accept_rate":64,"display_name":"Itai"},"score":1,"creation_date":1454616769,"post_id":35210120,"comment_id":58136568,"body_markdown":"Currently the openjfx package is on version 8u60, so upgrading would mean building from source, which I am reluctant to do. There is some discussion [here](http://stackoverflow.com/a/19529820/4185959), but I am really confused as to why they are still two separate packages (and why the OpenJFX one has not been updated).","body":"Currently the openjfx package is on version 8u60, so upgrading would mean building from source, which I am reluctant to do. There is some discussion <a href=\"http://stackoverflow.com/a/19529820/4185959\">here</a>, but I am really confused as to why they are still two separate packages (and why the OpenJFX one has not been updated)."}],"answers":[{"tags":[],"owner":{"account_id":7634558,"reputation":2008,"user_id":5788486,"display_name":"Shekhar Rai"},"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1567499185,"creation_date":1469274644,"answer_id":38541473,"question_id":35210120,"body_markdown":"I think your `JDK` version is `1.8.0_60` and `JRE` version is `1.8.0_65`.\r\n\r\nSo you should use the same version for both of them.\r\n\r\nYou can check your current `JDK` and `JRE` versions on your *command prompt* respectively,\r\n\r\n    java -version\r\n    javac -version\r\n\r\nor you can go through the System properties using following *java code*,\r\n\r\n    System.out.println(System.getProperties());","title":"JavaFX FXML API version warning","body":"<p>I think your <code>JDK</code> version is <code>1.8.0_60</code> and <code>JRE</code> version is <code>1.8.0_65</code>.</p>\n\n<p>So you should use the same version for both of them.</p>\n\n<p>You can check your current <code>JDK</code> and <code>JRE</code> versions on your <em>command prompt</em> respectively,</p>\n\n<pre><code>java -version\njavac -version\n</code></pre>\n\n<p>or you can go through the System properties using following <em>java code</em>,</p>\n\n<pre><code>System.out.println(System.getProperties());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":397698,"reputation":324,"user_id":761977,"accept_rate":100,"display_name":"Sergey"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1491411080,"creation_date":1491411080,"answer_id":43237188,"question_id":35210120,"body_markdown":"I had the same issue on Linux with Intellij IDEA.  I have solved it by installing the **latest Oracle JDK**, and providing its path in IDEA&#39;s &quot;Project Sturucture&quot; settings menu:\r\n\r\n**File/Project Sturucture/Platform Settings/SDKs**","title":"JavaFX FXML API version warning","body":"<p>I had the same issue on Linux with Intellij IDEA.  I have solved it by installing the <strong>latest Oracle JDK</strong>, and providing its path in IDEA's \"Project Sturucture\" settings menu:</p>\n\n<p><strong>File/Project Sturucture/Platform Settings/SDKs</strong></p>\n"},{"tags":[],"owner":{"account_id":21731,"reputation":9045,"user_id":53069,"accept_rate":77,"display_name":"sproketboy"},"down_vote_count":2,"up_vote_count":75,"is_accepted":false,"score":73,"last_activity_date":1513686866,"creation_date":1513686866,"answer_id":47887170,"question_id":35210120,"body_markdown":"If you use the form:\r\n\r\n    xmlns=&quot;http://javafx.com/javafx&quot; xmlns:fx=&quot;http://javafx.com/fxml&quot;\r\n\r\nThe versioning is ignored. You&#39;d only need it if you had some compatibility issue with another version.","title":"JavaFX FXML API version warning","body":"<p>If you use the form:</p>\n\n<pre><code>xmlns=\"http://javafx.com/javafx\" xmlns:fx=\"http://javafx.com/fxml\"\n</code></pre>\n\n<p>The versioning is ignored. You'd only need it if you had some compatibility issue with another version.</p>\n"},{"tags":[],"owner":{"account_id":13227351,"reputation":137,"user_id":9552086,"display_name":"Sara"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1532204737,"creation_date":1532204737,"answer_id":51459844,"question_id":35210120,"body_markdown":"I have that problem also. I managed it just to change lines in *.fxml files:\r\n\r\njavafx/8.0.171 -&gt; javafx/8.0.141\r\n\r\nPreviously it was like this, it is a line in the begining of fxml file:\r\n\r\n    &lt;AnchorPane prefHeight=&quot;300.0&quot; prefWidth=&quot;600.0&quot; xmlns=&quot;http://javafx.com/javafx/8.0.171&quot; xmlns:fx=&quot;http://javafx.com/fxml/1&quot; fx:controller=&quot;com.application.word.view.LoginController&quot;&gt;\r\n\r\nThen I changed it for:\r\n\r\n    &lt;AnchorPane prefHeight=&quot;300.0&quot; prefWidth=&quot;600.0&quot; xmlns=&quot;http://javafx.com/javafx/8.0.141&quot; xmlns:fx=&quot;http://javafx.com/fxml/1&quot; fx:controller=&quot;com.application.word.view.LoginController&quot;&gt;\r\n\r\n\r\nAnd it works without any problem. But be carefull that it can be different if you use different jdk generations.\r\n\r\n\r\n \r\n","title":"JavaFX FXML API version warning","body":"<p>I have that problem also. I managed it just to change lines in *.fxml files:</p>\n\n<p>javafx/8.0.171 -> javafx/8.0.141</p>\n\n<p>Previously it was like this, it is a line in the begining of fxml file:</p>\n\n<pre><code>&lt;AnchorPane prefHeight=\"300.0\" prefWidth=\"600.0\" xmlns=\"http://javafx.com/javafx/8.0.171\" xmlns:fx=\"http://javafx.com/fxml/1\" fx:controller=\"com.application.word.view.LoginController\"&gt;\n</code></pre>\n\n<p>Then I changed it for:</p>\n\n<pre><code>&lt;AnchorPane prefHeight=\"300.0\" prefWidth=\"600.0\" xmlns=\"http://javafx.com/javafx/8.0.141\" xmlns:fx=\"http://javafx.com/fxml/1\" fx:controller=\"com.application.word.view.LoginController\"&gt;\n</code></pre>\n\n<p>And it works without any problem. But be carefull that it can be different if you use different jdk generations.</p>\n"},{"tags":[],"owner":{"account_id":4365891,"reputation":91,"user_id":3561705,"display_name":"Adam Sokołowski"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1544089883,"creation_date":1544089471,"answer_id":53648487,"question_id":35210120,"body_markdown":"I had same issue.\r\nDunno what IDE you guys are running, but I fixed it on Eclipse.\r\n\r\nInside **project explorer** on right side of **JRE System Library** it was showing **[J2SE-1.5]**.\r\nI right clicked **JRE System Library**, went in **Properties**.\r\nSwitched from **Execution Environement** to **Workspace default environement**.\r\n\r\nIf inside **workspace default environement** brackets it does not show your newest jdk version eg. **(jdk1.8.0_192)** your can change it by picking **Installed JREs** button and switching checked JRE.\r\n\r\nIf your jdk is not listed add it with **ADD** button and pick your JDK directory eg. C:\\Program Files\\Java\\jdk1.8.0_192, as home directory.\r\n\r\nIn case, for some reason, you don&#39;t want to change your default environement just pick **Alternate JRE** instead of **Workspace default JRE**. Then pick right SDK from dropdown menu.\r\n\r\n\r\nPS. Yes you can change version under xmlns option inside your fxml file, but you will have to update entry every time you modify your fxml inside Scene Builder.","title":"JavaFX FXML API version warning","body":"<p>I had same issue.\nDunno what IDE you guys are running, but I fixed it on Eclipse.</p>\n\n<p>Inside <strong>project explorer</strong> on right side of <strong>JRE System Library</strong> it was showing <strong>[J2SE-1.5]</strong>.\nI right clicked <strong>JRE System Library</strong>, went in <strong>Properties</strong>.\nSwitched from <strong>Execution Environement</strong> to <strong>Workspace default environement</strong>.</p>\n\n<p>If inside <strong>workspace default environement</strong> brackets it does not show your newest jdk version eg. <strong>(jdk1.8.0_192)</strong> your can change it by picking <strong>Installed JREs</strong> button and switching checked JRE.</p>\n\n<p>If your jdk is not listed add it with <strong>ADD</strong> button and pick your JDK directory eg. C:\\Program Files\\Java\\jdk1.8.0_192, as home directory.</p>\n\n<p>In case, for some reason, you don't want to change your default environement just pick <strong>Alternate JRE</strong> instead of <strong>Workspace default JRE</strong>. Then pick right SDK from dropdown menu.</p>\n\n<p>PS. Yes you can change version under xmlns option inside your fxml file, but you will have to update entry every time you modify your fxml inside Scene Builder.</p>\n"},{"tags":[],"owner":{"account_id":11380479,"reputation":51,"user_id":8343496,"display_name":"Nosakhare George Ohonba"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1549971675,"creation_date":1549971675,"answer_id":54649361,"question_id":35210120,"body_markdown":"I had same issues but I solved it by going through this steps\r\n \r\nIf you are using Intellij IDEA goto **File -&gt; Project Structure -&gt; SDKs** and click on the **(-) sign** to remove all other JDK you have before then click on the **(+) sign** to add the new JDK to the project from you **C:\\Program Files (x86)\\Java\\jdk1.8.0_172**.\r\n\r\n","title":"JavaFX FXML API version warning","body":"<p>I had same issues but I solved it by going through this steps</p>\n\n<p>If you are using Intellij IDEA goto <strong>File -> Project Structure -> SDKs</strong> and click on the <strong>(-) sign</strong> to remove all other JDK you have before then click on the <strong>(+) sign</strong> to add the new JDK to the project from you <strong>C:\\Program Files (x86)\\Java\\jdk1.8.0_172</strong>.</p>\n"},{"tags":[],"owner":{"account_id":11081940,"reputation":855,"user_id":8136868,"display_name":"Reza"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1566731334,"creation_date":1566731334,"answer_id":57645461,"question_id":35210120,"body_markdown":"Same was for me. as you mentioned your scene builder version is 8.1.0 while your Javafx version is 8.0.60. well they&#39;re different:)\r\ntwo way to fix this\r\n\r\n - uninstall current scene builder and install the one with same version of your Javafx\r\n - every time you edit a FXML file using scene builder, change xmlns property in your header to your Javafx version\r\n\r\nfor example my javafx version is 9.0.1 while I use scene builder 10.0.1 but after editing in scene builder I change\r\n\r\n    xmlns=&quot;http://javafx.com/javafx/9.0.1&quot;\r\n\r\nto \r\n\r\n    xmlns=&quot;http://javafx.com/javafx/9.0.1&quot;\r\n\r\nfor may own sake :)\r\n","title":"JavaFX FXML API version warning","body":"<p>Same was for me. as you mentioned your scene builder version is 8.1.0 while your Javafx version is 8.0.60. well they're different:)\ntwo way to fix this</p>\n\n<ul>\n<li>uninstall current scene builder and install the one with same version of your Javafx</li>\n<li>every time you edit a FXML file using scene builder, change xmlns property in your header to your Javafx version</li>\n</ul>\n\n<p>for example my javafx version is 9.0.1 while I use scene builder 10.0.1 but after editing in scene builder I change</p>\n\n<pre><code>xmlns=\"http://javafx.com/javafx/9.0.1\"\n</code></pre>\n\n<p>to </p>\n\n<pre><code>xmlns=\"http://javafx.com/javafx/9.0.1\"\n</code></pre>\n\n<p>for may own sake :)</p>\n"},{"tags":[],"owner":{"account_id":16618502,"reputation":11,"user_id":12009503,"display_name":"ARY "},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1568441210,"creation_date":1568438837,"answer_id":57932707,"question_id":35210120,"body_markdown":"I was also having samme problem will i was loading my fxml file \r\nWARNING: Loading FXML document with JavaFX API of version 8.0.171 by JavaFX runtime of version 8.0.111\r\nthen i went to oracle website and update the jre till 171 update of java 8.0\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Oe38C.png","title":"JavaFX FXML API version warning","body":"<p>I was also having samme problem will i was loading my fxml file \nWARNING: Loading FXML document with JavaFX API of version 8.0.171 by JavaFX runtime of version 8.0.111\nthen i went to oracle website and update the jre till 171 update of java 8.0\n<a href=\"https://i.stack.imgur.com/Oe38C.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Oe38C.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":15693926,"reputation":31,"user_id":11324070,"display_name":"K.H. Shihan Nuwanjith Udayanga"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691633135,"creation_date":1691633135,"answer_id":76872224,"question_id":35210120,"body_markdown":"This warning occurs because your JavaFX API version and JavaFX runtime version are not the same.\r\n\r\n - But if you try to manually change the version for the xml file, some of the buttons in the UI you created will not work.\r\n - Therefore, you ignore the JavaFX API version of the FXML document.\r\n\r\n**you change the xml file code line like below**\r\n\r\n    xmlns=&quot;http://javafx.com/javafx&quot; xmlns:fx=&quot;http://javafx.com/fxml&quot;\r\n\r\n","title":"JavaFX FXML API version warning","body":"<p>This warning occurs because your JavaFX API version and JavaFX runtime version are not the same.</p>\n<ul>\n<li>But if you try to manually change the version for the xml file, some of the buttons in the UI you created will not work.</li>\n<li>Therefore, you ignore the JavaFX API version of the FXML document.</li>\n</ul>\n<p><strong>you change the xml file code line like below</strong></p>\n<pre><code>xmlns=&quot;http://javafx.com/javafx&quot; xmlns:fx=&quot;http://javafx.com/fxml&quot;\n</code></pre>\n"}],"owner":{"account_id":5237964,"reputation":6741,"user_id":4185959,"accept_rate":64,"display_name":"Itai"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":114972,"favorite_count":0,"down_vote_count":0,"up_vote_count":45,"answer_count":9,"score":45,"last_activity_date":1691633135,"creation_date":1454614861,"question_id":35210120,"body_markdown":"I have recently started noticing the following warning when starting my JavaFX application: \r\n\r\n &gt; WARNING: Loading FXML document with JavaFX API of version 8.0.65 by JavaFX runtime of version 8.0.60\r\n\r\nThe FXML in question was created by Gluon Scene Builder 8.1.0, running with it&#39;s bundled Java, version 1.8.0_65. The application is launched with my OS Java, version 1.8.0_72. \r\n\r\nThe root node of the FXML does have the attribute\r\n\r\n    xmlns=&quot;http://javafx.com/javafx/8.0.65&quot;\r\n\r\nbut I figured 1.8.0_72 &gt; 1.8.0_65, so why am I getting this message? \r\nIs it something I should be worried about? And is there a way to ask the jre what is the JavaFX API version (which, apparently, is not the same as the Java version)?\r\n\r\nEdit:  \r\nRunning the code James_D suggested gives the following results: \r\n &gt; java version: 1.8.0_72-internal  \r\n &gt; javafx.version: 8.0.60\r\n\r\nSo, looks like the JavaFX version in the JDK is wrong? Or maybe I have an old jfxrt.jar? I&#39;ll look into that. \r\n","title":"JavaFX FXML API version warning","body":"<p>I have recently started noticing the following warning when starting my JavaFX application: </p>\n\n<blockquote>\n  <p>WARNING: Loading FXML document with JavaFX API of version 8.0.65 by JavaFX runtime of version 8.0.60</p>\n</blockquote>\n\n<p>The FXML in question was created by Gluon Scene Builder 8.1.0, running with it's bundled Java, version 1.8.0_65. The application is launched with my OS Java, version 1.8.0_72. </p>\n\n<p>The root node of the FXML does have the attribute</p>\n\n<pre><code>xmlns=\"http://javafx.com/javafx/8.0.65\"\n</code></pre>\n\n<p>but I figured 1.8.0_72 > 1.8.0_65, so why am I getting this message? \nIs it something I should be worried about? And is there a way to ask the jre what is the JavaFX API version (which, apparently, is not the same as the Java version)?</p>\n\n<p>Edit:<br>\nRunning the code James_D suggested gives the following results: </p>\n\n<blockquote>\n  <p>java version: 1.8.0_72-internal<br>\n  javafx.version: 8.0.60</p>\n</blockquote>\n\n<p>So, looks like the JavaFX version in the JDK is wrong? Or maybe I have an old jfxrt.jar? I'll look into that. </p>\n"},{"tags":["java","intellij-idea","playframework","sbt"],"comments":[{"owner":{"display_name":"user180100"},"score":3,"creation_date":1478427934,"post_id":40448203,"comment_id":68142260,"body_markdown":"http://www.oracle.com/technetwork/java/faq-sun-packages-142232.html","body":"<a href=\"http://www.oracle.com/technetwork/java/faq-sun-packages-142232.html\" rel=\"nofollow noreferrer\">oracle.com/technetwork/java/faq-sun-packages-142232.html</a>"},{"owner":{"account_id":536319,"reputation":3923,"user_id":905374,"accept_rate":81,"display_name":"Spiff"},"score":0,"creation_date":1478428136,"post_id":40448203,"comment_id":68142315,"body_markdown":"@rc thanks, great link, i kind of knew that, compiler issues warnings, if i use these imports, But why do I get the does not exist error?","body":"@rc thanks, great link, i kind of knew that, compiler issues warnings, if i use these imports, But why do I get the does not exist error?"},{"owner":{"account_id":1939636,"reputation":28457,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"score":0,"creation_date":1478428363,"post_id":40448203,"comment_id":68142374,"body_markdown":"this might help http://stackoverflow.com/questions/28603005/replace-classes-from-sun-security-packages","body":"this might help <a href=\"http://stackoverflow.com/questions/28603005/replace-classes-from-sun-security-packages\" title=\"replace classes from sun security packages\">stackoverflow.com/questions/28603005/&hellip;</a>"},{"owner":{"account_id":536319,"reputation":3923,"user_id":905374,"accept_rate":81,"display_name":"Spiff"},"score":0,"creation_date":1478434040,"post_id":40448203,"comment_id":68143834,"body_markdown":"@nullpointer there is the requirement not to use BC. But the main thing here is Intellij and why it does not find a package that&#39;s in the rt.jar","body":"@nullpointer there is the requirement not to use BC. But the main thing here is Intellij and why it does not find a package that&#39;s in the rt.jar"},{"owner":{"account_id":2077773,"reputation":133288,"user_id":1850609,"display_name":"acdcjunior"},"score":0,"creation_date":1520966159,"post_id":40448203,"comment_id":85530475,"body_markdown":"@Spiff yes, if possible, I think you should","body":"@Spiff yes, if possible, I think you should"}],"answers":[{"tags":[],"owner":{"account_id":6983262,"reputation":2982,"user_id":5355272,"accept_rate":25,"display_name":"avp"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1507759689,"creation_date":1507759689,"answer_id":46698305,"question_id":40448203,"body_markdown":"I had a similar error for a different package.\r\n\r\nThe packages we use were mapped to a network drive and my credentials to access that mapped drive were expired, so I had re-authenticate and tried with\r\n\r\nIntelliJ: File -&gt; Invalidate caches / Restart\r\n\r\nOR\r\n\r\n    $gradle clean build\r\n\r\n\r\nHope this helps!","title":"IntelliJ says the package does not exist, But I can access the package","body":"<p>I had a similar error for a different package.</p>\n\n<p>The packages we use were mapped to a network drive and my credentials to access that mapped drive were expired, so I had re-authenticate and tried with</p>\n\n<p>IntelliJ: File -> Invalidate caches / Restart</p>\n\n<p>OR</p>\n\n<pre><code>$gradle clean build\n</code></pre>\n\n<p>Hope this helps!</p>\n"},{"tags":[],"owner":{"account_id":536319,"reputation":3923,"user_id":905374,"accept_rate":81,"display_name":"Spiff"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1530556059,"creation_date":1530253974,"answer_id":51095617,"question_id":40448203,"body_markdown":"This is not an intellij issue.\r\n\r\n\r\nYou need to compile with the `-XDignore.symbol.file` option. Some internal packages\r\nare hidden by default unless you add this option to javac.\r\n\r\nhttps://bugs.openjdk.java.net/browse/JDK-7141442\r\n\r\nhttps://stackoverflow.com/questions/29060064/sun-security-x509-certandkeygen-and-sun-security-pkcs-pkcs10-missing-in-jdk8\r\n\r\n\r\nAlso the comment of user @user180100 is relevant and important.\r\n\r\n&gt; The sun.* packages are not part of the supported, public interface.  \r\nA\r\n&gt; Java program that directly calls into sun.* packages is not guaranteed\r\n&gt; to work on all Java-compatible platforms. In fact, such a program is\r\n&gt; not guaranteed to work even in future versions on the same platform.\r\n\r\n","title":"IntelliJ says the package does not exist, But I can access the package","body":"<p>This is not an intellij issue.</p>\n\n<p>You need to compile with the <code>-XDignore.symbol.file</code> option. Some internal packages\nare hidden by default unless you add this option to javac.</p>\n\n<p><a href=\"https://bugs.openjdk.java.net/browse/JDK-7141442\" rel=\"noreferrer\">https://bugs.openjdk.java.net/browse/JDK-7141442</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/29060064/sun-security-x509-certandkeygen-and-sun-security-pkcs-pkcs10-missing-in-jdk8\">sun.security.x509.CertAndKeyGen and sun.security.pkcs.PKCS10 - missing in JDK8. Implementation suggestions</a></p>\n\n<p>Also the comment of user @user180100 is relevant and important.</p>\n\n<blockquote>\n  <p>The sun.* packages are not part of the supported, public interface.<br>\n  A\n  Java program that directly calls into sun.* packages is not guaranteed\n  to work on all Java-compatible platforms. In fact, such a program is\n  not guaranteed to work even in future versions on the same platform.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":9782615,"reputation":560,"user_id":7250020,"display_name":"Kacper Cichecki"},"down_vote_count":0,"up_vote_count":37,"is_accepted":false,"score":37,"last_activity_date":1609205171,"creation_date":1609205171,"answer_id":65486144,"question_id":40448203,"body_markdown":"I had similar issue with different package:\r\n`package sun.security.x509 does not exist` \r\n\r\nI used java 11 to compile the project.\r\n\r\nIn my case I had to disable `Use &#39;--release&#39; option for cross-compilation` in Java Compiler settings.[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/SpNbW.png","title":"IntelliJ says the package does not exist, But I can access the package","body":"<p>I had similar issue with different package:\n<code>package sun.security.x509 does not exist</code></p>\n<p>I used java 11 to compile the project.</p>\n<p>In my case I had to disable <code>Use '--release' option for cross-compilation</code> in Java Compiler settings.<a href=\"https://i.stack.imgur.com/SpNbW.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/SpNbW.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":5758568,"reputation":365,"user_id":4545661,"display_name":"Tinyiko Chauke"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1628549931,"creation_date":1628549931,"answer_id":68719398,"question_id":40448203,"body_markdown":"Your project SDK version under file&gt;project structure&gt;Project&gt;Project SDK must be the same with your java compiler project bytecode version under file&gt;Build, Execution, Deployment&gt;Compiler&gt;Java Compiler&gt; look for &quot;project bytecode version&quot; right under your checkbox for &quot;use &#39;--release....&#39;&quot;\r\n\r\n1.Project SDK version:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n2.Project Bytecode version\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ZmdCu.png\r\n  [2]: https://i.stack.imgur.com/jjoIO.png","title":"IntelliJ says the package does not exist, But I can access the package","body":"<p>Your project SDK version under file&gt;project structure&gt;Project&gt;Project SDK must be the same with your java compiler project bytecode version under file&gt;Build, Execution, Deployment&gt;Compiler&gt;Java Compiler&gt; look for &quot;project bytecode version&quot; right under your checkbox for &quot;use '--release....'&quot;</p>\n<p>1.Project SDK version:\n<a href=\"https://i.stack.imgur.com/ZmdCu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZmdCu.png\" alt=\"enter image description here\" /></a></p>\n<p>2.Project Bytecode version\n<a href=\"https://i.stack.imgur.com/jjoIO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jjoIO.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":484819,"reputation":5634,"user_id":900743,"accept_rate":64,"display_name":"Peter"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666332468,"creation_date":1666332468,"answer_id":74149387,"question_id":40448203,"body_markdown":"Click on the project and chose Maven-&gt;Reload This can solve it as well if deps our out sync","title":"IntelliJ says the package does not exist, But I can access the package","body":"<p>Click on the project and chose Maven-&gt;Reload This can solve it as well if deps our out sync</p>\n"},{"tags":[],"owner":{"account_id":7246552,"reputation":466,"user_id":5528262,"display_name":"Umar Kayondo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691632484,"creation_date":1691632484,"answer_id":76872187,"question_id":40448203,"body_markdown":"My computer abruptly gave a blue screen while I was writing code. On going back to the IDE, I got this exception https://stackoverflow.com/questions/61865938/java-minidumps-are-not-enabled-by-default-on-client-versions-of-windows which I resolved by updating/re-installing JDK.\r\n\r\nAfter resolving the above error, this dependency was no longer visible. I noticed that my IDE was now pointing to the newly updated JDK.\r\n\r\nI updated the project&#39;s JDK version by going to &gt; File &gt; Project Structure &gt; Project: From here, I selected JDK 1.8.0_65.\r\n\r\nPlease refer to the screenshot for more clarity.\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/4LEy5.png","title":"IntelliJ says the package does not exist, But I can access the package","body":"<p>My computer abruptly gave a blue screen while I was writing code. On going back to the IDE, I got this exception <a href=\"https://stackoverflow.com/questions/61865938/java-minidumps-are-not-enabled-by-default-on-client-versions-of-windows\">Java Minidumps are not enabled by default on client versions of Windows</a> which I resolved by updating/re-installing JDK.</p>\n<p>After resolving the above error, this dependency was no longer visible. I noticed that my IDE was now pointing to the newly updated JDK.</p>\n<p>I updated the project's JDK version by going to &gt; File &gt; Project Structure &gt; Project: From here, I selected JDK 1.8.0_65.</p>\n<p>Please refer to the screenshot for more clarity.\n<a href=\"https://i.stack.imgur.com/4LEy5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4LEy5.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":536319,"reputation":3923,"user_id":905374,"accept_rate":81,"display_name":"Spiff"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46906,"favorite_count":0,"down_vote_count":0,"up_vote_count":20,"accepted_answer_id":51095617,"answer_count":6,"score":20,"last_activity_date":1691632484,"creation_date":1478427514,"question_id":40448203,"body_markdown":"I get the error below, but I can find the package in rt.jar.\r\nI can see the JDK being used from Project Structure.\r\nI&#39;m not sure what&#39;s missing.\r\n\r\n\r\n    Error:(6, -1) Play 2 Compiler: \r\n     C:\\user\\projects\\portal\\app\\com\\example\\security\\cert\\X509Cert.java:6: package sun.security.pkcs10 does not exist\r\n     import sun.security.pkcs10.*;\r\n     C:\\user\\projects\\portal\\app\\com\\v\\security\\cert\\GenerateCSR.java:75: cannot find symbol\r\n\r\n\r\n\r\n","title":"IntelliJ says the package does not exist, But I can access the package","body":"<p>I get the error below, but I can find the package in rt.jar.\nI can see the JDK being used from Project Structure.\nI'm not sure what's missing.</p>\n\n<pre><code>Error:(6, -1) Play 2 Compiler: \n C:\\user\\projects\\portal\\app\\com\\example\\security\\cert\\X509Cert.java:6: package sun.security.pkcs10 does not exist\n import sun.security.pkcs10.*;\n C:\\user\\projects\\portal\\app\\com\\v\\security\\cert\\GenerateCSR.java:75: cannot find symbol\n</code></pre>\n"},{"tags":["java","serenity-bdd","cucumber-serenity"],"answers":[{"tags":[],"owner":{"account_id":16074014,"reputation":11,"user_id":11601666,"display_name":"Paul Henry LEUFANG"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690399162,"creation_date":1690399162,"answer_id":76774405,"question_id":76601703,"body_markdown":"Hello are you asking about how to generate serenity report ?\r\n\r\nIf yes, install add this serenity maven plugin in your pom.xml file\r\n\r\n    &lt;plugin&gt;\r\n                &lt;groupId&gt;net.serenity-bdd.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;serenity-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;${serenity.plugin.version}&lt;/version&gt;\r\n                &lt;dependencies&gt;\r\n                    &lt;dependency&gt;\r\n                        &lt;groupId&gt;net.serenity-bdd&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;serenity-core&lt;/artifactId&gt;\r\n                        &lt;version&gt;${serenity.plugin.version}&lt;/version&gt;\r\n                    &lt;/dependency&gt;\r\n                    &lt;dependency&gt;\r\n                        &lt;groupId&gt;net.serenity-bdd&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;serenity-single-page-report&lt;/artifactId&gt;\r\n                        &lt;version&gt;${serenity.plugin.version}&lt;/version&gt;\r\n                    &lt;/dependency&gt;\r\n                &lt;/dependencies&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;reports&gt;single-page-html&lt;/reports&gt;\r\n                &lt;/configuration&gt;\r\n      &lt;/plugin&gt;\r\n\r\nIf you are using IntellijIdea in the plugins section you will have the plugin serenity:aggregate, run it.\r\n\r\nYou can also run the command `mvn serenity:aggregate` in the command line to get the full report and the summay report","title":"how to get total duration, total passed and failed test case in serenity cucumber java","body":"<p>Hello are you asking about how to generate serenity report ?</p>\n<p>If yes, install add this serenity maven plugin in your pom.xml file</p>\n<pre><code>&lt;plugin&gt;\n            &lt;groupId&gt;net.serenity-bdd.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;serenity-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;${serenity.plugin.version}&lt;/version&gt;\n            &lt;dependencies&gt;\n                &lt;dependency&gt;\n                    &lt;groupId&gt;net.serenity-bdd&lt;/groupId&gt;\n                    &lt;artifactId&gt;serenity-core&lt;/artifactId&gt;\n                    &lt;version&gt;${serenity.plugin.version}&lt;/version&gt;\n                &lt;/dependency&gt;\n                &lt;dependency&gt;\n                    &lt;groupId&gt;net.serenity-bdd&lt;/groupId&gt;\n                    &lt;artifactId&gt;serenity-single-page-report&lt;/artifactId&gt;\n                    &lt;version&gt;${serenity.plugin.version}&lt;/version&gt;\n                &lt;/dependency&gt;\n            &lt;/dependencies&gt;\n            &lt;configuration&gt;\n                &lt;reports&gt;single-page-html&lt;/reports&gt;\n            &lt;/configuration&gt;\n  &lt;/plugin&gt;\n</code></pre>\n<p>If you are using IntellijIdea in the plugins section you will have the plugin serenity:aggregate, run it.</p>\n<p>You can also run the command <code>mvn serenity:aggregate</code> in the command line to get the full report and the summay report</p>\n"},{"tags":[],"owner":{"account_id":29172625,"reputation":1,"user_id":22348618,"display_name":"Ehthesham"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691632379,"creation_date":1691350602,"answer_id":76847517,"question_id":76601703,"body_markdown":"You can get details of the total duration, count of passed and failed test cases, and many other details from the Serenity report.\r\n\r\nSerenity report is available in target/site/index.html\r\n\r\nWhen you open the report on the homepage you can find these details.\r\n\r\nAs already pointed out by others remember to add dependencies in pom.xml file.\r\n\r\n\r\nPFB sample report screenshots\r\n&lt;br/&gt;\r\n[Screen 1][1]\r\n\r\n\r\n[Screen 2][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/rSdbb.png\r\n  [2]: https://i.stack.imgur.com/SoXiC.png","title":"how to get total duration, total passed and failed test case in serenity cucumber java","body":"<p>You can get details of the total duration, count of passed and failed test cases, and many other details from the Serenity report.</p>\n<p>Serenity report is available in target/site/index.html</p>\n<p>When you open the report on the homepage you can find these details.</p>\n<p>As already pointed out by others remember to add dependencies in pom.xml file.</p>\n<p>PFB sample report screenshots\n<br/>\n<a href=\"https://i.stack.imgur.com/rSdbb.png\" rel=\"nofollow noreferrer\">Screen 1</a></p>\n<p><a href=\"https://i.stack.imgur.com/SoXiC.png\" rel=\"nofollow noreferrer\">Screen 2</a></p>\n"}],"owner":{"account_id":7427727,"reputation":187,"user_id":5649717,"display_name":"Yudistira Sugandi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":112,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691632379,"creation_date":1688355216,"question_id":76601703,"body_markdown":"i have an automation API and web written in java, serenity and cucumber. how can i get the value of total duration, passed and failed test case ? thank you","title":"how to get total duration, total passed and failed test case in serenity cucumber java","body":"<p>i have an automation API and web written in java, serenity and cucumber. how can i get the value of total duration, passed and failed test case ? thank you</p>\n"},{"tags":["java","aop","aspectj"],"answers":[{"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691631991,"creation_date":1691631991,"answer_id":76872162,"question_id":76870080,"body_markdown":"Your question has nothing to do with Maven modules or AspectJ Maven plugin. If I understand correctly, you simply want to know how to log argument details for an intercepted method. How about using parameter binding via `args()`?\r\n\r\n```java\r\npackage de.scrum_master.app;\r\n\r\npublic class Item {\r\n  private int id;\r\n  private String name;\r\n\r\n  public Item(int id, String name) {\r\n    this.id = id;\r\n    this.name = name;\r\n  }\r\n\r\n  public int getId() {\r\n    return id;\r\n  }\r\n\r\n  public String getName() {\r\n    return name;\r\n  }\r\n}\r\n```\r\n\r\n```java\r\npackage de.scrum_master.app;\r\n\r\npublic class Business {\r\n  public void logic(Item item) {}\r\n\r\n  public static void main(String[] args) {\r\n    new Business().logic(new Item(11, &quot;Jane&quot;));\r\n    new Business().logic(new Item(22, &quot;John&quot;));\r\n  }\r\n}\r\n```\r\n\r\n```java\r\npackage de.scrum_master.aspect;\r\n\r\nimport org.aspectj.lang.JoinPoint;\r\nimport org.aspectj.lang.annotation.Aspect;\r\nimport org.aspectj.lang.annotation.Before;\r\n\r\nimport de.scrum_master.app.Item;\r\n\r\n@Aspect\r\npublic class LoggingAspect {\r\n  @Before(&quot;execution(* de.scrum_master.app.Business.logic(..)) &amp;&amp; args(item)&quot;)\r\n  public void logBeforeAllMethods(JoinPoint joinPoint, Item item) {\r\n    System.out.println(joinPoint);\r\n    System.out.println(&quot;  Item[id=&quot; + item.getId() + &quot;, name=&quot; + item.getName() + &quot;]&quot;);\r\n  }\r\n}\r\n```\r\n\r\nConsole log:\r\n\r\n```none\r\nexecution(void de.scrum_master.app.Business.logic(Item))\r\n  Item[id=11, name=Jane]\r\nexecution(void de.scrum_master.app.Business.logic(Item))\r\n  Item[id=22, name=John]\r\n```\r\n\r\nIf you had something more generic in mind, your sample code did not express it clearly, and neither did your problem description.\r\n\r\nMaybe you noticed that my aspetc has taken care of gathering a string representation of `Item`. The better ways would be to create a meaningful `toString()` method (or another suitable string representation method) for `Item` and simply use that in the aspect. Of course, you could use relfection in the aspect to determine fields and their values, but is that really the job of an aspect?\r\n\r\nBesides, why did you write this?\r\n\r\n```java\r\n// Will be moving this to annotation based PointCut\r\n```\r\n\r\nWhy would you? It is much better to intercept methods using a pointcut describing the kinds of classes, methods, arguments etc. you want to log. Only use marker annotations as a very last resort, if there is no other way to write a pointcut. Marker annotations for AOP are vastly overused by developers not thinking about other ways to define the set of joinpoints they wish to intercept. Marker annotations seem to be easy, because you do not need to think much when using them. But the consequence of using them is that you pollute your whole code base with aspect-related information, which is the very thing AOP strives to avoid.","title":"Building a library for using AspectJ","body":"<p>Your question has nothing to do with Maven modules or AspectJ Maven plugin. If I understand correctly, you simply want to know how to log argument details for an intercepted method. How about using parameter binding via <code>args()</code>?</p>\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.app;\n\npublic class Item {\n  private int id;\n  private String name;\n\n  public Item(int id, String name) {\n    this.id = id;\n    this.name = name;\n  }\n\n  public int getId() {\n    return id;\n  }\n\n  public String getName() {\n    return name;\n  }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.app;\n\npublic class Business {\n  public void logic(Item item) {}\n\n  public static void main(String[] args) {\n    new Business().logic(new Item(11, &quot;Jane&quot;));\n    new Business().logic(new Item(22, &quot;John&quot;));\n  }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package de.scrum_master.aspect;\n\nimport org.aspectj.lang.JoinPoint;\nimport org.aspectj.lang.annotation.Aspect;\nimport org.aspectj.lang.annotation.Before;\n\nimport de.scrum_master.app.Item;\n\n@Aspect\npublic class LoggingAspect {\n  @Before(&quot;execution(* de.scrum_master.app.Business.logic(..)) &amp;&amp; args(item)&quot;)\n  public void logBeforeAllMethods(JoinPoint joinPoint, Item item) {\n    System.out.println(joinPoint);\n    System.out.println(&quot;  Item[id=&quot; + item.getId() + &quot;, name=&quot; + item.getName() + &quot;]&quot;);\n  }\n}\n</code></pre>\n<p>Console log:</p>\n<pre class=\"lang-none prettyprint-override\"><code>execution(void de.scrum_master.app.Business.logic(Item))\n  Item[id=11, name=Jane]\nexecution(void de.scrum_master.app.Business.logic(Item))\n  Item[id=22, name=John]\n</code></pre>\n<p>If you had something more generic in mind, your sample code did not express it clearly, and neither did your problem description.</p>\n<p>Maybe you noticed that my aspetc has taken care of gathering a string representation of <code>Item</code>. The better ways would be to create a meaningful <code>toString()</code> method (or another suitable string representation method) for <code>Item</code> and simply use that in the aspect. Of course, you could use relfection in the aspect to determine fields and their values, but is that really the job of an aspect?</p>\n<p>Besides, why did you write this?</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Will be moving this to annotation based PointCut\n</code></pre>\n<p>Why would you? It is much better to intercept methods using a pointcut describing the kinds of classes, methods, arguments etc. you want to log. Only use marker annotations as a very last resort, if there is no other way to write a pointcut. Marker annotations for AOP are vastly overused by developers not thinking about other ways to define the set of joinpoints they wish to intercept. Marker annotations seem to be easy, because you do not need to think much when using them. But the consequence of using them is that you pollute your whole code base with aspect-related information, which is the very thing AOP strives to avoid.</p>\n"}],"owner":{"account_id":397984,"reputation":535,"user_id":762421,"accept_rate":36,"display_name":"user762421"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76872162,"answer_count":1,"score":-1,"last_activity_date":1691631991,"creation_date":1691602401,"question_id":76870080,"body_markdown":"**Background**\r\nWe have a Java project which uses Maven as the build tool. The project structure has a Parent POM and then various Child POMs.\r\n\r\nI am working on creating a child POM project where I want to define a set of Aspects which can be used in existing child projects.\r\n\r\nI got it working with the help of - http://www.mojohaus.org/aspectj-maven-plugin/examples/libraryJars.html#\r\n\r\n**Question** - If I want to log runtime argument values of a method execution then how can I do it in the Library without it depending on any other Child POM projects?\r\n\r\n\r\nFor instance:\r\n\r\nParent Project:\r\n - Child-1\r\n - Child-2\r\n - AspectJ-Library\r\n\r\n\r\n\r\nClasses in Child-1:\r\n```\r\npackage org.example;\r\n\r\nclass Item {\r\n  // fileds, getters, setters\r\n}\r\n\r\npackage org.example;\r\n\r\nclass Business {\r\n  public void logic(Item b) {\r\n   // logic\r\n  }\r\n}\r\n\r\n```\r\n\r\nClass in AspectJ-Library\r\n\r\n```\r\npackage org.example;\r\n\r\nimport org.aspectj.lang.JoinPoint;\r\nimport org.aspectj.lang.annotation.Aspect;\r\nimport org.aspectj.lang.annotation.Before;\r\n\r\n@Aspect\r\npublic class LoggingAspect {\r\n    @Before(&quot;execution(* org.example.Business.logic(..))&quot;) // Will be moving this to annotation based PointCut\r\n    public void logBeforeAllMethods(JoinPoint joinPoint)\r\n    {\r\n        // How to log values of various fields of object of class Item?\r\n    }\r\n}\r\n```\r\nHow to log values of various fields of object of class Item in the `logBeforeAllMethods` method above?\r\n\r\n","title":"Building a library for using AspectJ","body":"<p><strong>Background</strong>\nWe have a Java project which uses Maven as the build tool. The project structure has a Parent POM and then various Child POMs.</p>\n<p>I am working on creating a child POM project where I want to define a set of Aspects which can be used in existing child projects.</p>\n<p>I got it working with the help of - <a href=\"http://www.mojohaus.org/aspectj-maven-plugin/examples/libraryJars.html#\" rel=\"nofollow noreferrer\">http://www.mojohaus.org/aspectj-maven-plugin/examples/libraryJars.html#</a></p>\n<p><strong>Question</strong> - If I want to log runtime argument values of a method execution then how can I do it in the Library without it depending on any other Child POM projects?</p>\n<p>For instance:</p>\n<p>Parent Project:</p>\n<ul>\n<li>Child-1</li>\n<li>Child-2</li>\n<li>AspectJ-Library</li>\n</ul>\n<p>Classes in Child-1:</p>\n<pre><code>package org.example;\n\nclass Item {\n  // fileds, getters, setters\n}\n\npackage org.example;\n\nclass Business {\n  public void logic(Item b) {\n   // logic\n  }\n}\n\n</code></pre>\n<p>Class in AspectJ-Library</p>\n<pre><code>package org.example;\n\nimport org.aspectj.lang.JoinPoint;\nimport org.aspectj.lang.annotation.Aspect;\nimport org.aspectj.lang.annotation.Before;\n\n@Aspect\npublic class LoggingAspect {\n    @Before(&quot;execution(* org.example.Business.logic(..))&quot;) // Will be moving this to annotation based PointCut\n    public void logBeforeAllMethods(JoinPoint joinPoint)\n    {\n        // How to log values of various fields of object of class Item?\n    }\n}\n</code></pre>\n<p>How to log values of various fields of object of class Item in the <code>logBeforeAllMethods</code> method above?</p>\n"},{"tags":["java","reactive-programming","azureservicebus","project-reactor","azure-sdk-for-java"],"owner":{"account_id":2612183,"reputation":3,"user_id":2262100,"display_name":"gaurav"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691631448,"creation_date":1691426141,"question_id":76853577,"body_markdown":"**TL;DR:**\r\nNeed to slow (dynamically) cosmos Db querying Flux so downstream can publish messages (asynchronously) to service bus.\r\n\r\n**Full description:**\r\nI have a Flux that queries Cosmos DB and returns lots of document results that I need to transform and push to Azure Service Bus.\r\n\r\nPublishing un-throttled seems to overwhelm the service bus client library (even when publishing ~1000 messages, each less than 1 KB) and I start getting &quot;java.lang.OutOfMemoryError: Java heap space&quot; exceptions so cannot publish all messages:\r\n\r\n\r\n```\r\nfluxToRunCosmosQueriesAndReturnLotsOfResults\r\n    .filter(...)\r\n    .map(toServiceBusMessage)\r\n    //.delayElements(Duration.ofMillis(10))\r\n    .map(msg -&gt; \r\n    {\r\n      return messageSender.sendMessage(msg); //returns Mono, actual msg is sent to bus asynchronously\r\n    })\r\n    .flatMap(Flux::from)\r\n    .blockLast();\r\n\r\n\r\nServiceBusSenderAsyncClient messageSender = new ServiceBusClientBuilder()\r\n        .connectionString(CONNECTION_STRING)\r\n        .sender()\r\n        .topicName(TOPIC_NAME)\r\n        .buildAsyncClient();\r\n```\r\n\r\n\r\nUn-commenting the delay above adjusts the rate for me and can publish all messages without any exceptions.\r\nBut such arbitrary delay seems hacky and I want to dynamically slow/pause the upstream emitter based on how much downstream service bus client can safely publish.\r\n\r\nUsing Semaphore also works for me: I can delay upstream until certain number of messages are published to service bus (and completed asynchronously by messageSender):\r\n\r\n\r\n```\r\npublic class FluxCondition\r\n  {\r\n    Semaphore sem;\r\n\r\n    public FluxCondition(int permits)\r\n    {\r\n      sem = new Semaphore(permits);\r\n    }\r\n    \r\n    public Mono&lt;Object&gt; fetchPermit() \r\n    { \r\n      return Mono.fromRunnable(() -&gt; \r\n      {\r\n        try\r\n        {\r\n          sem.acquire();\r\n        }\r\n        catch (InterruptedException e) {}\r\n      }); \r\n    }\r\n\r\n    public void releasePermit()\r\n    {\r\n      sem.release();\r\n    }\r\n  }\r\n\r\n\r\n\r\nFluxCondition semPermits = new FluxCondition(10);\r\n\r\nfluxToRunCosmosQueriesAndReturnLotsOfResults\r\n    .filter(...)\r\n    .map(this::toServiceBusMessage)\r\n    .delayUntil(o -&gt; semPermits.fetchPermit())\r\n    .map(msg -&gt; \r\n    {\r\n      return messageSender.sendMessage(msg)\r\n      \t\t\t  .doFinally(o -&gt; semPermits.releasePermit());\r\n    })\r\n    .flatMap(Flux::from)\r\n    .blockLast();\r\n```\r\n\r\n(Note: For efficiency, I cannot batch messages to service bus as suggested in official docs: https://github.com/Azure/azure-sdk-for-java/blob/cc51514c7d14ff9805fe265cfc72e424c9c80576/sdk/servicebus/azure-messaging-servicebus/src/samples/java/com/azure/messaging/servicebus/ServiceBusSenderAsyncClientJavaDocCodeSamples.java#L121 since my topic is partitioned with de-dup enabled)\r\n\r\n**My question is:**\r\nIs there a better/recommended (best practices) reactor friendly way to adjust the rate of publisher flux here (that returns cosmos Db query results) so that downstream can safely publish messages to service bus and is not overwhelmed. It would be great if upstream emitter can dynamically adjust/adapt to ServiceBusSenderAsyncClient&#39;s rate.\r\n\r\n(azure-messaging-servicebus: 7.14.1, reactor-core: 3.4.27)\r\n\r\n---------------------------------------------------------------\r\n\r\nExceptions when publishing to service bus client in an un-throttled manner:\r\n\r\n*12:01:05.850 [reactor-executor-1] **ERROR reactor.core.publisher.Operators - Operator called default onErrorDropped\r\njava.lang.OutOfMemoryError: Java heap space\r\n    at com.azure.messaging.servicebus.ServiceBusMessageBatch.&lt;init&gt;(ServiceBusMessageBatch.java:42)**\r\n    at com.azure.messaging.servicebus.ServiceBusSenderAsyncClient$AmqpMessageCollector.&lt;init&gt;(ServiceBusSenderAsyncClient.java:848)\r\n    at com.azure.messaging.servicebus.ServiceBusSenderAsyncClient.lambda$sendInternal$25(ServiceBusSenderAsyncClient.java:794)\r\n    at com.azure.messaging.servicebus.ServiceBusSenderAsyncClient$$Lambda$1648/954915536.apply(Unknown Source)\r\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:125)\r\n    at reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2400)\r\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.onSubscribe(MonoFlatMap.java:110)\r\n    at reactor.core.publisher.MonoJust.subscribe(MonoJust.java:55)\r\n    at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:52)\r\n    at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64)\r\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:157)\r\n    at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onNext(MonoPeekTerminal.java:180)\r\n    at reactor.core.publisher.SerializedSubscriber.onNext(SerializedSubscriber.java:99)\r\n    at reactor.core.publisher.FluxRetryWhen$RetryWhenMainSubscriber.onNext(FluxRetryWhen.java:174)\r\n    at reactor.core.publisher.SerializedSubscriber.onNext(SerializedSubscriber.java:99)\r\n    at reactor.core.publisher.SerializedSubscriber.onNext(SerializedSubscriber.java:99)\r\n    at reactor.core.publisher.FluxTimeout$TimeoutMainSubscriber.onNext(FluxTimeout.java:180)\r\n    at reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.onNext(FluxPeekFuseable.java:210)\r\n    at reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1839)\r\n    at reactor.core.publisher.MonoFlatMap$FlatMapInner.onNext(MonoFlatMap.java:249)\r\n    at reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1839)\r\n    at reactor.core.publisher.MonoFlatMap$FlatMapInner.onNext(MonoFlatMap.java:249)\r\n    at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:122)\r\n    at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:122)\r\n    at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.complete(MonoIgnoreThen.java:292)\r\n    at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.onNext(MonoIgnoreThen.java:187)\r\n    at reactor.core.publisher.MonoCreate$DefaultMonoSink.success(MonoCreate.java:172)\r\n    at com.azure.core.amqp.implementation.ReactorSession.lambda$createProducer$16(ReactorSession.java:515)\r\n    at com.azure.core.amqp.implementation.ReactorSession$$Lambda$1631/598519268.run(Unknown Source)\r\n    at com.azure.core.amqp.implementation.handler.DispatchHandler.onTimerTask(DispatchHandler.java:32)\r\n    at com.azure.core.amqp.implementation.ReactorDispatcher$WorkScheduler.run(ReactorDispatcher.java:207)\r\n    at org.apache.qpid.proton.reactor.impl.SelectableImpl.readable(SelectableImpl.java:118)\r\njava.lang.OutOfMemoryError: Java heap space\r\n12:01:06.696 [reactor-executor-1] **ERROR reactor.core.publisher.Operators - Operator called default onErrorDropped\r\njava.lang.OutOfMemoryError: Java heap space***","title":"Control Flux emission rate based on downstream async task completion","body":"<p><strong>TL;DR:</strong>\nNeed to slow (dynamically) cosmos Db querying Flux so downstream can publish messages (asynchronously) to service bus.</p>\n<p><strong>Full description:</strong>\nI have a Flux that queries Cosmos DB and returns lots of document results that I need to transform and push to Azure Service Bus.</p>\n<p>Publishing un-throttled seems to overwhelm the service bus client library (even when publishing ~1000 messages, each less than 1 KB) and I start getting &quot;java.lang.OutOfMemoryError: Java heap space&quot; exceptions so cannot publish all messages:</p>\n<pre><code>fluxToRunCosmosQueriesAndReturnLotsOfResults\n    .filter(...)\n    .map(toServiceBusMessage)\n    //.delayElements(Duration.ofMillis(10))\n    .map(msg -&gt; \n    {\n      return messageSender.sendMessage(msg); //returns Mono, actual msg is sent to bus asynchronously\n    })\n    .flatMap(Flux::from)\n    .blockLast();\n\n\nServiceBusSenderAsyncClient messageSender = new ServiceBusClientBuilder()\n        .connectionString(CONNECTION_STRING)\n        .sender()\n        .topicName(TOPIC_NAME)\n        .buildAsyncClient();\n</code></pre>\n<p>Un-commenting the delay above adjusts the rate for me and can publish all messages without any exceptions.\nBut such arbitrary delay seems hacky and I want to dynamically slow/pause the upstream emitter based on how much downstream service bus client can safely publish.</p>\n<p>Using Semaphore also works for me: I can delay upstream until certain number of messages are published to service bus (and completed asynchronously by messageSender):</p>\n<pre><code>public class FluxCondition\n  {\n    Semaphore sem;\n\n    public FluxCondition(int permits)\n    {\n      sem = new Semaphore(permits);\n    }\n    \n    public Mono&lt;Object&gt; fetchPermit() \n    { \n      return Mono.fromRunnable(() -&gt; \n      {\n        try\n        {\n          sem.acquire();\n        }\n        catch (InterruptedException e) {}\n      }); \n    }\n\n    public void releasePermit()\n    {\n      sem.release();\n    }\n  }\n\n\n\nFluxCondition semPermits = new FluxCondition(10);\n\nfluxToRunCosmosQueriesAndReturnLotsOfResults\n    .filter(...)\n    .map(this::toServiceBusMessage)\n    .delayUntil(o -&gt; semPermits.fetchPermit())\n    .map(msg -&gt; \n    {\n      return messageSender.sendMessage(msg)\n                  .doFinally(o -&gt; semPermits.releasePermit());\n    })\n    .flatMap(Flux::from)\n    .blockLast();\n</code></pre>\n<p>(Note: For efficiency, I cannot batch messages to service bus as suggested in official docs: <a href=\"https://github.com/Azure/azure-sdk-for-java/blob/cc51514c7d14ff9805fe265cfc72e424c9c80576/sdk/servicebus/azure-messaging-servicebus/src/samples/java/com/azure/messaging/servicebus/ServiceBusSenderAsyncClientJavaDocCodeSamples.java#L121\" rel=\"nofollow noreferrer\">https://github.com/Azure/azure-sdk-for-java/blob/cc51514c7d14ff9805fe265cfc72e424c9c80576/sdk/servicebus/azure-messaging-servicebus/src/samples/java/com/azure/messaging/servicebus/ServiceBusSenderAsyncClientJavaDocCodeSamples.java#L121</a> since my topic is partitioned with de-dup enabled)</p>\n<p><strong>My question is:</strong>\nIs there a better/recommended (best practices) reactor friendly way to adjust the rate of publisher flux here (that returns cosmos Db query results) so that downstream can safely publish messages to service bus and is not overwhelmed. It would be great if upstream emitter can dynamically adjust/adapt to ServiceBusSenderAsyncClient's rate.</p>\n<p>(azure-messaging-servicebus: 7.14.1, reactor-core: 3.4.27)</p>\n<hr />\n<p>Exceptions when publishing to service bus client in an un-throttled manner:</p>\n<p><em>12:01:05.850 [reactor-executor-1] <strong>ERROR reactor.core.publisher.Operators - Operator called default onErrorDropped\njava.lang.OutOfMemoryError: Java heap space\nat com.azure.messaging.servicebus.ServiceBusMessageBatch.(ServiceBusMessageBatch.java:42)</strong>\nat com.azure.messaging.servicebus.ServiceBusSenderAsyncClient$AmqpMessageCollector.(ServiceBusSenderAsyncClient.java:848)\nat com.azure.messaging.servicebus.ServiceBusSenderAsyncClient.lambda$sendInternal$25(ServiceBusSenderAsyncClient.java:794)\nat com.azure.messaging.servicebus.ServiceBusSenderAsyncClient$$Lambda$1648/954915536.apply(Unknown Source)\nat reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:125)\nat reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2400)\nat reactor.core.publisher.MonoFlatMap$FlatMapMain.onSubscribe(MonoFlatMap.java:110)\nat reactor.core.publisher.MonoJust.subscribe(MonoJust.java:55)\nat reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:52)\nat reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64)\nat reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:157)\nat reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onNext(MonoPeekTerminal.java:180)\nat reactor.core.publisher.SerializedSubscriber.onNext(SerializedSubscriber.java:99)\nat reactor.core.publisher.FluxRetryWhen$RetryWhenMainSubscriber.onNext(FluxRetryWhen.java:174)\nat reactor.core.publisher.SerializedSubscriber.onNext(SerializedSubscriber.java:99)\nat reactor.core.publisher.SerializedSubscriber.onNext(SerializedSubscriber.java:99)\nat reactor.core.publisher.FluxTimeout$TimeoutMainSubscriber.onNext(FluxTimeout.java:180)\nat reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.onNext(FluxPeekFuseable.java:210)\nat reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1839)\nat reactor.core.publisher.MonoFlatMap$FlatMapInner.onNext(MonoFlatMap.java:249)\nat reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1839)\nat reactor.core.publisher.MonoFlatMap$FlatMapInner.onNext(MonoFlatMap.java:249)\nat reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:122)\nat reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:122)\nat reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.complete(MonoIgnoreThen.java:292)\nat reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.onNext(MonoIgnoreThen.java:187)\nat reactor.core.publisher.MonoCreate$DefaultMonoSink.success(MonoCreate.java:172)\nat com.azure.core.amqp.implementation.ReactorSession.lambda$createProducer$16(ReactorSession.java:515)\nat com.azure.core.amqp.implementation.ReactorSession$$Lambda$1631/598519268.run(Unknown Source)\nat com.azure.core.amqp.implementation.handler.DispatchHandler.onTimerTask(DispatchHandler.java:32)\nat com.azure.core.amqp.implementation.ReactorDispatcher$WorkScheduler.run(ReactorDispatcher.java:207)\nat org.apache.qpid.proton.reactor.impl.SelectableImpl.readable(SelectableImpl.java:118)\njava.lang.OutOfMemoryError: Java heap space\n12:01:06.696 [reactor-executor-1] <strong>ERROR reactor.core.publisher.Operators - Operator called default onErrorDropped\njava.lang.OutOfMemoryError: Java heap space</strong></em></p>\n"},{"tags":["java","stream","apache-flink","flink-streaming"],"answers":[{"tags":[],"owner":{"account_id":5433881,"reputation":1294,"user_id":4323911,"display_name":"BrightFlow"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691539402,"creation_date":1691539402,"answer_id":76863800,"question_id":76843466,"body_markdown":"`keyBy` is applied to datastream `transactions`. \r\n\r\nAfter applying `keyBy`, records from `transactions` with same `account ID` will be in the same partition, and you can apply functions from `KeyedStream`, like `process`(not recommend as it is marked as deprecated), `window`, `reduce`, `min/max/sum`, etc.\r\n\r\nThere are lots of example of using keyBy, e.g. [this link][1]\r\n\r\n\r\n  [1]: https://nightlies.apache.org/flink/flink-docs-master/docs/dev/datastream/operators/overview/#keyby","title":"Flink - Does keyBy() functon partition the flink operator internally?","body":"<p><code>keyBy</code> is applied to datastream <code>transactions</code>.</p>\n<p>After applying <code>keyBy</code>, records from <code>transactions</code> with same <code>account ID</code> will be in the same partition, and you can apply functions from <code>KeyedStream</code>, like <code>process</code>(not recommend as it is marked as deprecated), <code>window</code>, <code>reduce</code>, <code>min/max/sum</code>, etc.</p>\n<p>There are lots of example of using keyBy, e.g. <a href=\"https://nightlies.apache.org/flink/flink-docs-master/docs/dev/datastream/operators/overview/#keyby\" rel=\"nofollow noreferrer\">this link</a></p>\n"}],"owner":{"account_id":4032106,"reputation":16084,"user_id":3317808,"accept_rate":54,"display_name":"overexchange"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76863800,"answer_count":1,"score":0,"last_activity_date":1691630747,"creation_date":1691268121,"question_id":76843466,"body_markdown":"In the below code, taken from [documentation](https://nightlies.apache.org/flink/flink-docs-release-1.12/try-flink/datastream_api.html#frauddetectionjobjava):\r\n\r\n    package spendreport;\r\n    \r\n    import org.apache.flink.streaming.api.datastream.DataStream;\r\n    import org.apache.flink.streaming.api.environment.StreamExecutionEnvironment;\r\n    import org.apache.flink.walkthrough.common.sink.AlertSink;\r\n    import org.apache.flink.walkthrough.common.entity.Alert;\r\n    import org.apache.flink.walkthrough.common.entity.Transaction;\r\n    import org.apache.flink.walkthrough.common.source.TransactionSource;\r\n    \r\n    public class FraudDetectionJob {\r\n    \r\n        public static void main(String[] args) throws Exception {\r\n            StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\r\n    \r\n            DataStream&lt;Transaction&gt; transactions = env\r\n                .addSource(new TransactionSource())\r\n                .name(&quot;transactions&quot;);\r\n            \r\n            DataStream&lt;Alert&gt; alerts = transactions\r\n                .keyBy(Transaction::getAccountId)\r\n                .process(new FraudDetector())\r\n                .name(&quot;fraud-detector&quot;);\r\n    \r\n            alerts\r\n                .addSink(new AlertSink())\r\n                .name(&quot;send-alerts&quot;);\r\n    \r\n            env.execute(&quot;Fraud Detection&quot;);\r\n        }\r\n    }\r\n\r\n-------\r\n\r\n1)\r\nDoes `.keyBy(Transaction::getAccountId)` function applied on data stream `transactions` perform  partitioning(based on account ID) on incoming data  and perform `process(new FraudDetector())` on each partition, as shown in below diagram?\r\n\r\n2) \r\nIf yes, How to write a mapper to process data streamed from each partition? Using `.keyBy(Transaction::getAccountId)`?\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/AfAUw.png\r\n\r\n-------------------------------\r\n\r\n","title":"Flink - Does keyBy() functon partition the flink operator internally?","body":"<p>In the below code, taken from <a href=\"https://nightlies.apache.org/flink/flink-docs-release-1.12/try-flink/datastream_api.html#frauddetectionjobjava\" rel=\"nofollow noreferrer\">documentation</a>:</p>\n<pre><code>package spendreport;\n\nimport org.apache.flink.streaming.api.datastream.DataStream;\nimport org.apache.flink.streaming.api.environment.StreamExecutionEnvironment;\nimport org.apache.flink.walkthrough.common.sink.AlertSink;\nimport org.apache.flink.walkthrough.common.entity.Alert;\nimport org.apache.flink.walkthrough.common.entity.Transaction;\nimport org.apache.flink.walkthrough.common.source.TransactionSource;\n\npublic class FraudDetectionJob {\n\n    public static void main(String[] args) throws Exception {\n        StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\n\n        DataStream&lt;Transaction&gt; transactions = env\n            .addSource(new TransactionSource())\n            .name(&quot;transactions&quot;);\n        \n        DataStream&lt;Alert&gt; alerts = transactions\n            .keyBy(Transaction::getAccountId)\n            .process(new FraudDetector())\n            .name(&quot;fraud-detector&quot;);\n\n        alerts\n            .addSink(new AlertSink())\n            .name(&quot;send-alerts&quot;);\n\n        env.execute(&quot;Fraud Detection&quot;);\n    }\n}\n</code></pre>\n<hr />\n<ol>\n<li></li>\n</ol>\n<p>Does <code>.keyBy(Transaction::getAccountId)</code> function applied on data stream <code>transactions</code> perform  partitioning(based on account ID) on incoming data  and perform <code>process(new FraudDetector())</code> on each partition, as shown in below diagram?</p>\n<p>2)\nIf yes, How to write a mapper to process data streamed from each partition? Using <code>.keyBy(Transaction::getAccountId)</code>?</p>\n<p><a href=\"https://i.stack.imgur.com/AfAUw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AfAUw.png\" alt=\"enter image description here\" /></a></p>\n<hr />\n"},{"tags":["java","sharepoint","microsoft-graph-api"],"answers":[{"tags":[],"owner":{"account_id":5180779,"reputation":581,"user_id":4146565,"display_name":"Vitor Santos"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691629124,"creation_date":1691629124,"answer_id":76872047,"question_id":76838107,"body_markdown":"After a lot of search and tries, my conclusion is that there is no &quot;easy&quot; way to add the odata directive using the API.\r\n\r\nThe attribute containing the odata directive must be added by your own code.\r\n\r\nUsing the question&#39;s example:\r\n\r\n    {\r\n        &quot;myCollectionField@odata.type&quot;: &quot;Collection(Edm.String)&quot;,\r\n        &quot;myCollectionField&quot;: [\r\n            &quot;VALUE 1&quot;,\r\n            &quot;VALUE 2&quot;\r\n        ]\r\n    }\r\n\r\nYour code must create an object like this:\r\n\r\n    ListItem listItem = new ListItem();\r\n    FieldValueSet fieldValueSet = new FieldValueSet();\r\n    //assume value is a collection converted to a JsonElement object\r\n    fieldValueSet.additionalDataManager().put(&quot;myCollectionField&quot;,value);\r\n    fieldValueSet.put(&quot;myCollectionField@odata.type&quot;, &quot;Collection(Edm.String)&quot;);\r\n\r\nWell, that&#39;s it. There is no helper method, and unfortunately no hints at all in the library&#39;s docs.\r\n\r\n","title":"How to udpate a choice value on a list item in Sharepoint using java SDK","body":"<p>After a lot of search and tries, my conclusion is that there is no &quot;easy&quot; way to add the odata directive using the API.</p>\n<p>The attribute containing the odata directive must be added by your own code.</p>\n<p>Using the question's example:</p>\n<pre><code>{\n    &quot;myCollectionField@odata.type&quot;: &quot;Collection(Edm.String)&quot;,\n    &quot;myCollectionField&quot;: [\n        &quot;VALUE 1&quot;,\n        &quot;VALUE 2&quot;\n    ]\n}\n</code></pre>\n<p>Your code must create an object like this:</p>\n<pre><code>ListItem listItem = new ListItem();\nFieldValueSet fieldValueSet = new FieldValueSet();\n//assume value is a collection converted to a JsonElement object\nfieldValueSet.additionalDataManager().put(&quot;myCollectionField&quot;,value);\nfieldValueSet.put(&quot;myCollectionField@odata.type&quot;, &quot;Collection(Edm.String)&quot;);\n</code></pre>\n<p>Well, that's it. There is no helper method, and unfortunately no hints at all in the library's docs.</p>\n"}],"owner":{"account_id":5180779,"reputation":581,"user_id":4146565,"display_name":"Vitor Santos"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691629124,"creation_date":1691170792,"question_id":76838107,"body_markdown":"I am developing a tool in java to transfer data from legacy applications to MS Sharepoint. I currently use the msgraph java SDK. Most things work fine, but I am having trouble updating a collection (option) property.\r\n\r\nUsing the REST API, I can update that column with the following payload:\r\n\r\nURI: https://graph.microsoft.com/v1.0/sites/&lt;site id&gt;/lists/&lt;list id&gt;/items/&lt;item id&gt;/fields\r\n\r\n    {\r\n\t    &quot;myCollectionField@odata.type&quot;: &quot;Collection(Edm.String)&quot;,\r\n\t    &quot;myCollectionField&quot;: [\r\n\t\t    &quot;VALUE 1&quot;,\r\n\t\t    &quot;VALUE 2&quot;\r\n\t    ]\r\n    }\r\n\r\nThe problem is how to do it using the Java API. All properties are defined as a JsonElement property with a string key. Ex:\r\n\r\n        \r\n        ListItem listItem = new ListItem();\r\n\r\n        FieldValueSet fieldValueSet = new FieldValueSet();\r\n        fieldValueSet.additionalDataManager().put(&quot;atribute&quot;,value);\r\n \r\nSimply adding the attributes will create a body with all values, but without the odata.type portion.\r\n\r\nIs there any call in the API to add that &quot;odata.type&quot; portion to the body? \r\n\r\n\r\n\r\n\r\n","title":"How to udpate a choice value on a list item in Sharepoint using java SDK","body":"<p>I am developing a tool in java to transfer data from legacy applications to MS Sharepoint. I currently use the msgraph java SDK. Most things work fine, but I am having trouble updating a collection (option) property.</p>\n<p>Using the REST API, I can update that column with the following payload:</p>\n<p>URI: <a href=\"https://graph.microsoft.com/v1.0/sites/\" rel=\"nofollow noreferrer\">https://graph.microsoft.com/v1.0/sites/</a>/lists//items//fields</p>\n<pre><code>{\n    &quot;myCollectionField@odata.type&quot;: &quot;Collection(Edm.String)&quot;,\n    &quot;myCollectionField&quot;: [\n        &quot;VALUE 1&quot;,\n        &quot;VALUE 2&quot;\n    ]\n}\n</code></pre>\n<p>The problem is how to do it using the Java API. All properties are defined as a JsonElement property with a string key. Ex:</p>\n<pre><code>    ListItem listItem = new ListItem();\n\n    FieldValueSet fieldValueSet = new FieldValueSet();\n    fieldValueSet.additionalDataManager().put(&quot;atribute&quot;,value);\n</code></pre>\n<p>Simply adding the attributes will create a body with all values, but without the odata.type portion.</p>\n<p>Is there any call in the API to add that &quot;odata.type&quot; portion to the body?</p>\n"},{"tags":["java","protocol-buffers","protoc"],"comments":[{"owner":{"account_id":10496592,"reputation":3058,"user_id":7736617,"display_name":"Arnaud Claudel"},"score":0,"creation_date":1565090205,"post_id":57374747,"comment_id":101234126,"body_markdown":"Possible duplicate: https://stackoverflow.com/a/31031346/7736617","body":"Possible duplicate: <a href=\"https://stackoverflow.com/a/31031346/7736617\">stackoverflow.com/a/31031346/7736617</a>"},{"owner":{"account_id":15739854,"reputation":1866,"user_id":11357623,"display_name":"AppDeveloper"},"score":0,"creation_date":1565090324,"post_id":57374747,"comment_id":101234176,"body_markdown":"I tried the example from the linked question, and got this error, `--grpc-java_out: protoc-gen-grpc-java: Plugin failed with status code 1.` what&#39;s next for me? Where do I find and install this plugin?","body":"I tried the example from the linked question, and got this error, <code>--grpc-java_out: protoc-gen-grpc-java: Plugin failed with status code 1.</code> what&#39;s next for me? Where do I find and install this plugin?"},{"owner":{"account_id":10496592,"reputation":3058,"user_id":7736617,"display_name":"Arnaud Claudel"},"score":0,"creation_date":1565090525,"post_id":57374747,"comment_id":101234271,"body_markdown":"The answer also provides a link to the documentation, which provides an example. https://github.com/grpc/grpc-java/tree/master/compiler","body":"The answer also provides a link to the documentation, which provides an example. <a href=\"https://github.com/grpc/grpc-java/tree/master/compiler\" rel=\"nofollow noreferrer\">github.com/grpc/grpc-java/tree/master/compiler</a>"},{"owner":{"account_id":15739854,"reputation":1866,"user_id":11357623,"display_name":"AppDeveloper"},"score":0,"creation_date":1565091087,"post_id":57374747,"comment_id":101234544,"body_markdown":"ok, followed the steps. I&#39;ve compiled for my system (mac), and installed the codegen to maven repository using `../gradlew publishToMavenLocal`, the plugin fail error persists, what&#39;s next please?","body":"ok, followed the steps. I&#39;ve compiled for my system (mac), and installed the codegen to maven repository using <code>..&#47;gradlew publishToMavenLocal</code>, the plugin fail error persists, what&#39;s next please?"},{"owner":{"account_id":15739854,"reputation":1866,"user_id":11357623,"display_name":"AppDeveloper"},"score":0,"creation_date":1565091188,"post_id":57374747,"comment_id":101234604,"body_markdown":"i&#39;ve added this to the command with path to .m2  `--plugin=protoc-gen-grpc-java=~/.m2/repository/protoc-gen-grpc-java --grpc-java_out=path/to/output/dir` I don&#39;t see however, the file under .m2, so where do I find `protoc-gen-grpc-java` file?","body":"i&#39;ve added this to the command with path to .m2  <code>--plugin=protoc-gen-grpc-java=~&#47;.m2&#47;repository&#47;protoc-gen-gr&zwnj;&#8203;pc-java --grpc-java_out=path&#47;to&#47;output&#47;dir</code> I don&#39;t see however, the file under .m2, so where do I find <code>protoc-gen-grpc-java</code> file?"},{"owner":{"account_id":10496592,"reputation":3058,"user_id":7736617,"display_name":"Arnaud Claudel"},"score":0,"creation_date":1565092444,"post_id":57374747,"comment_id":101235352,"body_markdown":"It should be in `io/grpc/protoc-gen-grpc-java/` but you should be able to download a compiled one, https://repo1.maven.org/maven2/io/grpc/protoc-gen-grpc-java/1.22.1/","body":"It should be in <code>io&#47;grpc&#47;protoc-gen-grpc-java&#47;</code> but you should be able to download a compiled one, <a href=\"https://repo1.maven.org/maven2/io/grpc/protoc-gen-grpc-java/1.22.1/\" rel=\"nofollow noreferrer\">repo1.maven.org/maven2/io/grpc/protoc-gen-grpc-java/1.22.1</a>"},{"owner":{"account_id":15739854,"reputation":1866,"user_id":11357623,"display_name":"AppDeveloper"},"score":0,"creation_date":1565096776,"post_id":57374747,"comment_id":101237919,"body_markdown":"made progress but stuck at this `Building codegen requires Protobuf version 3.9.0`, however, `protoc --version` returns `libprotoc 3.9.0`","body":"made progress but stuck at this <code>Building codegen requires Protobuf version 3.9.0</code>, however, <code>protoc --version</code> returns <code>libprotoc 3.9.0</code>"},{"owner":{"account_id":10496592,"reputation":3058,"user_id":7736617,"display_name":"Arnaud Claudel"},"score":0,"creation_date":1565098645,"post_id":57374747,"comment_id":101239164,"body_markdown":"What&#39;s exactly you problem ? Update your question with the new elements","body":"What&#39;s exactly you problem ? Update your question with the new elements"},{"owner":{"account_id":15739854,"reputation":1866,"user_id":11357623,"display_name":"AppDeveloper"},"score":0,"creation_date":1565101212,"post_id":57374747,"comment_id":101240895,"body_markdown":"question updated, please have a look","body":"question updated, please have a look"},{"owner":{"account_id":10496592,"reputation":3058,"user_id":7736617,"display_name":"Arnaud Claudel"},"score":0,"creation_date":1565103568,"post_id":57374747,"comment_id":101242347,"body_markdown":"Have you try with a compiled one ? I can&#39;t reproduce, it&#39;s working for me","body":"Have you try with a compiled one ? I can&#39;t reproduce, it&#39;s working for me"},{"owner":{"account_id":15739854,"reputation":1866,"user_id":11357623,"display_name":"AppDeveloper"},"score":0,"creation_date":1565104221,"post_id":57374747,"comment_id":101242690,"body_markdown":"took another route, from inside `protobuf-3.9.0/java` i ran `mvn install`, error screenshot. https://i.stack.imgur.com/APw6o.png","body":"took another route, from inside <code>protobuf-3.9.0&#47;java</code> i ran <code>mvn install</code>, error screenshot. <a href=\"https://i.stack.imgur.com/APw6o.png\" rel=\"nofollow noreferrer\">i.stack.imgur.com/APw6o.png</a>"},{"owner":{"account_id":15739854,"reputation":1866,"user_id":11357623,"display_name":"AppDeveloper"},"score":0,"creation_date":1565109240,"post_id":57374747,"comment_id":101245417,"body_markdown":"@ArnaudClaudel I&#39;m still stuck at getting this java gen grpc to compile, instead can you plese provide me the jar file?","body":"@ArnaudClaudel I&#39;m still stuck at getting this java gen grpc to compile, instead can you plese provide me the jar file?"}],"answers":[{"tags":[],"owner":{"account_id":16468713,"reputation":1,"user_id":11898288,"display_name":"Ran"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1565208008,"creation_date":1565208008,"answer_id":57401556,"question_id":57374747,"body_markdown":"I don&#39;t know what is your use case, maybe you do not have build the codegen by yourself.\r\nAs in the link https://github.com/grpc/grpc-java/blob/master/COMPILING.md\r\n&gt; Since many Java developers don&#39;t have C compilers installed and don&#39;t need to run or modify the codegen, the build can skip it. To skip, create the file &lt;project-root&gt;/gradle.properties and add skipCodegen=true.\r\n\r\nIf you really need to, there are steps you can follow in that link too.\r\n","title":"gRPC Java Codegen Plugin for Protobuf Compiler","body":"<p>I don't know what is your use case, maybe you do not have build the codegen by yourself.\nAs in the link <a href=\"https://github.com/grpc/grpc-java/blob/master/COMPILING.md\" rel=\"nofollow noreferrer\">https://github.com/grpc/grpc-java/blob/master/COMPILING.md</a></p>\n\n<blockquote>\n  <p>Since many Java developers don't have C compilers installed and don't need to run or modify the codegen, the build can skip it. To skip, create the file /gradle.properties and add skipCodegen=true.</p>\n</blockquote>\n\n<p>If you really need to, there are steps you can follow in that link too.</p>\n"},{"tags":[],"owner":{"account_id":1296542,"reputation":41,"user_id":6112686,"display_name":"lotuc"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691627379,"creation_date":1691627379,"answer_id":76871983,"question_id":57374747,"body_markdown":"https://github.com/grpc/grpc-java/tree/master/compiler\r\n\r\nThis link now contains detailed generation command and where the prebuilt protoc-gen-grpc plugin can be downloaded.\r\n\r\nWhere and how to download the pre-built protoc-gen-rpc plugin:\r\n&gt; 1. Navigate to https://mvnrepository.com/artifact/io.grpc/protoc-gen-grpc-&gt; 2. java\r\n&gt; 3. Click into a version\r\n&gt; 4. Click &quot;Files&quot;\r\n&gt; 5. Select and download the one that is compatible with your system\r\n\r\nGenerate code with command line tool `protoc`\r\n&gt; ```\r\n&gt; $ protoc --plugin=protoc-gen-grpc-java=/path/to/your/downloaded/protoc-gen-grpc-java \\\r\n&gt;   --grpc-java_out=&quot;$OUTPUT_FILE&quot; --proto_path=&quot;$DIR_OF_PROTO_FILE&quot; &quot;$PROTO_FILE&quot;\r\n&gt; ```\r\n","title":"gRPC Java Codegen Plugin for Protobuf Compiler","body":"<p><a href=\"https://github.com/grpc/grpc-java/tree/master/compiler\" rel=\"nofollow noreferrer\">https://github.com/grpc/grpc-java/tree/master/compiler</a></p>\n<p>This link now contains detailed generation command and where the prebuilt protoc-gen-grpc plugin can be downloaded.</p>\n<p>Where and how to download the pre-built protoc-gen-rpc plugin:</p>\n<blockquote>\n<ol>\n<li>Navigate to <a href=\"https://mvnrepository.com/artifact/io.grpc/protoc-gen-grpc-%3E\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/io.grpc/protoc-gen-grpc-&gt;</a> 2. java</li>\n<li>Click into a version</li>\n<li>Click &quot;Files&quot;</li>\n<li>Select and download the one that is compatible with your system</li>\n</ol>\n</blockquote>\n<p>Generate code with command line tool <code>protoc</code></p>\n<blockquote>\n<pre><code>$ protoc --plugin=protoc-gen-grpc-java=/path/to/your/downloaded/protoc-gen-grpc-java \\\n  --grpc-java_out=&quot;$OUTPUT_FILE&quot; --proto_path=&quot;$DIR_OF_PROTO_FILE&quot; &quot;$PROTO_FILE&quot;\n</code></pre>\n</blockquote>\n"}],"owner":{"account_id":15739854,"reputation":1866,"user_id":11357623,"display_name":"AppDeveloper"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2955,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691627379,"creation_date":1565090009,"question_id":57374747,"body_markdown":"Updating question as I&#39;ve progressed from the original problem.\r\n\r\n**Step 1**. I&#39;ve compiled and Installed Protobuf Compiler for mac using this [link][1]. \r\n\r\n**Step 2**. Currently stuck at gRPC Java Codegen Plugin for Protobuf Compiler [link][2]: \r\n\r\nSuccessful    `../gradlew java_pluginExecutable`\r\n\r\nError `../gradlew test` (screenshot 1)\r\n\r\n&gt; *** Building codegen requires Protobuf version 3.9.0\r\n\r\n\r\n----------\r\n\r\n\r\n`which protoc` outputs `/usr/local/bin/protoc`\r\n\r\n`protoc --version` outputs `libprotoc 3.9.0`\r\n\r\n**P.S.** Please also mention in your solution what to do next once I&#39;m able to compile java generator, I plan to use the plugin from command line initially. \r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n\r\n  [1]: https://medium.com/@erika_dike/installing-the-protobuf-compiler-on-a-mac-a0d397af46b8\r\n  [2]: https://github.com/grpc/grpc-java/tree/master/compiler\r\n  [3]: https://i.stack.imgur.com/APw6o.png","title":"gRPC Java Codegen Plugin for Protobuf Compiler","body":"<p>Updating question as I've progressed from the original problem.</p>\n\n<p><strong>Step 1</strong>. I've compiled and Installed Protobuf Compiler for mac using this <a href=\"https://medium.com/@erika_dike/installing-the-protobuf-compiler-on-a-mac-a0d397af46b8\" rel=\"nofollow noreferrer\">link</a>. </p>\n\n<p><strong>Step 2</strong>. Currently stuck at gRPC Java Codegen Plugin for Protobuf Compiler <a href=\"https://github.com/grpc/grpc-java/tree/master/compiler\" rel=\"nofollow noreferrer\">link</a>: </p>\n\n<p>Successful    <code>../gradlew java_pluginExecutable</code></p>\n\n<p>Error <code>../gradlew test</code> (screenshot 1)</p>\n\n<blockquote>\n  <p>*** Building codegen requires Protobuf version 3.9.0</p>\n</blockquote>\n\n<hr>\n\n<p><code>which protoc</code> outputs <code>/usr/local/bin/protoc</code></p>\n\n<p><code>protoc --version</code> outputs <code>libprotoc 3.9.0</code></p>\n\n<p><strong>P.S.</strong> Please also mention in your solution what to do next once I'm able to compile java generator, I plan to use the plugin from command line initially. </p>\n\n<p><a href=\"https://i.stack.imgur.com/APw6o.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/APw6o.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":["java","codenameone","media-player"],"comments":[{"owner":{"account_id":394396,"reputation":52134,"user_id":756809,"accept_rate":89,"display_name":"Shai Almog"},"score":1,"creation_date":1691635025,"post_id":76871980,"comment_id":135519124,"body_markdown":"Are you running on an ARM mac? If so we&#39;re working on a fix for this but there&#39;s a problem related to that. Try using an x86 JVM as a workaround.","body":"Are you running on an ARM mac? If so we&#39;re working on a fix for this but there&#39;s a problem related to that. Try using an x86 JVM as a workaround."}],"owner":{"account_id":20108531,"reputation":65,"user_id":14745423,"display_name":"Stefan Cohn"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691627261,"creation_date":1691627261,"question_id":76871980,"body_markdown":"I am trying to get audio into my program using URI&#39;s and MediaManager, specifically with this method\r\n`Media media = MediaManager.createMedia(uri, false)`. It does not work as I keep getting this error (i&#39;ve tried setting the boolean in the constructor to both true and false) \r\n\r\n    java.lang.UnsatisfiedLinkError: Can&#39;t load /Users/mrducky/.m2/repository/com/codenameone/codenameone-cef/84.4.1-M3/codenameone-cef-84.4.1-M3-mac.zip-extracted/cef/macos64/libjcef.dylib\r\n        at java.base/java.lang.ClassLoader.loadLibrary(ClassLoader.java:2635)\r\n        at java.base/java.lang.Runtime.loadLibrary0(Runtime.java:827)\r\n        at java.base/java.lang.System.loadLibrary(System.java:1871)\r\n        at org.cef.SystemBootstrap$1.loadLibrary(SystemBootstrap.java:24)\r\n        at org.cef.SystemBootstrap.loadLibrary(SystemBootstrap.java:36)\r\n        at org.cef.CefApp.startup(CefApp.java:536)\r\n        at com.codename1.impl.javase.cef.CEFBrowserComponent.create(CEFBrowserComponent.java:212)\r\n        at com.codename1.impl.javase.cef.JavaCEFSEPort$CodenameOneMediaPlayer.init(JavaCEFSEPort.java:256)\r\n        at com.codename1.impl.javase.cef.JavaCEFSEPort$CodenameOneMediaPlayer.&lt;init&gt;(JavaCEFSEPort.java:235)\r\n        at com.codename1.impl.javase.cef.JavaCEFSEPort.createMediaAsync(JavaCEFSEPort.java:683)\r\n        at com.codename1.impl.javase.JavaSEPort.createMedia(JavaSEPort.java:9483)\r\n        at com.codename1.ui.Display.createMedia(Display.java:3656)\r\n        at com.codename1.media.MediaManager.createMedia(MediaManager.java:255)\r\n        at com.codename1.media.MediaManager.createMedia(MediaManager.java:212)\r\n        at com.example.audio.AudioPlayer.playAudio(AudioPlayer.java:11)\r\n        at com.example.myapp.Game.&lt;init&gt;(Game.java:35)\r\n        at com.example.myapp.Game.getGame(Game.java:40)\r\n        at com.example.myapp.MyApp.init(MyApp.java:49)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n        at com.codename1.impl.javase.Executor$3$2.run(Executor.java:334)\r\n        at com.codename1.ui.Display.executeSerialCall(Display.java:1395)\r\n        at com.codename1.ui.Display.processSerialCalls(Display.java:1379)\r\n        at com.codename1.ui.Display.mainEDTLoop(Display.java:1166)\r\n        at com.codename1.ui.RunnableWrapper.run(RunnableWrapper.java:120)\r\n        at com.codename1.impl.CodenameOneThread.run(CodenameOneThread.java:176)\r\n\r\nI tried deleting the /cef/macos64/... folder and reloading but it did not work. \r\nAny help would be greatly appreciated. \r\n","title":"Codename One: error with MediaManager and URI; can&#39;t load libjcef.dylib","body":"<p>I am trying to get audio into my program using URI's and MediaManager, specifically with this method\n<code>Media media = MediaManager.createMedia(uri, false)</code>. It does not work as I keep getting this error (i've tried setting the boolean in the constructor to both true and false)</p>\n<pre><code>java.lang.UnsatisfiedLinkError: Can't load /Users/mrducky/.m2/repository/com/codenameone/codenameone-cef/84.4.1-M3/codenameone-cef-84.4.1-M3-mac.zip-extracted/cef/macos64/libjcef.dylib\n    at java.base/java.lang.ClassLoader.loadLibrary(ClassLoader.java:2635)\n    at java.base/java.lang.Runtime.loadLibrary0(Runtime.java:827)\n    at java.base/java.lang.System.loadLibrary(System.java:1871)\n    at org.cef.SystemBootstrap$1.loadLibrary(SystemBootstrap.java:24)\n    at org.cef.SystemBootstrap.loadLibrary(SystemBootstrap.java:36)\n    at org.cef.CefApp.startup(CefApp.java:536)\n    at com.codename1.impl.javase.cef.CEFBrowserComponent.create(CEFBrowserComponent.java:212)\n    at com.codename1.impl.javase.cef.JavaCEFSEPort$CodenameOneMediaPlayer.init(JavaCEFSEPort.java:256)\n    at com.codename1.impl.javase.cef.JavaCEFSEPort$CodenameOneMediaPlayer.&lt;init&gt;(JavaCEFSEPort.java:235)\n    at com.codename1.impl.javase.cef.JavaCEFSEPort.createMediaAsync(JavaCEFSEPort.java:683)\n    at com.codename1.impl.javase.JavaSEPort.createMedia(JavaSEPort.java:9483)\n    at com.codename1.ui.Display.createMedia(Display.java:3656)\n    at com.codename1.media.MediaManager.createMedia(MediaManager.java:255)\n    at com.codename1.media.MediaManager.createMedia(MediaManager.java:212)\n    at com.example.audio.AudioPlayer.playAudio(AudioPlayer.java:11)\n    at com.example.myapp.Game.&lt;init&gt;(Game.java:35)\n    at com.example.myapp.Game.getGame(Game.java:40)\n    at com.example.myapp.MyApp.init(MyApp.java:49)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at com.codename1.impl.javase.Executor$3$2.run(Executor.java:334)\n    at com.codename1.ui.Display.executeSerialCall(Display.java:1395)\n    at com.codename1.ui.Display.processSerialCalls(Display.java:1379)\n    at com.codename1.ui.Display.mainEDTLoop(Display.java:1166)\n    at com.codename1.ui.RunnableWrapper.run(RunnableWrapper.java:120)\n    at com.codename1.impl.CodenameOneThread.run(CodenameOneThread.java:176)\n</code></pre>\n<p>I tried deleting the /cef/macos64/... folder and reloading but it did not work.\nAny help would be greatly appreciated.</p>\n"},{"tags":["java","java.util.scanner","final"],"comments":[{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":3,"creation_date":1691614541,"post_id":76871184,"comment_id":135517042,"body_markdown":"`&quot;1&quot;.equals(galOrLit)`, you are comparing the `Scanner` object itself against the string `&quot;1&quot;`. That will never be `true`. Instead you have to read something from the scanner like `nextLine()` or `nextInt()` and compare **that** against the string `&quot;1&quot;` or `&quot;2&quot;` (or against actual `int` numbers).","body":"<code>&quot;1&quot;.equals(galOrLit)</code>, you are comparing the <code>Scanner</code> object itself against the string <code>&quot;1&quot;</code>. That will never be <code>true</code>. Instead you have to read something from the scanner like <code>nextLine()</code> or <code>nextInt()</code> and compare <b>that</b> against the string <code>&quot;1&quot;</code> or <code>&quot;2&quot;</code> (or against actual <code>int</code> numbers)."},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":1,"creation_date":1691614661,"post_id":76871184,"comment_id":135517070,"body_markdown":"The post you linked uses `hasNext()` and `nextInt()`. Perhaps you want to do the same for the choice?","body":"The post you linked uses <code>hasNext()</code> and <code>nextInt()</code>. Perhaps you want to do the same for the choice?"},{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":0,"creation_date":1691614662,"post_id":76871184,"comment_id":135517071,"body_markdown":"Also note that British gallons are 4.55 litres. Maybe choose inches and cm instead, which don&#39;t have regional variations.","body":"Also note that British gallons are 4.55 litres. Maybe choose inches and cm instead, which don&#39;t have regional variations."}],"answers":[{"tags":[],"owner":{"account_id":16909157,"reputation":163,"user_id":12228688,"display_name":"Skerdi Velo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691615360,"creation_date":1691614538,"answer_id":76871219,"question_id":76871184,"body_markdown":"It looks like you are not actually reading any input from the user. You are only printing out the options to choose from, but you are not reading the user&#39;s input. You only to add one line: \r\n\r\n    String choice = scanner.nextLine();\r\nHere is how it would look like:\r\n\r\n    private static void intro(String[] args) {\r\n        final Scanner scanner = new Scanner(System.in);\r\n    \r\n        System.out.println(&quot;[1] =&gt; Gallons to Liters&quot;);\r\n        System.out.println(&quot;[2] =&gt; Liters to Gallons&quot;);\r\n    \r\n        String choice = scanner.nextLine();\r\n    \r\n        if (&quot;1&quot;.equals(choice)) {\r\n            galToLit(args);\r\n        } else if (&quot;2&quot;.equals(choice)) {\r\n            litToGal(args);\r\n        }\r\n    }\r\nAnother thing, I suggest to not use nextLine(), but use: **Integer.parseInt(scanner.nextLine()); for integer**\r\n\r\nSo that line would look like this:\r\n\r\n    String choice = Integer.parseInt(scanner.nextLine());\r\n\r\n**Double.parseDouble(scanner.nextLine()); if you have any double**\r\nBecause if you input from string to int sometimes it doesn&#39;t work.\r\n\r\nHope this helps!","title":"My Scanner input gets skipped and code gets terminated","body":"<p>It looks like you are not actually reading any input from the user. You are only printing out the options to choose from, but you are not reading the user's input. You only to add one line:</p>\n<pre><code>String choice = scanner.nextLine();\n</code></pre>\n<p>Here is how it would look like:</p>\n<pre><code>private static void intro(String[] args) {\n    final Scanner scanner = new Scanner(System.in);\n\n    System.out.println(&quot;[1] =&gt; Gallons to Liters&quot;);\n    System.out.println(&quot;[2] =&gt; Liters to Gallons&quot;);\n\n    String choice = scanner.nextLine();\n\n    if (&quot;1&quot;.equals(choice)) {\n        galToLit(args);\n    } else if (&quot;2&quot;.equals(choice)) {\n        litToGal(args);\n    }\n}\n</code></pre>\n<p>Another thing, I suggest to not use nextLine(), but use: <strong>Integer.parseInt(scanner.nextLine()); for integer</strong></p>\n<p>So that line would look like this:</p>\n<pre><code>String choice = Integer.parseInt(scanner.nextLine());\n</code></pre>\n<p><strong>Double.parseDouble(scanner.nextLine()); if you have any double</strong>\nBecause if you input from string to int sometimes it doesn't work.</p>\n<p>Hope this helps!</p>\n"},{"tags":[],"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691614831,"creation_date":1691614831,"answer_id":76871242,"question_id":76871184,"body_markdown":"The problem lies in your usage of the `Scanner` class to read user input. Here&#39;s the corrected version of your program:\r\n\r\n```java\r\nimport java.util.Scanner;\r\n\r\npublic class Main {\r\n    private static void intro(String[] args) {\r\n        final Scanner galOrLit = new Scanner(System.in);\r\n\r\n        System.out.println(&quot;[1] =&gt; Gallons to Liters&quot;);\r\n        System.out.println(&quot;[2] =&gt; Liters to Gallons&quot;);\r\n\r\n        int choice = galOrLit.nextInt();  // Read user&#39;s choice\r\n\r\n        if (choice == 1) {\r\n            galToLit(args);\r\n        } else if (choice == 2) {\r\n            litToGal(args);\r\n        }\r\n    }\r\n\r\n    private static void galToLit(String[] args) {\r\n        double liters;\r\n\r\n        System.out.println(&quot;Enter Gallons: &quot;);\r\n        final Scanner gallons = new Scanner(System.in);\r\n\r\n        double input = gallons.nextDouble();  // Read a double value\r\n        liters = input * 3.7854;\r\n\r\n        System.out.println(&quot;\\n&quot; + input + &quot; gallons is &quot; + liters + &quot; liters.&quot;);\r\n    }\r\n\r\n    private static void litToGal(String[] args) {\r\n        double gallons;\r\n\r\n        System.out.println(&quot;Enter Liters: &quot;);\r\n        final Scanner liters = new Scanner(System.in);\r\n\r\n        double input = liters.nextDouble();  // Read a double value\r\n        gallons = input / 3.7854;\r\n\r\n        System.out.println(&quot;\\n&quot; + input + &quot; liters is &quot; + gallons + &quot; gallons.&quot;);\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        intro(args);\r\n    }\r\n}\r\n```\r\n\r\nIn this corrected version, I&#39;ve made the following changes:\r\n\r\n1. Use `nextInt()` to read the user&#39;s choice of conversion.\r\n2. Use `nextDouble()` to read the user&#39;s input for gallons or liters.\r\n3. Updated the conditions in the `intro` method to compare the user&#39;s choice correctly.\r\n4. Changed the input variable type to `double` in the `galToLit` and `litToGal` methods to accommodate double values.\r\n\r\nThis way it now correctly read user input and perform the desired conversions.","title":"My Scanner input gets skipped and code gets terminated","body":"<p>The problem lies in your usage of the <code>Scanner</code> class to read user input. Here's the corrected version of your program:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Scanner;\n\npublic class Main {\n    private static void intro(String[] args) {\n        final Scanner galOrLit = new Scanner(System.in);\n\n        System.out.println(&quot;[1] =&gt; Gallons to Liters&quot;);\n        System.out.println(&quot;[2] =&gt; Liters to Gallons&quot;);\n\n        int choice = galOrLit.nextInt();  // Read user's choice\n\n        if (choice == 1) {\n            galToLit(args);\n        } else if (choice == 2) {\n            litToGal(args);\n        }\n    }\n\n    private static void galToLit(String[] args) {\n        double liters;\n\n        System.out.println(&quot;Enter Gallons: &quot;);\n        final Scanner gallons = new Scanner(System.in);\n\n        double input = gallons.nextDouble();  // Read a double value\n        liters = input * 3.7854;\n\n        System.out.println(&quot;\\n&quot; + input + &quot; gallons is &quot; + liters + &quot; liters.&quot;);\n    }\n\n    private static void litToGal(String[] args) {\n        double gallons;\n\n        System.out.println(&quot;Enter Liters: &quot;);\n        final Scanner liters = new Scanner(System.in);\n\n        double input = liters.nextDouble();  // Read a double value\n        gallons = input / 3.7854;\n\n        System.out.println(&quot;\\n&quot; + input + &quot; liters is &quot; + gallons + &quot; gallons.&quot;);\n    }\n\n    public static void main(String[] args) {\n        intro(args);\n    }\n}\n</code></pre>\n<p>In this corrected version, I've made the following changes:</p>\n<ol>\n<li>Use <code>nextInt()</code> to read the user's choice of conversion.</li>\n<li>Use <code>nextDouble()</code> to read the user's input for gallons or liters.</li>\n<li>Updated the conditions in the <code>intro</code> method to compare the user's choice correctly.</li>\n<li>Changed the input variable type to <code>double</code> in the <code>galToLit</code> and <code>litToGal</code> methods to accommodate double values.</li>\n</ol>\n<p>This way it now correctly read user input and perform the desired conversions.</p>\n"}],"owner":{"account_id":18941081,"reputation":28,"user_id":19518483,"display_name":"arivvid27"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76871242,"answer_count":2,"score":0,"last_activity_date":1691627040,"creation_date":1691614301,"question_id":76871184,"body_markdown":"I am writing a &quot;Gallons to Liters and vice versa&quot; program in Java, but once I finished my program, i gave it the first run. I displayed the system outputs, like expected, but then it skipped the user input stage of my program.\r\n\r\n```java\r\nimport java.util.Scanner;\r\n\r\npublic class Main {\r\n\tprivate static void intro(String[] args) {\r\n\t\tfinal Scanner galOrLit = new Scanner(System.in);\r\n\r\n\t\tSystem.out.println(&quot;[1] =&gt; Gallons to Liters&quot;);\r\n\t\tSystem.out.println(&quot;[2] =&gt; Liters to Gallons&quot;);\r\n\r\n\t\tif (&quot;1&quot;.equals(galOrLit)) {\r\n\t\t\tgalToLit(args);\r\n\t\t} else if (&quot;2&quot;.equals(galOrLit)) {\r\n\t\t\tlitToGal(args);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate static void galToLit(String[] args) {\r\n\t\tdouble liters;\r\n\r\n\t\tSystem.out.println(&quot;Enter Gallons: &quot;);\r\n\t\tfinal Scanner gallons = new Scanner(System.in);\r\n\r\n\t\tint input = gallons.nextInt();\r\n\t\tliters = input * 3.7854;\r\n\r\n\t\tSystem.out.println(&quot;\\n&quot; + input + &quot; gallons is &quot; + liters + &quot; liters.&quot;);\r\n\t}\r\n\r\n\tprivate static void litToGal(String[] args) {\r\n\t\tdouble gallons;\r\n\r\n\t\tSystem.out.println(&quot;Enter Liters: &quot;);\r\n\t\tfinal Scanner liters = new Scanner(System.in);\r\n\r\n\t\tint input = liters.nextInt();\r\n\t\tgallons = input / 3.7854;\r\n\r\n\t\tSystem.out.println(&quot;\\n&quot; + input + &quot; liters is&quot; + gallons + &quot; gallons.&quot;);\r\n\t}\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tintro(args);\r\n\r\n\t}\r\n}\r\n```\r\nI tried to final my Scanners, since I had multiple in one class, following [this](https://stackoverflow.com/questions/50845958/scanner-gets-skipped) post. I was expecting my code to work smoothly, but it did no difference to the output. this is as far as I get with both versions of [code](https://i.stack.imgur.com/7BHOE.png).","title":"My Scanner input gets skipped and code gets terminated","body":"<p>I am writing a &quot;Gallons to Liters and vice versa&quot; program in Java, but once I finished my program, i gave it the first run. I displayed the system outputs, like expected, but then it skipped the user input stage of my program.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Scanner;\n\npublic class Main {\n    private static void intro(String[] args) {\n        final Scanner galOrLit = new Scanner(System.in);\n\n        System.out.println(&quot;[1] =&gt; Gallons to Liters&quot;);\n        System.out.println(&quot;[2] =&gt; Liters to Gallons&quot;);\n\n        if (&quot;1&quot;.equals(galOrLit)) {\n            galToLit(args);\n        } else if (&quot;2&quot;.equals(galOrLit)) {\n            litToGal(args);\n        }\n    }\n\n    private static void galToLit(String[] args) {\n        double liters;\n\n        System.out.println(&quot;Enter Gallons: &quot;);\n        final Scanner gallons = new Scanner(System.in);\n\n        int input = gallons.nextInt();\n        liters = input * 3.7854;\n\n        System.out.println(&quot;\\n&quot; + input + &quot; gallons is &quot; + liters + &quot; liters.&quot;);\n    }\n\n    private static void litToGal(String[] args) {\n        double gallons;\n\n        System.out.println(&quot;Enter Liters: &quot;);\n        final Scanner liters = new Scanner(System.in);\n\n        int input = liters.nextInt();\n        gallons = input / 3.7854;\n\n        System.out.println(&quot;\\n&quot; + input + &quot; liters is&quot; + gallons + &quot; gallons.&quot;);\n    }\n\n    public static void main(String[] args) {\n        intro(args);\n\n    }\n}\n</code></pre>\n<p>I tried to final my Scanners, since I had multiple in one class, following <a href=\"https://stackoverflow.com/questions/50845958/scanner-gets-skipped\">this</a> post. I was expecting my code to work smoothly, but it did no difference to the output. this is as far as I get with both versions of <a href=\"https://i.stack.imgur.com/7BHOE.png\" rel=\"nofollow noreferrer\">code</a>.</p>\n"},{"tags":["java","spyder"],"comments":[{"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"score":0,"creation_date":1688849156,"post_id":76643798,"comment_id":135130079,"body_markdown":"&quot;I heard that Spyder can support Java&quot; - citation needed.","body":"&quot;I heard that Spyder can support Java&quot; - citation needed."}],"answers":[{"tags":[],"owner":{"account_id":8173076,"reputation":1,"user_id":6152828,"display_name":"ronald"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691626497,"creation_date":1691609727,"answer_id":76870763,"question_id":76643798,"body_markdown":"    pip install install-jdk\r\n\r\nor\r\n\r\n    pip install jdk4py\r\n\r\nYou will need to restart kernel to use updated packages.\r\n\r\nAfter restart then import in `spyder` like one does when using `numpy` or `pandas`.\r\n","title":"How do I use Java on Spyder IDE?","body":"<pre><code>pip install install-jdk\n</code></pre>\n<p>or</p>\n<pre><code>pip install jdk4py\n</code></pre>\n<p>You will need to restart kernel to use updated packages.</p>\n<p>After restart then import in <code>spyder</code> like one does when using <code>numpy</code> or <code>pandas</code>.</p>\n"}],"owner":{"account_id":16821546,"reputation":5,"user_id":20584804,"display_name":"LianNuo "},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":323,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"answer_count":1,"score":-3,"last_activity_date":1691626497,"creation_date":1688831914,"question_id":76643798,"body_markdown":"I have downloaded both Java and Spyder IDE on my laptop. I heard that Spyder can support Java but I have no idea how to change its default language from Python to Java. Any help please?\r\n\r\nI want to see some clear instructions on how to change Spyder&#39;s programming language.","title":"How do I use Java on Spyder IDE?","body":"<p>I have downloaded both Java and Spyder IDE on my laptop. I heard that Spyder can support Java but I have no idea how to change its default language from Python to Java. Any help please?</p>\n<p>I want to see some clear instructions on how to change Spyder's programming language.</p>\n"},{"tags":["java","php","loops","benchmarking"],"comments":[{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":5,"creation_date":1691628014,"post_id":76871900,"comment_id":135518563,"body_markdown":"Java can almost certainly figure out how to eliminate the loop entirely by just setting `index = max`.","body":"Java can almost certainly figure out how to eliminate the loop entirely by just setting <code>index = max</code>."}],"answers":[{"tags":[],"owner":{"account_id":284783,"reputation":2370,"user_id":583101,"accept_rate":74,"display_name":"mlewis54"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691626086,"creation_date":1691626086,"answer_id":76871921,"question_id":76871900,"body_markdown":"While I suspect our systems are similar in power and I&#39;m on an older (7.1) version of PHP in which I get:\r\n\r\n    Total Execution Time: 9.6295697689056 Seconds\r\n\r\nWhich seems totally reasonable for a scripting language for 1 billion operations. I suspect newer versions of PHP are faster.\r\n\r\nSo my answer is more of an explanation and without knowing more of your environment I&#39;m not sure there is an answer to your question.","title":"PHP Script Takes So Much Time More Than Expected","body":"<p>While I suspect our systems are similar in power and I'm on an older (7.1) version of PHP in which I get:</p>\n<pre><code>Total Execution Time: 9.6295697689056 Seconds\n</code></pre>\n<p>Which seems totally reasonable for a scripting language for 1 billion operations. I suspect newer versions of PHP are faster.</p>\n<p>So my answer is more of an explanation and without knowing more of your environment I'm not sure there is an answer to your question.</p>\n"}],"owner":{"account_id":1975618,"reputation":591,"user_id":1773471,"accept_rate":58,"display_name":"Wallace"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":4,"up_vote_count":1,"answer_count":1,"score":-3,"last_activity_date":1691626086,"creation_date":1691625636,"question_id":76871900,"body_markdown":"My PHP script takes 32 seconds, while doing the same thing using Java takes ~2 milliseconds and 200 milliseconds using golang. \r\n\r\nWhy the PHP script takes so much time? I know PHP is an interpreted language and it executes much more instructions inside the interpreter than we saw, but this code is so simple, are there any other reasons there? \r\n\r\nenv info:   \r\n\r\n    php version: PHP 7.4.3-4ubuntu2.19 (cli), Zend Engine v3.4.0\r\n    hardware: 15G RAM, 11th Gen Intel(R) Core(TM) i7-11800H @ 2.30GHz\r\n    software: ubuntu 20.04 LTS on Windows WSL2. \r\n\r\nphp Code:\r\n  \r\n    &lt;?php\r\n     \r\n         function test(int $max, int $start) {\r\n     \r\n             $time_start = microtime(true);\r\n             while ($start &lt; $max) {\r\n                 $start = $start+1;\r\n             }\r\n     \r\n             $time_end = microtime(true);\r\n     \r\n             //dividing with 60 will give the execution time in minutes otherwise seconds\r\n             $execution_time = ($time_end - $time_start);\r\n     \r\n             //execution time of the script\r\n             print(&#39;Total Execution Time: &#39;.$execution_time.&#39; Seconds \\n&#39;);\r\n         }\r\n     \r\n         test(1000000000, 0);\r\n\r\nJava code: \r\n\r\n    import java.time.Duration;\r\n    import java.time.Instant;\r\n      \r\n    import java.util.ArrayList;\r\n    import java.io.*;\r\n    import java.util.concurrent.TimeUnit;\r\n    import java.util.concurrent.ThreadLocalRandom;\r\n    import javax.swing.*;\r\n      \r\n      \r\n      class Benchmark {\r\n     \r\n          public static void main(String args[]) {\r\n     \r\n              int max = 1000000000;\r\n              int index = 0;\r\n     \r\n              long start = System.currentTimeMillis();\r\n     \r\n              while(index &lt; max) {\r\n                  index++;\r\n              }\r\n     \r\n              long end = System.currentTimeMillis();\r\n              System.out.println(&quot;Elapsed Time in millseconds: &quot;+ (end-start));\r\n              System.out.println(&quot;index: &quot;+ index);\r\n     \r\n          }\r\n      }","title":"PHP Script Takes So Much Time More Than Expected","body":"<p>My PHP script takes 32 seconds, while doing the same thing using Java takes ~2 milliseconds and 200 milliseconds using golang.</p>\n<p>Why the PHP script takes so much time? I know PHP is an interpreted language and it executes much more instructions inside the interpreter than we saw, but this code is so simple, are there any other reasons there?</p>\n<p>env info:</p>\n<pre><code>php version: PHP 7.4.3-4ubuntu2.19 (cli), Zend Engine v3.4.0\nhardware: 15G RAM, 11th Gen Intel(R) Core(TM) i7-11800H @ 2.30GHz\nsoftware: ubuntu 20.04 LTS on Windows WSL2. \n</code></pre>\n<p>php Code:</p>\n<pre><code>&lt;?php\n \n     function test(int $max, int $start) {\n \n         $time_start = microtime(true);\n         while ($start &lt; $max) {\n             $start = $start+1;\n         }\n \n         $time_end = microtime(true);\n \n         //dividing with 60 will give the execution time in minutes otherwise seconds\n         $execution_time = ($time_end - $time_start);\n \n         //execution time of the script\n         print('Total Execution Time: '.$execution_time.' Seconds \\n');\n     }\n \n     test(1000000000, 0);\n</code></pre>\n<p>Java code:</p>\n<pre><code>import java.time.Duration;\nimport java.time.Instant;\n  \nimport java.util.ArrayList;\nimport java.io.*;\nimport java.util.concurrent.TimeUnit;\nimport java.util.concurrent.ThreadLocalRandom;\nimport javax.swing.*;\n  \n  \n  class Benchmark {\n \n      public static void main(String args[]) {\n \n          int max = 1000000000;\n          int index = 0;\n \n          long start = System.currentTimeMillis();\n \n          while(index &lt; max) {\n              index++;\n          }\n \n          long end = System.currentTimeMillis();\n          System.out.println(&quot;Elapsed Time in millseconds: &quot;+ (end-start));\n          System.out.println(&quot;index: &quot;+ index);\n \n      }\n  }\n</code></pre>\n"},{"tags":["java","arrays","json","size","jsonpath"],"answers":[{"tags":[],"owner":{"account_id":1770094,"reputation":13649,"user_id":1615086,"display_name":"andersschuller"},"down_vote_count":0,"up_vote_count":89,"is_accepted":true,"score":89,"last_activity_date":1462112463,"creation_date":1462112463,"answer_id":36967669,"question_id":36964936,"body_markdown":"It seems that support for returning the `length()` of an array was only [added in version 2.1.0](https://github.com/jayway/JsonPath/issues/88) of the jayway json-path library.\r\n\r\nBased on some quick tests, the `$.orders.length()` expression seems to work with both version 2.1.0 and version 2.2.0, so I think you just need to upgrade your dependency version in order to fix the error you are seeing.","title":"Array size using jsonpath expression - Stefan Goessner JsonPath","body":"<p>It seems that support for returning the <code>length()</code> of an array was only <a href=\"https://github.com/jayway/JsonPath/issues/88\" rel=\"noreferrer\">added in version 2.1.0</a> of the jayway json-path library.</p>\n\n<p>Based on some quick tests, the <code>$.orders.length()</code> expression seems to work with both version 2.1.0 and version 2.2.0, so I think you just need to upgrade your dependency version in order to fix the error you are seeing.</p>\n"},{"tags":[],"owner":{"account_id":10121869,"reputation":97,"user_id":7478527,"display_name":"Shibu"},"down_vote_count":7,"up_vote_count":2,"is_accepted":false,"score":-5,"last_activity_date":1691625332,"creation_date":1563013217,"answer_id":57018227,"question_id":36964936,"body_markdown":"The getList() method of JsonPath can be used effectively to convert the array into a list of objects that can then be used with .size()\r\n\r\n```\r\n // convert each item in the Json array to be an item of the orderItems list\r\nList orderItems = someResponse.jsonPath().getList(&quot;orders&quot;);\r\n\r\n// So now because we have the size of the list, we also have the size of the original array\r\nint orderCount = orderItems.size());\r\n```","title":"Array size using jsonpath expression - Stefan Goessner JsonPath","body":"<p>The getList() method of JsonPath can be used effectively to convert the array into a list of objects that can then be used with .size()</p>\n<pre><code> // convert each item in the Json array to be an item of the orderItems list\nList orderItems = someResponse.jsonPath().getList(&quot;orders&quot;);\n\n// So now because we have the size of the list, we also have the size of the original array\nint orderCount = orderItems.size());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23680739,"reputation":1,"user_id":17706317,"display_name":"Shekhar Sinha"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1639800427,"creation_date":1639800427,"answer_id":70400907,"question_id":36964936,"body_markdown":"                JsonPath js = new JsonPath(response);\r\n               List values = js.getList(&quot;Mention the path of the json here&quot;);\r\n               int size= values.size();\r\n               System.out.println(size);","title":"Array size using jsonpath expression - Stefan Goessner JsonPath","body":"<pre><code>            JsonPath js = new JsonPath(response);\n           List values = js.getList(&quot;Mention the path of the json here&quot;);\n           int size= values.size();\n           System.out.println(size);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2720893,"reputation":1730,"user_id":2347210,"accept_rate":67,"display_name":"Vladi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661158000,"creation_date":1661158000,"answer_id":73442389,"question_id":36964936,"body_markdown":"The way to count number of elements in json array \r\nthis is how i solve it \r\n\r\n`myJson` -&gt;My Json that inside it exist an array\r\n\r\n`fieldPath` -&gt; the path to the array \r\n\r\n\r\n\r\n    import com.jayway.jsonpath.JsonPath;\r\n    import org.json.JSONArray;\r\n    import org.json.simple.JSONObject;\r\n\r\n\tJSONObject myJson;\r\n\r\n    \tpublic long CountFields(String fieldPath) {\r\n          String onlyMyArray=JsonPath.parse(myJson).read(fieldPath).toString();\r\n\t\t  JSONArray jsonArray = new JSONArray(onlyMyArray);\r\n\t      return jsonArray.length();\r\n\t                       }\r\n\r\n","title":"Array size using jsonpath expression - Stefan Goessner JsonPath","body":"<p>The way to count number of elements in json array\nthis is how i solve it</p>\n<p><code>myJson</code> -&gt;My Json that inside it exist an array</p>\n<p><code>fieldPath</code> -&gt; the path to the array</p>\n<pre><code>import com.jayway.jsonpath.JsonPath;\nimport org.json.JSONArray;\nimport org.json.simple.JSONObject;\n\nJSONObject myJson;\n\n    public long CountFields(String fieldPath) {\n      String onlyMyArray=JsonPath.parse(myJson).read(fieldPath).toString();\n      JSONArray jsonArray = new JSONArray(onlyMyArray);\n      return jsonArray.length();\n                       }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2428271,"reputation":211,"user_id":2119761,"display_name":"bmck"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1667816745,"creation_date":1667816745,"answer_id":74345095,"question_id":36964936,"body_markdown":"with **webclient** in **spring webflux** \r\n\r\n    ....\r\n     .jsonPath(&quot;$.length()&quot;).isEqualTo(2);\r\n    ...","title":"Array size using jsonpath expression - Stefan Goessner JsonPath","body":"<p>with <strong>webclient</strong> in <strong>spring webflux</strong></p>\n<pre><code>....\n .jsonPath(&quot;$.length()&quot;).isEqualTo(2);\n...\n</code></pre>\n"}],"owner":{"account_id":2164481,"reputation":2245,"user_id":1917867,"accept_rate":62,"display_name":"Nagendra Varma"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":77481,"favorite_count":0,"down_vote_count":0,"up_vote_count":39,"accepted_answer_id":36967669,"answer_count":5,"score":39,"last_activity_date":1691625332,"creation_date":1462093588,"question_id":36964936,"body_markdown":"I&#39;m having a problem with finding an array or list size using Stefan Goessner&#39;s JsonPath. I&#39;m using the version json-path-2.0.0.\r\n\r\nMy jsonpath expression is `$.orders.length` and JSON looks something like this:\r\n\r\n&lt;!-- begin snippet: js hide: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    {\r\n      &quot;orders&quot; : [\r\n        ...\r\n      ]\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nIts failing with the following error:\r\n\r\n    com.jayway.jsonpath.PathNotFoundException: Property [&#39;length&#39;] not found in path $[&#39;orders&#39;]\r\n\r\nAnd I tried with `$.orders.length()` too which is again failing with the below error:\r\n\r\n`com.jayway.jsonpath.PathNotFoundException: Property [&#39;length()&#39;] not found in path $[&#39;orders&#39;]`\r\n\r\nPlease suggest me how to get the length of the array using Goessner&#39;s JsonPath expression.\r\n\r\n**[EDIT]** Following is how I&#39;m obtaining the configuration:\r\n\r\n        com.jayway.jsonpath.Configuration conf = com.jayway.jsonpath.Configuration.defaultConfiguration().addOptions(Option.DEFAULT_PATH_LEAF_TO_NULL);\r\n        DocumentContext documentContext = JsonPath.using(conf).parse(orderJson);\r\n        Object val = documentContext.read(jsonPathExpression);","title":"Array size using jsonpath expression - Stefan Goessner JsonPath","body":"<p>I'm having a problem with finding an array or list size using Stefan Goessner's JsonPath. I'm using the version json-path-2.0.0.</p>\n\n<p>My jsonpath expression is <code>$.orders.length</code> and JSON looks something like this:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>{\r\n  \"orders\" : [\r\n    ...\r\n  ]\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Its failing with the following error:</p>\n\n<pre><code>com.jayway.jsonpath.PathNotFoundException: Property ['length'] not found in path $['orders']\n</code></pre>\n\n<p>And I tried with <code>$.orders.length()</code> too which is again failing with the below error:</p>\n\n<p><code>com.jayway.jsonpath.PathNotFoundException: Property ['length()'] not found in path $['orders']</code></p>\n\n<p>Please suggest me how to get the length of the array using Goessner's JsonPath expression.</p>\n\n<p><strong>[EDIT]</strong> Following is how I'm obtaining the configuration:</p>\n\n<pre><code>    com.jayway.jsonpath.Configuration conf = com.jayway.jsonpath.Configuration.defaultConfiguration().addOptions(Option.DEFAULT_PATH_LEAF_TO_NULL);\n    DocumentContext documentContext = JsonPath.using(conf).parse(orderJson);\n    Object val = documentContext.read(jsonPathExpression);\n</code></pre>\n"},{"tags":["java","xml","groovy","soap","jaxb"],"owner":{"account_id":15908350,"reputation":35,"user_id":11478896,"display_name":"Henry Gunawan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691623440,"creation_date":1691623440,"question_id":76871818,"body_markdown":"i new in JAXB, i just want to know how to call @webResult inside @responseWrapper\r\n\r\nfor example i want get result response like this\r\n\r\n    &lt;soap:Envelope xmlns:soap=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&gt;\r\n          &lt;soap:Body&gt;\r\n            &lt;doReceivePushDataResponse&gt;\r\n              &lt;responsewrapper&gt;\r\n              &lt;webresult&gt;string&lt;/webresult&gt;\r\n             &lt;/responsewrapper&gt;\r\n            &lt;/doReceivePushDataResponse&gt;\r\n          &lt;/soap:Body&gt;\r\n        &lt;/soap:Envelope&gt;\r\n\r\nbut when i tried i got response like this\r\n\r\n    &lt;soap:Envelope xmlns:soap=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&gt;\r\n      &lt;soap:Body&gt;\r\n        &lt;doReceivePushDataResponse&gt;\r\n          &lt;iniresponsewrapper/&gt;\r\n          &lt;iniwebresult&gt;string&lt;/iniwebresult&gt;\r\n        &lt;/doReceivePushDataResponse&gt;\r\n      &lt;/soap:Body&gt;\r\n    &lt;/soap:Envelope&gt;\r\n\r\nas seen, the responsewrapper does not wrap the webresult, how do I get the response as needed?\r\n\r\ni use groovy to create that service, here&#39;s the code\r\n\r\n    @XmlAccessorType(XmlAccessType.FIELD)\r\n    @XmlRootElement()\r\n    class Input {\r\n        @XmlElement(name = &quot;memberCode&quot;, required = true, namespace = &quot;java:financial.sekuritas.pt.com.doReceivePushData&quot;)\r\n        String memberCode\r\n        @XmlElement(name = &quot;fileContents&quot;, required = true, namespace = &quot;java:financial.sekuritas.pt.com.doReceivePushData&quot;)\r\n        String fileContents\r\n        @XmlElement(name = &quot;crc32&quot;, required = true, namespace = &quot;java:financial.sekuritas.pt.com.doReceivePushData&quot;)\r\n        String crc32\r\n        @XmlElement(name = &quot;urlWS&quot;, required = true, namespace = &quot;java:financial.sekuritas.pt.com.doReceivePushData&quot;)\r\n        String urlWS\r\n    \r\n    }\r\n    \r\n    @Transactional\r\n    @GrailsCxfEndpoint(address = &quot;/doReceivePushData&quot;)\r\n    class ReportInvestorAccountCIMBService {\r\n        @Resource WebServiceContext context\r\n       /* @WebResult(header = true, name = &quot;iniwebresult&quot;)*/\r\n       @WebMethod\r\n       @RequestWrapper(localName=&quot;doReceivePushDataWrap&quot;)\r\n    \t@ResponseWrapper(localName=&quot;iniresponsewrapper&quot; , targetNamespace=&quot;&quot;)\r\n         @WebResult(header = true, name = &quot;iniwebresult&quot;)\r\n        public String doReceivePushData(@WebParam(name = &#39;input&#39;) \r\n    \t@XmlElement(name = &quot;input&quot;, required = true, namespace = &quot;http://financial.sekuritas.pt.com/&quot;) Input Input)\r\n    \r\n        {\r\n           return 1\r\n        }   \t\r\n    }\r\n\r\n\r\n","title":"@ResponseWrapper and @WebResult","body":"<p>i new in JAXB, i just want to know how to call @webResult inside @responseWrapper</p>\n<p>for example i want get result response like this</p>\n<pre><code>&lt;soap:Envelope xmlns:soap=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&gt;\n      &lt;soap:Body&gt;\n        &lt;doReceivePushDataResponse&gt;\n          &lt;responsewrapper&gt;\n          &lt;webresult&gt;string&lt;/webresult&gt;\n         &lt;/responsewrapper&gt;\n        &lt;/doReceivePushDataResponse&gt;\n      &lt;/soap:Body&gt;\n    &lt;/soap:Envelope&gt;\n</code></pre>\n<p>but when i tried i got response like this</p>\n<pre><code>&lt;soap:Envelope xmlns:soap=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&gt;\n  &lt;soap:Body&gt;\n    &lt;doReceivePushDataResponse&gt;\n      &lt;iniresponsewrapper/&gt;\n      &lt;iniwebresult&gt;string&lt;/iniwebresult&gt;\n    &lt;/doReceivePushDataResponse&gt;\n  &lt;/soap:Body&gt;\n&lt;/soap:Envelope&gt;\n</code></pre>\n<p>as seen, the responsewrapper does not wrap the webresult, how do I get the response as needed?</p>\n<p>i use groovy to create that service, here's the code</p>\n<pre><code>@XmlAccessorType(XmlAccessType.FIELD)\n@XmlRootElement()\nclass Input {\n    @XmlElement(name = &quot;memberCode&quot;, required = true, namespace = &quot;java:financial.sekuritas.pt.com.doReceivePushData&quot;)\n    String memberCode\n    @XmlElement(name = &quot;fileContents&quot;, required = true, namespace = &quot;java:financial.sekuritas.pt.com.doReceivePushData&quot;)\n    String fileContents\n    @XmlElement(name = &quot;crc32&quot;, required = true, namespace = &quot;java:financial.sekuritas.pt.com.doReceivePushData&quot;)\n    String crc32\n    @XmlElement(name = &quot;urlWS&quot;, required = true, namespace = &quot;java:financial.sekuritas.pt.com.doReceivePushData&quot;)\n    String urlWS\n\n}\n\n@Transactional\n@GrailsCxfEndpoint(address = &quot;/doReceivePushData&quot;)\nclass ReportInvestorAccountCIMBService {\n    @Resource WebServiceContext context\n   /* @WebResult(header = true, name = &quot;iniwebresult&quot;)*/\n   @WebMethod\n   @RequestWrapper(localName=&quot;doReceivePushDataWrap&quot;)\n    @ResponseWrapper(localName=&quot;iniresponsewrapper&quot; , targetNamespace=&quot;&quot;)\n     @WebResult(header = true, name = &quot;iniwebresult&quot;)\n    public String doReceivePushData(@WebParam(name = 'input') \n    @XmlElement(name = &quot;input&quot;, required = true, namespace = &quot;http://financial.sekuritas.pt.com/&quot;) Input Input)\n\n    {\n       return 1\n    }       \n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","ahead-of-time-compile"],"answers":[{"tags":[],"owner":{"account_id":19602191,"reputation":112,"user_id":14346734,"display_name":"Pablo Gutierrez"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1673977271,"creation_date":1673977271,"answer_id":75150229,"question_id":74442575,"body_markdown":"I think they have gone in a different direction because of [this video from Spring advocate][1]. Looks like AOT is only being used with GraalVM only. \r\n\r\nTo answer your question, you can only use AOT benefits with GraalVM. \r\n\r\n\r\n  [1]: https://www.youtube.com/watch?v=aUm5WZjh8RA&amp;t=1210s","title":"In Spring Boot 3 how to benefit from Spring AOT with a regular JVM application?","body":"<p>I think they have gone in a different direction because of <a href=\"https://www.youtube.com/watch?v=aUm5WZjh8RA&amp;t=1210s\" rel=\"nofollow noreferrer\">this video from Spring advocate</a>. Looks like AOT is only being used with GraalVM only.</p>\n<p>To answer your question, you can only use AOT benefits with GraalVM.</p>\n"},{"tags":[],"owner":{"account_id":2555978,"reputation":1482,"user_id":2217962,"display_name":"schrom"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1676291190,"creation_date":1676291190,"answer_id":75435868,"question_id":74442575,"body_markdown":"This document descibes [how to run AOT code on the JRE][1].\r\n\r\nEssentially, you have to build your jar like this\r\n\r\n`mvn clean compile spring-boot:process-aot package`\r\n\r\nand run it like this\r\n\r\n`java -DspringAot=true -jar your-application.jar`\r\n\r\n\r\n\r\n  [1]: https://github.com/spring-tips/spring-boot-3-aot#run-the-aot-code-on-the-jre","title":"In Spring Boot 3 how to benefit from Spring AOT with a regular JVM application?","body":"<p>This document descibes <a href=\"https://github.com/spring-tips/spring-boot-3-aot#run-the-aot-code-on-the-jre\" rel=\"nofollow noreferrer\">how to run AOT code on the JRE</a>.</p>\n<p>Essentially, you have to build your jar like this</p>\n<p><code>mvn clean compile spring-boot:process-aot package</code></p>\n<p>and run it like this</p>\n<p><code>java -DspringAot=true -jar your-application.jar</code></p>\n"},{"tags":[],"owner":{"account_id":3046141,"reputation":183,"user_id":2581736,"accept_rate":0,"display_name":"Lucas Borsatto"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691623170,"creation_date":1691622504,"answer_id":76871774,"question_id":74442575,"body_markdown":"Two useful ways you can use AOT with Spring Boot:\r\n\r\n**Using a docker image**\r\n------------------------\r\n\r\nBesides of having Java &gt;= 17 and Gradle &gt;= 7.3 installed, in your build.gradle you will add the following plugin:\r\n\r\n    id &#39;org.graalvm.buildtools.native&#39; version &#39;0.9.23&#39;\r\n\r\nAn initial build.gradle would look like this:\r\n\r\n    plugins {\r\n    id &#39;java&#39;\r\n        id &#39;org.springframework.boot&#39; version &#39;3.1.2&#39;\r\n        id &#39;io.spring.dependency-management&#39; version &#39;1.1.2&#39;\r\n        id &#39;org.graalvm.buildtools.native&#39; version &#39;0.9.23&#39;\r\n    }\r\n    \r\n    group = &#39;com.test&#39;\r\n    version = &#39;0.0.1-SNAPSHOT&#39;\r\n    \r\n    java {\r\n        sourceCompatibility = &#39;17&#39;\r\n    }\r\n    \r\n    repositories {\r\n        mavenCentral()\r\n    }\r\n    \r\n    dependencies {\r\n        implementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n        testImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;\r\n    }\r\n    \r\nThat&#39;s it. Now you can build your docker image running the follwing command:\r\n\r\n    gradle bootBuildImage\r\n\r\nNow you can run ```docker images``` to see the image you just created and running it:\r\n\r\n    docker run --rm &lt;image_id&gt;\r\n\r\n**Compiling it to run as a native app**\r\n---------------------------------------\r\n\r\nIn this case, you should apply the same plugin shown in the example above. Besides, you will have to have GraalVM &gt;= 17 and Gradle &gt;= 7.3 installed. Then, you can run the follwoing command to build it:\r\n\r\n    gradle nativeCompile\r\n\r\nand to run your application, you can just run:\r\n\r\n    /&lt;app_name&gt;/build/native/nativeCompile/&lt;app_name&gt;\r\n\r\nAnd that&#39;all. It&#39;s important to mention that some Spring features may not work properly due to Closed World assumption, which can make reflection harder to implement.\r\n\r\n \r\n\r\n\r\n","title":"In Spring Boot 3 how to benefit from Spring AOT with a regular JVM application?","body":"<p>Two useful ways you can use AOT with Spring Boot:</p>\n<h2><strong>Using a docker image</strong></h2>\n<p>Besides of having Java &gt;= 17 and Gradle &gt;= 7.3 installed, in your build.gradle you will add the following plugin:</p>\n<pre><code>id 'org.graalvm.buildtools.native' version '0.9.23'\n</code></pre>\n<p>An initial build.gradle would look like this:</p>\n<pre><code>plugins {\nid 'java'\n    id 'org.springframework.boot' version '3.1.2'\n    id 'io.spring.dependency-management' version '1.1.2'\n    id 'org.graalvm.buildtools.native' version '0.9.23'\n}\n\ngroup = 'com.test'\nversion = '0.0.1-SNAPSHOT'\n\njava {\n    sourceCompatibility = '17'\n}\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n    testImplementation 'org.springframework.boot:spring-boot-starter-test'\n}\n</code></pre>\n<p>That's it. Now you can build your docker image running the follwing command:</p>\n<pre><code>gradle bootBuildImage\n</code></pre>\n<p>Now you can run <code>docker images</code> to see the image you just created and running it:</p>\n<pre><code>docker run --rm &lt;image_id&gt;\n</code></pre>\n<h2><strong>Compiling it to run as a native app</strong></h2>\n<p>In this case, you should apply the same plugin shown in the example above. Besides, you will have to have GraalVM &gt;= 17 and Gradle &gt;= 7.3 installed. Then, you can run the follwoing command to build it:</p>\n<pre><code>gradle nativeCompile\n</code></pre>\n<p>and to run your application, you can just run:</p>\n<pre><code>/&lt;app_name&gt;/build/native/nativeCompile/&lt;app_name&gt;\n</code></pre>\n<p>And that'all. It's important to mention that some Spring features may not work properly due to Closed World assumption, which can make reflection harder to implement.</p>\n"}],"owner":{"account_id":3682527,"reputation":8791,"user_id":3067148,"accept_rate":74,"display_name":"Harold L. Brown"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1988,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"answer_count":3,"score":11,"last_activity_date":1691623170,"creation_date":1668500955,"question_id":74442575,"body_markdown":"Spring Boot 3 will release in November 2022. [The release candidate 2 has already been released.][1]\r\n\r\n[Spring Boot 3 will ship with Spring AOT.][2] Spring AOT generates additional source code so that reflection calls will be avoided.\r\n\r\nSpring AOT was introduced to generate [GraalVM Native Images][3]. However, in theory Spring AOT could also be used for regular JVM applications to speed up the start-up process (since regular calls should be faster than reflection calls).\r\n\r\nUnfortunately, I didn&#39;t find anything about how to use Spring AOT for regular JVM applications in the [Spring Boot 3 reference documentation][4]. Do you know how I can profit from Spring AOT in a regular JVM application?\r\n\r\n\r\n  [1]: https://spring.io/blog/2022/11/10/spring-boot-3-0-0-rc2-available-now\r\n  [2]: https://spring.io/blog/2022/03/22/initial-aot-support-in-spring-framework-6-0-0-m3\r\n  [3]: https://www.graalvm.org/22.3/reference-manual/native-image/\r\n  [4]: https://docs.spring.io/spring-boot/docs/3.0.0-RC2/reference/html/native-image.html#native-image.introducing-graalvm-native-images.understanding-aot-processing","title":"In Spring Boot 3 how to benefit from Spring AOT with a regular JVM application?","body":"<p>Spring Boot 3 will release in November 2022. <a href=\"https://spring.io/blog/2022/11/10/spring-boot-3-0-0-rc2-available-now\" rel=\"noreferrer\">The release candidate 2 has already been released.</a></p>\n<p><a href=\"https://spring.io/blog/2022/03/22/initial-aot-support-in-spring-framework-6-0-0-m3\" rel=\"noreferrer\">Spring Boot 3 will ship with Spring AOT.</a> Spring AOT generates additional source code so that reflection calls will be avoided.</p>\n<p>Spring AOT was introduced to generate <a href=\"https://www.graalvm.org/22.3/reference-manual/native-image/\" rel=\"noreferrer\">GraalVM Native Images</a>. However, in theory Spring AOT could also be used for regular JVM applications to speed up the start-up process (since regular calls should be faster than reflection calls).</p>\n<p>Unfortunately, I didn't find anything about how to use Spring AOT for regular JVM applications in the <a href=\"https://docs.spring.io/spring-boot/docs/3.0.0-RC2/reference/html/native-image.html#native-image.introducing-graalvm-native-images.understanding-aot-processing\" rel=\"noreferrer\">Spring Boot 3 reference documentation</a>. Do you know how I can profit from Spring AOT in a regular JVM application?</p>\n"},{"tags":["java","spring","spring-webflux","reactive-programming","project-reactor"],"comments":[{"owner":{"account_id":477214,"reputation":5260,"user_id":888580,"display_name":"lane.maxwell"},"score":0,"creation_date":1691612034,"post_id":76869993,"comment_id":135516619,"body_markdown":"What you&#39;re trying to accomplish is not a very good idea.  It is possible, though you&#39;re going to have to make several adjustments to your logic.  But think about this, what happens when the first request comes in with a single order, but the subsequent 9 orders don&#39;t come in for another 10 minutes?  Is the first caller expected to wait for 10 minutes to get a response?","body":"What you&#39;re trying to accomplish is not a very good idea.  It is possible, though you&#39;re going to have to make several adjustments to your logic.  But think about this, what happens when the first request comes in with a single order, but the subsequent 9 orders don&#39;t come in for another 10 minutes?  Is the first caller expected to wait for 10 minutes to get a response?"},{"owner":{"account_id":18026911,"reputation":531,"user_id":13102609,"display_name":"orderlyfashion"},"score":0,"creation_date":1691654274,"post_id":76869993,"comment_id":135521404,"body_markdown":"@lane.maxwell Thanks for your concern! Like I said, my API receives plenty of requests, so it&#39;s not really an issue. Nonetheless, `Igor Artamonov` managed to provide a solution that solves my original problem and your concern in one. :)","body":"@lane.maxwell Thanks for your concern! Like I said, my API receives plenty of requests, so it&#39;s not really an issue. Nonetheless, <code>Igor Artamonov</code> managed to provide a solution that solves my original problem and your concern in one. :)"},{"owner":{"account_id":8023174,"reputation":9194,"user_id":6051176,"display_name":"Martin Tarj&#225;nyi"},"score":1,"creation_date":1691826733,"post_id":76869993,"comment_id":135546515,"body_markdown":"This pattern is called request collapsing. I&#39;m aware of an open source library which implemented this with Reactor, you might take some inspiration from there: https://github.com/ExpediaGroup/molten/blob/master/molten-core/readme.md#request-collapsing","body":"This pattern is called request collapsing. I&#39;m aware of an open source library which implemented this with Reactor, you might take some inspiration from there: <a href=\"https://github.com/ExpediaGroup/molten/blob/master/molten-core/readme.md#request-collapsing\" rel=\"nofollow noreferrer\">github.com/ExpediaGroup/molten/blob/master/molten-core/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":2510058,"reputation":455,"user_id":2182753,"accept_rate":70,"display_name":"Josema"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691614824,"creation_date":1691614824,"answer_id":76871241,"question_id":76869993,"body_markdown":"I would try to use [countDownLatch][1], this allow you to trigger an action once you get to the count for all the threads that are using your service.\r\n\r\n```\r\n@Component\r\npublic class OrderService {\r\n\r\n    private static final String QUEUE_UP_COUNT = 10;\r\n    private final WebClient webClient;\r\n    private CountDownLatch countDownLatch = new CountDownLatch(QUEUE_UP_COUNT );\r\n\r\n    public OrderService(WebClient webClient) {\r\n        this.webClient = webClient;\r\n    }\r\n\r\n    public Mono&lt;List&lt;Order&gt;&gt; getOrders(List&lt;String&gt; orderNumbers)  {\r\n        countDownLatch.countDown();\r\n        countDownLatch.wait();\r\n        List&lt;Order&gt; orders = webClient\r\n            .get()\r\n            .uri(builder -&gt; builder.queryParam(&quot;orderNumbers&quot;, String.join(&quot;,&quot;, orderNumbers)).build())\r\n            .retrieve()\r\n            .bodyToFlux(Order.class)\r\n            .collectList();\r\n       // Here you need to create a new the countDownLatch since it doesn&#39;t allow to restart\r\n       countDownLatch = new CountDownLatch(QUEUE_UP_COUNT );\r\n    }\r\n}\r\n```\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CountDownLatch.html","title":"Queuing up requests in Spring WebFlux","body":"<p>I would try to use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CountDownLatch.html\" rel=\"nofollow noreferrer\">countDownLatch</a>, this allow you to trigger an action once you get to the count for all the threads that are using your service.</p>\n<pre><code>@Component\npublic class OrderService {\n\n    private static final String QUEUE_UP_COUNT = 10;\n    private final WebClient webClient;\n    private CountDownLatch countDownLatch = new CountDownLatch(QUEUE_UP_COUNT );\n\n    public OrderService(WebClient webClient) {\n        this.webClient = webClient;\n    }\n\n    public Mono&lt;List&lt;Order&gt;&gt; getOrders(List&lt;String&gt; orderNumbers)  {\n        countDownLatch.countDown();\n        countDownLatch.wait();\n        List&lt;Order&gt; orders = webClient\n            .get()\n            .uri(builder -&gt; builder.queryParam(&quot;orderNumbers&quot;, String.join(&quot;,&quot;, orderNumbers)).build())\n            .retrieve()\n            .bodyToFlux(Order.class)\n            .collectList();\n       // Here you need to create a new the countDownLatch since it doesn't allow to restart\n       countDownLatch = new CountDownLatch(QUEUE_UP_COUNT );\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":78088,"reputation":35600,"user_id":222467,"accept_rate":67,"display_name":"Igor Artamonov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691622949,"creation_date":1691622949,"answer_id":76871799,"question_id":76869993,"body_markdown":"It can be something like the following:\r\n\r\nFirst, create a queue for the incoming requests:\r\n\r\n    private Sinks.Many&lt;Tuples2(String, Sinks.One&lt;Order&gt;)&gt; queue = Sinks.many().unicast().onBackpressureBuffer()\r\n\r\nAnd have the following method to accept requests:\r\n\r\n    public Mono&lt;List&lt;Order&gt;&gt; getOrders(List&lt;String&gt; orderNumbers)  {\r\n        return Flux.fromIterable(orderNumbers)\r\n            .flatMapSequential(::getOrder)\r\n            .collectList();\r\n    }\r\n\r\n    public Mono&lt;Order&gt; getOrder(String number) {\r\n        Sinks.One&lt;Order&gt; callback = Sinks.one(); \r\n        // TODO handle FAIL_NON_SERIALIZED here by doing a park-retry\r\n        queue.tryEmitValue(Tuples.of(number, callback));\r\n        return callback.asMono();\r\n    }\r\n\r\nRun this for processing\r\n\r\n    public void run() {\r\n       queue\r\n          .bufferTimeout(10, Duration.ofMilliseconds(100))   \r\n          .flatMap( list -&gt; {\r\n              List numbers = list.stream().map(Tuples::getT1).collect(Collectors.toList());\r\n              request(numbers)\r\n                .doOnNext(orders -&gt; {\r\n                    for(int i = 0; i &lt; orders.size(); i++) {\r\n                       list.get(i).getT2().tryEmitValue(orders[i]);\r\n                    }\r\n                })\r\n                .then()\r\n          })\r\n          .subscribe()\r\n    }\r\n\r\n    public Mono&lt;List&lt;Order&gt;&gt; request(List&lt;String&gt; orderNumbers)  {\r\n        return webClient\r\n            .get()\r\n            .uri(builder -&gt; builder.queryParam(&quot;orderNumbers&quot;, String.join(&quot;,&quot;, orderNumbers)).build())\r\n            .retrieve()\r\n            .bodyToFlux(Order.class)\r\n            .collectList();\r\n    }","title":"Queuing up requests in Spring WebFlux","body":"<p>It can be something like the following:</p>\n<p>First, create a queue for the incoming requests:</p>\n<pre><code>private Sinks.Many&lt;Tuples2(String, Sinks.One&lt;Order&gt;)&gt; queue = Sinks.many().unicast().onBackpressureBuffer()\n</code></pre>\n<p>And have the following method to accept requests:</p>\n<pre><code>public Mono&lt;List&lt;Order&gt;&gt; getOrders(List&lt;String&gt; orderNumbers)  {\n    return Flux.fromIterable(orderNumbers)\n        .flatMapSequential(::getOrder)\n        .collectList();\n}\n\npublic Mono&lt;Order&gt; getOrder(String number) {\n    Sinks.One&lt;Order&gt; callback = Sinks.one(); \n    // TODO handle FAIL_NON_SERIALIZED here by doing a park-retry\n    queue.tryEmitValue(Tuples.of(number, callback));\n    return callback.asMono();\n}\n</code></pre>\n<p>Run this for processing</p>\n<pre><code>public void run() {\n   queue\n      .bufferTimeout(10, Duration.ofMilliseconds(100))   \n      .flatMap( list -&gt; {\n          List numbers = list.stream().map(Tuples::getT1).collect(Collectors.toList());\n          request(numbers)\n            .doOnNext(orders -&gt; {\n                for(int i = 0; i &lt; orders.size(); i++) {\n                   list.get(i).getT2().tryEmitValue(orders[i]);\n                }\n            })\n            .then()\n      })\n      .subscribe()\n}\n\npublic Mono&lt;List&lt;Order&gt;&gt; request(List&lt;String&gt; orderNumbers)  {\n    return webClient\n        .get()\n        .uri(builder -&gt; builder.queryParam(&quot;orderNumbers&quot;, String.join(&quot;,&quot;, orderNumbers)).build())\n        .retrieve()\n        .bodyToFlux(Order.class)\n        .collectList();\n}\n</code></pre>\n"}],"owner":{"account_id":18026911,"reputation":531,"user_id":13102609,"display_name":"orderlyfashion"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":291,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76871799,"answer_count":2,"score":2,"last_activity_date":1691622949,"creation_date":1691601509,"question_id":76869993,"body_markdown":"In my API I have a service that calls an external API. This external API has a cost per request. Hence I would like to queue up the requests to the external API.\r\n\r\nThis is how it looks today:\r\n\r\n```java\r\n@Component\r\npublic class OrderService {\r\n\r\n    private final WebClient webClient;\r\n\r\n    public OrderService(WebClient webClient) {\r\n        this.webClient = webClient;\r\n    }\r\n\r\n    public Mono&lt;List&lt;Order&gt;&gt; getOrders(List&lt;String&gt; orderNumbers)  {\r\n        return webClient\r\n            .get()\r\n            .uri(builder -&gt; builder.queryParam(&quot;orderNumbers&quot;, String.join(&quot;,&quot;, orderNumbers)).build())\r\n            .retrieve()\r\n            .bodyToFlux(Order.class)\r\n            .collectList();\r\n    }\r\n}\r\n```\r\n\r\nWhat I would like is to somehow queue up 10 order numbers, and after reaching 10 order numbers in the queue, send the bulk request, and then return the response to all the original requesters.\r\n\r\nLet&#39;s say `OrderService::getOrders` is called three times, first with 4 order numbers, then with 4 additional order numbers, and lastly 4 order numbers again. The first two requests would queue up the total 8 order numbers without calling the external API. Once the third request arrives, we have 12 order numbers in the queue. At this point we will send a request with the first 10 order numbers. The last two remains queued since the maximum order numbers the external API allows is 10.\r\n\r\nMy API sees a lot of traffic, so it&#39;s not an issue to queue and wait, they will not have to wait a long time until the queue has 10 items.\r\n\r\nI have tried to read up on how to achieve this with Spring WebFlux, and my research has pointed me to [Sinks][1] and [Processor][2]. However, I have a hard time wrapping my head around how it all ties together. For instance how I can keep track of which requests requested the specific order numbers.\r\n\r\nCould someone more knowledgeable please help me out with how to achieve this?\r\n\r\n\r\n  [1]: https://projectreactor.io/docs/core/release/api/reactor/core/publisher/Sinks.html\r\n  [2]: https://projectreactor.io/docs/core/release/api/reactor/core/publisher/FluxProcessor.html","title":"Queuing up requests in Spring WebFlux","body":"<p>In my API I have a service that calls an external API. This external API has a cost per request. Hence I would like to queue up the requests to the external API.</p>\n<p>This is how it looks today:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class OrderService {\n\n    private final WebClient webClient;\n\n    public OrderService(WebClient webClient) {\n        this.webClient = webClient;\n    }\n\n    public Mono&lt;List&lt;Order&gt;&gt; getOrders(List&lt;String&gt; orderNumbers)  {\n        return webClient\n            .get()\n            .uri(builder -&gt; builder.queryParam(&quot;orderNumbers&quot;, String.join(&quot;,&quot;, orderNumbers)).build())\n            .retrieve()\n            .bodyToFlux(Order.class)\n            .collectList();\n    }\n}\n</code></pre>\n<p>What I would like is to somehow queue up 10 order numbers, and after reaching 10 order numbers in the queue, send the bulk request, and then return the response to all the original requesters.</p>\n<p>Let's say <code>OrderService::getOrders</code> is called three times, first with 4 order numbers, then with 4 additional order numbers, and lastly 4 order numbers again. The first two requests would queue up the total 8 order numbers without calling the external API. Once the third request arrives, we have 12 order numbers in the queue. At this point we will send a request with the first 10 order numbers. The last two remains queued since the maximum order numbers the external API allows is 10.</p>\n<p>My API sees a lot of traffic, so it's not an issue to queue and wait, they will not have to wait a long time until the queue has 10 items.</p>\n<p>I have tried to read up on how to achieve this with Spring WebFlux, and my research has pointed me to <a href=\"https://projectreactor.io/docs/core/release/api/reactor/core/publisher/Sinks.html\" rel=\"nofollow noreferrer\">Sinks</a> and <a href=\"https://projectreactor.io/docs/core/release/api/reactor/core/publisher/FluxProcessor.html\" rel=\"nofollow noreferrer\">Processor</a>. However, I have a hard time wrapping my head around how it all ties together. For instance how I can keep track of which requests requested the specific order numbers.</p>\n<p>Could someone more knowledgeable please help me out with how to achieve this?</p>\n"},{"tags":["java","spring-boot","sqlite","spring-data-jpa","spring-data"],"comments":[{"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1691157968,"post_id":76836550,"comment_id":135458069,"body_markdown":"just have a look [spring-data-jpa](https://www.baeldung.com/the-persistence-layer-with-spring-data-jpa), in my opinion you dont need to do so kind of manipulation, spring boot  provide auto-configurable dataSource connect","body":"just have a look <a href=\"https://www.baeldung.com/the-persistence-layer-with-spring-data-jpa\" rel=\"nofollow noreferrer\">spring-data-jpa</a>, in my opinion you dont need to do so kind of manipulation, spring boot  provide auto-configurable dataSource connect"},{"owner":{"account_id":448169,"reputation":5643,"user_id":842225,"accept_rate":49,"display_name":"user842225"},"score":0,"creation_date":1691159424,"post_id":76836550,"comment_id":135458427,"body_markdown":"I am dealing with SQLite database, which is a bit special to my understanding, that is why I do this manipulation. Or, do you think even with SQLite database, I don&#39;t need to do this?","body":"I am dealing with SQLite database, which is a bit special to my understanding, that is why I do this manipulation. Or, do you think even with SQLite database, I don&#39;t need to do this?"},{"owner":{"account_id":102924,"reputation":130,"user_id":275979,"display_name":"ovgu12"},"score":0,"creation_date":1691159922,"post_id":76836550,"comment_id":135458567,"body_markdown":"https://www.baeldung.com/spring-boot-sqlite may be it could help you","body":"<a href=\"https://www.baeldung.com/spring-boot-sqlite\" rel=\"nofollow noreferrer\">baeldung.com/spring-boot-sqlite</a> may be it could help you"},{"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1691160062,"post_id":76836550,"comment_id":135458603,"body_markdown":"yes, just do it in a normal flow","body":"yes, just do it in a normal flow"},{"owner":{"account_id":448169,"reputation":5643,"user_id":842225,"accept_rate":49,"display_name":"user842225"},"score":0,"creation_date":1691160443,"post_id":76836550,"comment_id":135458698,"body_markdown":"The link @ovgu12 sent in his/her comment is also using the same way as I am using to manually create the datasource bean, so, I don&#39;t see how that helps my problem of binding properties.","body":"The link @ovgu12 sent in his/her comment is also using the same way as I am using to manually create the datasource bean, so, I don&#39;t see how that helps my problem of binding properties."},{"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1691161311,"post_id":76836550,"comment_id":135458903,"body_markdown":"[check it](https://fullstackdeveloper.guru/2020/05/01/how-to-integrate-sqlite-database-with-spring-boot/comment-page-1/#comments)","body":"<a href=\"https://fullstackdeveloper.guru/2020/05/01/how-to-integrate-sqlite-database-with-spring-boot/comment-page-1/#comments\" rel=\"nofollow noreferrer\">check it</a>"}],"answers":[{"tags":[],"owner":{"account_id":29073167,"reputation":1013,"user_id":22270964,"display_name":"Maksim Eliseev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691333917,"creation_date":1691332846,"answer_id":76846389,"question_id":76836550,"body_markdown":"The usual way for configuration properties is to keep them in the separate class and activate them using `@EnableConfigurationProperties`. You can read this [article][1]. And you can try something as follows:\r\n\r\n    @Configuration\r\n    @EnableConfigurationProperties(MyConfigurationProperties.class)\r\n    public class DBConfig {\r\n\r\n        @Autowired\r\n        private MyConfigurationProperties props;\r\n    \r\n        @Bean\r\n        public DataSource dataSource() {\r\n            final DriverManagerDataSource dataSource = new DriverManagerDataSource();\r\n            dataSource.setDriverClassName(props.getDriverClassName());\r\n            // ...\r\n            return dataSource;\r\n        }\r\n    }\r\n\r\nAnd your properties class will look like this:\r\n\r\n    @ConfigurationProperties(prefix = &quot;spring.datasource&quot;)\r\n    public class MyConfigurationProperties {\r\n        \r\n        private String driverClassName;\r\n\r\n        // getters ans setters are here\r\n    }\r\n\r\nBut I&#39;m not sure if this is the best solution, because Spring already has its own configuration properties class that binds to the prefix `spring.datasource`. \r\n\r\nAnd the second option for you is to use the Spring configuration properties:\r\n\r\n    import org.springframework.boot.autoconfigure.jdbc.DataSourceProperties;\r\n    // ...\r\n\r\n    @Configuration\r\n    @EnableConfigurationProperties(DataSourceProperties.class)\r\n    public class DBConfig {\r\n\r\n        @Autowired\r\n        private DataSourceProperties props;\r\n    \r\n        @Bean\r\n        public DataSource dataSource() {\r\n            final DriverManagerDataSource dataSource = new DriverManagerDataSource();\r\n            dataSource.setDriverClassName(props.getDriverClassName());\r\n            // ...\r\n            return dataSource;\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://www.baeldung.com/configuration-properties-in-spring-boot","title":"Bind properties in application.yml not working","body":"<p>The usual way for configuration properties is to keep them in the separate class and activate them using <code>@EnableConfigurationProperties</code>. You can read this <a href=\"https://www.baeldung.com/configuration-properties-in-spring-boot\" rel=\"nofollow noreferrer\">article</a>. And you can try something as follows:</p>\n<pre><code>@Configuration\n@EnableConfigurationProperties(MyConfigurationProperties.class)\npublic class DBConfig {\n\n    @Autowired\n    private MyConfigurationProperties props;\n\n    @Bean\n    public DataSource dataSource() {\n        final DriverManagerDataSource dataSource = new DriverManagerDataSource();\n        dataSource.setDriverClassName(props.getDriverClassName());\n        // ...\n        return dataSource;\n    }\n}\n</code></pre>\n<p>And your properties class will look like this:</p>\n<pre><code>@ConfigurationProperties(prefix = &quot;spring.datasource&quot;)\npublic class MyConfigurationProperties {\n    \n    private String driverClassName;\n\n    // getters ans setters are here\n}\n</code></pre>\n<p>But I'm not sure if this is the best solution, because Spring already has its own configuration properties class that binds to the prefix <code>spring.datasource</code>.</p>\n<p>And the second option for you is to use the Spring configuration properties:</p>\n<pre><code>import org.springframework.boot.autoconfigure.jdbc.DataSourceProperties;\n// ...\n\n@Configuration\n@EnableConfigurationProperties(DataSourceProperties.class)\npublic class DBConfig {\n\n    @Autowired\n    private DataSourceProperties props;\n\n    @Bean\n    public DataSource dataSource() {\n        final DriverManagerDataSource dataSource = new DriverManagerDataSource();\n        dataSource.setDriverClassName(props.getDriverClassName());\n        // ...\n        return dataSource;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5300710,"reputation":269,"user_id":4230445,"display_name":"rahulP"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691513653,"creation_date":1691513653,"answer_id":76861682,"question_id":76836550,"body_markdown":"You only need to add setters for feilds in your `DBConfig` class and it will work.","title":"Bind properties in application.yml not working","body":"<p>You only need to add setters for feilds in your <code>DBConfig</code> class and it will work.</p>\n"}],"owner":{"account_id":448169,"reputation":5643,"user_id":842225,"accept_rate":49,"display_name":"user842225"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":162,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":76846389,"answer_count":2,"score":-1,"last_activity_date":1691621374,"creation_date":1691156877,"question_id":76836550,"body_markdown":"In my SpringBoot project I have application.yml file in src/main/resources/:\r\n\r\n```\r\nserver:\r\n  port: 8080\r\n\r\nspring:\r\n  datasource:\r\n    driver-class-name: org.sqlite.JDBC\r\n    ...\r\n```\r\n\r\nI want to bind the properties defined above to a Java class:\r\n\r\n```\r\n@Configuration\r\n@ConfigurationProperties(prefix = &quot;spring.datasource&quot;)\r\npublic class DBConfig {\r\n\r\n    // I wished spring-boot could automatically bind it with &#39;driver-class-name&#39; in application.yml\r\n    private String driverClassName;\r\n    ...\r\n\r\n    @Bean\r\n    public DataSource dataSource() {\r\n        final DriverManagerDataSource dataSource = new DriverManagerDataSource();\r\n        dataSource.setDriverClassName(driverClassName);\r\n        ...\r\n        return dataSource;\r\n    }\r\n}\r\n```\r\n\r\nI have the annotation `@Configuration` and `@ConfigurationProperties(prefix = &quot;spring.datasource&quot;)`. I also have specified the correct prefix. But when I run my application I get an error:\r\n\r\n&gt; Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;dataSource&#39; defined in class path resource [com/my/webapp/config/DBConfig.class]: Failed to instantiate [javax.sql.DataSource]: Factory method &#39;dataSource&#39; threw exception with message: Property &#39;driverClassName&#39; must not be empty\r\n\r\nThe error tells `driverClassName` is an empty string, so the binding doesn&#39;t work. What am I missing? I am using an SQLite database which is not as well supported as MySQL, MariaDB, etc. in SpringBoot. So I provide a datasource bean class to bind database configurations in application.yml to the manually created bean class. Is it unnecessary?","title":"Bind properties in application.yml not working","body":"<p>In my SpringBoot project I have application.yml file in src/main/resources/:</p>\n<pre><code>server:\n  port: 8080\n\nspring:\n  datasource:\n    driver-class-name: org.sqlite.JDBC\n    ...\n</code></pre>\n<p>I want to bind the properties defined above to a Java class:</p>\n<pre><code>@Configuration\n@ConfigurationProperties(prefix = &quot;spring.datasource&quot;)\npublic class DBConfig {\n\n    // I wished spring-boot could automatically bind it with 'driver-class-name' in application.yml\n    private String driverClassName;\n    ...\n\n    @Bean\n    public DataSource dataSource() {\n        final DriverManagerDataSource dataSource = new DriverManagerDataSource();\n        dataSource.setDriverClassName(driverClassName);\n        ...\n        return dataSource;\n    }\n}\n</code></pre>\n<p>I have the annotation <code>@Configuration</code> and <code>@ConfigurationProperties(prefix = &quot;spring.datasource&quot;)</code>. I also have specified the correct prefix. But when I run my application I get an error:</p>\n<blockquote>\n<p>Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [com/my/webapp/config/DBConfig.class]: Failed to instantiate [javax.sql.DataSource]: Factory method 'dataSource' threw exception with message: Property 'driverClassName' must not be empty</p>\n</blockquote>\n<p>The error tells <code>driverClassName</code> is an empty string, so the binding doesn't work. What am I missing? I am using an SQLite database which is not as well supported as MySQL, MariaDB, etc. in SpringBoot. So I provide a datasource bean class to bind database configurations in application.yml to the manually created bean class. Is it unnecessary?</p>\n"},{"tags":["java","spring-boot","authentication","spring-security","jwt"],"comments":[{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":1,"creation_date":1689440453,"post_id":76694592,"comment_id":135215272,"body_markdown":"read how spring boot handles errors https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#web.servlet.spring-mvc.error-handling then read your logs  `Securing GET /error?role=PLUS` your request is failing, so spring redirects you to `/error` and you havn&#39;t cleared the error endpoint s&#229; you get an access denied. Also, using JWTs as sessions is very insecure, there is a reason as to why spring does not supply a JWT-as-session filter. Your application is vulnerable to Cross-site-scripting attacks, DDoS attacks and you cant logout the user. Using JWTs as sessions is very insecue","body":"read how spring boot handles errors <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#web.servlet.spring-mvc.error-handling\" rel=\"nofollow noreferrer\">docs.spring.io/spring-boot/docs/current/reference/htmlsingle&zwnj;&#8203;/&hellip;</a> then read your logs  <code>Securing GET &#47;error?role=PLUS</code> your request is failing, so spring redirects you to <code>&#47;error</code> and you havn&#39;t cleared the error endpoint s&#229; you get an access denied. Also, using JWTs as sessions is very insecure, there is a reason as to why spring does not supply a JWT-as-session filter. Your application is vulnerable to Cross-site-scripting attacks, DDoS attacks and you cant logout the user. Using JWTs as sessions is very insecue"},{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1689440494,"post_id":76694592,"comment_id":135215275,"body_markdown":"whatever tutorial you are following is giving you bad advice, and this is why you should not build custom security solutions.","body":"whatever tutorial you are following is giving you bad advice, and this is why you should not build custom security solutions."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1689487835,"post_id":76694592,"comment_id":135218702,"body_markdown":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example).","body":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}],"answers":[{"tags":[],"owner":{"account_id":29023752,"reputation":41,"user_id":22232487,"display_name":"Kok0ro"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1691621233,"creation_date":1691621233,"answer_id":76871711,"question_id":76694592,"body_markdown":"    @Configuration\r\n    @EnableWebSecurity\r\n    @EnableMethodSecurity\r\n    public class SecurityConfiguration {\r\n    \r\n        @Bean\r\n        SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n            return http\r\n                    .authorizeHttpRequests(auth -&gt; {\r\n                        auth.requestMatchers(&quot;/api/client/createUser&quot;).permitAll();\r\n                        auth.requestMatchers(&quot;/api/client/home&quot;).permitAll();\r\n                        auth.anyRequest().authenticated();\r\n                    })\r\n                    .csrf(csrf -&gt; {\r\n                        csrf.ignoringRequestMatchers(&quot;/api/client/createUser&quot;, &quot;/api/client/home&quot;);\r\n                    })\r\n                    .oauth2Login(withDefaults())\r\n                    .formLogin(withDefaults())\r\n                    .build();\r\n        }\r\n    \r\n    }\r\n\r\nFirstly I had a v&quot;i&quot; instead of a v1 in the controller so I would never get the request passed, and then it was a matter of CSRF config.\r\n\r\n**CSRF Token Generation:** Spring Security enables CSRF protection by default. Even if an endpoint is configured with permitAll(), CSRF protection might still be applied. To properly exclude an endpoint from CSRF protection, you might need to explicitly disable it for that endpoint. You can do this by chaining .and().csrf().disable() for the specific endpoint configuration.\r\n\r\n**SOLVED: By adding the disabling CSRF config to the securityConfig and by fixing my endpoints url.**","title":"403 Forbbiden: Pre-authenticated entry point called. Rejecting access","body":"<pre><code>@Configuration\n@EnableWebSecurity\n@EnableMethodSecurity\npublic class SecurityConfiguration {\n\n    @Bean\n    SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n        return http\n                .authorizeHttpRequests(auth -&gt; {\n                    auth.requestMatchers(&quot;/api/client/createUser&quot;).permitAll();\n                    auth.requestMatchers(&quot;/api/client/home&quot;).permitAll();\n                    auth.anyRequest().authenticated();\n                })\n                .csrf(csrf -&gt; {\n                    csrf.ignoringRequestMatchers(&quot;/api/client/createUser&quot;, &quot;/api/client/home&quot;);\n                })\n                .oauth2Login(withDefaults())\n                .formLogin(withDefaults())\n                .build();\n    }\n\n}\n</code></pre>\n<p>Firstly I had a v&quot;i&quot; instead of a v1 in the controller so I would never get the request passed, and then it was a matter of CSRF config.</p>\n<p><strong>CSRF Token Generation:</strong> Spring Security enables CSRF protection by default. Even if an endpoint is configured with permitAll(), CSRF protection might still be applied. To properly exclude an endpoint from CSRF protection, you might need to explicitly disable it for that endpoint. You can do this by chaining .and().csrf().disable() for the specific endpoint configuration.</p>\n<p><strong>SOLVED: By adding the disabling CSRF config to the securityConfig and by fixing my endpoints url.</strong></p>\n"}],"owner":{"account_id":29023752,"reputation":41,"user_id":22232487,"display_name":"Kok0ro"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3222,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76871711,"answer_count":1,"score":2,"last_activity_date":1691621233,"creation_date":1689436442,"question_id":76694592,"body_markdown":"My controller:\r\n```\r\n@RestController\r\n@RequestMapping(&quot;/api/vi/client&quot;)\r\n@RequiredArgsConstructor\r\npublic class FHubClientController {\r\n\r\n    private final FHubService fHubService;\r\n    @GetMapping(&quot;/findAllUsersByRole&quot;)\r\n    public List&lt;User&gt; findAllUsersByRole(@RequestParam(&quot;role&quot;) String role) {\r\n        System.out.println(&quot;sdfasgf&quot;);\r\n\r\n        return fHubService.findAllUsersByRole(role.toUpperCase());\r\n    }\r\n}\r\n```\r\n\r\nMy SecurityConfiguration:\r\n```\r\npackage com.org.fhub.config;\r\n\r\nimport lombok.RequiredArgsConstructor;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.security.authentication.AuthenticationProvider;\r\nimport org.springframework.security.config.annotation.method.configuration.EnableMethodSecurity;\r\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\nimport org.springframework.security.config.annotation.web.configurers.AbstractHttpConfigurer;\r\nimport org.springframework.security.config.http.SessionCreationPolicy;\r\nimport org.springframework.security.core.context.SecurityContextHolder;\r\nimport org.springframework.security.web.SecurityFilterChain;\r\nimport org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;\r\nimport org.springframework.security.web.authentication.logout.LogoutHandler;\r\n\r\nimport static com.org.fhub.domain.user.Permission.*;\r\nimport static com.org.fhub.domain.user.UserRoleEnum.ADMIN;\r\nimport static com.org.fhub.domain.user.UserRoleEnum.STAFF;\r\nimport static org.springframework.http.HttpMethod.*;\r\n\r\n@Configuration\r\n@EnableWebSecurity\r\n@RequiredArgsConstructor\r\n@EnableMethodSecurity\r\npublic class SecurityConfiguration {\r\n\r\n    private final JwtAuthenticationFilter jwtAuthFilter;\r\n    private final AuthenticationProvider authenticationProvider;\r\n    private final LogoutHandler logoutHandler;\r\n\r\n    @Bean\r\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n        http\r\n                .csrf(AbstractHttpConfigurer::disable)\r\n                .authorizeHttpRequests((authorize) -&gt; {\r\n                    authorize.requestMatchers(\r\n                            &quot;/api/v1/auth/**&quot;,\r\n                            &quot;/v2/api-docs&quot;,\r\n                            &quot;/v3/api-docs&quot;,\r\n                            &quot;/v3/api-docs/**&quot;,\r\n                            &quot;/swagger-resources&quot;,\r\n                            &quot;/swagger-resources/**&quot;,\r\n                            &quot;/configuration/ui&quot;,\r\n                            &quot;/configuration/security&quot;,\r\n                            &quot;/swagger-ui/**&quot;,\r\n                            &quot;/webjars/**&quot;,\r\n                            &quot;/swagger-ui.html&quot;\r\n                    ).permitAll();\r\n                    authorize.requestMatchers(&quot;/api/v1/staff/**&quot;).hasAnyRole(ADMIN.name(), STAFF.name());\r\n                    authorize.requestMatchers(GET, &quot;/api/v1/staff/**&quot;).hasAnyAuthority(ADMIN_READ.name(), STAFF_READ.name());\r\n                    authorize.requestMatchers(POST, &quot;/api/v1/staff/**&quot;).hasAnyAuthority(ADMIN_CREATE.name(), STAFF_CREATE.name());\r\n                    authorize.requestMatchers(PUT, &quot;/api/v1/staff/**&quot;).hasAnyAuthority(ADMIN_UPDATE.name(), STAFF_UPDATE.name());\r\n                    authorize.requestMatchers(DELETE, &quot;/api/v1/staff/**&quot;).hasAnyAuthority(ADMIN_DELETE.name(), STAFF_DELETE.name());\r\n                    authorize.anyRequest().authenticated();\r\n                })\r\n\r\n                /* .requestMatchers(&quot;/api/v1/admin/**&quot;).hasRole(ADMIN.name())\r\n\r\n                 .requestMatchers(GET, &quot;/api/v1/admin/**&quot;).hasAuthority(ADMIN_READ.name())\r\n                 .requestMatchers(POST, &quot;/api/v1/admin/**&quot;).hasAuthority(ADMIN_CREATE.name())\r\n                 .requestMatchers(PUT, &quot;/api/v1/admin/**&quot;).hasAuthority(ADMIN_UPDATE.name())\r\n                 .requestMatchers(DELETE, &quot;/api/v1/admin/**&quot;).hasAuthority(ADMIN_DELETE.name())*/\r\n\r\n                .sessionManagement((session) -&gt; session\r\n                        .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n                )\r\n                .authenticationProvider(authenticationProvider)\r\n                .addFilterBefore(jwtAuthFilter, UsernamePasswordAuthenticationFilter.class)\r\n                .logout((logout) -&gt; logout.logoutUrl(&quot;/api/v1/auth/logout&quot;).addLogoutHandler(logoutHandler).logoutSuccessHandler((request, response, authentication) -&gt; SecurityContextHolder.clearContext()))\r\n        ;\r\n\r\n        return http.build();\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\nMy Filter:\r\n```\r\npackage com.org.fhub.config;\r\n\r\nimport com.org.fhub.domain.token.TokenRepository;\r\nimport jakarta.servlet.FilterChain;\r\nimport jakarta.servlet.ServletException;\r\nimport jakarta.servlet.http.HttpServletRequest;\r\nimport jakarta.servlet.http.HttpServletResponse;\r\nimport lombok.RequiredArgsConstructor;\r\nimport org.springframework.lang.NonNull;\r\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\r\nimport org.springframework.security.core.context.SecurityContextHolder;\r\nimport org.springframework.security.core.userdetails.UserDetails;\r\nimport org.springframework.security.core.userdetails.UserDetailsService;\r\nimport org.springframework.security.web.authentication.WebAuthenticationDetailsSource;\r\nimport org.springframework.stereotype.Component;\r\nimport org.springframework.web.filter.OncePerRequestFilter;\r\n\r\nimport java.io.IOException;\r\n\r\n@RequiredArgsConstructor\r\n@Component\r\npublic class JwtAuthenticationFilter extends OncePerRequestFilter {\r\n\r\n    private final JwtService jwtService;\r\n    private final UserDetailsService userDetailsService;\r\n    private final TokenRepository tokenRepository;\r\n\r\n    @Override\r\n    protected void doFilterInternal(\r\n            @NonNull HttpServletRequest request,\r\n            @NonNull HttpServletResponse response,\r\n            @NonNull FilterChain filterChain\r\n    ) throws ServletException, IOException {\r\n        if (request.getServletPath().contains(&quot;/api/v1/auth&quot;)) {\r\n            filterChain.doFilter(request, response);\r\n            return;\r\n        }\r\n        final String authHeader = request.getHeader(&quot;Authorization&quot;);\r\n        final String jwt;\r\n        final String username;\r\n        if (authHeader == null ||!authHeader.startsWith(&quot;Bearer &quot;)) {\r\n            filterChain.doFilter(request, response);\r\n            return;\r\n        }\r\n        jwt = authHeader.substring(7);\r\n        username = jwtService.extractUsername(jwt);\r\n        if (username != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null) {\r\n            UserDetails userDetails = this.userDetailsService.loadUserByUsername(username);\r\n            var isTokenValid = tokenRepository.findByToken(jwt)\r\n                    .map(t -&gt; !t.isExpired() &amp;&amp; !t.isRevoked())\r\n                    .orElse(false);\r\n            if (jwtService.isTokenValid(jwt, userDetails) &amp;&amp; isTokenValid) {\r\n                UsernamePasswordAuthenticationToken authToken = new UsernamePasswordAuthenticationToken(\r\n                        userDetails,\r\n                        null,\r\n                        userDetails.getAuthorities()\r\n                );\r\n                authToken.setDetails(\r\n                        new WebAuthenticationDetailsSource().buildDetails(request)\r\n                );\r\n                SecurityContextHolder.getContext().setAuthentication(authToken);\r\n            }\r\n        }\r\n        filterChain.doFilter(request, response);\r\n    }\r\n}\r\n```\r\n\r\nMy AplicationConfig:\r\n\r\n```\r\npackage com.org.fhub.config;\r\n\r\nimport com.org.fhub.domain.user.UserRepository;\r\nimport lombok.RequiredArgsConstructor;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.security.authentication.AuthenticationManager;\r\nimport org.springframework.security.authentication.AuthenticationProvider;\r\nimport org.springframework.security.authentication.dao.DaoAuthenticationProvider;\r\nimport org.springframework.security.config.annotation.authentication.configuration.AuthenticationConfiguration;\r\nimport org.springframework.security.core.userdetails.UserDetailsService;\r\nimport org.springframework.security.core.userdetails.UsernameNotFoundException;\r\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\r\nimport org.springframework.security.crypto.password.PasswordEncoder;\r\n\r\n@Configuration\r\n@RequiredArgsConstructor\r\npublic class ApplicationConfig {\r\n\r\n    private final UserRepository repository;\r\n\r\n    @Bean\r\n    public UserDetailsService userDetailsService() {\r\n        return username -&gt; repository.findUserByUserName(username)\r\n                .orElseThrow(() -&gt; new UsernameNotFoundException(&quot;User not found&quot;));\r\n    }\r\n\r\n    @Bean\r\n    public AuthenticationProvider authenticationProvider() {\r\n        DaoAuthenticationProvider authProvider = new DaoAuthenticationProvider();\r\n        authProvider.setUserDetailsService(userDetailsService());\r\n        authProvider.setPasswordEncoder(passwordEncoder());\r\n        return authProvider;\r\n    }\r\n\r\n    @Bean\r\n    public AuthenticationManager authenticationManager(AuthenticationConfiguration config) throws Exception {\r\n        return config.getAuthenticationManager();\r\n    }\r\n\r\n    @Bean\r\n    public PasswordEncoder passwordEncoder() {\r\n        return new BCryptPasswordEncoder();\r\n    }\r\n\r\n}\r\n```\r\nMy jwtService:\r\n\r\n```\r\npackage com.org.fhub.config;\r\n\r\nimport io.jsonwebtoken.Claims;\r\nimport io.jsonwebtoken.Jwts;\r\nimport io.jsonwebtoken.SignatureAlgorithm;\r\nimport io.jsonwebtoken.io.Decoders;\r\nimport io.jsonwebtoken.security.Keys;\r\nimport java.security.Key;\r\nimport java.util.Date;\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\nimport java.util.function.Function;\r\n\r\nimport org.springframework.beans.factory.annotation.Value;\r\nimport org.springframework.security.core.userdetails.UserDetails;\r\nimport org.springframework.stereotype.Service;\r\n\r\n@Service\r\npublic class JwtService {\r\n\r\n    @Value(&quot;${application.security.jwt.secret-key}&quot;)\r\n    private String secretKey;\r\n    @Value(&quot;${application.security.jwt.expiration}&quot;)\r\n    private long jwtExpiration;\r\n    @Value(&quot;${application.security.jwt.refresh-token.expiration}&quot;)\r\n    private long refreshExpiration;\r\n\r\n    public String extractUsername(String token) {\r\n        return extractClaim(token, Claims::getSubject);\r\n    }\r\n\r\n    public &lt;T&gt; T extractClaim(String token, Function&lt;Claims, T&gt; claimsResolver) {\r\n        final Claims claims = extractAllClaims(token);\r\n        return claimsResolver.apply(claims);\r\n    }\r\n\r\n    public String generateToken(UserDetails userDetails) {\r\n        return generateToken(new HashMap&lt;&gt;(), userDetails);\r\n    }\r\n\r\n    public String generateToken(\r\n            Map&lt;String, Object&gt; extraClaims,\r\n            UserDetails userDetails\r\n    ) {\r\n        return buildToken(extraClaims, userDetails, jwtExpiration);\r\n    }\r\n\r\n    public String generateRefreshToken(\r\n            UserDetails userDetails\r\n    ) {\r\n        return buildToken(new HashMap&lt;&gt;(), userDetails, refreshExpiration);\r\n    }\r\n\r\n    private String buildToken(\r\n            Map&lt;String, Object&gt; extraClaims,\r\n            UserDetails userDetails,\r\n            long expiration\r\n    ) {\r\n        return Jwts\r\n                .builder()\r\n                .setClaims(extraClaims)\r\n                .setSubject(userDetails.getUsername())\r\n                .setIssuedAt(new Date(System.currentTimeMillis()))\r\n                .setExpiration(new Date(System.currentTimeMillis() + expiration))\r\n                .signWith(getSignInKey(), SignatureAlgorithm.HS256)\r\n                .compact();\r\n    }\r\n\r\n    public boolean isTokenValid(String token, UserDetails userDetails) {\r\n        final String username = extractUsername(token);\r\n        return (username.equals(userDetails.getUsername())) &amp;&amp; !isTokenExpired(token);\r\n    }\r\n\r\n    private boolean isTokenExpired(String token) {\r\n        return extractExpiration(token).before(new Date());\r\n    }\r\n\r\n    private Date extractExpiration(String token) {\r\n        return extractClaim(token, Claims::getExpiration);\r\n    }\r\n\r\n    private Claims extractAllClaims(String token) {\r\n        return Jwts\r\n                .parserBuilder()\r\n                .setSigningKey(getSignInKey())\r\n                .build()\r\n                .parseClaimsJws(token)\r\n                .getBody();\r\n    }\r\n\r\n    private Key getSignInKey() {\r\n        byte[] keyBytes = Decoders.BASE64.decode(secretKey);\r\n        return Keys.hmacShaKeyFor(keyBytes);\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\nThe token is valid and it says **authenticated=true** \r\n\r\nthe log produced:\r\n\r\n```\r\n2023-07-15T16:58:39.175+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@359e27d2, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@277bc3a5, org.springframework.security.web.context.SecurityContextHolderFilter@4ffa7041, org.springframework.security.web.header.HeaderWriterFilter@71fb8301, org.springframework.security.web.authentication.logout.LogoutFilter@749d7c01, com.org.fhub.config.JwtAuthenticationFilter@7cc2c551, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@56b05bd7, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3e4afd10, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@214fba74, org.springframework.security.web.session.SessionManagementFilter@485c84d7, org.springframework.security.web.access.ExceptionTranslationFilter@5c4714ef, org.springframework.security.web.access.intercept.AuthorizationFilter@7e1d8d41]] (1/1)\r\n2023-07-15T16:58:39.177+01:00 DEBUG 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/v1/client/findAllUsersByRole?role=PLUS\r\n2023-07-15T16:58:39.177+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/12)\r\n2023-07-15T16:58:39.178+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/12)\r\n2023-07-15T16:58:39.181+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/12)\r\n2023-07-15T16:58:39.182+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/12)\r\n2023-07-15T16:58:39.183+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/12)\r\n2023-07-15T16:58:39.183+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern=&#39;/api/v1/auth/logout&#39;, GET], Ant [pattern=&#39;/api/v1/auth/logout&#39;, POST], Ant [pattern=&#39;/api/v1/auth/logout&#39;, PUT], Ant [pattern=&#39;/api/v1/auth/logout&#39;, DELETE]]\r\n2023-07-15T16:58:39.183+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking JwtAuthenticationFilter (6/12)\r\n2023-07-15T16:58:43.728+01:00 TRACE 21592 --- [0.1-8080-exec-1] .s.s.w.c.SupplierDeferredSecurityContext : Created SecurityContextImpl [Null authentication]\r\n2023-07-15T16:58:45.906+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/12)\r\n2023-07-15T16:58:45.906+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/12)\r\n2023-07-15T16:58:45.908+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/12)\r\n2023-07-15T16:58:45.908+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (10/12)\r\n2023-07-15T16:58:45.909+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated UsernamePasswordAuthenticationToken [Principal=User(id=64b2afc9b0ab605e709f61b6, username=kokoro, name=Brito, password=$2a$10$2PN0M.nH.tUa6sqXX/RaAOIS8kcH4FZUGEO9AzD6Dat/98gW7BF4S, notes=notas, role=PLUS, tokens=null), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_PLUS]]\r\n2023-07-15T16:58:45.909+01:00 TRACE 21592 --- [0.1-8080-exec-1] s.CompositeSessionAuthenticationStrategy : Preparing session with ChangeSessionIdAuthenticationStrategy (1/1)\r\n2023-07-15T16:58:45.909+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (11/12)\r\n2023-07-15T16:58:45.909+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (12/12)\r\n2023-07-15T16:58:45.910+01:00 TRACE 21592 --- [0.1-8080-exec-1] estMatcherDelegatingAuthorizationManager : Authorizing SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@1e14ac53]\r\n2023-07-15T16:58:45.923+01:00 TRACE 21592 --- [0.1-8080-exec-1] estMatcherDelegatingAuthorizationManager : Checking authorization on SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@1e14ac53] using org.springframework.security.authorization.AuthenticatedAuthorizationManager@2918d923\r\n2023-07-15T16:58:45.924+01:00 DEBUG 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/v1/client/findAllUsersByRole?role=PLUS\r\n2023-07-15T16:58:45.937+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]\r\n2023-07-15T16:58:45.940+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@359e27d2, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@277bc3a5, org.springframework.security.web.context.SecurityContextHolderFilter@4ffa7041, org.springframework.security.web.header.HeaderWriterFilter@71fb8301, org.springframework.security.web.authentication.logout.LogoutFilter@749d7c01, com.org.fhub.config.JwtAuthenticationFilter@7cc2c551, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@56b05bd7, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3e4afd10, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@214fba74, org.springframework.security.web.session.SessionManagementFilter@485c84d7, org.springframework.security.web.access.ExceptionTranslationFilter@5c4714ef, org.springframework.security.web.access.intercept.AuthorizationFilter@7e1d8d41]] (1/1)\r\n2023-07-15T16:58:45.940+01:00 DEBUG 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /error?role=PLUS\r\n2023-07-15T16:58:45.940+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/12)\r\n2023-07-15T16:58:45.940+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/12)\r\n2023-07-15T16:58:45.940+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/12)\r\n2023-07-15T16:58:45.940+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/12)\r\n2023-07-15T16:58:45.940+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/12)\r\n2023-07-15T16:58:45.941+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern=&#39;/api/v1/auth/logout&#39;, GET], Ant [pattern=&#39;/api/v1/auth/logout&#39;, POST], Ant [pattern=&#39;/api/v1/auth/logout&#39;, PUT], Ant [pattern=&#39;/api/v1/auth/logout&#39;, DELETE]]\r\n2023-07-15T16:58:45.941+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking JwtAuthenticationFilter (6/12)\r\n2023-07-15T16:58:45.941+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/12)\r\n2023-07-15T16:58:45.941+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/12)\r\n2023-07-15T16:58:45.941+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/12)\r\n2023-07-15T16:58:45.941+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (10/12)\r\n2023-07-15T16:58:45.941+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (11/12)\r\n2023-07-15T16:58:45.941+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (12/12)\r\n2023-07-15T16:58:45.941+01:00 TRACE 21592 --- [0.1-8080-exec-1] estMatcherDelegatingAuthorizationManager : Authorizing SecurityContextHolderAwareRequestWrapper[ FirewalledRequest[ org.apache.catalina.core.ApplicationHttpRequest@4a6fe6ad]]\r\n2023-07-15T16:58:45.945+01:00 TRACE 21592 --- [0.1-8080-exec-1] estMatcherDelegatingAuthorizationManager : Checking authorization on SecurityContextHolderAwareRequestWrapper[ FirewalledRequest[ org.apache.catalina.core.ApplicationHttpRequest@4a6fe6ad]] using org.springframework.security.authorization.AuthenticatedAuthorizationManager@2918d923\r\n2023-07-15T16:58:45.945+01:00 TRACE 21592 --- [0.1-8080-exec-1] .s.s.w.c.SupplierDeferredSecurityContext : Created SecurityContextImpl [Null authentication]\r\n2023-07-15T16:58:45.946+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_ANONYMOUS]]\r\n2023-07-15T16:58:45.946+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.s.w.a.ExceptionTranslationFilter     : Sending AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_ANONYMOUS]] to authentication entry point since access is denied\r\n\r\norg.springframework.security.access.AccessDeniedException: Access Denied\r\n\tat org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:98) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\r\n2023-07-15T16:58:45.951+01:00 DEBUG 21592 --- [0.1-8080-exec-1] o.s.s.w.a.Http403ForbiddenEntryPoint     : Pre-authenticated entry point called. Rejecting access\r\n\r\n```\r\n\r\nMy build.gradle:\r\n\r\n```\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-data-mongodb&#39;\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-security:3.1.1&#39;\r\n```\r\n\r\n\r\n\r\nIm sending the Bearer correctly and validated it with the DB.\r\nAll other endpoints/controllers with authorities work fine, register, delete etc... this one doesnt even go in the controller.\r\n\r\nI expect this endpoint to be allowed to execute.","title":"403 Forbbiden: Pre-authenticated entry point called. Rejecting access","body":"<p>My controller:</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/api/vi/client&quot;)\n@RequiredArgsConstructor\npublic class FHubClientController {\n\n    private final FHubService fHubService;\n    @GetMapping(&quot;/findAllUsersByRole&quot;)\n    public List&lt;User&gt; findAllUsersByRole(@RequestParam(&quot;role&quot;) String role) {\n        System.out.println(&quot;sdfasgf&quot;);\n\n        return fHubService.findAllUsersByRole(role.toUpperCase());\n    }\n}\n</code></pre>\n<p>My SecurityConfiguration:</p>\n<pre><code>package com.org.fhub.config;\n\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.authentication.AuthenticationProvider;\nimport org.springframework.security.config.annotation.method.configuration.EnableMethodSecurity;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.config.annotation.web.configurers.AbstractHttpConfigurer;\nimport org.springframework.security.config.http.SessionCreationPolicy;\nimport org.springframework.security.core.context.SecurityContextHolder;\nimport org.springframework.security.web.SecurityFilterChain;\nimport org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;\nimport org.springframework.security.web.authentication.logout.LogoutHandler;\n\nimport static com.org.fhub.domain.user.Permission.*;\nimport static com.org.fhub.domain.user.UserRoleEnum.ADMIN;\nimport static com.org.fhub.domain.user.UserRoleEnum.STAFF;\nimport static org.springframework.http.HttpMethod.*;\n\n@Configuration\n@EnableWebSecurity\n@RequiredArgsConstructor\n@EnableMethodSecurity\npublic class SecurityConfiguration {\n\n    private final JwtAuthenticationFilter jwtAuthFilter;\n    private final AuthenticationProvider authenticationProvider;\n    private final LogoutHandler logoutHandler;\n\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n        http\n                .csrf(AbstractHttpConfigurer::disable)\n                .authorizeHttpRequests((authorize) -&gt; {\n                    authorize.requestMatchers(\n                            &quot;/api/v1/auth/**&quot;,\n                            &quot;/v2/api-docs&quot;,\n                            &quot;/v3/api-docs&quot;,\n                            &quot;/v3/api-docs/**&quot;,\n                            &quot;/swagger-resources&quot;,\n                            &quot;/swagger-resources/**&quot;,\n                            &quot;/configuration/ui&quot;,\n                            &quot;/configuration/security&quot;,\n                            &quot;/swagger-ui/**&quot;,\n                            &quot;/webjars/**&quot;,\n                            &quot;/swagger-ui.html&quot;\n                    ).permitAll();\n                    authorize.requestMatchers(&quot;/api/v1/staff/**&quot;).hasAnyRole(ADMIN.name(), STAFF.name());\n                    authorize.requestMatchers(GET, &quot;/api/v1/staff/**&quot;).hasAnyAuthority(ADMIN_READ.name(), STAFF_READ.name());\n                    authorize.requestMatchers(POST, &quot;/api/v1/staff/**&quot;).hasAnyAuthority(ADMIN_CREATE.name(), STAFF_CREATE.name());\n                    authorize.requestMatchers(PUT, &quot;/api/v1/staff/**&quot;).hasAnyAuthority(ADMIN_UPDATE.name(), STAFF_UPDATE.name());\n                    authorize.requestMatchers(DELETE, &quot;/api/v1/staff/**&quot;).hasAnyAuthority(ADMIN_DELETE.name(), STAFF_DELETE.name());\n                    authorize.anyRequest().authenticated();\n                })\n\n                /* .requestMatchers(&quot;/api/v1/admin/**&quot;).hasRole(ADMIN.name())\n\n                 .requestMatchers(GET, &quot;/api/v1/admin/**&quot;).hasAuthority(ADMIN_READ.name())\n                 .requestMatchers(POST, &quot;/api/v1/admin/**&quot;).hasAuthority(ADMIN_CREATE.name())\n                 .requestMatchers(PUT, &quot;/api/v1/admin/**&quot;).hasAuthority(ADMIN_UPDATE.name())\n                 .requestMatchers(DELETE, &quot;/api/v1/admin/**&quot;).hasAuthority(ADMIN_DELETE.name())*/\n\n                .sessionManagement((session) -&gt; session\n                        .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n                )\n                .authenticationProvider(authenticationProvider)\n                .addFilterBefore(jwtAuthFilter, UsernamePasswordAuthenticationFilter.class)\n                .logout((logout) -&gt; logout.logoutUrl(&quot;/api/v1/auth/logout&quot;).addLogoutHandler(logoutHandler).logoutSuccessHandler((request, response, authentication) -&gt; SecurityContextHolder.clearContext()))\n        ;\n\n        return http.build();\n    }\n}\n\n</code></pre>\n<p>My Filter:</p>\n<pre><code>package com.org.fhub.config;\n\nimport com.org.fhub.domain.token.TokenRepository;\nimport jakarta.servlet.FilterChain;\nimport jakarta.servlet.ServletException;\nimport jakarta.servlet.http.HttpServletRequest;\nimport jakarta.servlet.http.HttpServletResponse;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.lang.NonNull;\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\nimport org.springframework.security.core.context.SecurityContextHolder;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.security.core.userdetails.UserDetailsService;\nimport org.springframework.security.web.authentication.WebAuthenticationDetailsSource;\nimport org.springframework.stereotype.Component;\nimport org.springframework.web.filter.OncePerRequestFilter;\n\nimport java.io.IOException;\n\n@RequiredArgsConstructor\n@Component\npublic class JwtAuthenticationFilter extends OncePerRequestFilter {\n\n    private final JwtService jwtService;\n    private final UserDetailsService userDetailsService;\n    private final TokenRepository tokenRepository;\n\n    @Override\n    protected void doFilterInternal(\n            @NonNull HttpServletRequest request,\n            @NonNull HttpServletResponse response,\n            @NonNull FilterChain filterChain\n    ) throws ServletException, IOException {\n        if (request.getServletPath().contains(&quot;/api/v1/auth&quot;)) {\n            filterChain.doFilter(request, response);\n            return;\n        }\n        final String authHeader = request.getHeader(&quot;Authorization&quot;);\n        final String jwt;\n        final String username;\n        if (authHeader == null ||!authHeader.startsWith(&quot;Bearer &quot;)) {\n            filterChain.doFilter(request, response);\n            return;\n        }\n        jwt = authHeader.substring(7);\n        username = jwtService.extractUsername(jwt);\n        if (username != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null) {\n            UserDetails userDetails = this.userDetailsService.loadUserByUsername(username);\n            var isTokenValid = tokenRepository.findByToken(jwt)\n                    .map(t -&gt; !t.isExpired() &amp;&amp; !t.isRevoked())\n                    .orElse(false);\n            if (jwtService.isTokenValid(jwt, userDetails) &amp;&amp; isTokenValid) {\n                UsernamePasswordAuthenticationToken authToken = new UsernamePasswordAuthenticationToken(\n                        userDetails,\n                        null,\n                        userDetails.getAuthorities()\n                );\n                authToken.setDetails(\n                        new WebAuthenticationDetailsSource().buildDetails(request)\n                );\n                SecurityContextHolder.getContext().setAuthentication(authToken);\n            }\n        }\n        filterChain.doFilter(request, response);\n    }\n}\n</code></pre>\n<p>My AplicationConfig:</p>\n<pre><code>package com.org.fhub.config;\n\nimport com.org.fhub.domain.user.UserRepository;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.authentication.AuthenticationManager;\nimport org.springframework.security.authentication.AuthenticationProvider;\nimport org.springframework.security.authentication.dao.DaoAuthenticationProvider;\nimport org.springframework.security.config.annotation.authentication.configuration.AuthenticationConfiguration;\nimport org.springframework.security.core.userdetails.UserDetailsService;\nimport org.springframework.security.core.userdetails.UsernameNotFoundException;\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\nimport org.springframework.security.crypto.password.PasswordEncoder;\n\n@Configuration\n@RequiredArgsConstructor\npublic class ApplicationConfig {\n\n    private final UserRepository repository;\n\n    @Bean\n    public UserDetailsService userDetailsService() {\n        return username -&gt; repository.findUserByUserName(username)\n                .orElseThrow(() -&gt; new UsernameNotFoundException(&quot;User not found&quot;));\n    }\n\n    @Bean\n    public AuthenticationProvider authenticationProvider() {\n        DaoAuthenticationProvider authProvider = new DaoAuthenticationProvider();\n        authProvider.setUserDetailsService(userDetailsService());\n        authProvider.setPasswordEncoder(passwordEncoder());\n        return authProvider;\n    }\n\n    @Bean\n    public AuthenticationManager authenticationManager(AuthenticationConfiguration config) throws Exception {\n        return config.getAuthenticationManager();\n    }\n\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n\n}\n</code></pre>\n<p>My jwtService:</p>\n<pre><code>package com.org.fhub.config;\n\nimport io.jsonwebtoken.Claims;\nimport io.jsonwebtoken.Jwts;\nimport io.jsonwebtoken.SignatureAlgorithm;\nimport io.jsonwebtoken.io.Decoders;\nimport io.jsonwebtoken.security.Keys;\nimport java.security.Key;\nimport java.util.Date;\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.function.Function;\n\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.stereotype.Service;\n\n@Service\npublic class JwtService {\n\n    @Value(&quot;${application.security.jwt.secret-key}&quot;)\n    private String secretKey;\n    @Value(&quot;${application.security.jwt.expiration}&quot;)\n    private long jwtExpiration;\n    @Value(&quot;${application.security.jwt.refresh-token.expiration}&quot;)\n    private long refreshExpiration;\n\n    public String extractUsername(String token) {\n        return extractClaim(token, Claims::getSubject);\n    }\n\n    public &lt;T&gt; T extractClaim(String token, Function&lt;Claims, T&gt; claimsResolver) {\n        final Claims claims = extractAllClaims(token);\n        return claimsResolver.apply(claims);\n    }\n\n    public String generateToken(UserDetails userDetails) {\n        return generateToken(new HashMap&lt;&gt;(), userDetails);\n    }\n\n    public String generateToken(\n            Map&lt;String, Object&gt; extraClaims,\n            UserDetails userDetails\n    ) {\n        return buildToken(extraClaims, userDetails, jwtExpiration);\n    }\n\n    public String generateRefreshToken(\n            UserDetails userDetails\n    ) {\n        return buildToken(new HashMap&lt;&gt;(), userDetails, refreshExpiration);\n    }\n\n    private String buildToken(\n            Map&lt;String, Object&gt; extraClaims,\n            UserDetails userDetails,\n            long expiration\n    ) {\n        return Jwts\n                .builder()\n                .setClaims(extraClaims)\n                .setSubject(userDetails.getUsername())\n                .setIssuedAt(new Date(System.currentTimeMillis()))\n                .setExpiration(new Date(System.currentTimeMillis() + expiration))\n                .signWith(getSignInKey(), SignatureAlgorithm.HS256)\n                .compact();\n    }\n\n    public boolean isTokenValid(String token, UserDetails userDetails) {\n        final String username = extractUsername(token);\n        return (username.equals(userDetails.getUsername())) &amp;&amp; !isTokenExpired(token);\n    }\n\n    private boolean isTokenExpired(String token) {\n        return extractExpiration(token).before(new Date());\n    }\n\n    private Date extractExpiration(String token) {\n        return extractClaim(token, Claims::getExpiration);\n    }\n\n    private Claims extractAllClaims(String token) {\n        return Jwts\n                .parserBuilder()\n                .setSigningKey(getSignInKey())\n                .build()\n                .parseClaimsJws(token)\n                .getBody();\n    }\n\n    private Key getSignInKey() {\n        byte[] keyBytes = Decoders.BASE64.decode(secretKey);\n        return Keys.hmacShaKeyFor(keyBytes);\n    }\n}\n\n</code></pre>\n<p>The token is valid and it says <strong>authenticated=true</strong></p>\n<p>the log produced:</p>\n<pre><code>2023-07-15T16:58:39.175+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@359e27d2, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@277bc3a5, org.springframework.security.web.context.SecurityContextHolderFilter@4ffa7041, org.springframework.security.web.header.HeaderWriterFilter@71fb8301, org.springframework.security.web.authentication.logout.LogoutFilter@749d7c01, com.org.fhub.config.JwtAuthenticationFilter@7cc2c551, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@56b05bd7, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3e4afd10, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@214fba74, org.springframework.security.web.session.SessionManagementFilter@485c84d7, org.springframework.security.web.access.ExceptionTranslationFilter@5c4714ef, org.springframework.security.web.access.intercept.AuthorizationFilter@7e1d8d41]] (1/1)\n2023-07-15T16:58:39.177+01:00 DEBUG 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/v1/client/findAllUsersByRole?role=PLUS\n2023-07-15T16:58:39.177+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/12)\n2023-07-15T16:58:39.178+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/12)\n2023-07-15T16:58:39.181+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/12)\n2023-07-15T16:58:39.182+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/12)\n2023-07-15T16:58:39.183+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/12)\n2023-07-15T16:58:39.183+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/api/v1/auth/logout', GET], Ant [pattern='/api/v1/auth/logout', POST], Ant [pattern='/api/v1/auth/logout', PUT], Ant [pattern='/api/v1/auth/logout', DELETE]]\n2023-07-15T16:58:39.183+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking JwtAuthenticationFilter (6/12)\n2023-07-15T16:58:43.728+01:00 TRACE 21592 --- [0.1-8080-exec-1] .s.s.w.c.SupplierDeferredSecurityContext : Created SecurityContextImpl [Null authentication]\n2023-07-15T16:58:45.906+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/12)\n2023-07-15T16:58:45.906+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/12)\n2023-07-15T16:58:45.908+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/12)\n2023-07-15T16:58:45.908+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (10/12)\n2023-07-15T16:58:45.909+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated UsernamePasswordAuthenticationToken [Principal=User(id=64b2afc9b0ab605e709f61b6, username=kokoro, name=Brito, password=$2a$10$2PN0M.nH.tUa6sqXX/RaAOIS8kcH4FZUGEO9AzD6Dat/98gW7BF4S, notes=notas, role=PLUS, tokens=null), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_PLUS]]\n2023-07-15T16:58:45.909+01:00 TRACE 21592 --- [0.1-8080-exec-1] s.CompositeSessionAuthenticationStrategy : Preparing session with ChangeSessionIdAuthenticationStrategy (1/1)\n2023-07-15T16:58:45.909+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (11/12)\n2023-07-15T16:58:45.909+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (12/12)\n2023-07-15T16:58:45.910+01:00 TRACE 21592 --- [0.1-8080-exec-1] estMatcherDelegatingAuthorizationManager : Authorizing SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@1e14ac53]\n2023-07-15T16:58:45.923+01:00 TRACE 21592 --- [0.1-8080-exec-1] estMatcherDelegatingAuthorizationManager : Checking authorization on SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@1e14ac53] using org.springframework.security.authorization.AuthenticatedAuthorizationManager@2918d923\n2023-07-15T16:58:45.924+01:00 DEBUG 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/v1/client/findAllUsersByRole?role=PLUS\n2023-07-15T16:58:45.937+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]\n2023-07-15T16:58:45.940+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@359e27d2, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@277bc3a5, org.springframework.security.web.context.SecurityContextHolderFilter@4ffa7041, org.springframework.security.web.header.HeaderWriterFilter@71fb8301, org.springframework.security.web.authentication.logout.LogoutFilter@749d7c01, com.org.fhub.config.JwtAuthenticationFilter@7cc2c551, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@56b05bd7, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3e4afd10, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@214fba74, org.springframework.security.web.session.SessionManagementFilter@485c84d7, org.springframework.security.web.access.ExceptionTranslationFilter@5c4714ef, org.springframework.security.web.access.intercept.AuthorizationFilter@7e1d8d41]] (1/1)\n2023-07-15T16:58:45.940+01:00 DEBUG 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /error?role=PLUS\n2023-07-15T16:58:45.940+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/12)\n2023-07-15T16:58:45.940+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/12)\n2023-07-15T16:58:45.940+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/12)\n2023-07-15T16:58:45.940+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/12)\n2023-07-15T16:58:45.940+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/12)\n2023-07-15T16:58:45.941+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/api/v1/auth/logout', GET], Ant [pattern='/api/v1/auth/logout', POST], Ant [pattern='/api/v1/auth/logout', PUT], Ant [pattern='/api/v1/auth/logout', DELETE]]\n2023-07-15T16:58:45.941+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking JwtAuthenticationFilter (6/12)\n2023-07-15T16:58:45.941+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/12)\n2023-07-15T16:58:45.941+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/12)\n2023-07-15T16:58:45.941+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/12)\n2023-07-15T16:58:45.941+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (10/12)\n2023-07-15T16:58:45.941+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (11/12)\n2023-07-15T16:58:45.941+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (12/12)\n2023-07-15T16:58:45.941+01:00 TRACE 21592 --- [0.1-8080-exec-1] estMatcherDelegatingAuthorizationManager : Authorizing SecurityContextHolderAwareRequestWrapper[ FirewalledRequest[ org.apache.catalina.core.ApplicationHttpRequest@4a6fe6ad]]\n2023-07-15T16:58:45.945+01:00 TRACE 21592 --- [0.1-8080-exec-1] estMatcherDelegatingAuthorizationManager : Checking authorization on SecurityContextHolderAwareRequestWrapper[ FirewalledRequest[ org.apache.catalina.core.ApplicationHttpRequest@4a6fe6ad]] using org.springframework.security.authorization.AuthenticatedAuthorizationManager@2918d923\n2023-07-15T16:58:45.945+01:00 TRACE 21592 --- [0.1-8080-exec-1] .s.s.w.c.SupplierDeferredSecurityContext : Created SecurityContextImpl [Null authentication]\n2023-07-15T16:58:45.946+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_ANONYMOUS]]\n2023-07-15T16:58:45.946+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.s.w.a.ExceptionTranslationFilter     : Sending AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_ANONYMOUS]] to authentication entry point since access is denied\n\norg.springframework.security.access.AccessDeniedException: Access Denied\n    at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:98) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.1.jar:6.1.1]\n\n2023-07-15T16:58:45.951+01:00 DEBUG 21592 --- [0.1-8080-exec-1] o.s.s.w.a.Http403ForbiddenEntryPoint     : Pre-authenticated entry point called. Rejecting access\n\n</code></pre>\n<p>My build.gradle:</p>\n<pre><code>    implementation 'org.springframework.boot:spring-boot-starter-data-mongodb'\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n    implementation 'org.springframework.boot:spring-boot-starter-security:3.1.1'\n</code></pre>\n<p>Im sending the Bearer correctly and validated it with the DB.\nAll other endpoints/controllers with authorities work fine, register, delete etc... this one doesnt even go in the controller.</p>\n<p>I expect this endpoint to be allowed to execute.</p>\n"},{"tags":["java","smartcontracts","nft","web3-java"],"owner":{"account_id":7191134,"reputation":143,"user_id":5491415,"display_name":"lehadnk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691620780,"creation_date":1691620780,"question_id":76871684,"body_markdown":"I&#39;m trying to implement the NFT minting function for a Java project.\r\nFirst, I created the test project in Alchemy and deployed the smart contract using Remix IDE. Next, using remix I called the safeMint function and minted an NFT, then successfully transferred it to my wallet. To test my Java code, I first implemented the following function that displays the wallet balance:\r\n```\r\npublic BigInteger getWalletBalance(String contractId, String walletId)\r\n{\r\n    Function function = new Function(\r\n            &quot;balanceOf&quot;,\r\n            List.of(\r\n                    new Address(walletId)\r\n            ),\r\n            List.of(new TypeReference&lt;Type&gt;() {})\r\n    );\r\n\r\n    String requestData = FunctionEncoder.encode(function);\r\n    Transaction transaction = Transaction.createEthCallTransaction(null, contractId, requestData);\r\n\r\n    try {\r\n        var callResult = web3j.ethCall(transaction, DefaultBlockParameterName.LATEST).send();\r\n        return new BigInteger(callResult.getValue().substring(2), 16);\r\n    } catch (IOException e) {\r\n        throw new RuntimeException(e);\r\n    }\r\n}\r\n```\r\n\r\nThis part of the integration worked with no issues, and I was able to successfully call the pure function, and get the valid result from the platform.\r\n\r\nNext, I&#39;ve decided to call non-payable function called safeMint:\r\n```\r\npublic void mintNft(String contractId, String walletId, NftMintRequest nftMintRequest)\r\n{\r\n    Function function = new Function(\r\n            &quot;safeMint&quot;,\r\n            List.of(\r\n                    new Address(walletId),\r\n                    new Utf8String(&quot;ifps://Qmc71tw4FTUK9j2sco2vSiEfuYk4CmagChPWg2RmrtXcuW&quot;)\r\n            ),\r\n            List.of(new TypeReference&lt;Type&gt;() {})\r\n    );\r\n\r\n    String requestData = FunctionEncoder.encode(function);\r\n    Transaction transaction = Transaction.createFunctionCallTransaction(\r\n            walletId,\r\n            BigInteger.ONE,\r\n            BigInteger.valueOf(3000000),\r\n            BigInteger.valueOf(3000000),\r\n            contractId,\r\n            BigInteger.ONE,\r\n            requestData\r\n    );\r\n\r\n    try {\r\n        var callResult = web3j.ethCall(transaction, DefaultBlockParameterName.LATEST).send();\r\n        System.out.println(callResult.getValue());\r\n    } catch (IOException e) {\r\n        throw new RuntimeException(e);\r\n    }\r\n}\r\n```\r\n\r\nThere are two issues I&#39;ve encountered so far:\r\n 1. RPC responds with error message &quot;execution reverted&quot;.\r\n 2. Since I have to support the transaction with gas fee, I have to somehow authorize it using my wallet private key. But I didn&#39;t manage to find any way to do this.\r\n\r\nWhat do I have to fix in my code so I can call safeMint method as well?\r\n\r\n","title":"Calling safeMint non-payable function using web3j","body":"<p>I'm trying to implement the NFT minting function for a Java project.\nFirst, I created the test project in Alchemy and deployed the smart contract using Remix IDE. Next, using remix I called the safeMint function and minted an NFT, then successfully transferred it to my wallet. To test my Java code, I first implemented the following function that displays the wallet balance:</p>\n<pre><code>public BigInteger getWalletBalance(String contractId, String walletId)\n{\n    Function function = new Function(\n            &quot;balanceOf&quot;,\n            List.of(\n                    new Address(walletId)\n            ),\n            List.of(new TypeReference&lt;Type&gt;() {})\n    );\n\n    String requestData = FunctionEncoder.encode(function);\n    Transaction transaction = Transaction.createEthCallTransaction(null, contractId, requestData);\n\n    try {\n        var callResult = web3j.ethCall(transaction, DefaultBlockParameterName.LATEST).send();\n        return new BigInteger(callResult.getValue().substring(2), 16);\n    } catch (IOException e) {\n        throw new RuntimeException(e);\n    }\n}\n</code></pre>\n<p>This part of the integration worked with no issues, and I was able to successfully call the pure function, and get the valid result from the platform.</p>\n<p>Next, I've decided to call non-payable function called safeMint:</p>\n<pre><code>public void mintNft(String contractId, String walletId, NftMintRequest nftMintRequest)\n{\n    Function function = new Function(\n            &quot;safeMint&quot;,\n            List.of(\n                    new Address(walletId),\n                    new Utf8String(&quot;ifps://Qmc71tw4FTUK9j2sco2vSiEfuYk4CmagChPWg2RmrtXcuW&quot;)\n            ),\n            List.of(new TypeReference&lt;Type&gt;() {})\n    );\n\n    String requestData = FunctionEncoder.encode(function);\n    Transaction transaction = Transaction.createFunctionCallTransaction(\n            walletId,\n            BigInteger.ONE,\n            BigInteger.valueOf(3000000),\n            BigInteger.valueOf(3000000),\n            contractId,\n            BigInteger.ONE,\n            requestData\n    );\n\n    try {\n        var callResult = web3j.ethCall(transaction, DefaultBlockParameterName.LATEST).send();\n        System.out.println(callResult.getValue());\n    } catch (IOException e) {\n        throw new RuntimeException(e);\n    }\n}\n</code></pre>\n<p>There are two issues I've encountered so far:</p>\n<ol>\n<li>RPC responds with error message &quot;execution reverted&quot;.</li>\n<li>Since I have to support the transaction with gas fee, I have to somehow authorize it using my wallet private key. But I didn't manage to find any way to do this.</li>\n</ol>\n<p>What do I have to fix in my code so I can call safeMint method as well?</p>\n"},{"tags":["java","unicode","char","codepoint"],"answers":[{"tags":[],"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1410636846,"creation_date":1410636846,"answer_id":25826900,"question_id":25826859,"body_markdown":"If I understand your question, you could simply cast the `char` to an `int`, something like this\r\n\r\n\tchar ch = &#39;\\r&#39;;\r\n\tint codePoint = (int) ch;\r\n\tSystem.out.println(codePoint);\r\n\r\nOutput is\r\n\r\n    13","title":"What is the propper way to get a char&#39;s code point?","body":"<p>If I understand your question, you could simply cast the <code>char</code> to an <code>int</code>, something like this</p>\n\n<pre><code>char ch = '\\r';\nint codePoint = (int) ch;\nSystem.out.println(codePoint);\n</code></pre>\n\n<p>Output is</p>\n\n<pre><code>13\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11683,"reputation":1438169,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1410637548,"creation_date":1410637075,"answer_id":25826931,"question_id":25826859,"body_markdown":"*If* you know that all your input is going to be in the Basic Multilingual Plane (U+0000 to U+FFFF) then you can just use:\n\n    char character = &#39;x&#39;;\n    int codePoint = character;\n\nThat uses the implicit conversion from `char` to `int`, as specified in JLS 5.1.2:\n\n&gt; 19 specific conversions on primitive types are called the widening primitive conversions:\n&gt;\n&gt; - ...\n&gt; - `char` to `int`, `long`, `float`, or `double`\n&gt;\n&gt; ...\n&gt;\n&gt; A widening conversion of a char to an integral type T zero-extends the representation of the char value to fill the wider format.\n\nHowever, a `char` is only a UTF-16 code *unit*. The point of `Character.codePointAt` is that it copes with code points outside the BMP, which are composed of a *surrogate pair* - two UTF-16 code units which join together to make a single character.\n\nFrom [JLS 3.1][1]:\n\n&gt; The Unicode standard was originally designed as a fixed-width 16-bit character encoding. It has since been changed to allow for characters whose representation requires more than 16 bits. The range of legal code points is now U+0000 to U+10FFFF, using the hexadecimal U+n notation. Characters whose code points are greater than U+FFFF are called supplementary characters. To represent the complete range of characters using only 16-bit units, the Unicode standard defines an encoding called UTF-16. In this encoding, supplementary characters are represented as pairs of 16-bit code units, the first from the high-surrogates range, (U+D800 to U+DBFF), the second from the low-surrogates range (U+DC00 to U+DFFF). For characters in the range U+0000 to U+FFFF, the values of code points and UTF-16 code units are the same.\n\nIf you need to be able to cope with that more complicated situation, you&#39;ll need the more complicated code.\n\n\n  [1]: http://docs.oracle.com/javase/specs/jls/se8/html/jls-3.html#jls-3.1","title":"What is the propper way to get a char&#39;s code point?","body":"<p><em>If</em> you know that all your input is going to be in the Basic Multilingual Plane (U+0000 to U+FFFF) then you can just use:</p>\n<pre><code>char character = 'x';\nint codePoint = character;\n</code></pre>\n<p>That uses the implicit conversion from <code>char</code> to <code>int</code>, as specified in JLS 5.1.2:</p>\n<blockquote>\n<p>19 specific conversions on primitive types are called the widening primitive conversions:</p>\n<ul>\n<li>...</li>\n<li><code>char</code> to <code>int</code>, <code>long</code>, <code>float</code>, or <code>double</code></li>\n</ul>\n<p>...</p>\n<p>A widening conversion of a char to an integral type T zero-extends the representation of the char value to fill the wider format.</p>\n</blockquote>\n<p>However, a <code>char</code> is only a UTF-16 code <em>unit</em>. The point of <code>Character.codePointAt</code> is that it copes with code points outside the BMP, which are composed of a <em>surrogate pair</em> - two UTF-16 code units which join together to make a single character.</p>\n<p>From <a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-3.html#jls-3.1\" rel=\"nofollow noreferrer\">JLS 3.1</a>:</p>\n<blockquote>\n<p>The Unicode standard was originally designed as a fixed-width 16-bit character encoding. It has since been changed to allow for characters whose representation requires more than 16 bits. The range of legal code points is now U+0000 to U+10FFFF, using the hexadecimal U+n notation. Characters whose code points are greater than U+FFFF are called supplementary characters. To represent the complete range of characters using only 16-bit units, the Unicode standard defines an encoding called UTF-16. In this encoding, supplementary characters are represented as pairs of 16-bit code units, the first from the high-surrogates range, (U+D800 to U+DBFF), the second from the low-surrogates range (U+DC00 to U+DFFF). For characters in the range U+0000 to U+FFFF, the values of code points and UTF-16 code units are the same.</p>\n</blockquote>\n<p>If you need to be able to cope with that more complicated situation, you'll need the more complicated code.</p>\n"},{"tags":[],"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691620250,"creation_date":1691620250,"answer_id":76871651,"question_id":25826859,"body_markdown":"I know this question is old, but neither of the existing answers actually answers the question, including the accepted answer.\r\n\r\nYou can simply compare a code point with a char directly.\r\n\r\n    if (codePoint == &#39;\\r&#39;)","title":"What is the propper way to get a char&#39;s code point?","body":"<p>I know this question is old, but neither of the existing answers actually answers the question, including the accepted answer.</p>\n<p>You can simply compare a code point with a char directly.</p>\n<pre><code>if (codePoint == '\\r')\n</code></pre>\n"}],"owner":{"account_id":4959811,"reputation":5014,"user_id":3991344,"accept_rate":92,"display_name":"Pokechu22"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1015,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":25826931,"answer_count":3,"score":4,"last_activity_date":1691620250,"creation_date":1410636518,"question_id":25826859,"body_markdown":"I need to do some stuff with codepoints and a newline.  I have a function that takes a `char`&#39;s codepoint, and if it is `\\r` it needs to behave differently.  I&#39;ve got this: \r\n\r\n    if (codePoint == Character.codePointAt(new char[] {&#39;\\r&#39;}, 0)) {\r\n\r\nbut that is very ugly and ***certainly*** not the right way to do it.  What is the correct method of doing this?\r\n\r\n&lt;sub&gt;(I know that I could hardcode the number `13` (decimal identifier for `\\r`) and use that, but doing that would make it unclear what I am doing...)&lt;/sub&gt;","title":"What is the propper way to get a char&#39;s code point?","body":"<p>I need to do some stuff with codepoints and a newline.  I have a function that takes a <code>char</code>'s codepoint, and if it is <code>\\r</code> it needs to behave differently.  I've got this: </p>\n\n<pre><code>if (codePoint == Character.codePointAt(new char[] {'\\r'}, 0)) {\n</code></pre>\n\n<p>but that is very ugly and <strong><em>certainly</em></strong> not the right way to do it.  What is the correct method of doing this?</p>\n\n<p><sub>(I know that I could hardcode the number <code>13</code> (decimal identifier for <code>\\r</code>) and use that, but doing that would make it unclear what I am doing...)</sub></p>\n"},{"tags":["java","android","computer-vision","face-detection"],"comments":[{"owner":{"account_id":6552102,"reputation":2093,"user_id":5750389,"display_name":"Elias Fazel"},"score":0,"creation_date":1489049200,"post_id":42690402,"comment_id":72503835,"body_markdown":"do you know how to take picture? call it when a face detected!","body":"do you know how to take picture? call it when a face detected!"},{"owner":{"account_id":6373389,"reputation":11,"user_id":4945158,"display_name":"Trung Th&#224;nh"},"score":0,"creation_date":1489049707,"post_id":42690402,"comment_id":72504144,"body_markdown":"yeah, i think so. But i don&#39;t know when was face detected and how to handle it.","body":"yeah, i think so. But i don&#39;t know when was face detected and how to handle it."}],"answers":[{"tags":[],"owner":{"account_id":467493,"reputation":101,"user_id":5200968,"display_name":"Jayaprakash"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1489052478,"creation_date":1489052478,"answer_id":42691744,"question_id":42690402,"body_markdown":"You have to add FaceDetectionListener in camera API then call startFaceDetection() method,\r\n\r\n    CameraFaceDetectionListener fDListener = new CameraFaceDetectionListener();\r\n    mCamera.setFaceDetectionListener(fDetectionListener);\r\n    mCamera.startFaceDetection();\r\n\r\nImplement Camera.FaceDetectionListener, you receive the detected face in onFaceDetection override method,\r\n\r\n    private class MyFaceDetectionListener \r\n              implements Camera.FaceDetectionListener {\r\n\r\n    @Override\r\n    public void onFaceDetection(Face[] faces, Camera camera) {\r\n\r\n        if (faces.length == 0) {\r\n            Log.i(TAG, &quot;No faces detected&quot;);\r\n        } else if (faces.length &gt; 0) {\r\n            Log.i(TAG, &quot;Faces Detected = &quot; + \r\n                  String.valueOf(faces.length));\r\n\r\n            public List&lt;Rect&gt; faceRects;\r\n            faceRects = new ArrayList&lt;Rect&gt;();\r\n\r\n            for (int i=0; i&lt;faces.length; i++) {\r\n                int left = faces[i].rect.left;\r\n                int right = faces[i].rect.right;\r\n                int top = faces[i].rect.top;\r\n                int bottom = faces[i].rect.bottom;\r\n                Rect uRect = new Rect(left0, top0, right0, bottom0);\r\n                faceRects.add(uRect);\r\n            }\r\n            \r\n            // add function to draw rects on view/surface/canvas\r\n        }\r\n    }\r\n\r\nAs per your case, new Handler().postDelayed(new Runnable,long seconds) take 2nd picture inside runnable after 5 seconds.\r\nPlease let me know if you have any queries. \r\n \r\n","title":"take picture when face detected using FaceDetector google-vision","body":"<p>You have to add FaceDetectionListener in camera API then call startFaceDetection() method,</p>\n\n<pre><code>CameraFaceDetectionListener fDListener = new CameraFaceDetectionListener();\nmCamera.setFaceDetectionListener(fDetectionListener);\nmCamera.startFaceDetection();\n</code></pre>\n\n<p>Implement Camera.FaceDetectionListener, you receive the detected face in onFaceDetection override method,</p>\n\n<pre><code>private class MyFaceDetectionListener \n          implements Camera.FaceDetectionListener {\n\n@Override\npublic void onFaceDetection(Face[] faces, Camera camera) {\n\n    if (faces.length == 0) {\n        Log.i(TAG, \"No faces detected\");\n    } else if (faces.length &gt; 0) {\n        Log.i(TAG, \"Faces Detected = \" + \n              String.valueOf(faces.length));\n\n        public List&lt;Rect&gt; faceRects;\n        faceRects = new ArrayList&lt;Rect&gt;();\n\n        for (int i=0; i&lt;faces.length; i++) {\n            int left = faces[i].rect.left;\n            int right = faces[i].rect.right;\n            int top = faces[i].rect.top;\n            int bottom = faces[i].rect.bottom;\n            Rect uRect = new Rect(left0, top0, right0, bottom0);\n            faceRects.add(uRect);\n        }\n\n        // add function to draw rects on view/surface/canvas\n    }\n}\n</code></pre>\n\n<p>As per your case, new Handler().postDelayed(new Runnable,long seconds) take 2nd picture inside runnable after 5 seconds.\nPlease let me know if you have any queries. </p>\n"}],"owner":{"account_id":6373389,"reputation":11,"user_id":4945158,"display_name":"Trung Th&#224;nh"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1356,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691620121,"creation_date":1489048577,"question_id":42690402,"body_markdown":"I found the demo code here: https://github.com/googlesamples/android-vision/blob/master/visionSamples/FaceTracker/app/src/main/java/com/google/android/gms/samples/vision/face/facetracker/FaceTrackerActivity.java\r\n\r\nand my question is how to take picture when face detected and save it to device, and when we take 1st picture next picture will be take after 5s when face detected because we can&#39;t save to many picture to device.","title":"take picture when face detected using FaceDetector google-vision","body":"<p>I found the demo code here: <a href=\"https://github.com/googlesamples/android-vision/blob/master/visionSamples/FaceTracker/app/src/main/java/com/google/android/gms/samples/vision/face/facetracker/FaceTrackerActivity.java\" rel=\"nofollow noreferrer\">https://github.com/googlesamples/android-vision/blob/master/visionSamples/FaceTracker/app/src/main/java/com/google/android/gms/samples/vision/face/facetracker/FaceTrackerActivity.java</a></p>\n\n<p>and my question is how to take picture when face detected and save it to device, and when we take 1st picture next picture will be take after 5s when face detected because we can't save to many picture to device.</p>\n"},{"tags":["java","spring-boot","jboss","get-mapping"],"comments":[{"owner":{"account_id":4034639,"reputation":985,"user_id":3319557,"accept_rate":100,"display_name":"mlecz"},"score":0,"creation_date":1691608550,"post_id":76870623,"comment_id":135516099,"body_markdown":"I guess your &quot;/test1&quot; returns index, maybe it redirects back to &quot;/&quot;. I dont know mvc, so im not sure","body":"I guess your &quot;/test1&quot; returns index, maybe it redirects back to &quot;/&quot;. I dont know mvc, so im not sure"}],"answers":[{"tags":[],"owner":{"account_id":28107781,"reputation":1,"user_id":21476112,"display_name":"mog"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691619207,"creation_date":1691619207,"answer_id":76871587,"question_id":76870623,"body_markdown":"@GetMapping() handles requests to whatever URI path, so if you have GetMapping(&quot;/test&quot;) this function or class will handle GET requests to example.org/test. You can also annotate classes with @RequestMapping(&quot;/something&quot;) to prepend a path, so combined will be &#39;example.org/something/test&#39; and will get handled by the GetMapping annotated function","title":"Not Understanding GetMapping()","body":"<p>@GetMapping() handles requests to whatever URI path, so if you have GetMapping(&quot;/test&quot;) this function or class will handle GET requests to example.org/test. You can also annotate classes with @RequestMapping(&quot;/something&quot;) to prepend a path, so combined will be 'example.org/something/test' and will get handled by the GetMapping annotated function</p>\n"}],"owner":{"account_id":5536358,"reputation":43,"user_id":4394528,"display_name":"Kmus"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1691619207,"creation_date":1691608317,"question_id":76870623,"body_markdown":"I&#39;m working with a Spring Boot application on a JBoss server. I&#39;m new to java, spring and JBoss.\r\n\r\nI was working through a session management example from https://www.javainuse.com/spring/springboot_session\r\n\r\nI ran this code:\r\n\r\n    package private.prototype1;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    import javax.servlet.http.HttpServletRequest;\r\n    import javax.servlet.http.HttpSession;\r\n    \r\n    import org.springframework.stereotype.Controller;\r\n    import org.springframework.ui.Model;\r\n    import org.springframework.web.bind.annotation.GetMapping;\r\n    import org.springframework.web.bind.annotation.PostMapping;\r\n    import org.springframework.web.bind.annotation.RequestParam;\r\n    \r\n    @Controller\r\n    public class SpringSessionController {\r\n    \r\n    \t@GetMapping(&quot;/&quot;)\r\n    \tpublic String process(Model model, HttpSession session) {\r\n    \t\t@SuppressWarnings(&quot;unchecked&quot;)\r\n    \t\tList&lt;String&gt; messages = (List&lt;String&gt;) session.getAttribute(&quot;MY_SESSION_MESSAGES&quot;);\r\n    \r\n    \t\tif (messages == null) {\r\n    \t\t\tmessages = new ArrayList&lt;&gt;();\r\n    \t\t}\r\n    \t\tmodel.addAttribute(&quot;sessionMessages&quot;, messages);\r\n    \r\n    \t\treturn &quot;index&quot;;\r\n    \t}\r\n    \r\n    \t@PostMapping(&quot;/persistMessage&quot;)\r\n    \tpublic String persistMessage(@RequestParam(&quot;msg&quot;) String msg, HttpServletRequest request) {\r\n    \t\t@SuppressWarnings(&quot;unchecked&quot;)\r\n    \t\tList&lt;String&gt; messages = (List&lt;String&gt;) request.getSession().getAttribute(&quot;MY_SESSION_MESSAGES&quot;);\r\n    \t\tif (messages == null) {\r\n    \t\t\tmessages = new ArrayList&lt;&gt;();\r\n    \t\t\trequest.getSession().setAttribute(&quot;MY_SESSION_MESSAGES&quot;, messages);\r\n    \t\t}\r\n    \t\tmessages.add(msg);\r\n    \t\trequest.getSession().setAttribute(&quot;MY_SESSION_MESSAGES&quot;, messages);\r\n    \t\treturn &quot;redirect:/&quot;;\r\n    \t}\r\n    \r\n    \t@PostMapping(&quot;/destroy&quot;)\r\n    \tpublic String destroySession(HttpServletRequest request) {\r\n    \t\trequest.getSession().invalidate();\r\n    \t\treturn &quot;redirect:/&quot;;\r\n    \t}\r\n    }\r\n\r\nWhen I ran it and went to myurl/prototype1/ I got a blank page. So I changed the GetMapping to /test... no great explanation for that, just seemed like something to try\r\n\r\n    package private.prototype1;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    import javax.servlet.http.HttpServletRequest;\r\n    import javax.servlet.http.HttpSession;\r\n    \r\n    import org.springframework.stereotype.Controller;\r\n    import org.springframework.ui.Model;\r\n    import org.springframework.web.bind.annotation.GetMapping;\r\n    import org.springframework.web.bind.annotation.PostMapping;\r\n    import org.springframework.web.bind.annotation.RequestParam;\r\n    \r\n    @Controller\r\n    public class SpringSessionController {\r\n    \r\n    \t@GetMapping(&quot;/test&quot;)\r\n    \tpublic String process(Model model, HttpSession session) {\r\n    \t\t@SuppressWarnings(&quot;unchecked&quot;)\r\n    \t\tList&lt;String&gt; messages = (List&lt;String&gt;) session.getAttribute(&quot;MY_SESSION_MESSAGES&quot;);\r\n    \r\n    \t\tif (messages == null) {\r\n    \t\t\tmessages = new ArrayList&lt;&gt;();\r\n    \t\t}\r\n    \t\tmodel.addAttribute(&quot;sessionMessages&quot;, messages);\r\n    \r\n    \t\treturn &quot;index&quot;;\r\n    \t}\r\n    \r\n    \t@PostMapping(&quot;/persistMessage&quot;)\r\n    \tpublic String persistMessage(@RequestParam(&quot;msg&quot;) String msg, HttpServletRequest request) {\r\n    \t\t@SuppressWarnings(&quot;unchecked&quot;)\r\n    \t\tList&lt;String&gt; messages = (List&lt;String&gt;) request.getSession().getAttribute(&quot;MY_SESSION_MESSAGES&quot;);\r\n    \t\tif (messages == null) {\r\n    \t\t\tmessages = new ArrayList&lt;&gt;();\r\n    \t\t\trequest.getSession().setAttribute(&quot;MY_SESSION_MESSAGES&quot;, messages);\r\n    \t\t}\r\n    \t\tmessages.add(msg);\r\n    \t\trequest.getSession().setAttribute(&quot;MY_SESSION_MESSAGES&quot;, messages);\r\n    \t\treturn &quot;redirect:/&quot;;\r\n    \t}\r\n    \r\n    \t@PostMapping(&quot;/destroy&quot;)\r\n    \tpublic String destroySession(HttpServletRequest request) {\r\n    \t\trequest.getSession().invalidate();\r\n    \t\treturn &quot;redirect:/&quot;;\r\n    \t}\r\n    }\r\n\r\nI deployed it to the JBoss server.\r\n\r\nI went back to myurl/prototype1/  and refreshed to see if I got a Not Found error instead of the white page. Surprisingly I&#39;m getting the page... I expected it to have been moved to myurl/prototype1/test but instead its at muyrl/prototype1.\r\n\r\nAlso, myurl/prototype1/test shows a blank page.\r\n\r\nI wanted to be double sure I was actually running the code I just changed so I added a &quot;2&quot; after the header in index.html and deployed it again\r\n\r\n[![enter image description here][1]][1]\r\n\r\nThe &quot;2&quot; showed up.\r\n\r\nI also viewed the source code from JBoss to be positive it deployed correctly:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nIt shows the /test mapping...\r\n\r\nI can only assume that I just don&#39;t understand how @GetMapping() works. Can anyone straighten me out?\r\n\r\nEDIT: I also just tried changing it to @GetMapping(&quot;/asdf&quot;) and still that page shows up at / and /asdf is blank. Does it have something to do with that method using the index.html template? That doesn&#39;t seem like it would make sense..\r\n\r\n  [1]: https://i.stack.imgur.com/p4Hpu.png\r\n  [2]: https://i.stack.imgur.com/jw86l.png","title":"Not Understanding GetMapping()","body":"<p>I'm working with a Spring Boot application on a JBoss server. I'm new to java, spring and JBoss.</p>\n<p>I was working through a session management example from <a href=\"https://www.javainuse.com/spring/springboot_session\" rel=\"nofollow noreferrer\">https://www.javainuse.com/spring/springboot_session</a></p>\n<p>I ran this code:</p>\n<pre><code>package private.prototype1;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpSession;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestParam;\n\n@Controller\npublic class SpringSessionController {\n\n    @GetMapping(&quot;/&quot;)\n    public String process(Model model, HttpSession session) {\n        @SuppressWarnings(&quot;unchecked&quot;)\n        List&lt;String&gt; messages = (List&lt;String&gt;) session.getAttribute(&quot;MY_SESSION_MESSAGES&quot;);\n\n        if (messages == null) {\n            messages = new ArrayList&lt;&gt;();\n        }\n        model.addAttribute(&quot;sessionMessages&quot;, messages);\n\n        return &quot;index&quot;;\n    }\n\n    @PostMapping(&quot;/persistMessage&quot;)\n    public String persistMessage(@RequestParam(&quot;msg&quot;) String msg, HttpServletRequest request) {\n        @SuppressWarnings(&quot;unchecked&quot;)\n        List&lt;String&gt; messages = (List&lt;String&gt;) request.getSession().getAttribute(&quot;MY_SESSION_MESSAGES&quot;);\n        if (messages == null) {\n            messages = new ArrayList&lt;&gt;();\n            request.getSession().setAttribute(&quot;MY_SESSION_MESSAGES&quot;, messages);\n        }\n        messages.add(msg);\n        request.getSession().setAttribute(&quot;MY_SESSION_MESSAGES&quot;, messages);\n        return &quot;redirect:/&quot;;\n    }\n\n    @PostMapping(&quot;/destroy&quot;)\n    public String destroySession(HttpServletRequest request) {\n        request.getSession().invalidate();\n        return &quot;redirect:/&quot;;\n    }\n}\n</code></pre>\n<p>When I ran it and went to myurl/prototype1/ I got a blank page. So I changed the GetMapping to /test... no great explanation for that, just seemed like something to try</p>\n<pre><code>package private.prototype1;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpSession;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestParam;\n\n@Controller\npublic class SpringSessionController {\n\n    @GetMapping(&quot;/test&quot;)\n    public String process(Model model, HttpSession session) {\n        @SuppressWarnings(&quot;unchecked&quot;)\n        List&lt;String&gt; messages = (List&lt;String&gt;) session.getAttribute(&quot;MY_SESSION_MESSAGES&quot;);\n\n        if (messages == null) {\n            messages = new ArrayList&lt;&gt;();\n        }\n        model.addAttribute(&quot;sessionMessages&quot;, messages);\n\n        return &quot;index&quot;;\n    }\n\n    @PostMapping(&quot;/persistMessage&quot;)\n    public String persistMessage(@RequestParam(&quot;msg&quot;) String msg, HttpServletRequest request) {\n        @SuppressWarnings(&quot;unchecked&quot;)\n        List&lt;String&gt; messages = (List&lt;String&gt;) request.getSession().getAttribute(&quot;MY_SESSION_MESSAGES&quot;);\n        if (messages == null) {\n            messages = new ArrayList&lt;&gt;();\n            request.getSession().setAttribute(&quot;MY_SESSION_MESSAGES&quot;, messages);\n        }\n        messages.add(msg);\n        request.getSession().setAttribute(&quot;MY_SESSION_MESSAGES&quot;, messages);\n        return &quot;redirect:/&quot;;\n    }\n\n    @PostMapping(&quot;/destroy&quot;)\n    public String destroySession(HttpServletRequest request) {\n        request.getSession().invalidate();\n        return &quot;redirect:/&quot;;\n    }\n}\n</code></pre>\n<p>I deployed it to the JBoss server.</p>\n<p>I went back to myurl/prototype1/  and refreshed to see if I got a Not Found error instead of the white page. Surprisingly I'm getting the page... I expected it to have been moved to myurl/prototype1/test but instead its at muyrl/prototype1.</p>\n<p>Also, myurl/prototype1/test shows a blank page.</p>\n<p>I wanted to be double sure I was actually running the code I just changed so I added a &quot;2&quot; after the header in index.html and deployed it again</p>\n<p><a href=\"https://i.stack.imgur.com/p4Hpu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/p4Hpu.png\" alt=\"enter image description here\" /></a></p>\n<p>The &quot;2&quot; showed up.</p>\n<p>I also viewed the source code from JBoss to be positive it deployed correctly:</p>\n<p><a href=\"https://i.stack.imgur.com/jw86l.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jw86l.png\" alt=\"enter image description here\" /></a></p>\n<p>It shows the /test mapping...</p>\n<p>I can only assume that I just don't understand how @GetMapping() works. Can anyone straighten me out?</p>\n<p>EDIT: I also just tried changing it to @GetMapping(&quot;/asdf&quot;) and still that page shows up at / and /asdf is blank. Does it have something to do with that method using the index.html template? That doesn't seem like it would make sense..</p>\n"},{"tags":["java","c++","java-native-interface"],"comments":[{"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"score":1,"creation_date":1691607505,"post_id":76870281,"comment_id":135515945,"body_markdown":"A `jclass` object is literally a reference to a `java.lang.Class` object, so you can just invoke `getMethods` and `getFields` on it.","body":"A <code>jclass</code> object is literally a reference to a <code>java.lang.Class</code> object, so you can just invoke <code>getMethods</code> and <code>getFields</code> on it."}],"answers":[{"tags":[],"owner":{"account_id":2792262,"reputation":163847,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1691616900,"creation_date":1691608512,"answer_id":76870645,"question_id":76870281,"body_markdown":"&gt; listing all the methods in a given Java class\r\n\r\nUse Java reflection.  [`java.lang.Class.getMethods()`][1] will give you the *public* methods of the class represented by the `Class` object it is invoked upon, including inherited ones.  [`java.lang.Class.getDeclaredMethods()`][2] will get you *all* the methods of any visibility declared directly by target class.  Between these two, and maybe `Class.getSuperclass()`, you can identify all the methods of any class of interest.\r\n\r\nYou can invoke those methods via JNI, but the JNI API does not have its own functions for accomplishing the same thing.\r\n\r\n&gt; listing all class names in a given java application\r\n\r\nYou can list or extract the contents of the relevant JAR files to find the names of the classes within.  Their package names may give you an idea of which are of the most interest.  There is no good Java API, however, for programmatically getting an exhaustive list of known or available classes.  JNI certainly does not provide such.\r\n\r\n&gt; I was trying to [use the context ClassLoaders of the live threads] to get Minecrafts main class\r\n\r\nThat&#39;s a plausible approach, supposing that you know the fully-qualified name of the class you want to find.  But it&#39;s not a sure thing.  There are fun `ClassLoader` games that could be played to prevent a given class or group of classes from being accessed that way.  Not that I think it likely that Minecraft plays such games, but it&#39;s not out of the question.\r\n\r\nHowever, you are already retrieving stack traces of all the threads, and if Minecraft&#39;s initial thread is still running then you can get the name of the game&#39;s entry point class from the last element of the stack trace of that thread.  If there are multiple threads then you may not know which to look at, but for debugging purposes, that would give you a short list to consider.\r\n\r\n&gt; I will need to be able to list all classes.\r\n\r\nFor some definition of &quot;all&quot;, I guess.  But even with a fairly restrictive definition, this is not something you can ordinarily obtain from a `ClassLoader`.  I would find another way.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html#getMethods--\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html#getDeclaredMethods--","title":"Getting all classes and all methods in a class via JNI","body":"<blockquote>\n<p>listing all the methods in a given Java class</p>\n</blockquote>\n<p>Use Java reflection.  <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html#getMethods--\" rel=\"nofollow noreferrer\"><code>java.lang.Class.getMethods()</code></a> will give you the <em>public</em> methods of the class represented by the <code>Class</code> object it is invoked upon, including inherited ones.  <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html#getDeclaredMethods--\" rel=\"nofollow noreferrer\"><code>java.lang.Class.getDeclaredMethods()</code></a> will get you <em>all</em> the methods of any visibility declared directly by target class.  Between these two, and maybe <code>Class.getSuperclass()</code>, you can identify all the methods of any class of interest.</p>\n<p>You can invoke those methods via JNI, but the JNI API does not have its own functions for accomplishing the same thing.</p>\n<blockquote>\n<p>listing all class names in a given java application</p>\n</blockquote>\n<p>You can list or extract the contents of the relevant JAR files to find the names of the classes within.  Their package names may give you an idea of which are of the most interest.  There is no good Java API, however, for programmatically getting an exhaustive list of known or available classes.  JNI certainly does not provide such.</p>\n<blockquote>\n<p>I was trying to [use the context ClassLoaders of the live threads] to get Minecrafts main class</p>\n</blockquote>\n<p>That's a plausible approach, supposing that you know the fully-qualified name of the class you want to find.  But it's not a sure thing.  There are fun <code>ClassLoader</code> games that could be played to prevent a given class or group of classes from being accessed that way.  Not that I think it likely that Minecraft plays such games, but it's not out of the question.</p>\n<p>However, you are already retrieving stack traces of all the threads, and if Minecraft's initial thread is still running then you can get the name of the game's entry point class from the last element of the stack trace of that thread.  If there are multiple threads then you may not know which to look at, but for debugging purposes, that would give you a short list to consider.</p>\n<blockquote>\n<p>I will need to be able to list all classes.</p>\n</blockquote>\n<p>For some definition of &quot;all&quot;, I guess.  But even with a fairly restrictive definition, this is not something you can ordinarily obtain from a <code>ClassLoader</code>.  I would find another way.</p>\n"}],"owner":{"account_id":20092701,"reputation":77,"user_id":21748514,"display_name":"UnSure"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":239,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76870645,"answer_count":1,"score":0,"last_activity_date":1691619039,"creation_date":1691604483,"question_id":76870281,"body_markdown":"I am using C++ along with JNI with the goal of listing all the methods in a given Java class and listing all class names in a given java application. I was trying to do the following to get Minecrafts main class but it&#39;s not working correctly, and I want to figure out how I can debug it in order to fix it myself. To do that I will need to be able to list all classes. This will then make debugging any other issues a lot easier. \r\n```\r\nstatic jobject classLoader;\r\nstatic jmethodID mid_findClass;\r\n\r\nstatic void setupClassLoader()\r\n{\r\n    jclass c_Thread = Java::Env-&gt;FindClass(&quot;java/lang/Thread&quot;);\r\n    jclass c_Map = Java::Env-&gt;FindClass(&quot;java/util/Map&quot;);\r\n    jclass c_Set = Java::Env-&gt;FindClass(&quot;java/util/Set&quot;);\r\n    jclass c_ClassLoader = Java::Env-&gt;FindClass(&quot;java/lang/ClassLoader&quot;);\r\n\r\n    jmethodID mid_getAllStackTraces = Java::Env-&gt;GetStaticMethodID(c_Thread, &quot;getAllStackTraces&quot;, &quot;()Ljava/util/Map;&quot;);\r\n    jmethodID mid_keySet = Java::Env-&gt;GetMethodID(c_Map, &quot;keySet&quot;, &quot;()Ljava/util/Set;&quot;);\r\n    jmethodID mid_toArray = Java::Env-&gt;GetMethodID(c_Set, &quot;toArray&quot;, &quot;()[Ljava/lang/Object;&quot;);\r\n    jmethodID mid_getContextClassLoader = Java::Env-&gt;GetMethodID(c_Thread, &quot;getContextClassLoader&quot;, &quot;()Ljava/lang/ClassLoader;&quot;);\r\n    mid_findClass = Java::Env-&gt;GetMethodID(c_ClassLoader, &quot;findClass&quot;, &quot;(Ljava/lang/String;)Ljava/lang/Class;&quot;);\r\n    jmethodID mid_currentThread = Java::Env-&gt;GetStaticMethodID(c_Thread, &quot;currentThread&quot;, &quot;()Ljava/lang/Thread;&quot;);\r\n\r\n    jobject obj_stackTracesMap = Java::Env-&gt;CallStaticObjectMethod(c_Thread, mid_getAllStackTraces);\r\n    jobject obj_threadsSet = Java::Env-&gt;CallObjectMethod(obj_stackTracesMap, mid_keySet);\r\n\r\n    jobjectArray threads = (jobjectArray) Java::Env-&gt;CallObjectMethod(obj_threadsSet, mid_toArray);\r\n    jint szThreads = Java::Env-&gt;GetArrayLength(threads);\r\n\r\n    for (int i = 0; i &lt; szThreads; i++) {\r\n        jobject thread = Java::Env-&gt;GetObjectArrayElement(threads, i);\r\n        jobject classLoaderObj = Java::Env-&gt;CallObjectMethod(thread, mid_getContextClassLoader);\r\n\r\n        if (classLoaderObj) { // How can I print all class names here instead of using NewStringUTF with a class name I presume to exist\r\n            jstring className = Java::Env-&gt;NewStringUTF(&quot;minecraft.client.Minecraft&quot;);\r\n            jobject minecraftClass = Java::Env-&gt;CallObjectMethod(classLoaderObj, mid_findClass, className);\r\n\r\n            if (minecraftClass) { // This is never true \r\n                classLoader = classLoaderObj;\r\n\r\n                Java::Env-&gt;DeleteLocalRef(minecraftClass);\r\n\r\n                break;\r\n            }\r\n        }\r\n\r\n        Java::Env-&gt;DeleteLocalRef(thread);\r\n    }\r\n   ```\r\n\r\nAlright assuming I get the above issue fixed by figuring out how I can print classes and then manage to get the right class I will need to be able to print methods of a class out with their names and return types. The following is my apprach but I have no idea how I would go about actually printing all method info from a jClass object.\r\n```\r\ninline static jclass clazz;\r\n\r\nJava::AssignClass(&quot;example.Example&quot;, clazz);\r\n\r\nbool Java::AssignClass(std::string name, jclass&amp; out)\r\n{\r\n    jstring className = Java::Env-&gt;NewStringUTF(name.c_str());\r\n    jobject findClass = Java::Env-&gt;CallObjectMethod(classLoader, mid_findClass, className);\r\n\r\n    if (findClass) {\r\n        out = (jclass) findClass;\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n```","title":"Getting all classes and all methods in a class via JNI","body":"<p>I am using C++ along with JNI with the goal of listing all the methods in a given Java class and listing all class names in a given java application. I was trying to do the following to get Minecrafts main class but it's not working correctly, and I want to figure out how I can debug it in order to fix it myself. To do that I will need to be able to list all classes. This will then make debugging any other issues a lot easier.</p>\n<pre><code>static jobject classLoader;\nstatic jmethodID mid_findClass;\n\nstatic void setupClassLoader()\n{\n    jclass c_Thread = Java::Env-&gt;FindClass(&quot;java/lang/Thread&quot;);\n    jclass c_Map = Java::Env-&gt;FindClass(&quot;java/util/Map&quot;);\n    jclass c_Set = Java::Env-&gt;FindClass(&quot;java/util/Set&quot;);\n    jclass c_ClassLoader = Java::Env-&gt;FindClass(&quot;java/lang/ClassLoader&quot;);\n\n    jmethodID mid_getAllStackTraces = Java::Env-&gt;GetStaticMethodID(c_Thread, &quot;getAllStackTraces&quot;, &quot;()Ljava/util/Map;&quot;);\n    jmethodID mid_keySet = Java::Env-&gt;GetMethodID(c_Map, &quot;keySet&quot;, &quot;()Ljava/util/Set;&quot;);\n    jmethodID mid_toArray = Java::Env-&gt;GetMethodID(c_Set, &quot;toArray&quot;, &quot;()[Ljava/lang/Object;&quot;);\n    jmethodID mid_getContextClassLoader = Java::Env-&gt;GetMethodID(c_Thread, &quot;getContextClassLoader&quot;, &quot;()Ljava/lang/ClassLoader;&quot;);\n    mid_findClass = Java::Env-&gt;GetMethodID(c_ClassLoader, &quot;findClass&quot;, &quot;(Ljava/lang/String;)Ljava/lang/Class;&quot;);\n    jmethodID mid_currentThread = Java::Env-&gt;GetStaticMethodID(c_Thread, &quot;currentThread&quot;, &quot;()Ljava/lang/Thread;&quot;);\n\n    jobject obj_stackTracesMap = Java::Env-&gt;CallStaticObjectMethod(c_Thread, mid_getAllStackTraces);\n    jobject obj_threadsSet = Java::Env-&gt;CallObjectMethod(obj_stackTracesMap, mid_keySet);\n\n    jobjectArray threads = (jobjectArray) Java::Env-&gt;CallObjectMethod(obj_threadsSet, mid_toArray);\n    jint szThreads = Java::Env-&gt;GetArrayLength(threads);\n\n    for (int i = 0; i &lt; szThreads; i++) {\n        jobject thread = Java::Env-&gt;GetObjectArrayElement(threads, i);\n        jobject classLoaderObj = Java::Env-&gt;CallObjectMethod(thread, mid_getContextClassLoader);\n\n        if (classLoaderObj) { // How can I print all class names here instead of using NewStringUTF with a class name I presume to exist\n            jstring className = Java::Env-&gt;NewStringUTF(&quot;minecraft.client.Minecraft&quot;);\n            jobject minecraftClass = Java::Env-&gt;CallObjectMethod(classLoaderObj, mid_findClass, className);\n\n            if (minecraftClass) { // This is never true \n                classLoader = classLoaderObj;\n\n                Java::Env-&gt;DeleteLocalRef(minecraftClass);\n\n                break;\n            }\n        }\n\n        Java::Env-&gt;DeleteLocalRef(thread);\n    }\n</code></pre>\n<p>Alright assuming I get the above issue fixed by figuring out how I can print classes and then manage to get the right class I will need to be able to print methods of a class out with their names and return types. The following is my apprach but I have no idea how I would go about actually printing all method info from a jClass object.</p>\n<pre><code>inline static jclass clazz;\n\nJava::AssignClass(&quot;example.Example&quot;, clazz);\n\nbool Java::AssignClass(std::string name, jclass&amp; out)\n{\n    jstring className = Java::Env-&gt;NewStringUTF(name.c_str());\n    jobject findClass = Java::Env-&gt;CallObjectMethod(classLoader, mid_findClass, className);\n\n    if (findClass) {\n        out = (jclass) findClass;\n        return true;\n    }\n    return false;\n}\n</code></pre>\n"},{"tags":["java","apache-poi"],"comments":[{"owner":{"account_id":9727861,"reputation":2565,"user_id":7214091,"display_name":"Gast&#243;n Schabas"},"score":1,"creation_date":1691607807,"post_id":76870560,"comment_id":135515995,"body_markdown":"Does this answer your question? [How to get columns from Excel files using Apache POI?](https://stackoverflow.com/questions/2922692/how-to-get-columns-from-excel-files-using-apache-poi)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/2922692/how-to-get-columns-from-excel-files-using-apache-poi\">How to get columns from Excel files using Apache POI?</a>"},{"owner":{"account_id":28241245,"reputation":15,"user_id":21588981,"display_name":"Sujit Kumar"},"score":0,"creation_date":1691610215,"post_id":76870560,"comment_id":135516323,"body_markdown":"@Gaston Schabas thanks for your reply. I will implement this. But how can I get the range by reading the property from the properties file to get the range of the workbook","body":"@Gaston Schabas thanks for your reply. I will implement this. But how can I get the range by reading the property from the properties file to get the range of the workbook"},{"owner":{"account_id":9727861,"reputation":2565,"user_id":7214091,"display_name":"Gast&#243;n Schabas"},"score":0,"creation_date":1691625537,"post_id":76870560,"comment_id":135518362,"body_markdown":"I don&#39;t know if the library offers something for that. Looks like `&quot;B:F,I:K,L,P&quot;` follows the pattern that all values are splitted by a `,` and it could be a range splitted by a `:` or just one column. Maybe using the split function is enough. If you want something more complex, you should dig in the docs of the lib or implement your own parser. A json could be more readable and easier to parse. It depends on the complexity you need to solve your issue","body":"I don&#39;t know if the library offers something for that. Looks like <code>&quot;B:F,I:K,L,P&quot;</code> follows the pattern that all values are splitted by a <code>,</code> and it could be a range splitted by a <code>:</code> or just one column. Maybe using the split function is enough. If you want something more complex, you should dig in the docs of the lib or implement your own parser. A json could be more readable and easier to parse. It depends on the complexity you need to solve your issue"},{"owner":{"account_id":350017,"reputation":47555,"user_id":685641,"display_name":"Gagravarr"},"score":0,"creation_date":1691665301,"post_id":76870560,"comment_id":135523485,"body_markdown":"Possibly https://poi.apache.org/apidocs/dev/org/apache/poi/ss/util/AreaReference.html will do the parsing work for you?","body":"Possibly <a href=\"https://poi.apache.org/apidocs/dev/org/apache/poi/ss/util/AreaReference.html\" rel=\"nofollow noreferrer\">poi.apache.org/apidocs/dev/org/apache/poi/ss/util/&hellip;</a> will do the parsing work for you?"}],"answers":[{"tags":[],"owner":{"display_name":"user9035826"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691618787,"creation_date":1691618787,"answer_id":76871567,"question_id":76870560,"body_markdown":"You will have to parse the property value you set and collect a list of column numbers. The you can call row.getCell(columnNumber) for each column number to get the actual values. Here is a quick and dirty example to show you what the parser may look like. Hope it helps.\r\n\r\n\r\n    import java.util.List;\r\n    import java.util.ArrayList;\r\n    \r\n    public class CherryPickedColumns {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tString range_prop = &quot;B:F,I:K,L,P&quot;;\r\n    \t\t\r\n    \t\tString[] ranges = range_prop.split(&quot;,&quot;);\r\n    \t\t\r\n    \t\tList&lt;Integer&gt; columns = new ArrayList&lt;Integer&gt;();\r\n    \r\n    \t\tfor(int i=0; i&lt; ranges.length; i++) {\r\n    \t\t\tif(ranges[i].length() == 1) {\r\n    \t\t\t\tcolumns.add(ranges[i].charAt(0)-&#39;A&#39;);\r\n    \t\t\t} else if (ranges[i].length() == 3 &amp;&amp; ranges[i].charAt(1) == &#39;:&#39;) {\r\n    \t\t\t\tchar start = ranges[i].charAt(0);\r\n    \t\t\t\tchar end = ranges[i].charAt(2);\r\n    \t\t\t\twhile(start &lt;= end) {\r\n    \t\t\t\t\tcolumns.add(start-&#39;A&#39;);\r\n    \t\t\t\t\tstart += 1;\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n    \t\tSystem.out.println(&quot;my cherry picked columns:&quot; + columns);\r\n    \t}\r\n    }\r\n\r\n\r\n","title":"How to get the range of cherry pick columns of an excel file in apache poi and java","body":"<p>You will have to parse the property value you set and collect a list of column numbers. The you can call row.getCell(columnNumber) for each column number to get the actual values. Here is a quick and dirty example to show you what the parser may look like. Hope it helps.</p>\n<pre><code>import java.util.List;\nimport java.util.ArrayList;\n\npublic class CherryPickedColumns {\n\n    public static void main(String[] args) {\n        String range_prop = &quot;B:F,I:K,L,P&quot;;\n        \n        String[] ranges = range_prop.split(&quot;,&quot;);\n        \n        List&lt;Integer&gt; columns = new ArrayList&lt;Integer&gt;();\n\n        for(int i=0; i&lt; ranges.length; i++) {\n            if(ranges[i].length() == 1) {\n                columns.add(ranges[i].charAt(0)-'A');\n            } else if (ranges[i].length() == 3 &amp;&amp; ranges[i].charAt(1) == ':') {\n                char start = ranges[i].charAt(0);\n                char end = ranges[i].charAt(2);\n                while(start &lt;= end) {\n                    columns.add(start-'A');\n                    start += 1;\n                }\n            }\n        }\n\n        System.out.println(&quot;my cherry picked columns:&quot; + columns);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":28241245,"reputation":15,"user_id":21588981,"display_name":"Sujit Kumar"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691618787,"creation_date":1691607594,"question_id":76870560,"body_markdown":"I have an excel sheet having columns A to P.\r\nBut I want to take the columns \r\nB to F, I to K, L, P\r\n\r\n\r\n\r\nHow can I achieve this?\r\n\r\n\r\nAny help is highly appreciated.\r\n\r\nThanks in advance.\r\n\r\n\r\n\r\nI have declared a property in properties file as below \r\n\r\nexcel.specific.columns= &quot;B:F,I:K,L,P&quot;\r\n\r\nThen I declared a list in the java class for the above property.\r\n\r\nBut not getting idea how to use that list.\r\n","title":"How to get the range of cherry pick columns of an excel file in apache poi and java","body":"<p>I have an excel sheet having columns A to P.\nBut I want to take the columns\nB to F, I to K, L, P</p>\n<p>How can I achieve this?</p>\n<p>Any help is highly appreciated.</p>\n<p>Thanks in advance.</p>\n<p>I have declared a property in properties file as below</p>\n<p>excel.specific.columns= &quot;B:F,I:K,L,P&quot;</p>\n<p>Then I declared a list in the java class for the above property.</p>\n<p>But not getting idea how to use that list.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9736,"page":256,"page_size":100}
