{"items":[{"tags":["java","spring-boot","tomcat"],"comments":[{"owner":{"account_id":13039762,"reputation":294,"user_id":9423518,"display_name":"Black Bear"},"score":0,"creation_date":1689877535,"post_id":76732549,"comment_id":135279271,"body_markdown":"do you mean something like green/blue deployment strategy?","body":"do you mean something like green/blue deployment strategy?"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1689878483,"post_id":76732549,"comment_id":135279432,"body_markdown":"If you are using cloud infra you can do anything you want. This isn&#39;t a Spring Boot feature but something that you should solve on a different level.","body":"If you are using cloud infra you can do anything you want. This isn&#39;t a Spring Boot feature but something that you should solve on a different level."}],"owner":{"account_id":953960,"reputation":2945,"user_id":979590,"accept_rate":38,"display_name":"Gabriel Belingueres"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689875767,"creation_date":1689875767,"question_id":76732549,"body_markdown":"I&#39;d like to know if, for Spring Boot applications deployed as standalone jar files, there is anything resembling the &quot;parallel deployment&quot; feature of Tomcat, where a new version of the app start serving new sessions but the old version of the app still serves already created sessions. Is there any way to replace this feature?","title":"Spring Boot parallel deployment feature","body":"<p>I'd like to know if, for Spring Boot applications deployed as standalone jar files, there is anything resembling the &quot;parallel deployment&quot; feature of Tomcat, where a new version of the app start serving new sessions but the old version of the app still serves already created sessions. Is there any way to replace this feature?</p>\n"},{"tags":["javascript","java","spring-boot","multipartform-data"],"comments":[{"owner":{"account_id":16341513,"reputation":209,"user_id":11802330,"display_name":"Eric"},"score":0,"creation_date":1689920039,"post_id":76732490,"comment_id":135283956,"body_markdown":"Check out this on [how to upload files](https://stackoverflow.com/questions/76655712/how-to-receive-an-entity-with-image-from-requestparam/76677954#76677954)","body":"Check out this on <a href=\"https://stackoverflow.com/questions/76655712/how-to-receive-an-entity-with-image-from-requestparam/76677954#76677954\">how to upload files</a>"},{"owner":{"account_id":26686661,"reputation":1,"user_id":20295883,"display_name":"Joel Garcia"},"score":0,"creation_date":1689962987,"post_id":76732490,"comment_id":135292065,"body_markdown":"Thanks Eric for the link","body":"Thanks Eric for the link"}],"owner":{"account_id":26686661,"reputation":1,"user_id":20295883,"display_name":"Joel Garcia"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689875334,"creation_date":1689875334,"question_id":76732490,"body_markdown":"I&#39;m trying to send a multipart file request that sends multiple pictures to a spring boot endpoint. below it is the controller endpoint:\r\n\r\n```\r\npublic ResponseEntity&lt;?&gt; uploadPropertyPictures(@RequestParam MultipartFile [] files, @RequestParam String propCode) throws IOException{\r\n\t\t\r\n\t\treturn ResponseEntity.status(200).body(service.savePropertyPicturesToDatabase(files, propCode));\r\n}\r\n```\r\n\r\nHowever, I am sending the following request in JavaScript\r\n\r\n```\r\npictureFormData.append(&#39;files&#39;, files)\r\npictureFormData.append(&#39;propCode&#39;, newProperty.propCode);\r\n    \r\nawait fetch(new URL(&quot;http://localhost:8083/property/upload&quot;), {\r\n        \r\n   method: &quot;POST&quot;,\r\n   body:pictureFormData\r\n})\r\n.then((response) =&gt; {\r\n\r\n   response.text();\r\n})\r\n.catch((error) =&gt; console.error(error));\r\n```\r\n\r\nAfter sending this request, I am getting an error 400, and it says, &#39;the request part &#39;files&#39; is not present&#39;. \\~ Please see attached pictures. Any help is greatly appreciated. Thank you!\r\n\r\n[Error 400](https://i.stack.imgur.com/VNSr0.png)\r\n\r\n[Request Payload](https://i.stack.imgur.com/Mqjuu.png)\r\n\r\nI tried multiple ways in uploading the files using different annotations such as @RequestPart, @RequestParam in the back-end. I also tried using XMLHttpRequest. Did some research, but to no avail. I lack understanding in front end, so I would need help. thank you","title":"Uploading Multiple Pictures using vanilla Javasript and Spring Boot","body":"<p>I'm trying to send a multipart file request that sends multiple pictures to a spring boot endpoint. below it is the controller endpoint:</p>\n<pre><code>public ResponseEntity&lt;?&gt; uploadPropertyPictures(@RequestParam MultipartFile [] files, @RequestParam String propCode) throws IOException{\n        \n        return ResponseEntity.status(200).body(service.savePropertyPicturesToDatabase(files, propCode));\n}\n</code></pre>\n<p>However, I am sending the following request in JavaScript</p>\n<pre><code>pictureFormData.append('files', files)\npictureFormData.append('propCode', newProperty.propCode);\n    \nawait fetch(new URL(&quot;http://localhost:8083/property/upload&quot;), {\n        \n   method: &quot;POST&quot;,\n   body:pictureFormData\n})\n.then((response) =&gt; {\n\n   response.text();\n})\n.catch((error) =&gt; console.error(error));\n</code></pre>\n<p>After sending this request, I am getting an error 400, and it says, 'the request part 'files' is not present'. ~ Please see attached pictures. Any help is greatly appreciated. Thank you!</p>\n<p><a href=\"https://i.stack.imgur.com/VNSr0.png\" rel=\"nofollow noreferrer\">Error 400</a></p>\n<p><a href=\"https://i.stack.imgur.com/Mqjuu.png\" rel=\"nofollow noreferrer\">Request Payload</a></p>\n<p>I tried multiple ways in uploading the files using different annotations such as @RequestPart, @RequestParam in the back-end. I also tried using XMLHttpRequest. Did some research, but to no avail. I lack understanding in front end, so I would need help. thank you</p>\n"},{"tags":["java","lombok"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1689862939,"post_id":76730822,"comment_id":135276013,"body_markdown":"Your code doesn&#39;t match your exception. That being said, your code appears not to be processed by lombok and thus no getter/setters/ have been generated.","body":"Your code doesn&#39;t match your exception. That being said, your code appears not to be processed by lombok and thus no getter/setters/ have been generated."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1689863067,"post_id":76730822,"comment_id":135276054,"body_markdown":"@M.Deinum it&#39;s a compiler error message, not an exception.","body":"@M.Deinum it&#39;s a compiler error message, not an exception."},{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":0,"creation_date":1689863279,"post_id":76730822,"comment_id":135276125,"body_markdown":"Well, `test.getName` is a field access, and it should be a method call (i.e. `test.getName()`, as muratcanyeldan already said).","body":"Well, <code>test.getName</code> is a field access, and it should be a method call (i.e. <code>test.getName()</code>, as muratcanyeldan already said)."},{"owner":{"account_id":25486631,"reputation":101,"user_id":19282140,"display_name":"java developer 111"},"score":0,"creation_date":1689875089,"post_id":76730822,"comment_id":135278752,"body_markdown":"in code i use test.getName() and its lombok issue","body":"in code i use test.getName() and its lombok issue"},{"owner":{"account_id":25486631,"reputation":101,"user_id":19282140,"display_name":"java developer 111"},"score":0,"creation_date":1689875223,"post_id":76730822,"comment_id":135278775,"body_markdown":"do you guys even read the error message? it said cannot find symbol\n16:25:46 [ERROR]   symbol:   method getName().....","body":"do you guys even read the error message? it said cannot find symbol 16:25:46 [ERROR]   symbol:   method getName()....."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1689877257,"post_id":76730822,"comment_id":135279210,"body_markdown":"Yes I read the message and I told you what the issue is. Lombok isn&#39;t processing your classes hence no getters/setters have been generated. Do you actually read the comments or only the first sentence?","body":"Yes I read the message and I told you what the issue is. Lombok isn&#39;t processing your classes hence no getters/setters have been generated. Do you actually read the comments or only the first sentence?"},{"owner":{"account_id":25486631,"reputation":101,"user_id":19282140,"display_name":"java developer 111"},"score":0,"creation_date":1689924769,"post_id":76730822,"comment_id":135284773,"body_markdown":"i ask why and how to fix it....i do not ask obviously things like- did getters generated...","body":"i ask why and how to fix it....i do not ask obviously things like- did getters generated..."}],"answers":[{"comments":[{"owner":{"account_id":25486631,"reputation":101,"user_id":19282140,"display_name":"java developer 111"},"score":0,"creation_date":1689875459,"post_id":76730878,"comment_id":135278828,"body_markdown":"did you read error message? it says cannot find symbol\n16:25:46 [ERROR]   symbol:   method getName(), if it was field access the error will be like this cannot find symbol\n16:25:46 [ERROR]   symbol:   field getName","body":"did you read error message? it says cannot find symbol 16:25:46 [ERROR]   symbol:   method getName(), if it was field access the error will be like this cannot find symbol 16:25:46 [ERROR]   symbol:   field getName"}],"tags":[],"owner":{"account_id":3888257,"reputation":111,"user_id":5532932,"display_name":"muratcanyeldan"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689863052,"creation_date":1689863052,"answer_id":76730878,"question_id":76730822,"body_markdown":"You should update your method to this\r\n\r\n\r\n```\r\npublic String testName(@NonNull Test test){\r\n\r\n    return test.getName();\r\n\r\n}\r\n```\r\n\r\nYou should add &#39;()&#39; for method call.","title":"@NonNull lombok failed to compile","body":"<p>You should update your method to this</p>\n<pre><code>public String testName(@NonNull Test test){\n\n    return test.getName();\n\n}\n</code></pre>\n<p>You should add '()' for method call.</p>\n"}],"owner":{"account_id":25486631,"reputation":101,"user_id":19282140,"display_name":"java developer 111"},"comment_count":7,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1689863332,"answer_count":1,"score":-3,"last_activity_date":1689874969,"creation_date":1689862666,"question_id":76730822,"body_markdown":"Here is simple dto\r\n\r\n    @Getter\r\n    @Setter\r\n    public class Test{\r\n    private Integer id;\r\n    private String name;\r\n    }\r\n\r\nhere is simple method \r\n\r\n    public String testName(@NonNull Test test){\r\n    return test.getName();\r\n    }\r\n\r\nwhen i tried to build project i got an error\r\n\r\n    16:25:46 [ERROR] /var/jenkins_home/TestMapper.java:[59,93] cannot find symbol\r\n    16:25:46 [ERROR]   symbol:   method getName()\r\n    16:25:46 [ERROR]   location: variable test of type @lombok.NonNull Test\r\n\r\n    var test = new Test();\r\n\r\ni will get same Error","title":"@NonNull lombok failed to compile","body":"<p>Here is simple dto</p>\n<pre><code>@Getter\n@Setter\npublic class Test{\nprivate Integer id;\nprivate String name;\n}\n</code></pre>\n<p>here is simple method</p>\n<pre><code>public String testName(@NonNull Test test){\nreturn test.getName();\n}\n</code></pre>\n<p>when i tried to build project i got an error</p>\n<pre><code>16:25:46 [ERROR] /var/jenkins_home/TestMapper.java:[59,93] cannot find symbol\n16:25:46 [ERROR]   symbol:   method getName()\n16:25:46 [ERROR]   location: variable test of type @lombok.NonNull Test\n\nvar test = new Test();\n</code></pre>\n<p>i will get same Error</p>\n"},{"tags":["java","generics"],"comments":[{"owner":{"account_id":9463219,"reputation":9357,"user_id":7036419,"display_name":"Maurice Perry"},"score":0,"creation_date":1689833231,"post_id":76721094,"comment_id":135269730,"body_markdown":"Because func1&#39;s type is not compatible with f2&#39;s","body":"Because func1&#39;s type is not compatible with f2&#39;s"},{"owner":{"account_id":2449170,"reputation":1315,"user_id":2135838,"display_name":"Sascha"},"score":1,"creation_date":1689844842,"post_id":76721094,"comment_id":135271986,"body_markdown":"`? super Number` means any class that is `Number` or a **super** class of it, i.e. `Object`. What you want ist `? extends Number` to instantiate **sub** classes, i.e. `Integer`.","body":"<code>? super Number</code> means any class that is <code>Number</code> or a <b>super</b> class of it, i.e. <code>Object</code>. What you want ist <code>? extends Number</code> to instantiate <b>sub</b> classes, i.e. <code>Integer</code>."},{"owner":{"account_id":2449170,"reputation":1315,"user_id":2135838,"display_name":"Sascha"},"score":0,"creation_date":1689845049,"post_id":76721094,"comment_id":135272021,"body_markdown":"Look at this question for more: https://stackoverflow.com/questions/4343202/difference-between-super-t-and-extends-t-in-java","body":"Look at this question for more: <a href=\"https://stackoverflow.com/questions/4343202/difference-between-super-t-and-extends-t-in-java\" title=\"difference between super t and extends t in java\">stackoverflow.com/questions/4343202/&hellip;</a>"},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1689879456,"post_id":76721094,"comment_id":135279626,"body_markdown":"@Sascha no: `Function&lt;? extends Number, ...&gt;` is a `Function` that accepts a specific but unknown subclass of `Number`. You wouldn&#39;t be able to pass anything into such a `Function` except for literal `null`.","body":"@Sascha no: <code>Function&lt;? extends Number, ...&gt;</code> is a <code>Function</code> that accepts a specific but unknown subclass of <code>Number</code>. You wouldn&#39;t be able to pass anything into such a <code>Function</code> except for literal <code>null</code>."},{"owner":{"account_id":2449170,"reputation":1315,"user_id":2135838,"display_name":"Sascha"},"score":0,"creation_date":1690185714,"post_id":76721094,"comment_id":135312663,"body_markdown":"@AndyTurner I misread the question.","body":"@AndyTurner I misread the question."}],"answers":[{"comments":[{"owner":{"account_id":2792262,"reputation":163877,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":1,"creation_date":1689875684,"post_id":76732438,"comment_id":135278875,"body_markdown":"I thought I understood type inference and type parameter bounds pretty well, but I guess I never before saw a lower bound factor into type inference in this way.  It feels wrong that the inferred type is not `Function&lt;Object, String&gt;`, leading to an error on account of `Object` not having a `shortValue()` method.","body":"I thought I understood type inference and type parameter bounds pretty well, but I guess I never before saw a lower bound factor into type inference in this way.  It feels wrong that the inferred type is not <code>Function&lt;Object, String&gt;</code>, leading to an error on account of <code>Object</code> not having a <code>shortValue()</code> method."},{"owner":{"account_id":3739057,"reputation":3667,"user_id":3109248,"display_name":"Khanna111"},"score":0,"creation_date":1689921275,"post_id":76732438,"comment_id":135284153,"body_markdown":"That was my confusion also","body":"That was my confusion also"}],"tags":[],"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689874910,"creation_date":1689874910,"answer_id":76732438,"question_id":76721094,"body_markdown":"&gt;     Function&lt;? super Number, ? extends String&gt; func1 = obj -&gt; String.valueOf(obj.shortValue());\r\n&gt; 1. Why is creating func1 not an error as we are using Number.shortValue() but defined a lower bound as a Number?\r\n\r\nThe right-hand side of this assignment is a `Function&lt;Number, String&gt;`. You&#39;re allowed to assign that to a variable of type `Function&lt;? super Number, ? extends String&gt;` because that&#39;s a more general type; but you won&#39;t be able to pass anything into it which isn&#39;t a `Number` (or literal `null`), and so anything you are allowed to pass to it will have a `shortValue()` method.\r\n\r\n`Function&lt;? super Number, ...&gt;` means &quot;a Function that it&#39;s safe to pass a `Number` to; it&#39;s _not_ &quot;a Function that you can pass any superclass of `Number` to&quot;.\r\n\r\n&gt;     Function&lt;Integer, String&gt; f2 = func1;\r\n&gt; 2. If func1 can be created this way then why cannot it be assigned to f2?\r\n\r\nAs I stated above, a `Function&lt;Number, String&gt;` is a `Function&lt;? super Number, ? extends String&gt;`; the converse is not true.\r\n\r\nIt&#39;s the same as &quot;all apples are fruit; not all fruit are apples&quot;.","title":"Java Generics lower bound and assigning a function to a subtype","body":"<blockquote>\n<pre><code>Function&lt;? super Number, ? extends String&gt; func1 = obj -&gt; String.valueOf(obj.shortValue());\n</code></pre>\n<ol>\n<li>Why is creating func1 not an error as we are using Number.shortValue() but defined a lower bound as a Number?</li>\n</ol>\n</blockquote>\n<p>The right-hand side of this assignment is a <code>Function&lt;Number, String&gt;</code>. You're allowed to assign that to a variable of type <code>Function&lt;? super Number, ? extends String&gt;</code> because that's a more general type; but you won't be able to pass anything into it which isn't a <code>Number</code> (or literal <code>null</code>), and so anything you are allowed to pass to it will have a <code>shortValue()</code> method.</p>\n<p><code>Function&lt;? super Number, ...&gt;</code> means &quot;a Function that it's safe to pass a <code>Number</code> to; it's <em>not</em> &quot;a Function that you can pass any superclass of <code>Number</code> to&quot;.</p>\n<blockquote>\n<pre><code>Function&lt;Integer, String&gt; f2 = func1;\n</code></pre>\n<ol start=\"2\">\n<li>If func1 can be created this way then why cannot it be assigned to f2?</li>\n</ol>\n</blockquote>\n<p>As I stated above, a <code>Function&lt;Number, String&gt;</code> is a <code>Function&lt;? super Number, ? extends String&gt;</code>; the converse is not true.</p>\n<p>It's the same as &quot;all apples are fruit; not all fruit are apples&quot;.</p>\n"}],"owner":{"account_id":3739057,"reputation":3667,"user_id":3109248,"display_name":"Khanna111"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76732438,"answer_count":1,"score":0,"last_activity_date":1689874910,"creation_date":1689768137,"question_id":76721094,"body_markdown":"\r\nConfused on this one (The error is on assigning `f2 = func1`). \r\n\r\n1. Why is creating func1 not an error as we are using Number.shortValue() but defined a lower bound as a Number?\r\n2. If `func1` can be created this way then why cannot it be assigned to `f2`?\r\n\r\nThanks for your help.\r\n\r\n\r\n        Function&lt;? super Number, ? extends String&gt; func1 = obj -&gt; String.valueOf(obj.shortValue());\r\n        Function&lt;Integer, String&gt; f2 = func1;\r\n\r\nThe error is:\r\n\r\n    Incompatible types. Found: &#39;java.util.function.Function&lt;capture&lt;? super java.lang.Number&gt;,capture&lt;? extends java.lang.String&gt;&gt;&#39;, required: &#39;java.util.function.Function&lt;java.lang.Integer,java.lang.String&gt;&#39;","title":"Java Generics lower bound and assigning a function to a subtype","body":"<p>Confused on this one (The error is on assigning <code>f2 = func1</code>).</p>\n<ol>\n<li>Why is creating func1 not an error as we are using Number.shortValue() but defined a lower bound as a Number?</li>\n<li>If <code>func1</code> can be created this way then why cannot it be assigned to <code>f2</code>?</li>\n</ol>\n<p>Thanks for your help.</p>\n<pre><code>    Function&lt;? super Number, ? extends String&gt; func1 = obj -&gt; String.valueOf(obj.shortValue());\n    Function&lt;Integer, String&gt; f2 = func1;\n</code></pre>\n<p>The error is:</p>\n<pre><code>Incompatible types. Found: 'java.util.function.Function&lt;capture&lt;? super java.lang.Number&gt;,capture&lt;? extends java.lang.String&gt;&gt;', required: 'java.util.function.Function&lt;java.lang.Integer,java.lang.String&gt;'\n</code></pre>\n"},{"tags":["java","spring-data-jpa"],"owner":{"account_id":3430916,"reputation":3799,"user_id":3059385,"accept_rate":40,"display_name":"Christopher Schneider"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689874731,"creation_date":1689874731,"question_id":76732410,"body_markdown":"I&#39;m looking to customize `@Query` with filters. A simple example (not real world):\r\n\r\n    @Query(&quot;select c from Customer where id = ?1&quot;) \r\n    Optional&lt;Customer&gt; findCustomerById(String id, @Nullable Context context)\r\n\r\nThis is a multi-tenant environment. Depending on various factors (the entity itself, information in the context object) additional filtering may or may not be applied. The end result would be a query like this:\r\n\r\n`select c from Customer where id = &#39;id&#39; and tenantId = &#39;1&#39; and ...`\r\n\r\nThis is an existing solution with hundreds of entities and many repositories. Modifying existing repositories is not an option, so filtering mechanisms like `Specification` are out. This should be transparent to the user, even if this is achieved with a new custom annotation (i.e. `@CustomQuery`). \r\n\r\nNote that I already have a solution for named method generated queries, so `findById(String id, Context context)` works. More complex queries are currently managed with criteria builders and various helper classes to apply appropriate filtering, but being able to use `@Query` would at least be a nice option to have.\r\n\r\nSo is this something that is possible? ","title":"Is it possible to enhance the query defined in a Spring Data @Query annotation?","body":"<p>I'm looking to customize <code>@Query</code> with filters. A simple example (not real world):</p>\n<pre><code>@Query(&quot;select c from Customer where id = ?1&quot;) \nOptional&lt;Customer&gt; findCustomerById(String id, @Nullable Context context)\n</code></pre>\n<p>This is a multi-tenant environment. Depending on various factors (the entity itself, information in the context object) additional filtering may or may not be applied. The end result would be a query like this:</p>\n<p><code>select c from Customer where id = 'id' and tenantId = '1' and ...</code></p>\n<p>This is an existing solution with hundreds of entities and many repositories. Modifying existing repositories is not an option, so filtering mechanisms like <code>Specification</code> are out. This should be transparent to the user, even if this is achieved with a new custom annotation (i.e. <code>@CustomQuery</code>).</p>\n<p>Note that I already have a solution for named method generated queries, so <code>findById(String id, Context context)</code> works. More complex queries are currently managed with criteria builders and various helper classes to apply appropriate filtering, but being able to use <code>@Query</code> would at least be a nice option to have.</p>\n<p>So is this something that is possible?</p>\n"},{"tags":["java","server","minecraft"],"answers":[{"comments":[{"owner":{"account_id":16563652,"reputation":473,"user_id":11968910,"display_name":"Borisonekenobi"},"score":0,"creation_date":1596551791,"post_id":63249136,"comment_id":111843757,"body_markdown":"Just tested it, and it works, thank you!","body":"Just tested it, and it works, thank you!"}],"tags":[],"owner":{"display_name":"user13335474"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1596551534,"creation_date":1596551534,"answer_id":63249136,"question_id":63249089,"body_markdown":"Open the `server.properties` file and set `use-native-transport` to `false`\r\n\r\nSource: https://www.spigotmc.org/threads/unable-to-access-address-of-buffer.311602/#post-2948116","title":"1.11.2 Minecraft server crashes when player tries to join/ping server","body":"<p>Open the <code>server.properties</code> file and set <code>use-native-transport</code> to <code>false</code></p>\n<p>Source: <a href=\"https://www.spigotmc.org/threads/unable-to-access-address-of-buffer.311602/#post-2948116\" rel=\"nofollow noreferrer\">https://www.spigotmc.org/threads/unable-to-access-address-of-buffer.311602/#post-2948116</a></p>\n"}],"owner":{"account_id":16563652,"reputation":473,"user_id":11968910,"display_name":"Borisonekenobi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3032,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1596588905,"accepted_answer_id":63249136,"answer_count":1,"score":1,"last_activity_date":1689874355,"creation_date":1596551413,"question_id":63249089,"body_markdown":"I&#39;m trying to set up a 1.11.2 Minecraft server on a local machine, but it crashes every time a player tries to join or ping the server. I&#39;ve also noticed that when it starts, there are a couple of warnings that I&#39;ve never seen before and don&#39;t really understand\r\n\r\nStartup text:\r\n```java\r\n[10:24:53] [Server thread/INFO]: Starting minecraft server version 1.11.2\r\n[10:24:53] [Server thread/INFO]: Loading properties\r\n[10:24:53] [Server thread/INFO]: Default game type: SURVIVAL\r\n[10:24:53] [Server thread/INFO]: Generating keypair\r\n[10:24:54] [Server thread/INFO]: Starting Minecraft server on *:25565\r\nWARNING: An illegal reflective access operation has occurred\r\nWARNING: Illegal reflective access by io.netty.util.internal.PlatformDependent0 (file:/home/admin/Documents/Minecraft_Servers/captiveMinecraftII/server.jar) to field java.nio.Buffer.address\r\nWARNING: Please consider reporting this to the maintainers of io.netty.util.internal.PlatformDependent0\r\nWARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations\r\nWARNING: All illegal access operations will be denied in a future release\r\nAug. 04, 2020 10:24:54 A.M. io.netty.util.internal.PlatformDependent &lt;clinit&gt;\r\nINFO: Your platform does not provide complete low-level API for accessing direct buffers reliably. Unless explicitly requested, heap buffer will always be preferred to avoid potential system unstability.\r\n[10:24:54] [Server thread/INFO]: Using epoll channel type\r\n[10:24:54] [Server thread/INFO]: Preparing level &quot;world&quot;\r\n[10:24:54] [Server thread/INFO]: Preparing start region for level 0\r\n[10:24:55] [Server thread/INFO]: Preparing spawn area: 31%\r\n[10:24:56] [Server thread/INFO]: Done (2.004s)! For help, type &quot;help&quot; or &quot;?&quot;\r\n```\r\n\r\nThis is the error when a player tries to join:\r\n```java\r\nAug. 04, 2020 10:26:20 A.M. io.netty.channel.DefaultChannelPipeline$TailContext exceptionCaught\r\nWARNING: An exceptionCaught() event was fired, and it reached at the tail of the pipeline. It usually means the last handler in the pipeline did not handle the exception.\r\njava.lang.RuntimeException: Unable to access address of buffer\r\n        at io.netty.channel.epoll.Native.read(Native Method)\r\n        at io.netty.channel.epoll.EpollSocketChannel$EpollSocketUnsafe.doReadBytes(EpollSocketChannel.java:678)\r\n        at io.netty.channel.epoll.EpollSocketChannel$EpollSocketUnsafe.epollInReady(EpollSocketChannel.java:714)\r\n        at io.netty.channel.epoll.EpollSocketChannel$EpollSocketUnsafe$3.run(EpollSocketChannel.java:755)\r\n        at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:380)\r\n        at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:268)\r\n        at io.netty.util.concurrent.SingleThreadEventExecutor$2.run(SingleThreadEventExecutor.java:116)\r\n        at java.base/java.lang.Thread.run(Thread.java:834)\r\n```","title":"1.11.2 Minecraft server crashes when player tries to join/ping server","body":"<p>I'm trying to set up a 1.11.2 Minecraft server on a local machine, but it crashes every time a player tries to join or ping the server. I've also noticed that when it starts, there are a couple of warnings that I've never seen before and don't really understand</p>\n<p>Startup text:</p>\n<pre class=\"lang-java prettyprint-override\"><code>[10:24:53] [Server thread/INFO]: Starting minecraft server version 1.11.2\n[10:24:53] [Server thread/INFO]: Loading properties\n[10:24:53] [Server thread/INFO]: Default game type: SURVIVAL\n[10:24:53] [Server thread/INFO]: Generating keypair\n[10:24:54] [Server thread/INFO]: Starting Minecraft server on *:25565\nWARNING: An illegal reflective access operation has occurred\nWARNING: Illegal reflective access by io.netty.util.internal.PlatformDependent0 (file:/home/admin/Documents/Minecraft_Servers/captiveMinecraftII/server.jar) to field java.nio.Buffer.address\nWARNING: Please consider reporting this to the maintainers of io.netty.util.internal.PlatformDependent0\nWARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations\nWARNING: All illegal access operations will be denied in a future release\nAug. 04, 2020 10:24:54 A.M. io.netty.util.internal.PlatformDependent &lt;clinit&gt;\nINFO: Your platform does not provide complete low-level API for accessing direct buffers reliably. Unless explicitly requested, heap buffer will always be preferred to avoid potential system unstability.\n[10:24:54] [Server thread/INFO]: Using epoll channel type\n[10:24:54] [Server thread/INFO]: Preparing level &quot;world&quot;\n[10:24:54] [Server thread/INFO]: Preparing start region for level 0\n[10:24:55] [Server thread/INFO]: Preparing spawn area: 31%\n[10:24:56] [Server thread/INFO]: Done (2.004s)! For help, type &quot;help&quot; or &quot;?&quot;\n</code></pre>\n<p>This is the error when a player tries to join:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Aug. 04, 2020 10:26:20 A.M. io.netty.channel.DefaultChannelPipeline$TailContext exceptionCaught\nWARNING: An exceptionCaught() event was fired, and it reached at the tail of the pipeline. It usually means the last handler in the pipeline did not handle the exception.\njava.lang.RuntimeException: Unable to access address of buffer\n        at io.netty.channel.epoll.Native.read(Native Method)\n        at io.netty.channel.epoll.EpollSocketChannel$EpollSocketUnsafe.doReadBytes(EpollSocketChannel.java:678)\n        at io.netty.channel.epoll.EpollSocketChannel$EpollSocketUnsafe.epollInReady(EpollSocketChannel.java:714)\n        at io.netty.channel.epoll.EpollSocketChannel$EpollSocketUnsafe$3.run(EpollSocketChannel.java:755)\n        at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:380)\n        at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:268)\n        at io.netty.util.concurrent.SingleThreadEventExecutor$2.run(SingleThreadEventExecutor.java:116)\n        at java.base/java.lang.Thread.run(Thread.java:834)\n</code></pre>\n"},{"tags":["java","spring","java-ee-6","spring-annotations"],"owner":{"account_id":25981203,"reputation":21,"user_id":19694903,"display_name":"Vaibhav More"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689873079,"creation_date":1689863226,"question_id":76730906,"body_markdown":"**I&#39;m having issue with the annotation @PostConstruct and @PreDestroy** \r\n\r\nHow can I solve this issue. I tried different approach but it&#39;s still not working\r\n\r\nHere is the file ciconfig.xml\r\n\r\n\t\t&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\t\t\r\n\t\t&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n\t\txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:context=&quot; http://www.springframework.org/schema/context&quot;\r\n\t\txmlns:p=&quot;http://www.springframework.org/schema/p&quot;\r\n\t\txsi:schemaLocation=&quot;http://www.springframework.org/schema/beans\r\n\t\thttp://www.springframework.org/schema/beans/spring-beans.xsd\r\n\t\thttp://www.springframework.org/schema/context\r\n\t\thttp://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;\r\n\t\t\r\n\t\t\t&lt;context:annotation-config /&gt;\r\n\t\t\r\n\t\t\t&lt;!-- \r\n\t\t\t&lt;bean class=&quot;com.springcore.ci.Person&quot; name=&quot;person&quot;&gt;\r\n\t\t\t\t&lt;constructor-arg value=&quot;Vaibhav More&quot;&gt;&lt;/constructor-arg&gt;\r\n\t\t\t\t&lt;constructor-arg value=&quot;25&quot; type=&quot;int&quot;&gt;&lt;/constructor-arg&gt;\r\n\t\t\t&lt;/bean&gt;\r\n\t\t\t --&gt;\r\n\t\t\t&lt;bean class=&quot;com.springcore.ci.Person&quot; name=&quot;person&quot;&gt;\r\n\t\t\t\t&lt;property name=&quot;name&quot; value=&quot;Vaibhav&quot;&gt;&lt;/property&gt;\r\n\t\t\t\t&lt;property name=&quot;Id&quot; value=&quot;25&quot;&gt;&lt;/property&gt;\r\n\t\t\t&lt;/bean&gt;\r\n\t\t\t\r\n\t\t\t&lt;bean class=&quot;com.springcore.ci.Person&quot; name=&quot;p&quot; init-method=&quot;start&quot; destroy-method=&quot;end&quot;&gt;\r\n\t\t\t\t&lt;property name=&quot;name&quot; value=&quot;Sachin Tendulkar&quot;&gt;&lt;/property&gt;\r\n\t\t\t\t&lt;property name=&quot;Id&quot; value=&quot;26&quot;&gt;&lt;/property&gt;\r\n\t\t\t&lt;/bean&gt;\r\n\t\t\t\r\n\t\t\t&lt;!-- Activity LifeCycle Init Destroy methods are used to two activity life cycles --&gt;\r\n\t\t\t\r\n\t\t&lt;/beans&gt;\r\n\r\n\r\n\r\n\r\nAnd pom.xml file\r\n\r\n\r\n\r\n\r\n\t\t&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\t\t  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t\t  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t\t\r\n\t\t  &lt;groupId&gt;com.springcore&lt;/groupId&gt;\r\n\t\t  &lt;artifactId&gt;springcore&lt;/artifactId&gt;\r\n\t\t  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t\t  &lt;packaging&gt;jar&lt;/packaging&gt;\r\n\t\t\r\n\t\t  &lt;name&gt;springcore&lt;/name&gt;\r\n\t\t  &lt;url&gt;http://maven.apache.org&lt;/url&gt;\r\n\t\t\r\n\t\t  &lt;properties&gt;\r\n\t\t    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n\t\t  &lt;/properties&gt;\r\n\t\t\r\n\t\t  &lt;dependencies&gt;\r\n\t\t\t\r\n\t\t\t&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-core --&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t\t\t    &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\r\n\t\t\t    &lt;version&gt;5.2.3.RELEASE&lt;/version&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t\r\n\t\t\t&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-context --&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t\t\t    &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\r\n\t\t\t    &lt;version&gt;5.2.3.RELEASE&lt;/version&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;javax.annotation&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;javax.annotation-api&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;1.3.2&lt;/version&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t\r\n\t\t    &lt;dependency&gt;\r\n\t\t      &lt;groupId&gt;junit&lt;/groupId&gt;\r\n\t\t      &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n\t\t      &lt;version&gt;3.8.1&lt;/version&gt;\r\n\t\t      &lt;scope&gt;test&lt;/scope&gt;\r\n\t\t    &lt;/dependency&gt;\r\n\t\t  &lt;/dependencies&gt;\r\n\t\t&lt;/project&gt;\r\n\r\n\r\nIt is showing me following error:\r\n\r\n        Exception in thread &quot;main&quot; org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 1 in XML document from class path resource [com/springcore/ci/ciconfig.xml] is invalid; nested exception is org.xml.sax.SAXParseException; lineNumber: 1; columnNumber: 8; The processing instruction target matching &quot;[xX][mM][lL]&quot; is not allowed.\r\n\r\n\r\n**How can I solve this annotation error.**\r\nI have added dependencies but it&#39;s still not working.\r\n","title":"Issue in Maven Project: The matching wildcard is strict, but no declaration can be found for element &#39;context:annotation-config&#39;","body":"<p><strong>I'm having issue with the annotation @PostConstruct and @PreDestroy</strong></p>\n<p>How can I solve this issue. I tried different approach but it's still not working</p>\n<p>Here is the file ciconfig.xml</p>\n<pre><code>    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n    \n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:context=&quot; http://www.springframework.org/schema/context&quot;\n    xmlns:p=&quot;http://www.springframework.org/schema/p&quot;\n    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans\n    http://www.springframework.org/schema/beans/spring-beans.xsd\n    http://www.springframework.org/schema/context\n    http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;\n    \n        &lt;context:annotation-config /&gt;\n    \n        &lt;!-- \n        &lt;bean class=&quot;com.springcore.ci.Person&quot; name=&quot;person&quot;&gt;\n            &lt;constructor-arg value=&quot;Vaibhav More&quot;&gt;&lt;/constructor-arg&gt;\n            &lt;constructor-arg value=&quot;25&quot; type=&quot;int&quot;&gt;&lt;/constructor-arg&gt;\n        &lt;/bean&gt;\n         --&gt;\n        &lt;bean class=&quot;com.springcore.ci.Person&quot; name=&quot;person&quot;&gt;\n            &lt;property name=&quot;name&quot; value=&quot;Vaibhav&quot;&gt;&lt;/property&gt;\n            &lt;property name=&quot;Id&quot; value=&quot;25&quot;&gt;&lt;/property&gt;\n        &lt;/bean&gt;\n        \n        &lt;bean class=&quot;com.springcore.ci.Person&quot; name=&quot;p&quot; init-method=&quot;start&quot; destroy-method=&quot;end&quot;&gt;\n            &lt;property name=&quot;name&quot; value=&quot;Sachin Tendulkar&quot;&gt;&lt;/property&gt;\n            &lt;property name=&quot;Id&quot; value=&quot;26&quot;&gt;&lt;/property&gt;\n        &lt;/bean&gt;\n        \n        &lt;!-- Activity LifeCycle Init Destroy methods are used to two activity life cycles --&gt;\n        \n    &lt;/beans&gt;\n</code></pre>\n<p>And pom.xml file</p>\n<pre><code>    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n      xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n      &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    \n      &lt;groupId&gt;com.springcore&lt;/groupId&gt;\n      &lt;artifactId&gt;springcore&lt;/artifactId&gt;\n      &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n      &lt;packaging&gt;jar&lt;/packaging&gt;\n    \n      &lt;name&gt;springcore&lt;/name&gt;\n      &lt;url&gt;http://maven.apache.org&lt;/url&gt;\n    \n      &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n      &lt;/properties&gt;\n    \n      &lt;dependencies&gt;\n        \n        &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-core --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n            &lt;version&gt;5.2.3.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n    \n        &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-context --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n            &lt;version&gt;5.2.3.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n    \n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.annotation&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.annotation-api&lt;/artifactId&gt;\n            &lt;version&gt;1.3.2&lt;/version&gt;\n        &lt;/dependency&gt;\n    \n        &lt;dependency&gt;\n          &lt;groupId&gt;junit&lt;/groupId&gt;\n          &lt;artifactId&gt;junit&lt;/artifactId&gt;\n          &lt;version&gt;3.8.1&lt;/version&gt;\n          &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n      &lt;/dependencies&gt;\n    &lt;/project&gt;\n</code></pre>\n<p>It is showing me following error:</p>\n<pre><code>    Exception in thread &quot;main&quot; org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 1 in XML document from class path resource [com/springcore/ci/ciconfig.xml] is invalid; nested exception is org.xml.sax.SAXParseException; lineNumber: 1; columnNumber: 8; The processing instruction target matching &quot;[xX][mM][lL]&quot; is not allowed.\n</code></pre>\n<p><strong>How can I solve this annotation error.</strong>\nI have added dependencies but it's still not working.</p>\n"},{"tags":["java","android","notificationmanager"],"answers":[{"comments":[{"owner":{"account_id":447369,"reputation":10947,"user_id":840960,"accept_rate":100,"display_name":"Shlublu"},"score":0,"creation_date":1624981221,"post_id":6843765,"comment_id":120503101,"body_markdown":"I see that is answer is currently being downvoted while it wasn&#39;t before. As it has been written in 2011, I suspect that some API updates make it deprecated though I didn&#39;t have time to check.","body":"I see that is answer is currently being downvoted while it wasn&#39;t before. As it has been written in 2011, I suspect that some API updates make it deprecated though I didn&#39;t have time to check."}],"tags":[],"owner":{"account_id":447369,"reputation":10947,"user_id":840960,"accept_rate":100,"display_name":"Shlublu"},"comment_count":1,"down_vote_count":2,"up_vote_count":12,"is_accepted":false,"score":10,"last_activity_date":1311767160,"creation_date":1311767160,"answer_id":6843765,"question_id":6843736,"body_markdown":"This should be `Context.NOTIFICATION_SERVICE`:\r\n\r\n    NotificationManager nm = (NotificationManager)getSystemService(Context.NOTIFICATION_SERVICE);","title":"Cannot find symbol NOTIFICATION_SERVICE?","body":"<p>This should be <code>Context.NOTIFICATION_SERVICE</code>:</p>\n\n<pre><code>NotificationManager nm = (NotificationManager)getSystemService(Context.NOTIFICATION_SERVICE);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":447369,"reputation":10947,"user_id":840960,"accept_rate":100,"display_name":"Shlublu"},"score":0,"creation_date":1311769269,"post_id":6843888,"comment_id":8135871,"body_markdown":"NOTIFICATION_SERVICE is a `public static final String`. You do not need any instance of `Context` to use it.","body":"NOTIFICATION_SERVICE is a <code>public static final String</code>. You do not need any instance of <code>Context</code> to use it."},{"owner":{"account_id":246726,"reputation":5010,"user_id":521015,"accept_rate":68,"display_name":"Shah"},"score":0,"creation_date":1311920095,"post_id":6843888,"comment_id":8172036,"body_markdown":"it can be accessed in both ways :) If  you are displaying the notification in Any web Service not in activity then you dont have the Context with you :)","body":"it can be accessed in both ways :) If  you are displaying the notification in Any web Service not in activity then you dont have the Context with you :)"},{"owner":{"account_id":447369,"reputation":10947,"user_id":840960,"accept_rate":100,"display_name":"Shlublu"},"score":0,"creation_date":1311920771,"post_id":6843888,"comment_id":8172147,"body_markdown":"You don&#39;t need any instance of Context. You statically call it from the class Context.","body":"You don&#39;t need any instance of Context. You statically call it from the class Context."}],"tags":[],"owner":{"account_id":246726,"reputation":5010,"user_id":521015,"accept_rate":68,"display_name":"Shah"},"comment_count":3,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1311767831,"creation_date":1311767831,"answer_id":6843888,"question_id":6843736,"body_markdown":"You should better try this\r\n\r\n     NotificationManager nm = (NotificationManager)getSystemService(getApplicationContext().NOTIFICATION_SERVICE);","title":"Cannot find symbol NOTIFICATION_SERVICE?","body":"<p>You should better try this</p>\n\n<pre><code> NotificationManager nm = (NotificationManager)getSystemService(getApplicationContext().NOTIFICATION_SERVICE);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":43598,"reputation":503,"user_id":127528,"display_name":"mcchots"},"comment_count":0,"down_vote_count":1,"up_vote_count":30,"is_accepted":false,"score":29,"last_activity_date":1330595689,"creation_date":1330595689,"answer_id":9514002,"question_id":6843736,"body_markdown":"I found calling this way works:\r\n\r\n    NotificationManager nm = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);\r\n","title":"Cannot find symbol NOTIFICATION_SERVICE?","body":"<p>I found calling this way works:</p>\n\n<pre><code>NotificationManager nm = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2649974,"reputation":2030,"user_id":2291915,"accept_rate":92,"display_name":"buczek"},"score":0,"creation_date":1476972610,"post_id":40156223,"comment_id":67582325,"body_markdown":"In addition to your code please add some text to explain why your answer works or how it is different from previous answers.","body":"In addition to your code please add some text to explain why your answer works or how it is different from previous answers."}],"tags":[],"owner":{"account_id":2521649,"reputation":35,"user_id":2191892,"display_name":"Lu&#237;s Ledebour"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1477023021,"creation_date":1476971010,"answer_id":40156223,"question_id":6843736,"body_markdown":"    NotificationManager mNotifyMgr = (NotificationManager)context.getSystemService(Context.NOTIFICATION_SERVICE);","title":"Cannot find symbol NOTIFICATION_SERVICE?","body":"<pre><code>NotificationManager mNotifyMgr = (NotificationManager)context.getSystemService(Context.NOTIFICATION_SERVICE);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":22083723,"reputation":124,"user_id":16342910,"display_name":"Prasanna Kumar"},"score":0,"creation_date":1670998817,"post_id":72144779,"comment_id":131999689,"body_markdown":"this solution has helped me. \nI needed to add the context.","body":"this solution has helped me.  I needed to add the context."}],"tags":[],"owner":{"account_id":24762965,"reputation":21,"user_id":18737647,"display_name":"RustinH"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1651854959,"creation_date":1651854959,"answer_id":72144779,"question_id":6843736,"body_markdown":"For those using Kotlin, \r\nthe following line performs the same functionality as the other answers here.\r\n\r\n    \r\n    val nm = context?.getSystemService(NOTIFICATION_SERVICE) as NotificationManager","title":"Cannot find symbol NOTIFICATION_SERVICE?","body":"<p>For those using Kotlin,\nthe following line performs the same functionality as the other answers here.</p>\n<pre><code>val nm = context?.getSystemService(NOTIFICATION_SERVICE) as NotificationManager\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27468279,"reputation":1,"user_id":20957644,"display_name":"Pratik Zagade"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689872695,"creation_date":1689872695,"answer_id":76732175,"question_id":6843736,"body_markdown":"This should be\r\n\r\n    notificationManager = (NotificationManager) getSystemService(android.content.Context.NOTIFICATION_SERVICE);","title":"Cannot find symbol NOTIFICATION_SERVICE?","body":"<p>This should be</p>\n<pre><code>notificationManager = (NotificationManager) getSystemService(android.content.Context.NOTIFICATION_SERVICE);\n</code></pre>\n"}],"owner":{"account_id":769110,"reputation":453,"user_id":805909,"accept_rate":60,"display_name":"mrburns"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16037,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"answer_count":6,"score":13,"last_activity_date":1689872695,"creation_date":1311767018,"question_id":6843736,"body_markdown":"    package com.test.app;\r\n    import android.app.Notification;\r\n    import android.app.NotificationManager;\r\n    import android.app.PendingIntent;\r\n    import android.content.BroadcastReceiver;\r\n    import android.content.Context;\r\n    import android.content.Intent;\r\n    \r\n    public class runOnBoot extends BroadcastReceiver{\r\n    \r\n       @Override\r\n       public void onReceive(Context context, Intent intent) {\r\n    \r\n              NotificationManager nm = (NotificationManager)getSystemService(NOTIFICATION_SERVICE);\r\n       }\r\n    }\r\n\r\nWhen I try to build the package, it says\r\n\r\n\r\n    compile:\r\n        [javac] Compiling 2 source files to /home/mrburns/Desktop/myapp/bin/classes\r\n        [javac] /home/mrburns/Desktop/myapp/src/com/test/app/runOnBoot.java:14: cannot find symbol\r\n        [javac] symbol  : variable NOTIFICATION_SERVICE\r\n        [javac] location: class runOnBoot\r\n        [javac]           NotificationManager nm = (NotificationManager)getSystemService(NOTIFICATION_SERVICE);\r\n        [javac]                                                                                           ^\r\n        [javac] 1 error\r\n    \r\n    BUILD FAILED\r\n\r\n","title":"Cannot find symbol NOTIFICATION_SERVICE?","body":"<pre><code>package com.test.app;\nimport android.app.Notification;\nimport android.app.NotificationManager;\nimport android.app.PendingIntent;\nimport android.content.BroadcastReceiver;\nimport android.content.Context;\nimport android.content.Intent;\n\npublic class runOnBoot extends BroadcastReceiver{\n\n   @Override\n   public void onReceive(Context context, Intent intent) {\n\n          NotificationManager nm = (NotificationManager)getSystemService(NOTIFICATION_SERVICE);\n   }\n}\n</code></pre>\n\n<p>When I try to build the package, it says</p>\n\n<pre><code>compile:\n    [javac] Compiling 2 source files to /home/mrburns/Desktop/myapp/bin/classes\n    [javac] /home/mrburns/Desktop/myapp/src/com/test/app/runOnBoot.java:14: cannot find symbol\n    [javac] symbol  : variable NOTIFICATION_SERVICE\n    [javac] location: class runOnBoot\n    [javac]           NotificationManager nm = (NotificationManager)getSystemService(NOTIFICATION_SERVICE);\n    [javac]                                                                                           ^\n    [javac] 1 error\n\nBUILD FAILED\n</code></pre>\n"},{"tags":["java","xml","swing","xstream"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689852297,"post_id":76729245,"comment_id":135273409,"body_markdown":"*only for once* What do you mean by that?","body":"<i>only for once</i> What do you mean by that?"},{"owner":{"account_id":8656958,"reputation":27,"user_id":6480895,"display_name":"hemant "},"score":0,"creation_date":1689852429,"post_id":76729245,"comment_id":135273433,"body_markdown":"mean I give a software update where I add extra field in java object . so at the first time it assign the value true but after that it assign the value which is assign by user.","body":"mean I give a software update where I add extra field in java object . so at the first time it assign the value true but after that it assign the value which is assign by user."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689852481,"post_id":76729245,"comment_id":135273444,"body_markdown":"Try adding ctor `public Customer() { super(); isMale = true; }`","body":"Try adding ctor <code>public Customer() { super(); isMale = true; }</code>"},{"owner":{"account_id":8656958,"reputation":27,"user_id":6480895,"display_name":"hemant "},"score":0,"creation_date":1689852821,"post_id":76729245,"comment_id":135273506,"body_markdown":"still assigned false","body":"still assigned false"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689853704,"post_id":76729245,"comment_id":135273713,"body_markdown":"Well we need to see the missing code","body":"Well we need to see the missing code"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689861963,"post_id":76729245,"comment_id":135275753,"body_markdown":"My suggestion *will* work if you use `XStream xStream = new XStream(new PureJavaReflectionProvider());\n` (`import com.thoughtworks.xstream.converters.reflection.PureJavaReflectionProvider;`)","body":"My suggestion <i>will</i> work if you use <code>XStream xStream = new XStream(new PureJavaReflectionProvider()); </code> (<code>import com.thoughtworks.xstream.converters.reflection.PureJavaRefle&zwnj;&#8203;ctionProvider;</code>)"},{"owner":{"account_id":8656958,"reputation":27,"user_id":6480895,"display_name":"hemant "},"score":0,"creation_date":1689865475,"post_id":76729245,"comment_id":135276691,"body_markdown":"yes its works  thanks you very much @g00se","body":"yes its works  thanks you very much @g00se"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689872511,"post_id":76729245,"comment_id":135278254,"body_markdown":"I&#39;ll post it as an answer for you to accept","body":"I&#39;ll post it as an answer for you to accept"}],"answers":[{"tags":[],"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689872668,"creation_date":1689872668,"answer_id":76732166,"question_id":76729245,"body_markdown":"Try adding ctor\r\n```\r\npublic Customer() {\r\n  super();\r\n  isMale = true;\r\n}\r\n```\r\nYou will need to get `XStream` to honour that with\r\n```\r\nXStream xStream = new XStream(new com.thoughtworks.xstream.converters.reflection.PureJavaReflectionProvider());\r\n```\r\n","title":"converting xml file into Object using xstream but if a Variable not present in xml file but in Object then it assign default value to it how to change","body":"<p>Try adding ctor</p>\n<pre><code>public Customer() {\n  super();\n  isMale = true;\n}\n</code></pre>\n<p>You will need to get <code>XStream</code> to honour that with</p>\n<pre><code>XStream xStream = new XStream(new com.thoughtworks.xstream.converters.reflection.PureJavaReflectionProvider());\n</code></pre>\n"}],"owner":{"account_id":8656958,"reputation":27,"user_id":6480895,"display_name":"hemant "},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76732166,"answer_count":1,"score":0,"last_activity_date":1689872668,"creation_date":1689851339,"question_id":76729245,"body_markdown":"this is xml file \r\n\r\n    &lt;com.baeldung.pojo.Customer&gt;\r\n        &lt;firstName&gt;John&lt;/firstName&gt;\r\n        &lt;lastName&gt;Doe&lt;/lastName&gt;\r\n        &lt;dob&gt;1986-02-14 03:46:16.381 UTC&lt;/dob&gt;\r\n    &lt;/com.baeldung.pojo.Customer&gt;\r\n\r\nthis is java object\r\n\r\n    public class Customer {\r\n     \r\n        private String firstName;\r\n        private String lastName;\r\n        private Date dob;\r\n        private isMale;\r\n     \r\n        // standard setters and getters\r\n    }\r\n\r\nisMale not in xml file so when i convert xml file into Customer Object it assign isMale=false but i want it to assign it true by default only for once\r\n\r\nconversion code\r\n\r\n    \r\n    \t\r\n\r\n    public static &lt;A&gt; A fromXML(Class&lt;A&gt; c, File file) {\r\n        \t\t\r\n        \t\tXStream xStream = new XStream();\r\n        \t\t// Avoid &quot;Security framework of XStream not initialized, XStream is probably vulnerable.&quot; warning.\r\n        \t\tXStream.setupDefaultSecurity(xStream);\r\n        \t\txStream.allowTypesByWildcard(new String[] {\r\n        \t\t\t\t&quot;configurationFiles.**&quot;,\r\n        \t\t\t\t&quot;java.awt.Dimension&quot;\r\n        \t\t});\r\n        \t\txStream.ignoreUnknownElements();\r\n        \r\n        \t\tInputStream inputStream = null;\r\n        \t\tReader reader = null;\r\n        \r\n        \t\ttry {\r\n        \t\t\tinputStream = new java.io.FileInputStream(file);\r\n        \t\t\t//System.out.println(&quot;inside fromXml  try&quot;);\r\n        \t\t\treader = new InputStreamReader(inputStream, Charset.forName(&quot;UTF-8&quot;));\r\n        \t\t\tObject object = xStream.fromXML(reader);\r\n        \t\t\t\r\n        \t\t\t\r\n        //\t\t\tboolean isMarriedExists = ((Object) xStream).getUnmarshaller().getContext().hasField(&quot;isMarried&quot;);\r\n        \r\n        \t\t\t// System.out.println(c+&quot;--&quot;+object);\r\n        \t\t\tif (c.isInstance(object)) {\r\n        \r\n        \t\t\t\treturn (A)object;\r\n        \t\t\t}\r\n        \t\t} \r\n        \t\tcatch (Exception exp) {\r\n        \t\t\t//System.out.println(&quot;inside fromXml  catch&quot;);\r\n        \t\t\texp.printStackTrace();\r\n        \t\t\t//log.error(null, exp);\r\n        \t\t} catch (java.lang.Error err) {\r\n        \t\t\t//System.out.println(&quot;inside fromXml  catch&quot;);\r\n        \t\t\terr.printStackTrace();\r\n        \t\t\t//log.error(null, err);\r\n        \t\t} finally {\r\n        \t\t\tclose(reader);\r\n        \t\t\tclose(inputStream);\r\n        \t\t}\r\n        \r\n        \t\t\r\n        \t\treturn null;\r\n        \t}\r\n\r\n\r\nusing above mention function and converting the xml file using xStream.\r\n\r\n    File f = new File(&quot;customer.xml&quot;);\r\n    \t\tMainFrameXmlOptions mainFrameOptions=null;\r\n    \t\tif(f.exists())\r\n    \t\t\tmainFrameOptions = fromXML(MainFrameXmlOptions.class, f);\r\n\r\n\r\n\r\n\r\n","title":"converting xml file into Object using xstream but if a Variable not present in xml file but in Object then it assign default value to it how to change","body":"<p>this is xml file</p>\n<pre><code>&lt;com.baeldung.pojo.Customer&gt;\n    &lt;firstName&gt;John&lt;/firstName&gt;\n    &lt;lastName&gt;Doe&lt;/lastName&gt;\n    &lt;dob&gt;1986-02-14 03:46:16.381 UTC&lt;/dob&gt;\n&lt;/com.baeldung.pojo.Customer&gt;\n</code></pre>\n<p>this is java object</p>\n<pre><code>public class Customer {\n \n    private String firstName;\n    private String lastName;\n    private Date dob;\n    private isMale;\n \n    // standard setters and getters\n}\n</code></pre>\n<p>isMale not in xml file so when i convert xml file into Customer Object it assign isMale=false but i want it to assign it true by default only for once</p>\n<p>conversion code</p>\n<pre><code>public static &lt;A&gt; A fromXML(Class&lt;A&gt; c, File file) {\n            \n            XStream xStream = new XStream();\n            // Avoid &quot;Security framework of XStream not initialized, XStream is probably vulnerable.&quot; warning.\n            XStream.setupDefaultSecurity(xStream);\n            xStream.allowTypesByWildcard(new String[] {\n                    &quot;configurationFiles.**&quot;,\n                    &quot;java.awt.Dimension&quot;\n            });\n            xStream.ignoreUnknownElements();\n    \n            InputStream inputStream = null;\n            Reader reader = null;\n    \n            try {\n                inputStream = new java.io.FileInputStream(file);\n                //System.out.println(&quot;inside fromXml  try&quot;);\n                reader = new InputStreamReader(inputStream, Charset.forName(&quot;UTF-8&quot;));\n                Object object = xStream.fromXML(reader);\n                \n                \n    //          boolean isMarriedExists = ((Object) xStream).getUnmarshaller().getContext().hasField(&quot;isMarried&quot;);\n    \n                // System.out.println(c+&quot;--&quot;+object);\n                if (c.isInstance(object)) {\n    \n                    return (A)object;\n                }\n            } \n            catch (Exception exp) {\n                //System.out.println(&quot;inside fromXml  catch&quot;);\n                exp.printStackTrace();\n                //log.error(null, exp);\n            } catch (java.lang.Error err) {\n                //System.out.println(&quot;inside fromXml  catch&quot;);\n                err.printStackTrace();\n                //log.error(null, err);\n            } finally {\n                close(reader);\n                close(inputStream);\n            }\n    \n            \n            return null;\n        }\n</code></pre>\n<p>using above mention function and converting the xml file using xStream.</p>\n<pre><code>File f = new File(&quot;customer.xml&quot;);\n        MainFrameXmlOptions mainFrameOptions=null;\n        if(f.exists())\n            mainFrameOptions = fromXML(MainFrameXmlOptions.class, f);\n</code></pre>\n"},{"tags":["java","spring-boot","jpa","spring-data-jpa","jparepository"],"comments":[{"owner":{"account_id":979189,"reputation":725,"user_id":1866010,"accept_rate":67,"display_name":"Calabacin"},"score":0,"creation_date":1689869147,"post_id":76731558,"comment_id":135277649,"body_markdown":"I do not understand why you do not want a Student Entity. Create one just with the field name and the query you entered will work simply by removing the &quot;nativeQuery = true&quot;","body":"I do not understand why you do not want a Student Entity. Create one just with the field name and the query you entered will work simply by removing the &quot;nativeQuery = true&quot;"},{"owner":{"account_id":17868651,"reputation":3,"user_id":12980454,"display_name":"Zahid shaikh"},"score":0,"creation_date":1689869822,"post_id":76731558,"comment_id":135277790,"body_markdown":"so my Student class will have only one field right but actual table have more fields so this wont be a issue and also not using id wont give any error?","body":"so my Student class will have only one field right but actual table have more fields so this wont be a issue and also not using id wont give any error?"},{"owner":{"account_id":3430916,"reputation":3799,"user_id":3059385,"accept_rate":40,"display_name":"Christopher Schneider"},"score":1,"creation_date":1689870226,"post_id":76731558,"comment_id":135277872,"body_markdown":"`id` is required, but yes, you can just include `name` as a field.","body":"<code>id</code> is required, but yes, you can just include <code>name</code> as a field."},{"owner":{"account_id":17868651,"reputation":3,"user_id":12980454,"display_name":"Zahid shaikh"},"score":0,"creation_date":1689870585,"post_id":76731558,"comment_id":135277933,"body_markdown":"That&#39;s what I am saying what else I can do?","body":"That&#39;s what I am saying what else I can do?"},{"owner":{"account_id":979189,"reputation":725,"user_id":1866010,"accept_rate":67,"display_name":"Calabacin"},"score":0,"creation_date":1689870936,"post_id":76731558,"comment_id":135277990,"body_markdown":"What error did you get when you tried it using Object?","body":"What error did you get when you tried it using Object?"}],"answers":[{"tags":[],"owner":{"account_id":979189,"reputation":725,"user_id":1866010,"accept_rate":67,"display_name":"Calabacin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689872654,"creation_date":1689871262,"answer_id":76731996,"question_id":76731558,"body_markdown":"If you do not have a Student class then you should not make a JpaRepository for it. This is my suggestion:\r\n\r\n    @Repository\r\n    public class StudentRepository {\r\n        @PersistenceContext\r\n        private EntityManager em;\r\n    \r\n        public List&lt;String&gt; findAllStudentNames() {\r\n            return em.createNativeQuery(&quot;SELECT name FROM student&quot;).getResultList();\r\n        }\r\n    }\r\n\r\n","title":"Can I pass Java Object in JpaRepository Class?","body":"<p>If you do not have a Student class then you should not make a JpaRepository for it. This is my suggestion:</p>\n<pre><code>@Repository\npublic class StudentRepository {\n    @PersistenceContext\n    private EntityManager em;\n\n    public List&lt;String&gt; findAllStudentNames() {\n        return em.createNativeQuery(&quot;SELECT name FROM student&quot;).getResultList();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":17868651,"reputation":3,"user_id":12980454,"display_name":"Zahid shaikh"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76731996,"answer_count":1,"score":0,"last_activity_date":1689872654,"creation_date":1689867684,"question_id":76731558,"body_markdown":"    import org.springframework.stereotype.Repository;\r\n    \r\n    @Repository\r\n    public interface CustomRepository extends JpaRepository&lt;Object, Long&gt; {\r\n    \r\n         @Query(value = &quot;SELECT name FROM student&quot;, nativeQuery = true)\r\n        List&lt;String&gt; getAllStudentNames();\r\n    }\r\n    \r\n   \r\n\r\n Will this work if not what will be the solution for this? I don&#39;t want to create student Entity.","title":"Can I pass Java Object in JpaRepository Class?","body":"<pre><code>import org.springframework.stereotype.Repository;\n\n@Repository\npublic interface CustomRepository extends JpaRepository&lt;Object, Long&gt; {\n\n     @Query(value = &quot;SELECT name FROM student&quot;, nativeQuery = true)\n    List&lt;String&gt; getAllStudentNames();\n}\n</code></pre>\n<p>Will this work if not what will be the solution for this? I don't want to create student Entity.</p>\n"},{"tags":["java","apache-spark"],"comments":[{"owner":{"account_id":390362,"reputation":7181,"user_id":750376,"accept_rate":75,"display_name":"abiratsis"},"score":0,"creation_date":1689764297,"post_id":76720240,"comment_id":135258534,"body_markdown":"Iteration as you know it from programming world is a bad idea in the big-data world and should be used only when there is no alternative. This being said, the following question would be if you have investigate extensively implementing the SanityCheck logic using Spark Dataframe API? As for foreachPartition if allows you to go through elements of the partition fast, this doesn&#39;t mean you should use to create a new dataset within it i.e creating a new Dataframe","body":"Iteration as you know it from programming world is a bad idea in the big-data world and should be used only when there is no alternative. This being said, the following question would be if you have investigate extensively implementing the SanityCheck logic using Spark Dataframe API? As for foreachPartition if allows you to go through elements of the partition fast, this doesn&#39;t mean you should use to create a new dataset within it i.e creating a new Dataframe"},{"owner":{"account_id":3042668,"reputation":187,"user_id":2579265,"display_name":"Calimero"},"score":0,"creation_date":1689766492,"post_id":76720240,"comment_id":135259013,"body_markdown":"@abiratsis Initially I had plans for SanityCheck implementation to take Dataset&lt;Row&gt; argument and use Spark Dataset where / isNull / join etc... producing a Dataset of valids and rejects for each check. I changed my approach because that would have been nice for the rejects (just need to union all reject dataset for each control) but the total valid dataset was becoming the intersection of each control valid dataset and it seemed a bad idea. Am I wrong ?","body":"@abiratsis Initially I had plans for SanityCheck implementation to take Dataset&lt;Row&gt; argument and use Spark Dataset where / isNull / join etc... producing a Dataset of valids and rejects for each check. I changed my approach because that would have been nice for the rejects (just need to union all reject dataset for each control) but the total valid dataset was becoming the intersection of each control valid dataset and it seemed a bad idea. Am I wrong ?"},{"owner":{"account_id":390362,"reputation":7181,"user_id":750376,"accept_rate":75,"display_name":"abiratsis"},"score":0,"creation_date":1689766946,"post_id":76720240,"comment_id":135259097,"body_markdown":"It is possible to do the sanity checks on Dataframe/Dataset level? For instance using `df.where` and/or `df.filter` operators for checking the sanity rules. So what I mean is that you could check first if it is possible to do these checks on dataframe level and not row level","body":"It is possible to do the sanity checks on Dataframe/Dataset level? For instance using <code>df.where</code> and/or <code>df.filter</code> operators for checking the sanity rules. So what I mean is that you could check first if it is possible to do these checks on dataframe level and not row level"},{"owner":{"account_id":390362,"reputation":7181,"user_id":750376,"accept_rate":75,"display_name":"abiratsis"},"score":0,"creation_date":1689767448,"post_id":76720240,"comment_id":135259233,"body_markdown":"In order to check if these rules could be applied on Dataframe/Dataset level, maybe it would be easier to update your question with some of these rules.","body":"In order to check if these rules could be applied on Dataframe/Dataset level, maybe it would be easier to update your question with some of these rules."},{"owner":{"account_id":3042668,"reputation":187,"user_id":2579265,"display_name":"Calimero"},"score":0,"creation_date":1689769259,"post_id":76720240,"comment_id":135259649,"body_markdown":"@abiratsis I edited my question with my thoughts on passing entire `Dataset` to each `SanityCheck` and an implementation idea.","body":"@abiratsis I edited my question with my thoughts on passing entire <code>Dataset</code> to each <code>SanityCheck</code> and an implementation idea."},{"owner":{"account_id":390362,"reputation":7181,"user_id":750376,"accept_rate":75,"display_name":"abiratsis"},"score":0,"creation_date":1689769598,"post_id":76720240,"comment_id":135259735,"body_markdown":"So it seems that you don&#39;t need to use Row level but Dataframe/Dataset level right? If you can use dataframes for these checks then you dont have to scale down to Row checks","body":"So it seems that you don&#39;t need to use Row level but Dataframe/Dataset level right? If you can use dataframes for these checks then you dont have to scale down to Row checks"},{"owner":{"account_id":3042668,"reputation":187,"user_id":2579265,"display_name":"Calimero"},"score":0,"creation_date":1689779618,"post_id":76720240,"comment_id":135262557,"body_markdown":"@abiratsis Yes but then I have lots of duplicates when I aggregate the successful records for each sanity check. Doesn&#39;t it seems wasteful ? Isn&#39;t there another way ?","body":"@abiratsis Yes but then I have lots of duplicates when I aggregate the successful records for each sanity check. Doesn&#39;t it seems wasteful ? Isn&#39;t there another way ?"},{"owner":{"account_id":390362,"reputation":7181,"user_id":750376,"accept_rate":75,"display_name":"abiratsis"},"score":0,"creation_date":1689783239,"post_id":76720240,"comment_id":135263429,"body_markdown":"Well you can&#39;t get rid of duplicates with this code either. Here you are working in one particular partition, in order to get rid of duplicates you will need the entire dataset and therefore work with Dataframe/Dataset API","body":"Well you can&#39;t get rid of duplicates with this code either. Here you are working in one particular partition, in order to get rid of duplicates you will need the entire dataset and therefore work with Dataframe/Dataset API"},{"owner":{"account_id":3042668,"reputation":187,"user_id":2579265,"display_name":"Calimero"},"score":0,"creation_date":1689841884,"post_id":76720240,"comment_id":135271387,"body_markdown":"@abiratsis The idea in the code before the edit has no duplicates as was appending to the valid record dataset out of the sanity checks foreach loop. The reason why I didn&#39;t want to have to deal with those duplicates is because it felt like adding an O(n^2) operation that could be avoided, what do you think ?","body":"@abiratsis The idea in the code before the edit has no duplicates as was appending to the valid record dataset out of the sanity checks foreach loop. The reason why I didn&#39;t want to have to deal with those duplicates is because it felt like adding an O(n^2) operation that could be avoided, what do you think ?"},{"owner":{"account_id":390362,"reputation":7181,"user_id":750376,"accept_rate":75,"display_name":"abiratsis"},"score":0,"creation_date":1689928466,"post_id":76720240,"comment_id":135285423,"body_markdown":"I am not sure what do you mean by the previous to be honest, but I can ensure you that dropping duplicates is quite trivial operation achieved only through the Dataframe/Dataset API and as far as I know there isn&#39;t any other efficient approach. Also, it might be good to have in mind complexity when you write Spark code, but here you aren&#39;t just aiming that, you are trying to replace the default Spark behaviour without any obvious or significant reason.","body":"I am not sure what do you mean by the previous to be honest, but I can ensure you that dropping duplicates is quite trivial operation achieved only through the Dataframe/Dataset API and as far as I know there isn&#39;t any other efficient approach. Also, it might be good to have in mind complexity when you write Spark code, but here you aren&#39;t just aiming that, you are trying to replace the default Spark behaviour without any obvious or significant reason."}],"answers":[{"comments":[{"owner":{"account_id":1017255,"reputation":1526,"user_id":1028537,"display_name":"Chris"},"score":0,"creation_date":1692025638,"post_id":76732152,"comment_id":135566603,"body_markdown":"[evidence for why you shouldn&#39;t use withColumn in such a case](https://lansalo.wordpress.com/2018/05/13/spark-how-to-add-multiple-columns-in-dataframes-and-how-not-to/)","body":"<a href=\"https://lansalo.wordpress.com/2018/05/13/spark-how-to-add-multiple-columns-in-dataframes-and-how-not-to/\" rel=\"nofollow noreferrer\">evidence for why you shouldn&#39;t use withColumn in such a case</a>"}],"tags":[],"owner":{"account_id":1017255,"reputation":1526,"user_id":1028537,"display_name":"Chris"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689872592,"creation_date":1689872592,"answer_id":76732152,"question_id":76720240,"body_markdown":"[Quality](https://sparkutils.github.io/quality/) solves this by embedding all the checks, via sql snippets, in a single column, the [ruleRunner](https://sparkutils.github.io/quality/latest/getting_started/flavours/#quality-qualitydata-rulerunner) would seem almost 100% of what you are asking for.  The sql snippet &quot;sanity checks&quot; have access to the entire row, views (on Spark 3.4, DBR 12.2) or even [custom lambda user functions](https://sparkutils.github.io/quality/latest/advanced/userFunctions/) to reduce duplication.\r\n\r\nIn the environment Quality was designed for the results of these DQ checks are saved with the data and allow filtering of passed / failed rows directly, allowing single pass processing which is important when dealing with thousands of rules and billions of rows.\r\n\r\nClearly this won&#39;t work with aggregates, but even they can be single pass [expressionRunner](https://sparkutils.github.io/quality/latest/advanced/expressionRunner/), but it seems you are more concerned about duplicate passed/failed rows than other aggregate checks.\r\n\r\nYou could do this yourself with a column per check and then a column to filter all checks but although this can increase complexity quickly it&#39;s definitely doable. Quality&#39;s approach was chosen based on performance, simplicity of user rule definition via sql and [low storage](https://sparkutils.github.io/quality/latest/model/storage/) costs and filtering performance.\r\n\r\nIf you choose to go down the route of a sanity check per column, do so through collecting the Column&#39;s first then adding them to the row, calling withColumn 100s of times is not always optimised out. ","title":"Java Spark - split dataset based on boolean function","body":"<p><a href=\"https://sparkutils.github.io/quality/\" rel=\"nofollow noreferrer\">Quality</a> solves this by embedding all the checks, via sql snippets, in a single column, the <a href=\"https://sparkutils.github.io/quality/latest/getting_started/flavours/#quality-qualitydata-rulerunner\" rel=\"nofollow noreferrer\">ruleRunner</a> would seem almost 100% of what you are asking for.  The sql snippet &quot;sanity checks&quot; have access to the entire row, views (on Spark 3.4, DBR 12.2) or even <a href=\"https://sparkutils.github.io/quality/latest/advanced/userFunctions/\" rel=\"nofollow noreferrer\">custom lambda user functions</a> to reduce duplication.</p>\n<p>In the environment Quality was designed for the results of these DQ checks are saved with the data and allow filtering of passed / failed rows directly, allowing single pass processing which is important when dealing with thousands of rules and billions of rows.</p>\n<p>Clearly this won't work with aggregates, but even they can be single pass <a href=\"https://sparkutils.github.io/quality/latest/advanced/expressionRunner/\" rel=\"nofollow noreferrer\">expressionRunner</a>, but it seems you are more concerned about duplicate passed/failed rows than other aggregate checks.</p>\n<p>You could do this yourself with a column per check and then a column to filter all checks but although this can increase complexity quickly it's definitely doable. Quality's approach was chosen based on performance, simplicity of user rule definition via sql and <a href=\"https://sparkutils.github.io/quality/latest/model/storage/\" rel=\"nofollow noreferrer\">low storage</a> costs and filtering performance.</p>\n<p>If you choose to go down the route of a sanity check per column, do so through collecting the Column's first then adding them to the row, calling withColumn 100s of times is not always optimised out.</p>\n"}],"owner":{"account_id":3042668,"reputation":187,"user_id":2579265,"display_name":"Calimero"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":114,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689872592,"creation_date":1689761811,"question_id":76720240,"body_markdown":"I am trying to make data checks on a `org.apache.spark.sql.Dataset&lt;Row&gt;`. My current plan so far was :\r\n\r\nFirst, iterate on each row :\r\n\r\n    accountingData.foreachPartition((Iterator&lt;Row&gt; rows) -&gt; {\r\n        while (rows.hasNext()) \r\n        { \r\n             Row row = rows.next();\r\n        }\r\n    }\r\n\r\nSecond, iterate on each data check. They implement an interface \r\n\r\n    public interface SanityCheck {\r\n        Boolean isValid(Row dataRow);\r\n    }\r\n\r\nThe third part of the plan was to dispatch the rows into a dataset that contains only rows that passed all checks, and one dataset that contains a copy of failing records per failing test, with additional column giving information about which check failed.\r\n\r\nIn total it would look something like\r\n\r\n    // private final SanityChecks[] sanityChecks;\r\n     \r\n    StructType schema = originalDataset.schema();\r\n      Dataset&lt;Row&gt; valids = spark.createDataFrame(Collections.emptyList(), schema);\r\n      Dataset&lt;Row&gt; rejects = spark.createDataFrame(Collections.emptyList(), schema);\r\n    \r\n      originalDataset.foreachPartition((Iterator&lt;Row&gt; rows) -&gt; {\r\n                while (rows.hasNext()) {\r\n                    Row row = rows.next();\r\n                    Boolean isValidRow = true;\r\n                    for (SanityCheck check: sanityChecks) {\r\n                        if (!check.isValid(row)))\r\n                        {\r\n                            isValidRow = false;\r\n                            row.withColumn(&quot;failingCheck&quot;, lit(check.getClass().getName()))\r\n                            rejects.union(row);\r\n                        }\r\n                    \r\n                    }\r\n                    if(isValidRow) valids.union(row);\r\n                }\r\n            });\r\n\r\nNow that doesn&#39;t compile, appending a row to a dataset apparently doesn&#39;t go work with union. Besides, withColumn isn&#39;t a method of the Row object (it&#39;s from the Dataset object). \r\n\r\nIs this the correct approach ? How to add column to Row and append Row to Dataset ?\r\n\r\n\r\nEdit : Sanity checks can be done at Dataset/frame level easily. They would be comparable to questions like &quot;does the amount has a currency and is that currency a known one&quot;, &quot;is it an actual valid date&quot; or &quot;is that value within this range&quot;. This can be done with where/join/filter/rexp etc...\r\n\r\nIf we change SanityCheck would then change to be something like (example of a nullity check)\r\n\r\n     public ControlStatus checkStatus(Dataset&lt;Row&gt; data) {\r\n            Column condition = col(fieldName).isNull().or(col(fieldName).equalTo(&quot;&quot;));\r\n            Dataset&lt;Row&gt; rejectedRows = data.where(condition);\r\n            Dataset&lt;Row&gt; validRows    = data.where(not(condition));\r\n            rejectedRows.withColumn(&quot;rejectReason&quot;, lit(rejectReason));\r\n            return new ControlStatus(rejectedRows, validRows, this.getClass().getSimpleName());\r\n        }\r\n\r\n\r\nBut if I&#39;m going in this direction I meet troubles with consolidating the various datasets produced by each SanityCheck : The consolidated reject list is easy, as it takes only one check failed to invalidate the entire record so the reject list is just the union of all checks&#39; failures (as a record can fail multiple checks). Valid record on the other hands would appear in every single check valid list, and I have to remove the duplicate. That seemed to be a bad idea to me as it is a O(n&#178;) operation that doesn&#39;t seem to be parrallelized nicely but maybe I overthink it ?","title":"Java Spark - split dataset based on boolean function","body":"<p>I am trying to make data checks on a <code>org.apache.spark.sql.Dataset&lt;Row&gt;</code>. My current plan so far was :</p>\n<p>First, iterate on each row :</p>\n<pre><code>accountingData.foreachPartition((Iterator&lt;Row&gt; rows) -&gt; {\n    while (rows.hasNext()) \n    { \n         Row row = rows.next();\n    }\n}\n</code></pre>\n<p>Second, iterate on each data check. They implement an interface</p>\n<pre><code>public interface SanityCheck {\n    Boolean isValid(Row dataRow);\n}\n</code></pre>\n<p>The third part of the plan was to dispatch the rows into a dataset that contains only rows that passed all checks, and one dataset that contains a copy of failing records per failing test, with additional column giving information about which check failed.</p>\n<p>In total it would look something like</p>\n<pre><code>// private final SanityChecks[] sanityChecks;\n \nStructType schema = originalDataset.schema();\n  Dataset&lt;Row&gt; valids = spark.createDataFrame(Collections.emptyList(), schema);\n  Dataset&lt;Row&gt; rejects = spark.createDataFrame(Collections.emptyList(), schema);\n\n  originalDataset.foreachPartition((Iterator&lt;Row&gt; rows) -&gt; {\n            while (rows.hasNext()) {\n                Row row = rows.next();\n                Boolean isValidRow = true;\n                for (SanityCheck check: sanityChecks) {\n                    if (!check.isValid(row)))\n                    {\n                        isValidRow = false;\n                        row.withColumn(&quot;failingCheck&quot;, lit(check.getClass().getName()))\n                        rejects.union(row);\n                    }\n                \n                }\n                if(isValidRow) valids.union(row);\n            }\n        });\n</code></pre>\n<p>Now that doesn't compile, appending a row to a dataset apparently doesn't go work with union. Besides, withColumn isn't a method of the Row object (it's from the Dataset object).</p>\n<p>Is this the correct approach ? How to add column to Row and append Row to Dataset ?</p>\n<p>Edit : Sanity checks can be done at Dataset/frame level easily. They would be comparable to questions like &quot;does the amount has a currency and is that currency a known one&quot;, &quot;is it an actual valid date&quot; or &quot;is that value within this range&quot;. This can be done with where/join/filter/rexp etc...</p>\n<p>If we change SanityCheck would then change to be something like (example of a nullity check)</p>\n<pre><code> public ControlStatus checkStatus(Dataset&lt;Row&gt; data) {\n        Column condition = col(fieldName).isNull().or(col(fieldName).equalTo(&quot;&quot;));\n        Dataset&lt;Row&gt; rejectedRows = data.where(condition);\n        Dataset&lt;Row&gt; validRows    = data.where(not(condition));\n        rejectedRows.withColumn(&quot;rejectReason&quot;, lit(rejectReason));\n        return new ControlStatus(rejectedRows, validRows, this.getClass().getSimpleName());\n    }\n</code></pre>\n<p>But if I'm going in this direction I meet troubles with consolidating the various datasets produced by each SanityCheck : The consolidated reject list is easy, as it takes only one check failed to invalidate the entire record so the reject list is just the union of all checks' failures (as a record can fail multiple checks). Valid record on the other hands would appear in every single check valid list, and I have to remove the duplicate. That seemed to be a bad idea to me as it is a O(n²) operation that doesn't seem to be parrallelized nicely but maybe I overthink it ?</p>\n"},{"tags":["java","junit"],"comments":[{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":6,"creation_date":1689864761,"post_id":76731106,"comment_id":135276477,"body_markdown":"Please [edit] your question to include the code of the test and at least the signature of the method you&#39;re calling. Don&#39;t just *vaguely describe* what your code is *like*: show us your code!","body":"Please <a href=\"https://stackoverflow.com/posts/76731106/edit\">edit</a> your question to include the code of the test and at least the signature of the method you&#39;re calling. Don&#39;t just <i>vaguely describe</i> what your code is <i>like</i>: show us your code!"},{"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"score":0,"creation_date":1689872127,"post_id":76731106,"comment_id":135278183,"body_markdown":"... a test &quot;returning&quot; something...","body":"... a test &quot;returning&quot; something..."}],"answers":[{"tags":[],"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1689864724,"creation_date":1689864724,"answer_id":76731131,"question_id":76731106,"body_markdown":"If you&#39;re not sure if the `Optional` has a value,\r\n\r\n```\r\nOptional&lt;String&gt; string = getString();\r\nassertTrue(optional.isPresent());\r\nassertEquals(&quot;hello&quot;, optional.get());\r\n```\r\n\r\nIf you are sure, you can omit the first assert. Optional will throw an exception if it&#39;s not present, which will also fail the test.","title":"How to assert a String&lt;Optional&gt; in java without asserting an Optional&lt;optional&gt;?","body":"<p>If you're not sure if the <code>Optional</code> has a value,</p>\n<pre><code>Optional&lt;String&gt; string = getString();\nassertTrue(optional.isPresent());\nassertEquals(&quot;hello&quot;, optional.get());\n</code></pre>\n<p>If you are sure, you can omit the first assert. Optional will throw an exception if it's not present, which will also fail the test.</p>\n"},{"comments":[{"owner":{"account_id":29057534,"reputation":1,"user_id":22258993,"display_name":"Nebiyu Dawit"},"score":0,"creation_date":1689869400,"post_id":76731213,"comment_id":135277703,"body_markdown":"That&#39;s the problem, both of those didn&#39;t work. Optional.of(expectedValue) basically made th expected value no longer a string. Instead it became the &quot;optional&quot; type. But i don&#39;t want the optional type, i want a string that is optional (I think?). \n\nPart of the problem is I&#39;m unsure what is being returned by the method i made. It&#39;s a String&lt;optional&gt; but I don&#39;t know what the difference is between String&lt;optional&gt; vs Optional&lt;optional&gt;. And online resources only give me the latter. I need the former.","body":"That&#39;s the problem, both of those didn&#39;t work. Optional.of(expectedValue) basically made th expected value no longer a string. Instead it became the &quot;optional&quot; type. But i don&#39;t want the optional type, i want a string that is optional (I think?).   Part of the problem is I&#39;m unsure what is being returned by the method i made. It&#39;s a String&lt;optional&gt; but I don&#39;t know what the difference is between String&lt;optional&gt; vs Optional&lt;optional&gt;. And online resources only give me the latter. I need the former."},{"owner":{"account_id":11390996,"reputation":300,"user_id":10334839,"display_name":"HomeworkHopper"},"score":2,"creation_date":1689869840,"post_id":76731213,"comment_id":135277795,"body_markdown":"There&#39;s no such thing as a String&lt;optional&gt;, only an Optional&lt;String&gt;. Optionals in Java wrap an existing type, but types themselves cannot be optional. If you have an optional, you need to unwrap it to get the actual value it contains, just as Vitalli suggested here.","body":"There&#39;s no such thing as a String&lt;optional&gt;, only an Optional&lt;String&gt;. Optionals in Java wrap an existing type, but types themselves cannot be optional. If you have an optional, you need to unwrap it to get the actual value it contains, just as Vitalli suggested here."},{"owner":{"account_id":29050703,"reputation":59,"user_id":22253592,"display_name":"Vitalii Dokalenko"},"score":0,"creation_date":1689869949,"post_id":76731213,"comment_id":135277816,"body_markdown":"Please, provide the code of your test and the method signature you are testing","body":"Please, provide the code of your test and the method signature you are testing"},{"owner":{"account_id":29057534,"reputation":1,"user_id":22258993,"display_name":"Nebiyu Dawit"},"score":0,"creation_date":1689872595,"post_id":76731213,"comment_id":135278269,"body_markdown":"I found a solution, although it&#39;s not the most clean. Your actualValue.get() didn&#39;t work for me since .get() wasn&#39;t a function. As in, it couldn&#39;t be found and autocomplete didn&#39;t work. I was able to turn the actual value into an optional then back into string and it worked, although im betting that isn&#39;t the best way to go about things.","body":"I found a solution, although it&#39;s not the most clean. Your actualValue.get() didn&#39;t work for me since .get() wasn&#39;t a function. As in, it couldn&#39;t be found and autocomplete didn&#39;t work. I was able to turn the actual value into an optional then back into string and it worked, although im betting that isn&#39;t the best way to go about things."}],"tags":[],"owner":{"account_id":29050703,"reputation":59,"user_id":22253592,"display_name":"Vitalii Dokalenko"},"comment_count":4,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1689865234,"creation_date":1689865234,"answer_id":76731213,"question_id":76731106,"body_markdown":"Probably you are trying to compare two different types. Wrap you expected value to Optional `Optional.of(expectedValue)`, or unwrap the actual value `actualValue.get()`","title":"How to assert a String&lt;Optional&gt; in java without asserting an Optional&lt;optional&gt;?","body":"<p>Probably you are trying to compare two different types. Wrap you expected value to Optional <code>Optional.of(expectedValue)</code>, or unwrap the actual value <code>actualValue.get()</code></p>\n"},{"comments":[{"owner":{"account_id":11390996,"reputation":300,"user_id":10334839,"display_name":"HomeworkHopper"},"score":0,"creation_date":1689874418,"post_id":76732129,"comment_id":135278618,"body_markdown":"Optional.of(&quot;4.0000&quot;).toString() will return the string &quot;Optional[4.0000]&quot;... are you certain that&#39;s what you want? If not, you should really be using the .get() method, which returns the value contained within the optional.","body":"Optional.of(&quot;4.0000&quot;).toString() will return the string &quot;Optional[4.0000]&quot;... are you certain that&#39;s what you want? If not, you should really be using the .get() method, which returns the value contained within the optional."}],"tags":[],"owner":{"account_id":29057534,"reputation":1,"user_id":22258993,"display_name":"Nebiyu Dawit"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689872373,"creation_date":1689872373,"answer_id":76732129,"question_id":76731106,"body_markdown":"So I realized the problem was I turned a string into an optional due to it possibly being null earlier on in the test. Then I turned it back into a string later because my method needed to return a string.\r\n\r\nSo the value was a string -&gt; optional -&gt; string. My expected needed to mirror that, so my assertion came out to this: \r\n`assertEquals(Optional.of(&quot;4.0000&quot;).toString(), ACTUALRESULT);`\r\n\r\n`&quot;4.0000&quot;` is a string, which gets turned into an optional with the `Optional.of()` method. Then it gets turned back into a string with `toString()`. ","title":"How to assert a String&lt;Optional&gt; in java without asserting an Optional&lt;optional&gt;?","body":"<p>So I realized the problem was I turned a string into an optional due to it possibly being null earlier on in the test. Then I turned it back into a string later because my method needed to return a string.</p>\n<p>So the value was a string -&gt; optional -&gt; string. My expected needed to mirror that, so my assertion came out to this:\n<code>assertEquals(Optional.of(&quot;4.0000&quot;).toString(), ACTUALRESULT);</code></p>\n<p><code>&quot;4.0000&quot;</code> is a string, which gets turned into an optional with the <code>Optional.of()</code> method. Then it gets turned back into a string with <code>toString()</code>.</p>\n"}],"owner":{"account_id":29057534,"reputation":1,"user_id":22258993,"display_name":"Nebiyu Dawit"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":84,"favorite_count":0,"down_vote_count":4,"up_vote_count":0,"answer_count":3,"score":-4,"last_activity_date":1689872373,"creation_date":1689864561,"question_id":76731106,"body_markdown":"I&#39;m making a JUnit test case that returns a string. However I keep getting this error: \r\n\r\n[expected: java.util.Optional&lt;Optional&gt; but was java.lang.String&lt;Optional&gt;](https://i.stack.imgur.com/m9PB6.png)\r\n\r\n`expected java.util.Optional&lt;Optional&gt; but was java.lang.String&lt;Optional&gt;`\r\n\r\nand when I try to expect a string I just get \r\n\r\n`expected &lt;9999999.0000&gt; but was &lt;Optional[9999999]&gt;`\r\n\r\n(Yes, the string returned is the number 9999999 and not an integer.)\r\n\r\n\r\n\r\nI&#39;ve looked up how to use String&lt;Optionals&gt; all i can and i keep getting information about the java.util.Optional versions, nothing pops up about what I actually need. Not only that, there are tons of other tests in my project that just compare strings normally. Using \r\n\r\n`assertEquals.(&quot;hello&quot;, getString())`\r\n\r\nand they all work fine, but when I&#39;m doing it here the error gets thrown. Could it have something to do with the fact that I&#39;m getting the string from an object? Similar to: `Object.getString() `?","title":"How to assert a String&lt;Optional&gt; in java without asserting an Optional&lt;optional&gt;?","body":"<p>I'm making a JUnit test case that returns a string. However I keep getting this error:</p>\n<p><a href=\"https://i.stack.imgur.com/m9PB6.png\" rel=\"nofollow noreferrer\">expected: java.util.Optional but was java.lang.String</a></p>\n<p><code>expected java.util.Optional&lt;Optional&gt; but was java.lang.String&lt;Optional&gt;</code></p>\n<p>and when I try to expect a string I just get</p>\n<p><code>expected &lt;9999999.0000&gt; but was &lt;Optional[9999999]&gt;</code></p>\n<p>(Yes, the string returned is the number 9999999 and not an integer.)</p>\n<p>I've looked up how to use String all i can and i keep getting information about the java.util.Optional versions, nothing pops up about what I actually need. Not only that, there are tons of other tests in my project that just compare strings normally. Using</p>\n<p><code>assertEquals.(&quot;hello&quot;, getString())</code></p>\n<p>and they all work fine, but when I'm doing it here the error gets thrown. Could it have something to do with the fact that I'm getting the string from an object? Similar to: <code>Object.getString() </code>?</p>\n"},{"tags":["java","c","multithreading"],"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1655262671,"post_id":72625285,"comment_id":128288575,"body_markdown":"I think it is a bad idea.  Just do it the normal way.  If the overhead of a system call is too great ... the chances are that you are misusing preemption.  (How often do you expect the user to hit the &quot;cancel&quot; button?   Just wire it up to `pthread_cancel` or `pthread_kill`.)","body":"I think it is a bad idea.  Just do it the normal way.  If the overhead of a system call is too great ... the chances are that you are misusing preemption.  (How often do you expect the user to hit the &quot;cancel&quot; button?   Just wire it up to <code>pthread_cancel</code> or <code>pthread_kill</code>.)"},{"owner":{"account_id":9371025,"reputation":141,"user_id":10662977,"display_name":"Samuel Squire"},"score":0,"creation_date":1655263142,"post_id":72625285,"comment_id":128288620,"body_markdown":"The problem is the cost of interactivity, putting an if (cancelled) in your hot loop slows down your code significantly.","body":"The problem is the cost of interactivity, putting an if (cancelled) in your hot loop slows down your code significantly."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1655263238,"post_id":72625285,"comment_id":128288632,"body_markdown":"So use `pthread_kill`.  I suggested &gt;two&lt; alternatives.   Anyhow your approach is liable to run into problems with portability and optimizing compilers and stuff like that.  (And if you turn down / off the optimization, you most likely lose the performance you gained by not checking a flag.)","body":"So use <code>pthread_kill</code>.  I suggested &gt;two&lt; alternatives.   Anyhow your approach is liable to run into problems with portability and optimizing compilers and stuff like that.  (And if you turn down / off the optimization, you most likely lose the performance you gained by not checking a flag.)"},{"owner":{"account_id":9371025,"reputation":141,"user_id":10662977,"display_name":"Samuel Squire"},"score":0,"creation_date":1655263396,"post_id":72625285,"comment_id":128288652,"body_markdown":"The problem is most signal handlers are in their own thread, the signal handlers cannot kill another thread. You would need to put your signal handlers in the hot thread and update the loop invariants to stop. You cannot stop a hot loop in a signal handlers unless you change the loop invariants. You could put your looping variable as a global and maybe this would work to prempt a hot loop.","body":"The problem is most signal handlers are in their own thread, the signal handlers cannot kill another thread. You would need to put your signal handlers in the hot thread and update the loop invariants to stop. You cannot stop a hot loop in a signal handlers unless you change the loop invariants. You could put your looping variable as a global and maybe this would work to prempt a hot loop."},{"owner":{"account_id":9371025,"reputation":141,"user_id":10662977,"display_name":"Samuel Squire"},"score":0,"creation_date":1655263598,"post_id":72625285,"comment_id":128288682,"body_markdown":"I&#39;m interested in N:M schedulers (where N is the number of kernel threads and M is the number of green threads) and multiplexing green threads or goroutines onto multiple kernel threads. I want to solve the resource starvation problem. I&#39;ve read the Go scheduler and Linux scheduler and I want to schedule in user space that requires preemption.","body":"I&#39;m interested in N:M schedulers (where N is the number of kernel threads and M is the number of green threads) and multiplexing green threads or goroutines onto multiple kernel threads. I want to solve the resource starvation problem. I&#39;ve read the Go scheduler and Linux scheduler and I want to schedule in user space that requires preemption."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1655281079,"post_id":72625285,"comment_id":128292691,"body_markdown":"“*Did you ever notice that the cancel button never does anything when the program you are running is in a hot loop?*” No, not when the programmer did their job right. But what does your “*idea on how we can preempt a thread in C programming*” have to do with your answer showing Java code doing a simple polling loop? It’s neither C programming nor preemption.","body":"“<i>Did you ever notice that the cancel button never does anything when the program you are running is in a hot loop?</i>” No, not when the programmer did their job right. But what does your “<i>idea on how we can preempt a thread in C programming</i>” have to do with your answer showing Java code doing a simple polling loop? It’s neither C programming nor preemption."},{"owner":{"account_id":9371025,"reputation":141,"user_id":10662977,"display_name":"Samuel Squire"},"score":0,"creation_date":1655287282,"post_id":72625285,"comment_id":128294788,"body_markdown":"I added a C version of the same program. Did you read and understand the code? It&#39;s not polling. You may have read the code before it was a multiplexing scheduler. Read the updated code.","body":"I added a C version of the same program. Did you read and understand the code? It&#39;s not polling. You may have read the code before it was a multiplexing scheduler. Read the updated code."},{"owner":{"account_id":9371025,"reputation":141,"user_id":10662977,"display_name":"Samuel Squire"},"score":0,"creation_date":1655460137,"post_id":72625285,"comment_id":128342954,"body_markdown":"I added a Rust version of the same program.","body":"I added a Rust version of the same program."},{"owner":{"account_id":497420,"reputation":1272,"user_id":1517969,"display_name":"olejorgenb"},"score":0,"creation_date":1686484523,"post_id":72625285,"comment_id":134801946,"body_markdown":"Cool idea, but: &quot;But if you put an if statement in the hot loop you slow it down drastically.&quot; Does it really? wouldn&#39;t the branch predictor very reliable predict the path taken?","body":"Cool idea, but: &quot;But if you put an if statement in the hot loop you slow it down drastically.&quot; Does it really? wouldn&#39;t the branch predictor very reliable predict the path taken?"}],"answers":[{"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1655270910,"post_id":72626095,"comment_id":128289784,"body_markdown":"Well yea ... but this is not &quot;preemption&quot; in the normal sense, or in the sense that you seemed to be asking in the Question.   And your Java implementation is NOT thread-safe since use of the shared loop variable is not properly synchronized.  (You would have the same problem if you translated this into C, I think.)","body":"Well yea ... but this is not &quot;preemption&quot; in the normal sense, or in the sense that you seemed to be asking in the Question.   And your Java implementation is NOT thread-safe since use of the shared loop variable is not properly synchronized.  (You would have the same problem if you translated this into C, I think.)"},{"owner":{"account_id":9371025,"reputation":141,"user_id":10662977,"display_name":"Samuel Squire"},"score":0,"creation_date":1655273354,"post_id":72626095,"comment_id":128290342,"body_markdown":"It&#39;s not thread safe but it doesn&#39;t matter in this case, we don&#39;t care about the cancelled iteration of the loop. I just wrote a multiplexing scheduler which avoids resource starvation. For memory visibility you could change the loop variable to be volatile, then there would be a full memory barrier. You can find my multiplexing of lightweight threads onto OS kernel threads here - https://github.com/samsquire/preemptible-thread/blob/master/src/main/java/Scheduler.java","body":"It&#39;s not thread safe but it doesn&#39;t matter in this case, we don&#39;t care about the cancelled iteration of the loop. I just wrote a multiplexing scheduler which avoids resource starvation. For memory visibility you could change the loop variable to be volatile, then there would be a full memory barrier. You can find my multiplexing of lightweight threads onto OS kernel threads here - <a href=\"https://github.com/samsquire/preemptible-thread/blob/master/src/main/java/Scheduler.java\" rel=\"nofollow noreferrer\">github.com/samsquire/preemptible-thread/blob/master/src/main&zwnj;&#8203;/&hellip;</a>"},{"owner":{"account_id":9371025,"reputation":141,"user_id":10662977,"display_name":"Samuel Squire"},"score":0,"creation_date":1655273455,"post_id":72626095,"comment_id":128290370,"body_markdown":"The hot loop&#39;s contents is not being preempted, if there is an expensive statement in there, that wouldn&#39;t be preempted. But the next iteration of the loop is preempted with this design which is what I want for responsiveness. This is responsive to user behaviour without introducing lag due to an if statement which is what I wanted. I just need to learn how to do this in C.","body":"The hot loop&#39;s contents is not being preempted, if there is an expensive statement in there, that wouldn&#39;t be preempted. But the next iteration of the loop is preempted with this design which is what I want for responsiveness. This is responsive to user behaviour without introducing lag due to an if statement which is what I wanted. I just need to learn how to do this in C."},{"owner":{"account_id":3795627,"reputation":15279,"user_id":3150802,"accept_rate":55,"display_name":"Peter - Reinstate Monica"},"score":0,"creation_date":1655273676,"post_id":72626095,"comment_id":128290443,"body_markdown":"You do it in C the same way ;-). (Seriously, I&#39;m not sure which part of the approach wouldn&#39;t work there.) By the way, are you sure that hash computation  and hashmap access are indeed faster than a perfectly predictable condition?","body":"You do it in C the same way ;-). (Seriously, I&#39;m not sure which part of the approach wouldn&#39;t work there.) By the way, are you sure that hash computation  and hashmap access are indeed faster than a perfectly predictable condition?"},{"owner":{"account_id":9371025,"reputation":141,"user_id":10662977,"display_name":"Samuel Squire"},"score":0,"creation_date":1655273780,"post_id":72626095,"comment_id":128290468,"body_markdown":"Peter, thank you for looking at my question and answer. I could change the hashmap to a simple array of integers and have a convention where loop variable is at position n and limit is at position n + 1. This would remove the overhead of the hashmap. It was just  for convenience of implementation.","body":"Peter, thank you for looking at my question and answer. I could change the hashmap to a simple array of integers and have a convention where loop variable is at position n and limit is at position n + 1. This would remove the overhead of the hashmap. It was just  for convenience of implementation."},{"owner":{"account_id":9371025,"reputation":141,"user_id":10662977,"display_name":"Samuel Squire"},"score":0,"creation_date":1655274306,"post_id":72626095,"comment_id":128290601,"body_markdown":"Also Thank you Steven for giving me the idea of this approach.","body":"Also Thank you Steven for giving me the idea of this approach."},{"owner":{"account_id":3795627,"reputation":15279,"user_id":3150802,"accept_rate":55,"display_name":"Peter - Reinstate Monica"},"score":0,"creation_date":1655274452,"post_id":72626095,"comment_id":128290644,"body_markdown":"Also, if you are happy with aborting only upon completion of an iteration, *would* there have to be be an additional conditional jump at all? E.g. `for(int i=0; i&lt;n &amp; !aborted; i++)`would not have one, and I think even the code for `&amp;&amp;` can be jump-less if there aren&#39;t any side effects.","body":"Also, if you are happy with aborting only upon completion of an iteration, <i>would</i> there have to be be an additional conditional jump at all? E.g. <code>for(int i=0; i&lt;n &amp; !aborted; i++)</code>would not have one, and I think even the code for <code>&amp;&amp;</code> can be jump-less if there aren&#39;t any side effects."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1655275408,"post_id":72626095,"comment_id":128290901,"body_markdown":"*&quot;It&#39;s not thread safe but it doesn&#39;t matter in this case ...&quot;* - Actually I think it does matter.  The thread-safety issue *could* manifest as the reading thread never seeing the update from the writing thread, and therefore never being preempted.  Or even worse, unsynchronized updates to a shared `HashMap` could corrupt it, leading to things like unexpected NPEs.  (Depending on the Java version ...)","body":"<i>&quot;It&#39;s not thread safe but it doesn&#39;t matter in this case ...&quot;</i> - Actually I think it does matter.  The thread-safety issue <i>could</i> manifest as the reading thread never seeing the update from the writing thread, and therefore never being preempted.  Or even worse, unsynchronized updates to a shared <code>HashMap</code> could corrupt it, leading to things like unexpected NPEs.  (Depending on the Java version ...)"},{"owner":{"account_id":9371025,"reputation":141,"user_id":10662977,"display_name":"Samuel Squire"},"score":0,"creation_date":1655275450,"post_id":72626095,"comment_id":128290918,"body_markdown":"I updated the code to use arrays for loop variable, limit and remembered. I also replaced the code to the multiplexing scheduler which is slightly different to the original code I placed here. It has 5 kernel threads that load balances 5 light weight threads They should all run evenly and not starve as the equivalent of the while (true) and the long loop they are each preempted.","body":"I updated the code to use arrays for loop variable, limit and remembered. I also replaced the code to the multiplexing scheduler which is slightly different to the original code I placed here. It has 5 kernel threads that load balances 5 light weight threads They should all run evenly and not starve as the equivalent of the while (true) and the long loop they are each preempted."},{"owner":{"account_id":9371025,"reputation":141,"user_id":10662977,"display_name":"Samuel Squire"},"score":0,"creation_date":1655275544,"post_id":72626095,"comment_id":128290947,"body_markdown":"Steven, you are right regarding the hashmap and NPEs which I experienced before while iterating and arraycopying while being modified in other threads. But I replaced the limit and loop variable hashmap with an array. Do you still see there being a multithreading issue with this approach? I could also change the array to be volatile so any update will have a memory fence and be visible to the looping thread.","body":"Steven, you are right regarding the hashmap and NPEs which I experienced before while iterating and arraycopying while being modified in other threads. But I replaced the limit and loop variable hashmap with an array. Do you still see there being a multithreading issue with this approach? I could also change the array to be volatile so any update will have a memory fence and be visible to the looping thread."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1655276145,"post_id":72626095,"comment_id":128291118,"body_markdown":"Maybe.  The code is very complicated to reason about from a thread-safety perspective.   If it was my (Java) code, I would use `Thread.interrupt()` etcetera.  Much easier to reason about.","body":"Maybe.  The code is very complicated to reason about from a thread-safety perspective.   If it was my (Java) code, I would use <code>Thread.interrupt()</code> etcetera.  Much easier to reason about."},{"owner":{"account_id":9371025,"reputation":141,"user_id":10662977,"display_name":"Samuel Squire"},"score":0,"creation_date":1655276411,"post_id":72626095,"comment_id":128291206,"body_markdown":"The looping thread reads the loop variable and limit at the beginning of an iteration. The writing thread writes to the looping thread. It&#39;s possible that the writing thread preemption gets overwritten if the looping thread is incrementing at the same time the writing thread preempts. But I&#39;ve been running it all this time and it hasn&#39;t frozen on me yet, the problem would correct itself on the next iteration. I could change the loop variable to an AtomicInteger and compare and swap with the last value and it would be a lock free algorithm. The problem is the increment(0), a RW from both thread","body":"The looping thread reads the loop variable and limit at the beginning of an iteration. The writing thread writes to the looping thread. It&#39;s possible that the writing thread preemption gets overwritten if the looping thread is incrementing at the same time the writing thread preempts. But I&#39;ve been running it all this time and it hasn&#39;t frozen on me yet, the problem would correct itself on the next iteration. I could change the loop variable to an AtomicInteger and compare and swap with the last value and it would be a lock free algorithm. The problem is the increment(0), a RW from both thread"},{"owner":{"account_id":9371025,"reputation":141,"user_id":10662977,"display_name":"Samuel Squire"},"score":0,"creation_date":1655276506,"post_id":72626095,"comment_id":128291236,"body_markdown":"Just occurred to me that the writing thread doesn&#39;t READ, it only writes the limit to the looping variable. But its changes could still be overwritten by the ++ I don&#39;t know how Java implements ++ if it&#39;s two operations or one.","body":"Just occurred to me that the writing thread doesn&#39;t READ, it only writes the limit to the looping variable. But its changes could still be overwritten by the ++ I don&#39;t know how Java implements ++ if it&#39;s two operations or one."},{"owner":{"account_id":9371025,"reputation":141,"user_id":10662977,"display_name":"Samuel Squire"},"score":0,"creation_date":1655277776,"post_id":72626095,"comment_id":128291673,"body_markdown":"I changed the code to use compareAndSet. In theory it&#39;s thread safe now. As the compareAndSet shall only work if the value was what it was read to be.","body":"I changed the code to use compareAndSet. In theory it&#39;s thread safe now. As the compareAndSet shall only work if the value was what it was read to be."},{"owner":{"account_id":9371025,"reputation":141,"user_id":10662977,"display_name":"Samuel Squire"},"score":0,"creation_date":1655286929,"post_id":72626095,"comment_id":128294673,"body_markdown":"I added a C version of the preempting multiplexer scheduler. It doesn&#39;t use compareAndSet as I need to learn how to do that in C. It seems to work.","body":"I added a C version of the preempting multiplexer scheduler. It doesn&#39;t use compareAndSet as I need to learn how to do that in C. It seems to work."}],"tags":[],"owner":{"account_id":9371025,"reputation":141,"user_id":10662977,"display_name":"Samuel Squire"},"comment_count":15,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689871650,"creation_date":1655269076,"answer_id":72626095,"question_id":72625285,"body_markdown":"In Java, C and Rust you can preempt a thread in a hot loop by directly changing the looped variable to go beyond the loop invariant. You can do this from any thread.\r\n\r\nIf you need to use the loop variable (you probably do), make sure you copy it into a variable like this, or you&#39;ll have a data race:\r\n\r\n    for (initialVar(0, 0), int loopVal = 0; getValue(0) &lt; getLimit(0); loopVal = increment(0)) {\r\n                                            Math.sqrt(loopVal);\r\n                                        }\r\n\r\nOr\r\n\r\n     for (int loopVal = 0; m-&gt;value[0] &lt; m-&gt;limit[0]; loopVal = m-&gt;value[0]++) {\r\n                \r\n                sqrt(loopVal);\r\n              }\r\n\r\nYou can create cancellable APIs with this approach, your cancel token can represent all the loops indexes that the code is in. So you can create profoundly responsive code. Even if you are deep in encryption or compression or uploading data. As long as you&#39;re not in a syscall.\r\n\r\nI also pasted a C version of this sourcecode below the Java version. The Rust version is below the C version\r\n\r\n\r\n    import java.util.*;\r\n    import java.util.concurrent.atomic.AtomicInteger;\r\n    \r\n    public class Scheduler {\r\n    \r\n        public static class KernelThread extends Thread {\r\n            public Map&lt;LightWeightThread, Boolean&gt; scheduled = new HashMap&lt;&gt;();\r\n    \r\n            public void preempt() {\r\n                for (LightWeightThread thread : scheduled.keySet()) {\r\n                    scheduled.put(thread, false);\r\n                    for (int loop = 0 ; loop &lt; thread.getLoops(); loop++) {\r\n                        thread.preempt(loop);\r\n                    }\r\n                }\r\n    \r\n            }\r\n            public void addLightWeightThread(LightWeightThread thread) {\r\n                scheduled.put(thread, false);\r\n            }\r\n    \r\n            public boolean isScheduled(LightWeightThread lightWeightThread) {\r\n                return scheduled.get(lightWeightThread);\r\n            }\r\n            public void run() {\r\n    \r\n                while (true) {\r\n                    LightWeightThread previous = null;\r\n                    for (LightWeightThread thread : scheduled.keySet()) {\r\n                        scheduled.put(thread, false);\r\n                    }\r\n                    for (LightWeightThread thread : scheduled.keySet()) {\r\n                        if (previous != null) {\r\n                            scheduled.put(previous, false);\r\n                        }\r\n                        scheduled.put(thread, true);\r\n                        thread.run();\r\n    \r\n                        previous = thread;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    \r\n        public interface Preemptible {\r\n            void registerLoop(int name, int defaultValue, int limit);\r\n            int increment(int name);\r\n            boolean isPreempted(int name);\r\n            int getLimit(int name);\r\n            int getValue(int name);\r\n            void preempt(int id);\r\n            int getLoops();\r\n        }\r\n    \r\n        public static abstract class LightWeightThread implements Preemptible {\r\n            public int kernelThreadId;\r\n            public int threadId;\r\n            public KernelThread parent;\r\n            AtomicInteger[] values = new AtomicInteger[1];\r\n            int[] limits = new int[1];\r\n            boolean[] preempted = new boolean[1];\r\n            int[] remembered = new int[1];\r\n            public LightWeightThread(int kernelThreadId, int threadId, KernelThread parent) {\r\n                this.kernelThreadId = kernelThreadId;\r\n                this.threadId = threadId;\r\n                this.parent = parent;\r\n                for (int i = 0 ; i &lt; values.length; i++) {\r\n                    values[i] = new AtomicInteger();\r\n                }\r\n            }\r\n            public void run() {\r\n    \r\n            }\r\n    \r\n            public void registerLoop(int name, int defaultValue, int limit) {\r\n                if (preempted.length &gt; name &amp;&amp; remembered[name] &lt; limit) {\r\n                    values[name].set(remembered[name]);\r\n                    limits[name] = limit;\r\n                } else {\r\n                    values[name].set(defaultValue);\r\n                    limits[name] = limit;\r\n                }\r\n                preempted[name] = false;\r\n    \r\n            }\r\n    \r\n            public int increment(int name) {\r\n                return values[name].incrementAndGet();\r\n            }\r\n    \r\n            public boolean isPreempted(int name) {\r\n                return preempted[name];\r\n            }\r\n    \r\n            public int getLimit(int name) {\r\n                return limits[name];\r\n            }\r\n    \r\n            public int getValue(int name) {\r\n                return values[name].get();\r\n            }\r\n    \r\n            public int initialVar(int name, int value) {\r\n                values[name].set(value);\r\n                return value;\r\n            }\r\n    \r\n            public void preempt(int id) {\r\n                remembered[id] = values[id].get();\r\n                preempted[id] = true;\r\n                while (!values[id].compareAndSet(values[id].get(), limits[id])){};\r\n            }\r\n    \r\n            public int getLoops() {\r\n                return values.length;\r\n            }\r\n        }\r\n    \r\n        public static void main(String[] args) throws InterruptedException {\r\n            List&lt;KernelThread&gt; kernelThreads = new ArrayList&lt;&gt;();\r\n            for (int i = 0; i &lt; 5; i++) {\r\n                KernelThread kt = new KernelThread();\r\n                for (int j = 0 ; j &lt; 5; j++) {\r\n                    LightWeightThread lightWeightThread = new LightWeightThread(i, j, kt) {\r\n                        @Override\r\n                        public void run() {\r\n    \r\n                                while (this.parent.isScheduled(this)) {\r\n                                    System.out.println(String.format(&quot;%d %d&quot;, this.kernelThreadId, this.threadId));\r\n                                    registerLoop(0, 0, 10000000);\r\n                                    for (initialVar(0, 0); getValue(0) &lt; getLimit(0); increment(0)) {\r\n                                        Math.sqrt(getValue(0));\r\n                                    }\r\n    \r\n                                    if (isPreempted(0)) {\r\n                                        System.out.println(String.format(&quot;%d %d: %d was preempted !%d &lt; %d&quot;, this.kernelThreadId, this.threadId, 0, values[0].get(), limits[0]));\r\n                                    }\r\n                                }\r\n    \r\n                            }\r\n    \r\n                    };\r\n                    kt.addLightWeightThread(lightWeightThread);\r\n                }\r\n    \r\n                kernelThreads.add(kt);\r\n            }\r\n            for (KernelThread kt : kernelThreads) {\r\n                kt.start();\r\n            }\r\n            Timer timer = new Timer();\r\n            timer.schedule(new TimerTask() {\r\n                @Override\r\n                public void run() {\r\n                    for (KernelThread kt : kernelThreads) {\r\n    \r\n                        kt.preempt();\r\n                    }\r\n                }\r\n            }, 10, 10);\r\n    \r\n            for (KernelThread kt : kernelThreads) {\r\n                kt.join();\r\n            }\r\n        }\r\n    \r\n    }\r\n\r\nThis is the C  version of the same thing:\r\n\r\n     #include &lt;pthread.h&gt;\r\n     #include &lt;string.h&gt;\r\n     #include &lt;stdio.h&gt;\r\n     #include &lt;stdlib.h&gt;\r\n     #include &lt;unistd.h&gt;\r\n     #include &lt;errno.h&gt;\r\n     #include &lt;ctype.h&gt;\r\n     #include &lt;time.h&gt;\r\n     #include &lt;math.h&gt;\r\n    \r\n     #define handle_error_en(en, msg) \\\r\n             do { errno = en; perror(msg); exit(EXIT_FAILURE); } while (0)\r\n    \r\n     #define handle_error(msg) \\\r\n             do { perror(msg); exit(EXIT_FAILURE); } while (0)\r\n    \r\n    struct lightweight_thread {\r\n      int thread_num;\r\n      volatile int preempted;\r\n      int num_loops;\r\n      int *limit;\r\n      volatile int *value;\r\n      int *remembered;\r\n      int kernel_thread_num;\r\n      struct lightweight_thread* (*user_function) (struct lightweight_thread*);\r\n    };\r\n    \r\n     struct thread_info {    /* Used as argument to thread_start() */\r\n         pthread_t thread_id;        /* ID returned by pthread_create() */\r\n         int       thread_num;       /* Application-defined thread # */\r\n         char     *argv_string;      /* From command-line argument */\r\n        int lightweight_threads_num;\r\n      struct lightweight_thread *user_threads;\r\n      volatile int running;\r\n     };\r\n    \r\n    struct timer_thread {\r\n      pthread_t thread_id;\r\n      struct thread_info *all_threads;\r\n      int num_threads;\r\n      int lightweight_threads_num;\r\n      int delay;\r\n      volatile int running;\r\n    };\r\n    \r\n    static void *\r\n    timer_thread_start(void *arg) {\r\n      int iterations = 0;\r\n      struct timer_thread *timer_thread = arg;\r\n      int msec = 0, trigger = timer_thread-&gt;delay; /* 10ms */\r\n    clock_t before = clock();\r\n    while (timer_thread-&gt;running == 1 &amp;&amp; iterations &lt; 100000) {\r\n    do {\r\n      for (int i = 0 ; i &lt; timer_thread-&gt;num_threads; i++) {\r\n        for (int j = 0 ; j &lt; timer_thread-&gt;all_threads[i].lightweight_threads_num; j++) {\r\n          // printf(&quot;Preempting kernel thread %d user thread %d\\n&quot;, i, j);\r\n          timer_thread-&gt;all_threads[i].user_threads[j].preempted = 0;\r\n          \r\n        }\r\n      }\r\n      for (int i = 0 ; i &lt; timer_thread-&gt;num_threads; i++) {\r\n        for (int j = 0 ; j &lt; timer_thread-&gt;all_threads[i].lightweight_threads_num; j++) {\r\n          \r\n          \r\n          // printf(&quot;Preempting kernel thread %d user thread %d\\n&quot;, i, j);\r\n          for (int loop = 0; loop &lt; timer_thread-&gt;all_threads[i].user_threads[j].num_loops; loop++) {\r\n            timer_thread-&gt;all_threads[i].user_threads[j].remembered[loop] = timer_thread-&gt;all_threads[i].user_threads[j].value[loop];\r\n            timer_thread-&gt;all_threads[i].user_threads[j].value[loop] = timer_thread-&gt;all_threads[i].user_threads[j].limit[loop];\r\n          }\r\n          \r\n        }\r\n      }\r\n    \r\n      clock_t difference = clock() - before;\r\n      msec = difference * 1000 / CLOCKS_PER_SEC;\r\n      iterations++;\r\n    } while ( msec &lt; trigger &amp;&amp; iterations &lt; 100000 );\r\n    \r\n    // printf(&quot;Time taken %d seconds %d milliseconds (%d iterations)\\n&quot;,\r\n    //  msec/1000, msec%1000, iterations);\r\n      }\r\n      return 0;\r\n    }\r\n    \r\n     /* Thread start function: display address near top of our stack,\r\n        and return upper-cased copy of argv_string. */\r\n    \r\n     static void *\r\n     thread_start(void *arg)\r\n     {\r\n         struct thread_info *tinfo = arg;\r\n         char *uargv;\r\n    \r\n         printf(&quot;Thread %d: top of stack near %p; argv_string=%s\\n&quot;,\r\n                 tinfo-&gt;thread_num, (void *) &amp;tinfo, tinfo-&gt;argv_string);\r\n    \r\n         uargv = strdup(tinfo-&gt;argv_string);\r\n         if (uargv == NULL)\r\n             handle_error(&quot;strdup&quot;);\r\n    \r\n         for (char *p = uargv; *p != &#39;\\0&#39;; p++) {\r\n             *p = toupper(*p);\r\n           \r\n           }\r\n    \r\n        while (tinfo-&gt;running == 1) {\r\n          for (int i = 0 ; i &lt; tinfo-&gt;lightweight_threads_num; i++) {\r\n            tinfo-&gt;user_threads[i].preempted = 0;\r\n            \r\n          }\r\n          int previous = -1;\r\n           for (int i = 0 ; i &lt; tinfo-&gt;lightweight_threads_num; i++) {\r\n             if (previous != -1) {\r\n               tinfo-&gt;user_threads[previous].preempted = 0;\r\n             }\r\n            tinfo-&gt;user_threads[i].preempted = 1;\r\n            tinfo-&gt;user_threads[i].user_function(&amp;tinfo-&gt;user_threads[i]);\r\n             previous = i;\r\n          } \r\n        }\r\n    \r\n       \r\n         return uargv;\r\n     }\r\n    \r\n    void\r\n    register_loop(int index, int value, struct lightweight_thread* m, int limit) {\r\n      if (m-&gt;remembered[index] == -1) {\r\n        m-&gt;limit[index] = limit;\r\n        m-&gt;value[index] = value;\r\n      } else {\r\n        m-&gt;limit[index] = limit;\r\n        m-&gt;value[index] = m-&gt;remembered[index];\r\n      }\r\n    }\r\n    \r\n    int\r\n    lightweight_thread_function(struct lightweight_thread* m)\r\n    {\r\n        \r\n        while (m-&gt;preempted != 0) {\r\n          register_loop(0, 0, m, 100000000);\r\n          for (; m-&gt;value[0] &lt; m-&gt;limit[0]; m-&gt;value[0]++) {\r\n            \r\n            sqrt(m-&gt;value[0]);\r\n          }\r\n          printf(&quot;Kernel thread %d User thread %d ran\\n&quot;, m-&gt;kernel_thread_num, m-&gt;thread_num);\r\n          \r\n        }\r\n        \r\n        \r\n        return 0;\r\n    }\r\n    \r\n    struct lightweight_thread*\r\n    create_lightweight_threads(int kernel_thread_num, int num_threads) {\r\n    struct lightweight_thread *lightweight_threads = \r\n      calloc(num_threads, sizeof(*lightweight_threads));\r\n           if (lightweight_threads == NULL)\r\n               handle_error(&quot;calloc lightweight threads&quot;);\r\n      for (int i = 0 ; i &lt; num_threads ; i++) {\r\n        lightweight_threads[i].kernel_thread_num = kernel_thread_num;\r\n        lightweight_threads[i].thread_num = i;\r\n        lightweight_threads[i].num_loops = 1;\r\n        lightweight_threads[i].user_function = lightweight_thread_function;\r\n        int *remembered = calloc(lightweight_threads[i].num_loops, sizeof(*remembered));\r\n        int *value = calloc(lightweight_threads[i].num_loops, sizeof(*value));\r\n        int *limit = calloc(lightweight_threads[i].num_loops, sizeof(*limit));\r\n        lightweight_threads[i].remembered = remembered;\r\n        lightweight_threads[i].value = value;\r\n        lightweight_threads[i].limit = limit;\r\n        for (int j = 0 ; j &lt; lightweight_threads[i].num_loops ; j++) {\r\n        lightweight_threads[i].remembered[j] = -1;\r\n          }\r\n      }\r\n        return lightweight_threads;\r\n    }\r\n    \r\n     int\r\n     main(int argc, char *argv[])\r\n     {\r\n         int s, timer_s, opt, num_threads;\r\n         pthread_attr_t attr;\r\n         pthread_attr_t timer_attr;\r\n         ssize_t stack_size;\r\n         void *res;\r\n         int timer_result;\r\n    \r\n         /* The &quot;-s&quot; option specifies a stack size for our threads. */\r\n    \r\n         stack_size = 16384ul;\r\n         num_threads = 5;\r\n       \r\n         while ((opt = getopt(argc, argv, &quot;t:&quot;)) != -1) {\r\n             switch (opt) {\r\n             \r\n            case &#39;t&#39;:\r\n                 num_threads = strtoul(optarg, NULL, 0);\r\n                 break;\r\n               \r\n             default:\r\n                 fprintf(stderr, &quot;Usage: %s [-t thread-size] arg...\\n&quot;,\r\n                         argv[0]);\r\n                 exit(EXIT_FAILURE);\r\n             }\r\n         }\r\n    \r\n         \r\n    \r\n         /* Initialize thread creation attributes. */\r\n    \r\n         s = pthread_attr_init(&amp;attr);\r\n         if (s != 0)\r\n             handle_error_en(s, &quot;pthread_attr_init&quot;);\r\n         timer_s = pthread_attr_init(&amp;timer_attr);\r\n         if (timer_s != 0)\r\n             handle_error_en(s, &quot;pthread_attr_init timer_s&quot;);\r\n    \r\n       \r\n         if (stack_size &gt; 0) {\r\n             s = pthread_attr_setstacksize(&amp;attr, stack_size);\r\n             int t = pthread_attr_setstacksize(&amp;timer_attr, stack_size);\r\n           if (t != 0)\r\n                 handle_error_en(t, &quot;pthread_attr_setstacksize timer&quot;);\r\n             if (s != 0)\r\n                 handle_error_en(s, &quot;pthread_attr_setstacksize&quot;);\r\n         }\r\n    \r\n         /* Allocate memory for pthread_create() arguments. */\r\n    \r\n         struct thread_info *tinfo = calloc(num_threads, sizeof(*tinfo));\r\n         if (tinfo == NULL)\r\n             handle_error(&quot;calloc&quot;);\r\n        for (int tnum = 0 ; tnum &lt; num_threads; tnum++) {\r\n          tinfo[tnum].running = 1;\r\n        }\r\n       struct timer_thread *timer_info = calloc(1, sizeof(*timer_info));\r\n         timer_info-&gt;running = 1;\r\n          timer_info-&gt;delay = 10;\r\n         timer_info-&gt;num_threads = num_threads;\r\n          \r\n         if (timer_info == NULL)\r\n             handle_error(&quot;calloc timer thread&quot;);\r\n    \r\n         /* Create one thread for each command-line argument. */\r\n        timer_info-&gt;all_threads = tinfo;\r\n         for (int tnum = 0; tnum &lt; num_threads; tnum++) {\r\n             tinfo[tnum].thread_num = tnum + 1;\r\n             tinfo[tnum].argv_string = argv[0];\r\n    \r\n            struct lightweight_thread *lightweight_threads = create_lightweight_threads(tnum, num_threads);\r\n            tinfo[tnum].user_threads = lightweight_threads;\r\n            tinfo[tnum].lightweight_threads_num = num_threads;\r\n             /* The pthread_create() call stores the thread ID into\r\n                corresponding element of tinfo[]. */\r\n    \r\n             s = pthread_create(&amp;tinfo[tnum].thread_id, &amp;attr,\r\n                                &amp;thread_start, &amp;tinfo[tnum]);\r\n             if (s != 0)\r\n                 handle_error_en(s, &quot;pthread_create&quot;);\r\n         }\r\n    \r\n       s = pthread_create(&amp;timer_info[0].thread_id, &amp;timer_attr,\r\n                                &amp;timer_thread_start, &amp;timer_info[0]);\r\n             if (s != 0)\r\n                 handle_error_en(s, &quot;pthread_create&quot;);\r\n    \r\n         /* Destroy the thread attributes object, since it is no\r\n            longer needed. */\r\n    \r\n         s = pthread_attr_destroy(&amp;attr);\r\n         if (s != 0)\r\n             handle_error_en(s, &quot;pthread_attr_destroy&quot;);\r\n         s = pthread_attr_destroy(&amp;timer_attr);\r\n         if (s != 0)\r\n             handle_error_en(s, &quot;pthread_attr_destroy timer&quot;);\r\n    \r\n         /* Now join with each thread, and display its returned value. */\r\n    \r\n       s = pthread_join(timer_info-&gt;thread_id, &amp;timer_result);\r\n             if (s != 0)\r\n                 handle_error_en(s, &quot;pthread_join&quot;);\r\n    \r\n             printf(&quot;Joined timer thread&quot;);\r\n       \r\n    \r\n         for (int tnum = 0; tnum &lt; num_threads; tnum++) {\r\n              tinfo[tnum].running = 0;\r\n             s = pthread_join(tinfo[tnum].thread_id, &amp;res);\r\n             if (s != 0)\r\n                 handle_error_en(s, &quot;pthread_join&quot;);\r\n    \r\n             printf(&quot;Joined with thread %d; returned value was %s\\n&quot;,\r\n                     tinfo[tnum].thread_num, (char *) res);\r\n             free(res);      /* Free memory allocated by thread */\r\n           for (int user_thread_num = 0 ; user_thread_num &lt; num_threads; user_thread_num++) {\r\n             \r\n               free(tinfo[tnum].user_threads[user_thread_num].remembered);\r\n               free(tinfo[tnum].user_threads[user_thread_num].value);\r\n             free(tinfo[tnum].user_threads[user_thread_num].limit);\r\n             \r\n           }\r\n           free(tinfo[tnum].user_threads);\r\n         }\r\n       \r\n       \r\n       \r\n         free(timer_info);\r\n         free(tinfo);\r\n         exit(EXIT_SUCCESS);\r\n     }\r\n\r\nThe Rust version uses unsafe.\r\n\r\n    extern crate timer;\r\n    extern crate chrono;\r\n    \r\n    use std::sync::Arc;\r\n    use std::thread;\r\n    use std::sync::atomic::{AtomicI32, Ordering};\r\n    use std::{time};\r\n    \r\n    struct LightweightThread {\r\n      thread_num: i32, \r\n      preempted: AtomicI32,\r\n      num_loops: i32,\r\n      limit: Vec&lt;AtomicI32&gt;,\r\n      value: Vec&lt;AtomicI32&gt;,\r\n      remembered: Vec&lt;AtomicI32&gt;,\r\n      kernel_thread_num: i32,\r\n      lightweight_thread: fn(&amp;mut LightweightThread)\r\n    }\r\n    fn register_loop(loopindex: usize, initialValue: i32, limit: i32, _thread: &amp;mut LightweightThread) {\r\n      if _thread.remembered[loopindex].load(Ordering::Relaxed) &lt; _thread.limit[loopindex].load(Ordering::Relaxed) {\r\n        _thread.value[loopindex].store( _thread.remembered[loopindex].load(Ordering::Relaxed), Ordering::Relaxed);\r\n        _thread.limit[loopindex].store(limit, Ordering::Relaxed);\r\n      } else {\r\n        _thread.value[loopindex].store(initialValue, Ordering::Relaxed);\r\n        _thread.limit[loopindex].store(limit, Ordering::Relaxed);\r\n      }\r\n      \r\n    }\r\n    fn lightweight_thread(_thread: &amp;mut LightweightThread) {\r\n      register_loop(0usize, 0, 1000000, _thread);\r\n      while _thread.preempted.load(Ordering::Relaxed) == 1 {\r\n        while _thread.value[0].load(Ordering::Relaxed) &lt; _thread.limit[0].load(Ordering::Relaxed) {\r\n          let i = _thread.value[0].load(Ordering::Relaxed);\r\n          f64::sqrt(i.into());\r\n          _thread.value[0].fetch_add(1, Ordering::Relaxed);\r\n        }\r\n      }\r\n      println!(&quot;Kernel thread {} User thread {}&quot;, _thread.kernel_thread_num, _thread.thread_num)\r\n    }\r\n    \r\n    fn main() {\r\n      println!(&quot;Hello, world!&quot;);\r\n      let timer = timer::Timer::new();\r\n      static mut threads:Vec&lt;LightweightThread&gt; = Vec::new();\r\n      let mut thread_handles = Vec::new();\r\n      for kernel_thread_num in 1..=5 {\r\n        \r\n        let thread_join_handle = thread::spawn(move || {\r\n          \r\n          \r\n          \r\n          for i in 1..=5 {\r\n            let mut lthread = LightweightThread {\r\n              thread_num: i,\r\n              preempted: AtomicI32::new(0),\r\n              num_loops: 1,\r\n              limit: Vec::new(),\r\n              value: Vec::new(),\r\n              remembered: Vec::new(),\r\n              kernel_thread_num: kernel_thread_num.clone(),\r\n              lightweight_thread: lightweight_thread\r\n            };\r\n            \r\n            lthread.limit.push(AtomicI32::new(-1));\r\n          \r\n            lthread.value.push(AtomicI32::new(-1));\r\n          \r\n            lthread.remembered.push(AtomicI32::new(1));\r\n            \r\n            \r\n            unsafe {\r\n              threads.push(lthread);\r\n            }\r\n          }\r\n    \r\n          \r\n          \r\n          loop {\r\n            let mut previous:Option&lt;&amp;mut LightweightThread&gt; = None;\r\n            unsafe {\r\n              for (_pos, current_thread) in threads.iter_mut().enumerate() {\r\n                \r\n                if current_thread.kernel_thread_num != kernel_thread_num {\r\n                  \r\n                  continue;\r\n                }\r\n                if !previous.is_none() {\r\n                  previous.unwrap().preempted.store(0, Ordering::Relaxed)\r\n                }\r\n                current_thread.preempted.store(1, Ordering::Relaxed);\r\n                (current_thread.lightweight_thread)(current_thread);\r\n                previous = Some(current_thread);\r\n                // println!(&quot;Running&quot;)\r\n              }\r\n            }\r\n          } // loop forever\r\n      }); // thread\r\n        \r\n        thread_handles.push(thread_join_handle);\r\n      } // thread generation\r\n    \r\n    \r\n    \r\n     \r\n    \r\n    let timer_handle = thread::spawn(move || {\r\n      \r\n      unsafe {\r\n    \r\n       loop {\r\n      \r\n      \r\n        for thread in threads.iter() {\r\n          thread.preempted.store(0, Ordering::Relaxed);\r\n        }\r\n        let mut previous:Option&lt;usize&gt; = None;\r\n        for (index,  thread) in threads.iter_mut().enumerate() {\r\n          if !previous.is_none() {\r\n            threads[previous.unwrap()].preempted.store(0, Ordering::Relaxed);\r\n          }\r\n          previous = Some(index);\r\n          for loopindex in 0..thread.num_loops {\r\n            thread.remembered[loopindex as usize].store(thread.value[loopindex as usize].load(Ordering::Relaxed), Ordering::Relaxed);\r\n            thread.value[loopindex as usize].store(thread.limit[loopindex as usize].load(Ordering::Relaxed), Ordering::Relaxed);\r\n            \r\n          }\r\n          thread.preempted.store(1, Ordering::Relaxed);\r\n        }\r\n    \r\n    let ten_millis = time::Duration::from_millis(10);\r\n    \r\n    \r\n    thread::sleep(ten_millis);\r\n         \r\n      } // loop\r\n    \r\n    } // unsafe\r\n      \r\n    }); // end of thread\r\n      timer_handle.join();\r\n       for thread in thread_handles {\r\n        thread.join();\r\n      }\r\n    \r\n      \r\n    \r\n    }\r\n","title":"Preempt a hot loop thread from user space","body":"<p>In Java, C and Rust you can preempt a thread in a hot loop by directly changing the looped variable to go beyond the loop invariant. You can do this from any thread.</p>\n<p>If you need to use the loop variable (you probably do), make sure you copy it into a variable like this, or you'll have a data race:</p>\n<pre><code>for (initialVar(0, 0), int loopVal = 0; getValue(0) &lt; getLimit(0); loopVal = increment(0)) {\n                                        Math.sqrt(loopVal);\n                                    }\n</code></pre>\n<p>Or</p>\n<pre><code> for (int loopVal = 0; m-&gt;value[0] &lt; m-&gt;limit[0]; loopVal = m-&gt;value[0]++) {\n            \n            sqrt(loopVal);\n          }\n</code></pre>\n<p>You can create cancellable APIs with this approach, your cancel token can represent all the loops indexes that the code is in. So you can create profoundly responsive code. Even if you are deep in encryption or compression or uploading data. As long as you're not in a syscall.</p>\n<p>I also pasted a C version of this sourcecode below the Java version. The Rust version is below the C version</p>\n<pre><code>import java.util.*;\nimport java.util.concurrent.atomic.AtomicInteger;\n\npublic class Scheduler {\n\n    public static class KernelThread extends Thread {\n        public Map&lt;LightWeightThread, Boolean&gt; scheduled = new HashMap&lt;&gt;();\n\n        public void preempt() {\n            for (LightWeightThread thread : scheduled.keySet()) {\n                scheduled.put(thread, false);\n                for (int loop = 0 ; loop &lt; thread.getLoops(); loop++) {\n                    thread.preempt(loop);\n                }\n            }\n\n        }\n        public void addLightWeightThread(LightWeightThread thread) {\n            scheduled.put(thread, false);\n        }\n\n        public boolean isScheduled(LightWeightThread lightWeightThread) {\n            return scheduled.get(lightWeightThread);\n        }\n        public void run() {\n\n            while (true) {\n                LightWeightThread previous = null;\n                for (LightWeightThread thread : scheduled.keySet()) {\n                    scheduled.put(thread, false);\n                }\n                for (LightWeightThread thread : scheduled.keySet()) {\n                    if (previous != null) {\n                        scheduled.put(previous, false);\n                    }\n                    scheduled.put(thread, true);\n                    thread.run();\n\n                    previous = thread;\n                }\n            }\n        }\n    }\n\n    public interface Preemptible {\n        void registerLoop(int name, int defaultValue, int limit);\n        int increment(int name);\n        boolean isPreempted(int name);\n        int getLimit(int name);\n        int getValue(int name);\n        void preempt(int id);\n        int getLoops();\n    }\n\n    public static abstract class LightWeightThread implements Preemptible {\n        public int kernelThreadId;\n        public int threadId;\n        public KernelThread parent;\n        AtomicInteger[] values = new AtomicInteger[1];\n        int[] limits = new int[1];\n        boolean[] preempted = new boolean[1];\n        int[] remembered = new int[1];\n        public LightWeightThread(int kernelThreadId, int threadId, KernelThread parent) {\n            this.kernelThreadId = kernelThreadId;\n            this.threadId = threadId;\n            this.parent = parent;\n            for (int i = 0 ; i &lt; values.length; i++) {\n                values[i] = new AtomicInteger();\n            }\n        }\n        public void run() {\n\n        }\n\n        public void registerLoop(int name, int defaultValue, int limit) {\n            if (preempted.length &gt; name &amp;&amp; remembered[name] &lt; limit) {\n                values[name].set(remembered[name]);\n                limits[name] = limit;\n            } else {\n                values[name].set(defaultValue);\n                limits[name] = limit;\n            }\n            preempted[name] = false;\n\n        }\n\n        public int increment(int name) {\n            return values[name].incrementAndGet();\n        }\n\n        public boolean isPreempted(int name) {\n            return preempted[name];\n        }\n\n        public int getLimit(int name) {\n            return limits[name];\n        }\n\n        public int getValue(int name) {\n            return values[name].get();\n        }\n\n        public int initialVar(int name, int value) {\n            values[name].set(value);\n            return value;\n        }\n\n        public void preempt(int id) {\n            remembered[id] = values[id].get();\n            preempted[id] = true;\n            while (!values[id].compareAndSet(values[id].get(), limits[id])){};\n        }\n\n        public int getLoops() {\n            return values.length;\n        }\n    }\n\n    public static void main(String[] args) throws InterruptedException {\n        List&lt;KernelThread&gt; kernelThreads = new ArrayList&lt;&gt;();\n        for (int i = 0; i &lt; 5; i++) {\n            KernelThread kt = new KernelThread();\n            for (int j = 0 ; j &lt; 5; j++) {\n                LightWeightThread lightWeightThread = new LightWeightThread(i, j, kt) {\n                    @Override\n                    public void run() {\n\n                            while (this.parent.isScheduled(this)) {\n                                System.out.println(String.format(&quot;%d %d&quot;, this.kernelThreadId, this.threadId));\n                                registerLoop(0, 0, 10000000);\n                                for (initialVar(0, 0); getValue(0) &lt; getLimit(0); increment(0)) {\n                                    Math.sqrt(getValue(0));\n                                }\n\n                                if (isPreempted(0)) {\n                                    System.out.println(String.format(&quot;%d %d: %d was preempted !%d &lt; %d&quot;, this.kernelThreadId, this.threadId, 0, values[0].get(), limits[0]));\n                                }\n                            }\n\n                        }\n\n                };\n                kt.addLightWeightThread(lightWeightThread);\n            }\n\n            kernelThreads.add(kt);\n        }\n        for (KernelThread kt : kernelThreads) {\n            kt.start();\n        }\n        Timer timer = new Timer();\n        timer.schedule(new TimerTask() {\n            @Override\n            public void run() {\n                for (KernelThread kt : kernelThreads) {\n\n                    kt.preempt();\n                }\n            }\n        }, 10, 10);\n\n        for (KernelThread kt : kernelThreads) {\n            kt.join();\n        }\n    }\n\n}\n</code></pre>\n<p>This is the C  version of the same thing:</p>\n<pre><code> #include &lt;pthread.h&gt;\n #include &lt;string.h&gt;\n #include &lt;stdio.h&gt;\n #include &lt;stdlib.h&gt;\n #include &lt;unistd.h&gt;\n #include &lt;errno.h&gt;\n #include &lt;ctype.h&gt;\n #include &lt;time.h&gt;\n #include &lt;math.h&gt;\n\n #define handle_error_en(en, msg) \\\n         do { errno = en; perror(msg); exit(EXIT_FAILURE); } while (0)\n\n #define handle_error(msg) \\\n         do { perror(msg); exit(EXIT_FAILURE); } while (0)\n\nstruct lightweight_thread {\n  int thread_num;\n  volatile int preempted;\n  int num_loops;\n  int *limit;\n  volatile int *value;\n  int *remembered;\n  int kernel_thread_num;\n  struct lightweight_thread* (*user_function) (struct lightweight_thread*);\n};\n\n struct thread_info {    /* Used as argument to thread_start() */\n     pthread_t thread_id;        /* ID returned by pthread_create() */\n     int       thread_num;       /* Application-defined thread # */\n     char     *argv_string;      /* From command-line argument */\n    int lightweight_threads_num;\n  struct lightweight_thread *user_threads;\n  volatile int running;\n };\n\nstruct timer_thread {\n  pthread_t thread_id;\n  struct thread_info *all_threads;\n  int num_threads;\n  int lightweight_threads_num;\n  int delay;\n  volatile int running;\n};\n\nstatic void *\ntimer_thread_start(void *arg) {\n  int iterations = 0;\n  struct timer_thread *timer_thread = arg;\n  int msec = 0, trigger = timer_thread-&gt;delay; /* 10ms */\nclock_t before = clock();\nwhile (timer_thread-&gt;running == 1 &amp;&amp; iterations &lt; 100000) {\ndo {\n  for (int i = 0 ; i &lt; timer_thread-&gt;num_threads; i++) {\n    for (int j = 0 ; j &lt; timer_thread-&gt;all_threads[i].lightweight_threads_num; j++) {\n      // printf(&quot;Preempting kernel thread %d user thread %d\\n&quot;, i, j);\n      timer_thread-&gt;all_threads[i].user_threads[j].preempted = 0;\n      \n    }\n  }\n  for (int i = 0 ; i &lt; timer_thread-&gt;num_threads; i++) {\n    for (int j = 0 ; j &lt; timer_thread-&gt;all_threads[i].lightweight_threads_num; j++) {\n      \n      \n      // printf(&quot;Preempting kernel thread %d user thread %d\\n&quot;, i, j);\n      for (int loop = 0; loop &lt; timer_thread-&gt;all_threads[i].user_threads[j].num_loops; loop++) {\n        timer_thread-&gt;all_threads[i].user_threads[j].remembered[loop] = timer_thread-&gt;all_threads[i].user_threads[j].value[loop];\n        timer_thread-&gt;all_threads[i].user_threads[j].value[loop] = timer_thread-&gt;all_threads[i].user_threads[j].limit[loop];\n      }\n      \n    }\n  }\n\n  clock_t difference = clock() - before;\n  msec = difference * 1000 / CLOCKS_PER_SEC;\n  iterations++;\n} while ( msec &lt; trigger &amp;&amp; iterations &lt; 100000 );\n\n// printf(&quot;Time taken %d seconds %d milliseconds (%d iterations)\\n&quot;,\n//  msec/1000, msec%1000, iterations);\n  }\n  return 0;\n}\n\n /* Thread start function: display address near top of our stack,\n    and return upper-cased copy of argv_string. */\n\n static void *\n thread_start(void *arg)\n {\n     struct thread_info *tinfo = arg;\n     char *uargv;\n\n     printf(&quot;Thread %d: top of stack near %p; argv_string=%s\\n&quot;,\n             tinfo-&gt;thread_num, (void *) &amp;tinfo, tinfo-&gt;argv_string);\n\n     uargv = strdup(tinfo-&gt;argv_string);\n     if (uargv == NULL)\n         handle_error(&quot;strdup&quot;);\n\n     for (char *p = uargv; *p != '\\0'; p++) {\n         *p = toupper(*p);\n       \n       }\n\n    while (tinfo-&gt;running == 1) {\n      for (int i = 0 ; i &lt; tinfo-&gt;lightweight_threads_num; i++) {\n        tinfo-&gt;user_threads[i].preempted = 0;\n        \n      }\n      int previous = -1;\n       for (int i = 0 ; i &lt; tinfo-&gt;lightweight_threads_num; i++) {\n         if (previous != -1) {\n           tinfo-&gt;user_threads[previous].preempted = 0;\n         }\n        tinfo-&gt;user_threads[i].preempted = 1;\n        tinfo-&gt;user_threads[i].user_function(&amp;tinfo-&gt;user_threads[i]);\n         previous = i;\n      } \n    }\n\n   \n     return uargv;\n }\n\nvoid\nregister_loop(int index, int value, struct lightweight_thread* m, int limit) {\n  if (m-&gt;remembered[index] == -1) {\n    m-&gt;limit[index] = limit;\n    m-&gt;value[index] = value;\n  } else {\n    m-&gt;limit[index] = limit;\n    m-&gt;value[index] = m-&gt;remembered[index];\n  }\n}\n\nint\nlightweight_thread_function(struct lightweight_thread* m)\n{\n    \n    while (m-&gt;preempted != 0) {\n      register_loop(0, 0, m, 100000000);\n      for (; m-&gt;value[0] &lt; m-&gt;limit[0]; m-&gt;value[0]++) {\n        \n        sqrt(m-&gt;value[0]);\n      }\n      printf(&quot;Kernel thread %d User thread %d ran\\n&quot;, m-&gt;kernel_thread_num, m-&gt;thread_num);\n      \n    }\n    \n    \n    return 0;\n}\n\nstruct lightweight_thread*\ncreate_lightweight_threads(int kernel_thread_num, int num_threads) {\nstruct lightweight_thread *lightweight_threads = \n  calloc(num_threads, sizeof(*lightweight_threads));\n       if (lightweight_threads == NULL)\n           handle_error(&quot;calloc lightweight threads&quot;);\n  for (int i = 0 ; i &lt; num_threads ; i++) {\n    lightweight_threads[i].kernel_thread_num = kernel_thread_num;\n    lightweight_threads[i].thread_num = i;\n    lightweight_threads[i].num_loops = 1;\n    lightweight_threads[i].user_function = lightweight_thread_function;\n    int *remembered = calloc(lightweight_threads[i].num_loops, sizeof(*remembered));\n    int *value = calloc(lightweight_threads[i].num_loops, sizeof(*value));\n    int *limit = calloc(lightweight_threads[i].num_loops, sizeof(*limit));\n    lightweight_threads[i].remembered = remembered;\n    lightweight_threads[i].value = value;\n    lightweight_threads[i].limit = limit;\n    for (int j = 0 ; j &lt; lightweight_threads[i].num_loops ; j++) {\n    lightweight_threads[i].remembered[j] = -1;\n      }\n  }\n    return lightweight_threads;\n}\n\n int\n main(int argc, char *argv[])\n {\n     int s, timer_s, opt, num_threads;\n     pthread_attr_t attr;\n     pthread_attr_t timer_attr;\n     ssize_t stack_size;\n     void *res;\n     int timer_result;\n\n     /* The &quot;-s&quot; option specifies a stack size for our threads. */\n\n     stack_size = 16384ul;\n     num_threads = 5;\n   \n     while ((opt = getopt(argc, argv, &quot;t:&quot;)) != -1) {\n         switch (opt) {\n         \n        case 't':\n             num_threads = strtoul(optarg, NULL, 0);\n             break;\n           \n         default:\n             fprintf(stderr, &quot;Usage: %s [-t thread-size] arg...\\n&quot;,\n                     argv[0]);\n             exit(EXIT_FAILURE);\n         }\n     }\n\n     \n\n     /* Initialize thread creation attributes. */\n\n     s = pthread_attr_init(&amp;attr);\n     if (s != 0)\n         handle_error_en(s, &quot;pthread_attr_init&quot;);\n     timer_s = pthread_attr_init(&amp;timer_attr);\n     if (timer_s != 0)\n         handle_error_en(s, &quot;pthread_attr_init timer_s&quot;);\n\n   \n     if (stack_size &gt; 0) {\n         s = pthread_attr_setstacksize(&amp;attr, stack_size);\n         int t = pthread_attr_setstacksize(&amp;timer_attr, stack_size);\n       if (t != 0)\n             handle_error_en(t, &quot;pthread_attr_setstacksize timer&quot;);\n         if (s != 0)\n             handle_error_en(s, &quot;pthread_attr_setstacksize&quot;);\n     }\n\n     /* Allocate memory for pthread_create() arguments. */\n\n     struct thread_info *tinfo = calloc(num_threads, sizeof(*tinfo));\n     if (tinfo == NULL)\n         handle_error(&quot;calloc&quot;);\n    for (int tnum = 0 ; tnum &lt; num_threads; tnum++) {\n      tinfo[tnum].running = 1;\n    }\n   struct timer_thread *timer_info = calloc(1, sizeof(*timer_info));\n     timer_info-&gt;running = 1;\n      timer_info-&gt;delay = 10;\n     timer_info-&gt;num_threads = num_threads;\n      \n     if (timer_info == NULL)\n         handle_error(&quot;calloc timer thread&quot;);\n\n     /* Create one thread for each command-line argument. */\n    timer_info-&gt;all_threads = tinfo;\n     for (int tnum = 0; tnum &lt; num_threads; tnum++) {\n         tinfo[tnum].thread_num = tnum + 1;\n         tinfo[tnum].argv_string = argv[0];\n\n        struct lightweight_thread *lightweight_threads = create_lightweight_threads(tnum, num_threads);\n        tinfo[tnum].user_threads = lightweight_threads;\n        tinfo[tnum].lightweight_threads_num = num_threads;\n         /* The pthread_create() call stores the thread ID into\n            corresponding element of tinfo[]. */\n\n         s = pthread_create(&amp;tinfo[tnum].thread_id, &amp;attr,\n                            &amp;thread_start, &amp;tinfo[tnum]);\n         if (s != 0)\n             handle_error_en(s, &quot;pthread_create&quot;);\n     }\n\n   s = pthread_create(&amp;timer_info[0].thread_id, &amp;timer_attr,\n                            &amp;timer_thread_start, &amp;timer_info[0]);\n         if (s != 0)\n             handle_error_en(s, &quot;pthread_create&quot;);\n\n     /* Destroy the thread attributes object, since it is no\n        longer needed. */\n\n     s = pthread_attr_destroy(&amp;attr);\n     if (s != 0)\n         handle_error_en(s, &quot;pthread_attr_destroy&quot;);\n     s = pthread_attr_destroy(&amp;timer_attr);\n     if (s != 0)\n         handle_error_en(s, &quot;pthread_attr_destroy timer&quot;);\n\n     /* Now join with each thread, and display its returned value. */\n\n   s = pthread_join(timer_info-&gt;thread_id, &amp;timer_result);\n         if (s != 0)\n             handle_error_en(s, &quot;pthread_join&quot;);\n\n         printf(&quot;Joined timer thread&quot;);\n   \n\n     for (int tnum = 0; tnum &lt; num_threads; tnum++) {\n          tinfo[tnum].running = 0;\n         s = pthread_join(tinfo[tnum].thread_id, &amp;res);\n         if (s != 0)\n             handle_error_en(s, &quot;pthread_join&quot;);\n\n         printf(&quot;Joined with thread %d; returned value was %s\\n&quot;,\n                 tinfo[tnum].thread_num, (char *) res);\n         free(res);      /* Free memory allocated by thread */\n       for (int user_thread_num = 0 ; user_thread_num &lt; num_threads; user_thread_num++) {\n         \n           free(tinfo[tnum].user_threads[user_thread_num].remembered);\n           free(tinfo[tnum].user_threads[user_thread_num].value);\n         free(tinfo[tnum].user_threads[user_thread_num].limit);\n         \n       }\n       free(tinfo[tnum].user_threads);\n     }\n   \n   \n   \n     free(timer_info);\n     free(tinfo);\n     exit(EXIT_SUCCESS);\n }\n</code></pre>\n<p>The Rust version uses unsafe.</p>\n<pre><code>extern crate timer;\nextern crate chrono;\n\nuse std::sync::Arc;\nuse std::thread;\nuse std::sync::atomic::{AtomicI32, Ordering};\nuse std::{time};\n\nstruct LightweightThread {\n  thread_num: i32, \n  preempted: AtomicI32,\n  num_loops: i32,\n  limit: Vec&lt;AtomicI32&gt;,\n  value: Vec&lt;AtomicI32&gt;,\n  remembered: Vec&lt;AtomicI32&gt;,\n  kernel_thread_num: i32,\n  lightweight_thread: fn(&amp;mut LightweightThread)\n}\nfn register_loop(loopindex: usize, initialValue: i32, limit: i32, _thread: &amp;mut LightweightThread) {\n  if _thread.remembered[loopindex].load(Ordering::Relaxed) &lt; _thread.limit[loopindex].load(Ordering::Relaxed) {\n    _thread.value[loopindex].store( _thread.remembered[loopindex].load(Ordering::Relaxed), Ordering::Relaxed);\n    _thread.limit[loopindex].store(limit, Ordering::Relaxed);\n  } else {\n    _thread.value[loopindex].store(initialValue, Ordering::Relaxed);\n    _thread.limit[loopindex].store(limit, Ordering::Relaxed);\n  }\n  \n}\nfn lightweight_thread(_thread: &amp;mut LightweightThread) {\n  register_loop(0usize, 0, 1000000, _thread);\n  while _thread.preempted.load(Ordering::Relaxed) == 1 {\n    while _thread.value[0].load(Ordering::Relaxed) &lt; _thread.limit[0].load(Ordering::Relaxed) {\n      let i = _thread.value[0].load(Ordering::Relaxed);\n      f64::sqrt(i.into());\n      _thread.value[0].fetch_add(1, Ordering::Relaxed);\n    }\n  }\n  println!(&quot;Kernel thread {} User thread {}&quot;, _thread.kernel_thread_num, _thread.thread_num)\n}\n\nfn main() {\n  println!(&quot;Hello, world!&quot;);\n  let timer = timer::Timer::new();\n  static mut threads:Vec&lt;LightweightThread&gt; = Vec::new();\n  let mut thread_handles = Vec::new();\n  for kernel_thread_num in 1..=5 {\n    \n    let thread_join_handle = thread::spawn(move || {\n      \n      \n      \n      for i in 1..=5 {\n        let mut lthread = LightweightThread {\n          thread_num: i,\n          preempted: AtomicI32::new(0),\n          num_loops: 1,\n          limit: Vec::new(),\n          value: Vec::new(),\n          remembered: Vec::new(),\n          kernel_thread_num: kernel_thread_num.clone(),\n          lightweight_thread: lightweight_thread\n        };\n        \n        lthread.limit.push(AtomicI32::new(-1));\n      \n        lthread.value.push(AtomicI32::new(-1));\n      \n        lthread.remembered.push(AtomicI32::new(1));\n        \n        \n        unsafe {\n          threads.push(lthread);\n        }\n      }\n\n      \n      \n      loop {\n        let mut previous:Option&lt;&amp;mut LightweightThread&gt; = None;\n        unsafe {\n          for (_pos, current_thread) in threads.iter_mut().enumerate() {\n            \n            if current_thread.kernel_thread_num != kernel_thread_num {\n              \n              continue;\n            }\n            if !previous.is_none() {\n              previous.unwrap().preempted.store(0, Ordering::Relaxed)\n            }\n            current_thread.preempted.store(1, Ordering::Relaxed);\n            (current_thread.lightweight_thread)(current_thread);\n            previous = Some(current_thread);\n            // println!(&quot;Running&quot;)\n          }\n        }\n      } // loop forever\n  }); // thread\n    \n    thread_handles.push(thread_join_handle);\n  } // thread generation\n\n\n\n \n\nlet timer_handle = thread::spawn(move || {\n  \n  unsafe {\n\n   loop {\n  \n  \n    for thread in threads.iter() {\n      thread.preempted.store(0, Ordering::Relaxed);\n    }\n    let mut previous:Option&lt;usize&gt; = None;\n    for (index,  thread) in threads.iter_mut().enumerate() {\n      if !previous.is_none() {\n        threads[previous.unwrap()].preempted.store(0, Ordering::Relaxed);\n      }\n      previous = Some(index);\n      for loopindex in 0..thread.num_loops {\n        thread.remembered[loopindex as usize].store(thread.value[loopindex as usize].load(Ordering::Relaxed), Ordering::Relaxed);\n        thread.value[loopindex as usize].store(thread.limit[loopindex as usize].load(Ordering::Relaxed), Ordering::Relaxed);\n        \n      }\n      thread.preempted.store(1, Ordering::Relaxed);\n    }\n\nlet ten_millis = time::Duration::from_millis(10);\n\n\nthread::sleep(ten_millis);\n     \n  } // loop\n\n} // unsafe\n  \n}); // end of thread\n  timer_handle.join();\n   for thread in thread_handles {\n    thread.join();\n  }\n\n  \n\n}\n</code></pre>\n"}],"owner":{"account_id":9371025,"reputation":141,"user_id":10662977,"display_name":"Samuel Squire"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":311,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":72626095,"answer_count":1,"score":1,"last_activity_date":1689871650,"creation_date":1655259916,"question_id":72625285,"body_markdown":"I have an idea and it&#39;s kind of complicated and you must be familiar with assembly and multithreading to understand why I want to do this.\r\n\r\nDid you ever notice that the cancel button never does anything when the program you are running is in a hot loop? But if you put an if statement in the hot loop you slow it down drastically.\r\n\r\nIn the Linux kernel, processes are scheduled by a timer onto the CPU by an interrupt when the timeslice has expired. See the schedule method in kernel/sched/core.c\r\n\r\nNow in user space in Java and C programs, you have a thread in a hot loop unless you put an if statement inside the hot loop to check an aborted flag you cannot interrupt the hot loop from user space.\r\n\r\nOnly the kernel can preempt a thread.\r\n\r\nBut I have an idea on how we can preempt a thread in C programming from a userspace.\r\n\r\nWe can disassemble a function address to a RET to get its assembly. We can therefore identify the conditional jumps of the loop. We can introduce a go-to statement of __sched_yield() after the hot loop we can identify where in memory the relative address of the Sched yield from the disassembly.\r\n\r\nFrom this, we can virtually interrupt a user thread from user space. Shall need to madvise/memprotect the executable code to update the conditional jump statement to jump to the goto statement.\r\n\r\nWhat do you think? How easy is this?\r\n\r\n * [How to learn the size of a function][1] \r\n * [How to disassemble a function with libopcodes][2]\r\n * [How to update memory of functions][3]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/10966856/find-size-of-a-function-in-c\r\n  [2]: https://blog.yossarian.net/2019/05/18/Basic-disassembly-with-libopcodes\r\n  [3]: https://stackoverflow.com/questions/7447013/how-to-write-self-modifying-code-in-c","title":"Preempt a hot loop thread from user space","body":"<p>I have an idea and it's kind of complicated and you must be familiar with assembly and multithreading to understand why I want to do this.</p>\n<p>Did you ever notice that the cancel button never does anything when the program you are running is in a hot loop? But if you put an if statement in the hot loop you slow it down drastically.</p>\n<p>In the Linux kernel, processes are scheduled by a timer onto the CPU by an interrupt when the timeslice has expired. See the schedule method in kernel/sched/core.c</p>\n<p>Now in user space in Java and C programs, you have a thread in a hot loop unless you put an if statement inside the hot loop to check an aborted flag you cannot interrupt the hot loop from user space.</p>\n<p>Only the kernel can preempt a thread.</p>\n<p>But I have an idea on how we can preempt a thread in C programming from a userspace.</p>\n<p>We can disassemble a function address to a RET to get its assembly. We can therefore identify the conditional jumps of the loop. We can introduce a go-to statement of __sched_yield() after the hot loop we can identify where in memory the relative address of the Sched yield from the disassembly.</p>\n<p>From this, we can virtually interrupt a user thread from user space. Shall need to madvise/memprotect the executable code to update the conditional jump statement to jump to the goto statement.</p>\n<p>What do you think? How easy is this?</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/10966856/find-size-of-a-function-in-c\">How to learn the size of a function</a></li>\n<li><a href=\"https://blog.yossarian.net/2019/05/18/Basic-disassembly-with-libopcodes\" rel=\"nofollow noreferrer\">How to disassemble a function with libopcodes</a></li>\n<li><a href=\"https://stackoverflow.com/questions/7447013/how-to-write-self-modifying-code-in-c\">How to update memory of functions</a></li>\n</ul>\n"},{"tags":["java","amazon-web-services","amazon-s3"],"comments":[{"owner":{"account_id":58377,"reputation":247920,"user_id":174777,"display_name":"John Rotenstein"},"score":1,"creation_date":1685530262,"post_id":76371917,"comment_id":134672066,"body_markdown":"It&#39;s great that you are contributing your findings to the StackOverflow audience, but could you please add more details of the problem you experienced? For example, what was the specific error (rather than having to hunt for it in the dump) and what were you doing to generate the error? Also, please explain how your solution fixes the problem rather than just showing a whole lot of code. This will help future readers. Thank you!","body":"It&#39;s great that you are contributing your findings to the StackOverflow audience, but could you please add more details of the problem you experienced? For example, what was the specific error (rather than having to hunt for it in the dump) and what were you doing to generate the error? Also, please explain how your solution fixes the problem rather than just showing a whole lot of code. This will help future readers. Thank you!"},{"owner":{"account_id":201558,"reputation":20199,"user_id":448078,"accept_rate":61,"display_name":"Mike"},"score":0,"creation_date":1685530421,"post_id":76371917,"comment_id":134672093,"body_markdown":"The error is AmazonS3Exception which asks to reduce request rate. I&#39;ve reproduced it by for processing parallel stream on a batch of input which caused heavy request rate on S3. Solution is to programmatically reduce/control request rate to S3.","body":"The error is AmazonS3Exception which asks to reduce request rate. I&#39;ve reproduced it by for processing parallel stream on a batch of input which caused heavy request rate on S3. Solution is to programmatically reduce/control request rate to S3."}],"answers":[{"comments":[{"owner":{"account_id":18399,"reputation":38994,"user_id":42126,"accept_rate":100,"display_name":"kdgregory"},"score":0,"creation_date":1685545333,"post_id":76371918,"comment_id":134675885,"body_markdown":"Or alternatively, you (1) reduce the concurrency of the fork-join threadpool that&#39;s controlling task list generation, or (2) invoke your for-each stream operation on a threadpool with limited concurrency.","body":"Or alternatively, you (1) reduce the concurrency of the fork-join threadpool that&#39;s controlling task list generation, or (2) invoke your for-each stream operation on a threadpool with limited concurrency."},{"owner":{"account_id":201558,"reputation":20199,"user_id":448078,"accept_rate":61,"display_name":"Mike"},"score":0,"creation_date":1685568456,"post_id":76371918,"comment_id":134680366,"body_markdown":"Tried, this is bad option as for files of different sizes a request rate (start of a put or copy operation) will wave. And you will always be under the rate S3 can potentially cope with having a constant risk of breaking the limit when you encounter a batch of small files.","body":"Tried, this is bad option as for files of different sizes a request rate (start of a put or copy operation) will wave. And you will always be under the rate S3 can potentially cope with having a constant risk of breaking the limit when you encounter a batch of small files."}],"tags":[],"owner":{"account_id":201558,"reputation":20199,"user_id":448078,"accept_rate":61,"display_name":"Mike"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689871410,"creation_date":1685524492,"answer_id":76371918,"question_id":76371917,"body_markdown":"The idea is to create a proxy which would incapsulate the logic to limit the rate.\r\n\r\nUsage:\r\n\r\n    AmazonS3 s3 = ...build();\r\n    return rateFriendlyProxy(s3);\r\n\r\nImplementation:\r\n\r\n    import static java.lang.Math.max;\r\n    import static java.lang.Math.min;\r\n    import static java.lang.Thread.sleep;\r\n    import static java.lang.reflect.Proxy.newProxyInstance;\r\n    import static java.util.concurrent.TimeUnit.SECONDS;\r\n    import static org.apache.commons.lang3.StringUtils.containsAny;\r\n    import static org.apache.commons.lang3.exception.ExceptionUtils.getRootCauseMessage;\r\n    \r\n    import com.amazonaws.services.s3.AmazonS3;\r\n    import java.lang.reflect.InvocationHandler;\r\n    import java.lang.reflect.Method;\r\n    import java.util.concurrent.atomic.AtomicInteger;\r\n    import java.util.concurrent.atomic.AtomicLong;\r\n    import java.util.concurrent.locks.ReentrantLock;\r\n    import org.slf4j.Logger;\r\n    import org.slf4j.LoggerFactory;\r\n    \r\n    /**\r\n     * Amazon S3 provides increased performance to support at least 3,500 requests per second to add data&lt;br&gt;\r\n     * \r\n     * @see &lt;a href=&quot;https://aws.amazon.com/about-aws/whats-new/2018/07/amazon-s3-announces-increased-request-rate-performance/&quot;&gt;Amazon S3 Announces Increased\r\n     *      Request Rate Performance&lt;/a&gt;\r\n     */\r\n    public class AmazonS3RateFriendlyProxy implements InvocationHandler {\r\n    \r\n        private static final int MAX_RATE = 100_000;\r\n        private static final int MIN_RATE = 100;\r\n        private static final int MAX_RETRY_COUNT = 300;\r\n        private static final Logger logger = LoggerFactory.getLogger(AmazonS3RateFriendlyProxy.class);\r\n    \r\n        public static final AmazonS3 rateFriendlyProxy(AmazonS3 s3) {\r\n            return (AmazonS3) newProxyInstance(\r\n                    s3.getClass().getClassLoader(),\r\n                    new Class[] { AmazonS3.class },\r\n                    new AmazonS3RateFriendlyProxy(s3));\r\n        }\r\n    \r\n        private AmazonS3 s3;\r\n        private ReentrantLock lock = new ReentrantLock(true);\r\n        private AtomicLong leapTime = new AtomicLong();\r\n        private AtomicInteger rate = new AtomicInteger(MAX_RATE);\r\n    \r\n        private AmazonS3RateFriendlyProxy(AmazonS3 s3) {\r\n            this.s3 = s3;\r\n        }\r\n    \r\n        @Override\r\n        public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {\r\n            for (int retryCount = 0;; retryCount++) {\r\n                int rateSnapshot = rate.get();\r\n                limitRate(rateSnapshot, leapTime, lock);\r\n                try {\r\n    \r\n                    return method.invoke(s3, args);\r\n    \r\n                } catch (Exception e) {\r\n                    String msg = getRootCauseMessage(e);\r\n                    if (!containsAny(msg, &quot;Please reduce your request rate&quot;, &quot;Please try again&quot;) || retryCount &gt; MAX_RETRY_COUNT)\r\n                        throw e;\r\n                    logger.warn(&quot;[dashboard] Rejected retry {}, at rate {}, {}&quot;, retryCount, rateSnapshot, msg);\r\n                    rate.compareAndSet(rateSnapshot, max(rateSnapshot / 2, MIN_RATE));\r\n                    sleep(SECONDS.toMillis(1));\r\n                } finally {\r\n                    rate.compareAndSet(rateSnapshot, min(rateSnapshot + 1, MAX_RATE));\r\n                }\r\n            }\r\n        }\r\n\r\n        public static void limitRate(int rate, AtomicLong leapTime, ReentrantLock rateLock) {\r\n            long targetLeapTime = 1_000_000_000 / rate;\r\n            rateLock.lock();\r\n            try {\r\n                long timeSnapshot = nanoTime();\r\n                long waitTime = targetLeapTime - (timeSnapshot - leapTime.get());\r\n                if (waitTime &gt; 0) {\r\n\r\n                    if (waitTime &gt; 1_000_000)\r\n                        LockSupport.parkNanos(waitTime);\r\n                    else\r\n                        while (timeSnapshot + waitTime &gt; nanoTime())\r\n                            /* busy wait */;\r\n\r\n                    leapTime.set(timeSnapshot + waitTime);\r\n                } else {\r\n                    leapTime.set(timeSnapshot);\r\n                }\r\n            } finally {\r\n                rateLock.unlock();\r\n            }\r\n        }\r\n    }\r\n","title":"How can I programmatically reduce/control S3 request rate?","body":"<p>The idea is to create a proxy which would incapsulate the logic to limit the rate.</p>\n<p>Usage:</p>\n<pre><code>AmazonS3 s3 = ...build();\nreturn rateFriendlyProxy(s3);\n</code></pre>\n<p>Implementation:</p>\n<pre><code>import static java.lang.Math.max;\nimport static java.lang.Math.min;\nimport static java.lang.Thread.sleep;\nimport static java.lang.reflect.Proxy.newProxyInstance;\nimport static java.util.concurrent.TimeUnit.SECONDS;\nimport static org.apache.commons.lang3.StringUtils.containsAny;\nimport static org.apache.commons.lang3.exception.ExceptionUtils.getRootCauseMessage;\n\nimport com.amazonaws.services.s3.AmazonS3;\nimport java.lang.reflect.InvocationHandler;\nimport java.lang.reflect.Method;\nimport java.util.concurrent.atomic.AtomicInteger;\nimport java.util.concurrent.atomic.AtomicLong;\nimport java.util.concurrent.locks.ReentrantLock;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\n/**\n * Amazon S3 provides increased performance to support at least 3,500 requests per second to add data&lt;br&gt;\n * \n * @see &lt;a href=&quot;https://aws.amazon.com/about-aws/whats-new/2018/07/amazon-s3-announces-increased-request-rate-performance/&quot;&gt;Amazon S3 Announces Increased\n *      Request Rate Performance&lt;/a&gt;\n */\npublic class AmazonS3RateFriendlyProxy implements InvocationHandler {\n\n    private static final int MAX_RATE = 100_000;\n    private static final int MIN_RATE = 100;\n    private static final int MAX_RETRY_COUNT = 300;\n    private static final Logger logger = LoggerFactory.getLogger(AmazonS3RateFriendlyProxy.class);\n\n    public static final AmazonS3 rateFriendlyProxy(AmazonS3 s3) {\n        return (AmazonS3) newProxyInstance(\n                s3.getClass().getClassLoader(),\n                new Class[] { AmazonS3.class },\n                new AmazonS3RateFriendlyProxy(s3));\n    }\n\n    private AmazonS3 s3;\n    private ReentrantLock lock = new ReentrantLock(true);\n    private AtomicLong leapTime = new AtomicLong();\n    private AtomicInteger rate = new AtomicInteger(MAX_RATE);\n\n    private AmazonS3RateFriendlyProxy(AmazonS3 s3) {\n        this.s3 = s3;\n    }\n\n    @Override\n    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {\n        for (int retryCount = 0;; retryCount++) {\n            int rateSnapshot = rate.get();\n            limitRate(rateSnapshot, leapTime, lock);\n            try {\n\n                return method.invoke(s3, args);\n\n            } catch (Exception e) {\n                String msg = getRootCauseMessage(e);\n                if (!containsAny(msg, &quot;Please reduce your request rate&quot;, &quot;Please try again&quot;) || retryCount &gt; MAX_RETRY_COUNT)\n                    throw e;\n                logger.warn(&quot;[dashboard] Rejected retry {}, at rate {}, {}&quot;, retryCount, rateSnapshot, msg);\n                rate.compareAndSet(rateSnapshot, max(rateSnapshot / 2, MIN_RATE));\n                sleep(SECONDS.toMillis(1));\n            } finally {\n                rate.compareAndSet(rateSnapshot, min(rateSnapshot + 1, MAX_RATE));\n            }\n        }\n    }\n\n    public static void limitRate(int rate, AtomicLong leapTime, ReentrantLock rateLock) {\n        long targetLeapTime = 1_000_000_000 / rate;\n        rateLock.lock();\n        try {\n            long timeSnapshot = nanoTime();\n            long waitTime = targetLeapTime - (timeSnapshot - leapTime.get());\n            if (waitTime &gt; 0) {\n\n                if (waitTime &gt; 1_000_000)\n                    LockSupport.parkNanos(waitTime);\n                else\n                    while (timeSnapshot + waitTime &gt; nanoTime())\n                        /* busy wait */;\n\n                leapTime.set(timeSnapshot + waitTime);\n            } else {\n                leapTime.set(timeSnapshot);\n            }\n        } finally {\n            rateLock.unlock();\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":201558,"reputation":20199,"user_id":448078,"accept_rate":61,"display_name":"Mike"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":208,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76371918,"answer_count":1,"score":-1,"last_activity_date":1689871410,"creation_date":1685524492,"question_id":76371917,"body_markdown":"How can I programmatically reduce/control S3 request rate?\r\n\r\n\tCaused by: com.amazonaws.services.s3.model.AmazonS3Exception: Please reduce your request rate. (Service: Amazon S3; Status Code: 503; Error Code: SlowDown; Request ID: TZJYPCC02W0YJFNC; S3 Extended Request ID: uEBpUJSvQ6t9+3rxq7BY70xYPWQeQBltI7BYcEzg9Wb8/rWuENBSaxG5CxyGJBzF+luhvcldIELSITu74/2HNw==; Proxy: null), S3 Extended Request ID: uEBpUJSvQ6t9+3rxq7BY70xYPWQeQBltI7BYcEzg9Wb8/rWuENBSaxG5CxyGJBzF+luhvcldIELSITu74/2HNw==\r\n\t\tat com.amazonaws.http.AmazonHttpClient$RequestExecutor.handleErrorResponse(AmazonHttpClient.java:1819)\r\n\t\tat com.amazonaws.http.AmazonHttpClient$RequestExecutor.handleServiceErrorResponse(AmazonHttpClient.java:1403)\r\n\t\tat com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeOneRequest(AmazonHttpClient.java:1372)\r\n\t\tat com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeHelper(AmazonHttpClient.java:1145)\r\n\t\tat com.amazonaws.http.AmazonHttpClient$RequestExecutor.doExecute(AmazonHttpClient.java:802)\r\n\t\tat com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeWithTimer(AmazonHttpClient.java:770)\r\n\t\tat com.amazonaws.http.AmazonHttpClient$RequestExecutor.execute(AmazonHttpClient.java:744)\r\n\t\tat com.amazonaws.http.AmazonHttpClient$RequestExecutor.access$500(AmazonHttpClient.java:704)\r\n\t\tat com.amazonaws.http.AmazonHttpClient$RequestExecutionBuilderImpl.execute(AmazonHttpClient.java:686)\r\n\t\tat com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:550)\r\n\t\tat com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:530)\r\n\t\tat com.amazonaws.services.s3.AmazonS3Client.invoke(AmazonS3Client.java:5437)\r\n\t\tat com.amazonaws.services.s3.AmazonS3Client.invoke(AmazonS3Client.java:5384)\r\n\t\tat com.amazonaws.services.s3.AmazonS3Client.access$300(AmazonS3Client.java:421)\r\n\t\tat com.amazonaws.services.s3.AmazonS3Client$PutObjectStrategy.invokeServiceCall(AmazonS3Client.java:6508)\r\n\t\tat com.amazonaws.services.s3.AmazonS3Client.uploadObject(AmazonS3Client.java:1856)\r\n\t\tat com.amazonaws.services.s3.AmazonS3Client.putObject(AmazonS3Client.java:1816)\r\n\t\tat com.amazonaws.services.s3.AmazonS3Client.putObject(AmazonS3Client.java:3982)\r\n\t\t...\r\n\t\tat java.base/java.util.Spliterator.forEachRemaining(Unknown Source)\r\n\t\tat java.base/java.util.stream.AbstractPipeline.copyInto(Unknown Source)\r\n\t\tat java.base/java.util.stream.ForEachOps$ForEachTask.compute(Unknown Source)\r\n\t\tat java.base/java.util.concurrent.CountedCompleter.exec(Unknown Source)\r\n\t\tat java.base/java.util.concurrent.ForkJoinTask.doExec(Unknown Source)\r\n\t\tat java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(Unknown Source)\r\n\t\tat java.base/java.util.concurrent.ForkJoinPool.scan(Unknown Source)\r\n\t\tat java.base/java.util.concurrent.ForkJoinPool.runWorker(Unknown Source)\r\n\t\tat java.base/java.util.concurrent.ForkJoinWorkerThread.run(Unknown Source)","title":"How can I programmatically reduce/control S3 request rate?","body":"<p>How can I programmatically reduce/control S3 request rate?</p>\n<pre><code>Caused by: com.amazonaws.services.s3.model.AmazonS3Exception: Please reduce your request rate. (Service: Amazon S3; Status Code: 503; Error Code: SlowDown; Request ID: TZJYPCC02W0YJFNC; S3 Extended Request ID: uEBpUJSvQ6t9+3rxq7BY70xYPWQeQBltI7BYcEzg9Wb8/rWuENBSaxG5CxyGJBzF+luhvcldIELSITu74/2HNw==; Proxy: null), S3 Extended Request ID: uEBpUJSvQ6t9+3rxq7BY70xYPWQeQBltI7BYcEzg9Wb8/rWuENBSaxG5CxyGJBzF+luhvcldIELSITu74/2HNw==\n    at com.amazonaws.http.AmazonHttpClient$RequestExecutor.handleErrorResponse(AmazonHttpClient.java:1819)\n    at com.amazonaws.http.AmazonHttpClient$RequestExecutor.handleServiceErrorResponse(AmazonHttpClient.java:1403)\n    at com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeOneRequest(AmazonHttpClient.java:1372)\n    at com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeHelper(AmazonHttpClient.java:1145)\n    at com.amazonaws.http.AmazonHttpClient$RequestExecutor.doExecute(AmazonHttpClient.java:802)\n    at com.amazonaws.http.AmazonHttpClient$RequestExecutor.executeWithTimer(AmazonHttpClient.java:770)\n    at com.amazonaws.http.AmazonHttpClient$RequestExecutor.execute(AmazonHttpClient.java:744)\n    at com.amazonaws.http.AmazonHttpClient$RequestExecutor.access$500(AmazonHttpClient.java:704)\n    at com.amazonaws.http.AmazonHttpClient$RequestExecutionBuilderImpl.execute(AmazonHttpClient.java:686)\n    at com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:550)\n    at com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:530)\n    at com.amazonaws.services.s3.AmazonS3Client.invoke(AmazonS3Client.java:5437)\n    at com.amazonaws.services.s3.AmazonS3Client.invoke(AmazonS3Client.java:5384)\n    at com.amazonaws.services.s3.AmazonS3Client.access$300(AmazonS3Client.java:421)\n    at com.amazonaws.services.s3.AmazonS3Client$PutObjectStrategy.invokeServiceCall(AmazonS3Client.java:6508)\n    at com.amazonaws.services.s3.AmazonS3Client.uploadObject(AmazonS3Client.java:1856)\n    at com.amazonaws.services.s3.AmazonS3Client.putObject(AmazonS3Client.java:1816)\n    at com.amazonaws.services.s3.AmazonS3Client.putObject(AmazonS3Client.java:3982)\n    ...\n    at java.base/java.util.Spliterator.forEachRemaining(Unknown Source)\n    at java.base/java.util.stream.AbstractPipeline.copyInto(Unknown Source)\n    at java.base/java.util.stream.ForEachOps$ForEachTask.compute(Unknown Source)\n    at java.base/java.util.concurrent.CountedCompleter.exec(Unknown Source)\n    at java.base/java.util.concurrent.ForkJoinTask.doExec(Unknown Source)\n    at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(Unknown Source)\n    at java.base/java.util.concurrent.ForkJoinPool.scan(Unknown Source)\n    at java.base/java.util.concurrent.ForkJoinPool.runWorker(Unknown Source)\n    at java.base/java.util.concurrent.ForkJoinWorkerThread.run(Unknown Source)\n</code></pre>\n"},{"tags":["java","maven","jenkins","artifactory","jfrog-pipelines"],"comments":[{"owner":{"account_id":2449170,"reputation":1315,"user_id":2135838,"display_name":"Sascha"},"score":0,"creation_date":1689668184,"post_id":76708342,"comment_id":135242473,"body_markdown":"You have to tell us at least, what versions of Jenkins and artifactory plugin you are using. It can&#39;t be the newest one, it&#39;s a blank line [in `BuildInfoRecorder` line 594](https://github.com/jfrog/build-info/blob/master/build-info-extractor-maven3/src/main/java/org/jfrog/build/extractor/maven/BuildInfoRecorder.java#L594)","body":"You have to tell us at least, what versions of Jenkins and artifactory plugin you are using. It can&#39;t be the newest one, it&#39;s a blank line <a href=\"https://github.com/jfrog/build-info/blob/master/build-info-extractor-maven3/src/main/java/org/jfrog/build/extractor/maven/BuildInfoRecorder.java#L594\" rel=\"nofollow noreferrer\">in <code>BuildInfoRecorder</code> line 594</a>"},{"owner":{"account_id":9206701,"reputation":63,"user_id":6841661,"accept_rate":75,"display_name":"User1v0"},"score":0,"creation_date":1689696940,"post_id":76708342,"comment_id":135249173,"body_markdown":"hi @Sascha , im using artifactory plugin 3.18.3 and using Jenkins 2.397","body":"hi @Sascha , im using artifactory plugin 3.18.3 and using Jenkins 2.397"},{"owner":{"account_id":2449170,"reputation":1315,"user_id":2135838,"display_name":"Sascha"},"score":0,"creation_date":1689770504,"post_id":76708342,"comment_id":135259974,"body_markdown":"From the [source code](https://github.com/jfrog/build-info/blob/build-info-extractor-2.39.8/build-info-extractor-maven3/src/main/java/org/jfrog/build/extractor/maven/BuildInfoRecorder.java#L619) it has to be `dependencyParentsMaps` that&#39;s null.  \nAs the only reference to that field I found [this `EventSpy` class](https://github.com/jfrog/build-info/blob/e2d01569a5ababd106679a062c4c620a696179de/build-info-extractor-maven3/src/main/java/org/jfrog/build/extractor/maven/DependencyResolutionSpy.java#L32). So it looks to me that that event does not happen before the other method is called.","body":"From the <a href=\"https://github.com/jfrog/build-info/blob/build-info-extractor-2.39.8/build-info-extractor-maven3/src/main/java/org/jfrog/build/extractor/maven/BuildInfoRecorder.java#L619\" rel=\"nofollow noreferrer\">source code</a> it has to be <code>dependencyParentsMaps</code> that&#39;s null.   As the only reference to that field I found <a href=\"https://github.com/jfrog/build-info/blob/e2d01569a5ababd106679a062c4c620a696179de/build-info-extractor-maven3/src/main/java/org/jfrog/build/extractor/maven/DependencyResolutionSpy.java#L32\" rel=\"nofollow noreferrer\">this <code>EventSpy</code> class</a>. So it looks to me that that event does not happen before the other method is called."},{"owner":{"account_id":2449170,"reputation":1315,"user_id":2135838,"display_name":"Sascha"},"score":0,"creation_date":1689770716,"post_id":76708342,"comment_id":135260043,"body_markdown":"You should create an issue either in [the plugin](https://issues.jenkins.io/issues/?jql=resolution%20is%20EMPTY%20and%20component%3D15689) or in the [used lib](https://github.com/jfrog/build-info/issues).","body":"You should create an issue either in <a href=\"https://issues.jenkins.io/issues/?jql=resolution%20is%20EMPTY%20and%20component%3D15689\" rel=\"nofollow noreferrer\">the plugin</a> or in the <a href=\"https://github.com/jfrog/build-info/issues\" rel=\"nofollow noreferrer\">used lib</a>."},{"owner":{"account_id":4172811,"reputation":5347,"user_id":4233342,"display_name":"yahavi"},"score":1,"creation_date":1689781256,"post_id":76708342,"comment_id":135262954,"body_markdown":"What is the Maven version?","body":"What is the Maven version?"},{"owner":{"account_id":9206701,"reputation":63,"user_id":6841661,"accept_rate":75,"display_name":"User1v0"},"score":0,"creation_date":1689871268,"post_id":76708342,"comment_id":135278042,"body_markdown":"change the maven version and worked, thanks @yahavi","body":"change the maven version and worked, thanks @yahavi"}],"answers":[{"comments":[{"owner":{"account_id":4172811,"reputation":5347,"user_id":4233342,"display_name":"yahavi"},"score":0,"creation_date":1689921880,"post_id":76732011,"comment_id":135284248,"body_markdown":"Could you please share the Maven version that caused this issue?","body":"Could you please share the Maven version that caused this issue?"}],"tags":[],"owner":{"account_id":9206701,"reputation":63,"user_id":6841661,"accept_rate":75,"display_name":"User1v0"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689871347,"creation_date":1689871347,"answer_id":76732011,"question_id":76708342,"body_markdown":"I change the maven version to 3.5 and it worked correctly","title":"exception for NPE org.jfrog.build.extractor.maven.BuildInfoRecorder.addDependenciesToCurrentModule","body":"<p>I change the maven version to 3.5 and it worked correctly</p>\n"}],"owner":{"account_id":9206701,"reputation":63,"user_id":6841661,"accept_rate":75,"display_name":"User1v0"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":143,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1689871347,"creation_date":1689631186,"question_id":76708342,"body_markdown":"Im creating a jenkins pipeline and I need to publish buildInfo in artifactory using artifactory plugin, this project has submodules with their own POM inside.\r\n\r\nMy pipeline is similar to this\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    pipeline {\r\n        agent any\r\n\r\n        stages {\r\n            stage(&#39;Checkout&#39;) {\r\n                steps {\r\n                    git &#39;https://github.com/example/repo.git&#39;\r\n                }\r\n            }\r\n\r\n            stage(&#39;Build and Publish&#39;) {\r\n                steps {\r\n                    script {\r\n                        def server = Artifactory.server(&#39;artifactory-server&#39;)\r\n                        def rtMaven = Artifactory.newMavenBuild()\r\n\r\n                        rtMaven.deployer releaseRepo: &#39;libs-release-local&#39;, snapshotRepo: &#39;libs-snapshot-local&#39;, server: server\r\n                        rtMaven.resolver releaseRepo: &#39;libs-release&#39;, snapshotRepo: &#39;libs-snapshot&#39;, server: server\r\n\r\n                        rtMaven.deployer.deployArtifacts = true\r\n\r\n                        def buildInfo = rtMaven.run pom: &#39;pom.xml&#39;, goals: &#39;clean install&#39;\r\n\r\n                        // Publish build info to Artifactory\r\n                        server.publishBuildInfo buildInfo\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n    I keep getting this exception\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n\r\n        Caused by: java.lang.NullPointerException\r\n    at org.jfrog.build.extractor.maven.BuildInfoRecorder.addDependenciesToCurrentModule(BuildInfoRecorder.java:619)\r\n        at org.jfrog.build.extractor.maven.BuildInfoRecorder.addModuleToBuild(BuildInfoRecorder.java:466)\r\n        at org.jfrog.build.extractor.maven.BuildInfoRecorder.finalizeModule(BuildInfoRecorder.java:389)\r\n        at org.jfrog.build.extractor.maven.BuildInfoRecorder.projectSucceeded(BuildInfoRecorder.java:208)\r\n\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nAny Idea how to avoid this exception or a way to overwrite the NPE in BuildInfoRecorder?\r\n\r\nIm using artifactory plugin 3.18.3 and using Jenkins 2.397 ","title":"exception for NPE org.jfrog.build.extractor.maven.BuildInfoRecorder.addDependenciesToCurrentModule","body":"<p>Im creating a jenkins pipeline and I need to publish buildInfo in artifactory using artifactory plugin, this project has submodules with their own POM inside.</p>\n<p>My pipeline is similar to this</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>pipeline {\n    agent any\n\n    stages {\n        stage('Checkout') {\n            steps {\n                git 'https://github.com/example/repo.git'\n            }\n        }\n\n        stage('Build and Publish') {\n            steps {\n                script {\n                    def server = Artifactory.server('artifactory-server')\n                    def rtMaven = Artifactory.newMavenBuild()\n\n                    rtMaven.deployer releaseRepo: 'libs-release-local', snapshotRepo: 'libs-snapshot-local', server: server\n                    rtMaven.resolver releaseRepo: 'libs-release', snapshotRepo: 'libs-snapshot', server: server\n\n                    rtMaven.deployer.deployArtifacts = true\n\n                    def buildInfo = rtMaven.run pom: 'pom.xml', goals: 'clean install'\n\n                    // Publish build info to Artifactory\n                    server.publishBuildInfo buildInfo\n                }\n            }\n        }\n    }\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<pre><code>I keep getting this exception\n</code></pre>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>    Caused by: java.lang.NullPointerException\nat org.jfrog.build.extractor.maven.BuildInfoRecorder.addDependenciesToCurrentModule(BuildInfoRecorder.java:619)\n    at org.jfrog.build.extractor.maven.BuildInfoRecorder.addModuleToBuild(BuildInfoRecorder.java:466)\n    at org.jfrog.build.extractor.maven.BuildInfoRecorder.finalizeModule(BuildInfoRecorder.java:389)\n    at org.jfrog.build.extractor.maven.BuildInfoRecorder.projectSucceeded(BuildInfoRecorder.java:208)</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>Any Idea how to avoid this exception or a way to overwrite the NPE in BuildInfoRecorder?</p>\n<p>Im using artifactory plugin 3.18.3 and using Jenkins 2.397</p>\n"},{"tags":["java","annotations"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1689865374,"post_id":76731180,"comment_id":135276664,"body_markdown":"Are you sure that you&#39;ve imported the correct `CustomAnnotation` for the first example? If so, I&#39;m pretty sure this should work. If it shows up in the second example, it&#39;s correctly annotated with `Retention.RUNTIME`, so it should be available for a `getAnnotation` call too. You could check with `CustomAnnotation::class == a.annotationType()`.","body":"Are you sure that you&#39;ve imported the correct <code>CustomAnnotation</code> for the first example? If so, I&#39;m pretty sure this should work. If it shows up in the second example, it&#39;s correctly annotated with <code>Retention.RUNTIME</code>, so it should be available for a <code>getAnnotation</code> call too. You could check with <code>CustomAnnotation::class == a.annotationType()</code>."},{"owner":{"account_id":17348847,"reputation":79,"user_id":12567771,"display_name":"Shekhar"},"score":0,"creation_date":1689865410,"post_id":76731180,"comment_id":135276676,"body_markdown":"Try adding this on Annotation @Retention(RetentionPolicy.CLASS)","body":"Try adding this on Annotation @Retention(RetentionPolicy.CLASS)"},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":2,"creation_date":1689865689,"post_id":76731180,"comment_id":135276753,"body_markdown":"@Shekhar That is doubly incorrect. [A] clearly not the problem (given that it does show up with `.getAnnotations()` and [B] wouldn&#39;t even work (you want `RetentionPolicy.RUNTIME`).","body":"@Shekhar That is doubly incorrect. [A] clearly not the problem (given that it does show up with <code>.getAnnotations()</code> and [B] wouldn&#39;t even work (you want <code>RetentionPolicy.RUNTIME</code>)."},{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1689865843,"post_id":76731180,"comment_id":135276801,"body_markdown":"Another possible stumbling stone that could cause issues like this is if the `CustomAnnotation` is loaded by more than one classloader. That would lead to two classes with the exact same name in the JVM that would still be considered to be distinct. Try printing `a.annotationType().getClassLoader()` and `CustomAnnotation.class.getClassLoader()`.","body":"Another possible stumbling stone that could cause issues like this is if the <code>CustomAnnotation</code> is loaded by more than one classloader. That would lead to two classes with the exact same name in the JVM that would still be considered to be distinct. Try printing <code>a.annotationType().getClassLoader()</code> and <code>CustomAnnotation.class.getClassLoader()</code>."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1689870664,"post_id":76731180,"comment_id":135277948,"body_markdown":"Please provide a [mre].","body":"Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}],"answers":[{"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1689869028,"post_id":76731394,"comment_id":135277634,"body_markdown":"And, by the way, you can not have two classes named `java.lang.String`; custom class loaders are not allowed to create classes whose qualified name starts with `java.`.","body":"And, by the way, you can not have two classes named <code>java.lang.String</code>; custom class loaders are not allowed to create classes whose qualified name starts with <code>java.</code>."},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1689870883,"post_id":76731394,"comment_id":135277986,"body_markdown":"In older versions of java I&#39;m pretty sure you could, but, I admit, that was a poor choice of example. I will fix the problem with `a.annotationType() instanceof`.","body":"In older versions of java I&#39;m pretty sure you could, but, I admit, that was a poor choice of example. I will fix the problem with <code>a.annotationType() instanceof</code>."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1689872306,"post_id":76731394,"comment_id":135278209,"body_markdown":"[Java 1.3’s API documentation](https://javaalmanac.io/jdk/1.3/api/java/lang/ClassLoader.html#defineClass(java.lang.String,%20byte[],%20int,%20int,%20java.security.ProtectionDomain)) is the first mentioning explicitly that attempts to define a class starting with `java.` will throw an exception but that doesn’t mean that such an attempt would have succeeded in older versions.","body":"<a href=\"https://javaalmanac.io/jdk/1.3/api/java/lang/ClassLoader.html#defineClass(java.lang.String,%20byte%5B%5D,%20int,%20int,%20java.security.ProtectionDomain)\" rel=\"nofollow noreferrer\">Java 1.3’s API documentation</a> is the first mentioning explicitly that attempts to define a class starting with <code>java.</code> will throw an exception but that doesn’t mean that such an attempt would have succeeded in older versions."}],"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689870893,"creation_date":1689866405,"answer_id":76731394,"question_id":76731180,"body_markdown":"There is an easy explanation and a much more complex one.\r\n\r\n## The easy explanation\r\n\r\nYou messed up. You have 2 different types that are both called `CustomAnnotation` (in different packages), and you are confusing the two.\r\n\r\nYou might want to confirm this isn&#39;t the mistake you made. One easy way to do that is to compare FQNs:\r\n\r\n```\r\nAnnotation[] presentAnnotations = myAnnotatedClass.getAnnotations();\r\nfor(Annotation a : presentAnnotations) {\r\n   System.out.println(&quot;annotation: &quot; + a);\r\n   System.out.println(&quot;type: &quot; + a.annotationType());\r\n   System.out.println(&quot;Sanity check: &quot; + \r\n  CustomAnnotation.class.getName().equals(a.annotationType());\r\n}\r\n```\r\n\r\nThis _should_ print at least one `Sanity check: true`. If it doesn&#39;t - stop reading here (it&#39;s not the &#39;complicated explanation&#39;).\r\n\r\n## The complicated explanation\r\n\r\nIn java, classes are singletons: It is not possible for more than one instance of `java.lang.Class` representing your class to exist, and they are only ever loaded once.\r\n\r\nHowever.\r\n\r\nThe &#39;id&#39; of a class, the very nature of it, is actually a tuple of the class definition _and the class loader that truly loads it by invoking `defineClass` and passing the bytecode to that native method_.\r\n\r\nClassLoaders are both extensible (you can make your own, and they can do whatever they want, notably including reloading an already loaded class and __therefore creating two completely unrelated, different classes which nevertheless have exactly the same Fully Qualified Name!__), and varied (any given JVM can have many classloaders simultaneously).\r\n\r\nThis is very relevant - even if you think this doesn&#39;t apply (&quot;I&#39;m not making any classloaders!&quot;), java _itself_ uses classloaders. For your main app (`main` and all that follows from there), java uses the simple, obvious classloader: There is only one, and it loads classes off of the classpath as one would expect. __But__, agents, __and annotation processors__, use separate loaders for various things.\r\n\r\nHence, if the easy explanation has been excluded, this is the next most likely explanation: Whatever code is running `.getAnnotation(CustomAnnotation.class)` isn&#39;t finding your annotation because the annotation that is present is a completely different type. Also named the exact same thing as `CustomAnnotation`, but, loaded by a different loader and therefore not considered the same by the system.\r\n\r\nThere are no easy fixes for that. You can&#39;t ask java to take an instance of `CustomAnnotation-loaded-by-loaderA` and make it &#39;fit&#39; `CustomAnnotation-loaded-by-loaderB`. That&#39;s because loaderA and loaderB might well have loaded completely different versions of it (one of the advantages of java&#39;s loader system is that you can use it to load 2 conflicting, different versions of the exact same library in the same JVM. From there it is obvious that the downside is that such loads are utterly incompatible with each other. They&#39;d have to be or that cannot possibly be universally possible).\r\n\r\nOne fix is to ensure that `CustomAnnotation` is only ever loaded once (classloaders are hierarchical: By default they ask their parent loader to laod it, and if it loads it, that it just passes that on, which means that parent loader is the official loader. Have 2 separate ClassLoaders with the same parent, if they both delegate the loading of `java.lang.String` to the parent, then code loaded by loaderA can send strings to loaderB without issue. But, if loaderA and/or loaderB explicitly opts out of this delegation system and loads it itself, we have 2 classes, completely separate, both called `java.lang.String`, and which aren&#39;t compatible with each other).\r\n\r\nAnother is to &#39;deal&#39; with the `CustomAnnotation` from the other universe. Use `.getAnnotations()`, find the right annotation, and use reflection to read its data. You will not be able to cast it, though! It has to _ALL_ be stringly typed (that&#39;s not a typo - &#39;stringly typed&#39;, as in, it&#39;s all checked and called with string literals). Yes, you can write:\r\n\r\n```\r\ncom.foo.Bar bar = (com.foo.Bar) someObject;\r\n```\r\n\r\nand get a `ClassCastException` saying: `&quot;Cannot cast object of type com.foo.Bar to com.foo.Bar&quot;` which seems like an impossible and very silly error, but it&#39;s what you get when you cross the streams and have an object of type `Bar-by-loaderB` and try to run that cast expression in code loaded by a loader whose resolution of type `com.foo.Bar` ends up at `Bar-by-loaderA`. Hence, why this:\r\n\r\n```\r\nAnnotation[] presentAnnotations = myAnnotatedClass.getAnnotations();\r\nfor(Annotation a : presentAnnotations) {\r\n   System.out.println(&quot;annotation: &quot; + a);\r\n   System.out.println(&quot;type: &quot; + a.annotationType());\r\n   if (a instanceof CustomAnnotation) { ... }\r\n}\r\n```\r\n\r\nis not going to work even if the `type: ` sysout line prints precisely the name of your custom annotation type, nor will `CustomAnnotation ca = (CustomAnnotation) a;`, for the same reason.\r\n","title":"Inspecting custom annotations on Java class","body":"<p>There is an easy explanation and a much more complex one.</p>\n<h2>The easy explanation</h2>\n<p>You messed up. You have 2 different types that are both called <code>CustomAnnotation</code> (in different packages), and you are confusing the two.</p>\n<p>You might want to confirm this isn't the mistake you made. One easy way to do that is to compare FQNs:</p>\n<pre><code>Annotation[] presentAnnotations = myAnnotatedClass.getAnnotations();\nfor(Annotation a : presentAnnotations) {\n   System.out.println(&quot;annotation: &quot; + a);\n   System.out.println(&quot;type: &quot; + a.annotationType());\n   System.out.println(&quot;Sanity check: &quot; + \n  CustomAnnotation.class.getName().equals(a.annotationType());\n}\n</code></pre>\n<p>This <em>should</em> print at least one <code>Sanity check: true</code>. If it doesn't - stop reading here (it's not the 'complicated explanation').</p>\n<h2>The complicated explanation</h2>\n<p>In java, classes are singletons: It is not possible for more than one instance of <code>java.lang.Class</code> representing your class to exist, and they are only ever loaded once.</p>\n<p>However.</p>\n<p>The 'id' of a class, the very nature of it, is actually a tuple of the class definition <em>and the class loader that truly loads it by invoking <code>defineClass</code> and passing the bytecode to that native method</em>.</p>\n<p>ClassLoaders are both extensible (you can make your own, and they can do whatever they want, notably including reloading an already loaded class and <strong>therefore creating two completely unrelated, different classes which nevertheless have exactly the same Fully Qualified Name!</strong>), and varied (any given JVM can have many classloaders simultaneously).</p>\n<p>This is very relevant - even if you think this doesn't apply (&quot;I'm not making any classloaders!&quot;), java <em>itself</em> uses classloaders. For your main app (<code>main</code> and all that follows from there), java uses the simple, obvious classloader: There is only one, and it loads classes off of the classpath as one would expect. <strong>But</strong>, agents, <strong>and annotation processors</strong>, use separate loaders for various things.</p>\n<p>Hence, if the easy explanation has been excluded, this is the next most likely explanation: Whatever code is running <code>.getAnnotation(CustomAnnotation.class)</code> isn't finding your annotation because the annotation that is present is a completely different type. Also named the exact same thing as <code>CustomAnnotation</code>, but, loaded by a different loader and therefore not considered the same by the system.</p>\n<p>There are no easy fixes for that. You can't ask java to take an instance of <code>CustomAnnotation-loaded-by-loaderA</code> and make it 'fit' <code>CustomAnnotation-loaded-by-loaderB</code>. That's because loaderA and loaderB might well have loaded completely different versions of it (one of the advantages of java's loader system is that you can use it to load 2 conflicting, different versions of the exact same library in the same JVM. From there it is obvious that the downside is that such loads are utterly incompatible with each other. They'd have to be or that cannot possibly be universally possible).</p>\n<p>One fix is to ensure that <code>CustomAnnotation</code> is only ever loaded once (classloaders are hierarchical: By default they ask their parent loader to laod it, and if it loads it, that it just passes that on, which means that parent loader is the official loader. Have 2 separate ClassLoaders with the same parent, if they both delegate the loading of <code>java.lang.String</code> to the parent, then code loaded by loaderA can send strings to loaderB without issue. But, if loaderA and/or loaderB explicitly opts out of this delegation system and loads it itself, we have 2 classes, completely separate, both called <code>java.lang.String</code>, and which aren't compatible with each other).</p>\n<p>Another is to 'deal' with the <code>CustomAnnotation</code> from the other universe. Use <code>.getAnnotations()</code>, find the right annotation, and use reflection to read its data. You will not be able to cast it, though! It has to <em>ALL</em> be stringly typed (that's not a typo - 'stringly typed', as in, it's all checked and called with string literals). Yes, you can write:</p>\n<pre><code>com.foo.Bar bar = (com.foo.Bar) someObject;\n</code></pre>\n<p>and get a <code>ClassCastException</code> saying: <code>&quot;Cannot cast object of type com.foo.Bar to com.foo.Bar&quot;</code> which seems like an impossible and very silly error, but it's what you get when you cross the streams and have an object of type <code>Bar-by-loaderB</code> and try to run that cast expression in code loaded by a loader whose resolution of type <code>com.foo.Bar</code> ends up at <code>Bar-by-loaderA</code>. Hence, why this:</p>\n<pre><code>Annotation[] presentAnnotations = myAnnotatedClass.getAnnotations();\nfor(Annotation a : presentAnnotations) {\n   System.out.println(&quot;annotation: &quot; + a);\n   System.out.println(&quot;type: &quot; + a.annotationType());\n   if (a instanceof CustomAnnotation) { ... }\n}\n</code></pre>\n<p>is not going to work even if the <code>type: </code> sysout line prints precisely the name of your custom annotation type, nor will <code>CustomAnnotation ca = (CustomAnnotation) a;</code>, for the same reason.</p>\n"}],"owner":{"account_id":1179355,"reputation":4521,"user_id":1154644,"accept_rate":52,"display_name":"user1154644"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689870893,"creation_date":1689865030,"question_id":76731180,"body_markdown":"I am trying to parse some custom annotations on a few of the classes in my application.\r\n\r\nWhen I call:\r\n\r\n    myAnnotatedClass.getAnnotation(CustomAnnotation.class);\r\n\r\nNull is returned.\r\n\r\nWhen I manually step through the annotations on the class, I can see that the annotation that I am interested in is there:\r\n\r\n    Annotation[] presentAnnotations = myAnnotatedClass.getAnnotations();\r\n    for(Annotation a : presentAnnotations) {\r\n       System.out.println(&quot;annotation: &quot; + a);\r\n       System.out.println(&quot;type: &quot; + a.annotationType());\r\n    }\r\n\r\nThis is the output:\r\n\r\n    annotation: @com.mycompany.client.annotations.CustomAnnotation(someAttributue=[.....])\r\n    type: interface com.mycompany.client.annotations.CustomAnnotation\r\n\r\nI can&#39;t quite figure out why the call to `getAnnotation()` is returning null.","title":"Inspecting custom annotations on Java class","body":"<p>I am trying to parse some custom annotations on a few of the classes in my application.</p>\n<p>When I call:</p>\n<pre><code>myAnnotatedClass.getAnnotation(CustomAnnotation.class);\n</code></pre>\n<p>Null is returned.</p>\n<p>When I manually step through the annotations on the class, I can see that the annotation that I am interested in is there:</p>\n<pre><code>Annotation[] presentAnnotations = myAnnotatedClass.getAnnotations();\nfor(Annotation a : presentAnnotations) {\n   System.out.println(&quot;annotation: &quot; + a);\n   System.out.println(&quot;type: &quot; + a.annotationType());\n}\n</code></pre>\n<p>This is the output:</p>\n<pre><code>annotation: @com.mycompany.client.annotations.CustomAnnotation(someAttributue=[.....])\ntype: interface com.mycompany.client.annotations.CustomAnnotation\n</code></pre>\n<p>I can't quite figure out why the call to <code>getAnnotation()</code> is returning null.</p>\n"},{"tags":["java","spring-boot","caching","redis","spring-data-redis"],"answers":[{"tags":[],"owner":{"account_id":17940262,"reputation":11,"user_id":13035685,"display_name":"Vifieh"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689870862,"creation_date":1689870862,"answer_id":76731940,"question_id":76258699,"body_markdown":"Add **implements Serializable** to the end of the NoteResponse for example\r\n\r\npublic class NoteResponse implements Serializable","title":"DefaultSerializer requires a Serializable payload but received an object of type [org.springframework.http.ResponseEntity]","body":"<p>Add <strong>implements Serializable</strong> to the end of the NoteResponse for example</p>\n<p>public class NoteResponse implements Serializable</p>\n"}],"owner":{"account_id":19845448,"reputation":19,"user_id":14537199,"display_name":"retr0"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2073,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1689870862,"creation_date":1684197314,"question_id":76258699,"body_markdown":"I want to cache the List&lt;NoteResponse&gt; in redis. Below is the service method for the same:-\r\n\r\n    @Autowired\r\n    private RedisTemplate&lt;String, Object&gt; redisTemplate;\r\n\r\n    @Cacheable(value = &quot;notes&quot;, key = &quot;#userId&quot;)\r\n    public ResponseEntity&lt;?&gt; getAllNotes(Integer userId) {\r\n\r\n            HashOperations&lt;String, String, Object&gt; hashOperations = redisTemplate.opsForHash();\r\n            //Check if the cacheKey contains this userId\r\n            if (hashOperations.hasKey(cacheKey, userIdAsKey)) {\r\n                List&lt;NoteResponse&gt; noteResponses = (List&lt;NoteResponse&gt;) hashOperations.get(cacheKey, userIdAsKey);\r\n                return ResponseEntity.ok(noteResponses);\r\n            }\r\n\r\n            List&lt;Note&gt; notes = noteRepository.findAllByUserId(userId);\r\n            List&lt;NoteResponse&gt; noteResponses = Helper.getNoteResponse(notes);\r\n            hashOperations.put(cacheKey, userIdAsKey, noteResponses);\r\n            return ResponseEntity.ok(noteResponses);\r\n    }\r\n\r\nbut i am getting this exception: java.lang.IllegalArgumentException: DefaultSerializer requires a Serializable payload but received an object of type [org.springframework.http.ResponseEntity]\r\n\r\n","title":"DefaultSerializer requires a Serializable payload but received an object of type [org.springframework.http.ResponseEntity]","body":"<p>I want to cache the List in redis. Below is the service method for the same:-</p>\n<pre><code>@Autowired\nprivate RedisTemplate&lt;String, Object&gt; redisTemplate;\n\n@Cacheable(value = &quot;notes&quot;, key = &quot;#userId&quot;)\npublic ResponseEntity&lt;?&gt; getAllNotes(Integer userId) {\n\n        HashOperations&lt;String, String, Object&gt; hashOperations = redisTemplate.opsForHash();\n        //Check if the cacheKey contains this userId\n        if (hashOperations.hasKey(cacheKey, userIdAsKey)) {\n            List&lt;NoteResponse&gt; noteResponses = (List&lt;NoteResponse&gt;) hashOperations.get(cacheKey, userIdAsKey);\n            return ResponseEntity.ok(noteResponses);\n        }\n\n        List&lt;Note&gt; notes = noteRepository.findAllByUserId(userId);\n        List&lt;NoteResponse&gt; noteResponses = Helper.getNoteResponse(notes);\n        hashOperations.put(cacheKey, userIdAsKey, noteResponses);\n        return ResponseEntity.ok(noteResponses);\n}\n</code></pre>\n<p>but i am getting this exception: java.lang.IllegalArgumentException: DefaultSerializer requires a Serializable payload but received an object of type [org.springframework.http.ResponseEntity]</p>\n"},{"tags":["java","singleton","volatile","synchronized","lazy-initialization"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1689861993,"post_id":76730639,"comment_id":135275763,"body_markdown":"Because with the first example, after the value has been initialized, you can access it without any synchronization at all.","body":"Because with the first example, after the value has been initialized, you can access it without any synchronization at all."},{"owner":{"account_id":1096470,"reputation":26066,"user_id":1089967,"accept_rate":59,"display_name":"lance-java"},"score":0,"creation_date":1689864095,"post_id":76730639,"comment_id":135276330,"body_markdown":"Why are you using the singleton pattern at all? The singleton pattern is terrible for testing (makes it hard to mock dependencies) and generally a bad idea since it tightly couples your code. Have you considered dependency injection / inversion of control instead?","body":"Why are you using the singleton pattern at all? The singleton pattern is terrible for testing (makes it hard to mock dependencies) and generally a bad idea since it tightly couples your code. Have you considered dependency injection / inversion of control instead?"},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1689864271,"post_id":76730639,"comment_id":135276359,"body_markdown":"Singletons are best avoided; but if you must, implement them as a single-element enum; or, if you can&#39;t do that, using a lazy holder. The fact you&#39;re asking this question shows how hard an actual singleton is to implement correctly.","body":"Singletons are best avoided; but if you must, implement them as a single-element enum; or, if you can&#39;t do that, using a lazy holder. The fact you&#39;re asking this question shows how hard an actual singleton is to implement correctly."}],"answers":[{"tags":[],"owner":{"account_id":2792262,"reputation":163877,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689862361,"creation_date":1689862361,"answer_id":76730777,"question_id":76730639,"body_markdown":"&gt; Why do we need to add volatile to field to prevent invalid data retrieval?\r\n\r\nIf your `LazySingleton.instance` is not volatile, then the first\r\n&gt; ```\r\n&gt;     if (instance == null) {\r\n&gt; ```\r\ntest in your first example is not properly synchronized, and therefore exhibits undefined behavior.\r\n\r\nVolatile or not, that example is a variation on [double-checked locking][1]. You will find much commentary about that, because at one time it was promoted in some quarters, but [many implementations in Java and C++ are broken][2].  In particular, removing the `volatile` from your first example breaks it.\r\n\r\n&gt; Can&#39;t we do the same thing by adding synchronized to method declaration instead of to a block of code?\r\n\r\nYes, in the sense that your second code is correctly synchronized and does have the property that the singleton is instantiated only once, on the first request for it.  The details of how that is achieved are not the same, so they might not perform identically.\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Double-checked_locking\r\n  [2]: https://stackoverflow.com/questions/4926681/why-is-double-checked-locking-broken-in-java","title":"Java singleton lazy initialization. Volatile vs synchronized method","body":"<blockquote>\n<p>Why do we need to add volatile to field to prevent invalid data retrieval?</p>\n</blockquote>\n<p>If your <code>LazySingleton.instance</code> is not volatile, then the first</p>\n<blockquote>\n<pre><code>    if (instance == null) {\n</code></pre>\n</blockquote>\n<p>test in your first example is not properly synchronized, and therefore exhibits undefined behavior.</p>\n<p>Volatile or not, that example is a variation on <a href=\"https://en.wikipedia.org/wiki/Double-checked_locking\" rel=\"nofollow noreferrer\">double-checked locking</a>. You will find much commentary about that, because at one time it was promoted in some quarters, but <a href=\"https://stackoverflow.com/questions/4926681/why-is-double-checked-locking-broken-in-java\">many implementations in Java and C++ are broken</a>.  In particular, removing the <code>volatile</code> from your first example breaks it.</p>\n<blockquote>\n<p>Can't we do the same thing by adding synchronized to method declaration instead of to a block of code?</p>\n</blockquote>\n<p>Yes, in the sense that your second code is correctly synchronized and does have the property that the singleton is instantiated only once, on the first request for it.  The details of how that is achieved are not the same, so they might not perform identically.</p>\n"},{"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1689870198,"post_id":76731083,"comment_id":135277865,"body_markdown":"While you are correct that just using class initialization is the better choice, I think, you are heavily overestimating the costs of synchronization. As long as there is no heavy contention, it’s not so much worse than a `volatile` variable access. By the way, in recent Java versions, you can hide the `MySingletonHolder` class inside the accessor method: https://jdoodle.com/ia/Kj2","body":"While you are correct that just using class initialization is the better choice, I think, you are heavily overestimating the costs of synchronization. As long as there is no heavy contention, it’s not so much worse than a <code>volatile</code> variable access. By the way, in recent Java versions, you can hide the <code>MySingletonHolder</code> class inside the accessor method: <a href=\"https://jdoodle.com/ia/Kj2\" rel=\"nofollow noreferrer\">jdoodle.com/ia/Kj2</a>"},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1689870668,"post_id":76731083,"comment_id":135277950,"body_markdown":"@Holger I didn&#39;t use absolute terms, and I was talking about the more general principle of why _others_ focus so much on the difference between `volatile` and `synchronized` - as that is what the question is superficially about. This &#39;use the class initializers&#39; choice is also far more readable (no need to document the details about how double-checking locking fails due to failing to block re-ordering). Good point about using a method-local class in modern java versions! I shall update this answer, thank you.","body":"@Holger I didn&#39;t use absolute terms, and I was talking about the more general principle of why <i>others</i> focus so much on the difference between <code>volatile</code> and <code>synchronized</code> - as that is what the question is superficially about. This &#39;use the class initializers&#39; choice is also far more readable (no need to document the details about how double-checking locking fails due to failing to block re-ordering). Good point about using a method-local class in modern java versions! I shall update this answer, thank you."}],"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689870814,"creation_date":1689864389,"answer_id":76731083,"question_id":76730639,"body_markdown":"## You don&#39;t need double locking. AT ALL.\r\n\r\nThe idea is generally &#39;hey, it is a waste of time to create that singleton unless code actually _needs_ that singleton, so lets make it only the first time somebody needs it&#39;.\r\n\r\nA fair consideration, though, of course, in practice, the vast majority of singletons do no relevant initialization process whatsoever (their constructors are empty or trivial). Even if not, java __already__ applies this principle for classes itself. You may think that java, upon starting, loads __every__ class on the classpath first, and only then starts executing your app by invoking your `main` method. __Not so__. Instead, java loads _nothing_, and starts by executing your main method. As part of doing this, your main class will have to be loaded. And as part of doing _that_, everything your main class &#39;touches&#39; is soft-loaded.\r\n\r\nTouched by your main class means e.g. one of the fields in your main class has `String` as a type, or of course `String` which shows up in the signature of the main method - that causes the java classloader system to pause its attempting to actually execute your `main` method and go load `String` instead.\r\n\r\nThe process ends there though - in basis just because you mention a type someplace in `Main` does not mean java will then fully load that type (i.e. load everything _that_ touches, like tracing a path across a spiderweb that soon colours in the entire web). Instead those types are only &#39;fully loaded&#39; once you execute code that actually uses that type.\r\n\r\nAnd, of course, once some type has been loaded, java ensures it is never loaded a second time, _and_, java ensures any given class is never initialized twice, even if 2 threads try to use a class for the first time simultaneously. e.g. if you do:\r\n\r\n```\r\nclass Test {\r\n  private static final String foo = hello();\r\n\r\n  private static String hello() {\r\n    System.out.println(&quot;Hello!&quot;);\r\n    return &quot;&quot;;\r\n  }\r\n}\r\n```\r\n\r\nAny execution of any java program with the above code in it has only three options:\r\n\r\n* `Hello!` is never printed - if this class is never &#39;needed&#39; to be loaded.\r\n* It is printed exactly once, __ever__, for the lifetime of that JVM.\r\n* More than once, but only if you add more classloaders which effectively means clones of this class end up being loaded which is an academic corner case that doesn&#39;t count (had you used double locking it would _also_ initialize more than once in this case).\r\n\r\n* This is __simpler__ and __faster__ than anything you could possibly do here.\r\n\r\nHence, __do not lazy load singletons__. Yes, a billion tutorials mention it. They&#39;re all wrong. It happens. There are entire wikipedia articles about commonly believed falsehoods. Objective proof (such as the above) showing a belief is false should be heeded even if the belief is widespread.\r\n\r\nThus, we get to the right answer for 99.5% of all singletons:\r\n\r\n```\r\n\r\nclass MySingleton {\r\n  private static final MySingleton INSTANCE = new MySingleton();\r\n\r\n  public static MySingleton of() {\r\n    return INSTANCE;\r\n  }\r\n}\r\n```\r\n\r\nSimple. Effective. __and already lazy-loading__ because java&#39;s class loader system _itself_ is lazy loading.\r\n\r\nThe one exception to this rule, which should come up almost never, is if it is reasonable to expect that code will &#39;touch&#39; a class (mention the class someplace, e.g. use `ThatSingleton.class` as an expression or have a method that has a parameter of type `ThatSingleton` which nobody is likely to ever call), but never actually want an instance of the singleton. __That is an extremely weird situation to be in__ - normally if anybody so much as mentions the singleton type, that code will immediately invoke the &#39;get me that singleton&#39; method. After all, the primary reason to mention a type but not call the &#39;get me the singleton&#39; method is if you want to invoke static methods on it. Who makes singletons with static methods? That&#39;s... silly.\r\n\r\n## The exception applies to me!\r\n\r\nI doubt it.\r\n\r\nBut if it does, we can _still_ rely on the best, safest, fastest &#39;init only once&#39; mechanism java offers, which is the classloader:\r\n\r\n```\r\npublic class MySingleton {\r\n  public static MySingleton of() {\r\n    class MySingletonHolder {\r\n      static final MySingleton INSTANCE = new MySingleton();\r\n    }\r\n    return MySingletonHolder.INSTANCE;\r\n  }\r\n}\r\n```\r\n\r\nEDIT: The above snippet is a nice suggestion by /u/Holger, but it requires a relatively new java version as sticking `static` things in inner classes used to be invalid java code. If compiling the above code tells you that &#39;you cannot put static elements in a non-static class&#39; or similar, simply move the `Holder` class outside the method and mark it `private static final`.\r\n\r\nThis is objectively and in an absolute sense (As in, no exceptions, period) the best option - even in that exceedingly exotic case as described before. `new MySingleton()` __will never__ be executed __unless__ somebody invokes `of()`, in which case it will be executed precisely once. No matter how many threads are doing it simultaneously.\r\n\r\n## Explanatory: What&#39;s wrong with your snippets\r\n\r\nYour question inherently implies that you think `synchronized` is either simpler than `volatile`, faster than `volatile`, or both. This simply is not true: `volatile` is usually __faster__, which is why the `volatile` example shows up more often as &#39;the best way to do it&#39; (it is not - using the classloader is better, see above).\r\n\r\n## Explanatory: What is the hubbub about?\r\n\r\nThe general problem with your `synchronized` example is that any call to `of()` will have to acquire a lock and then release it immediately after checking that, indeed, `INSTANCE` is already set. Just the `synchronized` part (the acquiring of the lock) is, itself, quite slow (thousands, nay, millions of times slower than `new MySingleton()` unless your singleton constructor does something very very serious, such as parse through a file). You pay this cost __even days after your app has started__ - after all, every call to `of()`, even the millionth, still has to go through `synchronized`.\r\n\r\nThe various tricks such as double-locking etc try to mitigate that cost - to stop paying it once we&#39;ve gotten well past initializing things. The simple double-locking doesn&#39;t actually &#39;work&#39; (is not guaranteed to only ever make 1 instance), with `volatile` it does and now you&#39;re paying the lesser, but still significant cost of reading a volatile field __every time__ anybody calls the &#39;get me the singleton instance&#39; method. This also is potentially quite slow.\r\n\r\nAll java code has to go through the initialisation gate anytime it touches any class. Which is why the classloader system has very efficient processes for this. Given that you already have to pass that gate, might as well piggyback your lazy initialization needs off of it - which gets us back to: Use my first snippet. Unless you have written something completely ridiculous such as a singleton that _also_ has static methods, in which case, use my second snippet. And know that __all__ blogs, tutorials, examples, etc that show any sort of double locking anything are _all_ far worse.\r\n","title":"Java singleton lazy initialization. Volatile vs synchronized method","body":"<h2>You don't need double locking. AT ALL.</h2>\n<p>The idea is generally 'hey, it is a waste of time to create that singleton unless code actually <em>needs</em> that singleton, so lets make it only the first time somebody needs it'.</p>\n<p>A fair consideration, though, of course, in practice, the vast majority of singletons do no relevant initialization process whatsoever (their constructors are empty or trivial). Even if not, java <strong>already</strong> applies this principle for classes itself. You may think that java, upon starting, loads <strong>every</strong> class on the classpath first, and only then starts executing your app by invoking your <code>main</code> method. <strong>Not so</strong>. Instead, java loads <em>nothing</em>, and starts by executing your main method. As part of doing this, your main class will have to be loaded. And as part of doing <em>that</em>, everything your main class 'touches' is soft-loaded.</p>\n<p>Touched by your main class means e.g. one of the fields in your main class has <code>String</code> as a type, or of course <code>String</code> which shows up in the signature of the main method - that causes the java classloader system to pause its attempting to actually execute your <code>main</code> method and go load <code>String</code> instead.</p>\n<p>The process ends there though - in basis just because you mention a type someplace in <code>Main</code> does not mean java will then fully load that type (i.e. load everything <em>that</em> touches, like tracing a path across a spiderweb that soon colours in the entire web). Instead those types are only 'fully loaded' once you execute code that actually uses that type.</p>\n<p>And, of course, once some type has been loaded, java ensures it is never loaded a second time, <em>and</em>, java ensures any given class is never initialized twice, even if 2 threads try to use a class for the first time simultaneously. e.g. if you do:</p>\n<pre><code>class Test {\n  private static final String foo = hello();\n\n  private static String hello() {\n    System.out.println(&quot;Hello!&quot;);\n    return &quot;&quot;;\n  }\n}\n</code></pre>\n<p>Any execution of any java program with the above code in it has only three options:</p>\n<ul>\n<li><p><code>Hello!</code> is never printed - if this class is never 'needed' to be loaded.</p>\n</li>\n<li><p>It is printed exactly once, <strong>ever</strong>, for the lifetime of that JVM.</p>\n</li>\n<li><p>More than once, but only if you add more classloaders which effectively means clones of this class end up being loaded which is an academic corner case that doesn't count (had you used double locking it would <em>also</em> initialize more than once in this case).</p>\n</li>\n<li><p>This is <strong>simpler</strong> and <strong>faster</strong> than anything you could possibly do here.</p>\n</li>\n</ul>\n<p>Hence, <strong>do not lazy load singletons</strong>. Yes, a billion tutorials mention it. They're all wrong. It happens. There are entire wikipedia articles about commonly believed falsehoods. Objective proof (such as the above) showing a belief is false should be heeded even if the belief is widespread.</p>\n<p>Thus, we get to the right answer for 99.5% of all singletons:</p>\n<pre><code>\nclass MySingleton {\n  private static final MySingleton INSTANCE = new MySingleton();\n\n  public static MySingleton of() {\n    return INSTANCE;\n  }\n}\n</code></pre>\n<p>Simple. Effective. <strong>and already lazy-loading</strong> because java's class loader system <em>itself</em> is lazy loading.</p>\n<p>The one exception to this rule, which should come up almost never, is if it is reasonable to expect that code will 'touch' a class (mention the class someplace, e.g. use <code>ThatSingleton.class</code> as an expression or have a method that has a parameter of type <code>ThatSingleton</code> which nobody is likely to ever call), but never actually want an instance of the singleton. <strong>That is an extremely weird situation to be in</strong> - normally if anybody so much as mentions the singleton type, that code will immediately invoke the 'get me that singleton' method. After all, the primary reason to mention a type but not call the 'get me the singleton' method is if you want to invoke static methods on it. Who makes singletons with static methods? That's... silly.</p>\n<h2>The exception applies to me!</h2>\n<p>I doubt it.</p>\n<p>But if it does, we can <em>still</em> rely on the best, safest, fastest 'init only once' mechanism java offers, which is the classloader:</p>\n<pre><code>public class MySingleton {\n  public static MySingleton of() {\n    class MySingletonHolder {\n      static final MySingleton INSTANCE = new MySingleton();\n    }\n    return MySingletonHolder.INSTANCE;\n  }\n}\n</code></pre>\n<p>EDIT: The above snippet is a nice suggestion by /u/Holger, but it requires a relatively new java version as sticking <code>static</code> things in inner classes used to be invalid java code. If compiling the above code tells you that 'you cannot put static elements in a non-static class' or similar, simply move the <code>Holder</code> class outside the method and mark it <code>private static final</code>.</p>\n<p>This is objectively and in an absolute sense (As in, no exceptions, period) the best option - even in that exceedingly exotic case as described before. <code>new MySingleton()</code> <strong>will never</strong> be executed <strong>unless</strong> somebody invokes <code>of()</code>, in which case it will be executed precisely once. No matter how many threads are doing it simultaneously.</p>\n<h2>Explanatory: What's wrong with your snippets</h2>\n<p>Your question inherently implies that you think <code>synchronized</code> is either simpler than <code>volatile</code>, faster than <code>volatile</code>, or both. This simply is not true: <code>volatile</code> is usually <strong>faster</strong>, which is why the <code>volatile</code> example shows up more often as 'the best way to do it' (it is not - using the classloader is better, see above).</p>\n<h2>Explanatory: What is the hubbub about?</h2>\n<p>The general problem with your <code>synchronized</code> example is that any call to <code>of()</code> will have to acquire a lock and then release it immediately after checking that, indeed, <code>INSTANCE</code> is already set. Just the <code>synchronized</code> part (the acquiring of the lock) is, itself, quite slow (thousands, nay, millions of times slower than <code>new MySingleton()</code> unless your singleton constructor does something very very serious, such as parse through a file). You pay this cost <strong>even days after your app has started</strong> - after all, every call to <code>of()</code>, even the millionth, still has to go through <code>synchronized</code>.</p>\n<p>The various tricks such as double-locking etc try to mitigate that cost - to stop paying it once we've gotten well past initializing things. The simple double-locking doesn't actually 'work' (is not guaranteed to only ever make 1 instance), with <code>volatile</code> it does and now you're paying the lesser, but still significant cost of reading a volatile field <strong>every time</strong> anybody calls the 'get me the singleton instance' method. This also is potentially quite slow.</p>\n<p>All java code has to go through the initialisation gate anytime it touches any class. Which is why the classloader system has very efficient processes for this. Given that you already have to pass that gate, might as well piggyback your lazy initialization needs off of it - which gets us back to: Use my first snippet. Unless you have written something completely ridiculous such as a singleton that <em>also</em> has static methods, in which case, use my second snippet. And know that <strong>all</strong> blogs, tutorials, examples, etc that show any sort of double locking anything are <em>all</em> far worse.</p>\n"}],"owner":{"account_id":7405799,"reputation":625,"user_id":5634777,"accept_rate":38,"display_name":"kaka"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1689870814,"creation_date":1689861376,"question_id":76730639,"body_markdown":"Why do we need to add volatile to field to prevent invalid data retrieval? Can&#39;t we do the same thing by adding synchronized to method declaration instead of to a block of code?\r\n\r\n\r\n    public class LazySingleton {\r\n\r\n    private static volatile LazySingleton instance;\r\n\r\n    private LazySingleton() {\r\n    }\r\n\r\n    public static LazySingleton getInstance() {\r\n        if (instance == null) {\r\n            synchronized (LazySingleton.class) {\r\n                if (instance == null) {\r\n                    instance = new LazySingleton();\r\n                }\r\n            }\r\n        }\r\n        return instance;\r\n    }\r\n    }\r\n\r\nand \r\n\r\n    public class LazySingleton {\r\n\r\n    private static LazySingleton instance;\r\n\r\n    private LazySingleton() {\r\n    }\r\n\r\n    public static synchronized LazySingleton getInstance() {\r\n        if (instance == null) {\r\n            instance = new LazySingleton();\r\n        }\r\n        return instance;\r\n    }\r\n    }","title":"Java singleton lazy initialization. Volatile vs synchronized method","body":"<p>Why do we need to add volatile to field to prevent invalid data retrieval? Can't we do the same thing by adding synchronized to method declaration instead of to a block of code?</p>\n<pre><code>public class LazySingleton {\n\nprivate static volatile LazySingleton instance;\n\nprivate LazySingleton() {\n}\n\npublic static LazySingleton getInstance() {\n    if (instance == null) {\n        synchronized (LazySingleton.class) {\n            if (instance == null) {\n                instance = new LazySingleton();\n            }\n        }\n    }\n    return instance;\n}\n}\n</code></pre>\n<p>and</p>\n<pre><code>public class LazySingleton {\n\nprivate static LazySingleton instance;\n\nprivate LazySingleton() {\n}\n\npublic static synchronized LazySingleton getInstance() {\n    if (instance == null) {\n        instance = new LazySingleton();\n    }\n    return instance;\n}\n}\n</code></pre>\n"},{"tags":["java","file","directory","path"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1689868651,"post_id":76731652,"comment_id":135277552,"body_markdown":"Java is designed to work in a &quot;networked&quot; environment, so the path to the files might be a link over the internet.  I&#39;m not 100% sure that what you want exists.","body":"Java is designed to work in a &quot;networked&quot; environment, so the path to the files might be a link over the internet.  I&#39;m not 100% sure that what you want exists."},{"owner":{"account_id":27957120,"reputation":19,"user_id":21349725,"display_name":"Jon doe"},"score":0,"creation_date":1689868983,"post_id":76731652,"comment_id":135277623,"body_markdown":"@markspace Then I have spent hours on a goose chase I had a feeling did not exist so I guess I add a 1 line python code file to the project then.","body":"@markspace Then I have spent hours on a goose chase I had a feeling did not exist so I guess I add a 1 line python code file to the project then."},{"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"score":2,"creation_date":1689868996,"post_id":76731652,"comment_id":135277626,"body_markdown":"Its not clear what you are after as the &quot;directory where the project files are located&quot; and &quot;finding the running java class path&quot; aren&#39;t the same thing.","body":"Its not clear what you are after as the &quot;directory where the project files are located&quot; and &quot;finding the running java class path&quot; aren&#39;t the same thing."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1689869359,"post_id":76731652,"comment_id":135277693,"body_markdown":"This might get you something useful, but be careful that Java generally has a more complex execution environment than many other languages: https://stackoverflow.com/questions/227486/find-where-java-class-is-loaded-from","body":"This might get you something useful, but be careful that Java generally has a more complex execution environment than many other languages: <a href=\"https://stackoverflow.com/questions/227486/find-where-java-class-is-loaded-from\" title=\"find where java class is loaded from\">stackoverflow.com/questions/227486/&hellip;</a>"},{"owner":{"account_id":27957120,"reputation":19,"user_id":21349725,"display_name":"Jon doe"},"score":0,"creation_date":1689869840,"post_id":76731652,"comment_id":135277793,"body_markdown":"@DuncG then my apologies I have done a misstake asking the question then. essentially I want the file paths location where the projects java files are located. No matter where you execute the code from.","body":"@DuncG then my apologies I have done a misstake asking the question then. essentially I want the file paths location where the projects java files are located. No matter where you execute the code from."},{"owner":{"account_id":27957120,"reputation":19,"user_id":21349725,"display_name":"Jon doe"},"score":0,"creation_date":1689870218,"post_id":76731652,"comment_id":135277871,"body_markdown":"@markspace I have tried this before and I am now looking more at the path for the .java files but I think I can maybe modifty this to make it work I assume it is possible to make java take a step backwards out from the bin files","body":"@markspace I have tried this before and I am now looking more at the path for the .java files but I think I can maybe modifty this to make it work I assume it is possible to make java take a step backwards out from the bin files"},{"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"score":1,"creation_date":1689870648,"post_id":76731652,"comment_id":135277944,"body_markdown":"@Jondoe The compiler doesn&#39;t record the path to original source file, and class file might be in directory or a jar. Perhaps you should add background on what you are trying to achieve as there are likely to be other ways to handle your problem.","body":"@Jondoe The compiler doesn&#39;t record the path to original source file, and class file might be in directory or a jar. Perhaps you should add background on what you are trying to achieve as there are likely to be other ways to handle your problem."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689871619,"post_id":76731652,"comment_id":135278091,"body_markdown":"*This way program will always read the file I need it to read* Which file is that? If it&#39;s a resource (read-only data used by your app) they will be packaged with your app and always available, provided that&#39;s done correctly and they are addressed correctly. You&#39;ve probably got an &#39;XY problem&#39; here","body":"<i>This way program will always read the file I need it to read</i> Which file is that? If it&#39;s a resource (read-only data used by your app) they will be packaged with your app and always available, provided that&#39;s done correctly and they are addressed correctly. You&#39;ve probably got an &#39;XY problem&#39; here"},{"owner":{"account_id":979189,"reputation":725,"user_id":1866010,"accept_rate":67,"display_name":"Calabacin"},"score":0,"creation_date":1689871621,"post_id":76731652,"comment_id":135278092,"body_markdown":"So what you want is to see where the current class is inside the jar / classPath?","body":"So what you want is to see where the current class is inside the jar / classPath?"},{"owner":{"account_id":27957120,"reputation":19,"user_id":21349725,"display_name":"Jon doe"},"score":0,"creation_date":1689871959,"post_id":76731652,"comment_id":135278148,"body_markdown":"@@DuncG lets say I have the Java project named Test and the path goes like this c:/projects/Test/src/test/Test.java using the Java inbuilt methods I can only access the project file path like c/projects/Test but I want it to go all the way for example if you were to run the code in the c/projects directory in visual studio code instead it would not read the files if you use the in built methods like get.property(&quot;user.dir&quot;) + &quot;/images/image.png&quot; this only works if you run the file from the &#39;&#39;correct&#39;&#39; directory. I do admit it is a minor problem I am greatly overthinking.","body":"@@DuncG lets say I have the Java project named Test and the path goes like this c:/projects/Test/src/test/Test.java using the Java inbuilt methods I can only access the project file path like c/projects/Test but I want it to go all the way for example if you were to run the code in the c/projects directory in visual studio code instead it would not read the files if you use the in built methods like get.property(&quot;user.dir&quot;) + &quot;/images/image.png&quot; this only works if you run the file from the &#39;&#39;correct&#39;&#39; directory. I do admit it is a minor problem I am greatly overthinking."},{"owner":{"account_id":27957120,"reputation":19,"user_id":21349725,"display_name":"Jon doe"},"score":0,"creation_date":1689872081,"post_id":76731652,"comment_id":135278175,"body_markdown":"@DuncG essentially I am trying to make sure it executes properly even if you run the project wrong.","body":"@DuncG essentially I am trying to make sure it executes properly even if you run the project wrong."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689872111,"post_id":76731652,"comment_id":135278179,"body_markdown":"*. I do admit it is a minor problem I am greatly overthinking.* You are correct to acknowledge it as it is an important consideration. Where you are incorrect is that you are not looking at the correct way of solving it. There are two assured ways of addressing files that are needed by the app: a. as *resources* (read-only) and b: as files in absolute paths that are reliably writable-to [e.g. `$user.home`] (read-write)","body":"<i>. I do admit it is a minor problem I am greatly overthinking.</i> You are correct to acknowledge it as it is an important consideration. Where you are incorrect is that you are not looking at the correct way of solving it. There are two assured ways of addressing files that are needed by the app: a. as <i>resources</i> (read-only) and b: as files in absolute paths that are reliably writable-to [e.g. <code>$user.home</code>] (read-write)"},{"owner":{"account_id":27957120,"reputation":19,"user_id":21349725,"display_name":"Jon doe"},"score":0,"creation_date":1689872519,"post_id":76731652,"comment_id":135278256,"body_markdown":"@g00se could you explain more? I did not quite follow that.","body":"@g00se could you explain more? I did not quite follow that."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689872746,"post_id":76731652,"comment_id":135278304,"body_markdown":"First of all you need to be a lot clearer on what files you&#39;re concerned about and what you&#39;re doing with them","body":"First of all you need to be a lot clearer on what files you&#39;re concerned about and what you&#39;re doing with them"},{"owner":{"account_id":27957120,"reputation":19,"user_id":21349725,"display_name":"Jon doe"},"score":0,"creation_date":1689873265,"post_id":76731652,"comment_id":135278403,"body_markdown":"@g00se I am just uploading a sprite of something drawn using graphics. I ecountered an issue of running the code when I had a different working directory with the path. As mentioned. The issue is minor as to have the issue appear you would need to be outside of the Java programs intended working directory. I am trying to link the correct path even if you were to execute it outside the directory.","body":"@g00se I am just uploading a sprite of something drawn using graphics. I ecountered an issue of running the code when I had a different working directory with the path. As mentioned. The issue is minor as to have the issue appear you would need to be outside of the Java programs intended working directory. I am trying to link the correct path even if you were to execute it outside the directory."},{"owner":{"account_id":27957120,"reputation":19,"user_id":21349725,"display_name":"Jon doe"},"score":0,"creation_date":1689873384,"post_id":76731652,"comment_id":135278417,"body_markdown":"example eclise you can only execute the code from the working directory but visual studio code allows you too more or less execute it from anywhere and that rruins things if you do.","body":"example eclise you can only execute the code from the working directory but visual studio code allows you too more or less execute it from anywhere and that rruins things if you do."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689874057,"post_id":76731652,"comment_id":135278537,"body_markdown":"You need to treat your sprite file [as a resource](https://technojeeves.com/index.php/aliasjava1/80-loading-files-as-resources-in-java-with-eclipse)","body":"You need to treat your sprite file <a href=\"https://technojeeves.com/index.php/aliasjava1/80-loading-files-as-resources-in-java-with-eclipse\" rel=\"nofollow noreferrer\">as a resource</a>"},{"owner":{"account_id":27957120,"reputation":19,"user_id":21349725,"display_name":"Jon doe"},"score":0,"creation_date":1689874513,"post_id":76731652,"comment_id":135278632,"body_markdown":"@g00se I will look into this and hope it will solve the issue thank you.","body":"@g00se I will look into this and hope it will solve the issue thank you."},{"owner":{"account_id":27957120,"reputation":19,"user_id":21349725,"display_name":"Jon doe"},"score":0,"creation_date":1689876877,"post_id":76731652,"comment_id":135279124,"body_markdown":"@g00se many thanks I seem to have gotten it working now :)","body":"@g00se many thanks I seem to have gotten it working now :)"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689880165,"post_id":76731652,"comment_id":135279773,"body_markdown":"Good. So you&#39;re using `getResourceAsStream`?","body":"Good. So you&#39;re using <code>getResourceAsStream</code>?"},{"owner":{"account_id":27957120,"reputation":19,"user_id":21349725,"display_name":"Jon doe"},"score":0,"creation_date":1689915408,"post_id":76731652,"comment_id":135283393,"body_markdown":"@g00se yes, is that an issue? I might looking into alternatives.","body":"@g00se yes, is that an issue? I might looking into alternatives."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689924861,"post_id":76731652,"comment_id":135284793,"body_markdown":"No. That&#39;s what you should be using","body":"No. That&#39;s what you should be using"},{"owner":{"account_id":27957120,"reputation":19,"user_id":21349725,"display_name":"Jon doe"},"score":0,"creation_date":1689935980,"post_id":76731652,"comment_id":135286843,"body_markdown":"@g00se I see, then I understood it.  Again many thanks, now the code executes in any working directory I can find, I also now have noticed it is much easier to set up  Java projects in eclipse then vs code","body":"@g00se I see, then I understood it.  Again many thanks, now the code executes in any working directory I can find, I also now have noticed it is much easier to set up  Java projects in eclipse then vs code"}],"answers":[{"comments":[{"owner":{"account_id":27957120,"reputation":19,"user_id":21349725,"display_name":"Jon doe"},"score":0,"creation_date":1689869739,"post_id":76731733,"comment_id":135277762,"body_markdown":"I have yes,  only gives me directory part sorta. It would not work if you ran the code outside of the specific workspace path. LIke running the code and you run it outside the implemented work space path it will crash the code.","body":"I have yes,  only gives me directory part sorta. It would not work if you ran the code outside of the specific workspace path. LIke running the code and you run it outside the implemented work space path it will crash the code."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689871908,"post_id":76731733,"comment_id":135278140,"body_markdown":"@Calabacin. You solved a different problem. That of not knowing the absolute path of the current directory.","body":"@Calabacin. You solved a different problem. That of not knowing the absolute path of the current directory."},{"owner":{"account_id":979189,"reputation":725,"user_id":1866010,"accept_rate":67,"display_name":"Calabacin"},"score":0,"creation_date":1689872057,"post_id":76731733,"comment_id":135278171,"body_markdown":"I still do not understand what you want. I suggest you improve your question.","body":"I still do not understand what you want. I suggest you improve your question."},{"owner":{"account_id":27957120,"reputation":19,"user_id":21349725,"display_name":"Jon doe"},"score":0,"creation_date":1689872697,"post_id":76731733,"comment_id":135278296,"body_markdown":"@Calabacin Apparently what I am looking for is not possible really in Java from my understanding of the issue. Because of the way Java executes. Well sorta the code can me modified to help with the issue of actually executing it wrong.","body":"@Calabacin Apparently what I am looking for is not possible really in Java from my understanding of the issue. Because of the way Java executes. Well sorta the code can me modified to help with the issue of actually executing it wrong."},{"owner":{"account_id":979189,"reputation":725,"user_id":1866010,"accept_rate":67,"display_name":"Calabacin"},"score":0,"creation_date":1689872923,"post_id":76731733,"comment_id":135278341,"body_markdown":"I&#39;m pretty sure it can be done, I am just unable to know what it is you want. You could for example get the package from the current class, which is its path inside the JAR, if that is what you want. In any case I do not understand this need, as you have a resource folder that can contain whatever you need, and you may also read the proper folder from a config file in the current path, receive it as a parameter, or even read an environment variable.","body":"I&#39;m pretty sure it can be done, I am just unable to know what it is you want. You could for example get the package from the current class, which is its path inside the JAR, if that is what you want. In any case I do not understand this need, as you have a resource folder that can contain whatever you need, and you may also read the proper folder from a config file in the current path, receive it as a parameter, or even read an environment variable."},{"owner":{"account_id":27957120,"reputation":19,"user_id":21349725,"display_name":"Jon doe"},"score":0,"creation_date":1689878738,"post_id":76731733,"comment_id":135279487,"body_markdown":"@Calabacin I forgot to reply, it was simply me overthinking the issue and not fully understanding the problem. And of course me not understanding the issue I could not give a complete description what the problem was. Thank you for your effort still.","body":"@Calabacin I forgot to reply, it was simply me overthinking the issue and not fully understanding the problem. And of course me not understanding the issue I could not give a complete description what the problem was. Thank you for your effort still."}],"tags":[],"owner":{"account_id":979189,"reputation":725,"user_id":1866010,"accept_rate":67,"display_name":"Calabacin"},"comment_count":6,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1689870790,"creation_date":1689869014,"answer_id":76731733,"question_id":76731652,"body_markdown":"Have you tried the following?\r\n\r\n    String path = new File(&quot;.&quot;).getAbsolutePath();\r\n\r\nI have created this program:\r\n\r\n    public class Main {\r\n        private String getPath() {\r\n            return new File(&quot;.&quot;).getAbsolutePath();\r\n        }\r\n    \r\n        private void showPath() {\r\n            System.out.printf(&quot;Full path is %s&quot;, getPath());\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            new Main().showPath();\r\n        }\r\n    }\r\n\r\nCopied the created jar to another folder and run it using this command:\r\n\r\n    java -jar showPath-1.0.jar\r\n\r\nAnd that gave me the exact path where I was running it from.\r\n","title":"Java inbuilt method for finding the running java class path","body":"<p>Have you tried the following?</p>\n<pre><code>String path = new File(&quot;.&quot;).getAbsolutePath();\n</code></pre>\n<p>I have created this program:</p>\n<pre><code>public class Main {\n    private String getPath() {\n        return new File(&quot;.&quot;).getAbsolutePath();\n    }\n\n    private void showPath() {\n        System.out.printf(&quot;Full path is %s&quot;, getPath());\n    }\n\n    public static void main(String[] args) {\n        new Main().showPath();\n    }\n}\n</code></pre>\n<p>Copied the created jar to another folder and run it using this command:</p>\n<pre><code>java -jar showPath-1.0.jar\n</code></pre>\n<p>And that gave me the exact path where I was running it from.</p>\n"}],"owner":{"account_id":27957120,"reputation":19,"user_id":21349725,"display_name":"Jon doe"},"comment_count":23,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"answer_count":1,"score":-3,"last_activity_date":1689870790,"creation_date":1689868458,"question_id":76731652,"body_markdown":"I am having trouble finding  a way to have Java link the path of the directory where the project files are located.\r\n\r\nI am aware of this and other versions that does the same thing\r\n\r\n```\r\nSystem.getProperty(&quot;user.dir&quot;))\r\n```\r\n\r\nBut this only links to the working directory and I really need it to link to where the files are. This way program will always read the file I need it to read without there ever being any issues with not the correct path.\r\n\r\nI know how to do this in Python but I cannot find a way to do it in Java \r\n\r\nIn python it is easy, is this lacking in Java is that why I cannot find anything that does it?\r\n\r\n```\r\nos.path.dirname(__file__) \r\n```\r\n\r\nDo I need to implement one line of code in python to make this work? Seems kinda odd there must be a way to make this work like in Python.\r\n\r\n\r\n```\r\npublic class Test {\r\n\r\n   public static void main(String argvs[]) {\r\n\t   \tString file = &quot;/directoryname/filename&quot;;\r\n        System.out.println(System.getProperty(&quot;user.dir&quot;)+ file); //I want this to link to the directory the Class is located so it can open up a directory there. \r\n    }\r\n}\r\n```\r\n","title":"Java inbuilt method for finding the running java class path","body":"<p>I am having trouble finding  a way to have Java link the path of the directory where the project files are located.</p>\n<p>I am aware of this and other versions that does the same thing</p>\n<pre><code>System.getProperty(&quot;user.dir&quot;))\n</code></pre>\n<p>But this only links to the working directory and I really need it to link to where the files are. This way program will always read the file I need it to read without there ever being any issues with not the correct path.</p>\n<p>I know how to do this in Python but I cannot find a way to do it in Java</p>\n<p>In python it is easy, is this lacking in Java is that why I cannot find anything that does it?</p>\n<pre><code>os.path.dirname(__file__) \n</code></pre>\n<p>Do I need to implement one line of code in python to make this work? Seems kinda odd there must be a way to make this work like in Python.</p>\n<pre><code>public class Test {\n\n   public static void main(String argvs[]) {\n        String file = &quot;/directoryname/filename&quot;;\n        System.out.println(System.getProperty(&quot;user.dir&quot;)+ file); //I want this to link to the directory the Class is located so it can open up a directory there. \n    }\n}\n</code></pre>\n"},{"tags":["java","jms","quarkus","open-telemetry","propagation"],"comments":[{"owner":{"account_id":11434008,"reputation":30715,"user_id":8381946,"display_name":"Justin Bertram"},"score":0,"creation_date":1689859076,"post_id":76726046,"comment_id":135275043,"body_markdown":"What do you mean by &quot;implement the setter&quot;? Are you trying to _implement_ `javax.jms.Message` or are you simply trying to _invoke_ a method to set a property? Please clarify. Thanks!","body":"What do you mean by &quot;implement the setter&quot;? Are you trying to <i>implement</i> <code>javax.jms.Message</code> or are you simply trying to <i>invoke</i> a method to set a property? Please clarify. Thanks!"}],"answers":[{"comments":[{"owner":{"account_id":18044566,"reputation":101,"user_id":13115896,"display_name":"sg2000"},"score":0,"creation_date":1689853788,"post_id":76727616,"comment_id":135273732,"body_markdown":"Thank you. I am trying to implement what&#39;s on this link https://github.com/brunobat/quarkus-observability-demo/tree/main/quarkus-observability-demo-activemq but having issues doing so. I am using JMS Message and so not sure how to use the client message to set the properties.","body":"Thank you. I am trying to implement what&#39;s on this link <a href=\"https://github.com/brunobat/quarkus-observability-demo/tree/main/quarkus-observability-demo-activemq\" rel=\"nofollow noreferrer\">github.com/brunobat/quarkus-observability-demo/tree/main/&hellip;</a> but having issues doing so. I am using JMS Message and so not sure how to use the client message to set the properties."},{"owner":{"account_id":18044566,"reputation":101,"user_id":13115896,"display_name":"sg2000"},"score":0,"creation_date":1689891466,"post_id":76727616,"comment_id":135281440,"body_markdown":"I think i found the issue. The context when it comes into the service B correctly shows the traceid but then the message is then translated to another type of message and at this point, the context loses the tracing information. Is there anyway i can set the incoming context globally so it stays available for all threads?","body":"I think i found the issue. The context when it comes into the service B correctly shows the traceid but then the message is then translated to another type of message and at this point, the context loses the tracing information. Is there anyway i can set the incoming context globally so it stays available for all threads?"},{"owner":{"account_id":3528320,"reputation":301,"user_id":2948740,"display_name":"Gregor Zeitlinger"},"score":0,"creation_date":1689946209,"post_id":76727616,"comment_id":135288862,"body_markdown":"no, the context is bound to a single thread.","body":"no, the context is bound to a single thread."},{"owner":{"account_id":18044566,"reputation":101,"user_id":13115896,"display_name":"sg2000"},"score":0,"creation_date":1690223392,"post_id":76727616,"comment_id":135320489,"body_markdown":"Yes. Realized it. Do we need to explicitly pass it around between threads or is it possible to set it at the top level so all threads get it?","body":"Yes. Realized it. Do we need to explicitly pass it around between threads or is it possible to set it at the top level so all threads get it?"},{"owner":{"account_id":3528320,"reputation":301,"user_id":2948740,"display_name":"Gregor Zeitlinger"},"score":0,"creation_date":1690361418,"post_id":76727616,"comment_id":135341261,"body_markdown":"No, threads never share a context.\nIf you&#39;re using the javaagent, the context gets propagated to the next thread correctly in many situations, e.g. when using an executor using [this instrumentation moddule](https://github.com/open-telemetry/opentelemetry-java-instrumentation/blob/main/instrumentation/executors/README.md).","body":"No, threads never share a context. If you&#39;re using the javaagent, the context gets propagated to the next thread correctly in many situations, e.g. when using an executor using <a href=\"https://github.com/open-telemetry/opentelemetry-java-instrumentation/blob/main/instrumentation/executors/README.md\" rel=\"nofollow noreferrer\">this instrumentation moddule</a>."}],"tags":[],"owner":{"account_id":3528320,"reputation":301,"user_id":2948740,"display_name":"Gregor Zeitlinger"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689838395,"creation_date":1689838395,"answer_id":76727616,"question_id":76726046,"body_markdown":"The question does not state what instrumentation library you&#39;re using, but it sounds like https://github.com/open-telemetry/opentelemetry-java-instrumentation\r\n\r\n&gt; Identifier contains invalid JMS identifier character &#39;-&#39;: &#39;uber-trace-id&#39;\r\n\r\nI looks like you&#39;re using message properties to send the tracecontext, which looks good.\r\nIn this case, the allowed characters [don&#39;t seem to match](https://stackoverflow.com/questions/60190181/jms-message-listener-invoker-failed-cause-identifier-contains-invalid-jms-iden), so I&#39;d suggest to [transcode the values to a Java identifier](https://stackoverflow.com/questions/7440801/how-to-convert-arbitrary-string-to-java-identifier).\r\n\r\n&gt; i can&#39;t seem to implement the setter and set the properties on the message object as i get an exception saying the properties are read-only.\r\n\r\nI haven&#39;t used Artemis JMS, but it looks like you have to [set the properties in the client message](https://activemq.apache.org/components/artemis/documentation/javadocs/javadoc-latest/org/apache/activemq/artemis/api/core/client/ClientMessage.html#putStringProperty(java.lang.String,java.lang.String)) before you create the ActiveMQMessage.\r\n","title":"Quarkus JMS Context propagation","body":"<p>The question does not state what instrumentation library you're using, but it sounds like <a href=\"https://github.com/open-telemetry/opentelemetry-java-instrumentation\" rel=\"nofollow noreferrer\">https://github.com/open-telemetry/opentelemetry-java-instrumentation</a></p>\n<blockquote>\n<p>Identifier contains invalid JMS identifier character '-': 'uber-trace-id'</p>\n</blockquote>\n<p>I looks like you're using message properties to send the tracecontext, which looks good.\nIn this case, the allowed characters <a href=\"https://stackoverflow.com/questions/60190181/jms-message-listener-invoker-failed-cause-identifier-contains-invalid-jms-iden\">don't seem to match</a>, so I'd suggest to <a href=\"https://stackoverflow.com/questions/7440801/how-to-convert-arbitrary-string-to-java-identifier\">transcode the values to a Java identifier</a>.</p>\n<blockquote>\n<p>i can't seem to implement the setter and set the properties on the message object as i get an exception saying the properties are read-only.</p>\n</blockquote>\n<p>I haven't used Artemis JMS, but it looks like you have to <a href=\"https://activemq.apache.org/components/artemis/documentation/javadocs/javadoc-latest/org/apache/activemq/artemis/api/core/client/ClientMessage.html#putStringProperty(java.lang.String,java.lang.String)\" rel=\"nofollow noreferrer\">set the properties in the client message</a> before you create the ActiveMQMessage.</p>\n"}],"owner":{"account_id":18044566,"reputation":101,"user_id":13115896,"display_name":"sg2000"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689870749,"creation_date":1689814783,"question_id":76726046,"body_markdown":"I have 3 microservices that are communicating over JMS (ActiveMQ Artemis). I am looking to implement Open Telemetry across these flows. I have tried the automated WithSpan approach but obviously the tracecontext is not propagated between services as it&#39;s async/JMS. I have tried to follow the manual context propagation approach outlined [here][1], but then I am getting 2 errors while doing this.\r\n1) `java.lang.IllegalArgumentException`: Identifier contains invalid JMS identifier character &#39;-&#39;: &#39;uber-trace-id&#39; \r\n2) I can&#39;t seem to implement the setter and set the properties on the message object as i get an exception saying the properties are read-only. \r\n\r\nAny idea how I can do this where i want to be able to trace the end-to-end flow?\r\n\r\n\r\n  [1]: https://opentelemetry.io/docs/instrumentation/java/manual/","title":"Quarkus JMS Context propagation","body":"<p>I have 3 microservices that are communicating over JMS (ActiveMQ Artemis). I am looking to implement Open Telemetry across these flows. I have tried the automated WithSpan approach but obviously the tracecontext is not propagated between services as it's async/JMS. I have tried to follow the manual context propagation approach outlined <a href=\"https://opentelemetry.io/docs/instrumentation/java/manual/\" rel=\"nofollow noreferrer\">here</a>, but then I am getting 2 errors while doing this.</p>\n<ol>\n<li><code>java.lang.IllegalArgumentException</code>: Identifier contains invalid JMS identifier character '-': 'uber-trace-id'</li>\n<li>I can't seem to implement the setter and set the properties on the message object as i get an exception saying the properties are read-only.</li>\n</ol>\n<p>Any idea how I can do this where i want to be able to trace the end-to-end flow?</p>\n"},{"tags":["java","spring","hibernate","one-to-many","many-to-one"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1689890504,"post_id":76731430,"comment_id":135281340,"body_markdown":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example).","body":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}],"owner":{"account_id":28792007,"reputation":1,"user_id":22051080,"display_name":"Yozhef Handraburh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689869546,"creation_date":1689866753,"question_id":76731430,"body_markdown":"I have a Test which includes TestBook which includes Block. When I`m trying to update my Test Im receiving this error:\r\n```\r\n2023-07-20T17:58:19.021+02:00 DEBUG 88644 --- [nio-8082-exec-5] o.s.security.web.FilterChainProxy        : Secured PUT /update-test/1\r\n\r\n2023-07-20T17:58:19.069+02:00  WARN 88644 --- [nio-8082-exec-5] .c.j.MappingJackson2HttpMessageConverter : Failed to evaluate Jackson deserialization for type [[simple type, class myproject.model.Test]]: com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Cannot handle managed/back reference &#39;defaultReference&#39;: back reference type (`java.util.List&lt;myproject.model.TestBlock&gt;`) not compatible with managed type (myprojectngulata.model.TestBlock)\r\n\r\n2023-07-20T17:58:19.101+02:00  WARN 88644 --- [nio-8082-exec-5] .c.j.MappingJackson2HttpMessageConverter : Failed to evaluate Jackson deserialization for type [[simple type, class myproject.model.Test]]: com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Cannot handle managed/back reference &#39;defaultReference&#39;: back reference type (`java.util.List&lt;myproject.model.TestBlock&gt;`) not compatible with managed type (myproject.model.TestBlock)\r\n\r\n2023-07-20T17:58:19.106+02:00 TRACE 88644 --- [nio-8082-exec-5] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]\r\n\r\n2023-07-20T17:58:19.106+02:00  WARN 88644 --- [nio-8082-exec-5] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.web.HttpMediaTypeNotSupportedException: Content-Type &#39;application/json;charset=UTF-8&#39; is not supported]\r\n\r\n2023-07-20T17:58:19.110+02:00 TRACE 88644 --- [nio-8082-exec-5] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@47aa7caa, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@ad79c3, org.springframework.security.web.context.SecurityContextHolderFilter@209137bb, org.springframework.security.web.header.HeaderWriterFilter@42023771, org.springframework.web.filter.CorsFilter@3bee9a82, org.springframework.security.web.csrf.CsrfFilter@50583645, org.springframework.security.web.authentication.logout.LogoutFilter@2e9f3a2f, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@7ef5fb0, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@403fb6f3, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3cafb7f5, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@8174188, org.springframework.security.web.session.SessionManagementFilter@53361e2c, org.springframework.security.web.access.ExceptionTranslationFilter@2a8c3c4a, org.springframework.security.web.access.intercept.AuthorizationFilter@8e673df]] (1/1)\r\n```\r\n\r\n\r\nThis is my Models\r\n\r\nTest\r\n```\r\nimport java.util.List;\r\n\r\nimport com.fasterxml.jackson.annotation.JsonBackReference;\r\nimport com.fasterxml.jackson.annotation.JsonManagedReference;\r\n\r\nimport jakarta.persistence.*;\r\n\r\n@Entity\r\npublic class Test {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Integer id;\r\n\r\n    private String name;\r\n    private String description;\r\n    private Integer difficulty;\r\n\r\n    @JsonBackReference\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;direction_id&quot;)\r\n    private Directions direction;\r\n\r\n    @JsonManagedReference\r\n    @OneToMany(mappedBy = &quot;test&quot;, cascade = CascadeType.ALL)\r\n    private List&lt;TestBlock&gt; testBlock;\r\n\r\n    @Column(name = &quot;direction_id&quot;, insertable = false, updatable = false)\r\n    private Integer direction_id;\r\n\r\n    public Test() {\r\n\r\n    }\r\n\r\n    public Test(String name, String description, Integer difficulty, Integer direction_id) {\r\n        this.name = name;\r\n        this.description = description;\r\n        this.difficulty = difficulty;\r\n        this.direction_id = direction_id;\r\n    }\r\n\r\n    public Integer getId() {\r\n        return id;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    public String getDescription() {\r\n        return description;\r\n    }\r\n\r\n    public void setDescription(String description) {\r\n        this.description = description;\r\n    }\r\n\r\n    public Integer getDifficulty() {\r\n        return difficulty;\r\n    }\r\n\r\n    public void setDifficulty(Integer difficulty) {\r\n        this.difficulty = difficulty;\r\n    }\r\n\r\n    public Directions getDirection() {\r\n        return direction;\r\n    }\r\n\r\n    public void setDirection(Directions direction) {\r\n        this.direction = direction;\r\n    }\r\n\r\n    public Integer getDirection_id() {\r\n        return direction_id;\r\n    }\r\n\r\n    public void setDirection_id(Integer direction_id) {\r\n        this.direction_id = direction_id;\r\n    }\r\n}\r\n```\r\n\r\nTestBlock\r\n\r\n   \r\n```\r\nimport jakarta.persistence.*;\r\n\r\nimport com.fasterxml.jackson.annotation.JsonBackReference;\r\nimport com.fasterxml.jackson.annotation.JsonManagedReference;\r\n\r\n@Entity\r\npublic class TestBlock {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Integer id;\r\n\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;test_id&quot;)\r\n    @JsonBackReference\r\n    private Test test;\r\n\r\n    @ManyToOne\r\n    @JsonManagedReference\r\n    private Block block;\r\n\r\n    private Integer quantityQuestions;\r\n\r\n    public TestBlock() {\r\n    }\r\n\r\n    public TestBlock(Test test, Block block, Integer quantityQuestions) {\r\n        this.test = test;\r\n        this.block = block;\r\n        this.quantityQuestions = quantityQuestions;\r\n    }\r\n\r\n    public Integer getId() {\r\n        return id;\r\n    }\r\n\r\n    public Test getTest() {\r\n        return test;\r\n    }\r\n\r\n    public void setTest(Test test) {\r\n        this.test = test;\r\n    }\r\n\r\n    public Block getBlock() {\r\n        return block;\r\n    }\r\n\r\n    public void setBlock(Block block) {\r\n        this.block = block;\r\n    }\r\n\r\n    public Integer getQuantityQuestions() {\r\n        return quantityQuestions;\r\n    }\r\n\r\n    public void setQuantityQuestions(Integer quantityQuestions) {\r\n        this.quantityQuestions = quantityQuestions;\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\nBlock\r\n\r\n```\r\nimport jakarta.persistence.*;\r\nimport java.util.List;\r\n\r\nimport com.fasterxml.jackson.annotation.JsonBackReference;\r\nimport com.fasterxml.jackson.annotation.JsonManagedReference;\r\n\r\n@Entity\r\npublic class Block {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Integer id;\r\n\r\n    private String title;\r\n    private String description;\r\n\r\n    @JsonManagedReference\r\n    @OneToMany(mappedBy = &quot;block&quot;, cascade = CascadeType.ALL)\r\n    private List&lt;Question&gt; questions;\r\n\r\n    @JsonBackReference\r\n    @OneToMany(mappedBy = &quot;block&quot;, cascade = CascadeType.ALL)\r\n    private List&lt;TestBlock&gt; testBlock;\r\n\r\n    public Block() {\r\n    }\r\n\r\n    public Block(String title, String description) {\r\n        this.title = title;\r\n        this.description = description;\r\n    }\r\n\r\n    public Integer getId() {\r\n        return id;\r\n    }\r\n\r\n    public String getTitle() {\r\n        return title;\r\n    }\r\n\r\n    public void setTitle(String title) {\r\n        this.title = title;\r\n    }\r\n\r\n    public String getDescription() {\r\n        return description;\r\n    }\r\n\r\n    public void setDescription(String description) {\r\n        this.description = description;\r\n    }\r\n\r\n    public List&lt;Question&gt; getQuestions() {\r\n        return questions;\r\n    }\r\n\r\n    public void setQuestions(List&lt;Question&gt; questions) {\r\n        this.questions = questions;\r\n    }\r\n\r\n}\r\n```\r\nand my updateMethod for any case\r\n\r\n```\r\n    public Test updateTest(Integer id, Test updatedTest) {\r\n            Test currentTest = testRepository.findById(id).orElse(null);\r\n            if (currentTest == null) {\r\n                return null;\r\n            }\r\n    \r\n            currentTest.setName(updatedTest.getName());\r\n            currentTest.setDescription(updatedTest.getDescription());\r\n            currentTest.setDifficulty(updatedTest.getDifficulty());\r\n            currentTest.setDirection_id(updatedTest.getDirection_id());\r\n    \r\n            Optional&lt;Directions&gt; directionsOptional = directionsRepository.findById(updatedTest.getDirection_id());\r\n            if (directionsOptional.isPresent()) {\r\n                Directions direction = directionsOptional.get();\r\n                currentTest.setDirection(direction);\r\n            }\r\n    \r\n            testRepository.save(currentTest);\r\n            return currentTest;\r\n        }\r\n```\r\n\r\nRecently I added connection between Test and TestBlock to be able to get all the needed Blocks data from Test instead of using additional fetch for it.\r\n\r\nI saw similar problem while surfing the net but all I was able to found as a solution is annotation - @JsonIdentityInfo(generator=ObjectIdGenerators.PropertyGenerator.class, property=&quot;id&quot;) but it didn\\`t help me at all.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/UFV7b.png\r\n","title":"Saving with relation fails: Cannot handle managed/back reference","body":"<p>I have a Test which includes TestBook which includes Block. When I`m trying to update my Test Im receiving this error:</p>\n<pre><code>2023-07-20T17:58:19.021+02:00 DEBUG 88644 --- [nio-8082-exec-5] o.s.security.web.FilterChainProxy        : Secured PUT /update-test/1\n\n2023-07-20T17:58:19.069+02:00  WARN 88644 --- [nio-8082-exec-5] .c.j.MappingJackson2HttpMessageConverter : Failed to evaluate Jackson deserialization for type [[simple type, class myproject.model.Test]]: com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Cannot handle managed/back reference 'defaultReference': back reference type (`java.util.List&lt;myproject.model.TestBlock&gt;`) not compatible with managed type (myprojectngulata.model.TestBlock)\n\n2023-07-20T17:58:19.101+02:00  WARN 88644 --- [nio-8082-exec-5] .c.j.MappingJackson2HttpMessageConverter : Failed to evaluate Jackson deserialization for type [[simple type, class myproject.model.Test]]: com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Cannot handle managed/back reference 'defaultReference': back reference type (`java.util.List&lt;myproject.model.TestBlock&gt;`) not compatible with managed type (myproject.model.TestBlock)\n\n2023-07-20T17:58:19.106+02:00 TRACE 88644 --- [nio-8082-exec-5] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]\n\n2023-07-20T17:58:19.106+02:00  WARN 88644 --- [nio-8082-exec-5] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.web.HttpMediaTypeNotSupportedException: Content-Type 'application/json;charset=UTF-8' is not supported]\n\n2023-07-20T17:58:19.110+02:00 TRACE 88644 --- [nio-8082-exec-5] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@47aa7caa, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@ad79c3, org.springframework.security.web.context.SecurityContextHolderFilter@209137bb, org.springframework.security.web.header.HeaderWriterFilter@42023771, org.springframework.web.filter.CorsFilter@3bee9a82, org.springframework.security.web.csrf.CsrfFilter@50583645, org.springframework.security.web.authentication.logout.LogoutFilter@2e9f3a2f, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@7ef5fb0, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@403fb6f3, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3cafb7f5, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@8174188, org.springframework.security.web.session.SessionManagementFilter@53361e2c, org.springframework.security.web.access.ExceptionTranslationFilter@2a8c3c4a, org.springframework.security.web.access.intercept.AuthorizationFilter@8e673df]] (1/1)\n</code></pre>\n<p>This is my Models</p>\n<p>Test</p>\n<pre><code>import java.util.List;\n\nimport com.fasterxml.jackson.annotation.JsonBackReference;\nimport com.fasterxml.jackson.annotation.JsonManagedReference;\n\nimport jakarta.persistence.*;\n\n@Entity\npublic class Test {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Integer id;\n\n    private String name;\n    private String description;\n    private Integer difficulty;\n\n    @JsonBackReference\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;direction_id&quot;)\n    private Directions direction;\n\n    @JsonManagedReference\n    @OneToMany(mappedBy = &quot;test&quot;, cascade = CascadeType.ALL)\n    private List&lt;TestBlock&gt; testBlock;\n\n    @Column(name = &quot;direction_id&quot;, insertable = false, updatable = false)\n    private Integer direction_id;\n\n    public Test() {\n\n    }\n\n    public Test(String name, String description, Integer difficulty, Integer direction_id) {\n        this.name = name;\n        this.description = description;\n        this.difficulty = difficulty;\n        this.direction_id = direction_id;\n    }\n\n    public Integer getId() {\n        return id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getDescription() {\n        return description;\n    }\n\n    public void setDescription(String description) {\n        this.description = description;\n    }\n\n    public Integer getDifficulty() {\n        return difficulty;\n    }\n\n    public void setDifficulty(Integer difficulty) {\n        this.difficulty = difficulty;\n    }\n\n    public Directions getDirection() {\n        return direction;\n    }\n\n    public void setDirection(Directions direction) {\n        this.direction = direction;\n    }\n\n    public Integer getDirection_id() {\n        return direction_id;\n    }\n\n    public void setDirection_id(Integer direction_id) {\n        this.direction_id = direction_id;\n    }\n}\n</code></pre>\n<p>TestBlock</p>\n<pre><code>import jakarta.persistence.*;\n\nimport com.fasterxml.jackson.annotation.JsonBackReference;\nimport com.fasterxml.jackson.annotation.JsonManagedReference;\n\n@Entity\npublic class TestBlock {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Integer id;\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;test_id&quot;)\n    @JsonBackReference\n    private Test test;\n\n    @ManyToOne\n    @JsonManagedReference\n    private Block block;\n\n    private Integer quantityQuestions;\n\n    public TestBlock() {\n    }\n\n    public TestBlock(Test test, Block block, Integer quantityQuestions) {\n        this.test = test;\n        this.block = block;\n        this.quantityQuestions = quantityQuestions;\n    }\n\n    public Integer getId() {\n        return id;\n    }\n\n    public Test getTest() {\n        return test;\n    }\n\n    public void setTest(Test test) {\n        this.test = test;\n    }\n\n    public Block getBlock() {\n        return block;\n    }\n\n    public void setBlock(Block block) {\n        this.block = block;\n    }\n\n    public Integer getQuantityQuestions() {\n        return quantityQuestions;\n    }\n\n    public void setQuantityQuestions(Integer quantityQuestions) {\n        this.quantityQuestions = quantityQuestions;\n    }\n\n}\n\n</code></pre>\n<p>Block</p>\n<pre><code>import jakarta.persistence.*;\nimport java.util.List;\n\nimport com.fasterxml.jackson.annotation.JsonBackReference;\nimport com.fasterxml.jackson.annotation.JsonManagedReference;\n\n@Entity\npublic class Block {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Integer id;\n\n    private String title;\n    private String description;\n\n    @JsonManagedReference\n    @OneToMany(mappedBy = &quot;block&quot;, cascade = CascadeType.ALL)\n    private List&lt;Question&gt; questions;\n\n    @JsonBackReference\n    @OneToMany(mappedBy = &quot;block&quot;, cascade = CascadeType.ALL)\n    private List&lt;TestBlock&gt; testBlock;\n\n    public Block() {\n    }\n\n    public Block(String title, String description) {\n        this.title = title;\n        this.description = description;\n    }\n\n    public Integer getId() {\n        return id;\n    }\n\n    public String getTitle() {\n        return title;\n    }\n\n    public void setTitle(String title) {\n        this.title = title;\n    }\n\n    public String getDescription() {\n        return description;\n    }\n\n    public void setDescription(String description) {\n        this.description = description;\n    }\n\n    public List&lt;Question&gt; getQuestions() {\n        return questions;\n    }\n\n    public void setQuestions(List&lt;Question&gt; questions) {\n        this.questions = questions;\n    }\n\n}\n</code></pre>\n<p>and my updateMethod for any case</p>\n<pre><code>    public Test updateTest(Integer id, Test updatedTest) {\n            Test currentTest = testRepository.findById(id).orElse(null);\n            if (currentTest == null) {\n                return null;\n            }\n    \n            currentTest.setName(updatedTest.getName());\n            currentTest.setDescription(updatedTest.getDescription());\n            currentTest.setDifficulty(updatedTest.getDifficulty());\n            currentTest.setDirection_id(updatedTest.getDirection_id());\n    \n            Optional&lt;Directions&gt; directionsOptional = directionsRepository.findById(updatedTest.getDirection_id());\n            if (directionsOptional.isPresent()) {\n                Directions direction = directionsOptional.get();\n                currentTest.setDirection(direction);\n            }\n    \n            testRepository.save(currentTest);\n            return currentTest;\n        }\n</code></pre>\n<p>Recently I added connection between Test and TestBlock to be able to get all the needed Blocks data from Test instead of using additional fetch for it.</p>\n<p>I saw similar problem while surfing the net but all I was able to found as a solution is annotation - @JsonIdentityInfo(generator=ObjectIdGenerators.PropertyGenerator.class, property=&quot;id&quot;) but it didn`t help me at all.</p>\n"},{"tags":["java","hibernate","junit"],"answers":[{"tags":[],"owner":{"account_id":29050703,"reputation":59,"user_id":22253592,"display_name":"Vitalii Dokalenko"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689869005,"creation_date":1689869005,"answer_id":76731730,"question_id":76731536,"body_markdown":"Your test failed because you expect no exceptions, but one was thrown. Probably the `unique` constraint is set for the phone column.\r\nTry to use another method for the assertion, if you expect some exception (i.e. `assertThrows()`)","title":"Fail in JUnit Duplicate Test","body":"<p>Your test failed because you expect no exceptions, but one was thrown. Probably the <code>unique</code> constraint is set for the phone column.\nTry to use another method for the assertion, if you expect some exception (i.e. <code>assertThrows()</code>)</p>\n"},{"tags":[],"owner":{"account_id":6518557,"reputation":2810,"user_id":5043481,"display_name":"zforgo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689869006,"creation_date":1689869006,"answer_id":76731731,"question_id":76731536,"body_markdown":"Based on my assumtion you would like to prevent that application or users to save the same phone number multiple times. Because of that the phone field was marked as unique in the database DDL.\r\n\r\nIf I&#39;m right, and the phone number is unique in the database, then you cannot perists the same phone number value twice. Hibernate will throw the mentioned exception.\r\n\r\n```assertDoesNotThrow(() -&gt; candidateDAO.create(candidate));``` assumes the `create` method won&#39;t throw any exception, otherwise that assertion will fail.\r\n\r\nBecause that test case annotated with `@Oder(3)` I think one of previous test cases had already persisted that phone number.\r\n\r\nAccording to assertDoesNotThrow()&#39;s javadoc:\r\n\r\n&gt;Assert that execution of the supplied executable does **not** throw any kind of exception.\r\n\r\nSo JUnit works well. If you want to check that method will throw an exception, then use\r\n\r\n```java\r\nvar ex = Assertions.assertThrows(PersistenceException.class, () -&gt; candidateDAO.create(candidate));\r\n```","title":"Fail in JUnit Duplicate Test","body":"<p>Based on my assumtion you would like to prevent that application or users to save the same phone number multiple times. Because of that the phone field was marked as unique in the database DDL.</p>\n<p>If I'm right, and the phone number is unique in the database, then you cannot perists the same phone number value twice. Hibernate will throw the mentioned exception.</p>\n<p><code>assertDoesNotThrow(() -&gt; candidateDAO.create(candidate));</code> assumes the <code>create</code> method won't throw any exception, otherwise that assertion will fail.</p>\n<p>Because that test case annotated with <code>@Oder(3)</code> I think one of previous test cases had already persisted that phone number.</p>\n<p>According to assertDoesNotThrow()'s javadoc:</p>\n<blockquote>\n<p>Assert that execution of the supplied executable does <strong>not</strong> throw any kind of exception.</p>\n</blockquote>\n<p>So JUnit works well. If you want to check that method will throw an exception, then use</p>\n<pre class=\"lang-java prettyprint-override\"><code>var ex = Assertions.assertThrows(PersistenceException.class, () -&gt; candidateDAO.create(candidate));\n</code></pre>\n"}],"owner":{"account_id":20784598,"reputation":13,"user_id":15264132,"display_name":"Xjodia"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1689869006,"creation_date":1689867529,"question_id":76731536,"body_markdown":"I&#39;m learning about JUnit Test in Java, I&#39;m currently doing the duplicate phone number test when adding an object with a duplicate phone number to the database.\r\n\r\nFrom what I learn, I will use assertDoesNotThrow() in this part, but when I run the test, it gives an error that the phone number is duplicated in the database and causes the test to fail.\r\n\r\n```\r\n@Test\r\n@Order(3)\r\nvoid createCandidate_DuplicatePhone_Test() {\r\n        Candidate candidate = Candidate.builder()\r\n                .fullName(&quot;Name&quot;)\r\n                .dateOfBirth(LocalDate.of(2001, 10, 1))\r\n                .gender(Gender.MALE)\r\n                .graduationYear(LocalDate.of(2023, 10, 10))\r\n                .phone(&quot;999999999&quot;)\r\n                .email(&quot;somemail@gmail.com&quot;)\r\n                .skill(&quot;java&quot;)\r\n                .foreignLanguage(&quot;English&quot;)\r\n                .level(6)\r\n                .cv(&quot;Good&quot;)\r\n                .allocationStatus(1)\r\n                .remark(&quot;Not Bad&quot;)\r\n                .build();\r\n  assertDoesNotThrow(() -&gt; candidateDAO.create(candidate));\r\n}\r\n```\r\n\r\n&gt;ERROR: Duplicate entry &#39;0941091132&#39; for key &#39;candidate.UK_9i5yt1gvm0chg5e10qkns7tll&#39;org.opentest4j. AssertionFailedError: Unexpected exception thrown: jakarta.persistence.PersistenceException: Converting `org.hibernate.exception.ConstraintViolationException` to JPA `PersistenceException` : could not execute statement\r\n","title":"Fail in JUnit Duplicate Test","body":"<p>I'm learning about JUnit Test in Java, I'm currently doing the duplicate phone number test when adding an object with a duplicate phone number to the database.</p>\n<p>From what I learn, I will use assertDoesNotThrow() in this part, but when I run the test, it gives an error that the phone number is duplicated in the database and causes the test to fail.</p>\n<pre><code>@Test\n@Order(3)\nvoid createCandidate_DuplicatePhone_Test() {\n        Candidate candidate = Candidate.builder()\n                .fullName(&quot;Name&quot;)\n                .dateOfBirth(LocalDate.of(2001, 10, 1))\n                .gender(Gender.MALE)\n                .graduationYear(LocalDate.of(2023, 10, 10))\n                .phone(&quot;999999999&quot;)\n                .email(&quot;somemail@gmail.com&quot;)\n                .skill(&quot;java&quot;)\n                .foreignLanguage(&quot;English&quot;)\n                .level(6)\n                .cv(&quot;Good&quot;)\n                .allocationStatus(1)\n                .remark(&quot;Not Bad&quot;)\n                .build();\n  assertDoesNotThrow(() -&gt; candidateDAO.create(candidate));\n}\n</code></pre>\n<blockquote>\n<p>ERROR: Duplicate entry '0941091132' for key 'candidate.UK_9i5yt1gvm0chg5e10qkns7tll'org.opentest4j. AssertionFailedError: Unexpected exception thrown: jakarta.persistence.PersistenceException: Converting <code>org.hibernate.exception.ConstraintViolationException</code> to JPA <code>PersistenceException</code> : could not execute statement</p>\n</blockquote>\n"},{"tags":["java","exception","throws"],"answers":[{"tags":[],"owner":{"account_id":461096,"reputation":59403,"user_id":862594,"accept_rate":83,"display_name":"nickb"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1689868974,"creation_date":1689868974,"answer_id":76731725,"question_id":76731708,"body_markdown":"You&#39;re not printing the message. You&#39;re just calling the getter (which is useless and why your IDE is indicating &quot;result of Throwable.getMessage is ignored&quot;).\r\n\r\n    public static void printErrorMessage(Exception e) {\r\n        e.getMessage();\r\n    }\r\n\r\nShould be:\r\n\r\n    public static void printErrorMessage(Exception e) {\r\n        System.out.println(e.getMessage());\r\n    }","title":"Why is result of throwable get.Message ignored in my exception?","body":"<p>You're not printing the message. You're just calling the getter (which is useless and why your IDE is indicating &quot;result of Throwable.getMessage is ignored&quot;).</p>\n<pre><code>public static void printErrorMessage(Exception e) {\n    e.getMessage();\n}\n</code></pre>\n<p>Should be:</p>\n<pre><code>public static void printErrorMessage(Exception e) {\n    System.out.println(e.getMessage());\n}\n</code></pre>\n"}],"owner":{"account_id":23589962,"reputation":1,"user_id":17627898,"display_name":"kinkkelaade"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689868974,"creation_date":1689868831,"question_id":76731708,"body_markdown":"I made my own excpetions and I have to print the error message from the exception with a method that uses getMessage(). e.getMessage() is highlighted and it says result of Throwable.getMessage is ignored. For example if I input a number below 5 it prints SmallException caught but doesn&#39;t print Number was below 5.\r\n\r\n\r\n```\r\n        try {\r\n            testValue(testNum);\r\n            System.out.println(&quot;Number was between 5-10.&quot;);\r\n        } catch(SmallException e) {\r\n            System.out.println(&quot;SmallException caught!&quot;);\r\n            printErrorMessage(e);\r\n        } catch(BigException e) {\r\n            System.out.println(&quot;BigException caught!&quot;);\r\n            printErrorMessage(e);\r\n        }\r\n    }\r\n    public static void printErrorMessage(Exception e) {\r\n        e.getMessage();\r\n    }\r\n\r\n    public static void testValue(int num) throws SmallException, BigException {\r\n        if(num &lt; 5) {\r\n            throw new SmallException(&quot;Number was below 5.&quot;);\r\n        } else if(num &gt; 10) {\r\n            throw new BigException(&quot;Number was over 10.&quot;);\r\n        }\r\n    }\r\n}\r\n\r\nclass SmallException extends Exception {\r\n    SmallException() {\r\n        super();\r\n    }\r\n\r\n    SmallException(String message) {\r\n        super(message);\r\n    }\r\n\r\n}\r\n\r\nclass BigException extends Exception {\r\n    BigException() {\r\n        super();\r\n    }\r\n\r\n    BigException(String message) {\r\n        super(message);\r\n    }\r\n}\r\n```\r\n\r\n\r\nI can&#39;t think of anything to try :(","title":"Why is result of throwable get.Message ignored in my exception?","body":"<p>I made my own excpetions and I have to print the error message from the exception with a method that uses getMessage(). e.getMessage() is highlighted and it says result of Throwable.getMessage is ignored. For example if I input a number below 5 it prints SmallException caught but doesn't print Number was below 5.</p>\n<pre><code>        try {\n            testValue(testNum);\n            System.out.println(&quot;Number was between 5-10.&quot;);\n        } catch(SmallException e) {\n            System.out.println(&quot;SmallException caught!&quot;);\n            printErrorMessage(e);\n        } catch(BigException e) {\n            System.out.println(&quot;BigException caught!&quot;);\n            printErrorMessage(e);\n        }\n    }\n    public static void printErrorMessage(Exception e) {\n        e.getMessage();\n    }\n\n    public static void testValue(int num) throws SmallException, BigException {\n        if(num &lt; 5) {\n            throw new SmallException(&quot;Number was below 5.&quot;);\n        } else if(num &gt; 10) {\n            throw new BigException(&quot;Number was over 10.&quot;);\n        }\n    }\n}\n\nclass SmallException extends Exception {\n    SmallException() {\n        super();\n    }\n\n    SmallException(String message) {\n        super(message);\n    }\n\n}\n\nclass BigException extends Exception {\n    BigException() {\n        super();\n    }\n\n    BigException(String message) {\n        super(message);\n    }\n}\n</code></pre>\n<p>I can't think of anything to try :(</p>\n"},{"tags":["java","spring-boot","spring-boot-actuator"],"comments":[{"owner":{"account_id":540951,"reputation":14600,"user_id":909317,"accept_rate":84,"display_name":"Sunny"},"score":0,"creation_date":1671713255,"post_id":74859740,"comment_id":132159915,"body_markdown":"add `server.forward-headers-strategy: NATIVE` in your application config file","body":"add <code>server.forward-headers-strategy: NATIVE</code> in your application config file"},{"owner":{"account_id":171189,"reputation":38109,"user_id":398441,"accept_rate":87,"display_name":"Johan"},"score":0,"creation_date":1671718231,"post_id":74859740,"comment_id":132161499,"body_markdown":"Doesn&#39;t work. I&#39;ve also tried `management.server.forward-headers-strategy: NATIVE`","body":"Doesn&#39;t work. I&#39;ve also tried <code>management.server.forward-headers-strategy: NATIVE</code>"},{"owner":{"account_id":15487418,"reputation":1884,"user_id":11173046,"display_name":"Not a JD"},"score":1,"creation_date":1671831060,"post_id":74859740,"comment_id":132186496,"body_markdown":"If you start with a fresh initializr project and add web and actuator starters, the `FilterRegistrationBean&lt;ForwardedHeaderFilter&gt;` you have above _does_ appear to change the prefix for me locally. Is it possible you have another filter in your chain that is undoing what the `ForwardedHeaderFilter` is doing? By unwrapping the decorated request object?","body":"If you start with a fresh initializr project and add web and actuator starters, the <code>FilterRegistrationBean&lt;ForwardedHeaderFilter&gt;</code> you have above <i>does</i> appear to change the prefix for me locally. Is it possible you have another filter in your chain that is undoing what the <code>ForwardedHeaderFilter</code> is doing? By unwrapping the decorated request object?"},{"owner":{"account_id":20732441,"reputation":1553,"user_id":15224052,"display_name":"Oliver"},"score":2,"creation_date":1672000894,"post_id":74859740,"comment_id":132206546,"body_markdown":"What if you use Spring&#39;s forwarding strategy with `server.forward-headers-strategy=FRAMEWORK`?","body":"What if you use Spring&#39;s forwarding strategy with <code>server.forward-headers-strategy=FRAMEWORK</code>?"}],"answers":[{"tags":[],"owner":{"account_id":1601824,"reputation":383,"user_id":1482710,"accept_rate":60,"display_name":"martinnemec3"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1689868926,"creation_date":1689868926,"answer_id":76731718,"question_id":74859740,"body_markdown":"I managed to workaround this problem with the following code (worked for me with Spring Boot 3.1.0):\r\n\r\n    @Bean\r\n    @Primary\r\n    public static ManagementContextFactory myServletWebChildContextFactory() {\r\n        return new ManagementContextFactory(WebApplicationType.SERVLET, ServletWebServerFactory.class,\r\n                ServletWebServerFactoryAutoConfiguration.class, MyForwardedHeaderFilterAutoConfiguration.class);\r\n    }\r\n    \r\n    static class MyForwardedHeaderFilterAutoConfiguration {\r\n        @Bean\r\n        public FilterRegistrationBean&lt;ForwardedHeaderFilter&gt; myForwardedHeaderFilter() {\r\n            ForwardedHeaderFilter filter = new ForwardedHeaderFilter();\r\n            FilterRegistrationBean&lt;ForwardedHeaderFilter&gt; registration = new FilterRegistrationBean&lt;&gt;(filter);\r\n            registration.setDispatcherTypes(DispatcherType.REQUEST, DispatcherType.ASYNC, DispatcherType.ERROR);\r\n            registration.setOrder(Ordered.HIGHEST_PRECEDENCE);\r\n            return registration;\r\n        }\r\n    }\r\n\r\nThe @Primary annotation should ensure that the ManagementContextFactory above is used by Spring. Additionally we define own auto-configuration class defining FilterRegistrationBean for the ForwardedHeaderFilter (as it is missing in the management context and the one from parent context is not registered). The auto-configuration class is then passed as the last parameter to the ManagementContextFactory constructor in the bean factory method.","title":"Make Spring Boot 3 Actuator aware of X-Forwarded-Prefix header?","body":"<p>I managed to workaround this problem with the following code (worked for me with Spring Boot 3.1.0):</p>\n<pre><code>@Bean\n@Primary\npublic static ManagementContextFactory myServletWebChildContextFactory() {\n    return new ManagementContextFactory(WebApplicationType.SERVLET, ServletWebServerFactory.class,\n            ServletWebServerFactoryAutoConfiguration.class, MyForwardedHeaderFilterAutoConfiguration.class);\n}\n\nstatic class MyForwardedHeaderFilterAutoConfiguration {\n    @Bean\n    public FilterRegistrationBean&lt;ForwardedHeaderFilter&gt; myForwardedHeaderFilter() {\n        ForwardedHeaderFilter filter = new ForwardedHeaderFilter();\n        FilterRegistrationBean&lt;ForwardedHeaderFilter&gt; registration = new FilterRegistrationBean&lt;&gt;(filter);\n        registration.setDispatcherTypes(DispatcherType.REQUEST, DispatcherType.ASYNC, DispatcherType.ERROR);\n        registration.setOrder(Ordered.HIGHEST_PRECEDENCE);\n        return registration;\n    }\n}\n</code></pre>\n<p>The @Primary annotation should ensure that the ManagementContextFactory above is used by Spring. Additionally we define own auto-configuration class defining FilterRegistrationBean for the ForwardedHeaderFilter (as it is missing in the management context and the one from parent context is not registered). The auto-configuration class is then passed as the last parameter to the ManagementContextFactory constructor in the bean factory method.</p>\n"}],"owner":{"account_id":171189,"reputation":38109,"user_id":398441,"accept_rate":87,"display_name":"Johan"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":737,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76731718,"answer_count":1,"score":2,"last_activity_date":1689868926,"creation_date":1671521369,"question_id":74859740,"body_markdown":"This question is similar to https://stackoverflow.com/questions/72462994/make-spring-boot-actuator-aware-of-x-forwarded-prefix-header, but for Spring Boot 3.\r\n\r\nWe&#39;re using Spring Boot 3 with `spring-boot-starter-actuator` that we&#39;re exposing on port 8081 under the `/management` context path. The proxy sets several `X-Forwarded-*` headers, including the `X-Forwarded-Prefix` header that is set to `/service`. But when navigating to `https://www.company.com/management` this is what is returned:\r\n\r\n```\r\n{\r\n    &quot;_links&quot;: {\r\n        &quot;self&quot;: {\r\n            &quot;href&quot;: &quot;https://www.company.com/management&quot;,\r\n            &quot;templated&quot;: false\r\n        },\r\n        &quot;beans&quot;: {\r\n            &quot;href&quot;: &quot;https://www.company.com/management/beans&quot;,\r\n            &quot;templated&quot;: false\r\n        },\r\n        &quot;caches-cache&quot;: {\r\n            &quot;href&quot;: &quot;https://www.company.com/management/caches/{cache}&quot;,\r\n            &quot;templated&quot;: true\r\n        },\r\n        &quot;caches&quot;: {\r\n            &quot;href&quot;: &quot;https://www.company.com/management/caches&quot;,\r\n            &quot;templated&quot;: false\r\n        },\r\n        &quot;health&quot;: {\r\n            &quot;href&quot;: &quot;https://www.company.com/management/health&quot;,\r\n            &quot;templated&quot;: false\r\n        },\r\n        &quot;health-path&quot;: {\r\n            &quot;href&quot;: &quot;https://www.company.com/management/health/{*path}&quot;,\r\n            &quot;templated&quot;: true\r\n        },\r\n        &quot;info&quot;: {\r\n            &quot;href&quot;: &quot;https://www.company.com/management/info&quot;,\r\n            &quot;templated&quot;: false\r\n        },\r\n        &quot;conditions&quot;: {\r\n            &quot;href&quot;: &quot;https://www.company.com/management/conditions&quot;,\r\n            &quot;templated&quot;: false\r\n        },\r\n        &quot;configprops&quot;: {\r\n            &quot;href&quot;: &quot;https://www.company.com/management/configprops&quot;,\r\n            &quot;templated&quot;: false\r\n        },\r\n        &quot;configprops-prefix&quot;: {\r\n            &quot;href&quot;: &quot;https://www.company.com/management/configprops/{prefix}&quot;,\r\n            &quot;templated&quot;: true\r\n        },\r\n        &quot;env&quot;: {\r\n            &quot;href&quot;: &quot;https://www.company.com/management/env&quot;,\r\n            &quot;templated&quot;: false\r\n        },\r\n        &quot;env-toMatch&quot;: {\r\n            &quot;href&quot;: &quot;https://www.company.com/management/env/{toMatch}&quot;,\r\n            &quot;templated&quot;: true\r\n        },\r\n        &quot;integrationgraph&quot;: {\r\n            &quot;href&quot;: &quot;https://www.company.com/management/integrationgraph&quot;,\r\n            &quot;templated&quot;: false\r\n        },\r\n        &quot;loggers&quot;: {\r\n            &quot;href&quot;: &quot;https://www.company.com/management/loggers&quot;,\r\n            &quot;templated&quot;: false\r\n        },\r\n        &quot;loggers-name&quot;: {\r\n            &quot;href&quot;: &quot;https://www.company.com/management/loggers/{name}&quot;,\r\n            &quot;templated&quot;: true\r\n        },\r\n        &quot;heapdump&quot;: {\r\n            &quot;href&quot;: &quot;https://www.company.com/management/heapdump&quot;,\r\n            &quot;templated&quot;: false\r\n        },\r\n        &quot;threaddump&quot;: {\r\n            &quot;href&quot;: &quot;https://www.company.com/management/threaddump&quot;,\r\n            &quot;templated&quot;: false\r\n        },\r\n        &quot;metrics-requiredMetricName&quot;: {\r\n            &quot;href&quot;: &quot;https://www.company.com/management/metrics/{requiredMetricName}&quot;,\r\n            &quot;templated&quot;: true\r\n        },\r\n        &quot;metrics&quot;: {\r\n            &quot;href&quot;: &quot;https://www.company.com/management/metrics&quot;,\r\n            &quot;templated&quot;: false\r\n        },\r\n        &quot;scheduledtasks&quot;: {\r\n            &quot;href&quot;: &quot;https://www.company.com/management/scheduledtasks&quot;,\r\n            &quot;templated&quot;: false\r\n        },\r\n        &quot;sessions-sessionId&quot;: {\r\n            &quot;href&quot;: &quot;https://www.company.com/management/sessions/{sessionId}&quot;,\r\n            &quot;templated&quot;: true\r\n        },\r\n        &quot;sessions&quot;: {\r\n            &quot;href&quot;: &quot;https://www.company.com/management/sessions&quot;,\r\n            &quot;templated&quot;: false\r\n        },\r\n        &quot;mappings&quot;: {\r\n            &quot;href&quot;: &quot;https://www.company.com/management/mappings&quot;,\r\n            &quot;templated&quot;: false\r\n        },\r\n        &quot;refresh&quot;: {\r\n            &quot;href&quot;: &quot;https://www.company.com/management/refresh&quot;,\r\n            &quot;templated&quot;: false\r\n        },\r\n        &quot;features&quot;: {\r\n            &quot;href&quot;: &quot;https://www.company.com/management/features&quot;,\r\n            &quot;templated&quot;: false\r\n        },\r\n        &quot;traces&quot;: {\r\n            &quot;href&quot;: &quot;https://www.company.com/management/traces&quot;,\r\n            &quot;templated&quot;: false\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nI want the href&#39;s in the response to start with `https://www.company.com/service` due to the supplied `X-Forwarded-Prefix` header. It _won&#39;t_ work by simply adding a `ForwardedHeaderFilter`:\r\n\r\n```\r\n@Bean\r\npublic FilterRegistrationBean&lt;ForwardedHeaderFilter&gt; forwardedHeaderFilterFilterRegistrationBean() {\r\n    ForwardedHeaderFilter forwardedHeaderFilter = new ForwardedHeaderFilter();\r\n    FilterRegistrationBean&lt;ForwardedHeaderFilter&gt; bean = new FilterRegistrationBean&lt;&gt;(forwardedHeaderFilter);\r\n    bean.setOrder(Ordered.HIGHEST_PRECEDENCE);\r\n    return bean;\r\n}\r\n```\r\n\r\nI added an [issue](https://github.com/spring-projects/spring-boot/issues/32475) at Spring Boot GitHub, and they acknowledged that the behavior is a bit confusing (since it works in webflux). However, in Spring Boot 2.7, this workaround could be applied to make it work:\r\n\r\n```java\r\n@Component\r\n@ConditionalOnManagementPort(ManagementPortType.DIFFERENT)\r\npublic class ManagementContextFactoryBeanPostProcessor\r\n        implements BeanPostProcessor {\r\n\r\n    @Override\r\n    public Object postProcessBeforeInitialization(Object bean, String beanName)\r\n            throws BeansException {\r\n        if (bean instanceof ManagementContextFactory managementContextFactory) {\r\n            return (ManagementContextFactory) (parent, configurationClasses) -&gt; {\r\n                var context = managementContextFactory.createManagementContext(parent, configurationClasses);\r\n                if (context instanceof GenericWebApplicationContext genericWebApplicationContext) {\r\n                    genericWebApplicationContext.registerBean(ForwardedHeaderFilterRegistrationBean.class);\r\n                }\r\n                return context;\r\n            };\r\n        }\r\n        return BeanPostProcessor.super.postProcessBeforeInitialization(bean, beanName);\r\n    }\r\n\r\n    public static class ForwardedHeaderFilterRegistrationBean\r\n            extends FilterRegistrationBean&lt;ForwardedHeaderFilter&gt; {\r\n\r\n        public ForwardedHeaderFilterRegistrationBean() {\r\n            setFilter(new ForwardedHeaderFilter());\r\n            setOrder(Ordered.HIGHEST_PRECEDENCE);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n```\r\n\r\nBut this no longer works in Spring Boot 3. The `ManagementContextFactory` is no longer an interface but rather a final class, and the signature of the `createManagementContext` method has changed.\r\n\r\nSo my question is, how can I make actuator take the `X-Forwarded-Prefix` header into account when generating the links to the endpoints behind a proxy in Spring Boot 3?\r\n\r\n","title":"Make Spring Boot 3 Actuator aware of X-Forwarded-Prefix header?","body":"<p>This question is similar to <a href=\"https://stackoverflow.com/questions/72462994/make-spring-boot-actuator-aware-of-x-forwarded-prefix-header\">Make Spring Boot 2.7.x Actuator aware of X-Forwarded-Prefix header?</a>, but for Spring Boot 3.</p>\n<p>We're using Spring Boot 3 with <code>spring-boot-starter-actuator</code> that we're exposing on port 8081 under the <code>/management</code> context path. The proxy sets several <code>X-Forwarded-*</code> headers, including the <code>X-Forwarded-Prefix</code> header that is set to <code>/service</code>. But when navigating to <code>https://www.company.com/management</code> this is what is returned:</p>\n<pre><code>{\n    &quot;_links&quot;: {\n        &quot;self&quot;: {\n            &quot;href&quot;: &quot;https://www.company.com/management&quot;,\n            &quot;templated&quot;: false\n        },\n        &quot;beans&quot;: {\n            &quot;href&quot;: &quot;https://www.company.com/management/beans&quot;,\n            &quot;templated&quot;: false\n        },\n        &quot;caches-cache&quot;: {\n            &quot;href&quot;: &quot;https://www.company.com/management/caches/{cache}&quot;,\n            &quot;templated&quot;: true\n        },\n        &quot;caches&quot;: {\n            &quot;href&quot;: &quot;https://www.company.com/management/caches&quot;,\n            &quot;templated&quot;: false\n        },\n        &quot;health&quot;: {\n            &quot;href&quot;: &quot;https://www.company.com/management/health&quot;,\n            &quot;templated&quot;: false\n        },\n        &quot;health-path&quot;: {\n            &quot;href&quot;: &quot;https://www.company.com/management/health/{*path}&quot;,\n            &quot;templated&quot;: true\n        },\n        &quot;info&quot;: {\n            &quot;href&quot;: &quot;https://www.company.com/management/info&quot;,\n            &quot;templated&quot;: false\n        },\n        &quot;conditions&quot;: {\n            &quot;href&quot;: &quot;https://www.company.com/management/conditions&quot;,\n            &quot;templated&quot;: false\n        },\n        &quot;configprops&quot;: {\n            &quot;href&quot;: &quot;https://www.company.com/management/configprops&quot;,\n            &quot;templated&quot;: false\n        },\n        &quot;configprops-prefix&quot;: {\n            &quot;href&quot;: &quot;https://www.company.com/management/configprops/{prefix}&quot;,\n            &quot;templated&quot;: true\n        },\n        &quot;env&quot;: {\n            &quot;href&quot;: &quot;https://www.company.com/management/env&quot;,\n            &quot;templated&quot;: false\n        },\n        &quot;env-toMatch&quot;: {\n            &quot;href&quot;: &quot;https://www.company.com/management/env/{toMatch}&quot;,\n            &quot;templated&quot;: true\n        },\n        &quot;integrationgraph&quot;: {\n            &quot;href&quot;: &quot;https://www.company.com/management/integrationgraph&quot;,\n            &quot;templated&quot;: false\n        },\n        &quot;loggers&quot;: {\n            &quot;href&quot;: &quot;https://www.company.com/management/loggers&quot;,\n            &quot;templated&quot;: false\n        },\n        &quot;loggers-name&quot;: {\n            &quot;href&quot;: &quot;https://www.company.com/management/loggers/{name}&quot;,\n            &quot;templated&quot;: true\n        },\n        &quot;heapdump&quot;: {\n            &quot;href&quot;: &quot;https://www.company.com/management/heapdump&quot;,\n            &quot;templated&quot;: false\n        },\n        &quot;threaddump&quot;: {\n            &quot;href&quot;: &quot;https://www.company.com/management/threaddump&quot;,\n            &quot;templated&quot;: false\n        },\n        &quot;metrics-requiredMetricName&quot;: {\n            &quot;href&quot;: &quot;https://www.company.com/management/metrics/{requiredMetricName}&quot;,\n            &quot;templated&quot;: true\n        },\n        &quot;metrics&quot;: {\n            &quot;href&quot;: &quot;https://www.company.com/management/metrics&quot;,\n            &quot;templated&quot;: false\n        },\n        &quot;scheduledtasks&quot;: {\n            &quot;href&quot;: &quot;https://www.company.com/management/scheduledtasks&quot;,\n            &quot;templated&quot;: false\n        },\n        &quot;sessions-sessionId&quot;: {\n            &quot;href&quot;: &quot;https://www.company.com/management/sessions/{sessionId}&quot;,\n            &quot;templated&quot;: true\n        },\n        &quot;sessions&quot;: {\n            &quot;href&quot;: &quot;https://www.company.com/management/sessions&quot;,\n            &quot;templated&quot;: false\n        },\n        &quot;mappings&quot;: {\n            &quot;href&quot;: &quot;https://www.company.com/management/mappings&quot;,\n            &quot;templated&quot;: false\n        },\n        &quot;refresh&quot;: {\n            &quot;href&quot;: &quot;https://www.company.com/management/refresh&quot;,\n            &quot;templated&quot;: false\n        },\n        &quot;features&quot;: {\n            &quot;href&quot;: &quot;https://www.company.com/management/features&quot;,\n            &quot;templated&quot;: false\n        },\n        &quot;traces&quot;: {\n            &quot;href&quot;: &quot;https://www.company.com/management/traces&quot;,\n            &quot;templated&quot;: false\n        }\n    }\n}\n</code></pre>\n<p>I want the href's in the response to start with <code>https://www.company.com/service</code> due to the supplied <code>X-Forwarded-Prefix</code> header. It <em>won't</em> work by simply adding a <code>ForwardedHeaderFilter</code>:</p>\n<pre><code>@Bean\npublic FilterRegistrationBean&lt;ForwardedHeaderFilter&gt; forwardedHeaderFilterFilterRegistrationBean() {\n    ForwardedHeaderFilter forwardedHeaderFilter = new ForwardedHeaderFilter();\n    FilterRegistrationBean&lt;ForwardedHeaderFilter&gt; bean = new FilterRegistrationBean&lt;&gt;(forwardedHeaderFilter);\n    bean.setOrder(Ordered.HIGHEST_PRECEDENCE);\n    return bean;\n}\n</code></pre>\n<p>I added an <a href=\"https://github.com/spring-projects/spring-boot/issues/32475\" rel=\"nofollow noreferrer\">issue</a> at Spring Boot GitHub, and they acknowledged that the behavior is a bit confusing (since it works in webflux). However, in Spring Boot 2.7, this workaround could be applied to make it work:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\n@ConditionalOnManagementPort(ManagementPortType.DIFFERENT)\npublic class ManagementContextFactoryBeanPostProcessor\n        implements BeanPostProcessor {\n\n    @Override\n    public Object postProcessBeforeInitialization(Object bean, String beanName)\n            throws BeansException {\n        if (bean instanceof ManagementContextFactory managementContextFactory) {\n            return (ManagementContextFactory) (parent, configurationClasses) -&gt; {\n                var context = managementContextFactory.createManagementContext(parent, configurationClasses);\n                if (context instanceof GenericWebApplicationContext genericWebApplicationContext) {\n                    genericWebApplicationContext.registerBean(ForwardedHeaderFilterRegistrationBean.class);\n                }\n                return context;\n            };\n        }\n        return BeanPostProcessor.super.postProcessBeforeInitialization(bean, beanName);\n    }\n\n    public static class ForwardedHeaderFilterRegistrationBean\n            extends FilterRegistrationBean&lt;ForwardedHeaderFilter&gt; {\n\n        public ForwardedHeaderFilterRegistrationBean() {\n            setFilter(new ForwardedHeaderFilter());\n            setOrder(Ordered.HIGHEST_PRECEDENCE);\n        }\n\n    }\n\n}\n</code></pre>\n<p>But this no longer works in Spring Boot 3. The <code>ManagementContextFactory</code> is no longer an interface but rather a final class, and the signature of the <code>createManagementContext</code> method has changed.</p>\n<p>So my question is, how can I make actuator take the <code>X-Forwarded-Prefix</code> header into account when generating the links to the endpoints behind a proxy in Spring Boot 3?</p>\n"},{"tags":["java","casting","jframe","jcomponent","jcheckbox"],"comments":[{"owner":{"account_id":7362914,"reputation":74,"user_id":5605615,"display_name":"mgillett"},"score":0,"creation_date":1689869899,"post_id":76731710,"comment_id":135277808,"body_markdown":"I compiled and ran your program and it worked for me. Maybe the error message will give us a clue.","body":"I compiled and ran your program and it worked for me. Maybe the error message will give us a clue."},{"owner":{"account_id":28686808,"reputation":1,"user_id":21966921,"display_name":"Ebrima mbye"},"score":0,"creation_date":1689968107,"post_id":76731710,"comment_id":135292792,"body_markdown":"Well, The error message was saying that I could not use the *.add(Component)* for the type JCheckBox. However,  after restarting the IDE, the program worked as expected.","body":"Well, The error message was saying that I could not use the <i>.add(Component)</i> for the type JCheckBox. However,  after restarting the IDE, the program worked as expected."}],"owner":{"account_id":28686808,"reputation":1,"user_id":21966921,"display_name":"Ebrima mbye"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689868834,"creation_date":1689868834,"question_id":76731710,"body_markdown":"I am new to programming, and I am wondering why I am getting an error when I try to add the checkBox oject to the JFrame object in the program:\r\n\r\n    import javax.swing.*;  \r\n\r\n    public class MyCheckBoxExample   \r\n    {  \r\n        public static void main(String[] args)  \r\n       {  \r\n            // Create a JFrame  \r\n            JFrame frame = new JFrame(&quot;JCheckBox Example&quot;);  \r\n            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);  \r\n            frame.setSize(300, 200);  \r\n            frame.setLayout(new java.awt.FlowLayout());  \r\n\r\n            // Create a JCheckBox  \r\n            JCheckBox checkBox = new JCheckBox(&quot;I am a checkbox&quot;);  \r\n\r\n            // Add the JCheckBox to the JFrame  \r\n            frame.add(checkBox); // error on &#39;add&#39;  \r\n\r\n            // Make the JFrame visible  \r\n            frame.setVisible(true);  \r\n            }  \r\n     }  \r\n\r\n\r\nI tried casting (Component) to the checkBox object, but the program still has a red underline under &#39;add&#39; . ","title":"can a JCheckbox be added to a JFrame?","body":"<p>I am new to programming, and I am wondering why I am getting an error when I try to add the checkBox oject to the JFrame object in the program:</p>\n<pre><code>import javax.swing.*;  \n\npublic class MyCheckBoxExample   \n{  \n    public static void main(String[] args)  \n   {  \n        // Create a JFrame  \n        JFrame frame = new JFrame(&quot;JCheckBox Example&quot;);  \n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);  \n        frame.setSize(300, 200);  \n        frame.setLayout(new java.awt.FlowLayout());  \n\n        // Create a JCheckBox  \n        JCheckBox checkBox = new JCheckBox(&quot;I am a checkbox&quot;);  \n\n        // Add the JCheckBox to the JFrame  \n        frame.add(checkBox); // error on 'add'  \n\n        // Make the JFrame visible  \n        frame.setVisible(true);  \n        }  \n }  \n</code></pre>\n<p>I tried casting (Component) to the checkBox object, but the program still has a red underline under 'add' .</p>\n"},{"tags":["java","spring-boot","autowired"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1689844361,"post_id":76728214,"comment_id":135271895,"body_markdown":"You have to tell Spring what to inject. It will provide an un`Qualified` `RestTemplate` by default, but if you want a separate instance, you have to tell it what to create.","body":"You have to tell Spring what to inject. It will provide an un<code>Qualified</code> <code>RestTemplate</code> by default, but if you want a separate instance, you have to tell it what to create."},{"owner":{"account_id":2031236,"reputation":984,"user_id":1814879,"accept_rate":72,"display_name":"user1814879"},"score":0,"creation_date":1689845017,"post_id":76728214,"comment_id":135272013,"body_markdown":"I edited my by adding my RestTemplate bean","body":"I edited my by adding my RestTemplate bean"},{"owner":{"account_id":9680259,"reputation":366,"user_id":7182233,"display_name":"Aleks D"},"score":1,"creation_date":1689845529,"post_id":76728214,"comment_id":135272108,"body_markdown":"Why your constructor name is AccessTokenServiceImpl and service name is TokenServiceImpl?","body":"Why your constructor name is AccessTokenServiceImpl and service name is TokenServiceImpl?"},{"owner":{"account_id":2031236,"reputation":984,"user_id":1814879,"accept_rate":72,"display_name":"user1814879"},"score":0,"creation_date":1689845770,"post_id":76728214,"comment_id":135272169,"body_markdown":"It is a mistake .. I updated the code","body":"It is a mistake .. I updated the code"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1689846818,"post_id":76728214,"comment_id":135272399,"body_markdown":"have you checked your logs? did you try putting a breakpoint in your constructor?","body":"have you checked your logs? did you try putting a breakpoint in your constructor?"}],"answers":[{"comments":[{"owner":{"account_id":2031236,"reputation":984,"user_id":1814879,"accept_rate":72,"display_name":"user1814879"},"score":0,"creation_date":1689846790,"post_id":76728585,"comment_id":135272391,"body_markdown":"Thank, as you said, I prefere to use application as entry point. The strange thing is if I remove the @Qualifier it works I mean this code works     `@Autowired\n    public AccessTokenServiceImpl(Settings settings, RestTemplate restTemplate) {\n        this.settings = settings;\n        this.restTemplate = restTemplate;\n    }`","body":"Thank, as you said, I prefere to use application as entry point. The strange thing is if I remove the @Qualifier it works I mean this code works     <code>@Autowired     public AccessTokenServiceImpl(Settings settings, RestTemplate restTemplate) {         this.settings = settings;         this.restTemplate = restTemplate;     }</code>"},{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":1,"creation_date":1689852503,"post_id":76728585,"comment_id":135273449,"body_markdown":"So removing the qualifier on one bean makes another bean autowired? Does it work if you annotate `@Component`/`@Service` on your application?","body":"So removing the qualifier on one bean makes another bean autowired? Does it work if you annotate <code>@Component</code>/<code>@Service</code> on your application?"},{"owner":{"account_id":2031236,"reputation":984,"user_id":1814879,"accept_rate":72,"display_name":"user1814879"},"score":0,"creation_date":1689854172,"post_id":76728585,"comment_id":135273818,"body_markdown":"I don&#39;t try to add @Service in the Application and it is better to not do that I think (like you said) .. What I am doing now is the code below and my tokenServie is setted BUT RestTemplate rstProxy is null ..","body":"I don&#39;t try to add @Service in the Application and it is better to not do that I think (like you said) .. What I am doing now is the code below and my tokenServie is setted BUT RestTemplate rstProxy is null .."},{"owner":{"account_id":2031236,"reputation":984,"user_id":1814879,"accept_rate":72,"display_name":"user1814879"},"score":0,"creation_date":1689854224,"post_id":76728585,"comment_id":135273829,"body_markdown":"&#180;private RestTemplate rstProxy;\n    @Autowired\n    public tokenServiceImpl(Settings sttings) {\n        this.settings = settings;\n    }&#180;  .. How to match this restTemplate with the Bean defined in Aplicatioo","body":"&#180;private RestTemplate rstProxy;     @Autowired     public tokenServiceImpl(Settings sttings) {         this.settings = settings;     }&#180;  .. How to match this restTemplate with the Bean defined in Aplicatioo"}],"tags":[],"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689846057,"creation_date":1689846057,"answer_id":76728585,"question_id":76728214,"body_markdown":"`@SpringBootApplication` itself is not a `@Component` and no dependencies will be injected into your Application class (it&#39;s simply not a bean). You need to explicitly tell Spring that the Application class itself is a bean too:\r\n\r\n```\r\n@Service // &lt;-- register as service in application context\r\n@SpringBootApplication\r\n@EnableAsync\r\n@EnableScheduling\r\npublic class Application extends SpringBootServletInitializer {\r\n\r\n    @Autowired\r\n    private TokenService tokenService;\r\n\r\n    public static void main(final String[] args) {\r\n        SpringApplication.run(Application.class, args);\r\n    }\r\n}\r\n```\r\n\r\nBut I&#39;d recommend using your application only as entry point to start the Spring application, but not take part in it itself.","title":"@Autowired instance of Service class is null in the application.java","body":"<p><code>@SpringBootApplication</code> itself is not a <code>@Component</code> and no dependencies will be injected into your Application class (it's simply not a bean). You need to explicitly tell Spring that the Application class itself is a bean too:</p>\n<pre><code>@Service // &lt;-- register as service in application context\n@SpringBootApplication\n@EnableAsync\n@EnableScheduling\npublic class Application extends SpringBootServletInitializer {\n\n    @Autowired\n    private TokenService tokenService;\n\n    public static void main(final String[] args) {\n        SpringApplication.run(Application.class, args);\n    }\n}\n</code></pre>\n<p>But I'd recommend using your application only as entry point to start the Spring application, but not take part in it itself.</p>\n"},{"comments":[{"owner":{"account_id":2031236,"reputation":984,"user_id":1814879,"accept_rate":72,"display_name":"user1814879"},"score":0,"creation_date":1689924052,"post_id":76731045,"comment_id":135284639,"body_markdown":"I finally use the first option and it works .;; (you are rigth the issues was the order) ... Tnks","body":"I finally use the first option and it works .;; (you are rigth the issues was the order) ... Tnks"}],"tags":[],"owner":{"account_id":13147502,"reputation":336,"user_id":9497126,"display_name":"acakojic"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689864139,"creation_date":1689864139,"answer_id":76731045,"question_id":76728214,"body_markdown":"First: Spring beans are instantiated in no guaranteed order, unless you specify it\r\n```\r\n@Autowired\r\n@Lazy //this will load Bean when it is requested\r\nprivate TokenService tokenService;\r\n```\r\n\r\nIf above not work then continue and try to refactor your TokenServiceImpl to accept setter method after constructor:\r\n```\r\n    private RestTemplate restTemplate; \r\n\r\n    public TokenServiceImpl(Settings settings) {\r\n        this.settings= settings;\r\n    }\r\n\r\n    @Autowired\r\n    public void setRestTemplate(@Qualifier(&quot;rstProxy&quot;) RestTemplate restTemplate) {\r\n        this.restTemplate = restTemplate;\r\n    }\r\n```\r\n\r\nNow TokenService is created without waiting for the RestTemplate. \r\nThen, when the RestTemplate is created, It can inject it into the TokenService via setter method  that we created.","title":"@Autowired instance of Service class is null in the application.java","body":"<p>First: Spring beans are instantiated in no guaranteed order, unless you specify it</p>\n<pre><code>@Autowired\n@Lazy //this will load Bean when it is requested\nprivate TokenService tokenService;\n</code></pre>\n<p>If above not work then continue and try to refactor your TokenServiceImpl to accept setter method after constructor:</p>\n<pre><code>    private RestTemplate restTemplate; \n\n    public TokenServiceImpl(Settings settings) {\n        this.settings= settings;\n    }\n\n    @Autowired\n    public void setRestTemplate(@Qualifier(&quot;rstProxy&quot;) RestTemplate restTemplate) {\n        this.restTemplate = restTemplate;\n    }\n</code></pre>\n<p>Now TokenService is created without waiting for the RestTemplate.\nThen, when the RestTemplate is created, It can inject it into the TokenService via setter method  that we created.</p>\n"},{"tags":[],"owner":{"account_id":13147502,"reputation":336,"user_id":9497126,"display_name":"acakojic"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689868712,"creation_date":1689868712,"answer_id":76731686,"question_id":76728214,"body_markdown":"Another answer, second one:\r\nWhen you add @Lazy annotation to the RestTemplate bean in the constructor of TokenServiceImpl, it tells to Container to create this bean only when it is first time called, not at the application startup.\r\n```\r\n  @Autowired\r\n  public TokenServiceImpl(Settings settings, @Lazy @Qualifier(&quot;rstProxy&quot;) RestTemplate restTemplate) {\r\n    this.settings= settings;\r\n    this.restTemplate = restTemplate;\r\n  }\r\n```\r\nThis above probably make your tokenServiceImpl bean to not be a null.","title":"@Autowired instance of Service class is null in the application.java","body":"<p>Another answer, second one:\nWhen you add @Lazy annotation to the RestTemplate bean in the constructor of TokenServiceImpl, it tells to Container to create this bean only when it is first time called, not at the application startup.</p>\n<pre><code>  @Autowired\n  public TokenServiceImpl(Settings settings, @Lazy @Qualifier(&quot;rstProxy&quot;) RestTemplate restTemplate) {\n    this.settings= settings;\n    this.restTemplate = restTemplate;\n  }\n</code></pre>\n<p>This above probably make your tokenServiceImpl bean to not be a null.</p>\n"}],"owner":{"account_id":2031236,"reputation":984,"user_id":1814879,"accept_rate":72,"display_name":"user1814879"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":93,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76731045,"answer_count":3,"score":0,"last_activity_date":1689868712,"creation_date":1689843320,"question_id":76728214,"body_markdown":"I am a little confused,why @Autowired instance of the Service class is null\r\n\r\n   \r\n\r\n   \r\n\r\n  \r\n\r\n    @Service\r\n            public class TokenServiceImpl implements TokenService{\r\n            \r\n            \tprivate final Settings settings;\r\n            \r\n                private final RestTemplate restTemplate;\r\n            \r\n                @Autowired\r\n                public TokenServiceImpl(Settings settings, @Qualifier(&quot;rstProxy&quot;) RestTemplate restTemplate) {\r\n                    this.settings= settings;\r\n                    this.restTemplate = restTemplate;\r\n                }\r\n            \t//...\r\n            \t\r\n            }\r\n\r\nApplication.java\r\n\r\n            @SpringBootApplication\r\n            @EnableAsync\r\n            @EnableScheduling\r\n            public class Application extends SpringBootServletInitializer {\r\n            \r\n            \t@Autowired\r\n            \tprivate TokenService tokenService; // return null\r\n            \r\n                //.......\r\n    \r\n    @Bean(&quot;rstProxy&quot;)\r\n    \tpublic RestTemplate restTemplateWithProxy() {\r\n    \t\tfinal List&lt;HttpMessageConverter&lt;?&gt;&gt; messageConverters = new ArrayList&lt;&gt;();\r\n    \t\tmessageConverters.add(new ByteArrayHttpMessageConverter());\r\n    \t\tmessageConverters.add(new StringHttpMessageConverter());\r\n    \t\tmessageConverters.add(new ResourceHttpMessageConverter());\r\n    \t\tmessageConverters.add(new Jaxb2RootElementHttpMessageConverter());\r\n    \t\tmessageConverters.add(new MappingJackson2HttpMessageConverter());\r\n    \r\n    \t\tfinal RestTemplate restTemplate = new RestTemplate();\r\n    \r\n    \t\tList&lt;ClientHttpRequestInterceptor&gt; interceptors = new ArrayList&lt;&gt;();\r\n    \t\tinterceptors.add(new AuthorizationInterceptor(tokenService));\r\n    \t\trestTemplate.setInterceptors(interceptors);\r\n    \t\trestTemplate.getMessageConverters().addAll(messageConverters);\r\n    \r\n    \t\trestTemplate.setRequestFactory(factory);\r\n    \t\treturn restTemplate;\r\n    \t}\r\n            }\r\n\r\nWhy the TokenService  returns null ? \r\nBut If I remove the `@Qualifier(&quot;rstProxy&quot;)` from my constructor, it works. Do you have a solution ? I need this @qualifier","title":"@Autowired instance of Service class is null in the application.java","body":"<p>I am a little confused,why @Autowired instance of the Service class is null</p>\n<pre><code>@Service\n        public class TokenServiceImpl implements TokenService{\n        \n            private final Settings settings;\n        \n            private final RestTemplate restTemplate;\n        \n            @Autowired\n            public TokenServiceImpl(Settings settings, @Qualifier(&quot;rstProxy&quot;) RestTemplate restTemplate) {\n                this.settings= settings;\n                this.restTemplate = restTemplate;\n            }\n            //...\n            \n        }\n</code></pre>\n<p>Application.java</p>\n<pre><code>        @SpringBootApplication\n        @EnableAsync\n        @EnableScheduling\n        public class Application extends SpringBootServletInitializer {\n        \n            @Autowired\n            private TokenService tokenService; // return null\n        \n            //.......\n\n@Bean(&quot;rstProxy&quot;)\n    public RestTemplate restTemplateWithProxy() {\n        final List&lt;HttpMessageConverter&lt;?&gt;&gt; messageConverters = new ArrayList&lt;&gt;();\n        messageConverters.add(new ByteArrayHttpMessageConverter());\n        messageConverters.add(new StringHttpMessageConverter());\n        messageConverters.add(new ResourceHttpMessageConverter());\n        messageConverters.add(new Jaxb2RootElementHttpMessageConverter());\n        messageConverters.add(new MappingJackson2HttpMessageConverter());\n\n        final RestTemplate restTemplate = new RestTemplate();\n\n        List&lt;ClientHttpRequestInterceptor&gt; interceptors = new ArrayList&lt;&gt;();\n        interceptors.add(new AuthorizationInterceptor(tokenService));\n        restTemplate.setInterceptors(interceptors);\n        restTemplate.getMessageConverters().addAll(messageConverters);\n\n        restTemplate.setRequestFactory(factory);\n        return restTemplate;\n    }\n        }\n</code></pre>\n<p>Why the TokenService  returns null ?\nBut If I remove the <code>@Qualifier(&quot;rstProxy&quot;)</code> from my constructor, it works. Do you have a solution ? I need this @qualifier</p>\n"},{"tags":["java","xml-deserialization","jackson-dataformat-xml"],"answers":[{"comments":[{"owner":{"account_id":18189372,"reputation":45,"user_id":13235486,"display_name":"Charles"},"score":0,"creation_date":1689845501,"post_id":76728137,"comment_id":135272098,"body_markdown":"did it work for you? Why am I getting the error: ```Exception in thread &quot;main&quot; com.fasterxml.jackson.databind.exc.InvalidTypeIdException: Could not resolve type id &#39;persons&#39; as subtype of `xmlmanager.jackson.Query`: no such class found```","body":"did it work for you? Why am I getting the error: <code>Exception in thread &quot;main&quot; com.fasterxml.jackson.databind.exc.InvalidTypeIdException: Could not resolve type id &#39;persons&#39; as subtype of `xmlmanager.jackson.Query`: no such class found</code>"},{"owner":{"account_id":2449170,"reputation":1315,"user_id":2135838,"display_name":"Sascha"},"score":0,"creation_date":1689852074,"post_id":76728137,"comment_id":135273362,"body_markdown":"I had to change the `use` in the `JsonTypeInfo` to `NAME` and add annotations to the subclasses. Also you have to make the classes static when they are nested. But when trying the code I ran into a problem when Jackson tried to instantiate the `Person` class. I&#39;m currently out of ideas as to why that happens.","body":"I had to change the <code>use</code> in the <code>JsonTypeInfo</code> to <code>NAME</code> and add annotations to the subclasses. Also you have to make the classes static when they are nested. But when trying the code I ran into a problem when Jackson tried to instantiate the <code>Person</code> class. I&#39;m currently out of ideas as to why that happens."},{"owner":{"account_id":18189372,"reputation":45,"user_id":13235486,"display_name":"Charles"},"score":0,"creation_date":1689868116,"post_id":76728137,"comment_id":135277410,"body_markdown":"your solution works even without the `JsonTypeInfo` and `JsonSubTypes` annotations and without using the `IRow` interface. Place the definitive classes in the answer. A thousand thanks @Sascha","body":"your solution works even without the <code>JsonTypeInfo</code> and <code>JsonSubTypes</code> annotations and without using the <code>IRow</code> interface. Place the definitive classes in the answer. A thousand thanks @Sascha"},{"owner":{"account_id":2449170,"reputation":1315,"user_id":2135838,"display_name":"Sascha"},"score":0,"creation_date":1689949144,"post_id":76728137,"comment_id":135289481,"body_markdown":"Probably the the Jackson deserialization got confused by the empty `interface`.","body":"Probably the the Jackson deserialization got confused by the empty <code>interface</code>."}],"tags":[],"owner":{"account_id":2449170,"reputation":1315,"user_id":2135838,"display_name":"Sascha"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689852020,"creation_date":1689842691,"answer_id":76728137,"question_id":76723880,"body_markdown":"You will probably need an abstract `Query` class and a subclass each for `Person` and `User` list. Then Jackson can identify your `Query` subclass by the XML attribute.\r\n\r\n```\r\n@JsonTypeInfo(use = JsonTypeInfo.Id.NAME\r\n\t, include = JsonTypeInfo.As.PROPERTY\r\n\t, property = &quot;queryname&quot;\r\n\t)\r\n@JsonSubTypes({\r\n\t@JsonSubTypes.Type(name = &quot;users&quot;, value = UserQuery.class),\r\n\t@JsonSubTypes.Type(name = &quot;persons&quot;, value = PersonQuery.class)\r\n})\r\npublic abstract class Query&lt;I extends IRow&gt; {\r\n    @JacksonXmlProperty(isAttribute = true)\r\n    private String queryname;\r\n    @JacksonXmlElementWrapper(useWrapping = false)\r\n    private List&lt;I&gt; row;\r\n    \r\n    public String getQueryname() {return queryname;}\r\n    public List&lt;I&gt; getRow() {return row;}\r\n}\r\n\r\n@JsonTypeName(&quot;users&quot;)\r\npublic class UserQuery extends Query&lt;User&gt; {}\r\n\r\n@JsonTypeName(&quot;persons&quot;)\r\npublic class PersonQuery extends Query&lt;Person&gt;{}\r\n\r\n```","title":"Java - Jackson XML Deserializing by Interface/Abstract class","body":"<p>You will probably need an abstract <code>Query</code> class and a subclass each for <code>Person</code> and <code>User</code> list. Then Jackson can identify your <code>Query</code> subclass by the XML attribute.</p>\n<pre><code>@JsonTypeInfo(use = JsonTypeInfo.Id.NAME\n    , include = JsonTypeInfo.As.PROPERTY\n    , property = &quot;queryname&quot;\n    )\n@JsonSubTypes({\n    @JsonSubTypes.Type(name = &quot;users&quot;, value = UserQuery.class),\n    @JsonSubTypes.Type(name = &quot;persons&quot;, value = PersonQuery.class)\n})\npublic abstract class Query&lt;I extends IRow&gt; {\n    @JacksonXmlProperty(isAttribute = true)\n    private String queryname;\n    @JacksonXmlElementWrapper(useWrapping = false)\n    private List&lt;I&gt; row;\n    \n    public String getQueryname() {return queryname;}\n    public List&lt;I&gt; getRow() {return row;}\n}\n\n@JsonTypeName(&quot;users&quot;)\npublic class UserQuery extends Query&lt;User&gt; {}\n\n@JsonTypeName(&quot;persons&quot;)\npublic class PersonQuery extends Query&lt;Person&gt;{}\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18189372,"reputation":45,"user_id":13235486,"display_name":"Charles"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1689868216,"creation_date":1689868216,"answer_id":76731620,"question_id":76723880,"body_markdown":"The Sascha&#39;s solution works even without the `JsonTypeInfo` and `JsonSubTypes` annotations and without using the `IRow` interface:\r\n```code-java\r\nimport java.util.List;\r\nimport com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlElementWrapper;\r\nimport com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlProperty;\r\n\r\npublic abstract class AbstractQuery&lt;I&gt; {\r\n\t@JacksonXmlProperty(isAttribute = true)\r\n\tprivate String queryname;\r\n\t@JacksonXmlElementWrapper(useWrapping = false)\r\n\tprivate List&lt;I&gt; row;\r\n    \r\n\tpublic String getQueryname() {return queryname;}\r\n\tpublic List&lt;I&gt; getRow() {return row;}\r\n\r\n\t@Override\r\n    public String toString() {\r\n        return &quot;query [queryname=&quot; + getQueryname() + &quot;, row=&quot; + getRow() + &quot;]&quot;; \r\n    }\r\n}\r\n```\r\n```code-java\r\npublic class Person {\r\n\tpublic static class Query extends AbstractQuery&lt;Person&gt;{}\r\n\t\r\n\tprivate String name;\r\n\tprivate String userid;\r\n\t\r\n\tpublic String getName() {return name;}\r\n\tpublic String getUserid() {return userid;}\r\n\t\r\n\t@Override\r\n    public String toString() {\r\n        return &quot;person [name=&quot; + getName() + &quot;, userid=&quot; + getUserid() + &quot;]&quot;; \r\n    }\r\n}\r\n```\r\n```code-java\r\nimport com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlProperty;\r\n\r\npublic class User {\r\n\tpublic static class Query extends AbstractQuery&lt;User&gt; {}\r\n\t\r\n\tprivate String id;\r\n\t@JacksonXmlProperty(localName = &quot;username&quot;)\r\n\tprivate String username;\r\n    \r\n\tpublic String getId() {return id;}\r\n    public String getUserName() {return username;}\r\n    \r\n    @Override\r\n    public String toString() {\r\n        return &quot;user [id=&quot; + getId() + &quot;, username=&quot; + getUserName() + &quot;]&quot;; \r\n    }\r\n}\r\n```\r\n```code-java\r\nimport com.fasterxml.jackson.core.JsonProcessingException;\r\nimport com.fasterxml.jackson.databind.JsonMappingException;\r\nimport com.fasterxml.jackson.dataformat.xml.XmlMapper;\r\n\r\npublic class Main {\r\n\tpublic static void main(String[] args) throws JsonMappingException, JsonProcessingException {\r\n\t\tXmlMapper xmlMapper = new XmlMapper();\r\n        String sXmlPersons = &quot;&lt;?xml version=\\&quot;1.0\\&quot; encoding=\\&quot;ISO-8859-1\\&quot; ?&gt;\\r\\n&quot;\r\n        \t\t+ &quot;&lt;query queryname=\\&quot;persons\\&quot;&gt;\\r\\n&quot;\r\n        \t\t+ &quot;    &lt;row&gt;\\r\\n&quot;\r\n        \t\t+ &quot;        &lt;name&gt;charles&lt;/name&gt;\\r\\n&quot;\r\n        \t\t+ &quot;        &lt;userid&gt;1&lt;/userid&gt;\\r\\n&quot;\r\n        \t\t+ &quot;    &lt;/row&gt;\\r\\n&quot;\r\n        \t\t+ &quot;    &lt;row&gt;\\r\\n&quot;\r\n        \t\t+ &quot;        &lt;name&gt;arthur&lt;/name&gt;\\r\\n&quot;\r\n        \t\t+ &quot;        &lt;userid&gt;2&lt;/userid&gt;\\r\\n&quot;\r\n        \t\t+ &quot;    &lt;/row&gt;\\r\\n&quot;\r\n        \t\t+ &quot;&lt;/query&gt;&quot;;\r\n        Person.Query oPersonQuery = xmlMapper.readValue(sXmlPersons,Person.Query.class);\r\n        System.out.println(oPersonQuery);\r\n        \r\n        String sXmlUsers = &quot;&lt;?xml version=\\&quot;1.0\\&quot; encoding=\\&quot;ISO-8859-1\\&quot; ?&gt;\\r\\n&quot;\r\n        \t\t+ &quot;&lt;query queryname=\\&quot;users\\&quot;&gt;\\r\\n&quot;\r\n        \t\t+ &quot;    &lt;row&gt;\\r\\n&quot;\r\n        \t\t+ &quot;        &lt;id&gt;1&lt;/id&gt;\\r\\n&quot;\r\n        \t\t+ &quot;        &lt;username&gt;charles&lt;/username&gt;\\r\\n&quot;\r\n        \t\t+ &quot;    &lt;/row&gt;\\r\\n&quot;\r\n        \t\t+ &quot;    &lt;row&gt;\\r\\n&quot;\r\n        \t\t+ &quot;        &lt;id&gt;2&lt;/id&gt;\\r\\n&quot;\r\n        \t\t+ &quot;        &lt;username&gt;arthur&lt;/username&gt;\\r\\n&quot;\r\n        \t\t+ &quot;    &lt;/row&gt;\\r\\n&quot;\r\n        \t\t+ &quot;&lt;/query&gt;&quot;;\r\n        User.Query oUserQuery = xmlMapper.readValue(sXmlUsers,User.Query.class);\r\n\t\tSystem.out.println(oUserQuery);\r\n\t}\r\n}\r\n```","title":"Java - Jackson XML Deserializing by Interface/Abstract class","body":"<p>The Sascha's solution works even without the <code>JsonTypeInfo</code> and <code>JsonSubTypes</code> annotations and without using the <code>IRow</code> interface:</p>\n<pre><code>import java.util.List;\nimport com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlElementWrapper;\nimport com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlProperty;\n\npublic abstract class AbstractQuery&lt;I&gt; {\n    @JacksonXmlProperty(isAttribute = true)\n    private String queryname;\n    @JacksonXmlElementWrapper(useWrapping = false)\n    private List&lt;I&gt; row;\n    \n    public String getQueryname() {return queryname;}\n    public List&lt;I&gt; getRow() {return row;}\n\n    @Override\n    public String toString() {\n        return &quot;query [queryname=&quot; + getQueryname() + &quot;, row=&quot; + getRow() + &quot;]&quot;; \n    }\n}\n</code></pre>\n<pre><code>public class Person {\n    public static class Query extends AbstractQuery&lt;Person&gt;{}\n    \n    private String name;\n    private String userid;\n    \n    public String getName() {return name;}\n    public String getUserid() {return userid;}\n    \n    @Override\n    public String toString() {\n        return &quot;person [name=&quot; + getName() + &quot;, userid=&quot; + getUserid() + &quot;]&quot;; \n    }\n}\n</code></pre>\n<pre><code>import com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlProperty;\n\npublic class User {\n    public static class Query extends AbstractQuery&lt;User&gt; {}\n    \n    private String id;\n    @JacksonXmlProperty(localName = &quot;username&quot;)\n    private String username;\n    \n    public String getId() {return id;}\n    public String getUserName() {return username;}\n    \n    @Override\n    public String toString() {\n        return &quot;user [id=&quot; + getId() + &quot;, username=&quot; + getUserName() + &quot;]&quot;; \n    }\n}\n</code></pre>\n<pre><code>import com.fasterxml.jackson.core.JsonProcessingException;\nimport com.fasterxml.jackson.databind.JsonMappingException;\nimport com.fasterxml.jackson.dataformat.xml.XmlMapper;\n\npublic class Main {\n    public static void main(String[] args) throws JsonMappingException, JsonProcessingException {\n        XmlMapper xmlMapper = new XmlMapper();\n        String sXmlPersons = &quot;&lt;?xml version=\\&quot;1.0\\&quot; encoding=\\&quot;ISO-8859-1\\&quot; ?&gt;\\r\\n&quot;\n                + &quot;&lt;query queryname=\\&quot;persons\\&quot;&gt;\\r\\n&quot;\n                + &quot;    &lt;row&gt;\\r\\n&quot;\n                + &quot;        &lt;name&gt;charles&lt;/name&gt;\\r\\n&quot;\n                + &quot;        &lt;userid&gt;1&lt;/userid&gt;\\r\\n&quot;\n                + &quot;    &lt;/row&gt;\\r\\n&quot;\n                + &quot;    &lt;row&gt;\\r\\n&quot;\n                + &quot;        &lt;name&gt;arthur&lt;/name&gt;\\r\\n&quot;\n                + &quot;        &lt;userid&gt;2&lt;/userid&gt;\\r\\n&quot;\n                + &quot;    &lt;/row&gt;\\r\\n&quot;\n                + &quot;&lt;/query&gt;&quot;;\n        Person.Query oPersonQuery = xmlMapper.readValue(sXmlPersons,Person.Query.class);\n        System.out.println(oPersonQuery);\n        \n        String sXmlUsers = &quot;&lt;?xml version=\\&quot;1.0\\&quot; encoding=\\&quot;ISO-8859-1\\&quot; ?&gt;\\r\\n&quot;\n                + &quot;&lt;query queryname=\\&quot;users\\&quot;&gt;\\r\\n&quot;\n                + &quot;    &lt;row&gt;\\r\\n&quot;\n                + &quot;        &lt;id&gt;1&lt;/id&gt;\\r\\n&quot;\n                + &quot;        &lt;username&gt;charles&lt;/username&gt;\\r\\n&quot;\n                + &quot;    &lt;/row&gt;\\r\\n&quot;\n                + &quot;    &lt;row&gt;\\r\\n&quot;\n                + &quot;        &lt;id&gt;2&lt;/id&gt;\\r\\n&quot;\n                + &quot;        &lt;username&gt;arthur&lt;/username&gt;\\r\\n&quot;\n                + &quot;    &lt;/row&gt;\\r\\n&quot;\n                + &quot;&lt;/query&gt;&quot;;\n        User.Query oUserQuery = xmlMapper.readValue(sXmlUsers,User.Query.class);\n        System.out.println(oUserQuery);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":18189372,"reputation":45,"user_id":13235486,"display_name":"Charles"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":131,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76731620,"answer_count":2,"score":1,"last_activity_date":1689868216,"creation_date":1689787974,"question_id":76723880,"body_markdown":"I have these 2 XML&#39;s that I&#39;m trying to deserialize with `jackson-dataformat-xml`:\r\n```lang-xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\r\n    &lt;artifactId&gt;jackson-dataformat-xml&lt;/artifactId&gt;\r\n    &lt;version&gt;2.13.3&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\nThese are the 2 XML files:\r\n```lang-xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot; ?&gt;\r\n&lt;query queryname=&quot;persons&quot;&gt;\r\n    &lt;row&gt;\r\n        &lt;name&gt;charles&lt;/name&gt;\r\n        &lt;userid&gt;1&lt;/userid&gt;\r\n    &lt;/row&gt;\r\n    &lt;row&gt;\r\n        &lt;name&gt;arthur&lt;/name&gt;\r\n        &lt;userid&gt;2&lt;/userid&gt;\r\n    &lt;/row&gt;\r\n&lt;/query&gt;\r\n```\r\n```lang-xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot; ?&gt;\r\n&lt;query queryname=&quot;users&quot;&gt;\r\n    &lt;row&gt;\r\n        &lt;id&gt;1&lt;/id&gt;\r\n        &lt;username&gt;charles&lt;/username&gt;\r\n    &lt;/row&gt;\r\n    &lt;row&gt;\r\n        &lt;id&gt;2&lt;/id&gt;\r\n        &lt;username&gt;arthur&lt;/username&gt;\r\n    &lt;/row&gt;\r\n&lt;/query&gt;\r\n```\r\nThe 2 XMLs display the results of 2 different queries and are differentiated by the `queryname` attribute of the `query` element and the `row` element contains different information.\r\nI&#39;m trying to deserialize the 2 XMLs with a single Query class like this:\r\n```lang-java\r\npublic interface IRow {\r\n\t\r\n}\r\n```\r\n```lang-java\r\npublic class Person implements IRow {\r\n\tprivate String name;\r\n\tprivate String userid;\r\n\t\r\n\tpublic String getName() {return name;}\r\n\tpublic String getUserid() {return userid;}\r\n\t\r\n\t@Override\r\n    public String toString() {\r\n        return &quot;person [name=&quot; + getName() + &quot;, userid=&quot; + getUserid() + &quot;]&quot;; \r\n    }\r\n}\r\n```\r\n```lang-java\r\npublic class User extends IRow {\r\n\tprivate String id;\r\n\tprivate String username;\r\n    \r\n\tpublic String getId() {return id;}\r\n    public String getUserName() {return username;}\r\n    \r\n    @Override\r\n    public String toString() {\r\n        return &quot;user [id=&quot; + getId() + &quot;, username=&quot; + getUserName() + &quot;]&quot;; \r\n    }\r\n}\r\n```\r\n```lang-java\r\npublic class Query {\r\n\t@JacksonXmlProperty(isAttribute = true)\r\n\tprivate String queryname;\r\n\t@JacksonXmlElementWrapper(useWrapping = false)\r\n\tprivate List&lt;IRow&gt; row;\r\n    \r\n\tpublic String getQueryname() {return queryname;}\r\n\tpublic List&lt;IRow&gt; getRow() {return row;}\r\n\r\n\t@Override\r\n    public String toString() {\r\n        return &quot;query [queryname=&quot; + getQueryname() + &quot;, row=&quot; + getRow() + &quot;]&quot;; \r\n    }\r\n}\r\n```\r\n```lang-java\r\npublic class Main {\r\n\tpublic static void main(String[] args) throws JsonMappingException, JsonProcessingException {\r\n\t\tXmlMapper xmlMapper = new XmlMapper();\r\n        String sXml = &quot;&lt;?xml version=\\&quot;1.0\\&quot; encoding=\\&quot;ISO-8859-1\\&quot; ?&gt;\\r\\n&quot;\r\n        \t\t+ &quot;&lt;query queryname=\\&quot;persons\\&quot;&gt;\\r\\n&quot;\r\n        \t\t+ &quot;    &lt;row&gt;\\r\\n&quot;\r\n        \t\t+ &quot;        &lt;name&gt;charles&lt;/name&gt;\\r\\n&quot;\r\n        \t\t+ &quot;        &lt;userid&gt;1&lt;/userid&gt;\\r\\n&quot;\r\n        \t\t+ &quot;    &lt;/row&gt;\\r\\n&quot;\r\n        \t\t+ &quot;    &lt;row&gt;\\r\\n&quot;\r\n        \t\t+ &quot;        &lt;name&gt;arthur&lt;/name&gt;\\r\\n&quot;\r\n        \t\t+ &quot;        &lt;userid&gt;2&lt;/userid&gt;\\r\\n&quot;\r\n        \t\t+ &quot;    &lt;/row&gt;\\r\\n&quot;\r\n        \t\t+ &quot;&lt;/query&gt;&quot;;\r\n        Query oQuery = xmlMapper.readValue(sXml,Query.class);\r\n\t\tSystem.out.println(oQuery);\r\n\t}\r\n}\r\n```\r\nI get the error ```The main class, rightly, throws the Exception error in thread &quot;main&quot; com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Cannot construct instance of `xmlmanager.jackson.IRow` (no Creators, like default constructor, exist): abstract types either need to be mapped to concrete types, have custom deserializer, or contain additional type information```\r\n\r\nThe mistake is right, as in the `Query` class I defined the `row` property as a list of `IRows`.\r\nI would need something (I think annotations) that allow me to define and deserialize the row element with the class:\r\n\r\n - `Person` when attribute `queryname` = &quot;persons&quot;\r\n - `User` when attribute `queryname` = &quot;users&quot;\r\n\r\nHow could I do?\r\n\r\nThanks in advance","title":"Java - Jackson XML Deserializing by Interface/Abstract class","body":"<p>I have these 2 XML's that I'm trying to deserialize with <code>jackson-dataformat-xml</code>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-dataformat-xml&lt;/artifactId&gt;\n    &lt;version&gt;2.13.3&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>These are the 2 XML files:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot; ?&gt;\n&lt;query queryname=&quot;persons&quot;&gt;\n    &lt;row&gt;\n        &lt;name&gt;charles&lt;/name&gt;\n        &lt;userid&gt;1&lt;/userid&gt;\n    &lt;/row&gt;\n    &lt;row&gt;\n        &lt;name&gt;arthur&lt;/name&gt;\n        &lt;userid&gt;2&lt;/userid&gt;\n    &lt;/row&gt;\n&lt;/query&gt;\n</code></pre>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot; ?&gt;\n&lt;query queryname=&quot;users&quot;&gt;\n    &lt;row&gt;\n        &lt;id&gt;1&lt;/id&gt;\n        &lt;username&gt;charles&lt;/username&gt;\n    &lt;/row&gt;\n    &lt;row&gt;\n        &lt;id&gt;2&lt;/id&gt;\n        &lt;username&gt;arthur&lt;/username&gt;\n    &lt;/row&gt;\n&lt;/query&gt;\n</code></pre>\n<p>The 2 XMLs display the results of 2 different queries and are differentiated by the <code>queryname</code> attribute of the <code>query</code> element and the <code>row</code> element contains different information.\nI'm trying to deserialize the 2 XMLs with a single Query class like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface IRow {\n    \n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class Person implements IRow {\n    private String name;\n    private String userid;\n    \n    public String getName() {return name;}\n    public String getUserid() {return userid;}\n    \n    @Override\n    public String toString() {\n        return &quot;person [name=&quot; + getName() + &quot;, userid=&quot; + getUserid() + &quot;]&quot;; \n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class User extends IRow {\n    private String id;\n    private String username;\n    \n    public String getId() {return id;}\n    public String getUserName() {return username;}\n    \n    @Override\n    public String toString() {\n        return &quot;user [id=&quot; + getId() + &quot;, username=&quot; + getUserName() + &quot;]&quot;; \n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class Query {\n    @JacksonXmlProperty(isAttribute = true)\n    private String queryname;\n    @JacksonXmlElementWrapper(useWrapping = false)\n    private List&lt;IRow&gt; row;\n    \n    public String getQueryname() {return queryname;}\n    public List&lt;IRow&gt; getRow() {return row;}\n\n    @Override\n    public String toString() {\n        return &quot;query [queryname=&quot; + getQueryname() + &quot;, row=&quot; + getRow() + &quot;]&quot;; \n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class Main {\n    public static void main(String[] args) throws JsonMappingException, JsonProcessingException {\n        XmlMapper xmlMapper = new XmlMapper();\n        String sXml = &quot;&lt;?xml version=\\&quot;1.0\\&quot; encoding=\\&quot;ISO-8859-1\\&quot; ?&gt;\\r\\n&quot;\n                + &quot;&lt;query queryname=\\&quot;persons\\&quot;&gt;\\r\\n&quot;\n                + &quot;    &lt;row&gt;\\r\\n&quot;\n                + &quot;        &lt;name&gt;charles&lt;/name&gt;\\r\\n&quot;\n                + &quot;        &lt;userid&gt;1&lt;/userid&gt;\\r\\n&quot;\n                + &quot;    &lt;/row&gt;\\r\\n&quot;\n                + &quot;    &lt;row&gt;\\r\\n&quot;\n                + &quot;        &lt;name&gt;arthur&lt;/name&gt;\\r\\n&quot;\n                + &quot;        &lt;userid&gt;2&lt;/userid&gt;\\r\\n&quot;\n                + &quot;    &lt;/row&gt;\\r\\n&quot;\n                + &quot;&lt;/query&gt;&quot;;\n        Query oQuery = xmlMapper.readValue(sXml,Query.class);\n        System.out.println(oQuery);\n    }\n}\n</code></pre>\n<p>I get the error <code>The main class, rightly, throws the Exception error in thread &quot;main&quot; com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Cannot construct instance of `xmlmanager.jackson.IRow` (no Creators, like default constructor, exist): abstract types either need to be mapped to concrete types, have custom deserializer, or contain additional type information</code></p>\n<p>The mistake is right, as in the <code>Query</code> class I defined the <code>row</code> property as a list of <code>IRows</code>.\nI would need something (I think annotations) that allow me to define and deserialize the row element with the class:</p>\n<ul>\n<li><code>Person</code> when attribute <code>queryname</code> = &quot;persons&quot;</li>\n<li><code>User</code> when attribute <code>queryname</code> = &quot;users&quot;</li>\n</ul>\n<p>How could I do?</p>\n<p>Thanks in advance</p>\n"},{"tags":["java","if-statement"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":2,"creation_date":1689789241,"post_id":76723990,"comment_id":135264638,"body_markdown":"You&#39;re not adding or subtracting. Judging from what you do in your `else` it&#39;s actually easier to do `if (health &lt; 0) health = 0; if (health &gt; 100) health = 100; this.health = health;`","body":"You&#39;re not adding or subtracting. Judging from what you do in your <code>else</code> it&#39;s actually easier to do <code>if (health &lt; 0) health = 0; if (health &gt; 100) health = 100; this.health = health;</code>"},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1689821315,"post_id":76723990,"comment_id":135268676,"body_markdown":"Related: [*How to make a Bounded Integer?*](https://stackoverflow.com/q/50592310/642706)","body":"Related: <a href=\"https://stackoverflow.com/q/50592310/642706\"><i>How to make a Bounded Integer?</i></a>"}],"answers":[{"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1689795696,"post_id":76724447,"comment_id":135265903,"body_markdown":"What&#39;s with that code? It looks like an unholy mix of Java, C++ and Python","body":"What&#39;s with that code? It looks like an unholy mix of Java, C++ and Python"},{"owner":{"account_id":1507674,"reputation":5017,"user_id":1410669,"accept_rate":100,"display_name":"UpAndAdam"},"score":0,"creation_date":1689796545,"post_id":76724447,"comment_id":135266077,"body_markdown":"guilty as charged. i have cleaned it up","body":"guilty as charged. i have cleaned it up"}],"tags":[],"owner":{"account_id":1507674,"reputation":5017,"user_id":1410669,"accept_rate":100,"display_name":"UpAndAdam"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689868009,"creation_date":1689792965,"answer_id":76724447,"question_id":76723990,"body_markdown":"**UPDATED** to combine @oleg.cherdnik&#39;s idea into a full class\r\n\r\nrather than repeat this logic everywhere make a Ranged or Bounded integer class that enforces the behavior you desire.  Your class should have add set, subtract that enforce the value staying in the range.  It is up to you whether you want to throw exceptions and handle them or just proceed normally but I would suggest not throwing exceptions if this is not unexpected behavior.. \r\n\r\nfor bonus points you could templatize or make the min/max a parameter of the constructor instead of magic numbers like i&#39;m doing below\r\n\r\nExample:\r\n\r\n    public class BoundedInteger :\r\n    {\r\n        private int value_;\r\n    \r\n        public BoundedInteger(int v) {\r\n            set(v);\r\n        }\r\n\r\n        public int get() {\r\n            return value_;\r\n        }\r\n\r\n        public int set(int value) {\r\n            value_ = Math.max(0, Math.min(value, 100));\r\n        }\r\n\r\n        public void add(int i) {\r\n            value_ += i;\r\n            value_ = Math.min(value_, 100);\r\n        }\r\n\r\n        public void subtract(int i) {\r\n            value_ -= i;\r\n            value_ = Math.max(value_, 0);\r\n        }\r\n    }\r\n\r\n\r\nnow for each attribute of your class you use a `BoundedInteger` instead of an integer and all operations will function as desired. You can keep the code dry and not repeat it for each attribute","title":"Make integer stay always between 0 - 100","body":"<p><strong>UPDATED</strong> to combine @oleg.cherdnik's idea into a full class</p>\n<p>rather than repeat this logic everywhere make a Ranged or Bounded integer class that enforces the behavior you desire.  Your class should have add set, subtract that enforce the value staying in the range.  It is up to you whether you want to throw exceptions and handle them or just proceed normally but I would suggest not throwing exceptions if this is not unexpected behavior..</p>\n<p>for bonus points you could templatize or make the min/max a parameter of the constructor instead of magic numbers like i'm doing below</p>\n<p>Example:</p>\n<pre><code>public class BoundedInteger :\n{\n    private int value_;\n\n    public BoundedInteger(int v) {\n        set(v);\n    }\n\n    public int get() {\n        return value_;\n    }\n\n    public int set(int value) {\n        value_ = Math.max(0, Math.min(value, 100));\n    }\n\n    public void add(int i) {\n        value_ += i;\n        value_ = Math.min(value_, 100);\n    }\n\n    public void subtract(int i) {\n        value_ -= i;\n        value_ = Math.max(value_, 0);\n    }\n}\n</code></pre>\n<p>now for each attribute of your class you use a <code>BoundedInteger</code> instead of an integer and all operations will function as desired. You can keep the code dry and not repeat it for each attribute</p>\n"},{"tags":[],"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1689820603,"creation_date":1689796300,"answer_id":76724772,"question_id":76723990,"body_markdown":"**BE SIMPLE!!!**\r\n\r\nYou can treat all `&lt;0` numbers as `0`, and all `&gt;100` as `100`. \r\n\r\nLeverage [`Math.max`][1] &amp; [`Math.min`][2].\r\n\r\n```java\r\npublic void setHealth(int health) {\r\n    this.health = Math.max(0, Math.min(health, 100));\r\n}\r\n```\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Math.html#max(int,int)\r\n  [2]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Math.html#min(int,int)","title":"Make integer stay always between 0 - 100","body":"<p><strong>BE SIMPLE!!!</strong></p>\n<p>You can treat all <code>&lt;0</code> numbers as <code>0</code>, and all <code>&gt;100</code> as <code>100</code>.</p>\n<p>Leverage <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Math.html#max(int,int)\" rel=\"nofollow noreferrer\"><code>Math.max</code></a> &amp; <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Math.html#min(int,int)\" rel=\"nofollow noreferrer\"><code>Math.min</code></a>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void setHealth(int health) {\n    this.health = Math.max(0, Math.min(health, 100));\n}\n</code></pre>\n"}],"owner":{"account_id":28036660,"reputation":33,"user_id":21414942,"display_name":"MysticPaul97"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":76724772,"answer_count":2,"score":2,"last_activity_date":1689868009,"creation_date":1689788943,"question_id":76723990,"body_markdown":"I&#39;m making a command line Tamagotchi in Java.\r\n\r\nIt has stats like Happiness, Hunger, Intelligence, and Health. All of these stats should always be between 0 - 100.\r\n\r\nAnd what I want to do is that if some activity makes one stat to go over 100, or under 0, just substract the difference till it reaches an acceptable amount.\r\n\r\nI was planning to do that with an if, on the setter. But on a similar question it used a throws. And what I want to do, is the user to don&#39;t notice a thing, and the program:\r\n\r\n1. Stops adding or substracting a value.\r\n\r\n2. When it first overflows, substract the difference to return it to normal\r\n\r\nHere&#39;s an example:\r\n\r\n```\r\n    public void setHealth(int health) {\r\n        if (health &lt; 0 || health &gt; 100) {\r\n            //Here I want the code that returns the value to normal, and the other things I said.\r\n        } else {\r\n            this.health = health;\r\n        }\r\n    }\r\n```","title":"Make integer stay always between 0 - 100","body":"<p>I'm making a command line Tamagotchi in Java.</p>\n<p>It has stats like Happiness, Hunger, Intelligence, and Health. All of these stats should always be between 0 - 100.</p>\n<p>And what I want to do is that if some activity makes one stat to go over 100, or under 0, just substract the difference till it reaches an acceptable amount.</p>\n<p>I was planning to do that with an if, on the setter. But on a similar question it used a throws. And what I want to do, is the user to don't notice a thing, and the program:</p>\n<ol>\n<li><p>Stops adding or substracting a value.</p>\n</li>\n<li><p>When it first overflows, substract the difference to return it to normal</p>\n</li>\n</ol>\n<p>Here's an example:</p>\n<pre><code>    public void setHealth(int health) {\n        if (health &lt; 0 || health &gt; 100) {\n            //Here I want the code that returns the value to normal, and the other things I said.\n        } else {\n            this.health = health;\n        }\n    }\n</code></pre>\n"},{"tags":["java","spring-boot","openapi-generator"],"answers":[{"comments":[{"owner":{"account_id":1521806,"reputation":11725,"user_id":1421254,"accept_rate":100,"display_name":"Dmitriusan"},"score":0,"creation_date":1698137515,"post_id":76730495,"comment_id":136363887,"body_markdown":"that does not help, because @Component/@Service annotation is needed on `*Api` classes, and not on model classes. There is no option like additionalApiTypeAnnotations to specify the annotation here","body":"that does not help, because @Component/@Service annotation is needed on <code>*Api</code> classes, and not on model classes. There is no option like additionalApiTypeAnnotations to specify the annotation here"}],"tags":[],"owner":{"account_id":22604872,"reputation":2005,"user_id":16785907,"display_name":"Mikhail2048"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1689860397,"creation_date":1689860397,"answer_id":76730495,"question_id":76730229,"body_markdown":"There is [an open issue][1] about this in GitHub repo.\r\nStill, AFIAK it is possible, there is an example in the discussion thread like this:\r\n```\r\n&lt;configOptions&gt;\r\n      &lt;additionalModelTypeAnnotations&gt;@lombok.Builder @lombok.NoArgsConstructor @lombok.AllArgsConstructor&lt;/additionalModelTypeAnnotations&gt;\r\n&lt;/configOptions&gt;\r\n```\r\n\r\nIt uses the lombok annotations, but it does not matter. You can specify a FQCN of spring `@Component` annotation or `@Service` annotation.\r\n\r\n\r\n  [1]: https://github.com/OpenAPITools/openapi-generator/issues/324#issuecomment-785438335","title":"OpenApi-Generator-Plugin - Is it possible to generate spring @Component Annotation in ApiClient when creating Webclients?","body":"<p>There is <a href=\"https://github.com/OpenAPITools/openapi-generator/issues/324#issuecomment-785438335\" rel=\"nofollow noreferrer\">an open issue</a> about this in GitHub repo.\nStill, AFIAK it is possible, there is an example in the discussion thread like this:</p>\n<pre><code>&lt;configOptions&gt;\n      &lt;additionalModelTypeAnnotations&gt;@lombok.Builder @lombok.NoArgsConstructor @lombok.AllArgsConstructor&lt;/additionalModelTypeAnnotations&gt;\n&lt;/configOptions&gt;\n</code></pre>\n<p>It uses the lombok annotations, but it does not matter. You can specify a FQCN of spring <code>@Component</code> annotation or <code>@Service</code> annotation.</p>\n"}],"owner":{"account_id":1339375,"reputation":281,"user_id":1281389,"accept_rate":44,"display_name":"Maevy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":266,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1689867990,"creation_date":1689858371,"question_id":76730229,"body_markdown":"is it possible to generate my `XYZClient` and invoker `ApiClient` as Spring beans with an `@Component` Annotation ?\r\n\r\nI am using the `open-api-generator` gradle plugin.","title":"OpenApi-Generator-Plugin - Is it possible to generate spring @Component Annotation in ApiClient when creating Webclients?","body":"<p>is it possible to generate my <code>XYZClient</code> and invoker <code>ApiClient</code> as Spring beans with an <code>@Component</code> Annotation ?</p>\n<p>I am using the <code>open-api-generator</code> gradle plugin.</p>\n"},{"tags":["java","jvm","embedded","embedded-linux","yocto"],"comments":[{"owner":{"account_id":4195384,"reputation":16115,"user_id":3436922,"accept_rate":67,"display_name":"LPs"},"score":0,"creation_date":1490791591,"post_id":43093838,"comment_id":73268845,"body_markdown":"Take a look at `log.do_compile.3780` file. It should have all infos about the errors.","body":"Take a look at <code>log.do_compile.3780</code> file. It should have all infos about the errors."},{"owner":{"account_id":10561152,"reputation":651,"user_id":7780889,"accept_rate":80,"display_name":"mattdibi"},"score":0,"creation_date":1490792788,"post_id":43093838,"comment_id":73269821,"body_markdown":"I added the log file to the question since I still have no clue about what to try next.","body":"I added the log file to the question since I still have no clue about what to try next."},{"owner":{"account_id":4195384,"reputation":16115,"user_id":3436922,"accept_rate":67,"display_name":"LPs"},"score":0,"creation_date":1490795631,"post_id":43093838,"comment_id":73272267,"body_markdown":"Weel. It is plain UB to left shift signed number, so the compiler is making its job. The source code has serious problems...","body":"Weel. It is plain UB to left shift signed number, so the compiler is making its job. The source code has serious problems..."},{"owner":{"account_id":4195384,"reputation":16115,"user_id":3436922,"accept_rate":67,"display_name":"LPs"},"score":1,"creation_date":1490795706,"post_id":43093838,"comment_id":73272350,"body_markdown":"There is a reported bug for that: [Bug 981625](https://bugzilla.opensuse.org/show_bug.cgi?id=981625)","body":"There is a reported bug for that: <a href=\"https://bugzilla.opensuse.org/show_bug.cgi?id=981625\" rel=\"nofollow noreferrer\">Bug 981625</a>"},{"owner":{"account_id":4195384,"reputation":16115,"user_id":3436922,"accept_rate":67,"display_name":"LPs"},"score":1,"creation_date":1490798164,"post_id":43093838,"comment_id":73274528,"body_markdown":"There is a [canditae.patch](https://bugzilla.opensuse.org/attachment.cgi?id=678295) for that bug. I&#39;d start trying it on current sources.","body":"There is a <a href=\"https://bugzilla.opensuse.org/attachment.cgi?id=678295\" rel=\"nofollow noreferrer\">canditae.patch</a> for that bug. I&#39;d start trying it on current sources."},{"owner":{"account_id":10561152,"reputation":651,"user_id":7780889,"accept_rate":80,"display_name":"mattdibi"},"score":0,"creation_date":1490803808,"post_id":43093838,"comment_id":73279046,"body_markdown":"I posted the solution. Thank you very much for finding that bug report. It saved me! XD","body":"I posted the solution. Thank you very much for finding that bug report. It saved me! XD"}],"answers":[{"comments":[{"owner":{"account_id":4195384,"reputation":16115,"user_id":3436922,"accept_rate":67,"display_name":"LPs"},"score":1,"creation_date":1490816315,"post_id":43098530,"comment_id":73287030,"body_markdown":"Good job!! +1 ;)","body":"Good job!! +1 ;)"},{"owner":{"account_id":6582887,"reputation":408,"user_id":5086634,"accept_rate":80,"display_name":"Eliezer Miron"},"score":0,"creation_date":1573581338,"post_id":43098530,"comment_id":103925096,"body_markdown":"How can I force my project to use a newer version of openjdk, and which version do you recommend?","body":"How can I force my project to use a newer version of openjdk, and which version do you recommend?"},{"owner":{"account_id":10561152,"reputation":651,"user_id":7780889,"accept_rate":80,"display_name":"mattdibi"},"score":0,"creation_date":1573805502,"post_id":43098530,"comment_id":104013430,"body_markdown":"@EliezerMiron Unfortunately I&#39;m not working on this particular project anymore so I cannot recommend a version for you. Regarding how to make Yocto use a specific version of openjdk try setting a preferred version in the local.conf.","body":"@EliezerMiron Unfortunately I&#39;m not working on this particular project anymore so I cannot recommend a version for you. Regarding how to make Yocto use a specific version of openjdk try setting a preferred version in the local.conf."},{"owner":{"account_id":6582887,"reputation":408,"user_id":5086634,"accept_rate":80,"display_name":"Eliezer Miron"},"score":1,"creation_date":1573836887,"post_id":43098530,"comment_id":104030139,"body_markdown":"Seems that my issues were related to my target architecture being Aarch64. Thanks for your help anyway!","body":"Seems that my issues were related to my target architecture being Aarch64. Thanks for your help anyway!"}],"tags":[],"owner":{"account_id":10561152,"reputation":651,"user_id":7780889,"accept_rate":80,"display_name":"mattdibi"},"comment_count":4,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1491467853,"creation_date":1490803033,"answer_id":43098530,"question_id":43093838,"body_markdown":"I manually patched the files generating those error and builded the image. It gave a new error but successfully wrote the image. Java in installed:\r\n\r\n    root@intel-corei7-64:~# java -version\r\n    java version &quot;1.7.0_99&quot;\r\n    OpenJDK Runtime Environment (IcedTea 2.6.5) (99b00-2.6.5)\r\n    OpenJDK 64-Bit Zero VM (build 24.95-b01, interpreted mode)\r\n\r\nThe solution is either:\r\n\r\n 1. Manually patch openjdk following\r\n    [this](https://bugzilla.opensuse.org/attachment.cgi?id=678295&amp;action=diff)\r\n    \r\n 2. Use a newer version of openjdk. This can be achived using a more\r\n        recent commit for the meta-java repository or setting a newer\r\n        preferred version in the local.conf.\r\n\r\nEDIT: Added guide link.\r\n \r\n# Guide\r\nSince I&#39;m using this image in an OpenSource project I made a little guide on how to overcome the problems I had during the building process.\r\nThe guide can be found here.\r\n\r\nUPDATE: I upgraded the JRE and JDK version. The new guide can be found [here](https://github.com/mattdibi/RSPassengerCounter/tree/master/build_config). For the bravest among you there&#39;s also an installer script.","title":"JAVA installation error on Yocto build","body":"<p>I manually patched the files generating those error and builded the image. It gave a new error but successfully wrote the image. Java in installed:</p>\n\n<pre><code>root@intel-corei7-64:~# java -version\njava version \"1.7.0_99\"\nOpenJDK Runtime Environment (IcedTea 2.6.5) (99b00-2.6.5)\nOpenJDK 64-Bit Zero VM (build 24.95-b01, interpreted mode)\n</code></pre>\n\n<p>The solution is either:</p>\n\n<ol>\n<li><p>Manually patch openjdk following\n<a href=\"https://bugzilla.opensuse.org/attachment.cgi?id=678295&amp;action=diff\" rel=\"nofollow noreferrer\">this</a></p></li>\n<li><p>Use a newer version of openjdk. This can be achived using a more\n    recent commit for the meta-java repository or setting a newer\n    preferred version in the local.conf.</p></li>\n</ol>\n\n<p>EDIT: Added guide link.</p>\n\n<h1>Guide</h1>\n\n<p>Since I'm using this image in an OpenSource project I made a little guide on how to overcome the problems I had during the building process.\nThe guide can be found here.</p>\n\n<p>UPDATE: I upgraded the JRE and JDK version. The new guide can be found <a href=\"https://github.com/mattdibi/RSPassengerCounter/tree/master/build_config\" rel=\"nofollow noreferrer\">here</a>. For the bravest among you there's also an installer script.</p>\n"},{"tags":[],"owner":{"account_id":29050965,"reputation":21,"user_id":22253803,"display_name":"Sebastian Veit"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689867570,"creation_date":1689867570,"answer_id":76731540,"question_id":43093838,"body_markdown":"I know this is an old question but it is still relevant. If you are trying to build a &quot;Poky Linux system&quot; with Yocto, you will most probably use the official layer called [meta-java](https://github.com/meta-java/meta-java).\r\n\r\nInstead of using the official layer which is stuck at version 8 of OpenJDK, you could use mine. It is called [meta-openjdk-temurin](https://github.com/lucimber/meta-openjdk-temurin) and it offers OpenJDK JREs of LTS version 8, 11 and 17.\r\n\r\nWhy don&#39;t I contribute to the official layer? Because it takes a different approach to the situation.\r\n\r\nThe recipes from the official layer will instruct bitbake to compile the desired recipe. Just like all the other layers in the ecosystem of OE/Yocto, so nothing wrong here. But building a Java runtime and mainting it is a lot of work. E.g. if you want to build a JRE 11 you need to provide a bootstraping JVM 10. Furthermore you want to make sure that your freshly built JRE/JDK passes the Oracle Java Compatibility Kit. The last point isn&#39;t a requirement for personal projects, but in a business environment it is. To summarize: It is a lot of work/effort to provide the official Java layer in this way.\r\n\r\nMy layer isn&#39;t instructing bitbake to compile the desired JRE. Instead, a prebuilt binary - that matches the arch/machine - will be downloaded from https://adoptium.net and then incorporated into the build/image. This way, you will get a much faster build time with the newest LTS version of OpenJDK JRE in the expense of a slighty less optimized binary.\r\n\r\nI know, that is not the preferred way in OE/Yocto but it works for me.\r\n\r\nDisclaimer: I am not affiliated with OE/Yocto or Adoptium.","title":"JAVA installation error on Yocto build","body":"<p>I know this is an old question but it is still relevant. If you are trying to build a &quot;Poky Linux system&quot; with Yocto, you will most probably use the official layer called <a href=\"https://github.com/meta-java/meta-java\" rel=\"nofollow noreferrer\">meta-java</a>.</p>\n<p>Instead of using the official layer which is stuck at version 8 of OpenJDK, you could use mine. It is called <a href=\"https://github.com/lucimber/meta-openjdk-temurin\" rel=\"nofollow noreferrer\">meta-openjdk-temurin</a> and it offers OpenJDK JREs of LTS version 8, 11 and 17.</p>\n<p>Why don't I contribute to the official layer? Because it takes a different approach to the situation.</p>\n<p>The recipes from the official layer will instruct bitbake to compile the desired recipe. Just like all the other layers in the ecosystem of OE/Yocto, so nothing wrong here. But building a Java runtime and mainting it is a lot of work. E.g. if you want to build a JRE 11 you need to provide a bootstraping JVM 10. Furthermore you want to make sure that your freshly built JRE/JDK passes the Oracle Java Compatibility Kit. The last point isn't a requirement for personal projects, but in a business environment it is. To summarize: It is a lot of work/effort to provide the official Java layer in this way.</p>\n<p>My layer isn't instructing bitbake to compile the desired JRE. Instead, a prebuilt binary - that matches the arch/machine - will be downloaded from <a href=\"https://adoptium.net\" rel=\"nofollow noreferrer\">https://adoptium.net</a> and then incorporated into the build/image. This way, you will get a much faster build time with the newest LTS version of OpenJDK JRE in the expense of a slighty less optimized binary.</p>\n<p>I know, that is not the preferred way in OE/Yocto but it works for me.</p>\n<p>Disclaimer: I am not affiliated with OE/Yocto or Adoptium.</p>\n"}],"owner":{"account_id":10561152,"reputation":651,"user_id":7780889,"accept_rate":80,"display_name":"mattdibi"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2951,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":43098530,"answer_count":2,"score":3,"last_activity_date":1689867570,"creation_date":1490791311,"question_id":43093838,"body_markdown":"I&#39;m having a lot of trouble installing Java on my Poky Linux system. I&#39;m building my system using Yocto with the following configuration:\r\n\r\nlocal.conf\r\n\r\n    MACHINE ??= &quot;intel-corei7-64&quot;\r\n    \r\n    DISTRO ?= &quot;poky&quot;\r\n    \r\n    PACKAGE_CLASSES ?= &quot;package_rpm&quot;\r\n    \r\n    SDKMACHINE ?= &quot;x86_64&quot;\r\n    \r\n    EXTRA_IMAGE_FEATURES ?= &quot;debug-tweaks&quot;\r\n    \r\n    USER_CLASSES ?= &quot;buildstats image-mklibs image-prelink&quot;\r\n    \r\n    PATCHRESOLVE = &quot;noop&quot;\r\n    \r\n    BB_DISKMON_DIRS = &quot;\\\r\n        STOPTASKS,${TMPDIR},1G,100K \\\r\n        STOPTASKS,${DL_DIR},1G,100K \\\r\n        STOPTASKS,${SSTATE_DIR},1G,100K \\\r\n        STOPTASKS,/tmp,100M,100K \\\r\n        ABORT,${TMPDIR},100M,1K \\\r\n        ABORT,${DL_DIR},100M,1K \\\r\n        ABORT,${SSTATE_DIR},100M,1K \\\r\n        ABORT,/tmp,10M,1K&quot;\r\n    \r\n    \r\n    PACKAGECONFIG_append_pn-qemu-native = &quot; sdl&quot;\r\n    PACKAGECONFIG_append_pn-nativesdk-qemu = &quot; sdl&quot;\r\n    \r\n    CONF_VERSION = &quot;1&quot;\r\n    \r\n    BB_NUMBER_THREADS = &#39;12&#39;\r\n    PARALLEL_MAKE = &#39;-j 12&#39;\r\n    \r\n    # Java installation\r\n    CORE_IMAGE_EXTRA_INSTALL += &quot;gtkperf libxslt&quot; \r\n    IMAGE_INSTALL_append = &quot; openjdk-7-jre &quot;\r\n    \r\n    LICENSE_FLAGS_WHITELIST += &quot;oracle_java&quot; \r\n    PREFERRED_PROVIDER_virtual/java-initial-native = &quot;cacao-initial-native&quot;\r\n    PREFERRED_PROVIDER_virtual/java-native = &quot;jamvm-native&quot;\r\n    PREFERRED_PROVIDER_virtual/javac-native = &quot;ecj-bootstrap-native&quot;\r\n    \r\n    PREFERRED_VERSION_xserver-nodm-init = &quot;1.0&quot;\r\n    \r\n    # OpenCV installation\r\n    CORE_IMAGE_EXTRA_INSTALL += &quot;opencv opencv-samples libopencv-core-dev libopencv-highgui-dev libopencv-imgproc-dev libopencv-objdetect-dev libopencv-ml-dev&quot;\r\n\r\nbblayers.conf\r\n\r\n    # POKY_BBLAYERS_CONF_VERSION is increased each time build/conf/bblayers.conf\r\n    # changes incompatibly\r\n    POKY_BBLAYERS_CONF_VERSION = &quot;2&quot;\r\n    \r\n    BBPATH = &quot;${TOPDIR}&quot;\r\n    BBFILES ?= &quot;&quot;\r\n    \r\n    BBLAYERS ?= &quot; \\\r\n      $HOME/poky/meta \\\r\n      $HOME/poky/meta-poky \\\r\n      $HOME/poky/meta-yocto-bsp \\\r\n      $HOME/poky/meta-intel \\\r\n      $HOME/poky/meta-openembedded/meta-oe \\\r\n      $HOME/poky/meta-intel-realsense \\\r\n      $HOME/poky/meta-java \\\r\n      $HOME/poky/meta-oracle-java \\\r\n      &quot;\r\n\r\nI need to use morty branch since I&#39;m using Intel Realsense layer which is only compatible with 4.8 kernel\r\n\r\n    Build Configuration:\r\n    BB_VERSION        = &quot;1.32.0&quot;\r\n    BUILD_SYS         = &quot;x86_64-linux&quot;\r\n    NATIVELSBSTRING   = &quot;CentOSLinux-7.3.1611&quot;\r\n    TARGET_SYS        = &quot;x86_64-poky-linux&quot;\r\n    MACHINE           = &quot;intel-corei7-64&quot;\r\n    DISTRO            = &quot;poky&quot;\r\n    DISTRO_VERSION    = &quot;2.2.1&quot;\r\n    TUNE_FEATURES     = &quot;m64 corei7&quot;\r\n    TARGET_FPU        = &quot;&quot;\r\n    meta              \r\n    meta-poky         \r\n    meta-yocto-bsp    = &quot;morty:924e576b8930fd2268d85f0b151e5f68a3c2afce&quot;\r\n    meta-intel        = &quot;morty:6add41510412ca196efb3e4f949d403a8b6f35d7&quot;\r\n    meta-oe           = &quot;morty:fe5c83312de11e80b85680ef237f8acb04b4b26e&quot;\r\n    meta-intel-realsense = &quot;morty:2c0dfe9690d2871214fba9c1c32980a5eb89a421&quot;\r\n    meta-java         = &quot;master:67e48693501bddb80745b9735b7b3d4d28dce9a1&quot;\r\n    meta-oracle-java  = &quot;morty:f44365f02b283c3fb362dc99e2e996d3f11e356e&quot;\r\n\r\nI get the following error:\r\n\r\n    ERROR: openjdk-7-jre-99b00-2.6.5-r6.1 do_compile: oe_runmake failed\r\n    ERROR: openjdk-7-jre-99b00-2.6.5-r6.1 do_compile: Function failed: do_compile (log file is located at /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/temp/log.do_compile.3780)\r\n    ERROR: Logfile of failure stored in: /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/temp/log.do_compile.3780\r\n    Log data follows:\r\n\r\nand then several hundreds lines of error log.\r\nAny help is appreciated.\r\n\r\nEDIT: From the log.do_compile file\r\n\r\n    ERROR: oe_runmake failed\r\n    In file included from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/oops/constantPoolOop.hpp:29:0,\r\n                     from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/oops/methodOop.hpp:33,\r\n                     from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/runtime/frame.hpp:29,\r\n                     from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/prims/jvmtiExport.hpp:33,\r\n                     from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/runtime/thread.hpp:32,\r\n                     from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/os/linux/vm/thread_linux.inline.hpp:30,\r\n                     from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/memory/resourceArea.hpp:30,\r\n                     from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/classfile/classFileParser.hpp:29,\r\n                     from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/classfile/classLoader.hpp:28,\r\n                     from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/classfile/systemDictionary.hpp:29,\r\n                     from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/ci/ciEnv.hpp:30,\r\n                     from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/ci/ciUtilities.hpp:28,\r\n                     from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/ci/ciNullObject.hpp:30,\r\n                     from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/ci/ciConstant.hpp:29,\r\n                     from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/precompiled/precompiled.hpp:36:\r\n    /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/oops/cpCacheOop.hpp: At global scope:\r\n    /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/oops/cpCacheOop.hpp:189:42: error: left operand of shift expression &#39;(-1 &lt;&lt; 28)&#39; is negative [-fpermissive]\r\n         option_bits_mask           = ~(((-1) &lt;&lt; tos_state_shift) | (field_index_mask | parameter_size_mask))\r\n                                        ~~~~~~^~~~~~~~~~~~~~~~~~~\r\n    /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/oops/cpCacheOop.hpp:189:104: error: enumerator value for &#39;option_bits_mask&#39; is not an integer constant\r\n         option_bits_mask           = ~(((-1) &lt;&lt; tos_state_shift) | (field_index_mask | parameter_size_mask))\r\n                                                                                                            ^\r\n    In file included from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/ci/ciEnv.hpp:32:0,\r\n                     from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/ci/ciUtilities.hpp:28,\r\n                     from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/ci/ciNullObject.hpp:30,\r\n                     from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/ci/ciConstant.hpp:29,\r\n                     from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/precompiled/precompiled.hpp:36:\r\n    /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/code/dependencies.hpp:169:59: error: left operand of shift expression &#39;(-1 &lt;&lt; 1)&#39; is negative [-fpermissive]\r\n         all_types           = ((1 &lt;&lt; TYPE_LIMIT) - 1) &amp; ((-1) &lt;&lt; FIRST_TYPE),\r\n                                                         ~~~~~~^~~~~~~~~~~~~~\r\n    /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/code/dependencies.hpp:169:72: error: enumerator value for &#39;all_types&#39; is not an integer constant\r\n         all_types           = ((1 &lt;&lt; TYPE_LIMIT) - 1) &amp; ((-1) &lt;&lt; FIRST_TYPE),\r\n                                                                            ^\r\n    gmake[7]: *** [precompiled.hpp.gch] Error 1\r\n    gmake[7]: Leaving directory `/home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk.build/hotspot/outputdir/linux_amd64_zero/product&#39;\r\n    gmake[6]: *** [the_vm] Error 2\r\n    gmake[6]: Leaving directory `/home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk.build/hotspot/outputdir/linux_amd64_zero/product&#39;\r\n    gmake[5]: *** [productzero] Error 2\r\n    gmake[5]: Leaving directory `/home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk.build/hotspot/outputdir&#39;\r\n    gmake[4]: *** [generic_buildzero] Error 2\r\n    gmake[4]: Leaving directory `/home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/make&#39;\r\n    gmake[3]: *** [productzero] Error 2\r\n    gmake[3]: Leaving directory `/home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/make&#39;\r\n    gmake[2]: *** [hotspot-build] Error 2\r\n    gmake[2]: Leaving directory `/home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk&#39;\r\n    gmake[1]: *** [build_product_image] Error 2\r\n    gmake[1]: Leaving directory `/home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk&#39;\r\n    make: *** [Makefile:2451: stamps/icedtea.stamp] Error 2\r\n    ERROR: Function failed: do_compile (log file is located at /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/temp/log.do_compile.3780)","title":"JAVA installation error on Yocto build","body":"<p>I'm having a lot of trouble installing Java on my Poky Linux system. I'm building my system using Yocto with the following configuration:</p>\n\n<p>local.conf</p>\n\n<pre><code>MACHINE ??= \"intel-corei7-64\"\n\nDISTRO ?= \"poky\"\n\nPACKAGE_CLASSES ?= \"package_rpm\"\n\nSDKMACHINE ?= \"x86_64\"\n\nEXTRA_IMAGE_FEATURES ?= \"debug-tweaks\"\n\nUSER_CLASSES ?= \"buildstats image-mklibs image-prelink\"\n\nPATCHRESOLVE = \"noop\"\n\nBB_DISKMON_DIRS = \"\\\n    STOPTASKS,${TMPDIR},1G,100K \\\n    STOPTASKS,${DL_DIR},1G,100K \\\n    STOPTASKS,${SSTATE_DIR},1G,100K \\\n    STOPTASKS,/tmp,100M,100K \\\n    ABORT,${TMPDIR},100M,1K \\\n    ABORT,${DL_DIR},100M,1K \\\n    ABORT,${SSTATE_DIR},100M,1K \\\n    ABORT,/tmp,10M,1K\"\n\n\nPACKAGECONFIG_append_pn-qemu-native = \" sdl\"\nPACKAGECONFIG_append_pn-nativesdk-qemu = \" sdl\"\n\nCONF_VERSION = \"1\"\n\nBB_NUMBER_THREADS = '12'\nPARALLEL_MAKE = '-j 12'\n\n# Java installation\nCORE_IMAGE_EXTRA_INSTALL += \"gtkperf libxslt\" \nIMAGE_INSTALL_append = \" openjdk-7-jre \"\n\nLICENSE_FLAGS_WHITELIST += \"oracle_java\" \nPREFERRED_PROVIDER_virtual/java-initial-native = \"cacao-initial-native\"\nPREFERRED_PROVIDER_virtual/java-native = \"jamvm-native\"\nPREFERRED_PROVIDER_virtual/javac-native = \"ecj-bootstrap-native\"\n\nPREFERRED_VERSION_xserver-nodm-init = \"1.0\"\n\n# OpenCV installation\nCORE_IMAGE_EXTRA_INSTALL += \"opencv opencv-samples libopencv-core-dev libopencv-highgui-dev libopencv-imgproc-dev libopencv-objdetect-dev libopencv-ml-dev\"\n</code></pre>\n\n<p>bblayers.conf</p>\n\n<pre><code># POKY_BBLAYERS_CONF_VERSION is increased each time build/conf/bblayers.conf\n# changes incompatibly\nPOKY_BBLAYERS_CONF_VERSION = \"2\"\n\nBBPATH = \"${TOPDIR}\"\nBBFILES ?= \"\"\n\nBBLAYERS ?= \" \\\n  $HOME/poky/meta \\\n  $HOME/poky/meta-poky \\\n  $HOME/poky/meta-yocto-bsp \\\n  $HOME/poky/meta-intel \\\n  $HOME/poky/meta-openembedded/meta-oe \\\n  $HOME/poky/meta-intel-realsense \\\n  $HOME/poky/meta-java \\\n  $HOME/poky/meta-oracle-java \\\n  \"\n</code></pre>\n\n<p>I need to use morty branch since I'm using Intel Realsense layer which is only compatible with 4.8 kernel</p>\n\n<pre><code>Build Configuration:\nBB_VERSION        = \"1.32.0\"\nBUILD_SYS         = \"x86_64-linux\"\nNATIVELSBSTRING   = \"CentOSLinux-7.3.1611\"\nTARGET_SYS        = \"x86_64-poky-linux\"\nMACHINE           = \"intel-corei7-64\"\nDISTRO            = \"poky\"\nDISTRO_VERSION    = \"2.2.1\"\nTUNE_FEATURES     = \"m64 corei7\"\nTARGET_FPU        = \"\"\nmeta              \nmeta-poky         \nmeta-yocto-bsp    = \"morty:924e576b8930fd2268d85f0b151e5f68a3c2afce\"\nmeta-intel        = \"morty:6add41510412ca196efb3e4f949d403a8b6f35d7\"\nmeta-oe           = \"morty:fe5c83312de11e80b85680ef237f8acb04b4b26e\"\nmeta-intel-realsense = \"morty:2c0dfe9690d2871214fba9c1c32980a5eb89a421\"\nmeta-java         = \"master:67e48693501bddb80745b9735b7b3d4d28dce9a1\"\nmeta-oracle-java  = \"morty:f44365f02b283c3fb362dc99e2e996d3f11e356e\"\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre><code>ERROR: openjdk-7-jre-99b00-2.6.5-r6.1 do_compile: oe_runmake failed\nERROR: openjdk-7-jre-99b00-2.6.5-r6.1 do_compile: Function failed: do_compile (log file is located at /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/temp/log.do_compile.3780)\nERROR: Logfile of failure stored in: /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/temp/log.do_compile.3780\nLog data follows:\n</code></pre>\n\n<p>and then several hundreds lines of error log.\nAny help is appreciated.</p>\n\n<p>EDIT: From the log.do_compile file</p>\n\n<pre><code>ERROR: oe_runmake failed\nIn file included from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/oops/constantPoolOop.hpp:29:0,\n                 from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/oops/methodOop.hpp:33,\n                 from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/runtime/frame.hpp:29,\n                 from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/prims/jvmtiExport.hpp:33,\n                 from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/runtime/thread.hpp:32,\n                 from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/os/linux/vm/thread_linux.inline.hpp:30,\n                 from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/memory/resourceArea.hpp:30,\n                 from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/classfile/classFileParser.hpp:29,\n                 from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/classfile/classLoader.hpp:28,\n                 from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/classfile/systemDictionary.hpp:29,\n                 from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/ci/ciEnv.hpp:30,\n                 from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/ci/ciUtilities.hpp:28,\n                 from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/ci/ciNullObject.hpp:30,\n                 from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/ci/ciConstant.hpp:29,\n                 from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/precompiled/precompiled.hpp:36:\n/home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/oops/cpCacheOop.hpp: At global scope:\n/home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/oops/cpCacheOop.hpp:189:42: error: left operand of shift expression '(-1 &lt;&lt; 28)' is negative [-fpermissive]\n     option_bits_mask           = ~(((-1) &lt;&lt; tos_state_shift) | (field_index_mask | parameter_size_mask))\n                                    ~~~~~~^~~~~~~~~~~~~~~~~~~\n/home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/oops/cpCacheOop.hpp:189:104: error: enumerator value for 'option_bits_mask' is not an integer constant\n     option_bits_mask           = ~(((-1) &lt;&lt; tos_state_shift) | (field_index_mask | parameter_size_mask))\n                                                                                                        ^\nIn file included from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/ci/ciEnv.hpp:32:0,\n                 from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/ci/ciUtilities.hpp:28,\n                 from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/ci/ciNullObject.hpp:30,\n                 from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/ci/ciConstant.hpp:29,\n                 from /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/precompiled/precompiled.hpp:36:\n/home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/code/dependencies.hpp:169:59: error: left operand of shift expression '(-1 &lt;&lt; 1)' is negative [-fpermissive]\n     all_types           = ((1 &lt;&lt; TYPE_LIMIT) - 1) &amp; ((-1) &lt;&lt; FIRST_TYPE),\n                                                     ~~~~~~^~~~~~~~~~~~~~\n/home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/src/share/vm/code/dependencies.hpp:169:72: error: enumerator value for 'all_types' is not an integer constant\n     all_types           = ((1 &lt;&lt; TYPE_LIMIT) - 1) &amp; ((-1) &lt;&lt; FIRST_TYPE),\n                                                                        ^\ngmake[7]: *** [precompiled.hpp.gch] Error 1\ngmake[7]: Leaving directory `/home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk.build/hotspot/outputdir/linux_amd64_zero/product'\ngmake[6]: *** [the_vm] Error 2\ngmake[6]: Leaving directory `/home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk.build/hotspot/outputdir/linux_amd64_zero/product'\ngmake[5]: *** [productzero] Error 2\ngmake[5]: Leaving directory `/home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk.build/hotspot/outputdir'\ngmake[4]: *** [generic_buildzero] Error 2\ngmake[4]: Leaving directory `/home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/make'\ngmake[3]: *** [productzero] Error 2\ngmake[3]: Leaving directory `/home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk/hotspot/make'\ngmake[2]: *** [hotspot-build] Error 2\ngmake[2]: Leaving directory `/home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk'\ngmake[1]: *** [build_product_image] Error 2\ngmake[1]: Leaving directory `/home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/icedtea-2.6.5/build/openjdk'\nmake: *** [Makefile:2451: stamps/icedtea.stamp] Error 2\nERROR: Function failed: do_compile (log file is located at /home/dalben/NewBuild/poky/filec/tmp/work/corei7-64-poky-linux/openjdk-7-jre/99b00-2.6.5-r6.1/temp/log.do_compile.3780)\n</code></pre>\n"},{"tags":["java","spring-mvc"],"comments":[{"owner":{"account_id":2624585,"reputation":1457,"user_id":2271895,"accept_rate":97,"display_name":"Tan"},"score":0,"creation_date":1689866868,"post_id":76731269,"comment_id":135277101,"body_markdown":"I will try to in some time. It&#39;s just a class with getters and setters defined. So I&#39;ve a variable `private String userOption` defined and its getter and setter. Similary for `userSubOptions`. One thing I did notice in my UI code is that when I click on Option 1, the radio button C was also selected and the radio button for Option 1 was also selected. I mean if I&#39;m selecting Option 1 or Option 2 radio button, radio button C shouldn&#39;t be selected, right?","body":"I will try to in some time. It&#39;s just a class with getters and setters defined. So I&#39;ve a variable <code>private String userOption</code> defined and its getter and setter. Similary for <code>userSubOptions</code>. One thing I did notice in my UI code is that when I click on Option 1, the radio button C was also selected and the radio button for Option 1 was also selected. I mean if I&#39;m selecting Option 1 or Option 2 radio button, radio button C shouldn&#39;t be selected, right?"},{"owner":{"account_id":17813347,"reputation":1635,"user_id":12937443,"display_name":"DEV"},"score":0,"creation_date":1689866899,"post_id":76731269,"comment_id":135277113,"body_markdown":"you might missing the setter fot the userSubOptions","body":"you might missing the setter fot the userSubOptions"},{"owner":{"account_id":2624585,"reputation":1457,"user_id":2271895,"accept_rate":97,"display_name":"Tan"},"score":0,"creation_date":1689866957,"post_id":76731269,"comment_id":135277126,"body_markdown":"I have the setter for userSubOptions.","body":"I have the setter for userSubOptions."}],"answers":[{"comments":[{"owner":{"account_id":2624585,"reputation":1457,"user_id":2271895,"accept_rate":97,"display_name":"Tan"},"score":0,"creation_date":1689867501,"post_id":76731505,"comment_id":135277262,"body_markdown":"Ok, I will test it and let you know. Does using a label inside the tag a good practice?","body":"Ok, I will test it and let you know. Does using a label inside the tag a good practice?"},{"owner":{"account_id":2624585,"reputation":1457,"user_id":2271895,"accept_rate":97,"display_name":"Tan"},"score":0,"creation_date":1689875955,"post_id":76731505,"comment_id":135278924,"body_markdown":"I tested it and it didn&#39;t work. I&#39;m still getting null if I select Option 1 instead of `optionOne`.  I guess I might have to move this nested radio button functionality to a new page so it&#39;s no longer nested and behave like two separate radio buttons","body":"I tested it and it didn&#39;t work. I&#39;m still getting null if I select Option 1 instead of <code>optionOne</code>.  I guess I might have to move this nested radio button functionality to a new page so it&#39;s no longer nested and behave like two separate radio buttons"}],"tags":[],"owner":{"account_id":17813347,"reputation":1635,"user_id":12937443,"display_name":"DEV"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689867344,"creation_date":1689867344,"answer_id":76731505,"question_id":76731269,"body_markdown":"You can Try :\r\n\r\n    &lt;span&gt;\r\n        &lt;form:label path = &quot;userOption&quot;&gt;userOption&lt;/form:label&gt;\r\n        &lt;form:radiobutton path = &quot;userOption&quot; value = &quot;A&quot; label = &quot;A&quot; /&gt;\r\n        &lt;form:radiobutton path = &quot;userOption&quot; value = &quot;B&quot; label = &quot;B&quot; /&gt;\r\n        &lt;form:radiobutton path = &quot;userOption&quot; value = &quot;C&quot; label = &quot;C&quot; /&gt;\r\n    &lt;/span&gt;\r\n    &lt;span&gt;\r\n        &lt;form:label path = &quot;userSubOption&quot;&gt;userSubOption&lt;/form:label&gt;\r\n        &lt;form:radiobutton path = &quot;userSubOption&quot; value = &quot;optionOne&quot; label = &quot;Option 1&quot; /&gt;\r\n        &lt;form:radiobutton path = &quot;userSubOption&quot; value = &quot;optionTwo&quot; label = &quot;Option 2&quot; /&gt;\r\n    &lt;/span&gt;","title":"Getting nested level radio button value using spring mvc","body":"<p>You can Try :</p>\n<pre><code>&lt;span&gt;\n    &lt;form:label path = &quot;userOption&quot;&gt;userOption&lt;/form:label&gt;\n    &lt;form:radiobutton path = &quot;userOption&quot; value = &quot;A&quot; label = &quot;A&quot; /&gt;\n    &lt;form:radiobutton path = &quot;userOption&quot; value = &quot;B&quot; label = &quot;B&quot; /&gt;\n    &lt;form:radiobutton path = &quot;userOption&quot; value = &quot;C&quot; label = &quot;C&quot; /&gt;\n&lt;/span&gt;\n&lt;span&gt;\n    &lt;form:label path = &quot;userSubOption&quot;&gt;userSubOption&lt;/form:label&gt;\n    &lt;form:radiobutton path = &quot;userSubOption&quot; value = &quot;optionOne&quot; label = &quot;Option 1&quot; /&gt;\n    &lt;form:radiobutton path = &quot;userSubOption&quot; value = &quot;optionTwo&quot; label = &quot;Option 2&quot; /&gt;\n&lt;/span&gt;\n</code></pre>\n"}],"owner":{"account_id":2624585,"reputation":1457,"user_id":2271895,"accept_rate":97,"display_name":"Tan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689867344,"creation_date":1689865561,"question_id":76731269,"body_markdown":"I have radio buttons defined like this in my JSP:\r\n\r\n    &lt;label&gt;\r\n    &lt;form:radiobutton path=&quot;userOption&quot;&#160; value=“A”/&gt;\r\n    &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; A\r\n    &lt;/label&gt;\r\n    &lt;label&gt;\r\n    &lt;form:radiobutton path=&quot;userOption&quot;&#160; value=“B”/&gt;\r\n    &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; B\r\n    &lt;/label&gt;\r\n    &lt;label&gt;\r\n    &lt;form:radiobutton path=&quot;userOption&quot;&#160; value=“C”/&gt;\r\n    &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; C\r\n    &lt;/label&gt;\r\n    \r\n    \r\n    &lt;label&gt;\r\n    &lt;form:radiobutton path=&quot;userSubOption&quot;&#160; value=“optionOne”/&gt;\r\n    &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; Option 1\r\n    &lt;/label&gt;\r\n    &lt;label&gt;\r\n    &lt;form:radiobutton path=&quot;userSubOption&quot;&#160; value=&quot;optionTwo&quot;/&gt;\r\n    &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; Option 2\r\n    &lt;/label&gt;\r\n\r\nAnd in the controller, I’m getting value depending upon which radio button is selected. For example, if I select A, I&#39;ll get `A` in controller. Similarly for  B or C.\r\n\r\nHowever,if I am selecting `C` and then selecting Option 1 or Option 2 radio button, I am not getting its value (`optionOne or optionTwo).\r\n\r\nHere&#39;s a brief code of my controller:\r\n\r\n   \r\n\r\n     @Controller         \r\n    \r\n        @RequestMapping(“/manageLocation&quot;)         \r\n        \r\n        public class ManageLocationController {\r\n        &#160;\r\n        @RequestMapping(method = RequestMethod.POST)         \r\n        public ModelAndView process(ModelAndView mav,@ModelAttribute(&quot;ManageLocationForm&quot;) ManageLocationForm ManageLocationForm,BindingResult bindingResult) throws Exception {\r\n        \r\n               String userOptions = ManageLocationForm.getUserOption();         &#160;&#160;&#160;&#160;&#160;&#160;&#160;\r\n               System.out.println(userOptions);         \r\n               //This code doesn’t work\r\n               String userSubOptions = ManageLocationForm.getUserSubOption();         &#160;&#160;&#160;&#160;&#160;&#160;&#160;\r\n               System.out.println(userSubOptions);         \r\n        \r\n        \r\n        }\r\n       }\r\n\r\nWhat am I doing wrong here?\r\n&#160;\r\n&#160;\r\n \r\n\r\n","title":"Getting nested level radio button value using spring mvc","body":"<p>I have radio buttons defined like this in my JSP:</p>\n<pre><code>&lt;label&gt;\n&lt;form:radiobutton path=&quot;userOption&quot;  value=“A”/&gt;\n            A\n&lt;/label&gt;\n&lt;label&gt;\n&lt;form:radiobutton path=&quot;userOption&quot;  value=“B”/&gt;\n            B\n&lt;/label&gt;\n&lt;label&gt;\n&lt;form:radiobutton path=&quot;userOption&quot;  value=“C”/&gt;\n            C\n&lt;/label&gt;\n\n\n&lt;label&gt;\n&lt;form:radiobutton path=&quot;userSubOption&quot;  value=“optionOne”/&gt;\n            Option 1\n&lt;/label&gt;\n&lt;label&gt;\n&lt;form:radiobutton path=&quot;userSubOption&quot;  value=&quot;optionTwo&quot;/&gt;\n            Option 2\n&lt;/label&gt;\n</code></pre>\n<p>And in the controller, I’m getting value depending upon which radio button is selected. For example, if I select A, I'll get <code>A</code> in controller. Similarly for  B or C.</p>\n<p>However,if I am selecting <code>C</code> and then selecting Option 1 or Option 2 radio button, I am not getting its value (`optionOne or optionTwo).</p>\n<p>Here's a brief code of my controller:</p>\n<pre><code> @Controller         \n\n    @RequestMapping(“/manageLocation&quot;)         \n    \n    public class ManageLocationController {\n     \n    @RequestMapping(method = RequestMethod.POST)         \n    public ModelAndView process(ModelAndView mav,@ModelAttribute(&quot;ManageLocationForm&quot;) ManageLocationForm ManageLocationForm,BindingResult bindingResult) throws Exception {\n    \n           String userOptions = ManageLocationForm.getUserOption();                \n           System.out.println(userOptions);         \n           //This code doesn’t work\n           String userSubOptions = ManageLocationForm.getUserSubOption();                \n           System.out.println(userSubOptions);         \n    \n    \n    }\n   }\n</code></pre>\n<p>What am I doing wrong here?\n \n \n </p>\n"},{"tags":["java","spring","spring-boot","spring-mvc","spring-security"],"comments":[{"owner":{"account_id":21488921,"reputation":4730,"user_id":15835039,"display_name":"Steve Riesenberg"},"score":0,"creation_date":1689870281,"post_id":76724745,"comment_id":135277883,"body_markdown":"Have you tried utilizing the `OAuth2AuthorizedClientManager` and/or `@RegisteredOAuth2AuthorizedClient` annotated method arguments (see [docs](https://docs.spring.io/spring-security/reference/servlet/oauth2/client/authorized-clients.html#oauth2Client-registered-authorized-client))? Its job is to automatically manage tokens and detect/handle token expiration.","body":"Have you tried utilizing the <code>OAuth2AuthorizedClientManager</code> and/or <code>@RegisteredOAuth2AuthorizedClient</code> annotated method arguments (see <a href=\"https://docs.spring.io/spring-security/reference/servlet/oauth2/client/authorized-clients.html#oauth2Client-registered-authorized-client\" rel=\"nofollow noreferrer\">docs</a>)? Its job is to automatically manage tokens and detect/handle token expiration."}],"answers":[{"comments":[{"owner":{"account_id":29019036,"reputation":1,"user_id":22228894,"display_name":"alex"},"score":0,"creation_date":1689865713,"post_id":76728184,"comment_id":135276759,"body_markdown":"Unfortunately, this does not have the effect of causing the logged in user to re-login with OAuth2. It instead causes the request to be denied. This is because if you throw an AccessDeniedException when a user is already logged in, Spring Security does not ask them to log in again, but rather denies the request. Somehow the user needs to be logged out and then log in again.","body":"Unfortunately, this does not have the effect of causing the logged in user to re-login with OAuth2. It instead causes the request to be denied. This is because if you throw an AccessDeniedException when a user is already logged in, Spring Security does not ask them to log in again, but rather denies the request. Somehow the user needs to be logged out and then log in again."},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1689867030,"post_id":76728184,"comment_id":135277147,"body_markdown":"i just updated my answer, check if this one will work in your case","body":"i just updated my answer, check if this one will work in your case"},{"owner":{"account_id":29019036,"reputation":1,"user_id":22228894,"display_name":"alex"},"score":0,"creation_date":1689867158,"post_id":76728184,"comment_id":135277178,"body_markdown":"I do not have a login page as Spring Security handles OAuth2 redirect. Do you know if there is any way to force spring security to redo OAuth2 flow?","body":"I do not have a login page as Spring Security handles OAuth2 redirect. Do you know if there is any way to force spring security to redo OAuth2 flow?"},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1689868767,"post_id":76728184,"comment_id":135277572,"body_markdown":"according to documentation:  &#39;The HttpServletRequest.logout() method can be used to log the current user out.\n\nTypically this means that the SecurityContextHolder will be cleared out, the HttpSession will be invalidated, any &quot;Remember Me&quot; authentication will be cleaned up, etc.&#39; after it you just customize your HttpServletResponse","body":"according to documentation:  &#39;The HttpServletRequest.logout() method can be used to log the current user out.  Typically this means that the SecurityContextHolder will be cleared out, the HttpSession will be invalidated, any &quot;Remember Me&quot; authentication will be cleaned up, etc.&#39; after it you just customize your HttpServletResponse"},{"owner":{"account_id":29019036,"reputation":1,"user_id":22228894,"display_name":"alex"},"score":0,"creation_date":1689872794,"post_id":76728184,"comment_id":135278314,"body_markdown":"So, I see how that allows me to log out the current client. But it does not allow me to log them back in within the same request. I need the following flow:\n\noauth2 logged in client makes an HTTP request -&gt; their oauth2 access token is expired, so the server cannot proceed -&gt; they are made to log in again through oauth2 flow -&gt; spring security gets a new access token -&gt; the request succeeds.\n\nI think you are proposing:\n\noauth2 logged in client makes an HTTP request -&gt; their oauth2 access token is expired, so the server cannot proceed -&gt; they are logged out -&gt; they make the request again","body":"So, I see how that allows me to log out the current client. But it does not allow me to log them back in within the same request. I need the following flow:  oauth2 logged in client makes an HTTP request -&gt; their oauth2 access token is expired, so the server cannot proceed -&gt; they are made to log in again through oauth2 flow -&gt; spring security gets a new access token -&gt; the request succeeds.  I think you are proposing:  oauth2 logged in client makes an HTTP request -&gt; their oauth2 access token is expired, so the server cannot proceed -&gt; they are logged out -&gt; they make the request again"},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1689874033,"post_id":76728184,"comment_id":135278531,"body_markdown":"Yes their will be logged out and it mean that(user must to do log in, again through oAuth2) and so you will solve your problem, without refresh token.","body":"Yes their will be logged out and it mean that(user must to do log in, again through oAuth2) and so you will solve your problem, without refresh token."},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1689874409,"post_id":76728184,"comment_id":135278616,"body_markdown":"and yes your right it not will be the same request it will be another one, i think its not a such big problem","body":"and yes your right it not will be the same request it will be another one, i think its not a such big problem"}],"tags":[],"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"comment_count":7,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689866987,"creation_date":1689843036,"answer_id":76728184,"question_id":76724745,"body_markdown":"I think you should create a **custom filter** that check if token is expired\r\n\r\ncan you try this one approach and give me a feedback if it was helpful\r\n\r\n    @Component\r\n    public class Expired implements Filter {\r\n      \r\n      private final OAuth2ClientContext oAuth2ClientContext;\r\n    \r\n      public Expired(OAuth2ClientContext oAuth2ClientContext) {\r\n        this.oAuth2ClientContext = oAuth2ClientContext;\r\n      }\r\n    \r\n      @Override\r\n      public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)\r\n          throws IOException, ServletException {\r\n        OAuth2AccessToken accessToken = oAuth2ClientContext.getAccessToken();\r\n        if (accessToken != null &amp;&amp; accessToken.isExpired()) {\r\n          HttpServletResponse httpServletResponse = (HttpServletResponse) response;\r\n          response.sendError(401);\r\n        }\r\n        chain.doFilter(request, response);\r\n      }\r\n    }\r\n\r\n**UPDATE:**\r\ninstead of return 401 code, you can force response to be redirected to login page.\r\n Something like this:\r\n\r\n    if (accessToken != null &amp;&amp; accessToken.isExpired()) {\r\n        HttpServletResponse httpResponse = (HttpServletResponse) response;\r\n        httpResponse.sendRedirect(&quot;loginPage&quot;);\r\n}\r\n\r\n","title":"Spring Security OAuth2 Stale Access Token","body":"<p>I think you should create a <strong>custom filter</strong> that check if token is expired</p>\n<p>can you try this one approach and give me a feedback if it was helpful</p>\n<pre><code>@Component\npublic class Expired implements Filter {\n  \n  private final OAuth2ClientContext oAuth2ClientContext;\n\n  public Expired(OAuth2ClientContext oAuth2ClientContext) {\n    this.oAuth2ClientContext = oAuth2ClientContext;\n  }\n\n  @Override\n  public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)\n      throws IOException, ServletException {\n    OAuth2AccessToken accessToken = oAuth2ClientContext.getAccessToken();\n    if (accessToken != null &amp;&amp; accessToken.isExpired()) {\n      HttpServletResponse httpServletResponse = (HttpServletResponse) response;\n      response.sendError(401);\n    }\n    chain.doFilter(request, response);\n  }\n}\n</code></pre>\n<p><strong>UPDATE:</strong>\ninstead of return 401 code, you can force response to be redirected to login page.\nSomething like this:</p>\n<pre><code>if (accessToken != null &amp;&amp; accessToken.isExpired()) {\n    HttpServletResponse httpResponse = (HttpServletResponse) response;\n    httpResponse.sendRedirect(&quot;loginPage&quot;);\n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":29019036,"reputation":1,"user_id":22228894,"display_name":"alex"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":188,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689866987,"creation_date":1689796031,"question_id":76724745,"body_markdown":"I currently have an application running as an OAuth2 client using Spring Security. Users are able to login with an OAuth2 provider (which works), at which point Spring Security takes the authorization code and exchanges it for an access token. This token can be accessed in the following way:\r\n\r\n```\r\nAuthentication authentication = SecurityContextHolder.getContext().getAuthentication();\r\nOAuth2AuthorizedClient client = oAuth2AuthorizedClientService.loadAuthorizedClient(oAuth2RegistrationName, authentication.getName());\r\nOAuth2AccessToken token = client.getAccessToken();\r\n```\r\n\r\nThis token currently works for accessing protected resources with a resource server. However, an issue I am running into is that my application is keeping access tokens for too long, until they have become stale, and resource requests begin to fail. For example, once a user has authenticated, `OAuth2AccessToken token = client.getAccessToken()` will keep returning the same token forever (until application restart).\r\n\r\n**How can I get rid of the access tokens and force the user to login again with OAuth2 flow? My OAuth2/OIDC identity provider does not support refresh tokens, so I need to force the user to login again.**","title":"Spring Security OAuth2 Stale Access Token","body":"<p>I currently have an application running as an OAuth2 client using Spring Security. Users are able to login with an OAuth2 provider (which works), at which point Spring Security takes the authorization code and exchanges it for an access token. This token can be accessed in the following way:</p>\n<pre><code>Authentication authentication = SecurityContextHolder.getContext().getAuthentication();\nOAuth2AuthorizedClient client = oAuth2AuthorizedClientService.loadAuthorizedClient(oAuth2RegistrationName, authentication.getName());\nOAuth2AccessToken token = client.getAccessToken();\n</code></pre>\n<p>This token currently works for accessing protected resources with a resource server. However, an issue I am running into is that my application is keeping access tokens for too long, until they have become stale, and resource requests begin to fail. For example, once a user has authenticated, <code>OAuth2AccessToken token = client.getAccessToken()</code> will keep returning the same token forever (until application restart).</p>\n<p><strong>How can I get rid of the access tokens and force the user to login again with OAuth2 flow? My OAuth2/OIDC identity provider does not support refresh tokens, so I need to force the user to login again.</strong></p>\n"},{"tags":["python","java","guidewire","gosu"],"comments":[{"owner":{"account_id":24792239,"reputation":413,"user_id":18675173,"display_name":"lant"},"score":0,"creation_date":1689731544,"post_id":76717356,"comment_id":135253728,"body_markdown":"Isn&#39;t A a set of ints ? How `var B = val.Valus.toList()` works?","body":"Isn&#39;t A a set of ints ? How <code>var B = val.Valus.toList()</code> works?"}],"answers":[{"tags":[],"owner":{"account_id":22431811,"reputation":608,"user_id":16637552,"display_name":"Xiaomin Wu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689730238,"creation_date":1689729696,"answer_id":76717376,"question_id":76717356,"body_markdown":"you can utilize the characteristic: Utilization characteristics values are atmost two values or one element or null.\r\n1. new a output list \r\n2. loop on your input list\r\n\r\n    a) if the elem in output list,  del the item in list\r\n\r\n    b) if the elem not in output list, add it to output list\r\n\r\nfinally, the output list will contails all unique elems.\r\n","title":"Finding Unique values in two ArrayLists","body":"<p>you can utilize the characteristic: Utilization characteristics values are atmost two values or one element or null.</p>\n<ol>\n<li><p>new a output list</p>\n</li>\n<li><p>loop on your input list</p>\n<p>a) if the elem in output list,  del the item in list</p>\n<p>b) if the elem not in output list, add it to output list</p>\n</li>\n</ol>\n<p>finally, the output list will contails all unique elems.</p>\n"},{"comments":[{"owner":{"account_id":28758873,"reputation":206,"user_id":22025249,"display_name":"SteveDrippsCentricConsulting"},"score":0,"creation_date":1689948563,"post_id":76731384,"comment_id":135289367,"body_markdown":"+1 to this answer. Finding all the unique values of 2 ArrayLists can&#39;t be done in linear time. To the OP of this question, maybe post some business context of what you are trying to do in one of the Guidewire applications. What do the values in each ArrayList represent in a Guidewire application?","body":"+1 to this answer. Finding all the unique values of 2 ArrayLists can&#39;t be done in linear time. To the OP of this question, maybe post some business context of what you are trying to do in one of the Guidewire applications. What do the values in each ArrayList represent in a Guidewire application?"}],"tags":[],"owner":{"account_id":28287181,"reputation":341,"user_id":21627943,"display_name":"Domenick Doran"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1689866937,"creation_date":1689866362,"answer_id":76731384,"question_id":76717356,"body_markdown":"This is a very confusing question. The title describes it as finding unique values in two arraylists. And then you&#39;re asking for something with a runtime below O(n), which would be linear runtime. There&#39;s no way you&#39;d be able to create such an algorithm, because at the very least you&#39;d have to read every item of both lists once. If you&#39;re looking for something better than O(n^2), that&#39;s definitely doable. Just add the contents of both arrays to a new array. Then quicksort the array (n log n). Then traverse the array looking for non-repeated values, and you&#39;ve found the uniques, and you&#39;ve got O((n log n) + 3n), which will scale much better than O(n^2)\r\n\r\nThe algorithm you posted doesn&#39;t solve the problem you posed at all. You&#39;ve got A as an array (not an arraylist) and then you&#39;ve got this weird compilation error:\r\n\r\nvar B = val.Valus.toList()\r\n\r\nwhere val is an int, and so val.Valus will not work.\r\n\r\nThe algorithm you propose, even if it works, wouldn&#39;t be O(n), it&#39;d be O(n^2). I submit that there is no algorithm which would solve this problem that would work in better than linear time.","title":"Finding Unique values in two ArrayLists","body":"<p>This is a very confusing question. The title describes it as finding unique values in two arraylists. And then you're asking for something with a runtime below O(n), which would be linear runtime. There's no way you'd be able to create such an algorithm, because at the very least you'd have to read every item of both lists once. If you're looking for something better than O(n^2), that's definitely doable. Just add the contents of both arrays to a new array. Then quicksort the array (n log n). Then traverse the array looking for non-repeated values, and you've found the uniques, and you've got O((n log n) + 3n), which will scale much better than O(n^2)</p>\n<p>The algorithm you posted doesn't solve the problem you posed at all. You've got A as an array (not an arraylist) and then you've got this weird compilation error:</p>\n<p>var B = val.Valus.toList()</p>\n<p>where val is an int, and so val.Valus will not work.</p>\n<p>The algorithm you propose, even if it works, wouldn't be O(n), it'd be O(n^2). I submit that there is no algorithm which would solve this problem that would work in better than linear time.</p>\n"}],"owner":{"account_id":6961607,"reputation":2054,"user_id":5340833,"display_name":"Py-Coder"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":132,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"answer_count":2,"score":-3,"last_activity_date":1689866937,"creation_date":1689729140,"question_id":76717356,"body_markdown":"For Example \r\n`A = [10010,10020,99948]`\r\n and each element of A List possible values are  atmost two values or one element or null.\r\n\r\nyou can take below is B list,\r\n\r\n&gt;  - 10010 = []. --&gt; expected output is 10010\r\n&gt;  - 10020 =[10020,10020] -&gt; expected output is null\r\n&gt;  - 99948 = [99948,99948] -&gt; expected output is null\r\n\r\nso final output should be 10010.\r\n\r\nMyCode is working fine but i need better solution below the O(n).\r\n\r\n    var list = new ArrayList()\r\n    for ( val in A){\r\n       var B = val.Valus.toList()\r\n       if ( not B.contain(val)){\r\n           list.add(val)\r\n        }\r\n    }\r\nHere output is : 10010\r\n\r\nif A has 2000+ values it performance down , can be do better?\r\n\r\n    \r\n\r\n\r\n","title":"Finding Unique values in two ArrayLists","body":"<p>For Example\n<code>A = [10010,10020,99948]</code>\nand each element of A List possible values are  atmost two values or one element or null.</p>\n<p>you can take below is B list,</p>\n<blockquote>\n<ul>\n<li>10010 = []. --&gt; expected output is 10010</li>\n<li>10020 =[10020,10020] -&gt; expected output is null</li>\n<li>99948 = [99948,99948] -&gt; expected output is null</li>\n</ul>\n</blockquote>\n<p>so final output should be 10010.</p>\n<p>MyCode is working fine but i need better solution below the O(n).</p>\n<pre><code>var list = new ArrayList()\nfor ( val in A){\n   var B = val.Valus.toList()\n   if ( not B.contain(val)){\n       list.add(val)\n    }\n}\n</code></pre>\n<p>Here output is : 10010</p>\n<p>if A has 2000+ values it performance down , can be do better?</p>\n"},{"tags":["java","kubernetes","quarkus"],"answers":[{"tags":[],"owner":{"account_id":3568344,"reputation":639,"user_id":2979325,"display_name":"Serkan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689866910,"creation_date":1689866910,"answer_id":76731450,"question_id":76708657,"body_markdown":"Remove the @Scheduled from your app and deploy a CronJob in Kubernetes which makes a REST call to your app. \r\n\r\nOr, if you don’t want this solution, then use  [ShedLock][1] which also has support for Quarkus now. \r\n\r\n\r\n  [1]: https://github.com/lukas-krecan/ShedLock#cdi-integration","title":"Snychronise 2 pods in Kubernetes","body":"<p>Remove the @Scheduled from your app and deploy a CronJob in Kubernetes which makes a REST call to your app.</p>\n<p>Or, if you don’t want this solution, then use  <a href=\"https://github.com/lukas-krecan/ShedLock#cdi-integration\" rel=\"nofollow noreferrer\">ShedLock</a> which also has support for Quarkus now.</p>\n"}],"owner":{"account_id":21805279,"reputation":501,"user_id":16103555,"display_name":"Toni26"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1689866910,"creation_date":1689636062,"question_id":76708657,"body_markdown":"we have 2 pods running which has a method starting at the same time(has a scheduler annotation).\r\nSo we get a brutal race condition.\r\nI don&#39;t see any way to prevent the race condition. Pessmistic Locking makes sense\r\nwithin the same process. But we have 2 pods. I only see the way to have the one pod run a little bit later than the other pod. But I don&#39;t know if you can configure that some way.","title":"Snychronise 2 pods in Kubernetes","body":"<p>we have 2 pods running which has a method starting at the same time(has a scheduler annotation).\nSo we get a brutal race condition.\nI don't see any way to prevent the race condition. Pessmistic Locking makes sense\nwithin the same process. But we have 2 pods. I only see the way to have the one pod run a little bit later than the other pod. But I don't know if you can configure that some way.</p>\n"},{"tags":["java","jms","ibm-mq","java-ee-7"],"answers":[{"comments":[{"owner":{"account_id":2661359,"reputation":171,"user_id":5450241,"accept_rate":80,"display_name":"J&#246;rn"},"score":0,"creation_date":1689956203,"post_id":76731421,"comment_id":135290897,"body_markdown":"Yes indeed I use such a logic. Does that mean my MDB has no chance to report from which queue the message came from? Can I instruct MQ to add that JMS destination to messages?","body":"Yes indeed I use such a logic. Does that mean my MDB has no chance to report from which queue the message came from? Can I instruct MQ to add that JMS destination to messages?"}],"tags":[],"owner":{"account_id":7206986,"reputation":4285,"user_id":5502306,"display_name":"chughts"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689866677,"creation_date":1689866677,"answer_id":76731421,"question_id":76728485,"body_markdown":"I guess that you are using logic akin to\r\n\r\n```Java\r\n        try {\r\n            Destination jmsDestination = message.getJMSDestination();\r\n            if (jmsDestination != null) {\r\n                q = ((Queue) jmsDestination).getQueueName();\r\n                System.out.println(formatTime() + &quot; JMS message received by from queue: &quot; + q);\r\n            } else {\r\n                System.out.println(formatTime() + &quot; MQ message received&quot;);\r\n            }\r\n        } catch (JMSRuntimeException | JMSException e) {\r\n            msgErr = &quot; ERROR: JMS error getting destination: &quot; + e.getLocalizedMessage();\r\n            throw new RuntimeException(msgErr, e);\r\n        }\r\n```\r\n\r\nIn which case a null destination indicates that the message didn&#39;t come from a JMS application. IE. if the sender application was a Node.js making use of the MQI API then you would expect to see JMSDestination as null.\r\n\r\n\r\n","title":"javax.jms.Message from IBM MQ has &quot;null&quot; JMSDestination","body":"<p>I guess that you are using logic akin to</p>\n<pre><code>        try {\n            Destination jmsDestination = message.getJMSDestination();\n            if (jmsDestination != null) {\n                q = ((Queue) jmsDestination).getQueueName();\n                System.out.println(formatTime() + &quot; JMS message received by from queue: &quot; + q);\n            } else {\n                System.out.println(formatTime() + &quot; MQ message received&quot;);\n            }\n        } catch (JMSRuntimeException | JMSException e) {\n            msgErr = &quot; ERROR: JMS error getting destination: &quot; + e.getLocalizedMessage();\n            throw new RuntimeException(msgErr, e);\n        }\n</code></pre>\n<p>In which case a null destination indicates that the message didn't come from a JMS application. IE. if the sender application was a Node.js making use of the MQI API then you would expect to see JMSDestination as null.</p>\n"}],"owner":{"account_id":2661359,"reputation":171,"user_id":5450241,"accept_rate":80,"display_name":"J&#246;rn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":112,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689866677,"creation_date":1689845332,"question_id":76728485,"body_markdown":"When consuming a javax.jms.Message from IBM MQ I want to log the message id and destination it came from like this: \r\n\r\n    Received [ID:...] from [...]\r\n\r\nFor some messages this works fine and looks like this:\r\n\r\n    Received [ID:414d5120465030303030374920202020a948b66401d61440] from [queue://MYQMGR/MYQ] \r\n\r\nBut for some other queues on the same queue manager Message.getJMSDestination() returns null, and I get this:\r\n\r\n    Received [ID:414d512053415a324d5131452020202063c3b3fc9c229718] from [null]\r\n\r\n- What is the reason for this? \r\n- What can I do to fix it?\r\n\r\n\r\nDetails about my context:\r\n- JEE7, Java 8\r\n- MDB listens to MQ queue (onMessage(javax.jms.Message))\r\n","title":"javax.jms.Message from IBM MQ has &quot;null&quot; JMSDestination","body":"<p>When consuming a javax.jms.Message from IBM MQ I want to log the message id and destination it came from like this:</p>\n<pre><code>Received [ID:...] from [...]\n</code></pre>\n<p>For some messages this works fine and looks like this:</p>\n<pre><code>Received [ID:414d5120465030303030374920202020a948b66401d61440] from [queue://MYQMGR/MYQ] \n</code></pre>\n<p>But for some other queues on the same queue manager Message.getJMSDestination() returns null, and I get this:</p>\n<pre><code>Received [ID:414d512053415a324d5131452020202063c3b3fc9c229718] from [null]\n</code></pre>\n<ul>\n<li>What is the reason for this?</li>\n<li>What can I do to fix it?</li>\n</ul>\n<p>Details about my context:</p>\n<ul>\n<li>JEE7, Java 8</li>\n<li>MDB listens to MQ queue (onMessage(javax.jms.Message))</li>\n</ul>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1689866004,"post_id":76731298,"comment_id":135276856,"body_markdown":"Edit your question and remove everything that isn&#39;t useful. Such as big ascii-art arrows.","body":"Edit your question and remove everything that isn&#39;t useful. Such as big ascii-art arrows."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1689890737,"post_id":76731298,"comment_id":135281366,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":29057999,"reputation":1,"user_id":22259368,"display_name":"Ranasinghe R.P.C.P"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689866380,"creation_date":1689866380,"answer_id":76731392,"question_id":76731298,"body_markdown":"hey I find the issue I used type def to store many phone numbers with json format and inside I only use type like below  \r\n \r\n    @Type(type = &quot;json&quot;)\r\n    @Column(name = &quot;mobile&quot;)\r\n\r\nafter I mention the inside @Column I add columndefinition=json after adding that my problem fix \r\n\r\n    @Type(type = &quot;json&quot;)\r\n    @Column(name = &quot;mobile&quot;,columnDefinition = &quot;json&quot;)\r\n\r\n\r\n\r\n\r\n","title":"&#39;entityManagerFactory&#39; defined in class path resource","body":"<p>hey I find the issue I used type def to store many phone numbers with json format and inside I only use type like below</p>\n<pre><code>@Type(type = &quot;json&quot;)\n@Column(name = &quot;mobile&quot;)\n</code></pre>\n<p>after I mention the inside @Column I add columndefinition=json after adding that my problem fix</p>\n<pre><code>@Type(type = &quot;json&quot;)\n@Column(name = &quot;mobile&quot;,columnDefinition = &quot;json&quot;)\n</code></pre>\n"}],"owner":{"account_id":29057999,"reputation":1,"user_id":22259368,"display_name":"Ranasinghe R.P.C.P"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1689866380,"creation_date":1689865752,"question_id":76731298,"body_markdown":"&quot;C:\\Program Files\\Java\\jdk1.8.0_321\\bin\\java.exe&quot; -XX:TieredStopAtLevel=1 -noverify -Dspring.output.ansi.enabled=always &quot;-javaagent:C:\\Program Files\\JetBrains\\IntelliJ IDEA 2021.2.3\\lib\\idea_rt.jar=49508:C:\\Program Files\\JetBrains\\IntelliJ IDEA 2021.2.3\\bin&quot; -Dcom.sun.management.jmxremote -Dspring.jmx.enabled=true -Dspring.liveBeansView.mbeanDomain -Dspring.application.admin.enabled=true -Dfile.encoding=UTF-8 -classpath &quot;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\charsets.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\deploy.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\ext\\access-bridge-64.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\ext\\cldrdata.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\ext\\dnsns.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\ext\\jaccess.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\ext\\jfxrt.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\ext\\localedata.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\ext\\nashorn.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\ext\\sunec.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\ext\\sunjce_provider.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\ext\\sunmscapi.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\ext\\sunpkcs11.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\ext\\zipfs.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\javaws.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\jce.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\jfr.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\jfxswt.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\jsse.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\management-agent.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\plugin.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\resources.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\rt.jar;C:\\Users\\USER\\Desktop\\spring boot my study\\customer\\target\\classes;C:\\Users\\USER\\.m2\\repository\\org\\springframework\\boot\\spring-boot-starter-data-jpa\\2.7.13\\spring-boot-starter-data-jpa-2.7.13.jar;C:\\Users\\USER\\.m2\\repository\\org\\springframework\\boot\\spring-boot-starter-aop\\2.7.13\\spring-boot-starter-aop-2.7.13.jar;C:\\Users\\USER\\.m2\\repository\\org\\springframework\\spring-aop\\5.3.28\\spring-aop-5.3.28.jar;C:\\Users\\USER\\.m2\\repository\\org\\aspectj\\aspectjweaver\\1.9.7\\aspectjweaver-1.9.7.jar;C:\\Users\\USER\\.m2\\repository\\org\\springframework\\boot\\spring-boot-starter-jdbc\\2.7.13\\spring-boot-starter-jdbc-2.7.13.jar;C:\\Users\\USER\\.m2\\repository\\com\\zaxxer\\HikariCP\\4.0.3\\HikariCP-4.0.3.jar;C:\\Users\\USER\\.m2\\repository\\org\\springframework\\spring-jdbc\\5.3.28\\spring-jdbc-5.3.28.jar;C:\\Users\\USER\\.m2\\repository\\jakarta\\transaction\\jakarta.transaction-api\\1.3.3\\jakarta.transaction-api-1.3.3.jar;C:\\Users\\USER\\.m2\\repository\\jakarta\\persistence\\jakarta.persistence-api\\2.2.3\\jakarta.persistence-api-2.2.3.jar;C:\\Users\\USER\\.m2\\repository\\org\\hibernate\\hibernate-core\\5.6.15.Final\\hibernate-core-5.6.15.Final.jar;C:\\Users\\USER\\.m2\\repository\\org\\jboss\\logging\\jboss-logging\\3.4.3.Final\\jboss-logging-3.4.3.Final.jar;C:\\Users\\USER\\.m2\\repository\\net\\bytebuddy\\byte-buddy\\1.12.23\\byte-buddy-1.12.23.jar;C:\\Users\\USER\\.m2\\repository\\antlr\\antlr\\2.7.7\\antlr-2.7.7.jar;C:\\Users\\USER\\.m2\\repository\\org\\jboss\\jandex\\2.4.2.Final\\jandex-2.4.2.Final.jar;C:\\Users\\USER\\.m2\\repository\\com\\fasterxml\\classmate\\1.5.1\\classmate-1.5.1.jar;C:\\Users\\USER\\.m2\\repository\\org\\hibernate\\common\\hibernate-commons-annotations\\5.1.2.Final\\hibernate-commons-annotations-5.1.2.Final.jar;C:\\Users\\USER\\.m2\\repository\\org\\glassfish\\jaxb\\jaxb-runtime\\2.3.8\\jaxb-runtime-2.3.8.jar;C:\\Users\\USER\\.m2\\repository\\org\\glassfish\\jaxb\\txw2\\2.3.8\\txw2-2.3.8.jar;C:\\Users\\USER\\.m2\\repository\\com\\sun\\istack\\istack-commons-runtime\\3.0.12\\istack-commons-runtime-3.0.12.jar;C:\\Users\\USER\\.m2\\repository\\com\\sun\\activation\\jakarta.activation\\1.2.2\\jakarta.activation-1.2.2.jar;C:\\Users\\USER\\.m2\\repository\\org\\springframework\\data\\spring-data-jpa\\2.7.13\\spring-data-jpa-2.7.13.jar;C:\\Users\\USER\\.m2\\repository\\org\\springframework\\data\\spring-data-commons\\2.7.13\\spring-data-commons-2.7.13.jar;C:\\Users\\USER\\.m2\\repository\\org\\springframework\\spring-orm\\5.3.28\\spring-orm-5.3.28.jar;C:\\Users\\USER\\.m2\\repository\\org\\springframework\\spring-context\\5.3.28\\spring-context-5.3.28.jar;C:\\Users\\USER\\.m2\\repository\\org\\springframework\\spring-tx\\5.3.28\\spring-tx-5.3.28.jar;C:\\Users\\USER\\.m2\\repository\\org\\springframework\\spring-beans\\5.3.28\\spring-beans-5.3.28.jar;C:\\Users\\USER\\.m2\\repository\\org\\slf4j\\slf4j-api\\1.7.36\\slf4j-api-1.7.36.jar;C:\\Users\\USER\\.m2\\repository\\org\\springframework\\spring-aspects\\5.3.28\\spring-aspects-5.3.28.jar;C:\\Users\\USER\\.m2\\repository\\org\\springframework\\boot\\spring-boot-starter-web\\2.7.13\\spring-boot-starter-web-2.7.13.jar;C:\\Users\\USER\\.m2\\repository\\org\\springframework\\boot\\spring-boot-starter\\2.7.13\\spring-boot-starter-2.7.13.jar;C:\\Users\\USER\\.m2\\repository\\org\\springframework\\boot\\spring-boot\\2.7.13\\spring-boot-2.7.13.jar;C:\\Users\\USER\\.m2\\repository\\org\\springframework\\boot\\spring-boot-autoconfigure\\2.7.13\\spring-boot-autoconfigure-2.7.13.jar;C:\\Users\\USER\\.m2\\repository\\org\\springframework\\boot\\spring-boot-starter-logging\\2.7.13\\spring-boot-starter-logging-2.7.13.jar;C:\\Users\\USER\\.m2\\repository\\ch\\qos\\logback\\logback-classic\\1.2.12\\logback-classic-1.2.12.jar;C:\\Users\\USER\\.m2\\repository\\ch\\qos\\logback\\logback-core\\1.2.12\\logback-core-1.2.12.jar;C:\\Users\\USER\\.m2\\repository\\org\\apache\\logging\\log4j\\log4j-to-slf4j\\2.17.2\\log4j-to-slf4j-2.17.2.jar;C:\\Users\\USER\\.m2\\repository\\org\\apache\\logging\\log4j\\log4j-api\\2.17.2\\log4j-api-2.17.2.jar;C:\\Users\\USER\\.m2\\repository\\org\\slf4j\\jul-to-slf4j\\1.7.36\\jul-to-slf4j-1.7.36.jar;C:\\Users\\USER\\.m2\\repository\\org\\yaml\\snakeyaml\\1.30\\snakeyaml-1.30.jar;C:\\Users\\USER\\.m2\\repository\\org\\springframework\\boot\\spring-boot-starter-json\\2.7.13\\spring-boot-starter-json-2.7.13.jar;C:\\Users\\USER\\.m2\\repository\\com\\fasterxml\\jackson\\core\\jackson-databind\\2.13.5\\jackson-databind-2.13.5.jar;C:\\Users\\USER\\.m2\\repository\\com\\fasterxml\\jackson\\core\\jackson-annotations\\2.13.5\\jackson-annotations-2.13.5.jar;C:\\Users\\USER\\.m2\\repository\\com\\fasterxml\\jackson\\core\\jackson-core\\2.13.5\\jackson-core-2.13.5.jar;C:\\Users\\USER\\.m2\\repository\\com\\fasterxml\\jackson\\datatype\\jackson-datatype-jdk8\\2.13.5\\jackson-datatype-jdk8-2.13.5.jar;C:\\Users\\USER\\.m2\\repository\\com\\fasterxml\\jackson\\datatype\\jackson-datatype-jsr310\\2.13.5\\jackson-datatype-jsr310-2.13.5.jar;C:\\Users\\USER\\.m2\\repository\\com\\fasterxml\\jackson\\module\\jackson-module-parameter-names\\2.13.5\\jackson-module-parameter-names-2.13.5.jar;C:\\Users\\USER\\.m2\\repository\\org\\springframework\\spring-web\\5.3.28\\spring-web-5.3.28.jar;C:\\Users\\USER\\.m2\\repository\\org\\springframework\\spring-webmvc\\5.3.28\\spring-webmvc-5.3.28.jar;C:\\Users\\USER\\.m2\\repository\\org\\springframework\\spring-expression\\5.3.28\\spring-expression-5.3.28.jar;C:\\Users\\USER\\.m2\\repository\\com\\mysql\\mysql-connector-j\\8.0.33\\mysql-connector-j-8.0.33.jar;C:\\Users\\USER\\.m2\\repository\\org\\projectlombok\\lombok\\1.18.28\\lombok-1.18.28.jar;C:\\Users\\USER\\.m2\\repository\\org\\springframework\\boot\\spring-boot-starter-tomcat\\2.7.13\\spring-boot-starter-tomcat-2.7.13.jar;C:\\Users\\USER\\.m2\\repository\\jakarta\\annotation\\jakarta.annotation-api\\1.3.5\\jakarta.annotation-api-1.3.5.jar;C:\\Users\\USER\\.m2\\repository\\org\\apache\\tomcat\\embed\\tomcat-embed-core\\9.0.76\\tomcat-embed-core-9.0.76.jar;C:\\Users\\USER\\.m2\\repository\\org\\apache\\tomcat\\embed\\tomcat-embed-el\\9.0.76\\tomcat-embed-el-9.0.76.jar;C:\\Users\\USER\\.m2\\repository\\org\\apache\\tomcat\\embed\\tomcat-embed-websocket\\9.0.76\\tomcat-embed-websocket-9.0.76.jar;C:\\Users\\USER\\.m2\\repository\\jakarta\\xml\\bind\\jakarta.xml.bind-api\\2.3.3\\jakarta.xml.bind-api-2.3.3.jar;C:\\Users\\USER\\.m2\\repository\\jakarta\\activation\\jakarta.activation-api\\1.2.2\\jakarta.activation-api-1.2.2.jar;C:\\Users\\USER\\.m2\\repository\\org\\springframework\\spring-core\\5.3.28\\spring-core-5.3.28.jar;C:\\Users\\USER\\.m2\\repository\\org\\springframework\\spring-jcl\\5.3.28\\spring-jcl-5.3.28.jar;C:\\Users\\USER\\.m2\\repository\\com\\vladmihalcea\\hibernate-types-5\\2.16.2\\hibernate-types-5-2.16.2.jar&quot; customer.example.customer.CustomerApplication\r\n\r\n  .   ____          _            __ _ _\r\n /\\\\ / ___&#39;_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\r\n( ( )\\___ | &#39;_ | &#39;_| | &#39;_ \\/ _` | \\ \\ \\ \\\r\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\r\n  &#39;  |____| .__|_| |_|_| |_\\__, | / / / /\r\n =========|_|==============|___/=/_/_/_/\r\n :: Spring Boot ::               (v2.7.13)\r\n\r\n2023-07-20 20:36:04.608  INFO 17756 --- [           main] c.example.customer.CustomerApplication   : Starting CustomerApplication using Java 1.8.0_321 on DESKTOP-PHLKGHM with PID 17756 (C:\\Users\\USER\\Desktop\\spring boot my study\\customer\\target\\classes started by USER in C:\\Users\\USER\\Desktop\\spring boot my study\\customer)\r\n2023-07-20 20:36:04.616  INFO 17756 --- [           main] c.example.customer.CustomerApplication   : No active profile set, falling back to 1 default profile: &quot;default&quot;\r\n2023-07-20 20:36:05.611  INFO 17756 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\r\n2023-07-20 20:36:05.624  INFO 17756 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 6 ms. Found 0 JPA repository interfaces.\r\n2023-07-20 20:36:06.121  INFO 17756 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\r\n2023-07-20 20:36:06.143  INFO 17756 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\r\n2023-07-20 20:36:06.143  INFO 17756 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.76]\r\n2023-07-20 20:36:06.321  INFO 17756 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\r\n2023-07-20 20:36:06.321  INFO 17756 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1612 ms\r\n2023-07-20 20:36:06.507  INFO 17756 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]\r\n2023-07-20 20:36:06.560  INFO 17756 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.15.Final\r\n2023-07-20 20:36:06.692  INFO 17756 --- [           main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}\r\n2023-07-20 20:36:06.839  INFO 17756 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\r\n2023-07-20 20:36:07.409  INFO 17756 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.\r\n2023-07-20 20:36:07.424  INFO 17756 --- [           main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect\r\n2023-07-20 20:36:07.446  INFO 17756 --- [           main] Hibernate Types                          : This framework is proudly powered by:\r\n\r\n&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\r\n _    _                           _     _\r\n| |  | |                         (_)   | |\r\n| |__| |_   _ _ __   ___ _ __ ___ _ ___| |_ ___ _ __   ___ ___\r\n|  __  | | | | &#39;_ \\ / _ \\ &#39;__/ __| / __| __/ _ \\ &#39;_ \\ / __/ _ \\\r\n| |  | | |_| | |_) |  __/ |  \\__ \\ \\__ \\ ||  __/ | | | (_|  __/\r\n|_|  |_|\\__, | .__/ \\___|_|  |___/_|___/\\__\\___|_| |_|\\___\\___|\r\n         __/ | |\r\n        |___/|_|\r\n\r\nAt Hypersistence, we only build amazing tools, like Hibernate Types, Flexy Pool, or Hypersistence Optimizer.\r\n\r\nWhat if there were a tool that could automatically detect JPA and Hibernate performance issues?\r\n\r\nHypersistence Optimizer is that tool! For more details, go to: \r\n\r\nhttps://vladmihalcea.com/hypersistence-optimizer/\r\n&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\r\n\r\nHibernate: drop table if exists customer\r\n2023-07-20 20:36:08.048 ERROR 17756 --- [           main] j.LocalContainerEntityManagerFactoryBean : Failed to initialize JPA EntityManagerFactory: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.MappingException: No Dialect mapping for JDBC type: 1111\r\n2023-07-20 20:36:08.048  WARN 17756 --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;entityManagerFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.MappingException: No Dialect mapping for JDBC type: 1111\r\n2023-07-20 20:36:08.048  INFO 17756 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...\r\n2023-07-20 20:36:08.064  INFO 17756 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.\r\n2023-07-20 20:36:08.064  INFO 17756 --- [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\r\n2023-07-20 20:36:08.079  INFO 17756 --- [           main] ConditionEvaluationReportLoggingListener : \r\n\r\nError starting ApplicationContext. To display the conditions report re-run your application with &#39;debug&#39; enabled.\r\n2023-07-20 20:36:08.110 ERROR 17756 --- [           main] o.s.boot.SpringApplication               : Application run failed\r\n\r\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;entityManagerFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.MappingException: No Dialect mapping for JDBC type: 1111\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804) ~[spring-beans-5.3.28.jar:5.3.28]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620) ~[spring-beans-5.3.28.jar:5.3.28]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.28.jar:5.3.28]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.28.jar:5.3.28]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.28.jar:5.3.28]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.28.jar:5.3.28]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.28.jar:5.3.28]\r\n\tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1156) ~[spring-context-5.3.28.jar:5.3.28]\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:910) ~[spring-context-5.3.28.jar:5.3.28]\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.28.jar:5.3.28]\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.13.jar:2.7.13]\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:731) [spring-boot-2.7.13.jar:2.7.13]\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) [spring-boot-2.7.13.jar:2.7.13]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:307) [spring-boot-2.7.13.jar:2.7.13]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1303) [spring-boot-2.7.13.jar:2.7.13]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1292) [spring-boot-2.7.13.jar:2.7.13]\r\n\tat customer.example.customer.CustomerApplication.main(CustomerApplication.java:10) [classes/:na]\r\nCaused by: javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.MappingException: No Dialect mapping for JDBC type: 1111\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:421) ~[spring-orm-5.3.28.jar:5.3.28]\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-5.3.28.jar:5.3.28]\r\n\tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341) ~[spring-orm-5.3.28.jar:5.3.28]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863) ~[spring-beans-5.3.28.jar:5.3.28]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800) ~[spring-beans-5.3.28.jar:5.3.28]\r\n\t... 16 common frames omitted\r\nCaused by: org.hibernate.MappingException: No Dialect mapping for JDBC type: 1111\r\n\tat org.hibernate.dialect.TypeNames.get(TypeNames.java:71) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\r\n\tat org.hibernate.dialect.TypeNames.get(TypeNames.java:103) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\r\n\tat org.hibernate.dialect.Dialect.getTypeName(Dialect.java:404) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\r\n\tat org.hibernate.mapping.Column.getSqlType(Column.java:238) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\r\n\tat org.hibernate.tool.schema.internal.StandardTableExporter.getSqlCreateStrings(StandardTableExporter.java:93) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\r\n\tat org.hibernate.tool.schema.internal.StandardTableExporter.getSqlCreateStrings(StandardTableExporter.java:31) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\r\n\tat org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:326) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\r\n\tat org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:169) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\r\n\tat org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:138) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\r\n\tat org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:124) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\r\n\tat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:168) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\r\n\tat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:85) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\r\n\tat org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:335) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\r\n\tat org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:471) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\r\n\tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1498) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\r\n\tat org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:58) ~[spring-orm-5.3.28.jar:5.3.28]\r\n\tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365) ~[spring-orm-5.3.28.jar:5.3.28]\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-5.3.28.jar:5.3.28]\r\n\t... 20 common frames omitted\r\n\r\n\r\nProcess finished with exit code 1\r\n\r\n\r\ni need to fix this problem ","title":"&#39;entityManagerFactory&#39; defined in class path resource","body":"<p>&quot;C:\\Program Files\\Java\\jdk1.8.0_321\\bin\\java.exe&quot; -XX:TieredStopAtLevel=1 -noverify -Dspring.output.ansi.enabled=always &quot;-javaagent:C:\\Program Files\\JetBrains\\IntelliJ IDEA 2021.2.3\\lib\\idea_rt.jar=49508:C:\\Program Files\\JetBrains\\IntelliJ IDEA 2021.2.3\\bin&quot; -Dcom.sun.management.jmxremote -Dspring.jmx.enabled=true -Dspring.liveBeansView.mbeanDomain -Dspring.application.admin.enabled=true -Dfile.encoding=UTF-8 -classpath &quot;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\charsets.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\deploy.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\ext\\access-bridge-64.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\ext\\cldrdata.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\ext\\dnsns.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\ext\\jaccess.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\ext\\jfxrt.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\ext\\localedata.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\ext\\nashorn.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\ext\\sunec.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\ext\\sunjce_provider.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\ext\\sunmscapi.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\ext\\sunpkcs11.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\ext\\zipfs.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\javaws.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\jce.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\jfr.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\jfxswt.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\jsse.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\management-agent.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\plugin.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\resources.jar;C:\\Program Files\\Java\\jdk1.8.0_321\\jre\\lib\\rt.jar;C:\\Users\\USER\\Desktop\\spring boot my study\\customer\\target\\classes;C:\\Users\\USER.m2\\repository\\org\\springframework\\boot\\spring-boot-starter-data-jpa\\2.7.13\\spring-boot-starter-data-jpa-2.7.13.jar;C:\\Users\\USER.m2\\repository\\org\\springframework\\boot\\spring-boot-starter-aop\\2.7.13\\spring-boot-starter-aop-2.7.13.jar;C:\\Users\\USER.m2\\repository\\org\\springframework\\spring-aop\\5.3.28\\spring-aop-5.3.28.jar;C:\\Users\\USER.m2\\repository\\org\\aspectj\\aspectjweaver\\1.9.7\\aspectjweaver-1.9.7.jar;C:\\Users\\USER.m2\\repository\\org\\springframework\\boot\\spring-boot-starter-jdbc\\2.7.13\\spring-boot-starter-jdbc-2.7.13.jar;C:\\Users\\USER.m2\\repository\\com\\zaxxer\\HikariCP\\4.0.3\\HikariCP-4.0.3.jar;C:\\Users\\USER.m2\\repository\\org\\springframework\\spring-jdbc\\5.3.28\\spring-jdbc-5.3.28.jar;C:\\Users\\USER.m2\\repository\\jakarta\\transaction\\jakarta.transaction-api\\1.3.3\\jakarta.transaction-api-1.3.3.jar;C:\\Users\\USER.m2\\repository\\jakarta\\persistence\\jakarta.persistence-api\\2.2.3\\jakarta.persistence-api-2.2.3.jar;C:\\Users\\USER.m2\\repository\\org\\hibernate\\hibernate-core\\5.6.15.Final\\hibernate-core-5.6.15.Final.jar;C:\\Users\\USER.m2\\repository\\org\\jboss\\logging\\jboss-logging\\3.4.3.Final\\jboss-logging-3.4.3.Final.jar;C:\\Users\\USER.m2\\repository\\net\\bytebuddy\\byte-buddy\\1.12.23\\byte-buddy-1.12.23.jar;C:\\Users\\USER.m2\\repository\\antlr\\antlr\\2.7.7\\antlr-2.7.7.jar;C:\\Users\\USER.m2\\repository\\org\\jboss\\jandex\\2.4.2.Final\\jandex-2.4.2.Final.jar;C:\\Users\\USER.m2\\repository\\com\\fasterxml\\classmate\\1.5.1\\classmate-1.5.1.jar;C:\\Users\\USER.m2\\repository\\org\\hibernate\\common\\hibernate-commons-annotations\\5.1.2.Final\\hibernate-commons-annotations-5.1.2.Final.jar;C:\\Users\\USER.m2\\repository\\org\\glassfish\\jaxb\\jaxb-runtime\\2.3.8\\jaxb-runtime-2.3.8.jar;C:\\Users\\USER.m2\\repository\\org\\glassfish\\jaxb\\txw2\\2.3.8\\txw2-2.3.8.jar;C:\\Users\\USER.m2\\repository\\com\\sun\\istack\\istack-commons-runtime\\3.0.12\\istack-commons-runtime-3.0.12.jar;C:\\Users\\USER.m2\\repository\\com\\sun\\activation\\jakarta.activation\\1.2.2\\jakarta.activation-1.2.2.jar;C:\\Users\\USER.m2\\repository\\org\\springframework\\data\\spring-data-jpa\\2.7.13\\spring-data-jpa-2.7.13.jar;C:\\Users\\USER.m2\\repository\\org\\springframework\\data\\spring-data-commons\\2.7.13\\spring-data-commons-2.7.13.jar;C:\\Users\\USER.m2\\repository\\org\\springframework\\spring-orm\\5.3.28\\spring-orm-5.3.28.jar;C:\\Users\\USER.m2\\repository\\org\\springframework\\spring-context\\5.3.28\\spring-context-5.3.28.jar;C:\\Users\\USER.m2\\repository\\org\\springframework\\spring-tx\\5.3.28\\spring-tx-5.3.28.jar;C:\\Users\\USER.m2\\repository\\org\\springframework\\spring-beans\\5.3.28\\spring-beans-5.3.28.jar;C:\\Users\\USER.m2\\repository\\org\\slf4j\\slf4j-api\\1.7.36\\slf4j-api-1.7.36.jar;C:\\Users\\USER.m2\\repository\\org\\springframework\\spring-aspects\\5.3.28\\spring-aspects-5.3.28.jar;C:\\Users\\USER.m2\\repository\\org\\springframework\\boot\\spring-boot-starter-web\\2.7.13\\spring-boot-starter-web-2.7.13.jar;C:\\Users\\USER.m2\\repository\\org\\springframework\\boot\\spring-boot-starter\\2.7.13\\spring-boot-starter-2.7.13.jar;C:\\Users\\USER.m2\\repository\\org\\springframework\\boot\\spring-boot\\2.7.13\\spring-boot-2.7.13.jar;C:\\Users\\USER.m2\\repository\\org\\springframework\\boot\\spring-boot-autoconfigure\\2.7.13\\spring-boot-autoconfigure-2.7.13.jar;C:\\Users\\USER.m2\\repository\\org\\springframework\\boot\\spring-boot-starter-logging\\2.7.13\\spring-boot-starter-logging-2.7.13.jar;C:\\Users\\USER.m2\\repository\\ch\\qos\\logback\\logback-classic\\1.2.12\\logback-classic-1.2.12.jar;C:\\Users\\USER.m2\\repository\\ch\\qos\\logback\\logback-core\\1.2.12\\logback-core-1.2.12.jar;C:\\Users\\USER.m2\\repository\\org\\apache\\logging\\log4j\\log4j-to-slf4j\\2.17.2\\log4j-to-slf4j-2.17.2.jar;C:\\Users\\USER.m2\\repository\\org\\apache\\logging\\log4j\\log4j-api\\2.17.2\\log4j-api-2.17.2.jar;C:\\Users\\USER.m2\\repository\\org\\slf4j\\jul-to-slf4j\\1.7.36\\jul-to-slf4j-1.7.36.jar;C:\\Users\\USER.m2\\repository\\org\\yaml\\snakeyaml\\1.30\\snakeyaml-1.30.jar;C:\\Users\\USER.m2\\repository\\org\\springframework\\boot\\spring-boot-starter-json\\2.7.13\\spring-boot-starter-json-2.7.13.jar;C:\\Users\\USER.m2\\repository\\com\\fasterxml\\jackson\\core\\jackson-databind\\2.13.5\\jackson-databind-2.13.5.jar;C:\\Users\\USER.m2\\repository\\com\\fasterxml\\jackson\\core\\jackson-annotations\\2.13.5\\jackson-annotations-2.13.5.jar;C:\\Users\\USER.m2\\repository\\com\\fasterxml\\jackson\\core\\jackson-core\\2.13.5\\jackson-core-2.13.5.jar;C:\\Users\\USER.m2\\repository\\com\\fasterxml\\jackson\\datatype\\jackson-datatype-jdk8\\2.13.5\\jackson-datatype-jdk8-2.13.5.jar;C:\\Users\\USER.m2\\repository\\com\\fasterxml\\jackson\\datatype\\jackson-datatype-jsr310\\2.13.5\\jackson-datatype-jsr310-2.13.5.jar;C:\\Users\\USER.m2\\repository\\com\\fasterxml\\jackson\\module\\jackson-module-parameter-names\\2.13.5\\jackson-module-parameter-names-2.13.5.jar;C:\\Users\\USER.m2\\repository\\org\\springframework\\spring-web\\5.3.28\\spring-web-5.3.28.jar;C:\\Users\\USER.m2\\repository\\org\\springframework\\spring-webmvc\\5.3.28\\spring-webmvc-5.3.28.jar;C:\\Users\\USER.m2\\repository\\org\\springframework\\spring-expression\\5.3.28\\spring-expression-5.3.28.jar;C:\\Users\\USER.m2\\repository\\com\\mysql\\mysql-connector-j\\8.0.33\\mysql-connector-j-8.0.33.jar;C:\\Users\\USER.m2\\repository\\org\\projectlombok\\lombok\\1.18.28\\lombok-1.18.28.jar;C:\\Users\\USER.m2\\repository\\org\\springframework\\boot\\spring-boot-starter-tomcat\\2.7.13\\spring-boot-starter-tomcat-2.7.13.jar;C:\\Users\\USER.m2\\repository\\jakarta\\annotation\\jakarta.annotation-api\\1.3.5\\jakarta.annotation-api-1.3.5.jar;C:\\Users\\USER.m2\\repository\\org\\apache\\tomcat\\embed\\tomcat-embed-core\\9.0.76\\tomcat-embed-core-9.0.76.jar;C:\\Users\\USER.m2\\repository\\org\\apache\\tomcat\\embed\\tomcat-embed-el\\9.0.76\\tomcat-embed-el-9.0.76.jar;C:\\Users\\USER.m2\\repository\\org\\apache\\tomcat\\embed\\tomcat-embed-websocket\\9.0.76\\tomcat-embed-websocket-9.0.76.jar;C:\\Users\\USER.m2\\repository\\jakarta\\xml\\bind\\jakarta.xml.bind-api\\2.3.3\\jakarta.xml.bind-api-2.3.3.jar;C:\\Users\\USER.m2\\repository\\jakarta\\activation\\jakarta.activation-api\\1.2.2\\jakarta.activation-api-1.2.2.jar;C:\\Users\\USER.m2\\repository\\org\\springframework\\spring-core\\5.3.28\\spring-core-5.3.28.jar;C:\\Users\\USER.m2\\repository\\org\\springframework\\spring-jcl\\5.3.28\\spring-jcl-5.3.28.jar;C:\\Users\\USER.m2\\repository\\com\\vladmihalcea\\hibernate-types-5\\2.16.2\\hibernate-types-5-2.16.2.jar&quot; customer.example.customer.CustomerApplication</p>\n<p>.   ____          _            __ _ _\n/\\ / <em><em><em>'</em> __ _ <em>(</em>)</em> __  __ _ \\ \\ \\ <br />\n( ( )_</em>_ | '_ | '<em>| | '</em> / <em>` | \\ \\ \\ <br />\n\\/  __<em>)| |</em>)| | | | | || (</em>| |  ) ) ) )\n'  |<strong><em><em>| .__|</em>| |</em>|<em>| |</em>_<em>, | / / / /\n=========|</em>|==============|</strong><em>/=/</em>/<em>/</em>/\n:: Spring Boot ::               (v2.7.13)</p>\n<p>2023-07-20 20:36:04.608  INFO 17756 --- [           main] c.example.customer.CustomerApplication   : Starting CustomerApplication using Java 1.8.0_321 on DESKTOP-PHLKGHM with PID 17756 (C:\\Users\\USER\\Desktop\\spring boot my study\\customer\\target\\classes started by USER in C:\\Users\\USER\\Desktop\\spring boot my study\\customer)\n2023-07-20 20:36:04.616  INFO 17756 --- [           main] c.example.customer.CustomerApplication   : No active profile set, falling back to 1 default profile: &quot;default&quot;\n2023-07-20 20:36:05.611  INFO 17756 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\n2023-07-20 20:36:05.624  INFO 17756 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 6 ms. Found 0 JPA repository interfaces.\n2023-07-20 20:36:06.121  INFO 17756 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\n2023-07-20 20:36:06.143  INFO 17756 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\n2023-07-20 20:36:06.143  INFO 17756 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.76]\n2023-07-20 20:36:06.321  INFO 17756 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\n2023-07-20 20:36:06.321  INFO 17756 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1612 ms\n2023-07-20 20:36:06.507  INFO 17756 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]\n2023-07-20 20:36:06.560  INFO 17756 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.15.Final\n2023-07-20 20:36:06.692  INFO 17756 --- [           main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}\n2023-07-20 20:36:06.839  INFO 17756 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\n2023-07-20 20:36:07.409  INFO 17756 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.\n2023-07-20 20:36:07.424  INFO 17756 --- [           main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect\n2023-07-20 20:36:07.446  INFO 17756 --- [           main] Hibernate Types                          : This framework is proudly powered by:</p>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n<blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>\n<hr />\n<p>| |  | |                         (<em>)   | |\n| |__| |</em>   _ _ __   ___ _ __ ___ _ <em><em><em>| |</em> ___ _ __   ___ ___\n|  __  | | | | '</em> \\ / _ \\ '__/ __| / __| <em><em>/ _ \\ '</em> \\ / __/ _ <br />\n| |  | | |</em>| | |</em>) |  <em><em>/ |  _</em> \\ _</em> \\ ||  <strong>/ | | | (<em>|  __/\n|</em>|  |<em>|_</em>, | .</strong>/ _<strong>|<em>|  |</em></strong>/<em>|</em><strong>/___</strong>|<em>| |</em>|_<strong>_</strong>|\n<strong>/ | |\n|</strong><em>/|</em>|</p>\n<p>At Hypersistence, we only build amazing tools, like Hibernate Types, Flexy Pool, or Hypersistence Optimizer.</p>\n<p>What if there were a tool that could automatically detect JPA and Hibernate performance issues?</p>\n<p>Hypersistence Optimizer is that tool! For more details, go to:</p>\n<p><a href=\"https://vladmihalcea.com/hypersistence-optimizer/\" rel=\"nofollow noreferrer\">https://vladmihalcea.com/hypersistence-optimizer/</a>\n&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;</p>\n<p>Hibernate: drop table if exists customer\n2023-07-20 20:36:08.048 ERROR 17756 --- [           main] j.LocalContainerEntityManagerFactoryBean : Failed to initialize JPA EntityManagerFactory: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.MappingException: No Dialect mapping for JDBC type: 1111\n2023-07-20 20:36:08.048  WARN 17756 --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.MappingException: No Dialect mapping for JDBC type: 1111\n2023-07-20 20:36:08.048  INFO 17756 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...\n2023-07-20 20:36:08.064  INFO 17756 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.\n2023-07-20 20:36:08.064  INFO 17756 --- [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\n2023-07-20 20:36:08.079  INFO 17756 --- [           main] ConditionEvaluationReportLoggingListener :</p>\n<p>Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.\n2023-07-20 20:36:08.110 ERROR 17756 --- [           main] o.s.boot.SpringApplication               : Application run failed</p>\n<p>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.MappingException: No Dialect mapping for JDBC type: 1111\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804) ~[spring-beans-5.3.28.jar:5.3.28]\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620) ~[spring-beans-5.3.28.jar:5.3.28]\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.28.jar:5.3.28]\nat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.28.jar:5.3.28]\nat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.28.jar:5.3.28]\nat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.28.jar:5.3.28]\nat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.28.jar:5.3.28]\nat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1156) ~[spring-context-5.3.28.jar:5.3.28]\nat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:910) ~[spring-context-5.3.28.jar:5.3.28]\nat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.28.jar:5.3.28]\nat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.13.jar:2.7.13]\nat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:731) [spring-boot-2.7.13.jar:2.7.13]\nat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) [spring-boot-2.7.13.jar:2.7.13]\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:307) [spring-boot-2.7.13.jar:2.7.13]\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:1303) [spring-boot-2.7.13.jar:2.7.13]\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:1292) [spring-boot-2.7.13.jar:2.7.13]\nat customer.example.customer.CustomerApplication.main(CustomerApplication.java:10) [classes/:na]\nCaused by: javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.MappingException: No Dialect mapping for JDBC type: 1111\nat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:421) ~[spring-orm-5.3.28.jar:5.3.28]\nat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-5.3.28.jar:5.3.28]\nat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341) ~[spring-orm-5.3.28.jar:5.3.28]\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863) ~[spring-beans-5.3.28.jar:5.3.28]\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800) ~[spring-beans-5.3.28.jar:5.3.28]\n... 16 common frames omitted\nCaused by: org.hibernate.MappingException: No Dialect mapping for JDBC type: 1111\nat org.hibernate.dialect.TypeNames.get(TypeNames.java:71) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\nat org.hibernate.dialect.TypeNames.get(TypeNames.java:103) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\nat org.hibernate.dialect.Dialect.getTypeName(Dialect.java:404) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\nat org.hibernate.mapping.Column.getSqlType(Column.java:238) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\nat org.hibernate.tool.schema.internal.StandardTableExporter.getSqlCreateStrings(StandardTableExporter.java:93) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\nat org.hibernate.tool.schema.internal.StandardTableExporter.getSqlCreateStrings(StandardTableExporter.java:31) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\nat org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:326) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\nat org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:169) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\nat org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:138) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\nat org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:124) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\nat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:168) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\nat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:85) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\nat org.hibernate.internal.SessionFactoryImpl.(SessionFactoryImpl.java:335) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\nat org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:471) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\nat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1498) ~[hibernate-core-5.6.15.Final.jar:5.6.15.Final]\nat org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:58) ~[spring-orm-5.3.28.jar:5.3.28]\nat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365) ~[spring-orm-5.3.28.jar:5.3.28]\nat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-5.3.28.jar:5.3.28]\n... 20 common frames omitted</p>\n<p>Process finished with exit code 1</p>\n<p>i need to fix this problem</p>\n"},{"tags":["java","google-cloud-datastore","datastore"],"answers":[{"comments":[{"owner":{"account_id":3108512,"reputation":13643,"user_id":2630817,"accept_rate":81,"display_name":"Just code"},"score":0,"creation_date":1689912173,"post_id":76731346,"comment_id":135283100,"body_markdown":"Thank you for the response, does objectify makes it easy to use with Google Datastore?","body":"Thank you for the response, does objectify makes it easy to use with Google Datastore?"}],"tags":[],"owner":{"account_id":127461,"reputation":2848,"user_id":7644371,"display_name":"Jim Morrison"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689866078,"creation_date":1689866078,"answer_id":76731346,"question_id":76717856,"body_markdown":"It looks like you are looking for an ODM like [Objectify](https://github.com/objectify/objectify) or [Spring Data for Datastore](https://cloud.spring.io/spring-cloud-static/Greenwich.RC2/multi/multi__spring_data_cloud_datastore.html).","title":"Google Datastore convert POCO to Entity","body":"<p>It looks like you are looking for an ODM like <a href=\"https://github.com/objectify/objectify\" rel=\"nofollow noreferrer\">Objectify</a> or <a href=\"https://cloud.spring.io/spring-cloud-static/Greenwich.RC2/multi/multi__spring_data_cloud_datastore.html\" rel=\"nofollow noreferrer\">Spring Data for Datastore</a>.</p>\n"}],"owner":{"account_id":3108512,"reputation":13643,"user_id":2630817,"accept_rate":81,"display_name":"Just code"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76731346,"answer_count":1,"score":0,"last_activity_date":1689866078,"creation_date":1689738276,"question_id":76717856,"body_markdown":"I am using Google Datastore as DB.\r\nThis is the code I have been using.\r\n\r\n    \r\n    DatastoreService datastore = getDataStoreService();\r\n    Key rootKey = getRootKey(identity, entityTypeEnum);\r\n\r\nThe problem is for the entire solution to put any entity I have to use\r\n\r\n    Entity entity = getOrCreateEntity(EntityTypeEnum.AdminData);\r\n    entity.setProperty(Constants.ID, auditEntry.getId());\r\n    entity.setProperty(Constants.APPNAME, auditEntry.getId());\r\n    getDataStoreService().put(entity);\r\n\r\nWhat I want is there any way we can use generics here? or any entity framework kind of framework which we can use for entire application.\r\n\r\nSo, convert POCO class to Entity while storing and retrieving?\r\n\r\nI could not find any help from GCP documents.","title":"Google Datastore convert POCO to Entity","body":"<p>I am using Google Datastore as DB.\nThis is the code I have been using.</p>\n<pre><code>DatastoreService datastore = getDataStoreService();\nKey rootKey = getRootKey(identity, entityTypeEnum);\n</code></pre>\n<p>The problem is for the entire solution to put any entity I have to use</p>\n<pre><code>Entity entity = getOrCreateEntity(EntityTypeEnum.AdminData);\nentity.setProperty(Constants.ID, auditEntry.getId());\nentity.setProperty(Constants.APPNAME, auditEntry.getId());\ngetDataStoreService().put(entity);\n</code></pre>\n<p>What I want is there any way we can use generics here? or any entity framework kind of framework which we can use for entire application.</p>\n<p>So, convert POCO class to Entity while storing and retrieving?</p>\n<p>I could not find any help from GCP documents.</p>\n"},{"tags":["java","spring","spring-boot","resttemplate","apache-httpclient-5.x"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1689866131,"post_id":76731313,"comment_id":135276894,"body_markdown":"Solution seems simple - if it works without, just don&#39;t use `HttpComponentsClientHttpRequestFactory`","body":"Solution seems simple - if it works without, just don&#39;t use <code>HttpComponentsClientHttpRequestFactory</code>"},{"owner":{"account_id":8732133,"reputation":41,"user_id":6531809,"display_name":"vikas"},"score":0,"creation_date":1689866602,"post_id":76731313,"comment_id":135277026,"body_markdown":"@Jorn i have given just for reference new  object of HttpComponentsClientHttpRequestFactory, in real scenerio we are using connection pooling and timeouts with HttpComponentsClientHttpRequestFactory.So we cant really remove this requestfactory","body":"@Jorn i have given just for reference new  object of HttpComponentsClientHttpRequestFactory, in real scenerio we are using connection pooling and timeouts with HttpComponentsClientHttpRequestFactory.So we cant really remove this requestfactory"},{"owner":{"account_id":8732133,"reputation":41,"user_id":6531809,"display_name":"vikas"},"score":0,"creation_date":1689866747,"post_id":76731313,"comment_id":135277064,"body_markdown":"How come 2 requestfactories making difference in rest api get calls.default is simplerequestfactory where as ours is HttpComponentsClientHttpRequestFactory","body":"How come 2 requestfactories making difference in rest api get calls.default is simplerequestfactory where as ours is HttpComponentsClientHttpRequestFactory"},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1689866861,"post_id":76731313,"comment_id":135277097,"body_markdown":"Well, they clearly produce different requests. You&#39;ll need to figure out what about the request is different.","body":"Well, they clearly produce different requests. You&#39;ll need to figure out what about the request is different."},{"owner":{"account_id":8732133,"reputation":41,"user_id":6531809,"display_name":"vikas"},"score":0,"creation_date":1689867068,"post_id":76731313,"comment_id":135277159,"body_markdown":"@jorn The request is a simple http get request accessible by browser and postman too.Its just a url which dont expect any headers or parameters.what should i compare in requestfactories?Also same call and same code works fine prior to upgrade to spring6 and springboot3.x","body":"@jorn The request is a simple http get request accessible by browser and postman too.Its just a url which dont expect any headers or parameters.what should i compare in requestfactories?Also same call and same code works fine prior to upgrade to spring6 and springboot3.x"}],"owner":{"account_id":8732133,"reputation":41,"user_id":6531809,"display_name":"vikas"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":105,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1689865868,"creation_date":1689865868,"question_id":76731313,"body_markdown":"When i use new instance of resttemplate like,\r\n&#39;&#39;&#39; RestTemplate r = new RestTemplate();&#39;&#39;&#39;\r\n\r\nAnd hit my service,i get success.\r\nBut the moment i add,\r\n\r\n&#39;&#39;&#39;Resttemplate r = new Resttemplate();\r\nr.setRequestfactory(new HttpComponentsClientHttpRequestFactory());&#39;&#39;&#39;\r\nI start getting 400 bad request in **get calls** while **post calls still working**.\r\nI am using spring 6 and jdk 17 and apache httpclient5.\r\nPreviously with spring 5.x and apache client 4,it was working fine.\r\n","title":"RestTemplate 400 error for get request spring 6 apache httpclient5","body":"<p>When i use new instance of resttemplate like,\n''' RestTemplate r = new RestTemplate();'''</p>\n<p>And hit my service,i get success.\nBut the moment i add,</p>\n<p>'''Resttemplate r = new Resttemplate();\nr.setRequestfactory(new HttpComponentsClientHttpRequestFactory());'''\nI start getting 400 bad request in <strong>get calls</strong> while <strong>post calls still working</strong>.\nI am using spring 6 and jdk 17 and apache httpclient5.\nPreviously with spring 5.x and apache client 4,it was working fine.</p>\n"},{"tags":["java","spring-boot","feign"],"owner":{"account_id":1801257,"reputation":8969,"user_id":1639556,"accept_rate":79,"display_name":"Leos Literak"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689865683,"creation_date":1689865331,"question_id":76731226,"body_markdown":"My code:\r\n\r\n    @PostMapping(path = &quot;/upload&quot;,\r\n            consumes = MediaType.MULTIPART_FORM_DATA_VALUE,\r\n            produces = MediaType.TEXT_PLAIN_VALUE)\r\n    String upload(@RequestHeader(AUTH_TOKEN) String bearerToken,\r\n                  @RequestHeader(&quot;X-Requested-By&quot;) String reqBy,\r\n                  @RequestPart(&quot;a&quot;) MultipartFile attributes,\r\n                  @RequestPart(&quot;f&quot;) MultipartFile file);\r\n\r\nThe `attributes` MultiPartFile has the content type `application/json`, the `file` is `text/plain`.\r\n\r\n    @Bean\r\n    @Primary\r\n    @Scope(&quot;prototype&quot;)\r\n    public Encoder feignFormEncoder() {\r\n        return new SpringFormEncoder();\r\n    }\r\n\r\n    @Bean\r\n    feign.Logger.Level feignLoggerLevel() {\r\n        return feign.Logger.Level.FULL;\r\n    }\r\n\r\n    @Bean\r\n    public Encoder multipartFormEncoder() {\r\n        return new SpringFormEncoder(new SpringEncoder(new ObjectFactory&lt;HttpMessageConverters&gt;() {\r\n            @Override\r\n            public HttpMessageConverters getObject() throws BeansException {\r\n                return new HttpMessageConverters(new RestTemplate().getMessageConverters());\r\n            }\r\n        }));\r\n    }\r\n\r\nPom.xml contains:\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;io.github.openfeign.form&lt;/groupId&gt;\r\n      &lt;artifactId&gt;feign-form-spring&lt;/artifactId&gt;\r\n      &lt;version&gt;3.8.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\nThese are logs:\r\n\r\n    m.m.a.RequestResponseBodyMethodProcessor : Using &#39;application/json&#39;, given [*/*] and supported [application/json, application/*+json, application/cbor]\r\n    m.m.a.RequestResponseBodyMethodProcessor : Writing [ActionResult [success=false, errorMsg=, data=null]]\r\n    o.s.web.servlet.DispatcherServlet        : No view rendering, null ModelAndView returned.\r\n    o.s.web.servlet.DispatcherServlet        : Completed 200 OK, headers={masked}\r\n    s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to FileOperationController#upload(MultipartFile, List)\r\n    o.s.web.servlet.DispatcherServlet        : POST &quot;/manager/upload&quot;, parameters={multipart}, headers={masked} in DispatcherServlet &#39;dispatcherServlet&#39;\r\n    s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to FileOperationController#upload(MultipartFile, List)\r\n    o.s.web.method.HandlerMethod             : Arguments: [org.springframework.web.multipart.support.StandardMultipartHttpServletRequest$StandardMultipartFile@3435e994, [org.springframework.web.multipart.support.StandardMultipartHttpServletRequest$StandardMultipartFile@3af20162]]\r\n    .b.s.l.c.f.ServiceFeignClient : [ServiceFeignClient#upload] ---&gt; POST https://example.com:8443/upload HTTP/1.1\r\n    .b.s.l.c.f.ServiceFeignClient : [ServiceFeignClient#upload] Accept: text/plain\r\n    .b.s.l.c.f.ServiceFeignClient : [ServiceFeignClient#upload] Authorization: Bearer eyJgIw\r\n    .b.s.l.c.f.ServiceFeignClient : [ServiceFeignClient#upload] Content-Length: 762\r\n    .b.s.l.c.f.ServiceFeignClient : [ServiceFeignClient#upload] Content-Type: multipart/form-data; charset=UTF-8; boundary=18973c0df55\r\n    .b.s.l.c.f.ServiceFeignClient : [ServiceFeignClient#upload] X-Requested-By: User\r\n    .b.s.l.c.f.ServiceFeignClient : [ServiceFeignClient#upload] \r\n    .b.s.l.c.f.ServiceFeignClient : [ServiceFeignClient#upload] Binary data\r\n    .b.s.l.c.f.ServiceFeignClient : [ServiceFeignClient#upload] ---&gt; END HTTP (762-byte body)\r\n    .b.s.l.c.f.ServiceFeignClient : [ServiceFeignClient#upload] &lt;--- HTTP/1.1 406 Not Acceptable (368ms)\r\n\r\nThis is what I want to send:\r\n\r\n    ------1890be27dba\r\n    Content-Disposition: form-data; name=&quot;a&quot;; filename=&quot;blob&quot;\r\n    Content-Type: application/json\r\n    \r\n     \r\n    \r\n    {&quot;values&quot;:[&quot;test123&quot;]}\r\n    ------1890be27dba\r\n    Content-Disposition: form-data; name=&quot;f&quot;; filename=&quot;sample.txt&quot;\r\n    Content-Type:text/plain\r\n    \r\n     \r\n    \r\n    test\r\n    ------1890be27dba--\r\n\r\nThe log does not contain two mime types, but some binary data without the boundary. Where is the problem? Thanks.","title":"How to send multiple mime parts in body with feign","body":"<p>My code:</p>\n<pre><code>@PostMapping(path = &quot;/upload&quot;,\n        consumes = MediaType.MULTIPART_FORM_DATA_VALUE,\n        produces = MediaType.TEXT_PLAIN_VALUE)\nString upload(@RequestHeader(AUTH_TOKEN) String bearerToken,\n              @RequestHeader(&quot;X-Requested-By&quot;) String reqBy,\n              @RequestPart(&quot;a&quot;) MultipartFile attributes,\n              @RequestPart(&quot;f&quot;) MultipartFile file);\n</code></pre>\n<p>The <code>attributes</code> MultiPartFile has the content type <code>application/json</code>, the <code>file</code> is <code>text/plain</code>.</p>\n<pre><code>@Bean\n@Primary\n@Scope(&quot;prototype&quot;)\npublic Encoder feignFormEncoder() {\n    return new SpringFormEncoder();\n}\n\n@Bean\nfeign.Logger.Level feignLoggerLevel() {\n    return feign.Logger.Level.FULL;\n}\n\n@Bean\npublic Encoder multipartFormEncoder() {\n    return new SpringFormEncoder(new SpringEncoder(new ObjectFactory&lt;HttpMessageConverters&gt;() {\n        @Override\n        public HttpMessageConverters getObject() throws BeansException {\n            return new HttpMessageConverters(new RestTemplate().getMessageConverters());\n        }\n    }));\n}\n</code></pre>\n<p>Pom.xml contains:</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;io.github.openfeign.form&lt;/groupId&gt;\n  &lt;artifactId&gt;feign-form-spring&lt;/artifactId&gt;\n  &lt;version&gt;3.8.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>These are logs:</p>\n<pre><code>m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/cbor]\nm.m.a.RequestResponseBodyMethodProcessor : Writing [ActionResult [success=false, errorMsg=, data=null]]\no.s.web.servlet.DispatcherServlet        : No view rendering, null ModelAndView returned.\no.s.web.servlet.DispatcherServlet        : Completed 200 OK, headers={masked}\ns.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to FileOperationController#upload(MultipartFile, List)\no.s.web.servlet.DispatcherServlet        : POST &quot;/manager/upload&quot;, parameters={multipart}, headers={masked} in DispatcherServlet 'dispatcherServlet'\ns.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to FileOperationController#upload(MultipartFile, List)\no.s.web.method.HandlerMethod             : Arguments: [org.springframework.web.multipart.support.StandardMultipartHttpServletRequest$StandardMultipartFile@3435e994, [org.springframework.web.multipart.support.StandardMultipartHttpServletRequest$StandardMultipartFile@3af20162]]\n.b.s.l.c.f.ServiceFeignClient : [ServiceFeignClient#upload] ---&gt; POST https://example.com:8443/upload HTTP/1.1\n.b.s.l.c.f.ServiceFeignClient : [ServiceFeignClient#upload] Accept: text/plain\n.b.s.l.c.f.ServiceFeignClient : [ServiceFeignClient#upload] Authorization: Bearer eyJgIw\n.b.s.l.c.f.ServiceFeignClient : [ServiceFeignClient#upload] Content-Length: 762\n.b.s.l.c.f.ServiceFeignClient : [ServiceFeignClient#upload] Content-Type: multipart/form-data; charset=UTF-8; boundary=18973c0df55\n.b.s.l.c.f.ServiceFeignClient : [ServiceFeignClient#upload] X-Requested-By: User\n.b.s.l.c.f.ServiceFeignClient : [ServiceFeignClient#upload] \n.b.s.l.c.f.ServiceFeignClient : [ServiceFeignClient#upload] Binary data\n.b.s.l.c.f.ServiceFeignClient : [ServiceFeignClient#upload] ---&gt; END HTTP (762-byte body)\n.b.s.l.c.f.ServiceFeignClient : [ServiceFeignClient#upload] &lt;--- HTTP/1.1 406 Not Acceptable (368ms)\n</code></pre>\n<p>This is what I want to send:</p>\n<pre><code>------1890be27dba\nContent-Disposition: form-data; name=&quot;a&quot;; filename=&quot;blob&quot;\nContent-Type: application/json\n\n \n\n{&quot;values&quot;:[&quot;test123&quot;]}\n------1890be27dba\nContent-Disposition: form-data; name=&quot;f&quot;; filename=&quot;sample.txt&quot;\nContent-Type:text/plain\n\n \n\ntest\n------1890be27dba--\n</code></pre>\n<p>The log does not contain two mime types, but some binary data without the boundary. Where is the problem? Thanks.</p>\n"},{"tags":["java","hashmap","java-8","java-stream","collectors"],"comments":[{"owner":{"account_id":1019866,"reputation":9990,"user_id":1030527,"accept_rate":86,"display_name":"bernie"},"score":0,"creation_date":1465847278,"post_id":22625065,"comment_id":63061913,"body_markdown":"related: http://stackoverflow.com/questions/24630963/java-8-nullpointerexception-in-collectors-tomap","body":"related: <a href=\"http://stackoverflow.com/questions/24630963/java-8-nullpointerexception-in-collectors-tomap\" title=\"java 8 nullpointerexception in collectors tomap\">stackoverflow.com/questions/24630963/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":2347441,"reputation":67550,"user_id":2057294,"accept_rate":63,"display_name":"skiwi"},"score":3,"creation_date":1395752478,"post_id":22625344,"comment_id":34471816,"body_markdown":"You can specify a map application that does accept null keys, so yes it is quite a big issue that it will *never* accept null keys.","body":"You can specify a map application that does accept null keys, so yes it is quite a big issue that it will <i>never</i> accept null keys."},{"owner":{"account_id":2650998,"reputation":29491,"user_id":3411681,"accept_rate":61,"display_name":"Marcelo Glasberg"},"score":1,"creation_date":1395785496,"post_id":22625344,"comment_id":34493768,"body_markdown":"Jason, the Map interface allows it to accept or reject nulls. So if they want maximum flexibility they should accept them. Anyway, if someone uses a map implementation that doesn&#39;t accept nulls, it can throw its own exceptions.","body":"Jason, the Map interface allows it to accept or reject nulls. So if they want maximum flexibility they should accept them. Anyway, if someone uses a map implementation that doesn&#39;t accept nulls, it can throw its own exceptions."},{"owner":{"account_id":9226,"reputation":30034,"user_id":16959,"accept_rate":89,"display_name":"Jason Sperske"},"score":0,"creation_date":1395803209,"post_id":22625344,"comment_id":34499627,"body_markdown":"The interface does but the implementations do not all support null keys. By preventing nulls in the generic collector they have the flexibility to choose any map implementation. I agree that this feels off but likely they weighed the possibility of a mysterious null pointer exception based on performance tuning (or however it chooses an implementation) verses the widest (as in works with all implementations of the Map interface) definition of a key.","body":"The interface does but the implementations do not all support null keys. By preventing nulls in the generic collector they have the flexibility to choose any map implementation. I agree that this feels off but likely they weighed the possibility of a mysterious null pointer exception based on performance tuning (or however it chooses an implementation) verses the widest (as in works with all implementations of the Map interface) definition of a key."}],"tags":[],"owner":{"account_id":9226,"reputation":30034,"user_id":16959,"accept_rate":89,"display_name":"Jason Sperske"},"comment_count":3,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1395721003,"creation_date":1395721003,"answer_id":22625344,"question_id":22625065,"body_markdown":"To your 1st question, from the docs:\r\n\r\n&gt; There are no guarantees on the type, mutability, serializability, or thread-safety of the Map or List objects returned.\r\n\r\nBecause not all Map implementations allow null keys they probably added this to reduce to the most common allowable definition of a map to get maximum flexibility when choosing a type. \r\n\r\nTo your 2nd question, you just need a supplier, wouldn&#39;t a lambda work? I&#39;m still getting acquainted with Java 8, maybe a smarter person can add a better answer. ","title":"Collectors.groupingBy doesn&#39;t accept null keys","body":"<p>To your 1st question, from the docs:</p>\n\n<blockquote>\n  <p>There are no guarantees on the type, mutability, serializability, or thread-safety of the Map or List objects returned.</p>\n</blockquote>\n\n<p>Because not all Map implementations allow null keys they probably added this to reduce to the most common allowable definition of a map to get maximum flexibility when choosing a type. </p>\n\n<p>To your 2nd question, you just need a supplier, wouldn't a lambda work? I'm still getting acquainted with Java 8, maybe a smarter person can add a better answer. </p>\n"},{"comments":[{"owner":{"account_id":2650998,"reputation":29491,"user_id":3411681,"accept_rate":61,"display_name":"Marcelo Glasberg"},"score":0,"creation_date":1395784592,"post_id":22628668,"comment_id":34493389,"body_markdown":"Skiwi, I typed a bad example, since I don&#39;t really need a `HashMap`, and the simpler `groupingBy` is not guaranteed to return one. My example should have been just Map, like this:\n`Stream&lt;Class&lt;?&gt;&gt; stream = Stream.of(ArrayList.class);`\n`Map&lt;Class&lt;?&gt;, List&lt;Class&lt;?&gt;&gt;&gt; map = stream.collect(Collectors.groupingBy(Class::getSuperclass));`","body":"Skiwi, I typed a bad example, since I don&#39;t really need a <code>HashMap</code>, and the simpler <code>groupingBy</code> is not guaranteed to return one. My example should have been just Map, like this: <code>Stream&lt;Class&lt;?&gt;&gt; stream = Stream.of(ArrayList.class);</code> <code>Map&lt;Class&lt;?&gt;, List&lt;Class&lt;?&gt;&gt;&gt; map = stream.collect(Collectors.groupingBy(Class::getSuperclass));</code>"},{"owner":{"account_id":2650998,"reputation":29491,"user_id":3411681,"accept_rate":61,"display_name":"Marcelo Glasberg"},"score":0,"creation_date":1395784693,"post_id":22628668,"comment_id":34493434,"body_markdown":"A warning for IntellijIDEA13 users: the IDE issues a `Cyclic inference` error on `Class::getSuperclass`. If you remove all the `&lt;?&gt;` this error is not shown. But now I realized it compiles and runs even with this &quot;error&quot;, so it seems not to be a real error, but an IntellijIDEA bug.","body":"A warning for IntellijIDEA13 users: the IDE issues a <code>Cyclic inference</code> error on <code>Class::getSuperclass</code>. If you remove all the <code>&lt;?&gt;</code> this error is not shown. But now I realized it compiles and runs even with this &quot;error&quot;, so it seems not to be a real error, but an IntellijIDEA bug."},{"owner":{"account_id":1044865,"reputation":5045,"user_id":1891566,"display_name":"Clint Eastwood"},"score":26,"creation_date":1469420604,"post_id":22628668,"comment_id":64510216,"body_markdown":"this answer doesn&#39;t work. All `groupingBy` methods in `Collectors` end up using internally the same implementation that rejects null keys. Can&#39;t believe nobody has bothered to check this before upvoting...","body":"this answer doesn&#39;t work. All <code>groupingBy</code> methods in <code>Collectors</code> end up using internally the same implementation that rejects null keys. Can&#39;t believe nobody has bothered to check this before upvoting..."}],"tags":[],"owner":{"account_id":2347441,"reputation":67550,"user_id":2057294,"accept_rate":63,"display_name":"skiwi"},"comment_count":3,"down_vote_count":9,"up_vote_count":11,"is_accepted":false,"score":2,"last_activity_date":1395734997,"creation_date":1395734997,"answer_id":22628668,"question_id":22625065,"body_markdown":"First of all, you are using lots of raw objects. This is not a good idea *at all*, first convert the following:\r\n\r\n- `Class` to `Class&lt;?&gt;`, ie. instead of a raw type, a parametrized type with an unknown class.\r\n- Instead of forcefully casting to a `HashMap`, you should supply a `HashMap` to the collector.\r\n\r\nFirst the correctly typed code, without caring about a NPE yet:\r\n\r\n    Stream&lt;Class&lt;?&gt;&gt; stream = Stream.of(ArrayList.class);\r\n    HashMap&lt;Class&lt;?&gt;, List&lt;Class&lt;?&gt;&gt;&gt; hashMap = (HashMap&lt;Class&lt;?&gt;, List&lt;Class&lt;?&gt;&gt;&gt;)stream\r\n            .collect(Collectors.groupingBy(Class::getSuperclass));\r\n\r\nNow we get rid of the forceful cast there, and instead do it correctly:\r\n\r\n    Stream&lt;Class&lt;?&gt;&gt; stream = Stream.of(ArrayList.class);\r\n    HashMap&lt;Class&lt;?&gt;, List&lt;Class&lt;?&gt;&gt;&gt; hashMap = stream\r\n            .collect(Collectors.groupingBy(\r\n                    Class::getSuperclass,\r\n                    HashMap::new,\r\n                    Collectors.toList()\r\n            ));\r\n\r\nHere we replace the `groupingBy` which just takes a classifier, to one that takes a classifier, a supplier and a collector. Essentially this is the same as what there was before, but now it is correctly typed.\r\n\r\nYou are indeed correct that in the javadoc it is not stated that it will throw a `NPE`, and I do not think it should be throwing one, as I am allowed to supply whatever map I want, and if my map allows `null` keys, then it should be allowed.\r\n\r\nI do not see any other way to do it simpler as of now, I&#39;ll try to look more into it.\r\n","title":"Collectors.groupingBy doesn&#39;t accept null keys","body":"<p>First of all, you are using lots of raw objects. This is not a good idea <em>at all</em>, first convert the following:</p>\n\n<ul>\n<li><code>Class</code> to <code>Class&lt;?&gt;</code>, ie. instead of a raw type, a parametrized type with an unknown class.</li>\n<li>Instead of forcefully casting to a <code>HashMap</code>, you should supply a <code>HashMap</code> to the collector.</li>\n</ul>\n\n<p>First the correctly typed code, without caring about a NPE yet:</p>\n\n<pre><code>Stream&lt;Class&lt;?&gt;&gt; stream = Stream.of(ArrayList.class);\nHashMap&lt;Class&lt;?&gt;, List&lt;Class&lt;?&gt;&gt;&gt; hashMap = (HashMap&lt;Class&lt;?&gt;, List&lt;Class&lt;?&gt;&gt;&gt;)stream\n        .collect(Collectors.groupingBy(Class::getSuperclass));\n</code></pre>\n\n<p>Now we get rid of the forceful cast there, and instead do it correctly:</p>\n\n<pre><code>Stream&lt;Class&lt;?&gt;&gt; stream = Stream.of(ArrayList.class);\nHashMap&lt;Class&lt;?&gt;, List&lt;Class&lt;?&gt;&gt;&gt; hashMap = stream\n        .collect(Collectors.groupingBy(\n                Class::getSuperclass,\n                HashMap::new,\n                Collectors.toList()\n        ));\n</code></pre>\n\n<p>Here we replace the <code>groupingBy</code> which just takes a classifier, to one that takes a classifier, a supplier and a collector. Essentially this is the same as what there was before, but now it is correctly typed.</p>\n\n<p>You are indeed correct that in the javadoc it is not stated that it will throw a <code>NPE</code>, and I do not think it should be throwing one, as I am allowed to supply whatever map I want, and if my map allows <code>null</code> keys, then it should be allowed.</p>\n\n<p>I do not see any other way to do it simpler as of now, I'll try to look more into it.</p>\n"},{"tags":[],"owner":{"account_id":1369656,"reputation":17579,"user_id":1305253,"accept_rate":50,"display_name":"rolfl"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1395759338,"creation_date":1395758108,"answer_id":22637721,"question_id":22625065,"body_markdown":"I figured I would take a moment and try to digest this issue you have. I put together a SSCE for what I would expect if I did it manually, and what the `groupingBy` implementation actually does.\r\n\r\nI don&#39;t think this is an answer, but it is a &#39;wonder why it is a problem&#39; thing. Also, if you want, feel free to hack this code to have a null-friendly collector.\r\n\r\n**Edit**: A generic-friendly implementation:\r\n\r\n    /** groupingByNF - NullFriendly - allows you to specify your own Map and List supplier. */\r\n    private static final &lt;T,K&gt; Collector&lt;T,?,Map&lt;K,List&lt;T&gt;&gt;&gt; groupingByNF (\r\n            final Supplier&lt;Map&lt;K,List&lt;T&gt;&gt;&gt; mapsupplier,\r\n            final Supplier&lt;List&lt;T&gt;&gt; listsupplier,\r\n            final Function&lt;? super T,? extends K&gt; classifier) {\r\n\r\n        BiConsumer&lt;Map&lt;K,List&lt;T&gt;&gt;, T&gt; combiner = (m, v) -&gt; {\r\n            K key = classifier.apply(v);\r\n            List&lt;T&gt; store = m.get(key);\r\n            if (store == null) {\r\n                store = listsupplier.get();\r\n                m.put(key, store);\r\n            }\r\n            store.add(v);\r\n        };\r\n        \r\n        BinaryOperator&lt;Map&lt;K, List&lt;T&gt;&gt;&gt; finalizer = (left, right) -&gt; {\r\n            for (Map.Entry&lt;K, List&lt;T&gt;&gt; me : right.entrySet()) {\r\n                List&lt;T&gt; target = left.get(me.getKey());\r\n                if (target == null) {\r\n                    left.put(me.getKey(), me.getValue());\r\n                } else {\r\n                    target.addAll(me.getValue());\r\n                }\r\n            }\r\n            return left;\r\n        };\r\n        \r\n        return Collector.of(mapsupplier, combiner, finalizer);\r\n        \r\n    }\r\n    \r\n    /** groupingByNF - NullFriendly - otherwise similar to Java8 Collections.groupingBy */\r\n    private static final &lt;T,K&gt; Collector&lt;T,?,Map&lt;K,List&lt;T&gt;&gt;&gt; groupingByNF (Function&lt;? super T,? extends K&gt; classifier) {\r\n        return groupingByNF(HashMap::new, ArrayList::new, classifier);\r\n    }\r\n \r\n\r\nConsider this code (the code groups String values based on the String.length(), (or null if the input String is null)):\r\n\r\n    public static void main(String[] args) {\r\n        \r\n        String[] input = {&quot;a&quot;, &quot;a&quot;, &quot;&quot;, null, &quot;b&quot;, &quot;ab&quot;};\r\n        \r\n        // How we group the Strings\r\n        final Function&lt;String, Integer&gt; classifier = (a) -&gt; {return a != null ? Integer.valueOf(a.length()) : null;};\r\n        \r\n        // Manual implementation of a combiner that accumulates a string value based on the classifier.\r\n        // no special handling of null key values.\r\n        BiConsumer&lt;Map&lt;Integer,List&lt;String&gt;&gt;, String&gt; combiner = (m, v) -&gt; {\r\n            Integer key = classifier.apply(v);\r\n            List&lt;String&gt; store = m.get(key);\r\n            if (store == null) {\r\n                store = new ArrayList&lt;String&gt;();\r\n                m.put(key, store);\r\n            }\r\n            store.add(v);\r\n        };\r\n\r\n        // The finalizer merges two maps together (right into left)\r\n        // no special handling of null key values.\r\n        BinaryOperator&lt;Map&lt;Integer, List&lt;String&gt;&gt;&gt; finalizer = (left, right) -&gt; {\r\n            for (Map.Entry&lt;Integer, List&lt;String&gt;&gt; me : right.entrySet()) {\r\n                List&lt;String&gt; target = left.get(me.getKey());\r\n                if (target == null) {\r\n                    left.put(me.getKey(), me.getValue());\r\n                } else {\r\n                    target.addAll(me.getValue());\r\n                }\r\n            }\r\n            return left;\r\n        };\r\n\r\n        // Using a manual collector\r\n        Map&lt;Integer, List&lt;String&gt;&gt; manual = Arrays.stream(input).collect(Collector.of(HashMap::new, combiner, finalizer));\r\n\r\n        System.out.println(manual);\r\n\r\n        // using the groupingBy collector.        \r\n        Collector&lt;String, ?, Map&lt;Integer, List&lt;String&gt;&gt;&gt; collector = Collectors.groupingBy(classifier);\r\n        \r\n        Map&lt;Integer, List&lt;String&gt;&gt; result = Arrays.stream(input).collect(collector);\r\n        \r\n        System.out.println(result);\r\n    }\r\n\r\n\r\nThe above code produces the output:\r\n\r\n&gt;     {0=[], null=[null], 1=[a, a, b], 2=[ab]}\r\n&gt;     Exception in thread &quot;main&quot; java.lang.NullPointerException: element cannot be mapped to a null key\r\n&gt;     \tat java.util.Objects.requireNonNull(Objects.java:228)\r\n&gt;     \tat java.util.stream.Collectors.lambda$groupingBy$135(Collectors.java:907)\r\n&gt;     \tat java.util.stream.Collectors$$Lambda$10/258952499.accept(Unknown Source)\r\n&gt;     \tat java.util.stream.ReduceOps$3ReducingSink.accept(ReduceOps.java:169)\r\n&gt;     \tat java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:948)\r\n&gt;     \tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:512)\r\n&gt;     \tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:502)\r\n&gt;     \tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\r\n&gt;     \tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n&gt;     \tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:499)\r\n&gt;     \tat CollectGroupByNull.main(CollectGroupByNull.java:49)\r\n\r\n","title":"Collectors.groupingBy doesn&#39;t accept null keys","body":"<p>I figured I would take a moment and try to digest this issue you have. I put together a SSCE for what I would expect if I did it manually, and what the <code>groupingBy</code> implementation actually does.</p>\n\n<p>I don't think this is an answer, but it is a 'wonder why it is a problem' thing. Also, if you want, feel free to hack this code to have a null-friendly collector.</p>\n\n<p><strong>Edit</strong>: A generic-friendly implementation:</p>\n\n<pre><code>/** groupingByNF - NullFriendly - allows you to specify your own Map and List supplier. */\nprivate static final &lt;T,K&gt; Collector&lt;T,?,Map&lt;K,List&lt;T&gt;&gt;&gt; groupingByNF (\n        final Supplier&lt;Map&lt;K,List&lt;T&gt;&gt;&gt; mapsupplier,\n        final Supplier&lt;List&lt;T&gt;&gt; listsupplier,\n        final Function&lt;? super T,? extends K&gt; classifier) {\n\n    BiConsumer&lt;Map&lt;K,List&lt;T&gt;&gt;, T&gt; combiner = (m, v) -&gt; {\n        K key = classifier.apply(v);\n        List&lt;T&gt; store = m.get(key);\n        if (store == null) {\n            store = listsupplier.get();\n            m.put(key, store);\n        }\n        store.add(v);\n    };\n\n    BinaryOperator&lt;Map&lt;K, List&lt;T&gt;&gt;&gt; finalizer = (left, right) -&gt; {\n        for (Map.Entry&lt;K, List&lt;T&gt;&gt; me : right.entrySet()) {\n            List&lt;T&gt; target = left.get(me.getKey());\n            if (target == null) {\n                left.put(me.getKey(), me.getValue());\n            } else {\n                target.addAll(me.getValue());\n            }\n        }\n        return left;\n    };\n\n    return Collector.of(mapsupplier, combiner, finalizer);\n\n}\n\n/** groupingByNF - NullFriendly - otherwise similar to Java8 Collections.groupingBy */\nprivate static final &lt;T,K&gt; Collector&lt;T,?,Map&lt;K,List&lt;T&gt;&gt;&gt; groupingByNF (Function&lt;? super T,? extends K&gt; classifier) {\n    return groupingByNF(HashMap::new, ArrayList::new, classifier);\n}\n</code></pre>\n\n<p>Consider this code (the code groups String values based on the String.length(), (or null if the input String is null)):</p>\n\n<pre><code>public static void main(String[] args) {\n\n    String[] input = {\"a\", \"a\", \"\", null, \"b\", \"ab\"};\n\n    // How we group the Strings\n    final Function&lt;String, Integer&gt; classifier = (a) -&gt; {return a != null ? Integer.valueOf(a.length()) : null;};\n\n    // Manual implementation of a combiner that accumulates a string value based on the classifier.\n    // no special handling of null key values.\n    BiConsumer&lt;Map&lt;Integer,List&lt;String&gt;&gt;, String&gt; combiner = (m, v) -&gt; {\n        Integer key = classifier.apply(v);\n        List&lt;String&gt; store = m.get(key);\n        if (store == null) {\n            store = new ArrayList&lt;String&gt;();\n            m.put(key, store);\n        }\n        store.add(v);\n    };\n\n    // The finalizer merges two maps together (right into left)\n    // no special handling of null key values.\n    BinaryOperator&lt;Map&lt;Integer, List&lt;String&gt;&gt;&gt; finalizer = (left, right) -&gt; {\n        for (Map.Entry&lt;Integer, List&lt;String&gt;&gt; me : right.entrySet()) {\n            List&lt;String&gt; target = left.get(me.getKey());\n            if (target == null) {\n                left.put(me.getKey(), me.getValue());\n            } else {\n                target.addAll(me.getValue());\n            }\n        }\n        return left;\n    };\n\n    // Using a manual collector\n    Map&lt;Integer, List&lt;String&gt;&gt; manual = Arrays.stream(input).collect(Collector.of(HashMap::new, combiner, finalizer));\n\n    System.out.println(manual);\n\n    // using the groupingBy collector.        \n    Collector&lt;String, ?, Map&lt;Integer, List&lt;String&gt;&gt;&gt; collector = Collectors.groupingBy(classifier);\n\n    Map&lt;Integer, List&lt;String&gt;&gt; result = Arrays.stream(input).collect(collector);\n\n    System.out.println(result);\n}\n</code></pre>\n\n<p>The above code produces the output:</p>\n\n<blockquote>\n<pre><code>{0=[], null=[null], 1=[a, a, b], 2=[ab]}\nException in thread \"main\" java.lang.NullPointerException: element cannot be mapped to a null key\n  at java.util.Objects.requireNonNull(Objects.java:228)\n  at java.util.stream.Collectors.lambda$groupingBy$135(Collectors.java:907)\n  at java.util.stream.Collectors$$Lambda$10/258952499.accept(Unknown Source)\n  at java.util.stream.ReduceOps$3ReducingSink.accept(ReduceOps.java:169)\n  at java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:948)\n  at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:512)\n  at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:502)\n  at java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n  at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n  at java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:499)\n  at CollectGroupByNull.main(CollectGroupByNull.java:49)\n</code></pre>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":2497295,"reputation":3931,"user_id":2173392,"display_name":"pdem"},"score":1,"creation_date":1467378915,"post_id":22650233,"comment_id":63722281,"body_markdown":"Thanks, it helped me for a different need: groupBy and Count, here is my wrapper: `public static &lt;T,R&gt; Map&lt;R,Long&gt; countGroupBy(Collection&lt;T&gt; list, Function&lt;T,R&gt; groupBy){\n    Collector&lt;T, ?, Map&lt;R, Long&gt;&gt; mapCollectors = Collectors.toMap(\n        groupBy,\n        l-&gt;1L,\n        Long::sum);\n      return list.stream().collect(mapCollectors);\n  } `","body":"Thanks, it helped me for a different need: groupBy and Count, here is my wrapper: <code>public static &lt;T,R&gt; Map&lt;R,Long&gt; countGroupBy(Collection&lt;T&gt; list, Function&lt;T,R&gt; groupBy){     Collector&lt;T, ?, Map&lt;R, Long&gt;&gt; mapCollectors = Collectors.toMap(         groupBy,         l-&gt;1L,         Long::sum);       return list.stream().collect(mapCollectors);   } </code>"}],"tags":[],"owner":{"account_id":2650998,"reputation":29491,"user_id":3411681,"accept_rate":61,"display_name":"Marcelo Glasberg"},"comment_count":1,"down_vote_count":0,"up_vote_count":18,"is_accepted":true,"score":18,"last_activity_date":1395800467,"creation_date":1395800043,"answer_id":22650233,"question_id":22625065,"body_markdown":"For the first question, I agree with skiwi that it shouldn&#39;t be throwing a `NPE`.  I hope they will change that (or else at least add it to the javadoc). Meanwhile, to answer the second question I decided to use `Collectors.toMap` instead of `Collectors.groupingBy`:\r\n\r\n    Stream&lt;Class&lt;?&gt;&gt; stream = Stream.of(ArrayList.class);\r\n\r\n    Map&lt;Class&lt;?&gt;, List&lt;Class&lt;?&gt;&gt;&gt; map = stream.collect(\r\n        Collectors.toMap(\r\n            Class::getSuperclass,\r\n            Collections::singletonList,\r\n            (List&lt;Class&lt;?&gt;&gt; oldList, List&lt;Class&lt;?&gt;&gt; newEl) -&gt; {\r\n            List&lt;Class&lt;?&gt;&gt; newList = new ArrayList&lt;&gt;(oldList.size() + 1);\r\n            newList.addAll(oldList);\r\n            newList.addAll(newEl);\r\n            return newList;\r\n            }));\r\n\r\n                    \r\n  \r\nOr, encapsulating it:                    \r\n           \r\n    /** Like Collectors.groupingBy, but accepts null keys. */\r\n    public static &lt;T, A&gt; Collector&lt;T, ?, Map&lt;A, List&lt;T&gt;&gt;&gt;\r\n    groupingBy_WithNullKeys(Function&lt;? super T, ? extends A&gt; classifier) {\r\n        return Collectors.toMap(\r\n            classifier,\r\n            Collections::singletonList,\r\n            (List&lt;T&gt; oldList, List&lt;T&gt; newEl) -&gt; {\r\n                List&lt;T&gt; newList = new ArrayList&lt;&gt;(oldList.size() + 1);\r\n                newList.addAll(oldList);\r\n                newList.addAll(newEl);\r\n                return newList;\r\n                });\r\n        }\r\n\r\nAnd use it like this:\r\n\r\n    Stream&lt;Class&lt;?&gt;&gt; stream = Stream.of(ArrayList.class);\r\n    Map&lt;Class&lt;?&gt;, List&lt;Class&lt;?&gt;&gt;&gt; map = stream.collect(groupingBy_WithNullKeys(Class::getSuperclass));\r\n\r\nPlease note rolfl gave another, more complicated answer, which allows you to specify your own Map and List supplier. I haven&#39;t tested it. \r\n\r\n","title":"Collectors.groupingBy doesn&#39;t accept null keys","body":"<p>For the first question, I agree with skiwi that it shouldn't be throwing a <code>NPE</code>.  I hope they will change that (or else at least add it to the javadoc). Meanwhile, to answer the second question I decided to use <code>Collectors.toMap</code> instead of <code>Collectors.groupingBy</code>:</p>\n\n<pre><code>Stream&lt;Class&lt;?&gt;&gt; stream = Stream.of(ArrayList.class);\n\nMap&lt;Class&lt;?&gt;, List&lt;Class&lt;?&gt;&gt;&gt; map = stream.collect(\n    Collectors.toMap(\n        Class::getSuperclass,\n        Collections::singletonList,\n        (List&lt;Class&lt;?&gt;&gt; oldList, List&lt;Class&lt;?&gt;&gt; newEl) -&gt; {\n        List&lt;Class&lt;?&gt;&gt; newList = new ArrayList&lt;&gt;(oldList.size() + 1);\n        newList.addAll(oldList);\n        newList.addAll(newEl);\n        return newList;\n        }));\n</code></pre>\n\n<p>Or, encapsulating it:                    </p>\n\n<pre><code>/** Like Collectors.groupingBy, but accepts null keys. */\npublic static &lt;T, A&gt; Collector&lt;T, ?, Map&lt;A, List&lt;T&gt;&gt;&gt;\ngroupingBy_WithNullKeys(Function&lt;? super T, ? extends A&gt; classifier) {\n    return Collectors.toMap(\n        classifier,\n        Collections::singletonList,\n        (List&lt;T&gt; oldList, List&lt;T&gt; newEl) -&gt; {\n            List&lt;T&gt; newList = new ArrayList&lt;&gt;(oldList.size() + 1);\n            newList.addAll(oldList);\n            newList.addAll(newEl);\n            return newList;\n            });\n    }\n</code></pre>\n\n<p>And use it like this:</p>\n\n<pre><code>Stream&lt;Class&lt;?&gt;&gt; stream = Stream.of(ArrayList.class);\nMap&lt;Class&lt;?&gt;, List&lt;Class&lt;?&gt;&gt;&gt; map = stream.collect(groupingBy_WithNullKeys(Class::getSuperclass));\n</code></pre>\n\n<p>Please note rolfl gave another, more complicated answer, which allows you to specify your own Map and List supplier. I haven't tested it. </p>\n"},{"tags":[],"owner":{"account_id":5089821,"reputation":801,"user_id":4083228,"display_name":"Erling"},"comment_count":0,"down_vote_count":0,"up_vote_count":80,"is_accepted":false,"score":80,"last_activity_date":1411733600,"creation_date":1411733600,"answer_id":26059307,"question_id":22625065,"body_markdown":"I had the same kind of problem.\r\nThis failed, because groupingBy performs Objects.requireNonNull on the value returned from the classifier:\r\n\r\n        Map&lt;Long, List&lt;ClaimEvent&gt;&gt; map = events.stream()\r\n          .filter(event -&gt; eventTypeIds.contains(event.getClaimEventTypeId()))\r\n          .collect(groupingBy(ClaimEvent::getSubprocessId));\r\n\r\nUsing Optional, this works:\r\n\r\n        Map&lt;Optional&lt;Long&gt;, List&lt;ClaimEvent&gt;&gt; map = events.stream()\r\n          .filter(event -&gt; eventTypeIds.contains(event.getClaimEventTypeId()))\r\n          .collect(groupingBy(event -&gt; Optional.ofNullable(event.getSubprocessId())));\r\n","title":"Collectors.groupingBy doesn&#39;t accept null keys","body":"<p>I had the same kind of problem.\nThis failed, because groupingBy performs Objects.requireNonNull on the value returned from the classifier:</p>\n\n<pre><code>    Map&lt;Long, List&lt;ClaimEvent&gt;&gt; map = events.stream()\n      .filter(event -&gt; eventTypeIds.contains(event.getClaimEventTypeId()))\n      .collect(groupingBy(ClaimEvent::getSubprocessId));\n</code></pre>\n\n<p>Using Optional, this works:</p>\n\n<pre><code>    Map&lt;Optional&lt;Long&gt;, List&lt;ClaimEvent&gt;&gt; map = events.stream()\n      .filter(event -&gt; eventTypeIds.contains(event.getClaimEventTypeId()))\n      .collect(groupingBy(event -&gt; Optional.ofNullable(event.getSubprocessId())));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1044865,"reputation":5045,"user_id":1891566,"display_name":"Clint Eastwood"},"score":28,"creation_date":1469420414,"post_id":32207664,"comment_id":64510155,"body_markdown":"The second question from the OPS implicitly states that they want to accept null keys so this doesn&#39;t answer his question.","body":"The second question from the OPS implicitly states that they want to accept null keys so this doesn&#39;t answer his question."},{"owner":{"account_id":1775711,"reputation":393,"user_id":1619541,"display_name":"Speedstone"},"score":5,"creation_date":1510669800,"post_id":32207664,"comment_id":81526692,"body_markdown":"This can be a part of a correct answer. The other part being that you can then explicitly put null items in the result: `result.put(null, myList.stream.filter(p -&gt; p.get() == null).collect(Collectors.toList());`Kind of ugly, but may still be more convenient than creating a collector.","body":"This can be a part of a correct answer. The other part being that you can then explicitly put null items in the result: <code>result.put(null, myList.stream.filter(p -&gt; p.get() == null).collect(Collectors.toList());</code>Kind of ugly, but may still be more convenient than creating a collector."},{"owner":{"account_id":1431635,"reputation":5085,"user_id":1353930,"accept_rate":50,"display_name":"Daniel Alder"},"score":0,"creation_date":1598896814,"post_id":32207664,"comment_id":112599874,"body_markdown":"The problem: the groupingBy lambda function has to be called twice. this could be expensive, depending on the function","body":"The problem: the groupingBy lambda function has to be called twice. this could be expensive, depending on the function"},{"owner":{"account_id":4464206,"reputation":363,"user_id":4138353,"display_name":"Kirill Gagarski"},"score":0,"creation_date":1644160077,"post_id":32207664,"comment_id":125526584,"body_markdown":"The other problem is that `groupingBy` result is not guaranteed to be mutable. But you can pass `mapFactory` parameter, supplying a mutable map (like `HashMap::new`)","body":"The other problem is that <code>groupingBy</code> result is not guaranteed to be mutable. But you can pass <code>mapFactory</code> parameter, supplying a mutable map (like <code>HashMap::new</code>)"}],"tags":[],"owner":{"account_id":2427872,"reputation":299,"user_id":2119436,"display_name":"Ilan M"},"comment_count":4,"down_vote_count":15,"up_vote_count":23,"is_accepted":false,"score":8,"last_activity_date":1593506681,"creation_date":1440515317,"answer_id":32207664,"question_id":22625065,"body_markdown":"## Use filter before groupingBy##\r\n\r\n&lt;p&gt;Filter out the null instances before groupingBy.&lt;/P&gt;\r\nHere is an example\r\n\r\n    MyObjectlist.stream()\r\n      .filter(p -&gt; p.getSomeInstance() != null)\r\n      .collect(Collectors.groupingBy(MyObject::getSomeInstance));","title":"Collectors.groupingBy doesn&#39;t accept null keys","body":"<h2>Use filter before groupingBy##</h2>\n<p>Filter out the null instances before groupingBy.</P>\nHere is an example\n<pre><code>MyObjectlist.stream()\n  .filter(p -&gt; p.getSomeInstance() != null)\n  .collect(Collectors.groupingBy(MyObject::getSomeInstance));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2190504,"reputation":1438,"user_id":1937681,"accept_rate":62,"display_name":"blackr1234"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1630571388,"creation_date":1630571388,"answer_id":69026735,"question_id":22625065,"body_markdown":"You can use `Stream#collect(Supplier&lt;R&gt; supplier, BiConsumer&lt;R,? super T&gt; accumulator, BiConsumer&lt;R,R&gt; combiner)` instead.\r\n\r\nhttps://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#collect-java.util.function.Supplier-java.util.function.BiConsumer-java.util.function.BiConsumer-\r\n\r\n---\r\n\r\n### When you have a list of objects of a self-defined POJO type:\r\n\r\n```java\r\npackage code;\r\n\r\nimport static java.util.Arrays.asList;\r\nimport static java.util.stream.Collectors.toList;\r\nimport static lombok.AccessLevel.PRIVATE;\r\n\r\nimport java.util.Arrays;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Map;\r\nimport java.util.stream.Stream;\r\n\r\nimport lombok.Data;\r\nimport lombok.experimental.Accessors;\r\nimport lombok.experimental.FieldDefaults;\r\n\r\npublic class MainGroupListIntoMap {\r\n\r\n    public static void main(String[] args) throws Exception {\r\n\r\n        final List&lt;Item&gt; items = Arrays.asList(\r\n            new Item().setName(&quot;One&quot;).setType(&quot;1&quot;),\r\n            new Item().setName(&quot;Two&quot;).setType(&quot;1&quot;),\r\n            new Item().setName(&quot;Three&quot;).setType(&quot;1&quot;),\r\n            new Item().setName(&quot;Four&quot;).setType(&quot;2&quot;),\r\n            new Item().setName(&quot;Same&quot;).setType(null),\r\n            new Item().setName(&quot;Same&quot;).setType(null),\r\n            new Item().setName(null).setType(null)\r\n        );\r\n\r\n        final Map&lt;String, List&lt;Item&gt;&gt; grouped = items\r\n                .stream()\r\n                .collect(HashMap::new,\r\n                         (m, v) -&gt; m.merge(v.getType(),\r\n                                           asList(v),\r\n                                           (oldList, newList) -&gt; Stream.concat(oldList.stream(),\r\n                                                                               newList.stream())\r\n                                                                       .collect(toList())),\r\n                         HashMap::putAll);\r\n\r\n        grouped.entrySet().forEach(System.out::println);\r\n    }\r\n}\r\n\r\n@Data\r\n@Accessors(chain = true)\r\n@FieldDefaults(level = PRIVATE)\r\nclass Item {\r\n    String name;\r\n    String type;\r\n}\r\n```\r\n\r\n### Output:\r\n\r\n```\r\nnull=[Item(name=Same, type=null), Item(name=Same, type=null), Item(name=null, type=null)]\r\n1=[Item(name=One, type=1), Item(name=Two, type=1), Item(name=Three, type=1)]\r\n2=[Item(name=Four, type=2)]\r\n```\r\n\r\n---\r\n\r\n### In your case:\r\n\r\n```java\r\npackage code;\r\n\r\nimport static java.util.Arrays.asList;\r\nimport static java.util.stream.Collectors.toList;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Map;\r\nimport java.util.stream.Stream;\r\n\r\npublic class MainGroupListIntoMap2 {\r\n\r\n    public static void main(String[] args) throws Exception {\r\n\r\n        group(asList(ArrayList.class, List.class))\r\n            .entrySet()\r\n            .forEach(System.out::println);\r\n    }\r\n\r\n    private static Map&lt;Class&lt;?&gt;, List&lt;Class&lt;?&gt;&gt;&gt; group(List&lt;Class&lt;?&gt;&gt; classes) {\r\n        final Map&lt;Class&lt;?&gt;, List&lt;Class&lt;?&gt;&gt;&gt; grouped = classes\r\n                .stream()\r\n                .collect(HashMap::new,\r\n                         (m, v) -&gt; m.merge(v.getSuperclass(),\r\n                                           asList(v),\r\n                                           (oldList, newList) -&gt; Stream.concat(oldList.stream(),\r\n                                                                               newList.stream())\r\n                                                                       .collect(toList())),\r\n                         HashMap::putAll);\r\n\r\n        return grouped;\r\n    }\r\n}\r\n```\r\n\r\n### Output:\r\n\r\n```\r\nnull=[interface java.util.List]\r\nclass java.util.AbstractList=[class java.util.ArrayList]\r\n```","title":"Collectors.groupingBy doesn&#39;t accept null keys","body":"<p>You can use <code>Stream#collect(Supplier&lt;R&gt; supplier, BiConsumer&lt;R,? super T&gt; accumulator, BiConsumer&lt;R,R&gt; combiner)</code> instead.</p>\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#collect-java.util.function.Supplier-java.util.function.BiConsumer-java.util.function.BiConsumer-\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#collect-java.util.function.Supplier-java.util.function.BiConsumer-java.util.function.BiConsumer-</a></p>\n<hr />\n<h3>When you have a list of objects of a self-defined POJO type:</h3>\n<pre class=\"lang-java prettyprint-override\"><code>package code;\n\nimport static java.util.Arrays.asList;\nimport static java.util.stream.Collectors.toList;\nimport static lombok.AccessLevel.PRIVATE;\n\nimport java.util.Arrays;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.stream.Stream;\n\nimport lombok.Data;\nimport lombok.experimental.Accessors;\nimport lombok.experimental.FieldDefaults;\n\npublic class MainGroupListIntoMap {\n\n    public static void main(String[] args) throws Exception {\n\n        final List&lt;Item&gt; items = Arrays.asList(\n            new Item().setName(&quot;One&quot;).setType(&quot;1&quot;),\n            new Item().setName(&quot;Two&quot;).setType(&quot;1&quot;),\n            new Item().setName(&quot;Three&quot;).setType(&quot;1&quot;),\n            new Item().setName(&quot;Four&quot;).setType(&quot;2&quot;),\n            new Item().setName(&quot;Same&quot;).setType(null),\n            new Item().setName(&quot;Same&quot;).setType(null),\n            new Item().setName(null).setType(null)\n        );\n\n        final Map&lt;String, List&lt;Item&gt;&gt; grouped = items\n                .stream()\n                .collect(HashMap::new,\n                         (m, v) -&gt; m.merge(v.getType(),\n                                           asList(v),\n                                           (oldList, newList) -&gt; Stream.concat(oldList.stream(),\n                                                                               newList.stream())\n                                                                       .collect(toList())),\n                         HashMap::putAll);\n\n        grouped.entrySet().forEach(System.out::println);\n    }\n}\n\n@Data\n@Accessors(chain = true)\n@FieldDefaults(level = PRIVATE)\nclass Item {\n    String name;\n    String type;\n}\n</code></pre>\n<h3>Output:</h3>\n<pre><code>null=[Item(name=Same, type=null), Item(name=Same, type=null), Item(name=null, type=null)]\n1=[Item(name=One, type=1), Item(name=Two, type=1), Item(name=Three, type=1)]\n2=[Item(name=Four, type=2)]\n</code></pre>\n<hr />\n<h3>In your case:</h3>\n<pre class=\"lang-java prettyprint-override\"><code>package code;\n\nimport static java.util.Arrays.asList;\nimport static java.util.stream.Collectors.toList;\n\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.stream.Stream;\n\npublic class MainGroupListIntoMap2 {\n\n    public static void main(String[] args) throws Exception {\n\n        group(asList(ArrayList.class, List.class))\n            .entrySet()\n            .forEach(System.out::println);\n    }\n\n    private static Map&lt;Class&lt;?&gt;, List&lt;Class&lt;?&gt;&gt;&gt; group(List&lt;Class&lt;?&gt;&gt; classes) {\n        final Map&lt;Class&lt;?&gt;, List&lt;Class&lt;?&gt;&gt;&gt; grouped = classes\n                .stream()\n                .collect(HashMap::new,\n                         (m, v) -&gt; m.merge(v.getSuperclass(),\n                                           asList(v),\n                                           (oldList, newList) -&gt; Stream.concat(oldList.stream(),\n                                                                               newList.stream())\n                                                                       .collect(toList())),\n                         HashMap::putAll);\n\n        return grouped;\n    }\n}\n</code></pre>\n<h3>Output:</h3>\n<pre><code>null=[interface java.util.List]\nclass java.util.AbstractList=[class java.util.ArrayList]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16992450,"reputation":21,"user_id":12291718,"display_name":"Florimon van Putte"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689865657,"creation_date":1689854308,"answer_id":76729622,"question_id":22625065,"body_markdown":"This is what I settled on:\r\n\r\n\r\n```\r\nimport org.junit.jupiter.api.Test;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.Collection;\r\nimport java.util.HashMap;\r\nimport java.util.HashSet;\r\nimport java.util.List;\r\nimport java.util.Map;\r\nimport java.util.Set;\r\nimport java.util.function.Function;\r\nimport java.util.function.Supplier;\r\nimport java.util.stream.Collector;\r\nimport java.util.stream.Collectors;\r\n\r\nimport static org.junit.jupiter.api.Assertions.assertEquals;\r\n\r\nclass CollectorTest {\r\n\r\n    record Pair(Integer left, Integer right) {}\r\n    List&lt;Pair&gt; pairs = List.of(new Pair(null, 1), new Pair(null, 2),\r\n                               new Pair(1, 10),   new Pair(1, 11),\r\n                               new Pair(2, 20),   new Pair(2, 21));\r\n\r\n    @Test\r\n    void testToMapOfSets() {\r\n        Map&lt;Integer, Set&lt;Integer&gt;&gt; map = pairs.stream().collect(CollectorTest.toMapOfSets(Pair::left, Pair::right));\r\n        assertEquals(Set.of(1, 2),   map.get(null));\r\n        assertEquals(Set.of(10, 11), map.get(1));\r\n        assertEquals(Set.of(20, 21), map.get(2));\r\n    }\r\n\r\n    @Test\r\n    void testMapOfLists() {\r\n        Map&lt;Integer, List&lt;Integer&gt;&gt; map = pairs.stream().collect(CollectorTest.toMapOfLists(Pair::left, Pair::right));\r\n        assertEquals(List.of(1,2),   map.get(null));\r\n        assertEquals(List.of(10,11), map.get(1));\r\n        assertEquals(List.of(20,21), map.get(2));\r\n    }\r\n\r\n    public static &lt;T, K, U&gt; Collector&lt;T, ?, Map&lt;K, Set&lt;U&gt;&gt;&gt; toMapOfSets(Function&lt;? super T, ? extends K&gt; keyMapper,\r\n                                                                        Function&lt;? super T, ? extends U&gt; valueMapper) {\r\n        return toMapOfCollections(keyMapper, valueMapper, HashSet::new);\r\n    }\r\n\r\n    public static &lt;T, K, U&gt; Collector&lt;T, ?, Map&lt;K,List&lt;U&gt;&gt;&gt; toMapOfLists(Function&lt;? super T, ? extends K&gt; keyMapper,\r\n                                                                         Function&lt;? super T, ? extends U&gt; valueMapper) {\r\n        return toMapOfCollections(keyMapper, valueMapper, ArrayList::new);\r\n    }\r\n\r\n    private static &lt;T, K, U, C extends Collection&lt;U&gt;&gt;\r\n    Collector&lt;T, ?, Map&lt;K,C&gt;&gt; toMapOfCollections(Function&lt;? super T, ? extends K&gt; keyMapper,\r\n                                                 Function&lt;? super T, ? extends U&gt; valueMapper,\r\n                                                 Supplier&lt;C&gt; collectionSupplier) {\r\n        return Collectors.toMap(keyMapper, valueMapper.andThen(value -&gt; {\r\n            C collection = collectionSupplier.get();\r\n            collection.add(value);\r\n            return collection;\r\n        }), (collection1, collection2) -&gt; {\r\n            collection1.addAll(collection2);\r\n            return collection1;\r\n        }, HashMap::new);\r\n    }\r\n}\r\n```","title":"Collectors.groupingBy doesn&#39;t accept null keys","body":"<p>This is what I settled on:</p>\n<pre><code>import org.junit.jupiter.api.Test;\n\nimport java.util.ArrayList;\nimport java.util.Collection;\nimport java.util.HashMap;\nimport java.util.HashSet;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Set;\nimport java.util.function.Function;\nimport java.util.function.Supplier;\nimport java.util.stream.Collector;\nimport java.util.stream.Collectors;\n\nimport static org.junit.jupiter.api.Assertions.assertEquals;\n\nclass CollectorTest {\n\n    record Pair(Integer left, Integer right) {}\n    List&lt;Pair&gt; pairs = List.of(new Pair(null, 1), new Pair(null, 2),\n                               new Pair(1, 10),   new Pair(1, 11),\n                               new Pair(2, 20),   new Pair(2, 21));\n\n    @Test\n    void testToMapOfSets() {\n        Map&lt;Integer, Set&lt;Integer&gt;&gt; map = pairs.stream().collect(CollectorTest.toMapOfSets(Pair::left, Pair::right));\n        assertEquals(Set.of(1, 2),   map.get(null));\n        assertEquals(Set.of(10, 11), map.get(1));\n        assertEquals(Set.of(20, 21), map.get(2));\n    }\n\n    @Test\n    void testMapOfLists() {\n        Map&lt;Integer, List&lt;Integer&gt;&gt; map = pairs.stream().collect(CollectorTest.toMapOfLists(Pair::left, Pair::right));\n        assertEquals(List.of(1,2),   map.get(null));\n        assertEquals(List.of(10,11), map.get(1));\n        assertEquals(List.of(20,21), map.get(2));\n    }\n\n    public static &lt;T, K, U&gt; Collector&lt;T, ?, Map&lt;K, Set&lt;U&gt;&gt;&gt; toMapOfSets(Function&lt;? super T, ? extends K&gt; keyMapper,\n                                                                        Function&lt;? super T, ? extends U&gt; valueMapper) {\n        return toMapOfCollections(keyMapper, valueMapper, HashSet::new);\n    }\n\n    public static &lt;T, K, U&gt; Collector&lt;T, ?, Map&lt;K,List&lt;U&gt;&gt;&gt; toMapOfLists(Function&lt;? super T, ? extends K&gt; keyMapper,\n                                                                         Function&lt;? super T, ? extends U&gt; valueMapper) {\n        return toMapOfCollections(keyMapper, valueMapper, ArrayList::new);\n    }\n\n    private static &lt;T, K, U, C extends Collection&lt;U&gt;&gt;\n    Collector&lt;T, ?, Map&lt;K,C&gt;&gt; toMapOfCollections(Function&lt;? super T, ? extends K&gt; keyMapper,\n                                                 Function&lt;? super T, ? extends U&gt; valueMapper,\n                                                 Supplier&lt;C&gt; collectionSupplier) {\n        return Collectors.toMap(keyMapper, valueMapper.andThen(value -&gt; {\n            C collection = collectionSupplier.get();\n            collection.add(value);\n            return collection;\n        }), (collection1, collection2) -&gt; {\n            collection1.addAll(collection2);\n            return collection1;\n        }, HashMap::new);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":2650998,"reputation":29491,"user_id":3411681,"accept_rate":61,"display_name":"Marcelo Glasberg"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61538,"favorite_count":0,"down_vote_count":0,"up_vote_count":70,"accepted_answer_id":22650233,"answer_count":8,"score":70,"last_activity_date":1689865657,"creation_date":1395719125,"question_id":22625065,"body_markdown":"In Java 8, this works:\r\n\r\n    Stream&lt;Class&gt; stream = Stream.of(ArrayList.class);\r\n    HashMap&lt;Class, List&lt;Class&gt;&gt; map = (HashMap)stream.collect(Collectors.groupingBy(Class::getSuperclass));\r\n\r\nBut this doesn&#39;t:\r\n\r\n    Stream&lt;Class&gt; stream = Stream.of(List.class);\r\n    HashMap&lt;Class, List&lt;Class&gt;&gt; map = (HashMap)stream.collect(Collectors.groupingBy(Class::getSuperclass));\r\n\r\nMaps allows a null key, and List.class.getSuperclass() returns null. But Collectors.groupingBy emits a NPE, at Collectors.java, line 907:\r\n\r\n    K key = Objects.requireNonNull(classifier.apply(t), &quot;element cannot be mapped to a null key&quot;); \r\n\r\nIt works if I create my own collector, with this line changed to:\r\n\r\n    K key = classifier.apply(t);  \r\n\r\nMy questions are:\r\n\r\n1) The Javadoc of Collectors.groupingBy doesn&#39;t say it shouldn&#39;t map a null key. Is this behavior necessary for some reason?\r\n\r\n2) Is there another, easier way, to accept a null key, without having to create my own collector?\r\n","title":"Collectors.groupingBy doesn&#39;t accept null keys","body":"<p>In Java 8, this works:</p>\n\n<pre><code>Stream&lt;Class&gt; stream = Stream.of(ArrayList.class);\nHashMap&lt;Class, List&lt;Class&gt;&gt; map = (HashMap)stream.collect(Collectors.groupingBy(Class::getSuperclass));\n</code></pre>\n\n<p>But this doesn't:</p>\n\n<pre><code>Stream&lt;Class&gt; stream = Stream.of(List.class);\nHashMap&lt;Class, List&lt;Class&gt;&gt; map = (HashMap)stream.collect(Collectors.groupingBy(Class::getSuperclass));\n</code></pre>\n\n<p>Maps allows a null key, and List.class.getSuperclass() returns null. But Collectors.groupingBy emits a NPE, at Collectors.java, line 907:</p>\n\n<pre><code>K key = Objects.requireNonNull(classifier.apply(t), \"element cannot be mapped to a null key\"); \n</code></pre>\n\n<p>It works if I create my own collector, with this line changed to:</p>\n\n<pre><code>K key = classifier.apply(t);  \n</code></pre>\n\n<p>My questions are:</p>\n\n<p>1) The Javadoc of Collectors.groupingBy doesn't say it shouldn't map a null key. Is this behavior necessary for some reason?</p>\n\n<p>2) Is there another, easier way, to accept a null key, without having to create my own collector?</p>\n"},{"tags":["java","scala"],"answers":[{"tags":[],"owner":{"account_id":3136832,"reputation":365,"user_id":2653184,"display_name":"mhei"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1689865606,"creation_date":1689865606,"answer_id":76731277,"question_id":76121875,"body_markdown":"Try using this 3 options\r\n\r\n    --add-opens=java.base/java.util=ALL-UNNAMED\r\n    --add-opens=java.base/java.lang=ALL-UNNAMED\r\n    --add-opens=java.base/java.lang.invoke=ALL-UNNAMED\r\n\r\nthis worked for me with an error message very similar to yours for jdk 17","title":"java.lang.reflect.InaccessibleObjectException: Unable to make field protected transient int java.util.AbstractList.modCount accessible","body":"<p>Try using this 3 options</p>\n<pre><code>--add-opens=java.base/java.util=ALL-UNNAMED\n--add-opens=java.base/java.lang=ALL-UNNAMED\n--add-opens=java.base/java.lang.invoke=ALL-UNNAMED\n</code></pre>\n<p>this worked for me with an error message very similar to yours for jdk 17</p>\n"}],"owner":{"account_id":19747968,"reputation":67,"user_id":14459924,"display_name":"Bender Rodriguez"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":958,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":76731277,"answer_count":1,"score":4,"last_activity_date":1689865606,"creation_date":1682607457,"question_id":76121875,"body_markdown":"I am getting the issue below:\r\n\r\n```\r\njava.lang.reflect.InaccessibleObjectException: Unable to make field protected transient int java.util.AbstractList.modCount accessible: module java.base does not &quot;opens java.util&quot; to unnamed module @43393097\r\n    at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:354)\r\n```\r\n\r\nThe fix is widely-documented on the net: use JVM options\r\n\r\n--illegal-access=permit \r\n\r\nor\r\n\r\n--add-opens=java.base/java.util=ALL-UNNAMED. \r\n\r\nThe former was removed after JDK 11. I started with JDK 17 and have now tried both Amazon and Open JDK 11. Neither of these options used with a JDK version 11 eliminates the error, nor does using both at once. I&#39;ve tried every permutation (and also using --illegal-access=warn).\r\n\r\nI&#39;m launching the app like this:\r\n\r\n```\r\nme in ~/dev/project on branch main &gt; java --version\r\nopenjdk 11.0.19 2023-04-18 LTS\r\nOpenJDK Runtime Environment Corretto-11.0.19.7.1 (build 11.0.19+7-LTS)\r\nOpenJDK 64-Bit Server VM Corretto-11.0.19.7.1 (build 11.0.19+7-LTS, mixed mode)\r\nme in ~/dev/project on branch main &gt;                          \r\nme in ~/dev/project on branch main &gt; java -jar --add-opens=java.base/java.util=ALL-UNNAMED out/server/assembly.dest/out.jar \r\n```\r\n\r\nEverything I read suggests that using --add-opens=java.base... will fix the issue on JDK11. It does not.\r\n\r\nUsing --illegal-access=permit, either along or with --add-opens, also doesn&#39;t work.\r\n\r\nThere&#39;s no chance the way a jar is *built* can influence this, right? It&#39;s strictly a runtime permissions thing.","title":"java.lang.reflect.InaccessibleObjectException: Unable to make field protected transient int java.util.AbstractList.modCount accessible","body":"<p>I am getting the issue below:</p>\n<pre><code>java.lang.reflect.InaccessibleObjectException: Unable to make field protected transient int java.util.AbstractList.modCount accessible: module java.base does not &quot;opens java.util&quot; to unnamed module @43393097\n    at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:354)\n</code></pre>\n<p>The fix is widely-documented on the net: use JVM options</p>\n<p>--illegal-access=permit</p>\n<p>or</p>\n<p>--add-opens=java.base/java.util=ALL-UNNAMED.</p>\n<p>The former was removed after JDK 11. I started with JDK 17 and have now tried both Amazon and Open JDK 11. Neither of these options used with a JDK version 11 eliminates the error, nor does using both at once. I've tried every permutation (and also using --illegal-access=warn).</p>\n<p>I'm launching the app like this:</p>\n<pre><code>me in ~/dev/project on branch main &gt; java --version\nopenjdk 11.0.19 2023-04-18 LTS\nOpenJDK Runtime Environment Corretto-11.0.19.7.1 (build 11.0.19+7-LTS)\nOpenJDK 64-Bit Server VM Corretto-11.0.19.7.1 (build 11.0.19+7-LTS, mixed mode)\nme in ~/dev/project on branch main &gt;                          \nme in ~/dev/project on branch main &gt; java -jar --add-opens=java.base/java.util=ALL-UNNAMED out/server/assembly.dest/out.jar \n</code></pre>\n<p>Everything I read suggests that using --add-opens=java.base... will fix the issue on JDK11. It does not.</p>\n<p>Using --illegal-access=permit, either along or with --add-opens, also doesn't work.</p>\n<p>There's no chance the way a jar is <em>built</em> can influence this, right? It's strictly a runtime permissions thing.</p>\n"},{"tags":["java","junit","junit4"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1689865869,"post_id":76731271,"comment_id":135276815,"body_markdown":"I don&#39;t have a JUnit 4 handy to test, but I&#39;m about 99% sure that `@Before` should work just fine with `@ParameterizedTest`. Are you sure the problem isn&#39;t somewhere else?","body":"I don&#39;t have a JUnit 4 handy to test, but I&#39;m about 99% sure that <code>@Before</code> should work just fine with <code>@ParameterizedTest</code>. Are you sure the problem isn&#39;t somewhere else?"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1689867011,"post_id":76731271,"comment_id":135277142,"body_markdown":"(i) is `ParameterizedTest` part of JUnit 4? (ii) [javadoc](https://junit.org/junit4/javadoc/latest/) of `Before`: &quot;Annotating a public void method with @Before causes that method to be run before the [Test](https://junit.org/junit4/javadoc/latest/org/junit/Test.html) method.&quot; (no `ParameterizedTest` mentioned/linked)","body":"(i) is <code>ParameterizedTest</code> part of JUnit 4? (ii) <a href=\"https://junit.org/junit4/javadoc/latest/\" rel=\"nofollow noreferrer\">javadoc</a> of <code>Before</code>: &quot;Annotating a public void method with @Before causes that method to be run before the <a href=\"https://junit.org/junit4/javadoc/latest/org/junit/Test.html\" rel=\"nofollow noreferrer\">Test</a> method.&quot; (no <code>ParameterizedTest</code> mentioned/linked)"},{"owner":{"account_id":10777133,"reputation":7282,"user_id":7928721,"display_name":"samabcde"},"score":3,"creation_date":1689867819,"post_id":76731271,"comment_id":135277348,"body_markdown":"Any reason you use ParameterizedTest from junit 5 with junit 4?\nUsing `org.junit.jupiter.api.BeforeEach` with `org.junit.jupiter.api.Test;` is one of the way to fix the problem","body":"Any reason you use ParameterizedTest from junit 5 with junit 4? Using <code>org.junit.jupiter.api.BeforeEach</code> with <code>org.junit.jupiter.api.Test;</code> is one of the way to fix the problem"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":3,"creation_date":1689870514,"post_id":76731271,"comment_id":135277920,"body_markdown":"[Parameterized tests in JUnit 4](https://github.com/junit-team/junit4/wiki/Parameterized-tests) work vastly different from JUnit 5. You cannot use JUnit 5 annotations with JUnit 4 like you do in your question and expect it to work. Your test is probably run by a JUnit 5 runner, which doesn&#39;t do anything with `@Before` (the JUnit 5 equivalent is `@BeforeEach`).","body":"<a href=\"https://github.com/junit-team/junit4/wiki/Parameterized-tests\" rel=\"nofollow noreferrer\">Parameterized tests in JUnit 4</a> work vastly different from JUnit 5. You cannot use JUnit 5 annotations with JUnit 4 like you do in your question and expect it to work. Your test is probably run by a JUnit 5 runner, which doesn&#39;t do anything with <code>@Before</code> (the JUnit 5 equivalent is <code>@BeforeEach</code>)."}],"owner":{"account_id":300331,"reputation":50767,"user_id":607407,"accept_rate":71,"display_name":"Tom&#225;š Zato"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689865572,"creation_date":1689865572,"question_id":76731271,"body_markdown":"I have a JUnit 4 test class:\r\n\r\n```\r\nimport org.junit.Before;\r\nimport org.junit.Test;\r\nimport org.junit.jupiter.params.ParameterizedTest;\r\nimport org.junit.jupiter.params.provider.ValueSource;\r\n\r\nimport static org.junit.Assert.assertTrue;\r\n\r\npublic class MyBasicTest {\r\n\r\n    boolean valueIsSetup = false;\r\n\r\n    @Before\r\n    public void setup() {\r\n        valueIsSetup = true;\r\n    }\r\n\r\n    @Test\r\n    public void testUsingValue() throws Exception {\r\n        assertTrue(valueIsSetup);\r\n    }\r\n\r\n    @ParameterizedTest\r\n    @ValueSource(booleans = {true, false})\r\n    public void parametrizedUsingValue(boolean testValue) throws Exception {\r\n        assertTrue(valueIsSetup);\r\n    }\r\n}\r\n```\r\n\r\nObviously, this is a sample. This will fail in the `parametrizedUsingValue` test method.\r\n\r\n`@BeforeClass` exists, but it requires the setup to be static and doesn&#39;t guarantee any cleanup of the static members you initialize. That can be a problem in actual tests, even though it would not be problem in the sample above.\r\n\r\nWhy does `@Before` not apply to `@ParametrizedTest`. Is there any way of working around that without compromising independence of tests?","title":"JUnit4 - why does @Before run before @Test but not before @ParametrizedTest?","body":"<p>I have a JUnit 4 test class:</p>\n<pre><code>import org.junit.Before;\nimport org.junit.Test;\nimport org.junit.jupiter.params.ParameterizedTest;\nimport org.junit.jupiter.params.provider.ValueSource;\n\nimport static org.junit.Assert.assertTrue;\n\npublic class MyBasicTest {\n\n    boolean valueIsSetup = false;\n\n    @Before\n    public void setup() {\n        valueIsSetup = true;\n    }\n\n    @Test\n    public void testUsingValue() throws Exception {\n        assertTrue(valueIsSetup);\n    }\n\n    @ParameterizedTest\n    @ValueSource(booleans = {true, false})\n    public void parametrizedUsingValue(boolean testValue) throws Exception {\n        assertTrue(valueIsSetup);\n    }\n}\n</code></pre>\n<p>Obviously, this is a sample. This will fail in the <code>parametrizedUsingValue</code> test method.</p>\n<p><code>@BeforeClass</code> exists, but it requires the setup to be static and doesn't guarantee any cleanup of the static members you initialize. That can be a problem in actual tests, even though it would not be problem in the sample above.</p>\n<p>Why does <code>@Before</code> not apply to <code>@ParametrizedTest</code>. Is there any way of working around that without compromising independence of tests?</p>\n"},{"tags":["java","android","flutter","kotlin"],"answers":[{"comments":[{"owner":{"account_id":9056818,"reputation":789,"user_id":6744813,"display_name":"Bilal Aslam"},"score":0,"creation_date":1690363166,"post_id":76731139,"comment_id":135341673,"body_markdown":"its not relevant. Its saying about calling platform specific code, I am talking about integrating a complete native app and navigating to it.","body":"its not relevant. Its saying about calling platform specific code, I am talking about integrating a complete native app and navigating to it."}],"tags":[],"owner":{"account_id":16006342,"reputation":1,"user_id":11551740,"display_name":"Ali Zain"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689864765,"creation_date":1689864765,"answer_id":76731139,"question_id":76720309,"body_markdown":"Yes you can by using platform channels, but you have to do some work.\r\nHere is for your reference: https://docs.flutter.dev/platform-integration/platform-channels","title":"Can I integrate a native android java application in flutter project?","body":"<p>Yes you can by using platform channels, but you have to do some work.\nHere is for your reference: <a href=\"https://docs.flutter.dev/platform-integration/platform-channels\" rel=\"nofollow noreferrer\">https://docs.flutter.dev/platform-integration/platform-channels</a></p>\n"}],"owner":{"account_id":9056818,"reputation":789,"user_id":6744813,"display_name":"Bilal Aslam"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689864765,"creation_date":1689762490,"question_id":76720309,"body_markdown":"I have a native android java simple game applications. Now I want to build a flutter project that will have all those native game apps. Can I integrate them in flutter project?\r\n\r\nI tried copying the native project folder in android directory of the flutter project but could not figure out how to integrate properly.","title":"Can I integrate a native android java application in flutter project?","body":"<p>I have a native android java simple game applications. Now I want to build a flutter project that will have all those native game apps. Can I integrate them in flutter project?</p>\n<p>I tried copying the native project folder in android directory of the flutter project but could not figure out how to integrate properly.</p>\n"},{"tags":["java","threadpoolexecutor","rate-limiting"],"comments":[{"owner":{"account_id":3816309,"reputation":9934,"user_id":3165602,"accept_rate":62,"display_name":"Oleg Sklyar"},"score":0,"creation_date":1520671204,"post_id":49206773,"comment_id":85418988,"body_markdown":"I guess the downvoters did not like the lack of evidence for your own effort in your original post. But I can hardly see which sort of evidence one could provide for this algorithmically complex task. Good luck in finding the solution.","body":"I guess the downvoters did not like the lack of evidence for your own effort in your original post. But I can hardly see which sort of evidence one could provide for this algorithmically complex task. Good luck in finding the solution."},{"owner":{"account_id":35417,"reputation":1065761,"user_id":100297,"display_name":"Martijn Pieters"},"score":0,"creation_date":1520886265,"post_id":49206773,"comment_id":85491501,"body_markdown":"Meta commentary has no place in questions, do not edit those back in. Questions are meant to last beyond your specific needs, for future visitors to benefit from, and future visitors do not care about the process here.","body":"Meta commentary has no place in questions, do not edit those back in. Questions are meant to last beyond your specific needs, for future visitors to benefit from, and future visitors do not care about the process here."},{"owner":{"account_id":8235,"reputation":87020,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"score":0,"creation_date":1521102279,"post_id":49206773,"comment_id":85591161,"body_markdown":"@OlegSklyar FYI, I got it working. Answer posted below.","body":"@OlegSklyar FYI, I got it working. Answer posted below."},{"owner":{"account_id":3816309,"reputation":9934,"user_id":3165602,"accept_rate":62,"display_name":"Oleg Sklyar"},"score":0,"creation_date":1521107516,"post_id":49206773,"comment_id":85594366,"body_markdown":"@Gili Nice job!","body":"@Gili Nice job!"}],"answers":[{"comments":[{"owner":{"account_id":5770284,"reputation":595,"user_id":4553898,"accept_rate":83,"display_name":"thaveethu gce"},"score":0,"creation_date":1620110203,"post_id":49286181,"comment_id":119096485,"body_markdown":"Source code link throwing 404 not found . could you share if possible?","body":"Source code link throwing 404 not found . could you share if possible?"},{"owner":{"account_id":5770284,"reputation":595,"user_id":4553898,"accept_rate":83,"display_name":"thaveethu gce"},"score":0,"creation_date":1620295554,"post_id":49286181,"comment_id":119160806,"body_markdown":"Thank you for the code. i have one doubt. since here you are not using any external persistent queue like redis or jms will this scale for the volume? i.e you need to process 100 RPS but what if incoming req is 100000 RPS .  what will happen in this case?","body":"Thank you for the code. i have one doubt. since here you are not using any external persistent queue like redis or jms will this scale for the volume? i.e you need to process 100 RPS but what if incoming req is 100000 RPS .  what will happen in this case?"},{"owner":{"account_id":8235,"reputation":87020,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"score":0,"creation_date":1620303551,"post_id":49286181,"comment_id":119164514,"body_markdown":"@thaveethugce `Bucket` is thread-safe so you&#39;ll get one thread at a time acquiring a token and everyone else blocking was waiting on the mutex or waiting for the next token to become available. You can invoke `Bucket.consume()` from JMH to figure out the average number of tokens your machine will be able to consume per second. It should be pretty high.","body":"@thaveethugce <code>Bucket</code> is thread-safe so you&#39;ll get one thread at a time acquiring a token and everyone else blocking was waiting on the mutex or waiting for the next token to become available. You can invoke <code>Bucket.consume()</code> from JMH to figure out the average number of tokens your machine will be able to consume per second. It should be pretty high."},{"owner":{"account_id":5770284,"reputation":595,"user_id":4553898,"accept_rate":83,"display_name":"thaveethu gce"},"score":0,"creation_date":1620373974,"post_id":49286181,"comment_id":119186862,"body_markdown":"Thanks for your time explaining me the basics. i am Sorry still i am not clear in this. what will happen if more request flooded ? at one point of time we need to reject the request? how many request can be waiting to get token ? will more threads waiting can leads to memory overflow and requests getting rejected? assume QPS allowed in rate limiting is 1000 but incoming request is really huge like Million / sec","body":"Thanks for your time explaining me the basics. i am Sorry still i am not clear in this. what will happen if more request flooded ? at one point of time we need to reject the request? how many request can be waiting to get token ? will more threads waiting can leads to memory overflow and requests getting rejected? assume QPS allowed in rate limiting is 1000 but incoming request is really huge like Million / sec"},{"owner":{"account_id":8235,"reputation":87020,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"score":0,"creation_date":1620492365,"post_id":49286181,"comment_id":119219107,"body_markdown":"@thaveethugce It depends on which class you are looking at. `Bucket` does not have any sort of limit. Trying to acquire a token will block the thread until your turn is reached. If you are talking about `RateLimitedBlockingDequeue` then you can see from the Javadoc that it has a corresponding `capacity`. If you try to push more tasks onto the deque than `capacity` allows then you will get the behavior specified by `BlockingDeque.add()` (i.e. `IllegalStateException` will get thrown)","body":"@thaveethugce It depends on which class you are looking at. <code>Bucket</code> does not have any sort of limit. Trying to acquire a token will block the thread until your turn is reached. If you are talking about <code>RateLimitedBlockingDequeue</code> then you can see from the Javadoc that it has a corresponding <code>capacity</code>. If you try to push more tasks onto the deque than <code>capacity</code> allows then you will get the behavior specified by <code>BlockingDeque.add()</code> (i.e. <code>IllegalStateException</code> will get thrown)"}],"tags":[],"owner":{"account_id":8235,"reputation":87020,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"comment_count":5,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1620224723,"creation_date":1521055547,"answer_id":49286181,"question_id":49206773,"body_markdown":"Answering my own question:\r\n\r\n* It isn&#39;t possible to have a solution that is completely non-blocking. Even `ScheduledThreadPoolExecutor` keeps at least one thread around waiting for the queue to return a new task.\r\n* `ThreadPoolExecutor` sits on top of a `BlockingQueue`. When there are no tasks left, it blocks on `BlockingQueue.take()`\r\n* The solution has 3 moving pieces:\r\n1. A rate limiter.\r\n2. A `BlockingQueue` that hides elements until the rate limiter allows their consumption.\r\n3. A `ThreadPoolExecutor` that sits on top of the `BlockingQueue`.\r\n\r\nThe Rate Limiter\r\n---\r\nI provide my own rate limiter based on the [Token Bucket algorithm](https://en.wikipedia.org/wiki/Token_bucket) algorithm to overcome `RateLimiter`&#39;s [limitations](https://stackoverflow.com/q/27711962/14731). The source-code can be found [here](https://github.com/cowwoc/token-bucket).\r\n\r\n---\r\n\r\nThe BlockingQueue\r\n---\r\nI implementing a `BlockingDeque` (which extends `BlockingQueue`) because in the future I want to try pushing failed tasks back to the front of the queue.\r\n\r\nRateLimitedBlockingDeque.java\r\n\r\n    import java.time.Duration;\r\n    import java.util.Collection;\r\n    import java.util.Iterator;\r\n    import java.util.NoSuchElementException;\r\n    import java.util.concurrent.BlockingDeque;\r\n    import java.util.concurrent.LinkedBlockingDeque;\r\n    import java.util.concurrent.TimeUnit;\r\n    import static org.bitbucket.cowwoc.requirements.core.Requirements.requireThat;\r\n    \r\n    /**\r\n     * A blocking deque of elements, in which an element can only be taken when the deque-wide delay has expired.\r\n     * &lt;p&gt;\r\n     * The optional capacity bound constructor argument serves as a way to prevent excessive expansion. The capacity, if\r\n     * unspecified, is equal to {@link Integer#MAX_VALUE}.\r\n     * &lt;p&gt;\r\n     * Even though methods that take elements, such as {@code take} or {@code poll}, respect the deque-wide delay the\r\n     * remaining methods treat them as normal elements. For example, the {@code size} method returns the count of both\r\n     * expired and unexpired elements.\r\n     * &lt;p&gt;\r\n     * This class and its iterator implement all of the &lt;em&gt;optional&lt;/em&gt; methods of the {@link Collection} and {@link\r\n     * Iterator} interfaces.\r\n     *\r\n     * @param &lt;E&gt; the type of elements in the deque\r\n     * @author Gili Tzabari\r\n     */\r\n    public final class RateLimitedBlockingDeque&lt;E&gt; implements BlockingDeque&lt;E&gt;\r\n    {\r\n    \tprivate final int capacity;\r\n    \tprivate final LinkedBlockingDeque&lt;E&gt; delegate;\r\n    \tprivate final Bucket rateLimit = new Bucket();\r\n    \r\n    \t/**\r\n    \t * Creates a {@code RateLimitedBlockingDeque} with a capacity of {@link Integer#MAX_VALUE}.\r\n    \t */\r\n    \tpublic RateLimitedBlockingDeque()\r\n    \t{\r\n    \t\tthis.capacity = Integer.MAX_VALUE;\r\n    \t\tthis.delegate = new LinkedBlockingDeque&lt;&gt;();\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * Creates a {@code RateLimitedBlockingDeque} with the given (fixed) capacity.\r\n    \t *\r\n    \t * @param capacity the capacity of this deque\r\n    \t * @throws IllegalArgumentException if {@code capacity} is less than 1\r\n    \t */\r\n    \tpublic RateLimitedBlockingDeque(int capacity)\r\n    \t{\r\n    \t\tthis.capacity = capacity;\r\n    \t\tthis.delegate = new LinkedBlockingDeque&lt;&gt;(capacity);\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * @return the capacity of the deque\r\n    \t */\r\n    \tpublic int getCapacity()\r\n    \t{\r\n    \t\treturn capacity;\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * Indicates the rate at which elements may be taken from the queue.\r\n    \t *\r\n    \t * @param elements the number of elements that may be taken per {@code period}\r\n    \t * @param period   indicates how often elements may be taken\r\n    \t * @throws NullPointerException     if {@code period} is null\r\n    \t * @throws IllegalArgumentException if the requested rate is greater than element per nanosecond\r\n    \t */\r\n    \tpublic void setRate(long elements, Duration period)\r\n    \t{\r\n    \t\tsynchronized (rateLimit)\r\n    \t\t{\r\n    \t\t\tLimit newLimit = new Limit(elements, period, 0, Long.MAX_VALUE);\r\n    \t\t\tif (rateLimit.getLimits().isEmpty())\r\n    \t\t\t\trateLimit.addLimit(newLimit);\r\n    \t\t\telse\r\n    \t\t\t{\r\n    \t\t\t\tLimit oldLimit = rateLimit.getLimits().iterator().next();\r\n    \t\t\t\trateLimit.replaceLimit(oldLimit, newLimit);\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * Allows consumption of elements without limit.\r\n    \t */\r\n    \tpublic void removeRate()\r\n    \t{\r\n    \t\tsynchronized (rateLimit)\r\n    \t\t{\r\n    \t\t\trateLimit.removeAllLimits();\r\n    \t\t}\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void addFirst(E e)\r\n    \t{\r\n    \t\tdelegate.addFirst(e);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void addLast(E e)\r\n    \t{\r\n    \t\tdelegate.addLast(e);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean offerFirst(E e)\r\n    \t{\r\n    \t\treturn delegate.offerFirst(e);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean offerLast(E e)\r\n    \t{\r\n    \t\treturn delegate.offerLast(e);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void putFirst(E e) throws InterruptedException\r\n    \t{\r\n    \t\tdelegate.putFirst(e);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void putLast(E e) throws InterruptedException\r\n    \t{\r\n    \t\tdelegate.putLast(e);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean offerFirst(E e, long timeout, TimeUnit unit) throws InterruptedException\r\n    \t{\r\n    \t\treturn delegate.offerFirst(e, timeout, unit);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean offerLast(E e, long timeout, TimeUnit unit) throws InterruptedException\r\n    \t{\r\n    \t\treturn delegate.offerLast(e, timeout, unit);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic E removeFirst()\r\n    \t{\r\n    \t\tif (rateLimit.tryConsume())\r\n    \t\t\treturn delegate.removeFirst();\r\n    \t\tthrow new NoSuchElementException();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic E removeLast()\r\n    \t{\r\n    \t\tif (rateLimit.tryConsume())\r\n    \t\t\treturn delegate.removeLast();\r\n    \t\tthrow new NoSuchElementException();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic E pollFirst()\r\n    \t{\r\n    \t\tif (rateLimit.tryConsume())\r\n    \t\t\treturn delegate.pollFirst();\r\n    \t\treturn null;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic E pollLast()\r\n    \t{\r\n    \t\tif (rateLimit.tryConsume())\r\n    \t\t\treturn delegate.pollLast();\r\n    \t\treturn null;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic E takeFirst() throws InterruptedException\r\n    \t{\r\n    \t\trateLimit.consume();\r\n    \t\treturn delegate.takeFirst();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic E takeLast() throws InterruptedException\r\n    \t{\r\n    \t\trateLimit.consume();\r\n    \t\treturn delegate.takeLast();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic E pollFirst(long timeout, TimeUnit unit) throws InterruptedException\r\n    \t{\r\n    \t\tif (rateLimit.consume(1, timeout, unit))\r\n    \t\t\treturn delegate.pollFirst(timeout, unit);\r\n    \t\treturn null;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic E pollLast(long timeout, TimeUnit unit) throws InterruptedException\r\n    \t{\r\n    \t\tif (rateLimit.consume(1, timeout, unit))\r\n    \t\t\treturn delegate.pollLast(timeout, unit);\r\n    \t\treturn null;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic E getFirst()\r\n    \t{\r\n    \t\treturn delegate.getFirst();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic E getLast()\r\n    \t{\r\n    \t\treturn delegate.getLast();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic E peekFirst()\r\n    \t{\r\n    \t\treturn delegate.peekFirst();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic E peekLast()\r\n    \t{\r\n    \t\treturn delegate.peekLast();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean removeFirstOccurrence(Object o)\r\n    \t{\r\n    \t\treturn delegate.removeFirstOccurrence(o);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean removeLastOccurrence(Object o)\r\n    \t{\r\n    \t\treturn delegate.removeLastOccurrence(o);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean add(E e)\r\n    \t{\r\n    \t\treturn delegate.add(e);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean offer(E e)\r\n    \t{\r\n    \t\treturn delegate.offer(e);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void put(E e) throws InterruptedException\r\n    \t{\r\n    \t\tputLast(e);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean offer(E e, long timeout, TimeUnit unit) throws InterruptedException\r\n    \t{\r\n    \t\treturn delegate.offer(e, timeout, unit);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic E remove()\r\n    \t{\r\n    \t\treturn removeFirst();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic E poll()\r\n    \t{\r\n    \t\treturn pollFirst();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic E take() throws InterruptedException\r\n    \t{\r\n    \t\treturn takeFirst();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic E poll(long timeout, TimeUnit unit) throws InterruptedException\r\n    \t{\r\n    \t\treturn pollFirst(timeout, unit);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic E element()\r\n    \t{\r\n    \t\treturn getFirst();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic E peek()\r\n    \t{\r\n    \t\treturn peekFirst();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic int remainingCapacity()\r\n    \t{\r\n    \t\treturn delegate.remainingCapacity();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic int drainTo(Collection&lt;? super E&gt; c)\r\n    \t{\r\n    \t\tint result = 0;\r\n    \t\twhile (true)\r\n    \t\t{\r\n    \t\t\tE next = pollFirst();\r\n    \t\t\tif (next == null)\r\n    \t\t\t\tbreak;\r\n    \t\t\tc.add(next);\r\n    \t\t}\r\n    \t\treturn result;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic int drainTo(Collection&lt;? super E&gt; c, int maxElements)\r\n    \t{\r\n    \t\tint result = 0;\r\n    \t\tdo\r\n    \t\t{\r\n    \t\t\tE next = pollFirst();\r\n    \t\t\tif (next == null)\r\n    \t\t\t\tbreak;\r\n    \t\t\tc.add(next);\r\n    \t\t}\r\n    \t\twhile (result &lt; maxElements);\r\n    \t\treturn result;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void push(E e)\r\n    \t{\r\n    \t\taddFirst(e);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic E pop()\r\n    \t{\r\n    \t\treturn removeFirst();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean remove(Object o)\r\n    \t{\r\n    \t\treturn removeFirstOccurrence(o);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic int size()\r\n    \t{\r\n    \t\treturn delegate.size();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean contains(Object o)\r\n    \t{\r\n    \t\treturn delegate.contains(o);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic Object[] toArray()\r\n    \t{\r\n    \t\treturn delegate.toArray();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic &lt;T&gt; T[] toArray(T[] a)\r\n    \t{\r\n    \t\treturn delegate.toArray(a);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic String toString()\r\n    \t{\r\n    \t\treturn delegate.toString();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void clear()\r\n    \t{\r\n    \t\tdelegate.clear();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic Iterator&lt;E&gt; iterator()\r\n    \t{\r\n    \t\treturn wrap(delegate.iterator());\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * @param delegateIterator the iterator to delegate to\r\n    \t * @return an iterator that respects the rate-limit\r\n    \t */\r\n    \tprivate Iterator&lt;E&gt; wrap(Iterator&lt;E&gt; delegateIterator)\r\n    \t{\r\n    \t\treturn new Iterator&lt;E&gt;()\r\n    \t\t{\r\n    \t\t\tprivate E previousElement = null;\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tpublic boolean hasNext()\r\n    \t\t\t{\r\n    \t\t\t\treturn delegateIterator.hasNext();\r\n    \t\t\t}\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tpublic E next()\r\n    \t\t\t{\r\n    \t\t\t\treturn delegateIterator.next();\r\n    \t\t\t}\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tpublic void remove()\r\n    \t\t\t{\r\n    \t\t\t\tif (previousElement == null)\r\n    \t\t\t\t\tthrow new IllegalStateException(&quot;next() not invoked, or remove() already invoked&quot;);\r\n    \t\t\t\ttry\r\n    \t\t\t\t{\r\n    \t\t\t\t\trateLimit.consume();\r\n    \t\t\t\t}\r\n    \t\t\t\tcatch (InterruptedException e)\r\n    \t\t\t\t{\r\n    \t\t\t\t\tthrow new IllegalStateException(e);\r\n    \t\t\t\t}\r\n    \t\t\t\tdelegateIterator.remove();\r\n    \t\t\t\tpreviousElement = null;\r\n    \t\t\t}\r\n    \t\t};\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic Iterator&lt;E&gt; descendingIterator()\r\n    \t{\r\n    \t\treturn wrap(delegate.descendingIterator());\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean addAll(Collection&lt;? extends E&gt; c)\r\n    \t{\r\n    \t\trequireThat(&quot;c&quot;, c).isNotNull().isNotEqualTo(&quot;this&quot;, this);\r\n    \t\tboolean modified = false;\r\n    \t\tfor (E e: c)\r\n    \t\t\tif (add(e))\r\n    \t\t\t\tmodified = true;\r\n    \t\treturn modified;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean isEmpty()\r\n    \t{\r\n    \t\treturn delegate.isEmpty();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean containsAll(Collection&lt;?&gt; c)\r\n    \t{\r\n    \t\treturn delegate.containsAll(c);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean removeAll(Collection&lt;?&gt; c)\r\n    \t{\r\n    \t\tIterator&lt;E&gt; i = iterator();\r\n    \t\tboolean modified = true;\r\n    \t\twhile (i.hasNext())\r\n    \t\t{\r\n    \t\t\tE element = i.next();\r\n    \t\t\tif (c.contains(element))\r\n    \t\t\t{\r\n    \t\t\t\ti.remove();\r\n    \t\t\t\tmodified = true;\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\treturn modified;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean retainAll(Collection&lt;?&gt; c)\r\n    \t{\r\n    \t\tIterator&lt;E&gt; i = iterator();\r\n    \t\tboolean modified = true;\r\n    \t\twhile (i.hasNext())\r\n    \t\t{\r\n    \t\t\tE element = i.next();\r\n    \t\t\tif (!c.contains(element))\r\n    \t\t\t{\r\n    \t\t\t\ti.remove();\r\n    \t\t\t\tmodified = true;\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\treturn modified;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic int hashCode()\r\n    \t{\r\n    \t\treturn delegate.hashCode();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean equals(Object obj)\r\n    \t{\r\n    \t\treturn delegate.equals(obj);\r\n    \t}\r\n    }","title":"Non-blocking rate-limited ThreadPoolExecutor","body":"<p>Answering my own question:</p>\n<ul>\n<li>It isn't possible to have a solution that is completely non-blocking. Even <code>ScheduledThreadPoolExecutor</code> keeps at least one thread around waiting for the queue to return a new task.</li>\n<li><code>ThreadPoolExecutor</code> sits on top of a <code>BlockingQueue</code>. When there are no tasks left, it blocks on <code>BlockingQueue.take()</code></li>\n<li>The solution has 3 moving pieces:</li>\n</ul>\n<ol>\n<li>A rate limiter.</li>\n<li>A <code>BlockingQueue</code> that hides elements until the rate limiter allows their consumption.</li>\n<li>A <code>ThreadPoolExecutor</code> that sits on top of the <code>BlockingQueue</code>.</li>\n</ol>\n<h2>The Rate Limiter</h2>\n<p>I provide my own rate limiter based on the <a href=\"https://en.wikipedia.org/wiki/Token_bucket\" rel=\"nofollow noreferrer\">Token Bucket algorithm</a> algorithm to overcome <code>RateLimiter</code>'s <a href=\"https://stackoverflow.com/q/27711962/14731\">limitations</a>. The source-code can be found <a href=\"https://github.com/cowwoc/token-bucket\" rel=\"nofollow noreferrer\">here</a>.</p>\n<hr />\n<h2>The BlockingQueue</h2>\n<p>I implementing a <code>BlockingDeque</code> (which extends <code>BlockingQueue</code>) because in the future I want to try pushing failed tasks back to the front of the queue.</p>\n<p>RateLimitedBlockingDeque.java</p>\n<pre><code>import java.time.Duration;\nimport java.util.Collection;\nimport java.util.Iterator;\nimport java.util.NoSuchElementException;\nimport java.util.concurrent.BlockingDeque;\nimport java.util.concurrent.LinkedBlockingDeque;\nimport java.util.concurrent.TimeUnit;\nimport static org.bitbucket.cowwoc.requirements.core.Requirements.requireThat;\n\n/**\n * A blocking deque of elements, in which an element can only be taken when the deque-wide delay has expired.\n * &lt;p&gt;\n * The optional capacity bound constructor argument serves as a way to prevent excessive expansion. The capacity, if\n * unspecified, is equal to {@link Integer#MAX_VALUE}.\n * &lt;p&gt;\n * Even though methods that take elements, such as {@code take} or {@code poll}, respect the deque-wide delay the\n * remaining methods treat them as normal elements. For example, the {@code size} method returns the count of both\n * expired and unexpired elements.\n * &lt;p&gt;\n * This class and its iterator implement all of the &lt;em&gt;optional&lt;/em&gt; methods of the {@link Collection} and {@link\n * Iterator} interfaces.\n *\n * @param &lt;E&gt; the type of elements in the deque\n * @author Gili Tzabari\n */\npublic final class RateLimitedBlockingDeque&lt;E&gt; implements BlockingDeque&lt;E&gt;\n{\n    private final int capacity;\n    private final LinkedBlockingDeque&lt;E&gt; delegate;\n    private final Bucket rateLimit = new Bucket();\n\n    /**\n     * Creates a {@code RateLimitedBlockingDeque} with a capacity of {@link Integer#MAX_VALUE}.\n     */\n    public RateLimitedBlockingDeque()\n    {\n        this.capacity = Integer.MAX_VALUE;\n        this.delegate = new LinkedBlockingDeque&lt;&gt;();\n    }\n\n    /**\n     * Creates a {@code RateLimitedBlockingDeque} with the given (fixed) capacity.\n     *\n     * @param capacity the capacity of this deque\n     * @throws IllegalArgumentException if {@code capacity} is less than 1\n     */\n    public RateLimitedBlockingDeque(int capacity)\n    {\n        this.capacity = capacity;\n        this.delegate = new LinkedBlockingDeque&lt;&gt;(capacity);\n    }\n\n    /**\n     * @return the capacity of the deque\n     */\n    public int getCapacity()\n    {\n        return capacity;\n    }\n\n    /**\n     * Indicates the rate at which elements may be taken from the queue.\n     *\n     * @param elements the number of elements that may be taken per {@code period}\n     * @param period   indicates how often elements may be taken\n     * @throws NullPointerException     if {@code period} is null\n     * @throws IllegalArgumentException if the requested rate is greater than element per nanosecond\n     */\n    public void setRate(long elements, Duration period)\n    {\n        synchronized (rateLimit)\n        {\n            Limit newLimit = new Limit(elements, period, 0, Long.MAX_VALUE);\n            if (rateLimit.getLimits().isEmpty())\n                rateLimit.addLimit(newLimit);\n            else\n            {\n                Limit oldLimit = rateLimit.getLimits().iterator().next();\n                rateLimit.replaceLimit(oldLimit, newLimit);\n            }\n        }\n    }\n\n    /**\n     * Allows consumption of elements without limit.\n     */\n    public void removeRate()\n    {\n        synchronized (rateLimit)\n        {\n            rateLimit.removeAllLimits();\n        }\n    }\n\n    @Override\n    public void addFirst(E e)\n    {\n        delegate.addFirst(e);\n    }\n\n    @Override\n    public void addLast(E e)\n    {\n        delegate.addLast(e);\n    }\n\n    @Override\n    public boolean offerFirst(E e)\n    {\n        return delegate.offerFirst(e);\n    }\n\n    @Override\n    public boolean offerLast(E e)\n    {\n        return delegate.offerLast(e);\n    }\n\n    @Override\n    public void putFirst(E e) throws InterruptedException\n    {\n        delegate.putFirst(e);\n    }\n\n    @Override\n    public void putLast(E e) throws InterruptedException\n    {\n        delegate.putLast(e);\n    }\n\n    @Override\n    public boolean offerFirst(E e, long timeout, TimeUnit unit) throws InterruptedException\n    {\n        return delegate.offerFirst(e, timeout, unit);\n    }\n\n    @Override\n    public boolean offerLast(E e, long timeout, TimeUnit unit) throws InterruptedException\n    {\n        return delegate.offerLast(e, timeout, unit);\n    }\n\n    @Override\n    public E removeFirst()\n    {\n        if (rateLimit.tryConsume())\n            return delegate.removeFirst();\n        throw new NoSuchElementException();\n    }\n\n    @Override\n    public E removeLast()\n    {\n        if (rateLimit.tryConsume())\n            return delegate.removeLast();\n        throw new NoSuchElementException();\n    }\n\n    @Override\n    public E pollFirst()\n    {\n        if (rateLimit.tryConsume())\n            return delegate.pollFirst();\n        return null;\n    }\n\n    @Override\n    public E pollLast()\n    {\n        if (rateLimit.tryConsume())\n            return delegate.pollLast();\n        return null;\n    }\n\n    @Override\n    public E takeFirst() throws InterruptedException\n    {\n        rateLimit.consume();\n        return delegate.takeFirst();\n    }\n\n    @Override\n    public E takeLast() throws InterruptedException\n    {\n        rateLimit.consume();\n        return delegate.takeLast();\n    }\n\n    @Override\n    public E pollFirst(long timeout, TimeUnit unit) throws InterruptedException\n    {\n        if (rateLimit.consume(1, timeout, unit))\n            return delegate.pollFirst(timeout, unit);\n        return null;\n    }\n\n    @Override\n    public E pollLast(long timeout, TimeUnit unit) throws InterruptedException\n    {\n        if (rateLimit.consume(1, timeout, unit))\n            return delegate.pollLast(timeout, unit);\n        return null;\n    }\n\n    @Override\n    public E getFirst()\n    {\n        return delegate.getFirst();\n    }\n\n    @Override\n    public E getLast()\n    {\n        return delegate.getLast();\n    }\n\n    @Override\n    public E peekFirst()\n    {\n        return delegate.peekFirst();\n    }\n\n    @Override\n    public E peekLast()\n    {\n        return delegate.peekLast();\n    }\n\n    @Override\n    public boolean removeFirstOccurrence(Object o)\n    {\n        return delegate.removeFirstOccurrence(o);\n    }\n\n    @Override\n    public boolean removeLastOccurrence(Object o)\n    {\n        return delegate.removeLastOccurrence(o);\n    }\n\n    @Override\n    public boolean add(E e)\n    {\n        return delegate.add(e);\n    }\n\n    @Override\n    public boolean offer(E e)\n    {\n        return delegate.offer(e);\n    }\n\n    @Override\n    public void put(E e) throws InterruptedException\n    {\n        putLast(e);\n    }\n\n    @Override\n    public boolean offer(E e, long timeout, TimeUnit unit) throws InterruptedException\n    {\n        return delegate.offer(e, timeout, unit);\n    }\n\n    @Override\n    public E remove()\n    {\n        return removeFirst();\n    }\n\n    @Override\n    public E poll()\n    {\n        return pollFirst();\n    }\n\n    @Override\n    public E take() throws InterruptedException\n    {\n        return takeFirst();\n    }\n\n    @Override\n    public E poll(long timeout, TimeUnit unit) throws InterruptedException\n    {\n        return pollFirst(timeout, unit);\n    }\n\n    @Override\n    public E element()\n    {\n        return getFirst();\n    }\n\n    @Override\n    public E peek()\n    {\n        return peekFirst();\n    }\n\n    @Override\n    public int remainingCapacity()\n    {\n        return delegate.remainingCapacity();\n    }\n\n    @Override\n    public int drainTo(Collection&lt;? super E&gt; c)\n    {\n        int result = 0;\n        while (true)\n        {\n            E next = pollFirst();\n            if (next == null)\n                break;\n            c.add(next);\n        }\n        return result;\n    }\n\n    @Override\n    public int drainTo(Collection&lt;? super E&gt; c, int maxElements)\n    {\n        int result = 0;\n        do\n        {\n            E next = pollFirst();\n            if (next == null)\n                break;\n            c.add(next);\n        }\n        while (result &lt; maxElements);\n        return result;\n    }\n\n    @Override\n    public void push(E e)\n    {\n        addFirst(e);\n    }\n\n    @Override\n    public E pop()\n    {\n        return removeFirst();\n    }\n\n    @Override\n    public boolean remove(Object o)\n    {\n        return removeFirstOccurrence(o);\n    }\n\n    @Override\n    public int size()\n    {\n        return delegate.size();\n    }\n\n    @Override\n    public boolean contains(Object o)\n    {\n        return delegate.contains(o);\n    }\n\n    @Override\n    public Object[] toArray()\n    {\n        return delegate.toArray();\n    }\n\n    @Override\n    public &lt;T&gt; T[] toArray(T[] a)\n    {\n        return delegate.toArray(a);\n    }\n\n    @Override\n    public String toString()\n    {\n        return delegate.toString();\n    }\n\n    @Override\n    public void clear()\n    {\n        delegate.clear();\n    }\n\n    @Override\n    public Iterator&lt;E&gt; iterator()\n    {\n        return wrap(delegate.iterator());\n    }\n\n    /**\n     * @param delegateIterator the iterator to delegate to\n     * @return an iterator that respects the rate-limit\n     */\n    private Iterator&lt;E&gt; wrap(Iterator&lt;E&gt; delegateIterator)\n    {\n        return new Iterator&lt;E&gt;()\n        {\n            private E previousElement = null;\n\n            @Override\n            public boolean hasNext()\n            {\n                return delegateIterator.hasNext();\n            }\n\n            @Override\n            public E next()\n            {\n                return delegateIterator.next();\n            }\n\n            @Override\n            public void remove()\n            {\n                if (previousElement == null)\n                    throw new IllegalStateException(&quot;next() not invoked, or remove() already invoked&quot;);\n                try\n                {\n                    rateLimit.consume();\n                }\n                catch (InterruptedException e)\n                {\n                    throw new IllegalStateException(e);\n                }\n                delegateIterator.remove();\n                previousElement = null;\n            }\n        };\n    }\n\n    @Override\n    public Iterator&lt;E&gt; descendingIterator()\n    {\n        return wrap(delegate.descendingIterator());\n    }\n\n    @Override\n    public boolean addAll(Collection&lt;? extends E&gt; c)\n    {\n        requireThat(&quot;c&quot;, c).isNotNull().isNotEqualTo(&quot;this&quot;, this);\n        boolean modified = false;\n        for (E e: c)\n            if (add(e))\n                modified = true;\n        return modified;\n    }\n\n    @Override\n    public boolean isEmpty()\n    {\n        return delegate.isEmpty();\n    }\n\n    @Override\n    public boolean containsAll(Collection&lt;?&gt; c)\n    {\n        return delegate.containsAll(c);\n    }\n\n    @Override\n    public boolean removeAll(Collection&lt;?&gt; c)\n    {\n        Iterator&lt;E&gt; i = iterator();\n        boolean modified = true;\n        while (i.hasNext())\n        {\n            E element = i.next();\n            if (c.contains(element))\n            {\n                i.remove();\n                modified = true;\n            }\n        }\n        return modified;\n    }\n\n    @Override\n    public boolean retainAll(Collection&lt;?&gt; c)\n    {\n        Iterator&lt;E&gt; i = iterator();\n        boolean modified = true;\n        while (i.hasNext())\n        {\n            E element = i.next();\n            if (!c.contains(element))\n            {\n                i.remove();\n                modified = true;\n            }\n        }\n        return modified;\n    }\n\n    @Override\n    public int hashCode()\n    {\n        return delegate.hashCode();\n    }\n\n    @Override\n    public boolean equals(Object obj)\n    {\n        return delegate.equals(obj);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":201558,"reputation":20199,"user_id":448078,"accept_rate":61,"display_name":"Mike"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689864456,"creation_date":1685138524,"answer_id":76344404,"question_id":49206773,"body_markdown":"Usage:\r\n\r\n\tpublic static void main(String[] args) throws InterruptedException {\r\n\t    RateFriendlyThreadPoolExecutor executor = new RateFriendlyThreadPoolExecutor(3, 5, 1, SECONDS, new LinkedBlockingDeque&lt;&gt;(100));\r\n\t    executor.setRate(10);\r\n\t    executor.setMinRate(1);\r\n\t    executor.setMaxRate(100);\r\n\r\n\t    for (int i = 0; i &lt; 1000; i++) {\r\n\t        int lap = i;\r\n\t        executor.execute(() -&gt; System.out.printf(&quot;%03d (%s) - %s - %s%n&quot;, lap, executor.getRate(), LocalDateTime.now(), Thread.currentThread().getName()));\r\n\t    }\r\n\r\n\t    executor.shutdown();\r\n\t    executor.awaitTermination(60, SECONDS);\r\n\t}\r\n\r\nOutput:\r\n\r\n    002 (10) - 2023-05-27T23:03:37.659658800 - pool-1-thread-3\r\n    000 (11) - 2023-05-27T23:03:37.659658800 - pool-1-thread-1\r\n    001 (11) - 2023-05-27T23:03:37.744859100 - pool-1-thread-2\r\n    105 (11) - 2023-05-27T23:03:37.930152500 - main\r\n    103 (12) - 2023-05-27T23:03:38.037876400 - pool-1-thread-4\r\n    104 (12) - 2023-05-27T23:03:38.130058800 - pool-1-thread-5\r\n    003 (12) - 2023-05-27T23:03:38.221655300 - pool-1-thread-3\r\n    004 (12) - 2023-05-27T23:03:38.314020700 - pool-1-thread-1\r\n    005 (12) - 2023-05-27T23:03:38.406202700 - pool-1-thread-2\r\n    006 (12) - 2023-05-27T23:03:38.573508200 - pool-1-thread-4\r\n    007 (13) - 2023-05-27T23:03:38.665875900 - pool-1-thread-5\r\n    008 (13) - 2023-05-27T23:03:38.742695200 - pool-1-thread-3\r\n\r\nImplementation:\r\n\r\n\timport java.util.concurrent.BlockingQueue;\r\n\timport java.util.concurrent.ThreadPoolExecutor;\r\n\timport java.util.concurrent.TimeUnit;\r\n\timport java.util.concurrent.atomic.AtomicInteger;\r\n\timport java.util.concurrent.atomic.AtomicLong;\r\n\timport java.util.concurrent.locks.ReentrantLock;\r\n\t\r\n\timport static java.lang.Math.min;\r\n\timport static java.lang.System.nanoTime;\r\n\t\r\n\tpublic class RateFriendlyThreadPoolExecutor extends ThreadPoolExecutor {\r\n\t\r\n\t\tprivate AtomicInteger rate = new AtomicInteger();\r\n\t\tprivate AtomicInteger minRate = new AtomicInteger();\r\n\t\tprivate AtomicInteger maxRate = new AtomicInteger();\r\n\t\tprivate AtomicLong leapTime = new AtomicLong();\r\n\t\tprivate ReentrantLock rateLock = new ReentrantLock();\r\n\t\r\n\t\tpublic RateFriendlyThreadPoolExecutor(int corePoolSize, int maximumPoolSize, long keepAliveTime, TimeUnit unit, BlockingQueue&lt;Runnable&gt; workQueue) {\r\n\t\t\tsuper(corePoolSize, maximumPoolSize, keepAliveTime, unit, workQueue, (r, e) -&gt; overflow(r, (RateFriendlyThreadPoolExecutor) e));\r\n\t\t}\r\n\t\r\n\t\t@Override\r\n\t\tpublic void execute(Runnable rannable) {\r\n\t\t\tsuper.execute(() -&gt; executeWithDelay(rannable));\r\n\t\t}\r\n\t\r\n\t\tprotected void executeWithDelay(Runnable runnable) {\r\n\t\t\tint rateSnapshot = rate.get();\r\n\t\t\tlimitRate(rateSnapshot, leapTime, rateLock);\r\n\t\t\ttry {\r\n\t\r\n\t\t\t\trunnable.run();\r\n\t\r\n\t\t\t\trate.compareAndSet(rateSnapshot, min(rateSnapshot + 1, maxRate.get()));\r\n\t\t\t} catch (Exception e) {\r\n\t\t\t\tif (!isThrottled(e))\r\n\t\t\t\t\tthrow e;\r\n\t\t\t\tSystem.out.println(&quot;throttled at rate &quot; + rateSnapshot);\r\n\t\t\t\trate.set(minRate.get());\r\n\t\t\t\texecute(runnable);\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\t\t// works for parallel streams like a charm\r\n        public static void limitRate(int rate, AtomicLong leapTime, ReentrantLock rateLock) {\r\n            if (rate == 0)\r\n                return;\r\n            long targetLeapTime = 1_000_000_000 / rate;\r\n            rateLock.lock();\r\n            try {\r\n                long timeSnapshot = nanoTime();\r\n                long waitTime = targetLeapTime - (timeSnapshot - leapTime.get());\r\n                if (waitTime &gt; 0) {\r\n\r\n                    if (waitTime &gt; 1_000_000)\r\n                        LockSupport.parkNanos(waitTime);\r\n                    else\r\n                        while (timeSnapshot + waitTime &gt; nanoTime())\r\n                            /* busy wait */;\r\n\r\n                    leapTime.set(timeSnapshot + waitTime);\r\n                } else {\r\n                    leapTime.set(timeSnapshot);\r\n                }\r\n            } finally {\r\n                rateLock.unlock();\r\n            }\r\n        }\r\n\t\r\n\t\tprivate static void overflow(Runnable r, RateFriendlyThreadPoolExecutor e) {\r\n\t\t\tif (!e.isShutdown())\r\n\t\t\t\te.executeWithDelay(r);\r\n\t\t}\r\n\t\r\n\t\tprivate boolean isThrottled(Exception e) {\r\n\t\t\treturn e.getMessage().contains(&quot;Reduce your rate&quot;);\r\n\t\t}\r\n\t\r\n\t\tpublic AtomicInteger getRate() {\r\n\t\t\treturn rate;\r\n\t\t}\r\n\t\r\n\t\tpublic void setRate(int rate) {\r\n\t\t\tthis.rate.set(rate);\r\n\t\t\tminRate.compareAndSet(0, rate);\r\n\t\t\tmaxRate.compareAndSet(0, rate);\r\n\t\t}\r\n\t\r\n\t\tpublic AtomicInteger getMinRate() {\r\n\t\t\treturn minRate;\r\n\t\t}\r\n\t\r\n\t\tpublic void setMinRate(int minRate) {\r\n\t\t\tthis.minRate.set(minRate);\r\n\t\t}\r\n\t\r\n\t\tpublic AtomicInteger getMaxRate() {\r\n\t\t\treturn maxRate;\r\n\t\t}\r\n\t\r\n\t\tpublic void setMaxRate(int maxRate) {\r\n\t\t\tthis.maxRate.set(maxRate);\r\n\t\t}\r\n\t}","title":"Non-blocking rate-limited ThreadPoolExecutor","body":"<p>Usage:</p>\n<pre><code>public static void main(String[] args) throws InterruptedException {\n    RateFriendlyThreadPoolExecutor executor = new RateFriendlyThreadPoolExecutor(3, 5, 1, SECONDS, new LinkedBlockingDeque&lt;&gt;(100));\n    executor.setRate(10);\n    executor.setMinRate(1);\n    executor.setMaxRate(100);\n\n    for (int i = 0; i &lt; 1000; i++) {\n        int lap = i;\n        executor.execute(() -&gt; System.out.printf(&quot;%03d (%s) - %s - %s%n&quot;, lap, executor.getRate(), LocalDateTime.now(), Thread.currentThread().getName()));\n    }\n\n    executor.shutdown();\n    executor.awaitTermination(60, SECONDS);\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>002 (10) - 2023-05-27T23:03:37.659658800 - pool-1-thread-3\n000 (11) - 2023-05-27T23:03:37.659658800 - pool-1-thread-1\n001 (11) - 2023-05-27T23:03:37.744859100 - pool-1-thread-2\n105 (11) - 2023-05-27T23:03:37.930152500 - main\n103 (12) - 2023-05-27T23:03:38.037876400 - pool-1-thread-4\n104 (12) - 2023-05-27T23:03:38.130058800 - pool-1-thread-5\n003 (12) - 2023-05-27T23:03:38.221655300 - pool-1-thread-3\n004 (12) - 2023-05-27T23:03:38.314020700 - pool-1-thread-1\n005 (12) - 2023-05-27T23:03:38.406202700 - pool-1-thread-2\n006 (12) - 2023-05-27T23:03:38.573508200 - pool-1-thread-4\n007 (13) - 2023-05-27T23:03:38.665875900 - pool-1-thread-5\n008 (13) - 2023-05-27T23:03:38.742695200 - pool-1-thread-3\n</code></pre>\n<p>Implementation:</p>\n<pre><code>import java.util.concurrent.BlockingQueue;\nimport java.util.concurrent.ThreadPoolExecutor;\nimport java.util.concurrent.TimeUnit;\nimport java.util.concurrent.atomic.AtomicInteger;\nimport java.util.concurrent.atomic.AtomicLong;\nimport java.util.concurrent.locks.ReentrantLock;\n\nimport static java.lang.Math.min;\nimport static java.lang.System.nanoTime;\n\npublic class RateFriendlyThreadPoolExecutor extends ThreadPoolExecutor {\n\n    private AtomicInteger rate = new AtomicInteger();\n    private AtomicInteger minRate = new AtomicInteger();\n    private AtomicInteger maxRate = new AtomicInteger();\n    private AtomicLong leapTime = new AtomicLong();\n    private ReentrantLock rateLock = new ReentrantLock();\n\n    public RateFriendlyThreadPoolExecutor(int corePoolSize, int maximumPoolSize, long keepAliveTime, TimeUnit unit, BlockingQueue&lt;Runnable&gt; workQueue) {\n        super(corePoolSize, maximumPoolSize, keepAliveTime, unit, workQueue, (r, e) -&gt; overflow(r, (RateFriendlyThreadPoolExecutor) e));\n    }\n\n    @Override\n    public void execute(Runnable rannable) {\n        super.execute(() -&gt; executeWithDelay(rannable));\n    }\n\n    protected void executeWithDelay(Runnable runnable) {\n        int rateSnapshot = rate.get();\n        limitRate(rateSnapshot, leapTime, rateLock);\n        try {\n\n            runnable.run();\n\n            rate.compareAndSet(rateSnapshot, min(rateSnapshot + 1, maxRate.get()));\n        } catch (Exception e) {\n            if (!isThrottled(e))\n                throw e;\n            System.out.println(&quot;throttled at rate &quot; + rateSnapshot);\n            rate.set(minRate.get());\n            execute(runnable);\n        }\n    }\n\n    // works for parallel streams like a charm\n    public static void limitRate(int rate, AtomicLong leapTime, ReentrantLock rateLock) {\n        if (rate == 0)\n            return;\n        long targetLeapTime = 1_000_000_000 / rate;\n        rateLock.lock();\n        try {\n            long timeSnapshot = nanoTime();\n            long waitTime = targetLeapTime - (timeSnapshot - leapTime.get());\n            if (waitTime &gt; 0) {\n\n                if (waitTime &gt; 1_000_000)\n                    LockSupport.parkNanos(waitTime);\n                else\n                    while (timeSnapshot + waitTime &gt; nanoTime())\n                        /* busy wait */;\n\n                leapTime.set(timeSnapshot + waitTime);\n            } else {\n                leapTime.set(timeSnapshot);\n            }\n        } finally {\n            rateLock.unlock();\n        }\n    }\n\n    private static void overflow(Runnable r, RateFriendlyThreadPoolExecutor e) {\n        if (!e.isShutdown())\n            e.executeWithDelay(r);\n    }\n\n    private boolean isThrottled(Exception e) {\n        return e.getMessage().contains(&quot;Reduce your rate&quot;);\n    }\n\n    public AtomicInteger getRate() {\n        return rate;\n    }\n\n    public void setRate(int rate) {\n        this.rate.set(rate);\n        minRate.compareAndSet(0, rate);\n        maxRate.compareAndSet(0, rate);\n    }\n\n    public AtomicInteger getMinRate() {\n        return minRate;\n    }\n\n    public void setMinRate(int minRate) {\n        this.minRate.set(minRate);\n    }\n\n    public AtomicInteger getMaxRate() {\n        return maxRate;\n    }\n\n    public void setMaxRate(int maxRate) {\n        this.maxRate.set(maxRate);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":8235,"reputation":87020,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2825,"favorite_count":0,"down_vote_count":6,"up_vote_count":15,"accepted_answer_id":49286181,"answer_count":2,"score":9,"last_activity_date":1689864456,"creation_date":1520669043,"question_id":49206773,"body_markdown":"I am hitting an HTTP server concurrently with multiple connections. I&#39;d like to throttle the clients in response to servers indicating that requests are coming in too fast. I do not wish to change the HTTP library I am using but rather I&#39;d like to extend it.\r\n\r\nTo that end, **how do I implement a [ThreadPoolExecutor](https://docs.oracle.com/javase/9/docs/api/java/util/concurrent/ThreadPoolExecutor.html) with the following constraints?**\r\n\r\n* The executor has an optional rate limit.\r\n* When the rate-limit is disabled, it executes tasks as quickly as possible (normal behavior for a `ThreadPoolExecutor`).\r\n* When the rate-limit is enabled, it may execute up to `N` tasks per second.\r\n* The rate-limit applies across all executor threads, not per-thread.\r\n* No bursts are allowed. Meaning, if the limit is 10 requests per second I expect one request to begin every 100ms. I don&#39;t want all threads firing at once then remaining idle for the rest of the second.\r\n* The rate-limit is dynamic. If a request fails, the rate decreases. If a request succeeds, the rate increases.\r\n* Threads are considered idle when no tasks are ready for execution (taking the rate limit into consideration). Meaning, I expect `ThreadPoolExecutor` to flag these threads are idle and spin them down as it sees fit as opposed to blocking the threads until the rate-limit is met. On the flip side, threads should spin up again once it&#39;s time to execute the next task.\r\n\r\nWhat I&#39;ve Looked Into\r\n---\r\n\r\n* [ScheduledThreadPoolExecutor](https://docs.oracle.com/javase/9/docs/api/java/util/concurrent/ScheduledThreadPoolExecutor.html) and [DelayedQueue](https://docs.oracle.com/javase/9/docs/api/java/util/concurrent/DelayQueue.html) assume that the execution delay is known at event-queuing time, whereas in my case the rate may change between the time a task is queued and the time it is executed.\r\n* [RateLimiter](http://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/util/concurrent/RateLimiter.html) will probably form part of the answer but is not enough on its own.","title":"Non-blocking rate-limited ThreadPoolExecutor","body":"<p>I am hitting an HTTP server concurrently with multiple connections. I'd like to throttle the clients in response to servers indicating that requests are coming in too fast. I do not wish to change the HTTP library I am using but rather I'd like to extend it.</p>\n\n<p>To that end, <strong>how do I implement a <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/concurrent/ThreadPoolExecutor.html\" rel=\"noreferrer\">ThreadPoolExecutor</a> with the following constraints?</strong></p>\n\n<ul>\n<li>The executor has an optional rate limit.</li>\n<li>When the rate-limit is disabled, it executes tasks as quickly as possible (normal behavior for a <code>ThreadPoolExecutor</code>).</li>\n<li>When the rate-limit is enabled, it may execute up to <code>N</code> tasks per second.</li>\n<li>The rate-limit applies across all executor threads, not per-thread.</li>\n<li>No bursts are allowed. Meaning, if the limit is 10 requests per second I expect one request to begin every 100ms. I don't want all threads firing at once then remaining idle for the rest of the second.</li>\n<li>The rate-limit is dynamic. If a request fails, the rate decreases. If a request succeeds, the rate increases.</li>\n<li>Threads are considered idle when no tasks are ready for execution (taking the rate limit into consideration). Meaning, I expect <code>ThreadPoolExecutor</code> to flag these threads are idle and spin them down as it sees fit as opposed to blocking the threads until the rate-limit is met. On the flip side, threads should spin up again once it's time to execute the next task.</li>\n</ul>\n\n<h2>What I've Looked Into</h2>\n\n<ul>\n<li><a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/concurrent/ScheduledThreadPoolExecutor.html\" rel=\"noreferrer\">ScheduledThreadPoolExecutor</a> and <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/concurrent/DelayQueue.html\" rel=\"noreferrer\">DelayedQueue</a> assume that the execution delay is known at event-queuing time, whereas in my case the rate may change between the time a task is queued and the time it is executed.</li>\n<li><a href=\"http://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/util/concurrent/RateLimiter.html\" rel=\"noreferrer\">RateLimiter</a> will probably form part of the answer but is not enough on its own.</li>\n</ul>\n"},{"tags":["java","file-upload","apache-commons-fileupload"],"owner":{"account_id":9610071,"reputation":2910,"user_id":7134737,"accept_rate":45,"display_name":"ng.newbie"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":313,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1689864449,"creation_date":1685521846,"question_id":76371594,"body_markdown":"I am using Apache Commons FileUpload to process my fileuploads in my Azure Functions.\r\n\r\nThe code is the following:\r\n\r\n    @FunctionName(&quot;HttpTrigger-Java&quot;)\r\n    public HttpResponseMessage run(\r\n            @HttpTrigger(name = &quot;req&quot;, methods = {HttpMethod.GET, HttpMethod.POST}, authLevel = AuthorizationLevel.ANONYMOUS) HttpRequestMessage&lt;Optional&lt;String&gt;&gt; request,\r\n            final ExecutionContext context) {\r\n        String contentType = request.getHeaders().get(&quot;content-type&quot;); // Get content-type header\r\n        // here the &quot;content-type&quot; must be lower-case\r\n        String body = request.getBody().get(); // Get request body\r\n        InputStream in = new ByteArrayInputStream(body.getBytes()); // Convert body to an input stream\r\n        String boundary = contentType.split(&quot;;&quot;)[1].split(&quot;=&quot;)[1]; // Get boundary from content-type header\r\n        int bufSize = 1024;\r\n        MultipartStream multipartStream  = new MultipartStream(in, boundary.getBytes(), bufSize, null); // Using MultipartStream to parse body input stream\r\n        // the code below comes from the SO thread above\r\n        // you can fetch a file content from readBodyData \r\n        // after the headers Content-Disposition: form-data; name=&quot;upfile&quot;; filename=&quot;test.txt&quot; \\n Content-Type: text/plain\r\n        boolean nextPart = multipartStream.skipPreamble();\r\n        while (nextPart) {\r\n            String header = multipartStream.readHeaders();\r\n            System.out.println(&quot;&quot;);\r\n            System.out.println(&quot;Headers:&quot;);\r\n            System.out.println(header);\r\n            System.out.println(&quot;Body:&quot;);\r\n            multipartStream.readBodyData(System.out);\r\n            System.out.println(&quot;&quot;);\r\n            nextPart = multipartStream.readBoundary();\r\n        }\r\n        return request.createResponseBuilder(HttpStatus.OK).body(&quot;Success&quot;).build();\r\n    }\r\n\r\nTaken from [here][1].\r\n\r\n\r\nThere is a new vulnerability specifying a DOS attack can be achieved by sending a very large input as Commons FileUpload does not limit the request parts.\r\n\r\n**More details here:**\r\n\r\nhttps://github.com/advisories/GHSA-hfrx-6qgj-fp6c\r\n\r\nhttps://devhub.checkmarx.com/cve-details/CVE-2023-24998/\r\n\r\nIf you read the second link you will notice that even after upgrading to version 1.5 you need to set `FileUploadBase#setFileCountMax`.\r\n\r\n**But how do I do that when using the low-level `MultipartStream` ?** \r\n\r\n**Is it even required ?**\r\n\r\nI am not a Commons FileUpload Expert.\r\n\r\n  [1]: https://stackoverflow.com/a/54511067/7134737","title":"commons fileupload CVE-2023-24998 - Any special configurations required when using MultipartStream?","body":"<p>I am using Apache Commons FileUpload to process my fileuploads in my Azure Functions.</p>\n<p>The code is the following:</p>\n<pre><code>@FunctionName(&quot;HttpTrigger-Java&quot;)\npublic HttpResponseMessage run(\n        @HttpTrigger(name = &quot;req&quot;, methods = {HttpMethod.GET, HttpMethod.POST}, authLevel = AuthorizationLevel.ANONYMOUS) HttpRequestMessage&lt;Optional&lt;String&gt;&gt; request,\n        final ExecutionContext context) {\n    String contentType = request.getHeaders().get(&quot;content-type&quot;); // Get content-type header\n    // here the &quot;content-type&quot; must be lower-case\n    String body = request.getBody().get(); // Get request body\n    InputStream in = new ByteArrayInputStream(body.getBytes()); // Convert body to an input stream\n    String boundary = contentType.split(&quot;;&quot;)[1].split(&quot;=&quot;)[1]; // Get boundary from content-type header\n    int bufSize = 1024;\n    MultipartStream multipartStream  = new MultipartStream(in, boundary.getBytes(), bufSize, null); // Using MultipartStream to parse body input stream\n    // the code below comes from the SO thread above\n    // you can fetch a file content from readBodyData \n    // after the headers Content-Disposition: form-data; name=&quot;upfile&quot;; filename=&quot;test.txt&quot; \\n Content-Type: text/plain\n    boolean nextPart = multipartStream.skipPreamble();\n    while (nextPart) {\n        String header = multipartStream.readHeaders();\n        System.out.println(&quot;&quot;);\n        System.out.println(&quot;Headers:&quot;);\n        System.out.println(header);\n        System.out.println(&quot;Body:&quot;);\n        multipartStream.readBodyData(System.out);\n        System.out.println(&quot;&quot;);\n        nextPart = multipartStream.readBoundary();\n    }\n    return request.createResponseBuilder(HttpStatus.OK).body(&quot;Success&quot;).build();\n}\n</code></pre>\n<p>Taken from <a href=\"https://stackoverflow.com/a/54511067/7134737\">here</a>.</p>\n<p>There is a new vulnerability specifying a DOS attack can be achieved by sending a very large input as Commons FileUpload does not limit the request parts.</p>\n<p><strong>More details here:</strong></p>\n<p><a href=\"https://github.com/advisories/GHSA-hfrx-6qgj-fp6c\" rel=\"nofollow noreferrer\">https://github.com/advisories/GHSA-hfrx-6qgj-fp6c</a></p>\n<p><a href=\"https://devhub.checkmarx.com/cve-details/CVE-2023-24998/\" rel=\"nofollow noreferrer\">https://devhub.checkmarx.com/cve-details/CVE-2023-24998/</a></p>\n<p>If you read the second link you will notice that even after upgrading to version 1.5 you need to set <code>FileUploadBase#setFileCountMax</code>.</p>\n<p><strong>But how do I do that when using the low-level <code>MultipartStream</code> ?</strong></p>\n<p><strong>Is it even required ?</strong></p>\n<p>I am not a Commons FileUpload Expert.</p>\n"},{"tags":["java","spring","spring-boot","spring-webflux","spring-data-r2dbc"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689864010,"post_id":76730902,"comment_id":135276313,"body_markdown":"Is mysql actually being *used* now? (As opposed to H2) I thought it didn&#39;t support r2dbc yet","body":"Is mysql actually being <i>used</i> now? (As opposed to H2) I thought it didn&#39;t support r2dbc yet"},{"owner":{"account_id":7352305,"reputation":125,"user_id":5598020,"display_name":"Gestalt"},"score":0,"creation_date":1689864332,"post_id":76730902,"comment_id":135276373,"body_markdown":"The effective pom has this driver r2dbc-mysql with groupId io.asyncer. My configuration is for my local mysql db as well, although I haven&#39;t performed a CRUD operation yet.","body":"The effective pom has this driver r2dbc-mysql with groupId io.asyncer. My configuration is for my local mysql db as well, although I haven&#39;t performed a CRUD operation yet."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689864576,"post_id":76730902,"comment_id":135276432,"body_markdown":"I&#39;m not quite sure whether that was a yes or no. I&#39;m guessing &quot;no&quot; so far...","body":"I&#39;m not quite sure whether that was a yes or no. I&#39;m guessing &quot;no&quot; so far..."},{"owner":{"account_id":7352305,"reputation":125,"user_id":5598020,"display_name":"Gestalt"},"score":0,"creation_date":1689866802,"post_id":76730902,"comment_id":135277083,"body_markdown":"I was just able to run a fetchById query from a ReactiveCrudRepository on mysql&#39;s airport sample db&#39;s booking table. At least reactive reads are supported in 2023.","body":"I was just able to run a fetchById query from a ReactiveCrudRepository on mysql&#39;s airport sample db&#39;s booking table. At least reactive reads are supported in 2023."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689872442,"post_id":76730902,"comment_id":135278241,"body_markdown":"That&#39;s good, try a save and check that a write has occurred in the mysql table","body":"That&#39;s good, try a save and check that a write has occurred in the mysql table"}],"owner":{"account_id":7352305,"reputation":125,"user_id":5598020,"display_name":"Gestalt"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":224,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689864403,"creation_date":1689863187,"question_id":76730902,"body_markdown":"    java.version=17\r\n    spring-boot-starter-data-r2dbc=3.1.1\r\n    spring-boot-starter-webflux=3.1.1\r\n\r\nI have specified the following in application.properties to be picked up by the auto configuration.\r\n\r\n    spring.r2dbc.url=r2dbc:pool:mysql://localhost:3306/airportdb\r\n    spring.r2dbc.username=admin\r\n    spring.r2dbc.password=REDACTED\r\n    logging.level.root=DEBUG\r\n\r\nWhen I start the Spring boot application I get the following exception at the bottom of the log.\r\n\r\n    Caused by: java.lang.IllegalStateException: Unable to create a ConnectionFactory for &#39;ConnectionFactoryOptions{options={database=airportdb, host=localhost, driver=mysql, password=REDACTED, protocol=, port=3306, user=admin}}&#39;. Available drivers: [ pool ]\r\n\r\nNow, I have been able to solve this exception by adding this snippet to my pom.xml in the dependencies section.\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;io.r2dbc&lt;/groupId&gt;\r\n        &lt;artifactId&gt;r2dbc-h2&lt;/artifactId&gt;\r\n        &lt;scope&gt;runtime&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n**EDIT- This is already a part of my effective pom, I&#39;m not adding it new, just changing it&#39;s scope which resolves my issue.**\r\n\r\nAs soon as I add this to my pom, I&#39;m able to launch the app and it works flawlessly but for the life of me I can&#39;t understand what the original problem was and how just changing the scope of this dependency which has been pulled in by `spring-boot-starter-data-r2dbc` solves it. Thanks.","title":"Unable to create R2DBC connection factory for mysql through auto configuration unless change scope of another dependency to runtime","body":"<pre><code>java.version=17\nspring-boot-starter-data-r2dbc=3.1.1\nspring-boot-starter-webflux=3.1.1\n</code></pre>\n<p>I have specified the following in application.properties to be picked up by the auto configuration.</p>\n<pre><code>spring.r2dbc.url=r2dbc:pool:mysql://localhost:3306/airportdb\nspring.r2dbc.username=admin\nspring.r2dbc.password=REDACTED\nlogging.level.root=DEBUG\n</code></pre>\n<p>When I start the Spring boot application I get the following exception at the bottom of the log.</p>\n<pre><code>Caused by: java.lang.IllegalStateException: Unable to create a ConnectionFactory for 'ConnectionFactoryOptions{options={database=airportdb, host=localhost, driver=mysql, password=REDACTED, protocol=, port=3306, user=admin}}'. Available drivers: [ pool ]\n</code></pre>\n<p>Now, I have been able to solve this exception by adding this snippet to my pom.xml in the dependencies section.</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;io.r2dbc&lt;/groupId&gt;\n    &lt;artifactId&gt;r2dbc-h2&lt;/artifactId&gt;\n    &lt;scope&gt;runtime&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p><strong>EDIT- This is already a part of my effective pom, I'm not adding it new, just changing it's scope which resolves my issue.</strong></p>\n<p>As soon as I add this to my pom, I'm able to launch the app and it works flawlessly but for the life of me I can't understand what the original problem was and how just changing the scope of this dependency which has been pulled in by <code>spring-boot-starter-data-r2dbc</code> solves it. Thanks.</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":182101,"reputation":48239,"user_id":416564,"accept_rate":100,"display_name":"Johan Sj&#246;berg"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1297893412,"creation_date":1297893412,"answer_id":5022632,"question_id":5022604,"body_markdown":"Sure, just add routine `getA()` in you class B, and change the line in your constructor to\r\n\r\n    public A() {\r\n        this.b = new B(this);\r\n    }\r\n\r\nThis of course assumes your class B has a constructor which accepts an `A`, e.g., \r\n   \r\n    public B(A a) {\r\n        this.a = a;\r\n    }","title":"Java: how does a component know its owner","body":"<p>Sure, just add routine <code>getA()</code> in you class B, and change the line in your constructor to</p>\n\n<pre><code>public A() {\n    this.b = new B(this);\n}\n</code></pre>\n\n<p>This of course assumes your class B has a constructor which accepts an <code>A</code>, e.g., </p>\n\n<pre><code>public B(A a) {\n    this.a = a;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":12404,"reputation":62016,"user_id":24396,"accept_rate":74,"display_name":"Steve Kuo"},"score":1,"creation_date":1297925767,"post_id":5022640,"comment_id":5621061,"body_markdown":"And what if multiple objects owns (has a reference to) an instance of `B`?","body":"And what if multiple objects owns (has a reference to) an instance of <code>B</code>?"},{"owner":{"account_id":7278,"reputation":6005,"user_id":12582,"display_name":"Jason Terk"},"score":0,"creation_date":1297961922,"post_id":5022640,"comment_id":5628918,"body_markdown":"Every instance of `B` would have to keep track of all the references to it.","body":"Every instance of <code>B</code> would have to keep track of all the references to it."}],"tags":[],"owner":{"account_id":7278,"reputation":6005,"user_id":12582,"display_name":"Jason Terk"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1297893475,"creation_date":1297893475,"answer_id":5022640,"question_id":5022604,"body_markdown":"`B` needs an explicit reference to its owner:\r\n\r\n    public class B {\r\n      private final A owner;\r\n\r\n      public B(A owner) {\r\n        this.owner = owner;\r\n      }\r\n\r\n      public A getOwner() {\r\n        return owner;\r\n      }\r\n    }\r\n\r\nAnd in `A`:\r\n\r\n    public A() {\r\n      b = new B(this);\r\n    }","title":"Java: how does a component know its owner","body":"<p><code>B</code> needs an explicit reference to its owner:</p>\n\n<pre><code>public class B {\n  private final A owner;\n\n  public B(A owner) {\n    this.owner = owner;\n  }\n\n  public A getOwner() {\n    return owner;\n  }\n}\n</code></pre>\n\n<p>And in <code>A</code>:</p>\n\n<pre><code>public A() {\n  b = new B(this);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":36858,"reputation":113744,"user_id":105224,"accept_rate":73,"display_name":"Andreas Dolk"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1297893811,"creation_date":1297893489,"answer_id":5022642,"question_id":5022604,"body_markdown":"No, that&#39;s not possible. You&#39;re looking for backreferences, but we have to create them in the code if needed.\r\n\r\nIf you want to collect all referencers to B, you could do this with a constructor or with a factory (pattern) that creates B&#39;s. I&#39;ll show the factory:\r\n\r\n    public class B {\r\n    \r\n       private static Set&lt;? extends Object&gt; referencers = new HashSet&lt;? extends Object&gt;();\r\n       private B(){}  // no public constructor\r\n       public static create(Object parent) {\r\n         // cooperative approach, the caller should pass &quot;this&quot;\r\n         referencers.add(parent);\r\n       }\r\n       public static remove(Object parent) {\r\n         referencers.remove(parent);\r\n       }\r\n    }\r\n\r\n","title":"Java: how does a component know its owner","body":"<p>No, that's not possible. You're looking for backreferences, but we have to create them in the code if needed.</p>\n\n<p>If you want to collect all referencers to B, you could do this with a constructor or with a factory (pattern) that creates B's. I'll show the factory:</p>\n\n<pre><code>public class B {\n\n   private static Set&lt;? extends Object&gt; referencers = new HashSet&lt;? extends Object&gt;();\n   private B(){}  // no public constructor\n   public static create(Object parent) {\n     // cooperative approach, the caller should pass \"this\"\n     referencers.add(parent);\n   }\n   public static remove(Object parent) {\n     referencers.remove(parent);\n   }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":173810,"reputation":2314,"user_id":402755,"accept_rate":47,"display_name":"padis"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1297893496,"creation_date":1297893496,"answer_id":5022645,"question_id":5022604,"body_markdown":"No you cannot. B has no reference to A.","title":"Java: how does a component know its owner","body":"<p>No you cannot. B has no reference to A.</p>\n"},{"tags":[],"owner":{"account_id":90221,"reputation":80129,"user_id":248432,"accept_rate":85,"display_name":"Peter Knego"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1297893506,"creation_date":1297893506,"answer_id":5022646,"question_id":5022604,"body_markdown":"No.\r\n\r\nClass a has reference to class B, but class B has no reference to class A. References are one way only.","title":"Java: how does a component know its owner","body":"<p>No.</p>\n\n<p>Class a has reference to class B, but class B has no reference to class A. References are one way only.</p>\n"},{"tags":[],"owner":{"account_id":96690,"reputation":37290,"user_id":262683,"display_name":"Costi Ciudatu"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1297893740,"creation_date":1297893740,"answer_id":5022681,"question_id":5022604,"body_markdown":"If you need B to always be bound to an instance of A, make B an inner class of A:\r\n\r\n    class A {\r\n\r\n        B b = new B();\r\n\r\n        class B {\r\n            String getSome() {\r\n                // this will refer to the enclosing A\r\n                return A.this.toString();\r\n            }\r\n        }\r\n    }\r\n\r\nAn inner (non-static) class always has an implicit reference to the enclosing instance and cannot exist without it. In order to instantiate B from outside, you need a nasty syntax: `B b = new A().new B();`","title":"Java: how does a component know its owner","body":"<p>If you need B to always be bound to an instance of A, make B an inner class of A:</p>\n\n<pre><code>class A {\n\n    B b = new B();\n\n    class B {\n        String getSome() {\n            // this will refer to the enclosing A\n            return A.this.toString();\n        }\n    }\n}\n</code></pre>\n\n<p>An inner (non-static) class always has an implicit reference to the enclosing instance and cannot exist without it. In order to instantiate B from outside, you need a nasty syntax: <code>B b = new A().new B();</code></p>\n"},{"tags":[],"owner":{"account_id":93208,"reputation":6939,"user_id":255139,"accept_rate":44,"display_name":"Kalpesh Soni"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1297893837,"creation_date":1297893837,"answer_id":5022690,"question_id":5022604,"body_markdown":"you can also use inner classes\r\n\r\npackage test;\r\n\r\npublic class A {\r\n\r\n\tB b = null;\r\n\r\n\tpublic B getB()\r\n\t{\r\n\t\treturn b;\r\n\t}\r\n\r\n\tpublic class B {\r\n\t\r\n\t\tpublic A getA()\r\n\t\t{\r\n\t\t\treturn A.this;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tB b = new A().new B();\r\n\t}\r\n\r\n  }\r\n","title":"Java: how does a component know its owner","body":"<p>you can also use inner classes</p>\n\n<p>package test;</p>\n\n<p>public class A {</p>\n\n<pre><code>B b = null;\n\npublic B getB()\n{\n    return b;\n}\n\npublic class B {\n\n    public A getA()\n    {\n        return A.this;\n    }\n}\n\npublic static void main(String[] args) {\n    B b = new A().new B();\n}\n</code></pre>\n\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1297903778,"creation_date":1297903778,"answer_id":5023964,"question_id":5022604,"body_markdown":"Nope. There is no such thing as an &#39;owner&#39; in Java. Any object can be referenced by any number of other objects.","title":"Java: how does a component know its owner","body":"<p>Nope. There is no such thing as an 'owner' in Java. Any object can be referenced by any number of other objects.</p>\n"}],"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5227,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":5022632,"answer_count":8,"score":2,"last_activity_date":1689864226,"creation_date":1297893273,"question_id":5022604,"body_markdown":"Suppose I have a class `A` and a class `B`.\r\n\r\n    public class A {\r\n\r\n        private B b;\r\n\r\n        public A() {\r\n            this.b = new B();\r\n        }\r\n\r\n        public B getB() {\r\n            return this.b;\r\n        }\r\n    }\r\n\r\n    public class B {\r\n\r\n        public String getSome() {\r\n            return &quot;Get some!&quot;;\r\n        }\r\n    }\r\n\r\nI know I can get B through A, because A _has_ (or _owns_) B: `new A().getB()`.  \r\nBut if I have B, can I get A?","title":"Java: how does a component know its owner","body":"<p>Suppose I have a class <code>A</code> and a class <code>B</code>.</p>\n\n<pre><code>public class A {\n\n    private B b;\n\n    public A() {\n        this.b = new B();\n    }\n\n    public B getB() {\n        return this.b;\n    }\n}\n\npublic class B {\n\n    public String getSome() {\n        return \"Get some!\";\n    }\n}\n</code></pre>\n\n<p>I know I can get B through A, because A <em>has</em> (or <em>owns</em>) B: <code>new A().getB()</code>.<br>\nBut if I have B, can I get A?</p>\n"},{"tags":["java","android","android-layout","textview","imageview"],"owner":{"account_id":27817647,"reputation":591,"user_id":21238708,"display_name":"Jatin guglani"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":87,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":0,"score":1,"last_activity_date":1689864149,"creation_date":1683098731,"question_id":76161364,"body_markdown":"Is there a way to have a Textview that can adjust its content when an image or another Textview is placed inside it(overlapped) (as shown in the images below)\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\nThings That I have tried so far:\r\n\r\n1) LeadingMarginSpan.LeadingMarginSpan2: I&#39;m only able to place an image at the top left corner but I want to place an image in different positions (center,  right, bottom, etc).\r\n\r\n2) I came across a library [FlowtextView][3] but I would rather want to implement it on my own.\r\n\r\n\r\nIn macOS, we can achieve the same for containers containing text, the textstorage can be modified to add [exclusion paths][4] around which text would flow. The frame of the overlapping container can be converted into an NSBezierpath and set as an exclusion for the text. (as shown in the image below)\r\n\r\n[![enter image description here][5]][5]\r\n\r\nIs there any way to achieve the same in Android?\r\n\r\n  [1]: https://i.stack.imgur.com/1ojk9m.png\r\n  [2]: https://i.stack.imgur.com/03IjEm.png\r\n  [3]: https://github.com/deano2390/flowtextview\r\n  [4]: https://developer.apple.com/documentation/appkit/nstextcontainer/1444569-exclusionpaths\r\n  [5]: https://i.stack.imgur.com/0n3dgm.png","title":"Flow a TextView around an ImageView or another TextView in android","body":"<p>Is there a way to have a Textview that can adjust its content when an image or another Textview is placed inside it(overlapped) (as shown in the images below)</p>\n<p><a href=\"https://i.stack.imgur.com/1ojk9m.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1ojk9m.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/03IjEm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/03IjEm.png\" alt=\"enter image description here\" /></a></p>\n<p>Things That I have tried so far:</p>\n<ol>\n<li><p>LeadingMarginSpan.LeadingMarginSpan2: I'm only able to place an image at the top left corner but I want to place an image in different positions (center,  right, bottom, etc).</p>\n</li>\n<li><p>I came across a library <a href=\"https://github.com/deano2390/flowtextview\" rel=\"nofollow noreferrer\">FlowtextView</a> but I would rather want to implement it on my own.</p>\n</li>\n</ol>\n<p>In macOS, we can achieve the same for containers containing text, the textstorage can be modified to add <a href=\"https://developer.apple.com/documentation/appkit/nstextcontainer/1444569-exclusionpaths\" rel=\"nofollow noreferrer\">exclusion paths</a> around which text would flow. The frame of the overlapping container can be converted into an NSBezierpath and set as an exclusion for the text. (as shown in the image below)</p>\n<p><a href=\"https://i.stack.imgur.com/0n3dgm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0n3dgm.png\" alt=\"enter image description here\" /></a></p>\n<p>Is there any way to achieve the same in Android?</p>\n"},{"tags":["java","spring","spring-boot","database-connectivity"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1421750644,"post_id":28042426,"comment_id":44469523,"body_markdown":"Can you add the databse configuration?","body":"Can you add the databse configuration?"},{"owner":{"account_id":1209390,"reputation":579,"user_id":1178240,"display_name":"Alan Barrows"},"score":0,"creation_date":1421754783,"post_id":28042426,"comment_id":44471934,"body_markdown":"you are mixing yaml and properties together. `hibernate.dialect: org.hibernate.dialect.MySQL5Dialect` would be `hibernate.dialect= org.hibernate.dialect.MySQL5Dialect`","body":"you are mixing yaml and properties together. <code>hibernate.dialect: org.hibernate.dialect.MySQL5Dialect</code> would be <code>hibernate.dialect= org.hibernate.dialect.MySQL5Dialect</code>"},{"owner":{"account_id":222186,"reputation":13529,"user_id":480632,"accept_rate":74,"display_name":"J.Olufsen"},"score":0,"creation_date":1421756156,"post_id":28042426,"comment_id":44472766,"body_markdown":"Changed as you suggested but error persists","body":"Changed as you suggested but error persists"},{"owner":{"account_id":212417,"reputation":43624,"user_id":465223,"accept_rate":75,"display_name":"dunni"},"score":0,"creation_date":1421759953,"post_id":28042426,"comment_id":44475011,"body_markdown":"It looks like a classpath problem. What kind of dependency do you have for your database, and how is it defined in the pom.xml (e.g. which scope etc.). Can you post your pom.xml?","body":"It looks like a classpath problem. What kind of dependency do you have for your database, and how is it defined in the pom.xml (e.g. which scope etc.). Can you post your pom.xml?"},{"owner":{"account_id":126734,"reputation":17496,"user_id":323421,"display_name":"Sergii Pozharov"},"score":0,"creation_date":1432889489,"post_id":28042426,"comment_id":49123994,"body_markdown":"Try removing @Transactional from UserDao","body":"Try removing @Transactional from UserDao"},{"owner":{"account_id":83518,"reputation":6215,"user_id":234110,"accept_rate":67,"display_name":"Anand Rockzz"},"score":0,"creation_date":1483157665,"post_id":28042426,"comment_id":70013742,"body_markdown":"In my case it was [spring-boot-starter-data-jpa](http://stackoverflow.com/a/37554576/234110)","body":"In my case it was <a href=\"http://stackoverflow.com/a/37554576/234110\">spring-boot-starter-data-jpa</a>"},{"owner":{"account_id":4356023,"reputation":339,"user_id":16372970,"display_name":"Hari Reddy"},"score":0,"creation_date":1690611298,"post_id":28042426,"comment_id":135380517,"body_markdown":"In my case, I was using `PostgreSQL` but was still using the `spring.datasource.url=jdbc:mysql://localhost:5432/mystore` where I should have used `jdbc:postgresql://localhost:5432/mystore`. Posting in hopes that I&#39;m not the lone kind out here.","body":"In my case, I was using <code>PostgreSQL</code> but was still using the <code>spring.datasource.url=jdbc:mysql:&#47;&#47;localhost:5432&#47;mystore</code> where I should have used <code>jdbc:postgresql:&#47;&#47;localhost:5432&#47;mystore</code>. Posting in hopes that I&#39;m not the lone kind out here."}],"answers":[{"comments":[{"owner":{"account_id":222186,"reputation":13529,"user_id":480632,"accept_rate":74,"display_name":"J.Olufsen"},"score":1,"creation_date":1421753417,"post_id":28043751,"comment_id":44471160,"body_markdown":"I already have that file and config, although it slightly different `spring.datasource.driver-class-name` instead of your `spring.datasource.driverClassName`","body":"I already have that file and config, although it slightly different <code>spring.datasource.driver-class-name</code> instead of your <code>spring.datasource.driverClassName</code>"},{"owner":{"account_id":1209390,"reputation":579,"user_id":1178240,"display_name":"Alan Barrows"},"score":0,"creation_date":1421754630,"post_id":28043751,"comment_id":44471827,"body_markdown":"and if you change the config for `driver-class-name` to `driverClassName`, does it work or a different error?","body":"and if you change the config for <code>driver-class-name</code> to <code>driverClassName</code>, does it work or a different error?"},{"owner":{"account_id":7967476,"reputation":1326,"user_id":6013291,"accept_rate":81,"display_name":"Dennis van Opstal"},"score":0,"creation_date":1485338964,"post_id":28043751,"comment_id":70881543,"body_markdown":"@J.Olufsen I think `driverClassName` changed to `type`","body":"@J.Olufsen I think <code>driverClassName</code> changed to <code>type</code>"}],"tags":[],"owner":{"account_id":1209390,"reputation":579,"user_id":1178240,"display_name":"Alan Barrows"},"comment_count":3,"down_vote_count":1,"up_vote_count":39,"is_accepted":false,"score":38,"last_activity_date":1421751914,"creation_date":1421751914,"answer_id":28043751,"question_id":28042426,"body_markdown":"From the looks of things you haven&#39;t passed enough data to Spring Boot to configure the datasource\r\n\r\nCreate/In your existing `application.properties` add the following\r\n\r\n    spring.datasource.driverClassName=\r\n    spring.datasource.url=\r\n    spring.datasource.username=\r\n    spring.datasource.password=\r\n\r\nmaking sure you append a value for each of properties.","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>From the looks of things you haven't passed enough data to Spring Boot to configure the datasource</p>\n\n<p>Create/In your existing <code>application.properties</code> add the following</p>\n\n<pre><code>spring.datasource.driverClassName=\nspring.datasource.url=\nspring.datasource.username=\nspring.datasource.password=\n</code></pre>\n\n<p>making sure you append a value for each of properties.</p>\n"},{"comments":[{"owner":{"account_id":222186,"reputation":13529,"user_id":480632,"accept_rate":74,"display_name":"J.Olufsen"},"score":0,"creation_date":1421757649,"post_id":28045375,"comment_id":44473634,"body_markdown":"Although I changed properties as you suggested same error. Controllers not working (`404 error`) as well","body":"Although I changed properties as you suggested same error. Controllers not working (<code>404 error</code>) as well"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1421758306,"post_id":28045375,"comment_id":44474008,"body_markdown":"Your question is deviating from the original one... That a controller cannot be found has nothing to do with a datasource. I would suggest marking the answer that solved your datasource problem and issue a new one for the controllers.","body":"Your question is deviating from the original one... That a controller cannot be found has nothing to do with a datasource. I would suggest marking the answer that solved your datasource problem and issue a new one for the controllers."}],"tags":[],"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1421756729,"creation_date":1421756729,"answer_id":28045375,"question_id":28042426,"body_markdown":"The `hibernate.*` properties are useless, they should be `spring.jpa.*` properties. Not to mention that you are trying to override those already set by using the `spring.jpa.*` properties. (For the explanation of each property I strongly suggest a read of the Spring Boot [reference guide][1].\r\n\r\n    spring.jpa.database-platform = org.hibernate.dialect.MySQL5Dialect\r\n    spring.jpa.show-sql = true\r\n\r\n    # Hibernate\r\n    spring.jpa.hibernate.ddl-auto=update\r\n\r\nAlso the packages to scan are automatically detected based on the base package of your `Application` class. If you want to specify something else use the `@EntityScan` annotation. Also specifying the most toplevel package isn&#39;t really wise as it will scan the whole class path which will severely impact performance.\r\n\r\n[1]: http://docs.spring.io/spring-boot/docs/1.2.1.RELEASE/reference/htmlsingle/#boot-features-jpa-and-spring-data","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>The <code>hibernate.*</code> properties are useless, they should be <code>spring.jpa.*</code> properties. Not to mention that you are trying to override those already set by using the <code>spring.jpa.*</code> properties. (For the explanation of each property I strongly suggest a read of the Spring Boot <a href=\"http://docs.spring.io/spring-boot/docs/1.2.1.RELEASE/reference/htmlsingle/#boot-features-jpa-and-spring-data\" rel=\"nofollow\">reference guide</a>.</p>\n\n<pre><code>spring.jpa.database-platform = org.hibernate.dialect.MySQL5Dialect\nspring.jpa.show-sql = true\n\n# Hibernate\nspring.jpa.hibernate.ddl-auto=update\n</code></pre>\n\n<p>Also the packages to scan are automatically detected based on the base package of your <code>Application</code> class. If you want to specify something else use the <code>@EntityScan</code> annotation. Also specifying the most toplevel package isn't really wise as it will scan the whole class path which will severely impact performance.</p>\n"},{"tags":[],"owner":{"account_id":155804,"reputation":421,"user_id":372701,"display_name":"gcgan"},"comment_count":0,"down_vote_count":0,"up_vote_count":42,"is_accepted":false,"score":42,"last_activity_date":1425109771,"creation_date":1425106567,"answer_id":28779067,"question_id":28042426,"body_markdown":"Maybe you forgot the MySQL JDBC driver.\r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n        &lt;version&gt;5.1.34&lt;/version&gt;\r\n    &lt;/dependency&gt;","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>Maybe you forgot the MySQL JDBC driver.</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;mysql&lt;/groupId&gt;\n    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n    &lt;version&gt;5.1.34&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":10574188,"reputation":647,"user_id":8062633,"accept_rate":75,"display_name":"Varun Chandran"},"score":0,"creation_date":1528695383,"post_id":31199853,"comment_id":88587952,"body_markdown":"I am new to this... is it common to everyone -the DataSourceAutoConfiguration.class?","body":"I am new to this... is it common to everyone -the DataSourceAutoConfiguration.class?"},{"owner":{"account_id":5307379,"reputation":2578,"user_id":4234794,"display_name":"Jason Warner"},"score":1,"creation_date":1540275758,"post_id":31199853,"comment_id":92793041,"body_markdown":"Not sure what you mean by common....\nThe DataSourceAutoConfiguration is a mechanism to create and load datasource configuration. Properties with the &#39;spring.datasource&#39; prefix are loaded into the DataSourceProperties bean/object\nSee https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-sql.html or \nhttps://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/autoconfigure/jdbc/DataSourceProperties.html and https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/autoconfigure/jdbc/DataSourceAutoConfiguration.html","body":"Not sure what you mean by common.... The DataSourceAutoConfiguration is a mechanism to create and load datasource configuration. Properties with the &#39;spring.datasource&#39; prefix are loaded into the DataSourceProperties bean/object See <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-sql.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-boot/docs/current/reference/html/&hellip;</a> or  <a href=\"https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/autoconfigure/jdbc/DataSourceProperties.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-boot/docs/current/api/org/springframew&zwnj;&#8203;ork/&hellip;</a> and <a href=\"https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/autoconfigure/jdbc/DataSourceAutoConfiguration.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-boot/docs/current/api/org/springframew&zwnj;&#8203;ork/&hellip;</a>"},{"owner":{"account_id":5307379,"reputation":2578,"user_id":4234794,"display_name":"Jason Warner"},"score":0,"creation_date":1540275846,"post_id":31199853,"comment_id":92793080,"body_markdown":"And I suppose another valid answer whould have been to add the &#39;spring.datasource.*&#39;  properties.","body":"And I suppose another valid answer whould have been to add the &#39;spring.datasource.*&#39;  properties."},{"owner":{"account_id":2990507,"reputation":4955,"user_id":2538180,"accept_rate":53,"display_name":"emoleumassi"},"score":12,"creation_date":1589390080,"post_id":31199853,"comment_id":109277692,"body_markdown":"newer spring boot version: `@SpringBootApplication(exclude = {DataSourceAutoConfiguration.class})`","body":"newer spring boot version: <code>@SpringBootApplication(exclude = {DataSourceAutoConfiguration.class})</code>"},{"owner":{"account_id":11344158,"reputation":121,"user_id":8317158,"display_name":"Nano"},"score":0,"creation_date":1644803270,"post_id":31199853,"comment_id":125695519,"body_markdown":"Or add yaml property: ```spring.datasource.initialize: false```","body":"Or add yaml property: <code>spring.datasource.initialize: false</code>"}],"tags":[],"owner":{"account_id":5307379,"reputation":2578,"user_id":4234794,"display_name":"Jason Warner"},"comment_count":5,"down_vote_count":3,"up_vote_count":204,"is_accepted":true,"score":201,"last_activity_date":1649724633,"creation_date":1435904483,"answer_id":31199853,"question_id":28042426,"body_markdown":"Looks like the initial problem is with the auto-config.\r\n\r\nIf you don&#39;t need the datasource, simply remove it from the auto-config process:\r\n\r\n    @EnableAutoConfiguration(exclude={DataSourceAutoConfiguration.class})\r\n\r\n\r\n\r\nEdit:\r\nIf using @SpringBootApplication in your main class:\r\n\r\n    @SpringBootApplication(exclude={DataSourceAutoConfiguration.class})","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>Looks like the initial problem is with the auto-config.</p>\n<p>If you don't need the datasource, simply remove it from the auto-config process:</p>\n<pre><code>@EnableAutoConfiguration(exclude={DataSourceAutoConfiguration.class})\n</code></pre>\n<p>Edit:\nIf using @SpringBootApplication in your main class:</p>\n<pre><code>@SpringBootApplication(exclude={DataSourceAutoConfiguration.class})\n</code></pre>\n"},{"tags":[],"owner":{"account_id":143673,"reputation":1695,"user_id":352173,"accept_rate":25,"display_name":"Remy Mellet"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1440690363,"creation_date":1440690363,"answer_id":32254001,"question_id":28042426,"body_markdown":"Are you running the application as a jar? ( java -jar xxxx.jar)\r\n\r\nIf so, do you have the application.properties stored in that jar ?\r\n\r\nIf no, try to figure out why :\r\n\r\n- To be automatically package in the jar, the files can be in : src/main/resources/application.properties\r\n- The maven plugin in the pom.xml can also be configured","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>Are you running the application as a jar? ( java -jar xxxx.jar)</p>\n\n<p>If so, do you have the application.properties stored in that jar ?</p>\n\n<p>If no, try to figure out why :</p>\n\n<ul>\n<li>To be automatically package in the jar, the files can be in : src/main/resources/application.properties</li>\n<li>The maven plugin in the pom.xml can also be configured</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":198628,"reputation":625,"user_id":443398,"display_name":"AdrianVeidt"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1444568574,"creation_date":1444568574,"answer_id":33065259,"question_id":28042426,"body_markdown":"In my case this was happening because org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration.dataSource is an autowired field without a Qualifier and I am using multiple datasources with qualified names.  I solved this problem by using @Primary arbitrarily on one of my dataSource bean configurations like so\r\n\r\n   \t@Primary\r\n    @Bean(name=&quot;oneOfManyDataSources&quot;)\r\n    public DataSource dataSource() { ... }\r\n\r\nI suppose they want you to implement AbstractRoutingDataSource, and then that auto configuration will just work because no qualifier is needed, you just have a single data source that allows your beans to resolve to the appropriate DataSource as needed.  Then you don&#39;t need the @Primary or @Qualifier annotations at all, because you just have a single DataSource.\r\n\r\nIn any case, my solution worked because my beans specify DataSource by qualifier, and the JPA auto config stuff is happy because it has a single primary DataSource.  I am by no means recommending this as the &quot;right&quot; way to do things, but in my case it solved the problem quickly and did not deter the behavior of my application in any noticeable manner.  Will hopefully one day get around to implementing the AbstractRoutingDataSource and refactoring all the beans that need a specific DataSource and then perhaps that will be a neater solution.","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>In my case this was happening because org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration.dataSource is an autowired field without a Qualifier and I am using multiple datasources with qualified names.  I solved this problem by using @Primary arbitrarily on one of my dataSource bean configurations like so</p>\n\n<pre><code>@Primary\n@Bean(name=\"oneOfManyDataSources\")\npublic DataSource dataSource() { ... }\n</code></pre>\n\n<p>I suppose they want you to implement AbstractRoutingDataSource, and then that auto configuration will just work because no qualifier is needed, you just have a single data source that allows your beans to resolve to the appropriate DataSource as needed.  Then you don't need the @Primary or @Qualifier annotations at all, because you just have a single DataSource.</p>\n\n<p>In any case, my solution worked because my beans specify DataSource by qualifier, and the JPA auto config stuff is happy because it has a single primary DataSource.  I am by no means recommending this as the \"right\" way to do things, but in my case it solved the problem quickly and did not deter the behavior of my application in any noticeable manner.  Will hopefully one day get around to implementing the AbstractRoutingDataSource and refactoring all the beans that need a specific DataSource and then perhaps that will be a neater solution.</p>\n"},{"tags":[],"owner":{"account_id":4559404,"reputation":133,"user_id":3702158,"display_name":"Gaurav Anand"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1571847203,"creation_date":1448127498,"answer_id":33846494,"question_id":28042426,"body_markdown":"I was getting the same error, found out it was due to some of the dependencies missing in my pom.xml like that of Spring JPA, Hibernate, Mysql or maybe Jackson.\r\nSo make sure that dependencies are not missing in your pom.xml and check their version compatibility.\r\n\r\n    &lt;!-- Jpa and hibernate --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\r\n        &lt;version&gt;4.2.2.RELEASE&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n        &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\r\n        &lt;version&gt;5.0.3.Final&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n        &lt;version&gt;5.1.6&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>I was getting the same error, found out it was due to some of the dependencies missing in my pom.xml like that of Spring JPA, Hibernate, Mysql or maybe Jackson.\nSo make sure that dependencies are not missing in your pom.xml and check their version compatibility.</p>\n\n<pre><code>&lt;!-- Jpa and hibernate --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\n    &lt;version&gt;4.2.2.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n    &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\n    &lt;version&gt;5.0.3.Final&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;mysql&lt;/groupId&gt;\n    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n    &lt;version&gt;5.1.6&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8284065,"reputation":1,"user_id":6227729,"display_name":"kazim"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1461116976,"creation_date":1461115969,"answer_id":36732315,"question_id":28042426,"body_markdown":"It worked for me you can try your:\r\nAdd this to VM options in Tomcat\r\n\r\n    -DdevBaseDir=&quot;C:\\Your_Project_Dir_Path&quot;","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>It worked for me you can try your:\nAdd this to VM options in Tomcat</p>\n\n<pre><code>-DdevBaseDir=\"C:\\Your_Project_Dir_Path\"\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1988712,"reputation":655,"user_id":1783283,"display_name":"Jonathan"},"score":0,"creation_date":1552836790,"post_id":38136959,"comment_id":97153460,"body_markdown":"and added before spring.datasource.type","body":"and added before spring.datasource.type"},{"owner":{"account_id":7057423,"reputation":1105,"user_id":5404157,"accept_rate":100,"display_name":"Dasma"},"score":0,"creation_date":1642353915,"post_id":38136959,"comment_id":125043142,"body_markdown":"application.yml dont care if its camel case or dash-case","body":"application.yml dont care if its camel case or dash-case"}],"tags":[],"owner":{"account_id":8738653,"reputation":59,"user_id":6536363,"display_name":"user6536363"},"comment_count":2,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1467353128,"creation_date":1467346543,"answer_id":38136959,"question_id":28042426,"body_markdown":"change below line of code\r\n\r\n    spring.datasource.driverClassName\r\n\r\nto\r\n\r\n    spring.datasource.driver-class-name","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>change below line of code</p>\n\n<pre><code>spring.datasource.driverClassName\n</code></pre>\n\n<p>to</p>\n\n<pre><code>spring.datasource.driver-class-name\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10299919,"reputation":11,"user_id":7598936,"display_name":"Mahesh Japkar"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1487683434,"creation_date":1487683434,"answer_id":42368525,"question_id":28042426,"body_markdown":"I was facing this issue even after supplying all required datasource properties in application.properties. Then I realized that properties configuration class was not getting scanned by Spring boot because it was in different package hierarchy compared to my Spring boot Application.java and hence no properties were applied to datasource object. \r\nI changed the package name of my properties configuration class and it started working. ","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>I was facing this issue even after supplying all required datasource properties in application.properties. Then I realized that properties configuration class was not getting scanned by Spring boot because it was in different package hierarchy compared to my Spring boot Application.java and hence no properties were applied to datasource object. \nI changed the package name of my properties configuration class and it started working. </p>\n"},{"tags":[],"owner":{"account_id":5005339,"reputation":29,"user_id":4633620,"display_name":"janakiram pulipati"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1490716435,"creation_date":1490716435,"answer_id":43074312,"question_id":28042426,"body_markdown":"If you&#39;re using application.properties in spring boot app, then just put the below line into application.properties and it should work:&lt;br&gt;\r\n&lt;b&gt;spring.datasource.url: jdbc:mysql://google/?cloudSqlInstance=&amp;socketFactory=com.google.cloud.sql.mysql.SocketFactory&amp;user=****&amp;password=****&lt;/b&gt;","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>If you're using application.properties in spring boot app, then just put the below line into application.properties and it should work:<br>\n<b>spring.datasource.url: jdbc:mysql://google/?cloudSqlInstance=&amp;socketFactory=com.google.cloud.sql.mysql.SocketFactory&amp;user=****&amp;password=****</b></p>\n"},{"tags":[],"owner":{"account_id":10933556,"reputation":11,"user_id":8035965,"display_name":"ram kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1516343661,"creation_date":1516343661,"answer_id":48335388,"question_id":28042426,"body_markdown":"In my case I just ignored the following in application.properties file:\r\n\r\n\\# Hibernate\r\n\r\n\\#spring.jpa.hibernate.ddl-auto=update\r\n\r\nIt works for me....","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>In my case I just ignored the following in application.properties file:</p>\n\n<p># Hibernate</p>\n\n<p>#spring.jpa.hibernate.ddl-auto=update</p>\n\n<p>It works for me....</p>\n"},{"tags":[],"owner":{"account_id":13202527,"reputation":51,"user_id":9535362,"display_name":"Alexander P."},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1523979229,"creation_date":1523979229,"answer_id":49882173,"question_id":28042426,"body_markdown":"Check that you have database dependency at **runtime** group at build.gradle\r\n\r\n    runtime group: &#39;com.h2database&#39;, name: &#39;h2&#39;, version: &#39;1.4.194&#39;\r\n\r\nor change scope from test to **runtime** if you use Maven\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n        &lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n        &lt;version&gt;1.4.194&lt;/version&gt;\r\n        &lt;scope&gt;runtime&lt;/scope&gt;\r\n    &lt;/dependency&gt;","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>Check that you have database dependency at <strong>runtime</strong> group at build.gradle</p>\n\n<pre><code>runtime group: 'com.h2database', name: 'h2', version: '1.4.194'\n</code></pre>\n\n<p>or change scope from test to <strong>runtime</strong> if you use Maven</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n    &lt;artifactId&gt;h2&lt;/artifactId&gt;\n    &lt;version&gt;1.4.194&lt;/version&gt;\n    &lt;scope&gt;runtime&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10447957,"reputation":329,"user_id":7702483,"display_name":"tyrantqiao"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1525178066,"creation_date":1525178066,"answer_id":50116561,"question_id":28042426,"body_markdown":"Give you something different, when you encounter this kind of error, cannot create \r\nbean datasource in a test case.\r\n\r\nIt might be caused by some reasons:\r\n\r\n 1. No datasource, you will need to create your datasource, h2 in-memory datasource or whatever, or you can choose the way like `exclude={datasource&#183;&#183;}`.\r\n 2. You have your datasource, like MySQL, but it still not work. It was caused by class `AutoConfigureTestDatabase`, It will choose a datasource for you which may cause ambiguity.\r\n\r\nSolution: add `@AutoConfigureTestDatabase(replace = AutoConfigureTestDatabase.Replace.NONE)` to avoid replace the default datasource.","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>Give you something different, when you encounter this kind of error, cannot create \nbean datasource in a test case.</p>\n\n<p>It might be caused by some reasons:</p>\n\n<ol>\n<li>No datasource, you will need to create your datasource, h2 in-memory datasource or whatever, or you can choose the way like <code>exclude={datasource··}</code>.</li>\n<li>You have your datasource, like MySQL, but it still not work. It was caused by class <code>AutoConfigureTestDatabase</code>, It will choose a datasource for you which may cause ambiguity.</li>\n</ol>\n\n<p>Solution: add <code>@AutoConfigureTestDatabase(replace = AutoConfigureTestDatabase.Replace.NONE)</code> to avoid replace the default datasource.</p>\n"},{"tags":[],"owner":{"account_id":7427743,"reputation":92,"user_id":5649727,"display_name":"Isuru Ranaweera"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1571847271,"creation_date":1528260652,"answer_id":50712447,"question_id":28042426,"body_markdown":"Not directly related to the original question but this will be useful for someone. This error occurred to me with a simple two project structure. One project was handling some database operations with spring JDBC (say A) and the other did not have any JDBC operations at all(say B). But still, this error appeared while I was starting service B. Saying the datasource should be initialized properly.\r\n\r\nAs I figured out I had added this dependency to the parent pom of the two modules\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\nThis caused spring to initialize the JDBC dependencies for project B too. So, I moved it to project A&#39;s pom, everything was fine.\r\n\r\nHope this would help someone","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>Not directly related to the original question but this will be useful for someone. This error occurred to me with a simple two project structure. One project was handling some database operations with spring JDBC (say A) and the other did not have any JDBC operations at all(say B). But still, this error appeared while I was starting service B. Saying the datasource should be initialized properly.</p>\n\n<p>As I figured out I had added this dependency to the parent pom of the two modules</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>This caused spring to initialize the JDBC dependencies for project B too. So, I moved it to project A's pom, everything was fine.</p>\n\n<p>Hope this would help someone</p>\n"},{"tags":[],"owner":{"account_id":2987511,"reputation":3024,"user_id":5772982,"display_name":"Kumar Abhishek"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1528309922,"creation_date":1528309922,"answer_id":50727261,"question_id":28042426,"body_markdown":"This problem comes while you are running Test.\r\nAdd dependency \r\n\r\n    testCompile group: &#39;com.h2database&#39;, name: &#39;h2&#39;, version: &#39;1.4.197&#39; \r\nAdd folder resources under test source add file bootstrap.yml\r\nand provide content.\r\n\r\n    spring:\r\n      datasource:\r\n        type: com.zaxxer.hikari.HikariDataSource\r\n        url: jdbc:h2:mem:TEST\r\n        driver-class-name: org.h2.Driver\r\n        username: username\r\n        password: password\r\n        hikari:\r\n          idle-timeout: 10000\r\n\r\nthis will setup your data source.","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>This problem comes while you are running Test.\nAdd dependency </p>\n\n<pre><code>testCompile group: 'com.h2database', name: 'h2', version: '1.4.197' \n</code></pre>\n\n<p>Add folder resources under test source add file bootstrap.yml\nand provide content.</p>\n\n<pre><code>spring:\n  datasource:\n    type: com.zaxxer.hikari.HikariDataSource\n    url: jdbc:h2:mem:TEST\n    driver-class-name: org.h2.Driver\n    username: username\n    password: password\n    hikari:\n      idle-timeout: 10000\n</code></pre>\n\n<p>this will setup your data source.</p>\n"},{"tags":[],"owner":{"account_id":13875539,"reputation":21,"user_id":10017305,"display_name":"El Morabet Kamal"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1530444489,"creation_date":1530444489,"answer_id":51122868,"question_id":28042426,"body_markdown":"I was facing the same problem for several days, and finally the issue isn&#39;t with the code, the problem commes from maven, you must delete all the files that he downloaded from your hard drive &quot;C:\\Users\\username\\.m2\\repository&quot;, and do another update maven for your project, that will fix your problem.","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>I was facing the same problem for several days, and finally the issue isn't with the code, the problem commes from maven, you must delete all the files that he downloaded from your hard drive \"C:\\Users\\username.m2\\repository\", and do another update maven for your project, that will fix your problem.</p>\n"},{"tags":[],"owner":{"account_id":7172640,"reputation":1225,"user_id":5479655,"accept_rate":44,"display_name":"Guchelkaben"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1543941856,"creation_date":1543941856,"answer_id":53617744,"question_id":28042426,"body_markdown":"I solved my problem with the change of the parent Spring Boot Dependency.\r\n\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;2.1.0.RELEASE&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n\r\nto\r\n\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;2.0.6.RELEASE&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n\r\nFor more Information, take a look at the release notes: [Spring Boot 2.1.0 Release Notes][1]\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.1-Release-Notes","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>I solved my problem with the change of the parent Spring Boot Dependency.</p>\n\n<pre><code>&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.1.0.RELEASE&lt;/version&gt;\n&lt;/parent&gt;\n</code></pre>\n\n<p>to</p>\n\n<pre><code>&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.0.6.RELEASE&lt;/version&gt;\n&lt;/parent&gt;\n</code></pre>\n\n<p>For more Information, take a look at the release notes: <a href=\"https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.1-Release-Notes\" rel=\"nofollow noreferrer\">Spring Boot 2.1.0 Release Notes</a></p>\n"},{"tags":[],"owner":{"account_id":14237468,"reputation":390,"user_id":10877622,"display_name":"Kartik ganiga"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1600969264,"creation_date":1600969264,"answer_id":64051665,"question_id":28042426,"body_markdown":"**Created database in MySQL**\r\n\r\n    create database springboot2;\r\n\r\n**application.properties**\r\n\r\n    spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\r\n    spring.datasource.url = jdbc:mysql://localhost:3306/springboot2\r\n    spring.datasource.username = root\r\n    spring.datasource.password = root\r\n    spring.jpa.show-sql = true\r\n    spring.jpa.hibernate.ddl-auto = update\r\n    spring.jpa.properties.hibernate.dialect = org.hibernate.dialect.MySQL5Dialect\r\n    server.port=9192\r\n\r\n**pom.xml** \r\n\r\n    &lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;mysql&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n    \t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t\t&lt;exclusions&gt;\r\n    \t\t\t\t&lt;exclusion&gt;\r\n    \t\t\t\t\t&lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\r\n    \t\t\t\t\t&lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;/exclusion&gt;\r\n    \t\t\t&lt;/exclusions&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n**main class**\r\n\r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    \r\n    @SpringBootApplication\r\n    public class Application {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSpringApplication.run(Application.class, args);\r\n    \t}\r\n    \r\n    }\r\n\r\n**model class**\r\n\r\n    package com.First.Try.springboot.entity;\r\n        \r\n    import javax.persistence.Entity;\r\n    import javax.persistence.GeneratedValue;\r\n    import javax.persistence.Id;\r\n    import javax.persistence.Table;\r\n    \r\n    import lombok.AllArgsConstructor;\r\n    import lombok.Data;\r\n    import lombok.NoArgsConstructor;\r\n    @Data\r\n    @AllArgsConstructor\t\r\n    @NoArgsConstructor\r\n    @Entity\r\n    @Table(name=&quot;PRODUCT_TBL1&quot;)\r\n    public class Product {\r\n    \t@Id\r\n    \t@GeneratedValue\r\n    \tprivate int id;\r\n    \tprivate String name;\r\n    \tprivate int quantity;\r\n    \tprivate double price;\r\n        ....\r\n        ....\r\n        ....\r\n     }\r\n","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p><strong>Created database in MySQL</strong></p>\n<pre><code>create database springboot2;\n</code></pre>\n<p><strong>application.properties</strong></p>\n<pre><code>spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\nspring.datasource.url = jdbc:mysql://localhost:3306/springboot2\nspring.datasource.username = root\nspring.datasource.password = root\nspring.jpa.show-sql = true\nspring.jpa.hibernate.ddl-auto = update\nspring.jpa.properties.hibernate.dialect = org.hibernate.dialect.MySQL5Dialect\nserver.port=9192\n</code></pre>\n<p><strong>pom.xml</strong></p>\n<pre><code>&lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\n                    &lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n</code></pre>\n<p><strong>main class</strong></p>\n<pre><code>import org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class Application {\n\n    public static void main(String[] args) {\n        SpringApplication.run(Application.class, args);\n    }\n\n}\n</code></pre>\n<p><strong>model class</strong></p>\n<pre><code>package com.First.Try.springboot.entity;\n    \nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.Id;\nimport javax.persistence.Table;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n@Data\n@AllArgsConstructor \n@NoArgsConstructor\n@Entity\n@Table(name=&quot;PRODUCT_TBL1&quot;)\npublic class Product {\n    @Id\n    @GeneratedValue\n    private int id;\n    private String name;\n    private int quantity;\n    private double price;\n    ....\n    ....\n    ....\n }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4700927,"reputation":1844,"user_id":3804495,"accept_rate":46,"display_name":"heisenberg"},"score":0,"creation_date":1642913391,"post_id":68745299,"comment_id":125197611,"body_markdown":"I encountered the same issue with H2 as my database for a Spring boot app I&#39;m working on. After doing some research, adding this `spring.jpa.defer-datasource-initialization=true` configuration to application.properties file solved my problem.\n\nYou have same explanation as with this https://roytuts.com/integrate-h2-in-memory-database-with-spring-boot/","body":"I encountered the same issue with H2 as my database for a Spring boot app I&#39;m working on. After doing some research, adding this <code>spring.jpa.defer-datasource-initialization=true</code> configuration to application.properties file solved my problem.  You have same explanation as with this <a href=\"https://roytuts.com/integrate-h2-in-memory-database-with-spring-boot/\" rel=\"nofollow noreferrer\">roytuts.com/integrate-h2-in-memory-database-with-spring-boot</a>"}],"tags":[],"owner":{"account_id":22437671,"reputation":11,"user_id":16642689,"display_name":"Athar Karim"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1628697250,"creation_date":1628697250,"answer_id":68745299,"question_id":28042426,"body_markdown":"By default, with the latest version of Spring Boot, the load of data.sql is done before the tables are created. So use - spring.jpa.defer-datasource-initialization=true\r\n\r\nExample -\r\n\r\n\r\n    **In application.properties :- **\r\n    spring.jpa.show-sql=true\r\n    spring.datasource.url=jdbc:h2:mem:testdb\r\n    spring.h2.console.enabled=true\r\n    spring.jpa.defer-datasource-initialization=true\r\n\r\nThanks\r\nAthar Karim\r\n","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>By default, with the latest version of Spring Boot, the load of data.sql is done before the tables are created. So use - spring.jpa.defer-datasource-initialization=true</p>\n<p>Example -</p>\n<pre><code>**In application.properties :- **\nspring.jpa.show-sql=true\nspring.datasource.url=jdbc:h2:mem:testdb\nspring.h2.console.enabled=true\nspring.jpa.defer-datasource-initialization=true\n</code></pre>\n<p>Thanks\nAthar Karim</p>\n"},{"tags":[],"owner":{"account_id":19970711,"reputation":183,"user_id":15298662,"display_name":"Babi B"},"comment_count":0,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1630119371,"creation_date":1629981236,"answer_id":68938602,"question_id":28042426,"body_markdown":"I am working with spring boot 2.6.0\r\nI tried several answers and they were not enough.\r\nOne temporal solution I found was this\r\n\r\n    @SpringBootApplication(exclude = SqlInitializationAutoConfiguration.class)\r\nAlthough it lets the server run and the h2-console appear I could not connect to my data.sql file. This was the error I got\r\n\r\n    Database &quot;mem:testdb&quot; not found, either pre-create it or allow remote database creation (not recommended in secure environments) [90149-200] 90149/90149\r\n\r\nThis is the solution I found\r\n(Some have already been)Add these lines to the application.properties file\r\n\r\n    spring.jpa.show-sql=true\r\n    spring.h2.console.enabled=true\r\n    spring.datasource.url=jdbc:h2:mem:testdb\r\n    spring.jpa.defer-datasource-initialization=true\r\n\r\nSave an re-run the server then try to access the db on the browser again from the h2-console\r\n\r\nBy default, data.sql scripts are now run before Hibernate is initialized. This aligns the behavior of basic script-based initialization with that of Flyway and Liquibase. If you want to use data.sql to populate a schema created by Hibernate, set spring.jpa.defer-datasource-initialization to true.\r\n\r\nspring.jpa.defer-datasource-initialization=true solves the issue","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>I am working with spring boot 2.6.0\nI tried several answers and they were not enough.\nOne temporal solution I found was this</p>\n<pre><code>@SpringBootApplication(exclude = SqlInitializationAutoConfiguration.class)\n</code></pre>\n<p>Although it lets the server run and the h2-console appear I could not connect to my data.sql file. This was the error I got</p>\n<pre><code>Database &quot;mem:testdb&quot; not found, either pre-create it or allow remote database creation (not recommended in secure environments) [90149-200] 90149/90149\n</code></pre>\n<p>This is the solution I found\n(Some have already been)Add these lines to the application.properties file</p>\n<pre><code>spring.jpa.show-sql=true\nspring.h2.console.enabled=true\nspring.datasource.url=jdbc:h2:mem:testdb\nspring.jpa.defer-datasource-initialization=true\n</code></pre>\n<p>Save an re-run the server then try to access the db on the browser again from the h2-console</p>\n<p>By default, data.sql scripts are now run before Hibernate is initialized. This aligns the behavior of basic script-based initialization with that of Flyway and Liquibase. If you want to use data.sql to populate a schema created by Hibernate, set spring.jpa.defer-datasource-initialization to true.</p>\n<p>spring.jpa.defer-datasource-initialization=true solves the issue</p>\n"},{"tags":[],"owner":{"account_id":7474063,"reputation":1,"user_id":5681026,"display_name":"Rahul Kumar"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1643284651,"creation_date":1643284651,"answer_id":70878189,"question_id":28042426,"body_markdown":"I have not used h2 configuration in pom file.I have added it and this problem was solved.\r\n\r\n\r\n    &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>I have not used h2 configuration in pom file.I have added it and this problem was solved.</p>\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n        &lt;artifactId&gt;h2&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23257203,"reputation":49,"user_id":17344072,"display_name":"M. Muhammadsodiq"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1647928418,"creation_date":1647928418,"answer_id":71567483,"question_id":28042426,"body_markdown":"Seems you are having a problem with datasource.\r\nIf you don&#39;t need the datasource, simply disable it using\r\n\r\n````\r\nspring.autoconfigure.exclude=org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration\r\n \r\n````\r\n\r\nJust put this in your application.properties\r\n","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>Seems you are having a problem with datasource.\nIf you don't need the datasource, simply disable it using</p>\n<pre><code>spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration\n \n</code></pre>\n<p>Just put this in your application.properties</p>\n"},{"tags":[],"owner":{"account_id":4525260,"reputation":559,"user_id":3677294,"display_name":"MonirRouissi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1652682626,"creation_date":1652682626,"answer_id":72254934,"question_id":28042426,"body_markdown":"If you are using mysql you need 2 dependencies\r\n\r\n 1\r\n\r\n    . &lt;dependency&gt; \t\t\t\r\n    &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n       &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; \t\t&lt;/dependency&gt;\r\n\r\n\t\t\r\n\r\n 2.\r\n\r\n     &lt;dependency&gt; \r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        \t\t&lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt; \t&lt;/dependency&gt;\r\n\r\n\r\nIf you are using potgress you only need :\r\n\r\n 1. \r\n\r\n    &lt;dependency&gt; \t\t\r\n    \t&lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n        &lt;artifactId&gt;postgresql&lt;/artifactId&gt; \t\t\t \r\n          &lt;scope&gt;runtime&lt;/scope&gt;\r\n        \t\t&lt;/dependency&gt;","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>If you are using mysql you need 2 dependencies</p>\n<p>1</p>\n<pre><code>. &lt;dependency&gt;          \n&lt;groupId&gt;mysql&lt;/groupId&gt;\n   &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;        &lt;/dependency&gt;\n\n    \n</code></pre>\n<ol start=\"2\">\n<li></li>\n</ol>\n<pre><code> &lt;dependency&gt; \n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;   &lt;/dependency&gt;\n</code></pre>\n<p>If you are using potgress you only need :</p>\n<p>1.</p>\n<pre><code>&lt;dependency&gt;        \n    &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n    &lt;artifactId&gt;postgresql&lt;/artifactId&gt;              \n      &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15821564,"reputation":1,"user_id":11415769,"display_name":"Silas Mokone"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654843296,"creation_date":1654691038,"answer_id":72545650,"question_id":28042426,"body_markdown":"using h2  and you need to add  data.sql  just make sure you  add \r\n\r\n    spring.jpa.defer-datasource-initialization=true\r\n\r\non the application.properties.","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>using h2  and you need to add  data.sql  just make sure you  add</p>\n<pre><code>spring.jpa.defer-datasource-initialization=true\n</code></pre>\n<p>on the application.properties.</p>\n"},{"tags":[],"owner":{"account_id":18488355,"reputation":27,"user_id":13468698,"display_name":"Fares Naoui"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658251285,"creation_date":1658251285,"answer_id":73041135,"question_id":28042426,"body_markdown":"This is my application.properties file:\r\n\r\n```spring.datasource.url=jdbc:h2:mem:testdb\r\nspring.datasource.driverClassName=org.h2.Driver\r\nspring.datasource.username=sa\r\nspring.datasource.password=\r\nspring.jpa.database-platform=org.hibernate.dialect.H2Dialect\r\nspring.jpa.defer-datasource-initialization=true\r\nspring.h2.console.enabled=true\r\nspring.h2.console.path=/h2-console\r\nspring.h2.console.settings.trace=false\r\nspring.h2.console.settings.web-allow-others=false\r\n```\r\n\r\nI&#39;m using IntelliJ community edition with DB Browser Plugin\r\n\r\nIt works for me...","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>This is my application.properties file:</p>\n<pre><code>spring.datasource.driverClassName=org.h2.Driver\nspring.datasource.username=sa\nspring.datasource.password=\nspring.jpa.database-platform=org.hibernate.dialect.H2Dialect\nspring.jpa.defer-datasource-initialization=true\nspring.h2.console.enabled=true\nspring.h2.console.path=/h2-console\nspring.h2.console.settings.trace=false\nspring.h2.console.settings.web-allow-others=false\n</code></pre>\n<p>I'm using IntelliJ community edition with DB Browser Plugin</p>\n<p>It works for me...</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1661443599,"post_id":73451792,"comment_id":129779630,"body_markdown":"As it’s currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/73451792/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":13552874,"reputation":23,"user_id":9777247,"display_name":"franklin forson"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661209297,"creation_date":1661209297,"answer_id":73451792,"question_id":28042426,"body_markdown":"To resolve this issue give the primary key column value  @NotNull not NULL annotation and it would work.","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>To resolve this issue give the primary key column value  @NotNull not NULL annotation and it would work.</p>\n"},{"tags":[],"owner":{"account_id":15616206,"reputation":431,"user_id":11325405,"display_name":"Silver Sky"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1663849391,"creation_date":1663849391,"answer_id":73814564,"question_id":28042426,"body_markdown":"In my case, I had inserted a record in a table in `data.sql`, but that table&#39;s name was incorrect in `schema.sql`, where I had created that table. ","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>In my case, I had inserted a record in a table in <code>data.sql</code>, but that table's name was incorrect in <code>schema.sql</code>, where I had created that table.</p>\n"},{"tags":[],"owner":{"account_id":6833305,"reputation":3084,"user_id":5256337,"display_name":"Lova Chittumuri"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664214428,"creation_date":1664214428,"answer_id":73858008,"question_id":28042426,"body_markdown":"&gt; Please add the below dependency to get rid of this.\r\n\r\n\r\n                &lt;dependency&gt;\r\n                        &lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n                        &lt;scope&gt;runtime&lt;/scope&gt;\r\n                &lt;/dependency&gt;","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<blockquote>\n<p>Please add the below dependency to get rid of this.</p>\n</blockquote>\n<pre><code>            &lt;dependency&gt;\n                    &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n                    &lt;artifactId&gt;h2&lt;/artifactId&gt;\n                    &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6711920,"reputation":26,"user_id":5175045,"display_name":"Kem Andrew"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666806781,"creation_date":1666806781,"answer_id":74212160,"question_id":28042426,"body_markdown":"make sure you add all the dependencies in your pom.xml\r\n\r\n   \r\n\r\n     &lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-mail&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-quartz&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-data-jdbc&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.mysql&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.oracle.database.jdbc&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;ojdbc8&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>make sure you add all the dependencies in your pom.xml</p>\n<pre><code> &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-mail&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-quartz&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jdbc&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.oracle.database.jdbc&lt;/groupId&gt;\n            &lt;artifactId&gt;ojdbc8&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13782778,"reputation":935,"user_id":9947525,"display_name":"Fazal Haroon"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1673736171,"creation_date":1671998617,"answer_id":74915621,"question_id":28042426,"body_markdown":"Spring Boot version 2+ has a minor change. All DDL(Data Definition Language) - Table Creations and data updates should be done in **schema.sql**\r\n\r\nTo resolve this issue just add this \r\n\r\n    spring.jpa.defer-datasource-initialization = true\r\n\r\nto application.properties file. \r\n\r\nor\r\n\r\n    spring:\r\n      jpa:\r\n        defer-datasource-initialization: true\r\n\r\nAdd the above if you using yml to your application.yml file.\r\n\r\n\r\n**For Example for H2 In Memory Configuration**\r\n\r\n    spring.jpa.defer-datasource-initialization = true\r\n    spring.h2.console.enabled=true\r\n    spring.sql.init.platform=h2\r\n    spring.datasource.url=jdbc:h2:mem:todo\r\n    spring.datasource.username=sa\r\n    spring.datasource.password=\r\n\r\n\r\nSometimes I&#39;ve got a SQL Syntax Error when executing the spring boot application because of forgetting the **semicolon(;)** at the end of CREATE TABLE and sometimes **SYSDATE()** and **NOW()** have problems using **NOW()** for the current date, so make sure to write the correct SQL syntax for DDL or DML","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>Spring Boot version 2+ has a minor change. All DDL(Data Definition Language) - Table Creations and data updates should be done in <strong>schema.sql</strong></p>\n<p>To resolve this issue just add this</p>\n<pre><code>spring.jpa.defer-datasource-initialization = true\n</code></pre>\n<p>to application.properties file.</p>\n<p>or</p>\n<pre><code>spring:\n  jpa:\n    defer-datasource-initialization: true\n</code></pre>\n<p>Add the above if you using yml to your application.yml file.</p>\n<p><strong>For Example for H2 In Memory Configuration</strong></p>\n<pre><code>spring.jpa.defer-datasource-initialization = true\nspring.h2.console.enabled=true\nspring.sql.init.platform=h2\nspring.datasource.url=jdbc:h2:mem:todo\nspring.datasource.username=sa\nspring.datasource.password=\n</code></pre>\n<p>Sometimes I've got a SQL Syntax Error when executing the spring boot application because of forgetting the <strong>semicolon(;)</strong> at the end of CREATE TABLE and sometimes <strong>SYSDATE()</strong> and <strong>NOW()</strong> have problems using <strong>NOW()</strong> for the current date, so make sure to write the correct SQL syntax for DDL or DML</p>\n"},{"tags":[],"owner":{"account_id":18155026,"reputation":129,"user_id":13207158,"display_name":"Abishethvarman V"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1672082966,"creation_date":1672082966,"answer_id":74923426,"question_id":28042426,"body_markdown":"In the current context(above JDK17 &amp; above Springboot 2.7), this issue commonly occurred. There are reasons for this connectivity issue. But common thing I have noticed when it occurred to me is clearly a connectivity issue related to databaseAutoConfiguration. The main database may be connected successfully with its properties and the test db doesnt. So need to build the project again to trigger the connection from the application.properties manually. \r\n\r\nThe error log of my particular scenario.\r\n\r\n&gt; org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;dataSourceScriptDatabaseInitializer&#39; defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Unsatisfied dependency expressed through method &#39;dataSourceScriptDatabaseInitializer&#39; parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;dataSource&#39;: Invocation of init method failed; nested exception is java.lang.IllegalStateException: Failed to replace DataSource with an embedded database for tests. If you want an embedded database please put a supported one on the classpath or tune the replace attribute of @AutoConfigureTestDatabase.\r\n\r\nSo the solution that I&#39;m proposing are\r\n\r\n 1. Check the connector dependencies\r\n 2. Check the application properties and the input credentials.\r\n 3. Make sure the build the project by triggering the maven or gradle manually. \r\n 4. Don&#39;t trust the autoconfiguration part and investigate it deeply.","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>In the current context(above JDK17 &amp; above Springboot 2.7), this issue commonly occurred. There are reasons for this connectivity issue. But common thing I have noticed when it occurred to me is clearly a connectivity issue related to databaseAutoConfiguration. The main database may be connected successfully with its properties and the test db doesnt. So need to build the project again to trigger the connection from the application.properties manually.</p>\n<p>The error log of my particular scenario.</p>\n<blockquote>\n<p>org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Unsatisfied dependency expressed through method 'dataSourceScriptDatabaseInitializer' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource': Invocation of init method failed; nested exception is java.lang.IllegalStateException: Failed to replace DataSource with an embedded database for tests. If you want an embedded database please put a supported one on the classpath or tune the replace attribute of @AutoConfigureTestDatabase.</p>\n</blockquote>\n<p>So the solution that I'm proposing are</p>\n<ol>\n<li>Check the connector dependencies</li>\n<li>Check the application properties and the input credentials.</li>\n<li>Make sure the build the project by triggering the maven or gradle manually.</li>\n<li>Don't trust the autoconfiguration part and investigate it deeply.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":11132492,"reputation":61,"user_id":9681026,"display_name":"rudr"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1677517229,"creation_date":1677517229,"answer_id":75583405,"question_id":28042426,"body_markdown":"    spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration\r\n\r\nwriting the above line in application.properties , it worked for me in case psql db with spring boot 3.0.3","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<pre><code>spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration\n</code></pre>\n<p>writing the above line in application.properties , it worked for me in case psql db with spring boot 3.0.3</p>\n"},{"tags":[],"owner":{"account_id":28798089,"reputation":1,"user_id":22055763,"display_name":"Chairman Sellaperumal"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686505014,"creation_date":1686484686,"answer_id":76450367,"question_id":28042426,"body_markdown":"For me no need to update below `@SpringBootApplication` annotation as `@SpringBootApplication(exclude={DataSourceAutoConfiguration.class})`\r\n\r\n\r\nJust updated deprecated `spring.datasource.platform=h2` into `spring.sql.init.platform=h2` and it is working fine.","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>For me no need to update below <code>@SpringBootApplication</code> annotation as <code>@SpringBootApplication(exclude={DataSourceAutoConfiguration.class})</code></p>\n<p>Just updated deprecated <code>spring.datasource.platform=h2</code> into <code>spring.sql.init.platform=h2</code> and it is working fine.</p>\n"},{"tags":[],"owner":{"account_id":8693671,"reputation":7378,"user_id":6505847,"display_name":"AzyCrw4282"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689863556,"creation_date":1689863556,"answer_id":76730964,"question_id":28042426,"body_markdown":"If you have this issue in gradle, you need to remove the Spring data library and rebuild gradle. I had to remove the following dependency to solve the error\r\n```\r\nimplementation(&#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;)\r\n```","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>If you have this issue in gradle, you need to remove the Spring data library and rebuild gradle. I had to remove the following dependency to solve the error</p>\n<pre><code>implementation('org.springframework.boot:spring-boot-starter-data-jpa')\n</code></pre>\n"}],"owner":{"account_id":222186,"reputation":13529,"user_id":480632,"accept_rate":74,"display_name":"J.Olufsen"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":805734,"favorite_count":0,"down_vote_count":0,"up_vote_count":119,"accepted_answer_id":31199853,"answer_count":35,"score":119,"last_activity_date":1689863556,"creation_date":1421747984,"question_id":28042426,"body_markdown":"I have Spring Boot web application. It&#39;s centered around RESTful approach. All configuration seems in place but for some reason MainController fails to handle request. It results in 404 error. How to fix it?\r\n\r\n\r\n\r\n    @Controller\r\n    public class MainController {\r\n    \r\n        @Autowired\r\n        ParserService parserService;\r\n    \r\n        @RequestMapping(value=&quot;/&quot;, method= RequestMethod.GET)\r\n        public @ResponseBody String displayStartPage(){\r\n            return &quot;{hello}&quot;;\r\n        }\r\n    }\r\n\r\n**Application**\r\n\r\n    @Configuration\r\n    @ComponentScan(basePackages = &quot;&quot;)\r\n    @EnableAutoConfiguration\r\n    public class Application extends SpringBootServletInitializer{\r\n            public static void main(final String[] args) {\r\n                SpringApplication.run(Application.class, args);\r\n            }\r\n    \r\n            @Override\r\n            protected final SpringApplicationBuilder configure(final SpringApplicationBuilder application) {\r\n                return application.sources(Application.class);\r\n            }\r\n    }\r\n**ParserController**\r\n\r\n    @RestController\r\n    public class ParserController {\r\n    \r\n        @Autowired\r\n        private ParserService parserService;\r\n    \r\n        @Autowired\r\n        private RecordDao recordDao;\r\n    \r\n     private static final Logger LOG = Logger.getLogger(ParserController.class);\r\n    \r\n        @RequestMapping(value=&quot;/upload&quot;, method= RequestMethod.POST)\r\n        public @ResponseBody String fileUploadPage(\r\n       }\r\n    }\r\n\r\n**UPDATE**\r\n\r\nSeems like MySQL cannot be initialized by Spring....\r\n\r\n        Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration&#39;: Injection of autowired dependencies failed; \r\n    \r\n    nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private javax.sql.DataSource org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration.dataSource; \r\n    \r\n    nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;dataSource&#39; defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceAutoConfiguration$NonEmbeddedConfiguration.class]: Instantiation of bean failed; \r\n    \r\n    nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Factory method [public javax.sql.DataSource org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration$NonEmbeddedConfiguration.dataSource()] threw exception; \r\n    \r\n    nested exception is org.springframework.beans.factory.BeanCreationException: Cannot determine embedded database driver class for database type NONE. If you want an embedded database please put a supported one on the classpath.\r\n\r\n**UPDATE2**\r\n\r\n**application.properties**\r\n\r\n```lang-yml\r\n    # Database \r\n    spring.datasource.driverClassName = com.mysql.jdbc.Driver\r\n    spring.datasource.url = jdbc:mysql://localhost:3306/logparser\r\n    spring.datasource.username = root\r\n    spring.datasource.password = root\r\n    \r\n    spring.jpa.database = MYSQL\r\n    spring.jpa.show-sql = true\r\n    \r\n    # Hibernate\r\n    hibernate.dialect: org.hibernate.dialect.MySQL5Dialect\r\n    hibernate.show_sql: true\r\n    hibernate.hbm2ddl.auto: update\r\n    entitymanager.packagesToScan: /\r\n```\r\n\r\n**UPDATE4**\r\n\r\nSeems lite controllers not responding eventhough `@RequestMapping` are set. Why might it be?\r\n\r\n&gt; PS. It occurs when I run Maven&#39;s lifecycle `test`.\r\nWhen running in degub mode in IntelliJ there is no error outputted.\r\n\r\n**UPDATE5**\r\n\r\nAlso I use this DAO as explained in tutorial....\r\n\r\n    public interface RecordDao extends CrudRepository&lt;Record, Long&gt; {\r\n    }\r\n\r\nhttp://blog.netgloo.com/2014/10/27/using-mysql-in-spring-boot-via-spring-data-jpa-and-hibernate/\r\n\r\n**UPDATE6**\r\n\r\nI did changed my application properties. And tried every single combination but it refuses to work. ;(\r\n\r\n**Maven output:**\r\n\r\n    -------------------------------------------------------\r\n     T E S T S\r\n    -------------------------------------------------------\r\n    Running IntegrationTest\r\n    Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 2.365 sec &lt;&lt;&lt; FAILURE! - in IntegrationTest\r\n    saveParsedRecordsToDatabase(IntegrationTest)  Time elapsed: 2.01 sec  &lt;&lt;&lt; ERROR!\r\n    java.lang.IllegalStateException: Failed to load ApplicationContext\r\n    \tat org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContext(CacheAwareContextLoaderDelegate.java:99)\r\n    \tat org.springframework.test.context.DefaultTestContext.getApplicationContext(DefaultTestContext.java:101)\r\n    \tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)\r\n    \tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)\r\n    \tat org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:331)\r\n    \tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:213)\r\n    \tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:290)\r\n    \tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n    \tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:292)\r\n    \tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:233)\r\n    \tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:87)\r\n    \tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)\r\n    \tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)\r\n    \tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)\r\n    \tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)\r\n    \tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)\r\n    \tat org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)\r\n    \tat org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)\r\n    \tat org.junit.runners.ParentRunner.run(ParentRunner.java:309)\r\n    \tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:176)\r\n    \tat org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:264)\r\n    \tat org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153)\r\n    \tat org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:124)\r\n    \tat org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:200)\r\n    \tat org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:153)\r\n    \tat org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103)\r\n    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration&#39;: Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private javax.sql.DataSource org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration.dataSource; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;dataSource&#39; defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceAutoConfiguration$NonEmbeddedConfiguration.class]: Instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Factory method [public javax.sql.DataSource org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration$NonEmbeddedConfiguration.dataSource()] threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Cannot determine embedded database driver class for database type NONE. If you want an embedded database please put a supported one on the classpath.","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>I have Spring Boot web application. It's centered around RESTful approach. All configuration seems in place but for some reason MainController fails to handle request. It results in 404 error. How to fix it?</p>\n<pre><code>@Controller\npublic class MainController {\n\n    @Autowired\n    ParserService parserService;\n\n    @RequestMapping(value=&quot;/&quot;, method= RequestMethod.GET)\n    public @ResponseBody String displayStartPage(){\n        return &quot;{hello}&quot;;\n    }\n}\n</code></pre>\n<p><strong>Application</strong></p>\n<pre><code>@Configuration\n@ComponentScan(basePackages = &quot;&quot;)\n@EnableAutoConfiguration\npublic class Application extends SpringBootServletInitializer{\n        public static void main(final String[] args) {\n            SpringApplication.run(Application.class, args);\n        }\n\n        @Override\n        protected final SpringApplicationBuilder configure(final SpringApplicationBuilder application) {\n            return application.sources(Application.class);\n        }\n}\n</code></pre>\n<p><strong>ParserController</strong></p>\n<pre><code>@RestController\npublic class ParserController {\n\n    @Autowired\n    private ParserService parserService;\n\n    @Autowired\n    private RecordDao recordDao;\n\n private static final Logger LOG = Logger.getLogger(ParserController.class);\n\n    @RequestMapping(value=&quot;/upload&quot;, method= RequestMethod.POST)\n    public @ResponseBody String fileUploadPage(\n   }\n}\n</code></pre>\n<p><strong>UPDATE</strong></p>\n<p>Seems like MySQL cannot be initialized by Spring....</p>\n<pre><code>    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration': Injection of autowired dependencies failed; \n\nnested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private javax.sql.DataSource org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration.dataSource; \n\nnested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceAutoConfiguration$NonEmbeddedConfiguration.class]: Instantiation of bean failed; \n\nnested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Factory method [public javax.sql.DataSource org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration$NonEmbeddedConfiguration.dataSource()] threw exception; \n\nnested exception is org.springframework.beans.factory.BeanCreationException: Cannot determine embedded database driver class for database type NONE. If you want an embedded database please put a supported one on the classpath.\n</code></pre>\n<p><strong>UPDATE2</strong></p>\n<p><strong>application.properties</strong></p>\n<pre class=\"lang-yml prettyprint-override\"><code>    # Database \n    spring.datasource.driverClassName = com.mysql.jdbc.Driver\n    spring.datasource.url = jdbc:mysql://localhost:3306/logparser\n    spring.datasource.username = root\n    spring.datasource.password = root\n    \n    spring.jpa.database = MYSQL\n    spring.jpa.show-sql = true\n    \n    # Hibernate\n    hibernate.dialect: org.hibernate.dialect.MySQL5Dialect\n    hibernate.show_sql: true\n    hibernate.hbm2ddl.auto: update\n    entitymanager.packagesToScan: /\n</code></pre>\n<p><strong>UPDATE4</strong></p>\n<p>Seems lite controllers not responding eventhough <code>@RequestMapping</code> are set. Why might it be?</p>\n<blockquote>\n<p>PS. It occurs when I run Maven's lifecycle <code>test</code>.\nWhen running in degub mode in IntelliJ there is no error outputted.</p>\n</blockquote>\n<p><strong>UPDATE5</strong></p>\n<p>Also I use this DAO as explained in tutorial....</p>\n<pre><code>public interface RecordDao extends CrudRepository&lt;Record, Long&gt; {\n}\n</code></pre>\n<p><a href=\"http://blog.netgloo.com/2014/10/27/using-mysql-in-spring-boot-via-spring-data-jpa-and-hibernate/\" rel=\"noreferrer\">http://blog.netgloo.com/2014/10/27/using-mysql-in-spring-boot-via-spring-data-jpa-and-hibernate/</a></p>\n<p><strong>UPDATE6</strong></p>\n<p>I did changed my application properties. And tried every single combination but it refuses to work. ;(</p>\n<p><strong>Maven output:</strong></p>\n<pre><code>-------------------------------------------------------\n T E S T S\n-------------------------------------------------------\nRunning IntegrationTest\nTests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 2.365 sec &lt;&lt;&lt; FAILURE! - in IntegrationTest\nsaveParsedRecordsToDatabase(IntegrationTest)  Time elapsed: 2.01 sec  &lt;&lt;&lt; ERROR!\njava.lang.IllegalStateException: Failed to load ApplicationContext\n    at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContext(CacheAwareContextLoaderDelegate.java:99)\n    at org.springframework.test.context.DefaultTestContext.getApplicationContext(DefaultTestContext.java:101)\n    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)\n    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)\n    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:331)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:213)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:290)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:292)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:233)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:87)\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)\n    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)\n    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)\n    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:309)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:176)\n    at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:264)\n    at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153)\n    at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:124)\n    at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:200)\n    at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:153)\n    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103)\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private javax.sql.DataSource org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration.dataSource; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceAutoConfiguration$NonEmbeddedConfiguration.class]: Instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Factory method [public javax.sql.DataSource org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration$NonEmbeddedConfiguration.dataSource()] threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Cannot determine embedded database driver class for database type NONE. If you want an embedded database please put a supported one on the classpath.\n</code></pre>\n"},{"tags":["java","selenium-webdriver","automated-tests"],"comments":[{"owner":{"account_id":10299692,"reputation":5744,"user_id":7598774,"accept_rate":75,"display_name":"Shawn"},"score":0,"creation_date":1689843301,"post_id":76728188,"comment_id":135271704,"body_markdown":"Can you share the URL of the application if it can be shared to public?","body":"Can you share the URL of the application if it can be shared to public?"},{"owner":{"account_id":27938804,"reputation":102,"user_id":21335232,"display_name":"Bhairu"},"score":0,"creation_date":1689843386,"post_id":76728188,"comment_id":135271712,"body_markdown":"Please add the screenshot of the DOM of that element. you paste the DOM attributes but I didn&#39;t understand the hirarchy.","body":"Please add the screenshot of the DOM of that element. you paste the DOM attributes but I didn&#39;t understand the hirarchy."},{"owner":{"account_id":17530857,"reputation":11,"user_id":12714908,"display_name":"Danu"},"score":0,"creation_date":1689846272,"post_id":76728188,"comment_id":135272285,"body_markdown":"Sorry i can not share the application.","body":"Sorry i can not share the application."},{"owner":{"account_id":17530857,"reputation":11,"user_id":12714908,"display_name":"Danu"},"score":0,"creation_date":1689846364,"post_id":76728188,"comment_id":135272306,"body_markdown":"can you ignore the select option code part.","body":"can you ignore the select option code part."}],"answers":[{"comments":[{"owner":{"account_id":17530857,"reputation":11,"user_id":12714908,"display_name":"Danu"},"score":0,"creation_date":1689845688,"post_id":76728283,"comment_id":135272145,"body_markdown":"I tried this one but getting this error. org.openqa.selenium.ElementNotInteractableException: element not interactable: Element is not currently visible and may not be manipulated. I think Items are selected from ul list items.","body":"I tried this one but getting this error. org.openqa.selenium.ElementNotInteractableException: element not interactable: Element is not currently visible and may not be manipulated. I think Items are selected from ul list items."}],"tags":[],"owner":{"account_id":10299692,"reputation":5744,"user_id":7598774,"accept_rate":75,"display_name":"Shawn"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689843860,"creation_date":1689843860,"answer_id":76728283,"question_id":76728188,"body_markdown":"I see a `&lt;select&gt;` node in the HTML. You can use selenium&#39;s `Select` class to handle/choose dropdown values. Refer the code below:\r\n\r\n````\r\nSelect drpCountry = new Select(driver.findElement(By.id(&quot;countryCode&quot;)));\r\ndrpCountry.selectByVisibleText(&quot;Canada&quot;);\r\n````\r\n\r\nImports required:\r\n````\r\nimport org.openqa.selenium.support.ui.Select;\r\n````","title":"how to select li of ul in selenium webdriver using java","body":"<p>I see a <code>&lt;select&gt;</code> node in the HTML. You can use selenium's <code>Select</code> class to handle/choose dropdown values. Refer the code below:</p>\n<pre><code>Select drpCountry = new Select(driver.findElement(By.id(&quot;countryCode&quot;)));\ndrpCountry.selectByVisibleText(&quot;Canada&quot;);\n</code></pre>\n<p>Imports required:</p>\n<pre><code>import org.openqa.selenium.support.ui.Select;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27793345,"reputation":24,"user_id":21219384,"display_name":"Dinesh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689846250,"creation_date":1689846250,"answer_id":76728606,"question_id":76728188,"body_markdown":"        public void selectCountry() {\r\n        \tWebElement dropdown = driver.findElement(By.id(&quot;countryCode&quot;));\r\n        \tSelect select=new Select(dropdown);\r\n        \tselect.selectByVisibleText(&quot;Afghanistan&quot;);\r\n        }\r\n    \r\n    if we want to select Canada just pass Canada in selectByVisibleText() method","title":"how to select li of ul in selenium webdriver using java","body":"<pre><code>    public void selectCountry() {\n        WebElement dropdown = driver.findElement(By.id(&quot;countryCode&quot;));\n        Select select=new Select(dropdown);\n        select.selectByVisibleText(&quot;Afghanistan&quot;);\n    }\n\nif we want to select Canada just pass Canada in selectByVisibleText() method\n</code></pre>\n"}],"owner":{"account_id":17530857,"reputation":11,"user_id":12714908,"display_name":"Danu"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":82,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1689863288,"creation_date":1689843063,"question_id":76728188,"body_markdown":"I am new to selenium. I am working on selenium webdriver. i want to select a value from the li of ul. I need to select a country from list items. \r\n\r\nHere is the HTML code;\r\n\r\n\r\n```\r\n&lt;div class=&quot;select-wrapper initialized&quot;&gt;\r\n&lt;span class=&quot;caret&quot;&gt;▼&lt;/span&gt;\r\n&lt;input type=&quot;text&quot; class=&quot;select-dropdown&quot; readonly=&quot;true&quot; data-activates=&quot;select-options-45625784-059c-3523-a00e-3ad824fad64a&quot; value=&quot;-- Select --&quot;&gt;\r\n\r\n&lt;ul id=&quot;select-options-45625784-059c-3523-a00e-3ad824fad64a&quot; class=&quot;dropdown-content select-dropdown &quot;&gt;\r\n\r\n&lt;li class=&quot;&quot;&gt;&lt;span&gt;-- Select --&lt;/span&gt;\r\n\r\n&lt;/li&gt;&lt;li class=&quot;&quot;&gt;&lt;span&gt;Afghanistan&lt;/span&gt;&lt;/li&gt;\r\n&lt;/li&gt;&lt;li class=&quot;&quot;&gt;&lt;span&gt;Canada&lt;/span&gt;&lt;/li&gt;\r\n\r\n&lt;/ul&gt;\r\n\r\n&lt;select ng-if=&quot;!form.translate&quot; id=&quot;countryCode&quot; materializecss-select=&quot;&quot; ng-model=&quot;model[&#39;countryCode&#39;]&quot; ng-model-options=&quot;form.ngModelOptions&quot; ng-disabled=&quot;form.readonly&quot; sf-changed=&quot;form&quot; class=&quot;initialized&quot; schema-validate=&quot;form&quot; ng-options=&quot;item.value as item.name group by item.group for item in form.titleMap&quot; name=&quot;countryCode&quot;&gt;\r\n\r\n&lt;option label=&quot;-- Select --&quot; value=&quot;string:&quot; selected=&quot;selected&quot;&gt;-- Select --&lt;/option&gt;\r\n\r\n&lt;option label=&quot;Afghanistan&quot; value=&quot;string:AF&quot;&gt;Afghanistan&lt;/option&gt;\r\n&lt;option label=&quot;Canada&quot; value=&quot;string:AF&quot;&gt;Canada&lt;/option&gt;\r\n\r\n&lt;/select&gt;\r\n\r\n&lt;/div&gt;\r\n```\r\n\r\n\r\nHere is my selectCountry function.\r\n```\r\nBy countryInput = By.xpath(&quot;//*[@id=\\&quot;countryCode_inputfileddiv\\&quot;]/div/input&quot;);\r\n\r\npublic void selectCountry() {\r\n        WebElement dropdown = driver.findElement(countryInput);\r\n        dropdown.click();\r\n\r\n        List&lt;WebElement&gt; options = driver.findElements(By.id(&quot;select-options-b9a0d236-4008-830c-5319-9405f74b872f&quot;));\r\n\r\n        for (WebElement option : options) {\r\n            String valueToSelect = option.getText().trim();\r\n            System.out.println(valueToSelect);\r\n            if (valueToSelect.equals(&quot;Canada&quot;)) {\r\n                continue;\r\n            }\r\n\r\n            option.click();\r\n        }\r\n\r\n    }\r\n```\r\nHow to click the drop down?\r\n\r\nI tried with the above example lines but am getting error such as \r\n\r\n&gt; Element is not currently visible and so may not be interacted with Command duration","title":"how to select li of ul in selenium webdriver using java","body":"<p>I am new to selenium. I am working on selenium webdriver. i want to select a value from the li of ul. I need to select a country from list items.</p>\n<p>Here is the HTML code;</p>\n<pre><code>&lt;div class=&quot;select-wrapper initialized&quot;&gt;\n&lt;span class=&quot;caret&quot;&gt;▼&lt;/span&gt;\n&lt;input type=&quot;text&quot; class=&quot;select-dropdown&quot; readonly=&quot;true&quot; data-activates=&quot;select-options-45625784-059c-3523-a00e-3ad824fad64a&quot; value=&quot;-- Select --&quot;&gt;\n\n&lt;ul id=&quot;select-options-45625784-059c-3523-a00e-3ad824fad64a&quot; class=&quot;dropdown-content select-dropdown &quot;&gt;\n\n&lt;li class=&quot;&quot;&gt;&lt;span&gt;-- Select --&lt;/span&gt;\n\n&lt;/li&gt;&lt;li class=&quot;&quot;&gt;&lt;span&gt;Afghanistan&lt;/span&gt;&lt;/li&gt;\n&lt;/li&gt;&lt;li class=&quot;&quot;&gt;&lt;span&gt;Canada&lt;/span&gt;&lt;/li&gt;\n\n&lt;/ul&gt;\n\n&lt;select ng-if=&quot;!form.translate&quot; id=&quot;countryCode&quot; materializecss-select=&quot;&quot; ng-model=&quot;model['countryCode']&quot; ng-model-options=&quot;form.ngModelOptions&quot; ng-disabled=&quot;form.readonly&quot; sf-changed=&quot;form&quot; class=&quot;initialized&quot; schema-validate=&quot;form&quot; ng-options=&quot;item.value as item.name group by item.group for item in form.titleMap&quot; name=&quot;countryCode&quot;&gt;\n\n&lt;option label=&quot;-- Select --&quot; value=&quot;string:&quot; selected=&quot;selected&quot;&gt;-- Select --&lt;/option&gt;\n\n&lt;option label=&quot;Afghanistan&quot; value=&quot;string:AF&quot;&gt;Afghanistan&lt;/option&gt;\n&lt;option label=&quot;Canada&quot; value=&quot;string:AF&quot;&gt;Canada&lt;/option&gt;\n\n&lt;/select&gt;\n\n&lt;/div&gt;\n</code></pre>\n<p>Here is my selectCountry function.</p>\n<pre><code>By countryInput = By.xpath(&quot;//*[@id=\\&quot;countryCode_inputfileddiv\\&quot;]/div/input&quot;);\n\npublic void selectCountry() {\n        WebElement dropdown = driver.findElement(countryInput);\n        dropdown.click();\n\n        List&lt;WebElement&gt; options = driver.findElements(By.id(&quot;select-options-b9a0d236-4008-830c-5319-9405f74b872f&quot;));\n\n        for (WebElement option : options) {\n            String valueToSelect = option.getText().trim();\n            System.out.println(valueToSelect);\n            if (valueToSelect.equals(&quot;Canada&quot;)) {\n                continue;\n            }\n\n            option.click();\n        }\n\n    }\n</code></pre>\n<p>How to click the drop down?</p>\n<p>I tried with the above example lines but am getting error such as</p>\n<blockquote>\n<p>Element is not currently visible and so may not be interacted with Command duration</p>\n</blockquote>\n"},{"tags":["java","autocomplete","controlsfx"],"owner":{"account_id":9305717,"reputation":47,"user_id":6909544,"display_name":"Marko"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689863235,"creation_date":1689863235,"question_id":76730908,"body_markdown":"I am working on the implementation of the ControlsFX autocompletion/suggestion in a small JavaFX desktop application.\r\n\r\nI am unable to compile following code:\r\n\r\n    SuggestionProvider&lt;String&gt; provider = SuggestionProvider.create(list); \r\n    AutoCompletionBinding acbLogin = TextFields.bindAutoCompletion(searchField, t -&gt; {\r\n    new AutoCompletionTextFieldBinding&lt;&gt;(searchField, provider);return list.stream().filter(elem -&gt; {\r\n                                return elem.toLowerCase().startsWith(t.getUserText().toLowerCase());\r\n                            }).collect(Collectors.toList());\r\n                        });\r\n\r\n\r\nGetting following error\r\n\r\n    cannot access class impl.org.controlsfx.autocompletion.SuggestionProvider (in module org.controlsfx.controls) because module org.controlsfx.controls does not export impl.org.controlsfx.autocompletion to module com.example.test\r\n\r\nGot a similar error when I implemented ControlsFX `AutoCompletion` library and could fix it with following code in the pom.xml in the maven-plugin-section\r\n\r\n    &lt;options&gt;\r\n        &lt;option&gt;-XX:+UseG1GC&lt;/option&gt;\r\n        &lt;option&gt;--add-exports&lt;/option&gt;\r\n        &lt;option&gt;javafx.base/com.sun.javafx.event=org.controlsfx.controls&lt;/option&gt;\r\n    &lt;/options&gt;\r\n\r\nAny ideas if there is similar troubleshooting available?\r\nAppreciate your help.\r\nMany thanks.\r\n\r\n\r\n\r\n ","title":"Usage of ControlsFX AutoCompletion SuggestionProvider","body":"<p>I am working on the implementation of the ControlsFX autocompletion/suggestion in a small JavaFX desktop application.</p>\n<p>I am unable to compile following code:</p>\n<pre><code>SuggestionProvider&lt;String&gt; provider = SuggestionProvider.create(list); \nAutoCompletionBinding acbLogin = TextFields.bindAutoCompletion(searchField, t -&gt; {\nnew AutoCompletionTextFieldBinding&lt;&gt;(searchField, provider);return list.stream().filter(elem -&gt; {\n                            return elem.toLowerCase().startsWith(t.getUserText().toLowerCase());\n                        }).collect(Collectors.toList());\n                    });\n</code></pre>\n<p>Getting following error</p>\n<pre><code>cannot access class impl.org.controlsfx.autocompletion.SuggestionProvider (in module org.controlsfx.controls) because module org.controlsfx.controls does not export impl.org.controlsfx.autocompletion to module com.example.test\n</code></pre>\n<p>Got a similar error when I implemented ControlsFX <code>AutoCompletion</code> library and could fix it with following code in the pom.xml in the maven-plugin-section</p>\n<pre><code>&lt;options&gt;\n    &lt;option&gt;-XX:+UseG1GC&lt;/option&gt;\n    &lt;option&gt;--add-exports&lt;/option&gt;\n    &lt;option&gt;javafx.base/com.sun.javafx.event=org.controlsfx.controls&lt;/option&gt;\n&lt;/options&gt;\n</code></pre>\n<p>Any ideas if there is similar troubleshooting available?\nAppreciate your help.\nMany thanks.</p>\n"},{"tags":["java","spring-boot","swagger","openapi","multipartfile"],"comments":[{"owner":{"account_id":39252,"reputation":89842,"user_id":113116,"display_name":"Helen"},"score":0,"creation_date":1657874741,"post_id":72982587,"comment_id":128918282,"body_markdown":"The `file` parameter showing up as having the &quot;string&quot; type is correct (in OAS 3.0, files are defined as binary strings). What&#39;s incorrect is that it shows up as a query parameter instead of a request body field. Should the annotation maybe be [`@RequestPart`](https://springdoc.org/#is-file-upload-supported) instead of `@RequestParam`?","body":"The <code>file</code> parameter showing up as having the &quot;string&quot; type is correct (in OAS 3.0, files are defined as binary strings). What&#39;s incorrect is that it shows up as a query parameter instead of a request body field. Should the annotation maybe be <a href=\"https://springdoc.org/#is-file-upload-supported\" rel=\"nofollow noreferrer\"><code>@RequestPart</code></a> instead of <code>@RequestParam</code>?"},{"owner":{"account_id":4533970,"reputation":458,"user_id":3683684,"display_name":"sanjeev"},"score":0,"creation_date":1658328783,"post_id":72982587,"comment_id":129025621,"body_markdown":"Tried with @RequestPart as well. Same behavior and the &quot;Execute&quot; button doesn&#39;t work.","body":"Tried with @RequestPart as well. Same behavior and the &quot;Execute&quot; button doesn&#39;t work."},{"owner":{"account_id":139494,"reputation":804,"user_id":345130,"accept_rate":40,"display_name":"ILya Cyclone"},"score":2,"creation_date":1668522957,"post_id":72982587,"comment_id":131422378,"body_markdown":"Hi. Any updates on this issue?","body":"Hi. Any updates on this issue?"}],"answers":[{"comments":[{"owner":{"account_id":4533970,"reputation":458,"user_id":3683684,"display_name":"sanjeev"},"score":1,"creation_date":1684755774,"post_id":76282897,"comment_id":134558437,"body_markdown":"Thanks! I&#39;ll try this and let you know.","body":"Thanks! I&#39;ll try this and let you know."}],"tags":[],"owner":{"account_id":7394006,"reputation":5031,"user_id":5626568,"display_name":"ℛɑƒ&#230;Ŀᴿᴹᴿ"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684428823,"creation_date":1684428823,"answer_id":76282897,"question_id":72982587,"body_markdown":"You could use `@RequestPart` with `MediaType.MULTIPART_FORM_DATA_VALUE`.\r\n\r\nCan be combined with `@Parameter` from OpenAPI (`io.swagger.v3.oas.annotations`):\r\n\r\n    @PostMapping(&quot;/files&quot;, consumes = {MediaType.MULTIPART_FORM_DATA_VALUE})\r\n    public ResponseEntity&lt;?&gt; uploadFiles(\r\n    \t@Parameter(content = @Content(mediaType = MediaType.APPLICATION_JSON_VALUE))\r\n        @RequestPart(value = &quot;file&quot;) MultipartFile file,\r\n        @RequestPart(value = &quot;comment&quot;, required = false ) String comment\r\n    ) throws IOException, ExecutionException, InterruptedException {\r\n    \tlog.debug(&quot;Total files to store: {}&quot;, file.length);\r\n    \tlog.debug(&quot;comment: {}&quot;, comment);\r\n    \tfileService.storeFile(Arrays.asList(file), comment);\r\n    \treturn ResponseEntity.ok(environment.getProperty(&quot;file.upload.success&quot;));\r\n    }\r\n\r\nOn `swagger-ui` should show `multipart/form-data` selected on right:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n---\r\n\r\n#### Reference:\r\n\r\n- https://stackoverflow.com/questions/74149274/post-method-with-multipartfile-as-requestpart-is-considered-as-string-in-swagger\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/enSe2.png","title":"Why SpringDoc OpenAPI doesn&#39;t understand MultipartFile payload?","body":"<p>You could use <code>@RequestPart</code> with <code>MediaType.MULTIPART_FORM_DATA_VALUE</code>.</p>\n<p>Can be combined with <code>@Parameter</code> from OpenAPI (<code>io.swagger.v3.oas.annotations</code>):</p>\n<pre><code>@PostMapping(&quot;/files&quot;, consumes = {MediaType.MULTIPART_FORM_DATA_VALUE})\npublic ResponseEntity&lt;?&gt; uploadFiles(\n    @Parameter(content = @Content(mediaType = MediaType.APPLICATION_JSON_VALUE))\n    @RequestPart(value = &quot;file&quot;) MultipartFile file,\n    @RequestPart(value = &quot;comment&quot;, required = false ) String comment\n) throws IOException, ExecutionException, InterruptedException {\n    log.debug(&quot;Total files to store: {}&quot;, file.length);\n    log.debug(&quot;comment: {}&quot;, comment);\n    fileService.storeFile(Arrays.asList(file), comment);\n    return ResponseEntity.ok(environment.getProperty(&quot;file.upload.success&quot;));\n}\n</code></pre>\n<p>On <code>swagger-ui</code> should show <code>multipart/form-data</code> selected on right:</p>\n<p><a href=\"https://i.stack.imgur.com/enSe2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/enSe2.png\" alt=\"enter image description here\" /></a></p>\n<hr />\n<h4>Reference:</h4>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/74149274/post-method-with-multipartfile-as-requestpart-is-considered-as-string-in-swagger\">POST method with MultipartFile as RequestPart is considered as String in swagger3 open-api Springboot project</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":29057741,"reputation":11,"user_id":22259166,"display_name":"anh"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689862811,"creation_date":1689862811,"answer_id":76730849,"question_id":72982587,"body_markdown":"Along the line of Rafael&#39;s post, this worked for me:\r\n ```\r\npublic ResponseEntity&lt;String&gt; xslTransform(\r\n            @Parameter(description = &quot;Upload a xsl and a xml file&quot;, content = @Content(mediaType = MediaType.MULTIPART_FORM_DATA_VALUE))\r\n            @RequestPart(value = &quot;Upload 2 files&quot;, required = true)\r\n            MultipartFile[] files) {\r\n........\r\n    }\r\n```\r\n\r\nI use openapi version 1.6.15. the only issue is that I cannot set the maximum number of items in the array. Users might add more items than necessary.","title":"Why SpringDoc OpenAPI doesn&#39;t understand MultipartFile payload?","body":"<p>Along the line of Rafael's post, this worked for me:</p>\n<pre><code>public ResponseEntity&lt;String&gt; xslTransform(\n           @Parameter(description = &quot;Upload a xsl and a xml file&quot;, content = @Content(mediaType = MediaType.MULTIPART_FORM_DATA_VALUE))\n           @RequestPart(value = &quot;Upload 2 files&quot;, required = true)\n           MultipartFile[] files) {\n........\n   }\n</code></pre>\n<p>I use openapi version 1.6.15. the only issue is that I cannot set the maximum number of items in the array. Users might add more items than necessary.</p>\n"}],"owner":{"account_id":4533970,"reputation":458,"user_id":3683684,"display_name":"sanjeev"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2258,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1689862811,"creation_date":1657810554,"question_id":72982587,"body_markdown":"I&#39;m working on a Spring boot application which has a controller to help upload `Multipart` files:\r\n\r\n```\r\n@PostMapping(&quot;/files&quot;)\r\npublic ResponseEntity&lt;?&gt; uploadFiles(\r\n        @RequestParam(&quot;file&quot;) MultipartFile[] file, String comment) \r\n        throws IOException, ExecutionException, InterruptedException {\r\n    log.debug(&quot;Total files to store: {}&quot;, file.length);\r\n    log.debug(&quot;comment: {}&quot;, comment);\r\n    fileService.storeFile(Arrays.asList(file), comment);\r\n    return ResponseEntity.ok(environment.getProperty(&quot;file.upload.success&quot;));\r\n}\r\n```\r\n**Problem:** Somehow OpenDocAPI (swagger) doesn&#39;t understand this payload as file. \r\n\r\nIt shows this field as `String` if I mention `@RequestParam(&quot;file&quot;) MultipartFile file` or `String[]` if I use array of MultipartFiles.\r\n\r\nMy Spring boot parent:\r\n```\r\n&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n&lt;version&gt;2.7.1&lt;/version&gt;\r\n```\r\nThe spring doc openapi dependency:\r\n```\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.springdoc&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;\r\n\t&lt;version&gt;1.6.9&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\nThe swagger page:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nThe result page when I click on &lt;kbd&gt;Try it out&lt;/kbd&gt;:\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\nThe &lt;kbd&gt;Execute&lt;/kbd&gt; button doesn&#39;t work\r\n\r\nAny idea what am I missing in the controller?\r\n\r\n**PS -** I tried with mentioning:\r\n\r\n    @PostMapping(value = &quot;/files&quot;, consumes = {MediaType.MULTIPART_FORM_DATA_VALUE})\r\n\r\nBut still OpenAPI would only treat it as `String`.\r\n\r\n  [1]: https://i.stack.imgur.com/BVaRC.png\r\n  [2]: https://i.stack.imgur.com/5QoMs.png","title":"Why SpringDoc OpenAPI doesn&#39;t understand MultipartFile payload?","body":"<p>I'm working on a Spring boot application which has a controller to help upload <code>Multipart</code> files:</p>\n<pre><code>@PostMapping(&quot;/files&quot;)\npublic ResponseEntity&lt;?&gt; uploadFiles(\n        @RequestParam(&quot;file&quot;) MultipartFile[] file, String comment) \n        throws IOException, ExecutionException, InterruptedException {\n    log.debug(&quot;Total files to store: {}&quot;, file.length);\n    log.debug(&quot;comment: {}&quot;, comment);\n    fileService.storeFile(Arrays.asList(file), comment);\n    return ResponseEntity.ok(environment.getProperty(&quot;file.upload.success&quot;));\n}\n</code></pre>\n<p><strong>Problem:</strong> Somehow OpenDocAPI (swagger) doesn't understand this payload as file.</p>\n<p>It shows this field as <code>String</code> if I mention <code>@RequestParam(&quot;file&quot;) MultipartFile file</code> or <code>String[]</code> if I use array of MultipartFiles.</p>\n<p>My Spring boot parent:</p>\n<pre><code>&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n&lt;version&gt;2.7.1&lt;/version&gt;\n</code></pre>\n<p>The spring doc openapi dependency:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n    &lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;\n    &lt;version&gt;1.6.9&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>The swagger page:</p>\n<p><a href=\"https://i.stack.imgur.com/BVaRC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BVaRC.png\" alt=\"enter image description here\" /></a></p>\n<p>The result page when I click on <kbd>Try it out</kbd>:</p>\n<p><a href=\"https://i.stack.imgur.com/5QoMs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5QoMs.png\" alt=\"enter image description here\" /></a></p>\n<p>The <kbd>Execute</kbd> button doesn't work</p>\n<p>Any idea what am I missing in the controller?</p>\n<p><strong>PS -</strong> I tried with mentioning:</p>\n<pre><code>@PostMapping(value = &quot;/files&quot;, consumes = {MediaType.MULTIPART_FORM_DATA_VALUE})\n</code></pre>\n<p>But still OpenAPI would only treat it as <code>String</code>.</p>\n"},{"tags":["java","json","maven","jsonschema2pojo"],"answers":[{"comments":[{"owner":{"account_id":3836686,"reputation":913,"user_id":3180809,"accept_rate":86,"display_name":"esel"},"score":0,"creation_date":1689865046,"post_id":76730839,"comment_id":135276561,"body_markdown":"Thanks but my question was concerning the generation from JSON examples, not JSON schemas","body":"Thanks but my question was concerning the generation from JSON examples, not JSON schemas"},{"owner":{"account_id":24070761,"reputation":13,"user_id":18046714,"display_name":"Djoust"},"score":0,"creation_date":1690190272,"post_id":76730839,"comment_id":135313609,"body_markdown":"Sorry miss read the question. Cant help you there, I&#39;m not using it in that way.","body":"Sorry miss read the question. Cant help you there, I&#39;m not using it in that way."}],"tags":[],"owner":{"account_id":24070761,"reputation":13,"user_id":18046714,"display_name":"Djoust"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689862722,"creation_date":1689862722,"answer_id":76730839,"question_id":71951310,"body_markdown":"What you can do in this case is make 2 separate json schemas and reference one in the other:\r\n\r\nroom.json\r\n``` json\r\n{\r\n  &quot;title&quot;: &quot;room&quot;,\r\n  &quot;$schema&quot;: &quot;https://json-schema.org/draft/2020-12/schema&quot;,\r\n  &quot;$id&quot;: &quot;room.json&quot;,\r\n  &quot;type&quot;: &quot;object&quot;,\r\n  &quot;properties&quot;: {\r\n    &quot;coffeeTable&quot;: {\r\n      &quot;type&quot;: &quot;array&quot;,\r\n      &quot;items&quot;: {\r\n        &quot;$ref&quot;: &quot;book.json&quot;\r\n      }\r\n    },\r\n    &quot;bookCase&quot;: {\r\n      &quot;type&quot;: &quot;array&quot;,\r\n      &quot;items&quot;: {\r\n        &quot;$ref&quot;: &quot;book.json&quot;\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nand book.json\r\n``` json\r\n{\r\n    &quot;title&quot;: &quot;Book&quot;,\r\n    &quot;$schema&quot;: &quot;https://json-schema.org/draft/2020-12/schema&quot;,\r\n    &quot;$id&quot;: &quot;book.json&quot;,\r\n    &quot;type&quot;: &quot;object&quot;,\r\n    &quot;properties&quot;: {\r\n        &quot;author&quot;: {\r\n            &quot;type&quot;: &quot;string&quot;\r\n        },\r\n        &quot;title&quot;: {\r\n            &quot;type&quot;: &quot;string&quot;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThis will generate 2 java file: `Room.java` &amp; `Book.java`","title":"Avoid generating duplicated classes with jsonschema2pojo and sourceType &quot;json&quot;","body":"<p>What you can do in this case is make 2 separate json schemas and reference one in the other:</p>\n<p>room.json</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;title&quot;: &quot;room&quot;,\n  &quot;$schema&quot;: &quot;https://json-schema.org/draft/2020-12/schema&quot;,\n  &quot;$id&quot;: &quot;room.json&quot;,\n  &quot;type&quot;: &quot;object&quot;,\n  &quot;properties&quot;: {\n    &quot;coffeeTable&quot;: {\n      &quot;type&quot;: &quot;array&quot;,\n      &quot;items&quot;: {\n        &quot;$ref&quot;: &quot;book.json&quot;\n      }\n    },\n    &quot;bookCase&quot;: {\n      &quot;type&quot;: &quot;array&quot;,\n      &quot;items&quot;: {\n        &quot;$ref&quot;: &quot;book.json&quot;\n      }\n    }\n  }\n}\n</code></pre>\n<p>and book.json</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n    &quot;title&quot;: &quot;Book&quot;,\n    &quot;$schema&quot;: &quot;https://json-schema.org/draft/2020-12/schema&quot;,\n    &quot;$id&quot;: &quot;book.json&quot;,\n    &quot;type&quot;: &quot;object&quot;,\n    &quot;properties&quot;: {\n        &quot;author&quot;: {\n            &quot;type&quot;: &quot;string&quot;\n        },\n        &quot;title&quot;: {\n            &quot;type&quot;: &quot;string&quot;\n        }\n    }\n}\n</code></pre>\n<p>This will generate 2 java file: <code>Room.java</code> &amp; <code>Book.java</code></p>\n"}],"owner":{"account_id":3836686,"reputation":913,"user_id":3180809,"accept_rate":86,"display_name":"esel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":959,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1689862722,"creation_date":1650530149,"question_id":71951310,"body_markdown":"Following the instructions [here](https://stackoverflow.com/a/4480636/3180809), I use the jsonschema2pojo Maven plugin to generate Java classes from JSON example files.\r\n\r\nMy JSON example file has a structure like this \r\n\r\n```json\r\n{\r\n  &quot;coffeeTable&quot;: {\r\n    &quot;book&quot;: [\r\n      {\r\n        &quot;author&quot;: &quot;Aldo Rossi&quot;,\r\n        &quot;title&quot;: &quot;The Architecture of the City&quot;\r\n      }\r\n    ]\r\n  },\r\n  &quot;bookCase&quot;: [\r\n    {\r\n      &quot;book&quot;: [\r\n        {\r\n          &quot;author&quot;: &quot;Shakespeare&quot;,\r\n          &quot;title&quot;: &quot;Collected Works&quot;\r\n        }\r\n      ]\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\nWhen generating Java classes from the JSON example, a class `Book` and a class `Book__1` is generated. `Book` is used for the books on the coffee table. `Book__1` is used for the elements in the book case.\r\nI saw that there are solutions for avoiding duplicated classes when [generating Java classes with JSON schema files in the documentation](https://github.com/joelittlejohn/jsonschema2pojo/wiki/Reference).\r\nI did not find a solution when using a JSON object directly for code generation.\r\nIs it possible to achieve that there is only a single `Book` class, which is used in both places,  generated from the JSON object above? Or do I have to create a JSON schema object from the JSON object and then use the `javaType`/`existingJavaType` annotation there to achieve this?\r\n","title":"Avoid generating duplicated classes with jsonschema2pojo and sourceType &quot;json&quot;","body":"<p>Following the instructions <a href=\"https://stackoverflow.com/a/4480636/3180809\">here</a>, I use the jsonschema2pojo Maven plugin to generate Java classes from JSON example files.</p>\n<p>My JSON example file has a structure like this</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;coffeeTable&quot;: {\n    &quot;book&quot;: [\n      {\n        &quot;author&quot;: &quot;Aldo Rossi&quot;,\n        &quot;title&quot;: &quot;The Architecture of the City&quot;\n      }\n    ]\n  },\n  &quot;bookCase&quot;: [\n    {\n      &quot;book&quot;: [\n        {\n          &quot;author&quot;: &quot;Shakespeare&quot;,\n          &quot;title&quot;: &quot;Collected Works&quot;\n        }\n      ]\n    }\n  ]\n}\n</code></pre>\n<p>When generating Java classes from the JSON example, a class <code>Book</code> and a class <code>Book__1</code> is generated. <code>Book</code> is used for the books on the coffee table. <code>Book__1</code> is used for the elements in the book case.\nI saw that there are solutions for avoiding duplicated classes when <a href=\"https://github.com/joelittlejohn/jsonschema2pojo/wiki/Reference\" rel=\"nofollow noreferrer\">generating Java classes with JSON schema files in the documentation</a>.\nI did not find a solution when using a JSON object directly for code generation.\nIs it possible to achieve that there is only a single <code>Book</code> class, which is used in both places,  generated from the JSON object above? Or do I have to create a JSON schema object from the JSON object and then use the <code>javaType</code>/<code>existingJavaType</code> annotation there to achieve this?</p>\n"},{"tags":["java","spring","jackson","jboss"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1689859965,"post_id":76730415,"comment_id":135275269,"body_markdown":"If a method you know exists, doesn&#39;t exist at runtime, then you are for sure not running with the jar versions you think you are. Check that you are actually using *only* the latest version jars at runtime.","body":"If a method you know exists, doesn&#39;t exist at runtime, then you are for sure not running with the jar versions you think you are. Check that you are actually using <i>only</i> the latest version jars at runtime."},{"owner":{"account_id":1315198,"reputation":3834,"user_id":1262248,"accept_rate":75,"display_name":"Aman Chhabra"},"score":0,"creation_date":1689860104,"post_id":76730415,"comment_id":135275300,"body_markdown":"Can you please check the scope of your dependency. And if that dependency is available during runtime. May be a good idea to share the snippet of where you added the dependency","body":"Can you please check the scope of your dependency. And if that dependency is available during runtime. May be a good idea to share the snippet of where you added the dependency"},{"owner":{"account_id":29057322,"reputation":1,"user_id":22258819,"display_name":"olzen"},"score":0,"creation_date":1689860410,"post_id":76730415,"comment_id":135275366,"body_markdown":"@Jorn i already deleted my repository. Only the newest jackson version is in there.","body":"@Jorn i already deleted my repository. Only the newest jackson version is in there."},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1689860479,"post_id":76730415,"comment_id":135275383,"body_markdown":"@olzen Still, you should check your *actual* runtime classpath.","body":"@olzen Still, you should check your <i>actual</i> runtime classpath."},{"owner":{"account_id":29057322,"reputation":1,"user_id":22258819,"display_name":"olzen"},"score":0,"creation_date":1690173465,"post_id":76730415,"comment_id":135311021,"body_markdown":"Thank you guys! The problem has been fixed. My Jboss has delivered a older jackson version. After making an exclusion it worked fine!","body":"Thank you guys! The problem has been fixed. My Jboss has delivered a older jackson version. After making an exclusion it worked fine!"},{"owner":{"account_id":51161,"reputation":17015,"user_id":152794,"display_name":"James R. Perkins"},"score":0,"creation_date":1690419948,"post_id":76730415,"comment_id":135352708,"body_markdown":"What version of Wildfly or JBOss EAP are you using?","body":"What version of Wildfly or JBOss EAP are you using?"}],"owner":{"account_id":29057322,"reputation":1,"user_id":22258819,"display_name":"olzen"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689861891,"creation_date":1689859821,"question_id":76730415,"body_markdown":"when I start my local Jboss I got the following exception:\r\n````\r\nCaused by: java.lang.NoSuchMethodError: &#39;com.fasterxml.jackson.databind.cfg.MutableCoercionConfig com.fasterxml.jackson.dataformat.xml.XmlMapper.coercionConfigDefaults()&#39;\r\n````\r\n\r\n1. I use the newest Version of Jackson and the method exists in the class XmlMapper.\r\n2. Dependency tree looks good. All Versions of Jackson are the same. \r\n\r\nDoes anyone got a solution or had to deal with the same issue? ","title":"MethodNotFoundException Jackson XmlMapper.coercionConfigDefaults()","body":"<p>when I start my local Jboss I got the following exception:</p>\n<pre><code>Caused by: java.lang.NoSuchMethodError: 'com.fasterxml.jackson.databind.cfg.MutableCoercionConfig com.fasterxml.jackson.dataformat.xml.XmlMapper.coercionConfigDefaults()'\n</code></pre>\n<ol>\n<li>I use the newest Version of Jackson and the method exists in the class XmlMapper.</li>\n<li>Dependency tree looks good. All Versions of Jackson are the same.</li>\n</ol>\n<p>Does anyone got a solution or had to deal with the same issue?</p>\n"},{"tags":["java","wildfly","documents4j"],"owner":{"account_id":10637612,"reputation":141,"user_id":7833829,"display_name":"Omar Raed"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689861865,"creation_date":1689860060,"question_id":76730458,"body_markdown":"I have a Spring-based application running on WildFly as a Windows service. One of the APIs in my application utilizes documents4j LocalConverter to convert Word documents to PDF files. The conversion works perfectly when I start the WildFly service, but after a while, I encounter the following\r\n````\r\nerror: &quot;com.documents4j.throwables.ConversionInputException: The input file seems to be corrupt.&quot; \r\n````\r\nThis error occurs for all conversion requests, even though I am confident that the input files are not corrupted, as they have been successfully converted before the error occurs.\r\n\r\nRestarting the WildFly service temporarily resolves the issue, but the problem resurfaces after some time.\r\n\r\nI&#39;m using a singleton instance of IConverter that I initialize using the following code:\r\n```\r\nconverter = LocalConverter.builder()\r\n                    .workerPool(20, 150, 2, TimeUnit.SECONDS)\r\n                    .processTimeout(10, TimeUnit.SECONDS)\r\n                    .build();\r\n```\r\nThis instance is initialize only once and used for any conversion request using this code:\r\n```\r\nconverter\r\n    .convert(in).as(DocumentType.MS_WORD)\r\n    .to(bo).as(DocumentType.PDF)\r\n    .prioritizeWith(1000)\r\n    .execute();\r\n```\r\nWhat am I missing here ? Also is the way I&#39;m initializing and using the LocalConverter correct ?","title":"WildFly application gives documents4j LocalConverter: ConversionInputException after a while","body":"<p>I have a Spring-based application running on WildFly as a Windows service. One of the APIs in my application utilizes documents4j LocalConverter to convert Word documents to PDF files. The conversion works perfectly when I start the WildFly service, but after a while, I encounter the following</p>\n<pre><code>error: &quot;com.documents4j.throwables.ConversionInputException: The input file seems to be corrupt.&quot; \n</code></pre>\n<p>This error occurs for all conversion requests, even though I am confident that the input files are not corrupted, as they have been successfully converted before the error occurs.</p>\n<p>Restarting the WildFly service temporarily resolves the issue, but the problem resurfaces after some time.</p>\n<p>I'm using a singleton instance of IConverter that I initialize using the following code:</p>\n<pre><code>converter = LocalConverter.builder()\n                    .workerPool(20, 150, 2, TimeUnit.SECONDS)\n                    .processTimeout(10, TimeUnit.SECONDS)\n                    .build();\n</code></pre>\n<p>This instance is initialize only once and used for any conversion request using this code:</p>\n<pre><code>converter\n    .convert(in).as(DocumentType.MS_WORD)\n    .to(bo).as(DocumentType.PDF)\n    .prioritizeWith(1000)\n    .execute();\n</code></pre>\n<p>What am I missing here ? Also is the way I'm initializing and using the LocalConverter correct ?</p>\n"},{"tags":["java","jakarta-ee"],"answers":[{"comments":[{"owner":{"account_id":15016723,"reputation":834,"user_id":10839527,"display_name":"Theodosis "},"score":0,"creation_date":1550653585,"post_id":54782418,"comment_id":96343518,"body_markdown":"but is Jakarta ee up I mean can I use it like I can use java ee 8 right now","body":"but is Jakarta ee up I mean can I use it like I can use java ee 8 right now"},{"owner":{"account_id":136531,"reputation":21531,"user_id":340088,"accept_rate":68,"display_name":"jbx"},"score":1,"creation_date":1550653786,"post_id":54782418,"comment_id":96343644,"body_markdown":"It is just the specification. You won&#39;t *use it* as such. The specification process for new EE standard APIs will go through Eclipse Foundation instead of Oracle. Then Eclipse Glassfish will probably be the first to implement the new shiny APIs, followed by JBoss/Wildfly and the rest in due time.","body":"It is just the specification. You won&#39;t <i>use it</i> as such. The specification process for new EE standard APIs will go through Eclipse Foundation instead of Oracle. Then Eclipse Glassfish will probably be the first to implement the new shiny APIs, followed by JBoss/Wildfly and the rest in due time."},{"owner":{"account_id":15016723,"reputation":834,"user_id":10839527,"display_name":"Theodosis "},"score":0,"creation_date":1550654814,"post_id":54782418,"comment_id":96344249,"body_markdown":"so that means that Jakarta ee is still under development and we wait for the release to be able to use it","body":"so that means that Jakarta ee is still under development and we wait for the release to be able to use it"},{"owner":{"account_id":136531,"reputation":21531,"user_id":340088,"accept_rate":68,"display_name":"jbx"},"score":0,"creation_date":1550656298,"post_id":54782418,"comment_id":96345147,"body_markdown":"Well the current version of the specs in Jakarta EE is equivalent to Java EE 8. New EE specifications will be under Jakarta EE, so you won&#39;t see Java EE 9.","body":"Well the current version of the specs in Jakarta EE is equivalent to Java EE 8. New EE specifications will be under Jakarta EE, so you won&#39;t see Java EE 9."},{"owner":{"account_id":5877017,"reputation":2197,"user_id":4627565,"accept_rate":100,"display_name":"Bionix1441"},"score":0,"creation_date":1602680593,"post_id":54782418,"comment_id":113796704,"body_markdown":"which jakarta version is compatible with java 10?","body":"which jakarta version is compatible with java 10?"},{"owner":{"account_id":136531,"reputation":21531,"user_id":340088,"accept_rate":68,"display_name":"jbx"},"score":1,"creation_date":1602774865,"post_id":54782418,"comment_id":113832683,"body_markdown":"@Bionix1441 you mean Java SE 10? There is no reason why it shouldn&#39;t work. (You might need to include some extra libraries like jaxb that were removed from SE but thats it). I would actually use Java SE 11 not 10, since 11 is LTS and 10 is not. It depends on the server implementation too (Wildfly, Glassfish etc.)","body":"@Bionix1441 you mean Java SE 10? There is no reason why it shouldn&#39;t work. (You might need to include some extra libraries like jaxb that were removed from SE but thats it). I would actually use Java SE 11 not 10, since 11 is LTS and 10 is not. It depends on the server implementation too (Wildfly, Glassfish etc.)"}],"tags":[],"owner":{"account_id":136531,"reputation":21531,"user_id":340088,"accept_rate":68,"display_name":"jbx"},"comment_count":6,"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1550656373,"creation_date":1550653370,"answer_id":54782418,"question_id":54782254,"body_markdown":"It is just the specification for Java Enterprise Edition going forward. \r\n\r\nOracle moved the JCP process to the Eclipse Foundation, but since Oracle still owns the Java trademark, Eclipse renamed it to *Jakarta EE*. \r\n\r\nThis blog might give you some more insight:\r\nhttps://eclipse-foundation.blog/2018/02/26/and-the-name-is/","title":"What exactly is Jakarta ee","body":"<p>It is just the specification for Java Enterprise Edition going forward. </p>\n\n<p>Oracle moved the JCP process to the Eclipse Foundation, but since Oracle still owns the Java trademark, Eclipse renamed it to <em>Jakarta EE</em>. </p>\n\n<p>This blog might give you some more insight:\n<a href=\"https://eclipse-foundation.blog/2018/02/26/and-the-name-is/\" rel=\"noreferrer\">https://eclipse-foundation.blog/2018/02/26/and-the-name-is/</a></p>\n"},{"comments":[{"owner":{"account_id":20847162,"reputation":894,"user_id":15312420,"display_name":"Mehdi Charife"},"score":0,"creation_date":1686657833,"post_id":54782679,"comment_id":134826440,"body_markdown":"Is this still correct?","body":"Is this still correct?"},{"owner":{"account_id":922035,"reputation":1189,"user_id":953550,"display_name":"Leonardo Cruz"},"score":1,"creation_date":1689861943,"post_id":54782679,"comment_id":135275747,"body_markdown":"In general yes, but since the transition to the Eclipse Foundation was concluded I am providing an update to the answer. Thanks for your comment.","body":"In general yes, but since the transition to the Eclipse Foundation was concluded I am providing an update to the answer. Thanks for your comment."}],"tags":[],"owner":{"account_id":922035,"reputation":1189,"user_id":953550,"display_name":"Leonardo Cruz"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1689861828,"creation_date":1550654225,"answer_id":54782679,"question_id":54782254,"body_markdown":"Jakarta EE is the name used since 2017 for the technologies previously known as Java EE.\r\n\r\nThese technologies are composed by technical specifications and open source reference implementations of a Java based platform for enterprise applications.\r\n\r\nMore details in https://jakarta.ee/","title":"What exactly is Jakarta ee","body":"<p>Jakarta EE is the name used since 2017 for the technologies previously known as Java EE.</p>\n<p>These technologies are composed by technical specifications and open source reference implementations of a Java based platform for enterprise applications.</p>\n<p>More details in <a href=\"https://jakarta.ee/\" rel=\"nofollow noreferrer\">https://jakarta.ee/</a></p>\n"}],"owner":{"account_id":15016723,"reputation":834,"user_id":10839527,"display_name":"Theodosis "},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1650,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"closed_date":1550654843,"accepted_answer_id":54782418,"answer_count":2,"score":4,"last_activity_date":1689861828,"creation_date":1550652765,"question_id":54782254,"body_markdown":"I don&#39;t seem to find something online expect the fact that java ee stops and we can&#39;t use name right so we renamed it as Jakarta ee and that&#39;s ok but I still don&#39;t know if there any difference between Jakarta ee and java ee 8 why should I use Jakarta ee and not java ee 8 and on top of that I can&#39;t figure out where can I find Jakarta ee to start using it ","title":"What exactly is Jakarta ee","body":"<p>I don't seem to find something online expect the fact that java ee stops and we can't use name right so we renamed it as Jakarta ee and that's ok but I still don't know if there any difference between Jakarta ee and java ee 8 why should I use Jakarta ee and not java ee 8 and on top of that I can't figure out where can I find Jakarta ee to start using it </p>\n"},{"tags":["java","intellij-idea","elastic-apm"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1689861819,"post_id":76730681,"comment_id":135275710,"body_markdown":"If it works in Eclipse, you have a problem with your build. Somehow the dependency jar isn&#39;t making it into the production environment.","body":"If it works in Eclipse, you have a problem with your build. Somehow the dependency jar isn&#39;t making it into the production environment."},{"owner":{"account_id":5272541,"reputation":151,"user_id":4210386,"display_name":"davidleongz"},"score":0,"creation_date":1689862575,"post_id":76730681,"comment_id":135275919,"body_markdown":"Yes, the error is &quot;java.lang.NoClassDefFoundError co/elastic/apm/attach/ElasticApmAttacher&quot; but I have the library correctly added and compiling","body":"Yes, the error is &quot;java.lang.NoClassDefFoundError co/elastic/apm/attach/ElasticApmAttacher&quot; but I have the library correctly added and compiling"},{"owner":{"account_id":3538058,"reputation":5428,"user_id":2960034,"display_name":"y.bedrov"},"score":0,"creation_date":1690302626,"post_id":76730681,"comment_id":135333260,"body_markdown":"Do you run it using Maven goal?","body":"Do you run it using Maven goal?"},{"owner":{"account_id":5272541,"reputation":151,"user_id":4210386,"display_name":"davidleongz"},"score":0,"creation_date":1692023475,"post_id":76730681,"comment_id":135566115,"body_markdown":"No, I run it with IntelliJ","body":"No, I run it with IntelliJ"}],"owner":{"account_id":5272541,"reputation":151,"user_id":4210386,"display_name":"davidleongz"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":136,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689861714,"creation_date":1689861607,"question_id":76730681,"body_markdown":"I&#39;m trying to use Elastic APM on IntelliJ on local environment but I have this error:\r\n\r\n````\r\nException encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;elasticApmConfig&#39;: Invocation of init method failed; nested exception is java.lang.NoClassDefFoundError: co/elastic/apm/attach/ElasticApmAttacher&quot;\r\n````\r\n\r\nNevertheless, the same project on Eclipse works.\r\n\r\nI&#39;m using this version in a springboot project with Java 11\r\n\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;co.elastic.apm&lt;/groupId&gt;\r\n    &lt;artifactId&gt;apm-agent-attach&lt;/artifactId&gt;\r\n    &lt;version&gt;1.39.0&lt;/version&gt;\r\n    &lt;scope&gt;provided&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n```","title":"Error ElasticApmAttacher (Elastic APM) on IntelliJ","body":"<p>I'm trying to use Elastic APM on IntelliJ on local environment but I have this error:</p>\n<pre><code>Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'elasticApmConfig': Invocation of init method failed; nested exception is java.lang.NoClassDefFoundError: co/elastic/apm/attach/ElasticApmAttacher&quot;\n</code></pre>\n<p>Nevertheless, the same project on Eclipse works.</p>\n<p>I'm using this version in a springboot project with Java 11</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;co.elastic.apm&lt;/groupId&gt;\n    &lt;artifactId&gt;apm-agent-attach&lt;/artifactId&gt;\n    &lt;version&gt;1.39.0&lt;/version&gt;\n    &lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","ant","groovy","build","gradle"],"comments":[{"owner":{"account_id":40443,"reputation":1902,"user_id":117220,"accept_rate":67,"display_name":"Petr Gladkikh"},"score":3,"creation_date":1288176326,"post_id":2265283,"comment_id":4326102,"body_markdown":"Consider &quot;apply from: &#39;other.gradle&#39;&quot; construct to import external declarations. (See &quot;12.4. Configuring the project using an external build script&quot; here http://gradle.org/0.9-preview-1/docs/userguide/tutorial_this_and_that.html#sec:configuring_using_external_script)","body":"Consider &quot;apply from: &#39;other.gradle&#39;&quot; construct to import external declarations. (See &quot;12.4. Configuring the project using an external build script&quot; here <a href=\"http://gradle.org/0.9-preview-1/docs/userguide/tutorial_this_and_that.html#sec:configuring_using_external_script\" rel=\"nofollow noreferrer\">gradle.org/0.9-preview-1/docs/userguide/&hellip;</a>)"},{"owner":{"account_id":71611,"reputation":26366,"user_id":6998684,"display_name":"IgorGanapolsky"},"score":0,"creation_date":1478005257,"post_id":2265283,"comment_id":67974259,"body_markdown":"@PetrGladkikh `apply from` immediately executes the external tasks.  This may not be preferable in the execution logic (i.e. I&#39;d want to execute the tasks when I want to, not right away).","body":"@PetrGladkikh <code>apply from</code> immediately executes the external tasks.  This may not be preferable in the execution logic (i.e. I&#39;d want to execute the tasks when I want to, not right away)."},{"owner":{"account_id":404573,"reputation":7556,"user_id":772981,"accept_rate":46,"display_name":"Jarekczek"},"score":1,"creation_date":1479026835,"post_id":2265283,"comment_id":68379768,"body_markdown":"This statement in the comment above is **not true**: `apply from` immediately executes the external tasks. Don&#39;t get misleaded. External tasks are configured, not executed.","body":"This statement in the comment above is <b>not true</b>: <code>apply from</code> immediately executes the external tasks. Don&#39;t get misleaded. External tasks are configured, not executed."},{"owner":{"account_id":2078462,"reputation":10342,"user_id":2986984,"accept_rate":80,"display_name":"tkruse"},"score":0,"creation_date":1515485085,"post_id":2265283,"comment_id":83306552,"body_markdown":"Possible duplicate of [Is there a way to split/factor out common parts of Gradle build](https://stackoverflow.com/questions/2566685/is-there-a-way-to-split-factor-out-common-parts-of-gradle-build)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/2566685/is-there-a-way-to-split-factor-out-common-parts-of-gradle-build\">Is there a way to split/factor out common parts of Gradle build</a>"}],"answers":[{"comments":[{"owner":{"account_id":12556,"reputation":1835,"user_id":1312601,"accept_rate":62,"display_name":"Anthony Roy"},"score":1,"creation_date":1266581100,"post_id":2293256,"comment_id":2260711,"body_markdown":"Thanks for taking the time to answer. It&#39;s not sub-projects I&#39;m having trouble with, but rather creating a &#39;library&#39; of common tasks. I&#39;ve edited my original question with more information and code snippets to make things clearer.","body":"Thanks for taking the time to answer. It&#39;s not sub-projects I&#39;m having trouble with, but rather creating a &#39;library&#39; of common tasks. I&#39;ve edited my original question with more information and code snippets to make things clearer."},{"owner":{"account_id":67634,"reputation":424,"user_id":197817,"display_name":"Tom"},"score":1,"creation_date":1266590792,"post_id":2293256,"comment_id":2261863,"body_markdown":"So instead of doing the import(&quot;tasks.gradle&quot;) from your sample you would have the subprojects{ } section specifying the generic task generation code used by all your sub-projects. This should provide the same abstraction you are looking for!?","body":"So instead of doing the import(&quot;tasks.gradle&quot;) from your sample you would have the subprojects{ } section specifying the generic task generation code used by all your sub-projects. This should provide the same abstraction you are looking for!?"},{"owner":{"account_id":71611,"reputation":26366,"user_id":6998684,"display_name":"IgorGanapolsky"},"score":0,"creation_date":1478008705,"post_id":2293256,"comment_id":67976206,"body_markdown":"Is Ivy plugin really necessary here?  Can&#39;t Gradle be used alone?","body":"Is Ivy plugin really necessary here?  Can&#39;t Gradle be used alone?"}],"tags":[],"owner":{"account_id":67634,"reputation":424,"user_id":197817,"display_name":"Tom"},"comment_count":3,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1266538741,"creation_date":1266538741,"answer_id":2293256,"question_id":2265283,"body_markdown":"Well, it is hard to tell what serves you best without actually seeing your build file.\r\n\r\nI could assume that stetting up your environment as multi-project build should provide you the abstraction you are looking for.\r\n\r\nIn your project root  `build.gradle` you define all your domain specific stuff as well as the things that apply to **all** your subprojects:\r\n\r\n    repositories {\r\n        add(new org.apache.ivy.plugins.resolver.FileSystemResolver()) {\r\n            name = &#39;destRepo&#39;\r\n            addIvyPattern( file( project.properties[&#39;repo.dest.dir&#39;]).absolutePath + &#39;/[organisation]/[module]/ivys/ivy(-[revision]).xml&#39;)\r\n            addArtifactPattern( file( project.properties[&#39;repo.dest.dir&#39;]).absolutePath + &#39;/[organisation]/[module]/[type]s/[artifact](-[revision]).[ext]&#39;)\r\n            descriptor = &#39;optional&#39;\r\n            checkmodified = true\r\n        }\r\n        ...\r\n    }\r\n    ...\r\n    subprojects {\r\n        sourceCompatibility = 1.5\r\n        targetCompatibility = 1.5\r\n        group = &#39;my.group&#39;\r\n        version = &#39;1.0&#39;\r\n        uploadArchives {\r\n            uploadDescriptor = true\r\n            repositories {\r\n                add rootProject.repositories.destRepo\r\n            }\r\n        }\r\n        apply{ type my.group.gradle.api.plugins.MyPlugin }\r\n        ...\r\n    }\r\n    \r\n    dependsOnChildren()\r\n\r\nThe project root directory might also contain a `gradle.properties` file where you define properties used by your projects:\r\n\r\n    buildDirName=staging\r\n    repo.dest.dir=/var/repo\r\n    ...\r\n\r\nThen in an additional file from your project root named `settings.gradle` you actually point to your subprojects:\r\n\r\n    include &#39;my-first-component&#39;,\r\n            &#39;my-second-component&#39;\r\n    ...\r\n    project(&#39;:my-first-component&#39;).projectDir = new File(rootDir, &#39;path/to/first/component&#39;)\r\n    project(&#39;:my-second-component&#39;).projectDir = new File(rootDir, &#39;path/to/second/component&#39;)\r\n    ...\r\n\r\nEach sub-project directory contains a `build.gradle` file containing the sub-project specific stuff only.\r\n\r\nNo matter if you invoke `gradle` from your project root or sub-project directory, gradle will automatically consider all your definitions done in the various files.\r\n\r\nAlso note that no compile task will be executed for your project root as long as you don&#39;t load any plugin beyond the default plugin at the root level.","title":"How can I import one Gradle script into another?","body":"<p>Well, it is hard to tell what serves you best without actually seeing your build file.</p>\n\n<p>I could assume that stetting up your environment as multi-project build should provide you the abstraction you are looking for.</p>\n\n<p>In your project root  <code>build.gradle</code> you define all your domain specific stuff as well as the things that apply to <strong>all</strong> your subprojects:</p>\n\n<pre><code>repositories {\n    add(new org.apache.ivy.plugins.resolver.FileSystemResolver()) {\n        name = 'destRepo'\n        addIvyPattern( file( project.properties['repo.dest.dir']).absolutePath + '/[organisation]/[module]/ivys/ivy(-[revision]).xml')\n        addArtifactPattern( file( project.properties['repo.dest.dir']).absolutePath + '/[organisation]/[module]/[type]s/[artifact](-[revision]).[ext]')\n        descriptor = 'optional'\n        checkmodified = true\n    }\n    ...\n}\n...\nsubprojects {\n    sourceCompatibility = 1.5\n    targetCompatibility = 1.5\n    group = 'my.group'\n    version = '1.0'\n    uploadArchives {\n        uploadDescriptor = true\n        repositories {\n            add rootProject.repositories.destRepo\n        }\n    }\n    apply{ type my.group.gradle.api.plugins.MyPlugin }\n    ...\n}\n\ndependsOnChildren()\n</code></pre>\n\n<p>The project root directory might also contain a <code>gradle.properties</code> file where you define properties used by your projects:</p>\n\n<pre><code>buildDirName=staging\nrepo.dest.dir=/var/repo\n...\n</code></pre>\n\n<p>Then in an additional file from your project root named <code>settings.gradle</code> you actually point to your subprojects:</p>\n\n<pre><code>include 'my-first-component',\n        'my-second-component'\n...\nproject(':my-first-component').projectDir = new File(rootDir, 'path/to/first/component')\nproject(':my-second-component').projectDir = new File(rootDir, 'path/to/second/component')\n...\n</code></pre>\n\n<p>Each sub-project directory contains a <code>build.gradle</code> file containing the sub-project specific stuff only.</p>\n\n<p>No matter if you invoke <code>gradle</code> from your project root or sub-project directory, gradle will automatically consider all your definitions done in the various files.</p>\n\n<p>Also note that no compile task will be executed for your project root as long as you don't load any plugin beyond the default plugin at the root level.</p>\n"},{"comments":[{"owner":{"account_id":334861,"reputation":18962,"user_id":661589,"accept_rate":79,"display_name":"Gavriel"},"score":2,"creation_date":1653471848,"post_id":2590264,"comment_id":127858667,"body_markdown":"apply from doesn&#39;t allow me to have plugins {} in the included file","body":"apply from doesn&#39;t allow me to have plugins {} in the included file"}],"tags":[],"owner":{"account_id":54418,"reputation":20355,"user_id":162792,"accept_rate":100,"display_name":"Andrey Adamovich"},"comment_count":1,"down_vote_count":0,"up_vote_count":147,"is_accepted":false,"score":147,"last_activity_date":1270619326,"creation_date":1270619326,"answer_id":2590264,"question_id":2265283,"body_markdown":"There is a new feature in 0.9. You can use `apply from: &#39;other.gradle&#39;` command.\r\n\r\nRead my question about same thing at: https://stackoverflow.com/questions/2566685/is-there-a-way-to-split-factor-out-common-parts-of-gradle-build","title":"How can I import one Gradle script into another?","body":"<p>There is a new feature in 0.9. You can use <code>apply from: 'other.gradle'</code> command.</p>\n\n<p>Read my question about same thing at: <a href=\"https://stackoverflow.com/questions/2566685/is-there-a-way-to-split-factor-out-common-parts-of-gradle-build\">Is there a way to split/factor out common parts of Gradle build</a></p>\n"},{"comments":[{"owner":{"account_id":42845,"reputation":5288,"user_id":124982,"accept_rate":83,"display_name":"JARC"},"score":0,"creation_date":1327573825,"post_id":7241391,"comment_id":11305017,"body_markdown":"Just so you know the link is broken - here&#39;s an update http://gradle.org/docs/current/userguide/userguide_single.html#sec:configuring_using_external_script","body":"Just so you know the link is broken - here&#39;s an update <a href=\"http://gradle.org/docs/current/userguide/userguide_single.html#sec:configuring_using_external_script\" rel=\"nofollow noreferrer\">gradle.org/docs/current/userguide/&hellip;</a>"},{"owner":{"account_id":42845,"reputation":5288,"user_id":124982,"accept_rate":83,"display_name":"JARC"},"score":0,"creation_date":1327574311,"post_id":7241391,"comment_id":11305158,"body_markdown":"Plugin link: http://gradle.org/docs/current/userguide/userguide_single.html#custom_plugins","body":"Plugin link: <a href=\"http://gradle.org/docs/current/userguide/userguide_single.html#custom_plugins\" rel=\"nofollow noreferrer\">gradle.org/docs/current/userguide/&hellip;</a>"},{"owner":{"account_id":334861,"reputation":18962,"user_id":661589,"accept_rate":79,"display_name":"Gavriel"},"score":0,"creation_date":1653471906,"post_id":7241391,"comment_id":127858690,"body_markdown":"buildSrc/src/main/groovy doesn&#39;t allow me to use a versioned plugin","body":"buildSrc/src/main/groovy doesn&#39;t allow me to use a versioned plugin"},{"owner":{"account_id":7609862,"reputation":386,"user_id":5771107,"display_name":"yuyu5"},"score":0,"creation_date":1666174284,"post_id":7241391,"comment_id":130871371,"body_markdown":"Or a simpler method would be `buildscript.sourceFile` (see my answer below)","body":"Or a simpler method would be <code>buildscript.sourceFile</code> (see my answer below)"}],"tags":[],"owner":{"account_id":12556,"reputation":1835,"user_id":1312601,"accept_rate":62,"display_name":"Anthony Roy"},"comment_count":4,"down_vote_count":1,"up_vote_count":18,"is_accepted":true,"score":17,"last_activity_date":1371065145,"creation_date":1314697734,"answer_id":7241391,"question_id":2265283,"body_markdown":"The answer to the question turned out to be in the Plugins system, where you can add the desired functionality in a set of plugins which can be groovy files located in the directory `buildSrc/src/main/groovy`. Plugins can also be bundled as a Jar though I haven&#39;t tried this.\r\n\r\nDetails here: [Custom Plugins][1]\r\n\r\n\r\n  [1]: http://www.gradle.org/docs/current/userguide/userguide_single.html#sec:configuring_using_external_script","title":"How can I import one Gradle script into another?","body":"<p>The answer to the question turned out to be in the Plugins system, where you can add the desired functionality in a set of plugins which can be groovy files located in the directory <code>buildSrc/src/main/groovy</code>. Plugins can also be bundled as a Jar though I haven't tried this.</p>\n\n<p>Details here: <a href=\"http://www.gradle.org/docs/current/userguide/userguide_single.html#sec%3aconfiguring_using_external_script\">Custom Plugins</a></p>\n"},{"tags":[],"owner":{"account_id":11726648,"reputation":19553,"user_id":8583692,"display_name":"Mahozad"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1689861699,"creation_date":1645122004,"answer_id":71163454,"question_id":2265283,"body_markdown":"This is an example for [Kotlin DSL][1] (build.gradle.**kts**).\r\n\r\n```kotlin\r\napply(from = &quot;scripts/my-script.gradle.kts&quot;)\r\n```\r\n\r\n*scripts/my-script.gradle.kts*:\r\n\r\n```kotlin\r\nprintln(\r\n    &quot;&quot;&quot;\r\n    I am defined at the top level of the script and\r\n    executed at the configuration phase of build process\r\n    &quot;&quot;&quot;\r\n)\r\n\r\ntasks.create(&quot;MyTask&quot;) {\r\n    println(\r\n        &quot;&quot;&quot;\r\n        I am defined in a task and\r\n        run at the configration phase of build process&quot;&quot;&quot;\r\n    )\r\n    doLast {\r\n        // ...\r\n    }\r\n}\r\n```\r\n\r\nSee [this answer](https://stackoverflow.com/a/52139585/8583692) and [this answer](https://stackoverflow.com/a/60252724/8583692) for how to import a function from another script in Kotlin DSL.\r\n\r\n\r\n  [1]: https://docs.gradle.org/current/userguide/kotlin_dsl.html","title":"How can I import one Gradle script into another?","body":"<p>This is an example for <a href=\"https://docs.gradle.org/current/userguide/kotlin_dsl.html\" rel=\"nofollow noreferrer\">Kotlin DSL</a> (build.gradle.<strong>kts</strong>).</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>apply(from = &quot;scripts/my-script.gradle.kts&quot;)\n</code></pre>\n<p><em>scripts/my-script.gradle.kts</em>:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>println(\n    &quot;&quot;&quot;\n    I am defined at the top level of the script and\n    executed at the configuration phase of build process\n    &quot;&quot;&quot;\n)\n\ntasks.create(&quot;MyTask&quot;) {\n    println(\n        &quot;&quot;&quot;\n        I am defined in a task and\n        run at the configration phase of build process&quot;&quot;&quot;\n    )\n    doLast {\n        // ...\n    }\n}\n</code></pre>\n<p>See <a href=\"https://stackoverflow.com/a/52139585/8583692\">this answer</a> and <a href=\"https://stackoverflow.com/a/60252724/8583692\">this answer</a> for how to import a function from another script in Kotlin DSL.</p>\n"},{"tags":[],"owner":{"account_id":7609862,"reputation":386,"user_id":5771107,"display_name":"yuyu5"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666174397,"creation_date":1666174397,"answer_id":74123622,"question_id":2265283,"body_markdown":"Based off [this similar question/answer](https://stackoverflow.com/questions/24528242/how-can-i-find-the-path-of-the-current-gradle-script/36527087#36527087), the easiest solution I&#39;ve found after searching for days is using `buildscript.sourceFile`. It correctly gives the file being run rather than the `pwd`/`cwd`/parent-file of said process. I feel like this would solve your issue.","title":"How can I import one Gradle script into another?","body":"<p>Based off <a href=\"https://stackoverflow.com/questions/24528242/how-can-i-find-the-path-of-the-current-gradle-script/36527087#36527087\">this similar question/answer</a>, the easiest solution I've found after searching for days is using <code>buildscript.sourceFile</code>. It correctly gives the file being run rather than the <code>pwd</code>/<code>cwd</code>/parent-file of said process. I feel like this would solve your issue.</p>\n"}],"owner":{"account_id":12556,"reputation":1835,"user_id":1312601,"accept_rate":62,"display_name":"Anthony Roy"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":101386,"favorite_count":0,"down_vote_count":0,"up_vote_count":113,"accepted_answer_id":7241391,"answer_count":5,"score":113,"last_activity_date":1689861699,"creation_date":1266230086,"question_id":2265283,"body_markdown":"I have a complex Gradle script that wraps up a load of functionality around building and deploying a number of NetBeans projects to a number of environments.\r\n\r\nThe script works very well, but in essence it is all configured through half a dozen maps holding project and environment information.\r\n\r\nI want to abstract the tasks away into another file, so that I can simply define my maps in a simple build file, and import the tasks from the other file. In this way, I can use the same core tasks for a number of projects and configure those projects with a simple set of maps.\r\n\r\nCan anyone tell me how I can import one Gradle file into another, in a similar manner to Ant&#39;s &lt;import&gt; task? I&#39;ve trawled Gradle&#39;s docs to no avail so far.\r\n\r\n**Additional Info**\r\n\r\nAfter Tom&#39;s response below, I thought I&#39;d try and clarify exactly what I mean.\r\n\r\nBasically I have a Gradle script which runs a number of subprojects. However, the subprojects are all NetBeans projects, and come with their own ant build scripts, so I have tasks in Gradle to call each of these.\r\n\r\nMy problem is that I have some configuration at the top of the file, such as:\r\n\r\n```groovy\r\nprojects = [\r\n    [name:&quot;MySubproject1&quot;, shortname: &quot;sub1&quot;, env:&quot;mainEnv&quot;, cvs_module=&quot;mod1&quot;],\r\n    [name:&quot;MySubproject2&quot;, shortname: &quot;sub2&quot;, env:&quot;altEnv&quot;, cvs_module=&quot;mod2&quot;]\r\n]\r\n```\r\n    \r\nI then generate tasks such as:\r\n\r\n```groovy\r\nprojects.each({\r\n    task &quot;checkout_$it.shortname&quot; &lt;&lt; {\r\n         // Code to for example check module out from cvs using config from &#39;it&#39;.\r\n    }\r\n})\r\n```\r\n\r\nI have many of these sort of task generation snippets, and all of them are generic - they entirely depend on the config in the projects list.\r\n\r\nSo what I want is a way to put this in a separate script and import it in the following sort of way:\r\n\r\n```groovy\r\nprojects = [\r\n    [name:&quot;MySubproject1&quot;, shortname: &quot;sub1&quot;, env:&quot;mainEnv&quot;, cvs_module=&quot;mod1&quot;],\r\n    [name:&quot;MySubproject2&quot;, shortname: &quot;sub2&quot;, env:&quot;altEnv&quot;, cvs_module=&quot;mod2&quot;]\r\n]\r\n\r\nimport(&quot;tasks.gradle&quot;) // This will import and run the script so that all tasks are generated for the projects given above.\r\n```\r\n\r\nSo, in this example, tasks.gradle will have all the generic task generation code in, and will get run for the projects defined in the main build.gradle file. In this way, tasks.gradle is a file that can be used by all large projects that consist of a number of sub-projects with NetBeans ant build files.\r\n","title":"How can I import one Gradle script into another?","body":"<p>I have a complex Gradle script that wraps up a load of functionality around building and deploying a number of NetBeans projects to a number of environments.</p>\n<p>The script works very well, but in essence it is all configured through half a dozen maps holding project and environment information.</p>\n<p>I want to abstract the tasks away into another file, so that I can simply define my maps in a simple build file, and import the tasks from the other file. In this way, I can use the same core tasks for a number of projects and configure those projects with a simple set of maps.</p>\n<p>Can anyone tell me how I can import one Gradle file into another, in a similar manner to Ant's  task? I've trawled Gradle's docs to no avail so far.</p>\n<p><strong>Additional Info</strong></p>\n<p>After Tom's response below, I thought I'd try and clarify exactly what I mean.</p>\n<p>Basically I have a Gradle script which runs a number of subprojects. However, the subprojects are all NetBeans projects, and come with their own ant build scripts, so I have tasks in Gradle to call each of these.</p>\n<p>My problem is that I have some configuration at the top of the file, such as:</p>\n<pre><code>projects = [\n    [name:&quot;MySubproject1&quot;, shortname: &quot;sub1&quot;, env:&quot;mainEnv&quot;, cvs_module=&quot;mod1&quot;],\n    [name:&quot;MySubproject2&quot;, shortname: &quot;sub2&quot;, env:&quot;altEnv&quot;, cvs_module=&quot;mod2&quot;]\n]\n</code></pre>\n<p>I then generate tasks such as:</p>\n<pre><code>projects.each({\n    task &quot;checkout_$it.shortname&quot; &lt;&lt; {\n         // Code to for example check module out from cvs using config from 'it'.\n    }\n})\n</code></pre>\n<p>I have many of these sort of task generation snippets, and all of them are generic - they entirely depend on the config in the projects list.</p>\n<p>So what I want is a way to put this in a separate script and import it in the following sort of way:</p>\n<pre><code>projects = [\n    [name:&quot;MySubproject1&quot;, shortname: &quot;sub1&quot;, env:&quot;mainEnv&quot;, cvs_module=&quot;mod1&quot;],\n    [name:&quot;MySubproject2&quot;, shortname: &quot;sub2&quot;, env:&quot;altEnv&quot;, cvs_module=&quot;mod2&quot;]\n]\n\nimport(&quot;tasks.gradle&quot;) // This will import and run the script so that all tasks are generated for the projects given above.\n</code></pre>\n<p>So, in this example, tasks.gradle will have all the generic task generation code in, and will get run for the projects defined in the main build.gradle file. In this way, tasks.gradle is a file that can be used by all large projects that consist of a number of sub-projects with NetBeans ant build files.</p>\n"},{"tags":["java","jvm"],"comments":[{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":1,"creation_date":1689857561,"post_id":76729903,"comment_id":135274648,"body_markdown":"This is easy to test: you can easily create one million `Thread` instances (for example with a `Runnable` that does only `Thread.sleep(10_000);`). When you try to start them your code will fail after starting some thousands of them.","body":"This is easy to test: you can easily create one million <code>Thread</code> instances (for example with a <code>Runnable</code> that does only <code>Thread.sleep(10_000);</code>). When you try to start them your code will fail after starting some thousands of them."},{"owner":{"account_id":1262646,"reputation":2597,"user_id":1220560,"display_name":"morgwai"},"score":0,"creation_date":1689857974,"post_id":76729903,"comment_id":135274750,"body_markdown":"@ThomasKl&#228;ger well, it is still not a definitive answer whether a JVM thread is created on `start()` or whether it&#39;s created on `Thread` instance creation, but some critical OS level resources are only allocated when it&#39;s &#39;start()&#39;-ed, but it&#39;s sufficient for practical reasons: many thanks!! :) If you bother to make an actual answer from it, I will be happy to accept it :)","body":"@ThomasKl&#228;ger well, it is still not a definitive answer whether a JVM thread is created on <code>start()</code> or whether it&#39;s created on <code>Thread</code> instance creation, but some critical OS level resources are only allocated when it&#39;s &#39;start()&#39;-ed, but it&#39;s sufficient for practical reasons: many thanks!! :) If you bother to make an actual answer from it, I will be happy to accept it :)"},{"owner":{"account_id":1262646,"reputation":2597,"user_id":1220560,"display_name":"morgwai"},"score":0,"creation_date":1689859071,"post_id":76729903,"comment_id":135275039,"body_markdown":"@ThomasKl&#228;ger also, is it possible that this JVM implementation specific? Thanks!","body":"@ThomasKl&#228;ger also, is it possible that this JVM implementation specific? Thanks!"}],"answers":[{"comments":[{"owner":{"account_id":1262646,"reputation":2597,"user_id":1220560,"display_name":"morgwai"},"score":2,"creation_date":1689857444,"post_id":76729958,"comment_id":135274617,"body_markdown":"forgive me as I can&#39;t find the relevant part there: could you please point me more exactly? I&#39;ve read carefully the class level description, all constructor descriptions and `start()` method description, each 2 times, but still can&#39;t find it... Thanks!","body":"forgive me as I can&#39;t find the relevant part there: could you please point me more exactly? I&#39;ve read carefully the class level description, all constructor descriptions and <code>start()</code> method description, each 2 times, but still can&#39;t find it... Thanks!"},{"owner":{"account_id":21464193,"reputation":31,"user_id":15814409,"display_name":"Freezing"},"score":0,"creation_date":1689858287,"post_id":76729958,"comment_id":135274837,"body_markdown":"&quot;The following code would then create a thread and start it running:\n     PrimeThread p = new PrimeThread(143);\n     p.start(); &quot;\nWe first create an instance of the PrimeThread, but it is not enough to begin execution. To actually run the thread and start the desired operations, we call the start() method.","body":"&quot;The following code would then create a thread and start it running:      PrimeThread p = new PrimeThread(143);      p.start(); &quot; We first create an instance of the PrimeThread, but it is not enough to begin execution. To actually run the thread and start the desired operations, we call the start() method."},{"owner":{"account_id":1262646,"reputation":2597,"user_id":1220560,"display_name":"morgwai"},"score":0,"creation_date":1689860983,"post_id":76729958,"comment_id":135275500,"body_markdown":"forgive me again, but I honestly fail to see how this implies that a JVM thread is created (and as a consequence its stack memory allocated) only when `start()` is called... am I missing something?","body":"forgive me again, but I honestly fail to see how this implies that a JVM thread is created (and as a consequence its stack memory allocated) only when <code>start()</code> is called... am I missing something?"}],"tags":[],"owner":{"account_id":21464193,"reputation":31,"user_id":15814409,"display_name":"Freezing"},"comment_count":3,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1689858457,"creation_date":1689856601,"answer_id":76729958,"question_id":76729903,"body_markdown":"A Thread is created only when the start() method is called.\r\nYou can check it out on the JDK doc here:\r\nhttps://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html\r\n\r\nThe following code shows you how this works\r\n```\r\nimport java.util.Random;\r\npublic class Threads {\r\n\r\n    private static final Random rnd = new Random();\r\n\r\n    private static int rand(int a, int b) {\r\n        synchronized (rnd) {\r\n            return rnd.nextInt(b - a) + a;\r\n        }\r\n    }\r\n\r\n    private static void loop() {\r\n        while (true) {\r\n            synchronized (rnd) {\r\n                try {\r\n                    Thread.sleep(rand(200, 1000));\r\n                } catch (InterruptedException e) {}\r\n\r\n                System.out.println(&quot;Hi, i&#39;m &quot;);\r\n                System.out.println(&quot;thread #&quot; + Thread.currentThread().getId());\r\n            }\r\n        }\r\n    }\r\n\r\n    public static class MyThread extends Thread {\r\n        @Override\r\n        public void run() {\r\n            loop();\r\n        }\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        Thread t1 = new MyThread();\r\n        t1.start();\r\n\r\n        new Thread(Threads::loop).start();\r\n        new MyThread().start();\r\n        new MyThread().start();\r\n        new MyThread().start();\r\n        loop();\r\n\r\n        try {\r\n            t1.join();\r\n        } catch (InterruptedException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n    }\r\n\r\n\r\n}\r\n```","title":"relation between JVM threads and Thread instances","body":"<p>A Thread is created only when the start() method is called.\nYou can check it out on the JDK doc here:\n<a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html</a></p>\n<p>The following code shows you how this works</p>\n<pre><code>import java.util.Random;\npublic class Threads {\n\n    private static final Random rnd = new Random();\n\n    private static int rand(int a, int b) {\n        synchronized (rnd) {\n            return rnd.nextInt(b - a) + a;\n        }\n    }\n\n    private static void loop() {\n        while (true) {\n            synchronized (rnd) {\n                try {\n                    Thread.sleep(rand(200, 1000));\n                } catch (InterruptedException e) {}\n\n                System.out.println(&quot;Hi, i'm &quot;);\n                System.out.println(&quot;thread #&quot; + Thread.currentThread().getId());\n            }\n        }\n    }\n\n    public static class MyThread extends Thread {\n        @Override\n        public void run() {\n            loop();\n        }\n    }\n\n    public static void main(String[] args) {\n        Thread t1 = new MyThread();\n        t1.start();\n\n        new Thread(Threads::loop).start();\n        new MyThread().start();\n        new MyThread().start();\n        new MyThread().start();\n        loop();\n\n        try {\n            t1.join();\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n\n    }\n\n\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1262646,"reputation":2597,"user_id":1220560,"display_name":"morgwai"},"score":0,"creation_date":1689863320,"post_id":76730664,"comment_id":135276135,"body_markdown":"many many thanks! :)","body":"many many thanks! :)"}],"tags":[],"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1689861524,"creation_date":1689861524,"answer_id":76730664,"question_id":76729903,"body_markdown":"For one thing you could try this for yourself by creating many `Thread` objects and later try to start all those `Thread`s:\r\n\r\n    public class ThreadRunner {\r\n        public static void main(String[] args) {\r\n            int maxThreads = 10_000_000;\r\n    \r\n            // Create Thread instances\r\n            Thread[] threads = new Thread[maxThreads];\r\n            Runnable r = () -&gt; {\r\n                try {\r\n                    Thread.sleep(1000_000);\r\n                } catch (InterruptedException e) {\r\n                }\r\n            };\r\n            for (int i = 0; i &lt; maxThreads; i++) {\r\n                threads[i] = new Thread(r);\r\n            }\r\n    \r\n            // start Threads\r\n            int count = 0;\r\n            try {\r\n                for (Thread t : threads) {\r\n                    t.start();\r\n                    count++;\r\n                    if (count % 1000 == 0) {\r\n                        System.out.println(count);\r\n                    }\r\n                    Thread.yield();\r\n                }\r\n            } catch (OutOfMemoryError e) {\r\n                System.out.println(count);\r\n            }\r\n        }\r\n    }\r\n\r\nThe other way is to check the source of the OpenJDK:\r\n\r\n- [Thread.java](https://github.com/openjdk/jdk17u/blob/jdk-17%2B35/src/java.base/share/classes/java/lang/Thread.java#L784) calls the native `start0()` method\r\n\r\n- [Thread.c](https://github.com/openjdk/jdk17u/blob/jdk-17%2B35/src/java.base/share/native/libjava/Thread.c#L44) declares that `start0` is forwared to the native `JVM_StartThread`\r\n&gt;      {&quot;start0&quot;,           &quot;()V&quot;,        (void *)&amp;JVM_StartThread},\r\n\r\n- [jvm.cpp](https://github.com/openjdk/jdk17u/blob/jdk-17%2B35/src/hotspot/share/prims/jvm.cpp#L2854) contains that native function which determines the stack size for the native thread and then creates it with\r\n\r\n          jlong size =\r\n                 java_lang_Thread::stackSize(JNIHandles::resolve_non_null(jthread));\r\n          // Allocate the C++ Thread structure and create the native thread.  The\r\n          // stack size retrieved from java is 64-bit signed, but the constructor takes\r\n          // size_t (an unsigned type), which may be 32 or 64-bit depending on the platform.\r\n          //  - Avoid truncating on 32-bit platforms if size is greater than UINT_MAX.\r\n          //  - Avoid passing negative values which would result in really large stacks.\r\n          NOT_LP64(if (size &gt; SIZE_MAX) size = SIZE_MAX;)\r\n          size_t sz = size &gt; 0 ? (size_t) size : 0;\r\n          native_thread = new JavaThread(&amp;thread_entry, sz);\r\n\r\n----\r\nDoes this depend on the specific JVM implementation?\r\n\r\nIn principle, it could depend on the specific JVM implementation. It would however be silly to create an OS thread before it is really needed.\r\n\r\nThe main reason why I call this silly is the resource management. When you create an OS thread you must also destroy it. When you `start()` a `Thread` the OS thread is created, the threads `run()` method is exeucted and after that method returns the OS thread will be destroyed.\r\n\r\nIf a hypothetical JVM implementation created the OS thread already in the `Thread` constructor it would also need some way of destroying that OS thread when the `Thread` instance is garbage collected which will be hassle.","title":"relation between JVM threads and Thread instances","body":"<p>For one thing you could try this for yourself by creating many <code>Thread</code> objects and later try to start all those <code>Thread</code>s:</p>\n<pre><code>public class ThreadRunner {\n    public static void main(String[] args) {\n        int maxThreads = 10_000_000;\n\n        // Create Thread instances\n        Thread[] threads = new Thread[maxThreads];\n        Runnable r = () -&gt; {\n            try {\n                Thread.sleep(1000_000);\n            } catch (InterruptedException e) {\n            }\n        };\n        for (int i = 0; i &lt; maxThreads; i++) {\n            threads[i] = new Thread(r);\n        }\n\n        // start Threads\n        int count = 0;\n        try {\n            for (Thread t : threads) {\n                t.start();\n                count++;\n                if (count % 1000 == 0) {\n                    System.out.println(count);\n                }\n                Thread.yield();\n            }\n        } catch (OutOfMemoryError e) {\n            System.out.println(count);\n        }\n    }\n}\n</code></pre>\n<p>The other way is to check the source of the OpenJDK:</p>\n<ul>\n<li><p><a href=\"https://github.com/openjdk/jdk17u/blob/jdk-17%2B35/src/java.base/share/classes/java/lang/Thread.java#L784\" rel=\"nofollow noreferrer\">Thread.java</a> calls the native <code>start0()</code> method</p>\n</li>\n<li><p><a href=\"https://github.com/openjdk/jdk17u/blob/jdk-17%2B35/src/java.base/share/native/libjava/Thread.c#L44\" rel=\"nofollow noreferrer\">Thread.c</a> declares that <code>start0</code> is forwared to the native <code>JVM_StartThread</code></p>\n</li>\n</ul>\n<blockquote>\n<pre><code> {&quot;start0&quot;,           &quot;()V&quot;,        (void *)&amp;JVM_StartThread},\n</code></pre>\n</blockquote>\n<ul>\n<li><p><a href=\"https://github.com/openjdk/jdk17u/blob/jdk-17%2B35/src/hotspot/share/prims/jvm.cpp#L2854\" rel=\"nofollow noreferrer\">jvm.cpp</a> contains that native function which determines the stack size for the native thread and then creates it with</p>\n<pre><code>    jlong size =\n           java_lang_Thread::stackSize(JNIHandles::resolve_non_null(jthread));\n    // Allocate the C++ Thread structure and create the native thread.  The\n    // stack size retrieved from java is 64-bit signed, but the constructor takes\n    // size_t (an unsigned type), which may be 32 or 64-bit depending on the platform.\n    //  - Avoid truncating on 32-bit platforms if size is greater than UINT_MAX.\n    //  - Avoid passing negative values which would result in really large stacks.\n    NOT_LP64(if (size &gt; SIZE_MAX) size = SIZE_MAX;)\n    size_t sz = size &gt; 0 ? (size_t) size : 0;\n    native_thread = new JavaThread(&amp;thread_entry, sz);\n</code></pre>\n</li>\n</ul>\n<hr />\n<p>Does this depend on the specific JVM implementation?</p>\n<p>In principle, it could depend on the specific JVM implementation. It would however be silly to create an OS thread before it is really needed.</p>\n<p>The main reason why I call this silly is the resource management. When you create an OS thread you must also destroy it. When you <code>start()</code> a <code>Thread</code> the OS thread is created, the threads <code>run()</code> method is exeucted and after that method returns the OS thread will be destroyed.</p>\n<p>If a hypothetical JVM implementation created the OS thread already in the <code>Thread</code> constructor it would also need some way of destroying that OS thread when the <code>Thread</code> instance is garbage collected which will be hassle.</p>\n"}],"owner":{"account_id":1262646,"reputation":2597,"user_id":1220560,"display_name":"morgwai"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":87,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76730664,"answer_count":2,"score":1,"last_activity_date":1689861524,"creation_date":1689856270,"question_id":76729903,"body_markdown":"I think I have and understanding of a mapping between OS threads and JVM threads (first we had &quot;green threads&quot; with 1os:Many-green, then there was 1:1 mapping and now with [jep-425](https://openjdk.org/jeps/425) we have virtual threads with M:N mapping: please correct me if I&#39;m wrong). I&#39;m however quite confused about the mapping between JVM threads and `Thread` instances: I&#39;m **almost** sure that there is a 1:1 mapping between `start()`-ed `Thread` instances and JVM threads (again, please correct me if I&#39;m wrong), but I&#39;m not sure if a JVM thread is created and its stack allocated when a `Thread` instance is constructed or only when `start()` method is called. Whatever the correct answer is, I also wonder if it is a part of the JVM/Java-language spec or up to implementation, such as OpenJDK.","title":"relation between JVM threads and Thread instances","body":"<p>I think I have and understanding of a mapping between OS threads and JVM threads (first we had &quot;green threads&quot; with 1os:Many-green, then there was 1:1 mapping and now with <a href=\"https://openjdk.org/jeps/425\" rel=\"nofollow noreferrer\">jep-425</a> we have virtual threads with M:N mapping: please correct me if I'm wrong). I'm however quite confused about the mapping between JVM threads and <code>Thread</code> instances: I'm <strong>almost</strong> sure that there is a 1:1 mapping between <code>start()</code>-ed <code>Thread</code> instances and JVM threads (again, please correct me if I'm wrong), but I'm not sure if a JVM thread is created and its stack allocated when a <code>Thread</code> instance is constructed or only when <code>start()</code> method is called. Whatever the correct answer is, I also wonder if it is a part of the JVM/Java-language spec or up to implementation, such as OpenJDK.</p>\n"},{"tags":["java","mysql","hibernate","exception","classnotfoundexception"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1595593174,"post_id":63073364,"comment_id":111536135,"body_markdown":"Take the provided scope off the `mysql-connector-java` dependency.","body":"Take the provided scope off the <code>mysql-connector-java</code> dependency."},{"owner":{"account_id":8357383,"reputation":11939,"user_id":6277104,"display_name":"SternK"},"score":0,"creation_date":1595593337,"post_id":63073364,"comment_id":111536227,"body_markdown":"Also try to use `com.mysql.cj.jdbc.Driver`. The `com.mysql.jdbc.Driver` is deprecated. (see the [documentation](https://dev.mysql.com/doc/connector-j/8.0/en/connector-j-api-changes.html))","body":"Also try to use <code>com.mysql.cj.jdbc.Driver</code>. The <code>com.mysql.jdbc.Driver</code> is deprecated. (see the <a href=\"https://dev.mysql.com/doc/connector-j/8.0/en/connector-j-api-changes.html\" rel=\"nofollow noreferrer\">documentation</a>)"},{"owner":{"account_id":18479935,"reputation":82,"user_id":13462381,"display_name":"David9809"},"score":0,"creation_date":1595601008,"post_id":63073364,"comment_id":111540248,"body_markdown":"unfortunately, any of those tips doesn&#39;t work","body":"unfortunately, any of those tips doesn&#39;t work"},{"owner":{"account_id":4625774,"reputation":304,"user_id":3749639,"display_name":"Pablo AM"},"score":0,"creation_date":1595606795,"post_id":63073364,"comment_id":111543135,"body_markdown":"Could you please update your question and include a valid persistence.xml? That one is missing some pieces of code. For example there is no initial tag for persistence-unit","body":"Could you please update your question and include a valid persistence.xml? That one is missing some pieces of code. For example there is no initial tag for persistence-unit"}],"answers":[{"comments":[{"owner":{"account_id":4625774,"reputation":304,"user_id":3749639,"display_name":"Pablo AM"},"score":0,"creation_date":1595661475,"post_id":63077971,"comment_id":111557079,"body_markdown":"@David9809 , please, if my answer solved your issue, mark it as correct answer. Thanks!","body":"@David9809 , please, if my answer solved your issue, mark it as correct answer. Thanks!"}],"tags":[],"owner":{"account_id":4625774,"reputation":304,"user_id":3749639,"display_name":"Pablo AM"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1595609153,"creation_date":1595609153,"answer_id":63077971,"question_id":63073364,"body_markdown":"I have tested your code and the problem is in the mysql maven dependency you need to remove scope provided because you are saying it will be provided while running but that is not the case.\r\n\r\n\r\nThese are the changes I did to make it run.\r\n\r\n- Remove provided scope to mysql maven dependency\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n            &lt;version&gt;8.0.15&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\nChange your jdbc driver in persistence.xml as the one you use is deprecated\r\n\r\n    &lt;property name=&quot;javax.persistence.jdbc.driver&quot; value=&quot;com.mysql.jdbc.Driver&quot;/&gt;\r\n\r\nYou are also missing a mandatory part of persistence.xml code\r\n\r\n    &lt;persistence-unit name=&quot;JEETut3&quot; transaction-type=&quot;RESOURCE_LOCAL&quot;&gt;\r\n\r\nI have also added the dialect of database in the persistence.xml\r\n\r\n    &lt;property name=&quot;hibernate.dialect&quot; value=&quot;org.hibernate.dialect.MySQL5Dialect&quot;/&gt;\r\n\r\nIn case you want the tables to be created automatically on each execution you can add\r\n\r\n    &lt;property name=&quot;javax.persistence.schema-generation.database.action&quot; value=&quot;drop-and-create&quot;/&gt;\r\n\r\nIn summary this is the persistence I used\r\n\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;persistence version=&quot;2.0&quot;\r\n             xmlns=&quot;http://java.sun.com/xml/ns/persistence&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd&quot;&gt;\r\n\r\n    &lt;persistence-unit name=&quot;JEETut3&quot; transaction-type=&quot;RESOURCE_LOCAL&quot;&gt;\r\n        &lt;class&gt;com.newthinktank.JEETut3.Customer&lt;/class&gt;\r\n        &lt;properties&gt;\r\n            &lt;property name=&quot;javax.persistence.jdbc.driver&quot; value=&quot;com.mysql.jdbc.Driver&quot;/&gt;\r\n            &lt;property name=&quot;javax.persistence.jdbc.url&quot; value=&quot;jdbc:mysql://localhost/test4&quot;/&gt;\r\n            &lt;property name=&quot;javax.persistence.jdbc.user&quot; value=&quot;root&quot;/&gt;\r\n            &lt;property name=&quot;javax.persistence.jdbc.password&quot; value=&quot;myPassword!&quot;/&gt;\r\n            &lt;property name=&quot;hibernate.dialect&quot; value=&quot;org.hibernate.dialect.MySQL5Dialect&quot;/&gt;\r\n            &lt;property name=&quot;javax.persistence.schema-generation.database.action&quot; value=&quot;drop-and-create&quot;/&gt;\r\n        &lt;/properties&gt;\r\n    &lt;/persistence-unit&gt;\r\n&lt;/persistence&gt;\r\n\r\n\r\nThis is the result you will get in the database\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/8lnfL.png\r\n\r\nI hope this helps you solving your issue","title":"Hibernate error: java.lang.ClassNotFoundException: Could not load requested class","body":"<p>I have tested your code and the problem is in the mysql maven dependency you need to remove scope provided because you are saying it will be provided while running but that is not the case.</p>\n<p>These are the changes I did to make it run.</p>\n<ul>\n<li><p>Remove provided scope to mysql maven dependency</p>\n<pre><code>  &lt;dependency&gt;\n      &lt;groupId&gt;mysql&lt;/groupId&gt;\n      &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n      &lt;version&gt;8.0.15&lt;/version&gt;\n  &lt;/dependency&gt;\n</code></pre>\n</li>\n</ul>\n<p>Change your jdbc driver in persistence.xml as the one you use is deprecated</p>\n<pre><code>&lt;property name=&quot;javax.persistence.jdbc.driver&quot; value=&quot;com.mysql.jdbc.Driver&quot;/&gt;\n</code></pre>\n<p>You are also missing a mandatory part of persistence.xml code</p>\n<pre><code>&lt;persistence-unit name=&quot;JEETut3&quot; transaction-type=&quot;RESOURCE_LOCAL&quot;&gt;\n</code></pre>\n<p>I have also added the dialect of database in the persistence.xml</p>\n<pre><code>&lt;property name=&quot;hibernate.dialect&quot; value=&quot;org.hibernate.dialect.MySQL5Dialect&quot;/&gt;\n</code></pre>\n<p>In case you want the tables to be created automatically on each execution you can add</p>\n<pre><code>&lt;property name=&quot;javax.persistence.schema-generation.database.action&quot; value=&quot;drop-and-create&quot;/&gt;\n</code></pre>\n<p>In summary this is the persistence I used</p>\n\n<p></p>\n<pre><code>&lt;persistence-unit name=&quot;JEETut3&quot; transaction-type=&quot;RESOURCE_LOCAL&quot;&gt;\n    &lt;class&gt;com.newthinktank.JEETut3.Customer&lt;/class&gt;\n    &lt;properties&gt;\n        &lt;property name=&quot;javax.persistence.jdbc.driver&quot; value=&quot;com.mysql.jdbc.Driver&quot;/&gt;\n        &lt;property name=&quot;javax.persistence.jdbc.url&quot; value=&quot;jdbc:mysql://localhost/test4&quot;/&gt;\n        &lt;property name=&quot;javax.persistence.jdbc.user&quot; value=&quot;root&quot;/&gt;\n        &lt;property name=&quot;javax.persistence.jdbc.password&quot; value=&quot;myPassword!&quot;/&gt;\n        &lt;property name=&quot;hibernate.dialect&quot; value=&quot;org.hibernate.dialect.MySQL5Dialect&quot;/&gt;\n        &lt;property name=&quot;javax.persistence.schema-generation.database.action&quot; value=&quot;drop-and-create&quot;/&gt;\n    &lt;/properties&gt;\n&lt;/persistence-unit&gt;\n</code></pre>\n\n<p>This is the result you will get in the database</p>\n<p><a href=\"https://i.stack.imgur.com/8lnfL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8lnfL.png\" alt=\"enter image description here\" /></a></p>\n<p>I hope this helps you solving your issue</p>\n"}],"owner":{"account_id":18479935,"reputation":82,"user_id":13462381,"display_name":"David9809"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28809,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":63077971,"answer_count":1,"score":3,"last_activity_date":1689861472,"creation_date":1595592924,"question_id":63073364,"body_markdown":"I am new in Hibernate and facing some problem during execution first programme: \r\n**java.lang.ClassNotFoundException: Could not load requested class : com.mysql.jdbc.Driver**. I was following tutorial about Hibernate, did everything same(even copied everything and tried to run).I&#39;ve been searching for answers all over the internet, but none of them helped me.\r\n*persistence.xml*:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    \r\n    \r\n    &lt;persistence version=&quot;2.0&quot;\r\n                 xmlns=&quot;http://java.sun.com/xml/ns/persistence&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n                 xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd&quot;&gt;\r\n    \r\n      \r\n          \r\n            &lt;class&gt;com.newthinktank.JEETut3.Customer&lt;/class&gt;\r\n            &lt;properties&gt;\r\n                &lt;property name=&quot;javax.persistence.jdbc.driver&quot; value=&quot;com.mysql.jdbc.Driver&quot; /&gt;\r\n                &lt;property name=&quot;javax.persistence.jdbc.url&quot; value=&quot;jdbc:mysql://localhost/test4&quot; /&gt;\r\n                &lt;property name=&quot;javax.persistence.jdbc.user&quot; value=&quot;root&quot; /&gt;\r\n                &lt;property name=&quot;javax.persistence.jdbc.password&quot; value=&quot;myPassword!&quot; /&gt;\r\n            &lt;/properties&gt;\r\n        &lt;/persistence-unit&gt;\r\n    &lt;/persistence&gt;\r\n\r\n*pom.xml:*\r\n\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n \r\n\r\n    &lt;groupId&gt;com.newthinktank&lt;/groupId&gt;\r\n    &lt;artifactId&gt;JEETut3&lt;/artifactId&gt;\r\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    &lt;packaging&gt;jar&lt;/packaging&gt;\r\n\r\n    &lt;name&gt;JEETut3&lt;/name&gt;\r\n    &lt;url&gt;http://maven.apache.org&lt;/url&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencies&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n            &lt;version&gt;5.4.1.Final&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\r\n            &lt;version&gt;5.4.1.Final&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n            &lt;version&gt;8.0.15&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;junit&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n            &lt;version&gt;3.8.1&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n&lt;/project&gt;\r\n\r\n*Customer:*\r\n\r\n    package com.newthinktank.JEETut3;\r\n    \r\n    import java.io.Serializable;\r\n    \r\n    import javax.persistence.Column;\r\n    import javax.persistence.Entity;\r\n    import javax.persistence.Id;\r\n    import javax.persistence.Table;\r\n    \r\n    @Entity\r\n    @Table(name = &quot;customer&quot;)\r\n    public class Customer implements Serializable {\r\n        private static final long serialVersionUID = 1L;\r\n        \r\n        @Id\r\n        private int id;\r\n    \r\n        @Column(name = &quot;firstName&quot;, nullable = false)\r\n        private String fName;\r\n    \r\n        @Column(name = &quot;lastName&quot;, nullable = false)\r\n        private String lName;\r\n    \r\n        public int getID() {\r\n            return id;\r\n        }\r\n    \r\n        public void setID(int id) {\r\n            this.id = id;\r\n        }\r\n    \r\n        public String getFName() {\r\n            return fName;\r\n        }\r\n    \r\n        public void setFName(String fName) {\r\n            this.fName = fName;\r\n        }\r\n    \r\n        public String getLName() {\r\n            return lName;\r\n        }\r\n    \r\n        public void setLName(String lName) {\r\n            this.lName = lName;\r\n        }\r\n    \r\n    }\r\n*TestSystem:*\r\n\r\n    package com.newthinktank.JEETut3;\r\n    \r\n    import java.util.List;\r\n    \r\n    import javax.persistence.EntityManager;\r\n    import javax.persistence.EntityManagerFactory;\r\n    import javax.persistence.EntityTransaction;\r\n    import javax.persistence.NoResultException;\r\n    import javax.persistence.Persistence;\r\n    import javax.persistence.TypedQuery;\r\n    \r\n    public class TestSystem {\r\n        private static final EntityManagerFactory ENTITY_MANAGER_FACTORY = Persistence\r\n                .createEntityManagerFactory(&quot;JEETut3&quot;);\r\n    \r\n        public static void main(String[] args) {\r\n            addCustomer(1, &quot;Sue&quot;, &quot;Smith&quot;);\r\n            addCustomer(2, &quot;Sam&quot;, &quot;Smith&quot;);\r\n            addCustomer(3, &quot;Sid&quot;, &quot;Smith&quot;);\r\n            addCustomer(4, &quot;Sally&quot;, &quot;Smith&quot;);\r\n            getCustomer(1);\r\n            getCustomers();\r\n            changeFName(4, &quot;Mark&quot;);\r\n            deleteCustomer(3);\r\n            ENTITY_MANAGER_FACTORY.close();\r\n        }\r\n    \r\n        public static void addCustomer(int id, String fname, String lname) {\r\n            EntityManager em = ENTITY_MANAGER_FACTORY.createEntityManager();\r\n            EntityTransaction et = null;\r\n    \r\n            try {\r\n                et = em.getTransaction();\r\n                et.begin();\r\n    \r\n                Customer cust = new Customer();\r\n                cust.setID(id);\r\n                cust.setFName(fname);\r\n                cust.setLName(lname);\r\n    \r\n                em.persist(cust);\r\n                et.commit();\r\n            } catch (Exception ex) {\r\n                if (et != null) {\r\n                    et.rollback();\r\n                }\r\n                ex.printStackTrace();\r\n            } finally {\r\n                em.close();\r\n            }\r\n        }\r\n    \r\n        public static void getCustomer(int id) {\r\n            EntityManager em = ENTITY_MANAGER_FACTORY.createEntityManager();\r\n    \r\n            String query = &quot;SELECT c FROM Customer c WHERE c.id = :custID&quot;;\r\n    \r\n            TypedQuery&lt;Customer&gt; tq = em.createQuery(query, Customer.class);\r\n            tq.setParameter(&quot;custID&quot;, id);\r\n    \r\n            Customer cust = null;\r\n            try {\r\n                cust = tq.getSingleResult();\r\n                System.out.println(cust.getFName() + &quot; &quot; + cust.getLName());\r\n            } catch (NoResultException ex) {\r\n                ex.printStackTrace();\r\n            } finally {\r\n                em.close();\r\n            }\r\n        }\r\n    \r\n        public static void getCustomers() {\r\n            EntityManager em = ENTITY_MANAGER_FACTORY.createEntityManager();\r\n    \r\n            String strQuery = &quot;SELECT c FROM Customer c WHERE c.id IS NOT NULL&quot;;\r\n    \r\n            TypedQuery&lt;Customer&gt; tq = em.createQuery(strQuery, Customer.class);\r\n            List&lt;Customer&gt; custs;\r\n            try {\r\n                custs = tq.getResultList();\r\n                custs.forEach(cust -&gt; System.out.println(cust.getFName() + &quot; &quot; + cust.getLName()));\r\n            } catch (NoResultException ex) {\r\n                ex.printStackTrace();\r\n            } finally {\r\n                em.close();\r\n            }\r\n        }\r\n    \r\n        public static void changeFName(int id, String fname) {\r\n            EntityManager em = ENTITY_MANAGER_FACTORY.createEntityManager();\r\n            EntityTransaction et = null;\r\n    \r\n            Customer cust = null;\r\n    \r\n            try {\r\n                et = em.getTransaction();\r\n                et.begin();\r\n    \r\n                cust = em.find(Customer.class, id);\r\n                cust.setFName(fname);\r\n    \r\n                em.persist(cust);\r\n                et.commit();\r\n            } catch (Exception ex) {\r\n                if (et != null) {\r\n                    et.rollback();\r\n                }\r\n                ex.printStackTrace();\r\n            } finally {\r\n                em.close();\r\n            }\r\n        }\r\n    \r\n        public static void deleteCustomer(int id) {\r\n            EntityManager em = ENTITY_MANAGER_FACTORY.createEntityManager();\r\n            EntityTransaction et = null;\r\n            Customer cust = null;\r\n    \r\n            try {\r\n                et = em.getTransaction();\r\n                et.begin();\r\n                cust = em.find(Customer.class, id);\r\n                em.remove(cust);\r\n                et.commit();\r\n            } catch (Exception ex) {\r\n                if (et != null) {\r\n                    et.rollback();\r\n                }\r\n                ex.printStackTrace();\r\n            } finally {\r\n                em.close();\r\n            }\r\n        }\r\n    }\r\n*Error:*\r\n\r\n    lip 24, 2020 1:42:49 PM org.hibernate.jpa.internal.util.LogHelper logPersistenceUnitInformation\r\n    INFO: HHH000204: Processing PersistenceUnitInfo [name: JEETut3]\r\n    lip 24, 2020 1:42:49 PM org.hibernate.Version logVersion\r\n    INFO: HHH000412: Hibernate Core {5.4.3.Final}\r\n    lip 24, 2020 1:42:49 PM org.hibernate.annotations.common.reflection.java.JavaReflectionManager &lt;clinit&gt;\r\n    INFO: HCANN000001: Hibernate Commons Annotations {5.1.0.Final}\r\n    lip 24, 2020 1:42:49 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure\r\n    WARN: HHH10001002: Using Hibernate built-in connection pool (not for production use!)\r\n    Exception in thread &quot;main&quot; java.lang.ExceptionInInitializerError\r\n    Caused by: org.hibernate.service.spi.ServiceException: Unable to create requested service [org.hibernate.engine.jdbc.env.spi.JdbcEnvironment]\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:275)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:237)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214)\r\n    \tat org.hibernate.id.factory.internal.DefaultIdentifierGeneratorFactory.injectServices(DefaultIdentifierGeneratorFactory.java:152)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.injectDependencies(AbstractServiceRegistryImpl.java:286)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:243)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214)\r\n    \tat org.hibernate.boot.internal.InFlightMetadataCollectorImpl.&lt;init&gt;(InFlightMetadataCollectorImpl.java:175)\r\n    \tat org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:118)\r\n    \tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:900)\r\n    \tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:931)\r\n    \tat org.hibernate.jpa.HibernatePersistenceProvider.createEntityManagerFactory(HibernatePersistenceProvider.java:56)\r\n    \tat javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:79)\r\n    \tat javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:54)\r\n    \tat com.newthinktank.JEETut3.TestSystem.&lt;clinit&gt;(TestSystem.java:15)\r\n    Caused by: org.hibernate.boot.registry.classloading.spi.ClassLoadingException: Unable to load class [com.mysql.jdbc.Driver]\r\n    \tat org.hibernate.boot.registry.classloading.internal.ClassLoaderServiceImpl.classForName(ClassLoaderServiceImpl.java:136)\r\n    \tat org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl.loadDriverIfPossible(DriverManagerConnectionProviderImpl.java:149)\r\n    \tat org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl.buildCreator(DriverManagerConnectionProviderImpl.java:105)\r\n    \tat org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl.buildPool(DriverManagerConnectionProviderImpl.java:89)\r\n    \tat org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl.configure(DriverManagerConnectionProviderImpl.java:73)\r\n    \tat org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.configureService(StandardServiceRegistryImpl.java:107)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:246)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214)\r\n    \tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.buildJdbcConnectionAccess(JdbcEnvironmentInitiator.java:145)\r\n    \tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:66)\r\n    \tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:35)\r\n    \tat org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:101)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:263)\r\n    \t... 14 more\r\n    Caused by: java.lang.ClassNotFoundException: Could not load requested class : com.mysql.jdbc.Driver\r\n    \tat org.hibernate.boot.registry.classloading.internal.AggregatedClassLoader.findClass(AggregatedClassLoader.java:210)\r\n    \tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:588)\r\n    \tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)\r\n    \tat java.base/java.lang.Class.forName0(Native Method)\r\n    \tat java.base/java.lang.Class.forName(Class.java:416)\r\n    \tat org.hibernate.boot.registry.classloading.internal.ClassLoaderServiceImpl.classForName(ClassLoaderServiceImpl.java:133)\r\n    \t... 26 more\r\nDoes anyone know how to resolve problem?","title":"Hibernate error: java.lang.ClassNotFoundException: Could not load requested class","body":"<p>I am new in Hibernate and facing some problem during execution first programme:\n<strong>java.lang.ClassNotFoundException: Could not load requested class : com.mysql.jdbc.Driver</strong>. I was following tutorial about Hibernate, did everything same(even copied everything and tried to run).I've been searching for answers all over the internet, but none of them helped me.\n<em>persistence.xml</em>:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n\n&lt;persistence version=&quot;2.0&quot;\n             xmlns=&quot;http://java.sun.com/xml/ns/persistence&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n             xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd&quot;&gt;\n\n  \n      \n        &lt;class&gt;com.newthinktank.JEETut3.Customer&lt;/class&gt;\n        &lt;properties&gt;\n            &lt;property name=&quot;javax.persistence.jdbc.driver&quot; value=&quot;com.mysql.jdbc.Driver&quot; /&gt;\n            &lt;property name=&quot;javax.persistence.jdbc.url&quot; value=&quot;jdbc:mysql://localhost/test4&quot; /&gt;\n            &lt;property name=&quot;javax.persistence.jdbc.user&quot; value=&quot;root&quot; /&gt;\n            &lt;property name=&quot;javax.persistence.jdbc.password&quot; value=&quot;myPassword!&quot; /&gt;\n        &lt;/properties&gt;\n    &lt;/persistence-unit&gt;\n&lt;/persistence&gt;\n</code></pre>\n<p><em>pom.xml:</em></p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n     xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n\n\n&lt;groupId&gt;com.newthinktank&lt;/groupId&gt;\n&lt;artifactId&gt;JEETut3&lt;/artifactId&gt;\n&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n&lt;packaging&gt;jar&lt;/packaging&gt;\n\n&lt;name&gt;JEETut3&lt;/name&gt;\n&lt;url&gt;http://maven.apache.org&lt;/url&gt;\n\n&lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n        &lt;version&gt;5.4.1.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\n        &lt;version&gt;5.4.1.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;mysql&lt;/groupId&gt;\n        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n        &lt;version&gt;8.0.15&lt;/version&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;junit&lt;/groupId&gt;\n        &lt;artifactId&gt;junit&lt;/artifactId&gt;\n        &lt;version&gt;3.8.1&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n\n<p><em>Customer:</em></p>\n<pre><code>package com.newthinktank.JEETut3;\n\nimport java.io.Serializable;\n\nimport javax.persistence.Column;\nimport javax.persistence.Entity;\nimport javax.persistence.Id;\nimport javax.persistence.Table;\n\n@Entity\n@Table(name = &quot;customer&quot;)\npublic class Customer implements Serializable {\n    private static final long serialVersionUID = 1L;\n    \n    @Id\n    private int id;\n\n    @Column(name = &quot;firstName&quot;, nullable = false)\n    private String fName;\n\n    @Column(name = &quot;lastName&quot;, nullable = false)\n    private String lName;\n\n    public int getID() {\n        return id;\n    }\n\n    public void setID(int id) {\n        this.id = id;\n    }\n\n    public String getFName() {\n        return fName;\n    }\n\n    public void setFName(String fName) {\n        this.fName = fName;\n    }\n\n    public String getLName() {\n        return lName;\n    }\n\n    public void setLName(String lName) {\n        this.lName = lName;\n    }\n\n}\n</code></pre>\n<p><em>TestSystem:</em></p>\n<pre><code>package com.newthinktank.JEETut3;\n\nimport java.util.List;\n\nimport javax.persistence.EntityManager;\nimport javax.persistence.EntityManagerFactory;\nimport javax.persistence.EntityTransaction;\nimport javax.persistence.NoResultException;\nimport javax.persistence.Persistence;\nimport javax.persistence.TypedQuery;\n\npublic class TestSystem {\n    private static final EntityManagerFactory ENTITY_MANAGER_FACTORY = Persistence\n            .createEntityManagerFactory(&quot;JEETut3&quot;);\n\n    public static void main(String[] args) {\n        addCustomer(1, &quot;Sue&quot;, &quot;Smith&quot;);\n        addCustomer(2, &quot;Sam&quot;, &quot;Smith&quot;);\n        addCustomer(3, &quot;Sid&quot;, &quot;Smith&quot;);\n        addCustomer(4, &quot;Sally&quot;, &quot;Smith&quot;);\n        getCustomer(1);\n        getCustomers();\n        changeFName(4, &quot;Mark&quot;);\n        deleteCustomer(3);\n        ENTITY_MANAGER_FACTORY.close();\n    }\n\n    public static void addCustomer(int id, String fname, String lname) {\n        EntityManager em = ENTITY_MANAGER_FACTORY.createEntityManager();\n        EntityTransaction et = null;\n\n        try {\n            et = em.getTransaction();\n            et.begin();\n\n            Customer cust = new Customer();\n            cust.setID(id);\n            cust.setFName(fname);\n            cust.setLName(lname);\n\n            em.persist(cust);\n            et.commit();\n        } catch (Exception ex) {\n            if (et != null) {\n                et.rollback();\n            }\n            ex.printStackTrace();\n        } finally {\n            em.close();\n        }\n    }\n\n    public static void getCustomer(int id) {\n        EntityManager em = ENTITY_MANAGER_FACTORY.createEntityManager();\n\n        String query = &quot;SELECT c FROM Customer c WHERE c.id = :custID&quot;;\n\n        TypedQuery&lt;Customer&gt; tq = em.createQuery(query, Customer.class);\n        tq.setParameter(&quot;custID&quot;, id);\n\n        Customer cust = null;\n        try {\n            cust = tq.getSingleResult();\n            System.out.println(cust.getFName() + &quot; &quot; + cust.getLName());\n        } catch (NoResultException ex) {\n            ex.printStackTrace();\n        } finally {\n            em.close();\n        }\n    }\n\n    public static void getCustomers() {\n        EntityManager em = ENTITY_MANAGER_FACTORY.createEntityManager();\n\n        String strQuery = &quot;SELECT c FROM Customer c WHERE c.id IS NOT NULL&quot;;\n\n        TypedQuery&lt;Customer&gt; tq = em.createQuery(strQuery, Customer.class);\n        List&lt;Customer&gt; custs;\n        try {\n            custs = tq.getResultList();\n            custs.forEach(cust -&gt; System.out.println(cust.getFName() + &quot; &quot; + cust.getLName()));\n        } catch (NoResultException ex) {\n            ex.printStackTrace();\n        } finally {\n            em.close();\n        }\n    }\n\n    public static void changeFName(int id, String fname) {\n        EntityManager em = ENTITY_MANAGER_FACTORY.createEntityManager();\n        EntityTransaction et = null;\n\n        Customer cust = null;\n\n        try {\n            et = em.getTransaction();\n            et.begin();\n\n            cust = em.find(Customer.class, id);\n            cust.setFName(fname);\n\n            em.persist(cust);\n            et.commit();\n        } catch (Exception ex) {\n            if (et != null) {\n                et.rollback();\n            }\n            ex.printStackTrace();\n        } finally {\n            em.close();\n        }\n    }\n\n    public static void deleteCustomer(int id) {\n        EntityManager em = ENTITY_MANAGER_FACTORY.createEntityManager();\n        EntityTransaction et = null;\n        Customer cust = null;\n\n        try {\n            et = em.getTransaction();\n            et.begin();\n            cust = em.find(Customer.class, id);\n            em.remove(cust);\n            et.commit();\n        } catch (Exception ex) {\n            if (et != null) {\n                et.rollback();\n            }\n            ex.printStackTrace();\n        } finally {\n            em.close();\n        }\n    }\n}\n</code></pre>\n<p><em>Error:</em></p>\n<pre><code>lip 24, 2020 1:42:49 PM org.hibernate.jpa.internal.util.LogHelper logPersistenceUnitInformation\nINFO: HHH000204: Processing PersistenceUnitInfo [name: JEETut3]\nlip 24, 2020 1:42:49 PM org.hibernate.Version logVersion\nINFO: HHH000412: Hibernate Core {5.4.3.Final}\nlip 24, 2020 1:42:49 PM org.hibernate.annotations.common.reflection.java.JavaReflectionManager &lt;clinit&gt;\nINFO: HCANN000001: Hibernate Commons Annotations {5.1.0.Final}\nlip 24, 2020 1:42:49 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure\nWARN: HHH10001002: Using Hibernate built-in connection pool (not for production use!)\nException in thread &quot;main&quot; java.lang.ExceptionInInitializerError\nCaused by: org.hibernate.service.spi.ServiceException: Unable to create requested service [org.hibernate.engine.jdbc.env.spi.JdbcEnvironment]\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:275)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:237)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214)\n    at org.hibernate.id.factory.internal.DefaultIdentifierGeneratorFactory.injectServices(DefaultIdentifierGeneratorFactory.java:152)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.injectDependencies(AbstractServiceRegistryImpl.java:286)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:243)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214)\n    at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.&lt;init&gt;(InFlightMetadataCollectorImpl.java:175)\n    at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:118)\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:900)\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:931)\n    at org.hibernate.jpa.HibernatePersistenceProvider.createEntityManagerFactory(HibernatePersistenceProvider.java:56)\n    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:79)\n    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:54)\n    at com.newthinktank.JEETut3.TestSystem.&lt;clinit&gt;(TestSystem.java:15)\nCaused by: org.hibernate.boot.registry.classloading.spi.ClassLoadingException: Unable to load class [com.mysql.jdbc.Driver]\n    at org.hibernate.boot.registry.classloading.internal.ClassLoaderServiceImpl.classForName(ClassLoaderServiceImpl.java:136)\n    at org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl.loadDriverIfPossible(DriverManagerConnectionProviderImpl.java:149)\n    at org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl.buildCreator(DriverManagerConnectionProviderImpl.java:105)\n    at org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl.buildPool(DriverManagerConnectionProviderImpl.java:89)\n    at org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl.configure(DriverManagerConnectionProviderImpl.java:73)\n    at org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.configureService(StandardServiceRegistryImpl.java:107)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:246)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214)\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.buildJdbcConnectionAccess(JdbcEnvironmentInitiator.java:145)\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:66)\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:35)\n    at org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:101)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:263)\n    ... 14 more\nCaused by: java.lang.ClassNotFoundException: Could not load requested class : com.mysql.jdbc.Driver\n    at org.hibernate.boot.registry.classloading.internal.AggregatedClassLoader.findClass(AggregatedClassLoader.java:210)\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:588)\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)\n    at java.base/java.lang.Class.forName0(Native Method)\n    at java.base/java.lang.Class.forName(Class.java:416)\n    at org.hibernate.boot.registry.classloading.internal.ClassLoaderServiceImpl.classForName(ClassLoaderServiceImpl.java:133)\n    ... 26 more\n</code></pre>\n<p>Does anyone know how to resolve problem?</p>\n"},{"tags":["java","string","list","bufferedreader"],"comments":[{"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"score":2,"creation_date":1689777258,"post_id":76722420,"comment_id":135261948,"body_markdown":"You need to give a name to that String parameter.","body":"You need to give a name to that String parameter."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1689781311,"post_id":76722420,"comment_id":135262964,"body_markdown":"And then move the method outside the `main` method, moving it into `ReadSymptomDataFromFile` if that&#39;s not where this code is declared, and then give it an actual implementation, and then call it as `getSymptoms()` rather than `GetSymptoms()`... basically, there&#39;s a lot wrong here.","body":"And then move the method outside the <code>main</code> method, moving it into <code>ReadSymptomDataFromFile</code> if that&#39;s not where this code is declared, and then give it an actual implementation, and then call it as <code>getSymptoms()</code> rather than <code>GetSymptoms()</code>... basically, there&#39;s a lot wrong here."},{"owner":{"account_id":9072254,"reputation":1014,"user_id":6754986,"display_name":"LinFelix"},"score":0,"creation_date":1689855119,"post_id":76722420,"comment_id":135274031,"body_markdown":"What is the error you don&#39;t understand and what behavior do you expect, that you are not observing currently?","body":"What is the error you don&#39;t understand and what behavior do you expect, that you are not observing currently?"},{"owner":{"account_id":20264534,"reputation":1,"user_id":22253025,"display_name":"S_LUCIA"},"score":0,"creation_date":1689855141,"post_id":76722420,"comment_id":135274035,"body_markdown":"@JonSkeet Thank you, I update in my description. My goal is to mute all actions performed by check Counter into several independent methods. So I&#39;m not sure I must move this method.","body":"@JonSkeet Thank you, I update in my description. My goal is to mute all actions performed by check Counter into several independent methods. So I&#39;m not sure I must move this method."},{"owner":{"account_id":20264534,"reputation":1,"user_id":22253025,"display_name":"S_LUCIA"},"score":0,"creation_date":1689855652,"post_id":76722420,"comment_id":135274181,"body_markdown":"@LinFelix I want my method (get)to be able to read the file correctly, the file outside the mtehod is done correctly but My goal is to mute all actions performed by check Counter into several independent methods( exemple read, count, write... for the futur. And my method does not display an array in my console.","body":"@LinFelix I want my method (get)to be able to read the file correctly, the file outside the mtehod is done correctly but My goal is to mute all actions performed by check Counter into several independent methods( exemple read, count, write... for the futur. And my method does not display an array in my console."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1689926528,"post_id":76722420,"comment_id":135285075,"body_markdown":"&quot;So I&#39;m not sure I must move this method.&quot; Well you definitely need to stop trying to declare one method within another method, which is what you&#39;re currently trying to do... I&#39;d also strongly advise you to follow Java naming conventions.","body":"&quot;So I&#39;m not sure I must move this method.&quot; Well you definitely need to stop trying to declare one method within another method, which is what you&#39;re currently trying to do... I&#39;d also strongly advise you to follow Java naming conventions."}],"answers":[{"comments":[{"owner":{"account_id":5907283,"reputation":1489,"user_id":4648586,"accept_rate":60,"display_name":"Bagus Tesa"},"score":0,"creation_date":1689777446,"post_id":76722454,"comment_id":135262009,"body_markdown":"it&#39;d be nice if you could give an example for clarity","body":"it&#39;d be nice if you could give an example for clarity"},{"owner":{"account_id":20264534,"reputation":1,"user_id":22253025,"display_name":"S_LUCIA"},"score":0,"creation_date":1689780679,"post_id":76722454,"comment_id":135262821,"body_markdown":"@BagusTesa exemple with more code ?","body":"@BagusTesa exemple with more code ?"}],"tags":[],"owner":{"account_id":6516908,"reputation":2191,"user_id":6622577,"display_name":"Manuel Mannhardt"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689777277,"creation_date":1689777277,"answer_id":76722454,"question_id":76722420,"body_markdown":"The problem is, that you only specified the type of the parameter and no name, thus creating a syntax error.\r\n\r\n","title":"java: illegal start of expression - method parameters","body":"<p>The problem is, that you only specified the type of the parameter and no name, thus creating a syntax error.</p>\n"}],"owner":{"account_id":20264534,"reputation":1,"user_id":22253025,"display_name":"S_LUCIA"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1689861376,"creation_date":1689777070,"question_id":76722420,"body_markdown":"I use method for create and retrieves the list of entries with existing file using the instance.\r\n\r\nMy goal is to mute all actions performed by check Counter into several independent methods exemple first action &quot;read&quot;.\r\nI have other file for exemple result ( action count, sort..)\r\n\r\nMy method have  &quot;illegal start of expression&quot; in position &quot;(parameter).\r\nI&#39;m stuck on using parameter with List&lt;String&gt; !\r\n\r\n```java\r\npublic class CheckCounter {\r\n\r\n\tpublic static void main(String[] args) throws Exception {\r\n\r\n\t\tReadSymptomDataFromFile readerFile = new ReadSymptomDataFromFile(&quot;Pro/heath.text&quot;);\r\n\r\n\t\tpublic List&lt;String&gt;  getSymptoms() {\r\n\r\n\t\r\n\t\tList&lt;String&gt; symptom = readerFile.GetSymptoms();\r\n\t\tSystem.out.println(symptom);\r\n\t}\r\n}\r\n\r\n```\r\n\r\n    // file interface\r\n       public interface ISymptomReader {\r\n    \r\n    \tList&lt;String&gt; GetSymptoms ();\t\r\n    }\r\n\r\n\r\n","title":"java: illegal start of expression - method parameters","body":"<p>I use method for create and retrieves the list of entries with existing file using the instance.</p>\n<p>My goal is to mute all actions performed by check Counter into several independent methods exemple first action &quot;read&quot;.\nI have other file for exemple result ( action count, sort..)</p>\n<p>My method have  &quot;illegal start of expression&quot; in position &quot;(parameter).\nI'm stuck on using parameter with List !</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class CheckCounter {\n\n    public static void main(String[] args) throws Exception {\n\n        ReadSymptomDataFromFile readerFile = new ReadSymptomDataFromFile(&quot;Pro/heath.text&quot;);\n\n        public List&lt;String&gt;  getSymptoms() {\n\n    \n        List&lt;String&gt; symptom = readerFile.GetSymptoms();\n        System.out.println(symptom);\n    }\n}\n\n</code></pre>\n<pre><code>// file interface\n   public interface ISymptomReader {\n\n    List&lt;String&gt; GetSymptoms ();    \n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","jpa"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1689861429,"post_id":76730621,"comment_id":135275615,"body_markdown":"Having a private `long` id and a public `uuid` identifier is perfectly fine. Perhaps declaring the field as `UUID` instead of `String` will help? Or you need a different way to generate it. If all else fails, just set one yourself using `UUID.randomUUID()`.","body":"Having a private <code>long</code> id and a public <code>uuid</code> identifier is perfectly fine. Perhaps declaring the field as <code>UUID</code> instead of <code>String</code> will help? Or you need a different way to generate it. If all else fails, just set one yourself using <code>UUID.randomUUID()</code>."},{"owner":{"account_id":3638268,"reputation":11,"user_id":3033127,"display_name":"Mirran"},"score":1,"creation_date":1689862106,"post_id":76730621,"comment_id":135275791,"body_markdown":"Thanks @Jorn I&#39;d gotten so caught up in Jakarta not working with it to generate my UUID, it had gotten completely away from me and I hadn&#39;t even thought of other ways to generate it. GeneratedValue still failed, but initializing it with UUID.randomUUID() does what I needed!","body":"Thanks @Jorn I&#39;d gotten so caught up in Jakarta not working with it to generate my UUID, it had gotten completely away from me and I hadn&#39;t even thought of other ways to generate it. GeneratedValue still failed, but initializing it with UUID.randomUUID() does what I needed!"}],"owner":{"account_id":3638268,"reputation":11,"user_id":3033127,"display_name":"Mirran"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689861261,"creation_date":1689861261,"question_id":76730621,"body_markdown":"I am creating an API with Spring boot.\r\n\r\nI want to have an ID that is private (*id*) to the DB as the primary key and a secondary id (*identifier*) that is used to access rows for modification or deletion and is displayed to the user.\r\n\r\nHowever, this only creates a null identifier.\r\n\r\n**Is there another way to do this or is this whole thing a bad idea and I should just generate the UUID as my primary key and live with exposing that?\r\n**\r\nBelow is an example below of my model, I&#39;m using jakarta persistance.\r\n\r\nIt successfully generates the id (as a sequential number), and the user name is managed as expected. It does create all 3 columns. But *identifier* is null.\r\n\r\nI did notice in the jakarta docs that @GeneratedValue is only tested for primary keys, so maybe there&#39;s another annotation that would do the same for just a regular column?\r\n\r\n```\r\n@Entity\r\npublic class User {\r\n  @Id\r\n  @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n  private Long id;\r\n\r\n  @GeneratedValue(strategy = GenerationType.UUID)\r\n  private String identifier;\r\n\r\n  private String name;\r\n\r\n  public User(String name) {\r\n    this.name = name;\r\n  }\r\n\r\n  public Long getId() {return id;}\r\n\r\n  public String getIdentifier() {return identifier;}\r\n\r\n  public String getName() {return name;}\r\n\r\n  protected User() {}\r\n}\r\n```\r\n\r\nAnd repository:\r\n```\r\n@Repository\r\npublic interface UserRepository extends CrudRepository&lt;User, Long&gt; {\r\n}\r\n```\r\n","title":"Can I generate a secondary ID that is used for identifying a row in API calls?","body":"<p>I am creating an API with Spring boot.</p>\n<p>I want to have an ID that is private (<em>id</em>) to the DB as the primary key and a secondary id (<em>identifier</em>) that is used to access rows for modification or deletion and is displayed to the user.</p>\n<p>However, this only creates a null identifier.</p>\n<p>**Is there another way to do this or is this whole thing a bad idea and I should just generate the UUID as my primary key and live with exposing that?\n**\nBelow is an example below of my model, I'm using jakarta persistance.</p>\n<p>It successfully generates the id (as a sequential number), and the user name is managed as expected. It does create all 3 columns. But <em>identifier</em> is null.</p>\n<p>I did notice in the jakarta docs that @GeneratedValue is only tested for primary keys, so maybe there's another annotation that would do the same for just a regular column?</p>\n<pre><code>@Entity\npublic class User {\n  @Id\n  @GeneratedValue(strategy = GenerationType.IDENTITY)\n  private Long id;\n\n  @GeneratedValue(strategy = GenerationType.UUID)\n  private String identifier;\n\n  private String name;\n\n  public User(String name) {\n    this.name = name;\n  }\n\n  public Long getId() {return id;}\n\n  public String getIdentifier() {return identifier;}\n\n  public String getName() {return name;}\n\n  protected User() {}\n}\n</code></pre>\n<p>And repository:</p>\n<pre><code>@Repository\npublic interface UserRepository extends CrudRepository&lt;User, Long&gt; {\n}\n</code></pre>\n"},{"tags":["java","azure","azure-sql-database","azure-sql-managed-instance","azure-managed-database"],"owner":{"account_id":15657825,"reputation":11,"user_id":11297529,"display_name":"SUBHASH V K"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":185,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1689861198,"creation_date":1589966005,"question_id":61909328,"body_markdown":"I am connecting to the Azure SQL managed instance using PUBLIC ENDPOINT by JDBC connection. It is connecting properly. I can able to read the data using JDBC. \r\n\r\nBut If I tried to connect the public endpoint of azure sql using SSH tunneling, I am getting the below for the same database, username and password.\r\n\r\n```\r\ncom.microsoft.sqlserver.jdbc.SQLServerException: Login failed for user &#39;xxx@xxxx&#39;. ClientConnectionId:afa7f609-ffa0-4f46-af76-6e908d02d05c\r\n\tat com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDatabaseError(SQLServerException.java:258)\r\n\tat com.microsoft.sqlserver.jdbc.TDSTokenHandler.onEOF(tdsparser.java:256)\r\n\tat com.microsoft.sqlserver.jdbc.TDSParser.parse(tdsparser.java:108)\r\n\tat com.microsoft.sqlserver.jdbc.SQLServerConnection.sendLogon(SQLServerConnection.java:4290)\r\n\tat com.microsoft.sqlserver.jdbc.SQLServerConnection.logon(SQLServerConnection.java:3157)\r\n\tat com.microsoft.sqlserver.jdbc.SQLServerConnection.access$100(SQLServerConnection.java:82)\r\n\tat com.microsoft.sqlserver.jdbc.SQLServerConnection$LogonCommand.doExecute(SQLServerConnection.java:3121)\r\n\tat com.microsoft.sqlserver.jdbc.TDSCommand.execute(IOBuffer.java:7151)\r\n\tat com.microsoft.sqlserver.jdbc.SQLServerConnection.executeCommand(SQLServerConnection.java:2478)\r\n\tat com.microsoft.sqlserver.jdbc.SQLServerConnection.connectHelper(SQLServerConnection.java:2026)\r\n\tat com.microsoft.sqlserver.jdbc.SQLServerConnection.login(SQLServerConnection.java:1687)\r\n\tat com.microsoft.sqlserver.jdbc.SQLServerConnection.connectInternal(SQLServerConnection.java:1528)\r\n\tat com.microsoft.sqlserver.jdbc.SQLServerConnection.connect(SQLServerConnection.java:866)\r\n\tat com.microsoft.sqlserver.jdbc.SQLServerDriver.connect(SQLServerDriver.java:569)\r\n\tat java.sql.DriverManager.getConnection(DriverManager.java:664)\r\n\tat java.sql.DriverManager.getConnection(DriverManager.java:247)\r\n\tat Main.main(Main.java:10)\r\n```\r\n\r\nEven in network security group, I enabled all the port. Can anyone help me regarding this?\r\n","title":"Azure managed instance connecting using ssh tunnelling","body":"<p>I am connecting to the Azure SQL managed instance using PUBLIC ENDPOINT by JDBC connection. It is connecting properly. I can able to read the data using JDBC. </p>\n\n<p>But If I tried to connect the public endpoint of azure sql using SSH tunneling, I am getting the below for the same database, username and password.</p>\n\n<pre><code>com.microsoft.sqlserver.jdbc.SQLServerException: Login failed for user 'xxx@xxxx'. ClientConnectionId:afa7f609-ffa0-4f46-af76-6e908d02d05c\n    at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDatabaseError(SQLServerException.java:258)\n    at com.microsoft.sqlserver.jdbc.TDSTokenHandler.onEOF(tdsparser.java:256)\n    at com.microsoft.sqlserver.jdbc.TDSParser.parse(tdsparser.java:108)\n    at com.microsoft.sqlserver.jdbc.SQLServerConnection.sendLogon(SQLServerConnection.java:4290)\n    at com.microsoft.sqlserver.jdbc.SQLServerConnection.logon(SQLServerConnection.java:3157)\n    at com.microsoft.sqlserver.jdbc.SQLServerConnection.access$100(SQLServerConnection.java:82)\n    at com.microsoft.sqlserver.jdbc.SQLServerConnection$LogonCommand.doExecute(SQLServerConnection.java:3121)\n    at com.microsoft.sqlserver.jdbc.TDSCommand.execute(IOBuffer.java:7151)\n    at com.microsoft.sqlserver.jdbc.SQLServerConnection.executeCommand(SQLServerConnection.java:2478)\n    at com.microsoft.sqlserver.jdbc.SQLServerConnection.connectHelper(SQLServerConnection.java:2026)\n    at com.microsoft.sqlserver.jdbc.SQLServerConnection.login(SQLServerConnection.java:1687)\n    at com.microsoft.sqlserver.jdbc.SQLServerConnection.connectInternal(SQLServerConnection.java:1528)\n    at com.microsoft.sqlserver.jdbc.SQLServerConnection.connect(SQLServerConnection.java:866)\n    at com.microsoft.sqlserver.jdbc.SQLServerDriver.connect(SQLServerDriver.java:569)\n    at java.sql.DriverManager.getConnection(DriverManager.java:664)\n    at java.sql.DriverManager.getConnection(DriverManager.java:247)\n    at Main.main(Main.java:10)\n</code></pre>\n\n<p>Even in network security group, I enabled all the port. Can anyone help me regarding this?</p>\n"},{"tags":["java","spring","completable-future","threadpoolexecutor"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1689859933,"post_id":76730376,"comment_id":135275258,"body_markdown":"What does &quot;stops working&quot; mean? What does a thread dump tell you?","body":"What does &quot;stops working&quot; mean? What does a thread dump tell you?"},{"owner":{"account_id":9885814,"reputation":1371,"user_id":7320372,"display_name":"Thomas Lang"},"score":0,"creation_date":1689862192,"post_id":76730376,"comment_id":135275810,"body_markdown":"I&#180;ve added two flags to my `Executor`: `threadPoolTaskExecutor.setAllowCoreThreadTimeOut(true);`\n\t\t`threadPoolTaskExecutor.setDaemon(true);` It seems that this does the job ... I will investigate further","body":"I&#180;ve added two flags to my <code>Executor</code>: <code>threadPoolTaskExecutor.setAllowCoreThreadTimeOut(true);</code> \t\t<code>threadPoolTaskExecutor.setDaemon(true);</code> It seems that this does the job ... I will investigate further"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1689862830,"post_id":76730376,"comment_id":135275985,"body_markdown":"Why are you passing in the executor instead of wiring it into the class? Another thing is that if you are using this with Spring Boot this will also be used for handling web requests (the async part) so you are now filling it up twice as fast as before (Spring Boot starts a default executor but you ahve overridden that now).","body":"Why are you passing in the executor instead of wiring it into the class? Another thing is that if you are using this with Spring Boot this will also be used for handling web requests (the async part) so you are now filling it up twice as fast as before (Spring Boot starts a default executor but you ahve overridden that now)."},{"owner":{"account_id":9885814,"reputation":1371,"user_id":7320372,"display_name":"Thomas Lang"},"score":0,"creation_date":1689863958,"post_id":76730376,"comment_id":135276304,"body_markdown":"@M.Deinum You&#180;re right. This needs polish (Autowiring the executor). What i wanted to check is if there are performance gains while using a dedicated Executor as stated here: https://docs.spring.io/spring-framework/reference/integration/scheduling.html#scheduling-task-executor or going with the integrated one. As for now i cannot measure any gain in using the dedicated one.","body":"@M.Deinum You&#180;re right. This needs polish (Autowiring the executor). What i wanted to check is if there are performance gains while using a dedicated Executor as stated here: <a href=\"https://docs.spring.io/spring-framework/reference/integration/scheduling.html#scheduling-task-executor\" rel=\"nofollow noreferrer\">docs.spring.io/spring-framework/reference/integration/&hellip;</a> or going with the integrated one. As for now i cannot measure any gain in using the dedicated one."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1689877306,"post_id":76730376,"comment_id":135279225,"body_markdown":"Because you now have 1 executor that is used for 2 things (Spring MVC Async **and** kicking of tasks), in the first sample you have 2 (1 used by the Spring MVC async support and one for doing the tasks) instead of 1. Not counting the one from Tomcat that is. Also don&#39;t use deamon threads use regular ones.","body":"Because you now have 1 executor that is used for 2 things (Spring MVC Async <b>and</b> kicking of tasks), in the first sample you have 2 (1 used by the Spring MVC async support and one for doing the tasks) instead of 1. Not counting the one from Tomcat that is. Also don&#39;t use deamon threads use regular ones."}],"owner":{"account_id":9885814,"reputation":1371,"user_id":7320372,"display_name":"Thomas Lang"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689860186,"creation_date":1689859490,"question_id":76730376,"body_markdown":"I have this 2 pieces of code:\r\n\r\n1.\r\n```java\r\n    @Override\r\n    @Async\r\n    public CompletableFuture&lt;List&lt;Activity&gt;&gt; findAllAndMakeAFuture() {\r\n        return CompletableFuture.supplyAsync(() -&gt; {\r\n            log.info(&quot;Current thread: {}&quot;, Thread.currentThread());\r\n            return activityRepository.findsAll();\r\n        });\r\n    }\r\n```\r\n\r\n2. \r\n```java\r\n    @Override\r\n    @Async\r\n    public CompletableFuture&lt;List&lt;Activity&gt;&gt; findAllAndMakeAFutureWithDedicatedExecutor(Executor executor) {\r\n        return CompletableFuture.supplyAsync(() -&gt; {\r\n            log.info(&quot;Current thread: {}&quot;, Thread.currentThread());\r\n            return activityRepository.findsAll();\r\n        }, executor);\r\n    }\r\n```\r\n\r\nI have this dedicated `ThreadPoolTaskExecutor`\r\n```java\r\n@Bean\r\nExecutor executor() {\r\n    ThreadPoolTaskExecutor threadPoolTaskExecutor = new ThreadPoolTaskExecutor();\r\n    threadPoolTaskExecutor.setCorePoolSize(48);\r\n    threadPoolTaskExecutor.setMaxPoolSize(48);\r\n    threadPoolTaskExecutor.setQueueCapacity(10000);\r\n}\r\n```\r\n\r\nI have an Apache jMeter Test where i query http endpoints for the code in 1. and 2.\r\n\r\nWhen i use 200 threads in jMeter for code 1., everything works fine.\r\n\r\nWhen i use the same query for code 2., at some point my application stops working without giving an exception.\r\n\r\nWhen i lower the threads from 200 to 100 code 1. and 2. works.\r\n\r\nIt seems that the usage of my dedicated `Executor` stops working.\r\n\r\nDo you know any limitations of using dedicated `Executors`? \r\n\r\nWhen i use this as my dedicated executor - even code 2. runs without any issue: `Executors.newCachedThreadPool()`\r\n\r\n**Edit:**\r\n\r\nStop working means there are no logger outputs. With every call to `activityRepository.findsAll()` i&#180;ll do a log output how much time it takes to fetch the data. This output is not there anymore.\r\n\r\nFurthermore Apache jMeter does not stop automatically the query.\r\n\r\nI didn&#180;t do any further investigation (like thread dump) cause i can say that the issue has something to do with exclusive usage of the dedicated `Executor` bean in code 2.","title":"Dedicated Executor stops working after a certain amount of submitted threads","body":"<p>I have this 2 pieces of code:</p>\n<p>1.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Override\n    @Async\n    public CompletableFuture&lt;List&lt;Activity&gt;&gt; findAllAndMakeAFuture() {\n        return CompletableFuture.supplyAsync(() -&gt; {\n            log.info(&quot;Current thread: {}&quot;, Thread.currentThread());\n            return activityRepository.findsAll();\n        });\n    }\n</code></pre>\n<ol start=\"2\">\n<li></li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>    @Override\n    @Async\n    public CompletableFuture&lt;List&lt;Activity&gt;&gt; findAllAndMakeAFutureWithDedicatedExecutor(Executor executor) {\n        return CompletableFuture.supplyAsync(() -&gt; {\n            log.info(&quot;Current thread: {}&quot;, Thread.currentThread());\n            return activityRepository.findsAll();\n        }, executor);\n    }\n</code></pre>\n<p>I have this dedicated <code>ThreadPoolTaskExecutor</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\nExecutor executor() {\n    ThreadPoolTaskExecutor threadPoolTaskExecutor = new ThreadPoolTaskExecutor();\n    threadPoolTaskExecutor.setCorePoolSize(48);\n    threadPoolTaskExecutor.setMaxPoolSize(48);\n    threadPoolTaskExecutor.setQueueCapacity(10000);\n}\n</code></pre>\n<p>I have an Apache jMeter Test where i query http endpoints for the code in 1. and 2.</p>\n<p>When i use 200 threads in jMeter for code 1., everything works fine.</p>\n<p>When i use the same query for code 2., at some point my application stops working without giving an exception.</p>\n<p>When i lower the threads from 200 to 100 code 1. and 2. works.</p>\n<p>It seems that the usage of my dedicated <code>Executor</code> stops working.</p>\n<p>Do you know any limitations of using dedicated <code>Executors</code>?</p>\n<p>When i use this as my dedicated executor - even code 2. runs without any issue: <code>Executors.newCachedThreadPool()</code></p>\n<p><strong>Edit:</strong></p>\n<p>Stop working means there are no logger outputs. With every call to <code>activityRepository.findsAll()</code> i´ll do a log output how much time it takes to fetch the data. This output is not there anymore.</p>\n<p>Furthermore Apache jMeter does not stop automatically the query.</p>\n<p>I didn´t do any further investigation (like thread dump) cause i can say that the issue has something to do with exclusive usage of the dedicated <code>Executor</code> bean in code 2.</p>\n"},{"tags":["python","java","c++","algorithm","performance"],"comments":[{"owner":{"account_id":27908218,"reputation":420,"user_id":21310959,"display_name":"Eldinur the Kolibri"},"score":0,"creation_date":1687983033,"post_id":76576390,"comment_id":135014615,"body_markdown":"What &quot;anecdotes&quot; did you come across?","body":"What &quot;anecdotes&quot; did you come across?"},{"owner":{"account_id":7815078,"reputation":30704,"user_id":5910058,"display_name":"Jesper Juhl"},"score":1,"creation_date":1687983073,"post_id":76576390,"comment_id":135014624,"body_markdown":"Are you compiling your C++ code with compiler optimizations enabled? Link Time Optimizations (LTO) enabled? If not, you should do that before benchmarking.","body":"Are you compiling your C++ code with compiler optimizations enabled? Link Time Optimizations (LTO) enabled? If not, you should do that before benchmarking."},{"owner":{"account_id":3817483,"reputation":1869,"user_id":3166476,"accept_rate":0,"display_name":"lakeweb"},"score":1,"creation_date":1687983196,"post_id":76576390,"comment_id":135014645,"body_markdown":"Yes, c++ is as much machine code as it gets. You should not time the console output, that is arbitrary. Just the prime hunt algorithm.","body":"Yes, c++ is as much machine code as it gets. You should not time the console output, that is arbitrary. Just the prime hunt algorithm."},{"owner":{"account_id":5809836,"reputation":33195,"user_id":4581301,"display_name":"user4581301"},"score":0,"creation_date":1687983302,"post_id":76576390,"comment_id":135014660,"body_markdown":"One thing that C++ will try to do is compute as much as possible at compile time. It is conceivable that the compiler will generate all of the prime numbers up to 1000 and store them, serving up the results at runtime.","body":"One thing that C++ will try to do is compute as much as possible at compile time. It is conceivable that the compiler will generate all of the prime numbers up to 1000 and store them, serving up the results at runtime."},{"owner":{"account_id":5809836,"reputation":33195,"user_id":4581301,"display_name":"user4581301"},"score":1,"creation_date":1687983662,"post_id":76576390,"comment_id":135014711,"body_markdown":"Side note: good performance comes from good algorithms and brute force computation of primes is far from good. Look into prime number sieves.","body":"Side note: good performance comes from good algorithms and brute force computation of primes is far from good. Look into prime number sieves."},{"owner":{"account_id":7568679,"reputation":24484,"user_id":5743288,"display_name":"Paul Sanders"},"score":1,"creation_date":1687983763,"post_id":76576390,"comment_id":135014734,"body_markdown":"@slothrop You might find [this](https://medium.com/nerd-for-tech/jit-java-just-in-time-jit-compiler-af1cc86fe53b) interesting.  Under the right conditions, Java can be faster than C++ (although, probably, usually isn&#39;t).","body":"@slothrop You might find <a href=\"https://medium.com/nerd-for-tech/jit-java-just-in-time-jit-compiler-af1cc86fe53b\" rel=\"nofollow noreferrer\">this</a> interesting.  Under the right conditions, Java can be faster than C++ (although, probably, usually isn&#39;t)."},{"owner":{"account_id":2020196,"reputation":1132,"user_id":1806566,"accept_rate":88,"display_name":"user1806566"},"score":2,"creation_date":1687983890,"post_id":76576390,"comment_id":135014760,"body_markdown":"A compiled language like C++ (or C or FORTRAN) will most often be much faster than an interpreted language.  The compiler translates what you wrote into machine code that runs directly on the hardware.  In an interpreted language like Python or Java (which is compiled into byte code, which is then interpreted), the hardware is actually running an interpreter which needs to fetch instructions, translate them into machine code, and execute them at runtime.  Interpreted languages have many advantages, but performance isn&#39;t typically one of them.","body":"A compiled language like C++ (or C or FORTRAN) will most often be much faster than an interpreted language.  The compiler translates what you wrote into machine code that runs directly on the hardware.  In an interpreted language like Python or Java (which is compiled into byte code, which is then interpreted), the hardware is actually running an interpreter which needs to fetch instructions, translate them into machine code, and execute them at runtime.  Interpreted languages have many advantages, but performance isn&#39;t typically one of them."},{"owner":{"account_id":399622,"reputation":4096,"user_id":765091,"display_name":"slothrop"},"score":1,"creation_date":1687983900,"post_id":76576390,"comment_id":135014763,"body_markdown":"@PaulSanders For integer operations, no. It uses arbitrary precision integers, which probably does create a bit of an overhead for problems where you can tell C++ to use an int32 (or whatever size).","body":"@PaulSanders For integer operations, no. It uses arbitrary precision integers, which probably does create a bit of an overhead for problems where you can tell C++ to use an int32 (or whatever size)."},{"owner":{"account_id":7568679,"reputation":24484,"user_id":5743288,"display_name":"Paul Sanders"},"score":0,"creation_date":1687984016,"post_id":76576390,"comment_id":135014785,"body_markdown":"@slothrop Ah yes, I remember now.  Bound to add some overhead, if precision &gt; 64","body":"@slothrop Ah yes, I remember now.  Bound to add some overhead, if precision &gt; 64"},{"owner":{"account_id":6475833,"reputation":90585,"user_id":5014455,"display_name":"juanpa.arrivillaga"},"score":1,"creation_date":1687984718,"post_id":76576390,"comment_id":135014908,"body_markdown":"@PaulSanders perhaps more importantly, everytime you do something like `mylist.append` in python, that is a very expensive (relative to C++ or Java) dynamic lookup. Just consider [this](https://docs.python.org/3/howto/descriptor.html#invocation-from-an-instance)","body":"@PaulSanders perhaps more importantly, everytime you do something like <code>mylist.append</code> in python, that is a very expensive (relative to C++ or Java) dynamic lookup. Just consider <a href=\"https://docs.python.org/3/howto/descriptor.html#invocation-from-an-instance\" rel=\"nofollow noreferrer\">this</a>"},{"owner":{"account_id":7568679,"reputation":24484,"user_id":5743288,"display_name":"Paul Sanders"},"score":0,"creation_date":1687988680,"post_id":76576390,"comment_id":135015452,"body_markdown":"@juanpa.arrivillaga interesting, thanks.  Built more for comfort than for speed","body":"@juanpa.arrivillaga interesting, thanks.  Built more for comfort than for speed"},{"owner":{"account_id":2968584,"reputation":50571,"user_id":2521214,"accept_rate":71,"display_name":"Spektre"},"score":3,"creation_date":1687989527,"post_id":76576390,"comment_id":135015545,"body_markdown":"C++ is usually compiled, JAVA is virtual machine emulation and Python is interpreter ... so its not really  a matter of programing language but the form of execution of code ...","body":"C++ is usually compiled, JAVA is virtual machine emulation and Python is interpreter ... so its not really  a matter of programing language but the form of execution of code ..."},{"owner":{"account_id":79346,"reputation":57079,"user_id":225074,"accept_rate":91,"display_name":"Thomas Matthews"},"score":0,"creation_date":1687991277,"post_id":76576390,"comment_id":135015730,"body_markdown":"Let&#39;s talk about garbage collection.  Java supports garbage collection, which may impact performance measurements for large applications (or large iterations).  As others have said, your programs should perform more computations than output and a sampling of different types of computations.  Python and Java may have more or better optimization for text handling than C++.  C++ isn&#39;t specialized, but written for general cases.","body":"Let&#39;s talk about garbage collection.  Java supports garbage collection, which may impact performance measurements for large applications (or large iterations).  As others have said, your programs should perform more computations than output and a sampling of different types of computations.  Python and Java may have more or better optimization for text handling than C++.  C++ isn&#39;t specialized, but written for general cases."},{"owner":{"account_id":7815078,"reputation":30704,"user_id":5910058,"display_name":"Jesper Juhl"},"score":1,"creation_date":1688008729,"post_id":76576390,"comment_id":135017022,"body_markdown":"&quot;I understand that C++ is usually compiled&quot; - That&#39;s a severe understatement. C++ is compiled in 99.999% of all cases. Yes C++ interpreters do exist, but noone uses them for anything serious - C++ is a compiled language.","body":"&quot;I understand that C++ is usually compiled&quot; - That&#39;s a severe understatement. C++ is compiled in 99.999% of all cases. Yes C++ interpreters do exist, but noone uses them for anything serious - C++ is a compiled language."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1688020457,"post_id":76576390,"comment_id":135018108,"body_markdown":"Note for Java: For benchmarks you should really use a framework like JMH; among other things, it ensures the JVM has &quot;warmed up&quot; (i.e., the JIT compiler has had time to analyze and optimize the code).","body":"Note for Java: For benchmarks you should really use a framework like JMH; among other things, it ensures the JVM has &quot;warmed up&quot; (i.e., the JIT compiler has had time to analyze and optimize the code)."},{"owner":{"account_id":20650084,"reputation":2646,"user_id":15160601,"display_name":"zoldxk"},"score":0,"creation_date":1688845581,"post_id":76576390,"comment_id":135129750,"body_markdown":"At how many downvotes should I delete this question ?","body":"At how many downvotes should I delete this question ?"},{"owner":{"account_id":3359942,"reputation":4710,"user_id":2821954,"display_name":"Andrew T."},"score":0,"creation_date":1688876808,"post_id":76576390,"comment_id":135131763,"body_markdown":"@zoldxk you can&#39;t delete questions with upvoted answers though.","body":"@zoldxk you can&#39;t delete questions with upvoted answers though."}],"answers":[{"comments":[{"owner":{"account_id":17476274,"reputation":25137,"user_id":12671057,"display_name":"Kelly Bundy"},"score":1,"creation_date":1687988920,"post_id":76576594,"comment_id":135015480,"body_markdown":"You skipped an important step: Before benchmarking at all, make sure that the programs are correct. Which is not the case here.","body":"You skipped an important step: Before benchmarking at all, make sure that the programs are correct. Which is not the case here."},{"owner":{"account_id":17476274,"reputation":25137,"user_id":12671057,"display_name":"Kelly Bundy"},"score":0,"creation_date":1687989110,"post_id":76576594,"comment_id":135015505,"body_markdown":"Ah well, they just fixed it, now the programs *might* actually be correct and equivalent.","body":"Ah well, they just fixed it, now the programs <i>might</i> actually be correct and equivalent."},{"owner":{"account_id":60200,"reputation":479685,"user_id":179910,"display_name":"Jerry Coffin"},"score":0,"creation_date":1687989126,"post_id":76576594,"comment_id":135015507,"body_markdown":"@KellyBundy: That...depends. When/if you actually care about the time taken to carry out some particular operation, then yes, being correct matters. But many synthetic benchmarks don&#39;t compute any useful result. For them, it matters that all implementations are *equivalent*, but the results aren&#39;t necessarily a &quot;correct&quot; implementation of any computation that&#39;s useful in itself.","body":"@KellyBundy: That...depends. When/if you actually care about the time taken to carry out some particular operation, then yes, being correct matters. But many synthetic benchmarks don&#39;t compute any useful result. For them, it matters that all implementations are <i>equivalent</i>, but the results aren&#39;t necessarily a &quot;correct&quot; implementation of any computation that&#39;s useful in itself."},{"owner":{"account_id":17476274,"reputation":25137,"user_id":12671057,"display_name":"Kelly Bundy"},"score":0,"creation_date":1687989490,"post_id":76576594,"comment_id":135015540,"body_markdown":"Ah, actually they messed it up again, now the Python code computes yen times more primes. Sigh.","body":"Ah, actually they messed it up again, now the Python code computes yen times more primes. Sigh."},{"owner":{"account_id":17476274,"reputation":25137,"user_id":12671057,"display_name":"Kelly Bundy"},"score":2,"creation_date":1687989795,"post_id":76576594,"comment_id":135015575,"body_markdown":"Yes, I had actually written &quot;or at least equivalent&quot;, just removed it for brevity. In my opinion, if they&#39;re supposed to be equivalent but aren&#39;t, then at least one of them is wrong. Even for such synthetic benchmarks.","body":"Yes, I had actually written &quot;or at least equivalent&quot;, just removed it for brevity. In my opinion, if they&#39;re supposed to be equivalent but aren&#39;t, then at least one of them is wrong. Even for such synthetic benchmarks."},{"owner":{"account_id":60200,"reputation":479685,"user_id":179910,"display_name":"Jerry Coffin"},"score":0,"creation_date":1687992162,"post_id":76576594,"comment_id":135015807,"body_markdown":"@KellyBundy: Yes, comparing like for like is important (and defining like for like isn&#39;t always trivial either).","body":"@KellyBundy: Yes, comparing like for like is important (and defining like for like isn&#39;t always trivial either)."},{"owner":{"account_id":17476274,"reputation":25137,"user_id":12671057,"display_name":"Kelly Bundy"},"score":0,"creation_date":1687992659,"post_id":76576594,"comment_id":135015843,"body_markdown":"*&quot;modern CPUs can execute instructions out of order&quot;* - How much out of order does that get? Only a few or a few dozen instructions (which would be insignificant here) or far more?","body":"<i>&quot;modern CPUs can execute instructions out of order&quot;</i> - How much out of order does that get? Only a few or a few dozen instructions (which would be insignificant here) or far more?"},{"owner":{"account_id":60200,"reputation":479685,"user_id":179910,"display_name":"Jerry Coffin"},"score":0,"creation_date":1687994845,"post_id":76576594,"comment_id":135016028,"body_markdown":"@KellyBundy: usually only a *fairly* small number.","body":"@KellyBundy: usually only a <i>fairly</i> small number."},{"owner":{"account_id":4680926,"reputation":2259,"user_id":3789665,"accept_rate":57,"display_name":"greybeard"},"score":0,"creation_date":1688027465,"post_id":76576594,"comment_id":135019484,"body_markdown":"Not only can a Python variable be assigned values of different types: objects can be morphed from one class to another: `n = AVL_node()   type(n)   if ‹left is higher now›: n.__class__ = Left_leaning   type(n)`.","body":"Not only can a Python variable be assigned values of different types: objects can be morphed from one class to another: <code>n = AVL_node()   type(n)   if ‹left is higher now›: n.__class__ = Left_leaning   type(n)</code>."}],"tags":[],"owner":{"account_id":60200,"reputation":479685,"user_id":179910,"display_name":"Jerry Coffin"},"comment_count":9,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1687988461,"creation_date":1687985006,"answer_id":76576594,"question_id":76576390,"body_markdown":"Let me start (and maybe finish--not sure how ambitious I&#39;ll be) with a digression.\r\n\r\n### Benchmarking is Hard\r\n\r\nBased on the times you&#39;re getting, it appears likely to me that you&#39;re timing execution of the entire program. Unfortunately, this is almost certainly dominated by the time taken to write the data to standard output, so if (for example) you redirected output to a file, chances are pretty good it would run a *lot* faster. Depending on testing environment and such, it would be fairly easy for this to produce fairly misleading results.\r\n\r\nJust for example, I&#39;d guess you&#39;re timing this under Windows, which has fairly slow console output. When I run your Python code under Linux, I get a time of 0.108 seconds--Python running faster than you got for C++. But that&#39;s almost certainly due primarily to Linux having much faster console output than Windows, not anything related to Python or C++ themselves at all.\r\n\r\nLet&#39;s time just the computation part of the C++ and see what we get.\r\n\r\n```cpp\r\n// preceding code as you wrote it\r\n\r\nint main() {\r\n    int n = 1000;\r\n    using namespace std::chrono; // added\r\n\r\n    auto start = high_resolution_clock::now(); // added\r\n\r\n    std::vector&lt;int&gt; primeNumbers = generatePrimes(n);\r\n\r\n    auto stop = high_resolution_clock::now(); //added\r\n\r\n    std::cout &lt;&lt; &quot;First &quot; &lt;&lt; n &lt;&lt; &quot; prime numbers: &quot;;\r\n    for (int prime : primeNumbers) {\r\n        std::cout &lt;&lt; prime &lt;&lt; &quot; &quot;;\r\n    }    \r\n    std::cout &lt;&lt; std::endl;\r\n\r\n    // added:\r\n    std::cout &lt;&lt; &quot;Time: &quot; &lt;&lt; duration_cast&lt;microseconds&gt;(stop-start).count() &lt;&lt; &quot;us\\n&quot;;\r\n    return 0;\r\n}\r\n```\r\n\r\nOn my machine (which isn&#39;t particularly fast) I get:\r\n\r\nTime: 394us\r\n\r\nSo even though the program took much longer to run, essentially all of that was consumed with displaying the output. The actual computation took only 0.394 milliseconds--a tiny fraction of the overall time.\r\n\r\nIt is still important to write out that result though--if you don&#39;t write out the result, the compiler can often detect that you&#39;re not using, it, and simply not compute it at all.\r\n\r\nEven with the additions I made, the timing may easily be less than perfect, to put to mildly. In particular, modern CPUs can execute instructions out of order, so it&#39;s possible that the computation started before I grabbed the start time and/or finished after I grabbed the stop time. This can also be prevented, but it&#39;s more difficult (and in this case, doing a quick calculation of how much time it *should* take, I&#39;d guess what the clock produced is at least reasonably accurate). But you often have to start with at least a decent guess at what you&#39;ve expecting, and if your result is off by a significant factor, you may need to look at things more carefully.\r\n\r\n### C++ vs. Python\r\n\r\nThe big difference between C++ and Python hinges around dynamic vs. static typing. In Python, a variable can be attached to a value of any type, and that type can change over its lifetime. For example, we can perfectly legally have some variable `a` that holds a number at one time, and string at a different time.\r\n\r\n```python\r\na = 3\r\nprint(a, type(a))\r\na = &quot;three&quot;\r\nprint(a, type(a))\r\n```\r\n\r\nResult:\r\n```\r\n3 &lt;class &#39;int&#39;&gt;\r\nthree &lt;class &#39;str&#39;&gt;\r\n```\r\n\r\nBecause of this, when you do almost any operation in Python, the code has to look up (at runtime) the type of each variable, to figure out what actual operation is being done, because the operation it carries out depends on their types.\r\n\r\nIn C++ types are mostly static (though you can use `std::any&lt;&gt;` and `std::variant&lt;&gt;` to get at least a limited imitation of dynamic types). Certainly the types in your code are entirely static. That means the compiler has done that lookup of what operation to apply to the operands at *compile* time, so it doesn&#39;t affect execution time at all.\r\n\r\nIn this case, you&#39;re doing a large number of simple operations. In the Python code, it&#39;s quite likely that most of the time is really spent looking up operand types, and figuring out what actions are appropriate for those operands, and only a small fraction of the time to actually doing the operation itself.\r\n\r\nNow, it is true that a sufficiently smart implementation of Python could often (probably even usually) infer types ahead of time. When I execute something like `a = 7`, `a` is obviously an `int`. Based on the operations applied to `a` afterwards, it could often track what type `a` is going to have throughout its lifetime, and generate code specifically for that type.\r\n\r\nSo, much of the speed penalty isn&#39;t necessarily inherent to Python as a language, only to the most common implementation(s) of it. At least theoretically, an implementation could be written that would probably provide performance much closer to C++ (especially for code like you&#39;ve written where nothing depends on user inputs).\r\n\r\nMy guess, however, is that the average Pythonista&#39;s reaction to doing this would generally be: &quot;if you want C++, you know where to find it.&quot; At least for the vast majority of them, there are more important ways to spend that time and effort (and it would be a lot of time and effort).","title":"Understanding the Performance Advantages of C++ over Other Languages","body":"<p>Let me start (and maybe finish--not sure how ambitious I'll be) with a digression.</p>\n<h3>Benchmarking is Hard</h3>\n<p>Based on the times you're getting, it appears likely to me that you're timing execution of the entire program. Unfortunately, this is almost certainly dominated by the time taken to write the data to standard output, so if (for example) you redirected output to a file, chances are pretty good it would run a <em>lot</em> faster. Depending on testing environment and such, it would be fairly easy for this to produce fairly misleading results.</p>\n<p>Just for example, I'd guess you're timing this under Windows, which has fairly slow console output. When I run your Python code under Linux, I get a time of 0.108 seconds--Python running faster than you got for C++. But that's almost certainly due primarily to Linux having much faster console output than Windows, not anything related to Python or C++ themselves at all.</p>\n<p>Let's time just the computation part of the C++ and see what we get.</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>// preceding code as you wrote it\n\nint main() {\n    int n = 1000;\n    using namespace std::chrono; // added\n\n    auto start = high_resolution_clock::now(); // added\n\n    std::vector&lt;int&gt; primeNumbers = generatePrimes(n);\n\n    auto stop = high_resolution_clock::now(); //added\n\n    std::cout &lt;&lt; &quot;First &quot; &lt;&lt; n &lt;&lt; &quot; prime numbers: &quot;;\n    for (int prime : primeNumbers) {\n        std::cout &lt;&lt; prime &lt;&lt; &quot; &quot;;\n    }    \n    std::cout &lt;&lt; std::endl;\n\n    // added:\n    std::cout &lt;&lt; &quot;Time: &quot; &lt;&lt; duration_cast&lt;microseconds&gt;(stop-start).count() &lt;&lt; &quot;us\\n&quot;;\n    return 0;\n}\n</code></pre>\n<p>On my machine (which isn't particularly fast) I get:</p>\n<p>Time: 394us</p>\n<p>So even though the program took much longer to run, essentially all of that was consumed with displaying the output. The actual computation took only 0.394 milliseconds--a tiny fraction of the overall time.</p>\n<p>It is still important to write out that result though--if you don't write out the result, the compiler can often detect that you're not using, it, and simply not compute it at all.</p>\n<p>Even with the additions I made, the timing may easily be less than perfect, to put to mildly. In particular, modern CPUs can execute instructions out of order, so it's possible that the computation started before I grabbed the start time and/or finished after I grabbed the stop time. This can also be prevented, but it's more difficult (and in this case, doing a quick calculation of how much time it <em>should</em> take, I'd guess what the clock produced is at least reasonably accurate). But you often have to start with at least a decent guess at what you've expecting, and if your result is off by a significant factor, you may need to look at things more carefully.</p>\n<h3>C++ vs. Python</h3>\n<p>The big difference between C++ and Python hinges around dynamic vs. static typing. In Python, a variable can be attached to a value of any type, and that type can change over its lifetime. For example, we can perfectly legally have some variable <code>a</code> that holds a number at one time, and string at a different time.</p>\n<pre class=\"lang-py prettyprint-override\"><code>a = 3\nprint(a, type(a))\na = &quot;three&quot;\nprint(a, type(a))\n</code></pre>\n<p>Result:</p>\n<pre><code>3 &lt;class 'int'&gt;\nthree &lt;class 'str'&gt;\n</code></pre>\n<p>Because of this, when you do almost any operation in Python, the code has to look up (at runtime) the type of each variable, to figure out what actual operation is being done, because the operation it carries out depends on their types.</p>\n<p>In C++ types are mostly static (though you can use <code>std::any&lt;&gt;</code> and <code>std::variant&lt;&gt;</code> to get at least a limited imitation of dynamic types). Certainly the types in your code are entirely static. That means the compiler has done that lookup of what operation to apply to the operands at <em>compile</em> time, so it doesn't affect execution time at all.</p>\n<p>In this case, you're doing a large number of simple operations. In the Python code, it's quite likely that most of the time is really spent looking up operand types, and figuring out what actions are appropriate for those operands, and only a small fraction of the time to actually doing the operation itself.</p>\n<p>Now, it is true that a sufficiently smart implementation of Python could often (probably even usually) infer types ahead of time. When I execute something like <code>a = 7</code>, <code>a</code> is obviously an <code>int</code>. Based on the operations applied to <code>a</code> afterwards, it could often track what type <code>a</code> is going to have throughout its lifetime, and generate code specifically for that type.</p>\n<p>So, much of the speed penalty isn't necessarily inherent to Python as a language, only to the most common implementation(s) of it. At least theoretically, an implementation could be written that would probably provide performance much closer to C++ (especially for code like you've written where nothing depends on user inputs).</p>\n<p>My guess, however, is that the average Pythonista's reaction to doing this would generally be: &quot;if you want C++, you know where to find it.&quot; At least for the vast majority of them, there are more important ways to spend that time and effort (and it would be a lot of time and effort).</p>\n"}],"owner":{"account_id":20650084,"reputation":2646,"user_id":15160601,"display_name":"zoldxk"},"comment_count":17,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":372,"favorite_count":0,"down_vote_count":10,"up_vote_count":5,"closed_date":1687987583,"answer_count":1,"score":-5,"last_activity_date":1689859640,"creation_date":1687982745,"question_id":76576390,"body_markdown":"Why does C++ generally exhibit better execution speed than Java and Python? What factors contribute to this performance disparity? I conducted a series of tests to compare the execution speeds of these languages and seek a deeper understanding of the underlying reasons.\r\n\r\nContext: As a computer science student, I have been exploring various programming languages to comprehend their performance characteristics. Through my experiments, I have consistently observed that C++ tends to outperform Java and Python in terms of execution speed. However, I desire a comprehensive understanding of the factors contributing to this performance difference.\r\n\r\nHardware and Compilation Details: To ensure a fair comparison, I executed the same algorithm using identical logic and datasets across all three languages. The experiments were conducted on a system equipped with an Intel Core i7 processor (8 cores) and 16 GB of RAM.\r\n\r\nFor the C++ code, I utilized GCC 10.2.0 with the following compilation flags:\r\n\r\n`g++ -O3 -march=native -mtune=native -std=c++17 -o program program.cpp`\r\n\r\nJava was executed using OpenJDK 11.0.1 with the following command:\r\n\r\n`java -Xmx8G -Xms8G Program`\r\n\r\nPython code was executed using Python 3.9.0 as follows:\r\n\r\n`python3 program.py`\r\nC++ code:\r\n\r\n```\r\n#include &lt;iostream&gt;\r\n#include &lt;chrono&gt;\r\n#include &lt;vector&gt;\r\n#include &lt;random&gt;\r\n\r\n// Function to generate a random matrix of size m x n\r\nstd::vector&lt;std::vector&lt;int&gt;&gt; generateRandomMatrix(int m, int n) {\r\n    std::vector&lt;std::vector&lt;int&gt;&gt; matrix(m, std::vector&lt;int&gt;(n));\r\n    std::random_device rd;\r\n    std::mt19937 gen(rd());\r\n    std::uniform_int_distribution&lt;&gt; dis(1, 100);\r\n\r\n    for (int i = 0; i &lt; m; ++i) {\r\n        for (int j = 0; j &lt; n; ++j) {\r\n            matrix[i][j] = dis(gen);\r\n        }\r\n    }\r\n\r\n    return matrix;\r\n}\r\n\r\n// Matrix multiplication function\r\nstd::vector&lt;std::vector&lt;int&gt;&gt; matrixMultiplication(const std::vector&lt;std::vector&lt;int&gt;&gt;&amp; A, const std::vector&lt;std::vector&lt;int&gt;&gt;&amp; B) {\r\n    int m = A.size();\r\n    int n = B[0].size();\r\n    int k = B.size();\r\n\r\n    std::vector&lt;std::vector&lt;int&gt;&gt; result(m, std::vector&lt;int&gt;(n, 0));\r\n\r\n    for (int i = 0; i &lt; m; ++i) {\r\n        for (int j = 0; j &lt; n; ++j) {\r\n            for (int x = 0; x &lt; k; ++x) {\r\n                result[i][j] += A[i][x] * B[x][j];\r\n            }\r\n        }\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\nint main() {\r\n    // Generate random matrices A and B of size 3 x 3\r\n    std::vector&lt;std::vector&lt;int&gt;&gt; A = generateRandomMatrix(3, 3);\r\n    std::vector&lt;std::vector&lt;int&gt;&gt; B = generateRandomMatrix(3, 3);\r\n\r\n    // Measure execution time\r\n    auto start = std::chrono::steady_clock::now();\r\n\r\n    // Perform matrix multiplication\r\n    std::vector&lt;std::vector&lt;int&gt;&gt; result = matrixMultiplication(A, B);\r\n\r\n    auto end = std::chrono::steady_clock::now();\r\n    auto duration = std::chrono::duration_cast&lt;std::chrono::microseconds&gt;(end - start).count();\r\n\r\n    std::cout &lt;&lt; &quot;Execution time (C++): &quot; &lt;&lt; duration &lt;&lt; &quot; microseconds&quot; &lt;&lt; std::endl;\r\n\r\n    return 0;\r\n}\r\n\r\n```\r\nJava code:\r\n```\r\nimport java.util.Arrays;\r\nimport java.util.Random;\r\n\r\npublic class Program {\r\n    // Function to generate a random matrix of size m x n\r\n    public static int[][] generateRandomMatrix(int m, int n) {\r\n        int[][] matrix = new int[m][n];\r\n        Random random = new Random();\r\n\r\n        for (int i = 0; i &lt; m; ++i) {\r\n            for (int j = 0; j &lt; n; ++j) {\r\n                matrix[i][j] = random.nextInt(100) + 1;\r\n            }\r\n        }\r\n\r\n        return matrix;\r\n    }\r\n\r\n    // Matrix multiplication function\r\n    public static int[][] matrixMultiplication(int[][] A, int[][] B) {\r\n        int m = A.length;\r\n        int n = B[0].length;\r\n        int k = B.length;\r\n\r\n        int[][] result = new int[m][n];\r\n\r\n        for (int i = 0; i &lt; m; ++i) {\r\n            for (int j = 0; j &lt; n; ++j) {\r\n                for (int x = 0; x &lt; k; ++x) {\r\n                    result[i][j] += A[i][x] * B[x][j];\r\n                }\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n    public static void main(String[] args) {\r\n        // Generate random matrices A and B of size 3 x 3\r\n        int[][] A = generateRandomMatrix(3, 3);\r\n        int[][] B = generateRandomMatrix(3, 3);\r\n\r\n        // Measure execution time\r\n        long start = System.nanoTime();\r\n\r\n        // Perform matrix multiplication\r\n        int[][] result = matrixMultiplication(A, B);\r\n\r\n        long end = System.nanoTime();\r\n        long duration = end - start;\r\n\r\n        System.out.println(&quot;Execution time (Java): &quot; + duration + &quot; nanoseconds&quot;);\r\n    }\r\n}\r\n\r\n```\r\nPython code:\r\n```\r\nimport time\r\nimport numpy as np\r\nimport random\r\n\r\n# Function to generate a random matrix of size m x n\r\ndef generateRandomMatrix(m, n):\r\n    return [[random.randint(1, 100) for _ in range(n)] for _ in range(m)]\r\n\r\n# Matrix multiplication function\r\ndef matrixMultiplication(A, B):\r\n    A = np.array(A)\r\n    B = np.array(B)\r\n    result = np.dot(A, B)\r\n    return result.tolist()\r\n\r\nif __name__ == &quot;__main__&quot;:\r\n    # Generate random matrices A and B of size 3 x 3\r\n    A = generateRandomMatrix(3, 3)\r\n    B = generateRandomMatrix(3, 3)\r\n\r\n    # Measure execution time\r\n    start = time.time()\r\n\r\n    # Perform matrix multiplication\r\n    result = matrixMultiplication(A, B)\r\n\r\n    end = time.time()\r\n    duration = (end - start) * 1e6\r\n\r\n    print(&quot;Execution time (Python): {} microseconds&quot;.format(duration))\r\n\r\n```\r\nI noticed a substantial performance difference in favor of C++. The execution times demonstrate C++&#39;s superiority over Java and Python.\r\n\r\nI understand that C++ is typically compiled, Java employs virtual machine emulation, and Python is interpreted. Consequently, I acknowledge that differences in execution approaches and compiler optimizations may significantly contribute to these performance disparities. Nonetheless, I would appreciate a more detailed explanation of the specific reasons underlying the observed performance differences.\r\n\r\nFurthermore, I have taken the recommendation into account and conducted longer tests, running the algorithms on larger datasets to minimize the impact of initial startup costs for Java and Python. Nevertheless, the performance gap between C++ and the other languages remains substantial.\r\n\r\nCould someone shed light on why C++ consistently outperforms Java and Python in this scenario? Are there specific compiler flags or runtime settings that could be adjusted in Java and Python to enhance their performance in similar computational tasks?\r\n\r\nThank you for sharing your insights and expertise!","title":"Understanding the Performance Advantages of C++ over Other Languages","body":"<p>Why does C++ generally exhibit better execution speed than Java and Python? What factors contribute to this performance disparity? I conducted a series of tests to compare the execution speeds of these languages and seek a deeper understanding of the underlying reasons.</p>\n<p>Context: As a computer science student, I have been exploring various programming languages to comprehend their performance characteristics. Through my experiments, I have consistently observed that C++ tends to outperform Java and Python in terms of execution speed. However, I desire a comprehensive understanding of the factors contributing to this performance difference.</p>\n<p>Hardware and Compilation Details: To ensure a fair comparison, I executed the same algorithm using identical logic and datasets across all three languages. The experiments were conducted on a system equipped with an Intel Core i7 processor (8 cores) and 16 GB of RAM.</p>\n<p>For the C++ code, I utilized GCC 10.2.0 with the following compilation flags:</p>\n<p><code>g++ -O3 -march=native -mtune=native -std=c++17 -o program program.cpp</code></p>\n<p>Java was executed using OpenJDK 11.0.1 with the following command:</p>\n<p><code>java -Xmx8G -Xms8G Program</code></p>\n<p>Python code was executed using Python 3.9.0 as follows:</p>\n<p><code>python3 program.py</code>\nC++ code:</p>\n<pre><code>#include &lt;iostream&gt;\n#include &lt;chrono&gt;\n#include &lt;vector&gt;\n#include &lt;random&gt;\n\n// Function to generate a random matrix of size m x n\nstd::vector&lt;std::vector&lt;int&gt;&gt; generateRandomMatrix(int m, int n) {\n    std::vector&lt;std::vector&lt;int&gt;&gt; matrix(m, std::vector&lt;int&gt;(n));\n    std::random_device rd;\n    std::mt19937 gen(rd());\n    std::uniform_int_distribution&lt;&gt; dis(1, 100);\n\n    for (int i = 0; i &lt; m; ++i) {\n        for (int j = 0; j &lt; n; ++j) {\n            matrix[i][j] = dis(gen);\n        }\n    }\n\n    return matrix;\n}\n\n// Matrix multiplication function\nstd::vector&lt;std::vector&lt;int&gt;&gt; matrixMultiplication(const std::vector&lt;std::vector&lt;int&gt;&gt;&amp; A, const std::vector&lt;std::vector&lt;int&gt;&gt;&amp; B) {\n    int m = A.size();\n    int n = B[0].size();\n    int k = B.size();\n\n    std::vector&lt;std::vector&lt;int&gt;&gt; result(m, std::vector&lt;int&gt;(n, 0));\n\n    for (int i = 0; i &lt; m; ++i) {\n        for (int j = 0; j &lt; n; ++j) {\n            for (int x = 0; x &lt; k; ++x) {\n                result[i][j] += A[i][x] * B[x][j];\n            }\n        }\n    }\n\n    return result;\n}\n\nint main() {\n    // Generate random matrices A and B of size 3 x 3\n    std::vector&lt;std::vector&lt;int&gt;&gt; A = generateRandomMatrix(3, 3);\n    std::vector&lt;std::vector&lt;int&gt;&gt; B = generateRandomMatrix(3, 3);\n\n    // Measure execution time\n    auto start = std::chrono::steady_clock::now();\n\n    // Perform matrix multiplication\n    std::vector&lt;std::vector&lt;int&gt;&gt; result = matrixMultiplication(A, B);\n\n    auto end = std::chrono::steady_clock::now();\n    auto duration = std::chrono::duration_cast&lt;std::chrono::microseconds&gt;(end - start).count();\n\n    std::cout &lt;&lt; &quot;Execution time (C++): &quot; &lt;&lt; duration &lt;&lt; &quot; microseconds&quot; &lt;&lt; std::endl;\n\n    return 0;\n}\n\n</code></pre>\n<p>Java code:</p>\n<pre><code>import java.util.Arrays;\nimport java.util.Random;\n\npublic class Program {\n    // Function to generate a random matrix of size m x n\n    public static int[][] generateRandomMatrix(int m, int n) {\n        int[][] matrix = new int[m][n];\n        Random random = new Random();\n\n        for (int i = 0; i &lt; m; ++i) {\n            for (int j = 0; j &lt; n; ++j) {\n                matrix[i][j] = random.nextInt(100) + 1;\n            }\n        }\n\n        return matrix;\n    }\n\n    // Matrix multiplication function\n    public static int[][] matrixMultiplication(int[][] A, int[][] B) {\n        int m = A.length;\n        int n = B[0].length;\n        int k = B.length;\n\n        int[][] result = new int[m][n];\n\n        for (int i = 0; i &lt; m; ++i) {\n            for (int j = 0; j &lt; n; ++j) {\n                for (int x = 0; x &lt; k; ++x) {\n                    result[i][j] += A[i][x] * B[x][j];\n                }\n            }\n        }\n\n        return result;\n    }\n    public static void main(String[] args) {\n        // Generate random matrices A and B of size 3 x 3\n        int[][] A = generateRandomMatrix(3, 3);\n        int[][] B = generateRandomMatrix(3, 3);\n\n        // Measure execution time\n        long start = System.nanoTime();\n\n        // Perform matrix multiplication\n        int[][] result = matrixMultiplication(A, B);\n\n        long end = System.nanoTime();\n        long duration = end - start;\n\n        System.out.println(&quot;Execution time (Java): &quot; + duration + &quot; nanoseconds&quot;);\n    }\n}\n\n</code></pre>\n<p>Python code:</p>\n<pre><code>import time\nimport numpy as np\nimport random\n\n# Function to generate a random matrix of size m x n\ndef generateRandomMatrix(m, n):\n    return [[random.randint(1, 100) for _ in range(n)] for _ in range(m)]\n\n# Matrix multiplication function\ndef matrixMultiplication(A, B):\n    A = np.array(A)\n    B = np.array(B)\n    result = np.dot(A, B)\n    return result.tolist()\n\nif __name__ == &quot;__main__&quot;:\n    # Generate random matrices A and B of size 3 x 3\n    A = generateRandomMatrix(3, 3)\n    B = generateRandomMatrix(3, 3)\n\n    # Measure execution time\n    start = time.time()\n\n    # Perform matrix multiplication\n    result = matrixMultiplication(A, B)\n\n    end = time.time()\n    duration = (end - start) * 1e6\n\n    print(&quot;Execution time (Python): {} microseconds&quot;.format(duration))\n\n</code></pre>\n<p>I noticed a substantial performance difference in favor of C++. The execution times demonstrate C++'s superiority over Java and Python.</p>\n<p>I understand that C++ is typically compiled, Java employs virtual machine emulation, and Python is interpreted. Consequently, I acknowledge that differences in execution approaches and compiler optimizations may significantly contribute to these performance disparities. Nonetheless, I would appreciate a more detailed explanation of the specific reasons underlying the observed performance differences.</p>\n<p>Furthermore, I have taken the recommendation into account and conducted longer tests, running the algorithms on larger datasets to minimize the impact of initial startup costs for Java and Python. Nevertheless, the performance gap between C++ and the other languages remains substantial.</p>\n<p>Could someone shed light on why C++ consistently outperforms Java and Python in this scenario? Are there specific compiler flags or runtime settings that could be adjusted in Java and Python to enhance their performance in similar computational tasks?</p>\n<p>Thank you for sharing your insights and expertise!</p>\n"},{"tags":["java","idioms"],"comments":[{"owner":{"account_id":150404,"reputation":42109,"user_id":363573,"accept_rate":97,"display_name":"Stephan"},"score":0,"creation_date":1631386707,"post_id":1988016,"comment_id":122209922,"body_markdown":"See also: https://jaksa.wordpress.com/2019/10/28/named-parameters-in-java/","body":"See also: <a href=\"https://jaksa.wordpress.com/2019/10/28/named-parameters-in-java/\" rel=\"nofollow noreferrer\">jaksa.wordpress.com/2019/10/28/named-parameters-in-java</a>"}],"answers":[{"comments":[{"owner":{"account_id":55539,"reputation":160139,"user_id":166339,"display_name":"Asaph"},"score":13,"creation_date":1262328041,"post_id":1988035,"comment_id":1905024,"body_markdown":"That really isn&#39;t named parameters in the way Objective-C does them. That looks more like a fluent interface. It&#39;s really not the same thing.","body":"That really isn&#39;t named parameters in the way Objective-C does them. That looks more like a fluent interface. It&#39;s really not the same thing."},{"owner":{"account_id":43112,"reputation":58953,"user_id":125844,"accept_rate":85,"display_name":"notnoop"},"score":33,"creation_date":1262328370,"post_id":1988035,"comment_id":1905032,"body_markdown":"I like using `.withFoo`, rather than `.setFoo`: `newBuilder().withSize(1).withName(1).build()` rather than `newBuilder().setSize(1).setName(1).build()`","body":"I like using <code>.withFoo</code>, rather than <code>.setFoo</code>: <code>newBuilder().withSize(1).withName(1).build()</code> rather than <code>newBuilder().setSize(1).setName(1).build()</code>"},{"owner":{"account_id":32681,"reputation":138933,"user_id":90848,"accept_rate":90,"display_name":"Laurence Gonsalves"},"score":20,"creation_date":1262328623,"post_id":1988035,"comment_id":1905036,"body_markdown":"Asaph: yes, I know. Java doesn&#39;t have named parameters. That&#39;s why I said this is &quot;the best Java idiom I&#39;ve seem for *simulating* keyword arguments&quot;. Objective-C&#39;s &quot;named parameters&quot; are also less than ideal, since they force a particular ordering. They aren&#39;t true keyword arguments like in Lisp or Python. At least with the Java Builder pattern you just need to remember the names, not the order, just like real keyword arguments.","body":"Asaph: yes, I know. Java doesn&#39;t have named parameters. That&#39;s why I said this is &quot;the best Java idiom I&#39;ve seem for <i>simulating</i> keyword arguments&quot;. Objective-C&#39;s &quot;named parameters&quot; are also less than ideal, since they force a particular ordering. They aren&#39;t true keyword arguments like in Lisp or Python. At least with the Java Builder pattern you just need to remember the names, not the order, just like real keyword arguments."},{"owner":{"account_id":32681,"reputation":138933,"user_id":90848,"accept_rate":90,"display_name":"Laurence Gonsalves"},"score":16,"creation_date":1262329115,"post_id":1988035,"comment_id":1905046,"body_markdown":"notnoop: I prefer &quot;set&quot; because these are setters that mutate the state of the Builder. Yes, &quot;with&quot; looks nice in the simple case where you&#39;re chaining together everything, but in more complicated cases where you&#39;ve got the Builder in its own variable (perhaps because you&#39;re conditionally setting properties) I like that the set prefix makes it completely clear that the Builder is being mutated when these methods are called. The &quot;with&quot; prefix sounds functional to me, and these methods are decidedly not functional.","body":"notnoop: I prefer &quot;set&quot; because these are setters that mutate the state of the Builder. Yes, &quot;with&quot; looks nice in the simple case where you&#39;re chaining together everything, but in more complicated cases where you&#39;ve got the Builder in its own variable (perhaps because you&#39;re conditionally setting properties) I like that the set prefix makes it completely clear that the Builder is being mutated when these methods are called. The &quot;with&quot; prefix sounds functional to me, and these methods are decidedly not functional."},{"owner":{"account_id":62440,"reputation":23185,"user_id":185541,"display_name":"rsp"},"score":5,"creation_date":1262382139,"post_id":1988035,"comment_id":1906976,"body_markdown":"`There&#39;s no compile-time checking that all of the parameters have been specified exactly once.` This problem can be overcome by returning interfaces `Builder1` to `BuilderN` where each covers either one of the setters or the `build()`. It&#39;s much more verbose to code, but it comes with compiler support for your DSL and makes auto-completion very nice to work with.","body":"<code>There&#39;s no compile-time checking that all of the parameters have been specified exactly once.</code> This problem can be overcome by returning interfaces <code>Builder1</code> to <code>BuilderN</code> where each covers either one of the setters or the <code>build()</code>. It&#39;s much more verbose to code, but it comes with compiler support for your DSL and makes auto-completion very nice to work with."},{"owner":{"account_id":32681,"reputation":138933,"user_id":90848,"accept_rate":90,"display_name":"Laurence Gonsalves"},"score":0,"creation_date":1262386272,"post_id":1988035,"comment_id":1907149,"body_markdown":"rsp: Good point. I&#39;ve occasionally considered using n-Builder classes like you describe, but have never actually used this approach because the extra verbosity and the loss of the ability to reorder parameters always seemed like too high a price to pay. (You could get the reordering back by creating 2^n-Builder classes, but obviously that&#39;s far worse in the verbosity department for all but very tiny values of n.) I generally put my required parameters on either the Builder&#39;s constructor or build() method, and use setters for optional parameters.","body":"rsp: Good point. I&#39;ve occasionally considered using n-Builder classes like you describe, but have never actually used this approach because the extra verbosity and the loss of the ability to reorder parameters always seemed like too high a price to pay. (You could get the reordering back by creating 2^n-Builder classes, but obviously that&#39;s far worse in the verbosity department for all but very tiny values of n.) I generally put my required parameters on either the Builder&#39;s constructor or build() method, and use setters for optional parameters."},{"owner":{"account_id":32681,"reputation":138933,"user_id":90848,"accept_rate":90,"display_name":"Laurence Gonsalves"},"score":0,"creation_date":1389225500,"post_id":1988035,"comment_id":31576007,"body_markdown":"@T.J.Crowder If you look at the example code in the answer you&#39;ll see that the `Foo` constructor takes a `FooBuilder` as its only parameter. Essentially, the builder *is* the options class. The constructor (and hence, the `build()` method) should fail if the builder is in an invalid state, so there is no danger of the constructor returning an object that is not properly constructed.","body":"@T.J.Crowder If you look at the example code in the answer you&#39;ll see that the <code>Foo</code> constructor takes a <code>FooBuilder</code> as its only parameter. Essentially, the builder <i>is</i> the options class. The constructor (and hence, the <code>build()</code> method) should fail if the builder is in an invalid state, so there is no danger of the constructor returning an object that is not properly constructed."},{"owner":{"account_id":52616,"reputation":1043001,"user_id":157247,"accept_rate":91,"display_name":"T.J. Crowder"},"score":0,"creation_date":1389256071,"post_id":1988035,"comment_id":31586243,"body_markdown":"@LaurenceGonsalves: %\\*!@&quot;! How did I miss that? Too much going on. I&#39;d upvote the answer but I already did that. Thanks and apologies. That&#39;s what I was thinking it should be, but better (no surprise). I&#39;ve deleted my mistaken comment, we should clean these up too. Thanks for being so kind in your reply above.","body":"@LaurenceGonsalves: %*!@&quot;! How did I miss that? Too much going on. I&#39;d upvote the answer but I already did that. Thanks and apologies. That&#39;s what I was thinking it should be, but better (no surprise). I&#39;ve deleted my mistaken comment, we should clean these up too. Thanks for being so kind in your reply above."},{"owner":{"account_id":3595277,"reputation":44036,"user_id":3000206,"accept_rate":98,"display_name":"Carcigenicate"},"score":0,"creation_date":1436646509,"post_id":1988035,"comment_id":50703818,"body_markdown":"Couldn&#39;t you achieve this same effect by having the setters return `this`?","body":"Couldn&#39;t you achieve this same effect by having the setters return <code>this</code>?"},{"owner":{"account_id":32681,"reputation":138933,"user_id":90848,"accept_rate":90,"display_name":"Laurence Gonsalves"},"score":2,"creation_date":1436746721,"post_id":1988035,"comment_id":50726796,"body_markdown":"@Carcigenicate With the builder pattern you can have the built objects be immutable. It also separates unchecked values (the builders) from values that have been checked for validity and consistency by giving them a different type. This means that once a non-builder object in constructed you can rely on it being valid and staying that way, and you can use static types to enforce this. With only setters it often means that you have to allow inconsistent states, and you can&#39;t rely on the type system as much. You end up having to do a lot more runtime checking and defensive copying.","body":"@Carcigenicate With the builder pattern you can have the built objects be immutable. It also separates unchecked values (the builders) from values that have been checked for validity and consistency by giving them a different type. This means that once a non-builder object in constructed you can rely on it being valid and staying that way, and you can use static types to enforce this. With only setters it often means that you have to allow inconsistent states, and you can&#39;t rely on the type system as much. You end up having to do a lot more runtime checking and defensive copying."},{"owner":{"account_id":2986719,"reputation":4999,"user_id":2535335,"display_name":"Johannes Jander"},"score":2,"creation_date":1487583621,"post_id":1988035,"comment_id":71833932,"body_markdown":"For those interested in the Builder pattern without writing a lot of boilerplate, Project Lombok has implemented it as an annotation (https://projectlombok.org/features/Builder.html). The usual caveats about adopting Lombok and their deep magic apply, of course.","body":"For those interested in the Builder pattern without writing a lot of boilerplate, Project Lombok has implemented it as an annotation (<a href=\"https://projectlombok.org/features/Builder.html\" rel=\"nofollow noreferrer\">projectlombok.org/features/Builder.html</a>). The usual caveats about adopting Lombok and their deep magic apply, of course."},{"owner":{"account_id":32681,"reputation":138933,"user_id":90848,"accept_rate":90,"display_name":"Laurence Gonsalves"},"score":1,"creation_date":1487801566,"post_id":1988035,"comment_id":71953547,"body_markdown":"@JohannesJander Good suggestion, though at this point I feel like if you want to use Lombok, why not just switch to Kotlin? I&#39;ve been using Kotlin for my recent JVM projects, and while it is a different language, it&#39;s extremely interoperable with Java, and it&#39;s very easy to pick up. Instead of `Builder` pattern you can use actual named parameters, and there are many other syntactic niceties.","body":"@JohannesJander Good suggestion, though at this point I feel like if you want to use Lombok, why not just switch to Kotlin? I&#39;ve been using Kotlin for my recent JVM projects, and while it is a different language, it&#39;s extremely interoperable with Java, and it&#39;s very easy to pick up. Instead of <code>Builder</code> pattern you can use actual named parameters, and there are many other syntactic niceties."},{"owner":{"account_id":2986719,"reputation":4999,"user_id":2535335,"display_name":"Johannes Jander"},"score":0,"creation_date":1487802178,"post_id":1988035,"comment_id":71953818,"body_markdown":"@LaurenceGonsalves Oh, Kotlin is absolutely the better language - I am just not sure if it will see wide-spread adoption. In my current occupation (Big-Corp Enterprises), I have been fighting for 3 years to be able to build web frontends in Javascript, not GWT, so things like Kotlin are non-starters. And the question had a &quot;Java&quot; tag, so recommending a language-switch is a bit over the top, IMO.","body":"@LaurenceGonsalves Oh, Kotlin is absolutely the better language - I am just not sure if it will see wide-spread adoption. In my current occupation (Big-Corp Enterprises), I have been fighting for 3 years to be able to build web frontends in Javascript, not GWT, so things like Kotlin are non-starters. And the question had a &quot;Java&quot; tag, so recommending a language-switch is a bit over the top, IMO."}],"tags":[],"owner":{"account_id":32681,"reputation":138933,"user_id":90848,"accept_rate":90,"display_name":"Laurence Gonsalves"},"comment_count":13,"down_vote_count":2,"up_vote_count":124,"is_accepted":true,"score":122,"last_activity_date":1262328871,"creation_date":1262327568,"answer_id":1988035,"question_id":1988016,"body_markdown":"The best Java idiom I&#39;ve seem for simulating keyword arguments in constructors is the Builder pattern, described in [Effective Java 2nd Edition](http://java.sun.com/docs/books/effective/).\r\n\r\nThe basic idea is to have a Builder class that has setters (but usually not getters) for the different constructor parameters. There&#39;s also a `build()` method. The Builder class is often a (static) nested class of the class that it&#39;s used to build. The outer class&#39;s constructor is often private.\r\n\r\nThe end result looks something like:\r\n\r\n    public class Foo {\r\n      public static class Builder {\r\n        public Foo build() {\r\n          return new Foo(this);\r\n        }\r\n    \r\n        public Builder setSize(int size) {\r\n          this.size = size;\r\n          return this;\r\n        }\r\n    \r\n        public Builder setColor(Color color) {\r\n          this.color = color;\r\n          return this;\r\n        }\r\n    \r\n        public Builder setName(String name) {\r\n          this.name = name;\r\n          return this;\r\n        }\r\n    \r\n        // you can set defaults for these here\r\n        private int size;\r\n        private Color color;\r\n        private String name;\r\n      }\r\n\r\n      public static Builder builder() {\r\n          return new Builder();\r\n      }\r\n    \r\n      private Foo(Builder builder) {\r\n        size = builder.size;\r\n        color = builder.color;\r\n        name = builder.name;\r\n      }\r\n    \r\n      private final int size;\r\n      private final Color color;\r\n      private final String name;\r\n    \r\n      // The rest of Foo goes here...\r\n    }\r\n\r\nTo create an instance of Foo you then write something like:\r\n\r\n    Foo foo = Foo.builder()\r\n        .setColor(red)\r\n        .setName(&quot;Fred&quot;)\r\n        .setSize(42)\r\n        .build();\r\n\r\nThe main caveats are:\r\n\r\n  1. Setting up the pattern is pretty verbose (as you can see). Probably not worth it except for classes you plan on instantiating in many places.\r\n  2. There&#39;s no compile-time checking that all of the parameters have been specified exactly once. You can add runtime checks, or you can use this only for optional parameters and make required parameters normal parameters to either Foo or the Builder&#39;s constructor. (People generally don&#39;t worry about the case where the same parameter is being set multiple times.)\r\n\r\nYou may also want to check out [this blog post](http://rwhansen.blogspot.com/2007/07/theres-builder-pattern-that-joshua.html) (not by me).","title":"Named Parameter idiom in Java","body":"<p>The best Java idiom I've seem for simulating keyword arguments in constructors is the Builder pattern, described in <a href=\"http://java.sun.com/docs/books/effective/\" rel=\"noreferrer\">Effective Java 2nd Edition</a>.</p>\n\n<p>The basic idea is to have a Builder class that has setters (but usually not getters) for the different constructor parameters. There's also a <code>build()</code> method. The Builder class is often a (static) nested class of the class that it's used to build. The outer class's constructor is often private.</p>\n\n<p>The end result looks something like:</p>\n\n<pre><code>public class Foo {\n  public static class Builder {\n    public Foo build() {\n      return new Foo(this);\n    }\n\n    public Builder setSize(int size) {\n      this.size = size;\n      return this;\n    }\n\n    public Builder setColor(Color color) {\n      this.color = color;\n      return this;\n    }\n\n    public Builder setName(String name) {\n      this.name = name;\n      return this;\n    }\n\n    // you can set defaults for these here\n    private int size;\n    private Color color;\n    private String name;\n  }\n\n  public static Builder builder() {\n      return new Builder();\n  }\n\n  private Foo(Builder builder) {\n    size = builder.size;\n    color = builder.color;\n    name = builder.name;\n  }\n\n  private final int size;\n  private final Color color;\n  private final String name;\n\n  // The rest of Foo goes here...\n}\n</code></pre>\n\n<p>To create an instance of Foo you then write something like:</p>\n\n<pre><code>Foo foo = Foo.builder()\n    .setColor(red)\n    .setName(\"Fred\")\n    .setSize(42)\n    .build();\n</code></pre>\n\n<p>The main caveats are:</p>\n\n<ol>\n<li>Setting up the pattern is pretty verbose (as you can see). Probably not worth it except for classes you plan on instantiating in many places.</li>\n<li>There's no compile-time checking that all of the parameters have been specified exactly once. You can add runtime checks, or you can use this only for optional parameters and make required parameters normal parameters to either Foo or the Builder's constructor. (People generally don't worry about the case where the same parameter is being set multiple times.)</li>\n</ol>\n\n<p>You may also want to check out <a href=\"http://rwhansen.blogspot.com/2007/07/theres-builder-pattern-that-joshua.html\" rel=\"noreferrer\">this blog post</a> (not by me).</p>\n"},{"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":6,"creation_date":1262339007,"post_id":1988038,"comment_id":1905211,"body_markdown":"+1 - for the advice about sticking to the idioms of the language you are currently using.  Please think of the other people who will need to read your code!","body":"+1 - for the advice about sticking to the idioms of the language you are currently using.  Please think of the other people who will need to read your code!"},{"owner":{"account_id":68294,"reputation":4643,"user_id":199335,"accept_rate":77,"display_name":"Gattster"},"score":3,"creation_date":1360631101,"post_id":1988038,"comment_id":20767687,"body_markdown":"I upvoted your answer because I think you make a good point. If I had to guess why you got the downvote, it&#39;s probably because this doesn&#39;t answer the question. Q: &quot;How do I do named parameters in Java?&quot; A: &quot;You don&#39;t&quot;","body":"I upvoted your answer because I think you make a good point. If I had to guess why you got the downvote, it&#39;s probably because this doesn&#39;t answer the question. Q: &quot;How do I do named parameters in Java?&quot; A: &quot;You don&#39;t&quot;"},{"owner":{"account_id":344360,"reputation":27788,"user_id":676634,"accept_rate":78,"display_name":"Andreas Mueller"},"score":17,"creation_date":1370267465,"post_id":1988038,"comment_id":24384952,"body_markdown":"I downvoted because I think you answer has nothing to do with the question. Verbose names don&#39;t really solve the problem of parameter ordering. Yes, you could encode them in the name but that is clearly not practicable. Bringing up an unrelated paradigm doesn&#39;t explain why one paradigm is not supported.","body":"I downvoted because I think you answer has nothing to do with the question. Verbose names don&#39;t really solve the problem of parameter ordering. Yes, you could encode them in the name but that is clearly not practicable. Bringing up an unrelated paradigm doesn&#39;t explain why one paradigm is not supported."}],"tags":[],"owner":{"account_id":55539,"reputation":160139,"user_id":166339,"display_name":"Asaph"},"comment_count":3,"down_vote_count":8,"up_vote_count":15,"is_accepted":false,"score":7,"last_activity_date":1689859587,"creation_date":1262327779,"answer_id":1988038,"question_id":1988016,"body_markdown":"Java does not support Objective-C-like named parameters for constructors or method arguments. Furthermore, this is really not the Java way of doing things.\r\n\r\nIn java, the typical pattern is verbosely named classes and members. Classes and variables should be nouns and method named should be verbs. I suppose you could get creative and deviate from the Java naming conventions and emulate the Objective-C paradigm in a hacky way but this wouldn&#39;t be particularly appreciated by the average Java developer charged with maintaining your code.  \r\nWhen working in any language, it behooves you to stick to the conventions of the language and community, especially when working on a team.","title":"Named Parameter idiom in Java","body":"<p>Java does not support Objective-C-like named parameters for constructors or method arguments. Furthermore, this is really not the Java way of doing things.</p>\n<p>In java, the typical pattern is verbosely named classes and members. Classes and variables should be nouns and method named should be verbs. I suppose you could get creative and deviate from the Java naming conventions and emulate the Objective-C paradigm in a hacky way but this wouldn't be particularly appreciated by the average Java developer charged with maintaining your code.<br />\nWhen working in any language, it behooves you to stick to the conventions of the language and community, especially when working on a team.</p>\n"},{"comments":[{"owner":{"account_id":86575,"reputation":2988,"user_id":240656,"accept_rate":88,"display_name":"Red Hyena"},"score":32,"creation_date":1262345022,"post_id":1988268,"comment_id":1905338,"body_markdown":"Interesting technique but seems a little expensive as it will create a new class every time I use it in my code.","body":"Interesting technique but seems a little expensive as it will create a new class every time I use it in my code."},{"owner":{"account_id":285794,"reputation":8226,"user_id":584670,"accept_rate":69,"display_name":"Steve"},"score":9,"creation_date":1356572954,"post_id":1988268,"comment_id":19411509,"body_markdown":"Auto-formatting, subclassing and serialization warnings aside, this is actually quite close to the C# syntax for property-based initialization. However, C# as of 4.0 also has named parameters, so programmers are really spoilt for choice, unlike Java programmers who have to simulate idioms that prevent them shooting themselves in the foot later.","body":"Auto-formatting, subclassing and serialization warnings aside, this is actually quite close to the C# syntax for property-based initialization. However, C# as of 4.0 also has named parameters, so programmers are really spoilt for choice, unlike Java programmers who have to simulate idioms that prevent them shooting themselves in the foot later."},{"owner":{"account_id":68294,"reputation":4643,"user_id":199335,"accept_rate":77,"display_name":"Gattster"},"score":3,"creation_date":1360631213,"post_id":1988268,"comment_id":20767715,"body_markdown":"Glad to see this is possible but I had to downvote as this solution is expensive as Red Hyena pointed out. Can&#39;t wait until Java actually supports named parameters like Python does.","body":"Glad to see this is possible but I had to downvote as this solution is expensive as Red Hyena pointed out. Can&#39;t wait until Java actually supports named parameters like Python does."},{"owner":{"account_id":231414,"reputation":3306,"user_id":495637,"accept_rate":67,"display_name":"steve"},"score":18,"creation_date":1367481030,"post_id":1988268,"comment_id":23392392,"body_markdown":"Upvote. This answers the question in the most readable, concise way. Fine. It&#39;s &quot;not performant&quot;. How many extra milliseconds &amp; bits are we talking here? Ones of them? Tens? Don&#39;t get me wrong -- I won&#39;t be using this as I&#39;d hate to be executed by a verbose Java nut (pun intended ;)","body":"Upvote. This answers the question in the most readable, concise way. Fine. It&#39;s &quot;not performant&quot;. How many extra milliseconds &amp; bits are we talking here? Ones of them? Tens? Don&#39;t get me wrong -- I won&#39;t be using this as I&#39;d hate to be executed by a verbose Java nut (pun intended ;)"},{"owner":{"account_id":1149095,"reputation":1831,"user_id":1131188,"display_name":"Jonatan Kaźmierczak"},"score":4,"creation_date":1485218403,"post_id":1988268,"comment_id":70824469,"body_markdown":"Perfect! Only requires public/protected fields. It&#39;s definitely the best solution, causing much less overhead than builder.\n\nHyena/Gattster: please (1) read JLS and (2) check generated bytecode before writing your comments.","body":"Perfect! Only requires public/protected fields. It&#39;s definitely the best solution, causing much less overhead than builder.  Hyena/Gattster: please (1) read JLS and (2) check generated bytecode before writing your comments."},{"owner":{"account_id":52873,"reputation":2689,"user_id":158037,"display_name":"user158037"},"score":2,"creation_date":1519300977,"post_id":1988268,"comment_id":84859923,"body_markdown":"No, it is not perfect. If you use double-brace initializer inside Spring/JEE/CDI beans that `foo` will prevent that bean from being GCed and `foo` might no longer be Serializable,even if `Foo` was.","body":"No, it is not perfect. If you use double-brace initializer inside Spring/JEE/CDI beans that <code>foo</code> will prevent that bean from being GCed and <code>foo</code> might no longer be Serializable,even if <code>Foo</code> was."},{"owner":{"account_id":1164345,"reputation":22755,"user_id":1143274,"accept_rate":56,"display_name":"Evgeni Sergeev"},"score":2,"creation_date":1539363648,"post_id":1988268,"comment_id":92489441,"body_markdown":"The real problem is that this instance of Foo will keep a reference to the instance of the enclosing class where it is created. See [ReallyHeavyObject in this answer](https://stackoverflow.com/a/27521360/1143274) for an example.","body":"The real problem is that this instance of Foo will keep a reference to the instance of the enclosing class where it is created. See <a href=\"https://stackoverflow.com/a/27521360/1143274\">ReallyHeavyObject in this answer</a> for an example."}],"tags":[],"owner":{"account_id":76511,"reputation":44893,"user_id":218978,"accept_rate":100,"display_name":"irreputable"},"comment_count":7,"down_vote_count":6,"up_vote_count":92,"is_accepted":false,"score":86,"last_activity_date":1395777557,"creation_date":1262339977,"answer_id":1988268,"question_id":1988016,"body_markdown":"This is worth of mentioning:\r\n\r\n    Foo foo = new Foo() {{\r\n        color = red;\r\n        name = &quot;Fred&quot;;\r\n        size = 42;\r\n    }};\r\n\r\nthe so called *double-brace initializer*. It is actually an anonymous class with instance initializer. ","title":"Named Parameter idiom in Java","body":"<p>This is worth of mentioning:</p>\n\n<pre><code>Foo foo = new Foo() {{\n    color = red;\n    name = \"Fred\";\n    size = 42;\n}};\n</code></pre>\n\n<p>the so called <em>double-brace initializer</em>. It is actually an anonymous class with instance initializer. </p>\n"},{"comments":[{"owner":{"account_id":8696,"reputation":6189,"user_id":15790,"display_name":"Matt Quail"},"score":2,"creation_date":1269907105,"post_id":1988298,"comment_id":2542811,"body_markdown":"One downside to this approach is you *must* get the arguments in the correct order. The above code would let you write:\n\n    Something s = new Something(name(&quot;pen&quot;), size(20), size(21));\n\nAlso, this approach does not help you avoid typing in optional arguments.","body":"One downside to this approach is you <i>must</i> get the arguments in the correct order. The above code would let you write:      Something s = new Something(name(&quot;pen&quot;), size(20), size(21));  Also, this approach does not help you avoid typing in optional arguments."},{"owner":{"account_id":1567087,"reputation":7993,"user_id":1455622,"accept_rate":65,"display_name":"Scheintod"},"score":1,"creation_date":1442424387,"post_id":1988298,"comment_id":53080716,"body_markdown":"I would upvote this for the analysis: `not really better than a comment` ... on the other hand ... ;)","body":"I would upvote this for the analysis: <code>not really better than a comment</code> ... on the other hand ... ;)"}],"tags":[],"owner":{"account_id":85409,"reputation":89783,"user_id":238134,"accept_rate":73,"display_name":"deamon"},"comment_count":2,"down_vote_count":6,"up_vote_count":8,"is_accepted":false,"score":2,"last_activity_date":1263566499,"creation_date":1262341339,"answer_id":1988298,"question_id":1988016,"body_markdown":"You could use a usual constructor and static methods that give the arguments a name:\r\n\r\n    public class Something {\r\n    \r\n    \tString name;\r\n    \tint size; \r\n    \tfloat weight;\r\n    \r\n    \tpublic Something(String name, int size, float weight) {\r\n    \t\tthis.name = name;\r\n    \t\tthis.size = size;\r\n    \t\tthis.weight = weight;\r\n    \t}\r\n    \r\n    \tpublic static String name(String name) { \r\n    \t\treturn name; \r\n    \t}\r\n    \t\r\n    \tpublic static int size(int size) {\r\n    \t\treturn size;\r\n    \t}\r\n    \t\r\n    \tpublic float weight(float weight) {\r\n    \t\treturn weight;\r\n    \t}\r\n    \t\r\n    }\r\n\r\nUsage:\r\n\r\n    import static Something.*;\r\n    \r\n    Something s = new Something(name(&quot;pen&quot;), size(20), weight(8.2));\r\n\r\nLimitations compared to real named parameters:\r\n\r\n - argument order is relevant\r\n - variable argument lists are not possible with a single constructor\r\n - you need a method for every argument\r\n - not really better than a comment (new Something(`/*name*/ &quot;pen&quot;, /*size*/ 20, /*weight*/ 8.2)`)\r\n\r\nIf you have the choice look at Scala 2.8. http://www.scala-lang.org/node/2075","title":"Named Parameter idiom in Java","body":"<p>You could use a usual constructor and static methods that give the arguments a name:</p>\n\n<pre><code>public class Something {\n\n    String name;\n    int size; \n    float weight;\n\n    public Something(String name, int size, float weight) {\n        this.name = name;\n        this.size = size;\n        this.weight = weight;\n    }\n\n    public static String name(String name) { \n        return name; \n    }\n\n    public static int size(int size) {\n        return size;\n    }\n\n    public float weight(float weight) {\n        return weight;\n    }\n\n}\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>import static Something.*;\n\nSomething s = new Something(name(\"pen\"), size(20), weight(8.2));\n</code></pre>\n\n<p>Limitations compared to real named parameters:</p>\n\n<ul>\n<li>argument order is relevant</li>\n<li>variable argument lists are not possible with a single constructor</li>\n<li>you need a method for every argument</li>\n<li>not really better than a comment (new Something(<code>/*name*/ \"pen\", /*size*/ 20, /*weight*/ 8.2)</code>)</li>\n</ul>\n\n<p>If you have the choice look at Scala 2.8. <a href=\"http://www.scala-lang.org/node/2075\" rel=\"nofollow noreferrer\">http://www.scala-lang.org/node/2075</a></p>\n"},{"comments":[{"owner":{"account_id":97302,"reputation":17837,"user_id":263998,"accept_rate":25,"display_name":"cdunn2001"},"score":2,"creation_date":1336063996,"post_id":4385612,"comment_id":13470364,"body_markdown":"I like it, but it still only solves half the problem. In Java, you cannot prevent accidentally transposed parameters without losing a compile-time check for required values.","body":"I like it, but it still only solves half the problem. In Java, you cannot prevent accidentally transposed parameters without losing a compile-time check for required values."},{"owner":{"account_id":227595,"reputation":761,"user_id":489363,"display_name":"Peter Davis"},"score":2,"creation_date":1363064118,"post_id":4385612,"comment_id":21689916,"body_markdown":"Without type safety this is worse than simple //comments.","body":"Without type safety this is worse than simple //comments."}],"tags":[],"owner":{"account_id":682516,"reputation":79,"user_id":534738,"display_name":"R Casha"},"comment_count":2,"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1291798035,"creation_date":1291798035,"answer_id":4385612,"question_id":1988016,"body_markdown":"If you are using Java 6, you can use the variable parameters and import static to produce a much better result. Details of this are found in: \r\n\r\nhttp://zinzel.blogspot.com/2010/07/creating-methods-with-named-parameters.html\r\n\r\nIn short, you could have something like:\r\n\r\n    go();\r\n    go(min(0));\r\n    go(min(0), max(100));\r\n    go(max(100), min(0));\r\n    go(prompt(&quot;Enter a value&quot;), min(0), max(100));","title":"Named Parameter idiom in Java","body":"<p>If you are using Java 6, you can use the variable parameters and import static to produce a much better result. Details of this are found in: </p>\n\n<p><a href=\"http://zinzel.blogspot.com/2010/07/creating-methods-with-named-parameters.html\" rel=\"noreferrer\">http://zinzel.blogspot.com/2010/07/creating-methods-with-named-parameters.html</a></p>\n\n<p>In short, you could have something like:</p>\n\n<pre><code>go();\ngo(min(0));\ngo(min(0), max(100));\ngo(max(100), min(0));\ngo(prompt(\"Enter a value\"), min(0), max(100));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":16831,"reputation":8923,"user_id":37086,"accept_rate":100,"display_name":"rkj"},"score":8,"creation_date":1330969775,"post_id":5414201,"comment_id":12134977,"body_markdown":"Builder is much better, because you can check some constraints on build(). But I also prefer shorter arguments without set/with prefix.","body":"Builder is much better, because you can check some constraints on build(). But I also prefer shorter arguments without set/with prefix."},{"owner":{"account_id":22825,"reputation":6383,"user_id":56708,"display_name":"Jeff Olson"},"score":5,"creation_date":1369776176,"post_id":5414201,"comment_id":24215717,"body_markdown":"Also, the builder pattern is better because it allows you to make the built class (Tiger in this case) immutable.","body":"Also, the builder pattern is better because it allows you to make the built class (Tiger in this case) immutable."}],"tags":[],"owner":{"account_id":273299,"reputation":79,"user_id":564819,"display_name":"user564819"},"comment_count":2,"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1663699986,"creation_date":1300934907,"answer_id":5414201,"question_id":1988016,"body_markdown":"What about\r\n\r\n    public class Tiger {\r\n        String myColor;\r\n        int myLegs;\r\n    \r\n        public Tiger color(String s)\r\n        {\r\n            myColor = s;\r\n            return this;\r\n        }\r\n\r\n        public Tiger legs(int i)\r\n        {\r\n            myLegs = i;\r\n            return this;\r\n        }\r\n    }\r\n\r\n    Tiger t = new Tiger().legs(4).color(&quot;striped&quot;);","title":"Named Parameter idiom in Java","body":"<p>What about</p>\n<pre><code>public class Tiger {\n    String myColor;\n    int myLegs;\n\n    public Tiger color(String s)\n    {\n        myColor = s;\n        return this;\n    }\n\n    public Tiger legs(int i)\n    {\n        myLegs = i;\n        return this;\n    }\n}\n\nTiger t = new Tiger().legs(4).color(&quot;striped&quot;);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1567087,"reputation":7993,"user_id":1455622,"accept_rate":65,"display_name":"Scheintod"},"score":0,"creation_date":1442424772,"post_id":9264881,"comment_id":53080910,"body_markdown":"This seems to be basically the same as `R Casha` answer but without the code to explain it.","body":"This seems to be basically the same as <code>R Casha</code> answer but without the code to explain it."}],"tags":[],"owner":{"account_id":973816,"reputation":1039,"user_id":995737,"display_name":"Dominic Fox"},"comment_count":1,"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1329153502,"creation_date":1329153502,"answer_id":9264881,"question_id":1988016,"body_markdown":"The idiom supported by the [karg library][1] may be worth considering:\r\n\r\n    class Example {\r\n\r\n        private static final Keyword&lt;String&gt; GREETING = Keyword.newKeyword();\r\n        private static final Keyword&lt;String&gt; NAME = Keyword.newKeyword();\r\n\r\n        public void greet(KeywordArgument...argArray) {\r\n            KeywordArguments args = KeywordArguments.of(argArray);\r\n            String greeting = GREETING.from(args, &quot;Hello&quot;);\r\n            String name = NAME.from(args, &quot;World&quot;);\r\n            System.out.println(String.format(&quot;%s, %s!&quot;, greeting, name));\r\n        }\r\n\r\n        public void sayHello() {\r\n            greet();\r\n        }\r\n\r\n        public void sayGoodbye() {\r\n            greet(GREETING.of(&quot;Goodbye&quot;);\r\n        }\r\n\r\n        public void campItUp() {\r\n            greet(NAME.of(&quot;Sailor&quot;);\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://github.com/youdevise/karg","title":"Named Parameter idiom in Java","body":"<p>The idiom supported by the <a href=\"https://github.com/youdevise/karg\" rel=\"nofollow\">karg library</a> may be worth considering:</p>\n\n<pre><code>class Example {\n\n    private static final Keyword&lt;String&gt; GREETING = Keyword.newKeyword();\n    private static final Keyword&lt;String&gt; NAME = Keyword.newKeyword();\n\n    public void greet(KeywordArgument...argArray) {\n        KeywordArguments args = KeywordArguments.of(argArray);\n        String greeting = GREETING.from(args, \"Hello\");\n        String name = NAME.from(args, \"World\");\n        System.out.println(String.format(\"%s, %s!\", greeting, name));\n    }\n\n    public void sayHello() {\n        greet();\n    }\n\n    public void sayGoodbye() {\n        greet(GREETING.of(\"Goodbye\");\n    }\n\n    public void campItUp() {\n        greet(NAME.of(\"Sailor\");\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":68294,"reputation":4643,"user_id":199335,"accept_rate":77,"display_name":"Gattster"},"score":3,"creation_date":1360633134,"post_id":9571371,"comment_id":20768143,"body_markdown":"Good cause the low overhead, but it feels so hackish. I&#39;m gonna probably use the Builder() method for cases where there are many arguments.","body":"Good cause the low overhead, but it feels so hackish. I&#39;m gonna probably use the Builder() method for cases where there are many arguments."},{"owner":{"account_id":1567087,"reputation":7993,"user_id":1455622,"accept_rate":65,"display_name":"Scheintod"},"score":33,"creation_date":1442423775,"post_id":9571371,"comment_id":53080397,"body_markdown":"I think this completely misses the point of named parameters. (which is have *something associate names with values*). There is no indication *whatsoever* if you reverse the order. Instead of doing this I would advice of simply adding a comment: `doIt( /*value*/ 13, /*location*/ 47, /*overwrite*/ true )`","body":"I think this completely misses the point of named parameters. (which is have <i>something associate names with values</i>). There is no indication <i>whatsoever</i> if you reverse the order. Instead of doing this I would advice of simply adding a comment: <code>doIt( &#47;*value*&#47; 13, &#47;*location*&#47; 47, &#47;*overwrite*&#47; true )</code>"}],"tags":[],"owner":{"account_id":16831,"reputation":8923,"user_id":37086,"accept_rate":100,"display_name":"rkj"},"comment_count":2,"down_vote_count":6,"up_vote_count":31,"is_accepted":false,"score":25,"last_activity_date":1663699929,"creation_date":1330969661,"answer_id":9571371,"question_id":1988016,"body_markdown":"You could also try to follow advice from [here](http://www.artima.com/weblogs/viewpost.jsp?thread=118828).\r\n\r\n    int value;\r\n    int location;\r\n    boolean overwrite;\r\n    doIt(value=13, location=47, overwrite=true);\r\nIt&#39;s verbose on the call site, but overall gives the lowest overhead.","title":"Named Parameter idiom in Java","body":"<p>You could also try to follow advice from <a href=\"http://www.artima.com/weblogs/viewpost.jsp?thread=118828\" rel=\"nofollow noreferrer\">here</a>.</p>\n<pre><code>int value;\nint location;\nboolean overwrite;\ndoIt(value=13, location=47, overwrite=true);\n</code></pre>\n<p>It's verbose on the call site, but overall gives the lowest overhead.</p>\n"},{"comments":[{"owner":{"account_id":1567087,"reputation":7993,"user_id":1455622,"accept_rate":65,"display_name":"Scheintod"},"score":3,"creation_date":1442424529,"post_id":31591305,"comment_id":53080783,"body_markdown":"nice. What a pitty it doesn&#39;t have variable argument order. (But not to say that I would use this ... )","body":"nice. What a pitty it doesn&#39;t have variable argument order. (But not to say that I would use this ... )"},{"owner":{"account_id":94193,"reputation":20589,"user_id":257299,"accept_rate":64,"display_name":"kevinarpe"},"score":1,"creation_date":1519552843,"post_id":31591305,"comment_id":84949599,"body_markdown":"This is a brilliant idea.  The definition of `create()` stopped me in my tracks.  I have never seen that style of lambda chaining in Java.  Did you first discover this idea in another language with lambdas?","body":"This is a brilliant idea.  The definition of <code>create()</code> stopped me in my tracks.  I have never seen that style of lambda chaining in Java.  Did you first discover this idea in another language with lambdas?"},{"owner":{"account_id":4777549,"reputation":957,"user_id":3860254,"display_name":"Alex"},"score":3,"creation_date":1522754367,"post_id":31591305,"comment_id":86264245,"body_markdown":"It&#39;s called currying: https://en.wikipedia.org/wiki/Currying. Btw: Maybe it is a clever idea, but I wouldn&#39;t recomend this named arguments style. I tested it in a real project with many arguments and it leads to hard to read and hard to navigate code.","body":"It&#39;s called currying: <a href=\"https://en.wikipedia.org/wiki/Currying\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Currying</a>. Btw: Maybe it is a clever idea, but I wouldn&#39;t recomend this named arguments style. I tested it in a real project with many arguments and it leads to hard to read and hard to navigate code."},{"owner":{"account_id":1032845,"reputation":3336,"user_id":2698167,"accept_rate":33,"display_name":"Tuntable"},"score":1,"creation_date":1563766460,"post_id":31591305,"comment_id":100793339,"body_markdown":"Eventually, Java will be given Visual Basic style named parameters.  Java did not before because C++ does not.  But we will get there eventually.  I would say that 90% of Java polymorphism is just hacking around optional parameters.","body":"Eventually, Java will be given Visual Basic style named parameters.  Java did not before because C++ does not.  But we will get there eventually.  I would say that 90% of Java polymorphism is just hacking around optional parameters."}],"tags":[],"owner":{"account_id":4777549,"reputation":957,"user_id":3860254,"display_name":"Alex"},"comment_count":4,"down_vote_count":1,"up_vote_count":30,"is_accepted":false,"score":29,"last_activity_date":1437664021,"creation_date":1437664021,"answer_id":31591305,"question_id":1988016,"body_markdown":"Java 8 style:\r\n\r\n    public class Person {\r\n    \tString name;\r\n    \tint age;\r\n    \r\n    \tprivate Person(String name, int age) {\r\n    \t\tthis.name = name;\r\n    \t\tthis.age = age;\r\n    \t}\r\n    \r\n    \tstatic PersonWaitingForName create() {\r\n    \t\treturn name -&gt; age -&gt; new Person(name, age);\r\n    \t}\r\n    \r\n    \tstatic interface PersonWaitingForName {\r\n    \t\tPersonWaitingForAge name(String name);\r\n    \t}\r\n    \r\n    \tstatic interface PersonWaitingForAge {\r\n    \t\tPerson age(int age);\r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \r\n    \t\tPerson charlotte = Person.create()\r\n    \t\t\t.name(&quot;Charlotte&quot;)\r\n    \t\t\t.age(25);\r\n    \r\n    \t}\r\n    }\r\n\r\n - named parameters\r\n - fix order of arguments\r\n - static check -&gt; no nameless Person possible\r\n - hard to switch arguments of same type by accident (like it is possible in telescop constructors)\r\n\r\n","title":"Named Parameter idiom in Java","body":"<p>Java 8 style:</p>\n\n<pre><code>public class Person {\n    String name;\n    int age;\n\n    private Person(String name, int age) {\n        this.name = name;\n        this.age = age;\n    }\n\n    static PersonWaitingForName create() {\n        return name -&gt; age -&gt; new Person(name, age);\n    }\n\n    static interface PersonWaitingForName {\n        PersonWaitingForAge name(String name);\n    }\n\n    static interface PersonWaitingForAge {\n        Person age(int age);\n    }\n\n    public static void main(String[] args) {\n\n        Person charlotte = Person.create()\n            .name(\"Charlotte\")\n            .age(25);\n\n    }\n}\n</code></pre>\n\n<ul>\n<li>named parameters</li>\n<li>fix order of arguments</li>\n<li>static check -> no nameless Person possible</li>\n<li>hard to switch arguments of same type by accident (like it is possible in telescop constructors)</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1567087,"reputation":7993,"user_id":1455622,"accept_rate":65,"display_name":"Scheintod"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1442428403,"creation_date":1442428403,"answer_id":32616123,"question_id":1988016,"body_markdown":"This is a variant of the `Builder` Pattern as described by Lawrence above.\r\n\r\nI find myself using this a lot (at the apropriate places).\r\n\r\nThe main difference is, that in this case the Builder is *immuatable*. This has the advantage that it can be *reused* and is thread-safe.\r\n\r\nSo you can use this to make one *default Builder* and then in the various places where you need it you can configure it and build your object.\r\n\r\nThis makes most sense, if you are building the same object over and over again, because then you can make the builder static and don&#39;t have to worry about changing it&#39;s settings.\r\n\r\nOn the other hand if you have to build objects with changing paramaters this has quiet some overhead. (but hey, you can combine static / dynamic generation with custom `build` methods)\r\n\r\nHere is the example code: \r\n\r\n\r\n\tpublic class Car {\r\n\t\t\r\n\t\tpublic enum Color { white, red, green, blue, black };\r\n\t\t\r\n\t\tprivate final String brand;\r\n\t\tprivate final String name;\r\n\t\tprivate final Color color;\r\n\t\tprivate final int speed;\r\n\t\r\n\t\tprivate Car( CarBuilder builder ){\r\n\t\t\tthis.brand = builder.brand;\r\n\t\t\tthis.color = builder.color;\r\n\t\t\tthis.speed = builder.speed;\r\n\t\t\tthis.name = builder.name;\r\n\t\t}\r\n\r\n\t\tpublic static CarBuilder with() {\r\n\t\t\treturn DEFAULT;\r\n\t\t}\r\n\t\t\r\n\t\tprivate static final CarBuilder DEFAULT = new CarBuilder(\r\n\t\t\t\tnull, null, Color.white, 130\r\n\t\t);\r\n\t\t\r\n\t\tpublic static class CarBuilder {\r\n\t\t\t\r\n\t\t\tfinal String brand;\r\n\t\t\tfinal String name;\r\n\t\t\tfinal Color color;\r\n\t\t\tfinal int speed;\r\n\t\t\r\n\t\t\tprivate CarBuilder( String brand, String name, Color color, int speed ) {\r\n\t\t\t\tthis.brand = brand;\r\n\t\t\t\tthis.name = name;\r\n\t\t\t\tthis.color = color;\r\n\t\t\t\tthis.speed = speed;\r\n\t\t\t}\r\n\t\t\tpublic CarBuilder brand( String newBrand ) {\r\n\t\t\t\treturn new CarBuilder( newBrand, name, color, speed );\r\n\t\t\t}\r\n\t\t\tpublic CarBuilder name( String newName ) {\r\n\t\t\t\treturn new CarBuilder( brand, newName, color, speed );\r\n\t\t\t}\r\n\t\t\tpublic CarBuilder color( Color newColor ) {\r\n\t\t\t\treturn new CarBuilder( brand, name, newColor, speed );\r\n\t\t\t}\r\n\t\t\tpublic CarBuilder speed( int newSpeed ) {\r\n\t\t\t\treturn new CarBuilder( brand, name, color, newSpeed );\r\n\t\t\t}\r\n\t\t\tpublic Car build() {\r\n\t\t\t\treturn new Car( this );\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tpublic static void main( String [] args ) {\r\n\t\t\t\r\n\t\t\tCar porsche = Car.with()\r\n\t\t\t\t\t.brand( &quot;Porsche&quot; )\r\n\t\t\t\t\t.name( &quot;Carrera&quot; )\r\n\t\t\t\t\t.color( Color.red )\r\n\t\t\t\t\t.speed( 270 )\r\n\t\t\t\t\t.build()\r\n\t\t\t\t\t;\r\n\t\t\t\r\n\t\t\t// -- or with one default builder\r\n\t\t\t\r\n\t\t\tCarBuilder ASSEMBLY_LINE = Car.with()\r\n\t\t\t\t\t.brand( &quot;Jeep&quot; )\r\n\t\t\t\t\t.name( &quot;Cherokee&quot; )\r\n\t\t\t\t\t.color( Color.green )\r\n\t\t\t\t\t.speed( 180 )\r\n\t\t\t\t\t;\r\n\t\t\t\r\n\t\t\tfor( ;; ) ASSEMBLY_LINE.build();\r\n\t\t\t\r\n\t\t\t// -- or with custom default builder:\r\n\t\t\t\r\n\t\t\tCarBuilder MERCEDES = Car.with()\r\n\t\t\t\t\t.brand( &quot;Mercedes&quot; )\r\n\t\t\t\t\t.color( Color.black )\r\n\t\t\t\t\t;\r\n\t\t\t\r\n\t\t\tCar c230 = MERCEDES.name( &quot;C230&quot; ).speed( 180 ).build(),\r\n\t\t\t    clk = MERCEDES.name( &quot;CLK&quot; ).speed( 240 ).build();\r\n\t\t\t\r\n\t\t}\r\n\t}","title":"Named Parameter idiom in Java","body":"<p>This is a variant of the <code>Builder</code> Pattern as described by Lawrence above.</p>\n\n<p>I find myself using this a lot (at the apropriate places).</p>\n\n<p>The main difference is, that in this case the Builder is <em>immuatable</em>. This has the advantage that it can be <em>reused</em> and is thread-safe.</p>\n\n<p>So you can use this to make one <em>default Builder</em> and then in the various places where you need it you can configure it and build your object.</p>\n\n<p>This makes most sense, if you are building the same object over and over again, because then you can make the builder static and don't have to worry about changing it's settings.</p>\n\n<p>On the other hand if you have to build objects with changing paramaters this has quiet some overhead. (but hey, you can combine static / dynamic generation with custom <code>build</code> methods)</p>\n\n<p>Here is the example code: </p>\n\n<pre><code>public class Car {\n\n    public enum Color { white, red, green, blue, black };\n\n    private final String brand;\n    private final String name;\n    private final Color color;\n    private final int speed;\n\n    private Car( CarBuilder builder ){\n        this.brand = builder.brand;\n        this.color = builder.color;\n        this.speed = builder.speed;\n        this.name = builder.name;\n    }\n\n    public static CarBuilder with() {\n        return DEFAULT;\n    }\n\n    private static final CarBuilder DEFAULT = new CarBuilder(\n            null, null, Color.white, 130\n    );\n\n    public static class CarBuilder {\n\n        final String brand;\n        final String name;\n        final Color color;\n        final int speed;\n\n        private CarBuilder( String brand, String name, Color color, int speed ) {\n            this.brand = brand;\n            this.name = name;\n            this.color = color;\n            this.speed = speed;\n        }\n        public CarBuilder brand( String newBrand ) {\n            return new CarBuilder( newBrand, name, color, speed );\n        }\n        public CarBuilder name( String newName ) {\n            return new CarBuilder( brand, newName, color, speed );\n        }\n        public CarBuilder color( Color newColor ) {\n            return new CarBuilder( brand, name, newColor, speed );\n        }\n        public CarBuilder speed( int newSpeed ) {\n            return new CarBuilder( brand, name, color, newSpeed );\n        }\n        public Car build() {\n            return new Car( this );\n        }\n    }\n\n    public static void main( String [] args ) {\n\n        Car porsche = Car.with()\n                .brand( \"Porsche\" )\n                .name( \"Carrera\" )\n                .color( Color.red )\n                .speed( 270 )\n                .build()\n                ;\n\n        // -- or with one default builder\n\n        CarBuilder ASSEMBLY_LINE = Car.with()\n                .brand( \"Jeep\" )\n                .name( \"Cherokee\" )\n                .color( Color.green )\n                .speed( 180 )\n                ;\n\n        for( ;; ) ASSEMBLY_LINE.build();\n\n        // -- or with custom default builder:\n\n        CarBuilder MERCEDES = Car.with()\n                .brand( \"Mercedes\" )\n                .color( Color.black )\n                ;\n\n        Car c230 = MERCEDES.name( \"C230\" ).speed( 180 ).build(),\n            clk = MERCEDES.name( \"CLK\" ).speed( 240 ).build();\n\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":210642,"reputation":8430,"user_id":1347816,"accept_rate":78,"display_name":"LEMUEL  ADANE"},"comment_count":0,"down_vote_count":1,"up_vote_count":12,"is_accepted":false,"score":11,"last_activity_date":1623138844,"creation_date":1448182252,"answer_id":33853087,"question_id":1988016,"body_markdown":"I would like to point out that this style addresses both the **named parameter** and the **properties** features without the **get** and **set** prefix which other language have. Its not conventional in Java realm but its **simpler and shorter**, especially if you have handled other languages. \r\n  \r\n    class Person {\r\n        String name;\r\n        int age;\r\n   \r\n        // name property\r\n        // getter\r\n        public String name() { return name; }\r\n\r\n        // setter\r\n        public Person name(String val)  { \r\n            name = val;\r\n            return this;\r\n        }\r\n\r\n        // age property\r\n        // getter\r\n        public int age() { return age; }\r\n\r\n        // setter\r\n        public Person age(int val) {\r\n           age = val;\r\n           return this;\r\n        }\r\n\r\n        public static void main(String[] args) {\r\n      \r\n            // addresses named parameter\r\n            Person jacobi = new Person().name(&quot;Jacobi Adane&quot;).age(3);\r\n      \r\n            // addresses property style\r\n            System.out.println(jacobi.name());\r\n            System.out.println(jacobi.age());\r\n      \r\n            // updates property values\r\n            jacobi.name(&quot;Lemuel Jacobi Adane&quot;);\r\n            jacobi.age(4);\r\n\r\n            System.out.println(jacobi.name());\r\n            System.out.println(jacobi.age());\r\n        }\r\n    }\r\n","title":"Named Parameter idiom in Java","body":"<p>I would like to point out that this style addresses both the <strong>named parameter</strong> and the <strong>properties</strong> features without the <strong>get</strong> and <strong>set</strong> prefix which other language have. Its not conventional in Java realm but its <strong>simpler and shorter</strong>, especially if you have handled other languages.</p>\n<pre><code>class Person {\n    String name;\n    int age;\n\n    // name property\n    // getter\n    public String name() { return name; }\n\n    // setter\n    public Person name(String val)  { \n        name = val;\n        return this;\n    }\n\n    // age property\n    // getter\n    public int age() { return age; }\n\n    // setter\n    public Person age(int val) {\n       age = val;\n       return this;\n    }\n\n    public static void main(String[] args) {\n  \n        // addresses named parameter\n        Person jacobi = new Person().name(&quot;Jacobi Adane&quot;).age(3);\n  \n        // addresses property style\n        System.out.println(jacobi.name());\n        System.out.println(jacobi.age());\n  \n        // updates property values\n        jacobi.name(&quot;Lemuel Jacobi Adane&quot;);\n        jacobi.age(4);\n\n        System.out.println(jacobi.name());\n        System.out.println(jacobi.age());\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4777549,"reputation":957,"user_id":3860254,"display_name":"Alex"},"score":1,"creation_date":1484916005,"post_id":38944133,"comment_id":70719170,"body_markdown":"Cons: fields are public and not final. If you are ok with this, why not just use setters?\nHow does it work for methods?","body":"Cons: fields are public and not final. If you are ok with this, why not just use setters? How does it work for methods?"},{"owner":{"account_id":3946608,"reputation":139,"user_id":3258949,"display_name":"Vic"},"score":0,"creation_date":1487690758,"post_id":38944133,"comment_id":71892206,"body_markdown":"Could use setters but whats the point in that? It just makes the code longer and that would eliminate the benefit of doing it like this. Assignment is side effect free and setters are black boxes.`$foo` never escapes to the caller (unless someone does assign it to a variable inside of the callback) so why *can&#39;t* they be public?","body":"Could use setters but whats the point in that? It just makes the code longer and that would eliminate the benefit of doing it like this. Assignment is side effect free and setters are black boxes.<code>$foo</code> never escapes to the caller (unless someone does assign it to a variable inside of the callback) so why <i>can&#39;t</i> they be public?"}],"tags":[],"owner":{"account_id":3946608,"reputation":139,"user_id":3258949,"display_name":"Vic"},"comment_count":2,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1471193418,"creation_date":1471191547,"answer_id":38944133,"question_id":1988016,"body_markdown":"Using Java 8&#39;s lambdas you can get even closer to *real* named parameters. \r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    foo($ -&gt; {$.foo = -10; $.bar = &quot;hello&quot;; $.array = new int[]{1, 2, 3, 4};});\r\n\r\nDo note that this probably violates a couple dozen &quot;java best practices&quot; (like anything that makes use of the `$` symbol).\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    public class Main {\r\n      public static void main(String[] args) {\r\n        // Usage\r\n        foo($ -&gt; {$.foo = -10; $.bar = &quot;hello&quot;; $.array = new int[]{1, 2, 3, 4};});\r\n        // Compare to roughly &quot;equivalent&quot; python call\r\n        // foo(foo = -10, bar = &quot;hello&quot;, array = [1, 2, 3, 4])\r\n      }\r\n\r\n      // Your parameter holder\r\n      public static class $foo {\r\n        private $foo() {}\r\n\r\n        public int foo = 2;\r\n        public String bar = &quot;test&quot;;\r\n        public int[] array = new int[]{};\r\n      }\r\n      \r\n      // Some boilerplate logic\r\n      public static void foo(Consumer&lt;$foo&gt; c) {\r\n        $foo foo = new $foo();\r\n        c.accept(foo);\r\n        foo_impl(foo);\r\n      }\r\n      \r\n      // Method with named parameters\r\n      private static void foo_impl($foo par) {\r\n        // Do something with your parameters\r\n        System.out.println(&quot;foo: &quot; + par.foo + &quot;, bar: &quot; + par.bar + &quot;, array: &quot; + Arrays.toString(par.array));\r\n      }\r\n    }\r\n\r\nPros: \r\n\r\n - Considerably shorter than any builder pattern I&#39;ve seen so far\r\n - Works for both methods and constructors\r\n - Completely type safe\r\n - It looks very close to actual named parameters in other programming languages\r\n - It&#39;s about as safe as your typical builder pattern (can set parameters multiple times)\r\n\r\nCons:\r\n \r\n - Your boss will probably lynch you for this\r\n - It&#39;s harder to tell what&#39;s going on","title":"Named Parameter idiom in Java","body":"<p>Using Java 8's lambdas you can get even closer to <em>real</em> named parameters. </p>\n\n<pre class=\"lang-java prettyprint-override\"><code>foo($ -&gt; {$.foo = -10; $.bar = \"hello\"; $.array = new int[]{1, 2, 3, 4};});\n</code></pre>\n\n<p>Do note that this probably violates a couple dozen \"java best practices\" (like anything that makes use of the <code>$</code> symbol).</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class Main {\n  public static void main(String[] args) {\n    // Usage\n    foo($ -&gt; {$.foo = -10; $.bar = \"hello\"; $.array = new int[]{1, 2, 3, 4};});\n    // Compare to roughly \"equivalent\" python call\n    // foo(foo = -10, bar = \"hello\", array = [1, 2, 3, 4])\n  }\n\n  // Your parameter holder\n  public static class $foo {\n    private $foo() {}\n\n    public int foo = 2;\n    public String bar = \"test\";\n    public int[] array = new int[]{};\n  }\n\n  // Some boilerplate logic\n  public static void foo(Consumer&lt;$foo&gt; c) {\n    $foo foo = new $foo();\n    c.accept(foo);\n    foo_impl(foo);\n  }\n\n  // Method with named parameters\n  private static void foo_impl($foo par) {\n    // Do something with your parameters\n    System.out.println(\"foo: \" + par.foo + \", bar: \" + par.bar + \", array: \" + Arrays.toString(par.array));\n  }\n}\n</code></pre>\n\n<p>Pros: </p>\n\n<ul>\n<li>Considerably shorter than any builder pattern I've seen so far</li>\n<li>Works for both methods and constructors</li>\n<li>Completely type safe</li>\n<li>It looks very close to actual named parameters in other programming languages</li>\n<li>It's about as safe as your typical builder pattern (can set parameters multiple times)</li>\n</ul>\n\n<p>Cons:</p>\n\n<ul>\n<li>Your boss will probably lynch you for this</li>\n<li>It's harder to tell what's going on</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":445017,"reputation":1103,"user_id":837189,"display_name":"scott"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1513820978,"creation_date":1513820978,"answer_id":47916808,"question_id":1988016,"body_markdown":"Any solution in Java is likely going to be pretty verbose, but it&#39;s worth mentioning that tools like [Google AutoValues][1] and [Immutables][2] will generate builder classes for you automatically using JDK compile time annotation processing.\r\n\r\nFor my case, I wanted named parameters to use in a Java enum, so a builder pattern wouldn&#39;t work because enum instances can&#39;t be instantiated by other classes. I came up with an approach similar @deamon&#39;s answer but adds compile-time checking of parameter ordering (at the expense of more code)\r\n\r\nHere&#39;s client code:\r\n\r\n    Person p = new Person( age(16), weight(100), heightInches(65) );\r\n\r\nAnd the implementation:\r\n\r\n    class Person {\r\n      static class TypedContainer&lt;T&gt; {\r\n        T val;\r\n        TypedContainer(T val) { this.val = val; }\r\n      }\r\n      static Age age(int age) { return new Age(age); }\r\n      static class Age extends TypedContainer&lt;Integer&gt; {\r\n        Age(Integer age) { super(age); }\r\n      }\r\n      static Weight weight(int weight) { return new Weight(weight); }\r\n      static class Weight extends TypedContainer&lt;Integer&gt; {\r\n        Weight(Integer weight) { super(weight); }\r\n      }\r\n      static Height heightInches(int height) { return new Height(height); }\r\n      static class Height extends TypedContainer&lt;Integer&gt; {\r\n        Height(Integer height) { super(height); }\r\n      }\r\n\r\n      private final int age;\r\n      private final int weight;\r\n      private final int height;\r\n\r\n      Person(Age age, Weight weight, Height height) {\r\n        this.age = age.val;\r\n        this.weight = weight.val;\r\n        this.height = height.val;\r\n      }\r\n      public int getAge() { return age; }\r\n      public int getWeight() { return weight; }\r\n      public int getHeight() { return height; }\r\n    }\r\n\r\n\r\n  [1]: https://github.com/google/auto/tree/master/value\r\n  [2]: https://immutables.github.io/","title":"Named Parameter idiom in Java","body":"<p>Any solution in Java is likely going to be pretty verbose, but it's worth mentioning that tools like <a href=\"https://github.com/google/auto/tree/master/value\" rel=\"nofollow noreferrer\">Google AutoValues</a> and <a href=\"https://immutables.github.io/\" rel=\"nofollow noreferrer\">Immutables</a> will generate builder classes for you automatically using JDK compile time annotation processing.</p>\n\n<p>For my case, I wanted named parameters to use in a Java enum, so a builder pattern wouldn't work because enum instances can't be instantiated by other classes. I came up with an approach similar @deamon's answer but adds compile-time checking of parameter ordering (at the expense of more code)</p>\n\n<p>Here's client code:</p>\n\n<pre><code>Person p = new Person( age(16), weight(100), heightInches(65) );\n</code></pre>\n\n<p>And the implementation:</p>\n\n<pre><code>class Person {\n  static class TypedContainer&lt;T&gt; {\n    T val;\n    TypedContainer(T val) { this.val = val; }\n  }\n  static Age age(int age) { return new Age(age); }\n  static class Age extends TypedContainer&lt;Integer&gt; {\n    Age(Integer age) { super(age); }\n  }\n  static Weight weight(int weight) { return new Weight(weight); }\n  static class Weight extends TypedContainer&lt;Integer&gt; {\n    Weight(Integer weight) { super(weight); }\n  }\n  static Height heightInches(int height) { return new Height(height); }\n  static class Height extends TypedContainer&lt;Integer&gt; {\n    Height(Integer height) { super(height); }\n  }\n\n  private final int age;\n  private final int weight;\n  private final int height;\n\n  Person(Age age, Weight weight, Height height) {\n    this.age = age.val;\n    this.weight = weight.val;\n    this.height = height.val;\n  }\n  public int getAge() { return age; }\n  public int getWeight() { return weight; }\n  public int getHeight() { return height; }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":386394,"reputation":9197,"user_id":744133,"accept_rate":57,"display_name":"YoYo"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1521427978,"creation_date":1521426281,"answer_id":49354948,"question_id":1988016,"body_markdown":"@irreputable came up with a nice solution. However - it might leave your Class instance in a invalid state, as no validation and consistency checking will happen. Hence I prefer to combine this with the Builder solution, avoiding the extra subclass to be created, although it would still subclass the builder class. Additionally, because the extra builder class makes it more verbose, I added one more method using a lambda. I added some of the other builder approaches for completeness.\r\n\r\nStarting with a class as follows:\r\n\r\n    public class Foo {\r\n      static public class Builder {\r\n        public int size;\r\n        public Color color;\r\n        public String name;\r\n        public Builder() { size = 0; color = Color.RED; name = null; }\r\n        private Builder self() { return this; }\r\n\r\n        public Builder size(int size) {this.size = size; return self();}\r\n        public Builder color(Color color) {this.color = color; return self();}\r\n        public Builder name(String name) {this.name = name; return self();}\r\n\r\n        public Foo build() {return new Foo(this);}\r\n      }\r\n      \r\n      private final int size;\r\n      private final Color color;\r\n      private final String name;\r\n      \r\n      public Foo(Builder b) {\r\n        this.size = b.size;\r\n        this.color = b.color;\r\n        this.name = b.name;\r\n      }\r\n      \r\n      public Foo(java.util.function.Consumer&lt;Builder&gt; bc) {\r\n        Builder b = new Builder();\r\n        bc.accept(b);\r\n        this.size = b.size;\r\n        this.color = b.color;\r\n        this.name = b.name;\r\n      }\r\n        \r\n      static public Builder with() {\r\n        return new Builder();\r\n      }\r\n      \r\n      public int getSize() { return this.size; }\r\n      public Color getColor() { return this.color; }  \r\n      public String getName() { return this.name; }  \r\n      \r\n    }\r\n\r\nThen using this applying the different methods:\r\n\r\n    Foo m1 = new Foo(\r\n      new Foo.Builder ()\r\n      .size(1)\r\n      .color(BLUE)\r\n      .name(&quot;Fred&quot;)\r\n    );\r\n    \r\n    Foo m2 = new Foo.Builder()\r\n      .size(1)\r\n      .color(BLUE)\r\n      .name(&quot;Fred&quot;)\r\n      .build();\r\n    \r\n    Foo m3 = Foo.with()\r\n      .size(1)\r\n      .color(BLUE)\r\n      .name(&quot;Fred&quot;)\r\n      .build();\r\n    \r\n    Foo m4 = new Foo(\r\n      new Foo.Builder() {{\r\n        size = 1;\r\n        color = BLUE;\r\n        name = &quot;Fred&quot;;\r\n      }}\r\n    );\r\n    \r\n    Foo m5 = new Foo(\r\n      (b)-&gt;{\r\n        b.size = 1;\r\n        b.color = BLUE;\r\n        b.name = &quot;Fred&quot;;\r\n      }\r\n    );\r\n\r\nIt looks like in part a total rip-off from what @LaurenceGonsalves already posted, but you will see the small difference in convention chosen.\r\n\r\nI am wonder, if JLS would ever implement named parameters, how they would do it? Would they be extending on one of the existing idioms by providing a short-form support for it? Also how does Scala support named parameters?\r\n\r\nHmmm - enough to research, and maybe a new question.\r\n","title":"Named Parameter idiom in Java","body":"<p>@irreputable came up with a nice solution. However - it might leave your Class instance in a invalid state, as no validation and consistency checking will happen. Hence I prefer to combine this with the Builder solution, avoiding the extra subclass to be created, although it would still subclass the builder class. Additionally, because the extra builder class makes it more verbose, I added one more method using a lambda. I added some of the other builder approaches for completeness.</p>\n\n<p>Starting with a class as follows:</p>\n\n<pre><code>public class Foo {\n  static public class Builder {\n    public int size;\n    public Color color;\n    public String name;\n    public Builder() { size = 0; color = Color.RED; name = null; }\n    private Builder self() { return this; }\n\n    public Builder size(int size) {this.size = size; return self();}\n    public Builder color(Color color) {this.color = color; return self();}\n    public Builder name(String name) {this.name = name; return self();}\n\n    public Foo build() {return new Foo(this);}\n  }\n\n  private final int size;\n  private final Color color;\n  private final String name;\n\n  public Foo(Builder b) {\n    this.size = b.size;\n    this.color = b.color;\n    this.name = b.name;\n  }\n\n  public Foo(java.util.function.Consumer&lt;Builder&gt; bc) {\n    Builder b = new Builder();\n    bc.accept(b);\n    this.size = b.size;\n    this.color = b.color;\n    this.name = b.name;\n  }\n\n  static public Builder with() {\n    return new Builder();\n  }\n\n  public int getSize() { return this.size; }\n  public Color getColor() { return this.color; }  \n  public String getName() { return this.name; }  \n\n}\n</code></pre>\n\n<p>Then using this applying the different methods:</p>\n\n<pre><code>Foo m1 = new Foo(\n  new Foo.Builder ()\n  .size(1)\n  .color(BLUE)\n  .name(\"Fred\")\n);\n\nFoo m2 = new Foo.Builder()\n  .size(1)\n  .color(BLUE)\n  .name(\"Fred\")\n  .build();\n\nFoo m3 = Foo.with()\n  .size(1)\n  .color(BLUE)\n  .name(\"Fred\")\n  .build();\n\nFoo m4 = new Foo(\n  new Foo.Builder() {{\n    size = 1;\n    color = BLUE;\n    name = \"Fred\";\n  }}\n);\n\nFoo m5 = new Foo(\n  (b)-&gt;{\n    b.size = 1;\n    b.color = BLUE;\n    b.name = \"Fred\";\n  }\n);\n</code></pre>\n\n<p>It looks like in part a total rip-off from what @LaurenceGonsalves already posted, but you will see the small difference in convention chosen.</p>\n\n<p>I am wonder, if JLS would ever implement named parameters, how they would do it? Would they be extending on one of the existing idioms by providing a short-form support for it? Also how does Scala support named parameters?</p>\n\n<p>Hmmm - enough to research, and maybe a new question.</p>\n"},{"comments":[{"owner":{"account_id":2024343,"reputation":924,"user_id":1809799,"display_name":"Ren&#233;"},"score":0,"creation_date":1546962611,"post_id":51637774,"comment_id":95022949,"body_markdown":"Google auto/value serves a similiar purpose but uses the annotation processing framework, which is much safer (stuff will still work after an upgrade of the JVM) than project Lombocks byte code manipulation.","body":"Google auto/value serves a similiar purpose but uses the annotation processing framework, which is much safer (stuff will still work after an upgrade of the JVM) than project Lombocks byte code manipulation."},{"owner":{"account_id":1479307,"reputation":3972,"user_id":1389023,"display_name":"Istvan Devai"},"score":1,"creation_date":1547063448,"post_id":51637774,"comment_id":95067318,"body_markdown":"I think the Google auto/value requires a bit of an extra mile compared to using Lombok. Lombok&#39;s approach is more or less compatible with traditional JavaBean writing (eg you can instantiate via new, fields show up properly in a debugger, etc.). I&#39;m also not a big fan of the byte code manpiluation + IDE plugin solution what Lombok uses, but I have to admit, that in practice it works OK. No problems so far with JDK version changes, reflection, etc.","body":"I think the Google auto/value requires a bit of an extra mile compared to using Lombok. Lombok&#39;s approach is more or less compatible with traditional JavaBean writing (eg you can instantiate via new, fields show up properly in a debugger, etc.). I&#39;m also not a big fan of the byte code manpiluation + IDE plugin solution what Lombok uses, but I have to admit, that in practice it works OK. No problems so far with JDK version changes, reflection, etc."},{"owner":{"account_id":2024343,"reputation":924,"user_id":1809799,"display_name":"Ren&#233;"},"score":0,"creation_date":1547064354,"post_id":51637774,"comment_id":95067678,"body_markdown":"Yes, that is true. For auto/value you need to provide an abstract class that will then be implemented. Lombok needs a lot less code. So pros and cons need to be compared.","body":"Yes, that is true. For auto/value you need to provide an abstract class that will then be implemented. Lombok needs a lot less code. So pros and cons need to be compared."}],"tags":[],"owner":{"account_id":1479307,"reputation":3972,"user_id":1389023,"display_name":"Istvan Devai"},"comment_count":3,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1533139473,"creation_date":1533139473,"answer_id":51637774,"question_id":1988016,"body_markdown":"You can use project Lombok&#39;s [@Builder annotation][1] to simulate named parameters in Java. This will generate a builder for you which you can use to create new instances of any class (both classes you&#39;ve written and those coming from external libraries).\r\n\r\nThis is how to enable it on a class:\r\n\r\n    @Getter\r\n    @Builder\r\n    public class User {\r\n        private final Long id;\r\n        private final String name;\r\n    }\r\n\r\nAfterwards you can use this by:\r\n\r\n    User userInstance = User.builder()\r\n        .id(1L)\r\n        .name(&quot;joe&quot;)\r\n        .build();\r\n\r\nIf you&#39;d like to create such a Builder for a class coming from a library, create an annotated static method like this:\r\n\r\n    class UserBuilder {\r\n        @Builder(builderMethodName = &quot;builder&quot;)\r\n        public static LibraryUser newLibraryUser(Long id, String name) {\r\n            return new LibraryUser(id, name);\r\n        }\r\n      }\r\n\r\nThis will generate a method named &quot;builder&quot; which can be called by:\r\n\r\n    LibraryUser user = UserBuilder.builder()\r\n        .id(1L)\r\n        .name(&quot;joe&quot;)\r\n        .build();\r\n\r\n  [1]: https://projectlombok.org/features/Builder","title":"Named Parameter idiom in Java","body":"<p>You can use project Lombok's <a href=\"https://projectlombok.org/features/Builder\" rel=\"nofollow noreferrer\">@Builder annotation</a> to simulate named parameters in Java. This will generate a builder for you which you can use to create new instances of any class (both classes you've written and those coming from external libraries).</p>\n\n<p>This is how to enable it on a class:</p>\n\n<pre><code>@Getter\n@Builder\npublic class User {\n    private final Long id;\n    private final String name;\n}\n</code></pre>\n\n<p>Afterwards you can use this by:</p>\n\n<pre><code>User userInstance = User.builder()\n    .id(1L)\n    .name(\"joe\")\n    .build();\n</code></pre>\n\n<p>If you'd like to create such a Builder for a class coming from a library, create an annotated static method like this:</p>\n\n<pre><code>class UserBuilder {\n    @Builder(builderMethodName = \"builder\")\n    public static LibraryUser newLibraryUser(Long id, String name) {\n        return new LibraryUser(id, name);\n    }\n  }\n</code></pre>\n\n<p>This will generate a method named \"builder\" which can be called by:</p>\n\n<pre><code>LibraryUser user = UserBuilder.builder()\n    .id(1L)\n    .name(\"joe\")\n    .build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1140418,"reputation":5502,"user_id":1124509,"accept_rate":53,"display_name":"Reto H&#246;hener"},"comment_count":0,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1534844315,"creation_date":1534844315,"answer_id":51945792,"question_id":1988016,"body_markdown":"I feel like the &quot;comment-workaround&quot; deserves it&#39;s own answer (hidden in existing answers and mentioned in comments here).\r\n\r\n    someMethod(/* width */ 1024, /* height */ 768);","title":"Named Parameter idiom in Java","body":"<p>I feel like the \"comment-workaround\" deserves it's own answer (hidden in existing answers and mentioned in comments here).</p>\n\n<pre><code>someMethod(/* width */ 1024, /* height */ 768);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":494969,"reputation":866,"user_id":1152525,"display_name":"Ben"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1609300127,"creation_date":1609300127,"answer_id":65501792,"question_id":1988016,"body_markdown":"Here is a compiler-checked Builder pattern. Caveats:\r\n\r\n* this can&#39;t prevent double assignment of an argument\r\n* you can&#39;t have a nice `.build()` method\r\n* one generic parameter per field\r\n\r\nSo you need something outside the class that will fail if not passed `Builder&lt;Yes, Yes, Yes&gt;`. See the `getSum` static method as an example.\r\n\r\n```java\r\nclass No {}\r\nclass Yes {}\r\n\r\nclass Builder&lt;K1, K2, K3&gt; {\r\n  int arg1, arg2, arg3;\r\n\r\n  Builder() {}\r\n\r\n  static Builder&lt;No, No, No&gt; make() {\r\n    return new Builder&lt;No, No, No&gt;();\r\n  }\r\n\r\n  @SuppressWarnings(&quot;unchecked&quot;)\r\n  Builder&lt;Yes, K2, K3&gt; arg1(int val) {\r\n    arg1 = val;\r\n    return (Builder&lt;Yes, K2, K3&gt;) this;\r\n  }\r\n\r\n  @SuppressWarnings(&quot;unchecked&quot;)\r\n  Builder&lt;K1, Yes, K3&gt; arg2(int val) {\r\n    arg2 = val;\r\n    return (Builder&lt;K1, Yes, K3&gt;) this;\r\n  }\r\n\r\n  @SuppressWarnings(&quot;unchecked&quot;)\r\n  Builder&lt;K1, K2, Yes&gt; arg3(int val) {\r\n    this.arg3 = val;\r\n    return (Builder&lt;K1, K2, Yes&gt;) this;\r\n  }\r\n\r\n  static int getSum(Builder&lt;Yes, Yes, Yes&gt; build) {\r\n    return build.arg1 + build.arg2 + build.arg3;\r\n  }\r\n\r\n  public static void main(String[] args) {\r\n    // Compiles!\r\n    int v1 = getSum(make().arg1(44).arg3(22).arg2(11));\r\n    // Builder.java:40: error: incompatible types:\r\n    // Builder&lt;Yes,No,Yes&gt; cannot be converted to Builder&lt;Yes,Yes,Yes&gt;\r\n    int v2 = getSum(make().arg1(44).arg3(22));\r\n    System.out.println(&quot;Got: &quot; + v1 + &quot; and &quot; + v2);\r\n  }\r\n}\r\n```\r\n\r\n**Caveats explained**. Why no build method? The trouble is that it&#39;s going to be in the `Builder` class, and it will be parameterized with `K1, K2, K3`, etc. As the method itself has to compile, everything it calls must compile. So, generally, we can&#39;t put a compilation test in a method of the class itself.\r\n\r\nFor a similar reason, we can&#39;t prevent double assignment using a builder model.","title":"Named Parameter idiom in Java","body":"<p>Here is a compiler-checked Builder pattern. Caveats:</p>\n<ul>\n<li>this can't prevent double assignment of an argument</li>\n<li>you can't have a nice <code>.build()</code> method</li>\n<li>one generic parameter per field</li>\n</ul>\n<p>So you need something outside the class that will fail if not passed <code>Builder&lt;Yes, Yes, Yes&gt;</code>. See the <code>getSum</code> static method as an example.</p>\n<pre class=\"lang-java prettyprint-override\"><code>class No {}\nclass Yes {}\n\nclass Builder&lt;K1, K2, K3&gt; {\n  int arg1, arg2, arg3;\n\n  Builder() {}\n\n  static Builder&lt;No, No, No&gt; make() {\n    return new Builder&lt;No, No, No&gt;();\n  }\n\n  @SuppressWarnings(&quot;unchecked&quot;)\n  Builder&lt;Yes, K2, K3&gt; arg1(int val) {\n    arg1 = val;\n    return (Builder&lt;Yes, K2, K3&gt;) this;\n  }\n\n  @SuppressWarnings(&quot;unchecked&quot;)\n  Builder&lt;K1, Yes, K3&gt; arg2(int val) {\n    arg2 = val;\n    return (Builder&lt;K1, Yes, K3&gt;) this;\n  }\n\n  @SuppressWarnings(&quot;unchecked&quot;)\n  Builder&lt;K1, K2, Yes&gt; arg3(int val) {\n    this.arg3 = val;\n    return (Builder&lt;K1, K2, Yes&gt;) this;\n  }\n\n  static int getSum(Builder&lt;Yes, Yes, Yes&gt; build) {\n    return build.arg1 + build.arg2 + build.arg3;\n  }\n\n  public static void main(String[] args) {\n    // Compiles!\n    int v1 = getSum(make().arg1(44).arg3(22).arg2(11));\n    // Builder.java:40: error: incompatible types:\n    // Builder&lt;Yes,No,Yes&gt; cannot be converted to Builder&lt;Yes,Yes,Yes&gt;\n    int v2 = getSum(make().arg1(44).arg3(22));\n    System.out.println(&quot;Got: &quot; + v1 + &quot; and &quot; + v2);\n  }\n}\n</code></pre>\n<p><strong>Caveats explained</strong>. Why no build method? The trouble is that it's going to be in the <code>Builder</code> class, and it will be parameterized with <code>K1, K2, K3</code>, etc. As the method itself has to compile, everything it calls must compile. So, generally, we can't put a compilation test in a method of the class itself.</p>\n<p>For a similar reason, we can't prevent double assignment using a builder model.</p>\n"},{"tags":[],"owner":{"account_id":956645,"reputation":1249,"user_id":981820,"accept_rate":90,"display_name":"Next Developer"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1630348548,"creation_date":1630348548,"answer_id":68988862,"question_id":1988016,"body_markdown":"You can imitate named parameters applying this pattern:\r\n\r\n```\r\npublic static class CarParameters {\r\n        \r\n    // to make it shorter getters and props are omitted\r\n        \r\n    public ModelParameter setName(String name) {\r\n        this.name = name;\r\n        return new ModelParameter();\r\n    }\r\n    public class ModelParameter {\r\n        public PriceParameter setModel(String model) {\r\n            CarParameters.this.model = model;\r\n            return new PriceParameter();\r\n        }\r\n    }\r\n    public class PriceParameter {\r\n        public YearParameter setPrice(double price) {\r\n            CarParameters.this.price = price;\r\n            return new YearParameter();\r\n        }\r\n    }\r\n    public class YearParameter {\r\n        public ColorParameter setYear(int year) {\r\n            CarParameters.this.year = year;\r\n            return new ColorParameter();\r\n        }\r\n    }\r\n    public class ColorParameter {\r\n        public CarParameters setColor(Color color) {\r\n            CarParameters.this.color = color;\r\n            return new CarParameters();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nand then you can pass it to your method as this:\r\n\r\n```\r\nfactory.create(new CarParameters()\r\n        .setName(&quot;Ford&quot;)\r\n        .setModel(&quot;Focus&quot;)\r\n        .setPrice(20000)\r\n        .setYear(2011)\r\n        .setColor(BLUE));\r\n```\r\n\r\nYou can read more here https://medium.com/@ivorobioff/named-parameters-in-java-9072862cfc8c","title":"Named Parameter idiom in Java","body":"<p>You can imitate named parameters applying this pattern:</p>\n<pre><code>public static class CarParameters {\n        \n    // to make it shorter getters and props are omitted\n        \n    public ModelParameter setName(String name) {\n        this.name = name;\n        return new ModelParameter();\n    }\n    public class ModelParameter {\n        public PriceParameter setModel(String model) {\n            CarParameters.this.model = model;\n            return new PriceParameter();\n        }\n    }\n    public class PriceParameter {\n        public YearParameter setPrice(double price) {\n            CarParameters.this.price = price;\n            return new YearParameter();\n        }\n    }\n    public class YearParameter {\n        public ColorParameter setYear(int year) {\n            CarParameters.this.year = year;\n            return new ColorParameter();\n        }\n    }\n    public class ColorParameter {\n        public CarParameters setColor(Color color) {\n            CarParameters.this.color = color;\n            return new CarParameters();\n        }\n    }\n}\n</code></pre>\n<p>and then you can pass it to your method as this:</p>\n<pre><code>factory.create(new CarParameters()\n        .setName(&quot;Ford&quot;)\n        .setModel(&quot;Focus&quot;)\n        .setPrice(20000)\n        .setYear(2011)\n        .setColor(BLUE));\n</code></pre>\n<p>You can read more here <a href=\"https://medium.com/@ivorobioff/named-parameters-in-java-9072862cfc8c\" rel=\"nofollow noreferrer\">https://medium.com/@ivorobioff/named-parameters-in-java-9072862cfc8c</a></p>\n"},{"tags":[],"owner":{"account_id":24144674,"reputation":11,"user_id":18110467,"display_name":"mmarkholt"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1643897348,"creation_date":1643897348,"answer_id":70972737,"question_id":1988016,"body_markdown":"Now that we&#39;re all on Java 17 ;-), using records is a super-easy way to imitate this idiom:\r\n\r\n    public class OrderTemplate() {\r\n        private int tradeSize, limitDistance, backoffDistance;\r\n    \r\n        public record TradeSize( int value ) {}\r\n        public record LimitDistance( int value ) {}\r\n        public record BackoffDistance( int value ) {}\r\n        public OrderTemplate( TradeSize t, LimitDistance d, BackoffDistance b ) {\r\n          this.tradeSize = t.value();\r\n          this.limitDistance = d.value();\r\n          this.backoffDistance = b.value();\r\n        }\r\n    }\r\n\r\nThen you can call:\r\n\r\n    var t = new OrderTemplate( new TradeSize(30), new LimitDistance(182), new BackoffDistance(85) );\r\n\r\nWhich I&#39;ve found extremely easy to read and I&#39;ve completely stopped getting all the int parameters mixed up (&quot;was it size first or distance...&quot;).\r\n\r\n\r\n","title":"Named Parameter idiom in Java","body":"<p>Now that we're all on Java 17 ;-), using records is a super-easy way to imitate this idiom:</p>\n<pre><code>public class OrderTemplate() {\n    private int tradeSize, limitDistance, backoffDistance;\n\n    public record TradeSize( int value ) {}\n    public record LimitDistance( int value ) {}\n    public record BackoffDistance( int value ) {}\n    public OrderTemplate( TradeSize t, LimitDistance d, BackoffDistance b ) {\n      this.tradeSize = t.value();\n      this.limitDistance = d.value();\n      this.backoffDistance = b.value();\n    }\n}\n</code></pre>\n<p>Then you can call:</p>\n<pre><code>var t = new OrderTemplate( new TradeSize(30), new LimitDistance(182), new BackoffDistance(85) );\n</code></pre>\n<p>Which I've found extremely easy to read and I've completely stopped getting all the int parameters mixed up (&quot;was it size first or distance...&quot;).</p>\n"},{"tags":[],"owner":{"account_id":11238249,"reputation":3,"user_id":8243552,"display_name":"user8243552"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645068098,"creation_date":1645068098,"answer_id":71152102,"question_id":1988016,"body_markdown":"    package org.xxx.lang;\r\n    \r\n    /**\r\n     * A hack to work around the fact that java does not support\r\n     * named parameters in function calls.\r\n     * \r\n     * Its easy to swap a few String parameters, for example.\r\n     * Some IDEs are better than others than showing the parameter names.\r\n     * This will enforce a compiler error on an inadvertent swap. \r\n     *\r\n     * @param &lt;T&gt;\r\n     */\r\n    public class Datum&lt;T&gt; {\r\n    \r\n    \tpublic final T v;\r\n    \t\r\n    \tpublic Datum(T v) {\r\n    \t\tthis.v = v;\r\n    \t}\r\n    \t\r\n    \tpublic T v() {\r\n    \t\treturn v;\r\n    \t}\r\n    \t\r\n    \tpublic T value() {\r\n    \t\treturn v;\r\n    \t}\r\n    \t\r\n    \tpublic String toString() {\r\n    \t\treturn v.toString();\r\n    \t}\r\n    }\r\n\r\n# Example\r\n\r\n    class Catalog extends Datum&lt;String&gt; {\r\n    \t\tpublic Catalog(String v) {\r\n    \t\t\tsuper(v);\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tclass Schema extends Datum&lt;String&gt; {\r\n    \t\tpublic Schema(String v) {\r\n    \t\t\tsuper(v);\r\n    \t\t}\r\n    \t}\r\n    class Meta {\r\n    \t\tpublic void getTables(String catalog, String schema, String tablePattern) {\r\n    \t\t\t// pseudo DatabaseMetaData.getTables();\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \tclass MetaChecked {\r\n    \t\tpublic void getTables(Catalog catalog, Schema schema, String tablePattern) {\r\n    \t\t\t// pseudo DatabaseMetaData.getTables();\r\n    \t\t}\r\n    \t}\r\n    \r\n    \t@Test\r\n    \tpublic void test() {\r\n    \t\tCatalog c = new Catalog(&quot;test&quot;);\r\n    \t\tassertEquals(&quot;test&quot;,c.v);\r\n    \t\tassertEquals(&quot;test&quot;,c.v());\r\n    \t\tassertEquals(&quot;test&quot;,c.value());\r\n    \t\tString t = c.v;\r\n    \t\tassertEquals(&quot;test&quot;,t);\r\n    \t}\r\n    \r\n    \tpublic void uncheckedExample() {\r\n    \t\tnew Meta().getTables(&quot;schema&quot;,&quot;catalog&quot;,&quot;%&quot;); \r\n    \t\tnew Meta().getTables(&quot;catalog&quot;,&quot;schema&quot;,&quot;%&quot;); // ooops\r\n    \t}\r\n    \t\r\n    \tpublic void checkedExample() {\r\n    \t\t // new MetaChecked().getTables(new Schema(&quot;schema&quot;),new Catalog(&quot;catalog&quot;),&quot;%&quot;); // won&#39;t compile\r\n    \t\t  new MetaChecked().getTables(new Catalog(&quot;catalog&quot;), new Schema(&quot;schema&quot;),&quot;%&quot;); \r\n    \t}","title":"Named Parameter idiom in Java","body":"<pre><code>package org.xxx.lang;\n\n/**\n * A hack to work around the fact that java does not support\n * named parameters in function calls.\n * \n * Its easy to swap a few String parameters, for example.\n * Some IDEs are better than others than showing the parameter names.\n * This will enforce a compiler error on an inadvertent swap. \n *\n * @param &lt;T&gt;\n */\npublic class Datum&lt;T&gt; {\n\n    public final T v;\n    \n    public Datum(T v) {\n        this.v = v;\n    }\n    \n    public T v() {\n        return v;\n    }\n    \n    public T value() {\n        return v;\n    }\n    \n    public String toString() {\n        return v.toString();\n    }\n}\n</code></pre>\n<h1>Example</h1>\n<pre><code>class Catalog extends Datum&lt;String&gt; {\n        public Catalog(String v) {\n            super(v);\n        }\n    }\n\n    class Schema extends Datum&lt;String&gt; {\n        public Schema(String v) {\n            super(v);\n        }\n    }\nclass Meta {\n        public void getTables(String catalog, String schema, String tablePattern) {\n            // pseudo DatabaseMetaData.getTables();\n        }\n    }\n    \n    class MetaChecked {\n        public void getTables(Catalog catalog, Schema schema, String tablePattern) {\n            // pseudo DatabaseMetaData.getTables();\n        }\n    }\n\n    @Test\n    public void test() {\n        Catalog c = new Catalog(&quot;test&quot;);\n        assertEquals(&quot;test&quot;,c.v);\n        assertEquals(&quot;test&quot;,c.v());\n        assertEquals(&quot;test&quot;,c.value());\n        String t = c.v;\n        assertEquals(&quot;test&quot;,t);\n    }\n\n    public void uncheckedExample() {\n        new Meta().getTables(&quot;schema&quot;,&quot;catalog&quot;,&quot;%&quot;); \n        new Meta().getTables(&quot;catalog&quot;,&quot;schema&quot;,&quot;%&quot;); // ooops\n    }\n    \n    public void checkedExample() {\n         // new MetaChecked().getTables(new Schema(&quot;schema&quot;),new Catalog(&quot;catalog&quot;),&quot;%&quot;); // won't compile\n          new MetaChecked().getTables(new Catalog(&quot;catalog&quot;), new Schema(&quot;schema&quot;),&quot;%&quot;); \n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26090602,"reputation":1,"user_id":19787559,"display_name":"Antonio Morales"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668648850,"creation_date":1668648850,"answer_id":74469152,"question_id":1988016,"body_markdown":"maybe can use this:\r\n\r\n    HashMapFlow&lt;String,Object&gt;  args2 = HashMapFlow.of( &quot;name&quot;, &quot;Aton&quot;, &quot;age&quot;, 21 );\r\n        Integer age = args2.get(&quot;age&quot;,51);\r\n        System.out.println(args2.get(&quot;name&quot;));\r\n        System.out.println(age);\r\n        System.out.println((Integer)args2.get(&quot;dayOfBirth&quot;,26));\r\n\r\nclass:\r\n```\r\nimport java.util.HashMap;\r\n\r\npublic class HashMapFlow&lt;K,V&gt; extends HashMap {\r\n\r\n    public static &lt;K, V&gt; HashMapFlow&lt;K, V&gt; of(Object... args) {\r\n        HashMapFlow&lt;K, V&gt; map = new HashMapFlow();\r\n        for( int i = 0; i &lt; args.length; i+=2) {\r\n            map.put((K)args[i], (V)args[i+1]);\r\n        }\r\n        return map;\r\n    }\r\n\r\n    public &lt;T&gt; T get(Object key, V defaultValue) {\r\n        V result = (V)get(key);\r\n        if( result == null ) {\r\n            result = defaultValue;\r\n        }\r\n        return (T)result;\r\n    }\r\n\r\n    public HashMapFlow add(K key, V value) {\r\n        put(key,value);\r\n        return this;\r\n    }\r\n}\r\n\r\n","title":"Named Parameter idiom in Java","body":"<p>maybe can use this:</p>\n<pre><code>HashMapFlow&lt;String,Object&gt;  args2 = HashMapFlow.of( &quot;name&quot;, &quot;Aton&quot;, &quot;age&quot;, 21 );\n    Integer age = args2.get(&quot;age&quot;,51);\n    System.out.println(args2.get(&quot;name&quot;));\n    System.out.println(age);\n    System.out.println((Integer)args2.get(&quot;dayOfBirth&quot;,26));\n</code></pre>\n<p>class:</p>\n<pre><code>import java.util.HashMap;\n\npublic class HashMapFlow&lt;K,V&gt; extends HashMap {\n\n    public static &lt;K, V&gt; HashMapFlow&lt;K, V&gt; of(Object... args) {\n        HashMapFlow&lt;K, V&gt; map = new HashMapFlow();\n        for( int i = 0; i &lt; args.length; i+=2) {\n            map.put((K)args[i], (V)args[i+1]);\n        }\n        return map;\n    }\n\n    public &lt;T&gt; T get(Object key, V defaultValue) {\n        V result = (V)get(key);\n        if( result == null ) {\n            result = defaultValue;\n        }\n        return (T)result;\n    }\n\n    public HashMapFlow add(K key, V value) {\n        put(key,value);\n        return this;\n    }\n}\n\n</code></pre>\n"}],"owner":{"account_id":86575,"reputation":2988,"user_id":240656,"accept_rate":88,"display_name":"Red Hyena"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":82135,"favorite_count":0,"down_vote_count":1,"up_vote_count":105,"accepted_answer_id":1988035,"answer_count":21,"score":104,"last_activity_date":1689859587,"creation_date":1262326713,"question_id":1988016,"body_markdown":"How to implement Named Parameter idiom in Java? (especially for constructors)\r\n\r\nI am looking for an Objective-C like syntax and not like the one used in JavaBeans.\r\n\r\nA small code example would be fine.","title":"Named Parameter idiom in Java","body":"<p>How to implement Named Parameter idiom in Java? (especially for constructors)</p>\n<p>I am looking for an Objective-C like syntax and not like the one used in JavaBeans.</p>\n<p>A small code example would be fine.</p>\n"},{"tags":["java","image","pdf","background","pdfbox"],"comments":[{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1689859428,"post_id":76729430,"comment_id":135275133,"body_markdown":"Your content is really two stamp annotations, and these are on top AFAIK.","body":"Your content is really two stamp annotations, and these are on top AFAIK."},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1689872663,"post_id":76729430,"comment_id":135278283,"body_markdown":"Indeed, the static content of the page in your original PDF is a single space character. The tables you see are bitmap images overlaying the static content as appearances of stamp annotations. If you want your image to cover even page annotations, add it in a new annotation at the end of the annotation list of the page.","body":"Indeed, the static content of the page in your original PDF is a single space character. The tables you see are bitmap images overlaying the static content as appearances of stamp annotations. If you want your image to cover even page annotations, add it in a new annotation at the end of the annotation list of the page."}],"owner":{"account_id":29047930,"reputation":1,"user_id":22251358,"display_name":"Yash Patel"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689859139,"creation_date":1689852906,"question_id":76729430,"body_markdown":"I am using apache pdfbox jar to embed image to attached PDF with below JAVA code:\r\n\r\n```\r\n\r\nimport org.apache.pdfbox.io.MemoryUsageSetting;\r\nimport org.apache.pdfbox.pdmodel.PDDocument;\r\nimport org.apache.pdfbox.pdmodel.PDPage;\r\nimport org.apache.pdfbox.pdmodel.PDPageContentStream;\r\nimport org.apache.pdfbox.pdmodel.graphics.image.JPEGFactory;\r\nimport org.apache.pdfbox.pdmodel.graphics.image.PDImageXObject;\r\n\r\nimport javax.imageio.ImageIO;\r\nimport java.awt.image.BufferedImage;\r\nimport java.io.File;\r\nimport java.io.FileInputStream;\r\n\r\npublic class importImageToPDF1 {\r\n    public static void main(String[] args) throws Exception {\r\n        PDDocument pdDocument = null;\r\n        try {\r\n            String sourceFilePath = &quot;D:\\\\files\\\\sourceFile.pdf&quot;;\r\n            String destinationFilePath = &quot;D:\\\\files\\\\outputFile.pdf&quot;;\r\n            String imagePath = &quot;D:\\\\files\\\\image.png&quot;;\r\n\r\n            pdDocument = PDDocument.load(new File(sourceFilePath), MemoryUsageSetting.setupTempFileOnly());\r\n            pdDocument.setAllSecurityToBeRemoved(true);\r\n\r\n            PDPage pdPage = pdDocument.getPage(0);\r\n\r\n            BufferedImage bufferedImage = ImageIO.read(new FileInputStream(imagePath));\r\n            PDPageContentStream pageContentStream = new PDPageContentStream(pdDocument, pdPage, PDPageContentStream.AppendMode.APPEND, true, true);\r\n            pageContentStream.saveGraphicsState();\r\n\r\n            PDImageXObject image = JPEGFactory.createFromImage(pdDocument, bufferedImage);\r\n\r\n            pageContentStream.drawImage(image, 10, 730, 100, 100);\r\n            pageContentStream.restoreGraphicsState();\r\n            pageContentStream.close();\r\n            pdDocument.save(new File(destinationFilePath));\r\n            pdDocument.close();\r\n        } catch (Exception e) {\r\n            throw e;\r\n        } finally {\r\n            if (pdDocument != null) {\r\n                pdDocument.close();\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n  \r\nHere is link for source PDF:  \r\n&lt;https://drive.google.com/drive/folders/1gP1EIso0Ww4sw-cliVVEb_YI6cys2kEj?usp=sharing&gt;\r\n\r\nwith this code image embedded in background and hide behind specific element. Embedded image should be in foreground of pdf. that means image should be viewed properly.   \r\n  \r\nI want image to be display in foreground above all the elements in PDF.\r\n\r\nNote: Image getting viewed properly after embedding in other PDFs, only having issue with attached pdf.","title":"Issue: Image hiding behind PDF element while embedding through Apache pdfbox library","body":"<p>I am using apache pdfbox jar to embed image to attached PDF with below JAVA code:</p>\n<pre><code>\nimport org.apache.pdfbox.io.MemoryUsageSetting;\nimport org.apache.pdfbox.pdmodel.PDDocument;\nimport org.apache.pdfbox.pdmodel.PDPage;\nimport org.apache.pdfbox.pdmodel.PDPageContentStream;\nimport org.apache.pdfbox.pdmodel.graphics.image.JPEGFactory;\nimport org.apache.pdfbox.pdmodel.graphics.image.PDImageXObject;\n\nimport javax.imageio.ImageIO;\nimport java.awt.image.BufferedImage;\nimport java.io.File;\nimport java.io.FileInputStream;\n\npublic class importImageToPDF1 {\n    public static void main(String[] args) throws Exception {\n        PDDocument pdDocument = null;\n        try {\n            String sourceFilePath = &quot;D:\\\\files\\\\sourceFile.pdf&quot;;\n            String destinationFilePath = &quot;D:\\\\files\\\\outputFile.pdf&quot;;\n            String imagePath = &quot;D:\\\\files\\\\image.png&quot;;\n\n            pdDocument = PDDocument.load(new File(sourceFilePath), MemoryUsageSetting.setupTempFileOnly());\n            pdDocument.setAllSecurityToBeRemoved(true);\n\n            PDPage pdPage = pdDocument.getPage(0);\n\n            BufferedImage bufferedImage = ImageIO.read(new FileInputStream(imagePath));\n            PDPageContentStream pageContentStream = new PDPageContentStream(pdDocument, pdPage, PDPageContentStream.AppendMode.APPEND, true, true);\n            pageContentStream.saveGraphicsState();\n\n            PDImageXObject image = JPEGFactory.createFromImage(pdDocument, bufferedImage);\n\n            pageContentStream.drawImage(image, 10, 730, 100, 100);\n            pageContentStream.restoreGraphicsState();\n            pageContentStream.close();\n            pdDocument.save(new File(destinationFilePath));\n            pdDocument.close();\n        } catch (Exception e) {\n            throw e;\n        } finally {\n            if (pdDocument != null) {\n                pdDocument.close();\n            }\n        }\n    }\n}\n</code></pre>\n<p>Here is link for source PDF:<br />\n<a href=\"https://drive.google.com/drive/folders/1gP1EIso0Ww4sw-cliVVEb_YI6cys2kEj?usp=sharing\" rel=\"nofollow noreferrer\">https://drive.google.com/drive/folders/1gP1EIso0Ww4sw-cliVVEb_YI6cys2kEj?usp=sharing</a></p>\n<p>with this code image embedded in background and hide behind specific element. Embedded image should be in foreground of pdf. that means image should be viewed properly.</p>\n<p>I want image to be display in foreground above all the elements in PDF.</p>\n<p>Note: Image getting viewed properly after embedding in other PDFs, only having issue with attached pdf.</p>\n"},{"tags":["java","mysql","testing","dbunit","spring-test-dbunit"],"answers":[{"tags":[],"owner":{"account_id":49636,"reputation":352,"user_id":147905,"display_name":"Aleksi"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1543587125,"creation_date":1543587125,"answer_id":53559173,"question_id":52845001,"body_markdown":"One potential solution is to define your own DataTypeFactory and use that. I did it to support the PostgreSQL JSONB datatype, something similar could be made for MySQL.\r\n\r\n\r\n    class NewPostgresqlDataTypeFactory : PostgresqlDataTypeFactory() {\r\n        override fun createDataType(sqlType: Int, sqlTypeName: String?): DataType {\r\n            return when (sqlTypeName) {\r\n                &quot;jsonb&quot; -&gt; return JsonbDataType()\r\n                else -&gt; super.createDataType(sqlType, sqlTypeName)\r\n            }\r\n        }\r\n    \r\n        class JsonbDataType : AbstractDataType(&quot;jsonb&quot;, Types.OTHER, String::class.java, false) {\r\n            override fun typeCast(obj: Any?): Any {\r\n                return obj.toString()\r\n            }\r\n    \r\n            override fun getSqlValue(column: Int, resultSet: ResultSet): Any {\r\n                return resultSet.getString(column)\r\n            }\r\n    \r\n            override fun setSqlValue(value: Any?, column: Int, statement: PreparedStatement) {\r\n                val jsonObj = PGobject()\r\n                jsonObj.type = &quot;json&quot;\r\n                jsonObj.value = value?.toString()\r\n                statement.setObject(column, jsonObj)\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n","title":"DbUnit and JSON column type support","body":"<p>One potential solution is to define your own DataTypeFactory and use that. I did it to support the PostgreSQL JSONB datatype, something similar could be made for MySQL.</p>\n\n<pre><code>class NewPostgresqlDataTypeFactory : PostgresqlDataTypeFactory() {\n    override fun createDataType(sqlType: Int, sqlTypeName: String?): DataType {\n        return when (sqlTypeName) {\n            \"jsonb\" -&gt; return JsonbDataType()\n            else -&gt; super.createDataType(sqlType, sqlTypeName)\n        }\n    }\n\n    class JsonbDataType : AbstractDataType(\"jsonb\", Types.OTHER, String::class.java, false) {\n        override fun typeCast(obj: Any?): Any {\n            return obj.toString()\n        }\n\n        override fun getSqlValue(column: Int, resultSet: ResultSet): Any {\n            return resultSet.getString(column)\n        }\n\n        override fun setSqlValue(value: Any?, column: Int, statement: PreparedStatement) {\n            val jsonObj = PGobject()\n            jsonObj.type = \"json\"\n            jsonObj.value = value?.toString()\n            statement.setObject(column, jsonObj)\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":145555,"reputation":21469,"user_id":355438,"display_name":"Ilya Serbis"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1556146622,"creation_date":1556146622,"answer_id":55839637,"question_id":52845001,"body_markdown":"In case someone needs it this is the Java version of [@Aleksi&#39;s solution][1] for the PostgreSQL JSONB datatype:\r\n\r\n    import org.dbunit.dataset.datatype.AbstractDataType;\r\n    import org.dbunit.dataset.datatype.DataType;\r\n    import org.dbunit.dataset.datatype.DataTypeException;\r\n    import org.dbunit.dataset.datatype.TypeCastException;\r\n    import org.dbunit.ext.postgresql.PostgresqlDataTypeFactory;\r\n    import org.postgresql.util.PGobject;\r\n\r\n    import java.sql.PreparedStatement;\r\n    import java.sql.ResultSet;\r\n    import java.sql.SQLException;\r\n    import java.sql.Types;\r\n\r\n    public class NewPostgresqlDataTypeFactory extends PostgresqlDataTypeFactory {\r\n        @Override\r\n        public DataType createDataType(int sqlType, String sqlTypeName) throws DataTypeException {\r\n            if (sqlTypeName.equals(&quot;jsonb&quot;)) {\r\n                return new JsonbDataType();\r\n            } else {\r\n                return super.createDataType(sqlType, sqlTypeName);\r\n            }\r\n        }\r\n\r\n        public static class JsonbDataType extends AbstractDataType {\r\n\r\n            public JsonbDataType() {\r\n                super(&quot;jsonb&quot;, Types.OTHER, String.class, false);\r\n            }\r\n\r\n            @Override\r\n            public Object typeCast(Object obj) throws TypeCastException {\r\n                return obj.toString();\r\n            }\r\n\r\n            @Override\r\n            public Object getSqlValue(int column, ResultSet resultSet) throws SQLException, TypeCastException {\r\n                return resultSet.getString(column);\r\n            }\r\n\r\n            @Override\r\n            public void setSqlValue(Object value,\r\n                                    int column,\r\n                                    PreparedStatement statement) throws SQLException, TypeCastException {\r\n                final PGobject jsonObj = new PGobject();\r\n                jsonObj.setType(&quot;json&quot;);\r\n                jsonObj.setValue(value == null ? null : value.toString());\r\n\r\n                statement.setObject(column, jsonObj);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/53559173/355438","title":"DbUnit and JSON column type support","body":"<p>In case someone needs it this is the Java version of <a href=\"https://stackoverflow.com/a/53559173/355438\">@Aleksi's solution</a> for the PostgreSQL JSONB datatype:</p>\n\n<pre><code>import org.dbunit.dataset.datatype.AbstractDataType;\nimport org.dbunit.dataset.datatype.DataType;\nimport org.dbunit.dataset.datatype.DataTypeException;\nimport org.dbunit.dataset.datatype.TypeCastException;\nimport org.dbunit.ext.postgresql.PostgresqlDataTypeFactory;\nimport org.postgresql.util.PGobject;\n\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\nimport java.sql.Types;\n\npublic class NewPostgresqlDataTypeFactory extends PostgresqlDataTypeFactory {\n    @Override\n    public DataType createDataType(int sqlType, String sqlTypeName) throws DataTypeException {\n        if (sqlTypeName.equals(\"jsonb\")) {\n            return new JsonbDataType();\n        } else {\n            return super.createDataType(sqlType, sqlTypeName);\n        }\n    }\n\n    public static class JsonbDataType extends AbstractDataType {\n\n        public JsonbDataType() {\n            super(\"jsonb\", Types.OTHER, String.class, false);\n        }\n\n        @Override\n        public Object typeCast(Object obj) throws TypeCastException {\n            return obj.toString();\n        }\n\n        @Override\n        public Object getSqlValue(int column, ResultSet resultSet) throws SQLException, TypeCastException {\n            return resultSet.getString(column);\n        }\n\n        @Override\n        public void setSqlValue(Object value,\n                                int column,\n                                PreparedStatement statement) throws SQLException, TypeCastException {\n            final PGobject jsonObj = new PGobject();\n            jsonObj.setType(\"json\");\n            jsonObj.setValue(value == null ? null : value.toString());\n\n            statement.setObject(column, jsonObj);\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29050703,"reputation":59,"user_id":22253592,"display_name":"Vitalii Dokalenko"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689859093,"creation_date":1689859093,"answer_id":76730328,"question_id":52845001,"body_markdown":"In addition to [@Ilya&#39;s answer][1], here is the similar solution for H2 JSON datatype:\r\n\r\n```java\r\nimport java.sql.PreparedStatement;\r\nimport java.sql.ResultSet;\r\nimport java.sql.SQLException;\r\nimport java.sql.Types;\r\n\r\nimport org.dbunit.dataset.datatype.AbstractDataType;\r\nimport org.dbunit.dataset.datatype.DataType;\r\nimport org.dbunit.dataset.datatype.DataTypeException;\r\nimport org.dbunit.ext.h2.H2DataTypeFactory;\r\nimport org.h2.value.Value;\r\nimport org.h2.value.ValueJson;\r\n\r\npublic class CustomH2DataTypeFactory extends H2DataTypeFactory {\r\n\r\n        @Override\r\n        public DataType createDataType(int sqlType, String sqlTypeName, String tableName, String columnName)\r\n            throws DataTypeException {\r\n            if (sqlType == 1111 &amp;&amp; sqlTypeName.toLowerCase().startsWith(&quot;json&quot;)) {\r\n                return new JsonDataType();\r\n            } else {\r\n                return super.createDataType(sqlType, sqlTypeName, tableName, columnName);\r\n            }\r\n        }\r\n\r\n        public class JsonDataType extends AbstractDataType {\r\n\r\n            public JsonDataType() {\r\n                super(&quot;json&quot;, Types.OTHER, String.class, false);\r\n            }\r\n\r\n            @Override\r\n            public Object typeCast(Object value) {\r\n                return value.toString();\r\n            }\r\n\r\n            @Override\r\n            public Object getSqlValue(int column, ResultSet resultSet) throws SQLException {\r\n                return resultSet.getString(column);\r\n            }\r\n\r\n            @Override\r\n            public void setSqlValue(Object value, int column, PreparedStatement statement) throws SQLException {\r\n                Value object = ValueJson.fromJson(value.toString());\r\n                statement.setObject(column, object);\r\n            }\r\n        }\r\n    }\r\n```\r\n\r\n  [1]: https://stackoverflow.com/a/55839637/22253592","title":"DbUnit and JSON column type support","body":"<p>In addition to <a href=\"https://stackoverflow.com/a/55839637/22253592\">@Ilya's answer</a>, here is the similar solution for H2 JSON datatype:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\nimport java.sql.Types;\n\nimport org.dbunit.dataset.datatype.AbstractDataType;\nimport org.dbunit.dataset.datatype.DataType;\nimport org.dbunit.dataset.datatype.DataTypeException;\nimport org.dbunit.ext.h2.H2DataTypeFactory;\nimport org.h2.value.Value;\nimport org.h2.value.ValueJson;\n\npublic class CustomH2DataTypeFactory extends H2DataTypeFactory {\n\n        @Override\n        public DataType createDataType(int sqlType, String sqlTypeName, String tableName, String columnName)\n            throws DataTypeException {\n            if (sqlType == 1111 &amp;&amp; sqlTypeName.toLowerCase().startsWith(&quot;json&quot;)) {\n                return new JsonDataType();\n            } else {\n                return super.createDataType(sqlType, sqlTypeName, tableName, columnName);\n            }\n        }\n\n        public class JsonDataType extends AbstractDataType {\n\n            public JsonDataType() {\n                super(&quot;json&quot;, Types.OTHER, String.class, false);\n            }\n\n            @Override\n            public Object typeCast(Object value) {\n                return value.toString();\n            }\n\n            @Override\n            public Object getSqlValue(int column, ResultSet resultSet) throws SQLException {\n                return resultSet.getString(column);\n            }\n\n            @Override\n            public void setSqlValue(Object value, int column, PreparedStatement statement) throws SQLException {\n                Value object = ValueJson.fromJson(value.toString());\n                statement.setObject(column, object);\n            }\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":2045019,"reputation":645,"user_id":1825303,"display_name":"ADi3ek"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2683,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":55839637,"answer_count":3,"score":6,"last_activity_date":1689859093,"creation_date":1539730258,"question_id":52845001,"body_markdown":"I&#39;m wondering what&#39;s the best possible way to make DbUnit work with MySQL&#39;s JSON(B) type columns? We do have such columns here and there and whenever I am trying to feed the test data from XML file via `@DatabaseSetup` I get the NoSuchColumnException which prevents me form making of any sensible integration tests with entities or repos that deals with JSON:\r\n\r\n    org.dbunit.dataset.NoSuchColumnException: assistant_event.AEV_CONTEXT -  (Non-uppercase input column: aev_context) in ColumnNameToIndexes cache map. Note that the map&#39;s column names are NOT case sensitive.\r\n \r\nI get that this is because my `AEV_CONTEXT` column didn&#39;t get recognized because, well, it&#39;s a JSON column:\r\n\r\n    @Type(type = &quot;json&quot;)\r\n    @Column(name = &quot;aev_context&quot;, columnDefinition = &quot;json&quot;)\r\n    private Context context;\r\n\r\nHowever, I&#39;m getting a hard time while trying to workaround it. And, what&#39;s even more odd, I couldn&#39;t find such workaround anywhere here either! In fact, I don&#39;t event know if that&#39;s more Hibernate or DbUnit thing.\r\n\r\n**Is it really only me had this problem so far? Any advice would be much appreciated!**\r\n\r\nOh, and in case you wondering, that&#39;s how I get JSON support for Hibernate:\r\n\r\nhttps://vladmihalcea.com/how-to-map-json-objects-using-generic-hibernate-types/\r\n\r\n","title":"DbUnit and JSON column type support","body":"<p>I'm wondering what's the best possible way to make DbUnit work with MySQL's JSON(B) type columns? We do have such columns here and there and whenever I am trying to feed the test data from XML file via <code>@DatabaseSetup</code> I get the NoSuchColumnException which prevents me form making of any sensible integration tests with entities or repos that deals with JSON:</p>\n\n<pre><code>org.dbunit.dataset.NoSuchColumnException: assistant_event.AEV_CONTEXT -  (Non-uppercase input column: aev_context) in ColumnNameToIndexes cache map. Note that the map's column names are NOT case sensitive.\n</code></pre>\n\n<p>I get that this is because my <code>AEV_CONTEXT</code> column didn't get recognized because, well, it's a JSON column:</p>\n\n<pre><code>@Type(type = \"json\")\n@Column(name = \"aev_context\", columnDefinition = \"json\")\nprivate Context context;\n</code></pre>\n\n<p>However, I'm getting a hard time while trying to workaround it. And, what's even more odd, I couldn't find such workaround anywhere here either! In fact, I don't event know if that's more Hibernate or DbUnit thing.</p>\n\n<p><strong>Is it really only me had this problem so far? Any advice would be much appreciated!</strong></p>\n\n<p>Oh, and in case you wondering, that's how I get JSON support for Hibernate:</p>\n\n<p><a href=\"https://vladmihalcea.com/how-to-map-json-objects-using-generic-hibernate-types/\" rel=\"noreferrer\">https://vladmihalcea.com/how-to-map-json-objects-using-generic-hibernate-types/</a></p>\n"},{"tags":["java","hibernate","entitymanager"],"comments":[{"owner":{"account_id":9763630,"reputation":16595,"user_id":7237884,"display_name":"Panagiotis Bougioukos"},"score":0,"creation_date":1612193327,"post_id":65995241,"comment_id":116683235,"body_markdown":"If you run your tests based on a test database then you should be able to achieve that. Otherwise best case scenario you mock that entityManager. Don&#39;t see any other alternative","body":"If you run your tests based on a test database then you should be able to achieve that. Otherwise best case scenario you mock that entityManager. Don&#39;t see any other alternative"},{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":0,"creation_date":1612194725,"post_id":65995241,"comment_id":116684018,"body_markdown":"You need to annotate the test class with the [Spring JUnit Runner](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/context/junit4/SpringJUnit4ClassRunner.html), otherwise it&#39;s just a normal test. You need Spring to tap into the testing framework. You do this by using the runner. See [this article](https://www.baeldung.com/junit-5-runwith) for example. And you inject the EntityManager not the EMFactory","body":"You need to annotate the test class with the <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/context/junit4/SpringJUnit4ClassRunner.html\" rel=\"nofollow noreferrer\">Spring JUnit Runner</a>, otherwise it&#39;s just a normal test. You need Spring to tap into the testing framework. You do this by using the runner. See <a href=\"https://www.baeldung.com/junit-5-runwith\" rel=\"nofollow noreferrer\">this article</a> for example. And you inject the EntityManager not the EMFactory"}],"owner":{"account_id":16646058,"reputation":1,"user_id":12030349,"display_name":"Jane"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":710,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689859078,"creation_date":1612192640,"question_id":65995241,"body_markdown":"This is my spring config based on hibernate. My problem is when I want to inject EntityManager in my test class. The problem is I get an exception that this.entitymanager is null and I don&#39;t know what to do with it. Does anybody have some idea what to do?\r\n\r\nJpaConfig:\r\n```\r\n@Configuration\r\npublic class JpaConfig {\r\n\r\n    @Bean\r\n    public LocalContainerEntityManagerFactoryBean createEMF(JpaVendorAdapter adapter){\r\n        LocalContainerEntityManagerFactoryBean emf = new LocalContainerEntityManagerFactoryBean();\r\n\r\n        Map&lt;String, String&gt; properties = new HashMap&lt;&gt;();\r\n        properties.put(&quot;javax.persistence.jdbc.url&quot;, &quot;jdbc:mysql://localhost:3306/shop?createDatabaseIfNotExist=true&amp;allowPublicKeyRetrieval=true&amp;useSSL=false&amp;serverTimezone=UTC&quot;);\r\n        properties.put(&quot;javax.persistence.jdbc.user&quot;, &quot;root&quot;);\r\n        properties.put(&quot;javax.persistence.jdbc.password&quot;, &quot;ErykSkoczylas1&quot;);\r\n        properties.put(&quot;javax.persistence.jdbc.driver&quot;, &quot;com.mysql.cj.jdbc.Driver&quot;);\r\n        properties.put(&quot;javax.persistence.schema-generation.database.action&quot;, &quot;drop-and-create&quot;);\r\n        emf.setPersistenceUnitName(&quot;shop-database&quot;);\r\n        emf.setJpaPropertyMap(properties);\r\n        emf.setJpaVendorAdapter(adapter);\r\n        emf.setPackagesToScan(&quot;com.database.models&quot;);\r\n        return emf;\r\n    }\r\n\r\n    @Bean\r\n    public JpaVendorAdapter createVendorAdapter() {\r\n        HibernateJpaVendorAdapter adapter = new HibernateJpaVendorAdapter();\r\n        adapter.setDatabase(Database.MYSQL);\r\n        adapter.setShowSql(true);\r\n        return adapter;\r\n    }\r\n\r\n    @Bean\r\n    public TransactionManager transactionManager(EntityManagerFactory entityManagerFactory) {\r\n        JpaTransactionManager jpaTransactionManager = new JpaTransactionManager();\r\n        jpaTransactionManager.setEntityManagerFactory(entityManagerFactory);\r\n        return jpaTransactionManager;\r\n    }\r\n}\r\n```\r\n\r\nTest class:\r\n```\r\npublic class CustomerServiceTest {\r\n    private AnnotationConfigApplicationContext ctx = new AnnotationConfigApplicationContext(SpringJpaApplication.class);\r\n    private CustomerService customerService = ctx.getBean(CustomerService.class);\r\n\r\n    @PersistenceUnit\r\n    private EntityManagerFactory entityManagerFactory;\r\n    private EntityManager entityManager;\r\n\r\n    @Test\r\n    public void method_addCustomerToDatabase_desc_CustomerServiceShouldAddCustomerToDatabaseAndShouldAddAddress() {\r\n        Address address1 = new Address(&quot;Poland&quot;, &quot;30-091&quot;, &quot;Cracow&quot;, &quot;street&quot;, 1);\r\n\r\n        Customer customer = new Customer(&quot;John&quot;, &quot;Smith&quot;, &quot;xyz@test.com&quot;, new Date(11111999L), &quot;password&quot;, false, address1);\r\n\r\n        customerService.addCustomerToDatabase(customer);\r\n\r\n        List&lt;Customer&gt; customers = findCustomers(customer);\r\n        List&lt;Address&gt; addresses = findAddresses(address1);\r\n        Address address2 = entityManager.find(Address.class, address1.getId());\r\n\r\n        deleteCustomerFromDatabase(customers.get(0).getId());\r\n        deleteAddressFromDatabase(addresses.get(0).getId());\r\n\r\n        assertEquals(1, addresses.size());\r\n        assertEquals(1, customers.size());\r\n        assertEquals(1, address2.getCustomers().size());\r\n    }\r\n```\r\n\r\nException:\r\n```\r\njava.lang.NullPointerException: Cannot invoke &quot;javax.persistence.EntityManager.getTransaction()&quot; because &quot;this.entityManager&quot; is null\r\n```","title":"How to inject EntityManager in test directory?","body":"<p>This is my spring config based on hibernate. My problem is when I want to inject EntityManager in my test class. The problem is I get an exception that this.entitymanager is null and I don't know what to do with it. Does anybody have some idea what to do?</p>\n<p>JpaConfig:</p>\n<pre><code>@Configuration\npublic class JpaConfig {\n\n    @Bean\n    public LocalContainerEntityManagerFactoryBean createEMF(JpaVendorAdapter adapter){\n        LocalContainerEntityManagerFactoryBean emf = new LocalContainerEntityManagerFactoryBean();\n\n        Map&lt;String, String&gt; properties = new HashMap&lt;&gt;();\n        properties.put(&quot;javax.persistence.jdbc.url&quot;, &quot;jdbc:mysql://localhost:3306/shop?createDatabaseIfNotExist=true&amp;allowPublicKeyRetrieval=true&amp;useSSL=false&amp;serverTimezone=UTC&quot;);\n        properties.put(&quot;javax.persistence.jdbc.user&quot;, &quot;root&quot;);\n        properties.put(&quot;javax.persistence.jdbc.password&quot;, &quot;ErykSkoczylas1&quot;);\n        properties.put(&quot;javax.persistence.jdbc.driver&quot;, &quot;com.mysql.cj.jdbc.Driver&quot;);\n        properties.put(&quot;javax.persistence.schema-generation.database.action&quot;, &quot;drop-and-create&quot;);\n        emf.setPersistenceUnitName(&quot;shop-database&quot;);\n        emf.setJpaPropertyMap(properties);\n        emf.setJpaVendorAdapter(adapter);\n        emf.setPackagesToScan(&quot;com.database.models&quot;);\n        return emf;\n    }\n\n    @Bean\n    public JpaVendorAdapter createVendorAdapter() {\n        HibernateJpaVendorAdapter adapter = new HibernateJpaVendorAdapter();\n        adapter.setDatabase(Database.MYSQL);\n        adapter.setShowSql(true);\n        return adapter;\n    }\n\n    @Bean\n    public TransactionManager transactionManager(EntityManagerFactory entityManagerFactory) {\n        JpaTransactionManager jpaTransactionManager = new JpaTransactionManager();\n        jpaTransactionManager.setEntityManagerFactory(entityManagerFactory);\n        return jpaTransactionManager;\n    }\n}\n</code></pre>\n<p>Test class:</p>\n<pre><code>public class CustomerServiceTest {\n    private AnnotationConfigApplicationContext ctx = new AnnotationConfigApplicationContext(SpringJpaApplication.class);\n    private CustomerService customerService = ctx.getBean(CustomerService.class);\n\n    @PersistenceUnit\n    private EntityManagerFactory entityManagerFactory;\n    private EntityManager entityManager;\n\n    @Test\n    public void method_addCustomerToDatabase_desc_CustomerServiceShouldAddCustomerToDatabaseAndShouldAddAddress() {\n        Address address1 = new Address(&quot;Poland&quot;, &quot;30-091&quot;, &quot;Cracow&quot;, &quot;street&quot;, 1);\n\n        Customer customer = new Customer(&quot;John&quot;, &quot;Smith&quot;, &quot;xyz@test.com&quot;, new Date(11111999L), &quot;password&quot;, false, address1);\n\n        customerService.addCustomerToDatabase(customer);\n\n        List&lt;Customer&gt; customers = findCustomers(customer);\n        List&lt;Address&gt; addresses = findAddresses(address1);\n        Address address2 = entityManager.find(Address.class, address1.getId());\n\n        deleteCustomerFromDatabase(customers.get(0).getId());\n        deleteAddressFromDatabase(addresses.get(0).getId());\n\n        assertEquals(1, addresses.size());\n        assertEquals(1, customers.size());\n        assertEquals(1, address2.getCustomers().size());\n    }\n</code></pre>\n<p>Exception:</p>\n<pre><code>java.lang.NullPointerException: Cannot invoke &quot;javax.persistence.EntityManager.getTransaction()&quot; because &quot;this.entityManager&quot; is null\n</code></pre>\n"},{"tags":["java","spring","tomcat"],"comments":[{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":2,"creation_date":1678800929,"post_id":75733765,"comment_id":133600756,"body_markdown":"Memory could be exhausted.  Each thread is a heavyweight thing that requires 1MB of memory.  Other factors come into play: pre-fetch size, etc.  Being careful about what those threads are doing should be your biggest concern.  Non-blocking IO and lightweight Loom threads doing the work, like Betty, might be more performant.","body":"Memory could be exhausted.  Each thread is a heavyweight thing that requires 1MB of memory.  Other factors come into play: pre-fetch size, etc.  Being careful about what those threads are doing should be your biggest concern.  Non-blocking IO and lightweight Loom threads doing the work, like Betty, might be more performant."}],"answers":[{"comments":[{"owner":{"account_id":3702826,"reputation":683,"user_id":3082046,"accept_rate":50,"display_name":"xagaffar"},"score":0,"creation_date":1678868555,"post_id":75733914,"comment_id":133614627,"body_markdown":"Yeah, i saw that documentation, but it doesn&#39;t answer my questions, that&#39;s why i was forced to ask it here.","body":"Yeah, i saw that documentation, but it doesn&#39;t answer my questions, that&#39;s why i was forced to ask it here."},{"owner":{"account_id":3489518,"reputation":315,"user_id":2919551,"display_name":"bendem"},"score":0,"creation_date":1679412445,"post_id":75733914,"comment_id":133715464,"body_markdown":"As I said, you are most likely hitting some other limitation. Did you profile your application? What&#39;s the memory usage, cpu usage, gc pressure, database latency? These are the questions you need to answer before even starting to tweak knobs.","body":"As I said, you are most likely hitting some other limitation. Did you profile your application? What&#39;s the memory usage, cpu usage, gc pressure, database latency? These are the questions you need to answer before even starting to tweak knobs."}],"tags":[],"owner":{"account_id":3489518,"reputation":315,"user_id":2919551,"display_name":"bendem"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679412673,"creation_date":1678801136,"answer_id":75733914,"question_id":75733765,"body_markdown":"My guess is that you are hitting some other limitation (memory, cpu, database latency) and that increasing the number of threads will not solve your problem, the amount of threads is very rarely the first problem you encounter.\r\n\r\nIf you are hitting memory bounds, increasing the amount of threads will increase memory usage, further increasing your problem.\r\n\r\nIf you are hitting CPU bounds, increasing the amount of threads will also further increase your problem.\r\n\r\nIf you are hitting IO bounds, and still have CPU and memory available, you might see improvements *if* there is no contention on IO already.\r\n\r\nYou need to setup monitoring and collect statistics about your running application. This article glances over useful metrics to collect: https://www.datadoghq.com/blog/tomcat-architecture-and-performance/.\r\n\r\nTo answer your question though, since you tagged your question as spring, the doc has the information you need:\r\n\r\nhttps://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html#application-properties.server.server.tomcat.threads.max\r\n\r\n```properties\r\nserver.tomcat.threads.max=250\r\n```","title":"How to properly set server.tomcat.threads.max","body":"<p>My guess is that you are hitting some other limitation (memory, cpu, database latency) and that increasing the number of threads will not solve your problem, the amount of threads is very rarely the first problem you encounter.</p>\n<p>If you are hitting memory bounds, increasing the amount of threads will increase memory usage, further increasing your problem.</p>\n<p>If you are hitting CPU bounds, increasing the amount of threads will also further increase your problem.</p>\n<p>If you are hitting IO bounds, and still have CPU and memory available, you might see improvements <em>if</em> there is no contention on IO already.</p>\n<p>You need to setup monitoring and collect statistics about your running application. This article glances over useful metrics to collect: <a href=\"https://www.datadoghq.com/blog/tomcat-architecture-and-performance/\" rel=\"nofollow noreferrer\">https://www.datadoghq.com/blog/tomcat-architecture-and-performance/</a>.</p>\n<p>To answer your question though, since you tagged your question as spring, the doc has the information you need:</p>\n<p><a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html#application-properties.server.server.tomcat.threads.max\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html#application-properties.server.server.tomcat.threads.max</a></p>\n<pre><code>server.tomcat.threads.max=250\n</code></pre>\n"},{"comments":[{"owner":{"account_id":17591339,"reputation":1,"user_id":12763143,"display_name":"Horschi"},"score":0,"creation_date":1689859522,"post_id":76730309,"comment_id":135275160,"body_markdown":"Strangely,  server.tomcat.max-connections=250 is working fine.","body":"Strangely,  server.tomcat.max-connections=250 is working fine."}],"tags":[],"owner":{"account_id":17591339,"reputation":1,"user_id":12763143,"display_name":"Horschi"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689858966,"creation_date":1689858966,"answer_id":76730309,"question_id":75733765,"body_markdown":"I think setting the max-threads or threads.max properties simply does not work.\r\n\r\nI have this in my application.properties:\r\n\r\n    server.tomcat.max-threads=250\r\n    server.tomcat.threads.max=250\r\n\r\nBut querying meterRegistry.get(&quot;tomcat.threads.config.max&quot;) always returns 200. \r\n\r\nCheck if the configuration really changes something, e.g. via JMX.","title":"How to properly set server.tomcat.threads.max","body":"<p>I think setting the max-threads or threads.max properties simply does not work.</p>\n<p>I have this in my application.properties:</p>\n<pre><code>server.tomcat.max-threads=250\nserver.tomcat.threads.max=250\n</code></pre>\n<p>But querying meterRegistry.get(&quot;tomcat.threads.config.max&quot;) always returns 200.</p>\n<p>Check if the configuration really changes something, e.g. via JMX.</p>\n"}],"owner":{"account_id":3702826,"reputation":683,"user_id":3082046,"accept_rate":50,"display_name":"xagaffar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":758,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1689858966,"creation_date":1678800413,"question_id":75733765,"body_markdown":"Our app is running with default 200 threads, but that seems not to be enough at peak times.\r\nWe want to increase it, but not sure by how much. \r\n\r\nWhat things should be considered before setting `server.tomcat.threads.max`?\r\n\r\nWhat could happen if the value is set too high?\r\n\r\n\r\n\r\n","title":"How to properly set server.tomcat.threads.max","body":"<p>Our app is running with default 200 threads, but that seems not to be enough at peak times.\nWe want to increase it, but not sure by how much.</p>\n<p>What things should be considered before setting <code>server.tomcat.threads.max</code>?</p>\n<p>What could happen if the value is set too high?</p>\n"},{"tags":["java","spring","spring-boot","spring-batch"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1687417360,"post_id":76529264,"comment_id":134934407,"body_markdown":"And why wouldn&#39;t that work with RabbitMQ? Send request to queue (hence it will be triggered eventually). Send message that the job has been scheduled, from the controller. Works perfectly with RabbitMQ (or whatever message technology you choose).","body":"And why wouldn&#39;t that work with RabbitMQ? Send request to queue (hence it will be triggered eventually). Send message that the job has been scheduled, from the controller. Works perfectly with RabbitMQ (or whatever message technology you choose)."},{"owner":{"account_id":11257760,"reputation":1,"user_id":21793848,"display_name":"Favaz kc"},"score":0,"creation_date":1687418263,"post_id":76529264,"comment_id":134934572,"body_markdown":"RabbitMQ listener is triggered while a message entering the queue, even if an instance of the job is running. So it will cause running jobs concurrently.\n........It will work if the listener is wait until the current instance is finished.","body":"RabbitMQ listener is triggered while a message entering the queue, even if an instance of the job is running. So it will cause running jobs concurrently. ........It will work if the listener is wait until the current instance is finished."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1687419009,"post_id":76529264,"comment_id":134934726,"body_markdown":"No it won&#39;t, not if you limit the listener side, set the concurrency to 1 and use a single thread for that specific listener. Also make sure that your Spring Batch job isn&#39;t configured with an async executor else it will still be fire and forget.","body":"No it won&#39;t, not if you limit the listener side, set the concurrency to 1 and use a single thread for that specific listener. Also make sure that your Spring Batch job isn&#39;t configured with an async executor else it will still be fire and forget."},{"owner":{"account_id":11257760,"reputation":1,"user_id":21793848,"display_name":"Favaz kc"},"score":0,"creation_date":1687435678,"post_id":76529264,"comment_id":134938305,"body_markdown":"Thanks Deinum, it worked as expected!.","body":"Thanks Deinum, it worked as expected!."}],"answers":[{"tags":[],"owner":{"account_id":15800151,"reputation":1,"user_id":11400897,"display_name":"Vladimir M"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689858125,"creation_date":1689858125,"answer_id":76730191,"question_id":76529264,"body_markdown":"You can limit threads by configurating ThreadPoolTaskExecutor which will work with this job\r\n```\r\n&lt;bean id=&quot;taskExecutor&quot;\r\n          class=&quot;org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor&quot;\r\n          scope=&quot;step&quot;&gt;\r\n        &lt;property name=&quot;corePoolSize&quot; value=&quot;1&quot;/&gt;\r\n        &lt;property name=&quot;maxPoolSize&quot; value=&quot;1&quot;/&gt;\r\n    &lt;/bean&gt;\r\n```","title":"Spring Batch - Serve multiple requests to a single job one by one","body":"<p>You can limit threads by configurating ThreadPoolTaskExecutor which will work with this job</p>\n<pre><code>&lt;bean id=&quot;taskExecutor&quot;\n          class=&quot;org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor&quot;\n          scope=&quot;step&quot;&gt;\n        &lt;property name=&quot;corePoolSize&quot; value=&quot;1&quot;/&gt;\n        &lt;property name=&quot;maxPoolSize&quot; value=&quot;1&quot;/&gt;\n    &lt;/bean&gt;\n</code></pre>\n"}],"owner":{"account_id":11257760,"reputation":1,"user_id":21793848,"display_name":"Favaz kc"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":209,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689858125,"creation_date":1687416778,"question_id":76529264,"body_markdown":"I have a Spring-batch job **ProductExport**, it may took 10s to complete.\r\n\r\n - **Current scenario**:Multiple requests from different clients to the same Job executes concurrently.\r\n - **Expected Scenario**:Execute one by one. Execution of next request starts only after finishing current request. If multiple request are there at same time they should wait in a **queue**.\r\n\r\n\r\nis there a way to implement this. Thanks in advance\r\n\r\nI have tried RabbitMQ for Spring AMQP but it cannot be integrated with Spring Batch in my case.\r\nBcz my ProductExport API must return a response message(Products will be exported to ..... Email) to FE before completing the batch process.\r\nThe result will later mailed to clients Email.","title":"Spring Batch - Serve multiple requests to a single job one by one","body":"<p>I have a Spring-batch job <strong>ProductExport</strong>, it may took 10s to complete.</p>\n<ul>\n<li><strong>Current scenario</strong>:Multiple requests from different clients to the same Job executes concurrently.</li>\n<li><strong>Expected Scenario</strong>:Execute one by one. Execution of next request starts only after finishing current request. If multiple request are there at same time they should wait in a <strong>queue</strong>.</li>\n</ul>\n<p>is there a way to implement this. Thanks in advance</p>\n<p>I have tried RabbitMQ for Spring AMQP but it cannot be integrated with Spring Batch in my case.\nBcz my ProductExport API must return a response message(Products will be exported to ..... Email) to FE before completing the batch process.\nThe result will later mailed to clients Email.</p>\n"},{"tags":["java","azure","selenium-webdriver"],"comments":[{"owner":{"account_id":12360572,"reputation":1730,"user_id":9014957,"accept_rate":17,"display_name":"pburgr"},"score":0,"creation_date":1689851425,"post_id":76729129,"comment_id":135273245,"body_markdown":"Waiting for element to be clickable will fail if the element is already clickable. In case of implicit wait usually no explicite waits are needed.","body":"Waiting for element to be clickable will fail if the element is already clickable. In case of implicit wait usually no explicite waits are needed."}],"owner":{"account_id":29056208,"reputation":1,"user_id":22257948,"display_name":"vijaya"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689857634,"creation_date":1689850299,"question_id":76729129,"body_markdown":"**The below is my code**\r\n````\r\nWebDriverWait wait = new WebDriverWait(driver,Duration.ofSeconds(60));\r\nWebElement EnterSearch = wait.until(ExpectedConditions.elementToBeClickable(By.cssSelector(&quot;input.search-input.search1&quot;)));\r\n\t\t        \r\ndriver.manage().timeouts().implicitlyWait(60, TimeUnit.SECONDS);\r\n\t\t      \r\nActions a10=new Actions(driver);\r\n\r\na10.moveToElement(EnterSearch) ;\r\n\r\na10.click().build().perform();\r\n````\r\n**below is my div and input element**\r\n````\r\n&lt;input _ngcontent-ynd-c699=&quot;&quot; class=&quot;search-input search1 d-none d-xl-block ng-tns-c699-7 ng-pristine ng-valid ng-touched&quot; placeholder=&quot;Type here to search...&quot;&gt;\r\n````\r\n**below is the error**\r\n````\r\n2023-07-20T10:12:43.7055102Z org.openqa.selenium.TimeoutException: Expected condition failed: waiting for element to be clickable: By.cssSelector: input.search-input.search1 (tried for 60 second(s) with 500 milliseconds interval)\r\n2023-07-20T10:12:43.7056907Z Build info: version: &#39;4.9.0&#39;, revision: &#39;d7057100a6&#39;\r\n2023-07-20T10:12:43.7057705Z System info: os.name: &#39;Windows Server 2019&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;10.0&#39;, java.version: &#39;11.0.19&#39;\r\n2023-07-20T10:12:43.7057975Z Driver info: org.openqa.selenium.chrome.ChromeDriver\r\n2023-07-20T10:12:43.7058908Z Capabilities {acceptInsecureCerts: false, browserName: chrome, browserVersion: 115.0.5790.98, chrome: {chromedriverVersion: 114.0.5735.90 (386bc09e8f4f..., userDataDir: C:\\Windows\\SystemTemp\\scope...}, goog:chromeOptions: {debuggerAddress: localhost:61697}, networkConnectionEnabled: false, pageLoadStrategy: normal, platformName: WINDOWS, proxy: Proxy(), se:cdp: ws://localhost:61697/devtoo..., se:cdpVersion: 115.0.5790.98, setWindowRect: true, strictFileInteractability: false, timeouts: {implicit: 0, pageLoad: 300000, script: 30000}, unhandledPromptBehavior: dismiss and notify, webauthn:extension:credBlob: true, webauthn:extension:largeBlob: true, webauthn:extension:minPinLength: true, webauthn:extension:prf: true, webauthn:virtualAuthenticators: true}\r\n2023-07-20T10:12:43.7059858Z Session ID: 7abe6dbb89cf93e6c1921e65616f0f71\r\n````\r\n\r\n\r\n\r\n\r\nI have tried `JavaScriptExecutor` as well if I use that it is giving me `element interactable error`","title":"Selenium java test failing with azure pipeline and pass locally","body":"<p><strong>The below is my code</strong></p>\n<pre><code>WebDriverWait wait = new WebDriverWait(driver,Duration.ofSeconds(60));\nWebElement EnterSearch = wait.until(ExpectedConditions.elementToBeClickable(By.cssSelector(&quot;input.search-input.search1&quot;)));\n                \ndriver.manage().timeouts().implicitlyWait(60, TimeUnit.SECONDS);\n              \nActions a10=new Actions(driver);\n\na10.moveToElement(EnterSearch) ;\n\na10.click().build().perform();\n</code></pre>\n<p><strong>below is my div and input element</strong></p>\n<pre><code>&lt;input _ngcontent-ynd-c699=&quot;&quot; class=&quot;search-input search1 d-none d-xl-block ng-tns-c699-7 ng-pristine ng-valid ng-touched&quot; placeholder=&quot;Type here to search...&quot;&gt;\n</code></pre>\n<p><strong>below is the error</strong></p>\n<pre><code>2023-07-20T10:12:43.7055102Z org.openqa.selenium.TimeoutException: Expected condition failed: waiting for element to be clickable: By.cssSelector: input.search-input.search1 (tried for 60 second(s) with 500 milliseconds interval)\n2023-07-20T10:12:43.7056907Z Build info: version: '4.9.0', revision: 'd7057100a6'\n2023-07-20T10:12:43.7057705Z System info: os.name: 'Windows Server 2019', os.arch: 'amd64', os.version: '10.0', java.version: '11.0.19'\n2023-07-20T10:12:43.7057975Z Driver info: org.openqa.selenium.chrome.ChromeDriver\n2023-07-20T10:12:43.7058908Z Capabilities {acceptInsecureCerts: false, browserName: chrome, browserVersion: 115.0.5790.98, chrome: {chromedriverVersion: 114.0.5735.90 (386bc09e8f4f..., userDataDir: C:\\Windows\\SystemTemp\\scope...}, goog:chromeOptions: {debuggerAddress: localhost:61697}, networkConnectionEnabled: false, pageLoadStrategy: normal, platformName: WINDOWS, proxy: Proxy(), se:cdp: ws://localhost:61697/devtoo..., se:cdpVersion: 115.0.5790.98, setWindowRect: true, strictFileInteractability: false, timeouts: {implicit: 0, pageLoad: 300000, script: 30000}, unhandledPromptBehavior: dismiss and notify, webauthn:extension:credBlob: true, webauthn:extension:largeBlob: true, webauthn:extension:minPinLength: true, webauthn:extension:prf: true, webauthn:virtualAuthenticators: true}\n2023-07-20T10:12:43.7059858Z Session ID: 7abe6dbb89cf93e6c1921e65616f0f71\n</code></pre>\n<p>I have tried <code>JavaScriptExecutor</code> as well if I use that it is giving me <code>element interactable error</code></p>\n"},{"tags":["java","android","dao","observers"],"comments":[{"owner":{"account_id":353320,"reputation":6609,"user_id":690952,"display_name":"Selvin"},"score":0,"creation_date":1689857681,"post_id":76730115,"comment_id":135274689,"body_markdown":"*Is it possible to have LIVEDATA observer that trigger only when specific columns changes?* No, you cannot do this","body":"<i>Is it possible to have LIVEDATA observer that trigger only when specific columns changes?</i> No, you cannot do this"},{"owner":{"account_id":353320,"reputation":6609,"user_id":690952,"display_name":"Selvin"},"score":0,"creation_date":1689857831,"post_id":76730115,"comment_id":135274721,"body_markdown":"Why there are 3 fav columns ? Just move fav marking to different table ...","body":"Why there are 3 fav columns ? Just move fav marking to different table ..."},{"owner":{"account_id":11779404,"reputation":764,"user_id":8619606,"display_name":"Kirguduck"},"score":0,"creation_date":1689867346,"post_id":76730115,"comment_id":135277227,"body_markdown":"Does this answer your question? [LiveData update on object field change](https://stackoverflow.com/questions/48020377/livedata-update-on-object-field-change)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/48020377/livedata-update-on-object-field-change\">LiveData update on object field change</a>"},{"owner":{"account_id":353320,"reputation":6609,"user_id":690952,"display_name":"Selvin"},"score":0,"creation_date":1689870549,"post_id":76730115,"comment_id":135277927,"body_markdown":"@Kirguduck no, OP doesn&#39;t own LiveData is a part of room implementation it is returned via generated code","body":"@Kirguduck no, OP doesn&#39;t own LiveData is a part of room implementation it is returned via generated code"},{"owner":{"account_id":16040627,"reputation":31,"user_id":11577121,"display_name":"Marco Jacobo"},"score":0,"creation_date":1689937629,"post_id":76730115,"comment_id":135287128,"body_markdown":"Thanks @Selvin, I like the idea of making a different table for the fav columns. I&#39;m gona give a try to this. Will let you know the results. Regards","body":"Thanks @Selvin, I like the idea of making a different table for the fav columns. I&#39;m gona give a try to this. Will let you know the results. Regards"},{"owner":{"account_id":16040627,"reputation":31,"user_id":11577121,"display_name":"Marco Jacobo"},"score":0,"creation_date":1690697063,"post_id":76730115,"comment_id":135387837,"body_markdown":"Moving fav to a different table doesn&#39;t make any change,... the query still depends on data from both tables,... so, it triggers again in changes to the child table.","body":"Moving fav to a different table doesn&#39;t make any change,... the query still depends on data from both tables,... so, it triggers again in changes to the child table."},{"owner":{"account_id":16040627,"reputation":31,"user_id":11577121,"display_name":"Marco Jacobo"},"score":0,"creation_date":1690697106,"post_id":76730115,"comment_id":135387843,"body_markdown":"@Kirguduk, thanks for the recommendation but this is a different issue.","body":"@Kirguduk, thanks for the recommendation but this is a different issue."}],"owner":{"account_id":16040627,"reputation":31,"user_id":11577121,"display_name":"Marco Jacobo"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689857573,"creation_date":1689857573,"question_id":76730115,"body_markdown":"Thanks in advance for any advice. I have a query from a roomdatabase, only some columns are exposed by the interface to the user (~ 3 out of 7). The query does not include favorite columns. \r\n\r\nSo, there is another query to let the user mark the data of a single row as favorite or not favorite...\r\n\r\nThe issue is the first query is redone every time the user check or uncheck the favorite flag that belongs to the second query. The point here is the first query is livedata that doesnt include the fav columns in the database. So,...\r\n\r\nI do not understand why and /I do not know how to resolve it. Any help, would be very appreciated. Thanks! \r\n\r\n\r\nI have this query in DAO \r\n\r\n\r\n        @Query( &quot; SELECT   &quot;+COLUMN_NUM+\r\n                &quot; ,        &quot;+COLUMN_TITLE+\r\n                &quot; ,        &quot;+COLUMN_TIME+\r\n                &quot; FROM     &quot;+TABLE_NAME+\r\n                &quot; WHERE    &quot;+&quot; ( :fav1 IS NULL OR &quot;   + COLUMN_FAV1 + &quot; =   :fav1 ) AND &quot;+\r\n                             &quot; ( :fav2 IS NULL OR &quot;   + COLUMN_FAV2 + &quot; =   :fav2 ) AND &quot;+\r\n                             &quot; ( :fav3 IS NULL OR &quot;   + COLUMN_FAV3 + &quot; =   :fav3 ) &quot;    +\r\n                &quot; ORDER BY &quot;+&quot;RANDOM() LIMIT :num&quot;    )\r\n        LiveData&lt; List&lt;Entity_Random&gt; &gt; randomHymns( Integer num, Integer fav1, Integer fav2, Integer fav3);\r\n\r\n\r\nI have this in view model \r\n\r\n    final private LiveData&lt;List&lt;Entity_Random&gt;&gt;  mData;\r\n\r\n    public LiveData&lt;List&lt;Entity_Random&gt;&gt; getData()\r\n    {  return Transformations.distinctUntilChanged(mData); }\r\n\r\n    mData_Trigger.setValue ( new xFilter(7, null, null, null )  );\r\n    mData Transformations.switchMap( mData_Trigger,   input -&gt; Dao.randomHymns ( input.num,        input.fav1, input.fav2, input.fav3)  );\r\n\r\n\r\nI have this in fragment\r\n\r\n    \r\n        mObserver = new Observer&lt;List&lt;Entity_Random&gt;&gt;()\r\n        {   @Override public void onChanged(List&lt;Entity_Random&gt; entity)\r\n            {   mAdapter.swapList(entity);\r\n                mViewModel.updateSingle( mAdapter.getNumber(0));\r\n            }\r\n       };\r\n\r\n       mViewModel.getData().observe( getViewLifecycleOwner(),  mObserver );\r\n\r\n","title":"Is it possible to have LIVEDATA observer that trigger only when specific columns changes?","body":"<p>Thanks in advance for any advice. I have a query from a roomdatabase, only some columns are exposed by the interface to the user (~ 3 out of 7). The query does not include favorite columns.</p>\n<p>So, there is another query to let the user mark the data of a single row as favorite or not favorite...</p>\n<p>The issue is the first query is redone every time the user check or uncheck the favorite flag that belongs to the second query. The point here is the first query is livedata that doesnt include the fav columns in the database. So,...</p>\n<p>I do not understand why and /I do not know how to resolve it. Any help, would be very appreciated. Thanks!</p>\n<p>I have this query in DAO</p>\n<pre><code>    @Query( &quot; SELECT   &quot;+COLUMN_NUM+\n            &quot; ,        &quot;+COLUMN_TITLE+\n            &quot; ,        &quot;+COLUMN_TIME+\n            &quot; FROM     &quot;+TABLE_NAME+\n            &quot; WHERE    &quot;+&quot; ( :fav1 IS NULL OR &quot;   + COLUMN_FAV1 + &quot; =   :fav1 ) AND &quot;+\n                         &quot; ( :fav2 IS NULL OR &quot;   + COLUMN_FAV2 + &quot; =   :fav2 ) AND &quot;+\n                         &quot; ( :fav3 IS NULL OR &quot;   + COLUMN_FAV3 + &quot; =   :fav3 ) &quot;    +\n            &quot; ORDER BY &quot;+&quot;RANDOM() LIMIT :num&quot;    )\n    LiveData&lt; List&lt;Entity_Random&gt; &gt; randomHymns( Integer num, Integer fav1, Integer fav2, Integer fav3);\n</code></pre>\n<p>I have this in view model</p>\n<pre><code>final private LiveData&lt;List&lt;Entity_Random&gt;&gt;  mData;\n\npublic LiveData&lt;List&lt;Entity_Random&gt;&gt; getData()\n{  return Transformations.distinctUntilChanged(mData); }\n\nmData_Trigger.setValue ( new xFilter(7, null, null, null )  );\nmData Transformations.switchMap( mData_Trigger,   input -&gt; Dao.randomHymns ( input.num,        input.fav1, input.fav2, input.fav3)  );\n</code></pre>\n<p>I have this in fragment</p>\n<pre><code>    mObserver = new Observer&lt;List&lt;Entity_Random&gt;&gt;()\n    {   @Override public void onChanged(List&lt;Entity_Random&gt; entity)\n        {   mAdapter.swapList(entity);\n            mViewModel.updateSingle( mAdapter.getNumber(0));\n        }\n   };\n\n   mViewModel.getData().observe( getViewLifecycleOwner(),  mObserver );\n</code></pre>\n"},{"tags":["python","java","apache-kafka","virtualbox"],"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1568679313,"post_id":57965731,"comment_id":102342358,"body_markdown":"Please show your server properties files","body":"Please show your server properties files"}],"answers":[{"comments":[{"owner":{"account_id":129002,"reputation":3758,"user_id":327258,"accept_rate":64,"display_name":"Codejoy"},"score":0,"creation_date":1568688104,"post_id":57965829,"comment_id":102343993,"body_markdown":"you are right it does not respond to the ubuntukafka, that is just the machine name.  It gets it somehow (its not in a hosts file anywhere unless ubuntu automatically did that) in either case, where does the advertised.listeners go in the kafka/config folder?  is PLAINTEXT in the above example just 10.75.1.247 or the ip address of machine A?  and the advertised.listeners is on machine A?","body":"you are right it does not respond to the ubuntukafka, that is just the machine name.  It gets it somehow (its not in a hosts file anywhere unless ubuntu automatically did that) in either case, where does the advertised.listeners go in the kafka/config folder?  is PLAINTEXT in the above example just 10.75.1.247 or the ip address of machine A?  and the advertised.listeners is on machine A?"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":3,"creation_date":1568688633,"post_id":57965829,"comment_id":102344098,"body_markdown":"PLAINTEXT is a protocol. Both lines already exist as part of `server.properties`, they just need to be adjusted and uncommented. https://stackoverflow.com/questions/42998859/kafka-server-configuration-listeners-vs-advertised-listeners","body":"PLAINTEXT is a protocol. Both lines already exist as part of <code>server.properties</code>, they just need to be adjusted and uncommented. <a href=\"https://stackoverflow.com/questions/42998859/kafka-server-configuration-listeners-vs-advertised-listeners\" title=\"kafka server configuration listeners vs advertised listeners\">stackoverflow.com/questions/42998859/&hellip;</a>"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1568688753,"post_id":57965829,"comment_id":102344113,"body_markdown":"Each Kafka server requires its own unique advertised listener for clients to connect to. It could be a hostname, but it appears your DNS or hosts file isn&#39;t setup, so just use IPs","body":"Each Kafka server requires its own unique advertised listener for clients to connect to. It could be a hostname, but it appears your DNS or hosts file isn&#39;t setup, so just use IPs"},{"owner":{"account_id":129002,"reputation":3758,"user_id":327258,"accept_rate":64,"display_name":"Codejoy"},"score":1,"creation_date":1568734858,"post_id":57965829,"comment_id":102365047,"body_markdown":"I got it working just great with this info using their .sh files to test with.  Still no go on the python but that is another issue/topic to be sure.","body":"I got it working just great with this info using their .sh files to test with.  Still no go on the python but that is another issue/topic to be sure."}],"tags":[],"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"comment_count":4,"down_vote_count":0,"up_vote_count":31,"is_accepted":true,"score":31,"last_activity_date":1643913056,"creation_date":1568679514,"answer_id":57965829,"question_id":57965731,"body_markdown":"Generally, seems your hostnames aren&#39;t resolvable. Does `ping ubuntukafka` work? If not, then you&#39;ll need to adjust what you&#39;re making Kafka return via `advertised.listeners` to be the external IP rather than the hostname \r\n\r\n    listeners=PLAINTEXT://0.0.0.0:9092\r\n    advertised.listeners=PLAINTEXT://10.75.1.247:9092\r\n\r\nWhere, `10.75.1.247` is the network address to be resolved by the external machines (e.g. make sure you can ping that address, too)","title":"Kafka Error connecting to node ubuntukafka:9092 (id: 0 rack: null) (org.apache.kafka.clients.NetworkClient) java.net.UnknownHostException:","body":"<p>Generally, seems your hostnames aren't resolvable. Does <code>ping ubuntukafka</code> work? If not, then you'll need to adjust what you're making Kafka return via <code>advertised.listeners</code> to be the external IP rather than the hostname</p>\n<pre><code>listeners=PLAINTEXT://0.0.0.0:9092\nadvertised.listeners=PLAINTEXT://10.75.1.247:9092\n</code></pre>\n<p>Where, <code>10.75.1.247</code> is the network address to be resolved by the external machines (e.g. make sure you can ping that address, too)</p>\n"},{"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1643913116,"post_id":63323962,"comment_id":125472045,"body_markdown":"This setup would only work on a local machine, though","body":"This setup would only work on a local machine, though"}],"tags":[],"owner":{"account_id":12210462,"reputation":21,"user_id":8912381,"display_name":"kapil07"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1596960364,"creation_date":1596960364,"answer_id":63323962,"question_id":57965731,"body_markdown":"only changing listeners=PLAINTEXT://localhost:9092 work for me no need to change advertised.listeners property in server config","title":"Kafka Error connecting to node ubuntukafka:9092 (id: 0 rack: null) (org.apache.kafka.clients.NetworkClient) java.net.UnknownHostException:","body":"<p>only changing listeners=PLAINTEXT://localhost:9092 work for me no need to change advertised.listeners property in server config</p>\n"},{"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1689857378,"post_id":74793103,"comment_id":135274606,"body_markdown":"This already exists in any Ubuntu server and should never be done to fix Kafka issues","body":"This already exists in any Ubuntu server and should never be done to fix Kafka issues"}],"tags":[],"owner":{"account_id":16110529,"reputation":131,"user_id":11628854,"display_name":"yunzhi"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1670986452,"creation_date":1670986452,"answer_id":74793103,"question_id":57965731,"body_markdown":"You can add below into file /etc/hosts:\r\n\r\n```\r\n127.0.0.1 ${your/hostname}\r\n```\r\n\r\n","title":"Kafka Error connecting to node ubuntukafka:9092 (id: 0 rack: null) (org.apache.kafka.clients.NetworkClient) java.net.UnknownHostException:","body":"<p>You can add below into file /etc/hosts:</p>\n<pre><code>127.0.0.1 ${your/hostname}\n</code></pre>\n"}],"owner":{"account_id":129002,"reputation":3758,"user_id":327258,"accept_rate":64,"display_name":"Codejoy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31541,"favorite_count":0,"down_vote_count":0,"up_vote_count":17,"accepted_answer_id":57965829,"answer_count":3,"score":17,"last_activity_date":1689857410,"creation_date":1568678584,"question_id":57965731,"body_markdown":"I have two servers on VirtualBox guests each ubuntu.  I can SSH from my main machine to both, and between the two so they all have the natnetwork.\r\n\r\nI ran on one server kafka as described here:\r\n\r\nhttps://kafka.apache.org/quickstart\r\n\r\nSo I brought up singlenode zookeper\r\nKafka then started.  I added the test topic.\r\n(All on MachineA . 10.75.1.247)\r\n\r\nI am trying to list the topics on that node from another machine:\r\n\r\n    bin/kafka-topics.sh --list --bootstrap-server 10.75.1.247:9092\r\n\r\nfrom MachineB (10.75.1.2)\r\n\r\ndoing that, causes the error over and over:\r\n\r\n    [2019-09-16 23:57:07,864] WARN [AdminClient clientId=adminclient-1] Error connecting to node ubuntukafka:9092 (id: 0 rack: null) (org.apache.kafka.clients.NetworkClient)\r\n    java.net.UnknownHostException: ubuntukafka\r\n    \tat java.base/java.net.InetAddress$CachedAddresses.get(InetAddress.java:797)\r\n    \tat java.base/java.net.InetAddress.getAllByName0(InetAddress.java:1505)\r\n    \tat java.base/java.net.InetAddress.getAllByName(InetAddress.java:1364)\r\n    \tat java.base/java.net.InetAddress.getAllByName(InetAddress.java:1298)\r\n    \tat org.apache.kafka.clients.ClientUtils.resolve(ClientUtils.java:104)\r\n    \tat org.apache.kafka.clients.ClusterConnectionStates$NodeConnectionState.currentAddress(ClusterConnectionStates.java:403)\r\n    \tat org.apache.kafka.clients.ClusterConnectionStates$NodeConnectionState.access$200(ClusterConnectionStates.java:363)\r\n    \tat org.apache.kafka.clients.ClusterConnectionStates.currentAddress(ClusterConnectionStates.java:151)\r\n    \tat org.apache.kafka.clients.NetworkClient.initiateConnect(NetworkClient.java:943)\r\n    \tat org.apache.kafka.clients.NetworkClient.ready(NetworkClient.java:288)\r\n    \tat org.apache.kafka.clients.admin.KafkaAdminClient$AdminClientRunnable.sendEligibleCalls(KafkaAdminClient.java:925)\r\n    \tat org.apache.kafka.clients.admin.KafkaAdminClient$AdminClientRunnable.run(KafkaAdminClient.java:1140)\r\n    \tat java.base/java.lang.Thread.run(Thread.java:834)\r\n\r\nit does resolve the name\r\n(says ubuntukafka instead of ubuntukafkanode) but fails.\r\n\r\nWhat am I missing?  Am I using kafka wrong?  I thought I could have a nice kafka server where all my other servers with data can produce information too.  Then many other consumers can read the information from? \r\n\r\nUltimately what I wanted to test was if I could send messages to my kafka server:\r\n\r\n    bin/kafka-console-producer.sh --broker-list 10.75.1.247:9092 --topic test\r\n\r\n\r\nAnd even then use python later to produce messages to the server.\r\n\r\n\r\n    from kafka import KafkaProducer\r\n      \r\n    producer = KafkaProducer(bootstrap_servers=&#39;10.75.1.247:9092&#39;)\r\n    for _ in range(100):\r\n        try:\r\n            producer.send(&#39;test&#39;, b&#39;some_message_bytes&#39;)\r\n        except:\r\n            print(&#39;doh&#39;)\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"Kafka Error connecting to node ubuntukafka:9092 (id: 0 rack: null) (org.apache.kafka.clients.NetworkClient) java.net.UnknownHostException:","body":"<p>I have two servers on VirtualBox guests each ubuntu.  I can SSH from my main machine to both, and between the two so they all have the natnetwork.</p>\n\n<p>I ran on one server kafka as described here:</p>\n\n<p><a href=\"https://kafka.apache.org/quickstart\" rel=\"noreferrer\">https://kafka.apache.org/quickstart</a></p>\n\n<p>So I brought up singlenode zookeper\nKafka then started.  I added the test topic.\n(All on MachineA . 10.75.1.247)</p>\n\n<p>I am trying to list the topics on that node from another machine:</p>\n\n<pre><code>bin/kafka-topics.sh --list --bootstrap-server 10.75.1.247:9092\n</code></pre>\n\n<p>from MachineB (10.75.1.2)</p>\n\n<p>doing that, causes the error over and over:</p>\n\n<pre><code>[2019-09-16 23:57:07,864] WARN [AdminClient clientId=adminclient-1] Error connecting to node ubuntukafka:9092 (id: 0 rack: null) (org.apache.kafka.clients.NetworkClient)\njava.net.UnknownHostException: ubuntukafka\n    at java.base/java.net.InetAddress$CachedAddresses.get(InetAddress.java:797)\n    at java.base/java.net.InetAddress.getAllByName0(InetAddress.java:1505)\n    at java.base/java.net.InetAddress.getAllByName(InetAddress.java:1364)\n    at java.base/java.net.InetAddress.getAllByName(InetAddress.java:1298)\n    at org.apache.kafka.clients.ClientUtils.resolve(ClientUtils.java:104)\n    at org.apache.kafka.clients.ClusterConnectionStates$NodeConnectionState.currentAddress(ClusterConnectionStates.java:403)\n    at org.apache.kafka.clients.ClusterConnectionStates$NodeConnectionState.access$200(ClusterConnectionStates.java:363)\n    at org.apache.kafka.clients.ClusterConnectionStates.currentAddress(ClusterConnectionStates.java:151)\n    at org.apache.kafka.clients.NetworkClient.initiateConnect(NetworkClient.java:943)\n    at org.apache.kafka.clients.NetworkClient.ready(NetworkClient.java:288)\n    at org.apache.kafka.clients.admin.KafkaAdminClient$AdminClientRunnable.sendEligibleCalls(KafkaAdminClient.java:925)\n    at org.apache.kafka.clients.admin.KafkaAdminClient$AdminClientRunnable.run(KafkaAdminClient.java:1140)\n    at java.base/java.lang.Thread.run(Thread.java:834)\n</code></pre>\n\n<p>it does resolve the name\n(says ubuntukafka instead of ubuntukafkanode) but fails.</p>\n\n<p>What am I missing?  Am I using kafka wrong?  I thought I could have a nice kafka server where all my other servers with data can produce information too.  Then many other consumers can read the information from? </p>\n\n<p>Ultimately what I wanted to test was if I could send messages to my kafka server:</p>\n\n<pre><code>bin/kafka-console-producer.sh --broker-list 10.75.1.247:9092 --topic test\n</code></pre>\n\n<p>And even then use python later to produce messages to the server.</p>\n\n<pre><code>from kafka import KafkaProducer\n\nproducer = KafkaProducer(bootstrap_servers='10.75.1.247:9092')\nfor _ in range(100):\n    try:\n        producer.send('test', b'some_message_bytes')\n    except:\n        print('doh')\n</code></pre>\n"},{"tags":["java","javafx","osgi","javacv"],"owner":{"account_id":3310548,"reputation":321,"user_id":2784174,"display_name":"crowde"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689857248,"creation_date":1689857248,"question_id":76730064,"body_markdown":"I am trying to use JavaCV in a JavaFX running in OSGi container.\r\n\r\nThe bundle that is using JavaCV as dependency is resolved correctly, but once started it creates an instance of `org.bytedeco.javacv.FFmpegFrameGrabber` and I see this exception:\r\n\r\n    Caused by: java.lang.ExceptionInInitializerError: Exception java.lang.UnsatisfiedLinkError: java.io.FileNotFoundException: C:\\Users\\admin\\.javacpp\\cache\\windows-x86_64\\jniavutil.dll (**Impossibile accedere al file. Il file &#232; utilizzato da un altro processo**) [in thread &quot;JavaFX Application Thread&quot;]\r\n        at org.bytedeco.javacpp.Loader.loadLibrary(Loader.java:1853)\r\n        at org.bytedeco.javacpp.Loader.load(Loader.java:1423)\r\n        at org.bytedeco.javacpp.Loader.load(Loader.java:1234)\r\n        at org.bytedeco.javacpp.Loader.load(Loader.java:1210)\r\n        at org.bytedeco.ffmpeg.avutil.AVChannelLayout.&lt;clinit&gt;(AVChannelLayout.java:46)\r\n        at org.bytedeco.ffmpeg.global.avutil.AV_CHANNEL_LAYOUT_MONO(Native Method)\r\n        at org.bytedeco.ffmpeg.global.avutil.&lt;clinit&gt;(avutil.java:4381)\r\n        at java.base/java.lang.Class.forName0(Native Method)\r\n        at java.base/java.lang.Class.forName(Class.java:495)\r\n        at java.base/java.lang.Class.forName(Class.java:474)\r\n        at org.bytedeco.javacpp.Loader.load(Loader.java:1289)\r\n        at org.bytedeco.javacpp.Loader.load(Loader.java:1234)\r\n        at org.bytedeco.javacpp.Loader.load(Loader.java:1226)\r\n        at org.bytedeco.javacv.FFmpegFrameGrabber.tryLoad(FFmpegFrameGrabber.java:111)\r\n        at org.bytedeco.javacv.FFmpegFrameGrabber.&lt;clinit&gt;(FFmpegFrameGrabber.java:137)\r\n        ... 23 more\r\n\r\nThe error message is in italian, but it says:\r\n\r\n&gt; C:\\Users\\admin\\\\.javacpp\\cache\\windows-x86_64\\jniavutil.dll (Cannot access the file. The file is being used by another process)\r\n\r\nI checked that the file exists at that path and the only process that is using it is the Java application itself. \r\n\r\nI embedded all the JavaCV jar files in the bundle and added all of them to the Bundle-ClassPath. I included only the jars for the `windows-x86_64` platform. \r\nHere is the list of jars that I included. \r\n\r\n```\r\nartoolkitplus.jar\r\nartoolkitplus-windows-x86_64.jar\r\nffmpeg.jar\r\nffmpeg-windows-x86_64.jar\r\nflandmark-1.07-1.5.8.jar\r\nflycapture.jar\r\nflycapture-windows-x86_64.jar\r\njavacpp.jar\r\njavacpp-windows-x86_64.jar\r\njavacv.jar\r\nleptonica.jar\r\nleptonica-windows-x86_64.jar\r\nlibdc1394.jar\r\nlibdc1394-windows-x86_64.jar\r\nlibfreenect.jar\r\nlibfreenect-windows-x86_64.jar\r\nlibfreenect2.jar\r\nlibfreenect2-windows-x86_64.jar\r\nlibrealsense.jar\r\nlibrealsense-windows-x86_64.jar\r\nlibrealsense2.jar\r\nlibrealsense2-windows-x86_64.jar\r\nopenblas.jar\r\nopenblas-windows-x86_64.jar\r\nopencv.jar\r\nopencv-windows-x86_64.jar\r\ntesseract.jar\r\ntesseract-windows-x86_64.jar\r\nvideoinput.jar\r\nvideoinput-windows-x86_64.jar\r\n```\r\n\r\nEnvironment details:\r\n- Windows 10\r\n- Java 19\r\n- JavaCV 1.5.9","title":"JavaCV: jniavutil.dll - Cannot access the file. The file is being used by another process","body":"<p>I am trying to use JavaCV in a JavaFX running in OSGi container.</p>\n<p>The bundle that is using JavaCV as dependency is resolved correctly, but once started it creates an instance of <code>org.bytedeco.javacv.FFmpegFrameGrabber</code> and I see this exception:</p>\n<pre><code>Caused by: java.lang.ExceptionInInitializerError: Exception java.lang.UnsatisfiedLinkError: java.io.FileNotFoundException: C:\\Users\\admin\\.javacpp\\cache\\windows-x86_64\\jniavutil.dll (**Impossibile accedere al file. Il file è utilizzato da un altro processo**) [in thread &quot;JavaFX Application Thread&quot;]\n    at org.bytedeco.javacpp.Loader.loadLibrary(Loader.java:1853)\n    at org.bytedeco.javacpp.Loader.load(Loader.java:1423)\n    at org.bytedeco.javacpp.Loader.load(Loader.java:1234)\n    at org.bytedeco.javacpp.Loader.load(Loader.java:1210)\n    at org.bytedeco.ffmpeg.avutil.AVChannelLayout.&lt;clinit&gt;(AVChannelLayout.java:46)\n    at org.bytedeco.ffmpeg.global.avutil.AV_CHANNEL_LAYOUT_MONO(Native Method)\n    at org.bytedeco.ffmpeg.global.avutil.&lt;clinit&gt;(avutil.java:4381)\n    at java.base/java.lang.Class.forName0(Native Method)\n    at java.base/java.lang.Class.forName(Class.java:495)\n    at java.base/java.lang.Class.forName(Class.java:474)\n    at org.bytedeco.javacpp.Loader.load(Loader.java:1289)\n    at org.bytedeco.javacpp.Loader.load(Loader.java:1234)\n    at org.bytedeco.javacpp.Loader.load(Loader.java:1226)\n    at org.bytedeco.javacv.FFmpegFrameGrabber.tryLoad(FFmpegFrameGrabber.java:111)\n    at org.bytedeco.javacv.FFmpegFrameGrabber.&lt;clinit&gt;(FFmpegFrameGrabber.java:137)\n    ... 23 more\n</code></pre>\n<p>The error message is in italian, but it says:</p>\n<blockquote>\n<p>C:\\Users\\admin\\.javacpp\\cache\\windows-x86_64\\jniavutil.dll (Cannot access the file. The file is being used by another process)</p>\n</blockquote>\n<p>I checked that the file exists at that path and the only process that is using it is the Java application itself.</p>\n<p>I embedded all the JavaCV jar files in the bundle and added all of them to the Bundle-ClassPath. I included only the jars for the <code>windows-x86_64</code> platform.\nHere is the list of jars that I included.</p>\n<pre><code>artoolkitplus.jar\nartoolkitplus-windows-x86_64.jar\nffmpeg.jar\nffmpeg-windows-x86_64.jar\nflandmark-1.07-1.5.8.jar\nflycapture.jar\nflycapture-windows-x86_64.jar\njavacpp.jar\njavacpp-windows-x86_64.jar\njavacv.jar\nleptonica.jar\nleptonica-windows-x86_64.jar\nlibdc1394.jar\nlibdc1394-windows-x86_64.jar\nlibfreenect.jar\nlibfreenect-windows-x86_64.jar\nlibfreenect2.jar\nlibfreenect2-windows-x86_64.jar\nlibrealsense.jar\nlibrealsense-windows-x86_64.jar\nlibrealsense2.jar\nlibrealsense2-windows-x86_64.jar\nopenblas.jar\nopenblas-windows-x86_64.jar\nopencv.jar\nopencv-windows-x86_64.jar\ntesseract.jar\ntesseract-windows-x86_64.jar\nvideoinput.jar\nvideoinput-windows-x86_64.jar\n</code></pre>\n<p>Environment details:</p>\n<ul>\n<li>Windows 10</li>\n<li>Java 19</li>\n<li>JavaCV 1.5.9</li>\n</ul>\n"},{"tags":["java","docker","maven"],"comments":[{"owner":{"account_id":462886,"reputation":2853,"user_id":865448,"accept_rate":82,"display_name":"tostao"},"score":0,"creation_date":1689853904,"post_id":76729514,"comment_id":135273759,"body_markdown":"What do you try to achieve? Run some classes from jar?","body":"What do you try to achieve? Run some classes from jar?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689853981,"post_id":76729514,"comment_id":135273775,"body_markdown":"It&#39;s difficult to see what you&#39;re trying to do, but if you want to make a jar that&#39;s stand-alone, you need Maven Shade or the Maven Assembly plugin. If you don&#39;t want a lot of cruft accumulating in ~/.m2, you can change the value of localRepository to point at the /tmp directory","body":"It&#39;s difficult to see what you&#39;re trying to do, but if you want to make a jar that&#39;s stand-alone, you need Maven Shade or the Maven Assembly plugin. If you don&#39;t want a lot of cruft accumulating in ~/.m2, you can change the value of localRepository to point at the /tmp directory"},{"owner":{"account_id":16841069,"reputation":2161,"user_id":12176460,"display_name":"YoavKlein"},"score":0,"creation_date":1689854274,"post_id":76729514,"comment_id":135273840,"body_markdown":"@tostao, I think it&#39;s pretty clear from the question. I&#39;m trying to understand how should one run a java program that has dependencies that reside in the `~/.m2/repository` directory.","body":"@tostao, I think it&#39;s pretty clear from the question. I&#39;m trying to understand how should one run a java program that has dependencies that reside in the <code>~&#47;.m2&#47;repository</code> directory."},{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":1,"creation_date":1689854646,"post_id":76729514,"comment_id":135273920,"body_markdown":"@YoavKlein No it is not clear because during runtime usually a local cache (`~/.m2/repository`) does not exist which means you should not use that as classpath furthermore in your local cache are too many files which you don&#39;t like to have on your classpath apart from having several jar&#39;s and classes duplication based on the subject that you have cached several versions of the same artifact... apart as already mentioned to run your app you should create an executable jar (aka shaded/jar-with-dependencies)....","body":"@YoavKlein No it is not clear because during runtime usually a local cache (<code>~&#47;.m2&#47;repository</code>) does not exist which means you should not use that as classpath furthermore in your local cache are too many files which you don&#39;t like to have on your classpath apart from having several jar&#39;s and classes duplication based on the subject that you have cached several versions of the same artifact... apart as already mentioned to run your app you should create an executable jar (aka shaded/jar-with-dependencies)...."},{"owner":{"account_id":187094,"reputation":5113,"user_id":424903,"display_name":"Gimby"},"score":0,"creation_date":1689856927,"post_id":76729514,"comment_id":135274505,"body_markdown":"It&#39;d be pretty silly if you wouldn&#39;t be able to let Maven solve this for you, that&#39;s the whole reason for it existing - automation. And as always with Maven you have at least three options available to you. The more common method is to build a fat jar, which implies packaging all the classes from all the dependencies into one large jar. No head aches from having to lug around external dependencies, but this method can be kind of sketchy when it comes to licensing. Would this be acceptable to you?","body":"It&#39;d be pretty silly if you wouldn&#39;t be able to let Maven solve this for you, that&#39;s the whole reason for it existing - automation. And as always with Maven you have at least three options available to you. The more common method is to build a fat jar, which implies packaging all the classes from all the dependencies into one large jar. No head aches from having to lug around external dependencies, but this method can be kind of sketchy when it comes to licensing. Would this be acceptable to you?"},{"owner":{"account_id":16841069,"reputation":2161,"user_id":12176460,"display_name":"YoavKlein"},"score":0,"creation_date":1689864311,"post_id":76729514,"comment_id":135276369,"body_markdown":"@Gimby, I&#39;m pretty new to Java and Maven, I&#39;m just trying to understand what is the most straightforward way to do this. That&#39;s all","body":"@Gimby, I&#39;m pretty new to Java and Maven, I&#39;m just trying to understand what is the most straightforward way to do this. That&#39;s all"}],"answers":[{"comments":[{"owner":{"account_id":16841069,"reputation":2161,"user_id":12176460,"display_name":"YoavKlein"},"score":0,"creation_date":1689864448,"post_id":76730057,"comment_id":135276403,"body_markdown":"that&#39;s a great motivation speech, can you be more practical?","body":"that&#39;s a great motivation speech, can you be more practical?"},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1689864584,"post_id":76730057,"comment_id":135276436,"body_markdown":"Sure. Take the middle 3 sentences I wrote and put them into google. Plenty of articles have been written explaining how to do each of them.","body":"Sure. Take the middle 3 sentences I wrote and put them into google. Plenty of articles have been written explaining how to do each of them."},{"owner":{"account_id":187094,"reputation":5113,"user_id":424903,"display_name":"Gimby"},"score":0,"creation_date":1689865666,"post_id":76730057,"comment_id":135276745,"body_markdown":"As much as that is true, that does not make this a valid Stack Overflow answer. It doesn&#39;t answer anything.","body":"As much as that is true, that does not make this a valid Stack Overflow answer. It doesn&#39;t answer anything."}],"tags":[],"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"comment_count":3,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1689857215,"creation_date":1689857215,"answer_id":76730057,"question_id":76729514,"body_markdown":"The problem is you are working *against* Maven, not *with* it. You should let Maven handle all classpath-related problems.\r\n\r\nIf you want to collect all dependency jars in a single folder, Maven can do that for you.\r\n\r\nIf you want to run or debug your application, whether from IDE or from command line, Maven can do that for you.\r\n\r\nIf you want to build a single JAR file containing all dependency classes, Maven can do that for you.\r\n\r\nIn short: Work with the tool, not against it.","title":"How do you set CLASSPATH to the Maven repository?","body":"<p>The problem is you are working <em>against</em> Maven, not <em>with</em> it. You should let Maven handle all classpath-related problems.</p>\n<p>If you want to collect all dependency jars in a single folder, Maven can do that for you.</p>\n<p>If you want to run or debug your application, whether from IDE or from command line, Maven can do that for you.</p>\n<p>If you want to build a single JAR file containing all dependency classes, Maven can do that for you.</p>\n<p>In short: Work with the tool, not against it.</p>\n"}],"owner":{"account_id":16841069,"reputation":2161,"user_id":12176460,"display_name":"YoavKlein"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":169,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689857215,"creation_date":1689853520,"question_id":76729514,"body_markdown":"I have a Maven project, with some dependencies configured in the pom.xml.\r\n\r\nNow, when I run `mvn package`, the dependencies are downloaded to `~/.m2/repository`. Eventually, this is a big directory tree with many directories and subdirectories that contain `jar` files.\r\n\r\nI&#39;m not working with any IDE - just running `mvn` and `java` from the command line. \r\n\r\nNow, when I try running my project:\r\n```\r\n$ java -cp target/my-app-1.0-SNAPSHOT.jar App\r\n``` \r\n\r\nI get a `NoClassDefFound` error - which I can understand since I&#39;m trying to access dependency code in my code, and it&#39;s not in the classpath - there&#39;s nothing that defines the CLASSPATH to the `~/.m2/repository` directories.\r\n\r\nSo  my question is - how can I run my program from the command line and have the JVM use the dependencies from the `~/.m2/repository`?\r\n\r\nI&#39;ve been searching the web for this and surprisingly didn&#39;t find answers. What I&#39;ve eventually managed to do is:\r\n```\r\n$ mvn dependency:build-classpath\r\n```\r\nthen chain to this string the `./target/my-app-1.0-SNAPSHOT.jar` and then use this with the `-cp` option.\r\n\r\nIs that the way to do it? It&#39;s pretty cumbersome...\r\n\r\nAnyways, I can get away with using some IDE, that&#39;s fine. But what about packing my application in a Docker image? How is that done?\r\n\r\nThanks.\r\n\r\n\r\n","title":"How do you set CLASSPATH to the Maven repository?","body":"<p>I have a Maven project, with some dependencies configured in the pom.xml.</p>\n<p>Now, when I run <code>mvn package</code>, the dependencies are downloaded to <code>~/.m2/repository</code>. Eventually, this is a big directory tree with many directories and subdirectories that contain <code>jar</code> files.</p>\n<p>I'm not working with any IDE - just running <code>mvn</code> and <code>java</code> from the command line.</p>\n<p>Now, when I try running my project:</p>\n<pre><code>$ java -cp target/my-app-1.0-SNAPSHOT.jar App\n</code></pre>\n<p>I get a <code>NoClassDefFound</code> error - which I can understand since I'm trying to access dependency code in my code, and it's not in the classpath - there's nothing that defines the CLASSPATH to the <code>~/.m2/repository</code> directories.</p>\n<p>So  my question is - how can I run my program from the command line and have the JVM use the dependencies from the <code>~/.m2/repository</code>?</p>\n<p>I've been searching the web for this and surprisingly didn't find answers. What I've eventually managed to do is:</p>\n<pre><code>$ mvn dependency:build-classpath\n</code></pre>\n<p>then chain to this string the <code>./target/my-app-1.0-SNAPSHOT.jar</code> and then use this with the <code>-cp</code> option.</p>\n<p>Is that the way to do it? It's pretty cumbersome...</p>\n<p>Anyways, I can get away with using some IDE, that's fine. But what about packing my application in a Docker image? How is that done?</p>\n<p>Thanks.</p>\n"},{"tags":["java","eclipse","jboss","wildfly"],"comments":[{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":0,"creation_date":1689866424,"post_id":76730045,"comment_id":135276983,"body_markdown":"Considering that there&#39;s an Eclipse 202**3**-06 and JBoss Tools 4.2**8**.0.Final download, why are you using backlevel versions?","body":"Considering that there&#39;s an Eclipse 202<b>3</b>-06 and JBoss Tools 4.2<b>8</b>.0.Final download, why are you using backlevel versions?"},{"owner":{"account_id":6397346,"reputation":107,"user_id":4961252,"display_name":"Pete Long"},"score":0,"creation_date":1690057468,"post_id":76730045,"comment_id":135300950,"body_markdown":"I am constrained by the fact that I am only able to go up to Java 11.\nFrom https://wiki.eclipse.org/Eclipse/Installation, the latest Eclipse version that would run with Java 11 is Eclipse 4.24 (2022-06).\nFrom https://tools.jboss.org/downloads/archives.html, using Eclipse 4.24 (2022-06)., the latest version of JBoss tools that i can use is 4.24.0.Final. What I am not able to determine what versions of Wildfly are supported by Jboss tools 4.24.0.Final.  How can i check this please ?","body":"I am constrained by the fact that I am only able to go up to Java 11. From <a href=\"https://wiki.eclipse.org/Eclipse/Installation\" rel=\"nofollow noreferrer\">wiki.eclipse.org/Eclipse/Installation</a>, the latest Eclipse version that would run with Java 11 is Eclipse 4.24 (2022-06). From <a href=\"https://tools.jboss.org/downloads/archives.html\" rel=\"nofollow noreferrer\">tools.jboss.org/downloads/archives.html</a>, using Eclipse 4.24 (2022-06)., the latest version of JBoss tools that i can use is 4.24.0.Final. What I am not able to determine what versions of Wildfly are supported by Jboss tools 4.24.0.Final.  How can i check this please ?"},{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":0,"creation_date":1690094788,"post_id":76730045,"comment_id":135303232,"body_markdown":"The version of Java you use to run Eclipse has little bearing on the version of Java you use to compile and run your own code and app servers. I have no idea what versions of the JBoss Tools support which Wildfly versions, but I would guess that the similarities in version numbering aren&#39;t a coincidence.","body":"The version of Java you use to run Eclipse has little bearing on the version of Java you use to compile and run your own code and app servers. I have no idea what versions of the JBoss Tools support which Wildfly versions, but I would guess that the similarities in version numbering aren&#39;t a coincidence."},{"owner":{"account_id":6397346,"reputation":107,"user_id":4961252,"display_name":"Pete Long"},"score":0,"creation_date":1690130003,"post_id":76730045,"comment_id":135307188,"body_markdown":"Hello @nitind. Thank you for the clarification. So completely wrong understanding on my side. I thought the Eclipse version I used had to be the same Java version as the Java version used in the target environment of the compiled code.  I have done what you suggest before to use &quot;Eclipse 2023-06 and JBoss Tools 4.28.0.Final&quot;. The latest supported Wildfly is &quot;Wildfly 27+&quot;. This much better than &quot;Wildfly 24+&quot; I was getting with &quot;Eclipse version 2022-06&quot; and &quot;JBoss Tools 4.24.0.Final&quot; plugin. I am assumed &quot;Wildfly 27+&quot; will support &quot;Wildfly28&quot; (figers crossed). Finally Thank you nitind","body":"Hello @nitind. Thank you for the clarification. So completely wrong understanding on my side. I thought the Eclipse version I used had to be the same Java version as the Java version used in the target environment of the compiled code.  I have done what you suggest before to use &quot;Eclipse 2023-06 and JBoss Tools 4.28.0.Final&quot;. The latest supported Wildfly is &quot;Wildfly 27+&quot;. This much better than &quot;Wildfly 24+&quot; I was getting with &quot;Eclipse version 2022-06&quot; and &quot;JBoss Tools 4.24.0.Final&quot; plugin. I am assumed &quot;Wildfly 27+&quot; will support &quot;Wildfly28&quot; (figers crossed). Finally Thank you nitind"}],"owner":{"account_id":6397346,"reputation":107,"user_id":4961252,"display_name":"Pete Long"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689857149,"creation_date":1689857149,"question_id":76730045,"body_markdown":"I am using Eclipse version 2022-06 with JBoss Tools 4.24.0.Final plugin installed.\r\n\r\nWith this setup,  I have been able to configure Wilfly 10 server on Eclipse.\r\n\r\nNow we are moving to Wildfly 28. The latest available Wildfly version supported by the JBoss plugin in Eclipse is &quot;Wildfly 24+&quot;. \r\n\r\nDoes the &quot;Wildfly 24+&quot; version mean that this will also support Wildfly 28&quot; too. \r\n\r\nWhilst it does suggest this. just wanted some conformation please.\r\n\r\nThank you","title":"Eclipse JBoss Plugin Wildfly 28 Support","body":"<p>I am using Eclipse version 2022-06 with JBoss Tools 4.24.0.Final plugin installed.</p>\n<p>With this setup,  I have been able to configure Wilfly 10 server on Eclipse.</p>\n<p>Now we are moving to Wildfly 28. The latest available Wildfly version supported by the JBoss plugin in Eclipse is &quot;Wildfly 24+&quot;.</p>\n<p>Does the &quot;Wildfly 24+&quot; version mean that this will also support Wildfly 28&quot; too.</p>\n<p>Whilst it does suggest this. just wanted some conformation please.</p>\n<p>Thank you</p>\n"},{"tags":["java","maven","code-generation","avro"],"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1689856798,"post_id":76657203,"comment_id":135274479,"body_markdown":"I would not use induce option... As you&#39;ve explained, the generated classes from the AVSC already have a static SCHEMA$ field with the AVSC string, if you need it at runtime. I&#39;ve also done the exec plugin trick... Why do you actually need the AVSC files? The schema registry doesn&#39;t use them, and neither does Kafka","body":"I would not use induce option... As you&#39;ve explained, the generated classes from the AVSC already have a static SCHEMA$ field with the AVSC string, if you need it at runtime. I&#39;ve also done the exec plugin trick... Why do you actually need the AVSC files? The schema registry doesn&#39;t use them, and neither does Kafka"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1689857200,"post_id":76657203,"comment_id":135274562,"body_markdown":"I&#39;ll also note that Java packages cannot have hyphens. That seems to be part of the issue here. And neither should target be in the package name","body":"I&#39;ll also note that Java packages cannot have hyphens. That seems to be part of the issue here. And neither should target be in the package name"}],"owner":{"account_id":28989701,"reputation":1,"user_id":22205762,"display_name":"rocash"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":289,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689856809,"creation_date":1689021720,"question_id":76657203,"body_markdown":"I am using Kafka &amp; Avro in my current project, and I decided to upgrade the way I have been doing things for years.\r\n\r\nI always start from an AVDL, as I consider it the cleanest way to describe a schema, then generate Java classes from it using avro-maven-plugin.\r\nWhen it comes to the AVSC schema files, either I was retrieving them manually from the Java classes, either using exec-maven-plugin to run the command idl2schemata on the Avro tools and generate them.\r\n\r\nHowever, I noticed that avro-maven-plugin released a new induce goal: https://issues.apache.org/jira/browse/AVRO-2365\r\nThis one allowing to generate AVSC / AVPR from java classes directly:\r\n\r\n`mvn avro:help -Ddetail=true -Dgoal=induce`\r\n\r\n```\r\nMaven plugin for Avro IDL and Specific API Compilers\r\n\r\navro:induce\r\n  Generate Avro files (.avsc and .avpr) from Java classes or interfaces\r\n\r\n  Available parameters:\r\n\r\n    allowNull (Default: false)\r\n      Whether to use ReflectData.AllowNull.\r\n\r\n    avroOutputDirectory (Default:\r\n    ${project.build.directory}/generated-resources/avro)\r\n      Directory where to output Avro schemas (.avsc) or protocols (.avpr).\r\n      User property: avroOutputDirectory\r\n\r\n    encoding (Default: ${project.build.sourceEncoding})\r\n      The output encoding.\r\n\r\n    javaSourceDirectories (Default: ${basedir}/src/main/java)\r\n      The Java source directories.\r\n      User property: javaSourceDirectories\r\n\r\n    reflectDataImplementation\r\n      Override the default ReflectData implementation with an extension. Must be\r\n      a subclass of ReflectData.\r\n      User property: reflectDataImplementation\r\n```\r\n\r\n \r\nMy goal then became simple, use only avro-maven-plugin to:\r\n1. generate the Java classes from my AVDL file (goal idl-protocol)\r\n2. then generate the AVSC files from my generated Java classes (goal induce)\r\n\r\nMy pom would be cleaner, and the schema customization done during the idl-protocol would be kept.\r\n\r\n\r\n\r\nSo I came with something like this:\r\n\r\n```\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.avro&lt;/groupId&gt;\r\n                &lt;artifactId&gt;avro-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;1.11.1&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;phase&gt;generate-sources&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;idl-protocol&lt;/goal&gt;\r\n                            &lt;goal&gt;induce&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;!-- idl-protocol goal - The source directory of avro files --&gt;\r\n                    &lt;sourceDirectory&gt;${project.basedir}/src/main/resources/avro/&lt;/sourceDirectory&gt;\r\n                    &lt;!-- idl-protocol goal - The output directory of Java classes --&gt;\r\n                    &lt;outputDirectory&gt;${project.build.directory}/generated-sources/avro&lt;/outputDirectory&gt;\r\n                    &lt;!-- idl-protocol goal - Customization --&gt;\r\n                    &lt;createSetters&gt;false&lt;/createSetters&gt;\r\n                    &lt;stringType&gt;String&lt;/stringType&gt;\r\n                    &lt;!-- induce goal - The java source directory --&gt;\r\n                    &lt;javaSourceDirectories&gt;${project.build.directory}/generated-sources/avro&lt;/javaSourceDirectories&gt;\r\n                    &lt;!-- induce goal - Directory where to output Avro schemas --&gt;\r\n                    &lt;avroOutputDirectory&gt;${project.build.directory}/generated-resources/avro&lt;/avroOutputDirectory&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n```\r\n\r\nHowever, using the command `mvn clean avro:idl-protocol avro:induce` on a demo schema:\r\n\r\n```\r\n@namespace(&quot;com.stack.overflow.kafka.event&quot;)\r\nprotocol CompensationProtocol {\r\n\r\n\trecord Question {\r\n\t\tint memberId;\r\n\t\tstring title;\r\n\t}\r\n}\r\n```\r\n\r\nalways lead to a failure, a `java.lang.ClassNotFoundException` when executing the induce goal:\r\n\r\n```\r\n[ERROR] Failed to execute goal org.apache.avro:avro-maven-plugin:1.11.1:induce (default-cli) on project compensation: Failed to load class rs.john.doe.git.demo.target.generated-sources.avro.com.stack.overflow.kafka.event.CompensationProtocol -&gt; [Help 1]\r\norg.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.avro:avro-maven-plugin:1.11.1:induce (default-cli) on project compensation: Failed to load class rs.john.doe.git.demo.target.generated-sources.avro.com.stack.overflow.kafka.event.CompensationProtocol\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute2 (MojoExecutor.java:347)\r\n    ...\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:348)\r\nCaused by: org.apache.maven.plugin.MojoExecutionException: Failed to load class rs.john.doe.git.demo.target.generated-sources.avro.com.stack.overflow.kafka.event.CompensationProtocol\r\n    at org.apache.avro.mojo.InduceMojo.loadClass (InduceMojo.java:184)\r\n    ...\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:348)\r\nCaused by: java.lang.ClassNotFoundException: rs.john.doe.git.demo.target.generated-sources.avro.com.stack.overflow.kafka.event.CompensationProtocol\r\n    at java.net.URLClassLoader.findClass (URLClassLoader.java:445)\r\n    at java.lang.ClassLoader.loadClass (ClassLoader.java:587)\r\n    at java.lang.ClassLoader.loadClass (ClassLoader.java:520)\r\n    at org.apache.avro.mojo.InduceMojo.loadClass (InduceMojo.java:182)\r\n    at org.apache.avro.mojo.InduceMojo.induceClasses (InduceMojo.java:124)\r\n    at org.apache.avro.mojo.InduceMojo.induceClasses (InduceMojo.java:115)\r\n    at org.apache.avro.mojo.InduceMojo.induceClasses (InduceMojo.java:115)\r\n    at org.apache.avro.mojo.InduceMojo.induceClasses (InduceMojo.java:115)\r\n    at org.apache.avro.mojo.InduceMojo.induceClasses (InduceMojo.java:115)\r\n    at org.apache.avro.mojo.InduceMojo.induceClasses (InduceMojo.java:115)\r\n    at org.apache.avro.mojo.InduceMojo.execute (InduceMojo.java:103)\r\n    ...\r\n```\r\n\r\nThe Java classes are properly generated as usual, but not the AVSC files.\r\n\r\nI tried to run the induce goal only, to have the classes into a source folder rather than target, I even used public Avro generated avro classes.. the exception was always there.\r\n\r\n\r\nTo figure the root cause of the exception, I even went into the `InduceMojo.class` of the plugin sources, extracted the relevant sources, build a custom project with maven plugin dependencies.. but I couldn&#39;t reproduce.\r\n\r\nWhen provided with the proper classname (here `rs.john.doe.git.demo.target.generated-sources.avro.com.stack.overflow.kafka.event.CompensationProtocol`), my own class loader was able to load it rather than throwing an exception:\r\nhttps://github.com/apache/avro/blob/master/lang/java/maven-plugin/src/main/java/org/apache/avro/mojo/InduceMojo.java#L182\r\n\r\n\r\nAt that stage, I have more or less gave up on using the induce goal, but I still have hopes that you guys will have a nice idea to solve this !","title":"avro-maven plugin - ClassNotFoundException during induce goal","body":"<p>I am using Kafka &amp; Avro in my current project, and I decided to upgrade the way I have been doing things for years.</p>\n<p>I always start from an AVDL, as I consider it the cleanest way to describe a schema, then generate Java classes from it using avro-maven-plugin.\nWhen it comes to the AVSC schema files, either I was retrieving them manually from the Java classes, either using exec-maven-plugin to run the command idl2schemata on the Avro tools and generate them.</p>\n<p>However, I noticed that avro-maven-plugin released a new induce goal: <a href=\"https://issues.apache.org/jira/browse/AVRO-2365\" rel=\"nofollow noreferrer\">https://issues.apache.org/jira/browse/AVRO-2365</a>\nThis one allowing to generate AVSC / AVPR from java classes directly:</p>\n<p><code>mvn avro:help -Ddetail=true -Dgoal=induce</code></p>\n<pre><code>Maven plugin for Avro IDL and Specific API Compilers\n\navro:induce\n  Generate Avro files (.avsc and .avpr) from Java classes or interfaces\n\n  Available parameters:\n\n    allowNull (Default: false)\n      Whether to use ReflectData.AllowNull.\n\n    avroOutputDirectory (Default:\n    ${project.build.directory}/generated-resources/avro)\n      Directory where to output Avro schemas (.avsc) or protocols (.avpr).\n      User property: avroOutputDirectory\n\n    encoding (Default: ${project.build.sourceEncoding})\n      The output encoding.\n\n    javaSourceDirectories (Default: ${basedir}/src/main/java)\n      The Java source directories.\n      User property: javaSourceDirectories\n\n    reflectDataImplementation\n      Override the default ReflectData implementation with an extension. Must be\n      a subclass of ReflectData.\n      User property: reflectDataImplementation\n</code></pre>\n<p>My goal then became simple, use only avro-maven-plugin to:</p>\n<ol>\n<li>generate the Java classes from my AVDL file (goal idl-protocol)</li>\n<li>then generate the AVSC files from my generated Java classes (goal induce)</li>\n</ol>\n<p>My pom would be cleaner, and the schema customization done during the idl-protocol would be kept.</p>\n<p>So I came with something like this:</p>\n<pre><code>            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.avro&lt;/groupId&gt;\n                &lt;artifactId&gt;avro-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;1.11.1&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;phase&gt;generate-sources&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;idl-protocol&lt;/goal&gt;\n                            &lt;goal&gt;induce&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n                &lt;configuration&gt;\n                    &lt;!-- idl-protocol goal - The source directory of avro files --&gt;\n                    &lt;sourceDirectory&gt;${project.basedir}/src/main/resources/avro/&lt;/sourceDirectory&gt;\n                    &lt;!-- idl-protocol goal - The output directory of Java classes --&gt;\n                    &lt;outputDirectory&gt;${project.build.directory}/generated-sources/avro&lt;/outputDirectory&gt;\n                    &lt;!-- idl-protocol goal - Customization --&gt;\n                    &lt;createSetters&gt;false&lt;/createSetters&gt;\n                    &lt;stringType&gt;String&lt;/stringType&gt;\n                    &lt;!-- induce goal - The java source directory --&gt;\n                    &lt;javaSourceDirectories&gt;${project.build.directory}/generated-sources/avro&lt;/javaSourceDirectories&gt;\n                    &lt;!-- induce goal - Directory where to output Avro schemas --&gt;\n                    &lt;avroOutputDirectory&gt;${project.build.directory}/generated-resources/avro&lt;/avroOutputDirectory&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n</code></pre>\n<p>However, using the command <code>mvn clean avro:idl-protocol avro:induce</code> on a demo schema:</p>\n<pre><code>@namespace(&quot;com.stack.overflow.kafka.event&quot;)\nprotocol CompensationProtocol {\n\n    record Question {\n        int memberId;\n        string title;\n    }\n}\n</code></pre>\n<p>always lead to a failure, a <code>java.lang.ClassNotFoundException</code> when executing the induce goal:</p>\n<pre><code>[ERROR] Failed to execute goal org.apache.avro:avro-maven-plugin:1.11.1:induce (default-cli) on project compensation: Failed to load class rs.john.doe.git.demo.target.generated-sources.avro.com.stack.overflow.kafka.event.CompensationProtocol -&gt; [Help 1]\norg.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.avro:avro-maven-plugin:1.11.1:induce (default-cli) on project compensation: Failed to load class rs.john.doe.git.demo.target.generated-sources.avro.com.stack.overflow.kafka.event.CompensationProtocol\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute2 (MojoExecutor.java:347)\n    ...\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:348)\nCaused by: org.apache.maven.plugin.MojoExecutionException: Failed to load class rs.john.doe.git.demo.target.generated-sources.avro.com.stack.overflow.kafka.event.CompensationProtocol\n    at org.apache.avro.mojo.InduceMojo.loadClass (InduceMojo.java:184)\n    ...\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:348)\nCaused by: java.lang.ClassNotFoundException: rs.john.doe.git.demo.target.generated-sources.avro.com.stack.overflow.kafka.event.CompensationProtocol\n    at java.net.URLClassLoader.findClass (URLClassLoader.java:445)\n    at java.lang.ClassLoader.loadClass (ClassLoader.java:587)\n    at java.lang.ClassLoader.loadClass (ClassLoader.java:520)\n    at org.apache.avro.mojo.InduceMojo.loadClass (InduceMojo.java:182)\n    at org.apache.avro.mojo.InduceMojo.induceClasses (InduceMojo.java:124)\n    at org.apache.avro.mojo.InduceMojo.induceClasses (InduceMojo.java:115)\n    at org.apache.avro.mojo.InduceMojo.induceClasses (InduceMojo.java:115)\n    at org.apache.avro.mojo.InduceMojo.induceClasses (InduceMojo.java:115)\n    at org.apache.avro.mojo.InduceMojo.induceClasses (InduceMojo.java:115)\n    at org.apache.avro.mojo.InduceMojo.induceClasses (InduceMojo.java:115)\n    at org.apache.avro.mojo.InduceMojo.execute (InduceMojo.java:103)\n    ...\n</code></pre>\n<p>The Java classes are properly generated as usual, but not the AVSC files.</p>\n<p>I tried to run the induce goal only, to have the classes into a source folder rather than target, I even used public Avro generated avro classes.. the exception was always there.</p>\n<p>To figure the root cause of the exception, I even went into the <code>InduceMojo.class</code> of the plugin sources, extracted the relevant sources, build a custom project with maven plugin dependencies.. but I couldn't reproduce.</p>\n<p>When provided with the proper classname (here <code>rs.john.doe.git.demo.target.generated-sources.avro.com.stack.overflow.kafka.event.CompensationProtocol</code>), my own class loader was able to load it rather than throwing an exception:\n<a href=\"https://github.com/apache/avro/blob/master/lang/java/maven-plugin/src/main/java/org/apache/avro/mojo/InduceMojo.java#L182\" rel=\"nofollow noreferrer\">https://github.com/apache/avro/blob/master/lang/java/maven-plugin/src/main/java/org/apache/avro/mojo/InduceMojo.java#L182</a></p>\n<p>At that stage, I have more or less gave up on using the induce goal, but I still have hopes that you guys will have a nice idea to solve this !</p>\n"},{"tags":["java","maven","pom.xml"],"comments":[{"owner":{"account_id":187094,"reputation":5113,"user_id":424903,"display_name":"Gimby"},"score":3,"creation_date":1689161397,"post_id":76669771,"comment_id":135173456,"body_markdown":"I don&#39;t think you can. The documentation specifically states it even: https://maven.apache.org/guides/mini/guide-deployment-security-settings.html","body":"I don&#39;t think you can. The documentation specifically states it even: <a href=\"https://maven.apache.org/guides/mini/guide-deployment-security-settings.html\" rel=\"nofollow noreferrer\">maven.apache.org/guides/mini/&hellip;</a>"},{"owner":{"account_id":4809624,"reputation":3467,"user_id":3883475,"accept_rate":85,"display_name":"Ironluca"},"score":0,"creation_date":1689169110,"post_id":76669771,"comment_id":135175376,"body_markdown":"You at least need one of the settings as indicated in the URL https://maven.apache.org/settings.html","body":"You at least need one of the settings as indicated in the URL <a href=\"https://maven.apache.org/settings.html\" rel=\"nofollow noreferrer\">maven.apache.org/settings.html</a>"},{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1689268347,"post_id":76669771,"comment_id":135193045,"body_markdown":"Technically you can defined repository within the pom file which is bad practice.. defining credentials in the pom file is simply not possible ...","body":"Technically you can defined repository within the pom file which is bad practice.. defining credentials in the pom file is simply not possible ..."},{"owner":{"account_id":8893736,"reputation":57,"user_id":6639486,"display_name":"Siya Nxuseka"},"score":0,"creation_date":1689665195,"post_id":76669771,"comment_id":135241842,"body_markdown":"Thanks, fellas I found a workaround to put the setting xml in the .m2 folder of the agent.","body":"Thanks, fellas I found a workaround to put the setting xml in the .m2 folder of the agent."}],"answers":[{"tags":[],"owner":{"account_id":187094,"reputation":5113,"user_id":424903,"display_name":"Gimby"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689856410,"creation_date":1689856410,"answer_id":76729930,"question_id":76669771,"body_markdown":"This is not possible. Credentials must be stored inside a settings.xml file.\r\n\r\nThe [Maven documentation][1] specifically states this.\r\n\r\n\r\n  [1]: https://maven.apache.org/guides/mini/guide-deployment-security-settings.html","title":"POM xml with credentials for Custom Repo","body":"<p>This is not possible. Credentials must be stored inside a settings.xml file.</p>\n<p>The <a href=\"https://maven.apache.org/guides/mini/guide-deployment-security-settings.html\" rel=\"nofollow noreferrer\">Maven documentation</a> specifically states this.</p>\n"}],"owner":{"account_id":8893736,"reputation":57,"user_id":6639486,"display_name":"Siya Nxuseka"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76729930,"answer_count":1,"score":0,"last_activity_date":1689856410,"creation_date":1689159123,"question_id":76669771,"body_markdown":"Could you please provide assistance with the following POM XML? I am encountering the error message ***Could not transfer metadata io.smkfdk7.commons:commons-utils/maven-metadata.xml from/to custom-repo*** when running the ```mvn clean package``` goals. I am aware that using a ```settings.xml``` file is recommended for security purposes, but it is taking some time to set up in our Azure DevOps pipelines. Therefore, I would like to find a solution for resolving private artifacts by including login credentials in my POM XML at the moment. Essentially, I would like to know how to specify the login credentials for my ```custom repo``` in the POM XML.\r\nPOM.XML\r\n\r\n  ```&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.0.2&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.vit-uk-life-dto.dmdex&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;dmdex-core-service&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;DMDex&lt;/name&gt;\r\n\t&lt;description&gt;DMDex application for Disruption management and Documentation&lt;/description&gt;\r\n\t&lt;repositories&gt;\r\n\t\t&lt;repository&gt;\r\n\t\t\t&lt;id&gt;central&lt;/id&gt;\r\n\t\t\t&lt;url&gt;https://repo.maven.apache.org/maven2/&lt;/url&gt;\r\n\t\t\t&lt;releases&gt;\r\n\t\t\t\t&lt;enabled&gt;true&lt;/enabled&gt;\r\n\t\t\t&lt;/releases&gt;\r\n\t\t\t&lt;snapshots&gt;\r\n\t\t\t\t&lt;enabled&gt;false&lt;/enabled&gt;\r\n\t\t\t&lt;/snapshots&gt;\r\n\t\t&lt;/repository&gt;\r\n\t\t&lt;repository&gt;\r\n\t\t\t&lt;id&gt;custom-repo&lt;/id&gt;\r\n\t\t\t&lt;url&gt;https://vit-uk-life-dto.com/artifactory/appsmav-main-maven-local&lt;/url&gt;\r\n\t\t\t&lt;releases&gt;\r\n\t\t\t\t&lt;enabled&gt;true&lt;/enabled&gt;\r\n\t\t\t&lt;/releases&gt;\r\n\t\t\t&lt;snapshots&gt;\r\n\t\t\t\t&lt;enabled&gt;false&lt;/enabled&gt;\r\n\t\t\t&lt;/snapshots&gt;\r\n\t\t&lt;/repository&gt;\r\n\t&lt;/repositories&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;8.0.0.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.smkfdk7.commons&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;commons-io&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.3.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.scapps.common.api&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;scapps-commons-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.smkfdk7.commons&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;commons-utils&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;[1.0.0,2.0.0)&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.smkfdk7.commons&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;commons-jwt&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.0.8&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.glassfish.jersey.core&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jersey-client&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.0.8&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;finalName&gt;dmdex-core-service&lt;/finalName&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t&lt;exclude&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;/exclude&gt;\r\n\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n\t&lt;profiles&gt;\r\n\t\t&lt;profile&gt;\r\n\t\t\t&lt;id&gt;custom-repo-auth&lt;/id&gt;\r\n\t\t\t&lt;activation&gt;\r\n\t\t\t\t&lt;activeByDefault&gt;false&lt;/activeByDefault&gt;\r\n\t\t\t&lt;/activation&gt;\r\n\t\t\t&lt;repositories&gt;\r\n\t\t\t\t&lt;repository&gt;\r\n\t\t\t\t\t&lt;id&gt;custom-repo&lt;/id&gt;\r\n\t\t\t\t\t&lt;url&gt;https://vit-uk-life-dto.com/artifactory/appsmav-main-maven-local&lt;/url&gt;\r\n\t\t\t\t\t&lt;releases&gt;\r\n\t\t\t\t\t\t&lt;enabled&gt;true&lt;/enabled&gt;\r\n\t\t\t\t\t&lt;/releases&gt;\r\n\t\t\t\t\t&lt;snapshots&gt;\r\n\t\t\t\t\t\t&lt;enabled&gt;false&lt;/enabled&gt;\r\n\t\t\t\t\t&lt;/snapshots&gt;\r\n\t\t\t\t&lt;/repository&gt;\r\n\t\t\t&lt;/repositories&gt;\r\n\t\t&lt;/profile&gt;\r\n\t&lt;/profiles&gt;\r\n\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t\t&lt;custom-repo-username&gt;PID7552&lt;/custom-repo-username&gt;\r\n\t\t&lt;custom-repo-password&gt;bvdbhsdvhfbvhfbvbfvhfhjfhfvbdfbvhfvh&lt;/custom-repo-password&gt;\r\n\t&lt;/properties&gt;\r\n\r\n&lt;/project&gt;\r\n","title":"POM xml with credentials for Custom Repo","body":"<p>Could you please provide assistance with the following POM XML? I am encountering the error message <em><strong>Could not transfer metadata io.smkfdk7.commons:commons-utils/maven-metadata.xml from/to custom-repo</strong></em> when running the <code>mvn clean package</code> goals. I am aware that using a <code>settings.xml</code> file is recommended for security purposes, but it is taking some time to set up in our Azure DevOps pipelines. Therefore, I would like to find a solution for resolving private artifacts by including login credentials in my POM XML at the moment. Essentially, I would like to know how to specify the login credentials for my <code>custom repo</code> in the POM XML.\nPOM.XML</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;parent&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n      &lt;version&gt;3.0.2&lt;/version&gt;\n      &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n  &lt;/parent&gt;\n  &lt;groupId&gt;com.vit-uk-life-dto.dmdex&lt;/groupId&gt;\n  &lt;artifactId&gt;dmdex-core-service&lt;/artifactId&gt;\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n  &lt;name&gt;DMDex&lt;/name&gt;\n  &lt;description&gt;DMDex application for Disruption management and Documentation&lt;/description&gt;\n  &lt;repositories&gt;\n      &lt;repository&gt;\n          &lt;id&gt;central&lt;/id&gt;\n          &lt;url&gt;https://repo.maven.apache.org/maven2/&lt;/url&gt;\n          &lt;releases&gt;\n              &lt;enabled&gt;true&lt;/enabled&gt;\n          &lt;/releases&gt;\n          &lt;snapshots&gt;\n              &lt;enabled&gt;false&lt;/enabled&gt;\n          &lt;/snapshots&gt;\n      &lt;/repository&gt;\n      &lt;repository&gt;\n          &lt;id&gt;custom-repo&lt;/id&gt;\n          &lt;url&gt;https://vit-uk-life-dto.com/artifactory/appsmav-main-maven-local&lt;/url&gt;\n          &lt;releases&gt;\n              &lt;enabled&gt;true&lt;/enabled&gt;\n          &lt;/releases&gt;\n          &lt;snapshots&gt;\n              &lt;enabled&gt;false&lt;/enabled&gt;\n          &lt;/snapshots&gt;\n      &lt;/repository&gt;\n  &lt;/repositories&gt;\n  &lt;dependencies&gt;\n      &lt;dependency&gt;\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n          &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n          &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n          &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\n          &lt;version&gt;8.0.0.Final&lt;/version&gt;\n      &lt;/dependency&gt;\n\n      &lt;dependency&gt;\n          &lt;groupId&gt;io.smkfdk7.commons&lt;/groupId&gt;\n          &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\n          &lt;version&gt;1.3.0&lt;/version&gt;\n      &lt;/dependency&gt;\n      \n      &lt;dependency&gt;\n          &lt;groupId&gt;com.scapps.common.api&lt;/groupId&gt;\n          &lt;artifactId&gt;scapps-commons-api&lt;/artifactId&gt;\n          &lt;version&gt;1.0&lt;/version&gt;\n      &lt;/dependency&gt;\n\n      &lt;dependency&gt;\n          &lt;groupId&gt;io.smkfdk7.commons&lt;/groupId&gt;\n          &lt;artifactId&gt;commons-utils&lt;/artifactId&gt;\n          &lt;version&gt;[1.0.0,2.0.0)&lt;/version&gt;\n      &lt;/dependency&gt;\n\n      &lt;dependency&gt;\n          &lt;groupId&gt;io.smkfdk7.commons&lt;/groupId&gt;\n          &lt;artifactId&gt;commons-jwt&lt;/artifactId&gt;\n          &lt;version&gt;1.0.8&lt;/version&gt;\n      &lt;/dependency&gt;\n\n      &lt;dependency&gt;\n          &lt;groupId&gt;org.glassfish.jersey.core&lt;/groupId&gt;\n          &lt;artifactId&gt;jersey-client&lt;/artifactId&gt;\n          &lt;version&gt;3.0.8&lt;/version&gt;\n      &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n\n  &lt;build&gt;\n      &lt;finalName&gt;dmdex-core-service&lt;/finalName&gt;\n      &lt;plugins&gt;\n          &lt;plugin&gt;\n              &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n              &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n              &lt;configuration&gt;\n                  &lt;excludes&gt;\n                      &lt;exclude&gt;\n                          &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                          &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                      &lt;/exclude&gt;\n                  &lt;/excludes&gt;\n              &lt;/configuration&gt;\n          &lt;/plugin&gt;\n      &lt;/plugins&gt;\n  &lt;/build&gt;\n\n  &lt;profiles&gt;\n      &lt;profile&gt;\n          &lt;id&gt;custom-repo-auth&lt;/id&gt;\n          &lt;activation&gt;\n              &lt;activeByDefault&gt;false&lt;/activeByDefault&gt;\n          &lt;/activation&gt;\n          &lt;repositories&gt;\n              &lt;repository&gt;\n                  &lt;id&gt;custom-repo&lt;/id&gt;\n                  &lt;url&gt;https://vit-uk-life-dto.com/artifactory/appsmav-main-maven-local&lt;/url&gt;\n                  &lt;releases&gt;\n                      &lt;enabled&gt;true&lt;/enabled&gt;\n                  &lt;/releases&gt;\n                  &lt;snapshots&gt;\n                      &lt;enabled&gt;false&lt;/enabled&gt;\n                  &lt;/snapshots&gt;\n              &lt;/repository&gt;\n          &lt;/repositories&gt;\n      &lt;/profile&gt;\n  &lt;/profiles&gt;\n\n  &lt;properties&gt;\n      &lt;java.version&gt;17&lt;/java.version&gt;\n      &lt;custom-repo-username&gt;PID7552&lt;/custom-repo-username&gt;\n      &lt;custom-repo-password&gt;bvdbhsdvhfbvhfbvbfvhfhjfhfvbdfbvhfvh&lt;/custom-repo-password&gt;\n  &lt;/properties&gt;\n\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","multithreading","threadpool","executorservice","java-threads"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1689845457,"post_id":76728486,"comment_id":135272090,"body_markdown":"I&#39;m not sure which api you are calling, but if it was mine I&#39;d be pretty unhappy. This borders on abuse, especially if the list of ids is bigger than ~4.","body":"I&#39;m not sure which api you are calling, but if it was mine I&#39;d be pretty unhappy. This borders on abuse, especially if the list of ids is bigger than ~4."}],"answers":[{"tags":[],"owner":{"account_id":17228781,"reputation":3548,"user_id":12473843,"display_name":"Sergey Tsypanov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689846893,"creation_date":1689846893,"answer_id":76728684,"question_id":76728486,"body_markdown":"You can do this with `CompletableFuture`:\r\n```java\r\nvoid foo(List&lt;String&gt; ids) throws Exception {\r\n  List&lt;CompletableFuture&lt;String&gt;&gt; futures = new ArrayList&lt;&gt;();\r\n  for (String id : ids) {\r\n    CompletableFuture&lt;String&gt; future = CompletableFuture.supplyAsync(() -&gt; hitEndpoint(id), executor);\r\n    futures.add(future);\r\n  }\r\n\r\n  String string = anyMatch(futures, str -&gt; str == &quot;apple&quot;).get();\r\n}\r\n\r\nstatic CompletableFuture&lt;String&gt; anyMatch(List&lt;? extends CompletionStage&lt;String&gt;&gt; l, Predicate&lt;String&gt; criteria) {\r\n\r\n  CompletableFuture&lt;String&gt; result = new CompletableFuture&lt;&gt;();\r\n  Consumer&lt;String&gt; whenMatching = v -&gt; {\r\n    if (criteria.test(v)) result.complete(v);\r\n  };\r\n  CompletableFuture.allOf(l.stream()\r\n                  .map(f -&gt; f.thenAccept(whenMatching)).toArray(CompletableFuture&lt;?&gt;[]::new))\r\n                  .whenComplete((ignored, t) -&gt;\r\n                  result.completeExceptionally(t != null ? t : new NoSuchElementException()));\r\n  return result;\r\n}\r\n```\r\nThe second method is taken from https://stackoverflow.com/questions/36612224/in-java-how-do-i-process-completablefutures-and-get-the-first-desireable-result\r\n\r\nOne more solution can be found on https://stackoverflow.com/questions/50517771/chain-completablefuture-and-stop-on-first-success","title":"ExecutorService listen to first task to finish in parallel and cancel the rest","body":"<p>You can do this with <code>CompletableFuture</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>void foo(List&lt;String&gt; ids) throws Exception {\n  List&lt;CompletableFuture&lt;String&gt;&gt; futures = new ArrayList&lt;&gt;();\n  for (String id : ids) {\n    CompletableFuture&lt;String&gt; future = CompletableFuture.supplyAsync(() -&gt; hitEndpoint(id), executor);\n    futures.add(future);\n  }\n\n  String string = anyMatch(futures, str -&gt; str == &quot;apple&quot;).get();\n}\n\nstatic CompletableFuture&lt;String&gt; anyMatch(List&lt;? extends CompletionStage&lt;String&gt;&gt; l, Predicate&lt;String&gt; criteria) {\n\n  CompletableFuture&lt;String&gt; result = new CompletableFuture&lt;&gt;();\n  Consumer&lt;String&gt; whenMatching = v -&gt; {\n    if (criteria.test(v)) result.complete(v);\n  };\n  CompletableFuture.allOf(l.stream()\n                  .map(f -&gt; f.thenAccept(whenMatching)).toArray(CompletableFuture&lt;?&gt;[]::new))\n                  .whenComplete((ignored, t) -&gt;\n                  result.completeExceptionally(t != null ? t : new NoSuchElementException()));\n  return result;\n}\n</code></pre>\n<p>The second method is taken from <a href=\"https://stackoverflow.com/questions/36612224/in-java-how-do-i-process-completablefutures-and-get-the-first-desireable-result\">In java, how do I process CompletableFutures and get the first desireable result that completes?</a></p>\n<p>One more solution can be found on <a href=\"https://stackoverflow.com/questions/50517771/chain-completablefuture-and-stop-on-first-success\">Chain CompletableFuture and stop on first success</a></p>\n"},{"tags":[],"owner":{"account_id":13993199,"reputation":129,"user_id":10362945,"display_name":"Sagar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689856355,"creation_date":1689856355,"answer_id":76729920,"question_id":76728486,"body_markdown":"Two factors are important for below algorithm to work efficiently\r\n - The blocking http call is sensitive to interrupt ,so as soon as it gets one ,it terminates with interruption and throws InterruptedException\r\n - The shutdownNow from executors will cancel execution of waiting threads,interrupts the executing thread as mentioned in doc\r\n\r\n&gt; Attempts to stop all actively executing tasks, halts the processing of waiting tasks, and returns a list of the tasks that were awaiting execution.\r\nThis method does not wait for actively executing tasks to terminate. Use awaitTermination to do that.\r\nThere are no guarantees beyond best-effort attempts to stop processing actively executing tasks. For example, typical implementations will cancel via Thread.interrupt, so any task that fails to respond to interrupts may never terminate.\r\n\r\nWe check on interrupt status before making the blocking call so that we don&#39;t miss on the already interrupted status\r\n\r\n```\r\nimport org.apache.commons.lang3.RandomUtils;\r\n...\r\n public static void main(String[] args) throws InterruptedException, ExecutionException {\r\n\r\n        Predicate&lt;CompletableFuture&gt; isCompletedExceptionally = CompletableFuture::isCompletedExceptionally;\r\n        Predicate&lt;CompletableFuture&gt; isNotCompletedExceptionally = isCompletedExceptionally.negate();\r\n        Stream&lt;String&gt; streamIds = IntStream.rangeClosed(1, 1000).mapToObj(String::valueOf);\r\n\r\n\r\n        CountDownLatch latch = new CountDownLatch(1);//only one result to succeed\r\n        ExecutorService executor = Executors.newFixedThreadPool(4);\r\n        List&lt;CompletableFuture&lt;String&gt;&gt; stringFutureResults = streamIds\r\n                                                                    .map(id -&gt; CompletableFuture.supplyAsync(() -&gt; hitEndpoint(id, latch), executor))\r\n                                                                    .collect(Collectors.toList());\r\n        latch.await();//waits for atleast one api call to succeed\r\n        executor.shutdownNow();//This will stop accepting new tasks and interrupts already executing tasks\r\n\r\n        Optional&lt;CompletableFuture&lt;String&gt;&gt; resultFuture = stringFutureResults.stream()\r\n                .filter(isNotCompletedExceptionally)\r\n                //.filter(CompletableFuture::isDone) // thread executing hitEndpoint never got a chance to return\r\n                .filter(future -&gt; future.join() != null)\r\n                .findFirst();\r\n\r\n        System.out.println(resultFuture.get().get());\r\n\r\n    }\r\n\r\n\r\n    private static String hitEndpoint(String id, CountDownLatch latch) {\r\n\r\n        try {\r\n            if (latch.getCount()&gt;0 &amp;&amp; !Thread.currentThread().isInterrupted()){\r\n                //api call\r\n                Thread.sleep(RandomUtils.nextLong(100,900));//Generally a http call is sensitive to interrupt\r\n                latch.countDown();\r\n                return &quot;Api Response&quot;+id;\r\n            }\r\n\r\n        } catch (InterruptedException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n        Thread.currentThread().interrupt();//Its response is not required\r\n        return null;\r\n    }\r\n   \r\n```\r\n\r\n","title":"ExecutorService listen to first task to finish in parallel and cancel the rest","body":"<p>Two factors are important for below algorithm to work efficiently</p>\n<ul>\n<li>The blocking http call is sensitive to interrupt ,so as soon as it gets one ,it terminates with interruption and throws InterruptedException</li>\n<li>The shutdownNow from executors will cancel execution of waiting threads,interrupts the executing thread as mentioned in doc</li>\n</ul>\n<blockquote>\n<p>Attempts to stop all actively executing tasks, halts the processing of waiting tasks, and returns a list of the tasks that were awaiting execution.\nThis method does not wait for actively executing tasks to terminate. Use awaitTermination to do that.\nThere are no guarantees beyond best-effort attempts to stop processing actively executing tasks. For example, typical implementations will cancel via Thread.interrupt, so any task that fails to respond to interrupts may never terminate.</p>\n</blockquote>\n<p>We check on interrupt status before making the blocking call so that we don't miss on the already interrupted status</p>\n<pre><code>import org.apache.commons.lang3.RandomUtils;\n...\n public static void main(String[] args) throws InterruptedException, ExecutionException {\n\n        Predicate&lt;CompletableFuture&gt; isCompletedExceptionally = CompletableFuture::isCompletedExceptionally;\n        Predicate&lt;CompletableFuture&gt; isNotCompletedExceptionally = isCompletedExceptionally.negate();\n        Stream&lt;String&gt; streamIds = IntStream.rangeClosed(1, 1000).mapToObj(String::valueOf);\n\n\n        CountDownLatch latch = new CountDownLatch(1);//only one result to succeed\n        ExecutorService executor = Executors.newFixedThreadPool(4);\n        List&lt;CompletableFuture&lt;String&gt;&gt; stringFutureResults = streamIds\n                                                                    .map(id -&gt; CompletableFuture.supplyAsync(() -&gt; hitEndpoint(id, latch), executor))\n                                                                    .collect(Collectors.toList());\n        latch.await();//waits for atleast one api call to succeed\n        executor.shutdownNow();//This will stop accepting new tasks and interrupts already executing tasks\n\n        Optional&lt;CompletableFuture&lt;String&gt;&gt; resultFuture = stringFutureResults.stream()\n                .filter(isNotCompletedExceptionally)\n                //.filter(CompletableFuture::isDone) // thread executing hitEndpoint never got a chance to return\n                .filter(future -&gt; future.join() != null)\n                .findFirst();\n\n        System.out.println(resultFuture.get().get());\n\n    }\n\n\n    private static String hitEndpoint(String id, CountDownLatch latch) {\n\n        try {\n            if (latch.getCount()&gt;0 &amp;&amp; !Thread.currentThread().isInterrupted()){\n                //api call\n                Thread.sleep(RandomUtils.nextLong(100,900));//Generally a http call is sensitive to interrupt\n                latch.countDown();\n                return &quot;Api Response&quot;+id;\n            }\n\n        } catch (InterruptedException e) {\n            throw new RuntimeException(e);\n        }\n        Thread.currentThread().interrupt();//Its response is not required\n        return null;\n    }\n   \n</code></pre>\n"}],"owner":{"account_id":484123,"reputation":1933,"user_id":899611,"accept_rate":54,"display_name":"luckysing_noobster"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1689856355,"creation_date":1689845343,"question_id":76728486,"body_markdown":"I want to run couple of tasks in parallel via `ExecutorService`. Each of these task return a string from the same endpoint but with a different result! For example if I execute 4 of these tasks in parallel I can get apple, mangoes, oranges, or a API failure. I am trying to figure out how I can run these tasks in parallel and be able to get the result for the first successful task execution and then I would like to cancel the rest of the tasks in the executor thread pool\r\n\r\n\r\n```java\r\n\r\n    List&lt;Callable&lt;String&gt;&gt; tasks = new ArrayList&lt;&gt;();\r\n    for (String id:  ids){\r\n      tasks.add(() -&gt; hitEndpoint(id));\r\n    }\r\n      List&lt;Future&lt;String&gt;&gt; stringFutureResults = null;\r\n      stringFutureResults= executor.invokeAll(tasks); //execute all in parallel \r\n\r\n      for (Future&lt;String&gt; strFuture : stringFutureResults) {\r\n        String st1 = strFuture.get();\r\n        if (st1 == &quot;apple&quot;) {\r\n         // stop execution of all the other tasks or is it too late at this point and all the tasks would have already been executed with the result and status \r\n        }\r\n    }```    \r\n","title":"ExecutorService listen to first task to finish in parallel and cancel the rest","body":"<p>I want to run couple of tasks in parallel via <code>ExecutorService</code>. Each of these task return a string from the same endpoint but with a different result! For example if I execute 4 of these tasks in parallel I can get apple, mangoes, oranges, or a API failure. I am trying to figure out how I can run these tasks in parallel and be able to get the result for the first successful task execution and then I would like to cancel the rest of the tasks in the executor thread pool</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n    List&lt;Callable&lt;String&gt;&gt; tasks = new ArrayList&lt;&gt;();\n    for (String id:  ids){\n      tasks.add(() -&gt; hitEndpoint(id));\n    }\n      List&lt;Future&lt;String&gt;&gt; stringFutureResults = null;\n      stringFutureResults= executor.invokeAll(tasks); //execute all in parallel \n\n      for (Future&lt;String&gt; strFuture : stringFutureResults) {\n        String st1 = strFuture.get();\n        if (st1 == &quot;apple&quot;) {\n         // stop execution of all the other tasks or is it too late at this point and all the tasks would have already been executed with the result and status \n        }\n    }```    \n</code></pre>\n"},{"tags":["java","keycloak","quarkus"],"comments":[{"owner":{"account_id":1152519,"reputation":733,"user_id":1133928,"display_name":"Sergey Beryozkin"},"score":0,"creation_date":1689764604,"post_id":76715602,"comment_id":135258608,"body_markdown":"Is this error reported in `initKeycloak` or when creating a new user ?","body":"Is this error reported in <code>initKeycloak</code> or when creating a new user ?"}],"answers":[{"comments":[{"owner":{"account_id":1152519,"reputation":733,"user_id":1133928,"display_name":"Sergey Beryozkin"},"score":0,"creation_date":1689929576,"post_id":76729892,"comment_id":135285627,"body_markdown":"Great. Looks like there may have been a mix up of reactive and classic dependencies, if this problem was seen with RESTEasy Classic and non reactive Keycload Admin Client, then please open a Quarkus issue for us to investigate, thanks","body":"Great. Looks like there may have been a mix up of reactive and classic dependencies, if this problem was seen with RESTEasy Classic and non reactive Keycload Admin Client, then please open a Quarkus issue for us to investigate, thanks"}],"tags":[],"owner":{"account_id":29043910,"reputation":47,"user_id":22248180,"display_name":"Waldo"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689856234,"creation_date":1689856234,"answer_id":76729892,"question_id":76715602,"body_markdown":"I found the problem.\r\nI was running on RESTEasy Classic but it seems you need RESTEasy Reactive.\r\nAfter changing to it, it worked with no problem.","title":"Keycloak admin client authHeader is null","body":"<p>I found the problem.\nI was running on RESTEasy Classic but it seems you need RESTEasy Reactive.\nAfter changing to it, it worked with no problem.</p>\n"}],"owner":{"account_id":29043910,"reputation":47,"user_id":22248180,"display_name":"Waldo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":165,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1689856234,"creation_date":1689704475,"question_id":76715602,"body_markdown":"I&#39;m trying to create a new User in Keycloak with quarkus-keycloak-admin-client but it always says:\r\n Cannot invoke &quot;String.startsWith(String)&quot; because &quot;authHeader&quot; is null\r\n\r\n\r\n```\r\n\r\nimport jakarta.annotation.PostConstruct;\r\nimport jakarta.enterprise.context.ApplicationScoped;\r\nimport org.keycloak.OAuth2Constants;\r\nimport org.keycloak.admin.client.Keycloak;\r\nimport org.keycloak.admin.client.KeycloakBuilder;\r\nimport org.keycloak.representations.idm.RoleRepresentation;\r\nimport org.jboss.logging.Logger;\r\n\r\nimport java.util.List;\r\n\r\n@ApplicationScoped\r\npublic class AuthenticationCrontrol {\r\n    private static final Logger LOG = Logger.getLogger(AuthenticationCrontrol.class);\r\n\r\n    Keycloak keycloak;\r\n    public AuthenticationCrontrol() {\r\n    }\r\n    @PostConstruct\r\n    public void initKeycloak() {\r\n        keycloak = KeycloakBuilder.builder()\r\n                .serverUrl(&quot;http://localhost:8081/&quot;)\r\n                .realm(&quot;master&quot;)\r\n                .clientId(&quot;admin-cli&quot;)\r\n                .username(&quot;admin&quot;)\r\n                .password(&quot;admin&quot;)\r\n                .grantType(OAuth2Constants.PASSWORD)\r\n                .build();\r\n        LOG.info(&quot;Keycloak initialized&quot;);\r\n    }\r\n\r\n    public List&lt;RoleRepresentation&gt; getRoles() {\r\n        return keycloak.realm(&quot;master&quot;).roles().list();\r\n    }\r\n}\r\n```\r\nthis is my class\r\n\r\n\r\n```\r\n# OIDC Configuration\r\n%test.quarkus.keycloak.devservices.enabled=true\r\n%dev.quarkus.keycloak.devservices.enabled=true\r\n%prod.quarkus.keycloak.devservices.enabled=false\r\n\r\n# Keycloak Port\r\nquarkus.keycloak.devservices.port=8081\r\n%test.quarkus.keycloak.devservices.port=8181\r\n%prod.quarkus.oidc.auth-server-url=https://localhost:8543/realms/quarkus\r\nquarkus.oidc.client-id=dolmetscher\r\nquarkus.keycloak.devservices.grant.type=client\r\nquarkus.oidc.application-type=hybrid\r\nquarkus.oidc.credentials.secret=secret\r\nquarkus.oidc.tls.verification=none\r\n```\r\n\r\nthis is my application.properties\r\n\r\nWhat am i missing??\r\n","title":"Keycloak admin client authHeader is null","body":"<p>I'm trying to create a new User in Keycloak with quarkus-keycloak-admin-client but it always says:\nCannot invoke &quot;String.startsWith(String)&quot; because &quot;authHeader&quot; is null</p>\n<pre><code>\nimport jakarta.annotation.PostConstruct;\nimport jakarta.enterprise.context.ApplicationScoped;\nimport org.keycloak.OAuth2Constants;\nimport org.keycloak.admin.client.Keycloak;\nimport org.keycloak.admin.client.KeycloakBuilder;\nimport org.keycloak.representations.idm.RoleRepresentation;\nimport org.jboss.logging.Logger;\n\nimport java.util.List;\n\n@ApplicationScoped\npublic class AuthenticationCrontrol {\n    private static final Logger LOG = Logger.getLogger(AuthenticationCrontrol.class);\n\n    Keycloak keycloak;\n    public AuthenticationCrontrol() {\n    }\n    @PostConstruct\n    public void initKeycloak() {\n        keycloak = KeycloakBuilder.builder()\n                .serverUrl(&quot;http://localhost:8081/&quot;)\n                .realm(&quot;master&quot;)\n                .clientId(&quot;admin-cli&quot;)\n                .username(&quot;admin&quot;)\n                .password(&quot;admin&quot;)\n                .grantType(OAuth2Constants.PASSWORD)\n                .build();\n        LOG.info(&quot;Keycloak initialized&quot;);\n    }\n\n    public List&lt;RoleRepresentation&gt; getRoles() {\n        return keycloak.realm(&quot;master&quot;).roles().list();\n    }\n}\n</code></pre>\n<p>this is my class</p>\n<pre><code># OIDC Configuration\n%test.quarkus.keycloak.devservices.enabled=true\n%dev.quarkus.keycloak.devservices.enabled=true\n%prod.quarkus.keycloak.devservices.enabled=false\n\n# Keycloak Port\nquarkus.keycloak.devservices.port=8081\n%test.quarkus.keycloak.devservices.port=8181\n%prod.quarkus.oidc.auth-server-url=https://localhost:8543/realms/quarkus\nquarkus.oidc.client-id=dolmetscher\nquarkus.keycloak.devservices.grant.type=client\nquarkus.oidc.application-type=hybrid\nquarkus.oidc.credentials.secret=secret\nquarkus.oidc.tls.verification=none\n</code></pre>\n<p>this is my application.properties</p>\n<p>What am i missing??</p>\n"},{"tags":["java","spring","rest","mockito","spring-test-mvc"],"comments":[{"owner":{"account_id":152128,"reputation":9392,"user_id":366447,"accept_rate":80,"display_name":"AHungerArtist"},"score":1,"creation_date":1513022248,"post_id":47759833,"comment_id":82482146,"body_markdown":"I don&#39;t think the param() method is equivalent to putting a path variable like the API has it, but I&#39;m not sure.In other words, I think the call the test is doing is more like /api/foo?id=11 instead of /api/foo/11. This is just a guess, though.","body":"I don&#39;t think the param() method is equivalent to putting a path variable like the API has it, but I&#39;m not sure.In other words, I think the call the test is doing is more like /api/foo?id=11 instead of /api/foo/11. This is just a guess, though."},{"owner":{"account_id":8622016,"reputation":4801,"user_id":6456586,"accept_rate":63,"display_name":"Denis Stephanov"},"score":0,"creation_date":1513022654,"post_id":47759833,"comment_id":82482335,"body_markdown":"@AHungerArtist I&#39;ve changed it but same error.","body":"@AHungerArtist I&#39;ve changed it but same error."}],"answers":[{"tags":[],"owner":{"account_id":11175092,"reputation":45706,"user_id":8200937,"display_name":"glytching"},"comment_count":0,"down_vote_count":0,"up_vote_count":15,"is_accepted":true,"score":15,"last_activity_date":1513026863,"creation_date":1513026863,"answer_id":47761530,"question_id":47759833,"body_markdown":"Your target URI is: `/api/foo/11` based on this root: `/api/foo` and this path variable: `/{id}`.\r\n\r\nWhen using `MockMvc` you set path variables (aka URI variables) like so:\r\n\r\n    delete(uri, uriVars)\r\n\r\nMore details [in the Javadocs](https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/test/web/servlet/request/MockMvcRequestBuilders.html#delete-java.lang.String-java.lang.Object...-).\r\n\r\nSo, your test should read:\r\n\r\n    @Test\r\n    public void testFooDelete() throws Exception {\r\n        this.mockMvc.perform(MockMvcRequestBuilders\r\n                .delete(&quot;/api/foo/{id}&quot;, &quot;11&quot;)\r\n                .contentType(MediaType.APPLICATION_JSON))\r\n                .accept(MediaType.APPLICATION_JSON))\r\n                .andExpect(status().isOk());\r\n    }\r\n\r\nOr alternatively:\r\n\r\n    @Test\r\n    public void testFooDelete() throws Exception {\r\n        this.mockMvc.perform(MockMvcRequestBuilders\r\n                .delete(&quot;/api/foo/11&quot;)\r\n                .contentType(MediaType.APPLICATION_JSON))\r\n                .accept(MediaType.APPLICATION_JSON))\r\n                .andExpect(status().isOk());\r\n    }\r\n\r\n","title":"Spring MockMvc - How to test delete request of REST controller?","body":"<p>Your target URI is: <code>/api/foo/11</code> based on this root: <code>/api/foo</code> and this path variable: <code>/{id}</code>.</p>\n\n<p>When using <code>MockMvc</code> you set path variables (aka URI variables) like so:</p>\n\n<pre><code>delete(uri, uriVars)\n</code></pre>\n\n<p>More details <a href=\"https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/test/web/servlet/request/MockMvcRequestBuilders.html#delete-java.lang.String-java.lang.Object...-\" rel=\"noreferrer\">in the Javadocs</a>.</p>\n\n<p>So, your test should read:</p>\n\n<pre><code>@Test\npublic void testFooDelete() throws Exception {\n    this.mockMvc.perform(MockMvcRequestBuilders\n            .delete(\"/api/foo/{id}\", \"11\")\n            .contentType(MediaType.APPLICATION_JSON))\n            .accept(MediaType.APPLICATION_JSON))\n            .andExpect(status().isOk());\n}\n</code></pre>\n\n<p>Or alternatively:</p>\n\n<pre><code>@Test\npublic void testFooDelete() throws Exception {\n    this.mockMvc.perform(MockMvcRequestBuilders\n            .delete(\"/api/foo/11\")\n            .contentType(MediaType.APPLICATION_JSON))\n            .accept(MediaType.APPLICATION_JSON))\n            .andExpect(status().isOk());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18899515,"reputation":99,"user_id":13787867,"display_name":"bednarb"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689855378,"creation_date":1689855378,"answer_id":76729766,"question_id":47759833,"body_markdown":"The previous answer is for sure correct :) But if you want to test the 204 response code:\r\n\r\n    @Test\r\n    public void testFooDelete() throws Exception {\r\n        ...\r\n        .andExpect(status().isNoContent());\r\n    }\r\n\r\nyou can explicitly say what should be returned by your delete method by using **@ResponseStatus**:\r\n\r\n    @RequestMapping(path=&quot;/{id}&quot;, method = RequestMethod.DELETE)\r\n    @ResponseStatus(value = HttpStatus.NO_CONTENT)\r\n    public void delete(@PathVariable Long id) {\r\n        fooService.delete(id);\r\n    } ","title":"Spring MockMvc - How to test delete request of REST controller?","body":"<p>The previous answer is for sure correct :) But if you want to test the 204 response code:</p>\n<pre><code>@Test\npublic void testFooDelete() throws Exception {\n    ...\n    .andExpect(status().isNoContent());\n}\n</code></pre>\n<p>you can explicitly say what should be returned by your delete method by using <strong>@ResponseStatus</strong>:</p>\n<pre><code>@RequestMapping(path=&quot;/{id}&quot;, method = RequestMethod.DELETE)\n@ResponseStatus(value = HttpStatus.NO_CONTENT)\npublic void delete(@PathVariable Long id) {\n    fooService.delete(id);\n} \n</code></pre>\n"}],"owner":{"account_id":8622016,"reputation":4801,"user_id":6456586,"accept_rate":63,"display_name":"Denis Stephanov"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":29981,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":47761530,"answer_count":2,"score":10,"last_activity_date":1689855378,"creation_date":1513019811,"question_id":47759833,"body_markdown":"I need to test my controller methods including a delete method. Here is partial controller code:\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/api/foo&quot;)\r\n    public class FooController {\r\n    \r\n        @Autowired\r\n        private FooService fooService;\r\n    \r\n        // other methods which works fine in tests\r\n    \r\n        @RequestMapping(path=&quot;/{id}&quot;, method = RequestMethod.DELETE)\r\n        public void delete(@PathVariable Long id) {\r\n            fooService.delete(id);\r\n        }    \r\n    }\r\n\r\nAnd here is my test:\r\n\r\n    @InjectMocks\r\n    private FooController fooController;\r\n\r\n    @Before\r\n    public void setUp() {\r\n        this.mockMvc = MockMvcBuilders.standaloneSetup(fooController)\r\n    .setControllerAdvice(new ExceptionHandler()).alwaysExpect(MockMvcResultMatchers.content().contentType(&quot;application/json;charset=UTF-8&quot;)).build();\r\n    }\r\n\r\n    @Test\r\n    public void testFooDelete() throws Exception {\r\n        this.mockMvc.perform(MockMvcRequestBuilders\r\n                .delete(&quot;/api/foo&quot;)\r\n                .param(&quot;id&quot;, &quot;11&quot;)\r\n                .contentType(MediaType.APPLICATION_JSON))\r\n                .accept(MediaType.APPLICATION_JSON))\r\n                .andExpect(status().isOk());\r\n    }\r\n\r\nTest finish with failure because incorrect status code:\r\n\r\n&gt; java.lang.AssertionError: Status \r\n&gt; Expected :200 Actual   :400\r\n\r\nIn console log I also found this:\r\n\r\n    2017-12-11 20:11:01 [main] DEBUG o.s.t.w.s.TestDispatcherServlet - DispatcherServlet with name &#39;&#39; processing DELETE request for [/api/foo]\r\n    2017-12-11 20:11:01 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /api/foo\r\n    2017-12-11 20:11:01 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolving exception from handler [null]: org.springframework.web.HttpRequestMethodNotSupportedException: Request method &#39;DELETE&#39; not supported\r\n    2017-12-11 20:11:01 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Invoking @ExceptionHandler method: public org.springframework.http.ResponseEntity&lt;java.util.Map&lt;java.lang.String, java.lang.Object&gt;&gt; cz.ita.javaee.web.controller.error.ExceptionHandler.handleException(java.lang.Exception)\r\n    2017-12-11 20:11:01 [main] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Written [{stackTrace=org.springframework.web.HttpRequestMethodNotSupportedException: Request method &#39;DELETE&#39; not supported\r\n\r\nCan you tell me how to fix it? Thanks.","title":"Spring MockMvc - How to test delete request of REST controller?","body":"<p>I need to test my controller methods including a delete method. Here is partial controller code:</p>\n\n<pre><code>@RestController\n@RequestMapping(\"/api/foo\")\npublic class FooController {\n\n    @Autowired\n    private FooService fooService;\n\n    // other methods which works fine in tests\n\n    @RequestMapping(path=\"/{id}\", method = RequestMethod.DELETE)\n    public void delete(@PathVariable Long id) {\n        fooService.delete(id);\n    }    \n}\n</code></pre>\n\n<p>And here is my test:</p>\n\n<pre><code>@InjectMocks\nprivate FooController fooController;\n\n@Before\npublic void setUp() {\n    this.mockMvc = MockMvcBuilders.standaloneSetup(fooController)\n.setControllerAdvice(new ExceptionHandler()).alwaysExpect(MockMvcResultMatchers.content().contentType(\"application/json;charset=UTF-8\")).build();\n}\n\n@Test\npublic void testFooDelete() throws Exception {\n    this.mockMvc.perform(MockMvcRequestBuilders\n            .delete(\"/api/foo\")\n            .param(\"id\", \"11\")\n            .contentType(MediaType.APPLICATION_JSON))\n            .accept(MediaType.APPLICATION_JSON))\n            .andExpect(status().isOk());\n}\n</code></pre>\n\n<p>Test finish with failure because incorrect status code:</p>\n\n<blockquote>\n  <p>java.lang.AssertionError: Status \n  Expected :200 Actual   :400</p>\n</blockquote>\n\n<p>In console log I also found this:</p>\n\n<pre><code>2017-12-11 20:11:01 [main] DEBUG o.s.t.w.s.TestDispatcherServlet - DispatcherServlet with name '' processing DELETE request for [/api/foo]\n2017-12-11 20:11:01 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /api/foo\n2017-12-11 20:11:01 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolving exception from handler [null]: org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'DELETE' not supported\n2017-12-11 20:11:01 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Invoking @ExceptionHandler method: public org.springframework.http.ResponseEntity&lt;java.util.Map&lt;java.lang.String, java.lang.Object&gt;&gt; cz.ita.javaee.web.controller.error.ExceptionHandler.handleException(java.lang.Exception)\n2017-12-11 20:11:01 [main] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Written [{stackTrace=org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'DELETE' not supported\n</code></pre>\n\n<p>Can you tell me how to fix it? Thanks.</p>\n"},{"tags":["java","android-studio"],"comments":[{"owner":{"account_id":22580507,"reputation":821,"user_id":16765223,"display_name":"M DEV"},"score":0,"creation_date":1689854539,"post_id":76727530,"comment_id":135273890,"body_markdown":"Can you share your XML code also in the above code? So that I can figure out that code","body":"Can you share your XML code also in the above code? So that I can figure out that code"}],"answers":[{"comments":[{"owner":{"account_id":23683022,"reputation":1,"user_id":17708325,"display_name":"Kenne Dany"},"score":0,"creation_date":1690013591,"post_id":76729678,"comment_id":135296144,"body_markdown":"No it doesn&#39;t works, the app closes up as i click on icon after execution","body":"No it doesn&#39;t works, the app closes up as i click on icon after execution"},{"owner":{"account_id":22580507,"reputation":821,"user_id":16765223,"display_name":"M DEV"},"score":0,"creation_date":1690014993,"post_id":76729678,"comment_id":135296243,"body_markdown":"@KenneDany Add XML code also. I can&#39;t figure out how you designed your tab layout. Add XML code so that I can understand your design part","body":"@KenneDany Add XML code also. I can&#39;t figure out how you designed your tab layout. Add XML code so that I can understand your design part"}],"tags":[],"owner":{"account_id":22580507,"reputation":821,"user_id":16765223,"display_name":"M DEV"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689854796,"creation_date":1689854796,"answer_id":76729678,"question_id":76727530,"body_markdown":"I think you added ImageView inside your toolbar. Let&#39;s try the below code.\r\n```\r\nprofileButton = toolbar.findViewById(R.id.profileButton); // call findViewById with toolbar.\r\n\r\nprofileButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(getApplicationContext(), user_login.class);\r\n                startActivity(intent);\r\n                finish();\r\n            }\r\n        });\r\n\r\n```\r\nLet me know if not resolved.\r\n","title":"to open another activity by clicking on an imageview in toolbar","body":"<p>I think you added ImageView inside your toolbar. Let's try the below code.</p>\n<pre><code>profileButton = toolbar.findViewById(R.id.profileButton); // call findViewById with toolbar.\n\nprofileButton.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                Intent intent = new Intent(getApplicationContext(), user_login.class);\n                startActivity(intent);\n                finish();\n            }\n        });\n\n</code></pre>\n<p>Let me know if not resolved.</p>\n"}],"owner":{"account_id":23683022,"reputation":1,"user_id":17708325,"display_name":"Kenne Dany"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689854796,"creation_date":1689837651,"question_id":76727530,"body_markdown":"i put a setOnClickListener on an imageview that should normally open another activity but yet when i click on the icon of the imageview the app itself rather closeup. i dont no what causes that.please help\r\n\r\ni put a `setOnClickListener` on the imageview that permit to open the next activtiy the code is the section in bold\r\n\r\n```\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    ImageView lang, share, profileButton;\r\n    TextView title;\r\n    private EditText depart, arriver;\r\n    private Button verifyButton;\r\n    BottomNavigationView bottomNavigationView;\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        Toolbar toolbar = findViewById(R.id.toolbar);\r\n        setSupportActionBar(toolbar);\r\n\r\n        title = findViewById(R.id.title1);\r\n        title.setText(&quot;EasyBooking&quot;);\r\n        lang = findViewById(R.id.lang);\r\n        share = findViewById(R.id.shareButton);\r\n\r\n      ** this.profileButton = (ImageView) findViewById(R.id.profileButton);\r\n\r\n        profileButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(getApplicationContext(), user_login.class);\r\n                startActivity(intent);\r\n                finish();\r\n            }\r\n        });**\r\n\r\n\r\n        depart = findViewById(R.id.departurepoint);\r\n        arriver = findViewById(R.id.arrivingpoint);\r\n        verifyButton = findViewById(R.id.search);\r\n\r\n        verifyButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                String departure = depart.getText().toString();\r\n                String arrival = arriver.getText().toString();\r\n\r\n                // Appeler une m&#233;thode pour ouvrir l&#39;activit&#233; correspondante avec les noms de d&#233;part et d&#39;arriv&#233;e\r\n                openActivity(departure, arrival);\r\n            }\r\n        });\r\n\r\n        //autocomplete texteview of departurepoint\r\n        String[] Towns = getResources().getStringArray(R.array.TownDeparture);\r\n\r\n        AutoCompleteTextView editText = findViewById(R.id.departurepoint);\r\n        ArrayAdapter&lt;String&gt; adapter = new ArrayAdapter&lt;&gt;(this, android.R.layout.simple_list_item_1,\r\n                Towns);\r\n        editText.setAdapter(adapter);\r\n\r\n        //autocomplete texteview arrivingpoints\r\n        String[] Town = getResources().getStringArray(R.array.ArrivingTowns);\r\n        AutoCompleteTextView editTexts = findViewById(R.id.arrivingpoint);\r\n        ArrayAdapter&lt;String&gt; adapter1 = new ArrayAdapter&lt;&gt;(this, android.R.layout.simple_list_item_1,Towns);\r\n        editTexts.setAdapter(adapter1);\r\n\r\n        bottomNavigationView = findViewById(R.id.botton_nav_bar1);\r\n        bottomNavigationView.setSelectedItemId(R.id.Idhome);\r\n        bottomNavigationView.setOnItemSelectedListener(new NavigationBarView.OnItemSelectedListener() {\r\n            @Override\r\n            public boolean onNavigationItemSelected(@NonNull MenuItem item) {\r\n                int itemId = item.getItemId();\r\n\r\n                if (itemId == R.id.Idhome){\r\n                    return true;\r\n                } else if (itemId == R.id.Idagence) {\r\n                    startActivity(new Intent(getApplicationContext(), Agence.class));\r\n                    overridePendingTransition(0, 0);\r\n                    return true;\r\n                } else if (itemId == R.id.Idticket) {\r\n                    startActivity(new Intent(getApplicationContext(), Ticket.class));\r\n                    overridePendingTransition(0, 0);\r\n                    return true;\r\n                }else if (itemId == R.id.Idsetting) {\r\n                    startActivity(new Intent(getApplicationContext(), Setting.class));\r\n                    overridePendingTransition(0, 0);\r\n                    return true;\r\n                }\r\n\r\n                return false;\r\n            }\r\n        });\r\n\r\n// Ajouter un OnClickListener au TextView\r\n        share.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                // Cr&#233;er un intent avec l&#39;action ACTION_SEND\r\n                Intent intent = new Intent(Intent.ACTION_SEND);\r\n\r\n                // D&#233;finir le type de contenu &#224; partager (texte)\r\n                intent.setType(&quot;text/plain&quot;);\r\n\r\n                // Ajouter le texte de partage &#224; l&#39;intent\r\n                intent.putExtra(Intent.EXTRA_TEXT, &quot;Lien de partage de l&#39;application&quot;);\r\n\r\n                // D&#233;marrer l&#39;activit&#233; de partage\r\n                startActivity(Intent.createChooser(intent, &quot;Partager via&quot;));\r\n            }\r\n        });\r\n\r\n\r\n       /* Ajouter un OnClickListener au TextView\r\n        lang.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                // Cr&#233;er un objet Locale pour la langue anglaise\r\n                Locale locale = new Locale(&quot;en&quot;);\r\n\r\n                // Mettre &#224; jour la configuration de localisation de l&#39;application\r\n                Configuration configuration = new Configuration(getResources().getConfiguration());\r\n                configuration.setLocale(locale);\r\n                getResources().updateConfiguration(configuration, getResources().getDisplayMetrics());\r\n\r\n                // Red&#233;marrer l&#39;activit&#233; pour appliquer les changements de langue\r\n                recreate();\r\n            }\r\n        });*/\r\n\r\n    }\r\n\r\n    private void openActivity(String departure, String arrival) {\r\n        // Cr&#233;ez une intention pour ouvrir l&#39;activit&#233; correspondante\r\n        Intent intent = new Intent(this, Douala__Bafoussam.class);\r\n        intent.putExtra(&quot;departure&quot;, departure);\r\n        intent.putExtra(&quot;arrival&quot;, arrival);\r\n        startActivity(intent);\r\n    }\r\n}\r\n```\r\n","title":"to open another activity by clicking on an imageview in toolbar","body":"<p>i put a setOnClickListener on an imageview that should normally open another activity but yet when i click on the icon of the imageview the app itself rather closeup. i dont no what causes that.please help</p>\n<p>i put a <code>setOnClickListener</code> on the imageview that permit to open the next activtiy the code is the section in bold</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n    ImageView lang, share, profileButton;\n    TextView title;\n    private EditText depart, arriver;\n    private Button verifyButton;\n    BottomNavigationView bottomNavigationView;\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        Toolbar toolbar = findViewById(R.id.toolbar);\n        setSupportActionBar(toolbar);\n\n        title = findViewById(R.id.title1);\n        title.setText(&quot;EasyBooking&quot;);\n        lang = findViewById(R.id.lang);\n        share = findViewById(R.id.shareButton);\n\n      ** this.profileButton = (ImageView) findViewById(R.id.profileButton);\n\n        profileButton.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                Intent intent = new Intent(getApplicationContext(), user_login.class);\n                startActivity(intent);\n                finish();\n            }\n        });**\n\n\n        depart = findViewById(R.id.departurepoint);\n        arriver = findViewById(R.id.arrivingpoint);\n        verifyButton = findViewById(R.id.search);\n\n        verifyButton.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                String departure = depart.getText().toString();\n                String arrival = arriver.getText().toString();\n\n                // Appeler une méthode pour ouvrir l'activité correspondante avec les noms de départ et d'arrivée\n                openActivity(departure, arrival);\n            }\n        });\n\n        //autocomplete texteview of departurepoint\n        String[] Towns = getResources().getStringArray(R.array.TownDeparture);\n\n        AutoCompleteTextView editText = findViewById(R.id.departurepoint);\n        ArrayAdapter&lt;String&gt; adapter = new ArrayAdapter&lt;&gt;(this, android.R.layout.simple_list_item_1,\n                Towns);\n        editText.setAdapter(adapter);\n\n        //autocomplete texteview arrivingpoints\n        String[] Town = getResources().getStringArray(R.array.ArrivingTowns);\n        AutoCompleteTextView editTexts = findViewById(R.id.arrivingpoint);\n        ArrayAdapter&lt;String&gt; adapter1 = new ArrayAdapter&lt;&gt;(this, android.R.layout.simple_list_item_1,Towns);\n        editTexts.setAdapter(adapter1);\n\n        bottomNavigationView = findViewById(R.id.botton_nav_bar1);\n        bottomNavigationView.setSelectedItemId(R.id.Idhome);\n        bottomNavigationView.setOnItemSelectedListener(new NavigationBarView.OnItemSelectedListener() {\n            @Override\n            public boolean onNavigationItemSelected(@NonNull MenuItem item) {\n                int itemId = item.getItemId();\n\n                if (itemId == R.id.Idhome){\n                    return true;\n                } else if (itemId == R.id.Idagence) {\n                    startActivity(new Intent(getApplicationContext(), Agence.class));\n                    overridePendingTransition(0, 0);\n                    return true;\n                } else if (itemId == R.id.Idticket) {\n                    startActivity(new Intent(getApplicationContext(), Ticket.class));\n                    overridePendingTransition(0, 0);\n                    return true;\n                }else if (itemId == R.id.Idsetting) {\n                    startActivity(new Intent(getApplicationContext(), Setting.class));\n                    overridePendingTransition(0, 0);\n                    return true;\n                }\n\n                return false;\n            }\n        });\n\n// Ajouter un OnClickListener au TextView\n        share.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                // Créer un intent avec l'action ACTION_SEND\n                Intent intent = new Intent(Intent.ACTION_SEND);\n\n                // Définir le type de contenu à partager (texte)\n                intent.setType(&quot;text/plain&quot;);\n\n                // Ajouter le texte de partage à l'intent\n                intent.putExtra(Intent.EXTRA_TEXT, &quot;Lien de partage de l'application&quot;);\n\n                // Démarrer l'activité de partage\n                startActivity(Intent.createChooser(intent, &quot;Partager via&quot;));\n            }\n        });\n\n\n       /* Ajouter un OnClickListener au TextView\n        lang.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                // Créer un objet Locale pour la langue anglaise\n                Locale locale = new Locale(&quot;en&quot;);\n\n                // Mettre à jour la configuration de localisation de l'application\n                Configuration configuration = new Configuration(getResources().getConfiguration());\n                configuration.setLocale(locale);\n                getResources().updateConfiguration(configuration, getResources().getDisplayMetrics());\n\n                // Redémarrer l'activité pour appliquer les changements de langue\n                recreate();\n            }\n        });*/\n\n    }\n\n    private void openActivity(String departure, String arrival) {\n        // Créez une intention pour ouvrir l'activité correspondante\n        Intent intent = new Intent(this, Douala__Bafoussam.class);\n        intent.putExtra(&quot;departure&quot;, departure);\n        intent.putExtra(&quot;arrival&quot;, arrival);\n        startActivity(intent);\n    }\n}\n</code></pre>\n"},{"tags":["java","ssl","okhttp"],"answers":[{"tags":[],"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689854668,"creation_date":1689854415,"answer_id":76729640,"question_id":73128409,"body_markdown":"It happends becouse you are talking to an HTTP server, not an HTTPS server. You should try:\r\n\r\n - Check the port number\r\n - Modify to use one HTTP endpoint\r\n - Proxy the request as HTTPS\r\n \r\nCheck this out:\r\n - [Unrecognized SSL message, plaintext connection? Exception][1]\r\n - [Http request has been block from https][2]\r\n\r\n  [1]: https://stackoverflow.com/questions/6532273/unrecognized-ssl-message-plaintext-connection-exception\r\n  [2]: https://stackoverflow.com/questions/32676041/http-request-has-been-block-from-https","title":"okhttp3 error Unsupported or unrecognized SSL message","body":"<p>It happends becouse you are talking to an HTTP server, not an HTTPS server. You should try:</p>\n<ul>\n<li>Check the port number</li>\n<li>Modify to use one HTTP endpoint</li>\n<li>Proxy the request as HTTPS</li>\n</ul>\n<p>Check this out:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/6532273/unrecognized-ssl-message-plaintext-connection-exception\">Unrecognized SSL message, plaintext connection? Exception</a></li>\n<li><a href=\"https://stackoverflow.com/questions/32676041/http-request-has-been-block-from-https\">Http request has been block from https</a></li>\n</ul>\n"}],"owner":{"account_id":1551684,"reputation":1024,"user_id":1443928,"accept_rate":93,"display_name":"Hard Worker"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":434,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1689854668,"creation_date":1658861567,"question_id":73128409,"body_markdown":"I Working a Java API client class that makes a call to a server\r\nthis calls working as expected when running locally - but when I run them in Kubernetes they failed with the below error\r\n\r\nDo I need to specify a JVM options for working with SSL?\r\nI&#39;m running a main class no spring is used.\r\n\r\n**Error:**\r\n```\r\nCaused by: javax.net.ssl.SSLException: Unsupported or unrecognized SSL message\r\n    at java.base/sun.security.ssl.SSLSocketInputRecord.handleUnknownRecord(SSLSocketInputRecord.java:451)\r\n    at java.base/sun.security.ssl.SSLSocketInputRecord.decode(SSLSocketInputRecord.java:175)\r\n    at java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:110)\r\n    at java.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1493)\r\n    at java.base/sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1399)\r\n    at java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:446)\r\n    at java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:417)\r\n    at okhttp3.internal.connection.RealConnection.connectTls(RealConnection.kt:379)\r\n    at okhttp3.internal.connection.RealConnection.establishProtocol(RealConnection.kt:337)\r\n    at okhttp3.internal.connection.RealConnection.connect(RealConnection.kt:209)\r\n    at okhttp3.internal.connection.ExchangeFinder.findConnection(ExchangeFinder.kt:226)\r\n    at okhttp3.internal.connection.ExchangeFinder.findHealthyConnection(ExchangeFinder.kt:106)\r\n    at okhttp3.internal.connection.ExchangeFinder.find(ExchangeFinder.kt:74)\r\n    at okhttp3.internal.connection.RealCall.initExchange$okhttp(RealCall.kt:255)\r\n    at okhttp3.internal.connection.ConnectInterceptor.intercept(ConnectInterceptor.kt:32)\r\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\r\n    at okhttp3.internal.cache.CacheInterceptor.intercept(CacheInterceptor.kt:95)\r\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\r\n    at okhttp3.internal.http.BridgeInterceptor.intercept(BridgeInterceptor.kt:83)\r\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\r\n    at okhttp3.internal.http.RetryAndFollowUpInterceptor.intercept(RetryAndFollowUpInterceptor.kt:76)\r\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\r\n```","title":"okhttp3 error Unsupported or unrecognized SSL message","body":"<p>I Working a Java API client class that makes a call to a server\nthis calls working as expected when running locally - but when I run them in Kubernetes they failed with the below error</p>\n<p>Do I need to specify a JVM options for working with SSL?\nI'm running a main class no spring is used.</p>\n<p><strong>Error:</strong></p>\n<pre><code>Caused by: javax.net.ssl.SSLException: Unsupported or unrecognized SSL message\n    at java.base/sun.security.ssl.SSLSocketInputRecord.handleUnknownRecord(SSLSocketInputRecord.java:451)\n    at java.base/sun.security.ssl.SSLSocketInputRecord.decode(SSLSocketInputRecord.java:175)\n    at java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:110)\n    at java.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1493)\n    at java.base/sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1399)\n    at java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:446)\n    at java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:417)\n    at okhttp3.internal.connection.RealConnection.connectTls(RealConnection.kt:379)\n    at okhttp3.internal.connection.RealConnection.establishProtocol(RealConnection.kt:337)\n    at okhttp3.internal.connection.RealConnection.connect(RealConnection.kt:209)\n    at okhttp3.internal.connection.ExchangeFinder.findConnection(ExchangeFinder.kt:226)\n    at okhttp3.internal.connection.ExchangeFinder.findHealthyConnection(ExchangeFinder.kt:106)\n    at okhttp3.internal.connection.ExchangeFinder.find(ExchangeFinder.kt:74)\n    at okhttp3.internal.connection.RealCall.initExchange$okhttp(RealCall.kt:255)\n    at okhttp3.internal.connection.ConnectInterceptor.intercept(ConnectInterceptor.kt:32)\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\n    at okhttp3.internal.cache.CacheInterceptor.intercept(CacheInterceptor.kt:95)\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\n    at okhttp3.internal.http.BridgeInterceptor.intercept(BridgeInterceptor.kt:83)\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\n    at okhttp3.internal.http.RetryAndFollowUpInterceptor.intercept(RetryAndFollowUpInterceptor.kt:76)\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\n</code></pre>\n"},{"tags":["java","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":17348847,"reputation":79,"user_id":12567771,"display_name":"Shekhar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689852060,"creation_date":1689852060,"answer_id":76729331,"question_id":76729155,"body_markdown":"You can create a filter and write logic to get IP from request and filter it\r\n\r\n    @Component\r\n    @Order(1)\r\n    public class IpFilter implements Filter {\r\n\r\n       @value(&quot;${allowed.ip:}&quot;)\r\n       private String whitelistedIp;\r\n\r\n        @Override\r\n        public void doFilter(\r\n          ServletRequest request, \r\n          ServletResponse response, \r\n          FilterChain chain) throws IOException, ServletException {\r\n \r\n            HttpServletRequest req = (HttpServletRequest) request;\r\n            String ip = req.getRemoteAddr();  \r\n            if (!ip.equals(whitelistedIp) {\r\n              // Update the logic if you want\r\n              req.reset();\r\n              return;\r\n            }\r\n            filterChain.doFilter(request, response);\r\n        }\r\n    }\r\n\r\n\r\n","title":"How to do IP whitelisting in Spring Boot 3.1.0?","body":"<p>You can create a filter and write logic to get IP from request and filter it</p>\n<pre><code>@Component\n@Order(1)\npublic class IpFilter implements Filter {\n\n   @value(&quot;${allowed.ip:}&quot;)\n   private String whitelistedIp;\n\n    @Override\n    public void doFilter(\n      ServletRequest request, \n      ServletResponse response, \n      FilterChain chain) throws IOException, ServletException {\n\n        HttpServletRequest req = (HttpServletRequest) request;\n        String ip = req.getRemoteAddr();  \n        if (!ip.equals(whitelistedIp) {\n          // Update the logic if you want\n          req.reset();\n          return;\n        }\n        filterChain.doFilter(request, response);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689853282,"creation_date":1689853282,"answer_id":76729477,"question_id":76729155,"body_markdown":"This was a bug after migration to `authorizeHttpRequests()` but Spring Framework Team have fixed it into new version.\r\n\r\n [Release Notes][1]\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-security/releases\r\n  [2]: https://i.stack.imgur.com/dyT6d.png","title":"How to do IP whitelisting in Spring Boot 3.1.0?","body":"<p>This was a bug after migration to <code>authorizeHttpRequests()</code> but Spring Framework Team have fixed it into new version.</p>\n<p><a href=\"https://github.com/spring-projects/spring-security/releases\" rel=\"nofollow noreferrer\">Release Notes</a></p>\n<p><a href=\"https://i.stack.imgur.com/dyT6d.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dyT6d.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":2168148,"reputation":35,"user_id":1920774,"display_name":"Sarvesh H"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":140,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":2,"score":1,"last_activity_date":1689853282,"creation_date":1689850570,"question_id":76729155,"body_markdown":"We did Spring Boot upgrade to 3.1.0 from 2.6.0. The below IP whitelisting doesn&#39;t work as many of the methods are deprecated.\r\n```\r\n@Configuration\r\n@EnableWebSecurity\r\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http.authorizeRequests()\r\n                .antMatchers(&quot;/**&quot;).hasIpAddress(&quot;192.0.0.1&quot;)\r\n    \t\t\t.and()\r\n    \t\t\t.csrf().disable();\r\n    }\r\n}\r\n```\r\nI am not able to figure out how to pass IP to whitelist to below code.\r\n```\r\n@Bean\r\npublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n    return http.authorizeHttpRequests(auth-&gt; {auth.requestMatchers(&quot;/**&quot;);\r\n        auth.requestMatchers(&quot;&quot;,&quot;&quot;);\r\n        auth.anyRequest().authenticated();})\r\n    .httpBasic(withDefaults()).build();\r\n}\r\n```","title":"How to do IP whitelisting in Spring Boot 3.1.0?","body":"<p>We did Spring Boot upgrade to 3.1.0 from 2.6.0. The below IP whitelisting doesn't work as many of the methods are deprecated.</p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http.authorizeRequests()\n                .antMatchers(&quot;/**&quot;).hasIpAddress(&quot;192.0.0.1&quot;)\n                .and()\n                .csrf().disable();\n    }\n}\n</code></pre>\n<p>I am not able to figure out how to pass IP to whitelist to below code.</p>\n<pre><code>@Bean\npublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n    return http.authorizeHttpRequests(auth-&gt; {auth.requestMatchers(&quot;/**&quot;);\n        auth.requestMatchers(&quot;&quot;,&quot;&quot;);\n        auth.anyRequest().authenticated();})\n    .httpBasic(withDefaults()).build();\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","dependencies","version"],"comments":[{"owner":{"account_id":7767429,"reputation":674,"user_id":5878215,"display_name":"Zorglube"},"score":0,"creation_date":1676842583,"post_id":75503517,"comment_id":133214129,"body_markdown":"Try Spring official documentation","body":"Try Spring official documentation"}],"answers":[{"comments":[{"owner":{"account_id":223484,"reputation":61176,"user_id":482717,"accept_rate":66,"display_name":"Paul Verest"},"score":0,"creation_date":1676846178,"post_id":75503606,"comment_id":133214723,"body_markdown":"thanks for hint, but exact answer is v2.5","body":"thanks for hint, but exact answer is v2.5"}],"tags":[],"owner":{"account_id":153343,"reputation":1086,"user_id":368532,"accept_rate":70,"display_name":"Boris"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1676842320,"creation_date":1676842320,"answer_id":75503606,"question_id":75503517,"body_markdown":"Any version of Spring docs has a dedicated section about this:  https://docs.spring.io/spring-boot/docs/2.7.x/reference/html/getting-started.html#getting-started.system-requirements","title":"What minimal Spring Boot 2.x version can run for sure on Java 17?","body":"<p>Any version of Spring docs has a dedicated section about this:  <a href=\"https://docs.spring.io/spring-boot/docs/2.7.x/reference/html/getting-started.html#getting-started.system-requirements\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-boot/docs/2.7.x/reference/html/getting-started.html#getting-started.system-requirements</a></p>\n"},{"comments":[{"owner":{"account_id":371244,"reputation":443,"user_id":17825391,"display_name":"user213769"},"score":0,"creation_date":1689796507,"post_id":75503865,"comment_id":135266067,"body_markdown":"TBH, while that answers the OP&#39;s question as asked (&quot;... can run _for sure_ on Java 17&quot;), that&#39;s not entirely true. Spring Boot 2.5 is the minimal version that _officially_ supports JRE 17. Actual real world trial shows that, while Spring Boot 2.4.1 is indeed incompatible with JRE 17, any Spring Boot &gt;= 2.4.2 runs with JRE 17 without any real apparent issues. I&#39;m not saying that it means that it&#39;s a good idea to do so, but still in some cases it might be helpful to know that (e.g. when you can&#39;t bump the dep due to compat. issues, but can still bump the JRE)","body":"TBH, while that answers the OP&#39;s question as asked (&quot;... can run <i>for sure</i> on Java 17&quot;), that&#39;s not entirely true. Spring Boot 2.5 is the minimal version that <i>officially</i> supports JRE 17. Actual real world trial shows that, while Spring Boot 2.4.1 is indeed incompatible with JRE 17, any Spring Boot &gt;= 2.4.2 runs with JRE 17 without any real apparent issues. I&#39;m not saying that it means that it&#39;s a good idea to do so, but still in some cases it might be helpful to know that (e.g. when you can&#39;t bump the dep due to compat. issues, but can still bump the JRE)"}],"tags":[],"owner":{"account_id":223484,"reputation":61176,"user_id":482717,"accept_rate":66,"display_name":"Paul Verest"},"comment_count":1,"down_vote_count":0,"up_vote_count":14,"is_accepted":true,"score":14,"last_activity_date":1689853101,"creation_date":1676845983,"answer_id":75503865,"question_id":75503517,"body_markdown":"Spring Boot [2.5 is minimal version that supports JRE 17 according to documnetation](https://docs.spring.io/spring-boot/docs/2.5.x/reference/html/getting-started.html#getting-started.system-requirements).\r\n\r\n([2.4 was intially up to JRE 16](https://docs.spring.io/spring-boot/docs/2.4.x/reference/html/getting-started.html#getting-started.system-requirements))\r\nUPDATE as @spamove commented, \r\n&gt; 2.4.2+ runs with JRE 17 without any real apparent issues\r\n\r\nSo if you are to upgrade you old project to run on JRE 17, be sure to upgrade to at least 2.5 version.  \r\n( But I would recommend the last 2.x which is 2.7,\r\nthat will be supported even for longer time than 3.0 )\r\n\r\nAlso see Spring framework Java version requirement  \r\nhttps://github.com/spring-projects/spring-framework/wiki/Spring-Framework-Versions\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/p9LuK.png","title":"What minimal Spring Boot 2.x version can run for sure on Java 17?","body":"<p>Spring Boot <a href=\"https://docs.spring.io/spring-boot/docs/2.5.x/reference/html/getting-started.html#getting-started.system-requirements\" rel=\"noreferrer\">2.5 is minimal version that supports JRE 17 according to documnetation</a>.</p>\n<p>(<a href=\"https://docs.spring.io/spring-boot/docs/2.4.x/reference/html/getting-started.html#getting-started.system-requirements\" rel=\"noreferrer\">2.4 was intially up to JRE 16</a>)\nUPDATE as @spamove commented,</p>\n<blockquote>\n<p>2.4.2+ runs with JRE 17 without any real apparent issues</p>\n</blockquote>\n<p>So if you are to upgrade you old project to run on JRE 17, be sure to upgrade to at least 2.5 version.<br />\n( But I would recommend the last 2.x which is 2.7,\nthat will be supported even for longer time than 3.0 )</p>\n<p>Also see Spring framework Java version requirement<br />\n<a href=\"https://github.com/spring-projects/spring-framework/wiki/Spring-Framework-Versions\" rel=\"noreferrer\">https://github.com/spring-projects/spring-framework/wiki/Spring-Framework-Versions</a></p>\n<p><a href=\"https://i.stack.imgur.com/p9LuK.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/p9LuK.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":223484,"reputation":61176,"user_id":482717,"accept_rate":66,"display_name":"Paul Verest"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21728,"favorite_count":0,"down_vote_count":2,"up_vote_count":10,"accepted_answer_id":75503865,"answer_count":2,"score":8,"last_activity_date":1689853101,"creation_date":1676841503,"question_id":75503517,"body_markdown":"Can Spring Boot 3.0 requires at least Java 17.\r\n\r\n**What minimal Spring 2.x version can run for sure on Java 17?**\r\n\r\nJava 17 was released 14 Sep 2021 https://endoflife.date/java  \r\nso I would expect Spring Boot 2.6 (released 19 Nov 2021) https://endoflife.date/spring-boot  \r\nto be for sure tested against JRE 17.\r\n\r\nWhere is it possible to see min and max supported Java (JRE) version for every Spring Boot version?\r\n \r\n","title":"What minimal Spring Boot 2.x version can run for sure on Java 17?","body":"<p>Can Spring Boot 3.0 requires at least Java 17.</p>\n<p><strong>What minimal Spring 2.x version can run for sure on Java 17?</strong></p>\n<p>Java 17 was released 14 Sep 2021 <a href=\"https://endoflife.date/java\" rel=\"noreferrer\">https://endoflife.date/java</a><br />\nso I would expect Spring Boot 2.6 (released 19 Nov 2021) <a href=\"https://endoflife.date/spring-boot\" rel=\"noreferrer\">https://endoflife.date/spring-boot</a><br />\nto be for sure tested against JRE 17.</p>\n<p>Where is it possible to see min and max supported Java (JRE) version for every Spring Boot version?</p>\n"},{"tags":["java","swing"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1689852659,"post_id":76729395,"comment_id":135273471,"body_markdown":"you are trying to add actionlisteners, but I don&#39;t see you actually creating Buttons, I would start with that","body":"you are trying to add actionlisteners, but I don&#39;t see you actually creating Buttons, I would start with that"},{"owner":{"account_id":22064593,"reputation":61,"user_id":16326672,"display_name":"Christoph Linden"},"score":0,"creation_date":1689852746,"post_id":76729395,"comment_id":135273493,"body_markdown":"@Stultuske I just did not write it in ... addded it - just one of the 15 buttons. They are all the same just in an array and with a text.","body":"@Stultuske I just did not write it in ... addded it - just one of the 15 buttons. They are all the same just in an array and with a text."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1689852805,"post_id":76729395,"comment_id":135273502,"body_markdown":"[Here](https://stackoverflow.com/a/74925295/522444) is one way to do this sort of thing, and [this](https://stackoverflow.com/a/20037116/522444) may prove helpful (although without the listeners).","body":"<a href=\"https://stackoverflow.com/a/74925295/522444\">Here</a> is one way to do this sort of thing, and <a href=\"https://stackoverflow.com/a/20037116/522444\">this</a> may prove helpful (although without the listeners)."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689852887,"post_id":76729395,"comment_id":135273525,"body_markdown":"There&#39;s no need to create `NUM_BUTTONS` worth of `ActionListener`s. Just have *one* instance of a private class that implements that interface and add that instance to all buttons. btw, your loop will miss the last button (the `- 1` is incorrect)","body":"There&#39;s no need to create <code>NUM_BUTTONS</code> worth of <code>ActionListener</code>s. Just have <i>one</i> instance of a private class that implements that interface and add that instance to all buttons. btw, your loop will miss the last button (the <code>- 1</code> is incorrect)"},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1689853006,"post_id":76729395,"comment_id":135273560,"body_markdown":"I would recommend creating *two* ActionListeners, one for the buttons, and the `.`, dot, and another for the operations. You can use a Set to distinguish and decide which listener to add.","body":"I would recommend creating <i>two</i> ActionListeners, one for the buttons, and the <code>.</code>, dot, and another for the operations. You can use a Set to distinguish and decide which listener to add."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1689853799,"post_id":76729395,"comment_id":135273735,"body_markdown":"[This](https://stackoverflow.com/a/33973521/522444) is the example that I was looking for that demonstrates using 2 or 3 actions for a collection of JButtons all created dynamically.","body":"<a href=\"https://stackoverflow.com/a/33973521/522444\">This</a> is the example that I was looking for that demonstrates using 2 or 3 actions for a collection of JButtons all created dynamically."},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1689854122,"post_id":76729395,"comment_id":135273804,"body_markdown":"Since Java 8, I prefer to use [method references](https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html) when implementing [ActionListener](https://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html) interface.","body":"Since Java 8, I prefer to use <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html\" rel=\"nofollow noreferrer\">method references</a> when implementing <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html\" rel=\"nofollow noreferrer\">ActionListener</a> interface."}],"owner":{"account_id":22064593,"reputation":61,"user_id":16326672,"display_name":"Christoph Linden"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1689852754,"answer_count":0,"score":0,"last_activity_date":1689852700,"creation_date":1689852594,"question_id":76729395,"body_markdown":"I try to create a small pocket calculator app, that has 15 buttons. \r\n\r\nAll of the buttons shall have an action to add the corresponding number or calculation sign to the calculation JTextField.\r\n\r\nI have created a JButton array that contains all the buttons, and then create a loop to assing an action to each of the buttons, as all the buttons are actually the same.\r\n\r\nEach button has a text which defines its text (0-9 +-*/=).\r\n```\r\n        final int NUM_BUTTONS=15;\r\n        //Buttons in ein Array legen, um die Actions zu vereinfachen.\r\n        var buttons = new JButton[NUM_BUTTONS];\r\n\r\n        buttons[7] = new JButton(&quot;7&quot;);\r\n        panel.add(buttons[7], c) ;\r\n```\r\n\r\nThen there is a loop for all the buttons (except the last one, that is = and gets another action)\r\n```\r\n        for(int button=0; button &lt; NUM_BUTTONS-1 ; button++) {\r\n            buttons[button].addActionListener(new ActionListener() {\r\n                @Override\r\n                public void actionPerformed(ActionEvent event) {\r\n                    calculationTextField.setText(calculationTextField.getText() + (buttons[button].getText()));\r\n                }\r\n            });\r\n        }\r\n```\r\n\r\nAnd now it does not compile, because of:\r\n/home/clinden/studium/IdeaProjects/JAPR02_A/src/main/java/japr02/Calculator.java:100: error: local variables referenced from an inner class must be final or effectively final\r\n                    calculationTextField.setText(calculationTextField.getText() + (buttons[button].getText()));\r\n\r\nSo how do I actually get it to use button not as a local variable? \r\n\r\na foreach does work, but I cannot used it, as the last button does need another action and not both (tried to overwrite it, but it will add two actions actually).\r\n","title":"Java: How to define an swing JButton action with a loop?","body":"<p>I try to create a small pocket calculator app, that has 15 buttons.</p>\n<p>All of the buttons shall have an action to add the corresponding number or calculation sign to the calculation JTextField.</p>\n<p>I have created a JButton array that contains all the buttons, and then create a loop to assing an action to each of the buttons, as all the buttons are actually the same.</p>\n<p>Each button has a text which defines its text (0-9 +-*/=).</p>\n<pre><code>        final int NUM_BUTTONS=15;\n        //Buttons in ein Array legen, um die Actions zu vereinfachen.\n        var buttons = new JButton[NUM_BUTTONS];\n\n        buttons[7] = new JButton(&quot;7&quot;);\n        panel.add(buttons[7], c) ;\n</code></pre>\n<p>Then there is a loop for all the buttons (except the last one, that is = and gets another action)</p>\n<pre><code>        for(int button=0; button &lt; NUM_BUTTONS-1 ; button++) {\n            buttons[button].addActionListener(new ActionListener() {\n                @Override\n                public void actionPerformed(ActionEvent event) {\n                    calculationTextField.setText(calculationTextField.getText() + (buttons[button].getText()));\n                }\n            });\n        }\n</code></pre>\n<p>And now it does not compile, because of:\n/home/clinden/studium/IdeaProjects/JAPR02_A/src/main/java/japr02/Calculator.java:100: error: local variables referenced from an inner class must be final or effectively final\ncalculationTextField.setText(calculationTextField.getText() + (buttons[button].getText()));</p>\n<p>So how do I actually get it to use button not as a local variable?</p>\n<p>a foreach does work, but I cannot used it, as the last button does need another action and not both (tried to overwrite it, but it will add two actions actually).</p>\n"},{"tags":["java","spring-boot","spring-data-jpa"],"answers":[{"comments":[{"owner":{"account_id":12060215,"reputation":165,"user_id":8819495,"display_name":"vMysterion"},"score":0,"creation_date":1598444902,"post_id":63588327,"comment_id":112460418,"body_markdown":"Do i need to tell my application at some point that this class exist or do i have to put it into a package that is in a specific relation to my Application class? The Initializer is never called.","body":"Do i need to tell my application at some point that this class exist or do i have to put it into a package that is in a specific relation to my Application class? The Initializer is never called."}],"tags":[],"owner":{"account_id":1521409,"reputation":6658,"user_id":1420941,"display_name":"stringy05"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1598397128,"creation_date":1598397128,"answer_id":63588327,"question_id":63588139,"body_markdown":"In order to use spring managed components like the `EntityManager` the objects need to spring `Beans`, which basically means they are created inside the spring context and can utilise the IoC container.\r\n\r\nIn the example above, running the `DbSampleAdditor` class from the main method is outside the spring context, so the beans like `PersistenceContext` wont get injected.\r\n\r\nOne fairly simple way to do this inside the spring context is to add an `ApplicationListener` for the `ApplicationReadyEvent`\r\n\r\n```java\r\n@Component\r\nclass Initialise implements ApplicationListener&lt;ApplicationReadyEvent&gt; {\r\n\r\n    @Autowired\r\n    private final DbSampleAdditor db;\r\n\r\n    @Override\r\n    public void onApplicationEvent(ApplicationReadyEvent applicationReadyEvent) {\r\n        db.addSampleData();\r\n   }\r\n}\r\n```\r\nWhen the application ready event fires all the necessary spring bean wiring is set up so when it runs the `addSampleData` method, things like the EM are good to go.\r\n\r\nOther approaches for setting up a DB for spring boot are documented [here][1]\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#howto-database-initialization","title":"How to add sample data to database with springboot?","body":"<p>In order to use spring managed components like the <code>EntityManager</code> the objects need to spring <code>Beans</code>, which basically means they are created inside the spring context and can utilise the IoC container.</p>\n<p>In the example above, running the <code>DbSampleAdditor</code> class from the main method is outside the spring context, so the beans like <code>PersistenceContext</code> wont get injected.</p>\n<p>One fairly simple way to do this inside the spring context is to add an <code>ApplicationListener</code> for the <code>ApplicationReadyEvent</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\nclass Initialise implements ApplicationListener&lt;ApplicationReadyEvent&gt; {\n\n    @Autowired\n    private final DbSampleAdditor db;\n\n    @Override\n    public void onApplicationEvent(ApplicationReadyEvent applicationReadyEvent) {\n        db.addSampleData();\n   }\n}\n</code></pre>\n<p>When the application ready event fires all the necessary spring bean wiring is set up so when it runs the <code>addSampleData</code> method, things like the EM are good to go.</p>\n<p>Other approaches for setting up a DB for spring boot are documented <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#howto-database-initialization\" rel=\"nofollow noreferrer\">here</a></p>\n"},{"tags":[],"owner":{"account_id":8903202,"reputation":99,"user_id":12228510,"display_name":"DK93"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1598408421,"creation_date":1598408421,"answer_id":63589579,"question_id":63588139,"body_markdown":"Instead of creating an object DBSampleAdditor, try to autowire it so that it is available on application startup.       @Autowired                                                      DBSampleAdditor DBSampleAdditor                                  Then you try to add sample data within the run method","title":"How to add sample data to database with springboot?","body":"<p>Instead of creating an object DBSampleAdditor, try to autowire it so that it is available on application startup.       @Autowired                                                      DBSampleAdditor DBSampleAdditor                                  Then you try to add sample data within the run method</p>\n"},{"comments":[{"owner":{"account_id":12060215,"reputation":165,"user_id":8819495,"display_name":"vMysterion"},"score":0,"creation_date":1598474609,"post_id":63591286,"comment_id":112474843,"body_markdown":"I&#39;ve tried that, but the method, which is annotated with @PostConstruct is never called.","body":"I&#39;ve tried that, but the method, which is annotated with @PostConstruct is never called."},{"owner":{"account_id":12060215,"reputation":165,"user_id":8819495,"display_name":"vMysterion"},"score":1,"creation_date":1598476160,"post_id":63591286,"comment_id":112475362,"body_markdown":"Alright - i fixed it, forgot to enable AnnotationProcessing inside IntelliJ. This works just fine for me.","body":"Alright - i fixed it, forgot to enable AnnotationProcessing inside IntelliJ. This works just fine for me."}],"tags":[],"owner":{"account_id":5702266,"reputation":206,"user_id":4506881,"display_name":"Imran Ahmad"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1689852611,"creation_date":1598421291,"answer_id":63591286,"question_id":63588139,"body_markdown":"You can use method with  @PostConstruct with @Component to insert data at startup.\r\n\r\n@PostConstruct will be invoked after the bean has been created, dependencies have been injected, all managed properties are set, and before the bean is actually set into scope.\r\n\r\nJust inject your database repository in the class marked with @Component and call your injected database repository inside the method marked with @PostConstruct\r\n\r\nExample:\r\n\r\n    @Component\r\n    public class DbInit {\r\n     \r\n        @Autowired\r\n        private DBSampleAdditor dbsa;\r\n     \r\n        @PostConstruct\r\n        private void postConstruct() {\r\n            dbsa.addSampleData();\r\n        }\r\n    }","title":"How to add sample data to database with springboot?","body":"<p>You can use method with  @PostConstruct with @Component to insert data at startup.</p>\n<p>@PostConstruct will be invoked after the bean has been created, dependencies have been injected, all managed properties are set, and before the bean is actually set into scope.</p>\n<p>Just inject your database repository in the class marked with @Component and call your injected database repository inside the method marked with @PostConstruct</p>\n<p>Example:</p>\n<pre><code>@Component\npublic class DbInit {\n \n    @Autowired\n    private DBSampleAdditor dbsa;\n \n    @PostConstruct\n    private void postConstruct() {\n        dbsa.addSampleData();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":12060215,"reputation":165,"user_id":8819495,"display_name":"vMysterion"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1768,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":63591286,"answer_count":3,"score":2,"last_activity_date":1689852611,"creation_date":1598395647,"question_id":63588139,"body_markdown":"I&#39;ve a Spring Boot application with the Spring Data JPA and two entities mapped to a database. My application is set to recreate the database on every startup. Now i want to create some instances of these POJOs, persist them in the database so I&#39;ve some data to test my application with in the ongoing development process.\r\n\r\nWhat is the best way to do that?\r\n\r\nWhat i tried so far:\r\nMy class to add the sample data\r\n```\r\npublic class DBSampleAdditor {\r\n    @PersistenceContext\r\n    private EntityManager em;\r\n\r\n    @Transactional\r\n    public void addSampleData() {\r\n        // creating POJO instances and persist them with em.perists()\r\n    }\r\n}\r\n```\r\n\r\nI tried to call these functions in the main of my ApplicationClass\r\n```\r\n@SpringBootApplication()\r\npublic class ApiApplication {\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(ApiApplication.class, args);\r\n        DBSampleAdditor dbsa = new DBSampleAdditor();\r\n        dbsa.addSampleData();\r\n\t}\r\n}\r\n```\r\nThat didnt work at all, as the EntityManager never got an Instance from the persistence unit.\r\n\r\nI also tried to create a CommandLineRunner:\r\n```\r\n@Component\r\npublic class PTCommandLineRunner implements CommandLineRunner {\r\n    @Override\r\n    public void run(String... args) throws Exception {\r\n        System.out.println(&quot;Adding sample data...&quot;);\r\n        DBSampleAdditor dbsa = new DBSampleAdditor();\r\n        dbsa.addSampleData();\r\n    }\r\n}\r\n```\r\nBut that one seemed to never been called in the startup process.","title":"How to add sample data to database with springboot?","body":"<p>I've a Spring Boot application with the Spring Data JPA and two entities mapped to a database. My application is set to recreate the database on every startup. Now i want to create some instances of these POJOs, persist them in the database so I've some data to test my application with in the ongoing development process.</p>\n<p>What is the best way to do that?</p>\n<p>What i tried so far:\nMy class to add the sample data</p>\n<pre><code>public class DBSampleAdditor {\n    @PersistenceContext\n    private EntityManager em;\n\n    @Transactional\n    public void addSampleData() {\n        // creating POJO instances and persist them with em.perists()\n    }\n}\n</code></pre>\n<p>I tried to call these functions in the main of my ApplicationClass</p>\n<pre><code>@SpringBootApplication()\npublic class ApiApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(ApiApplication.class, args);\n        DBSampleAdditor dbsa = new DBSampleAdditor();\n        dbsa.addSampleData();\n    }\n}\n</code></pre>\n<p>That didnt work at all, as the EntityManager never got an Instance from the persistence unit.</p>\n<p>I also tried to create a CommandLineRunner:</p>\n<pre><code>@Component\npublic class PTCommandLineRunner implements CommandLineRunner {\n    @Override\n    public void run(String... args) throws Exception {\n        System.out.println(&quot;Adding sample data...&quot;);\n        DBSampleAdditor dbsa = new DBSampleAdditor();\n        dbsa.addSampleData();\n    }\n}\n</code></pre>\n<p>But that one seemed to never been called in the startup process.</p>\n"},{"tags":["java","database","oracle","stored-procedures"],"owner":{"account_id":23513792,"reputation":11,"user_id":17562003,"display_name":"jikar bhati"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689852573,"creation_date":1689852573,"question_id":76729392,"body_markdown":"I am need either default value or default value specific flag for the parameter of a stored procedure in oracle database via java.\r\n\r\ni am using getProcedureColumns method to get the default parameter details by passing the procedure name as below.\r\nhowever, this is giving result at null.\r\n\r\n```\r\nResultSet rs = con.getMetaData().getProcedureColumns(null, &quot;SCHEMA&quot;, &quot;PROCEDURE_NAME&quot;, null);\r\nSystem.out.println(&quot;COLUMN_DEF:&quot;+rs.getString(&quot;COLUMN_DEF&quot;));\r\noutput\r\n-------\r\nCOLUMN_DEF:null\r\n```\r\n\r\nFollowing is my stored procedure syntax.\r\n\r\nCREATE OR REPLACE PROCEDURE  PROCEDURE_NAME\r\n(\r\n  player_name IN VARCHAR2 DEFAULT &#39;hero&#39;,\r\n  goals OUT NUMBER,\r\n  league OUT VARCHAR2\r\n) AS\r\n\r\nwhat is the reason that it does not give me the default value output?\r\nwhat should be the solution?\r\n\r\nI have tried checking in all_agrguments table and i can see that defaulted flag is Y for the default parameter which i have specified. however, i do not want to do any additional queries on db. i want to achieve this using above java method getProcedureColumns from java.sql pkg.","title":"Not able to fetch default parameter flag or value using getProcedureColumns function from DatabaseMetaData","body":"<p>I am need either default value or default value specific flag for the parameter of a stored procedure in oracle database via java.</p>\n<p>i am using getProcedureColumns method to get the default parameter details by passing the procedure name as below.\nhowever, this is giving result at null.</p>\n<pre><code>ResultSet rs = con.getMetaData().getProcedureColumns(null, &quot;SCHEMA&quot;, &quot;PROCEDURE_NAME&quot;, null);\nSystem.out.println(&quot;COLUMN_DEF:&quot;+rs.getString(&quot;COLUMN_DEF&quot;));\noutput\n-------\nCOLUMN_DEF:null\n</code></pre>\n<p>Following is my stored procedure syntax.</p>\n<p>CREATE OR REPLACE PROCEDURE  PROCEDURE_NAME\n(\nplayer_name IN VARCHAR2 DEFAULT 'hero',\ngoals OUT NUMBER,\nleague OUT VARCHAR2\n) AS</p>\n<p>what is the reason that it does not give me the default value output?\nwhat should be the solution?</p>\n<p>I have tried checking in all_agrguments table and i can see that defaulted flag is Y for the default parameter which i have specified. however, i do not want to do any additional queries on db. i want to achieve this using above java method getProcedureColumns from java.sql pkg.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":17545385,"reputation":629,"user_id":12726793,"display_name":"MT756"},"score":3,"creation_date":1583438690,"post_id":60553124,"comment_id":107126966,"body_markdown":"What are your thoughts?","body":"What are your thoughts?"},{"owner":{"account_id":7917932,"reputation":199,"user_id":5979804,"display_name":"asfmlr"},"score":4,"creation_date":1583438912,"post_id":60553124,"comment_id":107127055,"body_markdown":"What do you mean need an answer, first try by yourself","body":"What do you mean need an answer, first try by yourself"},{"owner":{"account_id":17593023,"reputation":826,"user_id":12764490,"display_name":"Tim Hunter"},"score":1,"creation_date":1583438968,"post_id":60553124,"comment_id":107127077,"body_markdown":"What&#39;s your attempt to solve this? Show us what you&#39;ve done code wise and we&#39;ll point out what&#39;s going wrong if it doesn&#39;t work the way you expect.","body":"What&#39;s your attempt to solve this? Show us what you&#39;ve done code wise and we&#39;ll point out what&#39;s going wrong if it doesn&#39;t work the way you expect."},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1583439173,"post_id":60553124,"comment_id":107127168,"body_markdown":"It sounds like you mean strings that **do** repeat themselves. LIke `lopo` and `polo` contain the same letters and are the same length so return them in the list.","body":"It sounds like you mean strings that <b>do</b> repeat themselves. LIke <code>lopo</code> and <code>polo</code> contain the same letters and are the same length so return them in the list."},{"owner":{"account_id":12583055,"reputation":447,"user_id":9732672,"display_name":"NomadMaker"},"score":0,"creation_date":1583439196,"post_id":60553124,"comment_id":107127176,"body_markdown":"What is the rule? Can you explain it. Why do polo and loo pass while mama doesnt?","body":"What is the rule? Can you explain it. Why do polo and loo pass while mama doesnt?"}],"answers":[{"comments":[{"owner":{"account_id":11915680,"reputation":25,"user_id":8719652,"display_name":"Ofer"},"score":0,"creation_date":1583439258,"post_id":60553189,"comment_id":107127215,"body_markdown":"How can I know which strings are corresponding? One string is pool and other is poop etc. how should you do it?","body":"How can I know which strings are corresponding? One string is pool and other is poop etc. how should you do it?"},{"owner":{"account_id":2802711,"reputation":1786,"user_id":2410641,"accept_rate":95,"display_name":"ashu"},"score":0,"creation_date":1583439411,"post_id":60553189,"comment_id":107127287,"body_markdown":"@Ofer `HashMap&lt;String, Integer&gt;` uses strings as key. If a string already exists, you know you need to increase the count.","body":"@Ofer <code>HashMap&lt;String, Integer&gt;</code> uses strings as key. If a string already exists, you know you need to increase the count."}],"tags":[],"owner":{"account_id":2802711,"reputation":1786,"user_id":2410641,"accept_rate":95,"display_name":"ashu"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689852480,"creation_date":1583438889,"answer_id":60553189,"question_id":60553124,"body_markdown":"- Create a `HashMap&lt;String, Integer&gt;`\r\n- Loop over the input and increment count for corresponding string in the HashMap\r\n- Create an empty list of string (lets call it result)\r\n- Loop over [`HashMap#keySet()`](https://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html#keySet()) and check if `count &gt; 1`. If it is, add it to the result list.","title":"Return only repeated strings (not same order, same letters)","body":"<ul>\n<li>Create a <code>HashMap&lt;String, Integer&gt;</code></li>\n<li>Loop over the input and increment count for corresponding string in the HashMap</li>\n<li>Create an empty list of string (lets call it result)</li>\n<li>Loop over <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html#keySet()\" rel=\"nofollow noreferrer\"><code>HashMap#keySet()</code></a> and check if <code>count &gt; 1</code>. If it is, add it to the result list.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1692034,"reputation":3196,"user_id":1554195,"display_name":"tquadrat"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1583601830,"creation_date":1583439326,"answer_id":60553292,"question_id":60553124,"body_markdown":" 1. Create a map `Map&lt;String,List&lt;String&gt;&gt;`\r\n 2. For each entry in the source list, create the key for that map by ordering the letters in the string alphabetically (&quot;papi&quot; and &quot;appi&quot; both will get &quot;aipp&quot; then)\r\n 3. Lookup the map for that key; if it exists, append the source String to the list. If not, create an new entry with the source String as the only entry of the new list\r\n 4. After you processed the source list, iterate over the map&#39;s values and print the contents of all lists with more than one single entry\r\n\r\nBased on this it should be easy to write the corresponding Java code yourself …\r\n\r\nEDIT ------8&lt;-----\r\n\r\n… but because today is a bit boring, here my solution for this question:\r\n\r\n    import static java.lang.System.err;\r\n    import static java.lang.System.out;\r\n    import static java.util.Arrays.sort;\r\n    import static java.util.stream.Collectors.joining;\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.HashMap;\r\n    import java.util.List;\r\n    import java.util.Map;\r\n\r\n    /**\r\n     *  Finds those words in the give list that uses the same character set as at\r\n     *  least one other word on the list.\r\n     */\r\n    public class FindSameWordsUsingTheSameSetOfCharacters\r\n    {\r\n            /*-----------*\\\r\n        ====** Constants **========================================================\r\n            \\*-----------*/\r\n        /**\r\n         *  The input list.\r\n         */\r\n        public static final String [] INPUT = { &quot;papi&quot;, &quot;polo&quot;, &quot;lopo&quot;, &quot;appi&quot;, &quot;abba&quot;, &quot;polo&quot;, &quot;mama&quot; };\r\n\r\n            /*---------*\\\r\n        ====** Methods **==========================================================\r\n            \\*---------*/\r\n        /**\r\n         *  The program entry point.\r\n         *\r\n         *  @param  args    The command line arguments.\r\n         */\r\n        public static void main( final String... args )\r\n        {\r\n            try\r\n            {\r\n                final Map&lt;String,List&lt;String&gt;&gt; map = new HashMap&lt;&gt;();\r\n                for( final var string : INPUT )\r\n                {\r\n                    final var chars = string.toCharArray();\r\n                    sort( chars );\r\n                    final var key = new String( chars );\r\n                    map.computeIfAbsent( key, $ -&gt; new ArrayList&lt;&gt;() ).add( string );\r\n                }\r\n\r\n                final var result = map.values()\r\n                    .stream()\r\n                    .filter( list -&gt; list.size() &gt; 1 )\r\n                    .flatMap( list -&gt; list.stream() )\r\n                    .collect( joining( &quot;, &quot;, &quot;[&quot;, &quot;]&quot; ) );\r\n                out.printf( &quot;Result: %s&quot;, result );\r\n            }\r\n            catch( final Throwable t )\r\n            {\r\n                //---* Handle any previously unhandled exceptions *----------------\r\n                t.printStackTrace( err );\r\n            }\r\n        }   //  main()\r\n    }\r\n    //  class FindSameWordsUsingTheSameSetOfCharacters\r\n\r\nI think with a bit more mapping magic this can be solved even without the `Map&lt;&gt; map`, and perhaps that version would return exact the output provided in the question.\r\n\r\nThis version delivers\r\n\r\n    Result: [papi, appi, polo, lopo, polo]\r\n\r\ninstead of the required\r\n\r\n    [‘papi’, ‘polo’, ‘lopo’, ‘appi’, ‘polo’]\r\n\r\n(The sequence is different …).\r\n","title":"Return only repeated strings (not same order, same letters)","body":"<ol>\n<li>Create a map <code>Map&lt;String,List&lt;String&gt;&gt;</code></li>\n<li>For each entry in the source list, create the key for that map by ordering the letters in the string alphabetically (\"papi\" and \"appi\" both will get \"aipp\" then)</li>\n<li>Lookup the map for that key; if it exists, append the source String to the list. If not, create an new entry with the source String as the only entry of the new list</li>\n<li>After you processed the source list, iterate over the map's values and print the contents of all lists with more than one single entry</li>\n</ol>\n\n<p>Based on this it should be easy to write the corresponding Java code yourself …</p>\n\n<p>EDIT ------8&lt;-----</p>\n\n<p>… but because today is a bit boring, here my solution for this question:</p>\n\n<pre><code>import static java.lang.System.err;\nimport static java.lang.System.out;\nimport static java.util.Arrays.sort;\nimport static java.util.stream.Collectors.joining;\n\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\n\n/**\n *  Finds those words in the give list that uses the same character set as at\n *  least one other word on the list.\n */\npublic class FindSameWordsUsingTheSameSetOfCharacters\n{\n        /*-----------*\\\n    ====** Constants **========================================================\n        \\*-----------*/\n    /**\n     *  The input list.\n     */\n    public static final String [] INPUT = { \"papi\", \"polo\", \"lopo\", \"appi\", \"abba\", \"polo\", \"mama\" };\n\n        /*---------*\\\n    ====** Methods **==========================================================\n        \\*---------*/\n    /**\n     *  The program entry point.\n     *\n     *  @param  args    The command line arguments.\n     */\n    public static void main( final String... args )\n    {\n        try\n        {\n            final Map&lt;String,List&lt;String&gt;&gt; map = new HashMap&lt;&gt;();\n            for( final var string : INPUT )\n            {\n                final var chars = string.toCharArray();\n                sort( chars );\n                final var key = new String( chars );\n                map.computeIfAbsent( key, $ -&gt; new ArrayList&lt;&gt;() ).add( string );\n            }\n\n            final var result = map.values()\n                .stream()\n                .filter( list -&gt; list.size() &gt; 1 )\n                .flatMap( list -&gt; list.stream() )\n                .collect( joining( \", \", \"[\", \"]\" ) );\n            out.printf( \"Result: %s\", result );\n        }\n        catch( final Throwable t )\n        {\n            //---* Handle any previously unhandled exceptions *----------------\n            t.printStackTrace( err );\n        }\n    }   //  main()\n}\n//  class FindSameWordsUsingTheSameSetOfCharacters\n</code></pre>\n\n<p>I think with a bit more mapping magic this can be solved even without the <code>Map&lt;&gt; map</code>, and perhaps that version would return exact the output provided in the question.</p>\n\n<p>This version delivers</p>\n\n<pre><code>Result: [papi, appi, polo, lopo, polo]\n</code></pre>\n\n<p>instead of the required</p>\n\n<pre><code>[‘papi’, ‘polo’, ‘lopo’, ‘appi’, ‘polo’]\n</code></pre>\n\n<p>(The sequence is different …).</p>\n"},{"comments":[{"owner":{"account_id":11915680,"reputation":25,"user_id":8719652,"display_name":"Ofer"},"score":0,"creation_date":1583483422,"post_id":60553492,"comment_id":107139707,"body_markdown":"1) What is this checking? \n            if (! substrings.add(normalizedSubstring))\n2) Why don&#39;t we need to check a string that doesn&#39;t divide by 2?","body":"1) What is this checking?              if (! substrings.add(normalizedSubstring)) 2) Why don&#39;t we need to check a string that doesn&#39;t divide by 2?"},{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":0,"creation_date":1583514694,"post_id":60553492,"comment_id":107155685,"body_markdown":"1) [`add()`](https://docs.oracle.com/javase/8/docs/api/java/util/Set.html#add-E-) return false if the value is already in the set, i.e. if the value is a duplicate. --- 2) That was my interpretation of your *&quot;doesn’t repeat themself in the same letters/numbers of letters&quot;* when applied to inputs of more than 4 characters, i.e. to check if the content is a repeating pattern. E.g. `abab` is `ab` repeated twice, `ababab` is `ab` repeated twice, `abcabc` is `abc` repeated 3 times, but `ababa` and `xabab` are not equal to *full* repetitions of any substring.","body":"1) <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Set.html#add-E-\" rel=\"nofollow noreferrer\"><code>add()</code></a> return false if the value is already in the set, i.e. if the value is a duplicate. --- 2) That was my interpretation of your <i>&quot;doesn’t repeat themself in the same letters/numbers of letters&quot;</i> when applied to inputs of more than 4 characters, i.e. to check if the content is a repeating pattern. E.g. <code>abab</code> is <code>ab</code> repeated twice, <code>ababab</code> is <code>ab</code> repeated twice, <code>abcabc</code> is <code>abc</code> repeated 3 times, but <code>ababa</code> and <code>xabab</code> are not equal to <i>full</i> repetitions of any substring."},{"owner":{"account_id":11915680,"reputation":25,"user_id":8719652,"display_name":"Ofer"},"score":0,"creation_date":1583568031,"post_id":60553492,"comment_id":107167552,"body_markdown":"OK , sorry so maybe my question needs to sharpen.\nfor example, we can have :\n\nI have a list of strings: [‘papi’, ‘polo’, ‘lopo’, ‘appi, ‘abba’, ‘polo’, ‘mami’]\n\nHow can I return only:\n\n[‘papi’, ‘polo’, ‘lopo’, ‘appi’, ‘polo’]\n\n(it doesn&#39;t concern to repeated letters, for example mami and papa words are not written in other form. mami is not repeated as maim, and papa is not repteaed as apap","body":"OK , sorry so maybe my question needs to sharpen. for example, we can have :  I have a list of strings: [‘papi’, ‘polo’, ‘lopo’, ‘appi, ‘abba’, ‘polo’, ‘mami’]  How can I return only:  [‘papi’, ‘polo’, ‘lopo’, ‘appi’, ‘polo’]  (it doesn&#39;t concern to repeated letters, for example mami and papa words are not written in other form. mami is not repeated as maim, and papa is not repteaed as apap"},{"owner":{"account_id":11915680,"reputation":25,"user_id":8719652,"display_name":"Ofer"},"score":0,"creation_date":1583568448,"post_id":60553492,"comment_id":107167627,"body_markdown":"But if we have &quot;mami&quot; and also &quot;maim&quot; in the list then we will return both in the new &#39;output&#39; list.\nSame with &quot;papa&quot;, if we had &quot;papa&quot; and also &quot;apap&quot; then both would have been inserted to the new list.","body":"But if we have &quot;mami&quot; and also &quot;maim&quot; in the list then we will return both in the new &#39;output&#39; list. Same with &quot;papa&quot;, if we had &quot;papa&quot; and also &quot;apap&quot; then both would have been inserted to the new list."},{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":0,"creation_date":1583587746,"post_id":60553492,"comment_id":107171556,"body_markdown":"@Ofer Then I totally misunderstood the question. Yes, you should **edit** and clarify the question, explaining like you just did in the comment. [Answer by tquadrat](https://stackoverflow.com/a/60553292/5221149) is what you&#39;re looking for, where step 2 involves normalizing the string similar to how I normalized substrings.","body":"@Ofer Then I totally misunderstood the question. Yes, you should <b>edit</b> and clarify the question, explaining like you just did in the comment. <a href=\"https://stackoverflow.com/a/60553292/5221149\">Answer by tquadrat</a> is what you&#39;re looking for, where step 2 involves normalizing the string similar to how I normalized substrings."}],"tags":[],"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"comment_count":5,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1583440350,"creation_date":1583440350,"answer_id":60553492,"question_id":60553124,"body_markdown":" &gt; doesn’t repeat themself in the same letters/numbers of letters\r\n\r\nSince all your inputs are 4 letters, you&#39;re basically saying that the first 2 letters cannot be the same as the last 2 letters.\r\n\r\nBut let&#39;s assume strings can be any number of letters, which means we need to check any substring length that is divisible into the full string length, e.g. if string is 6 letters when substrings with length 2 and 3 needs to be checked, and if string is 7 letters we don&#39;t need to check anything.\r\n\r\nTo check if 2 substrings have the same set of letters, but in a potentially different order, normalize the substrings by sorting the letters, e.g. `pam` -&gt; `amp`. The use a `Set` to check if you&#39;ve already seen that normalized substring.\r\n\r\n\tpublic static boolean isRepeating(String input) {\r\n\t\tint maxlen = input.length() / 2;\r\n\t\tfor (int len = 2; len &lt;= maxlen; len++)\r\n\t\t\tif (input.length() % len == 0 &amp;&amp; isRepeating(input, len))\r\n\t\t\t\treturn true;\r\n\t\treturn false;\r\n\t}\r\n\r\n\tprivate static boolean isRepeating(String input, int len) {\r\n\t\tSet&lt;String&gt; substrings = new HashSet&lt;&gt;();\r\n\t\tfor (int i = 0; i &lt; input.length(); i += len) {\r\n\t\t\tchar[] chars = input.substring(i, i + len).toCharArray();\r\n\t\t\tArrays.sort(chars);\r\n\t\t\tString normalizedSubstring = new String(chars);\r\n\t\t\tif (! substrings.add(normalizedSubstring))\r\n\t\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n*Test*\r\n\r\n\tList&lt;String&gt; input = Arrays.asList(&quot;papi&quot;, &quot;polo&quot;, &quot;lopo&quot;, &quot;appi&quot;, &quot;abba&quot;, &quot;polo&quot;, &quot;mama&quot;);\r\n\tfor (String str : input)\r\n\t\tSystem.out.printf(&quot;%-5s  %s%n&quot;, isRepeating(str), str);\r\n\r\n*Output*\r\n\r\n```lang-none\r\nfalse  papi\r\nfalse  polo\r\nfalse  lopo\r\nfalse  appi\r\ntrue   abba\r\nfalse  polo\r\ntrue   mama\r\n```\r\n\r\n*Build New List*\r\n\r\n\tList&lt;String&gt; input = Arrays.asList(&quot;papi&quot;, &quot;polo&quot;, &quot;lopo&quot;, &quot;appi&quot;, &quot;abba&quot;, &quot;polo&quot;, &quot;mama&quot;);\r\n\tList&lt;String&gt; output = input.stream()\r\n\t\t\t.filter(s -&gt; ! isRepeating(s))\r\n\t\t\t.collect(Collectors.toList());\r\n\tSystem.out.println(output); // prints: [papi, polo, lopo, appi, polo]\r\n","title":"Return only repeated strings (not same order, same letters)","body":"<blockquote>\n  <p>doesn’t repeat themself in the same letters/numbers of letters</p>\n</blockquote>\n\n<p>Since all your inputs are 4 letters, you're basically saying that the first 2 letters cannot be the same as the last 2 letters.</p>\n\n<p>But let's assume strings can be any number of letters, which means we need to check any substring length that is divisible into the full string length, e.g. if string is 6 letters when substrings with length 2 and 3 needs to be checked, and if string is 7 letters we don't need to check anything.</p>\n\n<p>To check if 2 substrings have the same set of letters, but in a potentially different order, normalize the substrings by sorting the letters, e.g. <code>pam</code> -> <code>amp</code>. The use a <code>Set</code> to check if you've already seen that normalized substring.</p>\n\n<pre><code>public static boolean isRepeating(String input) {\n    int maxlen = input.length() / 2;\n    for (int len = 2; len &lt;= maxlen; len++)\n        if (input.length() % len == 0 &amp;&amp; isRepeating(input, len))\n            return true;\n    return false;\n}\n\nprivate static boolean isRepeating(String input, int len) {\n    Set&lt;String&gt; substrings = new HashSet&lt;&gt;();\n    for (int i = 0; i &lt; input.length(); i += len) {\n        char[] chars = input.substring(i, i + len).toCharArray();\n        Arrays.sort(chars);\n        String normalizedSubstring = new String(chars);\n        if (! substrings.add(normalizedSubstring))\n            return true;\n    }\n    return false;\n}\n</code></pre>\n\n<p><em>Test</em></p>\n\n<pre><code>List&lt;String&gt; input = Arrays.asList(\"papi\", \"polo\", \"lopo\", \"appi\", \"abba\", \"polo\", \"mama\");\nfor (String str : input)\n    System.out.printf(\"%-5s  %s%n\", isRepeating(str), str);\n</code></pre>\n\n<p><em>Output</em></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>false  papi\nfalse  polo\nfalse  lopo\nfalse  appi\ntrue   abba\nfalse  polo\ntrue   mama\n</code></pre>\n\n<p><em>Build New List</em></p>\n\n<pre><code>List&lt;String&gt; input = Arrays.asList(\"papi\", \"polo\", \"lopo\", \"appi\", \"abba\", \"polo\", \"mama\");\nList&lt;String&gt; output = input.stream()\n        .filter(s -&gt; ! isRepeating(s))\n        .collect(Collectors.toList());\nSystem.out.println(output); // prints: [papi, polo, lopo, appi, polo]\n</code></pre>\n"}],"owner":{"account_id":11915680,"reputation":25,"user_id":8719652,"display_name":"Ofer"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":96,"favorite_count":0,"down_vote_count":6,"up_vote_count":0,"closed_date":1583441141,"answer_count":3,"score":-6,"last_activity_date":1689852480,"creation_date":1583438550,"question_id":60553124,"body_markdown":"I have a list of strings:\r\n[‘papi’, ‘polo’, ‘lopo’, ‘appi, ‘abba’, ‘polo’, ‘mama’]\r\n\r\nHow can I return only:\r\n\r\n[‘papi’, ‘polo’, ‘lopo’, ‘appi’, ‘polo’]\r\n\r\nMeaning the only strings that doesn’t repeat themself in the same letters/numbers of letters.\r\nNeed an answer in java.\r\nAlso it needs to be efficient.\r\nThanks.","title":"Return only repeated strings (not same order, same letters)","body":"<p>I have a list of strings:\n[‘papi’, ‘polo’, ‘lopo’, ‘appi, ‘abba’, ‘polo’, ‘mama’]</p>\n\n<p>How can I return only:</p>\n\n<p>[‘papi’, ‘polo’, ‘lopo’, ‘appi’, ‘polo’]</p>\n\n<p>Meaning the only strings that doesn’t repeat themself in the same letters/numbers of letters.\nNeed an answer in java.\nAlso it needs to be efficient.\nThanks.</p>\n"},{"tags":["java","ip-address","cidr"],"answers":[{"comments":[{"owner":{"account_id":2532424,"reputation":41,"user_id":2200435,"display_name":"tubbs_uk"},"score":0,"creation_date":1689856846,"post_id":76729371,"comment_id":135274487,"body_markdown":"I see, so it seems in order to consider my &quot;20.108.106.0/22&quot; mask to be a _range_ of addresses, I need to choose the first address in the range ie. 20.108.104.0/22\n\nI&#39;ve updated my test and see that it works as expected, many thanks!","body":"I see, so it seems in order to consider my &quot;20.108.106.0/22&quot; mask to be a <i>range</i> of addresses, I need to choose the first address in the range ie. 20.108.104.0/22  I&#39;ve updated my test and see that it works as expected, many thanks!"}],"tags":[],"owner":{"account_id":29056481,"reputation":26,"user_id":22258167,"display_name":"kisa"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689852345,"creation_date":1689852345,"answer_id":76729371,"question_id":76728680,"body_markdown":"I believe the answer is actually the same as in the linked question.\r\nTo quote the relevant part:\r\n\r\n&gt; In summary, 10.90.6.14/30 is the same as 10.90.6.14 because the host is not zero. 10.90.6.12/30 is the subnet of 4 addresses because the host is zero. If you want to convert to the subnet, then use toPrefixBlock.\r\n\r\nWhich basically says a host is zero if the address is the first address in the subnet given by your CIDR mask.\r\n\r\nWhich means for your example: `20.108.104.0/22` would be the needed CIDR range.\r\n\r\nReading the linked question again, it seems like you can use the `toPrefixBlock()` method in your example code to get the wanted result without actually changing the supplied CIDR range.\r\n``` Java\r\n@Test\r\nfun testCidr() {\r\n    val cidr = IPAddressString(&quot;20.108.106.0/22&quot;).getAddress().toPrefixBlock()\r\n    val ip = IPAddressString(&quot;20.108.106.72&quot;).getAddress()\r\n    println(&quot;$ip is inside $cidr = ${cidr.contains(ip)}&quot;)\r\n}\r\n```\r\n\r\nIncidentally your `20.108.106.0/23` range works since `20.108.106.0` is the first address in that subnet.","title":"Sean Foley IPAddress library and containment inside CIDR","body":"<p>I believe the answer is actually the same as in the linked question.\nTo quote the relevant part:</p>\n<blockquote>\n<p>In summary, 10.90.6.14/30 is the same as 10.90.6.14 because the host is not zero. 10.90.6.12/30 is the subnet of 4 addresses because the host is zero. If you want to convert to the subnet, then use toPrefixBlock.</p>\n</blockquote>\n<p>Which basically says a host is zero if the address is the first address in the subnet given by your CIDR mask.</p>\n<p>Which means for your example: <code>20.108.104.0/22</code> would be the needed CIDR range.</p>\n<p>Reading the linked question again, it seems like you can use the <code>toPrefixBlock()</code> method in your example code to get the wanted result without actually changing the supplied CIDR range.</p>\n<pre><code>@Test\nfun testCidr() {\n    val cidr = IPAddressString(&quot;20.108.106.0/22&quot;).getAddress().toPrefixBlock()\n    val ip = IPAddressString(&quot;20.108.106.72&quot;).getAddress()\n    println(&quot;$ip is inside $cidr = ${cidr.contains(ip)}&quot;)\n}\n</code></pre>\n<p>Incidentally your <code>20.108.106.0/23</code> range works since <code>20.108.106.0</code> is the first address in that subnet.</p>\n"}],"owner":{"account_id":2532424,"reputation":41,"user_id":2200435,"display_name":"tubbs_uk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76729371,"answer_count":1,"score":0,"last_activity_date":1689852345,"creation_date":1689846871,"question_id":76728680,"body_markdown":"Similar to [this question][1] although not quite the same, I&#39;m having trouble understanding why the Sean Foley [IPAddress][2] library doesn&#39;t think that an IP address is contained inside a CIDR.\r\n\r\nFrom what I&#39;ve read, I thought that the CIDR/mask of &quot;20.108.106.0/22&quot; encompasses addresses in the range from 20.108.104.0 to 20.108.107.255. This range calculator I used [here][3] suggests it does.\r\n\r\nGiven that, I believe that the address 20.108.106.72 should be contained inside the CIDR range 20.108.106.0/22. This [CIDR range checker][4] seems to agree that it should as well.\r\n\r\nTrying out using the IPAddress library with some sample code doesn&#39;t seem to match this though. This code is Kotlin but should work the same as the Java:\r\n```\r\n@Test\r\nfun testCidr() {\r\n    val cidr = IPAddressString(&quot;20.108.106.0/22&quot;).getAddress()\r\n    val ip = IPAddressString(&quot;20.108.106.72&quot;).getAddress()\r\n    println(&quot;$ip is inside $cidr = ${cidr.contains(ip)}&quot;)\r\n}\r\n```\r\n```\r\nOutput:\r\n20.108.106.72 is inside 20.108.106.0/22 = false\r\n```\r\n\r\nI&#39;ve read the attached question, but I don&#39;t think my CIDR range is a non-zero host (eg. 20.108.106.72) because the last section is **zero**. and the other range checking tools I&#39;ve used seem to suggest it should work. I&#39;m sure this isn&#39;t a bug, but must be some misunderstanding on my part. I&#39;m trying to write code that will cope with any input of IP addresses in several forms eg. IPv6, single IP addresses, CIDR ranges which is why I was wanting to use a library like this one without needing to parse or understand the address first. I see that it works when I specify my range like &quot;20.108.106.0/**23**&quot; but again I don&#39;t understand why that would be. Thanks\r\n\r\n  [1]: https://stackoverflow.com/questions/65394800/java-ipaddress-library-and-non-zero-cidrs\r\n  [2]: https://github.com/seancfoley/IPAddress\r\n  [3]: https://www.ipaddressguide.com/cidr\r\n  [4]: https://tehnoblog.org/ip-tools/ip-address-in-cidr-range/","title":"Sean Foley IPAddress library and containment inside CIDR","body":"<p>Similar to <a href=\"https://stackoverflow.com/questions/65394800/java-ipaddress-library-and-non-zero-cidrs\">this question</a> although not quite the same, I'm having trouble understanding why the Sean Foley <a href=\"https://github.com/seancfoley/IPAddress\" rel=\"nofollow noreferrer\">IPAddress</a> library doesn't think that an IP address is contained inside a CIDR.</p>\n<p>From what I've read, I thought that the CIDR/mask of &quot;20.108.106.0/22&quot; encompasses addresses in the range from 20.108.104.0 to 20.108.107.255. This range calculator I used <a href=\"https://www.ipaddressguide.com/cidr\" rel=\"nofollow noreferrer\">here</a> suggests it does.</p>\n<p>Given that, I believe that the address 20.108.106.72 should be contained inside the CIDR range 20.108.106.0/22. This <a href=\"https://tehnoblog.org/ip-tools/ip-address-in-cidr-range/\" rel=\"nofollow noreferrer\">CIDR range checker</a> seems to agree that it should as well.</p>\n<p>Trying out using the IPAddress library with some sample code doesn't seem to match this though. This code is Kotlin but should work the same as the Java:</p>\n<pre><code>@Test\nfun testCidr() {\n    val cidr = IPAddressString(&quot;20.108.106.0/22&quot;).getAddress()\n    val ip = IPAddressString(&quot;20.108.106.72&quot;).getAddress()\n    println(&quot;$ip is inside $cidr = ${cidr.contains(ip)}&quot;)\n}\n</code></pre>\n<pre><code>Output:\n20.108.106.72 is inside 20.108.106.0/22 = false\n</code></pre>\n<p>I've read the attached question, but I don't think my CIDR range is a non-zero host (eg. 20.108.106.72) because the last section is <strong>zero</strong>. and the other range checking tools I've used seem to suggest it should work. I'm sure this isn't a bug, but must be some misunderstanding on my part. I'm trying to write code that will cope with any input of IP addresses in several forms eg. IPv6, single IP addresses, CIDR ranges which is why I was wanting to use a library like this one without needing to parse or understand the address first. I see that it works when I specify my range like &quot;20.108.106.0/<strong>23</strong>&quot; but again I don't understand why that would be. Thanks</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":1874763,"reputation":2020,"user_id":4352728,"accept_rate":50,"display_name":"Ye Win"},"score":0,"creation_date":1477377514,"post_id":40232865,"comment_id":67728390,"body_markdown":"are u using JDBC template or ...?","body":"are u using JDBC template or ...?"},{"owner":{"account_id":9065780,"reputation":173,"user_id":6750640,"accept_rate":22,"display_name":"user"},"score":0,"creation_date":1477377557,"post_id":40232865,"comment_id":67728411,"body_markdown":"I am using JPARepository for db operations","body":"I am using JPARepository for db operations"},{"owner":{"account_id":9065780,"reputation":173,"user_id":6750640,"accept_rate":22,"display_name":"user"},"score":0,"creation_date":1477409319,"post_id":40232865,"comment_id":67749987,"body_markdown":"So u mean if i have 10 update operation in the cmethod annotated with it,all the update will be committed at once and not one by one right ? Also what if i want to keep the auto commit off and explicitly perform commit after last update operation ?","body":"So u mean if i have 10 update operation in the cmethod annotated with it,all the update will be committed at once and not one by one right ? Also what if i want to keep the auto commit off and explicitly perform commit after last update operation ?"},{"owner":{"account_id":1874763,"reputation":2020,"user_id":4352728,"accept_rate":50,"display_name":"Ye Win"},"score":0,"creation_date":1477447340,"post_id":40232865,"comment_id":67767292,"body_markdown":"Yes, you are right, but be noted that @transnational also committed at  once at end of method and not one by one.","body":"Yes, you are right, but be noted that @transnational also committed at  once at end of method and not one by one."}],"answers":[{"tags":[],"owner":{"account_id":1874763,"reputation":2020,"user_id":4352728,"accept_rate":50,"display_name":"Ye Win"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1477377798,"creation_date":1477377798,"answer_id":40233051,"question_id":40232865,"body_markdown":"I would recommend you to use Programmatic approach for this case.\r\n\r\n**Programmatic transaction management:** This means that you have manage the transaction with the help of programming. That gives you extreme flexibility, but it is difficult to maintain. &lt;br/&gt;\r\nVs&lt;br/&gt;\r\n**Declarative transaction management:** This means you separate transaction management from the business code. You only use annotations or XML based configuration to manage the transactions.&lt;br/&gt;\r\n\r\nPerhaps, alternative way for your questions by Programmatic transaction management.\r\nEg. \r\n\r\n    /** DataSourceTransactionManager */\r\n        @Autowired\r\n        private PlatformTransactionManager txManager;\r\n    \r\n        public void yourMethod() {\r\n        try {\r\n         \r\n             // Start a manual transaction.\r\n             TransactionStatus status = getTransactionStatus();\r\n    \r\n             your code...\r\n    \t\t .....\r\n    \t\t .....\r\n    \r\n            //your condition \r\n            txManager.commit(status);\r\n            //your condition \r\n            txManager.rollback(status);\r\n    \r\n             } catch (YourException e) {\r\n            //your condition \r\n            txManager.rollback(status);\r\n\r\n            }       \r\n        }    \r\n    \r\n    /**\r\n         * getTransactionStatus\r\n         *\r\n         * @return TransactionStatus\r\n         */\r\n        private TransactionStatus getTransactionStatus() {\r\n            DefaultTransactionDefinition dtd = new DefaultTransactionDefinition();\r\n            dtd.setPropagationBehavior(TransactionDefinition.PROPAGATION_REQUIRES_NEW);\r\n            dtd.setIsolationLevel(TransactionDefinition.ISOLATION_READ_COMMITTED);\r\n            dtd.setReadOnly(false);\r\n    \r\n            return txManager.getTransaction(dtd);\r\n        }\r\n\r\n**Note:** It does not mean you need to always use one approach like Programmatic transaction management. I prefer mixed approach. Please use easy way like Declarative transaction for simple database services, otherwise, just control with Programmatic transaction in your services will save your logic easily.","title":"How to turn off auto commit and give explicit commit usign @transactional","body":"<p>I would recommend you to use Programmatic approach for this case.</p>\n\n<p><strong>Programmatic transaction management:</strong> This means that you have manage the transaction with the help of programming. That gives you extreme flexibility, but it is difficult to maintain. <br/>\nVs<br/>\n<strong>Declarative transaction management:</strong> This means you separate transaction management from the business code. You only use annotations or XML based configuration to manage the transactions.<br/></p>\n\n<p>Perhaps, alternative way for your questions by Programmatic transaction management.\nEg. </p>\n\n<pre><code>/** DataSourceTransactionManager */\n    @Autowired\n    private PlatformTransactionManager txManager;\n\n    public void yourMethod() {\n    try {\n\n         // Start a manual transaction.\n         TransactionStatus status = getTransactionStatus();\n\n         your code...\n         .....\n         .....\n\n        //your condition \n        txManager.commit(status);\n        //your condition \n        txManager.rollback(status);\n\n         } catch (YourException e) {\n        //your condition \n        txManager.rollback(status);\n\n        }       \n    }    \n\n/**\n     * getTransactionStatus\n     *\n     * @return TransactionStatus\n     */\n    private TransactionStatus getTransactionStatus() {\n        DefaultTransactionDefinition dtd = new DefaultTransactionDefinition();\n        dtd.setPropagationBehavior(TransactionDefinition.PROPAGATION_REQUIRES_NEW);\n        dtd.setIsolationLevel(TransactionDefinition.ISOLATION_READ_COMMITTED);\n        dtd.setReadOnly(false);\n\n        return txManager.getTransaction(dtd);\n    }\n</code></pre>\n\n<p><strong>Note:</strong> It does not mean you need to always use one approach like Programmatic transaction management. I prefer mixed approach. Please use easy way like Declarative transaction for simple database services, otherwise, just control with Programmatic transaction in your services will save your logic easily.</p>\n"},{"comments":[{"owner":{"account_id":9065780,"reputation":173,"user_id":6750640,"accept_rate":22,"display_name":"user"},"score":0,"creation_date":1477380628,"post_id":40233060,"comment_id":67730150,"body_markdown":"Do u mean @Transaction-al annotation ?","body":"Do u mean @Transaction-al annotation ?"},{"owner":{"account_id":9065780,"reputation":173,"user_id":6750640,"accept_rate":22,"display_name":"user"},"score":0,"creation_date":1477538251,"post_id":40233060,"comment_id":67810248,"body_markdown":"Thanks.But what if i want to off auto commit and do it explicitly ?","body":"Thanks.But what if i want to off auto commit and do it explicitly ?"},{"owner":{"account_id":4279009,"reputation":7633,"user_id":3498962,"display_name":"Essex Boy"},"score":0,"creation_date":1477553286,"post_id":40233060,"comment_id":67816008,"body_markdown":"Why would you want to do that? Let Spring do the work for you, especially for these &quot;cross-cutting&quot; concerns. :)","body":"Why would you want to do that? Let Spring do the work for you, especially for these &quot;cross-cutting&quot; concerns. :)"}],"tags":[],"owner":{"account_id":4279009,"reputation":7633,"user_id":3498962,"display_name":"Essex Boy"},"comment_count":3,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1477381456,"creation_date":1477377830,"answer_id":40233060,"question_id":40232865,"body_markdown":"You just need to put the @Transaction annotation around all the work you want to be committed:\r\n\r\n    @Autowired\r\n    private Manager1 manager1;\r\n    \r\n    @Autowired\r\n    private Manager2 manager2;\r\n    \r\n    @Transactional\r\n    public void doStuff() {\r\n       manager1.do();\r\n       manager2.do();\r\n    }\r\n\r\nEverything in method doStuff() will all be committed together, unless there is an exception thrown, in which case it will all be rolled back.\r\n\r\n\r\n\r\n","title":"How to turn off auto commit and give explicit commit usign @transactional","body":"<p>You just need to put the @Transaction annotation around all the work you want to be committed:</p>\n\n<pre><code>@Autowired\nprivate Manager1 manager1;\n\n@Autowired\nprivate Manager2 manager2;\n\n@Transactional\npublic void doStuff() {\n   manager1.do();\n   manager2.do();\n}\n</code></pre>\n\n<p>Everything in method doStuff() will all be committed together, unless there is an exception thrown, in which case it will all be rolled back.</p>\n"},{"tags":[],"owner":{"account_id":12259286,"reputation":101,"user_id":8947492,"display_name":"Yusuf BESTAS"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689852304,"creation_date":1689852304,"answer_id":76729364,"question_id":40232865,"body_markdown":"Auto-commit default mode it true.\r\n\r\nIn the case of a Transaction on a method, **it will override the auto-commit setting for that method(if auto-commit is on default mode)**. This means Transaction will set auto-commit false and queries executed within the method will be part of the same transaction. \r\n\r\nBut When you explicitly set auto-commit to true, you are telling Hibernate that you want to control when transactions are committed. And in this case, if needs to use the @Transacional method then you have to set auto-commit=false manually everywhere used in the transaction otherwise cause an exception Caused by: `java.sql.SQLException: Can&#39;t call commit when autocommit=true`\r\n\r\nSo, I think it would be much better directly delete a set of auto-commit. and just use the default mode unless use auto-commit=false mode.","title":"How to turn off auto commit and give explicit commit usign @transactional","body":"<p>Auto-commit default mode it true.</p>\n<p>In the case of a Transaction on a method, <strong>it will override the auto-commit setting for that method(if auto-commit is on default mode)</strong>. This means Transaction will set auto-commit false and queries executed within the method will be part of the same transaction.</p>\n<p>But When you explicitly set auto-commit to true, you are telling Hibernate that you want to control when transactions are committed. And in this case, if needs to use the @Transacional method then you have to set auto-commit=false manually everywhere used in the transaction otherwise cause an exception Caused by: <code>java.sql.SQLException: Can't call commit when autocommit=true</code></p>\n<p>So, I think it would be much better directly delete a set of auto-commit. and just use the default mode unless use auto-commit=false mode.</p>\n"}],"owner":{"account_id":9065780,"reputation":173,"user_id":6750640,"accept_rate":22,"display_name":"user"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3717,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":3,"score":4,"last_activity_date":1689852304,"creation_date":1477377093,"question_id":40232865,"body_markdown":"How can I turn off auto commit and give explicit commit using `@transactional`? \r\n\r\nI have multiple operations and I want them to get committed after all select and update are done. Reason being the select is done based on some field as null and this data is used somewhere and then update is done to some records. So before new records come, I have to change the field as to some value and avoid selection of new data i.e select only those record that got updated","title":"How to turn off auto commit and give explicit commit usign @transactional","body":"<p>How can I turn off auto commit and give explicit commit using <code>@transactional</code>? </p>\n\n<p>I have multiple operations and I want them to get committed after all select and update are done. Reason being the select is done based on some field as null and this data is used somewhere and then update is done to some records. So before new records come, I have to change the field as to some value and avoid selection of new data i.e select only those record that got updated</p>\n"},{"tags":["java","android","computer-vision","google-mlkit"],"owner":{"account_id":18956037,"reputation":53,"user_id":13832610,"display_name":"Hariharakrishnan Mannarsamy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689852166,"creation_date":1689852166,"question_id":76729350,"body_markdown":"I want to recognize text from different languages across globe in any image and translate to English.\r\nGoogle&#39;s ML KIT for vision supports 5 different Text recognizers for the 5 scripts: Latin, Devanagari, Chinese, Japanese and Korean.\r\nDo I need to use each of the text recognizers to check if the language in the image can be recognized by that Text recognizer?\r\nIs there a shorter way to detect the language of the text in an image?","title":"How to recognize the language of text in an image from a Java program for Android using Google&#39;s ML Kit?","body":"<p>I want to recognize text from different languages across globe in any image and translate to English.\nGoogle's ML KIT for vision supports 5 different Text recognizers for the 5 scripts: Latin, Devanagari, Chinese, Japanese and Korean.\nDo I need to use each of the text recognizers to check if the language in the image can be recognized by that Text recognizer?\nIs there a shorter way to detect the language of the text in an image?</p>\n"},{"tags":["java","gradle","code-coverage","jacoco"],"comments":[{"owner":{"account_id":245690,"reputation":14585,"user_id":519334,"accept_rate":86,"display_name":"k3b"},"score":0,"creation_date":1491985084,"post_id":38675853,"comment_id":73789663,"body_markdown":"Has anybody experience with [gradle-3.4+-jacoco-coverage](https://github.com/palantir/gradle-jacoco-coverage) if the new verify feature allows jacoco coverage report over more than one submodules?","body":"Has anybody experience with <a href=\"https://github.com/palantir/gradle-jacoco-coverage\" rel=\"nofollow noreferrer\">gradle-3.4+-jacoco-coverage</a> if the new verify feature allows jacoco coverage report over more than one submodules?"}],"answers":[{"comments":[{"owner":{"account_id":11899201,"reputation":382,"user_id":8707673,"display_name":"Edna Krabappel"},"score":0,"creation_date":1649066549,"post_id":38684229,"comment_id":126773537,"body_markdown":"In my case also JaCoCo works for app module, but not for all the other lib modules. After adding a task jacocoMerge(type: JacocoMerge){} to my app level build gradle, how can I trigger this?","body":"In my case also JaCoCo works for app module, but not for all the other lib modules. After adding a task jacocoMerge(type: JacocoMerge){} to my app level build gradle, how can I trigger this?"}],"tags":[],"owner":{"account_id":251211,"reputation":32622,"user_id":528428,"accept_rate":80,"display_name":"Benjamin Muschko"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1469969979,"creation_date":1469969979,"answer_id":38684229,"question_id":38675853,"body_markdown":"You will need to create a new task of type [JacocoMerge](https://docs.gradle.org/current/dsl/org.gradle.testing.jacoco.tasks.JacocoMerge.html) that aggregates the JaCoCo reports from all subprojects. See a similar discussion in this [post](https://discuss.gradle.org/t/merge-jacoco-coverage-reports-for-multiproject-setups/12100/6).","title":"Gradle jacoco coverage report with more than one submodule(s)?","body":"<p>You will need to create a new task of type <a href=\"https://docs.gradle.org/current/dsl/org.gradle.testing.jacoco.tasks.JacocoMerge.html\" rel=\"nofollow\">JacocoMerge</a> that aggregates the JaCoCo reports from all subprojects. See a similar discussion in this <a href=\"https://discuss.gradle.org/t/merge-jacoco-coverage-reports-for-multiproject-setups/12100/6\" rel=\"nofollow\">post</a>.</p>\n"},{"comments":[{"owner":{"account_id":6960680,"reputation":236,"user_id":5340219,"display_name":"Daniel Ocampo"},"score":0,"creation_date":1491949497,"post_id":38701149,"comment_id":73777378,"body_markdown":"Thanks for posting the solution. So far seems to be working well, but I have one issue: for some reason is not working for my app module. Did it happen to you? How did you configure the app module? I applied the jacoco plugin but it won&#39;t appear in the report. Thanks","body":"Thanks for posting the solution. So far seems to be working well, but I have one issue: for some reason is not working for my app module. Did it happen to you? How did you configure the app module? I applied the jacoco plugin but it won&#39;t appear in the report. Thanks"},{"owner":{"account_id":2590176,"reputation":1914,"user_id":2245051,"accept_rate":50,"display_name":"Jos&#233; Andias"},"score":9,"creation_date":1522767531,"post_id":38701149,"comment_id":86273722,"body_markdown":"According to the `README`, this plugin seems to be _considered obsolete as of Gradle 3.4_.","body":"According to the <code>README</code>, this plugin seems to be <i>considered obsolete as of Gradle 3.4</i>."},{"owner":{"account_id":6372402,"reputation":177,"user_id":4944448,"display_name":"Ravirajsinh Vaghela"},"score":1,"creation_date":1592892668,"post_id":38701149,"comment_id":110579229,"body_markdown":"but from gradle 6+ some of the JacocoReport properties are read only like additionalClassDirs, additionalSourceDirs, classDirectories, executionData ect. So in gradle 6+ it wont work. See https://docs.gradle.org/6.0/dsl/org.gradle.testing.jacoco.tasks.JacocoReport.html#N24096","body":"but from gradle 6+ some of the JacocoReport properties are read only like additionalClassDirs, additionalSourceDirs, classDirectories, executionData ect. So in gradle 6+ it wont work. See <a href=\"https://docs.gradle.org/6.0/dsl/org.gradle.testing.jacoco.tasks.JacocoReport.html#N24096\" rel=\"nofollow noreferrer\">docs.gradle.org/6.0/dsl/&hellip;</a>"}],"tags":[],"owner":{"account_id":245690,"reputation":14585,"user_id":519334,"accept_rate":86,"display_name":"k3b"},"comment_count":3,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1689852078,"creation_date":1470060935,"answer_id":38701149,"question_id":38675853,"body_markdown":"Finally I found this plugin: https://github.com/palantir/gradle-jacoco-coverage that did the job for me:\r\n\r\nroot gradle.build\r\n\r\n\tbuildscript {\r\n\t\trepositories {\r\n\t\t\tjcenter()\r\n\t\t}\r\n\t\tdependencies {\r\n\t\t\t// see https://jcenter.bintray.com/com/android/tools/build/gradle/\r\n\t\t\tclasspath &#39;com.android.tools.build:gradle:2.1.0&#39;\r\n\t\t\t// classpath &#39;com.android.tools.build:gradle:2.2.0-alpha1&#39;\r\n\r\n\t\t\t// https://github.com/palantir/gradle-jacoco-coverage\r\n\t\t\tclasspath &#39;com.palantir:jacoco-coverage:0.4.0&#39;\t\t\r\n\t\t}\r\n\t}\r\n\r\n\t// https://github.com/palantir/gradle-jacoco-coverage\r\n\tapply plugin: &#39;com.palantir.jacoco-full-report&#39;\r\n\r\nall subprojects that has\r\n\r\n    apply plugin: &#39;jacoco&#39;\r\n\r\nare included in the report.\r\n\r\n[Update 2023-07-20]\r\n\r\nNow there is a new gradle plugin that does the job. Therefore i changed the accepted answer\r\n","title":"Gradle jacoco coverage report with more than one submodule(s)?","body":"<p>Finally I found this plugin: <a href=\"https://github.com/palantir/gradle-jacoco-coverage\" rel=\"nofollow noreferrer\">https://github.com/palantir/gradle-jacoco-coverage</a> that did the job for me:</p>\n<p>root gradle.build</p>\n<pre><code>buildscript {\n    repositories {\n        jcenter()\n    }\n    dependencies {\n        // see https://jcenter.bintray.com/com/android/tools/build/gradle/\n        classpath 'com.android.tools.build:gradle:2.1.0'\n        // classpath 'com.android.tools.build:gradle:2.2.0-alpha1'\n\n        // https://github.com/palantir/gradle-jacoco-coverage\n        classpath 'com.palantir:jacoco-coverage:0.4.0'      \n    }\n}\n\n// https://github.com/palantir/gradle-jacoco-coverage\napply plugin: 'com.palantir.jacoco-full-report'\n</code></pre>\n<p>all subprojects that has</p>\n<pre><code>apply plugin: 'jacoco'\n</code></pre>\n<p>are included in the report.</p>\n<p>[Update 2023-07-20]</p>\n<p>Now there is a new gradle plugin that does the job. Therefore i changed the accepted answer</p>\n"},{"tags":[],"owner":{"account_id":11755335,"reputation":21,"user_id":8603211,"display_name":"Bal&#225;zs H&#225;morszky"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1505305056,"creation_date":1505305056,"answer_id":46197372,"question_id":38675853,"body_markdown":"One possible solution (with some sonar specific parts):\r\n\r\n    def getJacocoMergeTask(Project proj){\r\n        def jmClosure =  {\r\n            doFirst {\r\n                logger.info &quot;${path} started&quot;\r\n                executionData.each { ed -&gt;\r\n                    logger.info &quot;${path} data: ${ed}&quot;\r\n                }\r\n            }\r\n            onlyIf {\r\n                executionData != null &amp;&amp; !executionData.isEmpty()\r\n            }\r\n        }\r\n    \r\n        def jacocoMerge = null\r\n        if(!proj.tasks.findByName(&#39;jacocoMerge&#39;)){\r\n    \r\n            jacocoMerge = proj.tasks.create(&#39;jacocoMerge&#39;, JacocoMerge.class)\r\n            jacocoMerge.configure jmClosure\r\n\r\n            // sonar specific part\r\n            proj.rootProject.tasks[&quot;sonarqube&quot;].mustRunAfter jacocoMerge\r\n    \r\n            proj.sonarqube {\r\n                properties {\r\n                    property &quot;sonar.jacoco.reportPaths&quot;, jacocoMerge.destinationFile.absolutePath\r\n                }\r\n            }\r\n            // end of sonar specific part\r\n\r\n            logger.info &quot;${jacocoMerge.path} created&quot;\r\n        } else {\r\n            jacocoMerge = proj.tasks[&quot;jacocoMerge&quot;]\r\n        }\r\n        jacocoMerge\r\n    }\r\n    \r\n    \r\n    afterEvaluate { project -&gt;\r\n        def jacocoMerge = getJacocoMergeTask(project)\r\n    \r\n        project.tasks.withType(Test) { task -&gt;\r\n            logger.info &quot;${jacocoMerge.path} cfg: ${task.path}&quot;\r\n    \r\n            task.finalizedBy jacocoMerge\r\n            jacocoMerge.dependsOn task\r\n    \r\n            task.doLast {\r\n                logger.info &quot;${jacocoMerge.path} executionData ${task.path}&quot;\r\n                jacocoMerge.executionData task\r\n            }\r\n    \r\n            def cfg = configurations.getByName(&quot;${task.name}Runtime&quot;)\r\n            logger.info &quot;${project.path} process config: ${cfg.name}&quot;\r\n    \r\n            cfg.getAllDependencies().withType(ProjectDependency.class).each { pd -&gt;\r\n                def depProj = pd.dependencyProject\r\n                logger.info &quot;${task.path} dependsOn ${depProj.path}&quot;\r\n                def jm = getJacocoMergeTask(depProj)\r\n    \r\n                task.finalizedBy jm\r\n                jm.dependsOn task\r\n    \r\n                task.doLast {\r\n                    logger.info &quot;${jm.path} executionData ${task.path}&quot;\r\n                    jm.executionData task\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\nThis will merge all the executionData from all the projects, that used a certain project during testing as a dependency.","title":"Gradle jacoco coverage report with more than one submodule(s)?","body":"<p>One possible solution (with some sonar specific parts):</p>\n\n<pre><code>def getJacocoMergeTask(Project proj){\n    def jmClosure =  {\n        doFirst {\n            logger.info \"${path} started\"\n            executionData.each { ed -&gt;\n                logger.info \"${path} data: ${ed}\"\n            }\n        }\n        onlyIf {\n            executionData != null &amp;&amp; !executionData.isEmpty()\n        }\n    }\n\n    def jacocoMerge = null\n    if(!proj.tasks.findByName('jacocoMerge')){\n\n        jacocoMerge = proj.tasks.create('jacocoMerge', JacocoMerge.class)\n        jacocoMerge.configure jmClosure\n\n        // sonar specific part\n        proj.rootProject.tasks[\"sonarqube\"].mustRunAfter jacocoMerge\n\n        proj.sonarqube {\n            properties {\n                property \"sonar.jacoco.reportPaths\", jacocoMerge.destinationFile.absolutePath\n            }\n        }\n        // end of sonar specific part\n\n        logger.info \"${jacocoMerge.path} created\"\n    } else {\n        jacocoMerge = proj.tasks[\"jacocoMerge\"]\n    }\n    jacocoMerge\n}\n\n\nafterEvaluate { project -&gt;\n    def jacocoMerge = getJacocoMergeTask(project)\n\n    project.tasks.withType(Test) { task -&gt;\n        logger.info \"${jacocoMerge.path} cfg: ${task.path}\"\n\n        task.finalizedBy jacocoMerge\n        jacocoMerge.dependsOn task\n\n        task.doLast {\n            logger.info \"${jacocoMerge.path} executionData ${task.path}\"\n            jacocoMerge.executionData task\n        }\n\n        def cfg = configurations.getByName(\"${task.name}Runtime\")\n        logger.info \"${project.path} process config: ${cfg.name}\"\n\n        cfg.getAllDependencies().withType(ProjectDependency.class).each { pd -&gt;\n            def depProj = pd.dependencyProject\n            logger.info \"${task.path} dependsOn ${depProj.path}\"\n            def jm = getJacocoMergeTask(depProj)\n\n            task.finalizedBy jm\n            jm.dependsOn task\n\n            task.doLast {\n                logger.info \"${jm.path} executionData ${task.path}\"\n                jm.executionData task\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>This will merge all the executionData from all the projects, that used a certain project during testing as a dependency.</p>\n"},{"tags":[],"owner":{"account_id":460397,"reputation":1881,"user_id":861451,"display_name":"Le Duc Duy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1555142947,"creation_date":1555142947,"answer_id":55663373,"question_id":38675853,"body_markdown":"You can create a merged report without merged `exec` file. Create a new task to the root of `build.gradle` with following content.\r\n\r\n    task jacocoReport(type: JacocoReport) {\r\n        for (p in allprojects) {\r\n            def testTask = p.tasks.findByName(&quot;test&quot;)\r\n            if (testTask != null)\r\n                dependsOn(testTask)\r\n    \r\n            executionData.setFrom(file(&quot;${p.buildDir}/jacoco/test.exec&quot;))\r\n            classDirectories.from(file(&quot;${p.buildDir}/classes/java/main&quot;))\r\n        }\r\n    }\r\n\r\n","title":"Gradle jacoco coverage report with more than one submodule(s)?","body":"<p>You can create a merged report without merged <code>exec</code> file. Create a new task to the root of <code>build.gradle</code> with following content.</p>\n\n<pre><code>task jacocoReport(type: JacocoReport) {\n    for (p in allprojects) {\n        def testTask = p.tasks.findByName(\"test\")\n        if (testTask != null)\n            dependsOn(testTask)\n\n        executionData.setFrom(file(\"${p.buildDir}/jacoco/test.exec\"))\n        classDirectories.from(file(\"${p.buildDir}/classes/java/main\"))\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1746755,"reputation":1408,"user_id":1596770,"accept_rate":80,"display_name":"aarbor"},"score":0,"creation_date":1613522523,"post_id":58879245,"comment_id":117099144,"body_markdown":"This plugin was long overdue and has made my setup much simpler! Note to viewers, the syntax has slightly changed from the above, so check latest documentation","body":"This plugin was long overdue and has made my setup much simpler! Note to viewers, the syntax has slightly changed from the above, so check latest documentation"},{"owner":{"account_id":6393998,"reputation":301,"user_id":4959062,"display_name":"Wei Yuan"},"score":0,"creation_date":1613574647,"post_id":58879245,"comment_id":117117297,"body_markdown":"@aarbor thanks for that, I&#39;ve made the changes to reflect latest version","body":"@aarbor thanks for that, I&#39;ve made the changes to reflect latest version"}],"tags":[],"owner":{"account_id":6393998,"reputation":301,"user_id":4959062,"display_name":"Wei Yuan"},"comment_count":2,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1613574616,"creation_date":1573828694,"answer_id":58879245,"question_id":38675853,"body_markdown":"This works for me\r\n\r\n    plugins {\r\n        id &#39;org.kordamp.gradle.jacoco&#39; version &#39;0.43.0&#39;\r\n    }\r\n    \r\n    config {\r\n        coverage {\r\n            jacoco {\r\n                enabled\r\n                aggregateExecFile\r\n                aggregateReportHtmlFile\r\n                aggregateReportXmlFile\r\n                additionalSourceDirs\r\n                additionalClassDirs\r\n            }\r\n        }\r\n    }\r\n\r\nhttps://kordamp.org/kordamp-gradle-plugins/#_org_kordamp_gradle_jacoco","title":"Gradle jacoco coverage report with more than one submodule(s)?","body":"<p>This works for me</p>\n<pre><code>plugins {\n    id 'org.kordamp.gradle.jacoco' version '0.43.0'\n}\n\nconfig {\n    coverage {\n        jacoco {\n            enabled\n            aggregateExecFile\n            aggregateReportHtmlFile\n            aggregateReportXmlFile\n            additionalSourceDirs\n            additionalClassDirs\n        }\n    }\n}\n</code></pre>\n<p><a href=\"https://kordamp.org/kordamp-gradle-plugins/#_org_kordamp_gradle_jacoco\" rel=\"nofollow noreferrer\">https://kordamp.org/kordamp-gradle-plugins/#_org_kordamp_gradle_jacoco</a></p>\n"}],"owner":{"account_id":245690,"reputation":14585,"user_id":519334,"accept_rate":86,"display_name":"k3b"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23991,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":58879245,"answer_count":5,"score":13,"last_activity_date":1689852078,"creation_date":1469894508,"question_id":38675853,"body_markdown":"Does anybody know how to configure a gradle file for java jacoco report\r\nthat contain codecoverage of more than one gradle submodule?\r\n\r\nmy current approach only shows codecoverage of the current submodule but not\r\ncodecoverage of a sibling-submodul.\r\n\r\nI have this project structure\r\n\r\n    - build.gradle (1)\r\n\t- corelib/\r\n\t\t- build.gradle (2)\r\n\t\t- src/main/java/package/Core.java\r\n\t- extlib/\r\n\t\t- build.gradle (3)\r\n\t\t- src/main/java/package/Ext.java\r\n\t\t- src/test/java/package/Integrationtest.java\r\n\r\nwhen i execute `gradlew :extlib:check :extlib:jacocoTestReport` the junit-test &quot;Integrationtest.java&quot;\r\nis executed and a codecoverage report is generated that does not contain codecoverage for corelib classes like Core.java \r\n\r\nThe result should include the codecoverage of Ext.java and Core.java\r\n\r\nI already read\r\n\r\n* https://docs.gradle.org/current/userguide/jacoco_plugin.html \r\n* and https://stackoverflow.com/questions/29887805/filter-jacoco-coverage-reports-with-gradle\r\n\r\nbut found no clues\r\n\r\n\r\nhere is content of the gradle files\r\n\r\n\t// root build.gradle (1)\r\n\t// Top-level build file where you can add configuration options \r\n    // common to all sub-projects/modules.\r\n\tbuildscript {\r\n\t\trepositories {\r\n\t\t\tjcenter()\r\n\t\t}\r\n\t\tdependencies {\r\n\t\t\tclasspath &#39;com.android.tools.build:gradle:2.1.0&#39;\r\n\t\t}\r\n\t}\r\n\tallprojects {\r\n\t\trepositories {\r\n\t\t\tjcenter()\r\n\t\t}\r\n\t}\r\n\r\n------------\r\n\r\n\t// build.gradle (2) subproject build file for corelib.\r\n\tapply plugin: &#39;java&#39;\r\n\tapply plugin: &#39;jacoco&#39;\r\n\r\n\tdependencies {\r\n\t}\r\n\r\n\tjacocoTestReport {\r\n\t\treports {\r\n\t\t\txml.enabled true\r\n\t\t\thtml.enabled true\r\n\t\t}\r\n\t}\r\n\t\r\n------------\r\n\r\n\t// build.gradle (3) subproject build file for extlib.\r\n\tapply plugin: &#39;java&#39;\r\n\tapply plugin: &#39;jacoco&#39;\r\n\r\n\tdependencies {\r\n\t\tcompile project(&#39;:corelib&#39;)\r\n\t\ttestCompile &#39;junit:junit:4.11&#39;\r\n\t\t\r\n\t\t// this does not compile\r\n\t\t// jacocoTestReport project(&#39;:pixymeta-core-lib&#39;)\r\n\t}\r\n\r\n\tjacocoTestReport {\r\n\t\treports {\r\n\t\t\txml.enabled true\r\n\t\t\thtml.enabled true\r\n\t\t}\r\n\t}\r\n\r\n\t// workaround because android-studio does not make the test resources available\r\n\t// see https://code.google.com/p/android/issues/detail?id=64887#c13\r\n\ttask copyTestResources(type: Copy) {\r\n\t\tfrom sourceSets.test.resources\r\n\t\tinto sourceSets.test.output.classesDir\r\n\t}\r\n\tprocessTestResources.dependsOn copyTestResources\r\n\r\n---\r\n\r\n[Update 2016-08-01]\r\n\r\nthanks to @Benjamin Muschko i also tried in the root gradle file\r\n\r\n\t// https://discuss.gradle.org/t/merge-jacoco-coverage-reports-for-multiproject-setups/12100/6\r\n\t// https://docs.gradle.org/current/dsl/org.gradle.testing.jacoco.tasks.JacocoMerge.html\r\n\ttask jacocoMerge(type: JacocoMerge) {\r\n\t   subprojects.each { subproject -&gt;\r\n\t\t  executionData subproject.tasks.withType(Test)\r\n\t   } \r\n\t   \r\n\t}\r\n\r\nbut got error message (with gradle-2.14)\r\n\r\n\t* What went wrong:\r\n\tSome problems were found with the configuration of task &#39;:jacocoMerge&#39;.\r\n\t&gt; No value has been specified for property &#39;jacocoClasspath&#39;.\r\n\t&gt; No value has been specified for property &#39;executionData&#39;.\r\n\t&gt; No value has been specified for property &#39;destinationFile&#39;.\r\n\r\n---\r\n\r\nthere is also the gradle plugin https://github.com/paveldudka/JacocoEverywhere where i have asked for mulit-submodule support https://github.com/paveldudka/JacocoEverywhere/issues/16\r\n\r\n[update 2016-08-01] i found a working solution based on https://github.com/palantir/gradle-jacoco-coverage\r\n\r\nSee my own answer below\r\n","title":"Gradle jacoco coverage report with more than one submodule(s)?","body":"<p>Does anybody know how to configure a gradle file for java jacoco report\nthat contain codecoverage of more than one gradle submodule?</p>\n\n<p>my current approach only shows codecoverage of the current submodule but not\ncodecoverage of a sibling-submodul.</p>\n\n<p>I have this project structure</p>\n\n<pre><code>- build.gradle (1)\n- corelib/\n    - build.gradle (2)\n    - src/main/java/package/Core.java\n- extlib/\n    - build.gradle (3)\n    - src/main/java/package/Ext.java\n    - src/test/java/package/Integrationtest.java\n</code></pre>\n\n<p>when i execute <code>gradlew :extlib:check :extlib:jacocoTestReport</code> the junit-test \"Integrationtest.java\"\nis executed and a codecoverage report is generated that does not contain codecoverage for corelib classes like Core.java </p>\n\n<p>The result should include the codecoverage of Ext.java and Core.java</p>\n\n<p>I already read</p>\n\n<ul>\n<li><a href=\"https://docs.gradle.org/current/userguide/jacoco_plugin.html\" rel=\"noreferrer\">https://docs.gradle.org/current/userguide/jacoco_plugin.html</a> </li>\n<li>and <a href=\"https://stackoverflow.com/questions/29887805/filter-jacoco-coverage-reports-with-gradle\">Filter JaCoCo coverage reports with Gradle</a></li>\n</ul>\n\n<p>but found no clues</p>\n\n<p>here is content of the gradle files</p>\n\n<pre><code>// root build.gradle (1)\n// Top-level build file where you can add configuration options \n// common to all sub-projects/modules.\nbuildscript {\n    repositories {\n        jcenter()\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:2.1.0'\n    }\n}\nallprojects {\n    repositories {\n        jcenter()\n    }\n}\n</code></pre>\n\n<hr>\n\n<pre><code>// build.gradle (2) subproject build file for corelib.\napply plugin: 'java'\napply plugin: 'jacoco'\n\ndependencies {\n}\n\njacocoTestReport {\n    reports {\n        xml.enabled true\n        html.enabled true\n    }\n}\n</code></pre>\n\n<hr>\n\n<pre><code>// build.gradle (3) subproject build file for extlib.\napply plugin: 'java'\napply plugin: 'jacoco'\n\ndependencies {\n    compile project(':corelib')\n    testCompile 'junit:junit:4.11'\n\n    // this does not compile\n    // jacocoTestReport project(':pixymeta-core-lib')\n}\n\njacocoTestReport {\n    reports {\n        xml.enabled true\n        html.enabled true\n    }\n}\n\n// workaround because android-studio does not make the test resources available\n// see https://code.google.com/p/android/issues/detail?id=64887#c13\ntask copyTestResources(type: Copy) {\n    from sourceSets.test.resources\n    into sourceSets.test.output.classesDir\n}\nprocessTestResources.dependsOn copyTestResources\n</code></pre>\n\n<hr>\n\n<p>[Update 2016-08-01]</p>\n\n<p>thanks to @Benjamin Muschko i also tried in the root gradle file</p>\n\n<pre><code>// https://discuss.gradle.org/t/merge-jacoco-coverage-reports-for-multiproject-setups/12100/6\n// https://docs.gradle.org/current/dsl/org.gradle.testing.jacoco.tasks.JacocoMerge.html\ntask jacocoMerge(type: JacocoMerge) {\n   subprojects.each { subproject -&gt;\n      executionData subproject.tasks.withType(Test)\n   } \n\n}\n</code></pre>\n\n<p>but got error message (with gradle-2.14)</p>\n\n<pre><code>* What went wrong:\nSome problems were found with the configuration of task ':jacocoMerge'.\n&gt; No value has been specified for property 'jacocoClasspath'.\n&gt; No value has been specified for property 'executionData'.\n&gt; No value has been specified for property 'destinationFile'.\n</code></pre>\n\n<hr>\n\n<p>there is also the gradle plugin <a href=\"https://github.com/paveldudka/JacocoEverywhere\" rel=\"noreferrer\">https://github.com/paveldudka/JacocoEverywhere</a> where i have asked for mulit-submodule support <a href=\"https://github.com/paveldudka/JacocoEverywhere/issues/16\" rel=\"noreferrer\">https://github.com/paveldudka/JacocoEverywhere/issues/16</a></p>\n\n<p>[update 2016-08-01] i found a working solution based on <a href=\"https://github.com/palantir/gradle-jacoco-coverage\" rel=\"noreferrer\">https://github.com/palantir/gradle-jacoco-coverage</a></p>\n\n<p>See my own answer below</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":339859,"reputation":13331,"user_id":669576,"accept_rate":85,"display_name":"001"},"score":0,"creation_date":1673557087,"post_id":75101694,"comment_id":132532441,"body_markdown":"`(int)Math.pow(10,n-1)` will produce integer overflow for large values of `n`. For example: `(int)Math.pow(10, 10)` yields `2147483647` because of the conversion from `double` to `int`.","body":"<code>(int)Math.pow(10,n-1)</code> will produce integer overflow for large values of <code>n</code>. For example: <code>(int)Math.pow(10, 10)</code> yields <code>2147483647</code> because of the conversion from <code>double</code> to <code>int</code>."}],"answers":[{"tags":[],"owner":{"account_id":16075669,"reputation":36,"user_id":11625276,"display_name":"Smooth_ops"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689851700,"creation_date":1689851700,"answer_id":76729290,"question_id":75101694,"body_markdown":"In the first solution, you print a string. In the second solution, you print an integer. \r\nWhen `n` is huge, this integer which is of the order of 10 to the power of `n` will increase exponentially and eventually create a runtime exception due to memory overflow.\r\n","title":"CODECHEF problem : same output , but one showing wrong submission","body":"<p>In the first solution, you print a string. In the second solution, you print an integer.\nWhen <code>n</code> is huge, this integer which is of the order of 10 to the power of <code>n</code> will increase exponentially and eventually create a runtime exception due to memory overflow.</p>\n"}],"owner":{"account_id":27513472,"reputation":1,"user_id":20994917,"display_name":"varsha Sharma"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1689851700,"creation_date":1673553615,"question_id":75101694,"body_markdown":"BOTH code output will be same for any testcase , still CODE 1 submitted successfully and CODE 2 not , why??\r\n\r\n**CODE 1:**\r\n        \r\n```\r\nint t = in.nextInt();\r\nwhile((t--)&gt;0){\r\n    int n = in.nextInt();\r\n    for(int j=0;j&lt;n;j++){\r\n        if(j==0 || j==n-1)\r\n            System.out.print(&quot;1&quot;);\r\n        else\r\n           System.out.print(&quot;0&quot;);\r\n    }\r\n    System.out.print(&quot;\\n&quot;);\r\n```\r\n\r\n**CODE 2:**\r\n\r\n```\r\nint t = in.nextInt();\r\nwhile((t--)&gt;0){\r\n    int n = in.nextInt();\r\n    System.out.println((int)Math.pow(10,n-1)+1);\r\n}\r\n```\r\n\r\nSample test case :\r\n\r\n    2\r\n    4\r\n    3\r\n\r\nOutput:\r\n\r\n    1001\r\n    101\r\n\r\nproblem link : https://www.codechef.com/problems/ZOOZ\r\n\r\n\r\n\r\n\r\nPLEASE OPT ME OUT , if you got the logic where i&#39;m wrong.\r\n\r\n","title":"CODECHEF problem : same output , but one showing wrong submission","body":"<p>BOTH code output will be same for any testcase , still CODE 1 submitted successfully and CODE 2 not , why??</p>\n<p><strong>CODE 1:</strong></p>\n<pre><code>int t = in.nextInt();\nwhile((t--)&gt;0){\n    int n = in.nextInt();\n    for(int j=0;j&lt;n;j++){\n        if(j==0 || j==n-1)\n            System.out.print(&quot;1&quot;);\n        else\n           System.out.print(&quot;0&quot;);\n    }\n    System.out.print(&quot;\\n&quot;);\n</code></pre>\n<p><strong>CODE 2:</strong></p>\n<pre><code>int t = in.nextInt();\nwhile((t--)&gt;0){\n    int n = in.nextInt();\n    System.out.println((int)Math.pow(10,n-1)+1);\n}\n</code></pre>\n<p>Sample test case :</p>\n<pre><code>2\n4\n3\n</code></pre>\n<p>Output:</p>\n<pre><code>1001\n101\n</code></pre>\n<p>problem link : <a href=\"https://www.codechef.com/problems/ZOOZ\" rel=\"nofollow noreferrer\">https://www.codechef.com/problems/ZOOZ</a></p>\n<p>PLEASE OPT ME OUT , if you got the logic where i'm wrong.</p>\n"},{"tags":["javascript","java","android","react-native","expo"],"owner":{"account_id":25959079,"reputation":1,"user_id":19675991,"display_name":"Rotwo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689851453,"creation_date":1689787836,"question_id":76723863,"body_markdown":"I&#39;ve tried to build my application using [EAS][1]\r\n```console\r\neas build --platform android --local\r\n```\r\nIt keeps giving me errors that make no sense.&lt;br&gt;\r\nHow can I install the compatible SDK versions and gradle?&lt;br&gt;\r\n\r\nI&#39;ve tried to do `eas build --platform android --local`\r\n\r\nI was expecting to get an Android application bundle / apk\r\n\r\n\r\n  [1]: https://docs.expo.dev/build/introduction/","title":"How to build an Expo application on Linux locally","body":"<p>I've tried to build my application using <a href=\"https://docs.expo.dev/build/introduction/\" rel=\"nofollow noreferrer\">EAS</a></p>\n<pre><code>eas build --platform android --local\n</code></pre>\n<p>It keeps giving me errors that make no sense.<br>\nHow can I install the compatible SDK versions and gradle?<br></p>\n<p>I've tried to do <code>eas build --platform android --local</code></p>\n<p>I was expecting to get an Android application bundle / apk</p>\n"},{"tags":["java","apache-kafka"],"comments":[{"owner":{"account_id":8224393,"reputation":684,"user_id":6187114,"display_name":"nitinsridar"},"score":0,"creation_date":1605162501,"post_id":57825222,"comment_id":114568147,"body_markdown":"@Gary Russell Can you please answer this, even I&#39;m seeing this error","body":"@Gary Russell Can you please answer this, even I&#39;m seeing this error"},{"owner":{"account_id":2651152,"reputation":9574,"user_id":2292791,"accept_rate":58,"display_name":"MaatDeamon"},"score":0,"creation_date":1605162768,"post_id":57825222,"comment_id":114568221,"body_markdown":"What’s the exact question ?","body":"What’s the exact question ?"},{"owner":{"account_id":8224393,"reputation":684,"user_id":6187114,"display_name":"nitinsridar"},"score":0,"creation_date":1605163328,"post_id":57825222,"comment_id":114568368,"body_markdown":"I have seen the same error... What you have seen?","body":"I have seen the same error... What you have seen?"},{"owner":{"account_id":2651152,"reputation":9574,"user_id":2292791,"accept_rate":58,"display_name":"MaatDeamon"},"score":0,"creation_date":1605163378,"post_id":57825222,"comment_id":114568387,"body_markdown":"Unfortunately I never really solved the problem and somehow with the update of Kafka the problem disappeared!","body":"Unfortunately I never really solved the problem and somehow with the update of Kafka the problem disappeared!"},{"owner":{"account_id":2651152,"reputation":9574,"user_id":2292791,"accept_rate":58,"display_name":"MaatDeamon"},"score":1,"creation_date":1605163425,"post_id":57825222,"comment_id":114568400,"body_markdown":"Also it is not an error, not even a warning but info. So best ignore it unless u have a real problem","body":"Also it is not an error, not even a warning but info. So best ignore it unless u have a real problem"},{"owner":{"account_id":8224393,"reputation":684,"user_id":6187114,"display_name":"nitinsridar"},"score":0,"creation_date":1605163433,"post_id":57825222,"comment_id":114568403,"body_markdown":"Do you how to restart consumer automatically upon failure?","body":"Do you how to restart consumer automatically upon failure?"}],"answers":[{"tags":[],"owner":{"account_id":958948,"reputation":21268,"user_id":983722,"accept_rate":79,"display_name":"Dennis Jaheruddin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1626955262,"creation_date":1626955262,"answer_id":68484479,"question_id":57825222,"body_markdown":"As mentioned in the comments this was resolved by updating Kafka.\r\n\r\n(As far as it was a problem at all for this user). If you have a problem with additional symptoms it is likely a different situation so please use a different question.","title":"Kafka FETCH_SESSION_ID_NOT_FOUND often seen in logs","body":"<p>As mentioned in the comments this was resolved by updating Kafka.</p>\n<p>(As far as it was a problem at all for this user). If you have a problem with additional symptoms it is likely a different situation so please use a different question.</p>\n"},{"tags":[],"owner":{"account_id":9085119,"reputation":77,"user_id":6763444,"accept_rate":25,"display_name":"fallen.lu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689851182,"creation_date":1689851182,"answer_id":76729225,"question_id":57825222,"body_markdown":"Maybe the number of your consumer threads exceeds the number of partitions. In this case, you can use &#39;kafka-consumer-groups.sh&#39; to list all your consumer groups and check if there are any partitions that have not been consumed.","title":"Kafka FETCH_SESSION_ID_NOT_FOUND often seen in logs","body":"<p>Maybe the number of your consumer threads exceeds the number of partitions. In this case, you can use 'kafka-consumer-groups.sh' to list all your consumer groups and check if there are any partitions that have not been consumed.</p>\n"}],"owner":{"account_id":2651152,"reputation":9574,"user_id":2292791,"accept_rate":58,"display_name":"MaatDeamon"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":5801,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"answer_count":2,"score":10,"last_activity_date":1689851182,"creation_date":1567785291,"question_id":57825222,"body_markdown":"Running Kafka 2.3.0, Kafka client 2.1.1, and my brokers keep outputting the following logs:\r\n\r\n```\r\n[2019-09-06 15:18:03,596] INFO [ReplicaFetcher replicaId=1, leaderId=0, fetcherId=0] Node 0 was unable to process the fetch request with (sessionId=1458702821, epoch=538): FETCH_SESSION_ID_NOT_FOUND. (org.apache.kafka.clients.FetchSessionHandler)\r\n[2019-09-06 15:21:11,145] INFO [GroupMetadataManager brokerId=1] Removed 0 expired offsets in 1 milliseconds. (kafka.coordinator.group.GroupMetadataManager)\r\n[2019-09-06 15:22:33,737] INFO [ReplicaFetcher replicaId=1, leaderId=0, fetcherId=0] Node 0 was unable to process the fetch request with (sessionId=1917353656, epoch=538): FETCH_SESSION_ID_NOT_FOUND. (org.apache.kafka.clients.FetchSessionHandler)\r\n[2019-09-06 15:27:03,768] INFO [ReplicaFetcher replicaId=1, leaderId=0, fetcherId=0] Node 0 was unable to process the fetch request with (sessionId=404608404, epoch=538): FETCH_SESSION_ID_NOT_FOUND. (org.apache.kafka.clients.FetchSessionHandler)\r\n[2019-09-06 15:31:11,145] INFO [GroupMetadataManager brokerId=1] Removed 0 expired offsets in 1 milliseconds. (kafka.coordinator.group.GroupMetadataManager)\r\n[2019-09-06 15:31:34,313] INFO [ReplicaFetcher replicaId=1, leaderId=0, fetcherId=0] Node 0 was unable to process the fetch request with (sessionId=1690401868, epoch=539): FETCH_SESSION_ID_NOT_FOUND. (org.apache.kafka.clients.FetchSessionHandler)\r\n[2019-09-06 15:36:04,404] INFO [ReplicaFetcher replicaId=1, leaderId=0, fetcherId=0] Node 0 was unable to process the fetch request with (sessionId=1167288700, epoch=538): FETCH_SESSION_ID_NOT_FOUND. (org.apache.kafka.clients.FetchSessionHandler)\r\n[2019-09-06 15:40:34,409] INFO [ReplicaFetcher replicaId=1, leaderId=0, fetcherId=0] Node 0 was unable to process the fetch request with (sessionId=2135343705, epoch=538): FETCH_SESSION_ID_NOT_FOUND. (org.apache.kafka.clients.FetchSessionHandler)\r\n[2019-09-06 15:41:11,145] INFO [GroupMetadataManager brokerId=1] Removed 0 expired offsets in 1 milliseconds. (kafka.coordinator.group.GroupMetadataManager)\r\n[2019-09-06 15:45:04,930] INFO [ReplicaFetcher replicaId=1, leaderId=0, fetcherId=0] Node 0 was unable to process the fetch request with (sessionId=1735853846, epoch=539): FETCH_SESSION_ID_NOT_FOUND. (org.apache.kafka.clients.FetchSessionHandler)\r\n[2019-09-06 15:49:35,018] INFO [ReplicaFetcher replicaId=1, leaderId=0, fetcherId=0] Node 0 was unable to process the fetch request with (sessionId=599232284, epoch=538): FETCH_SESSION_ID_NOT_FOUND. (org.apache.kafka.clients.FetchSessionHandler)\r\n```\r\n\r\nWhat does having a lot of FETCH_SESSION_ID_NOT_FOUND indicate? What could be a way to remedy that? \r\n\r\nHalf of my consumer groups do not consume anything and produce logs containing a lot of ```FETCH_SESSION_ID_NOT_FOUND``` lines.","title":"Kafka FETCH_SESSION_ID_NOT_FOUND often seen in logs","body":"<p>Running Kafka 2.3.0, Kafka client 2.1.1, and my brokers keep outputting the following logs:</p>\n\n<pre><code>[2019-09-06 15:18:03,596] INFO [ReplicaFetcher replicaId=1, leaderId=0, fetcherId=0] Node 0 was unable to process the fetch request with (sessionId=1458702821, epoch=538): FETCH_SESSION_ID_NOT_FOUND. (org.apache.kafka.clients.FetchSessionHandler)\n[2019-09-06 15:21:11,145] INFO [GroupMetadataManager brokerId=1] Removed 0 expired offsets in 1 milliseconds. (kafka.coordinator.group.GroupMetadataManager)\n[2019-09-06 15:22:33,737] INFO [ReplicaFetcher replicaId=1, leaderId=0, fetcherId=0] Node 0 was unable to process the fetch request with (sessionId=1917353656, epoch=538): FETCH_SESSION_ID_NOT_FOUND. (org.apache.kafka.clients.FetchSessionHandler)\n[2019-09-06 15:27:03,768] INFO [ReplicaFetcher replicaId=1, leaderId=0, fetcherId=0] Node 0 was unable to process the fetch request with (sessionId=404608404, epoch=538): FETCH_SESSION_ID_NOT_FOUND. (org.apache.kafka.clients.FetchSessionHandler)\n[2019-09-06 15:31:11,145] INFO [GroupMetadataManager brokerId=1] Removed 0 expired offsets in 1 milliseconds. (kafka.coordinator.group.GroupMetadataManager)\n[2019-09-06 15:31:34,313] INFO [ReplicaFetcher replicaId=1, leaderId=0, fetcherId=0] Node 0 was unable to process the fetch request with (sessionId=1690401868, epoch=539): FETCH_SESSION_ID_NOT_FOUND. (org.apache.kafka.clients.FetchSessionHandler)\n[2019-09-06 15:36:04,404] INFO [ReplicaFetcher replicaId=1, leaderId=0, fetcherId=0] Node 0 was unable to process the fetch request with (sessionId=1167288700, epoch=538): FETCH_SESSION_ID_NOT_FOUND. (org.apache.kafka.clients.FetchSessionHandler)\n[2019-09-06 15:40:34,409] INFO [ReplicaFetcher replicaId=1, leaderId=0, fetcherId=0] Node 0 was unable to process the fetch request with (sessionId=2135343705, epoch=538): FETCH_SESSION_ID_NOT_FOUND. (org.apache.kafka.clients.FetchSessionHandler)\n[2019-09-06 15:41:11,145] INFO [GroupMetadataManager brokerId=1] Removed 0 expired offsets in 1 milliseconds. (kafka.coordinator.group.GroupMetadataManager)\n[2019-09-06 15:45:04,930] INFO [ReplicaFetcher replicaId=1, leaderId=0, fetcherId=0] Node 0 was unable to process the fetch request with (sessionId=1735853846, epoch=539): FETCH_SESSION_ID_NOT_FOUND. (org.apache.kafka.clients.FetchSessionHandler)\n[2019-09-06 15:49:35,018] INFO [ReplicaFetcher replicaId=1, leaderId=0, fetcherId=0] Node 0 was unable to process the fetch request with (sessionId=599232284, epoch=538): FETCH_SESSION_ID_NOT_FOUND. (org.apache.kafka.clients.FetchSessionHandler)\n</code></pre>\n\n<p>What does having a lot of FETCH_SESSION_ID_NOT_FOUND indicate? What could be a way to remedy that? </p>\n\n<p>Half of my consumer groups do not consume anything and produce logs containing a lot of <code>FETCH_SESSION_ID_NOT_FOUND</code> lines.</p>\n"},{"tags":["java","java-9","java-module","java-platform-module-system","module-info"],"comments":[{"owner":{"account_id":45934,"reputation":203679,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":5,"creation_date":1544972529,"post_id":53801778,"comment_id":94455324,"body_markdown":"You should not use `sun.*` or `com.sun.*` classes in your program; they are undocumented, internal classes of the JDK and can change in any release. Using them possibly makes your program incompatible with other versions of Java. See [It is a bad practice to use Sun&#39;s proprietary Java classes?](https://stackoverflow.com/questions/1834826/it-is-a-bad-practice-to-use-suns-proprietary-java-classes)","body":"You should not use <code>sun.*</code> or <code>com.sun.*</code> classes in your program; they are undocumented, internal classes of the JDK and can change in any release. Using them possibly makes your program incompatible with other versions of Java. See <a href=\"https://stackoverflow.com/questions/1834826/it-is-a-bad-practice-to-use-suns-proprietary-java-classes\">It is a bad practice to use Sun&#39;s proprietary Java classes?</a>"},{"owner":{"account_id":6927787,"reputation":14579,"user_id":5318303,"accept_rate":39,"display_name":"Mir-Ismaili"},"score":0,"creation_date":1544973632,"post_id":53801778,"comment_id":94455631,"body_markdown":"@Jesper - Thanks. If you post your comment as an answer then I can accept it. I also thank *nullpointer* for [his/her good answer](https://stackoverflow.com/a/53802790/5318303) .","body":"@Jesper - Thanks. If you post your comment as an answer then I can accept it. I also thank <i>nullpointer</i> for <a href=\"https://stackoverflow.com/a/53802790/5318303\">his/her good answer</a> ."}],"answers":[{"comments":[{"owner":{"account_id":10456575,"reputation":615,"user_id":8758068,"display_name":"Mahmut ARIKAN"},"score":0,"creation_date":1694509633,"post_id":53802790,"comment_id":135896637,"body_markdown":"On ubuntu 22.04 I had similar issue with Geoserver using openjdk-18 fix it with small adjustment (no equal sign):  export JAVA_OPTS=&quot;--add-exports java.desktop/sun.awt.image=ALL-UNNAMED&quot;","body":"On ubuntu 22.04 I had similar issue with Geoserver using openjdk-18 fix it with small adjustment (no equal sign):  export JAVA_OPTS=&quot;--add-exports java.desktop/sun.awt.image=ALL-UNNAMED&quot;"}],"tags":[],"owner":{"account_id":1939636,"reputation":28467,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"comment_count":1,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1544968233,"creation_date":1544968233,"answer_id":53802790,"question_id":53801778,"body_markdown":"### It&#39;s encapsulated! \n\nThe problem wouldn&#39;t certainly be solved including all the modules from the JDK. \n\n&gt; I know this package (sun.awt.image) exists in java.desktop module (of\n&gt; JDK 11), but don&#39;t know how can access it.\n\nThe actual crux of the problem here lies in the fact, that even though the class `PNGImageDecoder` and the package it belongs to `sun.awt.image` are a part of the `java.desktop` module, the module has chosen *not to export* it to any external library making use of it. \n\nThe choice of abstracting such classes(`sun.*`) has been intentional and documented well with the release notes of Java-9 and the rationale is mentioned in [JEP-260#Encapsulate Most Internal APIs](http://openjdk.java.net/jeps/260) as well.\n\n\n----------\n\nHaving said that, the ***temporary*** rather hacky solution to it would be adding \n\n    --add-exports=java.desktop/sun.awt.image=&lt;yourModuleName&gt;\n\nto your command line arguments. Preferably, you should be looking for an alternate way to what you&#39;re trying to achieve using the class `PNGImageDecoder`.\n\n\n----------\n\nThe last part of it, [*&quot;the unnamed module&quot;*](http://openjdk.java.net/projects/jigsaw/spec/sotms/#the-unnamed-module) is where the actual code(be it your application or any dependencies of it) is trying to access this class `PNGImageDecoder`. So think of it like, the command-line arg above for your use-case results in:\n\n    --add-exports=java.desktop/sun.awt.image=ALL-UNNAMED","title":"Is `sun.awt.image` package deprecated?","body":"<h3>It's encapsulated!</h3>\n<p>The problem wouldn't certainly be solved including all the modules from the JDK.</p>\n<blockquote>\n<p>I know this package (sun.awt.image) exists in java.desktop module (of\nJDK 11), but don't know how can access it.</p>\n</blockquote>\n<p>The actual crux of the problem here lies in the fact, that even though the class <code>PNGImageDecoder</code> and the package it belongs to <code>sun.awt.image</code> are a part of the <code>java.desktop</code> module, the module has chosen <em>not to export</em> it to any external library making use of it.</p>\n<p>The choice of abstracting such classes(<code>sun.*</code>) has been intentional and documented well with the release notes of Java-9 and the rationale is mentioned in <a href=\"http://openjdk.java.net/jeps/260\" rel=\"noreferrer\">JEP-260#Encapsulate Most Internal APIs</a> as well.</p>\n<hr />\n<p>Having said that, the <em><strong>temporary</strong></em> rather hacky solution to it would be adding</p>\n<pre><code>--add-exports=java.desktop/sun.awt.image=&lt;yourModuleName&gt;\n</code></pre>\n<p>to your command line arguments. Preferably, you should be looking for an alternate way to what you're trying to achieve using the class <code>PNGImageDecoder</code>.</p>\n<hr />\n<p>The last part of it, <a href=\"http://openjdk.java.net/projects/jigsaw/spec/sotms/#the-unnamed-module\" rel=\"noreferrer\"><em>&quot;the unnamed module&quot;</em></a> is where the actual code(be it your application or any dependencies of it) is trying to access this class <code>PNGImageDecoder</code>. So think of it like, the command-line arg above for your use-case results in:</p>\n<pre><code>--add-exports=java.desktop/sun.awt.image=ALL-UNNAMED\n</code></pre>\n"},{"comments":[{"owner":{"account_id":111681,"reputation":13319,"user_id":1480018,"accept_rate":87,"display_name":"Paul Taylor"},"score":3,"creation_date":1585387334,"post_id":53806279,"comment_id":107744510,"body_markdown":"Sure in a perfect world, but sometimes you have to do this to get things done.","body":"Sure in a perfect world, but sometimes you have to do this to get things done."},{"owner":{"account_id":45934,"reputation":203679,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":0,"creation_date":1585416124,"post_id":53806279,"comment_id":107752664,"body_markdown":"@PaulTaylor With the risk that your software will stop working with a new Java version.","body":"@PaulTaylor With the risk that your software will stop working with a new Java version."},{"owner":{"account_id":111681,"reputation":13319,"user_id":1480018,"accept_rate":87,"display_name":"Paul Taylor"},"score":2,"creation_date":1585420193,"post_id":53806279,"comment_id":107754307,"body_markdown":"Sure, but these days you usually package your app with a version of Java so you can be sure your app works with the version of java you distribute it with. I would only use sun classes when it is the only way round an issue, its certainly not something I would want to do.","body":"Sure, but these days you usually package your app with a version of Java so you can be sure your app works with the version of java you distribute it with. I would only use sun classes when it is the only way round an issue, its certainly not something I would want to do."}],"tags":[],"owner":{"account_id":45934,"reputation":203679,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"comment_count":3,"down_vote_count":2,"up_vote_count":6,"is_accepted":true,"score":4,"last_activity_date":1544992798,"creation_date":1544992798,"answer_id":53806279,"question_id":53801778,"body_markdown":"You should not use `sun.*` or `com.sun.*` classes in your program; they are undocumented, internal classes of the JDK and can change in any release.\r\n\r\nUsing them possibly makes your program incompatible with other versions of Java.\r\n\r\nSee: [It is a bad practice to use Sun&#39;s proprietary Java classes?](https://stackoverflow.com/questions/1834826/it-is-a-bad-practice-to-use-suns-proprietary-java-classes)","title":"Is `sun.awt.image` package deprecated?","body":"<p>You should not use <code>sun.*</code> or <code>com.sun.*</code> classes in your program; they are undocumented, internal classes of the JDK and can change in any release.</p>\n\n<p>Using them possibly makes your program incompatible with other versions of Java.</p>\n\n<p>See: <a href=\"https://stackoverflow.com/questions/1834826/it-is-a-bad-practice-to-use-suns-proprietary-java-classes\">It is a bad practice to use Sun's proprietary Java classes?</a></p>\n"}],"owner":{"account_id":6927787,"reputation":14579,"user_id":5318303,"accept_rate":39,"display_name":"Mir-Ismaili"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10910,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":53806279,"answer_count":2,"score":7,"last_activity_date":1689851054,"creation_date":1544960594,"question_id":53801778,"body_markdown":"I wanted to use some codes that using `sun.awt.image.PNGImageDecoder` in my project. The problem is source code is based on **Java 8** and my project using **JDK 9+** (11). So I got this error:\r\n\r\n&gt; Package &#39;`sun.awt.image`&#39; is declared in module &#39;`java.desktop`&#39;, which does not export it to *the unnamed module*.\r\n\r\nfor `import sun.awt.image.*`, and: \r\n\r\n&gt; Symbol is declared in module &#39;`java.desktop`&#39; which does not export package &#39;`sun.awt.image`&#39;\r\n\r\nfor using `PNGImageDecoder` or `ImageDecoder` etc.\r\n\r\nAfter some efforts to find a solution, I found some similar situations that suggest adding `requires java.desktop;` to `module-info.java` file (like [this case][1] and [this case][2]). But as I realized this solution can only be useful when your project already has a `module-info.java` file and you missing one used module in it. \r\n\r\nMy project hadn&#39;t this file already (pay attention to &quot;*the unnamed module*&quot; in the first error message). As far as I know, this means all modules are imported automatically. So adding this file and adding that line hadn&#39;t any effect except (changing error message and) causing some similar issues for other parts of my codes (which were, of course, solvable by adding required modules to `module-info.java` file).\r\n\r\nTo sure I imported all modules in `jmods` folder (of JDK 11), but the problem didn&#39;t solve:\r\n\r\n\trequires java.base;\r\n\trequires java.compiler;\r\n\trequires java.datatransfer;\r\n\trequires java.desktop;\r\n\trequires java.instrument;\r\n\trequires java.logging;\r\n\trequires java.management;\r\n\trequires java.management.rmi;\r\n\trequires java.naming;\r\n\trequires java.net.http;\r\n\trequires java.prefs;\r\n\trequires java.rmi;\r\n\trequires java.scripting;\r\n\trequires java.se;\r\n\trequires java.security.jgss;\r\n\trequires java.security.sasl;\r\n\trequires java.smartcardio;\r\n\trequires java.sql;\r\n\trequires java.sql.rowset;\r\n\trequires java.transaction.xa;\r\n\trequires java.xml.crypto;\r\n\trequires java.xml;\r\n\trequires jdk.accessibility;\r\n\trequires jdk.aot;\r\n\trequires jdk.attach;\r\n\trequires jdk.charsets;\r\n\trequires jdk.compiler;\r\n\trequires jdk.crypto.cryptoki;\r\n\trequires jdk.crypto.ec;\r\n\trequires jdk.crypto.mscapi;\r\n\trequires jdk.dynalink;\r\n\trequires jdk.editpad;\r\n\trequires jdk.hotspot.agent;\r\n\trequires jdk.httpserver;\r\n\trequires jdk.internal.ed;\r\n\trequires jdk.internal.jvmstat;\r\n\trequires jdk.internal.le;\r\n\trequires jdk.internal.opt;\r\n\trequires jdk.internal.vm.ci;\r\n\trequires jdk.internal.vm.compiler;\r\n\trequires jdk.internal.vm.compiler.management;\r\n\trequires jdk.jartool;\r\n\trequires jdk.javadoc;\r\n\trequires jdk.jcmd;\r\n\trequires jdk.jconsole;\r\n\trequires jdk.jdeps;\r\n\trequires jdk.jdi;\r\n\trequires jdk.jdwp.agent;\r\n\trequires jdk.jfr;\r\n\trequires jdk.jlink;\r\n\trequires jdk.jshell;\r\n\trequires jdk.jsobject;\r\n\trequires jdk.jstatd;\r\n\trequires jdk.localedata;\r\n\trequires jdk.management.agent;\r\n\trequires jdk.management.jfr;\r\n\trequires jdk.management;\r\n\trequires jdk.naming.dns;\r\n\trequires jdk.naming.rmi;\r\n\trequires jdk.net;\r\n\trequires jdk.pack;\r\n\trequires jdk.rmic;\r\n\trequires jdk.scripting.nashorn;\r\n\trequires jdk.scripting.nashorn.shell;\r\n\trequires jdk.sctp;\r\n\trequires jdk.security.auth;\r\n\trequires jdk.security.jgss;\r\n\trequires jdk.unsupported.desktop;\r\n\trequires jdk.unsupported;\r\n\trequires jdk.xml.dom;\r\n\trequires jdk.zipfs;\r\n\r\n***\r\n\r\nI know this package (`sun.awt.image`) exists in `java.desktop` module (of JDK 11), but don&#39;t know how can access it. \r\n\r\nI use IntelliJ IDEA as IDE.\r\n\r\n  [1]: https://stackoverflow.com/questions/51503140/the-import-java-awt-cannot-be-resolved\r\n  [2]: https://stackoverflow.com/a/42576762/5318303","title":"Is `sun.awt.image` package deprecated?","body":"<p>I wanted to use some codes that using <code>sun.awt.image.PNGImageDecoder</code> in my project. The problem is source code is based on <strong>Java 8</strong> and my project using <strong>JDK 9+</strong> (11). So I got this error:</p>\n<blockquote>\n<p>Package '<code>sun.awt.image</code>' is declared in module '<code>java.desktop</code>', which does not export it to <em>the unnamed module</em>.</p>\n</blockquote>\n<p>for <code>import sun.awt.image.*</code>, and:</p>\n<blockquote>\n<p>Symbol is declared in module '<code>java.desktop</code>' which does not export package '<code>sun.awt.image</code>'</p>\n</blockquote>\n<p>for using <code>PNGImageDecoder</code> or <code>ImageDecoder</code> etc.</p>\n<p>After some efforts to find a solution, I found some similar situations that suggest adding <code>requires java.desktop;</code> to <code>module-info.java</code> file (like <a href=\"https://stackoverflow.com/questions/51503140/the-import-java-awt-cannot-be-resolved\">this case</a> and <a href=\"https://stackoverflow.com/a/42576762/5318303\">this case</a>). But as I realized this solution can only be useful when your project already has a <code>module-info.java</code> file and you missing one used module in it.</p>\n<p>My project hadn't this file already (pay attention to &quot;<em>the unnamed module</em>&quot; in the first error message). As far as I know, this means all modules are imported automatically. So adding this file and adding that line hadn't any effect except (changing error message and) causing some similar issues for other parts of my codes (which were, of course, solvable by adding required modules to <code>module-info.java</code> file).</p>\n<p>To sure I imported all modules in <code>jmods</code> folder (of JDK 11), but the problem didn't solve:</p>\n<pre><code>requires java.base;\nrequires java.compiler;\nrequires java.datatransfer;\nrequires java.desktop;\nrequires java.instrument;\nrequires java.logging;\nrequires java.management;\nrequires java.management.rmi;\nrequires java.naming;\nrequires java.net.http;\nrequires java.prefs;\nrequires java.rmi;\nrequires java.scripting;\nrequires java.se;\nrequires java.security.jgss;\nrequires java.security.sasl;\nrequires java.smartcardio;\nrequires java.sql;\nrequires java.sql.rowset;\nrequires java.transaction.xa;\nrequires java.xml.crypto;\nrequires java.xml;\nrequires jdk.accessibility;\nrequires jdk.aot;\nrequires jdk.attach;\nrequires jdk.charsets;\nrequires jdk.compiler;\nrequires jdk.crypto.cryptoki;\nrequires jdk.crypto.ec;\nrequires jdk.crypto.mscapi;\nrequires jdk.dynalink;\nrequires jdk.editpad;\nrequires jdk.hotspot.agent;\nrequires jdk.httpserver;\nrequires jdk.internal.ed;\nrequires jdk.internal.jvmstat;\nrequires jdk.internal.le;\nrequires jdk.internal.opt;\nrequires jdk.internal.vm.ci;\nrequires jdk.internal.vm.compiler;\nrequires jdk.internal.vm.compiler.management;\nrequires jdk.jartool;\nrequires jdk.javadoc;\nrequires jdk.jcmd;\nrequires jdk.jconsole;\nrequires jdk.jdeps;\nrequires jdk.jdi;\nrequires jdk.jdwp.agent;\nrequires jdk.jfr;\nrequires jdk.jlink;\nrequires jdk.jshell;\nrequires jdk.jsobject;\nrequires jdk.jstatd;\nrequires jdk.localedata;\nrequires jdk.management.agent;\nrequires jdk.management.jfr;\nrequires jdk.management;\nrequires jdk.naming.dns;\nrequires jdk.naming.rmi;\nrequires jdk.net;\nrequires jdk.pack;\nrequires jdk.rmic;\nrequires jdk.scripting.nashorn;\nrequires jdk.scripting.nashorn.shell;\nrequires jdk.sctp;\nrequires jdk.security.auth;\nrequires jdk.security.jgss;\nrequires jdk.unsupported.desktop;\nrequires jdk.unsupported;\nrequires jdk.xml.dom;\nrequires jdk.zipfs;\n</code></pre>\n<hr />\n<p>I know this package (<code>sun.awt.image</code>) exists in <code>java.desktop</code> module (of JDK 11), but don't know how can access it.</p>\n<p>I use IntelliJ IDEA as IDE.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":6576425,"reputation":3053,"user_id":5082285,"display_name":"Markus Kauppinen"},"score":0,"creation_date":1689850514,"post_id":76726191,"comment_id":135273067,"body_markdown":"Take a look at your code. Find the places where you are calling `setOnClickListener()` using an object of the type `ImageButton`. Look for each `ImageButton` in your code: has it been assigned a value before `setOnClickListener()` is called. If not, why not? One of them is `null`.","body":"Take a look at your code. Find the places where you are calling <code>setOnClickListener()</code> using an object of the type <code>ImageButton</code>. Look for each <code>ImageButton</code> in your code: has it been assigned a value before <code>setOnClickListener()</code> is called. If not, why not? One of them is <code>null</code>."},{"owner":{"account_id":29053035,"reputation":11,"user_id":22255386,"display_name":"Marcos Onofre"},"score":1,"creation_date":1689907750,"post_id":76726191,"comment_id":135282775,"body_markdown":"I managed to solve the problem, thanks a lot for the tip!!! :D","body":"I managed to solve the problem, thanks a lot for the tip!!! :D"}],"answers":[{"comments":[{"owner":{"account_id":29053035,"reputation":11,"user_id":22255386,"display_name":"Marcos Onofre"},"score":0,"creation_date":1689907703,"post_id":76729182,"comment_id":135282774,"body_markdown":"Thanks! Your tip worked, thank you very much :D","body":"Thanks! Your tip worked, thank you very much :D"}],"tags":[],"owner":{"account_id":6576425,"reputation":3053,"user_id":5082285,"display_name":"Markus Kauppinen"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689850798,"creation_date":1689850798,"answer_id":76729182,"question_id":76726191,"body_markdown":"Looks like you should call `iniciaComponentes()` before `ouvinteCliques()`.\r\n\r\nIn `iniciaComponentes()` you have the `findViewById()` calls that initialize some of the view items including `ImageButton ibAdd`.\r\n\r\nThe `ibAdd` object is then accessed in `ouvinteCliques()` with the `setOnClickListener()` call and it can&#39;t be null at that point.","title":"Attempt to invoke virtual method &#39;void android.widget.ImageButton.setOnClickListener(android.view.View$OnClickListener)&#39; on a null object reference","body":"<p>Looks like you should call <code>iniciaComponentes()</code> before <code>ouvinteCliques()</code>.</p>\n<p>In <code>iniciaComponentes()</code> you have the <code>findViewById()</code> calls that initialize some of the view items including <code>ImageButton ibAdd</code>.</p>\n<p>The <code>ibAdd</code> object is then accessed in <code>ouvinteCliques()</code> with the <code>setOnClickListener()</code> call and it can't be null at that point.</p>\n"}],"owner":{"account_id":29053035,"reputation":11,"user_id":22255386,"display_name":"Marcos Onofre"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1689850852,"creation_date":1689818061,"question_id":76726191,"body_markdown":"my application that I was creating was closing by itself, everything was fine, out of nowhere it gave this error: \r\njava.lang.NullPointerException: Attempt to invoke the virtual method &#39;void android.widget.ImageButton.setOnClickListener(android.view.View$OnClickListener )&#39; on a null object reference.\r\n\r\nI am not able to resolve this error, I have tried everything to try to make it work, however, I am not succeeding.\r\n\r\n**HERE MY CODE**\r\n```\r\npackage br.com.hellodev.controledeprodutos.activity;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.ImageButton;\r\nimport android.widget.PopupMenu;\r\nimport android.widget.ProgressBar;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\n\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.tsuryo.swipeablerv.SwipeLeftRightCallback;\r\nimport com.tsuryo.swipeablerv.SwipeableRecyclerView;\r\n\r\nimport java.lang.reflect.Field;\r\nimport java.util.ArrayList;\r\nimport java.util.Collection;\r\nimport java.util.Collections;\r\nimport java.util.List;\r\n\r\nimport br.com.hellodev.controledeprodutos.adapter.AdapterProduto;\r\nimport br.com.hellodev.controledeprodutos.autencacao.LoginActivity;\r\nimport br.com.hellodev.controledeprodutos.helper.FirebaseHelper;\r\nimport br.com.hellodev.controledeprodutos.model.Produto;\r\nimport br.com.hellodev.controledeprodutos.R;\r\n\r\npublic class MainActivity extends AppCompatActivity implements AdapterProduto.OnClick {\r\n\r\n    private AdapterProduto adapterProduto;\r\n    private List&lt;Produto&gt; produtoList = new ArrayList&lt;&gt;();\r\n    private SwipeableRecyclerView rvProdutos;\r\n    private TextView text_info;\r\n\r\n    private ImageButton ibAdd;\r\n    private ImageButton ibVerMais;\r\n    private ProgressBar progressBar;\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        ouvinteCliques();\r\n\r\n        configRecyclerView();\r\n\r\n        iniciaComponentes();\r\n\r\n    }\r\n\r\n    @Override\r\n    protected void onStart() {\r\n        super.onStart();\r\n\r\n        recuperaProdutos();\r\n    }\r\n\r\n    private void recuperaProdutos() {\r\n        DatabaseReference produtosRef = FirebaseHelper.getDatabaseReference()\r\n                .child(&quot;produtos&quot;)\r\n                .child(FirebaseHelper.getIdFirebase());\r\n        produtosRef.addListenerForSingleValueEvent(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                produtoList.clear();\r\n                for (DataSnapshot snap : snapshot.getChildren()) {\r\n                    Produto produto = snap.getValue(Produto.class);\r\n                    produtoList.add(produto);\r\n                }\r\n\r\n                verificaQtdLista();\r\n\r\n                Collections.reverse(produtoList);\r\n\r\n                adapterProduto.notifyDataSetChanged();\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    private void ouvinteCliques() {\r\n        ibAdd.setOnClickListener(view -&gt; {\r\n            startActivity(new Intent(this, FormProdutoActivity.class));\r\n        });\r\n\r\n        ibVerMais.setOnClickListener(view -&gt; {\r\n\r\n            PopupMenu popupMenu = new PopupMenu(this, ibVerMais);\r\n            popupMenu.getMenuInflater().inflate(R.menu.menu_toolbar, popupMenu.getMenu());\r\n\r\n            popupMenu.setOnMenuItemClickListener(menuItem -&gt; {\r\n                if (menuItem.getItemId() == R.id.menu_sobre) {\r\n                    Toast.makeText(this, &quot;Sobre&quot;, Toast.LENGTH_SHORT).show();\r\n                } else if (menuItem.getItemId() == R.id.menu_sair) {\r\n                    FirebaseHelper.getAuth().signOut();\r\n                    startActivity(new Intent(this, LoginActivity.class));\r\n                }\r\n                return true;\r\n            });\r\n\r\n            popupMenu.show();\r\n\r\n        });\r\n    }\r\n\r\n    private void configRecyclerView() {\r\n\r\n\r\n        rvProdutos.setLayoutManager(new LinearLayoutManager(this));\r\n        rvProdutos.setHasFixedSize(true);\r\n        adapterProduto = new AdapterProduto(produtoList, this);\r\n        rvProdutos.setAdapter(adapterProduto);\r\n\r\n        rvProdutos.setListener(new SwipeLeftRightCallback.Listener() {\r\n            @Override\r\n            public void onSwipedLeft(int position) {\r\n            }\r\n\r\n            @Override\r\n            public void onSwipedRight(int position) {\r\n\r\n                Produto produto = produtoList.get(position);\r\n\r\n\r\n                produtoList.remove(produto);\r\n                produto.deletaProduto();\r\n                adapterProduto.notifyItemRemoved(position);\r\n\r\n                verificaQtdLista();\r\n\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    private void verificaQtdLista() {\r\n        if (produtoList.size() == 0) {\r\n            text_info.setText(&quot;Nenhum produto cadastrado.&quot;);\r\n            text_info.setVisibility(View.VISIBLE);\r\n        } else {\r\n            text_info.setVisibility(View.GONE);\r\n        }\r\n        text_info.setVisibility(View.GONE);\r\n\r\n    }\r\n\r\n    private void iniciaComponentes() {\r\n        ibAdd = findViewById(R.id.ib_add);\r\n        ibVerMais = findViewById(R.id.ib_ver_mais);\r\n        rvProdutos = findViewById(R.id.rvProdutos);\r\n        text_info = findViewById(R.id.text_info);\r\n        progressBar = findViewById(R.id.progressBar);\r\n    }\r\n\r\n    @Override\r\n    public void onClickListener(Produto produto) {\r\n        Intent intent = new Intent(this, FormProdutoActivity.class);\r\n        intent.putExtra(&quot;produto&quot;, produto);\r\n        startActivity(intent);\r\n\r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\n```\r\npackage br.com.hellodev.controledeprodutos.adapter;\r\n\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport java.util.List;\r\n\r\nimport br.com.hellodev.controledeprodutos.R;\r\nimport br.com.hellodev.controledeprodutos.model.Produto;\r\n\r\npublic class AdapterProduto extends RecyclerView.Adapter&lt;AdapterProduto.MyViewHolder&gt; {\r\n\r\n    private List&lt;Produto&gt; produtoList;\r\n    private OnClick onClick;\r\n\r\n    public AdapterProduto(List&lt;Produto&gt; produtoList, OnClick onClick) {\r\n        this.produtoList = produtoList;\r\n        this.onClick = onClick;\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public MyViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        View itemView = LayoutInflater.from(parent.getContext()).inflate(R.layout.item_produto, parent, false);\r\n        return new MyViewHolder(itemView);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull MyViewHolder holder, int position) {\r\n        Produto produto = produtoList.get(position);\r\n\r\n        holder.textProduto.setText(produto.getNome());\r\n        holder.textEstoque.setText(&quot;Estoque: &quot; + produto.getEstoque());\r\n        holder.textValor.setText(&quot;R$ &quot; + produto.getValor());\r\n\r\n        holder.itemView.setOnClickListener(view -&gt; onClick.onClickListener(produto));\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return produtoList.size();\r\n    }\r\n\r\n    public interface OnClick {\r\n        void onClickListener(Produto produto);\r\n    }\r\n\r\n    static class MyViewHolder extends RecyclerView.ViewHolder {\r\n\r\n        TextView textProduto, textEstoque, textValor;\r\n\r\n        public MyViewHolder(@NonNull View itemView) {\r\n            super(itemView);\r\n            textProduto = itemView.findViewById(R.id.text_produto);\r\n            textEstoque = itemView.findViewById(R.id.text_estoque);\r\n            textValor = itemView.findViewById(R.id.text_valor);\r\n        }\r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\n\r\n","title":"Attempt to invoke virtual method &#39;void android.widget.ImageButton.setOnClickListener(android.view.View$OnClickListener)&#39; on a null object reference","body":"<p>my application that I was creating was closing by itself, everything was fine, out of nowhere it gave this error:\njava.lang.NullPointerException: Attempt to invoke the virtual method 'void android.widget.ImageButton.setOnClickListener(android.view.View$OnClickListener )' on a null object reference.</p>\n<p>I am not able to resolve this error, I have tried everything to try to make it work, however, I am not succeeding.</p>\n<p><strong>HERE MY CODE</strong></p>\n<pre><code>package br.com.hellodev.controledeprodutos.activity;\n\nimport android.content.Intent;\nimport android.os.Bundle;\nimport android.view.View;\nimport android.widget.ImageButton;\nimport android.widget.PopupMenu;\nimport android.widget.ProgressBar;\nimport android.widget.TextView;\nimport android.widget.Toast;\n\nimport androidx.annotation.NonNull;\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.recyclerview.widget.LinearLayoutManager;\n\nimport com.google.firebase.database.DataSnapshot;\nimport com.google.firebase.database.DatabaseError;\nimport com.google.firebase.database.DatabaseReference;\nimport com.google.firebase.database.ValueEventListener;\nimport com.tsuryo.swipeablerv.SwipeLeftRightCallback;\nimport com.tsuryo.swipeablerv.SwipeableRecyclerView;\n\nimport java.lang.reflect.Field;\nimport java.util.ArrayList;\nimport java.util.Collection;\nimport java.util.Collections;\nimport java.util.List;\n\nimport br.com.hellodev.controledeprodutos.adapter.AdapterProduto;\nimport br.com.hellodev.controledeprodutos.autencacao.LoginActivity;\nimport br.com.hellodev.controledeprodutos.helper.FirebaseHelper;\nimport br.com.hellodev.controledeprodutos.model.Produto;\nimport br.com.hellodev.controledeprodutos.R;\n\npublic class MainActivity extends AppCompatActivity implements AdapterProduto.OnClick {\n\n    private AdapterProduto adapterProduto;\n    private List&lt;Produto&gt; produtoList = new ArrayList&lt;&gt;();\n    private SwipeableRecyclerView rvProdutos;\n    private TextView text_info;\n\n    private ImageButton ibAdd;\n    private ImageButton ibVerMais;\n    private ProgressBar progressBar;\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        ouvinteCliques();\n\n        configRecyclerView();\n\n        iniciaComponentes();\n\n    }\n\n    @Override\n    protected void onStart() {\n        super.onStart();\n\n        recuperaProdutos();\n    }\n\n    private void recuperaProdutos() {\n        DatabaseReference produtosRef = FirebaseHelper.getDatabaseReference()\n                .child(&quot;produtos&quot;)\n                .child(FirebaseHelper.getIdFirebase());\n        produtosRef.addListenerForSingleValueEvent(new ValueEventListener() {\n            @Override\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\n                produtoList.clear();\n                for (DataSnapshot snap : snapshot.getChildren()) {\n                    Produto produto = snap.getValue(Produto.class);\n                    produtoList.add(produto);\n                }\n\n                verificaQtdLista();\n\n                Collections.reverse(produtoList);\n\n                adapterProduto.notifyDataSetChanged();\n            }\n\n            @Override\n            public void onCancelled(@NonNull DatabaseError error) {\n\n            }\n        });\n    }\n\n    private void ouvinteCliques() {\n        ibAdd.setOnClickListener(view -&gt; {\n            startActivity(new Intent(this, FormProdutoActivity.class));\n        });\n\n        ibVerMais.setOnClickListener(view -&gt; {\n\n            PopupMenu popupMenu = new PopupMenu(this, ibVerMais);\n            popupMenu.getMenuInflater().inflate(R.menu.menu_toolbar, popupMenu.getMenu());\n\n            popupMenu.setOnMenuItemClickListener(menuItem -&gt; {\n                if (menuItem.getItemId() == R.id.menu_sobre) {\n                    Toast.makeText(this, &quot;Sobre&quot;, Toast.LENGTH_SHORT).show();\n                } else if (menuItem.getItemId() == R.id.menu_sair) {\n                    FirebaseHelper.getAuth().signOut();\n                    startActivity(new Intent(this, LoginActivity.class));\n                }\n                return true;\n            });\n\n            popupMenu.show();\n\n        });\n    }\n\n    private void configRecyclerView() {\n\n\n        rvProdutos.setLayoutManager(new LinearLayoutManager(this));\n        rvProdutos.setHasFixedSize(true);\n        adapterProduto = new AdapterProduto(produtoList, this);\n        rvProdutos.setAdapter(adapterProduto);\n\n        rvProdutos.setListener(new SwipeLeftRightCallback.Listener() {\n            @Override\n            public void onSwipedLeft(int position) {\n            }\n\n            @Override\n            public void onSwipedRight(int position) {\n\n                Produto produto = produtoList.get(position);\n\n\n                produtoList.remove(produto);\n                produto.deletaProduto();\n                adapterProduto.notifyItemRemoved(position);\n\n                verificaQtdLista();\n\n\n            }\n        });\n    }\n\n\n    private void verificaQtdLista() {\n        if (produtoList.size() == 0) {\n            text_info.setText(&quot;Nenhum produto cadastrado.&quot;);\n            text_info.setVisibility(View.VISIBLE);\n        } else {\n            text_info.setVisibility(View.GONE);\n        }\n        text_info.setVisibility(View.GONE);\n\n    }\n\n    private void iniciaComponentes() {\n        ibAdd = findViewById(R.id.ib_add);\n        ibVerMais = findViewById(R.id.ib_ver_mais);\n        rvProdutos = findViewById(R.id.rvProdutos);\n        text_info = findViewById(R.id.text_info);\n        progressBar = findViewById(R.id.progressBar);\n    }\n\n    @Override\n    public void onClickListener(Produto produto) {\n        Intent intent = new Intent(this, FormProdutoActivity.class);\n        intent.putExtra(&quot;produto&quot;, produto);\n        startActivity(intent);\n\n    }\n\n}\n</code></pre>\n<pre><code>package br.com.hellodev.controledeprodutos.adapter;\n\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.TextView;\n\nimport androidx.annotation.NonNull;\nimport androidx.recyclerview.widget.RecyclerView;\n\nimport java.util.List;\n\nimport br.com.hellodev.controledeprodutos.R;\nimport br.com.hellodev.controledeprodutos.model.Produto;\n\npublic class AdapterProduto extends RecyclerView.Adapter&lt;AdapterProduto.MyViewHolder&gt; {\n\n    private List&lt;Produto&gt; produtoList;\n    private OnClick onClick;\n\n    public AdapterProduto(List&lt;Produto&gt; produtoList, OnClick onClick) {\n        this.produtoList = produtoList;\n        this.onClick = onClick;\n    }\n\n    @NonNull\n    @Override\n    public MyViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n        View itemView = LayoutInflater.from(parent.getContext()).inflate(R.layout.item_produto, parent, false);\n        return new MyViewHolder(itemView);\n    }\n\n    @Override\n    public void onBindViewHolder(@NonNull MyViewHolder holder, int position) {\n        Produto produto = produtoList.get(position);\n\n        holder.textProduto.setText(produto.getNome());\n        holder.textEstoque.setText(&quot;Estoque: &quot; + produto.getEstoque());\n        holder.textValor.setText(&quot;R$ &quot; + produto.getValor());\n\n        holder.itemView.setOnClickListener(view -&gt; onClick.onClickListener(produto));\n    }\n\n    @Override\n    public int getItemCount() {\n        return produtoList.size();\n    }\n\n    public interface OnClick {\n        void onClickListener(Produto produto);\n    }\n\n    static class MyViewHolder extends RecyclerView.ViewHolder {\n\n        TextView textProduto, textEstoque, textValor;\n\n        public MyViewHolder(@NonNull View itemView) {\n            super(itemView);\n            textProduto = itemView.findViewById(R.id.text_produto);\n            textEstoque = itemView.findViewById(R.id.text_estoque);\n            textValor = itemView.findViewById(R.id.text_valor);\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":["java","maven","properties-file","persistence.xml","context.xml"],"owner":{"account_id":9222621,"reputation":136,"user_id":6943090,"display_name":"Luis Morales"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689850493,"creation_date":1689798623,"question_id":76724985,"body_markdown":"I have an app with Java 17, Tomcat 10. \r\n\r\nI would like to use a properties file (or its variation) so I can read it from different sides of my code or from my `persistence.xml` and `context.xml` files.\r\n\r\n**What have I tried?**\r\n\r\nI created a properties file and imported it into a listener. \r\nI also managed it by putting in the `catalina.properties` a `app.profile=profile`\r\n\r\nThis worked in a Java class, but for the `context.xml` and `persistence.xml` it doesn&#39;t read the properties.\r\n\r\nI have created profiles in the pom.xml with the properties.\r\nBut in the `persistence.xml` and `context.xml` I can&#39;t extract the properties. \r\nI followed advice from [here][1].\r\n\r\n  [1]: https://stackoverflow.com/questions/51661290/how-to-get-my-applicationcontext-xml-file-pull-a-value-from-a-properties-file","title":"How to pull values from properties file into persistence.xml and context.xml?","body":"<p>I have an app with Java 17, Tomcat 10.</p>\n<p>I would like to use a properties file (or its variation) so I can read it from different sides of my code or from my <code>persistence.xml</code> and <code>context.xml</code> files.</p>\n<p><strong>What have I tried?</strong></p>\n<p>I created a properties file and imported it into a listener.\nI also managed it by putting in the <code>catalina.properties</code> a <code>app.profile=profile</code></p>\n<p>This worked in a Java class, but for the <code>context.xml</code> and <code>persistence.xml</code> it doesn't read the properties.</p>\n<p>I have created profiles in the pom.xml with the properties.\nBut in the <code>persistence.xml</code> and <code>context.xml</code> I can't extract the properties.\nI followed advice from <a href=\"https://stackoverflow.com/questions/51661290/how-to-get-my-applicationcontext-xml-file-pull-a-value-from-a-properties-file\">here</a>.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":7870,"page":298,"page_size":100}
