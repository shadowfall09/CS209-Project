{"items":[{"tags":["java","spring","httpurlconnection"],"answers":[{"tags":[],"owner":{"account_id":20338,"reputation":63801,"user_id":48503,"accept_rate":100,"display_name":"Luke Woodward"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1640890483,"creation_date":1640890483,"answer_id":70535628,"question_id":70534712,"body_markdown":"I can&#39;t say why the authentication with the Here API isn&#39;t working, but I can explain why you get `null` for the `Authorization` in your output.\r\n\r\nThe reason is that the implementation of the `HttpURLConnection` class in the JDK explicitly refuses to return values of security-sensitive headers.\r\n\r\nIf you take a look at the `getRequestProperty()` method (at the time of writing this is around line 3367 in &lt;a href=&quot;https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/sun/net/www/protocol/http/HttpURLConnection.java#L3367&quot;&gt;sun.net.www.protocol.http.HttpURLConnection&lt;/a&gt;), then you&#39;ll see that the method checks whether the header given is one of a number of security-sensitive headers, and if so, returns `null` regardless of whether a value has been set for this header. `Authorization` is indeed one of the headers deemed to be security-sensitive.\r\n\r\nIf you want to prove that the value of the `Authorization` header has been set, you can try something like the following:\r\n\r\n```java\r\njava.lang.reflect.Field requestsField = conn.getClass().getDeclaredField(&quot;requests&quot;);\r\nrequestsField.setAccessible(true);\r\nSystem.out.println(requestsField.get(conn));\r\n```\r\nFor me, this printed something like `sun.net.www.MessageHeader@52a863563 pairs: {Authorization=...}...`, showing that the `Authorization` header had indeed been set.  Note however that this code is nasty reflective hackery, and although it worked for me with JDK 11 I offer no guarantee that it will work with other versions of Java.\r\n\r\nIn conclusion, I believe you are setting the authorization header.  It&#39;s likely you&#39;re setting it to an incorrect value, but I&#39;m afraid I can&#39;t help you set it to a working value as I have no access to the Here API and have never worked with it myself. I would suggest seeking support from Here.","title":"HttpURLConnection - Authorization header always is null","body":"<p>I can't say why the authentication with the Here API isn't working, but I can explain why you get <code>null</code> for the <code>Authorization</code> in your output.</p>\n<p>The reason is that the implementation of the <code>HttpURLConnection</code> class in the JDK explicitly refuses to return values of security-sensitive headers.</p>\n<p>If you take a look at the <code>getRequestProperty()</code> method (at the time of writing this is around line 3367 in <a href=\"https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/sun/net/www/protocol/http/HttpURLConnection.java#L3367\" rel=\"nofollow noreferrer\">sun.net.www.protocol.http.HttpURLConnection</a>), then you'll see that the method checks whether the header given is one of a number of security-sensitive headers, and if so, returns <code>null</code> regardless of whether a value has been set for this header. <code>Authorization</code> is indeed one of the headers deemed to be security-sensitive.</p>\n<p>If you want to prove that the value of the <code>Authorization</code> header has been set, you can try something like the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>java.lang.reflect.Field requestsField = conn.getClass().getDeclaredField(&quot;requests&quot;);\nrequestsField.setAccessible(true);\nSystem.out.println(requestsField.get(conn));\n</code></pre>\n<p>For me, this printed something like <code>sun.net.www.MessageHeader@52a863563 pairs: {Authorization=...}...</code>, showing that the <code>Authorization</code> header had indeed been set.  Note however that this code is nasty reflective hackery, and although it worked for me with JDK 11 I offer no guarantee that it will work with other versions of Java.</p>\n<p>In conclusion, I believe you are setting the authorization header.  It's likely you're setting it to an incorrect value, but I'm afraid I can't help you set it to a working value as I have no access to the Here API and have never worked with it myself. I would suggest seeking support from Here.</p>\n"}],"owner":{"account_id":21756845,"reputation":53,"user_id":16503044,"display_name":"souzatorquato"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":840,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70535628,"answer_count":1,"score":0,"last_activity_date":1640890483,"creation_date":1640884453,"question_id":70534712,"body_markdown":"I&#39;m trying to authenticate to the api here in java spring mvc.\r\n\r\nit&#39;s just that I&#39;m having problems with my connection, especially when I set setRequestProperty(&quot;Authorization&quot;, &quot;***&quot;);\r\nalways returns 401 error\r\nwhat could i have wrong??\r\n\r\n```\r\n try {\r\n            URL url = new URL(&quot;https://account.api.here.com/oauth2/token&quot;);\r\n            conn = (HttpURLConnection) url.openConnection();\r\n            conn.setRequestMethod(&quot;POST&quot;);\r\n            conn.setRequestProperty(&quot;Authorization&quot;, &quot;OAuth oauth_consumer_key=\\&quot;*******************\\&quot;,oauth_signature_method=\\&quot;HMAC-SHA256\\&quot;,oauth_timestamp=\\&quot;1633463792\\&quot;,oauth_nonce=\\&quot;******\\&quot;,oauth_version=\\&quot;1.0\\&quot;,oauth_signature=\\&quot;**************\\&quot;&quot;);\r\n\r\n            //   conn.setRequestProperty(&quot;Authorization&quot;, &quot;OAuth&quot;);\r\n         //   conn.setRequestProperty(&quot;oauth_consumer_key&quot;, &quot;*******************&quot;);\r\n         //   conn.setRequestProperty(&quot;oauth_nonce&quot;, &quot;********&quot;);\r\n         //   conn.setRequestProperty(&quot;oauth_signature&quot;, &quot;*******&quot;);\r\n         //   conn.setRequestProperty(&quot;oauth_signature_method&quot;, &quot;HMAC-SHA256&quot;);\r\n         //   conn.setRequestProperty(&quot;oauth_timestamp&quot;, &quot;1633463792&quot;);\r\n         //   conn.setRequestProperty(&quot;oauth_version&quot;, &quot;1.0&quot;);\r\n\r\n\r\n            conn.setRequestProperty(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded&quot;);\r\n            conn.setDoOutput(true);\r\n            OutputStream os = conn.getOutputStream();\r\n            os.write(POST_PARAMS.getBytes());\r\n            os.flush();\r\n            os.close();\r\n\r\n            int responseCode = conn.getResponseCode();\r\n            return conn.getRequestMethod() +os + &quot;\\n&quot;+responseCode + &quot;\\nContent-type:&quot;+ conn.getRequestProperty(&quot;Content-Type&quot;) + &quot;\\nAuthorization: &quot;+ conn.getRequestProperty(&quot;Authorization&quot;);\r\n          }catch (Exception e){\r\n            e.printStackTrace();\r\n        }\r\n            \r\n  \r\n\r\n```\r\n\r\nOn my return by postman when I call, it appears like this\r\nWhy always null?\r\n\r\nPOSTgrant_type=client_credentials\r\n401\r\nContent-type:application/x-www-form-urlencoded\r\nAuthorization: null\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/gOKAv.png","title":"HttpURLConnection - Authorization header always is null","body":"<p>I'm trying to authenticate to the api here in java spring mvc.</p>\n<p>it's just that I'm having problems with my connection, especially when I set setRequestProperty(&quot;Authorization&quot;, &quot;***&quot;);\nalways returns 401 error\nwhat could i have wrong??</p>\n<pre><code> try {\n            URL url = new URL(&quot;https://account.api.here.com/oauth2/token&quot;);\n            conn = (HttpURLConnection) url.openConnection();\n            conn.setRequestMethod(&quot;POST&quot;);\n            conn.setRequestProperty(&quot;Authorization&quot;, &quot;OAuth oauth_consumer_key=\\&quot;*******************\\&quot;,oauth_signature_method=\\&quot;HMAC-SHA256\\&quot;,oauth_timestamp=\\&quot;1633463792\\&quot;,oauth_nonce=\\&quot;******\\&quot;,oauth_version=\\&quot;1.0\\&quot;,oauth_signature=\\&quot;**************\\&quot;&quot;);\n\n            //   conn.setRequestProperty(&quot;Authorization&quot;, &quot;OAuth&quot;);\n         //   conn.setRequestProperty(&quot;oauth_consumer_key&quot;, &quot;*******************&quot;);\n         //   conn.setRequestProperty(&quot;oauth_nonce&quot;, &quot;********&quot;);\n         //   conn.setRequestProperty(&quot;oauth_signature&quot;, &quot;*******&quot;);\n         //   conn.setRequestProperty(&quot;oauth_signature_method&quot;, &quot;HMAC-SHA256&quot;);\n         //   conn.setRequestProperty(&quot;oauth_timestamp&quot;, &quot;1633463792&quot;);\n         //   conn.setRequestProperty(&quot;oauth_version&quot;, &quot;1.0&quot;);\n\n\n            conn.setRequestProperty(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded&quot;);\n            conn.setDoOutput(true);\n            OutputStream os = conn.getOutputStream();\n            os.write(POST_PARAMS.getBytes());\n            os.flush();\n            os.close();\n\n            int responseCode = conn.getResponseCode();\n            return conn.getRequestMethod() +os + &quot;\\n&quot;+responseCode + &quot;\\nContent-type:&quot;+ conn.getRequestProperty(&quot;Content-Type&quot;) + &quot;\\nAuthorization: &quot;+ conn.getRequestProperty(&quot;Authorization&quot;);\n          }catch (Exception e){\n            e.printStackTrace();\n        }\n            \n  \n\n</code></pre>\n<p>On my return by postman when I call, it appears like this\nWhy always null?</p>\n<p>POSTgrant_type=client_credentials\n401\nContent-type:application/x-www-form-urlencoded\nAuthorization: null</p>\n<p><a href=\"https://i.stack.imgur.com/gOKAv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gOKAv.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":6781763,"reputation":3428,"user_id":5267751,"display_name":"user202729"},"score":0,"creation_date":1612233321,"post_id":6374050,"comment_id":116696825,"body_markdown":"This is mentioned in the accepted answer of [How to split a string in Java - Stack Overflow](https://stackoverflow.com/q/3481828). Related questions: How to split string by [(space)](https://stackoverflow.com/q/7899525)/[(backslash)](https://stackoverflow.com/q/23751618)/[(newline)](https://stackoverflow.com/q/454908)/[(pipe)](https://stackoverflow.com/q/10796160)? ; [How to escape text for regular expression in Java](https://stackoverflow.com/questions/60160/how-to-escape-text-for-regular-expression-in-java)","body":"This is mentioned in the accepted answer of <a href=\"https://stackoverflow.com/q/3481828\">How to split a string in Java - Stack Overflow</a>. Related questions: How to split string by <a href=\"https://stackoverflow.com/q/7899525\">(space)</a>/<a href=\"https://stackoverflow.com/q/23751618\">(backslash)</a>/<a href=\"https://stackoverflow.com/q/454908\">(newline)</a>/<a href=\"https://stackoverflow.com/q/10796160\">(pipe)</a>? ; <a href=\"https://stackoverflow.com/questions/60160/how-to-escape-text-for-regular-expression-in-java\">How to escape text for regular expression in Java</a>"}],"answers":[{"tags":[],"owner":{"account_id":27103,"reputation":35282,"user_id":71141,"accept_rate":82,"display_name":"Etienne de Martel"},"down_vote_count":3,"up_vote_count":7,"is_accepted":false,"score":4,"last_activity_date":1308236765,"creation_date":1308236765,"answer_id":6374070,"question_id":6374050,"body_markdown":"Escape the `?`:\r\n\r\n    s.split(&quot;r\\\\?&quot;);","title":"String.split() *not* on regular expression?","body":"<p>Escape the <code>?</code>:</p>\n\n<pre><code>s.split(\"r\\\\?\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":421466,"reputation":452,"user_id":799731,"accept_rate":100,"display_name":"BastiS"},"down_vote_count":2,"up_vote_count":15,"is_accepted":false,"score":13,"last_activity_date":1333910278,"creation_date":1308236849,"answer_id":6374095,"question_id":6374050,"body_markdown":"You can use \r\n\r\n    StringUtils.split(&quot;?r&quot;)\r\n\r\nfrom [commons-lang](http://commons.apache.org/lang/).","title":"String.split() *not* on regular expression?","body":"<p>You can use </p>\n\n<pre><code>StringUtils.split(\"?r\")\n</code></pre>\n\n<p>from <a href=\"http://commons.apache.org/lang/\" rel=\"noreferrer\">commons-lang</a>.</p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":1,"up_vote_count":107,"is_accepted":true,"score":106,"last_activity_date":1520252447,"creation_date":1308237008,"answer_id":6374137,"question_id":6374050,"body_markdown":"A general solution using just Java SE APIs is:\r\n\r\n    String separator = ...\r\n    s.split(Pattern.quote(separator));\r\n\r\nThe `quote` method returns a regex that will match the argument string as a literal.","title":"String.split() *not* on regular expression?","body":"<p>A general solution using just Java SE APIs is:</p>\n\n<pre><code>String separator = ...\ns.split(Pattern.quote(separator));\n</code></pre>\n\n<p>The <code>quote</code> method returns a regex that will match the argument string as a literal.</p>\n"},{"tags":[],"owner":{"account_id":4774,"reputation":26513,"user_id":7345,"accept_rate":81,"display_name":"mindas"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1623251959,"creation_date":1308237403,"answer_id":6374228,"question_id":6374050,"body_markdown":"Use [Guava Splitter][1]:\r\n\r\n&gt;Extracts non-overlapping substrings from an input string, typically by recognizing appearances of a separator sequence. This separator can be specified as a single character, fixed string, regular expression or CharMatcher instance. Or, instead of using a separator at all, a splitter can extract adjacent substrings of a given fixed length.\r\n\r\n  [1]:https://google.github.io/guava/releases/23.0/api/docs/com/google/common/base/Splitter.html","title":"String.split() *not* on regular expression?","body":"<p>Use <a href=\"https://google.github.io/guava/releases/23.0/api/docs/com/google/common/base/Splitter.html\" rel=\"nofollow noreferrer\">Guava Splitter</a>:</p>\n<blockquote>\n<p>Extracts non-overlapping substrings from an input string, typically by recognizing appearances of a separator sequence. This separator can be specified as a single character, fixed string, regular expression or CharMatcher instance. Or, instead of using a separator at all, a splitter can extract adjacent substrings of a given fixed length.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":51914,"reputation":67901,"user_id":155137,"accept_rate":91,"display_name":"Martijn Courteaux"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1445174530,"creation_date":1308237668,"answer_id":6374292,"question_id":6374050,"body_markdown":"This works perfect as well:\r\n\r\n    public static List&lt;String&gt; splitNonRegex(String input, String delim)\r\n    {\r\n        List&lt;String&gt; l = new ArrayList&lt;String&gt;();\r\n        int offset = 0;\r\n\r\n        while (true)\r\n        {\r\n            int index = input.indexOf(delim, offset);\r\n            if (index == -1)\r\n            {\r\n                l.add(input.substring(offset));\r\n                return l;\r\n            } else\r\n            {\r\n                l.add(input.substring(offset, index));\r\n                offset = (index + delim.length());\r\n            }\r\n        }\r\n    }","title":"String.split() *not* on regular expression?","body":"<p>This works perfect as well:</p>\n\n<pre><code>public static List&lt;String&gt; splitNonRegex(String input, String delim)\n{\n    List&lt;String&gt; l = new ArrayList&lt;String&gt;();\n    int offset = 0;\n\n    while (true)\n    {\n        int index = input.indexOf(delim, offset);\n        if (index == -1)\n        {\n            l.add(input.substring(offset));\n            return l;\n        } else\n        {\n            l.add(input.substring(offset, index));\n            offset = (index + delim.length());\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":352158,"reputation":49,"user_id":689069,"display_name":"贼小气"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1308316831,"creation_date":1308241217,"answer_id":6375195,"question_id":6374050,"body_markdown":"    String[] strs = str.split(Pattern.quote(&quot;r?&quot;));","title":"String.split() *not* on regular expression?","body":"<pre><code>String[] strs = str.split(Pattern.quote(\"r?\"));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5475819,"reputation":1022,"user_id":4353862,"display_name":"Manuel Romeiro"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1597729465,"creation_date":1532946462,"answer_id":51591920,"question_id":6374050,"body_markdown":"Using directly the Pattern class, is possible to define the expression as LITERAL, and in that case, the expression will be evaluated as is (not regex expression).\r\n\r\n    Pattern.compile(&lt;literalExpression&gt;, Pattern.LITERAL).split(&lt;stringToBeSplitted&gt;);\r\nexample:\r\n\r\n    String[] result = Pattern.compile(&quot;r?&quot;, Pattern.LITERAL).split(&quot;str?str?argh&quot;);\r\nwill result:\r\n\r\n    [st, st, argh]","title":"String.split() *not* on regular expression?","body":"<p>Using directly the Pattern class, is possible to define the expression as LITERAL, and in that case, the expression will be evaluated as is (not regex expression).</p>\n<pre><code>Pattern.compile(&lt;literalExpression&gt;, Pattern.LITERAL).split(&lt;stringToBeSplitted&gt;);\n</code></pre>\n<p>example:</p>\n<pre><code>String[] result = Pattern.compile(&quot;r?&quot;, Pattern.LITERAL).split(&quot;str?str?argh&quot;);\n</code></pre>\n<p>will result:</p>\n<pre><code>[st, st, argh]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":359719,"reputation":2830,"user_id":701303,"accept_rate":83,"display_name":"Alex Wittig"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1640890467,"creation_date":1640890467,"answer_id":70535623,"question_id":6374050,"body_markdown":"`org.apache.commons.lang.StringUtils` has methods for splitting Strings without expensive regular expressions.\r\n\r\nBe sure to read the javadocs closely as the behavior can be subtle.   `StringUtils.split` (as in another answer) does not meet the stated requirements.  Use `StringUtils.splitByWholeSeparator` instead:\r\n\r\n    String s = &quot;str?str?argh&quot;;\r\n    \r\n    StringUtils.split(s, &quot;r?&quot;);                   //[st, st, a, gh]\r\n    StringUtils.splitByWholeSeparator(s, &quot;r?&quot;);   //[st, st, argh]","title":"String.split() *not* on regular expression?","body":"<p><code>org.apache.commons.lang.StringUtils</code> has methods for splitting Strings without expensive regular expressions.</p>\n<p>Be sure to read the javadocs closely as the behavior can be subtle.   <code>StringUtils.split</code> (as in another answer) does not meet the stated requirements.  Use <code>StringUtils.splitByWholeSeparator</code> instead:</p>\n<pre><code>String s = &quot;str?str?argh&quot;;\n\nStringUtils.split(s, &quot;r?&quot;);                   //[st, st, a, gh]\nStringUtils.splitByWholeSeparator(s, &quot;r?&quot;);   //[st, st, argh]\n</code></pre>\n"}],"owner":{"account_id":103731,"reputation":53285,"user_id":277683,"accept_rate":68,"display_name":"Konrad Garus"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28334,"favorite_count":0,"down_vote_count":0,"up_vote_count":78,"accepted_answer_id":6374137,"answer_count":8,"score":78,"last_activity_date":1640890467,"creation_date":1308236676,"question_id":6374050,"body_markdown":"Since `String.split()` works with regular expressions, this snippet:\r\n\r\n    String s = &quot;str?str?argh&quot;;\r\n    s.split(&quot;r?&quot;);\r\n\r\n... yields: `[, s, t, , ?, s, t, , ?, a, , g, h]`\r\n\r\nWhat&#39;s the most elegant way to split this String on the `r?` sequence so that it produces `[st, st, argh]`?\r\n\r\n**EDIT**: I know that I can escape the problematic `?`. The trouble is I don&#39;t know the delimiter offhand and I don&#39;t feel like working this around by writing an `escapeGenericRegex()` function.","title":"String.split() *not* on regular expression?","body":"<p>Since <code>String.split()</code> works with regular expressions, this snippet:</p>\n\n<pre><code>String s = \"str?str?argh\";\ns.split(\"r?\");\n</code></pre>\n\n<p>... yields: <code>[, s, t, , ?, s, t, , ?, a, , g, h]</code></p>\n\n<p>What's the most elegant way to split this String on the <code>r?</code> sequence so that it produces <code>[st, st, argh]</code>?</p>\n\n<p><strong>EDIT</strong>: I know that I can escape the problematic <code>?</code>. The trouble is I don't know the delimiter offhand and I don't feel like working this around by writing an <code>escapeGenericRegex()</code> function.</p>\n"},{"tags":["java","hibernate","oracle12c"],"answers":[{"tags":[],"owner":{"account_id":357200,"reputation":1411,"user_id":697213,"accept_rate":38,"display_name":"TruckDriver"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1548319321,"creation_date":1548319321,"answer_id":54342465,"question_id":54341800,"body_markdown":"The error in  stacktrace clearly says that the table is not found.\r\n\r\n\r\n&lt;property name=&quot;hibernate.hbm2ddl.auto&quot; value=&quot;update&quot;/&gt;\r\n\r\n    Caused by: java.sql.SQLSyntaxErrorException: ORA-00942: table or view does not exist\r\n\r\nSo you can either create a table in your schema in oracle db or tell hibernate to create the table at the time of creation of session factory .\r\n\r\nYou can include the below property in your hibernate configuration file\r\n\r\n    &lt;property name=&quot;hibernate.hbm2ddl.auto&quot; value=&quot;create&quot;/&gt;\r\nSo hibernate will create a table for you.\r\n\r\nAlso, you need to annotate your entity class with @Table attribute\r\nI see that line is commented in your code\r\n\r\n    @Entity\r\n    //@Table(name=&quot;student&quot;)\r\n    public class Student {","title":"Exception in thread &quot;main&quot; javax.persistence.PersistenceException: org.hibernate.exception.SQLGrammarException: could not execute statement","body":"<p>The error in  stacktrace clearly says that the table is not found.</p>\n\n<p></p>\n\n<pre><code>Caused by: java.sql.SQLSyntaxErrorException: ORA-00942: table or view does not exist\n</code></pre>\n\n<p>So you can either create a table in your schema in oracle db or tell hibernate to create the table at the time of creation of session factory .</p>\n\n<p>You can include the below property in your hibernate configuration file</p>\n\n<pre><code>&lt;property name=\"hibernate.hbm2ddl.auto\" value=\"create\"/&gt;\n</code></pre>\n\n<p>So hibernate will create a table for you.</p>\n\n<p>Also, you need to annotate your entity class with @Table attribute\nI see that line is commented in your code</p>\n\n<pre><code>@Entity\n//@Table(name=\"student\")\npublic class Student {\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16552531,"reputation":1,"user_id":11960425,"display_name":"ChayanikaGhosh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1580901259,"creation_date":1580901259,"answer_id":60074559,"question_id":54341800,"body_markdown":"I have faced the same issue - This error is because your dependencies are not compatible with each other. \r\n    \r\n    Use the below dependencies and the error should be gone. \r\n    \r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hibernate-agroal&lt;/artifactId&gt;\r\n            &lt;version&gt;5.3.15.Final&lt;/version&gt;\r\n            &lt;type&gt;pom&lt;/type&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java --&gt;\r\n        &lt;dependency&gt;`enter code here`\r\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n            &lt;version&gt;8.0.15&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n         &lt;!--https://mvnrepository.com/artifact/org.hibernate/antlr--&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n            &lt;artifactId&gt;antlr&lt;/artifactId&gt;\r\n            &lt;version&gt;2.7.5H3&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/org.hibernate/hibernate-core --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n            &lt;version&gt;5.4.10.Final&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/org.hsqldb/hsqldb --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.hsqldb&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hsqldb&lt;/artifactId&gt;\r\n            &lt;version&gt;2.4.0&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/com.fasterxml/classmate --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml&lt;/groupId&gt;\r\n            &lt;artifactId&gt;classmate&lt;/artifactId&gt;\r\n            &lt;version&gt;1.3.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/dom4j/dom4j --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;dom4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;dom4j&lt;/artifactId&gt;\r\n            &lt;version&gt;1.6.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/javax.el/el-api --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;javax.el&lt;/groupId&gt;\r\n            &lt;artifactId&gt;el-api&lt;/artifactId&gt;\r\n            &lt;version&gt;2.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/org.apache.geronimo.specs/geronimo-jta_1.1_spec --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.geronimo.specs&lt;/groupId&gt;\r\n            &lt;artifactId&gt;geronimo-jta_1.1_spec&lt;/artifactId&gt;\r\n            &lt;version&gt;1.1.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/org.jboss/jandex --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.jboss&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jandex&lt;/artifactId&gt;\r\n            &lt;version&gt;2.1.2.Final&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/javassist/javassist --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;javassist&lt;/groupId&gt;\r\n            &lt;artifactId&gt;javassist&lt;/artifactId&gt;\r\n            &lt;version&gt;3.12.1.GA&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/javax.activation/javax.activation-api --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;javax.activation&lt;/groupId&gt;\r\n            &lt;artifactId&gt;javax.activation-api&lt;/artifactId&gt;\r\n            &lt;version&gt;1.2.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/com.sun.xml.bind/jaxb-core --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jaxb-core&lt;/artifactId&gt;\r\n            &lt;version&gt;2.3.0.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/com.sun.xml.bind/jaxb-impl --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\r\n            &lt;version&gt;2.3.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/javax.persistence/javax.persistence-api --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;javax.persistence&lt;/groupId&gt;\r\n            &lt;artifactId&gt;javax.persistence-api&lt;/artifactId&gt;\r\n            &lt;version&gt;2.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/javax.xml.bind/jaxb-api --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\r\n            &lt;version&gt;2.3.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/org.glassfish.jaxb/jaxb-runtime --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.glassfish.jaxb&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jaxb-runtime&lt;/artifactId&gt;\r\n            &lt;version&gt;2.3.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/org.jboss.logging/jboss-logging --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.jboss.logging&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jboss-logging&lt;/artifactId&gt;\r\n            &lt;version&gt;3.3.2.Final&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/org.jboss.spec.javax.transaction/jboss-transaction-api_1.2_spec --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.jboss.spec.javax.transaction&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jboss-transaction-api_1.2_spec&lt;/artifactId&gt;\r\n            &lt;version&gt;1.1.1.Final&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/org.jvnet.staxex/stax-ex --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.jvnet.staxex&lt;/groupId&gt;\r\n            &lt;artifactId&gt;stax-ex&lt;/artifactId&gt;\r\n            &lt;version&gt;1.8&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/org.glassfish.jaxb/txw2 --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.glassfish.jaxb&lt;/groupId&gt;\r\n            &lt;artifactId&gt;txw2&lt;/artifactId&gt;\r\n            &lt;version&gt;2.3.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;","title":"Exception in thread &quot;main&quot; javax.persistence.PersistenceException: org.hibernate.exception.SQLGrammarException: could not execute statement","body":"<p>I have faced the same issue - This error is because your dependencies are not compatible with each other. </p>\n\n<pre><code>Use the below dependencies and the error should be gone. \n\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-agroal&lt;/artifactId&gt;\n        &lt;version&gt;5.3.15.Final&lt;/version&gt;\n        &lt;type&gt;pom&lt;/type&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java --&gt;\n    &lt;dependency&gt;`enter code here`\n        &lt;groupId&gt;mysql&lt;/groupId&gt;\n        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n        &lt;version&gt;8.0.15&lt;/version&gt;\n    &lt;/dependency&gt;\n     &lt;!--https://mvnrepository.com/artifact/org.hibernate/antlr--&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;antlr&lt;/artifactId&gt;\n        &lt;version&gt;2.7.5H3&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/org.hibernate/hibernate-core --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n        &lt;version&gt;5.4.10.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/org.hsqldb/hsqldb --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.hsqldb&lt;/groupId&gt;\n        &lt;artifactId&gt;hsqldb&lt;/artifactId&gt;\n        &lt;version&gt;2.4.0&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/com.fasterxml/classmate --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml&lt;/groupId&gt;\n        &lt;artifactId&gt;classmate&lt;/artifactId&gt;\n        &lt;version&gt;1.3.1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/dom4j/dom4j --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;dom4j&lt;/groupId&gt;\n        &lt;artifactId&gt;dom4j&lt;/artifactId&gt;\n        &lt;version&gt;1.6.1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/javax.el/el-api --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax.el&lt;/groupId&gt;\n        &lt;artifactId&gt;el-api&lt;/artifactId&gt;\n        &lt;version&gt;2.2&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/org.apache.geronimo.specs/geronimo-jta_1.1_spec --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.geronimo.specs&lt;/groupId&gt;\n        &lt;artifactId&gt;geronimo-jta_1.1_spec&lt;/artifactId&gt;\n        &lt;version&gt;1.1.1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/org.jboss/jandex --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.jboss&lt;/groupId&gt;\n        &lt;artifactId&gt;jandex&lt;/artifactId&gt;\n        &lt;version&gt;2.1.2.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/javassist/javassist --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;javassist&lt;/groupId&gt;\n        &lt;artifactId&gt;javassist&lt;/artifactId&gt;\n        &lt;version&gt;3.12.1.GA&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/javax.activation/javax.activation-api --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax.activation&lt;/groupId&gt;\n        &lt;artifactId&gt;javax.activation-api&lt;/artifactId&gt;\n        &lt;version&gt;1.2.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/com.sun.xml.bind/jaxb-core --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\n        &lt;artifactId&gt;jaxb-core&lt;/artifactId&gt;\n        &lt;version&gt;2.3.0.1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/com.sun.xml.bind/jaxb-impl --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\n        &lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\n        &lt;version&gt;2.3.2&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/javax.persistence/javax.persistence-api --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax.persistence&lt;/groupId&gt;\n        &lt;artifactId&gt;javax.persistence-api&lt;/artifactId&gt;\n        &lt;version&gt;2.2&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/javax.xml.bind/jaxb-api --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\n        &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\n        &lt;version&gt;2.3.1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/org.glassfish.jaxb/jaxb-runtime --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.glassfish.jaxb&lt;/groupId&gt;\n        &lt;artifactId&gt;jaxb-runtime&lt;/artifactId&gt;\n        &lt;version&gt;2.3.1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/org.jboss.logging/jboss-logging --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.jboss.logging&lt;/groupId&gt;\n        &lt;artifactId&gt;jboss-logging&lt;/artifactId&gt;\n        &lt;version&gt;3.3.2.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/org.jboss.spec.javax.transaction/jboss-transaction-api_1.2_spec --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.jboss.spec.javax.transaction&lt;/groupId&gt;\n        &lt;artifactId&gt;jboss-transaction-api_1.2_spec&lt;/artifactId&gt;\n        &lt;version&gt;1.1.1.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/org.jvnet.staxex/stax-ex --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.jvnet.staxex&lt;/groupId&gt;\n        &lt;artifactId&gt;stax-ex&lt;/artifactId&gt;\n        &lt;version&gt;1.8&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/org.glassfish.jaxb/txw2 --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.glassfish.jaxb&lt;/groupId&gt;\n        &lt;artifactId&gt;txw2&lt;/artifactId&gt;\n        &lt;version&gt;2.3.1&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20692183,"reputation":56,"user_id":17001958,"display_name":"Junaid Aslam"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640890427,"creation_date":1640889994,"answer_id":70535550,"question_id":54341800,"body_markdown":"In my case, this error is generated when someone using latest version of hibernate.\r\n\r\nIn order to resolve it, simply go to `hibernate.cfg.xml` file and change dialect according to your version. In my case, I am using version 5 in MySQL Workbench.\r\n\r\n**hibernate.cfg.xml**:\r\n\r\n    &lt;property name=&quot;dialect&quot;&gt;org.hibernate.dialect.MySQL5Dialect&lt;/property&gt;\r\n\r\nOnly Change done is:\r\n\r\n    &lt;property name=&quot;dialect&quot;&gt;org.hibernate.dialect.MySQL5Dialect&lt;/property&gt;\r\n\r\nfrom\r\n\r\n    &lt;property name=&quot;dialect&quot;&gt;org.hibernate.dialect.MySQLDialect&lt;/property&gt;","title":"Exception in thread &quot;main&quot; javax.persistence.PersistenceException: org.hibernate.exception.SQLGrammarException: could not execute statement","body":"<p>In my case, this error is generated when someone using latest version of hibernate.</p>\n<p>In order to resolve it, simply go to <code>hibernate.cfg.xml</code> file and change dialect according to your version. In my case, I am using version 5 in MySQL Workbench.</p>\n<p><strong>hibernate.cfg.xml</strong>:</p>\n<pre><code>&lt;property name=&quot;dialect&quot;&gt;org.hibernate.dialect.MySQL5Dialect&lt;/property&gt;\n</code></pre>\n<p>Only Change done is:</p>\n<pre><code>&lt;property name=&quot;dialect&quot;&gt;org.hibernate.dialect.MySQL5Dialect&lt;/property&gt;\n</code></pre>\n<p>from</p>\n<pre><code>&lt;property name=&quot;dialect&quot;&gt;org.hibernate.dialect.MySQLDialect&lt;/property&gt;\n</code></pre>\n"}],"owner":{"account_id":10969678,"reputation":41,"user_id":8060390,"display_name":"Sohaib Ahmed"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3101,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1640890427,"creation_date":1548316644,"question_id":54341800,"body_markdown":"I am using hibernate 5 with orcale 12c and java 9\r\nWhen i execute this code error occur hibernate could not execute statement\r\n\r\nI wrote easy program at Hibernate and caught bunch of exception .\r\n\r\nI couldn&#39;t find out what the exactly thing is wrong.\r\n\r\nI have three classes - student, main and hibernate.cfg,xml. \r\n\r\nthis is very simple hibernate code which involve only one class which is student class\r\n\r\n###STUDENT.JAVA###\r\n\r\n    package hibernate.demo.entity;\r\n    \r\n    import javax.persistence.Column;\r\n    import javax.persistence.Entity;\r\n    import javax.persistence.GeneratedValue;\r\n    import javax.persistence.GenerationType;\r\n    import javax.persistence.Id;\r\n    import javax.persistence.Table;\r\n    \r\n    @Entity\r\n    //@Table(name=&quot;student&quot;)\r\n    public class Student {\r\n    \t\r\n    \t@Id\r\n    //\t@GeneratedValue(strategy=GenerationType.AUTO)\r\n    \t@Column(name=&quot;id&quot;)\r\n    \tprivate int id;\r\n    \t\r\n    \t@Column(name=&quot;first_Name&quot;)\r\n    \tprivate String firstName;\r\n    \t\r\n    \t@Column(name=&quot;last_Name&quot;)\r\n    \tprivate String lastName;\r\n    \t\r\n    \t@Column(name=&quot;email&quot;)\r\n    \tprivate String email;\r\n    \t\r\n    \tpublic Student() {\r\n    \t\t\r\n    \t}\r\n    \tpublic Student(String firstName, String lastName, String email) {\r\n    \t\tsuper();\r\n    \t\tthis.firstName = firstName;\r\n    \t\tthis.lastName = lastName;\r\n    \t\tthis.email = email;\r\n    \t}\r\n    \tpublic int getId() {\r\n    \t\treturn id;\r\n    \t}\r\n    \tpublic void setId(int id) {\r\n    \t\tthis.id = id;\r\n    \t}\r\n    \tpublic String getFirstName() {\r\n    \t\treturn firstName;\r\n    \t}\r\n    \tpublic void setFirstName(String firstName) {\r\n    \t\tthis.firstName = firstName;\r\n    \t}\r\n    \tpublic String getLastName() {\r\n    \t\treturn lastName;\r\n    \t}\r\n    \tpublic void setLastName(String lastName) {\r\n    \t\tthis.lastName = lastName;\r\n    \t}\r\n    \tpublic String getEmail() {\r\n    \t\treturn email;\r\n    \t}\r\n    \tpublic void setEmail(String email) {\r\n    \t\tthis.email = email;\r\n    \t}\r\n    \t@Override\r\n    \tpublic String toString() {\r\n    \t\treturn &quot;Student [id=&quot; + id + &quot;, firstName=&quot; + firstName + &quot;, lastName=&quot; + lastName + &quot;, email=&quot; + email + &quot;]&quot;;\r\n    \t}\r\n    \r\n    }\r\n\r\n##hibernate.cfg.xml##\r\n\r\n    &lt;!DOCTYPE hibernate-configuration PUBLIC\r\n            &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot;\r\n            &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\r\n    \r\n    &lt;hibernate-configuration&gt;\r\n    \r\n        &lt;session-factory&gt;\r\n    \r\n            &lt;!-- JDBC Database connection settings --&gt;\r\n            \r\n            &lt;property name=&quot;connection.url&quot;&gt;jdbc:oracle:thin:@localhost:1521:orcl&lt;/property&gt;\r\n            &lt;property name=&quot;connection.username&quot;&gt;scott&lt;/property&gt;\r\n            &lt;property name=&quot;connection.password&quot;&gt;tiger&lt;/property&gt;\r\n    \t\t&lt;property name=&quot;connection.driver_class&quot;&gt;oracle.jdbc.driver.OracleDriver&lt;/property&gt;\r\n            &lt;!-- JDBC connection pool settings ... using built-in test pool --&gt;\r\n            &lt;property name=&quot;connection.pool_size&quot;&gt;1&lt;/property&gt;\r\n    \r\n            &lt;!-- Select our SQL dialect --&gt;\r\n            &lt;property name=&quot;dialect&quot;&gt;org.hibernate.dialect.Oracle10gDialect&lt;/property&gt;\r\n    \r\n            &lt;!-- Echo the SQL to stdout --&gt;\r\n            &lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;\r\n    \r\n    \t\t&lt;!-- Set the current session context --&gt;\r\n    \t\t&lt;property name=&quot;current_session_context_class&quot;&gt;thread&lt;/property&gt;\r\n     \r\n        &lt;/session-factory&gt;\r\n    \r\n    &lt;/hibernate-configuration&gt;\r\n\r\n##main class##\r\n\r\n    package hibernate.demo;\r\n    \r\n    import org.hibernate.Session;\r\n    import org.hibernate.SessionFactory;\r\n    import org.hibernate.cfg.Configuration;\r\n    \r\n    import hibernate.demo.entity.Student;\r\n    \r\n    public class ClassStudentDemo {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\t\r\n    \t\t// create session factory\r\n    \t\tSessionFactory factory = new Configuration()\r\n    \t\t\t\t.configure(&quot;hibernate.cfg.xml&quot;)\r\n    \t\t\t\t.addAnnotatedClass(Student.class)\r\n    \t\t\t\t.buildSessionFactory();\r\n    \r\n    \t\t//create session\r\n    \t\t\r\n    \t\tSession session = factory.getCurrentSession();\r\n    \t\t\r\n    \t\ttry {\r\n    \t\t\t//create student object\r\n    \t\t\tSystem.out.println(&quot;creating new Student object...&quot;);\r\n    \t\t\tStudent tempStudent = new Student(&quot;sohaib&quot;,&quot;ahmed&quot;,&quot;sohaibahmedawan@gmail.com&quot;);\r\n    \t\t\t\r\n    \t\t\t//start a transaction\r\n    \t\t\tsession.beginTransaction();\r\n    \t\t\t\r\n    \t\t\t//save the student object\r\n    \t\t\tSystem.out.println(&quot;Saving the student....&quot;);\r\n    \t\t\tsession.save(tempStudent);\r\n    \t\t\r\n    \t\t\t///commit transaction\r\n    \t\t\tsession.getTransaction().commit();\r\n    \t\t\t\r\n    \t\t\tSystem.out.println(&quot;Done!!!&quot;);\r\n    \t\t}\r\n    \t\tfinally {\r\n    \t\t\tfactory.close();\r\n    \t\t}\r\n    \r\n    \t}\r\n\r\n\r\n\r\n## error#\r\n\r\n    Jan 24, 2019 12:36:27 PM org.hibernate.Version logVersion\r\n    INFO: HHH000412: Hibernate Core {5.4.1.Final}\r\n    Jan 24, 2019 12:36:27 PM org.hibernate.annotations.common.reflection.java.JavaReflectionManager &lt;clinit&gt;\r\n    INFO: HCANN000001: Hibernate Commons Annotations {5.1.0.Final}\r\n    Jan 24, 2019 12:36:28 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure\r\n    WARN: HHH10001002: Using Hibernate built-in connection pool (not for production use!)\r\n    Jan 24, 2019 12:36:28 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator\r\n    INFO: HHH10001005: using driver [oracle.jdbc.driver.OracleDriver] at URL [jdbc:oracle:thin:@localhost:1521:orcl]\r\n    Jan 24, 2019 12:36:28 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator\r\n    INFO: HHH10001001: Connection properties: {password=****, user=scott}\r\n    Jan 24, 2019 12:36:28 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator\r\n    INFO: HHH10001003: Autocommit mode: false\r\n    Jan 24, 2019 12:36:28 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl$PooledConnections &lt;init&gt;\r\n    INFO: HHH000115: Hibernate connection pool size: 1 (min=1)\r\n    Jan 24, 2019 12:36:29 PM org.hibernate.dialect.Dialect &lt;init&gt;\r\n    INFO: HHH000400: Using dialect: org.hibernate.dialect.Oracle10gDialect\r\n    creating new Student object...\r\n    Saving the student....\r\n    Hibernate: insert into Student (email, first_Name, last_Name, id) values (?, ?, ?, ?)\r\n    Jan 24, 2019 12:36:31 PM org.hibernate.engine.jdbc.spi.SqlExceptionHelper logExceptions\r\n    WARN: SQL Error: 942, SQLState: 42000\r\n    Jan 24, 2019 12:36:31 PM org.hibernate.engine.jdbc.spi.SqlExceptionHelper logExceptions\r\n    ERROR: ORA-00942: table or view does not exist\r\n    \r\n    Jan 24, 2019 12:36:31 PM org.hibernate.internal.ExceptionMapperStandardImpl mapManagedFlushFailure\r\n    ERROR: HHH000346: Error during managed flush [org.hibernate.exception.SQLGrammarException: could not execute statement]\r\n    Jan 24, 2019 12:36:31 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl$PoolState stop\r\n    INFO: HHH10001008: Cleaning up connection pool [jdbc:oracle:thin:@localhost:1521:orcl]\r\n    Exception in thread &quot;main&quot; javax.persistence.PersistenceException: org.hibernate.exception.SQLGrammarException: could not execute statement\r\n    \tat org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:154)\r\n    \tat org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:181)\r\n    \tat org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:188)\r\n    \tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1490)\r\n    \tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:515)\r\n    \tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3348)\r\n    \tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2519)\r\n    \tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:473)\r\n    \tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:178)\r\n    \tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:39)\r\n    \tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:271)\r\n    \tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:104)\r\n    \tat hibernate.demo.ClassStudentDemo.main(ClassStudentDemo.java:36)\r\n    Caused by: org.hibernate.exception.SQLGrammarException: could not execute statement\r\n    \tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:63)\r\n    \tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:42)\r\n    \tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)\r\n    \tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:99)\r\n    \tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:178)\r\n    \tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3175)\r\n    \tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3689)\r\n    \tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:90)\r\n    \tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604)\r\n    \tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:478)\r\n    \tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:356)\r\n    \tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n    \tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1484)\r\n    \t... 9 more\r\n    Caused by: java.sql.SQLSyntaxErrorException: ORA-00942: table or view does not exist\r\n    \r\n    \tat oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:450)\r\n    \tat oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:399)\r\n    \tat oracle.jdbc.driver.T4C8Oall.processError(T4C8Oall.java:1017)\r\n    \tat oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:655)\r\n    \tat oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:249)\r\n    \tat oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:566)\r\n    \tat oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:215)\r\n    \tat oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:58)\r\n    \tat oracle.jdbc.driver.T4CPreparedStatement.executeForRows(T4CPreparedStatement.java:943)\r\n    \tat oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1075)\r\n    \tat oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3820)\r\n    \tat oracle.jdbc.driver.OraclePreparedStatement.executeUpdate(OraclePreparedStatement.java:3897)\r\n    \tat oracle.jdbc.driver.OraclePreparedStatementWrapper.executeUpdate(OraclePreparedStatementWrapper.java:1361)\r\n    \tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:175)\r\n    \t... 17 more\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"Exception in thread &quot;main&quot; javax.persistence.PersistenceException: org.hibernate.exception.SQLGrammarException: could not execute statement","body":"<p>I am using hibernate 5 with orcale 12c and java 9\nWhen i execute this code error occur hibernate could not execute statement</p>\n\n<p>I wrote easy program at Hibernate and caught bunch of exception .</p>\n\n<p>I couldn't find out what the exactly thing is wrong.</p>\n\n<p>I have three classes - student, main and hibernate.cfg,xml. </p>\n\n<p>this is very simple hibernate code which involve only one class which is student class</p>\n\n<h3>STUDENT.JAVA</h3>\n\n<pre><code>package hibernate.demo.entity;\n\nimport javax.persistence.Column;\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.Table;\n\n@Entity\n//@Table(name=\"student\")\npublic class Student {\n\n    @Id\n//  @GeneratedValue(strategy=GenerationType.AUTO)\n    @Column(name=\"id\")\n    private int id;\n\n    @Column(name=\"first_Name\")\n    private String firstName;\n\n    @Column(name=\"last_Name\")\n    private String lastName;\n\n    @Column(name=\"email\")\n    private String email;\n\n    public Student() {\n\n    }\n    public Student(String firstName, String lastName, String email) {\n        super();\n        this.firstName = firstName;\n        this.lastName = lastName;\n        this.email = email;\n    }\n    public int getId() {\n        return id;\n    }\n    public void setId(int id) {\n        this.id = id;\n    }\n    public String getFirstName() {\n        return firstName;\n    }\n    public void setFirstName(String firstName) {\n        this.firstName = firstName;\n    }\n    public String getLastName() {\n        return lastName;\n    }\n    public void setLastName(String lastName) {\n        this.lastName = lastName;\n    }\n    public String getEmail() {\n        return email;\n    }\n    public void setEmail(String email) {\n        this.email = email;\n    }\n    @Override\n    public String toString() {\n        return \"Student [id=\" + id + \", firstName=\" + firstName + \", lastName=\" + lastName + \", email=\" + email + \"]\";\n    }\n\n}\n</code></pre>\n\n<h2>hibernate.cfg.xml</h2>\n\n<pre><code>&lt;!DOCTYPE hibernate-configuration PUBLIC\n        \"-//Hibernate/Hibernate Configuration DTD 3.0//EN\"\n        \"http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd\"&gt;\n\n&lt;hibernate-configuration&gt;\n\n    &lt;session-factory&gt;\n\n        &lt;!-- JDBC Database connection settings --&gt;\n\n        &lt;property name=\"connection.url\"&gt;jdbc:oracle:thin:@localhost:1521:orcl&lt;/property&gt;\n        &lt;property name=\"connection.username\"&gt;scott&lt;/property&gt;\n        &lt;property name=\"connection.password\"&gt;tiger&lt;/property&gt;\n        &lt;property name=\"connection.driver_class\"&gt;oracle.jdbc.driver.OracleDriver&lt;/property&gt;\n        &lt;!-- JDBC connection pool settings ... using built-in test pool --&gt;\n        &lt;property name=\"connection.pool_size\"&gt;1&lt;/property&gt;\n\n        &lt;!-- Select our SQL dialect --&gt;\n        &lt;property name=\"dialect\"&gt;org.hibernate.dialect.Oracle10gDialect&lt;/property&gt;\n\n        &lt;!-- Echo the SQL to stdout --&gt;\n        &lt;property name=\"show_sql\"&gt;true&lt;/property&gt;\n\n        &lt;!-- Set the current session context --&gt;\n        &lt;property name=\"current_session_context_class\"&gt;thread&lt;/property&gt;\n\n    &lt;/session-factory&gt;\n\n&lt;/hibernate-configuration&gt;\n</code></pre>\n\n<h2>main class</h2>\n\n<pre><code>package hibernate.demo;\n\nimport org.hibernate.Session;\nimport org.hibernate.SessionFactory;\nimport org.hibernate.cfg.Configuration;\n\nimport hibernate.demo.entity.Student;\n\npublic class ClassStudentDemo {\n\n    public static void main(String[] args) {\n\n        // create session factory\n        SessionFactory factory = new Configuration()\n                .configure(\"hibernate.cfg.xml\")\n                .addAnnotatedClass(Student.class)\n                .buildSessionFactory();\n\n        //create session\n\n        Session session = factory.getCurrentSession();\n\n        try {\n            //create student object\n            System.out.println(\"creating new Student object...\");\n            Student tempStudent = new Student(\"sohaib\",\"ahmed\",\"sohaibahmedawan@gmail.com\");\n\n            //start a transaction\n            session.beginTransaction();\n\n            //save the student object\n            System.out.println(\"Saving the student....\");\n            session.save(tempStudent);\n\n            ///commit transaction\n            session.getTransaction().commit();\n\n            System.out.println(\"Done!!!\");\n        }\n        finally {\n            factory.close();\n        }\n\n    }\n</code></pre>\n\n<h2>error</h2>\n\n<pre><code>Jan 24, 2019 12:36:27 PM org.hibernate.Version logVersion\nINFO: HHH000412: Hibernate Core {5.4.1.Final}\nJan 24, 2019 12:36:27 PM org.hibernate.annotations.common.reflection.java.JavaReflectionManager &lt;clinit&gt;\nINFO: HCANN000001: Hibernate Commons Annotations {5.1.0.Final}\nJan 24, 2019 12:36:28 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure\nWARN: HHH10001002: Using Hibernate built-in connection pool (not for production use!)\nJan 24, 2019 12:36:28 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator\nINFO: HHH10001005: using driver [oracle.jdbc.driver.OracleDriver] at URL [jdbc:oracle:thin:@localhost:1521:orcl]\nJan 24, 2019 12:36:28 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator\nINFO: HHH10001001: Connection properties: {password=****, user=scott}\nJan 24, 2019 12:36:28 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator\nINFO: HHH10001003: Autocommit mode: false\nJan 24, 2019 12:36:28 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl$PooledConnections &lt;init&gt;\nINFO: HHH000115: Hibernate connection pool size: 1 (min=1)\nJan 24, 2019 12:36:29 PM org.hibernate.dialect.Dialect &lt;init&gt;\nINFO: HHH000400: Using dialect: org.hibernate.dialect.Oracle10gDialect\ncreating new Student object...\nSaving the student....\nHibernate: insert into Student (email, first_Name, last_Name, id) values (?, ?, ?, ?)\nJan 24, 2019 12:36:31 PM org.hibernate.engine.jdbc.spi.SqlExceptionHelper logExceptions\nWARN: SQL Error: 942, SQLState: 42000\nJan 24, 2019 12:36:31 PM org.hibernate.engine.jdbc.spi.SqlExceptionHelper logExceptions\nERROR: ORA-00942: table or view does not exist\n\nJan 24, 2019 12:36:31 PM org.hibernate.internal.ExceptionMapperStandardImpl mapManagedFlushFailure\nERROR: HHH000346: Error during managed flush [org.hibernate.exception.SQLGrammarException: could not execute statement]\nJan 24, 2019 12:36:31 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl$PoolState stop\nINFO: HHH10001008: Cleaning up connection pool [jdbc:oracle:thin:@localhost:1521:orcl]\nException in thread \"main\" javax.persistence.PersistenceException: org.hibernate.exception.SQLGrammarException: could not execute statement\n    at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:154)\n    at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:181)\n    at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:188)\n    at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1490)\n    at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:515)\n    at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3348)\n    at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2519)\n    at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:473)\n    at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:178)\n    at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:39)\n    at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:271)\n    at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:104)\n    at hibernate.demo.ClassStudentDemo.main(ClassStudentDemo.java:36)\nCaused by: org.hibernate.exception.SQLGrammarException: could not execute statement\n    at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:63)\n    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:42)\n    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)\n    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:99)\n    at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:178)\n    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3175)\n    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3689)\n    at org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:90)\n    at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604)\n    at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:478)\n    at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:356)\n    at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\n    at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1484)\n    ... 9 more\nCaused by: java.sql.SQLSyntaxErrorException: ORA-00942: table or view does not exist\n\n    at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:450)\n    at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:399)\n    at oracle.jdbc.driver.T4C8Oall.processError(T4C8Oall.java:1017)\n    at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:655)\n    at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:249)\n    at oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:566)\n    at oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:215)\n    at oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:58)\n    at oracle.jdbc.driver.T4CPreparedStatement.executeForRows(T4CPreparedStatement.java:943)\n    at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1075)\n    at oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3820)\n    at oracle.jdbc.driver.OraclePreparedStatement.executeUpdate(OraclePreparedStatement.java:3897)\n    at oracle.jdbc.driver.OraclePreparedStatementWrapper.executeUpdate(OraclePreparedStatementWrapper.java:1361)\n    at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:175)\n    ... 17 more\n</code></pre>\n"},{"tags":["java","maven","dependencies","frontend"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1536175423,"post_id":52192059,"comment_id":91333987,"body_markdown":"define correct dependencies between those modules which defines the correct build order...","body":"define correct dependencies between those modules which defines the correct build order..."},{"owner":{"account_id":13236668,"reputation":97,"user_id":9558619,"display_name":"hlepme"},"score":0,"creation_date":1536176217,"post_id":52192059,"comment_id":91334325,"body_markdown":"But how can I do that if the frontend module is not a jar?","body":"But how can I do that if the frontend module is not a jar?"},{"owner":{"account_id":3028916,"reputation":35508,"user_id":2568341,"accept_rate":57,"display_name":"krokodilko"},"score":0,"creation_date":1536178891,"post_id":52192059,"comment_id":91335470,"body_markdown":"Move `frontend` module before `backend` module in main pom.xml. If the modules do not depend on each other, maven builds in the order in which the modules are declared in main pom.xml","body":"Move <code>frontend</code> module before <code>backend</code> module in main pom.xml. If the modules do not depend on each other, maven builds in the order in which the modules are declared in main pom.xml"},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1536181140,"post_id":52192059,"comment_id":91336348,"body_markdown":"If you are packaging the frontend module via maven-assembly you have to use a dependency on the frontend module which defines the order of built. A strongly recommend not to rely on the module order in parent pom...always define it explicitly.","body":"If you are packaging the frontend module via maven-assembly you have to use a dependency on the frontend module which defines the order of built. A strongly recommend not to rely on the module order in parent pom...always define it explicitly."}],"answers":[{"tags":[],"owner":{"account_id":167535,"reputation":760,"user_id":392401,"accept_rate":25,"display_name":"Nielk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640890209,"creation_date":1640883277,"answer_id":70534499,"question_id":52192059,"body_markdown":"You need to explicitly mention the **type** of the dependency\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;xxx&lt;/groupId&gt;\r\n        &lt;artifactId&gt;yyyy&lt;/artifactId&gt;\r\n        &lt;type&gt;pom&lt;/type&gt;\r\n    &lt;/dependency&gt;\r\n\r\n","title":"How to hint maven to build one module before another if it is not a jar dependency","body":"<p>You need to explicitly mention the <strong>type</strong> of the dependency</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;xxx&lt;/groupId&gt;\n    &lt;artifactId&gt;yyyy&lt;/artifactId&gt;\n    &lt;type&gt;pom&lt;/type&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":13236668,"reputation":97,"user_id":9558619,"display_name":"hlepme"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":341,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1640890209,"creation_date":1536175149,"question_id":52192059,"body_markdown":"I have a maven module (let&#39;s call it frontend) which contains no java code but instead uses `frontend-maven-plugin` to build a js frontend. Another (backend) module uses the built data from the frontend module and embeds it in itself via the `maven-assembly-plugin` like this.\r\n\r\n        &lt;fileSet&gt;\r\n            &lt;directory&gt;${project.parent.basedir}/frontend/target/dist&lt;/directory&gt;\r\n            &lt;outputDirectory&gt;/&lt;/outputDirectory&gt;\r\n        &lt;/fileSet&gt; \r\n\r\nThis works, however when running maven install on the project containing these two modules, backend module seems to always build first, which means it either doesn&#39;t pick up the front-end files (in case of a first time build or `clean install`) or it always picks up the previous build. I&#39;ve read that maven decides the build order by checking if the modules depend on each other either as dependencies or plugins or something, however as the frontend module is not java, it can&#39;t work as a dependency. Is there any other way I can hint to maven to consider building frontend first?","title":"How to hint maven to build one module before another if it is not a jar dependency","body":"<p>I have a maven module (let's call it frontend) which contains no java code but instead uses <code>frontend-maven-plugin</code> to build a js frontend. Another (backend) module uses the built data from the frontend module and embeds it in itself via the <code>maven-assembly-plugin</code> like this.</p>\n\n<pre><code>    &lt;fileSet&gt;\n        &lt;directory&gt;${project.parent.basedir}/frontend/target/dist&lt;/directory&gt;\n        &lt;outputDirectory&gt;/&lt;/outputDirectory&gt;\n    &lt;/fileSet&gt; \n</code></pre>\n\n<p>This works, however when running maven install on the project containing these two modules, backend module seems to always build first, which means it either doesn't pick up the front-end files (in case of a first time build or <code>clean install</code>) or it always picks up the previous build. I've read that maven decides the build order by checking if the modules depend on each other either as dependencies or plugins or something, however as the frontend module is not java, it can't work as a dependency. Is there any other way I can hint to maven to consider building frontend first?</p>\n"},{"tags":["java","android","sql","datetime","android-room"],"answers":[{"tags":[],"owner":{"account_id":6077735,"reputation":52951,"user_id":4744514,"accept_rate":96,"display_name":"MikeT"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1640890149,"creation_date":1640890149,"answer_id":70535574,"question_id":70534181,"body_markdown":"&gt; There is a suspicion that this method of comparison through conversion does not work\r\n\r\nRun the App from Android Studio. Whilst awaiting user input after accessing the database then use **App Inspection**. Look at the TaskEntry table are values stored as expected? If so then odds on the TypeConverters are working.\r\n\r\nNext click on the Open new Query icon (table with looking glass) then visit you DAO class and click on the same icon along side the @Query in question, input suitable value(s) and click run. If the data displays as expected then the query is fine, so look at the LiveData aspect.\r\n\r\nHere&#39;s a sort of demo via screen shots (obviously with a different App and databases but with time stores as a long to a precision of seconds):-\r\n\r\n[![enter image description here][1]][1]\r\n\r\nafter clicking run :-\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/NLBky.png\r\n  [2]: https://i.stack.imgur.com/vUSRt.png","title":"Selection of tasks for the current day in Room","body":"<blockquote>\n<p>There is a suspicion that this method of comparison through conversion does not work</p>\n</blockquote>\n<p>Run the App from Android Studio. Whilst awaiting user input after accessing the database then use <strong>App Inspection</strong>. Look at the TaskEntry table are values stored as expected? If so then odds on the TypeConverters are working.</p>\n<p>Next click on the Open new Query icon (table with looking glass) then visit you DAO class and click on the same icon along side the @Query in question, input suitable value(s) and click run. If the data displays as expected then the query is fine, so look at the LiveData aspect.</p>\n<p>Here's a sort of demo via screen shots (obviously with a different App and databases but with time stores as a long to a precision of seconds):-</p>\n<p><a href=\"https://i.stack.imgur.com/NLBky.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NLBky.png\" alt=\"enter image description here\" /></a></p>\n<p>after clicking run :-</p>\n<p><a href=\"https://i.stack.imgur.com/vUSRt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vUSRt.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":4298033,"reputation":115,"user_id":3512528,"display_name":"Tas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70535574,"answer_count":1,"score":0,"last_activity_date":1640890149,"creation_date":1640881616,"question_id":70534181,"body_markdown":"The Room database implements the Task class with date/time fields.\r\n\r\n&lt;!-- language-all: lang-java --&gt;\r\n\r\n    @ColumnInfo(name = TaskEntry.COLUMN_CREATE_DATE)\r\n    @TypeConverters({LocalDateTimeConverter.class, LDateTimeConverter.class})\r\n    private LocalDateTime createDate;\r\n    @ColumnInfo(name = TaskEntry.COLUMN_FINISH_DATE)\r\n    @TypeConverters({LocalDateTimeConverter.class, LDateTimeConverter.class})\r\n    private LocalDateTime finishDate;\r\n\r\nA function is implemented for selecting tasks that are available today and not completed, but its results are ignored and a full list of tasks is issued without a range of selected dates.\r\n\r\n    @Query(&quot;Select * from &quot; + TaskEntry.TABLE_NAME\r\n    + &quot; where (&quot; + TaskEntry.COLUMN_CREATE_DATE + &quot; &gt;= :startDayTime&quot;\r\n    + &quot; or &quot; + TaskEntry.COLUMN_FINISH_DATE + &quot; &lt; :endDayTime)&quot;\r\n    + &quot; and &quot; + TaskEntry.COLUMN_FINISHED + &quot; = 0&quot;)\r\n    LiveData&lt;List&lt;Task&gt;&gt; getLiveDailyTasks(Long startDayTime, Long endDayTime);\r\n\r\nThere is a suspicion that this method of comparison through conversion does not work, but how then can this still be implemented?\r\n","title":"Selection of tasks for the current day in Room","body":"<p>The Room database implements the Task class with date/time fields.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@ColumnInfo(name = TaskEntry.COLUMN_CREATE_DATE)\n@TypeConverters({LocalDateTimeConverter.class, LDateTimeConverter.class})\nprivate LocalDateTime createDate;\n@ColumnInfo(name = TaskEntry.COLUMN_FINISH_DATE)\n@TypeConverters({LocalDateTimeConverter.class, LDateTimeConverter.class})\nprivate LocalDateTime finishDate;\n</code></pre>\n<p>A function is implemented for selecting tasks that are available today and not completed, but its results are ignored and a full list of tasks is issued without a range of selected dates.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Query(&quot;Select * from &quot; + TaskEntry.TABLE_NAME\n+ &quot; where (&quot; + TaskEntry.COLUMN_CREATE_DATE + &quot; &gt;= :startDayTime&quot;\n+ &quot; or &quot; + TaskEntry.COLUMN_FINISH_DATE + &quot; &lt; :endDayTime)&quot;\n+ &quot; and &quot; + TaskEntry.COLUMN_FINISHED + &quot; = 0&quot;)\nLiveData&lt;List&lt;Task&gt;&gt; getLiveDailyTasks(Long startDayTime, Long endDayTime);\n</code></pre>\n<p>There is a suspicion that this method of comparison through conversion does not work, but how then can this still be implemented?</p>\n"},{"tags":["java","out-of-memory"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1640745093,"post_id":70514183,"comment_id":124648577,"body_markdown":"Don’t use byte arrays.  InputStreams and OutputStreams exist precisely to address this problem, by handling data in small amounts.  The best way to read large data items will depend on how you are reading from your database;  for instance, if you’re using JDBC, you’ll want to use [ResultSet.getBinaryStream](https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/ResultSet.html#getBinaryStream(int)).","body":"Don’t use byte arrays.  InputStreams and OutputStreams exist precisely to address this problem, by handling data in small amounts.  The best way to read large data items will depend on how you are reading from your database;  for instance, if you’re using JDBC, you’ll want to use <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/ResultSet.html#getBinaryStream(int)\" rel=\"nofollow noreferrer\">ResultSet.getBinaryStream</a>."},{"owner":{"account_id":7495940,"reputation":37,"user_id":5696211,"display_name":"Jes&#250;s Alberto Carrillo Garc&#237;a"},"score":0,"creation_date":1640790761,"post_id":70514183,"comment_id":124659890,"body_markdown":"@VGR Way JDBC retrieve info is OK. Problem is when I try to zip with code above. I&#39;ll try with OutputStream instead. Thank you.","body":"@VGR Way JDBC retrieve info is OK. Problem is when I try to zip with code above. I&#39;ll try with OutputStream instead. Thank you."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1640791740,"post_id":70514183,"comment_id":124660297,"body_markdown":"If `input` is an 80 megabyte array, `new ByteArrayOutputStream(input.length)` will take up *another 80 megabytes* of memory.  And then `bos.toByteArray()` will create another brand new byte array, so if deflation reduced the size by, say, 50%, `bos.toByteArray()` takes up another 40 megabytes of memory.  This is why you want to avoid byte arrays and you want to avoid ByteArrayOutputStream.","body":"If <code>input</code> is an 80 megabyte array, <code>new ByteArrayOutputStream(input.length)</code> will take up <i>another 80 megabytes</i> of memory.  And then <code>bos.toByteArray()</code> will create another brand new byte array, so if deflation reduced the size by, say, 50%, <code>bos.toByteArray()</code> takes up another 40 megabytes of memory.  This is why you want to avoid byte arrays and you want to avoid ByteArrayOutputStream."},{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":0,"creation_date":1640792206,"post_id":70514183,"comment_id":124660491,"body_markdown":"@Jes&#250;sAlbertoCarrilloGarc&#237;a Please [edit] your question to include the remaining source code you have as a [mcve]. It might be possible that you don&#39;t need a method like `zipBytes` to work on `byte` arrays but instead on working on `InputStream`/`OutputStream` instances directly. But that depends on what you are trying to do outside of this method.","body":"@Jes&#250;sAlbertoCarrilloGarc&#237;a Please <a href=\"https://stackoverflow.com/posts/70514183/edit\">edit</a> your question to include the remaining source code you have as a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. It might be possible that you don&#39;t need a method like <code>zipBytes</code> to work on <code>byte</code> arrays but instead on working on <code>InputStream</code>/<code>OutputStream</code> instances directly. But that depends on what you are trying to do outside of this method."},{"owner":{"account_id":7495940,"reputation":37,"user_id":5696211,"display_name":"Jes&#250;s Alberto Carrillo Garc&#237;a"},"score":0,"creation_date":1640797350,"post_id":70514183,"comment_id":124662234,"body_markdown":"@VGR I understand. All examples I found about this use ByteArrayInputStream and ByteArrayOutputStream, I dont know how to do that without use them. Can you help me? Ive edit the post with flow of my java.","body":"@VGR I understand. All examples I found about this use ByteArrayInputStream and ByteArrayOutputStream, I dont know how to do that without use them. Can you help me? Ive edit the post with flow of my java."},{"owner":{"account_id":7495940,"reputation":37,"user_id":5696211,"display_name":"Jes&#250;s Alberto Carrillo Garc&#237;a"},"score":0,"creation_date":1640797385,"post_id":70514183,"comment_id":124662248,"body_markdown":"@Progman Ive edit post with the flow","body":"@Progman Ive edit post with the flow"},{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1640799830,"post_id":70514183,"comment_id":124663101,"body_markdown":"How do you publish to your broker, does it offer a way to publish using an output stream (or have it consume an input stream)?","body":"How do you publish to your broker, does it offer a way to publish using an output stream (or have it consume an input stream)?"},{"owner":{"account_id":7495940,"reputation":37,"user_id":5696211,"display_name":"Jes&#250;s Alberto Carrillo Garc&#237;a"},"score":0,"creation_date":1640801202,"post_id":70514183,"comment_id":124663558,"body_markdown":"Yes it does. Anyway, by red issues, I need to send a compress message. Its possible to comprees a inputstream? Or a inputstream object is a minimal size objecto already?","body":"Yes it does. Anyway, by red issues, I need to send a compress message. Its possible to comprees a inputstream? Or a inputstream object is a minimal size objecto already?"},{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":0,"creation_date":1640809462,"post_id":70514183,"comment_id":124665979,"body_markdown":"@Jes&#250;sAlbertoCarrilloGarc&#237;a Please [edit] your question to include the source code how you send the message. Also explain how you detect on sender and receiver side if the message was compressed or not. The method `getBinaryStream()` is the right direction and you can combine it with the `Deflate*Stream()` classes. That way (at least in theory) you don&#39;t read all the data in huge byte arrays, but instead read and transform the data via a stream of bytes. Please add a MCVE to your question.","body":"@Jes&#250;sAlbertoCarrilloGarc&#237;a Please <a href=\"https://stackoverflow.com/posts/70514183/edit\">edit</a> your question to include the source code how you send the message. Also explain how you detect on sender and receiver side if the message was compressed or not. The method <code>getBinaryStream()</code> is the right direction and you can combine it with the <code>Deflate*Stream()</code> classes. That way (at least in theory) you don&#39;t read all the data in huge byte arrays, but instead read and transform the data via a stream of bytes. Please add a MCVE to your question."},{"owner":{"account_id":7495940,"reputation":37,"user_id":5696211,"display_name":"Jes&#250;s Alberto Carrillo Garc&#237;a"},"score":0,"creation_date":1640815382,"post_id":70514183,"comment_id":124667709,"body_markdown":"Ive edit the post. Ive tried with a method who receive a InputStream (ResultSet.getBinaryStream) but the memory consume is same as zipBytes() method","body":"Ive edit the post. Ive tried with a method who receive a InputStream (ResultSet.getBinaryStream) but the memory consume is same as zipBytes() method"},{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":1,"creation_date":1640870062,"post_id":70514183,"comment_id":124679223,"body_markdown":"@Jes&#250;sAlbertoCarrilloGarc&#237;a Please [edit] your question to include the actual database system you are using. As an example, the JDBC driver for MySQL uses `ByteArrayInputStream` internally for the `getBinaryStream()` and `getBlob()` methods, which makes them difficult to use in your case. Also add/emphasize the fact, that the target API does **not** support `InputStream` instances for sending the data (unlike you said in https://stackoverflow.com/questions/70514183/java-heap-outofmemory-on-bytearrayoutputstream-for-deflater-zip-bytes?noredirect=1#comment124663558_70514183 it does)","body":"@Jes&#250;sAlbertoCarrilloGarc&#237;a Please <a href=\"https://stackoverflow.com/posts/70514183/edit\">edit</a> your question to include the actual database system you are using. As an example, the JDBC driver for MySQL uses <code>ByteArrayInputStream</code> internally for the <code>getBinaryStream()</code> and <code>getBlob()</code> methods, which makes them difficult to use in your case. Also add/emphasize the fact, that the target API does <b>not</b> support <code>InputStream</code> instances for sending the data (unlike you said in <a href=\"https://stackoverflow.com/questions/70514183/java-heap-outofmemory-on-bytearrayoutputstream-for-deflater-zip-bytes?noredirect=1#comment124663558_70514183\" title=\"java heap outofmemory on bytearrayoutputstream for deflater zip bytes\">stackoverflow.com/questions/70514183/&hellip;</a> it does)"},{"owner":{"account_id":7495940,"reputation":37,"user_id":5696211,"display_name":"Jes&#250;s Alberto Carrillo Garc&#237;a"},"score":0,"creation_date":1640880475,"post_id":70514183,"comment_id":124682548,"body_markdown":"Ok, the message is a JMS Topic and in consumer I can use a InputStream object, so I think is supported by publisher but is not. My fault, sorry.","body":"Ok, the message is a JMS Topic and in consumer I can use a InputStream object, so I think is supported by publisher but is not. My fault, sorry."}],"answers":[{"tags":[],"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640876981,"creation_date":1640818441,"answer_id":70525828,"question_id":70514183,"body_markdown":"`rs.getBytes(&quot;data&quot;)` reads the entire 80 megabytes into memory at once.  In general, if you are reading a potentially large amount of data, you don’t want to try to keep it all in memory.\r\n\r\nThe solution is to use [getBinaryStream](https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/ResultSet.html#getBinaryStream(int)) instead.\r\n\r\nSince you need to know whether the total size is larger than 10,000,000 bytes, you have two choices:\r\n\r\n* Use a [BufferedInputStream](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/BufferedInputStream.html) with a buffer of at least that size, which will allow you to use [mark](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/InputStream.html#mark(int)) and [reset](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/InputStream.html#reset()) in order to “rewind” the InputStream.\r\n* Read the data size as part of your query.  You may be able to do this by using a [Blob](https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/ResultSet.html#getBlob(java.lang.String)) or using a function like `LENGTH`.\r\n\r\nThe first approach will use up 10 megabytes of program memory for the buffer, but that’s better than hundreds of megabytes:\r\n\r\n    while (rs.next()) {\r\n        try (BufferedInputStream source = new BufferedInputStream(\r\n            rs.getBinaryStream(&quot;data&quot;), 10_000_001)) {\r\n\r\n            source.mark(10_000_001);\r\n\r\n            boolean sendToBroker = true;\r\n            boolean needCompression = true;\r\n            for (int i = 0; i &lt;= 10_000_000; i++) {\r\n                if (source.read() &lt; 0) {\r\n                    sendToBroker = (i &gt; 60);\r\n                    needCompression = (i &gt;= 10_000_000);\r\n                    break;\r\n                }\r\n            }\r\n\r\n            if (sendToBroker) {\r\n                // Rewind stream\r\n                source.reset();\r\n\r\n                if (needCompression) {\r\n                    try (OutputStream brokerStream =\r\n                        new DeflaterOutputStream(broker.getOutputStream())) {\r\n\r\n                        source.transferTo(brokerStream);\r\n                    }\r\n                } else {\r\n                    try (OutputStream brokerStream =\r\n                        broker.getOutputStream())) {\r\n\r\n                        source.transferTo(brokerStream);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\nNotice that no byte arrays and no ByteArrayOutputStreams are used.  The actual data is not kept in memory, except for the 10 megabyte buffer.\r\n\r\nThe second approach is shorter, but I’m not sure how portable it is across databases:\r\n\r\n    while (rs.next()) {\r\n        Blob data = rs.getBlob(&quot;data&quot;);\r\n        long length = data.length();\r\n        if (length &gt; 60) {\r\n            try (InputStream source = data.getBinaryStream()) {\r\n                if (length &gt;= 10000000) {\r\n                    try (OutputStream brokerStream =\r\n                        new DeflaterOutputStream(broker.getOutputStream())) {\r\n\r\n                        source.transferTo(brokerStream);\r\n                    }\r\n                } else {\r\n                    try (OutputStream brokerStream =\r\n                        broker.getOutputStream())) {\r\n\r\n                        source.transferTo(brokerStream);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\nBoth approaches assume there is some API available for your “broker” which allows the data to be written to an OutputStream.  I’ve assumed, for the sake of example, that it’s `broker.getOutputStream()`.\r\n\r\nUpdate\r\n------\r\n\r\nIt appears you are required to create [nConsumeEvent](https://documentation.softwareag.com/onlinehelp/Rohan/num10-3/10-3_UM_webhelp/um-webhelp/Doc/java/classcom_1_1pcbsys_1_1nirvana_1_1base_1_1n_consume_event.html) objects, and that class only allows its data to be specified as a byte array in its constructors.\r\n\r\nThat byte array is unavoidable, obviously.  And since there is no way to know the exact number of bytes a compressed version will require, a ByteArrayOutputStream is also unavoidable.  (It’s possible to avoid using that class, but the replacement would be essentially a reimplementation of ByteArrayOutputStream.)\r\n\r\nBut you can still read the data as an InputStream in order to reduce your memory usage.  And when you aren’t compressing, you can still avoid ByteArrayOutputStream, thereby creating only one additional byte array.\r\n\r\nSo, instead of this, which is not possible for nConsumeEvent:\r\n\r\n    if (needCompression) {\r\n        try (OutputStream brokerStream =\r\n            new DeflaterOutputStream(broker.getOutputStream())) {\r\n\r\n            source.transferTo(brokerStream);\r\n        }\r\n    } else {\r\n        try (OutputStream brokerStream =\r\n            broker.getOutputStream())) {\r\n\r\n            source.transferTo(brokerStream);\r\n        }\r\n    }\r\n\r\nIt should be:\r\n\r\n    byte[] bt;\r\n    if (needCompression) {\r\n        ByteArrayOutputStream byteStream = new ByteArrayOutputStream();\r\n        try (OutputStream brokerStream = new DeflaterOutputStream(byteStream)) {\r\n            source.transferTo(byteStream);\r\n        }\r\n        bt = byteStream.toByteArray();\r\n    } else {\r\n        bt = source.readAllBytes();\r\n    }\r\n\r\n    prop.put(&quot;isZip&quot;, String.valueOf(needCompression));\r\n    nConsumeEvent ncon = new nconsumeEvent(&quot;1&quot;, bt);\r\n    ncon.setProperties(prop);\r\n    messages.add(ncon);\r\n    \r\nSimilarly, the second example should replace this:\r\n\r\n    if (length &gt;= 10000000) {\r\n        try (OutputStream brokerStream =\r\n            new DeflaterOutputStream(broker.getOutputStream())) {\r\n\r\n            source.transferTo(brokerStream);\r\n        }\r\n    } else {\r\n        try (OutputStream brokerStream =\r\n            broker.getOutputStream())) {\r\n\r\n            source.transferTo(brokerStream);\r\n        }\r\n    }\r\n\r\nwith this:\r\n\r\n    byte[] bt;\r\n    if (length &gt;= 10000000) {\r\n        ByteArrayOutputStream byteStream = new ByteArrayOutputStream();\r\n        try (OutputStream brokerStream = new DeflaterOutputStream(byteStream)) {\r\n            source.transferTo(byteStream);\r\n        }\r\n        bt = byteStream.toByteArray();\r\n        prop.put(&quot;isZip&quot;, &quot;true&quot;);\r\n    } else {\r\n        bt = source.readAllBytes();\r\n        prop.put(&quot;isZip&quot;, &quot;false&quot;);\r\n    }\r\n\r\n    nConsumeEvent ncon = new nconsumeEvent(&quot;1&quot;, bt);\r\n    ncon.setProperties(prop);\r\n    messages.add(ncon);\r\n","title":"Java Heap OutOfMemory on ByteArrayOutputStream for deflater zip bytes","body":"<p><code>rs.getBytes(&quot;data&quot;)</code> reads the entire 80 megabytes into memory at once.  In general, if you are reading a potentially large amount of data, you don’t want to try to keep it all in memory.</p>\n<p>The solution is to use <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/ResultSet.html#getBinaryStream(int)\" rel=\"nofollow noreferrer\">getBinaryStream</a> instead.</p>\n<p>Since you need to know whether the total size is larger than 10,000,000 bytes, you have two choices:</p>\n<ul>\n<li>Use a <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/BufferedInputStream.html\" rel=\"nofollow noreferrer\">BufferedInputStream</a> with a buffer of at least that size, which will allow you to use <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/InputStream.html#mark(int)\" rel=\"nofollow noreferrer\">mark</a> and <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/InputStream.html#reset()\" rel=\"nofollow noreferrer\">reset</a> in order to “rewind” the InputStream.</li>\n<li>Read the data size as part of your query.  You may be able to do this by using a <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/ResultSet.html#getBlob(java.lang.String)\" rel=\"nofollow noreferrer\">Blob</a> or using a function like <code>LENGTH</code>.</li>\n</ul>\n<p>The first approach will use up 10 megabytes of program memory for the buffer, but that’s better than hundreds of megabytes:</p>\n<pre><code>while (rs.next()) {\n    try (BufferedInputStream source = new BufferedInputStream(\n        rs.getBinaryStream(&quot;data&quot;), 10_000_001)) {\n\n        source.mark(10_000_001);\n\n        boolean sendToBroker = true;\n        boolean needCompression = true;\n        for (int i = 0; i &lt;= 10_000_000; i++) {\n            if (source.read() &lt; 0) {\n                sendToBroker = (i &gt; 60);\n                needCompression = (i &gt;= 10_000_000);\n                break;\n            }\n        }\n\n        if (sendToBroker) {\n            // Rewind stream\n            source.reset();\n\n            if (needCompression) {\n                try (OutputStream brokerStream =\n                    new DeflaterOutputStream(broker.getOutputStream())) {\n\n                    source.transferTo(brokerStream);\n                }\n            } else {\n                try (OutputStream brokerStream =\n                    broker.getOutputStream())) {\n\n                    source.transferTo(brokerStream);\n                }\n            }\n        }\n    }\n}\n</code></pre>\n<p>Notice that no byte arrays and no ByteArrayOutputStreams are used.  The actual data is not kept in memory, except for the 10 megabyte buffer.</p>\n<p>The second approach is shorter, but I’m not sure how portable it is across databases:</p>\n<pre><code>while (rs.next()) {\n    Blob data = rs.getBlob(&quot;data&quot;);\n    long length = data.length();\n    if (length &gt; 60) {\n        try (InputStream source = data.getBinaryStream()) {\n            if (length &gt;= 10000000) {\n                try (OutputStream brokerStream =\n                    new DeflaterOutputStream(broker.getOutputStream())) {\n\n                    source.transferTo(brokerStream);\n                }\n            } else {\n                try (OutputStream brokerStream =\n                    broker.getOutputStream())) {\n\n                    source.transferTo(brokerStream);\n                }\n            }\n        }\n    }\n}\n</code></pre>\n<p>Both approaches assume there is some API available for your “broker” which allows the data to be written to an OutputStream.  I’ve assumed, for the sake of example, that it’s <code>broker.getOutputStream()</code>.</p>\n<h2>Update</h2>\n<p>It appears you are required to create <a href=\"https://documentation.softwareag.com/onlinehelp/Rohan/num10-3/10-3_UM_webhelp/um-webhelp/Doc/java/classcom_1_1pcbsys_1_1nirvana_1_1base_1_1n_consume_event.html\" rel=\"nofollow noreferrer\">nConsumeEvent</a> objects, and that class only allows its data to be specified as a byte array in its constructors.</p>\n<p>That byte array is unavoidable, obviously.  And since there is no way to know the exact number of bytes a compressed version will require, a ByteArrayOutputStream is also unavoidable.  (It’s possible to avoid using that class, but the replacement would be essentially a reimplementation of ByteArrayOutputStream.)</p>\n<p>But you can still read the data as an InputStream in order to reduce your memory usage.  And when you aren’t compressing, you can still avoid ByteArrayOutputStream, thereby creating only one additional byte array.</p>\n<p>So, instead of this, which is not possible for nConsumeEvent:</p>\n<pre><code>if (needCompression) {\n    try (OutputStream brokerStream =\n        new DeflaterOutputStream(broker.getOutputStream())) {\n\n        source.transferTo(brokerStream);\n    }\n} else {\n    try (OutputStream brokerStream =\n        broker.getOutputStream())) {\n\n        source.transferTo(brokerStream);\n    }\n}\n</code></pre>\n<p>It should be:</p>\n<pre><code>byte[] bt;\nif (needCompression) {\n    ByteArrayOutputStream byteStream = new ByteArrayOutputStream();\n    try (OutputStream brokerStream = new DeflaterOutputStream(byteStream)) {\n        source.transferTo(byteStream);\n    }\n    bt = byteStream.toByteArray();\n} else {\n    bt = source.readAllBytes();\n}\n\nprop.put(&quot;isZip&quot;, String.valueOf(needCompression));\nnConsumeEvent ncon = new nconsumeEvent(&quot;1&quot;, bt);\nncon.setProperties(prop);\nmessages.add(ncon);\n</code></pre>\n<p>Similarly, the second example should replace this:</p>\n<pre><code>if (length &gt;= 10000000) {\n    try (OutputStream brokerStream =\n        new DeflaterOutputStream(broker.getOutputStream())) {\n\n        source.transferTo(brokerStream);\n    }\n} else {\n    try (OutputStream brokerStream =\n        broker.getOutputStream())) {\n\n        source.transferTo(brokerStream);\n    }\n}\n</code></pre>\n<p>with this:</p>\n<pre><code>byte[] bt;\nif (length &gt;= 10000000) {\n    ByteArrayOutputStream byteStream = new ByteArrayOutputStream();\n    try (OutputStream brokerStream = new DeflaterOutputStream(byteStream)) {\n        source.transferTo(byteStream);\n    }\n    bt = byteStream.toByteArray();\n    prop.put(&quot;isZip&quot;, &quot;true&quot;);\n} else {\n    bt = source.readAllBytes();\n    prop.put(&quot;isZip&quot;, &quot;false&quot;);\n}\n\nnConsumeEvent ncon = new nconsumeEvent(&quot;1&quot;, bt);\nncon.setProperties(prop);\nmessages.add(ncon);\n</code></pre>\n"}],"owner":{"account_id":7495940,"reputation":37,"user_id":5696211,"display_name":"Jes&#250;s Alberto Carrillo Garc&#237;a"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1522,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":1,"score":-1,"last_activity_date":1640889751,"creation_date":1640740345,"question_id":70514183,"body_markdown":"I have a program who read information from database. Sometimes, the message is bigger that expected. So, before send that message to my broker I zip it with this code:\r\n\r\n    public static byte[] zipBytes(byte[] input) throws IOException {\r\n    \t    ByteArrayOutputStream bos = new ByteArrayOutputStream(input.length);\r\n    \t    OutputStream ej = new DeflaterOutputStream(bos);\r\n    \t    ej.write(input);\r\n    \t    ej.close();\r\n    \t    bos.close();\r\n    \t    return bos.toByteArray();\r\n    \t}\r\n\r\nRecently, i retrieved a 80M message from DB and when execute my code above just OutOfMemory throw on the &quot;ByteArrayOutputStream&quot; line. My java program just have 512 of memory to do all process and cant give it more memory.\r\n\r\nHow can I solve this?\r\n\r\nThis is no a duplicate question. I cant increase heap size memory.\r\n\r\nEDIT:\r\nThis is flow of my java code:\r\n\r\n    rs = stmt.executeQuery(&quot;SELECT data FROM tbl_alotofinfo&quot;); //rs is a valid resulset\r\n    while(rs.next()){\r\n       byte[] bt = rs.getBytes(&quot;data&quot;);\r\n       if(bt.length &gt; 60) { //only rows with content &gt; 60. I need to know the size of message, so if I use rs.getBinaryStream I cannot know the size, can I?\r\n          if(bt.length &gt;= 10000000){\r\n             //here I need to zip the bytearray before send it, so\r\n             bt = zipBytes(bt); //this method is above\r\n             // then publish bt to my broker\r\n          } else {\r\n             //here publish byte array to my broker\r\n          }\r\n       }\r\n    }\r\n\r\nEDIT\r\nIve tried with PipedInputStream and the memory that process consume is same as zipBytes(byte[] input) method.\r\n\r\n    private InputStream zipInputStream(InputStream in) throws IOException {\r\n    \t    PipedInputStream zipped = new PipedInputStream();\r\n    \t    PipedOutputStream pipe = new PipedOutputStream(zipped);\r\n    \t    new Thread(\r\n    \t            () -&gt; {\r\n    \t                try(OutputStream zipper = new DeflaterOutputStream(pipe)){\r\n    \t                    IOUtils.copy(in, zipper);\r\n    \t                    zipper.flush();\r\n    \t                } catch (IOException e) {\r\n    \t                \tIOUtils.closeQuietly(zipped);  // close it on error case only\r\n    \t                    \r\n    \t                    e.printStackTrace();\r\n    \t                } finally {\r\n    \t                \tIOUtils.closeQuietly(in);\r\n    \t                    IOUtils.closeQuietly(zipped);\r\n    \t                    IOUtils.closeQuietly(pipe);\r\n    \t                }\r\n    \t            }\r\n    \t    ).start();\r\n    \t    return zipped;\r\n    \t}\r\n\r\nHow can I compress by Deflate my InputStream?\r\n\r\nEDIT\r\n\r\nThat information is sent to JMS in Universal Messaging Server by Software AG. This use a Nirvana client documentation: https://documentation.softwareag.com/onlinehelp/Rohan/num10-2/10-2_UM_webhelp/um-webhelp/Doc/java/classcom_1_1pcbsys_1_1nirvana_1_1client_1_1n_consume_event.html and data is saved in nConsumeEvent objects and the documentation show us only 2 ways to send that information:\r\nnConsumeEvent (String tag, byte[] data)\r\nnConsumeEvent (String tag, Document adom)\r\n\r\nhttps://documentation.softwareag.com/onlinehelp/Rohan/num10-5/10-5_UM_webhelp/index.html#page/um-webhelp%2Fco-publish_3.html%23\r\n\r\nThe code for connection is:\r\n\r\n    nSessionAttributes nsa = new nSessionAttributes(&quot;nsp://127.0.0.1:9000&quot;);\r\n    MyReconnectHandler rhandler = new MyReconnectHandler();\r\n    nSession mySession = nSessionFactory.create(nsa, rhandler);\r\n    if(!mySession.isConnected()){\r\n       mySession.init();\r\n    }\r\n    nChannelAttributes chaAtt = new nChannelAttributes();\r\n    chaAttr.setName(&quot;mychannel&quot;); //This is a topic\r\n    nChannel myChannel = mySession.findChannel(chaAtt);\r\n    List&lt;nConsumeEvent&gt; messages = new ArrayList&lt;nConsumeEvent&gt;();\r\n    rs = stmt.executeQuery(&quot;SELECT data FROM tbl_alotofinfo&quot;);\r\n    while(rs.next){\r\n       byte[] bt = rs.getBytes(&quot;data&quot;);\r\n       if(bt.length &gt; 60){\r\n          nEventProperties prop = new nEventProperties();\r\n          if(bt.length &gt; 10000000){\r\n             bt = compressData(bt); //here a need compress data without ByteArrayInputStream\r\n             prop.put(&quot;isZip&quot;, &quot;true&quot;);\r\n             nConsumeEvent ncon = new nconsumeEvent(&quot;1&quot;,bt);\r\n             ncon.setProperties(prop);\r\n             messages.add(ncon);\r\n          } else {\r\n             prop.put(&quot;isZip&quot;, &quot;false&quot;);\r\n             nConsumeEvent ncon = new nconsumeEvent(&quot;1&quot;,bt);\r\n             ncon.setProperties(prop);\r\n             messages.add(ncon);\r\n          }\r\n    }\r\n    ntransactionAttributes tatrib = new nTransactionAttributes(myChannel);\r\n    nTransaction myTransaction = nTransactionFactory.create(tattrib);\r\n    Vector&lt;nConsumeEvent&gt; m = new Vector&lt;nConsumeEvent&gt;(messages);\r\n    myTransaction.publish(m);\r\n    myTransaction.commit();\r\n    } \r\n\r\nBecause API exection, to the end of the day I need send the information in byte array, but if this is the only one byte array in my code is OK. How can I compress the byte array or InputStream with rs.getBinaryStream() in this implementation?\r\n\r\nEDIT\r\n\r\nThe database server used is PostgreSQL v11.6\r\n\r\nEDIT\r\n\r\nI&#39;ve applied the first one solution of @VGR and works fine. \r\n\r\nOnly one thing, SELECT query is in a while(true) like:\r\n\r\n    while(true){\r\n       rs = stmt.executeQuery(&quot;SELECT data FROM tbl_alotofinfo&quot;); //rs is a valid resulset\r\n    // all that implementation you know for this entire post\r\n       \r\n       Thread.sleep(10000);\r\n    }\r\nSo, a SELECT is execute each 3 second.\r\nBut I&#39;ve done a test with my program running and the memory just increase in each process. Why? If the information that database return is same in each request, should not the memory keep like first request? Or maybe I forgot close a stream?\r\n\r\n    while(true){\r\n    rs = stmt.executeQuery(&quot;SELECT data FROM tbl_alotofinfo&quot;); //rs is a valid resulset\r\n     while(rs.next()) {\r\n    \t\t\t        \t\r\n    \t\t\t        \t //byte[] bt = rs.getBytes(&quot;data&quot;);\r\n    \t\t\t        \t byte[] bt;\r\n    \t\t\t        \t try (BufferedInputStream source = new BufferedInputStream(\r\n    \t\t\t        \t\t        rs.getBinaryStream(&quot;data&quot;), 10_000_001)) {\r\n    \r\n    \t\t\t        \t\t        source.mark(this.zip+1);\r\n    \r\n    \t\t\t        \t\t        boolean sendToBroker = true;\r\n    \t\t\t        \t\t        boolean needCompression = true;\r\n    \t\t\t        \t\t        for (int i = 0; i &lt;= 10_000_000; i++) {\r\n    \t\t\t        \t\t            if (source.read() &lt; 0) {\r\n    \t\t\t        \t\t                sendToBroker = (i &gt; 60);\r\n    \t\t\t        \t\t                needCompression = (i &gt;= this.zip);\r\n    \t\t\t        \t\t                break;\r\n    \t\t\t        \t\t            }\r\n    \t\t\t        \t\t        }\r\n    \r\n    \t\t\t        \t\t        if (sendToBroker) {\r\n    \t\t\t        \t\t        \tnEventProperties prop = new nEventProperties();\r\n    \t\t\t        \t\t            // Rewind stream\r\n    \t\t\t        \t\t            source.reset();\r\n    \r\n    \t\t\t        \t\t            if (needCompression) {\r\n    \t\t\t        \t\t            \tSystem.out.println(&quot;Tama&#241;o del mensaje mayor al esperado. Comprimiendo mensaje&quot;);\r\n    \t\t\t        \t\t                ByteArrayOutputStream byteStream = new ByteArrayOutputStream();\r\n    \t\t\t        \t\t                try (OutputStream brokerStream = new DeflaterOutputStream(byteStream)) {\r\n    \t\t\t        \t\t                \tIOUtils.copy(source, brokerStream);\r\n    \t\t\t        \t\t                }\r\n    \t\t\t        \t\t                bt = byteStream.toByteArray();\r\n    \t\t\t        \t\t                \r\n    \t\t\t        \t\t                prop.put(&quot;zip&quot;, &quot;true&quot;);\r\n    \t\t\t        \t\t            } else {\r\n    \t\t\t        \t\t            \tbt = IOUtils.toByteArray(source);\r\n    \t\t\t        \t\t            }\r\n    \t\t\t        \t\t            System.out.println(&quot;size: &quot;+bt.length);\r\n    \t\t\t        \t\t            prop.put(&quot;host&quot;, this.host);\r\n    \t\t\t\t\t\t\t\t        nConsumeEvent ncon = new nConsumeEvent(&quot;&quot;+rs.getInt(&quot;xid&quot;), bt);\r\n    \t\t\t\t\t\t\t\t        ncon.setProperties(prop);\r\n    \t\t\t\t\t\t\t\t        messages.add(ncon);\r\n    \t\t\t        \t\t        }\r\n    \t\t\t        \t\t    }\r\n       }\r\n    }\r\n\r\nFor example, this is the heap memory in two times. First one memory use above 500MB and second one (with the same information of database) used above 1000MB\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/CQHZC.png","title":"Java Heap OutOfMemory on ByteArrayOutputStream for deflater zip bytes","body":"<p>I have a program who read information from database. Sometimes, the message is bigger that expected. So, before send that message to my broker I zip it with this code:</p>\n<pre><code>public static byte[] zipBytes(byte[] input) throws IOException {\n        ByteArrayOutputStream bos = new ByteArrayOutputStream(input.length);\n        OutputStream ej = new DeflaterOutputStream(bos);\n        ej.write(input);\n        ej.close();\n        bos.close();\n        return bos.toByteArray();\n    }\n</code></pre>\n<p>Recently, i retrieved a 80M message from DB and when execute my code above just OutOfMemory throw on the &quot;ByteArrayOutputStream&quot; line. My java program just have 512 of memory to do all process and cant give it more memory.</p>\n<p>How can I solve this?</p>\n<p>This is no a duplicate question. I cant increase heap size memory.</p>\n<p>EDIT:\nThis is flow of my java code:</p>\n<pre><code>rs = stmt.executeQuery(&quot;SELECT data FROM tbl_alotofinfo&quot;); //rs is a valid resulset\nwhile(rs.next()){\n   byte[] bt = rs.getBytes(&quot;data&quot;);\n   if(bt.length &gt; 60) { //only rows with content &gt; 60. I need to know the size of message, so if I use rs.getBinaryStream I cannot know the size, can I?\n      if(bt.length &gt;= 10000000){\n         //here I need to zip the bytearray before send it, so\n         bt = zipBytes(bt); //this method is above\n         // then publish bt to my broker\n      } else {\n         //here publish byte array to my broker\n      }\n   }\n}\n</code></pre>\n<p>EDIT\nIve tried with PipedInputStream and the memory that process consume is same as zipBytes(byte[] input) method.</p>\n<pre><code>private InputStream zipInputStream(InputStream in) throws IOException {\n        PipedInputStream zipped = new PipedInputStream();\n        PipedOutputStream pipe = new PipedOutputStream(zipped);\n        new Thread(\n                () -&gt; {\n                    try(OutputStream zipper = new DeflaterOutputStream(pipe)){\n                        IOUtils.copy(in, zipper);\n                        zipper.flush();\n                    } catch (IOException e) {\n                        IOUtils.closeQuietly(zipped);  // close it on error case only\n                        \n                        e.printStackTrace();\n                    } finally {\n                        IOUtils.closeQuietly(in);\n                        IOUtils.closeQuietly(zipped);\n                        IOUtils.closeQuietly(pipe);\n                    }\n                }\n        ).start();\n        return zipped;\n    }\n</code></pre>\n<p>How can I compress by Deflate my InputStream?</p>\n<p>EDIT</p>\n<p>That information is sent to JMS in Universal Messaging Server by Software AG. This use a Nirvana client documentation: <a href=\"https://documentation.softwareag.com/onlinehelp/Rohan/num10-2/10-2_UM_webhelp/um-webhelp/Doc/java/classcom_1_1pcbsys_1_1nirvana_1_1client_1_1n_consume_event.html\" rel=\"nofollow noreferrer\">https://documentation.softwareag.com/onlinehelp/Rohan/num10-2/10-2_UM_webhelp/um-webhelp/Doc/java/classcom_1_1pcbsys_1_1nirvana_1_1client_1_1n_consume_event.html</a> and data is saved in nConsumeEvent objects and the documentation show us only 2 ways to send that information:\nnConsumeEvent (String tag, byte[] data)\nnConsumeEvent (String tag, Document adom)</p>\n<p><a href=\"https://documentation.softwareag.com/onlinehelp/Rohan/num10-5/10-5_UM_webhelp/index.html#page/um-webhelp%2Fco-publish_3.html%23\" rel=\"nofollow noreferrer\">https://documentation.softwareag.com/onlinehelp/Rohan/num10-5/10-5_UM_webhelp/index.html#page/um-webhelp%2Fco-publish_3.html%23</a></p>\n<p>The code for connection is:</p>\n<pre><code>nSessionAttributes nsa = new nSessionAttributes(&quot;nsp://127.0.0.1:9000&quot;);\nMyReconnectHandler rhandler = new MyReconnectHandler();\nnSession mySession = nSessionFactory.create(nsa, rhandler);\nif(!mySession.isConnected()){\n   mySession.init();\n}\nnChannelAttributes chaAtt = new nChannelAttributes();\nchaAttr.setName(&quot;mychannel&quot;); //This is a topic\nnChannel myChannel = mySession.findChannel(chaAtt);\nList&lt;nConsumeEvent&gt; messages = new ArrayList&lt;nConsumeEvent&gt;();\nrs = stmt.executeQuery(&quot;SELECT data FROM tbl_alotofinfo&quot;);\nwhile(rs.next){\n   byte[] bt = rs.getBytes(&quot;data&quot;);\n   if(bt.length &gt; 60){\n      nEventProperties prop = new nEventProperties();\n      if(bt.length &gt; 10000000){\n         bt = compressData(bt); //here a need compress data without ByteArrayInputStream\n         prop.put(&quot;isZip&quot;, &quot;true&quot;);\n         nConsumeEvent ncon = new nconsumeEvent(&quot;1&quot;,bt);\n         ncon.setProperties(prop);\n         messages.add(ncon);\n      } else {\n         prop.put(&quot;isZip&quot;, &quot;false&quot;);\n         nConsumeEvent ncon = new nconsumeEvent(&quot;1&quot;,bt);\n         ncon.setProperties(prop);\n         messages.add(ncon);\n      }\n}\nntransactionAttributes tatrib = new nTransactionAttributes(myChannel);\nnTransaction myTransaction = nTransactionFactory.create(tattrib);\nVector&lt;nConsumeEvent&gt; m = new Vector&lt;nConsumeEvent&gt;(messages);\nmyTransaction.publish(m);\nmyTransaction.commit();\n} \n</code></pre>\n<p>Because API exection, to the end of the day I need send the information in byte array, but if this is the only one byte array in my code is OK. How can I compress the byte array or InputStream with rs.getBinaryStream() in this implementation?</p>\n<p>EDIT</p>\n<p>The database server used is PostgreSQL v11.6</p>\n<p>EDIT</p>\n<p>I've applied the first one solution of @VGR and works fine.</p>\n<p>Only one thing, SELECT query is in a while(true) like:</p>\n<pre><code>while(true){\n   rs = stmt.executeQuery(&quot;SELECT data FROM tbl_alotofinfo&quot;); //rs is a valid resulset\n// all that implementation you know for this entire post\n   \n   Thread.sleep(10000);\n}\n</code></pre>\n<p>So, a SELECT is execute each 3 second.\nBut I've done a test with my program running and the memory just increase in each process. Why? If the information that database return is same in each request, should not the memory keep like first request? Or maybe I forgot close a stream?</p>\n<pre><code>while(true){\nrs = stmt.executeQuery(&quot;SELECT data FROM tbl_alotofinfo&quot;); //rs is a valid resulset\n while(rs.next()) {\n                        \n                         //byte[] bt = rs.getBytes(&quot;data&quot;);\n                         byte[] bt;\n                         try (BufferedInputStream source = new BufferedInputStream(\n                                    rs.getBinaryStream(&quot;data&quot;), 10_000_001)) {\n\n                                    source.mark(this.zip+1);\n\n                                    boolean sendToBroker = true;\n                                    boolean needCompression = true;\n                                    for (int i = 0; i &lt;= 10_000_000; i++) {\n                                        if (source.read() &lt; 0) {\n                                            sendToBroker = (i &gt; 60);\n                                            needCompression = (i &gt;= this.zip);\n                                            break;\n                                        }\n                                    }\n\n                                    if (sendToBroker) {\n                                        nEventProperties prop = new nEventProperties();\n                                        // Rewind stream\n                                        source.reset();\n\n                                        if (needCompression) {\n                                            System.out.println(&quot;Tamaño del mensaje mayor al esperado. Comprimiendo mensaje&quot;);\n                                            ByteArrayOutputStream byteStream = new ByteArrayOutputStream();\n                                            try (OutputStream brokerStream = new DeflaterOutputStream(byteStream)) {\n                                                IOUtils.copy(source, brokerStream);\n                                            }\n                                            bt = byteStream.toByteArray();\n                                            \n                                            prop.put(&quot;zip&quot;, &quot;true&quot;);\n                                        } else {\n                                            bt = IOUtils.toByteArray(source);\n                                        }\n                                        System.out.println(&quot;size: &quot;+bt.length);\n                                        prop.put(&quot;host&quot;, this.host);\n                                        nConsumeEvent ncon = new nConsumeEvent(&quot;&quot;+rs.getInt(&quot;xid&quot;), bt);\n                                        ncon.setProperties(prop);\n                                        messages.add(ncon);\n                                    }\n                                }\n   }\n}\n</code></pre>\n<p>For example, this is the heap memory in two times. First one memory use above 500MB and second one (with the same information of database) used above 1000MB\n<a href=\"https://i.stack.imgur.com/CQHZC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CQHZC.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","class","inheritance","arraylist","size"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":1,"creation_date":1640889416,"post_id":70535435,"comment_id":124685418,"body_markdown":"`myGroceries is an ArrayList`, no it&#39;s not.  You don&#39;t declare `GroceryList extends ArrayList` so why would it be an ArrayList?  It *has a* private ArrayList, that&#39;s all.","body":"<code>myGroceries is an ArrayList</code>, no it&#39;s not.  You don&#39;t declare <code>GroceryList extends ArrayList</code> so why would it be an ArrayList?  It <i>has a</i> private ArrayList, that&#39;s all."},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":3,"creation_date":1640889511,"post_id":70535435,"comment_id":124685439,"body_markdown":"The first version of `GroceryList` is not an `ArrayList` - it merely **contains** an `ArrayList` and has only the methods that your class defines. The second version of `GroveryList` then is an `ArrayList` **and** contains an `ArrayList`. Even in the second version you only add items to the contained `ArrayList`, but nothing to the &quot;ArrayList&quot; that your `GroceryList` extends (i.e. you always call `GroceryList.addGroceryItem()` but never the `GroceryList.add()` method add would actually change the size).","body":"The first version of <code>GroceryList</code> is not an <code>ArrayList</code> - it merely <b>contains</b> an <code>ArrayList</code> and has only the methods that your class defines. The second version of <code>GroveryList</code> then is an <code>ArrayList</code> <b>and</b> contains an <code>ArrayList</code>. Even in the second version you only add items to the contained <code>ArrayList</code>, but nothing to the &quot;ArrayList&quot; that your <code>GroceryList</code> extends (i.e. you always call <code>GroceryList.addGroceryItem()</code> but never the <code>GroceryList.add()</code> method add would actually change the size)."}],"answers":[{"tags":[],"owner":{"account_id":7668980,"reputation":2584,"user_id":5811874,"display_name":"Hanchen Jiang"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1640889715,"creation_date":1640889715,"answer_id":70535513,"question_id":70535435,"body_markdown":"I think there is a misunderstanding of inheritance vs composition. In this case, before you added `extends ArrayList` to `GroceryList`, your `GroceryList` **has a list**. That&#39;s why `.size()` wasn&#39;t working on it, because the `GroceryList` you defined doesn&#39;t have a `size` method. It does have a list called `groceryList` though. That&#39;s why after you `addGroceryItem`, the `getLength` method works correctly. It&#39;s getting the size of `groceryList`.\r\n\r\nAfter you added `extends ArrayList`, `GroceryList` now **is** an `ArrayList`, that&#39;s why it has a `size` method now. But it is not the same list as `groceryList`. Hence getting the size of `myGroceries`, after `addGroceryItem` doesn&#39;t give you the size you expected. Because you never added anything to the `ArrayList` that is `myGroceries`. You&#39;ve only added thing to the `groceryList` that is a field in `myGroceries`.","title":"Java ArrayList size() method return 0 instead of actual length of the ArrayList","body":"<p>I think there is a misunderstanding of inheritance vs composition. In this case, before you added <code>extends ArrayList</code> to <code>GroceryList</code>, your <code>GroceryList</code> <strong>has a list</strong>. That's why <code>.size()</code> wasn't working on it, because the <code>GroceryList</code> you defined doesn't have a <code>size</code> method. It does have a list called <code>groceryList</code> though. That's why after you <code>addGroceryItem</code>, the <code>getLength</code> method works correctly. It's getting the size of <code>groceryList</code>.</p>\n<p>After you added <code>extends ArrayList</code>, <code>GroceryList</code> now <strong>is</strong> an <code>ArrayList</code>, that's why it has a <code>size</code> method now. But it is not the same list as <code>groceryList</code>. Hence getting the size of <code>myGroceries</code>, after <code>addGroceryItem</code> doesn't give you the size you expected. Because you never added anything to the <code>ArrayList</code> that is <code>myGroceries</code>. You've only added thing to the <code>groceryList</code> that is a field in <code>myGroceries</code>.</p>\n"}],"owner":{"account_id":4651817,"reputation":4217,"user_id":3768495,"accept_rate":88,"display_name":"user3768495"},"comment_count":2,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":416,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"closed_date":1641123901,"accepted_answer_id":70535513,"answer_count":1,"score":-1,"last_activity_date":1640889715,"creation_date":1640889184,"question_id":70535435,"body_markdown":"I am learning Java and followed a tutorial like this:\r\n\r\n```\r\npackage segovia.java.learn;\r\n\r\nimport java.util.ArrayList;\r\n\r\npublic class GroceryList {\r\n    private ArrayList&lt;String&gt; groceryList = new ArrayList&lt;String&gt;();\r\n\r\n    public void addGroceryItem(String item) {\r\n        groceryList.add(item);\r\n    }\r\n\r\n    public void printGroceryList() {\r\n        System.out.println(&quot;You have &quot; + groceryList.size() + &quot; items in your grocery list.&quot;);\r\n        for (int i=0; i &lt; groceryList.size(); i++) {\r\n            System.out.println((i+1) + &quot;. &quot; + groceryList.get(i));\r\n        }\r\n    }\r\n\r\n    public int getLength(){\r\n        return groceryList.size();\r\n    }\r\n}\r\n```\r\n\r\n```\r\npackage segovia.java.learn;\r\n\r\npublic class Main {\r\n\r\n    public static void main(String[] args) {\r\n        GroceryList myGroceries = new GroceryList();\r\n        myGroceries.addGroceryItem(&quot;apple&quot;);\r\n        myGroceries.addGroceryItem(&quot;orange&quot;);\r\n        myGroceries.addGroceryItem(&quot;pork&quot;);\r\n        myGroceries.addGroceryItem(&quot;beef&quot;);\r\n        myGroceries.printGroceryList();\r\n\r\n        System.out.println(myGroceries.getLength());\r\n    }\r\n}\r\n```\r\n\r\nwhich worked fine. However, I thought that since the `myGroceries` is an ArrayList, so it should have the `.size()` method. So I added a line of \r\n```\r\nSystem.out.println(myGroceries.size());\r\n```\r\nbut IntelliJ told me it&#39;s not working. So I thought that MAYBE I should use inheritance so I changed to\r\n```\r\npublic class GroceryList extends ArrayList {\r\n```\r\nnow the `.size()` method is working, but it gave me a wrong value.\r\n\r\n\r\n\r\n**Final codes are like this:**\r\n```\r\npackage segovia.java.learn;\r\n\r\nimport java.util.ArrayList;\r\n\r\npublic class GroceryList extends ArrayList{\r\n    private ArrayList&lt;String&gt; groceryList = new ArrayList&lt;String&gt;();\r\n\r\n    public void addGroceryItem(String item) {\r\n        groceryList.add(item);\r\n    }\r\n\r\n    public void printGroceryList() {\r\n        System.out.println(&quot;You have &quot; + groceryList.size() + &quot; items in your grocery list.&quot;);\r\n        for (int i=0; i &lt; groceryList.size(); i++) {\r\n            System.out.println((i+1) + &quot;. &quot; + groceryList.get(i));\r\n        }\r\n    }\r\n\r\n    public int getLength(){\r\n        return groceryList.size();\r\n    }\r\n}\r\n```\r\n\r\n```\r\npackage segovia.java.learn;\r\n\r\npublic class Main {\r\n\r\n    public static void main(String[] args) {\r\n        GroceryList myGroceries = new GroceryList();\r\n        myGroceries.addGroceryItem(&quot;apple&quot;);\r\n        myGroceries.addGroceryItem(&quot;orange&quot;);\r\n        myGroceries.addGroceryItem(&quot;pork&quot;);\r\n        myGroceries.addGroceryItem(&quot;beef&quot;);\r\n        myGroceries.printGroceryList();\r\n\r\n        System.out.println(myGroceries.getLength());\r\n\t\tSystem.out.println(myGroceries.size());\r\n    }\r\n}\r\n```\r\n\r\nand the `getLenth()` gave me 4, which is correct, while the `.size()` gave me 0, which is obviously wrong. \r\n[![enter image description here][1]][1]\r\n\r\n\r\nCan anyone help me understand why the codes work like this? I guess it&#39;s related to the class inheritance but not sure.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/MKu0N.png","title":"Java ArrayList size() method return 0 instead of actual length of the ArrayList","body":"<p>I am learning Java and followed a tutorial like this:</p>\n<pre><code>package segovia.java.learn;\n\nimport java.util.ArrayList;\n\npublic class GroceryList {\n    private ArrayList&lt;String&gt; groceryList = new ArrayList&lt;String&gt;();\n\n    public void addGroceryItem(String item) {\n        groceryList.add(item);\n    }\n\n    public void printGroceryList() {\n        System.out.println(&quot;You have &quot; + groceryList.size() + &quot; items in your grocery list.&quot;);\n        for (int i=0; i &lt; groceryList.size(); i++) {\n            System.out.println((i+1) + &quot;. &quot; + groceryList.get(i));\n        }\n    }\n\n    public int getLength(){\n        return groceryList.size();\n    }\n}\n</code></pre>\n<pre><code>package segovia.java.learn;\n\npublic class Main {\n\n    public static void main(String[] args) {\n        GroceryList myGroceries = new GroceryList();\n        myGroceries.addGroceryItem(&quot;apple&quot;);\n        myGroceries.addGroceryItem(&quot;orange&quot;);\n        myGroceries.addGroceryItem(&quot;pork&quot;);\n        myGroceries.addGroceryItem(&quot;beef&quot;);\n        myGroceries.printGroceryList();\n\n        System.out.println(myGroceries.getLength());\n    }\n}\n</code></pre>\n<p>which worked fine. However, I thought that since the <code>myGroceries</code> is an ArrayList, so it should have the <code>.size()</code> method. So I added a line of</p>\n<pre><code>System.out.println(myGroceries.size());\n</code></pre>\n<p>but IntelliJ told me it's not working. So I thought that MAYBE I should use inheritance so I changed to</p>\n<pre><code>public class GroceryList extends ArrayList {\n</code></pre>\n<p>now the <code>.size()</code> method is working, but it gave me a wrong value.</p>\n<p><strong>Final codes are like this:</strong></p>\n<pre><code>package segovia.java.learn;\n\nimport java.util.ArrayList;\n\npublic class GroceryList extends ArrayList{\n    private ArrayList&lt;String&gt; groceryList = new ArrayList&lt;String&gt;();\n\n    public void addGroceryItem(String item) {\n        groceryList.add(item);\n    }\n\n    public void printGroceryList() {\n        System.out.println(&quot;You have &quot; + groceryList.size() + &quot; items in your grocery list.&quot;);\n        for (int i=0; i &lt; groceryList.size(); i++) {\n            System.out.println((i+1) + &quot;. &quot; + groceryList.get(i));\n        }\n    }\n\n    public int getLength(){\n        return groceryList.size();\n    }\n}\n</code></pre>\n<pre><code>package segovia.java.learn;\n\npublic class Main {\n\n    public static void main(String[] args) {\n        GroceryList myGroceries = new GroceryList();\n        myGroceries.addGroceryItem(&quot;apple&quot;);\n        myGroceries.addGroceryItem(&quot;orange&quot;);\n        myGroceries.addGroceryItem(&quot;pork&quot;);\n        myGroceries.addGroceryItem(&quot;beef&quot;);\n        myGroceries.printGroceryList();\n\n        System.out.println(myGroceries.getLength());\n        System.out.println(myGroceries.size());\n    }\n}\n</code></pre>\n<p>and the <code>getLenth()</code> gave me 4, which is correct, while the <code>.size()</code> gave me 0, which is obviously wrong.\n<a href=\"https://i.stack.imgur.com/MKu0N.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MKu0N.png\" alt=\"enter image description here\" /></a></p>\n<p>Can anyone help me understand why the codes work like this? I guess it's related to the class inheritance but not sure.</p>\n"},{"tags":["java","swing","drag-and-drop","mouse-cursor","jtreetable"],"comments":[{"owner":{"account_id":470974,"reputation":5658,"user_id":878469,"accept_rate":69,"display_name":"predi"},"score":1,"creation_date":1371197313,"post_id":8240721,"comment_id":24743829,"body_markdown":"In post scriptum of this question I wrongfully accuse `org.netbeans.swing.Outline` and `JXTreeTable` of not being able to support dropping before or after the selected tree node. This is not true as these components do in fact support it. They both indirectly subclass a JTable. While it&#39;s true that `JTable.DropLocation` does not provide path information, you can always obtain it through table row and column which is provided by it. Had I known this, I would have never bothered rolling my own component. I advise against it.","body":"In post scriptum of this question I wrongfully accuse <code>org.netbeans.swing.Outline</code> and <code>JXTreeTable</code> of not being able to support dropping before or after the selected tree node. This is not true as these components do in fact support it. They both indirectly subclass a JTable. While it&#39;s true that <code>JTable.DropLocation</code> does not provide path information, you can always obtain it through table row and column which is provided by it. Had I known this, I would have never bothered rolling my own component. I advise against it."}],"answers":[{"tags":[],"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1449678406,"creation_date":1322048408,"answer_id":8241565,"question_id":8240721,"body_markdown":"that sounds like a manifestion of core bug [#6700748][1] (can&#39;t verify, that darn bug parade takes ages to connect to ..). So citing from the fix in JXTreeTable:\r\n\r\n        /**\r\n         * {@inheritDoc} &lt;p&gt;\r\n         * \r\n         * Overridden to hack around #766-swingx: cursor flickering in DnD\r\n         * when dragging over tree column. This is a core bug (#6700748) related\r\n         * to painting the rendering component on a CellRendererPane. A trick\r\n         * around is to let this return false. &lt;p&gt;\r\n         * \r\n         * This implementation applies the trick, that is returns false always. \r\n         * The hack can be disabled by setting the treeTable&#39;s client property\r\n         * DROP_HACK_FLAG_KEY to Boolean.FALSE. \r\n         * \r\n         */\r\n        @Override\r\n        public boolean isVisible() {\r\n            return shouldApplyDropHack() ? false : super.isVisible();\r\n        }\r\n\r\n\r\n        /**\r\n         * Returns a boolean indicating whether the drop hack should be applied.\r\n         * \r\n         * @return a boolean indicating whether the drop hack should be applied.\r\n         */\r\n        protected boolean shouldApplyDropHack() {\r\n            return !Boolean.FALSE.equals(treeTable.getClientProperty(DROP_HACK_FLAG_KEY));\r\n        }\r\n\r\n\r\n  [1]: http://bugs.java.com/view_bug.do?bug_id=6700748","title":"JTreeTable DnD crazy blinking drop cursor","body":"<p>that sounds like a manifestion of core bug <a href=\"http://bugs.java.com/view_bug.do?bug_id=6700748\" rel=\"noreferrer\">#6700748</a> (can't verify, that darn bug parade takes ages to connect to ..). So citing from the fix in JXTreeTable:</p>\n\n<pre><code>    /**\n     * {@inheritDoc} &lt;p&gt;\n     * \n     * Overridden to hack around #766-swingx: cursor flickering in DnD\n     * when dragging over tree column. This is a core bug (#6700748) related\n     * to painting the rendering component on a CellRendererPane. A trick\n     * around is to let this return false. &lt;p&gt;\n     * \n     * This implementation applies the trick, that is returns false always. \n     * The hack can be disabled by setting the treeTable's client property\n     * DROP_HACK_FLAG_KEY to Boolean.FALSE. \n     * \n     */\n    @Override\n    public boolean isVisible() {\n        return shouldApplyDropHack() ? false : super.isVisible();\n    }\n\n\n    /**\n     * Returns a boolean indicating whether the drop hack should be applied.\n     * \n     * @return a boolean indicating whether the drop hack should be applied.\n     */\n    protected boolean shouldApplyDropHack() {\n        return !Boolean.FALSE.equals(treeTable.getClientProperty(DROP_HACK_FLAG_KEY));\n    }\n</code></pre>\n"}],"owner":{"account_id":470974,"reputation":5658,"user_id":878469,"accept_rate":69,"display_name":"predi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1672,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":8241565,"answer_count":1,"score":6,"last_activity_date":1640888975,"creation_date":1322044590,"question_id":8240721,"body_markdown":"I am using a slightly modified version of the Sun&#39;s example `JTreeTable` backed by my own model. That would be the third example (bookmarks one at http://java.sun.com/products/jfc/tsc/articles/bookmarks/).\r\n\r\nEverything works as expected except drag and drop support. I wanted DnD which is more like what a `JTree` provides. Since `JTreeTable` is an extended `JTable` it provides the `JTable.DropLocation` class for determining drop locations which does not offer enough information when dropping stuff into the tree rendered column of the `JTreeTable` (no path and no child index). I&#39;ve already solved that by creating a custom `DropLocation` class which is based on a combination of `JTable` and `JTree` versions of it. I&#39;ve also modified the paint method of the `TreeTableCellRenderer` class which is provided by the mentioned `JTreeTable` implementation to show this new information to the user (she is now able to see if the new node will be placed inside, before or after the selected node if inside the tree column, as you would expect from a `JTree`).\r\n\r\nThere is one problem though. The mouse cursor is going crazy when the drop location is being rendered inside the tree column. It appears and then disappears a few milliseconds later or this happens so fast that the drag cursor is not even shown. This happens with the unmodified Sun&#39;s example too. I am completely in the dark as to why this is happening. Did find another person with the same problem at http://www.java.net/node/663106, but the solution provided there seems to set the component&#39;s drop location to null and cannot be retrieved using `JTreeTable.getDropLocation()` method any more. I need this to convert it to my modified `DropLocation` and then paint stuff based on it.\r\nI am so close to a proper solution for my use case that I can taste it. This cursor blinking thing is the only obstacle in my way. Any ideas?\r\n\r\nUsing Java 1.6.\r\n\r\nP.S.: I&#39;ve decided for a custom `JTreeTable` and not for one of the existing components (like Netbeans Outline or `JXTreeTable`) because they all appear to be suffering from the `JTable.DropLocation` problem and do not offer support for dropping before or after the selected tree node (only inside). If you know of a component which does provide such functionality I&#39;d be glad to hear about it.","title":"JTreeTable DnD crazy blinking drop cursor","body":"<p>I am using a slightly modified version of the Sun's example <code>JTreeTable</code> backed by my own model. That would be the third example (bookmarks one at <a href=\"http://java.sun.com/products/jfc/tsc/articles/bookmarks/\" rel=\"nofollow\">http://java.sun.com/products/jfc/tsc/articles/bookmarks/</a>).</p>\n\n<p>Everything works as expected except drag and drop support. I wanted DnD which is more like what a <code>JTree</code> provides. Since <code>JTreeTable</code> is an extended <code>JTable</code> it provides the <code>JTable.DropLocation</code> class for determining drop locations which does not offer enough information when dropping stuff into the tree rendered column of the <code>JTreeTable</code> (no path and no child index). I've already solved that by creating a custom <code>DropLocation</code> class which is based on a combination of <code>JTable</code> and <code>JTree</code> versions of it. I've also modified the paint method of the <code>TreeTableCellRenderer</code> class which is provided by the mentioned <code>JTreeTable</code> implementation to show this new information to the user (she is now able to see if the new node will be placed inside, before or after the selected node if inside the tree column, as you would expect from a <code>JTree</code>).</p>\n\n<p>There is one problem though. The mouse cursor is going crazy when the drop location is being rendered inside the tree column. It appears and then disappears a few milliseconds later or this happens so fast that the drag cursor is not even shown. This happens with the unmodified Sun's example too. I am completely in the dark as to why this is happening. Did find another person with the same problem at <a href=\"http://www.java.net/node/663106\" rel=\"nofollow\">http://www.java.net/node/663106</a>, but the solution provided there seems to set the component's drop location to null and cannot be retrieved using <code>JTreeTable.getDropLocation()</code> method any more. I need this to convert it to my modified <code>DropLocation</code> and then paint stuff based on it.\nI am so close to a proper solution for my use case that I can taste it. This cursor blinking thing is the only obstacle in my way. Any ideas?</p>\n\n<p>Using Java 1.6.</p>\n\n<p>P.S.: I've decided for a custom <code>JTreeTable</code> and not for one of the existing components (like Netbeans Outline or <code>JXTreeTable</code>) because they all appear to be suffering from the <code>JTable.DropLocation</code> problem and do not offer support for dropping before or after the selected tree node (only inside). If you know of a component which does provide such functionality I'd be glad to hear about it.</p>\n"},{"tags":["java","oracle","mybatis","ibatis","database-cursor"],"answers":[{"tags":[],"owner":{"account_id":2233778,"reputation":4231,"user_id":1970746,"accept_rate":100,"display_name":"clav"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1364566544,"creation_date":1364410447,"answer_id":15667106,"question_id":15666856,"body_markdown":"Result map looks like this:    \r\n\t\r\n    &lt;resultMap id=&quot;UserResult&quot; type=&quot;User&quot;&gt;\r\n        &lt;id property=&quot;userId&quot; column=&quot;userId&quot;/&gt;\r\n        &lt;result property=&quot;firstName&quot; column=&quot;firstName&quot;/&gt;\r\n        &lt;result property=&quot;lastName&quot; column=&quot;lastName&quot;/&gt;    \t\r\n    &lt;/resultMap&gt;\r\n\t\r\nIn your select statement, change the parameter type to java.util.Map.\r\n\t\r\n\t&lt;select id=&quot;getUsers&quot; statementType=&quot;CALLABLE&quot; parameterType=&quot;java.util.Map&quot;&gt; \r\n        {call GetUsers(#{users, jdbcType=CURSOR, javaType=java.sql.ResultSet, mode=OUT, resultMap=UserResult})} \r\n\t&lt;/select&gt;\r\n\t\r\nYour mapper interface looks like this, it looks like you are currently calling this the DAO. The way I&#39;ve done it in the past is to make a mapper interface that gets injected into the DAO and the DAO is what calls the methods on the mapper. Here&#39;s an example mapper interface:\r\n\r\n    public interface UserMapper {\r\n        public Object getUsers(Map&lt;String, Object&gt; params);\r\n    }\r\n\r\nThat mapper class would then get injected into a DAO class and make the call like this:\r\n\r\n    public List&lt;User&gt; getUsers() {\r\n        Map&lt;String, Object&gt; params = new HashMap&lt;String, Object&gt;();\t\r\n        ResultSet rs = null;\r\n        params.put(&quot;users&quot;, rs);\r\n        userMapper.getUsers(params);\r\n        return ((ArrayList&lt;User&gt;)params.get(&quot;users&quot;));\r\n    }","title":"Calling Oracle stored procedures with MyBatis","body":"<p>Result map looks like this:    </p>\n\n<pre><code>&lt;resultMap id=\"UserResult\" type=\"User\"&gt;\n    &lt;id property=\"userId\" column=\"userId\"/&gt;\n    &lt;result property=\"firstName\" column=\"firstName\"/&gt;\n    &lt;result property=\"lastName\" column=\"lastName\"/&gt;     \n&lt;/resultMap&gt;\n</code></pre>\n\n<p>In your select statement, change the parameter type to java.util.Map.</p>\n\n<pre><code>&lt;select id=\"getUsers\" statementType=\"CALLABLE\" parameterType=\"java.util.Map\"&gt; \n    {call GetUsers(#{users, jdbcType=CURSOR, javaType=java.sql.ResultSet, mode=OUT, resultMap=UserResult})} \n&lt;/select&gt;\n</code></pre>\n\n<p>Your mapper interface looks like this, it looks like you are currently calling this the DAO. The way I've done it in the past is to make a mapper interface that gets injected into the DAO and the DAO is what calls the methods on the mapper. Here's an example mapper interface:</p>\n\n<pre><code>public interface UserMapper {\n    public Object getUsers(Map&lt;String, Object&gt; params);\n}\n</code></pre>\n\n<p>That mapper class would then get injected into a DAO class and make the call like this:</p>\n\n<pre><code>public List&lt;User&gt; getUsers() {\n    Map&lt;String, Object&gt; params = new HashMap&lt;String, Object&gt;(); \n    ResultSet rs = null;\n    params.put(\"users\", rs);\n    userMapper.getUsers(params);\n    return ((ArrayList&lt;User&gt;)params.get(\"users\"));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1296941,"reputation":319,"user_id":1247753,"display_name":"Lund Wolfe"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1370517403,"creation_date":1370516350,"answer_id":16960402,"question_id":15666856,"body_markdown":"Getting a resultset from Oracle 11 using MyBatis/iBATIS 3 is a real oddball process.  It makes no sense to me, but it worked.  My example is different, but you&#39;ll get the idea:\r\n\r\n    create or replace \r\n    PROCEDURE SP_GET_ALL_STORED_PROC (l_cursor out SYS_REFCURSOR) IS\r\n    BEGIN\r\n    open l_cursor for select account_id, totalLegs, born, weight, mammal, animal from copybittest;\r\n    END SP_GET_ALL_STORED_PROC;\r\n\r\n    Map map = new HashMap();\r\n    session.selectList(&quot;ibatis_3_test.selectProductAllOracleStoredProc&quot;, map); \r\n    List productList = (List) map.get(&quot;key&quot;);\r\n    \r\n    &lt;resultMap id=&quot;productResultMap&quot; type=&quot;test.Product&quot;&gt;\r\n    &lt;/resultMap&gt;\r\n\r\n    &lt;select id=&quot;selectProductAllOracleStoredProc&quot; parameterType=&quot;java.util.Map&quot; statementType=&quot;CALLABLE&quot;&gt;\r\n        {call SP_GET_ALL_STORED_PROC(#{key, jdbcType=CURSOR, mode=OUT, javaType=java.sql.ResultSet,resultMap=productResultMap})}\r\n    &lt;/select&gt;\r\n\r\n\r\n","title":"Calling Oracle stored procedures with MyBatis","body":"<p>Getting a resultset from Oracle 11 using MyBatis/iBATIS 3 is a real oddball process.  It makes no sense to me, but it worked.  My example is different, but you'll get the idea:</p>\n\n<pre><code>create or replace \nPROCEDURE SP_GET_ALL_STORED_PROC (l_cursor out SYS_REFCURSOR) IS\nBEGIN\nopen l_cursor for select account_id, totalLegs, born, weight, mammal, animal from copybittest;\nEND SP_GET_ALL_STORED_PROC;\n\nMap map = new HashMap();\nsession.selectList(\"ibatis_3_test.selectProductAllOracleStoredProc\", map); \nList productList = (List) map.get(\"key\");\n\n&lt;resultMap id=\"productResultMap\" type=\"test.Product\"&gt;\n&lt;/resultMap&gt;\n\n&lt;select id=\"selectProductAllOracleStoredProc\" parameterType=\"java.util.Map\" statementType=\"CALLABLE\"&gt;\n    {call SP_GET_ALL_STORED_PROC(#{key, jdbcType=CURSOR, mode=OUT, javaType=java.sql.ResultSet,resultMap=productResultMap})}\n&lt;/select&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8362443,"reputation":1,"user_id":6280263,"display_name":"Christopher"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1462180119,"creation_date":1462175896,"answer_id":36977662,"question_id":15666856,"body_markdown":"I also got the same error.\r\n\r\n&gt; Caused by: org.apache.ibatis.reflection.ReflectionException: There is\r\n&gt; no setter for property named &#39;columnNames&#39; in &#39;class java.lang.Class&#39;\r\n&gt; \r\n&gt; in mapper.java getSearchResult(searchCriteriaVO vo)\r\n&gt; \r\n&gt; in mapper.xml\r\n\r\n      #{userId, mode=IN, jdbcType=VARCHAR},\r\n\t\t#{resultList, mode=OUT, jdbcType=CURSOR, javaType=ResultSet,  resultMap=inquiryResult},\r\n\r\nwhere inquiryResult is defined as\r\n\r\n    &lt;resultMap type=&quot;java.util.LinkedHashMap&quot; id=&quot;inquiryResult&quot;&gt;\r\n    &lt;result property=&quot;name&quot; jdbcType=&quot;VARCHAR&quot; javaType=&quot;String&quot; column=&quot;name&quot;/&gt;\r\n\r\nStruggled for a day\r\nBut when I debugged, it&#39;s a simple mistake that I made. My Value Object was passing as a null to my mapper class. The query was getting executed even my VO was null because mybatis passing values as null. But when mybatis was trying to set the result to my VO, since it is null, it was throwing the above error.\r\n\r\nHope this is useful info ","title":"Calling Oracle stored procedures with MyBatis","body":"<p>I also got the same error.</p>\n\n<blockquote>\n  <p>Caused by: org.apache.ibatis.reflection.ReflectionException: There is\n  no setter for property named 'columnNames' in 'class java.lang.Class'</p>\n  \n  <p>in mapper.java getSearchResult(searchCriteriaVO vo)</p>\n  \n  <p>in mapper.xml</p>\n</blockquote>\n\n<pre><code>  #{userId, mode=IN, jdbcType=VARCHAR},\n    #{resultList, mode=OUT, jdbcType=CURSOR, javaType=ResultSet,  resultMap=inquiryResult},\n</code></pre>\n\n<p>where inquiryResult is defined as</p>\n\n<pre><code>&lt;resultMap type=\"java.util.LinkedHashMap\" id=\"inquiryResult\"&gt;\n&lt;result property=\"name\" jdbcType=\"VARCHAR\" javaType=\"String\" column=\"name\"/&gt;\n</code></pre>\n\n<p>Struggled for a day\nBut when I debugged, it's a simple mistake that I made. My Value Object was passing as a null to my mapper class. The query was getting executed even my VO was null because mybatis passing values as null. But when mybatis was trying to set the result to my VO, since it is null, it was throwing the above error.</p>\n\n<p>Hope this is useful info </p>\n"},{"tags":[],"owner":{"account_id":2700682,"reputation":51,"user_id":2331471,"display_name":"Rahul Mishra"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1484336238,"creation_date":1484336238,"answer_id":41642220,"question_id":15666856,"body_markdown":"Just an addition to the clav&#39;s comment, Snoozy, you need to remove resultSet from \r\n\r\n    &lt;select id=&quot;getUsers&quot; statementType=&quot;CALLABLE&quot; resultMap=&quot;UserResult&quot;&gt;\r\n        {CALL GetUsers(#    {resultSet,mode=OUT,jdbcType=CURSOR,resultMap=UserResult})}\r\n&lt;/select&gt;\r\nand change that to &quot;key&quot; as in:\r\n\r\n    &lt;select id=&quot;getUsers&quot; statementType=&quot;CALLABLE&quot; resultMap=&quot;UserResult&quot;&gt;\r\n        {CALL GetUsers(#{key,mode=OUT,jdbcType=CURSOR,resultMap=UserResult})}\r\n    &lt;/select&gt;\r\n\r\nI hope that was helpful.","title":"Calling Oracle stored procedures with MyBatis","body":"<p>Just an addition to the clav's comment, Snoozy, you need to remove resultSet from </p>\n\n<pre><code>&lt;select id=\"getUsers\" statementType=\"CALLABLE\" resultMap=\"UserResult\"&gt;\n    {CALL GetUsers(#    {resultSet,mode=OUT,jdbcType=CURSOR,resultMap=UserResult})}\n</code></pre>\n\n<p>\nand change that to \"key\" as in:</p>\n\n<pre><code>&lt;select id=\"getUsers\" statementType=\"CALLABLE\" resultMap=\"UserResult\"&gt;\n    {CALL GetUsers(#{key,mode=OUT,jdbcType=CURSOR,resultMap=UserResult})}\n&lt;/select&gt;\n</code></pre>\n\n<p>I hope that was helpful.</p>\n"}],"owner":{"account_id":1236746,"reputation":143,"user_id":1200195,"display_name":"snoozy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47580,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":15667106,"answer_count":4,"score":6,"last_activity_date":1640888842,"creation_date":1364409639,"question_id":15666856,"body_markdown":"I am in the process of moving our database over to Oracle from SQL Server 2008 but cannot get MyBatis to work.\r\n\r\nGiven the following example:\r\n\r\n**UserMapper.xml** (example)\r\n    \r\n\t&lt;resultMap type=&quot;User&quot; id=&quot;UserResult&quot;&gt;\r\n\t\t&lt;id property=&quot;userId&quot; column=&quot;userId&quot;/&gt;\r\n\t\t&lt;result property=&quot;firstName&quot; column=&quot;firstName&quot;/&gt;\r\n\t\t&lt;result property=&quot;lastName&quot; column=&quot;lastName&quot;/&gt;\r\n\t&lt;/resultMap&gt;\r\n\r\n\t&lt;select id=&quot;getUsers&quot; statementType=&quot;CALLABLE&quot; resultMap=&quot;UserResult&quot;&gt;\r\n\t\t{CALL GetUsers()}\r\n\t&lt;/select&gt;\r\n\r\n**UserDAO.java**\r\n\r\n    public interface UserDAO {\r\n\t    public List&lt;User&gt; getUsers();\r\n    }\r\n\r\n**SQL Server procedure**\r\n\r\n\r\n\tCREATE PROCEDURE [dbo].[GetUsers]\r\n\tAS\r\n\tBEGIN\r\n\t\tSET NOCOUNT ON;\r\n\t\tSELECT userId, firstName, lastName\r\n\t\tFROM Users\r\n\tEND\r\n\r\n...works in SQL Server 2008. Can someone please explain to me how to call the Oracle procedure (that has the same name and columns as the SQL Server procedure above) from the UserMapper.xml and populate my User class with an Oracle cursor?\r\n\r\nThis is what I tried:\r\n\r\n\r\n\t&lt;resultMap type=&quot;User&quot; id=&quot;UserResult&quot;&gt;\r\n\t\t&lt;id property=&quot;userId&quot; column=&quot;userId&quot;/&gt;\r\n\t\t&lt;result property=&quot;firstName&quot; column=&quot;firstName&quot;/&gt;\r\n\t\t&lt;result property=&quot;lastName&quot; column=&quot;lastName&quot;/&gt;\r\n\t&lt;/resultMap&gt;\r\n\r\n\t&lt;select id=&quot;getUsers&quot; statementType=&quot;CALLABLE&quot; resultMap=&quot;UserResult&quot;&gt;\r\n\t\t{CALL GetUsers(#{resultSet,mode=OUT,jdbcType=CURSOR,resultMap=UserResult})}\r\n\t&lt;/select&gt;\r\n\r\nand I get this error:\r\n\r\n\tCaused by: org.apache.ibatis.reflection.ReflectionException: \r\n\tCould not set property &#39;resultSet&#39; of &#39;class java.lang.Class&#39;\r\n\twith value &#39;oracle.jdbc.driver.OracleResultSetImpl@476d05dc&#39; \r\n\tCause: org.apache.ibatis.reflection.ReflectionException: \r\n\tThere is no setter for property named &#39;resultSet&#39; in &#39;class java.lang.Class&#39;","title":"Calling Oracle stored procedures with MyBatis","body":"<p>I am in the process of moving our database over to Oracle from SQL Server 2008 but cannot get MyBatis to work.</p>\n\n<p>Given the following example:</p>\n\n<p><strong>UserMapper.xml</strong> (example)</p>\n\n<pre><code>&lt;resultMap type=\"User\" id=\"UserResult\"&gt;\n    &lt;id property=\"userId\" column=\"userId\"/&gt;\n    &lt;result property=\"firstName\" column=\"firstName\"/&gt;\n    &lt;result property=\"lastName\" column=\"lastName\"/&gt;\n&lt;/resultMap&gt;\n\n&lt;select id=\"getUsers\" statementType=\"CALLABLE\" resultMap=\"UserResult\"&gt;\n    {CALL GetUsers()}\n&lt;/select&gt;\n</code></pre>\n\n<p><strong>UserDAO.java</strong></p>\n\n<pre><code>public interface UserDAO {\n    public List&lt;User&gt; getUsers();\n}\n</code></pre>\n\n<p><strong>SQL Server procedure</strong></p>\n\n<pre><code>CREATE PROCEDURE [dbo].[GetUsers]\nAS\nBEGIN\n    SET NOCOUNT ON;\n    SELECT userId, firstName, lastName\n    FROM Users\nEND\n</code></pre>\n\n<p>...works in SQL Server 2008. Can someone please explain to me how to call the Oracle procedure (that has the same name and columns as the SQL Server procedure above) from the UserMapper.xml and populate my User class with an Oracle cursor?</p>\n\n<p>This is what I tried:</p>\n\n<pre><code>&lt;resultMap type=\"User\" id=\"UserResult\"&gt;\n    &lt;id property=\"userId\" column=\"userId\"/&gt;\n    &lt;result property=\"firstName\" column=\"firstName\"/&gt;\n    &lt;result property=\"lastName\" column=\"lastName\"/&gt;\n&lt;/resultMap&gt;\n\n&lt;select id=\"getUsers\" statementType=\"CALLABLE\" resultMap=\"UserResult\"&gt;\n    {CALL GetUsers(#{resultSet,mode=OUT,jdbcType=CURSOR,resultMap=UserResult})}\n&lt;/select&gt;\n</code></pre>\n\n<p>and I get this error:</p>\n\n<pre><code>Caused by: org.apache.ibatis.reflection.ReflectionException: \nCould not set property 'resultSet' of 'class java.lang.Class'\nwith value 'oracle.jdbc.driver.OracleResultSetImpl@476d05dc' \nCause: org.apache.ibatis.reflection.ReflectionException: \nThere is no setter for property named 'resultSet' in 'class java.lang.Class'\n</code></pre>\n"},{"tags":["java","package","command","javap"],"comments":[{"owner":{"account_id":23667337,"reputation":1467,"user_id":17694626,"display_name":"Cheng Thao"},"score":0,"creation_date":1640888820,"post_id":70535307,"comment_id":124685230,"body_markdown":"You need to add the jkd/bin folder to your path.","body":"You need to add the jkd/bin folder to your path."},{"owner":{"account_id":23668538,"reputation":1,"user_id":17695663,"display_name":"sakshi mishra"},"score":0,"creation_date":1640891433,"post_id":70535307,"comment_id":124685923,"body_markdown":"already did and  all other commands running","body":"already did and  all other commands running"},{"owner":{"account_id":23565192,"reputation":121,"user_id":17606024,"display_name":"p.e.k.k.a"},"score":0,"creation_date":1640893820,"post_id":70535307,"comment_id":124686558,"body_markdown":"Once you add JDK/bin to your PATH, you need to launch a new command prompt to pick changes. If this does not help, can you share the output of the &quot;PATH&quot; environment variable?","body":"Once you add JDK/bin to your PATH, you need to launch a new command prompt to pick changes. If this does not help, can you share the output of the &quot;PATH&quot; environment variable?"},{"owner":{"account_id":7413926,"reputation":5474,"user_id":11374957,"display_name":"Kaan"},"score":0,"creation_date":1656988583,"post_id":70535307,"comment_id":128697107,"body_markdown":"Perhaps your Java installation is incomplete? This command should list a single file: `ls $JAVA_HOME/bin/javap`. If it doesn&#39;t, then javap itself isn&#39;t there.","body":"Perhaps your Java installation is incomplete? This command should list a single file: <code>ls $JAVA_HOME&#47;bin&#47;javap</code>. If it doesn&#39;t, then javap itself isn&#39;t there."}],"owner":{"account_id":23668538,"reputation":1,"user_id":17695663,"display_name":"sakshi mishra"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":581,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1640888240,"creation_date":1640888240,"question_id":70535307,"body_markdown":"Why javap command is not running in command prompt and its showing javap is not recognised as internal or external command except javap all other command is running well.","title":"Javap Command Error in Java On Command Prompt","body":"<p>Why javap command is not running in command prompt and its showing javap is not recognised as internal or external command except javap all other command is running well.</p>\n"},{"tags":["java","kotlin","concurrency","synchronization","java.util.concurrent"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":1,"creation_date":1640886676,"post_id":70534573,"comment_id":124684581,"body_markdown":"The design seems a bit confusing. Why would the thread block and then end up doing nothing? What does the thread do the rest of the time when it&#39;s not either processing or waiting for another thread doing processing? Please use a real example, not an imaginary one. Otherwise you can use for example `Future` to wait for the result of a calculation.","body":"The design seems a bit confusing. Why would the thread block and then end up doing nothing? What does the thread do the rest of the time when it&#39;s not either processing or waiting for another thread doing processing? Please use a real example, not an imaginary one. Otherwise you can use for example <code>Future</code> to wait for the result of a calculation."},{"owner":{"account_id":15139656,"reputation":311,"user_id":10925041,"display_name":"PGliw"},"score":0,"creation_date":1640965538,"post_id":70534573,"comment_id":124700669,"body_markdown":"@Kayaman more real-world example would be (re)establishing some connection. For instance: you are downloading some resources. Each task means downloading a single resource. Many tasks running concurrently means dowloading a bunch of resources. In some point of the time you loose the connection. Each of your concurrent tasks notices it and tries to reastablish the connection via blocking function call. However, if reconnecting is in progress, each of your concurrent tasks should not restart the reconnecting process, but wait for it to be finished.","body":"@Kayaman more real-world example would be (re)establishing some connection. For instance: you are downloading some resources. Each task means downloading a single resource. Many tasks running concurrently means dowloading a bunch of resources. In some point of the time you loose the connection. Each of your concurrent tasks notices it and tries to reastablish the connection via blocking function call. However, if reconnecting is in progress, each of your concurrent tasks should not restart the reconnecting process, but wait for it to be finished."}],"answers":[{"tags":[],"owner":{"account_id":20826852,"reputation":141,"user_id":15297124,"display_name":"JJS"},"down_vote_count":1,"up_vote_count":2,"is_accepted":true,"score":1,"last_activity_date":1640887595,"creation_date":1640887595,"answer_id":70535211,"question_id":70534573,"body_markdown":"Sounds like what you are after could be accomplished with a ConcurrentMap - more specifically, computeIfAbsent.\r\n\r\nFor instance, you can run the code below. Works a bit like a cache - if you what you want is available, simply return it. Otherwise wait for which ever thread gets there first to compute it first.\r\n\r\n```\r\nimport java.time.Instant;\r\nimport java.util.concurrent.*;\r\n\r\npublic class ConcurrencyTest\r\n{\r\n\tprivate final ConcurrentMap&lt;String, String&gt; processItems = new ConcurrentHashMap&lt;&gt;();\r\n\r\n\tpublic String process()\r\n\t{\r\n\t\treturn processItems.computeIfAbsent(&quot;doProcess&quot;, k -&gt; doProcess());\r\n\t}\r\n\r\n\tprivate String doProcess()\r\n\t{\r\n\t\ttry\r\n\t\t{\r\n\t\t\tSystem.out.println(Instant.now() + &quot; -&gt; doProcess() Starting some work on &quot; + Thread.currentThread());\r\n\t\t\tThread.sleep(100);\r\n\t\t\tSystem.out.println(Instant.now() + &quot; -&gt; doProcess() Finished some work on &quot; + Thread.currentThread());\r\n\t\t\treturn Instant.now().toString();\r\n\t\t}\r\n\t\tcatch(Exception e)\r\n\t\t{\r\n\t\t\tthrow new RuntimeException(&quot;Unexpected Exception : &quot; + e, e);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * And to test it out.\r\n\t *\r\n\t * @param args\r\n\t * @throws Exception\r\n\t */\r\n\tpublic static void main(String... args) throws Exception\r\n\t{\r\n\t\tfinal int THREADS = 10;\r\n\t\tfinal ConcurrencyTest test = new ConcurrencyTest();\r\n\t\tfinal ExecutorService execs = Executors.newFixedThreadPool(THREADS);\r\n\t\tfinal CountDownLatch startingGun = new CountDownLatch(1);\r\n\r\n\t\tfor (int i = 0; i &lt; THREADS; i++)\r\n\t\t{\r\n\t\t\texecs.submit(() -&gt; {\r\n\t\t\t\tSystem.out.println(Instant.now() + &quot; -&gt; Thread -&gt; &quot; + Thread.currentThread() + &quot; - Awaiting Starting Gun&quot;);\r\n\t\t\t\ttry\r\n\t\t\t\t{\r\n\t\t\t\t\tstartingGun.await();\r\n\t\t\t\t}\r\n\t\t\t\tcatch (InterruptedException e)\r\n\t\t\t\t{\r\n\t\t\t\t\tthrow new RuntimeException(&quot;Failure waiting for the starting gun.&quot;);\r\n\t\t\t\t}\r\n\t\t\t\tSystem.out.println(Instant.now() + &quot; -&gt; Running Thread -&gt; &quot; + Thread.currentThread());\r\n\t\t\t\tString val = test.process();\r\n\t\t\t\tSystem.out.println(Instant.now() + &quot; -&gt; Got back &quot; + val + &quot; -&gt; &quot; + Thread.currentThread());\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tSystem.out.println(&quot;All tasks submitted.. waiting for 5 seconds then firing the starting gun. &quot;);\r\n\t\tThread.sleep(5_000);\r\n\t\tstartingGun.countDown();\r\n\t\texecs.shutdown();\r\n\t}\r\n\r\n}\r\n\r\n```\r\nGets me the output below. As you can see only one thread end up executing the code in question. The rest wait on it.\r\n```\r\nAll tasks submitted.. waiting for 5 seconds then firing the starting gun. \r\n2021-12-30T17:59:51.696626Z -&gt; Thread -&gt; Thread[pool-1-thread-3,5,main] - Awaiting Starting Gun\r\n2021-12-30T17:59:51.696606Z -&gt; Thread -&gt; Thread[pool-1-thread-8,5,main] - Awaiting Starting Gun\r\n2021-12-30T17:59:51.696245Z -&gt; Thread -&gt; Thread[pool-1-thread-10,5,main] - Awaiting Starting Gun\r\n2021-12-30T17:59:51.696231Z -&gt; Thread -&gt; Thread[pool-1-thread-6,5,main] - Awaiting Starting Gun\r\n2021-12-30T17:59:51.696627Z -&gt; Thread -&gt; Thread[pool-1-thread-5,5,main] - Awaiting Starting Gun\r\n2021-12-30T17:59:51.696633Z -&gt; Thread -&gt; Thread[pool-1-thread-4,5,main] - Awaiting Starting Gun\r\n2021-12-30T17:59:51.696274Z -&gt; Thread -&gt; Thread[pool-1-thread-2,5,main] - Awaiting Starting Gun\r\n2021-12-30T17:59:51.696231Z -&gt; Thread -&gt; Thread[pool-1-thread-1,5,main] - Awaiting Starting Gun\r\n2021-12-30T17:59:51.696620Z -&gt; Thread -&gt; Thread[pool-1-thread-7,5,main] - Awaiting Starting Gun\r\n2021-12-30T17:59:51.696261Z -&gt; Thread -&gt; Thread[pool-1-thread-9,5,main] - Awaiting Starting Gun\r\n2021-12-30T17:59:56.695927Z -&gt; Running Thread -&gt; Thread[pool-1-thread-5,5,main]\r\n2021-12-30T17:59:56.696031Z -&gt; Running Thread -&gt; Thread[pool-1-thread-6,5,main]\r\n2021-12-30T17:59:56.695968Z -&gt; Running Thread -&gt; Thread[pool-1-thread-4,5,main]\r\n2021-12-30T17:59:56.695863Z -&gt; Running Thread -&gt; Thread[pool-1-thread-10,5,main]\r\n2021-12-30T17:59:56.695832Z -&gt; Running Thread -&gt; Thread[pool-1-thread-8,5,main]\r\n2021-12-30T17:59:56.696063Z -&gt; Running Thread -&gt; Thread[pool-1-thread-2,5,main]\r\n2021-12-30T17:59:56.696133Z -&gt; Running Thread -&gt; Thread[pool-1-thread-3,5,main]\r\n2021-12-30T17:59:56.696254Z -&gt; Running Thread -&gt; Thread[pool-1-thread-9,5,main]\r\n2021-12-30T17:59:56.696230Z -&gt; Running Thread -&gt; Thread[pool-1-thread-7,5,main]\r\n2021-12-30T17:59:56.696204Z -&gt; Running Thread -&gt; Thread[pool-1-thread-1,5,main]\r\n2021-12-30T17:59:56.714154Z -&gt; doProcess() Starting some work on Thread[pool-1-thread-4,5,main]\r\n2021-12-30T17:59:56.814608Z -&gt; doProcess() Finished some work on Thread[pool-1-thread-4,5,main]\r\n2021-12-30T17:59:56.815375Z -&gt; Got back 2021-12-30T17:59:56.815016Z -&gt; Thread[pool-1-thread-5,5,main]\r\n2021-12-30T17:59:56.815422Z -&gt; Got back 2021-12-30T17:59:56.815016Z -&gt; Thread[pool-1-thread-7,5,main]\r\n2021-12-30T17:59:56.815104Z -&gt; Got back 2021-12-30T17:59:56.815016Z -&gt; Thread[pool-1-thread-8,5,main]\r\n2021-12-30T17:59:56.815065Z -&gt; Got back 2021-12-30T17:59:56.815016Z -&gt; Thread[pool-1-thread-3,5,main]\r\n2021-12-30T17:59:56.815093Z -&gt; Got back 2021-12-30T17:59:56.815016Z -&gt; Thread[pool-1-thread-2,5,main]\r\n2021-12-30T17:59:56.815054Z -&gt; Got back 2021-12-30T17:59:56.815016Z -&gt; Thread[pool-1-thread-4,5,main]\r\n2021-12-30T17:59:56.815420Z -&gt; Got back 2021-12-30T17:59:56.815016Z -&gt; Thread[pool-1-thread-6,5,main]\r\n2021-12-30T17:59:56.815387Z -&gt; Got back 2021-12-30T17:59:56.815016Z -&gt; Thread[pool-1-thread-1,5,main]\r\n2021-12-30T17:59:56.815077Z -&gt; Got back 2021-12-30T17:59:56.815016Z -&gt; Thread[pool-1-thread-9,5,main]\r\n2021-12-30T17:59:56.815435Z -&gt; Got back 2021-12-30T17:59:56.815016Z -&gt; Thread[pool-1-thread-10,5,main]\r\n```\r\n\r\n","title":"Start execution if it is not in progress yet, otherwise wait for the existing execution to finish in concurrent Java method call","body":"<p>Sounds like what you are after could be accomplished with a ConcurrentMap - more specifically, computeIfAbsent.</p>\n<p>For instance, you can run the code below. Works a bit like a cache - if you what you want is available, simply return it. Otherwise wait for which ever thread gets there first to compute it first.</p>\n<pre><code>import java.time.Instant;\nimport java.util.concurrent.*;\n\npublic class ConcurrencyTest\n{\n    private final ConcurrentMap&lt;String, String&gt; processItems = new ConcurrentHashMap&lt;&gt;();\n\n    public String process()\n    {\n        return processItems.computeIfAbsent(&quot;doProcess&quot;, k -&gt; doProcess());\n    }\n\n    private String doProcess()\n    {\n        try\n        {\n            System.out.println(Instant.now() + &quot; -&gt; doProcess() Starting some work on &quot; + Thread.currentThread());\n            Thread.sleep(100);\n            System.out.println(Instant.now() + &quot; -&gt; doProcess() Finished some work on &quot; + Thread.currentThread());\n            return Instant.now().toString();\n        }\n        catch(Exception e)\n        {\n            throw new RuntimeException(&quot;Unexpected Exception : &quot; + e, e);\n        }\n    }\n\n    /**\n     * And to test it out.\n     *\n     * @param args\n     * @throws Exception\n     */\n    public static void main(String... args) throws Exception\n    {\n        final int THREADS = 10;\n        final ConcurrencyTest test = new ConcurrencyTest();\n        final ExecutorService execs = Executors.newFixedThreadPool(THREADS);\n        final CountDownLatch startingGun = new CountDownLatch(1);\n\n        for (int i = 0; i &lt; THREADS; i++)\n        {\n            execs.submit(() -&gt; {\n                System.out.println(Instant.now() + &quot; -&gt; Thread -&gt; &quot; + Thread.currentThread() + &quot; - Awaiting Starting Gun&quot;);\n                try\n                {\n                    startingGun.await();\n                }\n                catch (InterruptedException e)\n                {\n                    throw new RuntimeException(&quot;Failure waiting for the starting gun.&quot;);\n                }\n                System.out.println(Instant.now() + &quot; -&gt; Running Thread -&gt; &quot; + Thread.currentThread());\n                String val = test.process();\n                System.out.println(Instant.now() + &quot; -&gt; Got back &quot; + val + &quot; -&gt; &quot; + Thread.currentThread());\n            });\n        }\n\n        System.out.println(&quot;All tasks submitted.. waiting for 5 seconds then firing the starting gun. &quot;);\n        Thread.sleep(5_000);\n        startingGun.countDown();\n        execs.shutdown();\n    }\n\n}\n\n</code></pre>\n<p>Gets me the output below. As you can see only one thread end up executing the code in question. The rest wait on it.</p>\n<pre><code>All tasks submitted.. waiting for 5 seconds then firing the starting gun. \n2021-12-30T17:59:51.696626Z -&gt; Thread -&gt; Thread[pool-1-thread-3,5,main] - Awaiting Starting Gun\n2021-12-30T17:59:51.696606Z -&gt; Thread -&gt; Thread[pool-1-thread-8,5,main] - Awaiting Starting Gun\n2021-12-30T17:59:51.696245Z -&gt; Thread -&gt; Thread[pool-1-thread-10,5,main] - Awaiting Starting Gun\n2021-12-30T17:59:51.696231Z -&gt; Thread -&gt; Thread[pool-1-thread-6,5,main] - Awaiting Starting Gun\n2021-12-30T17:59:51.696627Z -&gt; Thread -&gt; Thread[pool-1-thread-5,5,main] - Awaiting Starting Gun\n2021-12-30T17:59:51.696633Z -&gt; Thread -&gt; Thread[pool-1-thread-4,5,main] - Awaiting Starting Gun\n2021-12-30T17:59:51.696274Z -&gt; Thread -&gt; Thread[pool-1-thread-2,5,main] - Awaiting Starting Gun\n2021-12-30T17:59:51.696231Z -&gt; Thread -&gt; Thread[pool-1-thread-1,5,main] - Awaiting Starting Gun\n2021-12-30T17:59:51.696620Z -&gt; Thread -&gt; Thread[pool-1-thread-7,5,main] - Awaiting Starting Gun\n2021-12-30T17:59:51.696261Z -&gt; Thread -&gt; Thread[pool-1-thread-9,5,main] - Awaiting Starting Gun\n2021-12-30T17:59:56.695927Z -&gt; Running Thread -&gt; Thread[pool-1-thread-5,5,main]\n2021-12-30T17:59:56.696031Z -&gt; Running Thread -&gt; Thread[pool-1-thread-6,5,main]\n2021-12-30T17:59:56.695968Z -&gt; Running Thread -&gt; Thread[pool-1-thread-4,5,main]\n2021-12-30T17:59:56.695863Z -&gt; Running Thread -&gt; Thread[pool-1-thread-10,5,main]\n2021-12-30T17:59:56.695832Z -&gt; Running Thread -&gt; Thread[pool-1-thread-8,5,main]\n2021-12-30T17:59:56.696063Z -&gt; Running Thread -&gt; Thread[pool-1-thread-2,5,main]\n2021-12-30T17:59:56.696133Z -&gt; Running Thread -&gt; Thread[pool-1-thread-3,5,main]\n2021-12-30T17:59:56.696254Z -&gt; Running Thread -&gt; Thread[pool-1-thread-9,5,main]\n2021-12-30T17:59:56.696230Z -&gt; Running Thread -&gt; Thread[pool-1-thread-7,5,main]\n2021-12-30T17:59:56.696204Z -&gt; Running Thread -&gt; Thread[pool-1-thread-1,5,main]\n2021-12-30T17:59:56.714154Z -&gt; doProcess() Starting some work on Thread[pool-1-thread-4,5,main]\n2021-12-30T17:59:56.814608Z -&gt; doProcess() Finished some work on Thread[pool-1-thread-4,5,main]\n2021-12-30T17:59:56.815375Z -&gt; Got back 2021-12-30T17:59:56.815016Z -&gt; Thread[pool-1-thread-5,5,main]\n2021-12-30T17:59:56.815422Z -&gt; Got back 2021-12-30T17:59:56.815016Z -&gt; Thread[pool-1-thread-7,5,main]\n2021-12-30T17:59:56.815104Z -&gt; Got back 2021-12-30T17:59:56.815016Z -&gt; Thread[pool-1-thread-8,5,main]\n2021-12-30T17:59:56.815065Z -&gt; Got back 2021-12-30T17:59:56.815016Z -&gt; Thread[pool-1-thread-3,5,main]\n2021-12-30T17:59:56.815093Z -&gt; Got back 2021-12-30T17:59:56.815016Z -&gt; Thread[pool-1-thread-2,5,main]\n2021-12-30T17:59:56.815054Z -&gt; Got back 2021-12-30T17:59:56.815016Z -&gt; Thread[pool-1-thread-4,5,main]\n2021-12-30T17:59:56.815420Z -&gt; Got back 2021-12-30T17:59:56.815016Z -&gt; Thread[pool-1-thread-6,5,main]\n2021-12-30T17:59:56.815387Z -&gt; Got back 2021-12-30T17:59:56.815016Z -&gt; Thread[pool-1-thread-1,5,main]\n2021-12-30T17:59:56.815077Z -&gt; Got back 2021-12-30T17:59:56.815016Z -&gt; Thread[pool-1-thread-9,5,main]\n2021-12-30T17:59:56.815435Z -&gt; Got back 2021-12-30T17:59:56.815016Z -&gt; Thread[pool-1-thread-10,5,main]\n</code></pre>\n"}],"owner":{"account_id":15139656,"reputation":311,"user_id":10925041,"display_name":"PGliw"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":149,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":70535211,"answer_count":1,"score":0,"last_activity_date":1640887595,"creation_date":1640883742,"question_id":70534573,"body_markdown":"Imagine I have a class whose method (`process`) can be called concurrently. \r\nThis method does some processing (`doProcess`) that cannot be executed concurrently. Moreover, if `process` method was called, but processing (`doProcess`) is already in progress - invocation of `process` should wait until the already started processing (`doProcess`) is finished and then return (without starting new processing - `doProcess`). Calling `process` method will only do actual processing (`doProcess`) if none of threads is doing actual processing (`doProcess`) yet.\r\n```kotlin\r\n// Just imaginary example to illustrate the idea\r\nclass MyResource() {\r\n   val lock = MyLock()\r\n   fun process() {\r\n      if (!lock.isLocked) {\r\n         lock.lock()\r\n         doProcess()\r\n         lock.unlock()\r\n      }\r\n      lock.awaitUnlocked()\r\n   }\r\n   private fun doProcess() {\r\n      // actual processing\r\n   }\r\n}\r\n```\r\nWhat would be the intended concurrency (java.util.concurrent) primitive for the concurrency problem described in the imaginary example above? I thought about `ReentrantLock` but it does not offer `awaitUnlocked`. And the `java.util.concurrent.locks.Condition` seems too low-level for this simple use case.","title":"Start execution if it is not in progress yet, otherwise wait for the existing execution to finish in concurrent Java method call","body":"<p>Imagine I have a class whose method (<code>process</code>) can be called concurrently.\nThis method does some processing (<code>doProcess</code>) that cannot be executed concurrently. Moreover, if <code>process</code> method was called, but processing (<code>doProcess</code>) is already in progress - invocation of <code>process</code> should wait until the already started processing (<code>doProcess</code>) is finished and then return (without starting new processing - <code>doProcess</code>). Calling <code>process</code> method will only do actual processing (<code>doProcess</code>) if none of threads is doing actual processing (<code>doProcess</code>) yet.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>// Just imaginary example to illustrate the idea\nclass MyResource() {\n   val lock = MyLock()\n   fun process() {\n      if (!lock.isLocked) {\n         lock.lock()\n         doProcess()\n         lock.unlock()\n      }\n      lock.awaitUnlocked()\n   }\n   private fun doProcess() {\n      // actual processing\n   }\n}\n</code></pre>\n<p>What would be the intended concurrency (java.util.concurrent) primitive for the concurrency problem described in the imaginary example above? I thought about <code>ReentrantLock</code> but it does not offer <code>awaitUnlocked</code>. And the <code>java.util.concurrent.locks.Condition</code> seems too low-level for this simple use case.</p>\n"},{"tags":["java","swing","netbeans","mouse-cursor"],"comments":[{"owner":{"account_id":24536,"reputation":6582,"user_id":62479,"accept_rate":68,"display_name":"Geoffrey Zheng"},"score":0,"creation_date":1286058512,"post_id":3847523,"comment_id":4088614,"body_markdown":"&quot;Emulated&quot;? Do you mean Parallel Desktop or something?","body":"&quot;Emulated&quot;? Do you mean Parallel Desktop or something?"},{"owner":{"account_id":212171,"reputation":372,"user_id":464824,"accept_rate":29,"display_name":"Ivansek"},"score":0,"creation_date":1286095277,"post_id":3847523,"comment_id":4090490,"body_markdown":"Yes i mean in Parallels.","body":"Yes i mean in Parallels."}],"answers":[{"tags":[],"owner":{"account_id":193213,"reputation":596,"user_id":434793,"display_name":"Ferid G&#252;rb&#252;z"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1286477401,"creation_date":1286477401,"answer_id":3884842,"question_id":3847523,"body_markdown":"Probably emulated Windows 7 cant find the image file.\r\nYou should move image file into classpath, next to your java files, so that you can load this file with getClass().getResource().\r\n\r\nIt should work on both emulated Windows 7 and Mac.\r\n    \r\n\r\n        public class CursorTest extends JFrame {\r\n    \tpublic CursorTest() {\r\n    \r\n    \t\tToolkit toolkit = Toolkit.getDefaultToolkit();\r\n    \t\tURL url = getClass().getResource(&quot;/si/xlab/gaea/core/ui/gaeawindow/HandCursor.gif&quot;);\r\n    \r\n    \t\tImage image = null;\r\n    \t\ttry {\r\n    \t\t\timage = ImageIO.read(url.openStream());\r\n    \t\t} catch (IOException e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \r\n    \t\tsetDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n    \r\n    \t\tCursor cursor = toolkit.createCustomCursor(image, new Point(12, 12),\r\n    \t\t\t\t&quot;Hand&quot;);\r\n    \t\tsetCursor(cursor);\r\n    \r\n    \t\tsetSize(new Dimension(200, 200));\r\n    \t\tsetVisible(true);\r\n    \t}\r\n    }\r\n\t\t\t\r\n\r\n","title":"Java - custom cursor is different in different operating systems","body":"<p>Probably emulated Windows 7 cant find the image file.\nYou should move image file into classpath, next to your java files, so that you can load this file with getClass().getResource().</p>\n\n<p>It should work on both emulated Windows 7 and Mac.</p>\n\n<pre><code>    public class CursorTest extends JFrame {\n    public CursorTest() {\n\n        Toolkit toolkit = Toolkit.getDefaultToolkit();\n        URL url = getClass().getResource(\"/si/xlab/gaea/core/ui/gaeawindow/HandCursor.gif\");\n\n        Image image = null;\n        try {\n            image = ImageIO.read(url.openStream());\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n\n        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n\n        Cursor cursor = toolkit.createCustomCursor(image, new Point(12, 12),\n                \"Hand\");\n        setCursor(cursor);\n\n        setSize(new Dimension(200, 200));\n        setVisible(true);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":193938,"reputation":315,"user_id":435965,"display_name":"toddkaufmann"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1287093773,"creation_date":1287093773,"answer_id":3937965,"question_id":3847523,"body_markdown":"The problem is that Windows wants 32x32 cursors and will scale your image if it isn&#39;t.\r\nThe Mac is more flexible.\r\n\r\nThe easiest solution is to pad your existing 16x16 cursors out to 32x32 with transparent pixels; this will then work on both platforms.\r\n\r\nYou can use\r\n\r\n    Toolkit.getDefaultToolkit().getBestCursorSize(w,h)\r\n\r\nto see if a given size is supported.\r\n\r\nFor more info, see:\r\nhttp://forums.sun.com/thread.jspa?threadID=5424409 \r\nwhich also has a link to the MS site.\r\n","title":"Java - custom cursor is different in different operating systems","body":"<p>The problem is that Windows wants 32x32 cursors and will scale your image if it isn't.\nThe Mac is more flexible.</p>\n\n<p>The easiest solution is to pad your existing 16x16 cursors out to 32x32 with transparent pixels; this will then work on both platforms.</p>\n\n<p>You can use</p>\n\n<pre><code>Toolkit.getDefaultToolkit().getBestCursorSize(w,h)\n</code></pre>\n\n<p>to see if a given size is supported.</p>\n\n<p>For more info, see:\n<a href=\"http://forums.sun.com/thread.jspa?threadID=5424409\" rel=\"nofollow\">http://forums.sun.com/thread.jspa?threadID=5424409</a> \nwhich also has a link to the MS site.</p>\n"}],"owner":{"account_id":212171,"reputation":372,"user_id":464824,"accept_rate":29,"display_name":"Ivansek"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2823,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1640887411,"creation_date":1286053363,"question_id":3847523,"body_markdown":"I create custom cursor with bottom code:\r\n\r\n    Toolkit toolkit = Toolkit.getDefaultToolkit();\r\n    Image image = toolkit.getImage(&quot;C:/Users/Administrator/Desktop/gaea/core/ui/gaeawindow/src/si/xlab/gaea/core/ui/gaeawindow/HandCursor.gif&quot;);\r\n\r\n    // Somewhere in mouse pressed action\r\n    \r\n    public void mousePressed(MouseEvent e)\r\n        {\r\n            Cursor cursor = toolkit.createCustomCursor(imageClose, new Point(12,12), &quot;Hand&quot;);\r\n            e.getComponent().setCursor(cursor);\r\n        }\r\n\r\nCursor is shown on Mac like it should be, but in emulated Windows 7 it isn&#39;t. It&#39;s shown increased and it&#39;s ugly. \r\n\r\nWhat fix/trick should i apply to my code to fix this? Is this common problem?","title":"Java - custom cursor is different in different operating systems","body":"<p>I create custom cursor with bottom code:</p>\n\n<pre><code>Toolkit toolkit = Toolkit.getDefaultToolkit();\nImage image = toolkit.getImage(\"C:/Users/Administrator/Desktop/gaea/core/ui/gaeawindow/src/si/xlab/gaea/core/ui/gaeawindow/HandCursor.gif\");\n\n// Somewhere in mouse pressed action\n\npublic void mousePressed(MouseEvent e)\n    {\n        Cursor cursor = toolkit.createCustomCursor(imageClose, new Point(12,12), \"Hand\");\n        e.getComponent().setCursor(cursor);\n    }\n</code></pre>\n\n<p>Cursor is shown on Mac like it should be, but in emulated Windows 7 it isn't. It's shown increased and it's ugly. </p>\n\n<p>What fix/trick should i apply to my code to fix this? Is this common problem?</p>\n"},{"tags":["java","graphics","mouse-cursor"],"answers":[{"tags":[],"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1467318697,"creation_date":1467318697,"answer_id":38132724,"question_id":38132578,"body_markdown":"You can use `Area` and Area.contains(x,y);\r\n\r\n    Rectangle r = ...;\r\n    Area a = new Area(r);\r\n    a.transform(AffineTransform.rotate(Math.PI/2));\r\n    if (a.contains(event.getX(), event.getY()) {\r\n      ...\r\n    }\r\n\r\nI recommend keeping track of the Area in a instance variable so that you can access it in the MouseMotionListener\r\n\r\nAlso see this Area package - everything that starts with &#39;Area&#39; here : https://sourceforge.net/p/tus/code/HEAD/tree/tjacobs/ui/shape","title":"How to see if mouse cursor is hovering over a java graphics2D translated object","body":"<p>You can use <code>Area</code> and Area.contains(x,y);</p>\n\n<pre><code>Rectangle r = ...;\nArea a = new Area(r);\na.transform(AffineTransform.rotate(Math.PI/2));\nif (a.contains(event.getX(), event.getY()) {\n  ...\n}\n</code></pre>\n\n<p>I recommend keeping track of the Area in a instance variable so that you can access it in the MouseMotionListener</p>\n\n<p>Also see this Area package - everything that starts with 'Area' here : <a href=\"https://sourceforge.net/p/tus/code/HEAD/tree/tjacobs/ui/shape\" rel=\"nofollow\">https://sourceforge.net/p/tus/code/HEAD/tree/tjacobs/ui/shape</a></p>\n"}],"owner":{"account_id":5115303,"reputation":375,"user_id":4100662,"accept_rate":81,"display_name":"Colourfit"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1113,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":38132724,"answer_count":1,"score":1,"last_activity_date":1640887099,"creation_date":1467318129,"question_id":38132578,"body_markdown":"I have a rectangle, and have translated it through scale and rotation to a new position on the screen. What I want is to be able to detect when the mouse cursor is hovering over this object on the screen. And not its original non-translated form. I have provided runnable code to display my problem below\r\n\r\n \r\n\r\n    import java.awt.*;\r\n    import java.awt.event.*;\r\n    import java.awt.geom.Path2D;\r\n    import java.util.*;\r\n    import javax.swing.*;\r\n    import javax.swing.Timer;\r\n    \r\n    public class Main extends JPanel {\r\n    \t\r\n    \tstatic int WIDTH;\r\n    \tstatic int HEIGHT;\r\n    \t\r\n    \tpublic Main(){\r\n    \t}\r\n    \t\r\n    \tpublic void paintComponent(Graphics g){\r\n    \t\tsuper.paintComponent(g);\r\n    \t\tGraphics2D g2d = (Graphics2D) g;\r\n    \t\tg2d.setColor(Color.RED);\r\n    \t\tg2d.fillRect(WIDTH/2, HEIGHT/2, 100, 100);\r\n    \t\tg2d.rotate(Math.toRadians(45),WIDTH/2,HEIGHT/2);\r\n    \t\tg2d.scale(0.5, 0.5);\r\n    \t\tg2d.setColor(Color.BLUE);\r\n    \t\tg2d.fillRect(WIDTH/2, HEIGHT/2, 100, 100);\r\n    \t\t\r\n    \t}\r\n    \tpublic static void main(String[] args){\r\n    \t\tDimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();\r\n    \t\tWIDTH = (int) screenSize.getWidth();\r\n    \t\tHEIGHT = (int) screenSize.getHeight();\r\n    \t\tMain main = new Main();\r\n    \t\tJFrame frame = new JFrame();\r\n    \t\tframe.setTitle(&quot;360 ATTACK&quot;);\r\n    \t\tframe.setSize(WIDTH, HEIGHT);\r\n    \t\tframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n    \t\tframe.add(main);\r\n    \t\tframe.setVisible(true);\r\n    \t}\r\n    }\r\n\r\nSo to re-iterate, I want to know when the mouse cursor is hovering over the blue shape. Not the red shape.\r\n\r\nThanks\r\n","title":"How to see if mouse cursor is hovering over a java graphics2D translated object","body":"<p>I have a rectangle, and have translated it through scale and rotation to a new position on the screen. What I want is to be able to detect when the mouse cursor is hovering over this object on the screen. And not its original non-translated form. I have provided runnable code to display my problem below</p>\n\n<pre><code>import java.awt.*;\nimport java.awt.event.*;\nimport java.awt.geom.Path2D;\nimport java.util.*;\nimport javax.swing.*;\nimport javax.swing.Timer;\n\npublic class Main extends JPanel {\n\n    static int WIDTH;\n    static int HEIGHT;\n\n    public Main(){\n    }\n\n    public void paintComponent(Graphics g){\n        super.paintComponent(g);\n        Graphics2D g2d = (Graphics2D) g;\n        g2d.setColor(Color.RED);\n        g2d.fillRect(WIDTH/2, HEIGHT/2, 100, 100);\n        g2d.rotate(Math.toRadians(45),WIDTH/2,HEIGHT/2);\n        g2d.scale(0.5, 0.5);\n        g2d.setColor(Color.BLUE);\n        g2d.fillRect(WIDTH/2, HEIGHT/2, 100, 100);\n\n    }\n    public static void main(String[] args){\n        Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();\n        WIDTH = (int) screenSize.getWidth();\n        HEIGHT = (int) screenSize.getHeight();\n        Main main = new Main();\n        JFrame frame = new JFrame();\n        frame.setTitle(\"360 ATTACK\");\n        frame.setSize(WIDTH, HEIGHT);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.add(main);\n        frame.setVisible(true);\n    }\n}\n</code></pre>\n\n<p>So to re-iterate, I want to know when the mouse cursor is hovering over the blue shape. Not the red shape.</p>\n\n<p>Thanks</p>\n"},{"tags":["java","awt","paint","mouse-cursor"],"answers":[{"tags":[],"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1366334925,"creation_date":1366334925,"answer_id":16095801,"question_id":16095791,"body_markdown":"Set the image as a custom [`Cursor`](http://docs.oracle.com/javase/7/docs/api/java/awt/Cursor.html).  See [`Toolkit.createCustomCursor(Image,Point,String)`](http://docs.oracle.com/javase/7/docs/api/java/awt/Toolkit.html#createCustomCursor%28java.awt.Image,%20java.awt.Point,%20java.lang.String%29) for turning the image into a cursor.","title":"Painting a custom Mouse over your preset mouse","body":"<p>Set the image as a custom <a href=\"http://docs.oracle.com/javase/7/docs/api/java/awt/Cursor.html\" rel=\"nofollow\"><code>Cursor</code></a>.  See <a href=\"http://docs.oracle.com/javase/7/docs/api/java/awt/Toolkit.html#createCustomCursor%28java.awt.Image,%20java.awt.Point,%20java.lang.String%29\" rel=\"nofollow\"><code>Toolkit.createCustomCursor(Image,Point,String)</code></a> for turning the image into a cursor.</p>\n"}],"owner":{"account_id":2479388,"reputation":216,"user_id":2159206,"accept_rate":100,"display_name":"Evan Nudd"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":84,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":16095801,"answer_count":1,"score":1,"last_activity_date":1640886525,"creation_date":1366334823,"question_id":16095791,"body_markdown":"I&#39;m making a game and when I add my sprites to my screen, naturally, they are behind my mouse. But I want to add a custom mouse image to my screen, over the mouse. \r\n\r\nI already have sprites for the mouse, and I know to to make the image appear wherever my mouse is. The only thing is that I already know its going to appear underneath my mouse. Any suggestions? ","title":"Painting a custom Mouse over your preset mouse","body":"<p>I'm making a game and when I add my sprites to my screen, naturally, they are behind my mouse. But I want to add a custom mouse image to my screen, over the mouse.</p>\n<p>I already have sprites for the mouse, and I know to to make the image appear wherever my mouse is. The only thing is that I already know its going to appear underneath my mouse. Any suggestions?</p>\n"},{"tags":["java","spring-boot","unit-testing"],"answers":[{"tags":[],"owner":{"account_id":16211352,"reputation":4324,"user_id":11713777,"display_name":"dariosicily"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640886293,"creation_date":1640886293,"answer_id":70535007,"question_id":70533770,"body_markdown":"You can configure test properties files by using the `locations` or `value` attribute of the [`TestPropertySource`](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/context/TestPropertySource.html) annotation :\r\n\r\n~~~\r\n//Typically, @TestPropertySource will be used in conjunction with @ContextConfiguration.\r\n@ContextConfiguration\r\n@TestPropertySource(&quot;/test.properties&quot;) \r\npublic class Test {\r\n    // class body...\r\n}\r\n~~~\r\n","title":"How to test the binding of configuration properties in Spring Boot?","body":"<p>You can configure test properties files by using the <code>locations</code> or <code>value</code> attribute of the <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/context/TestPropertySource.html\" rel=\"nofollow noreferrer\"><code>TestPropertySource</code></a> annotation :</p>\n<pre><code>//Typically, @TestPropertySource will be used in conjunction with @ContextConfiguration.\n@ContextConfiguration\n@TestPropertySource(&quot;/test.properties&quot;) \npublic class Test {\n    // class body...\n}\n</code></pre>\n"}],"owner":{"account_id":449410,"reputation":3835,"user_id":844177,"accept_rate":71,"display_name":"Oliver"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":572,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1640886377,"creation_date":1640879128,"question_id":70533770,"body_markdown":"I have a Spring Boot Application with the following (simplified) configuration class\r\n\r\n```java\r\n@ConfigurationProperties(prefix = &quot;prefix&quot;)\r\n@Configuration\r\npublic class ConfigProperties {\r\n    @NotNull\r\n    public Duration snapshotOffset;\r\n\r\n}\r\n```\r\n\r\nMy code is working, but I would like know how I can write unit tests for the binding process with different property files as input? \r\n","title":"How to test the binding of configuration properties in Spring Boot?","body":"<p>I have a Spring Boot Application with the following (simplified) configuration class</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ConfigurationProperties(prefix = &quot;prefix&quot;)\n@Configuration\npublic class ConfigProperties {\n    @NotNull\n    public Duration snapshotOffset;\n\n}\n</code></pre>\n<p>My code is working, but I would like know how I can write unit tests for the binding process with different property files as input?</p>\n"},{"tags":["java","winapi","java-native-interface","mouse-cursor"],"owner":{"account_id":387682,"reputation":51,"user_id":746179,"display_name":"Kyro"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":820,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1640885549,"creation_date":1307051461,"question_id":6220810,"body_markdown":"In my java application, i m trying to change the mouse cursor with an argb 32bit bmp file with transparency.\r\n\r\nI want to make a jni call to change it from Windows because changing the cursor in java gives me a really bad mouse cursor (all the transparency is either 0x00 or 0xFF)\r\n\r\nAt the moment i&#39;m trying to use the function SetClassLong with as parameters:\r\n\r\n* the hWnd from java (i got it following that method http://download.oracle.com/javase/1.3/docs/guide/awt/AWT_Native_Interface.html )\r\n* GCL_HCURSOR\r\n* and a cursor made from a raw argb 32bit bmp buffer\r\n\r\nThat piece of code works in a sample win32 atl windows test program:\r\n\t\r\n\tHBITMAP hBitmap = (HBITMAP)CreateBitmap(32, 32, 1, 32, pRawBmpData); \r\n\tBITMAP bmp;\r\n\t::GetObject(hBitmap, sizeof(BITMAP), &amp;bmp);\r\n\r\n\tHBITMAP hMask = ::CreateCompatibleBitmap(::GetDC(NULL), bmp.bmWidth, bmp.bmHeight);\r\n\r\n\tICONINFO ii = {0};\r\n\tii.fIcon = FALSE;\r\n\tii.hbmColor = hBitmap;\r\n\tii.hbmMask = hMask;\r\n\tii.xHotspot = 0;\r\n\tii.yHotspot = 0;\r\n\r\n\tHCURSOR cursor = ::CreateIconIndirect(&amp;ii);\r\n\r\n\tSetCursor(cursor);\r\n\tSetClassLong(hWnd, GCL_HCURSOR, (DWORD)cursor);\r\nBut not in a dll called from java through jni\r\n\r\nIf somebody has a better approach or solution to this case, thanks\r\n\r\nCheers","title":"Trying to change Windows mouse cursor icon from java through jni call","body":"<p>In my java application, i m trying to change the mouse cursor with an argb 32bit bmp file with transparency.</p>\n\n<p>I want to make a jni call to change it from Windows because changing the cursor in java gives me a really bad mouse cursor (all the transparency is either 0x00 or 0xFF)</p>\n\n<p>At the moment i'm trying to use the function SetClassLong with as parameters:</p>\n\n<ul>\n<li>the hWnd from java (i got it following that method <a href=\"http://download.oracle.com/javase/1.3/docs/guide/awt/AWT_Native_Interface.html\" rel=\"nofollow\">http://download.oracle.com/javase/1.3/docs/guide/awt/AWT_Native_Interface.html</a> )</li>\n<li>GCL_HCURSOR</li>\n<li>and a cursor made from a raw argb 32bit bmp buffer</li>\n</ul>\n\n<p>That piece of code works in a sample win32 atl windows test program:</p>\n\n<pre><code>HBITMAP hBitmap = (HBITMAP)CreateBitmap(32, 32, 1, 32, pRawBmpData); \nBITMAP bmp;\n::GetObject(hBitmap, sizeof(BITMAP), &amp;bmp);\n\nHBITMAP hMask = ::CreateCompatibleBitmap(::GetDC(NULL), bmp.bmWidth, bmp.bmHeight);\n\nICONINFO ii = {0};\nii.fIcon = FALSE;\nii.hbmColor = hBitmap;\nii.hbmMask = hMask;\nii.xHotspot = 0;\nii.yHotspot = 0;\n\nHCURSOR cursor = ::CreateIconIndirect(&amp;ii);\n\nSetCursor(cursor);\nSetClassLong(hWnd, GCL_HCURSOR, (DWORD)cursor);\n</code></pre>\n\n<p>But not in a dll called from java through jni</p>\n\n<p>If somebody has a better approach or solution to this case, thanks</p>\n\n<p>Cheers</p>\n"},{"tags":["java","spring","spring-boot","spring-mvc"],"answers":[{"tags":[],"owner":{"account_id":7668980,"reputation":2584,"user_id":5811874,"display_name":"Hanchen Jiang"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1640885480,"creation_date":1640885038,"answer_id":70534802,"question_id":70534777,"body_markdown":"The problem is a `usertype` is not defined in the paths here:\r\n```java\r\n@GetMapping(value = &quot;/&quot;, produces = &quot;application/json&quot;)\r\n```\r\nYou need to tell Spring where to find the `@PathVariable(&quot;usertype&quot;)`. So something like this would work\r\n```java\r\n@GetMapping(value = &quot;/{usertype}&quot;, produces = &quot;application/json&quot;)\r\n```\r\n\r\nHere&#39;s a [tutorial][1] about using path variables in Spring Boot\r\n\r\n\r\n  [1]: https://www.baeldung.com/spring-pathvariable","title":"What is wrong in this Spring Boot controller method annotation? (the path of the request is defined at class level and the path variable at method)","body":"<p>The problem is a <code>usertype</code> is not defined in the paths here:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@GetMapping(value = &quot;/&quot;, produces = &quot;application/json&quot;)\n</code></pre>\n<p>You need to tell Spring where to find the <code>@PathVariable(&quot;usertype&quot;)</code>. So something like this would work</p>\n<pre class=\"lang-java prettyprint-override\"><code>@GetMapping(value = &quot;/{usertype}&quot;, produces = &quot;application/json&quot;)\n</code></pre>\n<p>Here's a <a href=\"https://www.baeldung.com/spring-pathvariable\" rel=\"nofollow noreferrer\">tutorial</a> about using path variables in Spring Boot</p>\n"}],"owner":{"account_id":2056257,"reputation":41415,"user_id":1833945,"accept_rate":65,"display_name":"AndreaNobili"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":210,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":70534802,"answer_count":1,"score":-1,"last_activity_date":1640885480,"creation_date":1640884842,"question_id":70534777,"body_markdown":"I am working on a Spring Boot project and I am finding the following problem with a controller class method.\r\n\r\nI have this simple controller class:\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/api/admin/usertype&quot;)\r\n    @Log\r\n    public class UserTypeControllerAdmin {\r\n    \t\r\n    \t@Autowired\r\n    \tUserTypeService userTypeService;\r\n    \t\r\n    \t@ApiOperation(\r\n    \t\t      value = &quot;Retrieve the details of a specific user type by the type name&quot;, \r\n    \t\t      notes = &quot;&quot;,\r\n    \t\t      produces = &quot;application/json&quot;)\r\n    \t@GetMapping(value = &quot;/&quot;, produces = &quot;application/json&quot;)\r\n    \tpublic ResponseEntity&lt;UserType&gt; getUSerTypeByName(@PathVariable(&quot;usertype&quot;) String userType) throws NotFoundException  {\r\n    \t\tlog.info(String.format(&quot;****** Retrieve the details of user type having name %s *******&quot;, userType));\r\n    \t\t\r\n    \t\tUserType retrievedUserType = userTypeService.getUserTypeByName(userType);\r\n    \t\t\r\n    \t\treturn new ResponseEntity&lt;UserType&gt;(retrievedUserType, HttpStatus.OK);\r\n    \t\t\t\r\n    \t}\r\n    \r\n    }\r\n\r\nAs you can see controller class is annotated by this mapping:\r\n\r\n    @RequestMapping(&quot;/api/admin/usertype&quot;)\r\n\r\nNow I have this **getUSerTypeByName()** controller class method that should handle GET request like **/api/admin/usertype/ADMIN** where **ADMIN** is the value of the **@PathVariable(&quot;usertype&quot;) String userType**\r\n\r\nThe problem is that performing a request like the previous one it doesn&#39;t enter into the previous controller method and Spring Boot return a 404 error.\r\n\r\nWhy? What is wrong in my annotation? What am I missing? How can I try to fix it?","title":"What is wrong in this Spring Boot controller method annotation? (the path of the request is defined at class level and the path variable at method)","body":"<p>I am working on a Spring Boot project and I am finding the following problem with a controller class method.</p>\n<p>I have this simple controller class:</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/api/admin/usertype&quot;)\n@Log\npublic class UserTypeControllerAdmin {\n    \n    @Autowired\n    UserTypeService userTypeService;\n    \n    @ApiOperation(\n              value = &quot;Retrieve the details of a specific user type by the type name&quot;, \n              notes = &quot;&quot;,\n              produces = &quot;application/json&quot;)\n    @GetMapping(value = &quot;/&quot;, produces = &quot;application/json&quot;)\n    public ResponseEntity&lt;UserType&gt; getUSerTypeByName(@PathVariable(&quot;usertype&quot;) String userType) throws NotFoundException  {\n        log.info(String.format(&quot;****** Retrieve the details of user type having name %s *******&quot;, userType));\n        \n        UserType retrievedUserType = userTypeService.getUserTypeByName(userType);\n        \n        return new ResponseEntity&lt;UserType&gt;(retrievedUserType, HttpStatus.OK);\n            \n    }\n\n}\n</code></pre>\n<p>As you can see controller class is annotated by this mapping:</p>\n<pre><code>@RequestMapping(&quot;/api/admin/usertype&quot;)\n</code></pre>\n<p>Now I have this <strong>getUSerTypeByName()</strong> controller class method that should handle GET request like <strong>/api/admin/usertype/ADMIN</strong> where <strong>ADMIN</strong> is the value of the <strong>@PathVariable(&quot;usertype&quot;) String userType</strong></p>\n<p>The problem is that performing a request like the previous one it doesn't enter into the previous controller method and Spring Boot return a 404 error.</p>\n<p>Why? What is wrong in my annotation? What am I missing? How can I try to fix it?</p>\n"},{"tags":["java","mongodb","spring-webflux","spring-data-mongodb","reactive-mongo-java"],"comments":[{"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1640157090,"post_id":70443270,"comment_id":124526122,"body_markdown":"How is it ”not working”? Please update with outcome, errors etc","body":"How is it ”not working”? Please update with outcome, errors etc"},{"owner":{"account_id":10418328,"reputation":828,"user_id":7681696,"display_name":"GtdDev"},"score":0,"creation_date":1640269301,"post_id":70443270,"comment_id":124558044,"body_markdown":"Actually, there is no error message. \nSimply, the second Collection(Task) is not being updated, \nalthough, the first one(Project) is being updated. It is so strange...","body":"Actually, there is no error message.  Simply, the second Collection(Task) is not being updated,  although, the first one(Project) is being updated. It is so strange..."},{"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1640284117,"post_id":70443270,"comment_id":124562894,"body_markdown":"why are you chaining so many `then`?","body":"why are you chaining so many <code>then</code>?"},{"owner":{"account_id":10418328,"reputation":828,"user_id":7681696,"display_name":"GtdDev"},"score":0,"creation_date":1640285863,"post_id":70443270,"comment_id":124563371,"body_markdown":"@Toerktumlare Opsss. my bad. it is corrected","body":"@Toerktumlare Opsss. my bad. it is corrected"}],"answers":[{"tags":[],"owner":{"account_id":10418328,"reputation":828,"user_id":7681696,"display_name":"GtdDev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640884807,"creation_date":1640276373,"answer_id":70464770,"question_id":70443270,"body_markdown":"**Update**\r\n\r\nThats my solution for this problem, using delete instead update (same idea):\r\n\r\n```lang-java\r\n    public Mono&lt;ProjectChild&gt; DeleteCritTemplMultCollections(\r\n       String projectId,\r\n       String taskId) {\r\n\r\n    Query project = Query.query(Criteria.where(&quot;_id&quot;)\r\n                                        .in(projectId));\r\n\r\n    Query taskToDelete = Query.query(Criteria.where(&quot;_id&quot;)\r\n                                             .in(taskId));\r\n\r\n    Update deleteTaskInProjectCollection = new Update();\r\n    deleteTaskInProjectCollection.pull(&quot;tasks&quot;, taskToDelete);\r\n\r\n    Mono&lt;DeleteResult&gt; removeTaskInTaskCollection =\r\n         template.remove(taskToDelete, Task.class);\r\n\r\n    return template\r\n         .updateMulti(project, deleteTaskInProjectCollection, &quot;projectchild&quot;)\r\n         .then(removeTaskInTaskCollection)\r\n         .then(template.findById(projectId, ProjectChild.class));\r\n  }\r\n```\r\n\r\nFor better understanding, follow There are my entities:\r\n```lang-java\r\n@Getter\r\n@Setter\r\n@Document(collection = &quot;projectchild&quot;)\r\npublic class ProjectChild {\r\n  @Id\r\n  private String _id;\r\n\r\n  private String name;\r\n\r\n  private String code;\r\n\r\n  @Field(&quot;desc&quot;)\r\n  private String description;\r\n\r\n  private String startDate;\r\n\r\n  private String endDate;\r\n\r\n  @Field(&quot;cost&quot;)\r\n  private long estimatedCost;\r\n\r\n  private List&lt;String&gt; countryList;\r\n\r\n  private List&lt;Task&gt; tasks;\r\n\r\n  @Version\r\n  private Long version;\r\n}\r\n\r\n\r\n@Getter\r\n@Setter\r\n@Document(collection = &quot;task&quot;)\r\npublic class Task {\r\n\r\n  @Id\r\n  private String _id;\r\n\r\n  @Field(&quot;pid&quot;)\r\n  private String projectId;\r\n\r\n  private String name;\r\n\r\n  @Field(&quot;desc&quot;)\r\n  private String description;\r\n\r\n  private String ownername;\r\n\r\n  private long cost;\r\n\r\n  @Version\r\n  private Long version;\r\n}\r\n\r\n```","title":"How Can I do “the same UPDATE-METHOD” updates 02 Collections “at the same time” using Spring Data ReactiveMongoTemplate?","body":"<p><strong>Update</strong></p>\n<p>Thats my solution for this problem, using delete instead update (same idea):</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public Mono&lt;ProjectChild&gt; DeleteCritTemplMultCollections(\n       String projectId,\n       String taskId) {\n\n    Query project = Query.query(Criteria.where(&quot;_id&quot;)\n                                        .in(projectId));\n\n    Query taskToDelete = Query.query(Criteria.where(&quot;_id&quot;)\n                                             .in(taskId));\n\n    Update deleteTaskInProjectCollection = new Update();\n    deleteTaskInProjectCollection.pull(&quot;tasks&quot;, taskToDelete);\n\n    Mono&lt;DeleteResult&gt; removeTaskInTaskCollection =\n         template.remove(taskToDelete, Task.class);\n\n    return template\n         .updateMulti(project, deleteTaskInProjectCollection, &quot;projectchild&quot;)\n         .then(removeTaskInTaskCollection)\n         .then(template.findById(projectId, ProjectChild.class));\n  }\n</code></pre>\n<p>For better understanding, follow There are my entities:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Getter\n@Setter\n@Document(collection = &quot;projectchild&quot;)\npublic class ProjectChild {\n  @Id\n  private String _id;\n\n  private String name;\n\n  private String code;\n\n  @Field(&quot;desc&quot;)\n  private String description;\n\n  private String startDate;\n\n  private String endDate;\n\n  @Field(&quot;cost&quot;)\n  private long estimatedCost;\n\n  private List&lt;String&gt; countryList;\n\n  private List&lt;Task&gt; tasks;\n\n  @Version\n  private Long version;\n}\n\n\n@Getter\n@Setter\n@Document(collection = &quot;task&quot;)\npublic class Task {\n\n  @Id\n  private String _id;\n\n  @Field(&quot;pid&quot;)\n  private String projectId;\n\n  private String name;\n\n  @Field(&quot;desc&quot;)\n  private String description;\n\n  private String ownername;\n\n  private long cost;\n\n  @Version\n  private Long version;\n}\n\n</code></pre>\n"}],"owner":{"account_id":10418328,"reputation":828,"user_id":7681696,"display_name":"GtdDev"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":251,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1640884807,"creation_date":1640136092,"question_id":70443270,"body_markdown":"### 1) Problem Description: ###\r\n-\tI am using a Reactive Spring-Data + Spring WebFlux + MongoDb + ReactiveMongoTemplate;\r\n-\tI have 02 Collections: ***Task*** and ***Project***\r\n\r\n### 2) My Goal is: ###\r\n-\tUsing only ***“one***  **update method”** \r\n-\tthat updates the 02 documents inside the 02 Collections *(at the same time - simultaneously)*\r\n\r\n\r\n### 3) Code: ### \r\n#### 3.1)  Collection Task #### \r\n\r\n```lang-java\r\n@Document(collection = &quot;task&quot;)\r\npublic class Task {\r\n\r\n  @Id\r\n  private String _id;\r\n\r\n  @Field(&quot;pid&quot;)\r\n  private String projectId;\r\n\r\n  private String taskName;\r\n\r\n  private String ownerProject;\r\n}\r\n```\r\n\r\n#### 3.2)  Collection Project #### \r\n```lang-java\r\n@Document(collection = &quot;project&quot;)\r\npublic class Project {\r\n  @Id\r\n  private String _id;\r\n\r\n  private String ownerProject;\r\n\r\n  private Task tasksProject;\r\n\r\n  private String code;\r\n}\r\n```\r\n\r\n\r\n#### 3.3)  My current code - which is not working #### \r\n```lang-java\r\n public Mono&lt;Void&gt; updateWithCriteriaTemplateMult(String id) {\r\n\r\n    Query projectDocument = new Query();\r\n    projectDocument.addCriteria(Criteria.where(&quot;_id&quot;)\r\n                                             .is(id));\r\n\r\n    Query taskDocument = new Query();\r\n    taskDocument.addCriteria(Criteria.where(&quot;projectId&quot;)\r\n                                          .is(id));\r\n\r\n\r\n    return template\r\n         .update(projectDocument, Project.class)\r\n         .then(template.update(taskDocument, Task.class))\r\n         ;\r\n  }\r\n```\r\n\r\n----------\r\n\r\n\r\n### 2) Question: ### \r\n- How Can I code/do “the same UPDATE-METHOD”  updates both Collections “at the same time” using ReactiveMongoTemplate? \r\n  - Example 01:\tMy method needs to “update” the field “ownerProject”  in both Collections:\r\n    * Task: in this case ‘ownerProject’ is a simple field\r\n    * Project: in this case ‘ownerProject’ is a simple field\r\n\r\n- Example 02:\r\n  - My method needs to “update” the field “taskName” in both Collections:\r\n    - Task: in this case ‘TaskName’ is a simple field\r\n    - Project: in this case ‘TaskName’ is field “inside” “tasksProject”\r\n\r\n----------\r\n\r\n*Thanks a lot for any help*\r\n","title":"How Can I do “the same UPDATE-METHOD” updates 02 Collections “at the same time” using Spring Data ReactiveMongoTemplate?","body":"<h3>1) Problem Description:</h3>\n<ul>\n<li>I am using a Reactive Spring-Data + Spring WebFlux + MongoDb + ReactiveMongoTemplate;</li>\n<li>I have 02 Collections: <em><strong>Task</strong></em> and <em><strong>Project</strong></em></li>\n</ul>\n<h3>2) My Goal is:</h3>\n<ul>\n<li>Using only <em><strong>“one</strong></em>  <strong>update method”</strong></li>\n<li>that updates the 02 documents inside the 02 Collections <em>(at the same time - simultaneously)</em></li>\n</ul>\n<h3>3) Code:</h3>\n<h4>3.1)  Collection Task</h4>\n<pre class=\"lang-java prettyprint-override\"><code>@Document(collection = &quot;task&quot;)\npublic class Task {\n\n  @Id\n  private String _id;\n\n  @Field(&quot;pid&quot;)\n  private String projectId;\n\n  private String taskName;\n\n  private String ownerProject;\n}\n</code></pre>\n<h4>3.2)  Collection Project</h4>\n<pre class=\"lang-java prettyprint-override\"><code>@Document(collection = &quot;project&quot;)\npublic class Project {\n  @Id\n  private String _id;\n\n  private String ownerProject;\n\n  private Task tasksProject;\n\n  private String code;\n}\n</code></pre>\n<h4>3.3)  My current code - which is not working</h4>\n<pre class=\"lang-java prettyprint-override\"><code> public Mono&lt;Void&gt; updateWithCriteriaTemplateMult(String id) {\n\n    Query projectDocument = new Query();\n    projectDocument.addCriteria(Criteria.where(&quot;_id&quot;)\n                                             .is(id));\n\n    Query taskDocument = new Query();\n    taskDocument.addCriteria(Criteria.where(&quot;projectId&quot;)\n                                          .is(id));\n\n\n    return template\n         .update(projectDocument, Project.class)\n         .then(template.update(taskDocument, Task.class))\n         ;\n  }\n</code></pre>\n<hr />\n<h3>2) Question:</h3>\n<ul>\n<li><p>How Can I code/do “the same UPDATE-METHOD”  updates both Collections “at the same time” using ReactiveMongoTemplate?</p>\n<ul>\n<li>Example 01: My method needs to “update” the field “ownerProject”  in both Collections:\n<ul>\n<li>Task: in this case ‘ownerProject’ is a simple field</li>\n<li>Project: in this case ‘ownerProject’ is a simple field</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>Example 02:</p>\n<ul>\n<li>My method needs to “update” the field “taskName” in both Collections:\n<ul>\n<li>Task: in this case ‘TaskName’ is a simple field</li>\n<li>Project: in this case ‘TaskName’ is field “inside” “tasksProject”</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<hr />\n<p><em>Thanks a lot for any help</em></p>\n"},{"tags":["java","spring-boot","spring-data-jpa","spring-data"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1640876360,"post_id":70533243,"comment_id":124681275,"body_markdown":"If I understand you correctly, then the database schema does not have a sequential primary key for the table `Apppointment`. If it has, then it is not reflected in the `@Entity`. Can you [edit] the post and add your database schema?","body":"If I understand you correctly, then the database schema does not have a sequential primary key for the table <code>Apppointment</code>. If it has, then it is not reflected in the <code>@Entity</code>. Can you <a href=\"https://stackoverflow.com/posts/70533243/edit\">edit</a> the post and add your database schema?"},{"owner":{"account_id":18485634,"reputation":2328,"user_id":13466689,"display_name":"Faheem azaz Bhanej"},"score":0,"creation_date":1640877758,"post_id":70533243,"comment_id":124681698,"body_markdown":"You have two option either `IdClass` or `EmbeddedId` because you have `Composite Primary Keys`. and you have to display your `controller` also","body":"You have two option either <code>IdClass</code> or <code>EmbeddedId</code> because you have <code>Composite Primary Keys</code>. and you have to display your <code>controller</code> also"},{"owner":{"account_id":19206172,"reputation":105,"user_id":14033004,"display_name":"tcho1506996"},"score":0,"creation_date":1640877948,"post_id":70533243,"comment_id":124681738,"body_markdown":"@Turing85 I have updated the post to refelct the schema of the table","body":"@Turing85 I have updated the post to refelct the schema of the table"},{"owner":{"account_id":18485634,"reputation":2328,"user_id":13466689,"display_name":"Faheem azaz Bhanej"},"score":0,"creation_date":1640878004,"post_id":70533243,"comment_id":124681765,"body_markdown":"Where the `Controller` and `service`","body":"Where the <code>Controller</code> and <code>service</code>"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1640878164,"post_id":70533243,"comment_id":124681812,"body_markdown":"The setup of the entity class is wrong. The actual primary key (id) is the `idappointment`, i.e. `class Appointment` should have a field `Integer idAppointment` annotated with `@Id @GeneratedValue`. The `@EmbeddedId` is superfluous.","body":"The setup of the entity class is wrong. The actual primary key (id) is the <code>idappointment</code>, i.e. <code>class Appointment</code> should have a field <code>Integer idAppointment</code> annotated with <code>@Id @GeneratedValue</code>. The <code>@EmbeddedId</code> is superfluous."},{"owner":{"account_id":19206172,"reputation":105,"user_id":14033004,"display_name":"tcho1506996"},"score":0,"creation_date":1640878249,"post_id":70533243,"comment_id":124681835,"body_markdown":"@FahimazazBhanej Yes you are right. I had to change that because of this issue I was facing: https://stackoverflow.com/questions/70532165/how-to-model-two-onetomany-relationship -- I then followed this answer: https://stackoverflow.com/questions/53599853/spring-data-jpa-multi-bidirectional-manytoone-propagation-data which made me get to the above state using embeddedID","body":"@FahimazazBhanej Yes you are right. I had to change that because of this issue I was facing: <a href=\"https://stackoverflow.com/questions/70532165/how-to-model-two-onetomany-relationship\" title=\"how to model two onetomany relationship\">stackoverflow.com/questions/70532165/&hellip;</a> -- I then followed this answer: <a href=\"https://stackoverflow.com/questions/53599853/spring-data-jpa-multi-bidirectional-manytoone-propagation-data\" title=\"spring data jpa multi bidirectional manytoone propagation data\">stackoverflow.com/questions/53599853/&hellip;</a> which made me get to the above state using embeddedID"}],"answers":[{"tags":[],"owner":{"account_id":9757929,"reputation":712,"user_id":7233978,"display_name":"The 5th column mouse"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640878383,"creation_date":1640878383,"answer_id":70533654,"question_id":70533243,"body_markdown":"I had similar problem recently. At first to get the composite primary key I used the `@EmbeddedId` but later I found out that adding additional abstraction level added more complexity and for example using of `HashMap` or `HashSet` needs additional logic to represent the keys. So my recommendation is to use the internal generated database ID as key and for unique columns just add a unique constrain:\r\n\r\n```\r\n@Table(uniqueConstraints = { @UniqueConstraint(columnNames = { &quot;barberId&quot;, &quot;customerId&quot; }) })\r\n``` ","title":"How to retrieve a record without using embeddedID?","body":"<p>I had similar problem recently. At first to get the composite primary key I used the <code>@EmbeddedId</code> but later I found out that adding additional abstraction level added more complexity and for example using of <code>HashMap</code> or <code>HashSet</code> needs additional logic to represent the keys. So my recommendation is to use the internal generated database ID as key and for unique columns just add a unique constrain:</p>\n<pre><code>@Table(uniqueConstraints = { @UniqueConstraint(columnNames = { &quot;barberId&quot;, &quot;customerId&quot; }) })\n</code></pre>\n"}],"owner":{"account_id":19206172,"reputation":105,"user_id":14033004,"display_name":"tcho1506996"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":137,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1640884741,"creation_date":1640876026,"question_id":70533243,"body_markdown":"So I have the following entity:\r\n\r\n    @Entity\r\n    @Table(name = &quot;appointment&quot;)\r\n    public class Appointment {\r\n    @EmbeddedId \r\n    private AppointmentId id = new AppointmentId();\r\n\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    @MapsId(&quot;customerId&quot;)\r\n    @JoinColumn(name = &quot;customerId&quot;) //Remember to use joincolumns to rename the generated column is spring creates it\r\n    private Customer customer;\r\n\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    @MapsId(&quot;barberId&quot;)\r\n    @JoinColumn(name = &quot;barberId&quot;) //Remember to use joincolumns to rename the generated column is spring creates it\r\n    private Barber barber;\r\n\r\n    @Column(name = &quot;notes&quot;)\r\n    private String notes;\r\n\r\n    public Appointment(Customer customer, Barber barber, String notes) {\r\n        this.customer = customer;\r\n        this.notes = notes;\r\n        this.barber = barber;\r\n    }\r\n\r\n    public Appointment() {\r\n    }\r\n\r\n    @JsonBackReference\r\n    public Customer getCustomer() {\r\n        return customer;\r\n    }\r\n\r\n    public void setCustomer(Customer customer) {\r\n        this.customer = customer;\r\n    }\r\n\r\n    public String getNotes() {\r\n        return notes;\r\n    }\r\n\r\n    public void setNotes(String notes) {\r\n        this.notes = notes;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;Appointment{&quot; +\r\n                &quot;, notes=&#39;&quot; + notes + &#39;\\&#39;&#39; +\r\n                &#39;}&#39;;\r\n    }\r\n    }\r\n\r\nAnd this is the `AppointmentId`: \r\n\r\n    @SuppressWarnings(&quot;serial&quot;)\r\n    @Embeddable\r\n    public class AppointmentId implements Serializable {\r\n        private Integer barberId;\r\n        private Integer customerId;\r\n    }\r\n\r\nNow I was following a tutorial in which I managed to accomplish what I wanted to do. The key was to add the `@EmbeddedId` annotation and create the AppointmentId class. \r\n\r\nI currently have 3 records in my &#39;Appointment&#39; table in the DB. And each record has a primary key and the value is 1,2,3 resepctively. \r\n\r\nI&#39;m trying to fetch the 2nd record so I&#39;m using the `.findById(2)` method from my interface which extends `JpaRespository&lt;Appointment, Integer&gt;` but I get the following error. I&#39;m not sure why:\r\n\r\n``` Provided id of the wrong type for class com.gogobarber.barber.entities.Appointment. Expected: class com.gogobarber.barber.entities.AppointmentId, got class java.lang.Integer; nested exception is java.lang.IllegalArgumentException: Provided id of the wrong type for class com.gogobarber.barber.entities.Appointment. Expected: class com.gogobarber.barber.entities.AppointmentId, got class java.lang.Integer] with root cause\r\n\r\norg.hibernate.TypeMismatchException: Provided id of the wrong type for class com.gogobarber.barber.entities.Appointment. Expected: class com.gogobarber.barber.entities.AppointmentId, got class java.lang.Integer\r\n```\r\n\r\nI mean the error is self explantory.. it&#39;s asking for the ID in the form of `AppointmentId` but how can I create such an object without knowing the customer or the barber id?\r\n\r\nEDIT = This is my table schema for Appointments:\r\n\r\n    Table: appointment\r\n    Columns:\r\n    idappointment int AI PK \r\n    notes varchar(255) \r\n    barberId int \r\n    customerId int\r\n\r\nEDIT = \r\n\r\nController:\r\n\r\n    @DeleteMapping(&quot;/appointment/{appointmentId}&quot;)\r\n    public void deleteAppointment(@PathVariable String appointmentId)\r\n    {\r\n        appointmentService.deleteAppointment(appointmentId);\r\n    }\r\n\r\nService:\r\n\r\n    @Transactional\r\n    public void deleteAppointment(String appointmentId) {\r\n        appointmentRepo.deleteById(Integer.valueOf(appointmentId));\r\n    }","title":"How to retrieve a record without using embeddedID?","body":"<p>So I have the following entity:</p>\n<pre><code>@Entity\n@Table(name = &quot;appointment&quot;)\npublic class Appointment {\n@EmbeddedId \nprivate AppointmentId id = new AppointmentId();\n\n@ManyToOne(fetch = FetchType.LAZY)\n@MapsId(&quot;customerId&quot;)\n@JoinColumn(name = &quot;customerId&quot;) //Remember to use joincolumns to rename the generated column is spring creates it\nprivate Customer customer;\n\n@ManyToOne(fetch = FetchType.LAZY)\n@MapsId(&quot;barberId&quot;)\n@JoinColumn(name = &quot;barberId&quot;) //Remember to use joincolumns to rename the generated column is spring creates it\nprivate Barber barber;\n\n@Column(name = &quot;notes&quot;)\nprivate String notes;\n\npublic Appointment(Customer customer, Barber barber, String notes) {\n    this.customer = customer;\n    this.notes = notes;\n    this.barber = barber;\n}\n\npublic Appointment() {\n}\n\n@JsonBackReference\npublic Customer getCustomer() {\n    return customer;\n}\n\npublic void setCustomer(Customer customer) {\n    this.customer = customer;\n}\n\npublic String getNotes() {\n    return notes;\n}\n\npublic void setNotes(String notes) {\n    this.notes = notes;\n}\n\n@Override\npublic String toString() {\n    return &quot;Appointment{&quot; +\n            &quot;, notes='&quot; + notes + '\\'' +\n            '}';\n}\n}\n</code></pre>\n<p>And this is the <code>AppointmentId</code>:</p>\n<pre><code>@SuppressWarnings(&quot;serial&quot;)\n@Embeddable\npublic class AppointmentId implements Serializable {\n    private Integer barberId;\n    private Integer customerId;\n}\n</code></pre>\n<p>Now I was following a tutorial in which I managed to accomplish what I wanted to do. The key was to add the <code>@EmbeddedId</code> annotation and create the AppointmentId class.</p>\n<p>I currently have 3 records in my 'Appointment' table in the DB. And each record has a primary key and the value is 1,2,3 resepctively.</p>\n<p>I'm trying to fetch the 2nd record so I'm using the <code>.findById(2)</code> method from my interface which extends <code>JpaRespository&lt;Appointment, Integer&gt;</code> but I get the following error. I'm not sure why:</p>\n<pre><code>\norg.hibernate.TypeMismatchException: Provided id of the wrong type for class com.gogobarber.barber.entities.Appointment. Expected: class com.gogobarber.barber.entities.AppointmentId, got class java.lang.Integer\n</code></pre>\n<p>I mean the error is self explantory.. it's asking for the ID in the form of <code>AppointmentId</code> but how can I create such an object without knowing the customer or the barber id?</p>\n<p>EDIT = This is my table schema for Appointments:</p>\n<pre><code>Table: appointment\nColumns:\nidappointment int AI PK \nnotes varchar(255) \nbarberId int \ncustomerId int\n</code></pre>\n<p>EDIT =</p>\n<p>Controller:</p>\n<pre><code>@DeleteMapping(&quot;/appointment/{appointmentId}&quot;)\npublic void deleteAppointment(@PathVariable String appointmentId)\n{\n    appointmentService.deleteAppointment(appointmentId);\n}\n</code></pre>\n<p>Service:</p>\n<pre><code>@Transactional\npublic void deleteAppointment(String appointmentId) {\n    appointmentRepo.deleteById(Integer.valueOf(appointmentId));\n}\n</code></pre>\n"},{"tags":["java","sonarqube"],"answers":[{"tags":[],"owner":{"account_id":2774008,"reputation":18025,"user_id":2387977,"accept_rate":69,"display_name":"Dherik"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1640884507,"creation_date":1561600053,"answer_id":56782876,"question_id":56782799,"body_markdown":"Your code needs to do something about the possible `NullPointerException` when some exception is caught, because in this scenario the `responseDto` will be null.\r\n\r\nThere are many ways to resolve this. The solution that I recommend is not work with `null` returns or variables on Java, try to [avoid][1] it. You can use `Optional` instead.\r\n\r\nSo, this code should address the Sonar problem:\r\n\r\n    public Optional&lt;MyDto&gt; exchangeUrlRequest(String url){\r\n    \r\n         ResponseEntity&lt;MyDto&gt; responseDto;\r\n         try{\r\n              responseDto = restTemplate.exchange(url, HttpMethod.PUT...);\r\n         } catch(HttpClientErrorException e) {\r\n             //some code here\r\n         }\r\n    \r\n         if (responseDto == null) {\r\n             return Optional.empty();\r\n         } \r\n         return Optional.of(responseDto.getBody());\r\n    }\r\n\r\nYou can also eliminate the `null` check using `Optional&lt;ResponseEntity&lt;MyDto&gt;&gt;`, like:\r\n\r\n    public Optional&lt;MyDto&gt; exchangeUrlRequest(String url){\r\n    \r\n         Optional&lt;ResponseEntity&lt;MyDto&gt;&gt; optResponseDto = Optional.empty();\r\n         try{\r\n              optResponseDto = Optional.of(restTemplate.exchange(url, HttpMethod.PUT...));\r\n         } catch(HttpClientErrorException e) {\r\n             //some code here\r\n         }\r\n    \r\n         if (!optResponseDto.isPresent()) {\r\n             return Optional.empty();\r\n         } \r\n         return optResponseDto.get().getBody();\r\n    }\r\n\r\nEven I don&#39;t recommend this, you can just check the null `responseDto` without any use of `Optional`:\r\n\r\n    public MyDto exchangeUrlRequest(String url){\r\n    \r\n         ResponseEntity&lt;MyDto&gt; responseDto = null;\r\n         try{\r\n              responseDto = restTemplate.exchange(url, HttpMethod.PUT...);\r\n         } catch(HttpClientErrorException e) {\r\n             //some code here\r\n         }\r\n    \r\n         if (responseDto == null) {\r\n             return null;\r\n         } \r\n         return responseDto.getBody();\r\n    }\r\n\r\n  [1]: https://softwareengineering.stackexchange.com/q/373751/172464","title":"SonarQube null pointers should not be dereferenced on try/catch","body":"<p>Your code needs to do something about the possible <code>NullPointerException</code> when some exception is caught, because in this scenario the <code>responseDto</code> will be null.</p>\n<p>There are many ways to resolve this. The solution that I recommend is not work with <code>null</code> returns or variables on Java, try to <a href=\"https://softwareengineering.stackexchange.com/q/373751/172464\">avoid</a> it. You can use <code>Optional</code> instead.</p>\n<p>So, this code should address the Sonar problem:</p>\n<pre><code>public Optional&lt;MyDto&gt; exchangeUrlRequest(String url){\n\n     ResponseEntity&lt;MyDto&gt; responseDto;\n     try{\n          responseDto = restTemplate.exchange(url, HttpMethod.PUT...);\n     } catch(HttpClientErrorException e) {\n         //some code here\n     }\n\n     if (responseDto == null) {\n         return Optional.empty();\n     } \n     return Optional.of(responseDto.getBody());\n}\n</code></pre>\n<p>You can also eliminate the <code>null</code> check using <code>Optional&lt;ResponseEntity&lt;MyDto&gt;&gt;</code>, like:</p>\n<pre><code>public Optional&lt;MyDto&gt; exchangeUrlRequest(String url){\n\n     Optional&lt;ResponseEntity&lt;MyDto&gt;&gt; optResponseDto = Optional.empty();\n     try{\n          optResponseDto = Optional.of(restTemplate.exchange(url, HttpMethod.PUT...));\n     } catch(HttpClientErrorException e) {\n         //some code here\n     }\n\n     if (!optResponseDto.isPresent()) {\n         return Optional.empty();\n     } \n     return optResponseDto.get().getBody();\n}\n</code></pre>\n<p>Even I don't recommend this, you can just check the null <code>responseDto</code> without any use of <code>Optional</code>:</p>\n<pre><code>public MyDto exchangeUrlRequest(String url){\n\n     ResponseEntity&lt;MyDto&gt; responseDto = null;\n     try{\n          responseDto = restTemplate.exchange(url, HttpMethod.PUT...);\n     } catch(HttpClientErrorException e) {\n         //some code here\n     }\n\n     if (responseDto == null) {\n         return null;\n     } \n     return responseDto.getBody();\n}\n</code></pre>\n"}],"owner":{"account_id":9622816,"reputation":29,"user_id":7143450,"display_name":"Ermest"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6316,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1640884558,"creation_date":1561599150,"question_id":56782799,"body_markdown":"Currently I&#39;m working with SonarQube solving issues but I&#39;m facing a trouble to how handle null pointers that shouldn&#39;t be dereferenced. This issues is displayed by SonarQube.\r\n\r\nMy main problem is because I&#39;m doing a restTemplate.exchange with try-catch and declaring a variable with null value before the clause try and then using it inside the try. Finally my method is returning a response with value of restTemplate.\r\n\r\n    public MyDto exchangeUrlRequest(String url){\r\n     ResponseEntity&lt;MyDto&gt; responseDto = null;\r\n     try{\r\n      responseDto = restTemplate.exchange(url, HttpMethod.PUT...\r\n     }catch(HttpClientErrorException e){\r\n       //some code here\r\n     }\r\n      return responseDto.getBody();\r\n    }\r\n\r\nThe expected result here is solve the issue with sonarqube. How handle the initialization of &quot;responseDto&quot; without &quot;null&quot; because is throwing the issue on sonar. \r\n\r\nI already tried to put `ResponseEntity&lt;MyDto&gt; responseDto` inside my try clause assigning and returning the respective value but its mandatory to return something out the try/catch. Put a `new ResponseEntity` is wrong because I won&#39;t know what will be the answer for the status of http.","title":"SonarQube null pointers should not be dereferenced on try/catch","body":"<p>Currently I'm working with SonarQube solving issues but I'm facing a trouble to how handle null pointers that shouldn't be dereferenced. This issues is displayed by SonarQube.</p>\n<p>My main problem is because I'm doing a restTemplate.exchange with try-catch and declaring a variable with null value before the clause try and then using it inside the try. Finally my method is returning a response with value of restTemplate.</p>\n<pre><code>public MyDto exchangeUrlRequest(String url){\n ResponseEntity&lt;MyDto&gt; responseDto = null;\n try{\n  responseDto = restTemplate.exchange(url, HttpMethod.PUT...\n }catch(HttpClientErrorException e){\n   //some code here\n }\n  return responseDto.getBody();\n}\n</code></pre>\n<p>The expected result here is solve the issue with sonarqube. How handle the initialization of &quot;responseDto&quot; without &quot;null&quot; because is throwing the issue on sonar.</p>\n<p>I already tried to put <code>ResponseEntity&lt;MyDto&gt; responseDto</code> inside my try clause assigning and returning the respective value but its mandatory to return something out the try/catch. Put a <code>new ResponseEntity</code> is wrong because I won't know what will be the answer for the status of http.</p>\n"},{"tags":["java","android","bluetooth","mouse-cursor"],"comments":[{"owner":{"account_id":4902890,"reputation":2518,"user_id":3950533,"accept_rate":98,"display_name":"Henry Zhu"},"score":0,"creation_date":1437808038,"post_id":31130559,"comment_id":51195930,"body_markdown":"Try to phrase your question such that it fits SO guidelines. This problem as it currently stands is too broad/primarily opinion based.","body":"Try to phrase your question such that it fits SO guidelines. This problem as it currently stands is too broad/primarily opinion based."}],"answers":[{"tags":[],"owner":{"account_id":3708274,"reputation":272,"user_id":3086235,"display_name":"HawkPriest"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1442849896,"creation_date":1442849896,"answer_id":32699258,"question_id":31130559,"body_markdown":"It is a late answer but one solution would be designing the architecture like: \r\n\r\n - An application that is capable of reading the touch input using the `MotionEvent.ACTION_MOVE` and recording the previous and current values and computing the difference sending it through a bluetooth UDP client to a server.    \r\n&gt;     @Override\r\n&gt;     public boolean onTouch(MotionEvent e)\r\n&gt;     {\r\n&gt;     \r\n&gt;        switch(e)\r\n&gt;        {     \r\n&gt;             case MotionEvent.ACTION_DOWN:\r\n&gt;                 float initX = e.getX();        \r\n&gt;                 float initY = e.getY();\r\n&gt;                 return true;\r\n&gt;     \r\n&gt;             case MotionEvent.ACTION_MOVE:        \r\n&gt;                 float curX = initX - e.getX();\r\n&gt;                 float curY = initY - e.getY();\r\n&gt;                 sendThroughUDP(curX, curY);\r\n&gt;                 return true; \r\n&gt;         }\r\n&gt;     }\r\n\r\n\r\n\r\n - A Server running on your desktop capable of reading this. For example a simple java UDP server over bluetooth which is possible as given [here][1]. This will receive these values and then inject these values to the `Robot` class if Java. \r\n\r\n    \r\n\r\n&gt;      //implement the UDP over the bluetooth stack.\r\n&gt;      public static void main(String [] args)\r\n&gt;      {\r\n&gt;           UDPOverBluetoothServer UDPBT = new UDPOverBluetoothSever(socketInformation);\r\n&gt;           int xValue = UDPBT.getX();          \r\n&gt;           int yValue = UDPBT.getY();\r\n&gt;           Robot robot = new Robot();\r\n&gt;           Point mousePointer = MouseInfo.getPointerInfo().getLocation();\r\n&gt;           robot.mouseMove(mousePointer.x - xValue, mousePointer.y - yValue); \r\n&gt;      }\r\n\r\n    \r\n\r\n\r\n\r\n \r\n\r\n\r\n  [1]: https://stackoverflow.com/a/1046688/3086235\r\n\r\n","title":"How to Send Mouse Movements and Clicks from Android to Desktop","body":"<p>It is a late answer but one solution would be designing the architecture like: </p>\n\n<ul>\n<li><p>An application that is capable of reading the touch input using the <code>MotionEvent.ACTION_MOVE</code> and recording the previous and current values and computing the difference sending it through a bluetooth UDP client to a server.    </p>\n\n<blockquote>\n<pre><code>@Override\npublic boolean onTouch(MotionEvent e)\n{\n\n   switch(e)\n   {     \n        case MotionEvent.ACTION_DOWN:\n            float initX = e.getX();        \n            float initY = e.getY();\n            return true;\n\n        case MotionEvent.ACTION_MOVE:        \n            float curX = initX - e.getX();\n            float curY = initY - e.getY();\n            sendThroughUDP(curX, curY);\n            return true; \n    }\n}\n</code></pre>\n</blockquote></li>\n<li><p>A Server running on your desktop capable of reading this. For example a simple java UDP server over bluetooth which is possible as given <a href=\"https://stackoverflow.com/a/1046688/3086235\">here</a>. This will receive these values and then inject these values to the <code>Robot</code> class if Java. </p></li>\n</ul>\n\n<blockquote>\n<pre><code> //implement the UDP over the bluetooth stack.\n public static void main(String [] args)\n {\n      UDPOverBluetoothServer UDPBT = new UDPOverBluetoothSever(socketInformation);\n      int xValue = UDPBT.getX();          \n      int yValue = UDPBT.getY();\n      Robot robot = new Robot();\n      Point mousePointer = MouseInfo.getPointerInfo().getLocation();\n      robot.mouseMove(mousePointer.x - xValue, mousePointer.y - yValue); \n }\n</code></pre>\n</blockquote>\n"}],"owner":{"account_id":6548992,"reputation":169,"user_id":5063985,"accept_rate":50,"display_name":"darkterbears"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2173,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1640884214,"creation_date":1435643559,"question_id":31130559,"body_markdown":"I want to make an app (Android Studio and Java) that can control a desktop mouse cursor via Bluetooth. \r\n\r\nHow would I go about doing this? Are there any functions to control the cursor of a device connected via BT? Thanks in advance! ","title":"How to Send Mouse Movements and Clicks from Android to Desktop","body":"<p>I want to make an app (Android Studio and Java) that can control a desktop mouse cursor via Bluetooth.</p>\n<p>How would I go about doing this? Are there any functions to control the cursor of a device connected via BT? Thanks in advance!</p>\n"},{"tags":["java","maven","spring-boot-maven-plugin"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1640879180,"post_id":70532907,"comment_id":124682125,"body_markdown":"The spring boot maven plugin is not capable of doing that. But you can combine and using the maven-assembly-plugin to create the zip archive and creating a script like `start.cmd` (I would suggest to use `.cmd` instead `.bat`)...","body":"The spring boot maven plugin is not capable of doing that. But you can combine and using the maven-assembly-plugin to create the zip archive and creating a script like <code>start.cmd</code> (I would suggest to use <code>.cmd</code> instead <code>.bat</code>)..."},{"owner":{"account_id":1159723,"reputation":1811,"user_id":1139500,"display_name":"Joseph Gagnon"},"score":1,"creation_date":1640883856,"post_id":70532907,"comment_id":124683665,"body_markdown":"OK, yes I&#39;ve used the assembly plugin before. Took a little bit to figure it out, but got it to work. Could you post your suggestion as an answer and I will accept it. Thanks.","body":"OK, yes I&#39;ve used the assembly plugin before. Took a little bit to figure it out, but got it to work. Could you post your suggestion as an answer and I will accept it. Thanks."}],"answers":[{"tags":[],"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1640884087,"creation_date":1640884087,"answer_id":70534638,"question_id":70532907,"body_markdown":"The [spring-boot-maven-plugin][1] is not capable of doing that. \r\n\r\nBut you can combine and using the [maven-assembly-plugin][2] to create the zip archive and creating a script like `start.cmd` (I would suggest to use `.cmd` instead `.bat`)\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/maven-plugin/reference/htmlsingle/\r\n  [2]: https://maven.apache.org/plugins/maven-assembly-plugin/","title":"Spring Boot Maven plugin - How do I build a zip file with Java jar file and script to run it?","body":"<p>The <a href=\"https://docs.spring.io/spring-boot/docs/current/maven-plugin/reference/htmlsingle/\" rel=\"nofollow noreferrer\">spring-boot-maven-plugin</a> is not capable of doing that.</p>\n<p>But you can combine and using the <a href=\"https://maven.apache.org/plugins/maven-assembly-plugin/\" rel=\"nofollow noreferrer\">maven-assembly-plugin</a> to create the zip archive and creating a script like <code>start.cmd</code> (I would suggest to use <code>.cmd</code> instead <code>.bat</code>)</p>\n"}],"owner":{"account_id":1159723,"reputation":1811,"user_id":1139500,"display_name":"Joseph Gagnon"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1255,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70534638,"answer_count":1,"score":1,"last_activity_date":1640884087,"creation_date":1640874015,"question_id":70532907,"body_markdown":"I have a simple Spring Boot Java application and am building it using the `spring-boot-maven-plugin` **repackage** goal.\r\n\r\nI want to be able to package up the application, its dependencies and a script file that will be used to run the Java application, into a zip file. The script will be a Windows batch (.bat) script.\r\n\r\nDoes the plugin support this? I briefly looked at the plugin documentation, but couldn&#39;t find anything.\r\n\r\nIf this plugin is not able to do this, or if there is a better alternative, please let me know. I&#39;ve worked with Maven in the past, but am a little rusty.","title":"Spring Boot Maven plugin - How do I build a zip file with Java jar file and script to run it?","body":"<p>I have a simple Spring Boot Java application and am building it using the <code>spring-boot-maven-plugin</code> <strong>repackage</strong> goal.</p>\n<p>I want to be able to package up the application, its dependencies and a script file that will be used to run the Java application, into a zip file. The script will be a Windows batch (.bat) script.</p>\n<p>Does the plugin support this? I briefly looked at the plugin documentation, but couldn't find anything.</p>\n<p>If this plugin is not able to do this, or if there is a better alternative, please let me know. I've worked with Maven in the past, but am a little rusty.</p>\n"},{"tags":["java","hibernate","jpa"],"comments":[{"owner":{"account_id":2094057,"reputation":506072,"user_id":1863229,"accept_rate":58,"display_name":"Tim Biegeleisen"},"score":4,"creation_date":1640856746,"post_id":70529715,"comment_id":124675360,"body_markdown":"I suggest just writing a custom JPA or native query which selects only the column(s) you want.  This will avoid loading the entire entity.","body":"I suggest just writing a custom JPA or native query which selects only the column(s) you want.  This will avoid loading the entire entity."},{"owner":{"account_id":13162489,"reputation":79,"user_id":9507501,"display_name":"camel38"},"score":0,"creation_date":1640857005,"post_id":70529715,"comment_id":124675430,"body_markdown":"That&#39;s what I was thinking about too.\n\nSo the class would have just this, right?\n`@JsonIgnore @ManyToMany\n@JoinTable(\n  name = &quot;course_like&quot;, \n  joinColumns = @JoinColumn(name = &quot;student_id&quot;), \n  inverseJoinColumns = @JoinColumn(name = &quot;course_id&quot;))\nSet&lt;Course&gt; likedCourses;`","body":"That&#39;s what I was thinking about too.  So the class would have just this, right? <code>@JsonIgnore @ManyToMany @JoinTable(   name = &quot;course_like&quot;,    joinColumns = @JoinColumn(name = &quot;student_id&quot;),    inverseJoinColumns = @JoinColumn(name = &quot;course_id&quot;)) Set&lt;Course&gt; likedCourses;</code>"}],"answers":[{"tags":[],"owner":{"account_id":3618847,"reputation":867,"user_id":17695211,"display_name":"Alexey Veleshko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640883860,"creation_date":1640873961,"answer_id":70532895,"question_id":70529715,"body_markdown":"You can do it with the following JPQL query:\r\n\r\n    SELECT c.id\r\n    FROM Student s JOIN s.likedCourses c\r\n\tWHERE s.id = :id\r\n\r\nHowever, I see that Hibernate generates an extra join with the courses table which is unfortunate. If you have problems with that, you can use a native SQL query as [@TimBiegeleisen suggested](#comment124675360_70529715).","title":"How to get only ids in @ManyToMany mapping, without referencing the whole object?","body":"<p>You can do it with the following JPQL query:</p>\n<pre><code>SELECT c.id\nFROM Student s JOIN s.likedCourses c\nWHERE s.id = :id\n</code></pre>\n<p>However, I see that Hibernate generates an extra join with the courses table which is unfortunate. If you have problems with that, you can use a native SQL query as @TimBiegeleisen suggested.</p>\n"}],"owner":{"account_id":13162489,"reputation":79,"user_id":9507501,"display_name":"camel38"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1237,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1640883860,"creation_date":1640856533,"question_id":70529715,"body_markdown":"I am following the tutorial from baeldung:\r\nhttps://www.baeldung.com/jpa-many-to-many\r\n\r\nThe first example is what I need:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/JxSZ8.png\r\n\r\nThe example shows how to add relationship in User class:\r\n\r\n```\r\n@ManyToMany\r\n@JoinTable(\r\n  name = &quot;course_like&quot;, \r\n  joinColumns = @JoinColumn(name = &quot;student_id&quot;), \r\n  inverseJoinColumns = @JoinColumn(name = &quot;course_id&quot;))\r\nSet&lt;Course&gt; likedCourses;\r\n```\r\n\r\nThe difference in my case is that I do not need to access the whole object when getting the data.\r\nI only need to return the set of Ids.\r\n\r\n**1.) I have tried the option with @ElementCollection:**\r\n```\r\n@ManyToMany\r\n@JoinTable(\r\n  name = &quot;course_like&quot;, \r\n  joinColumns = @JoinColumn(name = &quot;student_id&quot;), \r\n  inverseJoinColumns = @JoinColumn(name = &quot;course_id&quot;))\r\nSet&lt;Course&gt; likedCourses;\r\n\r\n\r\n\r\n\r\n@ElementCollection\r\n@CollectionTable(\r\n  name = &quot;course_like&quot;, \r\n  joinColumns = @JoinColumn(name = &quot;student_id&quot;))\r\nSet&lt;Long&gt; likedCourses;\r\n```\r\n\r\n**2.) Also, returning the whole object, iterating and storing ids in**,\r\nand\r\n\r\n**3.) There is a third option with @Transient and @PostLoad**\r\n\r\n```\r\npublic Set&lt;Course&gt; likedCourses;\r\n\r\n@Transient\r\npublic Set&lt;Long&gt; courseIds;\r\n\r\n@PostLoad\r\nprivate void postLoad() {\r\n    courseIds = likedCourses.stream().map(Course::getId).collect(Collectors.toSet());\r\n}\r\n```\r\n\r\n**I am looking for the most optimized way, it seems to me option #3 is not good since it could call @Postload potentially more than once.**\r\n\r\nHow would you go about this? Thank you!\r\n","title":"How to get only ids in @ManyToMany mapping, without referencing the whole object?","body":"<p>I am following the tutorial from baeldung:\n<a href=\"https://www.baeldung.com/jpa-many-to-many\" rel=\"nofollow noreferrer\">https://www.baeldung.com/jpa-many-to-many</a></p>\n<p>The first example is what I need:</p>\n<p><a href=\"https://i.stack.imgur.com/JxSZ8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JxSZ8.png\" alt=\"enter image description here\" /></a></p>\n<p>The example shows how to add relationship in User class:</p>\n<pre><code>@ManyToMany\n@JoinTable(\n  name = &quot;course_like&quot;, \n  joinColumns = @JoinColumn(name = &quot;student_id&quot;), \n  inverseJoinColumns = @JoinColumn(name = &quot;course_id&quot;))\nSet&lt;Course&gt; likedCourses;\n</code></pre>\n<p>The difference in my case is that I do not need to access the whole object when getting the data.\nI only need to return the set of Ids.</p>\n<p><strong>1.) I have tried the option with @ElementCollection:</strong></p>\n<pre><code>@ManyToMany\n@JoinTable(\n  name = &quot;course_like&quot;, \n  joinColumns = @JoinColumn(name = &quot;student_id&quot;), \n  inverseJoinColumns = @JoinColumn(name = &quot;course_id&quot;))\nSet&lt;Course&gt; likedCourses;\n\n\n\n\n@ElementCollection\n@CollectionTable(\n  name = &quot;course_like&quot;, \n  joinColumns = @JoinColumn(name = &quot;student_id&quot;))\nSet&lt;Long&gt; likedCourses;\n</code></pre>\n<p><strong>2.) Also, returning the whole object, iterating and storing ids in</strong>,\nand</p>\n<p><strong>3.) There is a third option with @Transient and @PostLoad</strong></p>\n<pre><code>public Set&lt;Course&gt; likedCourses;\n\n@Transient\npublic Set&lt;Long&gt; courseIds;\n\n@PostLoad\nprivate void postLoad() {\n    courseIds = likedCourses.stream().map(Course::getId).collect(Collectors.toSet());\n}\n</code></pre>\n<p><strong>I am looking for the most optimized way, it seems to me option #3 is not good since it could call @Postload potentially more than once.</strong></p>\n<p>How would you go about this? Thank you!</p>\n"},{"tags":["java","audio","fileoutputstream","random-access"],"answers":[{"tags":[],"owner":{"account_id":2541388,"reputation":111,"user_id":2207123,"display_name":"Mike Jones"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1640883349,"creation_date":1366715381,"answer_id":16167816,"question_id":16162670,"body_markdown":"You need to update the output file header to be correct for the new file you are creating.\r\n\r\n    outputStream.write(head);\r\n\r\nHere you are simply copy the original files header, but it looks like in your loop you are not always copying a sample from the original file to your stripped file (i.e your output file is going to be shorter than the input file).  The wav file format has information in the header regarding the size of the file (see https://ccrma.stanford.edu/courses/422-winter-2014/projects/WaveFormat/ for a break down of the header), you need to update the header to have the correct data length for your new file.","title":"WAV File writing Issue from another wav file","body":"<p>You need to update the output file header to be correct for the new file you are creating.</p>\n<pre><code>outputStream.write(head);\n</code></pre>\n<p>Here you are simply copy the original files header, but it looks like in your loop you are not always copying a sample from the original file to your stripped file (i.e your output file is going to be shorter than the input file).  The wav file format has information in the header regarding the size of the file (see <a href=\"https://ccrma.stanford.edu/courses/422-winter-2014/projects/WaveFormat/\" rel=\"nofollow noreferrer\">https://ccrma.stanford.edu/courses/422-winter-2014/projects/WaveFormat/</a> for a break down of the header), you need to update the header to have the correct data length for your new file.</p>\n"}],"owner":{"account_id":2647644,"reputation":15,"user_id":2290024,"display_name":"user2290024"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":529,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":16167816,"answer_count":1,"score":0,"last_activity_date":1640883349,"creation_date":1366699411,"question_id":16162670,"body_markdown":"In my program I had to remove certain frames from video and audio so that advertisments are removed. The video is stored in .rgb file and audio is stored in .wav file.\r\n\r\nThe video is working fine. But when I try and write only a few frames from one wav file to the output wav file it is giving an error while playing.\r\n\r\nThough the program is writing it properly and I can play it in Real Player, the audio gives an error called mark/reset not supported and unable to get position error when I run it on the code same code to play wav file that professor has given.\r\n\r\nI cant find the mistake in the writing audio function. Here is the function\r\n\r\n\r\n\tpublic void do_audioWrite() throws IOException\r\n\t{\r\n\t\tlong offset=0;\r\n\t\tlong offset2=0;\r\n\t\tint audioInfoSize = 2; //audio info is in bytes\r\n\t\tlong FRAMESIZE= 352*288*(24/8);\r\n\t\tdouble MAX_POSSIBLE_FRAMES=AdvRemove.file_len/FRAMESIZE;\r\n\t\tdouble AUDIO_PER_FRAME = 2000;\r\n\t\tlong videoFrames=0;\r\n\t\tbyte[] bytes = new byte[4000];\r\n        byte[] head = new byte[44];\r\n\t\tRandomAccessFile raf =  new RandomAccessFile(AdvRemove.afilename,&quot;r&quot;);\r\n\t\tOutputStream outputStream = new FileOutputStream(AdvRemove.write_audio);\r\n\t\t\r\n\t\traf.seek(0);\r\n\t\traf.read(head);\r\n\t\toutputStream.write(head);\r\n\t\t\r\n\t\t\r\n\t\tfor (offset=44; ((offset &lt; raf.length()) &amp;&amp; (videoFrames &lt; MAX_POSSIBLE_FRAMES)); offset+=2*AUDIO_PER_FRAME) \r\n\t\t{\r\n\t\t\t\r\n\t\t\tif(Group1.size()&gt;Group2.size())\r\n\t\t\t{\r\n\t\t\t\tif(Group1.contains((int)videoFrames))\r\n\t\t\t\t{\r\n\t\t\t\t\t\r\n\t\t\t\t\t\t\t\traf.seek(offset);\r\n\t\t\t\t\t\t\t\traf.read(bytes);\r\n\t\t\t\t\t\t\t\toutputStream.write(bytes);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\telse if(Group1.size()&lt;Group2.size())\r\n\t\t\t{\r\n\t\t\t\tif(Group2.contains((int)videoFrames))\r\n\t\t\t\t{\r\n\t\t\t\t\traf.seek(offset);\r\n\t\t\t\t\traf.read(bytes);\r\n\t\t\t\t    outputStream.write(bytes);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\r\n\t\t\tvideoFrames++;\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n\r\nABOVE IS MY FUNCTION TO WRITE THE AUDIO.\r\n\r\nI only write an audio frame if the corresponding video frame is found in my arrayList called Group1 and Group2\r\n\r\nFirst I took the header of input wav file and write it to the output wav file.\r\n\r\nThen I check if corresponding video frame exists. If yes, I write the audio frames corresponding to that video frame.\r\n","title":"WAV File writing Issue from another wav file","body":"<p>In my program I had to remove certain frames from video and audio so that advertisments are removed. The video is stored in .rgb file and audio is stored in .wav file.</p>\n\n<p>The video is working fine. But when I try and write only a few frames from one wav file to the output wav file it is giving an error while playing.</p>\n\n<p>Though the program is writing it properly and I can play it in Real Player, the audio gives an error called mark/reset not supported and unable to get position error when I run it on the code same code to play wav file that professor has given.</p>\n\n<p>I cant find the mistake in the writing audio function. Here is the function</p>\n\n<pre><code>public void do_audioWrite() throws IOException\n{\n    long offset=0;\n    long offset2=0;\n    int audioInfoSize = 2; //audio info is in bytes\n    long FRAMESIZE= 352*288*(24/8);\n    double MAX_POSSIBLE_FRAMES=AdvRemove.file_len/FRAMESIZE;\n    double AUDIO_PER_FRAME = 2000;\n    long videoFrames=0;\n    byte[] bytes = new byte[4000];\n    byte[] head = new byte[44];\n    RandomAccessFile raf =  new RandomAccessFile(AdvRemove.afilename,\"r\");\n    OutputStream outputStream = new FileOutputStream(AdvRemove.write_audio);\n\n    raf.seek(0);\n    raf.read(head);\n    outputStream.write(head);\n\n\n    for (offset=44; ((offset &lt; raf.length()) &amp;&amp; (videoFrames &lt; MAX_POSSIBLE_FRAMES)); offset+=2*AUDIO_PER_FRAME) \n    {\n\n        if(Group1.size()&gt;Group2.size())\n        {\n            if(Group1.contains((int)videoFrames))\n            {\n\n                            raf.seek(offset);\n                            raf.read(bytes);\n                            outputStream.write(bytes);\n\n\n            }\n        }\n\n        else if(Group1.size()&lt;Group2.size())\n        {\n            if(Group2.contains((int)videoFrames))\n            {\n                raf.seek(offset);\n                raf.read(bytes);\n                outputStream.write(bytes);\n\n            }\n        }\n\n\n        videoFrames++;\n    }\n\n}\n</code></pre>\n\n<p>ABOVE IS MY FUNCTION TO WRITE THE AUDIO.</p>\n\n<p>I only write an audio frame if the corresponding video frame is found in my arrayList called Group1 and Group2</p>\n\n<p>First I took the header of input wav file and write it to the output wav file.</p>\n\n<p>Then I check if corresponding video frame exists. If yes, I write the audio frames corresponding to that video frame.</p>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":3719429,"reputation":4902,"user_id":3094805,"accept_rate":11,"display_name":"PaulNUK"},"down_vote_count":0,"up_vote_count":121,"is_accepted":true,"score":121,"last_activity_date":1465392904,"creation_date":1465383295,"answer_id":37700521,"question_id":37700352,"body_markdown":"What you are doing here is setting the default **default** profile (the profile that is used on any bean if you don&#39;t specify the `@Profile` annotation) to be `production`.\r\n\r\nWhat you actually need to do is set the default **active** profile, which is done like this:\r\n\r\n    spring.profiles.active=production","title":"Setting the default active profile in Spring-boot","body":"<p>What you are doing here is setting the default <strong>default</strong> profile (the profile that is used on any bean if you don't specify the <code>@Profile</code> annotation) to be <code>production</code>.</p>\n\n<p>What you actually need to do is set the default <strong>active</strong> profile, which is done like this:</p>\n\n<pre><code>spring.profiles.active=production\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6512350,"reputation":151,"user_id":5039176,"accept_rate":100,"display_name":"alxpez"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1465384284,"creation_date":1465384284,"answer_id":37700877,"question_id":37700352,"body_markdown":"If you&#39;re using maven I would do something like this:\r\n\r\nBeing **production** your default profile:\r\n\r\n    &lt;properties&gt;\r\n        &lt;activeProfile&gt;production&lt;/activeProfile&gt;\r\n    &lt;/properties&gt;\r\n\r\nAnd as an example of other profiles:\r\n\r\n    &lt;profiles&gt;\r\n        &lt;!--Your default profile... selected if none specified--&gt;\r\n        &lt;profile&gt;\r\n            &lt;id&gt;production&lt;/id&gt;\r\n            &lt;activation&gt;\r\n                &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;\r\n            &lt;/activation&gt;\r\n            &lt;properties&gt;\r\n                &lt;activeProfile&gt;production&lt;/activeProfile&gt;\r\n            &lt;/properties&gt;\r\n        &lt;/profile&gt;\r\n\r\n        &lt;!--Profile 2--&gt;\r\n        &lt;profile&gt;\r\n            &lt;id&gt;development&lt;/id&gt;\r\n            &lt;properties&gt;\r\n                &lt;activeProfile&gt;development&lt;/activeProfile&gt;\r\n            &lt;/properties&gt;\r\n        &lt;/profile&gt;\r\n\r\n        &lt;!--Profile 3--&gt;\r\n        &lt;profile&gt;\r\n            &lt;id&gt;otherprofile&lt;/id&gt;\r\n            &lt;properties&gt;\r\n                &lt;activeProfile&gt;otherprofile&lt;/activeProfile&gt;\r\n            &lt;/properties&gt;\r\n        &lt;/profile&gt;\r\n    &lt;profiles&gt;\r\n\r\nIn your application.properties you&#39;ll have to set:\r\n\r\n    spring.profiles.active=@activeProfile@\r\n\r\nThis works for me every time, hope it solves your problem.","title":"Setting the default active profile in Spring-boot","body":"<p>If you're using maven I would do something like this:</p>\n\n<p>Being <strong>production</strong> your default profile:</p>\n\n<pre><code>&lt;properties&gt;\n    &lt;activeProfile&gt;production&lt;/activeProfile&gt;\n&lt;/properties&gt;\n</code></pre>\n\n<p>And as an example of other profiles:</p>\n\n<pre><code>&lt;profiles&gt;\n    &lt;!--Your default profile... selected if none specified--&gt;\n    &lt;profile&gt;\n        &lt;id&gt;production&lt;/id&gt;\n        &lt;activation&gt;\n            &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;\n        &lt;/activation&gt;\n        &lt;properties&gt;\n            &lt;activeProfile&gt;production&lt;/activeProfile&gt;\n        &lt;/properties&gt;\n    &lt;/profile&gt;\n\n    &lt;!--Profile 2--&gt;\n    &lt;profile&gt;\n        &lt;id&gt;development&lt;/id&gt;\n        &lt;properties&gt;\n            &lt;activeProfile&gt;development&lt;/activeProfile&gt;\n        &lt;/properties&gt;\n    &lt;/profile&gt;\n\n    &lt;!--Profile 3--&gt;\n    &lt;profile&gt;\n        &lt;id&gt;otherprofile&lt;/id&gt;\n        &lt;properties&gt;\n            &lt;activeProfile&gt;otherprofile&lt;/activeProfile&gt;\n        &lt;/properties&gt;\n    &lt;/profile&gt;\n&lt;profiles&gt;\n</code></pre>\n\n<p>In your application.properties you'll have to set:</p>\n\n<pre><code>spring.profiles.active=@activeProfile@\n</code></pre>\n\n<p>This works for me every time, hope it solves your problem.</p>\n"},{"tags":[],"owner":{"account_id":1507472,"reputation":1450,"user_id":1410512,"accept_rate":20,"display_name":"Tom Van Rossom"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1465393903,"creation_date":1465393903,"answer_id":37704485,"question_id":37700352,"body_markdown":"Put this in the App.java:\r\n\r\n    public static void main(String[] args) throws UnknownHostException {\r\n        SpringApplication app = new SpringApplication(App.class);\r\n        SimpleCommandLinePropertySource source = new SimpleCommandLinePropertySource(args);\r\n        if (!source.containsProperty(&quot;spring.profiles.active&quot;) &amp;&amp;\r\n                !System.getenv().containsKey(&quot;SPRING_PROFILES_ACTIVE&quot;)) {\r\n\r\n            app.setAdditionalProfiles(&quot;production&quot;);\r\n        }\r\n        ...\r\n    }\r\n\r\nThis is how it is done in JHipster","title":"Setting the default active profile in Spring-boot","body":"<p>Put this in the App.java:</p>\n\n<pre><code>public static void main(String[] args) throws UnknownHostException {\n    SpringApplication app = new SpringApplication(App.class);\n    SimpleCommandLinePropertySource source = new SimpleCommandLinePropertySource(args);\n    if (!source.containsProperty(\"spring.profiles.active\") &amp;&amp;\n            !System.getenv().containsKey(\"SPRING_PROFILES_ACTIVE\")) {\n\n        app.setAdditionalProfiles(\"production\");\n    }\n    ...\n}\n</code></pre>\n\n<p>This is how it is done in JHipster</p>\n"},{"tags":[],"owner":{"account_id":345883,"reputation":644,"user_id":679052,"accept_rate":50,"display_name":"scorpp"},"down_vote_count":1,"up_vote_count":12,"is_accepted":false,"score":11,"last_activity_date":1491299950,"creation_date":1491299950,"answer_id":43203983,"question_id":37700352,"body_markdown":"I do it this way\r\n\r\n        System.setProperty(&quot;spring.profiles.default&quot;, &quot;dev&quot;);\r\n\r\nin the very beginning of `main(...)`","title":"Setting the default active profile in Spring-boot","body":"<p>I do it this way</p>\n\n<pre><code>    System.setProperty(\"spring.profiles.default\", \"dev\");\n</code></pre>\n\n<p>in the very beginning of <code>main(...)</code></p>\n"},{"tags":[],"owner":{"account_id":10950471,"reputation":401,"user_id":8046991,"display_name":"Jaya Naresh"},"down_vote_count":0,"up_vote_count":30,"is_accepted":false,"score":30,"last_activity_date":1495442519,"creation_date":1495441977,"answer_id":44108175,"question_id":37700352,"body_markdown":"add `--spring.profiles.active=production`\r\n\r\nExample:\r\n\r\n    java -jar file.jar --spring.profiles.active=production","title":"Setting the default active profile in Spring-boot","body":"<p>add <code>--spring.profiles.active=production</code></p>\n\n<p>Example:</p>\n\n<pre><code>java -jar file.jar --spring.profiles.active=production\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1818426,"reputation":354,"user_id":1653042,"display_name":"user1653042"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1544727196,"creation_date":1544726494,"answer_id":53768229,"question_id":37700352,"body_markdown":"Currently using Maven + Spring Boot. Our solution was the following:\r\n\r\napplication.properties\r\n\r\n    #spring.profiles.active= # comment_out or remove\r\n\r\nsecurityConfig.java\r\n\r\n    @Value(${spring.profiles.active:[default_profile_name]}&quot;)\r\n    private String ACTIVE_PROFILE_NAME;\r\n\r\nCredit starts with [MartinMlima](https://stackoverflow.com/users/3979886/martinmlima). Similar answer provided here:\r\n\r\nhttps://stackoverflow.com/questions/9267799/how-do-you-get-current-active-default-environment-profile-programmatically-in-sp?answertab=active#tab-top","title":"Setting the default active profile in Spring-boot","body":"<p>Currently using Maven + Spring Boot. Our solution was the following:</p>\n\n<p>application.properties</p>\n\n<pre><code>#spring.profiles.active= # comment_out or remove\n</code></pre>\n\n<p>securityConfig.java</p>\n\n<pre><code>@Value(${spring.profiles.active:[default_profile_name]}\")\nprivate String ACTIVE_PROFILE_NAME;\n</code></pre>\n\n<p>Credit starts with <a href=\"https://stackoverflow.com/users/3979886/martinmlima\">MartinMlima</a>. Similar answer provided here:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/9267799/how-do-you-get-current-active-default-environment-profile-programmatically-in-sp?answertab=active#tab-top\">How do you get current active/default Environment profile programmatically in Spring?</a></p>\n"},{"tags":[],"owner":{"account_id":1704906,"reputation":635,"user_id":1564170,"display_name":"Rafael S. Fijalkowski"},"down_vote_count":0,"up_vote_count":24,"is_accepted":false,"score":24,"last_activity_date":1545926828,"creation_date":1545926523,"answer_id":53947722,"question_id":37700352,"body_markdown":"First of all, with the solution below, is necessary to understand that **always the spring boot will read the `application.properties`** file. So the other&#39;s profile files **only will complement and replace** the properties defined before.\r\n\r\nConsidering the follow files:\r\n\r\n    application.properties\r\n    application-qa.properties\r\n    application-prod.properties\r\n\r\n1) Very important. The `application.properties`, and **just this file**, must have the follow line:\r\n\r\n    spring.profiles.active=@spring.profiles.active@\r\n\r\n2) Change what you want in the QA and PROD configuration files to see the difference between the environments.\r\n\r\n3) By command line, start the spring boot app with any of this options:\r\n\r\nIt will start the app with the default `application.properties` file:\r\n\r\n    mvn spring-boot:run\r\n\r\nIt will load the default `application.properties` file and after the `application-qa.properties` file, replacing and/or complementing the default configuration:\r\n\r\n    mvn spring-boot:run -Dspring.profiles.active=qa\r\n\r\nThe same here but with the production environment instead of QA:\r\n\r\n    mvn spring-boot:run -Dspring.profiles.active=prod\r\n\r\n\r\n\r\n\r\n","title":"Setting the default active profile in Spring-boot","body":"<p>First of all, with the solution below, is necessary to understand that <strong>always the spring boot will read the <code>application.properties</code></strong> file. So the other's profile files <strong>only will complement and replace</strong> the properties defined before.</p>\n\n<p>Considering the follow files:</p>\n\n<pre><code>application.properties\napplication-qa.properties\napplication-prod.properties\n</code></pre>\n\n<p>1) Very important. The <code>application.properties</code>, and <strong>just this file</strong>, must have the follow line:</p>\n\n<pre><code>spring.profiles.active=@spring.profiles.active@\n</code></pre>\n\n<p>2) Change what you want in the QA and PROD configuration files to see the difference between the environments.</p>\n\n<p>3) By command line, start the spring boot app with any of this options:</p>\n\n<p>It will start the app with the default <code>application.properties</code> file:</p>\n\n<pre><code>mvn spring-boot:run\n</code></pre>\n\n<p>It will load the default <code>application.properties</code> file and after the <code>application-qa.properties</code> file, replacing and/or complementing the default configuration:</p>\n\n<pre><code>mvn spring-boot:run -Dspring.profiles.active=qa\n</code></pre>\n\n<p>The same here but with the production environment instead of QA:</p>\n\n<pre><code>mvn spring-boot:run -Dspring.profiles.active=prod\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1812830,"reputation":1461,"user_id":1648546,"display_name":"Jay Ehsaniara"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1548092505,"creation_date":1548092505,"answer_id":54295227,"question_id":37700352,"body_markdown":"**In AWS LAMBDA:**\r\n\r\nFor `$ sam local` you add the following line in your sam template yml file:\r\n\r\n    Resources:\r\n       FunctionName:\r\n           Properties:\r\n               Environment:\r\n                   Variables:\r\n                      SPRING_PROFILES_ACTIVE: local\r\n\r\nBut in AWS Console:\r\nin your Lambda Environment variables just add:\r\n\r\nKEY:`JAVA_TOOL_OPTIONS` VALUE:`-Dspring.profiles.active=dev`\t\r\n\r\n[![enter image description here][1]][1]\r\n\r\n \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/GRDv8.png","title":"Setting the default active profile in Spring-boot","body":"<p><strong>In AWS LAMBDA:</strong></p>\n\n<p>For <code>$ sam local</code> you add the following line in your sam template yml file:</p>\n\n<pre><code>Resources:\n   FunctionName:\n       Properties:\n           Environment:\n               Variables:\n                  SPRING_PROFILES_ACTIVE: local\n</code></pre>\n\n<p>But in AWS Console:\nin your Lambda Environment variables just add:</p>\n\n<p>KEY:<code>JAVA_TOOL_OPTIONS</code> VALUE:<code>-Dspring.profiles.active=dev</code>    </p>\n\n<p><a href=\"https://i.stack.imgur.com/GRDv8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GRDv8.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":4081407,"reputation":74,"user_id":3351810,"display_name":"Santhoshm"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1551891206,"creation_date":1551891206,"answer_id":55028323,"question_id":37700352,"body_markdown":"One can have separate application properties files according to the environment, if Spring Boot application is being created.\r\nFor example - properties file for dev environment,\r\n**application-dev.properties**:\r\n\r\n    spring.hivedatasource.url=&lt;hive dev data source url&gt;\r\n    spring.hivedatasource.username=dev\r\n    spring.hivedatasource.password=dev\r\n    spring.hivedatasource.driver-class-name=org.apache.hive.jdbc.HiveDriver\r\n\r\n\r\n**application-test.properties:**\r\n\r\n    spring.hivedatasource.url=&lt;hive dev data source url&gt;\r\n    spring.hivedatasource.username=test\r\n    spring.hivedatasource.password=test\r\n    spring.hivedatasource.driver-class-name=org.apache.hive.jdbc.HiveDriver\r\n\r\nAnd a primary application.properties file to select the profile:\r\n\r\n**application.properties:**\r\n\r\n    spring.profiles.active=dev\r\n    server.tomcat.max-threads = 10\r\n    spring.application.name=sampleApp\r\n\r\nDefine the DB Configuration as below:\r\n\r\n    @Configuration\r\n    @ConfigurationProperties(prefix=&quot;spring.hivedatasource&quot;)\r\n    public class DBConfig {\r\n    \r\n        @Profile(&quot;dev&quot;)\r\n        @Qualifier(&quot;hivedatasource&quot;)\r\n        @Primary\r\n        @Bean\r\n        public DataSource devHiveDataSource() {\r\n            System.out.println(&quot;DataSource bean created for Dev&quot;);\r\n            return new BasicDataSource();\r\n        }\r\n    \r\n        @Profile(&quot;test&quot;)\r\n        @Qualifier(&quot;hivedatasource&quot;)\r\n        @Primary\r\n        @Bean\r\n        public DataSource testHiveDataSource() {\r\n            System.out.println(&quot;DataSource bean created for Test&quot;);\r\n            return new BasicDataSource();\r\n        }\r\n\r\nThis will automatically create the BasicDataSource bean according to the active profile set in application.properties file.\r\nRun the Spring-boot application and test.\r\n\r\nNote that this will create an empty bean initially until getConnection() is called.\r\nOnce the connection is available you can get the url, driver-class, etc. using that DataSource bean.\r\n\r\n","title":"Setting the default active profile in Spring-boot","body":"<p>One can have separate application properties files according to the environment, if Spring Boot application is being created.\nFor example - properties file for dev environment,\n<strong>application-dev.properties</strong>:</p>\n\n<pre><code>spring.hivedatasource.url=&lt;hive dev data source url&gt;\nspring.hivedatasource.username=dev\nspring.hivedatasource.password=dev\nspring.hivedatasource.driver-class-name=org.apache.hive.jdbc.HiveDriver\n</code></pre>\n\n<p><strong>application-test.properties:</strong></p>\n\n<pre><code>spring.hivedatasource.url=&lt;hive dev data source url&gt;\nspring.hivedatasource.username=test\nspring.hivedatasource.password=test\nspring.hivedatasource.driver-class-name=org.apache.hive.jdbc.HiveDriver\n</code></pre>\n\n<p>And a primary application.properties file to select the profile:</p>\n\n<p><strong>application.properties:</strong></p>\n\n<pre><code>spring.profiles.active=dev\nserver.tomcat.max-threads = 10\nspring.application.name=sampleApp\n</code></pre>\n\n<p>Define the DB Configuration as below:</p>\n\n<pre><code>@Configuration\n@ConfigurationProperties(prefix=\"spring.hivedatasource\")\npublic class DBConfig {\n\n    @Profile(\"dev\")\n    @Qualifier(\"hivedatasource\")\n    @Primary\n    @Bean\n    public DataSource devHiveDataSource() {\n        System.out.println(\"DataSource bean created for Dev\");\n        return new BasicDataSource();\n    }\n\n    @Profile(\"test\")\n    @Qualifier(\"hivedatasource\")\n    @Primary\n    @Bean\n    public DataSource testHiveDataSource() {\n        System.out.println(\"DataSource bean created for Test\");\n        return new BasicDataSource();\n    }\n</code></pre>\n\n<p>This will automatically create the BasicDataSource bean according to the active profile set in application.properties file.\nRun the Spring-boot application and test.</p>\n\n<p>Note that this will create an empty bean initially until getConnection() is called.\nOnce the connection is available you can get the url, driver-class, etc. using that DataSource bean.</p>\n"},{"tags":[],"owner":{"account_id":9128149,"reputation":11117,"user_id":6790948,"accept_rate":0,"display_name":"mchawre"},"down_vote_count":1,"up_vote_count":14,"is_accepted":false,"score":13,"last_activity_date":1562145443,"creation_date":1562145443,"answer_id":56866800,"question_id":37700352,"body_markdown":"We to faced similar issue while setting `spring.profiles.active` in java.\r\n\r\nThis is what we figured out in the end, after trying four different ways of providing `spring.profiles.active`.\r\n\r\nIn `java-8`\r\n```\r\n$ java --spring.profiles.active=dev -jar my-service.jar\r\nGives unrecognized --spring.profiles.active option.\r\n```\r\n```\r\n$ java -jar my-service.jar --spring.profiles.active=dev\r\n# This works fine\r\n```\r\n```\r\n$ java -Dspring.profiles.active=dev -jar my-service.jar\r\n# This works fine\r\n```\r\n```\r\n$ java -jar my-service.jar -Dspring.profiles.active=dev\r\n# This doesn&#39;t works\r\n```\r\n\r\nIn `java-11`\r\n```\r\n$ java --spring.profiles.active=dev -jar my-service.jar\r\nGives unrecognized --spring.profiles.active option.\r\n```\r\n```\r\n$ java -jar my-service.jar --spring.profiles.active=dev\r\n# This doesn&#39;t works\r\n```\r\n```\r\n$ java -Dspring.profiles.active=dev -jar my-service.jar\r\n# This works fine\r\n```\r\n```\r\n$ java -jar my-service.jar -Dspring.profiles.active=dev\r\n# This doesn&#39;t works\r\n```\r\n\r\n\r\n**NOTE:** If you&#39;re specifying `spring.profiles.active` in your `application.properties` file then make sure you provide `spring.config.location` or `spring.config.additional-location` option to java accordingly as mentioned above.","title":"Setting the default active profile in Spring-boot","body":"<p>We to faced similar issue while setting <code>spring.profiles.active</code> in java.</p>\n\n<p>This is what we figured out in the end, after trying four different ways of providing <code>spring.profiles.active</code>.</p>\n\n<p>In <code>java-8</code></p>\n\n<pre><code>$ java --spring.profiles.active=dev -jar my-service.jar\nGives unrecognized --spring.profiles.active option.\n</code></pre>\n\n<pre><code>$ java -jar my-service.jar --spring.profiles.active=dev\n# This works fine\n</code></pre>\n\n<pre><code>$ java -Dspring.profiles.active=dev -jar my-service.jar\n# This works fine\n</code></pre>\n\n<pre><code>$ java -jar my-service.jar -Dspring.profiles.active=dev\n# This doesn't works\n</code></pre>\n\n<p>In <code>java-11</code></p>\n\n<pre><code>$ java --spring.profiles.active=dev -jar my-service.jar\nGives unrecognized --spring.profiles.active option.\n</code></pre>\n\n<pre><code>$ java -jar my-service.jar --spring.profiles.active=dev\n# This doesn't works\n</code></pre>\n\n<pre><code>$ java -Dspring.profiles.active=dev -jar my-service.jar\n# This works fine\n</code></pre>\n\n<pre><code>$ java -jar my-service.jar -Dspring.profiles.active=dev\n# This doesn't works\n</code></pre>\n\n<p><strong>NOTE:</strong> If you're specifying <code>spring.profiles.active</code> in your <code>application.properties</code> file then make sure you provide <code>spring.config.location</code> or <code>spring.config.additional-location</code> option to java accordingly as mentioned above.</p>\n"},{"tags":[],"owner":{"account_id":8465716,"reputation":164,"user_id":6349941,"display_name":"RajashekharC"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1571009359,"creation_date":1571009359,"answer_id":58368583,"question_id":37700352,"body_markdown":"If you are using AWS Lambda with SprintBoot,  then you must declare the following under environment variables:\r\n\r\nkey: JAVA_TOOL_OPTIONS &amp; value: -Dspring.profiles.active=dev\r\n","title":"Setting the default active profile in Spring-boot","body":"<p>If you are using AWS Lambda with SprintBoot,  then you must declare the following under environment variables:</p>\n\n<p>key: JAVA_TOOL_OPTIONS &amp; value: -Dspring.profiles.active=dev</p>\n"},{"tags":[],"owner":{"account_id":15871782,"reputation":61,"user_id":11452186,"display_name":"Julian Schroeter"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1593335555,"creation_date":1593335555,"answer_id":62620492,"question_id":37700352,"body_markdown":"you can also have multiple listings in the @Profile annotation\r\n\r\n    @Profile({&quot;dev&quot;,&quot;default&quot;})\r\n\r\nIf you set &quot;default&quot; as an additional value, you don&#39;t have to specify spring.profiles.active","title":"Setting the default active profile in Spring-boot","body":"<p>you can also have multiple listings in the @Profile annotation</p>\n<pre><code>@Profile({&quot;dev&quot;,&quot;default&quot;})\n</code></pre>\n<p>If you set &quot;default&quot; as an additional value, you don't have to specify spring.profiles.active</p>\n"},{"tags":[],"owner":{"account_id":12545853,"reputation":111,"user_id":9129204,"display_name":"Abdessamad ABOUKDIR"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1601645933,"creation_date":1601640690,"answer_id":64171339,"question_id":37700352,"body_markdown":"The neat way to do this without changing your source code each time is to use the OS environment variable `SPRING_PROFILES_ACTIVE`:\r\n\r\n```sh\r\nexport SPRING_PROFILES_ACTIVE=production\r\n```\r\n\r\n[how-to-set-active-spring-profiles][1]\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#howto-set-active-spring-profiles","title":"Setting the default active profile in Spring-boot","body":"<p>The neat way to do this without changing your source code each time is to use the OS environment variable <code>SPRING_PROFILES_ACTIVE</code>:</p>\n<pre class=\"lang-sh prettyprint-override\"><code>export SPRING_PROFILES_ACTIVE=production\n</code></pre>\n<p><a href=\"https://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#howto-set-active-spring-profiles\" rel=\"nofollow noreferrer\">how-to-set-active-spring-profiles</a></p>\n"},{"tags":[],"owner":{"account_id":14387497,"reputation":1756,"user_id":10393067,"display_name":"logbasex"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1603944260,"creation_date":1603944260,"answer_id":64584829,"question_id":37700352,"body_markdown":"Try this: \r\n`@PropertySource(&quot;classpath:${spring.profiles.active:production}_file.properties&quot;)`","title":"Setting the default active profile in Spring-boot","body":"<p>Try this:\n<code>@PropertySource(&quot;classpath:${spring.profiles.active:production}_file.properties&quot;)</code></p>\n"},{"tags":[],"owner":{"account_id":121797,"reputation":2346,"user_id":3059685,"display_name":"Joman68"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1615773520,"creation_date":1615773520,"answer_id":66631458,"question_id":37700352,"body_markdown":"If you are using **application.yml** for your config then add this to it, to set the default active profile:\r\n\r\n```\r\nspring:\r\n  profiles:\r\n    active: production\r\n```\r\n","title":"Setting the default active profile in Spring-boot","body":"<p>If you are using <strong>application.yml</strong> for your config then add this to it, to set the default active profile:</p>\n<pre><code>spring:\n  profiles:\n    active: production\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2278011,"reputation":1541,"user_id":2003821,"accept_rate":56,"display_name":"Aadam"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640883266,"creation_date":1640883266,"answer_id":70534495,"question_id":37700352,"body_markdown":"If anyone out there trying to load profile-specific properties for spring web(not boot)\r\nThen do this, can add multiple profiles to pom. Then in config class we can read the build profile and load props accordingly\r\n\r\n&gt; build like mvn clean install -Pdev\r\n\r\npom.xml\r\n\r\n    &lt;profiles&gt;\r\n    &lt;profile&gt;\r\n                &lt;id&gt;prod&lt;/id&gt;\r\n                 &lt;properties&gt;\r\n    \t\t        &lt;activatedProperties&gt;prod&lt;/activatedProperties&gt;\r\n    \t\t    &lt;/properties&gt;\r\n                &lt;activation&gt;\r\n                    &lt;!-- activate if system properties &#39;env=prod&#39; --&gt;\r\n                &lt;/activation&gt;\r\n                &lt;build&gt;&lt;finalName&gt;Finger&lt;/finalName&gt;&lt;/build&gt;\r\n            &lt;/profile&gt;\r\n        &lt;/profiles&gt;\r\n\r\nclass\r\n\r\n        @Configuration\r\n    @PropertySource({&quot;classpath:application.properties&quot;})\r\n    public class MyApplicationConfiguration {\r\n    @Bean\r\n    public static PropertySourcesPlaceholderConfigurer propertySourcesPlaceholderConfigurer() {\r\n    \t\r\n        PropertySourcesPlaceholderConfigurer configurer = new PropertySourcesPlaceholderConfigurer();\r\n        Resource resource = new ClassPathResource(&quot;/application.properties&quot;);\r\n        try {\r\n    \t\tProperties props1 = PropertiesLoaderUtils.loadProperties(resource);\r\n    \t\tresource = new ClassPathResource(&quot;/application-&quot;+props1.getProperty(&quot;spring.profiles.active&quot;)+&quot;.properties&quot;);\r\n    \t\tconfigurer.setProperties(props1);\r\n    \t\tconfigurer.setLocation(resource);\r\n    \t} catch (IOException e) {\r\n    \t\te.printStackTrace();\r\n    \t}\r\n        return configurer;\r\n    }\r\n    }\r\n\r\n","title":"Setting the default active profile in Spring-boot","body":"<p>If anyone out there trying to load profile-specific properties for spring web(not boot)\nThen do this, can add multiple profiles to pom. Then in config class we can read the build profile and load props accordingly</p>\n<blockquote>\n<p>build like mvn clean install -Pdev</p>\n</blockquote>\n<p>pom.xml</p>\n<pre><code>&lt;profiles&gt;\n&lt;profile&gt;\n            &lt;id&gt;prod&lt;/id&gt;\n             &lt;properties&gt;\n                &lt;activatedProperties&gt;prod&lt;/activatedProperties&gt;\n            &lt;/properties&gt;\n            &lt;activation&gt;\n                &lt;!-- activate if system properties 'env=prod' --&gt;\n            &lt;/activation&gt;\n            &lt;build&gt;&lt;finalName&gt;Finger&lt;/finalName&gt;&lt;/build&gt;\n        &lt;/profile&gt;\n    &lt;/profiles&gt;\n</code></pre>\n<p>class</p>\n<pre><code>    @Configuration\n@PropertySource({&quot;classpath:application.properties&quot;})\npublic class MyApplicationConfiguration {\n@Bean\npublic static PropertySourcesPlaceholderConfigurer propertySourcesPlaceholderConfigurer() {\n    \n    PropertySourcesPlaceholderConfigurer configurer = new PropertySourcesPlaceholderConfigurer();\n    Resource resource = new ClassPathResource(&quot;/application.properties&quot;);\n    try {\n        Properties props1 = PropertiesLoaderUtils.loadProperties(resource);\n        resource = new ClassPathResource(&quot;/application-&quot;+props1.getProperty(&quot;spring.profiles.active&quot;)+&quot;.properties&quot;);\n        configurer.setProperties(props1);\n        configurer.setLocation(resource);\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n    return configurer;\n}\n}\n</code></pre>\n"}],"owner":{"account_id":1091571,"reputation":17212,"user_id":1086117,"accept_rate":56,"display_name":"DarVar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":227716,"favorite_count":0,"down_vote_count":0,"up_vote_count":93,"accepted_answer_id":37700521,"answer_count":16,"score":93,"last_activity_date":1640883266,"creation_date":1465382853,"question_id":37700352,"body_markdown":"I want my default active profile to be `production` if `-Dspring.profiles.active` is not set.\r\n\r\nI tried the following in my `application.properties` but it did&#39;t work:\r\n\r\n    spring.profiles.default=production\r\n\r\nSpring-boot version = 1.3.5.RELEASE","title":"Setting the default active profile in Spring-boot","body":"<p>I want my default active profile to be <code>production</code> if <code>-Dspring.profiles.active</code> is not set.</p>\n\n<p>I tried the following in my <code>application.properties</code> but it did't work:</p>\n\n<pre><code>spring.profiles.default=production\n</code></pre>\n\n<p>Spring-boot version = 1.3.5.RELEASE</p>\n"},{"tags":["java","spring","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":14937373,"reputation":328,"user_id":10901306,"display_name":"Zukaru"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640841113,"creation_date":1640841113,"answer_id":70527709,"question_id":70526983,"body_markdown":"You can use annotation `@JoinColumn(...)` and specify the relationship, in your case: `@OneToOne(...)`\r\n\r\nThen you can simply define your `Rule` entity with only `Long id` or `int id` and as:\r\n```\r\n@Entity\r\npublic class Rule {\r\n    \r\n    @Id // map as id field\r\n    @GeneratedValue(strategy = GenerationType.AUTO) // Auto generate id when update db\r\n    @Column(name = &quot;Rule_Id&quot;) // map the column field\r\n    private Long ruleId;\r\n    \r\n    // Simply add annotation to map foreign key\r\n    @OneToOne\r\n    @JoinColumn(name = &quot;community_id_fk&quot;, referencedColumnName = &quot;community_id&quot;)\r\n    private Community community;    \r\n\r\n    // more field ...\r\n    @Column(name = &quot;description&quot;, length = 50, nullable = false)\r\n    private String description;\r\n}\r\n```\r\n\r\nFor More guide you can see https://www.baeldung.com/jpa-one-to-one ","title":"How to create a composite key of one foreign key and one primary key Spring Data JPA","body":"<p>You can use annotation <code>@JoinColumn(...)</code> and specify the relationship, in your case: <code>@OneToOne(...)</code></p>\n<p>Then you can simply define your <code>Rule</code> entity with only <code>Long id</code> or <code>int id</code> and as:</p>\n<pre><code>@Entity\npublic class Rule {\n    \n    @Id // map as id field\n    @GeneratedValue(strategy = GenerationType.AUTO) // Auto generate id when update db\n    @Column(name = &quot;Rule_Id&quot;) // map the column field\n    private Long ruleId;\n    \n    // Simply add annotation to map foreign key\n    @OneToOne\n    @JoinColumn(name = &quot;community_id_fk&quot;, referencedColumnName = &quot;community_id&quot;)\n    private Community community;    \n\n    // more field ...\n    @Column(name = &quot;description&quot;, length = 50, nullable = false)\n    private String description;\n}\n</code></pre>\n<p>For More guide you can see <a href=\"https://www.baeldung.com/jpa-one-to-one\" rel=\"nofollow noreferrer\">https://www.baeldung.com/jpa-one-to-one</a></p>\n"},{"tags":[],"owner":{"account_id":11169149,"reputation":55,"user_id":8196741,"display_name":"StevenG1"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1640883035,"creation_date":1640883035,"answer_id":70534447,"question_id":70526983,"body_markdown":"I solved this by taking the one to one relationship from Zukaru&#39;s answer.\r\n\r\nWhat I wanted was a composite key comprised from `community_id` and `rule_id`. Community Id is a foreign key to the primary key on the `Communities` table.\r\n\r\nTo implement this I had 2 classes. `Rule` and `RulePrimaryData`.\r\n\r\nRule.java\r\n```Java\r\n@Entity // Maps to database\r\n@Table(name = &quot;rules&quot;)\r\n@Data\r\n@NoArgsConstructor\r\npublic class Rule {\r\n\r\n    @EmbeddedId\r\n    private RulePrimaryData id;\r\n\r\n    @OneToOne\r\n    @JoinColumn(name = &quot;community_id_fk&quot;, referencedColumnName = &quot;community_id&quot;, insertable = false, updatable = false)\r\n    private Community communities;\r\n\r\n    @Column(name = &quot;description&quot;, length = 50, nullable = false)\r\n    private String description;\r\n\r\n    public Rule(RulePrimaryData ruleId, String description) {\r\n        this.id = ruleId;\r\n        this.description = description;\r\n    }\r\n}\r\n```\r\nAn embedded Id was used to make the composite key containing the UUID and Integer.\r\n\r\nRulePrimaryData.java\r\n```Java\r\n@Embeddable\r\n@NoArgsConstructor\r\n@Data //Getters, setters, constructors\r\npublic class RulePrimaryData implements Serializable {\r\n\r\n    @Column(name = &quot;community_id_fk&quot;, nullable = false)\r\n    private UUID communityId;\r\n\r\n    @Column(name = &quot;rule_id&quot;, nullable = false)\r\n    private Integer ruleId;\r\n\r\n    public RulePrimaryData(UUID communityId, int ruleId) {\r\n        this.communityId = communityId;\r\n        this.ruleId = ruleId;\r\n    }\r\n}\r\n```\r\n\r\nFinally, the relationship was a One to One which I initially thought was a Many to One. In the definition I joined the `community_id_fk` column from the EmbeddedId to the `community_id` column in the Communities table.","title":"How to create a composite key of one foreign key and one primary key Spring Data JPA","body":"<p>I solved this by taking the one to one relationship from Zukaru's answer.</p>\n<p>What I wanted was a composite key comprised from <code>community_id</code> and <code>rule_id</code>. Community Id is a foreign key to the primary key on the <code>Communities</code> table.</p>\n<p>To implement this I had 2 classes. <code>Rule</code> and <code>RulePrimaryData</code>.</p>\n<p>Rule.java</p>\n<pre><code>@Entity // Maps to database\n@Table(name = &quot;rules&quot;)\n@Data\n@NoArgsConstructor\npublic class Rule {\n\n    @EmbeddedId\n    private RulePrimaryData id;\n\n    @OneToOne\n    @JoinColumn(name = &quot;community_id_fk&quot;, referencedColumnName = &quot;community_id&quot;, insertable = false, updatable = false)\n    private Community communities;\n\n    @Column(name = &quot;description&quot;, length = 50, nullable = false)\n    private String description;\n\n    public Rule(RulePrimaryData ruleId, String description) {\n        this.id = ruleId;\n        this.description = description;\n    }\n}\n</code></pre>\n<p>An embedded Id was used to make the composite key containing the UUID and Integer.</p>\n<p>RulePrimaryData.java</p>\n<pre><code>@Embeddable\n@NoArgsConstructor\n@Data //Getters, setters, constructors\npublic class RulePrimaryData implements Serializable {\n\n    @Column(name = &quot;community_id_fk&quot;, nullable = false)\n    private UUID communityId;\n\n    @Column(name = &quot;rule_id&quot;, nullable = false)\n    private Integer ruleId;\n\n    public RulePrimaryData(UUID communityId, int ruleId) {\n        this.communityId = communityId;\n        this.ruleId = ruleId;\n    }\n}\n</code></pre>\n<p>Finally, the relationship was a One to One which I initially thought was a Many to One. In the definition I joined the <code>community_id_fk</code> column from the EmbeddedId to the <code>community_id</code> column in the Communities table.</p>\n"}],"owner":{"account_id":11169149,"reputation":55,"user_id":8196741,"display_name":"StevenG1"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1258,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70534447,"answer_count":2,"score":0,"last_activity_date":1640883035,"creation_date":1640832741,"question_id":70526983,"body_markdown":"I am using Spring Boot to build an API. It is an API for a punishment system. Within the database there are two tables used for rules, these are the Rules table and the Community table.\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/VF6aW.png\r\n\r\nThe rule Id is an integer and the community Id is a foreign key from the communities table. There is expected to be 0, 1 or Many rules for a community while a rule is made by exactly one community.\r\n\r\nThis is the behaviour I&#39;m looking to replicate in my Spring Boot application.\r\n\r\nSo far I have the following code:\r\n\r\nCommunity.java\r\n```Java\r\n@Entity // Maps to database\r\npublic class Community {\r\n    @Id\r\n    @Column(name = &quot;id&quot;, length = 16, unique = true, nullable = false)\r\n    private UUID id;\r\n\r\n    @Column(name = &quot;username&quot;, length = 20, nullable = false)\r\n    private String name;\r\n```\r\n\r\nRule.java\r\n```Java\r\n@Entity // Maps to database\r\npublic class Rule {\r\n\r\n    @EmbeddedId\r\n    private RuleId ruleId;\r\n\r\n    @Column(name = &quot;description&quot;, length = 50, nullable = false)\r\n    private String description;\r\n```\r\n\r\nRuleId.java\r\n```\r\n@Embeddable\r\npublic class RuleId implements Serializable {\r\n\r\n    private UUID communityId;\r\n    private Integer ruleId;\r\n\r\n    public RuleId(UUID communityId, Integer ruleId) {\r\n        this.communityId = communityId;\r\n        this.ruleId = ruleId;\r\n    }\r\n```\r\n\r\nI have read through some threads on stack already which is where I have the embedded idea from but I am still confused about how I would get this to work with my scenario. Any help is greatly appreciated just to clear this confusion up.\r\n\r\nCheers :)","title":"How to create a composite key of one foreign key and one primary key Spring Data JPA","body":"<p>I am using Spring Boot to build an API. It is an API for a punishment system. Within the database there are two tables used for rules, these are the Rules table and the Community table.\n<a href=\"https://i.stack.imgur.com/VF6aW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VF6aW.png\" alt=\"enter image description here\" /></a></p>\n<p>The rule Id is an integer and the community Id is a foreign key from the communities table. There is expected to be 0, 1 or Many rules for a community while a rule is made by exactly one community.</p>\n<p>This is the behaviour I'm looking to replicate in my Spring Boot application.</p>\n<p>So far I have the following code:</p>\n<p>Community.java</p>\n<pre><code>@Entity // Maps to database\npublic class Community {\n    @Id\n    @Column(name = &quot;id&quot;, length = 16, unique = true, nullable = false)\n    private UUID id;\n\n    @Column(name = &quot;username&quot;, length = 20, nullable = false)\n    private String name;\n</code></pre>\n<p>Rule.java</p>\n<pre><code>@Entity // Maps to database\npublic class Rule {\n\n    @EmbeddedId\n    private RuleId ruleId;\n\n    @Column(name = &quot;description&quot;, length = 50, nullable = false)\n    private String description;\n</code></pre>\n<p>RuleId.java</p>\n<pre><code>@Embeddable\npublic class RuleId implements Serializable {\n\n    private UUID communityId;\n    private Integer ruleId;\n\n    public RuleId(UUID communityId, Integer ruleId) {\n        this.communityId = communityId;\n        this.ruleId = ruleId;\n    }\n</code></pre>\n<p>I have read through some threads on stack already which is where I have the embedded idea from but I am still confused about how I would get this to work with my scenario. Any help is greatly appreciated just to clear this confusion up.</p>\n<p>Cheers :)</p>\n"},{"tags":["java","swing"],"comments":[{"owner":{"account_id":2259314,"reputation":11225,"user_id":1989769,"accept_rate":45,"display_name":"Sergiy Medvynskyy"},"score":0,"creation_date":1533731915,"post_id":51746451,"comment_id":90453585,"body_markdown":"Possible duplicate of [Making a robust, resizable Swing Chess GUI](https://stackoverflow.com/questions/21142686/making-a-robust-resizable-swing-chess-gui)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/21142686/making-a-robust-resizable-swing-chess-gui\">Making a robust, resizable Swing Chess GUI</a>"},{"owner":{"account_id":1176036,"reputation":2433,"user_id":1324406,"accept_rate":62,"display_name":"Amber"},"score":0,"creation_date":1533740949,"post_id":51746451,"comment_id":90459882,"body_markdown":"Adding a JLabel with an icon to the JPanel sounds like a good idea. What about it &quot;doesn&#39;t it look good&quot;?","body":"Adding a JLabel with an icon to the JPanel sounds like a good idea. What about it &quot;doesn&#39;t it look good&quot;?"},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":0,"creation_date":1533774726,"post_id":51746451,"comment_id":90474104,"body_markdown":"See also [Making a robust, resizable Swing Chess GUI](http://stackoverflow.com/q/21142686/418556).","body":"See also <a href=\"http://stackoverflow.com/q/21142686/418556\">Making a robust, resizable Swing Chess GUI</a>."}],"answers":[{"tags":[],"owner":{"account_id":4962253,"reputation":18492,"user_id":3992939,"accept_rate":73,"display_name":"c0der"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1640882720,"creation_date":1533744560,"answer_id":51751213,"question_id":51746451,"body_markdown":"To get the board right, just handle the color change : \r\n\r\n    class BoardPanel extends JPanel\r\n    {\r\n    \tpublic static final int LENGTH = 6;\r\n    \tprivate final Color[] COLOR_ARRAY = {Color.decode(&quot;#FFFACD&quot;), Color.decode(&quot;#593E1A&quot;)};\r\n    \r\n    \tpublic BoardPanel()   {\r\n    \t\t//grid layout 6x6\r\n    \t\tsetLayout(new GridLayout(LENGTH, LENGTH));\r\n    \t\tint numView = 1;\r\n\r\n    \t\tfor (int i = 0; i &lt; LENGTH; i++)\r\n    \t\t{\r\n    \t\t\tnumView = (numView == 0) ? 1:0;\r\n    \t\t\tfor (int j = 0; j &lt; LENGTH; j++)\r\n    \t\t\t{\r\n    \t\t\t\tadd(new TileView(COLOR_ARRAY[numView]));\r\n    \t\t\t\tnumView = (numView == 0) ? 1:0;\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    }\r\n    \r\n    class TileView extends JLabel {\r\n    \r\n    \tTileView(Color color) {\r\n    \t\tsetPreferredSize(new Dimension(100,100));\r\n    \t\tsetOpaque(true);\r\n    \t\tsetBackground(color);\r\n    \t}\r\n    }\r\n\r\nTrying to add another component (the piece) to the board (gridlayout) messes it up. &lt;br/&gt;\r\nWhat you want to do is add another `JPanel` that contains the pieces. &lt;br/&gt;\r\nThe pieces `JPanel` needs to be transparent, so the board under it, is visible. One way to achieve it in swing is to use a glass pane :&lt;br/&gt;\r\n\r\n\t\r\n\timport java.awt.Color;\r\n\timport java.awt.Dimension;\r\n\timport java.awt.GridLayout;\r\n\timport java.net.MalformedURLException;\r\n\timport java.net.URL;\r\n\timport javax.swing.ImageIcon;\r\n\timport javax.swing.JComponent;\r\n\timport javax.swing.JFrame;\r\n\timport javax.swing.JLabel;\r\n\timport javax.swing.JPanel;\r\n\timport javax.swing.SwingConstants;\r\n\t\r\n\tpublic class Chess extends JFrame {\r\n\t\r\n\t\tpublic Chess()  {\r\n\t\r\n\t\t\tsetDefaultCloseOperation(EXIT_ON_CLOSE);\r\n\t\t\tadd( new BoardPanel());          //add underlaying board\r\n\t\t\tsetGlassPane(new PiecesPanel()); //add glass pane\r\n\t\t\tgetGlassPane().setVisible(true);\r\n\t\t\tpack();\r\n\t\t\tsetVisible(true);\r\n\t\t}\r\n\t\r\n\t\tpublic static void main(String[] args) throws InterruptedException {\r\n\t\t\tnew Chess();\r\n\t\t}\r\n\t}\r\n\t\r\n\tclass BoardPanel extends JPanel {\r\n\t\r\n\t\tpublic static final int LENGTH = 6;\r\n\t\tprivate final Color[] COLOR_ARRAY = {Color.decode(&quot;#FFFACD&quot;), Color.decode(&quot;#593E1A&quot;)};\r\n\t\r\n\t\tpublic BoardPanel()   {\r\n\t\t\t//grid layout 6x6\r\n\t\t\tsetLayout(new GridLayout(LENGTH, LENGTH));\r\n\t\t\tint numView = 1;\r\n\t\t\t//tiles color determined by odd/even\r\n\t\t\tfor (int i = 0; i &lt; LENGTH; i++)\r\n\t\t\t{\r\n\t\t\t\tnumView = (numView == 0) ? 1:0;\r\n\t\t\t\tfor (int j = 0; j &lt; LENGTH; j++)\r\n\t\t\t\t{\r\n\t\t\t\t\tadd(new TileView(COLOR_ARRAY[numView]));\r\n\t\t\t\t\tnumView = (numView == 0) ? 1:0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t//container for pieces\r\n\tclass PiecesPanel extends JPanel {\r\n\t\r\n\t\tpublic static final int LENGTH = 6;\r\n\t\tPiecesPanel(){\r\n\t\r\n\t\t\tsetOpaque(false); //make it transparent\r\n\t\t\tsetLayout(new GridLayout(LENGTH, LENGTH));\r\n\t\t\tJComponent piece = new Piece();\r\n\t\t\tadd(piece);\r\n\t\t}\r\n\t}\r\n\t\r\n\tclass TileView extends JLabel {\r\n\t\r\n\t\tpublic static final int SIZE = 100;\r\n\t\tTileView(Color color) {\r\n\t\t\tsetPreferredSize(new Dimension(SIZE, SIZE));\r\n\t\t\tsetOpaque(true);\r\n\t\t\tsetBackground(color);\r\n\t\t}\r\n\t}\r\n\t\r\n\tclass Piece extends JLabel{\r\n\t\r\n\t\tPiece() {\r\n\t\r\n\t\t\tURL url = null;\r\n\t\t\ttry {\r\n\t\t\t\turl = new URL(&quot;https://dl1.cbsistatic.com/i/r/2017/08/15/9b37ca73-de21-4998-ae7a-07d2915a551e/thumbnail/64x64/0cd91f1c045919af6bdafab3a6f07f99/imgingest-6339051052035379444.png&quot;);\r\n\t\t\t} catch (MalformedURLException ex) { ex.printStackTrace();\t}\r\n\t\t\tsetIcon(new ImageIcon(url));\r\n\t\t\tsetVerticalTextPosition(SwingConstants.BOTTOM);\r\n\t\t\tsetHorizontalTextPosition(SwingConstants.CENTER);\r\n\t\t}\r\n\t}\r\n\r\n**Edit:** the Piece image link is dead. Use https://findicons.com/files/icons/2711/free_icons_for_windows8_metro/64/pawn.png instead\r\n\r\n&lt;hr&gt;\r\n\r\n&lt;br/&gt;\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Lu14Z.jpg","title":"How do I make A JPanel grid?","body":"<p>To get the board right, just handle the color change :</p>\n<pre><code>class BoardPanel extends JPanel\n{\n    public static final int LENGTH = 6;\n    private final Color[] COLOR_ARRAY = {Color.decode(&quot;#FFFACD&quot;), Color.decode(&quot;#593E1A&quot;)};\n\n    public BoardPanel()   {\n        //grid layout 6x6\n        setLayout(new GridLayout(LENGTH, LENGTH));\n        int numView = 1;\n\n        for (int i = 0; i &lt; LENGTH; i++)\n        {\n            numView = (numView == 0) ? 1:0;\n            for (int j = 0; j &lt; LENGTH; j++)\n            {\n                add(new TileView(COLOR_ARRAY[numView]));\n                numView = (numView == 0) ? 1:0;\n            }\n        }\n    }\n}\n\nclass TileView extends JLabel {\n\n    TileView(Color color) {\n        setPreferredSize(new Dimension(100,100));\n        setOpaque(true);\n        setBackground(color);\n    }\n}\n</code></pre>\n<p>Trying to add another component (the piece) to the board (gridlayout) messes it up. <br/>\nWhat you want to do is add another <code>JPanel</code> that contains the pieces. <br/>\nThe pieces <code>JPanel</code> needs to be transparent, so the board under it, is visible. One way to achieve it in swing is to use a glass pane :<br/></p>\n<pre><code>import java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.GridLayout;\nimport java.net.MalformedURLException;\nimport java.net.URL;\nimport javax.swing.ImageIcon;\nimport javax.swing.JComponent;\nimport javax.swing.JFrame;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport javax.swing.SwingConstants;\n\npublic class Chess extends JFrame {\n\n    public Chess()  {\n\n        setDefaultCloseOperation(EXIT_ON_CLOSE);\n        add( new BoardPanel());          //add underlaying board\n        setGlassPane(new PiecesPanel()); //add glass pane\n        getGlassPane().setVisible(true);\n        pack();\n        setVisible(true);\n    }\n\n    public static void main(String[] args) throws InterruptedException {\n        new Chess();\n    }\n}\n\nclass BoardPanel extends JPanel {\n\n    public static final int LENGTH = 6;\n    private final Color[] COLOR_ARRAY = {Color.decode(&quot;#FFFACD&quot;), Color.decode(&quot;#593E1A&quot;)};\n\n    public BoardPanel()   {\n        //grid layout 6x6\n        setLayout(new GridLayout(LENGTH, LENGTH));\n        int numView = 1;\n        //tiles color determined by odd/even\n        for (int i = 0; i &lt; LENGTH; i++)\n        {\n            numView = (numView == 0) ? 1:0;\n            for (int j = 0; j &lt; LENGTH; j++)\n            {\n                add(new TileView(COLOR_ARRAY[numView]));\n                numView = (numView == 0) ? 1:0;\n            }\n        }\n    }\n}\n\n//container for pieces\nclass PiecesPanel extends JPanel {\n\n    public static final int LENGTH = 6;\n    PiecesPanel(){\n\n        setOpaque(false); //make it transparent\n        setLayout(new GridLayout(LENGTH, LENGTH));\n        JComponent piece = new Piece();\n        add(piece);\n    }\n}\n\nclass TileView extends JLabel {\n\n    public static final int SIZE = 100;\n    TileView(Color color) {\n        setPreferredSize(new Dimension(SIZE, SIZE));\n        setOpaque(true);\n        setBackground(color);\n    }\n}\n\nclass Piece extends JLabel{\n\n    Piece() {\n\n        URL url = null;\n        try {\n            url = new URL(&quot;https://dl1.cbsistatic.com/i/r/2017/08/15/9b37ca73-de21-4998-ae7a-07d2915a551e/thumbnail/64x64/0cd91f1c045919af6bdafab3a6f07f99/imgingest-6339051052035379444.png&quot;);\n        } catch (MalformedURLException ex) { ex.printStackTrace();  }\n        setIcon(new ImageIcon(url));\n        setVerticalTextPosition(SwingConstants.BOTTOM);\n        setHorizontalTextPosition(SwingConstants.CENTER);\n    }\n}\n</code></pre>\n<p><strong>Edit:</strong> the Piece image link is dead. Use <a href=\"https://findicons.com/files/icons/2711/free_icons_for_windows8_metro/64/pawn.png\" rel=\"nofollow noreferrer\">https://findicons.com/files/icons/2711/free_icons_for_windows8_metro/64/pawn.png</a> instead</p>\n<hr>\n<br/>\n<p><a href=\"https://i.stack.imgur.com/Lu14Z.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Lu14Z.jpg\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":11937675,"reputation":183,"user_id":8735550,"display_name":"alexW"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3936,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":51751213,"answer_count":1,"score":1,"last_activity_date":1640882720,"creation_date":1533730344,"question_id":51746451,"body_markdown":"i&#39;m trying to create a gui for chess-like game (6x6 board with less pieces).\r\n\r\ncreating the board is pretty easy with for loops and JPanels but I have no idea how to put the pieces on top of the JPanel. I tried adding one piece by creating a JLabel object with an icon and add it to JPanel but it doesn&#39;t look good. \r\n\r\n    public class BoardPanel extends JPanel\r\n    {\r\n    \tpublic static final int LENGTH = 6;\r\n    \tprivate final Color[] COLOR_ARRAY = {Color.decode(&quot;#FFFACD&quot;), Color.decode(&quot;#593E1A&quot;)};\r\n    \r\n    \tpublic BoardPanel() \r\n    \t{\r\n    \t\t//grid layout 6x6\r\n    \t\tsetLayout(new GridLayout(LENGTH, LENGTH));\r\n    \t\tint numView = 0;\r\n    \t\t//tiles color determined by odd/even\r\n    \t\tfor (int i = 0; i &lt; LENGTH; i++) \r\n    \t\t\t{\r\n    \t\t\t\tfor (int j = 0; j &lt; LENGTH; j++)\r\n    \t\t\t\t{\r\n    \t\t\t\t\tadd(new TileView(numView, COLOR_ARRAY[j % 2]));\r\n    \t\t\t\t}\r\n    \t\t\t\t\r\n    \t\t\t\tswap();\r\n    \t\t\t}\r\n    \t\t\r\n    \t}\r\n    \t\r\n    \tprivate void swap() {\r\n    \t\t\r\n    \t\tColor temp = COLOR_ARRAY[0];\r\n    \t\tCOLOR_ARRAY[0] = COLOR_ARRAY[1];\r\n    \t\tCOLOR_ARRAY[1] = temp;\r\n    \t}\r\n    }\r\n\r\nis there a particular class that i need to use in order to do this properly?\r\ndefault board:\r\n\r\n![default board][1]\r\n\r\nboard with one piece:\r\n\r\n![board with one piece][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/3jjkv.png\r\n  [2]: https://i.stack.imgur.com/EHPZq.png\r\n\r\nThanks,\r\n","title":"How do I make A JPanel grid?","body":"<p>i'm trying to create a gui for chess-like game (6x6 board with less pieces).</p>\n\n<p>creating the board is pretty easy with for loops and JPanels but I have no idea how to put the pieces on top of the JPanel. I tried adding one piece by creating a JLabel object with an icon and add it to JPanel but it doesn't look good. </p>\n\n<pre><code>public class BoardPanel extends JPanel\n{\n    public static final int LENGTH = 6;\n    private final Color[] COLOR_ARRAY = {Color.decode(\"#FFFACD\"), Color.decode(\"#593E1A\")};\n\n    public BoardPanel() \n    {\n        //grid layout 6x6\n        setLayout(new GridLayout(LENGTH, LENGTH));\n        int numView = 0;\n        //tiles color determined by odd/even\n        for (int i = 0; i &lt; LENGTH; i++) \n            {\n                for (int j = 0; j &lt; LENGTH; j++)\n                {\n                    add(new TileView(numView, COLOR_ARRAY[j % 2]));\n                }\n\n                swap();\n            }\n\n    }\n\n    private void swap() {\n\n        Color temp = COLOR_ARRAY[0];\n        COLOR_ARRAY[0] = COLOR_ARRAY[1];\n        COLOR_ARRAY[1] = temp;\n    }\n}\n</code></pre>\n\n<p>is there a particular class that i need to use in order to do this properly?\ndefault board:</p>\n\n<p><img src=\"https://i.stack.imgur.com/3jjkv.png\" alt=\"default board\"></p>\n\n<p>board with one piece:</p>\n\n<p><img src=\"https://i.stack.imgur.com/EHPZq.png\" alt=\"board with one piece\"></p>\n\n<p>Thanks,</p>\n"},{"tags":["java","eclipse","log4j","log4j2"],"answers":[{"tags":[],"owner":{"account_id":9582832,"reputation":469,"user_id":7116745,"accept_rate":29,"display_name":"Srinivas Lakshman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1522342245,"creation_date":1522342245,"answer_id":49561355,"question_id":49561243,"body_markdown":"You will have to get log4j adapter to use those methods. Try having log4j dependency/jar in the project and trying it out.\r\n\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n        &lt;artifactId&gt;log4j-slf4j-impl&lt;/artifactId&gt;\r\n        &lt;version&gt;2.7&lt;/version&gt;\r\n    &lt;/dependency&gt;","title":"Log4j eclipse class not found","body":"<p>You will have to get log4j adapter to use those methods. Try having log4j dependency/jar in the project and trying it out.</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n    &lt;artifactId&gt;log4j-slf4j-impl&lt;/artifactId&gt;\n    &lt;version&gt;2.7&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21078880,"reputation":1,"user_id":15493651,"display_name":"Juan Caro P&#233;rez-Serrano"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640882338,"creation_date":1640882338,"answer_id":70534307,"question_id":49561243,"body_markdown":"Try to have the dependency to the jar : log4j-api-2.17.1.jar","title":"Log4j eclipse class not found","body":"<p>Try to have the dependency to the jar : log4j-api-2.17.1.jar</p>\n"}],"owner":{"account_id":11347917,"reputation":249,"user_id":8319864,"accept_rate":80,"display_name":"Fred_2"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3400,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":49561355,"answer_count":2,"score":0,"last_activity_date":1640882338,"creation_date":1522341852,"question_id":49561243,"body_markdown":"(OS: Windows 10)\r\n\r\nHi all,\r\n\r\nIn order, i \r\n\r\n1- Downloaded the last version of log4j2, unzipped it in .../Program Files/Java folder\r\n\r\n2- Added the jar files (api e core jars) to my project folder in eclipse and added them to the project build path.\r\n\r\n3- Created the log4j.properties file with the following instructions, and added it to the build path\r\n\r\n    #TRACE &lt; DEBUG &lt; INFO &lt; WARN &lt; ERROR &lt; FATAL\r\n    log4j.rootlogger=DEBUG, toConsole\r\n    \r\n    #Console\r\n    log4j.appender.toConsole.org.apache.log4j.ConsoleAppender\r\n    log4j.appender.toConsole.layout=org.apache.log4j.PatternLayout\r\n    log4j.appender.toConsole.layout.ConversionPattern=%d[HH:mm:ss] %5p [%t] - %c.%M - %n%N\r\n\r\n4- Wrote a simple code to test the library\r\n\r\n    import org.apache.log4j.Logger;\r\n    \r\n    public class Log4j {\r\n\r\n    \tprivate static final Logger log = Logger.getLogger(Log4j.class);\r\n\r\n    \tpublic static void main(String[] args) {\r\n\r\n    \t\tlog.info(&quot;test&quot;);\r\n\r\n    \t}\r\n    }\r\n\r\nOnce i run Log4j, i got this exception handler in eclipse console:\r\n\r\n    &lt;terminated&gt; Log4j[Java Application] C:\\Program files\\Java\\jre1.8.0_161\\bin\\javaw.exe\r\n\r\n\r\n    Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/apache/logging/log4j/spi/LoggerContext\r\n    \tat Log4j.&lt;clinit&gt;(Log4j.java:4)\r\n    Caused by: java.lang.ClassNotFoundException: org.apache.logging.log4j.spi.LoggerContext\r\n    \tat java.net.URLClassLoader.findClass(Unknown Source)\r\n    \tat java.lang.ClassLoader.loadClass(Unknown Source)\r\n    \tat sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)\r\n    \tat java.lang.ClassLoader.loadClass(Unknown Source)\r\n    \t... 1 more\r\n\r\nIn the past days i have tried installing log4j several times with no success, just today i finally set up successfully the library, so i think that the problem could be about some collision with previous installations, even if i have checked also for these.\r\n\r\nThank you for the help.\r\n","title":"Log4j eclipse class not found","body":"<p>(OS: Windows 10)</p>\n\n<p>Hi all,</p>\n\n<p>In order, i </p>\n\n<p>1- Downloaded the last version of log4j2, unzipped it in .../Program Files/Java folder</p>\n\n<p>2- Added the jar files (api e core jars) to my project folder in eclipse and added them to the project build path.</p>\n\n<p>3- Created the log4j.properties file with the following instructions, and added it to the build path</p>\n\n<pre><code>#TRACE &lt; DEBUG &lt; INFO &lt; WARN &lt; ERROR &lt; FATAL\nlog4j.rootlogger=DEBUG, toConsole\n\n#Console\nlog4j.appender.toConsole.org.apache.log4j.ConsoleAppender\nlog4j.appender.toConsole.layout=org.apache.log4j.PatternLayout\nlog4j.appender.toConsole.layout.ConversionPattern=%d[HH:mm:ss] %5p [%t] - %c.%M - %n%N\n</code></pre>\n\n<p>4- Wrote a simple code to test the library</p>\n\n<pre><code>import org.apache.log4j.Logger;\n\npublic class Log4j {\n\n    private static final Logger log = Logger.getLogger(Log4j.class);\n\n    public static void main(String[] args) {\n\n        log.info(\"test\");\n\n    }\n}\n</code></pre>\n\n<p>Once i run Log4j, i got this exception handler in eclipse console:</p>\n\n<pre><code>&lt;terminated&gt; Log4j[Java Application] C:\\Program files\\Java\\jre1.8.0_161\\bin\\javaw.exe\n\n\nException in thread \"main\" java.lang.NoClassDefFoundError: org/apache/logging/log4j/spi/LoggerContext\n    at Log4j.&lt;clinit&gt;(Log4j.java:4)\nCaused by: java.lang.ClassNotFoundException: org.apache.logging.log4j.spi.LoggerContext\n    at java.net.URLClassLoader.findClass(Unknown Source)\n    at java.lang.ClassLoader.loadClass(Unknown Source)\n    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)\n    at java.lang.ClassLoader.loadClass(Unknown Source)\n    ... 1 more\n</code></pre>\n\n<p>In the past days i have tried installing log4j several times with no success, just today i finally set up successfully the library, so i think that the problem could be about some collision with previous installations, even if i have checked also for these.</p>\n\n<p>Thank you for the help.</p>\n"},{"tags":["java","javafx","window","mouse-cursor"],"comments":[{"owner":{"account_id":5597448,"reputation":550,"user_id":4434762,"display_name":"Sarvadi"},"score":1,"creation_date":1459125702,"post_id":36254324,"comment_id":60138388,"body_markdown":"http://stackoverflow.com/questions/2941324/how-do-i-set-the-position-of-the-mouse-in-java Move it to the border when the user tries moving it out.","body":"<a href=\"http://stackoverflow.com/questions/2941324/how-do-i-set-the-position-of-the-mouse-in-java\" title=\"how do i set the position of the mouse in java\">stackoverflow.com/questions/2941324/&hellip;</a> Move it to the border when the user tries moving it out."}],"answers":[{"tags":[],"owner":{"account_id":2572278,"reputation":133,"user_id":2230671,"display_name":"mcmahoniel"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1459127240,"creation_date":1459127240,"answer_id":36254503,"question_id":36254324,"body_markdown":"It&#39;s possible to do this via [Robot](https://docs.oracle.com/javase/8/docs/api/java/awt/Robot.html). Specifically, you can use `mouseMove` to reset the mouse position when it strays too far.\r\n\r\nAlternatively, you might consider instead allowing the user to escape your window, but let your game react to that event. For example, pausing the game when the mouse leaves the window.\r\n\r\nYou can use `pointerInfo` to track the position of the cursor (as discussed [here](https://docs.oracle.com/javase/8/docs/api/java/awt/PointerInfo.html)).","title":"How to stop the mouse from exiting the window?","body":"<p>It's possible to do this via <a href=\"https://docs.oracle.com/javase/8/docs/api/java/awt/Robot.html\" rel=\"nofollow\">Robot</a>. Specifically, you can use <code>mouseMove</code> to reset the mouse position when it strays too far.</p>\n\n<p>Alternatively, you might consider instead allowing the user to escape your window, but let your game react to that event. For example, pausing the game when the mouse leaves the window.</p>\n\n<p>You can use <code>pointerInfo</code> to track the position of the cursor (as discussed <a href=\"https://docs.oracle.com/javase/8/docs/api/java/awt/PointerInfo.html\" rel=\"nofollow\">here</a>).</p>\n"}],"owner":{"account_id":7991243,"reputation":406,"user_id":6029041,"accept_rate":100,"display_name":"Chexxor"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2197,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":36254503,"answer_count":1,"score":2,"last_activity_date":1640882220,"creation_date":1459125528,"question_id":36254324,"body_markdown":"I have a javafx game which by the way is running as a windowed app. The game is controlled by moving and clicking the mouse but my problem occurs when I move the mouse too far and it goes outside the window, since as I mentioned clicking is also part of the game, and we all know what happens when you click the program that is behind your windowed app, say if I click google chrome by accident, and my game is then hidden behind google chrome, but since it&#39;s still running I lose unless I am able to alt+tab quick enough back into the game.\r\n\r\nI wish to solve this problem by not allowing the mouse to exit the window, constraining it to the boundaries of the window/stage/scene that my game is running in. \r\n\r\nIs it possible to constrict the mouse like this? How should I do so?","title":"How to stop the mouse from exiting the window?","body":"<p>I have a javafx game which by the way is running as a windowed app. The game is controlled by moving and clicking the mouse but my problem occurs when I move the mouse too far and it goes outside the window, since as I mentioned clicking is also part of the game, and we all know what happens when you click the program that is behind your windowed app, say if I click google chrome by accident, and my game is then hidden behind google chrome, but since it's still running I lose unless I am able to alt+tab quick enough back into the game.</p>\n<p>I wish to solve this problem by not allowing the mouse to exit the window, constraining it to the boundaries of the window/stage/scene that my game is running in.</p>\n<p>Is it possible to constrict the mouse like this? How should I do so?</p>\n"},{"tags":["java","android","firebase","asynchronous","google-cloud-firestore"],"comments":[{"owner":{"account_id":426109,"reputation":302012,"user_id":807126,"display_name":"Doug Stevenson"},"score":1,"creation_date":1640877115,"post_id":70533401,"comment_id":124681487,"body_markdown":"Firebase does not offer synchronous APIs for any of the products in that suite.  Everything is async, and you will need to apply proper async programming techniques to work with it effectively.  You can certainly try to block the thread that performs the query, but that&#39;s a really bad idea on Android, as that causes the app to freeze and possibly crash with an ANR.","body":"Firebase does not offer synchronous APIs for any of the products in that suite.  Everything is async, and you will need to apply proper async programming techniques to work with it effectively.  You can certainly try to block the thread that performs the query, but that&#39;s a really bad idea on Android, as that causes the app to freeze and possibly crash with an ANR."},{"owner":{"account_id":439169,"reputation":34681,"user_id":827927,"accept_rate":74,"display_name":"Erel Segal-Halevi"},"score":0,"creation_date":1640877321,"post_id":70533401,"comment_id":124681554,"body_markdown":"@DougStevenson My goal is not necessarily to make the code synchronous - my goal is to separate the logic from the database connection, so that the logic can be unit-tested separately, used with a different database, etc. Is there another way to do it?","body":"@DougStevenson My goal is not necessarily to make the code synchronous - my goal is to separate the logic from the database connection, so that the logic can be unit-tested separately, used with a different database, etc. Is there another way to do it?"},{"owner":{"account_id":13113788,"reputation":10080,"user_id":9473786,"display_name":"Tyler V"},"score":0,"creation_date":1640878332,"post_id":70533401,"comment_id":124681855,"body_markdown":"Can&#39;t you just call `countVotes` from inside the `onCompleteListener` directly? Then you can unit test `countVotes` by itself still.","body":"Can&#39;t you just call <code>countVotes</code> from inside the <code>onCompleteListener</code> directly? Then you can unit test <code>countVotes</code> by itself still."},{"owner":{"account_id":439169,"reputation":34681,"user_id":827927,"accept_rate":74,"display_name":"Erel Segal-Halevi"},"score":0,"creation_date":1640879162,"post_id":70533401,"comment_id":124682121,"body_markdown":"@TylerV how can I do this while making `countVotes` accept a collection (or a stream) of strings?","body":"@TylerV how can I do this while making <code>countVotes</code> accept a collection (or a stream) of strings?"},{"owner":{"account_id":13113788,"reputation":10080,"user_id":9473786,"display_name":"Tyler V"},"score":0,"creation_date":1640880328,"post_id":70533401,"comment_id":124682500,"body_markdown":"Why does it need to? Couldn&#39;t it just take the string argument you got from the database and update the res class member (returning void)? To test it you&#39;d just call it multiple times to mimic the real use.","body":"Why does it need to? Couldn&#39;t it just take the string argument you got from the database and update the res class member (returning void)? To test it you&#39;d just call it multiple times to mimic the real use."},{"owner":{"account_id":439169,"reputation":34681,"user_id":827927,"accept_rate":74,"display_name":"Erel Segal-Halevi"},"score":0,"creation_date":1640880595,"post_id":70533401,"comment_id":124682577,"body_markdown":"@TylerV this is just an example. In general, the function `countVotes` could be a much more complex function, that computes various statistics on the set of strings. So I want it to get the entire collection of strings.","body":"@TylerV this is just an example. In general, the function <code>countVotes</code> could be a much more complex function, that computes various statistics on the set of strings. So I want it to get the entire collection of strings."},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1640950092,"post_id":70533401,"comment_id":124696933,"body_markdown":"If you understand Kotlin, I think that this article, [How to read data from Cloud Firestore using get()?](https://medium.com/firebase-tips-tricks/how-to-read-data-from-cloud-firestore-using-get-bf03b6ee4953) might help.","body":"If you understand Kotlin, I think that this article, <a href=\"https://medium.com/firebase-tips-tricks/how-to-read-data-from-cloud-firestore-using-get-bf03b6ee4953\" rel=\"nofollow noreferrer\">How to read data from Cloud Firestore using get()?</a> might help."}],"answers":[{"tags":[],"owner":{"account_id":13113788,"reputation":10080,"user_id":9473786,"display_name":"Tyler V"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1640882171,"creation_date":1640881399,"answer_id":70534151,"question_id":70533401,"body_markdown":"You could collect the results into an array and then process that with a separate method. Then if the processing method is complex it can be unit tested in isolation for various different lists of results.\r\n\r\n```java\r\nprivate void getVotesFromDB() {\r\n    FirebaseFirestore.getInstance().collection(&quot;Votes&quot;)\r\n        .whereEqualTo(&quot;proposition_key&quot;, curr_proposition.getKey())\r\n        .get().addOnCompleteListener(task -&gt; {\r\n            if (task.isSuccessful()) {\r\n                ArrayList&lt;String&gt; results = new ArrayList();\r\n                for (QueryDocumentSnapshot document : task.getResult()) {\r\n                    String userChoice = (String) document.get(&quot;user_choice&quot;);\r\n                    results.add(userChoice);\r\n                }\r\n\r\n                // assign the result to a class member\r\n                res = countVotes(results);\r\n\r\n                // do something to signal to the rest of the code\r\n                // that results have been processed (e.g. post to\r\n                // LiveData or call another &quot;showResults&quot; method)\r\n            }\r\n        });\r\n}\r\n```\r\n\r\nThen any complicated counting logic can live separate from the firebase calls.\r\n\r\n```java\r\nint[] countVotes(ArrayList&lt;String&gt; choices) {\r\n    int[] res = new int[]{0,0,0}; \r\n\r\n    // count the votes\r\n\r\n    return res;\r\n}\r\n```","title":"How to refactor this code using &quot;Task&quot; in Java?","body":"<p>You could collect the results into an array and then process that with a separate method. Then if the processing method is complex it can be unit tested in isolation for various different lists of results.</p>\n<pre class=\"lang-java prettyprint-override\"><code>private void getVotesFromDB() {\n    FirebaseFirestore.getInstance().collection(&quot;Votes&quot;)\n        .whereEqualTo(&quot;proposition_key&quot;, curr_proposition.getKey())\n        .get().addOnCompleteListener(task -&gt; {\n            if (task.isSuccessful()) {\n                ArrayList&lt;String&gt; results = new ArrayList();\n                for (QueryDocumentSnapshot document : task.getResult()) {\n                    String userChoice = (String) document.get(&quot;user_choice&quot;);\n                    results.add(userChoice);\n                }\n\n                // assign the result to a class member\n                res = countVotes(results);\n\n                // do something to signal to the rest of the code\n                // that results have been processed (e.g. post to\n                // LiveData or call another &quot;showResults&quot; method)\n            }\n        });\n}\n</code></pre>\n<p>Then any complicated counting logic can live separate from the firebase calls.</p>\n<pre class=\"lang-java prettyprint-override\"><code>int[] countVotes(ArrayList&lt;String&gt; choices) {\n    int[] res = new int[]{0,0,0}; \n\n    // count the votes\n\n    return res;\n}\n</code></pre>\n"}],"owner":{"account_id":439169,"reputation":34681,"user_id":827927,"accept_rate":74,"display_name":"Erel Segal-Halevi"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70534151,"answer_count":1,"score":1,"last_activity_date":1640882171,"creation_date":1640876911,"question_id":70533401,"body_markdown":"The question is about [this code](https://github.com/Project-Ariel/Polity-Correct/blob/7b5d8f42c64f953b0cf6fb0ce44da0fd85eb73f5/app/src/main/java/com/example/polity_correct/ChooseResultUsers.java#L96) (in an Android application):\r\n\r\n    private Task&lt;QuerySnapshot&gt; getVotesFromDB() {\r\n        res = new int[]{0, 0, 0};   // a private class-member\r\n        return FirebaseFirestore.getInstance().collection(&quot;Votes&quot;)\r\n                .whereEqualTo(&quot;proposition_key&quot;, curr_proposition.getKey())\r\n                .get().addOnCompleteListener(task -&gt; {\r\n                    if (task.isSuccessful()) {\r\n                        for (QueryDocumentSnapshot document : task.getResult()) {\r\n                            String userChoice = (String) document.get(&quot;user_choice&quot;);\r\n                            int choice;\r\n                            switch (userChoice) {\r\n                                case &quot;against&quot;:\r\n                                    choice = 0;\r\n                                    break;\r\n                                case &quot;impossible&quot;:\r\n                                    choice = 1;\r\n                                    break;\r\n                                case &quot;agreement&quot;:\r\n                                    choice = 2;\r\n                                    break;\r\n                                default:\r\n                                    throw new IllegalStateException(&quot;Unexpected value: &quot; + userChoice);\r\n                            }\r\n                            res[choice]++;\r\n                        }\r\n                    }\r\n                });\r\n    }\r\n\r\nIn general, the code reads some lines from a Firestore collection, and applies some &quot;business logic&quot; to them (counting the number of strings from each type). The business logic can, in the future, become much more complicated than just counting. So I am looking for a way to refactor the code, so that the business logic can be written and tested separately from the database. What I would like is to have some function of the form:\r\n\r\n    int[] countVotes(Generator&lt;String&gt; strings) {\r\n         res = new int[3];\r\n         (for String userChoice: strings)  {\r\n              // Update res as above\r\n         }\r\n         return res;\r\n    }\r\n\r\nthat can be unit-tested without any need for a database connection. Then, the above function can be refactored as follows:\r\n\r\n    private Generator&lt;String&gt; getVotesFromDB() {\r\n        return FirebaseFirestore.getInstance().collection(&quot;Votes&quot;)\r\n                .whereEqualTo(&quot;proposition_key&quot;, curr_proposition.getKey())\r\n                .get().addOnCompleteListener(task -&gt; {\r\n                    if (task.isSuccessful()) {\r\n                        for (QueryDocumentSnapshot document : task.getResult()) {\r\n                            userChoice = (String) document.get(&quot;user_choice&quot;);\r\n                            yield userChoice;\r\n                        }\r\n                    }\r\n                });\r\n    }\r\n\r\nand run something like:\r\n\r\n    countVotes(getVotesFromDB())\r\n\r\nThe problem is, I do not know how to do this with the asynchronous function call. Is there a way to refactor the code in a similar or better way? ","title":"How to refactor this code using &quot;Task&quot; in Java?","body":"<p>The question is about <a href=\"https://github.com/Project-Ariel/Polity-Correct/blob/7b5d8f42c64f953b0cf6fb0ce44da0fd85eb73f5/app/src/main/java/com/example/polity_correct/ChooseResultUsers.java#L96\" rel=\"nofollow noreferrer\">this code</a> (in an Android application):</p>\n<pre><code>private Task&lt;QuerySnapshot&gt; getVotesFromDB() {\n    res = new int[]{0, 0, 0};   // a private class-member\n    return FirebaseFirestore.getInstance().collection(&quot;Votes&quot;)\n            .whereEqualTo(&quot;proposition_key&quot;, curr_proposition.getKey())\n            .get().addOnCompleteListener(task -&gt; {\n                if (task.isSuccessful()) {\n                    for (QueryDocumentSnapshot document : task.getResult()) {\n                        String userChoice = (String) document.get(&quot;user_choice&quot;);\n                        int choice;\n                        switch (userChoice) {\n                            case &quot;against&quot;:\n                                choice = 0;\n                                break;\n                            case &quot;impossible&quot;:\n                                choice = 1;\n                                break;\n                            case &quot;agreement&quot;:\n                                choice = 2;\n                                break;\n                            default:\n                                throw new IllegalStateException(&quot;Unexpected value: &quot; + userChoice);\n                        }\n                        res[choice]++;\n                    }\n                }\n            });\n}\n</code></pre>\n<p>In general, the code reads some lines from a Firestore collection, and applies some &quot;business logic&quot; to them (counting the number of strings from each type). The business logic can, in the future, become much more complicated than just counting. So I am looking for a way to refactor the code, so that the business logic can be written and tested separately from the database. What I would like is to have some function of the form:</p>\n<pre><code>int[] countVotes(Generator&lt;String&gt; strings) {\n     res = new int[3];\n     (for String userChoice: strings)  {\n          // Update res as above\n     }\n     return res;\n}\n</code></pre>\n<p>that can be unit-tested without any need for a database connection. Then, the above function can be refactored as follows:</p>\n<pre><code>private Generator&lt;String&gt; getVotesFromDB() {\n    return FirebaseFirestore.getInstance().collection(&quot;Votes&quot;)\n            .whereEqualTo(&quot;proposition_key&quot;, curr_proposition.getKey())\n            .get().addOnCompleteListener(task -&gt; {\n                if (task.isSuccessful()) {\n                    for (QueryDocumentSnapshot document : task.getResult()) {\n                        userChoice = (String) document.get(&quot;user_choice&quot;);\n                        yield userChoice;\n                    }\n                }\n            });\n}\n</code></pre>\n<p>and run something like:</p>\n<pre><code>countVotes(getVotesFromDB())\n</code></pre>\n<p>The problem is, I do not know how to do this with the asynchronous function call. Is there a way to refactor the code in a similar or better way?</p>\n"},{"tags":["java","perl","ssh"],"comments":[{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1640880562,"post_id":70533968,"comment_id":124682570,"body_markdown":"If you need to excute it remotely, use jsch. What have you tried with jsch?","body":"If you need to excute it remotely, use jsch. What have you tried with jsch?"}],"owner":{"account_id":5594688,"reputation":41,"user_id":4432802,"display_name":"quicklearner"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":84,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1640881773,"creation_date":1640880330,"question_id":70533968,"body_markdown":"I have an issue where I have application code running in abc server but perl script is located in xyz server.\r\n\r\nDue to server compatibility issue I cannot run perl script in abc server.\r\n\r\nCan someone please help me how to execute the perl script in xyz server and get the output in java application. I am using processbuilder to execute the script.\r\n\r\nI already tried using jsch but no help. Please help me how to achieve solution using process builder.\r\n\r\n    \tprivate StringBuilder runCmd(File folder, ArrayList&lt;String&gt; cmd)\r\n\t\t\tthrows IOException {\r\n\t\tProcessBuilder pb = new ProcessBuilder().command(cmd).directory(folder);\r\n\t\tMap&lt;String, String&gt; env = pb.environment();\r\n\t\tpb.redirectErrorStream(true);\r\n\t\tlog.debug(pb.command());\r\n\r\n\t\tProcess pr = pb.start();\r\n\r\n\t\tBufferedReader br = new BufferedReader(new InputStreamReader(pr.getErrorStream()));\r\n\t\tStringBuilder sb = new StringBuilder();\r\n\t\tString line;\r\n\t\twhile ((line = br.readLine()) != null) {\r\n\t\t\tsb.append(line).append(&quot;\\n&quot;);\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\tint exitVal = pr.waitFor();\r\n\t\t\tlog.debug(pb+&quot; value: &quot;+exitVal);\r\n\t\t}\r\n\t\tcatch (InterruptedException e) {\r\n\t\t\tlog.error(e.getMessage());\r\n\t\t\tsb.append(e.getMessage());\r\n\t\t}\r\n\t\treturn sb;\r\n\t}\r\n\r\n    Jsch code \r\n\r\n    ProcessBuilder pb = new ProcessBuilder().command(cmd).directory(folder);\t\tMap&lt;String, String&gt; env = pb.environment();\r\n    String host=&quot;xyz&quot;;\r\n    String user=&quot;example&quot;;\r\n    String password=&quot;pw&quot;;\r\n    String command1=&quot;perl abc.perl&quot;;\r\n    java.util.Properties config = new java.util.Properties();\r\n    config.put(&quot;StrictHostKeyChecking&quot;, &quot;no&quot;);\r\n    JSch jsch = new JSch();\r\n    Session session=jsch.getSession(user, host, 22);\r\n    session.setPassword(password);\r\n    session.setConfig(config);\r\n    session.connect();\r\n    Channel channel=session.openChannel(&quot;exec&quot;);\r\n    ((ChannelExec)channel).setCommand(command1);\r\n    channel.setInputStream(null);\r\n    ((ChannelExec)channel).setErrStream(System.err);\r\n    channel.connect();\r\n    ByteArrayOutputStream outputBuffer = new ByteArrayOutputStream();\r\n    ByteArrayOutputStream errorBuffer = new ByteArrayOutputStream();\r\n    StringBuilder sb = new StringBuilder();\r\n    InputStream in = channel.getInputStream();\r\n    String line;\r\n    channel.connect();\r\n    BufferedReader reader = new BufferedReader(new InputStreamReader(in));\r\n    while ((line = reader.readLine()) != null)\r\n     {\r\n      \tsb.append(line).append(&quot;\\n&quot;);\r\n      }\r\n    channel.disconnect();\r\n    return sb;","title":"Execute perl script in remote server process builder in java","body":"<p>I have an issue where I have application code running in abc server but perl script is located in xyz server.</p>\n<p>Due to server compatibility issue I cannot run perl script in abc server.</p>\n<p>Can someone please help me how to execute the perl script in xyz server and get the output in java application. I am using processbuilder to execute the script.</p>\n<p>I already tried using jsch but no help. Please help me how to achieve solution using process builder.</p>\n<pre><code>    private StringBuilder runCmd(File folder, ArrayList&lt;String&gt; cmd)\n        throws IOException {\n    ProcessBuilder pb = new ProcessBuilder().command(cmd).directory(folder);\n    Map&lt;String, String&gt; env = pb.environment();\n    pb.redirectErrorStream(true);\n    log.debug(pb.command());\n\n    Process pr = pb.start();\n\n    BufferedReader br = new BufferedReader(new InputStreamReader(pr.getErrorStream()));\n    StringBuilder sb = new StringBuilder();\n    String line;\n    while ((line = br.readLine()) != null) {\n        sb.append(line).append(&quot;\\n&quot;);\n    }\n\n    try {\n        int exitVal = pr.waitFor();\n        log.debug(pb+&quot; value: &quot;+exitVal);\n    }\n    catch (InterruptedException e) {\n        log.error(e.getMessage());\n        sb.append(e.getMessage());\n    }\n    return sb;\n}\n\nJsch code \n\nProcessBuilder pb = new ProcessBuilder().command(cmd).directory(folder);        Map&lt;String, String&gt; env = pb.environment();\nString host=&quot;xyz&quot;;\nString user=&quot;example&quot;;\nString password=&quot;pw&quot;;\nString command1=&quot;perl abc.perl&quot;;\njava.util.Properties config = new java.util.Properties();\nconfig.put(&quot;StrictHostKeyChecking&quot;, &quot;no&quot;);\nJSch jsch = new JSch();\nSession session=jsch.getSession(user, host, 22);\nsession.setPassword(password);\nsession.setConfig(config);\nsession.connect();\nChannel channel=session.openChannel(&quot;exec&quot;);\n((ChannelExec)channel).setCommand(command1);\nchannel.setInputStream(null);\n((ChannelExec)channel).setErrStream(System.err);\nchannel.connect();\nByteArrayOutputStream outputBuffer = new ByteArrayOutputStream();\nByteArrayOutputStream errorBuffer = new ByteArrayOutputStream();\nStringBuilder sb = new StringBuilder();\nInputStream in = channel.getInputStream();\nString line;\nchannel.connect();\nBufferedReader reader = new BufferedReader(new InputStreamReader(in));\nwhile ((line = reader.readLine()) != null)\n {\n    sb.append(line).append(&quot;\\n&quot;);\n  }\nchannel.disconnect();\nreturn sb;\n</code></pre>\n"},{"tags":["java","logging","java-8","log4j2"],"comments":[{"owner":{"account_id":9609,"reputation":92294,"user_id":17833,"display_name":"Anya Shenanigans"},"score":0,"creation_date":1640880783,"post_id":70533435,"comment_id":124682641,"body_markdown":"Eh - the loader tries to infer the configuration type from the file extension, and I think log4j2 isn&#39;t one of the known extensions. Have you tried making the filename&#39;s extension match one of the supported ones? `.properties`, `.yaml`, &#39;`.yml`, `.json`, `.jsn` or `.xml`? This is from the [documentation](https://logging.apache.org/log4j/2.x/manual/configuration.html#AutomaticConfiguration)","body":"Eh - the loader tries to infer the configuration type from the file extension, and I think log4j2 isn&#39;t one of the known extensions. Have you tried making the filename&#39;s extension match one of the supported ones? <code>.properties</code>, <code>.yaml</code>, &#39;<code>.yml</code>, <code>.json</code>, <code>.jsn</code> or <code>.xml</code>? This is from the <a href=\"https://logging.apache.org/log4j/2.x/manual/configuration.html#AutomaticConfiguration\" rel=\"nofollow noreferrer\">documentation</a>"}],"answers":[{"tags":[],"owner":{"account_id":9609,"reputation":92294,"user_id":17833,"display_name":"Anya Shenanigans"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1640881305,"creation_date":1640881305,"answer_id":70534140,"question_id":70533435,"body_markdown":"The [documentation][1] on this is relatively clear - you need to make the extension of the configuration type match the file format, so the factory can generate the correct configuration parser.\r\n\r\nThe [ConfigurationFactory][2] documentation indicates 4 logging file formats: Json, XML, Yaml and Property file format.\r\n\r\nYou need to make the file extension for the configuration match the file format, so if your configuration is xml, then make the file extension `.xml`, etc.\r\n\r\nSo if the config is in xml, your systemproperty should look like:\r\n\r\n    &lt;sysproperty key=&quot;log4j.configurationFile&quot; value=&quot;file:${_real_dir}/config/project.log4j2.xml&quot; /&gt;\r\n\r\n   [1]: https://logging.apache.org/log4j/2.x/manual/configuration.html#AutomaticConfiguration\r\n   [2]: https://logging.apache.org/log4j/2.x/log4j-core/apidocs/org/apache/logging/log4j/core/config/ConfigurationFactory.html","title":"How to add log4j2 configuration file as system property?","body":"<p>The <a href=\"https://logging.apache.org/log4j/2.x/manual/configuration.html#AutomaticConfiguration\" rel=\"nofollow noreferrer\">documentation</a> on this is relatively clear - you need to make the extension of the configuration type match the file format, so the factory can generate the correct configuration parser.</p>\n<p>The <a href=\"https://logging.apache.org/log4j/2.x/log4j-core/apidocs/org/apache/logging/log4j/core/config/ConfigurationFactory.html\" rel=\"nofollow noreferrer\">ConfigurationFactory</a> documentation indicates 4 logging file formats: Json, XML, Yaml and Property file format.</p>\n<p>You need to make the file extension for the configuration match the file format, so if your configuration is xml, then make the file extension <code>.xml</code>, etc.</p>\n<p>So if the config is in xml, your systemproperty should look like:</p>\n<pre><code>&lt;sysproperty key=&quot;log4j.configurationFile&quot; value=&quot;file:${_real_dir}/config/project.log4j2.xml&quot; /&gt;\n</code></pre>\n"}],"owner":{"account_id":13556629,"reputation":71,"user_id":9779833,"display_name":"Manoj Kommineni"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":635,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70534140,"answer_count":1,"score":1,"last_activity_date":1640881305,"creation_date":1640877143,"question_id":70533435,"body_markdown":"I have been trying to pass the log configuration url through system property but it is resulting in an error.\r\n\r\n    ERROR StatusLogger No logging configuration\r\nI have passed the system property as follows:\r\n\r\n    &lt;sysproperty key=&quot;log4j.configurationFile&quot; value=&quot;file:${_real_dir}/config/project.log4j2&quot; /&gt;\r\nHere project.log4j2 is the configuration file. How should I change the sysproperty key to make this work?","title":"How to add log4j2 configuration file as system property?","body":"<p>I have been trying to pass the log configuration url through system property but it is resulting in an error.</p>\n<pre><code>ERROR StatusLogger No logging configuration\n</code></pre>\n<p>I have passed the system property as follows:</p>\n<pre><code>&lt;sysproperty key=&quot;log4j.configurationFile&quot; value=&quot;file:${_real_dir}/config/project.log4j2&quot; /&gt;\n</code></pre>\n<p>Here project.log4j2 is the configuration file. How should I change the sysproperty key to make this work?</p>\n"},{"tags":["java","javafx","position","mouse-cursor"],"comments":[{"owner":{"account_id":3557648,"reputation":8235,"user_id":2970960,"accept_rate":43,"display_name":"Jai"},"score":1,"creation_date":1500514112,"post_id":45201006,"comment_id":77374033,"body_markdown":"I&#39;m not an expert, but as far as I know, this won&#39;t be easy. Mouse/cursor is generally an OS element, you are not going to get it until you have a window to capture it. You would probably need to go down to native level (JNA?), or you would need to create and show a transparent `Stage`, then grab the coordinates and then discard that transparent stage.","body":"I&#39;m not an expert, but as far as I know, this won&#39;t be easy. Mouse/cursor is generally an OS element, you are not going to get it until you have a window to capture it. You would probably need to go down to native level (JNA?), or you would need to create and show a transparent <code>Stage</code>, then grab the coordinates and then discard that transparent stage."},{"owner":{"account_id":5949632,"reputation":1404,"user_id":4678099,"accept_rate":78,"display_name":"Rolch2015"},"score":0,"creation_date":1500564262,"post_id":45201006,"comment_id":77404265,"body_markdown":"@Jai Thank you for your feedback. This might be indeed the case, and therefore to get a clean  solution one maybe can not but somehow simulate a `MouseEvent`.","body":"@Jai Thank you for your feedback. This might be indeed the case, and therefore to get a clean  solution one maybe can not but somehow simulate a <code>MouseEvent</code>."}],"answers":[{"tags":[],"owner":{"account_id":7882188,"reputation":1056,"user_id":5955739,"display_name":"lambad"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1500566376,"creation_date":1500519959,"answer_id":45204397,"question_id":45201006,"body_markdown":"Well, you could get mouse coordinates using Robot class. Here is an example. \r\n\r\n\r\n    com.sun.glass.ui.Robot robot =\r\n                    com.sun.glass.ui.Application.GetApplication().createRobot();\r\n    \r\n            int y = robot.getMouseY();\r\n            System.out.println(&quot;y point = &quot; + y);\r\n            int x = robot.getMouseX();\r\n            System.out.println(&quot;x point= &quot; + x);\r\n\r\nIt tried it on linux (elementary OS) and it works.\r\n\r\n**Update**: \r\nAfter some googling, I found TestFX which looks like an attempt to implement a prototype for Robot class. Have a look at links given below.\r\nhttps://github.com/TestFX/Robot\r\nhttp://mail.openjdk.java.net/pipermail/openjfx-dev/2015-December/018412.html\r\n\r\nYou can also do something like this, to get the coordinates.\r\n \r\n\r\n    public void start(Stage primaryStage) throws Exception {\r\n            GlassRobot robot = new GlassRobotImpl();\r\n            Point2D point = robot.getMouseLocation();\r\n            double x = point.getX();\r\n            double y = point.getY();\r\n            System.out.println(&quot;y = &quot; + y);\r\n            System.out.println(&quot;x = &quot; + x);\r\n            if(x &gt; 10) {\r\n                  primaryStage.show();\r\n           }\r\n    public static void main(String[] args) {\r\n            launch(args);\r\n        }\r\n ","title":"Retrieve mouse position in JavaFX without event","body":"<p>Well, you could get mouse coordinates using Robot class. Here is an example. </p>\n\n<pre><code>com.sun.glass.ui.Robot robot =\n                com.sun.glass.ui.Application.GetApplication().createRobot();\n\n        int y = robot.getMouseY();\n        System.out.println(\"y point = \" + y);\n        int x = robot.getMouseX();\n        System.out.println(\"x point= \" + x);\n</code></pre>\n\n<p>It tried it on linux (elementary OS) and it works.</p>\n\n<p><strong>Update</strong>: \nAfter some googling, I found TestFX which looks like an attempt to implement a prototype for Robot class. Have a look at links given below.\n<a href=\"https://github.com/TestFX/Robot\" rel=\"noreferrer\">https://github.com/TestFX/Robot</a>\n<a href=\"http://mail.openjdk.java.net/pipermail/openjfx-dev/2015-December/018412.html\" rel=\"noreferrer\">http://mail.openjdk.java.net/pipermail/openjfx-dev/2015-December/018412.html</a></p>\n\n<p>You can also do something like this, to get the coordinates.</p>\n\n<pre><code>public void start(Stage primaryStage) throws Exception {\n        GlassRobot robot = new GlassRobotImpl();\n        Point2D point = robot.getMouseLocation();\n        double x = point.getX();\n        double y = point.getY();\n        System.out.println(\"y = \" + y);\n        System.out.println(\"x = \" + x);\n        if(x &gt; 10) {\n              primaryStage.show();\n       }\npublic static void main(String[] args) {\n        launch(args);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7841741,"reputation":1744,"user_id":5932611,"display_name":"Tharindu Sathischandra"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1600315173,"creation_date":1600314641,"answer_id":63931003,"question_id":45201006,"body_markdown":"As [@lambad](https://stackoverflow.com/a/45204397/5932611) suggested Robot class seems to be a decent way to achieve your need.  \r\n\r\nI think it is more appropiate to use JavaFX version of Robot which is [`javafx.scene.robot.Robot`](https://openjfx.io/javadoc/11/javafx.graphics/javafx/scene/robot/Robot.html). \r\n\r\nYou could simply use `getMousePosition()` method which returns the current mouse (x,y) screen coordinates as a `javafx.geometry.Point2D`.\r\n\r\n```\r\nimport javafx.scene.robot.Robot;\r\n\r\nRobot robot = new Robot();\r\n\r\nSystem.out.println(&quot;X is: &quot; + robot.getMousePosition().getX());\r\nSystem.out.println(&quot;Y is: &quot; + robot.getMousePosition().getY());\r\n\r\n```\r\n&lt;br&gt;\r\nNote: \r\nRobot objects must be constructed and used on the JavaFX Application Thread.\r\n\r\n","title":"Retrieve mouse position in JavaFX without event","body":"<p>As <a href=\"https://stackoverflow.com/a/45204397/5932611\">@lambad</a> suggested Robot class seems to be a decent way to achieve your need.</p>\n<p>I think it is more appropiate to use JavaFX version of Robot which is <a href=\"https://openjfx.io/javadoc/11/javafx.graphics/javafx/scene/robot/Robot.html\" rel=\"nofollow noreferrer\"><code>javafx.scene.robot.Robot</code></a>.</p>\n<p>You could simply use <code>getMousePosition()</code> method which returns the current mouse (x,y) screen coordinates as a <code>javafx.geometry.Point2D</code>.</p>\n<pre><code>import javafx.scene.robot.Robot;\n\nRobot robot = new Robot();\n\nSystem.out.println(&quot;X is: &quot; + robot.getMousePosition().getX());\nSystem.out.println(&quot;Y is: &quot; + robot.getMousePosition().getY());\n\n</code></pre>\n<br>\nNote: \nRobot objects must be constructed and used on the JavaFX Application Thread.\n"}],"owner":{"account_id":5949632,"reputation":1404,"user_id":4678099,"accept_rate":78,"display_name":"Rolch2015"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2521,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":45204397,"answer_count":2,"score":4,"last_activity_date":1640880453,"creation_date":1500498399,"question_id":45201006,"body_markdown":"I want to retrieve the x and y coordinates of the current mouse position before showing a stage. \r\n\r\nSo far, the only way I found to get the mouse position in JavaFX is within a `MouseEvent`, which does not apply to my situation. Furthermore, I found the possibility to retrieve the position via `java.awt.MouseInfo`. This, however, I think is a bad idea (I use JavaFX not AWT) and, at least in my case, results in a `HeadlessException`. \r\n\r\nIs there an other clean possibility to retrieve the mouse position in JavaFX without getting too hackish (e.g. simulating a MouseEvent just for getting the position)?\r\n\r\nThank you very much!","title":"Retrieve mouse position in JavaFX without event","body":"<p>I want to retrieve the x and y coordinates of the current mouse position before showing a stage.</p>\n<p>So far, the only way I found to get the mouse position in JavaFX is within a <code>MouseEvent</code>, which does not apply to my situation. Furthermore, I found the possibility to retrieve the position via <code>java.awt.MouseInfo</code>. This, however, I think is a bad idea (I use JavaFX not AWT) and, at least in my case, results in a <code>HeadlessException</code>.</p>\n<p>Is there an other clean possibility to retrieve the mouse position in JavaFX without getting too hackish (e.g. simulating a MouseEvent just for getting the position)?</p>\n<p>Thank you very much!</p>\n"},{"tags":["java","guice","dropwizard"],"answers":[{"tags":[],"owner":{"account_id":1779083,"reputation":903,"user_id":1622256,"accept_rate":58,"display_name":"Raghavan"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1474027827,"creation_date":1445089088,"answer_id":33187270,"question_id":33159452,"body_markdown":"A simple approach to load the data at the application startup . In dropwizard you can do this in the run method of your Application Class. Click [here][1] for reference.\r\n\r\n\r\n  [1]: http://www.dropwizard.io/1.0.0/docs/getting-started.html#creating-an-application-class","title":"Dropwizard - Run init method in class on server start","body":"<p>A simple approach to load the data at the application startup . In dropwizard you can do this in the run method of your Application Class. Click <a href=\"http://www.dropwizard.io/1.0.0/docs/getting-started.html#creating-an-application-class\" rel=\"nofollow\">here</a> for reference.</p>\n"},{"tags":[],"owner":{"account_id":5288895,"reputation":1547,"user_id":4222003,"accept_rate":67,"display_name":"Maulik Kakadiya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640879361,"creation_date":1640879361,"answer_id":70533810,"question_id":33159452,"body_markdown":"I have used a similar approach on my application by using `UnitOfWorkAwareProxyFactory`\r\nIn My Application.Java inside the run method, I have created proxy DAO.\r\n\r\n    public void run(Configuration configuration, Environment environment) throws Exception {\r\n        // run method \r\n         .\r\n         .\r\n         .\r\n    \r\n        // At end of the method\r\n        final MyDAOOne myDAOOne = new MyDAOOneImpl(hibernateBundle.getSessionFactory());\r\n        MyDAOOneProxy myDAOOneProxy = new UnitOfWorkAwareProxyFactory(hibernateBundle).create(MyDAOOneProxy.class, MyDAOOneImpl.class, myDAOOne );\r\n    \r\n        final MyDAOTwo myDAOTwo = new MyDAOTwoImpl(hibernateBundle.getSessionFactory());\r\n        MyDAOTwoProxy myDAOTwoProxy = new UnitOfWorkAwareProxyFactory(hibernateBundle).create(MyDAOTwoProxy.class, MyDAOTwoImpl.class, myDAOTwoProxy);\r\n    \r\n        //Init in memory Cache\r\n        new CacheInitializeServiceImpl(myDAOOneProxy, myDAOTwoProxy);\r\n    }\r\n\r\nHere CacheInitializeServiceImpl Class contains a list of static methods which is return store database data. ","title":"Dropwizard - Run init method in class on server start","body":"<p>I have used a similar approach on my application by using <code>UnitOfWorkAwareProxyFactory</code>\nIn My Application.Java inside the run method, I have created proxy DAO.</p>\n<pre><code>public void run(Configuration configuration, Environment environment) throws Exception {\n    // run method \n     .\n     .\n     .\n\n    // At end of the method\n    final MyDAOOne myDAOOne = new MyDAOOneImpl(hibernateBundle.getSessionFactory());\n    MyDAOOneProxy myDAOOneProxy = new UnitOfWorkAwareProxyFactory(hibernateBundle).create(MyDAOOneProxy.class, MyDAOOneImpl.class, myDAOOne );\n\n    final MyDAOTwo myDAOTwo = new MyDAOTwoImpl(hibernateBundle.getSessionFactory());\n    MyDAOTwoProxy myDAOTwoProxy = new UnitOfWorkAwareProxyFactory(hibernateBundle).create(MyDAOTwoProxy.class, MyDAOTwoImpl.class, myDAOTwoProxy);\n\n    //Init in memory Cache\n    new CacheInitializeServiceImpl(myDAOOneProxy, myDAOTwoProxy);\n}\n</code></pre>\n<p>Here CacheInitializeServiceImpl Class contains a list of static methods which is return store database data.</p>\n"}],"owner":{"account_id":1877173,"reputation":309,"user_id":1698150,"accept_rate":29,"display_name":"mtical"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2181,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1640879361,"creation_date":1444947454,"question_id":33159452,"body_markdown":"I&#39;m trying to pull a bunch of data from a database into the application&#39;s memory.  \r\n\r\nI&#39;d like to do this on server startup so that it doesn&#39;t slow the application down during runtime.  \r\n\r\nIs this possible in Dropwizard (using Guice dependency injection)?","title":"Dropwizard - Run init method in class on server start","body":"<p>I'm trying to pull a bunch of data from a database into the application's memory.  </p>\n\n<p>I'd like to do this on server startup so that it doesn't slow the application down during runtime.  </p>\n\n<p>Is this possible in Dropwizard (using Guice dependency injection)?</p>\n"},{"tags":["java","spring","authentication","active-directory","ldap"],"comments":[{"owner":{"account_id":382603,"reputation":9068,"user_id":737936,"accept_rate":77,"display_name":"ravthiru"},"score":0,"creation_date":1589965372,"post_id":60277236,"comment_id":109499029,"body_markdown":"Its quite long time, have you found the solution for this?","body":"Its quite long time, have you found the solution for this?"}],"answers":[{"tags":[],"owner":{"account_id":5650328,"reputation":1113,"user_id":4471199,"display_name":"RoBeaToZ"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1592730504,"creation_date":1592730504,"answer_id":62496534,"question_id":60277236,"body_markdown":"I had the same problem and found a solution that works, but I am not very happy with it.\r\nHere is how it works for me:\r\n\r\n 1. Adjust the `.ldif` file\r\n\r\n    Add the `userPrincipalName` attribute to your `.ldif` file and fill it with the same value as the `dn`, in your case:\r\n\r\n    ```\r\n    dn: uid=john,ou=people,dc=test,dc=local\r\n    userPrincipalName: uid=john,ou=people,dc=test,dc=local\r\n    ```\r\n 2. Use the `dn` instead of the email address for authentication\r\n    \r\n    You use `john@test.local` in your test for authentication. To make it work, you have to use the `dn`: `uid=john,ou=people,dc=test,dc=local` \r\n\r\nAfter these changes, the authentication against embedded LDAP worked in the tests.\r\nBetter solutions are welcome! ","title":"Spring authentication using ActiveDirectoryLdapAuthenticationProvider and embedded ldif","body":"<p>I had the same problem and found a solution that works, but I am not very happy with it.\nHere is how it works for me:</p>\n<ol>\n<li><p>Adjust the <code>.ldif</code> file</p>\n<p>Add the <code>userPrincipalName</code> attribute to your <code>.ldif</code> file and fill it with the same value as the <code>dn</code>, in your case:</p>\n<pre><code>dn: uid=john,ou=people,dc=test,dc=local\nuserPrincipalName: uid=john,ou=people,dc=test,dc=local\n</code></pre>\n</li>\n<li><p>Use the <code>dn</code> instead of the email address for authentication</p>\n<p>You use <code>john@test.local</code> in your test for authentication. To make it work, you have to use the <code>dn</code>: <code>uid=john,ou=people,dc=test,dc=local</code></p>\n</li>\n</ol>\n<p>After these changes, the authentication against embedded LDAP worked in the tests.\nBetter solutions are welcome!</p>\n"},{"tags":[],"owner":{"account_id":352053,"reputation":522,"user_id":688926,"display_name":"Anastasiia Smirnova"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640879193,"creation_date":1640876033,"answer_id":70533245,"question_id":60277236,"body_markdown":"I was able to do this the following way.\r\n\r\n1. Define file with changes to the schema in the file `ldap-schema.ldif`. Note, schema needs to be defined as it would be defined initially, not in the change format like here [LDIF Format for Adding Schema Elements][1]:\r\n\r\n```\r\ndn: cn=schema\r\nobjectClass: top\r\nobjectClass: ldapSubEntry\r\nobjectClass: subschema\r\ncn: schema\r\nattributetypes: ( 1.2.3.4.5.6.7 NAME &#39;userPrincipalName&#39; SYNTAX &#39;1.3.6.1.4.1.1466.115.121.1.15&#39; SINGLE-VALUE )\r\nobjectClasses: ( 7.8.9.9\r\n                 NAME &#39;user&#39;\r\n                 SUP organizationalPerson\r\n                 MUST (cn $\r\n                        userPrincipalName ) )\r\n```\r\n\r\n2. Ldif file with users `test-server.ldif`:\r\n\r\n```\r\ndn: dc=test,dc=local\r\nobjectclass: top\r\nobjectclass: domain\r\nobjectclass: extensibleObject\r\ndc: test\r\n\r\ndn: uid=john,ou=people,dc=test,dc=local\r\nobjectclass: top\r\nobjectclass: person\r\nobjectclass: organizationalPerson\r\nobjectClass: user\r\ncn: John Doe\r\nsn: John\r\nuid: john\r\nuserPrincipalName: uid=john,ou=people,dc=test,dc=local\r\nuserPassword: SomePassword\r\n\r\n```\r\n\r\n3. Configure Spring Boot properties:\r\n\r\n```\r\nspring.ldap.embedded.base-dn=dc=test,dc=local\r\nspring.ldap.embedded.ldif=classpath:test-server.ldif\r\nspring.ldap.embedded.validation.schema=classpath:ldap-schema.ldif\r\nspring.ldap.embedded.port=12345\r\nspring.ldap.embedded.url=ldap://localhost:12345/\r\n```\r\n\r\n`EmbeddedLdapAutoConfiguration` will merge default schema with the one defined in the `ldap-schema.ldif` and as a result `userPrincipalName` will be added to the `attributetypes` and `person` object will be updated in the \r\n`objectClasses` in the default schema.\r\n\r\nFor login you will need to use:\r\n```\r\nusername: uid=john,ou=people,dc=test,dc=local\r\npassword: SomePassword\r\n```\r\n\r\nThis is a required workaround if you are using `ActiveDirectoryLdapAuthenticationProvider` with embedded ldap server.\r\n\r\n  [1]: https://docs.oracle.com/cd/B14099_19/idmanage.1012/b15883/ldif_appendix003.htm","title":"Spring authentication using ActiveDirectoryLdapAuthenticationProvider and embedded ldif","body":"<p>I was able to do this the following way.</p>\n<ol>\n<li>Define file with changes to the schema in the file <code>ldap-schema.ldif</code>. Note, schema needs to be defined as it would be defined initially, not in the change format like here <a href=\"https://docs.oracle.com/cd/B14099_19/idmanage.1012/b15883/ldif_appendix003.htm\" rel=\"nofollow noreferrer\">LDIF Format for Adding Schema Elements</a>:</li>\n</ol>\n<pre><code>dn: cn=schema\nobjectClass: top\nobjectClass: ldapSubEntry\nobjectClass: subschema\ncn: schema\nattributetypes: ( 1.2.3.4.5.6.7 NAME 'userPrincipalName' SYNTAX '1.3.6.1.4.1.1466.115.121.1.15' SINGLE-VALUE )\nobjectClasses: ( 7.8.9.9\n                 NAME 'user'\n                 SUP organizationalPerson\n                 MUST (cn $\n                        userPrincipalName ) )\n</code></pre>\n<ol start=\"2\">\n<li>Ldif file with users <code>test-server.ldif</code>:</li>\n</ol>\n<pre><code>dn: dc=test,dc=local\nobjectclass: top\nobjectclass: domain\nobjectclass: extensibleObject\ndc: test\n\ndn: uid=john,ou=people,dc=test,dc=local\nobjectclass: top\nobjectclass: person\nobjectclass: organizationalPerson\nobjectClass: user\ncn: John Doe\nsn: John\nuid: john\nuserPrincipalName: uid=john,ou=people,dc=test,dc=local\nuserPassword: SomePassword\n\n</code></pre>\n<ol start=\"3\">\n<li>Configure Spring Boot properties:</li>\n</ol>\n<pre><code>spring.ldap.embedded.base-dn=dc=test,dc=local\nspring.ldap.embedded.ldif=classpath:test-server.ldif\nspring.ldap.embedded.validation.schema=classpath:ldap-schema.ldif\nspring.ldap.embedded.port=12345\nspring.ldap.embedded.url=ldap://localhost:12345/\n</code></pre>\n<p><code>EmbeddedLdapAutoConfiguration</code> will merge default schema with the one defined in the <code>ldap-schema.ldif</code> and as a result <code>userPrincipalName</code> will be added to the <code>attributetypes</code> and <code>person</code> object will be updated in the\n<code>objectClasses</code> in the default schema.</p>\n<p>For login you will need to use:</p>\n<pre><code>username: uid=john,ou=people,dc=test,dc=local\npassword: SomePassword\n</code></pre>\n<p>This is a required workaround if you are using <code>ActiveDirectoryLdapAuthenticationProvider</code> with embedded ldap server.</p>\n"}],"owner":{"account_id":10026198,"reputation":133,"user_id":7414311,"display_name":"Mac Karczewski"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1710,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":62496534,"answer_count":2,"score":6,"last_activity_date":1640879193,"creation_date":1582016859,"question_id":60277236,"body_markdown":"one of my clients requirement was to authenticate users against his corporate ActiveDirectory (LDAP). So I used standard ActiveDirectoryLdapAuthenticationProvider and it works like a charm. \r\n\r\n    @Bean\r\n\tpublic ActiveDirectoryLdapAuthenticationProvider activeDirectoryLdapAuthenticationProvider() {\r\n\t\tActiveDirectoryLdapAuthenticationProvider adProvider = new ActiveDirectoryLdapAuthenticationProvider(\r\n\t\t\t\tldapConfig.getLdapDomain(), ldapConfig.getLdapUrl(), ldapConfig.getLdapRoot());\r\n\t\tadProvider.setConvertSubErrorCodesToExceptions(true);\r\n\t\tadProvider.setUseAuthenticationRequestCredentials(true);\r\n\t\tadProvider.setSearchFilter(ldapConfig.getLdapSearchFilter());\r\n\t\treturn adProvider;\r\n\t}\r\n\r\nProblem is that clients AC is hidden behind firewall. It works after deployment, but I cannot reach AC during local development due to cleints security policy. So, I had an idea that maybe for dev profile I will use embedded LDAP server (UnboundID LDAP SDK for Java). I&#39;m not an LDAP expert, but I somehow composed simple ldif file, and it looks like this:\r\n\r\n    dn: dc=test,dc=local\r\n    objectclass: top\r\n    objectclass: domain\r\n    objectclass: extensibleObject\r\n    dc: test\r\n    # Organizational Units\r\n    dn: ou=groups,dc=test,dc=local\r\n    objectclass: top\r\n    objectclass: organizationalUnit\r\n    ou: groups\r\n    dn: ou=people,dc=test,dc=local\r\n    objectclass: top\r\n    objectclass: organizationalUnit\r\n    ou: people\r\n    # Users\r\n    dn: uid=john,ou=people,dc=test,dc=local\r\n    objectclass: top\r\n    objectclass: person\r\n    objectclass: organizationalPerson\r\n    objectclass: inetOrgPerson\r\n    cn: John Doe\r\n    sn: John\r\n    uid: john\r\n    password: johnspassword\r\n    # Create Groups\r\n    dn: cn=administrators,ou=groups,dc=test,dc=local\r\n    objectclass: top\r\n    objectclass: groupOfUniqueNames\r\n    cn: administrators\r\n    ou: administrator\r\n    uniqueMember: uid=john,ou=people,dc=test,dc=local\r\n\r\nI also configured embedded ldap properties:\r\n\r\n    spring.ldap.embedded.base-dn=dc=test,dc=local\r\n    spring.ldap.embedded.ldif=classpath:localldapactivedirectory.ldif\r\n    spring.ldap.embedded.port=12345\r\n    spring.ldap.embedded.url=ldap://localhost:12345/\r\n    spring.ldap.embedded.validation.enabled=false\r\n\r\nUnboundID had no problem with that, but as you guess I encounter problem during authentication:\r\n\r\n    [LDAP: error code 34 - Unable to parse bind DN &#39;john@test.local&#39;:  Unable to parse string &#39;john@test.local&#39; as a DN because it does not have an equal sign after RDN attribute &#39;john@test.local&#39;.]; nested exception is javax.naming.InvalidNameException: [LDAP: error code 34 - Unable to parse bind DN &#39;john@test.local&#39;:  Unable to parse string &#39;user_cms@test.com&#39; as a DN because it does not have an equal sign after RDN attribute &#39;john@test.local&#39;.]\r\n\r\nTo show you whole picture I add that error occurs during authentication attempt (in custom authentication service):\r\n\r\n    Authentication authentication = authenticationManagerBuilder.getObject()\r\n\t\t\t\t.authenticate(authenticationToken);\r\n\r\nI presume that it is caused by the fact that my ldif file is too simple. It would work with vanilla Ldap authentication provider, but not with ActiveDirectoryLdapAuthenticationProvider. \r\n\r\nIs there anyone who knows how to &quot;mock&quot; ActiveDirectory(LDAP) in ldif file so ActiveDirectoryLdapAuthenticationProvider could use it during authentication? ","title":"Spring authentication using ActiveDirectoryLdapAuthenticationProvider and embedded ldif","body":"<p>one of my clients requirement was to authenticate users against his corporate ActiveDirectory (LDAP). So I used standard ActiveDirectoryLdapAuthenticationProvider and it works like a charm. </p>\n\n<pre><code>@Bean\npublic ActiveDirectoryLdapAuthenticationProvider activeDirectoryLdapAuthenticationProvider() {\n    ActiveDirectoryLdapAuthenticationProvider adProvider = new ActiveDirectoryLdapAuthenticationProvider(\n            ldapConfig.getLdapDomain(), ldapConfig.getLdapUrl(), ldapConfig.getLdapRoot());\n    adProvider.setConvertSubErrorCodesToExceptions(true);\n    adProvider.setUseAuthenticationRequestCredentials(true);\n    adProvider.setSearchFilter(ldapConfig.getLdapSearchFilter());\n    return adProvider;\n}\n</code></pre>\n\n<p>Problem is that clients AC is hidden behind firewall. It works after deployment, but I cannot reach AC during local development due to cleints security policy. So, I had an idea that maybe for dev profile I will use embedded LDAP server (UnboundID LDAP SDK for Java). I'm not an LDAP expert, but I somehow composed simple ldif file, and it looks like this:</p>\n\n<pre><code>dn: dc=test,dc=local\nobjectclass: top\nobjectclass: domain\nobjectclass: extensibleObject\ndc: test\n# Organizational Units\ndn: ou=groups,dc=test,dc=local\nobjectclass: top\nobjectclass: organizationalUnit\nou: groups\ndn: ou=people,dc=test,dc=local\nobjectclass: top\nobjectclass: organizationalUnit\nou: people\n# Users\ndn: uid=john,ou=people,dc=test,dc=local\nobjectclass: top\nobjectclass: person\nobjectclass: organizationalPerson\nobjectclass: inetOrgPerson\ncn: John Doe\nsn: John\nuid: john\npassword: johnspassword\n# Create Groups\ndn: cn=administrators,ou=groups,dc=test,dc=local\nobjectclass: top\nobjectclass: groupOfUniqueNames\ncn: administrators\nou: administrator\nuniqueMember: uid=john,ou=people,dc=test,dc=local\n</code></pre>\n\n<p>I also configured embedded ldap properties:</p>\n\n<pre><code>spring.ldap.embedded.base-dn=dc=test,dc=local\nspring.ldap.embedded.ldif=classpath:localldapactivedirectory.ldif\nspring.ldap.embedded.port=12345\nspring.ldap.embedded.url=ldap://localhost:12345/\nspring.ldap.embedded.validation.enabled=false\n</code></pre>\n\n<p>UnboundID had no problem with that, but as you guess I encounter problem during authentication:</p>\n\n<pre><code>[LDAP: error code 34 - Unable to parse bind DN 'john@test.local':  Unable to parse string 'john@test.local' as a DN because it does not have an equal sign after RDN attribute 'john@test.local'.]; nested exception is javax.naming.InvalidNameException: [LDAP: error code 34 - Unable to parse bind DN 'john@test.local':  Unable to parse string 'user_cms@test.com' as a DN because it does not have an equal sign after RDN attribute 'john@test.local'.]\n</code></pre>\n\n<p>To show you whole picture I add that error occurs during authentication attempt (in custom authentication service):</p>\n\n<pre><code>Authentication authentication = authenticationManagerBuilder.getObject()\n            .authenticate(authenticationToken);\n</code></pre>\n\n<p>I presume that it is caused by the fact that my ldif file is too simple. It would work with vanilla Ldap authentication provider, but not with ActiveDirectoryLdapAuthenticationProvider. </p>\n\n<p>Is there anyone who knows how to \"mock\" ActiveDirectory(LDAP) in ldif file so ActiveDirectoryLdapAuthenticationProvider could use it during authentication? </p>\n"},{"tags":["javascript","java","exception","servicenow","probe"],"answers":[{"tags":[],"owner":{"account_id":16560676,"reputation":1,"user_id":11966668,"display_name":"user11966668"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1566551603,"creation_date":1566550013,"answer_id":57622717,"question_id":57615939,"body_markdown":"The method `decryptFile` is static. The `new` keyword can only be used to create instances.\r\nTherefore, try:\r\n\r\n    var pgpObj = this.Pgp(this.inputFile, this.secretFile, this.passPhase, this.defaultName);\r\n","title":"Calling a java jar method via mid server probe designed in javascript","body":"<p>The method <code>decryptFile</code> is static. The <code>new</code> keyword can only be used to create instances.\nTherefore, try:</p>\n\n<pre><code>var pgpObj = this.Pgp(this.inputFile, this.secretFile, this.passPhase, this.defaultName);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14287647,"reputation":11,"user_id":10320578,"display_name":"ANGEL RAMIREZ DEL PINO"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640878619,"creation_date":1640878619,"answer_id":70533686,"question_id":57615939,"body_markdown":"Try to remove &quot;new&quot; from:\r\n\r\n&gt; jspr.setJavascript(&#39;var pdf = **new** ProcessPGP(); res =\r\n&gt; pdf.execute();&#39;);","title":"Calling a java jar method via mid server probe designed in javascript","body":"<p>Try to remove &quot;new&quot; from:</p>\n<blockquote>\n<p>jspr.setJavascript('var pdf = <strong>new</strong> ProcessPGP(); res =\npdf.execute();');</p>\n</blockquote>\n"}],"owner":{"account_id":16220207,"reputation":29,"user_id":11711914,"display_name":"Anirudh Gupta"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1342,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1640878619,"creation_date":1566502058,"question_id":57615939,"body_markdown":"I&#39;m setting up an environment where I pass 4 parameters (Encrypted file, Key File, Pass Phase and Default File name) to a .Jar and it decrypts the file.\r\nI have achieved it via Bouncycastle API and it works fine on the eclipse IDE.\r\n\r\nNow I have to set this up in my servicenow mid-server.\r\n\r\nSo the javascript probe should call this jar file and pass the parameters as strings and the encrypted file (which resides on the mid-server) gets decrypted.\r\n\r\nI have tried creating a mid-server script include in servicenow and a probe but it returns with an error that the method is not found (which is actually there)\r\n\r\nCLASS INSIDE .JAR\r\n\r\n```\r\npackage pgpDecrypt;\r\n\r\nimport java.io.BufferedInputStream;\r\nimport java.io.BufferedOutputStream;\r\nimport java.io.File;\r\nimport java.io.FileInputStream;\r\nimport java.io.FileOutputStream;\r\nimport java.io.IOException;\r\nimport java.io.InputStream;\r\nimport java.io.OutputStream;\r\nimport java.security.NoSuchProviderException;\r\nimport java.security.SecureRandom;\r\nimport java.security.Security;\r\nimport java.util.Iterator;\r\n\r\nimport org.bouncycastle.bcpg.ArmoredOutputStream;\r\nimport org.bouncycastle.bcpg.CompressionAlgorithmTags;\r\nimport org.bouncycastle.bcpg.SymmetricKeyAlgorithmTags;\r\nimport org.bouncycastle.jce.provider.BouncyCastleProvider;\r\nimport org.bouncycastle.openpgp.PGPCompressedData;\r\nimport org.bouncycastle.openpgp.PGPCompressedDataGenerator;\r\nimport org.bouncycastle.openpgp.PGPEncryptedDataGenerator;\r\nimport org.bouncycastle.openpgp.PGPEncryptedDataList;\r\nimport org.bouncycastle.openpgp.PGPException;\r\nimport org.bouncycastle.openpgp.PGPLiteralData;\r\nimport org.bouncycastle.openpgp.PGPOnePassSignatureList;\r\nimport org.bouncycastle.openpgp.PGPPrivateKey;\r\nimport org.bouncycastle.openpgp.PGPPublicKey;\r\nimport org.bouncycastle.openpgp.PGPPublicKeyEncryptedData;\r\nimport org.bouncycastle.openpgp.PGPSecretKeyRingCollection;\r\nimport org.bouncycastle.openpgp.PGPUtil;\r\nimport org.bouncycastle.openpgp.jcajce.JcaPGPObjectFactory;\r\nimport org.bouncycastle.openpgp.operator.jcajce.JcaKeyFingerprintCalculator;\r\nimport org.bouncycastle.openpgp.operator.jcajce.JcePGPDataEncryptorBuilder;\r\nimport org.bouncycastle.openpgp.operator.jcajce.JcePublicKeyDataDecryptorFactoryBuilder;\r\nimport org.bouncycastle.openpgp.operator.jcajce.JcePublicKeyKeyEncryptionMethodGenerator;\r\nimport org.bouncycastle.util.io.Streams;\r\n\r\npublic class PGPDecryption {\r\n\tpublic static void decryptFile(String inputFileName, String keyFileName, char[] passwd, String defaultFileName)\r\n\t\t\tthrows IOException, NoSuchProviderException {\r\n\t\tSecurity.addProvider(new BouncyCastleProvider());\r\n\t\t\r\n\t\tInputStream in = new BufferedInputStream(new FileInputStream(inputFileName));\r\n\t\tInputStream keyIn = new BufferedInputStream(new FileInputStream(keyFileName));\r\n\t\tdecryptFiles(in, keyIn, passwd, defaultFileName);\r\n\t\tSystem.out.print(&quot;Default File Name : &quot;+ defaultFileName);\r\n\t\tkeyIn.close();\r\n\t\tin.close();\r\n\t}\r\n\r\n\t/**\r\n\t * decrypt the passed in message stream\r\n\t */\r\n\tpublic static void decryptFiles(InputStream in, InputStream keyIn, char[] passwd, String defaultFileName)\r\n\t\t\tthrows IOException, NoSuchProviderException {\r\n\t\tin = PGPUtil.getDecoderStream(in);\r\n\r\n\t\ttry {\r\n\t\t\tJcaPGPObjectFactory pgpF = new JcaPGPObjectFactory(in);\r\n\t\t\tPGPEncryptedDataList enc;\r\n\r\n\t\t\tObject o = pgpF.nextObject();\r\n\t\t\t//\r\n\t\t\t// the first object might be a PGP marker packet.\r\n\t\t\t//\r\n\t\t\tif (o instanceof PGPEncryptedDataList) {\r\n\t\t\t\tenc = (PGPEncryptedDataList) o;\r\n\t\t\t} else {\r\n\t\t\t\tenc = (PGPEncryptedDataList) pgpF.nextObject();\r\n\t\t\t}\r\n\r\n\t\t\t//\r\n\t\t\t// find the secret key\r\n\t\t\t//\r\n\t\t\tIterator it = enc.getEncryptedDataObjects();\r\n\t\t\tPGPPrivateKey sKey = null;\r\n\t\t\tPGPPublicKeyEncryptedData pbe = null;\r\n\t\t\tPGPSecretKeyRingCollection pgpSec = new PGPSecretKeyRingCollection(PGPUtil.getDecoderStream(keyIn),\r\n\t\t\t\t\tnew JcaKeyFingerprintCalculator());\r\n\r\n\t\t\twhile (sKey == null &amp;&amp; it.hasNext()) {\r\n\t\t\t\tpbe = (PGPPublicKeyEncryptedData) it.next();\r\n\r\n\t\t\t\tsKey = PGPUtilE.findSecretKey(pgpSec, pbe.getKeyID(), passwd);\r\n\t\t\t}\r\n\r\n\t\t\tif (sKey == null) {\r\n\t\t\t\tthrow new IllegalArgumentException(&quot;secret key for message not found.&quot;);\r\n\t\t\t}\r\n\r\n\t\t\tInputStream clear = pbe\r\n\t\t\t\t\t.getDataStream(new JcePublicKeyDataDecryptorFactoryBuilder().setProvider(&quot;BC&quot;).build(sKey));\r\n\r\n\t\t\tJcaPGPObjectFactory plainFact = new JcaPGPObjectFactory(clear);\r\n\r\n\t\t\tPGPCompressedData cData = (PGPCompressedData) plainFact.nextObject();\r\n\r\n\t\t\tInputStream compressedStream = new BufferedInputStream(cData.getDataStream());\r\n\t\t\tJcaPGPObjectFactory pgpFact = new JcaPGPObjectFactory(compressedStream);\r\n\r\n\t\t\tObject message = pgpFact.nextObject();\r\n\r\n\t\t\tif (message instanceof PGPLiteralData) {\r\n\t\t\t\tPGPLiteralData ld = (PGPLiteralData) message;\r\n\r\n\t\t\t\tString outFileName = ld.getFileName();\r\n\t\t\t\tif (outFileName.length() == 0) {\r\n\t\t\t\t\toutFileName = defaultFileName;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tInputStream unc = ld.getInputStream();\r\n\t\t\t\tOutputStream fOut = new BufferedOutputStream(new FileOutputStream(outFileName));\r\n\r\n\t\t\t\tStreams.pipeAll(unc, fOut);\r\n\r\n\t\t\t\tfOut.close();\r\n\t\t\t} else if (message instanceof PGPOnePassSignatureList) {\r\n\t\t\t\tthrow new PGPException(&quot;encrypted message contains a signed message - not literal data.&quot;);\r\n\t\t\t} else {\r\n\t\t\t\tthrow new PGPException(&quot;message is not a simple encrypted file - type unknown.&quot;);\r\n\t\t\t}\r\n\r\n\t\t\tif (pbe.isIntegrityProtected()) {\r\n\t\t\t\tif (!pbe.verify()) {\r\n\t\t\t\t\tSystem.err.println(&quot;message failed integrity check&quot;);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tSystem.err.println(&quot;message integrity check passed&quot;);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tSystem.err.println(&quot;no message integrity check&quot;);\r\n\t\t\t}\r\n\t\t} catch (PGPException e) {\r\n\t\t\tSystem.err.println(e);\r\n\t\t\tif (e.getUnderlyingException() != null) {\r\n\t\t\t\te.getUnderlyingException().printStackTrace();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate static void encryptFile(String outputFileName, String inputFileName, String encKeyFileName, boolean armor,\r\n\t\t\tboolean withIntegrityCheck) throws IOException, NoSuchProviderException, PGPException {\r\n\t\tOutputStream out = new BufferedOutputStream(new FileOutputStream(outputFileName));\r\n\t\tPGPPublicKey encKey = PGPUtilE.readPublicKey(encKeyFileName);\r\n\t\tencryptFile(out, inputFileName, encKey, armor, withIntegrityCheck);\r\n\t\tout.close();\r\n\t}\r\n\r\n\tprivate static void encryptFile(OutputStream out, String fileName, PGPPublicKey encKey, boolean armor,\r\n\t\t\tboolean withIntegrityCheck) throws IOException, NoSuchProviderException {\r\n\t\tif (armor) {\r\n\t\t\tout = new ArmoredOutputStream(out);\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\tPGPEncryptedDataGenerator cPk = new PGPEncryptedDataGenerator(\r\n\t\t\t\t\tnew JcePGPDataEncryptorBuilder(SymmetricKeyAlgorithmTags.CAST5).setWithIntegrityPacket(withIntegrityCheck)\r\n\t\t\t\t\t\t\t.setSecureRandom(new SecureRandom()).setProvider(&quot;BC&quot;));\r\n\r\n\t\t\tcPk.addMethod(new JcePublicKeyKeyEncryptionMethodGenerator(encKey).setProvider(&quot;BC&quot;));\r\n\r\n\t\t\tOutputStream cOut = cPk.open(out, new byte[1 &lt;&lt; 16]);\r\n\r\n\t\t\tPGPCompressedDataGenerator comData = new PGPCompressedDataGenerator(CompressionAlgorithmTags.ZIP);\r\n\r\n\t\t\tPGPUtil.writeFileToLiteralData(comData.open(cOut), PGPLiteralData.BINARY, new File(fileName),\r\n\t\t\t\t\tnew byte[1 &lt;&lt; 16]);\r\n\r\n\t\t\tcomData.close();\r\n\r\n\t\t\tcOut.close();\r\n\r\n\t\t\tif (armor) {\r\n\t\t\t\tout.close();\r\n\t\t\t}\r\n\t\t} catch (PGPException e) {\r\n\t\t\tSystem.err.println(e);\r\n\t\t\tif (e.getUnderlyingException() != null) {\r\n\t\t\t\te.getUnderlyingException().printStackTrace();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic static void main(String[] args) throws Exception {\r\n\t\tSecurity.addProvider(new BouncyCastleProvider());\r\n\r\n\t\tif (args.length == 0) {\r\n\t\t\tSystem.err.println(\r\n\t\t\t\t\t&quot;usage: PGPDecryption -d file [secretKeyFile passPhrase|pubKeyFile]&quot;);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (args[0].equals(&quot;-e&quot;)) {\r\n\t\t\tif (args[1].equals(&quot;-a&quot;) || args[1].equals(&quot;-ai&quot;) || args[1].equals(&quot;-ia&quot;)) {\r\n\t\t\t\tencryptFile(args[2] + &quot;.asc&quot;, args[2], args[3], true, (args[1].indexOf(&#39;i&#39;) &gt; 0));\r\n\t\t\t} else if (args[1].equals(&quot;-i&quot;)) {\r\n\t\t\t\tencryptFile(args[2] + &quot;.bpg&quot;, args[2], args[3], false, true);\r\n\t\t\t} else {\r\n\t\t\t\tencryptFile(args[1] + &quot;.bpg&quot;, args[1], args[2], false, false);\r\n\t\t\t}\r\n\t\t} else if (args[0].equals(&quot;-d&quot;)) {\r\n\t\t\tdecryptFile(args[1], args[2], args[3].toCharArray(), new File(args[1]).getName() + &quot;.out&quot;);\r\n\t\t} else {\r\n\t\t\tSystem.err.println(\r\n\t\t\t\t\t&quot;usage: PGPDecryption -d|-e [-a|ai] file [secretKeyFile passPhrase|pubKeyFile]&quot;);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n```\r\n\r\nSCRIPT INCLUDE :\r\n\r\n```\r\n\r\nvar ProcessPGP = Class.create();\r\n\r\nProcessPGP.prototype = {\r\n\r\n    initialize: function() {\r\n      \r\n        this.Pgp = Packages.pgpDecrypt.PGPDecryption.decryptFile;\r\n\r\n        this.inputFile = probe.getParameter(&quot;inputFile&quot;);\r\n        this.secretFile = probe.getParameter(&quot;secretFile&quot;);\r\n        this.passPhase = probe.getParameter(&quot;passPhase&quot;);\r\n        this.defaultName = probe.getParameter(&quot;defaultName&quot;);\r\n\r\n    },\r\n\r\n    execute: function() {\r\n\r\n        var pgpObj = new this.Pgp(this.inputFile, this.secretFile, this.passPhase, this.defaultName);\r\n\r\n    },\r\n\r\n    type: ProcessPGP\r\n};\r\n\r\n```\r\n\r\nPROBE :\r\n\r\n```\r\n\r\nvar jspr = new JavascriptProbe(&#39;ANIRUDGU-68LCS_Dev1&#39;);\r\njspr.setName(&#39;TestPGPDemo5&#39;);\r\njspr.setJavascript(&#39;var pdf = new ProcessPGP(); res = pdf.execute();&#39;);\r\njspr.addParameter(&quot;inputFile&quot;, &quot;C:\\Users\\anirudgu\\Desktop\\PGPTestKey\\TestRun2.pgp&quot;);\r\njspr.addParameter(&quot;secretFile&quot;, &quot;C:\\Users\\anirudgu\\Desktop\\PGPTestKey\\anirudguciscocomprivate.asc&quot;);\r\njspr.addParameter(&quot;passPhase&quot;, &quot;Hello&quot;);\r\njspr.addParameter(&quot;defaultName&quot;, &quot;FilefromProbe&quot;);\r\njspr.create();\r\n\r\n```\r\n\r\nBut I am facing the below mentioned error :\r\n\r\n```\r\n08/22/19 23:21:58 (097) Worker-Standard:JavascriptProbe-ce4567ebdb9b330045bb9b81ca961910 WARNING *** WARNING *** org.mozilla.javascript.EvaluatorException: Can&#39;t find method pgpDecrypt.PGPDecryption.decryptFile(java.lang.String,java.lang.String,java.lang.String,java.lang.String). (script_include:ProcessPGP; line 32)\r\n   EvaluatorException(var pdf = new ProcessPGP(); res = pdf.execute();)\r\n```","title":"Calling a java jar method via mid server probe designed in javascript","body":"<p>I'm setting up an environment where I pass 4 parameters (Encrypted file, Key File, Pass Phase and Default File name) to a .Jar and it decrypts the file.\nI have achieved it via Bouncycastle API and it works fine on the eclipse IDE.</p>\n\n<p>Now I have to set this up in my servicenow mid-server.</p>\n\n<p>So the javascript probe should call this jar file and pass the parameters as strings and the encrypted file (which resides on the mid-server) gets decrypted.</p>\n\n<p>I have tried creating a mid-server script include in servicenow and a probe but it returns with an error that the method is not found (which is actually there)</p>\n\n<p>CLASS INSIDE .JAR</p>\n\n<pre><code>package pgpDecrypt;\n\nimport java.io.BufferedInputStream;\nimport java.io.BufferedOutputStream;\nimport java.io.File;\nimport java.io.FileInputStream;\nimport java.io.FileOutputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.OutputStream;\nimport java.security.NoSuchProviderException;\nimport java.security.SecureRandom;\nimport java.security.Security;\nimport java.util.Iterator;\n\nimport org.bouncycastle.bcpg.ArmoredOutputStream;\nimport org.bouncycastle.bcpg.CompressionAlgorithmTags;\nimport org.bouncycastle.bcpg.SymmetricKeyAlgorithmTags;\nimport org.bouncycastle.jce.provider.BouncyCastleProvider;\nimport org.bouncycastle.openpgp.PGPCompressedData;\nimport org.bouncycastle.openpgp.PGPCompressedDataGenerator;\nimport org.bouncycastle.openpgp.PGPEncryptedDataGenerator;\nimport org.bouncycastle.openpgp.PGPEncryptedDataList;\nimport org.bouncycastle.openpgp.PGPException;\nimport org.bouncycastle.openpgp.PGPLiteralData;\nimport org.bouncycastle.openpgp.PGPOnePassSignatureList;\nimport org.bouncycastle.openpgp.PGPPrivateKey;\nimport org.bouncycastle.openpgp.PGPPublicKey;\nimport org.bouncycastle.openpgp.PGPPublicKeyEncryptedData;\nimport org.bouncycastle.openpgp.PGPSecretKeyRingCollection;\nimport org.bouncycastle.openpgp.PGPUtil;\nimport org.bouncycastle.openpgp.jcajce.JcaPGPObjectFactory;\nimport org.bouncycastle.openpgp.operator.jcajce.JcaKeyFingerprintCalculator;\nimport org.bouncycastle.openpgp.operator.jcajce.JcePGPDataEncryptorBuilder;\nimport org.bouncycastle.openpgp.operator.jcajce.JcePublicKeyDataDecryptorFactoryBuilder;\nimport org.bouncycastle.openpgp.operator.jcajce.JcePublicKeyKeyEncryptionMethodGenerator;\nimport org.bouncycastle.util.io.Streams;\n\npublic class PGPDecryption {\n    public static void decryptFile(String inputFileName, String keyFileName, char[] passwd, String defaultFileName)\n            throws IOException, NoSuchProviderException {\n        Security.addProvider(new BouncyCastleProvider());\n\n        InputStream in = new BufferedInputStream(new FileInputStream(inputFileName));\n        InputStream keyIn = new BufferedInputStream(new FileInputStream(keyFileName));\n        decryptFiles(in, keyIn, passwd, defaultFileName);\n        System.out.print(\"Default File Name : \"+ defaultFileName);\n        keyIn.close();\n        in.close();\n    }\n\n    /**\n     * decrypt the passed in message stream\n     */\n    public static void decryptFiles(InputStream in, InputStream keyIn, char[] passwd, String defaultFileName)\n            throws IOException, NoSuchProviderException {\n        in = PGPUtil.getDecoderStream(in);\n\n        try {\n            JcaPGPObjectFactory pgpF = new JcaPGPObjectFactory(in);\n            PGPEncryptedDataList enc;\n\n            Object o = pgpF.nextObject();\n            //\n            // the first object might be a PGP marker packet.\n            //\n            if (o instanceof PGPEncryptedDataList) {\n                enc = (PGPEncryptedDataList) o;\n            } else {\n                enc = (PGPEncryptedDataList) pgpF.nextObject();\n            }\n\n            //\n            // find the secret key\n            //\n            Iterator it = enc.getEncryptedDataObjects();\n            PGPPrivateKey sKey = null;\n            PGPPublicKeyEncryptedData pbe = null;\n            PGPSecretKeyRingCollection pgpSec = new PGPSecretKeyRingCollection(PGPUtil.getDecoderStream(keyIn),\n                    new JcaKeyFingerprintCalculator());\n\n            while (sKey == null &amp;&amp; it.hasNext()) {\n                pbe = (PGPPublicKeyEncryptedData) it.next();\n\n                sKey = PGPUtilE.findSecretKey(pgpSec, pbe.getKeyID(), passwd);\n            }\n\n            if (sKey == null) {\n                throw new IllegalArgumentException(\"secret key for message not found.\");\n            }\n\n            InputStream clear = pbe\n                    .getDataStream(new JcePublicKeyDataDecryptorFactoryBuilder().setProvider(\"BC\").build(sKey));\n\n            JcaPGPObjectFactory plainFact = new JcaPGPObjectFactory(clear);\n\n            PGPCompressedData cData = (PGPCompressedData) plainFact.nextObject();\n\n            InputStream compressedStream = new BufferedInputStream(cData.getDataStream());\n            JcaPGPObjectFactory pgpFact = new JcaPGPObjectFactory(compressedStream);\n\n            Object message = pgpFact.nextObject();\n\n            if (message instanceof PGPLiteralData) {\n                PGPLiteralData ld = (PGPLiteralData) message;\n\n                String outFileName = ld.getFileName();\n                if (outFileName.length() == 0) {\n                    outFileName = defaultFileName;\n                }\n\n                InputStream unc = ld.getInputStream();\n                OutputStream fOut = new BufferedOutputStream(new FileOutputStream(outFileName));\n\n                Streams.pipeAll(unc, fOut);\n\n                fOut.close();\n            } else if (message instanceof PGPOnePassSignatureList) {\n                throw new PGPException(\"encrypted message contains a signed message - not literal data.\");\n            } else {\n                throw new PGPException(\"message is not a simple encrypted file - type unknown.\");\n            }\n\n            if (pbe.isIntegrityProtected()) {\n                if (!pbe.verify()) {\n                    System.err.println(\"message failed integrity check\");\n                } else {\n                    System.err.println(\"message integrity check passed\");\n                }\n            } else {\n                System.err.println(\"no message integrity check\");\n            }\n        } catch (PGPException e) {\n            System.err.println(e);\n            if (e.getUnderlyingException() != null) {\n                e.getUnderlyingException().printStackTrace();\n            }\n        }\n    }\n\n    private static void encryptFile(String outputFileName, String inputFileName, String encKeyFileName, boolean armor,\n            boolean withIntegrityCheck) throws IOException, NoSuchProviderException, PGPException {\n        OutputStream out = new BufferedOutputStream(new FileOutputStream(outputFileName));\n        PGPPublicKey encKey = PGPUtilE.readPublicKey(encKeyFileName);\n        encryptFile(out, inputFileName, encKey, armor, withIntegrityCheck);\n        out.close();\n    }\n\n    private static void encryptFile(OutputStream out, String fileName, PGPPublicKey encKey, boolean armor,\n            boolean withIntegrityCheck) throws IOException, NoSuchProviderException {\n        if (armor) {\n            out = new ArmoredOutputStream(out);\n        }\n\n        try {\n            PGPEncryptedDataGenerator cPk = new PGPEncryptedDataGenerator(\n                    new JcePGPDataEncryptorBuilder(SymmetricKeyAlgorithmTags.CAST5).setWithIntegrityPacket(withIntegrityCheck)\n                            .setSecureRandom(new SecureRandom()).setProvider(\"BC\"));\n\n            cPk.addMethod(new JcePublicKeyKeyEncryptionMethodGenerator(encKey).setProvider(\"BC\"));\n\n            OutputStream cOut = cPk.open(out, new byte[1 &lt;&lt; 16]);\n\n            PGPCompressedDataGenerator comData = new PGPCompressedDataGenerator(CompressionAlgorithmTags.ZIP);\n\n            PGPUtil.writeFileToLiteralData(comData.open(cOut), PGPLiteralData.BINARY, new File(fileName),\n                    new byte[1 &lt;&lt; 16]);\n\n            comData.close();\n\n            cOut.close();\n\n            if (armor) {\n                out.close();\n            }\n        } catch (PGPException e) {\n            System.err.println(e);\n            if (e.getUnderlyingException() != null) {\n                e.getUnderlyingException().printStackTrace();\n            }\n        }\n    }\n\n    public static void main(String[] args) throws Exception {\n        Security.addProvider(new BouncyCastleProvider());\n\n        if (args.length == 0) {\n            System.err.println(\n                    \"usage: PGPDecryption -d file [secretKeyFile passPhrase|pubKeyFile]\");\n            return;\n        }\n\n        if (args[0].equals(\"-e\")) {\n            if (args[1].equals(\"-a\") || args[1].equals(\"-ai\") || args[1].equals(\"-ia\")) {\n                encryptFile(args[2] + \".asc\", args[2], args[3], true, (args[1].indexOf('i') &gt; 0));\n            } else if (args[1].equals(\"-i\")) {\n                encryptFile(args[2] + \".bpg\", args[2], args[3], false, true);\n            } else {\n                encryptFile(args[1] + \".bpg\", args[1], args[2], false, false);\n            }\n        } else if (args[0].equals(\"-d\")) {\n            decryptFile(args[1], args[2], args[3].toCharArray(), new File(args[1]).getName() + \".out\");\n        } else {\n            System.err.println(\n                    \"usage: PGPDecryption -d|-e [-a|ai] file [secretKeyFile passPhrase|pubKeyFile]\");\n        }\n    }\n}\n\n</code></pre>\n\n<p>SCRIPT INCLUDE :</p>\n\n<pre><code>\nvar ProcessPGP = Class.create();\n\nProcessPGP.prototype = {\n\n    initialize: function() {\n\n        this.Pgp = Packages.pgpDecrypt.PGPDecryption.decryptFile;\n\n        this.inputFile = probe.getParameter(\"inputFile\");\n        this.secretFile = probe.getParameter(\"secretFile\");\n        this.passPhase = probe.getParameter(\"passPhase\");\n        this.defaultName = probe.getParameter(\"defaultName\");\n\n    },\n\n    execute: function() {\n\n        var pgpObj = new this.Pgp(this.inputFile, this.secretFile, this.passPhase, this.defaultName);\n\n    },\n\n    type: ProcessPGP\n};\n\n</code></pre>\n\n<p>PROBE :</p>\n\n<pre><code>\nvar jspr = new JavascriptProbe('ANIRUDGU-68LCS_Dev1');\njspr.setName('TestPGPDemo5');\njspr.setJavascript('var pdf = new ProcessPGP(); res = pdf.execute();');\njspr.addParameter(\"inputFile\", \"C:\\Users\\anirudgu\\Desktop\\PGPTestKey\\TestRun2.pgp\");\njspr.addParameter(\"secretFile\", \"C:\\Users\\anirudgu\\Desktop\\PGPTestKey\\anirudguciscocomprivate.asc\");\njspr.addParameter(\"passPhase\", \"Hello\");\njspr.addParameter(\"defaultName\", \"FilefromProbe\");\njspr.create();\n\n</code></pre>\n\n<p>But I am facing the below mentioned error :</p>\n\n<pre><code>08/22/19 23:21:58 (097) Worker-Standard:JavascriptProbe-ce4567ebdb9b330045bb9b81ca961910 WARNING *** WARNING *** org.mozilla.javascript.EvaluatorException: Can't find method pgpDecrypt.PGPDecryption.decryptFile(java.lang.String,java.lang.String,java.lang.String,java.lang.String). (script_include:ProcessPGP; line 32)\n   EvaluatorException(var pdf = new ProcessPGP(); res = pdf.execute();)\n</code></pre>\n"},{"tags":["java","maven","exec-maven-plugin","maven-jar-plugin"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1640879240,"post_id":70533637,"comment_id":124682146,"body_markdown":"Is your project a spring boot project? If yes don&#39;t use exec and jar plugin use the spring-boot-maven-plugin instead that produces an executable jar....which is startable via `java -jar xyz.jar`...","body":"Is your project a spring boot project? If yes don&#39;t use exec and jar plugin use the spring-boot-maven-plugin instead that produces an executable jar....which is startable via <code>java -jar xyz.jar</code>..."},{"owner":{"account_id":12834353,"reputation":65,"user_id":9284489,"display_name":"Beanssss"},"score":0,"creation_date":1640936900,"post_id":70533637,"comment_id":124694033,"body_markdown":"i tried it, but the jar contains the same output like posted above.","body":"i tried it, but the jar contains the same output like posted above."},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1640940263,"post_id":70533637,"comment_id":124694653,"body_markdown":"Where should `BasicMavenApplication` ? Have you created a class like this including the appropriate package? How does that class look like? Best would be a full working example on Github or a link to your project....because you seemed to misunderstand the intention of a spring boot application also how to use it","body":"Where should <code>BasicMavenApplication</code> ? Have you created a class like this including the appropriate package? How does that class look like? Best would be a full working example on Github or a link to your project....because you seemed to misunderstand the intention of a spring boot application also how to use it"}],"owner":{"account_id":12834353,"reputation":65,"user_id":9284489,"display_name":"Beanssss"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":176,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1640878301,"creation_date":1640878301,"question_id":70533637,"body_markdown":"I am trying to start a jar from a dependency with the exec-maven-plugin \r\n\r\nThats the Code in my Project &quot;MainProject&quot; inside the POM\r\n\r\n    &lt;plugin&gt;\r\n       &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n       &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\r\n       &lt;version&gt;${exec-maven-plugin.version}&lt;/version&gt;\r\n       &lt;executions&gt;\r\n          &lt;execution&gt;\r\n             &lt;id&gt;generate-jpaentities&lt;/id&gt;\r\n             &lt;phase&gt;generate-sources&lt;/phase&gt;\r\n             &lt;goals&gt;\r\n                &lt;goal&gt;java&lt;/goal&gt;\r\n             &lt;/goals&gt;\r\n             &lt;configuration&gt;\r\n                &lt;mainClass&gt;basicMaven.BasicMavenApplication&lt;/mainClass&gt;\r\n                &lt;includePluginDependencies&gt;true&lt;/includePluginDependencies&gt;\r\n                &lt;includeProjectDependencies&gt;true&lt;/includeProjectDependencies&gt;\r\n             &lt;/configuration&gt;\r\n          &lt;/execution&gt;\r\n       &lt;/executions&gt;\r\n       &lt;dependencies&gt;\r\n          &lt;dependency&gt;\r\n             &lt;groupId&gt;basicProjects&lt;/groupId&gt;\r\n             &lt;artifactId&gt;BasicMaven&lt;/artifactId&gt;\r\n             &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n          &lt;/dependency&gt;\r\n       &lt;/dependencies&gt;\r\n    &lt;/plugin&gt;\r\n\r\nThats the Code in the BasicMaven Project\r\n\r\n         &lt;plugin&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;${maven-jar-plugin.version}&lt;/version&gt;\r\n            &lt;configuration&gt;\r\n               &lt;archive&gt;\r\n                  &lt;manifest&gt;\r\n                     &lt;mainClass&gt;basicMaven.BasicMavenApplication&lt;/mainClass&gt;\r\n                  &lt;/manifest&gt;\r\n               &lt;/archive&gt;\r\n            &lt;/configuration&gt;\r\n         &lt;/plugin&gt;\r\n\r\ni did an `&quot;mvn install&quot;` inside the basicMaven Project Folder. \r\n\r\nand tried to start the plugin inside my MainProject Folder with\r\n\r\n    mvn clean package \r\n\r\nBut i get the Error that the class is not found\r\n\r\n    [WARNING] \r\n    java.lang.ClassNotFoundException: basicMaven.BasicMavenApplication\r\n        at java.net.URLClassLoader.findClass (URLClassLoader.java:435)\r\n        at java.lang.ClassLoader.loadClass (ClassLoader.java:589)\r\n        at java.lang.ClassLoader.loadClass (ClassLoader.java:522)\r\n        at org.codehaus.mojo.exec.ExecJavaMojo$1.run (ExecJavaMojo.java:246)\r\n        at java.lang.Thread.run (Thread.java:832)\r\n\r\nso i looked up my .m2 folder \r\nThere is my BasicMaven jar File\r\n\r\nwhen i looked inside of it with &quot;jar -tf BasicMaven.jar&quot;\r\n\r\ni got the following output:\r\n\r\n    META-INF/\r\n    META-INF/MANIFEST.MF\r\n    org/\r\n    org/springframework/\r\n    org/springframework/boot/\r\n    org/springframework/boot/loader/\r\n    org/springframework/boot/loader/ClassPathIndexFile.class\r\n    org/springframework/boot/loader/ExecutableArchiveLauncher.class\r\n    org/springframework/boot/loader/JarLauncher.class\r\n    org/springframework/boot/loader/LaunchedURLClassLoader$DefinePackageCallType.class\r\n    org/springframework/boot/loader/LaunchedURLClassLoader$UseFastConnectionExceptionsEnumeration.class\r\n    org/springframework/boot/loader/LaunchedURLClassLoader.class\r\n    org/springframework/boot/loader/Launcher.class\r\n    org/springframework/boot/loader/MainMethodRunner.class\r\n    org/springframework/boot/loader/PropertiesLauncher$1.class\r\n    org/springframework/boot/loader/PropertiesLauncher$ArchiveEntryFilter.class\r\n    org/springframework/boot/loader/PropertiesLauncher$ClassPathArchives.class\r\n    org/springframework/boot/loader/PropertiesLauncher$PrefixMatchingArchiveFilter.class\r\n    org/springframework/boot/loader/PropertiesLauncher.class\r\n    org/springframework/boot/loader/WarLauncher.class\r\n    org/springframework/boot/loader/archive/\r\n    org/springframework/boot/loader/archive/Archive$Entry.class\r\n    org/springframework/boot/loader/archive/Archive$EntryFilter.class\r\n    org/springframework/boot/loader/archive/Archive.class\r\n    org/springframework/boot/loader/archive/ExplodedArchive$AbstractIterator.class\r\n    org/springframework/boot/loader/archive/ExplodedArchive$ArchiveIterator.class\r\n    org/springframework/boot/loader/archive/ExplodedArchive$EntryIterator.class\r\n    org/springframework/boot/loader/archive/ExplodedArchive$FileEntry.class\r\n    org/springframework/boot/loader/archive/ExplodedArchive$SimpleJarFileArchive.class\r\n    org/springframework/boot/loader/archive/ExplodedArchive.class\r\n    org/springframework/boot/loader/archive/JarFileArchive$AbstractIterator.class\r\n    org/springframework/boot/loader/archive/JarFileArchive$EntryIterator.class\r\n    org/springframework/boot/loader/archive/JarFileArchive$JarFileEntry.class\r\n    org/springframework/boot/loader/archive/JarFileArchive$NestedArchiveIterator.class\r\n    org/springframework/boot/loader/archive/JarFileArchive.class\r\n    org/springframework/boot/loader/data/\r\n    org/springframework/boot/loader/data/RandomAccessData.class\r\n    org/springframework/boot/loader/data/RandomAccessDataFile$1.class\r\n    org/springframework/boot/loader/data/RandomAccessDataFile$DataInputStream.class\r\n    org/springframework/boot/loader/data/RandomAccessDataFile$FileAccess.class\r\n    org/springframework/boot/loader/data/RandomAccessDataFile.class\r\n    org/springframework/boot/loader/jar/\r\n    org/springframework/boot/loader/jar/AbstractJarFile$JarFileType.class\r\n    org/springframework/boot/loader/jar/AbstractJarFile.class\r\n    org/springframework/boot/loader/jar/AsciiBytes.class\r\n    org/springframework/boot/loader/jar/Bytes.class\r\n    org/springframework/boot/loader/jar/CentralDirectoryEndRecord$1.class\r\n    org/springframework/boot/loader/jar/CentralDirectoryEndRecord$Zip64End.class\r\n    org/springframework/boot/loader/jar/CentralDirectoryEndRecord$Zip64Locator.class\r\n    org/springframework/boot/loader/jar/CentralDirectoryEndRecord.class\r\n    org/springframework/boot/loader/jar/CentralDirectoryFileHeader.class\r\n    org/springframework/boot/loader/jar/CentralDirectoryParser.class\r\n    org/springframework/boot/loader/jar/CentralDirectoryVisitor.class\r\n    org/springframework/boot/loader/jar/FileHeader.class\r\n    org/springframework/boot/loader/jar/Handler.class\r\n    org/springframework/boot/loader/jar/JarEntry.class\r\n    org/springframework/boot/loader/jar/JarEntryCertification.class\r\n    org/springframework/boot/loader/jar/JarEntryFilter.class\r\n    org/springframework/boot/loader/jar/JarFile$1.class\r\n    org/springframework/boot/loader/jar/JarFile$JarEntryEnumeration.class\r\n    org/springframework/boot/loader/jar/JarFile.class\r\n    org/springframework/boot/loader/jar/JarFileEntries$1.class\r\n    org/springframework/boot/loader/jar/JarFileEntries$EntryIterator.class\r\n    org/springframework/boot/loader/jar/JarFileEntries.class\r\n    org/springframework/boot/loader/jar/JarFileWrapper.class\r\n    org/springframework/boot/loader/jar/JarURLConnection$1.class\r\n    org/springframework/boot/loader/jar/JarURLConnection$JarEntryName.class\r\n    org/springframework/boot/loader/jar/JarURLConnection.class\r\n    org/springframework/boot/loader/jar/StringSequence.class\r\n    org/springframework/boot/loader/jar/ZipInflaterInputStream.class\r\n    org/springframework/boot/loader/jarmode/\r\n    org/springframework/boot/loader/jarmode/JarMode.class\r\n    org/springframework/boot/loader/jarmode/JarModeLauncher.class\r\n    org/springframework/boot/loader/jarmode/TestJarMode.class\r\n    org/springframework/boot/loader/util/\r\n    org/springframework/boot/loader/util/SystemPropertyUtils.class\r\n    BOOT-INF/\r\n    BOOT-INF/classes/\r\n    BOOT-INF/classes/xsd/\r\n    BOOT-INF/classes/com/\r\n    BOOT-INF/classes/com/maven/\r\n    BOOT-INF/classes/com/maven/common/\r\n    BOOT-INF/classes/com/maven/common/BasicMaven/\r\n    BOOT-INF/classes/com/maven/common/BasicMaven/util/\r\n    BOOT-INF/classes/swagger/\r\n    BOOT-INF/classes/basicMaven/\r\n    BOOT-INF/classes/basicMaven/api/\r\n    BOOT-INF/classes/basicMaven/api/type/\r\n    META-INF/maven/\r\n    META-INF/maven/basicProjects/\r\n    META-INF/maven/basicProjects/BasicMaven/\r\n\r\nI think that there should be something like \r\n\r\n    basicMaven/BasicMavenApplication\r\n\r\nbut i dont know how to fix it\r\n","title":"exec-maven-plugin ClassNotFoundException","body":"<p>I am trying to start a jar from a dependency with the exec-maven-plugin</p>\n<p>Thats the Code in my Project &quot;MainProject&quot; inside the POM</p>\n<pre><code>&lt;plugin&gt;\n   &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n   &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\n   &lt;version&gt;${exec-maven-plugin.version}&lt;/version&gt;\n   &lt;executions&gt;\n      &lt;execution&gt;\n         &lt;id&gt;generate-jpaentities&lt;/id&gt;\n         &lt;phase&gt;generate-sources&lt;/phase&gt;\n         &lt;goals&gt;\n            &lt;goal&gt;java&lt;/goal&gt;\n         &lt;/goals&gt;\n         &lt;configuration&gt;\n            &lt;mainClass&gt;basicMaven.BasicMavenApplication&lt;/mainClass&gt;\n            &lt;includePluginDependencies&gt;true&lt;/includePluginDependencies&gt;\n            &lt;includeProjectDependencies&gt;true&lt;/includeProjectDependencies&gt;\n         &lt;/configuration&gt;\n      &lt;/execution&gt;\n   &lt;/executions&gt;\n   &lt;dependencies&gt;\n      &lt;dependency&gt;\n         &lt;groupId&gt;basicProjects&lt;/groupId&gt;\n         &lt;artifactId&gt;BasicMaven&lt;/artifactId&gt;\n         &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n      &lt;/dependency&gt;\n   &lt;/dependencies&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>Thats the Code in the BasicMaven Project</p>\n<pre><code>     &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n        &lt;version&gt;${maven-jar-plugin.version}&lt;/version&gt;\n        &lt;configuration&gt;\n           &lt;archive&gt;\n              &lt;manifest&gt;\n                 &lt;mainClass&gt;basicMaven.BasicMavenApplication&lt;/mainClass&gt;\n              &lt;/manifest&gt;\n           &lt;/archive&gt;\n        &lt;/configuration&gt;\n     &lt;/plugin&gt;\n</code></pre>\n<p>i did an <code>&quot;mvn install&quot;</code> inside the basicMaven Project Folder.</p>\n<p>and tried to start the plugin inside my MainProject Folder with</p>\n<pre><code>mvn clean package \n</code></pre>\n<p>But i get the Error that the class is not found</p>\n<pre><code>[WARNING] \njava.lang.ClassNotFoundException: basicMaven.BasicMavenApplication\n    at java.net.URLClassLoader.findClass (URLClassLoader.java:435)\n    at java.lang.ClassLoader.loadClass (ClassLoader.java:589)\n    at java.lang.ClassLoader.loadClass (ClassLoader.java:522)\n    at org.codehaus.mojo.exec.ExecJavaMojo$1.run (ExecJavaMojo.java:246)\n    at java.lang.Thread.run (Thread.java:832)\n</code></pre>\n<p>so i looked up my .m2 folder\nThere is my BasicMaven jar File</p>\n<p>when i looked inside of it with &quot;jar -tf BasicMaven.jar&quot;</p>\n<p>i got the following output:</p>\n<pre><code>META-INF/\nMETA-INF/MANIFEST.MF\norg/\norg/springframework/\norg/springframework/boot/\norg/springframework/boot/loader/\norg/springframework/boot/loader/ClassPathIndexFile.class\norg/springframework/boot/loader/ExecutableArchiveLauncher.class\norg/springframework/boot/loader/JarLauncher.class\norg/springframework/boot/loader/LaunchedURLClassLoader$DefinePackageCallType.class\norg/springframework/boot/loader/LaunchedURLClassLoader$UseFastConnectionExceptionsEnumeration.class\norg/springframework/boot/loader/LaunchedURLClassLoader.class\norg/springframework/boot/loader/Launcher.class\norg/springframework/boot/loader/MainMethodRunner.class\norg/springframework/boot/loader/PropertiesLauncher$1.class\norg/springframework/boot/loader/PropertiesLauncher$ArchiveEntryFilter.class\norg/springframework/boot/loader/PropertiesLauncher$ClassPathArchives.class\norg/springframework/boot/loader/PropertiesLauncher$PrefixMatchingArchiveFilter.class\norg/springframework/boot/loader/PropertiesLauncher.class\norg/springframework/boot/loader/WarLauncher.class\norg/springframework/boot/loader/archive/\norg/springframework/boot/loader/archive/Archive$Entry.class\norg/springframework/boot/loader/archive/Archive$EntryFilter.class\norg/springframework/boot/loader/archive/Archive.class\norg/springframework/boot/loader/archive/ExplodedArchive$AbstractIterator.class\norg/springframework/boot/loader/archive/ExplodedArchive$ArchiveIterator.class\norg/springframework/boot/loader/archive/ExplodedArchive$EntryIterator.class\norg/springframework/boot/loader/archive/ExplodedArchive$FileEntry.class\norg/springframework/boot/loader/archive/ExplodedArchive$SimpleJarFileArchive.class\norg/springframework/boot/loader/archive/ExplodedArchive.class\norg/springframework/boot/loader/archive/JarFileArchive$AbstractIterator.class\norg/springframework/boot/loader/archive/JarFileArchive$EntryIterator.class\norg/springframework/boot/loader/archive/JarFileArchive$JarFileEntry.class\norg/springframework/boot/loader/archive/JarFileArchive$NestedArchiveIterator.class\norg/springframework/boot/loader/archive/JarFileArchive.class\norg/springframework/boot/loader/data/\norg/springframework/boot/loader/data/RandomAccessData.class\norg/springframework/boot/loader/data/RandomAccessDataFile$1.class\norg/springframework/boot/loader/data/RandomAccessDataFile$DataInputStream.class\norg/springframework/boot/loader/data/RandomAccessDataFile$FileAccess.class\norg/springframework/boot/loader/data/RandomAccessDataFile.class\norg/springframework/boot/loader/jar/\norg/springframework/boot/loader/jar/AbstractJarFile$JarFileType.class\norg/springframework/boot/loader/jar/AbstractJarFile.class\norg/springframework/boot/loader/jar/AsciiBytes.class\norg/springframework/boot/loader/jar/Bytes.class\norg/springframework/boot/loader/jar/CentralDirectoryEndRecord$1.class\norg/springframework/boot/loader/jar/CentralDirectoryEndRecord$Zip64End.class\norg/springframework/boot/loader/jar/CentralDirectoryEndRecord$Zip64Locator.class\norg/springframework/boot/loader/jar/CentralDirectoryEndRecord.class\norg/springframework/boot/loader/jar/CentralDirectoryFileHeader.class\norg/springframework/boot/loader/jar/CentralDirectoryParser.class\norg/springframework/boot/loader/jar/CentralDirectoryVisitor.class\norg/springframework/boot/loader/jar/FileHeader.class\norg/springframework/boot/loader/jar/Handler.class\norg/springframework/boot/loader/jar/JarEntry.class\norg/springframework/boot/loader/jar/JarEntryCertification.class\norg/springframework/boot/loader/jar/JarEntryFilter.class\norg/springframework/boot/loader/jar/JarFile$1.class\norg/springframework/boot/loader/jar/JarFile$JarEntryEnumeration.class\norg/springframework/boot/loader/jar/JarFile.class\norg/springframework/boot/loader/jar/JarFileEntries$1.class\norg/springframework/boot/loader/jar/JarFileEntries$EntryIterator.class\norg/springframework/boot/loader/jar/JarFileEntries.class\norg/springframework/boot/loader/jar/JarFileWrapper.class\norg/springframework/boot/loader/jar/JarURLConnection$1.class\norg/springframework/boot/loader/jar/JarURLConnection$JarEntryName.class\norg/springframework/boot/loader/jar/JarURLConnection.class\norg/springframework/boot/loader/jar/StringSequence.class\norg/springframework/boot/loader/jar/ZipInflaterInputStream.class\norg/springframework/boot/loader/jarmode/\norg/springframework/boot/loader/jarmode/JarMode.class\norg/springframework/boot/loader/jarmode/JarModeLauncher.class\norg/springframework/boot/loader/jarmode/TestJarMode.class\norg/springframework/boot/loader/util/\norg/springframework/boot/loader/util/SystemPropertyUtils.class\nBOOT-INF/\nBOOT-INF/classes/\nBOOT-INF/classes/xsd/\nBOOT-INF/classes/com/\nBOOT-INF/classes/com/maven/\nBOOT-INF/classes/com/maven/common/\nBOOT-INF/classes/com/maven/common/BasicMaven/\nBOOT-INF/classes/com/maven/common/BasicMaven/util/\nBOOT-INF/classes/swagger/\nBOOT-INF/classes/basicMaven/\nBOOT-INF/classes/basicMaven/api/\nBOOT-INF/classes/basicMaven/api/type/\nMETA-INF/maven/\nMETA-INF/maven/basicProjects/\nMETA-INF/maven/basicProjects/BasicMaven/\n</code></pre>\n<p>I think that there should be something like</p>\n<pre><code>basicMaven/BasicMavenApplication\n</code></pre>\n<p>but i dont know how to fix it</p>\n"},{"tags":["java","jdbc","java-8","jdbctemplate","query-timeout"],"comments":[{"owner":{"account_id":8174680,"reputation":2260,"user_id":6153860,"accept_rate":40,"display_name":"Young Emil"},"score":0,"creation_date":1603262530,"post_id":61910310,"comment_id":113977508,"body_markdown":"it is strange how it doesnt specify whether it is seconds or milliseconds. You have to base on people&#39;s solutions on the internet. :)","body":"it is strange how it doesnt specify whether it is seconds or milliseconds. You have to base on people&#39;s solutions on the internet. :)"},{"owner":{"account_id":7826453,"reputation":3061,"user_id":5917837,"accept_rate":29,"display_name":"mantri"},"score":0,"creation_date":1637305622,"post_id":61910310,"comment_id":123795777,"body_markdown":"@Young Emil `\nStatement.setQueryTimeout` mentions the unit of input param","body":"@Young Emil ` Statement.setQueryTimeout` mentions the unit of input param"},{"owner":{"account_id":8174680,"reputation":2260,"user_id":6153860,"accept_rate":40,"display_name":"Young Emil"},"score":0,"creation_date":1637311716,"post_id":61910310,"comment_id":123797586,"body_markdown":"@mantri, I think the question targets `JdbcTemplate.setQueryTimeout` and not that of `Statement` class.","body":"@mantri, I think the question targets <code>JdbcTemplate.setQueryTimeout</code> and not that of <code>Statement</code> class."}],"answers":[{"tags":[],"owner":{"account_id":6408227,"reputation":2256,"user_id":4968749,"accept_rate":100,"display_name":"Hassam Abdelillah"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1589977065,"creation_date":1589977065,"answer_id":61912940,"question_id":61910310,"body_markdown":"After checking the similar `setQueryTimeout()` from `java.sql.Statement` class, my guess is that they behave the same.\r\n\r\n    setQueryTimeout(int seconds)\r\n\r\nA good way to start with similar issues is to check a working example on the internet. It helps a lot!","title":"jdbcTemplate setQueryTimeout value type","body":"<p>After checking the similar <code>setQueryTimeout()</code> from <code>java.sql.Statement</code> class, my guess is that they behave the same.</p>\n\n<pre><code>setQueryTimeout(int seconds)\n</code></pre>\n\n<p>A good way to start with similar issues is to check a working example on the internet. It helps a lot!</p>\n"}],"owner":{"account_id":3938317,"reputation":4776,"user_id":3253853,"accept_rate":66,"display_name":"Alex Man"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3175,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1640878112,"creation_date":1589969010,"question_id":61910310,"body_markdown":"I would like to know what is the type of value which we need to pass in `public void setQueryTimeout(int queryTimeout)` in `jdbcTemplate`. The document says \r\n\r\n    &gt; Set the query timeout for statements that this JdbcTemplate executes.\r\n    &gt; &lt;p&gt;Default is -1, indicating to use the JDBC driver&#39;s default (i.e. to\r\n    &gt; not pass a specific query timeout setting on the driver). &lt;p&gt;Note: Any\r\n    &gt; timeout specified here will be overridden by the remaining transaction\r\n    &gt; timeout when executing within a transaction that has a timeout\r\n    &gt; specified at the transaction level. @see\r\n    &gt; java.sql.Statement#setQueryTimeout\r\n\r\nLike to know if **queryTimeout** is `milliseconds`, `seconds` or `minutes`","title":"jdbcTemplate setQueryTimeout value type","body":"<p>I would like to know what is the type of value which we need to pass in <code>public void setQueryTimeout(int queryTimeout)</code> in <code>jdbcTemplate</code>. The document says </p>\n\n<pre><code>&gt; Set the query timeout for statements that this JdbcTemplate executes.\n&gt; &lt;p&gt;Default is -1, indicating to use the JDBC driver's default (i.e. to\n&gt; not pass a specific query timeout setting on the driver). &lt;p&gt;Note: Any\n&gt; timeout specified here will be overridden by the remaining transaction\n&gt; timeout when executing within a transaction that has a timeout\n&gt; specified at the transaction level. @see\n&gt; java.sql.Statement#setQueryTimeout\n</code></pre>\n\n<p>Like to know if <strong>queryTimeout</strong> is <code>milliseconds</code>, <code>seconds</code> or <code>minutes</code></p>\n"},{"tags":["java","spring-boot","spring-security","java-8"],"answers":[{"tags":[],"owner":{"account_id":6408227,"reputation":2256,"user_id":4968749,"accept_rate":100,"display_name":"Hassam Abdelillah"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1589738801,"creation_date":1589736665,"answer_id":61855989,"question_id":61854818,"body_markdown":"You can have them into separate configurations. Still, they must be annotated with `@Order` :\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class SimpleSecurityConfiguration {\r\n    \r\n        @Order(1)\r\n        @Configuration\r\n        public static class AdminConfiguration extends WebSecurityConfigurerAdapter {\r\n            @Override\r\n            protected void configure(HttpSecurity http) throws Exception {\r\n                http\r\n                    .antMatcher(&quot;/backend-admin/**&quot;)\r\n                    .authorizeRequests(authz -&gt; authz.anyRequest().permitAll())\r\n                    .login(login -&gt; login\r\n                        .loginUrl(&quot;/login/admin&quot;)\r\n                    );\r\n            }\r\n\r\n            @Override\r\n            protected void configure(AuthenticationManagerBuilder auth) {\r\n                auth.userDetailsService(adminDetailsService);\r\n            }\r\n        }\r\n    \r\n    \r\n        @Order(2)\r\n        @Configuration\r\n        public static class AdminConfiguration extends WebSecurityConfigurerAdapter {\r\n            @Override\r\n            protected void configure(HttpSecurity http) throws Exception {\r\n                http\r\n                    .antMatcher(&quot;/backend-user/**&quot;)\r\n                    .authorizeRequests(authz -&gt; authz.anyRequest().permitAll())\r\n                    .login(login -&gt; login\r\n                        .loginUrl(&quot;/login/user&quot;)\r\n                    );\r\n            }\r\n\r\n            @Override\r\n            protected void configure(AuthenticationManagerBuilder auth) {\r\n                auth.userDetailsService(userDetailsService);\r\n            }\r\n        }\r\n    }\r\n\r\nNote the use of lambda for constructing the login and the authorizations. Also, the code provided in the question **doesn&#39;t permit to distinguish which userService to use for each path**","title":"Can spring security specify different UserDetailsService instances for different paths?","body":"<p>You can have them into separate configurations. Still, they must be annotated with <code>@Order</code> :</p>\n\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class SimpleSecurityConfiguration {\n\n    @Order(1)\n    @Configuration\n    public static class AdminConfiguration extends WebSecurityConfigurerAdapter {\n        @Override\n        protected void configure(HttpSecurity http) throws Exception {\n            http\n                .antMatcher(\"/backend-admin/**\")\n                .authorizeRequests(authz -&gt; authz.anyRequest().permitAll())\n                .login(login -&gt; login\n                    .loginUrl(\"/login/admin\")\n                );\n        }\n\n        @Override\n        protected void configure(AuthenticationManagerBuilder auth) {\n            auth.userDetailsService(adminDetailsService);\n        }\n    }\n\n\n    @Order(2)\n    @Configuration\n    public static class AdminConfiguration extends WebSecurityConfigurerAdapter {\n        @Override\n        protected void configure(HttpSecurity http) throws Exception {\n            http\n                .antMatcher(\"/backend-user/**\")\n                .authorizeRequests(authz -&gt; authz.anyRequest().permitAll())\n                .login(login -&gt; login\n                    .loginUrl(\"/login/user\")\n                );\n        }\n\n        @Override\n        protected void configure(AuthenticationManagerBuilder auth) {\n            auth.userDetailsService(userDetailsService);\n        }\n    }\n}\n</code></pre>\n\n<p>Note the use of lambda for constructing the login and the authorizations. Also, the code provided in the question <strong>doesn't permit to distinguish which userService to use for each path</strong></p>\n"}],"owner":{"account_id":13668626,"reputation":19,"user_id":9861823,"display_name":"Xavier. Sun"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":332,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":61855989,"answer_count":1,"score":0,"last_activity_date":1640878051,"creation_date":1589731463,"question_id":61854818,"body_markdown":"The following code is wrong, but I hope that one day it will be supported.\r\n\r\nOf course, I must first thank the developers of spring security and related components. Thank you for allowing us to write safe software so easily.\r\n\r\n```java\r\n@Configuration\r\nclass SpringSecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\n    @Autowired\r\n    @Qualifier(&quot;AdminerDetailsService&quot;)\r\n    UserDetailsService adminerDetailsService;\r\n\r\n    @Autowired\r\n    @Qualifier(&quot;UserDetailsService&quot;)\r\n    UserDetailsService userDetailsService;\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http\r\n                .csrf().disable()\r\n                .authorizeRequests()\r\n                .antMatchers(&quot;/backend-admin/**&quot;).hasRole(&quot;REGULAR&quot;)\r\n                .userDetailsService(adminerDetailsService)\r\n                .loginProcessingUrl(&quot;/login/admin&quot;)\r\n                .authorizeRequests()\r\n                .antMatchers(&quot;/backend-ContentCentre/**&quot;).hasRole(&quot;NORMAL&quot;)\r\n                .userDetailsService(userDetailsService)\r\n                .loginProcessingUrl(&quot;/login/user&quot;)\r\n                .anyRequest().permitAll();\r\n    }\r\n}\r\n```\r\n\r\nThe above code basically shows my intention. Users accessing `/backend-ContentCentre` use different `UserDetailService` implementation from that for accessing `/backend-admin`. How should I configure to achieve this target?\r\n\r\nThanks a lot.","title":"Can spring security specify different UserDetailsService instances for different paths?","body":"<p>The following code is wrong, but I hope that one day it will be supported.</p>\n\n<p>Of course, I must first thank the developers of spring security and related components. Thank you for allowing us to write safe software so easily.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\nclass SpringSecurityConfig extends WebSecurityConfigurerAdapter {\n\n    @Autowired\n    @Qualifier(\"AdminerDetailsService\")\n    UserDetailsService adminerDetailsService;\n\n    @Autowired\n    @Qualifier(\"UserDetailsService\")\n    UserDetailsService userDetailsService;\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http\n                .csrf().disable()\n                .authorizeRequests()\n                .antMatchers(\"/backend-admin/**\").hasRole(\"REGULAR\")\n                .userDetailsService(adminerDetailsService)\n                .loginProcessingUrl(\"/login/admin\")\n                .authorizeRequests()\n                .antMatchers(\"/backend-ContentCentre/**\").hasRole(\"NORMAL\")\n                .userDetailsService(userDetailsService)\n                .loginProcessingUrl(\"/login/user\")\n                .anyRequest().permitAll();\n    }\n}\n</code></pre>\n\n<p>The above code basically shows my intention. Users accessing <code>/backend-ContentCentre</code> use different <code>UserDetailService</code> implementation from that for accessing <code>/backend-admin</code>. How should I configure to achieve this target?</p>\n\n<p>Thanks a lot.</p>\n"},{"tags":["java","swing","model-view-controller"],"comments":[{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1640878016,"post_id":70533572,"comment_id":124681770,"body_markdown":"Not sure why you have &quot;1&quot; as a parameter. Swing has a parent/child relationship so you can just add the child component to the parent. However, you need to set the layout manager of the Tile label to use a BorderLayout (or some other layout manager) in order to add the child component. Though the question might be why are you using a JLabel as the background. Maybe use a JPanel? Check out https://stackoverflow.com/questions/2561690/placing-component-on-glass-pane/2562685#2562685 for an example of a chess board with icons for the chess pieces.","body":"Not sure why you have &quot;1&quot; as a parameter. Swing has a parent/child relationship so you can just add the child component to the parent. However, you need to set the layout manager of the Tile label to use a BorderLayout (or some other layout manager) in order to add the child component. Though the question might be why are you using a JLabel as the background. Maybe use a JPanel? Check out <a href=\"https://stackoverflow.com/questions/2561690/placing-component-on-glass-pane/2562685#2562685\" title=\"placing component on glass pane\">stackoverflow.com/questions/2561690/&hellip;</a> for an example of a chess board with icons for the chess pieces."},{"owner":{"account_id":16616088,"reputation":1,"user_id":12007681,"display_name":"Ntavas"},"score":0,"creation_date":1640878638,"post_id":70533572,"comment_id":124681952,"body_markdown":"Im using a JPanel for the background and Jlabels for the Tiles placed on this JPanel.","body":"Im using a JPanel for the background and Jlabels for the Tiles placed on this JPanel."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":2,"creation_date":1640879183,"post_id":70533572,"comment_id":124682126,"body_markdown":"I understand and my question was why? You need to color the squares of the chess board. So if you are going to use components typically people will use a JPanel with a GridLayout for the 64 Tiles. Then you need to color each Tile so you use a panel with the appropriate square color. Then you need to add a JLabel to a specific Tile to represent a chess piece. There is no need to use a JLabel to represent a Tile because you don&#39;t need all the painting logic of the JLabel. All you need to do is paint the color.","body":"I understand and my question was why? You need to color the squares of the chess board. So if you are going to use components typically people will use a JPanel with a GridLayout for the 64 Tiles. Then you need to color each Tile so you use a panel with the appropriate square color. Then you need to add a JLabel to a specific Tile to represent a chess piece. There is no need to use a JLabel to represent a Tile because you don&#39;t need all the painting logic of the JLabel. All you need to do is paint the color."},{"owner":{"account_id":16616088,"reputation":1,"user_id":12007681,"display_name":"Ntavas"},"score":0,"creation_date":1640879925,"post_id":70533572,"comment_id":124682374,"body_markdown":"The reason im using JLabel is because each Tile has a spesifc image.  In chess the board doesnt have any images, except for the pawns.","body":"The reason im using JLabel is because each Tile has a spesifc image.  In chess the board doesnt have any images, except for the pawns."},{"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":1,"creation_date":1640879974,"post_id":70533572,"comment_id":124682392,"body_markdown":"Another option is to create a drawing `JPanel`, draw the chessboard, and draw images of chess pieces on the chessboard.","body":"Another option is to create a drawing <code>JPanel</code>, draw the chessboard, and draw images of chess pieces on the chessboard."},{"owner":{"account_id":16616088,"reputation":1,"user_id":12007681,"display_name":"Ntavas"},"score":0,"creation_date":1640883938,"post_id":70533572,"comment_id":124683694,"body_markdown":"I figured that with the implementation that I have its best to use the setBounds method, something like pawn.setBounds(Tile[currentPosition].getBounds); and then add it to the main panel.","body":"I figured that with the implementation that I have its best to use the setBounds method, something like pawn.setBounds(Tile[currentPosition].getBounds); and then add it to the main panel."},{"owner":{"account_id":2507550,"reputation":10975,"user_id":2180785,"accept_rate":90,"display_name":"Frakcool"},"score":0,"creation_date":1640890446,"post_id":70533572,"comment_id":124685668,"body_markdown":"If you&#39;re replying to someone do tag them @camickr, so that they get notified (the `@` is important). *&quot;... its best to use the setBounds method&quot;*, Swing has to deal with different OS, PLAFs, screen sizes and resolutions, let the layout managers do the hard work for you, if you use `setBounds(...)` a.k.a. `null-layout` you&#39;re going to have more and more, and harder problems to solve, [for example](https://stackoverflow.com/a/42521097/2180785).","body":"If you&#39;re replying to someone do tag them @camickr, so that they get notified (the <code>@</code> is important). <i>&quot;... its best to use the setBounds method&quot;</i>, Swing has to deal with different OS, PLAFs, screen sizes and resolutions, let the layout managers do the hard work for you, if you use <code>setBounds(...)</code> a.k.a. <code>null-layout</code> you&#39;re going to have more and more, and harder problems to solve, <a href=\"https://stackoverflow.com/a/42521097/2180785\">for example</a>."},{"owner":{"account_id":16616088,"reputation":1,"user_id":12007681,"display_name":"Ntavas"},"score":0,"creation_date":1640890801,"post_id":70533572,"comment_id":124685754,"body_markdown":"@Frakcool I guess I have to study more about layouts cause I&#39;m a new to this. Thanks for your advice!","body":"@Frakcool I guess I have to study more about layouts cause I&#39;m a new to this. Thanks for your advice!"},{"owner":{"account_id":2507550,"reputation":10975,"user_id":2180785,"accept_rate":90,"display_name":"Frakcool"},"score":0,"creation_date":1640890847,"post_id":70533572,"comment_id":124685764,"body_markdown":"You were given some examples and ideas by both camickr and Gilbert, try them out and btw, your variables (such as `Tiles` should start with a lowerCase letter)","body":"You were given some examples and ideas by both camickr and Gilbert, try them out and btw, your variables (such as <code>Tiles</code> should start with a lowerCase letter)"},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":0,"creation_date":1640896221,"post_id":70533572,"comment_id":124687261,"body_markdown":"Also check out this [chessboard example](https://stackoverflow.com/a/21142687/418556). It doesn&#39;t use any labels, but instead buttons. It uses the buttons as both tile places and to display the pieces, so no need to put components on top of one another.","body":"Also check out this <a href=\"https://stackoverflow.com/a/21142687/418556\">chessboard example</a>. It doesn&#39;t use any labels, but instead buttons. It uses the buttons as both tile places and to display the pieces, so no need to put components on top of one another."}],"owner":{"account_id":16616088,"reputation":1,"user_id":12007681,"display_name":"Ntavas"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1640877955,"creation_date":1640877955,"question_id":70533572,"body_markdown":"I&#39;m building a board game using java swing, and I&#39;m using JLabels for the Tiles of the game, and  JLabels for the pawns. My question, is there a way I can add the pawn on top of a Tile by doing something like this :\r\n\r\n    Tiles[currentPosition].add(pawnLabel);\r\nwith the code above the program is being executed but I cant see the pawn. If I use:\r\n\r\n    Tiles[currentPosition].add(pawnLabel, 1);\r\nI&#39;m getting this exception:\r\n\r\n - **illegal component position**\r\n\r\nDo you have any ideas?","title":"Java JLabel, can i add a transparent Jlabel on another JLabel?","body":"<p>I'm building a board game using java swing, and I'm using JLabels for the Tiles of the game, and  JLabels for the pawns. My question, is there a way I can add the pawn on top of a Tile by doing something like this :</p>\n<pre><code>Tiles[currentPosition].add(pawnLabel);\n</code></pre>\n<p>with the code above the program is being executed but I cant see the pawn. If I use:</p>\n<pre><code>Tiles[currentPosition].add(pawnLabel, 1);\n</code></pre>\n<p>I'm getting this exception:</p>\n<ul>\n<li><strong>illegal component position</strong></li>\n</ul>\n<p>Do you have any ideas?</p>\n"},{"tags":["java","spring-boot","exception","junit","webrequest"],"answers":[{"tags":[],"owner":{"account_id":7788702,"reputation":836,"user_id":5892518,"display_name":"Harsh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640860675,"creation_date":1640860675,"answer_id":70530428,"question_id":70529414,"body_markdown":"**You can use MockMvc to test your API for success/failure or any other custom response such as 404 Not found**\r\n\r\n***A Sample snippet for example would look like this*** \r\n\r\n    public class MyTestClass{\r\n    \r\n      @Autowired\r\n      private MockMvc mvc;\r\n     @Test\r\n      public void testMethod()  {\r\n           MvcResult result = mvc.perform(post(&quot;/yourEndPoint&quot;)\r\n          .contentType(&quot;application/json&quot;)      //Optional depending on your API Design\r\n          .content(content))      //Optional depending on your API Design\r\n          .andExpect(status().isOk())   //isOk , isBadRequest()  and so on \r\n          .andReturn();\r\n    }\r\n    } //End of class\r\n\r\n**Refer this article which explains in a simple manner**\r\n\r\nhttps://howtodoinjava.com/spring-boot2/testing/spring-boot-mockmvc-example/ ","title":"Junit Test for exception and WebRequest","body":"<p><strong>You can use MockMvc to test your API for success/failure or any other custom response such as 404 Not found</strong></p>\n<p><em><strong>A Sample snippet for example would look like this</strong></em></p>\n<pre><code>public class MyTestClass{\n\n  @Autowired\n  private MockMvc mvc;\n @Test\n  public void testMethod()  {\n       MvcResult result = mvc.perform(post(&quot;/yourEndPoint&quot;)\n      .contentType(&quot;application/json&quot;)      //Optional depending on your API Design\n      .content(content))      //Optional depending on your API Design\n      .andExpect(status().isOk())   //isOk , isBadRequest()  and so on \n      .andReturn();\n}\n} //End of class\n</code></pre>\n<p><strong>Refer this article which explains in a simple manner</strong></p>\n<p><a href=\"https://howtodoinjava.com/spring-boot2/testing/spring-boot-mockmvc-example/\" rel=\"nofollow noreferrer\">https://howtodoinjava.com/spring-boot2/testing/spring-boot-mockmvc-example/</a></p>\n"},{"tags":[],"owner":{"account_id":17498915,"reputation":51,"user_id":12689635,"display_name":"Ant3xes"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640877936,"creation_date":1640877936,"answer_id":70533568,"question_id":70529414,"body_markdown":"I found the solution  \r\n\r\n  \tprivate CustomizedResponseEntityExceptionHandler test = new CustomizedResponseEntityExceptionHandler();\r\n\tMockHttpServletRequest servletRequest = new MockHttpServletRequest();\r\n\t@Test\r\n\tpublic void numberFormatExceptionNotFoundExceptionTest() {\r\n\t\tMethodArgumentTypeMismatchException expt = null ;\r\n\t\tNumberFormatException exe = null;\r\n\t\tservletRequest.setServerName(&quot;www.example.com&quot;);\r\n\t\tservletRequest.setRequestURI(&quot;/v1/someuri&quot;);\r\n\t\tservletRequest.addParameter(&quot;brand1&quot;, &quot;value1&quot;);\r\n\t\tservletRequest.addParameter(&quot;brand2&quot;, &quot;value2&quot;);\r\n\t\tWebRequest webRequest = new ServletWebRequest(servletRequest);\r\n\t\tResponseEntity&lt;AccessError&gt; result = test.numberFormatExceptionNotFoundException(expt,exe, webRequest);\r\n\t\tassertNotNull(result);\r\n\t}\r\n\t","title":"Junit Test for exception and WebRequest","body":"<p>I found the solution</p>\n<pre><code>private CustomizedResponseEntityExceptionHandler test = new CustomizedResponseEntityExceptionHandler();\nMockHttpServletRequest servletRequest = new MockHttpServletRequest();\n@Test\npublic void numberFormatExceptionNotFoundExceptionTest() {\n    MethodArgumentTypeMismatchException expt = null ;\n    NumberFormatException exe = null;\n    servletRequest.setServerName(&quot;www.example.com&quot;);\n    servletRequest.setRequestURI(&quot;/v1/someuri&quot;);\n    servletRequest.addParameter(&quot;brand1&quot;, &quot;value1&quot;);\n    servletRequest.addParameter(&quot;brand2&quot;, &quot;value2&quot;);\n    WebRequest webRequest = new ServletWebRequest(servletRequest);\n    ResponseEntity&lt;AccessError&gt; result = test.numberFormatExceptionNotFoundException(expt,exe, webRequest);\n    assertNotNull(result);\n}\n</code></pre>\n"}],"owner":{"account_id":17498915,"reputation":51,"user_id":12689635,"display_name":"Ant3xes"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1305,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1640877936,"creation_date":1640854650,"question_id":70529414,"body_markdown":"I&#39;m a beginner and i&#39;m writing unittests and I&#39;ve stumbled across something I can&#39;t find a solution for that fits my needs.\r\n\r\nI want to write some Junit Test for that exceptions.\r\n\r\nThere is my class with my Method\r\n\r\n    @ControllerAdvice\r\n    @RestController\r\n    public class CustomizedResponseEntityExceptionHandler extends ResponseEntityExceptionHandler {\r\n    \r\n        @ExceptionHandler(MethodArgumentTypeMismatchException.class)\r\n    \tpublic final ResponseEntity&lt;AccessError&gt; numberFormatExceptionNotFoundException(\r\n    \t\t\t\tMethodArgumentTypeMismatchException ex, NumberFormatException exe, WebRequest request) {\r\n    \t\t\tAccessError errorDetails = new AccessError();\r\n    \t\t\terrorDetails.code(&quot;400&quot;);\r\n    \t\t\terrorDetails.addErrorsItem(new Error(&quot;400&quot;,ex.getMessage()));\r\n    \t\t\terrorDetails.setCode(&quot;400&quot;);\r\n    \t\t\terrorDetails.setTimestamp(new Date().toInstant().atOffset(ZoneOffset.UTC));\r\n    \t\t\terrorDetails.setMessage(HttpStatus.BAD_REQUEST.getReasonPhrase());\r\n    \t\t\terrorDetails.setPath(((ServletWebRequest) request).getRequest().getRequestURI());\r\n    \t\t\treturn new ResponseEntity&lt;&gt;(errorDetails, HttpStatus.BAD_REQUEST);\r\n    \t\t}\r\n    \t@Override\r\n    \tprotected ResponseEntity&lt;Object&gt; handleHttpMediaTypeNotSupported(HttpMediaTypeNotSupportedException ex,\r\n    \t\t\tHttpHeaders headers, HttpStatus status, WebRequest request) {\r\n    \t\tAccessError errorDetails = new AccessError();\r\n    \t\terrorDetails.code(&quot;400&quot;);\r\n    \t\terrorDetails.addErrorsItem(new Error(&quot;400&quot;,&quot;Media Type Not Supported Exception&quot;));\r\n    \t\terrorDetails.setCode(&quot;400&quot;);\r\n    \t\terrorDetails.setTimestamp(new Date().toInstant().atOffset(ZoneOffset.UTC));\r\n    \t\terrorDetails.setMessage(HttpStatus.BAD_REQUEST.getReasonPhrase());\r\n    \t\terrorDetails.setPath(((ServletWebRequest) request).getRequest().getRequestURI());\r\n    \t\treturn new ResponseEntity&lt;&gt;(errorDetails, HttpStatus.BAD_REQUEST);\r\n    \t}\r\n\r\n\r\nAnd there is my testClass :\r\n\r\n    public class CustomizedResponseEntityExceptionHandlerTest {\r\n\t@Mock\r\n\tResponseEntity&lt;AccessError&gt; responseEntity;\r\n\tWebRequest webRequest;\r\n\r\n\t@InjectMocks\r\n\tprivate CustomizedResponseEntityExceptionHandler custom = new CustomizedResponseEntityExceptionHandler();\r\n\r\n\t@Test\r\n\tpublic void numberFormatExceptionNotFoundExceptionTest() {\r\n\r\n\t\tWebRequest webRequest;\r\n\t\tString msg = &quot;toto&quot;;\r\n\t\tAccessError errors = new AccessError();\r\n\t\terrors.setPath(&quot;app&quot;);\r\n\t\terrors.getPath();\r\n\t\terrors.setTimestamp(new Date().toInstant().atOffset(ZoneOffset.UTC));\r\n\t\terrors.timestamp(new Date().toInstant().atOffset(ZoneOffset.UTC));\r\n\t\tApiException apiException = new ApiException(errors, msg);\r\n\t\t\r\n\t\tResponseEntity&lt;AccessError&gt; responseApi = custom.handleUserNotFoundException(apiException, webRequest.getHeaderNames());\r\n\t\tassertThatExceptionOfType(ApiException.class);\r\n\r\n\t}\r\n\r\nMy Question is : How i can do a JUnit Test for that cases, which have webRequest and some exceptions ?\r\n\r\nI&#39;ve tried a lot of thing but i think i don&#39;t have the right thinking method.\r\n\r\nThanks !!","title":"Junit Test for exception and WebRequest","body":"<p>I'm a beginner and i'm writing unittests and I've stumbled across something I can't find a solution for that fits my needs.</p>\n<p>I want to write some Junit Test for that exceptions.</p>\n<p>There is my class with my Method</p>\n<pre><code>@ControllerAdvice\n@RestController\npublic class CustomizedResponseEntityExceptionHandler extends ResponseEntityExceptionHandler {\n\n    @ExceptionHandler(MethodArgumentTypeMismatchException.class)\n    public final ResponseEntity&lt;AccessError&gt; numberFormatExceptionNotFoundException(\n                MethodArgumentTypeMismatchException ex, NumberFormatException exe, WebRequest request) {\n            AccessError errorDetails = new AccessError();\n            errorDetails.code(&quot;400&quot;);\n            errorDetails.addErrorsItem(new Error(&quot;400&quot;,ex.getMessage()));\n            errorDetails.setCode(&quot;400&quot;);\n            errorDetails.setTimestamp(new Date().toInstant().atOffset(ZoneOffset.UTC));\n            errorDetails.setMessage(HttpStatus.BAD_REQUEST.getReasonPhrase());\n            errorDetails.setPath(((ServletWebRequest) request).getRequest().getRequestURI());\n            return new ResponseEntity&lt;&gt;(errorDetails, HttpStatus.BAD_REQUEST);\n        }\n    @Override\n    protected ResponseEntity&lt;Object&gt; handleHttpMediaTypeNotSupported(HttpMediaTypeNotSupportedException ex,\n            HttpHeaders headers, HttpStatus status, WebRequest request) {\n        AccessError errorDetails = new AccessError();\n        errorDetails.code(&quot;400&quot;);\n        errorDetails.addErrorsItem(new Error(&quot;400&quot;,&quot;Media Type Not Supported Exception&quot;));\n        errorDetails.setCode(&quot;400&quot;);\n        errorDetails.setTimestamp(new Date().toInstant().atOffset(ZoneOffset.UTC));\n        errorDetails.setMessage(HttpStatus.BAD_REQUEST.getReasonPhrase());\n        errorDetails.setPath(((ServletWebRequest) request).getRequest().getRequestURI());\n        return new ResponseEntity&lt;&gt;(errorDetails, HttpStatus.BAD_REQUEST);\n    }\n</code></pre>\n<p>And there is my testClass :</p>\n<pre><code>public class CustomizedResponseEntityExceptionHandlerTest {\n@Mock\nResponseEntity&lt;AccessError&gt; responseEntity;\nWebRequest webRequest;\n\n@InjectMocks\nprivate CustomizedResponseEntityExceptionHandler custom = new CustomizedResponseEntityExceptionHandler();\n\n@Test\npublic void numberFormatExceptionNotFoundExceptionTest() {\n\n    WebRequest webRequest;\n    String msg = &quot;toto&quot;;\n    AccessError errors = new AccessError();\n    errors.setPath(&quot;app&quot;);\n    errors.getPath();\n    errors.setTimestamp(new Date().toInstant().atOffset(ZoneOffset.UTC));\n    errors.timestamp(new Date().toInstant().atOffset(ZoneOffset.UTC));\n    ApiException apiException = new ApiException(errors, msg);\n    \n    ResponseEntity&lt;AccessError&gt; responseApi = custom.handleUserNotFoundException(apiException, webRequest.getHeaderNames());\n    assertThatExceptionOfType(ApiException.class);\n\n}\n</code></pre>\n<p>My Question is : How i can do a JUnit Test for that cases, which have webRequest and some exceptions ?</p>\n<p>I've tried a lot of thing but i think i don't have the right thinking method.</p>\n<p>Thanks !!</p>\n"},{"tags":["java","database","string","list","arraylist"],"comments":[{"owner":{"account_id":7302867,"reputation":299,"user_id":5564903,"display_name":"Stefan D."},"score":0,"creation_date":1640875673,"post_id":70533015,"comment_id":124681058,"body_markdown":"Please edit your question and post the content of your CSV file as text instead of a screenshot.","body":"Please edit your question and post the content of your CSV file as text instead of a screenshot."},{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1640875701,"post_id":70533015,"comment_id":124681071,"body_markdown":"I think you want to use `inputStream.nextLine();` instead of `next()`.","body":"I think you want to use <code>inputStream.nextLine();</code> instead of <code>next()</code>."},{"owner":{"account_id":23547029,"reputation":103,"user_id":17590305,"display_name":"Ignacio Thomson"},"score":0,"creation_date":1640876007,"post_id":70533015,"comment_id":124681168,"body_markdown":"Crazy how my problem was inmediatly fixed with nextLine instead of next, i appreciate your support, thank you !!","body":"Crazy how my problem was inmediatly fixed with nextLine instead of next, i appreciate your support, thank you !!"}],"answers":[{"tags":[],"owner":{"account_id":23784919,"reputation":345,"user_id":17797142,"display_name":"TheSmith1222"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1640877629,"creation_date":1640877629,"answer_id":70533516,"question_id":70533015,"body_markdown":"You need to substitute this:\r\n```\r\nString datos = inputStream.next();\r\n```\r\nIn to this:\r\n```\r\nString datos = inputStream.nextLine();\r\n```\r\nI hope help you, say me if it work&#128522;&#128077;.","title":"IndexOutOfBoundsException when reading CSV file","body":"<p>You need to substitute this:</p>\n<pre><code>String datos = inputStream.next();\n</code></pre>\n<p>In to this:</p>\n<pre><code>String datos = inputStream.nextLine();\n</code></pre>\n<p>I hope help you, say me if it work😊👍.</p>\n"}],"owner":{"account_id":23547029,"reputation":103,"user_id":17590305,"display_name":"Ignacio Thomson"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":184,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":70533516,"answer_count":1,"score":-2,"last_activity_date":1640877629,"creation_date":1640874640,"question_id":70533015,"body_markdown":"Hi i&#39;m trying to read a CSV file which looks like this -&gt; \r\n\r\n[CSV File][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/yhemS.png\r\n\r\nAnd i&#39;m trying to read it and add it to an array with this code: \r\n\r\nArrayList&lt;Producto&gt;listaProductos2 = new ArrayList&lt;Producto&gt;();\r\n\t\t\r\n\t\tScanner inputStream = null;\r\n\t\tinputStream = new Scanner(new File(&quot;src/ProductosImportados2.csv&quot;));\r\n\t\t\r\n\t\twhile(inputStream.hasNext()) {\r\n\t\t\t\r\n\t\t\tString datos = inputStream.next();\r\n\t\t\tString[] valores = datos.split(&quot;,&quot;);\r\n\t\t\tString articuloImportado = valores[0];\r\n\t\t\tString precioImportado = valores[1];\r\n\t\t\tString descripcionImportada = valores[2];\r\n\t\t\tString codigoImportado = valores[3];\r\n\t\t\tString tallaImportada = valores[4];\r\n\t\t\tString marcaImportada = valores[5];\r\n\t\t\tString colorImportado = valores[6];\r\n\t\t\t\r\n\t\t\tProducto nuevoProducto = new Producto(articuloImportado, precioImportado, descripcionImportada, codigoImportado, tallaImportada, marcaImportada, colorImportado);\r\n\t\t\tlistaProductos2.add(nuevoProducto);\r\n\t\t\tSystem.out.println(listaProductos2);\r\n\r\nI already have a Producto class with it&#39;s builder set up, and my program is currently working properly, my only issue goes with importing data from an outside source. \r\n\r\nWhen i target the index 0 and 1 of &quot;valores&quot;, it prints correctly, but from index 2 and forward it gives the indexOutOfBounds exception, and i&#39;m kinda lost, i don&#39;t know why it&#39;s out of bounds.\r\n\r\nI&#39;ve done my research, but haven&#39;t figured it out sadly, any help is greatly appreciated.","title":"IndexOutOfBoundsException when reading CSV file","body":"<p>Hi i'm trying to read a CSV file which looks like this -&gt;</p>\n<p><a href=\"https://i.stack.imgur.com/yhemS.png\" rel=\"nofollow noreferrer\">CSV File</a></p>\n<p>And i'm trying to read it and add it to an array with this code:</p>\n<p>ArrayListlistaProductos2 = new ArrayList();</p>\n<pre><code>    Scanner inputStream = null;\n    inputStream = new Scanner(new File(&quot;src/ProductosImportados2.csv&quot;));\n    \n    while(inputStream.hasNext()) {\n        \n        String datos = inputStream.next();\n        String[] valores = datos.split(&quot;,&quot;);\n        String articuloImportado = valores[0];\n        String precioImportado = valores[1];\n        String descripcionImportada = valores[2];\n        String codigoImportado = valores[3];\n        String tallaImportada = valores[4];\n        String marcaImportada = valores[5];\n        String colorImportado = valores[6];\n        \n        Producto nuevoProducto = new Producto(articuloImportado, precioImportado, descripcionImportada, codigoImportado, tallaImportada, marcaImportada, colorImportado);\n        listaProductos2.add(nuevoProducto);\n        System.out.println(listaProductos2);\n</code></pre>\n<p>I already have a Producto class with it's builder set up, and my program is currently working properly, my only issue goes with importing data from an outside source.</p>\n<p>When i target the index 0 and 1 of &quot;valores&quot;, it prints correctly, but from index 2 and forward it gives the indexOutOfBounds exception, and i'm kinda lost, i don't know why it's out of bounds.</p>\n<p>I've done my research, but haven't figured it out sadly, any help is greatly appreciated.</p>\n"},{"tags":["java","android","document","fileoutputstream","internal-storage"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1640857335,"post_id":70528128,"comment_id":124675522,"body_markdown":"`a file in the documents folder in internal storage` I&#39;m not aware of such a folder.","body":"<code>a file in the documents folder in internal storage</code> I&#39;m not aware of such a folder."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1640857415,"post_id":70528128,"comment_id":124675546,"body_markdown":"`I&#39;m not trying to save to external storage ` Wel you should as in root of external storage there is a Documents folder.","body":"<code>I&#39;m not trying to save to external storage </code> Wel you should as in root of external storage there is a Documents folder."},{"owner":{"account_id":15410515,"reputation":33,"user_id":11117353,"display_name":"Michael"},"score":0,"creation_date":1640877330,"post_id":70528128,"comment_id":124681558,"body_markdown":"I don&#39;t have external storage, only internal, and that&#39;s where my documents folder is","body":"I don&#39;t have external storage, only internal, and that&#39;s where my documents folder is"},{"owner":{"account_id":15410515,"reputation":33,"user_id":11117353,"display_name":"Michael"},"score":0,"creation_date":1640878444,"post_id":70528128,"comment_id":124681890,"body_markdown":"First of let me say thank you, I tried it and it worked, but I&#39;m confused because in file explorer I click on internal storage, with no external strorage option, then Documents, and when I tried your method it worked and that&#39;s where it was, but why does file explorer consider it internal while java considers it external","body":"First of let me say thank you, I tried it and it worked, but I&#39;m confused because in file explorer I click on internal storage, with no external strorage option, then Documents, and when I tried your method it worked and that&#39;s where it was, but why does file explorer consider it internal while java considers it external"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1640880428,"post_id":70528128,"comment_id":124682530,"body_markdown":"That is all for historic reasons.","body":"That is all for historic reasons."}],"answers":[{"tags":[],"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1640857568,"creation_date":1640857568,"answer_id":70529895,"question_id":70528128,"body_markdown":"&gt;&gt;File file = new File(Environment.DIRECTORY_DOCUMENTS, &quot;myFile.txt&quot;);\r\n   \r\n\r\n    File file = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOCUMENTS), &quot;myFile.txt&quot;);\r\n   ","title":"Writing to file in Documents folder in internal storage","body":"<blockquote>\n<blockquote>\n<p>File file = new File(Environment.DIRECTORY_DOCUMENTS, &quot;myFile.txt&quot;);</p>\n</blockquote>\n</blockquote>\n<pre><code>File file = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOCUMENTS), &quot;myFile.txt&quot;);\n</code></pre>\n"}],"owner":{"account_id":15410515,"reputation":33,"user_id":11117353,"display_name":"Michael"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":621,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70529895,"answer_count":1,"score":0,"last_activity_date":1640877390,"creation_date":1640845428,"question_id":70528128,"body_markdown":"I&#39;ve been trying to save text to a file in the documents folder in internal storage to be accessed by file manager so i can read it, I&#39;ve tried several methods including using a writer, but I can&#39;t seem to get it to work, I&#39;m not trying to save to external storage, I don&#39;t have external storage, only internal, and that&#39;s where my documents folder is, so I&#39;m assuming I don&#39;t have to bother with the permissions in manifest, I threw in the setReadable just in case but I still can&#39;t find it in the documents folder, this is where I&#39;m currently  at.\r\n\r\n```\r\npublic void writeToFile(String string){\r\n\t\t\r\ntry {\r\n\t\t\t\r\n            File file = new File(Environment.DIRECTORY_DOCUMENTS, &quot;myFile.txt&quot;);\r\n\t\t\tfile.setReadable(true);\r\n\t\t\tFileOutputStream stream = new FileOutputStream(file);\r\n\t\t\tstream.write(string.getBytes(string));\r\n\t\t\tstream.flush();\r\n\t\t\tstream.close();\r\n\t\t}\r\n\t\tcatch (IOException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\r\n\t}\r\n```\r\n\r\n","title":"Writing to file in Documents folder in internal storage","body":"<p>I've been trying to save text to a file in the documents folder in internal storage to be accessed by file manager so i can read it, I've tried several methods including using a writer, but I can't seem to get it to work, I'm not trying to save to external storage, I don't have external storage, only internal, and that's where my documents folder is, so I'm assuming I don't have to bother with the permissions in manifest, I threw in the setReadable just in case but I still can't find it in the documents folder, this is where I'm currently  at.</p>\n<pre><code>public void writeToFile(String string){\n        \ntry {\n            \n            File file = new File(Environment.DIRECTORY_DOCUMENTS, &quot;myFile.txt&quot;);\n            file.setReadable(true);\n            FileOutputStream stream = new FileOutputStream(file);\n            stream.write(string.getBytes(string));\n            stream.flush();\n            stream.close();\n        }\n        catch (IOException e) {\n            e.printStackTrace();\n        }\n\n    }\n</code></pre>\n"},{"tags":["java","netbeans"],"comments":[{"owner":{"account_id":22450291,"reputation":364,"user_id":16653700,"display_name":"Alias Cartellano"},"score":0,"creation_date":1640891845,"post_id":70533088,"comment_id":124686023,"body_markdown":"Use static variables to hold the data, you can then access those static variables from your other `jframe`.","body":"Use static variables to hold the data, you can then access those static variables from your other <code>jframe</code>."},{"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1640896860,"post_id":70533088,"comment_id":124687441,"body_markdown":"Create an application model using a plain Java getter/setter class and pass an instance of the class to both `JFrames`.","body":"Create an application model using a plain Java getter/setter class and pass an instance of the class to both <code>JFrames</code>."}],"owner":{"account_id":23227201,"reputation":57,"user_id":17318569,"display_name":"Ștefan Tătărucă"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1640876885,"creation_date":1640875135,"question_id":70533088,"body_markdown":"I want to store 2 variables and pass them to another jframe\r\n\r\n```\r\nprivate void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         \r\ncity=Combo_box_city.getSelectedItem().toString();\r\nproduct=Combo_box_products.getSelectedItem().toString();\r\npanel2.setVisible(true);\r\n```\r\nThis is how i store the data from the 2 combo_boxes\r\nNow, how should I pass the data in another jframe?\r\n\r\n\r\n**SOLUTION**\r\n\r\n```\r\n    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         \r\n\r\nnew Panel2(Combo_box_city.getSelectedItem().toString(),Combo_box_products.getSelectedItem().toString()).setVisible(true);\r\ndispose();\r\n    }   \r\n```\r\nIn panel 2:\r\n```\r\npublic class Panel2 extends javax.swing.JFrame {\r\n\r\n    /**\r\n     * Creates new form Panel2\r\n     */\r\nString get_city;String get_product;\r\n    public Panel2(String city,String product) {\r\nget_city=city;\r\nget_product=product;\r\nSystem.out.print(get_city+get_product);\r\n        initComponents();\r\nthis.setLocationRelativeTo(null);\r\nsetResizable(false);\r\n\r\n}\r\n```\r\nAnd comment all main","title":"Store value from a jform to another","body":"<p>I want to store 2 variables and pass them to another jframe</p>\n<pre><code>private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         \ncity=Combo_box_city.getSelectedItem().toString();\nproduct=Combo_box_products.getSelectedItem().toString();\npanel2.setVisible(true);\n</code></pre>\n<p>This is how i store the data from the 2 combo_boxes\nNow, how should I pass the data in another jframe?</p>\n<p><strong>SOLUTION</strong></p>\n<pre><code>    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         \n\nnew Panel2(Combo_box_city.getSelectedItem().toString(),Combo_box_products.getSelectedItem().toString()).setVisible(true);\ndispose();\n    }   \n</code></pre>\n<p>In panel 2:</p>\n<pre><code>public class Panel2 extends javax.swing.JFrame {\n\n    /**\n     * Creates new form Panel2\n     */\nString get_city;String get_product;\n    public Panel2(String city,String product) {\nget_city=city;\nget_product=product;\nSystem.out.print(get_city+get_product);\n        initComponents();\nthis.setLocationRelativeTo(null);\nsetResizable(false);\n\n}\n</code></pre>\n<p>And comment all main</p>\n"},{"tags":["java","spring","spring-boot","log4j"],"answers":[{"tags":[],"owner":{"account_id":8043174,"reputation":17,"user_id":6064168,"display_name":"user6064168"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1640869374,"creation_date":1640869374,"answer_id":70532060,"question_id":70531671,"body_markdown":"What version of maven you are using and have you use the junit maven plugin.","title":"After updating to latest Spring boot version, spring-boot-starter-parent 2.6.2, my tests stop executing","body":"<p>What version of maven you are using and have you use the junit maven plugin.</p>\n"},{"tags":[],"owner":{"account_id":4543305,"reputation":27,"user_id":3690560,"display_name":"gtrev"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1640876858,"creation_date":1640876858,"answer_id":70533392,"question_id":70531671,"body_markdown":"Starting from Springboot 2.4 they removed JUnit4. If you&#39;re using JUnit4 you need to add this dependency in your pom:\r\n\r\n    &lt;dependency&gt;\r\n            &lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;org.hamcrest&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;hamcrest-core&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n\r\n","title":"After updating to latest Spring boot version, spring-boot-starter-parent 2.6.2, my tests stop executing","body":"<p>Starting from Springboot 2.4 they removed JUnit4. If you're using JUnit4 you need to add this dependency in your pom:</p>\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\n        &lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.hamcrest&lt;/groupId&gt;\n                &lt;artifactId&gt;hamcrest-core&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":7040505,"reputation":117,"user_id":5393127,"display_name":"Rohail Usman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5035,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1640876858,"creation_date":1640867231,"question_id":70531671,"body_markdown":"I have updated the Spring boot version to **2.6.2** from **2.3.12.RELEASE** to incorporate log4j change. Now when I executed mvn clean install to build my code, it is executing only one unit test. I have a test suite of around 423 tests that are all executing and passing with 2.3.12.RELEASE. But now even tests are not executing fine. I haven&#39;t seen any such incident reported so I am reporting one.\r\n\r\nI am executing my tests with PowerMockRunner\r\n\r\n\r\n\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    &lt;version&gt;2.6.2&lt;/version&gt;\r\n    &lt;type&gt;pom&lt;/type&gt;\r\n&lt;/dependency&gt;\r\n\r\nPowerMock dependencies\r\n\r\n&lt;dependency&gt;\r\n   &lt;groupId&gt;org.powermock&lt;/groupId&gt;\r\n   &lt;artifactId&gt;powermock-module-junit4&lt;/artifactId&gt;\r\n   &lt;version&gt;2.0.0&lt;/version&gt;\r\n   &lt;scope&gt;test&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n   &lt;groupId&gt;org.powermock&lt;/groupId&gt;\r\n   &lt;artifactId&gt;powermock-api-mockito2&lt;/artifactId&gt;\r\n   &lt;version&gt;2.0.0&lt;/version&gt;\r\n   &lt;scope&gt;test&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n```","title":"After updating to latest Spring boot version, spring-boot-starter-parent 2.6.2, my tests stop executing","body":"<p>I have updated the Spring boot version to <strong>2.6.2</strong> from <strong>2.3.12.RELEASE</strong> to incorporate log4j change. Now when I executed mvn clean install to build my code, it is executing only one unit test. I have a test suite of around 423 tests that are all executing and passing with 2.3.12.RELEASE. But now even tests are not executing fine. I haven't seen any such incident reported so I am reporting one.</p>\n<p>I am executing my tests with PowerMockRunner</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.6.2&lt;/version&gt;\n    &lt;type&gt;pom&lt;/type&gt;\n&lt;/dependency&gt;\n\nPowerMock dependencies\n\n&lt;dependency&gt;\n   &lt;groupId&gt;org.powermock&lt;/groupId&gt;\n   &lt;artifactId&gt;powermock-module-junit4&lt;/artifactId&gt;\n   &lt;version&gt;2.0.0&lt;/version&gt;\n   &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n   &lt;groupId&gt;org.powermock&lt;/groupId&gt;\n   &lt;artifactId&gt;powermock-api-mockito2&lt;/artifactId&gt;\n   &lt;version&gt;2.0.0&lt;/version&gt;\n   &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","spring","spring-boot","lombok"],"comments":[{"owner":{"account_id":4443644,"reputation":1307,"user_id":3617573,"accept_rate":62,"display_name":"Alexandre FILLATRE"},"score":0,"creation_date":1640874841,"post_id":70532534,"comment_id":124680793,"body_markdown":"Can you please fix your code examples ? It does not compile (because of several syntaxe errors), and I suppose you&#39;re also missing an `@Component` annotation on the `ExtendedChild` class (which cannot be abstract, then.","body":"Can you please fix your code examples ? It does not compile (because of several syntaxe errors), and I suppose you&#39;re also missing an <code>@Component</code> annotation on the <code>ExtendedChild</code> class (which cannot be abstract, then."}],"answers":[{"tags":[],"owner":{"account_id":4443644,"reputation":1307,"user_id":3617573,"accept_rate":62,"display_name":"Alexandre FILLATRE"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1640876809,"creation_date":1640876809,"answer_id":70533384,"question_id":70532534,"body_markdown":"I was able to reproduce your problem with this code\r\n\r\n    @SuperBuilder(toBuilder = true)\r\n    @EqualsAndHashCode\r\n    @ToString\r\n    @Getter\r\n    @Setter\r\n    public abstract class AbstractParent {\r\n        private final String field1;\r\n        private final String field2;\r\n    }\r\n    \r\n    @SuperBuilder(toBuilder = true)\r\n    @EqualsAndHashCode(callSuper = true)\r\n    @ToString(callSuper = true)\r\n    abstract class Child extends AbstractParent {\r\n    \r\n    }\r\n    \r\n    @SuperBuilder(toBuilder = true)\r\n    @EqualsAndHashCode(callSuper = true)\r\n    @ToString(callSuper = true)\r\n    @Component\r\n    class ExtendedChild extends Child {\r\n        private final String field1;\r\n        private final String field2;\r\n    }\r\n\r\nWhat the `@SuperBuilder` does here on class `ExtendedChild` is \r\n\r\n    protected ExtendedChild(ExtendedChildBuilder&lt;?, ?&gt; b) {\r\n        super(b);\r\n        this.field1 = b.field1;\r\n        this.field2 = b.field2;\r\n    }\r\n\r\nSo it says you need an `ExtendedChildBuilder` instance in order to build an `ExtendedChild` instance. In order words, you have to have a builder in your spring context to be able to create your object.\r\n\r\nThis is not a good idea since a builder is stateful and not thread-safe. Furthermore, the builder pattern is here to be able to provide values whenever you need them before constructing your object. Using a builder as a Spring bean denies that advantage.\r\n\r\nIf this is immutability you want to achieve, then using plain old constructors with the right parameters is way better (and when done right, this is not boilerplate code, this is good design).\r\nThen, Spring injection will be a child&#39;s play.\r\n\r\nPlease do not trade complexity for the sake of writing less code :)","title":"Spring abstract class with final fields and inheritance with lombok&#39;s @SuperBuilder","body":"<p>I was able to reproduce your problem with this code</p>\n<pre><code>@SuperBuilder(toBuilder = true)\n@EqualsAndHashCode\n@ToString\n@Getter\n@Setter\npublic abstract class AbstractParent {\n    private final String field1;\n    private final String field2;\n}\n\n@SuperBuilder(toBuilder = true)\n@EqualsAndHashCode(callSuper = true)\n@ToString(callSuper = true)\nabstract class Child extends AbstractParent {\n\n}\n\n@SuperBuilder(toBuilder = true)\n@EqualsAndHashCode(callSuper = true)\n@ToString(callSuper = true)\n@Component\nclass ExtendedChild extends Child {\n    private final String field1;\n    private final String field2;\n}\n</code></pre>\n<p>What the <code>@SuperBuilder</code> does here on class <code>ExtendedChild</code> is</p>\n<pre><code>protected ExtendedChild(ExtendedChildBuilder&lt;?, ?&gt; b) {\n    super(b);\n    this.field1 = b.field1;\n    this.field2 = b.field2;\n}\n</code></pre>\n<p>So it says you need an <code>ExtendedChildBuilder</code> instance in order to build an <code>ExtendedChild</code> instance. In order words, you have to have a builder in your spring context to be able to create your object.</p>\n<p>This is not a good idea since a builder is stateful and not thread-safe. Furthermore, the builder pattern is here to be able to provide values whenever you need them before constructing your object. Using a builder as a Spring bean denies that advantage.</p>\n<p>If this is immutability you want to achieve, then using plain old constructors with the right parameters is way better (and when done right, this is not boilerplate code, this is good design).\nThen, Spring injection will be a child's play.</p>\n<p>Please do not trade complexity for the sake of writing less code :)</p>\n"}],"owner":{"account_id":16705111,"reputation":59,"user_id":12073804,"display_name":"Lukas B"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1386,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70533384,"answer_count":1,"score":0,"last_activity_date":1640876809,"creation_date":1640872123,"question_id":70532534,"body_markdown":"I am currently trying to remove some boilerplate code with lombok but have some trouble.\r\n\r\nI have an abstract class AbstractParent, \r\n\r\n```\r\n@SuperBuilder(toBuilder = true)\r\n@EqualsAndHashCode\r\n@ToString\r\n@Getter\r\n@Setter\r\npublic abstract class AbstractParent {\r\nprivate final field1;\r\nprivate final field2;\r\n\r\n```\r\n\r\nthen I have a Child Class like this\r\n\r\n```\r\n@SuperBuilder(toBuilder = true)\r\n@EqualsAndHashCode(callSuper = true)\r\n@ToString(callSuper = true)\r\npublic abstract class Child extends AbstractParent {\r\n```\r\nAnd I also have some classes extending the Child class\r\n\r\n```\r\n@SuperBuilder(toBuilder = true)\r\n@EqualsAndHashCode(callSuper = true)\r\n@ToString(callSuper = true)\r\n@Component\r\npublic abstract class ExtendedChild extends Child {\r\nprivate final field1;\r\nprivate final field2;\r\n```\r\n\r\nSince lombok can&#39;t use super in a constructor, I tried the @SuperBuilder Annotation instead of defining the Constructors manually but can&#39;t get the Application to start. Am I missing something completely? Is this even possible with lombok and spring?\r\n\r\nThe Error is:\r\n```\r\n***************************\r\nAPPLICATION FAILED TO START\r\n***************************\r\n\r\nDescription:\r\n\r\nParameter 0 of constructor in com.fu.extendedChild required a bean of type &#39;com.fu.extendedChild$extendedChildBuilder&#39; that could not be found.\r\n\r\n\r\nAction:\r\n\r\nConsider defining a bean of type &#39;com.fu.extendedChild$extendedChildBuilder&#39; in your configuration.\r\n\r\n```\r\n\r\n","title":"Spring abstract class with final fields and inheritance with lombok&#39;s @SuperBuilder","body":"<p>I am currently trying to remove some boilerplate code with lombok but have some trouble.</p>\n<p>I have an abstract class AbstractParent,</p>\n<pre><code>@SuperBuilder(toBuilder = true)\n@EqualsAndHashCode\n@ToString\n@Getter\n@Setter\npublic abstract class AbstractParent {\nprivate final field1;\nprivate final field2;\n\n</code></pre>\n<p>then I have a Child Class like this</p>\n<pre><code>@SuperBuilder(toBuilder = true)\n@EqualsAndHashCode(callSuper = true)\n@ToString(callSuper = true)\npublic abstract class Child extends AbstractParent {\n</code></pre>\n<p>And I also have some classes extending the Child class</p>\n<pre><code>@SuperBuilder(toBuilder = true)\n@EqualsAndHashCode(callSuper = true)\n@ToString(callSuper = true)\n@Component\npublic abstract class ExtendedChild extends Child {\nprivate final field1;\nprivate final field2;\n</code></pre>\n<p>Since lombok can't use super in a constructor, I tried the @SuperBuilder Annotation instead of defining the Constructors manually but can't get the Application to start. Am I missing something completely? Is this even possible with lombok and spring?</p>\n<p>The Error is:</p>\n<pre><code>***************************\nAPPLICATION FAILED TO START\n***************************\n\nDescription:\n\nParameter 0 of constructor in com.fu.extendedChild required a bean of type 'com.fu.extendedChild$extendedChildBuilder' that could not be found.\n\n\nAction:\n\nConsider defining a bean of type 'com.fu.extendedChild$extendedChildBuilder' in your configuration.\n\n</code></pre>\n"},{"tags":["java","swing"],"comments":[{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":3,"creation_date":1640823198,"post_id":70526142,"comment_id":124669485,"body_markdown":"Don&#39;t add components to a JTable. What you see is the &quot;toString()&quot; text of the component added. Just add the text to the table and the table will render the text using a JLabel. And yes, if you only have a single column then use a `JList`. Read the Swing tutorial on [How to Use Lists](https://docs.oracle.com/javase/tutorial/uiswing/components/list.html) for examples. If you want different fonts and colors then use properties of the JList.","body":"Don&#39;t add components to a JTable. What you see is the &quot;toString()&quot; text of the component added. Just add the text to the table and the table will render the text using a JLabel. And yes, if you only have a single column then use a <code>JList</code>. Read the Swing tutorial on <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/components/list.html\" rel=\"nofollow noreferrer\">How to Use Lists</a> for examples. If you want different fonts and colors then use properties of the JList."},{"owner":{"account_id":8362430,"reputation":856,"user_id":6280255,"display_name":"Just another Java programmer"},"score":2,"creation_date":1640841036,"post_id":70526142,"comment_id":124672016,"body_markdown":"If you further on want more control,  implement your own TableCellRenderer.","body":"If you further on want more control,  implement your own TableCellRenderer."}],"owner":{"account_id":23779595,"reputation":1,"user_id":17792478,"display_name":"Pedromdsn"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":89,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1640875849,"creation_date":1640821461,"question_id":70526142,"body_markdown":"I&#39;m trying to create a list of labels in java swing.\r\n\r\nMain Code:\r\n```        \r\nJLabel local = new JLabel();\r\nlocal.setBackground(new Color(186, 79, 84));\r\nlocal.setFont(new Font(&quot;SansSerif&quot;, Font.BOLD, 10));\r\nlocal.setForeground(new Color(255, 255, 255));\r\nlocal.setText(&quot;Local&quot;);\r\n\r\n\r\nJTable list = new JTable(new JLabel[][]{{local}}, new String[]{&quot;Local&quot;});\r\n```\r\n\r\n\r\n\r\nBut it&#39;s giving me a little problem.\r\n\r\n![Error][2]\r\n\r\nWhat would be the best way, the goal would be to create a vertical list with one item on each line.\r\n\r\n![Objective][1]\r\n  \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/iU5if.png\r\n  [2]: https://i.stack.imgur.com/DE8qK.png","title":"How i can add a list of JLabels in Java Swing","body":"<p>I'm trying to create a list of labels in java swing.</p>\n<p>Main Code:</p>\n<pre><code>JLabel local = new JLabel();\nlocal.setBackground(new Color(186, 79, 84));\nlocal.setFont(new Font(&quot;SansSerif&quot;, Font.BOLD, 10));\nlocal.setForeground(new Color(255, 255, 255));\nlocal.setText(&quot;Local&quot;);\n\n\nJTable list = new JTable(new JLabel[][]{{local}}, new String[]{&quot;Local&quot;});\n</code></pre>\n<p>But it's giving me a little problem.</p>\n<p><img src=\"https://i.stack.imgur.com/DE8qK.png\" alt=\"Error\" /></p>\n<p>What would be the best way, the goal would be to create a vertical list with one item on each line.</p>\n<p><img src=\"https://i.stack.imgur.com/iU5if.png\" alt=\"Objective\" /></p>\n"},{"tags":["java","apache-spark"],"comments":[{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1640821743,"post_id":70525779,"comment_id":124669208,"body_markdown":"Please add the complete stacktrace so that we can see where (in your code and the Spark code) the exception is happening.","body":"Please add the complete stacktrace so that we can see where (in your code and the Spark code) the exception is happening."},{"owner":{"account_id":320466,"reputation":8954,"user_id":638764,"display_name":"mazaneicha"},"score":1,"creation_date":1640874467,"post_id":70525779,"comment_id":124680668,"body_markdown":"Also, `...java.lang.String and java.lang.Integer are in module java.base...` doesnt look like JDK-8. Modules were added to JDK starting with version **9**.","body":"Also, <code>...java.lang.String and java.lang.Integer are in module java.base...</code> doesnt look like JDK-8. Modules were added to JDK starting with version <b>9</b>."},{"owner":{"account_id":3197074,"reputation":1,"user_id":2700029,"display_name":"Freddy C"},"score":0,"creation_date":1640875885,"post_id":70525779,"comment_id":124681124,"body_markdown":"Added full stack trace. Previously test was run using JDK-11 targeting JDK-8. I used JDK-8 to compile and run it and updated stack with the information","body":"Added full stack trace. Previously test was run using JDK-11 targeting JDK-8. I used JDK-8 to compile and run it and updated stack with the information"}],"owner":{"account_id":3197074,"reputation":1,"user_id":2700029,"display_name":"Freddy C"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1640875832,"creation_date":1640818066,"question_id":70525779,"body_markdown":"I have been working with Spark and ran into a seemingly strange issue. When executing the same Function class (different instances) to the Spark API with different types of RDD - Spark throws a ClassCastException. I have put together some basic code that shows how the concept works when using a `Function` from the Spark package, but does not work when using the Java Util `Function`.\r\n\r\nI would like to understand why this happens. I am able to work around this by explicitly using the Spark Function API but not sure what is causing the difference.\r\n\r\nThis is using Spark-3 and JDK-8.\r\n\r\nBelow are two tests - one with the SparkFunction that works and one with Java Util Function that fails with the error.\r\n\r\n```java \r\nclass SparkTest {\r\n\r\n    private static final SparkSession sparkSession = createSparkSession();\r\n    private static final JavaSparkContext sparkContext = new JavaSparkContext(sparkSession.sparkContext());\r\n\r\n    private static SparkSession createSparkSession() {\r\n        return SparkSession.builder()\r\n                .config(createSparkConf())\r\n                .getOrCreate();\r\n    }\r\n\r\n    private static SparkConf createSparkConf() {\r\n        return new SparkConf()\r\n                .setAppName(&quot;Test&quot;)\r\n                .setMaster(&quot;local&quot;)\r\n                .set(&quot;spark.serializer&quot;, &quot;org.apache.spark.serializer.KryoSerializer&quot;);\r\n    }\r\n\r\n    @Test\r\n    void test_withSparkFunctionMapper_succeeds() {\r\n        JavaRDD&lt;Integer&gt; ints = sparkContext.parallelize(Lists.newArrayList(1, 2, 3, 4));\r\n        JavaRDD&lt;String&gt; strings = sparkContext.parallelize(Lists.newArrayList(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;, &quot;f&quot;));\r\n\r\n        JavaRDD&lt;Integer&gt; newInts = ints.map(new MySparkMapper&lt;&gt;());\r\n        JavaRDD&lt;String&gt; newStrings = strings.map(new MySparkMapper&lt;&gt;());\r\n\r\n        System.out.println(newInts.collect());\r\n        System.out.println(newStrings.collect());\r\n    }\r\n\r\n    @Test\r\n    void test_withJavaFunctionMapper_fails() {\r\n        JavaRDD&lt;Integer&gt; ints = sparkContext.parallelize(Lists.newArrayList(1, 2, 3, 4));\r\n        JavaRDD&lt;String&gt; strings = sparkContext.parallelize(Lists.newArrayList(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;, &quot;f&quot;));\r\n\r\n        JavaRDD&lt;Integer&gt; newInts = ints.map(new MyJavaMapper&lt;Integer&gt;()::apply);\r\n        JavaRDD&lt;String&gt; newStrings = strings.map(new MyJavaMapper&lt;String&gt;()::apply);\r\n\r\n        System.out.println(newInts.collect());\r\n        System.out.println(newStrings.collect());\r\n    }\r\n\r\n    private static class MySparkMapper&lt;I&gt; implements org.apache.spark.api.java.function.Function&lt;I, I&gt; {\r\n\r\n        @Override\r\n        public I call(I i) throws Exception {\r\n            return i;\r\n        }\r\n    }\r\n\r\n    private static class MyJavaMapper&lt;I&gt; implements java.util.function.Function&lt;I, I&gt;, Serializable {\r\n\r\n        @Override\r\n        public I apply(I i) {\r\n            return i;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nException: `java.lang.ClassCastException: java.lang.String cannot be cast to java.lang.Integer\r\n            at org.apache.spark.api.java.JavaPairRDD$.$anonfun$toScalaFunction$1(JavaPairRDD.scala:1070)\r\n            at scala.collection.Iterator$$anon$10.next(Iterator.scala:461)\r\n            at scala.collection.Iterator.foreach(Iterator.scala:943)\r\n            at scala.collection.Iterator.foreach$(Iterator.scala:943)\r\n            at scala.collection.AbstractIterator.foreach(Iterator.scala:1431)\r\n            at scala.collection.generic.Growable.$plus$plus$eq(Growable.scala:62)\r\n            at scala.collection.generic.Growable.$plus$plus$eq$(Growable.scala:53)\r\n            at scala.collection.mutable.ArrayBuffer.$plus$plus$eq(ArrayBuffer.scala:105)\r\n            at scala.collection.mutable.ArrayBuffer.$plus$plus$eq(ArrayBuffer.scala:49)\r\n            at scala.collection.TraversableOnce.to(TraversableOnce.scala:366)\r\n            at scala.collection.TraversableOnce.to$(TraversableOnce.scala:364)\r\n            at scala.collection.AbstractIterator.to(Iterator.scala:1431)\r\n            at scala.collection.TraversableOnce.toBuffer(TraversableOnce.scala:358)\r\n            at scala.collection.TraversableOnce.toBuffer$(TraversableOnce.scala:358)\r\n            at scala.collection.AbstractIterator.toBuffer(Iterator.scala:1431)\r\n            at scala.collection.TraversableOnce.toArray(TraversableOnce.scala:345)\r\n            at scala.collection.TraversableOnce.toArray$(TraversableOnce.scala:339)\r\n            at scala.collection.AbstractIterator.toArray(Iterator.scala:1431)\r\n            at org.apache.spark.rdd.RDD.$anonfun$collect$2(RDD.scala:1030)\r\n            at org.apache.spark.SparkContext.$anonfun$runJob$5(SparkContext.scala:2236)\r\n            at org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:90)\r\n            at org.apache.spark.scheduler.Task.run(Task.scala:131)\r\n            at org.apache.spark.executor.Executor$TaskRunner.$anonfun$run$3(Executor.scala:497)\r\n            at org.apache.spark.util.Utils$.tryWithSafeFinally(Utils.scala:1439)\r\n            at org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:500)\r\n            at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n            at java.lang.Thread.run(Thread.java:749)`\r\n\r\n","title":"Why does using a different Java Function instance across different RDDs throw a ClassCastException?","body":"<p>I have been working with Spark and ran into a seemingly strange issue. When executing the same Function class (different instances) to the Spark API with different types of RDD - Spark throws a ClassCastException. I have put together some basic code that shows how the concept works when using a <code>Function</code> from the Spark package, but does not work when using the Java Util <code>Function</code>.</p>\n<p>I would like to understand why this happens. I am able to work around this by explicitly using the Spark Function API but not sure what is causing the difference.</p>\n<p>This is using Spark-3 and JDK-8.</p>\n<p>Below are two tests - one with the SparkFunction that works and one with Java Util Function that fails with the error.</p>\n<pre class=\"lang-java prettyprint-override\"><code>class SparkTest {\n\n    private static final SparkSession sparkSession = createSparkSession();\n    private static final JavaSparkContext sparkContext = new JavaSparkContext(sparkSession.sparkContext());\n\n    private static SparkSession createSparkSession() {\n        return SparkSession.builder()\n                .config(createSparkConf())\n                .getOrCreate();\n    }\n\n    private static SparkConf createSparkConf() {\n        return new SparkConf()\n                .setAppName(&quot;Test&quot;)\n                .setMaster(&quot;local&quot;)\n                .set(&quot;spark.serializer&quot;, &quot;org.apache.spark.serializer.KryoSerializer&quot;);\n    }\n\n    @Test\n    void test_withSparkFunctionMapper_succeeds() {\n        JavaRDD&lt;Integer&gt; ints = sparkContext.parallelize(Lists.newArrayList(1, 2, 3, 4));\n        JavaRDD&lt;String&gt; strings = sparkContext.parallelize(Lists.newArrayList(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;, &quot;f&quot;));\n\n        JavaRDD&lt;Integer&gt; newInts = ints.map(new MySparkMapper&lt;&gt;());\n        JavaRDD&lt;String&gt; newStrings = strings.map(new MySparkMapper&lt;&gt;());\n\n        System.out.println(newInts.collect());\n        System.out.println(newStrings.collect());\n    }\n\n    @Test\n    void test_withJavaFunctionMapper_fails() {\n        JavaRDD&lt;Integer&gt; ints = sparkContext.parallelize(Lists.newArrayList(1, 2, 3, 4));\n        JavaRDD&lt;String&gt; strings = sparkContext.parallelize(Lists.newArrayList(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;, &quot;f&quot;));\n\n        JavaRDD&lt;Integer&gt; newInts = ints.map(new MyJavaMapper&lt;Integer&gt;()::apply);\n        JavaRDD&lt;String&gt; newStrings = strings.map(new MyJavaMapper&lt;String&gt;()::apply);\n\n        System.out.println(newInts.collect());\n        System.out.println(newStrings.collect());\n    }\n\n    private static class MySparkMapper&lt;I&gt; implements org.apache.spark.api.java.function.Function&lt;I, I&gt; {\n\n        @Override\n        public I call(I i) throws Exception {\n            return i;\n        }\n    }\n\n    private static class MyJavaMapper&lt;I&gt; implements java.util.function.Function&lt;I, I&gt;, Serializable {\n\n        @Override\n        public I apply(I i) {\n            return i;\n        }\n    }\n}\n</code></pre>\n<p>Exception: <code>java.lang.ClassCastException: java.lang.String cannot be cast to java.lang.Integer at org.apache.spark.api.java.JavaPairRDD$.$anonfun$toScalaFunction$1(JavaPairRDD.scala:1070) at scala.collection.Iterator$$anon$10.next(Iterator.scala:461) at scala.collection.Iterator.foreach(Iterator.scala:943) at scala.collection.Iterator.foreach$(Iterator.scala:943) at scala.collection.AbstractIterator.foreach(Iterator.scala:1431) at scala.collection.generic.Growable.$plus$plus$eq(Growable.scala:62) at scala.collection.generic.Growable.$plus$plus$eq$(Growable.scala:53) at scala.collection.mutable.ArrayBuffer.$plus$plus$eq(ArrayBuffer.scala:105) at scala.collection.mutable.ArrayBuffer.$plus$plus$eq(ArrayBuffer.scala:49) at scala.collection.TraversableOnce.to(TraversableOnce.scala:366) at scala.collection.TraversableOnce.to$(TraversableOnce.scala:364) at scala.collection.AbstractIterator.to(Iterator.scala:1431) at scala.collection.TraversableOnce.toBuffer(TraversableOnce.scala:358) at scala.collection.TraversableOnce.toBuffer$(TraversableOnce.scala:358) at scala.collection.AbstractIterator.toBuffer(Iterator.scala:1431) at scala.collection.TraversableOnce.toArray(TraversableOnce.scala:345) at scala.collection.TraversableOnce.toArray$(TraversableOnce.scala:339) at scala.collection.AbstractIterator.toArray(Iterator.scala:1431) at org.apache.spark.rdd.RDD.$anonfun$collect$2(RDD.scala:1030) at org.apache.spark.SparkContext.$anonfun$runJob$5(SparkContext.scala:2236) at org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:90) at org.apache.spark.scheduler.Task.run(Task.scala:131) at org.apache.spark.executor.Executor$TaskRunner.$anonfun$run$3(Executor.scala:497) at org.apache.spark.util.Utils$.tryWithSafeFinally(Utils.scala:1439) at org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:500) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) at java.lang.Thread.run(Thread.java:749)</code></p>\n"},{"tags":["java","itext","thymeleaf","itext7"],"comments":[{"owner":{"account_id":1779372,"reputation":76344,"user_id":1622493,"display_name":"Bruno Lowagie"},"score":1,"creation_date":1516796990,"post_id":48422409,"comment_id":83834425,"body_markdown":"You mention `ITextRenderer`. This means that you are using Flying Saucer, a 3rd party product that uses an obsolete version of iText [that should no longer be used in production](https://developers.itextpdf.com/question/versions-older-than-5) and that most certainly doesn&#39;t use iText 7 (if it does, it&#39;s doing something illegal). If you want to use iText 7, read [Converting HTML to PDF](https://stackoverflow.com/questions/47895935/converting-html-to-pdf-using-itext); also read [this answer](https://stackoverflow.com/questions/48018716/itextsharp-pdf-resize-and-data-alignment/48021729#48021729).","body":"You mention <code>ITextRenderer</code>. This means that you are using Flying Saucer, a 3rd party product that uses an obsolete version of iText <a href=\"https://developers.itextpdf.com/question/versions-older-than-5\" rel=\"nofollow noreferrer\">that should no longer be used in production</a> and that most certainly doesn&#39;t use iText 7 (if it does, it&#39;s doing something illegal). If you want to use iText 7, read <a href=\"https://stackoverflow.com/questions/47895935/converting-html-to-pdf-using-itext\">Converting HTML to PDF</a>; also read <a href=\"https://stackoverflow.com/questions/48018716/itextsharp-pdf-resize-and-data-alignment/48021729#48021729\">this answer</a>."}],"answers":[{"tags":[],"owner":{"account_id":8057888,"reputation":8599,"user_id":6074376,"accept_rate":60,"display_name":"Joris Schellekens"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1516797101,"creation_date":1516797101,"answer_id":48422566,"question_id":48422409,"body_markdown":"Please be aware that you are using `FlyingSaucer`, not `iText`.\r\n`FlyingSaucer` is a product that internally uses (a very old version of) `iText`.\r\n\r\nYou are immediately cutting yourself off from 10+ years of bugfixes and developments.\r\n\r\nIf you are comfortable going for just `iText`, the best way of solving this issue is with pdfHTML.\r\n\r\nIt&#39;s an add-on we wrote to the iText7 core library that is specifically designed to convert HTML into PDF.\r\n\r\nSimple example:\r\n\r\n        File src = new File(&quot;source_html_file.html&quot;);\r\n        File dest = new File(&quot;target_pdf_file.pdf&quot;);\r\n\r\n        PdfDocument pdf = new PdfDocument(new PdfWriter(dest));\r\n        Document doc = new Document(pdf, PageSize.A4);\r\n        InputStream stream = new FileInputStream(src);\r\n\r\n        ConverterProperties converterProperties = new ConverterProperties();\r\n        FontProvider dfp = new DefaultFontProvider(true, true, true);\r\n        converterProperties.setFontProvider(dfp);\r\n\r\n        HtmlConverter.convertToPdf(stream, pdf, converterProperties);\r\n\r\nCheck out the tutorials online for more information\r\nhttps://developers.itextpdf.com/content/itext-7-examples/itext-7-converting-html-pdf","title":"How to set PDF page size A4 when we use ITextRenderer to generate PDF from thymeleaf HTML template?","body":"<p>Please be aware that you are using <code>FlyingSaucer</code>, not <code>iText</code>.\n<code>FlyingSaucer</code> is a product that internally uses (a very old version of) <code>iText</code>.</p>\n\n<p>You are immediately cutting yourself off from 10+ years of bugfixes and developments.</p>\n\n<p>If you are comfortable going for just <code>iText</code>, the best way of solving this issue is with pdfHTML.</p>\n\n<p>It's an add-on we wrote to the iText7 core library that is specifically designed to convert HTML into PDF.</p>\n\n<p>Simple example:</p>\n\n<pre><code>    File src = new File(\"source_html_file.html\");\n    File dest = new File(\"target_pdf_file.pdf\");\n\n    PdfDocument pdf = new PdfDocument(new PdfWriter(dest));\n    Document doc = new Document(pdf, PageSize.A4);\n    InputStream stream = new FileInputStream(src);\n\n    ConverterProperties converterProperties = new ConverterProperties();\n    FontProvider dfp = new DefaultFontProvider(true, true, true);\n    converterProperties.setFontProvider(dfp);\n\n    HtmlConverter.convertToPdf(stream, pdf, converterProperties);\n</code></pre>\n\n<p>Check out the tutorials online for more information\n<a href=\"https://developers.itextpdf.com/content/itext-7-examples/itext-7-converting-html-pdf\" rel=\"noreferrer\">https://developers.itextpdf.com/content/itext-7-examples/itext-7-converting-html-pdf</a></p>\n"},{"tags":[],"owner":{"account_id":1988279,"reputation":7009,"user_id":1782954,"accept_rate":71,"display_name":"javabeangrinder"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640875459,"creation_date":1640875459,"answer_id":70533138,"question_id":48422409,"body_markdown":"To fix this issue using jsoup, xhtmlrenderer from flying-saucer-pdf-openpdf just set this in your html-document:\r\n\r\n    @page {\r\n        size: A4;\r\n    }","title":"How to set PDF page size A4 when we use ITextRenderer to generate PDF from thymeleaf HTML template?","body":"<p>To fix this issue using jsoup, xhtmlrenderer from flying-saucer-pdf-openpdf just set this in your html-document:</p>\n<pre><code>@page {\n    size: A4;\n}\n</code></pre>\n"}],"owner":{"account_id":12418760,"reputation":279,"user_id":9046818,"accept_rate":0,"display_name":"Ketan Navadiya"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11971,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1640875459,"creation_date":1516796605,"question_id":48422409,"body_markdown":"How to set PDF page size A4 when we use ITextRenderer to generate PDF from thymeleaf HTML template ?\r\n\r\nI have generated PDF but page size is not proper, how to set page size A4 ITextRenderer library in JAVA\r\n\r\n\r\n        ClassLoaderTemplateResolver templateResolver = new \r\n        ClassLoaderTemplateResolver();\r\n        templateResolver.setSuffix(&quot;.html&quot;);\r\n        templateResolver.setTemplateMode(&quot;HTML5&quot;);\r\n        \r\n        TemplateEngine templateEngine = new TemplateEngine();\r\n        templateEngine.setTemplateResolver(templateResolver);\r\n        \r\n        Context context = new Context();\r\n        context.setVariable(&quot;name&quot;, &quot;Thomas&quot;);\r\n        \r\n        String html = templateEngine.process(&quot;templates/Quote&quot;, context);\r\n\r\n        OutputStream outputStream = new FileOutputStream(&quot;message.pdf&quot;);\r\n\t    ITextRenderer renderer = new ITextRenderer();\r\n\t    renderer.setDocumentFromString(html);\r\n\t    renderer.layout();\r\n\t    renderer.createPDF(outputStream,true);\r\n\t    outputStream.close();","title":"How to set PDF page size A4 when we use ITextRenderer to generate PDF from thymeleaf HTML template?","body":"<p>How to set PDF page size A4 when we use ITextRenderer to generate PDF from thymeleaf HTML template ?</p>\n\n<p>I have generated PDF but page size is not proper, how to set page size A4 ITextRenderer library in JAVA</p>\n\n<pre><code>    ClassLoaderTemplateResolver templateResolver = new \n    ClassLoaderTemplateResolver();\n    templateResolver.setSuffix(\".html\");\n    templateResolver.setTemplateMode(\"HTML5\");\n\n    TemplateEngine templateEngine = new TemplateEngine();\n    templateEngine.setTemplateResolver(templateResolver);\n\n    Context context = new Context();\n    context.setVariable(\"name\", \"Thomas\");\n\n    String html = templateEngine.process(\"templates/Quote\", context);\n\n    OutputStream outputStream = new FileOutputStream(\"message.pdf\");\n    ITextRenderer renderer = new ITextRenderer();\n    renderer.setDocumentFromString(html);\n    renderer.layout();\n    renderer.createPDF(outputStream,true);\n    outputStream.close();\n</code></pre>\n"},{"tags":["java","selenium-webdriver","safari"],"comments":[{"owner":{"account_id":18916915,"reputation":738,"user_id":13801789,"display_name":"yuuuu"},"score":0,"creation_date":1640780034,"post_id":70519198,"comment_id":124656199,"body_markdown":"One way to fix the error is to get a correct TLS certificate.","body":"One way to fix the error is to get a correct TLS certificate."},{"owner":{"account_id":7302867,"reputation":299,"user_id":5564903,"display_name":"Stefan D."},"score":0,"creation_date":1640784438,"post_id":70519198,"comment_id":124657667,"body_markdown":"Please provide a bit more information about the certificate: What type of certificat is it? One of an accredited CA or a slef signed? If CA certificate, is the CA root certificate/certificate chain valid?  Is the certificate valid and usable for HTTPS server connection? If it is a server certificate, does the CN match the DNS hostname?","body":"Please provide a bit more information about the certificate: What type of certificat is it? One of an accredited CA or a slef signed? If CA certificate, is the CA root certificate/certificate chain valid?  Is the certificate valid and usable for HTTPS server connection? If it is a server certificate, does the CN match the DNS hostname?"},{"owner":{"account_id":18053746,"reputation":119,"user_id":13122761,"display_name":"mr_Stat1c"},"score":1,"creation_date":1640845658,"post_id":70519198,"comment_id":124672734,"body_markdown":"@StefanD. hi! the browser is launched by a remote web driver provided by Moon (Selenoid), I dont want to configure correct certificates, I want to ignore this checks. As I know the capability &#39;ACCEPT_INSECURE_CERTS&#39; should fix this behavior, but for Safari it doesn&#39;t work","body":"@StefanD. hi! the browser is launched by a remote web driver provided by Moon (Selenoid), I dont want to configure correct certificates, I want to ignore this checks. As I know the capability &#39;ACCEPT_INSECURE_CERTS&#39; should fix this behavior, but for Safari it doesn&#39;t work"}],"answers":[{"tags":[],"owner":{"account_id":7302867,"reputation":299,"user_id":5564903,"display_name":"Stefan D."},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640874982,"creation_date":1640874982,"answer_id":70533062,"question_id":70519198,"body_markdown":"It seems that Safari tighten up the security policy by removing options that are considered as insecure. \r\n\r\nSo, frankly spoken, if you try to fix your issue with a workaround or &#39;dirty hack&#39; you just postpone it to a later date and browser version. The only way out is IMHO to get things done the right way and solve the problem.\r\n\r\nRequest a new certificate from a official Certification Authority if you need public access to your server or set up your own CA to get rid of the &#39;self-signed certificate&#39; trap.\r\n\r\nSeting up a CA is not the big thing. Ther is a lot of free/open-source and commercial tools available so you can choose one that fits best your needs.\r\n \r\nCreating your root and server certificate is done in no time. Installing the new certificate in the server is a bit more because you have a downtime. And last but not least your own root certificate must be installed in the browsers truststore for user certificates. But that&#39;s also a easy task. \r\n\r\nThe benefit of this way is that you are done even if you update your browser.","title":"Safari . How to ignore error Incorrect TLS certificate","body":"<p>It seems that Safari tighten up the security policy by removing options that are considered as insecure.</p>\n<p>So, frankly spoken, if you try to fix your issue with a workaround or 'dirty hack' you just postpone it to a later date and browser version. The only way out is IMHO to get things done the right way and solve the problem.</p>\n<p>Request a new certificate from a official Certification Authority if you need public access to your server or set up your own CA to get rid of the 'self-signed certificate' trap.</p>\n<p>Seting up a CA is not the big thing. Ther is a lot of free/open-source and commercial tools available so you can choose one that fits best your needs.</p>\n<p>Creating your root and server certificate is done in no time. Installing the new certificate in the server is a bit more because you have a downtime. And last but not least your own root certificate must be installed in the browsers truststore for user certificates. But that's also a easy task.</p>\n<p>The benefit of this way is that you are done even if you update your browser.</p>\n"}],"owner":{"account_id":18053746,"reputation":119,"user_id":13122761,"display_name":"mr_Stat1c"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":746,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1640874982,"creation_date":1640779691,"question_id":70519198,"body_markdown":"I use Selenium Web Driver. My capabilities\r\n```\r\n  this.desiredCapabilities = new DesiredCapabilities();\r\n        this.desiredCapabilities.setCapability(&quot;enableVNC&quot;, true);\r\n        this.desiredCapabilities.setCapability(&quot;enableVideo&quot;, false);\r\n        this.desiredCapabilities.setCapability(CapabilityType.ACCEPT_INSECURE_CERTS, true);\r\n        this.desiredCapabilities.setCapability(CapabilityType.ACCEPT_SSL_CERTS, true);\r\n        this.desiredCapabilities.setCapability(ChromeOptions.CAPABILITY, this.chromeOptions);\r\n        this.desiredCapabilities.setCapability(&quot;sessionTimeout&quot;, &quot;15m&quot;);\r\n```\r\nWhen **desktop Safari** browser try to open the page by HTTPS, an error occurs &quot;Incorrect TLS certificate...Failed to load &lt;my Url&gt; Do you want to continue ignoring the TLS errors? YES/NO&quot;\r\n\r\nHow I can ignore this behavior for all web pages? This behavior does not occur for other browsers (Chrome/Firefox/Edge).\r\n\r\nthe following guides did not help:\r\nhttps://www.browserstack.com/docs/automate/selenium/accept-insecure-certificates\r\nhttps://www.toolsqa.com/selenium-webdriver/ssl-certificate-in-selenium/ ","title":"Safari . How to ignore error Incorrect TLS certificate","body":"<p>I use Selenium Web Driver. My capabilities</p>\n<pre><code>  this.desiredCapabilities = new DesiredCapabilities();\n        this.desiredCapabilities.setCapability(&quot;enableVNC&quot;, true);\n        this.desiredCapabilities.setCapability(&quot;enableVideo&quot;, false);\n        this.desiredCapabilities.setCapability(CapabilityType.ACCEPT_INSECURE_CERTS, true);\n        this.desiredCapabilities.setCapability(CapabilityType.ACCEPT_SSL_CERTS, true);\n        this.desiredCapabilities.setCapability(ChromeOptions.CAPABILITY, this.chromeOptions);\n        this.desiredCapabilities.setCapability(&quot;sessionTimeout&quot;, &quot;15m&quot;);\n</code></pre>\n<p>When <strong>desktop Safari</strong> browser try to open the page by HTTPS, an error occurs &quot;Incorrect TLS certificate...Failed to load  Do you want to continue ignoring the TLS errors? YES/NO&quot;</p>\n<p>How I can ignore this behavior for all web pages? This behavior does not occur for other browsers (Chrome/Firefox/Edge).</p>\n<p>the following guides did not help:\n<a href=\"https://www.browserstack.com/docs/automate/selenium/accept-insecure-certificates\" rel=\"nofollow noreferrer\">https://www.browserstack.com/docs/automate/selenium/accept-insecure-certificates</a>\n<a href=\"https://www.toolsqa.com/selenium-webdriver/ssl-certificate-in-selenium/\" rel=\"nofollow noreferrer\">https://www.toolsqa.com/selenium-webdriver/ssl-certificate-in-selenium/</a></p>\n"},{"tags":["java","android","android-studio","audio","android-mediaplayer"],"answers":[{"tags":[],"owner":{"account_id":5282904,"reputation":18287,"user_id":4217682,"accept_rate":50,"display_name":"snachmsm"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1627540900,"creation_date":1627540900,"answer_id":68571236,"question_id":68571194,"body_markdown":"in second case you havent created `MediaPlayer` instance at all\r\n\r\n    MediaPlayer audio;\r\n\r\nso every `audio.anyMethodCall()` will throw `NullPointerException`\r\n\r\njust keep `audio = MediaPlayer.create(this, R.raw.my_audio);` line in `onCreate`, thats proper place for initing player\r\n\r\nand please learn some basics about programming...","title":"Why MediaPlayer can&#39;t be set in MainActivity?","body":"<p>in second case you havent created <code>MediaPlayer</code> instance at all</p>\n<pre><code>MediaPlayer audio;\n</code></pre>\n<p>so every <code>audio.anyMethodCall()</code> will throw <code>NullPointerException</code></p>\n<p>just keep <code>audio = MediaPlayer.create(this, R.raw.my_audio);</code> line in <code>onCreate</code>, thats proper place for initing player</p>\n<p>and please learn some basics about programming...</p>\n"},{"tags":[],"owner":{"account_id":12621038,"reputation":433,"user_id":9176523,"display_name":"Dheeraj Gupta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1627541391,"creation_date":1627541391,"answer_id":68571331,"question_id":68571194,"body_markdown":"    private MediaPlayer audio;\r\n\r\noncreate method\r\n\r\n     audio= MediaPlayer.create(this, R.raw.shape_of_you);\r\n                        audio.start();\r\n\r\n\r\nYou can do something like this","title":"Why MediaPlayer can&#39;t be set in MainActivity?","body":"<pre><code>private MediaPlayer audio;\n</code></pre>\n<p>oncreate method</p>\n<pre><code> audio= MediaPlayer.create(this, R.raw.shape_of_you);\n                    audio.start();\n</code></pre>\n<p>You can do something like this</p>\n"},{"tags":[],"owner":{"account_id":20529400,"reputation":55,"user_id":15067071,"display_name":"Fardeen Khan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640874751,"creation_date":1640874751,"answer_id":70533034,"question_id":68571194,"body_markdown":"The Correct code should be:\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n        \r\n        \r\n        MediaPlayer audio;\r\n        \r\n            public void play(View view){\r\n        \r\n                audio.start();\r\n            }\r\n            public void pause(View view){\r\n               \r\n                    audio.pause();\r\n            }\r\n        \r\n            @Override\r\n            protected void onCreate(Bundle savedInstanceState) {\r\n                super.onCreate(savedInstanceState);\r\n                setContentView(R.layout.activity_main);\r\n            }\r\n        }\r\n\r\nthe only change I did was removing declaration before oncreate method:\r\n\r\n**Earlier:**\r\n\r\n    MediaPlayer audio = MediaPlayer.create(this, R.raw.my_audio);\r\n\r\n**Correct Code:**\r\n\r\n    MediaPlayer audio;\r\n\r\n**Explanation:**\r\n\r\n   1. onCreate()  method is for definition like *adding audio to `MediaPlayer`, defining `textView`, etc,* since onCreate() gets triggered after creation of activity(activity_main).\r\n   2. You added audio 2 times, which is not needed, you added an audio at first and then replace it with another audio in onCreate() method\r\n\r\n","title":"Why MediaPlayer can&#39;t be set in MainActivity?","body":"<p>The Correct code should be:</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n    \n    \n    MediaPlayer audio;\n    \n        public void play(View view){\n    \n            audio.start();\n        }\n        public void pause(View view){\n           \n                audio.pause();\n        }\n    \n        @Override\n        protected void onCreate(Bundle savedInstanceState) {\n            super.onCreate(savedInstanceState);\n            setContentView(R.layout.activity_main);\n        }\n    }\n</code></pre>\n<p>the only change I did was removing declaration before oncreate method:</p>\n<p><strong>Earlier:</strong></p>\n<pre><code>MediaPlayer audio = MediaPlayer.create(this, R.raw.my_audio);\n</code></pre>\n<p><strong>Correct Code:</strong></p>\n<pre><code>MediaPlayer audio;\n</code></pre>\n<p><strong>Explanation:</strong></p>\n<ol>\n<li>onCreate()  method is for definition like <em>adding audio to <code>MediaPlayer</code>, defining <code>textView</code>, etc,</em> since onCreate() gets triggered after creation of activity(activity_main).</li>\n<li>You added audio 2 times, which is not needed, you added an audio at first and then replace it with another audio in onCreate() method</li>\n</ol>\n"}],"owner":{"account_id":22330190,"reputation":5,"user_id":16551545,"display_name":"Lina"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":3,"score":-1,"last_activity_date":1640874751,"creation_date":1627540666,"question_id":68571194,"body_markdown":"Why when I create the MediaPlayer variable in the Main Activity, the app crashes?\r\n\r\n**( This code works fine )**\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n    \r\n    \r\n    MediaPlayer audio = MediaPlayer.create(this, R.raw.my_audio);\r\n    \r\n        public void play(View view){\r\n    \r\n            audio.start();\r\n        }\r\n        public void pause(View view){\r\n           \r\n                audio.pause();\r\n        }\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n            audio = MediaPlayer.create(this, R.raw.my_audio);\r\n    \r\n        }\r\n    }\r\n\r\n( But this code doesn&#39;t work; the app crashes)\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n        \r\n        \r\n        MediaPlayer audio = MediaPlayer.create(this, R.raw.my_audio);\r\n        \r\n            public void play(View view){\r\n        \r\n                audio.start();\r\n            }\r\n            public void pause(View view){\r\n               \r\n                    audio.pause();\r\n            }\r\n        \r\n            @Override\r\n            protected void onCreate(Bundle savedInstanceState) {\r\n                super.onCreate(savedInstanceState);\r\n                setContentView(R.layout.activity_main);\r\n            }\r\n        }\r\n\r\n**PLEASE give me an explanation :(**","title":"Why MediaPlayer can&#39;t be set in MainActivity?","body":"<p>Why when I create the MediaPlayer variable in the Main Activity, the app crashes?</p>\n<p><strong>( This code works fine )</strong></p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n\nMediaPlayer audio = MediaPlayer.create(this, R.raw.my_audio);\n\n    public void play(View view){\n\n        audio.start();\n    }\n    public void pause(View view){\n       \n            audio.pause();\n    }\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        audio = MediaPlayer.create(this, R.raw.my_audio);\n\n    }\n}\n</code></pre>\n<p>( But this code doesn't work; the app crashes)</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n    \n    \n    MediaPlayer audio = MediaPlayer.create(this, R.raw.my_audio);\n    \n        public void play(View view){\n    \n            audio.start();\n        }\n        public void pause(View view){\n           \n                audio.pause();\n        }\n    \n        @Override\n        protected void onCreate(Bundle savedInstanceState) {\n            super.onCreate(savedInstanceState);\n            setContentView(R.layout.activity_main);\n        }\n    }\n</code></pre>\n<p><strong>PLEASE give me an explanation :(</strong></p>\n"},{"tags":["java","http-proxy","okhttp"],"comments":[{"owner":{"account_id":104236,"reputation":2064,"user_id":278800,"accept_rate":58,"display_name":"Steve K"},"score":0,"creation_date":1626813792,"post_id":38154628,"comment_id":120992269,"body_markdown":"If you&#39;d prefer to use an environment variable, in my experience OkHttp seems to respect `no_proxy` / `NO_PROXY`. E.g. you can `export no_proxy=localhost,127.0.0.1` before you run the VM.","body":"If you&#39;d prefer to use an environment variable, in my experience OkHttp seems to respect <code>no_proxy</code> / <code>NO_PROXY</code>. E.g. you can <code>export no_proxy=localhost,127.0.0.1</code> before you run the VM."}],"answers":[{"tags":[],"owner":{"account_id":17735,"reputation":39493,"user_id":40013,"accept_rate":75,"display_name":"Jesse Wilson"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1467687810,"creation_date":1467687810,"answer_id":38194632,"question_id":38154628,"body_markdown":"The API you&#39;re looking for is [ProxySelector](https://docs.oracle.com/javase/7/docs/api/java/net/ProxySelector.html). You can configure this on your OkHttpClient.","title":"Non proxy hosts for OkHttp3","body":"<p>The API you're looking for is <a href=\"https://docs.oracle.com/javase/7/docs/api/java/net/ProxySelector.html\" rel=\"nofollow\">ProxySelector</a>. You can configure this on your OkHttpClient.</p>\n"},{"tags":[],"owner":{"account_id":1920479,"reputation":7969,"user_id":1732123,"accept_rate":89,"display_name":"Carlos Alberto"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1468910485,"creation_date":1467750526,"answer_id":38212177,"question_id":38154628,"body_markdown":"After digging around a bit, I have found out how to do it.\r\n\r\nSo I had to create a [`ProxySelector`][1] implementing the logic when the proxy should be applied or not.\r\n\r\nExample:\r\n-\r\n\r\n    final ProxySelector proxySelector = new ProxySelector() {\r\n    \t@Override\r\n    \tpublic java.util.List&lt;Proxy&gt; select(final URI uri) {\r\n    \t\tfinal List&lt;Proxy&gt; proxyList = new ArrayList&lt;Proxy&gt;(1);\r\n    \r\n    \t\t// Host\r\n    \t\tfinal String host = uri.getHost();\r\n    \r\n    \t\t// Is an internal host\r\n    \t\tif (host.startsWith(&quot;127.0.0.1&quot;) || StringUtils.contains(nonProxyHostsValue, host)) {\r\n    \t\t\tproxyList.add(Proxy.NO_PROXY);\r\n    \t\t} else {\r\n    \t\t\t// Add proxy\r\n    \t\t\tproxyList.add(new Proxy(Type.HTTP,\r\n    \t\t\t\t\tnew InetSocketAddress(proxyHostNameValue, Integer.parseInt(proxyPortValue))));\r\n    \t\t}\r\n    \r\n    \t\treturn proxyList;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void connectFailed(URI arg0, SocketAddress arg1, IOException arg2) {\r\n    \t\tthrow new UnsupportedOperationException(&quot;Not supported yet.&quot;);\r\n    \t}\r\n    };\r\n    \r\n    // Set proxy selector\r\n    okHttpClientBuilder.proxySelector(proxySelector);\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/net/ProxySelector.html","title":"Non proxy hosts for OkHttp3","body":"<p>After digging around a bit, I have found out how to do it.</p>\n\n<p>So I had to create a <a href=\"https://docs.oracle.com/javase/7/docs/api/java/net/ProxySelector.html\" rel=\"noreferrer\"><code>ProxySelector</code></a> implementing the logic when the proxy should be applied or not.</p>\n\n<h2>Example:</h2>\n\n<pre><code>final ProxySelector proxySelector = new ProxySelector() {\n    @Override\n    public java.util.List&lt;Proxy&gt; select(final URI uri) {\n        final List&lt;Proxy&gt; proxyList = new ArrayList&lt;Proxy&gt;(1);\n\n        // Host\n        final String host = uri.getHost();\n\n        // Is an internal host\n        if (host.startsWith(\"127.0.0.1\") || StringUtils.contains(nonProxyHostsValue, host)) {\n            proxyList.add(Proxy.NO_PROXY);\n        } else {\n            // Add proxy\n            proxyList.add(new Proxy(Type.HTTP,\n                    new InetSocketAddress(proxyHostNameValue, Integer.parseInt(proxyPortValue))));\n        }\n\n        return proxyList;\n    }\n\n    @Override\n    public void connectFailed(URI arg0, SocketAddress arg1, IOException arg2) {\n        throw new UnsupportedOperationException(\"Not supported yet.\");\n    }\n};\n\n// Set proxy selector\nokHttpClientBuilder.proxySelector(proxySelector);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1017284,"reputation":5696,"user_id":5641301,"display_name":"Johnny Cage"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640874696,"creation_date":1640874696,"answer_id":70533022,"question_id":38154628,"body_markdown":"you can try to pass argument\r\n\r\n    -Dhttp.nonProxyHosts=localhost|127.0.0.1|*.example.com","title":"Non proxy hosts for OkHttp3","body":"<p>you can try to pass argument</p>\n<pre><code>-Dhttp.nonProxyHosts=localhost|127.0.0.1|*.example.com\n</code></pre>\n"}],"owner":{"account_id":1920479,"reputation":7969,"user_id":1732123,"accept_rate":89,"display_name":"Carlos Alberto"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2040,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":38212177,"answer_count":3,"score":5,"last_activity_date":1640874696,"creation_date":1467412391,"question_id":38154628,"body_markdown":"How can I set what hostnames should not pass in one request made by `OkHttpClient` using a proxy?\r\n\r\nIs there anything equivalent for the vm argument `-Dhttp.nonProxyHosts` in OkHttp3?\r\n\r\nFor example:\r\n\r\n    final OkHttpClient okHttpClient = new OkHttpClient\r\n        .Builder()\r\n        .connectTimeout(60, TimeUnit.SECONDS)\r\n        .writeTimeout(60, TimeUnit.SECONDS)\r\n        .readTimeout(60, TimeUnit.SECONDS)\r\n        .proxy(new Proxy(Proxy.Type.HTTP,\r\n            new InetSocketAddress(defaultProxyHostName, Integer.parseInt(defaultProxyPort))))\r\n        .build();","title":"Non proxy hosts for OkHttp3","body":"<p>How can I set what hostnames should not pass in one request made by <code>OkHttpClient</code> using a proxy?</p>\n\n<p>Is there anything equivalent for the vm argument <code>-Dhttp.nonProxyHosts</code> in OkHttp3?</p>\n\n<p>For example:</p>\n\n<pre><code>final OkHttpClient okHttpClient = new OkHttpClient\n    .Builder()\n    .connectTimeout(60, TimeUnit.SECONDS)\n    .writeTimeout(60, TimeUnit.SECONDS)\n    .readTimeout(60, TimeUnit.SECONDS)\n    .proxy(new Proxy(Proxy.Type.HTTP,\n        new InetSocketAddress(defaultProxyHostName, Integer.parseInt(defaultProxyPort))))\n    .build();\n</code></pre>\n"},{"tags":["java","windows","cmd","registry","file-association"],"comments":[{"owner":{"account_id":2469917,"reputation":54362,"user_id":2152082,"display_name":"Stephan"},"score":0,"creation_date":1639849600,"post_id":70405656,"comment_id":124455538,"body_markdown":"I guess you merged your knowledge of `assoc` and `ftype`. See the help for both commands.","body":"I guess you merged your knowledge of <code>assoc</code> and <code>ftype</code>. See the help for both commands."},{"owner":{"account_id":20044429,"reputation":109,"user_id":14694459,"display_name":"Luqus"},"score":0,"creation_date":1639849859,"post_id":70405656,"comment_id":124455603,"body_markdown":"Thank you. So do I need to create a `ftype` with the path first and assign the `ftype` to the file extension under `assoc`?","body":"Thank you. So do I need to create a <code>ftype</code> with the path first and assign the <code>ftype</code> to the file extension under <code>assoc</code>?"},{"owner":{"account_id":2469917,"reputation":54362,"user_id":2152082,"display_name":"Stephan"},"score":0,"creation_date":1639850245,"post_id":70405656,"comment_id":124455695,"body_markdown":"it doesn&#39;t matter, which you do first. They just have to match `assoc .pmdtb=PwdFile` and `ftype pmdtb=&quot;X:\\PasswordManager.bat&quot; %1` (probably - depends on what the script expects)","body":"it doesn&#39;t matter, which you do first. They just have to match <code>assoc .pmdtb=PwdFile</code> and <code>ftype pmdtb=&quot;X:\\PasswordManager.bat&quot; %1</code> (probably - depends on what the script expects)"},{"owner":{"account_id":20044429,"reputation":109,"user_id":14694459,"display_name":"Luqus"},"score":0,"creation_date":1639911658,"post_id":70405656,"comment_id":124464489,"body_markdown":"I tried using `assoc .pmdtb=passwordmanagerdatabase` and `ftype passwordmanagerdatabase=&quot;X:\\PasswordManager.bat&quot; %1` in my shell. I don&#39;t know if I am using it wrong, but .pmdtb files are still opened with the notepad if not further specified. Can you help me with this?","body":"I tried using <code>assoc .pmdtb=passwordmanagerdatabase</code> and <code>ftype passwordmanagerdatabase=&quot;X:\\PasswordManager.bat&quot; %1</code> in my shell. I don&#39;t know if I am using it wrong, but .pmdtb files are still opened with the notepad if not further specified. Can you help me with this?"}],"answers":[{"tags":[],"owner":{"account_id":20044429,"reputation":109,"user_id":14694459,"display_name":"Luqus"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1640865118,"creation_date":1640865118,"answer_id":70531266,"question_id":70405656,"body_markdown":"File associations will apparently no longer be changeable with `assoc` and `ftype` starting with Windows 8. A hash code is additionally in the registry, which is generated with a secret algorithm. If I change the file association, but the hash does not match, the default opening of this file extension will not change. The Windows algorithm for the hash has been reverse engineered. Based on this, you could translate the algorithm into Java and change the registry directly.\r\n\r\nThe C++ code with QT can be found here: https://pastebin.com/yVhWeQ3X","title":"Changing file associations using Java","body":"<p>File associations will apparently no longer be changeable with <code>assoc</code> and <code>ftype</code> starting with Windows 8. A hash code is additionally in the registry, which is generated with a secret algorithm. If I change the file association, but the hash does not match, the default opening of this file extension will not change. The Windows algorithm for the hash has been reverse engineered. Based on this, you could translate the algorithm into Java and change the registry directly.</p>\n<p>The C++ code with QT can be found here: <a href=\"https://pastebin.com/yVhWeQ3X\" rel=\"nofollow noreferrer\">https://pastebin.com/yVhWeQ3X</a></p>\n"},{"tags":[],"owner":{"account_id":14313923,"reputation":8882,"user_id":10802527,"display_name":"K J"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640874517,"creation_date":1640873930,"answer_id":70532890,"question_id":70405656,"body_markdown":"By far the simplest method is to use one of many FTA utilities that resolve the security hash for you.\r\n\r\nFor example https://danysys.com/set-file-type-association-default-application-command-line-windows-10-userchoice-hash-internal-method/ \r\n\r\nThen use that via a cmd line call from your java app\r\n\r\nYou may need to test out the options (read the comments on linked page above and review [issues on github](https://github.com/DanysysTeam/SFTA/issues?q=is%3Aissue)) however it could be as simple as\r\n```\r\nSFTA.exe --reg &quot;X:\\PassswordManager.bat&quot; &quot;pmdtb&quot;\r\n```","title":"Changing file associations using Java","body":"<p>By far the simplest method is to use one of many FTA utilities that resolve the security hash for you.</p>\n<p>For example <a href=\"https://danysys.com/set-file-type-association-default-application-command-line-windows-10-userchoice-hash-internal-method/\" rel=\"nofollow noreferrer\">https://danysys.com/set-file-type-association-default-application-command-line-windows-10-userchoice-hash-internal-method/</a></p>\n<p>Then use that via a cmd line call from your java app</p>\n<p>You may need to test out the options (read the comments on linked page above and review <a href=\"https://github.com/DanysysTeam/SFTA/issues?q=is%3Aissue\" rel=\"nofollow noreferrer\">issues on github</a>) however it could be as simple as</p>\n<pre><code>SFTA.exe --reg &quot;X:\\PassswordManager.bat&quot; &quot;pmdtb&quot;\n</code></pre>\n"}],"owner":{"account_id":20044429,"reputation":109,"user_id":14694459,"display_name":"Luqus"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":307,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70531266,"answer_count":2,"score":0,"last_activity_date":1640874517,"creation_date":1639849370,"question_id":70405656,"body_markdown":"I have read that you can change the Windows file associations by using commands like `assoc .pmdtb=&quot;X:\\PassswordManager.bat&quot;`, but I still have some problems with it.\r\n\r\n1. When I run the command in the command line, then nothing changes. Files with this extension are still opened with Notepad.\r\n\r\n2. When I try to run the command in Java, I am denied access. \r\n\r\nHow do I edit the Windows internal file associations in Java? If I should rather edit the registry directly, which of the many Classes directories?\r\n\r\nMy Java code:\r\n```java\r\nRuntime.getRuntime().exec(&quot;cmd.exe /c assoc .pmdtb=\\&quot;X:\\\\PasswordManager.bat\\&quot;&quot;);\r\n// --&gt; Access denied.\r\n```\r\n\r\nThanks in advance.","title":"Changing file associations using Java","body":"<p>I have read that you can change the Windows file associations by using commands like <code>assoc .pmdtb=&quot;X:\\PassswordManager.bat&quot;</code>, but I still have some problems with it.</p>\n<ol>\n<li><p>When I run the command in the command line, then nothing changes. Files with this extension are still opened with Notepad.</p>\n</li>\n<li><p>When I try to run the command in Java, I am denied access.</p>\n</li>\n</ol>\n<p>How do I edit the Windows internal file associations in Java? If I should rather edit the registry directly, which of the many Classes directories?</p>\n<p>My Java code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Runtime.getRuntime().exec(&quot;cmd.exe /c assoc .pmdtb=\\&quot;X:\\\\PasswordManager.bat\\&quot;&quot;);\n// --&gt; Access denied.\n</code></pre>\n<p>Thanks in advance.</p>\n"},{"tags":["java","multithreading","pdfbox"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1640686626,"post_id":70504980,"comment_id":124632386,"body_markdown":"Which PDDocument class do you use? Implementation please.","body":"Which PDDocument class do you use? Implementation please."},{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1640686672,"post_id":70504980,"comment_id":124632401,"body_markdown":"You need to open the document several times, once for each thread because multithreading doesn&#39;t always work properly.","body":"You need to open the document several times, once for each thread because multithreading doesn&#39;t always work properly."},{"owner":{"account_id":23281482,"reputation":63,"user_id":17364877,"display_name":"bootstrap2025"},"score":0,"creation_date":1640689172,"post_id":70504980,"comment_id":124633127,"body_markdown":"I use this class org.apache.pdfbox.pdmodel.PDDocument","body":"I use this class org.apache.pdfbox.pdmodel.PDDocument"},{"owner":{"account_id":5998820,"reputation":12666,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1640781079,"post_id":70504980,"comment_id":124656530,"body_markdown":"You do not need to run `ImageIO.write` part in same thread when iterating the `pdfRenderer.renderImageWithDPI` so even if renderImageWithDPI is not threadsafe you should be able to cut down some execution time using 2 threads - one read image and one write image. Note also that on some hardware ImageIO.write may be be faster if writing to memory buffer first before to filesystem.","body":"You do not need to run <code>ImageIO.write</code> part in same thread when iterating the <code>pdfRenderer.renderImageWithDPI</code> so even if renderImageWithDPI is not threadsafe you should be able to cut down some execution time using 2 threads - one read image and one write image. Note also that on some hardware ImageIO.write may be be faster if writing to memory buffer first before to filesystem."}],"answers":[{"tags":[],"owner":{"account_id":5998820,"reputation":12666,"user_id":4712734,"display_name":"DuncG"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640874455,"creation_date":1640781876,"answer_id":70519603,"question_id":70504980,"body_markdown":"A simple way to speed up this conversion would be to split image writing to a background thread. Set up an executorService before opening the PDF:\r\n\r\n    ExecutorService exec = Executors.newFixedThreadPool(1);\r\n    List&lt;Future&lt;?&gt;&gt; pending = new ArrayList&lt;&gt;();\r\n\r\nInstead of writing the image in same calling thread, just submit a new task to the service:\r\n\r\n    // ImageIO.write(bImage, fileExtension, outPutFile);\r\n    pending.add(exec.submit(() -&gt; write(bImage, fileExtension, outImage.toFile())));\r\n\r\nAnd function to perform the task:\r\n\r\n    private static void write(BufferedImage image, String fileExtension, File file) {\r\n        try {\r\n            ImageIO.write(image, fileExtension, file);\r\n        } catch (IOException e) {\r\n            throw new UncheckedIOException(e);\r\n        }\r\n    }\r\n\r\nAfter closing the PDF document make sure the executor is finished:\r\n\r\n    for (Future&lt;?&gt; fut : pending) {\r\n       fut.get();\r\n    }\r\n    exec.shutdown();\r\n    exec.awaitTermination(365, TimeUnit.DAYS);\r\n\r\nUsing more than one thread for `ImageIO.write` may not benefit you as it is heavy IO operation but as I said in the comment, experiment with writing to a large `ByteArrayOutputStream` and then the file may also help on your specific hardware.","title":"How to convert one pdf to multiple png images with multithreading","body":"<p>A simple way to speed up this conversion would be to split image writing to a background thread. Set up an executorService before opening the PDF:</p>\n<pre><code>ExecutorService exec = Executors.newFixedThreadPool(1);\nList&lt;Future&lt;?&gt;&gt; pending = new ArrayList&lt;&gt;();\n</code></pre>\n<p>Instead of writing the image in same calling thread, just submit a new task to the service:</p>\n<pre><code>// ImageIO.write(bImage, fileExtension, outPutFile);\npending.add(exec.submit(() -&gt; write(bImage, fileExtension, outImage.toFile())));\n</code></pre>\n<p>And function to perform the task:</p>\n<pre><code>private static void write(BufferedImage image, String fileExtension, File file) {\n    try {\n        ImageIO.write(image, fileExtension, file);\n    } catch (IOException e) {\n        throw new UncheckedIOException(e);\n    }\n}\n</code></pre>\n<p>After closing the PDF document make sure the executor is finished:</p>\n<pre><code>for (Future&lt;?&gt; fut : pending) {\n   fut.get();\n}\nexec.shutdown();\nexec.awaitTermination(365, TimeUnit.DAYS);\n</code></pre>\n<p>Using more than one thread for <code>ImageIO.write</code> may not benefit you as it is heavy IO operation but as I said in the comment, experiment with writing to a large <code>ByteArrayOutputStream</code> and then the file may also help on your specific hardware.</p>\n"}],"owner":{"account_id":23281482,"reputation":63,"user_id":17364877,"display_name":"bootstrap2025"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":473,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1640874455,"creation_date":1640682923,"question_id":70504980,"body_markdown":"I used the following method to convert a pdf into multiple png images：\r\n```\r\nimport org.apache.pdfbox.pdmodel.PDDocument;\r\nimport org.apache.pdfbox.rendering.ImageType;\r\nimport org.apache.pdfbox.rendering.PDFRenderer;\r\nimport org.imgscalr.Scalr;\r\n\r\npublic class ImgUtil {\r\n    public static List&lt;String&gt; convertPDFPagesToImages(String sourceFilePath, String desFilePath){\r\n        List&lt;String&gt; urlList = new ArrayList&lt;&gt;();\r\n        try {\r\n            File sourceFile = new File(sourceFilePath);\r\n            File destinationFile = new File(desFilePath);\r\n            if (!destinationFile.exists()) {\r\n                destinationFile.mkdir();\r\n                log.info(&quot;Folder Created -&gt;:{} &quot;, destinationFile.getAbsolutePath());\r\n            }\r\n            if (sourceFile.exists()) {\r\n                log.info(&quot;Images copied to Folder Location: &quot;, destinationFile.getAbsolutePath());\r\n                PDDocument document = PDDocument.load(sourceFile);\r\n                PDFRenderer pdfRenderer = new PDFRenderer(document);\r\n\r\n                int numberOfPages = document.getNumberOfPages();\r\n                log.info(&quot;Total files to be converting -&gt;{} &quot;, numberOfPages);\r\n\r\n                String fileName = sourceFile.getName().replace(&quot;.pdf&quot;, &quot;&quot;);\r\n                String fileExtension = &quot;png&quot;;\r\n                /*\r\n                 * 600 dpi give good image clarity but size of each image is 2x times of 300 dpi.\r\n                 * Ex:  1. For 300dpi 04-Request-Headers_2.png expected size is 797 KB\r\n                 *      2. For 600dpi 04-Request-Headers_2.png expected size is 2.42 MB\r\n                 */\r\n                int dpi = 300;// use less dpi for to save more space in harddisk. For professional usage you can use more than 300dpi\r\n\r\n                for (int i = 0; i &lt; numberOfPages; ++i) {\r\n                    File outPutFile = new File(desFilePath + fileName +&quot;_&quot;+ (i+1) +&quot;.&quot;+ fileExtension);\r\n                    BufferedImage bImage = pdfRenderer.renderImageWithDPI(i, dpi, ImageType.RGB);\r\n                    ImageIO.write(bImage, fileExtension, outPutFile);\r\n                    urlList.add(outPutFile.getPath().replaceAll(&quot;\\\\\\\\&quot;, &quot;/&quot;));\r\n                }\r\n\r\n                document.close();\r\n                log.info(&quot;Converted Images are saved at -&gt;{} &quot;, destinationFile.getAbsolutePath());\r\n            } else {\r\n                log.error(sourceFile.getName() +&quot; File not exists&quot;);\r\n            }\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n        return urlList;\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n     \r\n         convertPDFPagesToImages(&quot;D:\\\\tmp\\\\report\\\\pdfPath\\\\61199020100754118.pdf&quot;, &quot;D:\\\\tmp\\\\report\\\\pdfPath\\\\&quot;);\r\n         \r\n    }\r\n}\r\n```\r\n\r\nBut I found that when the number of pdf pages is relatively large, the image conversion is slower. I consider using multithreading to parse the images. Is it possible to convert a pdf into a picture through multiple threads or is there a similar method?","title":"How to convert one pdf to multiple png images with multithreading","body":"<p>I used the following method to convert a pdf into multiple png images：</p>\n<pre><code>import org.apache.pdfbox.pdmodel.PDDocument;\nimport org.apache.pdfbox.rendering.ImageType;\nimport org.apache.pdfbox.rendering.PDFRenderer;\nimport org.imgscalr.Scalr;\n\npublic class ImgUtil {\n    public static List&lt;String&gt; convertPDFPagesToImages(String sourceFilePath, String desFilePath){\n        List&lt;String&gt; urlList = new ArrayList&lt;&gt;();\n        try {\n            File sourceFile = new File(sourceFilePath);\n            File destinationFile = new File(desFilePath);\n            if (!destinationFile.exists()) {\n                destinationFile.mkdir();\n                log.info(&quot;Folder Created -&gt;:{} &quot;, destinationFile.getAbsolutePath());\n            }\n            if (sourceFile.exists()) {\n                log.info(&quot;Images copied to Folder Location: &quot;, destinationFile.getAbsolutePath());\n                PDDocument document = PDDocument.load(sourceFile);\n                PDFRenderer pdfRenderer = new PDFRenderer(document);\n\n                int numberOfPages = document.getNumberOfPages();\n                log.info(&quot;Total files to be converting -&gt;{} &quot;, numberOfPages);\n\n                String fileName = sourceFile.getName().replace(&quot;.pdf&quot;, &quot;&quot;);\n                String fileExtension = &quot;png&quot;;\n                /*\n                 * 600 dpi give good image clarity but size of each image is 2x times of 300 dpi.\n                 * Ex:  1. For 300dpi 04-Request-Headers_2.png expected size is 797 KB\n                 *      2. For 600dpi 04-Request-Headers_2.png expected size is 2.42 MB\n                 */\n                int dpi = 300;// use less dpi for to save more space in harddisk. For professional usage you can use more than 300dpi\n\n                for (int i = 0; i &lt; numberOfPages; ++i) {\n                    File outPutFile = new File(desFilePath + fileName +&quot;_&quot;+ (i+1) +&quot;.&quot;+ fileExtension);\n                    BufferedImage bImage = pdfRenderer.renderImageWithDPI(i, dpi, ImageType.RGB);\n                    ImageIO.write(bImage, fileExtension, outPutFile);\n                    urlList.add(outPutFile.getPath().replaceAll(&quot;\\\\\\\\&quot;, &quot;/&quot;));\n                }\n\n                document.close();\n                log.info(&quot;Converted Images are saved at -&gt;{} &quot;, destinationFile.getAbsolutePath());\n            } else {\n                log.error(sourceFile.getName() +&quot; File not exists&quot;);\n            }\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n        return urlList;\n    }\n\n    public static void main(String[] args) {\n     \n         convertPDFPagesToImages(&quot;D:\\\\tmp\\\\report\\\\pdfPath\\\\61199020100754118.pdf&quot;, &quot;D:\\\\tmp\\\\report\\\\pdfPath\\\\&quot;);\n         \n    }\n}\n</code></pre>\n<p>But I found that when the number of pdf pages is relatively large, the image conversion is slower. I consider using multithreading to parse the images. Is it possible to convert a pdf into a picture through multiple threads or is there a similar method?</p>\n"},{"tags":["java","spring-mvc"],"comments":[{"owner":{"account_id":13121735,"reputation":1877,"user_id":9478932,"display_name":"Benkerroum Mohamed"},"score":0,"creation_date":1640874637,"post_id":70532864,"comment_id":124680724,"body_markdown":"You can autowire controller B in controller A, controllers are just like other spring beans, and call `handleY` method","body":"You can autowire controller B in controller A, controllers are just like other spring beans, and call <code>handleY</code> method"},{"owner":{"account_id":3168210,"reputation":155,"user_id":3809696,"display_name":"Sreekar Swarnapuri"},"score":0,"creation_date":1640918799,"post_id":70532864,"comment_id":124691456,"body_markdown":"We can do that but it defeats the purpose of Dependency Injection of Spring","body":"We can do that but it defeats the purpose of Dependency Injection of Spring"}],"answers":[{"tags":[],"owner":{"account_id":21290364,"reputation":146,"user_id":15667462,"display_name":"Osama A. Abdelnasser"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1640874326,"creation_date":1640874326,"answer_id":70532958,"question_id":70532864,"body_markdown":"unfortunately, I think you need to redirect to ControllerB and for attributes that you want to pass you can send them using HttpSession or Cookies","title":"Spring fails to forward the request to the target controller and its method","body":"<p>unfortunately, I think you need to redirect to ControllerB and for attributes that you want to pass you can send them using HttpSession or Cookies</p>\n"}],"owner":{"account_id":3168210,"reputation":155,"user_id":3809696,"display_name":"Sreekar Swarnapuri"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":257,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1640874326,"creation_date":1640873745,"question_id":70532864,"body_markdown":"We have an application where Spring handles any urls with base_path/mvc/*\r\n\r\nIn that we have one controller A as below which tries to forward the request to another controller where the forward path would be &quot;base_path/mvc/controllerB/handleY&quot;\r\n\r\n```\r\n@Controller\r\n@RequestMapping(&quot;/controllerA&quot;)\r\npublic class A {\r\n  \r\n  @RequestMapping(&quot;/handleX&quot;)\r\n  public String handleX(HttpServletRequest request, HttpServletResponse response) {\r\n  \r\n     String forwardUrl = service.performAction(request,response);\r\n\r\n     return &quot;forward:/&quot; + forwardUrl;\r\n\r\n  }\r\n\r\n}\r\n```\r\n\r\n```\r\n@Controller\r\n@RequestMapping(&quot;/controllerB&quot;)\r\npublic class B {\r\n  \r\n  @RequestMapping(&quot;/handleY&quot;, produces = MediaType.APPLICATION_JSON_VALUE)\r\n  @ResponseBody\r\n  public String handleY(HttpServletRequest request, HttpServletResponse response) {\r\n     \r\n    // Performs some action and writes the json to response\r\n\r\n     return null;\r\n\r\n  }\r\n\r\n}\r\n\r\n```\r\n\r\nHowever when the &quot;return &quot;forward:/&quot; + forwardUrl;&quot; statement is executed, spring is not forwarding the request to the ControllerB. I have setup break points however it does not break there but ends in ControllerA itself.\r\n\r\nWe are not explicitly using redirect:/ as we do not want to lose the request parameters that are sent to ControllerA when the request comes it.\r\n\r\nIt would be a great help on why this issue is happening. Thanks in advance :)","title":"Spring fails to forward the request to the target controller and its method","body":"<p>We have an application where Spring handles any urls with base_path/mvc/*</p>\n<p>In that we have one controller A as below which tries to forward the request to another controller where the forward path would be &quot;base_path/mvc/controllerB/handleY&quot;</p>\n<pre><code>@Controller\n@RequestMapping(&quot;/controllerA&quot;)\npublic class A {\n  \n  @RequestMapping(&quot;/handleX&quot;)\n  public String handleX(HttpServletRequest request, HttpServletResponse response) {\n  \n     String forwardUrl = service.performAction(request,response);\n\n     return &quot;forward:/&quot; + forwardUrl;\n\n  }\n\n}\n</code></pre>\n<pre><code>@Controller\n@RequestMapping(&quot;/controllerB&quot;)\npublic class B {\n  \n  @RequestMapping(&quot;/handleY&quot;, produces = MediaType.APPLICATION_JSON_VALUE)\n  @ResponseBody\n  public String handleY(HttpServletRequest request, HttpServletResponse response) {\n     \n    // Performs some action and writes the json to response\n\n     return null;\n\n  }\n\n}\n\n</code></pre>\n<p>However when the &quot;return &quot;forward:/&quot; + forwardUrl;&quot; statement is executed, spring is not forwarding the request to the ControllerB. I have setup break points however it does not break there but ends in ControllerA itself.</p>\n<p>We are not explicitly using redirect:/ as we do not want to lose the request parameters that are sent to ControllerA when the request comes it.</p>\n<p>It would be a great help on why this issue is happening. Thanks in advance :)</p>\n"},{"tags":["java","spring-boot","maven","jar"],"answers":[{"tags":[],"owner":{"account_id":10389194,"reputation":14819,"user_id":7661119,"display_name":"Ervin Szilagyi"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1640874279,"creation_date":1640874279,"answer_id":70532947,"question_id":70532446,"body_markdown":"You are overwriting the default behaviour of generating project names. This is because you define the `finalName` tag. \r\n\r\nFrom the [docs](https://maven.apache.org/pom.html#BaseBuild_Element):\r\n\r\n&gt; **finalName**: This is the name of the bundled project when it is finally built (sans the file extension, for example: my-project-1.0.jar). It defaults to ${artifactId}-${version}.\r\n\r\nIn your case it is defined as `&lt;finalName&gt;gitlab-finder&lt;/finalName&gt;` which does not contain the version of the project. You either add `${version}` to it `&lt;finalName&gt;gitlab-finder-${version}&lt;/finalName&gt;` or remove the `finalName` tag.","title":"Spring boot maven build not including artifact version in final jar","body":"<p>You are overwriting the default behaviour of generating project names. This is because you define the <code>finalName</code> tag.</p>\n<p>From the <a href=\"https://maven.apache.org/pom.html#BaseBuild_Element\" rel=\"noreferrer\">docs</a>:</p>\n<blockquote>\n<p><strong>finalName</strong>: This is the name of the bundled project when it is finally built (sans the file extension, for example: my-project-1.0.jar). It defaults to ${artifactId}-${version}.</p>\n</blockquote>\n<p>In your case it is defined as <code>&lt;finalName&gt;gitlab-finder&lt;/finalName&gt;</code> which does not contain the version of the project. You either add <code>${version}</code> to it <code>&lt;finalName&gt;gitlab-finder-${version}&lt;/finalName&gt;</code> or remove the <code>finalName</code> tag.</p>\n"}],"owner":{"account_id":6186008,"reputation":3119,"user_id":4820101,"accept_rate":24,"display_name":"samshers"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":594,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70532947,"answer_count":1,"score":1,"last_activity_date":1640874279,"creation_date":1640871634,"question_id":70532446,"body_markdown":"On building my spring boot app using `mvn clean package`, the final artifact that is getting built, myapp.jar, is not having the version number included in the jar name.  \r\n**What change should i do to get the artifact verion number to be part of jar.**  \r\nThe relevant part of pom.xml is as below -\r\n\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n    \txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;groupId&gt;com.mycomp&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;myapp&lt;/artifactId&gt;\r\n    \t&lt;version&gt;2.6.0&lt;/version&gt;\r\n    \r\n    \t&lt;name&gt;myapp&lt;/name&gt;\r\n    \t&lt;description&gt;\r\n    \t\t&lt;![CDATA[]]&gt;\r\n    \t&lt;/description&gt;\r\n    \r\n    \t&lt;packaging&gt;jar&lt;/packaging&gt;\r\n    \r\n    \t&lt;properties&gt;\r\n    \r\n    \t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    \t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n    \t\t&lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n    \t\t&lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n    \r\n    \t\t&lt;springboot.version&gt;2.5.6&lt;/springboot.version&gt;\r\n    \r\n    \t&lt;/properties&gt;\r\n    \r\n    \t&lt;dependencies&gt;\r\n    \r\n    \t\t&lt;!-- Spring boot --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${springboot.version}&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-web&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;5.3.12&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t...\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.maven&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;maven-artifact&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;3.6.3&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t&lt;/dependencies&gt;\r\n    \r\n    \t&lt;build&gt;\r\n    \r\n    \t\t&lt;finalName&gt;gitlab-finder&lt;/finalName&gt;\r\n    \r\n    \t\t&lt;pluginManagement&gt;\r\n    \t\t\t&lt;plugins&gt;\r\n    \t\t\t\t&lt;plugin&gt;\r\n    \t\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t\t&lt;version&gt;3.8.1&lt;/version&gt;\r\n    \t\t\t\t&lt;/plugin&gt;\r\n    \t\t\t\t&lt;plugin&gt;\r\n    \t\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t\t\t&lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t\t&lt;version&gt;3.1.0&lt;/version&gt;\r\n    \t\t\t\t&lt;/plugin&gt;\r\n    \t\t\t\t&lt;plugin&gt;\r\n    \t\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t\t\t&lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t\t&lt;version&gt;3.1.2&lt;/version&gt;\r\n    \t\t\t\t&lt;/plugin&gt;\r\n    \r\n    \t\t\t&lt;/plugins&gt;\r\n    \t\t&lt;/pluginManagement&gt;\r\n    \r\n    \t\t&lt;plugins&gt;\r\n    \r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;${springboot.version}&lt;/version&gt;\r\n    \t\t\t\t\r\n    \t\t\t&lt;/plugin&gt;\r\n    \r\n    \t\t&lt;/plugins&gt;\r\n    \r\n    \t&lt;/build&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\n**Note:** I created a new spring boot project using spring starter (through sts), and for this new project the jar has artifact version included in the jar name by default.  So wondering if this a default feature why is this not the case for my project (by the way, i am maintainer of this project not the creator but i have to add this feature of including version number to jar name.)","title":"Spring boot maven build not including artifact version in final jar","body":"<p>On building my spring boot app using <code>mvn clean package</code>, the final artifact that is getting built, myapp.jar, is not having the version number included in the jar name.<br />\n<strong>What change should i do to get the artifact verion number to be part of jar.</strong><br />\nThe relevant part of pom.xml is as below -</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;com.mycomp&lt;/groupId&gt;\n    &lt;artifactId&gt;myapp&lt;/artifactId&gt;\n    &lt;version&gt;2.6.0&lt;/version&gt;\n\n    &lt;name&gt;myapp&lt;/name&gt;\n    &lt;description&gt;\n        &lt;![CDATA[]]&gt;\n    &lt;/description&gt;\n\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n\n    &lt;properties&gt;\n\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n        &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n\n        &lt;springboot.version&gt;2.5.6&lt;/springboot.version&gt;\n\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n\n        &lt;!-- Spring boot --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n            &lt;version&gt;${springboot.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\n            &lt;version&gt;5.3.12&lt;/version&gt;\n        &lt;/dependency&gt;\n        ...\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-artifact&lt;/artifactId&gt;\n            &lt;version&gt;3.6.3&lt;/version&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n\n        &lt;finalName&gt;gitlab-finder&lt;/finalName&gt;\n\n        &lt;pluginManagement&gt;\n            &lt;plugins&gt;\n                &lt;plugin&gt;\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;3.8.1&lt;/version&gt;\n                &lt;/plugin&gt;\n                &lt;plugin&gt;\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                    &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;3.1.0&lt;/version&gt;\n                &lt;/plugin&gt;\n                &lt;plugin&gt;\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                    &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;3.1.2&lt;/version&gt;\n                &lt;/plugin&gt;\n\n            &lt;/plugins&gt;\n        &lt;/pluginManagement&gt;\n\n        &lt;plugins&gt;\n\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${springboot.version}&lt;/version&gt;\n                \n            &lt;/plugin&gt;\n\n        &lt;/plugins&gt;\n\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p><strong>Note:</strong> I created a new spring boot project using spring starter (through sts), and for this new project the jar has artifact version included in the jar name by default.  So wondering if this a default feature why is this not the case for my project (by the way, i am maintainer of this project not the creator but i have to add this feature of including version number to jar name.)</p>\n"},{"tags":["java","sum"],"answers":[{"tags":[],"owner":{"account_id":7373320,"reputation":17364,"user_id":5612858,"display_name":"Arnaud"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1640248224,"creation_date":1640248224,"answer_id":70459489,"question_id":70459448,"body_markdown":" Your `add` method could look that way :\r\n\r\n       private void add(int id, boolean b) {\r\n    \r\n            if(b){\r\n                teamA.add(id);\r\n            }\r\n            else{\r\n                teamB.add(id);\r\n            }\r\n            \r\n        }","title":"I don&#39;t know why I cannot get the output I expected","body":"<p>Your <code>add</code> method could look that way :</p>\n<pre><code>   private void add(int id, boolean b) {\n\n        if(b){\n            teamA.add(id);\n        }\n        else{\n            teamB.add(id);\n        }\n        \n    }\n</code></pre>\n"}],"owner":{"account_id":23688386,"reputation":1,"user_id":17713018,"display_name":"Annu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1640874223,"creation_date":1640247923,"question_id":70459448,"body_markdown":"This is the input I suppose to get..but I didn&#39;t get it. Also, I&#39;m also not sure my coding is even right since this is my first time.\r\n\r\n&gt;Enter the employee ID: 785  \r\nSum of first &amp; last digit = 12  \r\nAssigned to Team A  \r\nEnter the employee ID: 53  \r\nSum of first &amp; last digit = 8  \r\nAssigned to Team A  \r\nEnter the employee ID: 9128  \r\nSum of first &amp; last digit = 17  \r\nAssigned to Team B  \r\nEnter the employee ID: 39998  \r\nSum of first &amp; last digit = 11  \r\nAssigned to Team B  \r\nEnter the employee ID: 123456  \r\nCount of Team A members = 2  \r\nCount of Team B members = 2  \r\n\r\nHowever, instead, I&#39;m getting this at the end: \r\n&gt;Count of Team A members = 0  \r\nCount of Team B members = 0  \r\n\r\nHow should I properly code a method to count the team members?  \r\n\r\n```java\r\npackage STIA1014Asg2.zip;  \r\nimport java.util.*;  \r\n\r\n\r\npublic class nn {\r\n    public static int getDigits(int num) { return String.valueOf(num).length(); }\r\n \r\n    public static int getLast(int num) { return num % 10; }\r\n  \r\n    public static int getFirst(int num) {\r\n        int first = 0;\r\n        while(num != 0) {\r\n           first = num % 10;\r\n           num /= 10; \r\n        }\r\n        return first;\r\n    }\r\n    private static class Group {\r\n        public List&lt;Integer&gt; teamA = new ArrayList&lt;&gt;();\r\n        public List&lt;Integer&gt; teamB = new ArrayList&lt;&gt;();\r\n\r\n        public Group() {\r\n        }\r\n    \r\n        private void display() {\r\n             System.out.println(&quot;Count of Team A members = &quot; + teamA.size());\r\n             System.out.println(&quot;Count of Team B members = &quot; + teamB.size());\r\n            }\r\n\r\n        private void add(int id, boolean b) {\r\n            \r\n        }\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n      Scanner scan = new Scanner(System.in);\r\n      Group group = new Group(); \r\n      \r\n      \r\n      while(true) {\r\n          System.out.print(&quot;Enter the employee ID: &quot;);\r\n          int id = scan.nextInt(); \r\n\r\n          int digits = getDigits(id); \r\n          if(digits &gt; 5 || digits &lt; 2) {  \r\n              group.display();  \r\n              break; \r\n          }\r\n\r\n          int first = getFirst(id); \r\n          int last = getLast(id);   \r\n          int sum = first + last;   \r\n          System.out.println(&quot;Sum of first &amp; last digit = &quot; + sum); \r\n          \r\n          if(sum % 2 == 0) {  \r\n              group.add(id, true);\r\n              System.out.println(&quot;Assigned to Team A&quot;);\r\n          }\r\n          else { \r\n              group.add(id, false);\r\n              System.out.println(&quot;Assigned to Team B&quot;);\r\n          }\r\n      }\r\n    }\r\n}\r\n```","title":"I don&#39;t know why I cannot get the output I expected","body":"<p>This is the input I suppose to get..but I didn't get it. Also, I'm also not sure my coding is even right since this is my first time.</p>\n<blockquote>\n<p>Enter the employee ID: 785<br />\nSum of first &amp; last digit = 12<br />\nAssigned to Team A<br />\nEnter the employee ID: 53<br />\nSum of first &amp; last digit = 8<br />\nAssigned to Team A<br />\nEnter the employee ID: 9128<br />\nSum of first &amp; last digit = 17<br />\nAssigned to Team B<br />\nEnter the employee ID: 39998<br />\nSum of first &amp; last digit = 11<br />\nAssigned to Team B<br />\nEnter the employee ID: 123456<br />\nCount of Team A members = 2<br />\nCount of Team B members = 2</p>\n</blockquote>\n<p>However, instead, I'm getting this at the end:</p>\n<blockquote>\n<p>Count of Team A members = 0<br />\nCount of Team B members = 0</p>\n</blockquote>\n<p>How should I properly code a method to count the team members?</p>\n<pre class=\"lang-java prettyprint-override\"><code>package STIA1014Asg2.zip;  \nimport java.util.*;  \n\n\npublic class nn {\n    public static int getDigits(int num) { return String.valueOf(num).length(); }\n \n    public static int getLast(int num) { return num % 10; }\n  \n    public static int getFirst(int num) {\n        int first = 0;\n        while(num != 0) {\n           first = num % 10;\n           num /= 10; \n        }\n        return first;\n    }\n    private static class Group {\n        public List&lt;Integer&gt; teamA = new ArrayList&lt;&gt;();\n        public List&lt;Integer&gt; teamB = new ArrayList&lt;&gt;();\n\n        public Group() {\n        }\n    \n        private void display() {\n             System.out.println(&quot;Count of Team A members = &quot; + teamA.size());\n             System.out.println(&quot;Count of Team B members = &quot; + teamB.size());\n            }\n\n        private void add(int id, boolean b) {\n            \n        }\n    }\n\n    public static void main(String[] args) {\n      Scanner scan = new Scanner(System.in);\n      Group group = new Group(); \n      \n      \n      while(true) {\n          System.out.print(&quot;Enter the employee ID: &quot;);\n          int id = scan.nextInt(); \n\n          int digits = getDigits(id); \n          if(digits &gt; 5 || digits &lt; 2) {  \n              group.display();  \n              break; \n          }\n\n          int first = getFirst(id); \n          int last = getLast(id);   \n          int sum = first + last;   \n          System.out.println(&quot;Sum of first &amp; last digit = &quot; + sum); \n          \n          if(sum % 2 == 0) {  \n              group.add(id, true);\n              System.out.println(&quot;Assigned to Team A&quot;);\n          }\n          else { \n              group.add(id, false);\n              System.out.println(&quot;Assigned to Team B&quot;);\n          }\n      }\n    }\n}\n</code></pre>\n"},{"tags":["javascript","java","email","pdf","email-attachments"],"answers":[{"tags":[],"owner":{"account_id":23784847,"reputation":1,"user_id":17797082,"display_name":"Stephen Busche"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640873412,"creation_date":1640870313,"answer_id":70532208,"question_id":70085056,"body_markdown":"I found that declaring a variable for the email portion worked. I was able to include custom to, cc, subject, and body, as well as attaching the PDF.\r\n\r\n    var customREmail = this.getField(&quot;ReqEmail&quot;).value;\r\n    var customAEmail = this.getField(&quot;AgyEmail&quot;).value;\r\n    var customAgency = this.getField(&quot;Agency&quot;).value;\r\n    var customLName = this.getField(&quot;Lease&quot;).value;\r\n    var customBAddr = this.getField(&quot;BldgAddr&quot;).value;\r\n    var customBCity = this.getField(&quot;BldgCity&quot;).value;\r\n    var mailtoUrl =\r\n     &quot;mailto:XXX@XXX.XXX?cc=&quot; +\r\n     customREmail +\r\n     &quot;; &quot; +\r\n     customAEmail +\r\n     &quot;&amp;subject=Compliance%20Request: &quot; +\r\n     customAgency +\r\n     &quot;, &quot;  +\r\n     customLName +\r\n     &quot; - &quot; +\r\n     customBAddr +\r\n     &quot;, &quot; +\r\n     customBCity +\r\n     &quot;&amp;body=Please review the attached request.%0A%0AThank you,%0A%0A&quot;;\r\n    this.submitForm({\r\n     cURL:mailtoUrl, cSubmitAs:&quot;PDF&quot;, bPDF:true\r\n    });\r\n\r\n","title":"Sending Email with PDF attachment from button in PDF Form","body":"<p>I found that declaring a variable for the email portion worked. I was able to include custom to, cc, subject, and body, as well as attaching the PDF.</p>\n<pre><code>var customREmail = this.getField(&quot;ReqEmail&quot;).value;\nvar customAEmail = this.getField(&quot;AgyEmail&quot;).value;\nvar customAgency = this.getField(&quot;Agency&quot;).value;\nvar customLName = this.getField(&quot;Lease&quot;).value;\nvar customBAddr = this.getField(&quot;BldgAddr&quot;).value;\nvar customBCity = this.getField(&quot;BldgCity&quot;).value;\nvar mailtoUrl =\n &quot;mailto:XXX@XXX.XXX?cc=&quot; +\n customREmail +\n &quot;; &quot; +\n customAEmail +\n &quot;&amp;subject=Compliance%20Request: &quot; +\n customAgency +\n &quot;, &quot;  +\n customLName +\n &quot; - &quot; +\n customBAddr +\n &quot;, &quot; +\n customBCity +\n &quot;&amp;body=Please review the attached request.%0A%0AThank you,%0A%0A&quot;;\nthis.submitForm({\n cURL:mailtoUrl, cSubmitAs:&quot;PDF&quot;, bPDF:true\n});\n</code></pre>\n"}],"owner":{"account_id":23431993,"reputation":1,"user_id":17490670,"display_name":"Mbarrett"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2552,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1640873412,"creation_date":1637687641,"question_id":70085056,"body_markdown":"I have been attempting to code a button into my adobe PDF form using an article from quora. The goal is to click a button and it opens an email box with the &quot;to&quot;, &quot;subject line&quot;, &quot;body&quot; and the &quot;PDF&quot; attaching to the email without having to save the pdf somewhere locally on the clients computer. \r\n\r\nThese are the three different codes I have found and attempted to use. No matter what I do, I end up getting an &quot;Unterminated String Literal&quot; on line 3 where the body field starts. I have tried adding/removing everything I can think of. ;&quot;&#39;{{:. \r\n\r\nPlease help if you can! See code below. \r\n\r\n\r\nvar customSubject = this.getField(&quot;MyTextField&quot;).value; \r\nvar mailtoUrl = &quot;mailto:email@email.com?subject=&quot; + Information Form; \r\nthis.submitForm({Thank you for your considerate attention to the attached pdf. Let me know if you need anything.; further. \r\n cURL: mailtoUrl, cSubmitAs: &quot;PDF&quot; });\r\n \r\nvar customSubject = this.getField(&quot;MyTextField&quot;).value;\r\nvar mailtoUrl = &quot;mailto:email@email.com=&quot; + Information Form;\r\nthis.submitForm({Thank you for your considerate attention to the attached pdf. Let me know if you need anything.\r\ncURL: mailtoUrl, bPDF:true});\r\n\r\nvar cToAddr = &quot;email@email.comm&quot;\r\nvar cSubLine = &quot;Information Form - &quot; + this.getField(No1LastName) + &quot;, &quot; + this.getField(No2LastName) + &quot; \r\nvar cBody = &quot;Please find the attached Information Form. Thank you for your considerate attention to the attached.&quot; \r\nthis.mailDoc({bUI: true, cTo: cToAddr, cSubject: cSubLine, cMsg: cBody});","title":"Sending Email with PDF attachment from button in PDF Form","body":"<p>I have been attempting to code a button into my adobe PDF form using an article from quora. The goal is to click a button and it opens an email box with the &quot;to&quot;, &quot;subject line&quot;, &quot;body&quot; and the &quot;PDF&quot; attaching to the email without having to save the pdf somewhere locally on the clients computer.</p>\n<p>These are the three different codes I have found and attempted to use. No matter what I do, I end up getting an &quot;Unterminated String Literal&quot; on line 3 where the body field starts. I have tried adding/removing everything I can think of. ;&quot;'{{:.</p>\n<p>Please help if you can! See code below.</p>\n<p>var customSubject = this.getField(&quot;MyTextField&quot;).value;\nvar mailtoUrl = &quot;mailto:email@email.com?subject=&quot; + Information Form;\nthis.submitForm({Thank you for your considerate attention to the attached pdf. Let me know if you need anything.; further.\ncURL: mailtoUrl, cSubmitAs: &quot;PDF&quot; });</p>\n<p>var customSubject = this.getField(&quot;MyTextField&quot;).value;\nvar mailtoUrl = &quot;mailto:email@email.com=&quot; + Information Form;\nthis.submitForm({Thank you for your considerate attention to the attached pdf. Let me know if you need anything.\ncURL: mailtoUrl, bPDF:true});</p>\n<p>var cToAddr = &quot;email@email.comm&quot;\nvar cSubLine = &quot;Information Form - &quot; + this.getField(No1LastName) + &quot;, &quot; + this.getField(No2LastName) + &quot;\nvar cBody = &quot;Please find the attached Information Form. Thank you for your considerate attention to the attached.&quot;\nthis.mailDoc({bUI: true, cTo: cToAddr, cSubject: cSubLine, cMsg: cBody});</p>\n"},{"tags":["java","iterator"],"comments":[{"owner":{"account_id":6522844,"reputation":2162,"user_id":10919349,"display_name":"Richard K Yu"},"score":0,"creation_date":1640841894,"post_id":70527772,"comment_id":124672149,"body_markdown":"I think iterator is part of Collections of which Set is?","body":"I think iterator is part of Collections of which Set is?"},{"owner":{"account_id":137890,"reputation":8718,"user_id":995052,"accept_rate":56,"display_name":"Kris"},"score":0,"creation_date":1640841905,"post_id":70527772,"comment_id":124672154,"body_markdown":"What do you mean by set is unordered ?","body":"What do you mean by set is unordered ?"},{"owner":{"account_id":7595189,"reputation":44576,"user_id":5761558,"display_name":"ernest_k"},"score":0,"creation_date":1640842209,"post_id":70527772,"comment_id":124672190,"body_markdown":"An `Iterator` does not imply/assume ordering. The point is just to go through all elements. In a list (or other ordered collections, which may include other sets), the order of iteration is predictable. But with a HashSet, it is not. But that has nothing to do with whether it can use an iterator or not.","body":"An <code>Iterator</code> does not imply/assume ordering. The point is just to go through all elements. In a list (or other ordered collections, which may include other sets), the order of iteration is predictable. But with a HashSet, it is not. But that has nothing to do with whether it can use an iterator or not."},{"owner":{"account_id":137890,"reputation":8718,"user_id":995052,"accept_rate":56,"display_name":"Kris"},"score":0,"creation_date":1640842311,"post_id":70527772,"comment_id":124672209,"body_markdown":"`Set` interface implements the `Iterable` interface in java, so an iterator is available. A hash set uses `HashMap`s for internal storage, there is an iterator available on the keys.","body":"<code>Set</code> interface implements the <code>Iterable</code> interface in java, so an iterator is available. A hash set uses <code>HashMap</code>s for internal storage, there is an iterator available on the keys."}],"answers":[{"tags":[],"owner":{"account_id":6522844,"reputation":2162,"user_id":10919349,"display_name":"Richard K Yu"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640842104,"creation_date":1640842104,"answer_id":70527801,"question_id":70527772,"body_markdown":"Referring to the [documentation][1], we see that:\r\n```\r\nIterator&lt;E&gt; iterator()\r\n```\r\n\r\nReturns an iterator over the elements in this collection. **There are no guarantees concerning the order in which the elements are returned** (unless this collection is an instance of some class that provides a guarantee).\r\n\r\n---\r\n\r\nSince there are no guarantees concerning the order in which the elements are returned for iterator, it is not a problem for iterator to apply to Set, which is unordered.\r\n\r\nFurther, it is not changing the Set into a List\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/Collection.html#iterator--","title":"How can Iterator can using in set(java)?","body":"<p>Referring to the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Collection.html#iterator--\" rel=\"nofollow noreferrer\">documentation</a>, we see that:</p>\n<pre><code>Iterator&lt;E&gt; iterator()\n</code></pre>\n<p>Returns an iterator over the elements in this collection. <strong>There are no guarantees concerning the order in which the elements are returned</strong> (unless this collection is an instance of some class that provides a guarantee).</p>\n<hr />\n<p>Since there are no guarantees concerning the order in which the elements are returned for iterator, it is not a problem for iterator to apply to Set, which is unordered.</p>\n<p>Further, it is not changing the Set into a List</p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1640842852,"creation_date":1640842123,"answer_id":70527803,"question_id":70527772,"body_markdown":"&gt; How can `Iterator` can using in set?\r\n\r\nLike you are using it.\r\n\r\n&gt; How can get the values ​​one by one through an iterator?\r\n\r\nYour code is doing that.\r\n\r\n&gt; Is iterator changing set into like list which ordered data structure?\r\n\r\nNo.\r\n\r\nThe thing that you are missing is what &quot;unordered&quot; means.  It means that the order in which the (set&#39;s) elements are returned is not predictable&lt;sup&gt;1&lt;/sup&gt;, and not specified in the javadocs.  However each element **will** be returned *once* and (since the elements of a set are unique!) *only once* for the iteration.\r\n\r\n------------------------\r\n\r\n&lt;sup&gt;1 - Actually, this is not strictly true.  If you have enough information about the element class, the element values, how they were created and how / when they were added to the `HashSet`, AND you analyze the specific `HashSet` implementation ... it is possible that you CAN predict what the iteration order is going to be.  For example if you create a `HashSet&lt;Integer&gt;` and add 1, 2, 3, 4, ... to it, you will see a clear (and repeatable) pattern when you iterate the elements.  This is in part due to the way that `Integer.hashCode()` is specified.&lt;/sup&gt;\r\n\r\n","title":"How can Iterator can using in set(java)?","body":"<blockquote>\n<p>How can <code>Iterator</code> can using in set?</p>\n</blockquote>\n<p>Like you are using it.</p>\n<blockquote>\n<p>How can get the values ​​one by one through an iterator?</p>\n</blockquote>\n<p>Your code is doing that.</p>\n<blockquote>\n<p>Is iterator changing set into like list which ordered data structure?</p>\n</blockquote>\n<p>No.</p>\n<p>The thing that you are missing is what &quot;unordered&quot; means.  It means that the order in which the (set's) elements are returned is not predictable<sup>1</sup>, and not specified in the javadocs.  However each element <strong>will</strong> be returned <em>once</em> and (since the elements of a set are unique!) <em>only once</em> for the iteration.</p>\n<hr />\n<p><sup>1 - Actually, this is not strictly true.  If you have enough information about the element class, the element values, how they were created and how / when they were added to the <code>HashSet</code>, AND you analyze the specific <code>HashSet</code> implementation ... it is possible that you CAN predict what the iteration order is going to be.  For example if you create a <code>HashSet&lt;Integer&gt;</code> and add 1, 2, 3, 4, ... to it, you will see a clear (and repeatable) pattern when you iterate the elements.  This is in part due to the way that <code>Integer.hashCode()</code> is specified.</sup></p>\n"},{"tags":[],"owner":{"account_id":7668980,"reputation":2584,"user_id":5811874,"display_name":"Hanchen Jiang"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640842193,"creation_date":1640842193,"answer_id":70527809,"question_id":70527772,"body_markdown":"`Set` is unordered in a logical sense. When you have a bag of things, there isn&#39;t a sense of order when they are inside the bag. But when you take each thing out of the bag, one at a time, you end up with some order. And like the other answer has mentioned, you cannot rely on that order since it is purely accidental.","title":"How can Iterator can using in set(java)?","body":"<p><code>Set</code> is unordered in a logical sense. When you have a bag of things, there isn't a sense of order when they are inside the bag. But when you take each thing out of the bag, one at a time, you end up with some order. And like the other answer has mentioned, you cannot rely on that order since it is purely accidental.</p>\n"},{"tags":[],"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640873356,"creation_date":1640842921,"answer_id":70527872,"question_id":70527772,"body_markdown":"&gt; I understand, set is unordered, In contrast List\r\n\r\nThis is not necessarily true. [SortedSet][1] is a subinterface of Set. As the name implies, instances of this interface are ordered in some fashion. For example, ***[TreeSets][2] are ordered** using their natural ordering, or by a Comparator provided at set creation time, depending on which constructor is used.* Also, **the main distinction between `Set` and `List` is that `List` allows for duplicate objects to be contained, whereas `Set` does not**.\r\n\r\nNow, if you are talking specifically about HashSet, then you are correct about being unordered.\r\n\r\nI think your confusion is because you are asking yourself &quot;why is the print out showing the numbers in numeric (insertion) order?&quot; This is sort of a complicated answer for someone of your familiarization level, but the order in which they are printed out is because you are inserting integers and their hash code are basically their numeric values. And, although there is no guarantee as to the order in which the elements of the hash set are returned when iterating, the implementation of HashSet is backed by a hash table. In fact, if you change the insertion order of those same values, most likely the numbers will be printed out in the same numeric order. Now, remember that with all that, the order is not guaranteed. This may not be true, for instance, if you change the set elements to be String objects.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/SortedSet.html\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/TreeSet.html","title":"How can Iterator can using in set(java)?","body":"<blockquote>\n<p>I understand, set is unordered, In contrast List</p>\n</blockquote>\n<p>This is not necessarily true. <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/SortedSet.html\" rel=\"nofollow noreferrer\">SortedSet</a> is a subinterface of Set. As the name implies, instances of this interface are ordered in some fashion. For example, <em><strong><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/TreeSet.html\" rel=\"nofollow noreferrer\">TreeSets</a> are ordered</strong> using their natural ordering, or by a Comparator provided at set creation time, depending on which constructor is used.</em> Also, <strong>the main distinction between <code>Set</code> and <code>List</code> is that <code>List</code> allows for duplicate objects to be contained, whereas <code>Set</code> does not</strong>.</p>\n<p>Now, if you are talking specifically about HashSet, then you are correct about being unordered.</p>\n<p>I think your confusion is because you are asking yourself &quot;why is the print out showing the numbers in numeric (insertion) order?&quot; This is sort of a complicated answer for someone of your familiarization level, but the order in which they are printed out is because you are inserting integers and their hash code are basically their numeric values. And, although there is no guarantee as to the order in which the elements of the hash set are returned when iterating, the implementation of HashSet is backed by a hash table. In fact, if you change the insertion order of those same values, most likely the numbers will be printed out in the same numeric order. Now, remember that with all that, the order is not guaranteed. This may not be true, for instance, if you change the set elements to be String objects.</p>\n"}],"owner":{"account_id":23781257,"reputation":3,"user_id":17793910,"display_name":"Hanseo"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":200,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70527803,"answer_count":4,"score":0,"last_activity_date":1640873356,"creation_date":1640841796,"question_id":70527772,"body_markdown":"my question was why does iterator work on set? \r\n\r\nHere is my example code,\r\n\r\n    public class Staticex {\r\n    \r\n    \r\n        public static void main(String[] args) {\r\n            HashSet set = new HashSet();\r\n    \r\n            set.add(1);\r\n            set.add(2);\r\n            set.add(3);\r\n            set.add(4);\r\n            set.add(5);\r\n    \r\n            Iterator iter = set.iterator();\r\n            while (iter.hasNext()) {\r\n                System.out.println(iter.next());\r\n            }\r\n        }\r\n    }\r\n\r\nI understand, set is unordered, In contrast List \r\n\r\nSo, How can get the values ​​one by one through an iterator? \r\n\r\nIs iterator changing  set into like list which ordered data structure?\r\n","title":"How can Iterator can using in set(java)?","body":"<p>my question was why does iterator work on set?</p>\n<p>Here is my example code,</p>\n<pre><code>public class Staticex {\n\n\n    public static void main(String[] args) {\n        HashSet set = new HashSet();\n\n        set.add(1);\n        set.add(2);\n        set.add(3);\n        set.add(4);\n        set.add(5);\n\n        Iterator iter = set.iterator();\n        while (iter.hasNext()) {\n            System.out.println(iter.next());\n        }\n    }\n}\n</code></pre>\n<p>I understand, set is unordered, In contrast List</p>\n<p>So, How can get the values ​​one by one through an iterator?</p>\n<p>Is iterator changing  set into like list which ordered data structure?</p>\n"},{"tags":["java","spring","spring-boot","spring-cloud-gateway","spring-cloud-contract"],"answers":[{"tags":[],"owner":{"account_id":6390592,"reputation":16008,"user_id":4956907,"display_name":"Michał Krzywański"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1640873244,"creation_date":1640193193,"answer_id":70452711,"question_id":70441570,"body_markdown":"# Solution 1\r\nThis can be achieved by using `application-test.yml` file with defined url property that makes use of substitution. `application-test.yml` file. The approach is described [here](https://cloud.spring.io/spring-cloud-contract/reference/html/project-features.html#features-stub-runner-rule-spring) :\r\n````\r\nsubscriptions:\r\n  url: http://localhost:${stubrunner.runningstubs.io.mkrzywanski.subscription-app.port}\r\n````\r\nHere `stubrunner.runningstubs.io.mkrzywanski.subscription-app.port` will be available as Stub port so it can be substituted. No configuration changes are reuqired.\r\n\r\n# Solution 2 (requires more code)\r\n\r\nI made it work by creating a test configuration which extends configuration that contains url properties and `RouteLocator` configuration and has a dependency on `batchStubRunner` bean :\r\n````\r\n@DependsOn(&quot;batchStubRunner&quot;)\r\n@EnableAutoConfiguration\r\n@Import(LoggingFilter.class)\r\nclass GatewayTestConfig extends GatewayConfig implements InitializingBean {\r\n\r\n    @Autowired\r\n    ConfigurableEnvironment environment;\r\n\r\n    @Override\r\n    public void afterPropertiesSet() {\r\n        this.subscriptionsUrl = &quot;http://localhost:&quot; + environment.getProperty(&quot;stubrunner.runningstubs.io.mkrzywanski.subscription-app.port&quot;);\r\n    }\r\n}\r\n````\r\nThe key points here are :\r\n - the configuration is run only after `batchStubRunner` bean is available so the port of StrubRunner can be found in the `environment`\r\n - The configuration implements `InitializingBean` so I am able to override the `subscriptionsUrl` which is now `protected` in parent configuration\r\n - After `subscriptionsUrl` is overriden - it can be used to configure `RouteLocator` bean from parent configuration.\r\n\r\n\r\nThe test looks like this now :\r\n````\r\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT, classes = {GatewayTestConfig.class})\r\n@AutoConfigureStubRunner(ids = &quot;io.mkrzywanski:subscription-app:+:stubs&quot;, stubsMode = StubRunnerProperties.StubsMode.CLASSPATH)\r\n@ActiveProfiles(&quot;test&quot;)\r\nclass SubscriptionSpec {\r\n\r\n    private WebTestClient webClient;\r\n\r\n    @LocalServerPort\r\n    private int port;\r\n\r\n    @BeforeEach\r\n    void setup() {\r\n        String baseUri = &quot;http://localhost:&quot; + port;\r\n        this.webClient = WebTestClient.bindToServer()\r\n                .responseTimeout(Duration.ofSeconds(10))\r\n                .baseUrl(baseUri).build();\r\n    }\r\n\r\n    @Test\r\n    void shouldRouteToSubscriptions() {\r\n\r\n        String body = &quot;{\\&quot;userId\\&quot;:\\&quot;22e90bbd-7399-468a-9b76-cf050ff16c63\\&quot;,\\&quot;itemSet\\&quot;:[{\\&quot;value\\&quot;:\\&quot;Rainbow Six\\&quot;}]}&quot;;\r\n        webClient.post()\r\n                .uri(&quot;/subscriptions&quot;)\r\n                .header(&quot;Accept&quot;, MediaType.APPLICATION_JSON_VALUE)\r\n                .header(&quot;Authorization&quot;, &quot;Bearer xxx&quot;)\r\n                .header(&quot;Content-type&quot;, MediaType.APPLICATION_JSON_VALUE)\r\n                .bodyValue(body)\r\n                .exchange()\r\n                .expectStatus().isCreated()\r\n                .expectBody()\r\n                .jsonPath(&quot;$.subscriptionId&quot;).exists()\r\n                .jsonPath(&quot;$.subscriptionId&quot;).value(IsUUID.UUID());\r\n    }\r\n}\r\n````","title":"How to set urls with port of StubRunner from spring-cloud-contract in spring-cloud-gateway contract tests","body":"<h1>Solution 1</h1>\n<p>This can be achieved by using <code>application-test.yml</code> file with defined url property that makes use of substitution. <code>application-test.yml</code> file. The approach is described <a href=\"https://cloud.spring.io/spring-cloud-contract/reference/html/project-features.html#features-stub-runner-rule-spring\" rel=\"nofollow noreferrer\">here</a> :</p>\n<pre><code>subscriptions:\n  url: http://localhost:${stubrunner.runningstubs.io.mkrzywanski.subscription-app.port}\n</code></pre>\n<p>Here <code>stubrunner.runningstubs.io.mkrzywanski.subscription-app.port</code> will be available as Stub port so it can be substituted. No configuration changes are reuqired.</p>\n<h1>Solution 2 (requires more code)</h1>\n<p>I made it work by creating a test configuration which extends configuration that contains url properties and <code>RouteLocator</code> configuration and has a dependency on <code>batchStubRunner</code> bean :</p>\n<pre><code>@DependsOn(&quot;batchStubRunner&quot;)\n@EnableAutoConfiguration\n@Import(LoggingFilter.class)\nclass GatewayTestConfig extends GatewayConfig implements InitializingBean {\n\n    @Autowired\n    ConfigurableEnvironment environment;\n\n    @Override\n    public void afterPropertiesSet() {\n        this.subscriptionsUrl = &quot;http://localhost:&quot; + environment.getProperty(&quot;stubrunner.runningstubs.io.mkrzywanski.subscription-app.port&quot;);\n    }\n}\n</code></pre>\n<p>The key points here are :</p>\n<ul>\n<li>the configuration is run only after <code>batchStubRunner</code> bean is available so the port of StrubRunner can be found in the <code>environment</code></li>\n<li>The configuration implements <code>InitializingBean</code> so I am able to override the <code>subscriptionsUrl</code> which is now <code>protected</code> in parent configuration</li>\n<li>After <code>subscriptionsUrl</code> is overriden - it can be used to configure <code>RouteLocator</code> bean from parent configuration.</li>\n</ul>\n<p>The test looks like this now :</p>\n<pre><code>@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT, classes = {GatewayTestConfig.class})\n@AutoConfigureStubRunner(ids = &quot;io.mkrzywanski:subscription-app:+:stubs&quot;, stubsMode = StubRunnerProperties.StubsMode.CLASSPATH)\n@ActiveProfiles(&quot;test&quot;)\nclass SubscriptionSpec {\n\n    private WebTestClient webClient;\n\n    @LocalServerPort\n    private int port;\n\n    @BeforeEach\n    void setup() {\n        String baseUri = &quot;http://localhost:&quot; + port;\n        this.webClient = WebTestClient.bindToServer()\n                .responseTimeout(Duration.ofSeconds(10))\n                .baseUrl(baseUri).build();\n    }\n\n    @Test\n    void shouldRouteToSubscriptions() {\n\n        String body = &quot;{\\&quot;userId\\&quot;:\\&quot;22e90bbd-7399-468a-9b76-cf050ff16c63\\&quot;,\\&quot;itemSet\\&quot;:[{\\&quot;value\\&quot;:\\&quot;Rainbow Six\\&quot;}]}&quot;;\n        webClient.post()\n                .uri(&quot;/subscriptions&quot;)\n                .header(&quot;Accept&quot;, MediaType.APPLICATION_JSON_VALUE)\n                .header(&quot;Authorization&quot;, &quot;Bearer xxx&quot;)\n                .header(&quot;Content-type&quot;, MediaType.APPLICATION_JSON_VALUE)\n                .bodyValue(body)\n                .exchange()\n                .expectStatus().isCreated()\n                .expectBody()\n                .jsonPath(&quot;$.subscriptionId&quot;).exists()\n                .jsonPath(&quot;$.subscriptionId&quot;).value(IsUUID.UUID());\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":6390592,"reputation":16008,"user_id":4956907,"display_name":"Michał Krzywański"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":700,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70452711,"answer_count":1,"score":0,"last_activity_date":1640873244,"creation_date":1640120606,"question_id":70441570,"body_markdown":"I have a spring cloud gateway application which routes requests to another service. Another service defines contracts which are imported as stubs by spring cloud gateway application in tests. \r\n\r\nNow I would like to have contract tests in my gateway that will consume the stubs of another service. The problem is that I do not know how to inject the `StubRunnerPort` as property/environment so it can be picked by my configuration class and configure the routes  accordingly :\r\n\r\nApi gateway routes configuration\r\n\r\n````\r\n@Configuration\r\nclass GatewayConfig {\r\n\r\n    \r\n    @Value(&quot;${subscriptions.url}&quot;)\r\n    private String subscriptionsUrl;\r\n\r\n    @Autowired\r\n    private TokenRelayGatewayFilterFactory tokenFilterFactory;\r\n\r\n    @Bean\r\n    public SecurityWebFilterChain springSecurityFilterChain(ServerHttpSecurity http) {\r\n        http.csrf(ServerHttpSecurity.CsrfSpec::disable);\r\n        return http.build();\r\n    }\r\n\r\n    @Bean\r\n    RouteLocator routeLocator(final RouteLocatorBuilder routeLocatorBuilder) {\r\n        return routeLocatorBuilder.routes()\r\n                .route(&quot;subscriptions&quot;, subscriptionsRoute())\r\n                .build();\r\n    }\r\n\r\n    private Function&lt;PredicateSpec, Buildable&lt;Route&gt;&gt; subscriptionsRoute() {\r\n        return spec -&gt; spec\r\n                .path(&quot;/subscriptions/**&quot;)\r\n                .filters(s -&gt; s.filter(tokenFilterFactory.apply()).prefixPath(&quot;/v1&quot;))\r\n                .uri(subscriptionsUrl);\r\n    }\r\n\r\n}\r\n````\r\nAnd the test class :\r\n````\r\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT, classes = {PnApiGatewayApp.class})\r\n@AutoConfigureStubRunner(ids = &quot;io.mkrzywanski:subscription-app:+:stubs&quot;, stubsMode = StubRunnerProperties.StubsMode.CLASSPATH)\r\n@ActiveProfiles(&quot;test&quot;)\r\nclass SubscriptionSpec {\r\n\r\n    private WebTestClient webClient;\r\n\r\n    @LocalServerPort\r\n    private int port;\r\n\r\n    @StubRunnerPort(&quot;io.mkrzywanski:subscription-app&quot;)\r\n    private int stubRunnerPort;\r\n\r\n    @Autowired\r\n    ConfigurableEnvironment environment;\r\n\r\n    @BeforeEach\r\n    void setup() {\r\n        String baseUri = &quot;http://localhost:&quot; + port;\r\n        this.webClient = WebTestClient.bindToServer()\r\n                .responseTimeout(Duration.ofSeconds(10))\r\n                .baseUrl(baseUri).build();\r\n    }\r\n\r\n    @Test\r\n    void  test() {\r\n        String body = &quot;{\\&quot;userId\\&quot;:\\&quot;22e90bbd-7399-468a-9b76-cf050ff16c63\\&quot;,\\&quot;itemSet\\&quot;:[{\\&quot;value\\&quot;:\\&quot; Rainbow Six\\&quot;}]}&quot;;\r\n        var response = webClient.post()\r\n                .uri(&quot;/subscriptions&quot;)\r\n                .header(&quot;Authorization&quot;, &quot;Bearer xxx&quot;)\r\n                .header(&quot;Content-type&quot;, MediaType.APPLICATION_JSON_VALUE)\r\n                .bodyValue(body)\r\n                .exchange()\r\n                .expectStatus().isCreated()\r\n                .expectBody(String.class)\r\n                .value(Matchers.equalTo(&quot;{\\&quot;subscriptionId : \\&quot;6d692849-58fd-439b-bb2c-50a5d3669fa9\\&quot;\\&quot;}&quot;));\r\n    }\r\n````\r\nIdeally I would like to have `subscriptions.url` property set **after** stub runner is configured but **before** my gateway configuration is picked by Spring so that url redirects will work.\r\n\r\nI have already tried to use `ApplicationContextInitializer` but it seems that StubRunnerPort is not configured yet, when instance of initializer is launched.\r\n\r\nSo the question is - how to get stub runner port and use it to inject it into other services url, so that gateway would route the requests to the stub runner in tests?","title":"How to set urls with port of StubRunner from spring-cloud-contract in spring-cloud-gateway contract tests","body":"<p>I have a spring cloud gateway application which routes requests to another service. Another service defines contracts which are imported as stubs by spring cloud gateway application in tests.</p>\n<p>Now I would like to have contract tests in my gateway that will consume the stubs of another service. The problem is that I do not know how to inject the <code>StubRunnerPort</code> as property/environment so it can be picked by my configuration class and configure the routes  accordingly :</p>\n<p>Api gateway routes configuration</p>\n<pre><code>@Configuration\nclass GatewayConfig {\n\n    \n    @Value(&quot;${subscriptions.url}&quot;)\n    private String subscriptionsUrl;\n\n    @Autowired\n    private TokenRelayGatewayFilterFactory tokenFilterFactory;\n\n    @Bean\n    public SecurityWebFilterChain springSecurityFilterChain(ServerHttpSecurity http) {\n        http.csrf(ServerHttpSecurity.CsrfSpec::disable);\n        return http.build();\n    }\n\n    @Bean\n    RouteLocator routeLocator(final RouteLocatorBuilder routeLocatorBuilder) {\n        return routeLocatorBuilder.routes()\n                .route(&quot;subscriptions&quot;, subscriptionsRoute())\n                .build();\n    }\n\n    private Function&lt;PredicateSpec, Buildable&lt;Route&gt;&gt; subscriptionsRoute() {\n        return spec -&gt; spec\n                .path(&quot;/subscriptions/**&quot;)\n                .filters(s -&gt; s.filter(tokenFilterFactory.apply()).prefixPath(&quot;/v1&quot;))\n                .uri(subscriptionsUrl);\n    }\n\n}\n</code></pre>\n<p>And the test class :</p>\n<pre><code>@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT, classes = {PnApiGatewayApp.class})\n@AutoConfigureStubRunner(ids = &quot;io.mkrzywanski:subscription-app:+:stubs&quot;, stubsMode = StubRunnerProperties.StubsMode.CLASSPATH)\n@ActiveProfiles(&quot;test&quot;)\nclass SubscriptionSpec {\n\n    private WebTestClient webClient;\n\n    @LocalServerPort\n    private int port;\n\n    @StubRunnerPort(&quot;io.mkrzywanski:subscription-app&quot;)\n    private int stubRunnerPort;\n\n    @Autowired\n    ConfigurableEnvironment environment;\n\n    @BeforeEach\n    void setup() {\n        String baseUri = &quot;http://localhost:&quot; + port;\n        this.webClient = WebTestClient.bindToServer()\n                .responseTimeout(Duration.ofSeconds(10))\n                .baseUrl(baseUri).build();\n    }\n\n    @Test\n    void  test() {\n        String body = &quot;{\\&quot;userId\\&quot;:\\&quot;22e90bbd-7399-468a-9b76-cf050ff16c63\\&quot;,\\&quot;itemSet\\&quot;:[{\\&quot;value\\&quot;:\\&quot; Rainbow Six\\&quot;}]}&quot;;\n        var response = webClient.post()\n                .uri(&quot;/subscriptions&quot;)\n                .header(&quot;Authorization&quot;, &quot;Bearer xxx&quot;)\n                .header(&quot;Content-type&quot;, MediaType.APPLICATION_JSON_VALUE)\n                .bodyValue(body)\n                .exchange()\n                .expectStatus().isCreated()\n                .expectBody(String.class)\n                .value(Matchers.equalTo(&quot;{\\&quot;subscriptionId : \\&quot;6d692849-58fd-439b-bb2c-50a5d3669fa9\\&quot;\\&quot;}&quot;));\n    }\n</code></pre>\n<p>Ideally I would like to have <code>subscriptions.url</code> property set <strong>after</strong> stub runner is configured but <strong>before</strong> my gateway configuration is picked by Spring so that url redirects will work.</p>\n<p>I have already tried to use <code>ApplicationContextInitializer</code> but it seems that StubRunnerPort is not configured yet, when instance of initializer is launched.</p>\n<p>So the question is - how to get stub runner port and use it to inject it into other services url, so that gateway would route the requests to the stub runner in tests?</p>\n"},{"tags":["java","exception","rx-java"],"answers":[{"tags":[],"owner":{"account_id":24127,"reputation":69392,"user_id":61158,"accept_rate":98,"display_name":"akarnokd"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1640873184,"creation_date":1640873184,"answer_id":70532743,"question_id":70531587,"body_markdown":"Use `onErrorResumeNext` with an `error` source of the desired exception:\r\n\r\n```javaa\r\nreturn tokenManager.getTokenInfo(token)\r\n       .onErrorResumeNext(exc -&gt; Single.error(new AuthException(&quot;invalid token&quot;)))\r\n       .flatMapMaybe(userInfo -&gt; userRepo.findOne(userInfo))\r\n       .onErrorResumeNext(exc -&gt; Maybe.error(new NetworkException()));\r\n```","title":"How do I map errors in rxJava?","body":"<p>Use <code>onErrorResumeNext</code> with an <code>error</code> source of the desired exception:</p>\n<pre><code>return tokenManager.getTokenInfo(token)\n       .onErrorResumeNext(exc -&gt; Single.error(new AuthException(&quot;invalid token&quot;)))\n       .flatMapMaybe(userInfo -&gt; userRepo.findOne(userInfo))\n       .onErrorResumeNext(exc -&gt; Maybe.error(new NetworkException()));\n</code></pre>\n"}],"owner":{"account_id":11599586,"reputation":151,"user_id":8497191,"display_name":"ekene"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":142,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70532743,"answer_count":1,"score":0,"last_activity_date":1640873184,"creation_date":1640866735,"question_id":70531587,"body_markdown":"How do I transform an error returned by an Observable in rxJava?\r\nNow I have this method:\r\n```\r\n\r\n@Override\r\n\tpublic Maybe&lt;JsonObject&gt; getUser(String token) {\r\n\t\treturn tokenManager.getTokenInfo(token)    //returns a Single&lt;UserInfo&gt;\r\n\t\t\t.flatMapMaybe(userInfo -&gt; userRepo.findOne(userInfo));\r\n\t}\r\n```\r\nThe behavior is that any exception that is passed by ```getTokenInfo``` or ```findOne``` is propagated to the subscriber of this function&#39;s return value. Is it possible to map the exceptions to something else? Like\r\n```\r\n@Override\r\n\tpublic Maybe&lt;JsonObject&gt; getUser(String token) {\r\n\t\treturn tokenManager.getTokenInfo(token)\r\n\t\t\tmapError(exc -&gt; new AuthException(&quot;invalid token&quot;))  //don&#39;t let subscriber get raw exc\r\n\t\t\t.flatMapMaybe(userInfo -&gt; userRepo.findOne(userInfo))\r\n\t\t\t.mapError(exc -&gt; new NetworkException());\r\n\r\n\r\n\t}\r\n```","title":"How do I map errors in rxJava?","body":"<p>How do I transform an error returned by an Observable in rxJava?\nNow I have this method:</p>\n<pre><code>\n@Override\n    public Maybe&lt;JsonObject&gt; getUser(String token) {\n        return tokenManager.getTokenInfo(token)    //returns a Single&lt;UserInfo&gt;\n            .flatMapMaybe(userInfo -&gt; userRepo.findOne(userInfo));\n    }\n</code></pre>\n<p>The behavior is that any exception that is passed by <code>getTokenInfo</code> or <code>findOne</code> is propagated to the subscriber of this function's return value. Is it possible to map the exceptions to something else? Like</p>\n<pre><code>@Override\n    public Maybe&lt;JsonObject&gt; getUser(String token) {\n        return tokenManager.getTokenInfo(token)\n            mapError(exc -&gt; new AuthException(&quot;invalid token&quot;))  //don't let subscriber get raw exc\n            .flatMapMaybe(userInfo -&gt; userRepo.findOne(userInfo))\n            .mapError(exc -&gt; new NetworkException());\n\n\n    }\n</code></pre>\n"},{"tags":["java","arraylist","indexof"],"answers":[{"tags":[],"owner":{"account_id":195331,"reputation":275408,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1640872903,"creation_date":1401166122,"answer_id":23881251,"question_id":23881232,"body_markdown":"You&#39;re adding two `String` objects with the same value (empty string) to the list. \r\n\r\nSo your list looks like\r\n\r\n    [&quot;&quot;, &quot;&quot;]\r\n\r\nYou&#39;re then invoking the equivalent of `indexOf(&quot;&quot;)`, where `indexOf(..)` uses the `Object#equals(Object)` method to compare objects. The first element in the list is equal to `&quot;&quot;`, so that index is returned.\r\n","title":"ArrayList indexOf","body":"<p>You're adding two <code>String</code> objects with the same value (empty string) to the list.</p>\n<p>So your list looks like</p>\n<pre><code>[&quot;&quot;, &quot;&quot;]\n</code></pre>\n<p>You're then invoking the equivalent of <code>indexOf(&quot;&quot;)</code>, where <code>indexOf(..)</code> uses the <code>Object#equals(Object)</code> method to compare objects. The first element in the list is equal to <code>&quot;&quot;</code>, so that index is returned.</p>\n"},{"tags":[],"owner":{"account_id":2524897,"reputation":2922,"user_id":2194456,"accept_rate":47,"display_name":"LMK"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1401167601,"creation_date":1401167285,"answer_id":23881440,"question_id":23881232,"body_markdown":"Please read method description in the docs before using  http://docs.oracle.com/javase/7/docs/api/index.html?java/util/ArrayList.html  \r\n  \r\n    int \tindexOf(Object o)\r\n    Returns the index of the first occurrence of the specified element in this list, or -1   if    this list does not contain the element.  \r\n and \r\n  \r\n    public int lastIndexOf(Object o)\r\n\r\n    Returns the index of the last occurrence of the specified element in this list, or -1 if this list does not contain the element. More formally, returns the highest index i such that (o==null ? get(i)==null : o.equals(get(i))), or -1 if there is no such index.","title":"ArrayList indexOf","body":"<p>Please read method description in the docs before using  <a href=\"http://docs.oracle.com/javase/7/docs/api/index.html?java/util/ArrayList.html\" rel=\"nofollow\">http://docs.oracle.com/javase/7/docs/api/index.html?java/util/ArrayList.html</a>  </p>\n\n<pre><code>int     indexOf(Object o)\nReturns the index of the first occurrence of the specified element in this list, or -1   if    this list does not contain the element.  \n</code></pre>\n\n<p>and </p>\n\n<pre><code>public int lastIndexOf(Object o)\n\nReturns the index of the last occurrence of the specified element in this list, or -1 if this list does not contain the element. More formally, returns the highest index i such that (o==null ? get(i)==null : o.equals(get(i))), or -1 if there is no such index.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1637801,"reputation":715,"user_id":1510813,"accept_rate":22,"display_name":"Sajith A.K."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1401167325,"creation_date":1401167325,"answer_id":23881449,"question_id":23881232,"body_markdown":"Here you just create two objects and that has no value so it will be treated as empty string. So the Indexof will returns the first occurence of the given object.\r\n\r\nIf you assign different values to s and b then result what you are expecting that will get. Please try with below code.\r\n\r\n        String s = &quot;String1&quot;;\r\n        myList.add(s);\r\n        String b = &quot;String2&quot;;\r\n        myList.add(b);\r\n\r\n        int whereIsIt = myList.indexOf(s);\r\n        System.out.println(whereIsIt);\r\n        int whereIsIt2 = myList.indexOf(b);\r\n        System.out.println(whereIsIt2);\r\n\r\n","title":"ArrayList indexOf","body":"<p>Here you just create two objects and that has no value so it will be treated as empty string. So the Indexof will returns the first occurence of the given object.</p>\n\n<p>If you assign different values to s and b then result what you are expecting that will get. Please try with below code.</p>\n\n<pre><code>    String s = \"String1\";\n    myList.add(s);\n    String b = \"String2\";\n    myList.add(b);\n\n    int whereIsIt = myList.indexOf(s);\n    System.out.println(whereIsIt);\n    int whereIsIt2 = myList.indexOf(b);\n    System.out.println(whereIsIt2);\n</code></pre>\n"}],"owner":{"account_id":4473208,"reputation":467,"user_id":3638942,"accept_rate":36,"display_name":"some random dude"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1024,"favorite_count":0,"down_vote_count":2,"up_vote_count":4,"answer_count":3,"score":2,"last_activity_date":1640872903,"creation_date":1401165985,"question_id":23881232,"body_markdown":"I just started learning about the ArrayList class in Java. I have the following code below testing out the ArrayList class and it&#39;s methods:\r\n\r\n    import java.util.ArrayList;\r\n    \r\n    public class NewArrayList {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\t// TODO Auto-generated method stub\r\n    \t\tArrayList&lt;String&gt; myList = new ArrayList&lt;String&gt;();\r\n    \t\t\r\n    \t\tString s = new String();\r\n    \t\tmyList.add(s);\r\n    \t\tString b = new String();\r\n            myList.add(b);\r\n    \r\n    \t\tint theSize = myList.size();\r\n    \t\tSystem.out.println(&quot;ArrayList size: &quot; + theSize);\r\n    \r\n    \t\tboolean isTrue = myList.contains(s);\r\n    \t\tSystem.out.println(isTrue);\r\n    \r\n    \t\tint whereIsIt = myList.indexOf(s);\r\n    \t\tSystem.out.println(whereIsIt);\r\n    \t\tint whereIsIt2 = myList.indexOf(b);\r\n    \t\tSystem.out.println(whereIsIt2);\r\n    \r\n    \t}\r\n    \r\n    }\r\n\r\nThe `indexOf` method shows whats the index of an object. So since I added two objects, `s` and `b` to the `myList` ArrayList object reference, it should have 2 objects inside the index. The output of `whereIsit` and `whereIsit2` is both `0`. Shouldn&#39;t it be `0 1`??","title":"ArrayList indexOf","body":"<p>I just started learning about the ArrayList class in Java. I have the following code below testing out the ArrayList class and it's methods:</p>\n\n<pre><code>import java.util.ArrayList;\n\npublic class NewArrayList {\n\n    public static void main(String[] args) {\n        // TODO Auto-generated method stub\n        ArrayList&lt;String&gt; myList = new ArrayList&lt;String&gt;();\n\n        String s = new String();\n        myList.add(s);\n        String b = new String();\n        myList.add(b);\n\n        int theSize = myList.size();\n        System.out.println(\"ArrayList size: \" + theSize);\n\n        boolean isTrue = myList.contains(s);\n        System.out.println(isTrue);\n\n        int whereIsIt = myList.indexOf(s);\n        System.out.println(whereIsIt);\n        int whereIsIt2 = myList.indexOf(b);\n        System.out.println(whereIsIt2);\n\n    }\n\n}\n</code></pre>\n\n<p>The <code>indexOf</code> method shows whats the index of an object. So since I added two objects, <code>s</code> and <code>b</code> to the <code>myList</code> ArrayList object reference, it should have 2 objects inside the index. The output of <code>whereIsit</code> and <code>whereIsit2</code> is both <code>0</code>. Shouldn't it be <code>0 1</code>??</p>\n"},{"tags":["java","neural-network","encog"],"answers":[{"tags":[],"owner":{"account_id":91329,"reputation":1139,"user_id":250835,"accept_rate":73,"display_name":"umps"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1345126139,"creation_date":1345125834,"answer_id":11988909,"question_id":11979073,"body_markdown":"It is hard to say what is wrong given the information, there could be multiple reasons. But here are some potential solutions. \r\n \r\n1) How many times are you feeding the training data to the neural network? Usually you will need to make multiple passes feeding in the training data to make the network converge. One time is not enough especially if you only have 90 training data. \r\n\r\n2) How  many input parameters are in the training data (and what are they)? Typically You need to adjust the number of hidden layers nodes to the number of input parameters. There are no hard rules to this, but I typically start with at least twice the number of hidden layer nodes as input parameters.\r\n\r\n3)Have you tried choosing different testing data? I&#39;m assuming that your training and testing data is different. There could be something wrong with the testing data you&#39;ve selected, as in they do not match up with the training data at all. It could also be entirely possible that it is impossible to get any reliable estimation from your methods. Your input parameters may be completely insufficient to predict who wins any given match. This is the garbage in , garbage out, concept. \r\n","title":"Football prediction program encog: Inconsistent predictions","body":"<p>It is hard to say what is wrong given the information, there could be multiple reasons. But here are some potential solutions. </p>\n\n<p>1) How many times are you feeding the training data to the neural network? Usually you will need to make multiple passes feeding in the training data to make the network converge. One time is not enough especially if you only have 90 training data. </p>\n\n<p>2) How  many input parameters are in the training data (and what are they)? Typically You need to adjust the number of hidden layers nodes to the number of input parameters. There are no hard rules to this, but I typically start with at least twice the number of hidden layer nodes as input parameters.</p>\n\n<p>3)Have you tried choosing different testing data? I'm assuming that your training and testing data is different. There could be something wrong with the testing data you've selected, as in they do not match up with the training data at all. It could also be entirely possible that it is impossible to get any reliable estimation from your methods. Your input parameters may be completely insufficient to predict who wins any given match. This is the garbage in , garbage out, concept. </p>\n"}],"owner":{"account_id":1665729,"reputation":143,"user_id":1533166,"display_name":"user1533166"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2630,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"answer_count":1,"score":9,"last_activity_date":1640872616,"creation_date":1345076323,"question_id":11979073,"body_markdown":"I am making a program that predicts outcome of a football match using encog. I have created a neural network, trained it with data of 90 matches with resilient propagation training method. I have marked results of match as 1 for home win, 0 for draw and -1 for away win.\r\n\r\nProblem is in prediction. Sometimes i get sucess rate of 50% and other time i get as low as 33%. It is like using random function. What i have noticed is that almost alwayst the most predicted outcome is 1(around 70%). I have tried changing the number of hidden layers, number of training but with no luck, it is still oscillating.Can anyone please help me or pint me into right direction if i am doing something wrong.\r\n\r\nHere is the code for neural network. I am getting training data, and prediction data from database.\r\n\r\n    Predictor(NeuralDataSet trainingData){\r\n\t\ttrainingSet = trainingData;\r\n\t\tnetwork = new BasicNetwork();\r\n\t\tnetwork.addLayer(new BasicLayer(16));\r\n\t\tnetwork.addLayer(new BasicLayer(3));\r\n\t\tnetwork.addLayer(new BasicLayer(1));\r\n\t\tnetwork.getStructure().finalizeStructure();\r\n\t\tnetwork.reset();\r\n\t}\r\n\r\nTraining\r\n    \r\n    public void train(int epoch){\r\n\t\tint i =0;\r\n\t\tfinal Train train =new ResilientPropagation(network,trainingSet);\r\n\t\twhile(i&lt;=epoch){\r\n\t\t\ttrain.iteration();\r\n\t\t\ti++;\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\nPredicting \r\n\r\n    public void successRate(NeuralDataSet trainingData){\r\n\t\tint counter = 0;\r\n\t\tint correct = 0;\r\n\t\tint home=0;\r\n\t\tint away=0;\r\n\t\tint draw=0;\r\n\t\tfor(MLDataPair pair: trainingData ) {\r\n\t\t\tfinal MLData output = network.compute(pair.getInput());\r\n\t\t\tif(pair.getIdeal().getData(0)==Math.round(output.getData(0)))\r\n\t\t\t\tcorrect++;\r\n\t\t\tcounter++;\r\n\t\t}\r\n\t\tSystem.out.println((double)correct/(double)counter);\r\n    }\r\n\r\n1.) I am feeding the data to neural network 1000. Currently testing with more/less since things got better.\r\n\r\n2,3.) I have 16 input parameters. They consists of: Home team points, home team home wins,draws,losses, home team total won, lost, draws and form(points gain in last 5 matches). Same data goes for away team only instead of  home team home wins,draws,losses\r\naway team away wins,draws,losses is used. I ll try with different training data.\r\n\r\n    \r\n\r\n","title":"Football prediction program encog: Inconsistent predictions","body":"<p>I am making a program that predicts outcome of a football match using encog. I have created a neural network, trained it with data of 90 matches with resilient propagation training method. I have marked results of match as 1 for home win, 0 for draw and -1 for away win.</p>\n\n<p>Problem is in prediction. Sometimes i get sucess rate of 50% and other time i get as low as 33%. It is like using random function. What i have noticed is that almost alwayst the most predicted outcome is 1(around 70%). I have tried changing the number of hidden layers, number of training but with no luck, it is still oscillating.Can anyone please help me or pint me into right direction if i am doing something wrong.</p>\n\n<p>Here is the code for neural network. I am getting training data, and prediction data from database.</p>\n\n<pre><code>Predictor(NeuralDataSet trainingData){\n    trainingSet = trainingData;\n    network = new BasicNetwork();\n    network.addLayer(new BasicLayer(16));\n    network.addLayer(new BasicLayer(3));\n    network.addLayer(new BasicLayer(1));\n    network.getStructure().finalizeStructure();\n    network.reset();\n}\n</code></pre>\n\n<p>Training</p>\n\n<pre><code>public void train(int epoch){\n    int i =0;\n    final Train train =new ResilientPropagation(network,trainingSet);\n    while(i&lt;=epoch){\n        train.iteration();\n        i++;\n    }\n\n}\n</code></pre>\n\n<p>Predicting </p>\n\n<pre><code>public void successRate(NeuralDataSet trainingData){\n    int counter = 0;\n    int correct = 0;\n    int home=0;\n    int away=0;\n    int draw=0;\n    for(MLDataPair pair: trainingData ) {\n        final MLData output = network.compute(pair.getInput());\n        if(pair.getIdeal().getData(0)==Math.round(output.getData(0)))\n            correct++;\n        counter++;\n    }\n    System.out.println((double)correct/(double)counter);\n}\n</code></pre>\n\n<p>1.) I am feeding the data to neural network 1000. Currently testing with more/less since things got better.</p>\n\n<p>2,3.) I have 16 input parameters. They consists of: Home team points, home team home wins,draws,losses, home team total won, lost, draws and form(points gain in last 5 matches). Same data goes for away team only instead of  home team home wins,draws,losses\naway team away wins,draws,losses is used. I ll try with different training data.</p>\n"},{"tags":["java","spring","eclipse","spring-boot","maven"],"comments":[{"owner":{"account_id":2366187,"reputation":60152,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":3,"creation_date":1640869508,"post_id":70532061,"comment_id":124679050,"body_markdown":"What problems? Post the errors not a nebulous statement.","body":"What problems? Post the errors not a nebulous statement."},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":1,"creation_date":1640870056,"post_id":70532061,"comment_id":124679221,"body_markdown":"You wrote `The fresh project shows 99 maven dependency problems` what are those problems? Have you build on plain command line? What is the output?","body":"You wrote <code>The fresh project shows 99 maven dependency problems</code> what are those problems? Have you build on plain command line? What is the output?"},{"owner":{"account_id":8299444,"reputation":53,"user_id":6238514,"display_name":"Subham Bisoyi"},"score":0,"creation_date":1640870241,"post_id":70532061,"comment_id":124679290,"body_markdown":"It was not possible to write all the problems down. So I have edited my question and added the screenshot. Please check that out once again. Sorry for not doing this earlier.","body":"It was not possible to write all the problems down. So I have edited my question and added the screenshot. Please check that out once again. Sorry for not doing this earlier."},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":1,"creation_date":1640871028,"post_id":70532061,"comment_id":124679545,"body_markdown":"Please do not use images better use text...apart from that try to build on plain command line and post the error output...apart from that I suppose you have some network/firewall/proxy issues...","body":"Please do not use images better use text...apart from that try to build on plain command line and post the error output...apart from that I suppose you have some network/firewall/proxy issues..."}],"answers":[{"tags":[],"owner":{"account_id":9114358,"reputation":11,"user_id":6781890,"display_name":"Ankit Mishra"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640872452,"creation_date":1640872452,"answer_id":70532591,"question_id":70532061,"body_markdown":"First thing to check if your system has maven installed or not?\r\nIf this is the freshly created spring project in eclipse, then you should do following steps to avoid most of the errors:\r\n1. Right click on project, go to Maven and update project. Keep looking at the bottom right to see progress.\r\n2. Click on Project from tool bar at top and clean all the project.\r\n3. Right click on the project and go to java build path. Click on Libraries, verify if the project is using correct JRE version.\r\n4. Right-click on your project and choose Properties to open the Project Properties dialog. There is a Project Facets item on the left, select it, look for the Java facet on the list, choose which version you want to use for the project and apply, always make sure that the version selected is available on your system.\r\n\r\nI hope that these points would make most of the errors go away. Let me know if you still see any issue, otherwise you can just do a copy paste on google and you should get the answer to your errors.","title":"I am getting maven dependency problems in a fresh project generated from start.spring.io. How can I fix this?","body":"<p>First thing to check if your system has maven installed or not?\nIf this is the freshly created spring project in eclipse, then you should do following steps to avoid most of the errors:</p>\n<ol>\n<li>Right click on project, go to Maven and update project. Keep looking at the bottom right to see progress.</li>\n<li>Click on Project from tool bar at top and clean all the project.</li>\n<li>Right click on the project and go to java build path. Click on Libraries, verify if the project is using correct JRE version.</li>\n<li>Right-click on your project and choose Properties to open the Project Properties dialog. There is a Project Facets item on the left, select it, look for the Java facet on the list, choose which version you want to use for the project and apply, always make sure that the version selected is available on your system.</li>\n</ol>\n<p>I hope that these points would make most of the errors go away. Let me know if you still see any issue, otherwise you can just do a copy paste on google and you should get the answer to your errors.</p>\n"}],"owner":{"account_id":8299444,"reputation":53,"user_id":6238514,"display_name":"Subham Bisoyi"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1640872452,"creation_date":1640869380,"question_id":70532061,"body_markdown":"[![enter image description here][1]][1]\r\n\r\nI have not touched anything in the pom file. The fresh project shows 99 maven dependency problems. I generated the project from start.spring.io by adding various dependencies like lombok, spring data jpa, java mail, spring web etc. Why am I getting this and how can I solve this? I am attaching the pom without the build tag because I was getting an error while posting this question.\r\n\r\n    \r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.5.8&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.integrity&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;signup&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;signup&lt;/name&gt;\r\n\t&lt;description&gt;POC&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;11&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-mail&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/xt6V8.png","title":"I am getting maven dependency problems in a fresh project generated from start.spring.io. How can I fix this?","body":"<p><a href=\"https://i.stack.imgur.com/xt6V8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xt6V8.png\" alt=\"enter image description here\" /></a></p>\n<p>I have not touched anything in the pom file. The fresh project shows 99 maven dependency problems. I generated the project from start.spring.io by adding various dependencies like lombok, spring data jpa, java mail, spring web etc. Why am I getting this and how can I solve this? I am attaching the pom without the build tag because I was getting an error while posting this question.</p>\n<pre><code>&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.5.8&lt;/version&gt;\n    &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n&lt;/parent&gt;\n&lt;groupId&gt;com.integrity&lt;/groupId&gt;\n&lt;artifactId&gt;signup&lt;/artifactId&gt;\n&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n&lt;name&gt;signup&lt;/name&gt;\n&lt;description&gt;POC&lt;/description&gt;\n&lt;properties&gt;\n    &lt;java.version&gt;11&lt;/java.version&gt;\n&lt;/properties&gt;\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-mail&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n        &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n        &lt;optional&gt;true&lt;/optional&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n\n"},{"tags":["java","amazon-web-services","jdbc","amazon-redshift","aws-glue"],"comments":[{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1640872187,"post_id":70525045,"comment_id":124679916,"body_markdown":"Please post the full exception stacktrace.","body":"Please post the full exception stacktrace."},{"owner":{"account_id":1584073,"reputation":994,"user_id":1468816,"accept_rate":36,"display_name":"SimonB"},"score":0,"creation_date":1650705678,"post_id":70525045,"comment_id":127186900,"body_markdown":"Did you ever resolve this ?","body":"Did you ever resolve this ?"},{"owner":{"account_id":5790820,"reputation":155,"user_id":4568355,"accept_rate":25,"display_name":"Nabeel Khan Ghauri"},"score":0,"creation_date":1650886765,"post_id":70525045,"comment_id":127221625,"body_markdown":"I used prepareStatement to execute the stored procedure","body":"I used prepareStatement to execute the stored procedure"}],"owner":{"account_id":5790820,"reputation":155,"user_id":4568355,"accept_rate":25,"display_name":"Nabeel Khan Ghauri"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":337,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1640872177,"creation_date":1640812121,"question_id":70525045,"body_markdown":"I am using py4j to execute a stored procedure(Redshift). The JDBC connection is created in AWS glue. Below is the code:\r\n \r\n\r\n    import sys\r\n    from awsglue.transforms import *\r\n    from awsglue.utils import getResolvedOptions\r\n    from pyspark.context import SparkContext\r\n    from awsglue.context import GlueContext\r\n    from awsglue.job import Job\r\n    from awsglue import DynamicFrame\r\n    \r\n    \r\n    args = getResolvedOptions(sys.argv, [&quot;JOB_NAME&quot;])\r\n    sc = SparkContext()\r\n    glueContext = GlueContext(sc)\r\n    spark = glueContext.spark_session\r\n    logger = glueContext.get_logger()\r\n    job = Job(glueContext)\r\n    job.init(args[&quot;JOB_NAME&quot;], args)\r\n    \r\n    source_jdbc_conf_flywheel = glueContext.extract_jdbc_conf(&#39;Redshift_QA&#39;)\r\n    \r\n    from py4j.java_gateway import java_import\r\n    java_import(sc._gateway.jvm,&quot;java.sql.Connection&quot;)\r\n    java_import(sc._gateway.jvm,&quot;java.sql.DatabaseMetaData&quot;)\r\n    java_import(sc._gateway.jvm,&quot;java.sql.DriverManager&quot;)\r\n    java_import(sc._gateway.jvm,&quot;java.sql.SQLException&quot;)\r\n    java_import(sc._gateway.jvm,&quot;java.sql.CallableStatement&quot;)\r\n    \r\n    dummy_url=source_jdbc_conf_flywheel.get(&#39;url&#39;)+&quot;/&quot;+&#39;fwdb&#39;\r\n    \r\n    conn = sc._gateway.jvm.DriverManager.getConnection(dummy_url, source_jdbc_conf_flywheel.get(&#39;user&#39;), source_jdbc_conf_flywheel.get(&#39;password&#39;))\r\n    cstmt= conn.prepareCall(&quot;{call fwdb.fw.sp_unload_brand_to_datalake(?,?)}&quot;)\r\n    cstmt.setString(1, &quot;xyz&quot;)\r\n    cstmt.setString(2, &quot;xyz&quot;)\r\n    cstmt.execute()\r\n    conn.close()\r\n\r\nI keep getting string out of index range error. The SP takes two parameters and unload the results to s3. Please help\r\n\r\n\r\n","title":"Unable to execute a stored procedure. An error occurred while calling o91.prepareCall. [JDBC Driver]String index out of range: 33","body":"<p>I am using py4j to execute a stored procedure(Redshift). The JDBC connection is created in AWS glue. Below is the code:</p>\n<pre><code>import sys\nfrom awsglue.transforms import *\nfrom awsglue.utils import getResolvedOptions\nfrom pyspark.context import SparkContext\nfrom awsglue.context import GlueContext\nfrom awsglue.job import Job\nfrom awsglue import DynamicFrame\n\n\nargs = getResolvedOptions(sys.argv, [&quot;JOB_NAME&quot;])\nsc = SparkContext()\nglueContext = GlueContext(sc)\nspark = glueContext.spark_session\nlogger = glueContext.get_logger()\njob = Job(glueContext)\njob.init(args[&quot;JOB_NAME&quot;], args)\n\nsource_jdbc_conf_flywheel = glueContext.extract_jdbc_conf('Redshift_QA')\n\nfrom py4j.java_gateway import java_import\njava_import(sc._gateway.jvm,&quot;java.sql.Connection&quot;)\njava_import(sc._gateway.jvm,&quot;java.sql.DatabaseMetaData&quot;)\njava_import(sc._gateway.jvm,&quot;java.sql.DriverManager&quot;)\njava_import(sc._gateway.jvm,&quot;java.sql.SQLException&quot;)\njava_import(sc._gateway.jvm,&quot;java.sql.CallableStatement&quot;)\n\ndummy_url=source_jdbc_conf_flywheel.get('url')+&quot;/&quot;+'fwdb'\n\nconn = sc._gateway.jvm.DriverManager.getConnection(dummy_url, source_jdbc_conf_flywheel.get('user'), source_jdbc_conf_flywheel.get('password'))\ncstmt= conn.prepareCall(&quot;{call fwdb.fw.sp_unload_brand_to_datalake(?,?)}&quot;)\ncstmt.setString(1, &quot;xyz&quot;)\ncstmt.setString(2, &quot;xyz&quot;)\ncstmt.execute()\nconn.close()\n</code></pre>\n<p>I keep getting string out of index range error. The SP takes two parameters and unload the results to s3. Please help</p>\n"},{"tags":["java","sockets","session","server","client"],"comments":[{"owner":{"account_id":23784943,"reputation":1,"user_id":17797162,"display_name":"mohammad"},"score":0,"creation_date":1640872625,"post_id":70532537,"comment_id":124680060,"body_markdown":"also when I remove 1st &quot;while&quot;s , again program works","body":"also when I remove 1st &quot;while&quot;s , again program works"},{"owner":{"account_id":23784943,"reputation":1,"user_id":17797162,"display_name":"mohammad"},"score":0,"creation_date":1640893299,"post_id":70532537,"comment_id":124686439,"body_markdown":"@AliasCartellano thanks , but I don&#39;t know how to run debugger for server client programs. could you please guide me more ?","body":"@AliasCartellano thanks , but I don&#39;t know how to run debugger for server client programs. could you please guide me more ?"}],"owner":{"account_id":23784943,"reputation":1,"user_id":17797162,"display_name":"mohammad"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":182,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1640872139,"creation_date":1640872139,"question_id":70532537,"body_markdown":"Hello I have a problem with sending and receiving files through sockets in java\r\n\r\nI&#39;ve written 2 while in client and session class one for sending and one for receiving \r\nprogram starts and send a request file from client to session then session receives it and creates it\r\n\r\nafter that session send response file to client and client receives it and creates it \r\n\r\nwhen I remove 2nd &quot;while&quot;s in both client and session class , program works and client sends data and session receives it and create the file\r\nbut when I add 2nd &quot;while&quot;s again , program stuck and even last operation that I mentioned won&#39;t work\r\n\r\nServer Class\r\n\r\n    public class Server {\r\n    public Server(int port) {\r\n        try {\r\n            ServerSocket server = new ServerSocket(port);\r\n            while (true) {\r\n                Socket client = server.accept();\r\n                System.out.println(&quot;New client connected&quot; + client.getInetAddress().getHostAddress());\r\n                Session clientSocket = new Session(client);\r\n                new Thread(clientSocket).start();\r\n            }\r\n        } catch (IOException i) {\r\n            System.out.println(i);\r\n        }\r\n    }\r\n    public static void main(String args[]) {\r\n        Server server = new Server(5000);\r\n    }}\r\n\r\nSession Class : \r\n\r\n    public class Session implements Runnable{\r\n    private Socket socket;\r\n    public Session(Socket socket){\r\n        this.socket = socket;\r\n    }\r\n    public void run(){\r\n        try {\r\n            FileOutputStream fileOutputStream = new FileOutputStream(&quot;RequestClient.txt&quot;);\r\n            FileInputStream fileInputStream = new FileInputStream(&quot;Response.txt&quot;);\r\n            DataOutputStream dataOutputStream = new DataOutputStream(socket.getOutputStream());\r\n            DataInputStream dataInputStream = new DataInputStream(socket.getInputStream());\r\n            int count;\r\n            byte[] bytes = new byte[4096];\r\n            while ((count = dataInputStream.read(bytes)) &gt; 0) {\r\n                fileOutputStream.write(bytes, 0, count);\r\n            }\r\n            while ((count = fileInputStream.read(bytes)) &gt; 0) {\r\n                dataOutputStream.write(bytes, 0, count);\r\n            }\r\n            fileInputStream.close();\r\n            fileOutputStream.close();\r\n            dataOutputStream.close();\r\n            dataInputStream.close();\r\n            socket.close();\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }}\r\n\r\nClient Class :\r\n\r\n    public class Client {\r\n        public Client (String address, int port) {\r\n            Socket socket = null;\r\n            try {\r\n                socket = new Socket(address, port);\r\n                File requestFile = new File(&quot;Request.txt&quot;);\r\n                FileOutputStream fileOutputStream = new FileOutputStream(&quot;ResponseServer.txt&quot;);\r\n                FileInputStream fileInputStream = new FileInputStream(requestFile);\r\n                DataOutputStream dataOutputStream = new DataOutputStream(new BufferedOutputStream(socket.getOutputStream()));\r\n                DataInputStream dataInputStream = new DataInputStream(new BufferedInputStream(socket.getInputStream()));\r\n                int count;\r\n                byte[] buffer = new byte[4096];\r\n                while ((count = fileInputStream.read(buffer)) &gt; 0) {\r\n                    dataOutputStream.write(buffer, 0, count);\r\n                }\r\n                while ((count = dataInputStream.read(buffer)) &gt; 0) {\r\n                    fileOutputStream.write(buffer, 0, count);\r\n                }\r\n                fileInputStream.close();\r\n                fileOutputStream.close();\r\n                dataOutputStream.close();\r\n                dataInputStream.close();\r\n                socket.close();\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    public static void main(String args[]){\r\n        Client connectionService = new Client(&quot;127.0.0.1&quot;, 5000);\r\n    }}\r\n\r\n\r\n\r\n","title":"How to send and receive file with socket programming in java","body":"<p>Hello I have a problem with sending and receiving files through sockets in java</p>\n<p>I've written 2 while in client and session class one for sending and one for receiving\nprogram starts and send a request file from client to session then session receives it and creates it</p>\n<p>after that session send response file to client and client receives it and creates it</p>\n<p>when I remove 2nd &quot;while&quot;s in both client and session class , program works and client sends data and session receives it and create the file\nbut when I add 2nd &quot;while&quot;s again , program stuck and even last operation that I mentioned won't work</p>\n<p>Server Class</p>\n<pre><code>public class Server {\npublic Server(int port) {\n    try {\n        ServerSocket server = new ServerSocket(port);\n        while (true) {\n            Socket client = server.accept();\n            System.out.println(&quot;New client connected&quot; + client.getInetAddress().getHostAddress());\n            Session clientSocket = new Session(client);\n            new Thread(clientSocket).start();\n        }\n    } catch (IOException i) {\n        System.out.println(i);\n    }\n}\npublic static void main(String args[]) {\n    Server server = new Server(5000);\n}}\n</code></pre>\n<p>Session Class :</p>\n<pre><code>public class Session implements Runnable{\nprivate Socket socket;\npublic Session(Socket socket){\n    this.socket = socket;\n}\npublic void run(){\n    try {\n        FileOutputStream fileOutputStream = new FileOutputStream(&quot;RequestClient.txt&quot;);\n        FileInputStream fileInputStream = new FileInputStream(&quot;Response.txt&quot;);\n        DataOutputStream dataOutputStream = new DataOutputStream(socket.getOutputStream());\n        DataInputStream dataInputStream = new DataInputStream(socket.getInputStream());\n        int count;\n        byte[] bytes = new byte[4096];\n        while ((count = dataInputStream.read(bytes)) &gt; 0) {\n            fileOutputStream.write(bytes, 0, count);\n        }\n        while ((count = fileInputStream.read(bytes)) &gt; 0) {\n            dataOutputStream.write(bytes, 0, count);\n        }\n        fileInputStream.close();\n        fileOutputStream.close();\n        dataOutputStream.close();\n        dataInputStream.close();\n        socket.close();\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n}}\n</code></pre>\n<p>Client Class :</p>\n<pre><code>public class Client {\n    public Client (String address, int port) {\n        Socket socket = null;\n        try {\n            socket = new Socket(address, port);\n            File requestFile = new File(&quot;Request.txt&quot;);\n            FileOutputStream fileOutputStream = new FileOutputStream(&quot;ResponseServer.txt&quot;);\n            FileInputStream fileInputStream = new FileInputStream(requestFile);\n            DataOutputStream dataOutputStream = new DataOutputStream(new BufferedOutputStream(socket.getOutputStream()));\n            DataInputStream dataInputStream = new DataInputStream(new BufferedInputStream(socket.getInputStream()));\n            int count;\n            byte[] buffer = new byte[4096];\n            while ((count = fileInputStream.read(buffer)) &gt; 0) {\n                dataOutputStream.write(buffer, 0, count);\n            }\n            while ((count = dataInputStream.read(buffer)) &gt; 0) {\n                fileOutputStream.write(buffer, 0, count);\n            }\n            fileInputStream.close();\n            fileOutputStream.close();\n            dataOutputStream.close();\n            dataInputStream.close();\n            socket.close();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\npublic static void main(String args[]){\n    Client connectionService = new Client(&quot;127.0.0.1&quot;, 5000);\n}}\n</code></pre>\n"},{"tags":["java","android","wav","pcm","audiorecord"],"comments":[{"owner":{"account_id":186438,"reputation":11018,"user_id":423823,"display_name":"Zelimir"},"score":0,"creation_date":1329495669,"post_id":9179536,"comment_id":11775969,"body_markdown":"Could you please display what your header looks like. E.G first 48 bytes (3 rows, 16 bytes in each) displayed as HEX values: e.g. 52 49 46 46 E1 C3 ...","body":"Could you please display what your header looks like. E.G first 48 bytes (3 rows, 16 bytes in each) displayed as HEX values: e.g. 52 49 46 46 E1 C3 ..."}],"answers":[{"tags":[],"owner":{"account_id":290146,"reputation":2061,"user_id":591530,"display_name":"Ken Fehling"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1329494094,"creation_date":1329493294,"answer_id":9331194,"question_id":9179536,"body_markdown":"Are you certain of the byte order? &quot;RIFF&quot;, &quot;WAV&quot;, &quot;fmt&quot;, and &quot;data&quot; look fine but the numbers in the header may need to be a different order (little endian vs. big endian). You also don&#39;t need to convert to bytes manually using your `intToByteArray` method. You could use the `writeInt` and `writeShort` methods of `DataOutputStream`. For the first one, this would look something like:\r\n\r\n`outFile.writeInt(Integer.reverseBytes((int)myChunkSize));`\r\n\r\nFor the shorts it&#39;d be like:\r\n\r\n`outFile.writeShort(Short.reverseBytes((short)myFormat))`\r\n\r\nThis way you also don&#39;t need to provide the offset and length `(0, 4)` numbers. It&#39;s nice.","title":"Writing PCM recorded data into a .wav file (java android)","body":"<p>Are you certain of the byte order? \"RIFF\", \"WAV\", \"fmt\", and \"data\" look fine but the numbers in the header may need to be a different order (little endian vs. big endian). You also don't need to convert to bytes manually using your <code>intToByteArray</code> method. You could use the <code>writeInt</code> and <code>writeShort</code> methods of <code>DataOutputStream</code>. For the first one, this would look something like:</p>\n\n<p><code>outFile.writeInt(Integer.reverseBytes((int)myChunkSize));</code></p>\n\n<p>For the shorts it'd be like:</p>\n\n<p><code>outFile.writeShort(Short.reverseBytes((short)myFormat))</code></p>\n\n<p>This way you also don't need to provide the offset and length <code>(0, 4)</code> numbers. It's nice.</p>\n"},{"tags":[],"owner":{"account_id":1663477,"reputation":8616,"user_id":1531343,"accept_rate":57,"display_name":"BhavikKama"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1349520873,"creation_date":1347368404,"answer_id":12370312,"question_id":9179536,"body_markdown":"As per the header is concern, I had followed this code (if it&#39;s helps you some way).\r\n\r\n\r\n    byte[] header = new byte[44];\r\n    \t\t\r\n    \t\theader[0] = &#39;R&#39;;  // RIFF/WAVE header\r\n    \t\theader[1] = &#39;I&#39;;\r\n    \t\theader[2] = &#39;F&#39;;\r\n    \t\theader[3] = &#39;F&#39;;\r\n    \t\theader[4] = (byte) (totalDataLen &amp; 0xff);\r\n    \t\theader[5] = (byte) ((totalDataLen &gt;&gt; 8) &amp; 0xff);\r\n    \t\theader[6] = (byte) ((totalDataLen &gt;&gt; 16) &amp; 0xff);\r\n    \t\theader[7] = (byte) ((totalDataLen &gt;&gt; 24) &amp; 0xff);\r\n    \t\theader[8] = &#39;W&#39;;\r\n    \t\theader[9] = &#39;A&#39;;\r\n    \t\theader[10] = &#39;V&#39;;\r\n    \t\theader[11] = &#39;E&#39;;\r\n    \t\theader[12] = &#39;f&#39;;  // &#39;fmt &#39; chunk\r\n    \t\theader[13] = &#39;m&#39;;\r\n    \t\theader[14] = &#39;t&#39;;\r\n    \t\theader[15] = &#39; &#39;;\r\n    \t\theader[16] = 16;  // 4 bytes: size of &#39;fmt &#39; chunk\r\n    \t\theader[17] = 0;\r\n    \t\theader[18] = 0;\r\n    \t\theader[19] = 0;\r\n    \t\theader[20] = 1;  // format = 1\r\n    \t\theader[21] = 0;\r\n    \t\theader[22] = (byte) channels;\r\n    \t\theader[23] = 0;\r\n    \t\theader[24] = (byte) (longSampleRate &amp; 0xff);\r\n    \t\theader[25] = (byte) ((longSampleRate &gt;&gt; 8) &amp; 0xff);\r\n    \t\theader[26] = (byte) ((longSampleRate &gt;&gt; 16) &amp; 0xff);\r\n    \t\theader[27] = (byte) ((longSampleRate &gt;&gt; 24) &amp; 0xff);\r\n    \t\theader[28] = (byte) (byteRate &amp; 0xff);\r\n    \t\theader[29] = (byte) ((byteRate &gt;&gt; 8) &amp; 0xff);\r\n    \t\theader[30] = (byte) ((byteRate &gt;&gt; 16) &amp; 0xff);\r\n    \t\theader[31] = (byte) ((byteRate &gt;&gt; 24) &amp; 0xff);\r\n    \t\theader[32] = (byte) (2 * 16 / 8);  // block align\r\n    \t\theader[33] = 0;\r\n    \t\theader[34] = RECORDER_BPP;  // bits per sample\r\n    \t\theader[35] = 0;\r\n    \t\theader[36] = &#39;d&#39;;\r\n    \t\theader[37] = &#39;a&#39;;\r\n    \t\theader[38] = &#39;t&#39;;\r\n    \t\theader[39] = &#39;a&#39;;\r\n    \t\theader[40] = (byte) (totalAudioLen &amp; 0xff);\r\n    \t\theader[41] = (byte) ((totalAudioLen &gt;&gt; 8) &amp; 0xff);\r\n    \t\theader[42] = (byte) ((totalAudioLen &gt;&gt; 16) &amp; 0xff);\r\n    \t\theader[43] = (byte) ((totalAudioLen &gt;&gt; 24) &amp; 0xff);\r\n    \r\n    \t\tout.write(header, 0, 44);","title":"Writing PCM recorded data into a .wav file (java android)","body":"<p>As per the header is concern, I had followed this code (if it's helps you some way).</p>\n\n<pre><code>byte[] header = new byte[44];\n\n        header[0] = 'R';  // RIFF/WAVE header\n        header[1] = 'I';\n        header[2] = 'F';\n        header[3] = 'F';\n        header[4] = (byte) (totalDataLen &amp; 0xff);\n        header[5] = (byte) ((totalDataLen &gt;&gt; 8) &amp; 0xff);\n        header[6] = (byte) ((totalDataLen &gt;&gt; 16) &amp; 0xff);\n        header[7] = (byte) ((totalDataLen &gt;&gt; 24) &amp; 0xff);\n        header[8] = 'W';\n        header[9] = 'A';\n        header[10] = 'V';\n        header[11] = 'E';\n        header[12] = 'f';  // 'fmt ' chunk\n        header[13] = 'm';\n        header[14] = 't';\n        header[15] = ' ';\n        header[16] = 16;  // 4 bytes: size of 'fmt ' chunk\n        header[17] = 0;\n        header[18] = 0;\n        header[19] = 0;\n        header[20] = 1;  // format = 1\n        header[21] = 0;\n        header[22] = (byte) channels;\n        header[23] = 0;\n        header[24] = (byte) (longSampleRate &amp; 0xff);\n        header[25] = (byte) ((longSampleRate &gt;&gt; 8) &amp; 0xff);\n        header[26] = (byte) ((longSampleRate &gt;&gt; 16) &amp; 0xff);\n        header[27] = (byte) ((longSampleRate &gt;&gt; 24) &amp; 0xff);\n        header[28] = (byte) (byteRate &amp; 0xff);\n        header[29] = (byte) ((byteRate &gt;&gt; 8) &amp; 0xff);\n        header[30] = (byte) ((byteRate &gt;&gt; 16) &amp; 0xff);\n        header[31] = (byte) ((byteRate &gt;&gt; 24) &amp; 0xff);\n        header[32] = (byte) (2 * 16 / 8);  // block align\n        header[33] = 0;\n        header[34] = RECORDER_BPP;  // bits per sample\n        header[35] = 0;\n        header[36] = 'd';\n        header[37] = 'a';\n        header[38] = 't';\n        header[39] = 'a';\n        header[40] = (byte) (totalAudioLen &amp; 0xff);\n        header[41] = (byte) ((totalAudioLen &gt;&gt; 8) &amp; 0xff);\n        header[42] = (byte) ((totalAudioLen &gt;&gt; 16) &amp; 0xff);\n        header[43] = (byte) ((totalAudioLen &gt;&gt; 24) &amp; 0xff);\n\n        out.write(header, 0, 44);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1911808,"reputation":196,"user_id":1725431,"display_name":"Ronald Kunenborg"},"down_vote_count":0,"up_vote_count":17,"is_accepted":true,"score":17,"last_activity_date":1349541939,"creation_date":1349541939,"answer_id":12761716,"question_id":9179536,"body_markdown":"I&#39;ve been wrestling with this exact same question for hours now, and my issue was mostly that when recording in 16 bits you have to be very careful about what you write to the output. The WAV file expects the data in Little Endian format, but using writeShort writes it to the output as Big Endian. I also got interesting results when using the other functions so I returned to writing bytes in the correct order and that works.\r\n\r\nI used a Hex editor extensively while debugging this. I can recommend you do the same. Also, the header in the answer above works, I used it to check versus my own code and this header is rather foolproof.","title":"Writing PCM recorded data into a .wav file (java android)","body":"<p>I've been wrestling with this exact same question for hours now, and my issue was mostly that when recording in 16 bits you have to be very careful about what you write to the output. The WAV file expects the data in Little Endian format, but using writeShort writes it to the output as Big Endian. I also got interesting results when using the other functions so I returned to writing bytes in the correct order and that works.</p>\n\n<p>I used a Hex editor extensively while debugging this. I can recommend you do the same. Also, the header in the answer above works, I used it to check versus my own code and this header is rather foolproof.</p>\n"},{"tags":[],"owner":{"account_id":1861731,"reputation":306,"user_id":1686216,"display_name":"marfnk"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1417366697,"creation_date":1417366697,"answer_id":27215737,"question_id":9179536,"body_markdown":"As Ronald Kunenborg correctly states the problem is the Litte Endian / Big Endian conversion.\r\n\r\nThe simplest way is to write a short helper like this:\r\n\r\n    public static void writeShortLE(DataOutputStream out, short value) {\r\n      out.writeByte(value &amp; 0xFF);\r\n      out.writeByte((value &gt;&gt; 8) &amp; 0xFF);\r\n    }\r\n\r\nThis is very helpful if you record audio to a wave file with Android and you&#39;re in need of the short array, too.\r\n\r\n\r\n(Credits: [https://stackoverflow.com/a/1394839/1686216][1])\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/1394839/1686216","title":"Writing PCM recorded data into a .wav file (java android)","body":"<p>As Ronald Kunenborg correctly states the problem is the Litte Endian / Big Endian conversion.</p>\n\n<p>The simplest way is to write a short helper like this:</p>\n\n<pre><code>public static void writeShortLE(DataOutputStream out, short value) {\n  out.writeByte(value &amp; 0xFF);\n  out.writeByte((value &gt;&gt; 8) &amp; 0xFF);\n}\n</code></pre>\n\n<p>This is very helpful if you record audio to a wave file with Android and you're in need of the short array, too.</p>\n\n<p>(Credits: <a href=\"https://stackoverflow.com/a/1394839/1686216\">https://stackoverflow.com/a/1394839/1686216</a>)</p>\n"},{"tags":[],"owner":{"account_id":15736659,"reputation":442,"user_id":11355399,"display_name":"Huhngut"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640872080,"creation_date":1640872080,"answer_id":70532527,"question_id":9179536,"body_markdown":"The following is an example that creates a .wav file in Little Endian format with a proper header. It then appends empty audio data for a specified duration in seconds. In you case you want to append you recorded audio.\r\n\r\n    public static void createEmptyWaveFile(int sampleRate, short sampleSize, short channels, int duration, File file)\r\n    \t\t\tthrows IOException {\r\n    \r\n    \t\t// calculate some\r\n    \t\tshort blockAlign = (short) (sampleSize * channels / 8);\r\n    \t\tint byteRate = sampleRate * sampleSize * channels / 8;\r\n    \t\tint audioSize = byteRate * duration;\r\n    \t\tint fileSize = audioSize + 44;\r\n    \r\n    \t\t// create an Array that contains empty audio data for the given duration\r\n    \t\tbyte[] audioData = new byte[audioSize];\r\n    \t\tfor (int i = 0; i &lt; audioData.length; i++)\r\n    \t\t\taudioData[i] = (byte) 0;\r\n    \r\n    \t\t// The stream that writes the audio file to the disk\r\n    \t\tDataOutputStream out = new DataOutputStream(new FileOutputStream(file));\r\n    \r\n    \t\t// Write Header\r\n    \t\tout.writeBytes(&quot;RIFF&quot;);// 0-4 ChunkId always RIFF\r\n    \t\tout.writeInt(Integer.reverseBytes(fileSize));// 5-8 ChunkSize always audio-length +header-length(44)\r\n    \t\tout.writeBytes(&quot;WAVE&quot;);// 9-12 Format always WAVE\r\n    \t\tout.writeBytes(&quot;fmt &quot;);// 13-16 Subchunk1 ID always &quot;fmt &quot; with trailing whitespace\r\n    \t\tout.writeInt(Integer.reverseBytes(16)); // 17-20 Subchunk1 Size always 16\r\n    \t\tout.writeShort(Short.reverseBytes((short) 1));// 21-22 Audio-Format 1 for PCM PulseAudio\r\n    \t\tout.writeShort(Short.reverseBytes(channels));// 23-24 Num-Channels 1 for mono, 2 for stereo\r\n    \t\tout.writeInt(Integer.reverseBytes(sampleRate));// 25-28 Sample-Rate\r\n    \t\tout.writeInt(Integer.reverseBytes(byteRate));// 29-32 Byte Rate\r\n    \t\tout.writeShort(Short.reverseBytes(blockAlign));// 33-34 Block Align\r\n    \t\tout.writeShort(Short.reverseBytes(sampleSize));// 35-36 Bits-Per-Sample\r\n    \t\tout.writeBytes(&quot;data&quot;);// 37-40 Subchunk2 ID always data\r\n    \t\tout.writeInt(Integer.reverseBytes(audioSize));// 41-44 Subchunk 2 Size audio-length\r\n    \r\n    \t\t// Append the silent audio data or what you recorded from the mic\r\n    \t\tout.write(audioData);\r\n    \t\tout.close();// close the stream properly\r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args) throws IOException {\r\n    \t\tcreateEmptyWaveFile(44100, (short) 16, (short) 2, 10, new File(&quot;out.wav&quot;));\r\n    \t}","title":"Writing PCM recorded data into a .wav file (java android)","body":"<p>The following is an example that creates a .wav file in Little Endian format with a proper header. It then appends empty audio data for a specified duration in seconds. In you case you want to append you recorded audio.</p>\n<pre><code>public static void createEmptyWaveFile(int sampleRate, short sampleSize, short channels, int duration, File file)\n            throws IOException {\n\n        // calculate some\n        short blockAlign = (short) (sampleSize * channels / 8);\n        int byteRate = sampleRate * sampleSize * channels / 8;\n        int audioSize = byteRate * duration;\n        int fileSize = audioSize + 44;\n\n        // create an Array that contains empty audio data for the given duration\n        byte[] audioData = new byte[audioSize];\n        for (int i = 0; i &lt; audioData.length; i++)\n            audioData[i] = (byte) 0;\n\n        // The stream that writes the audio file to the disk\n        DataOutputStream out = new DataOutputStream(new FileOutputStream(file));\n\n        // Write Header\n        out.writeBytes(&quot;RIFF&quot;);// 0-4 ChunkId always RIFF\n        out.writeInt(Integer.reverseBytes(fileSize));// 5-8 ChunkSize always audio-length +header-length(44)\n        out.writeBytes(&quot;WAVE&quot;);// 9-12 Format always WAVE\n        out.writeBytes(&quot;fmt &quot;);// 13-16 Subchunk1 ID always &quot;fmt &quot; with trailing whitespace\n        out.writeInt(Integer.reverseBytes(16)); // 17-20 Subchunk1 Size always 16\n        out.writeShort(Short.reverseBytes((short) 1));// 21-22 Audio-Format 1 for PCM PulseAudio\n        out.writeShort(Short.reverseBytes(channels));// 23-24 Num-Channels 1 for mono, 2 for stereo\n        out.writeInt(Integer.reverseBytes(sampleRate));// 25-28 Sample-Rate\n        out.writeInt(Integer.reverseBytes(byteRate));// 29-32 Byte Rate\n        out.writeShort(Short.reverseBytes(blockAlign));// 33-34 Block Align\n        out.writeShort(Short.reverseBytes(sampleSize));// 35-36 Bits-Per-Sample\n        out.writeBytes(&quot;data&quot;);// 37-40 Subchunk2 ID always data\n        out.writeInt(Integer.reverseBytes(audioSize));// 41-44 Subchunk 2 Size audio-length\n\n        // Append the silent audio data or what you recorded from the mic\n        out.write(audioData);\n        out.close();// close the stream properly\n    }\n\n    public static void main(String[] args) throws IOException {\n        createEmptyWaveFile(44100, (short) 16, (short) 2, 10, new File(&quot;out.wav&quot;));\n    }\n</code></pre>\n"}],"owner":{"account_id":1024188,"reputation":706,"user_id":1033860,"accept_rate":67,"display_name":"Oliver Mahoney"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34602,"favorite_count":0,"down_vote_count":0,"up_vote_count":37,"accepted_answer_id":12761716,"answer_count":5,"score":37,"last_activity_date":1640872080,"creation_date":1328630528,"question_id":9179536,"body_markdown":"I&#39;m using AudioRecord to record 16 bit PCM data in android. After recording the data and saving it to a file, I read it back to save it as .wav file.\r\n\r\nThe problem is that the WAV files are recognized by media players but play nothing but pure noise. My best guess at the moment is that my wav file headers are incorrect but I have been unable to see what exactly the problem is. (I think this because I can play the raw PCM data that I recorded in Audacity)\r\n\r\nHere&#39;s my code for reading the raw PCM file and saving it as a .wav:\r\n\r\n\r\n\r\n    private void properWAV(File fileToConvert, float newRecordingID){\r\n\t\ttry {\r\n\t\t\tlong mySubChunk1Size = 16;\r\n\t\t\tint myBitsPerSample= 16;\r\n\t\t\tint myFormat = 1;\r\n\t\t\tlong myChannels = 1;\r\n\t\t\tlong mySampleRate = 22100;\r\n\t\t\tlong myByteRate = mySampleRate * myChannels * myBitsPerSample/8;\r\n\t\t\tint myBlockAlign = (int) (myChannels * myBitsPerSample/8);\r\n\t\t\t\r\n\t\t\tbyte[] clipData = getBytesFromFile(fileToConvert);\r\n\t\t\t\r\n\t\t\tlong myDataSize = clipData.length;\r\n\t\t\tlong myChunk2Size =  myDataSize * myChannels * myBitsPerSample/8;\r\n\t\t\tlong myChunkSize = 36 + myChunk2Size;\r\n\r\n\t\t\tOutputStream os;\t\t\r\n\t\t\tos = new FileOutputStream(new File(&quot;/sdcard/onefile/assessor/OneFile_Audio_&quot;+ newRecordingID+&quot;.wav&quot;));\r\n\t\t\tBufferedOutputStream bos = new BufferedOutputStream(os);\r\n\t\t\tDataOutputStream outFile = new DataOutputStream(bos);\r\n           \r\n\t\t\toutFile.writeBytes(&quot;RIFF&quot;);\t\t\t\t\t\t\t\t\t// 00 - RIFF\r\n\t\t\toutFile.write(intToByteArray((int)myChunkSize), 0, 4);\t\t// 04 - how big is the rest of this file?\r\n\t\t\toutFile.writeBytes(&quot;WAVE&quot;);\t\t\t\t\t\t\t\t\t// 08 - WAVE\r\n\t\t\toutFile.writeBytes(&quot;fmt &quot;);\t\t\t\t\t\t\t\t\t// 12 - fmt \r\n\t\t\toutFile.write(intToByteArray((int)mySubChunk1Size), 0, 4);\t// 16 - size of this chunk\r\n\t\t\toutFile.write(shortToByteArray((short)myFormat), 0, 2);\t\t// 20 - what is the audio format? 1 for PCM = Pulse Code Modulation\r\n\t\t\toutFile.write(shortToByteArray((short)myChannels), 0, 2);\t// 22 - mono or stereo? 1 or 2?  (or 5 or ???)\r\n\t\t\toutFile.write(intToByteArray((int)mySampleRate), 0, 4);\t\t// 24 - samples per second (numbers per second)\r\n\t\t\toutFile.write(intToByteArray((int)myByteRate), 0, 4);\t\t// 28 - bytes per second\r\n\t\t\toutFile.write(shortToByteArray((short)myBlockAlign), 0, 2);\t// 32 - # of bytes in one sample, for all channels\r\n\t\t\toutFile.write(shortToByteArray((short)myBitsPerSample), 0, 2);\t// 34 - how many bits in a sample(number)?  usually 16 or 24\r\n\t\t\toutFile.writeBytes(&quot;data&quot;);\t\t\t\t\t\t\t\t\t// 36 - data\r\n\t\t\toutFile.write(intToByteArray((int)myDataSize), 0, 4);\t\t// 40 - how big is this data chunk\r\n\t\t\toutFile.write(clipData);\t\t\t\t\t\t\t\t\t// 44 - the actual data itself - just a long string of numbers\r\n\t\t\t \r\n\t\t\toutFile.flush();\r\n\t\t\toutFile.close();\r\n\t\t\t\r\n\t\t} catch (IOException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n\r\n    private static byte[] intToByteArray(int i)\r\n\t\t{\r\n\t\t\tbyte[] b = new byte[4];\r\n\t\t\tb[0] = (byte) (i &amp; 0x00FF);\r\n\t\t\tb[1] = (byte) ((i &gt;&gt; 8) &amp; 0x000000FF);\r\n\t\t\tb[2] = (byte) ((i &gt;&gt; 16) &amp; 0x000000FF);\r\n\t\t\tb[3] = (byte) ((i &gt;&gt; 24) &amp; 0x000000FF);\r\n\t\t\treturn b;\r\n\t\t}\r\n\r\n\t\t// convert a short to a byte array\r\n\t\tpublic static byte[] shortToByteArray(short data)\r\n\t\t{\r\n\t\t\t/*\r\n\t\t\t * NB have also tried:\r\n\t\t\t * return new byte[]{(byte)(data &amp; 0xff),(byte)((data &gt;&gt; 8) &amp; 0xff)};\r\n\t\t\t * \r\n\t\t\t */\r\n\t\t\t\r\n\t\t\treturn new byte[]{(byte)(data &amp; 0xff),(byte)((data &gt;&gt;&gt; 8) &amp; 0xff)};\r\n\t\t}\r\n\r\n\r\n\r\n I haven&#39;t included getBytesFromFile() since it takes up too much space and its a tried and tested method.\r\nAnyway, here&#39;s the code that does the actual recording:\r\n\r\n    public void run() { \r\n\t\tLog.i(&quot;ONEFILE&quot;, &quot;Starting main audio capture loop...&quot;);\r\n\r\n\t\tint frequency = 22100;\r\n\t\tint channelConfiguration = AudioFormat.CHANNEL_CONFIGURATION_MONO;\r\n\t\tint audioEncoding = AudioFormat.ENCODING_PCM_16BIT; \r\n\r\n\t\tfinal int bufferSize = AudioRecord.getMinBufferSize(frequency, channelConfiguration, audioEncoding); \r\n\r\n\t\tAudioRecord audioRecord = new AudioRecord(MediaRecorder.AudioSource.MIC, frequency, channelConfiguration, audioEncoding, bufferSize);\r\n\r\n\t\taudioRecord.startRecording();\r\n\t\tByteArrayOutputStream recData = new ByteArrayOutputStream(); \r\n\t\tDataOutputStream dos = new DataOutputStream(recData);\r\n\r\n\t\tshort[] buffer = new short[bufferSize];  \r\n\t\taudioRecord.startRecording();\r\n\r\n\t\twhile (!stopped) {  \r\n\t\t\tint bufferReadResult = audioRecord.read(buffer, 0, bufferSize);\r\n\r\n\t\t\tfor(int i = 0; i &lt; bufferReadResult;i++) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tdos.writeShort(buffer[i]);\r\n\t\t\t\t} catch (IOException e) {\r\n\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}  \r\n\t\taudioRecord.stop();\r\n\t\ttry {\r\n\t\t\tdos.flush();\r\n\t\t\tdos.close();\r\n\t\t} catch (IOException e1) {\r\n\t\t\te1.printStackTrace();\r\n\t\t}\r\n\r\n\t\taudioRecord.stop();\r\n\r\n\t\tbyte[] clipData = recData.toByteArray();\r\n\r\n\t\tFile file = new File(audioOutputPath);\r\n\t\tif(file.exists())\r\n\t\t\tfile.delete();\r\n\t\tfile = new File(audioOutputPath);\r\n\t\tOutputStream os;\r\n\t\ttry {\r\n\t\t\tos = new FileOutputStream(file);\r\n\r\n\t\t\tBufferedOutputStream bos = new BufferedOutputStream(os);\r\n\t\t\tDataOutputStream outFile = new DataOutputStream(bos);\r\n\r\n\t\t\toutFile.write(clipData);  \r\n\r\n\t\t\toutFile.flush();\r\n\t\t\toutFile.close();\r\n\r\n\t\t} catch (FileNotFoundException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t} catch (IOException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n\r\nPlease suggest what could be going wrong.\r\n","title":"Writing PCM recorded data into a .wav file (java android)","body":"<p>I'm using AudioRecord to record 16 bit PCM data in android. After recording the data and saving it to a file, I read it back to save it as .wav file.</p>\n\n<p>The problem is that the WAV files are recognized by media players but play nothing but pure noise. My best guess at the moment is that my wav file headers are incorrect but I have been unable to see what exactly the problem is. (I think this because I can play the raw PCM data that I recorded in Audacity)</p>\n\n<p>Here's my code for reading the raw PCM file and saving it as a .wav:</p>\n\n<pre><code>private void properWAV(File fileToConvert, float newRecordingID){\n    try {\n        long mySubChunk1Size = 16;\n        int myBitsPerSample= 16;\n        int myFormat = 1;\n        long myChannels = 1;\n        long mySampleRate = 22100;\n        long myByteRate = mySampleRate * myChannels * myBitsPerSample/8;\n        int myBlockAlign = (int) (myChannels * myBitsPerSample/8);\n\n        byte[] clipData = getBytesFromFile(fileToConvert);\n\n        long myDataSize = clipData.length;\n        long myChunk2Size =  myDataSize * myChannels * myBitsPerSample/8;\n        long myChunkSize = 36 + myChunk2Size;\n\n        OutputStream os;        \n        os = new FileOutputStream(new File(\"/sdcard/onefile/assessor/OneFile_Audio_\"+ newRecordingID+\".wav\"));\n        BufferedOutputStream bos = new BufferedOutputStream(os);\n        DataOutputStream outFile = new DataOutputStream(bos);\n\n        outFile.writeBytes(\"RIFF\");                                 // 00 - RIFF\n        outFile.write(intToByteArray((int)myChunkSize), 0, 4);      // 04 - how big is the rest of this file?\n        outFile.writeBytes(\"WAVE\");                                 // 08 - WAVE\n        outFile.writeBytes(\"fmt \");                                 // 12 - fmt \n        outFile.write(intToByteArray((int)mySubChunk1Size), 0, 4);  // 16 - size of this chunk\n        outFile.write(shortToByteArray((short)myFormat), 0, 2);     // 20 - what is the audio format? 1 for PCM = Pulse Code Modulation\n        outFile.write(shortToByteArray((short)myChannels), 0, 2);   // 22 - mono or stereo? 1 or 2?  (or 5 or ???)\n        outFile.write(intToByteArray((int)mySampleRate), 0, 4);     // 24 - samples per second (numbers per second)\n        outFile.write(intToByteArray((int)myByteRate), 0, 4);       // 28 - bytes per second\n        outFile.write(shortToByteArray((short)myBlockAlign), 0, 2); // 32 - # of bytes in one sample, for all channels\n        outFile.write(shortToByteArray((short)myBitsPerSample), 0, 2);  // 34 - how many bits in a sample(number)?  usually 16 or 24\n        outFile.writeBytes(\"data\");                                 // 36 - data\n        outFile.write(intToByteArray((int)myDataSize), 0, 4);       // 40 - how big is this data chunk\n        outFile.write(clipData);                                    // 44 - the actual data itself - just a long string of numbers\n\n        outFile.flush();\n        outFile.close();\n\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n\n}\n\n\nprivate static byte[] intToByteArray(int i)\n    {\n        byte[] b = new byte[4];\n        b[0] = (byte) (i &amp; 0x00FF);\n        b[1] = (byte) ((i &gt;&gt; 8) &amp; 0x000000FF);\n        b[2] = (byte) ((i &gt;&gt; 16) &amp; 0x000000FF);\n        b[3] = (byte) ((i &gt;&gt; 24) &amp; 0x000000FF);\n        return b;\n    }\n\n    // convert a short to a byte array\n    public static byte[] shortToByteArray(short data)\n    {\n        /*\n         * NB have also tried:\n         * return new byte[]{(byte)(data &amp; 0xff),(byte)((data &gt;&gt; 8) &amp; 0xff)};\n         * \n         */\n\n        return new byte[]{(byte)(data &amp; 0xff),(byte)((data &gt;&gt;&gt; 8) &amp; 0xff)};\n    }\n</code></pre>\n\n<p>I haven't included getBytesFromFile() since it takes up too much space and its a tried and tested method.\nAnyway, here's the code that does the actual recording:</p>\n\n<pre><code>public void run() { \n    Log.i(\"ONEFILE\", \"Starting main audio capture loop...\");\n\n    int frequency = 22100;\n    int channelConfiguration = AudioFormat.CHANNEL_CONFIGURATION_MONO;\n    int audioEncoding = AudioFormat.ENCODING_PCM_16BIT; \n\n    final int bufferSize = AudioRecord.getMinBufferSize(frequency, channelConfiguration, audioEncoding); \n\n    AudioRecord audioRecord = new AudioRecord(MediaRecorder.AudioSource.MIC, frequency, channelConfiguration, audioEncoding, bufferSize);\n\n    audioRecord.startRecording();\n    ByteArrayOutputStream recData = new ByteArrayOutputStream(); \n    DataOutputStream dos = new DataOutputStream(recData);\n\n    short[] buffer = new short[bufferSize];  \n    audioRecord.startRecording();\n\n    while (!stopped) {  \n        int bufferReadResult = audioRecord.read(buffer, 0, bufferSize);\n\n        for(int i = 0; i &lt; bufferReadResult;i++) {\n            try {\n                dos.writeShort(buffer[i]);\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        }\n    }  \n    audioRecord.stop();\n    try {\n        dos.flush();\n        dos.close();\n    } catch (IOException e1) {\n        e1.printStackTrace();\n    }\n\n    audioRecord.stop();\n\n    byte[] clipData = recData.toByteArray();\n\n    File file = new File(audioOutputPath);\n    if(file.exists())\n        file.delete();\n    file = new File(audioOutputPath);\n    OutputStream os;\n    try {\n        os = new FileOutputStream(file);\n\n        BufferedOutputStream bos = new BufferedOutputStream(os);\n        DataOutputStream outFile = new DataOutputStream(bos);\n\n        outFile.write(clipData);  \n\n        outFile.flush();\n        outFile.close();\n\n    } catch (FileNotFoundException e) {\n        e.printStackTrace();\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n\n<p>Please suggest what could be going wrong.</p>\n"},{"tags":["java","primefaces","selectonemenu"],"comments":[{"owner":{"account_id":365234,"reputation":17197,"user_id":710051,"accept_rate":85,"display_name":"Makky"},"score":0,"creation_date":1392647198,"post_id":21831099,"comment_id":33042801,"body_markdown":"Why do you want to rollback ?Explain.","body":"Why do you want to rollback ?Explain."},{"owner":{"account_id":2655455,"reputation":1001,"user_id":2296258,"accept_rate":96,"display_name":"Al2x"},"score":0,"creation_date":1392648027,"post_id":21831099,"comment_id":33043368,"body_markdown":"I need to set to OldValue the selectOneMenu and update the oldvalue in the screen @Makky","body":"I need to set to OldValue the selectOneMenu and update the oldvalue in the screen @Makky"},{"owner":{"account_id":365234,"reputation":17197,"user_id":710051,"accept_rate":85,"display_name":"Makky"},"score":0,"creation_date":1392649058,"post_id":21831099,"comment_id":33044038,"body_markdown":"If you keep doing that then whats point of selectOneMneu?","body":"If you keep doing that then whats point of selectOneMneu?"},{"owner":{"account_id":2655455,"reputation":1001,"user_id":2296258,"accept_rate":96,"display_name":"Al2x"},"score":0,"creation_date":1392649472,"post_id":21831099,"comment_id":33044295,"body_markdown":"when Im going to be to change the value to a new one clicking on it, the old value has to be setted and updated on selectOneMenu component screen","body":"when Im going to be to change the value to a new one clicking on it, the old value has to be setted and updated on selectOneMenu component screen"},{"owner":{"account_id":365234,"reputation":17197,"user_id":710051,"accept_rate":85,"display_name":"Makky"},"score":0,"creation_date":1392651155,"post_id":21831099,"comment_id":33045391,"body_markdown":"oh so you want to display the last selected value somewhere when a user select different value ,right ??","body":"oh so you want to display the last selected value somewhere when a user select different value ,right ??"},{"owner":{"account_id":2655455,"reputation":1001,"user_id":2296258,"accept_rate":96,"display_name":"Al2x"},"score":0,"creation_date":1392653535,"post_id":21831099,"comment_id":33046988,"body_markdown":"@BalusC Would you please help me about this  ?thx","body":"@BalusC Would you please help me about this  ?thx"}],"answers":[{"tags":[],"owner":{"account_id":365234,"reputation":17197,"user_id":710051,"accept_rate":85,"display_name":"Makky"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1392651623,"creation_date":1392651623,"answer_id":21833232,"question_id":21831099,"body_markdown":"    public void regraStatusProposta(ValueChangeEvent ev){    \r\n    //get old value first \r\n    Object oldValue=ev.getOldValue();    \r\n    }\r\n\r\n[More on ValueChangeEvent API][1]\r\n\r\n\r\n  [1]: https://javaserverfaces.java.net/nonav/docs/2.2/javadocs/javax/faces/event/ValueChangeEvent.html#getOldValue%28%29","title":"how to set to OldValue the primefaces selectOneMenu programmatically","body":"<pre><code>public void regraStatusProposta(ValueChangeEvent ev){    \n//get old value first \nObject oldValue=ev.getOldValue();    \n}\n</code></pre>\n\n<p><a href=\"https://javaserverfaces.java.net/nonav/docs/2.2/javadocs/javax/faces/event/ValueChangeEvent.html#getOldValue%28%29\" rel=\"nofollow\">More on ValueChangeEvent API</a></p>\n"},{"tags":[],"owner":{"account_id":2655455,"reputation":1001,"user_id":2296258,"accept_rate":96,"display_name":"Al2x"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1392720432,"creation_date":1392720432,"answer_id":21851403,"question_id":21831099,"body_markdown":"http://forum.primefaces.org/viewtopic.php?f=3&amp;t=36447\r\n\r\nresetinput\r\n\r\nblog post: Reset Values for JSF 2.2\r\n\r\nposted by Howard at primefaces forum\r\n\r\nhttp://www.primefaces.org/showcase/ui/resetInput.jsf\r\n\r\n    public void reset() {  \r\n        RequestContext.getCurrentInstance().reset(&quot;form:panel&quot;);  \r\n    }  ","title":"how to set to OldValue the primefaces selectOneMenu programmatically","body":"<p><a href=\"http://forum.primefaces.org/viewtopic.php?f=3&amp;t=36447\" rel=\"nofollow\">http://forum.primefaces.org/viewtopic.php?f=3&amp;t=36447</a></p>\n\n<p>resetinput</p>\n\n<p>blog post: Reset Values for JSF 2.2</p>\n\n<p>posted by Howard at primefaces forum</p>\n\n<p><a href=\"http://www.primefaces.org/showcase/ui/resetInput.jsf\" rel=\"nofollow\">http://www.primefaces.org/showcase/ui/resetInput.jsf</a></p>\n\n<pre><code>public void reset() {  \n    RequestContext.getCurrentInstance().reset(\"form:panel\");  \n}  \n</code></pre>\n"},{"tags":[],"owner":{"account_id":3477700,"reputation":42367,"user_id":2910520,"accept_rate":100,"display_name":"MatPag"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640871298,"creation_date":1640871298,"answer_id":70532378,"question_id":21831099,"body_markdown":"I&#39;ve created this utility for PrimeFaces which checks if the component is visible, otherwise it would log a WARN on console.\r\n\r\n```java\r\npublic static void resetUIComponents(String... componentsId) {\r\n\tfor (String id : componentsId) {\r\n\t\tif (FacesContext.getCurrentInstance().getViewRoot().findComponent(id) != null) {\r\n\t\t\tPrimeFaces.current().resetInputs(id);\r\n\t\t}\r\n\t}\r\n}\r\n```\r\nSo you can use it like this:\r\n```java\r\nViewUtils.resetUIComponents(&quot;form:id1&quot;, &quot;form:id2&quot;)\r\n```","title":"how to set to OldValue the primefaces selectOneMenu programmatically","body":"<p>I've created this utility for PrimeFaces which checks if the component is visible, otherwise it would log a WARN on console.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void resetUIComponents(String... componentsId) {\n    for (String id : componentsId) {\n        if (FacesContext.getCurrentInstance().getViewRoot().findComponent(id) != null) {\n            PrimeFaces.current().resetInputs(id);\n        }\n    }\n}\n</code></pre>\n<p>So you can use it like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>ViewUtils.resetUIComponents(&quot;form:id1&quot;, &quot;form:id2&quot;)\n</code></pre>\n"}],"owner":{"account_id":2655455,"reputation":1001,"user_id":2296258,"accept_rate":96,"display_name":"Al2x"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2768,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":21851403,"answer_count":3,"score":0,"last_activity_date":1640871298,"creation_date":1392645787,"question_id":21831099,"body_markdown":"Java / PrimeFaces 3.5\r\n\r\nI would like to rollback primeFaces selectOneMenu Old Value and reload it updating the component at screen.\r\n\r\n1. The selectOneMenu is loaded with FIRST, SECOND , THIRD values and default value is setted with FIRST\r\n\r\n2. If I change the selectOneMenu value From FIRST to THIRD, I would like to set it to FIRST again.\r\n\r\n        &lt;p:selectOneMenu id=&quot;statusProposta&quot;\r\n    \t   value=&quot;#{propostaBean.propostaComercial.proposta_Status}&quot;\r\n    \t     items=&quot;#{propostaBean.statusProposta}&quot;\r\n    \t     valueChangeListener=&quot;#{propostaBean.regraStatusProposta}&quot; &gt;\r\n    \t     &lt;p:ajax  event=&quot;change&quot;  \r\n    \t\t   process=&quot;statusProposta&quot; update=&quot;statusProposta&quot; /&gt;\r\n    \t     &lt;f:selectItem itemLabel=&quot;&quot; itemValue=&quot;&quot; /&gt;\r\n    \t     &lt;f:selectItems value=&quot;#{propostaBean.statusProposta}&quot; /&gt;\r\n        &lt;/p:selectOneMenu&gt;\r\n\r\n**StatusProposta :** \r\n\r\npublic enum StatusProposta { FIRST,SECOND and THIRD .....\r\n\r\n***Bean  :***\r\n\r\n    public void regraStatusProposta(ValueChangeEvent ev){\r\n       **I dont know how to set the old value and update it in screen.**\r\n       ...\r\n","title":"how to set to OldValue the primefaces selectOneMenu programmatically","body":"<p>Java / PrimeFaces 3.5</p>\n\n<p>I would like to rollback primeFaces selectOneMenu Old Value and reload it updating the component at screen.</p>\n\n<ol>\n<li><p>The selectOneMenu is loaded with FIRST, SECOND , THIRD values and default value is setted with FIRST</p></li>\n<li><p>If I change the selectOneMenu value From FIRST to THIRD, I would like to set it to FIRST again.</p>\n\n<pre><code>&lt;p:selectOneMenu id=\"statusProposta\"\n   value=\"#{propostaBean.propostaComercial.proposta_Status}\"\n     items=\"#{propostaBean.statusProposta}\"\n     valueChangeListener=\"#{propostaBean.regraStatusProposta}\" &gt;\n     &lt;p:ajax  event=\"change\"  \n       process=\"statusProposta\" update=\"statusProposta\" /&gt;\n     &lt;f:selectItem itemLabel=\"\" itemValue=\"\" /&gt;\n     &lt;f:selectItems value=\"#{propostaBean.statusProposta}\" /&gt;\n&lt;/p:selectOneMenu&gt;\n</code></pre></li>\n</ol>\n\n<p><strong>StatusProposta :</strong> </p>\n\n<p>public enum StatusProposta { FIRST,SECOND and THIRD .....</p>\n\n<p><em><strong>Bean  :</em></strong></p>\n\n<pre><code>public void regraStatusProposta(ValueChangeEvent ev){\n   **I dont know how to set the old value and update it in screen.**\n   ...\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-data-jpa","spring-data-couchbase"],"comments":[{"owner":{"account_id":6980681,"reputation":2774,"user_id":5353734,"display_name":"Nima Ajdari"},"score":0,"creation_date":1560412585,"post_id":56574368,"comment_id":99729674,"body_markdown":"Haven&#39;t worked with Spring Data Couchbase, but as for any other Spring Data module, you have to add multiple configurations, one for each database. You have to set different &#39;couchbaseTemplateRef&#39; for each config and provide the bean in your configuration.","body":"Haven&#39;t worked with Spring Data Couchbase, but as for any other Spring Data module, you have to add multiple configurations, one for each database. You have to set different &#39;couchbaseTemplateRef&#39; for each config and provide the bean in your configuration."},{"owner":{"account_id":3550329,"reputation":115,"user_id":2965365,"display_name":"Anshul Mohil"},"score":0,"creation_date":1560415612,"post_id":56574368,"comment_id":99731311,"body_markdown":"@NimaAJ Yeah, I have override CouchbaseTemplate to provide new cluster and bucket information and marked it under new Bean. Than I override configureRepositoryOperationsMapping as mentioned in https://docs.spring.io/spring-data/couchbase/docs/current/reference/html/#couchbase.repository.multibucket\n\nAnd I am able to get two couchbase instances registered but I am not able to attach this new instance configuration with repositories.","body":"@NimaAJ Yeah, I have override CouchbaseTemplate to provide new cluster and bucket information and marked it under new Bean. Than I override configureRepositoryOperationsMapping as mentioned in <a href=\"https://docs.spring.io/spring-data/couchbase/docs/current/reference/html/#couchbase.repository.multibucket\" rel=\"nofollow noreferrer\">docs.spring.io/spring-data/couchbase/docs/current/reference/&zwnj;&#8203;&hellip;</a>  And I am able to get two couchbase instances registered but I am not able to attach this new instance configuration with repositories."},{"owner":{"account_id":10298913,"reputation":2491,"user_id":7598188,"accept_rate":43,"display_name":"Manish Bansal"},"score":0,"creation_date":1560478659,"post_id":56574368,"comment_id":99758612,"body_markdown":"Isn&#39;t it against single responsibility methodology to have 2 couchbase buckets in one service? Shouldn&#39;t you call another microservice for getting data from another bucket? Can you reconsider your design?","body":"Isn&#39;t it against single responsibility methodology to have 2 couchbase buckets in one service? Shouldn&#39;t you call another microservice for getting data from another bucket? Can you reconsider your design?"},{"owner":{"account_id":3550329,"reputation":115,"user_id":2965365,"display_name":"Anshul Mohil"},"score":0,"creation_date":1565782871,"post_id":56574368,"comment_id":101457642,"body_markdown":"@ManishBansal In our use case we are not using multiple buckets as different databases but as different type of resource which therefore can be performance tuned independently. Since couchbase provide clustering replication, resource usage and much more on buckets, buckets would be very helpful to segregate data  in this context.","body":"@ManishBansal In our use case we are not using multiple buckets as different databases but as different type of resource which therefore can be performance tuned independently. Since couchbase provide clustering replication, resource usage and much more on buckets, buckets would be very helpful to segregate data  in this context."},{"owner":{"account_id":8146898,"reputation":453,"user_id":6135309,"display_name":"Ravikumar"},"score":0,"creation_date":1623252681,"post_id":56574368,"comment_id":120027784,"body_markdown":"did you find solution ? if so how ?","body":"did you find solution ? if so how ?"}],"answers":[{"tags":[],"owner":{"account_id":3246108,"reputation":11,"user_id":2737639,"display_name":"sonilovesh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1607018498,"creation_date":1607018498,"answer_id":65131557,"question_id":56574368,"body_markdown":"@anshul you are almost there.\r\nMake one of the Data Source as @primary which will be used as by default bucket.\r\n\r\n\r\nWherever you want to use the other bucket .Just use specific bean in your service class with the qualifier below is the example:\r\n\r\n    @Qualifier(value = &quot;BUCKET1_TEMPLATE&quot;)\r\n    @Autowired\r\n    CouchbaseTemplate couchbaseTemplate;\r\n\r\nNow you can use this template to perform all couch related operations on the desired bucket.","title":"How to configure multiple couchbase data source using springboot-data-couchbase?","body":"<p>@anshul you are almost there.\nMake one of the Data Source as @primary which will be used as by default bucket.</p>\n<p>Wherever you want to use the other bucket .Just use specific bean in your service class with the qualifier below is the example:</p>\n<pre><code>@Qualifier(value = &quot;BUCKET1_TEMPLATE&quot;)\n@Autowired\nCouchbaseTemplate couchbaseTemplate;\n</code></pre>\n<p>Now you can use this template to perform all couch related operations on the desired bucket.</p>\n"}],"owner":{"account_id":3550329,"reputation":115,"user_id":2965365,"display_name":"Anshul Mohil"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1031,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1640871129,"creation_date":1560406582,"question_id":56574368,"body_markdown":"I am trying configuring multiple couchbase data source using springboot-data-couchbase.\r\n\r\nThis is a way I tried to attach two couchbase sources with 2 repositories.\r\n   \r\n\r\n\r\n    @Configuration\r\n    @EnableCouchbaseRepositories(&quot;com.xyz.abc&quot;)\r\n    public class AbcDatasource extends AbstractCouchbaseConfiguration {\r\n     @Override\r\n        protected List&lt;String&gt; getBootstrapHosts() {\r\n            return Collections.singletonList(&quot;ip_address_of_couchbase&quot;);\r\n        }\r\n       //bucket_name\r\n        @Override\r\n        protected String getBucketName() {\r\n            return &quot;bucket_name&quot;;\r\n        }\r\n       //password\r\n        @Override\r\n        protected String getBucketPassword() {\r\n            return &quot;user_password&quot;;\r\n        }\r\n    @Override\r\n    @Bean(destroyMethod = &quot;disconnect&quot;, name = &quot;COUCHBASE_CLUSTER_2&quot;)\r\n    public Cluster couchbaseCluster() throws Exception {\r\n        return CouchbaseCluster.create(couchbaseEnvironment(), &quot;ip_address_of_couchbase&quot;);\r\n    }\r\n\r\n    @Bean( name = &quot;BUCKET2&quot;)\r\n    public Bucket bucket2() throws Exception {\r\n        return this.couchbaseCluster().openBucket(&quot;bucket2&quot;, &quot;somepassword&quot;);\r\n\r\n    }\r\n    \r\n    @Bean( name = &quot;BUCKET2_TEMPLATE&quot;)\r\n    public CouchbaseTemplate newTemplateForBucket2() throws Exception {\r\n        CouchbaseTemplate template = new CouchbaseTemplate(\r\n                couchbaseClusterInfo(), //reuse the default bean\r\n                bucket2(), //the bucket is non-default\r\n                mappingCouchbaseConverter(), translationService() \r\n        );\r\n        template.setDefaultConsistency(getDefaultConsistency());\r\n        return template;\r\n    }\r\n\r\n    @Override\r\n    public void configureRepositoryOperationsMapping(RepositoryOperationsMapping baseMapping) {\r\n            baseMapping \r\n                    .mapEntity(SomeDAOUsedInSomeRepository.class, newTemplateForBucket2());\r\n        }\r\n    }\r\n    similarly: \r\n    @Configuration\r\n    @EnableCouchbaseRepositories(&quot;com.xyz.mln&quot;)\r\n    public class MlnDatasource extends AbstractCouchbaseConfiguration {...}\r\n\r\nNow the problem is there is no straight forward way to specify namespace based datasource by attaching different beans to these configurations like in springdata-jpa as springdata-jpa support this feature do using entity-manager-factory-ref and transaction-manager-ref. \r\n    \r\n    Due to which only one configuration is being picked whoever comes first.\r\n    \r\n    Any suggestion is greatly appreciated.\r\n\r\nRelated question: https://stackoverflow.com/questions/36317444/use-spring-data-couchbase-to-connect-to-different-couchbase-clusters?rq=1","title":"How to configure multiple couchbase data source using springboot-data-couchbase?","body":"<p>I am trying configuring multiple couchbase data source using springboot-data-couchbase.</p>\n\n<p>This is a way I tried to attach two couchbase sources with 2 repositories.</p>\n\n<pre><code>@Configuration\n@EnableCouchbaseRepositories(\"com.xyz.abc\")\npublic class AbcDatasource extends AbstractCouchbaseConfiguration {\n @Override\n    protected List&lt;String&gt; getBootstrapHosts() {\n        return Collections.singletonList(\"ip_address_of_couchbase\");\n    }\n   //bucket_name\n    @Override\n    protected String getBucketName() {\n        return \"bucket_name\";\n    }\n   //password\n    @Override\n    protected String getBucketPassword() {\n        return \"user_password\";\n    }\n@Override\n@Bean(destroyMethod = \"disconnect\", name = \"COUCHBASE_CLUSTER_2\")\npublic Cluster couchbaseCluster() throws Exception {\n    return CouchbaseCluster.create(couchbaseEnvironment(), \"ip_address_of_couchbase\");\n}\n\n@Bean( name = \"BUCKET2\")\npublic Bucket bucket2() throws Exception {\n    return this.couchbaseCluster().openBucket(\"bucket2\", \"somepassword\");\n\n}\n\n@Bean( name = \"BUCKET2_TEMPLATE\")\npublic CouchbaseTemplate newTemplateForBucket2() throws Exception {\n    CouchbaseTemplate template = new CouchbaseTemplate(\n            couchbaseClusterInfo(), //reuse the default bean\n            bucket2(), //the bucket is non-default\n            mappingCouchbaseConverter(), translationService() \n    );\n    template.setDefaultConsistency(getDefaultConsistency());\n    return template;\n}\n\n@Override\npublic void configureRepositoryOperationsMapping(RepositoryOperationsMapping baseMapping) {\n        baseMapping \n                .mapEntity(SomeDAOUsedInSomeRepository.class, newTemplateForBucket2());\n    }\n}\nsimilarly: \n@Configuration\n@EnableCouchbaseRepositories(\"com.xyz.mln\")\npublic class MlnDatasource extends AbstractCouchbaseConfiguration {...}\n</code></pre>\n\n<p>Now the problem is there is no straight forward way to specify namespace based datasource by attaching different beans to these configurations like in springdata-jpa as springdata-jpa support this feature do using entity-manager-factory-ref and transaction-manager-ref. </p>\n\n<pre><code>Due to which only one configuration is being picked whoever comes first.\n\nAny suggestion is greatly appreciated.\n</code></pre>\n\n<p>Related question: <a href=\"https://stackoverflow.com/questions/36317444/use-spring-data-couchbase-to-connect-to-different-couchbase-clusters?rq=1\">Use Spring Data Couchbase to connect to different Couchbase clusters</a></p>\n"},{"tags":["java","logging","logback","appender"],"owner":{"account_id":14117739,"reputation":101,"user_id":10199101,"display_name":"Di_"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1640870795,"creation_date":1640870795,"question_id":70532296,"body_markdown":"I&#39;m trying to implement logback with the java api, i have an xml configuration that i use by default to log daily and on application startup and then i have the application where i activate/deactivate logging by package name, so i have to start logging when i click the button activate. This is my java method to start logging\r\n\r\n\tpublic boolean startLog(final LogDTO logDTO) {\r\n\t\tLoggerContext ctx = (LoggerContext) LoggerFactory.getILoggerFactory();\r\n\r\n\t\tDate logDate = new Date();\r\n\t\tSimpleDateFormat formatter = new SimpleDateFormat(&quot;dd-MM-yyyy&#39;_&#39;HH-mm-ss&quot;);\r\n\t\tString fileName = logDTO.getName() + &quot;_&quot; + formatter.format(logDate) + &quot;.log&quot;;\r\n\t\tString filePath = loggingPath + &quot;/console/&quot; + logDTO.getUserId() + &quot;/&quot; + fileName;\r\n\t\tString appenderName = userTools.getCurrentUser().getCurrentUtilisateurId().toString() + &quot;_&quot; + formatter.format(logDate);\r\n\r\n\t\tRollingFileAppender&lt;ILoggingEvent&gt; appender = new RollingFileAppender();\r\n\t\tPatternLayoutEncoder encoder = new PatternLayoutEncoder();\r\n\t\tencoder.setPattern(&quot;%d{yyyy/MM/dd HH:mm:ss.SSS} | %-50.50logger{49} | %-200m |  %-5thread |%C.%M\\\\(%F:%L\\\\) %n&quot;);\r\n\t\tencoder.setContext(ctx);\r\n\t\tappender.setEncoder(encoder);\r\n\t\tencoder.start();\r\n\t\tappender.setFile(filePath);\r\n\r\n\t\tSizeBasedTriggeringPolicy&lt;ILoggingEvent&gt; triggeringPolicy = new SizeBasedTriggeringPolicy&lt;&gt;();\r\n\t\ttriggeringPolicy.setMaxFileSize(FileSize.valueOf(&quot;10MB&quot;));\r\n\t\ttriggeringPolicy.start();\r\n\t\tappender.setTriggeringPolicy(triggeringPolicy);\r\n\r\n\t\tFixedWindowRollingPolicy rollingPolicy = new FixedWindowRollingPolicy();\r\n\t\trollingPolicy.setContext(ctx);\r\n\t\trollingPolicy.setMinIndex(1);\r\n\t\trollingPolicy.setMaxIndex(10);\r\n\t\tString rollingName = &quot;/log/backup/MyApp-troubleshooting_%i.log.zip&quot;;\r\n\t\trollingPolicy.setFileNamePattern(rollingName);\r\n\t\tappender.setRollingPolicy(rollingPolicy);\r\n\t\trollingPolicy.setParent(appender);\r\n\t\trollingPolicy.start();\r\n\t\tappender.setName(appenderName);\r\n\t\tappender.setContext(ctx);\r\n\t\tappender.start();\r\n\r\n\t\tPatternLayoutEncoder logEncoder = new PatternLayoutEncoder();\r\n\t\tlogEncoder.setContext(ctx);\r\n\t\tlogEncoder.setPattern(&quot;%-12date{YYYY-MM-dd HH:mm:ss.SSS} %-5level - %msg%n&quot;);\r\n\t\tlogEncoder.start();\r\n\r\n\t\tLogger logger = ctx.getLogger(logDTO.getName());\r\n\t\tlogger.setAdditive(false);\r\n\t\tlogger.setLevel(logDTO.getLevel());\r\n\t\tlogger.addAppender(appender);\r\n}\r\n\r\nThe problem is yes it creates the file but it&#39;s not writing anything on the file while i&#39;m navigating through the application, i dont know what i&#39;m missing","title":"logback not writing on file","body":"<p>I'm trying to implement logback with the java api, i have an xml configuration that i use by default to log daily and on application startup and then i have the application where i activate/deactivate logging by package name, so i have to start logging when i click the button activate. This is my java method to start logging</p>\n<pre><code>public boolean startLog(final LogDTO logDTO) {\n    LoggerContext ctx = (LoggerContext) LoggerFactory.getILoggerFactory();\n\n    Date logDate = new Date();\n    SimpleDateFormat formatter = new SimpleDateFormat(&quot;dd-MM-yyyy'_'HH-mm-ss&quot;);\n    String fileName = logDTO.getName() + &quot;_&quot; + formatter.format(logDate) + &quot;.log&quot;;\n    String filePath = loggingPath + &quot;/console/&quot; + logDTO.getUserId() + &quot;/&quot; + fileName;\n    String appenderName = userTools.getCurrentUser().getCurrentUtilisateurId().toString() + &quot;_&quot; + formatter.format(logDate);\n\n    RollingFileAppender&lt;ILoggingEvent&gt; appender = new RollingFileAppender();\n    PatternLayoutEncoder encoder = new PatternLayoutEncoder();\n    encoder.setPattern(&quot;%d{yyyy/MM/dd HH:mm:ss.SSS} | %-50.50logger{49} | %-200m |  %-5thread |%C.%M\\\\(%F:%L\\\\) %n&quot;);\n    encoder.setContext(ctx);\n    appender.setEncoder(encoder);\n    encoder.start();\n    appender.setFile(filePath);\n\n    SizeBasedTriggeringPolicy&lt;ILoggingEvent&gt; triggeringPolicy = new SizeBasedTriggeringPolicy&lt;&gt;();\n    triggeringPolicy.setMaxFileSize(FileSize.valueOf(&quot;10MB&quot;));\n    triggeringPolicy.start();\n    appender.setTriggeringPolicy(triggeringPolicy);\n\n    FixedWindowRollingPolicy rollingPolicy = new FixedWindowRollingPolicy();\n    rollingPolicy.setContext(ctx);\n    rollingPolicy.setMinIndex(1);\n    rollingPolicy.setMaxIndex(10);\n    String rollingName = &quot;/log/backup/MyApp-troubleshooting_%i.log.zip&quot;;\n    rollingPolicy.setFileNamePattern(rollingName);\n    appender.setRollingPolicy(rollingPolicy);\n    rollingPolicy.setParent(appender);\n    rollingPolicy.start();\n    appender.setName(appenderName);\n    appender.setContext(ctx);\n    appender.start();\n\n    PatternLayoutEncoder logEncoder = new PatternLayoutEncoder();\n    logEncoder.setContext(ctx);\n    logEncoder.setPattern(&quot;%-12date{YYYY-MM-dd HH:mm:ss.SSS} %-5level - %msg%n&quot;);\n    logEncoder.start();\n\n    Logger logger = ctx.getLogger(logDTO.getName());\n    logger.setAdditive(false);\n    logger.setLevel(logDTO.getLevel());\n    logger.addAppender(appender);\n</code></pre>\n<p>}</p>\n<p>The problem is yes it creates the file but it's not writing anything on the file while i'm navigating through the application, i dont know what i'm missing</p>\n"},{"tags":["java","websocket","spring-webflux"],"comments":[{"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1640907905,"post_id":70532032,"comment_id":124689994,"body_markdown":"you should not be mixing webflux and spring web. If you do that, the spring server will boot up a a spring web application, and you will not get the benefits from a reactive application.","body":"you should not be mixing webflux and spring web. If you do that, the spring server will boot up a a spring web application, and you will not get the benefits from a reactive application."}],"answers":[{"tags":[],"owner":{"account_id":2242741,"reputation":6993,"user_id":1976843,"display_name":"JEY"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640870331,"creation_date":1640869697,"answer_id":70532121,"question_id":70532032,"body_markdown":"You are using the reactive stack for your websocket and [WebSocketSession#send][1] return a `Mono&lt;Void&gt;` but you don&#39;t subscribe to this Mono (you just assembled it) so nothing will happen until something subscribe to it.\r\n\r\nIn your endpoint it doesn&#39;t look like you are using webflux so you are in synchronous world so you don&#39;t have other choice than to `block`\r\n\r\n    opponentSession.send(Mono.just(webSocketMessage)).block();\r\n\r\nIf you are using webflux then you should change your method to return a Mono&lt;GameBean&gt; and do something like:\r\n\r\n```java\r\nreturn opponentSession.send(Mono.just(webSocketMessage)).then(gameService.getGameStateByAccount(account));\r\n```\r\nIf you are not familiar with this you should look into [projectreactor][2] and [WebFlux][3]\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/reactive/socket/WebSocketSession.html#send-org.reactivestreams.Publisher-\r\n  [2]: https://projectreactor.io/docs/core/release/reference/\r\n  [3]: https://docs.spring.io/spring-framework/docs/current/reference/html/web-reactive.html#webflux","title":"WebSocketSession.send does not do anything","body":"<p>You are using the reactive stack for your websocket and <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/reactive/socket/WebSocketSession.html#send-org.reactivestreams.Publisher-\" rel=\"nofollow noreferrer\">WebSocketSession#send</a> return a <code>Mono&lt;Void&gt;</code> but you don't subscribe to this Mono (you just assembled it) so nothing will happen until something subscribe to it.</p>\n<p>In your endpoint it doesn't look like you are using webflux so you are in synchronous world so you don't have other choice than to <code>block</code></p>\n<pre><code>opponentSession.send(Mono.just(webSocketMessage)).block();\n</code></pre>\n<p>If you are using webflux then you should change your method to return a Mono and do something like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>return opponentSession.send(Mono.just(webSocketMessage)).then(gameService.getGameStateByAccount(account));\n</code></pre>\n<p>If you are not familiar with this you should look into <a href=\"https://projectreactor.io/docs/core/release/reference/\" rel=\"nofollow noreferrer\">projectreactor</a> and <a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/web-reactive.html#webflux\" rel=\"nofollow noreferrer\">WebFlux</a></p>\n"}],"owner":{"account_id":23783688,"reputation":14,"user_id":17796051,"display_name":"Christophe b"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":443,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1640870331,"creation_date":1640869179,"question_id":70532032,"body_markdown":"I&#39;m coding a game, when a player end its turn, I want to notify the opponent that it&#39;s his turn to play. \r\n\r\nSo I&#39;m storing WebSocketSessions in &quot;Player&quot; classes, so I just need to get an instance of a player to have access to his websocketsession.\r\n\r\nThe problem is that nothing is happening when I use the &quot;send&quot; method of a websocketsession stored in a &quot;player&quot; instance. \r\n\r\nHere is my code to store a WebSocketSession in a player object, it actually receive properly messages from front end, and it is able to send a message back and it works:\r\n\r\n    @Component(&quot;ReactiveWebSocketHandler&quot;)\r\n    public class ReactiveWebSocketHandler implements WebSocketHandler {\r\n        \r\n        @Autowired\r\n        private AuthenticationService authenticationService;\r\n        \r\n        @Override\r\n        public Mono&lt;Void&gt; handle(WebSocketSession webSocketSession) {\r\n    \r\n            Flux&lt;WebSocketMessage&gt; output = webSocketSession.receive()\r\n                    .map(msg -&gt; {\r\n                        String payloadAsText = msg.getPayloadAsText();\r\n                        Account account = authenticationService.getAccountByToken(payloadAsText);\r\n                        Games.getInstance().getGames().get(account.getIdCurrentGame()).getPlayerById(account.getId()).setSession(webSocketSession);\r\n                        return &quot;WebSocketSession id: &quot; + webSocketSession.getId();\r\n                    })\r\n                    .map(webSocketSession::textMessage);\r\n    \r\n            return webSocketSession\r\n                    .send(output);\r\n        }\r\n    }\r\n\r\nAnd here is the code I use to notify the opponent player that it is its turn to play, the &quot;opponentSession.send&quot; method seems to produce no result, there is no error message, and it looks like I receive nothing on the front end. The sessions has the same ID than in the handle method so I think the session object is good, also the websocket session was opened and ready when I did my tests:\r\n\r\n    @RequestMapping(value = &quot;/game/endTurn&quot;, method = RequestMethod.POST)\r\n    GameBean endTurn(\r\n            @RequestHeader(value = &quot;token&quot;, required = true) String token) {\r\n        ObjectMapper mapper = new ObjectMapper();\r\n    \r\n        Account account = authenticationService.getAccountByToken(token);\r\n        gameService.endTurn(account);\r\n    \r\n        Game game = gameService.getGameByAccount(account);\r\n        //GameBean opponentGameBean = game.getOpponentGameState(account.getId());\r\n        //WebSocketMessage webSocketMessage = opponentSession.textMessage(mapper.writeValueAsString(opponentGameBean));\r\n        WebSocketSession opponentSession = game.getPlayerById(game.getOpponentId(account.getId())).getSession();\r\n        WebSocketMessage webSocketMessage = opponentSession.textMessage(&quot;test message&quot;);\r\n\r\n        opponentSession.send(Mono.just(webSocketMessage));\r\n\r\n        return gameService.getGameStateByAccount(account);\r\n    }\r\n    }\r\n\r\nYou can see on the screenshot that the handle method is working correctly, I&#39;m able to send and receive message.\r\n[Websocket input and output][1]\r\n\r\nDoes someone know how can I make the opponentSession.send method works correctly so that I can receive messages on the front end?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/1fkAb.png","title":"WebSocketSession.send does not do anything","body":"<p>I'm coding a game, when a player end its turn, I want to notify the opponent that it's his turn to play.</p>\n<p>So I'm storing WebSocketSessions in &quot;Player&quot; classes, so I just need to get an instance of a player to have access to his websocketsession.</p>\n<p>The problem is that nothing is happening when I use the &quot;send&quot; method of a websocketsession stored in a &quot;player&quot; instance.</p>\n<p>Here is my code to store a WebSocketSession in a player object, it actually receive properly messages from front end, and it is able to send a message back and it works:</p>\n<pre><code>@Component(&quot;ReactiveWebSocketHandler&quot;)\npublic class ReactiveWebSocketHandler implements WebSocketHandler {\n    \n    @Autowired\n    private AuthenticationService authenticationService;\n    \n    @Override\n    public Mono&lt;Void&gt; handle(WebSocketSession webSocketSession) {\n\n        Flux&lt;WebSocketMessage&gt; output = webSocketSession.receive()\n                .map(msg -&gt; {\n                    String payloadAsText = msg.getPayloadAsText();\n                    Account account = authenticationService.getAccountByToken(payloadAsText);\n                    Games.getInstance().getGames().get(account.getIdCurrentGame()).getPlayerById(account.getId()).setSession(webSocketSession);\n                    return &quot;WebSocketSession id: &quot; + webSocketSession.getId();\n                })\n                .map(webSocketSession::textMessage);\n\n        return webSocketSession\n                .send(output);\n    }\n}\n</code></pre>\n<p>And here is the code I use to notify the opponent player that it is its turn to play, the &quot;opponentSession.send&quot; method seems to produce no result, there is no error message, and it looks like I receive nothing on the front end. The sessions has the same ID than in the handle method so I think the session object is good, also the websocket session was opened and ready when I did my tests:</p>\n<pre><code>@RequestMapping(value = &quot;/game/endTurn&quot;, method = RequestMethod.POST)\nGameBean endTurn(\n        @RequestHeader(value = &quot;token&quot;, required = true) String token) {\n    ObjectMapper mapper = new ObjectMapper();\n\n    Account account = authenticationService.getAccountByToken(token);\n    gameService.endTurn(account);\n\n    Game game = gameService.getGameByAccount(account);\n    //GameBean opponentGameBean = game.getOpponentGameState(account.getId());\n    //WebSocketMessage webSocketMessage = opponentSession.textMessage(mapper.writeValueAsString(opponentGameBean));\n    WebSocketSession opponentSession = game.getPlayerById(game.getOpponentId(account.getId())).getSession();\n    WebSocketMessage webSocketMessage = opponentSession.textMessage(&quot;test message&quot;);\n\n    opponentSession.send(Mono.just(webSocketMessage));\n\n    return gameService.getGameStateByAccount(account);\n}\n}\n</code></pre>\n<p>You can see on the screenshot that the handle method is working correctly, I'm able to send and receive message.\n<a href=\"https://i.stack.imgur.com/1fkAb.png\" rel=\"nofollow noreferrer\">Websocket input and output</a></p>\n<p>Does someone know how can I make the opponentSession.send method works correctly so that I can receive messages on the front end?</p>\n"},{"tags":["java","android-studio","pepper"],"comments":[{"owner":{"account_id":4744969,"reputation":2149,"user_id":3836562,"display_name":"Victor Pal&#233;ologue"},"score":0,"creation_date":1616056365,"post_id":66440899,"comment_id":117884755,"body_markdown":"What is it exactly that does not work? Please explain precise steps of reproduction, and report the output directly.","body":"What is it exactly that does not work? Please explain precise steps of reproduction, and report the output directly."}],"answers":[{"tags":[],"owner":{"account_id":11502684,"reputation":1,"user_id":8429987,"display_name":"Compsineer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1617881692,"creation_date":1617881692,"answer_id":67003162,"question_id":66440899,"body_markdown":"After installing the JDK, the next step is to add it to the system variables and you will be fine. \r\n[Edit Environment Path in Windows 10][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/yngRy.jpg","title":"Android Studio Project structure issue","body":"<p>After installing the JDK, the next step is to add it to the system variables and you will be fine.\n<a href=\"https://i.stack.imgur.com/yngRy.jpg\" rel=\"nofollow noreferrer\">Edit Environment Path in Windows 10</a></p>\n"}],"owner":{"account_id":13177852,"reputation":3,"user_id":13348365,"display_name":"JoyfulReindeer"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1156,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1640870217,"creation_date":1614693761,"question_id":66440899,"body_markdown":"I am currently doing my master thesis, and i have to code Pepper the humanoid by SoftBank. I decided i wanted to use Android studio, but i am pretty new to this. The issue im having a hard time with is Resolved JDK_1_8, i tried to uninstall and install JDK 15 so many times, and reinstalling android studio too. enter image description here. \r\n\r\nI think it might have to do something with JDK Location which is \r\n\r\n    /Applications/Android Studio.app/Contents/jre/jdk/Contents/Home\r\n\r\n","title":"Android Studio Project structure issue","body":"<p>I am currently doing my master thesis, and i have to code Pepper the humanoid by SoftBank. I decided i wanted to use Android studio, but i am pretty new to this. The issue im having a hard time with is Resolved JDK_1_8, i tried to uninstall and install JDK 15 so many times, and reinstalling android studio too. enter image description here.</p>\n<p>I think it might have to do something with JDK Location which is</p>\n<pre><code>/Applications/Android Studio.app/Contents/jre/jdk/Contents/Home\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-data-jpa","spring-annotations"],"answers":[{"tags":[],"owner":{"account_id":10463559,"reputation":2118,"user_id":7713562,"display_name":"zawarudo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640269680,"creation_date":1640269265,"answer_id":70463380,"question_id":70462319,"body_markdown":"I believe that you can simply add in your application properties\r\n\r\n    spring.sql.init.continue-on-error=true\r\n\r\nAccording to the Spring Boot 2.5.5 user guide:\r\n\r\nhttps://docs.spring.io/spring-boot/docs/2.5.5/reference/htmlsingle/#howto-initialize-a-database-using-spring-jdbc\r\n\r\nSpring Boot enables the fail-fast feature of its script-based database initializer. If the scripts cause exceptions, the application fails to start. You can tune that behavior by setting spring.sql.init.continue-on-error.\r\n\r\nDepending on your spring boot version the property will be named either\r\n\r\n    spring.sql.init.continue-on-error\r\n\r\nor before Spring Boot 2.5 \r\n\r\n    spring.datasource.continue-on-error","title":"How to create datasource bean at runtime without crashing app in Spring?","body":"<p>I believe that you can simply add in your application properties</p>\n<pre><code>spring.sql.init.continue-on-error=true\n</code></pre>\n<p>According to the Spring Boot 2.5.5 user guide:</p>\n<p><a href=\"https://docs.spring.io/spring-boot/docs/2.5.5/reference/htmlsingle/#howto-initialize-a-database-using-spring-jdbc\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-boot/docs/2.5.5/reference/htmlsingle/#howto-initialize-a-database-using-spring-jdbc</a></p>\n<p>Spring Boot enables the fail-fast feature of its script-based database initializer. If the scripts cause exceptions, the application fails to start. You can tune that behavior by setting spring.sql.init.continue-on-error.</p>\n<p>Depending on your spring boot version the property will be named either</p>\n<pre><code>spring.sql.init.continue-on-error\n</code></pre>\n<p>or before Spring Boot 2.5</p>\n<pre><code>spring.datasource.continue-on-error\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1314578,"reputation":1907,"user_id":1261764,"accept_rate":94,"display_name":"abidinberkay"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1640870014,"creation_date":1640870014,"answer_id":70532168,"question_id":70462319,"body_markdown":"It is so dumb but I solved the problem by adding following to application.properties.\r\n\r\n    spring.jpa.database=sql_server\r\n\r\nI have no idea why I need to specify that explicitly in properties file but the problem is solved. I will search for it","title":"How to create datasource bean at runtime without crashing app in Spring?","body":"<p>It is so dumb but I solved the problem by adding following to application.properties.</p>\n<pre><code>spring.jpa.database=sql_server\n</code></pre>\n<p>I have no idea why I need to specify that explicitly in properties file but the problem is solved. I will search for it</p>\n"}],"owner":{"account_id":1314578,"reputation":1907,"user_id":1261764,"accept_rate":94,"display_name":"abidinberkay"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":524,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70532168,"answer_count":2,"score":0,"last_activity_date":1640870014,"creation_date":1640263526,"question_id":70462319,"body_markdown":"\r\nI am connecting to multiple datasources but sometimes some datasources may be offline and at that time I am geting errors on app and application is failing at startup. \r\n\r\n**I want to skip datasource configuration at startup**... I have tried several ways by adding \r\n\r\n    spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration \r\n\r\n\r\nto the application.properties and also I have tried adding \r\n\r\n    @SpringBootApplication(exclude={DataSourceAutoConfiguration.class})\r\n\r\nto the main class but still it tries to configure the datasource.\r\n\r\nI also tried to use @Lazy annotation on all methods and on constructor as below but still getting error while creating fooEntityManagerFactory\r\n\r\n    @Lazy\r\n    @Configuration\r\n    @EnableJpaRepositories(basePackages = &quot;com.heyo.tayo.repository.foo&quot;, entityManagerFactoryRef = &quot;fooEntityManagerFactory&quot;, transactionManagerRef = &quot;fooTransactionManager&quot;)\r\n    public class PersistencefooConfiguration {\r\n    \r\n        @Autowired\r\n        private DbContextHolder dbContextHolder;\r\n    \r\n        @Lazy\r\n        @Bean\r\n        @ConfigurationProperties(&quot;tay.datasource.foo&quot;)\r\n        public DataSourceProperties fooDataSourceProperties() {\r\n            return new DataSourceProperties();\r\n        }\r\n    \r\n        @Lazy\r\n        @Bean\r\n        @ConfigurationProperties(&quot;tay.datasource.foo.configuration&quot;)\r\n        public DataSource fooDataSource() {\r\n            DataSource dataSource = fooDataSourceProperties().initializeDataSourceBuilder()\r\n                        .type(BasicDataSource.class).build();\r\n            dbContextHolder.addNewAvailableDbType(DbTypeEnum.foo);\r\n    \r\n            return dataSource;\r\n        }\r\n    \r\n        @Lazy\r\n        @Bean(name = &quot;fooEntityManagerFactory&quot;)\r\n        public LocalContainerEntityManagerFactoryBean fooEntityManagerFactory(\r\n                EntityManagerFactoryBuilder builder) {\r\n\r\n    //THE CODE IS FAILING AT BELOW RETURN CASE\r\n\r\n            return builder\r\n                    .dataSource(fooDataSource())\r\n                    .packages(&quot;com.heyo.tayo.model.foo&quot;)\r\n                    .build();\r\n        }\r\n    \r\n        @Lazy\r\n        @Bean\r\n        public PlatformTransactionManager fooTransactionManager(\r\n                final @Qualifier(&quot;fooEntityManagerFactory&quot;) LocalContainerEntityManagerFactoryBean fooEntityManagerFactory) {\r\n            return new JpaTransactionManager(fooEntityManagerFactory.getObject());\r\n        }\r\n    \r\n    }\r\n\r\nI have multiple classes like above for different configs for different datasources and I am adding them to available dbs static list at datasource Bean. \r\n\r\nHere is my dbadapter factory class.\r\n\r\nHere is my dbAdaptor factory that creates corresponding db adaptor\r\n\r\n    @Service\r\n    public class DbAdapterFactory {\r\n    \r\n        @Autowired\r\n        private BeanFactory beanFactory;\r\n    \r\n        @Autowired\r\n        private DbContextHolder dbContextHolder;\r\n    \r\n        public DBAdapter dbAdapter(){\r\n    \r\n            DbTypeEnum currentDb = dbContextHolder.getCurrentDb();\r\n            DBAdapter dbAdapter = null;\r\n    \r\n            if(currentDb == DbTypeEnum.FOODB) {\r\n                dbAdapter = beanFactory.getBean(foodbadaptor.class);\r\n            } else {\r\n                dbAdapter = beanFactory.getBean(koodbadaptor.class);\r\n            }\r\n    \r\n            return dbAdapter;\r\n        }\r\n\r\nHere is db context holder that makes operation like setting default db or getting current db etc.:\r\n\r\n    @Component\r\n    public class DbContextHolder {\r\n    \r\n        private DbTypeEnum dbType = DbTypeEnum.FOODB;\r\n        private Set&lt;DbTypeEnum&gt; availableDbTypes = new HashSet&lt;&gt;();\r\n    \r\n        public void setCurrentDb(DbTypeEnum dbType) {\r\n            this.dbType = dbType;\r\n        }\r\n    \r\n        public DbTypeEnum getCurrentDb() {\r\n            return this.dbType;\r\n        }\r\n    \r\n        public List&lt;DbTypeEnum&gt; getAvailableDbTypes() {\r\n            return new ArrayList&lt;&gt;(availableDbTypes);\r\n        }\r\n    \r\n        public void addNewAvailableDbType(DbTypeEnum dbTypeEnum) {\r\n            availableDbTypes.add(dbTypeEnum);\r\n        }\r\n    }\r\n\r\nI made all @Lazy or tried `@SpringBootApplication(exclude={DataSourceAutoConfiguration.class})` but still something is calling to create bean and getting error and app is closing. I want to use that config and datasource in a try-catch block and don&#39;t stop application at runtime. How can I achieve this or what am I missing on that configs or annotations ? ","title":"How to create datasource bean at runtime without crashing app in Spring?","body":"<p>I am connecting to multiple datasources but sometimes some datasources may be offline and at that time I am geting errors on app and application is failing at startup.</p>\n<p><strong>I want to skip datasource configuration at startup</strong>... I have tried several ways by adding</p>\n<pre><code>spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration \n</code></pre>\n<p>to the application.properties and also I have tried adding</p>\n<pre><code>@SpringBootApplication(exclude={DataSourceAutoConfiguration.class})\n</code></pre>\n<p>to the main class but still it tries to configure the datasource.</p>\n<p>I also tried to use @Lazy annotation on all methods and on constructor as below but still getting error while creating fooEntityManagerFactory</p>\n<pre><code>@Lazy\n@Configuration\n@EnableJpaRepositories(basePackages = &quot;com.heyo.tayo.repository.foo&quot;, entityManagerFactoryRef = &quot;fooEntityManagerFactory&quot;, transactionManagerRef = &quot;fooTransactionManager&quot;)\npublic class PersistencefooConfiguration {\n\n    @Autowired\n    private DbContextHolder dbContextHolder;\n\n    @Lazy\n    @Bean\n    @ConfigurationProperties(&quot;tay.datasource.foo&quot;)\n    public DataSourceProperties fooDataSourceProperties() {\n        return new DataSourceProperties();\n    }\n\n    @Lazy\n    @Bean\n    @ConfigurationProperties(&quot;tay.datasource.foo.configuration&quot;)\n    public DataSource fooDataSource() {\n        DataSource dataSource = fooDataSourceProperties().initializeDataSourceBuilder()\n                    .type(BasicDataSource.class).build();\n        dbContextHolder.addNewAvailableDbType(DbTypeEnum.foo);\n\n        return dataSource;\n    }\n\n    @Lazy\n    @Bean(name = &quot;fooEntityManagerFactory&quot;)\n    public LocalContainerEntityManagerFactoryBean fooEntityManagerFactory(\n            EntityManagerFactoryBuilder builder) {\n\n//THE CODE IS FAILING AT BELOW RETURN CASE\n\n        return builder\n                .dataSource(fooDataSource())\n                .packages(&quot;com.heyo.tayo.model.foo&quot;)\n                .build();\n    }\n\n    @Lazy\n    @Bean\n    public PlatformTransactionManager fooTransactionManager(\n            final @Qualifier(&quot;fooEntityManagerFactory&quot;) LocalContainerEntityManagerFactoryBean fooEntityManagerFactory) {\n        return new JpaTransactionManager(fooEntityManagerFactory.getObject());\n    }\n\n}\n</code></pre>\n<p>I have multiple classes like above for different configs for different datasources and I am adding them to available dbs static list at datasource Bean.</p>\n<p>Here is my dbadapter factory class.</p>\n<p>Here is my dbAdaptor factory that creates corresponding db adaptor</p>\n<pre><code>@Service\npublic class DbAdapterFactory {\n\n    @Autowired\n    private BeanFactory beanFactory;\n\n    @Autowired\n    private DbContextHolder dbContextHolder;\n\n    public DBAdapter dbAdapter(){\n\n        DbTypeEnum currentDb = dbContextHolder.getCurrentDb();\n        DBAdapter dbAdapter = null;\n\n        if(currentDb == DbTypeEnum.FOODB) {\n            dbAdapter = beanFactory.getBean(foodbadaptor.class);\n        } else {\n            dbAdapter = beanFactory.getBean(koodbadaptor.class);\n        }\n\n        return dbAdapter;\n    }\n</code></pre>\n<p>Here is db context holder that makes operation like setting default db or getting current db etc.:</p>\n<pre><code>@Component\npublic class DbContextHolder {\n\n    private DbTypeEnum dbType = DbTypeEnum.FOODB;\n    private Set&lt;DbTypeEnum&gt; availableDbTypes = new HashSet&lt;&gt;();\n\n    public void setCurrentDb(DbTypeEnum dbType) {\n        this.dbType = dbType;\n    }\n\n    public DbTypeEnum getCurrentDb() {\n        return this.dbType;\n    }\n\n    public List&lt;DbTypeEnum&gt; getAvailableDbTypes() {\n        return new ArrayList&lt;&gt;(availableDbTypes);\n    }\n\n    public void addNewAvailableDbType(DbTypeEnum dbTypeEnum) {\n        availableDbTypes.add(dbTypeEnum);\n    }\n}\n</code></pre>\n<p>I made all @Lazy or tried <code>@SpringBootApplication(exclude={DataSourceAutoConfiguration.class})</code> but still something is calling to create bean and getting error and app is closing. I want to use that config and datasource in a try-catch block and don't stop application at runtime. How can I achieve this or what am I missing on that configs or annotations ?</p>\n"},{"tags":["java","amazon-web-services","aws-cdk","aws-ssm","aws-credentials"],"comments":[{"owner":{"account_id":10389194,"reputation":14819,"user_id":7661119,"display_name":"Ervin Szilagyi"},"score":1,"creation_date":1640870283,"post_id":70532087,"comment_id":124679306,"body_markdown":"It goes beyond the question, but you NEVER share your AWS ACCESS KEY and SECRET KEY, moreover you never store them anywhere as plaintext, besides you local machine. If you need AWS access, you rely on giving the necessary roles and permissions to the services which runs your code. Afterwards, in your code you use the default credentials provider chain: https://docs.aws.amazon.com/sdk-for-java/v1/developer-guide/credentials.html which will be able to fetch the necessary authentication tokens.","body":"It goes beyond the question, but you NEVER share your AWS ACCESS KEY and SECRET KEY, moreover you never store them anywhere as plaintext, besides you local machine. If you need AWS access, you rely on giving the necessary roles and permissions to the services which runs your code. Afterwards, in your code you use the default credentials provider chain: <a href=\"https://docs.aws.amazon.com/sdk-for-java/v1/developer-guide/credentials.html\" rel=\"nofollow noreferrer\">docs.aws.amazon.com/sdk-for-java/v1/developer-guide/&hellip;</a> which will be able to fetch the necessary authentication tokens."},{"owner":{"account_id":5422434,"reputation":1373,"user_id":4315695,"display_name":"Jyubin Patel"},"score":0,"creation_date":1640870601,"post_id":70532087,"comment_id":124679403,"body_markdown":"@ErvinSzilagyi It&#39;s working fine in my local system but it is not working in the AWS machine so need access and a secret key from the environment variable and use it for further tasks.","body":"@ErvinSzilagyi It&#39;s working fine in my local system but it is not working in the AWS machine so need access and a secret key from the environment variable and use it for further tasks."},{"owner":{"account_id":18396380,"reputation":4116,"user_id":13400729,"display_name":"Parsifal"},"score":0,"creation_date":1640871598,"post_id":70532087,"comment_id":124679730,"body_markdown":"Is this Java code being invoked by CodeBuild, or is it being built by CodeBuild and invoked elsewhere?","body":"Is this Java code being invoked by CodeBuild, or is it being built by CodeBuild and invoked elsewhere?"},{"owner":{"account_id":5422434,"reputation":1373,"user_id":4315695,"display_name":"Jyubin Patel"},"score":0,"creation_date":1640871702,"post_id":70532087,"comment_id":124679771,"body_markdown":"@Parsifal Code execution is invoked in code build not else where.","body":"@Parsifal Code execution is invoked in code build not else where."},{"owner":{"account_id":18396380,"reputation":4116,"user_id":13400729,"display_name":"Parsifal"},"score":0,"creation_date":1640871910,"post_id":70532087,"comment_id":124679827,"body_markdown":"Can you show the CodeBuild script that you&#39;re running? As text, not a picture.","body":"Can you show the CodeBuild script that you&#39;re running? As text, not a picture."},{"owner":{"account_id":14422932,"reputation":9181,"user_id":10418515,"display_name":"gshpychka"},"score":0,"creation_date":1640879007,"post_id":70532087,"comment_id":124682069,"body_markdown":"You shouldn&#39;t do this. Instead, you should grant the necessary rights to the codebuild action&#39;s role.","body":"You shouldn&#39;t do this. Instead, you should grant the necessary rights to the codebuild action&#39;s role."}],"owner":{"account_id":5422434,"reputation":1373,"user_id":4315695,"display_name":"Jyubin Patel"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":673,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1640869909,"creation_date":1640869513,"question_id":70532087,"body_markdown":"Check the below image as I already set the Environment Variable with ACCESS and SECRET Key into CodeBuild AWS.\r\n[![enter image description here][1]][1]\r\nAnd I am trying to get those data into JAVA Project with the below code but unable to get value and get null output.\r\n\r\n        String access_key = System.getenv(&quot;AWS_ACCESS_KEY_ID&quot;);\r\n\t\tString secret_key = System.getenv(&quot;AWS_SECRET_ACCESS_KEY&quot;);\r\n\t\t\r\n\t\tSystem.err.println(&quot;access_key &quot; + access_key);\r\n\t\tSystem.err.println(&quot;secret_key &quot; + secret_key);\r\n\r\nAlso tried with the below way but was unable to get the value of it.\r\n\r\n    System.err.println(&quot;Access key: &quot;+StringParameter.valueFromLookup(this,&quot;AWS_ACCESS_KEY_ID&quot;);\r\n\r\nAlso did the below way but did not get any success.\r\n\r\n    System.err.println(&quot;Access : &quot;+EnvironmentVariableCredentialsProvider.create().resolveCredentials().accessKeyId());\r\n\r\nThanks in advance.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/cTUK5.jpg","title":"How can we get environment variable into Java from AWS CodeBuild?","body":"<p>Check the below image as I already set the Environment Variable with ACCESS and SECRET Key into CodeBuild AWS.\n<a href=\"https://i.stack.imgur.com/cTUK5.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cTUK5.jpg\" alt=\"enter image description here\" /></a>\nAnd I am trying to get those data into JAVA Project with the below code but unable to get value and get null output.</p>\n<pre><code>    String access_key = System.getenv(&quot;AWS_ACCESS_KEY_ID&quot;);\n    String secret_key = System.getenv(&quot;AWS_SECRET_ACCESS_KEY&quot;);\n    \n    System.err.println(&quot;access_key &quot; + access_key);\n    System.err.println(&quot;secret_key &quot; + secret_key);\n</code></pre>\n<p>Also tried with the below way but was unable to get the value of it.</p>\n<pre><code>System.err.println(&quot;Access key: &quot;+StringParameter.valueFromLookup(this,&quot;AWS_ACCESS_KEY_ID&quot;);\n</code></pre>\n<p>Also did the below way but did not get any success.</p>\n<pre><code>System.err.println(&quot;Access : &quot;+EnvironmentVariableCredentialsProvider.create().resolveCredentials().accessKeyId());\n</code></pre>\n<p>Thanks in advance.</p>\n"},{"tags":["java","macos","version-control","java-home"],"comments":[{"owner":{"account_id":2843847,"reputation":55833,"user_id":2442804,"accept_rate":80,"display_name":"luk2302"},"score":1,"creation_date":1640861206,"post_id":70530486,"comment_id":124676615,"body_markdown":"If your restart the terminal all the manual exports you do are lost unless they are written in some file that is sourced during terminal startup.","body":"If your restart the terminal all the manual exports you do are lost unless they are written in some file that is sourced during terminal startup."},{"owner":{"account_id":212417,"reputation":43624,"user_id":465223,"accept_rate":75,"display_name":"dunni"},"score":0,"creation_date":1640861506,"post_id":70530486,"comment_id":124676733,"body_markdown":"Also, running executables in the terminal will use the PATH variable, not JAVA_HOME.","body":"Also, running executables in the terminal will use the PATH variable, not JAVA_HOME."}],"owner":{"account_id":1314578,"reputation":1907,"user_id":1261764,"accept_rate":94,"display_name":"abidinberkay"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":110,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1640869826,"creation_date":1640861031,"question_id":70530486,"body_markdown":"I am running below command to see available versions.\r\n\r\n    /usr/libexec/java_home -V\r\n\r\nand the result is: (I have deleted java8 folder from VirtualMachines directory)\r\n\r\n    Matching Java Virtual Machines (2):\r\n        11.0.13, x86_64:\t&quot;Amazon Corretto 11&quot;\t/Users/userName/Library/Java/JavaVirtualMachines/corretto-11.0.13/Contents/Home\r\n        11.0.13, x86_64:\t&quot;OpenJDK 11.0.13&quot;\t/Users/userName/Library/Java/JavaVirtualMachines/semeru-11.0.13/Contents/Home\r\n\r\nAnd I am entering \r\n\r\n    export JAVA_HOME=/Users/username/Library/Java/JavaVirtualMachines/semeru-11.0.13/Contents/Home\r\n\r\nor\r\n\r\n    export JAVA_HOME=`/usr/libexec/java_home -v 11`\r\n\r\nI am restarting termina but still when I enter `java -version`\r\nthe result is\r\n\r\n    openjdk version &quot;1.8.0_312&quot;\r\n\r\nI do not remember whether I have installed them via site or homebrew but now i cannot change it. How can i achieve it ?\r\n\r\n","title":"Why &quot;java -version&quot; is not changing? on Mac?","body":"<p>I am running below command to see available versions.</p>\n<pre><code>/usr/libexec/java_home -V\n</code></pre>\n<p>and the result is: (I have deleted java8 folder from VirtualMachines directory)</p>\n<pre><code>Matching Java Virtual Machines (2):\n    11.0.13, x86_64:    &quot;Amazon Corretto 11&quot;    /Users/userName/Library/Java/JavaVirtualMachines/corretto-11.0.13/Contents/Home\n    11.0.13, x86_64:    &quot;OpenJDK 11.0.13&quot;   /Users/userName/Library/Java/JavaVirtualMachines/semeru-11.0.13/Contents/Home\n</code></pre>\n<p>And I am entering</p>\n<pre><code>export JAVA_HOME=/Users/username/Library/Java/JavaVirtualMachines/semeru-11.0.13/Contents/Home\n</code></pre>\n<p>or</p>\n<pre><code>export JAVA_HOME=`/usr/libexec/java_home -v 11`\n</code></pre>\n<p>I am restarting termina but still when I enter <code>java -version</code>\nthe result is</p>\n<pre><code>openjdk version &quot;1.8.0_312&quot;\n</code></pre>\n<p>I do not remember whether I have installed them via site or homebrew but now i cannot change it. How can i achieve it ?</p>\n"},{"tags":["java","spring","apache-kafka-streams","spring-kafka"],"comments":[{"owner":{"account_id":2010707,"reputation":890,"user_id":1799206,"accept_rate":48,"display_name":"Valath"},"score":0,"creation_date":1641368925,"post_id":70532124,"comment_id":124783936,"body_markdown":"this may help you : https://memorynotfound.com/spring-kafka-batch-listener-example/","body":"this may help you : <a href=\"https://memorynotfound.com/spring-kafka-batch-listener-example/\" rel=\"nofollow noreferrer\">memorynotfound.com/spring-kafka-batch-listener-example</a>"},{"owner":{"account_id":23427734,"reputation":11,"user_id":17487000,"display_name":"Palamariuk Maksym"},"score":0,"creation_date":1641417208,"post_id":70532124,"comment_id":124802690,"body_markdown":"thank you very much @Valath.\nThis approach is good for kafka listener but I&#39;m using kafka streams.","body":"thank you very much @Valath. This approach is good for kafka listener but I&#39;m using kafka streams."},{"owner":{"account_id":2010707,"reputation":890,"user_id":1799206,"accept_rate":48,"display_name":"Valath"},"score":0,"creation_date":1641434211,"post_id":70532124,"comment_id":124806439,"body_markdown":"I think its hard to achieve your use case with streams or even with my comment above. May be you can control the docker start and stop via cron job to schedule your stream processing app to pick all the events currently in queue on a particular day of week. Explore KsqlDB also.","body":"I think its hard to achieve your use case with streams or even with my comment above. May be you can control the docker start and stop via cron job to schedule your stream processing app to pick all the events currently in queue on a particular day of week. Explore KsqlDB also."}],"owner":{"account_id":23427734,"reputation":11,"user_id":17487000,"display_name":"Palamariuk Maksym"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":574,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1640869718,"creation_date":1640869718,"question_id":70532124,"body_markdown":"I have Spring-based application and I want to run Kafka Streams jobs once per week in Monday to process all the data from previous week. Is it possible to configure Spring Kafka Streams to process data as batch? ","title":"Kafka Streams batch processing","body":"<p>I have Spring-based application and I want to run Kafka Streams jobs once per week in Monday to process all the data from previous week. Is it possible to configure Spring Kafka Streams to process data as batch?</p>\n"},{"tags":["java","pdf","html-parsing","flying-saucer"],"comments":[{"owner":{"account_id":339900,"reputation":8440,"user_id":669645,"accept_rate":91,"display_name":"Edd"},"score":0,"creation_date":1341504926,"post_id":11119629,"comment_id":14944874,"body_markdown":"The answers to this question may help: [link](http://stackoverflow.com/questions/5431646/is-there-any-way-improve-the-performance-of-flyingsaucer)","body":"The answers to this question may help: <a href=\"http://stackoverflow.com/questions/5431646/is-there-any-way-improve-the-performance-of-flyingsaucer\">link</a>"},{"owner":{"account_id":940964,"reputation":762,"user_id":969045,"display_name":"YROjha"},"score":0,"creation_date":1430995793,"post_id":11119629,"comment_id":48309294,"body_markdown":"In my case, loading more css(ex: bootstrap.css) and images causing layout() task slow.","body":"In my case, loading more css(ex: bootstrap.css) and images causing layout() task slow."},{"owner":{"account_id":6321384,"reputation":1181,"user_id":4909335,"accept_rate":71,"display_name":"s1moner3d"},"score":0,"creation_date":1495023023,"post_id":11119629,"comment_id":75075178,"body_markdown":"Have you found a solution?","body":"Have you found a solution?"}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1340196720,"creation_date":1340196720,"answer_id":11120001,"question_id":11119629,"body_markdown":"It might just be a buffering issue.  If you haven&#39;t done so already, trying wrapping the output stream with a `BufferedOutputStream` and using that as the `createPdf` argument.","title":"Flying Saucer - ITextRenderer createPdf extremely slow","body":"<p>It might just be a buffering issue.  If you haven't done so already, trying wrapping the output stream with a <code>BufferedOutputStream</code> and using that as the <code>createPdf</code> argument.</p>\n"},{"tags":[],"owner":{"account_id":12685,"reputation":35096,"user_id":25122,"accept_rate":75,"display_name":"RealHowTo"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1347573827,"creation_date":1347566309,"answer_id":12413860,"question_id":11119629,"body_markdown":"I had the same problem, PDF creation was very slow and the `&lt;IMG src=&quot;http:...&quot;&gt;` were not resolved. \r\n\r\nIt was because the HTTP proxy was not used and I guess there was a lot of &quot;http://&quot; timeouts.\r\n\r\nIn my situation, the fix was \r\n\r\n    System.setProperty(&quot;java.net.useSystemProxies&quot;, &quot;true&quot;);\r\n\r\n\r\n","title":"Flying Saucer - ITextRenderer createPdf extremely slow","body":"<p>I had the same problem, PDF creation was very slow and the <code>&lt;IMG src=\"http:...\"&gt;</code> were not resolved. </p>\n\n<p>It was because the HTTP proxy was not used and I guess there was a lot of \"http://\" timeouts.</p>\n\n<p>In my situation, the fix was </p>\n\n<pre><code>System.setProperty(\"java.net.useSystemProxies\", \"true\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3064755,"reputation":11,"user_id":2596713,"display_name":"rocky"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1375886066,"creation_date":1375886066,"answer_id":18106239,"question_id":11119629,"body_markdown":"The following piece should solve it.\r\n\r\n    package com.pdf.web;\r\n    \r\n    import com.lowagie.text.DocumentException;\r\n    import java.io.*;\r\n    import org.xhtmlrenderer.layout.SharedContext;\r\n    import org.xhtmlrenderer.pdf.ITextRenderer;\r\n    import org.xhtmlrenderer.resource.XMLResource;\r\n    import org.xml.sax.InputSource;\r\n    \r\n    // Referenced classes of package com.pdf.web:\r\n    //            PDFRender\r\n    \r\n    public class createPDF\r\n    {\r\n    \r\n        public createPDF()\r\n        {\r\n        }\r\n    \r\n        public createPDF(String url, String pdf)\r\n            throws IOException, DocumentException\r\n        {\r\n            OutputStream os;\r\n            os = null;\r\n            os = new FileOutputStream(pdf);\r\n            ITextRenderer renderer = new ITextRenderer();\r\n            PDFRender.ResourceLoaderUserAgent callback = new PDFRender.ResourceLoaderUserAgent(renderer.getOutputDevice());\r\n            callback.setSharedContext(renderer.getSharedContext());\r\n            renderer.getSharedContext().setUserAgentCallback(callback);\r\n            org.w3c.dom.Document doc = XMLResource.load(new InputSource(url)).getDocument();\r\n            renderer.setDocument(doc, url);\r\n            renderer.layout();\r\n            renderer.createPDF(os);\r\n            os.close();\r\n            os = null;\r\n            if(os != null)\r\n            {\r\n                try\r\n                {\r\n                    os.close();\r\n                }\r\n                catch(IOException e)\r\n                {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n            break MISSING_BLOCK_LABEL_143;\r\n            Exception exception;\r\n            exception;\r\n            if(os != null)\r\n            {\r\n                try\r\n                {\r\n                    os.close();\r\n                }\r\n                catch(IOException e)\r\n                {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n            throw exception;\r\n        }\r\n    }\r\n\r\n","title":"Flying Saucer - ITextRenderer createPdf extremely slow","body":"<p>The following piece should solve it.</p>\n\n<pre><code>package com.pdf.web;\n\nimport com.lowagie.text.DocumentException;\nimport java.io.*;\nimport org.xhtmlrenderer.layout.SharedContext;\nimport org.xhtmlrenderer.pdf.ITextRenderer;\nimport org.xhtmlrenderer.resource.XMLResource;\nimport org.xml.sax.InputSource;\n\n// Referenced classes of package com.pdf.web:\n//            PDFRender\n\npublic class createPDF\n{\n\n    public createPDF()\n    {\n    }\n\n    public createPDF(String url, String pdf)\n        throws IOException, DocumentException\n    {\n        OutputStream os;\n        os = null;\n        os = new FileOutputStream(pdf);\n        ITextRenderer renderer = new ITextRenderer();\n        PDFRender.ResourceLoaderUserAgent callback = new PDFRender.ResourceLoaderUserAgent(renderer.getOutputDevice());\n        callback.setSharedContext(renderer.getSharedContext());\n        renderer.getSharedContext().setUserAgentCallback(callback);\n        org.w3c.dom.Document doc = XMLResource.load(new InputSource(url)).getDocument();\n        renderer.setDocument(doc, url);\n        renderer.layout();\n        renderer.createPDF(os);\n        os.close();\n        os = null;\n        if(os != null)\n        {\n            try\n            {\n                os.close();\n            }\n            catch(IOException e)\n            {\n                e.printStackTrace();\n            }\n        }\n        break MISSING_BLOCK_LABEL_143;\n        Exception exception;\n        exception;\n        if(os != null)\n        {\n            try\n            {\n                os.close();\n            }\n            catch(IOException e)\n            {\n                e.printStackTrace();\n            }\n        }\n        throw exception;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1988279,"reputation":7009,"user_id":1782954,"accept_rate":71,"display_name":"javabeangrinder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640869466,"creation_date":1640869466,"answer_id":70532080,"question_id":11119629,"body_markdown":"I had a similar problem with ITextRenderer and that was mitigated when I fixed the createReplacedElement method for finding additional resources like images and such.\r\n\r\nThe createReplacedElement method is part of the interface ReplacedElementFactory.\r\n\r\nI used this page as base when I created my project and there you can read about createReplacedElement among other things: https://www.baeldung.com/java-html-to-pdf","title":"Flying Saucer - ITextRenderer createPdf extremely slow","body":"<p>I had a similar problem with ITextRenderer and that was mitigated when I fixed the createReplacedElement method for finding additional resources like images and such.</p>\n<p>The createReplacedElement method is part of the interface ReplacedElementFactory.</p>\n<p>I used this page as base when I created my project and there you can read about createReplacedElement among other things: <a href=\"https://www.baeldung.com/java-html-to-pdf\" rel=\"nofollow noreferrer\">https://www.baeldung.com/java-html-to-pdf</a></p>\n"}],"owner":{"account_id":58163,"reputation":14165,"user_id":174184,"accept_rate":73,"display_name":"TJ-"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10392,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":4,"score":2,"last_activity_date":1640869466,"creation_date":1340195529,"question_id":11119629,"body_markdown":"I am trying to generate PDF from Html using iText and Flying Saucer. I have used different techniques suggested on SO to enable `DocumentBuilder` *parse* quickly.\r\n\r\nHowever, `ITextRenderer createPdf(outputstream)` has become a bottleneck. It is extremely slow and I have no idea how to improve the speed of the process.\r\n\r\nAny help would be really appreciated.\r\n\r\n\r\n\tprivate Document getDocument(String htmlContent) throws Exception\r\n\t{\r\n\t\tDocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\r\n\t\t//For faster document.\r\n\t\tfactory.setNamespaceAware(false);\r\n\t\tfactory.setValidating(false);\r\n\t\tfactory.setFeature(&quot;http://xml.org/sax/features/namespaces&quot;, false);\r\n\t\tfactory.setFeature(&quot;http://xml.org/sax/features/validation&quot;, false);\r\n\t\tfactory.setFeature(&quot;http://apache.org/xml/features/nonvalidating/load-dtd-grammar&quot;, false);\r\n\t\tfactory.setFeature(&quot;http://apache.org/xml/features/nonvalidating/load-external-dtd&quot;, false);\r\n\t\tDocumentBuilder builder = factory.newDocumentBuilder();\r\n\t\tbuilder.setEntityResolver(FSEntityResolver.instance());\r\n\t\treturn builder.parse(new ByteArrayInputStream(htmlContent.getBytes()));\r\n\t}\r\n\t\r\n\tpublic void printHtmlToPdf(final String htmlContent, String tempFile, String title) throws Exception\r\n\t{\r\n\t    Document document =  getDocument(htmlContent);\r\n\t    ITextRenderer renderer = new ITextRenderer();\r\n\t    renderer.setDocument(document, null);\r\n\t    BufferedOutputStream outputStream = new BufferedOutputStream(new FileOutputStream(tempFile)); \r\n\t    renderer.layout();\r\n\t    renderer.createPDF(outputStream);\r\n\t    outputStream.close();\r\n\t}\r\n\r\n","title":"Flying Saucer - ITextRenderer createPdf extremely slow","body":"<p>I am trying to generate PDF from Html using iText and Flying Saucer. I have used different techniques suggested on SO to enable <code>DocumentBuilder</code> <em>parse</em> quickly.</p>\n\n<p>However, <code>ITextRenderer createPdf(outputstream)</code> has become a bottleneck. It is extremely slow and I have no idea how to improve the speed of the process.</p>\n\n<p>Any help would be really appreciated.</p>\n\n<pre><code>private Document getDocument(String htmlContent) throws Exception\n{\n    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\n    //For faster document.\n    factory.setNamespaceAware(false);\n    factory.setValidating(false);\n    factory.setFeature(\"http://xml.org/sax/features/namespaces\", false);\n    factory.setFeature(\"http://xml.org/sax/features/validation\", false);\n    factory.setFeature(\"http://apache.org/xml/features/nonvalidating/load-dtd-grammar\", false);\n    factory.setFeature(\"http://apache.org/xml/features/nonvalidating/load-external-dtd\", false);\n    DocumentBuilder builder = factory.newDocumentBuilder();\n    builder.setEntityResolver(FSEntityResolver.instance());\n    return builder.parse(new ByteArrayInputStream(htmlContent.getBytes()));\n}\n\npublic void printHtmlToPdf(final String htmlContent, String tempFile, String title) throws Exception\n{\n    Document document =  getDocument(htmlContent);\n    ITextRenderer renderer = new ITextRenderer();\n    renderer.setDocument(document, null);\n    BufferedOutputStream outputStream = new BufferedOutputStream(new FileOutputStream(tempFile)); \n    renderer.layout();\n    renderer.createPDF(outputStream);\n    outputStream.close();\n}\n</code></pre>\n"},{"tags":["java","logging","logback","slf4j","esapi"],"comments":[{"owner":{"account_id":268409,"reputation":6226,"user_id":557153,"accept_rate":83,"display_name":"avgvstvs"},"score":0,"creation_date":1640708778,"post_id":70502316,"comment_id":124639504,"body_markdown":"I would start here:  https://github.com/ESAPI/esapi-java-legacy/wiki/Using-ESAPI-with-SLF4J\n\nAnd there is some important log config messaging here:  https://github.com/ESAPI/esapi-java-legacy/blob/develop/documentation/esapi4java-core-2.2.1.0-release-notes.txt  That might help.  \n\nWe default to the programmer for log config:  ESAPI just needs to know what framework to use and assumes you&#39;ve configured it accordingly.  I suspect a RACE between when ESAPI instantiates a logger and when you&#39;ve already loaded it in your application.  ESAPI needs to be first.","body":"I would start here:  <a href=\"https://github.com/ESAPI/esapi-java-legacy/wiki/Using-ESAPI-with-SLF4J\" rel=\"nofollow noreferrer\">github.com/ESAPI/esapi-java-legacy/wiki/Using-ESAPI-with-SLF&zwnj;&#8203;4J</a>  And there is some important log config messaging here:  <a href=\"https://github.com/ESAPI/esapi-java-legacy/blob/develop/documentation/esapi4java-core-2.2.1.0-release-notes.txt\" rel=\"nofollow noreferrer\">github.com/ESAPI/esapi-java-legacy/blob/develop/documentatio&zwnj;&#8203;n/&hellip;</a>  That might help.    We default to the programmer for log config:  ESAPI just needs to know what framework to use and assumes you&#39;ve configured it accordingly.  I suspect a RACE between when ESAPI instantiates a logger and when you&#39;ve already loaded it in your application.  ESAPI needs to be first."},{"owner":{"account_id":20017208,"reputation":49,"user_id":14672928,"display_name":"digitalman87"},"score":0,"creation_date":1640725103,"post_id":70502316,"comment_id":124644409,"body_markdown":"Thanks for the feedback! If I have all the configuration I need in my ```logback.xml``` file, do I need to declare anything in ```ESAPI.properties``` other than ```ESAPI.Logger=org.owasp.esapi.logging.slf4j.Slf4JLogFactory```.  I am getting command line logs that the ```ESAPI.properties``` and ```validation.properties```  are Successfully Loaded before my program runs. Would that rule out a RACE issue? If not, how would I resolve that? Thanks!","body":"Thanks for the feedback! If I have all the configuration I need in my <code>logback.xml</code> file, do I need to declare anything in <code>ESAPI.properties</code> other than <code>ESAPI.Logger=org.owasp.esapi.logging.slf4j.Slf4JLogFactory</code>.  I am getting command line logs that the <code>ESAPI.properties</code> and <code>validation.properties</code>  are Successfully Loaded before my program runs. Would that rule out a RACE issue? If not, how would I resolve that? Thanks!"},{"owner":{"account_id":268409,"reputation":6226,"user_id":557153,"accept_rate":83,"display_name":"avgvstvs"},"score":0,"creation_date":1640821318,"post_id":70502316,"comment_id":124669124,"body_markdown":"Jeremiah actually answers your question:  you need to change your coding references to ESAPI as opposed to slf4j.  My guess here is that eliminates the RACE condition because if all log calls are ESAPI, then slf4j can&#39;t instantiate except through ESAPI.  \n\nThere wouldn&#39;t be a better solution:  ESAPI was coded as singletons unfortunately so you will be on your own if you want to figure out a way to run both simultaneously.","body":"Jeremiah actually answers your question:  you need to change your coding references to ESAPI as opposed to slf4j.  My guess here is that eliminates the RACE condition because if all log calls are ESAPI, then slf4j can&#39;t instantiate except through ESAPI.    There wouldn&#39;t be a better solution:  ESAPI was coded as singletons unfortunately so you will be on your own if you want to figure out a way to run both simultaneously."}],"answers":[{"tags":[],"owner":{"account_id":7062573,"reputation":1145,"user_id":5407189,"display_name":"Jeremiah"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1640811486,"creation_date":1640811486,"answer_id":70524942,"question_id":70502316,"body_markdown":"The configuration for the LogFactory indicates which Logging Framework instance org.owasp.esapi.Logger should delegate to.\r\n\r\nFrom your question, it appears you are expecting a log event to follow the flow of: \r\n  \r\n MyCode -&gt; SLF4J -&gt; ESAPI -&gt; Console.\r\n\r\nIn actuality, the way it&#39;s implemented is:  \r\nMyCode -&gt; ESAPI_LOGGER -&gt; SLF4J -&gt; Console\r\n\r\n\r\nThe ESAPI Logger is not an implementation of the SLF4J logging contract. It will only delegate to the logger instance configured in esapi.properties.  All of the references in code will need to be updated to\r\n\r\n    Logger esapiLogger = ESAPI.getLogger(myLogger_byClass_or_byName)\r\n\r\n","title":"OWASP ESAPI and SLF4J/Logback setup","body":"<p>The configuration for the LogFactory indicates which Logging Framework instance org.owasp.esapi.Logger should delegate to.</p>\n<p>From your question, it appears you are expecting a log event to follow the flow of:</p>\n<p>MyCode -&gt; SLF4J -&gt; ESAPI -&gt; Console.</p>\n<p>In actuality, the way it's implemented is:<br />\nMyCode -&gt; ESAPI_LOGGER -&gt; SLF4J -&gt; Console</p>\n<p>The ESAPI Logger is not an implementation of the SLF4J logging contract. It will only delegate to the logger instance configured in esapi.properties.  All of the references in code will need to be updated to</p>\n<pre><code>Logger esapiLogger = ESAPI.getLogger(myLogger_byClass_or_byName)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":385460,"reputation":1357,"user_id":742609,"display_name":"Kevin W. Wall"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1640827332,"creation_date":1640827332,"answer_id":70526580,"question_id":70502316,"body_markdown":"There are also these relevant properties in the **ESAPI.properties** file that you may wish to tweak:\r\n\r\n    # ESAPI Logging\r\n    # Set the application name if these logs are combined with other applications\r\n    Logger.ApplicationName=ExampleApplication\r\n    # If you use an HTML log viewer that does not properly HTML escape log data, you can set LogEncodingRequired to true\r\n    Logger.LogEncodingRequired=false\r\n    # Determines whether ESAPI should log the application name. This might be clutter in some single-server/single-app environments.\r\n    Logger.LogApplicationName=true\r\n    # Determines whether ESAPI should log the server IP and port. This might be clutter in some single-server environments.\r\n    Logger.LogServerIP=true\r\n    # Determines whether ESAPI should log the user info.\r\n    Logger.UserInfo=true\r\n    # Determines whether ESAPI should log the session id and client IP.\r\n    Logger.ClientInfo=true","title":"OWASP ESAPI and SLF4J/Logback setup","body":"<p>There are also these relevant properties in the <strong>ESAPI.properties</strong> file that you may wish to tweak:</p>\n<pre><code># ESAPI Logging\n# Set the application name if these logs are combined with other applications\nLogger.ApplicationName=ExampleApplication\n# If you use an HTML log viewer that does not properly HTML escape log data, you can set LogEncodingRequired to true\nLogger.LogEncodingRequired=false\n# Determines whether ESAPI should log the application name. This might be clutter in some single-server/single-app environments.\nLogger.LogApplicationName=true\n# Determines whether ESAPI should log the server IP and port. This might be clutter in some single-server environments.\nLogger.LogServerIP=true\n# Determines whether ESAPI should log the user info.\nLogger.UserInfo=true\n# Determines whether ESAPI should log the session id and client IP.\nLogger.ClientInfo=true\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20017208,"reputation":49,"user_id":14672928,"display_name":"digitalman87"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1640869447,"creation_date":1640869447,"answer_id":70532074,"question_id":70502316,"body_markdown":"I resolved my issue after reading the [README.md][1] for the current release which references the [2.2.3.0 release notes][2] if you are using the slf4j libraries. I needed to exclude the slf4j-simple which is pulled in because it is a dependency of AntiSamy 1.6.2. \r\n\r\n\r\n  [1]: https://github.com/ESAPI/esapi-java-legacy\r\n  [2]: https://github.com/ESAPI/esapi-java-legacy/blob/main/documentation/esapi4java-core-2.2.3.0-release-notes.txt","title":"OWASP ESAPI and SLF4J/Logback setup","body":"<p>I resolved my issue after reading the <a href=\"https://github.com/ESAPI/esapi-java-legacy\" rel=\"nofollow noreferrer\">README.md</a> for the current release which references the <a href=\"https://github.com/ESAPI/esapi-java-legacy/blob/main/documentation/esapi4java-core-2.2.3.0-release-notes.txt\" rel=\"nofollow noreferrer\">2.2.3.0 release notes</a> if you are using the slf4j libraries. I needed to exclude the slf4j-simple which is pulled in because it is a dependency of AntiSamy 1.6.2.</p>\n"}],"owner":{"account_id":20017208,"reputation":49,"user_id":14672928,"display_name":"digitalman87"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5199,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70532074,"answer_count":3,"score":1,"last_activity_date":1640869447,"creation_date":1640659490,"question_id":70502316,"body_markdown":"I currently have a program that uses SLF4J/LoggerFactory for capturing logs and the configuration is done through logback.xml. My logs were working as expected. I was recently instructed by the Security team at my job to update a class which uses ESAPI. I updated the class and added ```ESAPI.properties``` and ```validation.properties``` to ```src/main/resources/esapi```. In ```ESAPI.properties```, I updated ESAPI.Logger to ```ESAPI.Logger=org.owasp.esapi.logging.slf4j.Slf4JLogFactory```. Based on my research online and through SO, I assumed I would be able to us my logs (which is initialized as ```protected final static Logger log = LoggerFactory.getLogger(this.class);``` and used as ```log.info(&quot;Example&quot;)```) as normal (outputs the logs to a file on a server) but the logs just output to the CL when the java program is run. ","title":"OWASP ESAPI and SLF4J/Logback setup","body":"<p>I currently have a program that uses SLF4J/LoggerFactory for capturing logs and the configuration is done through logback.xml. My logs were working as expected. I was recently instructed by the Security team at my job to update a class which uses ESAPI. I updated the class and added <code>ESAPI.properties</code> and <code>validation.properties</code> to <code>src/main/resources/esapi</code>. In <code>ESAPI.properties</code>, I updated ESAPI.Logger to <code>ESAPI.Logger=org.owasp.esapi.logging.slf4j.Slf4JLogFactory</code>. Based on my research online and through SO, I assumed I would be able to us my logs (which is initialized as <code>protected final static Logger log = LoggerFactory.getLogger(this.class);</code> and used as <code>log.info(&quot;Example&quot;)</code>) as normal (outputs the logs to a file on a server) but the logs just output to the CL when the java program is run.</p>\n"},{"tags":["java","kotlin","gradle"],"owner":{"account_id":20123535,"reputation":110,"user_id":14757560,"display_name":"christianGen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":240,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1640869328,"creation_date":1640869328,"question_id":70532051,"body_markdown":"I would like to improve the way our gradle build replaces `@VERSION@` with `project.version` in some of our resource and webapp files.\r\n\r\nI currently (groovy) have:\r\n\r\n```groovy\r\ndef replaceVersionInResources(pattern) {\r\n    processResources {\r\n        filesMatching(pattern) {\r\n            it.filter(ReplaceTokens, tokens: [&#39;VERSION&#39;: project.version])\r\n        }\r\n    }\r\n}\r\n```\r\nwhich is imported in our build.gradle files and then called with:\r\n```groovy\r\nreplaceVersionInResources(&#39;**/*.conf&#39;)\r\n```\r\nNote that the `project.version` must be set before calling `replaceVersionInResources`.\r\n\r\nThe improved version should **retrieve the file-pattern from an extension property and allow the\r\n`project.version` to be set at a later point**.\r\n\r\nI was able to achieve this for Java source code and am looking for a similar solution for resources and webapp files.\r\n\r\n---\r\nThe current webapp code is very similar (obviously with the same downsides):\r\n```groovy\r\ndef replaceVersionInWebapp(matchingPattern) {\r\n    if (project.tasks.findByName(&#39;bootWar&#39;)) {\r\n        bootWar {\r\n            filesMatching(matchingPattern) {\r\n                it.filter(ReplaceTokens, tokens: [&#39;VERSION&#39;: project.version])\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n---\r\n\r\nHere is our solution for Java Source Code.  \r\n**Feedback is welcome!**\r\n\r\nI created a `Sync` task, which used the main `SourceSet` as input:  \r\n`from(project.the&lt;SourceSetContainer&gt;()[SourceSet.MAIN_SOURCE_SET_NAME].java)`  \r\nand then afterwards wired the output of this task as input to the `CompileJava` tasks:  \r\n```kotlin\r\ntasks.withType&lt;JavaCompile&gt;().configureEach {\r\n    setSource(replaceVersionInSource.get().outputs)\r\n}\r\n```\r\n\r\n\r\n\r\nEverything below is from one file (`buildSrc/src/main/kotlin/versioning.gradle.kts`):\r\n\r\n```kotlin\r\n// Based on https://discuss.gradle.org/t/indirection-lazy-evaluation-for-copy-spec-filter-properties/7173/7\r\nclass DeferredReplaceTokens(`in`: Reader) : FilterReader(`in`) {\r\n    private var actualReader: FilterReader? = null\r\n    var tokens: MapProperty&lt;String, String&gt;? = null\r\n    private fun reader(): FilterReader {\r\n        actualReader = actualReader ?: ReplaceTokens(this.`in`).also { replaceTokens -&gt;\r\n            val tokens = this.tokens\r\n            if (tokens == null) {\r\n                println(&quot;No tokens set.  tokens is null&quot;)\r\n            } else {\r\n                tokens.keySet().get()\r\n                    .map { key -&gt; key to tokens.getting(key).get() }\r\n                    .onEach { println(&quot;Token: ${it.first} : ${it.second}&quot;) }\r\n                    .map { (key, value) -&gt; ReplaceTokens.Token().also { it.key = key; it.value = value } }\r\n                    .forEach(replaceTokens::addConfiguredToken)\r\n            }\r\n        }\r\n        return actualReader!!\r\n    }\r\n    override fun read(cbuf: CharArray, off: Int, len: Int): Int = reader().read(cbuf, off, len)\r\n    override fun read(): Int = reader().read()\r\n    override fun close() = reader().close()\r\n}\r\n```\r\n\r\nHere is the extension I&#39;ve created, with the tokens-map and the `resourcePattern`.\r\n\r\n```kotlin\r\nopen class ReplaceVersionExtension @Inject constructor(\r\n    project: Project\r\n) {\r\n    val tokens: MapProperty&lt;String, String&gt; = project.objects.mapProperty(String::class.java, String::class.java)\r\n        .convention(project.provider { mutableMapOf(&quot;VERSION&quot; to &quot;${project.version}&quot;) })\r\n    val resourcePattern: Property&lt;String&gt; = project.objects.property(String::class.java)\r\n    val webappPattern: Property&lt;String&gt; = project.objects.property(String::class.java)\r\n}\r\n```\r\n\r\n```kotlin\r\nval replaceVersion = extensions.create&lt;ReplaceVersionExtension&gt;(&quot;replaceVersion&quot;)\r\n\r\nval replaceVersionInSource by tasks.registering(Sync::class) {\r\n    onlyIf { replaceVersion.tokens.get().isNotEmpty() }\r\n\r\n    from(project.the&lt;SourceSetContainer&gt;()[SourceSet.MAIN_SOURCE_SET_NAME].java)\r\n    inputs.property(&quot;tokens&quot;, replaceVersion.tokens)\r\n\r\n    filter&lt;DeferredReplaceTokens&gt;(&quot;tokens&quot; to replaceVersion.tokens)\r\n\r\n    into(layout.buildDirectory.dir(&quot;src&quot;))\r\n}\r\n```\r\n\r\nHere is the part where I tell the `JavaCompile` tasks to use the output from the `Sync` task above.\r\n\r\n```kotlin\r\ntasks.withType&lt;JavaCompile&gt;().configureEach {\r\n    setSource(replaceVersionInSource.get().outputs)\r\n}\r\n```\r\n\r\nThis code is then imported and if necessary configured using the extension:\r\n```kotlin\r\nreplaceVersion {\r\n    tokens.put(&quot;VERSION&quot;, &quot;CUSTOM_VERSION_TEXT&quot;)\r\n    tokens.put(&quot;RELEASE&quot;, &quot;2021&quot;)\r\n}\r\n```\r\n\r\n    ","title":"replace tokens in resource and webapp files","body":"<p>I would like to improve the way our gradle build replaces <code>@VERSION@</code> with <code>project.version</code> in some of our resource and webapp files.</p>\n<p>I currently (groovy) have:</p>\n<pre><code>def replaceVersionInResources(pattern) {\n    processResources {\n        filesMatching(pattern) {\n            it.filter(ReplaceTokens, tokens: ['VERSION': project.version])\n        }\n    }\n}\n</code></pre>\n<p>which is imported in our build.gradle files and then called with:</p>\n<pre><code>replaceVersionInResources('**/*.conf')\n</code></pre>\n<p>Note that the <code>project.version</code> must be set before calling <code>replaceVersionInResources</code>.</p>\n<p>The improved version should <strong>retrieve the file-pattern from an extension property and allow the\n<code>project.version</code> to be set at a later point</strong>.</p>\n<p>I was able to achieve this for Java source code and am looking for a similar solution for resources and webapp files.</p>\n<hr />\n<p>The current webapp code is very similar (obviously with the same downsides):</p>\n<pre><code>def replaceVersionInWebapp(matchingPattern) {\n    if (project.tasks.findByName('bootWar')) {\n        bootWar {\n            filesMatching(matchingPattern) {\n                it.filter(ReplaceTokens, tokens: ['VERSION': project.version])\n            }\n        }\n    }\n}\n</code></pre>\n<hr />\n<p>Here is our solution for Java Source Code.<br />\n<strong>Feedback is welcome!</strong></p>\n<p>I created a <code>Sync</code> task, which used the main <code>SourceSet</code> as input:<br />\n<code>from(project.the&lt;SourceSetContainer&gt;()[SourceSet.MAIN_SOURCE_SET_NAME].java)</code><br />\nand then afterwards wired the output of this task as input to the <code>CompileJava</code> tasks:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>tasks.withType&lt;JavaCompile&gt;().configureEach {\n    setSource(replaceVersionInSource.get().outputs)\n}\n</code></pre>\n<p>Everything below is from one file (<code>buildSrc/src/main/kotlin/versioning.gradle.kts</code>):</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>// Based on https://discuss.gradle.org/t/indirection-lazy-evaluation-for-copy-spec-filter-properties/7173/7\nclass DeferredReplaceTokens(`in`: Reader) : FilterReader(`in`) {\n    private var actualReader: FilterReader? = null\n    var tokens: MapProperty&lt;String, String&gt;? = null\n    private fun reader(): FilterReader {\n        actualReader = actualReader ?: ReplaceTokens(this.`in`).also { replaceTokens -&gt;\n            val tokens = this.tokens\n            if (tokens == null) {\n                println(&quot;No tokens set.  tokens is null&quot;)\n            } else {\n                tokens.keySet().get()\n                    .map { key -&gt; key to tokens.getting(key).get() }\n                    .onEach { println(&quot;Token: ${it.first} : ${it.second}&quot;) }\n                    .map { (key, value) -&gt; ReplaceTokens.Token().also { it.key = key; it.value = value } }\n                    .forEach(replaceTokens::addConfiguredToken)\n            }\n        }\n        return actualReader!!\n    }\n    override fun read(cbuf: CharArray, off: Int, len: Int): Int = reader().read(cbuf, off, len)\n    override fun read(): Int = reader().read()\n    override fun close() = reader().close()\n}\n</code></pre>\n<p>Here is the extension I've created, with the tokens-map and the <code>resourcePattern</code>.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>open class ReplaceVersionExtension @Inject constructor(\n    project: Project\n) {\n    val tokens: MapProperty&lt;String, String&gt; = project.objects.mapProperty(String::class.java, String::class.java)\n        .convention(project.provider { mutableMapOf(&quot;VERSION&quot; to &quot;${project.version}&quot;) })\n    val resourcePattern: Property&lt;String&gt; = project.objects.property(String::class.java)\n    val webappPattern: Property&lt;String&gt; = project.objects.property(String::class.java)\n}\n</code></pre>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val replaceVersion = extensions.create&lt;ReplaceVersionExtension&gt;(&quot;replaceVersion&quot;)\n\nval replaceVersionInSource by tasks.registering(Sync::class) {\n    onlyIf { replaceVersion.tokens.get().isNotEmpty() }\n\n    from(project.the&lt;SourceSetContainer&gt;()[SourceSet.MAIN_SOURCE_SET_NAME].java)\n    inputs.property(&quot;tokens&quot;, replaceVersion.tokens)\n\n    filter&lt;DeferredReplaceTokens&gt;(&quot;tokens&quot; to replaceVersion.tokens)\n\n    into(layout.buildDirectory.dir(&quot;src&quot;))\n}\n</code></pre>\n<p>Here is the part where I tell the <code>JavaCompile</code> tasks to use the output from the <code>Sync</code> task above.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>tasks.withType&lt;JavaCompile&gt;().configureEach {\n    setSource(replaceVersionInSource.get().outputs)\n}\n</code></pre>\n<p>This code is then imported and if necessary configured using the extension:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>replaceVersion {\n    tokens.put(&quot;VERSION&quot;, &quot;CUSTOM_VERSION_TEXT&quot;)\n    tokens.put(&quot;RELEASE&quot;, &quot;2021&quot;)\n}\n</code></pre>\n"},{"tags":["java","reflection"],"comments":[{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":1,"creation_date":1640869244,"post_id":70531942,"comment_id":124678973,"body_markdown":"Try with `method.invoke(instance, params.toArray());`","body":"Try with <code>method.invoke(instance, params.toArray());</code>"}],"answers":[{"tags":[],"owner":{"account_id":8043174,"reputation":17,"user_id":6064168,"display_name":"user6064168"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1640868931,"creation_date":1640868931,"answer_id":70531997,"question_id":70531942,"body_markdown":"try this\r\n```java\r\nObject[] params = new Object[]{&quot;param1&quot;, &quot;param2&quot;, 3, &quot;param4&quot;};\r\nMethod method = getMethod();\r\nAppInstance instance = new AppInstance();\r\nmethod.invoke(instance, params);\r\n```","title":"Invoke method with java reflection with list of parameters","body":"<p>try this</p>\n<pre class=\"lang-java prettyprint-override\"><code>Object[] params = new Object[]{&quot;param1&quot;, &quot;param2&quot;, 3, &quot;param4&quot;};\nMethod method = getMethod();\nAppInstance instance = new AppInstance();\nmethod.invoke(instance, params);\n</code></pre>\n"}],"owner":{"account_id":18252258,"reputation":1,"user_id":13287012,"display_name":"DrDeee"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":470,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1640868931,"creation_date":1640868666,"question_id":70531942,"body_markdown":"I am currently trying to execute a method via Reflections, but the method parameters are only a list.\r\n```java\r\nList&lt;Object&gt; params = List.of(&quot;param1&quot;, &quot;param2&quot;, 3, &quot;param4&quot;);\r\nMethod method = getMethod(); //returns the method\r\nAppInstance instance = new AppInstance();\r\nmethod.invoke(instance, params);\r\n```\r\n\r\n\r\nThe method looks like:\r\n```java\r\npublic void myMethod(String param1, String param2, int param3, String param4){\r\n    //some code\r\n}\r\n```\r\nbut Java treats them like\r\n```java\r\npublic void myMethod(List&lt;Object&gt; params){\r\n    //some code\r\n}\r\n```\r\n\r\nThe problem is that the length of the parameters varies, the method can have any number of parameters.\r\n\r\nIs there a way to solve this problem?","title":"Invoke method with java reflection with list of parameters","body":"<p>I am currently trying to execute a method via Reflections, but the method parameters are only a list.</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Object&gt; params = List.of(&quot;param1&quot;, &quot;param2&quot;, 3, &quot;param4&quot;);\nMethod method = getMethod(); //returns the method\nAppInstance instance = new AppInstance();\nmethod.invoke(instance, params);\n</code></pre>\n<p>The method looks like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void myMethod(String param1, String param2, int param3, String param4){\n    //some code\n}\n</code></pre>\n<p>but Java treats them like</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void myMethod(List&lt;Object&gt; params){\n    //some code\n}\n</code></pre>\n<p>The problem is that the length of the parameters varies, the method can have any number of parameters.</p>\n<p>Is there a way to solve this problem?</p>\n"},{"tags":["java","kotlin","jvm","kotlinc"],"comments":[{"owner":{"account_id":13722742,"reputation":16978,"user_id":10134209,"display_name":"gidds"},"score":0,"creation_date":1640863172,"post_id":70526750,"comment_id":124677302,"body_markdown":"In practice, I&#39;d be hugely surprised if _any_ of the above had a measurable impact on performance. (Depending upon the alignment and packing of objects on your platform, even option 4 might not need any extra memory, regardless of any optimisations.) Any real program will almost certainly have far greater opportunities for optimisation — in general, 20% of the code takes 80% of the time (the [80/20 rule](https://en.wikipedia.org/wiki/Pareto_principle#In_computing)), though it can take some effort to find that 20%!","body":"In practice, I&#39;d be hugely surprised if <i>any</i> of the above had a measurable impact on performance. (Depending upon the alignment and packing of objects on your platform, even option 4 might not need any extra memory, regardless of any optimisations.) Any real program will almost certainly have far greater opportunities for optimisation — in general, 20% of the code takes 80% of the time (the <a href=\"https://en.wikipedia.org/wiki/Pareto_principle#In_computing\" rel=\"nofollow noreferrer\">80/20 rule</a>), though it can take some effort to find that 20%!"}],"answers":[{"tags":[],"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1640840079,"creation_date":1640840079,"answer_id":70527601,"question_id":70526750,"body_markdown":"Options 1-3 are the same for performance because they are all `const` so they are inlined wherever used at compile time. \n\nOption 4 doesn’t create duplicate instances of the String for each instance of the class. Instead each instance of the class will have a member field that points at the same shared instance. As far as performance, it is technically having to call a getter method each time it is retrieved but I would expect modern VMs to optimize that overhead away at runtime.\n\nOptions 1-3 do create extra Java class definitions so there is a bit more up front memory overhead for them. But if you already have other members in those objects or top levels of file, you already have those classes anyway. Option 4 has an extra field in the class so it could weigh more if there are a lot of instances of the class. ","title":"What are the performance differences between all the ways to declare a constant in Kotlin?","body":"<p>Options 1-3 are the same for performance because they are all <code>const</code> so they are inlined wherever used at compile time.</p>\n<p>Option 4 doesn’t create duplicate instances of the String for each instance of the class. Instead each instance of the class will have a member field that points at the same shared instance. As far as performance, it is technically having to call a getter method each time it is retrieved but I would expect modern VMs to optimize that overhead away at runtime.</p>\n<p>Options 1-3 do create extra Java class definitions so there is a bit more up front memory overhead for them. But if you already have other members in those objects or top levels of file, you already have those classes anyway. Option 4 has an extra field in the class so it could weigh more if there are a lot of instances of the class.</p>\n"}],"owner":{"account_id":18359846,"reputation":342,"user_id":13372186,"display_name":"jpegoraro"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":489,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1640868561,"creation_date":1640829481,"question_id":70526750,"body_markdown":"Since Kotlin doesn&#39;t allow you to directly declare constants inside a `class` like `static` members in Java, we have a couple of options on how to do it in Kotlin. My question is, what are the performance costs of each option, and which one is cheaper? I don&#39;t want to know which one is more readable or considered best-practice, I only want it from a performance perspective.\r\n\r\n## Option 1: Use a companion object ##\r\nSo a code that looks like this: \r\n\r\n    class Thing {\r\n        companion object {\r\n            const val TAG = &quot;Thing&quot;\r\n        }\r\n    \r\n       ...\r\n    }\r\n\r\nIn Java looks like this:\r\n\r\n    public final class Thing {\r\n       public static final String TAG = &quot;Thing&quot;;\r\n       public static final Thing.Companion Companion = new Thing.Companion((DefaultConstructorMarker)null);\r\n    \r\n       public static final class Companion {\r\n          private Companion() {\r\n          }\r\n    \r\n          public Companion(DefaultConstructorMarker $constructor_marker) {\r\n             this();\r\n          }\r\n       }\r\n\r\n       ...\r\n    }\r\nIt creates this inner class `Companion` and instantiates it. How costly is this?\r\n\r\n## Option 2: Declare it as a top-level variable ##\r\nSo this:\r\n\r\n    const val TAG = &quot;Thing&quot;\r\n    class Thing {\r\n       ...\r\n    }\r\nBecomes this:\r\n\r\n    public final class ThingKt {\r\n       public static final String TAG = &quot;Thing&quot;;\r\n    }\r\n    \r\n    public final class Thing { ... }\r\nIt creates a new class with a `static` member. How different is this than using an object to store it?\r\n\r\n## Option 3: Use an external object ##\r\nLike so:\r\n\r\n    object ThingConstants {\r\n        const val TAG = &quot;Thing&quot;\r\n    }\r\n    \r\n    class Thing { ... }\r\nWhich in Java looks like this:\r\n\r\n    public final class ThingConstants {\r\n       public static final String TAG = &quot;Thing&quot;;\r\n       public static final ThingConstants INSTANCE;\r\n    \r\n       ...  // Private constructor\r\n    }\r\n    \r\n    public final class Thing { ... }\r\n\r\nSo similar to declaring as top-level, except the created class has an `INSTANCE` field that is initialized in a private constructor. How costlier is this compared to using a top-level variable?\r\n\r\n## Option 4: Drop the const modifier ##\r\nSo you just use the good old `val`:\r\n\r\n    class Thing {\r\n        val TAG = &quot;Thing&quot;\r\n        \r\n        ...\r\n    }\r\nThis is a mystery to me. It doesn&#39;t create any additional classes, but doesn&#39;t reap the benefits of the `const` modifier either. This means each instance of the class is going to have its own instance of `TAG`, as well as generating getters and setters for it too, right? But I also [read][1] that the JVM optimizes it as a constant. So there is more to this option than I initially thought.\r\n\r\n\r\n  [1]: https://discuss.kotlinlang.org/t/best-practice-where-to-put-my-class-constants/15395/8","title":"What are the performance differences between all the ways to declare a constant in Kotlin?","body":"<p>Since Kotlin doesn't allow you to directly declare constants inside a <code>class</code> like <code>static</code> members in Java, we have a couple of options on how to do it in Kotlin. My question is, what are the performance costs of each option, and which one is cheaper? I don't want to know which one is more readable or considered best-practice, I only want it from a performance perspective.</p>\n<h2>Option 1: Use a companion object</h2>\n<p>So a code that looks like this:</p>\n<pre><code>class Thing {\n    companion object {\n        const val TAG = &quot;Thing&quot;\n    }\n\n   ...\n}\n</code></pre>\n<p>In Java looks like this:</p>\n<pre><code>public final class Thing {\n   public static final String TAG = &quot;Thing&quot;;\n   public static final Thing.Companion Companion = new Thing.Companion((DefaultConstructorMarker)null);\n\n   public static final class Companion {\n      private Companion() {\n      }\n\n      public Companion(DefaultConstructorMarker $constructor_marker) {\n         this();\n      }\n   }\n\n   ...\n}\n</code></pre>\n<p>It creates this inner class <code>Companion</code> and instantiates it. How costly is this?</p>\n<h2>Option 2: Declare it as a top-level variable</h2>\n<p>So this:</p>\n<pre><code>const val TAG = &quot;Thing&quot;\nclass Thing {\n   ...\n}\n</code></pre>\n<p>Becomes this:</p>\n<pre><code>public final class ThingKt {\n   public static final String TAG = &quot;Thing&quot;;\n}\n\npublic final class Thing { ... }\n</code></pre>\n<p>It creates a new class with a <code>static</code> member. How different is this than using an object to store it?</p>\n<h2>Option 3: Use an external object</h2>\n<p>Like so:</p>\n<pre><code>object ThingConstants {\n    const val TAG = &quot;Thing&quot;\n}\n\nclass Thing { ... }\n</code></pre>\n<p>Which in Java looks like this:</p>\n<pre><code>public final class ThingConstants {\n   public static final String TAG = &quot;Thing&quot;;\n   public static final ThingConstants INSTANCE;\n\n   ...  // Private constructor\n}\n\npublic final class Thing { ... }\n</code></pre>\n<p>So similar to declaring as top-level, except the created class has an <code>INSTANCE</code> field that is initialized in a private constructor. How costlier is this compared to using a top-level variable?</p>\n<h2>Option 4: Drop the const modifier</h2>\n<p>So you just use the good old <code>val</code>:</p>\n<pre><code>class Thing {\n    val TAG = &quot;Thing&quot;\n    \n    ...\n}\n</code></pre>\n<p>This is a mystery to me. It doesn't create any additional classes, but doesn't reap the benefits of the <code>const</code> modifier either. This means each instance of the class is going to have its own instance of <code>TAG</code>, as well as generating getters and setters for it too, right? But I also <a href=\"https://discuss.kotlinlang.org/t/best-practice-where-to-put-my-class-constants/15395/8\" rel=\"nofollow noreferrer\">read</a> that the JVM optimizes it as a constant. So there is more to this option than I initially thought.</p>\n"},{"tags":["javascript","java","android","meteor"],"answers":[{"tags":[],"owner":{"account_id":5444590,"reputation":361,"user_id":4331592,"accept_rate":56,"display_name":"Hafiz Hanif"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1640868197,"creation_date":1640868197,"answer_id":70531866,"question_id":70522535,"body_markdown":"This problem was solved by installing JDK8.\r\n\r\nSource for Macbook Pro M1: [https://www.azul.com/downloads/?version=java-8-lts&amp;os=macos&amp;architecture=arm-64-bit&amp;package=jdk][1]\r\n\r\n\r\n  [1]: https://www.azul.com/downloads/?version=java-8-lts&amp;os=macos&amp;architecture=arm-64-bit&amp;package=jdk","title":"Unable to solve Android target error in Meteor add-platform android","body":"<p>This problem was solved by installing JDK8.</p>\n<p>Source for Macbook Pro M1: <a href=\"https://www.azul.com/downloads/?version=java-8-lts&amp;os=macos&amp;architecture=arm-64-bit&amp;package=jdk\" rel=\"nofollow noreferrer\">https://www.azul.com/downloads/?version=java-8-lts&amp;os=macos&amp;architecture=arm-64-bit&amp;package=jdk</a></p>\n"}],"owner":{"account_id":5444590,"reputation":361,"user_id":4331592,"accept_rate":56,"display_name":"Hafiz Hanif"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":326,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1640868197,"creation_date":1640796951,"question_id":70522535,"body_markdown":"I using a Macbook Pro M1 and decided to do start developing mobile app using Meteorjs framework, since I&#39;ve used the framework for web development. I&#39;ve followed a tutorial online on how to get that going but currently facing a problem:\r\n\r\n    Status of the individual requirements:        \r\n    ✓ Java JDK                                    \r\n    ✓ Android SDK                                 \r\n    ✗ Android target: Command failed with exit code 1: avdmanager list target\r\n                Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: javax/xml/bind/annotation/XmlSchema\r\n                    at com.android.repository.api.SchemaModule$SchemaModuleVersion.&lt;init&gt;(SchemaModule.java:156)\r\n                    at com.android.repository.api.SchemaModule.&lt;init&gt;(SchemaModule.java:75)\r\n                    at com.android.sdklib.repository.AndroidSdkHandler.&lt;clinit&gt;(AndroidSdkHandler.java:81)\r\n                    at com.android.sdklib.tool.AvdManagerCli.run(AvdManagerCli.java:213)\r\n                    at com.android.sdklib.tool.AvdManagerCli.main(AvdManagerCli.java:200)\r\n                Caused by: java.lang.ClassNotFoundException: javax.xml.bind.annotation.XmlSchema\r\n                    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\r\n                    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\r\n                    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)\r\n                    ... 5 more\r\n    ✓ Gradle\r\n\r\nIt seems that there&#39;s only one requirement that failed, and I&#39;ve searched for the solution but couldn&#39;t find anything that resembles a similar problem that I&#39;m facing. Hoping for you to help point me to the right direction.\r\n\r\nI have installed the Android Studio, uninstalled and reinstalled the Android SDK Build-Tools 32, Android SDK Command-line Tools, Android SDK Platform-Tools, and Android Emulator.\r\n\r\nCurrently, my ~/.bashrc file setup is like this:\r\n\r\n    export ANDROID_HOME=$HOME/Android/Sdk\r\n    export ANDROID_SDK_ROOT=$HOME/Android/Sdk\r\n    export PATH=$PATH:$ANDROID_HOME/tools\r\n    export PATH=$PATH:$ANDROID_HOME/platform-tools\r\n    export PATH=$PATH:$ANDROID_HOME/cmdline-tools/latest/bin\r\n\r\n...and my ~/.bash_profile:\r\n\r\n    export JAVA_HOME=$(/usr/libexec/java_home)\r\n    export PATH=$JAVA_HOME/bin:$PATH\r\n    export CLASS_PATH=$JAVA_HOME/lib\r\n\r\nand I&#39;ve got Gradle working just fine. Tested building a generic Android app using one of the samples in Android Studio. The build was successful. \r\n\r\nBut I can&#39;t get the `meteor add-platform android` to pass the checks. Anyone?\r\n\r\n","title":"Unable to solve Android target error in Meteor add-platform android","body":"<p>I using a Macbook Pro M1 and decided to do start developing mobile app using Meteorjs framework, since I've used the framework for web development. I've followed a tutorial online on how to get that going but currently facing a problem:</p>\n<pre><code>Status of the individual requirements:        \n✓ Java JDK                                    \n✓ Android SDK                                 \n✗ Android target: Command failed with exit code 1: avdmanager list target\n            Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: javax/xml/bind/annotation/XmlSchema\n                at com.android.repository.api.SchemaModule$SchemaModuleVersion.&lt;init&gt;(SchemaModule.java:156)\n                at com.android.repository.api.SchemaModule.&lt;init&gt;(SchemaModule.java:75)\n                at com.android.sdklib.repository.AndroidSdkHandler.&lt;clinit&gt;(AndroidSdkHandler.java:81)\n                at com.android.sdklib.tool.AvdManagerCli.run(AvdManagerCli.java:213)\n                at com.android.sdklib.tool.AvdManagerCli.main(AvdManagerCli.java:200)\n            Caused by: java.lang.ClassNotFoundException: javax.xml.bind.annotation.XmlSchema\n                at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\n                at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\n                at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)\n                ... 5 more\n✓ Gradle\n</code></pre>\n<p>It seems that there's only one requirement that failed, and I've searched for the solution but couldn't find anything that resembles a similar problem that I'm facing. Hoping for you to help point me to the right direction.</p>\n<p>I have installed the Android Studio, uninstalled and reinstalled the Android SDK Build-Tools 32, Android SDK Command-line Tools, Android SDK Platform-Tools, and Android Emulator.</p>\n<p>Currently, my ~/.bashrc file setup is like this:</p>\n<pre><code>export ANDROID_HOME=$HOME/Android/Sdk\nexport ANDROID_SDK_ROOT=$HOME/Android/Sdk\nexport PATH=$PATH:$ANDROID_HOME/tools\nexport PATH=$PATH:$ANDROID_HOME/platform-tools\nexport PATH=$PATH:$ANDROID_HOME/cmdline-tools/latest/bin\n</code></pre>\n<p>...and my ~/.bash_profile:</p>\n<pre><code>export JAVA_HOME=$(/usr/libexec/java_home)\nexport PATH=$JAVA_HOME/bin:$PATH\nexport CLASS_PATH=$JAVA_HOME/lib\n</code></pre>\n<p>and I've got Gradle working just fine. Tested building a generic Android app using one of the samples in Android Studio. The build was successful.</p>\n<p>But I can't get the <code>meteor add-platform android</code> to pass the checks. Anyone?</p>\n"},{"tags":["java","xml"],"comments":[{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":12,"creation_date":1298873758,"post_id":5138696,"comment_id":5766429,"body_markdown":"It would help if you showed us the XML you are trying to parse.  (Just the first few lines would do, I expect.)","body":"It would help if you showed us the XML you are trying to parse.  (Just the first few lines would do, I expect.)"},{"owner":{"account_id":252951,"reputation":5547,"user_id":531321,"accept_rate":46,"display_name":"ag112"},"score":1,"creation_date":1298875876,"post_id":5138696,"comment_id":5766708,"body_markdown":"Thanks Stephen, I am trying to retrieve XML Request from AXIS framework and paste it here. So general understanding of above error is XML is not well-formed.","body":"Thanks Stephen, I am trying to retrieve XML Request from AXIS framework and paste it here. So general understanding of above error is XML is not well-formed."},{"owner":{"account_id":982989,"reputation":4440,"user_id":1002222,"accept_rate":96,"display_name":"Gaʀʀʏ"},"score":1,"creation_date":1368729249,"post_id":5138696,"comment_id":23852025,"body_markdown":"I had this issue because I was trying to transform the string name of the xml file rather than the xml file as a string! :P","body":"I had this issue because I was trying to transform the string name of the xml file rather than the xml file as a string! :P"},{"owner":{"account_id":2227719,"reputation":887,"user_id":1966079,"display_name":"Guilherme"},"score":1,"creation_date":1596625827,"post_id":5138696,"comment_id":111870040,"body_markdown":"Notepad++ and change the Encoding works fine to me!","body":"Notepad++ and change the Encoding works fine to me!"}],"answers":[{"tags":[],"owner":{"account_id":286788,"reputation":2841,"user_id":586240,"accept_rate":92,"display_name":"Yuriy Zubarev"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1298873167,"creation_date":1298873167,"answer_id":5138758,"question_id":5138696,"body_markdown":"It means XML is malformed or the response body is not XML document at all. ","title":"org.xml.sax.SAXParseException: Content is not allowed in prolog","body":"<p>It means XML is malformed or the response body is not XML document at all. </p>\n"},{"tags":[],"owner":{"account_id":226629,"reputation":8753,"user_id":487781,"display_name":"hardmath"},"down_vote_count":0,"up_vote_count":28,"is_accepted":false,"score":28,"last_activity_date":1298897923,"creation_date":1298897192,"answer_id":5142162,"question_id":5138696,"body_markdown":"Try adding a space between the `encoding=&quot;UTF-8&quot;` string in the prolog and the terminating ` ?&gt;`.  In XML the prolog designates this bracket-question mark delimited element at the start of the document (while the tag prolog in stackoverflow refers to the programming language).\r\n\r\n**Added:** Is that dash in front of your prolog part of the document?  That would be the error there, having data in front of the prolog, `-&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; `.","title":"org.xml.sax.SAXParseException: Content is not allowed in prolog","body":"<p>Try adding a space between the <code>encoding=\"UTF-8\"</code> string in the prolog and the terminating <code>?&gt;</code>.  In XML the prolog designates this bracket-question mark delimited element at the start of the document (while the tag prolog in stackoverflow refers to the programming language).</p>\n\n<p><strong>Added:</strong> Is that dash in front of your prolog part of the document?  That would be the error there, having data in front of the prolog, <code>-&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;</code>.</p>\n"},{"tags":[],"owner":{"account_id":937533,"reputation":4930,"user_id":966185,"accept_rate":81,"display_name":"Pavel"},"down_vote_count":3,"up_vote_count":3,"is_accepted":false,"score":0,"last_activity_date":1474907639,"creation_date":1317094469,"answer_id":7563931,"question_id":5138696,"body_markdown":"Set your document to form like this:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;\r\n    &lt;root&gt;\r\n        %children%\r\n    &lt;/root&gt;","title":"org.xml.sax.SAXParseException: Content is not allowed in prolog","body":"<p>Set your document to form like this:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;root&gt;\n    %children%\n&lt;/root&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":40231,"reputation":2882,"user_id":116542,"display_name":"Jerome Louvel"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1318076181,"creation_date":1318076181,"answer_id":7696723,"question_id":5138696,"body_markdown":"In my case, removing the &#39;encoding=&quot;UTF-8&quot;&#39; attribute altogether worked.\r\n\r\nIt looks like a character set encoding issue, maybe because your file isn&#39;t really in UTF-8.\r\n","title":"org.xml.sax.SAXParseException: Content is not allowed in prolog","body":"<p>In my case, removing the 'encoding=\"UTF-8\"' attribute altogether worked.</p>\n\n<p>It looks like a character set encoding issue, maybe because your file isn't really in UTF-8.</p>\n"},{"tags":[],"owner":{"account_id":545061,"reputation":6934,"user_id":914705,"accept_rate":100,"display_name":"Mike Sokolov"},"down_vote_count":0,"up_vote_count":276,"is_accepted":true,"score":276,"last_activity_date":1474906478,"creation_date":1318082296,"answer_id":7697281,"question_id":5138696,"body_markdown":"This is often caused by a white space before the XML declaration, but it could be **any text**, like a dash or any character. I say often caused by white space because people assume white space is always ignorable, but that&#39;s not the case here.\r\n\r\n----------------\r\n\r\nAnother thing that often happens is a **UTF-8 BOM** (byte order mark), which *is* allowed before the XML declaration can be treated as whitespace if the document is handed as a stream of characters to an XML parser rather than as a stream of bytes.\r\n\r\nThe same can happen if schema files (.xsd) are used to validate the xml file and one of the schema files has an **UTF-8 BOM**.","title":"org.xml.sax.SAXParseException: Content is not allowed in prolog","body":"<p>This is often caused by a white space before the XML declaration, but it could be <strong>any text</strong>, like a dash or any character. I say often caused by white space because people assume white space is always ignorable, but that's not the case here.</p>\n\n<hr>\n\n<p>Another thing that often happens is a <strong>UTF-8 BOM</strong> (byte order mark), which <em>is</em> allowed before the XML declaration can be treated as whitespace if the document is handed as a stream of characters to an XML parser rather than as a stream of bytes.</p>\n\n<p>The same can happen if schema files (.xsd) are used to validate the xml file and one of the schema files has an <strong>UTF-8 BOM</strong>.</p>\n"},{"tags":[],"owner":{"account_id":1035914,"reputation":561,"user_id":1043220,"accept_rate":0,"display_name":"Egor"},"down_vote_count":0,"up_vote_count":40,"is_accepted":false,"score":40,"last_activity_date":1427409555,"creation_date":1321108779,"answer_id":8105119,"question_id":5138696,"body_markdown":"Actually in addition to Yuriy Zubarev&#39;s Post\r\n\r\nWhen you pass a nonexistent xml file to parser. For example you pass \r\n\r\n    new File(&quot;C:/temp/abc&quot;)\r\n\r\nwhen only C:/temp/abc.xml file exists on your file system\r\n\r\nIn either case\r\n\r\n    builder = DocumentBuilderFactory.newInstance().newDocumentBuilder();\r\n    document = builder.parse(new File(&quot;C:/temp/abc&quot;));\r\nor\r\n\r\n    DOMParser parser = new DOMParser();\r\n    parser.parse(&quot;file:C:/temp/abc&quot;);\r\n\r\nAll give the same error message.\r\n\r\nVery disappointing bug, because the following trace\r\n\r\n    javax.servlet.ServletException\r\n        at org.apache.xerces.parsers.DOMParser.parse(Unknown Source)\r\n    ...\r\n    Caused by: org.xml.sax.SAXParseException: Content is not allowed in prolog.\r\n    ... 40 more\r\n\r\ndoesn&#39;t say anything about the fact of &#39;file name is incorrect&#39; or &#39;such a file does not exist&#39;. In my case I had absolutely correct xml file and had to spent 2 days to determine the real problem.\r\n\r\n\r\n","title":"org.xml.sax.SAXParseException: Content is not allowed in prolog","body":"<p>Actually in addition to Yuriy Zubarev's Post</p>\n\n<p>When you pass a nonexistent xml file to parser. For example you pass </p>\n\n<pre><code>new File(\"C:/temp/abc\")\n</code></pre>\n\n<p>when only C:/temp/abc.xml file exists on your file system</p>\n\n<p>In either case</p>\n\n<pre><code>builder = DocumentBuilderFactory.newInstance().newDocumentBuilder();\ndocument = builder.parse(new File(\"C:/temp/abc\"));\n</code></pre>\n\n<p>or</p>\n\n<pre><code>DOMParser parser = new DOMParser();\nparser.parse(\"file:C:/temp/abc\");\n</code></pre>\n\n<p>All give the same error message.</p>\n\n<p>Very disappointing bug, because the following trace</p>\n\n<pre><code>javax.servlet.ServletException\n    at org.apache.xerces.parsers.DOMParser.parse(Unknown Source)\n...\nCaused by: org.xml.sax.SAXParseException: Content is not allowed in prolog.\n... 40 more\n</code></pre>\n\n<p>doesn't say anything about the fact of 'file name is incorrect' or 'such a file does not exist'. In my case I had absolutely correct xml file and had to spent 2 days to determine the real problem.</p>\n"},{"tags":[],"owner":{"account_id":84539,"reputation":9538,"user_id":236247,"accept_rate":86,"display_name":"demongolem"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1330028857,"creation_date":1330028857,"answer_id":9420717,"question_id":5138696,"body_markdown":"Just an additional thought on this one for the future.  Getting this bug could be the case that one simply hits the delete key or some other key randomly when they have an XML window as the active display and are not paying attention.  This has happened to me before with the struts.xml file in my web application.  Clumsy elbows ...","title":"org.xml.sax.SAXParseException: Content is not allowed in prolog","body":"<p>Just an additional thought on this one for the future.  Getting this bug could be the case that one simply hits the delete key or some other key randomly when they have an XML window as the active display and are not paying attention.  This has happened to me before with the struts.xml file in my web application.  Clumsy elbows ...</p>\n"},{"tags":[],"owner":{"account_id":1522111,"reputation":21,"user_id":1421487,"display_name":"Satish M"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1338277025,"creation_date":1338200762,"answer_id":10783092,"question_id":5138696,"body_markdown":"I was also getting the same \r\n\r\n`XML reader error: javax.xml.stream.XMLStreamException: ParseError at [row,col]:[1,2] Message: Reference is not allowed in prolog.` \r\n\r\n, when my application was creating a XML response for a RestFull Webservice call. \r\n      While creating the XML format String I replaced the &amp;lt and &amp;gt with &lt; and &gt; then the error went off, and I was getting proper response. Not sure how it worked but it worked.\r\n\r\n**sample**:\r\n \r\n\r\n    String body = &quot;&lt;ns:addNumbersResponse xmlns:ns=\\&quot;http://java.duke.org\\&quot;&gt;&lt;ns:return&gt;&quot;\r\n                +sum\r\n                +&quot;&lt;/ns:return&gt;&lt;/ns:addNumbersResponse&gt;&quot;;","title":"org.xml.sax.SAXParseException: Content is not allowed in prolog","body":"<p>I was also getting the same </p>\n\n<p><code>XML reader error: javax.xml.stream.XMLStreamException: ParseError at [row,col]:[1,2] Message: Reference is not allowed in prolog.</code> </p>\n\n<p>, when my application was creating a XML response for a RestFull Webservice call. \n      While creating the XML format String I replaced the &amp;lt and &amp;gt with &lt; and > then the error went off, and I was getting proper response. Not sure how it worked but it worked.</p>\n\n<p><strong>sample</strong>:</p>\n\n<pre><code>String body = \"&lt;ns:addNumbersResponse xmlns:ns=\\\"http://java.duke.org\\\"&gt;&lt;ns:return&gt;\"\n            +sum\n            +\"&lt;/ns:return&gt;&lt;/ns:addNumbersResponse&gt;\";\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1792294,"reputation":11,"user_id":1632412,"display_name":"paresh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1349184615,"creation_date":1346226352,"answer_id":12173087,"question_id":5138696,"body_markdown":"I had the same issue.\r\n\r\nFirst I downloaded the XML file to local desktop and I got `Content is not allowed in prolog` during the importing file to portal server. Even visually file was looking good to me but somehow it&#39;s was corrupted. \r\n\r\nSo I re-download the same file and tried the same and it worked.","title":"org.xml.sax.SAXParseException: Content is not allowed in prolog","body":"<p>I had the same issue.</p>\n\n<p>First I downloaded the XML file to local desktop and I got <code>Content is not allowed in prolog</code> during the importing file to portal server. Even visually file was looking good to me but somehow it's was corrupted. </p>\n\n<p>So I re-download the same file and tried the same and it worked.</p>\n"},{"tags":[],"owner":{"account_id":1159210,"reputation":147,"user_id":1139079,"display_name":"colin_froggatt"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1352383696,"creation_date":1352383696,"answer_id":13290589,"question_id":5138696,"body_markdown":"Just spent 4 hours tracking down a similar problem in a WSDL.  Turns out the WSDL used an XSD which imports another namespace XSD.  This imported XSD contained the following:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;schema targetNamespace=&quot;http://www.xyz.com/Services/CommonTypes&quot; elementFormDefault=&quot;qualified&quot;\r\n    \txmlns=&quot;http://www.w3.org/2001/XMLSchema&quot; \r\n        xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot;\r\n        xmlns:CommonTypes=&quot;http://www.xyz.com/Services/CommonTypes&quot;&gt;\r\n    \r\n     &lt;include schemaLocation=&quot;&quot;&gt;&lt;/include&gt;  \r\n        &lt;complexType name=&quot;RequestType&quot;&gt;\r\n            &lt;....\r\n\r\nNote the empty `include` element!  This was the root of my woes.  I guess this is a variation on Egor&#39;s file not found problem above.  \r\n\r\n+1 to disappointing error reporting.","title":"org.xml.sax.SAXParseException: Content is not allowed in prolog","body":"<p>Just spent 4 hours tracking down a similar problem in a WSDL.  Turns out the WSDL used an XSD which imports another namespace XSD.  This imported XSD contained the following:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;schema targetNamespace=\"http://www.xyz.com/Services/CommonTypes\" elementFormDefault=\"qualified\"\n    xmlns=\"http://www.w3.org/2001/XMLSchema\" \n    xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"\n    xmlns:CommonTypes=\"http://www.xyz.com/Services/CommonTypes\"&gt;\n\n &lt;include schemaLocation=\"\"&gt;&lt;/include&gt;  \n    &lt;complexType name=\"RequestType\"&gt;\n        &lt;....\n</code></pre>\n\n<p>Note the empty <code>include</code> element!  This was the root of my woes.  I guess this is a variation on Egor's file not found problem above.  </p>\n\n<p>+1 to disappointing error reporting.</p>\n"},{"tags":[],"owner":{"account_id":2073200,"reputation":777,"user_id":1847212,"accept_rate":8,"display_name":"Igor Kustov"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1364201530,"creation_date":1364201530,"answer_id":15610844,"question_id":5138696,"body_markdown":"My answer wouldn&#39;t help you probably, but it help with this problem generally. \r\n\r\nWhen you see this kind of exception you should try to open your xml file in any Hex Editor and sometime you can see additional bytes at the beginning of the file which text-editor doesn&#39;t show. \r\n\r\nDelete them and your xml will be parsed. ","title":"org.xml.sax.SAXParseException: Content is not allowed in prolog","body":"<p>My answer wouldn't help you probably, but it help with this problem generally. </p>\n\n<p>When you see this kind of exception you should try to open your xml file in any Hex Editor and sometime you can see additional bytes at the beginning of the file which text-editor doesn't show. </p>\n\n<p>Delete them and your xml will be parsed. </p>\n"},{"tags":[],"owner":{"display_name":"user2575850"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1374503143,"creation_date":1374501801,"answer_id":17789595,"question_id":5138696,"body_markdown":"I had the same problem (and solved it) while trying to parse an XML document with freemarker.\r\n\r\nI had no spaces before the header of XML file.\r\n\r\nThe problem occurs *when and only when the file encoding and the XML encoding attribute are different.* (ex: UTF-8 file with UTF-16 attribute in header).\r\n\r\nSo I had two ways of solving the problem:\r\n\r\n 1. changing the encoding of the file itself\r\n 2. changing the header UTF-16 to UTF-8","title":"org.xml.sax.SAXParseException: Content is not allowed in prolog","body":"<p>I had the same problem (and solved it) while trying to parse an XML document with freemarker.</p>\n\n<p>I had no spaces before the header of XML file.</p>\n\n<p>The problem occurs <em>when and only when the file encoding and the XML encoding attribute are different.</em> (ex: UTF-8 file with UTF-16 attribute in header).</p>\n\n<p>So I had two ways of solving the problem:</p>\n\n<ol>\n<li>changing the encoding of the file itself</li>\n<li>changing the header UTF-16 to UTF-8</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":1372659,"reputation":2001,"user_id":1307284,"accept_rate":71,"display_name":"Amir Keibi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1378963638,"creation_date":1378963282,"answer_id":18755913,"question_id":5138696,"body_markdown":"We had the same problem recently and it turned out to be the case of a bad URL and consequently a standard 403 HTTP response (which obviously isn&#39;t the valid XML the client was looking for). I&#39;m going to share the detail in case someone within the same context run into this problem:\r\n\r\nThis was a Spring based web application in which a &quot;JaxWsPortProxyFactoryBean&quot; bean was configured to expose a proxy for a remote port.\r\n\r\n    &lt;bean id=&quot;ourPortJaxProxyService&quot;\r\n    \tclass=&quot;org.springframework.remoting.jaxws.JaxWsPortProxyFactoryBean&quot;\r\n    \tp:serviceInterface=&quot;com.amir.OurServiceSoapPortWs&quot;\r\n    \tp:wsdlDocumentUrl=&quot;${END_POINT_BASE_URL}/OurService?wsdl&quot;\r\n    \tp:namespaceUri=&quot;http://amir.com/jaxws&quot; p:serviceName=&quot;OurService&quot;\r\n    \tp:portName=&quot;OurSoapPort&quot; /&gt;\r\n\r\n\r\nThe &quot;END_POINT_BASE_URL&quot; is an environment variable configured in &quot;setenv.sh&quot; of the Tomcat instance that hosts the web application. The content of the file is something like this:\r\n\r\n    export END_POINT_BASE_URL=&quot;http://localhost:9001/BusinessAppServices&quot;\r\n    #export END_POINT_BASE_URL=&quot;http://localhost:8765/BusinessAppServices&quot;\r\n\r\nThe missing &quot;;&quot; after each line caused the malformed URL and thus the bad response. That is, instead of &quot;BusinessAppServices/OurService?wsdl&quot; the URL had a CR before &quot;/&quot;. &quot;TCP/IP Monitor&quot; was quite handy while troubleshooting the problem.","title":"org.xml.sax.SAXParseException: Content is not allowed in prolog","body":"<p>We had the same problem recently and it turned out to be the case of a bad URL and consequently a standard 403 HTTP response (which obviously isn't the valid XML the client was looking for). I'm going to share the detail in case someone within the same context run into this problem:</p>\n\n<p>This was a Spring based web application in which a \"JaxWsPortProxyFactoryBean\" bean was configured to expose a proxy for a remote port.</p>\n\n<pre><code>&lt;bean id=\"ourPortJaxProxyService\"\n    class=\"org.springframework.remoting.jaxws.JaxWsPortProxyFactoryBean\"\n    p:serviceInterface=\"com.amir.OurServiceSoapPortWs\"\n    p:wsdlDocumentUrl=\"${END_POINT_BASE_URL}/OurService?wsdl\"\n    p:namespaceUri=\"http://amir.com/jaxws\" p:serviceName=\"OurService\"\n    p:portName=\"OurSoapPort\" /&gt;\n</code></pre>\n\n<p>The \"END_POINT_BASE_URL\" is an environment variable configured in \"setenv.sh\" of the Tomcat instance that hosts the web application. The content of the file is something like this:</p>\n\n<pre><code>export END_POINT_BASE_URL=\"http://localhost:9001/BusinessAppServices\"\n#export END_POINT_BASE_URL=\"http://localhost:8765/BusinessAppServices\"\n</code></pre>\n\n<p>The missing \";\" after each line caused the malformed URL and thus the bad response. That is, instead of \"BusinessAppServices/OurService?wsdl\" the URL had a CR before \"/\". \"TCP/IP Monitor\" was quite handy while troubleshooting the problem.</p>\n"},{"tags":[],"owner":{"account_id":3840672,"reputation":31,"user_id":3183857,"display_name":"Ralph"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1389398655,"creation_date":1389398655,"answer_id":21056728,"question_id":5138696,"body_markdown":"If all else fails, open the file in binary to make sure there are no funny characters [3 non printable characters at the beginning of the file that identify the file as utf-8] at the beginning of the file. We did this and found some. so we converted the file from utf-8 to ascii and it worked.  ","title":"org.xml.sax.SAXParseException: Content is not allowed in prolog","body":"<p>If all else fails, open the file in binary to make sure there are no funny characters [3 non printable characters at the beginning of the file that identify the file as utf-8] at the beginning of the file. We did this and found some. so we converted the file from utf-8 to ascii and it worked.  </p>\n"},{"tags":[],"owner":{"account_id":3087700,"reputation":1488,"user_id":2614539,"accept_rate":66,"display_name":"Dineshkumar"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1390817138,"creation_date":1390817138,"answer_id":21377967,"question_id":5138696,"body_markdown":"For the same issues, I have removed the following line,\r\n\r\n      File file = new File(&quot;c:\\\\file.xml&quot;);\r\n      InputStream inputStream= new FileInputStream(file);\r\n      Reader reader = new InputStreamReader(inputStream,&quot;UTF-8&quot;);\r\n      InputSource is = new InputSource(reader);\r\n      is.setEncoding(&quot;UTF-8&quot;);\r\n\r\nIt is working fine. Not so sure why that UTF-8 gives problem. To keep me in shock, it works fine for UTF-8 also.\r\n\r\nAm using *Windows-7* 32 bit and Netbeans IDE with Java *jdk1.6.0_13*. No idea how it works.","title":"org.xml.sax.SAXParseException: Content is not allowed in prolog","body":"<p>For the same issues, I have removed the following line,</p>\n\n<pre><code>  File file = new File(\"c:\\\\file.xml\");\n  InputStream inputStream= new FileInputStream(file);\n  Reader reader = new InputStreamReader(inputStream,\"UTF-8\");\n  InputSource is = new InputSource(reader);\n  is.setEncoding(\"UTF-8\");\n</code></pre>\n\n<p>It is working fine. Not so sure why that UTF-8 gives problem. To keep me in shock, it works fine for UTF-8 also.</p>\n\n<p>Am using <em>Windows-7</em> 32 bit and Netbeans IDE with Java *jdk1.6.0_13*. No idea how it works.</p>\n"},{"tags":[],"owner":{"account_id":3804667,"reputation":685,"user_id":3157408,"display_name":"Sahil J"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1397244582,"creation_date":1397244582,"answer_id":23021100,"question_id":5138696,"body_markdown":"As Mike Sokolov has already pointed it out, one of the possible reasons is presence of some character/s (such as a whitespace) before the &lt;?xml version=&quot;1.0&quot;...&gt; tag.\r\n\r\nIf your input XML is being read as a String (as opposed to byte array) then you\r\ncan use replace your input string with the below code to make sure that all &#39;un-necessary&#39;\r\ncharacters before the xml tag are wiped off.\r\n\r\n    inputXML=inputXML.substring(inputXML.indexOf(&quot;&lt;?xml&quot;));\r\n\r\nYou need to be sure that the input xml starts with the xml tag though.\r\n\r\n\r\n","title":"org.xml.sax.SAXParseException: Content is not allowed in prolog","body":"<p>As Mike Sokolov has already pointed it out, one of the possible reasons is presence of some character/s (such as a whitespace) before the  tag.</p>\n\n<p>If your input XML is being read as a String (as opposed to byte array) then you\ncan use replace your input string with the below code to make sure that all 'un-necessary'\ncharacters before the xml tag are wiped off.</p>\n\n<pre><code>inputXML=inputXML.substring(inputXML.indexOf(\"&lt;?xml\"));\n</code></pre>\n\n<p>You need to be sure that the input xml starts with the xml tag though.</p>\n"},{"tags":[],"owner":{"account_id":4818015,"reputation":21,"user_id":3889531,"display_name":"BitCollector"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1406672474,"creation_date":1406672474,"answer_id":25025948,"question_id":5138696,"body_markdown":"I followed the instructions found [here][1] and i got the same error.\r\n\r\nI tried several things to solve it (ie changing the encoding, typing the XML file rather than copy-pasting it ect) in Notepad and XML Notepad but nothing worked.\r\n \r\nThe problem got solved when I  edited and saved my XML file in Notepad++ (encoding --&gt; utf-8 without BOM)\r\n\r\n\r\n  [1]: http://www.mkyong.com/java/how-to-read-utf-8-xml-file-in-java-sax-parser/","title":"org.xml.sax.SAXParseException: Content is not allowed in prolog","body":"<p>I followed the instructions found <a href=\"http://www.mkyong.com/java/how-to-read-utf-8-xml-file-in-java-sax-parser/\" rel=\"nofollow\">here</a> and i got the same error.</p>\n\n<p>I tried several things to solve it (ie changing the encoding, typing the XML file rather than copy-pasting it ect) in Notepad and XML Notepad but nothing worked.</p>\n\n<p>The problem got solved when I  edited and saved my XML file in Notepad++ (encoding --> utf-8 without BOM)</p>\n"},{"tags":[],"owner":{"account_id":403268,"reputation":906,"user_id":770927,"accept_rate":40,"display_name":"zovits"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1416323379,"creation_date":1416323379,"answer_id":26997537,"question_id":5138696,"body_markdown":"In my case I got this error because the API I used could return the data either in XML or in JSON format. When I tested it using a browser, it defaulted to the XML format, but when I invoked the same call from a Java application, the API returned the JSON formatted response, that naturally triggered a parsing error.","title":"org.xml.sax.SAXParseException: Content is not allowed in prolog","body":"<p>In my case I got this error because the API I used could return the data either in XML or in JSON format. When I tested it using a browser, it defaulted to the XML format, but when I invoked the same call from a Java application, the API returned the JSON formatted response, that naturally triggered a parsing error.</p>\n"},{"tags":[],"owner":{"account_id":367423,"reputation":470,"user_id":713608,"accept_rate":50,"display_name":"Aditya Gaykar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1456163469,"creation_date":1456163469,"answer_id":35560475,"question_id":5138696,"body_markdown":"Even I had faced a similar problem. Reason was some garbage character at the beginning of the file. \r\n\r\nFix : Just open the file in a text editor(tested on Sublime text) remove any indent if any in the file and copy paste all the content of the file in a new file and save it. Thats it!. When I ran the new file it ran without any parsing errors. ","title":"org.xml.sax.SAXParseException: Content is not allowed in prolog","body":"<p>Even I had faced a similar problem. Reason was some garbage character at the beginning of the file. </p>\n\n<p>Fix : Just open the file in a text editor(tested on Sublime text) remove any indent if any in the file and copy paste all the content of the file in a new file and save it. Thats it!. When I ran the new file it ran without any parsing errors. </p>\n"},{"tags":[],"owner":{"account_id":4518109,"reputation":13,"user_id":3672281,"display_name":"RodH"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1459060085,"creation_date":1459060085,"answer_id":36244544,"question_id":5138696,"body_markdown":"I took code of Dineshkumar and modified to Validate my XML file correctly:\r\n\r\n&lt;!-- begin snippet: js hide: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    import org.apache.log4j.Logger;\r\n\r\n    public class Myclass{\r\n\r\n    private static final Logger LOGGER = Logger.getLogger(Myclass.class);\r\n\r\n    /**\r\n     * Validate XML file against Schemas XSD in pathEsquema directory\r\n     * @param pathEsquema directory that contains XSD Schemas to validate\r\n     * @param pathFileXML XML file to validate\r\n     * @throws BusinessException if it throws any Exception\r\n     */\r\n    public static void validarXML(String pathEsquema, String pathFileXML) \r\n    \tthrows BusinessException{\t\r\n    \tString W3C_XML_SCHEMA = &quot;http://www.w3.org/2001/XMLSchema&quot;;\r\n    \tString nameFileXSD = &quot;file.xsd&quot;;\r\n    \tString MY_SCHEMA1 = pathEsquema+nameFileXSD);\r\n    \tParserErrorHandler parserErrorHandler;\r\n    \ttry{\r\n    \t\tSchemaFactory schemaFactory = SchemaFactory.newInstance(W3C_XML_SCHEMA);\r\n    \t\t\r\n    \t\tSource [] source = { \r\n    \t\t\tnew StreamSource(new File(MY_SCHEMA1))\r\n    \t\t\t};\r\n    \t\tSchema schemaGrammar = schemaFactory.newSchema(source);\r\n\r\n    \t\tValidator schemaValidator = schemaGrammar.newValidator();\r\n    \t\tschemaValidator.setErrorHandler(\r\n    \t\t\tparserErrorHandler= new ParserErrorHandler());\r\n    \t\t\r\n    \t\t/** validate xml instance against the grammar. */\r\n    \t\tFile file = new File(pathFileXML);\r\n    \t\tInputStream isS= new FileInputStream(file);\r\n    \t\tReader reader = new InputStreamReader(isS,&quot;UTF-8&quot;);\r\n    \t\tschemaValidator.validate(new StreamSource(reader));\r\n    \t\t\r\n    \t\tif(parserErrorHandler.getErrorHandler().isEmpty()&amp;&amp; \r\n    \t\t\tparserErrorHandler.getFatalErrorHandler().isEmpty()){\r\n    \t\t\tif(!parserErrorHandler.getWarningHandler().isEmpty()){\r\n    \t\t\t\tLOGGER.info(\r\n    \t\t\t\tString.format(&quot;WARNING validate XML:[%s] Descripcion:[%s]&quot;,\r\n    \t\t\t\t\tpathFileXML,parserErrorHandler.getWarningHandler()));\r\n    \t\t\t}else{\r\n    \t\t\t\tLOGGER.info(\r\n    \t\t\t\tString.format(&quot;OK validate  XML:[%s]&quot;,\r\n    \t\t\t\t\tpathFileXML));\r\n    \t\t\t}\r\n    \t\t}else{\r\n    \t\t\tthrow new BusinessException(\r\n    \t\t\t\tString.format(&quot;Error validate  XML:[%s], FatalError:[%s], Error:[%s]&quot;,\r\n    \t\t\t\tpathFileXML,\r\n    \t\t\t\tparserErrorHandler.getFatalErrorHandler(),\r\n    \t\t\t\tparserErrorHandler.getErrorHandler()));\r\n    \t\t}\t\t\r\n    \t}\r\n    \tcatch(SAXParseException e){\r\n    \t\tthrow new BusinessException(String.format(&quot;Error validate XML:[%s], SAXParseException:[%s]&quot;,\r\n    \t\t\tpathFileXML,e.getMessage()),e);\r\n    \t}\r\n    \tcatch (SAXException e){\r\n    \t\tthrow new BusinessException(String.format(&quot;Error validate XML:[%s], SAXException:[%s]&quot;,\r\n    \t\t\tpathFileXML,e.getMessage()),e);\r\n    \t}\r\n    \tcatch (IOException e) {\r\n    \t\tthrow new BusinessException(String.format(&quot;Error validate XML:[%s], \r\n    \t\t\tIOException:[%s]&quot;,pathFileXML,e.getMessage()),e);\r\n    \t}\r\n    \t\r\n    }\r\n\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"org.xml.sax.SAXParseException: Content is not allowed in prolog","body":"<p>I took code of Dineshkumar and modified to Validate my XML file correctly:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>import org.apache.log4j.Logger;\r\n\r\npublic class Myclass{\r\n\r\nprivate static final Logger LOGGER = Logger.getLogger(Myclass.class);\r\n\r\n/**\r\n * Validate XML file against Schemas XSD in pathEsquema directory\r\n * @param pathEsquema directory that contains XSD Schemas to validate\r\n * @param pathFileXML XML file to validate\r\n * @throws BusinessException if it throws any Exception\r\n */\r\npublic static void validarXML(String pathEsquema, String pathFileXML) \r\n\tthrows BusinessException{\t\r\n\tString W3C_XML_SCHEMA = \"http://www.w3.org/2001/XMLSchema\";\r\n\tString nameFileXSD = \"file.xsd\";\r\n\tString MY_SCHEMA1 = pathEsquema+nameFileXSD);\r\n\tParserErrorHandler parserErrorHandler;\r\n\ttry{\r\n\t\tSchemaFactory schemaFactory = SchemaFactory.newInstance(W3C_XML_SCHEMA);\r\n\t\t\r\n\t\tSource [] source = { \r\n\t\t\tnew StreamSource(new File(MY_SCHEMA1))\r\n\t\t\t};\r\n\t\tSchema schemaGrammar = schemaFactory.newSchema(source);\r\n\r\n\t\tValidator schemaValidator = schemaGrammar.newValidator();\r\n\t\tschemaValidator.setErrorHandler(\r\n\t\t\tparserErrorHandler= new ParserErrorHandler());\r\n\t\t\r\n\t\t/** validate xml instance against the grammar. */\r\n\t\tFile file = new File(pathFileXML);\r\n\t\tInputStream isS= new FileInputStream(file);\r\n\t\tReader reader = new InputStreamReader(isS,\"UTF-8\");\r\n\t\tschemaValidator.validate(new StreamSource(reader));\r\n\t\t\r\n\t\tif(parserErrorHandler.getErrorHandler().isEmpty()&amp;&amp; \r\n\t\t\tparserErrorHandler.getFatalErrorHandler().isEmpty()){\r\n\t\t\tif(!parserErrorHandler.getWarningHandler().isEmpty()){\r\n\t\t\t\tLOGGER.info(\r\n\t\t\t\tString.format(\"WARNING validate XML:[%s] Descripcion:[%s]\",\r\n\t\t\t\t\tpathFileXML,parserErrorHandler.getWarningHandler()));\r\n\t\t\t}else{\r\n\t\t\t\tLOGGER.info(\r\n\t\t\t\tString.format(\"OK validate  XML:[%s]\",\r\n\t\t\t\t\tpathFileXML));\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tthrow new BusinessException(\r\n\t\t\t\tString.format(\"Error validate  XML:[%s], FatalError:[%s], Error:[%s]\",\r\n\t\t\t\tpathFileXML,\r\n\t\t\t\tparserErrorHandler.getFatalErrorHandler(),\r\n\t\t\t\tparserErrorHandler.getErrorHandler()));\r\n\t\t}\t\t\r\n\t}\r\n\tcatch(SAXParseException e){\r\n\t\tthrow new BusinessException(String.format(\"Error validate XML:[%s], SAXParseException:[%s]\",\r\n\t\t\tpathFileXML,e.getMessage()),e);\r\n\t}\r\n\tcatch (SAXException e){\r\n\t\tthrow new BusinessException(String.format(\"Error validate XML:[%s], SAXException:[%s]\",\r\n\t\t\tpathFileXML,e.getMessage()),e);\r\n\t}\r\n\tcatch (IOException e) {\r\n\t\tthrow new BusinessException(String.format(\"Error validate XML:[%s], \r\n\t\t\tIOException:[%s]\",pathFileXML,e.getMessage()),e);\r\n\t}\r\n\t\r\n}\r\n\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"tags":[],"owner":{"account_id":2101788,"reputation":307,"user_id":1869220,"display_name":"CA Martin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1463791012,"creation_date":1463611879,"answer_id":37311330,"question_id":5138696,"body_markdown":"For all those that get this error:\r\nWARNING: Catalina.start using conf/server.xml: Content is not allowed in prolog.\r\n\r\nNot very informative.. but what this actually means is that there is garbage in your conf/server.xml file.\r\n\r\nI have seen this exact error in other XML files.. this error can be caused by making changes with a text editor which introduces the garbage.\r\n\r\nThe way you can verify whether or not you have garbage in the file is to open it with a &quot;HEX Editor&quot; If you see any character before this string\r\n\r\n         &quot;&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&quot;\r\n\r\nlike this would be garbage\r\n\r\n         &quot;‰ŠŒ&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&quot;\r\n\r\nthat is your problem....\r\nThe Solution is to use a good HEX Editor.. One that will allow you to save files with differing types of encoding.. \r\n\r\nThen just save it as UTF-8.\r\nSome systems that use XML files may need it saved as UTF NO BOM \r\nWhich means with &quot;NO Byte Order Mark&quot;\r\n\r\nHope this helps someone out there!!","title":"org.xml.sax.SAXParseException: Content is not allowed in prolog","body":"<p>For all those that get this error:\nWARNING: Catalina.start using conf/server.xml: Content is not allowed in prolog.</p>\n\n<p>Not very informative.. but what this actually means is that there is garbage in your conf/server.xml file.</p>\n\n<p>I have seen this exact error in other XML files.. this error can be caused by making changes with a text editor which introduces the garbage.</p>\n\n<p>The way you can verify whether or not you have garbage in the file is to open it with a \"HEX Editor\" If you see any character before this string</p>\n\n<pre><code>     \"&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\"\n</code></pre>\n\n<p>like this would be garbage</p>\n\n<pre><code>     \"‰ŠŒ&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\"\n</code></pre>\n\n<p>that is your problem....\nThe Solution is to use a good HEX Editor.. One that will allow you to save files with differing types of encoding.. </p>\n\n<p>Then just save it as UTF-8.\nSome systems that use XML files may need it saved as UTF NO BOM \nWhich means with \"NO Byte Order Mark\"</p>\n\n<p>Hope this helps someone out there!!</p>\n"},{"tags":[],"owner":{"account_id":109492,"reputation":107225,"user_id":290085,"display_name":"kjhughes"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1510949496,"creation_date":1510949496,"answer_id":47358558,"question_id":5138696,"body_markdown":"Sometimes it&#39;s the code, not the XML\r\n---\r\n\r\n\r\nThe following code,\r\n\r\n    Document doc = dBuilder.parse(new InputSource(new StringReader(&quot;file.xml&quot;)));\r\n\r\nwill also result in this error,\r\n\r\n&gt; [Fatal Error] :1:1: Content is not allowed in prolog.org.xml.sax.SAXParseException; lineNumber: 1; columnNumber: 1; Content is not allowed in prolog.\r\n\r\nbecause it&#39;s attempting to parse the string literal, `&quot;file.xml&quot;` (not the contents of the `file.xml` file) and failing because `&quot;file.xml&quot;` as a string is not well-formed XML.\r\n\r\n**Fix: Remove `StringReader()`:**\r\n\r\n    Document doc = dBuilder.parse(new InputSource(&quot;file.xml&quot;));\r\n\r\nSimilarly, dirty buffer problems can leave residual junk ahead of the actual XML.  If you&#39;ve carefully checked your XML and are still getting this error, log the exact contents being passed to the parser; sometimes what&#39;s actually being (tried to be) parsed is surprising.","title":"org.xml.sax.SAXParseException: Content is not allowed in prolog","body":"<h2>Sometimes it's the code, not the XML</h2>\n\n<p>The following code,</p>\n\n<pre><code>Document doc = dBuilder.parse(new InputSource(new StringReader(\"file.xml\")));\n</code></pre>\n\n<p>will also result in this error,</p>\n\n<blockquote>\n  <p>[Fatal Error] :1:1: Content is not allowed in prolog.org.xml.sax.SAXParseException; lineNumber: 1; columnNumber: 1; Content is not allowed in prolog.</p>\n</blockquote>\n\n<p>because it's attempting to parse the string literal, <code>\"file.xml\"</code> (not the contents of the <code>file.xml</code> file) and failing because <code>\"file.xml\"</code> as a string is not well-formed XML.</p>\n\n<p><strong>Fix: Remove <code>StringReader()</code>:</strong></p>\n\n<pre><code>Document doc = dBuilder.parse(new InputSource(\"file.xml\"));\n</code></pre>\n\n<p>Similarly, dirty buffer problems can leave residual junk ahead of the actual XML.  If you've carefully checked your XML and are still getting this error, log the exact contents being passed to the parser; sometimes what's actually being (tried to be) parsed is surprising.</p>\n"},{"tags":[],"owner":{"account_id":10463908,"reputation":1211,"user_id":7785738,"display_name":"Artem Ptushkin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1514375304,"creation_date":1514373544,"answer_id":47991245,"question_id":5138696,"body_markdown":"I had the same issue with spring \r\n\r\n&gt; MarshallingMessageConverter\r\n\r\nand by pre-proccess code.\r\n\r\nMayby someone will need reason:\r\n**BytesMessage #readBytes - reading bytes..** and i forgot that reading is one direction operation.\r\nYou can not read twice.","title":"org.xml.sax.SAXParseException: Content is not allowed in prolog","body":"<p>I had the same issue with spring </p>\n\n<blockquote>\n  <p>MarshallingMessageConverter</p>\n</blockquote>\n\n<p>and by pre-proccess code.</p>\n\n<p>Mayby someone will need reason:\n<strong>BytesMessage #readBytes - reading bytes..</strong> and i forgot that reading is one direction operation.\nYou can not read twice.</p>\n"},{"tags":[],"owner":{"account_id":910640,"reputation":9353,"user_id":944593,"accept_rate":94,"display_name":"shareef"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1605153633,"creation_date":1517845821,"answer_id":48626347,"question_id":5138696,"body_markdown":"**What i have tried [Did not work]**\r\n\r\nIn my case the ```web.xml``` in my application had extra space. Even **after** i deleted ; it did not work!.\r\n\r\nI was playing with ```logging.properties``` and ```web.xml``` in my tomcat, but even after i reverted the error persists!.\r\n\r\n\r\n**Solution**\r\n\r\nTo be specific i tried do adding\r\n\r\n```org.apache.catalina.filters.ExpiresFilter.level = FINE```\r\n\r\n[Tomcat expire filter is not working correctly][2]\r\n\r\n[![extra space][1]][1]\r\n\r\n  [1]: https://i.stack.imgur.com/gToIO.png\r\n  [2]: https://stackoverflow.com/questions/17587878/tomcat-expiresfilter-not-working-correctly","title":"org.xml.sax.SAXParseException: Content is not allowed in prolog","body":"<p><strong>What i have tried [Did not work]</strong></p>\n<p>In my case the <code>web.xml</code> in my application had extra space. Even <strong>after</strong> i deleted ; it did not work!.</p>\n<p>I was playing with <code>logging.properties</code> and <code>web.xml</code> in my tomcat, but even after i reverted the error persists!.</p>\n<p><strong>Solution</strong></p>\n<p>To be specific i tried do adding</p>\n<p><code>org.apache.catalina.filters.ExpiresFilter.level = FINE</code></p>\n<p><a href=\"https://stackoverflow.com/questions/17587878/tomcat-expiresfilter-not-working-correctly\">Tomcat expire filter is not working correctly</a></p>\n<p><a href=\"https://i.stack.imgur.com/gToIO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gToIO.png\" alt=\"extra space\" /></a></p>\n"},{"tags":[],"owner":{"account_id":13646729,"reputation":1,"user_id":9845573,"display_name":"Giuseppe Milazzo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1527236198,"creation_date":1527236198,"answer_id":50524575,"question_id":5138696,"body_markdown":"Try with BOMInputStream in apache.commons.io:\r\n\r\n    public static &lt;T&gt; T getContent(Class&lt;T&gt; instance, SchemaType schemaType, InputStream stream) throws JAXBException, SAXException, IOException {\r\n\r\n        JAXBContext context = JAXBContext.newInstance(instance);\r\n        Unmarshaller unmarshaller = context.createUnmarshaller();\r\n        Reader reader = new InputStreamReader(new BOMInputStream(stream), &quot;UTF-8&quot;);\r\n\r\n        JAXBElement&lt;T&gt; entry = unmarshaller.unmarshal(new StreamSource(reader), instance);\r\n\r\n        return entry.getValue();\r\n    }","title":"org.xml.sax.SAXParseException: Content is not allowed in prolog","body":"<p>Try with BOMInputStream in apache.commons.io:</p>\n\n<pre><code>public static &lt;T&gt; T getContent(Class&lt;T&gt; instance, SchemaType schemaType, InputStream stream) throws JAXBException, SAXException, IOException {\n\n    JAXBContext context = JAXBContext.newInstance(instance);\n    Unmarshaller unmarshaller = context.createUnmarshaller();\n    Reader reader = new InputStreamReader(new BOMInputStream(stream), \"UTF-8\");\n\n    JAXBElement&lt;T&gt; entry = unmarshaller.unmarshal(new StreamSource(reader), instance);\n\n    return entry.getValue();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11962850,"reputation":3167,"user_id":9908801,"display_name":"Bibin Johny"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1535290786,"creation_date":1535290786,"answer_id":52026819,"question_id":5138696,"body_markdown":"First clean project, then rebuild project. I was also facing the same issue. Everything came alright after this. \r\n","title":"org.xml.sax.SAXParseException: Content is not allowed in prolog","body":"<p>First clean project, then rebuild project. I was also facing the same issue. Everything came alright after this. </p>\n"},{"tags":[],"owner":{"account_id":7661956,"reputation":800,"user_id":5806975,"display_name":"FabioStein"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1544184381,"creation_date":1544184381,"answer_id":53669217,"question_id":5138696,"body_markdown":"For me, a **Build-&gt;Clean** fixed everything!","title":"org.xml.sax.SAXParseException: Content is not allowed in prolog","body":"<p>For me, a <strong>Build->Clean</strong> fixed everything!</p>\n"},{"tags":[],"owner":{"account_id":3788825,"reputation":23829,"user_id":3145960,"accept_rate":100,"display_name":"Reaz Murshed"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1554333588,"creation_date":1554333588,"answer_id":55505656,"question_id":5138696,"body_markdown":"I was having the same problem while parsing the `info.plist` file in my mac. However, the problem was fixed using the following command which turned the file into an XML. \r\n\r\n    plutil -convert xml1 info.plist\r\n\r\nHope that helps someone. ","title":"org.xml.sax.SAXParseException: Content is not allowed in prolog","body":"<p>I was having the same problem while parsing the <code>info.plist</code> file in my mac. However, the problem was fixed using the following command which turned the file into an XML. </p>\n\n<pre><code>plutil -convert xml1 info.plist\n</code></pre>\n\n<p>Hope that helps someone. </p>\n"},{"tags":[],"owner":{"account_id":2653522,"reputation":1475,"user_id":2294676,"accept_rate":58,"display_name":"Lydia Ralph"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1557832443,"creation_date":1557832443,"answer_id":56129127,"question_id":5138696,"body_markdown":"To fix the BOM issue on Unix / Linux systems:\r\n\r\n1. Check if there&#39;s an unwanted BOM character:\r\n`hexdump -C myfile.xml | more`\r\nAn unwanted BOM character will appear at the start of the file as `...&lt;?xml&gt;`\r\n\r\n2. Alternatively, do `file myfile.xml`. A file with a BOM character will appear as: `myfile.xml: XML 1.0 document text, UTF-8 Unicode (with BOM) text`\r\n\r\n3. Fix a single file with: `tail -c +4 myfile.xml &gt; temp.xml &amp;&amp; mv temp.xml myfile.xml`\r\n\r\n4. Repeat 1 or 2 to check the file has been sanitised. Probably also sensible to do `view myfile.xml` to check contents have stayed. \r\n\r\nHere&#39;s a bash script to sanitise a whole folder of XML files:\r\n\r\n```\r\n#!/usr/bin/env bash\r\n\r\n# This script is to sanitise XML files to remove any BOM characters\r\n\r\nhas_bom() { head -c3 &quot;$1&quot; | LC_ALL=C grep -qe &#39;\\xef\\xbb\\xbf&#39;; }\r\n\r\nfor filename in *.xml ; do\r\n  if has_bom ${filename}; then\r\n    tail -c +4 ${filename} &gt; temp.xml\r\n    mv temp.xml ${filename}\r\n  fi\r\ndone\r\n\r\n```","title":"org.xml.sax.SAXParseException: Content is not allowed in prolog","body":"<p>To fix the BOM issue on Unix / Linux systems:</p>\n\n<ol>\n<li><p>Check if there's an unwanted BOM character:\n<code>hexdump -C myfile.xml | more</code>\nAn unwanted BOM character will appear at the start of the file as <code>...&lt;?xml&gt;</code></p></li>\n<li><p>Alternatively, do <code>file myfile.xml</code>. A file with a BOM character will appear as: <code>myfile.xml: XML 1.0 document text, UTF-8 Unicode (with BOM) text</code></p></li>\n<li><p>Fix a single file with: <code>tail -c +4 myfile.xml &gt; temp.xml &amp;&amp; mv temp.xml myfile.xml</code></p></li>\n<li><p>Repeat 1 or 2 to check the file has been sanitised. Probably also sensible to do <code>view myfile.xml</code> to check contents have stayed. </p></li>\n</ol>\n\n<p>Here's a bash script to sanitise a whole folder of XML files:</p>\n\n<pre><code>#!/usr/bin/env bash\n\n# This script is to sanitise XML files to remove any BOM characters\n\nhas_bom() { head -c3 \"$1\" | LC_ALL=C grep -qe '\\xef\\xbb\\xbf'; }\n\nfor filename in *.xml ; do\n  if has_bom ${filename}; then\n    tail -c +4 ${filename} &gt; temp.xml\n    mv temp.xml ${filename}\n  fi\ndone\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9215655,"reputation":8763,"user_id":6846888,"display_name":"&#194;ngelo Polotto"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1570548286,"creation_date":1570548286,"answer_id":58289465,"question_id":5138696,"body_markdown":"I had the same problem with some XML files, I solved reading the file with ANSI encoding (Windows-1252) and writing a file with UTF-8 encoding with a small script in Python. I tried use Notepad++ but I didn&#39;t have success:\r\n\r\n```python\r\nimport os\r\nimport sys\r\n\r\npath = os.path.dirname(__file__)\r\n\r\nfile_name = &#39;my_input_file.xml&#39;\r\n\r\nif __name__ == &quot;__main__&quot;:\r\n    with open(os.path.join(path, &#39;./&#39; + file_name), &#39;r&#39;, encoding=&#39;cp1252&#39;) as f1:\r\n        lines = f1.read()\r\n        f2 = open(os.path.join(path, &#39;./&#39; + &#39;my_output_file.xml&#39;), &#39;w&#39;, encoding=&#39;utf-8&#39;)\r\n        f2.write(lines)\r\n        f2.close()\r\n```","title":"org.xml.sax.SAXParseException: Content is not allowed in prolog","body":"<p>I had the same problem with some XML files, I solved reading the file with ANSI encoding (Windows-1252) and writing a file with UTF-8 encoding with a small script in Python. I tried use Notepad++ but I didn't have success:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import os\nimport sys\n\npath = os.path.dirname(__file__)\n\nfile_name = 'my_input_file.xml'\n\nif __name__ == \"__main__\":\n    with open(os.path.join(path, './' + file_name), 'r', encoding='cp1252') as f1:\n        lines = f1.read()\n        f2 = open(os.path.join(path, './' + 'my_output_file.xml'), 'w', encoding='utf-8')\n        f2.write(lines)\n        f2.close()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13089576,"reputation":468,"user_id":9457521,"display_name":"NotTooTechy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1573148391,"creation_date":1573148391,"answer_id":58754289,"question_id":5138696,"body_markdown":"I encountered similar problem with jenkins junit report plugin. It turns out you have to specify *.xml, even if you create junit xml in home directory. (So Test report XMLs: *.xml ..(or targeted_directory/*.xml).\r\n","title":"org.xml.sax.SAXParseException: Content is not allowed in prolog","body":"<p>I encountered similar problem with jenkins junit report plugin. It turns out you have to specify *.xml, even if you create junit xml in home directory. (So Test report XMLs: <em>.xml ..(or targeted_directory/</em>.xml).</p>\n"},{"tags":[],"owner":{"account_id":10747238,"reputation":1415,"user_id":7908045,"display_name":"Kairat Koibagarov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640867526,"creation_date":1640867526,"answer_id":70531734,"question_id":5138696,"body_markdown":"The reason was the spaces between the tags.\r\n\r\n    &#39; &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt; &lt;sign: ....&#39;\r\n\r\nDelete spaces.","title":"org.xml.sax.SAXParseException: Content is not allowed in prolog","body":"<p>The reason was the spaces between the tags.</p>\n<pre><code>' &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt; &lt;sign: ....'\n</code></pre>\n<p>Delete spaces.</p>\n"}],"owner":{"account_id":252951,"reputation":5547,"user_id":531321,"accept_rate":46,"display_name":"ag112"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":765219,"favorite_count":0,"down_vote_count":2,"up_vote_count":209,"accepted_answer_id":7697281,"answer_count":32,"score":207,"last_activity_date":1640867526,"creation_date":1298872492,"question_id":5138696,"body_markdown":"I have a Java based web service client connected to Java web service (implemented on the Axis1 framework). \r\n\r\nI am getting following exception in my log file:\r\n\r\n    Caused by: org.xml.sax.SAXParseException: Content is not allowed in prolog.\r\n    \tat org.apache.xerces.util.ErrorHandlerWrapper.createSAXParseException(Unknown Source)\r\n    \tat org.apache.xerces.util.ErrorHandlerWrapper.fatalError(Unknown Source)\r\n    \tat org.apache.xerces.impl.XMLErrorReporter.reportError(Unknown Source)\r\n    \tat org.apache.xerces.impl.XMLErrorReporter.reportError(Unknown Source)\r\n    \tat org.apache.xerces.impl.XMLScanner.reportFatalError(Unknown Source)\r\n    \tat org.apache.xerces.impl.XMLDocumentScannerImpl$PrologDispatcher.dispatch(Unknown Source)\r\n    \tat org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)\r\n    \tat org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)\r\n    \tat org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)\r\n    \tat org.apache.xerces.parsers.XMLParser.parse(Unknown Source)\r\n    \tat org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown Source)\r\n    \tat javax.xml.parsers.SAXParser.parse(Unknown Source)\r\n    \tat org.apache.axis.encoding.DeserializationContext.parse(DeserializationContext.java:227)\r\n    \tat org.apache.axis.SOAPPart.getAsSOAPEnvelope(SOAPPart.java:696)\r\n    \tat org.apache.axis.Message.getSOAPEnvelope(Message.java:435)\r\n    \tat org.apache.ws.axis.security.WSDoAllReceiver.invoke(WSDoAllReceiver.java:114)\r\n    \tat org.apache.axis.strategies.InvocationStrategy.visit(InvocationStrategy.java:32)\r\n    \tat org.apache.axis.SimpleChain.doVisiting(SimpleChain.java:118)\r\n    \tat org.apache.axis.SimpleChain.invoke(SimpleChain.java:83)\r\n    \tat org.apache.axis.client.AxisClient.invoke(AxisClient.java:198)\r\n    \tat org.apache.axis.client.Call.invokeEngine(Call.java:2784)\r\n    \tat org.apache.axis.client.Call.invoke(Call.java:2767)\r\n    \tat org.apache.axis.client.Call.invoke(Call.java:2443)\r\n    \tat org.apache.axis.client.Call.invoke(Call.java:2366)\r\n    \tat org.apache.axis.client.Call.invoke(Call.java:1812)\r\n\r\n","title":"org.xml.sax.SAXParseException: Content is not allowed in prolog","body":"<p>I have a Java based web service client connected to Java web service (implemented on the Axis1 framework). </p>\n\n<p>I am getting following exception in my log file:</p>\n\n<pre><code>Caused by: org.xml.sax.SAXParseException: Content is not allowed in prolog.\n    at org.apache.xerces.util.ErrorHandlerWrapper.createSAXParseException(Unknown Source)\n    at org.apache.xerces.util.ErrorHandlerWrapper.fatalError(Unknown Source)\n    at org.apache.xerces.impl.XMLErrorReporter.reportError(Unknown Source)\n    at org.apache.xerces.impl.XMLErrorReporter.reportError(Unknown Source)\n    at org.apache.xerces.impl.XMLScanner.reportFatalError(Unknown Source)\n    at org.apache.xerces.impl.XMLDocumentScannerImpl$PrologDispatcher.dispatch(Unknown Source)\n    at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)\n    at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)\n    at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)\n    at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)\n    at org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown Source)\n    at javax.xml.parsers.SAXParser.parse(Unknown Source)\n    at org.apache.axis.encoding.DeserializationContext.parse(DeserializationContext.java:227)\n    at org.apache.axis.SOAPPart.getAsSOAPEnvelope(SOAPPart.java:696)\n    at org.apache.axis.Message.getSOAPEnvelope(Message.java:435)\n    at org.apache.ws.axis.security.WSDoAllReceiver.invoke(WSDoAllReceiver.java:114)\n    at org.apache.axis.strategies.InvocationStrategy.visit(InvocationStrategy.java:32)\n    at org.apache.axis.SimpleChain.doVisiting(SimpleChain.java:118)\n    at org.apache.axis.SimpleChain.invoke(SimpleChain.java:83)\n    at org.apache.axis.client.AxisClient.invoke(AxisClient.java:198)\n    at org.apache.axis.client.Call.invokeEngine(Call.java:2784)\n    at org.apache.axis.client.Call.invoke(Call.java:2767)\n    at org.apache.axis.client.Call.invoke(Call.java:2443)\n    at org.apache.axis.client.Call.invoke(Call.java:2366)\n    at org.apache.axis.client.Call.invoke(Call.java:1812)\n</code></pre>\n"},{"tags":["java","macos"],"comments":[{"owner":{"account_id":3253096,"reputation":4401,"user_id":2987755,"accept_rate":50,"display_name":"dkb"},"score":1,"creation_date":1605621473,"post_id":64875451,"comment_id":114702058,"body_markdown":"may be softlink to `java` is changed after an upgrade, you can reinstall and use sdkmanager to manage multiple java versions on macosx.","body":"may be softlink to <code>java</code> is changed after an upgrade, you can reinstall and use sdkmanager to manage multiple java versions on macosx."},{"owner":{"account_id":11218816,"reputation":725,"user_id":8230537,"accept_rate":100,"display_name":"Rollsbean"},"score":0,"creation_date":1605666512,"post_id":64875451,"comment_id":114719377,"body_markdown":"@dkb mac os changed the softlink `$(/usr/libexec/java_home)` after upgraded, i re-install jdk and update $JAVA_JHOME， now it works.","body":"@dkb mac os changed the softlink <code>$(&#47;usr&#47;libexec&#47;java_home)</code> after upgraded, i re-install jdk and update $JAVA_JHOME， now it works."}],"answers":[{"tags":[],"owner":{"account_id":11218816,"reputation":725,"user_id":8230537,"accept_rate":100,"display_name":"Rollsbean"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1608630629,"creation_date":1605666461,"answer_id":64886141,"question_id":64875451,"body_markdown":"**Reason:** In `~/.bash_profile`, `JAVA_HOME= $(/usr/libexec/java_home)`, after upgraded, $(/usr/libexec/java_home) link to `/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/bin/java` which doesn&#39;t exist in my disk, so jdk is missing.\r\n\r\n**Solution:** I delete jdk in `/Library/Java/JavaVirtualMachines` and reinstall jdk8, and then set `JAVA_HOME` as:\r\n\r\n```/Library/Java/JavaVirtualMachines/jdk1.8.0_271.jdk/Contents/Home```\r\n\r\ninstead of soft link and `source ~/.bash_profile` to let it work.\r\n\r\nMy full settings:\r\n```\r\nkevinMacBook-Pro:bin kevin$ cat ~/.bash_profile\r\nexport M2_HOME=/usr/local/apache-maven-3.6.3\r\n#Mac OSX 10.5 or later version need this configure\r\n#export JAVA_HOME=$(/usr/libexec/java_home)\r\n#Mac 11 need this configure\r\nexport JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_271.jdk/Contents/Home\r\nexport MySQL_HOME=/usr/local/mysql\r\n```\r\n\r\nNow, jdk works, after mac os upgraded, it indeed update the soft link of `$(/usr/libexec/java_home)` and link to a not existed link, so i think you don&#39;t need to delete your jdk, just **update env variables** and **re-open terminal** to check if jdk reset correctly.","title":"Java works not well after upgrage Mac OS to Big Sur(v11.0.1)","body":"<p><strong>Reason:</strong> In <code>~/.bash_profile</code>, <code>JAVA_HOME= $(/usr/libexec/java_home)</code>, after upgraded, $(/usr/libexec/java_home) link to <code>/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/bin/java</code> which doesn't exist in my disk, so jdk is missing.</p>\n<p><strong>Solution:</strong> I delete jdk in <code>/Library/Java/JavaVirtualMachines</code> and reinstall jdk8, and then set <code>JAVA_HOME</code> as:</p>\n<p><code>/Library/Java/JavaVirtualMachines/jdk1.8.0_271.jdk/Contents/Home</code></p>\n<p>instead of soft link and <code>source ~/.bash_profile</code> to let it work.</p>\n<p>My full settings:</p>\n<pre><code>kevinMacBook-Pro:bin kevin$ cat ~/.bash_profile\nexport M2_HOME=/usr/local/apache-maven-3.6.3\n#Mac OSX 10.5 or later version need this configure\n#export JAVA_HOME=$(/usr/libexec/java_home)\n#Mac 11 need this configure\nexport JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_271.jdk/Contents/Home\nexport MySQL_HOME=/usr/local/mysql\n</code></pre>\n<p>Now, jdk works, after mac os upgraded, it indeed update the soft link of <code>$(/usr/libexec/java_home)</code> and link to a not existed link, so i think you don't need to delete your jdk, just <strong>update env variables</strong> and <strong>re-open terminal</strong> to check if jdk reset correctly.</p>\n"},{"tags":[],"owner":{"account_id":4756722,"reputation":467,"user_id":3845304,"display_name":"Martin Jan&#237;ček"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1609768230,"creation_date":1609159686,"answer_id":65477873,"question_id":64875451,"body_markdown":"Find you JDK location (mine was `/Library/Java/JavaVirtualMachines/jdk1.8.0_162.jdk/Contents/Home`).\r\n\r\n1. In terminal `vim ~/.bash_profile` (resp. edit the file in any way you&#39;re used to)\r\n2. Add a line exporting your JDK location (in my case it was `export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_162.jdk/Contents/Home`)\r\n3. In terminal `source ~/.bash_profile`\r\n4. In terminal `echo $JAVA_HOME` to make sure the environment variable is set properly","title":"Java works not well after upgrage Mac OS to Big Sur(v11.0.1)","body":"<p>Find you JDK location (mine was <code>/Library/Java/JavaVirtualMachines/jdk1.8.0_162.jdk/Contents/Home</code>).</p>\n<ol>\n<li>In terminal <code>vim ~/.bash_profile</code> (resp. edit the file in any way you're used to)</li>\n<li>Add a line exporting your JDK location (in my case it was <code>export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_162.jdk/Contents/Home</code>)</li>\n<li>In terminal <code>source ~/.bash_profile</code></li>\n<li>In terminal <code>echo $JAVA_HOME</code> to make sure the environment variable is set properly</li>\n</ol>\n"}],"owner":{"account_id":11218816,"reputation":725,"user_id":8230537,"accept_rate":100,"display_name":"Rollsbean"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5719,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":64886141,"answer_count":2,"score":2,"last_activity_date":1640866831,"creation_date":1605616736,"question_id":64875451,"body_markdown":"**Background:**\r\n\r\nI use Macbook pro to develop java app, it works well. While, after i upgraded mac os from 10.x to the latest version `Big Sur`, `mvn clean package` threw below exception:\r\n\r\n```\r\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.3.2:compile (default-compile) on project dq-common: Compilation failure\r\n[ERROR] Unable to locate the Javac Compiler in:\r\n[ERROR]   /Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/../lib/tools.jar\r\n[ERROR] Please ensure you are using JDK 1.4 or above and\r\n[ERROR] not a JRE (the com.sun.tools.javac.Main class is required).\r\n[ERROR] In most cases you can change the location of your Java\r\n[ERROR] installation by setting the JAVA_HOME environment variable.\r\n```\r\n\r\n`java -version`:\r\n\r\n```\r\njingxingdeMacBook-Pro:~ kevin$ java -version\r\njava version &quot;1.8.0_271&quot;\r\nJava(TM) SE Runtime Environment (build 1.8.0_271-b09)\r\nJava HotSpot(TM) 64-Bit Server VM (build 25.271-b09, mixed mode)\r\njingxingdeMacBook-Pro:dt-center-valid-4.0 kevin$ \r\n```\r\n`which java` was changed after upgraded:\r\n\r\nbefore:\r\n```\r\ningxingdeMacBook-Pro:bin kevin$ which java\r\n/Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home/bin/java\r\n```\r\n\r\nnow:\r\n```\r\njingxingdeMacBook-Pro:~ kevin$ which java\r\n/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/bin/java\r\n```\r\n\r\n`cat ~/.bash_profile`:\r\n\r\n```\r\njingxingdeMacBook-Pro:~ kevin$ cat ~/.bash_profile\r\nexport M2_HOME=/usr/local/apache-maven-3.6.3\r\n#Mac OSX 10.5 or later version need this configure\r\nexport JAVA_HOME=$(/usr/libexec/java_home)\r\n#export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home\r\nexport MySQL_HOME=/usr/local/mysql\r\nexport CLASSPATH=$JAVA_HOME/lib/tools.jar:$JAVA_HOME/lib/dt.jar:.\r\nexport HADOOP_HOME=/Users/kevin/Desktop/Developments/Software/hadoop-3.3.0\r\nPATH=$M2_HOME/bin:$JAVA_HOME/bin:$MySQL_HOME/bin:$HADOOP_HOME/bin:$PATH:.\r\nexport PATH\r\n```\r\n\r\n**Question:**\r\n\r\nWhy `which java` output was changed after i upgraded Mac os, how to fix it.\r\n","title":"Java works not well after upgrage Mac OS to Big Sur(v11.0.1)","body":"<p><strong>Background:</strong></p>\n<p>I use Macbook pro to develop java app, it works well. While, after i upgraded mac os from 10.x to the latest version <code>Big Sur</code>, <code>mvn clean package</code> threw below exception:</p>\n<pre><code>[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.3.2:compile (default-compile) on project dq-common: Compilation failure\n[ERROR] Unable to locate the Javac Compiler in:\n[ERROR]   /Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/../lib/tools.jar\n[ERROR] Please ensure you are using JDK 1.4 or above and\n[ERROR] not a JRE (the com.sun.tools.javac.Main class is required).\n[ERROR] In most cases you can change the location of your Java\n[ERROR] installation by setting the JAVA_HOME environment variable.\n</code></pre>\n<p><code>java -version</code>:</p>\n<pre><code>jingxingdeMacBook-Pro:~ kevin$ java -version\njava version &quot;1.8.0_271&quot;\nJava(TM) SE Runtime Environment (build 1.8.0_271-b09)\nJava HotSpot(TM) 64-Bit Server VM (build 25.271-b09, mixed mode)\njingxingdeMacBook-Pro:dt-center-valid-4.0 kevin$ \n</code></pre>\n<p><code>which java</code> was changed after upgraded:</p>\n<p>before:</p>\n<pre><code>ingxingdeMacBook-Pro:bin kevin$ which java\n/Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home/bin/java\n</code></pre>\n<p>now:</p>\n<pre><code>jingxingdeMacBook-Pro:~ kevin$ which java\n/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/bin/java\n</code></pre>\n<p><code>cat ~/.bash_profile</code>:</p>\n<pre><code>jingxingdeMacBook-Pro:~ kevin$ cat ~/.bash_profile\nexport M2_HOME=/usr/local/apache-maven-3.6.3\n#Mac OSX 10.5 or later version need this configure\nexport JAVA_HOME=$(/usr/libexec/java_home)\n#export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home\nexport MySQL_HOME=/usr/local/mysql\nexport CLASSPATH=$JAVA_HOME/lib/tools.jar:$JAVA_HOME/lib/dt.jar:.\nexport HADOOP_HOME=/Users/kevin/Desktop/Developments/Software/hadoop-3.3.0\nPATH=$M2_HOME/bin:$JAVA_HOME/bin:$MySQL_HOME/bin:$HADOOP_HOME/bin:$PATH:.\nexport PATH\n</code></pre>\n<p><strong>Question:</strong></p>\n<p>Why <code>which java</code> output was changed after i upgraded Mac os, how to fix it.</p>\n"},{"tags":["java","double","zero","trailing"],"comments":[{"owner":{"account_id":2677230,"reputation":329,"user_id":2313338,"display_name":"tommoyang"},"score":11,"creation_date":1401847676,"post_id":14204905,"comment_id":37039151,"body_markdown":"Note: Unlike the top answer in the linked question, all of these answers rely on an expected input of only one decimal place. Everything longer than one decimal place will be rounded, which may not be desired behaviour.","body":"Note: Unlike the top answer in the linked question, all of these answers rely on an expected input of only one decimal place. Everything longer than one decimal place will be rounded, which may not be desired behaviour."},{"owner":{"account_id":117315,"reputation":3877,"user_id":307295,"display_name":"mvmn"},"score":1,"creation_date":1547826907,"post_id":14204905,"comment_id":95338900,"body_markdown":"This is ugly as hell but it works: String.format(doubleVal).replaceAll(&quot;\\\\.0+$&quot;, &quot;&quot;);","body":"This is ugly as hell but it works: String.format(doubleVal).replaceAll(&quot;\\\\.0+$&quot;, &quot;&quot;);"},{"owner":{"account_id":117315,"reputation":3877,"user_id":307295,"display_name":"mvmn"},"score":4,"creation_date":1547987914,"post_id":14204905,"comment_id":95374978,"body_markdown":"P.S. Ended up using this: DecimalFormat(&quot;#.################&quot;).format(doubleVal); // This ensures no trailing zeroes and no separator if fraction part is 0 (there&#39;s a special method setDecimalSeparatorAlwaysShown(false) for that, but it seems to be already disabled by default). But will produce up to 16 digits of fractional part (and you can put more # there if you think 16 is not enough).","body":"P.S. Ended up using this: DecimalFormat(&quot;#.################&quot;).format(doubleVal); // This ensures no trailing zeroes and no separator if fraction part is 0 (there&#39;s a special method setDecimalSeparatorAlwaysShown(false) for that, but it seems to be already disabled by default). But will produce up to 16 digits of fractional part (and you can put more # there if you think 16 is not enough)."}],"answers":[{"tags":[],"owner":{"account_id":1977055,"reputation":952,"user_id":1774618,"display_name":"dashrb"},"down_vote_count":12,"up_vote_count":13,"is_accepted":false,"score":1,"last_activity_date":1357596577,"creation_date":1357596577,"answer_id":14204929,"question_id":14204905,"body_markdown":"Use a DecimalFormat object with a format string of &quot;0.#&quot;.\r\n","title":"How to remove trailing zeros from a double","body":"<p>Use a DecimalFormat object with a format string of \"0.#\".</p>\n"},{"tags":[],"owner":{"account_id":130837,"reputation":5830,"user_id":330396,"accept_rate":78,"display_name":"soniccool"},"down_vote_count":42,"up_vote_count":49,"is_accepted":true,"score":7,"last_activity_date":1393230620,"creation_date":1357596697,"answer_id":14204962,"question_id":14204905,"body_markdown":"Use [DecimalFormat][1]\r\n\r\n      double answer = 5.0;\r\n       DecimalFormat df = new DecimalFormat(&quot;###.#&quot;);\r\n      System.out.println(df.format(answer));\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/text/DecimalFormat.html","title":"How to remove trailing zeros from a double","body":"<p>Use <a href=\"http://docs.oracle.com/javase/7/docs/api/java/text/DecimalFormat.html\" rel=\"nofollow noreferrer\">DecimalFormat</a></p>\n\n<pre><code>  double answer = 5.0;\n   DecimalFormat df = new DecimalFormat(\"###.#\");\n  System.out.println(df.format(answer));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2156100,"reputation":11279,"user_id":1911306,"accept_rate":83,"display_name":"Marcin Szymczak"},"down_vote_count":14,"up_vote_count":124,"is_accepted":false,"score":110,"last_activity_date":1375123930,"creation_date":1357596994,"answer_id":14205029,"question_id":14204905,"body_markdown":"You should use `DecimalFormat(&quot;0.#&quot;)`\r\n\r\n\r\n----------\r\n\r\nFor `4.3000`\r\n    \r\n    Double price = 4.3000;\r\n    DecimalFormat format = new DecimalFormat(&quot;0.#&quot;);\r\n    System.out.println(format.format(price));\r\n\r\noutput is:\r\n\r\n    4.3\r\n\r\n\r\n----------\r\n\r\n\r\nIn case of 5.000 we have \r\n\r\n    Double price = 5.000;\r\n    DecimalFormat format = new DecimalFormat(&quot;0.#&quot;);\r\n    System.out.println(format.format(price));\r\n\r\nAnd the output is:\r\n\r\n    5","title":"How to remove trailing zeros from a double","body":"<p>You should use <code>DecimalFormat(\"0.#\")</code></p>\n\n<hr>\n\n<p>For <code>4.3000</code></p>\n\n<pre><code>Double price = 4.3000;\nDecimalFormat format = new DecimalFormat(\"0.#\");\nSystem.out.println(format.format(price));\n</code></pre>\n\n<p>output is:</p>\n\n<pre><code>4.3\n</code></pre>\n\n<hr>\n\n<p>In case of 5.000 we have </p>\n\n<pre><code>Double price = 5.000;\nDecimalFormat format = new DecimalFormat(\"0.#\");\nSystem.out.println(format.format(price));\n</code></pre>\n\n<p>And the output is:</p>\n\n<pre><code>5\n</code></pre>\n"}],"owner":{"account_id":2052361,"reputation":845,"user_id":1831062,"display_name":"Wrath"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":161324,"favorite_count":0,"down_vote_count":1,"up_vote_count":79,"closed_date":1382371818,"accepted_answer_id":14204962,"answer_count":3,"score":78,"last_activity_date":1640866571,"creation_date":1357596491,"question_id":14204905,"body_markdown":"For example I need `5.0` to become `5`, or `4.3000` to become `4.3`.","title":"How to remove trailing zeros from a double","body":"<p>For example I need <code>5.0</code> to become <code>5</code>, or <code>4.3000</code> to become <code>4.3</code>.</p>\n"},{"tags":["java","android","smartcard","apdu"],"answers":[{"tags":[],"owner":{"account_id":4284561,"reputation":85,"user_id":3502808,"display_name":"kmno"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1538900931,"creation_date":1538900931,"answer_id":52686752,"question_id":52676530,"body_markdown":"I found the solution.\r\nevery apdu command needs to transmit step by step, for example:\r\n\r\n**select applet &gt; check pin verify &gt; get card registration info**\r\n\r\n&quot;before run any command on smartcard, i need to run select applet first!&quot;","title":"Smartcard verify pin apdu command problem in android","body":"<p>I found the solution.\nevery apdu command needs to transmit step by step, for example:</p>\n\n<p><strong>select applet > check pin verify > get card registration info</strong></p>\n\n<p>\"before run any command on smartcard, i need to run select applet first!\"</p>\n"},{"tags":[],"owner":{"account_id":22002616,"reputation":1,"user_id":16274129,"display_name":"uummuuttss"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640865643,"creation_date":1640865643,"answer_id":70531365,"question_id":52676530,"body_markdown":"You should send this APDU command to verify your pin:\r\n\r\n    00 20 00 00 04 38 30 31 32 instead of 00 20 00 00 02 80 12\r\n    \r\n    04 =&gt; 4 bytes\r\n\r\n    38 =&gt; Hex of integer value of 8\r\n    30 =&gt; Hex of integer value of 0\r\n    31 =&gt; Hex of integer value of 1\r\n    32 =&gt; Hex of integer value of 2\r\n    \r\n    and of course result should be 9000\r\n\r\n","title":"Smartcard verify pin apdu command problem in android","body":"<p>You should send this APDU command to verify your pin:</p>\n<pre><code>00 20 00 00 04 38 30 31 32 instead of 00 20 00 00 02 80 12\n\n04 =&gt; 4 bytes\n\n38 =&gt; Hex of integer value of 8\n30 =&gt; Hex of integer value of 0\n31 =&gt; Hex of integer value of 1\n32 =&gt; Hex of integer value of 2\n\nand of course result should be 9000\n</code></pre>\n"}],"owner":{"account_id":4284561,"reputation":85,"user_id":3502808,"display_name":"kmno"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":668,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":52686752,"answer_count":2,"score":3,"last_activity_date":1640866545,"creation_date":1538809310,"question_id":52676530,"body_markdown":"I&#39;m working on an android pos device. when I inserted the smart card and run the following command it gives me **9000** response and works fine :\r\n\r\n**00 A4 00 00 08 610433BE00010001** \r\n\r\n*CLA/INS/P1/P2/Lc/DATA*\r\n\r\nbut when I want to send pin verification command :\r\n\r\n**00 20 00 00 02 80 12**\r\n(the pin is 8012 for example)\r\n\r\nIt give me **6D00** error, which means the command not supported.\r\n\r\nwhat&#39;s wrong with this command?\r\n\r\n","title":"Smartcard verify pin apdu command problem in android","body":"<p>I'm working on an android pos device. when I inserted the smart card and run the following command it gives me <strong>9000</strong> response and works fine :</p>\n<p><strong>00 A4 00 00 08 610433BE00010001</strong></p>\n<p><em>CLA/INS/P1/P2/Lc/DATA</em></p>\n<p>but when I want to send pin verification command :</p>\n<p><strong>00 20 00 00 02 80 12</strong>\n(the pin is 8012 for example)</p>\n<p>It give me <strong>6D00</strong> error, which means the command not supported.</p>\n<p>what's wrong with this command?</p>\n"},{"tags":["java","string","spring-boot","double","number-formatting"],"comments":[{"owner":{"account_id":19279659,"reputation":332,"user_id":14091920,"display_name":"Fran Na Jaya"},"score":0,"creation_date":1640683151,"post_id":70503601,"comment_id":124631386,"body_markdown":"I think no bro @Torben, my question base value is double so I need to convert the value to String and do the formatting at the same time","body":"I think no bro @Torben, my question base value is double so I need to convert the value to String and do the formatting at the same time"},{"owner":{"account_id":1041463,"reputation":3845,"user_id":1047418,"display_name":"Torben"},"score":0,"creation_date":1640690266,"post_id":70503601,"comment_id":124633424,"body_markdown":"You do not understand your problem correctly, Fran. Your problem is not about double values. It&#39;s about &quot;string representation of double values.&quot; Until you understand the difference between those, you probably should try to maintain a repectful attitude to those helping you and refrain from incorrectly referring to them as &quot;bros&quot;.","body":"You do not understand your problem correctly, Fran. Your problem is not about double values. It&#39;s about &quot;string representation of double values.&quot; Until you understand the difference between those, you probably should try to maintain a repectful attitude to those helping you and refrain from incorrectly referring to them as &quot;bros&quot;."},{"owner":{"account_id":19279659,"reputation":332,"user_id":14091920,"display_name":"Fran Na Jaya"},"score":0,"creation_date":1640690768,"post_id":70503601,"comment_id":124633564,"body_markdown":"I appologize for using terms &#39;bro&#39;. And thanks a lot @Torben for the critics. I accept your criticism and suggestions. But still I am on my opinion that the root problem of my question and the question you suggest a little bit different. The question you directing me to is about how to reformat a String(which may / always contains a numeric value in decimals or any other) to remove the trailing zero value in it. Thanks a lot. anyone seen this and think I am wrong please notify me too, and I might take it down then. I doesn&#39;t want to spread any miss understanding and bad intention. Sorry","body":"I appologize for using terms &#39;bro&#39;. And thanks a lot @Torben for the critics. I accept your criticism and suggestions. But still I am on my opinion that the root problem of my question and the question you suggest a little bit different. The question you directing me to is about how to reformat a String(which may / always contains a numeric value in decimals or any other) to remove the trailing zero value in it. Thanks a lot. anyone seen this and think I am wrong please notify me too, and I might take it down then. I doesn&#39;t want to spread any miss understanding and bad intention. Sorry"},{"owner":{"account_id":3619499,"reputation":5613,"user_id":3018627,"display_name":"Subarata Talukder"},"score":0,"creation_date":1672118791,"post_id":70503601,"comment_id":132223466,"body_markdown":"Please check your answer: https://stackoverflow.com/questions/14984664/remove-trailing-zero-in-java/74925939#74925939","body":"Please check your answer: <a href=\"https://stackoverflow.com/questions/14984664/remove-trailing-zero-in-java/74925939#74925939\" title=\"remove trailing zero in java\">stackoverflow.com/questions/14984664/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":14369789,"reputation":69,"user_id":10379859,"display_name":"Nandha Seshan"},"down_vote_count":1,"up_vote_count":2,"is_accepted":true,"score":1,"last_activity_date":1640675395,"creation_date":1640675395,"answer_id":70503818,"question_id":70503601,"body_markdown":"Hope this helps:\r\n\r\n    public static String format(double val) {\r\n         if(val == (long)val) \r\n              return String.format(&quot;%d&quot;, (long) val);\r\n         else\r\n              return String.format(&quot;%s&quot;, val);\r\n    }\r\n\r\nInput:\r\n\r\n    1. 101.00000\r\n    2. 102.02000\r\nOutput:\r\n\r\n    1. 101\r\n    2. 102.02","title":"How to convert double to String and remove all trailing zero behind the point value?","body":"<p>Hope this helps:</p>\n<pre><code>public static String format(double val) {\n     if(val == (long)val) \n          return String.format(&quot;%d&quot;, (long) val);\n     else\n          return String.format(&quot;%s&quot;, val);\n}\n</code></pre>\n<p>Input:</p>\n<pre><code>1. 101.00000\n2. 102.02000\n</code></pre>\n<p>Output:</p>\n<pre><code>1. 101\n2. 102.02\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22670282,"reputation":1,"user_id":16842128,"display_name":"rorsdev"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1640680185,"creation_date":1640680185,"answer_id":70504504,"question_id":70503601,"body_markdown":"**CONVERT DOUBLE TO STRING**\r\n\r\nIn Java, if you want to convert a value type to another, you should see this &#39;another type&#39; class and try to find a converting method. \r\n\r\nI this case you want to convert a Double type to String. String class has a method called `String.valueOf(double d)` that changes the number value to String. It also can convert other number types to String thanks to the overload properties.\r\n\r\n\r\n----------\r\n\r\n**REMOVING UNNECESSARY ZERO**\r\n\r\nOnce you have the String values, use this code with each one to remove the unnecessary zeros.\r\n\r\n    s = s.indexOf(&quot;.&quot;) &lt; 0 ? s : s.replaceAll(&quot;0*$&quot;, &quot;&quot;).replaceAll(&quot;\\\\.$&quot;, &quot;&quot;);\r\n\r\n\r\n----------\r\n\r\n\r\nIn your case:\r\n\r\n    Double x = 101.00000;\r\n    Double y = 102.02000;\r\n    Double z = 103.20000;\r\n    Double k = 104.30020;\r\n    \r\n    String l = String.valueOf(x);\r\n    String m = String.valueOf(y);\r\n    String n = String.valueOf(z);\r\n    String o = String.valueOf(k);\r\n    \r\n    l = l.indexOf(&quot;.&quot;) &lt; 0 ? l : l.replaceAll(&quot;0*$&quot;, &quot;&quot;).replaceAll(&quot;\\\\.$&quot;, &quot;&quot;);\r\n    m = m.indexOf(&quot;.&quot;) &lt; 0 ? m : m.replaceAll(&quot;0*$&quot;, &quot;&quot;).replaceAll(&quot;\\\\.$&quot;, &quot;&quot;);\r\n    n = n.indexOf(&quot;.&quot;) &lt; 0 ? n : n.replaceAll(&quot;0*$&quot;, &quot;&quot;).replaceAll(&quot;\\\\.$&quot;, &quot;&quot;);\r\n    o = o.indexOf(&quot;.&quot;) &lt; 0 ? o : o.replaceAll(&quot;0*$&quot;, &quot;&quot;).replaceAll(&quot;\\\\.$&quot;, &quot;&quot;);\r\n\r\nOutput:\r\n\r\n - 101\r\n - 102.02\r\n - 103.2\r\n - 104.3002\r\n\r\n","title":"How to convert double to String and remove all trailing zero behind the point value?","body":"<p><strong>CONVERT DOUBLE TO STRING</strong></p>\n<p>In Java, if you want to convert a value type to another, you should see this 'another type' class and try to find a converting method.</p>\n<p>I this case you want to convert a Double type to String. String class has a method called <code>String.valueOf(double d)</code> that changes the number value to String. It also can convert other number types to String thanks to the overload properties.</p>\n<hr />\n<p><strong>REMOVING UNNECESSARY ZERO</strong></p>\n<p>Once you have the String values, use this code with each one to remove the unnecessary zeros.</p>\n<pre><code>s = s.indexOf(&quot;.&quot;) &lt; 0 ? s : s.replaceAll(&quot;0*$&quot;, &quot;&quot;).replaceAll(&quot;\\\\.$&quot;, &quot;&quot;);\n</code></pre>\n<hr />\n<p>In your case:</p>\n<pre><code>Double x = 101.00000;\nDouble y = 102.02000;\nDouble z = 103.20000;\nDouble k = 104.30020;\n\nString l = String.valueOf(x);\nString m = String.valueOf(y);\nString n = String.valueOf(z);\nString o = String.valueOf(k);\n\nl = l.indexOf(&quot;.&quot;) &lt; 0 ? l : l.replaceAll(&quot;0*$&quot;, &quot;&quot;).replaceAll(&quot;\\\\.$&quot;, &quot;&quot;);\nm = m.indexOf(&quot;.&quot;) &lt; 0 ? m : m.replaceAll(&quot;0*$&quot;, &quot;&quot;).replaceAll(&quot;\\\\.$&quot;, &quot;&quot;);\nn = n.indexOf(&quot;.&quot;) &lt; 0 ? n : n.replaceAll(&quot;0*$&quot;, &quot;&quot;).replaceAll(&quot;\\\\.$&quot;, &quot;&quot;);\no = o.indexOf(&quot;.&quot;) &lt; 0 ? o : o.replaceAll(&quot;0*$&quot;, &quot;&quot;).replaceAll(&quot;\\\\.$&quot;, &quot;&quot;);\n</code></pre>\n<p>Output:</p>\n<ul>\n<li>101</li>\n<li>102.02</li>\n<li>103.2</li>\n<li>104.3002</li>\n</ul>\n"}],"owner":{"account_id":19279659,"reputation":332,"user_id":14091920,"display_name":"Fran Na Jaya"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":802,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1640866559,"accepted_answer_id":70503818,"answer_count":2,"score":0,"last_activity_date":1640866532,"creation_date":1640673757,"question_id":70503601,"body_markdown":"I have looking for the solution around and doing a little workaround here, but can not wrap up all to meet my expectations. For example, I have double values as below\r\n```\r\ndouble x = 101.00000\r\ndouble y = 102.02000\r\ndouble z = 103.20000\r\ndouble k = 104.30020\r\n```\r\n\r\nI want all the value to become String with the smallest number of decimal they have to show. Expected result\r\n```\r\nString l = &quot;101&quot;\r\nString m = &quot;102.02&quot;\r\nString n = &quot;103.2&quot;\r\nString o = &quot;104.3002&quot;\r\n// and the l = formatted x, m = formatted y, n = formatted z, o = formatted k\r\n```\r\n\r\nCan this be achieved in any way?\r\n\r\n(Note: someone have suggest my question may duplicate with remove trailing zero in java, but I suggest it&#39;s different because in my question the base value is double not String)","title":"How to convert double to String and remove all trailing zero behind the point value?","body":"<p>I have looking for the solution around and doing a little workaround here, but can not wrap up all to meet my expectations. For example, I have double values as below</p>\n<pre><code>double x = 101.00000\ndouble y = 102.02000\ndouble z = 103.20000\ndouble k = 104.30020\n</code></pre>\n<p>I want all the value to become String with the smallest number of decimal they have to show. Expected result</p>\n<pre><code>String l = &quot;101&quot;\nString m = &quot;102.02&quot;\nString n = &quot;103.2&quot;\nString o = &quot;104.3002&quot;\n// and the l = formatted x, m = formatted y, n = formatted z, o = formatted k\n</code></pre>\n<p>Can this be achieved in any way?</p>\n<p>(Note: someone have suggest my question may duplicate with remove trailing zero in java, but I suggest it's different because in my question the base value is double not String)</p>\n"},{"tags":["java","java-stream","completable-future"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1640612560,"post_id":70496190,"comment_id":124615830,"body_markdown":"This does not sound like a typical `stream` operation. If I understand you correctly, you want to start with a stream, and end with one single entity (containing all information from said stream). In this case, it sounds more like you want to transform the `Future`s to their actual result-type (can be done through a stream), create a list of those results (can be done through a stream) and then wrap it in a `Future` (cannot (easily) be done through a stream).","body":"This does not sound like a typical <code>stream</code> operation. If I understand you correctly, you want to start with a stream, and end with one single entity (containing all information from said stream). In this case, it sounds more like you want to transform the <code>Future</code>s to their actual result-type (can be done through a stream), create a list of those results (can be done through a stream) and then wrap it in a <code>Future</code> (cannot (easily) be done through a stream)."},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1640613017,"post_id":70496190,"comment_id":124615991,"body_markdown":"What about just removing all the redundancy in your current code, e.g. just `return allFutures.thenApply(...`?","body":"What about just removing all the redundancy in your current code, e.g. just <code>return allFutures.thenApply(...</code>?"},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":1,"creation_date":1640614170,"post_id":70496190,"comment_id":124616344,"body_markdown":"See [here](https://jensonjava.wordpress.com/2017/11/16/convert-listcompletablefuture-to-completablefuturelist/)","body":"See <a href=\"https://jensonjava.wordpress.com/2017/11/16/convert-listcompletablefuture-to-completablefuturelist/\" rel=\"nofollow noreferrer\">here</a>"},{"owner":{"account_id":3899033,"reputation":21460,"user_id":3227319,"accept_rate":48,"display_name":"Jordi"},"score":0,"creation_date":1640614501,"post_id":70496190,"comment_id":124616438,"body_markdown":"Exactly, @Kayaman","body":"Exactly, @Kayaman"},{"owner":{"account_id":249169,"reputation":19388,"user_id":525036,"accept_rate":25,"display_name":"Didier L"},"score":0,"creation_date":1640705818,"post_id":70496190,"comment_id":124638420,"body_markdown":"Apart from the redundancy, what you are doing is the right way to do it. I would just replace the `completableFutures.size()` with just `0` as the former is useless and [even counter-productive](https://stackoverflow.com/a/29444594/525036).","body":"Apart from the redundancy, what you are doing is the right way to do it. I would just replace the <code>completableFutures.size()</code> with just <code>0</code> as the former is useless and <a href=\"https://stackoverflow.com/a/29444594/525036\">even counter-productive</a>."},{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1640866453,"post_id":70496190,"comment_id":124678216,"body_markdown":"_&quot;I&#39;m looking for a wall&quot;_ You&#39;re looking for a what?","body":"<i>&quot;I&#39;m looking for a wall&quot;</i> You&#39;re looking for a what?"},{"owner":{"account_id":249169,"reputation":19388,"user_id":525036,"accept_rate":25,"display_name":"Didier L"},"score":0,"creation_date":1641207642,"post_id":70496190,"comment_id":124739196,"body_markdown":"@MarkRotteveel I guess it should read “_for a way_” but since you didn’t fix it in your edit I’m wondering if it could mean anything else?","body":"@MarkRotteveel I guess it should read “<i>for a way</i>” but since you didn’t fix it in your edit I’m wondering if it could mean anything else?"}],"owner":{"account_id":3899033,"reputation":21460,"user_id":3227319,"accept_rate":48,"display_name":"Jordi"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1641213406,"answer_count":0,"score":1,"last_activity_date":1640866428,"creation_date":1640612113,"question_id":70496190,"body_markdown":"I&#39;m looking for a wall to implement a `Collector` of `CompletableFuture`.\r\n\r\nI mean, my current code is:\r\n\r\n```lang-java\r\nprivate CompletableFuture&lt;List&lt;BundleEntryResponseComponent&gt;&gt; makeAllOfCompletableFuture(List&lt;CompletableFuture&lt;BundleEntryResponseComponent&gt;&gt; completableFutures) {\r\n    CompletableFuture&lt;Void&gt; allFutures = CompletableFuture.allOf(completableFutures.toArray(new CompletableFuture[completableFutures.size()]));\r\n\r\n    CompletableFuture&lt;List&lt;BundleEntryResponseComponent&gt;&gt; allCompletableFuture = allFutures.thenApply(future -&gt; {\r\n        return completableFutures.stream()\r\n            .map(completableFuture -&gt; completableFuture.join())\r\n            .collect(Collectors.toList());\r\n        }\r\n    );\r\n\r\n    CompletableFuture&lt;List&lt;BundleEntryResponseComponent&gt;&gt; completableFuture = allCompletableFuture.toCompletableFuture();\r\n\r\n    return completableFuture;\r\n}\r\n```\r\n\r\nAs you can see, I&#39;m joining all `CompletableFuture` of `completableFutures` parameter.\r\n\r\nI&#39;d like to handle them as a stream of `CompletableFuture` and `join` them into a custom `Collector`.\r\n\r\nSomething like this:\r\n\r\n```lang-java\r\nStream&lt;CompletableFuture&lt;BundleEntryResponseComponent&gt;&gt; futures ...\r\nCompletableFuture&lt;List&lt;BundleEntryResponseComponent&gt;&gt; allOfFuture = futures\r\n ...\r\n .collect(???&#191;&#191;&#191;);\r\n```\r\n\r\nAny ideas?","title":"How to join stream of CompletableFuture","body":"<p>I'm looking for a wall to implement a <code>Collector</code> of <code>CompletableFuture</code>.</p>\n<p>I mean, my current code is:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private CompletableFuture&lt;List&lt;BundleEntryResponseComponent&gt;&gt; makeAllOfCompletableFuture(List&lt;CompletableFuture&lt;BundleEntryResponseComponent&gt;&gt; completableFutures) {\n    CompletableFuture&lt;Void&gt; allFutures = CompletableFuture.allOf(completableFutures.toArray(new CompletableFuture[completableFutures.size()]));\n\n    CompletableFuture&lt;List&lt;BundleEntryResponseComponent&gt;&gt; allCompletableFuture = allFutures.thenApply(future -&gt; {\n        return completableFutures.stream()\n            .map(completableFuture -&gt; completableFuture.join())\n            .collect(Collectors.toList());\n        }\n    );\n\n    CompletableFuture&lt;List&lt;BundleEntryResponseComponent&gt;&gt; completableFuture = allCompletableFuture.toCompletableFuture();\n\n    return completableFuture;\n}\n</code></pre>\n<p>As you can see, I'm joining all <code>CompletableFuture</code> of <code>completableFutures</code> parameter.</p>\n<p>I'd like to handle them as a stream of <code>CompletableFuture</code> and <code>join</code> them into a custom <code>Collector</code>.</p>\n<p>Something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Stream&lt;CompletableFuture&lt;BundleEntryResponseComponent&gt;&gt; futures ...\nCompletableFuture&lt;List&lt;BundleEntryResponseComponent&gt;&gt; allOfFuture = futures\n ...\n .collect(???¿¿¿);\n</code></pre>\n<p>Any ideas?</p>\n"},{"tags":["java","unit-testing","mockito"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":2,"creation_date":1640866222,"post_id":70531457,"comment_id":124678149,"body_markdown":"Java is a type-safe language. The variable `zzz` can only reference a `ZZZ`, therefore `zzz instanceof ZZZ` will always evaluate to `true`.","body":"Java is a type-safe language. The variable <code>zzz</code> can only reference a <code>ZZZ</code>, therefore <code>zzz instanceof ZZZ</code> will always evaluate to <code>true</code>."},{"owner":{"account_id":16914885,"reputation":77,"user_id":12233118,"display_name":"Poli"},"score":0,"creation_date":1640866279,"post_id":70531457,"comment_id":124678164,"body_markdown":"@Turing85 the scenario is that when someone changes by hand the object class the test case should fail","body":"@Turing85 the scenario is that when someone changes by hand the object class the test case should fail"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1640866301,"post_id":70531457,"comment_id":124678174,"body_markdown":"We should test behaviour, not implementation. We should not care what the method does internally, as long as `examine(...)` behaves as expected.","body":"We should test behaviour, not implementation. We should not care what the method does internally, as long as <code>examine(...)</code> behaves as expected."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":3,"creation_date":1640866568,"post_id":70531457,"comment_id":124678251,"body_markdown":"If I looked at that code, and decided for some reason that I wanted to create a `YYY` instead of an `XXX`, I would change the type mentioned in `instanceof` as well.","body":"If I looked at that code, and decided for some reason that I wanted to create a <code>YYY</code> instead of an <code>XXX</code>, I would change the type mentioned in <code>instanceof</code> as well."},{"owner":{"account_id":104440,"reputation":5525,"user_id":279236,"display_name":"jwenting"},"score":0,"creation_date":1640867643,"post_id":70531457,"comment_id":124678520,"body_markdown":"@Turing85 not necessarily. If the instances were created by a different classloader it returns false. In this specific case that&#39;s of course not a problem.","body":"@Turing85 not necessarily. If the instances were created by a different classloader it returns false. In this specific case that&#39;s of course not a problem."}],"owner":{"account_id":16914885,"reputation":77,"user_id":12233118,"display_name":"Poli"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1640866350,"creation_date":1640866055,"question_id":70531457,"body_markdown":"I have a method that read csv data, but I only use a specific class object:\r\n```\r\nclass A {\r\n    public void examine(Param[] params) {\r\n        ZZZ zzz = new ZZZ();\r\n        // other stuff\r\n    }\r\n}\r\n```\r\nThe scenario that if someone changes by hand the method, test should fail (if is not ZZZ)\r\nI&#39;m new to testing.. how to write a test case that only passes when local variable uses a specific class object - case where only ZZZ is acceptable?\r\n\r\nWhat I thinking is to modify method by adding:\r\n```\r\nclass A {\r\n    public void examine(Param[] params) {\r\n        ZZZ zzz = new ZZZ();\r\n        if (zzz instanceof ZZZ == false) {\r\n            thow new IllegalArgumentException(&quot;not type of ZZZ&quot;);\r\n        }\r\n        // other stuff\r\n    }\r\n}\r\n```\r\nbut then how to catch the Exception?\r\n\r\n","title":"Java test if correct class object is used","body":"<p>I have a method that read csv data, but I only use a specific class object:</p>\n<pre><code>class A {\n    public void examine(Param[] params) {\n        ZZZ zzz = new ZZZ();\n        // other stuff\n    }\n}\n</code></pre>\n<p>The scenario that if someone changes by hand the method, test should fail (if is not ZZZ)\nI'm new to testing.. how to write a test case that only passes when local variable uses a specific class object - case where only ZZZ is acceptable?</p>\n<p>What I thinking is to modify method by adding:</p>\n<pre><code>class A {\n    public void examine(Param[] params) {\n        ZZZ zzz = new ZZZ();\n        if (zzz instanceof ZZZ == false) {\n            thow new IllegalArgumentException(&quot;not type of ZZZ&quot;);\n        }\n        // other stuff\n    }\n}\n</code></pre>\n<p>but then how to catch the Exception?</p>\n"},{"tags":["java","encoding","character-encoding","hex"],"comments":[{"owner":{"account_id":7373320,"reputation":17364,"user_id":5612858,"display_name":"Arnaud"},"score":1,"creation_date":1640776353,"post_id":70518490,"comment_id":124655126,"body_markdown":"From your last link, `8C` is 140, which is out of range of a byte ( -128 to 127).","body":"From your last link, <code>8C</code> is 140, which is out of range of a byte ( -128 to 127)."},{"owner":{"account_id":191570,"reputation":3247,"user_id":432216,"accept_rate":84,"display_name":"arjuncc"},"score":0,"creation_date":1640776511,"post_id":70518490,"comment_id":124655167,"body_markdown":"Can you please suggest what should be done?","body":"Can you please suggest what should be done?"},{"owner":{"account_id":7373320,"reputation":17364,"user_id":5612858,"display_name":"Arnaud"},"score":0,"creation_date":1640777030,"post_id":70518490,"comment_id":124655340,"body_markdown":"Maybe have a look at this answer : https://stackoverflow.com/a/6658409/5612858","body":"Maybe have a look at this answer : <a href=\"https://stackoverflow.com/a/6658409/5612858\">stackoverflow.com/a/6658409/5612858</a>"}],"answers":[{"tags":[],"owner":{"account_id":121787,"reputation":11660,"user_id":315129,"accept_rate":93,"display_name":"vbezhenar"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1640781817,"creation_date":1640781817,"answer_id":70519595,"question_id":70518490,"body_markdown":"`Byte.parseByte(str, 16)` expects signed input. You can write `Byte.parseByte(&quot;-1&quot;, 16)`, for example, because `-1` fits into Java `byte` type, but not `Byte.parseByte(&quot;80&quot;, 16)`, because `128` does not fit into Java `byte` type.\r\n\r\nYou can replace `Byte.parseByte(str.substring(index, index + 2), 16)` with `(byte) Integer.parseInt(str.substring(index, index + 2), 16)` and it&#39;ll work fine.\r\n\r\nIf you&#39;re using Java 17, you can use `java.util.HexFormat.of().parseHex(hexString)` instead of `getByte(hexString)`.\r\n","title":"java.lang.NumberFormatException: Value out of range. Value:&quot;8C&quot; Radix:16 while converting from String to byte[]","body":"<p><code>Byte.parseByte(str, 16)</code> expects signed input. You can write <code>Byte.parseByte(&quot;-1&quot;, 16)</code>, for example, because <code>-1</code> fits into Java <code>byte</code> type, but not <code>Byte.parseByte(&quot;80&quot;, 16)</code>, because <code>128</code> does not fit into Java <code>byte</code> type.</p>\n<p>You can replace <code>Byte.parseByte(str.substring(index, index + 2), 16)</code> with <code>(byte) Integer.parseInt(str.substring(index, index + 2), 16)</code> and it'll work fine.</p>\n<p>If you're using Java 17, you can use <code>java.util.HexFormat.of().parseHex(hexString)</code> instead of <code>getByte(hexString)</code>.</p>\n"},{"tags":[],"owner":{"account_id":7302867,"reputation":299,"user_id":5564903,"display_name":"Stefan D."},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640785523,"creation_date":1640785523,"answer_id":70520310,"question_id":70518490,"body_markdown":"You can use a int to convert and truncate it down to 8 bit length. Look at the two lines in getByte which do the convertion.\r\n\r\n```\r\npublic class Temp {\r\n\r\n\tpublic static void process() {\r\n\t\tSystem.out.println(&quot;File to print&quot;);\r\n\t\tString hexString = &quot;418C&quot;;\r\n\t\t\tbyte value[] = getByte(hexString);\r\n\r\n\t\t\tfor(byte v: value) {\r\n\t\t\t\t\r\n\t\t\t\tSystem.out.printf(&quot;v: %2x\\t&quot;, v);\r\n\t\t\t}\r\n\t}\r\n\r\n\tprivate static byte[] getByte(String str) {\r\n\t\tbyte[] val = new byte[str.length() / 2];\r\n\t\tfor (int i = 0; i &lt; val.length; i++) {\r\n\t\t\tint index = i * 2;\r\n\t\t\t\r\n\t\t\tint byt = Integer.parseInt(str.substring(index, index + 2), 16);\r\n\t\t\tval[i] = (byte) (byt &amp; 0xff);\r\n\r\n\t\t}\r\n\t\treturn val;\r\n\t}\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tprocess();\r\n\t}\r\n}\r\n```\r\n\r\nThe output is\r\n```\r\nFile to print\r\nv: 41\tv: 8c\t\r\n```\r\n","title":"java.lang.NumberFormatException: Value out of range. Value:&quot;8C&quot; Radix:16 while converting from String to byte[]","body":"<p>You can use a int to convert and truncate it down to 8 bit length. Look at the two lines in getByte which do the convertion.</p>\n<pre><code>public class Temp {\n\n    public static void process() {\n        System.out.println(&quot;File to print&quot;);\n        String hexString = &quot;418C&quot;;\n            byte value[] = getByte(hexString);\n\n            for(byte v: value) {\n                \n                System.out.printf(&quot;v: %2x\\t&quot;, v);\n            }\n    }\n\n    private static byte[] getByte(String str) {\n        byte[] val = new byte[str.length() / 2];\n        for (int i = 0; i &lt; val.length; i++) {\n            int index = i * 2;\n            \n            int byt = Integer.parseInt(str.substring(index, index + 2), 16);\n            val[i] = (byte) (byt &amp; 0xff);\n\n        }\n        return val;\n    }\n\n    public static void main(String[] args) {\n        process();\n    }\n}\n</code></pre>\n<p>The output is</p>\n<pre><code>File to print\nv: 41   v: 8c   \n</code></pre>\n"}],"owner":{"account_id":191570,"reputation":3247,"user_id":432216,"accept_rate":84,"display_name":"arjuncc"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1805,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"closed_date":1640866320,"accepted_answer_id":70519595,"answer_count":2,"score":3,"last_activity_date":1640866294,"creation_date":1640775703,"question_id":70518490,"body_markdown":"Getting the following error from following code. What I am trying to achieve is printing a series of hex code to a file as bytes itself. How do I fix it, So that I can print 8C in the file\r\n\r\n```java\r\npublic static void process() {\r\n    System.out.println(&quot;File to print&quot;);\r\n    String hexString = &quot;418C&quot;;\r\n    try {\r\n        byte value[] = getByte(hexString);\r\n        try (FileOutputStream outputStream = new FileOutputStream(filePath)) {\r\n            outputStream.write(value);\r\n        }\r\n    } catch (Exception exp) {\r\n        exp.printStackTrace();\r\n    }\r\n}\r\n    \r\nprivate static byte[] getByte(String str) {\r\n    byte[] val = new byte[str.length() / 2];\r\n    for (int i = 0; i &lt; val.length; i++) {\r\n        int index = i * 2;\r\n        byte byt = Byte.parseByte(str.substring(index, index + 2), 16);\r\n        val[i] = byt;\r\n    }\r\n    return val;\r\n}\r\n```\r\n\r\nException\r\n\r\n```none\r\njava.lang.NumberFormatException: Value out of range. Value:&quot;8C&quot; Radix:16\r\n\tat java.base/java.lang.Byte.parseByte(Byte.java:154)\r\n```\r\n\r\nBased on the following link, I changed to Character.MAX_RADIX, but getting another error.\r\nhttps://www.tutorialspoint.com/java/lang/byte_parsebyte_radix.htm\r\n\r\nThe following link was helpful\r\nhttps://stackoverflow.com/questions/43348699/why-does-byte-parsebyte80-16-fail\r\n","title":"java.lang.NumberFormatException: Value out of range. Value:&quot;8C&quot; Radix:16 while converting from String to byte[]","body":"<p>Getting the following error from following code. What I am trying to achieve is printing a series of hex code to a file as bytes itself. How do I fix it, So that I can print 8C in the file</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void process() {\n    System.out.println(&quot;File to print&quot;);\n    String hexString = &quot;418C&quot;;\n    try {\n        byte value[] = getByte(hexString);\n        try (FileOutputStream outputStream = new FileOutputStream(filePath)) {\n            outputStream.write(value);\n        }\n    } catch (Exception exp) {\n        exp.printStackTrace();\n    }\n}\n    \nprivate static byte[] getByte(String str) {\n    byte[] val = new byte[str.length() / 2];\n    for (int i = 0; i &lt; val.length; i++) {\n        int index = i * 2;\n        byte byt = Byte.parseByte(str.substring(index, index + 2), 16);\n        val[i] = byt;\n    }\n    return val;\n}\n</code></pre>\n<p>Exception</p>\n<pre class=\"lang-none prettyprint-override\"><code>java.lang.NumberFormatException: Value out of range. Value:&quot;8C&quot; Radix:16\n    at java.base/java.lang.Byte.parseByte(Byte.java:154)\n</code></pre>\n<p>Based on the following link, I changed to Character.MAX_RADIX, but getting another error.\n<a href=\"https://www.tutorialspoint.com/java/lang/byte_parsebyte_radix.htm\" rel=\"nofollow noreferrer\">https://www.tutorialspoint.com/java/lang/byte_parsebyte_radix.htm</a></p>\n<p>The following link was helpful\n<a href=\"https://stackoverflow.com/questions/43348699/why-does-byte-parsebyte80-16-fail\">Why does Byte.parseByte(&quot;80&quot;, 16) fail?</a></p>\n"},{"tags":["java","c#","android"],"comments":[{"owner":{"account_id":9856255,"reputation":825,"user_id":7300644,"display_name":"Sandeep Jadhav"},"score":0,"creation_date":1640858672,"post_id":70528870,"comment_id":124675874,"body_markdown":"Please check may be machine configuration issue or supported hardware and software is available on your IIP machine. and also check android version on both IIP machine.","body":"Please check may be machine configuration issue or supported hardware and software is available on your IIP machine. and also check android version on both IIP machine."},{"owner":{"account_id":12732679,"reputation":7866,"user_id":9248718,"display_name":"Some random IT boy"},"score":0,"creation_date":1642960810,"post_id":70528870,"comment_id":125207326,"body_markdown":"Please stop using AsyncTask in 2022...","body":"Please stop using AsyncTask in 2022..."}],"answers":[{"tags":[],"owner":{"account_id":9777748,"reputation":1119,"user_id":7247051,"accept_rate":100,"display_name":"Ihdina"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640860973,"creation_date":1640859896,"answer_id":70530315,"question_id":70528870,"body_markdown":"Android does not auto-start any application until you manually launch it at least once. After that, the applications will automatically start on each Android boot.\r\n\r\nAdd `android.permission.RECEIVE_BOOT_COMPLETED` permission in your manifest.\r\n\r\nWhen Android finishes booting and is ready to start the home activity, the home event is sent and qualifying applications identify themselves as bootable candidates. The system sends out the `android.intent.category.HOME` and `android.intent.category.DEFAULT` intents when it&#39;s done initializing.\r\n\r\n\r\n\r\n\t&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n\t&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n\t\txmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n\t\tpackage=&quot;com.test.app&quot;&gt;\r\n\r\n        &lt;!-- add this --&gt;\r\n\t\t&lt;uses-permission android:name=&quot;android.permission.RECEIVE_BOOT_COMPLETED&quot; /&gt;\r\n\r\n\t\t&lt;application\r\n\t\t\tandroid:theme=&quot;@style/app_theme_red&quot;&gt;\r\n\r\n\t\t\t&lt;!-- main --&gt;\r\n\t\t\t&lt;activity\r\n\t\t\t\tandroid:name=&quot;.ui.activity.MainActivity&quot;\r\n\t\t\t\tandroid:exported=&quot;true&quot;&gt;\r\n\r\n\t\t\t\t&lt;!-- main filter --&gt;\r\n\t\t\t\t&lt;intent-filter&gt;\r\n\t\t\t\t\t&lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\t\t\t\t\t&lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n\r\n                    &lt;!-- add this --&gt;\r\n\t\t\t\t\t&lt;category android:name=&quot;android.intent.category.HOME&quot; /&gt;\r\n\t\t\t\t\t&lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;\r\n\t\t\t\t&lt;/intent-filter&gt;\r\n\t\t\t&lt;/activity&gt;\r\n\r\n\t\t\t&lt;!-- boot receiver --&gt;\r\n\t\t\t&lt;receiver android:name=&quot;.BootReceiver&quot;\r\n\t\t\t\tandroid:exported=&quot;false&quot;&gt;\r\n\t\t\t\t&lt;intent-filter&gt;\r\n\t\t\t\t\t&lt;action android:name=&quot;android.intent.action.BOOT_COMPLETED&quot; /&gt;\r\n\t\t\t\t&lt;/intent-filter&gt;\r\n\t\t\t&lt;/receiver&gt;\r\n\r\n\t\t&lt;/application&gt;\r\n\t\t\r\n\t&lt;/manifest&gt;","title":"BroadcastReceiver is not working after boot complete","body":"<p>Android does not auto-start any application until you manually launch it at least once. After that, the applications will automatically start on each Android boot.</p>\n<p>Add <code>android.permission.RECEIVE_BOOT_COMPLETED</code> permission in your manifest.</p>\n<p>When Android finishes booting and is ready to start the home activity, the home event is sent and qualifying applications identify themselves as bootable candidates. The system sends out the <code>android.intent.category.HOME</code> and <code>android.intent.category.DEFAULT</code> intents when it's done initializing.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    package=&quot;com.test.app&quot;&gt;\n\n    &lt;!-- add this --&gt;\n    &lt;uses-permission android:name=&quot;android.permission.RECEIVE_BOOT_COMPLETED&quot; /&gt;\n\n    &lt;application\n        android:theme=&quot;@style/app_theme_red&quot;&gt;\n\n        &lt;!-- main --&gt;\n        &lt;activity\n            android:name=&quot;.ui.activity.MainActivity&quot;\n            android:exported=&quot;true&quot;&gt;\n\n            &lt;!-- main filter --&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n\n                &lt;!-- add this --&gt;\n                &lt;category android:name=&quot;android.intent.category.HOME&quot; /&gt;\n                &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n\n        &lt;!-- boot receiver --&gt;\n        &lt;receiver android:name=&quot;.BootReceiver&quot;\n            android:exported=&quot;false&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.BOOT_COMPLETED&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/receiver&gt;\n\n    &lt;/application&gt;\n    \n&lt;/manifest&gt;\n</code></pre>\n"}],"owner":{"account_id":19853267,"reputation":31,"user_id":14543331,"display_name":"Ans Sudhesan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":102,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1640866213,"creation_date":1640851168,"question_id":70528870,"body_markdown":"I am working on an app In this, I have to send the current status of the  android devices in 30-30 seconds through my  app which I have done. But the problem I am facing is the app is not starting after boot complete this problem is related to some of android devices. \r\n\r\nMY Code is:\r\n\r\n    public class BootCompletedReceiver extends BroadcastReceiver {\r\n    \r\n        private static final String TAG = &quot;BootCompletedReceiver&quot;;\r\n    \r\n        @Override\r\n        public void onReceive(Context context, Intent intent) {\r\n            Log.d(TAG,&quot;action : &quot;+intent.getAction());\r\n            if (Objects.requireNonNull(intent.getAction()).equals(Intent.ACTION_BOOT_COMPLETED)){\r\n                Log.d(TAG,&quot;receive boot completes : &quot;+intent.getAction());\r\n                @SuppressLint(&quot;StaticFieldLeak&quot;)\r\n                AsyncTask task = new AsyncTask() {\r\n                    @Override\r\n                    protected Object doInBackground(Object[] objects) {\r\n                        try {\r\n                            Thread.sleep(5000);\r\n                        } catch (InterruptedException e) {\r\n                            e.printStackTrace();\r\n                        }\r\n                        return null;\r\n                    }\r\n    \r\n                    @RequiresApi(api = Build.VERSION_CODES.O)\r\n                    @Override\r\n                    protected void onPostExecute(Object o) {\r\n                        super.onPostExecute(o);\r\n                        context.startForegroundService(new Intent(context, StatUpdateService.class));\r\n                    }\r\n                };\r\n    \r\n                task.execute();\r\n            }\r\n        }\r\n    }\r\n\r\nManifests file: \r\n\r\n            \r\n    &lt;uses-permission android:name=&quot;android.permission.RECEIVE_BOOT_COMPLETED&quot; /&gt;  \r\n       \r\n    &lt;......./&gt;\r\n    \r\n            &lt;receiver\r\n                android:name=&quot;.receiver.BootCompletedReceiver&quot;\r\n                android:enabled=&quot;true&quot;\r\n                android:exported=&quot;true&quot;&gt;\r\n                &lt;intent-filter&gt;\r\n                    &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;\r\n                    &lt;action android:name=&quot;android.intent.action.BOOT_COMPLETED&quot; /&gt;\r\n                    &lt;action android:name=&quot;android.intent.action.QUICKBOOT_POWERON&quot; /&gt;\r\n                &lt;/intent-filter&gt;\r\n            &lt;/receiver&gt;\r\n\r\nList item\r\n\r\nOn Some of the  android devices, This Code is working and My app is  starting after boot complete, but on the Some of the android devices, it&#39;s not working.\r\n\r\n\r\n\r\n","title":"BroadcastReceiver is not working after boot complete","body":"<p>I am working on an app In this, I have to send the current status of the  android devices in 30-30 seconds through my  app which I have done. But the problem I am facing is the app is not starting after boot complete this problem is related to some of android devices.</p>\n<p>MY Code is:</p>\n<pre><code>public class BootCompletedReceiver extends BroadcastReceiver {\n\n    private static final String TAG = &quot;BootCompletedReceiver&quot;;\n\n    @Override\n    public void onReceive(Context context, Intent intent) {\n        Log.d(TAG,&quot;action : &quot;+intent.getAction());\n        if (Objects.requireNonNull(intent.getAction()).equals(Intent.ACTION_BOOT_COMPLETED)){\n            Log.d(TAG,&quot;receive boot completes : &quot;+intent.getAction());\n            @SuppressLint(&quot;StaticFieldLeak&quot;)\n            AsyncTask task = new AsyncTask() {\n                @Override\n                protected Object doInBackground(Object[] objects) {\n                    try {\n                        Thread.sleep(5000);\n                    } catch (InterruptedException e) {\n                        e.printStackTrace();\n                    }\n                    return null;\n                }\n\n                @RequiresApi(api = Build.VERSION_CODES.O)\n                @Override\n                protected void onPostExecute(Object o) {\n                    super.onPostExecute(o);\n                    context.startForegroundService(new Intent(context, StatUpdateService.class));\n                }\n            };\n\n            task.execute();\n        }\n    }\n}\n</code></pre>\n<p>Manifests file:</p>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.RECEIVE_BOOT_COMPLETED&quot; /&gt;  \n   \n&lt;......./&gt;\n\n        &lt;receiver\n            android:name=&quot;.receiver.BootCompletedReceiver&quot;\n            android:enabled=&quot;true&quot;\n            android:exported=&quot;true&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;\n                &lt;action android:name=&quot;android.intent.action.BOOT_COMPLETED&quot; /&gt;\n                &lt;action android:name=&quot;android.intent.action.QUICKBOOT_POWERON&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/receiver&gt;\n</code></pre>\n<p>List item</p>\n<p>On Some of the  android devices, This Code is working and My app is  starting after boot complete, but on the Some of the android devices, it's not working.</p>\n"},{"tags":["java","android","webview"],"comments":[{"owner":{"account_id":7773500,"reputation":5844,"user_id":5882307,"display_name":"OMi Shah"},"score":0,"creation_date":1640802132,"post_id":70523396,"comment_id":124663856,"body_markdown":"Does this answer your question? [How to go back to previous page if back button is pressed in WebView?](https://stackoverflow.com/questions/6077141/how-to-go-back-to-previous-page-if-back-button-is-pressed-in-webview)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/6077141/how-to-go-back-to-previous-page-if-back-button-is-pressed-in-webview\">How to go back to previous page if back button is pressed in WebView?</a>"},{"owner":{"account_id":23770199,"reputation":11,"user_id":17791001,"display_name":"Franz Dev"},"score":0,"creation_date":1640802533,"post_id":70523396,"comment_id":124663965,"body_markdown":"I did it as is but it still does not work","body":"I did it as is but it still does not work"},{"owner":{"account_id":7773500,"reputation":5844,"user_id":5882307,"display_name":"OMi Shah"},"score":0,"creation_date":1640802628,"post_id":70523396,"comment_id":124663996,"body_markdown":"post the complete code after adding the back button part.","body":"post the complete code after adding the back button part."}],"owner":{"account_id":23770199,"reputation":11,"user_id":17791001,"display_name":"Franz Dev"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1640866119,"creation_date":1640802023,"question_id":70523396,"body_markdown":"I am creating an application with webview (an application in which a website is displayed).\r\n\r\nCurrently, if I click the back button, the app closes the application\r\n\r\nWhat I am looking for is not that a button with an arrow appears in the action bar and it takes me back, because I have eliminated that bar, what I want is to be able to use the buttons on the cell phone.\r\n\r\nI hope you can help me, here the code of the MainActivity.java and the AndroidManifiest.xml\r\n\r\n#### MainActivity.java\r\n\r\n```java\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    private View decorView;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        WebView webView = findViewById(R.id.mywebview);\r\n        webView.getSettings().setJavaScriptEnabled(true);\r\n        webView.setWebViewClient(new WebViewClient());\r\n        webView.setWebChromeClient(new myChrome());\r\n        webView.loadUrl(&quot;https://mywebview.com/&quot;);\r\n\r\n        decorView = getWindow().getDecorView();\r\n        decorView.setOnSystemUiVisibilityChangeListener(new View.OnSystemUiVisibilityChangeListener() {\r\n            @Override\r\n            public void onSystemUiVisibilityChange(int visibility) {\r\n                if (visibility  == 0)\r\n                    decorView.setSystemUiVisibility(hideSystemBars());\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    @Override\r\n    public void onWindowFocusChanged(boolean hasFocus) {\r\n        super.onWindowFocusChanged(hasFocus);\r\n        if (hasFocus) {\r\n            decorView.setSystemUiVisibility(hideSystemBars());\r\n        }\r\n    }\r\n```\r\n\r\n#### AndroidManifiest.xml\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    package=&quot;com.Dessert.decov&quot;&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_WIFI_STATE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.FOREGROUND_SERVICE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.RECEIVE_BOOT_COMPLETED&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.WAKE_LOCK&quot; /&gt;\r\n\r\n    &lt;application\r\n        android:allowBackup=&quot;true&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:theme=&quot;@style/Theme.DESSERT&quot;&gt;\r\n        &lt;activity\r\n            android:name=&quot;.MainActivity&quot;\r\n            android:exported=&quot;true&quot;\r\n            android:configChanges=&quot;screenSize|orientation&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n    &lt;/application&gt;\r\n\r\n&lt;/manifest&gt;\r\n```\r\n\r\n\r\n\r\n","title":"How to enable back button in webview?","body":"<p>I am creating an application with webview (an application in which a website is displayed).</p>\n<p>Currently, if I click the back button, the app closes the application</p>\n<p>What I am looking for is not that a button with an arrow appears in the action bar and it takes me back, because I have eliminated that bar, what I want is to be able to use the buttons on the cell phone.</p>\n<p>I hope you can help me, here the code of the MainActivity.java and the AndroidManifiest.xml</p>\n<h4>MainActivity.java</h4>\n<pre class=\"lang-java prettyprint-override\"><code>public class MainActivity extends AppCompatActivity {\n\n    private View decorView;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        WebView webView = findViewById(R.id.mywebview);\n        webView.getSettings().setJavaScriptEnabled(true);\n        webView.setWebViewClient(new WebViewClient());\n        webView.setWebChromeClient(new myChrome());\n        webView.loadUrl(&quot;https://mywebview.com/&quot;);\n\n        decorView = getWindow().getDecorView();\n        decorView.setOnSystemUiVisibilityChangeListener(new View.OnSystemUiVisibilityChangeListener() {\n            @Override\n            public void onSystemUiVisibilityChange(int visibility) {\n                if (visibility  == 0)\n                    decorView.setSystemUiVisibility(hideSystemBars());\n            }\n        });\n    }\n\n\n    @Override\n    public void onWindowFocusChanged(boolean hasFocus) {\n        super.onWindowFocusChanged(hasFocus);\n        if (hasFocus) {\n            decorView.setSystemUiVisibility(hideSystemBars());\n        }\n    }\n</code></pre>\n<h4>AndroidManifiest.xml</h4>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    package=&quot;com.Dessert.decov&quot;&gt;\n\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_WIFI_STATE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.FOREGROUND_SERVICE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.RECEIVE_BOOT_COMPLETED&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.WAKE_LOCK&quot; /&gt;\n\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/Theme.DESSERT&quot;&gt;\n        &lt;activity\n            android:name=&quot;.MainActivity&quot;\n            android:exported=&quot;true&quot;\n            android:configChanges=&quot;screenSize|orientation&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n"},{"tags":["java","java-8"],"comments":[{"owner":{"account_id":17813347,"reputation":1635,"user_id":12937443,"display_name":"DEV"},"score":2,"creation_date":1640860883,"post_id":70530440,"comment_id":124676510,"body_markdown":"test.get(0).isEmpty()","body":"test.get(0).isEmpty()"},{"owner":{"account_id":21432093,"reputation":177,"user_id":15788271,"display_name":"David Tejuosho"},"score":1,"creation_date":1640861100,"post_id":70530440,"comment_id":124676579,"body_markdown":"Do you mean \ndoes it exist as a null value?\nor does it exist at all?\nor is the String an empty String (which is a value btw)?","body":"Do you mean  does it exist as a null value? or does it exist at all? or is the String an empty String (which is a value btw)?"},{"owner":{"account_id":22441830,"reputation":25,"user_id":16646235,"display_name":"Vamsi"},"score":0,"creation_date":1640862053,"post_id":70530440,"comment_id":124676933,"body_markdown":"how to check whether it is empty or not","body":"how to check whether it is empty or not"},{"owner":{"account_id":22441830,"reputation":25,"user_id":16646235,"display_name":"Vamsi"},"score":0,"creation_date":1640862263,"post_id":70530440,"comment_id":124676991,"body_markdown":"I have a situation where I&#39;m getting the values from the form like [,&quot;sample&quot;] this. and sometimes like this [&quot;test&quot;,&quot;sample] now i want to check whether the first index is containing any value or not","body":"I have a situation where I&#39;m getting the values from the form like [,&quot;sample&quot;] this. and sometimes like this [&quot;test&quot;,&quot;sample] now i want to check whether the first index is containing any value or not"}],"answers":[{"tags":[],"owner":{"account_id":404578,"reputation":2475,"user_id":772992,"accept_rate":80,"display_name":"hradecek"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640865726,"creation_date":1640865726,"answer_id":70531382,"question_id":70530440,"body_markdown":"First we check that the list itself:\r\n - is not `null`\r\n - is not empty (has at least one value)\r\n\r\nThen we look at first element of the list and check, whether value:\r\n - is not `null`\r\n - is not blank (blank values are `&quot;&quot;` (empty), &quot;  &quot;, &quot;\\t  &quot; (whitespaces)\r\n\r\nIf you consider values consisting only from whitespaces e.g. `&quot; &quot;`, `&quot;   &quot;`, or `&quot;  \\t    &quot;`, you have to modify the example to not use `String#isBlank()` rather than `String#isEmpty()`.\r\n\r\n```\r\npublic static boolean hasFirstElementNonBlank(List&lt;String&gt; list) {\r\n    return isNotEmpty(list) &amp;&amp; isNotBlank(list.get(0));\r\n}\r\n\r\nprivate static boolean isNotEmpty(List&lt;String&gt; list) {\r\n    return list != null &amp;&amp; list.size() &gt; 0;\r\n}\r\n\r\nprivate static boolean isNotBlank(String string) {\r\n    return string != null &amp;&amp; !string.isBlank();\r\n}\r\n```\r\n\r\nUsage:\r\n```\r\npublic static void main(String[] args) {\r\n    List&lt;String&gt; emptyList = new ArrayList&lt;&gt;();\r\n    System.out.println(emptyList + &quot;: &quot; + hasFirstElementNonBlank(emptyList));\r\n\r\n    List&lt;String&gt; nonEmpty = Arrays.asList(&quot;test&quot;,&quot;sample&quot;);\r\n    System.out.println(nonEmpty + &quot;: &quot; + hasFirstElementNonBlank(nonEmpty));\r\n\r\n    List&lt;String&gt; firstEmpty = Arrays.asList(&quot;&quot;,&quot;sample&quot;);\r\n    System.out.println(firstEmpty + &quot;: &quot; + hasFirstElementNonBlank(firstEmpty));\r\n\r\n    List&lt;String&gt; firstWhitespaces = Arrays.asList(&quot;   &quot;,&quot;sample&quot;);\r\n    System.out.println(firstWhitespaces + &quot;: &quot; + hasFirstElementNonBlank(firstWhitespaces));\r\n\r\n    List&lt;String&gt; firstNull = Arrays.asList(null, &quot;sample&quot;);\r\n    System.out.println(firstNull + &quot;: &quot; + hasFirstElementNonBlank(firstNull));\r\n}\r\n```\r\n\r\nNote: `String#isBlank()` has been added in Java 11 (example won&#39;t work for pre-11 Java.","title":"checking the element in the list whether it is there or not in java","body":"<p>First we check that the list itself:</p>\n<ul>\n<li>is not <code>null</code></li>\n<li>is not empty (has at least one value)</li>\n</ul>\n<p>Then we look at first element of the list and check, whether value:</p>\n<ul>\n<li>is not <code>null</code></li>\n<li>is not blank (blank values are <code>&quot;&quot;</code> (empty), &quot;  &quot;, &quot;\\t  &quot; (whitespaces)</li>\n</ul>\n<p>If you consider values consisting only from whitespaces e.g. <code>&quot; &quot;</code>, <code>&quot;   &quot;</code>, or <code>&quot;  \\t    &quot;</code>, you have to modify the example to not use <code>String#isBlank()</code> rather than <code>String#isEmpty()</code>.</p>\n<pre><code>public static boolean hasFirstElementNonBlank(List&lt;String&gt; list) {\n    return isNotEmpty(list) &amp;&amp; isNotBlank(list.get(0));\n}\n\nprivate static boolean isNotEmpty(List&lt;String&gt; list) {\n    return list != null &amp;&amp; list.size() &gt; 0;\n}\n\nprivate static boolean isNotBlank(String string) {\n    return string != null &amp;&amp; !string.isBlank();\n}\n</code></pre>\n<p>Usage:</p>\n<pre><code>public static void main(String[] args) {\n    List&lt;String&gt; emptyList = new ArrayList&lt;&gt;();\n    System.out.println(emptyList + &quot;: &quot; + hasFirstElementNonBlank(emptyList));\n\n    List&lt;String&gt; nonEmpty = Arrays.asList(&quot;test&quot;,&quot;sample&quot;);\n    System.out.println(nonEmpty + &quot;: &quot; + hasFirstElementNonBlank(nonEmpty));\n\n    List&lt;String&gt; firstEmpty = Arrays.asList(&quot;&quot;,&quot;sample&quot;);\n    System.out.println(firstEmpty + &quot;: &quot; + hasFirstElementNonBlank(firstEmpty));\n\n    List&lt;String&gt; firstWhitespaces = Arrays.asList(&quot;   &quot;,&quot;sample&quot;);\n    System.out.println(firstWhitespaces + &quot;: &quot; + hasFirstElementNonBlank(firstWhitespaces));\n\n    List&lt;String&gt; firstNull = Arrays.asList(null, &quot;sample&quot;);\n    System.out.println(firstNull + &quot;: &quot; + hasFirstElementNonBlank(firstNull));\n}\n</code></pre>\n<p>Note: <code>String#isBlank()</code> has been added in Java 11 (example won't work for pre-11 Java.</p>\n"}],"owner":{"account_id":22441830,"reputation":25,"user_id":16646235,"display_name":"Vamsi"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1640865726,"creation_date":1640860744,"question_id":70530440,"body_markdown":"I&#39;m getting the values from the form data like a list \r\n\r\nvalues[,&quot;sample&quot;] and sometimes like this values[&quot;test&quot;,&quot;sample] I want to check whether the first is having any value or not how to check that one\r\n","title":"checking the element in the list whether it is there or not in java","body":"<p>I'm getting the values from the form data like a list</p>\n<p>values[,&quot;sample&quot;] and sometimes like this values[&quot;test&quot;,&quot;sample] I want to check whether the first is having any value or not how to check that one</p>\n"},{"tags":["java","azure","events","azureservicebus","azure-api-management"],"comments":[{"owner":{"account_id":10725921,"reputation":1866,"user_id":9303470,"display_name":"Ecstasy"},"score":0,"creation_date":1640235125,"post_id":70442337,"comment_id":124548394,"body_markdown":"You can refer to [Azure APIM as forward proxy](https://stackoverflow.com/questions/61926448/azure-apim-as-forward-proxy) and [Exposing Azure Service Bus through APIM, generating a SAS Token and setting the Session Id](https://connectedcircuits.blog/2018/09/25/exposing-azure-service-bus-through-apim-generating-a-sas-token-and-setting-the-session-id/)","body":"You can refer to <a href=\"https://stackoverflow.com/questions/61926448/azure-apim-as-forward-proxy\">Azure APIM as forward proxy</a> and <a href=\"https://connectedcircuits.blog/2018/09/25/exposing-azure-service-bus-through-apim-generating-a-sas-token-and-setting-the-session-id/\" rel=\"nofollow noreferrer\">Exposing Azure Service Bus through APIM, generating a SAS Token and setting the Session Id</a>"},{"owner":{"account_id":10725921,"reputation":1866,"user_id":9303470,"display_name":"Ecstasy"},"score":0,"creation_date":1640319977,"post_id":70442337,"comment_id":124569216,"body_markdown":"Did you check the links mentioned in the above comment? Did you get the solution or workaround?","body":"Did you check the links mentioned in the above comment? Did you get the solution or workaround?"}],"answers":[{"tags":[],"owner":{"account_id":22358744,"reputation":1237,"user_id":16575556,"display_name":"SaiKarri-MT"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640865068,"creation_date":1640865068,"answer_id":70531252,"question_id":70442337,"body_markdown":"You can check for ServiceBus Output binding with Azure functions to configure the workflow.\r\n\r\nCheck this [doc](https://learn.microsoft.com/en-us/previous-versions/sandbox/functions-recipes/service-bus#azure-service-bus-output-binding) to understand more about Service bus bindings.\r\n\r\nYou can refer to this [SO](https://stackoverflow.com/questions/60607880/how-to-send-data-to-service-bus-topic-with-azure-functions) which gives us insights about the process and the logic (But it is in C#), thanks to George for brief explanation.\r\n\r\nAs DeepDave Suggested refer to this [blog](https://joeblogs.technology/2021/07/posting-to-azure-service-bus-from-api-management/)\r\n","title":"Forward Request to Azure Service Bus","body":"<p>You can check for ServiceBus Output binding with Azure functions to configure the workflow.</p>\n<p>Check this <a href=\"https://learn.microsoft.com/en-us/previous-versions/sandbox/functions-recipes/service-bus#azure-service-bus-output-binding\" rel=\"nofollow noreferrer\">doc</a> to understand more about Service bus bindings.</p>\n<p>You can refer to this <a href=\"https://stackoverflow.com/questions/60607880/how-to-send-data-to-service-bus-topic-with-azure-functions\">SO</a> which gives us insights about the process and the logic (But it is in C#), thanks to George for brief explanation.</p>\n<p>As DeepDave Suggested refer to this <a href=\"https://joeblogs.technology/2021/07/posting-to-azure-service-bus-from-api-management/\" rel=\"nofollow noreferrer\">blog</a></p>\n"}],"owner":{"account_id":4500167,"reputation":43,"user_id":3658886,"display_name":"user3658886"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":302,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1640865068,"creation_date":1640126410,"question_id":70442337,"body_markdown":"I am trying to forward events from Azure API Management to Azure Service Bus but I am getting all time internal errors.\r\n\r\n\r\nFlow:\r\n\r\n    APIM --&gt; Service Bus Topic --&gt; Service Bus Queue --&gt; Function\r\n\r\nI added a new entry on the API section (menu right side) on API Management and I added the URL of the topic from Azure Service Bus where I want to publish this event.\r\nAfter that, I defined a new resource (GET/POST/...).\r\n\r\nOnly after that, I went to the Test section, I added the Authorization (Sas token from Service Bus) and I make the request. On the phase I got a 500 Internal Error.\r\n\r\nDoes Anyone know what I am doing wrong to get this error?\r\n\r\n\r\nNote:\r\nI got the connection between the topic and a queue 100% done and tested, this is working already. The problem is from APIM to Service Bus topic.\r\n\r\nI want to expose an API using API Management but at the same time, I want to convert everything to events after that\r\n\r\n\r\n\r\n","title":"Forward Request to Azure Service Bus","body":"<p>I am trying to forward events from Azure API Management to Azure Service Bus but I am getting all time internal errors.</p>\n<p>Flow:</p>\n<pre><code>APIM --&gt; Service Bus Topic --&gt; Service Bus Queue --&gt; Function\n</code></pre>\n<p>I added a new entry on the API section (menu right side) on API Management and I added the URL of the topic from Azure Service Bus where I want to publish this event.\nAfter that, I defined a new resource (GET/POST/...).</p>\n<p>Only after that, I went to the Test section, I added the Authorization (Sas token from Service Bus) and I make the request. On the phase I got a 500 Internal Error.</p>\n<p>Does Anyone know what I am doing wrong to get this error?</p>\n<p>Note:\nI got the connection between the topic and a queue 100% done and tested, this is working already. The problem is from APIM to Service Bus topic.</p>\n<p>I want to expose an API using API Management but at the same time, I want to convert everything to events after that</p>\n"},{"tags":["java","linkedhashmap"],"answers":[{"tags":[],"owner":{"account_id":1263831,"reputation":388998,"user_id":1221571,"accept_rate":67,"display_name":"Eran"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1640865019,"creation_date":1640865019,"answer_id":70531245,"question_id":70531191,"body_markdown":"The code you quote is just an example of how to override that method. \r\nThe actual implementation is:\r\n\r\n    protected boolean removeEldestEntry(Map.Entry&lt;K,V&gt; eldest) {\r\n        return false;\r\n    }\r\n\r\nIt is meant to be overridden, and some implementations can examine the eldest entry to decide whether or not it should be removed.\r\n\r\n","title":"What is the point of the Map.Entry parameter to LinkedHashMap#removeEldestEntry?","body":"<p>The code you quote is just an example of how to override that method.\nThe actual implementation is:</p>\n<pre><code>protected boolean removeEldestEntry(Map.Entry&lt;K,V&gt; eldest) {\n    return false;\n}\n</code></pre>\n<p>It is meant to be overridden, and some implementations can examine the eldest entry to decide whether or not it should be removed.</p>\n"}],"owner":{"account_id":2179728,"reputation":73047,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70531245,"answer_count":1,"score":1,"last_activity_date":1640865019,"creation_date":1640864766,"question_id":70531191,"body_markdown":"The [documentation](https://docs.oracle.com/javase/8/docs/api/java/util/LinkedHashMap.html#removeEldestEntry-java.util.Map.Entry-) describes this method using the following example:\r\n\r\n    private static final int MAX_ENTRIES = 100;\r\n    \r\n    protected boolean removeEldestEntry(Map.Entry eldest) {\r\n       return size() &gt; MAX_ENTRIES;\r\n    }\r\nIn this example, the method does not use the parameter, `eldest`. What is the point of this parameter to `LinkedHashMap#removeEldestEntry`?\r\n ","title":"What is the point of the Map.Entry parameter to LinkedHashMap#removeEldestEntry?","body":"<p>The <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/LinkedHashMap.html#removeEldestEntry-java.util.Map.Entry-\" rel=\"nofollow noreferrer\">documentation</a> describes this method using the following example:</p>\n<pre><code>private static final int MAX_ENTRIES = 100;\n\nprotected boolean removeEldestEntry(Map.Entry eldest) {\n   return size() &gt; MAX_ENTRIES;\n}\n</code></pre>\n<p>In this example, the method does not use the parameter, <code>eldest</code>. What is the point of this parameter to <code>LinkedHashMap#removeEldestEntry</code>?</p>\n"},{"tags":["java","factorial","largenumber"],"comments":[{"owner":{"account_id":1028420,"reputation":18799,"user_id":1037210,"accept_rate":100,"display_name":"Lion"},"score":0,"creation_date":1342078276,"post_id":11446973,"comment_id":15105696,"body_markdown":"Why don&#39;t you use higher data type like `BigInteger` and also is this homework? If yes then tag as such.","body":"Why don&#39;t you use higher data type like <code>BigInteger</code> and also is this homework? If yes then tag as such."},{"owner":{"account_id":470642,"reputation":8064,"user_id":877942,"accept_rate":79,"display_name":"Shades88"},"score":0,"creation_date":1342078417,"post_id":11446973,"comment_id":15119393,"body_markdown":"you loop variable i is int and you are trying to store a huge number in it, try making it a double too","body":"you loop variable i is int and you are trying to store a huge number in it, try making it a double too"},{"owner":{"account_id":212481,"reputation":4165,"user_id":465323,"accept_rate":94,"display_name":"Z&#233;ychin"},"score":0,"creation_date":1342078790,"post_id":11446973,"comment_id":15105866,"body_markdown":"According to my calculations, it will take around 25 megabytes of memory in order to represent this number. and even then, that would be without the overheard of the `BigInteger` class.","body":"According to my calculations, it will take around 25 megabytes of memory in order to represent this number. and even then, that would be without the overheard of the <code>BigInteger</code> class."},{"owner":{"account_id":1608422,"reputation":1803,"user_id":1488014,"accept_rate":79,"display_name":"Himanshu Aggarwal"},"score":0,"creation_date":1342080185,"post_id":11446973,"comment_id":15106342,"body_markdown":"yeah i have used biginteger as well but the compiler fails to display the answer for such a number so is there any other way out???","body":"yeah i have used biginteger as well but the compiler fails to display the answer for such a number so is there any other way out???"},{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1342085940,"post_id":11446973,"comment_id":15108643,"body_markdown":"What do you mean, &quot;fails to display the answer&quot;?  Can you post the code that &quot;failed to display the answer&quot;?","body":"What do you mean, &quot;fails to display the answer&quot;?  Can you post the code that &quot;failed to display the answer&quot;?"},{"owner":{"account_id":1608422,"reputation":1803,"user_id":1488014,"accept_rate":79,"display_name":"Himanshu Aggarwal"},"score":0,"creation_date":1342104179,"post_id":11446973,"comment_id":15117401,"body_markdown":"no i meant that for such a no. i waited for atleast an hr or so...but nothing happened.....it is displaying the answer for 10000 quite fast but not for above this value......and also the answer it was showing for 11000 doesn.t match this value...http://www.wolframalpha.com/input/?i=11000!","body":"no i meant that for such a no. i waited for atleast an hr or so...but nothing happened.....it is displaying the answer for 10000 quite fast but not for above this value......and also the answer it was showing for 11000 doesn.t match this value...<a href=\"http://www.wolframalpha.com/input/?i=11000\" rel=\"nofollow noreferrer\">wolframalpha.com/input/?i=11000</a>!"}],"answers":[{"tags":[],"owner":{"account_id":273105,"reputation":2713,"user_id":564503,"accept_rate":76,"display_name":"gaganbm"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1342078307,"creation_date":1342078307,"answer_id":11446998,"question_id":11446973,"body_markdown":"Use the class `BigInteger`. ( I am not sure if that will even work for such huge integers ) ","title":"Find factorial of large numbers in Java","body":"<p>Use the class <code>BigInteger</code>. ( I am not sure if that will even work for such huge integers ) </p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1342078401,"creation_date":1342078401,"answer_id":11447022,"question_id":11446973,"body_markdown":"Hint:  Use the `BigInteger` class, and be prepared to give the JVM a lot of memory.  The value of `8785856!` is a really big number. ","title":"Find factorial of large numbers in Java","body":"<p>Hint:  Use the <code>BigInteger</code> class, and be prepared to give the JVM a lot of memory.  The value of <code>8785856!</code> is a really big number. </p>\n"},{"tags":[],"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1342078544,"creation_date":1342078544,"answer_id":11447062,"question_id":11446973,"body_markdown":"[`Infinity`][1] is a special reserved value in the [`Double`][2] class used when you have exceed the maximum number the a `double` can hold.\r\n\r\nIf you want your code to work, use the `BigDecimal` class, but given the input number, don&#39;t expect your program to finish execution any time soon.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/lang/Double.html#POSITIVE_INFINITY\r\n  [2]: http://docs.oracle.com/javase/6/docs/api/java/lang/Double.html","title":"Find factorial of large numbers in Java","body":"<p><a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/Double.html#POSITIVE_INFINITY\" rel=\"nofollow\"><code>Infinity</code></a> is a special reserved value in the <a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/Double.html\" rel=\"nofollow\"><code>Double</code></a> class used when you have exceed the maximum number the a <code>double</code> can hold.</p>\n\n<p>If you want your code to work, use the <code>BigDecimal</code> class, but given the input number, don't expect your program to finish execution any time soon.</p>\n"},{"tags":[],"owner":{"account_id":1283901,"reputation":583,"user_id":1237375,"accept_rate":83,"display_name":"2v0mjdrl"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1342078545,"creation_date":1342078545,"answer_id":11447063,"question_id":11446973,"body_markdown":"You might want to reconsider calculating this huge value. [Wolfram Alpha&#39;s Approximation][1] suggests it will most certainly not fit in your main memory to be displayed.\r\n\r\n\r\n  [1]: http://www.wolframalpha.com/input/?i=8785856!","title":"Find factorial of large numbers in Java","body":"<p>You might want to reconsider calculating this huge value. <a href=\"http://www.wolframalpha.com/input/?i=8785856!\">Wolfram Alpha's Approximation</a> suggests it will most certainly not fit in your main memory to be displayed.</p>\n"},{"tags":[],"owner":{"account_id":387023,"reputation":5320,"user_id":1411866,"accept_rate":36,"display_name":"manurajhada"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1342079406,"creation_date":1342079406,"answer_id":11447287,"question_id":11446973,"body_markdown":"\tpublic static void main(String[] args) {\r\n\t\tBigInteger fact = BigInteger.valueOf(1);\r\n\t\tfor (int i = 1; i &lt;= 8785856; i++)\r\n\t\t\tfact = fact.multiply(BigInteger.valueOf(i));\r\n\t\tSystem.out.println(fact);\r\n\t}","title":"Find factorial of large numbers in Java","body":"<pre><code>public static void main(String[] args) {\n    BigInteger fact = BigInteger.valueOf(1);\n    for (int i = 1; i &lt;= 8785856; i++)\n        fact = fact.multiply(BigInteger.valueOf(i));\n    System.out.println(fact);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2892197,"reputation":452,"user_id":2480716,"accept_rate":71,"display_name":"Katie"},"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1482334387,"creation_date":1437911955,"answer_id":31636717,"question_id":11446973,"body_markdown":"This code should work fine  :-\r\n     \r\n    public class BigMath {\r\n    \tpublic static String factorial(int n) {\r\n    \t\treturn factorial(n, 300);\r\n    \t}\r\n    \r\n    \tprivate static String factorial(int n, int maxSize) {\r\n    \t\tint res[] = new int[maxSize];\r\n    \t\tres[0] = 1; // Initialize result\r\n    \t\tint res_size = 1;\r\n    \r\n    \t\t// Apply simple factorial formula n! = 1 * 2 * 3 * 4... * n\r\n    \t\tfor (int x = 2; x &lt;= n; x++) {\r\n    \t\t\tres_size = multiply(x, res, res_size);\r\n    \t\t}\r\n    \r\n    \t\tStringBuffer buff = new StringBuffer();\r\n    \t\tfor (int i = res_size - 1; i &gt;= 0; i--) {\r\n    \t\t\tbuff.append(res[i]);\r\n    \t\t}\r\n    \r\n    \t\treturn buff.toString();\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * This function multiplies x with the number represented by res[]. res_size\r\n    \t * is size of res[] or number of digits in the number represented by res[].\r\n    \t * This function uses simple school mathematics for multiplication.\r\n    \t * \r\n    \t * This function may value of res_size and returns the new value of res_size.\r\n    \t */\r\n    \tprivate static int multiply(int x, int res[], int res_size) {\r\n    \t\tint carry = 0; // Initialize carry.\r\n    \r\n    \t\t// One by one multiply n with individual digits of res[].\r\n    \t\tfor (int i = 0; i &lt; res_size; i++) {\r\n    \t\t\tint prod = res[i] * x + carry;\r\n    \t\t\tres[i] = prod % 10; // Store last digit of &#39;prod&#39; in res[]\r\n    \t\t\tcarry = prod / 10;  // Put rest in carry\r\n    \t\t}\r\n    \r\n    \t\t// Put carry in res and increase result size.\r\n    \t\twhile (carry != 0) {\r\n    \t\t\tres[res_size] = carry % 10;\r\n    \t\t\tcarry = carry / 10;\r\n    \t\t\tres_size++;\r\n    \t\t}\r\n    \r\n    \t\treturn res_size;\r\n    \t}\r\n    \r\n    \t/** Driver method. */\r\n    \tpublic static void main(String[] args) {\r\n    \t\tint n = 100;\r\n    \r\n    \t\tSystem.out.printf(&quot;Factorial %d = %s%n&quot;, n, factorial(n));\r\n    \t}\r\n    }","title":"Find factorial of large numbers in Java","body":"<p>This code should work fine  :-</p>\n\n<pre><code>public class BigMath {\n    public static String factorial(int n) {\n        return factorial(n, 300);\n    }\n\n    private static String factorial(int n, int maxSize) {\n        int res[] = new int[maxSize];\n        res[0] = 1; // Initialize result\n        int res_size = 1;\n\n        // Apply simple factorial formula n! = 1 * 2 * 3 * 4... * n\n        for (int x = 2; x &lt;= n; x++) {\n            res_size = multiply(x, res, res_size);\n        }\n\n        StringBuffer buff = new StringBuffer();\n        for (int i = res_size - 1; i &gt;= 0; i--) {\n            buff.append(res[i]);\n        }\n\n        return buff.toString();\n    }\n\n    /**\n     * This function multiplies x with the number represented by res[]. res_size\n     * is size of res[] or number of digits in the number represented by res[].\n     * This function uses simple school mathematics for multiplication.\n     * \n     * This function may value of res_size and returns the new value of res_size.\n     */\n    private static int multiply(int x, int res[], int res_size) {\n        int carry = 0; // Initialize carry.\n\n        // One by one multiply n with individual digits of res[].\n        for (int i = 0; i &lt; res_size; i++) {\n            int prod = res[i] * x + carry;\n            res[i] = prod % 10; // Store last digit of 'prod' in res[]\n            carry = prod / 10;  // Put rest in carry\n        }\n\n        // Put carry in res and increase result size.\n        while (carry != 0) {\n            res[res_size] = carry % 10;\n            carry = carry / 10;\n            res_size++;\n        }\n\n        return res_size;\n    }\n\n    /** Driver method. */\n    public static void main(String[] args) {\n        int n = 100;\n\n        System.out.printf(\"Factorial %d = %s%n\", n, factorial(n));\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1400553,"reputation":1715,"user_id":1329426,"display_name":"Jool"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1441023510,"creation_date":1441023510,"answer_id":32311079,"question_id":11446973,"body_markdown":"The above solutions for your problem (8785856!) using BigInteger would take literally hours of CPU time if not days.  Do you need the exact result or would an approximation suffice?\r\n\r\nThere is a mathematical approach called &quot;[Sterling&#39;s Approximation][2]\r\n&quot; which can be computed simply and fast, and the following is Gosper&#39;s improvement: \r\n[![enter image description here][1]][1]\r\n\r\n  [1]: http://i.stack.imgur.com/kYp8B.png\r\n  [2]: http://mathworld.wolfram.com/StirlingsApproximation.html","title":"Find factorial of large numbers in Java","body":"<p>The above solutions for your problem (8785856!) using BigInteger would take literally hours of CPU time if not days.  Do you need the exact result or would an approximation suffice?</p>\n\n<p>There is a mathematical approach called \"<a href=\"http://mathworld.wolfram.com/StirlingsApproximation.html\" rel=\"nofollow noreferrer\">Sterling's Approximation</a>\n\" which can be computed simply and fast, and the following is Gosper's improvement: \n<a href=\"https://i.stack.imgur.com/kYp8B.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kYp8B.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":11503584,"reputation":16,"user_id":8430612,"display_name":"PR."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1502133465,"creation_date":1502133465,"answer_id":45554239,"question_id":11446973,"body_markdown":"     import java.util.*;\r\n     import java.math.*;\r\n\r\n    class main\r\n    {\r\n    public static void main(String args[])\r\n    {\r\n        Scanner sc= new Scanner(System.in);\r\n      \r\n            int i;\r\n            int n=sc.nextInt();\r\n            \r\n            \r\n          BigInteger fact = BigInteger.valueOf(1);\r\n          \r\n            for ( i = 1; i &lt;= n; i++)\r\n            {\r\n                fact = fact.multiply(BigInteger.valueOf(i));\r\n            }\r\n            System.out.println(fact);\r\n  \r\n    }\r\n    }","title":"Find factorial of large numbers in Java","body":"<pre><code> import java.util.*;\n import java.math.*;\n\nclass main\n{\npublic static void main(String args[])\n{\n    Scanner sc= new Scanner(System.in);\n\n        int i;\n        int n=sc.nextInt();\n\n\n      BigInteger fact = BigInteger.valueOf(1);\n\n        for ( i = 1; i &lt;= n; i++)\n        {\n            fact = fact.multiply(BigInteger.valueOf(i));\n        }\n        System.out.println(fact);\n\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13272495,"reputation":1,"user_id":9583015,"display_name":"Ruchica Singh"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1522614025,"creation_date":1522614025,"answer_id":49602273,"question_id":11446973,"body_markdown":"    import java.util.Scanner;\r\n    \r\n    \r\n    public class factorial {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tSystem.out.println(&quot;Enter the number : &quot;);\r\n    \t\tScanner s=new Scanner(System.in);\r\n    \t\tint n=s.nextInt();\r\n    \t\tfactorial f=new factorial();\r\n    \t\tint result=f.fact(n);\r\n    \t\tSystem.out.println(&quot;factorial of &quot;+n+&quot; is &quot;+result);\r\n    \t}\r\n    \tint fact(int a)\r\n    \t{\r\n    \t\tif(a==1)\r\n    \t\t\treturn 1;\r\n    \t\telse\r\n    \t\t\treturn a*fact(a-1);\r\n    \t}\r\n    \r\n    }\r\n\r\n","title":"Find factorial of large numbers in Java","body":"<pre><code>import java.util.Scanner;\n\n\npublic class factorial {\n    public static void main(String[] args) {\n        System.out.println(\"Enter the number : \");\n        Scanner s=new Scanner(System.in);\n        int n=s.nextInt();\n        factorial f=new factorial();\n        int result=f.fact(n);\n        System.out.println(\"factorial of \"+n+\" is \"+result);\n    }\n    int fact(int a)\n    {\n        if(a==1)\n            return 1;\n        else\n            return a*fact(a-1);\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user9623263"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1528599022,"creation_date":1528599022,"answer_id":50780171,"question_id":11446973,"body_markdown":"Try this:\r\n\r\n    import java.math.BigInteger;\r\n    \r\n    public class LargeFactorial\r\n    {\r\n        public static void main(String[] args)\r\n        {\r\n            int n = 50; \r\n        }\r\n        public static BigInteger factorial(int n)\r\n        {\r\n           BigInteger result = BigInteger.ONE;\r\n           for (int i = 1; i &lt;= n; i++)\r\n               result = result.multiply(new BigInteger(i + &quot;&quot;));\r\n           return result;\r\n        }\r\n    }","title":"Find factorial of large numbers in Java","body":"<p>Try this:</p>\n\n<pre><code>import java.math.BigInteger;\n\npublic class LargeFactorial\n{\n    public static void main(String[] args)\n    {\n        int n = 50; \n    }\n    public static BigInteger factorial(int n)\n    {\n       BigInteger result = BigInteger.ONE;\n       for (int i = 1; i &lt;= n; i++)\n           result = result.multiply(new BigInteger(i + \"\"));\n       return result;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14713766,"reputation":1,"user_id":10626342,"display_name":"Roshan Tharanga"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1542798005,"creation_date":1542798005,"answer_id":53410658,"question_id":11446973,"body_markdown":"\r\n        \r\n        Scanner r = new Scanner(System.in);\r\n        System.out.print(&quot;Input Number : &quot;);\r\n        int num = r.nextInt();\r\n        int ans = 1;\r\n        if (num &lt;= 0) {\r\n            ans = 0;\r\n        }\r\n        while (num &gt; 0) {\r\n            System.out.println(num + &quot; x &quot;);\r\n            ans *= num--;\r\n        }\r\n        System.out.println(&quot;\\b\\b=&quot; + ans);","title":"Find factorial of large numbers in Java","body":"<pre><code>    Scanner r = new Scanner(System.in);\n    System.out.print(\"Input Number : \");\n    int num = r.nextInt();\n    int ans = 1;\n    if (num &lt;= 0) {\n        ans = 0;\n    }\n    while (num &gt; 0) {\n        System.out.println(num + \" x \");\n        ans *= num--;\n    }\n    System.out.println(\"\\b\\b=\" + ans);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2111893,"reputation":820,"user_id":1877019,"display_name":"Mahabub Karim"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1572158237,"creation_date":1572158237,"answer_id":58577120,"question_id":11446973,"body_markdown":"        public static void main (String[] args) throws java.lang.Exception\r\n        {\r\n            BigInteger fact= BigInteger.ONE;\r\n            int factorialNo = 8785856 ;\r\n\r\n            for (int i = 2; i &lt;= factorialNo; i++) {\r\n                  fact = fact.multiply(new BigInteger(String.valueOf(i)));\r\n            }\r\n\r\n            System.out.println(&quot;Factorial of the given number is = &quot; + fact);\r\n         }","title":"Find factorial of large numbers in Java","body":"<pre><code>    public static void main (String[] args) throws java.lang.Exception\n    {\n        BigInteger fact= BigInteger.ONE;\n        int factorialNo = 8785856 ;\n\n        for (int i = 2; i &lt;= factorialNo; i++) {\n              fact = fact.multiply(new BigInteger(String.valueOf(i)));\n        }\n\n        System.out.println(\"Factorial of the given number is = \" + fact);\n     }\n</code></pre>\n"}],"owner":{"account_id":1608422,"reputation":1803,"user_id":1488014,"accept_rate":79,"display_name":"Himanshu Aggarwal"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32024,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":11447287,"answer_count":12,"score":7,"last_activity_date":1640864717,"creation_date":1342078183,"question_id":11446973,"body_markdown":"I tried to find the factorial of a large number e.g. 8785856 in a typical way using for-loop and double data type.\r\n\r\nBut it is displaying infinity as the result, may be because it is exceeding its limit.\r\n\r\nSo please guide me the way to find the factorial of a very large number.\r\n\r\nMy code:\r\n\r\n    class abc\r\n    {\r\n        public static void main (String[]args)\r\n        {\r\n            double fact=1;\r\n            for(int i=1;i&lt;=8785856;i++)\r\n            {\r\n                fact=fact*i;\r\n            }\r\n\r\n            System.out.println(fact);\r\n        }\r\n    }\r\n\r\n\r\nOutput:-\r\n\r\n    Infinity\r\n\r\n\r\nI am new to Java but have learned some concepts of IO-handling and all.\r\n\r\n","title":"Find factorial of large numbers in Java","body":"<p>I tried to find the factorial of a large number e.g. 8785856 in a typical way using for-loop and double data type.</p>\n\n<p>But it is displaying infinity as the result, may be because it is exceeding its limit.</p>\n\n<p>So please guide me the way to find the factorial of a very large number.</p>\n\n<p>My code:</p>\n\n<pre><code>class abc\n{\n    public static void main (String[]args)\n    {\n        double fact=1;\n        for(int i=1;i&lt;=8785856;i++)\n        {\n            fact=fact*i;\n        }\n\n        System.out.println(fact);\n    }\n}\n</code></pre>\n\n<p>Output:-</p>\n\n<pre><code>Infinity\n</code></pre>\n\n<p>I am new to Java but have learned some concepts of IO-handling and all.</p>\n"},{"tags":["java","swing","geometry","awt"],"comments":[{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":0,"creation_date":1574451157,"post_id":59000603,"comment_id":104251556,"body_markdown":"Your question is unclear to me. What specifically are you struggling with after splitting areas?","body":"Your question is unclear to me. What specifically are you struggling with after splitting areas?"},{"owner":{"account_id":15823468,"reputation":41,"user_id":11417138,"display_name":"GabParrot"},"score":0,"creation_date":1574452001,"post_id":59000603,"comment_id":104251912,"body_markdown":"Added clarifications in the main post. Problem is I can&#39;t split those areas in the first place. I get 1 single area object, made of multiple sections that don&#39;t touch, because of substractions (intersect). I want each section to become it&#39;s own area.","body":"Added clarifications in the main post. Problem is I can&#39;t split those areas in the first place. I get 1 single area object, made of multiple sections that don&#39;t touch, because of substractions (intersect). I want each section to become it&#39;s own area."},{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":0,"creation_date":1574453923,"post_id":59000603,"comment_id":104252785,"body_markdown":"There&#39;s no easy answer to this. You might want to check out openCV to see if that might help you","body":"There&#39;s no easy answer to this. You might want to check out openCV to see if that might help you"},{"owner":{"account_id":3583958,"reputation":80987,"user_id":2991525,"display_name":"fabian"},"score":1,"creation_date":1574471120,"post_id":59000603,"comment_id":104257367,"body_markdown":"What&#39;s the reason for tagging this JavaFX? Swing and JavaFX are different apis.","body":"What&#39;s the reason for tagging this JavaFX? Swing and JavaFX are different apis."},{"owner":{"account_id":3660223,"reputation":6093,"user_id":3050249,"display_name":"Miha_x64"},"score":0,"creation_date":1640884403,"post_id":59000603,"comment_id":124683868,"body_markdown":"Here&#39;s what you (and I) have been looking for so long: [javagl.Geom.Shapes#computeSubShapes](https://github.com/javagl/Geom/blob/master/src/main/java/de/javagl/geom/Shapes.java#L429).","body":"Here&#39;s what you (and I) have been looking for so long: <a href=\"https://github.com/javagl/Geom/blob/master/src/main/java/de/javagl/geom/Shapes.java#L429\" rel=\"nofollow noreferrer\">javagl.Geom.Shapes#computeSubShapes</a>."}],"owner":{"account_id":15823468,"reputation":41,"user_id":11417138,"display_name":"GabParrot"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":159,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1640863887,"creation_date":1574450908,"question_id":59000603,"body_markdown":"Edit for the Googlers: I figured it out. I can&#39;t write explicit code but the steps are:\r\n\r\n - Create the big, non singular area (result of a substract or intersect for example)\r\n - if isSingular, do normal code\r\n - else:\r\n      -  create an ArrayList&lt;Area&gt;, to place all the sections into\r\n      -  Create a PathIterator (iter)\r\n      -  Create a Path2D (path)\r\n      -  while not iter isDone (use iter.next() at end of loop)\r\n         - create double[2] (coordsArray) array to place coords\r\n         - create int (coords), the currentSegment or iter. coordsArray is always the arg\r\n         - ifs or switch, \r\n             - when the type of iter is SEG_MOVETO, move path to the coords (x,y)stored in your coordsArray index 0, 1.\r\n             - when the type is SEG_CLOSE, create new Area, with path as arg, add to section array, then path.reset\r\n             - Else, your path must lineTo the coords store in the coordsArray, instead of moveTo\r\n          \r\n    \r\nYou will end up with a new array resulting of those small areas. Iter through this array and do your //normalCode on it as if they had been singular arrays in the first place\r\n\r\n // End of result edit // \r\n\r\n// Initial question\r\n\r\nI get small areas from the result of intersect() on a bigger one serving as boundaries. It crops the small areas. Sometimes it can lead to the area being split in 2 or more sections that don&#39;t touch each other, but counting as 1 area for which isSingular() returns false.\r\n\r\nI need to get the individual dimensions of the bounds2D() of those distinct sections, so I need to split them into different areas. I thought I could do it with PathIterator, but I can&#39;t seem to find a way to distinguish the sections. I already discard areas that are isEmpty(), so if I have &quot;holes&quot; in an area, it&#39;s fine it it creates separate hole areas, they will be discarded afterwards. \r\n\r\nIs it at all possible?\r\n\r\nThanks!\r\n\r\nEdit: clarification\r\n\r\nI create small rectangular areas. Then I intersect() with a bigger, irregular polygon being the boundaries of those smaller areas. Because of the irregular shape of the boundaries, my rectangle can end up being cropped in irregular polygons too. That&#39;s fine. But sometimes, it could cut it in separate halves that don&#39;t touch in any point. Then, those 2 halves count as only 1 areas. I don&#39;t want that. I want to take this area made of 2 halves, and make 2 distinct areas with them.\r\n\r\nBasically, when []__[]  == bigArea, I want to do [],  [] = smallArea1, smallArea2.","title":"Java: Split a non singular java.awt.geom.area into distinct, singular areas","body":"<p>Edit for the Googlers: I figured it out. I can't write explicit code but the steps are:</p>\n\n<ul>\n<li>Create the big, non singular area (result of a substract or intersect for example)</li>\n<li>if isSingular, do normal code</li>\n<li>else:\n\n<ul>\n<li>create an ArrayList, to place all the sections into</li>\n<li>Create a PathIterator (iter)</li>\n<li>Create a Path2D (path)</li>\n<li>while not iter isDone (use iter.next() at end of loop)\n\n<ul>\n<li>create double[2] (coordsArray) array to place coords</li>\n<li>create int (coords), the currentSegment or iter. coordsArray is always the arg</li>\n<li>ifs or switch, \n\n<ul>\n<li>when the type of iter is SEG_MOVETO, move path to the coords (x,y)stored in your coordsArray index 0, 1.</li>\n<li>when the type is SEG_CLOSE, create new Area, with path as arg, add to section array, then path.reset</li>\n<li>Else, your path must lineTo the coords store in the coordsArray, instead of moveTo</li>\n</ul></li>\n</ul></li>\n</ul></li>\n</ul>\n\n<p>You will end up with a new array resulting of those small areas. Iter through this array and do your //normalCode on it as if they had been singular arrays in the first place</p>\n\n<p>// End of result edit // </p>\n\n<p>// Initial question</p>\n\n<p>I get small areas from the result of intersect() on a bigger one serving as boundaries. It crops the small areas. Sometimes it can lead to the area being split in 2 or more sections that don't touch each other, but counting as 1 area for which isSingular() returns false.</p>\n\n<p>I need to get the individual dimensions of the bounds2D() of those distinct sections, so I need to split them into different areas. I thought I could do it with PathIterator, but I can't seem to find a way to distinguish the sections. I already discard areas that are isEmpty(), so if I have \"holes\" in an area, it's fine it it creates separate hole areas, they will be discarded afterwards. </p>\n\n<p>Is it at all possible?</p>\n\n<p>Thanks!</p>\n\n<p>Edit: clarification</p>\n\n<p>I create small rectangular areas. Then I intersect() with a bigger, irregular polygon being the boundaries of those smaller areas. Because of the irregular shape of the boundaries, my rectangle can end up being cropped in irregular polygons too. That's fine. But sometimes, it could cut it in separate halves that don't touch in any point. Then, those 2 halves count as only 1 areas. I don't want that. I want to take this area made of 2 halves, and make 2 distinct areas with them.</p>\n\n<p>Basically, when []__[]  == bigArea, I want to do [],  [] = smallArea1, smallArea2.</p>\n"},{"tags":["java","ssl","resttemplate","applepay"],"comments":[{"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"score":1,"creation_date":1640871031,"post_id":70530987,"comment_id":124679549,"body_markdown":"The `com.removed` code is apparently calling a Java `KeyFactory` instance for RSA. All `KeyFactory` instances reading a privatekey **expect `PKCS8EncodedKeySpec` containing _UNencrypted_ PKCS8** -- see the javadoc in a good IDE or [on Oracle&#39;s website](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/security/spec/PKCS8EncodedKeySpec.html). FYI 48 dec = 30 hex is the tag (first) byte in every ASN.1 DER SEQUENCE, which includes both encrypted _and_ unencrypted PKCS8; it is also ASCII &#39;0&#39; (zero) and thus easily spotted in dumps.","body":"The <code>com.removed</code> code is apparently calling a Java <code>KeyFactory</code> instance for RSA. All <code>KeyFactory</code> instances reading a privatekey <b>expect <code>PKCS8EncodedKeySpec</code> containing <i>UNencrypted</i> PKCS8</b> -- see the javadoc in a good IDE or <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/security/spec/PKCS8EncodedKeySpec.html\" rel=\"nofollow noreferrer\">on Oracle&#39;s website</a>. FYI 48 dec = 30 hex is the tag (first) byte in every ASN.1 DER SEQUENCE, which includes both encrypted <i>and</i> unencrypted PKCS8; it is also ASCII &#39;0&#39; (zero) and thus easily spotted in dumps."},{"owner":{"account_id":21059096,"reputation":121,"user_id":15477842,"display_name":"Mykola"},"score":0,"creation_date":1640875221,"post_id":70530987,"comment_id":124680913,"body_markdown":"@dave_thompson_085, thank you, for information about key and 48 dec. I will try to update my code and question.","body":"@dave_thompson_085, thank you, for information about key and 48 dec. I will try to update my code and question."},{"owner":{"account_id":18160694,"reputation":103,"user_id":13212125,"display_name":"Jacek Kaczmarek"},"score":0,"creation_date":1642080532,"post_id":70530987,"comment_id":124980258,"body_markdown":"@MykolaMurza  any news?","body":"@MykolaMurza  any news?"}],"owner":{"account_id":21059096,"reputation":121,"user_id":15477842,"display_name":"Mykola"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":4051,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1640863628,"creation_date":1640863628,"question_id":70530987,"body_markdown":"I have a merchant certificate from Apple Pay Service, I need to use it to make a POST request on the Apple Pay Service Gateway. I am trying to configure Java Spring Framework RestTemplate. I did a .pem file with certificate and encrypted key to use it in configuration.\r\n\r\nTo write a code I am using the **correct answer** from this [question][1].\r\n\r\n**Error stacktrace:**\r\n```java\r\nCaused by: java.security.spec.InvalidKeySpecException: java.security.InvalidKeyException: IOException : DerValue.getBigIntegerInternal, not expected 48\r\n\tat java.base/sun.security.rsa.RSAKeyFactory.engineGeneratePrivate(RSAKeyFactory.java:252) ~[na:na]\r\n\tat java.base/java.security.KeyFactory.generatePrivate(KeyFactory.java:390) ~[na:na]\r\n\tat com.removed.applecert.ConnectionFactoryCreator.generatePrivateKeyFromDER(ConnectionFactoryCreator.java:69) ~[classes/:na]\r\n\tat com.removed.applecert.ConnectionFactoryCreator.getSocketFactory(ConnectionFactoryCreator.java:43) ~[classes/:na]\r\n\tat com.removed.applecert.SSLConfiguration.sslSocketFactory(SSLConfiguration.java:41) ~[classes/:na]\r\n\tat com.removed.applecert.SSLConfiguration$$EnhancerBySpringCGLIB$$f2e321da.CGLIB$sslSocketFactory$4(&lt;generated&gt;) ~[classes/:na]\r\n\tat com.removed.applecert.SSLConfiguration$$EnhancerBySpringCGLIB$$f2e321da$$FastClassBySpringCGLIB$$2b1ce4c.invoke(&lt;generated&gt;) ~[classes/:na]\r\n\tat org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:244) ~[spring-core-5.3.14.jar:5.3.14]\r\n\tat org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:331) ~[spring-context-5.3.14.jar:5.3.14]\r\n\tat com.removed.applecert.SSLConfiguration$$EnhancerBySpringCGLIB$$f2e321da.sslSocketFactory(&lt;generated&gt;) ~[classes/:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:567) ~[na:na]\r\n\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154) ~[spring-beans-5.3.14.jar:5.3.14]\r\n\t... 25 common frames omitted\r\nCaused by: java.security.InvalidKeyException: IOException : DerValue.getBigIntegerInternal, not expected 48\r\n\tat java.base/sun.security.pkcs.PKCS8Key.decode(PKCS8Key.java:133) ~[na:na]\r\n\tat java.base/sun.security.pkcs.PKCS8Key.&lt;init&gt;(PKCS8Key.java:94) ~[na:na]\r\n\tat java.base/sun.security.rsa.RSAPrivateCrtKeyImpl.&lt;init&gt;(RSAPrivateCrtKeyImpl.java:152) ~[na:na]\r\n\tat java.base/sun.security.rsa.RSAPrivateCrtKeyImpl.newKey(RSAPrivateCrtKeyImpl.java:89) ~[na:na]\r\n\tat java.base/sun.security.rsa.RSAKeyFactory.generatePrivate(RSAKeyFactory.java:343) ~[na:na]\r\n\tat java.base/sun.security.rsa.RSAKeyFactory.engineGeneratePrivate(RSAKeyFactory.java:248) ~[na:na]\r\n\t... 39 common frames omitted\r\n\r\n```\r\n**Note:** Not sure if this could play a role, but if you read the key as an array of bytes, the first value [0] is 48. \r\n\r\nPerhaps this can be done without reassembling the certificate or in some other way, I will be grateful for any recommendations. \r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/33497874/resttemplate-with-pem-certificate","title":"On creation of the private key PKCS8 for the certificate with Java &quot;IOException : DerValue.getBigIntegerInternal, not expected 48&quot;. How to solve?","body":"<p>I have a merchant certificate from Apple Pay Service, I need to use it to make a POST request on the Apple Pay Service Gateway. I am trying to configure Java Spring Framework RestTemplate. I did a .pem file with certificate and encrypted key to use it in configuration.</p>\n<p>To write a code I am using the <strong>correct answer</strong> from this <a href=\"https://stackoverflow.com/questions/33497874/resttemplate-with-pem-certificate\">question</a>.</p>\n<p><strong>Error stacktrace:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>Caused by: java.security.spec.InvalidKeySpecException: java.security.InvalidKeyException: IOException : DerValue.getBigIntegerInternal, not expected 48\n    at java.base/sun.security.rsa.RSAKeyFactory.engineGeneratePrivate(RSAKeyFactory.java:252) ~[na:na]\n    at java.base/java.security.KeyFactory.generatePrivate(KeyFactory.java:390) ~[na:na]\n    at com.removed.applecert.ConnectionFactoryCreator.generatePrivateKeyFromDER(ConnectionFactoryCreator.java:69) ~[classes/:na]\n    at com.removed.applecert.ConnectionFactoryCreator.getSocketFactory(ConnectionFactoryCreator.java:43) ~[classes/:na]\n    at com.removed.applecert.SSLConfiguration.sslSocketFactory(SSLConfiguration.java:41) ~[classes/:na]\n    at com.removed.applecert.SSLConfiguration$$EnhancerBySpringCGLIB$$f2e321da.CGLIB$sslSocketFactory$4(&lt;generated&gt;) ~[classes/:na]\n    at com.removed.applecert.SSLConfiguration$$EnhancerBySpringCGLIB$$f2e321da$$FastClassBySpringCGLIB$$2b1ce4c.invoke(&lt;generated&gt;) ~[classes/:na]\n    at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:244) ~[spring-core-5.3.14.jar:5.3.14]\n    at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:331) ~[spring-context-5.3.14.jar:5.3.14]\n    at com.removed.applecert.SSLConfiguration$$EnhancerBySpringCGLIB$$f2e321da.sslSocketFactory(&lt;generated&gt;) ~[classes/:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:567) ~[na:na]\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154) ~[spring-beans-5.3.14.jar:5.3.14]\n    ... 25 common frames omitted\nCaused by: java.security.InvalidKeyException: IOException : DerValue.getBigIntegerInternal, not expected 48\n    at java.base/sun.security.pkcs.PKCS8Key.decode(PKCS8Key.java:133) ~[na:na]\n    at java.base/sun.security.pkcs.PKCS8Key.&lt;init&gt;(PKCS8Key.java:94) ~[na:na]\n    at java.base/sun.security.rsa.RSAPrivateCrtKeyImpl.&lt;init&gt;(RSAPrivateCrtKeyImpl.java:152) ~[na:na]\n    at java.base/sun.security.rsa.RSAPrivateCrtKeyImpl.newKey(RSAPrivateCrtKeyImpl.java:89) ~[na:na]\n    at java.base/sun.security.rsa.RSAKeyFactory.generatePrivate(RSAKeyFactory.java:343) ~[na:na]\n    at java.base/sun.security.rsa.RSAKeyFactory.engineGeneratePrivate(RSAKeyFactory.java:248) ~[na:na]\n    ... 39 common frames omitted\n\n</code></pre>\n<p><strong>Note:</strong> Not sure if this could play a role, but if you read the key as an array of bytes, the first value [0] is 48.</p>\n<p>Perhaps this can be done without reassembling the certificate or in some other way, I will be grateful for any recommendations.</p>\n"},{"tags":["java","spring-boot","jdbctemplate"],"comments":[{"owner":{"account_id":7373320,"reputation":17364,"user_id":5612858,"display_name":"Arnaud"},"score":0,"creation_date":1640862312,"post_id":70530621,"comment_id":124677004,"body_markdown":"From the first comment here : https://stackoverflow.com/questions/55449496/named-parameter-not-getting-recognized-in-jdbctemplate-queryforlist-method . &quot;JdbcTemplate doesn&#39;t support named parameters. Make sure you use NamedParameterJdbcTemplate.&quot;","body":"From the first comment here : <a href=\"https://stackoverflow.com/questions/55449496/named-parameter-not-getting-recognized-in-jdbctemplate-queryforlist-method\" title=\"named parameter not getting recognized in jdbctemplate queryforlist method\">stackoverflow.com/questions/55449496/&hellip;</a> . &quot;JdbcTemplate doesn&#39;t support named parameters. Make sure you use NamedParameterJdbcTemplate.&quot;"}],"answers":[{"tags":[],"owner":{"account_id":10501614,"reputation":1404,"user_id":7740166,"display_name":"Viettel Solutions"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1640863627,"creation_date":1640862910,"answer_id":70530857,"question_id":70530621,"body_markdown":"You should edit the source code as below.\r\n\r\n```\r\n    @GetMapping\r\n    public ResponseEntity&lt;List&lt;Customer&gt;&gt; getCustomers(@RequestParam(required = false) String traderCode, String compCode) {\r\n        try {\r\n            List&lt;Customer&gt; customers = new ArrayList&lt;Customer&gt;();\r\n            JdbcTemplate template = getDataSource(compCode);\r\n            if (traderCode == null || traderCode == &quot;&quot;){\r\n                customers = template.query(&quot;SELECT * FROM tblCustomer&quot;,\r\n                        new BeanPropertyRowMapper&lt;Customer&gt;(Customer.class));\r\n               \r\n            } else {\r\n                customers = template.query(&quot;SELECT * FROM tblCustomer WHERE TraderCode = :TraderCode&quot;,\r\n                        new MapSqlParameterSource().addValue(&quot;TraderCode&quot;, traderCode),\r\n                        new BeanPropertyRowMapper&lt;Customer&gt;(Customer.class));\r\n            }\r\n\r\n            if (customers.isEmpty())\r\n                return new ResponseEntity&lt;&gt;(HttpStatus.NO_CONTENT);\r\n\r\n            return new ResponseEntity&lt;&gt;(customers, HttpStatus.OK);\r\n        } catch (Exception e) {\r\n            System.out.print(e);\r\n            return  new ResponseEntity&lt;&gt;(null, HttpStatus.INTERNAL_SERVER_ERROR);\r\n        }\r\n    }\r\n```","title":"Trying to do SELECT statement with parameters using Jdbctemplate spring","body":"<p>You should edit the source code as below.</p>\n<pre><code>    @GetMapping\n    public ResponseEntity&lt;List&lt;Customer&gt;&gt; getCustomers(@RequestParam(required = false) String traderCode, String compCode) {\n        try {\n            List&lt;Customer&gt; customers = new ArrayList&lt;Customer&gt;();\n            JdbcTemplate template = getDataSource(compCode);\n            if (traderCode == null || traderCode == &quot;&quot;){\n                customers = template.query(&quot;SELECT * FROM tblCustomer&quot;,\n                        new BeanPropertyRowMapper&lt;Customer&gt;(Customer.class));\n               \n            } else {\n                customers = template.query(&quot;SELECT * FROM tblCustomer WHERE TraderCode = :TraderCode&quot;,\n                        new MapSqlParameterSource().addValue(&quot;TraderCode&quot;, traderCode),\n                        new BeanPropertyRowMapper&lt;Customer&gt;(Customer.class));\n            }\n\n            if (customers.isEmpty())\n                return new ResponseEntity&lt;&gt;(HttpStatus.NO_CONTENT);\n\n            return new ResponseEntity&lt;&gt;(customers, HttpStatus.OK);\n        } catch (Exception e) {\n            System.out.print(e);\n            return  new ResponseEntity&lt;&gt;(null, HttpStatus.INTERNAL_SERVER_ERROR);\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":23783683,"reputation":53,"user_id":17796046,"display_name":"ZhongYu"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":922,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":70530857,"answer_count":1,"score":2,"last_activity_date":1640863627,"creation_date":1640861675,"question_id":70530621,"body_markdown":"This is the error I get when making a request with traderCode params:\r\n\r\n```\r\norg.springframework.dao.TransientDataAccessResourceException: PreparedStatementCallback; SQL [SELECT * FROM tblCustomer WHERE TraderCode = :traderCode;]; The index 1 is out of range.; nested exception is com.microsoft.sqlserver.jdbc.SQLServerException: The index 1 is out of range.\r\n```\r\nThe parameters are provided in Postman:\r\n[Screenshot][1]\r\n\r\nThe full Get Request: \r\n```\r\n    @GetMapping\r\n    public ResponseEntity&lt;List&lt;Customer&gt;&gt; getCustomers(@RequestParam(required = false) String traderCode, String compCode) {\r\n        try {\r\n            List&lt;Customer&gt; customers = new ArrayList&lt;Customer&gt;();\r\n            JdbcTemplate template = getDataSource(compCode);\r\n            if (traderCode == null){\r\n                customers = template.query(&quot;SELECT * FROM tblCustomer;&quot;,\r\n                        new BeanPropertyRowMapper&lt;Customer&gt;(Customer.class));\r\n                //customerRepository.findAll().forEach(customers::add);\r\n            } else {\r\n                customers = template.query(&quot;SELECT * FROM tblCustomer WHERE TraderCode = :traderCode;&quot;,\r\n                        new BeanPropertyRowMapper&lt;Customer&gt;(Customer.class),\r\n                        new MapSqlParameterSource()\r\n                                .addValue(&quot;traderCode&quot;, traderCode));\r\n                //customerRepository.findByTraderCode(traderCode).forEach(customers::add);\r\n            }\r\n\r\n            if (customers.isEmpty())\r\n                return new ResponseEntity&lt;&gt;(HttpStatus.NO_CONTENT);\r\n\r\n            return new ResponseEntity&lt;&gt;(customers, HttpStatus.OK);\r\n        } catch (Exception e) {\r\n            System.out.print(e);\r\n            return  new ResponseEntity&lt;&gt;(null, HttpStatus.INTERNAL_SERVER_ERROR);\r\n        }\r\n    }\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/xDU9l.png","title":"Trying to do SELECT statement with parameters using Jdbctemplate spring","body":"<p>This is the error I get when making a request with traderCode params:</p>\n<pre><code>org.springframework.dao.TransientDataAccessResourceException: PreparedStatementCallback; SQL [SELECT * FROM tblCustomer WHERE TraderCode = :traderCode;]; The index 1 is out of range.; nested exception is com.microsoft.sqlserver.jdbc.SQLServerException: The index 1 is out of range.\n</code></pre>\n<p>The parameters are provided in Postman:\n<a href=\"https://i.stack.imgur.com/xDU9l.png\" rel=\"nofollow noreferrer\">Screenshot</a></p>\n<p>The full Get Request:</p>\n<pre><code>    @GetMapping\n    public ResponseEntity&lt;List&lt;Customer&gt;&gt; getCustomers(@RequestParam(required = false) String traderCode, String compCode) {\n        try {\n            List&lt;Customer&gt; customers = new ArrayList&lt;Customer&gt;();\n            JdbcTemplate template = getDataSource(compCode);\n            if (traderCode == null){\n                customers = template.query(&quot;SELECT * FROM tblCustomer;&quot;,\n                        new BeanPropertyRowMapper&lt;Customer&gt;(Customer.class));\n                //customerRepository.findAll().forEach(customers::add);\n            } else {\n                customers = template.query(&quot;SELECT * FROM tblCustomer WHERE TraderCode = :traderCode;&quot;,\n                        new BeanPropertyRowMapper&lt;Customer&gt;(Customer.class),\n                        new MapSqlParameterSource()\n                                .addValue(&quot;traderCode&quot;, traderCode));\n                //customerRepository.findByTraderCode(traderCode).forEach(customers::add);\n            }\n\n            if (customers.isEmpty())\n                return new ResponseEntity&lt;&gt;(HttpStatus.NO_CONTENT);\n\n            return new ResponseEntity&lt;&gt;(customers, HttpStatus.OK);\n        } catch (Exception e) {\n            System.out.print(e);\n            return  new ResponseEntity&lt;&gt;(null, HttpStatus.INTERNAL_SERVER_ERROR);\n        }\n    }\n</code></pre>\n"},{"tags":["java","video","streaming","xuggler"],"comments":[{"owner":{"account_id":428023,"reputation":15099,"user_id":810077,"accept_rate":83,"display_name":"Chetan Kinger"},"score":1,"creation_date":1486216798,"post_id":42041212,"comment_id":71255759,"body_markdown":"If *google* couldn&#39;t find it for you, no one can.","body":"If <i>google</i> couldn&#39;t find it for you, no one can."},{"owner":{"account_id":212417,"reputation":43624,"user_id":465223,"accept_rate":75,"display_name":"dunni"},"score":0,"creation_date":1486217068,"post_id":42041212,"comment_id":71255839,"body_markdown":"You can find the source code here (as mentioned on their website): https://github.com/artclarke/xuggle-xuggler However, in that README they suggest to use https://github.com/artclarke/humble-video which seems to be maintained.","body":"You can find the source code here (as mentioned on their website): <a href=\"https://github.com/artclarke/xuggle-xuggler\" rel=\"nofollow noreferrer\">github.com/artclarke/xuggle-xuggler</a> However, in that README they suggest to use <a href=\"https://github.com/artclarke/humble-video\" rel=\"nofollow noreferrer\">github.com/artclarke/humble-video</a> which seems to be maintained."},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1486217206,"post_id":42041212,"comment_id":71255879,"body_markdown":"Think about your idea again: the project is dead for 6 years, and just getting access to the files of that product overburdens you... But you seriously consider to add this thing to your delivery? Sorry but how many more alarm bells need start ringing before you will listen? An to make sure you get the message: this is a terrible idea and instead of wasting your time on a dead project you better search for an alternative...","body":"Think about your idea again: the project is dead for 6 years, and just getting access to the files of that product overburdens you... But you seriously consider to add this thing to your delivery? Sorry but how many more alarm bells need start ringing before you will listen? An to make sure you get the message: this is a terrible idea and instead of wasting your time on a dead project you better search for an alternative..."},{"owner":{"account_id":9817078,"reputation":9,"user_id":7273252,"display_name":"Frankiegi"},"score":0,"creation_date":1486217461,"post_id":42041212,"comment_id":71255947,"body_markdown":"I need a simple library to encode a video. Xuggler offers a simple way to do that. Even though this library is pretty old, it&#39;s more than enough to do this job. Everything else would be overkill.","body":"I need a simple library to encode a video. Xuggler offers a simple way to do that. Even though this library is pretty old, it&#39;s more than enough to do this job. Everything else would be overkill."},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1486218692,"post_id":42041212,"comment_id":71256340,"body_markdown":"Until you run into a bug that is. Or you find that the Interfaces are horribly outdated by todays means so you start creating adapters all over the place to shield you from that. The crucial point is: anything that is part of your product adds risk to it. It is hard enough to deal with 3rd party components when the owners react poorly to your defects or feature requests. But you will not even have somebody to talk to!","body":"Until you run into a bug that is. Or you find that the Interfaces are horribly outdated by todays means so you start creating adapters all over the place to shield you from that. The crucial point is: anything that is part of your product adds risk to it. It is hard enough to deal with 3rd party components when the owners react poorly to your defects or feature requests. But you will not even have somebody to talk to!"},{"owner":{"account_id":9817078,"reputation":9,"user_id":7273252,"display_name":"Frankiegi"},"score":0,"creation_date":1486298923,"post_id":42041212,"comment_id":71276561,"body_markdown":"Well, you are right in terms of the bugs and of course the support. May you suggest another library?","body":"Well, you are right in terms of the bugs and of course the support. May you suggest another library?"}],"answers":[{"tags":[],"owner":{"account_id":9817078,"reputation":9,"user_id":7273252,"display_name":"Frankiegi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1486217984,"creation_date":1486217984,"answer_id":42041411,"question_id":42041212,"body_markdown":"**For everyone who his searching for this library too**\r\n\r\nAs dunni mentioned, the sources can be found here: github.com/artclarke/xuggle-xuggler\r\n\r\nThe binarys here: http://www.compadre.org/osp/items/detail.cfm?ID=11606","title":"How to download and install Xuggler for Java?","body":"<p><strong>For everyone who his searching for this library too</strong></p>\n\n<p>As dunni mentioned, the sources can be found here: github.com/artclarke/xuggle-xuggler</p>\n\n<p>The binarys here: <a href=\"http://www.compadre.org/osp/items/detail.cfm?ID=11606\" rel=\"nofollow noreferrer\">http://www.compadre.org/osp/items/detail.cfm?ID=11606</a></p>\n"}],"owner":{"account_id":9817078,"reputation":9,"user_id":7273252,"display_name":"Frankiegi"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1178,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1640863305,"creation_date":1486216649,"question_id":42041212,"body_markdown":"I would like to use Xuggler in my Java-Project. As far as i know, the support for this library stopped in 2011. The links on their download-page are all outdated and i couldn&#39;t find another source for the files. Now where can i get those files?\r\n\r\nIm working on Windows.\r\n\r\nThanks in advance!","title":"How to download and install Xuggler for Java?","body":"<p>I would like to use Xuggler in my Java-Project. As far as i know, the support for this library stopped in 2011. The links on their download-page are all outdated and i couldn't find another source for the files. Now where can i get those files?</p>\n\n<p>Im working on Windows.</p>\n\n<p>Thanks in advance!</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":8270,"page":1722,"page_size":100}
