{"items":[{"tags":["java","ubuntu","jenkins"],"comments":[{"owner":{"account_id":4508992,"reputation":1563,"user_id":3665662,"display_name":"amer"},"score":0,"creation_date":1577176245,"post_id":59465780,"comment_id":105111659,"body_markdown":"Can this thread help you: https://issues.jenkins-ci.org/browse/JENKINS-16273","body":"Can this thread help you: <a href=\"https://issues.jenkins-ci.org/browse/JENKINS-16273\" rel=\"nofollow noreferrer\">issues.jenkins-ci.org/browse/JENKINS-16273</a>"},{"owner":{"account_id":17044282,"reputation":11,"user_id":12331486,"display_name":"Opher Lubzens"},"score":0,"creation_date":1577182149,"post_id":59465780,"comment_id":105113767,"body_markdown":"tried. didn&#39;t help, thanks.","body":"tried. didn&#39;t help, thanks."}],"answers":[{"comments":[{"owner":{"account_id":7316829,"reputation":237,"user_id":5574192,"display_name":"Hatley"},"score":0,"creation_date":1618350280,"post_id":61951909,"comment_id":118574791,"body_markdown":"PASSWORD - it may be the Jenkins user&#39;s password, or it may be the user&#39;s &quot;API token&quot; that can be generated for each user under their Jenkins account&#39;s &#39;Configure&#39; page.","body":"PASSWORD - it may be the Jenkins user&#39;s password, or it may be the user&#39;s &quot;API token&quot; that can be generated for each user under their Jenkins account&#39;s &#39;Configure&#39; page."}],"tags":[],"owner":{"account_id":4607011,"reputation":31,"user_id":3736182,"display_name":"Guolirong"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1590139890,"creation_date":1590139890,"answer_id":61951909,"question_id":59465780,"body_markdown":"Using this option:    -jnlpCredentials USER:PASSWORD\r\n\r\nUSER is your Jenkins user ID","title":"Jenkins returns 403 forbidden when slaves try to contact it","body":"<p>Using this option:    -jnlpCredentials USER:PASSWORD</p>\n\n<p>USER is your Jenkins user ID</p>\n"},{"tags":[],"owner":{"account_id":1946027,"reputation":617,"user_id":1751166,"display_name":"PravyNandas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668898675,"creation_date":1668898675,"answer_id":74504402,"question_id":59465780,"body_markdown":"In latest version the option is -auth USER:PASSWORD\r\n\r\nUSER - username of the jenkins master\r\nPASSWORD - that user&#39;s password (Or API key setup from account details)","title":"Jenkins returns 403 forbidden when slaves try to contact it","body":"<p>In latest version the option is -auth USER:PASSWORD</p>\n<p>USER - username of the jenkins master\nPASSWORD - that user's password (Or API key setup from account details)</p>\n"},{"comments":[{"owner":{"account_id":1821904,"reputation":730,"user_id":1655780,"display_name":"Steven the Easily Amused"},"score":1,"creation_date":1687455084,"post_id":76523621,"comment_id":134942733,"body_markdown":"It&#39;s not advisable to allow unauthenticated (anonymous) read access.  And it is worse to let an agent register without authentication.  These actions are not required for agents to register and should not be used.","body":"It&#39;s not advisable to allow unauthenticated (anonymous) read access.  And it is worse to let an agent register without authentication.  These actions are not required for agents to register and should not be used."}],"tags":[],"owner":{"account_id":28866205,"reputation":1,"user_id":22108913,"display_name":"Leo Bernat"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687352750,"creation_date":1687352750,"answer_id":76523621,"question_id":59465780,"body_markdown":"Error : \r\nFailed to obtain https://jenkins.site/manage/computer/ValidateNode/jenkins-agent.jnlp\r\njava.io.IOException: Failed to load https://jenkins.site/manage/computer/ValidateNode/jenkins-agent.jnlp: 403 null\r\n\r\nFix : \r\n1. Navigate to https://jenkins.site/manage/configureSecurity/\r\n2. Anonymous user need to have Read, connect &amp; Discover permission","title":"Jenkins returns 403 forbidden when slaves try to contact it","body":"<p>Error :\nFailed to obtain <a href=\"https://jenkins.site/manage/computer/ValidateNode/jenkins-agent.jnlp\" rel=\"nofollow noreferrer\">https://jenkins.site/manage/computer/ValidateNode/jenkins-agent.jnlp</a>\njava.io.IOException: Failed to load <a href=\"https://jenkins.site/manage/computer/ValidateNode/jenkins-agent.jnlp\" rel=\"nofollow noreferrer\">https://jenkins.site/manage/computer/ValidateNode/jenkins-agent.jnlp</a>: 403 null</p>\n<p>Fix :</p>\n<ol>\n<li>Navigate to <a href=\"https://jenkins.site/manage/configureSecurity/\" rel=\"nofollow noreferrer\">https://jenkins.site/manage/configureSecurity/</a></li>\n<li>Anonymous user need to have Read, connect &amp; Discover permission</li>\n</ol>\n"}],"owner":{"account_id":17044282,"reputation":11,"user_id":12331486,"display_name":"Opher Lubzens"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4709,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1687352750,"creation_date":1577175152,"question_id":59465780,"body_markdown":"I installed jenkins on Ubuntu and when I try to run the agents to create nodes I get back an IOException:\r\n\r\n    Failing to obtain http://&lt;Master IP&gt;:8090/computer/&lt;Slave IP&gt;/slave-agent.jnlp\r\n    java.io.IOException: Failed to load http://&lt;Master IP&gt;:8090/computer/&lt;Slave IP&gt;/slave-agent.jnlp: 403 Forbidden\r\n            at hudson.remoting.Launcher.parseJnlpArguments(Launcher.java:499)\r\n            at hudson.remoting.Launcher.run(Launcher.java:325)\r\n            at hudson.remoting.Launcher.main(Launcher.java:283)\r\n\r\n\r\nAs far as I can tell iptables isn&#39;t up and I can&#39;t find the reason behind it.","title":"Jenkins returns 403 forbidden when slaves try to contact it","body":"<p>I installed jenkins on Ubuntu and when I try to run the agents to create nodes I get back an IOException:</p>\n\n<pre><code>Failing to obtain http://&lt;Master IP&gt;:8090/computer/&lt;Slave IP&gt;/slave-agent.jnlp\njava.io.IOException: Failed to load http://&lt;Master IP&gt;:8090/computer/&lt;Slave IP&gt;/slave-agent.jnlp: 403 Forbidden\n        at hudson.remoting.Launcher.parseJnlpArguments(Launcher.java:499)\n        at hudson.remoting.Launcher.run(Launcher.java:325)\n        at hudson.remoting.Launcher.main(Launcher.java:283)\n</code></pre>\n\n<p>As far as I can tell iptables isn't up and I can't find the reason behind it.</p>\n"},{"tags":["java","spring","spring-data","spring-data-mongodb","mockmvc"],"answers":[{"comments":[{"owner":{"account_id":1628535,"reputation":5864,"user_id":1503538,"accept_rate":100,"display_name":"snovelli"},"score":1,"creation_date":1533145482,"post_id":51622661,"comment_id":90243059,"body_markdown":"The whole security filter chain is there, in fact the authentication context is there when I call repository.findAll(). But MockMvc for some reason cleans it and that makes a perfectly reasonable test case not possible to execute. Anyway, I tried your approach but I get the same error. Thanks a lot for trying to help","body":"The whole security filter chain is there, in fact the authentication context is there when I call repository.findAll(). But MockMvc for some reason cleans it and that makes a perfectly reasonable test case not possible to execute. Anyway, I tried your approach but I get the same error. Thanks a lot for trying to help"}],"tags":[],"owner":{"account_id":6629715,"reputation":6021,"user_id":5118762,"display_name":"brass monkey"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1533074085,"creation_date":1533074085,"answer_id":51622661,"question_id":51622300,"body_markdown":"I think instead of using the `AutoConfigureMockMvc` annotation you could configure `MockMvc` manually and configure Spring security as follows:\r\n\r\n    import static org.springframework.security.test.web.servlet.setup.SecurityMockMvcConfigurers.*;\r\n    \r\n    @RunWith(SpringRunner.class)\r\n    @SpringBootTest\r\n    public class BookCustomRepositoryIntegrationTest {\r\n        \r\n        @Before\r\n        public void setup() {\r\n            mockMvc = MockMvcBuilders\r\n                    .webAppContextSetup(context)\r\n                    .apply(springSecurity()) 1\r\n                    .build();\r\n        }\r\n        // ...\r\n    }\r\n\r\nAs the [documentation][1] states:\r\n\r\n&gt;In order to use Spring Security with Spring MVC Test it is necessary to add the Spring Security FilterChainProxy as a Filter. It is also necessary to add Spring Security’s TestSecurityContextHolderPostProcessor to support Running as a User in Spring MVC Test with Annotations. This can be done using Spring Security’s SecurityMockMvcConfigurers.springSecurity().\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-security/site/docs/current/reference/html/test-mockmvc.html","title":"MockMvc seems to be clear SecurityContext after performing request (java.lang.IllegalArgumentException: Authentication object cannot be null)","body":"<p>I think instead of using the <code>AutoConfigureMockMvc</code> annotation you could configure <code>MockMvc</code> manually and configure Spring security as follows:</p>\n\n<pre><code>import static org.springframework.security.test.web.servlet.setup.SecurityMockMvcConfigurers.*;\n\n@RunWith(SpringRunner.class)\n@SpringBootTest\npublic class BookCustomRepositoryIntegrationTest {\n\n    @Before\n    public void setup() {\n        mockMvc = MockMvcBuilders\n                .webAppContextSetup(context)\n                .apply(springSecurity()) 1\n                .build();\n    }\n    // ...\n}\n</code></pre>\n\n<p>As the <a href=\"https://docs.spring.io/spring-security/site/docs/current/reference/html/test-mockmvc.html\" rel=\"nofollow noreferrer\">documentation</a> states:</p>\n\n<blockquote>\n  <p>In order to use Spring Security with Spring MVC Test it is necessary to add the Spring Security FilterChainProxy as a Filter. It is also necessary to add Spring Security’s TestSecurityContextHolderPostProcessor to support Running as a User in Spring MVC Test with Annotations. This can be done using Spring Security’s SecurityMockMvcConfigurers.springSecurity().</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":1628535,"reputation":5864,"user_id":1503538,"accept_rate":100,"display_name":"snovelli"},"score":4,"creation_date":1534602603,"post_id":51899431,"comment_id":90769357,"body_markdown":"Hi @seregamorph, than you for your suggestion. This is the best workaround I&#39;ve seen so far, so I&#39;ll upvote it. However, I&#39;m not convinced that manually setting the security context after each interaction with MockMvc makes for a very readable test so I wouldn&#39;t consider it a definitive solution.","body":"Hi @seregamorph, than you for your suggestion. This is the best workaround I&#39;ve seen so far, so I&#39;ll upvote it. However, I&#39;m not convinced that manually setting the security context after each interaction with MockMvc makes for a very readable test so I wouldn&#39;t consider it a definitive solution."},{"owner":{"account_id":2090041,"reputation":2250,"user_id":1860089,"accept_rate":40,"display_name":"Amnon"},"score":0,"creation_date":1698404739,"post_id":51899431,"comment_id":136404354,"body_markdown":"I used this workaround as well, as I am maintaining a huge codebase with many tests that look like that.","body":"I used this workaround as well, as I am maintaining a huge codebase with many tests that look like that."}],"tags":[],"owner":{"account_id":4238302,"reputation":443,"user_id":3468905,"display_name":"seregamorph"},"comment_count":2,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1534522707,"creation_date":1534522707,"answer_id":51899431,"question_id":51622300,"body_markdown":"Your case does not work, because SecurityContextPersistenceFilter and FilterChainProxy filters clear SecurityContextHolder, but the `TestSecurityContextHolder` (filled by `WithSecurityContextTestExecutionListener`) still contains SecurityContext.\r\n\r\nTry this approach:\r\n\r\n    @Test\r\n    @WithMockUser\r\n    public void reproduceBug() throws Exception {\r\n        repository.findAll();\r\n        mockMvc.perform(get(&quot;/books&quot;)\r\n                .contentType(APPLICATION_JSON_UTF8))\r\n                .andExpect(status().isOk());\r\n        SecurityContextHolder.setContext(TestSecurityContextHolder.getContext());\r\n        repository.findAll();\r\n    }\r\n\r\n","title":"MockMvc seems to be clear SecurityContext after performing request (java.lang.IllegalArgumentException: Authentication object cannot be null)","body":"<p>Your case does not work, because SecurityContextPersistenceFilter and FilterChainProxy filters clear SecurityContextHolder, but the <code>TestSecurityContextHolder</code> (filled by <code>WithSecurityContextTestExecutionListener</code>) still contains SecurityContext.</p>\n\n<p>Try this approach:</p>\n\n<pre><code>@Test\n@WithMockUser\npublic void reproduceBug() throws Exception {\n    repository.findAll();\n    mockMvc.perform(get(\"/books\")\n            .contentType(APPLICATION_JSON_UTF8))\n            .andExpect(status().isOk());\n    SecurityContextHolder.setContext(TestSecurityContextHolder.getContext());\n    repository.findAll();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1003860,"reputation":69,"user_id":7385326,"display_name":"Stefan"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1617181881,"creation_date":1617176838,"answer_id":66883704,"question_id":51622300,"body_markdown":"I just now found a nice solution to this problem. You can register a MockMvcBuilderCustomizer bean in your test configuration and all works fine.\r\n\r\n    public class MockMvcTestSecurityContextPropagationCustomizer implements MockMvcBuilderCustomizer {\r\n\r\n    @Override\r\n    public void customize(ConfigurableMockMvcBuilder&lt;?&gt; builder) {\r\n        builder.alwaysDo(result -&gt; {\r\n            log.debug(&quot;resetting SecurityContextHolder to TestSecurityContextHolder&quot;);\r\n            SecurityContextHolder.setContext(TestSecurityContextHolder.getContext());\r\n        });\r\n    }\r\n\r\n}\r\n\r\n\r\n[spring-boot]","title":"MockMvc seems to be clear SecurityContext after performing request (java.lang.IllegalArgumentException: Authentication object cannot be null)","body":"<p>I just now found a nice solution to this problem. You can register a MockMvcBuilderCustomizer bean in your test configuration and all works fine.</p>\n<pre><code>public class MockMvcTestSecurityContextPropagationCustomizer implements MockMvcBuilderCustomizer {\n\n@Override\npublic void customize(ConfigurableMockMvcBuilder&lt;?&gt; builder) {\n    builder.alwaysDo(result -&gt; {\n        log.debug(&quot;resetting SecurityContextHolder to TestSecurityContextHolder&quot;);\n        SecurityContextHolder.setContext(TestSecurityContextHolder.getContext());\n    });\n}\n</code></pre>\n<p>}</p>\n<p>[spring-boot]</p>\n"},{"tags":[],"owner":{"account_id":5888943,"reputation":1,"user_id":4636142,"display_name":"Marwen Mighri"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664724013,"creation_date":1664722313,"answer_id":73926790,"question_id":51622300,"body_markdown":"a good practice would be to separate the tests with the RestController from the tests of the other layers of the application. In your case i think you should not mix rest calls tests with respositories calls tests ..\r\n\r\ni guess you should make a mock mvc call to test your &quot;repository.findAll()&quot; \r\n\r\nI&#39;m working with Spring Boot 2.6.7 ( spring-security-test-5.6.3.jar ) and Junit 5 and the TestSecurityContextHolder holds the security context even after performing a MockMVC http request.\r\n\r\n    @ExtendWith(SpringExtension.class)\r\n    @SpringBootTest(classes = MyApp.class, webEnvironment = WebEnvironment.RANDOM_PORT)\r\n    @AutoConfigureMockMvc\r\n    public class MyTests {\r\n    \r\n    ...\r\n    \r\n    \t@Test\r\n    \t@WithMockUser\r\n    \tpublic void test_make_many_mockmvc_calls() {\r\n    \t\r\n    \t\t\t//The first call\r\n    \t\t\tmockMvc.perform(MockMvcRequestBuilders.get(&quot;/books&quot;)//\r\n    \t\t\t\t.contentType(MediaType.APPLICATION_JSON)//\r\n    \t\t\t\t.accept(MediaType.APPLICATION_JSON))//\r\n    \t\t\t\t.andExpect(MockMvcResultMatchers.status().isOk());\r\n    \t\r\n    \t\t\t//Another call\r\n    \t\t\tmockMvc.perform(MockMvcRequestBuilders.get(&quot;/books&quot;)//\r\n    \t\t\t\t.contentType(MediaType.APPLICATION_JSON)//\r\n    \t\t\t\t.accept(MediaType.APPLICATION_JSON))//\r\n    \t\t\t\t.andExpect(MockMvcResultMatchers.status().isOk());\r\n    \t}\r\n    ...\r\n    }\r\n\r\n\r\nbut if you wont a good workaround u need to add some stuff.. in fact your repository.findAll() will resolve security informations using the SecurityEvaluationContextExtension witch use the main SecurityContextHolder ( not the TestSecurityContextHolder ).\r\n\r\nSo i guess you should make something like this :\r\n\r\n    public class MyCustomSecurityEvaluationContextExtension implements EvaluationContextExtension {\r\n    ...\r\n    \t@Override\r\n    \tpublic SecurityExpressionRoot getRootObject() {\r\n    \t\t\r\n    \t\t//Override the way you retrieve the Authentication object\r\n    \t}\r\n    ...\r\n    }\r\n\r\n","title":"MockMvc seems to be clear SecurityContext after performing request (java.lang.IllegalArgumentException: Authentication object cannot be null)","body":"<p>a good practice would be to separate the tests with the RestController from the tests of the other layers of the application. In your case i think you should not mix rest calls tests with respositories calls tests ..</p>\n<p>i guess you should make a mock mvc call to test your &quot;repository.findAll()&quot;</p>\n<p>I'm working with Spring Boot 2.6.7 ( spring-security-test-5.6.3.jar ) and Junit 5 and the TestSecurityContextHolder holds the security context even after performing a MockMVC http request.</p>\n<pre><code>@ExtendWith(SpringExtension.class)\n@SpringBootTest(classes = MyApp.class, webEnvironment = WebEnvironment.RANDOM_PORT)\n@AutoConfigureMockMvc\npublic class MyTests {\n\n...\n\n    @Test\n    @WithMockUser\n    public void test_make_many_mockmvc_calls() {\n    \n            //The first call\n            mockMvc.perform(MockMvcRequestBuilders.get(&quot;/books&quot;)//\n                .contentType(MediaType.APPLICATION_JSON)//\n                .accept(MediaType.APPLICATION_JSON))//\n                .andExpect(MockMvcResultMatchers.status().isOk());\n    \n            //Another call\n            mockMvc.perform(MockMvcRequestBuilders.get(&quot;/books&quot;)//\n                .contentType(MediaType.APPLICATION_JSON)//\n                .accept(MediaType.APPLICATION_JSON))//\n                .andExpect(MockMvcResultMatchers.status().isOk());\n    }\n...\n}\n</code></pre>\n<p>but if you wont a good workaround u need to add some stuff.. in fact your repository.findAll() will resolve security informations using the SecurityEvaluationContextExtension witch use the main SecurityContextHolder ( not the TestSecurityContextHolder ).</p>\n<p>So i guess you should make something like this :</p>\n<pre><code>public class MyCustomSecurityEvaluationContextExtension implements EvaluationContextExtension {\n...\n    @Override\n    public SecurityExpressionRoot getRootObject() {\n        \n        //Override the way you retrieve the Authentication object\n    }\n...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":123066,"reputation":31,"user_id":317288,"display_name":"GregAngel"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1687352463,"creation_date":1687352463,"answer_id":76523580,"question_id":51622300,"body_markdown":"Inspired by [@brass-monkey](https://stackoverflow.com/users/5118762/brass-monkey), as it&#39;s the simplest solution, here is the code that works for me:\r\n\r\n```java\r\n    @BeforeEach\r\n    void setUp() {\r\n        mockMvc = MockMvcBuilders\r\n                .webAppContextSetup(applicationContext)\r\n                .apply(springSecurity())\r\n                .alwaysDo(result -&gt; SecurityContextHolder.setContext(TestSecurityContextHolder.getContext()))\r\n                .build();\r\n    }\r\n```\r\n\r\n\r\n  [1]: https://stackoverflow.com/users/5118762/brass-monkey","title":"MockMvc seems to be clear SecurityContext after performing request (java.lang.IllegalArgumentException: Authentication object cannot be null)","body":"<p>Inspired by <a href=\"https://stackoverflow.com/users/5118762/brass-monkey\">@brass-monkey</a>, as it's the simplest solution, here is the code that works for me:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @BeforeEach\n    void setUp() {\n        mockMvc = MockMvcBuilders\n                .webAppContextSetup(applicationContext)\n                .apply(springSecurity())\n                .alwaysDo(result -&gt; SecurityContextHolder.setContext(TestSecurityContextHolder.getContext()))\n                .build();\n    }\n</code></pre>\n"}],"owner":{"account_id":1628535,"reputation":5864,"user_id":1503538,"accept_rate":100,"display_name":"snovelli"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2824,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":5,"score":6,"last_activity_date":1687352463,"creation_date":1533072306,"question_id":51622300,"body_markdown":"I&#39;m trying to run some integration test using SpringBoot + Spring Data Mongo + SpringMVC\n\nI&#39;ve simplified and generified the code but it should be able to reproduce the behavior with the following test.\n\nAs you can see from `BookRepository` interface I want the user to be able to retrieve only the books that he owns (`@Query(&quot;{ &#39;ownerName&#39; : &#39;?#{principal?.username})`) and I&#39;m writing a test to perform a `POST` to save a Book and then verify the book has the owner set appropriately. \n\nFor the purpose of the question here I&#39;ve simplified the test to just to a `GET` and then calling `findAll()`\n\n## Problem\nAfter performing any `MockMvc` request, the `SecurityContext` is cleared using `ThreadLocalSecurityContextHolderStrategy#clearContext()` which cause the following exception to be thrown when I try to call `repository.findAll();`\n\n`java.lang.IllegalArgumentException: Authentication object cannot be null`\n\n\n\n### BookRepository.java\n    @RepositoryRestResource\n    public interface BookRepository extends MongoRepository&lt;Book, String&gt; {\n          \n        @Query(&quot;{ &#39;ownerName&#39; : ?#{principal?.username} }&quot;)\n        List&lt;Book&gt; findAll();  \n     \n    }\n\n\n### BookCustomRepositoryIntegrationTest.java\n\n    /**\n     * Integrate data mongo + mvc\n     */\n    @RunWith(SpringRunner.class)\n    @SpringBootTest\n    @AutoConfigureMockMvc\n    public class BookCustomRepositoryIntegrationTest {\n        \n        @Autowired\n        BookRepository repository;\n    \n        @Autowired\n        MockMvc mockMvc;  \n    \n        @Test\n        @WithMockUser\n        public void reproduceBug() throws Exception {\n\n            repository.findAll(); //Runs allright\n    \n            mockMvc.perform(get(&quot;/books&quot;)\n                    .contentType(APPLICATION_JSON_UTF8))\n                    .andExpect(status().isOk());\n    \n            repository.findAll(); //Throws exception: java.lang.IllegalArgumentException: Authentication object cannot be null\n    \n    \n        }\n    \n    }","title":"MockMvc seems to be clear SecurityContext after performing request (java.lang.IllegalArgumentException: Authentication object cannot be null)","body":"<p>I'm trying to run some integration test using SpringBoot + Spring Data Mongo + SpringMVC</p>\n<p>I've simplified and generified the code but it should be able to reproduce the behavior with the following test.</p>\n<p>As you can see from <code>BookRepository</code> interface I want the user to be able to retrieve only the books that he owns (<code>@Query(&quot;{ 'ownerName' : '?#{principal?.username})</code>) and I'm writing a test to perform a <code>POST</code> to save a Book and then verify the book has the owner set appropriately.</p>\n<p>For the purpose of the question here I've simplified the test to just to a <code>GET</code> and then calling <code>findAll()</code></p>\n<h2>Problem</h2>\n<p>After performing any <code>MockMvc</code> request, the <code>SecurityContext</code> is cleared using <code>ThreadLocalSecurityContextHolderStrategy#clearContext()</code> which cause the following exception to be thrown when I try to call <code>repository.findAll();</code></p>\n<p><code>java.lang.IllegalArgumentException: Authentication object cannot be null</code></p>\n<h3>BookRepository.java</h3>\n<pre><code>@RepositoryRestResource\npublic interface BookRepository extends MongoRepository&lt;Book, String&gt; {\n      \n    @Query(&quot;{ 'ownerName' : ?#{principal?.username} }&quot;)\n    List&lt;Book&gt; findAll();  \n \n}\n</code></pre>\n<h3>BookCustomRepositoryIntegrationTest.java</h3>\n<pre><code>/**\n * Integrate data mongo + mvc\n */\n@RunWith(SpringRunner.class)\n@SpringBootTest\n@AutoConfigureMockMvc\npublic class BookCustomRepositoryIntegrationTest {\n    \n    @Autowired\n    BookRepository repository;\n\n    @Autowired\n    MockMvc mockMvc;  \n\n    @Test\n    @WithMockUser\n    public void reproduceBug() throws Exception {\n\n        repository.findAll(); //Runs allright\n\n        mockMvc.perform(get(&quot;/books&quot;)\n                .contentType(APPLICATION_JSON_UTF8))\n                .andExpect(status().isOk());\n\n        repository.findAll(); //Throws exception: java.lang.IllegalArgumentException: Authentication object cannot be null\n\n\n    }\n\n}\n</code></pre>\n"},{"tags":["java","osgi","felix"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1687332307,"post_id":76520890,"comment_id":134920089,"body_markdown":"is that a springboot Component annotation? Spring beans are singletons","body":"is that a springboot Component annotation? Spring beans are singletons"},{"owner":{"account_id":6652869,"reputation":53,"user_id":5134320,"accept_rate":40,"display_name":"Karthikeyan V"},"score":0,"creation_date":1687332531,"post_id":76520890,"comment_id":134920140,"body_markdown":"@Stultuske This is not a springboot component and it uses osgi annotations. Im using karaf to deploy it.","body":"@Stultuske This is not a springboot component and it uses osgi annotations. Im using karaf to deploy it."}],"answers":[{"comments":[{"owner":{"account_id":6652869,"reputation":53,"user_id":5134320,"accept_rate":40,"display_name":"Karthikeyan V"},"score":0,"creation_date":1687358043,"post_id":76523550,"comment_id":134926018,"body_markdown":"Is there a way to do this in DS version lesser than 1.3 ? Also Im confused where to check on DS version","body":"Is there a way to do this in DS version lesser than 1.3 ? Also Im confused where to check on DS version"},{"owner":{"account_id":201851,"reputation":9354,"user_id":448551,"display_name":"BJ Hargrave"},"score":0,"creation_date":1687446714,"post_id":76523550,"comment_id":134941042,"body_markdown":"No, since the prototype scope feature was added in DS 1.3 which relies upon support added in OSGi Core Release 6. The DS version can be seen in the package version of org.osgi.service.component. Your DS implementation should document which DS spec version is supported.","body":"No, since the prototype scope feature was added in DS 1.3 which relies upon support added in OSGi Core Release 6. The DS version can be seen in the package version of org.osgi.service.component. Your DS implementation should document which DS spec version is supported."}],"tags":[],"owner":{"account_id":201851,"reputation":9354,"user_id":448551,"display_name":"BJ Hargrave"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687352322,"creation_date":1687352322,"answer_id":76523550,"question_id":76520890,"body_markdown":"You will want to use [ServiceScope.PROTOTYPE](https://docs.osgi.org/javadoc/r6/cmpn/org/osgi/service/component/annotations/ServiceScope.html#PROTOTYPE) service components (and remove `immediate=true`. This feature was introduced in DS 1.3. ","title":"How to create multiple unique instance of an osgi component?","body":"<p>You will want to use <a href=\"https://docs.osgi.org/javadoc/r6/cmpn/org/osgi/service/component/annotations/ServiceScope.html#PROTOTYPE\" rel=\"nofollow noreferrer\">ServiceScope.PROTOTYPE</a> service components (and remove <code>immediate=true</code>. This feature was introduced in DS 1.3.</p>\n"}],"owner":{"account_id":6652869,"reputation":53,"user_id":5134320,"accept_rate":40,"display_name":"Karthikeyan V"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1687352322,"creation_date":1687332153,"question_id":76520890,"body_markdown":"I have a component UrlManager. Whenever this binds in other components I need to get unique instance of UrlManager. How can I do it ? My DS version is 1.2.\r\nNote: Im using Osgi component annotations.\r\n\r\n  \r\n``` \r\n    import org.osgi.service.component.annotations.Component;\r\n    @Component(immediate=true, name=&quot;UrlManager&quot;, service={UrlManager.class})\r\n    public class UrlManager implements Urls\r\n    {\r\n       public String getId()\r\n       {\r\n       }\r\n    } \r\n\r\n    \r\n```\r\n\r\n   ","title":"How to create multiple unique instance of an osgi component?","body":"<p>I have a component UrlManager. Whenever this binds in other components I need to get unique instance of UrlManager. How can I do it ? My DS version is 1.2.\nNote: Im using Osgi component annotations.</p>\n<pre><code>    import org.osgi.service.component.annotations.Component;\n    @Component(immediate=true, name=&quot;UrlManager&quot;, service={UrlManager.class})\n    public class UrlManager implements Urls\n    {\n       public String getId()\n       {\n       }\n    } \n\n    \n</code></pre>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":14301063,"reputation":754,"user_id":10330374,"display_name":"Nick"},"comment_count":0,"down_vote_count":0,"up_vote_count":35,"is_accepted":true,"score":35,"last_activity_date":1639407824,"creation_date":1639407824,"answer_id":70336729,"question_id":70334420,"body_markdown":"Try\r\n\r\n    management:\r\n      health:\r\n        mail:\r\n          enabled: false","title":"How to disable the mail health check in Spring Boot?","body":"<p>Try</p>\n<pre><code>management:\n  health:\n    mail:\n      enabled: false\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3718157,"reputation":1597,"user_id":3093796,"display_name":"Amit Chaurasia"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1687352280,"creation_date":1687352280,"answer_id":76523542,"question_id":70334420,"body_markdown":"Add below to the application.properties file present in your resources folder.\r\n\r\n    management.health.mail.enabled=false\r\n\r\nThis answer is just an extension to the accepted answer from Nick.","title":"How to disable the mail health check in Spring Boot?","body":"<p>Add below to the application.properties file present in your resources folder.</p>\n<pre><code>management.health.mail.enabled=false\n</code></pre>\n<p>This answer is just an extension to the accepted answer from Nick.</p>\n"}],"owner":{"account_id":3509980,"reputation":3614,"user_id":2934534,"accept_rate":77,"display_name":"Michael"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10484,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":70336729,"answer_count":2,"score":11,"last_activity_date":1687352280,"creation_date":1639397282,"question_id":70334420,"body_markdown":"I would like to disable the mail health check in spring boot as the values will be set during runtime. I&#39;ve found this mentioned in certain GitHub issues for Spring Boot but the configs mentioned vary. \r\n\r\nThis is my exception after starting my Spring Boot application. \r\n\r\n      2021-12-13 11:58:52.173 |tion(3)-192.168.1.89 |WARN  |o.s.boot.actuate.mail.MailHealthIndicator   | Mail health check failed\r\n    com.sun.mail.util.MailConnectException: Couldn&#39;t connect to host, port: localhost, 25; timeout -1\r\n      at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:2210)\r\n      at com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:722)\r\n      at javax.mail.Service.connect(Service.java:342)\r\n      at org.springframework.mail.javamail.JavaMailSenderImpl.connectTransport(JavaMailSenderImpl.java:518)\r\n      at org.springframework.mail.javamail.JavaMailSenderImpl.testConnection(JavaMailSenderImpl.java:398)\r\n      at org.springframework.boot.actuate.mail.MailHealthIndicator.doHealthCheck(MailHealthIndicator.java:42)\r\n      at org.springframework.boot.actuate.health.AbstractHealthIndicator.health(AbstractHealthIndicator.java:82)\r\n      at org.springframework.boot.actuate.health.HealthIndicator.getHealth(HealthIndicator.java:37)\r\n      at org.springframework.boot.actuate.health.HealthEndpoint.getHealth(HealthEndpoint.java:71)\r\n      at org.springframework.boot.actuate.health.HealthEndpoint.getHealth(HealthEndpoint.java:39)\r\n      at org.springframework.boot.actuate.health.HealthEndpointSupport.getContribution(HealthEndpointSupport.java:99)\r\n      at org.springframework.boot.actuate.health.HealthEndpointSupport.getAggregateHealth(HealthEndpointSupport.java:110)\r\n      at org.springframework.boot.actuate.health.HealthEndpointSupport.getContribution(HealthEndpointSupport.java:96)\r\n      at org.springframework.boot.actuate.health.HealthEndpointSupport.getHealth(HealthEndpointSupport.java:74)\r\n      at org.springframework.boot.actuate.health.HealthEndpointSupport.getHealth(HealthEndpointSupport.java:61)\r\n      at org.springframework.boot.actuate.health.HealthEndpoint.health(HealthEndpoint.java:65)\r\n      at org.springframework.boot.actuate.health.HealthEndpoint.health(HealthEndpoint.java:55)\r\n      at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n      at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n      at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n      at java.lang.reflect.Method.invoke(Method.java:498)\r\n      at org.springframework.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:282)\r\n      at org.springframework.boot.actuate.endpoint.invoke.reflect.ReflectiveOperationInvoker.invoke(ReflectiveOperationInvoker.java:77)\r\n      at org.springframework.boot.actuate.endpoint.annotation.AbstractDiscoveredOperation.invoke(AbstractDiscoveredOperation.java:60)\r\n      at org.springframework.boot.actuate.endpoint.jmx.EndpointMBean.invoke(EndpointMBean.java:121)\r\n      at org.springframework.boot.actuate.endpoint.jmx.EndpointMBean.invoke(EndpointMBean.java:96)\r\n      at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:819)\r\n      at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:801)\r\n      at javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1468)\r\n      at javax.management.remote.rmi.RMIConnectionImpl.access$300(RMIConnectionImpl.java:76)\r\n      at javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1309)\r\n      at javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1401)\r\n      at javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)\r\n      at sun.reflect.GeneratedMethodAccessor441.invoke(Unknown Source)\r\n      at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n      at java.lang.reflect.Method.invoke(Method.java:498)\r\n      at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:357)\r\n      at sun.rmi.transport.Transport$1.run(Transport.java:200)\r\n      at sun.rmi.transport.Transport$1.run(Transport.java:197)\r\n      at java.security.AccessController.doPrivileged(Native Method)\r\n      at sun.rmi.transport.Transport.serviceCall(Transport.java:196)\r\n      at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:573)\r\n      at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:834)\r\n      at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:688)\r\n      at java.security.AccessController.doPrivileged(Native Method)\r\n      at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:687)\r\n      at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n      at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n      at java.lang.Thread.run(Thread.java:748)\r\n    Caused by: java.net.ConnectException: Connection refused: connect\r\n      at java.net.DualStackPlainSocketImpl.connect0(Native Method)\r\n      at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:79)\r\n      at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)\r\n      at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)\r\n      at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)\r\n      at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)\r\n      at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)\r\n      at java.net.Socket.connect(Socket.java:607)\r\n      at java.net.Socket.connect(Socket.java:556)\r\n      at com.sun.mail.util.SocketFetcher.createSocket(SocketFetcher.java:335)\r\n      at com.sun.mail.util.SocketFetcher.getSocket(SocketFetcher.java:214)\r\n      at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:2160)\r\n      ... 48 common frames omitted\r\n\r\nI&#39;ve tried adding this to my config but it is throwing the same exception. \r\n\r\n    mail:\r\n      test-connection: false\r\n      properties:\r\n        management:\r\n          health:\r\n            mail:\r\n              enabled: false\r\n\r\nWhat is the correct config to disable the mail health checks in Spring Boot? ","title":"How to disable the mail health check in Spring Boot?","body":"<p>I would like to disable the mail health check in spring boot as the values will be set during runtime. I've found this mentioned in certain GitHub issues for Spring Boot but the configs mentioned vary.</p>\n<p>This is my exception after starting my Spring Boot application.</p>\n<pre><code>  2021-12-13 11:58:52.173 |tion(3)-192.168.1.89 |WARN  |o.s.boot.actuate.mail.MailHealthIndicator   | Mail health check failed\ncom.sun.mail.util.MailConnectException: Couldn't connect to host, port: localhost, 25; timeout -1\n  at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:2210)\n  at com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:722)\n  at javax.mail.Service.connect(Service.java:342)\n  at org.springframework.mail.javamail.JavaMailSenderImpl.connectTransport(JavaMailSenderImpl.java:518)\n  at org.springframework.mail.javamail.JavaMailSenderImpl.testConnection(JavaMailSenderImpl.java:398)\n  at org.springframework.boot.actuate.mail.MailHealthIndicator.doHealthCheck(MailHealthIndicator.java:42)\n  at org.springframework.boot.actuate.health.AbstractHealthIndicator.health(AbstractHealthIndicator.java:82)\n  at org.springframework.boot.actuate.health.HealthIndicator.getHealth(HealthIndicator.java:37)\n  at org.springframework.boot.actuate.health.HealthEndpoint.getHealth(HealthEndpoint.java:71)\n  at org.springframework.boot.actuate.health.HealthEndpoint.getHealth(HealthEndpoint.java:39)\n  at org.springframework.boot.actuate.health.HealthEndpointSupport.getContribution(HealthEndpointSupport.java:99)\n  at org.springframework.boot.actuate.health.HealthEndpointSupport.getAggregateHealth(HealthEndpointSupport.java:110)\n  at org.springframework.boot.actuate.health.HealthEndpointSupport.getContribution(HealthEndpointSupport.java:96)\n  at org.springframework.boot.actuate.health.HealthEndpointSupport.getHealth(HealthEndpointSupport.java:74)\n  at org.springframework.boot.actuate.health.HealthEndpointSupport.getHealth(HealthEndpointSupport.java:61)\n  at org.springframework.boot.actuate.health.HealthEndpoint.health(HealthEndpoint.java:65)\n  at org.springframework.boot.actuate.health.HealthEndpoint.health(HealthEndpoint.java:55)\n  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n  at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n  at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n  at java.lang.reflect.Method.invoke(Method.java:498)\n  at org.springframework.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:282)\n  at org.springframework.boot.actuate.endpoint.invoke.reflect.ReflectiveOperationInvoker.invoke(ReflectiveOperationInvoker.java:77)\n  at org.springframework.boot.actuate.endpoint.annotation.AbstractDiscoveredOperation.invoke(AbstractDiscoveredOperation.java:60)\n  at org.springframework.boot.actuate.endpoint.jmx.EndpointMBean.invoke(EndpointMBean.java:121)\n  at org.springframework.boot.actuate.endpoint.jmx.EndpointMBean.invoke(EndpointMBean.java:96)\n  at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:819)\n  at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:801)\n  at javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1468)\n  at javax.management.remote.rmi.RMIConnectionImpl.access$300(RMIConnectionImpl.java:76)\n  at javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1309)\n  at javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1401)\n  at javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)\n  at sun.reflect.GeneratedMethodAccessor441.invoke(Unknown Source)\n  at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n  at java.lang.reflect.Method.invoke(Method.java:498)\n  at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:357)\n  at sun.rmi.transport.Transport$1.run(Transport.java:200)\n  at sun.rmi.transport.Transport$1.run(Transport.java:197)\n  at java.security.AccessController.doPrivileged(Native Method)\n  at sun.rmi.transport.Transport.serviceCall(Transport.java:196)\n  at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:573)\n  at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:834)\n  at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:688)\n  at java.security.AccessController.doPrivileged(Native Method)\n  at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:687)\n  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n  at java.lang.Thread.run(Thread.java:748)\nCaused by: java.net.ConnectException: Connection refused: connect\n  at java.net.DualStackPlainSocketImpl.connect0(Native Method)\n  at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:79)\n  at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)\n  at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)\n  at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)\n  at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)\n  at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)\n  at java.net.Socket.connect(Socket.java:607)\n  at java.net.Socket.connect(Socket.java:556)\n  at com.sun.mail.util.SocketFetcher.createSocket(SocketFetcher.java:335)\n  at com.sun.mail.util.SocketFetcher.getSocket(SocketFetcher.java:214)\n  at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:2160)\n  ... 48 common frames omitted\n</code></pre>\n<p>I've tried adding this to my config but it is throwing the same exception.</p>\n<pre><code>mail:\n  test-connection: false\n  properties:\n    management:\n      health:\n        mail:\n          enabled: false\n</code></pre>\n<p>What is the correct config to disable the mail health checks in Spring Boot?</p>\n"},{"tags":["java","flux","influxql"],"owner":{"account_id":28865174,"reputation":11,"user_id":22108105,"display_name":"lorenzo mora"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1687351825,"creation_date":1687351825,"question_id":76523492,"body_markdown":"I need to convert this query written in InfluxQL\r\nUSE MyDB; DROP SERIES FROM MyDB.autogen.MyTable WHERE MyTakKey = &#39;MyTagValue&#39;\r\n\r\nI need to convert into flux.\r\n\r\nString influxQuery = &quot;from(bucket:&quot;MyDB/autogen&quot;)&quot; + &quot; |\\&gt; range(start: 1970-01-01T00:00:00Z, stop: 2023-06-30T00:00:00Z)&quot; + &quot; |\\&gt; filter(fn: (r) =\\&gt; r.\\_measurement == &quot;&quot; + measurement + &quot;&quot; &quot; + &quot; and r.MyTakKey == &quot;&quot; + &quot;MyTagValue&quot; + &quot;&quot;)&quot; + &quot; |\\&gt; drop(columns:&quot; + field + &quot;)&quot;;","title":"How to translate a simple query from influxQL to Flux","body":"<p>I need to convert this query written in InfluxQL\nUSE MyDB; DROP SERIES FROM MyDB.autogen.MyTable WHERE MyTakKey = 'MyTagValue'</p>\n<p>I need to convert into flux.</p>\n<p>String influxQuery = &quot;from(bucket:&quot;MyDB/autogen&quot;)&quot; + &quot; |&gt; range(start: 1970-01-01T00:00:00Z, stop: 2023-06-30T00:00:00Z)&quot; + &quot; |&gt; filter(fn: (r) =&gt; r._measurement == &quot;&quot; + measurement + &quot;&quot; &quot; + &quot; and r.MyTakKey == &quot;&quot; + &quot;MyTagValue&quot; + &quot;&quot;)&quot; + &quot; |&gt; drop(columns:&quot; + field + &quot;)&quot;;</p>\n"},{"tags":["java","transactions","timeout","keycloak","keycloak-spi"],"answers":[{"tags":[],"owner":{"account_id":8382762,"reputation":210,"user_id":6294106,"display_name":"lombocska"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1590838536,"creation_date":1590838536,"answer_id":62101841,"question_id":62064818,"body_markdown":"I can answer my own answer. \r\n\r\nThere is no possibility to customize the transaction timeout for this process, since ImportSynchronization.sync is called from `KeycloakModelUtils.runJobInTransaction`, that can only configured via default-timeout as mentioned above.\r\n","title":"Keycloak custom spi - custom transaction timeout","body":"<p>I can answer my own answer. </p>\n\n<p>There is no possibility to customize the transaction timeout for this process, since ImportSynchronization.sync is called from <code>KeycloakModelUtils.runJobInTransaction</code>, that can only configured via default-timeout as mentioned above.</p>\n"},{"tags":[],"owner":{"account_id":26948582,"reputation":1,"user_id":20518174,"display_name":"Tom Adam"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687351776,"creation_date":1687351776,"answer_id":76523486,"question_id":62064818,"body_markdown":"If someone wonders how this might be fixed in Keycloak 21.1.1++, here is what I did:\r\n- enable quarkus config file\r\n  - add `KC_QUARKUS_PROPERTIES_ENABLED=true` as env variable or `kc.quarkus-properties-enabled` flag\r\n- make a `quarkus.properties` file, and add hte following:\r\n\r\n```\r\nquarkus.transaction-manager.default-transaction-timeout=PT6H\r\n```\r\nThe `quarkus.properties` file must be copied to the `conf` folder in the Keycloak distribution.\r\n\r\nSources: tons of debugging :)\r\n\r\nhttps://www.keycloak.org/migration/migrating-to-quarkus\r\n\r\nhttps://quarkus.io/guides/transaction#configuring-the-transaction-timeout\r\n\r\nRegarding the duration format:\r\n\r\nhttps://docs.oracle.com/javase/8/docs/api/java/time/Duration.html#parse-java.lang.CharSequence-\r\n","title":"Keycloak custom spi - custom transaction timeout","body":"<p>If someone wonders how this might be fixed in Keycloak 21.1.1++, here is what I did:</p>\n<ul>\n<li>enable quarkus config file\n<ul>\n<li>add <code>KC_QUARKUS_PROPERTIES_ENABLED=true</code> as env variable or <code>kc.quarkus-properties-enabled</code> flag</li>\n</ul>\n</li>\n<li>make a <code>quarkus.properties</code> file, and add hte following:</li>\n</ul>\n<pre><code>quarkus.transaction-manager.default-transaction-timeout=PT6H\n</code></pre>\n<p>The <code>quarkus.properties</code> file must be copied to the <code>conf</code> folder in the Keycloak distribution.</p>\n<p>Sources: tons of debugging :)</p>\n<p><a href=\"https://www.keycloak.org/migration/migrating-to-quarkus\" rel=\"nofollow noreferrer\">https://www.keycloak.org/migration/migrating-to-quarkus</a></p>\n<p><a href=\"https://quarkus.io/guides/transaction#configuring-the-transaction-timeout\" rel=\"nofollow noreferrer\">https://quarkus.io/guides/transaction#configuring-the-transaction-timeout</a></p>\n<p>Regarding the duration format:</p>\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/Duration.html#parse-java.lang.CharSequence-\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/api/java/time/Duration.html#parse-java.lang.CharSequence-</a></p>\n"}],"owner":{"account_id":8382762,"reputation":210,"user_id":6294106,"display_name":"lombocska"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1022,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1687351776,"creation_date":1590669232,"question_id":62064818,"body_markdown":"I am trying to do a ***sync*** process via the *keycloak ImportSynchronization* interface. \r\n(wildlfy 18.0.1.Final)\r\nit provides the following method to override:\r\n```\r\n    @Override\r\n    public SynchronizationResult sync(\r\n        final KeycloakSessionFactory sessionFactory,\r\n        final String realmId,\r\n        final UserStorageProviderModel model) {\r\n    ...}\r\n```\r\n\r\nThis sync process takes *much more time than our default transaction timeout* (300 sec = 5 min).\r\n\r\n***I am aware of this possible opportunity:***\r\n```&lt;subsystem xmlns=&quot;urn:jboss:domain:transactions:5.0&quot;&gt;\r\n            &lt;core-environment node-identifier=&quot;${jboss.tx.node.id:1}&quot;&gt;\r\n                &lt;process-id&gt;\r\n                    &lt;uuid/&gt;\r\n                &lt;/process-id&gt;\r\n            &lt;/core-environment&gt;\r\n            &lt;recovery-environment socket-binding=&quot;txn-recovery-environment&quot; status-socket-binding=&quot;txn-status-manager&quot;/&gt;\r\n            &lt;coordinator-environment statistics-enabled=&quot;${wildfly.transactions.statistics-enabled:${wildfly.statistics-enabled:false}}&quot;\r\n                                     default-timeout=&quot;${env.TRANSACTION_TIMEOUT_SEC:300}&quot;/&gt;\r\n            &lt;object-store path=&quot;tx-object-store&quot; relative-to=&quot;jboss.server.data.dir&quot;/&gt;\r\n        &lt;/subsystem&gt;\r\n```\r\n\r\n***BUT this is not what I want, unfortunately.***\r\n\r\nI ***don&#39;t want*** to increase the timeout for all of our processes, just for this one. Meaning I am searching for a custom transaction timeout solution. (something like @TransactionTimeout...)\r\n\r\n---\r\nI&#39;ve tried the following\r\n\r\n```\r\n\r\n@Override\r\n\tpublic SynchronizationResult doCleanup(final KeycloakSessionFactory keycloakSessionFactory, final String realmId)  {\r\n        final SynchronizationResult synchronizationResult = new SynchronizationResult();\r\n\r\n        try {\r\n\r\n            final RealmModel realmModel = this.getRealmModelInTx(realmId, keycloakSessionFactory);\r\n\r\n            Thread.sleep(&lt;more than tx timeout&gt;);\r\n\r\n\t\t\tfinal int userEntityCountBeforeCleanup = this.getUserCountInTx(realmModel, keycloakSessionFactory);\r\n...}\r\n\r\n```\r\n\r\nand ***in both methods, I created a new keycloakSession and a new transactionManager*** and ***closed*** them like here:\r\n\r\n```\r\n\tprivate CleanupTransactionHandler createSession(final KeycloakSessionFactory  keycloakSessionFactory) {\r\n\t\tKeycloakTransactionManager transactionManager = null;\r\n\t\tfinal KeycloakSession keycloakSession = keycloakSessionFactory.create();\r\n\r\n\t\tlog.tracef(&quot;KeycloakSession has been created [%s].&quot;, keycloakSession.hashCode());\r\n\t\ttransactionManager = keycloakSession.getTransactionManager();\r\n\t\ttransactionManager.begin();\r\n\t\tlog.tracef(&quot;KeycloakTransactionManager&#39;s transaction has been begun [%s].&quot;, transactionManager.hashCode());\r\n\t\treturn new CleanupTransactionHandler(keycloakSession,transactionManager);\r\n\t}\r\n\r\n\tprivate void closeSession(final KeycloakSession keycloakSession) {\r\n\t\tkeycloakSession.close();\r\n\t\tlog.tracef(&quot;KeycloakSession has been closed [%s].&quot;, keycloakSession.hashCode());\r\n\t}\r\n\r\n\tprivate void rollback(final KeycloakTransactionManager keycloakTransactionManager) {\r\n\t\tkeycloakTransactionManager.rollback();\r\n\t\tlog.tracef(&quot;KeycloakTransactionManager&#39;s transaction has been rolled back [%s].&quot;, keycloakTransactionManager.hashCode());\r\n\t}\r\n```\r\n\r\n\r\n","title":"Keycloak custom spi - custom transaction timeout","body":"<p>I am trying to do a <strong><em>sync</em></strong> process via the <em>keycloak ImportSynchronization</em> interface. \n(wildlfy 18.0.1.Final)\nit provides the following method to override:</p>\n\n<pre><code>    @Override\n    public SynchronizationResult sync(\n        final KeycloakSessionFactory sessionFactory,\n        final String realmId,\n        final UserStorageProviderModel model) {\n    ...}\n</code></pre>\n\n<p>This sync process takes <em>much more time than our default transaction timeout</em> (300 sec = 5 min).</p>\n\n<p><strong><em>I am aware of this possible opportunity:</em></strong></p>\n\n<pre><code>            &lt;core-environment node-identifier=\"${jboss.tx.node.id:1}\"&gt;\n                &lt;process-id&gt;\n                    &lt;uuid/&gt;\n                &lt;/process-id&gt;\n            &lt;/core-environment&gt;\n            &lt;recovery-environment socket-binding=\"txn-recovery-environment\" status-socket-binding=\"txn-status-manager\"/&gt;\n            &lt;coordinator-environment statistics-enabled=\"${wildfly.transactions.statistics-enabled:${wildfly.statistics-enabled:false}}\"\n                                     default-timeout=\"${env.TRANSACTION_TIMEOUT_SEC:300}\"/&gt;\n            &lt;object-store path=\"tx-object-store\" relative-to=\"jboss.server.data.dir\"/&gt;\n        &lt;/subsystem&gt;\n</code></pre>\n\n<p><strong><em>BUT this is not what I want, unfortunately.</em></strong></p>\n\n<p>I <strong><em>don't want</em></strong> to increase the timeout for all of our processes, just for this one. Meaning I am searching for a custom transaction timeout solution. (something like @TransactionTimeout...)</p>\n\n<hr>\n\n<p>I've tried the following</p>\n\n<pre><code>\n@Override\n    public SynchronizationResult doCleanup(final KeycloakSessionFactory keycloakSessionFactory, final String realmId)  {\n        final SynchronizationResult synchronizationResult = new SynchronizationResult();\n\n        try {\n\n            final RealmModel realmModel = this.getRealmModelInTx(realmId, keycloakSessionFactory);\n\n            Thread.sleep(&lt;more than tx timeout&gt;);\n\n            final int userEntityCountBeforeCleanup = this.getUserCountInTx(realmModel, keycloakSessionFactory);\n...}\n\n</code></pre>\n\n<p>and <strong><em>in both methods, I created a new keycloakSession and a new transactionManager</em></strong> and <strong><em>closed</em></strong> them like here:</p>\n\n<pre><code>    private CleanupTransactionHandler createSession(final KeycloakSessionFactory  keycloakSessionFactory) {\n        KeycloakTransactionManager transactionManager = null;\n        final KeycloakSession keycloakSession = keycloakSessionFactory.create();\n\n        log.tracef(\"KeycloakSession has been created [%s].\", keycloakSession.hashCode());\n        transactionManager = keycloakSession.getTransactionManager();\n        transactionManager.begin();\n        log.tracef(\"KeycloakTransactionManager's transaction has been begun [%s].\", transactionManager.hashCode());\n        return new CleanupTransactionHandler(keycloakSession,transactionManager);\n    }\n\n    private void closeSession(final KeycloakSession keycloakSession) {\n        keycloakSession.close();\n        log.tracef(\"KeycloakSession has been closed [%s].\", keycloakSession.hashCode());\n    }\n\n    private void rollback(final KeycloakTransactionManager keycloakTransactionManager) {\n        keycloakTransactionManager.rollback();\n        log.tracef(\"KeycloakTransactionManager's transaction has been rolled back [%s].\", keycloakTransactionManager.hashCode());\n    }\n</code></pre>\n"},{"tags":["java","functional-programming","refactoring"],"answers":[{"tags":[],"owner":{"account_id":22747974,"reputation":5,"user_id":16908509,"display_name":"Silop"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651753218,"creation_date":1651753218,"answer_id":72127087,"question_id":72104643,"body_markdown":"I came up with somewhat of a solution.\r\n\r\nI created a new class which implemented BiConsumer&lt;List&lt;String&gt;, Integer&gt;.\r\n\r\n```\r\npublic Mangler(final Cracker c)\r\n{\r\n    this.c = c;\r\n}\r\n\r\npublic void start(String s, int i)\r\n{\r\n    accept(Mangle.getAllMangles(s), i - 1); \r\n}\r\n\r\n@Override\r\npublic void accept(List&lt;String&gt; strings, Integer integer)\r\n{\r\n    if (integer == 0) {\r\n        strings.forEach(x -&gt; c.checkAllVictims(x));\r\n        return;\r\n    }\r\n    strings.forEach(x -&gt; this.accept(Mangle.getAllMangles(x), integer - 1));\r\n}\r\n```\r\nWhich I could then call in the crack() function of my Cracker class:\r\n```\r\nMangler m = new Mangler(this);\r\ndictionary.parallelStream().forEach(word -&gt; m.start(word, 1));\r\ndictionary.parallelStream().forEach(word -&gt; m.start(word, 2));\r\ndictionary.parallelStream().forEach(word -&gt; m.start(word, 3));\r\n```\r\nI also changed the parallelism to apply only to the dictionary of the Cracker instead of making the whole class a Runnable.","title":"Is there a good way to convert this java function into a recursive, scalable [lambda] function","body":"<p>I came up with somewhat of a solution.</p>\n<p>I created a new class which implemented BiConsumer&lt;List, Integer&gt;.</p>\n<pre><code>public Mangler(final Cracker c)\n{\n    this.c = c;\n}\n\npublic void start(String s, int i)\n{\n    accept(Mangle.getAllMangles(s), i - 1); \n}\n\n@Override\npublic void accept(List&lt;String&gt; strings, Integer integer)\n{\n    if (integer == 0) {\n        strings.forEach(x -&gt; c.checkAllVictims(x));\n        return;\n    }\n    strings.forEach(x -&gt; this.accept(Mangle.getAllMangles(x), integer - 1));\n}\n</code></pre>\n<p>Which I could then call in the crack() function of my Cracker class:</p>\n<pre><code>Mangler m = new Mangler(this);\ndictionary.parallelStream().forEach(word -&gt; m.start(word, 1));\ndictionary.parallelStream().forEach(word -&gt; m.start(word, 2));\ndictionary.parallelStream().forEach(word -&gt; m.start(word, 3));\n</code></pre>\n<p>I also changed the parallelism to apply only to the dictionary of the Cracker instead of making the whole class a Runnable.</p>\n"},{"comments":[{"owner":{"account_id":13964622,"reputation":69,"user_id":10084790,"display_name":"Shmuel Greenberger"},"score":1,"creation_date":1687351730,"post_id":76523430,"comment_id":134924379,"body_markdown":"Since one of these links is a SO overflow question, this question is thechnically a duplicate","body":"Since one of these links is a SO overflow question, this question is thechnically a duplicate"},{"owner":{"account_id":13964622,"reputation":69,"user_id":10084790,"display_name":"Shmuel Greenberger"},"score":0,"creation_date":1689944031,"post_id":76523430,"comment_id":135288426,"body_markdown":"If there is an inherent problem with my answer, please let me know. Because all the links address the question.","body":"If there is an inherent problem with my answer, please let me know. Because all the links address the question."}],"tags":[],"owner":{"account_id":13964622,"reputation":69,"user_id":10084790,"display_name":"Shmuel Greenberger"},"comment_count":2,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1687351443,"creation_date":1687351443,"answer_id":76523430,"question_id":72104643,"body_markdown":"See https://stackoverflow.com/questions/19429667/implement-recursive-lambda-function-using-java-8\r\nas well as https://pysaumont.github.io/2014/09/01/Recursive-lambdas-in-Java-8.html\r\nand https://dzone.com/articles/do-it-java-8-recursive-lambdas\r\nand https://coderanch.com/t/634917/java/Recursion-Lambda-Java.\r\nSeems that you should find at least one viable solution.","title":"Is there a good way to convert this java function into a recursive, scalable [lambda] function","body":"<p>See <a href=\"https://stackoverflow.com/questions/19429667/implement-recursive-lambda-function-using-java-8\">Implement recursive lambda function using Java 8</a>\nas well as <a href=\"https://pysaumont.github.io/2014/09/01/Recursive-lambdas-in-Java-8.html\" rel=\"nofollow noreferrer\">https://pysaumont.github.io/2014/09/01/Recursive-lambdas-in-Java-8.html</a>\nand <a href=\"https://dzone.com/articles/do-it-java-8-recursive-lambdas\" rel=\"nofollow noreferrer\">https://dzone.com/articles/do-it-java-8-recursive-lambdas</a>\nand <a href=\"https://coderanch.com/t/634917/java/Recursion-Lambda-Java\" rel=\"nofollow noreferrer\">https://coderanch.com/t/634917/java/Recursion-Lambda-Java</a>.\nSeems that you should find at least one viable solution.</p>\n"}],"owner":{"account_id":22747974,"reputation":5,"user_id":16908509,"display_name":"Silop"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1687351443,"creation_date":1651606747,"question_id":72104643,"body_markdown":"I have written a function which I see great potential in being a recursive lambda function but I just can&#39;t wrap my head around how to implement it myself. The reason why I want to convert it to a recursive lambda function is the ability for me to run it for as long as I want where as currently I would have to copy paste another segment of code.\r\n```\r\n    private void crack()\r\n    {\r\n        System.out.println(&quot;Trying 1 mangle&quot;);\r\n        wordList.forEach(\r\n                x -&gt; Mangle.getAllMangles(x).forEach(this::checkAllVictims)\r\n        );\r\n        System.out.println(&quot;Trying 2 mangles&quot;);\r\n        wordList.forEach(\r\n                x -&gt; Mangle.getAllMangles(x).forEach(\r\n                        y -&gt; Mangle.getAllMangles(y).forEach(this::checkAllVictims)\r\n                )\r\n        );\r\n        System.out.println(&quot;Trying 3 mangles&quot;);\r\n        wordList.forEach(\r\n                x -&gt; Mangle.getAllMangles(x).forEach(\r\n                        y -&gt; Mangle.getAllMangles(y).forEach(\r\n                                z -&gt; Mangle.getAllMangles(z).forEach(this::checkAllVictims)\r\n                        )\r\n                )\r\n        );\r\n    }\r\n```\r\nHow would one go about refactoring this function the best way possible?\r\n\r\nFrom a course on functional programming with Elixir a year ago I did something similar but I do not know how to apply the same principle here.\r\n\r\n```\r\ndef to_church(0) do\r\n    fn(_), y -&gt; y end\r\nend\r\ndef to_church(n) do\r\n    fn(f, x) -&gt; f.(to_church(n - 1).(f, x)) end\r\nend\r\n```\r\nThe whole Elixir code can be found [here](https://github.com/ID1019/functional-programming/blob/master/exercises/lambda/src/church.ex) if more context is needed.\r\n\r\n\r\nAnother issue I have had, which is not the main issue of this question but would be a cherry on top to have answered, is that when running the above code in parallel as part of a Runnable object in an ExecutorService thread pool (run() calls crack()) all the threads except the first one allocated stops executing after printing &quot;Trying 1 mangle&quot;. They simply just dissapear without a trace and I do not know why.","title":"Is there a good way to convert this java function into a recursive, scalable [lambda] function","body":"<p>I have written a function which I see great potential in being a recursive lambda function but I just can't wrap my head around how to implement it myself. The reason why I want to convert it to a recursive lambda function is the ability for me to run it for as long as I want where as currently I would have to copy paste another segment of code.</p>\n<pre><code>    private void crack()\n    {\n        System.out.println(&quot;Trying 1 mangle&quot;);\n        wordList.forEach(\n                x -&gt; Mangle.getAllMangles(x).forEach(this::checkAllVictims)\n        );\n        System.out.println(&quot;Trying 2 mangles&quot;);\n        wordList.forEach(\n                x -&gt; Mangle.getAllMangles(x).forEach(\n                        y -&gt; Mangle.getAllMangles(y).forEach(this::checkAllVictims)\n                )\n        );\n        System.out.println(&quot;Trying 3 mangles&quot;);\n        wordList.forEach(\n                x -&gt; Mangle.getAllMangles(x).forEach(\n                        y -&gt; Mangle.getAllMangles(y).forEach(\n                                z -&gt; Mangle.getAllMangles(z).forEach(this::checkAllVictims)\n                        )\n                )\n        );\n    }\n</code></pre>\n<p>How would one go about refactoring this function the best way possible?</p>\n<p>From a course on functional programming with Elixir a year ago I did something similar but I do not know how to apply the same principle here.</p>\n<pre><code>def to_church(0) do\n    fn(_), y -&gt; y end\nend\ndef to_church(n) do\n    fn(f, x) -&gt; f.(to_church(n - 1).(f, x)) end\nend\n</code></pre>\n<p>The whole Elixir code can be found <a href=\"https://github.com/ID1019/functional-programming/blob/master/exercises/lambda/src/church.ex\" rel=\"nofollow noreferrer\">here</a> if more context is needed.</p>\n<p>Another issue I have had, which is not the main issue of this question but would be a cherry on top to have answered, is that when running the above code in parallel as part of a Runnable object in an ExecutorService thread pool (run() calls crack()) all the threads except the first one allocated stops executing after printing &quot;Trying 1 mangle&quot;. They simply just dissapear without a trace and I do not know why.</p>\n"},{"tags":["java","cmd","project","javac"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1687351298,"post_id":76523401,"comment_id":134924273,"body_markdown":"&quot;But then I would have to compile all the files with the classes it&#39;s using, recursively.&quot; indeed","body":"&quot;But then I would have to compile all the files with the classes it&#39;s using, recursively.&quot; indeed"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1687353211,"post_id":76523401,"comment_id":134924716,"body_markdown":"*Im asking this because I want to upload it to GitHub and add instructions on how to run it without assuming that the viewer has vscode installed.* You should be using Maven or Gradle","body":"<i>Im asking this because I want to upload it to GitHub and add instructions on how to run it without assuming that the viewer has vscode installed.</i> You should be using Maven or Gradle"},{"owner":{"account_id":26794833,"reputation":69,"user_id":20387721,"display_name":"nortain32"},"score":0,"creation_date":1687353918,"post_id":76523401,"comment_id":134924907,"body_markdown":"I see. Never did such a thing before... can you refer me to an article or a good tutorial on how to compile and run java projects using Gradle or Maven?","body":"I see. Never did such a thing before... can you refer me to an article or a good tutorial on how to compile and run java projects using Gradle or Maven?"},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1687353932,"post_id":76523401,"comment_id":134924909,"body_markdown":"And build it locally, providing a jar distro (perhaps with a runner script).","body":"And build it locally, providing a jar distro (perhaps with a runner script)."},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1687353975,"post_id":76523401,"comment_id":134924924,"body_markdown":"The maven and Gradle docs should be sufficient to get started.","body":"The maven and Gradle docs should be sufficient to get started."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1687354161,"post_id":76523401,"comment_id":134924973,"body_markdown":"Yes, and when you&#39;ve looked at the Maven docs, [here](https://technojeeves.com/tech/maven-chess-project.zip) is your project as Maven. All you need to do is replace the dummy files with your own and it will compile and run for you. Package names, should all be lower case, but I&#39;ve left in your originals","body":"Yes, and when you&#39;ve looked at the Maven docs, <a href=\"https://technojeeves.com/tech/maven-chess-project.zip\" rel=\"nofollow noreferrer\">here</a> is your project as Maven. All you need to do is replace the dummy files with your own and it will compile and run for you. Package names, should all be lower case, but I&#39;ve left in your originals"},{"owner":{"account_id":26794833,"reputation":69,"user_id":20387721,"display_name":"nortain32"},"score":0,"creation_date":1687355743,"post_id":76523401,"comment_id":134925400,"body_markdown":"@g00se, one more question - is there any way to integrate maven into my existing project without creating a new one with maven and copying the source file in there? Since i&#39;ve already uploaded the project to github","body":"@g00se, one more question - is there any way to integrate maven into my existing project without creating a new one with maven and copying the source file in there? Since i&#39;ve already uploaded the project to github"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1687355869,"post_id":76523401,"comment_id":134925429,"body_markdown":"As long as your keep the right paths, but tbh, it&#39;s better to keep a working project and build a new one alongside rather than risk wrecking something that already works. VS Code says it import Maven projects without issue, but if you put the github link up, I&#39;ll help put your code into the Maven skeleton","body":"As long as your keep the right paths, but tbh, it&#39;s better to keep a working project and build a new one alongside rather than risk wrecking something that already works. VS Code says it import Maven projects without issue, but if you put the github link up, I&#39;ll help put your code into the Maven skeleton"}],"owner":{"account_id":26794833,"reputation":69,"user_id":20387721,"display_name":"nortain32"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687351404,"creation_date":1687351248,"question_id":76523401,"body_markdown":"I made a project (Chess GUI game) that includes a few directories, in java.\r\nHere is the project tree:\r\n\r\n```\r\n├───images\r\n│       black_bishop.png\r\n│       black_king.png\r\n│       black_knight.png\r\n│       black_pawn.png\r\n│       black_queen.png\r\n│       black_rook.png\r\n│       white_bishop.png\r\n│       white_king.png\r\n│       white_knight.png\r\n│       white_pawn.png\r\n│       white_queen.png\r\n│       white_rook.png\r\n│\r\n└───source\r\n    ├───GameGUI\r\n    │       ChessBoardPanel.java\r\n    │       ChessCellPanel.java\r\n    │       Game.java\r\n    │       PieceLabel.java\r\n    │\r\n    ├───MainComponents\r\n    │       Board.java\r\n    │       Cell.java\r\n    │       Move.java\r\n    │       Piece.java\r\n    │\r\n    └───Pieces\r\n            Bishop.java\r\n            King.java\r\n            Knight.java\r\n            Pawn.java\r\n            Queen.java\r\n            Rook.java\r\n```\r\n\r\nWhen trying to compile the file with the main method, which is `Game.java`, I go to the directory (in cmd using `cd`), and use `javac Game.java`.\r\n\r\nBut it doesn&#39;t compile and shows the following error:\r\n\r\n```\r\nsource\\GameGUI\\Game.java:18: error: cannot find symbol\r\n                frame.add(new ChessBoardPanel());\r\n                              ^\r\n  symbol: class ChessBoardPanel\r\n1 error\r\n```\r\n\r\nI suppose it&#39;s because I have to compile the `ChessBoardPanel.java` file as well. But then I would have to compile all the files with the classes it&#39;s using, recursively.\r\n\r\nI can do it by hand I guess, but my question is, is there a faster way? I just haven&#39;t tried to compile it and run manually since I was using vscode&#39;s extension to run it directly.\r\n\r\nIm asking this because I want to upload it to GitHub and add instructions on how to run it without assuming that the viewer has vscode installed. ","title":"Compile entire java project through cmd","body":"<p>I made a project (Chess GUI game) that includes a few directories, in java.\nHere is the project tree:</p>\n<pre><code>├───images\n│       black_bishop.png\n│       black_king.png\n│       black_knight.png\n│       black_pawn.png\n│       black_queen.png\n│       black_rook.png\n│       white_bishop.png\n│       white_king.png\n│       white_knight.png\n│       white_pawn.png\n│       white_queen.png\n│       white_rook.png\n│\n└───source\n    ├───GameGUI\n    │       ChessBoardPanel.java\n    │       ChessCellPanel.java\n    │       Game.java\n    │       PieceLabel.java\n    │\n    ├───MainComponents\n    │       Board.java\n    │       Cell.java\n    │       Move.java\n    │       Piece.java\n    │\n    └───Pieces\n            Bishop.java\n            King.java\n            Knight.java\n            Pawn.java\n            Queen.java\n            Rook.java\n</code></pre>\n<p>When trying to compile the file with the main method, which is <code>Game.java</code>, I go to the directory (in cmd using <code>cd</code>), and use <code>javac Game.java</code>.</p>\n<p>But it doesn't compile and shows the following error:</p>\n<pre><code>source\\GameGUI\\Game.java:18: error: cannot find symbol\n                frame.add(new ChessBoardPanel());\n                              ^\n  symbol: class ChessBoardPanel\n1 error\n</code></pre>\n<p>I suppose it's because I have to compile the <code>ChessBoardPanel.java</code> file as well. But then I would have to compile all the files with the classes it's using, recursively.</p>\n<p>I can do it by hand I guess, but my question is, is there a faster way? I just haven't tried to compile it and run manually since I was using vscode's extension to run it directly.</p>\n<p>Im asking this because I want to upload it to GitHub and add instructions on how to run it without assuming that the viewer has vscode installed.</p>\n"},{"tags":["java","django","postgresql","subprocess"],"answers":[{"tags":[],"owner":{"account_id":2654977,"reputation":21,"user_id":2295858,"display_name":"langlais"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687351357,"creation_date":1687351357,"answer_id":76523415,"question_id":76516505,"body_markdown":"Finally managed to make it work by loading configuration from a file and first creating the driver, and then using it to open the connection. See the following code - java side:\r\n\r\n```\r\n    protected boolean loadConfiguration() {\r\n        Properties properties = new Properties();\r\n\r\n        try (FileInputStream fileInputStream = new FileInputStream(CONFIG_FILE)) {\r\n            properties.load(fileInputStream);\r\n            mURL = properties.getProperty(&quot;url&quot;);\r\n            mUser = properties.getProperty(&quot;user&quot;);\r\n            mPassword = properties.getProperty(&quot;password&quot;);\r\n            return connect() != null;\r\n        } catch (IOException e) {\r\n            WTrace.errTrace(&quot;Error reading config: &quot; + e.getLocalizedMessage());\r\n        }\r\n        return connect() != null;\r\n    }\r\n    \r\n    protected Connection connect() {\r\n        if (mConn == null) {\r\n            try {\r\n                Class.forName(&quot;org.postgresql.Driver&quot;);\r\n            } catch (ClassNotFoundException ex) {\r\n                System.err.println(&quot;Cannot load DB driver: &quot; + ex.getLocalizedMessage());\r\n            }\r\n            Properties info = new Properties(); \r\n            info.put(&quot;user&quot;, mUser); \r\n            info.put(&quot;password&quot;, mPassword);\r\n\r\n            Driver driver;\r\n            try {\r\n                driver = DriverManager.getDriver(mURL);\r\n            } catch (SQLException ex) {\r\n                System.err.println(&quot;Get DB driver error: &quot; + ex.getLocalizedMessage());\r\n                return null;\r\n            }\r\n            try {\r\n                mConn = driver.connect(mURL, info);\r\n            } catch (SQLException ex) {\r\n                System.err.println(&quot;Connect error: &quot; + ex.getLocalizedMessage());\r\n            }\r\n            System.err.println(&quot;Connection: &quot; + mConn == null ? &quot;fail&quot; : &quot;OK&quot;);\r\n        }\r\n        return mConn;\r\n    }\r\n```\r\n","title":"Running a java jar from Django with subprocess.run","body":"<p>Finally managed to make it work by loading configuration from a file and first creating the driver, and then using it to open the connection. See the following code - java side:</p>\n<pre><code>    protected boolean loadConfiguration() {\n        Properties properties = new Properties();\n\n        try (FileInputStream fileInputStream = new FileInputStream(CONFIG_FILE)) {\n            properties.load(fileInputStream);\n            mURL = properties.getProperty(&quot;url&quot;);\n            mUser = properties.getProperty(&quot;user&quot;);\n            mPassword = properties.getProperty(&quot;password&quot;);\n            return connect() != null;\n        } catch (IOException e) {\n            WTrace.errTrace(&quot;Error reading config: &quot; + e.getLocalizedMessage());\n        }\n        return connect() != null;\n    }\n    \n    protected Connection connect() {\n        if (mConn == null) {\n            try {\n                Class.forName(&quot;org.postgresql.Driver&quot;);\n            } catch (ClassNotFoundException ex) {\n                System.err.println(&quot;Cannot load DB driver: &quot; + ex.getLocalizedMessage());\n            }\n            Properties info = new Properties(); \n            info.put(&quot;user&quot;, mUser); \n            info.put(&quot;password&quot;, mPassword);\n\n            Driver driver;\n            try {\n                driver = DriverManager.getDriver(mURL);\n            } catch (SQLException ex) {\n                System.err.println(&quot;Get DB driver error: &quot; + ex.getLocalizedMessage());\n                return null;\n            }\n            try {\n                mConn = driver.connect(mURL, info);\n            } catch (SQLException ex) {\n                System.err.println(&quot;Connect error: &quot; + ex.getLocalizedMessage());\n            }\n            System.err.println(&quot;Connection: &quot; + mConn == null ? &quot;fail&quot; : &quot;OK&quot;);\n        }\n        return mConn;\n    }\n</code></pre>\n"}],"owner":{"account_id":2654977,"reputation":21,"user_id":2295858,"display_name":"langlais"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1687351357,"creation_date":1687276600,"question_id":76516505,"body_markdown":"I am going mad over something that should be very simple.\r\n\r\nI have a jar program that needs to read stuff from a database, called from Django. It takes the db connection url as an arg. When I run it in the command line, all&#39;s fine:\r\n\r\n```\r\nC:\\Dev\\mcl&gt;java -jar mcl.jar &quot;jdbc:postgresql://&lt;IP:PORT&gt;/DBName?user=&lt;user&gt;&amp;password=&lt;pwd&gt;&quot;\r\n```\r\n\r\nHowever when I run it within Django from a thread, it doesn&#39;t find the postgres driver. I use:\r\n\r\n```\r\nresult = subprocess.run([&#39;java.exe&#39;, &#39;-jar&#39;, &#39;mcl.jar&#39;, &#39;&quot;jdbc:postgresql://&lt;IP:PORT&gt;/DBName?user=&lt;user&gt;&amp;password=&lt;pwd&gt;&quot;&#39;], cwd=r&#39;C:\\\\Dev\\\\mcl&#39;, capture_output=True, shell=True, text=True)\r\n\r\n```\r\n\r\nIt doesn&#39;t work, I get: \r\nNo suitable driver found for &quot;jdbc:postgresql://&lt;IP:PORT&gt;/DBName?user=&lt;user&gt;&amp;password=&lt;pwd&gt;&quot;\r\n\r\nI have tried many things, embedding the postgres jar in mcl.jar, changing the arguments in the subprocess.run call but nothing works.\r\n\r\nIn the java I have tried with and without\r\n```\r\nClass.forName(&quot;org.postgresql.Driver&quot;);\r\n```\r\nThe Java code is:\r\n\r\n```\r\n          try {\r\n                mConn = DriverManager.getConnection(mURL);\r\n                mConn.setAutoCommit(true);\r\n            } catch (SQLException ex) {\r\n                System.err.println(&quot;Database connection error: &quot; + ex.getLocalizedMessage());\r\n                mConn = null;\r\n            }\r\n```\r\n\r\nThere must be something specific to Django environment, but what?\r\n","title":"Running a java jar from Django with subprocess.run","body":"<p>I am going mad over something that should be very simple.</p>\n<p>I have a jar program that needs to read stuff from a database, called from Django. It takes the db connection url as an arg. When I run it in the command line, all's fine:</p>\n<pre><code>C:\\Dev\\mcl&gt;java -jar mcl.jar &quot;jdbc:postgresql://&lt;IP:PORT&gt;/DBName?user=&lt;user&gt;&amp;password=&lt;pwd&gt;&quot;\n</code></pre>\n<p>However when I run it within Django from a thread, it doesn't find the postgres driver. I use:</p>\n<pre><code>result = subprocess.run(['java.exe', '-jar', 'mcl.jar', '&quot;jdbc:postgresql://&lt;IP:PORT&gt;/DBName?user=&lt;user&gt;&amp;password=&lt;pwd&gt;&quot;'], cwd=r'C:\\\\Dev\\\\mcl', capture_output=True, shell=True, text=True)\n\n</code></pre>\n<p>It doesn't work, I get:\nNo suitable driver found for &quot;jdbc:postgresql://&lt;IP:PORT&gt;/DBName?user=&amp;password=&quot;</p>\n<p>I have tried many things, embedding the postgres jar in mcl.jar, changing the arguments in the subprocess.run call but nothing works.</p>\n<p>In the java I have tried with and without</p>\n<pre><code>Class.forName(&quot;org.postgresql.Driver&quot;);\n</code></pre>\n<p>The Java code is:</p>\n<pre><code>          try {\n                mConn = DriverManager.getConnection(mURL);\n                mConn.setAutoCommit(true);\n            } catch (SQLException ex) {\n                System.err.println(&quot;Database connection error: &quot; + ex.getLocalizedMessage());\n                mConn = null;\n            }\n</code></pre>\n<p>There must be something specific to Django environment, but what?</p>\n"},{"tags":["java","android","xml","editor"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1687393090,"post_id":76523277,"comment_id":134932031,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":28865836,"reputation":1,"user_id":22108620,"display_name":"Kali Linux"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":93,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687351068,"creation_date":1687350327,"question_id":76523277,"body_markdown":"I made an Android application a while ago. Now i moved to Python. All I have of my old Android project is the APK file that built back then. \r\nLooking at it now i do not like the way that the UI looks. So i want to edit some elements. \r\nTo do that i used a Linux machine to decompile(disassemble) the APK file using ApkTool. Now i have a bunch of folders and whatnot. \r\nMy question came when i tried to view the XML code of the decompiled APK and have a preview of the current UI on the other side of my screen (you know how android studio does it). is there any way that i can get a software of any kind that lets me convert my APK file into a 100% Android project. i just want to change a few UI elements. \r\nGoing into the res/layout folder that got generated and looking at the XML files, i feel like those are not really the UI files that i would have normally worked on in Android Studio. \r\nPlus, installing Android Studio is pretty tiresome (i have experience with that). So is there any other software that can do what i want? i would prefer if it was on a Linux machine. But windows is okay too. \r\nSo to simplify my question: Is there any way that i can disassemble an APK file, view its layout files (XML) and make some changes to the layout elements (buttons and whatnot)?\r\n\r\nI literally spent hours every day trying to find a solution to this online. I even asked ChatGPT and BARD. I am stuck as stuck can ever get. ","title":"Change UI elements of and APK file","body":"<p>I made an Android application a while ago. Now i moved to Python. All I have of my old Android project is the APK file that built back then.\nLooking at it now i do not like the way that the UI looks. So i want to edit some elements.\nTo do that i used a Linux machine to decompile(disassemble) the APK file using ApkTool. Now i have a bunch of folders and whatnot.\nMy question came when i tried to view the XML code of the decompiled APK and have a preview of the current UI on the other side of my screen (you know how android studio does it). is there any way that i can get a software of any kind that lets me convert my APK file into a 100% Android project. i just want to change a few UI elements.\nGoing into the res/layout folder that got generated and looking at the XML files, i feel like those are not really the UI files that i would have normally worked on in Android Studio.\nPlus, installing Android Studio is pretty tiresome (i have experience with that). So is there any other software that can do what i want? i would prefer if it was on a Linux machine. But windows is okay too.\nSo to simplify my question: Is there any way that i can disassemble an APK file, view its layout files (XML) and make some changes to the layout elements (buttons and whatnot)?</p>\n<p>I literally spent hours every day trying to find a solution to this online. I even asked ChatGPT and BARD. I am stuck as stuck can ever get.</p>\n"},{"tags":["java","datetime"],"comments":[{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":0,"creation_date":1687341587,"post_id":76522027,"comment_id":134922241,"body_markdown":"The formats are very different… You may stay *not satisified* because this requires checks. There&#39;s a chance you can minimze the amount of checks, so… How does your code look?","body":"The formats are very different… You may stay <i>not satisified</i> because this requires checks. There&#39;s a chance you can minimze the amount of checks, so… How does your code look?"},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":0,"creation_date":1687347189,"post_id":76522027,"comment_id":134923308,"body_markdown":"Do you want to keep the input format and only convert the values to UTC? How do you know if `&quot;2023-06-14T19:19:52.13844&quot;` is not UTC already? It has no zone or offset…","body":"Do you want to keep the input format and only convert the values to UTC? How do you know if <code>&quot;2023-06-14T19:19:52.13844&quot;</code> is not UTC already? It has no zone or offset…"}],"answers":[{"tags":[],"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687350831,"creation_date":1687345129,"answer_id":76522538,"question_id":76522027,"body_markdown":"For your formats and inputs, the following works:\r\n\r\n    import java.time.*;\r\n    import java.time.temporal.*;\r\n    import java.time.format.*;\r\n    \r\n    public class MultiPats {\r\n        public static void main(String[] args) {\r\n            try {\r\n                String sDate = args[0];\r\n                DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;&quot; + &quot;[yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSSSS]&quot;\r\n                        + &quot;[yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSSXXX]&quot; + &quot;[yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSS&#39;Z&#39;]&quot;);\r\n                Object x = formatter.parse(args[0]);\r\n                TemporalAccessor ta = formatter.parseBest(args[0], ZonedDateTime::from, OffsetDateTime::from,\r\n                        LocalDateTime::from);\r\n                if (ta instanceof ZonedDateTime) {\r\n                    System.out.printf(&quot;%s = ZDT = %s. In UTC: %s%n&quot;, sDate, ta.query(ZonedDateTime::from), ta.query(ZonedDateTime::from).withZoneSameInstant(ZoneId.of(&quot;UTC&quot;)));\r\n                } else if (ta instanceof OffsetDateTime) {\r\n                    System.out.printf(&quot;%s = ODT = %s. In UTC: %n&quot;, sDate, ta.query(OffsetDateTime::from), ta.query(OffsetDateTime::from).withOffsetSameInstant(ZoneOffset.UTC));\r\n                } else if (ta instanceof LocalDateTime) {\r\n                    System.out.printf(&quot;%s = LDT = %s%n&quot;, sDate, ta.query(LocalDateTime::from));\r\n    \r\n                }\r\n    \r\n            } catch (Throwable t) {\r\n                t.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n\r\n","title":"Convert DateTime String to UTC DateTime String","body":"<p>For your formats and inputs, the following works:</p>\n<pre><code>import java.time.*;\nimport java.time.temporal.*;\nimport java.time.format.*;\n\npublic class MultiPats {\n    public static void main(String[] args) {\n        try {\n            String sDate = args[0];\n            DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;&quot; + &quot;[yyyy-MM-dd'T'HH:mm:ss.SSSSS]&quot;\n                    + &quot;[yyyy-MM-dd'T'HH:mm:ss.SSSXXX]&quot; + &quot;[yyyy-MM-dd'T'HH:mm:ss.SSS'Z']&quot;);\n            Object x = formatter.parse(args[0]);\n            TemporalAccessor ta = formatter.parseBest(args[0], ZonedDateTime::from, OffsetDateTime::from,\n                    LocalDateTime::from);\n            if (ta instanceof ZonedDateTime) {\n                System.out.printf(&quot;%s = ZDT = %s. In UTC: %s%n&quot;, sDate, ta.query(ZonedDateTime::from), ta.query(ZonedDateTime::from).withZoneSameInstant(ZoneId.of(&quot;UTC&quot;)));\n            } else if (ta instanceof OffsetDateTime) {\n                System.out.printf(&quot;%s = ODT = %s. In UTC: %n&quot;, sDate, ta.query(OffsetDateTime::from), ta.query(OffsetDateTime::from).withOffsetSameInstant(ZoneOffset.UTC));\n            } else if (ta instanceof LocalDateTime) {\n                System.out.printf(&quot;%s = LDT = %s%n&quot;, sDate, ta.query(LocalDateTime::from));\n\n            }\n\n        } catch (Throwable t) {\n            t.printStackTrace();\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687349479,"creation_date":1687349479,"answer_id":76523150,"question_id":76522027,"body_markdown":"You may want to check the length of the `String`s in order to find out if you need a pattern that is not build-in / predefined. Checking that may become a real pain if you are expecting (a lot) more than your 4 examples.\r\n\r\nHowever, one of your examples (`&quot;2023-06-14T19:19:52.13844&quot;`) defines a time of day along with a date but lacks zone and offset. You can parse it and declare it UTC time, but you cannot be sure that time actually was in UTC, exclusively judging from the values of the `String`. If you know the origin zone or offset, you would have to add it, convert to UTC and then format without zone and offset.\r\n\r\n### example code\r\n```Java\r\npublic static void main(String[] args) {\r\n\t// define some formatters for input parsing and output formatting\r\n\tvar dtf25 = DateTimeFormatter.ofPattern(&quot;uuuu-MM-dd&#39;T&#39;HH:mm:ss.SSSSS&quot;);\r\n\tvar dtf26 = DateTimeFormatter.ofPattern(&quot;uuuu-MM-dd&#39;T&#39;HH:mm:ss.SSSz&quot;);\r\n\tvar dtf29 = DateTimeFormatter.ofPattern(&quot;uuuu-MM-dd&#39;T&#39;HH:mm:ss.SSSxxx&quot;);\r\n\t\r\n\t// no conversion needed, this is already in UTC\r\n\tSystem.out.println(OffsetDateTime.parse(&quot;2023-06-14T19:19:52.138Z&quot;));\r\n\t// no conversion possible, origin zone or offset are unknown\r\n\tSystem.out.println(\r\n\t\t\tLocalDateTime.parse(&quot;2023-06-14T19:19:52.13844&quot;)\r\n\t\t\t\t\t\t .format(dtf25)\r\n\t\t\t\t\t);\r\n\t// parse, convert zone and print in the source format\r\n\tSystem.out.println(\r\n\t\t\tZonedDateTime.parse(&quot;2023-06-14T19:19:52.138PDT&quot;, dtf26)\r\n\t\t\t\t\t\t .withZoneSameInstant(ZoneOffset.UTC)\r\n\t\t\t\t\t\t .format(dtf26)\r\n\t\t\t\t\t);\r\n\t// parse, convert zone and print in the source format\r\n\tSystem.out.println(\r\n\t\t\tOffsetDateTime.parse(&quot;2023-06-14T19:19:52.138-07:00&quot;)\r\n\t\t\t\t\t\t  .withOffsetSameInstant(ZoneOffset.UTC)\r\n\t\t\t\t\t\t  .format(dtf29)\r\n\t\t\t\t\t);\r\n}\r\n```\r\n\r\n### output\r\n\r\n```none\r\n2023-06-14T19:19:52.138Z\r\n2023-06-14T19:19:52.13844\r\n2023-06-15T02:19:52.138Z\r\n2023-06-15T02:19:52.138+00:00\r\n```","title":"Convert DateTime String to UTC DateTime String","body":"<p>You may want to check the length of the <code>String</code>s in order to find out if you need a pattern that is not build-in / predefined. Checking that may become a real pain if you are expecting (a lot) more than your 4 examples.</p>\n<p>However, one of your examples (<code>&quot;2023-06-14T19:19:52.13844&quot;</code>) defines a time of day along with a date but lacks zone and offset. You can parse it and declare it UTC time, but you cannot be sure that time actually was in UTC, exclusively judging from the values of the <code>String</code>. If you know the origin zone or offset, you would have to add it, convert to UTC and then format without zone and offset.</p>\n<h3>example code</h3>\n<pre><code>public static void main(String[] args) {\n    // define some formatters for input parsing and output formatting\n    var dtf25 = DateTimeFormatter.ofPattern(&quot;uuuu-MM-dd'T'HH:mm:ss.SSSSS&quot;);\n    var dtf26 = DateTimeFormatter.ofPattern(&quot;uuuu-MM-dd'T'HH:mm:ss.SSSz&quot;);\n    var dtf29 = DateTimeFormatter.ofPattern(&quot;uuuu-MM-dd'T'HH:mm:ss.SSSxxx&quot;);\n    \n    // no conversion needed, this is already in UTC\n    System.out.println(OffsetDateTime.parse(&quot;2023-06-14T19:19:52.138Z&quot;));\n    // no conversion possible, origin zone or offset are unknown\n    System.out.println(\n            LocalDateTime.parse(&quot;2023-06-14T19:19:52.13844&quot;)\n                         .format(dtf25)\n                    );\n    // parse, convert zone and print in the source format\n    System.out.println(\n            ZonedDateTime.parse(&quot;2023-06-14T19:19:52.138PDT&quot;, dtf26)\n                         .withZoneSameInstant(ZoneOffset.UTC)\n                         .format(dtf26)\n                    );\n    // parse, convert zone and print in the source format\n    System.out.println(\n            OffsetDateTime.parse(&quot;2023-06-14T19:19:52.138-07:00&quot;)\n                          .withOffsetSameInstant(ZoneOffset.UTC)\n                          .format(dtf29)\n                    );\n}\n</code></pre>\n<h3>output</h3>\n<pre class=\"lang-none prettyprint-override\"><code>2023-06-14T19:19:52.138Z\n2023-06-14T19:19:52.13844\n2023-06-15T02:19:52.138Z\n2023-06-15T02:19:52.138+00:00\n</code></pre>\n"}],"owner":{"account_id":14587036,"reputation":15,"user_id":10535476,"display_name":"spurohit"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":75,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1687350831,"creation_date":1687341284,"question_id":76522027,"body_markdown":"I am trying to write a simple piece of Java code that takes a datetime string along with the format and converts it into UTC into same format. I am able to achieve this using lot of checks and try catch but not satisfied.\r\n\r\nIs there any cleaner way in which I can handle this. Obviously the method only does something meaningful for date formats that have timezone or offset information. I want to gracefully process any inputs.\r\n\r\nSome samples -\r\n\r\n    \r\nFormat yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSSSS\r\nInput 2023-06-14T19:19:52.13844\r\n\r\nFormat yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSSXXX\r\nInput 2023-06-14T19:19:52.138-07:00\r\n\r\nFormat yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSS&#39;Z&#39;\r\nInput 2023-06-14T19:19:52.138Z\r\n\r\nFormat yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSSz\r\nInput 2023-06-14T19:19:52.138PDT\r\n\r\nThanks in advance.","title":"Convert DateTime String to UTC DateTime String","body":"<p>I am trying to write a simple piece of Java code that takes a datetime string along with the format and converts it into UTC into same format. I am able to achieve this using lot of checks and try catch but not satisfied.</p>\n<p>Is there any cleaner way in which I can handle this. Obviously the method only does something meaningful for date formats that have timezone or offset information. I want to gracefully process any inputs.</p>\n<p>Some samples -</p>\n<p>Format yyyy-MM-dd'T'HH:mm:ss.SSSSS\nInput 2023-06-14T19:19:52.13844</p>\n<p>Format yyyy-MM-dd'T'HH:mm:ss.SSSXXX\nInput 2023-06-14T19:19:52.138-07:00</p>\n<p>Format yyyy-MM-dd'T'HH:mm:ss.SSS'Z'\nInput 2023-06-14T19:19:52.138Z</p>\n<p>Format yyyy-MM-dd'T'HH:mm:ss.SSSz\nInput 2023-06-14T19:19:52.138PDT</p>\n<p>Thanks in advance.</p>\n"},{"tags":["java","spring","spring-boot","logging","aop"],"answers":[{"comments":[{"owner":{"account_id":10983199,"reputation":91,"user_id":8069714,"display_name":"Aksoy"},"score":0,"creation_date":1609437686,"post_id":65524162,"comment_id":115845074,"body_markdown":"How can I get request and response as string in this method ?","body":"How can I get request and response as string in this method ?"},{"owner":{"account_id":17589164,"reputation":4057,"user_id":12761369,"display_name":"k-wasilewski"},"score":0,"creation_date":1609437732,"post_id":65524162,"comment_id":115845088,"body_markdown":"I&#39;ve added it to my answer.","body":"I&#39;ve added it to my answer."}],"tags":[],"owner":{"account_id":17589164,"reputation":4057,"user_id":12761369,"display_name":"k-wasilewski"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1609437632,"creation_date":1609437250,"answer_id":65524162,"question_id":65523527,"body_markdown":"Add this dependency:\r\n```\r\n&lt;dependency&gt;\r\n     &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n     &lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n```\r\nthen, create an `Around` aspect for your controllers&#39; methods&#39; execution:\r\n```\r\n    @Around(&quot;within(path.to.your.controller.*)&quot;)\r\n    public Object pointcutWithin(ProceedingJoinPoint joinPoint) throws Throwable {\r\n        logger.info(&quot; ###### pointcutWithin() before&quot;);\r\n        long start = System.nanoTime();\r\n\r\n        Object result = joinPoint.proceed();\r\n\r\n        logger.info(&quot; ###### pointcutWithin() after&quot;);\r\n        long end = System.nanoTime();\r\n\r\n        long timeElapsedInMillis = (end - start) / 1000000;\r\n        logger.info(&quot; ###### elapsed time in millis: &quot;+timeElapsedInMillis);\r\n\r\n        return result;\r\n    }\r\n```\r\n\r\nAs for persisting: first, get the req and resp like so:\r\n```\r\nMyRequest req = (MyRequest) joinPoint.getArgs()[0];\r\n\r\nMyResponse resp = (MyResponse) result;\r\n```\r\n\r\nthen it&#39;s up to you what you actually want t o persist. For classes with simple fields I&#39;d go with a `varchar`, just remember to override their `toString` methods.","title":"How to save requests and responses to database in spring boot","body":"<p>Add this dependency:</p>\n<pre><code>&lt;dependency&gt;\n     &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n     &lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>then, create an <code>Around</code> aspect for your controllers' methods' execution:</p>\n<pre><code>    @Around(&quot;within(path.to.your.controller.*)&quot;)\n    public Object pointcutWithin(ProceedingJoinPoint joinPoint) throws Throwable {\n        logger.info(&quot; ###### pointcutWithin() before&quot;);\n        long start = System.nanoTime();\n\n        Object result = joinPoint.proceed();\n\n        logger.info(&quot; ###### pointcutWithin() after&quot;);\n        long end = System.nanoTime();\n\n        long timeElapsedInMillis = (end - start) / 1000000;\n        logger.info(&quot; ###### elapsed time in millis: &quot;+timeElapsedInMillis);\n\n        return result;\n    }\n</code></pre>\n<p>As for persisting: first, get the req and resp like so:</p>\n<pre><code>MyRequest req = (MyRequest) joinPoint.getArgs()[0];\n\nMyResponse resp = (MyResponse) result;\n</code></pre>\n<p>then it's up to you what you actually want t o persist. For classes with simple fields I'd go with a <code>varchar</code>, just remember to override their <code>toString</code> methods.</p>\n"},{"tags":[],"owner":{"account_id":100270,"reputation":127154,"user_id":270371,"accept_rate":33,"display_name":"davidxxx"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1609438338,"creation_date":1609437571,"answer_id":65524216,"question_id":65523527,"body_markdown":"&gt; First question is what type I should use in my entity for request and\r\n&gt; response ( string, blob, etc)\r\n&gt; \r\n\r\nIt mainly depends on the database vendor and request/response length. &lt;br&gt;\r\nString may be limited for some vendors and blob is so required. \r\nOn the other hand, matching on blob is slower.  \r\nAnother alternative is using a nosql format such as JSON.  \r\n \r\n \r\n&gt; Second question, how to get request,response and its controller name\r\n&gt; to create the entity to save to database ?\r\n\r\nThere are really several ways.  \r\nYou could take advantage of built-in Spring Boot [http tracing features][1] but it has a limitation : posted/received of request/responses are not available. \r\n\r\n&gt; 5.8. HTTP Tracing\r\n&gt; \r\n&gt; HTTP Tracing can be enabled by providing a bean of type\r\n&gt; HttpTraceRepository in your application’s configuration. For\r\n&gt; convenience, Spring Boot offers an InMemoryHttpTraceRepository that\r\n&gt; stores traces for the last 100 request-response exchanges, by default.\r\n&gt; InMemoryHttpTraceRepository is limited compared to other tracing\r\n&gt; solutions and we recommend using it only for development environments.\r\n&gt; For production environments, use of a production-ready tracing or\r\n&gt; observability solution, such as Zipkin or Spring Cloud Sleuth, is\r\n&gt; recommended. Alternatively, create your own HttpTraceRepository that\r\n&gt; meets your needs.\r\n&gt; \r\n&gt; The httptrace endpoint can be used to obtain information about the\r\n&gt; request-response exchanges that are stored in the HttpTraceRepository.\r\n&gt; \r\n&gt; 5.8.1. Custom HTTP tracing\r\n&gt; \r\n&gt; To customize the items that are included in each trace, use the\r\n&gt; management.trace.http.include configuration property. For advanced\r\n&gt; customization, consider registering your own HttpExchangeTracer\r\n&gt; implementation.\r\n&gt; \r\n\r\nAlternatives are implementing a filter for requests/responses and log in it.  \r\nFor example : \r\n\r\n    @Component\r\n    public class RequestResponseStoringFilter implements Filter {\r\n        \r\n      @Override\r\n      public void doFilter(ServletRequest req, ServletResponse res,\r\n          FilterChain chain) throws IOException, ServletException {\r\n    \r\n        HttpServletRequest request = (HttpServletRequest) req;\r\n        HttpServletResponse response = (HttpServletResponse) res;\r\n\r\n        long start = System.currentTimeMillis();\r\n        try {\r\n            chain.doFilter(req, resp);\r\n        } finally {\r\n           // Measure elapsed time\r\n            long elapsed = System.currentTimeMillis() - start;\r\n           // store request data and store response data in a DB\r\n           .....\r\n        }\r\n\r\n      }\r\n    \r\n      @Override\r\n      public void destroy() {}\r\n    \r\n      @Override\r\n      public void init(FilterConfig arg0) throws ServletException {}\r\n    \r\n    }\r\n\r\n&gt; Lastly, is it possible to calculate response time (time spent in the\r\n&gt; controller) of the controller ?\r\n\r\nThe way implement a Filter can do that as shown above.  \r\nThe httptrace endpoint way provides that with the `timeTaken` field.   &lt;br&gt;\r\nFIY, here is the content of a [HttpTrace][2] instance :    \r\n\r\n&lt;pre&gt;\r\nHttpTrace.Principal\tgetPrincipal() \r\nHttpTrace.Request\tgetRequest() \r\nHttpTrace.Response\tgetResponse() \r\nHttpTrace.Session\tgetSession() \r\nInstant\tgetTimestamp() \r\nLong\tgetTimeTaken() \r\n&lt;/pre&gt;\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#production-ready-http-tracing\r\n  [2]: https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/actuate/trace/http/HttpTrace.html\r\n","title":"How to save requests and responses to database in spring boot","body":"<blockquote>\n<p>First question is what type I should use in my entity for request and\nresponse ( string, blob, etc)</p>\n</blockquote>\n<p>It mainly depends on the database vendor and request/response length. <br>\nString may be limited for some vendors and blob is so required.\nOn the other hand, matching on blob is slower.<br />\nAnother alternative is using a nosql format such as JSON.</p>\n<blockquote>\n<p>Second question, how to get request,response and its controller name\nto create the entity to save to database ?</p>\n</blockquote>\n<p>There are really several ways.<br />\nYou could take advantage of built-in Spring Boot <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#production-ready-http-tracing\" rel=\"nofollow noreferrer\">http tracing features</a> but it has a limitation : posted/received of request/responses are not available.</p>\n<blockquote>\n<p>5.8. HTTP Tracing</p>\n<p>HTTP Tracing can be enabled by providing a bean of type\nHttpTraceRepository in your application’s configuration. For\nconvenience, Spring Boot offers an InMemoryHttpTraceRepository that\nstores traces for the last 100 request-response exchanges, by default.\nInMemoryHttpTraceRepository is limited compared to other tracing\nsolutions and we recommend using it only for development environments.\nFor production environments, use of a production-ready tracing or\nobservability solution, such as Zipkin or Spring Cloud Sleuth, is\nrecommended. Alternatively, create your own HttpTraceRepository that\nmeets your needs.</p>\n<p>The httptrace endpoint can be used to obtain information about the\nrequest-response exchanges that are stored in the HttpTraceRepository.</p>\n<p>5.8.1. Custom HTTP tracing</p>\n<p>To customize the items that are included in each trace, use the\nmanagement.trace.http.include configuration property. For advanced\ncustomization, consider registering your own HttpExchangeTracer\nimplementation.</p>\n</blockquote>\n<p>Alternatives are implementing a filter for requests/responses and log in it.<br />\nFor example :</p>\n<pre><code>@Component\npublic class RequestResponseStoringFilter implements Filter {\n    \n  @Override\n  public void doFilter(ServletRequest req, ServletResponse res,\n      FilterChain chain) throws IOException, ServletException {\n\n    HttpServletRequest request = (HttpServletRequest) req;\n    HttpServletResponse response = (HttpServletResponse) res;\n\n    long start = System.currentTimeMillis();\n    try {\n        chain.doFilter(req, resp);\n    } finally {\n       // Measure elapsed time\n        long elapsed = System.currentTimeMillis() - start;\n       // store request data and store response data in a DB\n       .....\n    }\n\n  }\n\n  @Override\n  public void destroy() {}\n\n  @Override\n  public void init(FilterConfig arg0) throws ServletException {}\n\n}\n</code></pre>\n<blockquote>\n<p>Lastly, is it possible to calculate response time (time spent in the\ncontroller) of the controller ?</p>\n</blockquote>\n<p>The way implement a Filter can do that as shown above.<br />\nThe httptrace endpoint way provides that with the <code>timeTaken</code> field.   <br>\nFIY, here is the content of a <a href=\"https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/actuate/trace/http/HttpTrace.html\" rel=\"nofollow noreferrer\">HttpTrace</a> instance :</p>\n<pre>\nHttpTrace.Principal getPrincipal() \nHttpTrace.Request   getRequest() \nHttpTrace.Response  getResponse() \nHttpTrace.Session   getSession() \nInstant getTimestamp() \nLong    getTimeTaken() \n</pre>\n"},{"comments":[{"owner":{"account_id":10983199,"reputation":91,"user_id":8069714,"display_name":"Aksoy"},"score":0,"creation_date":1609671578,"post_id":65527391,"comment_id":115890094,"body_markdown":"First of all, thank you for your answer and it works. However, I have no idea how I can get response time ?","body":"First of all, thank you for your answer and it works. However, I have no idea how I can get response time ?"}],"tags":[],"owner":{"account_id":1924336,"reputation":155,"user_id":1735146,"display_name":"Eric"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1609480992,"creation_date":1609477894,"answer_id":65527391,"question_id":65523527,"body_markdown":"This kinda expands on the other answers, but I think It warrants a separate answer.\r\n\r\nIf your pulling in spring-boot-starter-web, then you&#39;re already pulling in spring-aop. If your going to go down the point cut route though, I&#39;d highly recommend just using the Micrometer `@Timed` annotation which comes with `spring-boot-starter-actuator`. I&#39;ve written my own metric pointcuts a many times, but if your just after timings and counts of successes and failures, `@Timed` works great. \r\n\r\nI&#39;d also highly recommend looking into using a time series database (e.g [influx](https://www.influxdata.com/products/influxdb/)) for storing things like response times and other performance metrics. Keep your raw payloads and other possible auditing concerns in a separate DB. There are some very powerful things you can do with influx and running [Grafana](https://grafana.com/) or [Chronograf](https://www.influxdata.com/time-series-platform/chronograf/) on top of it. Without a doubt one of the best things my current company has done is years is adopting Influx/Chronograf.\r\n\r\nWith regards to the request/response capture, I had a weird edge case in my work flow once where the http trace just wasn&#39;t working for some hard requirements. You can capture the contents directly in a chain filter yourself with a `ContentCachingRequestWrapper`\r\nThen you can access them with:\r\n```\r\n @Component\r\nclass MyPayloadCapturingFilter extends OncePerRequestFilter {\r\n\r\n    @Override\r\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\r\n        ContentCachingRequestWrapper requestWrapper = new ContentCachingRequestWrapper(request)\r\n        ContentCachingResponseWrapper responseWrapper = new ContentCachingResponseWrapper(response)\r\n\r\n        filterChain.doFilter(requestWrapper, responseWrapper)\r\n\r\n        def requestBody = new String(requestWrapper.contentAsByteArray)\r\n        def responseBody = new String(responseWrapper.contentAsByteArray)\r\n        //..do something with them\r\n    }\r\n}\r\n```\r\nnote the `OncePerRequestFilter`, I found times when my Filter was firing multiple times for the same request. This prevents that. ","title":"How to save requests and responses to database in spring boot","body":"<p>This kinda expands on the other answers, but I think It warrants a separate answer.</p>\n<p>If your pulling in spring-boot-starter-web, then you're already pulling in spring-aop. If your going to go down the point cut route though, I'd highly recommend just using the Micrometer <code>@Timed</code> annotation which comes with <code>spring-boot-starter-actuator</code>. I've written my own metric pointcuts a many times, but if your just after timings and counts of successes and failures, <code>@Timed</code> works great.</p>\n<p>I'd also highly recommend looking into using a time series database (e.g <a href=\"https://www.influxdata.com/products/influxdb/\" rel=\"nofollow noreferrer\">influx</a>) for storing things like response times and other performance metrics. Keep your raw payloads and other possible auditing concerns in a separate DB. There are some very powerful things you can do with influx and running <a href=\"https://grafana.com/\" rel=\"nofollow noreferrer\">Grafana</a> or <a href=\"https://www.influxdata.com/time-series-platform/chronograf/\" rel=\"nofollow noreferrer\">Chronograf</a> on top of it. Without a doubt one of the best things my current company has done is years is adopting Influx/Chronograf.</p>\n<p>With regards to the request/response capture, I had a weird edge case in my work flow once where the http trace just wasn't working for some hard requirements. You can capture the contents directly in a chain filter yourself with a <code>ContentCachingRequestWrapper</code>\nThen you can access them with:</p>\n<pre><code> @Component\nclass MyPayloadCapturingFilter extends OncePerRequestFilter {\n\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\n        ContentCachingRequestWrapper requestWrapper = new ContentCachingRequestWrapper(request)\n        ContentCachingResponseWrapper responseWrapper = new ContentCachingResponseWrapper(response)\n\n        filterChain.doFilter(requestWrapper, responseWrapper)\n\n        def requestBody = new String(requestWrapper.contentAsByteArray)\n        def responseBody = new String(responseWrapper.contentAsByteArray)\n        //..do something with them\n    }\n}\n</code></pre>\n<p>note the <code>OncePerRequestFilter</code>, I found times when my Filter was firing multiple times for the same request. This prevents that.</p>\n"},{"tags":[],"owner":{"account_id":3508394,"reputation":2007,"user_id":2933389,"accept_rate":100,"display_name":"Paramesh Korrakuti"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687350790,"creation_date":1687350790,"answer_id":76523337,"question_id":65523527,"body_markdown":"Minor improvements to the Eric&#39;s answer : https://stackoverflow.com/a/65527391/2933389.\r\n\r\n```java\r\n@Component\r\npublic class MyPayloadCapturingFilter extends OncePerRequestFilter {\r\n\r\n    @Override\r\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\r\n        ContentCachingRequestWrapper requestWrapper = new ContentCachingRequestWrapper(request)\r\n        ContentCachingResponseWrapper responseWrapper = new ContentCachingResponseWrapper(response)\r\n\r\n        filterChain.doFilter(requestWrapper, responseWrapper)\r\n        // In the absence of the below line, client will get an empty response body. This helps to copy the response body for the intermidatory operation (audit).\r\n        responseWrapper.copyBodyToResponse();\r\n\r\n        String requestBody = new String(requestWrapper.contentAsByteArray)\r\n        String responseBody = new String(responseWrapper.contentAsByteArray)\r\n        //..do something with them\r\n    }\r\n}\r\n```\r\n\r\n","title":"How to save requests and responses to database in spring boot","body":"<p>Minor improvements to the Eric's answer : <a href=\"https://stackoverflow.com/a/65527391/2933389\">https://stackoverflow.com/a/65527391/2933389</a>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class MyPayloadCapturingFilter extends OncePerRequestFilter {\n\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\n        ContentCachingRequestWrapper requestWrapper = new ContentCachingRequestWrapper(request)\n        ContentCachingResponseWrapper responseWrapper = new ContentCachingResponseWrapper(response)\n\n        filterChain.doFilter(requestWrapper, responseWrapper)\n        // In the absence of the below line, client will get an empty response body. This helps to copy the response body for the intermidatory operation (audit).\n        responseWrapper.copyBodyToResponse();\n\n        String requestBody = new String(requestWrapper.contentAsByteArray)\n        String responseBody = new String(responseWrapper.contentAsByteArray)\n        //..do something with them\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":10983199,"reputation":91,"user_id":8069714,"display_name":"Aksoy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9670,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":4,"score":1,"last_activity_date":1687350790,"creation_date":1609433324,"question_id":65523527,"body_markdown":"I would like to write an aspect or something like that and whenever a request comes to the controller it saves the request and the response to the database. \r\n\r\nFirst question is what type I should use in my entity for request and response ( string, blob, etc)\r\n\r\nSecond question, how to get request,response and its controller name  to create the entity to save to database ?\r\n\r\n\r\nLastly, is it possible to calculate response time (time spent in the controller) of the controller ? ","title":"How to save requests and responses to database in spring boot","body":"<p>I would like to write an aspect or something like that and whenever a request comes to the controller it saves the request and the response to the database.</p>\n<p>First question is what type I should use in my entity for request and response ( string, blob, etc)</p>\n<p>Second question, how to get request,response and its controller name  to create the entity to save to database ?</p>\n<p>Lastly, is it possible to calculate response time (time spent in the controller) of the controller ?</p>\n"},{"tags":["java","android","kotlin","koin"],"owner":{"account_id":7491585,"reputation":1597,"user_id":5693082,"display_name":"dotGitignore"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":95,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687348978,"creation_date":1687348978,"question_id":76523079,"body_markdown":"I am currently implementing a [Koin Annotations][1] to my project and I would like to know how to declare the `KoinViewModel` and shared its data between java class fragments?\r\n\r\n    @KoinViewModel\r\n    class TestViewModel: ViewModel() {\r\n        private val _testData : MutableLiveData&lt;String&gt; by lazy { MutableLiveData(&quot;init&quot;) }\r\n        val testData: LiveData&lt;String&gt; = _testData\r\n    \r\n        fun updateTestData(s: String) {\r\n            _testData.postValue(s)\r\n        }\r\n    }\r\n\r\n\r\neg:\r\n\r\n    public class TestJavaFragment  extends Fragment {\r\n    \r\n        private final TestViewModel testViewModelLazy = KoinJavaComponent.get(TestViewModel.class);\r\n    \r\n        @Override\r\n        public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {\r\n            super.onViewCreated(view, savedInstanceState);\r\n            testViewModelLazy.updateTestData(&quot;newValue&quot;);\r\n        }\r\n    }\r\n \r\nI know this is incorrect because I am not getting the updated value of `testData` to another fragment class.\r\n\r\neg:\r\n\r\n    public class TestJavaFragment2 extends Fragment {\r\n        private final TestViewModel testViewModelLazy = KoinJavaComponent.get(TestViewModel.class);\r\n    \r\n        @Override\r\n        public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {\r\n            super.onViewCreated(view, savedInstanceState);\r\n            testViewModelLazy.getTestData().observe(getViewLifecycleOwner(), s -&gt; {\r\n                // here I am getting the &quot;init&quot; again.\r\n                Log.i(&quot;TestJavaFragment2&quot;, s);\r\n            });\r\n        }\r\n    }\r\n\r\ndependency versions:\r\n\r\n    dependencies {\r\n        api(&quot;io.insert-koin:koin-android:3.4.1&quot;)\r\n        api(&quot;io.insert-koin:koin-annotations:1.2.1&quot;)\r\n        ksp(&quot;io.insert-koin:koin-ksp-compiler:1.2.1&quot;)\r\n    }\r\n\r\nAny help is appreciated, Thank you!\r\n\r\n  [1]: https://insert-koin.io/docs/setup/annotations/","title":"How to use KOIN ViewModel in Java classes?","body":"<p>I am currently implementing a <a href=\"https://insert-koin.io/docs/setup/annotations/\" rel=\"nofollow noreferrer\">Koin Annotations</a> to my project and I would like to know how to declare the <code>KoinViewModel</code> and shared its data between java class fragments?</p>\n<pre><code>@KoinViewModel\nclass TestViewModel: ViewModel() {\n    private val _testData : MutableLiveData&lt;String&gt; by lazy { MutableLiveData(&quot;init&quot;) }\n    val testData: LiveData&lt;String&gt; = _testData\n\n    fun updateTestData(s: String) {\n        _testData.postValue(s)\n    }\n}\n</code></pre>\n<p>eg:</p>\n<pre><code>public class TestJavaFragment  extends Fragment {\n\n    private final TestViewModel testViewModelLazy = KoinJavaComponent.get(TestViewModel.class);\n\n    @Override\n    public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {\n        super.onViewCreated(view, savedInstanceState);\n        testViewModelLazy.updateTestData(&quot;newValue&quot;);\n    }\n}\n</code></pre>\n<p>I know this is incorrect because I am not getting the updated value of <code>testData</code> to another fragment class.</p>\n<p>eg:</p>\n<pre><code>public class TestJavaFragment2 extends Fragment {\n    private final TestViewModel testViewModelLazy = KoinJavaComponent.get(TestViewModel.class);\n\n    @Override\n    public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {\n        super.onViewCreated(view, savedInstanceState);\n        testViewModelLazy.getTestData().observe(getViewLifecycleOwner(), s -&gt; {\n            // here I am getting the &quot;init&quot; again.\n            Log.i(&quot;TestJavaFragment2&quot;, s);\n        });\n    }\n}\n</code></pre>\n<p>dependency versions:</p>\n<pre><code>dependencies {\n    api(&quot;io.insert-koin:koin-android:3.4.1&quot;)\n    api(&quot;io.insert-koin:koin-annotations:1.2.1&quot;)\n    ksp(&quot;io.insert-koin:koin-ksp-compiler:1.2.1&quot;)\n}\n</code></pre>\n<p>Any help is appreciated, Thank you!</p>\n"},{"tags":["java","spring-boot","logback"],"comments":[{"owner":{"account_id":3418957,"reputation":1176,"user_id":4029174,"accept_rate":100,"display_name":"bananas"},"score":0,"creation_date":1687347560,"post_id":76522844,"comment_id":134923390,"body_markdown":"Have you tried building parent pom with mvn clean install? if yes then try with  force (-U) for both parent and child","body":"Have you tried building parent pom with mvn clean install? if yes then try with  force (-U) for both parent and child"}],"answers":[{"comments":[{"owner":{"account_id":18936970,"reputation":209,"user_id":13817825,"display_name":"phildeg31"},"score":0,"creation_date":1687350376,"post_id":76523021,"comment_id":134924045,"body_markdown":"Oh yes it was just that -_-. Thank you :)","body":"Oh yes it was just that -_-. Thank you :)"}],"tags":[],"owner":{"account_id":24834381,"reputation":26,"user_id":18713197,"display_name":"서혜영"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1687348600,"creation_date":1687348600,"answer_id":76523021,"question_id":76522844,"body_markdown":"A version change from 1.3 to 1.3.0 is required.\r\n\r\n    &lt;!-- https://mvnrepository.com/artifact/ch.qos.logback/logback-classic --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\r\n        &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\r\n        &lt;version&gt;1.3.0&lt;/version&gt;\r\n        &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\nLink:\r\nhttps://mvnrepository.com/artifact/ch.qos.logback/logback-classic/1.3.0","title":"Spring boot: Upgrading logback 1.2.12 to 1.3","body":"<p>A version change from 1.3 to 1.3.0 is required.</p>\n<pre><code>&lt;!-- https://mvnrepository.com/artifact/ch.qos.logback/logback-classic --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\n    &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\n    &lt;version&gt;1.3.0&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Link:\n<a href=\"https://mvnrepository.com/artifact/ch.qos.logback/logback-classic/1.3.0\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/ch.qos.logback/logback-classic/1.3.0</a></p>\n"}],"owner":{"account_id":18936970,"reputation":209,"user_id":13817825,"display_name":"phildeg31"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":976,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76523021,"answer_count":1,"score":0,"last_activity_date":1687348600,"creation_date":1687347311,"question_id":76522844,"body_markdown":"I use spring boot 2.7.12 and our company, for security reason, is asking to use at least the v1.3 of logback. \r\nI see that spring-boot-starter-logging (v2.7.12) is using version 1.2.12 of logback-classic.\r\n\r\nI would like to force the version to 1.3 but when I try to add this in parent pom:\r\n\r\n    &lt;dependencyManagement&gt;\r\n      &lt;dependencies&gt;\r\n      ...\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\r\n          &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\r\n          &lt;version&gt;1.3&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        ...\r\n      &lt;/dependencies&gt;\r\n    &lt;/dependencyManagement&gt;\r\n\r\nI have this error in child pom:\r\n\r\n    Missing artifact ch.qos.logback:logback-classic:jar:1.3\r\n\r\n\r\nI do not understand how to solve it.\r\n\r\nCan you help me please?","title":"Spring boot: Upgrading logback 1.2.12 to 1.3","body":"<p>I use spring boot 2.7.12 and our company, for security reason, is asking to use at least the v1.3 of logback.\nI see that spring-boot-starter-logging (v2.7.12) is using version 1.2.12 of logback-classic.</p>\n<p>I would like to force the version to 1.3 but when I try to add this in parent pom:</p>\n<pre><code>&lt;dependencyManagement&gt;\n  &lt;dependencies&gt;\n  ...\n    &lt;dependency&gt;\n      &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\n      &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\n      &lt;version&gt;1.3&lt;/version&gt;\n    &lt;/dependency&gt;\n    ...\n  &lt;/dependencies&gt;\n&lt;/dependencyManagement&gt;\n</code></pre>\n<p>I have this error in child pom:</p>\n<pre><code>Missing artifact ch.qos.logback:logback-classic:jar:1.3\n</code></pre>\n<p>I do not understand how to solve it.</p>\n<p>Can you help me please?</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":14283811,"reputation":6405,"user_id":10317684,"display_name":"Ricky Mo"},"score":1,"creation_date":1687335575,"post_id":76521067,"comment_id":134920838,"body_markdown":"Either 1. initialize the switch state before setting onCheckedChangeListener, or 2. use onClickListener instead.","body":"Either 1. initialize the switch state before setting onCheckedChangeListener, or 2. use onClickListener instead."},{"owner":{"account_id":17183107,"reputation":245,"user_id":12438238,"display_name":"Vasant Raval"},"score":0,"creation_date":1687339362,"post_id":76521067,"comment_id":134921755,"body_markdown":"i forget about the onClickListner that also works on swtich , thanks a lot","body":"i forget about the onClickListner that also works on swtich , thanks a lot"}],"answers":[{"tags":[],"owner":{"display_name":"user22101027"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1687348370,"creation_date":1687348370,"answer_id":76522986,"question_id":76521067,"body_markdown":"    import android.content.Intent;\r\n    import android.content.pm.PackageManager;\r\n    import android.os.Bundle;\r\n    import android.view.View;\r\n    import android.widget.Switch;\r\n    \r\n    import androidx.appcompat.app.AppCompatActivity;\r\n    \r\n    public class MainActivity extends AppCompatActivity {\r\n    \r\n        private Switch restartSwitch;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n    \r\n            restartSwitch = findViewById(R.id.restartSwitch);\r\n    \r\n            restartSwitch.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    if (restartSwitch.isChecked()) {\r\n                        restartApp();\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    \r\n        private void restartApp() {\r\n            PackageManager packageManager = getPackageManager();\r\n            Intent intent = packageManager.getLaunchIntentForPackage(getPackageName());\r\n            intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);\r\n            startActivity(intent);\r\n            finish();\r\n        }\r\n    }\r\n\r\n","title":"Restart App programmatically when Switch is Pressed","body":"<pre><code>import android.content.Intent;\nimport android.content.pm.PackageManager;\nimport android.os.Bundle;\nimport android.view.View;\nimport android.widget.Switch;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\npublic class MainActivity extends AppCompatActivity {\n\n    private Switch restartSwitch;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        restartSwitch = findViewById(R.id.restartSwitch);\n\n        restartSwitch.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                if (restartSwitch.isChecked()) {\n                    restartApp();\n                }\n            }\n        });\n    }\n\n    private void restartApp() {\n        PackageManager packageManager = getPackageManager();\n        Intent intent = packageManager.getLaunchIntentForPackage(getPackageName());\n        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);\n        startActivity(intent);\n        finish();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":17183107,"reputation":245,"user_id":12438238,"display_name":"Vasant Raval"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76522986,"answer_count":1,"score":0,"last_activity_date":1687348370,"creation_date":1687333553,"question_id":76521067,"body_markdown":"I would like to restart the app whenever the switch is pressed, regardless of its current position. However, the issue is that the app restarts even when I navigate to the fragment containing the switch. I specifically want the restart to occur only when the switch is clicked. Here&#39;s what I have attempted so far: \r\n\r\n     nsfwSetting.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\r\n    \r\n    \r\n                @Override\r\n                public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\r\n                    SharedPreferences.Editor editor = mSharedPrefs_nsfw_settings.edit();\r\n                    editor.putBoolean(REWARD_GRANTED_KEY, isChecked);\r\n                    editor.apply();\r\n                    restartMainActivity()\r\n                }\r\n            });\r\n            nsfwSetting.setChecked(mSharedPrefs_nsfw_settings.getBoolean(REWARD_GRANTED_KEY, false));\r\n    \r\n     private void restartMainActivity() {\r\n            Intent intent = new Intent(requireActivity(), MainActivity.class);\r\n            intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK | Intent.FLAG_ACTIVITY_NEW_TASK);\r\n            startActivity(intent);\r\n            requireActivity().finish();\r\n        }\r\n\r\nCould you please assist me in achieving the desired behavior where the app restarts only upon clicking the switch?\r\n\r\n   \r\n","title":"Restart App programmatically when Switch is Pressed","body":"<p>I would like to restart the app whenever the switch is pressed, regardless of its current position. However, the issue is that the app restarts even when I navigate to the fragment containing the switch. I specifically want the restart to occur only when the switch is clicked. Here's what I have attempted so far:</p>\n<pre><code> nsfwSetting.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\n\n\n            @Override\n            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\n                SharedPreferences.Editor editor = mSharedPrefs_nsfw_settings.edit();\n                editor.putBoolean(REWARD_GRANTED_KEY, isChecked);\n                editor.apply();\n                restartMainActivity()\n            }\n        });\n        nsfwSetting.setChecked(mSharedPrefs_nsfw_settings.getBoolean(REWARD_GRANTED_KEY, false));\n\n private void restartMainActivity() {\n        Intent intent = new Intent(requireActivity(), MainActivity.class);\n        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK | Intent.FLAG_ACTIVITY_NEW_TASK);\n        startActivity(intent);\n        requireActivity().finish();\n    }\n</code></pre>\n<p>Could you please assist me in achieving the desired behavior where the app restarts only upon clicking the switch?</p>\n"},{"tags":["java","websocket","cloudflare"],"comments":[{"owner":{"account_id":469790,"reputation":1689,"user_id":876595,"display_name":"chehsunliu"},"score":0,"creation_date":1687398574,"post_id":76522961,"comment_id":134932472,"body_markdown":"Maybe caused by Cloudflare’s default timeout 100 seconds.","body":"Maybe caused by Cloudflare’s default timeout 100 seconds."},{"owner":{"account_id":4173994,"reputation":708,"user_id":3421066,"accept_rate":25,"display_name":"alext"},"score":0,"creation_date":1687771244,"post_id":76522961,"comment_id":134978025,"body_markdown":"I don&#39;t think that is the case - because heartbeat/ping-pong is implemented as per the API&#39;s. And the disconnects happen randomly - not every 100 seconds","body":"I don&#39;t think that is the case - because heartbeat/ping-pong is implemented as per the API&#39;s. And the disconnects happen randomly - not every 100 seconds"}],"owner":{"account_id":4173994,"reputation":708,"user_id":3421066,"accept_rate":25,"display_name":"alext"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":294,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1687348221,"creation_date":1687348221,"question_id":76522961,"body_markdown":"I am working on an app where I am connecting via Websocket to different exchanges to listen for order updates.  \r\nWhat I am seeing is occasional disconnects happening for the exchanges that are using cloudflare - bitfinex, coinbase and okx to be exact. For the other exchanges that I am connecting to (and they dont seem to be using cloudflare based on the investigation) the issue is not present.  \r\nThe reason/code that I am receiving is\r\nreason: Unexpected Status of SSLEngineResult after an unwrap() operation\r\ncode: 1006.  \r\nI have implemented a reconnection mechanism and it works fine, but I am trying to understand why this happens in the first place.  \r\nAlso ping/pong mechanisms are implemented as well (although for Bitfinex/Coinbase they are not clearly explained in the API).   \r\n\r\nI am using Java 11 + Spring Boot 2 along with the default implementation of Tomcat Websockets (also tested Java 17 + Spring Boot 3 but same behavior).  \r\nThe service is running on AWS -a Kubernetes Pod which is in a Private VPC and is using NAT Gateway to access the Websocket API’s.  \r\n\r\nThanks a lot for the help.  \r\nBest Regards","title":"Cloudflare Random WebSocket Disconnections","body":"<p>I am working on an app where I am connecting via Websocket to different exchanges to listen for order updates.<br />\nWhat I am seeing is occasional disconnects happening for the exchanges that are using cloudflare - bitfinex, coinbase and okx to be exact. For the other exchanges that I am connecting to (and they dont seem to be using cloudflare based on the investigation) the issue is not present.<br />\nThe reason/code that I am receiving is\nreason: Unexpected Status of SSLEngineResult after an unwrap() operation\ncode: 1006.<br />\nI have implemented a reconnection mechanism and it works fine, but I am trying to understand why this happens in the first place.<br />\nAlso ping/pong mechanisms are implemented as well (although for Bitfinex/Coinbase they are not clearly explained in the API).</p>\n<p>I am using Java 11 + Spring Boot 2 along with the default implementation of Tomcat Websockets (also tested Java 17 + Spring Boot 3 but same behavior).<br />\nThe service is running on AWS -a Kubernetes Pod which is in a Private VPC and is using NAT Gateway to access the Websocket API’s.</p>\n<p>Thanks a lot for the help.<br />\nBest Regards</p>\n"},{"tags":["java","linux","docker","docker-compose","dockerfile"],"answers":[{"tags":[],"owner":{"account_id":52964,"reputation":4211,"user_id":2162529,"accept_rate":67,"display_name":"Pierre-Gilles Levallois"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687347661,"creation_date":1687347661,"answer_id":76522898,"question_id":72225833,"body_markdown":"Setting the `buildkit` option to `false` is not sufficient, if you are behind a proxy, you should set **both** `HTTP_PROXY`and HTTPS_PROXY` env vars to get it work.\r\n\r\non Windows, in a CMD :\r\n\r\n    set HTTP_PROXY=YourProxyUrl:Port\r\n    set HTTPS_PROXY=YourProxyUrl:Port\r\n\r\non Windows in a GitBash shell, or on a MacOs shell : \r\n\r\n    export HTTP_PROXY=YourProxyUrl:Port\r\n    export HTTPS_PROXY=YourProxyUrl:Port\r\n\r\n\r\n  ","title":"error: failed to solve: failed to fetch oauth token: Post &quot;https://auth.docker.io/token&quot;: dial tcp: i/o timeout","body":"<p>Setting the <code>buildkit</code> option to <code>false</code> is not sufficient, if you are behind a proxy, you should set <strong>both</strong> <code>HTTP_PROXY</code>and HTTPS_PROXY` env vars to get it work.</p>\n<p>on Windows, in a CMD :</p>\n<pre><code>set HTTP_PROXY=YourProxyUrl:Port\nset HTTPS_PROXY=YourProxyUrl:Port\n</code></pre>\n<p>on Windows in a GitBash shell, or on a MacOs shell :</p>\n<pre><code>export HTTP_PROXY=YourProxyUrl:Port\nexport HTTPS_PROXY=YourProxyUrl:Port\n</code></pre>\n"}],"owner":{"account_id":14498670,"reputation":394,"user_id":10472512,"display_name":"megh_sat"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":923,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"answer_count":1,"score":3,"last_activity_date":1687347661,"creation_date":1652426766,"question_id":72225833,"body_markdown":"I&#39;m trying to build a docker image for my java file on my M1 max MacBook, my dockerfile:\r\n\r\n```\r\nFROM openjdk:8-alpine\r\nCOPY . /src/java\r\nWORKDIR /src/java\r\nRUN [&quot;javac&quot;,&quot;greenchallenge.java&quot;]\r\nENTRYPOINT [&quot;java&quot;,&quot;greenchallenge&quot;]\r\n```\r\n\r\nSteps followed to build the image:\r\n1. Created a new builder using: ```docker buildx create --name pibuilder```\r\n (*I wanted to use the multi architecture feature*)\r\n2. Initialed the builder using: ```docker buildx use pibuilder ```.\r\n3. Built the image and pushed it using: \r\n```\r\ndocker buildx build --platform linux/amd64,linux/arm64,linux/arm/v7 -t my_java:latest -t my_java:1.0.0 --push .\r\n\r\n```\r\n\r\nAfter running **step-3**, I got the below log:\r\n```\r\n[+] Building 47.2s (7/7) FINISHED                                               \r\n =&gt; [internal] booting buildkit                                           15.8s\r\n =&gt; =&gt; pulling image moby/buildkit:buildx-stable-1                        15.2s\r\n =&gt; =&gt; creating container buildx_buildkit_javabuildernew40                 0.6s\r\n =&gt; [internal] load build definition from dockerfile                       0.0s\r\n =&gt; =&gt; transferring dockerfile: 351B                                       0.0s\r\n =&gt; [internal] load .dockerignore                                          0.0s\r\n =&gt; =&gt; transferring context: 2B                                            0.0s\r\n =&gt; ERROR [linux/arm/v7 internal] load metadata for docker.io/library/op  31.3s\r\n =&gt; CANCELED [linux/amd64 internal] load metadata for docker.io/library/  31.3s\r\n =&gt; CANCELED [linux/arm64 internal] load metadata for docker.io/library/  31.3s\r\n =&gt; [auth] library/openjdk:pull token for registry-1.docker.io             0.0s\r\n------\r\n &gt; [linux/arm/v7 internal] load metadata for docker.io/library/openjdk:8-alpine:\r\n------\r\ndockerfile:1\r\n--------------------\r\n   1 | &gt;&gt;&gt; FROM openjdk:8-alpine\r\n   2 |     COPY . /src/java\r\n   3 |     WORKDIR /src/java\r\n--------------------\r\nerror: failed to solve: failed to fetch oauth token: Post &quot;https://auth.docker.io/token&quot;: dial tcp: i/o timeout\r\n```\r\n**Note:** I&#39;m using work Environment, I bypassed proxy as well. \r\n**Note:** As mentioned [here][1] I set ```&quot;buildkit&quot;:false``` and used ```docker login``` in terminal. \r\n\r\nHope you help me to solve the error, thanks in advance.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/65361083/docker-build-failed-to-fetch-oauth-token-for-openjdk","title":"error: failed to solve: failed to fetch oauth token: Post &quot;https://auth.docker.io/token&quot;: dial tcp: i/o timeout","body":"<p>I'm trying to build a docker image for my java file on my M1 max MacBook, my dockerfile:</p>\n<pre><code>FROM openjdk:8-alpine\nCOPY . /src/java\nWORKDIR /src/java\nRUN [&quot;javac&quot;,&quot;greenchallenge.java&quot;]\nENTRYPOINT [&quot;java&quot;,&quot;greenchallenge&quot;]\n</code></pre>\n<p>Steps followed to build the image:</p>\n<ol>\n<li>Created a new builder using: <code>docker buildx create --name pibuilder</code>\n(<em>I wanted to use the multi architecture feature</em>)</li>\n<li>Initialed the builder using: <code>docker buildx use pibuilder </code>.</li>\n<li>Built the image and pushed it using:</li>\n</ol>\n<pre><code>docker buildx build --platform linux/amd64,linux/arm64,linux/arm/v7 -t my_java:latest -t my_java:1.0.0 --push .\n\n</code></pre>\n<p>After running <strong>step-3</strong>, I got the below log:</p>\n<pre><code>[+] Building 47.2s (7/7) FINISHED                                               \n =&gt; [internal] booting buildkit                                           15.8s\n =&gt; =&gt; pulling image moby/buildkit:buildx-stable-1                        15.2s\n =&gt; =&gt; creating container buildx_buildkit_javabuildernew40                 0.6s\n =&gt; [internal] load build definition from dockerfile                       0.0s\n =&gt; =&gt; transferring dockerfile: 351B                                       0.0s\n =&gt; [internal] load .dockerignore                                          0.0s\n =&gt; =&gt; transferring context: 2B                                            0.0s\n =&gt; ERROR [linux/arm/v7 internal] load metadata for docker.io/library/op  31.3s\n =&gt; CANCELED [linux/amd64 internal] load metadata for docker.io/library/  31.3s\n =&gt; CANCELED [linux/arm64 internal] load metadata for docker.io/library/  31.3s\n =&gt; [auth] library/openjdk:pull token for registry-1.docker.io             0.0s\n------\n &gt; [linux/arm/v7 internal] load metadata for docker.io/library/openjdk:8-alpine:\n------\ndockerfile:1\n--------------------\n   1 | &gt;&gt;&gt; FROM openjdk:8-alpine\n   2 |     COPY . /src/java\n   3 |     WORKDIR /src/java\n--------------------\nerror: failed to solve: failed to fetch oauth token: Post &quot;https://auth.docker.io/token&quot;: dial tcp: i/o timeout\n</code></pre>\n<p><strong>Note:</strong> I'm using work Environment, I bypassed proxy as well.\n<strong>Note:</strong> As mentioned <a href=\"https://stackoverflow.com/questions/65361083/docker-build-failed-to-fetch-oauth-token-for-openjdk\">here</a> I set <code>&quot;buildkit&quot;:false</code> and used <code>docker login</code> in terminal.</p>\n<p>Hope you help me to solve the error, thanks in advance.</p>\n"},{"tags":["java","macos","uri"],"owner":{"account_id":1612514,"reputation":159,"user_id":1491077,"accept_rate":100,"display_name":"Fredrik Rafn Strandberg"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1687347608,"creation_date":1687347608,"question_id":76522890,"body_markdown":"We need help to get an URI handler for a Java application on macOS working.\r\n\r\nWe are implementing SSO for an existing Java application and after login in a browser we want to use an URI handler to be able to return to the Java application with some values passed.\r\n\r\nWe were able to implement this on Windows by registering an URI handler in the Windows registry. When navigating to the URI in the browser, a new instance of our application is started with the URI passed as parameters to the main method. The new instance can then send the necessary values from the URI to the already running instance and then exit.\r\n\r\nOn macOS we are able to register an URI scheme in the Info.plist file like this:\r\n\r\n    &lt;key&gt;CFBundleURLTypes&lt;/key&gt;\r\n    &lt;array&gt;\r\n        &lt;dict&gt;\r\n            &lt;key&gt;CFBundleURLName&lt;/key&gt;\r\n            &lt;string&gt;com.company.ourscheme/string&gt;\r\n            &lt;key&gt;CFBundleURLSchemes&lt;/key&gt;\r\n            &lt;array&gt;\r\n                &lt;string&gt;ourscheme&lt;/string&gt;\r\n            &lt;/array&gt;\r\n        &lt;/dict&gt;\r\n    &lt;/array&gt;\r\n\r\nAs we understand it, [the URI will not be passed as an argument to our Main method][1] (it isn&#39;t for us). So, we have tried using [the setOpenURIHandler in java.desktop][2]\r\n\r\n    Desktop.getDesktop().setOpenURIHandler((event) -&gt; {\r\n         System.out.println(&quot;Open URI: &quot; + event.getURI());\r\n         // do something with the URI\r\n    });\r\n\r\nas described by [the answer given by Alex Suzuki here][3]. The requirements are:\r\n\r\n 1. The Java app is a bundled application (our application is)\r\n 2. Use a CFBundleDocumentTypes array\r\n\r\n We have registered for public.data like this:\r\n\r\n    &lt;key&gt;CFBundleDocumentTypes&lt;/key&gt;\r\n    &lt;array&gt;\r\n        &lt;dict&gt;\r\n            &lt;key&gt;CFBundleTypeIconFiles&lt;/key&gt;\r\n            &lt;array/&gt;\r\n            &lt;key&gt;CFBundleTypeName&lt;/key&gt;\r\n            &lt;string&gt;public.data&lt;/string&gt;\r\n            &lt;key&gt;LSHandlerRank&lt;/key&gt;\r\n            &lt;string&gt;Alternate&lt;/string&gt;\r\n            &lt;key&gt;LSItemContentTypes&lt;/key&gt;\r\n            &lt;array&gt;\r\n                &lt;string&gt;public.data&lt;/string&gt;\r\n            &lt;/array&gt;\r\n        &lt;/dict&gt;\r\n    &lt;/array&gt;\r\n\r\nWe have tried to minimize our application so it basically just opens a dialog and waits. The callback method would print and log any callback and any URI provided.\r\n\r\nWhen we enter an URI in the browser:\r\n\r\n&gt; ourscheme://testing\r\n\r\nor use open on the command line:\r\n\r\n&gt; open ourscheme://testing\r\n\r\nWe never get any callback at all. If the application is not running, it is started (but no callback). If the application is already running it does get focus (but no callback).\r\n\r\nWe have tested with a variety of URI&#39;s in case the DocumentTypes registration requires the URI to represent an existing document type, such as:\r\n\r\n&gt; ourscheme://file.txt\r\n\r\nAny idea what we are doing wrong? Are we on the right track here or is there any other strategies on how to solve this?\r\n\r\nWorth to mention is perhaps that we have wrapped our Java application in a small C program which is our executable. The C program just launches Java with some parameters like this (I removed some error handling in the example, but the file is only 33 rows long):\r\n\r\n    int main(int argc, char *argv[])\r\n    {\r\n       // Set some variables used below ...\r\n    \r\n      char *args[] = {java, concat(&quot;-Duser.dir=&quot;, userdir), &quot;-Dsun.awt.disablegrab=true&quot;, concat(&quot;-Xdock:icon=&quot;, icon), &quot;-Xdock:name=Our Product&quot;, &quot;-Dcom.apple.macos.use-file-dialog-packages=true&quot;, &quot;-Dcom.apple.macos.useSmallTabs=true&quot;, &quot;-Dapple.laf.useScreenMenuBar=false&quot;,     &quot;-Dcom.apple.mrj.application.apple.menu.about.name=Our Product&quot;, &quot;-Xms64M&quot;, &quot;-Xmx1024M&quot;, &quot;-jar&quot;, jar, &quot;custom-argument&quot;, NULL};\r\n     \r\n      execv(java, args)\r\n      \r\n      return 0;\r\n    }\r\n\r\nCould this C wrapper somehow affect the URI handler registration?\r\n\r\nThank you in advance for any help!\r\n\r\n**Environment:**\r\n\r\nmacOS Monterey (M1, Aarch64) and Java 17\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/3953716/custom-protocol-handler-not-passing-argument-on-osx\r\n  [2]: https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/java/awt/Desktop.html#setOpenURIHandler(java.awt.desktop.OpenURIHandler)\r\n  [3]: https://stackoverflow.com/questions/20074610/handle-custom-url-schemes-in-an-os-x-java-application/20225859#20225859","title":"Custom URI handler on macOS for bundled Java application","body":"<p>We need help to get an URI handler for a Java application on macOS working.</p>\n<p>We are implementing SSO for an existing Java application and after login in a browser we want to use an URI handler to be able to return to the Java application with some values passed.</p>\n<p>We were able to implement this on Windows by registering an URI handler in the Windows registry. When navigating to the URI in the browser, a new instance of our application is started with the URI passed as parameters to the main method. The new instance can then send the necessary values from the URI to the already running instance and then exit.</p>\n<p>On macOS we are able to register an URI scheme in the Info.plist file like this:</p>\n<pre><code>&lt;key&gt;CFBundleURLTypes&lt;/key&gt;\n&lt;array&gt;\n    &lt;dict&gt;\n        &lt;key&gt;CFBundleURLName&lt;/key&gt;\n        &lt;string&gt;com.company.ourscheme/string&gt;\n        &lt;key&gt;CFBundleURLSchemes&lt;/key&gt;\n        &lt;array&gt;\n            &lt;string&gt;ourscheme&lt;/string&gt;\n        &lt;/array&gt;\n    &lt;/dict&gt;\n&lt;/array&gt;\n</code></pre>\n<p>As we understand it, <a href=\"https://stackoverflow.com/questions/3953716/custom-protocol-handler-not-passing-argument-on-osx\">the URI will not be passed as an argument to our Main method</a> (it isn't for us). So, we have tried using <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/java/awt/Desktop.html#setOpenURIHandler(java.awt.desktop.OpenURIHandler)\" rel=\"nofollow noreferrer\">the setOpenURIHandler in java.desktop</a></p>\n<pre><code>Desktop.getDesktop().setOpenURIHandler((event) -&gt; {\n     System.out.println(&quot;Open URI: &quot; + event.getURI());\n     // do something with the URI\n});\n</code></pre>\n<p>as described by <a href=\"https://stackoverflow.com/questions/20074610/handle-custom-url-schemes-in-an-os-x-java-application/20225859#20225859\">the answer given by Alex Suzuki here</a>. The requirements are:</p>\n<ol>\n<li>The Java app is a bundled application (our application is)</li>\n<li>Use a CFBundleDocumentTypes array</li>\n</ol>\n<p>We have registered for public.data like this:</p>\n<pre><code>&lt;key&gt;CFBundleDocumentTypes&lt;/key&gt;\n&lt;array&gt;\n    &lt;dict&gt;\n        &lt;key&gt;CFBundleTypeIconFiles&lt;/key&gt;\n        &lt;array/&gt;\n        &lt;key&gt;CFBundleTypeName&lt;/key&gt;\n        &lt;string&gt;public.data&lt;/string&gt;\n        &lt;key&gt;LSHandlerRank&lt;/key&gt;\n        &lt;string&gt;Alternate&lt;/string&gt;\n        &lt;key&gt;LSItemContentTypes&lt;/key&gt;\n        &lt;array&gt;\n            &lt;string&gt;public.data&lt;/string&gt;\n        &lt;/array&gt;\n    &lt;/dict&gt;\n&lt;/array&gt;\n</code></pre>\n<p>We have tried to minimize our application so it basically just opens a dialog and waits. The callback method would print and log any callback and any URI provided.</p>\n<p>When we enter an URI in the browser:</p>\n<blockquote>\n<p>ourscheme://testing</p>\n</blockquote>\n<p>or use open on the command line:</p>\n<blockquote>\n<p>open ourscheme://testing</p>\n</blockquote>\n<p>We never get any callback at all. If the application is not running, it is started (but no callback). If the application is already running it does get focus (but no callback).</p>\n<p>We have tested with a variety of URI's in case the DocumentTypes registration requires the URI to represent an existing document type, such as:</p>\n<blockquote>\n<p>ourscheme://file.txt</p>\n</blockquote>\n<p>Any idea what we are doing wrong? Are we on the right track here or is there any other strategies on how to solve this?</p>\n<p>Worth to mention is perhaps that we have wrapped our Java application in a small C program which is our executable. The C program just launches Java with some parameters like this (I removed some error handling in the example, but the file is only 33 rows long):</p>\n<pre><code>int main(int argc, char *argv[])\n{\n   // Set some variables used below ...\n\n  char *args[] = {java, concat(&quot;-Duser.dir=&quot;, userdir), &quot;-Dsun.awt.disablegrab=true&quot;, concat(&quot;-Xdock:icon=&quot;, icon), &quot;-Xdock:name=Our Product&quot;, &quot;-Dcom.apple.macos.use-file-dialog-packages=true&quot;, &quot;-Dcom.apple.macos.useSmallTabs=true&quot;, &quot;-Dapple.laf.useScreenMenuBar=false&quot;,     &quot;-Dcom.apple.mrj.application.apple.menu.about.name=Our Product&quot;, &quot;-Xms64M&quot;, &quot;-Xmx1024M&quot;, &quot;-jar&quot;, jar, &quot;custom-argument&quot;, NULL};\n \n  execv(java, args)\n  \n  return 0;\n}\n</code></pre>\n<p>Could this C wrapper somehow affect the URI handler registration?</p>\n<p>Thank you in advance for any help!</p>\n<p><strong>Environment:</strong></p>\n<p>macOS Monterey (M1, Aarch64) and Java 17</p>\n"},{"tags":["java","collections"],"comments":[{"owner":{"account_id":4523492,"reputation":1277,"user_id":3676021,"accept_rate":57,"display_name":"Kartik_Koro"},"score":0,"creation_date":1403173170,"post_id":24304129,"comment_id":37560252,"body_markdown":"If i&#39;m not wrong, Collections.max() and Collections.min() also iterate through each element.","body":"If i&#39;m not wrong, Collections.max() and Collections.min() also iterate through each element."},{"owner":{"account_id":1254086,"reputation":3387,"user_id":1213934,"accept_rate":58,"display_name":"logoff"},"score":0,"creation_date":1403173214,"post_id":24304129,"comment_id":37560278,"body_markdown":"`max` and `min` make no sense per se, because `Collection` is a generic type. for instance if you have `Collection&lt;Object&gt;`, what would be `max` and `min`? take a look here: http://stackoverflow.com/questions/122105/what-is-the-best-way-to-filter-a-java-collection","body":"<code>max</code> and <code>min</code> make no sense per se, because <code>Collection</code> is a generic type. for instance if you have <code>Collection&lt;Object&gt;</code>, what would be <code>max</code> and <code>min</code>? take a look here: <a href=\"http://stackoverflow.com/questions/122105/what-is-the-best-way-to-filter-a-java-collection\" title=\"what is the best way to filter a java collection\">stackoverflow.com/questions/122105/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":4523492,"reputation":1277,"user_id":3676021,"accept_rate":57,"display_name":"Kartik_Koro"},"score":1,"creation_date":1403173204,"post_id":24304199,"comment_id":37560276,"body_markdown":"Didn&#39;t know about this, seems useful! :D","body":"Didn&#39;t know about this, seems useful! :D"},{"owner":{"account_id":1677932,"reputation":485,"user_id":1543001,"accept_rate":62,"display_name":"Chirag"},"score":0,"creation_date":1403173277,"post_id":24304199,"comment_id":37560312,"body_markdown":"very useful..something new to me..Thanks","body":"very useful..something new to me..Thanks"},{"owner":{"account_id":1677932,"reputation":485,"user_id":1543001,"accept_rate":62,"display_name":"Chirag"},"score":0,"creation_date":1403178682,"post_id":24304199,"comment_id":37563496,"body_markdown":"I am not getting how to use this predicate and pass it in to argument. Can anyone give me demo ?","body":"I am not getting how to use this predicate and pass it in to argument. Can anyone give me demo ?"},{"owner":{"account_id":2674499,"reputation":191,"user_id":4475193,"display_name":"Stanislav Codes"},"score":1,"creation_date":1539739267,"post_id":24304199,"comment_id":92608047,"body_markdown":"Still useful and saves lives four years later :D","body":"Still useful and saves lives four years later :D"},{"owner":{"account_id":4731437,"reputation":329,"user_id":3826954,"accept_rate":67,"display_name":"stackbacker"},"score":0,"creation_date":1689260970,"post_id":24304199,"comment_id":135191362,"body_markdown":"Should probably be noted that the above solution will return true for an empty list.","body":"Should probably be noted that the above solution will return true for an empty list."}],"tags":[],"owner":{"account_id":985197,"reputation":12521,"user_id":1003886,"accept_rate":66,"display_name":"kajacx"},"comment_count":5,"down_vote_count":0,"up_vote_count":62,"is_accepted":true,"score":62,"last_activity_date":1403173396,"creation_date":1403173092,"answer_id":24304199,"question_id":24304129,"body_markdown":"If you have java 8, use stream&#39;s `allMatch` function ([reference][1]):\r\n\r\n     ArrayList&lt;Integer&gt; col = ...;\r\n     col.stream().allMatch(i -&gt; i&gt;0); //for example all integers bigger than zero\r\n\r\n\r\n  [1]: http://www.oracle.com/technetwork/articles/java/ma14-java-se-8-streams-2177646.html","title":"how to check if all elements of java collection match some condition?","body":"<p>If you have java 8, use stream's <code>allMatch</code> function (<a href=\"http://www.oracle.com/technetwork/articles/java/ma14-java-se-8-streams-2177646.html\">reference</a>):</p>\n\n<pre><code> ArrayList&lt;Integer&gt; col = ...;\n col.stream().allMatch(i -&gt; i&gt;0); //for example all integers bigger than zero\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1677932,"reputation":485,"user_id":1543001,"accept_rate":62,"display_name":"Chirag"},"score":0,"creation_date":1403173381,"post_id":24304247,"comment_id":37560379,"body_markdown":"I want to do my job only if all elements of list &gt; of my condition","body":"I want to do my job only if all elements of list &gt; of my condition"}],"tags":[],"owner":{"account_id":1768620,"reputation":4271,"user_id":1613902,"accept_rate":45,"display_name":"Pracede"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1403173437,"creation_date":1403173270,"answer_id":24304247,"question_id":24304129,"body_markdown":"You cannot check values without iterating on all elements of the ***list***. \r\n\r\n    for(Integer value : myArrayList){\r\n    \r\n        if(value &gt; MY_MIN_VALUE){\r\n            // do my job\r\n        }\r\n    }\r\n\r\nI hope this will help","title":"how to check if all elements of java collection match some condition?","body":"<p>You cannot check values without iterating on all elements of the <strong><em>list</em></strong>. </p>\n\n<pre><code>for(Integer value : myArrayList){\n\n    if(value &gt; MY_MIN_VALUE){\n        // do my job\n    }\n}\n</code></pre>\n\n<p>I hope this will help</p>\n"},{"tags":[],"owner":{"account_id":41811,"reputation":15440,"user_id":121595,"accept_rate":48,"display_name":"amorfis"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1403174302,"creation_date":1403174302,"answer_id":24304572,"question_id":24304129,"body_markdown":"You can use Google guavas `Iterables.all` \n\n     Iterables.all(collection, new Predicate() {\n        boolean apply(T element)  {\n           .... //check your condition \n       } \n     } \n","title":"how to check if all elements of java collection match some condition?","body":"<p>You can use Google guavas <code>Iterables.all</code> </p>\n\n<pre><code> Iterables.all(collection, new Predicate() {\n    boolean apply(T element)  {\n       .... //check your condition \n   } \n } \n</code></pre>\n"},{"tags":[],"owner":{"account_id":26898896,"reputation":1,"user_id":20476368,"display_name":"Michael Pichler"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687346800,"creation_date":1687346800,"answer_id":76522773,"question_id":24304129,"body_markdown":"The answer `col.stream().allMatch` is the best solution for the original task, i.e. to check if all elements fulfill some condition.\r\n\r\nIf you instead want to find the min or max int value of a Stream/Collection you must first convert it to an `IntStream` using `col.stream().mapToInt(ToIntFunction)` where the ToIntFunction can be `MyObject::getIntvalue` or `o -&gt; o.getIntValue()` or `Integer::intValue` if you already have a List&amp;lt;Integer&amp;gt; as explained on https://stackoverflow.com/questions/24633913/how-do-i-get-an-intstream-from-a-listinteger","title":"how to check if all elements of java collection match some condition?","body":"<p>The answer <code>col.stream().allMatch</code> is the best solution for the original task, i.e. to check if all elements fulfill some condition.</p>\n<p>If you instead want to find the min or max int value of a Stream/Collection you must first convert it to an <code>IntStream</code> using <code>col.stream().mapToInt(ToIntFunction)</code> where the ToIntFunction can be <code>MyObject::getIntvalue</code> or <code>o -&gt; o.getIntValue()</code> or <code>Integer::intValue</code> if you already have a List&lt;Integer&gt; as explained on <a href=\"https://stackoverflow.com/questions/24633913/how-do-i-get-an-intstream-from-a-listinteger\">How do I get an IntStream from a List&lt;Integer&gt;?</a></p>\n"}],"owner":{"account_id":1677932,"reputation":485,"user_id":1543001,"accept_rate":62,"display_name":"Chirag"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31095,"favorite_count":0,"down_vote_count":0,"up_vote_count":26,"accepted_answer_id":24304199,"answer_count":4,"score":26,"last_activity_date":1687346800,"creation_date":1403172849,"question_id":24304129,"body_markdown":"I have an `ArrayList&lt;Integer&gt;`. I want to check if all elements of the list are greater then or less then certain condition. I can do it by iterating on each element. But I want to know if there is any method in Collection class to get the answer like we can do to find maximum or minimum with `Collections.max()` and `Collections.min()` respectively.","title":"how to check if all elements of java collection match some condition?","body":"<p>I have an <code>ArrayList&lt;Integer&gt;</code>. I want to check if all elements of the list are greater then or less then certain condition. I can do it by iterating on each element. But I want to know if there is any method in Collection class to get the answer like we can do to find maximum or minimum with <code>Collections.max()</code> and <code>Collections.min()</code> respectively.</p>\n"},{"tags":["java","spring-boot","servlets","apache-commons-fileupload"],"comments":[{"owner":{"account_id":3446101,"reputation":11395,"user_id":2886891,"accept_rate":75,"display_name":"Honza Zidek"},"score":0,"creation_date":1688383026,"post_id":76517385,"comment_id":135062386,"body_markdown":"To avoid the x-y problem (https://xyproblem.info/), do you **really need** commons-fileupload? See https://stackoverflow.com/a/68820846/2886891","body":"To avoid the x-y problem (<a href=\"https://xyproblem.info/\" rel=\"nofollow noreferrer\">xyproblem.info</a>), do you <b>really need</b> commons-fileupload? See <a href=\"https://stackoverflow.com/a/68820846/2886891\">stackoverflow.com/a/68820846/2886891</a>"}],"answers":[{"comments":[{"owner":{"account_id":1144755,"reputation":1415,"user_id":1127772,"display_name":"Carlos Saltos"},"score":0,"creation_date":1698959616,"post_id":76517610,"comment_id":136474252,"body_markdown":"Great !! ... thanks !! ... we are trying to use Apache commons fileupload2 for Jakarta at new Olon versions ... here a commit as a reference -&gt; https://github.com/talenteca/olon-web-framework/commit/4e7a7de8059cf8250024957f7f42c7f619a69dfe","body":"Great !! ... thanks !! ... we are trying to use Apache commons fileupload2 for Jakarta at new Olon versions ... here a commit as a reference -&gt; <a href=\"https://github.com/talenteca/olon-web-framework/commit/4e7a7de8059cf8250024957f7f42c7f619a69dfe\" rel=\"nofollow noreferrer\">github.com/talenteca/olon-web-framework/commit/&hellip;</a>"},{"owner":{"account_id":1806558,"reputation":4512,"user_id":1643558,"accept_rate":73,"display_name":"tgkprog"},"score":0,"creation_date":1700265209,"post_id":76517610,"comment_id":136637384,"body_markdown":"@carlos-saltos thanks, good to see folks using it, I&#39;m trying the streaming way so can handle huge files too","body":"@carlos-saltos thanks, good to see folks using it, I&#39;m trying the streaming way so can handle huge files too"}],"tags":[],"owner":{"account_id":17959846,"reputation":51,"user_id":13051065,"display_name":"odinx"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1687286560,"creation_date":1687286560,"answer_id":76517610,"question_id":76517385,"body_markdown":"Apache is planning to release a [new version][1] of FileUpload that supports Jakarta, which should resolve the issues with migrating from javax to jakarta.\r\n\r\nPlease note that the dependency declaration will be changed for the new version. You can refer to the [previous link][1] for more information:\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n      &lt;artifactId&gt;commons-fileupload2-jakarta&lt;/artifactId&gt;\r\n      &lt;version&gt;2.0.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n  [1]: https://github.com/apache/commons-fileupload#where-can-i-get-the-latest-release","title":"commons-fileupload and jakarta.servlet","body":"<p>Apache is planning to release a <a href=\"https://github.com/apache/commons-fileupload#where-can-i-get-the-latest-release\" rel=\"nofollow noreferrer\">new version</a> of FileUpload that supports Jakarta, which should resolve the issues with migrating from javax to jakarta.</p>\n<p>Please note that the dependency declaration will be changed for the new version. You can refer to the <a href=\"https://github.com/apache/commons-fileupload#where-can-i-get-the-latest-release\" rel=\"nofollow noreferrer\">previous link</a> for more information:</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n  &lt;artifactId&gt;commons-fileupload2-jakarta&lt;/artifactId&gt;\n  &lt;version&gt;2.0.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":17959846,"reputation":51,"user_id":13051065,"display_name":"odinx"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2988,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76517610,"answer_count":1,"score":1,"last_activity_date":1687345824,"creation_date":1687284335,"question_id":76517385,"body_markdown":"We are currently in the process of migrating our application to Spring Boot 3. We have been using the Commons FileUpload streaming API to directly load large multipart files into a remote file share. However, we have encountered an issue where the **`javax.servlet.http.HttpServletRequest`** has been migrated to **`jakarta.servlet.http.HttpServletRequest`**. As a result, the FileUpload library is no longer functioning since it requires **`javax.servlet.http.HttpServletRequest`**.\r\n\r\nDoes Servlet API or Spring framework provide a similar functionality for file streaming without the need to save all files in memory beforehand?","title":"commons-fileupload and jakarta.servlet","body":"<p>We are currently in the process of migrating our application to Spring Boot 3. We have been using the Commons FileUpload streaming API to directly load large multipart files into a remote file share. However, we have encountered an issue where the <strong><code>javax.servlet.http.HttpServletRequest</code></strong> has been migrated to <strong><code>jakarta.servlet.http.HttpServletRequest</code></strong>. As a result, the FileUpload library is no longer functioning since it requires <strong><code>javax.servlet.http.HttpServletRequest</code></strong>.</p>\n<p>Does Servlet API or Spring framework provide a similar functionality for file streaming without the need to save all files in memory beforehand?</p>\n"},{"tags":["java","boolean","autoboxing"],"comments":[{"owner":{"account_id":45934,"reputation":203679,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":10,"creation_date":1291120291,"post_id":4313513,"comment_id":4684902,"body_markdown":"Why don&#39;t you try it out yourself?","body":"Why don&#39;t you try it out yourself?"},{"owner":{"account_id":31293,"reputation":43494,"user_id":85821,"accept_rate":73,"display_name":"Bart van Heukelom"},"score":0,"creation_date":1291124426,"post_id":4313513,"comment_id":4685636,"body_markdown":"@Jesper: I did, see my own answer below","body":"@Jesper: I did, see my own answer below"}],"answers":[{"comments":[{"owner":{"display_name":"user285879"},"score":0,"creation_date":1433977526,"post_id":4313525,"comment_id":49589655,"body_markdown":"This is a great way to go.  The ApacheCommons libraries make Java programming a joy.","body":"This is a great way to go.  The ApacheCommons libraries make Java programming a joy."},{"owner":{"account_id":71353,"reputation":16394,"user_id":206466,"accept_rate":70,"display_name":"xenoterracide"},"score":0,"creation_date":1541536621,"post_id":4313525,"comment_id":93249343,"body_markdown":"glancing at the code in lang3, this does `Boolean.TRUE.equals(...)`, etc. Personally didn&#39;t think it was worth the 3rd party dep.","body":"glancing at the code in lang3, this does <code>Boolean.TRUE.equals(...)</code>, etc. Personally didn&#39;t think it was worth the 3rd party dep."},{"owner":{"account_id":4541793,"reputation":26874,"user_id":3689450,"display_name":"VLAZ"},"score":0,"creation_date":1550581653,"post_id":4313525,"comment_id":96314108,"body_markdown":"@xenoterracide not if you just want to avoid `Boolean.TRUE.equals(myValue)` but if you&#39;re already using the Apache Commons library for other stuff, then why not take advantage of it even more?","body":"@xenoterracide not if you just want to avoid <code>Boolean.TRUE.equals(myValue)</code> but if you&#39;re already using the Apache Commons library for other stuff, then why not take advantage of it even more?"}],"tags":[],"owner":{"account_id":28934,"reputation":7258,"user_id":77722,"accept_rate":90,"display_name":"Tobias"},"comment_count":3,"down_vote_count":2,"up_vote_count":22,"is_accepted":false,"score":20,"last_activity_date":1291118769,"creation_date":1291118769,"answer_id":4313525,"question_id":4313513,"body_markdown":"Use ApacheCommons BooleanUtils.isTrue() or .isFalse()","title":"Boolean != false","body":"<p>Use ApacheCommons BooleanUtils.isTrue() or .isFalse()</p>\n"},{"tags":[],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"comment_count":0,"down_vote_count":0,"up_vote_count":53,"is_accepted":true,"score":53,"last_activity_date":1291118887,"creation_date":1291118887,"answer_id":4313548,"question_id":4313513,"body_markdown":"It will throw a `NullPointerException` ([autounboxing][1] of `null` throws NPE).\r\n\r\nBut that only means that you must not allow a `null` value. Either use a default, or don&#39;t use autounboxing and make a non-null check. Because using a `null` value of a boolean means you have 3, not 2 values. (Better ways of handling it were proposed by Michael and Tobiask)\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html","title":"Boolean != false","body":"<p>It will throw a <code>NullPointerException</code> (<a href=\"http://download.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html\" rel=\"noreferrer\">autounboxing</a> of <code>null</code> throws NPE).</p>\n\n<p>But that only means that you must not allow a <code>null</code> value. Either use a default, or don't use autounboxing and make a non-null check. Because using a <code>null</code> value of a boolean means you have 3, not 2 values. (Better ways of handling it were proposed by Michael and Tobiask)</p>\n"},{"tags":[],"owner":{"account_id":58153,"reputation":5728,"user_id":2922388,"accept_rate":65,"display_name":"Gopi"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1291118891,"creation_date":1291118891,"answer_id":4313550,"question_id":4313513,"body_markdown":"As Boolean will give you an object, you must always check for NULL before working on the object","title":"Boolean != false","body":"<p>As Boolean will give you an object, you must always check for NULL before working on the object</p>\n"},{"comments":[{"owner":{"account_id":31293,"reputation":43494,"user_id":85821,"accept_rate":73,"display_name":"Bart van Heukelom"},"score":2,"creation_date":1291119346,"post_id":4313559,"comment_id":4684728,"body_markdown":"Or if you want to do something when someBool is `null` as well, `!Boolean.FALSE.equals(someBool)`","body":"Or if you want to do something when someBool is <code>null</code> as well, <code>!Boolean.FALSE.equals(someBool)</code>"},{"owner":{"account_id":45934,"reputation":203679,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":0,"creation_date":1291120455,"post_id":4313559,"comment_id":4684930,"body_markdown":"@Bart `Boolean.FALSE.equals(null)` will return `false` - your statement does exactly the same as Michael&#39;s answer.","body":"@Bart <code>Boolean.FALSE.equals(null)</code> will return <code>false</code> - your statement does exactly the same as Michael&#39;s answer."},{"owner":{"account_id":9193,"reputation":343123,"user_id":16883,"accept_rate":83,"display_name":"Michael Borgwardt"},"score":9,"creation_date":1291120943,"post_id":4313559,"comment_id":4685026,"body_markdown":"@Jesper: Nope. `!Boolean.FALSE.equals(null)` returns `true` while `Boolean.TRUE.equals(null)` returns `false`. However, this does demonstrate nicely that double negations are hard to parse mentally and therefore are better avoided.","body":"@Jesper: Nope. <code>!Boolean.FALSE.equals(null)</code> returns <code>true</code> while <code>Boolean.TRUE.equals(null)</code> returns <code>false</code>. However, this does demonstrate nicely that double negations are hard to parse mentally and therefore are better avoided."},{"owner":{"account_id":31293,"reputation":43494,"user_id":85821,"accept_rate":73,"display_name":"Bart van Heukelom"},"score":0,"creation_date":1291124272,"post_id":4313559,"comment_id":4685615,"body_markdown":"In my case I have a Boolean doFoo. An error is thrown if doFoo is true and foo is not done, or if doFoo is false and foo is done. If doFoo is null no errors are thrown regardless","body":"In my case I have a Boolean doFoo. An error is thrown if doFoo is true and foo is not done, or if doFoo is false and foo is done. If doFoo is null no errors are thrown regardless"},{"owner":{"account_id":45934,"reputation":203679,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":0,"creation_date":1291128805,"post_id":4313559,"comment_id":4686523,"body_markdown":"@Michael, @Bart Argh, you&#39;re right, I even tried it out but made a mistake while doing so... sorry.","body":"@Michael, @Bart Argh, you&#39;re right, I even tried it out but made a mistake while doing so... sorry."}],"tags":[],"owner":{"account_id":9193,"reputation":343123,"user_id":16883,"accept_rate":83,"display_name":"Michael Borgwardt"},"comment_count":5,"down_vote_count":0,"up_vote_count":127,"is_accepted":false,"score":127,"last_activity_date":1291118934,"creation_date":1291118934,"answer_id":4313559,"question_id":4313513,"body_markdown":"If you want to handle `Boolean` instances as well as primitives and be null-safe, you can use this:\r\n\r\n    if(Boolean.TRUE.equals(someBool))","title":"Boolean != false","body":"<p>If you want to handle <code>Boolean</code> instances as well as primitives and be null-safe, you can use this:</p>\n\n<pre><code>if(Boolean.TRUE.equals(someBool))\n</code></pre>\n"},{"tags":[],"owner":{"account_id":91502,"reputation":88311,"user_id":251173,"accept_rate":86,"display_name":"Buhake Sindi"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1291119007,"creation_date":1291119007,"answer_id":4313569,"question_id":4313513,"body_markdown":"If `someBool` is `Boolean` \r\n\r\n    if (someBull != null &amp;&amp; someBull) {\r\n      //Yeah, true.\r\n    }\r\n\r\nSince Boolean can be `null` make sure you avoid `NullPointerException` by checking for not null.","title":"Boolean != false","body":"<p>If <code>someBool</code> is <code>Boolean</code> </p>\n\n<pre><code>if (someBull != null &amp;&amp; someBull) {\n  //Yeah, true.\n}\n</code></pre>\n\n<p>Since Boolean can be <code>null</code> make sure you avoid <code>NullPointerException</code> by checking for not null.</p>\n"},{"tags":[],"owner":{"account_id":27166,"reputation":19089,"user_id":71399,"accept_rate":65,"display_name":"pauljwilliams"},"comment_count":0,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1291119015,"creation_date":1291119015,"answer_id":4313570,"question_id":4313513,"body_markdown":"If its null then you&#39;ll get a NullPointerException","title":"Boolean != false","body":"<p>If its null then you'll get a NullPointerException</p>\n"},{"comments":[{"owner":{"account_id":1052591,"reputation":1052,"user_id":1056109,"accept_rate":100,"display_name":"Chris Parton"},"score":1,"creation_date":1411530797,"post_id":4313575,"comment_id":40732937,"body_markdown":"You can avoid the double negation by saying `Boolean.TRUE.equals(o)`","body":"You can avoid the double negation by saying <code>Boolean.TRUE.equals(o)</code>"},{"owner":{"account_id":182955,"reputation":2403,"user_id":418031,"accept_rate":89,"display_name":"Zavael"},"score":0,"creation_date":1447069729,"post_id":4313575,"comment_id":54991477,"body_markdown":"@ChrisParton no, you can not actualy. See the comments on Michael Borgwardt answer for difference in null case","body":"@ChrisParton no, you can not actualy. See the comments on Michael Borgwardt answer for difference in null case"}],"tags":[],"owner":{"account_id":31293,"reputation":43494,"user_id":85821,"accept_rate":73,"display_name":"Bart van Heukelom"},"comment_count":2,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1291119058,"creation_date":1291119058,"answer_id":4313575,"question_id":4313513,"body_markdown":"I did a little test:\r\n\r\n\r\n\t\tBoolean o = null;\r\n\t\ttry {\r\n\t\t\tSystem.out.println(o ? &quot;yes&quot; : &quot;no&quot;);\r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\ttry {\r\n\t\t\tSystem.out.println((o != false) ? &quot;yes&quot; : &quot;no&quot;);\r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\r\nThe output is surprising:\r\n\r\n    java.lang.NullPointerException\r\n    \tat btest.main(btest.java:10)\r\n    java.lang.NullPointerException\r\n    \tat btest.main(btest.java:15)\r\n\r\nThe first NPE is to be expected, because o will be autounboxed (and that fails because it&#39;s null). The second happens for the same reason, but it doesn&#39;t feel natural. Anyway, the solution is to do:\r\n\r\n    System.out.println(!Boolean.FALSE.equals(o) ? &quot;yes&quot; : &quot;no&quot;);","title":"Boolean != false","body":"<p>I did a little test:</p>\n\n<pre><code>    Boolean o = null;\n    try {\n        System.out.println(o ? \"yes\" : \"no\");\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n    try {\n        System.out.println((o != false) ? \"yes\" : \"no\");\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n</code></pre>\n\n<p>The output is surprising:</p>\n\n<pre><code>java.lang.NullPointerException\n    at btest.main(btest.java:10)\njava.lang.NullPointerException\n    at btest.main(btest.java:15)\n</code></pre>\n\n<p>The first NPE is to be expected, because o will be autounboxed (and that fails because it's null). The second happens for the same reason, but it doesn't feel natural. Anyway, the solution is to do:</p>\n\n<pre><code>System.out.println(!Boolean.FALSE.equals(o) ? \"yes\" : \"no\");\n</code></pre>\n"},{"comments":[{"owner":{"account_id":481212,"reputation":6556,"user_id":894885,"accept_rate":88,"display_name":"Samuel Edwin Ward"},"score":2,"creation_date":1320675150,"post_id":4326815,"comment_id":9840603,"body_markdown":"Unfortunately there are other reasons one would want to use Boolean, for instance storing the values a collection of Objects.  In that case you have to deal with the three use cases whether you want them or not.","body":"Unfortunately there are other reasons one would want to use Boolean, for instance storing the values a collection of Objects.  In that case you have to deal with the three use cases whether you want them or not."}],"tags":[],"owner":{"account_id":678144,"reputation":600,"user_id":525655,"display_name":"aksarben"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1291222456,"creation_date":1291222456,"answer_id":4326815,"question_id":4313513,"body_markdown":"Good illustrations of the difference between the primitive **boolean** &amp; the object **Boolean**. The former can be only **true** or **false**. The latter can be **true**, **false**, or **unknown/undefined**. (i.e., null). Which you use depends on whether you want to deal with two use cases or three.","title":"Boolean != false","body":"<p>Good illustrations of the difference between the primitive <strong>boolean</strong> &amp; the object <strong>Boolean</strong>. The former can be only <strong>true</strong> or <strong>false</strong>. The latter can be <strong>true</strong>, <strong>false</strong>, or <strong>unknown/undefined</strong>. (i.e., null). Which you use depends on whether you want to deal with two use cases or three.</p>\n"},{"comments":[{"owner":{"account_id":199943,"reputation":84060,"user_id":445543,"accept_rate":85,"display_name":"stivlo"},"score":4,"creation_date":1373635475,"post_id":16769521,"comment_id":25642518,"body_markdown":"This won&#39;t work if I create a Boolean with new, it will work only when [valueOf](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/lang/Integer.java#Integer.valueOf%28int%29) and possibly autoboxing is used `assertThat(new Boolean(true) == Boolean.TRUE, is(true));` this test doesn&#39;t pass...","body":"This won&#39;t work if I create a Boolean with new, it will work only when <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/lang/Integer.java#Integer.valueOf%28int%29\" rel=\"nofollow noreferrer\">valueOf</a> and possibly autoboxing is used <code>assertThat(new Boolean(true) == Boolean.TRUE, is(true));</code> this test doesn&#39;t pass..."},{"owner":{"account_id":341129,"reputation":39091,"user_id":671543,"accept_rate":55,"display_name":"njzk2"},"score":2,"creation_date":1373640121,"post_id":16769521,"comment_id":25645475,"body_markdown":"@stivlo: I would have though Booleans (and all primitive-representing objects) would have been in some form of pool and considered equals. Thank you for the comment, I learnt something today.","body":"@stivlo: I would have though Booleans (and all primitive-representing objects) would have been in some form of pool and considered equals. Thank you for the comment, I learnt something today."},{"owner":{"account_id":176838,"reputation":1045,"user_id":407782,"display_name":"Dallas"},"score":0,"creation_date":1415897820,"post_id":16769521,"comment_id":42377490,"body_markdown":"use `Boolean.TRUE.equals(myBool)` or `Boolean.FALSE.equals(myBool)` instead.","body":"use <code>Boolean.TRUE.equals(myBool)</code> or <code>Boolean.FALSE.equals(myBool)</code> instead."}],"tags":[],"owner":{"account_id":341129,"reputation":39091,"user_id":671543,"accept_rate":55,"display_name":"njzk2"},"comment_count":3,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1369644678,"creation_date":1369644678,"answer_id":16769521,"question_id":4313513,"body_markdown":"You can however compare a null Boolean with a Boolean instance. For example :\r\n\r\n\tBoolean myBool = null;\r\n\tSystem.out.println(myBool == Boolean.FALSE);\r\n\tSystem.out.println(myBool == Boolean.TRUE);\r\n\r\nprints :\r\n\r\n    false\r\n    false","title":"Boolean != false","body":"<p>You can however compare a null Boolean with a Boolean instance. For example :</p>\n\n<pre><code>Boolean myBool = null;\nSystem.out.println(myBool == Boolean.FALSE);\nSystem.out.println(myBool == Boolean.TRUE);\n</code></pre>\n\n<p>prints :</p>\n\n<pre><code>false\nfalse\n</code></pre>\n"},{"tags":[],"owner":{"account_id":208983,"reputation":2546,"user_id":459783,"accept_rate":41,"display_name":"Dave"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1502217539,"creation_date":1502215986,"answer_id":45575323,"question_id":4313513,"body_markdown":"It&#39;s old, but `Boolean.valueOf(null)` is `false`, just like `Boolean.valueOf(false)` is `false`.","title":"Boolean != false","body":"<p>It's old, but <code>Boolean.valueOf(null)</code> is <code>false</code>, just like <code>Boolean.valueOf(false)</code> is <code>false</code>.</p>\n"},{"tags":[],"owner":{"account_id":1651641,"reputation":8505,"user_id":1522117,"display_name":"nickl-"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1504312799,"creation_date":1504312799,"answer_id":46009474,"question_id":4313513,"body_markdown":"Actually the Boolean constructor accepts null, returns FALSE and doesn&#39;t throw a NullPointerTantrum. \r\n\r\n     new Boolean(null);\r\n     &lt;false&gt;\r\n\r\n\r\nThis has the added bonus of also giving a thruthy response to the string `&quot;true&quot;` which is not the case for `Boolean.TRUE.equals` but we are more restricted again having only constructors for Strings and Booleans. \r\n\r\nSomething you can overcome with string concatenation, which is also null-proof.\r\n\r\n     new Boolean(&quot;&quot;+null);\r\n     &lt;false&gt;\r\n\r\n     new Boolean(&quot;&quot;+false);\r\n     &lt;false&gt;\r\n\r\n     new Boolean(&quot;&quot;+new Object());\r\n     &lt;false&gt;\r\n\r\n     new Boolean(&quot;&quot;+6);\r\n     &lt;false&gt;\r\n\r\n     new Boolean(&quot;&quot;+new Integer(9));\r\n     &lt;false&gt;\r\n\r\nEnsuring that all the TRUE options, available in java, still remains.\r\n\r\n     new Boolean(&quot;&quot;+true);\r\n     &lt;true&gt;\r\n\r\n     new Boolean(&quot;&quot;+&quot;true&quot;);\r\n     &lt;true&gt;\r\n","title":"Boolean != false","body":"<p>Actually the Boolean constructor accepts null, returns FALSE and doesn't throw a NullPointerTantrum. </p>\n\n<pre><code> new Boolean(null);\n &lt;false&gt;\n</code></pre>\n\n<p>This has the added bonus of also giving a thruthy response to the string <code>\"true\"</code> which is not the case for <code>Boolean.TRUE.equals</code> but we are more restricted again having only constructors for Strings and Booleans. </p>\n\n<p>Something you can overcome with string concatenation, which is also null-proof.</p>\n\n<pre><code> new Boolean(\"\"+null);\n &lt;false&gt;\n\n new Boolean(\"\"+false);\n &lt;false&gt;\n\n new Boolean(\"\"+new Object());\n &lt;false&gt;\n\n new Boolean(\"\"+6);\n &lt;false&gt;\n\n new Boolean(\"\"+new Integer(9));\n &lt;false&gt;\n</code></pre>\n\n<p>Ensuring that all the TRUE options, available in java, still remains.</p>\n\n<pre><code> new Boolean(\"\"+true);\n &lt;true&gt;\n\n new Boolean(\"\"+\"true\");\n &lt;true&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4408231,"reputation":1174,"user_id":3591946,"accept_rate":85,"display_name":"Kohei Nozaki"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1524866289,"creation_date":1524866289,"answer_id":50070804,"question_id":4313513,"body_markdown":"If it&#39;s Java 7+ you can use\r\n\r\n    import java.util.Objects;\r\n\r\nAnd\r\n\r\n    if (Objects.equals(someBool, true))\r\n","title":"Boolean != false","body":"<p>If it's Java 7+ you can use</p>\n\n<pre><code>import java.util.Objects;\n</code></pre>\n\n<p>And</p>\n\n<pre><code>if (Objects.equals(someBool, true))\n</code></pre>\n"}],"owner":{"account_id":31293,"reputation":43494,"user_id":85821,"accept_rate":73,"display_name":"Bart van Heukelom"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49560,"favorite_count":0,"down_vote_count":0,"up_vote_count":35,"accepted_answer_id":4313548,"answer_count":12,"score":35,"last_activity_date":1687345754,"creation_date":1291118675,"question_id":4313513,"body_markdown":"In Java, you would usually say that\r\n\r\n`if(someBool != false)`\r\n\r\nis the same as\r\n\r\n`if(someBool)`\r\n\r\nBut what if `someBool` is not of type `boolean` but  `Boolean`, and its value is `null`?","title":"Boolean != false","body":"<p>In Java, you would usually say that</p>\n\n<p><code>if(someBool != false)</code></p>\n\n<p>is the same as</p>\n\n<p><code>if(someBool)</code></p>\n\n<p>But what if <code>someBool</code> is not of type <code>boolean</code> but  <code>Boolean</code>, and its value is <code>null</code>?</p>\n"},{"tags":["java","performance","boolean","nullable"],"answers":[{"comments":[{"owner":{"account_id":2309970,"reputation":2023,"user_id":2028317,"accept_rate":92,"display_name":"Delmon Young"},"score":0,"creation_date":1365634067,"post_id":15937737,"comment_id":22707441,"body_markdown":"So could I do something like: **Boolean hideInNav = parent.getProperties().get(&quot;hideInNav&quot;, false); if(hideInNav != null){ do something } **","body":"So could I do something like: **Boolean hideInNav = parent.getProperties().get(&quot;hideInNav&quot;, false); if(hideInNav != null){ do something } **"},{"owner":{"account_id":1530673,"reputation":3748,"user_id":1427942,"display_name":"Eich"},"score":1,"creation_date":1365634237,"post_id":15937737,"comment_id":22707497,"body_markdown":"Yes, because then `hideInNav` holds a reference to a `Boolean` object and can be `null` (no reference assigned). Therefor you can check if the reference is `null`.","body":"Yes, because then <code>hideInNav</code> holds a reference to a <code>Boolean</code> object and can be <code>null</code> (no reference assigned). Therefor you can check if the reference is <code>null</code>."},{"owner":{"account_id":1714996,"reputation":1970,"user_id":1572286,"display_name":"Youness"},"score":1,"creation_date":1552074369,"post_id":15937737,"comment_id":96887565,"body_markdown":"BooleanUtils.isTrue(java.lang.Boolean bool) is what I use to check its status in the condition as Boolean can be null.  https://commons.apache.org/proper/commons-lang/javadocs/api-2.4/org/apache/commons/lang/BooleanUtils.html","body":"BooleanUtils.isTrue(java.lang.Boolean bool) is what I use to check its status in the condition as Boolean can be null.  <a href=\"https://commons.apache.org/proper/commons-lang/javadocs/api-2.4/org/apache/commons/lang/BooleanUtils.html\" rel=\"nofollow noreferrer\">commons.apache.org/proper/commons-lang/javadocs/api-2.4/org/&zwnj;&#8203;&hellip;</a>"},{"owner":{"account_id":1530673,"reputation":3748,"user_id":1427942,"display_name":"Eich"},"score":1,"creation_date":1552564803,"post_id":15937737,"comment_id":97062888,"body_markdown":"Without apache commons:\n```Boolean.TRUE.equals(xxx)```","body":"Without apache commons: <code>Boolean.TRUE.equals(xxx)</code>"}],"tags":[],"owner":{"account_id":1530673,"reputation":3748,"user_id":1427942,"display_name":"Eich"},"comment_count":4,"down_vote_count":1,"up_vote_count":151,"is_accepted":true,"score":150,"last_activity_date":1476111386,"creation_date":1365633439,"answer_id":15937737,"question_id":15937715,"body_markdown":"`boolean` can only be `true` or `false` because it&#39;s a [primitive datatype](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html) (+ a `boolean` variables default value is `false`). You can use the class `Boolean` instead if you want to use `null` values. Boolean is a reference type, that&#39;s the reason you can assign `null` to a Boolean &quot;variable&quot;. Example:\r\n\r\n    Boolean testvar = null;\r\n    if (testvar == null) { ...}","title":"Java check if boolean is null","body":"<p><code>boolean</code> can only be <code>true</code> or <code>false</code> because it's a <a href=\"http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html\" rel=\"noreferrer\">primitive datatype</a> (+ a <code>boolean</code> variables default value is <code>false</code>). You can use the class <code>Boolean</code> instead if you want to use <code>null</code> values. Boolean is a reference type, that's the reason you can assign <code>null</code> to a Boolean \"variable\". Example:</p>\n\n<pre><code>Boolean testvar = null;\nif (testvar == null) { ...}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":9075275,"reputation":605,"user_id":6920453,"display_name":"Sajid khan"},"score":1,"creation_date":1552739146,"post_id":15937739,"comment_id":97130787,"body_markdown":"Correct Explanation, Thanks.","body":"Correct Explanation, Thanks."},{"owner":{"account_id":3368850,"reputation":3589,"user_id":2828651,"accept_rate":56,"display_name":"صلي علي محمد - Atef Farouk"},"score":0,"creation_date":1683238805,"post_id":15937739,"comment_id":134340603,"body_markdown":"for me this is not correct, boolean  is giving null","body":"for me this is not correct, boolean  is giving null"},{"owner":{"account_id":5672288,"reputation":294,"user_id":4486592,"display_name":"Guilherme Taffarel Bergamin"},"score":0,"creation_date":1698676029,"post_id":15937739,"comment_id":136431866,"body_markdown":"@صليعليمحمد-AtefFarouk, then you are either not working with Java or you mistook `Boolean` for `boolean`.","body":"@صليعليمحمد-AtefFarouk, then you are either not working with Java or you mistook <code>Boolean</code> for <code>boolean</code>."}],"tags":[],"owner":{"account_id":1075870,"reputation":7152,"user_id":1074041,"accept_rate":100,"display_name":"Trevor Freeman"},"comment_count":3,"down_vote_count":0,"up_vote_count":84,"is_accepted":false,"score":84,"last_activity_date":1677079405,"creation_date":1365633445,"answer_id":15937739,"question_id":15937715,"body_markdown":" - A `boolean` cannot be `null` in Java.\r\n - A `Boolean`, however, can be `null`.\r\n - If a `boolean` is not assigned a value (say a *member* of a class)\r\n   then it will be `false` by default.","title":"Java check if boolean is null","body":"<ul>\n<li>A <code>boolean</code> cannot be <code>null</code> in Java.</li>\n<li>A <code>Boolean</code>, however, can be <code>null</code>.</li>\n<li>If a <code>boolean</code> is not assigned a value (say a <em>member</em> of a class)\nthen it will be <code>false</code> by default.</li>\n</ul>\n"},{"comments":[{"owner":{"account_id":2103622,"reputation":26956,"user_id":1870555,"accept_rate":75,"display_name":"christopher"},"score":0,"creation_date":1365672592,"post_id":15937764,"comment_id":22719932,"body_markdown":"Agreed. Not the best time for spelling mistakes! Swiftly editing :)","body":"Agreed. Not the best time for spelling mistakes! Swiftly editing :)"}],"tags":[],"owner":{"account_id":2103622,"reputation":26956,"user_id":1870555,"accept_rate":75,"display_name":"christopher"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1365672600,"creation_date":1365633551,"answer_id":15937764,"question_id":15937715,"body_markdown":"`null` is a value assigned to a reference type. `null` is a reserved value, indicating that a reference does not resemble an instance of an object.\r\n\r\nA `boolean` is not an instance of an Object. It is a primitive type, like `int` and `float`. In the same way that: `int x` has a value of `0`, `boolean x` has a value of `false`.","title":"Java check if boolean is null","body":"<p><code>null</code> is a value assigned to a reference type. <code>null</code> is a reserved value, indicating that a reference does not resemble an instance of an object.</p>\n\n<p>A <code>boolean</code> is not an instance of an Object. It is a primitive type, like <code>int</code> and <code>float</code>. In the same way that: <code>int x</code> has a value of <code>0</code>, <code>boolean x</code> has a value of <code>false</code>.</p>\n"},{"tags":[],"owner":{"account_id":1890809,"reputation":1104,"user_id":1708941,"display_name":"Kenogu Labz"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1365633572,"creation_date":1365633572,"answer_id":15937768,"question_id":15937715,"body_markdown":"`boolean` is a primitive type, and therefore can not be null.\r\n\r\nIts boxed type, `Boolean`, can be null.\r\n\r\nThe function is probably returning a `Boolean` as opposed to a `boolean`, so assigning the result to a `Boolean`-type variable will allow you to test for nullity.","title":"Java check if boolean is null","body":"<p><code>boolean</code> is a primitive type, and therefore can not be null.</p>\n\n<p>Its boxed type, <code>Boolean</code>, can be null.</p>\n\n<p>The function is probably returning a <code>Boolean</code> as opposed to a <code>boolean</code>, so assigning the result to a <code>Boolean</code>-type variable will allow you to test for nullity.</p>\n"},{"tags":[],"owner":{"account_id":1310033,"reputation":2369,"user_id":1258206,"accept_rate":50,"display_name":"Tom"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1365634198,"creation_date":1365633604,"answer_id":15937771,"question_id":15937715,"body_markdown":"In Java, `null` only applies to object references; since `boolean` is a primitive type, it cannot be assigned `null`.\r\n\r\nIt&#39;s hard to get context from your example, but I&#39;m guessing that if `hideInNav` is not in the object returned by `getProperties()`, the (default value?) you&#39;ve indicated will be `false`.  I suspect this is the bug that you&#39;re seeing, as `false` is not equal to `null`, so `hideNavigation` is getting the empty string?\r\n\r\nYou might get some better answers with a bit more context to your code sample.","title":"Java check if boolean is null","body":"<p>In Java, <code>null</code> only applies to object references; since <code>boolean</code> is a primitive type, it cannot be assigned <code>null</code>.</p>\n\n<p>It's hard to get context from your example, but I'm guessing that if <code>hideInNav</code> is not in the object returned by <code>getProperties()</code>, the (default value?) you've indicated will be <code>false</code>.  I suspect this is the bug that you're seeing, as <code>false</code> is not equal to <code>null</code>, so <code>hideNavigation</code> is getting the empty string?</p>\n\n<p>You might get some better answers with a bit more context to your code sample.</p>\n"},{"comments":[{"owner":{"account_id":1076053,"reputation":85188,"user_id":1281433,"accept_rate":43,"display_name":"Joshua Taylor"},"score":2,"creation_date":1372093799,"post_id":15937867,"comment_id":25053396,"body_markdown":"The capitalization of `Boolean` in “A `Boolean` which…” is unfortunate.  A variable of type `boolean` can only hold `true` and `false`, but a variable of type `Boolean` holds a `Boolean` object, or `null`.","body":"The capitalization of <code>Boolean</code> in “A <code>Boolean</code> which…” is unfortunate.  A variable of type <code>boolean</code> can only hold <code>true</code> and <code>false</code>, but a variable of type <code>Boolean</code> holds a <code>Boolean</code> object, or <code>null</code>."}],"tags":[],"owner":{"account_id":2584301,"reputation":1317,"user_id":2240355,"display_name":"Joban"},"comment_count":1,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1376720108,"creation_date":1365634095,"answer_id":15937867,"question_id":15937715,"body_markdown":"The only thing that can be a `null` is a non-primivite.\n\nA `boolean` which can only hold `TRUE` or `FALSE` is a primitive. The `TRUE`/`FALSE` in memory are actually numbers (`0` and `1`)\n\n&gt; 0 = FALSE\n&gt;\n&gt; 1 = TRUE\n\nSo when you instantiate an object it will be null\n`String str; // will equal null`\n\nOn the other hand if you instaniate a primitive it will be assigned to 0 default.\n\n`boolean isTrue; // will be 0`\n\n`int i; // will be 0`","title":"Java check if boolean is null","body":"<p>The only thing that can be a <code>null</code> is a non-primivite.</p>\n<p>A <code>boolean</code> which can only hold <code>TRUE</code> or <code>FALSE</code> is a primitive. The <code>TRUE</code>/<code>FALSE</code> in memory are actually numbers (<code>0</code> and <code>1</code>)</p>\n<blockquote>\n<p>0 = FALSE</p>\n<p>1 = TRUE</p>\n</blockquote>\n<p>So when you instantiate an object it will be null\n<code>String str; // will equal null</code></p>\n<p>On the other hand if you instaniate a primitive it will be assigned to 0 default.</p>\n<p><code>boolean isTrue; // will be 0</code></p>\n<p><code>int i; // will be 0</code></p>\n"},{"tags":[],"owner":{"account_id":2859365,"reputation":81,"user_id":2454920,"display_name":"Nikunj Trivedi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1593423546,"creation_date":1593422838,"answer_id":62635115,"question_id":15937715,"body_markdown":"**boolean** is a primitive data type in Java and **primitive data types can not be null like other primitives int, float etc**, they should be containing default values if not assigned.\r\n\r\nIn Java, only objects can assigned to null, it means the corresponding object has no reference and so does not contain any representation in memory.\r\n\r\nHence If you want to work with object as *null* , you should be using Boolean class which wraps ***a primitive boolean type value*** inside its object.\r\n\r\n&gt; These are called wrapper classes in Java\r\n\r\nFor Example:\r\n\r\n    Boolean bool = readValue(...); // Read Your Value\r\n    if (bool  == null) { do This ...}","title":"Java check if boolean is null","body":"<p><strong>boolean</strong> is a primitive data type in Java and <strong>primitive data types can not be null like other primitives int, float etc</strong>, they should be containing default values if not assigned.</p>\n<p>In Java, only objects can assigned to null, it means the corresponding object has no reference and so does not contain any representation in memory.</p>\n<p>Hence If you want to work with object as <em>null</em> , you should be using Boolean class which wraps <em><strong>a primitive boolean type value</strong></em> inside its object.</p>\n<blockquote>\n<p>These are called wrapper classes in Java</p>\n</blockquote>\n<p>For Example:</p>\n<pre><code>Boolean bool = readValue(...); // Read Your Value\nif (bool  == null) { do This ...}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3368179,"reputation":3257,"user_id":2828176,"accept_rate":83,"display_name":"Ferdous Wahid"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687345690,"creation_date":1687345690,"answer_id":76522631,"question_id":15937715,"body_markdown":"You can use `Objects.equals()` from `java.util.Objects`\r\n\r\n    if(Objects.equals(value1, value1){\r\n     //your code\r\n    }\r\n\r\nIn documentation it said, this will check null and value as well. \r\n\r\nImplementation from Java doc:\r\n\r\n    Returns true if the arguments are equal to each other and false otherwise. \r\n    Consequently, if both arguments are null, true is returned and if exactly one \r\n    argument is null, false is returned. Otherwise, equality is determined by using \r\n    the equals method of the first argument.\r\n\r\n    Params: a – an object \r\n            b – an object to be compared with a for equality\r\n    Returns: true if the arguments are equal to each other and false otherwise\r\n    See Also: Object.equals(Object)\r\n    \r\n    public static boolean equals(Object a, Object b) {\r\n        return (a == b) || (a != null &amp;&amp; a.equals(b));\r\n    }","title":"Java check if boolean is null","body":"<p>You can use <code>Objects.equals()</code> from <code>java.util.Objects</code></p>\n<pre><code>if(Objects.equals(value1, value1){\n //your code\n}\n</code></pre>\n<p>In documentation it said, this will check null and value as well.</p>\n<p>Implementation from Java doc:</p>\n<pre><code>Returns true if the arguments are equal to each other and false otherwise. \nConsequently, if both arguments are null, true is returned and if exactly one \nargument is null, false is returned. Otherwise, equality is determined by using \nthe equals method of the first argument.\n\nParams: a – an object \n        b – an object to be compared with a for equality\nReturns: true if the arguments are equal to each other and false otherwise\nSee Also: Object.equals(Object)\n\npublic static boolean equals(Object a, Object b) {\n    return (a == b) || (a != null &amp;&amp; a.equals(b));\n}\n</code></pre>\n"}],"owner":{"account_id":2309970,"reputation":2023,"user_id":2028317,"accept_rate":92,"display_name":"Delmon Young"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":320253,"favorite_count":0,"down_vote_count":3,"up_vote_count":102,"accepted_answer_id":15937737,"answer_count":8,"score":99,"last_activity_date":1687345690,"creation_date":1365633341,"question_id":15937715,"body_markdown":"How do you check if a boolean is null or not? So if I know &quot;hideInNav&quot; is null. How do I stop \r\nit from further executing? Something like the below doesn&#39;t seem to work but why? \r\n\r\n    boolean hideInNav = parent.getProperties().get(&quot;hideInNav&quot;, false);\r\n    String hideNavigation = hideInNav != null ? hideInNav : &quot;&quot;;\r\n\r\n","title":"Java check if boolean is null","body":"<p>How do you check if a boolean is null or not? So if I know \"hideInNav\" is null. How do I stop \nit from further executing? Something like the below doesn't seem to work but why? </p>\n\n<pre><code>boolean hideInNav = parent.getProperties().get(\"hideInNav\", false);\nString hideNavigation = hideInNav != null ? hideInNav : \"\";\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-annotations"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1543497354,"post_id":53539728,"comment_id":93946803,"body_markdown":"The pattern in `@JsonFormat` seems to be a `SimpleDateFormat` pattern which indicates said class is being used internally. `SimpleDateFormat` has a method to set it to non-lenient (`setLenient(false)`) to make it throw a `java.text.ParseException` for a date like this. So the question would be: how do you tell `@JsonFormat` to use a non-lenient format here?","body":"The pattern in <code>@JsonFormat</code> seems to be a <code>SimpleDateFormat</code> pattern which indicates said class is being used internally. <code>SimpleDateFormat</code> has a method to set it to non-lenient (<code>setLenient(false)</code>) to make it throw a <code>java.text.ParseException</code> for a date like this. So the question would be: how do you tell <code>@JsonFormat</code> to use a non-lenient format here?"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":2,"creation_date":1543498014,"post_id":53539728,"comment_id":93947194,"body_markdown":"`@JsonFormat` already seems to have the `lenient` property as of Jackson 2.9.0: http://static.javadoc.io/com.fasterxml.jackson.core/jackson-annotations/2.9.0/com/fasterxml/jackson/annotation/JsonFormat.html - so `@JsonFormat(shape = JsonFormat.Shape.STRING, pattern = &quot;MM/dd/yyyy&quot;, lenient = false)` should do the trick, provided that you&#39;re using Jackson 2.9.0 or higher.","body":"<code>@JsonFormat</code> already seems to have the <code>lenient</code> property as of Jackson 2.9.0: <a href=\"http://static.javadoc.io/com.fasterxml.jackson.core/jackson-annotations/2.9.0/com/fasterxml/jackson/annotation/JsonFormat.html\" rel=\"nofollow noreferrer\">static.javadoc.io/com.fasterxml.jackson.core/&hellip;</a> - so <code>@JsonFormat(shape = JsonFormat.Shape.STRING, pattern = &quot;MM&#47;dd&#47;yyyy&quot;, lenient = false)</code> should do the trick, provided that you&#39;re using Jackson 2.9.0 or higher."}],"answers":[{"tags":[],"owner":{"account_id":5384313,"reputation":2155,"user_id":4288730,"display_name":"hasnae"},"comment_count":0,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1543497729,"creation_date":1543497729,"answer_id":53540029,"question_id":53539728,"body_markdown":"You can use a custom deserializer :\r\n\r\n    public class DateDeSerializer extends StdDeserializer&lt;Date&gt; {\r\n    \r\n        public DateDeSerializer() {\r\n            super(Date.class);\r\n        }\r\n    \r\n        @Override\r\n        public Date deserialize(JsonParser p, DeserializationContext ctxt)\r\n            throws IOException, JsonProcessingException {\r\n            String value = p.readValueAs(String.class);\r\n            try {\r\n                return new SimpleDateFormat(&quot;MM/dd/yyyy&quot;).parse(value);\r\n            } catch (DateTimeParseException e) {\r\n                //throw an error\r\n            }\r\n        }\r\n    \r\n    }\r\n\r\n and use like :\r\n\r\n\r\n    @JsonDeserialize(using = DateDeSerializer .class)\r\n     private Date startDate;","title":"How to validate date in the format &quot;MM/dd/yyyy&quot; in Spring Boot?","body":"<p>You can use a custom deserializer :</p>\n\n<pre><code>public class DateDeSerializer extends StdDeserializer&lt;Date&gt; {\n\n    public DateDeSerializer() {\n        super(Date.class);\n    }\n\n    @Override\n    public Date deserialize(JsonParser p, DeserializationContext ctxt)\n        throws IOException, JsonProcessingException {\n        String value = p.readValueAs(String.class);\n        try {\n            return new SimpleDateFormat(\"MM/dd/yyyy\").parse(value);\n        } catch (DateTimeParseException e) {\n            //throw an error\n        }\n    }\n\n}\n</code></pre>\n\n<p>and use like :</p>\n\n<pre><code>@JsonDeserialize(using = DateDeSerializer .class)\n private Date startDate;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":204450,"reputation":11422,"user_id":452680,"accept_rate":91,"display_name":"Saravanan"},"score":2,"creation_date":1543497953,"post_id":53540043,"comment_id":93947156,"body_markdown":"In this case how to show our custom error message for invalid dates..?","body":"In this case how to show our custom error message for invalid dates..?"},{"owner":{"account_id":11913998,"reputation":20337,"user_id":8718377,"display_name":"veben"},"score":0,"creation_date":1543498415,"post_id":53540043,"comment_id":93947444,"body_markdown":"@Saravanan, you can use typeMismatch, but it&#39;s not ideal. See http://jtuts.com/2014/11/09/validating-dates-in-spring-form-objects/","body":"@Saravanan, you can use typeMismatch, but it&#39;s not ideal. See <a href=\"http://jtuts.com/2014/11/09/validating-dates-in-spring-form-objects/\" rel=\"nofollow noreferrer\">jtuts.com/2014/11/09/validating-dates-in-spring-form-objects</a>"},{"owner":{"account_id":4802848,"reputation":2464,"user_id":3878948,"accept_rate":86,"display_name":"Rishabh Agarwal"},"score":1,"creation_date":1633374679,"post_id":53540043,"comment_id":122738209,"body_markdown":"This is perfect","body":"This is perfect"}],"tags":[],"owner":{"account_id":11913998,"reputation":20337,"user_id":8718377,"display_name":"veben"},"comment_count":3,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1543497770,"creation_date":1543497770,"answer_id":53540043,"question_id":53539728,"body_markdown":"You can use something like that:\r\n\r\n    @DateTimeFormat(iso = DateTimeFormat.ISO.DATE)\r\n    @JsonFormat(pattern = &quot;MM/dd/yyyy&quot;)\r\n    private LocalDate startDate;\r\n\r\nBut I don&#39;t know if it can work with class `Date`","title":"How to validate date in the format &quot;MM/dd/yyyy&quot; in Spring Boot?","body":"<p>You can use something like that:</p>\n\n<pre><code>@DateTimeFormat(iso = DateTimeFormat.ISO.DATE)\n@JsonFormat(pattern = \"MM/dd/yyyy\")\nprivate LocalDate startDate;\n</code></pre>\n\n<p>But I don't know if it can work with class <code>Date</code></p>\n"},{"comments":[{"owner":{"account_id":204450,"reputation":11422,"user_id":452680,"accept_rate":91,"display_name":"Saravanan"},"score":0,"creation_date":1543499818,"post_id":53540453,"comment_id":93948284,"body_markdown":"I tried your approach.. but it is showing @CustomDateValidator is not an annotation type.","body":"I tried your approach.. but it is showing @CustomDateValidator is not an annotation type."},{"owner":{"account_id":3928715,"reputation":442,"user_id":3248142,"display_name":"G.Noulas"},"score":0,"creation_date":1543500352,"post_id":53540453,"comment_id":93948587,"body_markdown":"check here for details https://www.baeldung.com/spring-mvc-custom-validator","body":"check here for details <a href=\"https://www.baeldung.com/spring-mvc-custom-validator\" rel=\"nofollow noreferrer\">baeldung.com/spring-mvc-custom-validator</a>"},{"owner":{"account_id":13830008,"reputation":89,"user_id":9983181,"display_name":"CoderMSL"},"score":0,"creation_date":1675617921,"post_id":53540453,"comment_id":132963536,"body_markdown":"I&#39;m almost sure that it should be `@CustomDateConstraint private LocalDate startDate;` instead of `@CustomDateValidator private LocalDate startDate;` . Already posted an update to your post @G.Noulas :-)","body":"I&#39;m almost sure that it should be <code>@CustomDateConstraint private LocalDate startDate;</code> instead of <code>@CustomDateValidator private LocalDate startDate;</code> . Already posted an update to your post @G.Noulas :-)"}],"tags":[],"owner":{"account_id":3928715,"reputation":442,"user_id":3248142,"display_name":"G.Noulas"},"comment_count":3,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1543499080,"creation_date":1543499080,"answer_id":53540453,"question_id":53539728,"body_markdown":"    @CustomDateValidator\r\n    private LocalDate startDate;\r\n    \r\n    @Documented\r\n    @Constraint(validatedBy = CustomDateValidator.class)\r\n    @Target( { ElementType.METHOD, ElementType.FIELD })\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    public @interface CustomDateConstraint {\r\n        String message() default &quot;Invalid date format&quot;;\r\n        Class&lt;?&gt;[] groups() default {};\r\n        Class&lt;? extends Payload&gt;[] payload() default {};\r\n    }\r\n    \r\n    public class CustomDateValidator implements\r\n      ConstraintValidator&lt;CustomDateConstraint, LocalDate&gt; {\r\n     \r\n    \tprivate static final String DATE_PATTERN = &quot;MM/dd/yyyy&quot;;\r\n     \r\n        @Override\r\n        public void initialize(CustomDateConstraint customDate) {\r\n        }\r\n     \r\n        @Override\r\n        public boolean isValid(LocalDate customDateField,\r\n          ConstraintValidatorContext cxt) {\r\n    \t\t  SimpleDateFormat sdf = new SimpleDateFormat(DATE_PATTERN);\r\n    \t\t   try\r\n            {\r\n    \t\t\tsdf.setLenient(false);\r\n                Date d = sdf.parse(customDateField);\r\n                return true;\r\n            }\r\n            catch (ParseException e)\r\n            {\r\n                return false;\r\n            }\r\n        }\r\n     \r\n    }","title":"How to validate date in the format &quot;MM/dd/yyyy&quot; in Spring Boot?","body":"<pre><code>@CustomDateValidator\nprivate LocalDate startDate;\n\n@Documented\n@Constraint(validatedBy = CustomDateValidator.class)\n@Target( { ElementType.METHOD, ElementType.FIELD })\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface CustomDateConstraint {\n    String message() default \"Invalid date format\";\n    Class&lt;?&gt;[] groups() default {};\n    Class&lt;? extends Payload&gt;[] payload() default {};\n}\n\npublic class CustomDateValidator implements\n  ConstraintValidator&lt;CustomDateConstraint, LocalDate&gt; {\n\n    private static final String DATE_PATTERN = \"MM/dd/yyyy\";\n\n    @Override\n    public void initialize(CustomDateConstraint customDate) {\n    }\n\n    @Override\n    public boolean isValid(LocalDate customDateField,\n      ConstraintValidatorContext cxt) {\n          SimpleDateFormat sdf = new SimpleDateFormat(DATE_PATTERN);\n           try\n        {\n            sdf.setLenient(false);\n            Date d = sdf.parse(customDateField);\n            return true;\n        }\n        catch (ParseException e)\n        {\n            return false;\n        }\n    }\n\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":6542879,"reputation":369,"user_id":5059727,"accept_rate":60,"display_name":"Mayank Jain"},"score":1,"creation_date":1687268067,"post_id":76511562,"comment_id":134910643,"body_markdown":"This will not work as Pattern annotation is not applicable on field with data type &quot;Date&quot;. \nBy using pattern annotation, you&#39;ll get exception &quot;javax.validation.UnexpectedTypeException&quot;","body":"This will not work as Pattern annotation is not applicable on field with data type &quot;Date&quot;.  By using pattern annotation, you&#39;ll get exception &quot;javax.validation.UnexpectedTypeException&quot;"}],"tags":[],"owner":{"account_id":6164499,"reputation":475,"user_id":4805256,"display_name":"arjun kumar"},"comment_count":1,"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1687345635,"creation_date":1687237860,"answer_id":76511562,"question_id":53539728,"body_markdown":"Try using below\r\n\r\n&gt; @Pattern(regexp = &quot;\\\\d{4}-\\\\d{2}-\\\\d{2}&quot;, message = &quot;Invalid date\r\n&gt; format. The expected format is yyyy-MM-dd&quot;)\r\n\r\nDo the change in regex and message according to expectation.\r\nNote:  this is applicable for String data type only. so if you can convert it to String, it would be easy for you to manage such validation.","title":"How to validate date in the format &quot;MM/dd/yyyy&quot; in Spring Boot?","body":"<p>Try using below</p>\n<blockquote>\n<p>@Pattern(regexp = &quot;\\d{4}-\\d{2}-\\d{2}&quot;, message = &quot;Invalid date\nformat. The expected format is yyyy-MM-dd&quot;)</p>\n</blockquote>\n<p>Do the change in regex and message according to expectation.\nNote:  this is applicable for String data type only. so if you can convert it to String, it would be easy for you to manage such validation.</p>\n"}],"owner":{"account_id":204450,"reputation":11422,"user_id":452680,"accept_rate":91,"display_name":"Saravanan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47831,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"answer_count":4,"score":13,"last_activity_date":1687345635,"creation_date":1543496752,"question_id":53539728,"body_markdown":"I need to validate the given date has valid month, date and year. Basically, date format would be `MM/dd/yyyy`. But date coming like `13/40/2018` then I need to throw an error message like:\r\n\r\n&gt; invalid start date\r\n\r\nIs there any annotation available in spring to get this done?\r\n\r\n    @NotNull(message = ExceptionConstants.INVALID_START_DATE)\r\n    @JsonFormat(shape = JsonFormat.Shape.STRING, pattern = &quot;MM/dd/yyyy&quot;)\r\n    private Date startDate;","title":"How to validate date in the format &quot;MM/dd/yyyy&quot; in Spring Boot?","body":"<p>I need to validate the given date has valid month, date and year. Basically, date format would be <code>MM/dd/yyyy</code>. But date coming like <code>13/40/2018</code> then I need to throw an error message like:</p>\n<blockquote>\n<p>invalid start date</p>\n</blockquote>\n<p>Is there any annotation available in spring to get this done?</p>\n<pre><code>@NotNull(message = ExceptionConstants.INVALID_START_DATE)\n@JsonFormat(shape = JsonFormat.Shape.STRING, pattern = &quot;MM/dd/yyyy&quot;)\nprivate Date startDate;\n</code></pre>\n"},{"tags":["java","postgresql","spring-boot","hibernate","intellij-idea"],"comments":[{"owner":{"account_id":13055830,"reputation":173,"user_id":9434729,"display_name":"Jelmen"},"score":0,"creation_date":1687344774,"post_id":76522468,"comment_id":134922804,"body_markdown":"Do you use Spring?","body":"Do you use Spring?"},{"owner":{"account_id":26147565,"reputation":81,"user_id":19835993,"display_name":"Michael Sparrow"},"score":0,"creation_date":1687344907,"post_id":76522468,"comment_id":134922823,"body_markdown":"Yes. I&#39;m using Spring Boot to be exact.","body":"Yes. I&#39;m using Spring Boot to be exact."},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1687344919,"post_id":76522468,"comment_id":134922825,"body_markdown":"please share the complete stacktrace","body":"please share the complete stacktrace"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":1,"creation_date":1687345233,"post_id":76522468,"comment_id":134922900,"body_markdown":"The parameter oldValue and newValue should be primitive types, not objects","body":"The parameter oldValue and newValue should be primitive types, not objects"},{"owner":{"account_id":26147565,"reputation":81,"user_id":19835993,"display_name":"Michael Sparrow"},"score":0,"creation_date":1687345513,"post_id":76522468,"comment_id":134922966,"body_markdown":"That indeed did the trick. Thanks. I saw your comment after posting the answer &#128077;","body":"That indeed did the trick. Thanks. I saw your comment after posting the answer 👍"}],"answers":[{"tags":[],"owner":{"account_id":26147565,"reputation":81,"user_id":19835993,"display_name":"Michael Sparrow"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1687345445,"creation_date":1687345445,"answer_id":76522587,"question_id":76522468,"body_markdown":"**I&#39;ve got the solution.** The problem occured after the update of Spring Boot to the version 3. It&#39;s no longer possible to use the self-made java entities in native queries - **Customer** in this case.\r\n\r\nThe solution in this case was to replace the Customer entity with just the id of it.","title":"Could not resolve NativeQuery parameter type | Spring Boot update version 3","body":"<p><strong>I've got the solution.</strong> The problem occured after the update of Spring Boot to the version 3. It's no longer possible to use the self-made java entities in native queries - <strong>Customer</strong> in this case.</p>\n<p>The solution in this case was to replace the Customer entity with just the id of it.</p>\n"}],"owner":{"account_id":26147565,"reputation":81,"user_id":19835993,"display_name":"Michael Sparrow"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":731,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":76522587,"answer_count":1,"score":1,"last_activity_date":1687345554,"creation_date":1687344701,"question_id":76522468,"body_markdown":"I&#39;m trying to query a *PostgreSQL* database using a native query in *Hibernate*. Unfortunately whenever I try I get the error: **Could not resolve NativeQuery parameter type : org.hibernate.query.internal.QueryParameterPositionalImpl@22**.\r\n\r\nThat&#39;s the query:\r\n```\r\n@Modifying(clearAutomatically = true, flushAutomatically = true)\r\n@Query(value = &quot;update table_name set column1=?3 where column1=?2 and parameter=?1&quot;, nativeQuery = true)\r\nint myQuery(String parameter, Customer oldValue, Customer newValue);\r\n```\r\n\r\nIs it dependent on the SQL-Dialect settings in Intellij? I&#39;ve set it to *Generic SQL*. Has anyone stumbled upon this problem before? Thanks in advice :)","title":"Could not resolve NativeQuery parameter type | Spring Boot update version 3","body":"<p>I'm trying to query a <em>PostgreSQL</em> database using a native query in <em>Hibernate</em>. Unfortunately whenever I try I get the error: <strong>Could not resolve NativeQuery parameter type : org.hibernate.query.internal.QueryParameterPositionalImpl@22</strong>.</p>\n<p>That's the query:</p>\n<pre><code>@Modifying(clearAutomatically = true, flushAutomatically = true)\n@Query(value = &quot;update table_name set column1=?3 where column1=?2 and parameter=?1&quot;, nativeQuery = true)\nint myQuery(String parameter, Customer oldValue, Customer newValue);\n</code></pre>\n<p>Is it dependent on the SQL-Dialect settings in Intellij? I've set it to <em>Generic SQL</em>. Has anyone stumbled upon this problem before? Thanks in advice :)</p>\n"},{"tags":["java","lucene"],"answers":[{"comments":[{"owner":{"account_id":1664089,"reputation":1217,"user_id":1531855,"display_name":"borowis"},"score":0,"creation_date":1659978015,"post_id":44855770,"comment_id":129418605,"body_markdown":"what about atomicity of the operation? with two statements it&#39;s possible to be left in the incomplete state so now error handling is on you :(","body":"what about atomicity of the operation? with two statements it&#39;s possible to be left in the incomplete state so now error handling is on you :("},{"owner":{"account_id":6248735,"reputation":1758,"user_id":4859626,"display_name":"Sithija Piyuman Thewa Hettige"},"score":0,"creation_date":1681092663,"post_id":44855770,"comment_id":133998146,"body_markdown":"is there a way to update a doc by multiple terms? as in i have a composite primary key in the index","body":"is there a way to update a doc by multiple terms? as in i have a composite primary key in the index"}],"tags":[],"owner":{"account_id":1787149,"reputation":32983,"user_id":1628375,"display_name":"femtoRgon"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1498863319,"creation_date":1498863319,"answer_id":44855770,"question_id":44853827,"body_markdown":"All that `updateDocument` does is delete documents that contain the term, and then add the new document. So, you can just use `deleteDocuments`, which you can pass a Query to instead, followed by `addDocument` to accomplish the same thing.\r\n\r\n    writer.deleteDocuments(LongPoint.newExactQuery(&quot;foo_number&quot;, 1000));\r\n    writer.addDocument(newDoc);","title":"Lucene - Update documents using LongPoint Field as Term in writer.updateDocuments()","body":"<p>All that <code>updateDocument</code> does is delete documents that contain the term, and then add the new document. So, you can just use <code>deleteDocuments</code>, which you can pass a Query to instead, followed by <code>addDocument</code> to accomplish the same thing.</p>\n\n<pre><code>writer.deleteDocuments(LongPoint.newExactQuery(\"foo_number\", 1000));\nwriter.addDocument(newDoc);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18287082,"reputation":1,"user_id":13314733,"display_name":"Hrozhek"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687345421,"creation_date":1687345421,"answer_id":76522586,"question_id":44853827,"body_markdown":"This problem should be addressed in the nearest Lucene release (9.7.0 I guess). There were a pull request that added an updateDocuments(Query, Iterable) method to IndexWriter.","title":"Lucene - Update documents using LongPoint Field as Term in writer.updateDocuments()","body":"<p>This problem should be addressed in the nearest Lucene release (9.7.0 I guess). There were a pull request that added an updateDocuments(Query, Iterable) method to IndexWriter.</p>\n"}],"owner":{"account_id":2542455,"reputation":119,"user_id":2207975,"accept_rate":0,"display_name":"pandaren"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":913,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1687345421,"creation_date":1498851734,"question_id":44853827,"body_markdown":"I am trying to update a document in my index using writer.update(Term t, Document doc) method.\r\nUpdate is successful if I specify a TextField in Term, but fails when I supply a LongPoint in Term\r\n&lt;br&gt;\r\nA sample of my code:&lt;br&gt;\r\n\r\n    package com.luceneserver.core;\r\n    \r\n    import java.io.IOException;\r\n    \r\n    import org.apache.lucene.document.Document;\r\n    import org.apache.lucene.document.Field.Store;\r\n    import org.apache.lucene.document.LongPoint;\r\n    import org.apache.lucene.document.StoredField;\r\n    import org.apache.lucene.document.TextField;\r\n    import org.apache.lucene.index.DirectoryReader;\r\n    import org.apache.lucene.index.IndexReader;\r\n    import org.apache.lucene.index.IndexWriter;\r\n    import org.apache.lucene.index.IndexWriterConfig;\r\n    import org.apache.lucene.index.Term;\r\n    import org.apache.lucene.search.IndexSearcher;\r\n    import org.apache.lucene.search.MatchAllDocsQuery;\r\n    import org.apache.lucene.search.ScoreDoc;\r\n    import org.apache.lucene.store.RAMDirectory;\r\n    \r\n    public class SampleDocUpdates {\r\n    \r\n    \tpublic static void main(String[] args) throws IOException {\r\n    \t\tIndexWriter writer = new IndexWriter(new RAMDirectory(), new IndexWriterConfig());\r\n    \t\tIndexReader reader;\r\n    \t\tIndexSearcher searcher;\r\n    \t\t\r\n    \t\t\r\n    \t\t// first document in the index\r\n    \t\tDocument initialDoc = new Document();\r\n    \t\t// adding a text field\r\n    \t\tinitialDoc.add(new TextField(&quot;foo_text&quot;, &quot;abc&quot;, Store.YES));\r\n    \t\t// adding a numeric field\r\n    \t\tinitialDoc.add(new LongPoint(&quot;foo_number&quot;, 1000));\r\n    \t\t// adding stored field to display hits\r\n    \t\tinitialDoc.add(new StoredField(&quot;foo_number&quot;, 1000));\r\n    \t\t\r\n    \t\t\r\n    \t\twriter.addDocument(initialDoc);\r\n    \t\t\r\n    \t\t\r\n    \t\t// second document in index which should update the first one..\r\n    \t\tDocument newDoc = new Document();\r\n    \t\tnewDoc.add(new TextField(&quot;foo_text&quot;, &quot;def&quot;, Store.YES));\r\n    \t\tnewDoc.add(new LongPoint(&quot;foo_number&quot;, 2000));\r\n    \t\tnewDoc.add(new StoredField(&quot;foo_number&quot;, 2000));\r\n    \t\t\r\n    \t\t\r\n    \t\t// update doc with foo_text:abc with the newDoc instance.\r\n    \t\twriter.updateDocument(new Term(&quot;foo_text&quot;, &quot;abc&quot;), newDoc);\r\n    \t\t\r\n    \t\treader = DirectoryReader.open(writer);\r\n    \t\tsearcher = new IndexSearcher(reader);\r\n    \t\t\r\n    \t\tScoreDoc[] scoreDocs = searcher.search(new MatchAllDocsQuery(), 1000).scoreDocs;\r\n    \t\t\r\n    \t\tfor (ScoreDoc scoreDoc : scoreDocs) {\r\n    \t\t\tSystem.out.println(searcher.doc(scoreDoc.doc).get(&quot;foo_text&quot;)+&quot;\\t&quot;+searcher.doc(scoreDoc.doc).get(&quot;foo_number&quot;));\r\n    \t\t\t//&#39;def\t2000&#39;\r\n    \t\t}\r\n    \t\t\r\n    \r\n    \t}\r\n    \r\n    }\r\n\r\nThis code successfully updates the initial document with second document...  \r\nbut if I use \r\n&gt;writer.updateDocument(new Term(&quot;foo_number&quot;, 1000), newDoc);  \r\n\r\nIt fails... My requirement is to update documents by uniquely identifying the documents based on the LongPoint field..  \r\nThe documentation (lucene 6.3.0) has only updateDocuments() with Terms as selection criteria and not a LongPoint field.  \r\nIs there any alternative way to achieve this?\r\n\r\n","title":"Lucene - Update documents using LongPoint Field as Term in writer.updateDocuments()","body":"<p>I am trying to update a document in my index using writer.update(Term t, Document doc) method.\nUpdate is successful if I specify a TextField in Term, but fails when I supply a LongPoint in Term\n<br>\nA sample of my code:<br></p>\n\n<pre><code>package com.luceneserver.core;\n\nimport java.io.IOException;\n\nimport org.apache.lucene.document.Document;\nimport org.apache.lucene.document.Field.Store;\nimport org.apache.lucene.document.LongPoint;\nimport org.apache.lucene.document.StoredField;\nimport org.apache.lucene.document.TextField;\nimport org.apache.lucene.index.DirectoryReader;\nimport org.apache.lucene.index.IndexReader;\nimport org.apache.lucene.index.IndexWriter;\nimport org.apache.lucene.index.IndexWriterConfig;\nimport org.apache.lucene.index.Term;\nimport org.apache.lucene.search.IndexSearcher;\nimport org.apache.lucene.search.MatchAllDocsQuery;\nimport org.apache.lucene.search.ScoreDoc;\nimport org.apache.lucene.store.RAMDirectory;\n\npublic class SampleDocUpdates {\n\n    public static void main(String[] args) throws IOException {\n        IndexWriter writer = new IndexWriter(new RAMDirectory(), new IndexWriterConfig());\n        IndexReader reader;\n        IndexSearcher searcher;\n\n\n        // first document in the index\n        Document initialDoc = new Document();\n        // adding a text field\n        initialDoc.add(new TextField(\"foo_text\", \"abc\", Store.YES));\n        // adding a numeric field\n        initialDoc.add(new LongPoint(\"foo_number\", 1000));\n        // adding stored field to display hits\n        initialDoc.add(new StoredField(\"foo_number\", 1000));\n\n\n        writer.addDocument(initialDoc);\n\n\n        // second document in index which should update the first one..\n        Document newDoc = new Document();\n        newDoc.add(new TextField(\"foo_text\", \"def\", Store.YES));\n        newDoc.add(new LongPoint(\"foo_number\", 2000));\n        newDoc.add(new StoredField(\"foo_number\", 2000));\n\n\n        // update doc with foo_text:abc with the newDoc instance.\n        writer.updateDocument(new Term(\"foo_text\", \"abc\"), newDoc);\n\n        reader = DirectoryReader.open(writer);\n        searcher = new IndexSearcher(reader);\n\n        ScoreDoc[] scoreDocs = searcher.search(new MatchAllDocsQuery(), 1000).scoreDocs;\n\n        for (ScoreDoc scoreDoc : scoreDocs) {\n            System.out.println(searcher.doc(scoreDoc.doc).get(\"foo_text\")+\"\\t\"+searcher.doc(scoreDoc.doc).get(\"foo_number\"));\n            //'def  2000'\n        }\n\n\n    }\n\n}\n</code></pre>\n\n<p>This code successfully updates the initial document with second document...<br>\nbut if I use </p>\n\n<blockquote>\n  <p>writer.updateDocument(new Term(\"foo_number\", 1000), newDoc);  </p>\n</blockquote>\n\n<p>It fails... My requirement is to update documents by uniquely identifying the documents based on the LongPoint field..<br>\nThe documentation (lucene 6.3.0) has only updateDocuments() with Terms as selection criteria and not a LongPoint field.<br>\nIs there any alternative way to achieve this?</p>\n"},{"tags":["java","eclipse","executable-jar"],"comments":[{"owner":{"account_id":1126136,"reputation":17393,"user_id":1113392,"display_name":"A4L"},"score":0,"creation_date":1379451430,"post_id":18859617,"comment_id":27829436,"body_markdown":"Why not use normal file I/O? If you don&#39;t want to hard code the location, then you can pass it as jvm parameter with `-D` or just calculate it from your actual location.","body":"Why not use normal file I/O? If you don&#39;t want to hard code the location, then you can pass it as jvm parameter with <code>-D</code> or just calculate it from your actual location."}],"answers":[{"tags":[],"owner":{"account_id":2455089,"reputation":5300,"user_id":2140489,"accept_rate":50,"display_name":"Manas Mukherjee"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1379452202,"creation_date":1379451466,"answer_id":18859757,"question_id":18859617,"body_markdown":"    properties.load(this.getClass().getResourceAsStream(configFileSrc));\r\n\r\nThis should work. \r\n\r\nIn my case, configFileSrc = &quot;/apiconfig/appconfig.properties&quot;\r\n\r\n![enter image description here][1]\r\n\r\nI had to add **staticresources** dir in the build path.\r\n\r\nThanks\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/9o1X9.jpg","title":"How to read a local properties file from an executable jar?","body":"<pre><code>properties.load(this.getClass().getResourceAsStream(configFileSrc));\n</code></pre>\n\n<p>This should work. </p>\n\n<p>In my case, configFileSrc = \"/apiconfig/appconfig.properties\"</p>\n\n<p><img src=\"https://i.stack.imgur.com/9o1X9.jpg\" alt=\"enter image description here\"></p>\n\n<p>I had to add <strong>staticresources</strong> dir in the build path.</p>\n\n<p>Thanks</p>\n"},{"tags":[],"owner":{"display_name":"user2418182"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1379453202,"creation_date":1379453202,"answer_id":18860185,"question_id":18859617,"body_markdown":"Yes. Make sure you specify the path of the config directory relative to the directory where the jar is located. Since you said above that the config directory is a sub directory of the jar location, this will probably just be\r\n\r\n    &lt;configDir&gt;\r\n\r\nwhere `&lt;configDir&gt;` is your configuration directory name.\r\n\r\nYou will also need to use an absolute resource name for the lookup, by adding a slash to the properties file name:\r\n\r\n    props.load(Thread.currentThread().getContextClassLoader().getResourceAsStream(&quot;/myApp.properties&quot;));\r\n\r\nThis is because the relative name your specify will have the package path of the class appended to it, which you don&#39;t want.\r\n\r\nIs there any specific reason you need to use the contextClassLoader? A simpler invocation would be to use the classLoader of the class containing the lookup. And, since the class can delegate to it&#39;s classLoader, you can simply say:\r\n\r\n    props.load(getClass().getResourceAsStream(&quot;/myApp.properties&quot;));\r\n\r\nFinally - have you considered putting the properties file in the jar itself? If it&#39;s not going to change at all, this would be a better option. You wouldn&#39;t need to specify the classPath in that case. Note that if you want, you could put it in a sub-directory *in the jar* , but you would have to change the resource path you looked for, and again use an absolute resource name\r\n\r\nHere is some info on absolute and relative resource names:\r\n\r\n [http://docs.oracle.com/javase/1.5.0/docs/guide/lang/resources.html][1]\r\n\r\nHope this helps!\r\n\r\n  [1]: http://docs.oracle.com/javase/1.5.0/docs/guide/lang/resources.html","title":"How to read a local properties file from an executable jar?","body":"<p>Yes. Make sure you specify the path of the config directory relative to the directory where the jar is located. Since you said above that the config directory is a sub directory of the jar location, this will probably just be</p>\n\n<pre><code>&lt;configDir&gt;\n</code></pre>\n\n<p>where <code>&lt;configDir&gt;</code> is your configuration directory name.</p>\n\n<p>You will also need to use an absolute resource name for the lookup, by adding a slash to the properties file name:</p>\n\n<pre><code>props.load(Thread.currentThread().getContextClassLoader().getResourceAsStream(\"/myApp.properties\"));\n</code></pre>\n\n<p>This is because the relative name your specify will have the package path of the class appended to it, which you don't want.</p>\n\n<p>Is there any specific reason you need to use the contextClassLoader? A simpler invocation would be to use the classLoader of the class containing the lookup. And, since the class can delegate to it's classLoader, you can simply say:</p>\n\n<pre><code>props.load(getClass().getResourceAsStream(\"/myApp.properties\"));\n</code></pre>\n\n<p>Finally - have you considered putting the properties file in the jar itself? If it's not going to change at all, this would be a better option. You wouldn't need to specify the classPath in that case. Note that if you want, you could put it in a sub-directory <em>in the jar</em> , but you would have to change the resource path you looked for, and again use an absolute resource name</p>\n\n<p>Here is some info on absolute and relative resource names:</p>\n\n<p><a href=\"http://docs.oracle.com/javase/1.5.0/docs/guide/lang/resources.html\" rel=\"nofollow\">http://docs.oracle.com/javase/1.5.0/docs/guide/lang/resources.html</a></p>\n\n<p>Hope this helps!</p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1653030322,"creation_date":1653008913,"answer_id":72312558,"question_id":18859617,"body_markdown":"The real problem here is that you need to make up your mind where your application is going to load the properties from *when the application is deployed*.\r\n\r\n(How it works in Eclipse is kind of irrelevant ... unless you expect your users to install Eclipse to run your app!)\r\n\r\n - If you want it to load the properties from the JAR file, they need to be in the JAR file.\r\n\r\n - If you want it to load the properties from the file system, they need to be in the file system.  That means you have two subsidiary issues:\r\n\r\n   1. Where in the file system will your application look?  Bear in mind that this has to work for **all** of the OS platforms you support, and that different OSes have different conventions for where &quot;configuration settings* should be stored.\r\n\r\n   2. Is there a *default* version of the properties file, and how will you install it?\r\n\r\n - If you want to load it from the CLASSPATH and not the JAR file, that means you cannot make your application an *executable JAR*.  (Running as `java -jar ...` will **ignore** all attempts to set an external classpath.)  \r\n\r\n - If you opt for a non-executable JAR file AND loading the properties from the classpath, you have more problems:\r\n\r\n   1. How do you set the classpath?\r\n   2. How do you install the properties file &quot;alongside&quot; the JAR file?\r\n   3. Are there security concerns with a (potentially) user writable directory on the application&#39;s classpath?\r\n\r\n   This is probably the worst option.\r\n\r\n--------------------\r\n\r\nOnce you have decided how (from where) your application needs to load its properties when deployed, the code for implementing your scheme is relatively straightforward.  (Modulo the problems mentioned above.)  \r\n\r\nYou could even combine a couple of options; e.g. look for the properties file in the file system and then fall back to a &quot;default&quot; properties file in the JAR file.  Or you could make the file system location of the properties file a command line option or supply it via an environment variable or via `-D` and the system properties.","title":"How to read a local properties file from an executable jar?","body":"<p>The real problem here is that you need to make up your mind where your application is going to load the properties from <em>when the application is deployed</em>.</p>\n<p>(How it works in Eclipse is kind of irrelevant ... unless you expect your users to install Eclipse to run your app!)</p>\n<ul>\n<li><p>If you want it to load the properties from the JAR file, they need to be in the JAR file.</p>\n</li>\n<li><p>If you want it to load the properties from the file system, they need to be in the file system.  That means you have two subsidiary issues:</p>\n<ol>\n<li><p>Where in the file system will your application look?  Bear in mind that this has to work for <strong>all</strong> of the OS platforms you support, and that different OSes have different conventions for where &quot;configuration settings* should be stored.</p>\n</li>\n<li><p>Is there a <em>default</em> version of the properties file, and how will you install it?</p>\n</li>\n</ol>\n</li>\n<li><p>If you want to load it from the CLASSPATH and not the JAR file, that means you cannot make your application an <em>executable JAR</em>.  (Running as <code>java -jar ...</code> will <strong>ignore</strong> all attempts to set an external classpath.)</p>\n</li>\n<li><p>If you opt for a non-executable JAR file AND loading the properties from the classpath, you have more problems:</p>\n<ol>\n<li>How do you set the classpath?</li>\n<li>How do you install the properties file &quot;alongside&quot; the JAR file?</li>\n<li>Are there security concerns with a (potentially) user writable directory on the application's classpath?</li>\n</ol>\n<p>This is probably the worst option.</p>\n</li>\n</ul>\n<hr />\n<p>Once you have decided how (from where) your application needs to load its properties when deployed, the code for implementing your scheme is relatively straightforward.  (Modulo the problems mentioned above.)</p>\n<p>You could even combine a couple of options; e.g. look for the properties file in the file system and then fall back to a &quot;default&quot; properties file in the JAR file.  Or you could make the file system location of the properties file a command line option or supply it via an environment variable or via <code>-D</code> and the system properties.</p>\n"}],"owner":{"account_id":533072,"reputation":2976,"user_id":903724,"accept_rate":55,"display_name":"user903724"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":7836,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1687345405,"creation_date":1379450924,"question_id":18859617,"body_markdown":"I developed and tested my program on Eclipse Indigo.  No problem finding the properties file when run.\r\nI created a runnable jar using Eclipse export.\r\nThe program cannot find the properties file when the program is run from the jar.\r\nThe properties file is not in the jar, it is in a subdirectory of the directory where the jar is deployed.\r\nAs noted above, this directory is on the classpath in the Eclipse run configuration.\r\n\r\n    \r\n\r\n&gt; C:/myApp/myApp.jar  C:/myApp/properties/myApp.properties\r\n\r\n    props.load(Thread.currentThread().getContextClassLoader().getResourceAsStream(&quot;myApp.properties&quot;));\r\n\r\nDo I just need to edit the Jar manifest to put the config directory on the classpath?","title":"How to read a local properties file from an executable jar?","body":"<p>I developed and tested my program on Eclipse Indigo.  No problem finding the properties file when run.\nI created a runnable jar using Eclipse export.\nThe program cannot find the properties file when the program is run from the jar.\nThe properties file is not in the jar, it is in a subdirectory of the directory where the jar is deployed.\nAs noted above, this directory is on the classpath in the Eclipse run configuration.</p>\n\n<blockquote>\n  <p>C:/myApp/myApp.jar  C:/myApp/properties/myApp.properties</p>\n</blockquote>\n\n<pre><code>props.load(Thread.currentThread().getContextClassLoader().getResourceAsStream(\"myApp.properties\"));\n</code></pre>\n\n<p>Do I just need to edit the Jar manifest to put the config directory on the classpath?</p>\n"},{"tags":["java","spring","database","spring-boot","repository"],"comments":[{"owner":{"account_id":23735746,"reputation":23,"user_id":17754455,"display_name":"Muhammadsaied"},"score":0,"creation_date":1687344646,"post_id":76522452,"comment_id":134922776,"body_markdown":"please Like it and give me answer for this.if i made mistake please correct it","body":"please Like it and give me answer for this.if i made mistake please correct it"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1687345004,"post_id":76522452,"comment_id":134922848,"body_markdown":"You want a datasource but disabled the auto configuration. Remove the exclude from `@SpringBootApplication`. Place your `@SpringBootApplication` annotated class in the `paymentgateway` package and remove the `@ComponentScan`. The `@Repository` is useless on Spring Data repository interfaces and you don&#39;t need `@EnableTransactionManagement` as that is automatic. Finally don&#39;t use `@Data` fo entities as that generates a wrong toString/equals/hashCode for JPA (and lead to some surprising side effects).","body":"You want a datasource but disabled the auto configuration. Remove the exclude from <code>@SpringBootApplication</code>. Place your <code>@SpringBootApplication</code> annotated class in the <code>paymentgateway</code> package and remove the <code>@ComponentScan</code>. The <code>@Repository</code> is useless on Spring Data repository interfaces and you don&#39;t need <code>@EnableTransactionManagement</code> as that is automatic. Finally don&#39;t use <code>@Data</code> fo entities as that generates a wrong toString/equals/hashCode for JPA (and lead to some surprising side effects)."}],"answers":[{"tags":[],"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687345332,"creation_date":1687345332,"answer_id":76522572,"question_id":76522452,"body_markdown":"A couple of things, but the main problem being excluding the `DataSourceAutoConfiguration.class` in your setup. Remove that exclude as you need a datasource. No `DataSource` no JPA, no Spring Data JPA repositories. \r\n\r\nAnother thing is to remove the `@ComponentScan` and place your `@SpringBootApplication` annotated class in the top-level `paymentgateway` package. That way it will automatically discover the repositories, services etc. etc. instead of you having to add more and more annotations to make it work. \r\n\r\nSpring Boot automatically enables transactions so you don&#39;t need `@EnableTransactionManagement`. Yours is disabled due to the first issue as there is nothing that needs to be transactions (no datasource, no JPA etc.)\r\n\r\nSpring Data repositories don&#39;t need an `@Repository` annotation as they are discovered through different means. So they only add clutter/overhead to your code, so remove them. \r\n\r\nDon&#39;t use `@Data` for your `@Entities` it generates wrong `toString`, `equals` and `hashCode` methods for JPA. Not to mention that it can lead to surprising side effects like an 1+N select problem due to this. See https://deinum.biz/2019-02-13-Lombok-Data-Ojects-Arent-Entities/ for more info. The short answer is define your own `equals`/`hashcode` and use `@Getter`/`@Setter`. ","title":"Getting error when i am using @trasactional with service methodand Also I Have problem to use @EnableTransactionManagement","body":"<p>A couple of things, but the main problem being excluding the <code>DataSourceAutoConfiguration.class</code> in your setup. Remove that exclude as you need a datasource. No <code>DataSource</code> no JPA, no Spring Data JPA repositories.</p>\n<p>Another thing is to remove the <code>@ComponentScan</code> and place your <code>@SpringBootApplication</code> annotated class in the top-level <code>paymentgateway</code> package. That way it will automatically discover the repositories, services etc. etc. instead of you having to add more and more annotations to make it work.</p>\n<p>Spring Boot automatically enables transactions so you don't need <code>@EnableTransactionManagement</code>. Yours is disabled due to the first issue as there is nothing that needs to be transactions (no datasource, no JPA etc.)</p>\n<p>Spring Data repositories don't need an <code>@Repository</code> annotation as they are discovered through different means. So they only add clutter/overhead to your code, so remove them.</p>\n<p>Don't use <code>@Data</code> for your <code>@Entities</code> it generates wrong <code>toString</code>, <code>equals</code> and <code>hashCode</code> methods for JPA. Not to mention that it can lead to surprising side effects like an 1+N select problem due to this. See <a href=\"https://deinum.biz/2019-02-13-Lombok-Data-Ojects-Arent-Entities/\" rel=\"nofollow noreferrer\">https://deinum.biz/2019-02-13-Lombok-Data-Ojects-Arent-Entities/</a> for more info. The short answer is define your own <code>equals</code>/<code>hashcode</code> and use <code>@Getter</code>/<code>@Setter</code>.</p>\n"}],"owner":{"account_id":23735746,"reputation":23,"user_id":17754455,"display_name":"Muhammadsaied"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1687345332,"creation_date":1687344607,"question_id":76522452,"body_markdown":"Field passengerInfoRepository in paymentgateway.service.FlightBookingService required a bean of type &#39;paymentgateway.repository.PassengerInfoRepository&#39; that could not be found.\r\nThe injection point has the following annotations:\r\n\t- @org.springframework.beans.factory.annotation.Autowired(required=true)\r\n\r\n\r\nAction:\r\n\r\nConsider defining a bean of type &#39;paymentgateway.repository.PassengerInfoRepository&#39; in your configuration.\r\n\r\n\r\n\r\nController Class\r\n```\r\n@SpringBootApplication(exclude={DataSourceAutoConfiguration.class})\r\n@RestController\r\n@EnableTransactionManagement\r\n@ComponentScan(basePackages = {&quot;paymentgateway.repository, paymentgateway.service&quot;})\r\npublic class PaymentgatewayApplication {\r\n\tprivate static final Logger logger = LogManager.getLogger(PaymentgatewayApplication.class);\r\n\r\n\t@Autowired//declared whether dependency \r\n\tprivate FlightBookingService flightBookingService;\r\n\t\r\n\t@PostMapping(&quot;/bookFlightTicket&quot;)\r\n\tpublic FlightBookingAcknowledgement bookFlightTicket(@RequestBody FlightBookingRequest flightBookingRequest) {\r\n\t\tlogger.trace(&quot;Flightbooking in service: {} &quot;, flightBookingService.bookFlightTicket(flightBookingRequest));\r\n\t\treturn flightBookingService.bookFlightTicket(flightBookingRequest);\r\n\t}\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(PaymentgatewayApplication.class, args);\r\n\t}\r\n\r\n}\r\n```\r\nService class \r\n```\r\n@Service\r\npublic class FlightBookingService {\r\n\t\r\n\t@Autowired\r\n\tprivate PassengerInfoRepository passengerInfoRepository;\r\n\t\r\n\t@Autowired\r\n\tprivate PaymentInfoRepository paymentInfoRepository;\r\n\t\r\n\t@Transactional//(readOnly = false , isolation = Isolation.READ_COMMITTED,propagation = Propagation.REQUIRED)\r\n\tpublic FlightBookingAcknowledgement bookFlightTicket(FlightBookingRequest flightBookingRequest) {\r\n\t\t\r\n\t\t\r\n\t\tPassengerInfo passengerInfo =  flightBookingRequest.getPassengerInfo();\r\n\t\t\r\n\t\t passengerInfo = passengerInfoRepository.save(passengerInfo);\r\n\t\t\r\n\t\tPaymentInfo paymentInfo = flightBookingRequest.getPaymentInfo();\r\n\t\t\r\n\t\tPaymentUtils.validateCreditLimit(paymentInfo.getAccountNo(), passengerInfo.getFare());\r\n\t\t\r\n\t\tpaymentInfo.setAmount(passengerInfo.getFare());\r\n\t\tpaymentInfo.setPassengerId(passengerInfo.getPId());\r\n\t\tpaymentInfoRepository.save(paymentInfo);\r\n\t\t\r\n\t\treturn new FlightBookingAcknowledgement(&quot;success&quot;, passengerInfo.getFare(),UUID.randomUUID().toString().split(&quot;-&quot;)[0],passengerInfo);\r\n\t\t\r\n\t}\r\n\r\n}\r\n```\r\nTwo Repository \r\n\r\n```\r\n\r\n@Repository\r\npublic interface PassengerInfoRepository extends JpaRepository&lt;PassengerInfo, Long&gt; {\r\n\r\n}\r\n\r\n\r\n@Repository\r\npublic interface PaymentInfoRepository extends JpaRepository&lt;PaymentInfo, String&gt;{\r\n\r\n}\r\n```\r\nappliction.properties.\r\n\r\n```\r\nserver.port = 8081\r\n\r\n```\r\nconfiguartio.properties\r\n```\r\nspring.datasource.url=jdbc:mysql://${MYSQL_HOST:localhost}:3306/GT\r\nspring.datasource.username=said\r\nspring.datasource.password=said  \r\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\r\nspring.jpa.database-platform = org.hibernate.dialect.MySQL8Dialect\r\nspring.jpa.generate-ddl=true\r\nspring.jpa.hibernate.ddl-auto = update\r\nspring.jpa.show-sql: true\r\n```\r\nentity:\r\n```\r\n\r\n@Data\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Entity\r\n@Table(name = &quot;PASSENGER_INFO&quot;)\r\npublic class PassengerInfo {\r\n\r\n\t@Id\r\n\t@GeneratedValue\t\r\n\tprivate Long pId;\r\n\tprivate String name; \r\n\tprivate String email;\r\n\tprivate String source;\r\n\tprivate String destination;\r\n\t\r\n\t@JsonFormat(shape = JsonFormat.Shape.STRING, pattern = &quot;dd-MM-yyyy&quot;)\r\n\tprivate Date travelDate;\r\n\tprivate String pickupTime;\r\n\tprivate String arrivalTime;\r\n\tprivate double fare;\r\n}\r\n```\r\n\r\n```\r\n\r\n@Data\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Entity\r\n@Table(name = &quot;PAYMENT_INFO&quot;)\r\npublic class PaymentInfo {\r\n\r\n\t@Id\r\n\t@GeneratedValue(generator = &quot;uuid2&quot;)\r\n\t@GenericGenerator(name = &quot;uuid2&quot; , strategy = &quot;org.hibernate.id.UUIDGenerator&quot;)\r\n\tprivate String paymentId;\r\n\tprivate String accountNo;\r\n\tprivate double amount ;\r\n\tprivate String cardType;\r\n\tprivate Long passengerId;\r\n}\r\n```","title":"Getting error when i am using @trasactional with service methodand Also I Have problem to use @EnableTransactionManagement","body":"<p>Field passengerInfoRepository in paymentgateway.service.FlightBookingService required a bean of type 'paymentgateway.repository.PassengerInfoRepository' that could not be found.\nThe injection point has the following annotations:\n- @org.springframework.beans.factory.annotation.Autowired(required=true)</p>\n<p>Action:</p>\n<p>Consider defining a bean of type 'paymentgateway.repository.PassengerInfoRepository' in your configuration.</p>\n<p>Controller Class</p>\n<pre><code>@SpringBootApplication(exclude={DataSourceAutoConfiguration.class})\n@RestController\n@EnableTransactionManagement\n@ComponentScan(basePackages = {&quot;paymentgateway.repository, paymentgateway.service&quot;})\npublic class PaymentgatewayApplication {\n    private static final Logger logger = LogManager.getLogger(PaymentgatewayApplication.class);\n\n    @Autowired//declared whether dependency \n    private FlightBookingService flightBookingService;\n    \n    @PostMapping(&quot;/bookFlightTicket&quot;)\n    public FlightBookingAcknowledgement bookFlightTicket(@RequestBody FlightBookingRequest flightBookingRequest) {\n        logger.trace(&quot;Flightbooking in service: {} &quot;, flightBookingService.bookFlightTicket(flightBookingRequest));\n        return flightBookingService.bookFlightTicket(flightBookingRequest);\n    }\n    public static void main(String[] args) {\n        SpringApplication.run(PaymentgatewayApplication.class, args);\n    }\n\n}\n</code></pre>\n<p>Service class</p>\n<pre><code>@Service\npublic class FlightBookingService {\n    \n    @Autowired\n    private PassengerInfoRepository passengerInfoRepository;\n    \n    @Autowired\n    private PaymentInfoRepository paymentInfoRepository;\n    \n    @Transactional//(readOnly = false , isolation = Isolation.READ_COMMITTED,propagation = Propagation.REQUIRED)\n    public FlightBookingAcknowledgement bookFlightTicket(FlightBookingRequest flightBookingRequest) {\n        \n        \n        PassengerInfo passengerInfo =  flightBookingRequest.getPassengerInfo();\n        \n         passengerInfo = passengerInfoRepository.save(passengerInfo);\n        \n        PaymentInfo paymentInfo = flightBookingRequest.getPaymentInfo();\n        \n        PaymentUtils.validateCreditLimit(paymentInfo.getAccountNo(), passengerInfo.getFare());\n        \n        paymentInfo.setAmount(passengerInfo.getFare());\n        paymentInfo.setPassengerId(passengerInfo.getPId());\n        paymentInfoRepository.save(paymentInfo);\n        \n        return new FlightBookingAcknowledgement(&quot;success&quot;, passengerInfo.getFare(),UUID.randomUUID().toString().split(&quot;-&quot;)[0],passengerInfo);\n        \n    }\n\n}\n</code></pre>\n<p>Two Repository</p>\n<pre><code>\n@Repository\npublic interface PassengerInfoRepository extends JpaRepository&lt;PassengerInfo, Long&gt; {\n\n}\n\n\n@Repository\npublic interface PaymentInfoRepository extends JpaRepository&lt;PaymentInfo, String&gt;{\n\n}\n</code></pre>\n<p>appliction.properties.</p>\n<pre><code>server.port = 8081\n\n</code></pre>\n<p>configuartio.properties</p>\n<pre><code>spring.datasource.url=jdbc:mysql://${MYSQL_HOST:localhost}:3306/GT\nspring.datasource.username=said\nspring.datasource.password=said  \nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\nspring.jpa.database-platform = org.hibernate.dialect.MySQL8Dialect\nspring.jpa.generate-ddl=true\nspring.jpa.hibernate.ddl-auto = update\nspring.jpa.show-sql: true\n</code></pre>\n<p>entity:</p>\n<pre><code>\n@Data\n@AllArgsConstructor\n@NoArgsConstructor\n@Entity\n@Table(name = &quot;PASSENGER_INFO&quot;)\npublic class PassengerInfo {\n\n    @Id\n    @GeneratedValue \n    private Long pId;\n    private String name; \n    private String email;\n    private String source;\n    private String destination;\n    \n    @JsonFormat(shape = JsonFormat.Shape.STRING, pattern = &quot;dd-MM-yyyy&quot;)\n    private Date travelDate;\n    private String pickupTime;\n    private String arrivalTime;\n    private double fare;\n}\n</code></pre>\n<pre><code>\n@Data\n@AllArgsConstructor\n@NoArgsConstructor\n@Entity\n@Table(name = &quot;PAYMENT_INFO&quot;)\npublic class PaymentInfo {\n\n    @Id\n    @GeneratedValue(generator = &quot;uuid2&quot;)\n    @GenericGenerator(name = &quot;uuid2&quot; , strategy = &quot;org.hibernate.id.UUIDGenerator&quot;)\n    private String paymentId;\n    private String accountNo;\n    private double amount ;\n    private String cardType;\n    private Long passengerId;\n}\n</code></pre>\n"},{"tags":["java","kotlin","validation"],"comments":[{"owner":{"account_id":13774089,"reputation":2593,"user_id":9940820,"display_name":"AlexT"},"score":1,"creation_date":1687251862,"post_id":76512670,"comment_id":134906823,"body_markdown":"This answer in this question maybe is not valid to your question, but the general discussion might be beneficial as it is on the same subject: [How to test for equality of complex object graphs?](https://stackoverflow.com/questions/1411612/how-to-test-for-equality-of-complex-object-graphs).","body":"This answer in this question maybe is not valid to your question, but the general discussion might be beneficial as it is on the same subject: <a href=\"https://stackoverflow.com/questions/1411612/how-to-test-for-equality-of-complex-object-graphs\">How to test for equality of complex object graphs?</a>."},{"owner":{"account_id":1111280,"reputation":6531,"user_id":1101692,"accept_rate":89,"display_name":"Shark"},"score":0,"creation_date":1687259851,"post_id":76512670,"comment_id":134908633,"body_markdown":"@AlexT this just uses reflection to check the contents of the fields, but does nothing about logging them. The OP is using asserts mainly for just logging the data and discarding the AssertionErrors.\n\nso OP, try to look into AssertJ&#39;s source to see how they&#39;re printing it, and copypaste that code :)","body":"@AlexT this just uses reflection to check the contents of the fields, but does nothing about logging them. The OP is using asserts mainly for just logging the data and discarding the AssertionErrors.  so OP, try to look into AssertJ&#39;s source to see how they&#39;re printing it, and copypaste that code :)"},{"owner":{"account_id":2981345,"reputation":884,"user_id":2531232,"accept_rate":75,"display_name":"evanjdooner"},"score":0,"creation_date":1687260711,"post_id":76512670,"comment_id":134908830,"body_markdown":"An interesting point from @AlexT&#39;s link is that Hamcrest does actually support using matchers for validation without throwing errors, including the readable comparison. I might look into that option.","body":"An interesting point from @AlexT&#39;s link is that Hamcrest does actually support using matchers for validation without throwing errors, including the readable comparison. I might look into that option."},{"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"score":2,"creation_date":1687265456,"post_id":76512670,"comment_id":134909919,"body_markdown":"FYI, rule 3: https://stackoverflow.com/help/on-topic","body":"FYI, rule 3: <a href=\"https://stackoverflow.com/help/on-topic\">stackoverflow.com/help/on-topic</a>"},{"owner":{"account_id":2981345,"reputation":884,"user_id":2531232,"accept_rate":75,"display_name":"evanjdooner"},"score":0,"creation_date":1687335446,"post_id":76512670,"comment_id":134920806,"body_markdown":"Thanks, @Tenfour04 I&#39;ll reword the question.","body":"Thanks, @Tenfour04 I&#39;ll reword the question."}],"answers":[{"tags":[],"owner":{"account_id":15831863,"reputation":36,"user_id":13157139,"display_name":"Mukhtar Amirkhanov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687345245,"creation_date":1687345245,"answer_id":76522557,"question_id":76512670,"body_markdown":"You can call the isEqualToIgnoringGivenFields method inside the Objects class, which is inside the AssertJ library. Since the method is private, it will need to be called using reflection. Example:\r\n\r\nComparator.java\r\n\r\n    package objectComparator;\r\n    \r\n    import org.assertj.core.error.ErrorMessageFactory;\r\n    import org.assertj.core.error.ShouldBeEqualToIgnoringFields;\r\n    import org.assertj.core.internal.Objects;\r\n    import org.assertj.core.internal.TypeComparators;\r\n    \r\n    import java.lang.reflect.Field;\r\n    import java.lang.reflect.InvocationTargetException;\r\n    import java.lang.reflect.Method;\r\n    import java.util.*;\r\n    \r\n    public class Comparator {\r\n        public static String compare(Object actual, Object other) {\r\n            try {\r\n                Objects objects = Objects.instance();\r\n                // Получаем класс объекта Objects\r\n                Class&lt;?&gt; clazz = objects.getClass();\r\n                // Получаем приватный метод по имени\r\n                Method privateMethod = clazz\r\n                        .getDeclaredMethod(&quot;isEqualToIgnoringGivenFields&quot;, Object.class, Object.class, Map.class, TypeComparators.class, String[].class);\r\n                // Разрешаем доступ к приватному методу\r\n                privateMethod.setAccessible(true);\r\n                // Вызываем приватный метод с передачей аргументов\r\n                Objects.ByFieldsComparison comparison = (Objects.ByFieldsComparison) privateMethod.invoke(objects, actual, other, new HashMap&lt;String, java.util.Comparator&lt;?&gt;&gt;(), new TypeComparators(), new String[0]);\r\n    \r\n                ErrorMessageFactory error = ShouldBeEqualToIgnoringFields.shouldBeEqualToIgnoringGivenFields(actual,\r\n                        (List&lt;String&gt;) getComparisonField(comparison, &quot;fieldsNames&quot;),\r\n                        (List&lt;Object&gt;) getComparisonField(comparison, &quot;expectedValues&quot;),\r\n                        (List&lt;Object&gt;) getComparisonField(comparison, &quot;rejectedValues&quot;),\r\n                        Collections.emptyList());\r\n    \r\n                return error.create();\r\n            } catch (IllegalAccessException | InvocationTargetException | NoSuchMethodException e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n        }\r\n    \r\n        private static List&lt;?&gt; getComparisonField(Objects.ByFieldsComparison comparison, String fieldName) {\r\n            try {\r\n                // Получаем класс объекта ByFieldsComparison\r\n                Class&lt;?&gt; clazz = comparison.getClass();\r\n                // Получаем приватное поле по имени\r\n                Field privateField = clazz.getDeclaredField(fieldName);\r\n                // Разрешаем доступ к приватному полю\r\n                privateField.setAccessible(true);\r\n                // Получаем значение приватного поля\r\n                return (List&lt;?&gt;) privateField.get(comparison);\r\n            } catch (NoSuchFieldException | IllegalAccessException e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n        }\r\n    }\r\n\r\nCalling the ShouldBeEqualToIgnoringFields.shouldBeEqualToIgnoringGivenFields method is optional. You can remove the call to this method. And parse the result as you need.\r\n\r\nMain.java\r\n\r\n    package objectComparator;\r\n        \r\n    public class Main {\r\n        public static void main(String args[]) {\r\n            Person bart = new Person(5, &quot;Bart&quot;);\r\n            Person liza = new Person(4, &quot;Liza&quot;);\r\n    \r\n            System.out.println(Comparator.compare(bart, liza));\r\n        }\r\n    }\r\n\r\nPerson.java (Sample POJO class)\r\n\r\n    package objectComparator;\r\n    \r\n    public class Person {\r\n        private int age;\r\n        private String name;\r\n    \r\n        public Person(int age, String name) {\r\n            this.age = age;\r\n            this.name = name;\r\n        }\r\n    \r\n        public int getAge() {\r\n            return age;\r\n        }\r\n    \r\n        public String getName() {\r\n            return name;\r\n        }\r\n    }\r\n\r\n","title":"How to get a readable output of the difference between two objects - like AssertJ, but without throwing an AssertionError?","body":"<p>You can call the isEqualToIgnoringGivenFields method inside the Objects class, which is inside the AssertJ library. Since the method is private, it will need to be called using reflection. Example:</p>\n<p>Comparator.java</p>\n<pre><code>package objectComparator;\n\nimport org.assertj.core.error.ErrorMessageFactory;\nimport org.assertj.core.error.ShouldBeEqualToIgnoringFields;\nimport org.assertj.core.internal.Objects;\nimport org.assertj.core.internal.TypeComparators;\n\nimport java.lang.reflect.Field;\nimport java.lang.reflect.InvocationTargetException;\nimport java.lang.reflect.Method;\nimport java.util.*;\n\npublic class Comparator {\n    public static String compare(Object actual, Object other) {\n        try {\n            Objects objects = Objects.instance();\n            // Получаем класс объекта Objects\n            Class&lt;?&gt; clazz = objects.getClass();\n            // Получаем приватный метод по имени\n            Method privateMethod = clazz\n                    .getDeclaredMethod(&quot;isEqualToIgnoringGivenFields&quot;, Object.class, Object.class, Map.class, TypeComparators.class, String[].class);\n            // Разрешаем доступ к приватному методу\n            privateMethod.setAccessible(true);\n            // Вызываем приватный метод с передачей аргументов\n            Objects.ByFieldsComparison comparison = (Objects.ByFieldsComparison) privateMethod.invoke(objects, actual, other, new HashMap&lt;String, java.util.Comparator&lt;?&gt;&gt;(), new TypeComparators(), new String[0]);\n\n            ErrorMessageFactory error = ShouldBeEqualToIgnoringFields.shouldBeEqualToIgnoringGivenFields(actual,\n                    (List&lt;String&gt;) getComparisonField(comparison, &quot;fieldsNames&quot;),\n                    (List&lt;Object&gt;) getComparisonField(comparison, &quot;expectedValues&quot;),\n                    (List&lt;Object&gt;) getComparisonField(comparison, &quot;rejectedValues&quot;),\n                    Collections.emptyList());\n\n            return error.create();\n        } catch (IllegalAccessException | InvocationTargetException | NoSuchMethodException e) {\n            throw new RuntimeException(e);\n        }\n    }\n\n    private static List&lt;?&gt; getComparisonField(Objects.ByFieldsComparison comparison, String fieldName) {\n        try {\n            // Получаем класс объекта ByFieldsComparison\n            Class&lt;?&gt; clazz = comparison.getClass();\n            // Получаем приватное поле по имени\n            Field privateField = clazz.getDeclaredField(fieldName);\n            // Разрешаем доступ к приватному полю\n            privateField.setAccessible(true);\n            // Получаем значение приватного поля\n            return (List&lt;?&gt;) privateField.get(comparison);\n        } catch (NoSuchFieldException | IllegalAccessException e) {\n            throw new RuntimeException(e);\n        }\n    }\n}\n</code></pre>\n<p>Calling the ShouldBeEqualToIgnoringFields.shouldBeEqualToIgnoringGivenFields method is optional. You can remove the call to this method. And parse the result as you need.</p>\n<p>Main.java</p>\n<pre><code>package objectComparator;\n    \npublic class Main {\n    public static void main(String args[]) {\n        Person bart = new Person(5, &quot;Bart&quot;);\n        Person liza = new Person(4, &quot;Liza&quot;);\n\n        System.out.println(Comparator.compare(bart, liza));\n    }\n}\n</code></pre>\n<p>Person.java (Sample POJO class)</p>\n<pre><code>package objectComparator;\n\npublic class Person {\n    private int age;\n    private String name;\n\n    public Person(int age, String name) {\n        this.age = age;\n        this.name = name;\n    }\n\n    public int getAge() {\n        return age;\n    }\n\n    public String getName() {\n        return name;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":2981345,"reputation":884,"user_id":2531232,"accept_rate":75,"display_name":"evanjdooner"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":139,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"answer_count":1,"score":2,"last_activity_date":1687345245,"creation_date":1687249000,"question_id":76512670,"body_markdown":"My company is currently using AssertJ matchers for production validation, because it prints a readable diff of the two values compared. However, this means we have a lot of try/immediate catch blocks around just for this validation, where we discard the stack trace because we just want to log the diff.\r\n\r\nIs there a way to fluently compare two values and get a readable output without throwing an Error? If there&#39;s a good way using the standard library, that would be great. But I&#39;m happy to consider any suggestions.\r\n\r\nFor reference, AssertJ is called like this:\r\n\r\n\r\n```\r\nAssertions.assertThat(valueB)\r\n    .usingComparatorForType(BigInteger::compareTo, BigInteger::class.java)\r\n    .isEqualToComparingFieldByField(valueA)\r\n```\r\n\r\n\r\nand outputs something like this:\r\n\r\n\r\n```\r\nError during validation between value A and value B: \r\nExpecting values:\r\n  &lt;[1, 2, 3, 4, 5]&gt;\r\nin fields:\r\n  &lt;[&quot;field1&quot;,\r\n    &quot;field2&quot;,\r\n    &quot;field3&quot;,\r\n    &quot;field4&quot;,\r\n    &quot;field5&quot;]&gt;\r\nbut were:\r\n  &lt;[5, 6, 7, 8, 9]&gt;\r\nin &lt;ValueA(field1=5, field2=6, field3=7, field4=8, field5=9)&gt;.\r\nComparison was performed on all fields\r\n```","title":"How to get a readable output of the difference between two objects - like AssertJ, but without throwing an AssertionError?","body":"<p>My company is currently using AssertJ matchers for production validation, because it prints a readable diff of the two values compared. However, this means we have a lot of try/immediate catch blocks around just for this validation, where we discard the stack trace because we just want to log the diff.</p>\n<p>Is there a way to fluently compare two values and get a readable output without throwing an Error? If there's a good way using the standard library, that would be great. But I'm happy to consider any suggestions.</p>\n<p>For reference, AssertJ is called like this:</p>\n<pre><code>Assertions.assertThat(valueB)\n    .usingComparatorForType(BigInteger::compareTo, BigInteger::class.java)\n    .isEqualToComparingFieldByField(valueA)\n</code></pre>\n<p>and outputs something like this:</p>\n<pre><code>Error during validation between value A and value B: \nExpecting values:\n  &lt;[1, 2, 3, 4, 5]&gt;\nin fields:\n  &lt;[&quot;field1&quot;,\n    &quot;field2&quot;,\n    &quot;field3&quot;,\n    &quot;field4&quot;,\n    &quot;field5&quot;]&gt;\nbut were:\n  &lt;[5, 6, 7, 8, 9]&gt;\nin &lt;ValueA(field1=5, field2=6, field3=7, field4=8, field5=9)&gt;.\nComparison was performed on all fields\n</code></pre>\n"},{"tags":["java","microsoft-graph-api","microsoft-teams","microsoft-graph-sdks","microsoft-graph-teams"],"answers":[{"tags":[],"owner":{"account_id":11752811,"reputation":10047,"user_id":8601372,"display_name":"Hilton Giesenow"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1687345203,"creation_date":1687345203,"answer_id":76522547,"question_id":76516803,"body_markdown":"Per [this](https://learn.microsoft.com/en-us/graph/api/chatmessage-post?view=graph-rest-1.0&amp;tabs=http) doc, you can use either &#39;delegated&#39; permissions, in which case the message be sent &quot;on behalf of&quot; a specific user, or &#39;Application&#39; permission to have it appear to come from &#39;an app&#39;. However, the doc also says:\r\n\r\n&gt; Note: Application permissions are only supported for migration. In the future, Microsoft may require you or your customers to pay additional fees based on the amount of data imported.\r\n\r\nSo there are better ways to consider for doing this. The easiest alternative is a [webhook](https://learn.microsoft.com/en-us/microsoftteams/platform/webhooks-and-connectors/how-to/add-incoming-webhook?tabs=dotnet).","title":"How to send messages to MS Teams using Java SDK","body":"<p>Per <a href=\"https://learn.microsoft.com/en-us/graph/api/chatmessage-post?view=graph-rest-1.0&amp;tabs=http\" rel=\"nofollow noreferrer\">this</a> doc, you can use either 'delegated' permissions, in which case the message be sent &quot;on behalf of&quot; a specific user, or 'Application' permission to have it appear to come from 'an app'. However, the doc also says:</p>\n<blockquote>\n<p>Note: Application permissions are only supported for migration. In the future, Microsoft may require you or your customers to pay additional fees based on the amount of data imported.</p>\n</blockquote>\n<p>So there are better ways to consider for doing this. The easiest alternative is a <a href=\"https://learn.microsoft.com/en-us/microsoftteams/platform/webhooks-and-connectors/how-to/add-incoming-webhook?tabs=dotnet\" rel=\"nofollow noreferrer\">webhook</a>.</p>\n"}],"owner":{"account_id":2679463,"reputation":2502,"user_id":2315104,"accept_rate":42,"display_name":"user2315104"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":114,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1687345203,"creation_date":1687279302,"question_id":76516803,"body_markdown":"We are trying to send messages using MS graph to MS teams. The SDK used is based on Java\r\n\r\n**environment details :** \r\n\r\nJava version : openjdk 17\r\n\r\nmicrosoft-graph : 5.60.0\r\n\r\nazure-identity : 1.9.1\r\n\r\nthe docs followed are : (using client secret)\r\n\r\nhttps://learn.microsoft.com/en-us/graph/sdks/choose-authentication-providers?tabs=java#usernamepassword-provider\r\nhttps://learn.microsoft.com/en-us/graph/sdks/sdk-installation#install-the-microsoft-graph-java-sdk\r\n\r\nwe have set the proper permission in the azure active directory app registration (API permission ) ( delegated and application both)\r\n\r\nhere is the Java code written \r\n\r\n\t\r\n\r\n\tfinal String clientId = &quot;3cb5543544444444a9eb&quot;;\r\n\tfinal String tenantId = &quot;5435435-235435435435&quot;; // or &quot;common&quot; for multi-tenant apps\r\n\r\n\tfinal String clientSecret = &quot;rewewrewiewrerewrewrz&quot;;\r\n\r\n\tfinal List&lt;String&gt; scopes = Arrays.asList(&quot;https://graph.microsoft.com/.default&quot;);\r\n\r\n\tfinal ClientSecretCredential credential = new ClientSecretCredentialBuilder()\r\n\t    .clientId(clientId).tenantId(tenantId).clientSecret(clientSecret).build();\r\n\r\n\tif (null == scopes || null == credential) {\r\n\t    throw new Exception(&quot;Unexpected error&quot;);\r\n\t}\r\n\tfinal TokenCredentialAuthProvider authProvider = new TokenCredentialAuthProvider(\r\n\t    scopes, credential);\r\n\r\n\tfinal GraphServiceClient&lt;okhttp3.Request&gt; graphClient = GraphServiceClient.builder()\r\n\t    .authenticationProvider(authProvider).buildClient();\r\n\t\r\n\tChatMessage chatMessage = new ChatMessage();\r\n\tItemBody body = new ItemBody();\r\n\tbody.content = &quot;Hello World&quot;;\r\n\tchatMessage.body = body;\r\n\r\n\tgraphClient.teams(&quot;4w45234324324fgf4d22-b5e4-94d0&quot;).channels(&quot;19%0thredfafdafdsfdstajhhgjhg4524554354354cv2&quot;).messages()\r\n\t\t.buildRequest()\r\n\t\t.post(chatMessage);\r\n\r\n\r\nhowever, getting below error : \r\n\r\n    20:30:48.715 [ForkJoinPool.commonPool-worker-1] INFO\r\n    com.azure.identity.ClientSecretCredential -- Azure Identity =&gt;\r\n    getToken() result for scopes [https://graph.microsoft.com/.default]:\r\n    SUCCESS Jun 20, 2023 8:30:49 PM\r\n    com.microsoft.graph.logger.DefaultLogger logError SEVERE:\r\n    CoreHttpProvider[sendRequestInternal] - 408Graph service exception Jun\r\n    20, 2023 8:30:49 PM com.microsoft.graph.logger.DefaultLogger logError\r\n    SEVERE: Throwable detail:\r\n    com.microsoft.graph.http.GraphServiceException: Error code:\r\n    Unauthorized Error message: Message POST is allowed in\r\n    application-only context only for import purposes. Refer to\r\n    https://docs.microsoft.com/microsoftteams/platform/graph-api/import-messages/import-external-messages-to-teams\r\n    for more details.\r\n\r\n    POST\r\n    https://graph.microsoft.com/v1.0/teams/470b384c-c484-4d22-b5e4-94085c55d1d0/channels/19%3aec755a15c5514be3b630c8613572f132%40thread.tacv2/messages\r\n    SdkVersion : graph-java/v5.60.0 SdkVersion : graph-java/v5.60.0 [...]\r\n\r\n    401 : Unauthorized [...]\r\n\r\n\r\nAs per the error message , does it mean that, the teams and channel should be in migrated state and if not, then we cant send messages using Java SDK to channel . \r\nanother point is , it says , Unauthorized .  but using postman client , if I hit the Teams API , then it works using the same secret and credentials ..  \r\n\r\nnot getting how to make it work using Java code \r\n\r\nplease suggest on what is missing \r\n","title":"How to send messages to MS Teams using Java SDK","body":"<p>We are trying to send messages using MS graph to MS teams. The SDK used is based on Java</p>\n<p><strong>environment details :</strong></p>\n<p>Java version : openjdk 17</p>\n<p>microsoft-graph : 5.60.0</p>\n<p>azure-identity : 1.9.1</p>\n<p>the docs followed are : (using client secret)</p>\n<p><a href=\"https://learn.microsoft.com/en-us/graph/sdks/choose-authentication-providers?tabs=java#usernamepassword-provider\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/graph/sdks/choose-authentication-providers?tabs=java#usernamepassword-provider</a>\n<a href=\"https://learn.microsoft.com/en-us/graph/sdks/sdk-installation#install-the-microsoft-graph-java-sdk\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/graph/sdks/sdk-installation#install-the-microsoft-graph-java-sdk</a></p>\n<p>we have set the proper permission in the azure active directory app registration (API permission ) ( delegated and application both)</p>\n<p>here is the Java code written</p>\n<pre><code>final String clientId = &quot;3cb5543544444444a9eb&quot;;\nfinal String tenantId = &quot;5435435-235435435435&quot;; // or &quot;common&quot; for multi-tenant apps\n\nfinal String clientSecret = &quot;rewewrewiewrerewrewrz&quot;;\n\nfinal List&lt;String&gt; scopes = Arrays.asList(&quot;https://graph.microsoft.com/.default&quot;);\n\nfinal ClientSecretCredential credential = new ClientSecretCredentialBuilder()\n    .clientId(clientId).tenantId(tenantId).clientSecret(clientSecret).build();\n\nif (null == scopes || null == credential) {\n    throw new Exception(&quot;Unexpected error&quot;);\n}\nfinal TokenCredentialAuthProvider authProvider = new TokenCredentialAuthProvider(\n    scopes, credential);\n\nfinal GraphServiceClient&lt;okhttp3.Request&gt; graphClient = GraphServiceClient.builder()\n    .authenticationProvider(authProvider).buildClient();\n\nChatMessage chatMessage = new ChatMessage();\nItemBody body = new ItemBody();\nbody.content = &quot;Hello World&quot;;\nchatMessage.body = body;\n\ngraphClient.teams(&quot;4w45234324324fgf4d22-b5e4-94d0&quot;).channels(&quot;19%0thredfafdafdsfdstajhhgjhg4524554354354cv2&quot;).messages()\n    .buildRequest()\n    .post(chatMessage);\n</code></pre>\n<p>however, getting below error :</p>\n<pre><code>20:30:48.715 [ForkJoinPool.commonPool-worker-1] INFO\ncom.azure.identity.ClientSecretCredential -- Azure Identity =&gt;\ngetToken() result for scopes [https://graph.microsoft.com/.default]:\nSUCCESS Jun 20, 2023 8:30:49 PM\ncom.microsoft.graph.logger.DefaultLogger logError SEVERE:\nCoreHttpProvider[sendRequestInternal] - 408Graph service exception Jun\n20, 2023 8:30:49 PM com.microsoft.graph.logger.DefaultLogger logError\nSEVERE: Throwable detail:\ncom.microsoft.graph.http.GraphServiceException: Error code:\nUnauthorized Error message: Message POST is allowed in\napplication-only context only for import purposes. Refer to\nhttps://docs.microsoft.com/microsoftteams/platform/graph-api/import-messages/import-external-messages-to-teams\nfor more details.\n\nPOST\nhttps://graph.microsoft.com/v1.0/teams/470b384c-c484-4d22-b5e4-94085c55d1d0/channels/19%3aec755a15c5514be3b630c8613572f132%40thread.tacv2/messages\nSdkVersion : graph-java/v5.60.0 SdkVersion : graph-java/v5.60.0 [...]\n\n401 : Unauthorized [...]\n</code></pre>\n<p>As per the error message , does it mean that, the teams and channel should be in migrated state and if not, then we cant send messages using Java SDK to channel .\nanother point is , it says , Unauthorized .  but using postman client , if I hit the Teams API , then it works using the same secret and credentials ..</p>\n<p>not getting how to make it work using Java code</p>\n<p>please suggest on what is missing</p>\n"},{"tags":["java","html","regex","parsing"],"comments":[{"owner":{"account_id":7553150,"reputation":495,"user_id":5733853,"accept_rate":0,"display_name":"VahidHoseini"},"score":4,"creation_date":1474916516,"post_id":240546,"comment_id":66718682,"body_markdown":"use this with following guide : compile &#39;org.jsoup:jsoup:1.9.2&#39;","body":"use this with following guide : compile &#39;org.jsoup:jsoup:1.9.2&#39;"},{"owner":{"account_id":7553150,"reputation":495,"user_id":5733853,"accept_rate":0,"display_name":"VahidHoseini"},"score":2,"creation_date":1474916548,"post_id":240546,"comment_id":66718707,"body_markdown":"http://stackoverflow.com/a/3149645/5733853","body":"<a href=\"http://stackoverflow.com/a/3149645/5733853\">stackoverflow.com/a/3149645/5733853</a>"},{"owner":{"account_id":150404,"reputation":42109,"user_id":363573,"accept_rate":97,"display_name":"Stephan"},"score":0,"creation_date":1547824272,"post_id":240546,"comment_id":95337357,"body_markdown":"See also: https://stackoverflow.com/a/21838532/363573","body":"See also: <a href=\"https://stackoverflow.com/a/21838532/363573\">stackoverflow.com/a/21838532/363573</a>"}],"answers":[{"comments":[{"owner":{"account_id":1772943,"reputation":1723,"user_id":1617366,"display_name":"Mitja Gustin"},"score":2,"creation_date":1508850886,"post_id":240630,"comment_id":80769926,"body_markdown":"You also run into issues, if there is unescaped &lt; or &gt; sign inside the html node content. &lt;span&gt;My age is &lt; a lot&#39;s of text &gt; then your age&lt;/span&gt;. i think that only 100% way to do this is via some XML DOM interface (like SAX or similar), to use node.getText().","body":"You also run into issues, if there is unescaped &lt; or &gt; sign inside the html node content. &lt;span&gt;My age is &lt; a lot&#39;s of text &gt; then your age&lt;/span&gt;. i think that only 100% way to do this is via some XML DOM interface (like SAX or similar), to use node.getText()."},{"owner":{"account_id":3078593,"reputation":3418,"user_id":2607372,"accept_rate":87,"display_name":"vikramvi"},"score":0,"creation_date":1664245607,"post_id":240630,"comment_id":130421734,"body_markdown":"This does working for string like &quot;\\r\\n HDFC Bank &lt;\\/a&gt;\\r\\n &lt;\\/div&gt;\\r\\n &lt;\\/td&gt;\\r\\n&quot;","body":"This does working for string like &quot;\\r\\n HDFC Bank &lt;\\/a&gt;\\r\\n &lt;\\/div&gt;\\r\\n &lt;\\/td&gt;\\r\\n&quot;"}],"tags":[],"owner":{"account_id":80,"reputation":34261,"user_id":96,"accept_rate":68,"display_name":"Chris Marasti-Georg"},"comment_count":2,"down_vote_count":1,"up_vote_count":99,"is_accepted":false,"score":98,"last_activity_date":1474380024,"creation_date":1225126833,"answer_id":240630,"question_id":240546,"body_markdown":"If the user enters `&lt;b&gt;hey!&lt;/b&gt;`, do you want to display `&lt;b&gt;hey!&lt;/b&gt;` or `hey!`?  If the first, escape less-thans, and html-encode ampersands (and optionally quotes) and you&#39;re fine.  A modification to your code to implement the second option would be:\r\n\r\n    replaceAll(&quot;\\\\&lt;[^&gt;]*&gt;&quot;,&quot;&quot;)\r\n\r\n\r\nbut you will run into issues if the user enters something malformed, like `&lt;bhey!&lt;/b&gt;`.\r\n\r\nYou can also check out [JTidy][1] which will parse &quot;dirty&quot; html input, and should give you a way to remove the tags, keeping the text.\r\n\r\nThe problem with trying to strip html is that browsers have very lenient parsers, more lenient than any library you can find will, so even if you do your best to strip all tags (using the replace method above, a DOM library, or JTidy), you will *still* need to make sure to encode any remaining HTML special characters to keep your output safe.\r\n\r\n\r\n  [1]: http://jtidy.sourceforge.net/","title":"Remove HTML tags from a String","body":"<p>If the user enters <code>&lt;b&gt;hey!&lt;/b&gt;</code>, do you want to display <code>&lt;b&gt;hey!&lt;/b&gt;</code> or <code>hey!</code>?  If the first, escape less-thans, and html-encode ampersands (and optionally quotes) and you're fine.  A modification to your code to implement the second option would be:</p>\n\n<pre><code>replaceAll(\"\\\\&lt;[^&gt;]*&gt;\",\"\")\n</code></pre>\n\n<p>but you will run into issues if the user enters something malformed, like <code>&lt;bhey!&lt;/b&gt;</code>.</p>\n\n<p>You can also check out <a href=\"http://jtidy.sourceforge.net/\" rel=\"noreferrer\">JTidy</a> which will parse \"dirty\" html input, and should give you a way to remove the tags, keeping the text.</p>\n\n<p>The problem with trying to strip html is that browsers have very lenient parsers, more lenient than any library you can find will, so even if you do your best to strip all tags (using the replace method above, a DOM library, or JTidy), you will <em>still</em> need to make sure to encode any remaining HTML special characters to keep your output safe.</p>\n"},{"comments":[{"owner":{"account_id":5541,"reputation":8777,"user_id":8973,"accept_rate":77,"display_name":"Mason"},"score":1,"creation_date":1225127548,"post_id":240636,"comment_id":103870,"body_markdown":"This is the sort of thing I&#39;m looking for but I want to strip the HTML instead of escaping it.","body":"This is the sort of thing I&#39;m looking for but I want to strip the HTML instead of escaping it."},{"owner":{"account_id":3019,"reputation":7919,"user_id":4276,"display_name":"Tim Howland"},"score":0,"creation_date":1225129974,"post_id":240636,"comment_id":103970,"body_markdown":"do you want to strip the html, or do you want to convert it to plain text? Stripping the HTML from a long string with br tags and HTML entities can result in an illegible mess.","body":"do you want to strip the html, or do you want to convert it to plain text? Stripping the HTML from a long string with br tags and HTML entities can result in an illegible mess."},{"owner":{"account_id":178361,"reputation":1833,"user_id":410293,"accept_rate":50,"display_name":"Rafael Sanches"},"score":1,"creation_date":1329417142,"post_id":240636,"comment_id":11753894,"body_markdown":"Have you tried StringEscapeUtils.unescapeHtml? from commons-lang?","body":"Have you tried StringEscapeUtils.unescapeHtml? from commons-lang?"},{"owner":{"account_id":133678,"reputation":5377,"user_id":335227,"accept_rate":88,"display_name":"Erin Drummond"},"score":5,"creation_date":1345086299,"post_id":240636,"comment_id":15972415,"body_markdown":"StringEscapeUtils.unescapeHtml does not strip html","body":"StringEscapeUtils.unescapeHtml does not strip html"},{"owner":{"account_id":480944,"reputation":843,"user_id":894473,"display_name":"Alex"},"score":7,"creation_date":1403069610,"post_id":240636,"comment_id":37510298,"body_markdown":"Good information on utils to use for unescaping but not answering the question.","body":"Good information on utils to use for unescaping but not answering the question."},{"owner":{"account_id":34247,"reputation":1973,"user_id":96617,"accept_rate":78,"display_name":"Lluis Martinez"},"score":4,"creation_date":1414507287,"post_id":240636,"comment_id":41834101,"body_markdown":"Confusing answer. Removing != Unescaping","body":"Confusing answer. Removing != Unescaping"}],"tags":[],"owner":{"account_id":3019,"reputation":7919,"user_id":4276,"display_name":"Tim Howland"},"comment_count":6,"down_vote_count":11,"up_vote_count":23,"is_accepted":false,"score":12,"last_activity_date":1369302173,"creation_date":1225127036,"answer_id":240636,"question_id":240546,"body_markdown":"HTML Escaping is really hard to do right- I&#39;d definitely suggest using library code to do this, as it&#39;s a lot more subtle than you&#39;d think. Check out Apache&#39;s [StringEscapeUtils][1] for a pretty good library for handling this in Java.\r\n\r\n\r\n  [1]: http://commons.apache.org/proper/commons-lang/javadocs/api-release/org/apache/commons/lang3/StringEscapeUtils.html","title":"Remove HTML tags from a String","body":"<p>HTML Escaping is really hard to do right- I'd definitely suggest using library code to do this, as it's a lot more subtle than you'd think. Check out Apache's <a href=\"http://commons.apache.org/proper/commons-lang/javadocs/api-release/org/apache/commons/lang3/StringEscapeUtils.html\" rel=\"nofollow noreferrer\">StringEscapeUtils</a> for a pretty good library for handling this in Java.</p>\n"},{"tags":[],"owner":{"account_id":14581,"reputation":2168,"user_id":30119,"display_name":"foxy"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1225151557,"creation_date":1225151557,"answer_id":241757,"question_id":240546,"body_markdown":"You might want to replace `&lt;br/&gt;` and `&lt;/p&gt;` tags with newlines before stripping the HTML to prevent it becoming an illegible mess as Tim suggests.\r\n\r\nThe only way I can think of removing HTML tags but leaving non-HTML between angle brackets would be check against a [list of HTML tags][1]. Something along these lines...\r\n\r\n    replaceAll(&quot;\\\\&lt;[\\s]*tag[^&gt;]*&gt;&quot;,&quot;&quot;)\r\n\r\nThen HTML-decode special characters such as `&amp;amp;`. The result should not be considered to be sanitized.\r\n\r\n\r\n  [1]: http://www.w3schools.com/tags/default.asp","title":"Remove HTML tags from a String","body":"<p>You might want to replace <code>&lt;br/&gt;</code> and <code>&lt;/p&gt;</code> tags with newlines before stripping the HTML to prevent it becoming an illegible mess as Tim suggests.</p>\n\n<p>The only way I can think of removing HTML tags but leaving non-HTML between angle brackets would be check against a <a href=\"http://www.w3schools.com/tags/default.asp\" rel=\"noreferrer\">list of HTML tags</a>. Something along these lines...</p>\n\n<pre><code>replaceAll(\"\\\\&lt;[\\s]*tag[^&gt;]*&gt;\",\"\")\n</code></pre>\n\n<p>Then HTML-decode special characters such as <code>&amp;amp;</code>. The result should not be considered to be sanitized.</p>\n"},{"tags":[],"owner":{"display_name":"Mark"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1328203583,"creation_date":1232244977,"answer_id":454511,"question_id":240546,"body_markdown":"It sounds like you want to go from HTML to plain text.  \r\nIf that is the case look at www.htmlparser.org.  Here is an example that strips all the tags out from the html file found at a URL.  \r\nIt makes use of *org.htmlparser.beans.StringBean*.\r\n\r\n    static public String getUrlContentsAsText(String url) {\r\n    \tString content = &quot;&quot;;\r\n    \tStringBean stringBean = new StringBean();\r\n    \tstringBean.setURL(url);\r\n    \tcontent = stringBean.getStrings();\r\n    \treturn content;\r\n    }","title":"Remove HTML tags from a String","body":"<p>It sounds like you want to go from HTML to plain text.<br>\nIf that is the case look at www.htmlparser.org.  Here is an example that strips all the tags out from the html file found at a URL.<br>\nIt makes use of <em>org.htmlparser.beans.StringBean</em>.</p>\n\n<pre><code>static public String getUrlContentsAsText(String url) {\n    String content = \"\";\n    StringBean stringBean = new StringBean();\n    stringBean.setURL(url);\n    content = stringBean.getStrings();\n    return content;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":16164,"reputation":20387,"user_id":34935,"accept_rate":60,"display_name":"dfrankow"},"score":6,"creation_date":1281653815,"post_id":455196,"comment_id":3623520,"body_markdown":"The result of &quot;a &lt; b or b &gt; c&quot; is &quot;a b or b &gt; c&quot;, which seems unfortunate.","body":"The result of &quot;a &lt; b or b &gt; c&quot; is &quot;a b or b &gt; c&quot;, which seems unfortunate."},{"owner":{"account_id":2309641,"reputation":4648,"user_id":2028066,"accept_rate":52,"display_name":"MiguelMunoz"},"score":2,"creation_date":1582059971,"post_id":455196,"comment_id":106644816,"body_markdown":"This worked the best for me. I needed to preserve line breaks. I did by adding this simple method to the parser: @Override public void handleStartTag(HTML.Tag t, MutableAttributeSet a, int pos) { if (t == HTML.Tag.P || t == HTML.Tag.BR) { s.append(&#39;\\n&#39;); } }","body":"This worked the best for me. I needed to preserve line breaks. I did by adding this simple method to the parser: @Override public void handleStartTag(HTML.Tag t, MutableAttributeSet a, int pos) { if (t == HTML.Tag.P || t == HTML.Tag.BR) { s.append(&#39;\\n&#39;); } }"},{"owner":{"account_id":2309641,"reputation":4648,"user_id":2028066,"accept_rate":52,"display_name":"MiguelMunoz"},"score":3,"creation_date":1582060687,"post_id":455196,"comment_id":106645125,"body_markdown":"dfrankow: The mathematical expression a &lt; b or b &gt; c should be written in html like this: a &amp;lt; b or b &amp;gt; c","body":"dfrankow: The mathematical expression a &lt; b or b &gt; c should be written in html like this: a &amp;lt; b or b &amp;gt; c"},{"owner":{"account_id":1107482,"reputation":2870,"user_id":1098603,"accept_rate":94,"display_name":"Matthieu"},"score":1,"creation_date":1594301538,"post_id":455196,"comment_id":111083001,"body_markdown":"I love that this doesn&#39;t have external dependencies.","body":"I love that this doesn&#39;t have external dependencies."}],"tags":[],"owner":{"account_id":12685,"reputation":35096,"user_id":25122,"accept_rate":75,"display_name":"RealHowTo"},"comment_count":4,"down_vote_count":0,"up_vote_count":31,"is_accepted":false,"score":31,"last_activity_date":1683165219,"creation_date":1232288212,"answer_id":455196,"question_id":240546,"body_markdown":"Another way is to use  *javax.swing.text.html.HTMLEditorKit* to extract the text.\r\n\r\n    import java.io.*;\r\n    import javax.swing.text.html.*;\r\n    import javax.swing.text.html.parser.*;\r\n    \r\n    public class Html2Text extends HTMLEditorKit.ParserCallback {\r\n    \tStringBuffer s;\r\n    \r\n    \tpublic Html2Text() {\r\n    \t}\r\n    \r\n    \tpublic void parse(Reader in) throws IOException {\r\n    \t\ts = new StringBuffer();\r\n    \t\tParserDelegator delegator = new ParserDelegator();\r\n    \t\t// the third parameter is TRUE to ignore charset directive\r\n    \t\tdelegator.parse(in, this, Boolean.TRUE);\r\n    \t}\r\n    \r\n    \tpublic void handleText(char[] text, int pos) {\r\n    \t\ts.append(text);\r\n    \t}\r\n    \r\n    \tpublic String getText() {\r\n    \t\treturn s.toString();\r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\ttry {\r\n    \t\t\t// the HTML to convert\r\n    \t\t\tFileReader in = new FileReader(&quot;java-new.html&quot;);\r\n    \t\t\tHtml2Text parser = new Html2Text();\r\n    \t\t\tparser.parse(in);\r\n    \t\t\tin.close();\r\n    \t\t\tSystem.out.println(parser.getText());\r\n    \t\t} catch (Exception e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n\r\n\r\n\r\n  [1]: http://www.rgagnon.com/javadetails/java-0424.html","title":"Remove HTML tags from a String","body":"<p>Another way is to use  <em>javax.swing.text.html.HTMLEditorKit</em> to extract the text.</p>\n<pre><code>import java.io.*;\nimport javax.swing.text.html.*;\nimport javax.swing.text.html.parser.*;\n\npublic class Html2Text extends HTMLEditorKit.ParserCallback {\n    StringBuffer s;\n\n    public Html2Text() {\n    }\n\n    public void parse(Reader in) throws IOException {\n        s = new StringBuffer();\n        ParserDelegator delegator = new ParserDelegator();\n        // the third parameter is TRUE to ignore charset directive\n        delegator.parse(in, this, Boolean.TRUE);\n    }\n\n    public void handleText(char[] text, int pos) {\n        s.append(text);\n    }\n\n    public String getText() {\n        return s.toString();\n    }\n\n    public static void main(String[] args) {\n        try {\n            // the HTML to convert\n            FileReader in = new FileReader(&quot;java-new.html&quot;);\n            Html2Text parser = new Html2Text();\n            parser.parse(in);\n            in.close();\n            System.out.println(parser.getText());\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":127450,"reputation":51,"user_id":324610,"display_name":"Mike"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1328203606,"creation_date":1272057775,"answer_id":2702056,"question_id":240546,"body_markdown":"Here&#39;s a lightly more fleshed out update to try to handle some formatting for breaks and lists. I used Amaya&#39;s output as a guide.  \r\n\r\n    import java.io.IOException;\r\n    import java.io.Reader;\r\n    import java.io.StringReader;\r\n    import java.util.Stack;\r\n    import java.util.logging.Logger;\r\n    \r\n    import javax.swing.text.MutableAttributeSet;\r\n    import javax.swing.text.html.HTML;\r\n    import javax.swing.text.html.HTMLEditorKit;\r\n    import javax.swing.text.html.parser.ParserDelegator;\r\n    \r\n    public class HTML2Text extends HTMLEditorKit.ParserCallback {\r\n    \tprivate static final Logger log = Logger\r\n    \t\t\t.getLogger(Logger.GLOBAL_LOGGER_NAME);\r\n    \r\n    \tprivate StringBuffer stringBuffer;\r\n    \r\n    \tprivate Stack&lt;IndexType&gt; indentStack;\r\n    \r\n    \tpublic static class IndexType {\r\n    \t\tpublic String type;\r\n    \t\tpublic int counter; // used for ordered lists\r\n    \r\n    \t\tpublic IndexType(String type) {\r\n    \t\t\tthis.type = type;\r\n    \t\t\tcounter = 0;\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tpublic HTML2Text() {\r\n    \t\tstringBuffer = new StringBuffer();\r\n    \t\tindentStack = new Stack&lt;IndexType&gt;();\r\n    \t}\r\n    \r\n    \tpublic static String convert(String html) {\r\n    \t\tHTML2Text parser = new HTML2Text();\r\n    \t\tReader in = new StringReader(html);\r\n    \t\ttry {\r\n    \t\t\t// the HTML to convert\r\n    \t\t\tparser.parse(in);\r\n    \t\t} catch (Exception e) {\r\n    \t\t\tlog.severe(e.getMessage());\r\n    \t\t} finally {\r\n    \t\t\ttry {\r\n    \t\t\t\tin.close();\r\n    \t\t\t} catch (IOException ioe) {\r\n    \t\t\t\t// this should never happen\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\treturn parser.getText();\r\n    \t}\r\n    \r\n    \tpublic void parse(Reader in) throws IOException {\r\n    \t\tParserDelegator delegator = new ParserDelegator();\r\n    \t\t// the third parameter is TRUE to ignore charset directive\r\n    \t\tdelegator.parse(in, this, Boolean.TRUE);\r\n    \t}\r\n    \r\n    \tpublic void handleStartTag(HTML.Tag t, MutableAttributeSet a, int pos) {\r\n    \t\tlog.info(&quot;StartTag:&quot; + t.toString());\r\n    \t\tif (t.toString().equals(&quot;p&quot;)) {\r\n    \t\t\tif (stringBuffer.length() &gt; 0\r\n    \t\t\t\t\t&amp;&amp; !stringBuffer.substring(stringBuffer.length() - 1)\r\n    \t\t\t\t\t\t\t.equals(&quot;\\n&quot;)) {\r\n    \t\t\t\tnewLine();\r\n    \t\t\t}\r\n    \t\t\tnewLine();\r\n    \t\t} else if (t.toString().equals(&quot;ol&quot;)) {\r\n    \t\t\tindentStack.push(new IndexType(&quot;ol&quot;));\r\n    \t\t\tnewLine();\r\n    \t\t} else if (t.toString().equals(&quot;ul&quot;)) {\r\n    \t\t\tindentStack.push(new IndexType(&quot;ul&quot;));\r\n    \t\t\tnewLine();\r\n    \t\t} else if (t.toString().equals(&quot;li&quot;)) {\r\n    \t\t\tIndexType parent = indentStack.peek();\r\n    \t\t\tif (parent.type.equals(&quot;ol&quot;)) {\r\n    \t\t\t\tString numberString = &quot;&quot; + (++parent.counter) + &quot;.&quot;;\r\n    \t\t\t\tstringBuffer.append(numberString);\r\n    \t\t\t\tfor (int i = 0; i &lt; (4 - numberString.length()); i++) {\r\n    \t\t\t\t\tstringBuffer.append(&quot; &quot;);\r\n    \t\t\t\t}\r\n    \t\t\t} else {\r\n    \t\t\t\tstringBuffer.append(&quot;*   &quot;);\r\n    \t\t\t}\r\n    \t\t\tindentStack.push(new IndexType(&quot;li&quot;));\r\n    \t\t} else if (t.toString().equals(&quot;dl&quot;)) {\r\n    \t\t\tnewLine();\r\n    \t\t} else if (t.toString().equals(&quot;dt&quot;)) {\r\n    \t\t\tnewLine();\r\n    \t\t} else if (t.toString().equals(&quot;dd&quot;)) {\r\n    \t\t\tindentStack.push(new IndexType(&quot;dd&quot;));\r\n    \t\t\tnewLine();\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tprivate void newLine() {\r\n    \t\tstringBuffer.append(&quot;\\n&quot;);\r\n    \t\tfor (int i = 0; i &lt; indentStack.size(); i++) {\r\n    \t\t\tstringBuffer.append(&quot;    &quot;);\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tpublic void handleEndTag(HTML.Tag t, int pos) {\r\n    \t\tlog.info(&quot;EndTag:&quot; + t.toString());\r\n    \t\tif (t.toString().equals(&quot;p&quot;)) {\r\n    \t\t\tnewLine();\r\n    \t\t} else if (t.toString().equals(&quot;ol&quot;)) {\r\n    \t\t\tindentStack.pop();\r\n    \t\t\t;\r\n    \t\t\tnewLine();\r\n    \t\t} else if (t.toString().equals(&quot;ul&quot;)) {\r\n    \t\t\tindentStack.pop();\r\n    \t\t\t;\r\n    \t\t\tnewLine();\r\n    \t\t} else if (t.toString().equals(&quot;li&quot;)) {\r\n    \t\t\tindentStack.pop();\r\n    \t\t\t;\r\n    \t\t\tnewLine();\r\n    \t\t} else if (t.toString().equals(&quot;dd&quot;)) {\r\n    \t\t\tindentStack.pop();\r\n    \t\t\t;\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tpublic void handleSimpleTag(HTML.Tag t, MutableAttributeSet a, int pos) {\r\n    \t\tlog.info(&quot;SimpleTag:&quot; + t.toString());\r\n    \t\tif (t.toString().equals(&quot;br&quot;)) {\r\n    \t\t\tnewLine();\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tpublic void handleText(char[] text, int pos) {\r\n    \t\tlog.info(&quot;Text:&quot; + new String(text));\r\n    \t\tstringBuffer.append(text);\r\n    \t}\r\n    \r\n    \tpublic String getText() {\r\n    \t\treturn stringBuffer.toString();\r\n    \t}\r\n    \r\n    \tpublic static void main(String args[]) {\r\n    \t\tString html = &quot;&lt;html&gt;&lt;body&gt;&lt;p&gt;paragraph at start&lt;/p&gt;hello&lt;br /&gt;What is happening?&lt;p&gt;this is a&lt;br /&gt;mutiline paragraph&lt;/p&gt;&lt;ol&gt;  &lt;li&gt;This&lt;/li&gt;  &lt;li&gt;is&lt;/li&gt;  &lt;li&gt;an&lt;/li&gt;  &lt;li&gt;ordered&lt;/li&gt;  &lt;li&gt;list    &lt;p&gt;with&lt;/p&gt;    &lt;ul&gt;      &lt;li&gt;another&lt;/li&gt;      &lt;li&gt;list        &lt;dl&gt;          &lt;dt&gt;This&lt;/dt&gt;          &lt;dt&gt;is&lt;/dt&gt;            &lt;dd&gt;sdasd&lt;/dd&gt;            &lt;dd&gt;sdasda&lt;/dd&gt;            &lt;dd&gt;asda              &lt;p&gt;aasdas&lt;/p&gt;            &lt;/dd&gt;            &lt;dd&gt;sdada&lt;/dd&gt;          &lt;dt&gt;fsdfsdfsd&lt;/dt&gt;        &lt;/dl&gt;        &lt;dl&gt;          &lt;dt&gt;vbcvcvbcvb&lt;/dt&gt;          &lt;dt&gt;cvbcvbc&lt;/dt&gt;            &lt;dd&gt;vbcbcvbcvb&lt;/dd&gt;          &lt;dt&gt;cvbcv&lt;/dt&gt;          &lt;dt&gt;&lt;/dt&gt;        &lt;/dl&gt;        &lt;dl&gt;          &lt;dt&gt;&lt;/dt&gt;        &lt;/dl&gt;&lt;/li&gt;      &lt;li&gt;cool&lt;/li&gt;    &lt;/ul&gt;    &lt;p&gt;stuff&lt;/p&gt;  &lt;/li&gt;  &lt;li&gt;cool&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;&quot;;\r\n    \t\tSystem.out.println(convert(html));\r\n    \t}\r\n    }","title":"Remove HTML tags from a String","body":"<p>Here's a lightly more fleshed out update to try to handle some formatting for breaks and lists. I used Amaya's output as a guide.  </p>\n\n<pre><code>import java.io.IOException;\nimport java.io.Reader;\nimport java.io.StringReader;\nimport java.util.Stack;\nimport java.util.logging.Logger;\n\nimport javax.swing.text.MutableAttributeSet;\nimport javax.swing.text.html.HTML;\nimport javax.swing.text.html.HTMLEditorKit;\nimport javax.swing.text.html.parser.ParserDelegator;\n\npublic class HTML2Text extends HTMLEditorKit.ParserCallback {\n    private static final Logger log = Logger\n            .getLogger(Logger.GLOBAL_LOGGER_NAME);\n\n    private StringBuffer stringBuffer;\n\n    private Stack&lt;IndexType&gt; indentStack;\n\n    public static class IndexType {\n        public String type;\n        public int counter; // used for ordered lists\n\n        public IndexType(String type) {\n            this.type = type;\n            counter = 0;\n        }\n    }\n\n    public HTML2Text() {\n        stringBuffer = new StringBuffer();\n        indentStack = new Stack&lt;IndexType&gt;();\n    }\n\n    public static String convert(String html) {\n        HTML2Text parser = new HTML2Text();\n        Reader in = new StringReader(html);\n        try {\n            // the HTML to convert\n            parser.parse(in);\n        } catch (Exception e) {\n            log.severe(e.getMessage());\n        } finally {\n            try {\n                in.close();\n            } catch (IOException ioe) {\n                // this should never happen\n            }\n        }\n        return parser.getText();\n    }\n\n    public void parse(Reader in) throws IOException {\n        ParserDelegator delegator = new ParserDelegator();\n        // the third parameter is TRUE to ignore charset directive\n        delegator.parse(in, this, Boolean.TRUE);\n    }\n\n    public void handleStartTag(HTML.Tag t, MutableAttributeSet a, int pos) {\n        log.info(\"StartTag:\" + t.toString());\n        if (t.toString().equals(\"p\")) {\n            if (stringBuffer.length() &gt; 0\n                    &amp;&amp; !stringBuffer.substring(stringBuffer.length() - 1)\n                            .equals(\"\\n\")) {\n                newLine();\n            }\n            newLine();\n        } else if (t.toString().equals(\"ol\")) {\n            indentStack.push(new IndexType(\"ol\"));\n            newLine();\n        } else if (t.toString().equals(\"ul\")) {\n            indentStack.push(new IndexType(\"ul\"));\n            newLine();\n        } else if (t.toString().equals(\"li\")) {\n            IndexType parent = indentStack.peek();\n            if (parent.type.equals(\"ol\")) {\n                String numberString = \"\" + (++parent.counter) + \".\";\n                stringBuffer.append(numberString);\n                for (int i = 0; i &lt; (4 - numberString.length()); i++) {\n                    stringBuffer.append(\" \");\n                }\n            } else {\n                stringBuffer.append(\"*   \");\n            }\n            indentStack.push(new IndexType(\"li\"));\n        } else if (t.toString().equals(\"dl\")) {\n            newLine();\n        } else if (t.toString().equals(\"dt\")) {\n            newLine();\n        } else if (t.toString().equals(\"dd\")) {\n            indentStack.push(new IndexType(\"dd\"));\n            newLine();\n        }\n    }\n\n    private void newLine() {\n        stringBuffer.append(\"\\n\");\n        for (int i = 0; i &lt; indentStack.size(); i++) {\n            stringBuffer.append(\"    \");\n        }\n    }\n\n    public void handleEndTag(HTML.Tag t, int pos) {\n        log.info(\"EndTag:\" + t.toString());\n        if (t.toString().equals(\"p\")) {\n            newLine();\n        } else if (t.toString().equals(\"ol\")) {\n            indentStack.pop();\n            ;\n            newLine();\n        } else if (t.toString().equals(\"ul\")) {\n            indentStack.pop();\n            ;\n            newLine();\n        } else if (t.toString().equals(\"li\")) {\n            indentStack.pop();\n            ;\n            newLine();\n        } else if (t.toString().equals(\"dd\")) {\n            indentStack.pop();\n            ;\n        }\n    }\n\n    public void handleSimpleTag(HTML.Tag t, MutableAttributeSet a, int pos) {\n        log.info(\"SimpleTag:\" + t.toString());\n        if (t.toString().equals(\"br\")) {\n            newLine();\n        }\n    }\n\n    public void handleText(char[] text, int pos) {\n        log.info(\"Text:\" + new String(text));\n        stringBuffer.append(text);\n    }\n\n    public String getText() {\n        return stringBuffer.toString();\n    }\n\n    public static void main(String args[]) {\n        String html = \"&lt;html&gt;&lt;body&gt;&lt;p&gt;paragraph at start&lt;/p&gt;hello&lt;br /&gt;What is happening?&lt;p&gt;this is a&lt;br /&gt;mutiline paragraph&lt;/p&gt;&lt;ol&gt;  &lt;li&gt;This&lt;/li&gt;  &lt;li&gt;is&lt;/li&gt;  &lt;li&gt;an&lt;/li&gt;  &lt;li&gt;ordered&lt;/li&gt;  &lt;li&gt;list    &lt;p&gt;with&lt;/p&gt;    &lt;ul&gt;      &lt;li&gt;another&lt;/li&gt;      &lt;li&gt;list        &lt;dl&gt;          &lt;dt&gt;This&lt;/dt&gt;          &lt;dt&gt;is&lt;/dt&gt;            &lt;dd&gt;sdasd&lt;/dd&gt;            &lt;dd&gt;sdasda&lt;/dd&gt;            &lt;dd&gt;asda              &lt;p&gt;aasdas&lt;/p&gt;            &lt;/dd&gt;            &lt;dd&gt;sdada&lt;/dd&gt;          &lt;dt&gt;fsdfsdfsd&lt;/dt&gt;        &lt;/dl&gt;        &lt;dl&gt;          &lt;dt&gt;vbcvcvbcvb&lt;/dt&gt;          &lt;dt&gt;cvbcvbc&lt;/dt&gt;            &lt;dd&gt;vbcbcvbcvb&lt;/dd&gt;          &lt;dt&gt;cvbcv&lt;/dt&gt;          &lt;dt&gt;&lt;/dt&gt;        &lt;/dl&gt;        &lt;dl&gt;          &lt;dt&gt;&lt;/dt&gt;        &lt;/dl&gt;&lt;/li&gt;      &lt;li&gt;cool&lt;/li&gt;    &lt;/ul&gt;    &lt;p&gt;stuff&lt;/p&gt;  &lt;/li&gt;  &lt;li&gt;cool&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;\";\n        System.out.println(convert(html));\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":24216,"reputation":23448,"user_id":61479,"accept_rate":81,"display_name":"Ridcully"},"score":20,"creation_date":1280570265,"post_id":3149645,"comment_id":3510306,"body_markdown":"Jsoup is nice, but I encountered some drawbacks with it. I use it to get rid of XSS, so basically I expect a plain text input, but some evil person could try to send me some HTML. Using Jsoup, I can remove all HTML but, unfortunately it also shrinks many spaces to one and removes link breaks (\\n characters)","body":"Jsoup is nice, but I encountered some drawbacks with it. I use it to get rid of XSS, so basically I expect a plain text input, but some evil person could try to send me some HTML. Using Jsoup, I can remove all HTML but, unfortunately it also shrinks many spaces to one and removes link breaks (\\n characters)"},{"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":8,"creation_date":1281119084,"post_id":3149645,"comment_id":3567620,"body_markdown":"@Ridcully: for that you&#39;d like to use [`Jsoup#clean()`](http://jsoup.org/cookbook/cleaning-html/whitelist-sanitizer) instead.","body":"@Ridcully: for that you&#39;d like to use <a href=\"http://jsoup.org/cookbook/cleaning-html/whitelist-sanitizer\" rel=\"nofollow noreferrer\"><code>Jsoup#clean()</code></a> instead."},{"owner":{"account_id":129726,"reputation":2958,"user_id":328484,"accept_rate":81,"display_name":"Keith"},"score":5,"creation_date":1304288154,"post_id":3149645,"comment_id":6723267,"body_markdown":"using clean() will still cause extra spaces and \\n chars to be removed.\nex: Jsoup.clean(&quot;a  \\n   b&quot;, Whitelist.none()) returns &quot;a b&quot;","body":"using clean() will still cause extra spaces and \\n chars to be removed. ex: Jsoup.clean(&quot;a  \\n   b&quot;, Whitelist.none()) returns &quot;a b&quot;"},{"owner":{"account_id":81330,"reputation":2317,"user_id":229414,"accept_rate":54,"display_name":"Eduardo"},"score":1,"creation_date":1311112391,"post_id":3149645,"comment_id":8007576,"body_markdown":"@Keith: of course extra spaces and \\n will be removed as HTML ignores them and you are calling .clean()","body":"@Keith: of course extra spaces and \\n will be removed as HTML ignores them and you are calling .clean()"},{"owner":{"account_id":90974,"reputation":20508,"user_id":250096,"accept_rate":82,"display_name":"Nels Beckman"},"score":1,"creation_date":1319474477,"post_id":3149645,"comment_id":9614316,"body_markdown":"Will this perform &#39;attribute escape&#39; as well? I am specifically referring to Rule #2 in this list:\nhttps://www.owasp.org/index.php/XSS_(Cross_Site_Scripting)_Prevention_Cheat_Sheet#Escaping_.28aka_Output_Encoding.29","body":"Will this perform &#39;attribute escape&#39; as well? I am specifically referring to Rule #2 in this list: <a href=\"https://www.owasp.org/index.php/XSS_(Cross_Site_Scripting)_Prevention_Cheat_Sheet#Escaping_.28aka_Output_Encoding.29\" rel=\"nofollow noreferrer\">owasp.org/index.php/&hellip;</a>"},{"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":2,"creation_date":1319474758,"post_id":3149645,"comment_id":9614398,"body_markdown":"@Nels: you&#39;re talking about `Jsoup#clean()`? Yes definitely. Click the &quot;Jsoup#clean()&quot; link in my previous comment.","body":"@Nels: you&#39;re talking about <code>Jsoup#clean()</code>? Yes definitely. Click the &quot;Jsoup#clean()&quot; link in my previous comment."},{"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"score":1,"creation_date":1338446644,"post_id":3149645,"comment_id":14097047,"body_markdown":"Alas, it removed new lines. And we need them :)","body":"Alas, it removed new lines. And we need them :)"},{"owner":{"account_id":206400,"reputation":2188,"user_id":455654,"display_name":"Aalkhodiry"},"score":1,"creation_date":1362493350,"post_id":3149645,"comment_id":21463444,"body_markdown":"input.replaceAll(&quot;&lt;[^&gt;]*&gt;&quot;, &quot;&quot;);","body":"input.replaceAll(&quot;&lt;[^&gt;]*&gt;&quot;, &quot;&quot;);"},{"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":24,"creation_date":1362493498,"post_id":3149645,"comment_id":21463562,"body_markdown":"@Zeroows: this fails miserably on `&lt;p&gt;Lorem ipsum 1 &lt; 3 dolor sit amet&lt;/p&gt;`. Again, [HTML is not a regular language](http://stackoverflow.com/a/1732454/157882). It&#39;s completely beyond me why everyone keeps trying to throw regex on it to parse parts of interest instead of using a real parser.","body":"@Zeroows: this fails miserably on <code>&lt;p&gt;Lorem ipsum 1 &lt; 3 dolor sit amet&lt;&#47;p&gt;</code>. Again, <a href=\"http://stackoverflow.com/a/1732454/157882\">HTML is not a regular language</a>. It&#39;s completely beyond me why everyone keeps trying to throw regex on it to parse parts of interest instead of using a real parser."},{"owner":{"account_id":100972,"reputation":2254,"user_id":271887,"accept_rate":88,"display_name":"Damien"},"score":1,"creation_date":1399954888,"post_id":3149645,"comment_id":36269521,"body_markdown":"I also found this answer not satisfying against XSS and I posted another answer.","body":"I also found this answer not satisfying against XSS and I posted another answer."},{"owner":{"account_id":2031832,"reputation":4490,"user_id":1815311,"accept_rate":85,"display_name":"Lisa Anne"},"score":1,"creation_date":1423990169,"post_id":3149645,"comment_id":45364890,"body_markdown":"That is WAY better than `Html.fromHtml`","body":"That is WAY better than <code>Html.fromHtml</code>"},{"owner":{"account_id":2039118,"reputation":389,"user_id":3629277,"display_name":"Marc Johnen"},"score":8,"creation_date":1471342769,"post_id":3149645,"comment_id":65298007,"body_markdown":"use `Jsoup.clean(unsafeString, &quot;&quot;, Whitelist.none(), new OutputSettings().prettyPrint(false));` to preserve linebreaks","body":"use <code>Jsoup.clean(unsafeString, &quot;&quot;, Whitelist.none(), new OutputSettings().prettyPrint(false));</code> to preserve linebreaks"},{"owner":{"account_id":7553150,"reputation":495,"user_id":5733853,"accept_rate":0,"display_name":"VahidHoseini"},"score":2,"creation_date":1474916454,"post_id":3149645,"comment_id":66718647,"body_markdown":"compile this : compile &#39;org.jsoup:jsoup:1.9.2&#39;","body":"compile this : compile &#39;org.jsoup:jsoup:1.9.2&#39;"},{"owner":{"account_id":7298005,"reputation":1485,"user_id":5561990,"accept_rate":50,"display_name":"RexSplode"},"score":2,"creation_date":1526308792,"post_id":3149645,"comment_id":87682087,"body_markdown":"It may be better, but it introduces another dependency to your project which is not good","body":"It may be better, but it introduces another dependency to your project which is not good"},{"owner":{"account_id":8352909,"reputation":233,"user_id":6274324,"accept_rate":55,"display_name":"Sindhu Venkatachary"},"score":1,"creation_date":1535363103,"post_id":3149645,"comment_id":91023263,"body_markdown":"Didn&#39;t work for the input text, &quot;Hi &lt;span&gt;there! Please don&#39;t use &lt;and &gt;&quot;","body":"Didn&#39;t work for the input text, &quot;Hi &lt;span&gt;there! Please don&#39;t use &lt;and &gt;&quot;"},{"owner":{"account_id":905926,"reputation":502,"user_id":940837,"display_name":"FrankKrumnow"},"score":1,"creation_date":1606300814,"post_id":3149645,"comment_id":114920987,"body_markdown":"Can someone elaborate what makes this better than Html.fromHtml(..).toString()?","body":"Can someone elaborate what makes this better than Html.fromHtml(..).toString()?"},{"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":2,"creation_date":1606304114,"post_id":3149645,"comment_id":114922431,"body_markdown":"@FrankKrumnow: `Html.fromHtml(..).toString()` isn&#39;t available in standard Java nor as a standard Java library. It&#39;s only available in Android.","body":"@FrankKrumnow: <code>Html.fromHtml(..).toString()</code> isn&#39;t available in standard Java nor as a standard Java library. It&#39;s only available in Android."},{"owner":{"account_id":905926,"reputation":502,"user_id":940837,"display_name":"FrankKrumnow"},"score":0,"creation_date":1606391546,"post_id":3149645,"comment_id":114953072,"body_markdown":"My bad. Did see the question in an android context.","body":"My bad. Did see the question in an android context."},{"owner":{"account_id":5494626,"reputation":352,"user_id":4737435,"display_name":"jalmasi"},"score":0,"creation_date":1615227642,"post_id":3149645,"comment_id":117621021,"body_markdown":"I&#39;ve just realized that this answer implies HTML string. What about if we&#39;re talking about general string? I.e. there&#39;s no way to turn off escaping lt, gt, amp, quot. If string contains &amp;, JSoup will clean it as &amp;amp. (tried to use it for JSON string sanitation, to prevent XSS)","body":"I&#39;ve just realized that this answer implies HTML string. What about if we&#39;re talking about general string? I.e. there&#39;s no way to turn off escaping lt, gt, amp, quot. If string contains &amp;, JSoup will clean it as &amp;amp. (tried to use it for JSON string sanitation, to prevent XSS)"},{"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":0,"creation_date":1615227876,"post_id":3149645,"comment_id":117621109,"body_markdown":"@jalmasi: just traverse JSON and sanitize each string property instead of the whole JSON object itself. Or, if your JSON parser supports it, register a new listener/adapter/whateverTheyCallIt so that your JSON parser does it automatically.","body":"@jalmasi: just traverse JSON and sanitize each string property instead of the whole JSON object itself. Or, if your JSON parser supports it, register a new listener/adapter/whateverTheyCallIt so that your JSON parser does it automatically."},{"owner":{"account_id":5494626,"reputation":352,"user_id":4737435,"display_name":"jalmasi"},"score":0,"creation_date":1615319601,"post_id":3149645,"comment_id":117653338,"body_markdown":"@BalusC that&#39;s exactly what I&#39;m doing - jackson, de/serializer for by type. But Jsoup cleaner replaces gt, lt, amp, quot no matter what, and there&#39;s no way to turn that off. I.e. there&#39;s no EscapeMode.none :)","body":"@BalusC that&#39;s exactly what I&#39;m doing - jackson, de/serializer for by type. But Jsoup cleaner replaces gt, lt, amp, quot no matter what, and there&#39;s no way to turn that off. I.e. there&#39;s no EscapeMode.none :)"},{"owner":{"account_id":3078593,"reputation":3418,"user_id":2607372,"accept_rate":87,"display_name":"vikramvi"},"score":0,"creation_date":1664245503,"post_id":3149645,"comment_id":130421720,"body_markdown":"This is not working for me, can you please check https://stackoverflow.com/questions/73861739/how-to-parse-text-with-html-tags-into-plain-text","body":"This is not working for me, can you please check <a href=\"https://stackoverflow.com/questions/73861739/how-to-parse-text-with-html-tags-into-plain-text\" title=\"how to parse text with html tags into plain text\">stackoverflow.com/questions/73861739/&hellip;</a>"}],"tags":[],"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"comment_count":22,"down_vote_count":7,"up_vote_count":660,"is_accepted":true,"score":653,"last_activity_date":1687345185,"creation_date":1277904288,"answer_id":3149645,"question_id":240546,"body_markdown":"Use a HTML parser instead of regex. This is dead simple with [Jsoup][1].\r\n\r\n    public static String html2text(String html) {\r\n        return Jsoup.parse(html).text();\r\n    }\r\n\r\nJsoup also [supports][2] removing HTML tags against a customizable whitelist, which is very useful if you want to allow only e.g. `&lt;b&gt;`, `&lt;i&gt;` and `&lt;u&gt;`.\r\n\r\n### See also:\r\n\r\n- https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454\r\n- https://stackoverflow.com/questions/3152138/what-are-the-pros-and-cons-of-the-leading-java-html-parsers\r\n- https://stackoverflow.com/questions/2658922/xss-prevention-in-jsp-servlet-web-application\r\n\r\n  [1]: https://jsoup.org\r\n  [2]: https://jsoup.org/cookbook/cleaning-html/safelist-sanitizer","title":"Remove HTML tags from a String","body":"<p>Use a HTML parser instead of regex. This is dead simple with <a href=\"https://jsoup.org\" rel=\"nofollow noreferrer\">Jsoup</a>.</p>\n<pre><code>public static String html2text(String html) {\n    return Jsoup.parse(html).text();\n}\n</code></pre>\n<p>Jsoup also <a href=\"https://jsoup.org/cookbook/cleaning-html/safelist-sanitizer\" rel=\"nofollow noreferrer\">supports</a> removing HTML tags against a customizable whitelist, which is very useful if you want to allow only e.g. <code>&lt;b&gt;</code>, <code>&lt;i&gt;</code> and <code>&lt;u&gt;</code>.</p>\n<h3>See also:</h3>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454\">RegEx match open tags except XHTML self-contained tags</a></li>\n<li><a href=\"https://stackoverflow.com/questions/3152138/what-are-the-pros-and-cons-of-the-leading-java-html-parsers\">What are the pros and cons of the leading Java HTML parsers?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/2658922/xss-prevention-in-jsp-servlet-web-application\">XSS prevention in JSP/Servlet web application</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":96550,"reputation":4298,"user_id":262376,"accept_rate":44,"display_name":"rjha94"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1281119014,"creation_date":1281119014,"answer_id":3426610,"question_id":240546,"body_markdown":"One more way can be to use com.google.gdata.util.common.html.HtmlToText class \r\nlike \r\n\r\n    MyWriter.toConsole(HtmlToText.htmlToPlainText(htmlResponse));\r\n\r\nThis is not bullet proof code though and when I run it on wikipedia entries I am getting style info also. However I believe for small/simple jobs this would be effective.","title":"Remove HTML tags from a String","body":"<p>One more way can be to use com.google.gdata.util.common.html.HtmlToText class \nlike </p>\n\n<pre><code>MyWriter.toConsole(HtmlToText.htmlToPlainText(htmlResponse));\n</code></pre>\n\n<p>This is not bullet proof code though and when I run it on wikipedia entries I am getting style info also. However I believe for small/simple jobs this would be effective.</p>\n"},{"tags":[],"owner":{"account_id":16164,"reputation":20387,"user_id":34935,"accept_rate":60,"display_name":"dfrankow"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1281655467,"creation_date":1281655467,"answer_id":3472783,"question_id":240546,"body_markdown":"The accepted answer did not work for me for the test case I indicated: the result of &quot;a &lt; b or b &gt; c&quot; is &quot;a b or b &gt; c&quot;.\r\n\r\nSo, I used TagSoup instead.  Here&#39;s a shot that worked for my test case (and a couple of others):\r\n\r\n    import java.io.IOException;\r\n    import java.io.StringReader;\r\n    import java.util.logging.Logger;\r\n\r\n    import org.ccil.cowan.tagsoup.Parser;\r\n    import org.xml.sax.Attributes;\r\n    import org.xml.sax.ContentHandler;\r\n    import org.xml.sax.InputSource;\r\n    import org.xml.sax.Locator;\r\n    import org.xml.sax.SAXException;\r\n    import org.xml.sax.XMLReader;\r\n\r\n    /**\r\n     * Take HTML and give back the text part while dropping the HTML tags.\r\n     *\r\n     * There is some risk that using TagSoup means we&#39;ll permute non-HTML text.\r\n     * However, it seems to work the best so far in test cases.\r\n     *\r\n     * @author dan\r\n     * @see &lt;a href=&quot;http://home.ccil.org/~cowan/XML/tagsoup/&quot;&gt;TagSoup&lt;/a&gt; \r\n     */\r\n    public class Html2Text2 implements ContentHandler {\r\n\tprivate StringBuffer sb;\r\n\r\n\tpublic Html2Text2() {\r\n\t}\r\n\r\n\tpublic void parse(String str) throws IOException, SAXException {\r\n\t    XMLReader reader = new Parser();\r\n\t    reader.setContentHandler(this);\r\n\t    sb = new StringBuffer();\r\n\t    reader.parse(new InputSource(new StringReader(str)));\r\n\t}\r\n\r\n\tpublic String getText() {\r\n\t    return sb.toString();\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void characters(char[] ch, int start, int length)\r\n\t\tthrows SAXException {\r\n\t    for (int idx = 0; idx &lt; length; idx++) {\r\n\t\tsb.append(ch[idx+start]);\r\n\t    }\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void ignorableWhitespace(char[] ch, int start, int length)\r\n\t\tthrows SAXException {\r\n\t    sb.append(ch);\r\n\t}\r\n\r\n\t// The methods below do not contribute to the text\r\n\t@Override\r\n\tpublic void endDocument() throws SAXException {\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void endElement(String uri, String localName, String qName)\r\n\t\tthrows SAXException {\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void endPrefixMapping(String prefix) throws SAXException {\r\n\t}\r\n\r\n\r\n\t@Override\r\n\tpublic void processingInstruction(String target, String data)\r\n\t\tthrows SAXException {\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void setDocumentLocator(Locator locator) {\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void skippedEntity(String name) throws SAXException {\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void startDocument() throws SAXException {\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void startElement(String uri, String localName, String qName,\r\n\t\tAttributes atts) throws SAXException {\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void startPrefixMapping(String prefix, String uri)\r\n\t\tthrows SAXException {\r\n\t}\r\n    }\r\n","title":"Remove HTML tags from a String","body":"<p>The accepted answer did not work for me for the test case I indicated: the result of \"a &lt; b or b > c\" is \"a b or b > c\".</p>\n\n<p>So, I used TagSoup instead.  Here's a shot that worked for my test case (and a couple of others):</p>\n\n<pre><code>import java.io.IOException;\nimport java.io.StringReader;\nimport java.util.logging.Logger;\n\nimport org.ccil.cowan.tagsoup.Parser;\nimport org.xml.sax.Attributes;\nimport org.xml.sax.ContentHandler;\nimport org.xml.sax.InputSource;\nimport org.xml.sax.Locator;\nimport org.xml.sax.SAXException;\nimport org.xml.sax.XMLReader;\n\n/**\n * Take HTML and give back the text part while dropping the HTML tags.\n *\n * There is some risk that using TagSoup means we'll permute non-HTML text.\n * However, it seems to work the best so far in test cases.\n *\n * @author dan\n * @see &lt;a href=\"http://home.ccil.org/~cowan/XML/tagsoup/\"&gt;TagSoup&lt;/a&gt; \n */\npublic class Html2Text2 implements ContentHandler {\nprivate StringBuffer sb;\n\npublic Html2Text2() {\n}\n\npublic void parse(String str) throws IOException, SAXException {\n    XMLReader reader = new Parser();\n    reader.setContentHandler(this);\n    sb = new StringBuffer();\n    reader.parse(new InputSource(new StringReader(str)));\n}\n\npublic String getText() {\n    return sb.toString();\n}\n\n@Override\npublic void characters(char[] ch, int start, int length)\n    throws SAXException {\n    for (int idx = 0; idx &lt; length; idx++) {\n    sb.append(ch[idx+start]);\n    }\n}\n\n@Override\npublic void ignorableWhitespace(char[] ch, int start, int length)\n    throws SAXException {\n    sb.append(ch);\n}\n\n// The methods below do not contribute to the text\n@Override\npublic void endDocument() throws SAXException {\n}\n\n@Override\npublic void endElement(String uri, String localName, String qName)\n    throws SAXException {\n}\n\n@Override\npublic void endPrefixMapping(String prefix) throws SAXException {\n}\n\n\n@Override\npublic void processingInstruction(String target, String data)\n    throws SAXException {\n}\n\n@Override\npublic void setDocumentLocator(Locator locator) {\n}\n\n@Override\npublic void skippedEntity(String name) throws SAXException {\n}\n\n@Override\npublic void startDocument() throws SAXException {\n}\n\n@Override\npublic void startElement(String uri, String localName, String qName,\n    Attributes atts) throws SAXException {\n}\n\n@Override\npublic void startPrefixMapping(String prefix, String uri)\n    throws SAXException {\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":169633,"reputation":523,"user_id":395815,"display_name":"Serge"},"comment_count":0,"down_vote_count":3,"up_vote_count":29,"is_accepted":false,"score":26,"last_activity_date":1288865589,"creation_date":1288865589,"answer_id":4095615,"question_id":240546,"body_markdown":"I think that the simpliest way to filter the html tags is:\r\n\r\n\tprivate static final Pattern REMOVE_TAGS = Pattern.compile(&quot;&lt;.+?&gt;&quot;);\r\n\r\n\tpublic static String removeTags(String string) {\r\n\t\tif (string == null || string.length() == 0) {\r\n\t\t\treturn string;\r\n\t\t}\r\n\r\n\t\tMatcher m = REMOVE_TAGS.matcher(string);\r\n\t\treturn m.replaceAll(&quot;&quot;);\r\n\t}\r\n","title":"Remove HTML tags from a String","body":"<p>I think that the simpliest way to filter the html tags is:</p>\n\n<pre><code>private static final Pattern REMOVE_TAGS = Pattern.compile(\"&lt;.+?&gt;\");\n\npublic static String removeTags(String string) {\n    if (string == null || string.length() == 0) {\n        return string;\n    }\n\n    Matcher m = REMOVE_TAGS.matcher(string);\n    return m.replaceAll(\"\");\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":70730,"reputation":3152,"user_id":204840,"accept_rate":68,"display_name":"cthulhu"},"score":4,"creation_date":1293109740,"post_id":4200787,"comment_id":4948638,"body_markdown":"Two notes. First, this is suboptimal - for each replaceAll call, Java will attempt to compile the first argument as a regex and run through the entire string to apply that regex to the string, processing a few dozen KB for a regular HTML page every time. Second, it&#39;s advised not to use replaceAll to replace simple (non-regex) strings, but instead use replace() (which also replaces all, unlike the name suggests).","body":"Two notes. First, this is suboptimal - for each replaceAll call, Java will attempt to compile the first argument as a regex and run through the entire string to apply that regex to the string, processing a few dozen KB for a regular HTML page every time. Second, it&#39;s advised not to use replaceAll to replace simple (non-regex) strings, but instead use replace() (which also replaces all, unlike the name suggests)."}],"tags":[],"owner":{"account_id":669463,"reputation":19,"user_id":507112,"display_name":"Rizwan"},"comment_count":1,"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1302209840,"creation_date":1289958247,"answer_id":4200787,"question_id":240546,"body_markdown":"you can simply make a method with multiple replaceAll() like\r\n\r\n    String RemoveTag(String html){\r\n       html = html.replaceAll(&quot;\\\\&lt;.*?&gt;&quot;,&quot;&quot;)\r\n       html = html.replaceAll(&quot;&amp;nbsp;&quot;,&quot;&quot;);\r\n       html = html.replaceAll(&quot;&amp;amp;&quot;.&quot;&quot;);\r\n       ----------\r\n       ----------\r\n       return html;\r\n    }\r\n\r\nUse this link for most common replacements you need:\r\nhttp://tunes.org/wiki/html_20special_20characters_20and_20symbols.html\r\n\r\nIt is simple but effective. I use this method first to remove the junk but not the very first line i.e replaceAll(&quot;\\\\&lt;.*?&gt;&quot;,&quot;&quot;), and later i use specific keywords to search for indexes and then use .substring(start, end) method to strip away unnecessary stuff. As this is more robust and you can pin point exactly what you need in the entire html page.\r\n","title":"Remove HTML tags from a String","body":"<p>you can simply make a method with multiple replaceAll() like</p>\n\n<pre><code>String RemoveTag(String html){\n   html = html.replaceAll(\"\\\\&lt;.*?&gt;\",\"\")\n   html = html.replaceAll(\"&amp;nbsp;\",\"\");\n   html = html.replaceAll(\"&amp;amp;\".\"\");\n   ----------\n   ----------\n   return html;\n}\n</code></pre>\n\n<p>Use this link for most common replacements you need:\n<a href=\"http://tunes.org/wiki/html_20special_20characters_20and_20symbols.html\" rel=\"nofollow\">http://tunes.org/wiki/html_20special_20characters_20and_20symbols.html</a></p>\n\n<p>It is simple but effective. I use this method first to remove the junk but not the very first line i.e replaceAll(\"\\&lt;.*?>\",\"\"), and later i use specific keywords to search for indexes and then use .substring(start, end) method to strip away unnecessary stuff. As this is more robust and you can pin point exactly what you need in the entire html page.</p>\n"},{"tags":[],"owner":{"account_id":763234,"reputation":41,"user_id":787614,"display_name":"rqualis"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1307464523,"creation_date":1307456002,"answer_id":6266528,"question_id":240546,"body_markdown":"I know this is old, but I was just working on a project that required me to filter HTML and this worked fine:\r\n\r\n    noHTMLString.replaceAll(&quot;\\\\&amp;.*?\\\\;&quot;, &quot;&quot;);\r\n\r\ninstead of this:\r\n\r\n    html = html.replaceAll(&quot;&amp;nbsp;&quot;,&quot;&quot;);\r\n    html = html.replaceAll(&quot;&amp;amp;&quot;.&quot;&quot;);\r\n\r\n\r\n","title":"Remove HTML tags from a String","body":"<p>I know this is old, but I was just working on a project that required me to filter HTML and this worked fine:</p>\n\n<pre><code>noHTMLString.replaceAll(\"\\\\&amp;.*?\\\\;\", \"\");\n</code></pre>\n\n<p>instead of this:</p>\n\n<pre><code>html = html.replaceAll(\"&amp;nbsp;\",\"\");\nhtml = html.replaceAll(\"&amp;amp;\".\"\");\n</code></pre>\n"},{"comments":[{"owner":{"account_id":402736,"reputation":6281,"user_id":770068,"display_name":"Lorne Laliberte"},"score":12,"creation_date":1331869245,"post_id":6385950,"comment_id":12374692,"body_markdown":"Awesome tip. :) If you&#39;re displaying the text in a TextView, you can drop the .toString() to preserve some formatting, too.","body":"Awesome tip. :) If you&#39;re displaying the text in a TextView, you can drop the .toString() to preserve some formatting, too."},{"owner":{"account_id":932860,"reputation":3053,"user_id":962360,"accept_rate":67,"display_name":"Maverick"},"score":1,"creation_date":1407417082,"post_id":6385950,"comment_id":39212693,"body_markdown":"@Branky It doesn&#39;t I have tried...the accepted answer works like charm","body":"@Branky It doesn&#39;t I have tried...the accepted answer works like charm"},{"owner":{"account_id":1482499,"reputation":3409,"user_id":1391521,"accept_rate":100,"display_name":"Bibaswann Bandyopadhyay"},"score":3,"creation_date":1444838355,"post_id":6385950,"comment_id":54072116,"body_markdown":"This is good, but &lt;img&gt; tags are replaced with some bizarre things. I got small squares where there was an image","body":"This is good, but &lt;img&gt; tags are replaced with some bizarre things. I got small squares where there was an image"},{"owner":{"account_id":1212966,"reputation":1590,"user_id":1181162,"accept_rate":75,"display_name":"Vince"},"score":1,"creation_date":1459009851,"post_id":6385950,"comment_id":60106000,"body_markdown":"@BibaswannBandyopadhyay [another answer helps](http://stackoverflow.com/questions/8560045/android-getting-obj-using-textview-settextcharactersequence) getting rid of these characters","body":"@BibaswannBandyopadhyay <a href=\"http://stackoverflow.com/questions/8560045/android-getting-obj-using-textview-settextcharactersequence\">another answer helps</a> getting rid of these characters"},{"owner":{"account_id":7287634,"reputation":1253,"user_id":5555218,"display_name":"Ricard"},"score":1,"creation_date":1642700921,"post_id":6385950,"comment_id":125147644,"body_markdown":"use package `androidx.core.text` instead of legacy `android.text`","body":"use package <code>androidx.core.text</code> instead of legacy <code>android.text</code>"}],"tags":[],"owner":{"account_id":83411,"reputation":3965,"user_id":233878,"display_name":"Ken Goodridge"},"comment_count":5,"down_vote_count":1,"up_vote_count":303,"is_accepted":false,"score":302,"last_activity_date":1645693870,"creation_date":1308314888,"answer_id":6385950,"question_id":240546,"body_markdown":"If you&#39;re writing for **Android** you can do this...\r\n\r\nandroidx.core.text.HtmlCompat.fromHtml(instruction,HtmlCompat.FROM_HTML_MODE_LEGACY).toString()","title":"Remove HTML tags from a String","body":"<p>If you're writing for <strong>Android</strong> you can do this...</p>\n<p>androidx.core.text.HtmlCompat.fromHtml(instruction,HtmlCompat.FROM_HTML_MODE_LEGACY).toString()</p>\n"},{"comments":[{"owner":{"account_id":8869,"reputation":5508,"user_id":16152,"accept_rate":81,"display_name":"homaxto"},"score":4,"creation_date":1314197397,"post_id":6962693,"comment_id":8615958,"body_markdown":"Jericho was able to parse &lt;br&gt; to a line break. Jsoup and HTMLEditorKit could not do that.","body":"Jericho was able to parse &lt;br&gt; to a line break. Jsoup and HTMLEditorKit could not do that."},{"owner":{"account_id":212661,"reputation":3449,"user_id":465620,"accept_rate":50,"display_name":"Jerry Tian"},"score":0,"creation_date":1337823602,"post_id":6962693,"comment_id":13938720,"body_markdown":"Jericho is very capable of doing this job, used it a lot in owned projects.","body":"Jericho is very capable of doing this job, used it a lot in owned projects."},{"owner":{"account_id":1098963,"reputation":1214,"user_id":1091864,"display_name":"MrPlow"},"score":3,"creation_date":1441226150,"post_id":6962693,"comment_id":52597985,"body_markdown":"Jericho worked like a charm.  Thanks for the suggestion.  One note: you don&#39;t have to create a Segment of the whole string.  Source extends Segment, so either works in the Renderer constructor.","body":"Jericho worked like a charm.  Thanks for the suggestion.  One note: you don&#39;t have to create a Segment of the whole string.  Source extends Segment, so either works in the Renderer constructor."},{"owner":{"account_id":186168,"reputation":1411,"user_id":423351,"display_name":"Jonathan Hult"},"score":0,"creation_date":1507839741,"post_id":6962693,"comment_id":80382820,"body_markdown":"Jerico now seems to be a bit dated ( the last release was 3.4 in late 2015). However, if it still works well, then it still works well!","body":"Jerico now seems to be a bit dated ( the last release was 3.4 in late 2015). However, if it still works well, then it still works well!"}],"tags":[],"owner":{"account_id":791961,"reputation":199,"user_id":881338,"display_name":"Josh"},"comment_count":4,"down_vote_count":1,"up_vote_count":20,"is_accepted":false,"score":19,"last_activity_date":1404144826,"creation_date":1312578709,"answer_id":6962693,"question_id":240546,"body_markdown":"Also very simple using [Jericho][1], and you can retain some of the formatting (line breaks and links, for example).\r\n\r\n        Source htmlSource = new Source(htmlText);\r\n        Segment htmlSeg = new Segment(htmlSource, 0, htmlSource.length());\r\n        Renderer htmlRend = new Renderer(htmlSeg);\r\n        System.out.println(htmlRend.toString());\r\n\r\n\r\n  [1]: http://jericho.htmlparser.net/docs/index.html","title":"Remove HTML tags from a String","body":"<p>Also very simple using <a href=\"http://jericho.htmlparser.net/docs/index.html\" rel=\"noreferrer\">Jericho</a>, and you can retain some of the formatting (line breaks and links, for example).</p>\n\n<pre><code>    Source htmlSource = new Source(htmlText);\n    Segment htmlSeg = new Segment(htmlSource, 0, htmlSource.length());\n    Renderer htmlRend = new Renderer(htmlSeg);\n    System.out.println(htmlRend.toString());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":358141,"reputation":73,"user_id":698723,"display_name":"Alexander"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1328203620,"creation_date":1312900815,"answer_id":6997978,"question_id":240546,"body_markdown":"My 5 cents:\r\n\r\n    String[] temp = yourString.split(&quot;&amp;amp;&quot;);\r\n    String tmp = &quot;&quot;;\r\n    if (temp.length &gt; 1) {\r\n    \r\n    \tfor (int i = 0; i &lt; temp.length; i++) {\r\n    \t\ttmp += temp[i] + &quot;&amp;&quot;;\r\n    \t}\r\n    \tyourString = tmp.substring(0, tmp.length() - 1);\r\n    }\r\n\r\n","title":"Remove HTML tags from a String","body":"<p>My 5 cents:</p>\n\n<pre><code>String[] temp = yourString.split(\"&amp;amp;\");\nString tmp = \"\";\nif (temp.length &gt; 1) {\n\n    for (int i = 0; i &lt; temp.length; i++) {\n        tmp += temp[i] + \"&amp;\";\n    }\n    yourString = tmp.substring(0, tmp.length() - 1);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1248234,"reputation":1692,"user_id":1209230,"accept_rate":50,"display_name":"Hossein Shahdoost"},"score":0,"creation_date":1366544992,"post_id":7784001,"comment_id":23041956,"body_markdown":"Or you can just say, \nif(input.indexOf(&quot;&lt;&quot;) &gt; 0 || input.indexOf(&quot;&gt;&quot;) &gt; 0) return &quot;&quot;; else return input;","body":"Or you can just say,  if(input.indexOf(&quot;&lt;&quot;) &gt; 0 || input.indexOf(&quot;&gt;&quot;) &gt; 0) return &quot;&quot;; else return input;"}],"tags":[],"owner":{"account_id":907102,"reputation":339,"user_id":941748,"accept_rate":60,"display_name":"blackStar"},"comment_count":1,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1328203731,"creation_date":1318765078,"answer_id":7784001,"question_id":240546,"body_markdown":"Here is another way to do it:\r\n\r\n    public static String removeHTML(String input) {\r\n    \tint i = 0;\r\n    \tString[] str = input.split(&quot;&quot;);\r\n    \r\n    \tString s = &quot;&quot;;\r\n    \tboolean inTag = false;\r\n    \r\n    \tfor (i = input.indexOf(&quot;&lt;&quot;); i &lt; input.indexOf(&quot;&gt;&quot;); i++) {\r\n    \t\tinTag = true;\r\n    \t}\r\n    \tif (!inTag) {\r\n    \t\tfor (i = 0; i &lt; str.length; i++) {\r\n    \t\t\ts = s + str[i];\r\n    \t\t}\r\n    \t}\r\n    \treturn s;\r\n    }","title":"Remove HTML tags from a String","body":"<p>Here is another way to do it:</p>\n\n<pre><code>public static String removeHTML(String input) {\n    int i = 0;\n    String[] str = input.split(\"\");\n\n    String s = \"\";\n    boolean inTag = false;\n\n    for (i = input.indexOf(\"&lt;\"); i &lt; input.indexOf(\"&gt;\"); i++) {\n        inTag = true;\n    }\n    if (!inTag) {\n        for (i = 0; i &lt; str.length; i++) {\n            s = s + str[i];\n        }\n    }\n    return s;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2338104,"reputation":9101,"user_id":2049986,"accept_rate":89,"display_name":"Jacob van Lingen"},"score":1,"creation_date":1435741555,"post_id":12259801,"comment_id":50322807,"body_markdown":"Note that the parse method is deprecated in favor of `Parse.parse(InputStream, ContentHandler, Metadata, ParseContext)`.","body":"Note that the parse method is deprecated in favor of <code>Parse.parse(InputStream, ContentHandler, Metadata, ParseContext)</code>."}],"tags":[],"owner":{"account_id":182532,"reputation":2344,"user_id":417297,"accept_rate":75,"display_name":"Maksim Sorokin"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1346748178,"creation_date":1346748178,"answer_id":12259801,"question_id":240546,"body_markdown":"One could also use [Apache Tika][1] for this purpose. By default it preserves whitespaces from the stripped html, which may be desired in certain situations:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    InputStream htmlInputStream = ..\r\n    HtmlParser htmlParser = new HtmlParser();\r\n    HtmlContentHandler htmlContentHandler = new HtmlContentHandler();\r\n    htmlParser.parse(htmlInputStream, htmlContentHandler, new Metadata())\r\n    System.out.println(htmlContentHandler.getBodyText().trim())\r\n\r\n  [1]: http://tika.apache.org/","title":"Remove HTML tags from a String","body":"<p>One could also use <a href=\"http://tika.apache.org/\" rel=\"nofollow\">Apache Tika</a> for this purpose. By default it preserves whitespaces from the stripped html, which may be desired in certain situations:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>InputStream htmlInputStream = ..\nHtmlParser htmlParser = new HtmlParser();\nHtmlContentHandler htmlContentHandler = new HtmlContentHandler();\nhtmlParser.parse(htmlInputStream, htmlContentHandler, new Metadata())\nSystem.out.println(htmlContentHandler.getBodyText().trim())\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1975336,"reputation":5011,"user_id":1773233,"accept_rate":58,"display_name":"surfealokesea"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1366909344,"creation_date":1366909033,"answer_id":16220579,"question_id":240546,"body_markdown":"To get **formateed plain html text** you can do that:\r\n\r\n    String BR_ESCAPED = &quot;&amp;lt;br/&amp;gt;&quot;;\r\n    Element el=Jsoup.parse(html).select(&quot;body&quot;);\r\n    el.select(&quot;br&quot;).append(BR_ESCAPED);\r\n    el.select(&quot;p&quot;).append(BR_ESCAPED+BR_ESCAPED);\r\n    el.select(&quot;h1&quot;).append(BR_ESCAPED+BR_ESCAPED);\r\n    el.select(&quot;h2&quot;).append(BR_ESCAPED+BR_ESCAPED);\r\n    el.select(&quot;h3&quot;).append(BR_ESCAPED+BR_ESCAPED);\r\n    el.select(&quot;h4&quot;).append(BR_ESCAPED+BR_ESCAPED);\r\n    el.select(&quot;h5&quot;).append(BR_ESCAPED+BR_ESCAPED);\r\n    String nodeValue=el.text();\r\n    nodeValue=nodeValue.replaceAll(BR_ESCAPED, &quot;&lt;br/&gt;&quot;);\r\n    nodeValue=nodeValue.replaceAll(&quot;(\\\\s*&lt;br[^&gt;]*&gt;){3,}&quot;, &quot;&lt;br/&gt;&lt;br/&gt;&quot;);\r\n\r\n\r\nTo get **formateed plain text** change &amp;lt;br/&amp;gt; by \\n and change last line by:\r\n\r\n    nodeValue=nodeValue.replaceAll(&quot;(\\\\s*\\n){3,}&quot;, &quot;&lt;br/&gt;&lt;br/&gt;&quot;);\r\n\r\n","title":"Remove HTML tags from a String","body":"<p>To get <strong>formateed plain html text</strong> you can do that:</p>\n\n<pre><code>String BR_ESCAPED = \"&amp;lt;br/&amp;gt;\";\nElement el=Jsoup.parse(html).select(\"body\");\nel.select(\"br\").append(BR_ESCAPED);\nel.select(\"p\").append(BR_ESCAPED+BR_ESCAPED);\nel.select(\"h1\").append(BR_ESCAPED+BR_ESCAPED);\nel.select(\"h2\").append(BR_ESCAPED+BR_ESCAPED);\nel.select(\"h3\").append(BR_ESCAPED+BR_ESCAPED);\nel.select(\"h4\").append(BR_ESCAPED+BR_ESCAPED);\nel.select(\"h5\").append(BR_ESCAPED+BR_ESCAPED);\nString nodeValue=el.text();\nnodeValue=nodeValue.replaceAll(BR_ESCAPED, \"&lt;br/&gt;\");\nnodeValue=nodeValue.replaceAll(\"(\\\\s*&lt;br[^&gt;]*&gt;){3,}\", \"&lt;br/&gt;&lt;br/&gt;\");\n</code></pre>\n\n<p>To get <strong>formateed plain text</strong> change &lt;br/&gt; by \\n and change last line by:</p>\n\n<pre><code>nodeValue=nodeValue.replaceAll(\"(\\\\s*\\n){3,}\", \"&lt;br/&gt;&lt;br/&gt;\");\n</code></pre>\n"},{"comments":[{"owner":{"account_id":186168,"reputation":1411,"user_id":423351,"display_name":"Jonathan Hult"},"score":2,"creation_date":1507839764,"post_id":21838532,"comment_id":80382836,"body_markdown":"HtmlCleaner works well, keeps line breaks and has a recent release (2.21 in May 2017).","body":"HtmlCleaner works well, keeps line breaks and has a recent release (2.21 in May 2017)."}],"tags":[],"owner":{"account_id":150404,"reputation":42109,"user_id":363573,"accept_rate":97,"display_name":"Stephan"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1392668388,"creation_date":1392668388,"answer_id":21838532,"question_id":240546,"body_markdown":"Alternatively, one can use [HtmlCleaner][1]:\r\n\r\n\r\n    private CharSequence removeHtmlFrom(String html) {\r\n        return new HtmlCleaner().clean(html).getText();\r\n    }\r\n\r\n  [1]: http://htmlcleaner.sourceforge.net/index.php","title":"Remove HTML tags from a String","body":"<p>Alternatively, one can use <a href=\"http://htmlcleaner.sourceforge.net/index.php\" rel=\"noreferrer\">HtmlCleaner</a>:</p>\n\n<pre><code>private CharSequence removeHtmlFrom(String html) {\n    return new HtmlCleaner().clean(html).getText();\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":890308,"reputation":47359,"user_id":928711,"accept_rate":60,"display_name":"Guillaume Polet"},"score":2,"creation_date":1424944783,"post_id":23622675,"comment_id":45762264,"body_markdown":"This will fail against something like `&amp;#38;lt;script&amp;#38;gt;alert(&#39;Evil script executed&#39;);&amp;#38;lt;/script&amp;#38;gt;`. Same goes for `&amp;#x26;`. JSoup does not convert `&amp;lt;script&amp;gt; into &lt;script&gt;`, it does that because you call `StringEscapeUtils.unescapeHtml` after JSoup cleaned up the input.","body":"This will fail against something like <code>&amp;#38;lt;script&amp;#38;gt;alert(&#39;Evil script executed&#39;);&amp;#38;lt;&#47;script&amp;#38;gt;</code>. Same goes for <code>&amp;#x26;</code>. JSoup does not convert <code>&amp;lt;script&amp;gt; into &lt;script&gt;</code>, it does that because you call <code>StringEscapeUtils.unescapeHtml</code> after JSoup cleaned up the input."}],"tags":[],"owner":{"account_id":100972,"reputation":2254,"user_id":271887,"accept_rate":88,"display_name":"Damien"},"comment_count":1,"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1452247185,"creation_date":1399954355,"answer_id":23622675,"question_id":240546,"body_markdown":"The accepted answer of doing simply `Jsoup.parse(html).text()` has 2 potential issues (with JSoup 1.7.3):\r\n\r\n - It removes line breaks from the text\r\n - It converts text `&amp;lt;script&amp;gt;` into `&lt;script&gt;`\r\n\r\nIf you use this to protect against XSS, this is a bit annoying. Here is my best shot at an improved solution, using both JSoup and Apache StringEscapeUtils:\r\n\r\n    // breaks multi-level of escaping, preventing &amp;amp;lt;script&amp;amp;gt; to be rendered as &lt;script&gt;\r\n    String replace = input.replace(&quot;&amp;amp;&quot;, &quot;&quot;);\r\n    // decode any encoded html, preventing &amp;lt;script&amp;gt; to be rendered as &lt;script&gt;\r\n    String html = StringEscapeUtils.unescapeHtml(replace);\r\n    // remove all html tags, but maintain line breaks\r\n    String clean = Jsoup.clean(html, &quot;&quot;, Whitelist.none(), new Document.OutputSettings().prettyPrint(false));\r\n    // decode html again to convert character entities back into text\r\n    return StringEscapeUtils.unescapeHtml(clean);\r\n\r\nNote that the last step is because I need to use the output as plain text. If you need only HTML output then you should be able to remove it.\r\n\r\nAnd here is a bunch of test cases (input to output):\r\n\r\n    {&quot;regular string&quot;, &quot;regular string&quot;},\r\n    {&quot;&lt;a href=\\&quot;link\\&quot;&gt;A link&lt;/a&gt;&quot;, &quot;A link&quot;},\r\n    {&quot;&lt;script src=\\&quot;http://evil.url.com\\&quot;/&gt;&quot;, &quot;&quot;},\r\n    {&quot;&amp;lt;script&amp;gt;&quot;, &quot;&quot;},\r\n    {&quot;&amp;amp;lt;script&amp;amp;gt;&quot;, &quot;lt;scriptgt;&quot;}, // best effort\r\n    {&quot;\\&quot; &#39; &gt; &lt; \\n \\\\ &#233; &#229; &#224; &#252; and &amp; preserved&quot;, &quot;\\&quot; &#39; &gt; &lt; \\n \\\\ &#233; &#229; &#224; &#252; and &amp; preserved&quot;}\r\n\r\nIf you find a way to make it better, please let me know.\r\n\r\n\r\n\r\n","title":"Remove HTML tags from a String","body":"<p>The accepted answer of doing simply <code>Jsoup.parse(html).text()</code> has 2 potential issues (with JSoup 1.7.3):</p>\n\n<ul>\n<li>It removes line breaks from the text</li>\n<li>It converts text <code>&amp;lt;script&amp;gt;</code> into <code>&lt;script&gt;</code></li>\n</ul>\n\n<p>If you use this to protect against XSS, this is a bit annoying. Here is my best shot at an improved solution, using both JSoup and Apache StringEscapeUtils:</p>\n\n<pre><code>// breaks multi-level of escaping, preventing &amp;amp;lt;script&amp;amp;gt; to be rendered as &lt;script&gt;\nString replace = input.replace(\"&amp;amp;\", \"\");\n// decode any encoded html, preventing &amp;lt;script&amp;gt; to be rendered as &lt;script&gt;\nString html = StringEscapeUtils.unescapeHtml(replace);\n// remove all html tags, but maintain line breaks\nString clean = Jsoup.clean(html, \"\", Whitelist.none(), new Document.OutputSettings().prettyPrint(false));\n// decode html again to convert character entities back into text\nreturn StringEscapeUtils.unescapeHtml(clean);\n</code></pre>\n\n<p>Note that the last step is because I need to use the output as plain text. If you need only HTML output then you should be able to remove it.</p>\n\n<p>And here is a bunch of test cases (input to output):</p>\n\n<pre><code>{\"regular string\", \"regular string\"},\n{\"&lt;a href=\\\"link\\\"&gt;A link&lt;/a&gt;\", \"A link\"},\n{\"&lt;script src=\\\"http://evil.url.com\\\"/&gt;\", \"\"},\n{\"&amp;lt;script&amp;gt;\", \"\"},\n{\"&amp;amp;lt;script&amp;amp;gt;\", \"lt;scriptgt;\"}, // best effort\n{\"\\\" ' &gt; &lt; \\n \\\\ é å à ü and &amp; preserved\", \"\\\" ' &gt; &lt; \\n \\\\ é å à ü and &amp; preserved\"}\n</code></pre>\n\n<p>If you find a way to make it better, please let me know.</p>\n"},{"comments":[{"owner":{"account_id":333028,"reputation":5096,"user_id":658663,"accept_rate":80,"display_name":"beresfordt"},"score":0,"creation_date":1434465703,"post_id":25648860,"comment_id":49783176,"body_markdown":"Where do you get `new System.Text.RegularExpressions.Regex();` from?","body":"Where do you get <code>new System.Text.RegularExpressions.Regex();</code> from?"},{"owner":{"account_id":133678,"reputation":5377,"user_id":335227,"accept_rate":88,"display_name":"Erin Drummond"},"score":1,"creation_date":1438892743,"post_id":25648860,"comment_id":51649431,"body_markdown":"@beresfordt this response applies to .NET, not Java like was requested in the question","body":"@beresfordt this response applies to .NET, not Java like was requested in the question"}],"tags":[],"owner":{"account_id":3510552,"reputation":7,"user_id":2934974,"display_name":"Satya Prakash"},"comment_count":2,"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1409760138,"creation_date":1409760138,"answer_id":25648860,"question_id":240546,"body_markdown":"Remove HTML tags from string. Somewhere we need to parse some string which is received by some responses like Httpresponse from the server.\r\n\r\n \r\n\r\nSo we need to parse it.\r\n\r\n \r\n\r\nHere I will show how to remove html tags from string.\r\n\r\n        // sample text with tags\r\n\r\n        string str = &quot;&lt;html&gt;&lt;head&gt;sdfkashf sdf&lt;/head&gt;&lt;body&gt;sdfasdf&lt;/body&gt;&lt;/html&gt;&quot;;\r\n\r\n \r\n\r\n        // regex which match tags\r\n\r\n        System.Text.RegularExpressions.Regex rx = new System.Text.RegularExpressions.Regex(&quot;&lt;[^&gt;]*&gt;&quot;);\r\n\r\n \r\n\r\n        // replace all matches with empty strin\r\n\r\n        str = rx.Replace(str, &quot;&quot;);\r\n\r\n \r\n\r\n        //now str contains string without html tags","title":"Remove HTML tags from a String","body":"<p>Remove HTML tags from string. Somewhere we need to parse some string which is received by some responses like Httpresponse from the server.</p>\n\n<p>So we need to parse it.</p>\n\n<p>Here I will show how to remove html tags from string.</p>\n\n<pre><code>    // sample text with tags\n\n    string str = \"&lt;html&gt;&lt;head&gt;sdfkashf sdf&lt;/head&gt;&lt;body&gt;sdfasdf&lt;/body&gt;&lt;/html&gt;\";\n\n\n\n    // regex which match tags\n\n    System.Text.RegularExpressions.Regex rx = new System.Text.RegularExpressions.Regex(\"&lt;[^&gt;]*&gt;\");\n\n\n\n    // replace all matches with empty strin\n\n    str = rx.Replace(str, \"\");\n\n\n\n    //now str contains string without html tags\n</code></pre>\n"},{"comments":[{"owner":{"account_id":457790,"reputation":753,"user_id":857303,"display_name":"DritanX"},"score":0,"creation_date":1431722007,"post_id":30022636,"comment_id":48636294,"body_markdown":"This did it! it removed all inline html from text :)","body":"This did it! it removed all inline html from text :)"},{"owner":{"account_id":2674098,"reputation":49601,"user_id":2310866,"display_name":"Xaver Kapeller"},"score":1,"creation_date":1432217369,"post_id":30022636,"comment_id":48841977,"body_markdown":"You are always using code snippets for normal code. Code Snippets are only supposed to be used for HTML or javascript or other code which can be run in the browser. You cannot run Java in the browser. Use normal code blocks in the future... I will edit your answer for you this time and fix the formatting etc, but please don&#39;t do this anymore in the future. This isn&#39;t the first time I told you about this...","body":"You are always using code snippets for normal code. Code Snippets are only supposed to be used for HTML or javascript or other code which can be run in the browser. You cannot run Java in the browser. Use normal code blocks in the future... I will edit your answer for you this time and fix the formatting etc, but please don&#39;t do this anymore in the future. This isn&#39;t the first time I told you about this..."},{"owner":{"account_id":10135,"reputation":14548,"user_id":18995,"accept_rate":81,"display_name":"Paul Croarkin"},"score":0,"creation_date":1434479998,"post_id":30022636,"comment_id":49792463,"body_markdown":"What library is this coming from?","body":"What library is this coming from?"},{"owner":{"account_id":4744455,"reputation":2719,"user_id":3836137,"accept_rate":40,"display_name":"Ameen Maheen"},"score":1,"creation_date":1434517675,"post_id":30022636,"comment_id":49806060,"body_markdown":"@PaulCroarkin this is the library inside android sdk . android.text.Html","body":"@PaulCroarkin this is the library inside android sdk . android.text.Html"},{"owner":{"account_id":2908494,"reputation":537,"user_id":2493261,"display_name":"Rui Santos"},"score":0,"creation_date":1436355761,"post_id":30022636,"comment_id":50574080,"body_markdown":"But this is adding plenty of white spaces or new lines to the end of my string. Not cool.","body":"But this is adding plenty of white spaces or new lines to the end of my string. Not cool."},{"owner":{"account_id":4744455,"reputation":2719,"user_id":3836137,"accept_rate":40,"display_name":"Ameen Maheen"},"score":0,"creation_date":1436433880,"post_id":30022636,"comment_id":50614504,"body_markdown":"works fine for me man, may be you should check your input, like does it comes with any white space like that..","body":"works fine for me man, may be you should check your input, like does it comes with any white space like that.."},{"owner":{"account_id":3787296,"reputation":4100,"user_id":3144836,"accept_rate":100,"display_name":"user3144836"},"score":2,"creation_date":1438564969,"post_id":30022636,"comment_id":51486605,"body_markdown":"Awesome. Removed all html tags.","body":"Awesome. Removed all html tags."},{"owner":{"account_id":83411,"reputation":3965,"user_id":233878,"display_name":"Ken Goodridge"},"score":2,"creation_date":1458073679,"post_id":30022636,"comment_id":59694245,"body_markdown":"looks familiar, like my answer from 2011.","body":"looks familiar, like my answer from 2011."},{"owner":{"account_id":3775053,"reputation":427,"user_id":3136105,"accept_rate":95,"display_name":"nathandrake"},"score":1,"creation_date":1459452185,"post_id":30022636,"comment_id":60305812,"body_markdown":"that removed another headache from my plate :)","body":"that removed another headache from my plate :)"},{"owner":{"account_id":11529381,"reputation":145,"user_id":8448783,"display_name":"Omer123"},"score":0,"creation_date":1679612899,"post_id":30022636,"comment_id":133757581,"body_markdown":"Helped a lot. This works for me. Thank you.","body":"Helped a lot. This works for me. Thank you."}],"tags":[],"owner":{"account_id":4744455,"reputation":2719,"user_id":3836137,"accept_rate":40,"display_name":"Ameen Maheen"},"comment_count":10,"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1435256623,"creation_date":1430713770,"answer_id":30022636,"question_id":240546,"body_markdown":"On Android, try this:\r\n\r\n    String result = Html.fromHtml(html).toString();\r\n\r\n","title":"Remove HTML tags from a String","body":"<p>On Android, try this:</p>\n\n<pre><code>String result = Html.fromHtml(html).toString();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6903394,"reputation":11,"user_id":5302242,"display_name":"RobMen"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1441400020,"creation_date":1441400020,"answer_id":32406442,"question_id":240546,"body_markdown":"One way to retain new-line info with JSoup is to precede all new line tags with some dummy string, execute JSoup and replace dummy string with &quot;\\n&quot;.\r\n\r\n    String html = &quot;&lt;p&gt;Line one&lt;/p&gt;&lt;p&gt;Line two&lt;/p&gt;Line three&lt;br/&gt;etc.&quot;;\r\n    String NEW_LINE_MARK = &quot;NEWLINESTART1234567890NEWLINEEND&quot;;\r\n    for (String tag: new String[]{&quot;&lt;/p&gt;&quot;,&quot;&lt;br/&gt;&quot;,&quot;&lt;/h1&gt;&quot;,&quot;&lt;/h2&gt;&quot;,&quot;&lt;/h3&gt;&quot;,&quot;&lt;/h4&gt;&quot;,&quot;&lt;/h5&gt;&quot;,&quot;&lt;/h6&gt;&quot;,&quot;&lt;/li&gt;&quot;}) {\r\n        html = html.replace(tag, NEW_LINE_MARK+tag);\r\n    }\r\n    \t\t\r\n    String text = Jsoup.parse(html).text();\r\n    \t\t\r\n    text = text.replace(NEW_LINE_MARK + &quot; &quot;, &quot;\\n\\n&quot;);\r\n    text = text.replace(NEW_LINE_MARK, &quot;\\n\\n&quot;);\r\n","title":"Remove HTML tags from a String","body":"<p>One way to retain new-line info with JSoup is to precede all new line tags with some dummy string, execute JSoup and replace dummy string with \"\\n\".</p>\n\n<pre><code>String html = \"&lt;p&gt;Line one&lt;/p&gt;&lt;p&gt;Line two&lt;/p&gt;Line three&lt;br/&gt;etc.\";\nString NEW_LINE_MARK = \"NEWLINESTART1234567890NEWLINEEND\";\nfor (String tag: new String[]{\"&lt;/p&gt;\",\"&lt;br/&gt;\",\"&lt;/h1&gt;\",\"&lt;/h2&gt;\",\"&lt;/h3&gt;\",\"&lt;/h4&gt;\",\"&lt;/h5&gt;\",\"&lt;/h6&gt;\",\"&lt;/li&gt;\"}) {\n    html = html.replace(tag, NEW_LINE_MARK+tag);\n}\n\nString text = Jsoup.parse(html).text();\n\ntext = text.replace(NEW_LINE_MARK + \" \", \"\\n\\n\");\ntext = text.replace(NEW_LINE_MARK, \"\\n\\n\");\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1262314,"reputation":1792,"user_id":1220282,"accept_rate":80,"display_name":"davidbates"},"score":1,"creation_date":1459311466,"post_id":33870804,"comment_id":60223443,"body_markdown":"No extra utilities and aligns with Android Docs. +1","body":"No extra utilities and aligns with Android Docs. +1"}],"tags":[],"owner":{"account_id":4129207,"reputation":75209,"user_id":3395198,"accept_rate":54,"display_name":"IntelliJ Amiya"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1448280680,"creation_date":1448280680,"answer_id":33870804,"question_id":240546,"body_markdown":"Use **`Html.fromHtml`**\r\n\r\n***HTML*** Tags are\r\n\r\n    &lt;a href=”…”&gt; &lt;b&gt;,  &lt;big&gt;, &lt;blockquote&gt;, &lt;br&gt;, &lt;cite&gt;, &lt;dfn&gt;\r\n    &lt;div align=”…”&gt;,  &lt;em&gt;, &lt;font size=”…” color=”…” face=”…”&gt;\r\n    &lt;h1&gt;,  &lt;h2&gt;, &lt;h3&gt;, &lt;h4&gt;,  &lt;h5&gt;, &lt;h6&gt;\r\n    &lt;i&gt;, &lt;p&gt;, &lt;small&gt;\r\n    &lt;strike&gt;,  &lt;strong&gt;, &lt;sub&gt;, &lt;sup&gt;, &lt;tt&gt;, &lt;u&gt;\r\n\r\nAs per **[Android’s official Documentations][1]** any  tags in the **HTML** will display as a generic replacement **String** which your program can then go through and replace with real ***strings***.\r\n\r\n**`Html.formHtml`** method takes an **`Html.TagHandler`** and an Html.ImageGetter as arguments as well as the text to parse.\r\n\r\nExample\r\n-------\r\n\r\n    String Str_Html=&quot; &lt;p&gt;This is about me text that the user can put into their profile&lt;/p&gt; &quot;;\r\n\r\nThen\r\n\r\n    Your_TextView_Obj.setText(Html.fromHtml(Str_Html).toString());\r\n\r\nOutput\r\n\r\n**This is about me text that the user can put into their profile**\r\n\r\n\r\n\r\n\r\n  [1]: http://developer.android.com/intl/es/reference/android/text/Html.html","title":"Remove HTML tags from a String","body":"<p>Use <strong><code>Html.fromHtml</code></strong></p>\n\n<p><strong><em>HTML</em></strong> Tags are</p>\n\n<pre><code>&lt;a href=”…”&gt; &lt;b&gt;,  &lt;big&gt;, &lt;blockquote&gt;, &lt;br&gt;, &lt;cite&gt;, &lt;dfn&gt;\n&lt;div align=”…”&gt;,  &lt;em&gt;, &lt;font size=”…” color=”…” face=”…”&gt;\n&lt;h1&gt;,  &lt;h2&gt;, &lt;h3&gt;, &lt;h4&gt;,  &lt;h5&gt;, &lt;h6&gt;\n&lt;i&gt;, &lt;p&gt;, &lt;small&gt;\n&lt;strike&gt;,  &lt;strong&gt;, &lt;sub&gt;, &lt;sup&gt;, &lt;tt&gt;, &lt;u&gt;\n</code></pre>\n\n<p>As per <strong><a href=\"http://developer.android.com/intl/es/reference/android/text/Html.html\" rel=\"noreferrer\">Android’s official Documentations</a></strong> any  tags in the <strong>HTML</strong> will display as a generic replacement <strong>String</strong> which your program can then go through and replace with real <strong><em>strings</em></strong>.</p>\n\n<p><strong><code>Html.formHtml</code></strong> method takes an <strong><code>Html.TagHandler</code></strong> and an Html.ImageGetter as arguments as well as the text to parse.</p>\n\n<h2>Example</h2>\n\n<pre><code>String Str_Html=\" &lt;p&gt;This is about me text that the user can put into their profile&lt;/p&gt; \";\n</code></pre>\n\n<p>Then</p>\n\n<pre><code>Your_TextView_Obj.setText(Html.fromHtml(Str_Html).toString());\n</code></pre>\n\n<p>Output</p>\n\n<p><strong>This is about me text that the user can put into their profile</strong></p>\n"},{"comments":[{"owner":{"account_id":3689022,"reputation":1655,"user_id":3072101,"accept_rate":79,"display_name":"Peter"},"score":1,"creation_date":1498823243,"post_id":44845644,"comment_id":76671522,"body_markdown":"Generally, answers are much more useful if they include an explanation of what the \ncode is intended to do.","body":"Generally, answers are much more useful if they include an explanation of what the  code is intended to do."},{"owner":{"account_id":3260426,"reputation":11579,"user_id":2746110,"accept_rate":67,"display_name":"Arefe"},"score":0,"creation_date":1662430464,"post_id":44845644,"comment_id":129997977,"body_markdown":"@Sandeep1699 No explanation of the answer at all? Not good.","body":"@Sandeep1699 No explanation of the answer at all? Not good."}],"tags":[],"owner":{"account_id":11227979,"reputation":121,"user_id":8237054,"display_name":"Sandeep1699"},"comment_count":2,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1498881448,"creation_date":1498822971,"answer_id":44845644,"question_id":240546,"body_markdown":"This should work - \r\n\r\nuse this\r\n    \r\n      text.replaceAll(&#39;&lt;.*?&gt;&#39; , &quot; &quot;) -&gt; This will replace all the html tags with a space.\r\n\r\nand this\r\n    \r\n      text.replaceAll(&#39;&amp;.*?;&#39; , &quot;&quot;)-&gt; this will replace all the tags which starts with &quot;&amp;&quot; and ends with &quot;;&quot; like &amp;nbsp;, &amp;amp;, &amp;gt; etc.\r\n\r\n","title":"Remove HTML tags from a String","body":"<p>This should work - </p>\n\n<p>use this</p>\n\n<pre><code>  text.replaceAll('&lt;.*?&gt;' , \" \") -&gt; This will replace all the html tags with a space.\n</code></pre>\n\n<p>and this</p>\n\n<pre><code>  text.replaceAll('&amp;.*?;' , \"\")-&gt; this will replace all the tags which starts with \"&amp;\" and ends with \";\" like &amp;nbsp;, &amp;amp;, &amp;gt; etc.\n</code></pre>\n"},{"comments":[{"owner":{"account_id":6062499,"reputation":1290,"user_id":4733879,"display_name":"Filnor"},"score":3,"creation_date":1516969777,"post_id":48461365,"comment_id":83915554,"body_markdown":"While this code snippet may solve the question, [including an explanation](//meta.stackexchange.com/questions/114762/explaining-entirely-code-based-answers) really helps to improve the quality of your post. Remember that you are answering the question for readers in the future, and those people might not know the reasons for your code suggestion. Please also try not to crowd your code with explanatory comments, this reduces the readability of both the code and the explanations!","body":"While this code snippet may solve the question, <a href=\"//meta.stackexchange.com/questions/114762/explaining-entirely-code-based-answers\">including an explanation</a> really helps to improve the quality of your post. Remember that you are answering the question for readers in the future, and those people might not know the reasons for your code suggestion. Please also try not to crowd your code with explanatory comments, this reduces the readability of both the code and the explanations!"}],"tags":[],"owner":{"account_id":10247066,"reputation":121,"user_id":8115060,"display_name":"Guilherme Oliveira"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1562003041,"creation_date":1516969646,"answer_id":48461365,"question_id":240546,"body_markdown":"    classeString.replaceAll(&quot;\\\\&lt;(/?[^\\\\&gt;]+)\\\\&gt;&quot;, &quot;\\\\ &quot;).replaceAll(&quot;\\\\s+&quot;, &quot; &quot;).trim() ","title":"Remove HTML tags from a String","body":"<pre><code>classeString.replaceAll(\"\\\\&lt;(/?[^\\\\&gt;]+)\\\\&gt;\", \"\\\\ \").replaceAll(\"\\\\s+\", \" \").trim() \n</code></pre>\n"},{"comments":[{"owner":{"account_id":7125787,"reputation":771,"user_id":5448746,"display_name":"Ondřej Stašek"},"score":1,"creation_date":1564572030,"post_id":50942752,"comment_id":101073667,"body_markdown":"I improved it a bit:\n{code}\n.replaceAll(&quot;(&lt;.*?&gt;)|(&amp;.*?;)&quot;, &quot; &quot;).replaceAll(&quot;\\\\s{2,}&quot;, &quot; &quot;)\n{code}\nBecause often those tags are just next to text. And after removing tags change all 2 and more writespaces to just 1.","body":"I improved it a bit: {code} .replaceAll(&quot;(&lt;.*?&gt;)|(&amp;.*?;)&quot;, &quot; &quot;).replaceAll(&quot;\\\\s{2,}&quot;, &quot; &quot;) {code} Because often those tags are just next to text. And after removing tags change all 2 and more writespaces to just 1."},{"owner":{"account_id":3506599,"reputation":357,"user_id":2932012,"accept_rate":35,"display_name":"nikhil udgirkar"},"score":0,"creation_date":1676447313,"post_id":50942752,"comment_id":133136309,"body_markdown":"This answer would take cake","body":"This answer would take cake"}],"tags":[],"owner":{"account_id":1947573,"reputation":6810,"user_id":1752366,"accept_rate":54,"display_name":"silentsudo"},"comment_count":2,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1529480204,"creation_date":1529480204,"answer_id":50942752,"question_id":240546,"body_markdown":"Here is one more variant of how to replace all(HTML Tags |  HTML Entities | Empty Space in HTML content)\r\n\r\n`content.replaceAll(&quot;(&lt;.*?&gt;)|(&amp;.*?;)|([ ]{2,})&quot;, &quot;&quot;);` where content is a String.\r\n\r\n","title":"Remove HTML tags from a String","body":"<p>Here is one more variant of how to replace all(HTML Tags |  HTML Entities | Empty Space in HTML content)</p>\n\n<p><code>content.replaceAll(\"(&lt;.*?&gt;)|(&amp;.*?;)|([ ]{2,})\", \"\");</code> where content is a String.</p>\n"},{"tags":[],"owner":{"account_id":12984002,"reputation":131,"user_id":9385470,"display_name":"Anurag SL"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1562002661,"creation_date":1553848640,"answer_id":55413383,"question_id":240546,"body_markdown":"**You can simply use the Android&#39;s default HTML filter**\r\n\r\n\r\n        public String htmlToStringFilter(String textToFilter){\r\n\r\n        return Html.fromHtml(textToFilter).toString();\r\n\r\n        }\r\n\r\nThe above method will return the HTML filtered string for your input.","title":"Remove HTML tags from a String","body":"<p><strong>You can simply use the Android's default HTML filter</strong></p>\n\n<pre><code>    public String htmlToStringFilter(String textToFilter){\n\n    return Html.fromHtml(textToFilter).toString();\n\n    }\n</code></pre>\n\n<p>The above method will return the HTML filtered string for your input.</p>\n"},{"tags":[],"owner":{"account_id":16581218,"reputation":1,"user_id":13612863,"display_name":"Itay Sasson"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1590405290,"creation_date":1590405290,"answer_id":62001289,"question_id":240546,"body_markdown":"I know it is been a while since this question as been asked, but I found another solution, this is what worked for me:\r\n\r\n    Pattern REMOVE_TAGS = Pattern.compile(&quot;&lt;.+?&gt;&quot;);\r\n        Source source= new Source(htmlAsString);\r\n     Matcher m = REMOVE_TAGS.matcher(sourceStep.getTextExtractor().toString());\r\n                            String clearedHtml= m.replaceAll(&quot;&quot;);\r\n\r\n \r\n\r\n ","title":"Remove HTML tags from a String","body":"<p>I know it is been a while since this question as been asked, but I found another solution, this is what worked for me:</p>\n\n<pre><code>Pattern REMOVE_TAGS = Pattern.compile(\"&lt;.+?&gt;\");\n    Source source= new Source(htmlAsString);\n Matcher m = REMOVE_TAGS.matcher(sourceStep.getTextExtractor().toString());\n                        String clearedHtml= m.replaceAll(\"\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2056806,"reputation":2735,"user_id":1834329,"accept_rate":60,"display_name":"Jared Beach"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1594835609,"creation_date":1594835609,"answer_id":62920964,"question_id":240546,"body_markdown":"Worth noting that if you&#39;re trying to accomplish this in a [Service Stack](https://servicestack.net/) project, it&#39;s already a built-in string extension\r\n\r\n```\r\nusing ServiceStack.Text;\r\n// ...\r\n&quot;The &lt;b&gt;quick&lt;/b&gt; brown &lt;p&gt; fox &lt;/p&gt; jumps over the lazy dog&quot;.StripHtml();\r\n```\r\n","title":"Remove HTML tags from a String","body":"<p>Worth noting that if you're trying to accomplish this in a <a href=\"https://servicestack.net/\" rel=\"nofollow noreferrer\">Service Stack</a> project, it's already a built-in string extension</p>\n<pre><code>using ServiceStack.Text;\n// ...\n&quot;The &lt;b&gt;quick&lt;/b&gt; brown &lt;p&gt; fox &lt;/p&gt; jumps over the lazy dog&quot;.StripHtml();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2369743,"reputation":7285,"user_id":2074605,"accept_rate":100,"display_name":"Parker"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1598217292,"creation_date":1598217292,"answer_id":63552068,"question_id":240546,"body_markdown":"I often find that I only need to strip out comments and script elements. This has worked reliably for me for 15 years and can easily be extended to handle any element name in HTML or XML:\r\n\r\n    // delete all comments\r\n    response = response.replaceAll(&quot;&lt;!--[^&gt;]*--&gt;&quot;, &quot;&quot;);\r\n    // delete all script elements\r\n    response = response.replaceAll(&quot;&lt;(script|SCRIPT)[^+]*?&gt;[^&gt;]*?&lt;(/script|SCRIPT)&gt;&quot;, &quot;&quot;);\r\n","title":"Remove HTML tags from a String","body":"<p>I often find that I only need to strip out comments and script elements. This has worked reliably for me for 15 years and can easily be extended to handle any element name in HTML or XML:</p>\n<pre><code>// delete all comments\nresponse = response.replaceAll(&quot;&lt;!--[^&gt;]*--&gt;&quot;, &quot;&quot;);\n// delete all script elements\nresponse = response.replaceAll(&quot;&lt;(script|SCRIPT)[^+]*?&gt;[^&gt;]*?&lt;(/script|SCRIPT)&gt;&quot;, &quot;&quot;);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3078593,"reputation":3418,"user_id":2607372,"accept_rate":87,"display_name":"vikramvi"},"score":0,"creation_date":1664245734,"post_id":63720307,"comment_id":130421745,"body_markdown":"What is &quot;Whitelist&quot; here ?","body":"What is &quot;Whitelist&quot; here ?"},{"owner":{"account_id":3078593,"reputation":3418,"user_id":2607372,"accept_rate":87,"display_name":"vikramvi"},"score":0,"creation_date":1664245887,"post_id":63720307,"comment_id":130421771,"body_markdown":"Not working for &quot;\\r\\n HDFC Bank &lt;\\/a&gt;\\r\\n &lt;\\/div&gt;\\r\\n &lt;\\/td&gt;\\r\\n&quot;, I replaced `Whitelist` with `Safelist`","body":"Not working for &quot;\\r\\n HDFC Bank &lt;\\/a&gt;\\r\\n &lt;\\/div&gt;\\r\\n &lt;\\/td&gt;\\r\\n&quot;, I replaced <code>Whitelist</code> with <code>Safelist</code>"}],"tags":[],"owner":{"account_id":950044,"reputation":1436,"user_id":976371,"accept_rate":96,"display_name":"jiamo"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1599123795,"creation_date":1599123795,"answer_id":63720307,"question_id":240546,"body_markdown":"Sometimes the html string come from xml  with such `&amp;lt`. When using Jsoup we need parse it and then clean it.\r\n\r\n\r\n    Document doc = Jsoup.parse(htmlstrl);\r\n    Whitelist wl = Whitelist.none();\r\n    String plain = Jsoup.clean(doc.text(), wl);\r\n\r\nWhile only using `Jsoup.parse(htmlstrl).text()` can&#39;t remove tags.","title":"Remove HTML tags from a String","body":"<p>Sometimes the html string come from xml  with such <code>&amp;lt</code>. When using Jsoup we need parse it and then clean it.</p>\n<pre><code>Document doc = Jsoup.parse(htmlstrl);\nWhitelist wl = Whitelist.none();\nString plain = Jsoup.clean(doc.text(), wl);\n</code></pre>\n<p>While only using <code>Jsoup.parse(htmlstrl).text()</code> can't remove tags.</p>\n"},{"tags":[],"owner":{"account_id":13200385,"reputation":43,"user_id":9533811,"display_name":"Muneeb Ahmed"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1599755815,"creation_date":1599748576,"answer_id":63832019,"question_id":240546,"body_markdown":"**Try this for javascript:**\r\n```javascript\r\nconst strippedString = htmlString.replace(/(&lt;([^&gt;]+)&gt;)/gi, &quot;&quot;);\r\nconsole.log(strippedString);\r\n```","title":"Remove HTML tags from a String","body":"<p><strong>Try this for javascript:</strong></p>\n<pre class=\"lang-js prettyprint-override\"><code>const strippedString = htmlString.replace(/(&lt;([^&gt;]+)&gt;)/gi, &quot;&quot;);\nconsole.log(strippedString);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":20844560,"reputation":774,"user_id":15310387,"display_name":"Mr R"},"score":0,"creation_date":1623184675,"post_id":66425176,"comment_id":120005760,"body_markdown":"Not sure if you saw the comment on the accepted answer (from 2010) that says - try this `&lt;p&gt;Lorem ipsum 1 &lt; 3 dolor sit amet&lt;/p&gt;` and see how well the regex works ..","body":"Not sure if you saw the comment on the accepted answer (from 2010) that says - try this <code>&lt;p&gt;Lorem ipsum 1 &lt; 3 dolor sit amet&lt;&#47;p&gt;</code> and see how well the regex works .."}],"tags":[],"owner":{"account_id":3260426,"reputation":11579,"user_id":2746110,"accept_rate":67,"display_name":"Arefe"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1614613486,"creation_date":1614613486,"answer_id":66425176,"question_id":240546,"body_markdown":"You can use this method to remove the HTML tags from the String,\r\n\r\n\r\n    public static String stripHtmlTags(String html) {\r\n\r\n        return html.replaceAll(&quot;&lt;.*?&gt;&quot;, &quot;&quot;);\r\n\r\n    }","title":"Remove HTML tags from a String","body":"<p>You can use this method to remove the HTML tags from the String,</p>\n<pre><code>public static String stripHtmlTags(String html) {\n\n    return html.replaceAll(&quot;&lt;.*?&gt;&quot;, &quot;&quot;);\n\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1630926143,"post_id":69073444,"comment_id":122079387,"body_markdown":"Please provide additional details in your answer. As it&#39;s currently written, it&#39;s hard to understand your solution.","body":"Please provide additional details in your answer. As it&#39;s currently written, it&#39;s hard to understand your solution."}],"tags":[],"owner":{"account_id":16216968,"reputation":1,"user_id":11709551,"display_name":"Ahmad Nabeel Butt"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1630934602,"creation_date":1630926027,"answer_id":69073444,"question_id":240546,"body_markdown":"You can use this code to remove HTML tags including line breaks.\r\n\r\n    function remove_html_tags(html) {\r\n        html = html.replace(/&lt;div&gt;/g, &quot;&quot;).replace(/&lt;\\/div&gt;/g, &quot;&lt;br&gt;&quot;);\r\n        html = html.replace(/&lt;br&gt;/g, &quot;$br$&quot;);\r\n        html = html.replace(/(?:\\r\\n|\\r|\\n)/g, &#39;$br$&#39;);\r\n        var tmp = document.createElement(&quot;DIV&quot;);\r\n        tmp.innerHTML = html;\r\n        html = tmp.textContent || tmp.innerText;\r\n        html = html.replace(/\\$br\\$/g, &quot;\\n&quot;);\r\n        return html;\r\n    }\r\n","title":"Remove HTML tags from a String","body":"<p>You can use this code to remove HTML tags including line breaks.</p>\n<pre><code>function remove_html_tags(html) {\n    html = html.replace(/&lt;div&gt;/g, &quot;&quot;).replace(/&lt;\\/div&gt;/g, &quot;&lt;br&gt;&quot;);\n    html = html.replace(/&lt;br&gt;/g, &quot;$br$&quot;);\n    html = html.replace(/(?:\\r\\n|\\r|\\n)/g, '$br$');\n    var tmp = document.createElement(&quot;DIV&quot;);\n    tmp.innerHTML = html;\n    html = tmp.textContent || tmp.innerText;\n    html = html.replace(/\\$br\\$/g, &quot;\\n&quot;);\n    return html;\n}\n</code></pre>\n"}],"owner":{"account_id":5541,"reputation":8777,"user_id":8973,"accept_rate":77,"display_name":"Mason"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":569686,"favorite_count":0,"down_vote_count":0,"up_vote_count":486,"accepted_answer_id":3149645,"answer_count":35,"score":486,"last_activity_date":1687345185,"creation_date":1225125569,"question_id":240546,"body_markdown":"Is there a good way to remove HTML from a Java string? A simple regex like \r\n\r\n```js\r\nreplaceAll(&quot;\\\\&lt;.*?&gt;&quot;, &quot;&quot;) \r\n```\r\n\r\nwill work, but some things like `&amp;amp;` won&#39;t be converted correctly and non-HTML between the two angle brackets will be removed (i.e. the `.*?` in the regex will disappear).","title":"Remove HTML tags from a String","body":"<p>Is there a good way to remove HTML from a Java string? A simple regex like</p>\n<pre class=\"lang-js prettyprint-override\"><code>replaceAll(&quot;\\\\&lt;.*?&gt;&quot;, &quot;&quot;) \n</code></pre>\n<p>will work, but some things like <code>&amp;amp;</code> won't be converted correctly and non-HTML between the two angle brackets will be removed (i.e. the <code>.*?</code> in the regex will disappear).</p>\n"},{"tags":["java","hibernate"],"owner":{"account_id":23171414,"reputation":195,"user_id":17270610,"display_name":"dynamo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687344629,"creation_date":1687344629,"question_id":76522456,"body_markdown":"i am trying to return the latest record in a table based on the date it was uploaded - when run the query returns null. \r\n\r\nmy config is fine as i tested it with asc order and it worked fine + my other queries inside the class work too. \r\n\r\ncan anyone tell me why this doesnt work, thanks.\r\n\r\n```\r\npublic Train getLatestTrain() {\r\n    Criteria criteria = getSession().createCriteria(Train.class)\r\n    criteria.addOrder(Order.desc(&quot;dateUploaded&quot;))\r\n    criteria.setMaxResults(1);\r\n\r\n    return (Train) criteria.uniqueResult();\r\n} \r\n```\r\ncan provide config files if needed ","title":"hibernate query latest record returns null","body":"<p>i am trying to return the latest record in a table based on the date it was uploaded - when run the query returns null.</p>\n<p>my config is fine as i tested it with asc order and it worked fine + my other queries inside the class work too.</p>\n<p>can anyone tell me why this doesnt work, thanks.</p>\n<pre><code>public Train getLatestTrain() {\n    Criteria criteria = getSession().createCriteria(Train.class)\n    criteria.addOrder(Order.desc(&quot;dateUploaded&quot;))\n    criteria.setMaxResults(1);\n\n    return (Train) criteria.uniqueResult();\n} \n</code></pre>\n<p>can provide config files if needed</p>\n"},{"tags":["java","spring-boot","swagger"],"comments":[{"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"score":3,"creation_date":1614263845,"post_id":66370082,"comment_id":117337250,"body_markdown":"Use `java.time.LocalDate` instead of `java.util.Date`.","body":"Use <code>java.time.LocalDate</code> instead of <code>java.util.Date</code>."},{"owner":{"account_id":222772,"reputation":7235,"user_id":481602,"accept_rate":83,"display_name":"Sebastien Diot"},"score":0,"creation_date":1614265441,"post_id":66370082,"comment_id":117338088,"body_markdown":"@daniu That would solve my problem, but that&#39;s kind of a work-around, rather than the solution I&#39;m looking for. I *could have* code that expected &quot;getInitialAbrechMonat()&quot; to return a Date, given our code-base is 20+ years old...","body":"@daniu That would solve my problem, but that&#39;s kind of a work-around, rather than the solution I&#39;m looking for. I <i>could have</i> code that expected &quot;getInitialAbrechMonat()&quot; to return a Date, given our code-base is 20+ years old..."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1614267730,"post_id":66370082,"comment_id":117339240,"body_markdown":"Swagger or not, I recommend you don’t use `Date`. That class is poorly designed and long outdated. Instead use `LocalDate` from [java.time, the modern Java date and time API](https://docs.oracle.com/javase/tutorial/datetime/). This also means that I disagree that it’s a workaround. It’s an upgrade that you would want anyway.","body":"Swagger or not, I recommend you don’t use <code>Date</code>. That class is poorly designed and long outdated. Instead use <code>LocalDate</code> from <a href=\"https://docs.oracle.com/javase/tutorial/datetime/\" rel=\"nofollow noreferrer\">java.time, the modern Java date and time API</a>. This also means that I disagree that it’s a workaround. It’s an upgrade that you would want anyway."},{"owner":{"account_id":222772,"reputation":7235,"user_id":481602,"accept_rate":83,"display_name":"Sebastien Diot"},"score":0,"creation_date":1614601691,"post_id":66370082,"comment_id":117426161,"body_markdown":"Well, using LocalDate doesn&#39;t even work out-of-the-box: &quot; org.springframework.http.converter.HttpMessageNotReadableException: JSON parse error: Cannot construct instance of `java.time.LocalDate` (no Creators, like default construct, exist): no String-argument constructor/factory method to deserialize from String value (&#39;2021-02-01&#39;)&quot;","body":"Well, using LocalDate doesn&#39;t even work out-of-the-box: &quot; org.springframework.http.converter.HttpMessageNotReadableExc&zwnj;&#8203;eption: JSON parse error: Cannot construct instance of <code>java.time.LocalDate</code> (no Creators, like default construct, exist): no String-argument constructor/factory method to deserialize from String value (&#39;2021-02-01&#39;)&quot;"}],"answers":[{"comments":[{"owner":{"account_id":1422699,"reputation":4139,"user_id":1346996,"display_name":"Ant&#243;nio Ribeiro"},"score":0,"creation_date":1674641891,"post_id":75207752,"comment_id":132756206,"body_markdown":"Welcome to Stack Overflow. Please consider going through Stack Overflow&#39;s help section in order to know how to answer a question: https://stackoverflow.com/help/how-to-answer.","body":"Welcome to Stack Overflow. Please consider going through Stack Overflow&#39;s help section in order to know how to answer a question: <a href=\"https://stackoverflow.com/help/how-to-answer\">stackoverflow.com/help/how-to-answer</a>."},{"owner":{"account_id":22424780,"reputation":2764,"user_id":16631565,"display_name":"Shawn Hemelstrand"},"score":1,"creation_date":1674725445,"post_id":75207752,"comment_id":132776437,"body_markdown":"While this code snippet may be the solution, including an explanation really helps to improve the quality of your post. Remember that you are answering the question for readers in the future, and those people might not know the reasons for your code suggestion.","body":"While this code snippet may be the solution, including an explanation really helps to improve the quality of your post. Remember that you are answering the question for readers in the future, and those people might not know the reasons for your code suggestion."},{"owner":{"account_id":9951088,"reputation":413,"user_id":7363699,"display_name":"Krishna"},"score":0,"creation_date":1687344865,"post_id":75207752,"comment_id":134922818,"body_markdown":"@Artem, when &#39;format&#39; is specified, &#39;type&#39; is getting ignored and also example. And date is shown in swagger UI as mentioned by Sebastien in question. Check my answer which works for users as well as purpose.","body":"@Artem, when &#39;format&#39; is specified, &#39;type&#39; is getting ignored and also example. And date is shown in swagger UI as mentioned by Sebastien in question. Check my answer which works for users as well as purpose."}],"tags":[],"owner":{"account_id":27599092,"reputation":1,"user_id":21064701,"display_name":"Artem"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674467050,"creation_date":1674467050,"answer_id":75207752,"question_id":66370082,"body_markdown":"    @Schema(type = &quot;string&quot;, format = &quot;date&quot;)\r\n    @JsonFormat(pattern = &quot;yyyy-MM-dd&quot;)\r\n    private LocalDate date;","title":"How to tell Swagger V3 that my &quot;Java Date&quot; is just a &quot;date&quot;, not a &quot;datetime&quot;?","body":"<pre><code>@Schema(type = &quot;string&quot;, format = &quot;date&quot;)\n@JsonFormat(pattern = &quot;yyyy-MM-dd&quot;)\nprivate LocalDate date;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9951088,"reputation":413,"user_id":7363699,"display_name":"Krishna"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687344586,"creation_date":1687344586,"answer_id":76522449,"question_id":66370082,"body_markdown":"It can be configured as below as well mentioning required format in description which would help API users to understand better.\r\n\r\n    @JsonFormat (pattern = &quot;ddMMyy&quot;)    \r\n    @Schema (type = &quot;string&quot;, example = &quot;010123&quot;, description = &quot;Date in format ddMMyy&quot;)\r\n    Date sampleDate;\r\n\r\nSwagger schema will show something like below\r\n\r\n    sampleDate\tstring\r\n                example: 010123\r\n                Date in format ddMMyy","title":"How to tell Swagger V3 that my &quot;Java Date&quot; is just a &quot;date&quot;, not a &quot;datetime&quot;?","body":"<p>It can be configured as below as well mentioning required format in description which would help API users to understand better.</p>\n<pre><code>@JsonFormat (pattern = &quot;ddMMyy&quot;)    \n@Schema (type = &quot;string&quot;, example = &quot;010123&quot;, description = &quot;Date in format ddMMyy&quot;)\nDate sampleDate;\n</code></pre>\n<p>Swagger schema will show something like below</p>\n<pre><code>sampleDate  string\n            example: 010123\n            Date in format ddMMyy\n</code></pre>\n"}],"owner":{"account_id":222772,"reputation":7235,"user_id":481602,"accept_rate":83,"display_name":"Sebastien Diot"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1924,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1687344586,"creation_date":1614261993,"question_id":66370082,"body_markdown":"I have this annotated (Spring-Boot, REST-Service, swagger-annotations-2.1.2) Java code:\r\n\r\n    @JsonProperty(&quot;InitialAbrechMonat&quot;)\r\n    @Schema(name = &quot;InitialAbrechMonat&quot;, description = &quot;blabla&quot;, format = &quot;date&quot;,\r\n            pattern = &quot;yyyy-MM-dd&quot;, example = &quot;2020-12-01&quot;)\r\n    @JsonFormat(shape = JsonFormat.Shape.STRING, pattern = &quot;yyyy-MM-dd&quot;)\r\n    @DateTimeFormat(iso = DateTimeFormat.ISO.DATE)\r\n    public Date getInitialAbrechMonat() {\r\n\r\nNot sure if *format = &quot;date&quot;* in @Schema does anything, but I&#39;ve seen a *format = &quot;date-time&quot;* somewhere, so I tried. Anyway, Swagger both ignores my &quot;example&quot;, &quot;pattern&quot; and &quot;format&quot; and shows me this:\r\n\r\n    &quot;InitialAbrechMonat&quot;: &quot;2021-02-25T13:50:35.705Z&quot;,\r\n\r\nIn the &quot;Example Value | Schema&quot; section of the generated web documentation/UI.\r\n\r\nI want to see either the example I actually gave, or at least a date formatted as &quot;yyyy-MM-dd&quot;, so as not to confuse my users.\r\n\r\nEDIT: I added &quot;pattern&quot; and &quot;format&quot; only *after* seeing it ignored my &quot;example&quot;.","title":"How to tell Swagger V3 that my &quot;Java Date&quot; is just a &quot;date&quot;, not a &quot;datetime&quot;?","body":"<p>I have this annotated (Spring-Boot, REST-Service, swagger-annotations-2.1.2) Java code:</p>\n<pre><code>@JsonProperty(&quot;InitialAbrechMonat&quot;)\n@Schema(name = &quot;InitialAbrechMonat&quot;, description = &quot;blabla&quot;, format = &quot;date&quot;,\n        pattern = &quot;yyyy-MM-dd&quot;, example = &quot;2020-12-01&quot;)\n@JsonFormat(shape = JsonFormat.Shape.STRING, pattern = &quot;yyyy-MM-dd&quot;)\n@DateTimeFormat(iso = DateTimeFormat.ISO.DATE)\npublic Date getInitialAbrechMonat() {\n</code></pre>\n<p>Not sure if <em>format = &quot;date&quot;</em> in @Schema does anything, but I've seen a <em>format = &quot;date-time&quot;</em> somewhere, so I tried. Anyway, Swagger both ignores my &quot;example&quot;, &quot;pattern&quot; and &quot;format&quot; and shows me this:</p>\n<pre><code>&quot;InitialAbrechMonat&quot;: &quot;2021-02-25T13:50:35.705Z&quot;,\n</code></pre>\n<p>In the &quot;Example Value | Schema&quot; section of the generated web documentation/UI.</p>\n<p>I want to see either the example I actually gave, or at least a date formatted as &quot;yyyy-MM-dd&quot;, so as not to confuse my users.</p>\n<p>EDIT: I added &quot;pattern&quot; and &quot;format&quot; only <em>after</em> seeing it ignored my &quot;example&quot;.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":3998784,"reputation":3574,"user_id":3295442,"display_name":"McLovin"},"score":1,"creation_date":1405718421,"post_id":24833846,"comment_id":38556960,"body_markdown":"Why are you executing a process instead of just using a `FileReader`?","body":"Why are you executing a process instead of just using a <code>FileReader</code>?"},{"owner":{"account_id":3814914,"reputation":1785,"user_id":3164492,"accept_rate":71,"display_name":"Devavrata"},"score":0,"creation_date":1405718983,"post_id":24833846,"comment_id":38557145,"body_markdown":"Yes you can do this just by closing the stream through which you are making the changes in file!!","body":"Yes you can do this just by closing the stream through which you are making the changes in file!!"},{"owner":{"account_id":2545004,"reputation":1357,"user_id":2364403,"accept_rate":77,"display_name":"Vivin"},"score":0,"creation_date":1405719019,"post_id":24833846,"comment_id":38557159,"body_markdown":"Use BufferedWriter http://docs.oracle.com/javase/7/docs/api/java/io/BufferedWriter.html. I wont advice closing and opening again the stream everytime.","body":"Use BufferedWriter <a href=\"http://docs.oracle.com/javase/7/docs/api/java/io/BufferedWriter.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/7/docs/api/java/io/BufferedWriter.htm&zwnj;&#8203;l</a>. I wont advice closing and opening again the stream everytime."},{"owner":{"account_id":1585313,"reputation":1529,"user_id":1469828,"accept_rate":68,"display_name":"typeof programmer"},"score":0,"creation_date":1405719425,"post_id":24833846,"comment_id":38557279,"body_markdown":"Thanks all! How to read the file line by lien first if using BufferedReader?","body":"Thanks all! How to read the file line by lien first if using BufferedReader?"}],"answers":[{"comments":[{"owner":{"account_id":1585313,"reputation":1529,"user_id":1469828,"accept_rate":68,"display_name":"typeof programmer"},"score":0,"creation_date":1405719366,"post_id":24834095,"comment_id":38557261,"body_markdown":"Thanks! How to read the original file line by line. I cannot find hasNextLine() related method in  FileWriter","body":"Thanks! How to read the original file line by line. I cannot find hasNextLine() related method in  FileWriter"},{"owner":{"account_id":1296878,"reputation":2027,"user_id":1247705,"accept_rate":71,"display_name":"Tim"},"score":1,"creation_date":1405721137,"post_id":24834095,"comment_id":38557821,"body_markdown":"[BufferedWriter.readLine()](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedReader.html#readLine()). Did you even try Googling for it?","body":"<a href=\"http://docs.oracle.com/javase/7/docs/api/java/io/BufferedReader.html#readLine()\" rel=\"nofollow noreferrer\">BufferedWriter.readLine()</a>. Did you even try Googling for it?"},{"owner":{"account_id":1585313,"reputation":1529,"user_id":1469828,"accept_rate":68,"display_name":"typeof programmer"},"score":0,"creation_date":1406038243,"post_id":24834095,"comment_id":38662459,"body_markdown":"Thanks for your answer. But it&#39;s BufferedReader.readLine(), not in BufferedWriter","body":"Thanks for your answer. But it&#39;s BufferedReader.readLine(), not in BufferedWriter"}],"tags":[],"owner":{"account_id":3211731,"reputation":3690,"user_id":2711596,"display_name":"Debasis"},"comment_count":3,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1405719083,"creation_date":1405719083,"answer_id":24834095,"question_id":24833846,"body_markdown":"The following steps could achieve what you are looking for.\r\n\r\n  - Instantiate a FileWriter object to create a tmp file.\r\n\r\n         FileWriter fw = new FileWriter(&quot;tmp&quot;);\r\n\r\n\r\n  - Read line by line from the source file.\r\n\r\n  - Modify this line (string object) in memory.\r\n\r\n  - Write out this string in the tmp file.\r\n\r\n          fw.write(line);\r\n\r\n  - Close the file handles.\r\n\r\n  - Rename the tmp file to the source file name.\r\n\r\n         sourceFile.renameTo(targetFile);","title":"How to update a file content in Java","body":"<p>The following steps could achieve what you are looking for.</p>\n\n<ul>\n<li><p>Instantiate a FileWriter object to create a tmp file.</p>\n\n<pre><code> FileWriter fw = new FileWriter(\"tmp\");\n</code></pre></li>\n<li><p>Read line by line from the source file.</p></li>\n<li><p>Modify this line (string object) in memory.</p></li>\n<li><p>Write out this string in the tmp file.</p>\n\n<pre><code>  fw.write(line);\n</code></pre></li>\n<li><p>Close the file handles.</p></li>\n<li><p>Rename the tmp file to the source file name.</p>\n\n<pre><code> sourceFile.renameTo(targetFile);\n</code></pre></li>\n</ul>\n"},{"comments":[{"owner":{"account_id":1296878,"reputation":2027,"user_id":1247705,"accept_rate":71,"display_name":"Tim"},"score":0,"creation_date":1405721267,"post_id":24834178,"comment_id":38557852,"body_markdown":"Just because this is what the OP asked for doesn&#39;t mean it&#39;s what he should do.  Surgically rewriting each individual line in the file when he knows he&#39;s going to be editing them all isn&#39;t a recipe for good performance, nor for clean program design.","body":"Just because this is what the OP asked for doesn&#39;t mean it&#39;s what he should do.  Surgically rewriting each individual line in the file when he knows he&#39;s going to be editing them all isn&#39;t a recipe for good performance, nor for clean program design."},{"owner":{"account_id":461611,"reputation":583,"user_id":863419,"accept_rate":81,"display_name":"Jimmysnn"},"score":0,"creation_date":1405722049,"post_id":24834178,"comment_id":38558068,"body_markdown":"I agree with you. It is not better solution but it is a solution. I just answer his question.\n\nBut your recommendation is absolutely true!!!","body":"I agree with you. It is not better solution but it is a solution. I just answer his question.  But your recommendation is absolutely true!!!"}],"tags":[],"owner":{"account_id":461611,"reputation":583,"user_id":863419,"accept_rate":81,"display_name":"Jimmysnn"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1405719571,"creation_date":1405719571,"answer_id":24834178,"question_id":24833846,"body_markdown":" This question has been answered [here][1]. I repeat the answer.\r\n\r\n    public static void replaceSelected(String replaceWith, String type) {\r\n        try {\r\n            // input the file content to the String &quot;input&quot;\r\n            BufferedReader file = new BufferedReader(new FileReader(&quot;notes.txt&quot;));\r\n            String line;String input = &quot;&quot;;\r\n    \r\n            while ((line = file.readLine()) != null) input += line + &#39;\\n&#39;;\r\n    \r\n            System.out.println(input); // check that it&#39;s inputted right\r\n    \r\n            // this if structure determines whether or not to replace &quot;0&quot; or &quot;1&quot;\r\n            if (Integer.parseInt(type) == 0) {\r\n                input = input.replace(replaceWith + &quot;1&quot;, replaceWith + &quot;0&quot;); \r\n            }\r\n            else if (Integer.parseInt(type) == 1) {\r\n                input = input.replace(replaceWith + &quot;0&quot;, replaceWith + &quot;1&quot;);\r\n            } \r\n    \r\n            // check if the new input is right\r\n            System.out.println(&quot;----------------------------------&quot;  + &#39;\\n&#39; + input);\r\n    \r\n            // write the new String with the replaced line OVER the same file\r\n            FileOutputStream File = new FileOutputStream(&quot;notes.txt&quot;);\r\n            File.write(input.getBytes());\r\n    \r\n        } catch (Exception e) {\r\n            System.out.println(&quot;Problem reading file.&quot;);\r\n        }\r\n    }\r\n    \r\n    public static void main(String[] args) {\r\n        replaceSelected(&quot;Do the dishes&quot;,&quot;1&quot;);    \r\n    }\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/20039980/java-replace-line-in-text-file","title":"How to update a file content in Java","body":"<p>This question has been answered <a href=\"https://stackoverflow.com/questions/20039980/java-replace-line-in-text-file\">here</a>. I repeat the answer.</p>\n\n<pre><code>public static void replaceSelected(String replaceWith, String type) {\n    try {\n        // input the file content to the String \"input\"\n        BufferedReader file = new BufferedReader(new FileReader(\"notes.txt\"));\n        String line;String input = \"\";\n\n        while ((line = file.readLine()) != null) input += line + '\\n';\n\n        System.out.println(input); // check that it's inputted right\n\n        // this if structure determines whether or not to replace \"0\" or \"1\"\n        if (Integer.parseInt(type) == 0) {\n            input = input.replace(replaceWith + \"1\", replaceWith + \"0\"); \n        }\n        else if (Integer.parseInt(type) == 1) {\n            input = input.replace(replaceWith + \"0\", replaceWith + \"1\");\n        } \n\n        // check if the new input is right\n        System.out.println(\"----------------------------------\"  + '\\n' + input);\n\n        // write the new String with the replaced line OVER the same file\n        FileOutputStream File = new FileOutputStream(\"notes.txt\");\n        File.write(input.getBytes());\n\n    } catch (Exception e) {\n        System.out.println(\"Problem reading file.\");\n    }\n}\n\npublic static void main(String[] args) {\n    replaceSelected(\"Do the dishes\",\"1\");    \n}\n</code></pre>\n"}],"owner":{"account_id":1585313,"reputation":1529,"user_id":1469828,"accept_rate":68,"display_name":"typeof programmer"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16989,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":24834095,"answer_count":2,"score":2,"last_activity_date":1687343831,"creation_date":1405717747,"question_id":24833846,"body_markdown":"First, I output the content of the file, here is my code. And then, I will do some string work to edit each line. What if I what to save the changes, how to do it? Can I do it without creating a tmp file?\r\n\r\n    String executeThis = &quot;cat&quot; + &quot; &quot; + &quot;/var/lib/iscsi/nodes/&quot;\r\n      + iscsiInfo.selectedTargets2.get(i) + &quot;/&quot; + myString + &quot;/default&quot;;\r\n    String inputThis = &quot;&quot;;\r\n    Process process = ServerHelper.callProcessWithInput(executeThis, inputThis);\r\n        \r\n    try {        \r\n      logger.debug(&quot;stdOutput for editing targets credential:&quot;);\r\n      BufferedReader stdOutput = new BufferedReader(\r\n        new InputStreamReader(process.getInputStream()));\r\n        \r\n      String s = null;        \r\n      while ((s = stdOutput.readLine()) != null) {\r\n        logger.info(&quot;The content is@@@@@@@@@@@@@@@@@@@@@@@@&quot;+s)\r\n        // do something to edit each line and update the file\r\n      }        \r\n    } catch (IOException e) {\r\n      logger.fatal(e);\r\n    }","title":"How to update a file content in Java","body":"<p>First, I output the content of the file, here is my code. And then, I will do some string work to edit each line. What if I what to save the changes, how to do it? Can I do it without creating a tmp file?</p>\n\n<pre><code>String executeThis = \"cat\" + \" \" + \"/var/lib/iscsi/nodes/\"\n  + iscsiInfo.selectedTargets2.get(i) + \"/\" + myString + \"/default\";\nString inputThis = \"\";\nProcess process = ServerHelper.callProcessWithInput(executeThis, inputThis);\n\ntry {        \n  logger.debug(\"stdOutput for editing targets credential:\");\n  BufferedReader stdOutput = new BufferedReader(\n    new InputStreamReader(process.getInputStream()));\n\n  String s = null;        \n  while ((s = stdOutput.readLine()) != null) {\n    logger.info(\"The content is@@@@@@@@@@@@@@@@@@@@@@@@\"+s)\n    // do something to edit each line and update the file\n  }        \n} catch (IOException e) {\n  logger.fatal(e);\n}\n</code></pre>\n"},{"tags":["java","spring","postgresql","docker","keycloak"],"answers":[{"tags":[],"owner":{"account_id":1917510,"reputation":23561,"user_id":1729795,"accept_rate":83,"display_name":"codependent"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1687343710,"creation_date":1687343710,"answer_id":76522342,"question_id":76522140,"body_markdown":"The usage of Keycloak adapters [was deprecated][1] more than a year ago.\r\n\r\n\r\nI&#39;ve successfully moved to Spring Cloud OAuth2 Login module, check these resources:\r\n\r\n - https://docs.spring.io/spring-security/reference/servlet/oauth2/login/index.html\r\n - https://www.baeldung.com/spring-security-openid-connect\r\n\r\n\r\n\r\n  [1]: https://www.keycloak.org/2022/02/adapter-deprecation","title":"Cannot invoke &quot;org.keycloak.common.util.KeycloakUriBuilder.clone()&quot; return value of &quot;org.keycloak.adapters.KeycloakDeployment.getAuthUrl()&quot; is null","body":"<p>The usage of Keycloak adapters <a href=\"https://www.keycloak.org/2022/02/adapter-deprecation\" rel=\"nofollow noreferrer\">was deprecated</a> more than a year ago.</p>\n<p>I've successfully moved to Spring Cloud OAuth2 Login module, check these resources:</p>\n<ul>\n<li><a href=\"https://docs.spring.io/spring-security/reference/servlet/oauth2/login/index.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-security/reference/servlet/oauth2/login/index.html</a></li>\n<li><a href=\"https://www.baeldung.com/spring-security-openid-connect\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-security-openid-connect</a></li>\n</ul>\n"}],"owner":{"account_id":24800295,"reputation":5,"user_id":18682737,"display_name":"Nouhaila Khaouti"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":544,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76522342,"answer_count":1,"score":0,"last_activity_date":1687343710,"creation_date":1687342093,"question_id":76522140,"body_markdown":"i just started working with keycloak docker with spring boot, i&#39;m trying to create an authentification server using keycloak and spring security , i created a docker comopse file with the keycloak image and connect it with posgresql database , then added the right propreties to my app, it was working i get to log in and the keycloak generate a token so there was no problem , then after i checked again i get a 500 server error \r\n**java.lang.NullPointerException: Cannot invoke &quot;org.keycloak.common.util.KeycloakUriBuilder.clone()&quot; because the return value of &quot;org.keycloak.adapters.KeycloakDeployment.getAuthUrl()&quot; is null**\r\n\r\nthis is the docker compose file :\r\n```\r\nversion: &#39;3&#39;\r\n\r\nvolumes:\r\n  postgres_data:\r\n    driver: local\r\n\r\nservices:\r\n  postgres:\r\n    image: postgres\r\n    volumes:\r\n      - postgres_data:/var/lib/postgresql/data\r\n    environment:\r\n      POSTGRES_DB: keycloak_local\r\n      POSTGRES_USER: keycloak\r\n      POSTGRES_PASSWORD: keycloak\r\n  keycloak:\r\n    image: quay.io/keycloak/keycloak:legacy\r\n    environment:\r\n      DB_VENDOR: POSTGRES\r\n      DB_ADDR: postgres\r\n      DB_DATABASE: keycloak_local\r\n      DB_USER: keycloak\r\n      DB_SCHEMA: public\r\n      DB_PASSWORD: keycloak\r\n      KEYCLOAK_USER: admin\r\n      KEYCLOAK_PASSWORD: admin\r\n    ports:\r\n      - 8080:8080\r\n    depends_on:\r\n      - postgres\r\n```\r\nand this is the app properties:\r\n```\r\nserver.port = 8090\r\nkeycloak.realm=lbv-realm\r\nkeycloak.resource=auth-client\r\nkeycloak.auth-server-url=http://localhost:8080/auth\r\nkeycloak.ssl-required=none\r\nkeycloak.public-client=true\t\r\n```\r\nthis is the keycloak configuration:\r\n```\r\n\r\n\t@Bean\r\n\tpublic KeycloakSpringBootConfigResolver keycloakConfigResolver() {\r\n\t\treturn new KeycloakSpringBootConfigResolver();\r\n\t}\r\n```\r\nand this is the login function :\r\n```\r\n\tpublic ResponseEntity&lt;LoginResponse&gt; login(LoginRequest loginrequest) {\r\n\t\tHttpHeaders headers = new HttpHeaders();\r\n\t\theaders.setContentType(MediaType.APPLICATION_FORM_URLENCODED);\r\n\t\tMultiValueMap&lt;String, String&gt; map = new LinkedMultiValueMap&lt;&gt;();\r\n\t\tmap.add(&quot;client_id&quot;,client_id );\r\n\t\tmap.add(&quot;client_secret&quot;, client_secret);\r\n\t\tmap.add(&quot;grant_type&quot;, grant_type);\r\n\t\tmap.add(&quot;username&quot;, loginrequest.getUsername());\r\n\t\tmap.add(&quot;password&quot;, loginrequest.getPassword());\r\n\t\tHttpEntity&lt;MultiValueMap&lt;String, String&gt;&gt; httpEntity = new HttpEntity&lt;&gt;(map,headers);\r\n\t\tResponseEntity&lt;LoginResponse&gt; response = restTemplate.postForEntity(&quot;http://localhost:8080/auth/realms/lbv/protocol/openid-connect/token&quot;, httpEntity, LoginResponse.class);\r\n\t\treturn new ResponseEntity&lt;&gt;(response.getBody(),HttpStatus.OK);\r\n\t}\r\n```\r\nand the controller:\r\n```\r\n\t@PostMapping(&quot;/login&quot;)\r\n\tpublic ResponseEntity&lt;LoginResponse&gt; login (@RequestBody LoginRequest loginrequest) {\r\n\t\treturn loginservice.login(loginrequest);\r\n\t}\r\n```","title":"Cannot invoke &quot;org.keycloak.common.util.KeycloakUriBuilder.clone()&quot; return value of &quot;org.keycloak.adapters.KeycloakDeployment.getAuthUrl()&quot; is null","body":"<p>i just started working with keycloak docker with spring boot, i'm trying to create an authentification server using keycloak and spring security , i created a docker comopse file with the keycloak image and connect it with posgresql database , then added the right propreties to my app, it was working i get to log in and the keycloak generate a token so there was no problem , then after i checked again i get a 500 server error\n<strong>java.lang.NullPointerException: Cannot invoke &quot;org.keycloak.common.util.KeycloakUriBuilder.clone()&quot; because the return value of &quot;org.keycloak.adapters.KeycloakDeployment.getAuthUrl()&quot; is null</strong></p>\n<p>this is the docker compose file :</p>\n<pre><code>version: '3'\n\nvolumes:\n  postgres_data:\n    driver: local\n\nservices:\n  postgres:\n    image: postgres\n    volumes:\n      - postgres_data:/var/lib/postgresql/data\n    environment:\n      POSTGRES_DB: keycloak_local\n      POSTGRES_USER: keycloak\n      POSTGRES_PASSWORD: keycloak\n  keycloak:\n    image: quay.io/keycloak/keycloak:legacy\n    environment:\n      DB_VENDOR: POSTGRES\n      DB_ADDR: postgres\n      DB_DATABASE: keycloak_local\n      DB_USER: keycloak\n      DB_SCHEMA: public\n      DB_PASSWORD: keycloak\n      KEYCLOAK_USER: admin\n      KEYCLOAK_PASSWORD: admin\n    ports:\n      - 8080:8080\n    depends_on:\n      - postgres\n</code></pre>\n<p>and this is the app properties:</p>\n<pre><code>server.port = 8090\nkeycloak.realm=lbv-realm\nkeycloak.resource=auth-client\nkeycloak.auth-server-url=http://localhost:8080/auth\nkeycloak.ssl-required=none\nkeycloak.public-client=true \n</code></pre>\n<p>this is the keycloak configuration:</p>\n<pre><code>\n    @Bean\n    public KeycloakSpringBootConfigResolver keycloakConfigResolver() {\n        return new KeycloakSpringBootConfigResolver();\n    }\n</code></pre>\n<p>and this is the login function :</p>\n<pre><code>    public ResponseEntity&lt;LoginResponse&gt; login(LoginRequest loginrequest) {\n        HttpHeaders headers = new HttpHeaders();\n        headers.setContentType(MediaType.APPLICATION_FORM_URLENCODED);\n        MultiValueMap&lt;String, String&gt; map = new LinkedMultiValueMap&lt;&gt;();\n        map.add(&quot;client_id&quot;,client_id );\n        map.add(&quot;client_secret&quot;, client_secret);\n        map.add(&quot;grant_type&quot;, grant_type);\n        map.add(&quot;username&quot;, loginrequest.getUsername());\n        map.add(&quot;password&quot;, loginrequest.getPassword());\n        HttpEntity&lt;MultiValueMap&lt;String, String&gt;&gt; httpEntity = new HttpEntity&lt;&gt;(map,headers);\n        ResponseEntity&lt;LoginResponse&gt; response = restTemplate.postForEntity(&quot;http://localhost:8080/auth/realms/lbv/protocol/openid-connect/token&quot;, httpEntity, LoginResponse.class);\n        return new ResponseEntity&lt;&gt;(response.getBody(),HttpStatus.OK);\n    }\n</code></pre>\n<p>and the controller:</p>\n<pre><code>    @PostMapping(&quot;/login&quot;)\n    public ResponseEntity&lt;LoginResponse&gt; login (@RequestBody LoginRequest loginrequest) {\n        return loginservice.login(loginrequest);\n    }\n</code></pre>\n"},{"tags":["java","sql-server"],"comments":[{"owner":{"account_id":20264817,"reputation":56105,"user_id":14868997,"display_name":"Charlieface"},"score":2,"creation_date":1687343669,"post_id":76522285,"comment_id":134922588,"body_markdown":"Are you sure you&#39;re executing as `sa`?","body":"Are you sure you&#39;re executing as <code>sa</code>?"}],"owner":{"account_id":3395507,"reputation":46,"user_id":2849239,"display_name":"Ervin Gegprifti"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":155,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687343592,"creation_date":1687343292,"question_id":76522285,"body_markdown":"When I try to execute the `sys.sp_cdc_enable_db` from java I get the following error:\r\n```\r\ncom.microsoft.sqlserver.jdbc.SQLServerException: Could not update the metadata that indicates database source_cdc_db is enabled for Change Data Capture. The failure occurred when executing the command &#39;SetCDCTracked(Value = 1)&#39;.\r\nThe error returned was 15517: &#39;Cannot execute as the database principal because the principal &quot;**cdc**&quot; does not exist, this type of principal cannot be impersonated, or you do not have permission.&#39;. Use the action and error to determine the cause of the failure and resubmit the request.\r\n```\r\nI do have installed on my machine the Microsoft SQL Server Developer (64-bit),Version 16.0.1000.6.\r\n\r\nHas anyone encountered this error? Any idea on the solution?\r\n\r\n\r\nMost of the solution cases I&#39;ve looked at have the problem of ...principal &quot;**dbo**&quot; does not exist... but in my case this is different, it is complaining about ...principal &quot;**cdc**&quot; does not exist...\r\n\r\nThis is for testing purposes and no real production db has been used. Normally I created a user and gave the db-owner database permission and sysadmin permission and had this same error. Then I tried the &#39;sa&#39; user but the same error again.\r\n\r\nI am stresing out that I have no problem executing\r\n```\r\nUSE source_cdc_db;\r\nEXEC sys.sp_cdc_enable_db;\r\nGO\r\n```\r\nfrom Sql Server MM","title":"Problem running sys.sp_cdc_enable_db to enable CDC on Sql Server from java","body":"<p>When I try to execute the <code>sys.sp_cdc_enable_db</code> from java I get the following error:</p>\n<pre><code>com.microsoft.sqlserver.jdbc.SQLServerException: Could not update the metadata that indicates database source_cdc_db is enabled for Change Data Capture. The failure occurred when executing the command 'SetCDCTracked(Value = 1)'.\nThe error returned was 15517: 'Cannot execute as the database principal because the principal &quot;**cdc**&quot; does not exist, this type of principal cannot be impersonated, or you do not have permission.'. Use the action and error to determine the cause of the failure and resubmit the request.\n</code></pre>\n<p>I do have installed on my machine the Microsoft SQL Server Developer (64-bit),Version 16.0.1000.6.</p>\n<p>Has anyone encountered this error? Any idea on the solution?</p>\n<p>Most of the solution cases I've looked at have the problem of ...principal &quot;<strong>dbo</strong>&quot; does not exist... but in my case this is different, it is complaining about ...principal &quot;<strong>cdc</strong>&quot; does not exist...</p>\n<p>This is for testing purposes and no real production db has been used. Normally I created a user and gave the db-owner database permission and sysadmin permission and had this same error. Then I tried the 'sa' user but the same error again.</p>\n<p>I am stresing out that I have no problem executing</p>\n<pre><code>USE source_cdc_db;\nEXEC sys.sp_cdc_enable_db;\nGO\n</code></pre>\n<p>from Sql Server MM</p>\n"},{"tags":["java","elasticsearch","spring-data","spring-data-elasticsearch"],"answers":[{"tags":[],"owner":{"account_id":3344727,"reputation":2470,"user_id":2810099,"accept_rate":81,"display_name":"Marius Manastireanu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687343545,"creation_date":1687343545,"answer_id":76522325,"question_id":76506210,"body_markdown":"I ended up changing the field types from `Text` to `Keyword` and adjusting the code as follows:\r\n\r\n```java\r\nvar queryBuilder = new BoolQueryBuilder();\r\n\r\n// match exact phrase using keyword analyzer\r\nqueryBuilder\r\n    .should(QueryBuilders.matchPhraseQuery(FIELD_1, filterText).analyzer(&quot;keyword&quot;))\r\n    .should(QueryBuilders.matchPhraseQuery(FIELD_2, filterText).analyzer(&quot;keyword&quot;))\r\n    .should(QueryBuilders.matchPhraseQuery(FIELD_3, filterText).analyzer(&quot;keyword&quot;));\r\n\r\n// match beginning/end/middle of text with wildcard\r\nvar wildcardFilter = String.format(&quot;*%s*&quot;, filterText);\r\nqueryBuilder.\r\n    .should(QueryBuilders.wildcardQuery(FIELD_1, wildcardFilter))\r\n    .should(QueryBuilders.wildcardQuery(FIELD_2, wildcardFilter))\r\n    .should(QueryBuilders.wildcardQuery(FIELD_3, wildcardFilter));\r\n\r\n// at least one optional clause (&quot;should&quot;) has to match \r\nqueryBuilder.minimumShouldMatch(1);\r\nqueryBuilder.must(QueryBuilders.termQuery(FIELD_X, &quot;...&quot;)));\r\n```\r\n\r\nseems to work pretty well for most of the cases I tested against.\r\n\r\nProbably it&#39;s not the best way to achieve this, but it gets the job done.","title":"How to perform a text/phrase search with spring-data and elasticsearch?","body":"<p>I ended up changing the field types from <code>Text</code> to <code>Keyword</code> and adjusting the code as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>var queryBuilder = new BoolQueryBuilder();\n\n// match exact phrase using keyword analyzer\nqueryBuilder\n    .should(QueryBuilders.matchPhraseQuery(FIELD_1, filterText).analyzer(&quot;keyword&quot;))\n    .should(QueryBuilders.matchPhraseQuery(FIELD_2, filterText).analyzer(&quot;keyword&quot;))\n    .should(QueryBuilders.matchPhraseQuery(FIELD_3, filterText).analyzer(&quot;keyword&quot;));\n\n// match beginning/end/middle of text with wildcard\nvar wildcardFilter = String.format(&quot;*%s*&quot;, filterText);\nqueryBuilder.\n    .should(QueryBuilders.wildcardQuery(FIELD_1, wildcardFilter))\n    .should(QueryBuilders.wildcardQuery(FIELD_2, wildcardFilter))\n    .should(QueryBuilders.wildcardQuery(FIELD_3, wildcardFilter));\n\n// at least one optional clause (&quot;should&quot;) has to match \nqueryBuilder.minimumShouldMatch(1);\nqueryBuilder.must(QueryBuilders.termQuery(FIELD_X, &quot;...&quot;)));\n</code></pre>\n<p>seems to work pretty well for most of the cases I tested against.</p>\n<p>Probably it's not the best way to achieve this, but it gets the job done.</p>\n"}],"owner":{"account_id":3344727,"reputation":2470,"user_id":2810099,"accept_rate":81,"display_name":"Marius Manastireanu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":219,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1687343545,"creation_date":1687174325,"question_id":76506210,"body_markdown":"I have an Index with documents with multiple text fields.\r\nI want to perform a search that should match documents that \r\n- either start with that _exact_ text,\r\n- either contain that _exact_ text,\r\n- or end with that _exact_ text\r\n\r\non a few pre-defined fields, and another _static_ condition.\r\n\r\n\r\nIn the first place I thought about implementing a search with the use of queryStringQuery and wildcards\r\n\r\n```java\r\nvar queryBuilder = new BoolQueryBuilder();\r\nqueryBuilder\r\n    .must(QueryBuilders.queryStringQuery(String.format(&quot;*%s*&quot;, QueryParser.escape(filterText)))\r\n         .field(FIELD_1)\r\n         .field(FIELD_2)\r\n         .field(FIELD_3)\r\n         .analyzeWildcard(true))\r\n    .must(QueryBuilders.termQuery(FIELD_X, &quot;...&quot;)));\r\nvar nativeQuery = new NativeSearchQueryBuilder().withQuery(queryBuilder).withPageable(pageable).build();\r\nelasticsearchOperations.search(nativeReq, MyEntity.class);\r\n```\r\n\r\nThis solution worked fine as long as the filterText is one word, but once the default/standard analyzer tokenises the text I get unexpected results (for my use-case).\r\n\r\nI&#39;ve been thinking about searching with phrase queries as such:\r\n```java\r\nvar queryBuilder = new BoolQueryBuilder();\r\nvar insideQuery = new BoolQueryBuilder();\r\ninsideQuery\r\n    .should(QueryBuilders.matchPhraseQuery(FIELD_1, filterText))\r\n    .should(QueryBuilders.matchPhraseQuery(FIELD_2, filterText))\r\n    .should(QueryBuilders.matchPhraseQuery(FIELD_3, filterText));\r\nqueryBuilder\r\n    .should(insideQuery).minimShouldMatch(1)\r\n    .must(QueryBuilders.termQuery(FIELD_X, &quot;...&quot;)));\r\n```\r\n\r\nBut I still get unexpected results.\r\n\r\nI also tried a solution similar with the first one and tried to force es to use the [keyword analyzer](https://www.elastic.co/guide/en/elasticsearch/reference/7.17/analysis-keyword-analyzer.html) but I did not manage to do so (0 results), maybe because my mappings define that fields as text not keywords?!\r\n\r\nCan you please help me/point me to a solution that will match my exact use-case? ","title":"How to perform a text/phrase search with spring-data and elasticsearch?","body":"<p>I have an Index with documents with multiple text fields.\nI want to perform a search that should match documents that</p>\n<ul>\n<li>either start with that <em>exact</em> text,</li>\n<li>either contain that <em>exact</em> text,</li>\n<li>or end with that <em>exact</em> text</li>\n</ul>\n<p>on a few pre-defined fields, and another <em>static</em> condition.</p>\n<p>In the first place I thought about implementing a search with the use of queryStringQuery and wildcards</p>\n<pre class=\"lang-java prettyprint-override\"><code>var queryBuilder = new BoolQueryBuilder();\nqueryBuilder\n    .must(QueryBuilders.queryStringQuery(String.format(&quot;*%s*&quot;, QueryParser.escape(filterText)))\n         .field(FIELD_1)\n         .field(FIELD_2)\n         .field(FIELD_3)\n         .analyzeWildcard(true))\n    .must(QueryBuilders.termQuery(FIELD_X, &quot;...&quot;)));\nvar nativeQuery = new NativeSearchQueryBuilder().withQuery(queryBuilder).withPageable(pageable).build();\nelasticsearchOperations.search(nativeReq, MyEntity.class);\n</code></pre>\n<p>This solution worked fine as long as the filterText is one word, but once the default/standard analyzer tokenises the text I get unexpected results (for my use-case).</p>\n<p>I've been thinking about searching with phrase queries as such:</p>\n<pre class=\"lang-java prettyprint-override\"><code>var queryBuilder = new BoolQueryBuilder();\nvar insideQuery = new BoolQueryBuilder();\ninsideQuery\n    .should(QueryBuilders.matchPhraseQuery(FIELD_1, filterText))\n    .should(QueryBuilders.matchPhraseQuery(FIELD_2, filterText))\n    .should(QueryBuilders.matchPhraseQuery(FIELD_3, filterText));\nqueryBuilder\n    .should(insideQuery).minimShouldMatch(1)\n    .must(QueryBuilders.termQuery(FIELD_X, &quot;...&quot;)));\n</code></pre>\n<p>But I still get unexpected results.</p>\n<p>I also tried a solution similar with the first one and tried to force es to use the <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/7.17/analysis-keyword-analyzer.html\" rel=\"nofollow noreferrer\">keyword analyzer</a> but I did not manage to do so (0 results), maybe because my mappings define that fields as text not keywords?!</p>\n<p>Can you please help me/point me to a solution that will match my exact use-case?</p>\n"},{"tags":["java","selenium-webdriver","electron","selenium-chromedriver","chromium"],"answers":[{"tags":[],"owner":{"account_id":18757976,"reputation":21,"user_id":13677526,"display_name":"sowmiya abi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675921856,"creation_date":1675921856,"answer_id":75394707,"question_id":75384556,"body_markdown":"Its has been resolved now. It happened due to version mismatch. I have installed the latest version of chromium driver. But, our electron application supports the lower version of chromium driver [100.0.4896.143]. We can check this by knowing the electron package which is used by dev team.","title":"Electron application got launched and disappeared within fraction of second","body":"<p>Its has been resolved now. It happened due to version mismatch. I have installed the latest version of chromium driver. But, our electron application supports the lower version of chromium driver [100.0.4896.143]. We can check this by knowing the electron package which is used by dev team.</p>\n"}],"owner":{"account_id":18757976,"reputation":21,"user_id":13677526,"display_name":"sowmiya abi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":106,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1687343485,"creation_date":1675852696,"question_id":75384556,"body_markdown":"I am trying the launch the electron based application using chromium. But, once it got launched within fraction of second it got disappeared. Below is my code. How we can keep the application to stay for next action.&#160;\r\n\r\nAnd also got below exception in my console. I am using chromium version : 110.0.5481.78\r\n and current chrome browser version: 110.0.5481.77\r\n\r\nIn electron releases I didnt find the chromium release for Version 110.0.5481.78. [https://github.com/electron/electron/releases]\r\n    \r\n```System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;chromium path&quot;);\r\n&#160;ChromeOptions options = new ChromeOptions();\r\n&#160; options.setBinary(&quot;C://folder//folderpath//executableFilePath.exe&quot;); &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;\r\n&#160;&#160;options.setCapability(&quot;chromeOptions&quot;, options);\r\n&#160;WebDriver weBdriver = new ChromeDriver(options); ```  \r\n\r\nConsole logs:\r\n\r\n   ```  org.openqa.selenium.SessionNotCreatedException: session not created: This version of ChromeDriver only supports Chrome version 110\r\n        Current browser version is 100.0.4896.143 with binary path C:\\Program Files\\file\\file.exe\r\n        Build info: version: &#39;3.141.59&#39;, revision: &#39;e82be7d358&#39;, time: &#39;2018-11-14T08:17:03&#39;\r\n        System info: host: &#39;&#39;, ip: &#39;&#39;, os.name: &#39;Windows 10&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;10.0&#39;, java.version: &#39;17.0.5&#39;\r\n        Driver info: driver.version: ChromeDriver\r\n        remote stacktrace: Backtrace:\r\n        \tCr_z_deflate [0x00007FF6EB3BACE2+123234]\r\n        \t(No symbol) [0x00007FF6EB316F82]\r\n        \t(No symbol) [0x00007FF6EB1C772D]\r\n        \t(No symbol) [0x00007FF6EB1F0840]\r\n        \t(No symbol) [0x00007FF6EB1EB5F4]\r\n        \t(No symbol) [0x00007FF6EB1E8F79]\r\n        \t(No symbol) [0x00007FF6EB2251EA]\r\n        \t(No symbol) [0x00007FF6EB21D413]\r\n        \t(No symbol) [0x00007FF6EB1F329E]\r\n        \t(No symbol) [0x00007FF6EB1F454E]\r\n        \tGetHandleVerifier [0x00007FF6EB725030+3484560]\r\n        \tGetHandleVerifier [0x00007FF6EB76197B+3732699]\r\n        \tGetHandleVerifier [0x00007FF6EB765405+3747685]\r\n        \tGetHandleVerifier [0x00007FF6EB496EEA+805450]\r\n        \t(No symbol) [0x00007FF6EB323643]\r\n        \t(No symbol) [0x00007FF6EB32BC44]\r\n        \t(No symbol) [0x00007FF6EB32BD74]\r\n        \t(No symbol) [0x00007FF6EB3385FD]\r\n        \tBaseThreadInitThunk [0x00007FF9D6A87034+20]\r\n        \tRtlUserThreadStart [0x00007FF9D7802651+33]\r\n        \r\n        \tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n        \tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)\r\n        \tat java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n        \tat java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)\r\n        \tat java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480)\r\n        \tat org.openqa.selenium.remote.W3CHandshakeResponse.lambda$errorHandler$0(W3CHandshakeResponse.java:62)\r\n        \tat org.openqa.selenium.remote.HandshakeResponse.lambda$getResponseFunction$0(HandshakeResponse.java:30)\r\n        \tat org.openqa.selenium.remote.ProtocolHandshake.lambda$createSession$0(ProtocolHandshake.java:126)\r\n        \tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n        \tat java.base/java.util.Spliterators$ArraySpliterator.tryAdvance(Spliterators.java:1002)\r\n        \tat java.base/java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:129)\r\n        \tat java.base/java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:527)\r\n        \tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:513)\r\n        \tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n        \tat java.base/java.util.stream.FindOps$FindOp.evaluateSequential(FindOps.java:150)\r\n        \tat java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n        \tat java.base/java.util.stream.ReferencePipeline.findFirst(ReferencePipeline.java:647)\r\n        \tat org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:128)\r\n        \tat org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:74)\r\n        \tat org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:136)\r\n        \tat org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:83)\r\n        \tat org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:552)\r\n        \tat org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:213)\r\n        \tat org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:131)\r\n        \tat org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:181)\r\n        \tat org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:168)\r\n        \tat org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:157)\r\n        \t ``` ","title":"Electron application got launched and disappeared within fraction of second","body":"<p>I am trying the launch the electron based application using chromium. But, once it got launched within fraction of second it got disappeared. Below is my code. How we can keep the application to stay for next action. </p>\n<p>And also got below exception in my console. I am using chromium version : 110.0.5481.78\nand current chrome browser version: 110.0.5481.77</p>\n<p>In electron releases I didnt find the chromium release for Version 110.0.5481.78. [https://github.com/electron/electron/releases]</p>\n<pre><code> ChromeOptions options = new ChromeOptions();\n  options.setBinary(&quot;C://folder//folderpath//executableFilePath.exe&quot;);            \n  options.setCapability(&quot;chromeOptions&quot;, options);\n WebDriver weBdriver = new ChromeDriver(options); ```  \n\nConsole logs:\n\n   ```  org.openqa.selenium.SessionNotCreatedException: session not created: This version of ChromeDriver only supports Chrome version 110\n        Current browser version is 100.0.4896.143 with binary path C:\\Program Files\\file\\file.exe\n        Build info: version: '3.141.59', revision: 'e82be7d358', time: '2018-11-14T08:17:03'\n        System info: host: '', ip: '', os.name: 'Windows 10', os.arch: 'amd64', os.version: '10.0', java.version: '17.0.5'\n        Driver info: driver.version: ChromeDriver\n        remote stacktrace: Backtrace:\n            Cr_z_deflate [0x00007FF6EB3BACE2+123234]\n            (No symbol) [0x00007FF6EB316F82]\n            (No symbol) [0x00007FF6EB1C772D]\n            (No symbol) [0x00007FF6EB1F0840]\n            (No symbol) [0x00007FF6EB1EB5F4]\n            (No symbol) [0x00007FF6EB1E8F79]\n            (No symbol) [0x00007FF6EB2251EA]\n            (No symbol) [0x00007FF6EB21D413]\n            (No symbol) [0x00007FF6EB1F329E]\n            (No symbol) [0x00007FF6EB1F454E]\n            GetHandleVerifier [0x00007FF6EB725030+3484560]\n            GetHandleVerifier [0x00007FF6EB76197B+3732699]\n            GetHandleVerifier [0x00007FF6EB765405+3747685]\n            GetHandleVerifier [0x00007FF6EB496EEA+805450]\n            (No symbol) [0x00007FF6EB323643]\n            (No symbol) [0x00007FF6EB32BC44]\n            (No symbol) [0x00007FF6EB32BD74]\n            (No symbol) [0x00007FF6EB3385FD]\n            BaseThreadInitThunk [0x00007FF9D6A87034+20]\n            RtlUserThreadStart [0x00007FF9D7802651+33]\n        \n            at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n            at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)\n            at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n            at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)\n            at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480)\n            at org.openqa.selenium.remote.W3CHandshakeResponse.lambda$errorHandler$0(W3CHandshakeResponse.java:62)\n            at org.openqa.selenium.remote.HandshakeResponse.lambda$getResponseFunction$0(HandshakeResponse.java:30)\n            at org.openqa.selenium.remote.ProtocolHandshake.lambda$createSession$0(ProtocolHandshake.java:126)\n            at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\n            at java.base/java.util.Spliterators$ArraySpliterator.tryAdvance(Spliterators.java:1002)\n            at java.base/java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:129)\n            at java.base/java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:527)\n            at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:513)\n            at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\n            at java.base/java.util.stream.FindOps$FindOp.evaluateSequential(FindOps.java:150)\n            at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n            at java.base/java.util.stream.ReferencePipeline.findFirst(ReferencePipeline.java:647)\n            at org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:128)\n            at org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:74)\n            at org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:136)\n            at org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:83)\n            at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:552)\n            at org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:213)\n            at org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:131)\n            at org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:181)\n            at org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:168)\n            at org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:157)\n             ``` \n</code></pre>\n"},{"tags":["java","gradle","intellij-idea"],"comments":[{"owner":{"account_id":3538058,"reputation":5428,"user_id":2960034,"display_name":"y.bedrov"},"score":0,"creation_date":1687352784,"post_id":76521722,"comment_id":134924601,"body_markdown":"It&#39;s possible to set M options for your Gradle project: https://www.jetbrains.com/help/idea/gradle.html#gradle_vm_options","body":"It&#39;s possible to set M options for your Gradle project: <a href=\"https://www.jetbrains.com/help/idea/gradle.html#gradle_vm_options\" rel=\"nofollow noreferrer\">jetbrains.com/help/idea/gradle.html#gradle_vm_options</a>"}],"answers":[{"comments":[{"owner":{"account_id":11179248,"reputation":11910,"user_id":8203759,"display_name":"Konstantin Annikov"},"score":0,"creation_date":1687956350,"post_id":76522232,"comment_id":135008995,"body_markdown":"This is memory limit for the IDE itself, not for the project","body":"This is memory limit for the IDE itself, not for the project"}],"tags":[],"owner":{"account_id":16215668,"reputation":9,"user_id":11708570,"display_name":"Vladmix6"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1687342874,"creation_date":1687342874,"answer_id":76522232,"question_id":76521722,"body_markdown":"It is possible to change IntelliJ heap memory size from Main menu bar -&gt; Help tab -&gt; Change Memory Settings -&gt; Change &quot;Maximum Heap Size&quot; value to something bigger than 4096. Then restart IDE.","title":"java.lang.OutOfMemoryError: Java heap space while building gradle project","body":"<p>It is possible to change IntelliJ heap memory size from Main menu bar -&gt; Help tab -&gt; Change Memory Settings -&gt; Change &quot;Maximum Heap Size&quot; value to something bigger than 4096. Then restart IDE.</p>\n"}],"owner":{"account_id":9973312,"reputation":173,"user_id":8007803,"accept_rate":40,"display_name":"lupin"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1687342874,"creation_date":1687338997,"question_id":76521722,"body_markdown":"How to solve this exception while building a gradle project in intellij? There is no option to configure the memory space for project.","title":"java.lang.OutOfMemoryError: Java heap space while building gradle project","body":"<p>How to solve this exception while building a gradle project in intellij? There is no option to configure the memory space for project.</p>\n"},{"tags":["java","spring-security"],"comments":[{"owner":{"account_id":11288679,"reputation":923,"user_id":8278630,"display_name":"Farkhod Abdukodirov"},"score":0,"creation_date":1687395249,"post_id":76522228,"comment_id":134932250,"body_markdown":"Are you getting some more details in log stack trace?","body":"Are you getting some more details in log stack trace?"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1687426707,"post_id":76522228,"comment_id":134936408,"body_markdown":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example).","body":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}],"owner":{"account_id":23153143,"reputation":1,"user_id":22107859,"display_name":"Alexander Tupiza"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687342825,"creation_date":1687342825,"question_id":76522228,"body_markdown":"it my first project with spring security 6 and i use a custom filterchain, when i login in my thymeleaf form send the user and the password to my controller &quot;login1&quot; dont get inside and i redirect the same login page with code 302, but when in my Config security change .loginProcessingUrl(&quot;/login1&quot;) to .loginProcessingUrl(&quot;/login1!&quot;), my program works, but i dont know why if (&quot;login1!&quot;) doesnt exist in my controller class , can somebody  help me ?\r\n\r\nwhen i try login sometime redirect to a blank page or the same login page\r\n```\r\nhere is mi login1.html\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xmlns:th=&quot;https://www.thymeleaf.org&quot;&gt;\r\n    &lt;head&gt;\r\n        &lt;title&gt;Spring Security Example &lt;/title&gt;\r\n    &lt;/head&gt;\r\n    &lt;body&gt;\r\n        &lt;div th:if=&quot;${param.error}&quot;&gt;\r\n            Invalid username and password.\r\n        &lt;/div&gt;\r\n        &lt;div th:if=&quot;${param.logout}&quot;&gt;\r\n            You have been logged out\r\n        &lt;/div&gt;\r\n        &lt;form th:action=&quot;@{/login1}&quot; method=&quot;post&quot;&gt;\r\n           \r\n            &lt;div&gt;&lt;label&gt; User Email : &lt;input type=&quot;text&quot; name=&quot;username&quot;/&gt; &lt;/label&gt;&lt;/div&gt;\r\n            &lt;div&gt;&lt;label&gt; Password: &lt;input type=&quot;password&quot; name=&quot;password&quot;/&gt; &lt;/label&gt;&lt;/div&gt;\r\n            &lt;div&gt;&lt;input type=&quot;submit&quot; value=&quot;Sign In&quot;/&gt;&lt;/div&gt;\r\n        &lt;/form&gt;\r\n    &lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\n\r\n```\r\nhere is my controller\r\npackage com.prueba.controller;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.security.authentication.AuthenticationManager;\r\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.PostMapping;\r\nimport org.springframework.web.bind.annotation.RequestParam;\r\nimport org.springframework.web.servlet.view.RedirectView;\r\n\r\nimport com.prueba.dao.Userdao;\r\nimport com.prueba.model.UserEntity;\r\n\r\n@Controller\r\npublic class UserController {\r\n\r\n\t@Autowired\r\n\tAuthenticationManager authenticationManager;\r\n\r\n\t@Autowired\r\n\tUserdao dao;\r\n\r\n\t@GetMapping(&quot;/&quot;)\r\n\tpublic String home() {\r\n\t\treturn &quot;home&quot;;\r\n\t}\r\n\r\n\t@GetMapping(&quot;/login1&quot;) // llamamos a login\r\n\tpublic String login() {\r\n\t\treturn &quot;login1&quot;;\r\n\t}\r\n\r\n\r\n\t@PostMapping(value = &quot;/login1&quot;) // metemos parametros en login y luego devolvemos hello\r\n\tprivate String acceso1(@RequestParam(&quot;username&quot;) String username, @RequestParam(&quot;password&quot;) String password) {\r\n\t\t//System.out.println(&quot;entre&quot;);\r\n\t\t\r\n\t\tUsernamePasswordAuthenticationToken auth = new UsernamePasswordAuthenticationToken(username, password);\r\n\t\t//System.out.println(auth.getPrincipal().toString());\r\n\t\t\r\n\t\tboolean a = authenticationManager.authenticate(auth).isAuthenticated();\r\n\t\t//System.out.println(&quot;es authenticado &quot; + a);\r\n\t\t\r\n\t\tauthenticationManager.authenticate(auth);\r\n\t\t//System.out.println(&quot;estoyaqui&quot;);\r\n\t\treturn &quot;hello&quot;;\r\n\r\n\t}\r\n\r\n\t@GetMapping(&quot;/lista&quot;)\r\n\tpublic void lista() {\r\n\t\tfor (UserEntity t : dao.findAll()) {\r\n\t\t\tSystem.out.println(t.toString());\r\n\t\t}\r\n\t}\r\n\r\n\t@GetMapping(&quot;/hello&quot;)\r\n\tpublic String hello() {\r\n\t\treturn &quot;hello&quot;;\r\n\t}\r\n}\r\n\r\n```\r\n\r\n```\r\nhere is my ConfigSecurity\r\npackage com.prueba.config;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.security.authentication.AuthenticationManager;\r\nimport org.springframework.security.config.Customizer;\r\nimport org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\r\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\nimport org.springframework.security.config.http.SessionCreationPolicy;\r\nimport org.springframework.security.core.userdetails.UserDetailsService;\r\nimport org.springframework.security.crypto.password.NoOpPasswordEncoder;\r\nimport org.springframework.security.crypto.password.PasswordEncoder;\r\nimport org.springframework.security.web.SecurityFilterChain;\r\nimport org.springframework.security.web.authentication.AuthenticationSuccessHandler;\r\n\r\nimport com.prueba.service.LoginSuccesHandlerImp;\r\n\r\n@Configuration//decimos que vamos a confirgurar metodos propios de spring\r\npublic class ConfigSecurity {\r\n\r\n\t@Autowired\r\n\tUserDetailsService userDetailsService;\r\n\r\n\t@Autowired\r\n\tLoginSuccesHandlerImp loginSuccesHandlerImp;\r\n\t\r\n\t@Bean\r\n\tSecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception{\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t\r\n\r\n        return http\r\n                .csrf(config -&gt; config.disable())\r\n                .authorizeHttpRequests((authorizeHttpRequests) -&gt;\r\n                authorizeHttpRequests\r\n                \t\t.anyRequest().authenticated()\r\n                \t\t\r\n                \t\t\r\n                \t\t)\r\n                \t\t.formLogin((form) -&gt; form\r\n\t            \t\t\t\t.loginPage(&quot;/login1&quot;)\r\n\t            \t\t\t\t.permitAll()\r\n\t            \t\t\t\t.loginProcessingUrl(&quot;/login1&quot;)\r\n\t            \t\t\t\t//.successHandler(loginSuccesHandlerImp)\r\n\t            \t\t\t\r\n\t            \t\t\t\t\r\n\t            \t\t\t\t.failureUrl(&quot;/login?error=true&quot;)\r\n\t            \t\t\t\t\r\n\t            \t\t\t\t\r\n\t            \t\t\t)\r\n\t            \t\t\t.logout((logout) -&gt; logout.permitAll())\r\n\t            \t\t\t\r\n\t            \t\t\t\r\n                \r\n                .sessionManagement(session -&gt; {\r\n                    session.sessionCreationPolicy(SessionCreationPolicy.STATELESS);\r\n                })\r\n               \r\n                \r\n                .build();\r\n\t\t\r\n\t\r\n\t\t\r\n\t\t\r\n\t}\r\n\t\r\n\t@Bean\r\n\tpublic PasswordEncoder password() {\r\n\t\t\r\n\t\treturn  NoOpPasswordEncoder.getInstance();\r\n\t}\r\n\t@Bean\r\n\tAuthenticationManager autheticationManager(HttpSecurity http,PasswordEncoder passwordEncoder) throws Exception {\r\n\t\t//enviamos un objeto del tipo AuthenticationManagerBuilder.class\r\n\t\t//le enviamos el usuario que vamos autenticar que esta arriba userDetailsService ()\r\n\t\tSystem.out.println(&quot;entro aqui 3&quot;);\r\n\t\t\r\n\t\treturn http.\r\n\t\t\t\tgetSharedObject(AuthenticationManagerBuilder.class)\r\n\t\t\t\t.userDetailsService(userDetailsService)\r\n\t\t\t\t.passwordEncoder(passwordEncoder)\r\n\t\t\t\t.and()\r\n\t\t\t\t.build();\r\n\t\t\r\n\t}\r\n\t@Bean\r\n\tpublic AuthenticationSuccessHandler appAuthenticationSuccessHandler(){\r\n\t     return new LoginSuccesHandlerImp();\r\n\t}\r\n}\r\n\r\n```\r\n\r\n```\r\nhere is my UserDetailsServiceImp\r\npackage com.prueba.service;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.Collections;\r\nimport java.util.List;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.security.core.GrantedAuthority;\r\nimport org.springframework.security.core.authority.SimpleGrantedAuthority;\r\nimport org.springframework.security.core.userdetails.User;\r\nimport org.springframework.security.core.userdetails.UserDetails;\r\nimport org.springframework.security.core.userdetails.UserDetailsService;\r\nimport org.springframework.security.core.userdetails.UsernameNotFoundException;\r\nimport org.springframework.stereotype.Service;\r\n\r\nimport com.prueba.dao.Userdao;\r\nimport com.prueba.model.UserEntity;\r\n\r\n@Service\r\n\r\npublic class UserDetailsServiceImp implements UserDetailsService {\r\n\r\n\t@Autowired\r\n\tUserdao dao;\r\n\t\r\n\t\r\n\t@Override\r\n\tpublic UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\r\n\t\tUserEntity user1 = dao.findByName(username).orElseThrow(()-&gt;new UsernameNotFoundException(&quot;usuario no encontrado&quot;));\r\n\t\tSystem.out.println(&quot;user1&quot;+ user1.toString());\r\n\t\t\r\n\t\t\r\n\t\tList&lt;GrantedAuthority&gt; authorities = new ArrayList&lt;&gt;();\r\n\t    authorities.add(new SimpleGrantedAuthority(user1.getRol()));\r\n\t    var user2 = new User(user1.getUsername()\r\n\t\t\t\t,user1.getPassword()\r\n\t\t\t\t,true\r\n\t\t\t\t,true\r\n\t\t\t\t,true\r\n\t\t\t\t,true\r\n\t\t\t\t,authorities);\r\n\t    System.out.println(user2.toString());\r\n\t\treturn user2;\r\n\t}\r\n\r\n```\r\n\r\n```\r\nits my pom.xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.1.0&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.prueba.inicio&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;ProyectoEjed&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;Pruebaaax&lt;/name&gt;\r\n\t&lt;description&gt;Shop with security and JWT&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t \t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt; \r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.thymeleaf.extras&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;thymeleaf-extras-springsecurity6&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.mysql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t&lt;exclude&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;/exclude&gt;\r\n\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\n\r\n\r\n","title":"spring security, when i have a success access in login its redirect me to the same login page","body":"<p>it my first project with spring security 6 and i use a custom filterchain, when i login in my thymeleaf form send the user and the password to my controller &quot;login1&quot; dont get inside and i redirect the same login page with code 302, but when in my Config security change .loginProcessingUrl(&quot;/login1&quot;) to .loginProcessingUrl(&quot;/login1!&quot;), my program works, but i dont know why if (&quot;login1!&quot;) doesnt exist in my controller class , can somebody  help me ?</p>\n<p>when i try login sometime redirect to a blank page or the same login page</p>\n<pre><code>here is mi login1.html\n&lt;!DOCTYPE html&gt;\n&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xmlns:th=&quot;https://www.thymeleaf.org&quot;&gt;\n    &lt;head&gt;\n        &lt;title&gt;Spring Security Example &lt;/title&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n        &lt;div th:if=&quot;${param.error}&quot;&gt;\n            Invalid username and password.\n        &lt;/div&gt;\n        &lt;div th:if=&quot;${param.logout}&quot;&gt;\n            You have been logged out\n        &lt;/div&gt;\n        &lt;form th:action=&quot;@{/login1}&quot; method=&quot;post&quot;&gt;\n           \n            &lt;div&gt;&lt;label&gt; User Email : &lt;input type=&quot;text&quot; name=&quot;username&quot;/&gt; &lt;/label&gt;&lt;/div&gt;\n            &lt;div&gt;&lt;label&gt; Password: &lt;input type=&quot;password&quot; name=&quot;password&quot;/&gt; &lt;/label&gt;&lt;/div&gt;\n            &lt;div&gt;&lt;input type=&quot;submit&quot; value=&quot;Sign In&quot;/&gt;&lt;/div&gt;\n        &lt;/form&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<pre><code>here is my controller\npackage com.prueba.controller;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.security.authentication.AuthenticationManager;\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestParam;\nimport org.springframework.web.servlet.view.RedirectView;\n\nimport com.prueba.dao.Userdao;\nimport com.prueba.model.UserEntity;\n\n@Controller\npublic class UserController {\n\n    @Autowired\n    AuthenticationManager authenticationManager;\n\n    @Autowired\n    Userdao dao;\n\n    @GetMapping(&quot;/&quot;)\n    public String home() {\n        return &quot;home&quot;;\n    }\n\n    @GetMapping(&quot;/login1&quot;) // llamamos a login\n    public String login() {\n        return &quot;login1&quot;;\n    }\n\n\n    @PostMapping(value = &quot;/login1&quot;) // metemos parametros en login y luego devolvemos hello\n    private String acceso1(@RequestParam(&quot;username&quot;) String username, @RequestParam(&quot;password&quot;) String password) {\n        //System.out.println(&quot;entre&quot;);\n        \n        UsernamePasswordAuthenticationToken auth = new UsernamePasswordAuthenticationToken(username, password);\n        //System.out.println(auth.getPrincipal().toString());\n        \n        boolean a = authenticationManager.authenticate(auth).isAuthenticated();\n        //System.out.println(&quot;es authenticado &quot; + a);\n        \n        authenticationManager.authenticate(auth);\n        //System.out.println(&quot;estoyaqui&quot;);\n        return &quot;hello&quot;;\n\n    }\n\n    @GetMapping(&quot;/lista&quot;)\n    public void lista() {\n        for (UserEntity t : dao.findAll()) {\n            System.out.println(t.toString());\n        }\n    }\n\n    @GetMapping(&quot;/hello&quot;)\n    public String hello() {\n        return &quot;hello&quot;;\n    }\n}\n\n</code></pre>\n<pre><code>here is my ConfigSecurity\npackage com.prueba.config;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.authentication.AuthenticationManager;\nimport org.springframework.security.config.Customizer;\nimport org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.http.SessionCreationPolicy;\nimport org.springframework.security.core.userdetails.UserDetailsService;\nimport org.springframework.security.crypto.password.NoOpPasswordEncoder;\nimport org.springframework.security.crypto.password.PasswordEncoder;\nimport org.springframework.security.web.SecurityFilterChain;\nimport org.springframework.security.web.authentication.AuthenticationSuccessHandler;\n\nimport com.prueba.service.LoginSuccesHandlerImp;\n\n@Configuration//decimos que vamos a confirgurar metodos propios de spring\npublic class ConfigSecurity {\n\n    @Autowired\n    UserDetailsService userDetailsService;\n\n    @Autowired\n    LoginSuccesHandlerImp loginSuccesHandlerImp;\n    \n    @Bean\n    SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception{\n        \n        \n        \n        \n\n        return http\n                .csrf(config -&gt; config.disable())\n                .authorizeHttpRequests((authorizeHttpRequests) -&gt;\n                authorizeHttpRequests\n                        .anyRequest().authenticated()\n                        \n                        \n                        )\n                        .formLogin((form) -&gt; form\n                                .loginPage(&quot;/login1&quot;)\n                                .permitAll()\n                                .loginProcessingUrl(&quot;/login1&quot;)\n                                //.successHandler(loginSuccesHandlerImp)\n                            \n                                \n                                .failureUrl(&quot;/login?error=true&quot;)\n                                \n                                \n                            )\n                            .logout((logout) -&gt; logout.permitAll())\n                            \n                            \n                \n                .sessionManagement(session -&gt; {\n                    session.sessionCreationPolicy(SessionCreationPolicy.STATELESS);\n                })\n               \n                \n                .build();\n        \n    \n        \n        \n    }\n    \n    @Bean\n    public PasswordEncoder password() {\n        \n        return  NoOpPasswordEncoder.getInstance();\n    }\n    @Bean\n    AuthenticationManager autheticationManager(HttpSecurity http,PasswordEncoder passwordEncoder) throws Exception {\n        //enviamos un objeto del tipo AuthenticationManagerBuilder.class\n        //le enviamos el usuario que vamos autenticar que esta arriba userDetailsService ()\n        System.out.println(&quot;entro aqui 3&quot;);\n        \n        return http.\n                getSharedObject(AuthenticationManagerBuilder.class)\n                .userDetailsService(userDetailsService)\n                .passwordEncoder(passwordEncoder)\n                .and()\n                .build();\n        \n    }\n    @Bean\n    public AuthenticationSuccessHandler appAuthenticationSuccessHandler(){\n         return new LoginSuccesHandlerImp();\n    }\n}\n\n</code></pre>\n<pre><code>here is my UserDetailsServiceImp\npackage com.prueba.service;\n\nimport java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.List;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.security.core.GrantedAuthority;\nimport org.springframework.security.core.authority.SimpleGrantedAuthority;\nimport org.springframework.security.core.userdetails.User;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.security.core.userdetails.UserDetailsService;\nimport org.springframework.security.core.userdetails.UsernameNotFoundException;\nimport org.springframework.stereotype.Service;\n\nimport com.prueba.dao.Userdao;\nimport com.prueba.model.UserEntity;\n\n@Service\n\npublic class UserDetailsServiceImp implements UserDetailsService {\n\n    @Autowired\n    Userdao dao;\n    \n    \n    @Override\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\n        UserEntity user1 = dao.findByName(username).orElseThrow(()-&gt;new UsernameNotFoundException(&quot;usuario no encontrado&quot;));\n        System.out.println(&quot;user1&quot;+ user1.toString());\n        \n        \n        List&lt;GrantedAuthority&gt; authorities = new ArrayList&lt;&gt;();\n        authorities.add(new SimpleGrantedAuthority(user1.getRol()));\n        var user2 = new User(user1.getUsername()\n                ,user1.getPassword()\n                ,true\n                ,true\n                ,true\n                ,true\n                ,authorities);\n        System.out.println(user2.toString());\n        return user2;\n    }\n\n</code></pre>\n<pre><code>its my pom.xml\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.1.0&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.prueba.inicio&lt;/groupId&gt;\n    &lt;artifactId&gt;ProyectoEjed&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;Pruebaaax&lt;/name&gt;\n    &lt;description&gt;Shop with security and JWT&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt; \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.thymeleaf.extras&lt;/groupId&gt;\n            &lt;artifactId&gt;thymeleaf-extras-springsecurity6&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","google-cloud-dataflow","apache-beam"],"comments":[{"owner":{"account_id":15285793,"reputation":1958,"user_id":11028850,"display_name":"Sakshi Gatyan"},"score":0,"creation_date":1687440586,"post_id":76522084,"comment_id":134939554,"body_markdown":"This seems like an internal issue I would suggest opening an issue on GCP [issuetracker](https://cloud.google.com/support/docs/issue-trackers) or file a support case explaining the scenario.","body":"This seems like an internal issue I would suggest opening an issue on GCP <a href=\"https://cloud.google.com/support/docs/issue-trackers\" rel=\"nofollow noreferrer\">issuetracker</a> or file a support case explaining the scenario."},{"owner":{"account_id":4597030,"reputation":120,"user_id":3728760,"display_name":"Itay A"},"score":0,"creation_date":1687983283,"post_id":76522084,"comment_id":135014657,"body_markdown":"Thank you, @SakshiGatyan I will give that a try.","body":"Thank you, @SakshiGatyan I will give that a try."},{"owner":{"account_id":1874246,"reputation":1390,"user_id":1695821,"display_name":"Bruno Volpato"},"score":0,"creation_date":1688563677,"post_id":76522084,"comment_id":135090099,"body_markdown":"Can you provide more details on what do you mean about &quot;empty messages&quot;? Are you looking at it after your GroupByKey?","body":"Can you provide more details on what do you mean about &quot;empty messages&quot;? Are you looking at it after your GroupByKey?"},{"owner":{"account_id":4597030,"reputation":120,"user_id":3728760,"display_name":"Itay A"},"score":0,"creation_date":1692608706,"post_id":76522084,"comment_id":135641614,"body_markdown":"@BrunoVolpato I am currently examining the code after GroupByKey. Occasionally, I encounter Null objects, although I am confident that no Null things exist with the Inputs. \nThis issue does not occur when I run the code on my computer.\nAs SakshiGatyan said, it is an issue on GCP. However, at this time, we have decided not to proceed with that particular code.\nThanks","body":"@BrunoVolpato I am currently examining the code after GroupByKey. Occasionally, I encounter Null objects, although I am confident that no Null things exist with the Inputs.  This issue does not occur when I run the code on my computer. As SakshiGatyan said, it is an issue on GCP. However, at this time, we have decided not to proceed with that particular code. Thanks"}],"owner":{"account_id":4597030,"reputation":120,"user_id":3728760,"display_name":"Itay A"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687342772,"creation_date":1687341729,"question_id":76522084,"body_markdown":"**For example**:\r\n\r\nI am receiving and analyzing stream data in JSON format from GCP pub-sub, consisting of 320K unique messages. However, I encountered an issue with the duplication window, as it resulted in an additional 8.5K empty Messages.  \r\nThe number of additional empty elements is not consistent\r\n\r\n**How did I know there was an extra element?**\r\n\r\n1. I am checking the value for each collection and writing it on logs so I can see all the non-empty 320K messages and the additional 8.5K empty messages.\r\n\r\n2. Dataflow UI - refer to the attached image.\r\n\r\n   [![enter image description here](https://i.stack.imgur.com/QwuqY.png)](https://i.stack.imgur.com/QwuqY.png)\r\n\r\n**This is the code:**\r\n\r\n```\r\nRepeatedly triggerPersonWindow = Repeatedly.forever(AfterProcessingTime.pastFirstElementInPane());\r\n\r\nWindow&lt;KV&lt;String, PubSubRelationsMessage&gt;&gt; personWindow = Window.&lt;KV&lt;String, PubSubRelationsMessage&gt;&gt;into(FixedWindows.of(Duration.standardMinutes(10)))\r\n                .triggering(triggerPersonWindow)\r\n                .withAllowedLateness(Duration.ZERO)\r\n                .discardingFiredPanes();\r\n\r\n\r\nPCollectionTuple separateRelationMessages = parsedRelationMessages.get(ParseSplitPersonCompanyMessage.parsedRelationMessageTag)\r\n                .apply(&quot;Person Window&quot;, personWindow)\r\n                .apply(&quot;PS Deduplication&quot;, GroupByKey.create())\r\n                .apply(&quot;Separate Messages&quot;, ParDo.of(new SeparateRelationMessages())\r\n                        .withOutputTags(SeparateRelationMessages.updateDeleteFlowTag, TupleTagList.of(SeparateRelationMessages.addedTag).and(GlobalTupleTag.InputError).and(GlobalTupleTag.GeneralError)));\r\n```\r\n\r\nApache Beam Version 2.37.0\r\n\r\nGradle 7.2\r\n\r\nJava 17\r\n\r\n**I attempted to:**\r\n\r\n- Upgrading the versions of Apache Beam, Gradle, and Java.\r\n\r\n- Reducing the number of DF workers to just one worker.\r\n\r\nUnfortunately, nothing has helped solve the issue.\r\n\r\nThanks :)","title":"Why are Apache Beam Transforms causing extra null elements in PCollection Window on GCP Dataflow?","body":"<p><strong>For example</strong>:</p>\n<p>I am receiving and analyzing stream data in JSON format from GCP pub-sub, consisting of 320K unique messages. However, I encountered an issue with the duplication window, as it resulted in an additional 8.5K empty Messages.<br />\nThe number of additional empty elements is not consistent</p>\n<p><strong>How did I know there was an extra element?</strong></p>\n<ol>\n<li><p>I am checking the value for each collection and writing it on logs so I can see all the non-empty 320K messages and the additional 8.5K empty messages.</p>\n</li>\n<li><p>Dataflow UI - refer to the attached image.</p>\n<p><a href=\"https://i.stack.imgur.com/QwuqY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QwuqY.png\" alt=\"enter image description here\" /></a></p>\n</li>\n</ol>\n<p><strong>This is the code:</strong></p>\n<pre><code>Repeatedly triggerPersonWindow = Repeatedly.forever(AfterProcessingTime.pastFirstElementInPane());\n\nWindow&lt;KV&lt;String, PubSubRelationsMessage&gt;&gt; personWindow = Window.&lt;KV&lt;String, PubSubRelationsMessage&gt;&gt;into(FixedWindows.of(Duration.standardMinutes(10)))\n                .triggering(triggerPersonWindow)\n                .withAllowedLateness(Duration.ZERO)\n                .discardingFiredPanes();\n\n\nPCollectionTuple separateRelationMessages = parsedRelationMessages.get(ParseSplitPersonCompanyMessage.parsedRelationMessageTag)\n                .apply(&quot;Person Window&quot;, personWindow)\n                .apply(&quot;PS Deduplication&quot;, GroupByKey.create())\n                .apply(&quot;Separate Messages&quot;, ParDo.of(new SeparateRelationMessages())\n                        .withOutputTags(SeparateRelationMessages.updateDeleteFlowTag, TupleTagList.of(SeparateRelationMessages.addedTag).and(GlobalTupleTag.InputError).and(GlobalTupleTag.GeneralError)));\n</code></pre>\n<p>Apache Beam Version 2.37.0</p>\n<p>Gradle 7.2</p>\n<p>Java 17</p>\n<p><strong>I attempted to:</strong></p>\n<ul>\n<li><p>Upgrading the versions of Apache Beam, Gradle, and Java.</p>\n</li>\n<li><p>Reducing the number of DF workers to just one worker.</p>\n</li>\n</ul>\n<p>Unfortunately, nothing has helped solve the issue.</p>\n<p>Thanks :)</p>\n"},{"tags":["java","arraylist"],"comments":[{"owner":{"account_id":21025753,"reputation":1,"user_id":15877732,"display_name":"AmcPL"},"score":0,"creation_date":1620557106,"post_id":67456751,"comment_id":119231042,"body_markdown":"and only two temp i want use value from string to name Arraylist :)","body":"and only two temp i want use value from string to name Arraylist :)"},{"owner":{"account_id":6243711,"reputation":1571,"user_id":4856413,"display_name":"sanjeevRm"},"score":0,"creation_date":1620557131,"post_id":67456751,"comment_id":119231048,"body_markdown":"easy way would be to rename variable `temp` to something else, like `anotherTemp`","body":"easy way would be to rename variable <code>temp</code> to something else, like <code>anotherTemp</code>"},{"owner":{"account_id":21025753,"reputation":1,"user_id":15877732,"display_name":"AmcPL"},"score":0,"creation_date":1620557312,"post_id":67456751,"comment_id":119231095,"body_markdown":"no work bro :( or I&#39;m stupid","body":"no work bro :( or I&#39;m stupid"},{"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"score":0,"creation_date":1687342745,"post_id":67456751,"comment_id":134922431,"body_markdown":"&#39;String temp&#39; declares a variable named &#39;temp&#39;.  &#39;ArrayList&lt;&gt; temp&#39; declares a variable named &#39;temp&#39;.  Surely you can see that the name &#39;temp&#39; is now ambiguous?","body":"&#39;String temp&#39; declares a variable named &#39;temp&#39;.  &#39;ArrayList&lt;&gt; temp&#39; declares a variable named &#39;temp&#39;.  Surely you can see that the name &#39;temp&#39; is now ambiguous?"}],"answers":[{"tags":[],"owner":{"account_id":5228434,"reputation":6067,"user_id":10780861,"display_name":"Nisanth Reddy"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1620671255,"creation_date":1620671255,"answer_id":67475812,"question_id":67456751,"body_markdown":"It is not possible to declare two variables with the same name in Java. Might work for two people inside a house to be named John and John but unfortunately not in java.\r\n\r\nThe only solution here would be to rename one or the other variable into something other than temp. If you have already tried this, what error are you facing ?","title":"Java variable temp is already defined in method Man_w_t(java.util.ArrayList&lt;java.lang.String&gt;)","body":"<p>It is not possible to declare two variables with the same name in Java. Might work for two people inside a house to be named John and John but unfortunately not in java.</p>\n<p>The only solution here would be to rename one or the other variable into something other than temp. If you have already tried this, what error are you facing ?</p>\n"}],"owner":{"account_id":21025753,"reputation":1,"user_id":15877732,"display_name":"AmcPL"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":183,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1687342481,"creation_date":1620556762,"question_id":67456751,"body_markdown":"I looking for help with a problem I want to use the name of ArrayList from string any suggestion on how to repair this error :)\r\nI link my code fragment \r\n\r\n    String temp = lista_Prac.get(num-1);\r\n    ArrayList&lt;String&gt;  temp = new ArrayList&lt;String&gt;();","title":"Java variable temp is already defined in method Man_w_t(java.util.ArrayList&lt;java.lang.String&gt;)","body":"<p>I looking for help with a problem I want to use the name of ArrayList from string any suggestion on how to repair this error :)\nI link my code fragment</p>\n<pre><code>String temp = lista_Prac.get(num-1);\nArrayList&lt;String&gt;  temp = new ArrayList&lt;String&gt;();\n</code></pre>\n"},{"tags":["java","spring-boot","spring-webflux","global-filter"],"comments":[{"owner":{"account_id":28626667,"reputation":11,"user_id":21918514,"display_name":"Sandeep"},"score":0,"creation_date":1687427568,"post_id":76507665,"comment_id":134936636,"body_markdown":"Able to solve it based on the answer from this link\nhttps://stackoverflow.com/questions/75186400/spring-webflux-post-request-data-is-getting-truncated-intermittently","body":"Able to solve it based on the answer from this link <a href=\"https://stackoverflow.com/questions/75186400/spring-webflux-post-request-data-is-getting-truncated-intermittently\" title=\"spring webflux post request data is getting truncated intermittently\">stackoverflow.com/questions/75186400/&hellip;</a>"}],"owner":{"account_id":28626667,"reputation":11,"user_id":21918514,"display_name":"Sandeep"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":115,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687342385,"creation_date":1687185516,"question_id":76507665,"body_markdown":"I am trying to use `ServerHttpRequestDecorator` and `ServerHttpResponseDecorator` to log the request and response bodies. I am facing a strange problem, the doNext method of the ServerHttpRequestDecorator is being called twice and due to that whole payload is not getting logged, its being logged in two parts\r\n\r\nFull payload:\r\n```json\r\n{\r\n\t&quot;id&quot;:&quot;789654&quot;,\r\n\t&quot;communication&quot;:&quot;email&quot;,\r\n\t&quot;document&quot;:[\r\n\t\t{\r\n\t\t\t&quot;identificationNumber&quot;:&quot;4563217&quot;,\r\n\t\t\t&quot;expiryDate&quot;:&quot;04042024&quot;\r\n\t\t}\r\n\t],\r\n\t&quot;firstName&quot;:&quot;KADE&quot;,\r\n\t&quot;lastName&quot;:&quot;NESSLEIN&quot;,\r\n\t&quot;clientType&quot;: &quot;EXISTING&quot;\r\n}\r\n```\r\nIncomplete payload Part 1: \r\n\r\n{\r\n\t&quot;id&quot;:&quot;789654&quot;,\r\n\t&quot;communication&quot;:&quot;email&quot;,\r\n\t&quot;document&quot;:[\r\n\t\t{\r\n\t\t\t&quot;identificationNumber&quot;:&quot;4563217&quot;,\r\n\t\t\t&quot;expiryDat\r\n\r\n\r\n\r\nIncomplete payload Part 2: \r\n\r\ne&quot;:&quot;04042024&quot;\r\n        }\r\n    ],\r\n    &quot;firstName&quot;:&quot;KADE&quot;,\r\n    &quot;lastName&quot;:&quot;NESSLEIN&quot;,\r\n    &quot;clientType&quot;: &quot;EXISTING&quot;\r\n} \r\n\r\n`ServerHttpRequestDecorator` and `ServerHttpResponseDecorator` code\r\n\r\n```\r\nprivate ServerHttpRequest getDecoratedRequest(ServerHttpRequest request) {\r\n\r\n        return new ServerHttpRequestDecorator(request) {\r\n            @Override\r\n            public Flux&lt;DataBuffer&gt; getBody() {\r\n\r\n                log.debug(&quot;requestId: {}, method: {} , url: {}&quot;, request.getId(), request.getMethodValue(), request.getURI());\r\n                return super.getBody().publishOn(Schedulers.boundedElastic()).doOnNext(dataBuffer -&gt; {\r\n\r\n                    try (ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream()) {\r\n\r\n                        Channels.newChannel(byteArrayOutputStream).write(dataBuffer.asByteBuffer().asReadOnlyBuffer());\r\n                        String requestBody = IOUtils.toString(byteArrayOutputStream.toByteArray(), StandardCharsets.UTF_8.toString());//MODIFY REQUEST and Return the Modified request\r\n                        log.debug(&quot;for requestId: {}, request body :{}&quot;, request.getId(), requestBody);\r\n                    } catch (Exception e) {\r\n                        log.error(e.getMessage());\r\n                    }\r\n                });\r\n            }\r\n        };\r\n    }\r\n```\r\n```java\r\nprivate ServerHttpResponseDecorator getDecoratedResponse(String path, ServerHttpResponse response, ServerHttpRequest request, DataBufferFactory dataBufferFactory) {\r\n        return new ServerHttpResponseDecorator(response) {\r\n\r\n            @Override\r\n            public Mono&lt;Void&gt; writeWith(final Publisher&lt;? extends DataBuffer&gt; body) {\r\n\r\n                if (body instanceof Flux) {\r\n\r\n                    Flux&lt;? extends DataBuffer&gt; fluxBody = (Flux&lt;? extends DataBuffer&gt;) body;\r\n\r\n                    return super.writeWith(fluxBody.buffer().map(dataBuffers -&gt; {\r\n\r\n                        DefaultDataBuffer joinedBuffers = new DefaultDataBufferFactory().join(dataBuffers);\r\n                        byte[] content = new byte[joinedBuffers.readableByteCount()];\r\n                        joinedBuffers.read(content);\r\n                         String responseBody = new String(content, StandardCharsets.UTF_8);//MODIFY RESPONSE and Return the Modified response\r\n                        log.debug(&quot;requestId: {}, method: {}, url: {}, \\nresponse body :{}&quot;, request.getId(), request.getMethodValue(), request.getURI(), responseBody);\r\n\r\n                        return dataBufferFactory.wrap(responseBody.getBytes());\r\n                    })).onErrorResume(err -&gt; {\r\n\r\n                        log.error(&quot;error while decorating Response: {}&quot;,err.getMessage());\r\n                        return Mono.empty();\r\n                    });\r\n\r\n                }\r\n                return super.writeWith(body);\r\n            }\r\n        };\r\n    }\r\n```\r\nSometimes payload is being logged completely but sometimes its broken and being logged in parts. \r\nKindly let me know how I can fix it to get the whole payload getting logged at all times.\r\n\r\nMany thanks,\r\nSandeep\r\n\r\n\r\nI am expecting to have the full payload logged at all times.","title":"Facing issue while trying to log request using ServerHttpRequestDecorator in Filter","body":"<p>I am trying to use <code>ServerHttpRequestDecorator</code> and <code>ServerHttpResponseDecorator</code> to log the request and response bodies. I am facing a strange problem, the doNext method of the ServerHttpRequestDecorator is being called twice and due to that whole payload is not getting logged, its being logged in two parts</p>\n<p>Full payload:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n    &quot;id&quot;:&quot;789654&quot;,\n    &quot;communication&quot;:&quot;email&quot;,\n    &quot;document&quot;:[\n        {\n            &quot;identificationNumber&quot;:&quot;4563217&quot;,\n            &quot;expiryDate&quot;:&quot;04042024&quot;\n        }\n    ],\n    &quot;firstName&quot;:&quot;KADE&quot;,\n    &quot;lastName&quot;:&quot;NESSLEIN&quot;,\n    &quot;clientType&quot;: &quot;EXISTING&quot;\n}\n</code></pre>\n<p>Incomplete payload Part 1:</p>\n<p>{\n&quot;id&quot;:&quot;789654&quot;,\n&quot;communication&quot;:&quot;email&quot;,\n&quot;document&quot;:[\n{\n&quot;identificationNumber&quot;:&quot;4563217&quot;,\n&quot;expiryDat</p>\n<p>Incomplete payload Part 2:</p>\n<p>e&quot;:&quot;04042024&quot;\n}\n],\n&quot;firstName&quot;:&quot;KADE&quot;,\n&quot;lastName&quot;:&quot;NESSLEIN&quot;,\n&quot;clientType&quot;: &quot;EXISTING&quot;\n}</p>\n<p><code>ServerHttpRequestDecorator</code> and <code>ServerHttpResponseDecorator</code> code</p>\n<pre><code>private ServerHttpRequest getDecoratedRequest(ServerHttpRequest request) {\n\n        return new ServerHttpRequestDecorator(request) {\n            @Override\n            public Flux&lt;DataBuffer&gt; getBody() {\n\n                log.debug(&quot;requestId: {}, method: {} , url: {}&quot;, request.getId(), request.getMethodValue(), request.getURI());\n                return super.getBody().publishOn(Schedulers.boundedElastic()).doOnNext(dataBuffer -&gt; {\n\n                    try (ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream()) {\n\n                        Channels.newChannel(byteArrayOutputStream).write(dataBuffer.asByteBuffer().asReadOnlyBuffer());\n                        String requestBody = IOUtils.toString(byteArrayOutputStream.toByteArray(), StandardCharsets.UTF_8.toString());//MODIFY REQUEST and Return the Modified request\n                        log.debug(&quot;for requestId: {}, request body :{}&quot;, request.getId(), requestBody);\n                    } catch (Exception e) {\n                        log.error(e.getMessage());\n                    }\n                });\n            }\n        };\n    }\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>private ServerHttpResponseDecorator getDecoratedResponse(String path, ServerHttpResponse response, ServerHttpRequest request, DataBufferFactory dataBufferFactory) {\n        return new ServerHttpResponseDecorator(response) {\n\n            @Override\n            public Mono&lt;Void&gt; writeWith(final Publisher&lt;? extends DataBuffer&gt; body) {\n\n                if (body instanceof Flux) {\n\n                    Flux&lt;? extends DataBuffer&gt; fluxBody = (Flux&lt;? extends DataBuffer&gt;) body;\n\n                    return super.writeWith(fluxBody.buffer().map(dataBuffers -&gt; {\n\n                        DefaultDataBuffer joinedBuffers = new DefaultDataBufferFactory().join(dataBuffers);\n                        byte[] content = new byte[joinedBuffers.readableByteCount()];\n                        joinedBuffers.read(content);\n                         String responseBody = new String(content, StandardCharsets.UTF_8);//MODIFY RESPONSE and Return the Modified response\n                        log.debug(&quot;requestId: {}, method: {}, url: {}, \\nresponse body :{}&quot;, request.getId(), request.getMethodValue(), request.getURI(), responseBody);\n\n                        return dataBufferFactory.wrap(responseBody.getBytes());\n                    })).onErrorResume(err -&gt; {\n\n                        log.error(&quot;error while decorating Response: {}&quot;,err.getMessage());\n                        return Mono.empty();\n                    });\n\n                }\n                return super.writeWith(body);\n            }\n        };\n    }\n</code></pre>\n<p>Sometimes payload is being logged completely but sometimes its broken and being logged in parts.\nKindly let me know how I can fix it to get the whole payload getting logged at all times.</p>\n<p>Many thanks,\nSandeep</p>\n<p>I am expecting to have the full payload logged at all times.</p>\n"},{"tags":["java","jenkins","groovy","shared-libraries","jenkins-groovy"],"comments":[{"owner":{"account_id":26967292,"reputation":200,"user_id":20533909,"display_name":"grzegorzgrzegorz"},"score":0,"creation_date":1687615119,"post_id":76505922,"comment_id":134963209,"body_markdown":"Did you try to use Global Pipeline Libraries configuration?","body":"Did you try to use Global Pipeline Libraries configuration?"}],"owner":{"account_id":18232468,"reputation":37,"user_id":13271129,"display_name":"Manisai Bashetty"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687342096,"creation_date":1687171909,"question_id":76505922,"body_markdown":"    (root)\r\n    +- src                     # Groovy source files\r\n    |   +- org\r\n    |        +- barHelper.groovy     # for org.Bar class\r\n    +- vars\r\n    |   +- foo.groovy          # for global &#39;foo&#39; variable\r\n    \r\n    I have common class in another repository with name commonhelper.groovy \r\n    (root)\r\n    +- src                     # Groovy source files\r\n    |   +- org\r\n    |        +- commonhelper.groovy \r\n\r\nthere was a method in commonhelper.groovy named methodA(). I want to used methodA() from commonhelper.groovy in barHelper.groovy\r\n\r\nIn the beginning of the file we tried to use import statements like package com.bar\r\n\r\nIs there any solution to acheive this?","title":"Load Jenkins Pipeline Shared Library from different repository","body":"<pre><code>(root)\n+- src                     # Groovy source files\n|   +- org\n|        +- barHelper.groovy     # for org.Bar class\n+- vars\n|   +- foo.groovy          # for global 'foo' variable\n\nI have common class in another repository with name commonhelper.groovy \n(root)\n+- src                     # Groovy source files\n|   +- org\n|        +- commonhelper.groovy \n</code></pre>\n<p>there was a method in commonhelper.groovy named methodA(). I want to used methodA() from commonhelper.groovy in barHelper.groovy</p>\n<p>In the beginning of the file we tried to use import statements like package com.bar</p>\n<p>Is there any solution to acheive this?</p>\n"},{"tags":["java","mysql","spring"],"comments":[{"owner":{"account_id":3865181,"reputation":301,"user_id":3201879,"display_name":"soulcoder"},"score":0,"creation_date":1530169582,"post_id":51075682,"comment_id":89142154,"body_markdown":"In 2nd thread when you try to delete record from aggregate, does you somehow manipulate also on Product table? There is product_fk related in the 2nd select query. Do you have cascades set on?","body":"In 2nd thread when you try to delete record from aggregate, does you somehow manipulate also on Product table? There is product_fk related in the 2nd select query. Do you have cascades set on?"},{"owner":{"account_id":3406665,"reputation":1692,"user_id":2857556,"accept_rate":11,"display_name":"Alpesh Jikadra"},"score":0,"creation_date":1530171712,"post_id":51075682,"comment_id":89143394,"body_markdown":"@soulcoder we are not manipulating anything on product table, as in both query delete query uses join from product table, and insert query has product_fk column only.","body":"@soulcoder we are not manipulating anything on product table, as in both query delete query uses join from product table, and insert query has product_fk column only."},{"owner":{"account_id":3406665,"reputation":1692,"user_id":2857556,"accept_rate":11,"display_name":"Alpesh Jikadra"},"score":0,"creation_date":1530172513,"post_id":51075682,"comment_id":89143869,"body_markdown":"@soulcoder that&#39;s true, this means product table is already locked by some other process right ?","body":"@soulcoder that&#39;s true, this means product table is already locked by some other process right ?"}],"answers":[{"tags":[],"owner":{"account_id":14893222,"reputation":1,"user_id":10754285,"display_name":"user10754285"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687340651,"creation_date":1687340582,"answer_id":76521941,"question_id":51075682,"body_markdown":"it locked when execute sql.\r\n\r\nlook this example.\r\n\r\ndelete sql will delete record 1 and 3, and replace sql will update 3 and 1.\r\n\r\nif the execute sequence like this:\r\n1. tr1 delete record 1.\r\n2. tr2 replace record 3.\r\n3. tr1 try delete record 3 and wait tr2 release lock.\r\n4. tr2 try replace record 1 and detect dead lock.\r\n\r\nyour delete and replace involve too may records, it may occurs situation above.","title":"Understand MySQL deadlock log from InnoDB engine status","body":"<p>it locked when execute sql.</p>\n<p>look this example.</p>\n<p>delete sql will delete record 1 and 3, and replace sql will update 3 and 1.</p>\n<p>if the execute sequence like this:</p>\n<ol>\n<li>tr1 delete record 1.</li>\n<li>tr2 replace record 3.</li>\n<li>tr1 try delete record 3 and wait tr2 release lock.</li>\n<li>tr2 try replace record 1 and detect dead lock.</li>\n</ol>\n<p>your delete and replace involve too may records, it may occurs situation above.</p>\n"}],"owner":{"account_id":3406665,"reputation":1692,"user_id":2857556,"accept_rate":11,"display_name":"Alpesh Jikadra"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1687341601,"creation_date":1530165776,"question_id":51075682,"body_markdown":"Yesterday on my production I got deadlock related issue for my application,\r\n\r\nI took the InnoDB engine status to check the which query generated the deadlock, but I am not able to understand why this is generated.\r\n\r\nThere were 2 threads running at same time.\r\n\r\n-  1st thread tries to execute query `replace into aggregate` from `temp table`\r\n-  2nd thread tries `delete record from aggregate`\r\n\r\nCan someone please help me how can I reproduce the same issue, or what causes this issue.\r\n\r\nBelow is the engine status\r\n\r\n    ------------------------\r\n    LATEST DETECTED DEADLOCK\r\n    ------------------------\r\n    2018-06-27 03:23:08 0x20ec\r\n    *** (1) TRANSACTION:\r\n    TRANSACTION 82199210, ACTIVE 59 sec fetching rows\r\n    mysql tables in use 2, locked 2\r\n    LOCK WAIT 16 lock struct(s), heap size 1136, 618 row lock(s)\r\n    MySQL thread id 94048, OS thread handle 13292, query id 1096831619 localhost 127.0.0.1 cpro Sending data\r\n    DELETE aggr FROM aggregate aggr INNER JOIN product p ON aggr.product_fk=p.product_pk WHERE p.id=2 AND date BETWEEN &#39;2018-04-27 00:00:00&#39; AND &#39;2018-06-26 23:59:59.999&#39;\r\n    *** (1) WAITING FOR THIS LOCK TO BE GRANTED:\r\n    RECORD LOCKS space id 45178 page no 57766 n bits 576 index UNIQUE_aggregate of table `data`.`aggregate` trx id 82199210 lock_mode X locks rec but not gap waiting\r\n    Record lock, heap no 447 PHYSICAL RECORD: n_fields 5; compact format; info bits 32\r\n     0: len 3; hex 8fc49b; asc    ;;\r\n     1: len 4; hex 8000000d; asc     ;;\r\n     2: len 8; hex 6172726976616c73; asc arrivals;;\r\n     3: len 4; hex 0000803f; asc    ?;;\r\n     4: len 6; hex 00001a2b5ff2; asc    +_ ;;\r\n    \r\n    *** (2) TRANSACTION:\r\n    TRANSACTION 82197992, ACTIVE 499 sec inserting\r\n    mysql tables in use 2, locked 1\r\n    2251 lock struct(s), heap size 237776, 30436 row lock(s), undo log entries 24811\r\n    MySQL thread id 94049, OS thread handle 8428, query id 1096943836 localhost 127.0.0.1 cpro Creating sort index\r\n    replace into aggregate SELECT  date, PRODUCT_FK, DATA_POINT, LOS, SUM(`HOUR`) FROM aggregate_temp GROUP BY date, PRODUCT_FK, DATA_POINT, LOS\r\n    *** (2) HOLDS THE LOCK(S):\r\n    RECORD LOCKS space id 45178 page no 57766 n bits 576 index UNIQUE_aggregate of table `data`.`aggregate` trx id 82197992 lock_mode X locks rec but not gap\r\n    Record lock, heap no 447 PHYSICAL RECORD: n_fields 5; compact format; info bits 32\r\n     0: len 3; hex 8fc49b; asc    ;;\r\n     1: len 4; hex 8000000d; asc     ;;\r\n     2: len 8; hex 6172726976616c73; asc arrivals;;\r\n     3: len 4; hex 0000803f; asc    ?;;\r\n     4: len 6; hex 00001a2b5ff2; asc    +_ ;;\r\n    \r\n    *** (2) WAITING FOR THIS LOCK TO BE GRANTED:\r\n    RECORD LOCKS space id 45178 page no 57766 n bits 576 index UNIQUE_aggregate of table `data`.`aggregate` trx id 82197992 lock_mode X waiting\r\n    Record lock, heap no 447 PHYSICAL RECORD: n_fields 5; compact format; info bits 32\r\n     0: len 3; hex 8fc49b; asc    ;;\r\n     1: len 4; hex 8000000d; asc     ;;\r\n     2: len 8; hex 6172726976616c73; asc arrivals;;\r\n     3: len 4; hex 0000803f; asc    ?;;\r\n     4: len 6; hex 00001a2b5ff2; asc    +_ ;;\r\n    \r\n    *** WE ROLL BACK TRANSACTION (1)\r\n    ------------\r\n    TRANSACTIONS\r\n    ------------\r\n    Trx id counter 82207138\r\n    Purge done for trx&#39;s n:o &lt; 82207138 undo n:o &lt; 0 state: running but idle\r\n    History list length 2996\r\n    LIST OF TRANSACTIONS FOR EACH SESSION:\r\n    ---TRANSACTION 281885670630400, not started\r\n    0 lock struct(s), heap size 1136, 0 row lock(s)","title":"Understand MySQL deadlock log from InnoDB engine status","body":"<p>Yesterday on my production I got deadlock related issue for my application,</p>\n<p>I took the InnoDB engine status to check the which query generated the deadlock, but I am not able to understand why this is generated.</p>\n<p>There were 2 threads running at same time.</p>\n<ul>\n<li>1st thread tries to execute query <code>replace into aggregate</code> from <code>temp table</code></li>\n<li>2nd thread tries <code>delete record from aggregate</code></li>\n</ul>\n<p>Can someone please help me how can I reproduce the same issue, or what causes this issue.</p>\n<p>Below is the engine status</p>\n<pre><code>------------------------\nLATEST DETECTED DEADLOCK\n------------------------\n2018-06-27 03:23:08 0x20ec\n*** (1) TRANSACTION:\nTRANSACTION 82199210, ACTIVE 59 sec fetching rows\nmysql tables in use 2, locked 2\nLOCK WAIT 16 lock struct(s), heap size 1136, 618 row lock(s)\nMySQL thread id 94048, OS thread handle 13292, query id 1096831619 localhost 127.0.0.1 cpro Sending data\nDELETE aggr FROM aggregate aggr INNER JOIN product p ON aggr.product_fk=p.product_pk WHERE p.id=2 AND date BETWEEN '2018-04-27 00:00:00' AND '2018-06-26 23:59:59.999'\n*** (1) WAITING FOR THIS LOCK TO BE GRANTED:\nRECORD LOCKS space id 45178 page no 57766 n bits 576 index UNIQUE_aggregate of table `data`.`aggregate` trx id 82199210 lock_mode X locks rec but not gap waiting\nRecord lock, heap no 447 PHYSICAL RECORD: n_fields 5; compact format; info bits 32\n 0: len 3; hex 8fc49b; asc    ;;\n 1: len 4; hex 8000000d; asc     ;;\n 2: len 8; hex 6172726976616c73; asc arrivals;;\n 3: len 4; hex 0000803f; asc    ?;;\n 4: len 6; hex 00001a2b5ff2; asc    +_ ;;\n\n*** (2) TRANSACTION:\nTRANSACTION 82197992, ACTIVE 499 sec inserting\nmysql tables in use 2, locked 1\n2251 lock struct(s), heap size 237776, 30436 row lock(s), undo log entries 24811\nMySQL thread id 94049, OS thread handle 8428, query id 1096943836 localhost 127.0.0.1 cpro Creating sort index\nreplace into aggregate SELECT  date, PRODUCT_FK, DATA_POINT, LOS, SUM(`HOUR`) FROM aggregate_temp GROUP BY date, PRODUCT_FK, DATA_POINT, LOS\n*** (2) HOLDS THE LOCK(S):\nRECORD LOCKS space id 45178 page no 57766 n bits 576 index UNIQUE_aggregate of table `data`.`aggregate` trx id 82197992 lock_mode X locks rec but not gap\nRecord lock, heap no 447 PHYSICAL RECORD: n_fields 5; compact format; info bits 32\n 0: len 3; hex 8fc49b; asc    ;;\n 1: len 4; hex 8000000d; asc     ;;\n 2: len 8; hex 6172726976616c73; asc arrivals;;\n 3: len 4; hex 0000803f; asc    ?;;\n 4: len 6; hex 00001a2b5ff2; asc    +_ ;;\n\n*** (2) WAITING FOR THIS LOCK TO BE GRANTED:\nRECORD LOCKS space id 45178 page no 57766 n bits 576 index UNIQUE_aggregate of table `data`.`aggregate` trx id 82197992 lock_mode X waiting\nRecord lock, heap no 447 PHYSICAL RECORD: n_fields 5; compact format; info bits 32\n 0: len 3; hex 8fc49b; asc    ;;\n 1: len 4; hex 8000000d; asc     ;;\n 2: len 8; hex 6172726976616c73; asc arrivals;;\n 3: len 4; hex 0000803f; asc    ?;;\n 4: len 6; hex 00001a2b5ff2; asc    +_ ;;\n\n*** WE ROLL BACK TRANSACTION (1)\n------------\nTRANSACTIONS\n------------\nTrx id counter 82207138\nPurge done for trx's n:o &lt; 82207138 undo n:o &lt; 0 state: running but idle\nHistory list length 2996\nLIST OF TRANSACTIONS FOR EACH SESSION:\n---TRANSACTION 281885670630400, not started\n0 lock struct(s), heap size 1136, 0 row lock(s)\n</code></pre>\n"},{"tags":["java","selenium-webdriver","electron","selenium-chromedriver"],"comments":[{"owner":{"account_id":937336,"reputation":54163,"user_id":966023,"accept_rate":65,"display_name":"pguardiario"},"score":0,"creation_date":1687395394,"post_id":76522063,"comment_id":134932266,"body_markdown":"You know that Electron is Javascript, right? I don&#39;t understand why you would choose to do it like that.","body":"You know that Electron is Javascript, right? I don&#39;t understand why you would choose to do it like that."},{"owner":{"account_id":10291782,"reputation":1,"user_id":7593324,"display_name":"Daniel"},"score":0,"creation_date":1687442748,"post_id":76522063,"comment_id":134940063,"body_markdown":"We want to do like that because in our team we do not have js developers/testers. They devs are with java, front end is developed in other team and testers stick with java/C#. And now you tell me what should i doo? Fire all?","body":"We want to do like that because in our team we do not have js developers/testers. They devs are with java, front end is developed in other team and testers stick with java/C#. And now you tell me what should i doo? Fire all?"},{"owner":{"account_id":10291782,"reputation":1,"user_id":7593324,"display_name":"Daniel"},"score":0,"creation_date":1687442819,"post_id":76522063,"comment_id":134940085,"body_markdown":"@pguardiario you didn&#39;t add any value to this question.","body":"@pguardiario you didn&#39;t add any value to this question."},{"owner":{"account_id":937336,"reputation":54163,"user_id":966023,"accept_rate":65,"display_name":"pguardiario"},"score":0,"creation_date":1687481069,"post_id":76522063,"comment_id":134946620,"body_markdown":"You would have to make electron launch with --remote-debugger somehow and then google for how to connect to a running window.","body":"You would have to make electron launch with --remote-debugger somehow and then google for how to connect to a running window."}],"owner":{"account_id":10291782,"reputation":1,"user_id":7593324,"display_name":"Daniel"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":110,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687341561,"creation_date":1687341561,"question_id":76522063,"body_markdown":"We have Electron version 23.1.1 and corresponding chromium version is 110.0.5481.104.\r\nLink for this: `https://github.com/electron/electron/releases/tag/v23.1.1`\r\nI downloaded chromedriver-v23.1.1-win32-x64.zip from the above page.\r\n&gt; I started a small test but the only step I get is opening the application and than this message in console &quot;Caused by: org.openqa.selenium.NoSuchWindowException: no such window: target window already closed&quot;.\r\n\r\nI am open to use anything but I don&#39;t want to ditch java for JavaScript?\r\nThis is my code.\r\n```\r\n\r\nimport org.junit.After;\r\nimport org.junit.Before;\r\nimport org.junit.Test;\r\nimport org.openqa.selenium.By;\r\nimport org.openqa.selenium.Capabilities;\r\nimport org.openqa.selenium.WebDriver;\r\nimport org.openqa.selenium.WebElement;\r\nimport org.openqa.selenium.chrome.ChromeDriver;\r\nimport org.openqa.selenium.chrome.ChromeOptions;\r\nimport org.openqa.selenium.remote.RemoteWebDriver;\r\nimport org.openqa.selenium.support.ui.ExpectedConditions;\r\nimport org.openqa.selenium.support.ui.WebDriverWait;\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\n\r\nimport java.time.Duration;\r\nimport java.util.Set;\r\n\r\npublic class LoginTest {\r\n\r\n    private final Logger LOGGER = LoggerFactory.getLogger(LoginTest.class);\r\n    private WebDriver driver = null;\r\n    private ChromeOptions options;\r\n    private WebElement inputPOSUser;\r\n    private WebElement clickNextButton;\r\n    @Before\r\n    public void Setup(){\r\n        options = new ChromeOptions();\r\n        System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:\\\\CustomChromeDriver\\\\chromedriver_win32\\\\chromedriver.exe&quot;);\r\n        System.setProperty(&quot;webdriver.chrome.verboseLogging&quot;, &quot;true&quot;);\r\n        options.setBinary(&quot;C:\\\\PATH\\\\TO\\\\ELECTRONAPP.exe&quot;);\r\n        options.addArguments(&quot;start-maximized&quot;); \r\n        options.addArguments(&quot;--remote-debugging-port=9222&quot;); //9222\r\n        if (driver == null){\r\n            driver = new ChromeDriver(options);\r\n            WebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(10) );\r\n\r\n            //for printing browser name and version\r\n            Capabilities cp = ((RemoteWebDriver) driver).getCapabilities();\r\n            System.out.println(&quot;Browser: &quot; + cp.getBrowserName());\r\n            System.out.println(&quot;Version: &quot; + cp.getBrowserVersion());\r\n            try {\r\n                Thread.sleep(10000);\r\n//                switchToNewWindow(driver);\r\n                inputPOSUser=  wait.until(ExpectedConditions.visibilityOfElementLocated(By.id(&quot;login-username-input&quot;)));\r\n                driver.findElement(By.id(&quot;login-login-button&quot;));\r\n            } catch (InterruptedException e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n\r\n        }\r\n\r\n\r\n    }\r\n\r\n    @Test\r\n    public void TestL(){\r\n\r\n        LOGGER.info(&quot;Step&quot;);\r\n        String User = &quot;newuser&quot;;\r\n        driver.get(&quot;http://localhost:4202/login&quot;);\r\n        inputPOSUser.sendKeys(User);\r\n        LOGGER.info(&quot;entered login name&quot;);\r\n        clickNextButton.click();\r\n    }\r\n\r\n\r\n    @After\r\n    public void teardown() {\r\n        if (driver != null)\r\n            driver.quit();\r\n    }\r\n\r\n    public  void switchToNewWindow(WebDriver driver)\r\n    {\r\n        String mainWindow = driver.getWindowHandle();\r\n        Set&lt;String&gt; openedWindows = driver.getWindowHandles();\r\n        if(openedWindows.size() &gt; 1)\r\n        {\r\n            for(String newWindow : openedWindows)\r\n            {\r\n                driver.switchTo().window(newWindow);\r\n            }\r\n            driver.close();\r\n            LOGGER.info(&quot;Closing the current Opened Window - Invoice&quot;);\r\n            driver.switchTo().window(mainWindow);\r\n        }\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\nThis is the console\r\n```\r\n&quot;\r\nlog4j:WARN No appenders could be found for logger (LoginTest).\r\nlog4j:WARN Please initialize the log4j system properly.\r\nlog4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.\r\nStarting ChromeDriver 110.0.5481.104 (46de4a7f41979e829b430bc1ee30ef483aa227ac-refs/branch-heads/5481_77@{#19}) on port 7863\r\nOnly local connections are allowed.\r\nPlease see https://chromedriver.chromium.org/security-considerations for suggestions on keeping ChromeDriver safe.\r\nChromeDriver was started successfully.\r\n[1687340263.626][INFO]: [34022d8904f2f63ebd53781d89c6b5a3] COMMAND InitSession {\r\n   &quot;capabilities&quot;: {\r\n      &quot;firstMatch&quot;: [ {\r\n         &quot;browserName&quot;: &quot;chrome&quot;,\r\n         &quot;goog:chromeOptions&quot;: {\r\n            &quot;args&quot;: [ &quot;start-maximized&quot;, &quot;enable-automation&quot;, &quot;--no-sandbox&quot;, &quot;--remote-debugging-port=9222&quot; ],\r\n            &quot;binary&quot;: &quot;C:\\\\AFC\\\\PointOfSale\\\\PointOfSale.exe&quot;,\r\n            &quot;extensions&quot;: [  ]\r\n         }\r\n      } ]\r\n   },\r\n   &quot;desiredCapabilities&quot;: {\r\n      &quot;browserName&quot;: &quot;chrome&quot;,\r\n      &quot;goog:chromeOptions&quot;: {\r\n         &quot;args&quot;: [ &quot;start-maximized&quot;, &quot;enable-automation&quot;, &quot;--no-sandbox&quot;, &quot;--remote-debugging-port=9222&quot; ],\r\n         &quot;binary&quot;: &quot;C:\\\\AFC\\\\PointOfSale\\\\PointOfSale.exe&quot;,\r\n         &quot;extensions&quot;: [  ]\r\n      }\r\n   }\r\n}\r\n[1687340263.629][INFO]: Populating Preferences file: {\r\n   &quot;alternate_error_pages&quot;: {\r\n      &quot;enabled&quot;: false\r\n   },\r\n   &quot;autofill&quot;: {\r\n      &quot;enabled&quot;: false\r\n   },\r\n   &quot;browser&quot;: {\r\n      &quot;check_default_browser&quot;: false\r\n   },\r\n   &quot;distribution&quot;: {\r\n      &quot;import_bookmarks&quot;: false,\r\n      &quot;import_history&quot;: false,\r\n      &quot;import_search_engine&quot;: false,\r\n      &quot;make_chrome_default_for_user&quot;: false,\r\n      &quot;skip_first_run_ui&quot;: true\r\n   },\r\n   &quot;dns_prefetching&quot;: {\r\n      &quot;enabled&quot;: false\r\n   },\r\n   &quot;profile&quot;: {\r\n      &quot;content_settings&quot;: {\r\n         &quot;pattern_pairs&quot;: {\r\n            &quot;https://*,*&quot;: {\r\n               &quot;media-stream&quot;: {\r\n                  &quot;audio&quot;: &quot;Default&quot;,\r\n                  &quot;video&quot;: &quot;Default&quot;\r\n               }\r\n            }\r\n         }\r\n      },\r\n      &quot;default_content_setting_values&quot;: {\r\n         &quot;geolocation&quot;: 1\r\n      },\r\n      &quot;default_content_settings&quot;: {\r\n         &quot;geolocation&quot;: 1,\r\n         &quot;mouselock&quot;: 1,\r\n         &quot;notifications&quot;: 1,\r\n         &quot;popups&quot;: 1,\r\n         &quot;ppapi-broker&quot;: 1\r\n      },\r\n      &quot;password_manager_enabled&quot;: false\r\n   },\r\n   &quot;safebrowsing&quot;: {\r\n      &quot;enabled&quot;: false\r\n   },\r\n   &quot;search&quot;: {\r\n      &quot;suggest_enabled&quot;: false\r\n   },\r\n   &quot;translate&quot;: {\r\n      &quot;enabled&quot;: false\r\n   }\r\n}\r\n[1687340263.633][INFO]: Populating Local State file: {\r\n   &quot;background_mode&quot;: {\r\n      &quot;enabled&quot;: false\r\n   },\r\n   &quot;ssl&quot;: {\r\n      &quot;rev_checking&quot;: {\r\n         &quot;enabled&quot;: false\r\n      }\r\n   }\r\n}\r\n[1687340263.637][INFO]: Launching chrome: &quot;C:\\AFC\\PointOfSale\\PointOfSale.exe&quot; --allow-pre-commit-input --disable-background-networking --disable-backgrounding-occluded-windows --disable-client-side-phishing-detection --disable-default-apps --disable-hang-monitor --disable-popup-blocking --disable-prompt-on-repost --disable-sync --enable-automation --enable-blink-features=ShadowDOMV0 --enable-logging --log-level=0 --no-first-run --no-sandbox --no-service-autorun --password-store=basic --remote-debugging-port=9222 --start-maximized --test-type=webdriver --use-mock-keychain --user-data-dir=&quot;C:\\Users\\UserProfile\\AppData\\Local\\Temp\\scoped_dir117580_1083242216&quot; data:,\r\n[1687340263.651][DEBUG]: DevTools HTTP Request: http://localhost:9222/json/version\r\n[1687340264.226][DEBUG]: DevTools HTTP Response: {\r\n   &quot;Browser&quot;: &quot;Chrome/110.0.5481.104&quot;,\r\n   &quot;Protocol-Version&quot;: &quot;1.3&quot;,\r\n   &quot;User-Agent&quot;: &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) PointOfSale/1.0.0 Chrome/110.0.5481.104 Electron/23.1.1 Safari/537.36&quot;,\r\n   &quot;V8-Version&quot;: &quot;11.0.226.16&quot;,\r\n   &quot;WebKit-Version&quot;: &quot;537.36 (@46de4a7f41979e829b430bc1ee30ef483aa227ac)&quot;,\r\n   &quot;webSocketDebuggerUrl&quot;: &quot;ws://localhost:9222/devtools/browser/bd8c11d3-9ff1-4a4c-9ce9-fdb9619d0210&quot;\r\n}\r\n\r\n[1687340264.226][DEBUG]: DevTools HTTP Request: http://localhost:9222/json/list\r\n[1687340264.228][DEBUG]: DevTools HTTP Response: [ {\r\n   &quot;description&quot;: &quot;&quot;,\r\n   &quot;devtoolsFrontendUrl&quot;: &quot;/devtools/inspector.html?ws=localhost:9222/devtools/page/3D5D926A00E7B99A43C30D657DB31A66&quot;,\r\n   &quot;id&quot;: &quot;3D5D926A00E7B99A43C30D657DB31A66&quot;,\r\n   &quot;title&quot;: &quot;&quot;,\r\n   &quot;type&quot;: &quot;page&quot;,\r\n   &quot;url&quot;: &quot;file:///C:/AFC/PointOfSale/resources/app.asar/html/start.html&quot;,\r\n   &quot;webSocketDebuggerUrl&quot;: &quot;ws://localhost:9222/devtools/page/3D5D926A00E7B99A43C30D657DB31A66&quot;\r\n} ]\r\n\r\n[1687340264.255][INFO]: resolved localhost to [&quot;::1&quot;,&quot;127.0.0.1&quot;]\r\n[1687340264.257][WARNING]: virtual void DevToolsClientImpl::AddListener(DevToolsEventListener *) subscribing a listener to the already connected DevToolsClient. Connection notification will not arrive.\r\n[1687340264.258][DEBUG]: DevTools WebSocket Command: Target.getTargets (id=1) (session_id=) browser {\r\n}\r\n[1687340264.259][DEBUG]: DevTools WebSocket Response: Target.getTargets (id=1) (session_id=) browser {\r\n   &quot;targetInfos&quot;: [ {\r\n      &quot;attached&quot;: false,\r\n      &quot;browserContextId&quot;: &quot;9EEB1F223152D98321FD4F4558501009&quot;,\r\n      &quot;canAccessOpener&quot;: false,\r\n      &quot;targetId&quot;: &quot;3D5D926A00E7B99A43C30D657DB31A66&quot;,\r\n      &quot;title&quot;: &quot;&quot;,\r\n      &quot;type&quot;: &quot;page&quot;,\r\n      &quot;url&quot;: &quot;file:///C:/AFC/PointOfSale/resources/app.asar/html/start.html&quot;\r\n   } ]\r\n}\r\n[1687340264.259][DEBUG]: DevTools WebSocket Command: Target.attachToTarget (id=2) (session_id=) browser {\r\n   &quot;flatten&quot;: true,\r\n   &quot;targetId&quot;: &quot;3D5D926A00E7B99A43C30D657DB31A66&quot;\r\n}\r\n[1687340264.260][DEBUG]: DevTools WebSocket Event: Target.attachedToTarget (session_id=) browser {\r\n   &quot;sessionId&quot;: &quot;C5798C306B0019F541FAFF88D3DDC14B&quot;,\r\n   &quot;targetInfo&quot;: {\r\n      &quot;attached&quot;: true,\r\n      &quot;browserContextId&quot;: &quot;9EEB1F223152D98321FD4F4558501009&quot;,\r\n      &quot;canAccessOpener&quot;: false,\r\n      &quot;targetId&quot;: &quot;3D5D926A00E7B99A43C30D657DB31A66&quot;,\r\n      &quot;title&quot;: &quot;&quot;,\r\n      &quot;type&quot;: &quot;page&quot;,\r\n      &quot;url&quot;: &quot;file:///C:/AFC/PointOfSale/resources/app.asar/html/start.html&quot;\r\n   },\r\n   &quot;waitingForDebugger&quot;: false\r\n}\r\n[1687340264.260][DEBUG]: DevTools WebSocket Response: Target.attachToTarget (id=2) (session_id=) browser {\r\n   &quot;sessionId&quot;: &quot;C5798C306B0019F541FAFF88D3DDC14B&quot;\r\n}\r\n[1687340264.260][DEBUG]: DevTools WebSocket Command: Page.addScriptToEvaluateOnNewDocument (id=3) (session_id=C5798C306B0019F541FAFF88D3DDC14B) 3D5D926A00E7B99A43C30D657DB31A66 {\r\n   &quot;source&quot;: &quot;(function () {window.cdc_adoQpoasnfa76pfcZLmcfl_Array = window.Array;window.cdc_adoQpoasnfa76pfcZLmcfl_Promise = window.Promise;window.cdc_adoQpoasnfa76pfcZLmcfl_Symbol = window.Symbol;}) ();&quot;\r\n}\r\n[1687340264.260][DEBUG]: DevTools WebSocket Command: Runtime.evaluate (id=4) (session_id=C5798C306B0019F541FAFF88D3DDC14B) 3D5D926A00E7B99A43C30D657DB31A66 {\r\n   &quot;expression&quot;: &quot;(function () {window.cdc_adoQpoasnfa76pfcZLmcfl_Array = window.Array;window.cdc_adoQpoasnfa76pfcZLmcfl_Promise = window.Promise;window.cdc_adoQpoasnfa76pfcZLmcfl_Symbol = window.Symbol;}) ();&quot;\r\n}\r\n[1687340264.261][DEBUG]: DevTools WebSocket Command: Log.enable (id=5) (session_id=C5798C306B0019F541FAFF88D3DDC14B) 3D5D926A00E7B99A43C30D657DB31A66 {\r\n}\r\n[1687340264.261][DEBUG]: DevTools WebSocket Command: Target.setAutoAttach (id=6) (session_id=C5798C306B0019F541FAFF88D3DDC14B) 3D5D926A00E7B99A43C30D657DB31A66 {\r\n   &quot;autoAttach&quot;: true,\r\n   &quot;flatten&quot;: true,\r\n   &quot;waitForDebuggerOnStart&quot;: false\r\n}\r\n[1687340264.261][DEBUG]: DevTools WebSocket Command: Page.enable (id=7) (session_id=C5798C306B0019F541FAFF88D3DDC14B) 3D5D926A00E7B99A43C30D657DB31A66 {\r\n}\r\n[1687340264.262][DEBUG]: DevTools WebSocket Command: Page.enable (id=8) (session_id=C5798C306B0019F541FAFF88D3DDC14B) 3D5D926A00E7B99A43C30D657DB31A66 {\r\n}\r\n[1687340264.294][DEBUG]: DevTools WebSocket Response: Page.addScriptToEvaluateOnNewDocument (id=3) (session_id=C5798C306B0019F541FAFF88D3DDC14B) 3D5D926A00E7B99A43C30D657DB31A66 {\r\n   &quot;identifier&quot;: &quot;1&quot;\r\n}\r\n[1687340264.294][DEBUG]: DevTools WebSocket Response: Runtime.evaluate (id=4) (session_id=C5798C306B0019F541FAFF88D3DDC14B) 3D5D926A00E7B99A43C30D657DB31A66 {\r\n   &quot;result&quot;: {\r\n      &quot;type&quot;: &quot;undefined&quot;\r\n   }\r\n}\r\n[1687340264.294][DEBUG]: DevTools WebSocket Response: Log.enable (id=5) (session_id=C5798C306B0019F541FAFF88D3DDC14B) 3D5D926A00E7B99A43C30D657DB31A66 {\r\n}\r\n[1687340264.294][DEBUG]: DevTools WebSocket Response: Target.setAutoAttach (id=6) (session_id=C5798C306B0019F541FAFF88D3DDC14B) 3D5D926A00E7B99A43C30D657DB31A66 {\r\n}\r\n[1687340264.294][DEBUG]: DevTools WebSocket Response: Page.enable (id=7) (session_id=C5798C306B0019F541FAFF88D3DDC14B) 3D5D926A00E7B99A43C30D657DB31A66 {\r\n}\r\n[1687340264.294][DEBUG]: DevTools WebSocket Response: Page.enable (id=8) (session_id=C5798C306B0019F541FAFF88D3DDC14B) 3D5D926A00E7B99A43C30D657DB31A66 {\r\n}\r\n[1687340264.294][DEBUG]: DevTools WebSocket Command: Runtime.enable (id=9) (session_id=C5798C306B0019F541FAFF88D3DDC14B) 3D5D926A00E7B99A43C30D657DB31A66 {\r\n}\r\n[1687340264.295][DEBUG]: DevTools WebSocket Event: Page.domContentEventFired (session_id=C5798C306B0019F541FAFF88D3DDC14B) 3D5D926A00E7B99A43C30D657DB31A66 {\r\n   &quot;timestamp&quot;: 1207352.837148\r\n}\r\n[1687340264.298][DEBUG]: DevTools WebSocket Event: Runtime.executionContextCreated (session_id=C5798C306B0019F541FAFF88D3DDC14B) 3D5D926A00E7B99A43C30D657DB31A66 {\r\n   &quot;context&quot;: {\r\n      &quot;auxData&quot;: {\r\n         &quot;frameId&quot;: &quot;3D5D926A00E7B99A43C30D657DB31A66&quot;,\r\n         &quot;isDefault&quot;: false,\r\n         &quot;type&quot;: &quot;isolated&quot;\r\n      },\r\n      &quot;id&quot;: 2,\r\n      &quot;name&quot;: &quot;Electron Isolated Context&quot;,\r\n      &quot;origin&quot;: &quot;file://&quot;,\r\n      &quot;uniqueId&quot;: &quot;-4165743087318469963.1924850320221961557&quot;\r\n   }\r\n}\r\n[1687340264.298][DEBUG]: DevTools WebSocket Event: Runtime.executionContextCreated (session_id=C5798C306B0019F541FAFF88D3DDC14B) 3D5D926A00E7B99A43C30D657DB31A66 {\r\n   &quot;context&quot;: {\r\n      &quot;auxData&quot;: {\r\n         &quot;frameId&quot;: &quot;3D5D926A00E7B99A43C30D657DB31A66&quot;,\r\n         &quot;isDefault&quot;: true,\r\n         &quot;type&quot;: &quot;default&quot;\r\n      },\r\n      &quot;id&quot;: 1,\r\n      &quot;name&quot;: &quot;&quot;,\r\n      &quot;origin&quot;: &quot;file://&quot;,\r\n      &quot;uniqueId&quot;: &quot;-966553648842666591.1831066268359020716&quot;\r\n   }\r\n}\r\n[1687340264.298][DEBUG]: DevTools WebSocket Response: Runtime.enable (id=9) (session_id=C5798C306B0019F541FAFF88D3DDC14B) 3D5D926A00E7B99A43C30D657DB31A66 {\r\n}\r\n[1687340264.298][DEBUG]: DevTools WebSocket Command: Page.enable (id=10) (session_id=C5798C306B0019F541FAFF88D3DDC14B) 3D5D926A00E7B99A43C30D657DB31A66 {\r\n}\r\n[1687340264.300][DEBUG]: DevTools WebSocket Response: Page.enable (id=10) (session_id=C5798C306B0019F541FAFF88D3DDC14B) 3D5D926A00E7B99A43C30D657DB31A66 {\r\n}\r\n[1687340264.300][DEBUG]: DevTools WebSocket Command: Runtime.enable (id=11) (session_id=C5798C306B0019F541FAFF88D3DDC14B) 3D5D926A00E7B99A43C30D657DB31A66 {\r\n}\r\n[1687340264.310][DEBUG]: DevTools WebSocket Event: Page.loadEventFired (session_id=C5798C306B0019F541FAFF88D3DDC14B) 3D5D926A00E7B99A43C30D657DB31A66 {\r\n   &quot;timestamp&quot;: 1207352.842856\r\n}\r\n[1687340264.310][DEBUG]: DevTools WebSocket Command: Runtime.evaluate (id=12) (session_id=C5798C306B0019F541FAFF88D3DDC14B) 3D5D926A00E7B99A43C30D657DB31A66 {\r\n   &quot;awaitPromise&quot;: false,\r\n   &quot;expression&quot;: &quot;document.readyState&quot;,\r\n   &quot;returnByValue&quot;: true\r\n}\r\n[1687340264.310][DEBUG]: DevTools WebSocket Event: Page.frameStoppedLoading (session_id=C5798C306B0019F541FAFF88D3DDC14B) 3D5D926A00E7B99A43C30D657DB31A66 {\r\n   &quot;frameId&quot;: &quot;3D5D926A00E7B99A43C30D657DB31A66&quot;\r\n}\r\n[1687340264.310][DEBUG]: DevTools WebSocket Response: Runtime.enable (id=11) (session_id=C5798C306B0019F541FAFF88D3DDC14B) 3D5D926A00E7B99A43C30D657DB31A66 {\r\n}\r\n[1687340264.311][DEBUG]: DevTools WebSocket Response: Runtime.evaluate (id=12) (session_id=C5798C306B0019F541FAFF88D3DDC14B) 3D5D926A00E7B99A43C30D657DB31A66 {\r\n   &quot;result&quot;: {\r\n      &quot;type&quot;: &quot;string&quot;,\r\n      &quot;value&quot;: &quot;complete&quot;\r\n   }\r\n}\r\n[1687340264.312][DEBUG]: DevTools WebSocket Command: Runtime.evaluate (id=13) (session_id=C5798C306B0019F541FAFF88D3DDC14B) 3D5D926A00E7B99A43C30D657DB31A66 {\r\n   &quot;awaitPromise&quot;: true,\r\n   &quot;expression&quot;: &quot;(function() { // Copyright 2012 The Chromium Authors\\n// Use of this source code is governed by a BSD-style license that can be\\n// found in the LICENSE file.\\n\\n/**\\n * Enum for WebDriver status codes....&quot;,\r\n   &quot;returnByValue&quot;: true\r\n}\r\n[1687340264.315][DEBUG]: DevTools WebSocket Response: Runtime.evaluate (id=13) (session_id=C5798C306B0019F541FAFF88D3DDC14B) 3D5D926A00E7B99A43C30D657DB31A66 {\r\n   &quot;result&quot;: {\r\n      &quot;type&quot;: &quot;object&quot;,\r\n      &quot;value&quot;: {\r\n         &quot;status&quot;: 0,\r\n         &quot;value&quot;: 1\r\n      }\r\n   }\r\n}\r\n[1687340264.315][INFO]: [34022d8904f2f63ebd53781d89c6b5a3] RESPONSE InitSession {\r\n   &quot;capabilities&quot;: {\r\n      &quot;acceptInsecureCerts&quot;: false,\r\n      &quot;browserName&quot;: &quot;chrome&quot;,\r\n      &quot;browserVersion&quot;: &quot;110.0.5481.104&quot;,\r\n      &quot;chrome&quot;: {\r\n         &quot;chromedriverVersion&quot;: &quot;110.0.5481.104 (46de4a7f41979e829b430bc1ee30ef483aa227ac-refs/branch-heads/5481_77@{#19})&quot;,\r\n         &quot;userDataDir&quot;: &quot;C:\\\\Users\\\\UserProfile\\\\AppData\\\\Local\\\\Temp\\\\scoped_dir117580_1083242216&quot;\r\n      },\r\n      &quot;goog:chromeOptions&quot;: {\r\n         &quot;debuggerAddress&quot;: &quot;localhost:9222&quot;\r\n      },\r\n      &quot;networkConnectionEnabled&quot;: false,\r\n      &quot;pageLoadStrategy&quot;: &quot;normal&quot;,\r\n      &quot;platformName&quot;: &quot;windows&quot;,\r\n      &quot;proxy&quot;: {\r\n      },\r\n      &quot;setWindowRect&quot;: true,\r\n      &quot;strictFileInteractability&quot;: false,\r\n      &quot;timeouts&quot;: {\r\n         &quot;implicit&quot;: 0,\r\n         &quot;pageLoad&quot;: 300000,\r\n         &quot;script&quot;: 30000\r\n      },\r\n      &quot;unhandledPromptBehavior&quot;: &quot;dismiss and notify&quot;,\r\n      &quot;webauthn:extension:credBlob&quot;: true,\r\n      &quot;webauthn:extension:largeBlob&quot;: true,\r\n      &quot;webauthn:virtualAuthenticators&quot;: true\r\n   },\r\n   &quot;sessionId&quot;: &quot;34022d8904f2f63ebd53781d89c6b5a3&quot;\r\n}\r\n[1687340265.977][DEBUG]: DevTools WebSocket Event: Target.detachedFromTarget (session_id=) browser {\r\n   &quot;sessionId&quot;: &quot;C5798C306B0019F541FAFF88D3DDC14B&quot;,\r\n   &quot;targetId&quot;: &quot;3D5D926A00E7B99A43C30D657DB31A66&quot;\r\n}\r\n[1687340274.428][INFO]: [34022d8904f2f63ebd53781d89c6b5a3] COMMAND GetWindow {\r\n}\r\n[1687340274.453][INFO]: [34022d8904f2f63ebd53781d89c6b5a3] RESPONSE GetWindow ERROR no such window: target window already closed\r\nfrom unknown error: web view not found\r\n  (Session info: chrome=110.0.5481.104)\r\n[1687340274.462][INFO]: [34022d8904f2f63ebd53781d89c6b5a3] COMMAND Quit {\r\n}\r\n[1687340274.515][INFO]: [34022d8904f2f63ebd53781d89c6b5a3] RESPONSE Quit\r\n[1687340274.515][DEBUG]: Log type &#39;driver&#39; lost 1 entries on destruction\r\n[1687340274.515][DEBUG]: Log type &#39;browser&#39; lost 0 entries on destruction\r\n\r\norg.openqa.selenium.NoSuchWindowException: no such window: target window already closed\r\nfrom unknown error: web view not found\r\n  (Session info: chrome=110.0.5481.104)\r\nBuild info: version: &#39;4.8.1&#39;, revision: &#39;8ebccac989&#39;\r\nSystem info: os.name: &#39;Windows 10&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;10.0&#39;, java.version: &#39;19.0.1&#39;\r\nDriver info: org.openqa.selenium.chrome.ChromeDriver\r\nCommand: [34022d8904f2f63ebd53781d89c6b5a3, getCurrentWindowHandle {}]\r\nCapabilities {acceptInsecureCerts: false, browserName: chrome, browserVersion: 110.0.5481.104, chrome: {chromedriverVersion: 110.0.5481.104 (46de4a7f419..., userDataDir: C:\\Users\\UserProfile\\AppData\\L...}, goog:chromeOptions: {debuggerAddress: localhost:9222}, networkConnectionEnabled: false, pageLoadStrategy: normal, platformName: WINDOWS, proxy: Proxy(), se:cdp: ws://localhost:9222/devtool..., se:cdpVersion: 110.0.5481.104, setWindowRect: true, strictFileInteractability: false, timeouts: {implicit: 0, pageLoad: 300000, script: 30000}, unhandledPromptBehavior: dismiss and notify, webauthn:extension:credBlob: true, webauthn:extension:largeBlob: true, webauthn:virtualAuthenticators: true}\r\nSession ID: 34022d8904f2f63ebd53781d89c6b5a3\r\n\r\n```\r\n\r\n","title":"How can I test an Electron application using Java?","body":"<p>We have Electron version 23.1.1 and corresponding chromium version is 110.0.5481.104.\nLink for this: <code>https://github.com/electron/electron/releases/tag/v23.1.1</code>\nI downloaded chromedriver-v23.1.1-win32-x64.zip from the above page.</p>\n<blockquote>\n<p>I started a small test but the only step I get is opening the application and than this message in console &quot;Caused by: org.openqa.selenium.NoSuchWindowException: no such window: target window already closed&quot;.</p>\n</blockquote>\n<p>I am open to use anything but I don't want to ditch java for JavaScript?\nThis is my code.</p>\n<pre><code>\nimport org.junit.After;\nimport org.junit.Before;\nimport org.junit.Test;\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.Capabilities;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.WebElement;\nimport org.openqa.selenium.chrome.ChromeDriver;\nimport org.openqa.selenium.chrome.ChromeOptions;\nimport org.openqa.selenium.remote.RemoteWebDriver;\nimport org.openqa.selenium.support.ui.ExpectedConditions;\nimport org.openqa.selenium.support.ui.WebDriverWait;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\nimport java.time.Duration;\nimport java.util.Set;\n\npublic class LoginTest {\n\n    private final Logger LOGGER = LoggerFactory.getLogger(LoginTest.class);\n    private WebDriver driver = null;\n    private ChromeOptions options;\n    private WebElement inputPOSUser;\n    private WebElement clickNextButton;\n    @Before\n    public void Setup(){\n        options = new ChromeOptions();\n        System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:\\\\CustomChromeDriver\\\\chromedriver_win32\\\\chromedriver.exe&quot;);\n        System.setProperty(&quot;webdriver.chrome.verboseLogging&quot;, &quot;true&quot;);\n        options.setBinary(&quot;C:\\\\PATH\\\\TO\\\\ELECTRONAPP.exe&quot;);\n        options.addArguments(&quot;start-maximized&quot;); \n        options.addArguments(&quot;--remote-debugging-port=9222&quot;); //9222\n        if (driver == null){\n            driver = new ChromeDriver(options);\n            WebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(10) );\n\n            //for printing browser name and version\n            Capabilities cp = ((RemoteWebDriver) driver).getCapabilities();\n            System.out.println(&quot;Browser: &quot; + cp.getBrowserName());\n            System.out.println(&quot;Version: &quot; + cp.getBrowserVersion());\n            try {\n                Thread.sleep(10000);\n//                switchToNewWindow(driver);\n                inputPOSUser=  wait.until(ExpectedConditions.visibilityOfElementLocated(By.id(&quot;login-username-input&quot;)));\n                driver.findElement(By.id(&quot;login-login-button&quot;));\n            } catch (InterruptedException e) {\n                throw new RuntimeException(e);\n            }\n\n        }\n\n\n    }\n\n    @Test\n    public void TestL(){\n\n        LOGGER.info(&quot;Step&quot;);\n        String User = &quot;newuser&quot;;\n        driver.get(&quot;http://localhost:4202/login&quot;);\n        inputPOSUser.sendKeys(User);\n        LOGGER.info(&quot;entered login name&quot;);\n        clickNextButton.click();\n    }\n\n\n    @After\n    public void teardown() {\n        if (driver != null)\n            driver.quit();\n    }\n\n    public  void switchToNewWindow(WebDriver driver)\n    {\n        String mainWindow = driver.getWindowHandle();\n        Set&lt;String&gt; openedWindows = driver.getWindowHandles();\n        if(openedWindows.size() &gt; 1)\n        {\n            for(String newWindow : openedWindows)\n            {\n                driver.switchTo().window(newWindow);\n            }\n            driver.close();\n            LOGGER.info(&quot;Closing the current Opened Window - Invoice&quot;);\n            driver.switchTo().window(mainWindow);\n        }\n    }\n\n}\n\n</code></pre>\n<p>This is the console</p>\n<pre><code>&quot;\nlog4j:WARN No appenders could be found for logger (LoginTest).\nlog4j:WARN Please initialize the log4j system properly.\nlog4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.\nStarting ChromeDriver 110.0.5481.104 (46de4a7f41979e829b430bc1ee30ef483aa227ac-refs/branch-heads/5481_77@{#19}) on port 7863\nOnly local connections are allowed.\nPlease see https://chromedriver.chromium.org/security-considerations for suggestions on keeping ChromeDriver safe.\nChromeDriver was started successfully.\n[1687340263.626][INFO]: [34022d8904f2f63ebd53781d89c6b5a3] COMMAND InitSession {\n   &quot;capabilities&quot;: {\n      &quot;firstMatch&quot;: [ {\n         &quot;browserName&quot;: &quot;chrome&quot;,\n         &quot;goog:chromeOptions&quot;: {\n            &quot;args&quot;: [ &quot;start-maximized&quot;, &quot;enable-automation&quot;, &quot;--no-sandbox&quot;, &quot;--remote-debugging-port=9222&quot; ],\n            &quot;binary&quot;: &quot;C:\\\\AFC\\\\PointOfSale\\\\PointOfSale.exe&quot;,\n            &quot;extensions&quot;: [  ]\n         }\n      } ]\n   },\n   &quot;desiredCapabilities&quot;: {\n      &quot;browserName&quot;: &quot;chrome&quot;,\n      &quot;goog:chromeOptions&quot;: {\n         &quot;args&quot;: [ &quot;start-maximized&quot;, &quot;enable-automation&quot;, &quot;--no-sandbox&quot;, &quot;--remote-debugging-port=9222&quot; ],\n         &quot;binary&quot;: &quot;C:\\\\AFC\\\\PointOfSale\\\\PointOfSale.exe&quot;,\n         &quot;extensions&quot;: [  ]\n      }\n   }\n}\n[1687340263.629][INFO]: Populating Preferences file: {\n   &quot;alternate_error_pages&quot;: {\n      &quot;enabled&quot;: false\n   },\n   &quot;autofill&quot;: {\n      &quot;enabled&quot;: false\n   },\n   &quot;browser&quot;: {\n      &quot;check_default_browser&quot;: false\n   },\n   &quot;distribution&quot;: {\n      &quot;import_bookmarks&quot;: false,\n      &quot;import_history&quot;: false,\n      &quot;import_search_engine&quot;: false,\n      &quot;make_chrome_default_for_user&quot;: false,\n      &quot;skip_first_run_ui&quot;: true\n   },\n   &quot;dns_prefetching&quot;: {\n      &quot;enabled&quot;: false\n   },\n   &quot;profile&quot;: {\n      &quot;content_settings&quot;: {\n         &quot;pattern_pairs&quot;: {\n            &quot;https://*,*&quot;: {\n               &quot;media-stream&quot;: {\n                  &quot;audio&quot;: &quot;Default&quot;,\n                  &quot;video&quot;: &quot;Default&quot;\n               }\n            }\n         }\n      },\n      &quot;default_content_setting_values&quot;: {\n         &quot;geolocation&quot;: 1\n      },\n      &quot;default_content_settings&quot;: {\n         &quot;geolocation&quot;: 1,\n         &quot;mouselock&quot;: 1,\n         &quot;notifications&quot;: 1,\n         &quot;popups&quot;: 1,\n         &quot;ppapi-broker&quot;: 1\n      },\n      &quot;password_manager_enabled&quot;: false\n   },\n   &quot;safebrowsing&quot;: {\n      &quot;enabled&quot;: false\n   },\n   &quot;search&quot;: {\n      &quot;suggest_enabled&quot;: false\n   },\n   &quot;translate&quot;: {\n      &quot;enabled&quot;: false\n   }\n}\n[1687340263.633][INFO]: Populating Local State file: {\n   &quot;background_mode&quot;: {\n      &quot;enabled&quot;: false\n   },\n   &quot;ssl&quot;: {\n      &quot;rev_checking&quot;: {\n         &quot;enabled&quot;: false\n      }\n   }\n}\n[1687340263.637][INFO]: Launching chrome: &quot;C:\\AFC\\PointOfSale\\PointOfSale.exe&quot; --allow-pre-commit-input --disable-background-networking --disable-backgrounding-occluded-windows --disable-client-side-phishing-detection --disable-default-apps --disable-hang-monitor --disable-popup-blocking --disable-prompt-on-repost --disable-sync --enable-automation --enable-blink-features=ShadowDOMV0 --enable-logging --log-level=0 --no-first-run --no-sandbox --no-service-autorun --password-store=basic --remote-debugging-port=9222 --start-maximized --test-type=webdriver --use-mock-keychain --user-data-dir=&quot;C:\\Users\\UserProfile\\AppData\\Local\\Temp\\scoped_dir117580_1083242216&quot; data:,\n[1687340263.651][DEBUG]: DevTools HTTP Request: http://localhost:9222/json/version\n[1687340264.226][DEBUG]: DevTools HTTP Response: {\n   &quot;Browser&quot;: &quot;Chrome/110.0.5481.104&quot;,\n   &quot;Protocol-Version&quot;: &quot;1.3&quot;,\n   &quot;User-Agent&quot;: &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) PointOfSale/1.0.0 Chrome/110.0.5481.104 Electron/23.1.1 Safari/537.36&quot;,\n   &quot;V8-Version&quot;: &quot;11.0.226.16&quot;,\n   &quot;WebKit-Version&quot;: &quot;537.36 (@46de4a7f41979e829b430bc1ee30ef483aa227ac)&quot;,\n   &quot;webSocketDebuggerUrl&quot;: &quot;ws://localhost:9222/devtools/browser/bd8c11d3-9ff1-4a4c-9ce9-fdb9619d0210&quot;\n}\n\n[1687340264.226][DEBUG]: DevTools HTTP Request: http://localhost:9222/json/list\n[1687340264.228][DEBUG]: DevTools HTTP Response: [ {\n   &quot;description&quot;: &quot;&quot;,\n   &quot;devtoolsFrontendUrl&quot;: &quot;/devtools/inspector.html?ws=localhost:9222/devtools/page/3D5D926A00E7B99A43C30D657DB31A66&quot;,\n   &quot;id&quot;: &quot;3D5D926A00E7B99A43C30D657DB31A66&quot;,\n   &quot;title&quot;: &quot;&quot;,\n   &quot;type&quot;: &quot;page&quot;,\n   &quot;url&quot;: &quot;file:///C:/AFC/PointOfSale/resources/app.asar/html/start.html&quot;,\n   &quot;webSocketDebuggerUrl&quot;: &quot;ws://localhost:9222/devtools/page/3D5D926A00E7B99A43C30D657DB31A66&quot;\n} ]\n\n[1687340264.255][INFO]: resolved localhost to [&quot;::1&quot;,&quot;127.0.0.1&quot;]\n[1687340264.257][WARNING]: virtual void DevToolsClientImpl::AddListener(DevToolsEventListener *) subscribing a listener to the already connected DevToolsClient. Connection notification will not arrive.\n[1687340264.258][DEBUG]: DevTools WebSocket Command: Target.getTargets (id=1) (session_id=) browser {\n}\n[1687340264.259][DEBUG]: DevTools WebSocket Response: Target.getTargets (id=1) (session_id=) browser {\n   &quot;targetInfos&quot;: [ {\n      &quot;attached&quot;: false,\n      &quot;browserContextId&quot;: &quot;9EEB1F223152D98321FD4F4558501009&quot;,\n      &quot;canAccessOpener&quot;: false,\n      &quot;targetId&quot;: &quot;3D5D926A00E7B99A43C30D657DB31A66&quot;,\n      &quot;title&quot;: &quot;&quot;,\n      &quot;type&quot;: &quot;page&quot;,\n      &quot;url&quot;: &quot;file:///C:/AFC/PointOfSale/resources/app.asar/html/start.html&quot;\n   } ]\n}\n[1687340264.259][DEBUG]: DevTools WebSocket Command: Target.attachToTarget (id=2) (session_id=) browser {\n   &quot;flatten&quot;: true,\n   &quot;targetId&quot;: &quot;3D5D926A00E7B99A43C30D657DB31A66&quot;\n}\n[1687340264.260][DEBUG]: DevTools WebSocket Event: Target.attachedToTarget (session_id=) browser {\n   &quot;sessionId&quot;: &quot;C5798C306B0019F541FAFF88D3DDC14B&quot;,\n   &quot;targetInfo&quot;: {\n      &quot;attached&quot;: true,\n      &quot;browserContextId&quot;: &quot;9EEB1F223152D98321FD4F4558501009&quot;,\n      &quot;canAccessOpener&quot;: false,\n      &quot;targetId&quot;: &quot;3D5D926A00E7B99A43C30D657DB31A66&quot;,\n      &quot;title&quot;: &quot;&quot;,\n      &quot;type&quot;: &quot;page&quot;,\n      &quot;url&quot;: &quot;file:///C:/AFC/PointOfSale/resources/app.asar/html/start.html&quot;\n   },\n   &quot;waitingForDebugger&quot;: false\n}\n[1687340264.260][DEBUG]: DevTools WebSocket Response: Target.attachToTarget (id=2) (session_id=) browser {\n   &quot;sessionId&quot;: &quot;C5798C306B0019F541FAFF88D3DDC14B&quot;\n}\n[1687340264.260][DEBUG]: DevTools WebSocket Command: Page.addScriptToEvaluateOnNewDocument (id=3) (session_id=C5798C306B0019F541FAFF88D3DDC14B) 3D5D926A00E7B99A43C30D657DB31A66 {\n   &quot;source&quot;: &quot;(function () {window.cdc_adoQpoasnfa76pfcZLmcfl_Array = window.Array;window.cdc_adoQpoasnfa76pfcZLmcfl_Promise = window.Promise;window.cdc_adoQpoasnfa76pfcZLmcfl_Symbol = window.Symbol;}) ();&quot;\n}\n[1687340264.260][DEBUG]: DevTools WebSocket Command: Runtime.evaluate (id=4) (session_id=C5798C306B0019F541FAFF88D3DDC14B) 3D5D926A00E7B99A43C30D657DB31A66 {\n   &quot;expression&quot;: &quot;(function () {window.cdc_adoQpoasnfa76pfcZLmcfl_Array = window.Array;window.cdc_adoQpoasnfa76pfcZLmcfl_Promise = window.Promise;window.cdc_adoQpoasnfa76pfcZLmcfl_Symbol = window.Symbol;}) ();&quot;\n}\n[1687340264.261][DEBUG]: DevTools WebSocket Command: Log.enable (id=5) (session_id=C5798C306B0019F541FAFF88D3DDC14B) 3D5D926A00E7B99A43C30D657DB31A66 {\n}\n[1687340264.261][DEBUG]: DevTools WebSocket Command: Target.setAutoAttach (id=6) (session_id=C5798C306B0019F541FAFF88D3DDC14B) 3D5D926A00E7B99A43C30D657DB31A66 {\n   &quot;autoAttach&quot;: true,\n   &quot;flatten&quot;: true,\n   &quot;waitForDebuggerOnStart&quot;: false\n}\n[1687340264.261][DEBUG]: DevTools WebSocket Command: Page.enable (id=7) (session_id=C5798C306B0019F541FAFF88D3DDC14B) 3D5D926A00E7B99A43C30D657DB31A66 {\n}\n[1687340264.262][DEBUG]: DevTools WebSocket Command: Page.enable (id=8) (session_id=C5798C306B0019F541FAFF88D3DDC14B) 3D5D926A00E7B99A43C30D657DB31A66 {\n}\n[1687340264.294][DEBUG]: DevTools WebSocket Response: Page.addScriptToEvaluateOnNewDocument (id=3) (session_id=C5798C306B0019F541FAFF88D3DDC14B) 3D5D926A00E7B99A43C30D657DB31A66 {\n   &quot;identifier&quot;: &quot;1&quot;\n}\n[1687340264.294][DEBUG]: DevTools WebSocket Response: Runtime.evaluate (id=4) (session_id=C5798C306B0019F541FAFF88D3DDC14B) 3D5D926A00E7B99A43C30D657DB31A66 {\n   &quot;result&quot;: {\n      &quot;type&quot;: &quot;undefined&quot;\n   }\n}\n[1687340264.294][DEBUG]: DevTools WebSocket Response: Log.enable (id=5) (session_id=C5798C306B0019F541FAFF88D3DDC14B) 3D5D926A00E7B99A43C30D657DB31A66 {\n}\n[1687340264.294][DEBUG]: DevTools WebSocket Response: Target.setAutoAttach (id=6) (session_id=C5798C306B0019F541FAFF88D3DDC14B) 3D5D926A00E7B99A43C30D657DB31A66 {\n}\n[1687340264.294][DEBUG]: DevTools WebSocket Response: Page.enable (id=7) (session_id=C5798C306B0019F541FAFF88D3DDC14B) 3D5D926A00E7B99A43C30D657DB31A66 {\n}\n[1687340264.294][DEBUG]: DevTools WebSocket Response: Page.enable (id=8) (session_id=C5798C306B0019F541FAFF88D3DDC14B) 3D5D926A00E7B99A43C30D657DB31A66 {\n}\n[1687340264.294][DEBUG]: DevTools WebSocket Command: Runtime.enable (id=9) (session_id=C5798C306B0019F541FAFF88D3DDC14B) 3D5D926A00E7B99A43C30D657DB31A66 {\n}\n[1687340264.295][DEBUG]: DevTools WebSocket Event: Page.domContentEventFired (session_id=C5798C306B0019F541FAFF88D3DDC14B) 3D5D926A00E7B99A43C30D657DB31A66 {\n   &quot;timestamp&quot;: 1207352.837148\n}\n[1687340264.298][DEBUG]: DevTools WebSocket Event: Runtime.executionContextCreated (session_id=C5798C306B0019F541FAFF88D3DDC14B) 3D5D926A00E7B99A43C30D657DB31A66 {\n   &quot;context&quot;: {\n      &quot;auxData&quot;: {\n         &quot;frameId&quot;: &quot;3D5D926A00E7B99A43C30D657DB31A66&quot;,\n         &quot;isDefault&quot;: false,\n         &quot;type&quot;: &quot;isolated&quot;\n      },\n      &quot;id&quot;: 2,\n      &quot;name&quot;: &quot;Electron Isolated Context&quot;,\n      &quot;origin&quot;: &quot;file://&quot;,\n      &quot;uniqueId&quot;: &quot;-4165743087318469963.1924850320221961557&quot;\n   }\n}\n[1687340264.298][DEBUG]: DevTools WebSocket Event: Runtime.executionContextCreated (session_id=C5798C306B0019F541FAFF88D3DDC14B) 3D5D926A00E7B99A43C30D657DB31A66 {\n   &quot;context&quot;: {\n      &quot;auxData&quot;: {\n         &quot;frameId&quot;: &quot;3D5D926A00E7B99A43C30D657DB31A66&quot;,\n         &quot;isDefault&quot;: true,\n         &quot;type&quot;: &quot;default&quot;\n      },\n      &quot;id&quot;: 1,\n      &quot;name&quot;: &quot;&quot;,\n      &quot;origin&quot;: &quot;file://&quot;,\n      &quot;uniqueId&quot;: &quot;-966553648842666591.1831066268359020716&quot;\n   }\n}\n[1687340264.298][DEBUG]: DevTools WebSocket Response: Runtime.enable (id=9) (session_id=C5798C306B0019F541FAFF88D3DDC14B) 3D5D926A00E7B99A43C30D657DB31A66 {\n}\n[1687340264.298][DEBUG]: DevTools WebSocket Command: Page.enable (id=10) (session_id=C5798C306B0019F541FAFF88D3DDC14B) 3D5D926A00E7B99A43C30D657DB31A66 {\n}\n[1687340264.300][DEBUG]: DevTools WebSocket Response: Page.enable (id=10) (session_id=C5798C306B0019F541FAFF88D3DDC14B) 3D5D926A00E7B99A43C30D657DB31A66 {\n}\n[1687340264.300][DEBUG]: DevTools WebSocket Command: Runtime.enable (id=11) (session_id=C5798C306B0019F541FAFF88D3DDC14B) 3D5D926A00E7B99A43C30D657DB31A66 {\n}\n[1687340264.310][DEBUG]: DevTools WebSocket Event: Page.loadEventFired (session_id=C5798C306B0019F541FAFF88D3DDC14B) 3D5D926A00E7B99A43C30D657DB31A66 {\n   &quot;timestamp&quot;: 1207352.842856\n}\n[1687340264.310][DEBUG]: DevTools WebSocket Command: Runtime.evaluate (id=12) (session_id=C5798C306B0019F541FAFF88D3DDC14B) 3D5D926A00E7B99A43C30D657DB31A66 {\n   &quot;awaitPromise&quot;: false,\n   &quot;expression&quot;: &quot;document.readyState&quot;,\n   &quot;returnByValue&quot;: true\n}\n[1687340264.310][DEBUG]: DevTools WebSocket Event: Page.frameStoppedLoading (session_id=C5798C306B0019F541FAFF88D3DDC14B) 3D5D926A00E7B99A43C30D657DB31A66 {\n   &quot;frameId&quot;: &quot;3D5D926A00E7B99A43C30D657DB31A66&quot;\n}\n[1687340264.310][DEBUG]: DevTools WebSocket Response: Runtime.enable (id=11) (session_id=C5798C306B0019F541FAFF88D3DDC14B) 3D5D926A00E7B99A43C30D657DB31A66 {\n}\n[1687340264.311][DEBUG]: DevTools WebSocket Response: Runtime.evaluate (id=12) (session_id=C5798C306B0019F541FAFF88D3DDC14B) 3D5D926A00E7B99A43C30D657DB31A66 {\n   &quot;result&quot;: {\n      &quot;type&quot;: &quot;string&quot;,\n      &quot;value&quot;: &quot;complete&quot;\n   }\n}\n[1687340264.312][DEBUG]: DevTools WebSocket Command: Runtime.evaluate (id=13) (session_id=C5798C306B0019F541FAFF88D3DDC14B) 3D5D926A00E7B99A43C30D657DB31A66 {\n   &quot;awaitPromise&quot;: true,\n   &quot;expression&quot;: &quot;(function() { // Copyright 2012 The Chromium Authors\\n// Use of this source code is governed by a BSD-style license that can be\\n// found in the LICENSE file.\\n\\n/**\\n * Enum for WebDriver status codes....&quot;,\n   &quot;returnByValue&quot;: true\n}\n[1687340264.315][DEBUG]: DevTools WebSocket Response: Runtime.evaluate (id=13) (session_id=C5798C306B0019F541FAFF88D3DDC14B) 3D5D926A00E7B99A43C30D657DB31A66 {\n   &quot;result&quot;: {\n      &quot;type&quot;: &quot;object&quot;,\n      &quot;value&quot;: {\n         &quot;status&quot;: 0,\n         &quot;value&quot;: 1\n      }\n   }\n}\n[1687340264.315][INFO]: [34022d8904f2f63ebd53781d89c6b5a3] RESPONSE InitSession {\n   &quot;capabilities&quot;: {\n      &quot;acceptInsecureCerts&quot;: false,\n      &quot;browserName&quot;: &quot;chrome&quot;,\n      &quot;browserVersion&quot;: &quot;110.0.5481.104&quot;,\n      &quot;chrome&quot;: {\n         &quot;chromedriverVersion&quot;: &quot;110.0.5481.104 (46de4a7f41979e829b430bc1ee30ef483aa227ac-refs/branch-heads/5481_77@{#19})&quot;,\n         &quot;userDataDir&quot;: &quot;C:\\\\Users\\\\UserProfile\\\\AppData\\\\Local\\\\Temp\\\\scoped_dir117580_1083242216&quot;\n      },\n      &quot;goog:chromeOptions&quot;: {\n         &quot;debuggerAddress&quot;: &quot;localhost:9222&quot;\n      },\n      &quot;networkConnectionEnabled&quot;: false,\n      &quot;pageLoadStrategy&quot;: &quot;normal&quot;,\n      &quot;platformName&quot;: &quot;windows&quot;,\n      &quot;proxy&quot;: {\n      },\n      &quot;setWindowRect&quot;: true,\n      &quot;strictFileInteractability&quot;: false,\n      &quot;timeouts&quot;: {\n         &quot;implicit&quot;: 0,\n         &quot;pageLoad&quot;: 300000,\n         &quot;script&quot;: 30000\n      },\n      &quot;unhandledPromptBehavior&quot;: &quot;dismiss and notify&quot;,\n      &quot;webauthn:extension:credBlob&quot;: true,\n      &quot;webauthn:extension:largeBlob&quot;: true,\n      &quot;webauthn:virtualAuthenticators&quot;: true\n   },\n   &quot;sessionId&quot;: &quot;34022d8904f2f63ebd53781d89c6b5a3&quot;\n}\n[1687340265.977][DEBUG]: DevTools WebSocket Event: Target.detachedFromTarget (session_id=) browser {\n   &quot;sessionId&quot;: &quot;C5798C306B0019F541FAFF88D3DDC14B&quot;,\n   &quot;targetId&quot;: &quot;3D5D926A00E7B99A43C30D657DB31A66&quot;\n}\n[1687340274.428][INFO]: [34022d8904f2f63ebd53781d89c6b5a3] COMMAND GetWindow {\n}\n[1687340274.453][INFO]: [34022d8904f2f63ebd53781d89c6b5a3] RESPONSE GetWindow ERROR no such window: target window already closed\nfrom unknown error: web view not found\n  (Session info: chrome=110.0.5481.104)\n[1687340274.462][INFO]: [34022d8904f2f63ebd53781d89c6b5a3] COMMAND Quit {\n}\n[1687340274.515][INFO]: [34022d8904f2f63ebd53781d89c6b5a3] RESPONSE Quit\n[1687340274.515][DEBUG]: Log type 'driver' lost 1 entries on destruction\n[1687340274.515][DEBUG]: Log type 'browser' lost 0 entries on destruction\n\norg.openqa.selenium.NoSuchWindowException: no such window: target window already closed\nfrom unknown error: web view not found\n  (Session info: chrome=110.0.5481.104)\nBuild info: version: '4.8.1', revision: '8ebccac989'\nSystem info: os.name: 'Windows 10', os.arch: 'amd64', os.version: '10.0', java.version: '19.0.1'\nDriver info: org.openqa.selenium.chrome.ChromeDriver\nCommand: [34022d8904f2f63ebd53781d89c6b5a3, getCurrentWindowHandle {}]\nCapabilities {acceptInsecureCerts: false, browserName: chrome, browserVersion: 110.0.5481.104, chrome: {chromedriverVersion: 110.0.5481.104 (46de4a7f419..., userDataDir: C:\\Users\\UserProfile\\AppData\\L...}, goog:chromeOptions: {debuggerAddress: localhost:9222}, networkConnectionEnabled: false, pageLoadStrategy: normal, platformName: WINDOWS, proxy: Proxy(), se:cdp: ws://localhost:9222/devtool..., se:cdpVersion: 110.0.5481.104, setWindowRect: true, strictFileInteractability: false, timeouts: {implicit: 0, pageLoad: 300000, script: 30000}, unhandledPromptBehavior: dismiss and notify, webauthn:extension:credBlob: true, webauthn:extension:largeBlob: true, webauthn:virtualAuthenticators: true}\nSession ID: 34022d8904f2f63ebd53781d89c6b5a3\n\n</code></pre>\n"},{"tags":["java","spring","mongodb","spring-boot"],"answers":[{"comments":[{"owner":{"account_id":3762449,"reputation":1696,"user_id":3126973,"accept_rate":54,"display_name":"Romeo Sierra"},"score":1,"creation_date":1625636061,"post_id":39097051,"comment_id":120675549,"body_markdown":"I had to specify `?authSource=admin&amp;authMechanism=SCRAM-SHA-1` also in the connection string. I am on Spring Boot 2.3.4 with MongoDB 4.4.6. Credit goes to @sam for their answer https://stackoverflow.com/a/52630280/3126973","body":"I had to specify <code>?authSource=admin&amp;authMechanism=SCRAM-SHA-1</code> also in the connection string. I am on Spring Boot 2.3.4 with MongoDB 4.4.6. Credit goes to @sam for their answer <a href=\"https://stackoverflow.com/a/52630280/3126973\">stackoverflow.com/a/52630280/3126973</a>"}],"tags":[],"owner":{"account_id":9056575,"reputation":747,"user_id":6744675,"display_name":"IndyStef"},"comment_count":1,"down_vote_count":0,"up_vote_count":29,"is_accepted":true,"score":29,"last_activity_date":1471943608,"creation_date":1471943608,"answer_id":39097051,"question_id":39086471,"body_markdown":"I found the problem. For completeness of this thread, I&#39;ll share the answer, including the code. \r\nThe issue was that I used the application property spring.data.mongodb.uri wrong: it did not have the username and password in the URI, because I mistakenly believed that spring.data.mongodb.username and spring.data.mongodb.password covered that. So, either use the uri with username and password, or use the host and database (and maybe also port) spring properties explicitly.\r\nHere is the code. It will work in the spring boot app with mongoDB support (use initializr or IntelliJ to create that project).\r\nI have a model:\r\n\r\n    package net.IndyStef.model;\r\n\r\n    import org.springframework.data.annotation.Id;\r\n    import org.springframework.data.mongodb.core.mapping.Document;\r\n    \r\n    @Document(collection = &quot;person&quot;)\r\n    public class Person {\r\n\r\n    @Id\r\n    private String id;\r\n\r\n    private String name;\r\n    private Integer age;\r\n\r\n    public Person() {\r\n    }\r\n\r\n    public Person(String id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public Person(String id, String name, Integer age) {\r\n        this.id = id;\r\n        this.name = name;\r\n        this.age = age;\r\n    }\r\n\r\n    ... getters/setters omitted for breverity ...\r\n    }\r\n\r\nThe data is read and written through a repository:\r\n\r\n    package net.IndyStef.repository;\r\n\r\n    import net.okrongli.model.Person;\r\n    import org.springframework.data.mongodb.repository.MongoRepository;\r\n    \r\n    /**\r\n     * Created by IndyStef on 23/08/16.\r\n     */\r\n    public interface PersonRepository extends MongoRepository&lt;Person, String&gt; {\r\n    }\r\n\r\nThe database name, host, and credentials are in the application.properties file:\r\n\r\n    spring.data.mongodb.host=192.168.1.90\r\n    spring.data.mongodb.database=people\r\n    spring.data.mongodb.username=user\r\n    spring.data.mongodb.password=password\r\n    #spring.data.mongodb.uri=mongodb://192.168.1.90/people\r\n\r\nImportant is to not mix the uri with database and username. If you use uri, it needs to include the username and password, like this:\r\n\r\n    spring.data.mongodb.uri=mongodb://user:password@192.168.1.90/people\r\n\r\nTo test this, I used a simple Spring command line runner:\r\n\r\n    package net.IndyStef;\r\n    \r\n    import net.IndyStef.model.Person;\r\n    import net.IndyStef.repository.PersonRepository;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.boot.CommandLineRunner;\r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    \r\n    import java.util.List;\r\n    \r\n    @SpringBootApplication\r\n    public class MongoDbTestApplication implements CommandLineRunner {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSpringApplication.run(MongoDbTestApplication.class, args);\r\n    \t}\r\n    \r\n    \t@Autowired\r\n    \tprivate PersonRepository repository;\r\n    \r\n        @Override\r\n        public void run(String... args) {\r\n    \r\n            repository.save(new Person(&quot;peter.pan&quot;, &quot;Peter Pan&quot;, 865));\r\n    \r\n            List&lt;Person&gt; people = repository.findAll();\r\n    \r\n            for (Person person: people) {\r\n                System.out.println(person);\r\n            }\r\n        }\r\n    }\r\n\r\nI hope this explanation helps others that couldn&#39;t figure it out, like myself for a couple of days.\r\n\r\nThanks,\r\n\r\nStefan\r\n","title":"Authentication error when accessing mongodb through Spring Boot app","body":"<p>I found the problem. For completeness of this thread, I'll share the answer, including the code. \nThe issue was that I used the application property spring.data.mongodb.uri wrong: it did not have the username and password in the URI, because I mistakenly believed that spring.data.mongodb.username and spring.data.mongodb.password covered that. So, either use the uri with username and password, or use the host and database (and maybe also port) spring properties explicitly.\nHere is the code. It will work in the spring boot app with mongoDB support (use initializr or IntelliJ to create that project).\nI have a model:</p>\n\n<pre><code>package net.IndyStef.model;\n\nimport org.springframework.data.annotation.Id;\nimport org.springframework.data.mongodb.core.mapping.Document;\n\n@Document(collection = \"person\")\npublic class Person {\n\n@Id\nprivate String id;\n\nprivate String name;\nprivate Integer age;\n\npublic Person() {\n}\n\npublic Person(String id) {\n    this.id = id;\n}\n\npublic Person(String id, String name, Integer age) {\n    this.id = id;\n    this.name = name;\n    this.age = age;\n}\n\n... getters/setters omitted for breverity ...\n}\n</code></pre>\n\n<p>The data is read and written through a repository:</p>\n\n<pre><code>package net.IndyStef.repository;\n\nimport net.okrongli.model.Person;\nimport org.springframework.data.mongodb.repository.MongoRepository;\n\n/**\n * Created by IndyStef on 23/08/16.\n */\npublic interface PersonRepository extends MongoRepository&lt;Person, String&gt; {\n}\n</code></pre>\n\n<p>The database name, host, and credentials are in the application.properties file:</p>\n\n<pre><code>spring.data.mongodb.host=192.168.1.90\nspring.data.mongodb.database=people\nspring.data.mongodb.username=user\nspring.data.mongodb.password=password\n#spring.data.mongodb.uri=mongodb://192.168.1.90/people\n</code></pre>\n\n<p>Important is to not mix the uri with database and username. If you use uri, it needs to include the username and password, like this:</p>\n\n<pre><code>spring.data.mongodb.uri=mongodb://user:password@192.168.1.90/people\n</code></pre>\n\n<p>To test this, I used a simple Spring command line runner:</p>\n\n<pre><code>package net.IndyStef;\n\nimport net.IndyStef.model.Person;\nimport net.IndyStef.repository.PersonRepository;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.CommandLineRunner;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\nimport java.util.List;\n\n@SpringBootApplication\npublic class MongoDbTestApplication implements CommandLineRunner {\n\n    public static void main(String[] args) {\n        SpringApplication.run(MongoDbTestApplication.class, args);\n    }\n\n    @Autowired\n    private PersonRepository repository;\n\n    @Override\n    public void run(String... args) {\n\n        repository.save(new Person(\"peter.pan\", \"Peter Pan\", 865));\n\n        List&lt;Person&gt; people = repository.findAll();\n\n        for (Person person: people) {\n            System.out.println(person);\n        }\n    }\n}\n</code></pre>\n\n<p>I hope this explanation helps others that couldn't figure it out, like myself for a couple of days.</p>\n\n<p>Thanks,</p>\n\n<p>Stefan</p>\n"},{"comments":[{"owner":{"account_id":9991848,"reputation":579,"user_id":7390851,"accept_rate":0,"display_name":"uday214125"},"score":1,"creation_date":1565610978,"post_id":52630280,"comment_id":101394732,"body_markdown":"unfortunately, this configuration is not working for me. i have mongodb 4.0 and spring boot 2.0.1","body":"unfortunately, this configuration is not working for me. i have mongodb 4.0 and spring boot 2.0.1"},{"owner":{"account_id":10212015,"reputation":1812,"user_id":7538821,"accept_rate":100,"display_name":"sam"},"score":0,"creation_date":1565799639,"post_id":52630280,"comment_id":101466729,"body_markdown":"@uday214125 try enabling mongodb authentication like given in the following link https://medium.com/mongoaudit/how-to-enable-authentication-on-mongodb-b9e8a924efac","body":"@uday214125 try enabling mongodb authentication like given in the following link <a href=\"https://medium.com/mongoaudit/how-to-enable-authentication-on-mongodb-b9e8a924efac\" rel=\"nofollow noreferrer\">medium.com/mongoaudit/&hellip;</a>"}],"tags":[],"owner":{"account_id":10212015,"reputation":1812,"user_id":7538821,"accept_rate":100,"display_name":"sam"},"comment_count":2,"down_vote_count":1,"up_vote_count":17,"is_accepted":false,"score":16,"last_activity_date":1538579568,"creation_date":1538579568,"answer_id":52630280,"question_id":39086471,"body_markdown":"As of Spring Boot 1.5.15, you can add the following line to your `application.properties` file:\r\n\r\n    spring.data.mongodb.uri=mongodb://username:password@localhost:27017/?authSource=admin&amp;authMechanism=SCRAM-SHA-1\r\n    spring.data.mongodb.database=mycollection","title":"Authentication error when accessing mongodb through Spring Boot app","body":"<p>As of Spring Boot 1.5.15, you can add the following line to your <code>application.properties</code> file:</p>\n\n<pre><code>spring.data.mongodb.uri=mongodb://username:password@localhost:27017/?authSource=admin&amp;authMechanism=SCRAM-SHA-1\nspring.data.mongodb.database=mycollection\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16130702,"reputation":111,"user_id":11644458,"display_name":"Sharan Toor"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1566398920,"creation_date":1560452434,"answer_id":56587020,"question_id":39086471,"body_markdown":"This is what worked for me at then end:\r\n```\r\nspring.data.mongodb.uri=mongodb://user:password@******.mongodb.net:27017/dbname?ssl=true&amp;authSource=admin&amp;authMechanism=SCRAM-SHA-1\r\n```\r\n\r\nI had to add `ssl=true`, otherwise I was getting error:\r\n&gt;com.mongodb.MongoSocketReadException: Prematurely reached end of stream","title":"Authentication error when accessing mongodb through Spring Boot app","body":"<p>This is what worked for me at then end:</p>\n\n<pre><code>spring.data.mongodb.uri=mongodb://user:password@******.mongodb.net:27017/dbname?ssl=true&amp;authSource=admin&amp;authMechanism=SCRAM-SHA-1\n</code></pre>\n\n<p>I had to add <code>ssl=true</code>, otherwise I was getting error:</p>\n\n<blockquote>\n  <p>com.mongodb.MongoSocketReadException: Prematurely reached end of stream</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":9260816,"reputation":47,"user_id":6877970,"display_name":"ridhopratama"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669560608,"creation_date":1669560608,"answer_id":74591004,"question_id":39086471,"body_markdown":"In my case, I am using minikube to run spring app with remote mongo db in mongo atlas\r\n\r\nEnd up locating full uri in secret. so no partial concatenating from configMaps &amp; secret.\r\n\r\nFrom\r\n\r\n    spring.data.mongodb.uri=${MONGODB_PREFIX_URL}://${MONGODB_COLLECTION_NAME}:${MONGODB_PASSWORD}@cluster0.kut8aym.mongodb.net/?retryWrites=true&amp;w=majority\r\n\r\nTo become\r\n\r\n    spring.data.mongodb.uri=${MONGODB_URI}\r\n\r\n","title":"Authentication error when accessing mongodb through Spring Boot app","body":"<p>In my case, I am using minikube to run spring app with remote mongo db in mongo atlas</p>\n<p>End up locating full uri in secret. so no partial concatenating from configMaps &amp; secret.</p>\n<p>From</p>\n<pre><code>spring.data.mongodb.uri=${MONGODB_PREFIX_URL}://${MONGODB_COLLECTION_NAME}:${MONGODB_PASSWORD}@cluster0.kut8aym.mongodb.net/?retryWrites=true&amp;w=majority\n</code></pre>\n<p>To become</p>\n<pre><code>spring.data.mongodb.uri=${MONGODB_URI}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28864754,"reputation":11,"user_id":22107760,"display_name":"antongub"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1687341236,"creation_date":1687341236,"answer_id":76522021,"question_id":39086471,"body_markdown":"If you&#39;re using a different database for authenticating then consider in Spring Boot 3.1.0 there is currently a bug where the authentication-database Property gets ignored inside the application.properties (See: https://github.com/spring-projects/spring-boot/issues/35632 and https://github.com/spring-projects/spring-boot/issues/35567).  \r\n\r\n\r\n\r\nThe bug will be solved in the next release but for the current release just use the uri property for your application.properties. So a simple example would look like:\r\n`spring.data.mongodb.uri=mongodb://username:password@localhost:27017/defaultdatabase?authSource=admin`\r\n\r\nIf you got some more specific options for the URI, the following is the [Mongo connection URI format](https://www.mongodb.com/docs/manual/reference/connection-string/):\r\n`mongodb://[username:password@]host1[:port1][,host2[:port2],...[,hostN[:portN]]][/[database.collection][?options]]`","title":"Authentication error when accessing mongodb through Spring Boot app","body":"<p>If you're using a different database for authenticating then consider in Spring Boot 3.1.0 there is currently a bug where the authentication-database Property gets ignored inside the application.properties (See: <a href=\"https://github.com/spring-projects/spring-boot/issues/35632\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-boot/issues/35632</a> and <a href=\"https://github.com/spring-projects/spring-boot/issues/35567\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-boot/issues/35567</a>).</p>\n<p>The bug will be solved in the next release but for the current release just use the uri property for your application.properties. So a simple example would look like:\n<code>spring.data.mongodb.uri=mongodb://username:password@localhost:27017/defaultdatabase?authSource=admin</code></p>\n<p>If you got some more specific options for the URI, the following is the <a href=\"https://www.mongodb.com/docs/manual/reference/connection-string/\" rel=\"nofollow noreferrer\">Mongo connection URI format</a>:\n<code>mongodb://[username:password@]host1[:port1][,host2[:port2],...[,hostN[:portN]]][/[database.collection][?options]]</code></p>\n"}],"owner":{"account_id":9056575,"reputation":747,"user_id":6744675,"display_name":"IndyStef"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44411,"favorite_count":0,"down_vote_count":0,"up_vote_count":20,"accepted_answer_id":39097051,"answer_count":5,"score":20,"last_activity_date":1687341236,"creation_date":1471890938,"question_id":39086471,"body_markdown":"I have some trouble connecting to a remote mongodb from a java spring boot application.\r\nThe MongoDB server has no firewall set up, and I can connect to mongo remotely from another machine. I have a database with collections and a user set up.\r\nWhen I try to connect to the database from my java app with the user credentials, I get an exception:\r\n\r\n    com.mongodb.MongoSecurityException: Exception authenticating MongoCredential{mechanism=null, userName=&#39;sokrates&#39;, source=&#39;homeControl&#39;, password=&lt;hidden&gt;, mechanismProperties={}}\r\n\tat com.mongodb.connection.SaslAuthenticator.authenticate(SaslAuthenticator.java:61) ~[mongodb-driver-core-3.2.2.jar:na]\r\n\tat com.mongodb.connection.DefaultAuthenticator.authenticate(DefaultAuthenticator.java:32) ~[mongodb-driver-core-3.2.2.jar:na]\r\n\tat com.mongodb.connection.InternalStreamConnectionInitializer.authenticateAll(InternalStreamConnectionInitializer.java:99) ~[mongodb-driver-core-3.2.2.jar:na]\r\n\tat com.mongodb.connection.InternalStreamConnectionInitializer.initialize(InternalStreamConnectionInitializer.java:44) ~[mongodb-driver-core-3.2.2.jar:na]\r\n\tat com.mongodb.connection.InternalStreamConnection.open(InternalStreamConnection.java:115) ~[mongodb-driver-core-3.2.2.jar:na]\r\n\tat com.mongodb.connection.DefaultServerMonitor$ServerMonitorRunnable.run(DefaultServerMonitor.java:128) ~[mongodb-driver-core-3.2.2.jar:na]\r\n\tat java.lang.Thread.run(Thread.java:745) [na:1.8.0_92]\r\n    Caused by: com.mongodb.MongoCommandException: Command failed with error 18: &#39;Authentication failed.&#39; on server localhost:27017. The full response is { &quot;ok&quot; : 0.0, &quot;code&quot; : 18, &quot;errmsg&quot; : &quot;Authentication failed.&quot; }\r\n\tat com.mongodb.connection.CommandHelper.createCommandFailureException(CommandHelper.java:170) ~[mongodb-driver-core-3.2.2.jar:na]\r\n\tat com.mongodb.connection.CommandHelper.receiveCommandResult(CommandHelper.java:123) ~[mongodb-driver-core-3.2.2.jar:na]\r\n\tat com.mongodb.connection.CommandHelper.executeCommand(CommandHelper.java:32) ~[mongodb-driver-core-3.2.2.jar:na]\r\n\tat com.mongodb.connection.SaslAuthenticator.sendSaslStart(SaslAuthenticator.java:95) ~[mongodb-driver-core-3.2.2.jar:na]\r\n\tat com.mongodb.connection.SaslAuthenticator.authenticate(SaslAuthenticator.java:45) ~[mongodb-driver-core-3.2.2.jar:na]\r\n\t... 6 common frames omitted\r\n\r\nWhen I use the same code to connect to a local MongoDB, with the same setup, database, collections and user, all is OK.\r\n\r\nI had a little trouble with setting an admin user up on the mongo installation. Also, the local mongo runs on OSX, whereas the production mongo (that fails to authenticate) runs on Ubuntu Server 16.04.\r\nI have researched other MongoDB authentication threads for two days now, but none could solve this issue for me. Any help with this is appreciated :-)\r\n\r\nThanks,\r\n\r\nStefan","title":"Authentication error when accessing mongodb through Spring Boot app","body":"<p>I have some trouble connecting to a remote mongodb from a java spring boot application.\nThe MongoDB server has no firewall set up, and I can connect to mongo remotely from another machine. I have a database with collections and a user set up.\nWhen I try to connect to the database from my java app with the user credentials, I get an exception:</p>\n\n<pre><code>com.mongodb.MongoSecurityException: Exception authenticating MongoCredential{mechanism=null, userName='sokrates', source='homeControl', password=&lt;hidden&gt;, mechanismProperties={}}\nat com.mongodb.connection.SaslAuthenticator.authenticate(SaslAuthenticator.java:61) ~[mongodb-driver-core-3.2.2.jar:na]\nat com.mongodb.connection.DefaultAuthenticator.authenticate(DefaultAuthenticator.java:32) ~[mongodb-driver-core-3.2.2.jar:na]\nat com.mongodb.connection.InternalStreamConnectionInitializer.authenticateAll(InternalStreamConnectionInitializer.java:99) ~[mongodb-driver-core-3.2.2.jar:na]\nat com.mongodb.connection.InternalStreamConnectionInitializer.initialize(InternalStreamConnectionInitializer.java:44) ~[mongodb-driver-core-3.2.2.jar:na]\nat com.mongodb.connection.InternalStreamConnection.open(InternalStreamConnection.java:115) ~[mongodb-driver-core-3.2.2.jar:na]\nat com.mongodb.connection.DefaultServerMonitor$ServerMonitorRunnable.run(DefaultServerMonitor.java:128) ~[mongodb-driver-core-3.2.2.jar:na]\nat java.lang.Thread.run(Thread.java:745) [na:1.8.0_92]\nCaused by: com.mongodb.MongoCommandException: Command failed with error 18: 'Authentication failed.' on server localhost:27017. The full response is { \"ok\" : 0.0, \"code\" : 18, \"errmsg\" : \"Authentication failed.\" }\nat com.mongodb.connection.CommandHelper.createCommandFailureException(CommandHelper.java:170) ~[mongodb-driver-core-3.2.2.jar:na]\nat com.mongodb.connection.CommandHelper.receiveCommandResult(CommandHelper.java:123) ~[mongodb-driver-core-3.2.2.jar:na]\nat com.mongodb.connection.CommandHelper.executeCommand(CommandHelper.java:32) ~[mongodb-driver-core-3.2.2.jar:na]\nat com.mongodb.connection.SaslAuthenticator.sendSaslStart(SaslAuthenticator.java:95) ~[mongodb-driver-core-3.2.2.jar:na]\nat com.mongodb.connection.SaslAuthenticator.authenticate(SaslAuthenticator.java:45) ~[mongodb-driver-core-3.2.2.jar:na]\n... 6 common frames omitted\n</code></pre>\n\n<p>When I use the same code to connect to a local MongoDB, with the same setup, database, collections and user, all is OK.</p>\n\n<p>I had a little trouble with setting an admin user up on the mongo installation. Also, the local mongo runs on OSX, whereas the production mongo (that fails to authenticate) runs on Ubuntu Server 16.04.\nI have researched other MongoDB authentication threads for two days now, but none could solve this issue for me. Any help with this is appreciated :-)</p>\n\n<p>Thanks,</p>\n\n<p>Stefan</p>\n"},{"tags":["java","swagger","openapi"],"owner":{"account_id":24932843,"reputation":31,"user_id":18799738,"display_name":"EkaSaffronGaruda"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687340564,"creation_date":1687340564,"question_id":76521936,"body_markdown":"I&#39;m trying to use Swagger annotations to generate a schema for a Java class that represents a Bhagavad Gita verse. Here&#39;s the class definition:\r\n```java\r\npackage org.projectsanatan.restsanatan.books;\r\n\r\nimport com.google.gson.annotations.SerializedName;\r\nimport io.swagger.v3.oas.annotations.media.ArraySchema;\r\nimport io.swagger.v3.oas.annotations.media.Schema;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\n@Schema(name = &quot;Bhagavad Gita Verse&quot;, description = &quot;Verse schema for Bhagavad Gita&quot;)\r\npublic class BhagavadGitaVerse {\r\n\r\n\t@SerializedName(value=&quot;chapter_id&quot;)\r\n\t@Schema(name = &quot;chapter_id&quot;, description = &quot;The chapter ID of the verse&quot;)\r\n\tprivate int chapterId;\r\n\r\n\t@SerializedName(value=&quot;verse_number&quot;)\r\n\t@Schema(name = &quot;verse_number&quot;, description = &quot;The verse number&quot;)\r\n\tprivate int verseNumber;\r\n\r\n\t@SerializedName(value=&quot;language&quot;)\r\n\t@Schema(name = &quot;language&quot;, description = &quot;Language of the verse&quot;)\r\n\tprivate String language = &quot;&quot;;\r\n\r\n\t@SerializedName(value=&quot;author&quot;)\r\n\t@Schema(name = &quot;author&quot;, description = &quot;Author of the verse&quot;, nullable = true)\r\n\tprivate String author = &quot;&quot;;\r\n\r\n\t@SerializedName(value=&quot;verse&quot;)\r\n\t@Schema(name = &quot;verse&quot;, description = &quot;The verse text&quot;)\r\n\tprivate String verse = &quot;&quot;;\r\n\r\n\t@SerializedName(value=&quot;transliteration&quot;)\r\n\t@Schema(name = &quot;transliteration&quot;, description = &quot;The transliteration of the verse if available&quot;, nullable = true)\r\n\tprivate String verseTransliteration = &quot;&quot;;\r\n\r\n\t@SerializedName(value=&quot;word_meanings&quot;)\r\n\t@ArraySchema(arraySchema = @Schema(\r\n\t\t\tdescription = &quot;List of word-meaning pairs&quot;,\r\n\t\t\timplementation = WordMeaningPair.class\r\n\t),\r\n\t\t\tschema = @Schema(\r\n\t\t\t\t\tdescription = &quot;A single word-meaning pair&quot;,\r\n\t\t\t\t\timplementation = WordMeaningPair.class\r\n\t\t\t))\r\n\tprivate List&lt;WordMeaningPair&gt; wordMeanings = new ArrayList&lt;&gt;();\r\n\r\n\tpublic BhagavadGitaVerse(int chapterId, int verseNumber) {\r\n\t\tthis.setChapterId(chapterId);\r\n\t\tthis.setVerseNumber(verseNumber);\r\n\t}\r\n\r\n\tpublic int getChapterId() {\r\n\t\treturn chapterId;\r\n\t}\r\n\r\n\tpublic void setChapterId(int chapterId) {\r\n\t\tthis.chapterId = chapterId;\r\n\t}\r\n\r\n\tpublic int getVerseNumber() {\r\n\t\treturn verseNumber;\r\n\t}\r\n\r\n\tpublic void setVerseNumber(int verseNumber) {\r\n\t\tthis.verseNumber = verseNumber;\r\n\t}\r\n\r\n\tpublic String getLanguage() {\r\n\t\treturn language;\r\n\t}\r\n\r\n\tpublic void setLanguage(String language) {\r\n\t\tthis.language = language;\r\n\t}\r\n\r\n\tpublic String getAuthor() {\r\n\t\treturn author;\r\n\t}\r\n\r\n\tpublic void setAuthor(String author) {\r\n\t\tthis.author = author;\r\n\t}\r\n\r\n\tpublic String getVerse() {\r\n\t\treturn verse;\r\n\t}\r\n\r\n\tpublic void setVerse(String verse) {\r\n\t\tthis.verse = verse;\r\n\t}\r\n\r\n\tpublic String getVerseTransliteration() {\r\n\t\treturn verseTransliteration;\r\n\t}\r\n\r\n\tpublic void setVerseTransliteration(String verseTransliteration) {\r\n\t\tthis.verseTransliteration = verseTransliteration;\r\n\t}\r\n\r\n\tpublic List&lt;WordMeaningPair&gt; getWordMeanings() {\r\n\t\treturn wordMeanings;\r\n\t}\r\n\r\n\tpublic void setWordMeanings(List&lt;WordMeaningPair&gt; wordMeanings) {\r\n\t\tthis.wordMeanings = wordMeanings;\r\n\t}\r\n\r\n\tpublic void addWordMeaning(String key, String value) {\r\n\t\tthis.wordMeanings.add(new WordMeaningPair(key, value));\r\n\t}\r\n\r\n\tpublic void addWordMeaning(WordMeaningPair wm) {\r\n\t\tthis.wordMeanings.add(wm);\r\n\t}\r\n\r\n\tpublic void removeWordMeaning(WordMeaningPair wm) {\r\n\t\tthis.wordMeanings.remove(wm);\r\n\t}\r\n\r\n\tprivate static class WordMeaningPair {\r\n\r\n\t\t@SerializedName(value=&quot;word&quot;)\r\n\t\t@Schema(description = &quot;The word&quot;)\r\n\t\tprivate String word;\r\n\r\n\t\t@SerializedName(value=&quot;meaning&quot;)\r\n\t\t@Schema(description = &quot;The meaning&quot;)\r\n\t\tprivate String meaning;\r\n\r\n\t\tpublic WordMeaningPair() {\r\n\r\n\t\t}\r\n\r\n\t\tpublic WordMeaningPair(String word, String meaning) {\r\n\t\t\tthis.setWord(word);\r\n\t\t\tthis.setMeaning(meaning);\r\n\t\t}\r\n\r\n\t\tpublic String getWord() {\r\n\t\t\treturn word;\r\n\t\t}\r\n\r\n\t\tpublic void setWord(String word) {\r\n\t\t\tthis.word = word;\r\n\t\t}\r\n\r\n\t\tpublic String getMeaning() {\r\n\t\t\treturn meaning;\r\n\t\t}\r\n\r\n\t\tpublic void setMeaning(String meaning) {\r\n\t\t\tthis.meaning = meaning;\r\n\t\t}\r\n\t}\r\n}\r\n```\r\nAs you can see, the class has properties that correspond to the fields in a Bhagavad Gita verse, including a list of WordMeaningPair objects that represent the meanings of the words in the verse.\r\n\r\nI want to use Swagger annotations to generate a schema for this class, but I&#39;m having a problem with the wordMeanings property. When I run the Swagger code generation tool, it creates a separate schema component for WordMeaningPair, instead of including it as a property inside the BhagavadGitaVerse schema. Here&#39;s the generated YAML:\r\n```yaml\r\n    Bhagavad Gita Verse:\r\n      type: object\r\n      properties:\r\n        chapter_id:\r\n          type: integer\r\n          description: The chapter ID of the verse\r\n          format: int32\r\n        verse_number:\r\n          type: integer\r\n          description: The verse number\r\n          format: int32\r\n        language:\r\n          type: string\r\n          description: Language of the verse\r\n        author:\r\n          type: string\r\n          description: Author of the verse\r\n          nullable: true\r\n        verse:\r\n          type: string\r\n          description: The verse text\r\n        transliteration:\r\n          type: string\r\n          description: The transliteration of the verse if available\r\n          nullable: true\r\n        wordMeanings:\r\n          type: array\r\n          description: List of word-meaning pairs\r\n          items:\r\n            $ref: &#39;#/components/schemas/WordMeaningPair&#39;\r\n      description: Verse schema for Bhagavad Gita\r\n    WordMeaningPair:\r\n      type: object\r\n      properties:\r\n        word:\r\n          type: string\r\n          description: The word\r\n        meaning:\r\n          type: string\r\n          description: The meaning\r\n      description: A single word-meaning pair\r\n```\r\nAs you can see, the generated YAML has a definition for a schema just for having it in one schema reference. I want it in the single BhagavadGitaVerse schema because its going to be used in only in that component. My generated YAML should look something like this:\r\n```yaml\r\n    BgVerse:\r\n      type: object\r\n      properties:\r\n        chapter_id:\r\n          type: integer\r\n        verse_number:\r\n          type: integer\r\n        language:\r\n          type: string\r\n        verse:\r\n          type: string\r\n        transliteration:\r\n          type: string\r\n        word_meanings:\r\n          type: array\r\n          items:\r\n            type: object\r\n            properties:\r\n              word:\r\n                type: string\r\n              meaning:\r\n                type: string\r\n```\r\n\r\nI have tried changing a lot of the annotations and looked up the docs and other sources as well, but couldn&#39;t find anything relevant.","title":"Swagger failure to generate nested schema by automatic generation","body":"<p>I'm trying to use Swagger annotations to generate a schema for a Java class that represents a Bhagavad Gita verse. Here's the class definition:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package org.projectsanatan.restsanatan.books;\n\nimport com.google.gson.annotations.SerializedName;\nimport io.swagger.v3.oas.annotations.media.ArraySchema;\nimport io.swagger.v3.oas.annotations.media.Schema;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\n@Schema(name = &quot;Bhagavad Gita Verse&quot;, description = &quot;Verse schema for Bhagavad Gita&quot;)\npublic class BhagavadGitaVerse {\n\n    @SerializedName(value=&quot;chapter_id&quot;)\n    @Schema(name = &quot;chapter_id&quot;, description = &quot;The chapter ID of the verse&quot;)\n    private int chapterId;\n\n    @SerializedName(value=&quot;verse_number&quot;)\n    @Schema(name = &quot;verse_number&quot;, description = &quot;The verse number&quot;)\n    private int verseNumber;\n\n    @SerializedName(value=&quot;language&quot;)\n    @Schema(name = &quot;language&quot;, description = &quot;Language of the verse&quot;)\n    private String language = &quot;&quot;;\n\n    @SerializedName(value=&quot;author&quot;)\n    @Schema(name = &quot;author&quot;, description = &quot;Author of the verse&quot;, nullable = true)\n    private String author = &quot;&quot;;\n\n    @SerializedName(value=&quot;verse&quot;)\n    @Schema(name = &quot;verse&quot;, description = &quot;The verse text&quot;)\n    private String verse = &quot;&quot;;\n\n    @SerializedName(value=&quot;transliteration&quot;)\n    @Schema(name = &quot;transliteration&quot;, description = &quot;The transliteration of the verse if available&quot;, nullable = true)\n    private String verseTransliteration = &quot;&quot;;\n\n    @SerializedName(value=&quot;word_meanings&quot;)\n    @ArraySchema(arraySchema = @Schema(\n            description = &quot;List of word-meaning pairs&quot;,\n            implementation = WordMeaningPair.class\n    ),\n            schema = @Schema(\n                    description = &quot;A single word-meaning pair&quot;,\n                    implementation = WordMeaningPair.class\n            ))\n    private List&lt;WordMeaningPair&gt; wordMeanings = new ArrayList&lt;&gt;();\n\n    public BhagavadGitaVerse(int chapterId, int verseNumber) {\n        this.setChapterId(chapterId);\n        this.setVerseNumber(verseNumber);\n    }\n\n    public int getChapterId() {\n        return chapterId;\n    }\n\n    public void setChapterId(int chapterId) {\n        this.chapterId = chapterId;\n    }\n\n    public int getVerseNumber() {\n        return verseNumber;\n    }\n\n    public void setVerseNumber(int verseNumber) {\n        this.verseNumber = verseNumber;\n    }\n\n    public String getLanguage() {\n        return language;\n    }\n\n    public void setLanguage(String language) {\n        this.language = language;\n    }\n\n    public String getAuthor() {\n        return author;\n    }\n\n    public void setAuthor(String author) {\n        this.author = author;\n    }\n\n    public String getVerse() {\n        return verse;\n    }\n\n    public void setVerse(String verse) {\n        this.verse = verse;\n    }\n\n    public String getVerseTransliteration() {\n        return verseTransliteration;\n    }\n\n    public void setVerseTransliteration(String verseTransliteration) {\n        this.verseTransliteration = verseTransliteration;\n    }\n\n    public List&lt;WordMeaningPair&gt; getWordMeanings() {\n        return wordMeanings;\n    }\n\n    public void setWordMeanings(List&lt;WordMeaningPair&gt; wordMeanings) {\n        this.wordMeanings = wordMeanings;\n    }\n\n    public void addWordMeaning(String key, String value) {\n        this.wordMeanings.add(new WordMeaningPair(key, value));\n    }\n\n    public void addWordMeaning(WordMeaningPair wm) {\n        this.wordMeanings.add(wm);\n    }\n\n    public void removeWordMeaning(WordMeaningPair wm) {\n        this.wordMeanings.remove(wm);\n    }\n\n    private static class WordMeaningPair {\n\n        @SerializedName(value=&quot;word&quot;)\n        @Schema(description = &quot;The word&quot;)\n        private String word;\n\n        @SerializedName(value=&quot;meaning&quot;)\n        @Schema(description = &quot;The meaning&quot;)\n        private String meaning;\n\n        public WordMeaningPair() {\n\n        }\n\n        public WordMeaningPair(String word, String meaning) {\n            this.setWord(word);\n            this.setMeaning(meaning);\n        }\n\n        public String getWord() {\n            return word;\n        }\n\n        public void setWord(String word) {\n            this.word = word;\n        }\n\n        public String getMeaning() {\n            return meaning;\n        }\n\n        public void setMeaning(String meaning) {\n            this.meaning = meaning;\n        }\n    }\n}\n</code></pre>\n<p>As you can see, the class has properties that correspond to the fields in a Bhagavad Gita verse, including a list of WordMeaningPair objects that represent the meanings of the words in the verse.</p>\n<p>I want to use Swagger annotations to generate a schema for this class, but I'm having a problem with the wordMeanings property. When I run the Swagger code generation tool, it creates a separate schema component for WordMeaningPair, instead of including it as a property inside the BhagavadGitaVerse schema. Here's the generated YAML:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>    Bhagavad Gita Verse:\n      type: object\n      properties:\n        chapter_id:\n          type: integer\n          description: The chapter ID of the verse\n          format: int32\n        verse_number:\n          type: integer\n          description: The verse number\n          format: int32\n        language:\n          type: string\n          description: Language of the verse\n        author:\n          type: string\n          description: Author of the verse\n          nullable: true\n        verse:\n          type: string\n          description: The verse text\n        transliteration:\n          type: string\n          description: The transliteration of the verse if available\n          nullable: true\n        wordMeanings:\n          type: array\n          description: List of word-meaning pairs\n          items:\n            $ref: '#/components/schemas/WordMeaningPair'\n      description: Verse schema for Bhagavad Gita\n    WordMeaningPair:\n      type: object\n      properties:\n        word:\n          type: string\n          description: The word\n        meaning:\n          type: string\n          description: The meaning\n      description: A single word-meaning pair\n</code></pre>\n<p>As you can see, the generated YAML has a definition for a schema just for having it in one schema reference. I want it in the single BhagavadGitaVerse schema because its going to be used in only in that component. My generated YAML should look something like this:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>    BgVerse:\n      type: object\n      properties:\n        chapter_id:\n          type: integer\n        verse_number:\n          type: integer\n        language:\n          type: string\n        verse:\n          type: string\n        transliteration:\n          type: string\n        word_meanings:\n          type: array\n          items:\n            type: object\n            properties:\n              word:\n                type: string\n              meaning:\n                type: string\n</code></pre>\n<p>I have tried changing a lot of the annotations and looked up the docs and other sources as well, but couldn't find anything relevant.</p>\n"},{"tags":["java","backoffice","hybris-data-hub"],"owner":{"account_id":13648022,"reputation":45,"user_id":9846632,"display_name":"VIJAYAKUMAR MAJJAGI"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687339822,"creation_date":1687239218,"question_id":76511647,"body_markdown":"No error message is returned when saving more characters than the max length on the text filed for the classification attributes in Backoffice. How to do validation for classification attribute in Hybris ?","title":"How to validate the classification attributes in Hybris?","body":"<p>No error message is returned when saving more characters than the max length on the text filed for the classification attributes in Backoffice. How to do validation for classification attribute in Hybris ?</p>\n"},{"tags":["java","spring-boot","jdbctemplate"],"comments":[{"owner":{"account_id":14162458,"reputation":3910,"user_id":10231374,"display_name":"Toni"},"score":0,"creation_date":1687328561,"post_id":76520413,"comment_id":134919348,"body_markdown":"Does this answer your question? [Can I set a JDBC timeout for a single query?](https://stackoverflow.com/questions/5397432/can-i-set-a-jdbc-timeout-for-a-single-query)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/5397432/can-i-set-a-jdbc-timeout-for-a-single-query\">Can I set a JDBC timeout for a single query?</a>"},{"owner":{"account_id":5138913,"reputation":83,"user_id":4116874,"accept_rate":89,"display_name":"TweaknFreak"},"score":0,"creation_date":1687339811,"post_id":76520413,"comment_id":134921832,"body_markdown":"That doesnt solve my issue @birca123 since I also need a RowMapper if the query execution goes through","body":"That doesnt solve my issue @birca123 since I also need a RowMapper if the query execution goes through"}],"owner":{"account_id":5138913,"reputation":83,"user_id":4116874,"accept_rate":89,"display_name":"TweaknFreak"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687339757,"creation_date":1687327794,"question_id":76520413,"body_markdown":"So the scenario is I want to rollback if a particular query if it crosses a particular time threshold using JDBCTemplate in Spring boot. However I dont want to use the timeout function from JDBC class since it&#39;ll be reflected project wide for all db transactions. Also if the query does get executed a RowMapper needs to be invoked to map the ResultSet to an object. So is it possible to only enable it for a query? Most answers are using PreparedStatement but does that support RowMapper?","title":"Specify a query timeout for only a single query JDBCTemplate","body":"<p>So the scenario is I want to rollback if a particular query if it crosses a particular time threshold using JDBCTemplate in Spring boot. However I dont want to use the timeout function from JDBC class since it'll be reflected project wide for all db transactions. Also if the query does get executed a RowMapper needs to be invoked to map the ResultSet to an object. So is it possible to only enable it for a query? Most answers are using PreparedStatement but does that support RowMapper?</p>\n"},{"tags":["java","database","oracle","sys"],"comments":[{"owner":{"account_id":15903,"reputation":323443,"user_id":34088,"accept_rate":77,"display_name":"Aaron Digulla"},"score":3,"creation_date":1334128758,"post_id":10101517,"comment_id":12940303,"body_markdown":"Please show the code which you use to connect.","body":"Please show the code which you use to connect."},{"owner":{"account_id":6248,"reputation":13507,"user_id":10433,"accept_rate":74,"display_name":"Andrew Swan"},"score":0,"creation_date":1470890159,"post_id":10101517,"comment_id":65135203,"body_markdown":"When you say &quot;in java&quot;, do you mean &quot;via JDBC&quot;?","body":"When you say &quot;in java&quot;, do you mean &quot;via JDBC&quot;?"}],"answers":[{"comments":[{"owner":{"account_id":6248,"reputation":13507,"user_id":10433,"accept_rate":74,"display_name":"Andrew Swan"},"score":0,"creation_date":1470890088,"post_id":10101657,"comment_id":65135181,"body_markdown":"The question was about connecting via Java, which I presume means JDBC. The commands you gave are for use with SQL*Plus, if I&#39;m not mistaken.","body":"The question was about connecting via Java, which I presume means JDBC. The commands you gave are for use with SQL*Plus, if I&#39;m not mistaken."}],"tags":[],"owner":{"account_id":1181272,"reputation":11208,"user_id":1544250,"accept_rate":82,"display_name":"Korhan Ozturk"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1334129890,"creation_date":1334129383,"answer_id":10101657,"question_id":10101517,"body_markdown":"If you have attempted to connect to the database like this: `connect SYS/&lt;password&gt;` you have used a syntax that is no longer valid (After Oracle 9i). \r\n\r\nInstead try to connect as the following: \r\n      \r\n    connect SYS/&lt;password&gt; as SYSDBA or connect SYS/&lt;password&gt; as SYSOPER","title":"How to connect in java as SYS to Oracle?","body":"<p>If you have attempted to connect to the database like this: <code>connect SYS/&lt;password&gt;</code> you have used a syntax that is no longer valid (After Oracle 9i). </p>\n\n<p>Instead try to connect as the following: </p>\n\n<pre><code>connect SYS/&lt;password&gt; as SYSDBA or connect SYS/&lt;password&gt; as SYSOPER\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1383653,"reputation":491,"user_id":1316139,"display_name":"Alexander"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1334166994,"creation_date":1334166994,"answer_id":10111354,"question_id":10101517,"body_markdown":"This code works \r\n\r\n    String driverName = &quot;oracle.jdbc.driver.OracleDriver&quot;;\r\n    Class.forName(driverName).newInstance();\r\n    String nameForConnect = &quot;sys as sysdba&quot;;\r\n    String pass = &quot;password&quot;;\r\n    String url = &quot;jdbc:oracle:thin:@192.168.0.1:1521:ORCL&quot;;\r\n    Connection conn = DriverManager.getConnection(url, nameForConnect, pass);","title":"How to connect in java as SYS to Oracle?","body":"<p>This code works </p>\n\n<pre><code>String driverName = \"oracle.jdbc.driver.OracleDriver\";\nClass.forName(driverName).newInstance();\nString nameForConnect = \"sys as sysdba\";\nString pass = \"password\";\nString url = \"jdbc:oracle:thin:@192.168.0.1:1521:ORCL\";\nConnection conn = DriverManager.getConnection(url, nameForConnect, pass);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":6248,"reputation":13507,"user_id":10433,"accept_rate":74,"display_name":"Andrew Swan"},"score":0,"creation_date":1470890933,"post_id":10111464,"comment_id":65135426,"body_markdown":"What is that, Groovy?","body":"What is that, Groovy?"},{"owner":{"display_name":"user5228393"},"score":1,"creation_date":1510352703,"post_id":10111464,"comment_id":81414921,"body_markdown":"The question is asked in java.","body":"The question is asked in java."},{"owner":{"account_id":428239,"reputation":2242,"user_id":810435,"accept_rate":82,"display_name":"naeemgik"},"score":0,"creation_date":1516791652,"post_id":10111464,"comment_id":83831115,"body_markdown":"whats the way in tomcat server.xml file?","body":"whats the way in tomcat server.xml file?"},{"owner":{"account_id":1743554,"reputation":885,"user_id":1594261,"display_name":"alexgirao"},"score":0,"creation_date":1528481546,"post_id":10111464,"comment_id":88540030,"body_markdown":"proper jdbc url for sys as sysdba: &quot;jdbc:oracle:thin:sys as sysdba/mysecretpassword@127.0.0.1:1521/xe&quot;, tested with xe 11.2.0.2.0","body":"proper jdbc url for sys as sysdba: &quot;jdbc:oracle:thin:sys as sysdba/mysecretpassword@127.0.0.1:1521/xe&quot;, tested with xe 11.2.0.2.0"}],"tags":[],"owner":{"account_id":1284035,"reputation":796,"user_id":1237482,"accept_rate":56,"display_name":"simplycurious"},"comment_count":4,"down_vote_count":0,"up_vote_count":42,"is_accepted":true,"score":42,"last_activity_date":1334167460,"creation_date":1334167460,"answer_id":10111464,"question_id":10101517,"body_markdown":"try this :\r\n\r\n    import java.sql as jsql\r\n    import java.lang as lang\r\n    driver, url, user, passwd = (\r\n    &quot;oracle.jdbc.driver.OracleDriver&quot;,\r\n    &quot;jdbc:oracle:thin:@localhost:1234:xxx1&quot;,\r\n    &quot;sys as sysdba&quot;,\r\n    &quot;xxx1&quot;)\r\n     lang.Class.forName(driver)\r\n     c = jsql.DriverManager.getConnection(url,user,passwd)","title":"How to connect in java as SYS to Oracle?","body":"<p>try this :</p>\n\n<pre><code>import java.sql as jsql\nimport java.lang as lang\ndriver, url, user, passwd = (\n\"oracle.jdbc.driver.OracleDriver\",\n\"jdbc:oracle:thin:@localhost:1234:xxx1\",\n\"sys as sysdba\",\n\"xxx1\")\n lang.Class.forName(driver)\n c = jsql.DriverManager.getConnection(url,user,passwd)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":213964,"reputation":1041,"user_id":467648,"display_name":"lkdg"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1363821675,"creation_date":1334229412,"answer_id":10122467,"question_id":10101517,"body_markdown":"Are you able to use an OracleDataSource Object?\r\n\r\n\r\n    public class Database {    \r\n        static OracleDataSource ods;    \r\n        public static Connection openConnection(String URL, String user, String password,     String option) throws SQLException\r\n    \t{\r\n    \t\t\tConnection conn = null;\r\n    \t\t\tProperties properties = new Properties();\r\n    \t\t\tproperties.put(&quot;user&quot;, user);\r\n    \t\t\tproperties.put(&quot;password&quot;, password);\r\n    \t\t\t\r\n    \t\t\tods = new OracleDataSource();\r\n    \t\t\tods.setURL(URL);\r\n    \t\t    \r\n    \t\t\tif(option != null)\r\n    \t\t    {\r\n    \t\t    \tproperties.put(&quot;internal_logon&quot;, option);\r\n    \t\t    }\r\n    \t\t\t\r\n    \t\t\tods.setConnectionProperties(properties);\r\n    \t        conn = ods.getConnection();\r\n    \t\t   \r\n    \t\t    return conn;\r\n    \t}\r\n    }\r\n\r\nAnd call it like this:\r\n\r\n    Connection con = null;    \r\n    con = Database.openConnection(&quot;YourJDBCConnectionURL&quot;, &quot;YourSYSUser&quot;, &quot;YourSYSPassword&quot;, &quot;sysdba&quot;);\r\n","title":"How to connect in java as SYS to Oracle?","body":"<p>Are you able to use an OracleDataSource Object?</p>\n\n<pre><code>public class Database {    \n    static OracleDataSource ods;    \n    public static Connection openConnection(String URL, String user, String password,     String option) throws SQLException\n    {\n            Connection conn = null;\n            Properties properties = new Properties();\n            properties.put(\"user\", user);\n            properties.put(\"password\", password);\n\n            ods = new OracleDataSource();\n            ods.setURL(URL);\n\n            if(option != null)\n            {\n                properties.put(\"internal_logon\", option);\n            }\n\n            ods.setConnectionProperties(properties);\n            conn = ods.getConnection();\n\n            return conn;\n    }\n}\n</code></pre>\n\n<p>And call it like this:</p>\n\n<pre><code>Connection con = null;    \ncon = Database.openConnection(\"YourJDBCConnectionURL\", \"YourSYSUser\", \"YourSYSPassword\", \"sysdba\");\n</code></pre>\n"},{"comments":[{"owner":{"account_id":150942,"reputation":2423,"user_id":364474,"accept_rate":31,"display_name":"bprasanna"},"score":0,"creation_date":1395164108,"post_id":20392447,"comment_id":34208956,"body_markdown":"Thanks this suggestion come in handy","body":"Thanks this suggestion come in handy"}],"tags":[],"owner":{"account_id":1441052,"reputation":944,"user_id":1642148,"accept_rate":71,"display_name":"RahulArackal"},"comment_count":1,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1575194070,"creation_date":1386222638,"answer_id":20392447,"question_id":10101517,"body_markdown":"Answers already there,\r\n\r\nyou are trying to connect as `sys` but the Server allows \r\n\r\neither\r\n\r\n    sys as sysdba\r\n\r\nor\r\n\r\n    sys as sysoper\r\n\r\n\r\njust change user parameter as either one from above\r\n\r\n    user=&#39;sys as sysdba&#39;\r\n\r\nor \r\n\r\n    user=&#39;sys as sysoper&#39;\r\n\r\n","title":"How to connect in java as SYS to Oracle?","body":"<p>Answers already there,</p>\n\n<p>you are trying to connect as <code>sys</code> but the Server allows </p>\n\n<p>either</p>\n\n<pre><code>sys as sysdba\n</code></pre>\n\n<p>or</p>\n\n<pre><code>sys as sysoper\n</code></pre>\n\n<p>just change user parameter as either one from above</p>\n\n<pre><code>user='sys as sysdba'\n</code></pre>\n\n<p>or </p>\n\n<pre><code>user='sys as sysoper'\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7042038,"reputation":387,"user_id":5394210,"display_name":"Ravibhushan Kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1497092096,"creation_date":1497092096,"answer_id":44472501,"question_id":10101517,"body_markdown":"If you want to connect your database with user other than &quot;sys&quot; as &quot;sysdba&quot; then you have to change the driver from &quot;thin&quot; to &quot;oci&quot; to make the successful connection.\r\n\r\n    try {\r\n\t\t\tClass.forName(&quot;oracle.jdbc.driver.OracleDriver&quot;);\r\n\t\t\tString DB_URL=&quot;jdbc:oracle:oci:@localhost:1521:orcl&quot;;\r\n\t\t\tOracleDataSource ds1=new OracleDataSource();\r\n\t\t    Properties prop1 = new Properties();\r\n\t\t    prop1.setProperty(&quot;user&quot;,&quot;ravi&quot;);\r\n\t\t    prop1.setProperty(&quot;password&quot;,&quot;******&quot;);\r\n\t\t    prop1.setProperty(&quot;internal_logon&quot;,&quot;sysdba&quot;);\r\n\t\t    ds1.setConnectionProperties(prop1);\r\n\t\t    ds1.setURL(DB_URL);\r\n\t\t    OracleConnection conn1 = (OracleConnection)ds1.getConnection();\r\n\t\t    Statement stmt = conn1.createStatement();\r\n\t\t\tResultSet rs = stmt.executeQuery(&quot;select * from dba_users&quot;);\r\n\t\t\twhile (rs.next())\r\n\t\t\t\tSystem.out.println(rs.getString(1));\r\n\t\t\tconn1.close();\r\n\t\t} catch (Exception e) {\r\n\t\t\tSystem.out.println(e);\r\n\t\t}\r\n","title":"How to connect in java as SYS to Oracle?","body":"<p>If you want to connect your database with user other than \"sys\" as \"sysdba\" then you have to change the driver from \"thin\" to \"oci\" to make the successful connection.</p>\n\n<pre><code>try {\n        Class.forName(\"oracle.jdbc.driver.OracleDriver\");\n        String DB_URL=\"jdbc:oracle:oci:@localhost:1521:orcl\";\n        OracleDataSource ds1=new OracleDataSource();\n        Properties prop1 = new Properties();\n        prop1.setProperty(\"user\",\"ravi\");\n        prop1.setProperty(\"password\",\"******\");\n        prop1.setProperty(\"internal_logon\",\"sysdba\");\n        ds1.setConnectionProperties(prop1);\n        ds1.setURL(DB_URL);\n        OracleConnection conn1 = (OracleConnection)ds1.getConnection();\n        Statement stmt = conn1.createStatement();\n        ResultSet rs = stmt.executeQuery(\"select * from dba_users\");\n        while (rs.next())\n            System.out.println(rs.getString(1));\n        conn1.close();\n    } catch (Exception e) {\n        System.out.println(e);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5017917,"reputation":670,"user_id":4032261,"accept_rate":100,"display_name":"Neha Gangwar"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1515674188,"creation_date":1515674188,"answer_id":48207262,"question_id":10101517,"body_markdown":"You need to put sysdba with user String parameter like\r\n\r\n    String user=&quot;sys as sysdba&quot;","title":"How to connect in java as SYS to Oracle?","body":"<p>You need to put sysdba with user String parameter like</p>\n\n<pre><code>String user=\"sys as sysdba\"\n</code></pre>\n"},{"comments":[{"owner":{"account_id":18833770,"reputation":2046,"user_id":13736952,"display_name":"M-Chen-3"},"score":0,"creation_date":1606179707,"post_id":64977503,"comment_id":114878743,"body_markdown":"Please explain what your code does and how it does it.","body":"Please explain what your code does and how it does it."}],"tags":[],"owner":{"account_id":17363545,"reputation":21,"user_id":12579252,"display_name":"user12579252"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1606170552,"creation_date":1606170552,"answer_id":64977503,"question_id":10101517,"body_markdown":"            /*It works for me*/\r\n            /*also oci and thin is important if you want to connect with database which is installed in your clien (Computer) add oci if you want to install to server add thin*/\r\n\r\n            String dbURL2 = &quot;jdbc:oracle:oci:@172.16.24.123:1521:XE&quot;;\r\n            String username = &quot;sys as sysdba&quot;;\r\n            String password = &quot;XX Change it to your system password&quot;;\r\n            \r\n            try {\r\n            Connection connection = DriverManager.getConnection(dbURL2, username, password);\r\n                System.out.println(&quot;Connected to Oracle data&quot;);\r\n            \r\n        } catch (SQLException e) {\r\n                System.out.println(&quot;Opps ! error&quot;);\r\n                e.printStackTrace();\r\n            \r\n        }","title":"How to connect in java as SYS to Oracle?","body":"<pre><code>        /*It works for me*/\n        /*also oci and thin is important if you want to connect with database which is installed in your clien (Computer) add oci if you want to install to server add thin*/\n\n        String dbURL2 = &quot;jdbc:oracle:oci:@172.16.24.123:1521:XE&quot;;\n        String username = &quot;sys as sysdba&quot;;\n        String password = &quot;XX Change it to your system password&quot;;\n        \n        try {\n        Connection connection = DriverManager.getConnection(dbURL2, username, password);\n            System.out.println(&quot;Connected to Oracle data&quot;);\n        \n    } catch (SQLException e) {\n            System.out.println(&quot;Opps ! error&quot;);\n            e.printStackTrace();\n        \n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11653885,"reputation":2966,"user_id":8534285,"display_name":"Ajay Kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1607463500,"creation_date":1607463500,"answer_id":65207290,"question_id":10101517,"body_markdown":"My two cents as I ran into the same exception. Following did the trick for me:\r\n\r\n \r\n\r\n               try (Connection conn = DriverManager.getConnection(\r\n                    &quot;jdbc:oracle:thin:@myserverip:1521:XE&quot;, &quot;sys as sysdba&quot;, &quot;Hello123&quot;)) {   \r\n               // this worked too - &quot;jdbc:oracle:thin:@myserverip:1521:XE&quot;, &quot;system&quot;\r\n                  if (conn != null) {\r\n                      System.out.println(&quot;Connected to the database!&quot;);\r\n                  } else {\r\n                    System.out.println(&quot;Failed to make connection!&quot;);\r\n                  }\r\n     \r\n                } catch (SQLException e) {\r\n                  System.err.format(&quot;SQL State: %s\\n%s&quot;, e.getSQLState(), e.getMessage());\r\n                } catch (Exception e) {\r\n                e.printStackTrace();\r\n               }","title":"How to connect in java as SYS to Oracle?","body":"<p>My two cents as I ran into the same exception. Following did the trick for me:</p>\n<pre><code>           try (Connection conn = DriverManager.getConnection(\n                &quot;jdbc:oracle:thin:@myserverip:1521:XE&quot;, &quot;sys as sysdba&quot;, &quot;Hello123&quot;)) {   \n           // this worked too - &quot;jdbc:oracle:thin:@myserverip:1521:XE&quot;, &quot;system&quot;\n              if (conn != null) {\n                  System.out.println(&quot;Connected to the database!&quot;);\n              } else {\n                System.out.println(&quot;Failed to make connection!&quot;);\n              }\n \n            } catch (SQLException e) {\n              System.err.format(&quot;SQL State: %s\\n%s&quot;, e.getSQLState(), e.getMessage());\n            } catch (Exception e) {\n            e.printStackTrace();\n           }\n</code></pre>\n"}],"owner":{"account_id":365724,"reputation":23438,"user_id":710818,"accept_rate":82,"display_name":"user710818"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45579,"favorite_count":0,"down_vote_count":0,"up_vote_count":32,"accepted_answer_id":10111464,"answer_count":9,"score":32,"last_activity_date":1687339067,"creation_date":1334128546,"question_id":10101517,"body_markdown":"I receive this error:\r\n\r\n    java.sql.SQLException: ORA-28009: connection as SYS should be as SYSDBA or SYSOPER\r\n\r\nHow to fix? (I need to be `SYS`).\r\nThanks.","title":"How to connect in java as SYS to Oracle?","body":"<p>I receive this error:</p>\n\n<pre><code>java.sql.SQLException: ORA-28009: connection as SYS should be as SYSDBA or SYSOPER\n</code></pre>\n\n<p>How to fix? (I need to be <code>SYS</code>).\nThanks.</p>\n"},{"tags":["java","html","selenium-webdriver","xpath"],"owner":{"account_id":3458139,"reputation":396,"user_id":3312628,"accept_rate":77,"display_name":"Leder"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687339059,"creation_date":1687339059,"question_id":76521730,"body_markdown":"This is my solved question on Selenium click Element in desktop view:\r\n[stackoverflow question][1]\r\n\r\nIn mobile view I tried the same ```iframe``` switch, now commented out, in order to ```.click()``` selenium element:\r\n\r\n```\r\n\r\n       // utilities.desktop.Driver.getDriver().switchTo().defaultContent(); // you are now outside both frames\r\n        // utilities.desktop.Driver.getDriver().switchTo().frame(zahlungPage.oneKlarna_fixedsum_best&#228;tigung_frameElement);\r\n\r\n        // Thread.sleep(2000);\r\n\r\n        wait.until(ExpectedConditions.visibilityOf(zahlungPage.oneKlarna_ratenkauf_6));\r\n        zahlungPage.oneKlarna_ratenkauf_6.click();\r\n\r\n```\r\n\r\nThis Element does not appear in Selenium:\r\n\r\n```\r\n    @FindBy(xpath = &quot;//input[@value=&#39;fixedsumcredit_kp&#39;]&quot;)\r\n    public WebElement oneKlarna_ratenkauf_6;\r\n\r\n```\r\n\r\npresent in HTML as follows:\r\n\r\n```\r\n&lt;input id=&quot;-0198e3aa-d2b1-46ce-bdf0-192e60662cd3-fixedsumcredit_kp&quot; type=&quot;radio&quot; name=&quot;-0198e3aa-d2b1-46ce-bdf0-192e60662cd3&quot; value=&quot;fixedsumcredit_kp&quot; style=&quot;height: 100%; opacity: 0; position: absolute; width: 100%; top: 0px; left: 0px; z-index: 1; cursor: pointer; -webkit-tap-highlight-color: rgba(255, 255, 255, 0);&quot;&gt;\r\n```\r\n\r\nerror in console is this:\r\n\r\n```\r\n      org.openqa.selenium.TimeoutException: Expected condition failed: waiting for visibility of Proxy element for: DefaultElementLocator &#39;By.xpath: //input[@value=&#39;fixedsumcredit_kp&#39;]&#39; (tried for 10 second(s) with 2000 milliseconds interval)\r\n\r\n```\r\n\r\n\r\nAnybody an idea what to try next in mobile view of the webshop in order to click the element similar to the click in desktop view?\r\n\r\n  [1]: https://stackoverflow.com/questions/76490487/html-element-not-clickable-via-java-selenium-jsexecutor/76512397#76512397","title":"Selenium java clicks on the desktop view inside of ```iframe``` Element... mobile view doesn&#39;t","body":"<p>This is my solved question on Selenium click Element in desktop view:\n<a href=\"https://stackoverflow.com/questions/76490487/html-element-not-clickable-via-java-selenium-jsexecutor/76512397#76512397\">stackoverflow question</a></p>\n<p>In mobile view I tried the same <code>iframe</code> switch, now commented out, in order to <code>.click()</code> selenium element:</p>\n<pre><code>\n       // utilities.desktop.Driver.getDriver().switchTo().defaultContent(); // you are now outside both frames\n        // utilities.desktop.Driver.getDriver().switchTo().frame(zahlungPage.oneKlarna_fixedsum_bestätigung_frameElement);\n\n        // Thread.sleep(2000);\n\n        wait.until(ExpectedConditions.visibilityOf(zahlungPage.oneKlarna_ratenkauf_6));\n        zahlungPage.oneKlarna_ratenkauf_6.click();\n\n</code></pre>\n<p>This Element does not appear in Selenium:</p>\n<pre><code>    @FindBy(xpath = &quot;//input[@value='fixedsumcredit_kp']&quot;)\n    public WebElement oneKlarna_ratenkauf_6;\n\n</code></pre>\n<p>present in HTML as follows:</p>\n<pre><code>&lt;input id=&quot;-0198e3aa-d2b1-46ce-bdf0-192e60662cd3-fixedsumcredit_kp&quot; type=&quot;radio&quot; name=&quot;-0198e3aa-d2b1-46ce-bdf0-192e60662cd3&quot; value=&quot;fixedsumcredit_kp&quot; style=&quot;height: 100%; opacity: 0; position: absolute; width: 100%; top: 0px; left: 0px; z-index: 1; cursor: pointer; -webkit-tap-highlight-color: rgba(255, 255, 255, 0);&quot;&gt;\n</code></pre>\n<p>error in console is this:</p>\n<pre><code>      org.openqa.selenium.TimeoutException: Expected condition failed: waiting for visibility of Proxy element for: DefaultElementLocator 'By.xpath: //input[@value='fixedsumcredit_kp']' (tried for 10 second(s) with 2000 milliseconds interval)\n\n</code></pre>\n<p>Anybody an idea what to try next in mobile view of the webshop in order to click the element similar to the click in desktop view?</p>\n"},{"tags":["java","google-chrome","selenium-webdriver"],"answers":[{"tags":[],"owner":{"account_id":295316,"reputation":736,"user_id":3324415,"accept_rate":74,"display_name":"BernardV"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1687267012,"creation_date":1687265244,"answer_id":76514872,"question_id":76514748,"body_markdown":"Looking at your logs you seem to be using Selenium Grid functionality, did you read the documentation yet? Are you taking their recommendations into account with your design? As this might be a CPU limitation as opposed to a memory limitation.\r\n\r\n&gt; By default, the maximum amount of concurrent sessions a Node supports\r\n&gt; is limited by the number of CPUs available. For example, if the Node\r\n&gt; machine has 8CPUs, it can run up to 8 concurrent browser sessions\r\n&gt; (with the exception of Safari, which is always one). Additionally, it\r\n&gt; is expected that each browser session should use around 1GB RAM.\r\n&gt; \r\n&gt; Note that the default values (1CPU/1GB RAM per browser) are a\r\n&gt; recommendation and they could not apply to your context. It is\r\n&gt; recommended to use them as a reference, but measuring performance\r\n&gt; continuously will help to determine the ideal values for your\r\n&gt; environment.\r\n\r\n[Source][1]\r\n\r\n\r\n  [1]: https://www.selenium.dev/documentation/grid/getting_started/#grid-sizes\r\n\r\nTaking the above documentation into account when you state:\r\n\r\n&gt; We can get up to 32 sessions, but as soon as we try to increase the\r\n&gt; session count further, all sessions start becoming janky\r\n\r\nAnd taking your CPU information provided:\r\n\r\n&gt; running on a 32-Core Ryzen™ 9\r\n\r\nThings seem to be clearing up.","title":"Selenium: Chrome starts crashing and unable to create session when more than 32 sessions are active at the same time","body":"<p>Looking at your logs you seem to be using Selenium Grid functionality, did you read the documentation yet? Are you taking their recommendations into account with your design? As this might be a CPU limitation as opposed to a memory limitation.</p>\n<blockquote>\n<p>By default, the maximum amount of concurrent sessions a Node supports\nis limited by the number of CPUs available. For example, if the Node\nmachine has 8CPUs, it can run up to 8 concurrent browser sessions\n(with the exception of Safari, which is always one). Additionally, it\nis expected that each browser session should use around 1GB RAM.</p>\n<p>Note that the default values (1CPU/1GB RAM per browser) are a\nrecommendation and they could not apply to your context. It is\nrecommended to use them as a reference, but measuring performance\ncontinuously will help to determine the ideal values for your\nenvironment.</p>\n</blockquote>\n<p><a href=\"https://www.selenium.dev/documentation/grid/getting_started/#grid-sizes\" rel=\"nofollow noreferrer\">Source</a></p>\n<p>Taking the above documentation into account when you state:</p>\n<blockquote>\n<p>We can get up to 32 sessions, but as soon as we try to increase the\nsession count further, all sessions start becoming janky</p>\n</blockquote>\n<p>And taking your CPU information provided:</p>\n<blockquote>\n<p>running on a 32-Core Ryzen™ 9</p>\n</blockquote>\n<p>Things seem to be clearing up.</p>\n"},{"tags":[],"owner":{"account_id":1015925,"reputation":11,"user_id":1027496,"display_name":"geco0ol"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687338870,"creation_date":1687338870,"answer_id":76521700,"question_id":76514748,"body_markdown":"@BernardV\r\nThe manual indicates the way how to override the number of sessions, by using those two parameters, and states that it is &quot;not recommended&quot; not that it is forbidden. \r\n\r\n    &quot;--override-max-sessions\r\n          The # of available processors is the recommended max sessions value (1 \r\n          browser session per processor). **Setting this flag to true allows the \r\n          recommended max value to be overwritten**. Session stability and \r\n          reliability might suffer as the host could run out of resources.\r\n          Default: false\r\n    --max-sessions\r\n          Maximum number of concurrent sessions. Default value is the number of \r\n          available processors.&quot;\r\n\r\nI&#39;ve tried this, because on other system it used to run perfectly fine like that. Your answer doesn;t bring any light on chrome crash btw, which also occurs even when running with (cpu count) sessions. Thx for your time, but really, I would appreciate some answers from users that have experienced this condition.","title":"Selenium: Chrome starts crashing and unable to create session when more than 32 sessions are active at the same time","body":"<p>@BernardV\nThe manual indicates the way how to override the number of sessions, by using those two parameters, and states that it is &quot;not recommended&quot; not that it is forbidden.</p>\n<pre><code>&quot;--override-max-sessions\n      The # of available processors is the recommended max sessions value (1 \n      browser session per processor). **Setting this flag to true allows the \n      recommended max value to be overwritten**. Session stability and \n      reliability might suffer as the host could run out of resources.\n      Default: false\n--max-sessions\n      Maximum number of concurrent sessions. Default value is the number of \n      available processors.&quot;\n</code></pre>\n<p>I've tried this, because on other system it used to run perfectly fine like that. Your answer doesn;t bring any light on chrome crash btw, which also occurs even when running with (cpu count) sessions. Thx for your time, but really, I would appreciate some answers from users that have experienced this condition.</p>\n"}],"owner":{"account_id":2085187,"reputation":414,"user_id":1856343,"accept_rate":58,"display_name":"Guntram"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":318,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1687338870,"creation_date":1687264418,"question_id":76514748,"body_markdown":"We are trying to process many pages through Selenium at the same time. We can get up to 32 sessions, but as soon as we try to increase the session count further, all sessions start becoming janky, they are error prone and crash. Also, we get many errors that the sesssion cannot be started (error log at the bottom)\r\n\r\nI&#39;ve tried more then 5 versions of selenium (between 102 and latest 114) with the appropriate chrome driver and chrome version, but sooner or later the whole thing ends up with the errors above. Chrome is always crashing. I&#39;ve also tried running in hub - node configuration, or standalone. \r\n\r\nWhy is chrome crashing? I am certain that memory is not a problem because I&#39;ve also tried increasing jvm heapsize adding &quot;-Xms64g -Xmx80g&quot; in the command line above, but it didn;t help. Following selenium&#39;s requirements I have installed and use oracle jdk (not jre) but still no help or whatsoever. What can I do to run multiple sessions (more then 32 i.e.)?\r\n\r\n**OS:** \r\nUbuntu 22.04.2 LTS, running on a 32-Core Ryzen™ 9 and 128GB RAM. \r\n\r\n**java:**\r\njava version &quot;20.0.1&quot; 2023-04-18\r\nJava(TM) SE Runtime Environment (build 20.0.1+9-29)\r\nJava HotSpot(TM) 64-Bit Server VM (build 20.0.1+9-29, mixed mode, sharing)\r\n\r\n**Google Chrome 114.0.5735.133**\r\n\r\n**command to launch selenium:**\r\n\r\n    xvfb-run -a java -Dwebdriver.chrome.driver=&quot;/home/forge/domain/storage/selenium/chromedriver-114.0.5735.16&quot; -jar &quot;/home/forge/domain/storage/selenium/selenium-server-4.10.0.jar&quot; standalone --override-max-sessions true --max-sessions 60 --port 4646 --allow-cors true\r\n\r\n**error log:**\r\n\r\n    10:39:23.636 WARN [SeleniumSpanExporter$1.lambda$export$1] - Unable to create session: Could not start a new session. Error while creating session with the driver service. Stopping driver service: Could not start a new session. Response code 500. Message: unknown error: \r\n    Chrome failed to start: exited abnormally.\r\n      (unknown error: DevToolsActivePort file doesn&#39;t exist)\r\n      (The process started from chrome location /usr/bin/google-chrome is no longer running, so ChromeDriver is assuming that Chrome has crashed.) \r\n    Host info: host: &#39;domain&#39;, ip: &#39;127.0.0.1&#39;\r\n    Build info: version: &#39;4.10.0&#39;, revision: &#39;c14d967899&#39;\r\n    System info: os.name: &#39;Linux&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;5.15.0-75-generic&#39;, java.version: &#39;20.0.1&#39;\r\n    Driver info: driver.version: unknown\r\n    Build info: version: &#39;4.10.0&#39;, revision: &#39;c14d967899&#39;\r\n    System info: os.name: &#39;Linux&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;5.15.0-75-generic&#39;, java.version: &#39;20.0.1&#39;\r\n    Driver info: driver.version: unknown\r\n    10:39:23.636 WARN [SeleniumSpanExporter$1.lambda$export$1] - org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Error while creating session with the driver service. Stopping driver service: Could not start a new session. Response code 500. \r\n    Message: unknown error: Chrome failed to start: exited abnormally.\r\n      (unknown error: DevToolsActivePort file doesn&#39;t exist)\r\n      (The process started from chrome location /usr/bin/google-chrome is no longer running, so ChromeDriver is assuming that Chrome has crashed.) \r\n    Host info: host: &#39;domain&#39;, ip: &#39;127.0.0.1&#39;\r\n    Build info: version: &#39;4.10.0&#39;, revision: &#39;c14d967899&#39;\r\n    System info: os.name: &#39;Linux&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;5.15.0-75-generic&#39;, java.version: &#39;20.0.1&#39;\r\n    Driver info: driver.version: unknown\r\n    Build info: version: &#39;4.10.0&#39;, revision: &#39;c14d967899&#39;\r\n    System info: os.name: &#39;Linux&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;5.15.0-75-generic&#39;, java.version: &#39;20.0.1&#39;\r\n    Driver info: driver.version: unknown\r\n    \tat org.openqa.selenium.grid.node.config.DriverServiceSessionFactory.apply(DriverServiceSessionFactory.java:210)\r\n    \tat org.openqa.selenium.grid.node.config.DriverServiceSessionFactory.apply(DriverServiceSessionFactory.java:69)\r\n    \tat org.openqa.selenium.grid.node.local.SessionSlot.apply(SessionSlot.java:147)\r\n    \tat org.openqa.selenium.grid.node.local.LocalNode.newSession(LocalNode.java:467)\r\n    \tat org.openqa.selenium.grid.distributor.local.LocalDistributor.startSession(LocalDistributor.java:643)\r\n    \tat org.openqa.selenium.grid.distributor.local.LocalDistributor.newSession(LocalDistributor.java:560)\r\n    \tat org.openqa.selenium.grid.distributor.local.LocalDistributor$NewSessionRunnable.handleNewSessionRequest(LocalDistributor.java:814)\r\n    \tat org.openqa.selenium.grid.distributor.local.LocalDistributor$NewSessionRunnable.lambda$run$1(LocalDistributor.java:773)\r\n    \tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\r\n    \tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\r\n    \tat java.base/java.lang.Thread.run(Thread.java:1623)\r\n\t\r\n**mem stats**\r\nMem:       131576260    15530844    76271352       82296    39774064   114669600\r\nSwap:        5237752           0     5237752\r\n\r\nI am creating the session like \r\nRemoteWebDriver::create($host, $capabilities,3600000,3600000);\r\n\r\n\t\t\t\t&#39;--remote-allow-origins=*&#39;,\r\n                &#39;--window-size=1920,1080&#39;,\r\n                &#39;--enable-experimental-extension-apis&#39;,\r\n                &#39;--disable-infobars&#39;,\r\n                &#39;--disable-notifications&#39;,\r\n                &#39;--disable-device-discovery-notifications&#39;,\r\n                &#39;--disable-gpu&#39;,\r\n                &#39;--allow-outdated-plugins&#39;,\r\n                &#39;--disable-web-security&#39;,\r\n                &#39;--allow-running-insecure-content&#39;,\r\n                &#39;--allow-file-access-from-log_files&#39;,\r\n                &#39;--audio-output-channels=0&#39;,\r\n                &#39;--ignore-certificate-error&#39;,\r\n                &#39;--disable-dev-shm-usage&#39;,\r\n                &#39;--disable-browser-side-navigation&#39;,\r\n                &#39;--dns-prefetch-disable&#39;,\r\n                &#39;--disable-geolocation&#39;,\r\n                &#39;--disable-search-geolocation-disclosure&#39;,\r\n                &#39;--enable-strict-powerful-feature-restrictions&#39;,\r\n                &#39;--disable-translate&#39;,\r\n                &#39;--disable-sync&#39;,\r\n                &#39;--mute-audio&#39;,\r\n                &#39;--lang=en-US&#39;,\r\n                &#39;--use-fake-ui-for-media-stream&#39;,\r\n                &#39;--use-fake-device-for-media-stream&#39;,\r\n                &#39;--allow-file-access-from-files&#39;,\r\n                &#39;--reduce-security-for-testing&#39;,\r\n                &#39;--allow-insecure-localhost&#39;,\r\n                &#39;--allow-legacy-extension-manifests&#39;,\r\n                &#39;--allow-loopback-in-peer-connection&#39;,\r\n                &#39;--allow-outdated-plugins&#39;,\r\n                &#39;--allow-unsecure-dlls&#39;,\r\n                &#39;--alsa-mute-device-name&#39;,\r\n                &#39;--also-emit-success-logs&#39;,\r\n                &#39;--alsa-mute-element-name&#39;,\r\n                &#39;--no-first-run&#39;,\r\n                &#39;--disable-default-apps&#39;,\r\n                &#39;--disable-extensions-http-throttling&#39;,\r\n                &#39;--disable-blink-features=AutomationControlled&#39;,","title":"Selenium: Chrome starts crashing and unable to create session when more than 32 sessions are active at the same time","body":"<p>We are trying to process many pages through Selenium at the same time. We can get up to 32 sessions, but as soon as we try to increase the session count further, all sessions start becoming janky, they are error prone and crash. Also, we get many errors that the sesssion cannot be started (error log at the bottom)</p>\n<p>I've tried more then 5 versions of selenium (between 102 and latest 114) with the appropriate chrome driver and chrome version, but sooner or later the whole thing ends up with the errors above. Chrome is always crashing. I've also tried running in hub - node configuration, or standalone.</p>\n<p>Why is chrome crashing? I am certain that memory is not a problem because I've also tried increasing jvm heapsize adding &quot;-Xms64g -Xmx80g&quot; in the command line above, but it didn;t help. Following selenium's requirements I have installed and use oracle jdk (not jre) but still no help or whatsoever. What can I do to run multiple sessions (more then 32 i.e.)?</p>\n<p><strong>OS:</strong>\nUbuntu 22.04.2 LTS, running on a 32-Core Ryzen™ 9 and 128GB RAM.</p>\n<p><strong>java:</strong>\njava version &quot;20.0.1&quot; 2023-04-18\nJava(TM) SE Runtime Environment (build 20.0.1+9-29)\nJava HotSpot(TM) 64-Bit Server VM (build 20.0.1+9-29, mixed mode, sharing)</p>\n<p><strong>Google Chrome 114.0.5735.133</strong></p>\n<p><strong>command to launch selenium:</strong></p>\n<pre><code>xvfb-run -a java -Dwebdriver.chrome.driver=&quot;/home/forge/domain/storage/selenium/chromedriver-114.0.5735.16&quot; -jar &quot;/home/forge/domain/storage/selenium/selenium-server-4.10.0.jar&quot; standalone --override-max-sessions true --max-sessions 60 --port 4646 --allow-cors true\n</code></pre>\n<p><strong>error log:</strong></p>\n<pre><code>10:39:23.636 WARN [SeleniumSpanExporter$1.lambda$export$1] - Unable to create session: Could not start a new session. Error while creating session with the driver service. Stopping driver service: Could not start a new session. Response code 500. Message: unknown error: \nChrome failed to start: exited abnormally.\n  (unknown error: DevToolsActivePort file doesn't exist)\n  (The process started from chrome location /usr/bin/google-chrome is no longer running, so ChromeDriver is assuming that Chrome has crashed.) \nHost info: host: 'domain', ip: '127.0.0.1'\nBuild info: version: '4.10.0', revision: 'c14d967899'\nSystem info: os.name: 'Linux', os.arch: 'amd64', os.version: '5.15.0-75-generic', java.version: '20.0.1'\nDriver info: driver.version: unknown\nBuild info: version: '4.10.0', revision: 'c14d967899'\nSystem info: os.name: 'Linux', os.arch: 'amd64', os.version: '5.15.0-75-generic', java.version: '20.0.1'\nDriver info: driver.version: unknown\n10:39:23.636 WARN [SeleniumSpanExporter$1.lambda$export$1] - org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Error while creating session with the driver service. Stopping driver service: Could not start a new session. Response code 500. \nMessage: unknown error: Chrome failed to start: exited abnormally.\n  (unknown error: DevToolsActivePort file doesn't exist)\n  (The process started from chrome location /usr/bin/google-chrome is no longer running, so ChromeDriver is assuming that Chrome has crashed.) \nHost info: host: 'domain', ip: '127.0.0.1'\nBuild info: version: '4.10.0', revision: 'c14d967899'\nSystem info: os.name: 'Linux', os.arch: 'amd64', os.version: '5.15.0-75-generic', java.version: '20.0.1'\nDriver info: driver.version: unknown\nBuild info: version: '4.10.0', revision: 'c14d967899'\nSystem info: os.name: 'Linux', os.arch: 'amd64', os.version: '5.15.0-75-generic', java.version: '20.0.1'\nDriver info: driver.version: unknown\n    at org.openqa.selenium.grid.node.config.DriverServiceSessionFactory.apply(DriverServiceSessionFactory.java:210)\n    at org.openqa.selenium.grid.node.config.DriverServiceSessionFactory.apply(DriverServiceSessionFactory.java:69)\n    at org.openqa.selenium.grid.node.local.SessionSlot.apply(SessionSlot.java:147)\n    at org.openqa.selenium.grid.node.local.LocalNode.newSession(LocalNode.java:467)\n    at org.openqa.selenium.grid.distributor.local.LocalDistributor.startSession(LocalDistributor.java:643)\n    at org.openqa.selenium.grid.distributor.local.LocalDistributor.newSession(LocalDistributor.java:560)\n    at org.openqa.selenium.grid.distributor.local.LocalDistributor$NewSessionRunnable.handleNewSessionRequest(LocalDistributor.java:814)\n    at org.openqa.selenium.grid.distributor.local.LocalDistributor$NewSessionRunnable.lambda$run$1(LocalDistributor.java:773)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\n    at java.base/java.lang.Thread.run(Thread.java:1623)\n</code></pre>\n<p><strong>mem stats</strong>\nMem:       131576260    15530844    76271352       82296    39774064   114669600\nSwap:        5237752           0     5237752</p>\n<p>I am creating the session like\nRemoteWebDriver::create($host, $capabilities,3600000,3600000);</p>\n<pre><code>            '--remote-allow-origins=*',\n            '--window-size=1920,1080',\n            '--enable-experimental-extension-apis',\n            '--disable-infobars',\n            '--disable-notifications',\n            '--disable-device-discovery-notifications',\n            '--disable-gpu',\n            '--allow-outdated-plugins',\n            '--disable-web-security',\n            '--allow-running-insecure-content',\n            '--allow-file-access-from-log_files',\n            '--audio-output-channels=0',\n            '--ignore-certificate-error',\n            '--disable-dev-shm-usage',\n            '--disable-browser-side-navigation',\n            '--dns-prefetch-disable',\n            '--disable-geolocation',\n            '--disable-search-geolocation-disclosure',\n            '--enable-strict-powerful-feature-restrictions',\n            '--disable-translate',\n            '--disable-sync',\n            '--mute-audio',\n            '--lang=en-US',\n            '--use-fake-ui-for-media-stream',\n            '--use-fake-device-for-media-stream',\n            '--allow-file-access-from-files',\n            '--reduce-security-for-testing',\n            '--allow-insecure-localhost',\n            '--allow-legacy-extension-manifests',\n            '--allow-loopback-in-peer-connection',\n            '--allow-outdated-plugins',\n            '--allow-unsecure-dlls',\n            '--alsa-mute-device-name',\n            '--also-emit-success-logs',\n            '--alsa-mute-element-name',\n            '--no-first-run',\n            '--disable-default-apps',\n            '--disable-extensions-http-throttling',\n            '--disable-blink-features=AutomationControlled',\n</code></pre>\n"},{"tags":["java","spring-boot","websocket","spring-websocket"],"comments":[{"owner":{"account_id":8393641,"reputation":850,"user_id":6301562,"display_name":"dawis11"},"score":0,"creation_date":1647946145,"post_id":69258024,"comment_id":126493498,"body_markdown":"For now Postman does not support STOMP, only RAW. So for this day you can connect and send message without any additional methods (subscriber, publisher, etc.)","body":"For now Postman does not support STOMP, only RAW. So for this day you can connect and send message without any additional methods (subscriber, publisher, etc.)"}],"answers":[{"tags":[],"owner":{"account_id":28864597,"reputation":11,"user_id":22107635,"display_name":"helloworld"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1687338619,"creation_date":1687338619,"answer_id":76521668,"question_id":69258024,"body_markdown":"You can use this website to test web sockets locally: \r\nhttp://jxy.me/websocket-debug-tool/","title":"How do i connect to topic/queue via postman for a spring boot WebSocket app?","body":"<p>You can use this website to test web sockets locally:\n<a href=\"http://jxy.me/websocket-debug-tool/\" rel=\"nofollow noreferrer\">http://jxy.me/websocket-debug-tool/</a></p>\n"}],"owner":{"account_id":9082127,"reputation":121,"user_id":6761607,"display_name":"Hapaja"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1567,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1687338619,"creation_date":1632155914,"question_id":69258024,"body_markdown":" 1. I want to subscribe to /topic/greetings. how do i do that in postman using raw method and socket.io?\r\n 2. Is there any other alternative for testing websockets locally?\r\n\r\nMy code is from here. \r\n[Spring boot getting started websocket app][1]\r\n\r\n\r\n  [1]: https://spring.io/guides/gs/messaging-stomp-websocket/\r\nOnly difference is my WS config class.\r\n\r\nIm connecting to websocket in postman: **ws://localhost:8080/greetings** and then i don&#39;t really know what should i do.\r\n\r\n    package com.example.messagingstompwebsocket;\r\n    \r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.messaging.simp.config.MessageBrokerRegistry;\r\n    import org.springframework.web.socket.config.annotation.EnableWebSocketMessageBroker;\r\n    import org.springframework.web.socket.config.annotation.StompEndpointRegistry;\r\n    import org.springframework.web.socket.config.annotation.WebSocketMessageBrokerConfigurer;\r\n    \r\n    @Configuration\r\n    @EnableWebSocketMessageBroker\r\n    public class WebSocketConfig implements WebSocketMessageBrokerConfigurer {\r\n    \r\n        @Override\r\n        public void configureMessageBroker(MessageBrokerRegistry registry) {\r\n            registry.enableSimpleBroker(&quot;/topic&quot;);\r\n            registry.setApplicationDestinationPrefixes(&quot;/app&quot;);\r\n        }\r\n    \r\n        @Override\r\n        public void registerStompEndpoints(StompEndpointRegistry registry) {\r\n            registry.addEndpoint(&quot;/greetings&quot;);\r\n            registry.addEndpoint(&quot;/gs-guide-websocket&quot;).withSockJS();\r\n        }\r\n    }\r\n\r\n","title":"How do i connect to topic/queue via postman for a spring boot WebSocket app?","body":"<ol>\n<li>I want to subscribe to /topic/greetings. how do i do that in postman using raw method and socket.io?</li>\n<li>Is there any other alternative for testing websockets locally?</li>\n</ol>\n<p>My code is from here.\n<a href=\"https://spring.io/guides/gs/messaging-stomp-websocket/\" rel=\"nofollow noreferrer\">Spring boot getting started websocket app</a></p>\n<p>Only difference is my WS config class.</p>\n<p>Im connecting to websocket in postman: <strong>ws://localhost:8080/greetings</strong> and then i don't really know what should i do.</p>\n<pre><code>package com.example.messagingstompwebsocket;\n\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.messaging.simp.config.MessageBrokerRegistry;\nimport org.springframework.web.socket.config.annotation.EnableWebSocketMessageBroker;\nimport org.springframework.web.socket.config.annotation.StompEndpointRegistry;\nimport org.springframework.web.socket.config.annotation.WebSocketMessageBrokerConfigurer;\n\n@Configuration\n@EnableWebSocketMessageBroker\npublic class WebSocketConfig implements WebSocketMessageBrokerConfigurer {\n\n    @Override\n    public void configureMessageBroker(MessageBrokerRegistry registry) {\n        registry.enableSimpleBroker(&quot;/topic&quot;);\n        registry.setApplicationDestinationPrefixes(&quot;/app&quot;);\n    }\n\n    @Override\n    public void registerStompEndpoints(StompEndpointRegistry registry) {\n        registry.addEndpoint(&quot;/greetings&quot;);\n        registry.addEndpoint(&quot;/gs-guide-websocket&quot;).withSockJS();\n    }\n}\n</code></pre>\n"},{"tags":["java","java-io"],"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1687341672,"post_id":9927281,"comment_id":134922251,"body_markdown":"There is no need to flush inside loops like this You are losing the benefit of any buffering.","body":"There is no need to flush inside loops like this You are losing the benefit of any buffering."}],"answers":[{"comments":[{"owner":{"account_id":2358391,"reputation":25152,"user_id":2065702,"accept_rate":90,"display_name":"Zach Saucier"},"score":0,"creation_date":1393913691,"post_id":9927310,"comment_id":33637319,"body_markdown":"Another question title that has very little to do with the question, yet has nearly 5K views","body":"Another question title that has very little to do with the question, yet has nearly 5K views"}],"tags":[],"owner":{"account_id":152622,"reputation":490044,"user_id":367273,"accept_rate":96,"display_name":"NPE"},"comment_count":1,"down_vote_count":0,"up_vote_count":23,"is_accepted":true,"score":23,"last_activity_date":1333031603,"creation_date":1333030978,"answer_id":9927310,"question_id":9927281,"body_markdown":"`flush()` is *probably* not required in your example.\r\n\r\nWhat it does is ensure that anything written to the writer prior to the call to `flush()` is written to the underlying stream, rather than sit in some internal buffer.\r\n\r\nThe method comes in handy in several types of circumstances:\r\n\r\n1. If another process (or thread) needs to examine the file while it&#39;s being written to, and it&#39;s important that the other process sees all the recent writes.\r\n\r\n1. If the writing process might crash, and it&#39;s important that no writes to the file get lost.\r\n\r\n1. If you&#39;re writing to the console, and need to make sure that every message is shown as soon as it&#39;s written.","title":"How to use flush() for PrintWriter","body":"<p><code>flush()</code> is <em>probably</em> not required in your example.</p>\n\n<p>What it does is ensure that anything written to the writer prior to the call to <code>flush()</code> is written to the underlying stream, rather than sit in some internal buffer.</p>\n\n<p>The method comes in handy in several types of circumstances:</p>\n\n<ol>\n<li><p>If another process (or thread) needs to examine the file while it's being written to, and it's important that the other process sees all the recent writes.</p></li>\n<li><p>If the writing process might crash, and it's important that no writes to the file get lost.</p></li>\n<li><p>If you're writing to the console, and need to make sure that every message is shown as soon as it's written.</p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":473751,"reputation":19104,"user_id":883033,"accept_rate":63,"display_name":"Chandra Sekhar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1333031022,"creation_date":1333031022,"answer_id":9927325,"question_id":9927281,"body_markdown":"The second option is better to use, as it will create an autoflushable PrintWriter object. And if you use first case, then I don&#39;t think **flush()** is required in your example case.","title":"How to use flush() for PrintWriter","body":"<p>The second option is better to use, as it will create an autoflushable PrintWriter object. And if you use first case, then I don't think <strong>flush()</strong> is required in your example case.</p>\n"},{"comments":[{"owner":{"account_id":3491975,"reputation":1562,"user_id":2921426,"accept_rate":64,"display_name":"SimonC"},"score":0,"creation_date":1687436957,"post_id":76521633,"comment_id":134938643,"body_markdown":"This question is fairly old and already has an accepted answer. How does your answer improve the previous accepted answer?","body":"This question is fairly old and already has an accepted answer. How does your answer improve the previous accepted answer?"}],"tags":[],"owner":{"account_id":11406710,"reputation":23,"user_id":8361949,"display_name":"G&#246;rkem Demirkol"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687338293,"creation_date":1687338293,"answer_id":76521633,"question_id":9927281,"body_markdown":"**Close method flushes before closing.** If you use **close()**, **flush()** is not necessary in your first and second example (except u wanna use flush before closing).\r\n\r\nOn top of that your second example also flushes automatically when using the methods: println, printf, or format","title":"How to use flush() for PrintWriter","body":"<p><strong>Close method flushes before closing.</strong> If you use <strong>close()</strong>, <strong>flush()</strong> is not necessary in your first and second example (except u wanna use flush before closing).</p>\n<p>On top of that your second example also flushes automatically when using the methods: println, printf, or format</p>\n"}],"owner":{"account_id":240486,"reputation":264,"user_id":510746,"accept_rate":50,"display_name":"janekey"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41436,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"accepted_answer_id":9927310,"answer_count":3,"score":15,"last_activity_date":1687338293,"creation_date":1333030873,"question_id":9927281,"body_markdown":"I have some codes like this:\r\n\r\n    PrintWriter pw = new PrintWriter(new BufferedReader(....));\r\n    for(int i=0; i&lt;10; i++) {\r\n        pw.println(&quot;a&quot;);\r\n        pw.flush();// flush each time when println()?\r\n    }\r\n    pw.close();\r\n\r\nIs the **flush()** in each &#39;for&#39; statement necessarily? I heard that flush() would auto invoke  when invoke **close()** .\r\nIf I write code like this: \r\n\r\n    PrintWriter pw = new PrintWriter(new BufferedReader(....), true);\r\n\r\nand I wouldn&#39;t write **pw.flush()** anymore? Thanks.\r\n","title":"How to use flush() for PrintWriter","body":"<p>I have some codes like this:</p>\n\n<pre><code>PrintWriter pw = new PrintWriter(new BufferedReader(....));\nfor(int i=0; i&lt;10; i++) {\n    pw.println(\"a\");\n    pw.flush();// flush each time when println()?\n}\npw.close();\n</code></pre>\n\n<p>Is the <strong>flush()</strong> in each 'for' statement necessarily? I heard that flush() would auto invoke  when invoke <strong>close()</strong> .\nIf I write code like this: </p>\n\n<pre><code>PrintWriter pw = new PrintWriter(new BufferedReader(....), true);\n</code></pre>\n\n<p>and I wouldn't write <strong>pw.flush()</strong> anymore? Thanks.</p>\n"},{"tags":["java","android","icons","android-manifest","shortcut"],"owner":{"account_id":19276063,"reputation":11,"user_id":14089060,"display_name":"Vikram Sawant"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":165,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687337765,"creation_date":1687337765,"question_id":76521572,"body_markdown":"I have multiple icon buttons on my ChangeAppIcon Activity, When Clicked on any iconbutton it should change app icon. \r\nTo make my question more specific i want to do it like telegram where premium user can change there app icons. \r\n\r\nI tried using activity-alias for and set its target activity as .Mainactivity, this worked but not upto the mark as on changing the icon 1st time it worked well but for 2nd time app is getting disappeared from recent Apps. \r\n\r\n    //this methid is called inside onclick of any button\r\n       private void changeIcon(int iconResId) {\r\n            if(previousicon == iconResId){\r\n                return;\r\n            }\r\n            PackageManager manager = getPackageManager();\r\n    \r\n            // Enable the new icon\r\n            manager.setComponentEnabledSetting(\r\n                    new ComponentName(ChangeAppIcon.this, &quot;com.waf.congratulationmessages.MainActivityAlias&quot; + iconResId),\r\n                    PackageManager.COMPONENT_ENABLED_STATE_ENABLED,\r\n                    PackageManager.DONT_KILL_APP);\r\n    \r\n            // Disable all previously enabled icons\r\n            for (int i = 1; i &lt;= 4; i++) {\r\n                if (i != iconResId) {\r\n                    manager.setComponentEnabledSetting(\r\n                            new ComponentName(ChangeAppIcon.this, &quot;com.waf.congratulationmessages.MainActivityAlias&quot; + i),\r\n                            PackageManager.COMPONENT_ENABLED_STATE_DISABLED,\r\n                            PackageManager.DONT_KILL_APP);\r\n                }\r\n            }\r\n    \r\n            manager.setComponentEnabledSetting(\r\n                    new ComponentName(ChangeAppIcon.this, &quot;com.waf.congratulationmessages.MainActivity&quot;),\r\n                    PackageManager.COMPONENT_ENABLED_STATE_DISABLED, PackageManager.DONT_KILL_APP);\r\n    \r\n            Toast.makeText(ChangeAppIcon.this, &quot;Icon Changed&quot;, Toast.LENGTH_LONG).show();\r\n        }\r\n\r\nThis is how i defined Manfiest for activity alias : \r\n\r\n    &lt;activity-alias\r\n                android:name=&quot;.MainActivityAlias4&quot;\r\n                android:enabled=&quot;false&quot;\r\n                android:exported=&quot;true&quot;\r\n                android:icon=&quot;@drawable/icon4&quot;\r\n                android:label=&quot;@string/app_name&quot;\r\n                android:roundIcon=&quot;@drawable/icon4&quot;\r\n                android:targetActivity=&quot;.MainActivity&quot; &gt;\r\n                &lt;intent-filter&gt;\r\n                    &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n    \r\n                    &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n                &lt;/intent-filter&gt;\r\n            &lt;/activity-alias&gt;\r\n            &lt;activity-alias\r\n                android:name=&quot;.MainActivityAlias3&quot;\r\n                android:enabled=&quot;false&quot;\r\n                android:exported=&quot;true&quot;\r\n                android:icon=&quot;@drawable/icon3&quot;\r\n                android:label=&quot;@string/app_name&quot;\r\n                android:roundIcon=&quot;@drawable/icon3&quot;\r\n                android:targetActivity=&quot;.MainActivity&quot; &gt;\r\n                &lt;intent-filter&gt;\r\n                    &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n    \r\n                    &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n                &lt;/intent-filter&gt;\r\n            &lt;/activity-alias&gt;\r\n            &lt;activity-alias\r\n                android:name=&quot;.MainActivityAlias2&quot;\r\n                android:enabled=&quot;false&quot;\r\n                android:exported=&quot;true&quot;\r\n                android:icon=&quot;@drawable/icon2&quot;\r\n                android:label=&quot;@string/app_name&quot;\r\n                android:roundIcon=&quot;@drawable/icon2&quot;\r\n                android:targetActivity=&quot;.MainActivity&quot; &gt;\r\n                &lt;intent-filter&gt;\r\n                    &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n    \r\n                    &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n                &lt;/intent-filter&gt;\r\n            &lt;/activity-alias&gt;\r\n          ... //further same for MainActivityAlias1\r\n\r\nplease tell me is my code wrong or there is some another method to do so, As its not impossible because not only telegram but many other apps has this feature where user changes the app icon form the given list.\r\n","title":"How to change Android(java) App icon programmatically?","body":"<p>I have multiple icon buttons on my ChangeAppIcon Activity, When Clicked on any iconbutton it should change app icon.\nTo make my question more specific i want to do it like telegram where premium user can change there app icons.</p>\n<p>I tried using activity-alias for and set its target activity as .Mainactivity, this worked but not upto the mark as on changing the icon 1st time it worked well but for 2nd time app is getting disappeared from recent Apps.</p>\n<pre><code>//this methid is called inside onclick of any button\n   private void changeIcon(int iconResId) {\n        if(previousicon == iconResId){\n            return;\n        }\n        PackageManager manager = getPackageManager();\n\n        // Enable the new icon\n        manager.setComponentEnabledSetting(\n                new ComponentName(ChangeAppIcon.this, &quot;com.waf.congratulationmessages.MainActivityAlias&quot; + iconResId),\n                PackageManager.COMPONENT_ENABLED_STATE_ENABLED,\n                PackageManager.DONT_KILL_APP);\n\n        // Disable all previously enabled icons\n        for (int i = 1; i &lt;= 4; i++) {\n            if (i != iconResId) {\n                manager.setComponentEnabledSetting(\n                        new ComponentName(ChangeAppIcon.this, &quot;com.waf.congratulationmessages.MainActivityAlias&quot; + i),\n                        PackageManager.COMPONENT_ENABLED_STATE_DISABLED,\n                        PackageManager.DONT_KILL_APP);\n            }\n        }\n\n        manager.setComponentEnabledSetting(\n                new ComponentName(ChangeAppIcon.this, &quot;com.waf.congratulationmessages.MainActivity&quot;),\n                PackageManager.COMPONENT_ENABLED_STATE_DISABLED, PackageManager.DONT_KILL_APP);\n\n        Toast.makeText(ChangeAppIcon.this, &quot;Icon Changed&quot;, Toast.LENGTH_LONG).show();\n    }\n</code></pre>\n<p>This is how i defined Manfiest for activity alias :</p>\n<pre><code>&lt;activity-alias\n            android:name=&quot;.MainActivityAlias4&quot;\n            android:enabled=&quot;false&quot;\n            android:exported=&quot;true&quot;\n            android:icon=&quot;@drawable/icon4&quot;\n            android:label=&quot;@string/app_name&quot;\n            android:roundIcon=&quot;@drawable/icon4&quot;\n            android:targetActivity=&quot;.MainActivity&quot; &gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity-alias&gt;\n        &lt;activity-alias\n            android:name=&quot;.MainActivityAlias3&quot;\n            android:enabled=&quot;false&quot;\n            android:exported=&quot;true&quot;\n            android:icon=&quot;@drawable/icon3&quot;\n            android:label=&quot;@string/app_name&quot;\n            android:roundIcon=&quot;@drawable/icon3&quot;\n            android:targetActivity=&quot;.MainActivity&quot; &gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity-alias&gt;\n        &lt;activity-alias\n            android:name=&quot;.MainActivityAlias2&quot;\n            android:enabled=&quot;false&quot;\n            android:exported=&quot;true&quot;\n            android:icon=&quot;@drawable/icon2&quot;\n            android:label=&quot;@string/app_name&quot;\n            android:roundIcon=&quot;@drawable/icon2&quot;\n            android:targetActivity=&quot;.MainActivity&quot; &gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity-alias&gt;\n      ... //further same for MainActivityAlias1\n</code></pre>\n<p>please tell me is my code wrong or there is some another method to do so, As its not impossible because not only telegram but many other apps has this feature where user changes the app icon form the given list.</p>\n"},{"tags":["java","eclipse","formatter","braces"],"comments":[{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":12,"creation_date":1304516372,"post_id":5884273,"comment_id":6768222,"body_markdown":"Maybe a baseball bat could solve the problem? Nope? No, ok, violence is not the solution, but the code style you&#39;ve chosen is an abomination. **If** compact code is the motivation, then leaving out braces around single-statement blocks *might* be the better solution.","body":"Maybe a baseball bat could solve the problem? Nope? No, ok, violence is not the solution, but the code style you&#39;ve chosen is an abomination. <b>If</b> compact code is the motivation, then leaving out braces around single-statement blocks <i>might</i> be the better solution."},{"owner":{"account_id":85212,"reputation":11234,"user_id":237733,"accept_rate":94,"display_name":"Mark Pope"},"score":6,"creation_date":1304516408,"post_id":5884273,"comment_id":6768234,"body_markdown":"Ouch :( I feel for you man!","body":"Ouch :( I feel for you man!"},{"owner":{"account_id":114151,"reputation":32353,"user_id":300311,"accept_rate":88,"display_name":"Erick Robertson"},"score":1,"creation_date":1304516620,"post_id":5884273,"comment_id":6768298,"body_markdown":"I do not know how to make any code formatter format code like this.  In all of my experience, I have never seen code formatted this way.  Putting the curly-brace on the same line as the first line of code inside the function makes it difficult to use copy-cut-paste functions to move around lines of code.  It&#39;s really a bad decision, and should be changed.  Sorry I don&#39;t have an answer.","body":"I do not know how to make any code formatter format code like this.  In all of my experience, I have never seen code formatted this way.  Putting the curly-brace on the same line as the first line of code inside the function makes it difficult to use copy-cut-paste functions to move around lines of code.  It&#39;s really a bad decision, and should be changed.  Sorry I don&#39;t have an answer."},{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1304516634,"post_id":5884273,"comment_id":6768302,"body_markdown":"On a more serious note: I&#39;d suggest you don&#39;t try to bend the rules. Even if you follow the letter of the rule, you won&#39;t have the advantages that a unified code style brings (and they are plenty!). Swallow your pride and follow the coding convention. Your second sample might not be the most space-saving one, but at least it&#39;s consistent and doesn&#39;t look like some newlines where swallowed.","body":"On a more serious note: I&#39;d suggest you don&#39;t try to bend the rules. Even if you follow the letter of the rule, you won&#39;t have the advantages that a unified code style brings (and they are plenty!). Swallow your pride and follow the coding convention. Your second sample might not be the most space-saving one, but at least it&#39;s consistent and doesn&#39;t look like some newlines where swallowed."},{"owner":{"account_id":114151,"reputation":32353,"user_id":300311,"accept_rate":88,"display_name":"Erick Robertson"},"score":0,"creation_date":1304516886,"post_id":5884273,"comment_id":6768394,"body_markdown":"@Joachim: His team decided on the first one.  The second and third are disallowed by their team.  Personally, I think I&#39;d fire any team that made this decision.  It&#39;s royally asinine.","body":"@Joachim: His team decided on the first one.  The second and third are disallowed by their team.  Personally, I think I&#39;d fire any team that made this decision.  It&#39;s royally asinine."},{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1304516981,"post_id":5884273,"comment_id":6768421,"body_markdown":"@Erik: my understanding was that the bullet item is company standard and the first option is what &quot;the team&quot; decided to make of that company standard. So while the first item is not up for discussion, the latter might be (smaller circle of decision makes, higher chance of success). So I would bring back the argument &quot;the style we&#39;ve chosen is so abstruse that no sane code formatting tool supports it&quot; to overthrow the decision.#","body":"@Erik: my understanding was that the bullet item is company standard and the first option is what &quot;the team&quot; decided to make of that company standard. So while the first item is not up for discussion, the latter might be (smaller circle of decision makes, higher chance of success). So I would bring back the argument &quot;the style we&#39;ve chosen is so abstruse that no sane code formatting tool supports it&quot; to overthrow the decision.#"},{"owner":{"account_id":328558,"reputation":535,"user_id":651582,"accept_rate":50,"display_name":"Asturio"},"score":0,"creation_date":1304517152,"post_id":5884273,"comment_id":6768466,"body_markdown":"Actually the second sample is the decision of the company. But the team decided for the first (as both are &quot;allowed&quot; by the coding convention). I&#39;d be really fine with the second one, but our team want to stick with the first one. The baseball bat solution seems to be the best one :_) . @Joachim: I&#39;ll try to argument on that point.","body":"Actually the second sample is the decision of the company. But the team decided for the first (as both are &quot;allowed&quot; by the coding convention). I&#39;d be really fine with the second one, but our team want to stick with the first one. The baseball bat solution seems to be the best one :_) . @Joachim: I&#39;ll try to argument on that point."},{"owner":{"account_id":114151,"reputation":32353,"user_id":300311,"accept_rate":88,"display_name":"Erick Robertson"},"score":3,"creation_date":1304518282,"post_id":5884273,"comment_id":6768776,"body_markdown":"@Asturio: If the second sample is the decision of the company, then why is the first one allowed?  This seems odd to me.  Your team shouldn&#39;t have changed it -- especially to something so asinine.  Make sure that you have expressed your dissent to your team.  If your team leader doesn&#39;t accept it, go over his head.  Whatever you do, don&#39;t actually write code like this!","body":"@Asturio: If the second sample is the decision of the company, then why is the first one allowed?  This seems odd to me.  Your team shouldn&#39;t have changed it -- especially to something so asinine.  Make sure that you have expressed your dissent to your team.  If your team leader doesn&#39;t accept it, go over his head.  Whatever you do, don&#39;t actually write code like this!"},{"owner":{"account_id":11385,"reputation":24062,"user_id":21925,"accept_rate":62,"display_name":"Robin"},"score":1,"creation_date":1304524600,"post_id":5884273,"comment_id":6770851,"body_markdown":"I would not upvote any answer that actually suggests a way of trying to accomplish this abomination.  You should make sure your team members reads your question here and the opinions of others.","body":"I would not upvote any answer that actually suggests a way of trying to accomplish this abomination.  You should make sure your team members reads your question here and the opinions of others."},{"owner":{"account_id":328558,"reputation":535,"user_id":651582,"accept_rate":50,"display_name":"Asturio"},"score":0,"creation_date":1304541946,"post_id":5884273,"comment_id":6775555,"body_markdown":"@Robin: Agreed. No upvote for answers (even if I mark the only one as a possible solution). Is that ok?","body":"@Robin: Agreed. No upvote for answers (even if I mark the only one as a possible solution). Is that ok?"}],"answers":[{"comments":[{"owner":{"account_id":328558,"reputation":535,"user_id":651582,"accept_rate":50,"display_name":"Asturio"},"score":1,"creation_date":1304541589,"post_id":5884727,"comment_id":6775452,"body_markdown":"OK, I&#39;ll try this one, but this is just a small help, I think, as every block is meant, every for, while, do, switch, else, static and instance methods, constructors and so on. Should be formatted this way. Probably the best choice is to talk with my boss, an convincing him and other co-workers in changing the convention (or following it better).","body":"OK, I&#39;ll try this one, but this is just a small help, I think, as every block is meant, every for, while, do, switch, else, static and instance methods, constructors and so on. Should be formatted this way. Probably the best choice is to talk with my boss, an convincing him and other co-workers in changing the convention (or following it better)."}],"tags":[],"owner":{"account_id":377418,"reputation":888,"user_id":3021355,"display_name":"spot35"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1304518258,"creation_date":1304518258,"answer_id":5884727,"question_id":5884273,"body_markdown":"Could you turn off the relevant parts of the code formatter and make use of the Templates instead.  For example when typing \r\n\r\n    private_\r\n\r\nand hitting ctrl+space would invoke the private_method template.  You could then modify the private template to be something like this -\r\n\r\n    private ${return_type} ${name}(${}) \r\n    { ${cursor}\r\n    }\r\n\r\nYou&#39;d have to do similar things to the other block statements and you&#39;d have to modify your coding style to start using the templates more often, but I reckon it could work.","title":"Eclipse Java Formatter. New line before curly braces, but not after","body":"<p>Could you turn off the relevant parts of the code formatter and make use of the Templates instead.  For example when typing </p>\n\n<pre><code>private_\n</code></pre>\n\n<p>and hitting ctrl+space would invoke the private_method template.  You could then modify the private template to be something like this -</p>\n\n<pre><code>private ${return_type} ${name}(${}) \n{ ${cursor}\n}\n</code></pre>\n\n<p>You'd have to do similar things to the other block statements and you'd have to modify your coding style to start using the templates more often, but I reckon it could work.</p>\n"},{"comments":[{"owner":{"account_id":1378972,"reputation":25142,"user_id":1312382,"display_name":"Aconcagua"},"score":1,"creation_date":1687339005,"post_id":6277469,"comment_id":134921676,"body_markdown":"*&#39;So another argument&#39;* – actually that&#39;s the first one I encounter that&#39;s not opinion-based, apart from auto-formatting tools not supporting that style. But that&#39;s a weakness of the purely line-based diff-tools, not of the style – and that weakness can byte us at [other occasions](https://godbolt.org/z/Y3fbhesGq) as well. So all non-opinion-based arguments seem to fall into the category &#39;lack of technical support&#39;…","body":"<i>&#39;So another argument&#39;</i> – actually that&#39;s the first one I encounter that&#39;s not opinion-based, apart from auto-formatting tools not supporting that style. But that&#39;s a weakness of the purely line-based diff-tools, not of the style – and that weakness can byte us at <a href=\"https://godbolt.org/z/Y3fbhesGq\" rel=\"nofollow noreferrer\">other occasions</a> as well. So all non-opinion-based arguments seem to fall into the category &#39;lack of technical support&#39;…"}],"tags":[],"owner":{"account_id":328558,"reputation":535,"user_id":651582,"accept_rate":50,"display_name":"Asturio"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1687337724,"creation_date":1307529613,"answer_id":6277469,"question_id":5884273,"body_markdown":"So, here an Information about this Topic. I have done some more research. The here so abominated Brace-Style (sample 1) has a name: [The Horstmann Brace Style](http://weblogs.java.net/blog/cayhorstmann/archive/2010/06/28/horstmann-brace-style) or here [Horstmann](http://horstmann.com/unblog/2010-06-28/braces.html). There is a small group of people defending it, as it combines the advantages from the K&amp;R and the Allman (sample 2) Style. As the braces are lined up, and there is no &quot;waste&quot; of space.\r\n\r\nBut this is not the only true. This style miserable for the VCS. If you need to add a Line between the opening brace and the first statement, you need first to break the line, and put your new line there. In the diff or merge you will see then not &quot;one line been added&quot;, but &quot;one line been exchanged by two lines&quot;. But the actually old statement was changed by you.\r\n\r\nSo another argument, not to use this style.\r\n","title":"Eclipse Java Formatter. New line before curly braces, but not after","body":"<p>So, here an Information about this Topic. I have done some more research. The here so abominated Brace-Style (sample 1) has a name: <a href=\"http://weblogs.java.net/blog/cayhorstmann/archive/2010/06/28/horstmann-brace-style\" rel=\"nofollow noreferrer\">The Horstmann Brace Style</a> or here <a href=\"http://horstmann.com/unblog/2010-06-28/braces.html\" rel=\"nofollow noreferrer\">Horstmann</a>. There is a small group of people defending it, as it combines the advantages from the K&amp;R and the Allman (sample 2) Style. As the braces are lined up, and there is no &quot;waste&quot; of space.</p>\n<p>But this is not the only true. This style miserable for the VCS. If you need to add a Line between the opening brace and the first statement, you need first to break the line, and put your new line there. In the diff or merge you will see then not &quot;one line been added&quot;, but &quot;one line been exchanged by two lines&quot;. But the actually old statement was changed by you.</p>\n<p>So another argument, not to use this style.</p>\n"}],"owner":{"account_id":328558,"reputation":535,"user_id":651582,"accept_rate":50,"display_name":"Asturio"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8292,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":6277469,"answer_count":2,"score":2,"last_activity_date":1687337724,"creation_date":1304516249,"question_id":5884273,"body_markdown":"we have here at work a very strange coding convention, and I didn&#39;t managed to setup the Java Formatter in Eclipse right to do what I want. The convention says:\r\n&lt;ul&gt;\r\n  &lt;li&gt;Before a curly brace &quot;{&quot; there should always be a new Line&lt;/li&gt;\r\n&lt;/ul&gt;\r\n\r\n[UPDATE]\r\nThere is no rule in our convention saying, if after a &quot;{&quot; should be a line break or not. The examples actually use a line break (and almost ANY convention I saw so far says or implies that after a &quot;{&quot; and a &quot;}&quot; should always be a line break). So sample 1 and 2 are both &quot;syntactically correct&quot;.\r\n[/UPDATE]\r\n\r\nAs this blows the code, our team have decided to write code like this (no, this wasn&#39;t my choice!):\r\n\r\n    public void methode(final boolean b)\r\n    { if (b)\r\n      { do.something();\r\n      }\r\n      else\r\n      { do.somethingElse();\r\n      }\r\n    }\r\n\r\nBut in the formatter I only managed to get this:\r\n\r\n    public void methode(final boolean b)\r\n    {\r\n      if (b)\r\n      { \r\n        do.something();\r\n      }\r\n      else\r\n      { \r\n        do.somethingElse();\r\n      }\r\n    }\r\n\r\nor this:\r\n\r\n    public void methode(final boolean b) { \r\n      if (b) { \r\n        do.something();\r\n      }\r\n      else {\r\n        do.somethingElse();\r\n      }\r\n    }\r\n\r\nIs there a way to tell the formatter to break lines before a &quot;{&quot; but not after that? I know the first style is awful, and I would be pleased to use one of the last two, but this is a company decision. ","title":"Eclipse Java Formatter. New line before curly braces, but not after","body":"<p>we have here at work a very strange coding convention, and I didn't managed to setup the Java Formatter in Eclipse right to do what I want. The convention says:</p>\n\n<ul>\n  <li>Before a curly brace \"{\" there should always be a new Line</li>\n</ul>\n\n<p>[UPDATE]\nThere is no rule in our convention saying, if after a \"{\" should be a line break or not. The examples actually use a line break (and almost ANY convention I saw so far says or implies that after a \"{\" and a \"}\" should always be a line break). So sample 1 and 2 are both \"syntactically correct\".\n[/UPDATE]</p>\n\n<p>As this blows the code, our team have decided to write code like this (no, this wasn't my choice!):</p>\n\n<pre><code>public void methode(final boolean b)\n{ if (b)\n  { do.something();\n  }\n  else\n  { do.somethingElse();\n  }\n}\n</code></pre>\n\n<p>But in the formatter I only managed to get this:</p>\n\n<pre><code>public void methode(final boolean b)\n{\n  if (b)\n  { \n    do.something();\n  }\n  else\n  { \n    do.somethingElse();\n  }\n}\n</code></pre>\n\n<p>or this:</p>\n\n<pre><code>public void methode(final boolean b) { \n  if (b) { \n    do.something();\n  }\n  else {\n    do.somethingElse();\n  }\n}\n</code></pre>\n\n<p>Is there a way to tell the formatter to break lines before a \"{\" but not after that? I know the first style is awful, and I would be pleased to use one of the last two, but this is a company decision. </p>\n"},{"tags":["python","java","android","kotlin","chaquopy"],"answers":[{"tags":[],"owner":{"account_id":77317,"reputation":7321,"user_id":220765,"display_name":"mhsmith"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687188493,"creation_date":1687188493,"answer_id":76508070,"question_id":76505351,"body_markdown":"You didn&#39;t explain what `function` is, but if it&#39;s an `EditText`, then you should instead write `function.getText().toString()`.\r\n\r\nIf that isn&#39;t the problem, please edit the question to explain what went wrong, including any error message, and post a comment below this answer to notify me. If your app crashed, you can find the stack trace by following [these instructions](https://stackoverflow.com/questions/23353173).","title":"how to call a Python function with arguments from Kotlin(or Java) using Chaquopy","body":"<p>You didn't explain what <code>function</code> is, but if it's an <code>EditText</code>, then you should instead write <code>function.getText().toString()</code>.</p>\n<p>If that isn't the problem, please edit the question to explain what went wrong, including any error message, and post a comment below this answer to notify me. If your app crashed, you can find the stack trace by following <a href=\"https://stackoverflow.com/questions/23353173\">these instructions</a>.</p>\n"}],"owner":{"account_id":28810618,"reputation":1,"user_id":22065395,"display_name":"MilkyDwarf"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":91,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1687337719,"creation_date":1687167157,"question_id":76505351,"body_markdown":"I&#39;m trying to figure out chaquopy and understand how to call a function without arguments, but for my application I need to call a function with a String argument taken from EditText. How can I write this?\r\n\r\n```\r\nval py: Python = Python.getInstance()\r\n     val pyObj: PyObject = py.getModule(&quot;script&quot;)\r\n\r\n\r\n     CoroutineScope(Dispatchers.Main).launch {\r\n         for (i in 1..1000000) {\r\n             val integral: PyObject = pyObj.callAttr(&quot;main&quot;,function.toString() )\r\n             setLatex(sText, integral.toString())\r\n             delay(200)\r\n         }\r\n```\r\n\r\n```\r\nimport sympy as sym\r\nfrom sympy import *\r\ndef main(function):\r\n\r\n   return sym.latex(function)\r\n```\r\n","title":"how to call a Python function with arguments from Kotlin(or Java) using Chaquopy","body":"<p>I'm trying to figure out chaquopy and understand how to call a function without arguments, but for my application I need to call a function with a String argument taken from EditText. How can I write this?</p>\n<pre><code>val py: Python = Python.getInstance()\n     val pyObj: PyObject = py.getModule(&quot;script&quot;)\n\n\n     CoroutineScope(Dispatchers.Main).launch {\n         for (i in 1..1000000) {\n             val integral: PyObject = pyObj.callAttr(&quot;main&quot;,function.toString() )\n             setLatex(sText, integral.toString())\n             delay(200)\n         }\n</code></pre>\n<pre><code>import sympy as sym\nfrom sympy import *\ndef main(function):\n\n   return sym.latex(function)\n</code></pre>\n"},{"tags":["java","jooq"],"answers":[{"tags":[],"owner":{"account_id":247217,"reputation":213465,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1687337692,"creation_date":1687266638,"answer_id":76515085,"question_id":76514838,"body_markdown":"jOOQ is a very opinionated API with respect to object orientation and how you should interact with it. In particular, you should hardly implement any types yourself if they&#39;re not clearly designated for extension purposes.\r\n\r\nExtensible API elements include:\r\n\r\n- [`ExecuteListener`][1] and many other listeners registered with the [`Configuration`][2] as well as other SPIs from `Configuration`\r\n- Anything that starts with `Custom`, e.g. [`CustomQueryPart`][3], see [custom syntax elements][4]\r\n- Anything that starts with `Default`, such as [`DefaultConnection`][5] (these can usually work without extension, but do allow it)\r\n- Anything that starts with `Abstract`, such as [`AbstractConverter`][6] (these are meant to be extended, and can&#39;t work by themselves, being `abstract`)\r\n\r\nThere&#39;s a special case that you shouldn&#39;t extend manually yourself, but indirectly via your generated code, including:\r\n\r\n- Any base type for generated code, such as [`TableImpl`][7]\r\n\r\nThat&#39;s it. Everything else is not supposed to be extended, and in fact, this information will be formally conveyed in the future by sealing the type hierarchy (see e.g. details of [#14756][8]).\r\n\r\nThis official take is also documented here, in the [manual&#39;s section about semantic versioning and compatibility][9], specifically:\r\n\r\n&gt; jOOQ&#39;s DSL interfaces should not be implemented by client code! Extend only those extension points that are explicitly documented as &quot;extendable&quot; (e.g. [custom QueryParts][4]).\r\n\r\nTo answer your specific question, `DataType` is part of jOOQ&#39;s DSL and not meant for extension. Of course, as long as it is not a `sealed` type yet, you can do it. The sealing won&#39;t happen in a minor release in order not to break client code. But do note that in every minor release, there will be new methods that will break your implementation, so if you still implement your own, know what you&#39;re doing. Also, you might run into an occasional `ClassCastException`, because jOOQ occasionally assumes you don&#39;t extend its types, so it unsafely casts a public API type to an internal type that you can&#39;t access.\r\n\r\nIt&#39;s not unlikely that you have a use-case that could be implemented entirely differently, or with new generic SPIs and extension points, so perhaps, [a feature request][10] might be the best way forward here\r\n\r\n\r\n  [1]: https://www.jooq.org/javadoc/latest/org.jooq/org/jooq/ExecuteListener.html\r\n  [2]: https://www.jooq.org/javadoc/latest/org.jooq/org/jooq/Configuration.html\r\n  [3]: https://www.jooq.org/javadoc/latest/org.jooq/org/jooq/impl/CustomQueryPart.html\r\n  [4]: https://www.jooq.org/doc/latest/manual/sql-building/queryparts/custom-queryparts/\r\n  [5]: https://www.jooq.org/javadoc/latest/org.jooq/org/jooq/tools/jdbc/DefaultConnection.html\r\n  [6]: https://www.jooq.org/javadoc/dev/org.jooq/org/jooq/impl/AbstractConverter.html\r\n  [7]: https://www.jooq.org/javadoc/latest/org.jooq/org/jooq/impl/TableImpl.html\r\n  [8]: https://github.com/jOOQ/jOOQ/issues/14756\r\n  [9]: https://www.jooq.org/doc/latest/manual/getting-started/semantic-versioning/\r\n  [10]: https://github.com/jOOQ/jOOQ/issues/new/choose","title":"When using JOOQ, is the DataType interface considered &quot;public api&quot; for implementation?","body":"<p>jOOQ is a very opinionated API with respect to object orientation and how you should interact with it. In particular, you should hardly implement any types yourself if they're not clearly designated for extension purposes.</p>\n<p>Extensible API elements include:</p>\n<ul>\n<li><a href=\"https://www.jooq.org/javadoc/latest/org.jooq/org/jooq/ExecuteListener.html\" rel=\"nofollow noreferrer\"><code>ExecuteListener</code></a> and many other listeners registered with the <a href=\"https://www.jooq.org/javadoc/latest/org.jooq/org/jooq/Configuration.html\" rel=\"nofollow noreferrer\"><code>Configuration</code></a> as well as other SPIs from <code>Configuration</code></li>\n<li>Anything that starts with <code>Custom</code>, e.g. <a href=\"https://www.jooq.org/javadoc/latest/org.jooq/org/jooq/impl/CustomQueryPart.html\" rel=\"nofollow noreferrer\"><code>CustomQueryPart</code></a>, see <a href=\"https://www.jooq.org/doc/latest/manual/sql-building/queryparts/custom-queryparts/\" rel=\"nofollow noreferrer\">custom syntax elements</a></li>\n<li>Anything that starts with <code>Default</code>, such as <a href=\"https://www.jooq.org/javadoc/latest/org.jooq/org/jooq/tools/jdbc/DefaultConnection.html\" rel=\"nofollow noreferrer\"><code>DefaultConnection</code></a> (these can usually work without extension, but do allow it)</li>\n<li>Anything that starts with <code>Abstract</code>, such as <a href=\"https://www.jooq.org/javadoc/dev/org.jooq/org/jooq/impl/AbstractConverter.html\" rel=\"nofollow noreferrer\"><code>AbstractConverter</code></a> (these are meant to be extended, and can't work by themselves, being <code>abstract</code>)</li>\n</ul>\n<p>There's a special case that you shouldn't extend manually yourself, but indirectly via your generated code, including:</p>\n<ul>\n<li>Any base type for generated code, such as <a href=\"https://www.jooq.org/javadoc/latest/org.jooq/org/jooq/impl/TableImpl.html\" rel=\"nofollow noreferrer\"><code>TableImpl</code></a></li>\n</ul>\n<p>That's it. Everything else is not supposed to be extended, and in fact, this information will be formally conveyed in the future by sealing the type hierarchy (see e.g. details of <a href=\"https://github.com/jOOQ/jOOQ/issues/14756\" rel=\"nofollow noreferrer\">#14756</a>).</p>\n<p>This official take is also documented here, in the <a href=\"https://www.jooq.org/doc/latest/manual/getting-started/semantic-versioning/\" rel=\"nofollow noreferrer\">manual's section about semantic versioning and compatibility</a>, specifically:</p>\n<blockquote>\n<p>jOOQ's DSL interfaces should not be implemented by client code! Extend only those extension points that are explicitly documented as &quot;extendable&quot; (e.g. <a href=\"https://www.jooq.org/doc/latest/manual/sql-building/queryparts/custom-queryparts/\" rel=\"nofollow noreferrer\">custom QueryParts</a>).</p>\n</blockquote>\n<p>To answer your specific question, <code>DataType</code> is part of jOOQ's DSL and not meant for extension. Of course, as long as it is not a <code>sealed</code> type yet, you can do it. The sealing won't happen in a minor release in order not to break client code. But do note that in every minor release, there will be new methods that will break your implementation, so if you still implement your own, know what you're doing. Also, you might run into an occasional <code>ClassCastException</code>, because jOOQ occasionally assumes you don't extend its types, so it unsafely casts a public API type to an internal type that you can't access.</p>\n<p>It's not unlikely that you have a use-case that could be implemented entirely differently, or with new generic SPIs and extension points, so perhaps, <a href=\"https://github.com/jOOQ/jOOQ/issues/new/choose\" rel=\"nofollow noreferrer\">a feature request</a> might be the best way forward here</p>\n"}],"owner":{"account_id":8832713,"reputation":161,"user_id":6598366,"display_name":"LouizFC"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76515085,"answer_count":1,"score":1,"last_activity_date":1687337692,"creation_date":1687265029,"question_id":76514838,"body_markdown":"This is an extension of this question: https://stackoverflow.com/questions/76509358\r\n\r\nAs of JOOQ 3.18.4, when one looks at the `DataType` interface, there seems to be no &quot;extension point&quot; for implementing new `DataType`s, which would be useful for implementing user-defined or vendor-specific data types.\r\n\r\nThere are already issues related to this (see https://github.com/jOOQ/jOOQ/issues/11806)\r\n\r\nSo my question is: as of now, could the `DataType` interface be considered &quot;internal&quot;, but is public for implementation reasons (like an sealed interface before that was a thing), or it could be considered &quot;public&quot; and up to new client code implementations?\r\n\r\n","title":"When using JOOQ, is the DataType interface considered &quot;public api&quot; for implementation?","body":"<p>This is an extension of this question: <a href=\"https://stackoverflow.com/questions/76509358\">Custom type for create table statement in JOOQ</a></p>\n<p>As of JOOQ 3.18.4, when one looks at the <code>DataType</code> interface, there seems to be no &quot;extension point&quot; for implementing new <code>DataType</code>s, which would be useful for implementing user-defined or vendor-specific data types.</p>\n<p>There are already issues related to this (see <a href=\"https://github.com/jOOQ/jOOQ/issues/11806\" rel=\"nofollow noreferrer\">https://github.com/jOOQ/jOOQ/issues/11806</a>)</p>\n<p>So my question is: as of now, could the <code>DataType</code> interface be considered &quot;internal&quot;, but is public for implementation reasons (like an sealed interface before that was a thing), or it could be considered &quot;public&quot; and up to new client code implementations?</p>\n"},{"tags":["java","gson"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1687173967,"post_id":76506035,"comment_id":134895329,"body_markdown":"I don&#39;t use this api, but you should probably be following bean conventions:  your class should have an empty() ctor and probably create its own instances of `Address` and `Description` (which can be used or *replaced* as necessary)","body":"I don&#39;t use this api, but you should probably be following bean conventions:  your class should have an empty() ctor and probably create its own instances of <code>Address</code> and <code>Description</code> (which can be used or <i>replaced</i> as necessary)"},{"owner":{"account_id":5384013,"reputation":6035,"user_id":4288506,"accept_rate":77,"display_name":"Marcono1234"},"score":0,"creation_date":1687209694,"post_id":76506035,"comment_id":134902078,"body_markdown":"Maybe related to https://stackoverflow.com/questions/21626690/gson-optional-and-required-fields","body":"Maybe related to <a href=\"https://stackoverflow.com/questions/21626690/gson-optional-and-required-fields\" title=\"gson optional and required fields\">stackoverflow.com/questions/21626690/&hellip;</a>"},{"owner":{"account_id":5384013,"reputation":6035,"user_id":4288506,"accept_rate":77,"display_name":"Marcono1234"},"score":1,"creation_date":1687209935,"post_id":76506035,"comment_id":134902103,"body_markdown":"Could you please explain a bit more in detail what you want to achieve? For example should a default `Description` be set? But if so, what should be the values of its fields? Isn&#39;t it cleaner that a missing field has the value `null` instead of a default value? Then your application can handle missing values in some proper way. Otherwise your application cannot properly differentiate between a default value for a missing field, and a field value which is present in JSON but which happens to be the same as the default value.","body":"Could you please explain a bit more in detail what you want to achieve? For example should a default <code>Description</code> be set? But if so, what should be the values of its fields? Isn&#39;t it cleaner that a missing field has the value <code>null</code> instead of a default value? Then your application can handle missing values in some proper way. Otherwise your application cannot properly differentiate between a default value for a missing field, and a field value which is present in JSON but which happens to be the same as the default value."},{"owner":{"account_id":5976980,"reputation":122,"user_id":4697471,"display_name":"Tomasz Kubat"},"score":0,"creation_date":1687337442,"post_id":76506035,"comment_id":134921293,"body_markdown":"@Marcono1234 I have updated an example code. I would like to serialize data, but during my custom serialization error occur, when nested field is missing - I got NullPointerException. I am looking for an elegant, an possibly generic way to solve nulls. For me missing value is accepted, but I would like to handle it. I will have more similar classes for serialization/deserialization.","body":"@Marcono1234 I have updated an example code. I would like to serialize data, but during my custom serialization error occur, when nested field is missing - I got NullPointerException. I am looking for an elegant, an possibly generic way to solve nulls. For me missing value is accepted, but I would like to handle it. I will have more similar classes for serialization/deserialization."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1687338578,"post_id":76506035,"comment_id":134921562,"body_markdown":"[This](https://stackoverflow.com/questions/42523266/gson-serialization-exclude-some-fields-if-null-but-not-all-of-them) could be of interest","body":"<a href=\"https://stackoverflow.com/questions/42523266/gson-serialization-exclude-some-fields-if-null-but-not-all-of-them\">This</a> could be of interest"},{"owner":{"account_id":7655262,"reputation":7506,"user_id":5802417,"display_name":"Michael Gantman"},"score":0,"creation_date":1687339042,"post_id":76506035,"comment_id":134921681,"body_markdown":"I believe you over-coplicated things. Do you have to use Gson? I use Json-Jackson, and with that library I can provide you almost one liner solution. I believe that with gson you also can do much simpler solution. I just don&#39;t have experience with Gson as much","body":"I believe you over-coplicated things. Do you have to use Gson? I use Json-Jackson, and with that library I can provide you almost one liner solution. I believe that with gson you also can do much simpler solution. I just don&#39;t have experience with Gson as much"}],"owner":{"account_id":5976980,"reputation":122,"user_id":4697471,"display_name":"Tomasz Kubat"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687337322,"creation_date":1687172758,"question_id":76506035,"body_markdown":"I am using gson to deserialize/serialize data. Currently I use simple deserialization to just get the json data to pojo representation as is. Next I use custom serialization to parse json output.\r\n\r\nI have some problems with nested fields. When the json data has some **missing nested field** I am unable to access them in the Serialization step, with **NullPointerException error**. Example - I have an address nested field, which can contains of city, zipcode and so on. If the incoming json has no `address` field, I got `NullPointerException` when accerssing `address.city`.\r\n\r\nAs a result, if some json field are missing, I just want to populate missing values as output in serrialization, but I would like to add a reasonable null error handling. No obligatory checks are required.\r\n\r\nmyCustomer pojo example:\r\n\r\n![image](https://i.stack.imgur.com/IGQ1U.png)\r\n\r\n```\r\nimport com.google.gson.*;\r\nimport org.junit.Test;\r\n\r\nimport java.lang.reflect.Type;\r\nimport java.util.Date;\r\n\r\npublic class MyGsonTest {\r\n\r\n    // my deserialization class\r\n    class MyCustomer {\r\n\r\n        // fields\r\n        String id;\r\n        String name;\r\n        Date birthdate;\r\n\r\n        // nested fields\r\n        Address address;\r\n        Description description;\r\n\r\n        class Address {\r\n            String city;\r\n            String zipCode;\r\n            Street street;\r\n\r\n            // nested fields can have multiple in-depth levels, but I have simplified it for the presentation purposes\r\n            class Street {\r\n                String apartment;\r\n                String number;\r\n            }\r\n\r\n        }\r\n\r\n        class Description {\r\n            String info;\r\n            String moreInfo;\r\n        }\r\n\r\n    }\r\n\r\n    // my custom deserialization class\r\n    public class MyCustomerSerializer implements JsonSerializer&lt;MyCustomer&gt; {\r\n\r\n        @Override\r\n        public JsonElement serialize(MyCustomer myCustomer, Type type, JsonSerializationContext jsonSerializationContext) {\r\n\r\n            // create initial/empty JsonObject\r\n            JsonObject jo = new JsonObject();\r\n\r\n            // next add some properties...\r\n\r\n            // ok - we access created/deserialized nested field\r\n            jo.addProperty(&quot;city&quot;, myCustomer.address.city);\r\n            jo.addProperty(&quot;zipcode&quot;, myCustomer.address.zipCode); // ok iven if underlying field is missing\r\n\r\n            /*\r\n            !!!\r\n            NullPointerException - deserialized nested field is null (no leaf-level fields)\r\n            !!!\r\n             */\r\n            jo.addProperty(&quot;info&quot;, myCustomer.description.info);\r\n            jo.addProperty(&quot;moreInfo&quot;, myCustomer.description.moreInfo);\r\n\r\n            return jo;\r\n        }\r\n    }\r\n\r\n    @Test\r\n    public void testRun() {\r\n\r\n        // create gson instance with gson builder\r\n        GsonBuilder gsonBuilder = new GsonBuilder()\r\n            // register custom deserializer for MyCustomer class\r\n            .registerTypeAdapter(MyCustomer.class, new MyCustomerSerializer());\r\n        Gson gson = gsonBuilder.create();\r\n\r\n\r\n        // get example data\r\n        // missing: &#39;city.zipCode&#39; and entire &#39;description&#39;\r\n        String myCustomer1String = &quot;{&#39;id&#39;:&#39;a123&#39;,&#39;name&#39;:&#39;John&#39;,&#39;birthdate&#39;:&#39;1987-01-01&#39;,&#39;address&#39;:{&#39;city&#39;:&#39;Colorado&#39;}}&quot;;\r\n\r\n        // deserialize - create customer pojo instance\r\n        MyCustomer myCustomer = gson.fromJson(myCustomer1String, MyCustomer.class);\r\n\r\n        // serialization - error occur here\r\n        String myCustomerParsed = gson.toJson(myCustomer);\r\n\r\n    }\r\n}```\r\n","title":"Gson serialization - handling missing fields","body":"<p>I am using gson to deserialize/serialize data. Currently I use simple deserialization to just get the json data to pojo representation as is. Next I use custom serialization to parse json output.</p>\n<p>I have some problems with nested fields. When the json data has some <strong>missing nested field</strong> I am unable to access them in the Serialization step, with <strong>NullPointerException error</strong>. Example - I have an address nested field, which can contains of city, zipcode and so on. If the incoming json has no <code>address</code> field, I got <code>NullPointerException</code> when accerssing <code>address.city</code>.</p>\n<p>As a result, if some json field are missing, I just want to populate missing values as output in serrialization, but I would like to add a reasonable null error handling. No obligatory checks are required.</p>\n<p>myCustomer pojo example:</p>\n<p><img src=\"https://i.stack.imgur.com/IGQ1U.png\" alt=\"image\" /></p>\n<pre><code>import com.google.gson.*;\nimport org.junit.Test;\n\nimport java.lang.reflect.Type;\nimport java.util.Date;\n\npublic class MyGsonTest {\n\n    // my deserialization class\n    class MyCustomer {\n\n        // fields\n        String id;\n        String name;\n        Date birthdate;\n\n        // nested fields\n        Address address;\n        Description description;\n\n        class Address {\n            String city;\n            String zipCode;\n            Street street;\n\n            // nested fields can have multiple in-depth levels, but I have simplified it for the presentation purposes\n            class Street {\n                String apartment;\n                String number;\n            }\n\n        }\n\n        class Description {\n            String info;\n            String moreInfo;\n        }\n\n    }\n\n    // my custom deserialization class\n    public class MyCustomerSerializer implements JsonSerializer&lt;MyCustomer&gt; {\n\n        @Override\n        public JsonElement serialize(MyCustomer myCustomer, Type type, JsonSerializationContext jsonSerializationContext) {\n\n            // create initial/empty JsonObject\n            JsonObject jo = new JsonObject();\n\n            // next add some properties...\n\n            // ok - we access created/deserialized nested field\n            jo.addProperty(&quot;city&quot;, myCustomer.address.city);\n            jo.addProperty(&quot;zipcode&quot;, myCustomer.address.zipCode); // ok iven if underlying field is missing\n\n            /*\n            !!!\n            NullPointerException - deserialized nested field is null (no leaf-level fields)\n            !!!\n             */\n            jo.addProperty(&quot;info&quot;, myCustomer.description.info);\n            jo.addProperty(&quot;moreInfo&quot;, myCustomer.description.moreInfo);\n\n            return jo;\n        }\n    }\n\n    @Test\n    public void testRun() {\n\n        // create gson instance with gson builder\n        GsonBuilder gsonBuilder = new GsonBuilder()\n            // register custom deserializer for MyCustomer class\n            .registerTypeAdapter(MyCustomer.class, new MyCustomerSerializer());\n        Gson gson = gsonBuilder.create();\n\n\n        // get example data\n        // missing: 'city.zipCode' and entire 'description'\n        String myCustomer1String = &quot;{'id':'a123','name':'John','birthdate':'1987-01-01','address':{'city':'Colorado'}}&quot;;\n\n        // deserialize - create customer pojo instance\n        MyCustomer myCustomer = gson.fromJson(myCustomer1String, MyCustomer.class);\n\n        // serialization - error occur here\n        String myCustomerParsed = gson.toJson(myCustomer);\n\n    }\n}```\n</code></pre>\n"},{"tags":["java","javafx","build","jar","release"],"answers":[{"comments":[{"owner":{"account_id":27470264,"reputation":23,"user_id":21161705,"display_name":"Алексей Благодатских"},"score":0,"creation_date":1687338369,"post_id":76521470,"comment_id":134921504,"body_markdown":"THAT IT IS!!!!!! IT SOLVED MY PROBLEM!!))) Thank you very much ))))))) you are my hero!!))))))\n\nproblem solved","body":"THAT IT IS!!!!!! IT SOLVED MY PROBLEM!!))) Thank you very much ))))))) you are my hero!!))))))  problem solved"},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":1,"creation_date":1687413080,"post_id":76521470,"comment_id":134933662,"body_markdown":"See [what do when your question is answered](https://stackoverflow.com/help/someone-answers).","body":"See <a href=\"https://stackoverflow.com/help/someone-answers\">what do when your question is answered</a>."}],"tags":[],"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1687337039,"creation_date":1687337039,"answer_id":76521470,"question_id":76521364,"body_markdown":"The classes `javax.naming.*` are in module `java.naming`, try adding module  `java.naming` to the list.","title":"&quot;JRE does not support JNDI&quot; while start my jar file with custom JRE after jlink","body":"<p>The classes <code>javax.naming.*</code> are in module <code>java.naming</code>, try adding module  <code>java.naming</code> to the list.</p>\n"}],"owner":{"account_id":27470264,"reputation":23,"user_id":21161705,"display_name":"Алексей Благодатских"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":137,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76521470,"answer_count":1,"score":0,"last_activity_date":1687337039,"creation_date":1687336026,"question_id":76521364,"body_markdown":"please help me, I&#39;ve got a little program on JavaFX, it works good, so that I wanted to deliver it to users, including people without java at all. I build it to the Jar file, it works well with start.bat (where I add javafx modules to start), and last thing I must have a JRE folder in this folder. If I copy all folder with JRE17.0 it weight more than 400mb (but works well on the computers without java), and I know that my program could be have a size about 135mb with custom JRE. So, with jdeps I found all module dependences (successfully), and link it to the folder &quot;java runtime&quot;, everything works well, jlink created folder with custom JRE with success. And when I start ready project on a computer without pre-installed java, with this custom JRE, I got such problem:\r\n\r\nWARN StatusConsoleListener JNDI lookup class is not available because this JRE does not support JNDI. JNDI string lookups will not be available, continuing configuration. Ignoring java.lang.NoClassDefFoundError: javax/naming/Context\r\nException in Application start method\r\n\r\n\r\nI even couldn&#39;t find similar problem in google... May be I forgot about some very important module, I don&#39;t know... I used this commands to create my custom JRE.\r\n\r\njdeps --ignore-missing-deps --list-deps --multi-release 17 --module-path libs --add-modules ALL-MODULE-PATH ExpensesViewer.jar\r\n\r\njlink --no-header-files --no-man-pages --compress=2 --strip-debug --module-path libs;javafx/lib --add-modules java.datatransfer,java.desktop,java.logging,java.management,java.net.http,java.scripting,java.sql,java.transaction.xa,java.xml,jdk.jsobject,jdk.unsupported,jdk.unsupported.desktop --output java-runtime \r\n\r\njava version &quot;17.0.2&quot; 2022-01-18 LTS\r\nJava(TM) SE Runtime Environment (build 17.0.2+8-LTS-86)\r\nJava HotSpot(TM) 64-Bit Server VM (build 17.0.2+8-LTS-86, mixed mode, sharing)","title":"&quot;JRE does not support JNDI&quot; while start my jar file with custom JRE after jlink","body":"<p>please help me, I've got a little program on JavaFX, it works good, so that I wanted to deliver it to users, including people without java at all. I build it to the Jar file, it works well with start.bat (where I add javafx modules to start), and last thing I must have a JRE folder in this folder. If I copy all folder with JRE17.0 it weight more than 400mb (but works well on the computers without java), and I know that my program could be have a size about 135mb with custom JRE. So, with jdeps I found all module dependences (successfully), and link it to the folder &quot;java runtime&quot;, everything works well, jlink created folder with custom JRE with success. And when I start ready project on a computer without pre-installed java, with this custom JRE, I got such problem:</p>\n<p>WARN StatusConsoleListener JNDI lookup class is not available because this JRE does not support JNDI. JNDI string lookups will not be available, continuing configuration. Ignoring java.lang.NoClassDefFoundError: javax/naming/Context\nException in Application start method</p>\n<p>I even couldn't find similar problem in google... May be I forgot about some very important module, I don't know... I used this commands to create my custom JRE.</p>\n<p>jdeps --ignore-missing-deps --list-deps --multi-release 17 --module-path libs --add-modules ALL-MODULE-PATH ExpensesViewer.jar</p>\n<p>jlink --no-header-files --no-man-pages --compress=2 --strip-debug --module-path libs;javafx/lib --add-modules java.datatransfer,java.desktop,java.logging,java.management,java.net.http,java.scripting,java.sql,java.transaction.xa,java.xml,jdk.jsobject,jdk.unsupported,jdk.unsupported.desktop --output java-runtime</p>\n<p>java version &quot;17.0.2&quot; 2022-01-18 LTS\nJava(TM) SE Runtime Environment (build 17.0.2+8-LTS-86)\nJava HotSpot(TM) 64-Bit Server VM (build 17.0.2+8-LTS-86, mixed mode, sharing)</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":3590209,"reputation":1021,"user_id":2996452,"accept_rate":62,"display_name":"Jokkeri"},"score":1,"creation_date":1687247890,"post_id":76512419,"comment_id":134905980,"body_markdown":"Maybe this will help: https://stackoverflow.com/a/24313507/2996452 - so basically wait for the other task to complete with `Thread.join()`","body":"Maybe this will help: <a href=\"https://stackoverflow.com/a/24313507/2996452\">stackoverflow.com/a/24313507/2996452</a> - so basically wait for the other task to complete with <code>Thread.join()</code>"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1687336562,"post_id":76512419,"comment_id":134921091,"body_markdown":"Shutdown hooks must not engage in time-intensive operations of any kind. This is stated clearly in the documentation.","body":"Shutdown hooks must not engage in time-intensive operations of any kind. This is stated clearly in the documentation."}],"answers":[{"tags":[],"owner":{"account_id":462886,"reputation":2853,"user_id":865448,"accept_rate":82,"display_name":"tostao"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687290196,"creation_date":1687250144,"answer_id":76512812,"question_id":76512419,"body_markdown":"From java 8 you can use [CompletableFuture][1] to do this. Generally you want to do some action, and the main program should wait for the result.\r\n\r\n\r\n\r\nIf you don’t want to return anything from your callback function and just want to run some piece of code after the completion of the Future, then you can use thenAccept() and thenRun() methods. These methods are consumers and are often used as the last callback in the callback chain.\r\n\r\n`CompletableFuture.thenAccept()` takes a `Consumer&lt;T&gt;` and returns `CompletableFuture&lt;Void&gt;`. It has access to the result of the `CompletableFuture` on which it is attached. \r\n\r\nin your case you can do something like below:\r\n\r\n// thenAccept() example\r\n\r\n        CompletableFuture.supplyAsync(() -&gt; {\r\n    \t    return schedulerManager.shutdown();\r\n       }).thenAccept(product -&gt; {\r\n    \t    System.out.println(&quot;Scheduler manager is down!&quot;;)\r\n        });\r\n\r\nHere you can see some more examples - [click][2].\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html\r\n  [2]: https://www.callicoder.com/java-8-completablefuture-tutorial/","title":"Make program shutdown pause in Java","body":"<p>From java 8 you can use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html\" rel=\"nofollow noreferrer\">CompletableFuture</a> to do this. Generally you want to do some action, and the main program should wait for the result.</p>\n<p>If you don’t want to return anything from your callback function and just want to run some piece of code after the completion of the Future, then you can use thenAccept() and thenRun() methods. These methods are consumers and are often used as the last callback in the callback chain.</p>\n<p><code>CompletableFuture.thenAccept()</code> takes a <code>Consumer&lt;T&gt;</code> and returns <code>CompletableFuture&lt;Void&gt;</code>. It has access to the result of the <code>CompletableFuture</code> on which it is attached.</p>\n<p>in your case you can do something like below:</p>\n<p>// thenAccept() example</p>\n<pre><code>    CompletableFuture.supplyAsync(() -&gt; {\n        return schedulerManager.shutdown();\n   }).thenAccept(product -&gt; {\n        System.out.println(&quot;Scheduler manager is down!&quot;;)\n    });\n</code></pre>\n<p>Here you can see some more examples - <a href=\"https://www.callicoder.com/java-8-completablefuture-tutorial/\" rel=\"nofollow noreferrer\">click</a>.</p>\n"},{"tags":[],"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687336979,"creation_date":1687336053,"answer_id":76521369,"question_id":76512419,"body_markdown":"You can&#39;t prevent closing the streams during JVM shutdown. And the shutdown hook is not the right place to persist job state. You will never know which moment of the processing has been interrupted.\r\n\r\nMy proposal is to persist the job state prior to processing using state like `JOB_STARTED`. And persist again after the processing with `JOB_SUCCESSFUL`. This way if the application has been closed in the middle of processing you will know which jobs need to be restarted.\r\n\r\nBTW this is how `Spring Batch` handles job state.\r\n\r\nAdditionally you can implement a REST endpoint using Spring Boot MVC. Endpoint like `shutdown` can check if any jobs are still running, wait until completed and then exit application.","title":"Make program shutdown pause in Java","body":"<p>You can't prevent closing the streams during JVM shutdown. And the shutdown hook is not the right place to persist job state. You will never know which moment of the processing has been interrupted.</p>\n<p>My proposal is to persist the job state prior to processing using state like <code>JOB_STARTED</code>. And persist again after the processing with <code>JOB_SUCCESSFUL</code>. This way if the application has been closed in the middle of processing you will know which jobs need to be restarted.</p>\n<p>BTW this is how <code>Spring Batch</code> handles job state.</p>\n<p>Additionally you can implement a REST endpoint using Spring Boot MVC. Endpoint like <code>shutdown</code> can check if any jobs are still running, wait until completed and then exit application.</p>\n"}],"owner":{"account_id":412334,"reputation":33756,"user_id":785349,"accept_rate":94,"display_name":"quarks"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":109,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1687336979,"creation_date":1687247036,"question_id":76512419,"body_markdown":"In Java how can we &quot;pause&quot; any program shutdown request and wait for a method to return before shutting down (or after a given timeout)\r\n\r\n```\r\n\r\nimport picocli.CommandLine;\r\n// Imports \r\n@CommandLine.Command(\r\n        name = &quot;main&quot;,\r\n        description = &quot;Example main command&quot;\r\n)\r\npublic class MainCommand implements Callable&lt;Integer&gt; {\r\n    @Override\r\n    public Integer call() throws Exception {\r\n        \r\n        // Register the shutdown hook\r\n        Runtime.getRuntime().addShutdownHook(new Thread(() -&gt; {\r\n            try {\r\n                schedulerManager.shutdown(); // must wait for this to return or timeout\r\n            } catch (IOException | SchedulerException e) {\r\n                Logger.error(&quot;Scheduler shutdown failed: &quot; + e.getMessage());\r\n            }\r\n        }));\r\n        \r\n        while (true) {\r\n            Thread.sleep(1000);  // Sleep for 1 second.\r\n        }\r\n    }\r\n\r\n}\r\n```\r\n\r\nThe shutdown method in the scheduler here will first attempt to persist jobs into the database:\r\n\r\n```\r\npublic void shutdown() throws SchedulerException, IOException {\r\n    persistSchedulerState();\r\n    shutdownScheduler();\r\n}\r\n```\r\n\r\nThis is where it fails, the database is unable to persists since the streams have been closed. ","title":"Make program shutdown pause in Java","body":"<p>In Java how can we &quot;pause&quot; any program shutdown request and wait for a method to return before shutting down (or after a given timeout)</p>\n<pre><code>\nimport picocli.CommandLine;\n// Imports \n@CommandLine.Command(\n        name = &quot;main&quot;,\n        description = &quot;Example main command&quot;\n)\npublic class MainCommand implements Callable&lt;Integer&gt; {\n    @Override\n    public Integer call() throws Exception {\n        \n        // Register the shutdown hook\n        Runtime.getRuntime().addShutdownHook(new Thread(() -&gt; {\n            try {\n                schedulerManager.shutdown(); // must wait for this to return or timeout\n            } catch (IOException | SchedulerException e) {\n                Logger.error(&quot;Scheduler shutdown failed: &quot; + e.getMessage());\n            }\n        }));\n        \n        while (true) {\n            Thread.sleep(1000);  // Sleep for 1 second.\n        }\n    }\n\n}\n</code></pre>\n<p>The shutdown method in the scheduler here will first attempt to persist jobs into the database:</p>\n<pre><code>public void shutdown() throws SchedulerException, IOException {\n    persistSchedulerState();\n    shutdownScheduler();\n}\n</code></pre>\n<p>This is where it fails, the database is unable to persists since the streams have been closed.</p>\n"},{"tags":["java","stripe-payments","webhooks"],"answers":[{"comments":[{"owner":{"account_id":2194870,"reputation":553,"user_id":1940844,"accept_rate":29,"display_name":"KayKay"},"score":0,"creation_date":1452513342,"post_id":34718086,"comment_id":57187440,"body_markdown":"Thanks for the response. Actually there are no other customer subscription to that specific plan. So, to clarify,\n1. I have a plan &quot;basic&quot;","body":"Thanks for the response. Actually there are no other customer subscription to that specific plan. So, to clarify, 1. I have a plan &quot;basic&quot;"},{"owner":{"account_id":2194870,"reputation":553,"user_id":1940844,"accept_rate":29,"display_name":"KayKay"},"score":0,"creation_date":1452516467,"post_id":34718086,"comment_id":57189526,"body_markdown":"Thanks for the response. Actually there are no other customer subscriptions. \n\nSo, to clarify,\n1. I have a plan &quot;basic&quot;\n2. Subscribed 2 customers &quot;alex and john&quot; to that plan on different dates (1st Jan and 15th Nov).\n3. So, on 1st of Jan, invoice for alex is generated and payment will be attempted, invoice.payment_succeeded hook will be triggered. So, invoice.payment_succeeded hook handler will be called once.\n4. So, on 1st of Jan, would invoice.payment_succeeded hook for john also be triggered? If so, why is that when it is supposed to be only on 1st Nov?","body":"Thanks for the response. Actually there are no other customer subscriptions.   So, to clarify, 1. I have a plan &quot;basic&quot; 2. Subscribed 2 customers &quot;alex and john&quot; to that plan on different dates (1st Jan and 15th Nov). 3. So, on 1st of Jan, invoice for alex is generated and payment will be attempted, invoice.payment_succeeded hook will be triggered. So, invoice.payment_succeeded hook handler will be called once. 4. So, on 1st of Jan, would invoice.payment_succeeded hook for john also be triggered? If so, why is that when it is supposed to be only on 1st Nov?"},{"owner":{"account_id":6911980,"reputation":17014,"user_id":5307473,"display_name":"Ywain"},"score":0,"creation_date":1452520903,"post_id":34718086,"comment_id":57192531,"body_markdown":"Hi Karikalan. You should write to Stripe&#39;s support about this, so we can take a look at your account directly and offer a clear explanation of what&#39;s going on. You can reach out to support using the form at https://support.stripe.com/email.","body":"Hi Karikalan. You should write to Stripe&#39;s support about this, so we can take a look at your account directly and offer a clear explanation of what&#39;s going on. You can reach out to support using the form at <a href=\"https://support.stripe.com/email\" rel=\"nofollow noreferrer\">support.stripe.com/email</a>."},{"owner":{"account_id":7465996,"reputation":1866,"user_id":5675550,"accept_rate":77,"display_name":"viper"},"score":0,"creation_date":1473139206,"post_id":34718086,"comment_id":66013004,"body_markdown":"I have successfully implemented webhook and catch the webhook event to manipulate the data. I want to get the details like subscription id, customer id but I cannot get it by directly accessing the attributes through objects. How do I do that","body":"I have successfully implemented webhook and catch the webhook event to manipulate the data. I want to get the details like subscription id, customer id but I cannot get it by directly accessing the attributes through objects. How do I do that"}],"tags":[],"owner":{"account_id":6911980,"reputation":17014,"user_id":5307473,"display_name":"Ywain"},"comment_count":4,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1452504826,"creation_date":1452504826,"answer_id":34718086,"question_id":34692942,"body_markdown":"If the customer ID, invoice ID and charge ID are different, then it&#39;s not the same event.\r\n\r\nYou probably have multiple customers with subscriptions set up on your account.\r\n\r\nStripe will send an [`invoice.payment_succeeded`][1] event each time payment succeeds for _any_ invoice.\r\n\r\nIf you have multiple customers with subscriptions, Stripe will automatically create an invoice for each of them at the start of each billing periods, and attempt payment for these invoices approximately one hour after creation.\r\n\r\nYou can look up the [`attempt_count`][2] attribute on any [invoice object][3] to know whether this is the first payment attempt or not for a given invoice.\r\n\r\n  [1]: https://stripe.com/docs/api#event_types-invoice.payment_succeeded\r\n  [2]: https://stripe.com/docs/api#invoice_object-attempt_count\r\n  [3]: https://stripe.com/docs/api#invoice_object","title":"Stripe invoice.payment_succeeded webhook is triggered multiple times","body":"<p>If the customer ID, invoice ID and charge ID are different, then it's not the same event.</p>\n\n<p>You probably have multiple customers with subscriptions set up on your account.</p>\n\n<p>Stripe will send an <a href=\"https://stripe.com/docs/api#event_types-invoice.payment_succeeded\" rel=\"nofollow\"><code>invoice.payment_succeeded</code></a> event each time payment succeeds for <em>any</em> invoice.</p>\n\n<p>If you have multiple customers with subscriptions, Stripe will automatically create an invoice for each of them at the start of each billing periods, and attempt payment for these invoices approximately one hour after creation.</p>\n\n<p>You can look up the <a href=\"https://stripe.com/docs/api#invoice_object-attempt_count\" rel=\"nofollow\"><code>attempt_count</code></a> attribute on any <a href=\"https://stripe.com/docs/api#invoice_object\" rel=\"nofollow\">invoice object</a> to know whether this is the first payment attempt or not for a given invoice.</p>\n"},{"tags":[],"owner":{"account_id":15386724,"reputation":23,"user_id":11100603,"display_name":"Gobinda Saha"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687336035,"creation_date":1687336035,"answer_id":76521368,"question_id":34692942,"body_markdown":"**Did you return status 200 at the end of the event?**\r\n\r\nThis event can also be fired several times for not being successfully executed. Stripe will try to complete the request so, there should be return status to notify stripe whether it is completed or failed. ","title":"Stripe invoice.payment_succeeded webhook is triggered multiple times","body":"<p><strong>Did you return status 200 at the end of the event?</strong></p>\n<p>This event can also be fired several times for not being successfully executed. Stripe will try to complete the request so, there should be return status to notify stripe whether it is completed or failed.</p>\n"}],"owner":{"account_id":2194870,"reputation":553,"user_id":1940844,"accept_rate":29,"display_name":"KayKay"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7353,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1687336035,"creation_date":1452339303,"question_id":34692942,"body_markdown":"I am using Stripe (test mode) to develop the payment module in my application. I have done the following,\r\n\r\n1. Subscribing a customer to an existing plan created in stripe using Customer.create(customerParams). Which I understand that it will create a customer, subscribe to the plan, creates the invoice, charges the invoice.\r\n\r\n2. I have added a webhook for invoice.payment_succeeded (paymentSuccess) and invoice.payment_failure (paymentFailure) only. Created a webhook in my application.\r\n\r\nI get the following,\r\n\r\n1. My paymentSuccess webhook is called successfully after the Customer.create(customerParams) is called, using which I can retrieve event, invoice, charge and customer details to process it in my application. The paid flag is set to true.\r\n\r\n2. This webhook is called more than once (even more than 3 times) in a specific interval (around 30 mins or so), with different invoice id, customer id, charge id. \r\n\r\nMy questions:\r\n\r\n1. Why there is a multiple webhook call for the same event?\r\n2. If it is a retry for the failed payment, actually there is no failed payment. The call was always for invoice.payment_succeeded.\r\n3. Even if the event is repeated, why the customer_id, invoice_id are different each time as it is supposed to be the same since the payment has been done only once.\r\n\r\nAny help would be greatly appreciated. Thanks in advance.","title":"Stripe invoice.payment_succeeded webhook is triggered multiple times","body":"<p>I am using Stripe (test mode) to develop the payment module in my application. I have done the following,</p>\n\n<ol>\n<li><p>Subscribing a customer to an existing plan created in stripe using Customer.create(customerParams). Which I understand that it will create a customer, subscribe to the plan, creates the invoice, charges the invoice.</p></li>\n<li><p>I have added a webhook for invoice.payment_succeeded (paymentSuccess) and invoice.payment_failure (paymentFailure) only. Created a webhook in my application.</p></li>\n</ol>\n\n<p>I get the following,</p>\n\n<ol>\n<li><p>My paymentSuccess webhook is called successfully after the Customer.create(customerParams) is called, using which I can retrieve event, invoice, charge and customer details to process it in my application. The paid flag is set to true.</p></li>\n<li><p>This webhook is called more than once (even more than 3 times) in a specific interval (around 30 mins or so), with different invoice id, customer id, charge id. </p></li>\n</ol>\n\n<p>My questions:</p>\n\n<ol>\n<li>Why there is a multiple webhook call for the same event?</li>\n<li>If it is a retry for the failed payment, actually there is no failed payment. The call was always for invoice.payment_succeeded.</li>\n<li>Even if the event is repeated, why the customer_id, invoice_id are different each time as it is supposed to be the same since the payment has been done only once.</li>\n</ol>\n\n<p>Any help would be greatly appreciated. Thanks in advance.</p>\n"},{"tags":["java","spring","spring-boot","maven","spring-mvc"],"comments":[{"owner":{"account_id":1174921,"reputation":1613,"user_id":1151144,"accept_rate":79,"display_name":"Dale"},"score":0,"creation_date":1655600423,"post_id":72673663,"comment_id":128369930,"body_markdown":"Are you upgrading the framework or the framework and a program to the that SprintBoot version?","body":"Are you upgrading the framework or the framework and a program to the that SprintBoot version?"},{"owner":{"account_id":25589943,"reputation":11,"user_id":19366911,"display_name":"Baris Aaron"},"score":0,"creation_date":1655601023,"post_id":72673663,"comment_id":128369974,"body_markdown":"@Dale  WARN 16724 --- [ main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;dataSourceScriptDatabaseInitializer&#39; defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Unsatisfied dependency expressed through method &#39;dataSourceScriptDatabaseInitializer&#39; parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException:","body":"@Dale  WARN 16724 --- [ main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyExcep&zwnj;&#8203;tion: Error creating bean with name &#39;dataSourceScriptDatabaseInitializer&#39; defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceI&zwnj;&#8203;nitializationConfigu&zwnj;&#8203;ration.class]: Unsatisfied dependency expressed through method &#39;dataSourceScriptDatabaseInitializer&#39; parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException:"},{"owner":{"account_id":25534979,"reputation":1204,"user_id":19322223,"display_name":"Haoliang"},"score":2,"creation_date":1655609979,"post_id":72673663,"comment_id":128370765,"body_markdown":"“Failed to configure a DataSource: &#39;url&#39; attribute is not specified and no embedded datasource could be configured.\n\nReason: Failed to determine a suitable driver class\n\n\nAction:\n\nConsider the following:\n    If you want an embedded database (H2, HSQL or Derby), please put it on the classpath.\n    If you have database settings to be loaded from a particular profile you may need to activate it (no profiles are currently active).”\n\nSeems like the database url is missing.","body":"“Failed to configure a DataSource: &#39;url&#39; attribute is not specified and no embedded datasource could be configured.  Reason: Failed to determine a suitable driver class   Action:  Consider the following:     If you want an embedded database (H2, HSQL or Derby), please put it on the classpath.     If you have database settings to be loaded from a particular profile you may need to activate it (no profiles are currently active).”  Seems like the database url is missing."}],"answers":[{"tags":[],"owner":{"account_id":25590253,"reputation":16,"user_id":19367150,"display_name":"Monu Neolia"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687335620,"creation_date":1687335620,"answer_id":76521307,"question_id":72673663,"body_markdown":"You can add the properties in the **application.properties** file\r\n```\r\nspring.datasource.url=jdbc:postgresql://localhost:5432/database_name\r\nspring.datasource.username=username\r\nspring.datasource.password=password\r\n\r\n#Hibernate configuration\r\nspring.jpa.hibernate.ddl-auto=update\r\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect\r\nspring.jpa.show-sql=true\r\n```\r\n\r\nPlease change the **username**, **password**, and **database_name** according to your needs. \r\n\r\nIf the solution works for you please **upvote** it. ","title":"how to handle Spring-boot installation errors?","body":"<p>You can add the properties in the <strong>application.properties</strong> file</p>\n<pre><code>spring.datasource.url=jdbc:postgresql://localhost:5432/database_name\nspring.datasource.username=username\nspring.datasource.password=password\n\n#Hibernate configuration\nspring.jpa.hibernate.ddl-auto=update\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect\nspring.jpa.show-sql=true\n</code></pre>\n<p>Please change the <strong>username</strong>, <strong>password</strong>, and <strong>database_name</strong> according to your needs.</p>\n<p>If the solution works for you please <strong>upvote</strong> it.</p>\n"}],"owner":{"account_id":25589943,"reputation":11,"user_id":19366911,"display_name":"Baris Aaron"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":285,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1687335620,"creation_date":1655600308,"question_id":72673663,"body_markdown":"I have just installed today java spring but I came along a lot of problem normally when I start default spring version comes with 2.3.2(old version) I want to set up as 2.7.0.(upgraded)\r\n\r\nI arranged upper edition,error sign comes always.Pom.xml file stand like OK but I do not know wheather fine.\r\n\r\nI installed org.codehaus... maven file\r\n\r\n\r\n\r\n\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n        &lt;parent&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n            &lt;version&gt;2.7.0&lt;/version&gt;\r\n            &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n        &lt;/parent&gt;\r\n        &lt;groupId&gt;baris&lt;/groupId&gt;\r\n        &lt;artifactId&gt;demo&lt;/artifactId&gt;\r\n        &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n        &lt;name&gt;demo&lt;/name&gt;\r\n        &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n        &lt;properties&gt;\r\n            &lt;java.version&gt;1.8&lt;/java.version&gt;\r\n        &lt;/properties&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-freemarker&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n                &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n                &lt;scope&gt;runtime&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n                &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.0.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    \r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    \r\n    &lt;/project&gt;\r\nmaven output:\r\n\r\n    cd C:\\Users\\pc\\Documents\\NetBeansProjects\\initbaris; &quot;JAVA_HOME=C:\\\\Program Files\\\\Java\\\\jdk-17.0.1&quot; cmd /c &quot;\\&quot;C:\\\\Program Files\\\\NetBeans-12.6\\\\netbeans\\\\java\\\\maven\\\\bin\\\\mvn.cmd\\&quot; -Dexec.vmArgs= \\&quot;-Dexec.args=${exec.vmArgs} -classpath %classpath ${exec.mainClass} ${exec.appArgs}\\&quot; \\&quot;-Dexec.executable=C:\\\\Program Files\\\\Java\\\\jdk-17.0.1\\\\bin\\\\java.exe\\&quot; -Dexec.mainClass=baris.demo.DemoApplication -Dexec.classpathScope=runtime -DskipTests=true -Dexec.appArgs= \\&quot;-Dmaven.ext.class.path=C:\\\\Program Files\\\\NetBeans-12.6\\\\netbeans\\\\java\\\\maven-nblib\\\\netbeans-eventspy.jar\\&quot; -Dfile.encoding=UTF-8 org.codehaus.mojo:exec-maven-plugin:3.0.0:exec&quot;\r\n    Running NetBeans Compile On Save execution. Phase execution is skipped and output directories of dependency projects (with Compile on Save turned on) will be used instead of their jar artifacts.\r\n    [INFO] Scanning for projects...\r\n    [INFO] \r\n    [INFO] -----------------------------&lt; baris:demo &gt;-----------------------------\r\n    [INFO] Building demo 0.0.1-SNAPSHOT\r\n    [INFO] --------------------------------[ jar ]---------------------------------\r\n    [INFO] \r\n    [INFO] --- exec-maven-plugin:3.0.0:exec (default-cli) @ demo ---\r\n    \r\n      .   ____          _            __ _ _\r\n     /\\\\ / ___&#39;_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\r\n    ( ( )\\___ | &#39;_ | &#39;_| | &#39;_ \\/ _` | \\ \\ \\ \\\r\n     \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\r\n      &#39;  |____| .__|_| |_|_| |_\\__, | / / / /\r\n     =========|_|==============|___/=/_/_/_/\r\n     :: Spring Boot ::                (v2.7.0)\r\n    \r\n    2022-06-19 03:45:20.730  INFO 18280 --- [           main] baris.demo.DemoApplication               : Starting DemoApplication using Java 17.0.1 on bz with PID 18280 (C:\\Users\\pc\\Documents\\NetBeansProjects\\initbaris\\target\\classes started by pc in C:\\Users\\pc\\Documents\\NetBeansProjects\\initbaris)\r\n    2022-06-19 03:45:20.734  INFO 18280 --- [           main] baris.demo.DemoApplication               : No active profile set, falling back to 1 default profile: &quot;default&quot;\r\n    2022-06-19 03:45:21.842  INFO 18280 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\r\n    2022-06-19 03:45:21.867  INFO 18280 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 8 ms. Found 0 JPA repository interfaces.\r\n    2022-06-19 03:45:22.972  INFO 18280 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\r\n    2022-06-19 03:45:22.988  INFO 18280 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\r\n    2022-06-19 03:45:22.989  INFO 18280 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.63]\r\n    2022-06-19 03:45:23.199  INFO 18280 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\r\n    2022-06-19 03:45:23.200  INFO 18280 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2400 ms\r\n    2022-06-19 03:45:23.288  WARN 18280 --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;dataSourceScriptDatabaseInitializer&#39; defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Unsatisfied dependency expressed through method &#39;dataSourceScriptDatabaseInitializer&#39; parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;dataSource&#39; defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method &#39;dataSource&#39; threw exception; nested exception is org.springframework.boot.autoconfigure.jdbc.DataSourceProperties$DataSourceBeanCreationException: Failed to determine a suitable driver class\r\n    2022-06-19 03:45:23.294  INFO 18280 --- [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\r\n    2022-06-19 03:45:23.315  INFO 18280 --- [           main] ConditionEvaluationReportLoggingListener : \r\n    \r\n    Error starting ApplicationContext. To display the conditions report re-run your application with &#39;debug&#39; enabled.\r\n    2022-06-19 03:45:23.348 ERROR 18280 --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : \r\n    \r\n    ***************************\r\n    APPLICATION FAILED TO START\r\n    ***************************\r\n    \r\n    Description:\r\n    \r\n    Failed to configure a DataSource: &#39;url&#39; attribute is not specified and no embedded datasource could be configured.\r\n    \r\n    Reason: Failed to determine a suitable driver class\r\n    \r\n    \r\n    Action:\r\n    \r\n    Consider the following:\r\n    \tIf you want an embedded database (H2, HSQL or Derby), please put it on the classpath.\r\n    \tIf you have database settings to be loaded from a particular profile you may need to activate it (no profiles are currently active).\r\n    \r\n    [ERROR] Command execution failed.\r\n    org.apache.commons.exec.ExecuteException: Process exited with an error: 1 (Exit value: 1)\r\n        at org.apache.commons.exec.DefaultExecutor.executeInternal (DefaultExecutor.java:404)\r\n        at org.apache.commons.exec.DefaultExecutor.execute (DefaultExecutor.java:166)\r\n        at org.codehaus.mojo.exec.ExecMojo.executeCommandLine (ExecMojo.java:982)\r\n        at org.codehaus.mojo.exec.ExecMojo.executeCommandLine (ExecMojo.java:929)\r\n        at org.codehaus.mojo.exec.ExecMojo.execute (ExecMojo.java:457)\r\n        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\r\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\r\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\r\n        at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\r\n        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\n        at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\r\n        at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\n        at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\n        at org.apache.maven.cli.MavenCli.execute (MavenCli.java:957)\r\n        at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:289)\r\n        at org.apache.maven.cli.MavenCli.main (MavenCli.java:193)\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:77)\r\n        at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke (Method.java:568)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] BUILD FAILURE\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] Total time:  6.250 s\r\n    [INFO] Finished at: 2022-06-19T03:45:24+03:00\r\n    [INFO] ------------------------------------------------------------------------\r\n    [ERROR] Failed to execute goal org.codehaus.mojo:exec-maven-plugin:3.0.0:exec (default-cli) on project demo: Command execution failed.: Process exited with an error: 1 (Exit value: 1) -&gt; [Help 1]\r\n    [ERROR] \r\n    [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n    [ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n    [ERROR] \r\n    [ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n    [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\r\n\r\n\r\n\r\n","title":"how to handle Spring-boot installation errors?","body":"<p>I have just installed today java spring but I came along a lot of problem normally when I start default spring version comes with 2.3.2(old version) I want to set up as 2.7.0.(upgraded)</p>\n<p>I arranged upper edition,error sign comes always.Pom.xml file stand like OK but I do not know wheather fine.</p>\n<p>I installed org.codehaus... maven file</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.7.0&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;baris&lt;/groupId&gt;\n    &lt;artifactId&gt;demo&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;demo&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-freemarker&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n            &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>maven output:</p>\n<pre><code>cd C:\\Users\\pc\\Documents\\NetBeansProjects\\initbaris; &quot;JAVA_HOME=C:\\\\Program Files\\\\Java\\\\jdk-17.0.1&quot; cmd /c &quot;\\&quot;C:\\\\Program Files\\\\NetBeans-12.6\\\\netbeans\\\\java\\\\maven\\\\bin\\\\mvn.cmd\\&quot; -Dexec.vmArgs= \\&quot;-Dexec.args=${exec.vmArgs} -classpath %classpath ${exec.mainClass} ${exec.appArgs}\\&quot; \\&quot;-Dexec.executable=C:\\\\Program Files\\\\Java\\\\jdk-17.0.1\\\\bin\\\\java.exe\\&quot; -Dexec.mainClass=baris.demo.DemoApplication -Dexec.classpathScope=runtime -DskipTests=true -Dexec.appArgs= \\&quot;-Dmaven.ext.class.path=C:\\\\Program Files\\\\NetBeans-12.6\\\\netbeans\\\\java\\\\maven-nblib\\\\netbeans-eventspy.jar\\&quot; -Dfile.encoding=UTF-8 org.codehaus.mojo:exec-maven-plugin:3.0.0:exec&quot;\nRunning NetBeans Compile On Save execution. Phase execution is skipped and output directories of dependency projects (with Compile on Save turned on) will be used instead of their jar artifacts.\n[INFO] Scanning for projects...\n[INFO] \n[INFO] -----------------------------&lt; baris:demo &gt;-----------------------------\n[INFO] Building demo 0.0.1-SNAPSHOT\n[INFO] --------------------------------[ jar ]---------------------------------\n[INFO] \n[INFO] --- exec-maven-plugin:3.0.0:exec (default-cli) @ demo ---\n\n  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::                (v2.7.0)\n\n2022-06-19 03:45:20.730  INFO 18280 --- [           main] baris.demo.DemoApplication               : Starting DemoApplication using Java 17.0.1 on bz with PID 18280 (C:\\Users\\pc\\Documents\\NetBeansProjects\\initbaris\\target\\classes started by pc in C:\\Users\\pc\\Documents\\NetBeansProjects\\initbaris)\n2022-06-19 03:45:20.734  INFO 18280 --- [           main] baris.demo.DemoApplication               : No active profile set, falling back to 1 default profile: &quot;default&quot;\n2022-06-19 03:45:21.842  INFO 18280 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\n2022-06-19 03:45:21.867  INFO 18280 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 8 ms. Found 0 JPA repository interfaces.\n2022-06-19 03:45:22.972  INFO 18280 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\n2022-06-19 03:45:22.988  INFO 18280 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\n2022-06-19 03:45:22.989  INFO 18280 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.63]\n2022-06-19 03:45:23.199  INFO 18280 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\n2022-06-19 03:45:23.200  INFO 18280 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2400 ms\n2022-06-19 03:45:23.288  WARN 18280 --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Unsatisfied dependency expressed through method 'dataSourceScriptDatabaseInitializer' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method 'dataSource' threw exception; nested exception is org.springframework.boot.autoconfigure.jdbc.DataSourceProperties$DataSourceBeanCreationException: Failed to determine a suitable driver class\n2022-06-19 03:45:23.294  INFO 18280 --- [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\n2022-06-19 03:45:23.315  INFO 18280 --- [           main] ConditionEvaluationReportLoggingListener : \n\nError starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.\n2022-06-19 03:45:23.348 ERROR 18280 --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : \n\n***************************\nAPPLICATION FAILED TO START\n***************************\n\nDescription:\n\nFailed to configure a DataSource: 'url' attribute is not specified and no embedded datasource could be configured.\n\nReason: Failed to determine a suitable driver class\n\n\nAction:\n\nConsider the following:\n    If you want an embedded database (H2, HSQL or Derby), please put it on the classpath.\n    If you have database settings to be loaded from a particular profile you may need to activate it (no profiles are currently active).\n\n[ERROR] Command execution failed.\norg.apache.commons.exec.ExecuteException: Process exited with an error: 1 (Exit value: 1)\n    at org.apache.commons.exec.DefaultExecutor.executeInternal (DefaultExecutor.java:404)\n    at org.apache.commons.exec.DefaultExecutor.execute (DefaultExecutor.java:166)\n    at org.codehaus.mojo.exec.ExecMojo.executeCommandLine (ExecMojo.java:982)\n    at org.codehaus.mojo.exec.ExecMojo.executeCommandLine (ExecMojo.java:929)\n    at org.codehaus.mojo.exec.ExecMojo.execute (ExecMojo.java:457)\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:957)\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:289)\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:193)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:77)\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke (Method.java:568)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  6.250 s\n[INFO] Finished at: 2022-06-19T03:45:24+03:00\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.codehaus.mojo:exec-maven-plugin:3.0.0:exec (default-cli) on project demo: Command execution failed.: Process exited with an error: 1 (Exit value: 1) -&gt; [Help 1]\n[ERROR] \n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR] \n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\n</code></pre>\n"},{"tags":["java","maven","podman","rhel8","testcontainers-junit5"],"owner":{"account_id":16997965,"reputation":41,"user_id":12295949,"display_name":"Jo Vanmont"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":150,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687335242,"creation_date":1687335242,"question_id":76521267,"body_markdown":"**Problem**\r\n============\r\n\r\nI want to start a MySQLContainer from a *junit* test with `mvn clean verify`. But for some reason it can&#39;t chown the container folder for my host user.\r\n\r\nHere is a screenshot that illustrates the problem:\r\n\r\n`org.testcontainers.containers.ContainerLaunchException: Container startup failed for image mysql:8.0.33\r\n\tat com.xyzcorp.StudentServiceCopyTest.testMySQL8(StudentServiceCopyTest.java:61)\r\nCaused by: org.rnorth.ducttape.RetryCountExceededException: Retry limit hit with exception\r\n\tat com.xyzcorp.StudentServiceCopyTest.testMySQL8(StudentServiceCopyTest.java:61)\r\nCaused by: org.testcontainers.containers.ContainerLaunchException: Could not create/start container\r\n\tat com.xyzcorp.StudentServiceCopyTest.testMySQL8(StudentServiceCopyTest.java:61)\r\nCaused by: com.github.dockerjava.api.exception.InternalServerErrorException: \r\nStatus 500: {&quot;cause&quot;:&quot;error during bulk transfer for copier.request{Request:\\&quot;PUT\\&quot;, Root:\\&quot;/\\&quot;, preservedRoot:\\&quot;/home/jvanmont/.local/share/containers/storage/overlay/297e95cb55db40d82aa6e025772f7e05a009d64f5563ac3421e34592209e8627/merged\\&quot;, rootPrefix:\\&quot;/home/jvanmont/.local/share/containers/storage/overlay/297e95cb55db40d82aa6e025772f7e05a009d64f5563ac3421e34592209e8627/merged\\&quot;, Directory:\\&quot;/\\&quot;, preservedDirectory:\\&quot;/home/jvanmont/.local/share/containers/storage/overlay/297e95cb55db40d82aa6e025772f7e05a009d64f5563ac3421e34592209e8627/merged\\&quot;, Globs:[]string{}, preservedGlobs:[]string{}, StatOptions:copier.StatOptions{CheckForArchives:false, Excludes:[]string(nil)}, GetOptions:copier.GetOptions{UIDMap:[]idtools.IDMap(nil), GIDMap:[]idtools.IDMap(nil), Excludes:[]string(nil), ExpandArchives:false, ChownDirs:(*idtools.IDPair)(nil), ChmodDirs:(*fs.FileMode)(nil), ChownFiles:(*idtools.IDPair)(nil), ChmodFiles:(*fs.FileMode)(nil), StripSetuidBit:false, StripSetgidBit:false, StripStickyBit:false, StripXattrs:false, KeepDirectoryNames:false, Rename:map[string]string(nil), NoDerefSymlinks:false, IgnoreUnreadable:false, NoCrossDevice:false}, PutOptions:copier.PutOptions{UIDMap:[]idtools.IDMap(nil), GIDMap:[]idtools.IDMap(nil), DefaultDirOwner:(*idtools.IDPair)(nil), DefaultDirMode:(*fs.FileMode)(nil), ChownDirs:(*idtools.IDPair)(nil), ChmodDirs:(*fs.FileMode)(nil), ChownFiles:(*idtools.IDPair)(nil), ChmodFiles:(*fs.FileMode)(nil), StripSetuidBit:false, StripSetgidBit:false, StripStickyBit:false, StripXattrs:false, IgnoreXattrErrors:false, IgnoreDevices:false, NoOverwriteDirNonDir:false, NoOverwriteNonDirDir:false, Rename:map[string]string(nil)}, MkdirOptions:copier.MkdirOptions{UIDMap:[]idtools.IDMap(nil), GIDMap:[]idtools.IDMap(nil), ChownNew:(*idtools.IDPair)(nil), ChmodNew:(*fs.FileMode)(nil)}, RemoveOptions:copier.RemoveOptions{All:false}}: copier: put: error setting ownership of \\&quot;/etc/mysql/conf.d\\&quot; to 1980042590:1980042590: lchown /etc/mysql/conf.d: invalid argument&quot;,&quot;message&quot;:&quot;error during bulk transfer for copier.request{Request:\\&quot;PUT\\&quot;, Root:\\&quot;/\\&quot;, preservedRoot:\\&quot;/home/jvanmont/.local/share/containers/storage/overlay/297e95cb55db40d82aa6e025772f7e05a009d64f5563ac3421e34592209e8627/merged\\&quot;, rootPrefix:\\&quot;/home/jvanmont/.local/share/containers/storage/overlay/297e95cb55db40d82aa6e025772f7e05a009d64f5563ac3421e34592209e8627/merged\\&quot;, Directory:\\&quot;/\\&quot;, preservedDirectory:\\&quot;/home/jvanmont/.local/share/containers/storage/overlay/297e95cb55db40d82aa6e025772f7e05a009d64f5563ac3421e34592209e8627/merged\\&quot;, Globs:[]string{}, preservedGlobs:[]string{}, StatOptions:copier.StatOptions{CheckForArchives:false, Excludes:[]string(nil)}, GetOptions:copier.GetOptions{UIDMap:[]idtools.IDMap(nil), GIDMap:[]idtools.IDMap(nil), Excludes:[]string(nil), ExpandArchives:false, ChownDirs:(*idtools.IDPair)(nil), ChmodDirs:(*fs.FileMode)(nil), ChownFiles:(*idtools.IDPair)(nil), ChmodFiles:(*fs.FileMode)(nil), StripSetuidBit:false, StripSetgidBit:false, StripStickyBit:false, StripXattrs:false, KeepDirectoryNames:false, Rename:map[string]string(nil), NoDerefSymlinks:false, IgnoreUnreadable:false, NoCrossDevice:false}, PutOptions:copier.PutOptions{UIDMap:[]idtools.IDMap(nil), GIDMap:[]idtools.IDMap(nil), DefaultDirOwner:(*idtools.IDPair)(nil), DefaultDirMode:(*fs.FileMode)(nil), ChownDirs:(*idtools.IDPair)(nil), ChmodDirs:(*fs.FileMode)(nil), ChownFiles:(*idtools.IDPair)(nil), ChmodFiles:(*fs.FileMode)(nil), StripSetuidBit:false, StripSetgidBit:false, StripStickyBit:false, StripXattrs:false, IgnoreXattrErrors:false, IgnoreDevices:false, NoOverwriteDirNonDir:false, NoOverwriteNonDirDir:false, Rename:map[string]string(nil)}, MkdirOptions:copier.MkdirOptions{UIDMap:[]idtools.IDMap(nil), GIDMap:[]idtools.IDMap(nil), ChownNew:(*idtools.IDPair)(nil), ChmodNew:(*fs.FileMode)(nil)}, RemoveOptions:copier.RemoveOptions{All:false}}: copier: put: error setting ownership of \\&quot;/etc/mysql/conf.d\\&quot; to 1980042590:1980042590: lchown /etc/mysql/conf.d: invalid argument&quot;,&quot;response&quot;:500}`\r\n\r\n**What I&#39;ve tried**\r\n====================\r\n\r\nThis is the most simplified version of my code that I&#39;ve been able to get, which still produces the problem I described above.\r\n\r\n \r\n\r\n        @Test\r\n    \tpublic void testMySQL8() throws SQLException {\r\n    \t\tassumeFalse(SystemUtils.IS_OS_WINDOWS);\r\n    \t\tMySQLContainer container = new MySQLContainer&lt;&gt;(&quot;mysql:8.0.33&quot;)\r\n    \t\t\t\t.withCreateContainerCmdModifier(cmd -&gt; cmd.withUser(&quot;0:0&quot;).withCmd(&quot;--user 0:0&quot;))\r\n    \t\t\t\t /*.withCopyFileToContainer(MountableFile.forClasspathResource(\r\n    \t\t\t\t &quot;db/testMySQL.cnf&quot;), &quot;/home&quot;)\r\n    \t\t\t\t * .withUsername(&quot;jvanmont&quot;)\r\n    \t\t\t\t .withInitScript(&quot;db/init_mysql.sql&quot;).withPrivilegedMode(true).withUsername(&quot;test&quot;)\r\n    \t\t\t\t .withCommand(&quot;mysqld --default-authentication-plugin=mysql_native_password&quot;)*/;\r\n    \t\tcontainer.start();\r\n    \t\ttry {\r\n    \t\t\tResultSet resultSet = performQuery(container, &quot;SELECT VERSION()&quot;);\r\n    \t\t\tresultSet.next();\r\n    \t\t\tString resultSetString = resultSet.getString(1);\r\n    \t\t\tSystem.out.println(&quot;mySQL version: &quot; + resultSetString);\r\n    \r\n    \t\t\tassertTrue(&quot;The database version can be set using a container rule parameter&quot;,\r\n    \t\t\t\t\t&quot;8.0.33&quot;.equals(resultSetString));\r\n    \t\t} finally {\r\n    \t\t\tcontainer.stop();\r\n    \t\t}\r\n    \t}\r\n\r\n        &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.testcontainers&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;testcontainers&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.18.3&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.testcontainers&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;junit-jupiter&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.18.3&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.testcontainers&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mysql&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.18.3&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;mysql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;8.0.33&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n       bash-4.4$ podman -v\r\n       podman version 4.2.0\r\n\r\n       Java 17\r\n       mvn -v 3.8.8\r\n\r\n       bash-4.4$ uname -a\r\n       Linux hbidev** 4.18.0-425.19.2.el8_7.x86_64 #1 SMP Tue Apr 4 22:38:11 UTC 2023 \r\n       x86_64 x86_64 x86_64 GNU/Linux\r\n\r\n**My Research**\r\n================\r\n\r\nI can run the code with ***sudo***. I can run the container with podman run ...\r\n\r\nNo success:\r\nPodman is running rootless with host-user. Podman socket is owned by hos-user. I tried also with SELinux permissive mode. \r\n\r\nWhat I tried from inside the testcontainer code -&gt; I tried passing root user 0:0 when starting the container. I tried to start the container in privileged mode.\r\n\r\nI turned on testcontainer DEBUG:\r\n\r\n    Cmd: org.testcontainers.shaded.com.github.dockerjava.core.command.CopyArchiveToContainerCmdImpl@62ce72ff[cp ,-a=false ,&lt;null&gt;, ,d430a1a20b47ebd457358549a57bb762ea59bf7a9831110390bc2a7dafcc3ad8,:,/]\r\n\r\nFollowing is my podman id-mapping:\r\n\r\n    bash-4.4$ podman info | grep id\r\n        idlePercent: 98.81\r\n      hostname: hbidev**\r\n      idMappings:\r\n        gidmap:\r\n        - container_id: 0\r\n          host_id: 1980042590\r\n        - container_id: 1\r\n          host_id: 100000\r\n        uidmap:\r\n        - container_id: 0\r\n          host_id: 1980042590\r\n        - container_id: 1\r\n          host_id: 100000\r\n      - bridge\r\n\r\n**Question**\r\n=============\r\n\r\nWhy testcontainer tries to chown the ***conf.d*** folder? Why are all folders inside the container owned by root/nobody?\r\n\r\nHow can start the container as root from a testcontainer so it doesn&#39;t have to chown the folders inside the container for my host-user.\r\n","title":"mySQLTestcontainer can&#39;t chown /etc/mysql/conf.d folder inside rootless podman container","body":"<h1><strong>Problem</strong></h1>\n<p>I want to start a MySQLContainer from a <em>junit</em> test with <code>mvn clean verify</code>. But for some reason it can't chown the container folder for my host user.</p>\n<p>Here is a screenshot that illustrates the problem:</p>\n<p><code>org.testcontainers.containers.ContainerLaunchException: Container startup failed for image mysql:8.0.33 at com.xyzcorp.StudentServiceCopyTest.testMySQL8(StudentServiceCopyTest.java:61) Caused by: org.rnorth.ducttape.RetryCountExceededException: Retry limit hit with exception at com.xyzcorp.StudentServiceCopyTest.testMySQL8(StudentServiceCopyTest.java:61) Caused by: org.testcontainers.containers.ContainerLaunchException: Could not create/start container at com.xyzcorp.StudentServiceCopyTest.testMySQL8(StudentServiceCopyTest.java:61) Caused by: com.github.dockerjava.api.exception.InternalServerErrorException:  Status 500: {&quot;cause&quot;:&quot;error during bulk transfer for copier.request{Request:\\&quot;PUT\\&quot;, Root:\\&quot;/\\&quot;, preservedRoot:\\&quot;/home/jvanmont/.local/share/containers/storage/overlay/297e95cb55db40d82aa6e025772f7e05a009d64f5563ac3421e34592209e8627/merged\\&quot;, rootPrefix:\\&quot;/home/jvanmont/.local/share/containers/storage/overlay/297e95cb55db40d82aa6e025772f7e05a009d64f5563ac3421e34592209e8627/merged\\&quot;, Directory:\\&quot;/\\&quot;, preservedDirectory:\\&quot;/home/jvanmont/.local/share/containers/storage/overlay/297e95cb55db40d82aa6e025772f7e05a009d64f5563ac3421e34592209e8627/merged\\&quot;, Globs:[]string{}, preservedGlobs:[]string{}, StatOptions:copier.StatOptions{CheckForArchives:false, Excludes:[]string(nil)}, GetOptions:copier.GetOptions{UIDMap:[]idtools.IDMap(nil), GIDMap:[]idtools.IDMap(nil), Excludes:[]string(nil), ExpandArchives:false, ChownDirs:(*idtools.IDPair)(nil), ChmodDirs:(*fs.FileMode)(nil), ChownFiles:(*idtools.IDPair)(nil), ChmodFiles:(*fs.FileMode)(nil), StripSetuidBit:false, StripSetgidBit:false, StripStickyBit:false, StripXattrs:false, KeepDirectoryNames:false, Rename:map[string]string(nil), NoDerefSymlinks:false, IgnoreUnreadable:false, NoCrossDevice:false}, PutOptions:copier.PutOptions{UIDMap:[]idtools.IDMap(nil), GIDMap:[]idtools.IDMap(nil), DefaultDirOwner:(*idtools.IDPair)(nil), DefaultDirMode:(*fs.FileMode)(nil), ChownDirs:(*idtools.IDPair)(nil), ChmodDirs:(*fs.FileMode)(nil), ChownFiles:(*idtools.IDPair)(nil), ChmodFiles:(*fs.FileMode)(nil), StripSetuidBit:false, StripSetgidBit:false, StripStickyBit:false, StripXattrs:false, IgnoreXattrErrors:false, IgnoreDevices:false, NoOverwriteDirNonDir:false, NoOverwriteNonDirDir:false, Rename:map[string]string(nil)}, MkdirOptions:copier.MkdirOptions{UIDMap:[]idtools.IDMap(nil), GIDMap:[]idtools.IDMap(nil), ChownNew:(*idtools.IDPair)(nil), ChmodNew:(*fs.FileMode)(nil)}, RemoveOptions:copier.RemoveOptions{All:false}}: copier: put: error setting ownership of \\&quot;/etc/mysql/conf.d\\&quot; to 1980042590:1980042590: lchown /etc/mysql/conf.d: invalid argument&quot;,&quot;message&quot;:&quot;error during bulk transfer for copier.request{Request:\\&quot;PUT\\&quot;, Root:\\&quot;/\\&quot;, preservedRoot:\\&quot;/home/jvanmont/.local/share/containers/storage/overlay/297e95cb55db40d82aa6e025772f7e05a009d64f5563ac3421e34592209e8627/merged\\&quot;, rootPrefix:\\&quot;/home/jvanmont/.local/share/containers/storage/overlay/297e95cb55db40d82aa6e025772f7e05a009d64f5563ac3421e34592209e8627/merged\\&quot;, Directory:\\&quot;/\\&quot;, preservedDirectory:\\&quot;/home/jvanmont/.local/share/containers/storage/overlay/297e95cb55db40d82aa6e025772f7e05a009d64f5563ac3421e34592209e8627/merged\\&quot;, Globs:[]string{}, preservedGlobs:[]string{}, StatOptions:copier.StatOptions{CheckForArchives:false, Excludes:[]string(nil)}, GetOptions:copier.GetOptions{UIDMap:[]idtools.IDMap(nil), GIDMap:[]idtools.IDMap(nil), Excludes:[]string(nil), ExpandArchives:false, ChownDirs:(*idtools.IDPair)(nil), ChmodDirs:(*fs.FileMode)(nil), ChownFiles:(*idtools.IDPair)(nil), ChmodFiles:(*fs.FileMode)(nil), StripSetuidBit:false, StripSetgidBit:false, StripStickyBit:false, StripXattrs:false, KeepDirectoryNames:false, Rename:map[string]string(nil), NoDerefSymlinks:false, IgnoreUnreadable:false, NoCrossDevice:false}, PutOptions:copier.PutOptions{UIDMap:[]idtools.IDMap(nil), GIDMap:[]idtools.IDMap(nil), DefaultDirOwner:(*idtools.IDPair)(nil), DefaultDirMode:(*fs.FileMode)(nil), ChownDirs:(*idtools.IDPair)(nil), ChmodDirs:(*fs.FileMode)(nil), ChownFiles:(*idtools.IDPair)(nil), ChmodFiles:(*fs.FileMode)(nil), StripSetuidBit:false, StripSetgidBit:false, StripStickyBit:false, StripXattrs:false, IgnoreXattrErrors:false, IgnoreDevices:false, NoOverwriteDirNonDir:false, NoOverwriteNonDirDir:false, Rename:map[string]string(nil)}, MkdirOptions:copier.MkdirOptions{UIDMap:[]idtools.IDMap(nil), GIDMap:[]idtools.IDMap(nil), ChownNew:(*idtools.IDPair)(nil), ChmodNew:(*fs.FileMode)(nil)}, RemoveOptions:copier.RemoveOptions{All:false}}: copier: put: error setting ownership of \\&quot;/etc/mysql/conf.d\\&quot; to 1980042590:1980042590: lchown /etc/mysql/conf.d: invalid argument&quot;,&quot;response&quot;:500}</code></p>\n<h1><strong>What I've tried</strong></h1>\n<p>This is the most simplified version of my code that I've been able to get, which still produces the problem I described above.</p>\n<pre><code>    @Test\n    public void testMySQL8() throws SQLException {\n        assumeFalse(SystemUtils.IS_OS_WINDOWS);\n        MySQLContainer container = new MySQLContainer&lt;&gt;(&quot;mysql:8.0.33&quot;)\n                .withCreateContainerCmdModifier(cmd -&gt; cmd.withUser(&quot;0:0&quot;).withCmd(&quot;--user 0:0&quot;))\n                 /*.withCopyFileToContainer(MountableFile.forClasspathResource(\n                 &quot;db/testMySQL.cnf&quot;), &quot;/home&quot;)\n                 * .withUsername(&quot;jvanmont&quot;)\n                 .withInitScript(&quot;db/init_mysql.sql&quot;).withPrivilegedMode(true).withUsername(&quot;test&quot;)\n                 .withCommand(&quot;mysqld --default-authentication-plugin=mysql_native_password&quot;)*/;\n        container.start();\n        try {\n            ResultSet resultSet = performQuery(container, &quot;SELECT VERSION()&quot;);\n            resultSet.next();\n            String resultSetString = resultSet.getString(1);\n            System.out.println(&quot;mySQL version: &quot; + resultSetString);\n\n            assertTrue(&quot;The database version can be set using a container rule parameter&quot;,\n                    &quot;8.0.33&quot;.equals(resultSetString));\n        } finally {\n            container.stop();\n        }\n    }\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.testcontainers&lt;/groupId&gt;\n        &lt;artifactId&gt;testcontainers&lt;/artifactId&gt;\n        &lt;version&gt;1.18.3&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.testcontainers&lt;/groupId&gt;\n        &lt;artifactId&gt;junit-jupiter&lt;/artifactId&gt;\n        &lt;version&gt;1.18.3&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.testcontainers&lt;/groupId&gt;\n        &lt;artifactId&gt;mysql&lt;/artifactId&gt;\n        &lt;version&gt;1.18.3&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    \n    &lt;dependency&gt;\n        &lt;groupId&gt;mysql&lt;/groupId&gt;\n        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n        &lt;version&gt;8.0.33&lt;/version&gt;\n    &lt;/dependency&gt;\n\n   bash-4.4$ podman -v\n   podman version 4.2.0\n\n   Java 17\n   mvn -v 3.8.8\n\n   bash-4.4$ uname -a\n   Linux hbidev** 4.18.0-425.19.2.el8_7.x86_64 #1 SMP Tue Apr 4 22:38:11 UTC 2023 \n   x86_64 x86_64 x86_64 GNU/Linux\n</code></pre>\n<h1><strong>My Research</strong></h1>\n<p>I can run the code with <em><strong>sudo</strong></em>. I can run the container with podman run ...</p>\n<p>No success:\nPodman is running rootless with host-user. Podman socket is owned by hos-user. I tried also with SELinux permissive mode.</p>\n<p>What I tried from inside the testcontainer code -&gt; I tried passing root user 0:0 when starting the container. I tried to start the container in privileged mode.</p>\n<p>I turned on testcontainer DEBUG:</p>\n<pre><code>Cmd: org.testcontainers.shaded.com.github.dockerjava.core.command.CopyArchiveToContainerCmdImpl@62ce72ff[cp ,-a=false ,&lt;null&gt;, ,d430a1a20b47ebd457358549a57bb762ea59bf7a9831110390bc2a7dafcc3ad8,:,/]\n</code></pre>\n<p>Following is my podman id-mapping:</p>\n<pre><code>bash-4.4$ podman info | grep id\n    idlePercent: 98.81\n  hostname: hbidev**\n  idMappings:\n    gidmap:\n    - container_id: 0\n      host_id: 1980042590\n    - container_id: 1\n      host_id: 100000\n    uidmap:\n    - container_id: 0\n      host_id: 1980042590\n    - container_id: 1\n      host_id: 100000\n  - bridge\n</code></pre>\n<h1><strong>Question</strong></h1>\n<p>Why testcontainer tries to chown the <em><strong>conf.d</strong></em> folder? Why are all folders inside the container owned by root/nobody?</p>\n<p>How can start the container as root from a testcontainer so it doesn't have to chown the folders inside the container for my host-user.</p>\n"},{"tags":["java","android","multithreading","android-handler"],"comments":[{"owner":{"account_id":2117621,"reputation":4837,"user_id":1881527,"display_name":"Melbourne Lopes"},"score":2,"creation_date":1395394168,"post_id":11123621,"comment_id":34327769,"body_markdown":"You can also use Custom broadcast receiver....try my answer here,\r\n[Inner Broadcast Receiver][1]\r\n\r\n\r\n  [1]: http://stackoverflow.com/a/22541324/1881527","body":"You can also use Custom broadcast receiver....try my answer here,  [Inner Broadcast Receiver][1]        [1]: <a href=\"http://stackoverflow.com/a/22541324/1881527\">stackoverflow.com/a/22541324/1881527</a>"},{"owner":{"account_id":1857741,"reputation":1493,"user_id":1682975,"accept_rate":100,"display_name":"Ashok Bijoy Debnath"},"score":0,"creation_date":1417682220,"post_id":11123621,"comment_id":43045170,"body_markdown":"There are many ways. Apart from David&#39;s answer &amp; dzeikei&#39;s comment in his answer, (3) you can use a Broadcast Receiver, or (4) pass the handler in extras of Intent used to start the service, and then retrieve the main thread&#39;s handler inside service using getIntent().getExtras() .","body":"There are many ways. Apart from David&#39;s answer &amp; dzeikei&#39;s comment in his answer, (3) you can use a Broadcast Receiver, or (4) pass the handler in extras of Intent used to start the service, and then retrieve the main thread&#39;s handler inside service using getIntent().getExtras() ."},{"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"score":2,"creation_date":1565203524,"post_id":11123621,"comment_id":101282687,"body_markdown":"@sazzad-hissain-khan, Why tag this question from 2012 with mostly answers in Java with the kotlin tag?","body":"@sazzad-hissain-khan, Why tag this question from 2012 with mostly answers in Java with the kotlin tag?"}],"answers":[{"tags":[],"owner":{"account_id":55332,"reputation":27347,"user_id":165674,"accept_rate":67,"display_name":"Dheeraj Vepakomma"},"comment_count":0,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1340210845,"creation_date":1340210461,"answer_id":11124179,"question_id":11123621,"body_markdown":"One method I can think of is this:\r\n\r\n1) Let the UI bind to the service.  \r\n2) Expose a method like the one below by the `Binder` that registers your `Handler`:\r\n\r\n    public void registerHandler(Handler handler) {\r\n        mHandler = handler;\r\n    }\r\n\r\n3) In the UI thread, call the above method after binding to the service:\r\n\r\n    mBinder.registerHandler(new Handler());\r\n\r\n4) Use the handler in the Service&#39;s thread to post your task:\r\n\r\n    mHandler.post(runnable);\r\n","title":"Running code in main thread from another thread","body":"<p>One method I can think of is this:</p>\n\n<p>1) Let the UI bind to the service.<br>\n2) Expose a method like the one below by the <code>Binder</code> that registers your <code>Handler</code>:</p>\n\n<pre><code>public void registerHandler(Handler handler) {\n    mHandler = handler;\n}\n</code></pre>\n\n<p>3) In the UI thread, call the above method after binding to the service:</p>\n\n<pre><code>mBinder.registerHandler(new Handler());\n</code></pre>\n\n<p>4) Use the handler in the Service's thread to post your task:</p>\n\n<pre><code>mHandler.post(runnable);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1218251,"reputation":14573,"user_id":1185422,"accept_rate":62,"display_name":"Ahmed"},"score":1,"creation_date":1340218980,"post_id":11125271,"comment_id":14580323,"body_markdown":"Thanks David it worked out for me, one more thing if you could help me with, if I extend Handler and impl handleMessage() would it prevent main thread from handling its messages ? that&#39;s only a question out of curosity..","body":"Thanks David it worked out for me, one more thing if you could help me with, if I extend Handler and impl handleMessage() would it prevent main thread from handling its messages ? that&#39;s only a question out of curosity.."},{"owner":{"account_id":402229,"reputation":94004,"user_id":769265,"display_name":"David Wasser"},"score":2,"creation_date":1340220137,"post_id":11125271,"comment_id":14580855,"body_markdown":"No. If you subclass `Handler` (or use `Handler.Callback` interface) your `handleMessage()` method will ONLY be called for messages that have been posted using your handler. The main thread is using a different handler to post/process messages so there is no conflict.","body":"No. If you subclass <code>Handler</code> (or use <code>Handler.Callback</code> interface) your <code>handleMessage()</code> method will ONLY be called for messages that have been posted using your handler. The main thread is using a different handler to post/process messages so there is no conflict."},{"owner":{"account_id":187685,"reputation":2246,"user_id":425932,"display_name":"dzeikei"},"score":215,"creation_date":1383623827,"post_id":11125271,"comment_id":29403588,"body_markdown":"I believe you won&#39;t even need context if you use `Handler mainHandler = new Handler(Looper.getMainLooper());`","body":"I believe you won&#39;t even need context if you use <code>Handler mainHandler = new Handler(Looper.getMainLooper());</code>"},{"owner":{"account_id":2515499,"reputation":16966,"user_id":2187042,"accept_rate":53,"display_name":"Richard Tingle"},"score":6,"creation_date":1406801960,"post_id":11125271,"comment_id":38976416,"body_markdown":"Minor point; your code doesn&#39;t go where the ... currently is. It should be `new Runnable(){@Override public void run() {....}};`","body":"Minor point; your code doesn&#39;t go where the ... currently is. It should be <code>new Runnable(){@Override public void run() {....}};</code>"},{"owner":{"account_id":3505946,"reputation":2815,"user_id":2931487,"accept_rate":60,"display_name":"Sagar Devanga"},"score":0,"creation_date":1421826820,"post_id":11125271,"comment_id":44505039,"body_markdown":"@DavidWasser thank you very much your code does exactly what i want but just a query. I am using this code to get the location of the user in the splashScreen. How can i set a boolean variable to check if i have got a response depending on which i decide the next activity to be started.","body":"@DavidWasser thank you very much your code does exactly what i want but just a query. I am using this code to get the location of the user in the splashScreen. How can i set a boolean variable to check if i have got a response depending on which i decide the next activity to be started."},{"owner":{"account_id":402229,"reputation":94004,"user_id":769265,"display_name":"David Wasser"},"score":2,"creation_date":1421831441,"post_id":11125271,"comment_id":44507131,"body_markdown":"@SagarDevanga This is not the right place to ask a different question. Please post a new question , not a comment to an unrelated answer. You will get better and faster response that way.","body":"@SagarDevanga This is not the right place to ask a different question. Please post a new question , not a comment to an unrelated answer. You will get better and faster response that way."},{"owner":{"account_id":5618078,"reputation":1822,"user_id":4448757,"display_name":"Shailendra Yadav"},"score":0,"creation_date":1568006693,"post_id":11125271,"comment_id":102123337,"body_markdown":"If you don&#39;t want to use a Runnable just do it this way:\nMessage msg = mainHandler.obtainMessage();\nmsg.sendToTarget(); //Don&#39;t use dispatchMessage","body":"If you don&#39;t want to use a Runnable just do it this way: Message msg = mainHandler.obtainMessage(); msg.sendToTarget(); //Don&#39;t use dispatchMessage"},{"owner":{"account_id":8471976,"reputation":664,"user_id":6354265,"display_name":"Ahad"},"score":0,"creation_date":1575185376,"post_id":11125271,"comment_id":104475998,"body_markdown":"If you have access to the activity then you can call the runOnUiThread() method to post runnable to be executed on the UI thread from another thread.","body":"If you have access to the activity then you can call the runOnUiThread() method to post runnable to be executed on the UI thread from another thread."}],"tags":[],"owner":{"account_id":402229,"reputation":94004,"user_id":769265,"display_name":"David Wasser"},"comment_count":8,"down_vote_count":0,"up_vote_count":697,"is_accepted":true,"score":697,"last_activity_date":1503504350,"creation_date":1340214562,"answer_id":11125271,"question_id":11123621,"body_markdown":"NOTE: This answer has gotten so much attention, that I need to update it. Since the original answer was posted, the comment from @dzeikei has gotten almost as much attention as the original answer. So here are 2 possible solutions:\r\n\r\n**1. If your background thread has a reference to a `Context` object:**\r\n\r\nMake sure that your background worker threads have access to a Context object (can be the Application context or the Service context). Then just do this in the background worker thread:\r\n\r\n    // Get a handler that can be used to post to the main thread\r\n    Handler mainHandler = new Handler(context.getMainLooper());\r\n\r\n    Runnable myRunnable = new Runnable() {\r\n        @Override \r\n        public void run() {....} // This is your code\r\n    };\r\n    mainHandler.post(myRunnable);\r\n\r\n**2. If your background thread does not have (or need) a `Context` object**\r\n\r\n(suggested by @dzeikei):\r\n\r\n    // Get a handler that can be used to post to the main thread\r\n    Handler mainHandler = new Handler(Looper.getMainLooper());\r\n\r\n    Runnable myRunnable = new Runnable() {\r\n        @Override \r\n        public void run() {....} // This is your code\r\n    };\r\n    mainHandler.post(myRunnable);","title":"Running code in main thread from another thread","body":"<p>NOTE: This answer has gotten so much attention, that I need to update it. Since the original answer was posted, the comment from @dzeikei has gotten almost as much attention as the original answer. So here are 2 possible solutions:</p>\n\n<p><strong>1. If your background thread has a reference to a <code>Context</code> object:</strong></p>\n\n<p>Make sure that your background worker threads have access to a Context object (can be the Application context or the Service context). Then just do this in the background worker thread:</p>\n\n<pre><code>// Get a handler that can be used to post to the main thread\nHandler mainHandler = new Handler(context.getMainLooper());\n\nRunnable myRunnable = new Runnable() {\n    @Override \n    public void run() {....} // This is your code\n};\nmainHandler.post(myRunnable);\n</code></pre>\n\n<p><strong>2. If your background thread does not have (or need) a <code>Context</code> object</strong></p>\n\n<p>(suggested by @dzeikei):</p>\n\n<pre><code>// Get a handler that can be used to post to the main thread\nHandler mainHandler = new Handler(Looper.getMainLooper());\n\nRunnable myRunnable = new Runnable() {\n    @Override \n    public void run() {....} // This is your code\n};\nmainHandler.post(myRunnable);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":402229,"reputation":94004,"user_id":769265,"display_name":"David Wasser"},"score":24,"creation_date":1385544348,"post_id":11129025,"comment_id":30183059,"body_markdown":"OP says he is running threads in a `Service`. You cannot use `runOnUiThread()` in a `Service`. This answer is misleading and doesn&#39;t address the asked question.","body":"OP says he is running threads in a <code>Service</code>. You cannot use <code>runOnUiThread()</code> in a <code>Service</code>. This answer is misleading and doesn&#39;t address the asked question."}],"tags":[],"owner":{"account_id":161871,"reputation":2379,"user_id":382960,"display_name":"Alexey Vassiliev"},"comment_count":1,"down_vote_count":2,"up_vote_count":165,"is_accepted":false,"score":163,"last_activity_date":1602145303,"creation_date":1340230787,"answer_id":11129025,"question_id":11123621,"body_markdown":"As a commenter below pointed correctly, this is not a general solution for services, only for threads launched from your activity (a service can be such a thread, but not all of those are).\r\nOn the complicated topic of service-activity communication please read the whole Services section of the official doc - it is complex, so it would pay to understand the basics:\r\nhttp://developer.android.com/guide/components/services.html#Notifications\r\n\r\nThe method below may work in the simplest cases:\r\n\r\nIf I understand you correctly you need some code to be executed in the GUI thread of the application (cannot think about anything else called &quot;main&quot; thread). \r\nFor this there is a method on `Activity`:\r\n\r\n    someActivity.runOnUiThread(new Runnable() {\r\n\t\t\t@Override\r\n\t\t\tpublic void run() {\r\n\t\t\t   //Your code to run in GUI thread here\r\n\t\t\t}//public void run() {\r\n    });\r\n\r\n\r\nDoc: http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29\r\n\r\nHope this is what you are looking for.","title":"Running code in main thread from another thread","body":"<p>As a commenter below pointed correctly, this is not a general solution for services, only for threads launched from your activity (a service can be such a thread, but not all of those are).\nOn the complicated topic of service-activity communication please read the whole Services section of the official doc - it is complex, so it would pay to understand the basics:\n<a href=\"http://developer.android.com/guide/components/services.html#Notifications\" rel=\"noreferrer\">http://developer.android.com/guide/components/services.html#Notifications</a></p>\n<p>The method below may work in the simplest cases:</p>\n<p>If I understand you correctly you need some code to be executed in the GUI thread of the application (cannot think about anything else called &quot;main&quot; thread).\nFor this there is a method on <code>Activity</code>:</p>\n<pre><code>someActivity.runOnUiThread(new Runnable() {\n        @Override\n        public void run() {\n           //Your code to run in GUI thread here\n        }//public void run() {\n});\n</code></pre>\n<p>Doc: <a href=\"http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29\" rel=\"noreferrer\">http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29</a></p>\n<p>Hope this is what you are looking for.</p>\n"},{"comments":[{"owner":{"account_id":402229,"reputation":94004,"user_id":769265,"display_name":"David Wasser"},"score":7,"creation_date":1385544422,"post_id":19047284,"comment_id":30183110,"body_markdown":"OP says he is running threads in a `Service`. You cannot use `runOnUiThread()` in a `Service`.","body":"OP says he is running threads in a <code>Service</code>. You cannot use <code>runOnUiThread()</code> in a <code>Service</code>."},{"owner":{"account_id":1312133,"reputation":3175,"user_id":1259924,"accept_rate":73,"display_name":"Greg Brown"},"score":0,"creation_date":1440593394,"post_id":19047284,"comment_id":52336660,"body_markdown":"@DavidWasser Is that documented anywhere? The method docs don&#39;t mention anything about it. http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29","body":"@DavidWasser Is that documented anywhere? The method docs don&#39;t mention anything about it. <a href=\"http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29\" rel=\"nofollow noreferrer\">developer.android.com/reference/android/app/&hellip;</a>"},{"owner":{"account_id":402229,"reputation":94004,"user_id":769265,"display_name":"David Wasser"},"score":1,"creation_date":1470328909,"post_id":19047284,"comment_id":64917531,"body_markdown":"@GregBrown As you&#39;ve indicated by your link to the `Activity` documentation, `runOnUiThread()` is a method of `Activity`. It is not a method of `Service`, therefore you cannot use it. What could be clearer than that?","body":"@GregBrown As you&#39;ve indicated by your link to the <code>Activity</code> documentation, <code>runOnUiThread()</code> is a method of <code>Activity</code>. It is not a method of <code>Service</code>, therefore you cannot use it. What could be clearer than that?"},{"owner":{"account_id":1312133,"reputation":3175,"user_id":1259924,"accept_rate":73,"display_name":"Greg Brown"},"score":0,"creation_date":1470602555,"post_id":19047284,"comment_id":65003627,"body_markdown":"@DavidWasser Fair enough. I don&#39;t even remember why I asked that question now (it was posted almost a year ago).","body":"@DavidWasser Fair enough. I don&#39;t even remember why I asked that question now (it was posted almost a year ago)."}],"tags":[],"owner":{"account_id":2302609,"reputation":8012,"user_id":2022586,"display_name":"Alexander Volkov"},"comment_count":4,"down_vote_count":1,"up_vote_count":30,"is_accepted":false,"score":29,"last_activity_date":1380274049,"creation_date":1380274049,"answer_id":19047284,"question_id":11123621,"body_markdown":"If you run code in a thread, e.g. do delaying some action, then you need to invoke `runOnUiThread` from the context. For example, if your code is inside `MainActivity` class then use this:\r\n\r\n    MainActivity.this.runOnUiThread(new Runnable() {\r\n        @Override\r\n        public void run() {\r\n\t        myAction();\r\n        }\r\n    });\r\n\r\nIf your method can be invoked either from main (UI thread) or from other threads you need a check like:\r\n\r\n    public void myMethod() {\r\n       if( Looper.myLooper() == Looper.getMainLooper() ) {\r\n           myAction();\r\n       }\r\n       else {\r\n       \r\n    }","title":"Running code in main thread from another thread","body":"<p>If you run code in a thread, e.g. do delaying some action, then you need to invoke <code>runOnUiThread</code> from the context. For example, if your code is inside <code>MainActivity</code> class then use this:</p>\n\n<pre><code>MainActivity.this.runOnUiThread(new Runnable() {\n    @Override\n    public void run() {\n        myAction();\n    }\n});\n</code></pre>\n\n<p>If your method can be invoked either from main (UI thread) or from other threads you need a check like:</p>\n\n<pre><code>public void myMethod() {\n   if( Looper.myLooper() == Looper.getMainLooper() ) {\n       myAction();\n   }\n   else {\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6111754,"reputation":443,"user_id":4767922,"display_name":"tema_man"},"comment_count":0,"down_vote_count":0,"up_vote_count":32,"is_accepted":false,"score":32,"last_activity_date":1451404406,"creation_date":1435907747,"answer_id":31200810,"question_id":11123621,"body_markdown":"There is another simple way, if you don&#39;t have an access to the Context.\r\n\r\n1). Create a handler from the main looper:\r\n\r\n    Handler uiHandler = new Handler(Looper.getMainLooper());\r\n\r\n2). Implement a Runnable interface:\r\n\r\n    Runnable runnable = new Runnable() { // your code here }\r\n\r\n3). Post your Runnable to the uiHandler:\r\n\r\n    uiHandler.post(runnable);\r\n\r\nThat&#39;s all ;-) Have fun with threads, but don&#39;t forget to synchronize them.\r\n   \r\n\r\n ","title":"Running code in main thread from another thread","body":"<p>There is another simple way, if you don't have an access to the Context.</p>\n\n<p>1). Create a handler from the main looper:</p>\n\n<pre><code>Handler uiHandler = new Handler(Looper.getMainLooper());\n</code></pre>\n\n<p>2). Implement a Runnable interface:</p>\n\n<pre><code>Runnable runnable = new Runnable() { // your code here }\n</code></pre>\n\n<p>3). Post your Runnable to the uiHandler:</p>\n\n<pre><code>uiHandler.post(runnable);\n</code></pre>\n\n<p>That's all ;-) Have fun with threads, but don't forget to synchronize them.</p>\n"},{"tags":[],"owner":{"account_id":6453072,"reputation":37996,"user_id":4999394,"accept_rate":98,"display_name":"Ravindra babu"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1507548771,"creation_date":1494333610,"answer_id":43870099,"question_id":11123621,"body_markdown":"`HandlerThread` is better option to normal java Threads in Android .\r\n\r\n\r\n1. Create a [HandlerThread][1] and start it\r\n2. Create a [Handler][2] with [Looper][3] from HandlerThread :`requestHandler`\r\n3. `post` a `Runnable` task on `requestHandler`\r\n\r\nCommunication with UI Thread from `HandlerThread`\r\n\r\n1. Create a `Handler` with `Looper` for main thread  :  `responseHandler` and override `handleMessage` method\r\n2. Inside `Runnable` task of other Thread ( `HandlerThread` in this case), call `sendMessage` on `responseHandler`\r\n3. This `sendMessage` result invocation of `handleMessage` in `responseHandler`.\r\n4. Get attributes from the `Message` and process it, update UI\r\n\r\n**Example**: Update `TextView` with data received from a web service. Since web service should be invoked on non-UI thread, created `HandlerThread` for Network Operation. Once you get the content from the web service, send message to your main thread (UI Thread) handler and that `Handler` will handle the message and update UI.\r\n\r\nSample code:\r\n\r\n    HandlerThread handlerThread = new HandlerThread(&quot;NetworkOperation&quot;);\r\n    handlerThread.start();\r\n    Handler requestHandler = new Handler(handlerThread.getLooper());\r\n\r\n    final Handler responseHandler = new Handler(Looper.getMainLooper()) {\r\n        @Override\r\n        public void handleMessage(Message msg) {\r\n            txtView.setText((String) msg.obj);\r\n        }\r\n    };\r\n\r\n    Runnable myRunnable = new Runnable() {\r\n        @Override\r\n        public void run() {\r\n            try {\r\n                Log.d(&quot;Runnable&quot;, &quot;Before IO call&quot;);\r\n                URL page = new URL(&quot;http://www.your_web_site.com/fetchData.jsp&quot;);\r\n                StringBuffer text = new StringBuffer();\r\n                HttpURLConnection conn = (HttpURLConnection) page.openConnection();\r\n                conn.connect();\r\n                InputStreamReader in = new InputStreamReader((InputStream) conn.getContent());\r\n                BufferedReader buff = new BufferedReader(in);\r\n                String line;\r\n                while ((line = buff.readLine()) != null) {\r\n                    text.append(line + &quot;\\n&quot;);\r\n                }\r\n                Log.d(&quot;Runnable&quot;, &quot;After IO call:&quot;+ text.toString());\r\n                Message msg = new Message();\r\n                msg.obj = text.toString();\r\n                responseHandler.sendMessage(msg);\r\n\r\n\r\n            } catch (Exception err) {\r\n                err.printStackTrace();\r\n            }\r\n        }\r\n    };\r\n    requestHandler.post(myRunnable);\r\n\r\nUseful articles:\r\n\r\n[handlerthreads-and-why-you-should-be-using-them-in-your-android-apps][4]\r\n\r\n[android-looper-handler-handlerthread-i][5]\r\n\r\n\r\n  [1]: https://developer.android.com/reference/android/os/HandlerThread.html\r\n  [2]: https://developer.android.com/reference/android/os/Handler.html\r\n  [3]: https://developer.android.com/reference/android/os/Looper.html\r\n  [4]: https://medium.com/@ali.muzaffar/handlerthreads-and-why-you-should-be-using-them-in-your-android-apps-dc8bf1540341\r\n  [5]: https://blog.nikitaog.me/2014/10/11/android-looper-handler-handlerthread-i/","title":"Running code in main thread from another thread","body":"<p><code>HandlerThread</code> is better option to normal java Threads in Android .</p>\n\n<ol>\n<li>Create a <a href=\"https://developer.android.com/reference/android/os/HandlerThread.html\" rel=\"noreferrer\">HandlerThread</a> and start it</li>\n<li>Create a <a href=\"https://developer.android.com/reference/android/os/Handler.html\" rel=\"noreferrer\">Handler</a> with <a href=\"https://developer.android.com/reference/android/os/Looper.html\" rel=\"noreferrer\">Looper</a> from HandlerThread :<code>requestHandler</code></li>\n<li><code>post</code> a <code>Runnable</code> task on <code>requestHandler</code></li>\n</ol>\n\n<p>Communication with UI Thread from <code>HandlerThread</code></p>\n\n<ol>\n<li>Create a <code>Handler</code> with <code>Looper</code> for main thread  :  <code>responseHandler</code> and override <code>handleMessage</code> method</li>\n<li>Inside <code>Runnable</code> task of other Thread ( <code>HandlerThread</code> in this case), call <code>sendMessage</code> on <code>responseHandler</code></li>\n<li>This <code>sendMessage</code> result invocation of <code>handleMessage</code> in <code>responseHandler</code>.</li>\n<li>Get attributes from the <code>Message</code> and process it, update UI</li>\n</ol>\n\n<p><strong>Example</strong>: Update <code>TextView</code> with data received from a web service. Since web service should be invoked on non-UI thread, created <code>HandlerThread</code> for Network Operation. Once you get the content from the web service, send message to your main thread (UI Thread) handler and that <code>Handler</code> will handle the message and update UI.</p>\n\n<p>Sample code:</p>\n\n<pre><code>HandlerThread handlerThread = new HandlerThread(\"NetworkOperation\");\nhandlerThread.start();\nHandler requestHandler = new Handler(handlerThread.getLooper());\n\nfinal Handler responseHandler = new Handler(Looper.getMainLooper()) {\n    @Override\n    public void handleMessage(Message msg) {\n        txtView.setText((String) msg.obj);\n    }\n};\n\nRunnable myRunnable = new Runnable() {\n    @Override\n    public void run() {\n        try {\n            Log.d(\"Runnable\", \"Before IO call\");\n            URL page = new URL(\"http://www.your_web_site.com/fetchData.jsp\");\n            StringBuffer text = new StringBuffer();\n            HttpURLConnection conn = (HttpURLConnection) page.openConnection();\n            conn.connect();\n            InputStreamReader in = new InputStreamReader((InputStream) conn.getContent());\n            BufferedReader buff = new BufferedReader(in);\n            String line;\n            while ((line = buff.readLine()) != null) {\n                text.append(line + \"\\n\");\n            }\n            Log.d(\"Runnable\", \"After IO call:\"+ text.toString());\n            Message msg = new Message();\n            msg.obj = text.toString();\n            responseHandler.sendMessage(msg);\n\n\n        } catch (Exception err) {\n            err.printStackTrace();\n        }\n    }\n};\nrequestHandler.post(myRunnable);\n</code></pre>\n\n<p>Useful articles:</p>\n\n<p><a href=\"https://medium.com/@ali.muzaffar/handlerthreads-and-why-you-should-be-using-them-in-your-android-apps-dc8bf1540341\" rel=\"noreferrer\">handlerthreads-and-why-you-should-be-using-them-in-your-android-apps</a></p>\n\n<p><a href=\"https://blog.nikitaog.me/2014/10/11/android-looper-handler-handlerthread-i/\" rel=\"noreferrer\">android-looper-handler-handlerthread-i</a></p>\n"},{"tags":[],"owner":{"account_id":12444641,"reputation":2168,"user_id":9061224,"display_name":"MarGin"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1519100593,"creation_date":1519047773,"answer_id":48867552,"question_id":11123621,"body_markdown":"Follow this method. Using this way you can simply update the UI from a background thread. runOnUiThread work on the main(UI) thread . I think this code snippet is less complex and easy, especially for beginners.\r\n\r\n\r\n  \r\n\r\n    AsyncTask.execute(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n\r\n                //code you want to run on the background\r\n                someCode();\r\n\r\n               //the code you want to run on main thread\r\n     MainActivity.this.runOnUiThread(new Runnable() {\r\n\r\n                        public void run() {\r\n\r\n    /*the code you want to run after the background operation otherwise they will executed earlier and give you an error*/\r\n                            executeAfterOperation();\r\n                           \r\n                       }\r\n                    });\r\n                }\r\n            });\r\n\r\n\r\n\r\nin the case of a service\r\n\r\ncreate a handler in the oncreate\r\n\r\n     handler = new Handler();\r\n\r\nthen use it like this\r\n\r\n \r\n\r\n     private void runOnUiThread(Runnable runnable) {\r\n            handler.post(runnable);\r\n        }\r\n\r\n","title":"Running code in main thread from another thread","body":"<p>Follow this method. Using this way you can simply update the UI from a background thread. runOnUiThread work on the main(UI) thread . I think this code snippet is less complex and easy, especially for beginners.</p>\n\n<pre><code>AsyncTask.execute(new Runnable() {\n            @Override\n            public void run() {\n\n            //code you want to run on the background\n            someCode();\n\n           //the code you want to run on main thread\n MainActivity.this.runOnUiThread(new Runnable() {\n\n                    public void run() {\n\n/*the code you want to run after the background operation otherwise they will executed earlier and give you an error*/\n                        executeAfterOperation();\n\n                   }\n                });\n            }\n        });\n</code></pre>\n\n<p>in the case of a service</p>\n\n<p>create a handler in the oncreate</p>\n\n<pre><code> handler = new Handler();\n</code></pre>\n\n<p>then use it like this</p>\n\n<pre><code> private void runOnUiThread(Runnable runnable) {\n        handler.post(runnable);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5002283,"reputation":2557,"user_id":4020917,"display_name":"david m lee"},"comment_count":0,"down_vote_count":0,"up_vote_count":31,"is_accepted":false,"score":31,"last_activity_date":1529997310,"creation_date":1519148770,"answer_id":48891290,"question_id":11123621,"body_markdown":"A condensed code block is as follows:\r\n\r\n       new Handler(Looper.getMainLooper()).post(new Runnable() {\r\n           @Override\r\n           public void run() {\r\n               // things to do on the main thread\r\n           }\r\n       });\r\n\r\nThis does not involve passing down the Activity reference or the Application reference.\r\n\r\nKotlin Equivalent:\r\n\r\n\t\tHandler(Looper.getMainLooper()).post(Runnable {\r\n\t\t\t// things to do on the main thread\r\n\t\t})","title":"Running code in main thread from another thread","body":"<p>A condensed code block is as follows:</p>\n\n<pre><code>   new Handler(Looper.getMainLooper()).post(new Runnable() {\n       @Override\n       public void run() {\n           // things to do on the main thread\n       }\n   });\n</code></pre>\n\n<p>This does not involve passing down the Activity reference or the Application reference.</p>\n\n<p>Kotlin Equivalent:</p>\n\n<pre><code>    Handler(Looper.getMainLooper()).post(Runnable {\n        // things to do on the main thread\n    })\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1756654,"reputation":711,"user_id":1604528,"display_name":"mevdev"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1548927341,"creation_date":1529013926,"answer_id":50866577,"question_id":11123621,"body_markdown":"I know this is an old question, but I came across a main thread one-liner that I use in both Kotlin and Java. This may not be the best solution for a service, but for calling something that will change the UI inside of a fragment this is extremely simple and obvious.\r\n\r\nJava (8):\r\n\r\n     getActivity().runOnUiThread(()-&gt;{\r\n          //your main thread code\r\n     });\r\n\r\nKotlin:\r\n\r\n    this.runOnUiThread {\r\n         //your main thread code\r\n    }","title":"Running code in main thread from another thread","body":"<p>I know this is an old question, but I came across a main thread one-liner that I use in both Kotlin and Java. This may not be the best solution for a service, but for calling something that will change the UI inside of a fragment this is extremely simple and obvious.</p>\n\n<p>Java (8):</p>\n\n<pre><code> getActivity().runOnUiThread(()-&gt;{\n      //your main thread code\n });\n</code></pre>\n\n<p>Kotlin:</p>\n\n<pre><code>this.runOnUiThread {\n     //your main thread code\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":10129219,"reputation":22253,"user_id":7483494,"accept_rate":78,"display_name":"MBT"},"score":0,"creation_date":1535028128,"post_id":51985755,"comment_id":90921464,"body_markdown":"While this code might answer the question you still might consider adding a few explanatory sentences as this increases the value of your answer for other users!","body":"While this code might answer the question you still might consider adding a few explanatory sentences as this increases the value of your answer for other users!"}],"tags":[],"owner":{"account_id":5992812,"reputation":1,"user_id":4708442,"display_name":"Revelation A.F"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1535031267,"creation_date":1535027061,"answer_id":51985755,"question_id":11123621,"body_markdown":"    public void mainWork() {\r\n        new Handler(Looper.getMainLooper()).post(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                //Add Your Code Here\r\n            }\r\n        });\r\n    }\r\n\r\nThis can also work in a service class with no issue.","title":"Running code in main thread from another thread","body":"<pre><code>public void mainWork() {\n    new Handler(Looper.getMainLooper()).post(new Runnable() {\n        @Override\n        public void run() {\n            //Add Your Code Here\n        }\n    });\n}\n</code></pre>\n\n<p>This can also work in a service class with no issue.</p>\n"},{"tags":[],"owner":{"account_id":5475193,"reputation":6876,"user_id":4353365,"display_name":"Francis"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1539346933,"creation_date":1537171249,"answer_id":52363213,"question_id":11123621,"body_markdown":"for Kotlin, you can use [Anko corountines][1]:\r\n\r\n**update**\r\n\r\n    doAsync {\r\n       ...\r\n    }\r\n\r\n**deprecated** \r\n\r\n    async(UI) {\r\n        // Code run on UI thread\r\n        // Use ref() instead of this@MyActivity\r\n    }\r\n\r\n\r\n  [1]: https://github.com/Kotlin/anko/wiki/Anko-Coroutines\r\n","title":"Running code in main thread from another thread","body":"<p>for Kotlin, you can use <a href=\"https://github.com/Kotlin/anko/wiki/Anko-Coroutines\" rel=\"nofollow noreferrer\">Anko corountines</a>:</p>\n\n<p><strong>update</strong></p>\n\n<pre><code>doAsync {\n   ...\n}\n</code></pre>\n\n<p><strong>deprecated</strong> </p>\n\n<pre><code>async(UI) {\n    // Code run on UI thread\n    // Use ref() instead of this@MyActivity\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":159669,"reputation":2094,"user_id":379226,"accept_rate":37,"display_name":"Inn0vative1"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1540871641,"creation_date":1540871641,"answer_id":53057172,"question_id":11123621,"body_markdown":"The simplest way especially if you don&#39;t have a context, if you&#39;re using RxAndroid you can do:\r\n\r\n    AndroidSchedulers.mainThread().scheduleDirect {\r\n        runCodeHere()\r\n    }","title":"Running code in main thread from another thread","body":"<p>The simplest way especially if you don't have a context, if you're using RxAndroid you can do:</p>\n\n<pre><code>AndroidSchedulers.mainThread().scheduleDirect {\n    runCodeHere()\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8312718,"reputation":2819,"user_id":6247186,"display_name":"Hamed Jaliliani"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1547463857,"creation_date":1547463857,"answer_id":54180268,"question_id":11123621,"body_markdown":"More precise Kotlin code using handler :\r\n\r\n    Handler(Looper.getMainLooper()).post {  \r\n     // your codes here run on main Thread\r\n     }\r\n\r\n ","title":"Running code in main thread from another thread","body":"<p>More precise Kotlin code using handler :</p>\n\n<pre><code>Handler(Looper.getMainLooper()).post {  \n // your codes here run on main Thread\n }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":102114,"reputation":4494,"user_id":274312,"accept_rate":93,"display_name":"Wex"},"score":0,"creation_date":1589448044,"post_id":56852228,"comment_id":109300163,"body_markdown":"Not sure what version of Kotlin this is, but I had to add braces : `runOnUiThread(){...}`","body":"Not sure what version of Kotlin this is, but I had to add braces : <code>runOnUiThread(){...}</code>"},{"owner":{"account_id":956824,"reputation":2531,"user_id":981979,"accept_rate":44,"display_name":"Golden Thumb"},"score":1,"creation_date":1607733039,"post_id":56852228,"comment_id":115374445,"body_markdown":"Works greatly for me using Android Studio 4.1.1 on mac.","body":"Works greatly for me using Android Studio 4.1.1 on mac."}],"tags":[],"owner":{"account_id":1089130,"reputation":38502,"user_id":1084174,"accept_rate":89,"display_name":"Sazzad Hissain Khan"},"comment_count":2,"down_vote_count":0,"up_vote_count":96,"is_accepted":false,"score":96,"last_activity_date":1687335076,"creation_date":1562069643,"answer_id":56852228,"question_id":11123621,"body_markdown":"## Kotlin versions\r\nWhen **you are on an activity**, then use\r\n\r\n    runOnUiThread {\r\n        //code that runs in main\r\n    }\r\n\r\nWhen **you have activity context**, mContext then use\r\n\r\n    mContext.runOnUiThread {\r\n        //code that runs in main\r\n    }\r\nWhen you are in somewhere **outside activity** where **no context available**, then use\r\n\r\n    Handler(Looper.getMainLooper()).post {  \r\n        //code that runs in main\r\n    }","title":"Running code in main thread from another thread","body":"<h2>Kotlin versions</h2>\n<p>When <strong>you are on an activity</strong>, then use</p>\n<pre><code>runOnUiThread {\n    //code that runs in main\n}\n</code></pre>\n<p>When <strong>you have activity context</strong>, mContext then use</p>\n<pre><code>mContext.runOnUiThread {\n    //code that runs in main\n}\n</code></pre>\n<p>When you are in somewhere <strong>outside activity</strong> where <strong>no context available</strong>, then use</p>\n<pre><code>Handler(Looper.getMainLooper()).post {  \n    //code that runs in main\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":240840,"reputation":9580,"user_id":511299,"accept_rate":82,"display_name":"Sunkas"},"score":0,"creation_date":1624613334,"post_id":58483787,"comment_id":120411954,"body_markdown":"AsyncTask seems to be depricated","body":"AsyncTask seems to be depricated"}],"tags":[],"owner":{"account_id":1628898,"reputation":4638,"user_id":1503855,"accept_rate":62,"display_name":"HotJard"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1571651500,"creation_date":1571651500,"answer_id":58483787,"question_id":11123621,"body_markdown":"So most handy is to do sort of:\r\n\r\n    import android.os.AsyncTask\r\n    import android.os.Handler\r\n    import android.os.Looper\r\n    \r\n    object Dispatch {\r\n        fun asyncOnBackground(call: ()-&gt;Unit) {\r\n            AsyncTask.execute {\r\n                call()\r\n            }\r\n        }\r\n    \r\n        fun asyncOnMain(call: ()-&gt;Unit) {\r\n            Handler(Looper.getMainLooper()).post {\r\n                call()\r\n            }\r\n        }\r\n    }\r\n\r\nAnd after:\r\n\r\n    Dispatch.asyncOnBackground {\r\n        val value = ...// super processing\r\n        Dispatch.asyncOnMain { completion(value)}\r\n    }","title":"Running code in main thread from another thread","body":"<p>So most handy is to do sort of:</p>\n\n<pre><code>import android.os.AsyncTask\nimport android.os.Handler\nimport android.os.Looper\n\nobject Dispatch {\n    fun asyncOnBackground(call: ()-&gt;Unit) {\n        AsyncTask.execute {\n            call()\n        }\n    }\n\n    fun asyncOnMain(call: ()-&gt;Unit) {\n        Handler(Looper.getMainLooper()).post {\n            call()\n        }\n    }\n}\n</code></pre>\n\n<p>And after:</p>\n\n<pre><code>Dispatch.asyncOnBackground {\n    val value = ...// super processing\n    Dispatch.asyncOnMain { completion(value)}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10038794,"reputation":802,"user_id":8229399,"display_name":"philoopher97"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1631521105,"creation_date":1631521105,"answer_id":69159394,"question_id":11123621,"body_markdown":"```kotlin\r\nContextCompat.getMainExecutor(context).execute {\r\n  // do something\r\n}\r\n```","title":"Running code in main thread from another thread","body":"<pre class=\"lang-kotlin prettyprint-override\"><code>ContextCompat.getMainExecutor(context).execute {\n  // do something\n}\n</code></pre>\n"}],"owner":{"account_id":1218251,"reputation":14573,"user_id":1185422,"accept_rate":62,"display_name":"Ahmed"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":363740,"favorite_count":0,"down_vote_count":1,"up_vote_count":394,"accepted_answer_id":11125271,"answer_count":16,"score":393,"last_activity_date":1687335076,"creation_date":1340208431,"question_id":11123621,"body_markdown":"In an android service I have created thread(s) for doing some background task. \r\n\r\nI have a situation where a thread needs to post certain task on main thread&#39;s message queue, for example a `Runnable`.\r\n\r\nIs there a way to get `Handler` of the main thread and post `Message`/`Runnable` to it from my other thread?","title":"Running code in main thread from another thread","body":"<p>In an android service I have created thread(s) for doing some background task.</p>\n<p>I have a situation where a thread needs to post certain task on main thread's message queue, for example a <code>Runnable</code>.</p>\n<p>Is there a way to get <code>Handler</code> of the main thread and post <code>Message</code>/<code>Runnable</code> to it from my other thread?</p>\n"},{"tags":["java","stream"],"answers":[{"tags":[],"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687334908,"creation_date":1687334908,"answer_id":76521219,"question_id":76520340,"body_markdown":"Use the key to get the value from the map and set the value:\r\n```\r\nreponses.stream().forEach(r -&gt; r.setError_msg(errorMapping.get(r.getError_msg())));\r\n```\r\nThis does not take into account the possibility, that the key does not exist in the map(your question does not specify, if that&#39;s possible scenario).\r\n\r\nAdditionally using stream for this is an overkill, simple loop would do the job and is probably more readable.","title":"streams, java8 , List to map compare and find a value","body":"<p>Use the key to get the value from the map and set the value:</p>\n<pre><code>reponses.stream().forEach(r -&gt; r.setError_msg(errorMapping.get(r.getError_msg())));\n</code></pre>\n<p>This does not take into account the possibility, that the key does not exist in the map(your question does not specify, if that's possible scenario).</p>\n<p>Additionally using stream for this is an overkill, simple loop would do the job and is probably more readable.</p>\n"}],"owner":{"account_id":7385409,"reputation":1,"user_id":20288583,"display_name":"user145345"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1687334908,"creation_date":1687326971,"question_id":76520340,"body_markdown":"I have list of and a map , I need to match the value of list in the map and replace the list value with the map value .\r\nBasically I need to replace my error_msg from Reponses with the value present in the errormapping\r\n\r\n    private Map&lt;String, String&gt; errormapping;\r\n\r\n    private List&lt;Reponses&gt; reponse;\r\n\r\n    public class Reponses{\r\n\r\n    private String id;\r\n    private String error_msg;\r\n    }\r\n    reponse.stream().forEach(e-&gt;e.getError_msg())\r\n\r\nKind of stuck here","title":"streams, java8 , List to map compare and find a value","body":"<p>I have list of and a map , I need to match the value of list in the map and replace the list value with the map value .\nBasically I need to replace my error_msg from Reponses with the value present in the errormapping</p>\n<pre><code>private Map&lt;String, String&gt; errormapping;\n\nprivate List&lt;Reponses&gt; reponse;\n\npublic class Reponses{\n\nprivate String id;\nprivate String error_msg;\n}\nreponse.stream().forEach(e-&gt;e.getError_msg())\n</code></pre>\n<p>Kind of stuck here</p>\n"},{"tags":["java","spring","file","swagger"],"comments":[{"owner":{"account_id":39252,"reputation":89842,"user_id":113116,"display_name":"Helen"},"score":0,"creation_date":1687196900,"post_id":76508870,"comment_id":134900131,"body_markdown":"Do you use Springfox or Springdoc, and which version?","body":"Do you use Springfox or Springdoc, and which version?"},{"owner":{"account_id":28409011,"reputation":25,"user_id":21732649,"display_name":"FischKopp"},"score":0,"creation_date":1687198101,"post_id":76508870,"comment_id":134900347,"body_markdown":"I am using Springdoc 2.0.","body":"I am using Springdoc 2.0."},{"owner":{"account_id":28409011,"reputation":25,"user_id":21732649,"display_name":"FischKopp"},"score":0,"creation_date":1687198985,"post_id":76508870,"comment_id":134900512,"body_markdown":"...and also tried 2.1.0","body":"...and also tried 2.1.0"},{"owner":{"account_id":39252,"reputation":89842,"user_id":113116,"display_name":"Helen"},"score":0,"creation_date":1687203601,"post_id":76508870,"comment_id":134901199,"body_markdown":"If you change `produces` to `consumes`, does it resolve the issue?","body":"If you change <code>produces</code> to <code>consumes</code>, does it resolve the issue?"},{"owner":{"account_id":28409011,"reputation":25,"user_id":21732649,"display_name":"FischKopp"},"score":0,"creation_date":1687210248,"post_id":76508870,"comment_id":134902128,"body_markdown":"yes that did the job!! Thank you!!","body":"yes that did the job!! Thank you!!"}],"answers":[{"tags":[],"owner":{"account_id":39252,"reputation":89842,"user_id":113116,"display_name":"Helen"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1687334831,"creation_date":1687334831,"answer_id":76521210,"question_id":76508870,"body_markdown":"In the `@RequestMapping` annotation, replace\r\n\r\n```\r\n    produces = {\r\n        &quot;multipart/form-data&quot;\r\n    }\r\n```\r\n\r\nwith\r\n\r\n```\r\n    consumes = {\r\n        &quot;multipart/form-data&quot;\r\n    }\r\n```\r\n\r\n`consumes` defines the _request_ media type, whereas `produces` defines the _response_ media type.","title":"Java Spring Swagger file upload","body":"<p>In the <code>@RequestMapping</code> annotation, replace</p>\n<pre><code>    produces = {\n        &quot;multipart/form-data&quot;\n    }\n</code></pre>\n<p>with</p>\n<pre><code>    consumes = {\n        &quot;multipart/form-data&quot;\n    }\n</code></pre>\n<p><code>consumes</code> defines the <em>request</em> media type, whereas <code>produces</code> defines the <em>response</em> media type.</p>\n"}],"owner":{"account_id":28409011,"reputation":25,"user_id":21732649,"display_name":"FischKopp"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76521210,"answer_count":1,"score":1,"last_activity_date":1687334831,"creation_date":1687195698,"question_id":76508870,"body_markdown":"I have a file upload in my java spring app. But it does not show a file upload in swagger. What can I do?\r\n\r\nI tried this and the one in the comment below..\r\n\r\n```java\r\n@RequestMapping(\r\n    value = &quot;/add&quot;,\r\n    method = POST,\r\n    produces = {\r\n        &quot;multipart/form-data&quot;\r\n    }\r\n)\r\npublic void addFile(@RequestParam(&quot;file&quot;) MultipartFile file) throws ServerException, InsufficientDataException, ErrorResponseException, IOException, NoSuchAlgorithmException, InvalidKeyException, InvalidResponseException, XmlParserException, InternalException {\r\n        fileservice.AddAttachment(file);\r\n}\r\n```","title":"Java Spring Swagger file upload","body":"<p>I have a file upload in my java spring app. But it does not show a file upload in swagger. What can I do?</p>\n<p>I tried this and the one in the comment below..</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RequestMapping(\n    value = &quot;/add&quot;,\n    method = POST,\n    produces = {\n        &quot;multipart/form-data&quot;\n    }\n)\npublic void addFile(@RequestParam(&quot;file&quot;) MultipartFile file) throws ServerException, InsufficientDataException, ErrorResponseException, IOException, NoSuchAlgorithmException, InvalidKeyException, InvalidResponseException, XmlParserException, InternalException {\n        fileservice.AddAttachment(file);\n}\n</code></pre>\n"},{"tags":["java","velocity","getter-setter","apache-velocity"],"owner":{"account_id":15065077,"reputation":67,"user_id":10872496,"display_name":"MrMyth"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687334617,"creation_date":1687334617,"question_id":76521196,"body_markdown":"I am trying to create custom Getters using Velocity Template that are annotated with a `@Generated` annotation.\r\n\r\nMy current template looks like this:\r\n```java\r\n#if($field.recordComponent)\r\n@Generated\r\npublic ${field.type} ${field.name}() {\r\nreturn this.${field.name};\r\n}\r\n#else\r\n    #set($getterName = $StringUtil.capitalizeWithJavaBeanConvention($field.name))\r\n    #if($field.boolean)\r\n        #set($getterPrefix = &quot;is&quot;)\r\n    #else\r\n        #set($getterPrefix = &quot;get&quot;)\r\n    #end\r\n@Generated\r\npublic ${field.type} ${getterPrefix}${getterName}() {\r\nreturn this.${field.name};\r\n}\r\n#end\r\n```\r\n\r\nNow without the whole conditional part, e.g. setting `getterPrefix` just to the boolean value of `field.boolean`, it assigns true/false to the variable correctly, and also generates the code snippet.\r\n\r\nHowever, once I try to add the conditional elements with #if, #else, #end as seen in my code above, it breaks and just shows the  following error popup: &lt;br&gt;\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/QAYgc.png\r\n\r\nIf you have any suggestions or idea on why that might be, or how I could generally improve my VT, please feel free to respond!\r\n\r\nThanks in advance!","title":"Why does my Velocity Template conditional assignment not work properly?","body":"<p>I am trying to create custom Getters using Velocity Template that are annotated with a <code>@Generated</code> annotation.</p>\n<p>My current template looks like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>#if($field.recordComponent)\n@Generated\npublic ${field.type} ${field.name}() {\nreturn this.${field.name};\n}\n#else\n    #set($getterName = $StringUtil.capitalizeWithJavaBeanConvention($field.name))\n    #if($field.boolean)\n        #set($getterPrefix = &quot;is&quot;)\n    #else\n        #set($getterPrefix = &quot;get&quot;)\n    #end\n@Generated\npublic ${field.type} ${getterPrefix}${getterName}() {\nreturn this.${field.name};\n}\n#end\n</code></pre>\n<p>Now without the whole conditional part, e.g. setting <code>getterPrefix</code> just to the boolean value of <code>field.boolean</code>, it assigns true/false to the variable correctly, and also generates the code snippet.</p>\n<p>However, once I try to add the conditional elements with #if, #else, #end as seen in my code above, it breaks and just shows the  following error popup: <br>\n<a href=\"https://i.stack.imgur.com/QAYgc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QAYgc.png\" alt=\"enter image description here\" /></a></p>\n<p>If you have any suggestions or idea on why that might be, or how I could generally improve my VT, please feel free to respond!</p>\n<p>Thanks in advance!</p>\n"},{"tags":["java","junit"],"comments":[{"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"score":0,"creation_date":1687282175,"post_id":76517117,"comment_id":134913832,"body_markdown":"Why would you want to mock it? It&#39;s part of the class you&#39;re testing.","body":"Why would you want to mock it? It&#39;s part of the class you&#39;re testing."}],"answers":[{"tags":[],"owner":{"account_id":204659,"reputation":37559,"user_id":453005,"accept_rate":100,"display_name":"DwB"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687283051,"creation_date":1687283051,"answer_id":76517239,"question_id":76517117,"body_markdown":"I have never figured out how to mock super;\r\nI&#39;m not saying that it is impossible,\r\njust that I have never done it.\r\n\r\nInstead,\r\nI identify the dependencies of the super and mock those.\r\nFor example,\r\nin your case you might want to mock the repository from which the UserForUUID reads (assuming that it reads from a repository).","title":"Mocking super return value in JUnit test","body":"<p>I have never figured out how to mock super;\nI'm not saying that it is impossible,\njust that I have never done it.</p>\n<p>Instead,\nI identify the dependencies of the super and mock those.\nFor example,\nin your case you might want to mock the repository from which the UserForUUID reads (assuming that it reads from a repository).</p>\n"},{"tags":[],"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1687334470,"creation_date":1687334470,"answer_id":76521183,"question_id":76517117,"body_markdown":"This is amongst the reasons why you should [favor composition over inheritance](https://en.wikipedia.org/wiki/Composition_over_inheritance). The way you design it, you _shouldn&#39;t_ mock the super call because it&#39;s part of the tested class&#39; behavior.\r\n\r\nRather than extending the existing user service, use it as a data source, then you can mock it.\r\n\r\nAs in\r\n\r\n```\r\npublic class CustomerUserService implements SlpUserService {\r\n  private final SlpUserService sourceService;\r\n  public CustomerUserService(SlpUserService source) {\r\n    sourceService = source; // rather than super(source)\r\n  }\r\n\r\n  @Override\r\n  public User getUserForID(final String userId) {\r\n    User user = sourceService.getUserForUID(userId);\r\n    // work with user\r\n  }\r\n}\r\n```\r\n\r\nThen you can mock the `DefaultUserService` easily - in fact, you can pass in any `SlpUserService` implementation, making it more flexible..\r\n\r\nYou can of course always overengineer and also extract the &quot;work with user object&quot; part.\r\n\r\n```\r\nclass UserProcessor implements SlpUserService {\r\n  private final SlpUserService sourceService;\r\n  private final Consumer&lt;User&gt; processor;\r\n\r\n  // constructor tbd\r\n  @Override\r\n  public User getUserForID(final String userId) {\r\n    User user = sourceService.getUserForUID(userId);\r\n    processor.accept(user);\r\n    return user;\r\n  }\r\n}\r\n```\r\n\r\nThen you only need to verify that 1. the passed in user service is used as a data source and 2. the user it provides is passed to the consumer for processing after returning it. This way, you can unit test the concrete user service and actual processing part separately.","title":"Mocking super return value in JUnit test","body":"<p>This is amongst the reasons why you should <a href=\"https://en.wikipedia.org/wiki/Composition_over_inheritance\" rel=\"nofollow noreferrer\">favor composition over inheritance</a>. The way you design it, you <em>shouldn't</em> mock the super call because it's part of the tested class' behavior.</p>\n<p>Rather than extending the existing user service, use it as a data source, then you can mock it.</p>\n<p>As in</p>\n<pre><code>public class CustomerUserService implements SlpUserService {\n  private final SlpUserService sourceService;\n  public CustomerUserService(SlpUserService source) {\n    sourceService = source; // rather than super(source)\n  }\n\n  @Override\n  public User getUserForID(final String userId) {\n    User user = sourceService.getUserForUID(userId);\n    // work with user\n  }\n}\n</code></pre>\n<p>Then you can mock the <code>DefaultUserService</code> easily - in fact, you can pass in any <code>SlpUserService</code> implementation, making it more flexible..</p>\n<p>You can of course always overengineer and also extract the &quot;work with user object&quot; part.</p>\n<pre><code>class UserProcessor implements SlpUserService {\n  private final SlpUserService sourceService;\n  private final Consumer&lt;User&gt; processor;\n\n  // constructor tbd\n  @Override\n  public User getUserForID(final String userId) {\n    User user = sourceService.getUserForUID(userId);\n    processor.accept(user);\n    return user;\n  }\n}\n</code></pre>\n<p>Then you only need to verify that 1. the passed in user service is used as a data source and 2. the user it provides is passed to the consumer for processing after returning it. This way, you can unit test the concrete user service and actual processing part separately.</p>\n"}],"owner":{"account_id":28860220,"reputation":7,"user_id":22104184,"display_name":"Joel"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":78,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1687334470,"creation_date":1687282060,"question_id":76517117,"body_markdown":"I am extending a class and overriding a method. Now I am trying to create Junit tests for the\r\n   CustomerUserService class , here is the code\r\n```\r\npublic class CustomerUserService extends DefaultUserService implements SlpUserService {\r\n\r\n    @Override\r\n    public User getUserForID(final String userId) {\r\n\r\n        User user = super.getUserForUID(userId);\r\n      \r\n\r\n        //work with user object\r\n\r\n```\r\nHow can I mock the return value of  super.getUserForUID(userId); ?\r\n\r\nI want to test the logic in the CustomerUserService#getUserForID and I am trying to mock the  super.getUserForUID(userId); call to return me some User object , however it always calls the real super method and executes the logic there.\r\n\r\nHow can I mock the return value of  super.getUserForUID(userId); ?\r\n\r\nI have declared in my Junit test CustomerUserService to be spy as :\r\n```\r\n    @Spy\r\n    private CustomerUserService customerUserService;\r\n\r\n```","title":"Mocking super return value in JUnit test","body":"<p>I am extending a class and overriding a method. Now I am trying to create Junit tests for the\nCustomerUserService class , here is the code</p>\n<pre><code>public class CustomerUserService extends DefaultUserService implements SlpUserService {\n\n    @Override\n    public User getUserForID(final String userId) {\n\n        User user = super.getUserForUID(userId);\n      \n\n        //work with user object\n\n</code></pre>\n<p>How can I mock the return value of  super.getUserForUID(userId); ?</p>\n<p>I want to test the logic in the CustomerUserService#getUserForID and I am trying to mock the  super.getUserForUID(userId); call to return me some User object , however it always calls the real super method and executes the logic there.</p>\n<p>How can I mock the return value of  super.getUserForUID(userId); ?</p>\n<p>I have declared in my Junit test CustomerUserService to be spy as :</p>\n<pre><code>    @Spy\n    private CustomerUserService customerUserService;\n\n</code></pre>\n"},{"tags":["java","netbeans"],"comments":[{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":1,"creation_date":1687312175,"post_id":76519072,"comment_id":134917727,"body_markdown":"You need to provide far more information, and as it stands your question cannot be answered. See [How do I ask a good question?](https://stackoverflow.com/help/how-to-ask) for general guidelines on improving your question. The biggest single improvement to your question would be to fully detail the steps someone else would have to follow to attempt to replicate your problem.","body":"You need to provide far more information, and as it stands your question cannot be answered. See <a href=\"https://stackoverflow.com/help/how-to-ask\">How do I ask a good question?</a> for general guidelines on improving your question. The biggest single improvement to your question would be to fully detail the steps someone else would have to follow to attempt to replicate your problem."}],"answers":[{"tags":[],"owner":{"account_id":6874,"reputation":2729,"user_id":11699,"accept_rate":71,"display_name":"Michael Bar-Sinai"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687334024,"creation_date":1687334024,"answer_id":76521132,"question_id":76519072,"body_markdown":"The &quot;Run&quot; button is for running the main project (you can define a project as the main one by right-clicking it in the projects tab and selecting &quot;Set as Main Project&quot; from the popup menu).\r\n\r\nTo run a file, select one of these options:\r\n\r\n1. Go to the Run menu, and select &quot;Run File&quot;; or\r\n2. Right click the file in the project pane, and select &quot;run file&quot; from the popup menu.\r\n\r\nNote that the file has to be runnable (i.e. have a class that has a `public static void main(String args[])` method defined).\r\n","title":"Apache NetBeans IDE 18 run project button not functioning","body":"<p>The &quot;Run&quot; button is for running the main project (you can define a project as the main one by right-clicking it in the projects tab and selecting &quot;Set as Main Project&quot; from the popup menu).</p>\n<p>To run a file, select one of these options:</p>\n<ol>\n<li>Go to the Run menu, and select &quot;Run File&quot;; or</li>\n<li>Right click the file in the project pane, and select &quot;run file&quot; from the popup menu.</li>\n</ol>\n<p>Note that the file has to be runnable (i.e. have a class that has a <code>public static void main(String args[])</code> method defined).</p>\n"}],"owner":{"account_id":20676140,"reputation":1,"user_id":22105328,"display_name":"bfofof"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":191,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1687334024,"creation_date":1687305193,"question_id":76519072,"body_markdown":"I am trying to run a file but not matter what I do, I can not even run it. I&#39;ve tried creating new files and adding content there, but no luck. Is there something wrong with my Netbeans? This is what it looks like:\r\n\r\n[The Run Project button is greyed out](https://i.stack.imgur.com/OcoFb.png)\r\n\r\nI tried searching online for an answer, but I could find nothing. I tried restarting the program, but no such luck.","title":"Apache NetBeans IDE 18 run project button not functioning","body":"<p>I am trying to run a file but not matter what I do, I can not even run it. I've tried creating new files and adding content there, but no luck. Is there something wrong with my Netbeans? This is what it looks like:</p>\n<p><a href=\"https://i.stack.imgur.com/OcoFb.png\" rel=\"nofollow noreferrer\">The Run Project button is greyed out</a></p>\n<p>I tried searching online for an answer, but I could find nothing. I tried restarting the program, but no such luck.</p>\n"},{"tags":["java","spring-jdbc","jdbctemplate","db2-9.7"],"comments":[{"owner":{"account_id":3493556,"reputation":4931,"user_id":2922515,"accept_rate":70,"display_name":"Vipin"},"score":0,"creation_date":1462649775,"post_id":37091599,"comment_id":61729398,"body_markdown":"@tamasrev The question you provided says it doesn&#39;t commit, I am saying it commits before even I expect","body":"@tamasrev The question you provided says it doesn&#39;t commit, I am saying it commits before even I expect"},{"owner":{"account_id":63444,"reputation":7018,"user_id":187808,"accept_rate":100,"display_name":"Tamas Rev"},"score":0,"creation_date":1462649854,"post_id":37091599,"comment_id":61729423,"body_markdown":"Oops,  I judged superficially. Sorry, removed the flag.","body":"Oops,  I judged superficially. Sorry, removed the flag."},{"owner":{"account_id":3493556,"reputation":4931,"user_id":2922515,"accept_rate":70,"display_name":"Vipin"},"score":0,"creation_date":1462650200,"post_id":37091599,"comment_id":61729539,"body_markdown":"If I have to apply transactions then what special batch update is doing ? I can do that in single update as well.","body":"If I have to apply transactions then what special batch update is doing ? I can do that in single update as well."},{"owner":{"display_name":"user330315"},"score":0,"creation_date":1462788664,"post_id":37091599,"comment_id":61767414,"body_markdown":"Which DBMS are you using? As you can see an increase in the row count it means that the batches do get committed otherwise a `select count(*)` wouldn&#39;t show any changes (or your DBMS doesn&#39;t support transactions)","body":"Which DBMS are you using? As you can see an increase in the row count it means that the batches do get committed otherwise a <code>select count(*)</code> wouldn&#39;t show any changes (or your DBMS doesn&#39;t support transactions)"},{"owner":{"account_id":3493556,"reputation":4931,"user_id":2922515,"accept_rate":70,"display_name":"Vipin"},"score":0,"creation_date":1462789520,"post_id":37091599,"comment_id":61768003,"body_markdown":"@a_horse_with_no_name dbms is db2 9.7, yes batches get committed. For performance point of view i want to my program to interact with db only once. Send data in one shot, commit  in one shot.","body":"@a_horse_with_no_name dbms is db2 9.7, yes batches get committed. For performance point of view i want to my program to interact with db only once. Send data in one shot, commit  in one shot."}],"answers":[{"comments":[{"owner":{"account_id":3493556,"reputation":4931,"user_id":2922515,"accept_rate":70,"display_name":"Vipin"},"score":0,"creation_date":1463679398,"post_id":37287832,"comment_id":62179286,"body_markdown":"jdbcTemplate.batchupdate usages similar code what you provided. I think It can not improve performance.","body":"jdbcTemplate.batchupdate usages similar code what you provided. I think It can not improve performance."}],"tags":[],"owner":{"account_id":3058999,"reputation":133,"user_id":2592089,"accept_rate":100,"display_name":"techi"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1463527935,"creation_date":1463527935,"answer_id":37287832,"question_id":37091599,"body_markdown":"How about the below method? specify nUpdates =10,000 in your case. I have not tried testing this.please ignore my answer if it does not work.\r\n\r\n    // the batch size is set in the BatchPreparedStatementSetter, the number of rows we want to process is equal to the nbUpdates parameter\r\n    \tpublic int[] batchUpdate(String sql, final long nbUpdates, final BatchPreparedStatementSetter pss) throws DataAccessException {\r\n    \t\tif (logger.isDebugEnabled()) {\r\n    \t\t\tlogger.debug(&quot;Executing SQL batch update [&quot; + sql + &quot;]&quot;);\r\n    \t\t}\r\n     \r\n    \t\treturn (int[]) execute(sql, new PreparedStatementCallback() {\r\n    \t\t\tpublic Object doInPreparedStatement(PreparedStatement ps) throws SQLException {\r\n    \t\t\t\ttry {\r\n    \t\t\t\t\tint batchSize = pss.getBatchSize();\r\n    \t\t\t\t\tInterruptibleBatchPreparedStatementSetter ipss = (pss instanceof InterruptibleBatchPreparedStatementSetter ? (InterruptibleBatchPreparedStatementSetter) pss\r\n    \t\t\t\t\t\t\t: null);\r\n    \t\t\t\t\tif (JdbcUtils.supportsBatchUpdates(ps.getConnection())) {\r\n    \t\t\t\t\t\tList&lt;Integer&gt; rowsAffected = new ArrayList&lt;Integer&gt;();\r\n    \t\t\t\t\t\tfor (int i = 1; i &lt;= nbUpdates; i++) {\r\n    \t\t\t\t\t\t\tpss.setValues(ps, i - 1);\r\n    \t\t\t\t\t\t\tif (ipss != null &amp;&amp; ipss.isBatchExhausted(i - 1)) {\r\n    \t\t\t\t\t\t\t\tif (logger.isDebugEnabled()) {\r\n    \t\t\t\t\t\t\t\t\tint batchIdx = (i % batchSize == 0) ? i / batchSize : (i / batchSize) + 1;\r\n    \t\t\t\t\t\t\t\t\tlogger.debug(&quot;Batch exhausted - Sending last SQL batch update #&quot; + batchIdx);\r\n    \t\t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t\t\tint[] res = ps.executeBatch();\r\n    \t\t\t\t\t\t\t\tfor (int j = 0; j &lt; res.length; j++) {\r\n    \t\t\t\t\t\t\t\t\trowsAffected.add(res[j]);\r\n    \t\t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t\t\tbreak;\r\n    \t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t\tps.addBatch();\r\n    \t\t\t\t\t\t\tif (i % batchSize == 0 || i == nbUpdates) {\r\n    \t\t\t\t\t\t\t\tif (logger.isDebugEnabled()) {\r\n    \t\t\t\t\t\t\t\t\tint batchIdx = (i % batchSize == 0) ? i / batchSize : (i / batchSize) + 1;\r\n    \t\t\t\t\t\t\t\t\tlogger.debug(&quot;Sending SQL batch update #&quot; + batchIdx);\r\n    \t\t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t\t\tint[] res = ps.executeBatch();\r\n    \t\t\t\t\t\t\t\tfor (int j = 0; j &lt; res.length; j++) {\r\n    \t\t\t\t\t\t\t\t\trowsAffected.add(res[j]);\r\n    \t\t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t}\r\n    \t\t\t\t\t\tint[] result = new int[rowsAffected.size()];\r\n    \t\t\t\t\t\tfor (int i = 0; i &lt; result.length; i++) {\r\n    \t\t\t\t\t\t\tresult[i] = rowsAffected.get(i).intValue();\r\n    \t\t\t\t\t\t}\r\n    \t\t\t\t\t\treturn result;\r\n    \t\t\t\t\t} else {\r\n    \t\t\t\t\t\tList&lt;Integer&gt; rowsAffected = new ArrayList&lt;Integer&gt;();\r\n    \t\t\t\t\t\tfor (int i = 0; i &lt; nbUpdates; i++) {\r\n    \t\t\t\t\t\t\tpss.setValues(ps, i);\r\n    \t\t\t\t\t\t\tif (ipss != null &amp;&amp; ipss.isBatchExhausted(i)) {\r\n    \t\t\t\t\t\t\t\tbreak;\r\n    \t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t\trowsAffected.add(ps.executeUpdate());\r\n    \t\t\t\t\t\t}\r\n    \t\t\t\t\t\tint[] rowsAffectedArray = new int[rowsAffected.size()];\r\n    \t\t\t\t\t\tfor (int i = 0; i &lt; rowsAffectedArray.length; i++) {\r\n    \t\t\t\t\t\t\trowsAffectedArray[i] = rowsAffected.get(i);\r\n    \t\t\t\t\t\t}\r\n    \t\t\t\t\t\treturn rowsAffectedArray;\r\n    \t\t\t\t\t}\r\n    \t\t\t\t} finally {\r\n    \t\t\t\t\tif (pss instanceof ParameterDisposer) {\r\n    \t\t\t\t\t\t((ParameterDisposer) pss).cleanupParameters();\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t});\r\n    \t}","title":"Spring jdbcTemaplate how to send complete batch size to DB2 server in one shot?","body":"<p>How about the below method? specify nUpdates =10,000 in your case. I have not tried testing this.please ignore my answer if it does not work.</p>\n\n<pre><code>// the batch size is set in the BatchPreparedStatementSetter, the number of rows we want to process is equal to the nbUpdates parameter\n    public int[] batchUpdate(String sql, final long nbUpdates, final BatchPreparedStatementSetter pss) throws DataAccessException {\n        if (logger.isDebugEnabled()) {\n            logger.debug(\"Executing SQL batch update [\" + sql + \"]\");\n        }\n\n        return (int[]) execute(sql, new PreparedStatementCallback() {\n            public Object doInPreparedStatement(PreparedStatement ps) throws SQLException {\n                try {\n                    int batchSize = pss.getBatchSize();\n                    InterruptibleBatchPreparedStatementSetter ipss = (pss instanceof InterruptibleBatchPreparedStatementSetter ? (InterruptibleBatchPreparedStatementSetter) pss\n                            : null);\n                    if (JdbcUtils.supportsBatchUpdates(ps.getConnection())) {\n                        List&lt;Integer&gt; rowsAffected = new ArrayList&lt;Integer&gt;();\n                        for (int i = 1; i &lt;= nbUpdates; i++) {\n                            pss.setValues(ps, i - 1);\n                            if (ipss != null &amp;&amp; ipss.isBatchExhausted(i - 1)) {\n                                if (logger.isDebugEnabled()) {\n                                    int batchIdx = (i % batchSize == 0) ? i / batchSize : (i / batchSize) + 1;\n                                    logger.debug(\"Batch exhausted - Sending last SQL batch update #\" + batchIdx);\n                                }\n                                int[] res = ps.executeBatch();\n                                for (int j = 0; j &lt; res.length; j++) {\n                                    rowsAffected.add(res[j]);\n                                }\n                                break;\n                            }\n                            ps.addBatch();\n                            if (i % batchSize == 0 || i == nbUpdates) {\n                                if (logger.isDebugEnabled()) {\n                                    int batchIdx = (i % batchSize == 0) ? i / batchSize : (i / batchSize) + 1;\n                                    logger.debug(\"Sending SQL batch update #\" + batchIdx);\n                                }\n                                int[] res = ps.executeBatch();\n                                for (int j = 0; j &lt; res.length; j++) {\n                                    rowsAffected.add(res[j]);\n                                }\n                            }\n                        }\n                        int[] result = new int[rowsAffected.size()];\n                        for (int i = 0; i &lt; result.length; i++) {\n                            result[i] = rowsAffected.get(i).intValue();\n                        }\n                        return result;\n                    } else {\n                        List&lt;Integer&gt; rowsAffected = new ArrayList&lt;Integer&gt;();\n                        for (int i = 0; i &lt; nbUpdates; i++) {\n                            pss.setValues(ps, i);\n                            if (ipss != null &amp;&amp; ipss.isBatchExhausted(i)) {\n                                break;\n                            }\n                            rowsAffected.add(ps.executeUpdate());\n                        }\n                        int[] rowsAffectedArray = new int[rowsAffected.size()];\n                        for (int i = 0; i &lt; rowsAffectedArray.length; i++) {\n                            rowsAffectedArray[i] = rowsAffected.get(i);\n                        }\n                        return rowsAffectedArray;\n                    }\n                } finally {\n                    if (pss instanceof ParameterDisposer) {\n                        ((ParameterDisposer) pss).cleanupParameters();\n                    }\n                }\n            }\n        });\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3171905,"reputation":10222,"user_id":2680640,"display_name":"sendon1982"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687333421,"creation_date":1687333421,"answer_id":76521039,"question_id":37091599,"body_markdown":"Maybe try this set even though I only see it compatible with MySQL\r\nAnd also upgrade your DB2 jdbc driver version\r\n\r\n```\r\nspring.datasource.hikari.data-source-properties.useConfigs=maxPerformance\r\nspring.datasource.hikari.data-source-properties.rewriteBatchedStatements=true\r\n```\r\n\r\nAnother way I can think is to use `CompletableFutuere` and submit multiple batch update together.","title":"Spring jdbcTemaplate how to send complete batch size to DB2 server in one shot?","body":"<p>Maybe try this set even though I only see it compatible with MySQL\nAnd also upgrade your DB2 jdbc driver version</p>\n<pre><code>spring.datasource.hikari.data-source-properties.useConfigs=maxPerformance\nspring.datasource.hikari.data-source-properties.rewriteBatchedStatements=true\n</code></pre>\n<p>Another way I can think is to use <code>CompletableFutuere</code> and submit multiple batch update together.</p>\n"}],"owner":{"account_id":3493556,"reputation":4931,"user_id":2922515,"accept_rate":70,"display_name":"Vipin"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1083,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"answer_count":2,"score":13,"last_activity_date":1687333421,"creation_date":1462642146,"question_id":37091599,"body_markdown":"While jdbcTemplate.batchUpdate(...) is running I can see DB row count is increased gradually(by running `count(*)` in the table), initially 2k then 3k and goes till 10k. 2k and 3k are not exact numbers sometimes I get 235 and then 4567. \r\n\r\nI was expecting 10 k rows (batch size) to be committed in one shot. In my understanding, if initially, I get row count 0 then next row count should be 10k. \r\nI don&#39;t want one by one insert for performance reason that&#39;s why used batch update feature and seems it also doesn&#39;t commit all in one shot.\r\n\r\n**I want to send data(10k rows) to DB server only once for my batch size.** for this is there anything I should specify in the configuration?\r\n\r\nBelow is the way I am writing `jdbcTemplate` batch update batch size is 10k.\r\n\r\n\r\n    public void insertRows(...) { \r\n        ... \r\n        jdbcTemplate.batchUpdate(query, new BatchPreparedStatementSetter(){\r\n        @Override public void\r\n    \r\n        setValues(PreparedStatement ps, int i) throws SQLException {\r\n            ... \r\n        }\r\n    \r\n        @Override public int getBatchSize() { \r\n            if(data == null){ \r\n                return 0; \r\n            }\r\n            return data.size(); \r\n        }\r\n       }); \r\n    }\r\n\r\n\r\n\r\nEdit: Added @Transactional to isertRows method still I can see the same behavior.\r\nusing Transnational it commits after 10k rows, but when I see count using with UR (select count(*) from mytable with ur) it shows data being updated gradually (2k 4k so on till 10k). That means data goes to a server in chunks (probably one bye one). How can i send everything in one shot. [This question][1] suggests it is achieved using rewriteBatchedStatements in mysql, is there anything similar we have in DB2 as well.\r\n\r\nI am using DataSource implementation [com.ibm.db2.jcc.DB2BaseDataSource][2]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/2993251/jdbc-batch-insert-performance\r\n  [2]: https://www.ibm.com/support/knowledgecenter/SSEPGG_9.5.0/com.ibm.db2.luw.apdv.java.doc/src/tpc/imjcc_r0052038.html","title":"Spring jdbcTemaplate how to send complete batch size to DB2 server in one shot?","body":"<p>While jdbcTemplate.batchUpdate(...) is running I can see DB row count is increased gradually(by running <code>count(*)</code> in the table), initially 2k then 3k and goes till 10k. 2k and 3k are not exact numbers sometimes I get 235 and then 4567. </p>\n\n<p>I was expecting 10 k rows (batch size) to be committed in one shot. In my understanding, if initially, I get row count 0 then next row count should be 10k. \nI don't want one by one insert for performance reason that's why used batch update feature and seems it also doesn't commit all in one shot.</p>\n\n<p><strong>I want to send data(10k rows) to DB server only once for my batch size.</strong> for this is there anything I should specify in the configuration?</p>\n\n<p>Below is the way I am writing <code>jdbcTemplate</code> batch update batch size is 10k.</p>\n\n<pre><code>public void insertRows(...) { \n    ... \n    jdbcTemplate.batchUpdate(query, new BatchPreparedStatementSetter(){\n    @Override public void\n\n    setValues(PreparedStatement ps, int i) throws SQLException {\n        ... \n    }\n\n    @Override public int getBatchSize() { \n        if(data == null){ \n            return 0; \n        }\n        return data.size(); \n    }\n   }); \n}\n</code></pre>\n\n<p>Edit: Added @Transactional to isertRows method still I can see the same behavior.\nusing Transnational it commits after 10k rows, but when I see count using with UR (select count(*) from mytable with ur) it shows data being updated gradually (2k 4k so on till 10k). That means data goes to a server in chunks (probably one bye one). How can i send everything in one shot. <a href=\"https://stackoverflow.com/questions/2993251/jdbc-batch-insert-performance\">This question</a> suggests it is achieved using rewriteBatchedStatements in mysql, is there anything similar we have in DB2 as well.</p>\n\n<p>I am using DataSource implementation <a href=\"https://www.ibm.com/support/knowledgecenter/SSEPGG_9.5.0/com.ibm.db2.luw.apdv.java.doc/src/tpc/imjcc_r0052038.html\" rel=\"nofollow noreferrer\">com.ibm.db2.jcc.DB2BaseDataSource</a></p>\n"},{"tags":["java","mysql","database-connection"],"comments":[{"owner":{"account_id":2123597,"reputation":9673,"user_id":1886334,"display_name":"Madhawa Priyashantha"},"score":0,"creation_date":1461523034,"post_id":36827222,"comment_id":61225519,"body_markdown":"http://stackoverflow.com/questions/2983248/com-mysql-jdbc-exceptions-jdbc4-communicationsexception-communications-link-fai","body":"<a href=\"http://stackoverflow.com/questions/2983248/com-mysql-jdbc-exceptions-jdbc4-communicationsexception-communications-link-fai\" title=\"com mysql jdbc exceptions jdbc4 communicationsexception communications link fai\">stackoverflow.com/questions/2983248/&hellip;</a>"},{"owner":{"account_id":8281875,"reputation":161,"user_id":6226300,"display_name":"Diet Cookiez"},"score":0,"creation_date":1461530752,"post_id":36827222,"comment_id":61228556,"body_markdown":"@FastSnail I tried all of BalusC tips, and still having the same problem.","body":"@FastSnail I tried all of BalusC tips, and still having the same problem."},{"owner":{"account_id":2123597,"reputation":9673,"user_id":1886334,"display_name":"Madhawa Priyashantha"},"score":0,"creation_date":1461550703,"post_id":36827222,"comment_id":61233181,"body_markdown":"read this one too http://stackoverflow.com/questions/6865538/solving-a-communications-link-failure-with-jdbc-and-mysql","body":"read this one too <a href=\"http://stackoverflow.com/questions/6865538/solving-a-communications-link-failure-with-jdbc-and-mysql\" title=\"solving a communications link failure with jdbc and mysql\">stackoverflow.com/questions/6865538/&hellip;</a>"},{"owner":{"account_id":4031836,"reputation":475,"user_id":3317620,"display_name":"Casper Lehmann"},"score":0,"creation_date":1633357402,"post_id":36827222,"comment_id":122731466,"body_markdown":"Linked answers do not cover the problem space. The error in the header is not mentioned in the provided links.\n\nIn my case, it turns out that my old `MySql5.7` wanted to use `TLSv1.1`, which has been blocked by the `OpenJDK v11.0.11` release. \nTo allow it again, you can remove `TLSv1.1` from the list at `jdk.tls.disabledAlgorithms` in `openjdk64-11.0.11/conf/security/java.security`.\n\nThis is one possible solution to one possible cause of this problem. Please reopen the question.","body":"Linked answers do not cover the problem space. The error in the header is not mentioned in the provided links.  In my case, it turns out that my old <code>MySql5.7</code> wanted to use <code>TLSv1.1</code>, which has been blocked by the <code>OpenJDK v11.0.11</code> release.  To allow it again, you can remove <code>TLSv1.1</code> from the list at <code>jdk.tls.disabledAlgorithms</code> in <code>openjdk64-11.0.11&#47;conf&#47;security&#47;java.security</code>.  This is one possible solution to one possible cause of this problem. Please reopen the question."},{"owner":{"account_id":10864525,"reputation":289,"user_id":7988380,"display_name":"Muhammad Hamed K"},"score":0,"creation_date":1637692908,"post_id":36827222,"comment_id":123893171,"body_markdown":"Please check your mysql server version. it should be compatible to mysql connector which version you mentioned in dependency of mysql connector in pom.xml","body":"Please check your mysql server version. it should be compatible to mysql connector which version you mentioned in dependency of mysql connector in pom.xml"},{"owner":{"account_id":5852063,"reputation":77,"user_id":4610476,"display_name":"Suresh Huse"},"score":0,"creation_date":1687849306,"post_id":36827222,"comment_id":134990192,"body_markdown":"I am facing the same issue. On running &quot;FLUSH HOSTS;&quot; command it again starts connecting the server. But I dont want FLUSH HOSTS; rather find the root cause. Any leads?","body":"I am facing the same issue. On running &quot;FLUSH HOSTS;&quot; command it again starts connecting the server. But I dont want FLUSH HOSTS; rather find the root cause. Any leads?"}],"answers":[{"comments":[{"owner":{"account_id":12236729,"reputation":440,"user_id":8930916,"display_name":"Chetan Oswal"},"score":0,"creation_date":1646729148,"post_id":41607041,"comment_id":126189779,"body_markdown":"At my end the status shows running, and still facing issue.","body":"At my end the status shows running, and still facing issue."}],"tags":[],"owner":{"account_id":2003177,"reputation":16895,"user_id":1793718,"accept_rate":69,"display_name":"Lucky"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1687332831,"creation_date":1484204685,"answer_id":41607041,"question_id":36827222,"body_markdown":"This problem occurs when the MySQL service is not running and you&#39;re trying to connect to the mysql database.\r\n\r\nTo resolve this in Windows,\r\n\r\n - Start &gt;&gt; type &#39;services&#39; and open it.\r\n\r\n - Find the MySQL service. Probably with name MySQLxx. xx being the version.        \r\n      &lt;sub&gt;eg. MySQL56, MySQL57 etc&lt;/sub&gt;\r\n\r\n - Start the service and now try the connection to database.","title":"MySQLNonTransientConnectionException: Could not create connection to database server. Attempted reconnect 3 times. Giving up","body":"<p>This problem occurs when the MySQL service is not running and you're trying to connect to the mysql database.</p>\n<p>To resolve this in Windows,</p>\n<ul>\n<li><p>Start &gt;&gt; type 'services' and open it.</p>\n</li>\n<li><p>Find the MySQL service. Probably with name MySQLxx. xx being the version.<br />\n<sub>eg. MySQL56, MySQL57 etc</sub></p>\n</li>\n<li><p>Start the service and now try the connection to database.</p>\n</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":10189447,"reputation":1,"user_id":7523362,"display_name":"Rahul Bachhav"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1486385937,"creation_date":1486385937,"answer_id":42068418,"question_id":36827222,"body_markdown":"You have to use database name instead of table name\r\n","title":"MySQLNonTransientConnectionException: Could not create connection to database server. Attempted reconnect 3 times. Giving up","body":"<p>You have to use database name instead of table name</p>\n"},{"tags":[],"owner":{"account_id":2338750,"reputation":2396,"user_id":2050511,"display_name":"Hemant Thorat"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1502265189,"creation_date":1502265189,"answer_id":45584702,"question_id":36827222,"body_markdown":"Increase Mysql max connection,\r\n\r\n    SET GLOBAL max_connections = 1500;  \r\n\r\nIf still getting an error then queries might be taking too long to respond.\r\n\r\nIn that case increase attempt while creating jdbc connection,\r\n\r\n    &amp;maxReconnects=XX ","title":"MySQLNonTransientConnectionException: Could not create connection to database server. Attempted reconnect 3 times. Giving up","body":"<p>Increase Mysql max connection,</p>\n\n<pre><code>SET GLOBAL max_connections = 1500;  \n</code></pre>\n\n<p>If still getting an error then queries might be taking too long to respond.</p>\n\n<p>In that case increase attempt while creating jdbc connection,</p>\n\n<pre><code>&amp;maxReconnects=XX \n</code></pre>\n"}],"owner":{"account_id":8281875,"reputation":161,"user_id":6226300,"display_name":"Diet Cookiez"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":115372,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"closed_date":1517751883,"answer_count":3,"score":16,"last_activity_date":1687332831,"creation_date":1461522702,"question_id":36827222,"body_markdown":"I&#39;m having trouble connecting to my database. I think there is a setting somewhere that I don&#39;t know about and needs to be changed. I have some really basic code here:\r\n\r\n    public static void main(String[] args)\r\n    {\r\n        try\r\n        {\r\n            Connection con = DriverManager.getConnection(&quot;jdbc:mysql://IP:3306/TABLENAME?autoReconnect=true&quot;,&quot;USERNAME&quot;, &quot;PASSWORD&quot;);\r\n            con.close();\r\n        }\r\n\r\n        catch(Exception e)\r\n        {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\nObviously with the login info. And it causes this error:\r\n\r\n    com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException: Could not create connection to database server. Attempted reconnect 3 times. Giving up.\r\n\r\n    Caused by: com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure\r\n\r\n    The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\r\n\r\n    Caused by: java.net.ConnectException: Connection refused\r\n\r\n I&#39;ve looked through about 10 different posts about the same problem and tried their solutions and still couldn&#39;t get it to work.","title":"MySQLNonTransientConnectionException: Could not create connection to database server. Attempted reconnect 3 times. Giving up","body":"<p>I'm having trouble connecting to my database. I think there is a setting somewhere that I don't know about and needs to be changed. I have some really basic code here:</p>\n\n<pre><code>public static void main(String[] args)\n{\n    try\n    {\n        Connection con = DriverManager.getConnection(\"jdbc:mysql://IP:3306/TABLENAME?autoReconnect=true\",\"USERNAME\", \"PASSWORD\");\n        con.close();\n    }\n\n    catch(Exception e)\n    {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n\n<p>Obviously with the login info. And it causes this error:</p>\n\n<pre><code>com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException: Could not create connection to database server. Attempted reconnect 3 times. Giving up.\n\nCaused by: com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure\n\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\n\nCaused by: java.net.ConnectException: Connection refused\n</code></pre>\n\n<p>I've looked through about 10 different posts about the same problem and tried their solutions and still couldn't get it to work.</p>\n"},{"tags":["java","scala","intellij-idea","jvm","spinalhdl"],"comments":[{"owner":{"account_id":17693330,"reputation":3781,"user_id":12844632,"display_name":"Egor Klepikov"},"score":0,"creation_date":1687334429,"post_id":76520958,"comment_id":134920570,"body_markdown":"Does it work if you build/run the project from the command line outside of the IDE? To better understand what causes the problem please upload a project sample at https://uploads.jetbrains.com and share the UploadID here","body":"Does it work if you build/run the project from the command line outside of the IDE? To better understand what causes the problem please upload a project sample at <a href=\"https://uploads.jetbrains.com\" rel=\"nofollow noreferrer\">uploads.jetbrains.com</a> and share the UploadID here"},{"owner":{"account_id":28856376,"reputation":11,"user_id":22101101,"display_name":"Johnhave"},"score":0,"creation_date":1687428593,"post_id":76520958,"comment_id":134936880,"body_markdown":"@Egor Klepikov: Thanks for reply. Running from the cmd is the same as IDE. The uploadID is 2023_06_22_qA3uoJmdcDpBECwyLQgBJU. By the way, JDK 17.07, scala 2.12.15, windows 10, sbt 1.5.5.","body":"@Egor Klepikov: Thanks for reply. Running from the cmd is the same as IDE. The uploadID is 2023_06_22_qA3uoJmdcDpBECwyLQgBJU. By the way, JDK 17.07, scala 2.12.15, windows 10, sbt 1.5.5."},{"owner":{"account_id":3538058,"reputation":5428,"user_id":2960034,"display_name":"y.bedrov"},"score":0,"creation_date":1687818234,"post_id":76520958,"comment_id":134987129,"body_markdown":"If you face the same issue running from command line then it&#39;s not related to IDE.","body":"If you face the same issue running from command line then it&#39;s not related to IDE."}],"owner":{"account_id":28856376,"reputation":11,"user_id":22101101,"display_name":"Johnhave"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1687332671,"creation_date":1687332671,"question_id":76520958,"body_markdown":"When I running a SpinalHDL simulation program, the process is done but never exit. That is, &quot;Process finished with exit code 0&quot; never showed up. I have to shutdown the IDEA to end the process. How is it?\r\n\r\n```\r\nimport spinal.core._\r\nimport spinal.sim._\r\nimport spinal.core.sim._\r\n\r\nimport scala.util.Random\r\n\r\n\r\n//MyTopLevel&#39;s testbench\r\nobject MyTopLevelSim {\r\n  def main(args: Array[String]) {\r\n    SimConfig.withWave.doSim(new MyTopLevel){dut =&gt;\r\n      //Fork a process to generate the reset and the clock on the dut\r\n      dut.clockDomain.forkStimulus(period = 10)\r\n\r\n      var modelState = 0\r\n      for(idx &lt;- 0 to 99){\r\n        //Drive the dut inputs with random values\r\n        dut.io.cond0 #= Random.nextBoolean()\r\n        dut.io.cond1 #= Random.nextBoolean()\r\n\r\n        //Wait a rising edge on the clock\r\n        dut.clockDomain.waitRisingEdge()\r\n\r\n        //Check that the dut values match with the reference model ones\r\n        val modelFlag = modelState == 0 || dut.io.cond1.toBoolean\r\n        assert(dut.io.state.toInt == modelState)\r\n        assert(dut.io.flag.toBoolean == modelFlag)\r\n\r\n        //Update the reference model value\r\n        if(dut.io.cond0.toBoolean) {\r\n          modelState = (modelState + 1) &amp; 0xFF\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\nBelows are the infomation in Console. The process is never ending...\r\n```\r\nConnected to the target VM, address: &#39;127.0.0.1:57888&#39;, transport: &#39;socket&#39;\r\n[Runtime] SpinalHDL v1.6.0    git head : 73c8d8e2b86b45646e9d0b2e729291f2b65e6be3\r\n[Runtime] JVM max memory : 4070.0MiB\r\n[Runtime] Current date : 2023.06.21 15:11:03\r\n[Progress] at 0.000 : Elaborate components\r\n[Progress] at 0.611 : Checks and transforms\r\n[Progress] at 0.685 : Generate Verilog\r\n[Done] at 0.755\r\n[Progress] Simulation workspace in C:\\Users\\xxx\\spinalhdl_home\\test_new\\.\\simWorkspace\\MyTopLevel\r\n[Progress] Verilator compilation started\r\n[Progress] Verilator compilation done in 4973.795 ms\r\n[Progress] Start MyTopLevel test simulation with seed 835369353\r\ndone1\r\n[Done] Simulation done in 20.747 ms\r\n\r\n\r\n```\r\n\r\n\r\nFind the problem in SpinalHDL simulation with verilator in my own PC, while in others&#39; PCs it is done well. How to end the process as a general program process?","title":"scala process never finishes in IDEA","body":"<p>When I running a SpinalHDL simulation program, the process is done but never exit. That is, &quot;Process finished with exit code 0&quot; never showed up. I have to shutdown the IDEA to end the process. How is it?</p>\n<pre><code>import spinal.core._\nimport spinal.sim._\nimport spinal.core.sim._\n\nimport scala.util.Random\n\n\n//MyTopLevel's testbench\nobject MyTopLevelSim {\n  def main(args: Array[String]) {\n    SimConfig.withWave.doSim(new MyTopLevel){dut =&gt;\n      //Fork a process to generate the reset and the clock on the dut\n      dut.clockDomain.forkStimulus(period = 10)\n\n      var modelState = 0\n      for(idx &lt;- 0 to 99){\n        //Drive the dut inputs with random values\n        dut.io.cond0 #= Random.nextBoolean()\n        dut.io.cond1 #= Random.nextBoolean()\n\n        //Wait a rising edge on the clock\n        dut.clockDomain.waitRisingEdge()\n\n        //Check that the dut values match with the reference model ones\n        val modelFlag = modelState == 0 || dut.io.cond1.toBoolean\n        assert(dut.io.state.toInt == modelState)\n        assert(dut.io.flag.toBoolean == modelFlag)\n\n        //Update the reference model value\n        if(dut.io.cond0.toBoolean) {\n          modelState = (modelState + 1) &amp; 0xFF\n        }\n      }\n    }\n  }\n}\n</code></pre>\n<p>Belows are the infomation in Console. The process is never ending...</p>\n<pre><code>Connected to the target VM, address: '127.0.0.1:57888', transport: 'socket'\n[Runtime] SpinalHDL v1.6.0    git head : 73c8d8e2b86b45646e9d0b2e729291f2b65e6be3\n[Runtime] JVM max memory : 4070.0MiB\n[Runtime] Current date : 2023.06.21 15:11:03\n[Progress] at 0.000 : Elaborate components\n[Progress] at 0.611 : Checks and transforms\n[Progress] at 0.685 : Generate Verilog\n[Done] at 0.755\n[Progress] Simulation workspace in C:\\Users\\xxx\\spinalhdl_home\\test_new\\.\\simWorkspace\\MyTopLevel\n[Progress] Verilator compilation started\n[Progress] Verilator compilation done in 4973.795 ms\n[Progress] Start MyTopLevel test simulation with seed 835369353\ndone1\n[Done] Simulation done in 20.747 ms\n\n\n</code></pre>\n<p>Find the problem in SpinalHDL simulation with verilator in my own PC, while in others' PCs it is done well. How to end the process as a general program process?</p>\n"},{"tags":["java","maven","sonarqube","code-coverage","junit4"],"comments":[{"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1687242677,"post_id":76511414,"comment_id":134905081,"body_markdown":"Your settings looks quite different to these found on the net: https://www.baeldung.com/sonarqube-jacoco-code-coverage","body":"Your settings looks quite different to these found on the net: <a href=\"https://www.baeldung.com/sonarqube-jacoco-code-coverage\" rel=\"nofollow noreferrer\">baeldung.com/sonarqube-jacoco-code-coverage</a>"},{"owner":{"account_id":24655193,"reputation":54,"user_id":18551934,"display_name":"Nipuni Madanayake"},"score":0,"creation_date":1687262176,"post_id":76511414,"comment_id":134909149,"body_markdown":"@Mar-Z I tried as that blog but it didn&#39;t solved the issue. But I found the solution. I needed to add some more plugins. I will add my solution as an answer. Thank you very much.","body":"@Mar-Z I tried as that blog but it didn&#39;t solved the issue. But I found the solution. I needed to add some more plugins. I will add my solution as an answer. Thank you very much."}],"answers":[{"tags":[],"owner":{"account_id":24655193,"reputation":54,"user_id":18551934,"display_name":"Nipuni Madanayake"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1687332559,"creation_date":1687332559,"answer_id":76520946,"question_id":76511414,"body_markdown":"I solved the issue.I added below properties to the `&lt;properties&gt;` section in pom file.\r\n\r\n    &lt;sonar.surefire.reportsPath&gt;${basedir}/target/surefire-reports&lt;/sonar.surefire.reportsPath&gt;\r\n            &lt;sonar.coverage.jacoco.xmlReportPaths&gt;${project.build.directory}/coverage-reports/jacoco-ut/jacoco.xml&lt;/sonar.coverage.jacoco.xmlReportPaths&gt;\r\n    \r\nThen added below profile to the pom file.\r\n\r\n    &lt;profiles&gt;\r\n            &lt;profile&gt;\r\n                &lt;id&gt;coverage&lt;/id&gt;\r\n                &lt;activation&gt;\r\n                    &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;\r\n                &lt;/activation&gt;\r\n                &lt;build&gt;\r\n                    &lt;plugins&gt;\r\n                        &lt;plugin&gt;\r\n                            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                            &lt;version&gt;3.0.0-M5&lt;/version&gt;\r\n                            &lt;configuration&gt;\r\n                                &lt;!--suppress UnresolvedMavenProperty --&gt;\r\n                                &lt;argLine&gt;${surefireArgLine}&lt;/argLine&gt;\r\n                            &lt;/configuration&gt;\r\n                        &lt;/plugin&gt;\r\n                        &lt;plugin&gt;\r\n                            &lt;groupId&gt;org.sonarsource.scanner.maven&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;sonar-maven-plugin&lt;/artifactId&gt;\r\n                            &lt;version&gt;3.8.0.2131&lt;/version&gt;\r\n                        &lt;/plugin&gt;\r\n                        &lt;plugin&gt;\r\n                            &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\r\n                            &lt;version&gt;0.8.8&lt;/version&gt;\r\n                            &lt;executions&gt;\r\n                                &lt;execution&gt;\r\n                                    &lt;id&gt;prepare-agent&lt;/id&gt;\r\n                                    &lt;goals&gt;\r\n                                        &lt;goal&gt;prepare-agent&lt;/goal&gt;\r\n                                    &lt;/goals&gt;\r\n                                    &lt;configuration&gt;\r\n                                        &lt;destFile&gt;${project.build.directory}/coverage-reports/jacoco-ut.exec&lt;/destFile&gt;\r\n                                        &lt;propertyName&gt;surefireArgLine&lt;/propertyName&gt;\r\n                                    &lt;/configuration&gt;\r\n                                &lt;/execution&gt;\r\n                                &lt;execution&gt;\r\n                                    &lt;id&gt;post-unit-test&lt;/id&gt;\r\n                                    &lt;phase&gt;test&lt;/phase&gt;\r\n                                    &lt;goals&gt;\r\n                                        &lt;goal&gt;report&lt;/goal&gt;\r\n                                    &lt;/goals&gt;\r\n                                    &lt;configuration&gt;\r\n                                        &lt;dataFile&gt;${project.build.directory}/coverage-reports/jacoco-ut.exec&lt;/dataFile&gt;\r\n                                        &lt;outputDirectory&gt;${project.build.directory}/coverage-reports/jacoco-ut&lt;/outputDirectory&gt;\r\n                                    &lt;/configuration&gt;\r\n                                &lt;/execution&gt;\r\n                            &lt;/executions&gt;\r\n                        &lt;/plugin&gt;\r\n                    &lt;/plugins&gt;\r\n                &lt;/build&gt;\r\n            &lt;/profile&gt;\r\n        &lt;/profiles&gt;\r\n\r\nThis generated jacoco-ut.exec and jacoco.xml. Then run `mvn clean verify sonar:sonar` in the terminal. This solved my issue.\r\n","title":"SonarQube Doesn&#39;t Display the Coverage","body":"<p>I solved the issue.I added below properties to the <code>&lt;properties&gt;</code> section in pom file.</p>\n<pre><code>&lt;sonar.surefire.reportsPath&gt;${basedir}/target/surefire-reports&lt;/sonar.surefire.reportsPath&gt;\n        &lt;sonar.coverage.jacoco.xmlReportPaths&gt;${project.build.directory}/coverage-reports/jacoco-ut/jacoco.xml&lt;/sonar.coverage.jacoco.xmlReportPaths&gt;\n</code></pre>\n<p>Then added below profile to the pom file.</p>\n<pre><code>&lt;profiles&gt;\n        &lt;profile&gt;\n            &lt;id&gt;coverage&lt;/id&gt;\n            &lt;activation&gt;\n                &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;\n            &lt;/activation&gt;\n            &lt;build&gt;\n                &lt;plugins&gt;\n                    &lt;plugin&gt;\n                        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                        &lt;version&gt;3.0.0-M5&lt;/version&gt;\n                        &lt;configuration&gt;\n                            &lt;!--suppress UnresolvedMavenProperty --&gt;\n                            &lt;argLine&gt;${surefireArgLine}&lt;/argLine&gt;\n                        &lt;/configuration&gt;\n                    &lt;/plugin&gt;\n                    &lt;plugin&gt;\n                        &lt;groupId&gt;org.sonarsource.scanner.maven&lt;/groupId&gt;\n                        &lt;artifactId&gt;sonar-maven-plugin&lt;/artifactId&gt;\n                        &lt;version&gt;3.8.0.2131&lt;/version&gt;\n                    &lt;/plugin&gt;\n                    &lt;plugin&gt;\n                        &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\n                        &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\n                        &lt;version&gt;0.8.8&lt;/version&gt;\n                        &lt;executions&gt;\n                            &lt;execution&gt;\n                                &lt;id&gt;prepare-agent&lt;/id&gt;\n                                &lt;goals&gt;\n                                    &lt;goal&gt;prepare-agent&lt;/goal&gt;\n                                &lt;/goals&gt;\n                                &lt;configuration&gt;\n                                    &lt;destFile&gt;${project.build.directory}/coverage-reports/jacoco-ut.exec&lt;/destFile&gt;\n                                    &lt;propertyName&gt;surefireArgLine&lt;/propertyName&gt;\n                                &lt;/configuration&gt;\n                            &lt;/execution&gt;\n                            &lt;execution&gt;\n                                &lt;id&gt;post-unit-test&lt;/id&gt;\n                                &lt;phase&gt;test&lt;/phase&gt;\n                                &lt;goals&gt;\n                                    &lt;goal&gt;report&lt;/goal&gt;\n                                &lt;/goals&gt;\n                                &lt;configuration&gt;\n                                    &lt;dataFile&gt;${project.build.directory}/coverage-reports/jacoco-ut.exec&lt;/dataFile&gt;\n                                    &lt;outputDirectory&gt;${project.build.directory}/coverage-reports/jacoco-ut&lt;/outputDirectory&gt;\n                                &lt;/configuration&gt;\n                            &lt;/execution&gt;\n                        &lt;/executions&gt;\n                    &lt;/plugin&gt;\n                &lt;/plugins&gt;\n            &lt;/build&gt;\n        &lt;/profile&gt;\n    &lt;/profiles&gt;\n</code></pre>\n<p>This generated jacoco-ut.exec and jacoco.xml. Then run <code>mvn clean verify sonar:sonar</code> in the terminal. This solved my issue.</p>\n"}],"owner":{"account_id":24655193,"reputation":54,"user_id":18551934,"display_name":"Nipuni Madanayake"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":163,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1687332559,"creation_date":1687235246,"question_id":76511414,"body_markdown":"I have a Java Maven project and I wrote unit tests using Junit. When I run Tests with coverage, IDE shows the percentage of coverage. But after integrate the project with SonarQube, it only shows the number of unit test cases and shows coverage as 0% in the sonarQube.\r\n\r\nBelow is a screenshot of SonarQube.\r\n\r\n[![Sonar Report](https://i.stack.imgur.com/fLuFW.png)](https://i.stack.imgur.com/fLuFW.png)\r\n\r\n\r\nSince I need to integrate the project with SonarQube, I added jacoco-maven plugin and maven-surefire plugin to the pom file. Below is my pom file.\r\n\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;....&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;groupId&gt;...&lt;/groupId&gt;\r\n    &lt;artifactId&gt;.....&lt;/artifactId&gt;\r\n    &lt;version&gt;0.0.1&lt;/version&gt;\r\n\r\n    &lt;dependencies&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\r\n            &lt;version&gt;2.20.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\r\n            &lt;version&gt;2.20.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.relevantcodes&lt;/groupId&gt;\r\n            &lt;artifactId&gt;extentreports&lt;/artifactId&gt;\r\n            &lt;version&gt;2.41.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.appium&lt;/groupId&gt;\r\n            &lt;artifactId&gt;java-client&lt;/artifactId&gt;\r\n            &lt;version&gt;8.3.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.rest-assured&lt;/groupId&gt;\r\n            &lt;artifactId&gt;rest-assured&lt;/artifactId&gt;\r\n            &lt;version&gt;5.3.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n            &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\r\n            &lt;version&gt;4.3.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\r\n            &lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\r\n            &lt;version&gt;5.2.3&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.googlecode.json-simple&lt;/groupId&gt;\r\n            &lt;artifactId&gt;json-simple&lt;/artifactId&gt;\r\n            &lt;version&gt;1.1.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;ru.yandex.qatools.ashot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;ashot&lt;/artifactId&gt;\r\n            &lt;version&gt;1.5.4&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;junit&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n            &lt;version&gt;4.13.1&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.mockito&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mockito-inline&lt;/artifactId&gt;\r\n            &lt;version&gt;4.10.0&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.powermock&lt;/groupId&gt;\r\n            &lt;artifactId&gt;powermock-api-mockito2&lt;/artifactId&gt;\r\n            &lt;version&gt;2.0.9&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.sonarsource.scanner.maven&lt;/groupId&gt;\r\n            &lt;artifactId&gt;sonar-maven-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;3.8.0.2131&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n    &lt;/dependencies&gt;\r\n    &lt;profiles&gt;\r\n        &lt;profile&gt;\r\n            &lt;id&gt;coverage&lt;/id&gt;\r\n            &lt;build&gt;\r\n                &lt;plugins&gt;\r\n                    &lt;plugin&gt;\r\n                        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                        &lt;version&gt;2.12.4&lt;/version&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;argLine&gt;-Xmx1024m -XX:MaxPermSize=256m&lt;/argLine&gt;\r\n                        &lt;/configuration&gt;\r\n\r\n                    &lt;/plugin&gt;\r\n                    &lt;plugin&gt;\r\n                        &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\r\n                        &lt;version&gt;0.8.8&lt;/version&gt;\r\n                        &lt;executions&gt;\r\n                            &lt;execution&gt;\r\n                                &lt;id&gt;prepare-agent&lt;/id&gt;\r\n                                &lt;goals&gt;\r\n                                    &lt;goal&gt;prepare-agent&lt;/goal&gt;\r\n                                &lt;/goals&gt;\r\n                            &lt;/execution&gt;\r\n\r\n                            &lt;execution&gt;\r\n                                &lt;id&gt;pre-unit-test&lt;/id&gt;\r\n                                &lt;goals&gt;\r\n                                    &lt;goal&gt;prepare-agent&lt;/goal&gt;\r\n                                &lt;/goals&gt;\r\n                                &lt;configuration&gt;\r\n                                    &lt;destFile&gt;${project.build.directory}/coverage-reports/jacoco-ut.exec&lt;/destFile&gt;\r\n                                    &lt;propertyName&gt;surefireArgLine&lt;/propertyName&gt;\r\n                                &lt;/configuration&gt;\r\n                            &lt;/execution&gt;\r\n\r\n                            &lt;execution&gt;\r\n                                &lt;id&gt;post-unit-test&lt;/id&gt;\r\n                                &lt;phase&gt;test&lt;/phase&gt;\r\n                                &lt;goals&gt;\r\n                                    &lt;goal&gt;report&lt;/goal&gt;\r\n                                &lt;/goals&gt;\r\n                                &lt;configuration&gt;\r\n                                    &lt;dataFile&gt;${project.build.directory}/coverage-reports/jacoco-ut.exec&lt;/dataFile&gt;\r\n                                    &lt;outputDirectory&gt;${project.reporting.outputDirectory}/jacoco-ut&lt;/outputDirectory&gt;\r\n                                &lt;/configuration&gt;\r\n                            &lt;/execution&gt;\r\n                        &lt;/executions&gt;\r\n                    &lt;/plugin&gt;\r\n\r\n                &lt;/plugins&gt;\r\n            &lt;/build&gt;\r\n        &lt;/profile&gt;\r\n    &lt;/profiles&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;8&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;8&lt;/maven.compiler.target&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;/properties&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\n\r\nWhen I run `mvn clean verify sonar:sonar` , It generates below files.\r\n\r\n[![generated folders](https://i.stack.imgur.com/EJPzj.png)](https://i.stack.imgur.com/EJPzj.png)\r\n\r\n\r\nInside of surefire-reports there are xml files for each test class. But in SonarQube it shows only the number of unit test cases and shows coverage as 0%. \r\n\r\nCan you help me to get the coverage on SonarQube?","title":"SonarQube Doesn&#39;t Display the Coverage","body":"<p>I have a Java Maven project and I wrote unit tests using Junit. When I run Tests with coverage, IDE shows the percentage of coverage. But after integrate the project with SonarQube, it only shows the number of unit test cases and shows coverage as 0% in the sonarQube.</p>\n<p>Below is a screenshot of SonarQube.</p>\n<p><a href=\"https://i.stack.imgur.com/fLuFW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fLuFW.png\" alt=\"Sonar Report\" /></a></p>\n<p>Since I need to integrate the project with SonarQube, I added jacoco-maven plugin and maven-surefire plugin to the pom file. Below is my pom file.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;....&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;...&lt;/groupId&gt;\n    &lt;artifactId&gt;.....&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1&lt;/version&gt;\n\n    &lt;dependencies&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\n            &lt;version&gt;2.20.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\n            &lt;version&gt;2.20.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.relevantcodes&lt;/groupId&gt;\n            &lt;artifactId&gt;extentreports&lt;/artifactId&gt;\n            &lt;version&gt;2.41.2&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.appium&lt;/groupId&gt;\n            &lt;artifactId&gt;java-client&lt;/artifactId&gt;\n            &lt;version&gt;8.3.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.rest-assured&lt;/groupId&gt;\n            &lt;artifactId&gt;rest-assured&lt;/artifactId&gt;\n            &lt;version&gt;5.3.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n            &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\n            &lt;version&gt;4.3.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\n            &lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\n            &lt;version&gt;5.2.3&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.googlecode.json-simple&lt;/groupId&gt;\n            &lt;artifactId&gt;json-simple&lt;/artifactId&gt;\n            &lt;version&gt;1.1.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;ru.yandex.qatools.ashot&lt;/groupId&gt;\n            &lt;artifactId&gt;ashot&lt;/artifactId&gt;\n            &lt;version&gt;1.5.4&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;version&gt;4.13.1&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n            &lt;artifactId&gt;mockito-inline&lt;/artifactId&gt;\n            &lt;version&gt;4.10.0&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.powermock&lt;/groupId&gt;\n            &lt;artifactId&gt;powermock-api-mockito2&lt;/artifactId&gt;\n            &lt;version&gt;2.0.9&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.sonarsource.scanner.maven&lt;/groupId&gt;\n            &lt;artifactId&gt;sonar-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.8.0.2131&lt;/version&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n    &lt;profiles&gt;\n        &lt;profile&gt;\n            &lt;id&gt;coverage&lt;/id&gt;\n            &lt;build&gt;\n                &lt;plugins&gt;\n                    &lt;plugin&gt;\n                        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                        &lt;version&gt;2.12.4&lt;/version&gt;\n                        &lt;configuration&gt;\n                            &lt;argLine&gt;-Xmx1024m -XX:MaxPermSize=256m&lt;/argLine&gt;\n                        &lt;/configuration&gt;\n\n                    &lt;/plugin&gt;\n                    &lt;plugin&gt;\n                        &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\n                        &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\n                        &lt;version&gt;0.8.8&lt;/version&gt;\n                        &lt;executions&gt;\n                            &lt;execution&gt;\n                                &lt;id&gt;prepare-agent&lt;/id&gt;\n                                &lt;goals&gt;\n                                    &lt;goal&gt;prepare-agent&lt;/goal&gt;\n                                &lt;/goals&gt;\n                            &lt;/execution&gt;\n\n                            &lt;execution&gt;\n                                &lt;id&gt;pre-unit-test&lt;/id&gt;\n                                &lt;goals&gt;\n                                    &lt;goal&gt;prepare-agent&lt;/goal&gt;\n                                &lt;/goals&gt;\n                                &lt;configuration&gt;\n                                    &lt;destFile&gt;${project.build.directory}/coverage-reports/jacoco-ut.exec&lt;/destFile&gt;\n                                    &lt;propertyName&gt;surefireArgLine&lt;/propertyName&gt;\n                                &lt;/configuration&gt;\n                            &lt;/execution&gt;\n\n                            &lt;execution&gt;\n                                &lt;id&gt;post-unit-test&lt;/id&gt;\n                                &lt;phase&gt;test&lt;/phase&gt;\n                                &lt;goals&gt;\n                                    &lt;goal&gt;report&lt;/goal&gt;\n                                &lt;/goals&gt;\n                                &lt;configuration&gt;\n                                    &lt;dataFile&gt;${project.build.directory}/coverage-reports/jacoco-ut.exec&lt;/dataFile&gt;\n                                    &lt;outputDirectory&gt;${project.reporting.outputDirectory}/jacoco-ut&lt;/outputDirectory&gt;\n                                &lt;/configuration&gt;\n                            &lt;/execution&gt;\n                        &lt;/executions&gt;\n                    &lt;/plugin&gt;\n\n                &lt;/plugins&gt;\n            &lt;/build&gt;\n        &lt;/profile&gt;\n    &lt;/profiles&gt;\n\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;8&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;8&lt;/maven.compiler.target&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>When I run <code>mvn clean verify sonar:sonar</code> , It generates below files.</p>\n<p><a href=\"https://i.stack.imgur.com/EJPzj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EJPzj.png\" alt=\"generated folders\" /></a></p>\n<p>Inside of surefire-reports there are xml files for each test class. But in SonarQube it shows only the number of unit test cases and shows coverage as 0%.</p>\n<p>Can you help me to get the coverage on SonarQube?</p>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":2,"creation_date":1684777618,"post_id":76307796,"comment_id":134563340,"body_markdown":"No, the answer you link is not &quot;for older versions of Spring Security&quot;. I suspect you have little knowledge of OAuth2 in general and of it&#39;s Spring implementations in particular. Maybe should you start with [my tutorials](https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials)?","body":"No, the answer you link is not &quot;for older versions of Spring Security&quot;. I suspect you have little knowledge of OAuth2 in general and of it&#39;s Spring implementations in particular. Maybe should you start with <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials\" rel=\"nofollow noreferrer\">my tutorials</a>?"},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":1,"creation_date":1684785841,"post_id":76307796,"comment_id":134564945,"body_markdown":"Does this answer your question? [Use Keycloak Spring Adapter with Spring Boot 3](https://stackoverflow.com/questions/74571191/use-keycloak-spring-adapter-with-spring-boot-3)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/74571191/use-keycloak-spring-adapter-with-spring-boot-3\">Use Keycloak Spring Adapter with Spring Boot 3</a>"}],"answers":[{"comments":[{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1684784951,"post_id":76308822,"comment_id":134564800,"body_markdown":"This only covers resource server case (REST API secured with access token). At some point you&#39;ll probably need to add authorities (Keycloak &quot;roles&quot;) mapping. Also, on a resource server, you&#39;d probably want to ensure that 401 is returned when Authorization is missing or invalid. Last, when disabling CSRF protection, you&#39;d probably ensure that sessions are disabled too (STATELESS session management). To make it short, [this other answer](https://stackoverflow.com/a/74572732/619830) is much more complete.","body":"This only covers resource server case (REST API secured with access token). At some point you&#39;ll probably need to add authorities (Keycloak &quot;roles&quot;) mapping. Also, on a resource server, you&#39;d probably want to ensure that 401 is returned when Authorization is missing or invalid. Last, when disabling CSRF protection, you&#39;d probably ensure that sessions are disabled too (STATELESS session management). To make it short, <a href=\"https://stackoverflow.com/a/74572732/619830\">this other answer</a> is much more complete."},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1684824450,"post_id":76308822,"comment_id":134569228,"body_markdown":"1. The answer linked contains options with and without spring-addons (and so do the tutorials hosted on spring-addons Github repo). 2. Maybe should you have looked in details what spring-addons Boot starters are (it is open-source and not that big) before deciding not to use it: it would probably have saved you quite some misconfigurations (as those listed in my previous comment)","body":"1. The answer linked contains options with and without spring-addons (and so do the tutorials hosted on spring-addons Github repo). 2. Maybe should you have looked in details what spring-addons Boot starters are (it is open-source and not that big) before deciding not to use it: it would probably have saved you quite some misconfigurations (as those listed in my previous comment)"},{"owner":{"account_id":9427779,"reputation":336,"user_id":7012221,"display_name":"Abhishek"},"score":0,"creation_date":1684825186,"post_id":76308822,"comment_id":134569364,"body_markdown":"yes, your right, non of your options helped us so we refered below url,                                             https://www.baeldung.com/spring-security-oauth-resource-server#:~:text=In%20the%20context%20of%20OAuth,a%20resource%20to%20the%20client.","body":"yes, your right, non of your options helped us so we refered below url,                                             <a href=\"https://www.baeldung.com/spring-security-oauth-resource-server#:~:text=In%20the%20context%20of%20OAuth,a%20resource%20to%20the%20client\" rel=\"nofollow noreferrer\">baeldung.com/&hellip;</a>."},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1684847471,"post_id":76308822,"comment_id":134574604,"body_markdown":"I am puzzled when I read your arguments and the article linked: this a downgraded version of the configuration I provide (the one without &quot;my&quot; starters) and what is there for tests is mostly a joke: fetching actual tokens from an actual authorization-server during unit test is just not acceptabke (way too much coupling, way too slow and way too unstable)","body":"I am puzzled when I read your arguments and the article linked: this a downgraded version of the configuration I provide (the one without &quot;my&quot; starters) and what is there for tests is mostly a joke: fetching actual tokens from an actual authorization-server during unit test is just not acceptabke (way too much coupling, way too slow and way too unstable)"},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1684847775,"post_id":76308822,"comment_id":134574686,"body_markdown":"@peter-penzov if you had followed the links until you reached the Github repo hosting my starters and [tutorials](https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials), you&#39;d have found complete samples with imports and unit tests...","body":"@peter-penzov if you had followed the links until you reached the Github repo hosting my starters and <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials\" rel=\"nofollow noreferrer\">tutorials</a>, you&#39;d have found complete samples with imports and unit tests..."},{"owner":{"account_id":9427779,"reputation":336,"user_id":7012221,"display_name":"Abhishek"},"score":0,"creation_date":1684848085,"post_id":76308822,"comment_id":134574786,"body_markdown":"@PeterPenzov Please go through https://www.baeldung.com/spring-security-oauth-resource-server and I have provided code for WebSecurityConfig in my answer. you can use latest version with example proivded in above url.","body":"@PeterPenzov Please go through <a href=\"https://www.baeldung.com/spring-security-oauth-resource-server\" rel=\"nofollow noreferrer\">baeldung.com/spring-security-oauth-resource-server</a> and I have provided code for WebSecurityConfig in my answer. you can use latest version with example proivded in above url."},{"owner":{"account_id":9427779,"reputation":336,"user_id":7012221,"display_name":"Abhishek"},"score":0,"creation_date":1684848307,"post_id":76308822,"comment_id":134574849,"body_markdown":"it work with latest version as well. we used it with spring boot 3.0.4 and Keycloak 21.0.1.","body":"it work with latest version as well. we used it with spring boot 3.0.4 and Keycloak 21.0.1."}],"tags":[],"owner":{"account_id":9427779,"reputation":336,"user_id":7012221,"display_name":"Abhishek"},"comment_count":7,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1685159750,"creation_date":1684778418,"answer_id":76308822,"question_id":76307796,"body_markdown":"We recently migrated our application to use Spring Boot 3.0.4 and Keycloak 21.0.1 The configuration look like below,\r\n\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-oauth2-client:3.0.4&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-security:3.0.4&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-oauth2-resource-server:3.0.4&#39;\r\n\r\nYAML config:\r\n\r\n&lt;!-- language: yml --&gt;\r\n    spring.security.oauth2.resourceserver.jwt.issuer-uri=https://&lt;keycloak-base-url&gt;/realms/&lt;realms-name&gt;\r\n    spring.security.oauth2.resourceserver.jwt.jwk-set-uri=https://&lt;keycloak-base-url&gt;/realms/&lt;realms-name&gt;/protocol/openid-connect/certs\r\n\r\nSpring Security configuration is:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    @Configuration\r\n    public class WebSecurityConfig {\r\n    \t\r\n    \t@Autowired\r\n        private CorsConfigurationSource corsConfigurationSource;\r\n    \t\r\n        @Bean\r\n    \tpublic SecurityFilterChain filterChain(HttpSecurity httpSecurity) throws Exception {\r\n    \t\thttpSecurity\r\n                .headers()\r\n                    .frameOptions().disable();\r\n            httpSecurity\r\n                .authorizeHttpRequests()\r\n                    .anyRequest().authenticated()\r\n                    .and()\r\n                .oauth2ResourceServer().jwt();\r\n            httpSecurity\r\n                .cors()\r\n                   .configurationSource(corsConfigurationSource)\r\n                   .and()\r\n                .csrf().disable();\r\n            return httpSecurity.build();\r\n    \t}\r\n    }\r\n","title":"Configure Keycloak 21 with Spring Security 6","body":"<p>We recently migrated our application to use Spring Boot 3.0.4 and Keycloak 21.0.1 The configuration look like below,</p>\n<pre><code>implementation 'org.springframework.boot:spring-boot-starter-oauth2-client:3.0.4'\nimplementation 'org.springframework.boot:spring-boot-starter-security:3.0.4'\nimplementation 'org.springframework.boot:spring-boot-starter-oauth2-resource-server:3.0.4'\n</code></pre>\n<p>YAML config:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>spring.security.oauth2.resourceserver.jwt.issuer-uri=https://&lt;keycloak-base-url&gt;/realms/&lt;realms-name&gt;\nspring.security.oauth2.resourceserver.jwt.jwk-set-uri=https://&lt;keycloak-base-url&gt;/realms/&lt;realms-name&gt;/protocol/openid-connect/certs\n</code></pre>\n<p>Spring Security configuration is:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class WebSecurityConfig {\n    \n    @Autowired\n    private CorsConfigurationSource corsConfigurationSource;\n    \n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity httpSecurity) throws Exception {\n        httpSecurity\n            .headers()\n                .frameOptions().disable();\n        httpSecurity\n            .authorizeHttpRequests()\n                .anyRequest().authenticated()\n                .and()\n            .oauth2ResourceServer().jwt();\n        httpSecurity\n            .cors()\n               .configurationSource(corsConfigurationSource)\n               .and()\n            .csrf().disable();\n        return httpSecurity.build();\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":965625,"reputation":1524,"user_id":1103606,"accept_rate":51,"display_name":"Peter Penzov"},"score":0,"creation_date":1685231479,"post_id":76349190,"comment_id":134633111,"body_markdown":"I implemented the code but I get just `401 Unauthorized`. How I can redirect the user to keycloak&#39;s login page when user is not authenticated?","body":"I implemented the code but I get just <code>401 Unauthorized</code>. How I can redirect the user to keycloak&#39;s login page when user is not authenticated?"},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":1,"creation_date":1685242184,"post_id":76349190,"comment_id":134633641,"body_markdown":"You really need to read [the tutorials](https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials) I linked a few times already. You won&#39;t get redirected to login with a resource server configuration. Resource server is not responsible for fetching tokens, it is responsible for validating it and performing access control (login is clients business). Plus, read the answers with more attention, the author of this one is very explicit on what you should and should not use to send a request to a resource server.","body":"You really need to read <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials\" rel=\"nofollow noreferrer\">the tutorials</a> I linked a few times already. You won&#39;t get redirected to login with a resource server configuration. Resource server is not responsible for fetching tokens, it is responsible for validating it and performing access control (login is clients business). Plus, read the answers with more attention, the author of this one is very explicit on what you should and should not use to send a request to a resource server."},{"owner":{"account_id":27385661,"reputation":389,"user_id":20889523,"display_name":"Ritik Sharma"},"score":1,"creation_date":1685270283,"post_id":76349190,"comment_id":134635757,"body_markdown":"For resource server it will not be redirected to login page. Redirection flow only works with browser when Oauth2 client server is used and for Oauth2 resource server you need to make a rest call to your api with request header **Authorization** (JWT access token) which can&#39;t be achieved with browser.  Its well phrased in link provided by @ch4mp. \n`resource-server: an API (most frequently REST). It should not care about login, logout or any OAuth2 flow. From its point of view, all that matters is if a request is authorized with a valid access token and taking access decisions based on it.`","body":"For resource server it will not be redirected to login page. Redirection flow only works with browser when Oauth2 client server is used and for Oauth2 resource server you need to make a rest call to your api with request header <b>Authorization</b> (JWT access token) which can&#39;t be achieved with browser.  Its well phrased in link provided by @ch4mp.  <code>resource-server: an API (most frequently REST). It should not care about login, logout or any OAuth2 flow. From its point of view, all that matters is if a request is authorized with a valid access token and taking access decisions based on it.</code>"},{"owner":{"account_id":965625,"reputation":1524,"user_id":1103606,"accept_rate":51,"display_name":"Peter Penzov"},"score":0,"creation_date":1685321455,"post_id":76349190,"comment_id":134640969,"body_markdown":"ok, I checked the tutorial. Can you show me what configuration I need to do for `Authorization-Code` flow? Is it possible to use Keycloak&#39;s default login page for login and also password reset? Is it mandatory to add Spring gateway?","body":"ok, I checked the tutorial. Can you show me what configuration I need to do for <code>Authorization-Code</code> flow? Is it possible to use Keycloak&#39;s default login page for login and also password reset? Is it mandatory to add Spring gateway?"},{"owner":{"account_id":27385661,"reputation":389,"user_id":20889523,"display_name":"Ritik Sharma"},"score":0,"creation_date":1685370698,"post_id":76349190,"comment_id":134647317,"body_markdown":"In postman select Authorization option and go to Bearer then paste the access token in the input box from keycloak.\nWatch this to see how to add your access token in postman. https://learning.postman.com/docs/sending-requests/authorization/ or\nhttps://egghead.io/lessons/http-add-a-custom-bearer-token-in-postman-to-authorize-an-api-request.\nAlso please mark this answer as accepted answer.","body":"In postman select Authorization option and go to Bearer then paste the access token in the input box from keycloak. Watch this to see how to add your access token in postman. <a href=\"https://learning.postman.com/docs/sending-requests/authorization/\" rel=\"nofollow noreferrer\">learning.postman.com/docs/sending-requests/authorization</a> or <a href=\"https://egghead.io/lessons/http-add-a-custom-bearer-token-in-postman-to-authorize-an-api-request\" rel=\"nofollow noreferrer\">egghead.io/lessons/&hellip;</a>. Also please mark this answer as accepted answer."},{"owner":{"account_id":965625,"reputation":1524,"user_id":1103606,"accept_rate":51,"display_name":"Peter Penzov"},"score":0,"creation_date":1685399264,"post_id":76349190,"comment_id":134651439,"body_markdown":"I tested your code and it&#39;s working. I need also to implemented the code using keycloak&#39;s login page because I want to use the keycloak&#39;s reset password page. Can you guide me what I need to implement in order to have this functionality?","body":"I tested your code and it&#39;s working. I need also to implemented the code using keycloak&#39;s login page because I want to use the keycloak&#39;s reset password page. Can you guide me what I need to implement in order to have this functionality?"},{"owner":{"account_id":27385661,"reputation":389,"user_id":20889523,"display_name":"Ritik Sharma"},"score":0,"creation_date":1685439068,"post_id":76349190,"comment_id":134656336,"body_markdown":"From where you want user to redirected to login page? Is there are any UI application for your REST APIs? Like Angular/React?","body":"From where you want user to redirected to login page? Is there are any UI application for your REST APIs? Like Angular/React?"},{"owner":{"account_id":965625,"reputation":1524,"user_id":1103606,"accept_rate":51,"display_name":"Peter Penzov"},"score":0,"creation_date":1685439952,"post_id":76349190,"comment_id":134656533,"body_markdown":"I want when I open any page like `home` page users to be redirected to keycloak&#39;s login page if the user is not authenticated.","body":"I want when I open any page like <code>home</code> page users to be redirected to keycloak&#39;s login page if the user is not authenticated."},{"owner":{"account_id":965625,"reputation":1524,"user_id":1103606,"accept_rate":51,"display_name":"Peter Penzov"},"score":0,"creation_date":1685440000,"post_id":76349190,"comment_id":134656547,"body_markdown":"All UI applications will be React based. BE will not serve web content - only Rest API","body":"All UI applications will be React based. BE will not serve web content - only Rest API"},{"owner":{"account_id":27385661,"reputation":389,"user_id":20889523,"display_name":"Ritik Sharma"},"score":0,"creation_date":1685456109,"post_id":76349190,"comment_id":134660455,"body_markdown":"For securing front end applications (React.js), you can configure Keycloak&#39;s javascript adapter as mentioned in the docs. https://www.keycloak.org/docs/latest/securing_apps/#_javascript_adapter\n\nAfter successful login you have to pass access token from keycloak to HTTP calls made to your BE rest APIs in the Authorization header.\n\nYou can refer to this article to get the idea but little outdate version https://blog.logrocket.com/implement-keycloak-authentication-react/","body":"For securing front end applications (React.js), you can configure Keycloak&#39;s javascript adapter as mentioned in the docs. <a href=\"https://www.keycloak.org/docs/latest/securing_apps/#_javascript_adapter\" rel=\"nofollow noreferrer\">keycloak.org/docs/latest/securing_apps/#_javascript_adapter</a>  After successful login you have to pass access token from keycloak to HTTP calls made to your BE rest APIs in the Authorization header.  You can refer to this article to get the idea but little outdate version <a href=\"https://blog.logrocket.com/implement-keycloak-authentication-react/\" rel=\"nofollow noreferrer\">blog.logrocket.com/implement-keycloak-authentication-react</a>"},{"owner":{"account_id":965625,"reputation":1524,"user_id":1103606,"accept_rate":51,"display_name":"Peter Penzov"},"score":0,"creation_date":1685456406,"post_id":76349190,"comment_id":134660534,"body_markdown":"Any option to implement it without it because later on it will easy to migrate to OKTA for example?","body":"Any option to implement it without it because later on it will easy to migrate to OKTA for example?"},{"owner":{"account_id":27385661,"reputation":389,"user_id":20889523,"display_name":"Ritik Sharma"},"score":0,"creation_date":1685456699,"post_id":76349190,"comment_id":134660606,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/253883/discussion-between-ritik-sharma-and-peter-penzov).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/253883/discussion-between-ritik-sharma-and-peter-penzov\">continue this discussion in chat</a>."}],"tags":[],"owner":{"account_id":27385661,"reputation":389,"user_id":20889523,"display_name":"Ritik Sharma"},"comment_count":12,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1685280978,"creation_date":1685224343,"answer_id":76349190,"question_id":76307796,"body_markdown":"if you are trying to expose rest APIs secured with Keycloak Server (Authentication Server) then your application is a OAuth2 resource server not a OAuth2 client server and also you can&#39;t use browser for accessing your rest APIs unless they are public.\r\nFor Resource Server with rest APIs you can use the below code\r\n\r\n1. **application.yml**\r\n```\r\nspring:\r\n  security:\r\n    oauth2:\r\n      resourceserver:\r\n        jwt:\r\n          issuer-uri: http://&lt;KEYCLOAK_SERVER_IP&gt;/realms/&lt;YOUR_REALM_NAME&gt;\r\n          jwk-set-uri: http://&lt;KEYCLOAK_SERVER_IP&gt;/realms/&lt;YOUR_REALM_NAME&gt;/protocol/openid-connect/certs\r\n```\r\n2. **Get JWT TOKEN from Keycloak Server** (this curl is equivalent to postman request for keycloak to get access token, you can find more here https://documenter.getpostman.com/view/7294517/SzmfZHnd)\r\n```\r\ncurl --location &#39;http://&lt;KEYCLOAK_SERVER_IP&gt;/realms/test/protocol/openid-connect/token&#39; \\\r\n--header &#39;Content-Type: application/x-www-form-urlencoded&#39; \\\r\n--data-urlencode &#39;username=&lt;YOUR_USER_NAME&gt;&#39; \\\r\n--data-urlencode &#39;password=&lt;YOUR_USER_PASSWORD&gt;&#39; \\\r\n--data-urlencode &#39;grant_type=password&#39; \\\r\n--data-urlencode &#39;client_id=&lt;KEYCLOAK_CLIENT_ID&gt;&#39; \\\r\n--data-urlencode &#39;client_secret=&lt;KEYCLOAK_CLIENT_SECRET&gt;&#39; \\\r\n--data-urlencode &#39;scope=openid&#39;\r\n```\r\n3. **Inspect your access token using https://jwt.io/**\r\n```\r\n...\r\n&quot;realm_access&quot;: {\r\n    &quot;roles&quot;: [\r\n      &quot;default-roles-test&quot;,\r\n      &quot;offline_access&quot;,\r\n      &quot;MY_REALM_ROLE&quot;,\r\n      &quot;uma_authorization&quot;\r\n    ]\r\n  },\r\n  &quot;resource_access&quot;: {\r\n    &quot;test-client&quot;: {\r\n      &quot;roles&quot;: [\r\n        &quot;MY_CLIENT_ROLE&quot;\r\n      ]\r\n    },\r\n...\r\n```\r\nNow, we need to tell spring security from where it has look for Roles information in the JWT token.\r\n\r\n4. **WebSecurityConfig.java**\r\n```java\r\n@Configuration\r\n@EnableWebSecurity\r\npublic class WebSecurityConfig {\r\n\r\n\r\n    @Bean\r\n    public SecurityFilterChain securityFilterChain(HttpSecurity httpSecurity) throws Exception {\r\n\r\n// Note: Please change &#39;/mp-api/**&#39; to your desired rest controller path.\r\n        httpSecurity\r\n                .authorizeHttpRequests(registry -&gt; registry\r\n                        .requestMatchers(&quot;/my-api/**&quot;).hasRole(&quot;MY_REALM_ROLE&quot;)\r\n                        .anyRequest().authenticated()\r\n                )\r\n                .oauth2ResourceServer(oauth2Configurer -&gt; oauth2Configurer.jwt(jwtConfigurer -&gt; jwtConfigurer.jwtAuthenticationConverter(jwt -&gt; {\r\n                    Map&lt;String, Collection&lt;String&gt;&gt; realmAccess = jwt.getClaim(&quot;realm_access&quot;);\r\n                    Collection&lt;String&gt; roles = realmAccess.get(&quot;roles&quot;);\r\n                    var grantedAuthorities = roles.stream()\r\n                            .map(role -&gt; new SimpleGrantedAuthority(&quot;ROLE_&quot; + role))\r\n                            .collect(Collectors.toList());\r\n                    return new JwtAuthenticationToken(jwt, grantedAuthorities);\r\n                })))\r\n        ;\r\n\r\n        return httpSecurity.build();\r\n    }\r\n}\r\n```\r\n**Make sure you have proper Role Mappings for User in Keycloak.**\r\n\r\nNow, for using your rest API you can use Postman. In Postman add\r\nBearer Token Authorization and use the latest generated access token from keycloak server.","title":"Configure Keycloak 21 with Spring Security 6","body":"<p>if you are trying to expose rest APIs secured with Keycloak Server (Authentication Server) then your application is a OAuth2 resource server not a OAuth2 client server and also you can't use browser for accessing your rest APIs unless they are public.\nFor Resource Server with rest APIs you can use the below code</p>\n<ol>\n<li><strong>application.yml</strong></li>\n</ol>\n<pre><code>spring:\n  security:\n    oauth2:\n      resourceserver:\n        jwt:\n          issuer-uri: http://&lt;KEYCLOAK_SERVER_IP&gt;/realms/&lt;YOUR_REALM_NAME&gt;\n          jwk-set-uri: http://&lt;KEYCLOAK_SERVER_IP&gt;/realms/&lt;YOUR_REALM_NAME&gt;/protocol/openid-connect/certs\n</code></pre>\n<ol start=\"2\">\n<li><strong>Get JWT TOKEN from Keycloak Server</strong> (this curl is equivalent to postman request for keycloak to get access token, you can find more here <a href=\"https://documenter.getpostman.com/view/7294517/SzmfZHnd\" rel=\"nofollow noreferrer\">https://documenter.getpostman.com/view/7294517/SzmfZHnd</a>)</li>\n</ol>\n<pre><code>curl --location 'http://&lt;KEYCLOAK_SERVER_IP&gt;/realms/test/protocol/openid-connect/token' \\\n--header 'Content-Type: application/x-www-form-urlencoded' \\\n--data-urlencode 'username=&lt;YOUR_USER_NAME&gt;' \\\n--data-urlencode 'password=&lt;YOUR_USER_PASSWORD&gt;' \\\n--data-urlencode 'grant_type=password' \\\n--data-urlencode 'client_id=&lt;KEYCLOAK_CLIENT_ID&gt;' \\\n--data-urlencode 'client_secret=&lt;KEYCLOAK_CLIENT_SECRET&gt;' \\\n--data-urlencode 'scope=openid'\n</code></pre>\n<ol start=\"3\">\n<li><strong>Inspect your access token using <a href=\"https://jwt.io/\" rel=\"nofollow noreferrer\">https://jwt.io/</a></strong></li>\n</ol>\n<pre><code>...\n&quot;realm_access&quot;: {\n    &quot;roles&quot;: [\n      &quot;default-roles-test&quot;,\n      &quot;offline_access&quot;,\n      &quot;MY_REALM_ROLE&quot;,\n      &quot;uma_authorization&quot;\n    ]\n  },\n  &quot;resource_access&quot;: {\n    &quot;test-client&quot;: {\n      &quot;roles&quot;: [\n        &quot;MY_CLIENT_ROLE&quot;\n      ]\n    },\n...\n</code></pre>\n<p>Now, we need to tell spring security from where it has look for Roles information in the JWT token.</p>\n<ol start=\"4\">\n<li><strong>WebSecurityConfig.java</strong></li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableWebSecurity\npublic class WebSecurityConfig {\n\n\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity httpSecurity) throws Exception {\n\n// Note: Please change '/mp-api/**' to your desired rest controller path.\n        httpSecurity\n                .authorizeHttpRequests(registry -&gt; registry\n                        .requestMatchers(&quot;/my-api/**&quot;).hasRole(&quot;MY_REALM_ROLE&quot;)\n                        .anyRequest().authenticated()\n                )\n                .oauth2ResourceServer(oauth2Configurer -&gt; oauth2Configurer.jwt(jwtConfigurer -&gt; jwtConfigurer.jwtAuthenticationConverter(jwt -&gt; {\n                    Map&lt;String, Collection&lt;String&gt;&gt; realmAccess = jwt.getClaim(&quot;realm_access&quot;);\n                    Collection&lt;String&gt; roles = realmAccess.get(&quot;roles&quot;);\n                    var grantedAuthorities = roles.stream()\n                            .map(role -&gt; new SimpleGrantedAuthority(&quot;ROLE_&quot; + role))\n                            .collect(Collectors.toList());\n                    return new JwtAuthenticationToken(jwt, grantedAuthorities);\n                })))\n        ;\n\n        return httpSecurity.build();\n    }\n}\n</code></pre>\n<p><strong>Make sure you have proper Role Mappings for User in Keycloak.</strong></p>\n<p>Now, for using your rest API you can use Postman. In Postman add\nBearer Token Authorization and use the latest generated access token from keycloak server.</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1687469652,"post_id":76520910,"comment_id":134945446,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76520910/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."},{"owner":{"account_id":17556150,"reputation":145,"user_id":12735555,"display_name":"Mili Dubey"},"score":0,"creation_date":1701972843,"post_id":76520910,"comment_id":136843816,"body_markdown":"Hi! I&#39;m a newbie at springboot and keycloak. Could you pls specify where are you importing JwtAuthConverter  from?","body":"Hi! I&#39;m a newbie at springboot and keycloak. Could you pls specify where are you importing JwtAuthConverter  from?"}],"tags":[],"owner":{"account_id":28863853,"reputation":11,"user_id":22107032,"display_name":"SebaGQ"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1687332556,"creation_date":1687332284,"answer_id":76520910,"question_id":76307796,"body_markdown":"In case someone comes here looking for what an implementation in version 6.1 of Spring Security, Spring Boot 3.1 configured to work with keycloack would look like.\r\n\r\nIf you get an error about JwtDecoder, this line takes care of it:  .jwkSetUri(jwkSetUri)\r\n \r\n\r\n    @RequiredArgsConstructor\r\n    @Configuration\r\n    @EnableWebSecurity(debug = true)\r\n    public class WebSecurityConfig {\r\n    \r\n        public static final String ADMIN = &quot;admin&quot;;\r\n        public static final String USER = &quot;user&quot;;\r\n    \r\n    \r\n        @Value(&quot;${spring.security.oauth2.resourceserver.jwt.jwk-set-uri}&quot;)\r\n        private String jwkSetUri;\r\n    \r\n        private final JwtAuthConverter jwtAuthConverter;\r\n    \r\n    \r\n        @Bean\r\n        public SecurityFilterChain securityFilterChain2(HttpSecurity http) throws Exception {\r\n            http\r\n                    .authorizeHttpRequests((authorizeHttpRequests) -&gt;\r\n                            authorizeHttpRequests\r\n                                    .requestMatchers(&quot;/api/duenos/**&quot;).hasAnyRole(ADMIN, USER)\r\n                                    .requestMatchers(&quot;/api/objetos_extraviados/**&quot;).hasAnyRole(ADMIN, USER)\r\n                                    .anyRequest().authenticated()\r\n                    )\r\n                    .oauth2ResourceServer((oauth2ResourceServer) -&gt;\r\n                            oauth2ResourceServer\r\n                                    .jwt((jwt) -&gt;\r\n                                            jwt\r\n                                                    .jwtAuthenticationConverter(jwtAuthConverter)\r\n                                                    .jwkSetUri(jwkSetUri)\r\n                                    )\r\n                    )\r\n                    .sessionManagement((sessionManagement) -&gt; sessionManagement\r\n                                    .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n                    );\r\n            return http.build();\r\n        }\r\n\r\n}\r\n\r\nLas dependencias que us&#233;:\r\nspring-boot-starter-oauth2-resource-server\r\nspring-security-oauth2-jose\r\nspring-boot-starter-security\r\n\r\n ","title":"Configure Keycloak 21 with Spring Security 6","body":"<p>In case someone comes here looking for what an implementation in version 6.1 of Spring Security, Spring Boot 3.1 configured to work with keycloack would look like.</p>\n<p>If you get an error about JwtDecoder, this line takes care of it:  .jwkSetUri(jwkSetUri)</p>\n<pre><code>@RequiredArgsConstructor\n@Configuration\n@EnableWebSecurity(debug = true)\npublic class WebSecurityConfig {\n\n    public static final String ADMIN = &quot;admin&quot;;\n    public static final String USER = &quot;user&quot;;\n\n\n    @Value(&quot;${spring.security.oauth2.resourceserver.jwt.jwk-set-uri}&quot;)\n    private String jwkSetUri;\n\n    private final JwtAuthConverter jwtAuthConverter;\n\n\n    @Bean\n    public SecurityFilterChain securityFilterChain2(HttpSecurity http) throws Exception {\n        http\n                .authorizeHttpRequests((authorizeHttpRequests) -&gt;\n                        authorizeHttpRequests\n                                .requestMatchers(&quot;/api/duenos/**&quot;).hasAnyRole(ADMIN, USER)\n                                .requestMatchers(&quot;/api/objetos_extraviados/**&quot;).hasAnyRole(ADMIN, USER)\n                                .anyRequest().authenticated()\n                )\n                .oauth2ResourceServer((oauth2ResourceServer) -&gt;\n                        oauth2ResourceServer\n                                .jwt((jwt) -&gt;\n                                        jwt\n                                                .jwtAuthenticationConverter(jwtAuthConverter)\n                                                .jwkSetUri(jwkSetUri)\n                                )\n                )\n                .sessionManagement((sessionManagement) -&gt; sessionManagement\n                                .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n                );\n        return http.build();\n    }\n</code></pre>\n<p>}</p>\n<p>Las dependencias que usé:\nspring-boot-starter-oauth2-resource-server\nspring-security-oauth2-jose\nspring-boot-starter-security</p>\n"}],"owner":{"account_id":965625,"reputation":1524,"user_id":1103606,"accept_rate":51,"display_name":"Peter Penzov"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4129,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":76349190,"answer_count":3,"score":5,"last_activity_date":1687332556,"creation_date":1684769623,"question_id":76307796,"body_markdown":"I&#39;m trying to setup Spring Security to work with Keycloak 21 but unfortunately most of the tutorials on Internet are outdated. I configured client and realms into Keycloak but Spring security is not clear what should be. I tried the code from this [link][1]:\r\n\r\nI added these gradle dependencies:\r\n\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-oauth2-client:3.1.0&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-security:3.1.0&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-oauth2-resource-server:3.1.0&#39;\r\n\r\n and this yml config:\r\n\r\n    spring:\r\n      security:\r\n        oauth2:\r\n          client:\r\n            provider:\r\n              keycloak:\r\n                issuer-uri: https://ip/realms/admin_console_realm\r\n            registration:\r\n              keycloak-login:\r\n                authorization-grant-type: authorization_code\r\n                client-name: My Keycloak instance\r\n                client-id: admin_console_client\r\n                client-secret: qwerty\r\n                provider: keycloak\r\n                scope: openid,profile,email,offline_access\r\n          resourceserver:\r\n            jwt:\r\n              issuer-uri: https://ip/realms/admin_console_realm\r\n              jwk-set-uri: https://ip/realms/admin_console_realm/protocol/openid-connect/certs\r\n\r\n\r\nIt&#39;s not clear what I need to add as a Spring security configuration here:\r\n\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\n    import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\n    import org.springframework.security.web.SecurityFilterChain;\r\n    \r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class WebSecurityConfig {\r\n    \r\n        @Bean\r\n        public SecurityFilterChain securityFilterChain(HttpSecurity httpSecurity) throws Exception {\r\n    \r\n            httpSecurity.authorizeHttpRequests()\r\n                    .requestMatchers(&quot;/*&quot;).hasAuthority(&quot;ROLE_TECH_SUPPORT&quot;)\r\n                    .anyRequest().authenticated()\r\n                    .and()\r\n                    .oauth2Login();\r\n    \r\n            return  httpSecurity.build();\r\n        }\r\n    }\r\n\r\nI added the role into Keycloak client:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nWhen I open a Rest API link into the browser I&#39;m redirected to Keycloak&#39;s login page. After successful authentication I get:\r\n\r\n    Access to ip was deniedYou don&#39;t have authorization to view this page.\r\n    HTTP ERROR 403\r\n\r\n\r\nDo you know how I can fix this issue?\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/74571191/use-keycloak-spring-adapter-with-spring-boot-3\r\n  [2]: https://i.stack.imgur.com/VJlwx.png","title":"Configure Keycloak 21 with Spring Security 6","body":"<p>I'm trying to setup Spring Security to work with Keycloak 21 but unfortunately most of the tutorials on Internet are outdated. I configured client and realms into Keycloak but Spring security is not clear what should be. I tried the code from this <a href=\"https://stackoverflow.com/questions/74571191/use-keycloak-spring-adapter-with-spring-boot-3\">link</a>:</p>\n<p>I added these gradle dependencies:</p>\n<pre><code>implementation 'org.springframework.boot:spring-boot-starter-oauth2-client:3.1.0'\nimplementation 'org.springframework.boot:spring-boot-starter-security:3.1.0'\nimplementation 'org.springframework.boot:spring-boot-starter-oauth2-resource-server:3.1.0'\n</code></pre>\n<p>and this yml config:</p>\n<pre><code>spring:\n  security:\n    oauth2:\n      client:\n        provider:\n          keycloak:\n            issuer-uri: https://ip/realms/admin_console_realm\n        registration:\n          keycloak-login:\n            authorization-grant-type: authorization_code\n            client-name: My Keycloak instance\n            client-id: admin_console_client\n            client-secret: qwerty\n            provider: keycloak\n            scope: openid,profile,email,offline_access\n      resourceserver:\n        jwt:\n          issuer-uri: https://ip/realms/admin_console_realm\n          jwk-set-uri: https://ip/realms/admin_console_realm/protocol/openid-connect/certs\n</code></pre>\n<p>It's not clear what I need to add as a Spring security configuration here:</p>\n<pre><code>import org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.web.SecurityFilterChain;\n\n@Configuration\n@EnableWebSecurity\npublic class WebSecurityConfig {\n\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity httpSecurity) throws Exception {\n\n        httpSecurity.authorizeHttpRequests()\n                .requestMatchers(&quot;/*&quot;).hasAuthority(&quot;ROLE_TECH_SUPPORT&quot;)\n                .anyRequest().authenticated()\n                .and()\n                .oauth2Login();\n\n        return  httpSecurity.build();\n    }\n}\n</code></pre>\n<p>I added the role into Keycloak client:</p>\n<p><a href=\"https://i.stack.imgur.com/VJlwx.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/VJlwx.png\" alt=\"enter image description here\" /></a></p>\n<p>When I open a Rest API link into the browser I'm redirected to Keycloak's login page. After successful authentication I get:</p>\n<pre><code>Access to ip was deniedYou don't have authorization to view this page.\nHTTP ERROR 403\n</code></pre>\n<p>Do you know how I can fix this issue?</p>\n"},{"tags":["java","generics","hashcode"],"comments":[{"owner":{"account_id":3452279,"reputation":37360,"user_id":2891664,"accept_rate":100,"display_name":"Radiodef"},"score":2,"creation_date":1536023948,"post_id":52157584,"comment_id":91265548,"body_markdown":"Is there a reason you don&#39;t want to just delegate to using the `ArrayList`&#39;s `hashCode` and `equals`? It would be much simpler.","body":"Is there a reason you don&#39;t want to just delegate to using the <code>ArrayList</code>&#39;s <code>hashCode</code> and <code>equals</code>? It would be much simpler."},{"owner":{"account_id":9792822,"reputation":725,"user_id":8814262,"display_name":"ineedahero"},"score":0,"creation_date":1536023986,"post_id":52157584,"comment_id":91265553,"body_markdown":"There is no reason, thank you!","body":"There is no reason, thank you!"},{"owner":{"account_id":540420,"reputation":6131,"user_id":908621,"accept_rate":61,"display_name":"fishinear"},"score":0,"creation_date":1536077519,"post_id":52157584,"comment_id":91291181,"body_markdown":"The reason for the &#39;?&#39; is because you cannot be sure that the other Tuple that you are comparing to, has the same member type.","body":"The reason for the &#39;?&#39; is because you cannot be sure that the other Tuple that you are comparing to, has the same member type."}],"answers":[{"comments":[{"owner":{"account_id":3569076,"reputation":389,"user_id":2979900,"accept_rate":90,"display_name":"buggaby"},"score":1,"creation_date":1687286180,"post_id":52167921,"comment_id":134914616,"body_markdown":"&quot;pedantic&quot; (I&#39;m more, apparently)","body":"&quot;pedantic&quot; (I&#39;m more, apparently)"}],"tags":[],"owner":{"account_id":63444,"reputation":7018,"user_id":187808,"accept_rate":100,"display_name":"Tamas Rev"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687332539,"creation_date":1536069111,"answer_id":52167921,"question_id":52157584,"body_markdown":"As mentioned in the comments, we should delegate the `hashCode` and the `equals` methods to the `ArrayList&lt;T&gt; tuple` instance variable. For the `hashCode` it&#39;s trivial. For the `equals` it&#39;s just a little more complicated than that because we don&#39;t want our custom `Tuple` to be equals with an `ArrayList`. So here it is:\r\n\r\n    public class Tuple&lt;T&gt; {\r\n    \r\n         // I made this private because I&#39;m pedantic ;)\r\n    \t private final ArrayList&lt;T&gt; tuple = new ArrayList&lt;&gt;();\r\n    \r\n         // this does the same as your code, it&#39;s just easier to read\r\n         public Tuple(ArrayList&lt;T&gt; items) {\r\n        \t tuple.addAll(items);\r\n         }\r\n    \r\n    \t@Override\r\n    \tpublic int hashCode() {\r\n    \t\treturn tuple.hashCode();\r\n    \t}\r\n    \r\n        // generated by eclipse\r\n    \t@Override\r\n    \tpublic boolean equals(Object obj) {\r\n    \t\tif (this == obj)\r\n    \t\t\treturn true;\r\n    \t\tif (obj == null)\r\n    \t\t\treturn false;\r\n    \t\tif (getClass() != obj.getClass())\r\n    \t\t\treturn false;\r\n    \t\tTuple other = (Tuple) obj;\r\n    \t\tif (tuple == null) {\r\n    \t\t\tif (other.tuple != null)\r\n    \t\t\t\treturn false;\r\n    \t\t} else if (!tuple.equals(other.tuple))\r\n    \t\t\treturn false;\r\n    \t\treturn true;\r\n    \t}\r\n    }\r\n\r\nIf you want to deal with the case when the `tuple` can be null, then you can use a slightly more complex `hashCode`:\r\n\r\n\t@Override\r\n\tpublic int hashCode() {\r\n\t\tfinal int prime = 31;\r\n\t\tint result = 1;\r\n\t\tresult = prime * result + ((tuple == null) ? 0 : tuple.hashCode());\r\n\t\treturn tuple.hashCode();\r\n\t}\r\n\r\nIn general, I don&#39;t like to write these methods myself. Usually, I make my IDE to generate the stuff. All I need to take care of is to re-generate it when I add new fields. Apache [`HashCodeBuilder`][1] and [`EqualsBuilder`][2] are also great alternatives.\r\n\r\n\r\n  [1]: https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/builder/HashCodeBuilder.html\r\n  [2]: https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/builder/EqualsBuilder.html","title":"How to make custom Tuple class generic?","body":"<p>As mentioned in the comments, we should delegate the <code>hashCode</code> and the <code>equals</code> methods to the <code>ArrayList&lt;T&gt; tuple</code> instance variable. For the <code>hashCode</code> it's trivial. For the <code>equals</code> it's just a little more complicated than that because we don't want our custom <code>Tuple</code> to be equals with an <code>ArrayList</code>. So here it is:</p>\n<pre><code>public class Tuple&lt;T&gt; {\n\n     // I made this private because I'm pedantic ;)\n     private final ArrayList&lt;T&gt; tuple = new ArrayList&lt;&gt;();\n\n     // this does the same as your code, it's just easier to read\n     public Tuple(ArrayList&lt;T&gt; items) {\n         tuple.addAll(items);\n     }\n\n    @Override\n    public int hashCode() {\n        return tuple.hashCode();\n    }\n\n    // generated by eclipse\n    @Override\n    public boolean equals(Object obj) {\n        if (this == obj)\n            return true;\n        if (obj == null)\n            return false;\n        if (getClass() != obj.getClass())\n            return false;\n        Tuple other = (Tuple) obj;\n        if (tuple == null) {\n            if (other.tuple != null)\n                return false;\n        } else if (!tuple.equals(other.tuple))\n            return false;\n        return true;\n    }\n}\n</code></pre>\n<p>If you want to deal with the case when the <code>tuple</code> can be null, then you can use a slightly more complex <code>hashCode</code>:</p>\n<pre><code>@Override\npublic int hashCode() {\n    final int prime = 31;\n    int result = 1;\n    result = prime * result + ((tuple == null) ? 0 : tuple.hashCode());\n    return tuple.hashCode();\n}\n</code></pre>\n<p>In general, I don't like to write these methods myself. Usually, I make my IDE to generate the stuff. All I need to take care of is to re-generate it when I add new fields. Apache <a href=\"https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/builder/HashCodeBuilder.html\" rel=\"nofollow noreferrer\"><code>HashCodeBuilder</code></a> and <a href=\"https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/builder/EqualsBuilder.html\" rel=\"nofollow noreferrer\"><code>EqualsBuilder</code></a> are also great alternatives.</p>\n"}],"owner":{"account_id":9792822,"reputation":725,"user_id":8814262,"display_name":"ineedahero"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":193,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1687332539,"creation_date":1536023437,"question_id":52157584,"body_markdown":"I&#39;m trying to make a generic tuple class. It stores its elements as an ArrayList. Of course, this class should override hashcode and equals methods.\r\n\r\nHow could I make hashcode method for this class? You see, in the code, I am having trouble.\r\n\r\nAlso, for the equals method, why does the compiler force me to use the &#39;?&#39;. Why couldn&#39;t I just use the T? \r\n\r\n    public static class Tuple&lt;T&gt; { \r\n    \t\tArrayList&lt;T&gt; tuple = new ArrayList&lt;&gt;();\r\n    \t\t\r\n    \t\tpublic Tuple(ArrayList&lt;T&gt; items) {\r\n    \t\t\tfor (T item : items) {\r\n    \t\t\t\ttuple.add(item);\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\t\r\n    \t\t@Override\r\n    \t\tpublic int hashCode() {\r\n    \t\t\tT sum = ???;\r\n    \t\t\tfor (T item : tuple) {\r\n    \t\t\t\tsum += item.hashCode();\r\n    \t\t\t}\r\n                return sum;\r\n    \t\t}\r\n    \t\t\r\n    \t\t@Override \r\n    \t\tpublic boolean equals(Object o) {\r\n    \t\t\tif (o instanceof Tuple&lt;?&gt;) {\r\n    \t\t\t\tTuple&lt;?&gt; tup= (Tuple&lt;?&gt;) o;\r\n                    if (tup.tuple.size() != this.tuple.size()) {\r\n                        return false;\r\n                    }\r\n                    for (int i = 0; i &lt; this.tuple.size(); i++) {\r\n                        if (this.tuple.get(i) != tup.tuple.get(i)) {\r\n                            return false;\r\n                        } \r\n                    }\r\n                    return true;\r\n    \t\t\t} else {\r\n    \t\t\t\treturn false;\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}","title":"How to make custom Tuple class generic?","body":"<p>I'm trying to make a generic tuple class. It stores its elements as an ArrayList. Of course, this class should override hashcode and equals methods.</p>\n\n<p>How could I make hashcode method for this class? You see, in the code, I am having trouble.</p>\n\n<p>Also, for the equals method, why does the compiler force me to use the '?'. Why couldn't I just use the T? </p>\n\n<pre><code>public static class Tuple&lt;T&gt; { \n        ArrayList&lt;T&gt; tuple = new ArrayList&lt;&gt;();\n\n        public Tuple(ArrayList&lt;T&gt; items) {\n            for (T item : items) {\n                tuple.add(item);\n            }\n        }\n\n        @Override\n        public int hashCode() {\n            T sum = ???;\n            for (T item : tuple) {\n                sum += item.hashCode();\n            }\n            return sum;\n        }\n\n        @Override \n        public boolean equals(Object o) {\n            if (o instanceof Tuple&lt;?&gt;) {\n                Tuple&lt;?&gt; tup= (Tuple&lt;?&gt;) o;\n                if (tup.tuple.size() != this.tuple.size()) {\n                    return false;\n                }\n                for (int i = 0; i &lt; this.tuple.size(); i++) {\n                    if (this.tuple.get(i) != tup.tuple.get(i)) {\n                        return false;\n                    } \n                }\n                return true;\n            } else {\n                return false;\n            }\n        }\n    }\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":1,"creation_date":1687269908,"post_id":76515530,"comment_id":134911097,"body_markdown":"The method can only run once, you&#39;re not going to get JIT on a single execution of a method. The JVM immediately ends after that method.","body":"The method can only run once, you&#39;re not going to get JIT on a single execution of a method. The JVM immediately ends after that method."},{"owner":{"account_id":63162,"reputation":102381,"user_id":187141,"accept_rate":82,"display_name":"yegor256"},"score":0,"creation_date":1687327271,"post_id":76515530,"comment_id":134919129,"body_markdown":"@MarkRotteveel you are right. I suggest you delete the comment and post an answer, I will be glad to accept it.","body":"@MarkRotteveel you are right. I suggest you delete the comment and post an answer, I will be glad to accept it."}],"answers":[{"tags":[],"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1687332400,"creation_date":1687332400,"answer_id":76520927,"question_id":76515530,"body_markdown":"The problem is that under normal circumstances, code is initially interpreted and only JIT compiled when it is hot (called a lot, default is 10000).\r\n\r\nTo force code to be compiled immediately, use option `-Xcomp`, and then use `-XX:+PrintAssembly` (to be honest, the meaning of `-XX:+PrintOptoAssembly` is not entirely clear to me, except clearly, it doesn&#39;t seem to print assembly in this case ;).\r\n\r\nIn short, use:\r\n\r\n```bash\r\njava -XX:+UnlockDiagnosticVMOptions -XX:+PrintAssembly -Xcomp Main\r\n```","title":"Why can&#39;t I see the code generated by JIT?","body":"<p>The problem is that under normal circumstances, code is initially interpreted and only JIT compiled when it is hot (called a lot, default is 10000).</p>\n<p>To force code to be compiled immediately, use option <code>-Xcomp</code>, and then use <code>-XX:+PrintAssembly</code> (to be honest, the meaning of <code>-XX:+PrintOptoAssembly</code> is not entirely clear to me, except clearly, it doesn't seem to print assembly in this case ;).</p>\n<p>In short, use:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>java -XX:+UnlockDiagnosticVMOptions -XX:+PrintAssembly -Xcomp Main\n</code></pre>\n"}],"owner":{"account_id":63162,"reputation":102381,"user_id":187141,"accept_rate":82,"display_name":"yegor256"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":87,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76520927,"answer_count":1,"score":0,"last_activity_date":1687332400,"creation_date":1687269608,"question_id":76515530,"body_markdown":"I&#39;m trying to see the code generated by Java JIT, while this is my `Main.java`:\r\n\r\n```java\r\nclass Foo {\r\n  public static int bar() { return 42; }\r\n}\r\nclass Main {\r\n  public static void main(String... args) {\r\n    System.exit(Foo.bar());\r\n  }\r\n}\r\n```\r\n\r\nI&#39;m running this way:\r\n\r\n```\r\n$ javac Main.java &amp;&amp; java -XX:+UnlockDiagnosticVMOptions -XX:+PrintOptoAssembly Main\r\n\r\n============================= C2-compiled nmethod ==============================\r\n\r\n============================= C2-compiled nmethod ==============================\r\n```\r\n\r\nWhere is the code?","title":"Why can&#39;t I see the code generated by JIT?","body":"<p>I'm trying to see the code generated by Java JIT, while this is my <code>Main.java</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Foo {\n  public static int bar() { return 42; }\n}\nclass Main {\n  public static void main(String... args) {\n    System.exit(Foo.bar());\n  }\n}\n</code></pre>\n<p>I'm running this way:</p>\n<pre><code>$ javac Main.java &amp;&amp; java -XX:+UnlockDiagnosticVMOptions -XX:+PrintOptoAssembly Main\n\n============================= C2-compiled nmethod ==============================\n\n============================= C2-compiled nmethod ==============================\n</code></pre>\n<p>Where is the code?</p>\n"},{"tags":["java","spring","jms","activemq","spring-jms"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":7,"creation_date":1407163073,"post_id":25121094,"comment_id":39097784,"body_markdown":"Your first approach will only work for JMS 2.0 compliant JMS brokers, ActiveMQ isn&#39;t (at the moment) one of them. The second option is only going to work if you also enabled scheduling on the JMS broker side else the property will do nothing.","body":"Your first approach will only work for JMS 2.0 compliant JMS brokers, ActiveMQ isn&#39;t (at the moment) one of them. The second option is only going to work if you also enabled scheduling on the JMS broker side else the property will do nothing."},{"owner":{"account_id":3605469,"reputation":1723,"user_id":3007732,"accept_rate":64,"display_name":"Ayelet"},"score":0,"creation_date":1407166782,"post_id":25121094,"comment_id":39100153,"body_markdown":"Thanks @M.Deinum. I set schedulerSupport=&quot;true&quot; in the activemq.xml and now it works.","body":"Thanks @M.Deinum. I set schedulerSupport=&quot;true&quot; in the activemq.xml and now it works."},{"owner":{"account_id":1056981,"reputation":1109,"user_id":1059465,"accept_rate":43,"display_name":"znlyj"},"score":0,"creation_date":1427707442,"post_id":25121094,"comment_id":46871844,"body_markdown":"The delayed message is stored in the client side?","body":"The delayed message is stored in the client side?"}],"answers":[{"comments":[{"owner":{"account_id":2624585,"reputation":1457,"user_id":2271895,"accept_rate":97,"display_name":"Tan"},"score":0,"creation_date":1593025747,"post_id":25123584,"comment_id":110638754,"body_markdown":"Hey ,@Tim Bish! I am wondering where should I define this line to enable scheduler support  `&lt;broker xmlns=&quot;http://activemq.apache.org/schema/core&quot; brokerName=&quot;localhost&quot; dataDirectory=&quot;${activemq.data}&quot; schedulerSupport=&quot;true&quot;&gt;`. I checked the documentation you shared and it doesn&#39;t says anything. My inclination is `conf/activem/xml`, however, I couldn&#39;t find anything related to enabling `schedulerSupport` over there. Thanks !","body":"Hey ,@Tim Bish! I am wondering where should I define this line to enable scheduler support  <code>&lt;broker xmlns=&quot;http:&#47;&#47;activemq.apache.org&#47;schema&#47;core&quot; brokerName=&quot;localhost&quot; dataDirectory=&quot;${activemq.data}&quot; schedulerSupport=&quot;true&quot;&gt;</code>. I checked the documentation you shared and it doesn&#39;t says anything. My inclination is <code>conf&#47;activem&#47;xml</code>, however, I couldn&#39;t find anything related to enabling <code>schedulerSupport</code> over there. Thanks !"},{"owner":{"account_id":1482404,"reputation":952,"user_id":1391454,"accept_rate":43,"display_name":"Mubasher"},"score":0,"creation_date":1681213959,"post_id":25123584,"comment_id":134016982,"body_markdown":"ActiveMQ has its config file activemq.xml, you need to define it there.","body":"ActiveMQ has its config file activemq.xml, you need to define it there."}],"tags":[],"owner":{"account_id":157630,"reputation":17688,"user_id":375722,"display_name":"Tim Bish"},"comment_count":2,"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1591969579,"creation_date":1407170709,"answer_id":25123584,"question_id":25121094,"body_markdown":"The comments give the answer.  By default scheduled message support is disabled.  You must enabled it in the broker XML configuration file as mentioned on the [documentation][1] page.\r\n\r\nAn example Broker tag with scheduler support enabled:\r\n\r\n    &lt;broker xmlns=&quot;http://activemq.apache.org/schema/core&quot; brokerName=&quot;localhost&quot; dataDirectory=&quot;${activemq.data}&quot; schedulerSupport=&quot;true&quot;&gt;\r\n\r\nYou must of course restart the broker in order for configuration changes to take affect.  Then when you send a message you need to add the JMS headers that tell the broker what type of delay you want.\r\n\r\n    message.setIntProperty(ScheduledMessage.AMQ_SCHEDULED_DELAY, scheduledDelay);\r\n\r\n  [1]: http://activemq.apache.org/delay-and-schedule-message-delivery.html","title":"Spring JMS(ActiveMQ) delayed delivery of messages","body":"<p>The comments give the answer.  By default scheduled message support is disabled.  You must enabled it in the broker XML configuration file as mentioned on the <a href=\"http://activemq.apache.org/delay-and-schedule-message-delivery.html\" rel=\"nofollow noreferrer\">documentation</a> page.</p>\n\n<p>An example Broker tag with scheduler support enabled:</p>\n\n<pre><code>&lt;broker xmlns=\"http://activemq.apache.org/schema/core\" brokerName=\"localhost\" dataDirectory=\"${activemq.data}\" schedulerSupport=\"true\"&gt;\n</code></pre>\n\n<p>You must of course restart the broker in order for configuration changes to take affect.  Then when you send a message you need to add the JMS headers that tell the broker what type of delay you want.</p>\n\n<pre><code>message.setIntProperty(ScheduledMessage.AMQ_SCHEDULED_DELAY, scheduledDelay);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":157630,"reputation":17688,"user_id":375722,"display_name":"Tim Bish"},"score":0,"creation_date":1450885753,"post_id":27124221,"comment_id":56619316,"body_markdown":"This actually depends on what broker version you are using, later releases do have an in memory scheduler store for brokers that run without persistence.","body":"This actually depends on what broker version you are using, later releases do have an in memory scheduler store for brokers that run without persistence."}],"tags":[],"owner":{"account_id":2693469,"reputation":147,"user_id":2326165,"display_name":"oleh.kovaliuk"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1416911317,"creation_date":1416911317,"answer_id":27124221,"question_id":25121094,"body_markdown":"Also according to method from ActiveMQ BrokerService class you should configure persistence to have ability to use scheduler functionality.\r\n\r\n    public boolean isSchedulerSupport() {\r\n        return this.schedulerSupport &amp;&amp; (isPersistent() || jobSchedulerStore != null);\r\n    }","title":"Spring JMS(ActiveMQ) delayed delivery of messages","body":"<p>Also according to method from ActiveMQ BrokerService class you should configure persistence to have ability to use scheduler functionality.</p>\n\n<pre><code>public boolean isSchedulerSupport() {\n    return this.schedulerSupport &amp;&amp; (isPersistent() || jobSchedulerStore != null);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2771702,"reputation":2815,"user_id":2386185,"display_name":"mech"},"score":7,"creation_date":1506191666,"post_id":46382919,"comment_id":79724197,"body_markdown":"Could you explain how this code snippet answers the question?","body":"Could you explain how this code snippet answers the question?"}],"tags":[],"owner":{"account_id":9967427,"reputation":1,"user_id":7374695,"display_name":"Barca"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1506191019,"creation_date":1506191019,"answer_id":46382919,"question_id":25121094,"body_markdown":"      jmsTemplate.convertAndSend(destination, message, new MessagePostProcessor() {\r\n                @Override\r\n                public Message postProcessMessage(Message message) throws JMSException {\r\n                    message.setIntProperty(&quot;JMS_OracleDelay&quot;, 200);\r\n                    return message;\r\n                }\r\n            });","title":"Spring JMS(ActiveMQ) delayed delivery of messages","body":"<pre><code>  jmsTemplate.convertAndSend(destination, message, new MessagePostProcessor() {\n            @Override\n            public Message postProcessMessage(Message message) throws JMSException {\n                message.setIntProperty(\"JMS_OracleDelay\", 200);\n                return message;\n            }\n        });\n</code></pre>\n"},{"comments":[{"owner":{"account_id":365844,"reputation":6300,"user_id":711006,"accept_rate":78,"display_name":"Melebius"},"score":3,"creation_date":1515579104,"post_id":48182540,"comment_id":83349660,"body_markdown":"Thank you for this code snippet, which might provide some limited, immediate help. A [proper explanation](https://meta.stackexchange.com/q/114762/349538) would greatly improve its long-term value by showing why this is a good solution to the problem and would make it more useful to future readers with other, similar questions. Please [edit] your answer to add some explanation, including the assumptions you’ve made.","body":"Thank you for this code snippet, which might provide some limited, immediate help. A <a href=\"https://meta.stackexchange.com/q/114762/349538\">proper explanation</a> would greatly improve its long-term value by showing why this is a good solution to the problem and would make it more useful to future readers with other, similar questions. Please <a href=\"https://stackoverflow.com/posts/48182540/edit\">edit</a> your answer to add some explanation, including the assumptions you’ve made."}],"tags":[],"owner":{"account_id":9927888,"reputation":11,"user_id":7348843,"display_name":"mr.tianshu"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1515570949,"creation_date":1515570387,"answer_id":48182540,"question_id":25121094,"body_markdown":"    broker-url: vm://embedded?broker.persistent=true&amp;broker.useShutdownHook=false&amp;broker.schedulerSupport=true","title":"Spring JMS(ActiveMQ) delayed delivery of messages","body":"<pre><code>broker-url: vm://embedded?broker.persistent=true&amp;broker.useShutdownHook=false&amp;broker.schedulerSupport=true\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1120665,"reputation":1381,"user_id":1109043,"accept_rate":50,"display_name":"neaGaze"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675350160,"creation_date":1517427993,"answer_id":48550276,"question_id":25121094,"body_markdown":"The JMS 2.0 is not supported in the activemq package. Try using artemis instead. Try replacing the package name from\r\n\r\n        &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-activemq&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.5.6.RELEASE&lt;/version&gt; \r\n\t\t&lt;/dependency&gt;\r\n\r\ninto \r\n\r\n        &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-artemis&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.5.6.RELEASE&lt;/version&gt; \r\n\t\t&lt;/dependency&gt;\r\n\r\nand also add in the application.properties\r\n\r\n        spring.artemis.mode=native\r\n        spring.artemis.host=localhost\r\n        spring.artemis.port=61616\r\n        spring.artemis.user=admin\r\n        spring.artemis.password=admin\r\n\r\n","title":"Spring JMS(ActiveMQ) delayed delivery of messages","body":"<p>The JMS 2.0 is not supported in the activemq package. Try using artemis instead. Try replacing the package name from</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-activemq&lt;/artifactId&gt;\n        &lt;version&gt;1.5.6.RELEASE&lt;/version&gt; \n    &lt;/dependency&gt;\n</code></pre>\n<p>into</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-artemis&lt;/artifactId&gt;\n        &lt;version&gt;1.5.6.RELEASE&lt;/version&gt; \n    &lt;/dependency&gt;\n</code></pre>\n<p>and also add in the application.properties</p>\n<pre><code>    spring.artemis.mode=native\n    spring.artemis.host=localhost\n    spring.artemis.port=61616\n    spring.artemis.user=admin\n    spring.artemis.password=admin\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15181773,"reputation":1,"user_id":10954869,"display_name":"Nurlan Rysbaev"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1548237021,"creation_date":1548237021,"answer_id":54324363,"question_id":25121094,"body_markdown":"Documentation http://activemq.apache.org/delay-and-schedule-message-delivery.html\r\n\r\nExample: after 10 sec received message by consumer\r\n\r\n    public void send(Object object) {\r\n        log.info(&quot;put &lt;&quot; + object + &quot;&gt;&quot;);\r\n        jmsTemplate.convertAndSend(QUEUE_NAME, object, m -&gt; {\r\n            m.setLongProperty(ScheduledMessage.AMQ_SCHEDULED_DELAY, 10000);\r\n            return m;\r\n        });\r\n    }\r\n\r\n","title":"Spring JMS(ActiveMQ) delayed delivery of messages","body":"<p>Documentation <a href=\"http://activemq.apache.org/delay-and-schedule-message-delivery.html\" rel=\"nofollow noreferrer\">http://activemq.apache.org/delay-and-schedule-message-delivery.html</a></p>\n\n<p>Example: after 10 sec received message by consumer</p>\n\n<pre><code>public void send(Object object) {\n    log.info(\"put &lt;\" + object + \"&gt;\");\n    jmsTemplate.convertAndSend(QUEUE_NAME, object, m -&gt; {\n        m.setLongProperty(ScheduledMessage.AMQ_SCHEDULED_DELAY, 10000);\n        return m;\n    });\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2624585,"reputation":1457,"user_id":2271895,"accept_rate":97,"display_name":"Tan"},"score":0,"creation_date":1593025864,"post_id":54434036,"comment_id":110638807,"body_markdown":"Could you tell me where in `conf/activemq.xml`, I should define this line ? `&lt;broker xmlns=&quot;http://activemq.apache.org/schema/core&quot; brokerName=&quot;localhost&quot; dataDirectory=&quot;${activemq.data}&quot; schedulerSupport=&quot;true&quot;&gt;`","body":"Could you tell me where in <code>conf&#47;activemq.xml</code>, I should define this line ? <code>&lt;broker xmlns=&quot;http:&#47;&#47;activemq.apache.org&#47;schema&#47;core&quot; brokerName=&quot;localhost&quot; dataDirectory=&quot;${activemq.data}&quot; schedulerSupport=&quot;true&quot;&gt;</code>"}],"tags":[],"owner":{"account_id":9150413,"reputation":4837,"user_id":6805190,"display_name":"dassum"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1572863134,"creation_date":1548827318,"answer_id":54434036,"question_id":25121094,"body_markdown":"Two things needs to be done to resolve this.\r\n\r\n - By default scheduled message support is disabled. We must enabled it in the broker XML configuration file.\r\n\r\n&gt; broker xmlns=&quot;http://activemq.apache.org/schema/core&quot;\r\n&gt; brokerName=&quot;localhost&quot; dataDirectory=&quot;${activemq.data}&quot;\r\n&gt; schedulerSupport=&quot;true&quot;&gt;\r\n\r\n - Set the delay before sending the message.\r\n\r\n\r\n\r\n        public void send(Object object) {\r\n            log.info(&quot;put &lt;&quot; + object + &quot;&gt;&quot;);\r\n            jmsTemplate.convertAndSend(QUEUE_NAME, object, m -&gt; {\r\n               m.setLongProperty(ScheduledMessage.AMQ_SCHEDULED_DELAY, 10000);\r\n               return m;\r\n            });\r\n        }\r\n\r\n","title":"Spring JMS(ActiveMQ) delayed delivery of messages","body":"<p>Two things needs to be done to resolve this.</p>\n\n<ul>\n<li>By default scheduled message support is disabled. We must enabled it in the broker XML configuration file.</li>\n</ul>\n\n<blockquote>\n  <p>broker xmlns=\"http://activemq.apache.org/schema/core\"\n  brokerName=\"localhost\" dataDirectory=\"${activemq.data}\"\n  schedulerSupport=\"true\"></p>\n</blockquote>\n\n<ul>\n<li><p>Set the delay before sending the message.</p>\n\n<pre><code>public void send(Object object) {\n    log.info(\"put &lt;\" + object + \"&gt;\");\n    jmsTemplate.convertAndSend(QUEUE_NAME, object, m -&gt; {\n       m.setLongProperty(ScheduledMessage.AMQ_SCHEDULED_DELAY, 10000);\n       return m;\n    });\n}\n</code></pre></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":14475107,"reputation":11,"user_id":10455947,"display_name":"Ray"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1574697263,"creation_date":1574694210,"answer_id":59034679,"question_id":25121094,"body_markdown":"1. I have added `schedulerSupport=true` in active mq configuration xml. Please dont forget to restart the active mq server after configuration changes. Once you restart and login to &quot;Scheduled&quot; tab on admin console of activemq, you would see scheduled message details.\r\n\r\n2. `jmsTemplate.setDeliveryDelay` did not work for me so I added the below piece of code :\r\nused \r\n```java\r\n    jmsTemplate.convertAndSend(queueName, object, new MessagePostProcessor() {\r\n            @Override\r\n            public Message postProcessMessage(Message message) throws JMSException {\r\n                message.setIntProperty(ScheduledMessage.AMQ_SCHEDULED_DELAY, scheduledDelay);\r\n                return message;\r\n            }\r\n        });\r\n```\r\nPlease note : It was not working for me in the beginning. But what was needed was an restart on activeMQ server to reflect the changes in config","title":"Spring JMS(ActiveMQ) delayed delivery of messages","body":"<ol>\n<li><p>I have added <code>schedulerSupport=true</code> in active mq configuration xml. Please dont forget to restart the active mq server after configuration changes. Once you restart and login to \"Scheduled\" tab on admin console of activemq, you would see scheduled message details.</p></li>\n<li><p><code>jmsTemplate.setDeliveryDelay</code> did not work for me so I added the below piece of code :\nused </p></li>\n</ol>\n\n<pre class=\"lang-java prettyprint-override\"><code>    jmsTemplate.convertAndSend(queueName, object, new MessagePostProcessor() {\n            @Override\n            public Message postProcessMessage(Message message) throws JMSException {\n                message.setIntProperty(ScheduledMessage.AMQ_SCHEDULED_DELAY, scheduledDelay);\n                return message;\n            }\n        });\n</code></pre>\n\n<p>Please note : It was not working for me in the beginning. But what was needed was an restart on activeMQ server to reflect the changes in config</p>\n"},{"tags":[],"owner":{"account_id":4311991,"reputation":3414,"user_id":3522818,"accept_rate":67,"display_name":"kerner1000"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687332332,"creation_date":1687253082,"answer_id":76513237,"question_id":25121094,"body_markdown":"You can also define a new, delaying JmsTemplate which you can autowire where needed:\r\n\r\n    @Bean\r\n    public JmsTemplate jmsTemplate(){\r\n        JmsTemplate jmsTemplate = new JmsTemplate();\r\n        jmsTemplate.setConnectionFactory(connectionFactory());\r\n        return jmsTemplate;\r\n    }\r\n\r\n    @Bean\r\n    public JmsTemplate delayingJmsTemplate(){\r\n        JmsTemplate jmsTemplate = new JmsTemplate();\r\n        jmsTemplate.setDeliveryDelay(1000);\r\n        jmsTemplate.setConnectionFactory(connectionFactory());\r\n        return jmsTemplate;\r\n    }\r\n\r\n    ...\r\n\r\n    @Autowired\r\n    private JmsTemplate jmsTemplate;\r\n    \r\n    @Autowired\r\n    private JmsTemplate delayingJmsTemplate;","title":"Spring JMS(ActiveMQ) delayed delivery of messages","body":"<p>You can also define a new, delaying JmsTemplate which you can autowire where needed:</p>\n<pre><code>@Bean\npublic JmsTemplate jmsTemplate(){\n    JmsTemplate jmsTemplate = new JmsTemplate();\n    jmsTemplate.setConnectionFactory(connectionFactory());\n    return jmsTemplate;\n}\n\n@Bean\npublic JmsTemplate delayingJmsTemplate(){\n    JmsTemplate jmsTemplate = new JmsTemplate();\n    jmsTemplate.setDeliveryDelay(1000);\n    jmsTemplate.setConnectionFactory(connectionFactory());\n    return jmsTemplate;\n}\n\n...\n\n@Autowired\nprivate JmsTemplate jmsTemplate;\n\n@Autowired\nprivate JmsTemplate delayingJmsTemplate;\n</code></pre>\n"}],"owner":{"account_id":3605469,"reputation":1723,"user_id":3007732,"accept_rate":64,"display_name":"Ayelet"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21103,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":25123584,"answer_count":9,"score":10,"last_activity_date":1687332332,"creation_date":1407162660,"question_id":25121094,"body_markdown":"We&#39;re trying to set a delay on some JMS messages, so that a message will only be added to the queue/ received by the listener after x time. So far we&#39;ve tried 2 approaches that didn&#39;t work.\r\n\r\n1) According to the spring documentation, we can set the delivery delay on the JMSTemplate. This is the sample code we tried:\r\n\r\n    @Autowired\r\n    private JmsTemplate jmsTemplate;\r\n\r\n    ...\r\n    long deliveryDelay = ...;\r\n\tthis.jmsTemplate.setDeliveryDelay(deliveryDelay);\r\n\tthis.jmsTemplate.convertAndSend(\r\n\t\t\t\t\t    queue.getName(),\r\n\t\t\t\t\t    event);\r\n    ...\r\n\r\nHowever, we get the following exception, even though our spring jms version is 4.0.5:\r\n\r\n    java.lang.IllegalStateException: setDeliveryDelay requires JMS 2.0\r\n\r\n2) We also tried setting the delay on the message itself, but it looks like the delay was ignored, and the message was delivered immediately anyway.\r\n\r\n\r\n    @Component\r\n    public class MyMessageConverter implements MessageConverter {\r\n\r\n    ...\r\n\r\n    @Override\r\n    public Message toMessage(Object eventObject, Session session) throws JMSException, MessageConversionException {\r\n\r\n    ...\r\n    long deliveryDelay = ...;\r\n\tobjectMessage.setLongProperty(\r\n\t\t\t\t      ScheduledMessage.AMQ_SCHEDULED_DELAY,\r\n\t\t\t\t      deliveryDelay);\r\n\treturn objectMessage;\r\n    }\r\n    }\r\n\r\n\r\nThe jmsTemplate definition in the spring xml:\r\n\r\n\t&lt;bean id=&quot;jmsTemplate&quot; class=&quot;org.springframework.jms.core.JmsTemplate&quot;&gt;\r\n\t\t&lt;property name=&quot;connectionFactory&quot; ref=&quot;cachingConnectionFactory&quot; /&gt;\r\n\t\t&lt;property name=&quot;messageConverter&quot; ref=&quot;myMessageConverter&quot; /&gt;\r\n\t\t&lt;property name=&quot;sessionTransacted&quot; value=&quot;true&quot; /&gt;\r\n\t&lt;/bean&gt;\r\n\r\n\r\nDoes anyone has any suggestions on what the problems are / other ideas on how to achieve delayed messaging?\r\nThanks!","title":"Spring JMS(ActiveMQ) delayed delivery of messages","body":"<p>We're trying to set a delay on some JMS messages, so that a message will only be added to the queue/ received by the listener after x time. So far we've tried 2 approaches that didn't work.</p>\n\n<p>1) According to the spring documentation, we can set the delivery delay on the JMSTemplate. This is the sample code we tried:</p>\n\n<pre><code>@Autowired\nprivate JmsTemplate jmsTemplate;\n\n...\nlong deliveryDelay = ...;\nthis.jmsTemplate.setDeliveryDelay(deliveryDelay);\nthis.jmsTemplate.convertAndSend(\n                    queue.getName(),\n                    event);\n...\n</code></pre>\n\n<p>However, we get the following exception, even though our spring jms version is 4.0.5:</p>\n\n<pre><code>java.lang.IllegalStateException: setDeliveryDelay requires JMS 2.0\n</code></pre>\n\n<p>2) We also tried setting the delay on the message itself, but it looks like the delay was ignored, and the message was delivered immediately anyway.</p>\n\n<pre><code>@Component\npublic class MyMessageConverter implements MessageConverter {\n\n...\n\n@Override\npublic Message toMessage(Object eventObject, Session session) throws JMSException, MessageConversionException {\n\n...\nlong deliveryDelay = ...;\nobjectMessage.setLongProperty(\n                  ScheduledMessage.AMQ_SCHEDULED_DELAY,\n                  deliveryDelay);\nreturn objectMessage;\n}\n}\n</code></pre>\n\n<p>The jmsTemplate definition in the spring xml:</p>\n\n<pre><code>&lt;bean id=\"jmsTemplate\" class=\"org.springframework.jms.core.JmsTemplate\"&gt;\n    &lt;property name=\"connectionFactory\" ref=\"cachingConnectionFactory\" /&gt;\n    &lt;property name=\"messageConverter\" ref=\"myMessageConverter\" /&gt;\n    &lt;property name=\"sessionTransacted\" value=\"true\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>Does anyone has any suggestions on what the problems are / other ideas on how to achieve delayed messaging?\nThanks!</p>\n"},{"tags":["java","csvreader"],"comments":[{"owner":{"account_id":18670408,"reputation":143,"user_id":13609359,"display_name":"Slevin"},"score":4,"creation_date":1687323432,"post_id":76519993,"comment_id":134918593,"body_markdown":"When using 3rd party libraries which are not part of the Java standard library you should mention which library you use. Have you checked whether the input file is UTF-8 or maybe rather ISO 8859-1 or Windows-1252?","body":"When using 3rd party libraries which are not part of the Java standard library you should mention which library you use. Have you checked whether the input file is UTF-8 or maybe rather ISO 8859-1 or Windows-1252?"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":4,"creation_date":1687323658,"post_id":76519993,"comment_id":134918627,"body_markdown":"are you sure that the reader is actually reading `&quot;Sonnige H�he&quot;`, or is it the console that is displaying it that way? How are you testing it?","body":"are you sure that the reader is actually reading <code>&quot;Sonnige H�he&quot;</code>, or is it the console that is displaying it that way? How are you testing it?"},{"owner":{"account_id":7166078,"reputation":145,"user_id":5475146,"display_name":"Robert Bethge"},"score":0,"creation_date":1687331425,"post_id":76519993,"comment_id":134919886,"body_markdown":"@Abra, I&#39;m using https://www.csvreader.com/java_csv/docs/com/csvreader/CsvReader.html","body":"@Abra, I&#39;m using <a href=\"https://www.csvreader.com/java_csv/docs/com/csvreader/CsvReader.html\" rel=\"nofollow noreferrer\">csvreader.com/java_csv/docs/com/csvreader/CsvReader.html</a>"},{"owner":{"account_id":7166078,"reputation":145,"user_id":5475146,"display_name":"Robert Bethge"},"score":0,"creation_date":1687331500,"post_id":76519993,"comment_id":134919902,"body_markdown":"@Slevin, it&#39;s a CSV file I got from the customer...probably generated by Excel.","body":"@Slevin, it&#39;s a CSV file I got from the customer...probably generated by Excel."},{"owner":{"account_id":7166078,"reputation":145,"user_id":5475146,"display_name":"Robert Bethge"},"score":0,"creation_date":1687331683,"post_id":76519993,"comment_id":134919961,"body_markdown":"@user16320675 I&#39;m using Eclipse and I stepped into the readRecord() method of the CsvReader class and I see the strings coming out wrong.","body":"@user16320675 I&#39;m using Eclipse and I stepped into the readRecord() method of the CsvReader class and I see the strings coming out wrong."},{"owner":{"account_id":7166078,"reputation":145,"user_id":5475146,"display_name":"Robert Bethge"},"score":0,"creation_date":1687332074,"post_id":76519993,"comment_id":134920037,"body_markdown":"@Slevin turns out you were right. If I change UTF-8 to ISO-8859-1, it works! Thanks all for your inputs!","body":"@Slevin turns out you were right. If I change UTF-8 to ISO-8859-1, it works! Thanks all for your inputs!"}],"answers":[{"comments":[{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":1,"creation_date":1687332408,"post_id":76520898,"comment_id":134920111,"body_markdown":"That means that your input is actually in ISO-8859-1 encoding. &quot;UTF-8&quot; is not magic: it&#39;s only correct to use when your input is actually in that encoding. While it&#39;s a good idea to [switch to UTF-8 wherever possible](https://utf8everywhere.org), that doesn&#39;t mean that it&#39;ll magically read things that are in different encodings correctly.","body":"That means that your input is actually in ISO-8859-1 encoding. &quot;UTF-8&quot; is not magic: it&#39;s only correct to use when your input is actually in that encoding. While it&#39;s a good idea to <a href=\"https://utf8everywhere.org\" rel=\"nofollow noreferrer\">switch to UTF-8 wherever possible</a>, that doesn&#39;t mean that it&#39;ll magically read things that are in different encodings correctly."}],"tags":[],"owner":{"account_id":7166078,"reputation":145,"user_id":5475146,"display_name":"Robert Bethge"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687332229,"creation_date":1687332229,"answer_id":76520898,"question_id":76519993,"body_markdown":"If I change the charset from UTF-8 to ISO-8859-1, it works. Here is the modified line:\r\n\t\t\t\r\n\r\n    // DOESN&#39;T WORK: CsvReader \taddressDataCsvFile\t\t=\tnew CsvReader(addressDataCsvFilename, &#39;,&#39;, Charset.forName(&quot;UTF-8&quot;) );\r\n    CsvReader \taddressDataCsvFile\t\t=\tnew CsvReader(addressDataCsvFilename, &#39;,&#39;, Charset.forName(&quot;ISO-8859-1&quot;) );\r\n\t\t\t","title":"Extracting Strings from CSV file using Java CSVReader messes up German Umlaute (&#246;,&#228;,&#252;,...)","body":"<p>If I change the charset from UTF-8 to ISO-8859-1, it works. Here is the modified line:</p>\n<pre><code>// DOESN'T WORK: CsvReader  addressDataCsvFile      =   new CsvReader(addressDataCsvFilename, ',', Charset.forName(&quot;UTF-8&quot;) );\nCsvReader   addressDataCsvFile      =   new CsvReader(addressDataCsvFilename, ',', Charset.forName(&quot;ISO-8859-1&quot;) );\n        \n</code></pre>\n"}],"owner":{"account_id":7166078,"reputation":145,"user_id":5475146,"display_name":"Robert Bethge"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":113,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1687332229,"creation_date":1687322461,"question_id":76519993,"body_markdown":"I&#39;m extracting German addresses from a CSV file using Java CsvReader. Some of the street names have special German characters, also called &quot;Umlaute&quot;, like &#246;,&#228;,&#252;,... (Example: Sonnige H&#246;he). Here is the code I use:\r\n```java\r\ntry {\r\n    String addressDataCsvFilename = &quot;Tannis_Export.csv&quot;;\r\n    CsvReader addressDataCsvFile = new CsvReader(addressDataCsvFilename, &#39;,&#39;, Charset.forName(&quot;UTF-8&quot;) );\r\n/*\r\n    String[] headers = {\r\n            &quot;PLZ&quot;,         // C\r\n            &quot;Strasse&quot;,     // E\r\n            &quot;Hausnummer&quot;,  // F\r\n        };\r\n */\r\n\r\n    // get headers\r\n    addressDataCsvFile.readHeaders();\r\n    while (addressDataCsvFile.readRecord()) {\r\n        // workaround for issue with CSVReader not finding header in first column\r\n        // String partNumber    = priceListCsvFile.get(&quot;PART NUMBER&quot;);\r\n        String postleitzahl  = addressDataCsvFile.get(&quot;PLZ&quot;);\r\n        String strassenName  = addressDataCsvFile.get(&quot;Strasse&quot;);\r\n        String hausNummer    = addressDataCsvFile.get(&quot;Hausnummer&quot;);\r\n```\r\nIt turns out that even though I&#39;m specifying UTF-8 as charset, `CsvReader.readRecord()` doesn&#39;t read the special German characters correctly, so &quot;Sonnige H&#246;he&quot; becomes &quot;Sonnige H�he&quot;. How to prevent that?","title":"Extracting Strings from CSV file using Java CSVReader messes up German Umlaute (&#246;,&#228;,&#252;,...)","body":"<p>I'm extracting German addresses from a CSV file using Java CsvReader. Some of the street names have special German characters, also called &quot;Umlaute&quot;, like ö,ä,ü,... (Example: Sonnige Höhe). Here is the code I use:</p>\n<pre class=\"lang-java prettyprint-override\"><code>try {\n    String addressDataCsvFilename = &quot;Tannis_Export.csv&quot;;\n    CsvReader addressDataCsvFile = new CsvReader(addressDataCsvFilename, ',', Charset.forName(&quot;UTF-8&quot;) );\n/*\n    String[] headers = {\n            &quot;PLZ&quot;,         // C\n            &quot;Strasse&quot;,     // E\n            &quot;Hausnummer&quot;,  // F\n        };\n */\n\n    // get headers\n    addressDataCsvFile.readHeaders();\n    while (addressDataCsvFile.readRecord()) {\n        // workaround for issue with CSVReader not finding header in first column\n        // String partNumber    = priceListCsvFile.get(&quot;PART NUMBER&quot;);\n        String postleitzahl  = addressDataCsvFile.get(&quot;PLZ&quot;);\n        String strassenName  = addressDataCsvFile.get(&quot;Strasse&quot;);\n        String hausNummer    = addressDataCsvFile.get(&quot;Hausnummer&quot;);\n</code></pre>\n<p>It turns out that even though I'm specifying UTF-8 as charset, <code>CsvReader.readRecord()</code> doesn't read the special German characters correctly, so &quot;Sonnige Höhe&quot; becomes &quot;Sonnige H�he&quot;. How to prevent that?</p>\n"},{"tags":["java","hibernate","jaxb","powermock","powermockito"],"owner":{"account_id":5809819,"reputation":3680,"user_id":4581287,"accept_rate":51,"display_name":"Parag Kadam"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687331964,"creation_date":1687268991,"question_id":76515439,"body_markdown":"I am getting this error when I run the powermock test. I am using java 13 and gradle 6.5.1. Any suggestion with this really help.\r\nThis is working fine with hibernate-core 5.3.21.Final and above but not with 5.2.x.\r\n \r\n**build.gradle:-**\r\n\r\n    plugins {\r\n        id &#39;java&#39;\r\n    }\r\n    \r\n    repositories {\r\n        mavenCentral()\r\n    }\r\n    \r\n    \r\n    dependencies {\r\n    \r\n        // hibernate &amp; JPA\r\n        implementation(&#39;org.springframework.boot:spring-boot-starter-data-jpa:2.2.12.RELEASE&#39;) {\r\n            exclude group: &#39;org.hibernate&#39;, module: &#39;hibernate-core&#39;\r\n        }\r\n        implementation &#39;org.hibernate:hibernate-core:5.2.17.Final&#39;\r\n    \r\n    \r\n        // junit\r\n        testCompile &#39;org.junit.jupiter:junit-jupiter:5.7.1&#39;\r\n        testCompile &#39;org.junit.vintage:junit-vintage-engine:5.7.1&#39;\r\n    \r\n    \r\n        // powermock\r\n        testCompile &#39;org.powermock:powermock-module-junit4:2.0.9&#39;\r\n        testCompile &#39;org.powermock:powermock-api-mockito2:2.0.9&#39;\r\n        testCompile &#39;org.powermock:powermock-api-mockito2:2.0.9&#39;\r\n    \r\n        // jaxb\r\n        implementation &#39;javax.xml.bind:jaxb-api:2.3.1&#39;\r\n        implementation &#39;com.sun.xml.bind:jaxb-impl:2.3.0&#39;\r\n        implementation &#39;com.sun.xml.bind:jaxb-core:2.3.0&#39;\r\n    }\r\n    \r\n    test {\r\n        useJUnitPlatform()\r\n    }\r\n\r\n**Test class:-**\r\n\r\n    import org.junit.Test;\r\n    import org.junit.runner.RunWith;\r\n    import org.powermock.core.classloader.annotations.PowerMockIgnore;\r\n    import org.powermock.modules.junit4.PowerMockRunner;\r\n    import org.springframework.context.ApplicationContext;\r\n    import org.springframework.context.support.ClassPathXmlApplicationContext;\r\n    \r\n    @RunWith(PowerMockRunner.class)\r\n    @PowerMockIgnore({&quot;jdk.internal.reflect.*&quot;, &quot;javax.xml.*&quot;, &quot;org.xml.*&quot;, &quot;org.w3c.*&quot;, &quot;com.sun.*&quot;})\r\n    public class PowerTest {\r\n        \r\n        @Test\r\n        public void myTest() {\r\n          ApplicationContext context = new ClassPathXmlApplicationContext(new String[] { &quot;testApplicationContext.xml&quot;});\r\n    \r\n        }\r\n    }\r\n\r\n**testApplicationContext.xml:-**\r\n\r\n    &lt;?xml version = &quot;1.0&quot; encoding = &quot;UTF-8&quot;?&gt;\r\n    \r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n           xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n           xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans\r\n            http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;\r\n    \r\n        &lt;bean class = &quot;org.springframework.orm.hibernate5.LocalSessionFactoryBean&quot; id = &quot;sessionFactory&quot; &gt;\r\n            &lt;property name = &quot;configLocation&quot;&gt;\r\n                &lt;value&gt;hibernate.cfg.xml&lt;/value&gt;\r\n            &lt;/property&gt;\r\n        &lt;/bean&gt;\r\n    &lt;/beans&gt;\r\n\r\n**hibernate.cfg.xml:-**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;!DOCTYPE hibernate-configuration PUBLIC\r\n            &quot;-//Hibernate/Hibernate Configuration DTD 5.0//EN&quot;\r\n            &quot;http://www.hibernate.org/dtd/hibernate-configuration-5.0.dtd&quot;&gt;\r\n    &lt;hibernate-configuration&gt;\r\n        &lt;session-factory&gt;\r\n            &lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;\r\n            &lt;property name=&quot;dialect&quot;&gt;org.hibernate.dialect.MySQLDialect&lt;/property&gt;  \r\n        &lt;/session-factory&gt;\r\n    &lt;/hibernate-configuration&gt;\r\n\r\n**Error log(minimalized):-**\r\n\r\n&gt; Error creating bean with name &#39;sessionFactory&#39; defined in class path\r\n&gt; resource [testApplicationContext.xml]: Invocation of init method\r\n&gt; failed; nested exception is\r\n&gt; org.hibernate.internal.util.config.ConfigurationException: Unable to\r\n&gt; perform unmarshalling at line number -1 and column -1 in URL\r\n&gt; file:/C:/GitHub/PowerMockTest/build/resources/test/hibernate.cfg.xml.\r\n&gt; Message: unexpected element\r\n&gt; (uri:&quot;http://www.hibernate.org/xsd/orm/cfg&quot;,\r\n&gt; local:&quot;hibernate-configuration&quot;). Expected elements are\r\n&gt; &lt;{}hibernate-configuration&gt;\r\n&gt; org.springframework.beans.factory.BeanCreationException: Error\r\n&gt; creating bean with name &#39;sessionFactory&#39; defined in class path\r\n&gt; resource [testApplicationContext.xml]: Invocation of init method\r\n&gt; failed; nested exception is\r\n&gt; org.hibernate.internal.util.config.ConfigurationException: Unable to\r\n&gt; perform unmarshalling at line number -1 and column -1 in URL\r\n&gt; file:/C:/GitHub/PowerMockTest/build/resources/test/hibernate.cfg.xml.\r\n&gt; Message: unexpected element\r\n&gt; (uri:&quot;http://www.hibernate.org/xsd/orm/cfg&quot;,\r\n&gt; local:&quot;hibernate-configuration&quot;). Expected elements are\r\n&gt; &lt;{}hibernate-configuration&gt; Caused by:\r\n&gt; org.hibernate.internal.util.config.ConfigurationException: Unable to\r\n&gt; perform unmarshalling at line number -1 and column -1 in URL\r\n&gt; file:/C:/GitHub/PowerMockTest/build/resources/test/hibernate.cfg.xml.\r\n&gt; Message: unexpected element\r\n&gt; (uri:&quot;http://www.hibernate.org/xsd/orm/cfg&quot;,\r\n&gt; local:&quot;hibernate-configuration&quot;). Expected elements are\r\n&gt; &lt;{}hibernate-configuration&gt; \tat\r\n&gt; org.hibernate.boot.cfgxml.internal.JaxbCfgProcessor.unmarshal(JaxbCfgProcessor.java:133)\r\n&gt; \tat\r\n&gt; org.hibernate.boot.cfgxml.internal.JaxbCfgProcessor.unmarshal(JaxbCfgProcessor.java:65)\r\n&gt; \tat\r\n&gt; org.hibernate.boot.cfgxml.internal.ConfigLoader.loadConfigXmlUrl(ConfigLoader.java:94)\r\n&gt; \tat\r\n&gt; org.hibernate.boot.registry.StandardServiceRegistryBuilder.configure(StandardServiceRegistryBuilder.java:171)\r\n&gt; \tat org.hibernate.cfg.Configuration.configure(Configuration.java:283)\r\n&gt; \tat\r\n&gt; org.springframework.orm.hibernate5.LocalSessionFactoryBean.afterPropertiesSet(LocalSessionFactoryBean.java:501)\r\n&gt; \tat\r\n&gt; org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1853)\r\n&gt; \tat\r\n&gt; org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1790)\r\n&gt; \t... 87 more Caused by: javax.xml.bind.UnmarshalException\r\n&gt;  - with linked exception: [com.sun.istack.SAXParseException2; unexpected element (uri:&quot;http://www.hibernate.org/xsd/orm/cfg&quot;,\r\n&gt; local:&quot;hibernate-configuration&quot;). Expected elements are\r\n&gt; &lt;{}hibernate-configuration&gt;] \tat\r\n&gt; com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.handleStreamException(UnmarshallerImpl.java:483)\r\n&gt; \tat\r\n&gt; com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:463)\r\n&gt; \tat\r\n&gt; com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal(UnmarshallerImpl.java:435)\r\n&gt; \tat\r\n&gt; org.hibernate.boot.cfgxml.internal.JaxbCfgProcessor.unmarshal(JaxbCfgProcessor.java:126)\r\n&gt; \t... 94 more Caused by: com.sun.istack.SAXParseException2; unexpected\r\n&gt; element (uri:&quot;http://www.hibernate.org/xsd/orm/cfg&quot;,\r\n&gt; local:&quot;hibernate-configuration&quot;). Expected elements are\r\n&gt; &lt;{}hibernate-configuration&gt; \tat\r\n&gt; com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallingContext.handleEvent(UnmarshallingContext.java:741)\r\n&gt; \t... 96 more Caused by: javax.xml.bind.UnmarshalException: unexpected\r\n&gt; element (uri:&quot;http://www.hibernate.org/xsd/orm/cfg&quot;,\r\n&gt; local:&quot;hibernate-configuration&quot;). Expected elements are\r\n&gt; &lt;{}hibernate-configuration&gt; \t... 108 more","title":"Powermock and JAXB causing javax.xml.bind.UnmarshalException","body":"<p>I am getting this error when I run the powermock test. I am using java 13 and gradle 6.5.1. Any suggestion with this really help.\nThis is working fine with hibernate-core 5.3.21.Final and above but not with 5.2.x.</p>\n<p><strong>build.gradle:-</strong></p>\n<pre><code>plugins {\n    id 'java'\n}\n\nrepositories {\n    mavenCentral()\n}\n\n\ndependencies {\n\n    // hibernate &amp; JPA\n    implementation('org.springframework.boot:spring-boot-starter-data-jpa:2.2.12.RELEASE') {\n        exclude group: 'org.hibernate', module: 'hibernate-core'\n    }\n    implementation 'org.hibernate:hibernate-core:5.2.17.Final'\n\n\n    // junit\n    testCompile 'org.junit.jupiter:junit-jupiter:5.7.1'\n    testCompile 'org.junit.vintage:junit-vintage-engine:5.7.1'\n\n\n    // powermock\n    testCompile 'org.powermock:powermock-module-junit4:2.0.9'\n    testCompile 'org.powermock:powermock-api-mockito2:2.0.9'\n    testCompile 'org.powermock:powermock-api-mockito2:2.0.9'\n\n    // jaxb\n    implementation 'javax.xml.bind:jaxb-api:2.3.1'\n    implementation 'com.sun.xml.bind:jaxb-impl:2.3.0'\n    implementation 'com.sun.xml.bind:jaxb-core:2.3.0'\n}\n\ntest {\n    useJUnitPlatform()\n}\n</code></pre>\n<p><strong>Test class:-</strong></p>\n<pre><code>import org.junit.Test;\nimport org.junit.runner.RunWith;\nimport org.powermock.core.classloader.annotations.PowerMockIgnore;\nimport org.powermock.modules.junit4.PowerMockRunner;\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\n\n@RunWith(PowerMockRunner.class)\n@PowerMockIgnore({&quot;jdk.internal.reflect.*&quot;, &quot;javax.xml.*&quot;, &quot;org.xml.*&quot;, &quot;org.w3c.*&quot;, &quot;com.sun.*&quot;})\npublic class PowerTest {\n    \n    @Test\n    public void myTest() {\n      ApplicationContext context = new ClassPathXmlApplicationContext(new String[] { &quot;testApplicationContext.xml&quot;});\n\n    }\n}\n</code></pre>\n<p><strong>testApplicationContext.xml:-</strong></p>\n<pre><code>&lt;?xml version = &quot;1.0&quot; encoding = &quot;UTF-8&quot;?&gt;\n\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans\n        http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;\n\n    &lt;bean class = &quot;org.springframework.orm.hibernate5.LocalSessionFactoryBean&quot; id = &quot;sessionFactory&quot; &gt;\n        &lt;property name = &quot;configLocation&quot;&gt;\n            &lt;value&gt;hibernate.cfg.xml&lt;/value&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n&lt;/beans&gt;\n</code></pre>\n<p><strong>hibernate.cfg.xml:-</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;!DOCTYPE hibernate-configuration PUBLIC\n        &quot;-//Hibernate/Hibernate Configuration DTD 5.0//EN&quot;\n        &quot;http://www.hibernate.org/dtd/hibernate-configuration-5.0.dtd&quot;&gt;\n&lt;hibernate-configuration&gt;\n    &lt;session-factory&gt;\n        &lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;\n        &lt;property name=&quot;dialect&quot;&gt;org.hibernate.dialect.MySQLDialect&lt;/property&gt;  \n    &lt;/session-factory&gt;\n&lt;/hibernate-configuration&gt;\n</code></pre>\n<p><strong>Error log(minimalized):-</strong></p>\n<blockquote>\n<p>Error creating bean with name 'sessionFactory' defined in class path\nresource [testApplicationContext.xml]: Invocation of init method\nfailed; nested exception is\norg.hibernate.internal.util.config.ConfigurationException: Unable to\nperform unmarshalling at line number -1 and column -1 in URL\nfile:/C:/GitHub/PowerMockTest/build/resources/test/hibernate.cfg.xml.\nMessage: unexpected element\n(uri:&quot;http://www.hibernate.org/xsd/orm/cfg&quot;,\nlocal:&quot;hibernate-configuration&quot;). Expected elements are\n&lt;{}hibernate-configuration&gt;\norg.springframework.beans.factory.BeanCreationException: Error\ncreating bean with name 'sessionFactory' defined in class path\nresource [testApplicationContext.xml]: Invocation of init method\nfailed; nested exception is\norg.hibernate.internal.util.config.ConfigurationException: Unable to\nperform unmarshalling at line number -1 and column -1 in URL\nfile:/C:/GitHub/PowerMockTest/build/resources/test/hibernate.cfg.xml.\nMessage: unexpected element\n(uri:&quot;http://www.hibernate.org/xsd/orm/cfg&quot;,\nlocal:&quot;hibernate-configuration&quot;). Expected elements are\n&lt;{}hibernate-configuration&gt; Caused by:\norg.hibernate.internal.util.config.ConfigurationException: Unable to\nperform unmarshalling at line number -1 and column -1 in URL\nfile:/C:/GitHub/PowerMockTest/build/resources/test/hibernate.cfg.xml.\nMessage: unexpected element\n(uri:&quot;http://www.hibernate.org/xsd/orm/cfg&quot;,\nlocal:&quot;hibernate-configuration&quot;). Expected elements are\n&lt;{}hibernate-configuration&gt;   at\norg.hibernate.boot.cfgxml.internal.JaxbCfgProcessor.unmarshal(JaxbCfgProcessor.java:133)\nat\norg.hibernate.boot.cfgxml.internal.JaxbCfgProcessor.unmarshal(JaxbCfgProcessor.java:65)\nat\norg.hibernate.boot.cfgxml.internal.ConfigLoader.loadConfigXmlUrl(ConfigLoader.java:94)\nat\norg.hibernate.boot.registry.StandardServiceRegistryBuilder.configure(StandardServiceRegistryBuilder.java:171)\nat org.hibernate.cfg.Configuration.configure(Configuration.java:283)\nat\norg.springframework.orm.hibernate5.LocalSessionFactoryBean.afterPropertiesSet(LocalSessionFactoryBean.java:501)\nat\norg.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1853)\nat\norg.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1790)\n... 87 more Caused by: javax.xml.bind.UnmarshalException</p>\n<ul>\n<li>with linked exception: [com.sun.istack.SAXParseException2; unexpected element (uri:&quot;http://www.hibernate.org/xsd/orm/cfg&quot;,\nlocal:&quot;hibernate-configuration&quot;). Expected elements are\n&lt;{}hibernate-configuration&gt;]  at\ncom.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.handleStreamException(UnmarshallerImpl.java:483)\nat\ncom.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:463)\nat\ncom.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal(UnmarshallerImpl.java:435)\nat\norg.hibernate.boot.cfgxml.internal.JaxbCfgProcessor.unmarshal(JaxbCfgProcessor.java:126)\n... 94 more Caused by: com.sun.istack.SAXParseException2; unexpected\nelement (uri:&quot;http://www.hibernate.org/xsd/orm/cfg&quot;,\nlocal:&quot;hibernate-configuration&quot;). Expected elements are\n&lt;{}hibernate-configuration&gt;   at\ncom.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallingContext.handleEvent(UnmarshallingContext.java:741)\n... 96 more Caused by: javax.xml.bind.UnmarshalException: unexpected\nelement (uri:&quot;http://www.hibernate.org/xsd/orm/cfg&quot;,\nlocal:&quot;hibernate-configuration&quot;). Expected elements are\n&lt;{}hibernate-configuration&gt;   ... 108 more</li>\n</ul>\n</blockquote>\n"},{"tags":["java","android","cordova","gradle"],"owner":{"account_id":28695611,"reputation":13,"user_id":21973895,"display_name":"DYNAMO"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":97,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687331784,"creation_date":1687331350,"question_id":76520790,"body_markdown":"[![REQUIREMENTS][1]][1]\r\n\r\n[![TERMINAL IMG WITH ERROR][2]][2]\r\n\r\nMicrosoft Windows [Version 10.0.19044.2846]\r\n(c) Microsoft Corporation. T&#252;m hakları saklıdır.\r\n\r\nC:\\Users\\acer&gt;cordova create demo com.dynm.demo demo\r\nCreating a new cordova project.\r\n\r\nC:\\Users\\acer&gt;cd demo\r\n\r\nC:\\Users\\acer\\demo&gt;cordova platform add android\r\nUsing cordova-fetch for cordova-android\r\nAdding android project...\r\nCreating Cordova project for the Android platform:\r\n        Path: platforms\\android\r\n        Package: com.dynm.demo\r\n        Name: demo\r\n        Activity: MainActivity\r\n        Android Target SDK: android-33\r\n        Android Compile SDK: 33\r\nSubproject Path: CordovaLib\r\nSubproject Path: app\r\nAndroid project created with cordova-android@12.0.0\r\n\r\nC:\\Users\\acer\\demo&gt;cordova build\r\nChecking Java JDK and Android SDK versions\r\nANDROID_HOME=C:\\Users\\acer\\AppData\\Local\\Android\\Sdk (recommended setting)\r\nANDROID_SDK_ROOT=undefined (DEPRECATED)\r\nUsing Android SDK: C:\\Users\\acer\\AppData\\Local\\Android\\Sdk\r\n\r\nWelcome to Gradle 7.4.1!\r\n\r\nHere are the highlights of this release:\r\n - Aggregated test and JaCoCo reports\r\n - Marking additional test source directories as tests in IntelliJ\r\n - Support for Adoptium JDKs in Java toolchains\r\n\r\nFor more details see https://docs.gradle.org/7.4.1/release-notes.html\r\n\r\nStarting a Gradle Daemon (subsequent builds will be faster)\r\n\r\nDeprecated Gradle features were used in this build, making it incompatible with Gradle 8.0.\r\n\r\nYou can use &#39;--warning-mode all&#39; to show the individual deprecation warnings and determine if they come from your own scripts or plugins.\r\n\r\nSee https://docs.gradle.org/7.4.1/userguide/command_line_interface.html#sec:command_line_warnings\r\n\r\nBU&#166;LD SUCCESSFUL in 6s\r\n1 actionable task: 1 executed\r\nSubproject Path: CordovaLib\r\nSubproject Path: app\r\nStarting a Gradle Daemon, 2 incompatible Daemons could not be reused, use --status for details\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nA problem occurred configuring root project &#39;demo&#39;.\r\n&gt; Could not resolve all files for configuration &#39;:classpath&#39;.\r\n   &gt; Could not resolve com.android.tools.build:gradle:7.4.2.\r\n     Required by:\r\n         project :\r\n      &gt; No matching variant of com.android.tools.build:gradle:7.4.2 was found. The consumer was configured to find a runtime of a library compatible with Java 8, packaged as a jar, and its dependencies declared externally, as well as attribute &#39;org.gradle.plugin.api-version&#39; with value &#39;7.6&#39; but:\r\n          - Variant &#39;apiElements&#39; capability com.android.tools.build:gradle:7.4.2 declares a library, packaged as a jar, and its dependencies declared externally:\r\n              - Incompatible because this component declares an API of a component compatible with Java 11 and the consumer needed a runtime of a component compatible with Java 8\r\n              - Other compatible attribute:\r\n                  - Doesn&#39;t say anything about org.gradle.plugin.api-version (required &#39;7.6&#39;)\r\n          - Variant &#39;javadocElements&#39; capability com.android.tools.build:gradle:7.4.2 declares a runtime of a component, and its dependencies declared externally:\r\n              - Incompatible because this component declares documentation and the consumer needed a library\r\n              - Other compatible attributes:\r\n                  - Doesn&#39;t say anything about its target Java version (required compatibility with Java 8)\r\n                  - Doesn&#39;t say anything about its elements (required them packaged as a jar)\r\n                  - Doesn&#39;t say anything about org.gradle.plugin.api-version (required &#39;7.6&#39;)\r\n          - Variant &#39;runtimeElements&#39; capability com.android.tools.build:gradle:7.4.2 declares a runtime of a library, packaged as a jar, and its dependencies declared externally:\r\n              - Incompatible because this component declares a component compatible with Java 11 and the consumer needed a component compatible with Java 8\r\n              - Other compatible attribute:\r\n                  - Doesn&#39;t say anything about org.gradle.plugin.api-version (required &#39;7.6&#39;)\r\n          - Variant &#39;sourcesElements&#39; capability com.android.tools.build:gradle:7.4.2 declares a runtime of a component, and its dependencies declared externally:\r\n              - Incompatible because this component declares documentation and the consumer needed a library\r\n              - Other compatible attributes:\r\n                  - Doesn&#39;t say anything about its target Java version (required compatibility with Java 8)\r\n                  - Doesn&#39;t say anything about its elements (required them packaged as a jar)\r\n                  - Doesn&#39;t say anything about org.gradle.plugin.api-version (required &#39;7.6&#39;)\r\n\r\n* Try:\r\n&gt; Run with --stacktrace option to get the stack trace.\r\n&gt; Run with --info or --debug option to get more log output.\r\n&gt; Run with --scan to get full insights.\r\n\r\n* Get more help at https://help.gradle.org\r\n\r\nDeprecated Gradle features were used in this build, making it incompatible with Gradle 8.0.\r\n\r\nYou can use &#39;--warning-mode all&#39; to show the individual deprecation warnings and determine if they come from your own scripts or plugins.\r\n\r\nSee https://docs.gradle.org/7.6/userguide/command_line_interface.html#sec:command_line_warnings\r\n\r\nBU&#166;LD FAILED in 6s\r\nCommand failed with exit code 1: C:\\Users\\acer\\demo\\platforms\\android\\gradlew -b C:\\Users\\acer\\demo\\platforms\\android\\build.gradle cdvBuildDebug\r\n\r\nC:\\Users\\acer\\demo&gt;cordova requirements\r\n\r\nRequirements check results for android:\r\nJava JDK: installed 1.8.0\r\nAndroid SDK: installed true\r\nAndroid target: not installed\r\nCommand failed with exit code 1: avdmanager list target\r\n&#39;avdmanager&#39; is not recognized as an internal or external command,\r\noperable program or batch file.\r\nGradle: installed C:\\gradle-7.4.1\\bin\\gradle.BAT\r\nSome of requirements check failed\r\n\r\nHow can ı slow this problem?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/tuoq3.png\r\n  [2]: https://i.stack.imgur.com/TWsPc.png","title":"About Apache Cordova Setup","body":"<p><a href=\"https://i.stack.imgur.com/tuoq3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tuoq3.png\" alt=\"REQUIREMENTS\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/TWsPc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TWsPc.png\" alt=\"TERMINAL IMG WITH ERROR\" /></a></p>\n<p>Microsoft Windows [Version 10.0.19044.2846]\n(c) Microsoft Corporation. Tüm hakları saklıdır.</p>\n<p>C:\\Users\\acer&gt;cordova create demo com.dynm.demo demo\nCreating a new cordova project.</p>\n<p>C:\\Users\\acer&gt;cd demo</p>\n<p>C:\\Users\\acer\\demo&gt;cordova platform add android\nUsing cordova-fetch for cordova-android\nAdding android project...\nCreating Cordova project for the Android platform:\nPath: platforms\\android\nPackage: com.dynm.demo\nName: demo\nActivity: MainActivity\nAndroid Target SDK: android-33\nAndroid Compile SDK: 33\nSubproject Path: CordovaLib\nSubproject Path: app\nAndroid project created with cordova-android@12.0.0</p>\n<p>C:\\Users\\acer\\demo&gt;cordova build\nChecking Java JDK and Android SDK versions\nANDROID_HOME=C:\\Users\\acer\\AppData\\Local\\Android\\Sdk (recommended setting)\nANDROID_SDK_ROOT=undefined (DEPRECATED)\nUsing Android SDK: C:\\Users\\acer\\AppData\\Local\\Android\\Sdk</p>\n<p>Welcome to Gradle 7.4.1!</p>\n<p>Here are the highlights of this release:</p>\n<ul>\n<li>Aggregated test and JaCoCo reports</li>\n<li>Marking additional test source directories as tests in IntelliJ</li>\n<li>Support for Adoptium JDKs in Java toolchains</li>\n</ul>\n<p>For more details see <a href=\"https://docs.gradle.org/7.4.1/release-notes.html\" rel=\"nofollow noreferrer\">https://docs.gradle.org/7.4.1/release-notes.html</a></p>\n<p>Starting a Gradle Daemon (subsequent builds will be faster)</p>\n<p>Deprecated Gradle features were used in this build, making it incompatible with Gradle 8.0.</p>\n<p>You can use '--warning-mode all' to show the individual deprecation warnings and determine if they come from your own scripts or plugins.</p>\n<p>See <a href=\"https://docs.gradle.org/7.4.1/userguide/command_line_interface.html#sec:command_line_warnings\" rel=\"nofollow noreferrer\">https://docs.gradle.org/7.4.1/userguide/command_line_interface.html#sec:command_line_warnings</a></p>\n<p>BU¦LD SUCCESSFUL in 6s\n1 actionable task: 1 executed\nSubproject Path: CordovaLib\nSubproject Path: app\nStarting a Gradle Daemon, 2 incompatible Daemons could not be reused, use --status for details</p>\n<p>FAILURE: Build failed with an exception.</p>\n<ul>\n<li>What went wrong:\nA problem occurred configuring root project 'demo'.</li>\n</ul>\n<blockquote>\n<p>Could not resolve all files for configuration ':classpath'.\nCould not resolve com.android.tools.build:gradle:7.4.2.\nRequired by:\nproject :\n&gt; No matching variant of com.android.tools.build:gradle:7.4.2 was found. The consumer was configured to find a runtime of a library compatible with Java 8, packaged as a jar, and its dependencies declared externally, as well as attribute 'org.gradle.plugin.api-version' with value '7.6' but:\n- Variant 'apiElements' capability com.android.tools.build:gradle:7.4.2 declares a library, packaged as a jar, and its dependencies declared externally:\n- Incompatible because this component declares an API of a component compatible with Java 11 and the consumer needed a runtime of a component compatible with Java 8\n- Other compatible attribute:\n- Doesn't say anything about org.gradle.plugin.api-version (required '7.6')\n- Variant 'javadocElements' capability com.android.tools.build:gradle:7.4.2 declares a runtime of a component, and its dependencies declared externally:\n- Incompatible because this component declares documentation and the consumer needed a library\n- Other compatible attributes:\n- Doesn't say anything about its target Java version (required compatibility with Java 8)\n- Doesn't say anything about its elements (required them packaged as a jar)\n- Doesn't say anything about org.gradle.plugin.api-version (required '7.6')\n- Variant 'runtimeElements' capability com.android.tools.build:gradle:7.4.2 declares a runtime of a library, packaged as a jar, and its dependencies declared externally:\n- Incompatible because this component declares a component compatible with Java 11 and the consumer needed a component compatible with Java 8\n- Other compatible attribute:\n- Doesn't say anything about org.gradle.plugin.api-version (required '7.6')\n- Variant 'sourcesElements' capability com.android.tools.build:gradle:7.4.2 declares a runtime of a component, and its dependencies declared externally:\n- Incompatible because this component declares documentation and the consumer needed a library\n- Other compatible attributes:\n- Doesn't say anything about its target Java version (required compatibility with Java 8)\n- Doesn't say anything about its elements (required them packaged as a jar)\n- Doesn't say anything about org.gradle.plugin.api-version (required '7.6')</p>\n</blockquote>\n<ul>\n<li>Try:</li>\n</ul>\n<blockquote>\n<p>Run with --stacktrace option to get the stack trace.\nRun with --info or --debug option to get more log output.\nRun with --scan to get full insights.</p>\n</blockquote>\n<ul>\n<li>Get more help at <a href=\"https://help.gradle.org\" rel=\"nofollow noreferrer\">https://help.gradle.org</a></li>\n</ul>\n<p>Deprecated Gradle features were used in this build, making it incompatible with Gradle 8.0.</p>\n<p>You can use '--warning-mode all' to show the individual deprecation warnings and determine if they come from your own scripts or plugins.</p>\n<p>See <a href=\"https://docs.gradle.org/7.6/userguide/command_line_interface.html#sec:command_line_warnings\" rel=\"nofollow noreferrer\">https://docs.gradle.org/7.6/userguide/command_line_interface.html#sec:command_line_warnings</a></p>\n<p>BU¦LD FAILED in 6s\nCommand failed with exit code 1: C:\\Users\\acer\\demo\\platforms\\android\\gradlew -b C:\\Users\\acer\\demo\\platforms\\android\\build.gradle cdvBuildDebug</p>\n<p>C:\\Users\\acer\\demo&gt;cordova requirements</p>\n<p>Requirements check results for android:\nJava JDK: installed 1.8.0\nAndroid SDK: installed true\nAndroid target: not installed\nCommand failed with exit code 1: avdmanager list target\n'avdmanager' is not recognized as an internal or external command,\noperable program or batch file.\nGradle: installed C:\\gradle-7.4.1\\bin\\gradle.BAT\nSome of requirements check failed</p>\n<p>How can ı slow this problem?</p>\n"},{"tags":["java","jquery","cors","jersey"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1685935460,"post_id":76403264,"comment_id":134725286,"body_markdown":"What&#39;s the value of `errorThrown`?","body":"What&#39;s the value of <code>errorThrown</code>?"},{"owner":{"account_id":9832992,"reputation":155,"user_id":7284173,"display_name":"Felix H"},"score":0,"creation_date":1685936020,"post_id":76403264,"comment_id":134725334,"body_markdown":"Unfortunately, errorThrown is undefined.","body":"Unfortunately, errorThrown is undefined."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1685937273,"post_id":76403264,"comment_id":134725422,"body_markdown":"I suggest you step into `$.ajax(ajaxObj)` and see exactly what&#39;s happening. (Use the uncompressed version of jQuery)","body":"I suggest you step into <code>$.ajax(ajaxObj)</code> and see exactly what&#39;s happening. (Use the uncompressed version of jQuery)"}],"answers":[{"tags":[],"owner":{"account_id":9832992,"reputation":155,"user_id":7284173,"display_name":"Felix H"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687331428,"creation_date":1687331428,"answer_id":76520798,"question_id":76403264,"body_markdown":"I found the answer to my problem. The reason the query did not reach the server was, that the integrated browser in my desktop application uses an old encryption protocol which was blocked by the server. It requires TLSv1. That is also the reason why it worked fine in my test file because there I was using an up-to-date browser which used a new encryption protocol. Now I have to find a solution for my server properties without endangering my server.","title":"Cannot access server REST API from integrated browser using jquery","body":"<p>I found the answer to my problem. The reason the query did not reach the server was, that the integrated browser in my desktop application uses an old encryption protocol which was blocked by the server. It requires TLSv1. That is also the reason why it worked fine in my test file because there I was using an up-to-date browser which used a new encryption protocol. Now I have to find a solution for my server properties without endangering my server.</p>\n"}],"owner":{"account_id":9832992,"reputation":155,"user_id":7284173,"display_name":"Felix H"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1687331428,"creation_date":1685933745,"question_id":76403264,"body_markdown":"I am having a Jersey REST Service application running on a server. This application should be accessed from a desktop application with an integrated browser, for which I can define HTML pages with Javascript. Thus, the client code is executed locally with the origin d://. When I am running my Jersey Application on my local computer with a localhost address, everything runs perfectly fine. However, when I deploy the Jersey application on the server and try to access it from my desktop application, an error is returned with the status 0. Using Postman on my local computer, I have no issue accessing the jersey appliation on the server. However, when I am checking my logs, I see, that no preflight request is sent via Postman (no request with origin != null). &lt;br&gt;\r\nBased on this problem I am guessing, that this is related to CORS. I added a CORS filter to my Jersey application but it is still not working. The server is not registering any incoming requests from my Desktop application. Has anybody an idea what I am missing? Thank you for the support.&lt;br&gt;&lt;br&gt;\r\nMy code for querying the data in the Desktop application:\r\n\r\n    var ajaxObj = {\r\n\t\t\ttype: &quot;POST&quot;, \r\n\t\t\turl: jerseyApplicationUrl,\r\n\t\t\tcrossDomain: true,\r\n\t\t\tdata: JSON.stringify(inputFile),  \r\n\t\t\tcontentType:&quot;application/json&quot;,\r\n\t\t\terror: function(jqXHR, textStatus, errorThrown) {\r\n\t\t\t\tconsole.log(&quot;Error &quot;+ textStatus +&quot; &quot; + jqXHR.getAllResponseHeaders() + &quot; &quot; + errorThrown+ &quot; &quot;+ jqXHR.status+&quot; &quot; +jqXHR.responseText);\r\n\t\t\t//Output: Error error 0 undefined\r\n\t\t\t},\r\n\t\t\tsuccess: function(data) { \r\n\t\t\t\t\tconsole.log(&quot;Server returns success for data query with result &quot;);\r\n\t\t\t},\r\n\t\t\tcomplete: function(XMLHttpRequest) {\r\n\t\t\t\t//console.log( XMLHttpRequest.getAllResponseHeaders() );\r\n\t\t\t}, \r\n\t\t\tdataType: &quot;json&quot; //request JSON\t\r\n\t\t};\r\n\t\t$.ajax(ajaxObj);\r\n\r\n&lt;br&gt;\r\nMy CORS class in the Jersey Application:\r\n\r\n    @Provider\r\n    @PreMatching\r\n    public class CorsFilter implements ContainerRequestFilter, ContainerResponseFilter {\r\n    \r\n        @Override\r\n        public void filter(ContainerRequestContext request) throws IOException {\r\n    \t// If it&#39;s a preflight request, we abort the request with \r\n        // a 200 status, and the CORS headers are added in the\r\n        // response filter method below.\r\n        if (isPreflightRequest(request)) {\r\n            request.abortWith(Response.ok().build());\r\n            return;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * A preflight request is an OPTIONS request\r\n     * with an Origin header.\r\n     */\r\n    private static boolean isPreflightRequest(ContainerRequestContext request) {\r\n        return request.getHeaderString(&quot;Origin&quot;) != null\r\n                &amp;&amp; request.getMethod().equalsIgnoreCase(&quot;OPTIONS&quot;);\r\n    }\r\n    \r\n    /**\r\n     * Method for ContainerResponseFilter.\r\n     */\r\n    @Override\r\n    public void filter(ContainerRequestContext request, ContainerResponseContext response)\r\n            throws IOException {\r\n    \tboolean debug = MtcServiceApplication.getInstance()!=null?MtcServiceApplication.getInstance().isDebug():false;\r\n    \t// if there is no Origin header, then it is not a\r\n        // cross origin request. We don&#39;t do anything.\r\n        if (request.getHeaderString(&quot;Origin&quot;) == null) {\r\n            return;\r\n        }\r\n\r\n        // If it is a preflight request, then we add all\r\n        // the CORS headers here.\r\n        if (isPreflightRequest(request)) {\r\n        \tresponse.getHeaders().add(&quot;Access-Control-Allow-Credentials&quot;, &quot;true&quot;);\r\n            response.getHeaders().add(&quot;Access-Control-Allow-Methods&quot;,\r\n                &quot;GET, POST, PUT, DELETE, OPTIONS, HEAD&quot;);\r\n            response.getHeaders().add(&quot;Access-Control-Allow-Headers&quot;,\r\n                // Whatever other non-standard/safe headers (see list above) \r\n                // you want the client to be able to send to the server,\r\n                // put it in this list. And remove the ones you don&#39;t want.\r\n                &quot;X-Requested-With, Authorization, &quot; +\r\n                &quot;Accept-Version, Content-MD5, CSRF-Token, Content-Type&quot;);\r\n        }\r\n        \r\n        // Cross origin requests can be either simple requests\r\n        // or preflight request. We need to add this header\r\n        // to both type of requests. Only preflight requests\r\n        // need the previously added headers.\r\n        response.getHeaders().add(&quot;Access-Control-Allow-Origin&quot;, &quot;*&quot;);\r\n    }\r\n    }\r\n","title":"Cannot access server REST API from integrated browser using jquery","body":"<p>I am having a Jersey REST Service application running on a server. This application should be accessed from a desktop application with an integrated browser, for which I can define HTML pages with Javascript. Thus, the client code is executed locally with the origin d://. When I am running my Jersey Application on my local computer with a localhost address, everything runs perfectly fine. However, when I deploy the Jersey application on the server and try to access it from my desktop application, an error is returned with the status 0. Using Postman on my local computer, I have no issue accessing the jersey appliation on the server. However, when I am checking my logs, I see, that no preflight request is sent via Postman (no request with origin != null). <br>\nBased on this problem I am guessing, that this is related to CORS. I added a CORS filter to my Jersey application but it is still not working. The server is not registering any incoming requests from my Desktop application. Has anybody an idea what I am missing? Thank you for the support.<br><br>\nMy code for querying the data in the Desktop application:</p>\n<pre><code>var ajaxObj = {\n        type: &quot;POST&quot;, \n        url: jerseyApplicationUrl,\n        crossDomain: true,\n        data: JSON.stringify(inputFile),  \n        contentType:&quot;application/json&quot;,\n        error: function(jqXHR, textStatus, errorThrown) {\n            console.log(&quot;Error &quot;+ textStatus +&quot; &quot; + jqXHR.getAllResponseHeaders() + &quot; &quot; + errorThrown+ &quot; &quot;+ jqXHR.status+&quot; &quot; +jqXHR.responseText);\n        //Output: Error error 0 undefined\n        },\n        success: function(data) { \n                console.log(&quot;Server returns success for data query with result &quot;);\n        },\n        complete: function(XMLHttpRequest) {\n            //console.log( XMLHttpRequest.getAllResponseHeaders() );\n        }, \n        dataType: &quot;json&quot; //request JSON \n    };\n    $.ajax(ajaxObj);\n</code></pre>\n<br>\nMy CORS class in the Jersey Application:\n<pre><code>@Provider\n@PreMatching\npublic class CorsFilter implements ContainerRequestFilter, ContainerResponseFilter {\n\n    @Override\n    public void filter(ContainerRequestContext request) throws IOException {\n    // If it's a preflight request, we abort the request with \n    // a 200 status, and the CORS headers are added in the\n    // response filter method below.\n    if (isPreflightRequest(request)) {\n        request.abortWith(Response.ok().build());\n        return;\n    }\n}\n\n/**\n * A preflight request is an OPTIONS request\n * with an Origin header.\n */\nprivate static boolean isPreflightRequest(ContainerRequestContext request) {\n    return request.getHeaderString(&quot;Origin&quot;) != null\n            &amp;&amp; request.getMethod().equalsIgnoreCase(&quot;OPTIONS&quot;);\n}\n\n/**\n * Method for ContainerResponseFilter.\n */\n@Override\npublic void filter(ContainerRequestContext request, ContainerResponseContext response)\n        throws IOException {\n    boolean debug = MtcServiceApplication.getInstance()!=null?MtcServiceApplication.getInstance().isDebug():false;\n    // if there is no Origin header, then it is not a\n    // cross origin request. We don't do anything.\n    if (request.getHeaderString(&quot;Origin&quot;) == null) {\n        return;\n    }\n\n    // If it is a preflight request, then we add all\n    // the CORS headers here.\n    if (isPreflightRequest(request)) {\n        response.getHeaders().add(&quot;Access-Control-Allow-Credentials&quot;, &quot;true&quot;);\n        response.getHeaders().add(&quot;Access-Control-Allow-Methods&quot;,\n            &quot;GET, POST, PUT, DELETE, OPTIONS, HEAD&quot;);\n        response.getHeaders().add(&quot;Access-Control-Allow-Headers&quot;,\n            // Whatever other non-standard/safe headers (see list above) \n            // you want the client to be able to send to the server,\n            // put it in this list. And remove the ones you don't want.\n            &quot;X-Requested-With, Authorization, &quot; +\n            &quot;Accept-Version, Content-MD5, CSRF-Token, Content-Type&quot;);\n    }\n    \n    // Cross origin requests can be either simple requests\n    // or preflight request. We need to add this header\n    // to both type of requests. Only preflight requests\n    // need the previously added headers.\n    response.getHeaders().add(&quot;Access-Control-Allow-Origin&quot;, &quot;*&quot;);\n}\n}\n</code></pre>\n"},{"tags":["java","spring-boot","jar","graalvm-native-image"],"comments":[{"owner":{"account_id":58650,"reputation":3399,"user_id":175554,"accept_rate":40,"display_name":"ozkanpakdil"},"score":1,"creation_date":1687292425,"post_id":76516192,"comment_id":134915591,"body_markdown":"as [explained](https://www.graalvm.org/latest/reference-manual/native-image/dynamic-features/Resources/) that is a parameter for building not &quot;runtime&quot; meaning when you compile your code you use &quot;-H:IncludeResources&quot; which will include the resources at the output native image.","body":"as <a href=\"https://www.graalvm.org/latest/reference-manual/native-image/dynamic-features/Resources/\" rel=\"nofollow noreferrer\">explained</a> that is a parameter for building not &quot;runtime&quot; meaning when you compile your code you use &quot;-H:IncludeResources&quot; which will include the resources at the output native image."},{"owner":{"account_id":14482834,"reputation":3924,"user_id":10461625,"display_name":"PatPanda"},"score":1,"creation_date":1687299280,"post_id":76516192,"comment_id":134916567,"body_markdown":"You are correct, thanks for pointing out. Corrected, upvoted your comment","body":"You are correct, thanks for pointing out. Corrected, upvoted your comment"}],"answers":[{"tags":[],"owner":{"account_id":23020603,"reputation":341,"user_id":17141716,"display_name":"peterz"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1687331299,"creation_date":1687331299,"answer_id":76520783,"question_id":76516192,"body_markdown":"You can pass parameters to `native-image` using `&lt;buildArgs&gt;` element:\r\n```\r\n&lt;plugin&gt;\r\n  &lt;groupId&gt;org.graalvm.buildtools&lt;/groupId&gt;\r\n  &lt;artifactId&gt;native-maven-plugin&lt;/artifactId&gt;\r\n  &lt;configuration&gt;\r\n    &lt;buildArgs&gt;\r\n      &lt;buildArg&gt;-H:IncludeResources=...&lt;/buildArg&gt;\r\n    &lt;/buildArgs&gt;\r\n  &lt;/configuration&gt;\r\n&lt;/plugin&gt;\r\n```\r\nSee this [GraalVM doc](https://graalvm.github.io/native-build-tools/latest/maven-plugin.html#configuration-reusing-config-from-parent) for more details","title":"Building SpringBoot GraalVM native image with -H parameter","body":"<p>You can pass parameters to <code>native-image</code> using <code>&lt;buildArgs&gt;</code> element:</p>\n<pre><code>&lt;plugin&gt;\n  &lt;groupId&gt;org.graalvm.buildtools&lt;/groupId&gt;\n  &lt;artifactId&gt;native-maven-plugin&lt;/artifactId&gt;\n  &lt;configuration&gt;\n    &lt;buildArgs&gt;\n      &lt;buildArg&gt;-H:IncludeResources=...&lt;/buildArg&gt;\n    &lt;/buildArgs&gt;\n  &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>See this <a href=\"https://graalvm.github.io/native-build-tools/latest/maven-plugin.html#configuration-reusing-config-from-parent\" rel=\"nofollow noreferrer\">GraalVM doc</a> for more details</p>\n"}],"owner":{"account_id":14482834,"reputation":3924,"user_id":10461625,"display_name":"PatPanda"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":273,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1687331299,"creation_date":1687274248,"question_id":76516192,"body_markdown":"*What I am trying to achieve:*\r\n\r\nI have a graalVM springboot image which is working fine. It is doing correct business logic, etc.\r\n\r\nWith that said, I would like to build the native image with parameters, such as: ``` -H:IncludeResources```\r\n\r\n*What did I try:*\r\n\r\nFollowing online tutorials, I build the native image using \r\n\r\n```\r\n &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.graalvm.buildtools&lt;/groupId&gt;\r\n                &lt;artifactId&gt;native-maven-plugin&lt;/artifactId&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n            &lt;/plugin&gt;\r\n```\r\n\r\nand then\r\n\r\n```mvn -Pnative native:compile```\r\n\r\nIt seems Spring takes care of the build, not allowing me to specify the ```-H``` parameter.\r\n\r\n*Question:*\r\n\r\nHow to build the image with ```-H``` arguments?","title":"Building SpringBoot GraalVM native image with -H parameter","body":"<p><em>What I am trying to achieve:</em></p>\n<p>I have a graalVM springboot image which is working fine. It is doing correct business logic, etc.</p>\n<p>With that said, I would like to build the native image with parameters, such as: <code> -H:IncludeResources</code></p>\n<p><em>What did I try:</em></p>\n<p>Following online tutorials, I build the native image using</p>\n<pre><code> &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.graalvm.buildtools&lt;/groupId&gt;\n                &lt;artifactId&gt;native-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n</code></pre>\n<p>and then</p>\n<p><code>mvn -Pnative native:compile</code></p>\n<p>It seems Spring takes care of the build, not allowing me to specify the <code>-H</code> parameter.</p>\n<p><em>Question:</em></p>\n<p>How to build the image with <code>-H</code> arguments?</p>\n"},{"tags":["java","maven"],"comments":[{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1687325808,"post_id":76520199,"comment_id":134918926,"body_markdown":"1. &quot; I understand that my maven dependencies are not added to the classpath&quot; ..please check! 2. &quot;but how can I add them?&quot; ..better question: what does/which effect has `&lt;classpathPrefix/&gt;`?;)","body":"1. &quot; I understand that my maven dependencies are not added to the classpath&quot; ..please check! 2. &quot;but how can I add them?&quot; ..better question: what does/which effect has <code>&lt;classpathPrefix&#47;&gt;</code>?;)"},{"owner":{"account_id":2262858,"reputation":1078,"user_id":1992451,"accept_rate":84,"display_name":"Piyush Shrivastava"},"score":0,"creation_date":1687326070,"post_id":76520199,"comment_id":134918962,"body_markdown":"@xerx593 what does/which effect has `&lt;classpathPrefix/&gt;`? Where is the lib directory created by default and how can I run the jar to include it in classpath?","body":"@xerx593 what does/which effect has <code>&lt;classpathPrefix&#47;&gt;</code>? Where is the lib directory created by default and how can I run the jar to include it in classpath?"}],"answers":[{"comments":[{"owner":{"account_id":2262858,"reputation":1078,"user_id":1992451,"accept_rate":84,"display_name":"Piyush Shrivastava"},"score":0,"creation_date":1687325950,"post_id":76520230,"comment_id":134918948,"body_markdown":"is ${project.build.directory} `target` by default? How can I give relative path to target directory here?","body":"is ${project.build.directory} <code>target</code> by default? How can I give relative path to target directory here?"},{"owner":{"account_id":18958610,"reputation":304,"user_id":17512310,"display_name":"devman"},"score":0,"creation_date":1687326090,"post_id":76520230,"comment_id":134918964,"body_markdown":"this is a relative path, it will be in your project, you can replace it with an absolute path","body":"this is a relative path, it will be in your project, you can replace it with an absolute path"},{"owner":{"account_id":2262858,"reputation":1078,"user_id":1992451,"accept_rate":84,"display_name":"Piyush Shrivastava"},"score":0,"creation_date":1687326492,"post_id":76520230,"comment_id":134919019,"body_markdown":"Found it. But running `mvn clean install` still did not create the lib directory","body":"Found it. But running <code>mvn clean install</code> still did not create the lib directory"}],"tags":[],"owner":{"account_id":18958610,"reputation":304,"user_id":17512310,"display_name":"devman"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1687325488,"creation_date":1687325488,"answer_id":76520230,"question_id":76520199,"body_markdown":"You can build file jar, replace value in &lt;mainClass&gt;com.thanbv1510.MainApp&lt;/mainClass&gt; with your main class\r\n\r\n\r\n```xml\r\n&lt;plugin&gt;\r\n\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n\t&lt;configuration&gt;\r\n\t    &lt;source&gt;${java.version}&lt;/source&gt;\r\n\t    &lt;target&gt;${java.version}&lt;/target&gt;\r\n\t&lt;/configuration&gt;\r\n&lt;/plugin&gt;\r\n\r\n&lt;plugin&gt;\r\n\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n\t&lt;version&gt;${maven-jar-plugin.version}&lt;/version&gt;\r\n\t&lt;configuration&gt;\r\n\t    &lt;archive&gt;\r\n\t\t&lt;manifest&gt;\r\n\t\t    &lt;addClasspath&gt;true&lt;/addClasspath&gt;\r\n\t\t    &lt;classpathPrefix&gt;lib/&lt;/classpathPrefix&gt;\r\n\t\t    &lt;mainClass&gt;com.thanbv1510.MainApp&lt;/mainClass&gt;\r\n\t\t&lt;/manifest&gt;\r\n\t    &lt;/archive&gt;\r\n\t&lt;/configuration&gt;\r\n&lt;/plugin&gt;\r\n\r\n&lt;plugin&gt;\r\n\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\r\n\t&lt;version&gt;${maven-dependency-plugin.version}&lt;/version&gt;\r\n\t&lt;executions&gt;\r\n\t    &lt;execution&gt;\r\n\t\t&lt;phase&gt;install&lt;/phase&gt;\r\n\t\t&lt;goals&gt;\r\n\t\t    &lt;goal&gt;copy-dependencies&lt;/goal&gt;\r\n\t\t&lt;/goals&gt;\r\n\t\t&lt;configuration&gt;\r\n\t\t    &lt;outputDirectory&gt;${project.build.directory}/lib&lt;/outputDirectory&gt;\r\n\t\t    &lt;includeScope&gt;runtime&lt;/includeScope&gt;\r\n\t\t    &lt;excludeScope&gt;provided&lt;/excludeScope&gt;\r\n\t\t&lt;/configuration&gt;\r\n\t    &lt;/execution&gt;\r\n\t&lt;/executions&gt;\r\n&lt;/plugin&gt;\r\n```","title":"Manifest issues with maven","body":"<p>You can build file jar, replace value in com.thanbv1510.MainApp with your main class</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n    &lt;configuration&gt;\n        &lt;source&gt;${java.version}&lt;/source&gt;\n        &lt;target&gt;${java.version}&lt;/target&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n\n&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n    &lt;version&gt;${maven-jar-plugin.version}&lt;/version&gt;\n    &lt;configuration&gt;\n        &lt;archive&gt;\n        &lt;manifest&gt;\n            &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n            &lt;classpathPrefix&gt;lib/&lt;/classpathPrefix&gt;\n            &lt;mainClass&gt;com.thanbv1510.MainApp&lt;/mainClass&gt;\n        &lt;/manifest&gt;\n        &lt;/archive&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n\n&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n    &lt;version&gt;${maven-dependency-plugin.version}&lt;/version&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n        &lt;phase&gt;install&lt;/phase&gt;\n        &lt;goals&gt;\n            &lt;goal&gt;copy-dependencies&lt;/goal&gt;\n        &lt;/goals&gt;\n        &lt;configuration&gt;\n            &lt;outputDirectory&gt;${project.build.directory}/lib&lt;/outputDirectory&gt;\n            &lt;includeScope&gt;runtime&lt;/includeScope&gt;\n            &lt;excludeScope&gt;provided&lt;/excludeScope&gt;\n        &lt;/configuration&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2262858,"reputation":1078,"user_id":1992451,"accept_rate":84,"display_name":"Piyush Shrivastava"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687330319,"creation_date":1687327913,"answer_id":76520428,"question_id":76520199,"body_markdown":"Somehow, removing the `pluginManagement` tag solved the problem. If someone can explain why it was not working with this tag, I&#39;ll accept the answer.","title":"Manifest issues with maven","body":"<p>Somehow, removing the <code>pluginManagement</code> tag solved the problem. If someone can explain why it was not working with this tag, I'll accept the answer.</p>\n"}],"owner":{"account_id":2262858,"reputation":1078,"user_id":1992451,"accept_rate":84,"display_name":"Piyush Shrivastava"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1687330319,"creation_date":1687325090,"question_id":76520199,"body_markdown":"I have created a core Java maven project that has a main class. The class runs fine in Intellij, but when I create a jar using `mvn clean install`, it fails to run with `ClassNotFoundException`. I understand that my maven dependencies are not added to the classpath, but how can I add them? I don&#39;t want to create a jar with dependencies unless absolutely required. \r\n\r\nHere&#39;s the build tag of my `pom.xml`\r\n\r\nUPDATE: As suggested by @devman, I have added maven-dependency-plugin. The pom below is the updated one. But still the `lib` directory is not getting created in the `target` directory after running `mvn clean install`. Somehow, I am also not seeing this plugin in Intellij but seeing some plugins that are not there in the pom. Below is my updated `build` tag of pom.xml.\r\n\r\n    &lt;build&gt;\r\n    &lt;pluginManagement&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;${java.version}&lt;/source&gt;\r\n                    &lt;target&gt;${java.version}&lt;/target&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;${maven-jar-plugin.version}&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;archive&gt;\r\n                        &lt;manifest&gt;\r\n                            &lt;addClasspath&gt;true&lt;/addClasspath&gt;\r\n                            &lt;classpathPrefix&gt;lib/&lt;/classpathPrefix&gt;\r\n                            &lt;mainClass&gt;com.pkg.MyApp&lt;/mainClass&gt;\r\n                        &lt;/manifest&gt;\r\n                    &lt;/archive&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;${maven-dependency-plugin.version}&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;phase&gt;install&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;copy-dependencies&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;outputDirectory&gt;${project.build.directory}/lib&lt;/outputDirectory&gt;\r\n                            &lt;includeScope&gt;runtime&lt;/includeScope&gt;\r\n                            &lt;excludeScope&gt;provided&lt;/excludeScope&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/pluginManagement&gt;\r\n&lt;/build&gt;\r\n\r\n\r\nBelow is a screenshot of what I am seeing in Intellij under maven-&gt;plugins\r\n[![Intellij maven plugins screenshot][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/4BFDq.png","title":"Manifest issues with maven","body":"<p>I have created a core Java maven project that has a main class. The class runs fine in Intellij, but when I create a jar using <code>mvn clean install</code>, it fails to run with <code>ClassNotFoundException</code>. I understand that my maven dependencies are not added to the classpath, but how can I add them? I don't want to create a jar with dependencies unless absolutely required.</p>\n<p>Here's the build tag of my <code>pom.xml</code></p>\n<p>UPDATE: As suggested by @devman, I have added maven-dependency-plugin. The pom below is the updated one. But still the <code>lib</code> directory is not getting created in the <code>target</code> directory after running <code>mvn clean install</code>. Somehow, I am also not seeing this plugin in Intellij but seeing some plugins that are not there in the pom. Below is my updated <code>build</code> tag of pom.xml.</p>\n<pre><code>&lt;build&gt;\n&lt;pluginManagement&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;source&gt;${java.version}&lt;/source&gt;\n                &lt;target&gt;${java.version}&lt;/target&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n            &lt;version&gt;${maven-jar-plugin.version}&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;archive&gt;\n                    &lt;manifest&gt;\n                        &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n                        &lt;classpathPrefix&gt;lib/&lt;/classpathPrefix&gt;\n                        &lt;mainClass&gt;com.pkg.MyApp&lt;/mainClass&gt;\n                    &lt;/manifest&gt;\n                &lt;/archive&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n            &lt;version&gt;${maven-dependency-plugin.version}&lt;/version&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;phase&gt;install&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;copy-dependencies&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    &lt;configuration&gt;\n                        &lt;outputDirectory&gt;${project.build.directory}/lib&lt;/outputDirectory&gt;\n                        &lt;includeScope&gt;runtime&lt;/includeScope&gt;\n                        &lt;excludeScope&gt;provided&lt;/excludeScope&gt;\n                    &lt;/configuration&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/pluginManagement&gt;\n</code></pre>\n\n<p>Below is a screenshot of what I am seeing in Intellij under maven-&gt;plugins\n<a href=\"https://i.stack.imgur.com/4BFDq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4BFDq.png\" alt=\"Intellij maven plugins screenshot\" /></a></p>\n"},{"tags":["java","spring","spring-boot","exception","runtimeexception"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1687220122,"post_id":76510255,"comment_id":134903118,"body_markdown":"How is `underTest` created, and what are the annotations on your test class?","body":"How is <code>underTest</code> created, and what are the annotations on your test class?"},{"owner":{"account_id":25978596,"reputation":5,"user_id":19692702,"display_name":"Davide"},"score":0,"creation_date":1687330203,"post_id":76510255,"comment_id":134919661,"body_markdown":"I have added these details to the question","body":"I have added these details to the question"}],"owner":{"account_id":25978596,"reputation":5,"user_id":19692702,"display_name":"Davide"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":302,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687330122,"creation_date":1687211571,"question_id":76510255,"body_markdown":"I&#39;m coding an application where there&#39;s a user API accessible to someone with the right authentication (form authentication). The problem is that runtime exceptions are not displayed in the console nor the client when they in fact happen.\r\n\r\nPart of Service:\r\n\r\n```\r\n@Service\r\n@AllArgsConstructor\r\n@Slf4j\r\npublic class AppUserService {\r\n\r\n    private AppUserRepository repository;\r\n\r\n\r\n    public AppUser getUserByUsername(String username) {\r\n        if (!repository.existsByUsername(username)) {\r\n            log.error(&quot;Cannot find user with username: {}&quot;, username);\r\n            throw new UserNotFoundException(&quot;User with username &#39;&quot; + username + &quot;&#39; not found&quot;);\r\n        }\r\n        log.info(&quot;Fetching user with username: {}&quot;, username);\r\n        return repository.findAppUserByUsername(username);\r\n    }\r\n}\r\n```\r\n\r\nUnit Test:\r\n\r\n```\r\n@ExtendWith(MockitoExtension.class)\r\nclass AppUserServiceTest {\r\n\r\n    @Mock\r\n    private AppUserRepository repository;\r\n    private AppUserService underTest;\r\n\r\n    @BeforeEach\r\n    @SuppressWarnings(&quot;resource&quot;)\r\n    void setUp() {\r\n        openMocks(this);\r\n        underTest = new AppUserService(repository);\r\n    }\r\n\r\n    // [...]\r\n\r\n    @Test\r\n    void cannotGetUserByUsernameWhenUsernameIsNotInDB() {\r\n        // given\r\n        given(repository.existsByUsername(any())).willReturn(false);\r\n        String username = &quot;Adam&quot;;\r\n        // when\r\n        // then\r\n        assertThatThrownBy(() -&gt; underTest.getUserByUsername(username))\r\n                .isInstanceOf(UserNotFoundException.class)\r\n                .hasMessageContaining(&quot;User with username &#39;&quot; + username + &quot;&#39; not found&quot;);\r\n        then(repository).shouldHaveNoMoreInteractions();\r\n    }\r\n\r\n    // [...]\r\n}\r\n    \r\n```\r\n\r\nBoth the unit test and the fact that this log `log.error(&quot;Cannot find user with username: {}&quot;, username);` is printed to the console ensure that the throw statement is reached so I guess it&#39;s something that has to do with spring\r\n\r\nPart of Repository:\r\n\r\n```\r\n@Repository\r\npublic interface AppUserRepository extends JpaRepository&lt;AppUser, UUID&gt; {\r\n\r\n    AppUser findAppUserByUsername(String username);\r\n\r\nn   // [...]\r\n}\r\n```\r\n\r\nException Class:\r\n\r\n```\r\n@ResponseStatus(HttpStatus.NOT_FOUND)\r\npublic class UserNotFoundException extends RuntimeException {\r\n    public UserNotFoundException(String message) {\r\n        super(message);\r\n    }\r\n}\r\n```\r\n\r\napplication.properties:\r\n\r\n```\r\n# info\r\ninfo.application.name=@name@\r\ninfo.application.version=@version@\r\ninfo.application.description=@description@\r\ninfo.application.jdk=@java.version@\r\ninfo.application.groupId=@groupId@\r\n\r\n# DB\r\nspring.datasource.url=jdbc:postgresql://localhost:5432/auth\r\nspring.datasource.username=postgres\r\nspring.datasource.password=1234\r\n\r\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect\r\nspring.jpa.properties.hibernate.format_sql=true\r\n\r\nspring.jpa.hibernate.ddl-auto=create\r\n\r\n# server\r\nserver.error.include-message=always\r\nserver.error.include-binding-errors=always\r\n```\r\n\r\npom:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.0.2&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.xdavide9&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;Spring-Auth&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;Spring-Auth&lt;/name&gt;\r\n\t&lt;description&gt;Form based authentication made with Spring Boot.&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.thymeleaf.extras&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;thymeleaf-extras-springsecurity5&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.1.1.RELEASE&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t&lt;exclude&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;/exclude&gt;\r\n\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\nI really don&#39;t know where this is coming fromn so I included application.properties and pom too. I even tried to create a handler using @ControllerAdvice and @ExceptionHandler and that way I can return a response entity to the client atleast but still nothing to the console.\r\n","title":"Spring Boot Exception not shown in the console or client even if thrown","body":"<p>I'm coding an application where there's a user API accessible to someone with the right authentication (form authentication). The problem is that runtime exceptions are not displayed in the console nor the client when they in fact happen.</p>\n<p>Part of Service:</p>\n<pre><code>@Service\n@AllArgsConstructor\n@Slf4j\npublic class AppUserService {\n\n    private AppUserRepository repository;\n\n\n    public AppUser getUserByUsername(String username) {\n        if (!repository.existsByUsername(username)) {\n            log.error(&quot;Cannot find user with username: {}&quot;, username);\n            throw new UserNotFoundException(&quot;User with username '&quot; + username + &quot;' not found&quot;);\n        }\n        log.info(&quot;Fetching user with username: {}&quot;, username);\n        return repository.findAppUserByUsername(username);\n    }\n}\n</code></pre>\n<p>Unit Test:</p>\n<pre><code>@ExtendWith(MockitoExtension.class)\nclass AppUserServiceTest {\n\n    @Mock\n    private AppUserRepository repository;\n    private AppUserService underTest;\n\n    @BeforeEach\n    @SuppressWarnings(&quot;resource&quot;)\n    void setUp() {\n        openMocks(this);\n        underTest = new AppUserService(repository);\n    }\n\n    // [...]\n\n    @Test\n    void cannotGetUserByUsernameWhenUsernameIsNotInDB() {\n        // given\n        given(repository.existsByUsername(any())).willReturn(false);\n        String username = &quot;Adam&quot;;\n        // when\n        // then\n        assertThatThrownBy(() -&gt; underTest.getUserByUsername(username))\n                .isInstanceOf(UserNotFoundException.class)\n                .hasMessageContaining(&quot;User with username '&quot; + username + &quot;' not found&quot;);\n        then(repository).shouldHaveNoMoreInteractions();\n    }\n\n    // [...]\n}\n    \n</code></pre>\n<p>Both the unit test and the fact that this log <code>log.error(&quot;Cannot find user with username: {}&quot;, username);</code> is printed to the console ensure that the throw statement is reached so I guess it's something that has to do with spring</p>\n<p>Part of Repository:</p>\n<pre><code>@Repository\npublic interface AppUserRepository extends JpaRepository&lt;AppUser, UUID&gt; {\n\n    AppUser findAppUserByUsername(String username);\n\nn   // [...]\n}\n</code></pre>\n<p>Exception Class:</p>\n<pre><code>@ResponseStatus(HttpStatus.NOT_FOUND)\npublic class UserNotFoundException extends RuntimeException {\n    public UserNotFoundException(String message) {\n        super(message);\n    }\n}\n</code></pre>\n<p>application.properties:</p>\n<pre><code># info\ninfo.application.name=@name@\ninfo.application.version=@version@\ninfo.application.description=@description@\ninfo.application.jdk=@java.version@\ninfo.application.groupId=@groupId@\n\n# DB\nspring.datasource.url=jdbc:postgresql://localhost:5432/auth\nspring.datasource.username=postgres\nspring.datasource.password=1234\n\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect\nspring.jpa.properties.hibernate.format_sql=true\n\nspring.jpa.hibernate.ddl-auto=create\n\n# server\nserver.error.include-message=always\nserver.error.include-binding-errors=always\n</code></pre>\n<p>pom:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.2&lt;/version&gt;\n        &lt;relativePath/&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.xdavide9&lt;/groupId&gt;\n    &lt;artifactId&gt;Spring-Auth&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;Spring-Auth&lt;/name&gt;\n    &lt;description&gt;Form based authentication made with Spring Boot.&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.thymeleaf.extras&lt;/groupId&gt;\n            &lt;artifactId&gt;thymeleaf-extras-springsecurity5&lt;/artifactId&gt;\n            &lt;version&gt;3.1.1.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>I really don't know where this is coming fromn so I included application.properties and pom too. I even tried to create a handler using @ControllerAdvice and @ExceptionHandler and that way I can return a response entity to the client atleast but still nothing to the console.</p>\n"},{"tags":["java","jdbc","datasource"],"comments":[{"owner":{"account_id":270103,"reputation":1176,"user_id":559849,"accept_rate":100,"display_name":"Gyan"},"score":1,"creation_date":1454573070,"post_id":35193094,"comment_id":58107542,"body_markdown":"You can&#39;t. You first need to define a data source and then use that here. Is this a web application or a standalone application ? For standalone applications you would need to create an InitialContext and then bind it in your code. For web applications its a good practice to define data sources in the server.xml file using &lt;Resource&gt; tags.","body":"You can&#39;t. You first need to define a data source and then use that here. Is this a web application or a standalone application ? For standalone applications you would need to create an InitialContext and then bind it in your code. For web applications its a good practice to define data sources in the server.xml file using &lt;Resource&gt; tags."}],"answers":[{"tags":[],"owner":{"account_id":1250235,"reputation":6632,"user_id":1210779,"accept_rate":65,"display_name":"Sai Ye Yan Naing Aye"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1454571287,"creation_date":1454571287,"answer_id":35195086,"question_id":35193094,"body_markdown":"You cannot change the lookup method parameter. But you can use [bind or rebind][1] methods of InitialContext to retrieve your datasource.See sample   \r\n\r\n     ctx.bind(&quot;java:/comp/env/jdbc/nameofmyjdbcresource&quot;, dsrc);\r\n\r\nFor details example check [here][2].\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/javax/naming/InitialContext.html\r\n  [2]: https://blogs.oracle.com/randystuph/entry/injecting_jndi_datasources_for_junit","title":"How to add string parameters in lookup method in jdbc connection?","body":"<p>You cannot change the lookup method parameter. But you can use <a href=\"https://docs.oracle.com/javase/7/docs/api/javax/naming/InitialContext.html\" rel=\"nofollow\">bind or rebind</a> methods of InitialContext to retrieve your datasource.See sample   </p>\n\n<pre><code> ctx.bind(\"java:/comp/env/jdbc/nameofmyjdbcresource\", dsrc);\n</code></pre>\n\n<p>For details example check <a href=\"https://blogs.oracle.com/randystuph/entry/injecting_jndi_datasources_for_junit\" rel=\"nofollow\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1454578456,"creation_date":1454578456,"answer_id":35197289,"question_id":35193094,"body_markdown":"A `DataSource` is a connection to one database and you configure a DataSource with a single username and password. If you really need specific (and changing) usernames/passwords depending on application logic, then you can use [`DataSource.getConnection(String username, String password)`][1]. However keep in mind with some (most?) connection pools this will give you a non-pooled connection.\r\n\r\nIf you want to access a different database (or a different configuration), then you need to specify a data source for each database you want to access and ask for that specific data source.\r\n\r\nIf that is not possible for your situation, then you should just ignore/suppress the veracode warning and continue using `DriverManager`.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/javax/sql/DataSource.html#getConnection-java.lang.String-java.lang.String-","title":"How to add string parameters in lookup method in jdbc connection?","body":"<p>A <code>DataSource</code> is a connection to one database and you configure a DataSource with a single username and password. If you really need specific (and changing) usernames/passwords depending on application logic, then you can use <a href=\"http://docs.oracle.com/javase/8/docs/api/javax/sql/DataSource.html#getConnection-java.lang.String-java.lang.String-\" rel=\"nofollow\"><code>DataSource.getConnection(String username, String password)</code></a>. However keep in mind with some (most?) connection pools this will give you a non-pooled connection.</p>\n\n<p>If you want to access a different database (or a different configuration), then you need to specify a data source for each database you want to access and ask for that specific data source.</p>\n\n<p>If that is not possible for your situation, then you should just ignore/suppress the veracode warning and continue using <code>DriverManager</code>.</p>\n"},{"tags":[],"owner":{"account_id":3032815,"reputation":1,"user_id":2571483,"display_name":"sunil kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687330111,"creation_date":1687330111,"answer_id":76520648,"question_id":35193094,"body_markdown":"    FileInputStream pfile = new FileInputStream(args[0]);\r\n\t\t\t\tprop.load(pfile);\r\n\t\t\t\tpfile.close();\r\n\t\t\t\tProperties info = new Properties();\r\n\t\t\t\tinfo.put(&quot;user&quot;,prop.getProperty(&quot;jdbc.username&quot;));\r\n\t\t\t\tinfo.put(&quot;password&quot;,prop.getProperty(&quot;jdbc.pwd&quot;));\r\n\r\n\t\t\t\tDriver d = (Driver) \r\n    Class.forName(prop.getProperty(&quot;jdbc.driverClassName&quot;)).newInstance();\r\n\t\t\t\tcon = \r\n    DriverManager.getConnection(prop.getProperty(&quot;jdbc.url&quot;),info);","title":"How to add string parameters in lookup method in jdbc connection?","body":"<pre><code>FileInputStream pfile = new FileInputStream(args[0]);\n            prop.load(pfile);\n            pfile.close();\n            Properties info = new Properties();\n            info.put(&quot;user&quot;,prop.getProperty(&quot;jdbc.username&quot;));\n            info.put(&quot;password&quot;,prop.getProperty(&quot;jdbc.pwd&quot;));\n\n            Driver d = (Driver) \nClass.forName(prop.getProperty(&quot;jdbc.driverClassName&quot;)).newInstance();\n            con = \nDriverManager.getConnection(prop.getProperty(&quot;jdbc.url&quot;),info);\n</code></pre>\n"}],"owner":{"account_id":5393533,"reputation":335,"user_id":4295359,"accept_rate":44,"display_name":"khanam"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":387,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1687330111,"creation_date":1454563348,"question_id":35193094,"body_markdown":"In my web application I&#39;m using JDBC connectivity basically its working fine with below code \r\n\r\n    connObj = DriverManager.getConnection(dbaseUrl, usrName, Paswrd);\r\n\r\nBut when I&#39;m using veracode tool its showing flaw as J2EE Bad Practice:getConnection so that i need to implement.  \r\n\r\n    InitialContext ctx= new InitialContext();\r\n    DataSource dsrc=(DataSource)ctx.lookup(dbaseUrl, usrName, Paswrd);\r\n    dsrc.getConnection();\r\n       \r\nHow can I pass 3 parameters in lookup so that it should not disturb my previous flow of code. Can anybody guide me please?","title":"How to add string parameters in lookup method in jdbc connection?","body":"<p>In my web application I'm using JDBC connectivity basically its working fine with below code </p>\n\n<pre><code>connObj = DriverManager.getConnection(dbaseUrl, usrName, Paswrd);\n</code></pre>\n\n<p>But when I'm using veracode tool its showing flaw as J2EE Bad Practice:getConnection so that i need to implement.  </p>\n\n<pre><code>InitialContext ctx= new InitialContext();\nDataSource dsrc=(DataSource)ctx.lookup(dbaseUrl, usrName, Paswrd);\ndsrc.getConnection();\n</code></pre>\n\n<p>How can I pass 3 parameters in lookup so that it should not disturb my previous flow of code. Can anybody guide me please?</p>\n"},{"tags":["java","maven","drools"],"comments":[{"owner":{"account_id":20906298,"reputation":332,"user_id":15358155,"display_name":"chameerar"},"score":1,"creation_date":1687329481,"post_id":76520489,"comment_id":134919536,"body_markdown":"Could you share your `pom.xml`?","body":"Could you share your <code>pom.xml</code>?"}],"answers":[{"tags":[],"owner":{"account_id":2262858,"reputation":1078,"user_id":1992451,"accept_rate":84,"display_name":"Piyush Shrivastava"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687329906,"creation_date":1687329906,"answer_id":76520623,"question_id":76520489,"body_markdown":"I got the problem. There was a conflicting dependency that was importing `maven-artifact` version 3.0 jar. This jar did not have the method `setMirroredRepositories`. The problem got solved by excluding `maven-artifact` from the conflicting dependency. ","title":"java.lang.NoSuchMethodError: &#39;void org.apache.maven.artifact.repository.ArtifactRepository.setMirroredRepositories(java.util.List)&#39;","body":"<p>I got the problem. There was a conflicting dependency that was importing <code>maven-artifact</code> version 3.0 jar. This jar did not have the method <code>setMirroredRepositories</code>. The problem got solved by excluding <code>maven-artifact</code> from the conflicting dependency.</p>\n"}],"owner":{"account_id":2262858,"reputation":1078,"user_id":1992451,"accept_rate":84,"display_name":"Piyush Shrivastava"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":221,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1687329906,"creation_date":1687328538,"question_id":76520489,"body_markdown":"I am using Drools in my Java project. Below is the code for building the rules:\r\n\r\n    public class DroolsBeanFactory {\r\n        private KieServices kieServices = KieServices.Factory.get();\r\n\r\n        private void getKieRepository() {\r\n            final KieRepository kieRepository = kieServices.getRepository();\r\n            kieRepository.addKieModule(() -&gt; kieRepository.getDefaultReleaseId());\r\n        }\r\n\r\n        public KieSession getKieSession(String droolsFilePath){\r\n            getKieRepository();\r\n            KieFileSystem kieFileSystem = kieServices.newKieFileSystem();\r\n\r\n            kieFileSystem.write(ResourceFactory.newClassPathResource(droolsFilePath));\r\n\r\n            KieBuilder kb = kieServices.newKieBuilder(kieFileSystem);\r\n            kb.buildAll();\r\n            KieModule kieModule = kb.getKieModule();\r\n\r\n            KieContainer kContainer = kieServices.newKieContainer(kieModule.getReleaseId());\r\n\r\n            return kContainer.newKieSession();\r\n        }\r\n    }\r\n\r\nThis runs fine when running from Intellij, but when I run it from a jar file, I get the below exception:\r\n\r\n    java.lang.reflect.InvocationTargetException\r\n            at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n            at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n            at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n            at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:490)\r\n    Caused by: java.lang.NoSuchMethodError: &#39;void org.apache.maven.artifact.repository.ArtifactRepository.setMirroredRepositories(java.util.List)&#39;\r\n            at org.apache.maven.bridge.MavenRepositorySystem.injectMirror(MavenRepositorySystem.java:221)\r\n            at org.apache.maven.bridge.MavenRepositorySystem.injectMirror(MavenRepositorySystem.java:174)\r\n            at org.apache.maven.internal.aether.DefaultRepositorySystemSessionFactory.newRepositorySession(DefaultRepositorySystemSessionFactory.java:235)\r\n            at org.apache.maven.DefaultMaven.newRepositorySession(DefaultMaven.java:365)\r\n            at org.kie.maven.integration.embedder.MavenEmbedder.init(MavenEmbedder.java:106)\r\n            at org.kie.maven.integration.embedder.MavenEmbedder.&lt;init&gt;(MavenEmbedder.java:99)\r\n            at org.kie.maven.integration.embedder.MavenEmbedder.&lt;init&gt;(MavenEmbedder.java:91)\r\n            at org.kie.maven.integration.embedder.MavenEmbedder.&lt;init&gt;(MavenEmbedder.java:85)\r\n            at org.kie.maven.integration.embedder.MavenProjectLoader.newMavenEmbedder(MavenProjectLoader.java:148)\r\n            at org.kie.maven.integration.embedder.MavenProjectLoader.parseMavenPom(MavenProjectLoader.java:90)\r\n            at org.kie.maven.integration.embedder.MavenProjectLoader.parseMavenPom(MavenProjectLoader.java:84)\r\n            at org.kie.maven.integration.MavenPomModelGenerator.parse(MavenPomModelGenerator.java:34)\r\n            at org.kie.util.maven.support.PomModel$Parser.parse(PomModel.java:110)\r\n            at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildPomModel(KieBuilderImpl.java:598)\r\n            at org.drools.compiler.kie.builder.impl.KieBuilderImpl.init(KieBuilderImpl.java:155)\r\n            at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildAll(KieBuilderImpl.java:221)\r\n            at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildAll(KieBuilderImpl.java:195)\r\n            at com.pkg.config.DroolsBeanFactory.getKieSession(DroolsBeanFactory.java:24)\r\n            ... 7 more\r\n\r\nLooks like there is some issue with maven packaging. But I am not able to understand how to resolve it. The failure is happening at `kb.buildAll()`","title":"java.lang.NoSuchMethodError: &#39;void org.apache.maven.artifact.repository.ArtifactRepository.setMirroredRepositories(java.util.List)&#39;","body":"<p>I am using Drools in my Java project. Below is the code for building the rules:</p>\n<pre><code>public class DroolsBeanFactory {\n    private KieServices kieServices = KieServices.Factory.get();\n\n    private void getKieRepository() {\n        final KieRepository kieRepository = kieServices.getRepository();\n        kieRepository.addKieModule(() -&gt; kieRepository.getDefaultReleaseId());\n    }\n\n    public KieSession getKieSession(String droolsFilePath){\n        getKieRepository();\n        KieFileSystem kieFileSystem = kieServices.newKieFileSystem();\n\n        kieFileSystem.write(ResourceFactory.newClassPathResource(droolsFilePath));\n\n        KieBuilder kb = kieServices.newKieBuilder(kieFileSystem);\n        kb.buildAll();\n        KieModule kieModule = kb.getKieModule();\n\n        KieContainer kContainer = kieServices.newKieContainer(kieModule.getReleaseId());\n\n        return kContainer.newKieSession();\n    }\n}\n</code></pre>\n<p>This runs fine when running from Intellij, but when I run it from a jar file, I get the below exception:</p>\n<pre><code>java.lang.reflect.InvocationTargetException\n        at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n        at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n        at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n        at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:490)\nCaused by: java.lang.NoSuchMethodError: 'void org.apache.maven.artifact.repository.ArtifactRepository.setMirroredRepositories(java.util.List)'\n        at org.apache.maven.bridge.MavenRepositorySystem.injectMirror(MavenRepositorySystem.java:221)\n        at org.apache.maven.bridge.MavenRepositorySystem.injectMirror(MavenRepositorySystem.java:174)\n        at org.apache.maven.internal.aether.DefaultRepositorySystemSessionFactory.newRepositorySession(DefaultRepositorySystemSessionFactory.java:235)\n        at org.apache.maven.DefaultMaven.newRepositorySession(DefaultMaven.java:365)\n        at org.kie.maven.integration.embedder.MavenEmbedder.init(MavenEmbedder.java:106)\n        at org.kie.maven.integration.embedder.MavenEmbedder.&lt;init&gt;(MavenEmbedder.java:99)\n        at org.kie.maven.integration.embedder.MavenEmbedder.&lt;init&gt;(MavenEmbedder.java:91)\n        at org.kie.maven.integration.embedder.MavenEmbedder.&lt;init&gt;(MavenEmbedder.java:85)\n        at org.kie.maven.integration.embedder.MavenProjectLoader.newMavenEmbedder(MavenProjectLoader.java:148)\n        at org.kie.maven.integration.embedder.MavenProjectLoader.parseMavenPom(MavenProjectLoader.java:90)\n        at org.kie.maven.integration.embedder.MavenProjectLoader.parseMavenPom(MavenProjectLoader.java:84)\n        at org.kie.maven.integration.MavenPomModelGenerator.parse(MavenPomModelGenerator.java:34)\n        at org.kie.util.maven.support.PomModel$Parser.parse(PomModel.java:110)\n        at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildPomModel(KieBuilderImpl.java:598)\n        at org.drools.compiler.kie.builder.impl.KieBuilderImpl.init(KieBuilderImpl.java:155)\n        at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildAll(KieBuilderImpl.java:221)\n        at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildAll(KieBuilderImpl.java:195)\n        at com.pkg.config.DroolsBeanFactory.getKieSession(DroolsBeanFactory.java:24)\n        ... 7 more\n</code></pre>\n<p>Looks like there is some issue with maven packaging. But I am not able to understand how to resolve it. The failure is happening at <code>kb.buildAll()</code></p>\n"},{"tags":["java","clean-architecture","access-modifiers"],"comments":[{"owner":{"account_id":4354234,"reputation":845,"user_id":3553434,"display_name":"alalalala"},"score":0,"creation_date":1687325992,"post_id":76520150,"comment_id":134918951,"body_markdown":"If it were me, I would use public. \nEspecially this kind of service class that may be subject to dependency injection.","body":"If it were me, I would use public.  Especially this kind of service class that may be subject to dependency injection."}],"answers":[{"comments":[{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":0,"creation_date":1687325463,"post_id":76520200,"comment_id":134918878,"body_markdown":"Please, where did you get that from? A top-level must not be `protected` or `private`, but it may be `public` **or** have *package-access*","body":"Please, where did you get that from? A top-level must not be <code>protected</code> or <code>private</code>, but it may be <code>public</code> <b>or</b> have <i>package-access</i>"},{"owner":{"account_id":23617210,"reputation":256,"user_id":17651108,"display_name":"Azadi Yazdani"},"score":0,"creation_date":1687326043,"post_id":76520200,"comment_id":134918958,"body_markdown":"You are asking about protected modifier in a top-level class, not about an inner class. So you have to use at least one Public class.","body":"You are asking about protected modifier in a top-level class, not about an inner class. So you have to use at least one Public class."},{"owner":{"account_id":23617210,"reputation":256,"user_id":17651108,"display_name":"Azadi Yazdani"},"score":0,"creation_date":1687328358,"post_id":76520200,"comment_id":134919320,"body_markdown":"You can check all these modifiers in your system and see what happens. You can not use protected for a separate interface, it can only be public or null (package), because it stands for a .java file. Also an implementation of an interface in another standalone file can be public or package, not private or protected. This is different for inner classes and interfaces.","body":"You can check all these modifiers in your system and see what happens. You can not use protected for a separate interface, it can only be public or null (package), because it stands for a .java file. Also an implementation of an interface in another standalone file can be public or package, not private or protected. This is different for inner classes and interfaces."},{"owner":{"account_id":23617210,"reputation":256,"user_id":17651108,"display_name":"Azadi Yazdani"},"score":0,"creation_date":1687331192,"post_id":76520200,"comment_id":134919837,"body_markdown":"package has no modifier access. Also your question was about public vs protected access modifier in an interface and the implementation of that, not about package modifier. I&#39;m not answering about other situations. But generally you are right and a standalone java file can have either public or package access in top-level.","body":"package has no modifier access. Also your question was about public vs protected access modifier in an interface and the implementation of that, not about package modifier. I&#39;m not answering about other situations. But generally you are right and a standalone java file can have either public or package access in top-level."}],"tags":[],"owner":{"account_id":23617210,"reputation":256,"user_id":17651108,"display_name":"Azadi Yazdani"},"comment_count":4,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1687325131,"creation_date":1687325131,"answer_id":76520200,"question_id":76520150,"body_markdown":"You always have to use at least one Public Class in your java file, otherwise it won&#39;t be compiled to .class file in JVM. Only methods and fields are behaved as private or protected. If you want to have a private or protected class for example, you need to declare them in another Public class.","title":"What should be the access modifier of ServiceImpl Class?","body":"<p>You always have to use at least one Public Class in your java file, otherwise it won't be compiled to .class file in JVM. Only methods and fields are behaved as private or protected. If you want to have a private or protected class for example, you need to declare them in another Public class.</p>\n"},{"tags":[],"owner":{"account_id":28695489,"reputation":611,"user_id":21973805,"display_name":"Ahmed Nabil"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687329610,"creation_date":1687329610,"answer_id":76520590,"question_id":76520150,"body_markdown":"totally up to you, if you will not use it outside the package, use default modifier.","title":"What should be the access modifier of ServiceImpl Class?","body":"<p>totally up to you, if you will not use it outside the package, use default modifier.</p>\n"}],"owner":{"account_id":11922641,"reputation":25,"user_id":8724742,"display_name":"Rejaul Karim"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1687329610,"creation_date":1687324589,"question_id":76520150,"body_markdown":"A class `CorporateServiceImpl` is implementing an interface called `CorporateService`. Here I know that the `CorporateServiceImpl` class never be used outside of the package. I will use the implemented method of the `CorporateServiceImpl` through the interface. In that case, what should be the access modifier of the `CorporateServiceImpl` class? Currently, I am preferring `protected` so that other classes of the package could use this. Is my implementation correct? Or it should be public? ","title":"What should be the access modifier of ServiceImpl Class?","body":"<p>A class <code>CorporateServiceImpl</code> is implementing an interface called <code>CorporateService</code>. Here I know that the <code>CorporateServiceImpl</code> class never be used outside of the package. I will use the implemented method of the <code>CorporateServiceImpl</code> through the interface. In that case, what should be the access modifier of the <code>CorporateServiceImpl</code> class? Currently, I am preferring <code>protected</code> so that other classes of the package could use this. Is my implementation correct? Or it should be public?</p>\n"},{"tags":["java","postgresql","hibernate","jpa"],"answers":[{"comments":[{"owner":{"account_id":3496867,"reputation":3005,"user_id":2924784,"accept_rate":83,"display_name":"orirab"},"score":0,"creation_date":1534324050,"post_id":51849358,"comment_id":90663957,"body_markdown":"He wants to lock the row for the specific query only, not the entire database or user","body":"He wants to lock the row for the specific query only, not the entire database or user"},{"owner":{"account_id":8633322,"reputation":218443,"user_id":6464308,"display_name":"Laurenz Albe"},"score":0,"creation_date":1534355455,"post_id":51849358,"comment_id":90679845,"body_markdown":"Is there no way to run an SQL statement from Hibernate? `SET LOCAL lock_timeout = 1000`","body":"Is there no way to run an SQL statement from Hibernate? <code>SET LOCAL lock_timeout = 1000</code>"}],"tags":[],"owner":{"account_id":8633322,"reputation":218443,"user_id":6464308,"display_name":"Laurenz Albe"},"comment_count":2,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1534278747,"creation_date":1534278747,"answer_id":51849358,"question_id":51845853,"body_markdown":"There is the `lock_timeout` parameter that does exactly what you want.\r\n\r\nYou can set it in `postgresql.conf` or with `ALTER ROLE` or `ALTER DATABASE` per user or per database.","title":"How to set lock timeout in postgres - Hibernate","body":"<p>There is the <code>lock_timeout</code> parameter that does exactly what you want.</p>\n\n<p>You can set it in <code>postgresql.conf</code> or with <code>ALTER ROLE</code> or <code>ALTER DATABASE</code> per user or per database.</p>\n"},{"comments":[{"owner":{"account_id":70791,"reputation":1619,"user_id":204950,"accept_rate":92,"display_name":"banterCZ"},"score":0,"creation_date":1687329391,"post_id":51857045,"comment_id":134919514,"body_markdown":"Watch out! This is only session local settings, see https://www.postgresql.org/docs/current/config-setting.html For global settings, see my answer https://stackoverflow.com/a/74208072/204950","body":"Watch out! This is only session local settings, see <a href=\"https://www.postgresql.org/docs/current/config-setting.html\" rel=\"nofollow noreferrer\">postgresql.org/docs/current/config-setting.html</a> For global settings, see my answer <a href=\"https://stackoverflow.com/a/74208072/204950\">stackoverflow.com/a/74208072/204950</a>"}],"tags":[],"owner":{"account_id":195691,"reputation":28439,"user_id":438742,"accept_rate":73,"display_name":"kan"},"comment_count":1,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1534329223,"creation_date":1534328857,"answer_id":51857045,"question_id":51845853,"body_markdown":"I think you could try\r\n\r\n\r\n    SET LOCAL lock_timeout = &#39;10s&#39;;\r\n    SELECT ....;\r\n\r\nI doubt Hibernate supports this out-of-box. You could try find a way to extend it, not sure if it worth it. Because I guess using locks on a postges database (which is mvcc) is not the smartest option.\r\n\r\nYou could also do `NO WAIT` and delay-retry several times from your code.\r\n","title":"How to set lock timeout in postgres - Hibernate","body":"<p>I think you could try</p>\n\n<pre><code>SET LOCAL lock_timeout = '10s';\nSELECT ....;\n</code></pre>\n\n<p>I doubt Hibernate supports this out-of-box. You could try find a way to extend it, not sure if it worth it. Because I guess using locks on a postges database (which is mvcc) is not the smartest option.</p>\n\n<p>You could also do <code>NO WAIT</code> and delay-retry several times from your code.</p>\n"},{"comments":[{"owner":{"account_id":1887647,"reputation":5271,"user_id":1706545,"accept_rate":89,"display_name":"Daniel Taub"},"score":0,"creation_date":1534746405,"post_id":51894579,"comment_id":90799548,"body_markdown":"it&#39;s was a typo mistake,ive change the question","body":"it&#39;s was a typo mistake,ive change the question"},{"owner":{"account_id":4737721,"reputation":651,"user_id":3831579,"accept_rate":35,"display_name":"Sagar Rout"},"score":3,"creation_date":1614080009,"post_id":51894579,"comment_id":117269522,"body_markdown":"It won&#39;t work with Postgres... if provide 0 for javax.persistence.lock.timeout... NO_WAIT will trigger but with other values postgres ignores it.","body":"It won&#39;t work with Postgres... if provide 0 for javax.persistence.lock.timeout... NO_WAIT will trigger but with other values postgres ignores it."}],"tags":[],"owner":{"account_id":12327139,"reputation":3107,"user_id":8994385,"display_name":"Thorben Janssen"},"comment_count":2,"down_vote_count":2,"up_vote_count":10,"is_accepted":false,"score":8,"last_activity_date":1534505780,"creation_date":1534505780,"answer_id":51894579,"question_id":51845853,"body_markdown":"Hibernate supports a [bunch of query hints][1]. The one you&#39;re using sets the timeout for the query, not for the pessimistic lock. The query and the lock are independent of each other, and you need to use the hint shown below.\r\n\r\nBut before you do that, please be aware, that Hibernate doesn&#39;t handle the timeout itself. It only sends it to the database and it depends on the database, if and how it applies it.\r\n\r\nTo set a timeout for the pessimistic lock, you need to use the `javax.persistence.lock.timeout` hint instead. Here&#39;s an example:\r\n\r\n    entityManager.createQuery(&quot;SELECT value from Table where id=:id&quot;)\r\n            .setParameter(&quot;id&quot;, &quot;123&quot;)\r\n            .setLockMode(LockModeType.PESSIMISTIC_WRITE)\r\n            .setHint(&quot;javax.persistence.lock.timeout&quot;, 10000)\r\n            .getSingleResult();\r\n\r\n\r\n  [1]: https://www.thoughts-on-java.org/11-jpa-hibernate-query-hints-every-developer-know/","title":"How to set lock timeout in postgres - Hibernate","body":"<p>Hibernate supports a <a href=\"https://www.thoughts-on-java.org/11-jpa-hibernate-query-hints-every-developer-know/\" rel=\"noreferrer\">bunch of query hints</a>. The one you're using sets the timeout for the query, not for the pessimistic lock. The query and the lock are independent of each other, and you need to use the hint shown below.</p>\n\n<p>But before you do that, please be aware, that Hibernate doesn't handle the timeout itself. It only sends it to the database and it depends on the database, if and how it applies it.</p>\n\n<p>To set a timeout for the pessimistic lock, you need to use the <code>javax.persistence.lock.timeout</code> hint instead. Here's an example:</p>\n\n<pre><code>entityManager.createQuery(\"SELECT value from Table where id=:id\")\n        .setParameter(\"id\", \"123\")\n        .setLockMode(LockModeType.PESSIMISTIC_WRITE)\n        .setHint(\"javax.persistence.lock.timeout\", 10000)\n        .getSingleResult();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2326068,"reputation":101,"user_id":2040567,"display_name":"LubošCZ"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1554232306,"creation_date":1554232306,"answer_id":55481974,"question_id":51845853,"body_markdown":"The hint for lock timeout for PostgresSQL doesn&#39;t work on PostreSQL 9.6 (`.setHint(&quot;javax.persistence.lock.timeout&quot;, 10000`)\r\n\r\n\r\nThe only solution I found is uncommenting lock_timeout property in postgresql.conf:\r\n\r\n    lock_timeout = 10000\t\t\t# in milliseconds, 0 is disabled\r\n\r\n","title":"How to set lock timeout in postgres - Hibernate","body":"<p>The hint for lock timeout for PostgresSQL doesn't work on PostreSQL 9.6 (<code>.setHint(\"javax.persistence.lock.timeout\", 10000</code>)</p>\n\n<p>The only solution I found is uncommenting lock_timeout property in postgresql.conf:</p>\n\n<pre><code>lock_timeout = 10000            # in milliseconds, 0 is disabled\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3619003,"reputation":663,"user_id":3018285,"accept_rate":50,"display_name":"ALex"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666788563,"creation_date":1666788563,"answer_id":74208072,"question_id":51845853,"body_markdown":"For anyone who&#39;s still looking for a data jpa solution, this is how i managed to do it\r\n\r\n1. First i&#39;ve created a function in postgres\r\n```\r\nCREATE function function_name (some_var bigint)\r\nRETURNS TABLE (id BIGINT, counter bigint, organisation_id bigint) -- here you list all the columns you want to be returned in the select statement\r\nLANGUAGE plpgsql\r\nAS\r\n$$\r\nBEGIN\r\n\tSET LOCAL lock_timeout = &#39;5s&#39;;\r\n\treturn query SELECT * from some_table where some_table.id = some_var FOR UPDATE;\r\nEND;\r\n$$;\r\n```\r\n\r\n2. then in the repository interface i&#39;ve created a native query that calls the function. This will apply the lock timeout on that particular transaction\r\n```\r\n  @Transactional\r\n  @Query(value = &quot;&quot;&quot;\r\n      select * from function_name(:id);\r\n      &quot;&quot;&quot;, nativeQuery = true)\r\n  Optional&lt;SomeTableEntity&gt; findById(Long id);\r\n```","title":"How to set lock timeout in postgres - Hibernate","body":"<p>For anyone who's still looking for a data jpa solution, this is how i managed to do it</p>\n<ol>\n<li>First i've created a function in postgres</li>\n</ol>\n<pre><code>CREATE function function_name (some_var bigint)\nRETURNS TABLE (id BIGINT, counter bigint, organisation_id bigint) -- here you list all the columns you want to be returned in the select statement\nLANGUAGE plpgsql\nAS\n$$\nBEGIN\n    SET LOCAL lock_timeout = '5s';\n    return query SELECT * from some_table where some_table.id = some_var FOR UPDATE;\nEND;\n$$;\n</code></pre>\n<ol start=\"2\">\n<li>then in the repository interface i've created a native query that calls the function. This will apply the lock timeout on that particular transaction</li>\n</ol>\n<pre><code>  @Transactional\n  @Query(value = &quot;&quot;&quot;\n      select * from function_name(:id);\n      &quot;&quot;&quot;, nativeQuery = true)\n  Optional&lt;SomeTableEntity&gt; findById(Long id);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1125613,"reputation":18964,"user_id":1112963,"accept_rate":59,"display_name":"Zon"},"score":0,"creation_date":1696234505,"post_id":76520564,"comment_id":136122282,"body_markdown":"And restart the database e.g.: `sudo systemctl restart postgresql`","body":"And restart the database e.g.: <code>sudo systemctl restart postgresql</code>"}],"tags":[],"owner":{"account_id":70791,"reputation":1619,"user_id":204950,"accept_rate":92,"display_name":"banterCZ"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1687329264,"creation_date":1687329264,"answer_id":76520564,"question_id":51845853,"body_markdown":"Hibernate has refused to do any workaround (no offense), see https://hibernate.atlassian.net/browse/HHH-16071, since\r\n\r\n&gt; 1. JPA query hints are optional.\r\n&gt; 2. Postgres itself does not support statement-level lock timeouts.\r\n\r\nBut there is an option to globally configure `lock_timeout` parameter, see https://postgresqlco.nf/doc/en/param/lock_timeout/\r\n\r\n```sql\r\nALTER DATABASE name SET lock_timeout=10000;\r\n```\r\n\r\nTo print current value, use\r\n```sql\r\nshow lock_timeout;\r\n```","title":"How to set lock timeout in postgres - Hibernate","body":"<p>Hibernate has refused to do any workaround (no offense), see <a href=\"https://hibernate.atlassian.net/browse/HHH-16071\" rel=\"nofollow noreferrer\">https://hibernate.atlassian.net/browse/HHH-16071</a>, since</p>\n<blockquote>\n<ol>\n<li>JPA query hints are optional.</li>\n<li>Postgres itself does not support statement-level lock timeouts.</li>\n</ol>\n</blockquote>\n<p>But there is an option to globally configure <code>lock_timeout</code> parameter, see <a href=\"https://postgresqlco.nf/doc/en/param/lock_timeout/\" rel=\"nofollow noreferrer\">https://postgresqlco.nf/doc/en/param/lock_timeout/</a></p>\n<pre class=\"lang-sql prettyprint-override\"><code>ALTER DATABASE name SET lock_timeout=10000;\n</code></pre>\n<p>To print current value, use</p>\n<pre class=\"lang-sql prettyprint-override\"><code>show lock_timeout;\n</code></pre>\n"}],"owner":{"account_id":1887647,"reputation":5271,"user_id":1706545,"accept_rate":89,"display_name":"Daniel Taub"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13274,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"answer_count":6,"score":16,"last_activity_date":1687329264,"creation_date":1534263695,"question_id":51845853,"body_markdown":"I&#39;m trying to set a [`Lock`][1] for the row I&#39;m working on until the next commit:\r\n\r\n    entityManager.createQuery(&quot;SELECT value from Table where id=:id&quot;)\r\n                .setParameter(&quot;id&quot;, &quot;123&quot;)\r\n                .setLockMode(LockModeType.PESSIMISTIC_WRITE)\r\n                .setHint(&quot;javax.persistence.lock.timeout&quot;, 10000)\r\n                .getSingleResult();\r\n\r\nWhat I thought should happen is that if two threads will try to write to the db at the same time, one thread will reach the update operation before the other, the second thread should wait 10 seconds and then throw [`PessimisticLockException`][2].\r\n\r\nBut instead the thread hangs until the other thread finishes, regardless of the timeout set.\r\n\r\nLook at this example :\r\n\r\n    database.createTransaction(transaction -&gt; {\r\n        // Execute the first request to the db, and lock the table\r\n        requestAndLock(transaction);\r\n    \r\n        // open another transaction, and execute the second request in\r\n        // a different transaction\r\n        database.createTransaction(secondTransaction -&gt; {\r\n            requestAndLock(secondTransaction);\r\n        });\r\n    \r\n        transaction.commit();\r\n    });\r\n\r\nI expected that in the second request the transaction will wait until the timeout set and then throw the [`PessimisticLockException`][2], but instead it deadlocks forever.\r\n\r\n\r\nHibernate generates my request to the db this way : \r\n\r\n    SELECT value from Table where id=123 FOR UPDATE\r\n\r\nIn this [answer][3] I saw that `Postgres` allows only `SELECT FOR UPDATE NO WAIT` that sets the timeout to 0, but it isn&#39;t possible to set a timeout in that way.\r\n\r\nIs there any other way that I can use with `Hibernate / JPA`?\r\nMaybe [this way][4] is somehow recommended?\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/33081311/1706545\r\n  [2]: https://docs.oracle.com/javaee/7/api/javax/persistence/PessimisticLockException.html\r\n  [3]: https://stackoverflow.com/a/19850909/1706545\r\n  [4]: https://stackoverflow.com/questions/20963450/controlling-duration-of-postgresql-lock-waits","title":"How to set lock timeout in postgres - Hibernate","body":"<p>I'm trying to set a <a href=\"https://stackoverflow.com/a/33081311/1706545\"><code>Lock</code></a> for the row I'm working on until the next commit:</p>\n\n<pre><code>entityManager.createQuery(\"SELECT value from Table where id=:id\")\n            .setParameter(\"id\", \"123\")\n            .setLockMode(LockModeType.PESSIMISTIC_WRITE)\n            .setHint(\"javax.persistence.lock.timeout\", 10000)\n            .getSingleResult();\n</code></pre>\n\n<p>What I thought should happen is that if two threads will try to write to the db at the same time, one thread will reach the update operation before the other, the second thread should wait 10 seconds and then throw <a href=\"https://docs.oracle.com/javaee/7/api/javax/persistence/PessimisticLockException.html\" rel=\"noreferrer\"><code>PessimisticLockException</code></a>.</p>\n\n<p>But instead the thread hangs until the other thread finishes, regardless of the timeout set.</p>\n\n<p>Look at this example :</p>\n\n<pre><code>database.createTransaction(transaction -&gt; {\n    // Execute the first request to the db, and lock the table\n    requestAndLock(transaction);\n\n    // open another transaction, and execute the second request in\n    // a different transaction\n    database.createTransaction(secondTransaction -&gt; {\n        requestAndLock(secondTransaction);\n    });\n\n    transaction.commit();\n});\n</code></pre>\n\n<p>I expected that in the second request the transaction will wait until the timeout set and then throw the <a href=\"https://docs.oracle.com/javaee/7/api/javax/persistence/PessimisticLockException.html\" rel=\"noreferrer\"><code>PessimisticLockException</code></a>, but instead it deadlocks forever.</p>\n\n<p>Hibernate generates my request to the db this way : </p>\n\n<pre><code>SELECT value from Table where id=123 FOR UPDATE\n</code></pre>\n\n<p>In this <a href=\"https://stackoverflow.com/a/19850909/1706545\">answer</a> I saw that <code>Postgres</code> allows only <code>SELECT FOR UPDATE NO WAIT</code> that sets the timeout to 0, but it isn't possible to set a timeout in that way.</p>\n\n<p>Is there any other way that I can use with <code>Hibernate / JPA</code>?\nMaybe <a href=\"https://stackoverflow.com/questions/20963450/controlling-duration-of-postgresql-lock-waits\">this way</a> is somehow recommended?</p>\n"},{"tags":["java","jaxb","resteasy"],"answers":[{"tags":[],"owner":{"display_name":"user4821194"},"comment_count":0,"down_vote_count":0,"up_vote_count":17,"is_accepted":true,"score":17,"last_activity_date":1617371913,"creation_date":1459364632,"answer_id":36317524,"question_id":36317022,"body_markdown":"Now I am able to solve this issue. I need to add following dependency in `pom.xml`:\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;\r\n   \t&lt;artifactId&gt;resteasy-jaxb-provider&lt;/artifactId&gt;\r\n   \t&lt;version&gt;3.0.16.Final&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\nAnd 1) I should be using `@Produces(MediaType.APPLICATION_XML)` on method signature to get following response.\r\n\r\n```xml\r\n&lt;collection&gt;\r\n    &lt;student&gt;\r\n        &lt;student_id&gt;0&lt;/student_id&gt;\r\n        &lt;student_name&gt;Ricky&lt;/student_name&gt;\r\n        &lt;student_rollnumber&gt;AOHP451&lt;/student_rollnumber&gt;\r\n    &lt;/student&gt;\r\n    &lt;student&gt;\r\n        &lt;student_id&gt;1&lt;/student_id&gt;\r\n        &lt;student_name&gt;Mayer&lt;/student_name&gt;\r\n        &lt;student_rollnumber&gt;DKLP987&lt;/student_rollnumber&gt;\r\n    &lt;/student&gt;\r\n&lt;/collection&gt;\r\n```\r\n\r\n2) If you want to use `@Produces(MediaType.TEXT_PLAIN)` then code will gives you following output which doesn&#39;t looks useful.\r\n\r\n    [com.mkyong.rest.Student@4d5fd75e, com.mkyong.rest.Student@7715574d]\r\n\r\nSo use 1) solution.","title":"Could not find MessageBodyWriter for response object of type: java.util.ArrayList of media type: text/html - in Resteasy","body":"<p>Now I am able to solve this issue. I need to add following dependency in <code>pom.xml</code>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;\n    &lt;artifactId&gt;resteasy-jaxb-provider&lt;/artifactId&gt;\n    &lt;version&gt;3.0.16.Final&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>And 1) I should be using <code>@Produces(MediaType.APPLICATION_XML)</code> on method signature to get following response.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;collection&gt;\n    &lt;student&gt;\n        &lt;student_id&gt;0&lt;/student_id&gt;\n        &lt;student_name&gt;Ricky&lt;/student_name&gt;\n        &lt;student_rollnumber&gt;AOHP451&lt;/student_rollnumber&gt;\n    &lt;/student&gt;\n    &lt;student&gt;\n        &lt;student_id&gt;1&lt;/student_id&gt;\n        &lt;student_name&gt;Mayer&lt;/student_name&gt;\n        &lt;student_rollnumber&gt;DKLP987&lt;/student_rollnumber&gt;\n    &lt;/student&gt;\n&lt;/collection&gt;\n</code></pre>\n<ol start=\"2\">\n<li><p>If you want to use <code>@Produces(MediaType.TEXT_PLAIN)</code> then code will gives you following output which doesn't looks useful.</p>\n<p>[com.mkyong.rest.Student@4d5fd75e, com.mkyong.rest.Student@7715574d]</p>\n</li>\n</ol>\n<p>So use 1) solution.</p>\n"},{"comments":[{"owner":{"account_id":35140,"reputation":63,"user_id":99390,"display_name":"Bruce Loth"},"score":0,"creation_date":1690311925,"post_id":40225493,"comment_id":135335045,"body_markdown":"Still a solution for 2023 (except now using **resteasy-jackson2-provider**)","body":"Still a solution for 2023 (except now using <b>resteasy-jackson2-provider</b>)"}],"tags":[],"owner":{"account_id":1764655,"reputation":2160,"user_id":1610778,"display_name":"Stan Sokolov"},"comment_count":1,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1477335163,"creation_date":1477335163,"answer_id":40225493,"question_id":36317022,"body_markdown":"Try to add particular version of serializer\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;\r\n            &lt;artifactId&gt;resteasy-jackson-provider&lt;/artifactId&gt;\r\n            &lt;version&gt;${resteasy.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;","title":"Could not find MessageBodyWriter for response object of type: java.util.ArrayList of media type: text/html - in Resteasy","body":"<p>Try to add particular version of serializer</p>\n\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;\n        &lt;artifactId&gt;resteasy-jackson-provider&lt;/artifactId&gt;\n        &lt;version&gt;${resteasy.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2043806,"reputation":4771,"user_id":2118777,"display_name":"Pipo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1531515409,"creation_date":1531515409,"answer_id":51332708,"question_id":36317022,"body_markdown":"To be more clear, for beginners. add the\r\n\r\n`@XmlRootElement(name = &quot;yourClassLowerCased&quot;)` at the beginning of your class, like\r\n\r\n    package org.dlss.entities;\r\n    import javax.persistence.*;\r\n    import javax.xml.bind.annotation.XmlRootElement;\r\n    \r\n    \r\n    @Entity //The class will be a javax.persistence Entity (could be stored in a DB)\r\n    @Table(name = &quot;person&quot;, schema = &quot;public&quot;, catalog = &quot;&lt;databaseName&gt;&quot;) //Table name\r\n    @XmlRootElement(name = &quot;person&quot;)\r\n    public class PersonEntity {\r\n    \r\n    \r\n        @Id //Following field will be the id of the table\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY) //Will be autoincremented when generated for type SERIAL into postgresql\r\n        private Integer id;\r\n","title":"Could not find MessageBodyWriter for response object of type: java.util.ArrayList of media type: text/html - in Resteasy","body":"<p>To be more clear, for beginners. add the</p>\n\n<p><code>@XmlRootElement(name = \"yourClassLowerCased\")</code> at the beginning of your class, like</p>\n\n<pre><code>package org.dlss.entities;\nimport javax.persistence.*;\nimport javax.xml.bind.annotation.XmlRootElement;\n\n\n@Entity //The class will be a javax.persistence Entity (could be stored in a DB)\n@Table(name = \"person\", schema = \"public\", catalog = \"&lt;databaseName&gt;\") //Table name\n@XmlRootElement(name = \"person\")\npublic class PersonEntity {\n\n\n    @Id //Following field will be the id of the table\n    @GeneratedValue(strategy = GenerationType.IDENTITY) //Will be autoincremented when generated for type SERIAL into postgresql\n    private Integer id;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4978603,"reputation":65,"user_id":4004262,"display_name":"che"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1539083459,"creation_date":1539080983,"answer_id":52718840,"question_id":36317022,"body_markdown":"    @Produces(MediaType.APPLICATION_JSON)\r\n    @Consumes(MediaType.APPLICATION_JSON)\r\n\r\nadding those annotations solved my issue.","title":"Could not find MessageBodyWriter for response object of type: java.util.ArrayList of media type: text/html - in Resteasy","body":"<pre><code>@Produces(MediaType.APPLICATION_JSON)\n@Consumes(MediaType.APPLICATION_JSON)\n</code></pre>\n\n<p>adding those annotations solved my issue.</p>\n"},{"tags":[],"owner":{"account_id":1696809,"reputation":1632,"user_id":1558028,"accept_rate":100,"display_name":"androbin"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1551336258,"creation_date":1550777557,"answer_id":54814842,"question_id":36317022,"body_markdown":"For me it was about trying to serialize the array to XML. If you would like that it would need a wrapper class like this for movies:\r\n\r\n```java\r\n@XmlRootElement(name = &quot;movies&quot;)\r\n@XmlAccessorType(XmlAccessType.FIELD)\r\npublic class Movies\r\n{\r\n    @XmlElement(name = &quot;movie&quot;)\r\n    private List&lt;Movie&gt; movies;\r\n \r\n    public List&lt;Movie&gt; getMovies() {\r\n        return movies;\r\n    }\r\n \r\n    public void setMovies(List&lt;Movie&gt; movies) {\r\n        this.movies = movies;\r\n    }\r\n}\r\n```\r\n\r\nThis way it can be serialized under the root object.","title":"Could not find MessageBodyWriter for response object of type: java.util.ArrayList of media type: text/html - in Resteasy","body":"<p>For me it was about trying to serialize the array to XML. If you would like that it would need a wrapper class like this for movies:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@XmlRootElement(name = \"movies\")\n@XmlAccessorType(XmlAccessType.FIELD)\npublic class Movies\n{\n    @XmlElement(name = \"movie\")\n    private List&lt;Movie&gt; movies;\n\n    public List&lt;Movie&gt; getMovies() {\n        return movies;\n    }\n\n    public void setMovies(List&lt;Movie&gt; movies) {\n        this.movies = movies;\n    }\n}\n</code></pre>\n\n<p>This way it can be serialized under the root object.</p>\n"},{"tags":[],"owner":{"account_id":74886,"reputation":26643,"user_id":214977,"accept_rate":69,"display_name":"granadaCoder"},"comment_count":0,"down_vote_count":0,"up_vote_count":29,"is_accepted":false,"score":29,"last_activity_date":1579784817,"creation_date":1560891023,"answer_id":56656851,"question_id":36317022,"body_markdown":"(For those who find the question, working with quarkus)\r\n\r\nUsing this setup routine:\r\n\r\n    mvn io.quarkus:quarkus-maven-plugin:0.16.1:create     -DprojectGroupId=com.sample     -DprojectArtifactId=hello-quarkus     -DclassName=&quot;com.sample.DemoEndpoint&quot;     -Dpath=&quot;/persons&quot;\r\n\r\nTo fix the issue described here, I had to add this dependency.\r\n\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n      &lt;artifactId&gt;quarkus-resteasy-jsonb&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\nhere is my full pom.xml after I added the above dependency.  Again, 99% of the below pom.xml came from the mvn command above.\r\n\r\n\r\n    &lt;?xml version=&quot;1.0&quot;?&gt;\r\n    &lt;project xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot; xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n        xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;\r\n      &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n      &lt;groupId&gt;com.sample&lt;/groupId&gt;\r\n      &lt;artifactId&gt;hello-quarkus&lt;/artifactId&gt;\r\n      &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n      &lt;properties&gt;\r\n        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n        &lt;surefire-plugin.version&gt;2.22.0&lt;/surefire-plugin.version&gt;\r\n        &lt;quarkus.version&gt;0.16.1&lt;/quarkus.version&gt;\r\n        &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n      &lt;/properties&gt;\r\n      &lt;dependencyManagement&gt;\r\n        &lt;dependencies&gt;\r\n          &lt;dependency&gt;\r\n            &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n            &lt;artifactId&gt;quarkus-bom&lt;/artifactId&gt;\r\n            &lt;version&gt;${quarkus.version}&lt;/version&gt;\r\n            &lt;type&gt;pom&lt;/type&gt;\r\n            &lt;scope&gt;import&lt;/scope&gt;\r\n          &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n      &lt;/dependencyManagement&gt;\r\n      &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n          &lt;artifactId&gt;quarkus-resteasy&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n    \r\n        &lt;!-- ADDED MAGIC HERE --&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n          &lt;artifactId&gt;quarkus-resteasy-jsonb&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n    \r\n    \r\n    \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n          &lt;artifactId&gt;quarkus-junit5&lt;/artifactId&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;io.rest-assured&lt;/groupId&gt;\r\n          &lt;artifactId&gt;rest-assured&lt;/artifactId&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n      &lt;/dependencies&gt;\r\n      &lt;build&gt;\r\n        &lt;plugins&gt;\r\n          &lt;plugin&gt;\r\n            &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n            &lt;artifactId&gt;quarkus-maven-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;${quarkus.version}&lt;/version&gt;\r\n            &lt;executions&gt;\r\n              &lt;execution&gt;\r\n                &lt;goals&gt;\r\n                  &lt;goal&gt;build&lt;/goal&gt;\r\n                &lt;/goals&gt;\r\n              &lt;/execution&gt;\r\n            &lt;/executions&gt;\r\n          &lt;/plugin&gt;\r\n          &lt;plugin&gt;\r\n            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;${surefire-plugin.version}&lt;/version&gt;\r\n            &lt;configuration&gt;\r\n              &lt;systemProperties&gt;\r\n                &lt;java.util.logging.manager&gt;org.jboss.logmanager.LogManager&lt;/java.util.logging.manager&gt;\r\n              &lt;/systemProperties&gt;\r\n            &lt;/configuration&gt;\r\n          &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n      &lt;/build&gt;\r\n      &lt;profiles&gt;\r\n        &lt;profile&gt;\r\n          &lt;id&gt;native&lt;/id&gt;\r\n          &lt;activation&gt;\r\n            &lt;property&gt;\r\n              &lt;name&gt;native&lt;/name&gt;\r\n            &lt;/property&gt;\r\n          &lt;/activation&gt;\r\n          &lt;build&gt;\r\n            &lt;plugins&gt;\r\n              &lt;plugin&gt;\r\n                &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n                &lt;artifactId&gt;quarkus-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;${quarkus.version}&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                  &lt;execution&gt;\r\n                    &lt;goals&gt;\r\n                      &lt;goal&gt;native-image&lt;/goal&gt;\r\n                    &lt;/goals&gt;\r\n                    &lt;configuration&gt;\r\n                      &lt;enableHttpUrlHandler&gt;true&lt;/enableHttpUrlHandler&gt;\r\n                    &lt;/configuration&gt;\r\n                  &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n              &lt;/plugin&gt;\r\n              &lt;plugin&gt;\r\n                &lt;artifactId&gt;maven-failsafe-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;${surefire-plugin.version}&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                  &lt;execution&gt;\r\n                    &lt;goals&gt;\r\n                      &lt;goal&gt;integration-test&lt;/goal&gt;\r\n                      &lt;goal&gt;verify&lt;/goal&gt;\r\n                    &lt;/goals&gt;\r\n                    &lt;configuration&gt;\r\n                      &lt;systemProperties&gt;\r\n                        &lt;native.image.path&gt;${project.build.directory}/${project.build.finalName}-runner&lt;/native.image.path&gt;\r\n                      &lt;/systemProperties&gt;\r\n                    &lt;/configuration&gt;\r\n                  &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n              &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n          &lt;/build&gt;\r\n        &lt;/profile&gt;\r\n      &lt;/profiles&gt;\r\n    &lt;/project&gt;\r\n\r\n","title":"Could not find MessageBodyWriter for response object of type: java.util.ArrayList of media type: text/html - in Resteasy","body":"<p>(For those who find the question, working with quarkus)</p>\n\n<p>Using this setup routine:</p>\n\n<pre><code>mvn io.quarkus:quarkus-maven-plugin:0.16.1:create     -DprojectGroupId=com.sample     -DprojectArtifactId=hello-quarkus     -DclassName=\"com.sample.DemoEndpoint\"     -Dpath=\"/persons\"\n</code></pre>\n\n<p>To fix the issue described here, I had to add this dependency.</p>\n\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n  &lt;artifactId&gt;quarkus-resteasy-jsonb&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>here is my full pom.xml after I added the above dependency.  Again, 99% of the below pom.xml came from the mvn command above.</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;project xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\" xmlns=\"http://maven.apache.org/POM/4.0.0\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;groupId&gt;com.sample&lt;/groupId&gt;\n  &lt;artifactId&gt;hello-quarkus&lt;/artifactId&gt;\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n  &lt;properties&gt;\n    &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n    &lt;surefire-plugin.version&gt;2.22.0&lt;/surefire-plugin.version&gt;\n    &lt;quarkus.version&gt;0.16.1&lt;/quarkus.version&gt;\n    &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n  &lt;/properties&gt;\n  &lt;dependencyManagement&gt;\n    &lt;dependencies&gt;\n      &lt;dependency&gt;\n        &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n        &lt;artifactId&gt;quarkus-bom&lt;/artifactId&gt;\n        &lt;version&gt;${quarkus.version}&lt;/version&gt;\n        &lt;type&gt;pom&lt;/type&gt;\n        &lt;scope&gt;import&lt;/scope&gt;\n      &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n  &lt;/dependencyManagement&gt;\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n      &lt;artifactId&gt;quarkus-resteasy&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n\n    &lt;!-- ADDED MAGIC HERE --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n      &lt;artifactId&gt;quarkus-resteasy-jsonb&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n\n\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n      &lt;artifactId&gt;quarkus-junit5&lt;/artifactId&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;io.rest-assured&lt;/groupId&gt;\n      &lt;artifactId&gt;rest-assured&lt;/artifactId&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n        &lt;artifactId&gt;quarkus-maven-plugin&lt;/artifactId&gt;\n        &lt;version&gt;${quarkus.version}&lt;/version&gt;\n        &lt;executions&gt;\n          &lt;execution&gt;\n            &lt;goals&gt;\n              &lt;goal&gt;build&lt;/goal&gt;\n            &lt;/goals&gt;\n          &lt;/execution&gt;\n        &lt;/executions&gt;\n      &lt;/plugin&gt;\n      &lt;plugin&gt;\n        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n        &lt;version&gt;${surefire-plugin.version}&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;systemProperties&gt;\n            &lt;java.util.logging.manager&gt;org.jboss.logmanager.LogManager&lt;/java.util.logging.manager&gt;\n          &lt;/systemProperties&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n  &lt;profiles&gt;\n    &lt;profile&gt;\n      &lt;id&gt;native&lt;/id&gt;\n      &lt;activation&gt;\n        &lt;property&gt;\n          &lt;name&gt;native&lt;/name&gt;\n        &lt;/property&gt;\n      &lt;/activation&gt;\n      &lt;build&gt;\n        &lt;plugins&gt;\n          &lt;plugin&gt;\n            &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n            &lt;artifactId&gt;quarkus-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;${quarkus.version}&lt;/version&gt;\n            &lt;executions&gt;\n              &lt;execution&gt;\n                &lt;goals&gt;\n                  &lt;goal&gt;native-image&lt;/goal&gt;\n                &lt;/goals&gt;\n                &lt;configuration&gt;\n                  &lt;enableHttpUrlHandler&gt;true&lt;/enableHttpUrlHandler&gt;\n                &lt;/configuration&gt;\n              &lt;/execution&gt;\n            &lt;/executions&gt;\n          &lt;/plugin&gt;\n          &lt;plugin&gt;\n            &lt;artifactId&gt;maven-failsafe-plugin&lt;/artifactId&gt;\n            &lt;version&gt;${surefire-plugin.version}&lt;/version&gt;\n            &lt;executions&gt;\n              &lt;execution&gt;\n                &lt;goals&gt;\n                  &lt;goal&gt;integration-test&lt;/goal&gt;\n                  &lt;goal&gt;verify&lt;/goal&gt;\n                &lt;/goals&gt;\n                &lt;configuration&gt;\n                  &lt;systemProperties&gt;\n                    &lt;native.image.path&gt;${project.build.directory}/${project.build.finalName}-runner&lt;/native.image.path&gt;\n                  &lt;/systemProperties&gt;\n                &lt;/configuration&gt;\n              &lt;/execution&gt;\n            &lt;/executions&gt;\n          &lt;/plugin&gt;\n        &lt;/plugins&gt;\n      &lt;/build&gt;\n    &lt;/profile&gt;\n  &lt;/profiles&gt;\n&lt;/project&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13742814,"reputation":729,"user_id":9917400,"display_name":"Dhruv garg"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1593365690,"creation_date":1593365690,"answer_id":62626065,"question_id":36317022,"body_markdown":"The solutions provided by others works completely fine.\r\n\r\nI just want to add, why they work?\r\n\r\nRESTEasy is a JBoss / Red Hat project that provides various frameworks to help you build RESTful Web Services and RESTful Java applications. It does not have bindings to convert java classes from JSON and vice-versa.\r\n\r\nHere comes libraries like JSON-B and Jackson, which helps to convert between java classes and JSON.\r\n\r\nFrom Json-B documentation : \r\n\r\nJSON-B is a standard binding layer for converting Java objects to/from JSON messages. It defines a default mapping algorithm for converting existing Java classes to JSON, while enabling developers to customize the mapping process through the use of Java annotations.\r\n","title":"Could not find MessageBodyWriter for response object of type: java.util.ArrayList of media type: text/html - in Resteasy","body":"<p>The solutions provided by others works completely fine.</p>\n<p>I just want to add, why they work?</p>\n<p>RESTEasy is a JBoss / Red Hat project that provides various frameworks to help you build RESTful Web Services and RESTful Java applications. It does not have bindings to convert java classes from JSON and vice-versa.</p>\n<p>Here comes libraries like JSON-B and Jackson, which helps to convert between java classes and JSON.</p>\n<p>From Json-B documentation :</p>\n<p>JSON-B is a standard binding layer for converting Java objects to/from JSON messages. It defines a default mapping algorithm for converting existing Java classes to JSON, while enabling developers to customize the mapping process through the use of Java annotations.</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1665063358,"post_id":73929754,"comment_id":130615274,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/73929754/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":19964900,"reputation":107,"user_id":17101279,"display_name":"Overdrowsed"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664749493,"creation_date":1664749493,"answer_id":73929754,"question_id":36317022,"body_markdown":"For any future readers, apart from the accepted solution make sure to use javax jaxb and not the jakarta one, works with one and not the other","title":"Could not find MessageBodyWriter for response object of type: java.util.ArrayList of media type: text/html - in Resteasy","body":"<p>For any future readers, apart from the accepted solution make sure to use javax jaxb and not the jakarta one, works with one and not the other</p>\n"},{"tags":[],"owner":{"account_id":2882651,"reputation":511,"user_id":2473158,"accept_rate":78,"display_name":"Marco S."},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687329195,"creation_date":1687329195,"answer_id":76520560,"question_id":36317022,"body_markdown":"In my case, using quarkus version 3.1.1.Final, I have resolved replacing\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n      &lt;artifactId&gt;quarkus-resteasy&lt;/artifactId&gt;\r\n      &lt;version&gt;${version.quarkus}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nwith\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n      &lt;artifactId&gt;quarkus-resteasy-jackson&lt;/artifactId&gt;\r\n      &lt;version&gt;${version.quarkus}&lt;/version&gt;\r\n    &lt;/dependency&gt;","title":"Could not find MessageBodyWriter for response object of type: java.util.ArrayList of media type: text/html - in Resteasy","body":"<p>In my case, using quarkus version 3.1.1.Final, I have resolved replacing</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n  &lt;artifactId&gt;quarkus-resteasy&lt;/artifactId&gt;\n  &lt;version&gt;${version.quarkus}&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>with</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n  &lt;artifactId&gt;quarkus-resteasy-jackson&lt;/artifactId&gt;\n  &lt;version&gt;${version.quarkus}&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"display_name":"user4821194"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":71011,"favorite_count":0,"down_vote_count":0,"up_vote_count":26,"accepted_answer_id":36317524,"answer_count":9,"score":26,"last_activity_date":1687329195,"creation_date":1459362974,"question_id":36317022,"body_markdown":"I am developing **RESTEasy** Example. In this example I am using all latest dependencies and deploying om tomcat 8.x version. I can successfully deploy the application but when I am launching the url: http://localhost:8080/RESTfulExample/rest/restwebservice/list, I see following errors are coming. Please guide what is going wrong here.\r\n\r\n    org.jboss.resteasy.core.NoMessageBodyWriterFoundFailure: Could not find MessageBodyWriter for response object of type: java.util.ArrayList of media type: text/html\r\n    \tat org.jboss.resteasy.core.ServerResponseWriter.writeNomapResponse(ServerResponseWriter.java:66)\r\n    \tat org.jboss.resteasy.core.SynchronousDispatcher.writeResponse(SynchronousDispatcher.java:466)\r\n    \tat org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:415)\r\n    \tat org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:202)\r\n    \tat org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:221)\r\n    \tat org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:56)\r\n    \tat org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:51)\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:729)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n    \tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n    \tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:212)\r\n    \tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)\r\n    \tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)\r\n    \tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:141)\r\n    \tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)\r\n    \tat org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:616)\r\n    \tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)\r\n    \tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:521)\r\n    \tat org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1096)\r\n    \tat org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:674)\r\n    \tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1500)\r\n    \tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1456)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n    \tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n    \tat java.lang.Thread.run(Thread.java:745)\r\n\r\nThe code I developed so far for reference:\r\npom.xml\r\n\r\n    &lt;repositories&gt;\r\n    \t\t&lt;repository&gt;\r\n    \t\t\t&lt;id&gt;JBoss repository&lt;/id&gt;\r\n    \t\t\t&lt;url&gt;https://repository.jboss.org/nexus/content/groups/public-jboss/&lt;/url&gt;\r\n    \t\t&lt;/repository&gt;\r\n    \t&lt;/repositories&gt;\r\n    \r\n    \t&lt;properties&gt;\r\n    \t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n    \t\t&lt;resteasy-jaxrs-version&gt;3.0.16.Final&lt;/resteasy-jaxrs-version&gt;\r\n    \t\t&lt;junit.version&gt;4.12&lt;/junit.version&gt;\r\n    \t&lt;/properties&gt;\r\n    \r\n    \t&lt;dependencies&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;resteasy-jaxrs&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${resteasy-jaxrs-version}&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;resteasy-servlet-initializer&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${resteasy-jaxrs-version}&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.2.11&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;junit&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${junit.version}&lt;/version&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    \r\n    \t&lt;!-- Project Build --&gt;\r\n    \t&lt;build&gt;\r\n    \t\t&lt;finalName&gt;RESTfulExample&lt;/finalName&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;source&gt;${java.version}&lt;/source&gt;\r\n    \t\t\t\t\t&lt;target&gt;${java.version}&lt;/target&gt;\r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n\r\nStudent.java\r\n\r\n    @XmlRootElement\r\n    public class Student {\r\n    \r\n    \tprivate int student_id;\r\n    \tprivate String student_name;\r\n    \tprivate String student_rollnumber;\r\n        // setters and getters\r\n    }\r\nRESTEasyService.java\r\n\r\n    @ApplicationPath(&quot;/rest&quot;)\r\n    public class RESTEasyService extends Application{\r\n    \r\n    }\r\nRESTWebServiceJavaExample.java\r\n\r\n    @Path(&quot;/restwebservice&quot;)\r\n    public class RESTWebServiceJavaExample {\r\n    \tprivate TreeMap&lt;Integer, Student&gt; webserviceMap= new TreeMap&lt;&gt;();\r\n    \r\n    \tpublic RESTWebServiceJavaExample(){\r\n    \r\n    \t\tStudent student = new Student();\r\n    \t\tstudent.setStudent_name(&quot;Ricky&quot;);\r\n    \t\tstudent.setStudent_rollnumber(&quot;AOHP451&quot;);\r\n    \r\n    \t\taddStudent(student);\r\n    \r\n    \t\tstudent = new Student();\r\n    \t\tstudent.setStudent_name(&quot;Mayer&quot;);\r\n    \t\tstudent.setStudent_rollnumber(&quot;DKLP987&quot;);\r\n    \t\taddStudent(student);\r\n    \r\n    \t}\r\n    \r\n    \t@GET\r\n    \t@Path(&quot;list&quot;)\r\n    \tpublic List&lt;Student&gt; getStudents() {\r\n    \t\tList&lt;Student&gt; students = new ArrayList&lt;Student&gt;();\r\n    \t\tstudents.addAll(webserviceMap.values());\r\n    \t\treturn students;\r\n    \t}\r\n    \r\n    \t@POST\r\n    \t@Path(&quot;add&quot;)\r\n    \t@Produces(&quot;text/plain&quot;)\r\n    \t@Consumes(&quot;application/xml&quot;)\r\n    \tpublic void addStudent(Student student_param) {\r\n    \t\tint id = webserviceMap.size();\r\n    \t\tstudent_param.setStudent_id(id);\r\n    \t\twebserviceMap.put(id, student_param);\r\n    \t}\r\n    }\r\nweb.xml:\r\n\r\n    &lt;web-app id=&quot;WebApp_ID&quot; version=&quot;2.4&quot;\r\n    \txmlns=&quot;http://java.sun.com/xml/ns/j2ee&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://java.sun.com/xml/ns/j2ee \r\n    \thttp://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd&quot;&gt;\r\n    \t&lt;display-name&gt;Restful Web Application&lt;/display-name&gt;\r\n    \r\n    &lt;/web-app&gt;\r\n\r\n","title":"Could not find MessageBodyWriter for response object of type: java.util.ArrayList of media type: text/html - in Resteasy","body":"<p>I am developing <strong>RESTEasy</strong> Example. In this example I am using all latest dependencies and deploying om tomcat 8.x version. I can successfully deploy the application but when I am launching the url: <a href=\"http://localhost:8080/RESTfulExample/rest/restwebservice/list\" rel=\"noreferrer\">http://localhost:8080/RESTfulExample/rest/restwebservice/list</a>, I see following errors are coming. Please guide what is going wrong here.</p>\n\n<pre><code>org.jboss.resteasy.core.NoMessageBodyWriterFoundFailure: Could not find MessageBodyWriter for response object of type: java.util.ArrayList of media type: text/html\n    at org.jboss.resteasy.core.ServerResponseWriter.writeNomapResponse(ServerResponseWriter.java:66)\n    at org.jboss.resteasy.core.SynchronousDispatcher.writeResponse(SynchronousDispatcher.java:466)\n    at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:415)\n    at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:202)\n    at org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:221)\n    at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:56)\n    at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:51)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:212)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:141)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)\n    at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:616)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:521)\n    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1096)\n    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:674)\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1500)\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1456)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    at java.lang.Thread.run(Thread.java:745)\n</code></pre>\n\n<p>The code I developed so far for reference:\npom.xml</p>\n\n<pre><code>&lt;repositories&gt;\n        &lt;repository&gt;\n            &lt;id&gt;JBoss repository&lt;/id&gt;\n            &lt;url&gt;https://repository.jboss.org/nexus/content/groups/public-jboss/&lt;/url&gt;\n        &lt;/repository&gt;\n    &lt;/repositories&gt;\n\n    &lt;properties&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n        &lt;resteasy-jaxrs-version&gt;3.0.16.Final&lt;/resteasy-jaxrs-version&gt;\n        &lt;junit.version&gt;4.12&lt;/junit.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;\n            &lt;artifactId&gt;resteasy-jaxrs&lt;/artifactId&gt;\n            &lt;version&gt;${resteasy-jaxrs-version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;\n            &lt;artifactId&gt;resteasy-servlet-initializer&lt;/artifactId&gt;\n            &lt;version&gt;${resteasy-jaxrs-version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\n            &lt;version&gt;2.2.11&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;version&gt;${junit.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;!-- Project Build --&gt;\n    &lt;build&gt;\n        &lt;finalName&gt;RESTfulExample&lt;/finalName&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;${java.version}&lt;/source&gt;\n                    &lt;target&gt;${java.version}&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n</code></pre>\n\n<p>Student.java</p>\n\n<pre><code>@XmlRootElement\npublic class Student {\n\n    private int student_id;\n    private String student_name;\n    private String student_rollnumber;\n    // setters and getters\n}\n</code></pre>\n\n<p>RESTEasyService.java</p>\n\n<pre><code>@ApplicationPath(\"/rest\")\npublic class RESTEasyService extends Application{\n\n}\n</code></pre>\n\n<p>RESTWebServiceJavaExample.java</p>\n\n<pre><code>@Path(\"/restwebservice\")\npublic class RESTWebServiceJavaExample {\n    private TreeMap&lt;Integer, Student&gt; webserviceMap= new TreeMap&lt;&gt;();\n\n    public RESTWebServiceJavaExample(){\n\n        Student student = new Student();\n        student.setStudent_name(\"Ricky\");\n        student.setStudent_rollnumber(\"AOHP451\");\n\n        addStudent(student);\n\n        student = new Student();\n        student.setStudent_name(\"Mayer\");\n        student.setStudent_rollnumber(\"DKLP987\");\n        addStudent(student);\n\n    }\n\n    @GET\n    @Path(\"list\")\n    public List&lt;Student&gt; getStudents() {\n        List&lt;Student&gt; students = new ArrayList&lt;Student&gt;();\n        students.addAll(webserviceMap.values());\n        return students;\n    }\n\n    @POST\n    @Path(\"add\")\n    @Produces(\"text/plain\")\n    @Consumes(\"application/xml\")\n    public void addStudent(Student student_param) {\n        int id = webserviceMap.size();\n        student_param.setStudent_id(id);\n        webserviceMap.put(id, student_param);\n    }\n}\n</code></pre>\n\n<p>web.xml:</p>\n\n<pre><code>&lt;web-app id=\"WebApp_ID\" version=\"2.4\"\n    xmlns=\"http://java.sun.com/xml/ns/j2ee\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://java.sun.com/xml/ns/j2ee \n    http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd\"&gt;\n    &lt;display-name&gt;Restful Web Application&lt;/display-name&gt;\n\n&lt;/web-app&gt;\n</code></pre>\n"},{"tags":["java","testng","playwright","playwright-java"],"answers":[{"tags":[],"owner":{"account_id":14342757,"reputation":543,"user_id":10360471,"display_name":"David R"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676260978,"creation_date":1676260978,"answer_id":75431814,"question_id":75059343,"body_markdown":"Here is [the Playwright for Java doc on the Video class][1], which shows how to get the video associated with the page, deleting a video (or deciding it should be), and saving as or telling it what file name to use.\r\n\r\nSo basically at some point in your test or a before/after hook, even potentially in your base class, you can tell the video to save as the test name (couple resources below if unsure how to obtain that), and to delete when successful/doesn’t fail (couple resources below on determining test result).\r\n\r\nHope that helps!\r\n\r\n## Some Resources\r\n\r\nI’m not as familiar with Java and its runners, but you may already know how to do some of these. If not, here’s a few resources I found:\r\n\r\nGetting test result\r\n - [SO question using JUnit (and an answer for TestNG) to get the test result][2]\r\n - Without a runner, using try-catch in test, within catch would be failure, so end of success or failure you would delete the video or not\r\n\r\nFinding test name\r\n - [SO question about finding method name][3]\r\n - [SO question and various answers about getting a test name in JUnit][4]\r\n\r\n\r\n  [1]: https://playwright.dev/java/docs/api/class-video\r\n  [2]: https://stackoverflow.com/questions/22773590/junit-4-11-get-test-result-in-after\r\n  [3]: https://stackoverflow.com/questions/442747/getting-the-name-of-the-currently-executing-method\r\n  [4]: https://stackoverflow.com/questions/473401/get-name-of-currently-executing-test-in-junit-4","title":"How to record video of tests with custom file name as test method name in playwright java and testng framework","body":"<p>Here is <a href=\"https://playwright.dev/java/docs/api/class-video\" rel=\"nofollow noreferrer\">the Playwright for Java doc on the Video class</a>, which shows how to get the video associated with the page, deleting a video (or deciding it should be), and saving as or telling it what file name to use.</p>\n<p>So basically at some point in your test or a before/after hook, even potentially in your base class, you can tell the video to save as the test name (couple resources below if unsure how to obtain that), and to delete when successful/doesn’t fail (couple resources below on determining test result).</p>\n<p>Hope that helps!</p>\n<h2>Some Resources</h2>\n<p>I’m not as familiar with Java and its runners, but you may already know how to do some of these. If not, here’s a few resources I found:</p>\n<p>Getting test result</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/22773590/junit-4-11-get-test-result-in-after\">SO question using JUnit (and an answer for TestNG) to get the test result</a></li>\n<li>Without a runner, using try-catch in test, within catch would be failure, so end of success or failure you would delete the video or not</li>\n</ul>\n<p>Finding test name</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/442747/getting-the-name-of-the-currently-executing-method\">SO question about finding method name</a></li>\n<li><a href=\"https://stackoverflow.com/questions/473401/get-name-of-currently-executing-test-in-junit-4\">SO question and various answers about getting a test name in JUnit</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":3875331,"reputation":3564,"user_id":3209523,"display_name":"canbax"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687328818,"creation_date":1687328818,"answer_id":76520521,"question_id":75059343,"body_markdown":"I guess there is no way to set a customer file name. Video file names are all like &#39;2b47a96bf34817179232490&#39; but you can set the directory of the file like \r\n\r\n```\r\nPath videoDirectory = Paths.get(&quot;my-custom-path&quot;);\r\nbrowser.newContext(new Browser.NewContextOptions().setRecordVideoDir(videoDirectory));\r\n```","title":"How to record video of tests with custom file name as test method name in playwright java and testng framework","body":"<p>I guess there is no way to set a customer file name. Video file names are all like '2b47a96bf34817179232490' but you can set the directory of the file like</p>\n<pre><code>Path videoDirectory = Paths.get(&quot;my-custom-path&quot;);\nbrowser.newContext(new Browser.NewContextOptions().setRecordVideoDir(videoDirectory));\n</code></pre>\n"}],"owner":{"account_id":5890641,"reputation":1533,"user_id":4637378,"accept_rate":83,"display_name":"Rajeev Dixit"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":635,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1687328818,"creation_date":1673277468,"question_id":75059343,"body_markdown":"I have test class defined as this-\r\n\r\n    public class Sample extends BaseTest {\r\n    private LoginPage loginPage;\r\n\r\n    @Override\r\n    public void initialize() {\r\n        loginPage = createInstance(LoginPage.class)\r\n        browserContext = getBrowserContext();\r\n    }\r\n    @Test(testName = &quot;sampleTestName&quot;, retryAnalyzer = RerunFailedTestCases.class)\r\n    public void sampleTestName() {\r\n        loginPage.performLogin();\r\n        loginPage.validateLogInSuccessful();\r\n    }\r\nIn BaseTest I am initializing BrowserContext and enabling video recording for the tests-\r\n\r\n    public abstract class BaseTest {\r\n    protected BrowserContext browserContext = browser.newContext(new Browser.NewContextOptions()\r\n            .setIgnoreHTTPSErrors(true)\r\n            .setPermissions(Arrays.asList(&quot;geolocation&quot;))\r\n            .setRecordVideoDir(Paths.get(VIDEOS_DIR)));\r\n    }\r\n\r\nMy requirement is-\r\n1. Record video of test with testMethod name\r\n2. only keep video of the failed tests\r\n\r\n","title":"How to record video of tests with custom file name as test method name in playwright java and testng framework","body":"<p>I have test class defined as this-</p>\n<pre><code>public class Sample extends BaseTest {\nprivate LoginPage loginPage;\n\n@Override\npublic void initialize() {\n    loginPage = createInstance(LoginPage.class)\n    browserContext = getBrowserContext();\n}\n@Test(testName = &quot;sampleTestName&quot;, retryAnalyzer = RerunFailedTestCases.class)\npublic void sampleTestName() {\n    loginPage.performLogin();\n    loginPage.validateLogInSuccessful();\n}\n</code></pre>\n<p>In BaseTest I am initializing BrowserContext and enabling video recording for the tests-</p>\n<pre><code>public abstract class BaseTest {\nprotected BrowserContext browserContext = browser.newContext(new Browser.NewContextOptions()\n        .setIgnoreHTTPSErrors(true)\n        .setPermissions(Arrays.asList(&quot;geolocation&quot;))\n        .setRecordVideoDir(Paths.get(VIDEOS_DIR)));\n}\n</code></pre>\n<p>My requirement is-</p>\n<ol>\n<li>Record video of test with testMethod name</li>\n<li>only keep video of the failed tests</li>\n</ol>\n"},{"tags":["java","multithreading","quarkus","reactive","mutiny"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1620453309,"post_id":67444442,"comment_id":119210171,"body_markdown":"Mutiny in and of itself is already reactive. So if you use a `Uni` or `Multi` in your code to start the computation in the background, it will run concurrently/asynchronously.","body":"Mutiny in and of itself is already reactive. So if you use a <code>Uni</code> or <code>Multi</code> in your code to start the computation in the background, it will run concurrently/asynchronously."},{"owner":{"account_id":2576016,"reputation":2874,"user_id":2233683,"accept_rate":75,"display_name":"GeauxEric"},"score":0,"creation_date":1620453563,"post_id":67444442,"comment_id":119210210,"body_markdown":"My process can take up to 10 minute, and I would like to return the response to the client immediately.","body":"My process can take up to 10 minute, and I would like to return the response to the client immediately."},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1620454252,"post_id":67444442,"comment_id":119210298,"body_markdown":"Okay, if the task is longrunning, it should not necessarily run on an I/O thread... Is using a framework, like [Quarzt (Quarkus Guide](https://quarkus.io/guides/quartz)) an option?","body":"Okay, if the task is longrunning, it should not necessarily run on an I/O thread... Is using a framework, like <a href=\"https://quarkus.io/guides/quartz\" rel=\"nofollow noreferrer\">Quarzt (Quarkus Guide</a>) an option?"},{"owner":{"account_id":385127,"reputation":6294,"user_id":742081,"display_name":"Ladicek"},"score":5,"creation_date":1620468939,"post_id":67444442,"comment_id":119213251,"body_markdown":"You can `@Inject org.eclipse.microprofile.context.ManagedExecutor`, which is backed by the Quarkus main worker thread pool, and submit tasks there. Or create your own thread pool, if the tasks can really take multiple minutes.","body":"You can <code>@Inject org.eclipse.microprofile.context.ManagedExecutor</code>, which is backed by the Quarkus main worker thread pool, and submit tasks there. Or create your own thread pool, if the tasks can really take multiple minutes."},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1620494103,"post_id":67444442,"comment_id":119219532,"body_markdown":"@Ladicek you may want to post that comment of yours as an answer :)","body":"@Ladicek you may want to post that comment of yours as an answer :)"},{"owner":{"account_id":2576016,"reputation":2874,"user_id":2233683,"accept_rate":75,"display_name":"GeauxEric"},"score":0,"creation_date":1620494473,"post_id":67444442,"comment_id":119219625,"body_markdown":"Thanks @Ladicek, I end up using that ManagedExecutor to send runnables.","body":"Thanks @Ladicek, I end up using that ManagedExecutor to send runnables."},{"owner":{"account_id":362789,"reputation":464,"user_id":706172,"accept_rate":30,"display_name":"agoncal"},"score":0,"creation_date":1620629500,"post_id":67444442,"comment_id":119246790,"body_markdown":"MicroProfile is working on Long Running Actions. I just don&#39;t know the status of the project https://microprofile.io/project/eclipse/microprofile-lra","body":"MicroProfile is working on Long Running Actions. I just don&#39;t know the status of the project <a href=\"https://microprofile.io/project/eclipse/microprofile-lra\" rel=\"nofollow noreferrer\">microprofile.io/project/eclipse/microprofile-lra</a>"},{"owner":{"account_id":2576016,"reputation":2874,"user_id":2233683,"accept_rate":75,"display_name":"GeauxEric"},"score":0,"creation_date":1620768007,"post_id":67444442,"comment_id":119297994,"body_markdown":"thanks for the pointer @agoncal.\nInteresting project to provide different levels of consistency. I already watched the github project.","body":"thanks for the pointer @agoncal. Interesting project to provide different levels of consistency. I already watched the github project."}],"answers":[{"tags":[],"owner":{"account_id":1276303,"reputation":2937,"user_id":1231484,"display_name":"Clement"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1687328646,"creation_date":1687328646,"answer_id":76520504,"question_id":67444442,"body_markdown":"The question is whether you want your processing to be &quot;in-and&quot; or &quot;out-of-band&quot;:\r\n\r\n1) in-band: your HTTP response must wait for the processing to complete before returning.\r\n2) out-of-band: your HTTP response is written _immediately_ and your processing runs in the background.\r\n\r\nTo implement (1), you can:\r\n\r\n - Use `Uni` and model your code using asynchronous actions like:\r\n\r\n```java\r\nreturn Uni.createFrom(something)\r\n   .chain(s -&gt; doAnotherAsyncAction(s)) // doAnotherAsyncAction returns a Uni\r\n   .chain(s -&gt; yetanotherAsyncAction(s))\r\n```\r\n\r\n - Use the event bus using a request-reply:\r\n\r\n```java\r\n@Inject EventBus bus;\r\n// ...\r\nreturn bus.request(&quot;an-address&quot;, someObject)\r\n  .map(Message::body); // the body contains the response\r\n// Somewhere else in your code:\r\n@ConsumeEvent(&quot;an-address&quot;)\r\n@Blocking\r\nMyResponse process(SomeObject object) {\r\n  // ....\r\n}\r\n```\r\n\r\nTo implement (2), you can:\r\n\r\n- Inject and Use the `org.eclipse.microprofile.context.ManagedExecutor` and submit your tasks as you would do with a regular executor\r\n- Use the event bus, but instead of `request`; use `send`. The `@ConsumeEvent` side would not return anything (as no one expects a response).\r\n\r\nFor more details about the event bus, check: https://quarkus.io/guides/reactive-event-bus\r\n\r\n ","title":"Right way to start a background task per request in Quarkus","body":"<p>The question is whether you want your processing to be &quot;in-and&quot; or &quot;out-of-band&quot;:</p>\n<ol>\n<li>in-band: your HTTP response must wait for the processing to complete before returning.</li>\n<li>out-of-band: your HTTP response is written <em>immediately</em> and your processing runs in the background.</li>\n</ol>\n<p>To implement (1), you can:</p>\n<ul>\n<li>Use <code>Uni</code> and model your code using asynchronous actions like:</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>return Uni.createFrom(something)\n   .chain(s -&gt; doAnotherAsyncAction(s)) // doAnotherAsyncAction returns a Uni\n   .chain(s -&gt; yetanotherAsyncAction(s))\n</code></pre>\n<ul>\n<li>Use the event bus using a request-reply:</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>@Inject EventBus bus;\n// ...\nreturn bus.request(&quot;an-address&quot;, someObject)\n  .map(Message::body); // the body contains the response\n// Somewhere else in your code:\n@ConsumeEvent(&quot;an-address&quot;)\n@Blocking\nMyResponse process(SomeObject object) {\n  // ....\n}\n</code></pre>\n<p>To implement (2), you can:</p>\n<ul>\n<li>Inject and Use the <code>org.eclipse.microprofile.context.ManagedExecutor</code> and submit your tasks as you would do with a regular executor</li>\n<li>Use the event bus, but instead of <code>request</code>; use <code>send</code>. The <code>@ConsumeEvent</code> side would not return anything (as no one expects a response).</li>\n</ul>\n<p>For more details about the event bus, check: <a href=\"https://quarkus.io/guides/reactive-event-bus\" rel=\"nofollow noreferrer\">https://quarkus.io/guides/reactive-event-bus</a></p>\n"}],"owner":{"account_id":2576016,"reputation":2874,"user_id":2233683,"accept_rate":75,"display_name":"GeauxEric"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2208,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1687328646,"creation_date":1620452625,"question_id":67444442,"body_markdown":"I wonder what is the good practice in Quarkus to run background task per request.\r\n\r\nSomething like this:\r\n```\r\n    @POST()\r\n    @Path(&quot;v1&quot;)\r\n    public Uni&lt;Response&gt; buildSomething() {\r\n        // start a thread to build things in the background\r\n        // when completed, save the id in DB\r\n\r\n        // return immediately\r\n        return Uni.createFrom().item(Response.accepted().build());\r\n    }\r\n\r\n    @GET()\r\n    @Path(&quot;v1&quot;)\r\n    public Uni&lt;List&lt;Long&gt;&gt; getSomethingThatHasBeenBuilt() {\r\n        // fetch ids from DB\r\n        return fetchIdsFromDB();\r\n    }\r\n```\r\n\r\nI hope I can do something like a Go routine, for which I can set a timeout and log the error. I suspect one can probably inject a vertx instance and do the task in a worker thread pool, but I don&#39;t know how that can be implemented.","title":"Right way to start a background task per request in Quarkus","body":"<p>I wonder what is the good practice in Quarkus to run background task per request.</p>\n<p>Something like this:</p>\n<pre><code>    @POST()\n    @Path(&quot;v1&quot;)\n    public Uni&lt;Response&gt; buildSomething() {\n        // start a thread to build things in the background\n        // when completed, save the id in DB\n\n        // return immediately\n        return Uni.createFrom().item(Response.accepted().build());\n    }\n\n    @GET()\n    @Path(&quot;v1&quot;)\n    public Uni&lt;List&lt;Long&gt;&gt; getSomethingThatHasBeenBuilt() {\n        // fetch ids from DB\n        return fetchIdsFromDB();\n    }\n</code></pre>\n<p>I hope I can do something like a Go routine, for which I can set a timeout and log the error. I suspect one can probably inject a vertx instance and do the task in a worker thread pool, but I don't know how that can be implemented.</p>\n"},{"tags":["java","univocity"],"owner":{"account_id":3860326,"reputation":329,"user_id":3198215,"accept_rate":62,"display_name":"mns"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687328383,"creation_date":1687328383,"question_id":76520474,"body_markdown":"I am using BatchedColumnProcessor of univocity parser to parse large CSV files. \r\nMy parser settings are :\r\n\r\n    csvParserSettings.detectFormatAutomatically();\r\n    csvParserSettings.setHeaderExtractionEnabled(true);\r\n    csvParserSettings.setMaxCharsPerColumn(-1);\r\n    csvParserSettings.setColumnReorderingEnabled(true);\r\n    final RecLoCSVBatchedProcessor processor =\r\n        new RecLoCSVBatchedProcessor(batchSize, csvAccountId);\r\n\r\n    csvParserSettings.setProcessor(processor);\r\n\r\n\r\nCode snippet where I call parsing is:\r\n\r\n     try (InputStream inputStream = new FileInputStream(csvLocalFilePath);\r\n        BOMInputStream bomInputStream = new BOMInputStream(inputStream);\r\n        Reader inputReader = new InputStreamReader(bomInputStream, &quot;UTF-8&quot;)) {\r\n\r\n        // Rows are processed in batches by RecLoCSVBatchedProcessor\r\n        List&lt;String[]&gt; rows = csvProcessor.parseAll(inputReader);\r\n      \r\n    } catch (final IOException e) {\r\n      \r\n    }\r\n\r\nSometimes I have noticed the same batch is getting processed twice.\r\nIn the processor I have overridden batchProcessed call and do the required processing. \r\n\r\n    public class RecLoCSVBatchedProcessor extends BatchedColumnProcessor {\r\n         public RecLoCSVBatchedProcessor(final int rowsPerBatch, final Long accountId) {\r\n    super(rowsPerBatch);\r\n    ....\r\n    }\r\n     @Override\r\n     public void batchProcessed(final int rowsInThisBatch) { ... }\r\n\r\nIs this something to do with the settings? As I have mentioned this does not happen always. It is such a waste a resources and unnecessary processing time when same batches get processed multiple times. Please let me know what could be wrong here. \r\n\r\nThanks\r\n\r\n ","title":"Univocity parser BatchedColumnProcessor processing batch twice","body":"<p>I am using BatchedColumnProcessor of univocity parser to parse large CSV files.\nMy parser settings are :</p>\n<pre><code>csvParserSettings.detectFormatAutomatically();\ncsvParserSettings.setHeaderExtractionEnabled(true);\ncsvParserSettings.setMaxCharsPerColumn(-1);\ncsvParserSettings.setColumnReorderingEnabled(true);\nfinal RecLoCSVBatchedProcessor processor =\n    new RecLoCSVBatchedProcessor(batchSize, csvAccountId);\n\ncsvParserSettings.setProcessor(processor);\n</code></pre>\n<p>Code snippet where I call parsing is:</p>\n<pre><code> try (InputStream inputStream = new FileInputStream(csvLocalFilePath);\n    BOMInputStream bomInputStream = new BOMInputStream(inputStream);\n    Reader inputReader = new InputStreamReader(bomInputStream, &quot;UTF-8&quot;)) {\n\n    // Rows are processed in batches by RecLoCSVBatchedProcessor\n    List&lt;String[]&gt; rows = csvProcessor.parseAll(inputReader);\n  \n} catch (final IOException e) {\n  \n}\n</code></pre>\n<p>Sometimes I have noticed the same batch is getting processed twice.\nIn the processor I have overridden batchProcessed call and do the required processing.</p>\n<pre><code>public class RecLoCSVBatchedProcessor extends BatchedColumnProcessor {\n     public RecLoCSVBatchedProcessor(final int rowsPerBatch, final Long accountId) {\nsuper(rowsPerBatch);\n....\n}\n @Override\n public void batchProcessed(final int rowsInThisBatch) { ... }\n</code></pre>\n<p>Is this something to do with the settings? As I have mentioned this does not happen always. It is such a waste a resources and unnecessary processing time when same batches get processed multiple times. Please let me know what could be wrong here.</p>\n<p>Thanks</p>\n"},{"tags":["java","android","admob","admob-rewardedvideoad"],"owner":{"account_id":28309439,"reputation":1,"user_id":21646919,"display_name":"Nathanael Primeldi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":325,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687328290,"creation_date":1682783976,"question_id":76137151,"body_markdown":"I am trying to show a rewarded ad in Android Studio using Google Admob, and I have watched several different videos on it, but none of them work for me. When I run it and click the button that is supposed to show the ad, it doesn&#39;t work and gives me the log message: \r\n\r\n\r\n```\r\nI/Ads: ExoPlayerAdapter initialized.\r\nW/Ads: Failed to preload url gcache://video/media/-438303185308675417?url=https%3A%2F%2Frr2---sn-nx57ynss.googlevideo.com%2Fvideoplayback%3Fexpire%3D1682760455%26ei%3Dh3JMZJzUJ4Ggn88P2ruSgAU%26ip%3D50.54.142.60%26id%3Df9ead5933fc112a7%26itag%3D22%26source%3Dyoutube%26requiressl%3Dyes%26mh%3DEA%26mm%3D31%26mn%3Dsn-nx57ynss%26ms%3Dau%26mv%3Dm%26mvi%3D2%26pl%3D17%26susc%3Dgvp%26acao%3Dyes%26ctier%3DL%26mime%3Dvideo%252Fmp4%26vprv%3D1%26dur%3D7.314%26lmt%3D1674261152906091%26mt%3D1682731265%26txp%3D1211224%26sparams%3Dexpire%252Cei%252Cip%252Cid%252Citag%252Csource%252Crequiressl%252Csusc%252Cacao%252Cctier%252Cmime%252Cvprv%252Cdur%252Clmt%26sig%3DAOq0QJ8wRgIhAMhoxD5nSzmnSw0L60WwzR5cGT4l_Wwuer1OOWtx9NAqAiEApLhRwq70X_-0NHQrCVTZVJc-E0s1ZohyT5oX0eJU734%253D%26lsparams%3Dmh%252Cmm%252Cmn%252Cms%252Cmv%252Cmvi%252Cpl%26lsig%3DAG3C_xAwRQIhAI3H1pNuJXiINj3EanAMFrdw6puD5Wv3V99L6kx7gSY7AiBF37wcJZar2usZk5U2tXDO6OEn0p_zAolLg06P-9FeNQ%253D%253D%26cpn%3D0b_QCAymqjqUzpzE%26ic%3Dgmasdk&amp;tag.duration=7314&amp;tag.check_url=https%3A%2F%2Frr2---sn-nx57ynss.googlevideo.com%2Fvideoplayback%3Fexpire%3D1682760455%26ei%3Dh3JMZJzUJ4Ggn88P2ruSgAU%26ip%3D50.54.142.60%26id%3Df9ead5933fc112a7%26itag%3D22%26source%3Dyoutube%26requiressl%3Dyes%26mh%3DEA%26mm%3D31%26mn%3Dsn-nx57ynss%26ms%3Dau%26mv%3Dm%26mvi%3D2%26pl%3D17%26susc%3Dgvp%26acao%3Dyes%26ctier%3DL%26mime%3Dvideo%2Fmp4%26vprv%3D1%26dur%3D7.314%26lmt%3D1674261152906091%26mt%3D1682731265%26txp%3D1211224%26sparams%3Dexpire%2Cei%2Cip%2Cid%2Citag%2Csource%2Crequiressl%2Csusc%2Cacao%2Cctier%2Cmime%2Cvprv%2Cdur%2Clmt%26sig%3DAOq0QJ8wRgIhAMhoxD5nSzmnSw0L60WwzR5cGT4l_Wwuer1OOWtx9NAqAiEApLhRwq70X_-0NHQrCVTZVJc-E0s1ZohyT5oX0eJU734%3D%26lsparams%3Dmh%2Cmm%2Cmn%2Cms%2Cmv%2Cmvi%2Cpl%26lsig%3DAG3C_xAwRQIhAI3H1pNuJXiINj3EanAMFrdw6puD5Wv3V99L6kx7gSY7AiBF37wcJZar2usZk5U2tXDO6OEn0p_zAolLg06P-9FeNQ%3D%3D%26cpn%3D0b_QCAymqjqUzpzE Exception: Player is accessed on the wrong thread.\r\n    Current thread: &#39;AdWorker(Default) #17&#39;\r\n    Expected thread: &#39;main&#39;\r\n    See https://exoplayer.dev/issues/player-accessed-on-wrong-thread\r\nI/DynamiteModule: Considering local module com.google.android.gms.ads.dynamite:0 and remote module com.google.android.gms.ads.dynamite:231004600\r\nI/DynamiteModule: Selected remote version of com.google.android.gms.ads.dynamite, version &gt;= 231004600\r\nI/RaffleActivity: onAdLoaded\r\nV/FA: Inactivity, disconnecting from the service\r\nI/ViewRootImpl@16d0cf6[MainActivity]: ViewPostIme pointer 0\r\nI/ViewRootImpl@16d0cf6[MainActivity]: ViewPostIme pointer 1\r\nD/RaffleActivity: {\r\n      &quot;Code&quot;: 0,\r\n      &quot;Message&quot;: &quot;Internal error.&quot;,\r\n      &quot;Domain&quot;: &quot;com.google.android.gms.ads&quot;,\r\n      &quot;Cause&quot;: &quot;null&quot;,\r\n      &quot;Response Info&quot;: {\r\n        &quot;Response ID&quot;: &quot;h3JMZInhIcnAn88P7tizqAw&quot;,\r\n        &quot;Mediation Adapter Class Name&quot;: &quot;&quot;,\r\n        &quot;Adapter Responses&quot;: [\r\n          {\r\n            &quot;Adapter&quot;: &quot;com.google.ads.mediation.admob.AdMobAdapter&quot;,\r\n            &quot;Latency&quot;: 60002,\r\n            &quot;Ad Source Name&quot;: &quot;Reservation campaign&quot;,\r\n            &quot;Ad Source ID&quot;: &quot;7068401028668408324&quot;,\r\n            &quot;Ad Source Instance Name&quot;: &quot;[DO NOT EDIT] Publisher Test Video Campaign&quot;,\r\n            &quot;Ad Source Instance ID&quot;: &quot;6877926149710223&quot;,\r\n            &quot;Credentials&quot;: {\r\n              &quot;pubid&quot;: &quot;ca-app-pub-3940256099942544\\/5224354917\\/cak=no_cache&amp;cadc=8e&amp;caqid=h3JMZLGVIbjwtOUPhrmkcA&quot;,\r\n              &quot;campaign_id&quot;: &quot;1057492276&quot;\r\n            },\r\n            &quot;Ad Error&quot;: {\r\n              &quot;Code&quot;: 0,\r\n              &quot;Message&quot;: &quot;Internal error.&quot;,\r\n              &quot;Domain&quot;: &quot;com.google.android.gms.ads&quot;,\r\n              &quot;Cause&quot;: &quot;null&quot;\r\n            }\r\n          }\r\n        ],\r\n        &quot;Response Extras&quot;: {\r\n          &quot;mediation_group_name&quot;: &quot;Campaign&quot;\r\n        }\r\n      }\r\n    }\r\nI/Ads: Ad failed to load : 0\r\nW/udios.RaffleAp: Accessing hidden method Ldalvik/system/CloseGuard;-&gt;close()V (greylist,core-platform-api, linking, allowed)\r\nI/ViewRootImpl@16d0cf6[MainActivity]: ViewPostIme pointer 0\r\nI/ViewRootImpl@16d0cf6[MainActivity]: ViewPostIme pointer 1\r\nI/udios.RaffleAp: Background concurrent copying GC freed 183395(6948KB) AllocSpace objects, 1(56KB) LOS objects, 49% free, 7415KB/14MB, paused 238us total 143.245ms\r\nW/udios.RaffleAp: Accessing hidden method Ldalvik/system/CloseGuard;-&gt;warnIfOpen()V (greylist,core-platform-api, linking, allowed)\r\n\r\n```\r\n\r\n\r\nHere is the code I used to load the ad: \r\n\r\n\r\n```\r\n MobileAds.initialize(this, new OnInitializationCompleteListener() {\r\n            @Override\r\n            public void onInitializationComplete(InitializationStatus initializationStatus) {}\r\n        });\r\n        AdRequest adRequest = new AdRequest.Builder().build();\r\n        RewardedAd.load(this, &quot;ca-app-pub-3940256099942544/5224354917&quot;,\r\n                adRequest, new RewardedAdLoadCallback() {\r\n                    @Override\r\n                    public void onAdFailedToLoad(@NonNull LoadAdError loadAdError) {\r\n                        // Handle the error.\r\n                        Log.d(TAG, loadAdError.toString());\r\n                        mRewardedAd = null;\r\n                    }\r\n\r\n            @Override\r\n            public void onAdLoaded(@NonNull RewardedAd rewardedAd) {\r\n                super.onAdLoaded(rewardedAd);\r\n                mRewardedAd=rewardedAd;\r\n                Log.i(TAG, &quot;ad loaded&quot;);\r\n                rewardedAd.setFullScreenContentCallback(new FullScreenContentCallback() {\r\n                    @Override\r\n                    public void onAdClicked() {\r\n                        super.onAdClicked();\r\n                    }\r\n\r\n                    @Override\r\n                    public void onAdDismissedFullScreenContent() {\r\n                        super.onAdDismissedFullScreenContent();\r\n                        mRewardedAd=null;\r\n                    }\r\n\r\n                    @Override\r\n                    public void onAdFailedToShowFullScreenContent(@NonNull AdError adError) {\r\n                        super.onAdFailedToShowFullScreenContent(adError);\r\n                        Log.i(TAG, &quot;Failed to show fullscreen ad&quot;);\r\n                        mRewardedAd=null;\r\n                    }\r\n\r\n                    @Override\r\n                    public void onAdImpression() {\r\n                        super.onAdImpression();\r\n                    }\r\n\r\n                    @Override\r\n                    public void onAdShowedFullScreenContent() {\r\n                        super.onAdShowedFullScreenContent();\r\n                    }\r\n                });\r\n            }\r\n});\r\n```\r\n\r\n\r\n\r\n\r\nI tried putting the code inside a runOnUiThread() void because the log message says that the player was accessed on the wrong thread, but it still isn&#39;t working.","title":"Google Admob rewarded ad not working in android app","body":"<p>I am trying to show a rewarded ad in Android Studio using Google Admob, and I have watched several different videos on it, but none of them work for me. When I run it and click the button that is supposed to show the ad, it doesn't work and gives me the log message:</p>\n<pre><code>I/Ads: ExoPlayerAdapter initialized.\nW/Ads: Failed to preload url gcache://video/media/-438303185308675417?url=https%3A%2F%2Frr2---sn-nx57ynss.googlevideo.com%2Fvideoplayback%3Fexpire%3D1682760455%26ei%3Dh3JMZJzUJ4Ggn88P2ruSgAU%26ip%3D50.54.142.60%26id%3Df9ead5933fc112a7%26itag%3D22%26source%3Dyoutube%26requiressl%3Dyes%26mh%3DEA%26mm%3D31%26mn%3Dsn-nx57ynss%26ms%3Dau%26mv%3Dm%26mvi%3D2%26pl%3D17%26susc%3Dgvp%26acao%3Dyes%26ctier%3DL%26mime%3Dvideo%252Fmp4%26vprv%3D1%26dur%3D7.314%26lmt%3D1674261152906091%26mt%3D1682731265%26txp%3D1211224%26sparams%3Dexpire%252Cei%252Cip%252Cid%252Citag%252Csource%252Crequiressl%252Csusc%252Cacao%252Cctier%252Cmime%252Cvprv%252Cdur%252Clmt%26sig%3DAOq0QJ8wRgIhAMhoxD5nSzmnSw0L60WwzR5cGT4l_Wwuer1OOWtx9NAqAiEApLhRwq70X_-0NHQrCVTZVJc-E0s1ZohyT5oX0eJU734%253D%26lsparams%3Dmh%252Cmm%252Cmn%252Cms%252Cmv%252Cmvi%252Cpl%26lsig%3DAG3C_xAwRQIhAI3H1pNuJXiINj3EanAMFrdw6puD5Wv3V99L6kx7gSY7AiBF37wcJZar2usZk5U2tXDO6OEn0p_zAolLg06P-9FeNQ%253D%253D%26cpn%3D0b_QCAymqjqUzpzE%26ic%3Dgmasdk&amp;tag.duration=7314&amp;tag.check_url=https%3A%2F%2Frr2---sn-nx57ynss.googlevideo.com%2Fvideoplayback%3Fexpire%3D1682760455%26ei%3Dh3JMZJzUJ4Ggn88P2ruSgAU%26ip%3D50.54.142.60%26id%3Df9ead5933fc112a7%26itag%3D22%26source%3Dyoutube%26requiressl%3Dyes%26mh%3DEA%26mm%3D31%26mn%3Dsn-nx57ynss%26ms%3Dau%26mv%3Dm%26mvi%3D2%26pl%3D17%26susc%3Dgvp%26acao%3Dyes%26ctier%3DL%26mime%3Dvideo%2Fmp4%26vprv%3D1%26dur%3D7.314%26lmt%3D1674261152906091%26mt%3D1682731265%26txp%3D1211224%26sparams%3Dexpire%2Cei%2Cip%2Cid%2Citag%2Csource%2Crequiressl%2Csusc%2Cacao%2Cctier%2Cmime%2Cvprv%2Cdur%2Clmt%26sig%3DAOq0QJ8wRgIhAMhoxD5nSzmnSw0L60WwzR5cGT4l_Wwuer1OOWtx9NAqAiEApLhRwq70X_-0NHQrCVTZVJc-E0s1ZohyT5oX0eJU734%3D%26lsparams%3Dmh%2Cmm%2Cmn%2Cms%2Cmv%2Cmvi%2Cpl%26lsig%3DAG3C_xAwRQIhAI3H1pNuJXiINj3EanAMFrdw6puD5Wv3V99L6kx7gSY7AiBF37wcJZar2usZk5U2tXDO6OEn0p_zAolLg06P-9FeNQ%3D%3D%26cpn%3D0b_QCAymqjqUzpzE Exception: Player is accessed on the wrong thread.\n    Current thread: 'AdWorker(Default) #17'\n    Expected thread: 'main'\n    See https://exoplayer.dev/issues/player-accessed-on-wrong-thread\nI/DynamiteModule: Considering local module com.google.android.gms.ads.dynamite:0 and remote module com.google.android.gms.ads.dynamite:231004600\nI/DynamiteModule: Selected remote version of com.google.android.gms.ads.dynamite, version &gt;= 231004600\nI/RaffleActivity: onAdLoaded\nV/FA: Inactivity, disconnecting from the service\nI/ViewRootImpl@16d0cf6[MainActivity]: ViewPostIme pointer 0\nI/ViewRootImpl@16d0cf6[MainActivity]: ViewPostIme pointer 1\nD/RaffleActivity: {\n      &quot;Code&quot;: 0,\n      &quot;Message&quot;: &quot;Internal error.&quot;,\n      &quot;Domain&quot;: &quot;com.google.android.gms.ads&quot;,\n      &quot;Cause&quot;: &quot;null&quot;,\n      &quot;Response Info&quot;: {\n        &quot;Response ID&quot;: &quot;h3JMZInhIcnAn88P7tizqAw&quot;,\n        &quot;Mediation Adapter Class Name&quot;: &quot;&quot;,\n        &quot;Adapter Responses&quot;: [\n          {\n            &quot;Adapter&quot;: &quot;com.google.ads.mediation.admob.AdMobAdapter&quot;,\n            &quot;Latency&quot;: 60002,\n            &quot;Ad Source Name&quot;: &quot;Reservation campaign&quot;,\n            &quot;Ad Source ID&quot;: &quot;7068401028668408324&quot;,\n            &quot;Ad Source Instance Name&quot;: &quot;[DO NOT EDIT] Publisher Test Video Campaign&quot;,\n            &quot;Ad Source Instance ID&quot;: &quot;6877926149710223&quot;,\n            &quot;Credentials&quot;: {\n              &quot;pubid&quot;: &quot;ca-app-pub-3940256099942544\\/5224354917\\/cak=no_cache&amp;cadc=8e&amp;caqid=h3JMZLGVIbjwtOUPhrmkcA&quot;,\n              &quot;campaign_id&quot;: &quot;1057492276&quot;\n            },\n            &quot;Ad Error&quot;: {\n              &quot;Code&quot;: 0,\n              &quot;Message&quot;: &quot;Internal error.&quot;,\n              &quot;Domain&quot;: &quot;com.google.android.gms.ads&quot;,\n              &quot;Cause&quot;: &quot;null&quot;\n            }\n          }\n        ],\n        &quot;Response Extras&quot;: {\n          &quot;mediation_group_name&quot;: &quot;Campaign&quot;\n        }\n      }\n    }\nI/Ads: Ad failed to load : 0\nW/udios.RaffleAp: Accessing hidden method Ldalvik/system/CloseGuard;-&gt;close()V (greylist,core-platform-api, linking, allowed)\nI/ViewRootImpl@16d0cf6[MainActivity]: ViewPostIme pointer 0\nI/ViewRootImpl@16d0cf6[MainActivity]: ViewPostIme pointer 1\nI/udios.RaffleAp: Background concurrent copying GC freed 183395(6948KB) AllocSpace objects, 1(56KB) LOS objects, 49% free, 7415KB/14MB, paused 238us total 143.245ms\nW/udios.RaffleAp: Accessing hidden method Ldalvik/system/CloseGuard;-&gt;warnIfOpen()V (greylist,core-platform-api, linking, allowed)\n\n</code></pre>\n<p>Here is the code I used to load the ad:</p>\n<pre><code> MobileAds.initialize(this, new OnInitializationCompleteListener() {\n            @Override\n            public void onInitializationComplete(InitializationStatus initializationStatus) {}\n        });\n        AdRequest adRequest = new AdRequest.Builder().build();\n        RewardedAd.load(this, &quot;ca-app-pub-3940256099942544/5224354917&quot;,\n                adRequest, new RewardedAdLoadCallback() {\n                    @Override\n                    public void onAdFailedToLoad(@NonNull LoadAdError loadAdError) {\n                        // Handle the error.\n                        Log.d(TAG, loadAdError.toString());\n                        mRewardedAd = null;\n                    }\n\n            @Override\n            public void onAdLoaded(@NonNull RewardedAd rewardedAd) {\n                super.onAdLoaded(rewardedAd);\n                mRewardedAd=rewardedAd;\n                Log.i(TAG, &quot;ad loaded&quot;);\n                rewardedAd.setFullScreenContentCallback(new FullScreenContentCallback() {\n                    @Override\n                    public void onAdClicked() {\n                        super.onAdClicked();\n                    }\n\n                    @Override\n                    public void onAdDismissedFullScreenContent() {\n                        super.onAdDismissedFullScreenContent();\n                        mRewardedAd=null;\n                    }\n\n                    @Override\n                    public void onAdFailedToShowFullScreenContent(@NonNull AdError adError) {\n                        super.onAdFailedToShowFullScreenContent(adError);\n                        Log.i(TAG, &quot;Failed to show fullscreen ad&quot;);\n                        mRewardedAd=null;\n                    }\n\n                    @Override\n                    public void onAdImpression() {\n                        super.onAdImpression();\n                    }\n\n                    @Override\n                    public void onAdShowedFullScreenContent() {\n                        super.onAdShowedFullScreenContent();\n                    }\n                });\n            }\n});\n</code></pre>\n<p>I tried putting the code inside a runOnUiThread() void because the log message says that the player was accessed on the wrong thread, but it still isn't working.</p>\n"},{"tags":["java","if-statement","for-loop","infinite-loop","break"],"comments":[{"owner":{"account_id":1883267,"reputation":7504,"user_id":1702990,"display_name":"Sinkingpoint"},"score":34,"creation_date":1387410280,"post_id":20670824,"comment_id":30951587,"body_markdown":"Java is not Python. You cant expect two lines to be in the same block just because they have the same indentation...","body":"Java is not Python. You cant expect two lines to be in the same block just because they have the same indentation..."},{"owner":{"account_id":1397403,"reputation":12323,"user_id":1326913,"accept_rate":89,"display_name":"ᴇʟᴇvᴀтᴇ"},"score":0,"creation_date":1387410441,"post_id":20670824,"comment_id":30951642,"body_markdown":"Even that won&#39;t solve the problem fully. All the `if` statements need to be connected with `else`.","body":"Even that won&#39;t solve the problem fully. All the <code>if</code> statements need to be connected with <code>else</code>."},{"owner":{"account_id":51914,"reputation":67911,"user_id":155137,"accept_rate":91,"display_name":"Martijn Courteaux"},"score":5,"creation_date":1387410515,"post_id":20670824,"comment_id":30951673,"body_markdown":"Shouldn&#39;t it be: &quot;else without if&quot;?","body":"Shouldn&#39;t it be: &quot;else without if&quot;?"}],"answers":[{"tags":[],"owner":{"account_id":3225384,"reputation":9550,"user_id":2721883,"display_name":"clcto"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1387411313,"creation_date":1387410462,"answer_id":20670888,"question_id":20670824,"body_markdown":"The issue is that you are trying to have multiple statements in an `if` without using `{}`.\r\nWhat you currently have is interpreted like:\r\n\r\n    if( choice==5 )\r\n    {\r\n        System.out.println( ... );\r\n    }\r\n    break;\r\n    else\r\n    {\r\n        //...\r\n    }\r\n\r\n\r\nYou really want:\r\n\r\n    if( choice==5 )\r\n    {\r\n        System.out.println( ... );\r\n        break;\r\n    }\r\n    else\r\n    {\r\n        //...\r\n    }\r\n\r\nAlso, as Farce has stated, it would be better to use `else if` for all the conditions instead of `if` because if `choice==1`, it will still go through and check if `choice==5`, which would fail, and it will still go into your else block.\r\n\r\n    if( choice==1 )\r\n        //...\r\n    else if( choice==2 )\r\n        //...\r\n    else if( choice==3 )\r\n        //...\r\n    else if( choice==4 )\r\n        //...\r\n    else if( choice==5 )\r\n    {\r\n        //...\r\n    }\r\n    else\r\n        //...\r\n\r\n----------------------------\r\nA more elegant solution would be using a `switch` statement. However, `break` only breaks from the most inner &quot;block&quot; unless you use labels. So you want to label your loop and break from that if the case is 5:\r\n\r\n    LOOP:\r\n    for(;;)\r\n    {\r\n        System.out.println(&quot;---&gt; Your choice: &quot;);\r\n        choice = input.nextInt();\r\n        switch( choice )\r\n        {\r\n            case 1:\r\n                playGame();\r\n                break;\r\n            case 2:\r\n                loadGame();\r\n                break;\r\n            case 2:\r\n                options();\r\n                break;\r\n            case 4:\r\n                credits();\r\n                break;\r\n            case 5:\r\n                System.out.println(&quot;End of Game\\n Thank you for playing with us!&quot;);\r\n                break LOOP;\r\n            default:\r\n                System.out.println( ... );\r\n        }\r\n    }\r\n\r\n\r\nInstead of labeling the loop, you could also use a flag to tell the loop to stop.\r\n\r\n    bool finished = false;\r\n    while( !finished )\r\n    {\r\n        switch( choice )\r\n        {\r\n            // ...\r\n            case 5:\r\n                System.out.println( ... )\r\n                finished = true;\r\n                break;\r\n            // ...\r\n        }\r\n    }","title":"Java: break statement in &quot;if else&quot;","body":"<p>The issue is that you are trying to have multiple statements in an <code>if</code> without using <code>{}</code>.\nWhat you currently have is interpreted like:</p>\n\n<pre><code>if( choice==5 )\n{\n    System.out.println( ... );\n}\nbreak;\nelse\n{\n    //...\n}\n</code></pre>\n\n<p>You really want:</p>\n\n<pre><code>if( choice==5 )\n{\n    System.out.println( ... );\n    break;\n}\nelse\n{\n    //...\n}\n</code></pre>\n\n<p>Also, as Farce has stated, it would be better to use <code>else if</code> for all the conditions instead of <code>if</code> because if <code>choice==1</code>, it will still go through and check if <code>choice==5</code>, which would fail, and it will still go into your else block.</p>\n\n<pre><code>if( choice==1 )\n    //...\nelse if( choice==2 )\n    //...\nelse if( choice==3 )\n    //...\nelse if( choice==4 )\n    //...\nelse if( choice==5 )\n{\n    //...\n}\nelse\n    //...\n</code></pre>\n\n<hr>\n\n<p>A more elegant solution would be using a <code>switch</code> statement. However, <code>break</code> only breaks from the most inner \"block\" unless you use labels. So you want to label your loop and break from that if the case is 5:</p>\n\n<pre><code>LOOP:\nfor(;;)\n{\n    System.out.println(\"---&gt; Your choice: \");\n    choice = input.nextInt();\n    switch( choice )\n    {\n        case 1:\n            playGame();\n            break;\n        case 2:\n            loadGame();\n            break;\n        case 2:\n            options();\n            break;\n        case 4:\n            credits();\n            break;\n        case 5:\n            System.out.println(\"End of Game\\n Thank you for playing with us!\");\n            break LOOP;\n        default:\n            System.out.println( ... );\n    }\n}\n</code></pre>\n\n<p>Instead of labeling the loop, you could also use a flag to tell the loop to stop.</p>\n\n<pre><code>bool finished = false;\nwhile( !finished )\n{\n    switch( choice )\n    {\n        // ...\n        case 5:\n            System.out.println( ... )\n            finished = true;\n            break;\n        // ...\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3225384,"reputation":9550,"user_id":2721883,"display_name":"clcto"},"score":0,"creation_date":1387410988,"post_id":20670893,"comment_id":30951828,"body_markdown":"You want to make a note how to break out of the loop as `break;` in a switch will only break out of the switch.","body":"You want to make a note how to break out of the loop as <code>break;</code> in a switch will only break out of the switch."}],"tags":[],"owner":{"account_id":115344,"reputation":76329,"user_id":302916,"display_name":"Brian Roach"},"comment_count":1,"down_vote_count":2,"up_vote_count":22,"is_accepted":true,"score":20,"last_activity_date":1387411984,"creation_date":1387410474,"answer_id":20670893,"question_id":20670824,"body_markdown":"Because your `else` isn&#39;t attached to anything. The `if` without braces only encompasses the single statement that immediately follows it. \r\n\r\n    if (choice==5)\r\n    {\r\n        System.out.println(&quot;End of Game\\n Thank you for playing with us!&quot;);\r\n        break;\r\n    }\r\n    else\r\n    {\r\n       System.out.println(&quot;Not a valid choice!\\n Please try again...\\n&quot;);\r\n    }\r\n\r\nNot using braces is generally viewed as a bad practice because it can lead to the exact problems you encountered.\r\n\r\nIn addition, using a `switch` here would make more sense.\r\n\r\n    int choice;\r\n    boolean keepGoing = true;\r\n    while(keepGoing)\r\n    {\r\n        System.out.println(&quot;---&gt; Your choice: &quot;);\r\n        choice = input.nextInt();\r\n        switch(choice)\r\n        {\r\n            case 1: \r\n                playGame();\r\n                break;\r\n            case 2: \r\n                loadGame();\r\n                break;\r\n            // your other cases\r\n            // ...\r\n            case 5: \r\n                System.out.println(&quot;End of Game\\n Thank you for playing with us!&quot;);\r\n                keepGoing = false;\r\n                break;\r\n            default:\r\n                System.out.println(&quot;Not a valid choice!\\n Please try again...\\n&quot;);\r\n         }\r\n     }         \r\n\r\nNote that instead of an infinite `for` loop I used a `while(boolean)`, making it easy to exit the loop. Another approach would be using break with labels. ","title":"Java: break statement in &quot;if else&quot;","body":"<p>Because your <code>else</code> isn't attached to anything. The <code>if</code> without braces only encompasses the single statement that immediately follows it. </p>\n\n<pre><code>if (choice==5)\n{\n    System.out.println(\"End of Game\\n Thank you for playing with us!\");\n    break;\n}\nelse\n{\n   System.out.println(\"Not a valid choice!\\n Please try again...\\n\");\n}\n</code></pre>\n\n<p>Not using braces is generally viewed as a bad practice because it can lead to the exact problems you encountered.</p>\n\n<p>In addition, using a <code>switch</code> here would make more sense.</p>\n\n<pre><code>int choice;\nboolean keepGoing = true;\nwhile(keepGoing)\n{\n    System.out.println(\"---&gt; Your choice: \");\n    choice = input.nextInt();\n    switch(choice)\n    {\n        case 1: \n            playGame();\n            break;\n        case 2: \n            loadGame();\n            break;\n        // your other cases\n        // ...\n        case 5: \n            System.out.println(\"End of Game\\n Thank you for playing with us!\");\n            keepGoing = false;\n            break;\n        default:\n            System.out.println(\"Not a valid choice!\\n Please try again...\\n\");\n     }\n }         \n</code></pre>\n\n<p>Note that instead of an infinite <code>for</code> loop I used a <code>while(boolean)</code>, making it easy to exit the loop. Another approach would be using break with labels. </p>\n"},{"comments":[{"owner":{"account_id":40774,"reputation":28739,"user_id":118228,"accept_rate":85,"display_name":"djangofan"},"score":3,"creation_date":1483217506,"post_id":28816407,"comment_id":70026819,"body_markdown":"The &#39;break&#39; command does not work within an &#39;if&#39; statement if that if statement is not within a control-structure loop/switch.   I think that is where the confusion is?   If its easier to grok, imagine using a &#39;continue&#39; statement in a if statement.","body":"The &#39;break&#39; command does not work within an &#39;if&#39; statement if that if statement is not within a control-structure loop/switch.   I think that is where the confusion is?   If its easier to grok, imagine using a &#39;continue&#39; statement in a if statement."},{"owner":{"account_id":15756672,"reputation":191,"user_id":11369664,"display_name":"George Xavier"},"score":1,"creation_date":1564763915,"post_id":28816407,"comment_id":101150917,"body_markdown":"@erez this is old as yoink but Alan is correct in that the break statement does not break out of an IF statement. It beaks out of a loop, Basically, you said that&#39;s the wrong answer and then repeated what Alan said except worded differently. Alan did not mean that it doesn&#39;t run within an if, he meant that it doesn&#39;t break out of an if. Read the last part: &quot;break&quot; is designed for use inside loops (for, while, do-while, enhanced for, and switch).&quot; Derp.","body":"@erez this is old as yoink but Alan is correct in that the break statement does not break out of an IF statement. It beaks out of a loop, Basically, you said that&#39;s the wrong answer and then repeated what Alan said except worded differently. Alan did not mean that it doesn&#39;t run within an if, he meant that it doesn&#39;t break out of an if. Read the last part: &quot;break&quot; is designed for use inside loops (for, while, do-while, enhanced for, and switch).&quot; Derp."},{"owner":{"account_id":370787,"reputation":2276,"user_id":718960,"accept_rate":33,"display_name":"theking2"},"score":1,"creation_date":1621232740,"post_id":28816407,"comment_id":119423057,"body_markdown":"The break works in this case as it will break out the endless for(;;) loop.","body":"The break works in this case as it will break out the endless for(;;) loop."},{"owner":{"account_id":10385580,"reputation":300,"user_id":7658797,"display_name":"TheKodeToad"},"score":1,"creation_date":1662996093,"post_id":28816407,"comment_id":130129679,"body_markdown":"This is technically wrong. I know it&#39;s a few years late to point this out, but this is still relevant (and quite a fun tip to create messy code) in my opinion. You *can* use break anywhere - even without a loop, you just have to give it a label and reference that label. E.g t`est: if(someTest()) { doStuff(); if(!someOtherTest()) break test; }`. To use it without a statement, you can just use a block: `myBlock: { ...; break myBlock; }`","body":"This is technically wrong. I know it&#39;s a few years late to point this out, but this is still relevant (and quite a fun tip to create messy code) in my opinion. You <i>can</i> use break anywhere - even without a loop, you just have to give it a label and reference that label. E.g t<code>est: if(someTest()) { doStuff(); if(!someOtherTest()) break test; }</code>. To use it without a statement, you can just use a block: <code>myBlock: { ...; break myBlock; }</code>"}],"tags":[],"owner":{"account_id":5872693,"reputation":287,"user_id":4624543,"display_name":"Alan J. Robinson"},"comment_count":4,"down_vote_count":2,"up_vote_count":29,"is_accepted":false,"score":27,"last_activity_date":1425319046,"creation_date":1425319046,"answer_id":28816407,"question_id":20670824,"body_markdown":"The &quot;break&quot; command does not work within an &quot;if&quot; statement.\r\n\r\nIf you remove the &quot;break&quot; command from your code and then test the code, you should find that the code works exactly the same without a &quot;break&quot; command as with one.\r\n\r\n&quot;Break&quot; is designed for use inside loops (for, while, do-while, enhanced for and switch).","title":"Java: break statement in &quot;if else&quot;","body":"<p>The \"break\" command does not work within an \"if\" statement.</p>\n\n<p>If you remove the \"break\" command from your code and then test the code, you should find that the code works exactly the same without a \"break\" command as with one.</p>\n\n<p>\"Break\" is designed for use inside loops (for, while, do-while, enhanced for and switch).</p>\n"},{"comments":[{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1648737531,"post_id":71694458,"comment_id":126705417,"body_markdown":"You are putting up the same code the accepted answer gave 9 years ago, so what is the point here?","body":"You are putting up the same code the accepted answer gave 9 years ago, so what is the point here?"},{"owner":{"account_id":370787,"reputation":2276,"user_id":718960,"accept_rate":33,"display_name":"theking2"},"score":0,"creation_date":1648838852,"post_id":71694458,"comment_id":126734558,"body_markdown":"missed that one, sorry","body":"missed that one, sorry"},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":1,"creation_date":1648892027,"post_id":71694458,"comment_id":126741899,"body_markdown":"Then just be honest about it, and delete your answer here. Dont wait for people to downvote and delete vote on it.","body":"Then just be honest about it, and delete your answer here. Dont wait for people to downvote and delete vote on it."}],"tags":[],"owner":{"account_id":370787,"reputation":2276,"user_id":718960,"accept_rate":33,"display_name":"theking2"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1648737333,"creation_date":1648737333,"answer_id":71694458,"question_id":20670824,"body_markdown":"Where some went there to provide alternative implementation of code the reason that the op code does not work is a missing `{}` pair;\r\n\r\n        if (choice==5) {\r\n            System.out.println(&quot;End of Game\\n Thank you for playing with us!&quot;);\r\n            break;\r\n        } else","title":"Java: break statement in &quot;if else&quot;","body":"<p>Where some went there to provide alternative implementation of code the reason that the op code does not work is a missing <code>{}</code> pair;</p>\n<pre><code>    if (choice==5) {\n        System.out.println(&quot;End of Game\\n Thank you for playing with us!&quot;);\n        break;\n    } else\n</code></pre>\n"}],"owner":{"account_id":3519520,"reputation":2015,"user_id":2949463,"accept_rate":92,"display_name":"John"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":312900,"favorite_count":0,"down_vote_count":1,"up_vote_count":24,"accepted_answer_id":20670893,"answer_count":4,"score":23,"last_activity_date":1687328099,"creation_date":1387410174,"question_id":20670824,"body_markdown":"I keep getting an error, `if` without `else`.\r\n\r\nI tried `else if` as well\r\n\r\n    for (;;) {\r\n    \tSystem.out.println(&quot;---&gt; Your choice: &quot;);\r\n    \tchoice = input.nextInt();\r\n    \tif (choice==1)\r\n    \t\tplayGame();\r\n    \tif (choice==2)\r\n    \t\tloadGame();\r\n    \tif (choice==3)\r\n    \t\toptions();\r\n    \tif (choice==4)\r\n    \t\tcredits();\r\n    \tif (choice==5)\r\n    \t\tSystem.out.println(&quot;End of Game\\n Thank you for playing with us!&quot;);\r\n    \t\tbreak;\r\n    \telse\r\n    \t\tSystem.out.println(&quot;Not a valid choice!\\n Please try again...\\n&quot;);\r\n    }\r\n\r\nAlso if you have a better idea on how to present this code please do not hesitate :)","title":"Java: break statement in &quot;if else&quot;","body":"<p>I keep getting an error, <code>if</code> without <code>else</code>.</p>\n<p>I tried <code>else if</code> as well</p>\n<pre><code>for (;;) {\n    System.out.println(&quot;---&gt; Your choice: &quot;);\n    choice = input.nextInt();\n    if (choice==1)\n        playGame();\n    if (choice==2)\n        loadGame();\n    if (choice==3)\n        options();\n    if (choice==4)\n        credits();\n    if (choice==5)\n        System.out.println(&quot;End of Game\\n Thank you for playing with us!&quot;);\n        break;\n    else\n        System.out.println(&quot;Not a valid choice!\\n Please try again...\\n&quot;);\n}\n</code></pre>\n<p>Also if you have a better idea on how to present this code please do not hesitate :)</p>\n"},{"tags":["java","mongodb"],"comments":[{"owner":{"account_id":4620709,"reputation":8655,"user_id":3745896,"accept_rate":93,"display_name":"River"},"score":0,"creation_date":1500913058,"post_id":45285368,"comment_id":77533111,"body_markdown":"Did you really need to copy-paste your question 3 times without formatting? People won&#39;t want to deal with your question if looks like that. (Note to others: See edit revisions.)","body":"Did you really need to copy-paste your question 3 times without formatting? People won&#39;t want to deal with your question if looks like that. (Note to others: See edit revisions.)"}],"answers":[{"tags":[],"owner":{"account_id":11239077,"reputation":116,"user_id":8244090,"display_name":"Jitendra Panchal"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1500913165,"creation_date":1500913165,"answer_id":45285512,"question_id":45285368,"body_markdown":"    MongoClient mongoClient = new MongoClient();\r\n    DB db = mongoClient.getDB(&quot;database name&quot;);\r\n\r\nIf database is not present, MongoDB will create it for you.","title":"how can i create mongodb database from java","body":"<pre><code>MongoClient mongoClient = new MongoClient();\nDB db = mongoClient.getDB(\"database name\");\n</code></pre>\n\n<p>If database is not present, MongoDB will create it for you.</p>\n"},{"tags":[],"owner":{"account_id":1949626,"reputation":13702,"user_id":1754020,"accept_rate":87,"display_name":"Eddie Martinez"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1500913396,"creation_date":1500913396,"answer_id":45285570,"question_id":45285368,"body_markdown":"If you are using driver 3.1.1 or later:\r\n\r\nRefer to this [answer][1]:\r\n\r\n&gt; Calling getDatabase doesn&#39;t in fact create new database because\r\n&gt; operation is lazy - it returns database representation. Calling any\r\n&gt; modifiable operation (e.g. createCollection):\r\n&gt; \r\n&gt; will create new database for you if it is not present if present it\r\n&gt; will get database for you But remember that you have to call any\r\n&gt; operation which actually performs something - like create. If you just\r\n&gt; call getDatabase it won&#39;t create it.\r\n\r\n\r\n**NOTE**\r\n\r\nThe [documentation][2] does not provide this information, hopefully, they update it. But long answer short, it only creates it after you call an operation on it.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/33902555/1754020\r\n  [2]: http://api.mongodb.com/java/current/com/mongodb/MongoClient.html#getDatabase-java.lang.String-","title":"how can i create mongodb database from java","body":"<p>If you are using driver 3.1.1 or later:</p>\n\n<p>Refer to this <a href=\"https://stackoverflow.com/a/33902555/1754020\">answer</a>:</p>\n\n<blockquote>\n  <p>Calling getDatabase doesn't in fact create new database because\n  operation is lazy - it returns database representation. Calling any\n  modifiable operation (e.g. createCollection):</p>\n  \n  <p>will create new database for you if it is not present if present it\n  will get database for you But remember that you have to call any\n  operation which actually performs something - like create. If you just\n  call getDatabase it won't create it.</p>\n</blockquote>\n\n<p><strong>NOTE</strong></p>\n\n<p>The <a href=\"http://api.mongodb.com/java/current/com/mongodb/MongoClient.html#getDatabase-java.lang.String-\" rel=\"nofollow noreferrer\">documentation</a> does not provide this information, hopefully, they update it. But long answer short, it only creates it after you call an operation on it.</p>\n"},{"tags":[],"owner":{"account_id":27084465,"reputation":1,"user_id":21045355,"display_name":"Binson Selvin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687327593,"creation_date":1687327593,"answer_id":76520389,"question_id":45285368,"body_markdown":"You can create MongoDB database from java with the following code it will be successful but one catch a Mongo database should contain a single collection to display the database while querying.\r\n\r\n    `MongoClient client = MongoClients.create(CONNECTION_URL);\r\n\t\tSystem.out.println(&quot;Connection with database established successfully&quot;);`\r\n\t\t\r\n\t\tString databaseName = &quot;SK_BANK_LTD&quot;;\r\n\t\t\r\n\t\tSystem.out.println(&quot;Trying to create a database :- &quot;+databaseName);\r\n\t\tMongoDatabase db = client.getDatabase(databaseName);\r\n\r\nBy running the following code the database wont be visible as it does not contain any collection so add a dummy collection in the database while creating a database by `MongoClient client = MongoClients.create(CONNECTION_URL);\r\n\t\tSystem.out.println(&quot;Connection with database established successfully&quot;);\r\n\t\t\r\n\t\tString databaseName = &quot;SK_BANK_LTD&quot;;\r\n\t\t\r\n\t\tSystem.out.println(&quot;Trying to create a database :- &quot;+databaseName);\r\n\t\tMongoDatabase db = client.getDatabase(databaseName);\r\n\t\t\r\n\t\tDocument test = new Document().append(&quot;createdBy&quot;, &quot;Binson&quot;);\r\n\t\tdb.getCollection(&quot;test&quot;).insertOne(test);\r\n\t\t\r\n\t\tSystem.out.println(&quot;Database: &quot; + databaseName + &quot;created successfully&quot;);`\r\n\r\n\r\nMake sure your database does not contain the following characters which are prohibited by mongoDB.\r\n\r\n &#39;\\0&#39;, &#39;/&#39;, &#39;\\\\&#39;, &#39; &#39;, &#39;&quot;&#39;, &#39;.&#39;","title":"how can i create mongodb database from java","body":"<p>You can create MongoDB database from java with the following code it will be successful but one catch a Mongo database should contain a single collection to display the database while querying.</p>\n<pre><code>`MongoClient client = MongoClients.create(CONNECTION_URL);\n    System.out.println(&quot;Connection with database established successfully&quot;);`\n    \n    String databaseName = &quot;SK_BANK_LTD&quot;;\n    \n    System.out.println(&quot;Trying to create a database :- &quot;+databaseName);\n    MongoDatabase db = client.getDatabase(databaseName);\n</code></pre>\n<p>By running the following code the database wont be visible as it does not contain any collection so add a dummy collection in the database while creating a database by `MongoClient client = MongoClients.create(CONNECTION_URL);\nSystem.out.println(&quot;Connection with database established successfully&quot;);</p>\n<pre><code>    String databaseName = &quot;SK_BANK_LTD&quot;;\n    \n    System.out.println(&quot;Trying to create a database :- &quot;+databaseName);\n    MongoDatabase db = client.getDatabase(databaseName);\n    \n    Document test = new Document().append(&quot;createdBy&quot;, &quot;Binson&quot;);\n    db.getCollection(&quot;test&quot;).insertOne(test);\n    \n    System.out.println(&quot;Database: &quot; + databaseName + &quot;created successfully&quot;);`\n</code></pre>\n<p>Make sure your database does not contain the following characters which are prohibited by mongoDB.</p>\n<p>'\\0', '/', '\\', ' ', '&quot;', '.'</p>\n"}],"owner":{"account_id":11385356,"reputation":43,"user_id":8347010,"display_name":"adnan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1831,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"accepted_answer_id":45285512,"answer_count":3,"score":3,"last_activity_date":1687327593,"creation_date":1500912668,"question_id":45285368,"body_markdown":"I can drop a database with the following statement:\r\n\r\n    MongoClient mongo = new MongoClient(&quot;localhost&quot;, 27017);\r\n    mongo.dropDatabase(&quot;d&quot;);\r\n\r\nHow can I create a database?","title":"how can i create mongodb database from java","body":"<p>I can drop a database with the following statement:</p>\n\n<pre><code>MongoClient mongo = new MongoClient(\"localhost\", 27017);\nmongo.dropDatabase(\"d\");\n</code></pre>\n\n<p>How can I create a database?</p>\n"},{"tags":["python","java"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1687187480,"post_id":76507404,"comment_id":134898271,"body_markdown":"I removed the [jep] tag as this question isn&#39;t related to Java Enhancement Proposals and there doesn&#39;t seem to be a tag for the `jep` library.","body":"I removed the [jep] tag as this question isn&#39;t related to Java Enhancement Proposals and there doesn&#39;t seem to be a tag for the <code>jep</code> library."}],"answers":[{"tags":[],"owner":{"account_id":17363872,"reputation":35,"user_id":15980587,"display_name":"jenny"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687327139,"creation_date":1687327139,"answer_id":76520351,"question_id":76507404,"body_markdown":"So I managed. Apparently when using Jep, it is possible to import the Java object on the Python side and call its functions. No extra work is needed on the Python side.","title":"Using Jep to modify java object","body":"<p>So I managed. Apparently when using Jep, it is possible to import the Java object on the Python side and call its functions. No extra work is needed on the Python side.</p>\n"}],"owner":{"account_id":17363872,"reputation":35,"user_id":15980587,"display_name":"jenny"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":118,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1687327139,"creation_date":1687183467,"question_id":76507404,"body_markdown":"I&#39;ve read a lot of documentation and questions here on Stack Overflow, but I&#39;m still struggling to accomplish the task.\r\n\r\nI have a java object (JobInitDTO) that I created. I want to be able to run an embedded python code that will get the Java object and will be able to manipulate the object using getters and setters on the Python side. Eventually the object that will be returned from the Python function should be the same Java object- after the required modifications.\r\n\r\nOn my java side I have:\r\n\r\n    @PostConstruct\r\n    public void init() {\r\n        String pythonFolder = System.getenv(&quot;DYLD_LIBRARY_PATH&quot;);\r\n        String jepPath = pythonFolder + &quot;/libjep.jnilib&quot;;\r\n\r\n        if (!Files.exists(Path.of(jepPath))){\r\n            jepPath = pythonFolder + &quot;/libjep.so&quot;;\r\n        }\r\n        MainInterpreter.setJepLibraryPath(jepPath);\r\n\r\n        // set path for python docs with python script to run\r\n        jep.JepConfig jepConf = new JepConfig();\r\n        jepConf.addIncludePaths(System.getProperty(&quot;user.dir&quot;)+&quot;/src/main/Python/&quot;);\r\n        jepConf.addIncludePaths(pythonFolder);\r\n        SharedInterpreter.setConfig(jepConf);\r\n        SharedInterpreter subInterp = new SharedInterpreter();\r\n\r\n        subInterp.eval(&quot;import Profiler&quot;);\r\n \r\n\r\n        JobInitDTO jobInitDTO = new JobInitDTO();\r\n        subInterp.set(&quot;job&quot;,jobInitDTO);\r\n        subInterp.eval(&quot;res = p.getJobInit(job)&quot;);\r\n        System.out.println(subInterp.getValue(&quot;res&quot;));\r\n\r\n\r\nOn the Python side, the profiler.py file indeed receives the Object, but I can&#39;t use its functions or access its fields. To my understanding, I need to represent the java object on the Python side, and this is where I&#39;m struggle to find out how to achieve it.\r\n\r\nProfiler.py looks something like that:\r\n\r\n\r\n    def getJobInit(job):\r\n         \r\n         &lt;set stuff in job&gt;\r\n    \r\n         return job\r\n\r\nWill appreciate your help!\r\n","title":"Using Jep to modify java object","body":"<p>I've read a lot of documentation and questions here on Stack Overflow, but I'm still struggling to accomplish the task.</p>\n<p>I have a java object (JobInitDTO) that I created. I want to be able to run an embedded python code that will get the Java object and will be able to manipulate the object using getters and setters on the Python side. Eventually the object that will be returned from the Python function should be the same Java object- after the required modifications.</p>\n<p>On my java side I have:</p>\n<pre><code>@PostConstruct\npublic void init() {\n    String pythonFolder = System.getenv(&quot;DYLD_LIBRARY_PATH&quot;);\n    String jepPath = pythonFolder + &quot;/libjep.jnilib&quot;;\n\n    if (!Files.exists(Path.of(jepPath))){\n        jepPath = pythonFolder + &quot;/libjep.so&quot;;\n    }\n    MainInterpreter.setJepLibraryPath(jepPath);\n\n    // set path for python docs with python script to run\n    jep.JepConfig jepConf = new JepConfig();\n    jepConf.addIncludePaths(System.getProperty(&quot;user.dir&quot;)+&quot;/src/main/Python/&quot;);\n    jepConf.addIncludePaths(pythonFolder);\n    SharedInterpreter.setConfig(jepConf);\n    SharedInterpreter subInterp = new SharedInterpreter();\n\n    subInterp.eval(&quot;import Profiler&quot;);\n\n\n    JobInitDTO jobInitDTO = new JobInitDTO();\n    subInterp.set(&quot;job&quot;,jobInitDTO);\n    subInterp.eval(&quot;res = p.getJobInit(job)&quot;);\n    System.out.println(subInterp.getValue(&quot;res&quot;));\n</code></pre>\n<p>On the Python side, the profiler.py file indeed receives the Object, but I can't use its functions or access its fields. To my understanding, I need to represent the java object on the Python side, and this is where I'm struggle to find out how to achieve it.</p>\n<p>Profiler.py looks something like that:</p>\n<pre><code>def getJobInit(job):\n     \n     &lt;set stuff in job&gt;\n\n     return job\n</code></pre>\n<p>Will appreciate your help!</p>\n"},{"tags":["java","intellij-idea","java-8","ant","java-11"],"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1687264842,"post_id":76514755,"comment_id":134909755,"body_markdown":"The `javax.annotation` package is no longer included in Java, you need to add the appropriate dependency.","body":"The <code>javax.annotation</code> package is no longer included in Java, you need to add the appropriate dependency."},{"owner":{"account_id":9782480,"reputation":57,"user_id":7249929,"display_name":"Nani"},"score":0,"creation_date":1687266319,"post_id":76514755,"comment_id":134910175,"body_markdown":"@MarkRotteveel Mine is a ant project. Any suggestion on the replacement for javax.annotation package?","body":"@MarkRotteveel Mine is a ant project. Any suggestion on the replacement for javax.annotation package?"},{"owner":{"account_id":28803214,"reputation":201,"user_id":22059627,"display_name":"Miguel Monteiro"},"score":1,"creation_date":1687267693,"post_id":76514755,"comment_id":134910542,"body_markdown":"Try to try to download the JAR from [Maven central](https://mvnrepository.com/artifact/javax.annotation/javax.annotation-api) and add the [dependency to ant project](https://stackoverflow.com/questions/26650590/how-to-add-dependency-to-ant-project)","body":"Try to try to download the JAR from <a href=\"https://mvnrepository.com/artifact/javax.annotation/javax.annotation-api\" rel=\"nofollow noreferrer\">Maven central</a> and add the <a href=\"https://stackoverflow.com/questions/26650590/how-to-add-dependency-to-ant-project\">dependency to ant project</a>"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":2,"creation_date":1687268035,"post_id":76514755,"comment_id":134910637,"body_markdown":"Also, make sure you&#39;re using an Ant version which is compatible with Java 11.","body":"Also, make sure you&#39;re using an Ant version which is compatible with Java 11."},{"owner":{"account_id":9782480,"reputation":57,"user_id":7249929,"display_name":"Nani"},"score":1,"creation_date":1687355066,"post_id":76514755,"comment_id":134925224,"body_markdown":"@MarkRotteveel Added latest jar and upgraded ant version. Solution worked. Appreciate your help!","body":"@MarkRotteveel Added latest jar and upgraded ant version. Solution worked. Appreciate your help!"},{"owner":{"account_id":9782480,"reputation":57,"user_id":7249929,"display_name":"Nani"},"score":0,"creation_date":1687355085,"post_id":76514755,"comment_id":134925233,"body_markdown":"@MiguelMonteiro Added latest jar and upgraded ant version. Solution worked. Appreciate your help!","body":"@MiguelMonteiro Added latest jar and upgraded ant version. Solution worked. Appreciate your help!"}],"owner":{"account_id":9782480,"reputation":57,"user_id":7249929,"display_name":"Nani"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1687265631,"answer_count":0,"score":0,"last_activity_date":1687326902,"creation_date":1687264444,"question_id":76514755,"body_markdown":"I am trying to upgrade my java application from Java 7 to Java 11 version. My local is setup with jdk11 and Java_Home is updated as well. Running the app in Intellij 2023.1 IDE which is the latest version. \r\n\r\nWhen running the local application which is pointing to Jdk11 facing Error: &#39;*Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: javax/annotation/PreDestroy*&#39;. \r\nChanges made to my local are the jdk previously was pointing to java 8, now it is pointing to java 11.\r\n\r\nI have read previous posts on the same error and everyone suggested for a downgrade of the jdk from 11 to 8. But in my case I have to upgrade the application to Java 11 and the the project is on Ant build.\r\n\r\nAny help is appreciated. Please let me know if any additional information is required.\r\n\r\nI have tried upgrading the libraries and still the same issue is persist.","title":"Java 8 to 11 Upgrade Error- Exception java.lang.NoClassDefFoundError: javax/annotation/PreDestroy. Unable to run project despite the dependency update","body":"<p>I am trying to upgrade my java application from Java 7 to Java 11 version. My local is setup with jdk11 and Java_Home is updated as well. Running the app in Intellij 2023.1 IDE which is the latest version.</p>\n<p>When running the local application which is pointing to Jdk11 facing Error: '<em>Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: javax/annotation/PreDestroy</em>'.\nChanges made to my local are the jdk previously was pointing to java 8, now it is pointing to java 11.</p>\n<p>I have read previous posts on the same error and everyone suggested for a downgrade of the jdk from 11 to 8. But in my case I have to upgrade the application to Java 11 and the the project is on Ant build.</p>\n<p>Any help is appreciated. Please let me know if any additional information is required.</p>\n<p>I have tried upgrading the libraries and still the same issue is persist.</p>\n"},{"tags":["java","matrix","3d","coordinate-transformation","projection-matrix"],"comments":[{"owner":{"account_id":2386214,"reputation":323,"user_id":2087147,"display_name":"Andr&#233; Aichert"},"score":0,"creation_date":1686729750,"post_id":76398774,"comment_id":134837626,"body_markdown":"With affine matrices you were on the right track. This boils down to the fact that your pixels are rectangular. Read up on the viewing frustum and how it is related to the MVP.","body":"With affine matrices you were on the right track. This boils down to the fact that your pixels are rectangular. Read up on the viewing frustum and how it is related to the MVP."},{"owner":{"account_id":17592368,"reputation":13891,"user_id":12763954,"display_name":"Olivier"},"score":0,"creation_date":1686813191,"post_id":76398774,"comment_id":134851476,"body_markdown":"This looks like a math question. You should formulate it mathematically and ask it on math.stackexchange.com.","body":"This looks like a math question. You should formulate it mathematically and ask it on math.stackexchange.com."},{"owner":{"account_id":935202,"reputation":49046,"user_id":964243,"accept_rate":66,"display_name":"Boann"},"score":0,"creation_date":1686833216,"post_id":76398774,"comment_id":134855688,"body_markdown":"@Olivier There&#39;s no way I&#39;d understand any answer they would give. It would be like TAOCP. I need an answer from programmers.","body":"@Olivier There&#39;s no way I&#39;d understand any answer they would give. It would be like TAOCP. I need an answer from programmers."},{"owner":{"account_id":5949675,"reputation":2128,"user_id":4678126,"display_name":"Yogev Neumann"},"score":0,"creation_date":1687148040,"post_id":76398774,"comment_id":134890968,"body_markdown":"I&#39;m not sure if that will help or distract you, but according to MS Direct3D 10 [D3DXMatrixPerspectiveFovLH](https://learn.microsoft.com/en-us/windows/win32/direct3d10/d3d10-d3dxmatrixperspectivefovlh) function (replaced by [XMMatrixPerspectiveFovLH](https://learn.microsoft.com/en-us/windows/win32/api/directxmath/nf-directxmath-xmmatrixperspectivefovlh) ), it should be `e34 = 1;` and `e43 = Q * -znear;`","body":"I&#39;m not sure if that will help or distract you, but according to MS Direct3D 10 <a href=\"https://learn.microsoft.com/en-us/windows/win32/direct3d10/d3d10-d3dxmatrixperspectivefovlh\" rel=\"nofollow noreferrer\">D3DXMatrixPerspectiveFovLH</a> function (replaced by <a href=\"https://learn.microsoft.com/en-us/windows/win32/api/directxmath/nf-directxmath-xmmatrixperspectivefovlh\" rel=\"nofollow noreferrer\">XMMatrixPerspectiveFovLH</a> ), it should be <code>e34 = 1;</code> and <code>e43 = Q * -znear;</code>"},{"owner":{"account_id":935202,"reputation":49046,"user_id":964243,"accept_rate":66,"display_name":"Boann"},"score":1,"creation_date":1687149990,"post_id":76398774,"comment_id":134891120,"body_markdown":"@YogevNeumann That&#39;s fine. DirectX matrices have the transpose layout. I originally got the perspective matrix from Wine&#39;s implementation of the DirectX functions, but I use the OpenGL layout.","body":"@YogevNeumann That&#39;s fine. DirectX matrices have the transpose layout. I originally got the perspective matrix from Wine&#39;s implementation of the DirectX functions, but I use the OpenGL layout."}],"answers":[{"comments":[{"owner":{"account_id":935202,"reputation":49046,"user_id":964243,"accept_rate":66,"display_name":"Boann"},"score":0,"creation_date":1687325632,"post_id":76519764,"comment_id":134918909,"body_markdown":"I&#39;m really struggling to digest the math here, but thank you. Can I assume the inverse will always have elements wx = 0 and wy = 0 if those elements are also 0 in the original projection matrix? (And is that typical of any projection matrix??)","body":"I&#39;m really struggling to digest the math here, but thank you. Can I assume the inverse will always have elements wx = 0 and wy = 0 if those elements are also 0 in the original projection matrix? (And is that typical of any projection matrix??)"},{"owner":{"account_id":11730609,"reputation":36976,"user_id":8586227,"display_name":"Davis Herring"},"score":1,"creation_date":1687327681,"post_id":76519764,"comment_id":134919195,"body_markdown":"The proof relies both on `e41` and `e42` being 0 as established by `perspectiveFovLH` and on `e41`, `e42`, and `e43` being 0 in the camera position matrix (as described in your linked article).  Your [projection matrix](https://en.wikipedia.org/wiki/3D_projection#Mathematical_formula) has that form because, as is common, you project along _z_ (after applying the camera position).  Note that &quot;projection matrix&quot; means [something else](https://en.wikipedia.org/wiki/Linear_projection) in general linear algebra.","body":"The proof relies both on <code>e41</code> and <code>e42</code> being 0 as established by <code>perspectiveFovLH</code> and on <code>e41</code>, <code>e42</code>, and <code>e43</code> being 0 in the camera position matrix (as described in your linked article).  Your <a href=\"https://en.wikipedia.org/wiki/3D_projection#Mathematical_formula\" rel=\"nofollow noreferrer\">projection matrix</a> has that form because, as is common, you project along <i>z</i> (after applying the camera position).  Note that &quot;projection matrix&quot; means <a href=\"https://en.wikipedia.org/wiki/Linear_projection\" rel=\"nofollow noreferrer\">something else</a> in general linear algebra."},{"owner":{"account_id":935202,"reputation":49046,"user_id":964243,"accept_rate":66,"display_name":"Boann"},"score":0,"creation_date":1687371376,"post_id":76519764,"comment_id":134928912,"body_markdown":"Thank you. I don&#39;t fully follow the math but I trust your word. So I&#39;m satisfied I can hard-code the dependence on e41=e42=0 in the inverse matrix without it being a practical limitation.","body":"Thank you. I don&#39;t fully follow the math but I trust your word. So I&#39;m satisfied I can hard-code the dependence on e41=e42=0 in the inverse matrix without it being a practical limitation."}],"tags":[],"owner":{"account_id":11730609,"reputation":36976,"user_id":8586227,"display_name":"Davis Herring"},"comment_count":3,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1687326744,"creation_date":1687318293,"answer_id":76519764,"question_id":76398774,"body_markdown":"For the given `perspectiveFovLH` matrix **P** and any homogeneous/affine transformation matrix **M**, the inverse **R**≔(**PM**)&lt;sup&gt;&amp;minus;1&lt;/sup&gt; does **always** have _R_&lt;sub&gt;wx&lt;/sub&gt;=_R_&lt;sub&gt;wy&lt;/sub&gt;=0.\r\n\r\n## Proof\r\nTo see this, let **t** be **Mv** for some input **v**, and let **s** be **Pt**=**PMv**, such that **v**=**Rs**.\r\nNote that every **M** has _M_&lt;sub&gt;wx&lt;/sub&gt;=_M_&lt;sub&gt;wy&lt;/sub&gt;=_M_&lt;sub&gt;wz&lt;/sub&gt;=0 and _M_&lt;sub&gt;ww&lt;/sub&gt;=1, such that _t_&lt;sub&gt;w&lt;/sub&gt;=_v_&lt;sub&gt;w&lt;/sub&gt;.\r\nThen observe from the sparseness of **P** that _s_&lt;sub&gt;w&lt;/sub&gt;=_t_&lt;sub&gt;z&lt;/sub&gt; and that\r\n&gt; _s_&lt;sub&gt;z&lt;/sub&gt;=_Qt_&lt;sub&gt;z&lt;/sub&gt; &amp;minus; _Qz_&lt;sub&gt;0&lt;/sub&gt;_t_&lt;sub&gt;w&lt;/sub&gt;  \r\n=_Qs_&lt;sub&gt;w&lt;/sub&gt; &amp;minus; _Qz_&lt;sub&gt;0&lt;/sub&gt;_v_&lt;sub&gt;w&lt;/sub&gt;\r\n\r\nSolving the last equation yields\r\n&gt; _v_&lt;sub&gt;w&lt;/sub&gt;=(_Qs_&lt;sub&gt;w&lt;/sub&gt; &amp;minus; _s_&lt;sub&gt;z&lt;/sub&gt;)/(_Qz_&lt;sub&gt;0&lt;/sub&gt;)\r\n\r\nThis formula manifestly depends only on _s_&lt;sub&gt;z&lt;/sub&gt; and _s_&lt;sub&gt;w&lt;/sub&gt;, demonstrating as supposed that _R_&lt;sub&gt;wx&lt;/sub&gt;=_R_&lt;sub&gt;wy&lt;/sub&gt;=0.\r\n\r\n## Rationale\r\nWe can understand this in a non-formulaic fashion: **3&amp;times;4** matrices are sufficient for perspective on a screen, because you need only 2 output coordinates and the one homogeneous coordinate by which to divide them.  Using the full 4&amp;times;4 matrix introduces a redundancy because both the _z_ and _w_ coordinates of the result derive only from the _z_ coordinate of the input (and the known constant 1 for the initial _w_).  Regardless of the world transformation applied before the projection, you still have those two equations in the transformed _z_ and the **original** _w_, which is enough to solve for them.","title":"Why are two elements of my inverse projection matrix always 0?","body":"<p>For the given <code>perspectiveFovLH</code> matrix <strong>P</strong> and any homogeneous/affine transformation matrix <strong>M</strong>, the inverse <strong>R</strong>≔(<strong>PM</strong>)<sup>−1</sup> does <strong>always</strong> have <em>R</em><sub>wx</sub>=<em>R</em><sub>wy</sub>=0.</p>\n<h2>Proof</h2>\n<p>To see this, let <strong>t</strong> be <strong>Mv</strong> for some input <strong>v</strong>, and let <strong>s</strong> be <strong>Pt</strong>=<strong>PMv</strong>, such that <strong>v</strong>=<strong>Rs</strong>.\nNote that every <strong>M</strong> has <em>M</em><sub>wx</sub>=<em>M</em><sub>wy</sub>=<em>M</em><sub>wz</sub>=0 and <em>M</em><sub>ww</sub>=1, such that <em>t</em><sub>w</sub>=<em>v</em><sub>w</sub>.\nThen observe from the sparseness of <strong>P</strong> that <em>s</em><sub>w</sub>=<em>t</em><sub>z</sub> and that</p>\n<blockquote>\n<p><em>s</em><sub>z</sub>=<em>Qt</em><sub>z</sub> − <em>Qz</em><sub>0</sub><em>t</em><sub>w</sub><br />\n=<em>Qs</em><sub>w</sub> − <em>Qz</em><sub>0</sub><em>v</em><sub>w</sub></p>\n</blockquote>\n<p>Solving the last equation yields</p>\n<blockquote>\n<p><em>v</em><sub>w</sub>=(<em>Qs</em><sub>w</sub> − <em>s</em><sub>z</sub>)/(<em>Qz</em><sub>0</sub>)</p>\n</blockquote>\n<p>This formula manifestly depends only on <em>s</em><sub>z</sub> and <em>s</em><sub>w</sub>, demonstrating as supposed that <em>R</em><sub>wx</sub>=<em>R</em><sub>wy</sub>=0.</p>\n<h2>Rationale</h2>\n<p>We can understand this in a non-formulaic fashion: <strong>3×4</strong> matrices are sufficient for perspective on a screen, because you need only 2 output coordinates and the one homogeneous coordinate by which to divide them.  Using the full 4×4 matrix introduces a redundancy because both the <em>z</em> and <em>w</em> coordinates of the result derive only from the <em>z</em> coordinate of the input (and the known constant 1 for the initial <em>w</em>).  Regardless of the world transformation applied before the projection, you still have those two equations in the transformed <em>z</em> and the <strong>original</strong> <em>w</em>, which is enough to solve for them.</p>\n"}],"owner":{"account_id":935202,"reputation":49046,"user_id":964243,"accept_rate":66,"display_name":"Boann"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":300,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":76519764,"answer_count":1,"score":2,"last_activity_date":1687326744,"creation_date":1685847311,"question_id":76398774,"body_markdown":"I&#39;m writing a ray tracer for which I need to cast rays from the screen into the world. I&#39;m using the inverse of the view-projection-viewport matrix to get back from screen pixel coordinates to world space coordinates.\r\n\r\nI noticed by accident that two elements of the inverse matrix are always 0, no matter how or where I move, zoom, orbit, or spin the camera. I don&#39;t understand the projection matrix deeply enough to know why.\r\n\r\nThis is a hopefully-relevant portion of my Matrix class:\r\n\r\n\t// OpenGL-style column-vectors layout.\r\n\tpublic final class Matrix4 {\r\n\t\tpublic double e11, e12, e13, e14;\r\n\t\tpublic double e21, e22, e23, e24;\r\n\t\tpublic double e31, e32, e33, e34;\r\n\t\tpublic double e41, e42, e43, e44;\r\n\t\t\r\n\t\tpublic void transform(Vec3 v) {\r\n\t\t\tdouble x = v.x, y = v.y, z = v.z;\r\n\t\t\tdouble w = (x * e41) + (y * e42) + (z * e43) + (e44);\r\n\t\t\tdouble norm = 1 / w;\r\n\t\t\tv.x = ((x * e11) + (y * e12) + (z * e13) + (e14)) * norm;\r\n\t\t\tv.y = ((x * e21) + (y * e22) + (z * e23) + (e24)) * norm;\r\n\t\t\tv.z = ((x * e31) + (y * e32) + (z * e33) + (e34)) * norm;\r\n\t\t}\r\n\t\t\r\n\t\tpublic void perspectiveFovLH(double fovy, double aspect, double znear, double zfar) {\r\n\t\t\tdouble yscale = 1 / tan(fovy * 0.5);\r\n\t\t\tdouble xscale = yscale / aspect;\r\n\t\t\tdouble Q = zfar / (zfar - znear);\r\n\t\t\t\r\n\t\t\te11 = xscale;\r\n\t\t\te22 = yscale;\r\n\t\t\te33 = Q;\r\n\t\t\te34 = Q * -znear;\r\n\t\t\te43 = 1;\r\n\t\t}\r\n\t}\r\n\r\nThis is the view-projection-viewport matrix after moving the camera around for a while:\r\n\r\n    [ -331.62051997,  -616.31014741, -927.45531750,  354532.72229686\r\n       158.60434983, -1091.70516425,  427.49500301,  420008.37868979\r\n         0.75468455,    -0.51045982,   -0.41337968,     766.88486375\r\n         0.75430721,    -0.51020459,   -0.41317299,     771.50142132 ]\r\n\r\nAnd this is its inverse:\r\n\r\n    [ -0.00058203, -0.00019009,  113.94949731, -112.89669211\r\n      -0.00033747, -0.00072765,  -84.29481494,   84.34162134\r\n      -0.00064586,  0.00055151,  -61.14292715,   60.77360931\r\n      -0.00000000, -0.00000000,   -0.19990000,    0.20000000 ]\r\n\r\nMost of the elements change continuously as I move the camera. The two elements in the bottom right of the inverse seem to be directly related to the znear and zfar parameters. The two elements in the bottom left always seem to be constant 0.\r\n\r\nThis fact is useful in the transform method. If e41 and e42 are 0, and input z is always 0 or 1 when casting the near and far points of a ray into the screen, the w division can be computed ahead of time, rather than per-pixel. This is working and is a useful speedup.\r\n\r\nHowever, I&#39;m worried this assumption will break something later. So I&#39;d like to know, what does it mean that these two elements are 0, and when will this assumption hold?\r\n\r\n----\r\n\r\nEdit: I [found out](https://www.brainvoyager.com/bv/doc/UsersGuide/CoordsAndTransforms/SpatialTransformationMatrices.html) that an affine 4x4 matrix has the last four elements (0 0 0 1). My inverse matrix almost matches up. But what is the magic that makes the inverse of a perspective matrix be affine, or, almost affine?","title":"Why are two elements of my inverse projection matrix always 0?","body":"<p>I'm writing a ray tracer for which I need to cast rays from the screen into the world. I'm using the inverse of the view-projection-viewport matrix to get back from screen pixel coordinates to world space coordinates.</p>\n<p>I noticed by accident that two elements of the inverse matrix are always 0, no matter how or where I move, zoom, orbit, or spin the camera. I don't understand the projection matrix deeply enough to know why.</p>\n<p>This is a hopefully-relevant portion of my Matrix class:</p>\n<pre><code>// OpenGL-style column-vectors layout.\npublic final class Matrix4 {\n    public double e11, e12, e13, e14;\n    public double e21, e22, e23, e24;\n    public double e31, e32, e33, e34;\n    public double e41, e42, e43, e44;\n    \n    public void transform(Vec3 v) {\n        double x = v.x, y = v.y, z = v.z;\n        double w = (x * e41) + (y * e42) + (z * e43) + (e44);\n        double norm = 1 / w;\n        v.x = ((x * e11) + (y * e12) + (z * e13) + (e14)) * norm;\n        v.y = ((x * e21) + (y * e22) + (z * e23) + (e24)) * norm;\n        v.z = ((x * e31) + (y * e32) + (z * e33) + (e34)) * norm;\n    }\n    \n    public void perspectiveFovLH(double fovy, double aspect, double znear, double zfar) {\n        double yscale = 1 / tan(fovy * 0.5);\n        double xscale = yscale / aspect;\n        double Q = zfar / (zfar - znear);\n        \n        e11 = xscale;\n        e22 = yscale;\n        e33 = Q;\n        e34 = Q * -znear;\n        e43 = 1;\n    }\n}\n</code></pre>\n<p>This is the view-projection-viewport matrix after moving the camera around for a while:</p>\n<pre><code>[ -331.62051997,  -616.31014741, -927.45531750,  354532.72229686\n   158.60434983, -1091.70516425,  427.49500301,  420008.37868979\n     0.75468455,    -0.51045982,   -0.41337968,     766.88486375\n     0.75430721,    -0.51020459,   -0.41317299,     771.50142132 ]\n</code></pre>\n<p>And this is its inverse:</p>\n<pre><code>[ -0.00058203, -0.00019009,  113.94949731, -112.89669211\n  -0.00033747, -0.00072765,  -84.29481494,   84.34162134\n  -0.00064586,  0.00055151,  -61.14292715,   60.77360931\n  -0.00000000, -0.00000000,   -0.19990000,    0.20000000 ]\n</code></pre>\n<p>Most of the elements change continuously as I move the camera. The two elements in the bottom right of the inverse seem to be directly related to the znear and zfar parameters. The two elements in the bottom left always seem to be constant 0.</p>\n<p>This fact is useful in the transform method. If e41 and e42 are 0, and input z is always 0 or 1 when casting the near and far points of a ray into the screen, the w division can be computed ahead of time, rather than per-pixel. This is working and is a useful speedup.</p>\n<p>However, I'm worried this assumption will break something later. So I'd like to know, what does it mean that these two elements are 0, and when will this assumption hold?</p>\n<hr />\n<p>Edit: I <a href=\"https://www.brainvoyager.com/bv/doc/UsersGuide/CoordsAndTransforms/SpatialTransformationMatrices.html\" rel=\"nofollow noreferrer\">found out</a> that an affine 4x4 matrix has the last four elements (0 0 0 1). My inverse matrix almost matches up. But what is the magic that makes the inverse of a perspective matrix be affine, or, almost affine?</p>\n"},{"tags":["java","spring","spring-webflux","project-reactor","springmockito"],"answers":[{"tags":[],"owner":{"account_id":3936011,"reputation":1722,"user_id":3252391,"display_name":"Johan Nordlinder"},"comment_count":0,"down_vote_count":0,"up_vote_count":19,"is_accepted":true,"score":19,"last_activity_date":1687326435,"creation_date":1648976935,"answer_id":71724474,"question_id":71724227,"body_markdown":"**@Mock**\r\n\r\nUsed to make Mockito create a mock object.\r\n\r\n**@InjectMock**\r\n\r\nWhen you want Mockito to create an instance of an object and use the mocks annotated with `@Mock` as its dependencies.\r\n\r\n**@AutoWired**\r\n\r\nUsed when you want to autowire a bean from the spring context, works exactly the same as in normal code but can only be used in tests that actually creates an application context, such as tests annotated with `@WebMvcTest` or `@SpringBootTest`.\r\n\r\n**@MockBean**\r\n\r\nCan be used to add mock objects to the Spring application context. The mock will replace any existing bean of the same type in the application context. If no bean of the same type is defined, a new one will be added. Often used together with `@SpringBootTest`\r\n\r\nSo normally you either:\r\n\r\n - Use `@Mock` and `@InjectMocks` for running tests without a Spring\r\n   context, this is preferred as it&#39;s much faster.\r\n - Use `@SpringBootTest` or `@SpringMvcTest` to start a spring context together with `@MockBean` to create mock objects and `@Autowired` to get an instance of class you want to test, the mockbeans will be used for its autowired dependencies. You use this when writing integration tests for code that interact with a database or want to test your REST API controllers.","title":"When to use and not use @Mock annotation, @MockBean annotation, @InjectMock annotation &amp; @Autowired annotation in a spring webflux reactive project","body":"<p><strong>@Mock</strong></p>\n<p>Used to make Mockito create a mock object.</p>\n<p><strong>@InjectMock</strong></p>\n<p>When you want Mockito to create an instance of an object and use the mocks annotated with <code>@Mock</code> as its dependencies.</p>\n<p><strong>@AutoWired</strong></p>\n<p>Used when you want to autowire a bean from the spring context, works exactly the same as in normal code but can only be used in tests that actually creates an application context, such as tests annotated with <code>@WebMvcTest</code> or <code>@SpringBootTest</code>.</p>\n<p><strong>@MockBean</strong></p>\n<p>Can be used to add mock objects to the Spring application context. The mock will replace any existing bean of the same type in the application context. If no bean of the same type is defined, a new one will be added. Often used together with <code>@SpringBootTest</code></p>\n<p>So normally you either:</p>\n<ul>\n<li>Use <code>@Mock</code> and <code>@InjectMocks</code> for running tests without a Spring\ncontext, this is preferred as it's much faster.</li>\n<li>Use <code>@SpringBootTest</code> or <code>@SpringMvcTest</code> to start a spring context together with <code>@MockBean</code> to create mock objects and <code>@Autowired</code> to get an instance of class you want to test, the mockbeans will be used for its autowired dependencies. You use this when writing integration tests for code that interact with a database or want to test your REST API controllers.</li>\n</ul>\n"}],"owner":{"account_id":20185812,"reputation":249,"user_id":14805169,"display_name":"Santrupta Dash"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4299,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":71724474,"answer_count":1,"score":11,"last_activity_date":1687326435,"creation_date":1648974615,"question_id":71724227,"body_markdown":"Can you please explain when to use below annotations and when not to use those. I am pretty new to testing frameworks and confused with all the answers in the web.  \r\n\r\n    @Mock\r\n    private Resource resource;\r\n    @MockBean\r\n    private Resource resource;\r\n    @InjectMock\r\n    private ProductService productService; \r\n    @AutoWired\r\n    Private ProductRepository productRepo;\r\n","title":"When to use and not use @Mock annotation, @MockBean annotation, @InjectMock annotation &amp; @Autowired annotation in a spring webflux reactive project","body":"<p>Can you please explain when to use below annotations and when not to use those. I am pretty new to testing frameworks and confused with all the answers in the web.</p>\n<pre><code>@Mock\nprivate Resource resource;\n@MockBean\nprivate Resource resource;\n@InjectMock\nprivate ProductService productService; \n@AutoWired\nPrivate ProductRepository productRepo;\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":7803,"page":358,"page_size":100}
